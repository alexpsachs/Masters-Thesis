[
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/5280",
        "pull_request_review_id": null,
        "id": 5280,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA=",
        "diff_hunk": "@@ -27,16 +28,29 @@ this.Server = function (root, options) {\n     this.defaultHeaders  = {};\n     this.options.headers = this.options.headers || {};\n \n-    if ('cache' in this.options) {\n-        if (typeof(this.options.cache) === 'number') {\n-            this.cache = this.options.cache;\n-        } else if (! this.options.cache) {\n-            this.cache = false;\n+    if (this.cache in this.options) {",
        "path": "lib/node-static.js",
        "position": 17,
        "original_position": 17,
        "commit_id": "8347b7cf16c03e5b241406aaf8e57c8e4f26909f",
        "original_commit_id": "9673c096a557e2cfa8fad5c7101ae84014c8957f",
        "user": {
            "login": "novemberborn",
            "id": 33538,
            "node_id": "MDQ6VXNlcjMzNTM4",
            "avatar_url": "https://avatars0.githubusercontent.com/u/33538?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/novemberborn",
            "html_url": "https://github.com/novemberborn",
            "followers_url": "https://api.github.com/users/novemberborn/followers",
            "following_url": "https://api.github.com/users/novemberborn/following{/other_user}",
            "gists_url": "https://api.github.com/users/novemberborn/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/novemberborn/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/novemberborn/subscriptions",
            "organizations_url": "https://api.github.com/users/novemberborn/orgs",
            "repos_url": "https://api.github.com/users/novemberborn/repos",
            "events_url": "https://api.github.com/users/novemberborn/events{/privacy}",
            "received_events_url": "https://api.github.com/users/novemberborn/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Shouldn't this be `\"cache\" in this.options`?\n",
        "created_at": "2011-03-01T15:24:41Z",
        "updated_at": "2011-04-19T20:34:23Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/21#discussion_r5280",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/21",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/5280"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/21#discussion_r5280"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/21"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079163",
        "pull_request_review_id": null,
        "id": 1079163,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNzkxNjM=",
        "diff_hunk": "@@ -204,6 +202,11 @@ this.Server.prototype.respond = function (pathname, status, _headers, files, sta",
        "path": "lib/node-static.js",
        "position": 9,
        "original_position": 9,
        "commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "original_commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Where is the Content-Type?\n\n```\nheaders['Content-Type']   = mime.contentTypes[fileExtension] || 'application/octet-stream';\n```\n",
        "created_at": "2012-06-29T21:39:29Z",
        "updated_at": "2012-06-29T21:39:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079163",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/60",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079163"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079163"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/60"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079174",
        "pull_request_review_id": null,
        "id": 1079174,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNzkxNzQ=",
        "diff_hunk": "@@ -204,6 +202,11 @@ this.Server.prototype.respond = function (pathname, status, _headers, files, sta",
        "path": "lib/node-static.js",
        "position": 9,
        "original_position": 9,
        "commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "original_commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "user": {
            "login": "domenic",
            "id": 617481,
            "node_id": "MDQ6VXNlcjYxNzQ4MQ==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/617481?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/domenic",
            "html_url": "https://github.com/domenic",
            "followers_url": "https://api.github.com/users/domenic/followers",
            "following_url": "https://api.github.com/users/domenic/following{/other_user}",
            "gists_url": "https://api.github.com/users/domenic/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/domenic/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/domenic/subscriptions",
            "organizations_url": "https://api.github.com/users/domenic/orgs",
            "repos_url": "https://api.github.com/users/domenic/repos",
            "events_url": "https://api.github.com/users/domenic/events{/privacy}",
            "received_events_url": "https://api.github.com/users/domenic/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "It's on the next line. Notice how GitHub only shows the three lines surrounding each changed chunk of the file.\n",
        "created_at": "2012-06-29T21:40:48Z",
        "updated_at": "2012-06-29T21:40:48Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079174",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/60",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079174"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079174"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/60"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079406",
        "pull_request_review_id": null,
        "id": 1079406,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDEwNzk0MDY=",
        "diff_hunk": "@@ -204,6 +202,11 @@ this.Server.prototype.respond = function (pathname, status, _headers, files, sta",
        "path": "lib/node-static.js",
        "position": 9,
        "original_position": 9,
        "commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "original_commit_id": "94bbfde4d6dbb82fa995faf0cb07bb99ac7ec4e3",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Thank you!\n\nMerge done. :thumbsup:\n",
        "created_at": "2012-06-29T22:23:27Z",
        "updated_at": "2012-06-29T22:23:27Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079406",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/60",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1079406"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/60#discussion_r1079406"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/60"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1408404",
        "pull_request_review_id": null,
        "id": 1408404,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MDg0MDQ=",
        "diff_hunk": "@@ -17,7 +17,8 @@ var serverInfo = 'node-static/' + this.version.join('.');\n this.store = {};\n this.indexStore = {};\n \n-this.Server = function (root, options) {\n+this.Server = function (root, options, indexFile) {",
        "path": "lib/node-static.js",
        "position": 5,
        "original_position": 5,
        "commit_id": "b21a0a2e50edab355c23667c255a9a5d3f8b4716",
        "original_commit_id": "b21a0a2e50edab355c23667c255a9a5d3f8b4716",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Hey!\n\nCan the indexFile be an option?\n\n`options[\"indexFile\"] = \"index.html\"`\n",
        "created_at": "2012-08-18T03:52:59Z",
        "updated_at": "2012-08-18T03:52:59Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/32#discussion_r1408404",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/32",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1408404"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/32#discussion_r1408404"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/32"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1408405",
        "pull_request_review_id": null,
        "id": 1408405,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MDg0MDU=",
        "diff_hunk": "@@ -47,7 +48,7 @@ this.Server = function (root, options) {\n };\n \n this.Server.prototype.serveDir = function (pathname, req, res, finish) {\n-    var htmlIndex = path.join(pathname, 'index.html'),\n+    var htmlIndex = path.join(pathname, this.indexFile || 'index.html'),",
        "path": "lib/node-static.js",
        "position": 15,
        "original_position": 15,
        "commit_id": "b21a0a2e50edab355c23667c255a9a5d3f8b4716",
        "original_commit_id": "b21a0a2e50edab355c23667c255a9a5d3f8b4716",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "`this.options[\"indexFile\"]  ||  \"index.html\"` ???\n",
        "created_at": "2012-08-18T03:53:33Z",
        "updated_at": "2012-08-18T03:53:33Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/32#discussion_r1408405",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/32",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1408405"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/32#discussion_r1408405"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/32"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1410745",
        "pull_request_review_id": null,
        "id": 1410745,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTA3NDU=",
        "diff_hunk": "@@ -65,6 +65,7 @@ this.contentTypes = {\n   \"nc\": \"application/x-netcdf\",\n   \"oda\": \"application/oda\",\n   \"ogm\": \"application/ogg\",",
        "path": "lib/node-static/mime.js",
        "position": 3,
        "original_position": 3,
        "commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "original_commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "> As a result OGM is no longer supported or developed and is formally discouraged by Xiph.org.[18] Today, video in Ogg is found with the .ogv file extension, which is formally specified and officially supported.\n\nI think that OGM isn't necessary. Do you need it?\n\nWiki says \n\n> Filename extension    .ogg, .ogv, .oga, .ogx, .spx, .opus\n",
        "created_at": "2012-08-20T00:18:33Z",
        "updated_at": "2012-08-20T00:18:33Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/64#discussion_r1410745",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/64",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1410745"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/64#discussion_r1410745"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/64"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1413452",
        "pull_request_review_id": null,
        "id": 1413452,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MTM0NTI=",
        "diff_hunk": "@@ -65,6 +65,7 @@ this.contentTypes = {\n   \"nc\": \"application/x-netcdf\",\n   \"oda\": \"application/oda\",\n   \"ogm\": \"application/ogg\",",
        "path": "lib/node-static/mime.js",
        "position": 3,
        "original_position": 3,
        "commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "original_commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "user": {
            "login": "pvwoods",
            "id": 531415,
            "node_id": "MDQ6VXNlcjUzMTQxNQ==",
            "avatar_url": "https://avatars2.githubusercontent.com/u/531415?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pvwoods",
            "html_url": "https://github.com/pvwoods",
            "followers_url": "https://api.github.com/users/pvwoods/followers",
            "following_url": "https://api.github.com/users/pvwoods/following{/other_user}",
            "gists_url": "https://api.github.com/users/pvwoods/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/pvwoods/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/pvwoods/subscriptions",
            "organizations_url": "https://api.github.com/users/pvwoods/orgs",
            "repos_url": "https://api.github.com/users/pvwoods/repos",
            "events_url": "https://api.github.com/users/pvwoods/events{/privacy}",
            "received_events_url": "https://api.github.com/users/pvwoods/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "The .ogm line certainly could be killed.  As I had mentioned above, an argument can be made for keeping it to support legacy formats, but in the strictest since of the spec, it is not supported.\n",
        "created_at": "2012-08-20T13:11:37Z",
        "updated_at": "2012-08-20T13:11:37Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/64#discussion_r1413452",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/64",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1413452"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/64#discussion_r1413452"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/64"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1434253",
        "pull_request_review_id": null,
        "id": 1434253,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE0MzQyNTM=",
        "diff_hunk": "@@ -65,6 +65,7 @@ this.contentTypes = {\n   \"nc\": \"application/x-netcdf\",\n   \"oda\": \"application/oda\",\n   \"ogm\": \"application/ogg\",",
        "path": "lib/node-static/mime.js",
        "position": 3,
        "original_position": 3,
        "commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "original_commit_id": "8c84b737d92cb6f062b55e49ab3d7bf93d3cf10f",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Thanks again @pvwoods!  Could you kill the line before the merge?\n",
        "created_at": "2012-08-22T11:49:23Z",
        "updated_at": "2012-08-22T11:49:23Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/64#discussion_r1434253",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/64",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1434253"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/64#discussion_r1434253"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/64"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1614232",
        "pull_request_review_id": null,
        "id": 1614232,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE2MTQyMzI=",
        "diff_hunk": "@@ -33,11 +31,16 @@ this.Server = function (root, options) {\n             this.cache = false;\n         }\n     }\n+    if ('serverInfo' in this.options) {\n+        this.serverInfo = this.options.serverInfo.toString();\n+    } else {\n+        this.serverInfo = 'node-static/' + this.version.join('.');",
        "path": "lib/node-static.js",
        "position": 16,
        "original_position": 16,
        "commit_id": "67b723b94ff69c70c2acb9daa721cf3a86fd090e",
        "original_commit_id": "67b723b94ff69c70c2acb9daa721cf3a86fd090e",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "`version` does not belong to `this` anymore.  you should use `this.serverInfo = 'node-static/' + exports.version.join('.');` instead.\n",
        "created_at": "2012-09-16T02:45:30Z",
        "updated_at": "2012-09-16T02:45:30Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/66#discussion_r1614232",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/66",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/1614232"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/66#discussion_r1614232"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/66"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494002",
        "pull_request_review_id": null,
        "id": 2494002,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTQwMDI=",
        "diff_hunk": "@@ -1,15 +1,20 @@\n var vows    = require('vows')\n   , request = require('request')\n   , assert  = require('assert')\n+  , express = require('express')\n   , static  = require('../../lib/node-static');\n \n-var fileServer = new(static.Server)(__dirname + '/../fixtures', {serverInfo: 'custom-server-name'});\n+var fileServer = new(static.Server)(__dirname + '/../fixtures', {serverInfo: 'custom-server-name'}),\n+    fileServerExpress  = new(static.Server)(__dirname + '/../fixtures', {serverInfo: 'custom-server-name'});\n \n var suite = vows.describe('node-static');\n \n-var TEST_PORT = 8080;\n-var TEST_SERVER = 'http://localhost:' + TEST_PORT;\n-var server;\n+var TEST_PORT = 8080,\n+    TEST_PORT_EXPRESS = 7777;\n+var TEST_SERVER = 'http://localhost:' + TEST_PORT,\n+    TEST_SERVER_EXPRESS = 'http://localhost:' + TEST_PORT_EXPRESS;\n+var server,\n+    server_express;",
        "path": "test/integration/node-static-test.js",
        "position": null,
        "original_position": 21,
        "commit_id": "481b42301a246b3e060a446434f34c848276339a",
        "original_commit_id": "7e75747acbfd9799e3ca8b172b92403fb90ab400",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "The code convention for JavaScript is camelcase, could change `server_express` to `serverExpress`?\n",
        "created_at": "2012-12-22T00:20:03Z",
        "updated_at": "2012-12-22T00:46:31Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494002",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/80",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494002"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494002"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/80"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494005",
        "pull_request_review_id": null,
        "id": 2494005,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTQwMDU=",
        "diff_hunk": "@@ -50,6 +50,12 @@ exports.Server = function (root, options) {\n     }\n };\n \n+exports.Server.prototype._writeHeadSafe = function (req, res, status, headers) { //function that checks if we can write the headers before writing them",
        "path": "lib/node-static.js",
        "position": 4,
        "original_position": 4,
        "commit_id": "481b42301a246b3e060a446434f34c848276339a",
        "original_commit_id": "7e75747acbfd9799e3ca8b172b92403fb90ab400",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Why this method needs to start with `_`?\n",
        "created_at": "2012-12-22T00:20:27Z",
        "updated_at": "2012-12-22T00:46:31Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494005",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/80",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494005"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494005"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/80"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494008",
        "pull_request_review_id": null,
        "id": 2494008,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTQwMDg=",
        "diff_hunk": "@@ -50,6 +50,12 @@ exports.Server = function (root, options) {\n     }\n };\n \n+exports.Server.prototype._writeHeadSafe = function (req, res, status, headers) { //function that checks if we can write the headers before writing them\n+    if (!res._headerSent) {",
        "path": "lib/node-static.js",
        "position": 5,
        "original_position": 5,
        "commit_id": "481b42301a246b3e060a446434f34c848276339a",
        "original_commit_id": "7e75747acbfd9799e3ca8b172b92403fb90ab400",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "`_`?\n",
        "created_at": "2012-12-22T00:20:49Z",
        "updated_at": "2012-12-22T00:46:31Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494008",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/80",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494008"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494008"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/80"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494073",
        "pull_request_review_id": null,
        "id": 2494073,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0OTQwNzM=",
        "diff_hunk": "@@ -50,6 +50,12 @@ exports.Server = function (root, options) {\n     }\n };\n \n+exports.Server.prototype._writeHeadSafe = function (req, res, status, headers) { //function that checks if we can write the headers before writing them",
        "path": "lib/node-static.js",
        "position": 4,
        "original_position": 4,
        "commit_id": "481b42301a246b3e060a446434f34c848276339a",
        "original_commit_id": "7e75747acbfd9799e3ca8b172b92403fb90ab400",
        "user": {
            "login": "daxxog",
            "id": 2145492,
            "node_id": "MDQ6VXNlcjIxNDU0OTI=",
            "avatar_url": "https://avatars3.githubusercontent.com/u/2145492?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/daxxog",
            "html_url": "https://github.com/daxxog",
            "followers_url": "https://api.github.com/users/daxxog/followers",
            "following_url": "https://api.github.com/users/daxxog/following{/other_user}",
            "gists_url": "https://api.github.com/users/daxxog/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/daxxog/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/daxxog/subscriptions",
            "organizations_url": "https://api.github.com/users/daxxog/orgs",
            "repos_url": "https://api.github.com/users/daxxog/repos",
            "events_url": "https://api.github.com/users/daxxog/events{/privacy}",
            "received_events_url": "https://api.github.com/users/daxxog/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "just because its more of an internal function and not really meant to be called outside the library. That's usually how I label those type of functions.\n",
        "created_at": "2012-12-22T00:40:00Z",
        "updated_at": "2012-12-22T00:46:31Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494073",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/80",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/2494073"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/80#discussion_r2494073"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/80"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4393278",
        "pull_request_review_id": null,
        "id": 4393278,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMyNzg=",
        "diff_hunk": "@@ -52,7 +52,14 @@ this.Server.prototype.serveDir = function (pathname, req, res, finish) {\n \n     fs.stat(htmlIndex, function (e, stat) {\n         if (!e) {\n-            that.respond(null, 200, {}, [htmlIndex], stat, req, res, finish);\n+            var status = 200;\n+            var headers = {};\n+            var originalPathname = decodeURI(url.parse(req.url).pathname);\n+            if (originalPathname.length && originalPathname.charAt(originalPathname.length - 1) !== '/') {\n+                status = 301;",
        "path": "lib/node-static.js",
        "position": null,
        "original_position": 9,
        "commit_id": "6af107cad1fc28a7e14f5d5391f2c89d529b4e11",
        "original_commit_id": "2bbf68ac1adf6bdb2c3f44f4469ae1c5c8f1e5f9",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Should it be 404 instead of 301?\n",
        "created_at": "2013-05-25T21:17:00Z",
        "updated_at": "2013-05-28T21:14:15Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/56#discussion_r4393278",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/56",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4393278"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/56#discussion_r4393278"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/56"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4800930",
        "pull_request_review_id": null,
        "id": 4800930,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA5MzA=",
        "diff_hunk": "@@ -152,6 +152,7 @@ example: `{ 'X-Hello': 'World!' }`\n \n > defaults to `{}`\n \n+<<<<<<< HEAD",
        "path": "README.md",
        "position": null,
        "original_position": 4,
        "commit_id": "131b6677485386754d5b683869cad56b07ee59f0",
        "original_commit_id": "00d14759dfb24e85ee44b6067bcda7977d9c278d",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Could you fix this merge comment, please?\n",
        "created_at": "2013-06-20T16:39:41Z",
        "updated_at": "2013-06-21T08:31:19Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/100#discussion_r4800930",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/100",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4800930"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/100#discussion_r4800930"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/100"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4800954",
        "pull_request_review_id": null,
        "id": 4800954,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDA5NTQ=",
        "diff_hunk": "@@ -10,12 +10,8 @@ var fs     = require('fs')\n // Current version\n var version = [0, 6, 9];\n \n-// In-memory file store\n-var store      = {};\n-var indexStore = {};\n-\n Server = function (root, options) {\n-    if (root && (typeof(root) === 'object')) { options = root; root = null }\n+    if (root && (typeof(root) === 'object')) { options = root, root = null }",
        "path": "lib/node-static.js",
        "position": null,
        "original_position": 10,
        "commit_id": "131b6677485386754d5b683869cad56b07ee59f0",
        "original_commit_id": "00d14759dfb24e85ee44b6067bcda7977d9c278d",
        "user": {
            "login": "phstc",
            "id": 105652,
            "node_id": "MDQ6VXNlcjEwNTY1Mg==",
            "avatar_url": "https://avatars0.githubusercontent.com/u/105652?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/phstc",
            "html_url": "https://github.com/phstc",
            "followers_url": "https://api.github.com/users/phstc/followers",
            "following_url": "https://api.github.com/users/phstc/following{/other_user}",
            "gists_url": "https://api.github.com/users/phstc/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/phstc/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/phstc/subscriptions",
            "organizations_url": "https://api.github.com/users/phstc/orgs",
            "repos_url": "https://api.github.com/users/phstc/repos",
            "events_url": "https://api.github.com/users/phstc/events{/privacy}",
            "received_events_url": "https://api.github.com/users/phstc/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Why not `;`?\n",
        "created_at": "2013-06-20T16:40:23Z",
        "updated_at": "2013-06-21T08:31:19Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/100#discussion_r4800954",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/100",
        "author_association": "COLLABORATOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/4800954"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/100#discussion_r4800954"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/100"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/17208720",
        "pull_request_review_id": null,
        "id": 17208720,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE3MjA4NzIw",
        "diff_hunk": "@@ -227,13 +227,71 @@ Server.prototype.respondGzip = function(pathname, status, contentType, _headers,\n     }\n }\n \n+Server.prototype.parseByteRange = function(req, stat) {\n+\n+    var byteRange   = {\n+            from:0, \n+            to:0, \n+            valid: false \n+        },",
        "path": "lib/node-static.js",
        "position": 10,
        "original_position": 10,
        "commit_id": "d49a6d68e70b24050c60f75c06f059dffff9a272",
        "original_commit_id": "d49a6d68e70b24050c60f75c06f059dffff9a272",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Please fix spacing here, it's distracting :)\n",
        "created_at": "2014-09-06T14:21:06Z",
        "updated_at": "2014-09-06T14:21:06Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/129#discussion_r17208720",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/129",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/17208720"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/129#discussion_r17208720"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/129"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/18083900",
        "pull_request_review_id": null,
        "id": 18083900,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDgzOTAw",
        "diff_hunk": "@@ -361,7 +361,7 @@ Server.prototype.stream = function (pathname, files, buffer, startByte, res, cal\n                 flags: 'r',\n                 mode: 0666,\n                 start: startByte,\n-                end: startByte + buffer.length - 1\n+                end: startByte + buffer.length ? buffer.length - 1 : 0",
        "path": "lib/node-static.js",
        "position": null,
        "original_position": 17,
        "commit_id": "27c23e18aef7eb2a18a91bb83c5c15509ab8cbfc",
        "original_commit_id": "e456eb345b6cd5131ad1ad78b711052bf58a46c2",
        "user": {
            "login": "tchakabam",
            "id": 1480052,
            "node_id": "MDQ6VXNlcjE0ODAwNTI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1480052?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tchakabam",
            "html_url": "https://github.com/tchakabam",
            "followers_url": "https://api.github.com/users/tchakabam/followers",
            "following_url": "https://api.github.com/users/tchakabam/following{/other_user}",
            "gists_url": "https://api.github.com/users/tchakabam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tchakabam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tchakabam/subscriptions",
            "organizations_url": "https://api.github.com/users/tchakabam/orgs",
            "repos_url": "https://api.github.com/users/tchakabam/repos",
            "events_url": "https://api.github.com/users/tchakabam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tchakabam/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "@IonicaBizau great way to fix it! :)\n",
        "created_at": "2014-09-26T11:09:05Z",
        "updated_at": "2014-09-26T11:37:21Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/134#discussion_r18083900",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/134",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/18083900"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/134#discussion_r18083900"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/134"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/18084691",
        "pull_request_review_id": null,
        "id": 18084691,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDE4MDg0Njkx",
        "diff_hunk": "@@ -361,7 +361,7 @@ Server.prototype.stream = function (pathname, files, buffer, startByte, res, cal\n                 flags: 'r',\n                 mode: 0666,\n                 start: startByte,\n-                end: startByte + buffer.length - 1\n+                end: startByte + buffer.length ? buffer.length - 1 : 0",
        "path": "lib/node-static.js",
        "position": null,
        "original_position": 17,
        "commit_id": "27c23e18aef7eb2a18a91bb83c5c15509ab8cbfc",
        "original_commit_id": "e456eb345b6cd5131ad1ad78b711052bf58a46c2",
        "user": {
            "login": "IonicaBizau",
            "id": 2864371,
            "node_id": "MDQ6VXNlcjI4NjQzNzE=",
            "avatar_url": "https://avatars3.githubusercontent.com/u/2864371?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/IonicaBizau",
            "html_url": "https://github.com/IonicaBizau",
            "followers_url": "https://api.github.com/users/IonicaBizau/followers",
            "following_url": "https://api.github.com/users/IonicaBizau/following{/other_user}",
            "gists_url": "https://api.github.com/users/IonicaBizau/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/IonicaBizau/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/IonicaBizau/subscriptions",
            "organizations_url": "https://api.github.com/users/IonicaBizau/orgs",
            "repos_url": "https://api.github.com/users/IonicaBizau/repos",
            "events_url": "https://api.github.com/users/IonicaBizau/events{/privacy}",
            "received_events_url": "https://api.github.com/users/IonicaBizau/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Not so good. Some parentheses are missing. :smile: Fixed in https://github.com/IonicaBizau/node-static/commit/27c23e18aef7eb2a18a91bb83c5c15509ab8cbfc.\n",
        "created_at": "2014-09-26T11:39:00Z",
        "updated_at": "2014-09-26T11:39:00Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/134#discussion_r18084691",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/134",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/18084691"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/134#discussion_r18084691"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/134"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883244",
        "pull_request_review_id": null,
        "id": 63883244,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODgzMjQ0",
        "diff_hunk": "@@ -92,20 +101,33 @@ if (argv.gzip){\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile){\n+    (options = options || {}).indexFile = argv['indexFile'];\n+}\n+\n file = new(statik.Server)(dir, options);\n \n require('http').createServer(function (request, response) {\n     request.addListener('end', function () {\n-        file.serve(request, response, function(e, rsp) {\n-            if (e && e.status === 404) {\n-                response.writeHead(e.status, e.headers);\n-                response.end(\"Not Found\");\n-                log(request, response);\n-            } else {\n-                log(request, response);\n-            }\n-        });\n+        var callback = function(e, rsp) {\n+          if (e && e.status === 404) {\n+              response.writeHead(e.status, e.headers);\n+              response.end(\"Not Found\");\n+              log(request, response);\n+          } else {\n+              log(request, response);\n+          }\n+        }\n+\n+        if (argv['spa'] && !request.url.includes(\".\")){\n+            file.serveFile(argv['indexFile'], 500, {}, request, response);\n+        } else {\n+            file.serve(request, response, callback);\n+        }\n     }).resume();\n }).listen(+argv.port, argv['host-address']);\n \n console.log('serving \"' + dir + '\" at http://' + argv['host-address'] + ':' + argv.port);\n+if (argv.spa) {\n+  console.log('serving as a single page app (all non-file requests redirect to ' + argv['indexFile'] +')')",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 57,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "f5ee2413aa63145451090369b78554cbb1b4eff8",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "`;`\n",
        "created_at": "2016-05-19T14:00:47Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883244",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883244"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883244"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883269",
        "pull_request_review_id": null,
        "id": 63883269,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODgzMjY5",
        "diff_hunk": "@@ -92,20 +101,33 @@ if (argv.gzip){\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile){\n+    (options = options || {}).indexFile = argv['indexFile'];\n+}\n+\n file = new(statik.Server)(dir, options);\n \n require('http').createServer(function (request, response) {\n     request.addListener('end', function () {\n-        file.serve(request, response, function(e, rsp) {\n-            if (e && e.status === 404) {\n-                response.writeHead(e.status, e.headers);\n-                response.end(\"Not Found\");\n-                log(request, response);\n-            } else {\n-                log(request, response);\n-            }\n-        });\n+        var callback = function(e, rsp) {\n+          if (e && e.status === 404) {\n+              response.writeHead(e.status, e.headers);\n+              response.end(\"Not Found\");\n+              log(request, response);\n+          } else {\n+              log(request, response);\n+          }\n+        }",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 45,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "f5ee2413aa63145451090369b78554cbb1b4eff8",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "`;`\n",
        "created_at": "2016-05-19T14:00:54Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883269",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883269"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883269"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883366",
        "pull_request_review_id": null,
        "id": 63883366,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODgzMzY2",
        "diff_hunk": "@@ -40,6 +40,15 @@ var fs = require('fs'),\n             alias: 'z',\n             description: 'enable compression (tries to serve file of same name plus \\'.gz\\')'\n         })\n+        .option('spa', {\n+            alias: 's',\n+            description: 'serve the content as a single page app by redirecting all non-file requests to the index html file'\n+        })",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 7,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "f5ee2413aa63145451090369b78554cbb1b4eff8",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Can we drop the alias? As it's a fairly uncommon option.\n",
        "created_at": "2016-05-19T14:01:23Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883366",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883366"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883366"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883402",
        "pull_request_review_id": null,
        "id": 63883402,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODgzNDAy",
        "diff_hunk": "@@ -92,20 +101,33 @@ if (argv.gzip){\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile){",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 20,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "f5ee2413aa63145451090369b78554cbb1b4eff8",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Space before `{`\n",
        "created_at": "2016-05-19T14:01:36Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883402",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883402"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883402"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883493",
        "pull_request_review_id": null,
        "id": 63883493,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDYzODgzNDkz",
        "diff_hunk": "@@ -92,20 +101,33 @@ if (argv.gzip){\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile){\n+    (options = options || {}).indexFile = argv['indexFile'];\n+}\n+\n file = new(statik.Server)(dir, options);\n \n require('http').createServer(function (request, response) {\n     request.addListener('end', function () {\n-        file.serve(request, response, function(e, rsp) {\n-            if (e && e.status === 404) {\n-                response.writeHead(e.status, e.headers);\n-                response.end(\"Not Found\");\n-                log(request, response);\n-            } else {\n-                log(request, response);\n-            }\n-        });\n+        var callback = function(e, rsp) {\n+          if (e && e.status === 404) {\n+              response.writeHead(e.status, e.headers);\n+              response.end(\"Not Found\");\n+              log(request, response);\n+          } else {\n+              log(request, response);\n+          }\n+        }\n+\n+        if (argv['spa'] && !request.url.includes(\".\")){",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 47,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "f5ee2413aa63145451090369b78554cbb1b4eff8",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Space before `{`\n",
        "created_at": "2016-05-19T14:02:00Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883493",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/63883493"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r63883493"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/64156712",
        "pull_request_review_id": null,
        "id": 64156712,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MTU2NzEy",
        "diff_hunk": "@@ -65,47 +73,60 @@ var fs = require('fs'),\n \n     var file, options;\n \n-if (argv.help){\n+if (argv.help) {\n     require('optimist').showHelp(console.log);\n     process.exit(0);\n }\n \n-if (argv.version){\n+if (argv.version) {\n     console.log('node-static', statik.version.join('.'));\n     process.exit(0);\n }\n \n-if (argv.cache){\n+if (argv.cache) {\n     (options = options || {}).cache = argv.cache;\n }\n \n-if (argv.headers){\n+if (argv.headers) {\n     (options = options || {}).headers = JSON.parse(argv.headers);\n }\n \n-if (argv['header-file']){\n+if (argv['header-file']) {\n     (options = options || {}).headers =\n         JSON.parse(fs.readFileSync(argv['header-file']));\n }\n \n-if (argv.gzip){\n+if (argv.gzip) {\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile) {\n+    (options = options || {}).indexFile = argv['indexFile'];\n+}\n+\n file = new(statik.Server)(dir, options);\n \n require('http').createServer(function (request, response) {\n     request.addListener('end', function () {\n-        file.serve(request, response, function(e, rsp) {\n-            if (e && e.status === 404) {\n-                response.writeHead(e.status, e.headers);\n-                response.end(\"Not Found\");\n-                log(request, response);\n-            } else {\n-                log(request, response);\n-            }\n-        });\n+        var callback = function(e, rsp) {\n+          if (e && e.status === 404) {\n+              response.writeHead(e.status, e.headers);\n+              response.end(\"Not Found\");\n+              log(request, response);\n+          } else {\n+              log(request, response);\n+          }\n+        };\n+\n+        if (argv['spa'] && !request.url.includes(\".\")) {",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 79,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "192107a9b6e6a37dbb1225c5229ea93bb7fdb48f",
        "user": {
            "login": "jozsi",
            "id": 840815,
            "node_id": "MDQ6VXNlcjg0MDgxNQ==",
            "avatar_url": "https://avatars1.githubusercontent.com/u/840815?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jozsi",
            "html_url": "https://github.com/jozsi",
            "followers_url": "https://api.github.com/users/jozsi/followers",
            "following_url": "https://api.github.com/users/jozsi/following{/other_user}",
            "gists_url": "https://api.github.com/users/jozsi/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/jozsi/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/jozsi/subscriptions",
            "organizations_url": "https://api.github.com/users/jozsi/orgs",
            "repos_url": "https://api.github.com/users/jozsi/repos",
            "events_url": "https://api.github.com/users/jozsi/events{/privacy}",
            "received_events_url": "https://api.github.com/users/jozsi/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "The 'includes' method is ECMAScript 2015 specific. Would require node engine >= 0.11\n",
        "created_at": "2016-05-22T21:35:45Z",
        "updated_at": "2016-05-23T00:37:29Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r64156712",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/64156712"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r64156712"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/64159858",
        "pull_request_review_id": null,
        "id": 64159858,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDY0MTU5ODU4",
        "diff_hunk": "@@ -65,47 +73,60 @@ var fs = require('fs'),\n \n     var file, options;\n \n-if (argv.help){\n+if (argv.help) {\n     require('optimist').showHelp(console.log);\n     process.exit(0);\n }\n \n-if (argv.version){\n+if (argv.version) {\n     console.log('node-static', statik.version.join('.'));\n     process.exit(0);\n }\n \n-if (argv.cache){\n+if (argv.cache) {\n     (options = options || {}).cache = argv.cache;\n }\n \n-if (argv.headers){\n+if (argv.headers) {\n     (options = options || {}).headers = JSON.parse(argv.headers);\n }\n \n-if (argv['header-file']){\n+if (argv['header-file']) {\n     (options = options || {}).headers =\n         JSON.parse(fs.readFileSync(argv['header-file']));\n }\n \n-if (argv.gzip){\n+if (argv.gzip) {\n     (options = options || {}).gzip = true;\n }\n \n+if (argv.indexFile) {\n+    (options = options || {}).indexFile = argv['indexFile'];\n+}\n+\n file = new(statik.Server)(dir, options);\n \n require('http').createServer(function (request, response) {\n     request.addListener('end', function () {\n-        file.serve(request, response, function(e, rsp) {\n-            if (e && e.status === 404) {\n-                response.writeHead(e.status, e.headers);\n-                response.end(\"Not Found\");\n-                log(request, response);\n-            } else {\n-                log(request, response);\n-            }\n-        });\n+        var callback = function(e, rsp) {\n+          if (e && e.status === 404) {\n+              response.writeHead(e.status, e.headers);\n+              response.end(\"Not Found\");\n+              log(request, response);\n+          } else {\n+              log(request, response);\n+          }\n+        };\n+\n+        if (argv['spa'] && !request.url.includes(\".\")) {",
        "path": "bin/cli.js",
        "position": null,
        "original_position": 79,
        "commit_id": "c8ff3c910f19f90387da935fbe8beff7fcf771b4",
        "original_commit_id": "192107a9b6e6a37dbb1225c5229ea93bb7fdb48f",
        "user": {
            "login": "mmcdermott",
            "id": 470751,
            "node_id": "MDQ6VXNlcjQ3MDc1MQ==",
            "avatar_url": "https://avatars1.githubusercontent.com/u/470751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mmcdermott",
            "html_url": "https://github.com/mmcdermott",
            "followers_url": "https://api.github.com/users/mmcdermott/followers",
            "following_url": "https://api.github.com/users/mmcdermott/following{/other_user}",
            "gists_url": "https://api.github.com/users/mmcdermott/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/mmcdermott/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/mmcdermott/subscriptions",
            "organizations_url": "https://api.github.com/users/mmcdermott/orgs",
            "repos_url": "https://api.github.com/users/mmcdermott/repos",
            "events_url": "https://api.github.com/users/mmcdermott/events{/privacy}",
            "received_events_url": "https://api.github.com/users/mmcdermott/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Good catch! I've updated it to use indexOf instead. Thanks!\n",
        "created_at": "2016-05-23T00:37:37Z",
        "updated_at": "2016-05-23T00:37:37Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/179#discussion_r64159858",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/179",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/64159858"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/179#discussion_r64159858"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/179"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/83621226",
        "pull_request_review_id": 4452049,
        "id": 83621226,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzNjIxMjI2",
        "diff_hunk": "@@ -344,7 +344,7 @@ Server.prototype.respondNoGzip = function (pathname, status, contentType, _heade\n };\n \n Server.prototype.respond = function (pathname, status, _headers, files, stat, req, res, finish) {\n-    var contentType = _headers['Content-Type'] ||\n+    var contentType = res.getHeader('Content-Type') ||",
        "path": "lib/node-static.js",
        "position": 14,
        "original_position": 14,
        "commit_id": "c325696fe8d8819310346297c293b99de8cf355d",
        "original_commit_id": "c325696fe8d8819310346297c293b99de8cf355d",
        "user": {
            "login": "cloudhead",
            "id": 40774,
            "node_id": "MDQ6VXNlcjQwNzc0",
            "avatar_url": "https://avatars0.githubusercontent.com/u/40774?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/cloudhead",
            "html_url": "https://github.com/cloudhead",
            "followers_url": "https://api.github.com/users/cloudhead/followers",
            "following_url": "https://api.github.com/users/cloudhead/following{/other_user}",
            "gists_url": "https://api.github.com/users/cloudhead/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/cloudhead/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/cloudhead/subscriptions",
            "organizations_url": "https://api.github.com/users/cloudhead/orgs",
            "repos_url": "https://api.github.com/users/cloudhead/repos",
            "events_url": "https://api.github.com/users/cloudhead/events{/privacy}",
            "received_events_url": "https://api.github.com/users/cloudhead/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Shouldn't we also be checking `_headers`?\n",
        "created_at": "2016-10-17T11:05:50Z",
        "updated_at": "2016-10-17T11:05:50Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/184#discussion_r83621226",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/184",
        "author_association": "OWNER",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/83621226"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/184#discussion_r83621226"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/184"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/83737057",
        "pull_request_review_id": 4561333,
        "id": 83737057,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDgzNzM3MDU3",
        "diff_hunk": "@@ -344,7 +344,7 @@ Server.prototype.respondNoGzip = function (pathname, status, contentType, _heade\n };\n \n Server.prototype.respond = function (pathname, status, _headers, files, stat, req, res, finish) {\n-    var contentType = _headers['Content-Type'] ||\n+    var contentType = res.getHeader('Content-Type') ||",
        "path": "lib/node-static.js",
        "position": 14,
        "original_position": 14,
        "commit_id": "c325696fe8d8819310346297c293b99de8cf355d",
        "original_commit_id": "c325696fe8d8819310346297c293b99de8cf355d",
        "user": {
            "login": "leviwheatcroft",
            "id": 547896,
            "node_id": "MDQ6VXNlcjU0Nzg5Ng==",
            "avatar_url": "https://avatars1.githubusercontent.com/u/547896?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/leviwheatcroft",
            "html_url": "https://github.com/leviwheatcroft",
            "followers_url": "https://api.github.com/users/leviwheatcroft/followers",
            "following_url": "https://api.github.com/users/leviwheatcroft/following{/other_user}",
            "gists_url": "https://api.github.com/users/leviwheatcroft/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/leviwheatcroft/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/leviwheatcroft/subscriptions",
            "organizations_url": "https://api.github.com/users/leviwheatcroft/orgs",
            "repos_url": "https://api.github.com/users/leviwheatcroft/repos",
            "events_url": "https://api.github.com/users/leviwheatcroft/events{/privacy}",
            "received_events_url": "https://api.github.com/users/leviwheatcroft/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "Yeah you're right.. _headers could contain 'Content-Type' if `respondGzip` or `respondNoGzip` was called externally. But comparing _headers to res.getHeader here would cause unexpected behavior when someone tries to set headers via whichever method takes lower precedence. \n\nWould it be better to revert line 347 to current master, but ensure internal calls to respond populate the _headers param from res._headers? There's only two at 59, and 78.\n\nTotally understand if you want to kill this PR and look at a cleaner way to add this functionality to the API, I was just playing around with it.\n",
        "created_at": "2016-10-17T21:22:35Z",
        "updated_at": "2016-10-17T21:22:35Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/184#discussion_r83737057",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/184",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/83737057"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/184#discussion_r83737057"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/184"
            }
        },
        "in_reply_to_id": 83621226
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/247560738",
        "pull_request_review_id": 192239914,
        "id": 247560738,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NzU2MDczOA==",
        "diff_hunk": "@@ -137,8 +137,9 @@ Server.prototype.servePath = function (pathname, status, headers, req, res, fini\n     pathname = this.resolve(pathname);\n \n     // Make sure we're not trying to access a\n-    // file outside of the root.\n-    if (pathname.indexOf(that.root) === 0) {\n+    // file outside of the root or an invalid\n+    // pathname.\n+    if (pathname.indexOf(that.root) === 0 && pathname.indexOf('\\u0000') === -1) {",
        "path": "lib/node-static.js",
        "position": 8,
        "original_position": 8,
        "commit_id": "b6ae31c9653c3aedf750b25bc795a1fddfc928e1",
        "original_commit_id": "b6ae31c9653c3aedf750b25bc795a1fddfc928e1",
        "user": {
            "login": "tchakabam",
            "id": 1480052,
            "node_id": "MDQ6VXNlcjE0ODAwNTI=",
            "avatar_url": "https://avatars2.githubusercontent.com/u/1480052?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tchakabam",
            "html_url": "https://github.com/tchakabam",
            "followers_url": "https://api.github.com/users/tchakabam/followers",
            "following_url": "https://api.github.com/users/tchakabam/following{/other_user}",
            "gists_url": "https://api.github.com/users/tchakabam/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/tchakabam/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/tchakabam/subscriptions",
            "organizations_url": "https://api.github.com/users/tchakabam/orgs",
            "repos_url": "https://api.github.com/users/tchakabam/repos",
            "events_url": "https://api.github.com/users/tchakabam/events{/privacy}",
            "received_events_url": "https://api.github.com/users/tchakabam/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "if you would do this like this, it should be somehow at least logging that this type of path has been ignored i think.\r\n\r\nis there some documentation on this vulnerability and have there been other fixes to this exploit in other open-source codebases?",
        "created_at": "2019-01-14T16:26:57Z",
        "updated_at": "2019-01-14T16:26:58Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/213#discussion_r247560738",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/213",
        "author_association": "CONTRIBUTOR",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/247560738"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/213#discussion_r247560738"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/213"
            }
        }
    },
    {
        "url": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/247628832",
        "pull_request_review_id": 192326010,
        "id": 247628832,
        "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDI0NzYyODgzMg==",
        "diff_hunk": "@@ -137,8 +137,9 @@ Server.prototype.servePath = function (pathname, status, headers, req, res, fini\n     pathname = this.resolve(pathname);\n \n     // Make sure we're not trying to access a\n-    // file outside of the root.\n-    if (pathname.indexOf(that.root) === 0) {\n+    // file outside of the root or an invalid\n+    // pathname.\n+    if (pathname.indexOf(that.root) === 0 && pathname.indexOf('\\u0000') === -1) {",
        "path": "lib/node-static.js",
        "position": 8,
        "original_position": 8,
        "commit_id": "b6ae31c9653c3aedf750b25bc795a1fddfc928e1",
        "original_commit_id": "b6ae31c9653c3aedf750b25bc795a1fddfc928e1",
        "user": {
            "login": "Zarel",
            "id": 551184,
            "node_id": "MDQ6VXNlcjU1MTE4NA==",
            "avatar_url": "https://avatars3.githubusercontent.com/u/551184?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Zarel",
            "html_url": "https://github.com/Zarel",
            "followers_url": "https://api.github.com/users/Zarel/followers",
            "following_url": "https://api.github.com/users/Zarel/following{/other_user}",
            "gists_url": "https://api.github.com/users/Zarel/gists{/gist_id}",
            "starred_url": "https://api.github.com/users/Zarel/starred{/owner}{/repo}",
            "subscriptions_url": "https://api.github.com/users/Zarel/subscriptions",
            "organizations_url": "https://api.github.com/users/Zarel/orgs",
            "repos_url": "https://api.github.com/users/Zarel/repos",
            "events_url": "https://api.github.com/users/Zarel/events{/privacy}",
            "received_events_url": "https://api.github.com/users/Zarel/received_events",
            "type": "User",
            "site_admin": false
        },
        "body": "You don't log paths like `../` either; I just modeled my code after the existing code.\r\n\r\nI'm not aware of documentation of this problem. I became aware of it because someone attacked my server with it.",
        "created_at": "2019-01-14T19:36:41Z",
        "updated_at": "2019-01-14T19:36:41Z",
        "html_url": "https://github.com/cloudhead/node-static/pull/213#discussion_r247628832",
        "pull_request_url": "https://api.github.com/repos/cloudhead/node-static/pulls/213",
        "author_association": "NONE",
        "_links": {
            "self": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/comments/247628832"
            },
            "html": {
                "href": "https://github.com/cloudhead/node-static/pull/213#discussion_r247628832"
            },
            "pull_request": {
                "href": "https://api.github.com/repos/cloudhead/node-static/pulls/213"
            }
        },
        "in_reply_to_id": 247560738
    }
]