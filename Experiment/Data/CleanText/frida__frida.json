{
    "oleavr": "This should now be resolved, as the Linux build-slave has been improved to do the build work in a squeeze buildroot. There's also build instructions now.\n. Oops! Thanks for reporting. Feel free to submit a PR if you stumble upon the solution.\n. Lots of improvements have recently been made to the build system, so let's consider this one fixed.\n. Looks great!\n. Hi,\nI'm afraid we abandoned this GUI. It's buried deep in the git history of\nfrida-core though. CryptoShark is the latest, and for now only GUI, built\non top of Frida. Now we really hope to see others build other GUIs for\ntheir specific problem domains.\nI believe very much in this philosophy that Frida is a toolkit, and it's\neasy to build tools on top of it, instead of having a monolithic GUI with\nthe engine embedded (as was the case when the video was recorded).\nBest,\nOle Andr\u00e9\nOn Tuesday, October 21, 2014, Ebubekir KARUL notifications@github.com\nwrote:\n\nIs it possible to use GUI which used in this\nhttp://www.youtube.com/watch?v=nk3rUn2ip0g&list=UUnmPlAGBAiWjHtboyiL8Jtg\nvideo ? Where can I find it ?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/frida/frida/issues/4.\n\n\nOle Andr\u00e9 Vadla Ravn\u00e5s\nCo-Founder & Software Engineer  |  Soundrop http://soundrop.fm/  |  +47\n48270645  |  @oleavr http://twitter.com/oleavr\n. Cool! More documentation would be really great!\nIt looks like you're really close to having it working. Your code Memory.writePointer(args[1], ptr(43434343)); will assume that the intercepted function's second argument is a pointer to a writable memory address, and will write 4 or 8 bytes there (4 in 32-bit and 8 in 64-bit processes). What you might want to do instead is to use Memory.writeUtf8String(args[1], \"AAAAAAAAAAAAA\"). However, the memory buffer pointed to by args[1] is likely just big enough to contain that buffer, so if you write beyond its size you will likely corrupt the application's heap. So if you want to pass the function a larger buffer you should do:\njavascript\nthis.buf = Memory.alloc(1024);\nMemory.writeUtf8String(this.buf, \"AAAAAAAAAAAAAAAAAAAAAAAAAA\");\nargs[1] = this.buf;\nThe memory allocated by Memory.alloc() will be freed automatically when its JavaScript handle gets garbage-collected. By assigning it to this, it will be available for the duration of the function call (so it will be accessible until the end of onLeave). Currently frida-trace doesn't provide an elegant way to store global variables, so if you need the memory to stay valid for a long time, you should assign it to the global scope:\njavascript\nif (typeof buf === 'undefined') {\n    buf = Memory.alloc(1024);\n    Memory.writeUtf8String(buf, \"AAAAAAAAAAAAAAAAAAAAAAAAAA\");\n}\nargs[1] = buf;\nHope this helps! Please don't hesitate to ask if anything's unclear.\n. Glad to help! Very cool! Building an in-memory fuzzer is definitely possible, and among the applications I would personally love to see built and collaborated on (though nothing stops people from building proprietary tools also \u2013 either way is good for Frida). There's currently very few tools built on top of Frida (that I know of), it's mainly just the tools that are part of frida-python (frida-discover, frida-ps, frida-repl, and frida-trace), and CryptoShark, but, it's really easy to build new ones once you get the hang of the basics.\nMakes perfect sense regarding the overflow \u2013 you're definitely on the right track! :+1:\n. The recv function writes to the buffer before it returns, so doing that in onEnter will be too early (which means the recv implementation will overwrite all or some of what you write). You'll have to save the argument in onEnter, and make use of it in onLeave. Roughly like this:\njavascript\nonEnter: function onEnter(log, args, state) {\n    this.buf = args[1];\n},\nonLeave: function onLeave(log, retval, state) {\n    Memory.writeUtf8String(this.buf, \"AAAAAAAAAAAA\");\n    retval.replace(ptr(12));\n}\n. Actually, looking at the code, it seems there might be a bug in frida-trace. Could you please make the following changes in your local installation of Frida and let me know how it works:\nIn tracer.py at:\nhttps://github.com/frida/frida-python/blob/b9bdde5a0819ca463c9bc31a7915954c55c8fb80/src/frida/tracer.py#L206\nChange:\nh[0].onEnter(log, args, state);\nto:\nh[0].onEnter.call(this, log, args, state);\nAnd also change:\nh[0].onLeave(log, retval, state);\nto:\nh[0].onLeave.call(this, log, retval, state);\nThanks!\n. No need to build Frida yourself, just open up the .egg file (it's a zip-archive) and modify the tracer.py file inside of it.\nAlso, in onLeave you want to do:\njavascript\nif (retval.toInt32() > 0) {\n    /* modify the buffer and return value here (your existing onLeave code) */\n} else {\n    /* do nothing (we leave return value as it is so the application can handle the error) */\n}\nCheers!\n. Hmm, it looks correct to me. Could you please explain what you're expecting, and what's happening instead?\nThe only issue I can see, that might be confusing, is that you do:\njavascript\nlog(\"Buff :\" +Memory.readPointer(args[1]));\nin onEnter, but you probably want to do that before the Memory.writeUtf8String() call in onLeave. Otherwise you will dump the first 4/8 bytes of the buffer right before recv() gets a chance to write to it, and also before your code in onLeave writes to it.\n. Ahh, I think I understand. Here's what I think is happening:\n1. Application is blocking inside recv(), waiting for a message to arrive.\n2. You run frida-trace, which injects some JavaScript into the process, and that JS does Interceptor.attach(), which rewrites the start of the original function in memory, so that future calls will call your onEnter callback in JS.\n3. Server sends a message, and this wakes up the system call in step 1, so it returns from recv(). As the first instruction of recv() was executed before step 2, you won't be able to trap that call.\n4. Server sends another message. Now recv() is called like in step 1, but now (and until we detach) we are be able to intercept it, so onEnter is called, original implementation is executed, and finally onLeave is called.\nSo basically the function call you want to intercept already happened before you attached, and because it's blocking inside that function (system call) you will have to wait until it receives something so it will call recv() again.\nThe only way to catch the first recv() is to have Frida spawn the process for you. Unfortunately frida-trace, the command-line tool, doesn't yet support this, although the underlying toolkit does. (Would be awesome if someone could add that and submit a pull-request, though!)\n. Oops, sorry about that. Fixed now. Thanks for reporting!\n. Hey,\nWhat happens here is that Frida manages to inject and execute some code, which essentially does:\nC\nvoid * library = dlopen (\"/some/temporary/directory/libfrida-agent.dylib\");\nentrypoint = dlsym (library, \"frida_agent_main\");\nentrypoint ();\nThe challenge is that some processes are sandboxed, with little or no file-system access. There's not yet any logic to determine the best temporary directory for a given target process, so for now it's simply:\nAre we running as root? Use /private/var/root, as certain sandboxed system daemons are allowed to read from that location. Otherwise use $HOME/.Trash, which App Store apps are able to read.\nYou can experiment by adjusting the temp directory logic in frida-core/src/darwin/system-darwin.m, and see what works best for you.\nFuture improvements would be to either pick a directory based on the target process' sandbox settings, or ideally, implement manual mapping so the library can be injected manually without ever hitting the filesystem.\nIn any case it would be great to improve the error-handling and give a proper error message instead of crashing the target process.\nIf you have any ideas, patches or questions please don't hesitate to shoot! :)\n. This should now be fixed in the just-released 3.0.1. I'll announce the release soon, so please let me know if you find any further issues.\n. Do you see any errors in the config.log produced by the above run of configure?\nCheers!\n. You ran make and not make -jX where X > 1 right? Which distro and version is this on?\n. Interesting. Can't see any obvious errors here (some of the configure checks are meant to fail, as it's probing the system and toolchain). Which version of GNU make is this on?\n. Ahh, good! :) No worries! :+1:\n. This sounds like a mix-up of Python 2.x vs 3.x \u2013 are you using Python 3.x with the 3.x extension you compiled?\n. Ahh yes, frida-ps and the other CLI tools installed by frida-python, pick up the default python:\n#!/usr/bin/env python\nSo in the above output you seem to have the frida-python extension for python 3.x in your PYTHONPATH, and /usr/bin/env python presumably resolves to python 2.x.\n. Aha. I see what's going on here. This is my fault. The latest Frida release didn't produce a new Android binary, and turns out there's a compatibility issue that prevents the latest release from communicating with older frida-server binaries. If you redownload frida-server for Android, this issue should now be resolved.\n. Thanks!\n. This is due to a missing feature, I would say. The reason is that each session increments the port number used, so in order to establish 3 sessions in a row you currently have to adb forward the three next adjacent ports. The longer term solution here would be an ADB backend (similar to the Fruity backend that talks to iOS devices over USB) that handles the port forwarding transparently. Shorter term one could also implement some simple logic that will re-use the ports and only increment in the case of sessions with overlapping lifetimes. This shouldn't be too hard in case you feel like implementing it. The current logic is here.\nThanks!\n. We now recycle the ports when possible, so forwarding 27042 and 27043 should be enough in most scenarios. Closing.\n. Great stuff! Ready to merge once that Mac regression has been sorted out.\n. Yeah it's my bad for calling it mac and not darwin (I wanted to differentiate between Mac and iOS). Perhaps something like:\nbash\nandroid_build_platform=$(echo ${build_platform} | sed 's,^mac$,darwin,')\nAnd then just use android_build_platform instead of build_platform. What do you think?\n. Cool. Maybe just add it to this one? (Rebase if you like)\n. Ooh, sorry, I missed that. Looks great now (also tested it by simulating the assignments in a terminal on Mac and confirmed to work fine). Thanks, great stuff!\n. Looks like the injector isn't able to find a certain loaded library. Perhaps you could add some temporary printf-logging to check which? Also, a dump of /proc/<pid>/maps would be great.\nThanks!\n. Frida's prebuilt dependencies (its SDK) were built against NDK r9, and r10 is unfortunately not ABI compatible with it. Could you try with r9 and let me know how it goes?\n. Ahh, I'm sorry, I meant to say r9d. I'll add a note about this to the build system.\nThe issue with the Python version mixup is because the *.in scripts have this hashbang:\n``` sh\n!/usr/bin/env python\n```\nPerhaps it should be:\n``` sh\n!/usr/bin/env python@PYTHON_VERSION@\n```\nLet's try that.\n. Just pushed the aforementioned changes. Would be great if you could confirm that the correct python interpreter is now being used.\nCheers!\n. Oops, didn't quite get it right the first time. Sorry. Should work now.\n. After git pull, did you also do git submodule update?\nIf you did, what's the first line of the frida-trace script you're running?\n. No worries! By the way, to get frida-trace running with 3.4, you'll have to install the colorama package from PyPI. (Your 2.7 installation already has this as you previously installed the frida package from there, and it depends on it.)\nRegarding the dlopen() issue, it looks like you're running Frida and the target process inside a Docker container, right? Could you check if the following path is valid inside the Docker container:\n/mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\nAnd if it isn't, is this path valid:\n/lib/x86_64-linux-gnu/libc-2.19.so\nI have a suspicion that /proc/$pid/maps reports the path as seen by the host/outside also when queried inside the container. If so, the easiest would probably be to dlopen the basename of that path:\n``` patch\ndiff --git a/src/linux/linjector-glue.c b/src/linux/linjector-glue.c\nindex fefa237..523ec18 100644\n--- a/src/linux/linjector-glue.c\n+++ b/src/linux/linjector-glue.c\n@@ -912,7 +912,7 @@ frida_resolve_remote_linker_function (int remote_pid, gpointer func)\n static GumAddress\n frida_resolve_remote_library_function (int remote_pid, const gchar * library_name, const gchar * function_name)\n {\n-  gchar * local_library_path, * remote_library_path;\n+  gchar * local_library_path, * remote_library_path, * canonical_library_name;\n   GumAddress local_base, remote_base, remote_address;\n   gpointer module, local_address;\n@@ -924,7 +924,9 @@ frida_resolve_remote_library_function (int remote_pid, const gchar * library_nam\ng_assert_cmpstr (local_library_path, ==, remote_library_path);\n\nmodule = dlopen (local_library_path, RTLD_GLOBAL | RTLD_NOW);\ncanonical_library_name = g_path_get_basename (local_library_path);\n+\nmodule = dlopen (canonical_library_name, RTLD_GLOBAL | RTLD_NOW);\n   g_assert (module != NULL);\n\nlocal_address = dlsym (module, function_name);\n@@ -936,6 +938,7 @@ frida_resolve_remote_library_function (int remote_pid, const gchar * library_nam\ng_free (local_library_path);\n   g_free (remote_library_path);\n+  g_free (canonical_library_name);\nreturn remote_address;\n }\n```\nJust apply that patch to frida-core, and let me know if it works for you. (Untested, but should only be a matter of correcting a typo or two if it doesn't compile.)\nThanks for hanging in there! :)\n. Fix pushed. Thank you so much for your help!\n. Frida provides the spawn()/resume(pid) API, where the former creates the process with the main thread suspended, and the latter resumes the main thread. In between these two calls you're meant to attach(pid) as you'd otherwise do, trace any functions of interest, and then call resume(pid).\nOn Android, however, this isn't very useful as zygote simply forks whenever an app is to be spawned. This is not currently supported by Frida, but definitely something that should be supported, so it would be awesome if you could take a stab at implementing it!\n. Any luck? By the way, the spawn() implementation should work much better on Linux and Android now.\n. Me neither; time flies! :/ I had a quick look at the Android internals by the way, and it looks like it's possible to spawn an app by invoking /system/bin/app_process directly. This means it's possible to do this with Frida already, although probably not straight-forward. Perhaps an elegant solution would be that our spawn() implementation checks if argv[0] starts with a '/', and if it doesn't, it assumes a package name, like com.android.browser, and does the necessary set-up for you. But anyway, a good first step is probably trying to do this by hand to figure out what's necessary, and then automate it as a second step.\n. Aha, cool! Yep, figuring out how the IDE starts app suspended could definitely prove very useful for us.\nRegarding xposed, the reason this works is that their payload is part of any new process spawned, whereas if you use Frida to inject into Zygote it will stay behind when it calls fork() to become the app to be spawned. (Though technically Frida's code will be part of the newly forked child, but no threads survive the fork except the thread that called fork(), so any hooked functions will call into Frida code in an undefined state; e.g. a thread may have held a lock at the time the fork() happened, and trying to take that lock will leave future lock-acquirers waiting forever.) So that's the disadvantage of our current dynamic approach, but well, there must be an elegant solution hiding in there somewhere. :-)\n. This is finally implemented in the latest release, 4.5.1. It is now possible to:\n- spawn([\"com.android.browser\"]) with the package name, just like on iOS.\n- enable_spawn_gating() and listen to the spawned signal in order to do early instrumentation of services and other processes spawned implicitly when launching the app, or any other time for that matter. This is also supported on iOS.\nNote that the ART hooking isn't working well due to:\nhttps://github.com/frida/frida-gum/issues/105\nhttps://github.com/frida/frida-gum/issues/106\nFor now I would recommend sticking with a 4.4 emulator image, or a 4.x device.\n. Thanks! This sounds like a build issue, hopefully only a matter of adding -pie to the Android LDFLAGSin releng/setup-env.sh. Let me know if you need any help building Frida yourself to try this out. (If not I'll leave this issue open and I can have a closer look at this before the next release.)\n. Ah cool :)\nHmm.. you did adb forward all necessary ports on the host, right? (27042 for communicating with frida-server, 27042+n for each session \u2013 but beware there's not yet any recycling of ports so n will increase for each attempt)\nAnother potential issue to look out for is knox:\nirc\n20:31 <acicula> im toying with frida on an S4 with 4.4.2, but it crashes the app everytime i attached to it. I am just following the introductionary tutorial .\n20:32 <acicula> i am running into some trouble with knox it seems\n20:32 <acicula> E/knox    (19018): type=1400 msg=audit(1421843126.899:531): avc:  denied  { write } for  pid=29995 comm=\".an\n20:32 <acicula> droid.chrome\" name=\"linjector-29081\" dev=\"mmcblk0p29\" ino=259800 scontext=u:r:untrusted_app:s0 tcontext=u:ob\n20:32 <acicula> ject_r:shell_data_file:s0 tclass=fifo_file VE=SEPF_GT-I9515_4.4.2_0011\n20:32 <acicula> and that kills the process dead\n20:54 <acicula> fixed it :)\n20:54 <acicula> setenforce 0 and now its is set to permissive\n. Good plan :) Spraying frida-core/src/linux/linjector-glue.c with printf calls and frida-core/src/linux/linux-host-session.vala with stderr.printf (\"Foo %d\", bar); style calls should make things a bit clearer. Note that once frida-server has injected the .so into the target process it will communicate the port number back to the host, which will then TCP connect directly to this port number on the device, where the frida-agent.so is listening inside the target process. (frida-server is not a middle-man in the host<->target process communications.)\n. Any luck?\n. Great catch! The reason is lack of time. In theory it's just a matter of rebuilding Frida's SDK with the latest NDK. (Frida's SDK contains prebuilt dependencies, and unfortunately the latest NDK isn't ABI compatible with r9d.)\n. Aha, very interesting! Awesome work, thanks for digging :) I'll have a look at upgrading the SDK; hopefully the Makefile.sdk.mk steps should work with the latest SDK \u2013 fingers crossed :)\n. @ignoramous It's fixed in latest git. We will release 1.6.9 containing this fix later this weekend if all goes to plan.\n. Great stuff! Thank you!\n. Yep, a toplevel install target would be very helpful! I suppose we need to do this separately in Makefile.mac.mk and Makefile.linux.mk.\n. This is awesome, thanks a lot for doing this! Just one minor issue; could we keep calling it Mac for now, and consider a project-wide renaming later? I'd prefer that we keep it consistent, as there are more references in frida-website, frida-python's setup.py, the prebuilt toolchain and SDK tarballs, etc.\n. Thanks! Let's get this merged now.\n. This is not a bug per se, as the ptr() constructor is not meant to be used with JavaScript Number as an argument when dealing with actual pointers. It's helpful if you want to stick an enum value into a pointer, but probably more confusing than useful. Maybe the issue here is that we should remove that option entirely. ptr() (alias for new NativePointer()) is meant to be used like this: ptr(\"0xdeadbeef\").\n. Ahh sorry I missed that part. You're absolutely right. Memory.readU64() / Memory.readS64() are fundamentally broken, they should not return Number objects.\n. Sweet; thank you!\n. Great idea! \ud83d\udc4d\n. Doesn't look like this is going to happen in a long time, it's too much work due to the current build system.. Looks awesome! :+1: Thanks!\n. Sweet! Thanks\n. Did you try changing the kernel.yama.ptrace_scope descibed here? Thinking about adding an explicit check for this in the next release.\n. Ah yes. The first issue is because the latest release doesn't support 32-bit, only 64-bit. I added 32-bit support just a few days ago, and also cross-injection (64->32 and 32->64), so it would be awesome if you could try the latest code in git to verify that it works for you.\nThe second problem is an embarrassing regression in the latest release. I still have some other bugs left to fix before I'll get to that one, so if you could check if it works better with latest git, that would be really nice!\nThanks for your patience! :)\n. Both issues should now be fixed in the just-released 3.0.1. I'll announce the release soon, so please let me know if you find any further issues.\n. Those are only available on Windows, as they rely on the notion of a current ANSI code-page. Were you trying this on Windows or another OS?\nThe recommended way of reading a generic null-terminated string is Memory.readUtf8String(), although we might want to add a Memory.readCString() / Memory.readAsciiString() or something like that.\n. Ah right. That's definitely a use-case we should support. I'll add this to the TODO for the upcoming release due later today if all goes to plan.\n. Great idea. Thanks!\n. Fixed in latest git (to be released soon as part of the upcoming 4.0.0).\n. That would be awesome! There are two components where you'll have to make modifications:\n- frida-gum: This is Frida's platform library, which provides code instrumentation and many low-level goodies. It's written in C and you can piggyback on a lot of its existing code as ARM is already well-supported; you will just have to add the OS specific bits.\n- frida-core: In this one it is all about providing language bindings, e.g. frida-python and frida-node, with an API that lets them enumerate available devices, and given a device enumerate its live processes, attach() to them, or spawn() a new one in suspended state to attach() to and later resume(). attach() returns a Session on which you can create_script(), post_message() to that script, receive a message from it. Now what attach() does is to inject a shared library into the target process. This shared library lives in frida-core/lib/agent, and provides the logistics for getting frida-gum into a target process, and maintaining a two-way communication channel with it over a platform-specific transport (frida-core/lib/pipe).\nSo, to cut to the chase, these are the steps:\n- Build the SDK for qnx-arm:\nsh\n$ make -f Makefile.sdk.mk FRIDA_HOST=qnx-arm\n- Attempt to build frida-gum, which will build capstone for you and at least start the process of compiling it:\n  $ make -f Makefile.linux.mk build/frida-qnx-arm/lib/pkgconfig/frida-gum-1.0.pc\n- Then get frida-gum's tests to pass, through rinse and repeat of something along the lines of:\nsh\n$ cd frida-gum\n$ (. ../build/frida-env-qnx-arm.sh && make -C ../build/tmp-qnx-arm/frida-gum) && scp ../build/tmp-qnx-arm/frida-gum/tests/gum-tests targetdevice:/tmp/ && ssh targetdevice /tmp/gum-tests\"\nThis will mostly be about adding missing gum/backend-/ bits, as you get the gum/arch-/ bits for free as ARM is already supported. You can always add stubs here if you think certain features are not that important (e.g. you will definitely not want to write a Stalker backend, which I only got around to doing on x86 for now).\n- Attempt to build frida-core, just to start the process of compiling it. Then you can rinse and repeat like above. In this case you will need to add src/qnx/*, similar to the exising src/ examples. This is essentially about writing a shared library injector and a spawn() implementation. You can defer the spawn() part if you don't need it, but the injection is required (because it's used even when you spawn(), as a second step before calling resume() to let the main thread execute the entrypoint).\n- Add build steps to the top-level Makefile for the build OS where you'd like to do the cross-compilation. For example Makefile.linux.mk.\nThat should be it. Please do not hesitate to poke me if anything's unclear as you go along.\n. 1. Edit releng/setup-env.sh.\n2. The absolute minimum is what I went through above; though you can of course disable tests that are failing and only add stub implementations. (The reason I suggested using the tests is that they will guide you through the parts that will otherwise fail further down the line.)\n. Let's close this now that the preliminary support has landed thanks to the awesome work of @s1341.\n. Awesome stuff. Thanks!\n. Nice!\n. After the checkout, did you update the submodules? git submodule update\nThat linker issue is on master right now as things are a bit up in the air due to QNX porting.\n. Glad to hear! :+1:\n. Sweet! Maybe we should pass -p to frida-core's tests too? (They use the same test system so it'll just work.)\n. Awesome! Btw, looks like you committed the submodules by mistake? Feel free to commit them, but just make sure they point at the latest master of each module.\n. This is unfortunately due to major changes going on in Frida right now; I'm currently in the process of upgrading the third-party dependencies like GLib, V8, capstone, etc. I'm hoping to get most of the remaining changes landed tonight. This is the only big thing left on my backlog for the next release (coming soon), where the Python binaries will be fixed as well.\nSorry for the inconvenience! I'll keep you posted.\n. Feel free to give it a try now (from a fresh git clone). Tests are passing again on Windows, Mac and iOS, and I'm currently testing Android, so feedback on Linux would be great!\nCheers!\n. Thanks! This is an issue with the prebuilt dependencies where libraries were passed to the linker in the wrong order. I also discovered some other issues that have now been fixed. I'm doing a full rebuild across all platforms now, and I'll let you know as soon as it's been uploaded.\n. It should now be ready for testing; just give it a spin on a fresh git clone.\nThanks for your patience!\n. Yay, glad to hear! The python3 issue might be a missing development package (check config.log) btw.\nCheers!\n. I don't think the -f option exists in the BSD readlink; did you check if this works on Mac?\n. Ok. It's just to have the directories not clash inside build, so you can do \"make\" and later \"make PYTHON=/foo\" to build another python binding side-by-side.\n. Because which python might be a symlink, and we use its basename to name the directory. Ideally we want it to end up as e.g. lib/python2.7, so you can do make PYTHON=/usr/local/bin/python3.4 later to have lib/python3.4 side-by-side.\n. No, they'll still clash. This is however not a very important feature. I'd say just to proper detection like you mentioned, it's way better anyway.\n. Sweet!\n. Hi,\nThanks for reporting! This is a known issue with the current Linux binaries that will be fixed in the upcoming release. For now I'm afraid you'll have to build Frida yourself if you want to play with it on Linux. Sorry for the inconvenience!\nCheers\n. This looks like an incompatibility between your system's libstdc++ and the libstdc++ that I have on the Linux build machine, which was used to build the Frida SDK (prebuilt dependencies). It is GCC 4.9.1 IIRC. I'm afraid you'll have to build the SDK yourself. With a clean git clone, do:\nsh\n$ make -f Makefile.sdk.mk FRIDA_HOST=linux-x86_64\nThen once it's built it should be automatically picked up when you then proceed to build Frida.\n. Sorry, that script is obsolete. Didn't the Makefile.sdk.mk in the frida repo work?\n. Oops, realized there was a regression. Should be fixed now. Sorry about that! Could you give it another spin now? (From a fresh git clone.)\n. Sorry about the late follow-up here!\nIt looks like you forgot to build the i386 part:\n$ make -f Makefile.sdk.mk FRIDA_HOST=linux-i386\nDon't build the toolchain btw, that's not necessary.\n. Hi,\nIt appears your local version of Frida is quite old \u2013 did you install it recently?\nCheers!\n. Glad to hear! Thanks for using Frida! :+1:\n. Oh, nice catch! Thanks!\n. Hmm, perhaps you meant drawRect_ for drawRect:? Frida 4.0.0 has just been released with a fully revamped ObjC integration, so it would be great if you could give it a spin.\nThe API is now:\nJavaScript\nvar NSStatusItem = ObjC.classes.NSStatusItem;\nvar method = NSStatusItem[\"- drawRect:\"];\nmethod.implementation = ObjC.implement(method, function (handle, selector) {\n});\nMore examples here.\nCheers!\n. This works fine now. Closing. Thanks for reporting!\n. Fixed :) (4.1.9 is out with the fix)\n. Thanks!\n. No there is unfortunately none yet, but contributions are much appreciated in case you feel like having a stab at it. Cheers!\n. Awesome!\n. This is because we currently assume that git is in your PATH. We should probably improve the script to auto-detect its path on Windows.\n. Hi,\nx86 Android isn't fully supported yet; I initially ported it but realized I've taken on too many platforms to maintain, so I dropped it for the time being. If you'd like to build Frida yourself for Android/x86 and stabilise it then that would be awesome, but otherwise I'm afraid you'll have to use an Android/ARM emulator.\nCheers!\n. @hubert3 Everything is ported except for the Dalvik integration, where some struct offsets probably don't match Android/ARM (untested). Last time I tried I did however experience random crashes at the point where Frida's .so was injected, but I didn't have time to investigate. There have been generic improvements and fixes to the injector since then, so this might be working better now. If you could build the server yourself and take it for a spin that would be great. All you need to do is:\n$ make build/frida_stripped-android-i386/bin/frida-server\n. @haomnguyen Yes it is fully supported.. This looks correct at first glance. What happens?\n. Hmm, you're sure there's no escaping issue with the backslashes inside that python multiline string? I would recommend reading the .js from a file while prototyping. You can do:\nbash\n$ frida -R com.adobe.jaguar:jaguar_bf -l decode.js\nThen in decode.js put your code. You can enter %reload in the REPL to make it reload the .js file.\n. Did you run the frida tool? (I'm assuming you're running the latest 4.0.x version)\n. Considering this issue fixed.\n. Did you figure out how to build it as a static library? Would be good to add this to releng/libc-compat/modsi3.c, and name the library libfrida-libc-compat.a.\n. Awesome!\n. Sweet! One thing, could we normalize the coding style to match, say, frida-core's C code?\n. Hey,\nThanks for reporting! This is most likely caused by the implementation having a position-dependent instruction early in its prologue, and we fail to relocate it properly. Beware of setting breakpoints with a debugger, as it will get confused as we rewrite the start of the function in memory.\nCould you disassemble the first instructions of the function (with their opcodes) and paste here?\nCheers!\n. Thanks! So, for Thumb functions we currently copy at least the first 12 bytes as you can see here, potentially more with mixed length Thumb instructions (to not cut an instruction in half). The issue is that when we copy (relocate) the instructions here, and there must be one of the instructions that is position-dependent that we don't rewrite correctly. Looking at the instructions you pasted, it must be LDR.W R2, =(__stack_chk_guard_ptr - 0x48FD8). Looking at the test-suite, I see that we currently handle the narrow ldr pc instruction according to this test, but not the wide one. So this should just be a matter of adding another test there for the wide version of the instruction, and implementing it in the ThumbRelocator to make the test pass. I'm very busy right now, so if you feel like taking a stab at this then that would be awesome. (If not I can have a look at it in the near future.)\n. Success:\nsh\n$ frida-trace -R -i android_getaddrinfoforiface com.android.browser\nInstrumenting functions...\nStarted tracing 1 function. Press ENTER to stop.\n  7460 ms       android_getaddrinfoforiface()\n 13436 ms       android_getaddrinfoforiface()\n 14837 ms       android_getaddrinfoforiface()\n 20836 ms       android_getaddrinfoforiface()\n 25437 ms       android_getaddrinfoforiface()\n 32838 ms       android_getaddrinfoforiface()\n 49439 ms       android_getaddrinfoforiface()\n 56840 ms       android_getaddrinfoforiface()\n 97440 ms       android_getaddrinfoforiface()\n104841 ms       android_getaddrinfoforiface()\n. Thanks!\n. Oh yes, completely agree. Would also be neat to be able to disable or reduce optimizations and build with ASAN.\n. Hi,\nThe Dalvik integration doesn't yet support fields, only methods. I think @marc1006 started on a patch adding support for this, so hopefully this might happen in the near future.\nCheers!\n. Considering this one fixed.\n. Great stuff!\n. Hey,\nThanks for reporting. This is definitely not supposed to happen. Do you feel like building frida-server yourself from git and have a stab at reproducing it with gdb attached? If not I'll hopefully get around to it next week or so (my head is currently deep down in the iOS guts of Frida).\nCheers!\n. @marc1006: What kind of device(s) are you testing on these days?\n. This is because Frida uses the clang toolchain, and binaries produced by it are not compatible with 4.0. Let's consider this fixed (changing toolchains is possible but painful).\n. Ouch. I'm currently deep down in iOS land, but I'll try to find some time to investigate this Android issue sometime this weekend.\n. Fixed in latest git. We now support devices with SELinux in enforcing mode, there's ART support, and 64-bit ARM devices work too (verified on a Samsung Galaxy S6 Edge). Enjoy!\n. Hmm, interesting. I do see one issue though:\nJavaScript\nvar in_size = args[2];\nbut you want:\nJavaScript\nvar in_size = args[2].toInt32();\nAs you don't want to be comparing the NativePointer in args[2] to a JavaScript Number. Also, the second argument of Memory.readByteArray() should be a Number and not a NativePointer.\nDoes it work if you change this?\n. By the way, make sure you grab the new 4.2.6 release, as it has a bug-fix that you need: it fixes access to args[4] through args[7] on arm64. In 4.2.5 and before we were looking on the stack for those arguments, instead of in the registers (d'oh!).\nGood point regarding \"-f\" btw; the issue is that we install a signal handler very early, even before the application has installed its handler(s), so the application comes after us and replaces our handler. That's why we don't get a JS exception on bad memory access. We could hook the signal handler APIs I suppose, and only chain to the application's handlers for failures that we didn't cause (and revert properly when detaching from the process). It's related to solving frida/frida-gum#6 btw.\n. All mentioned issues are fixed in the latest release.\n. Hi,\nThanks for reporting. Hmm, could you double-check that it is this frida-server binary that is the one currently running on the iOS device? Also, if you have more than one USB device connected, one of them might be running an older version of frida-server.\nCheers!\n. Sorry for the delay here. Do you still get TransportError: no such interface 're.frida.AgentSession1' on object at path /re/frida/AgentSession1/9? That should only happen if the Frida version on the host is incompatible with the one on the device. Btw, note that you only have to copy build/frida-ios-universal/bin/frida-server to the device; it's 100% self-contained.\n. I was looking into something unrelated and managed to reproduce this issue:\nFailed to load script: no such interface 're.frida.AgentSession1' on object at path /re/frida/AgentSession1/1\nIt happened when the target process crashed right after attaching to it (which I provoked it to do). Is this also what's happening in your case?\n. Should be fixed in the newly released 4.5.1.\n. Hi,\n(Sorry about the late follow-up here.) This is because you need Python 2.7 installed, as this is required by a build step that generates frida-core.h.\nCheers!\n. Thanks for confirming! :+1:\n. Hi,\nIt is not yet supported, but porting it should be very straight-forward. Most of the architecture-specific bits are shared and already working on both arm and arm64, but the injector has some code generation that is specific to each OS/arch combination. The missing part for linux-arm is this:\nhttps://github.com/frida/frida-core/blob/52a09f1cb8ad8565ea3cc2f79f4025ad7b4625fb/src/linux/frida-helper-glue.c#L774\nCheers!\n. Closing due to inactivity.\n. Thanks for your kind words!  Very interesting. I've heard about similar issues from others, so I think it's time to have a look at this soon. I'll keep you posted.\n. This should be fixed in the newly released 4.5.1 release.\n. Fixed in latest Frida 9.x.. Ooh. The documentation isn't too clear, but if you omit the first argument to Stalker.follow() it will follow the current thread. In the example above that thread is one of Frida's threads (which is among the threads filtered out from Process.enumerateThreads()). We also configure the underlying Stalker implementation so that it tries to avoid stalking into Frida's code range, so that's another reason you get very little output (not that tracing one of Frida's threads would give you anything of interest anyway).\nSo what you should do here is either stalk one or more of the thread ids given to you by Process.enumerateThreads(), or directly from a synchronous callback from the application's code, e.g. Interceptor.attach()'s onEnter or onLeave callbacks.\nHope this makes things a bit clearer!\n. Should be fixed in latest Frida 9.x.. Should be fixed in the newly released 4.5.1.\n. Thanks for reporting! This has recently been fixed and the fix will make it into the next release.\n. The Android spawn() functionality in the latest released version of Frida is limited to spawning executables. Support for spawning apps is currently being implemented (I'm working on it), and once it lands it'll be like what you tried: device.spawn([\"com.skype.raider\"]).\n. Sweet! \ud83d\udc4d\n. Sorry about the late follow-up, spent some time offline.\n1) Not currently; you are meant to send() a message to the host-side and have it call .detach() on the session (or .destroy() on the script).\n2) No. Patch would be very welcome though! :)\n. Please open a PR against frida-tools if you're interested in this functionality.. The official way to accomplish this currently is to set up a local SSH tunnel to from localhost:27042 locally to localhost:27042 remotely, and use the -R switch with the CLI tools, and frida.get_remote_device() from Python, and frida.getRemoteDevice() from Node.js.\nThere isn't yet an API to specify the host/port to connect to, only frida-server supports specifying what to listen on. I implemented support for the first part of this in the backends, but didn't expose this to the API yet. Basically this is a matter of wiring up in src/frida.vala, which serves as the facade API to shield users from the lower level HostSessionService API (which due to the nature of DBus, which we use p2p over a platform-specific transport, is somewhat clunky to use). If you see a nice way to represent it let me know, I put it on the backburner temporarily while thinking about the best way to expose it. Perhaps DeviceManager.add_remote_device(ip, port) which returns a Device and this device magically appears in the list of devices?\n. Cool! I'll look into adding that soon.\n. Well, not quite \u201csoon\u201d, but this is now finally implemented. :-)\n``` sh\nlisten on 127.0.0.1:27042 (the default)\n$ frida-server\nlisten on all interfaces\n$ frida-server -l 0.0.0.0\nlisten on a specific interface\n$ frida-server -l 192.168.1.3\nlisten on a specific interface and port\n$ frida-server -l 192.168.1.3:1337\nconnect to specific IP\n$ frida-trace -H 192.168.1.3 -i \"open*\"\nconnect to specific IP/port\n$ frida-trace -H 192.168.1.3:1337 -i \"open*\"\n```\nAvailable in Frida 6.2.6.\n. Hmm, that's odd. Could you paste the code you're trying with? Is this with Frida 5.0.5 (from last night)?\n. Instead of:\nthis.len = parseInt(args[2]);\nI would recommend:\nthis.len = args[2].toInt32();\nBut here's what seems to be the issue; Memory.readByteArray() returns an ArrayBuffer in Frida >= 5.x (it used to return an array-like object in Frida <= 4.x). That means you need to use the byteLength property, like so:\nlog(\"Written bytes: \" + bbuf.byteLength);\n. Sweet! :+1:\n. @abarbaro Did you try log(hexdump(Memory.readByteArray(this.buf, this.len)));?\n. @abarbaro Btw, ArrayBuffer does not have a length property, only byteLength. Anyway, if you want to access individual bytes on it you should use an Uint8Array view, or pass it as the second argument to send() in order to process it on the host-side (depending on what you're doing).\n. Hi,\nThe current QNX build system hasn't been ported to Windows. Would you be interested in helping out porting it?\nCheers!\n. No we cross-compile it from Linux (OS X might work too, didn't check). If you're low on time I would suggest setting up a VM with Ubuntu 15.04, and use that for building.\n/cc @s1341\n. Good point @s1341; to run it on x86 you will have to add some x86 code generation here:\nhttps://github.com/frida/frida-core/blob/f27e79681fc2a80f77596818bae7fb90dfe73d76/src/qnx/qinjector-glue.c#L241\nThe easiest is probably having a look at the Linux backend and doing a mental three-way diff to port it. :-)\n. By that I mean compare how the QNX/ARM code differs from Linux/ARM (it was based on it), then copy-paste Linux/X86 code and apply the corresponding changes to it.\n. Hi,\nThanks for reporting. This is a known issue with the prebuilt dependencies on Linux. I built them with GCC 4.9.x, and it turns out that trying to link to those binaries with older versions (like GCC 4.8) is not going to work due to ABI breakage. Possible workarounds are:\n- Upgrade to Ubuntu 15.04\n- Recompile the dependencies\nTo recompile the dependencies, do:\n$ git clean -xffd # start from a clean slate\n$ make -f Makefile.sdk.mk FRIDA_HOST=linux-i386\n$ make -f Makefile.sdk.mk FRIDA_HOST=linux-x86_64\nThen once both of those SDKs have been built there will two tarballs in build/, which you can copy aside for safe-keeping (for future builds), and then proceed to build Frida the usual way:\n$ make\nCheers!\n. Ooh sorry, I missed the part about your cross-compiling for Android. Which Android NDK version are you trying this with?\n. Haven't been able to reproduce this. Please reopen if you're still seeing this issue with the latest code in git.\n. Thanks for reporting! I have heard of similar reports earlier, will try to investigate this soon.\n. Sorry about the delay. This is now finally fixed and released in 6.0.8.\n. Thanks!\n. Oops, I broke this in the last hours, sorry about that. Fixed now in latest git. Thanks for reporting!\n. This is a known issue that I should have mentioned in the release notes - sorry about that: frida-server gets launched by launchd but gets instantly killed by Jetsam on iOS 9 (works on iOS 8). We need to figure out a way to override the resource limit that Jetsam catches us exceeding.\n. @Cianjoo Does it work if you ssh to your device and manually start frida-server as root?\n. @JohnCoates Did you figure out which entitlements are needed? I didn't yet dig into this, but I noticed that putting Jetsam properties in the plist didn't have any effect. Hope we won't have to use a post-install step where we modify the device-specific plist with Jetsam properties for all system services.\n. This issue has finally been fixed in the latest release (6.0.6).\n. Thanks for reporting, and sorry about the delay. This should be fixed now.\n. Investigating.\n. Closing due to inactivity.. Hi,\nThanks for reporting! Which user are you running python as? If the target crashes when attaching it most likely means that the code we inject fails to load our frida-agent.so. The dlopen() call returns NULL, and we crash the process. The python process should write frida-agent.so to a temporary directory, and if this file isn't readable by the target process it will crash when trying to attach to it. Could you check your tempdir to see if you can figure out what the permissions are?\nCheers!\n. Sorry about the delay. This is now finally fixed and released in 6.0.8.\n. Hey,\nThanks for reporting! This is very interesting. Could you try code-signing FridaGadget.dylib with the same identity that your app is signed with and check if that makes a difference?\nCheers!\n. Assuming this is fixed.\n. Ooh, nice catch. I have only tested frida-trace in unicode-capable terminals so far. I'll set up a VM and try to reproduce this.\n. Fixed: https://github.com/frida/frida-python/commit/a0405e3f4ac86634cb649b0e0a928db2645ce916\n. Hi,\nThat error means you're on El Capitan trying to attach to a system binary, which /bin/cat technically is (being signed by Apple), so there's not much we can do about that for now except provide a better error-message, and suggest a better example target in the docs.\nCheers!\n. Hi @IgorGanapolsky,\n\nIs there a way to make these instructions clearer for Mac OS users?\n\nYes, they were written before SIP entered the picture. Would appreciate a PR improving that guide if any of you feel like it. :-)\n. @IgorGanapolsky Good point. Might be easier to ask the user to compile a \u201cHello World\u201d-style program, like we do in the tutorials. (The alternative would be to suggest different programs depending on the OS, but that quickly becomes messy too.)\n. @dweinstein Thanks! That's definitely the simplest solution! :-)\n. Thanks! Will fix this soon.\n. Fixed, just re-download FridaGadget.dylib and the new version should work.\n. Hi,\nThis is because of a known issue where frida-server fails to launch properly with launchd due to Jetsam resource limits. For now you will have to ssh to your device and manually run frida-server & as root.\nCheers!\n. Yes, if your iPhone is running iOS 9 you will also need to:\n$ ssh root@your-iphone\n$ frida-server &\n. Fixed in the latest release (6.0.6).\n. Thanks! :+1:\n. Thanks!\n. Hi,\nDoes this also happen if you reinstall after freeing up storage on your iOS device?\nCheers!\n. Oh wait, I see the problem. Frida on your host side is outdated. Try: sudo easy_install -U frida\n. Glad to hear! \ud83d\udc4d Thanks for the patience!\n. No worries at all. Glad to head that! :) Feel free to join #frida on FreeNode by the way.\n. Thanks! Is this the only issue on the newer prompt-toolkit? (I didn't have time to investigate this so I ended up just locking the version to 0.38.)\n. Sweet! Feel like submitting a PR with this change and bumping the version requirement in setup.py?\n. It's a daemon that you need to start manually. Is frida-server running as root?\n. No worries. That example will work great with an emulator, but for a rooted device you probably want to copy the binary to the device just like in those instructions, and then do something like:\n```\n$ adb shell\nsu\n/data/local/tmp/frida-server &\n```\n. Is this still reproducible with Frida 6.2.1?\n. @filipesam Please try 7.2.24. This issue should be resolved.\n. Just those two nitpicks and we can land this. Great stuff!\n. Hi,\nIs your frida-server on Android running as root?\n. Ahh yes, that must be the reason then. It's currently very easy to block us on Android/Linux because we rely on ptrace() for the short moment where the injection happens. But, you can use Frida to spawn their app, and easily sabotage any anti-debug tricks they may have from the inside.\n. Np! No, you have to kill it yourself.\n. @henrymark92 Your issue has been fixed in Frida 10.6.39, currently being released. Cheers!. @henrymark92 Emulators like BlueStacks App Player are not supported \u2013 they run JNI code in an ARM emulator, and our hooking logic isn't compatible with that. It's a non-trivial fix, so this won't be fixed unless somebody contributes support for it at some point.. Hi,\nAre you using the toplevel Makefile.$BUILD_OS.mk or are you trying to invoke configure/make/etc. directly in the different submodules?\n. Ahh! We currently have an issue where the build system's generation of Vala code only happens once, so the preprocessor defines there will be processed only once. This is something I've been wanting to fix, but haven't found the time to do it yet. So for now you will have to make clean between building for Linux (typically your host) and building for Android, or clone the repo twice.\n. Hi,\nThanks for reporting. Which Android version are you trying this on?\n. Ok. Sounds like it should be easy to fix. I'm currently deep down in another part of Frida right now, so I can't look into this this week. Would you be interested in trying to track down the issue? What I usually do is the following:\n- Copy-paste the contents of https://github.com/frida/frida-gum/blob/master/bindings/gumjs/gumjs-java.js into a new file locally, say test.js\n- Rename the Java and Dalvik references here to something else, say JavaDev and DalvikDev, making sure to update all three references there, lines 75, 84 and 87.\n- Append my test-code to the very end of the file, remembering to use the new names from the previous step.\n- Load this script into a running process: frida -U AppProcessNameOrPid -l test.js.\n- Observe that the problem is reproduced.\n- Study the source-code above, adding console.log() printouts in different places to better understand what's going on, and on every change just enter %reload in the REPL, which will reload the script from the filesystem. (No need to re-run the frida command.)\nFeel like giving it a try?\n. From a quick glance at your test outputs, I'm guessing that the problem is in this area:\nhttps://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1532\nhttps://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1584\nThe first two arguments are normally env and this, but for constructors it seems like the this argument is not there.\n. Cool, this is great progress! On Dalvik we handle the \"calling back to the original function\" by the following trick at the VM level:\n- Make a shallow copy of the class structure, except for the vtable, which we copy. This is our shadow version of the class.\n- Update the original's vtable so it has our replacement implementation.\n- Let our copy have the original implementation intact.\n- Pass the shadow class to our callback, so that if we try to call the same method from inside our implementation it will call the original instead of recursing back to ourself.\nPerhaps this logic isn't working for constructors? (Maybe they're not in the vtable \u2013 didn't check that.)\n. Let's keep tracking this in frida/frida-gum#89.\n. :+1:\n. This is normal. The first argument might be the same because either:\n- It's the this (C++) / self (Objective-C / etc., i.e. different methods called on the same object.\n- The function accepts 0 arguments, and you just happen to look at the same garbage value (less likely).\n- The function uses a custom calling convention. args[n] assumes the default calling convention. For custom calling conventions you can use e.g. this.context.eax to access the register values directly, and Memory.read*(this.context.sp, ...) to read from the stack, etc.\nFrida's Interceptor has no information about the number of arguments, because there is no such information available at the ABI level (and we don't rely on debug symbols). So if you want to use Interceptor.replace() you will need to know, and supply, such information, but Interceptor.attach() works on any function without knowing anything about it.\nCheers!\n. Did you try easy_install -U frida?\n. Hi,\nDo you have any autoconf/automake/etc. on your PATH? E.g. as installed by Homebrew.\n. Please make sure you don't have autoconf/automake/pkg-config/etc. on your PATH, because Frida has its own toolchain with those things. The issue here seems to be that your system-installed binaries are getting picked up instead, which is a bug in our build system. (If you want to look into that that would be most appreciated!)\n. Hi and thanks for reporting,\nWhich iOS version is this on? There is a known issue where we don't yet do anything about that built-in timeout, so if the instrumentation logic takes too long you will run into this issue. However, I have been wanting to optimize the Objective-C method resolving, as it would be nice to reduce that delay anyway, and it means we can figure out how to disable the timeout at a later point.\nCheers\n. This issue should now be fixed in 6.2.1.\n. Fixed in latest Frida 9.x.. Please open PRs against frida-website to help improve this.. @Grazfather Thanks, you're right!\n. Hey,\nThe File API was added to be able to write to local files from the target process' perspective. Personally I've only used it for logging when running Frida in standalone mode. It is unfortunately very limited in usefulness though, as a lot of apps are sandboxed and writing to any file at all may not be possible.\nThe better solution is to define a simple protocol between your host and your target, and just do something like: send({ event: '+write' }, data) that you receive on the host side and write to a file there.\nCheers\n. Ah no I wouldn't use the Socket API, but I mean the global function send(), which uses the same communication channel that Frida is already using to remotely create scripts, load them, etc. It uses a different transport per platform, i.e. Mach ports on Mac and iOS, and on every platform the idea is to use the lowest level API possible to avoid common issues with firewalls and/or endpoint security software.\n. Sweet! Let me know if you run into any issues.\nCheers!\n. Should be fixed in latest Frida 9.x.. Should be fixed in latest Frida 9.x.. Should be fixed in latest Frida 9.x.. Nice!\n. Hi,\nThis is to be expected. Long-running operations should not be blocking the loading of the script. So just wrap your for-loop in a setTimeout, i.e.:\njs\nsetTimeout(function () {\n  /* your code here */\n}, 0);\nBut if you want to run this operation every 5 seconds, it is better written like this:\njs\nvar remaining = 200;\nfunction crackNext() {\n  crackuserinfo(uid);\n  if (--remaining > 0) {\n    setTimeout(crackNext, 5000);\n  }\n}\nsetTimeout(crackNext, 0);\nCheers\n. :+1:\n. Hi,\n1. ART hooking is not yet working. Dalvik on Android 4.4 on 32-bit ARM is currently the best supported configuration.\n2. This is because your host-side is Frida 7.x, but the frida-server running on your target is from a different major release, e.g. 6.x. See frida/frida-core/issues/72.\nCheers!\n. If you get that error it means that the Frida major version between host and device is not the same, e.g. 6.x on host and 7.x on device.\n. Great idea, thanks!\n. Hi,\nplease have a look at releng/setup-env.sh and releng/config.site.in to add the necessary pieces there.\nCheers!\n. Thanks for reporting. This is a known issue that I haven't had time to look at yet.\n. Should be fixed in latest Frida 9.x.. Hi,\nThis looks correct. Are you running Frida 7.0.7 on both host and device?\nCheers!\n. Fixed in latest Frida 9.x.. Hi,\nIt is possible, but there might be bugs, especially in the Java integration, so be prepared to hack on Frida if you want to build it for x86. Here's how:\n$ make build/frida_stripped-android-i386/bin/frida-server\n. Hi,\nIt seems you forgot to call the method:\njs\nvar url = new ObjC.Object(args[0]);\nvar str = url.absoluteString().toString();\nObjective-C property access, e.g. url.absoluteString instead of [url absoluteString], is actually just syntactic sugar for a call to a method with the same name. Once you have an NSString you can call toString() on it to convert it to a JavaScript string (or you can use the + operator with an existing JavaScript string to convert it automatically, e.g. \"foo: \" + s, in which case s.toString() will be called automatically).\nAlso new should be used when constructing an ObjC.Object.\nHope this helps.\nCheers!\n. Did you resign the app with corresponding entitlements as the original one? Remember that these will vary between apps. With this particular app it sounds like you are missing at least keychain-access-groups, possibly more. You should also add get-task-allow to the list so the app can be launched with lldb (which is required for FridaGadget to be able to run unsigned code).\n. Should be fixed in latest Frida 9.x.. Please file Java issues in frida-java. Cheers!. This is covered by the website (check out the \u201cExamples\u201d section).. I'm afraid it's because your system has two cat processes running. (So use the PID to avoid ambiguity.). Let's keep tracking this at frida/frida-core#101.. Hi,\nIt looks like it's trying to download the following prebuild:\nhttps://pypi.python.org/packages/2.7/f/frida/frida-7.0.10-py2.7-linux-i686.egg\nWhich does indeed exist, so this looks like a network / firewall issue. Could you try downloading the latest source tarball and adding some temporary logging to setup.py to see what's causing the error?\nCheers!\n. @mike4420 This should be fixed now, was a build machine hiccup.\n. Not able to reproduce.. This should work:\nvar hook01 = Java.use(\"java.io.File\");\n    hook01['delete'].overload().implementation = function() {\n        send(\"File.delete() hooked\");\n        return Boolean(1);\n    };\n(Btw, Java is the new name, Dalvik is a deprecated alias that will be removed at some point.)\n. Ahh, I see the problem. Could you try:\n- copy-pasting gumjs-java.js into a new file, e.g. foo.js\n- changing the module names to something unique to avoid colliding with Frida's builtin types\n- adding your test-code to the bottom of the file, making sure to use the new module name that you defined in the previous step\n- load that with frida -U TargetProcessNameOrPid -l foo.js\nThen verify that it reproduces the problem, and attempt a fix:\n- append an underscore to the name generated here\n- append an underscore to the name generated here\n. Should be fixed in latest Frida 9.x.. Hi,\nThe changes we depend on are still not merged (modrm offset) and have been sitting in the encoding branch upstream for a long time, so this is unfortunately out of our control.\nCheers!\n. @cganas This was fixed with a hack where we detect that we're in a source package and pretend we build the native extension, but actually download the .egg and extract the prebuilt extension from it. It's pretty terrible, but haven't found a better option for now.\n. @cganas Oh, nice catch! Thanks! This is definitely a bug. So target_extension is .dll but the one in the egg is .pyd, correct? Sounds like we need a kludge for Windows, where we set target_extension to .dll regardless.\n. @cganas Awesome!\n. Should be fixed in latest Frida 9.x.. Fixed in latest Frida 9.x.. Should be fixed in latest Frida 9.x.. Yep that's correct. Also if you wipe all frida-* directories in /Library/Caches, and upgrade to 7.1.9 (currently being released), frida-server will now re-use the same temporary directory on every run, to prevent this kind of issues. Hope this helps!\n. This is already supported:\nhttps://github.com/frida/frida-load\nWe should document this better though.\n. Should be fixed in latest Frida 9.x.. Should no longer be an issue in latest Frida 9.x \u2013 we now honor proxy settings.. Hi,\nDid you try it as root?\n. Hi,\nAll of this is possible, but Frida just gives you the building blocks. Check the web-site to learn how to use the APIs, and from there you can build all of that very easily.\nCheers!\n. Could you try again now? Should be fixed in frida 7.1.8.\n. Frida is not currently compatible with Xposed. Please keep an eye on frida-java to know when this improves.. @jamesst20 Oops, sorry, you are absolutely right. We should hopefully be compatible with Cyanogenmod now though. (Please open an issue in frida-java if not.). Hi,\n\nvar baseAddr = Module.findBaseAddress('MyApp_inhouse') - 0x4000;\n\nThis is not a good idea, you should use .sub(0x4000) to stay in the NativePointer domain to avoid losing bits. (JavaScript Number values cannot represent all 64-bit pointers.)\n\nvar origFuncRVA = baseAddr + origFuncOffset;\n\nSame here. Use baseAddr.add(origFuncOffset).\nBtw, if the function is Thumb then you need to make sure that the LSB is set, e.g. .or(1). Could this be the issue?\n. Yes that definitely can be hooked. I noticed that it's Thumb, so you'll have to set the lower bit when passing the address to Interceptor, i.e. 0xbadbd \u2013 ptr('0xbadbc').or(1).\n. Glad to hear!\n. Should be fixed in latest Frida 9.x \u2013 was caused by a stability issue. Sorry for the delay!. Hi,\nThat would only work if you know there's an Objective-C string at 0x1234 in memory. Instead you might want something like:\nargs[3] = ObjC.classes.NSString.stringWithString_('Hello');\nCheers!\n. Should work properly in latest Frida 9.x.. This is now possible with the new API: Memory.patchCode(ptr('0x1234'), 1, function (ptr) { Memory.writeU8(ptr, 0xCC); });. Thanks! This should be fixed in the latest releases, so let me know in case 7.2.24 or newer doesn't fix this.\n. This is not currently supported but is something we should consider adding API for, as it would be very easy to implement.\n. Let's revisit this later.. The port is already done and has been used in the field, this issue is just to have an overview of where the port is lacking features compared to the other architectures we support. No development is happening currently though, we hope others will help fix the remaining parts.. Just that one nit and this is ready for merging.\n. \ud83d\udc4d\n. Thanks for reporting! This is a duplicate of frida/frida-gum#106. (Our ART support is still a work in progress.)\n. Hi,\nWould you mind sharing the code in ctf.js?\nCheers!\n. Hi,\njava.util.Map is just an interface, so you'd want to instantiate one of its implementations, like java.util.HashMap. For example:\n``` js\nJava.perform(() =>\n  const HashMap = Java.use('java.util.HashMap');\nconst initialCapacity = 2;\n  const map = HashMap.$new(initialCapacity);\n  map.put('name', 'Joe');\n  map.put('description', 'Engineer');\n/ now you can use map /\n});\n```\n. This was a regression introduced in 7.2.4, fixed in 7.2.10. Please upgrade the server version to the latest version (7.2.24 right now). It is strongly recommended to run the latest version on both host and device.\nCheers!\n. Hi,\nIs this an ARM or Thumb function? If it's a Thumb function you will have to set the lower bit (i.e. 0xaf13b01d in your example), as specified in the documentation. You should also pass the argument to ptr() as a string, as you otherwise could run into issues with 64-bit targets where a JavaScript Number cannot represent the full pointer value.\nCheers\n. Sorry I'm not sure I understand your question. Your example is hooking the function, so you get callbacks before and after it is called. There is then no need to call the original function, because Frida is doing it for you. However if you used Interceptor.replace() you would have to call it yourself if you still want the original implementation to get called.\n. Glad to hear! Happy hacking! :)\n. That would indeed be useful. Please open a PR against frida-python if you're interested in making this happen.. Should be fixed in latest Frida 9.x.. Fixed. Please do a fresh git clone and try again.\n. Please try wiping your frida repo and building Frida as normally. (The new SDKs have been prebuilt for most of the platforms and architectures now.)\n. Hey,\nThanks for reporting. This is definitely a regression. Would you mind trying different releases to try to narrow this down? Very curious to know if the last version before 7.3.0 works, or the regression happened earlier.\nCheers!\n. Fixed in latest Frida 9.x.. Fixed in latest Frida 9.x.. This is actually not a bug (though definitely a user experience/documentation bug though). Calls from Frida's own threads are ignored. Otherwise you'd be hooking functions and seeing calls that are made by Frida's internals, and that would be confusing. You can however use Interceptor.replace() if you need a hook that triggers regardless of caller.. @mrgreywater Interesting. Maybe you want stdcall? (If you want NativeCallback to clear the stack, and not the caller.). @mrgreywater I know, but I suspect libffi implements the GCC version of thiscall, not the MSVC version. I'll be offline for a bit so can't investigate, but you can find the exact code we're using here: https://github.com/frida/libffi/tree/windows. Ah ok. Btw, you can use Memory.alloc(Process.pageSize) (as allocations >= page size are allocated in raw pages), write your code there, then Memory.protect() to make it executable, and voila, you have your own callback adapter. :) (Maybe someday we should expose our code writer and relocators to JS to make this kind of trickery even easier.). It's been planned for a long time, but I haven't had the bandwidth to finish up the preliminary ART support currently in Frida. Good news is that I've recently just resumed this work, so stay tuned for some substantial ART progress in the next releases.\n. Should be fixed in latest Frida 9.x.. Hi,\nThe recommended way is to install the latest version through pip or easy_install, e.g.:\npip install frida\nYou can also find other binaries at https://github.com/frida/frida/releases.\n. Sorry for the delay btw. Feel free to drop by #frida on FreeNode.\n. Should be fixed in latest Frida 9.x.. Not currently unfortunately. Let's keep tracking this at frida/frida-gum#185.. Should be fixed in latest Frida 9.x.. @jabbink That should indeed work. The problem is that Interceptor may need to overwrite more than just one instruction, and sometimes there just isn't room to overwrite as many as it needs, e.g. end of the basic block is right ahead. But, we do have logic that tries to find code caves so it can get away with shorter jumps, so we don't have to overwrite that much. This logic is however only implemented in the arm and arm64 Interceptor backends, so we still need to implement this in the x86 backend. Let me know if you're interested in exploring this.\n. Should be improved in latest Frida 9.x.. Should be fixed in latest Frida 9.x.. Should be fixed in latest Frida 9.x.. Hi,\nYou can find it here.\nCheers!\n. Any chance you could try older releases from http://build.frida.re/debs/ and narrow it down to one specific release where this broke? I no longer have a jailbroken 9.x device for testing, and this works fine on 8.x, so I'm unable to look into this for now.\n. (But if you can help me narrow it down to one release it should be easy to fix.)\n. Would you mind building Frida yourself, modifying config.mk to set FRIDA_STRIP to no? Having lldb attached when the crash happens should be helpful. I'm wondering if it is the target app that crashes, frida-helper, or frida-server.\n. @TheBananaStand That's strange. It should be listening on localhost:27042, which the host-side Fruity backend should be able to reach (it talks to usbmuxd). Which OS are you running on your host?\n. @TheBananaStand Note that launching apps will not work if you run frida-server standalone. You need to run it through launchd with the proper configuration for that to work. (So I would recommend installing the .deb from Cydia and rather just tweak the .plist to add the -l switch if you need it to listen on other interfaces.)\n. Should be fixed in latest Frida 9.x.. @rotlogix Thanks for reporting! Fix should be coming soon.\n. Linked warning turned out to be harmless. We'll ignore it for now.. \ud83d\udcaa\n. \u2764\ufe0f\n. Hi,\nIt sounds like our SELinux rules are not sufficient for your device. When frida-server is started (as root) it will read the running kernel's SELinux policy, inject our rules, and then update the running kernel's SELinux policy. This may however not be enough for all devices, as some vendors may add additional restrictions.\nCould you check with adb logcat if any \u201cdeny\u201d-messages are logged when this happens?\nCheers!\n. Should be fixed in latest Frida 9.x.. Hi,\nCould you try this with the latest version of Frida and confirm whether it works better? The latest version is 8.1.12 and was released last night.\nCheers!\n. Should be fixed in latest Frida 9.x.. Please file Java issues in frida-java. Cheers!. Should be fixed in latest Frida 9.x.. Let's continue this discussion at: frida/frida-java#2.. Thanks! Confirmed fixed in Frida 8.2.5.. Should be fixed in latest Frida 9.x.. @alliejk Make sure iTunes is installed.. Thanks!. Awesome!. \ud83d\udca5. Hi,\nThose warnings should be harmless. Did you try connecting to it?\nCheers!. Hi,\nWe don't yet handle this -- but we plan to. PRs appreciated. :-)\nCheers!. Hi,\nThese should be fixed now. I will leave this issue open and close it once the continuous integration has been fixed so it won't happen again in the future.\nCheers!. Please grab binaries from: https://github.com/frida/frida/releases. Hi,\nDid you also upgrade the host side to 8.x? It's important that both client and server are on the same major version (ideally they should both be running the same and latest version).\nCheers!. Should be fixed in latest Frida 9.x.. Thanks for reporting! Please reopen if this is not fixed in 8.2.5.. Thanks for reporting! Let's keep tracking this at frida/frida-gum#186.. Please file Java issues in frida-java. Cheers!. CFTypeRef is just a pointer to a CoreFoundation object, and the toll-free bridging to Objective-C means you can pass e.g. an NSDictionary where a CFDictionary is expected (like you're doing). However, the second argument here is a pointer to such a pointer, so you need to do this:\nvar resultPtr = Memory.alloc(Process.pointerSize);\nMemory.writePointer(resultPtr, NULL);\nSecItemCopyMatching(query, resultPtr);\nvar result = new ObjC.Object(Memory.readPointer(resultPtr));\nCheers!. @rotlogix Thanks for reporting this, and sorry for the pain \ud83d\ude2c This was caused by our default JavaScript runtime changing from V8 to Duktape, and frida-java using ES6 syntax in runtime-generated JS code; plus one collision with a built-in property name which V8 is more relaxed about.\nI plan on getting frida-java's test suite hooked up to our continuous integration so regressions like this one won't happen in the future.\nAs a side-note, your use-case might benefit from a JIT, as there's quite a bit of JS code running when frida-java is used, so to use the V8 runtime do:\npy\nsession.enable_jit()\nbefore the first script is created. (Similarly when running Frida's CLI tools pass --enable-jit.). @rotlogix Frida 9.0.3 binaries are in the oven. frida-server for Android just finished and have been uploaded here:\nhttps://github.com/frida/frida/releases. Is this still an issue in Frida 9.0.8?. Please reopen in frida-core if this is still an issue in the latest Frida 9.x.. Note that a bug with this exact symptom has just been fixed in frida/frida-core@306e288 -- currently being released in Frida 12.0.8.. Hi,\nAre you sure the function call(s) don't happen exclusively early in the app launch process? (So your instrumentation is added too late.)\nCheers!. Please reopen in frida-gum if this is still an issue in latest Frida 9.x.. Thanks! Let's keep tracking this at frida/frida-gum#187.. Please try again now, 9.0.13 should be a complete release (were going through some hiccups during a release a few hours ago).. Duplicate of frida/frida-core#99.. \ud83d\udc4d. Known issue, we're not yet compatible with Xposed. Let's keep tracking this in frida/frida-java#10.. This is by design, Interceptor knows nothing of the function you're hooking. (And this kind of metadata is not available at runtime unless you have debug symbols.) The args object just behaves like a virtual array with an infinite number of elements, and if you read arguments out of bounds you will be reading garbage.\nIt doesn't actually make any assumptions that you're asking it to hook a function, or that the function follows the platform's standard calling convention \u2013 you can specify a callback instead of the { onEnter... } object, and it will allow you to add a probe in the middle of a function (on an arbitrary instruction boundary).\nThis is intentional as requiring Interceptor to know the exact signature means it will be very hard to use it for reverse-engineering. Currently you can enumerate all the exported functions of a library, say, and hook all of them, without knowing anything about each function's number of arguments or their types, the return type, etc. But if you do know this you can use Interceptor.replace() and give it a NativeCallback with the exact signature as the replacement, in which case you can use arguments.length to know how many arguments are there. (But you already knew that as you had to create the NativeCallback in the first place.). Yes this is supposed to work, but this is a known issue. Unfortunately I don't think I'll get around to investigating this anytime soon, so if you're interested in digging into it I'd be happy to assist. /cc @riverar. Let's keep tracking this at frida/frida-core#107.. Thanks!\nIt's not crashing in frida_loader_run() \u2013 that's only used on Android. The crash is here:\nhttps://github.com/frida/frida-core/blob/2847a78e0a654ac8dc53a1cd9edc430194ba0979/src/linux/frida-helper-glue.c#L759-L764\n(Background: https://www.frida.re/docs/presentations/osdc-2015-the-engineering-behind-the-reverse-engineering.pdf)\nIt crashing there means that the __libc_dlopen_mode() call directly preceding it returned NULL, and because we don't check the return value we go ahead and crash in the __libc_dlsym() call. So this means either:\n- Target process does not have filesystem access to read the frida-agent-{32,64}.so\n- Dynamic linker is not able to resolve all symbols\nI strongly suspect it's the latter. Could you try building a tiny program that just does dlopen() of the same .so to see how that goes?. Sounds like we'd have to build Frida with an older toolchain to fix this.. Let's keep tracking this at frida/frida-core#108.. Hi,\nIs frida-server running as root? And what kind of Android system is it running on?\nCheers!. Ahh right. I bet the target application ptrace()s itself so a debugger can't. You'll have to spawn() it with Frida and hook ptrace() to ignore the application's attempts to do so. (You will have to reverse-engineer some of the app to figure out exactly what this entails.). Let's track this at frida/frida-objc#1.. Thanks! Wonder if thiscall implies that the first argument is a given, so nargs here is off by one:\nhttps://github.com/frida/frida-gum/blob/c71ebd807f48433de0ae312fe93f83ba8ad3d4ad/bindings/gumjs/gumdukcore.c#L2882\nI won't have bandwidth to look at this anytime soon, but I'm happy to assist in case you are willing to take a stab at it. Only build dependencies are MSVS2015, latest Node.js on your PATH, and Python.. No worries. Let's keep tracking this at frida/frida-gum#191.. I'm afraid we don't keep symbols around for releases due to lack of storage. Would you be willing to build frida-gadget.so yourself with FRIDA_STRIP=no in config.mk?. Let's keep tracking this at frida/frida-core#106.. Awesome! The easiest is probably grabbing the frida-core devkit from https://github.com/frida/frida/releases, that way the binding is decoupled from Frida's build system. (Our Swift bindings do it this way.) Just let me know if you run into any issues. Cheers!. What do you mean by breakpoints?. Looks like you have an existing zombie frida-server already running. Kill it and retry, hopefully that'll do it. (Those linker warnings can be ignored.). Thanks for testing! Java.enumerateLoadedClasses() is supposed to throw an error if it's called outside Java.perform() (but doesn't currently) \u2013 so I'd definitely recommend changing your code to do that instead. (Your example works but isn't how the API should be used.)\nCheers!. Hi, did you install the \u201cFrida for 32-bit devices\u201d package?. Yep, thanks @max01203!. @fr0zenrain No worries. Thanks for confirming!. Thanks! Which version of Frida is this?. @frozen-void I haven't been able to reproduce this on my Linux systems. Haven't found the time to try other systems in a VM, but I hope to get to it someday. Help appreciated.. Hi,\n\nIs this kind of hooking massive functions not practical?\n\nNot for now, unless you would like to hack on Frida and help us optimize this kind of scenarios. We currently have transactions under the hood, so all Interceptor.attach() calls within a single stretch of JavaScript are automatically wrapped in a transaction. This makes it possible to do clever things. For now we only batch memory allocations and page updates, but the sky's the limit there.\nWhile Stalker has been ported to arm64, it's only been tested on Android for now, and would need some work to support iOS. Mainly because it relies on RWX pages, which aren't as widely available on iOS.\nBy the way, this kind of pointer arithmetic is dangerous in 64-bit processes:\nvar sub_addr = subs[i] + baseAddr;\nInstead use:\nvar sub_addr = baseAddr.add(subs[i]);\n(Always keep pointers as NativePointer values.)\nCheers!. Moved to frida/frida-core#114.. Thanks! Could you try with 9.1.16? I think we have a regression (to be fixed in 9.1.19, hopefully coming later today).. Does not seem like a bug.. Yes, you can do: Interceptor.attach(Module.findBaseAddress('libfoo.so').add(0x1234), ...\nJust keep in mind that the address needs to have its least significant bit set to 1 for Thumb functions.. Good point! I think we can live with that trade-off for now, so let's get this merged.. Hi,\nThis will attach() on the local system:\npython\nsession = frida.attach(package_name)\ninstead do:\npython\ndevice = frida.get_usb_device()\nsession = device.attach(package_name)\nCheers!. Hi,\nIf you use -U it will pick the first USB/tethered device, which means either an iDevice or any device reported by adb. In that case it will wait for such a device to arrive if none is currently connected. If there is more than one device it will pick the first, which may not be the device you want.\nWhen using -D <id>, however, it will not wait, so if your device as seen by adb is connected over WiFi, we may not wait long enough for it to arrive, and that's why this appears to be unstable.\nThe best solution here would be to improve our adb integration so we wait until we're sure we finished enumerating devices. Another option is that we improve the ConsoleApplication base-class in frida-python so it also waits for the specified device to appear even in the case of -D.\nCheers!. Those should already be available.. Thanks for reporting. This is unfortunately an unsupported configuration (for now).. Hi,\nWhen working with floating point arguments, structs passed by value, etc. you have to use Interceptor.replace() and NativeCallback to have such arguments properly marshalled for you. There is currently no way to achieve this with a listener (Interceptor.attach()), as it does not know anything about the function's actual signature (by design).\nCheers!. https://github.com/frida/frida-python/blob/master/src/_frida.c. Script(line 6): SyntaxError: parse error\nWould recommend putting your JavaScript code in a separate file and using an editor with code completion, e.g. vscode.. Hi, you can use .overload('int') vs .overload('java.lang.String'). Cheers!. Which repo are you referring to?. Thanks!. Here's a working implementation:\n```js\nvar NSAutoreleasePool = ObjC.classes.NSAutoreleasePool;\nvar NSString = ObjC.classes.NSString;\nvar pool = NSAutoreleasePool.alloc().init();\ntry {\n  var text = ObjC.classes.NSString.stringWithString_(\"Hello World\");\n  var NSLog = new NativeFunction(Module.findExportByName('Foundation', 'NSLog'), 'void', ['pointer', '...']);\n  NSLog(NSString.stringWithString_('Hello World'));\n} finally {\n  pool.release();\n}\n```\nSome notes on your code:\n- No need to call ptr(), Module.findExportByName() returns a NativePointer (or null if not found).\n- Never interact with Objective-C APIs without an autorelease-pool. You can either ObjC.schedule(ObjC.mainQueue, function () { ... }) to get this for free, or you'll have to do it like in my example.\n- NSLog() is varargs, so you need to tell NativeFunction that it is a varargs function by having a '...' marker. If you actually need to pass it more than one argument you will have to create multiple NativeFunction objects for each signature. E.g. new NativeFunction(Module.findExportByName('Foundation', 'NSLog'), 'void', ['pointer', '...', 'int', 'pointer']) if your format string contains a %d followed by a %s.. You need to use the class, not the instance, as this is a static field. I.e. class4.array.value. No, but you can emulate that behavior yourself:\nhttps://gist.github.com/oleavr/8cc48967a1c836d4026cceef3949ef27. Hi,\nHave a look at frida-java; you'll have to do something similar where you get hold of the env pointer and read its vtable. From there you can just Interceptor.attach() as you please.\nCheers!. Which version of macOS is this on?. js\nwhile(!Java.available) {\nThis doesn't make sense and explains why it's hanging. If you inject Frida before the Java VM has been loaded you should instead hook a function called early, and retry the Java.available check in your hook.. Thanks for reporting! This is indeed a bug in frida-java. The array conversion code does not take signed-ness into account. It also mistakenly turns arrays into plain JS arrays, so calling a method that modifies an array means you won't get the modified data.. (Oops sorry about the late reply!) We should definitely return an object instead, and handle signed va unsigned. Array-support is a half-baked feature as it stands. Interested in taking a stab at fixing this? :). I'm afraid NOX is unsupported. Please use a stock emulator or real device, or help us fix this. It's not a priority for me personally so unless somebody helps out, NOX support will not happen. :-/. Hi,\nWhich version of Frida is this on? There used to be a bug where only the first assignment would happen, but that was fixed a long time ago. By the way, instead of:\nif (args[1] == 1200)\ndo:\nif (args[1].equals(1200))\n(And when you want to compare directly, always use === and !==.)\nCheers! . js\nvar buffer = Java.array('byte', [ 13, 37, 42 ]);. Hi,\nThis is not a good idea:\njs\nerror_to_inspect = args[3];\nBecause another thread might call the same function concurrently and overwrite the value. Instead, assign it to a property on this, which is a per-thread and per-invocation object, so it even works for recursive functions.\nNow, in your onLeave you actually want to de-reference the pointer, so do:\nvar errorHandle = Memory.readPointer(this.error);\nif (!errorHandle.isNull()) {\n  var error = new ObjC.Object(errorHandle);\n  console.log('error: ' + error);\n}\nCheers!. Hi,\nEmulators that run JNI components with qemu-user are not supported. (Contributions welcome, but this is a low-priority issue for me personally so I doubt it will happen anytime soon.)\nCheers!. This means your phone or desktop are running different major releases of Frida. (One of them is outdated.). Try: sudo easy_install -U frida. Upgrade to the latest on your phone as well.. You can also switch to the V8 runtime by passing --enable-jit (or calling session.enable_jit()), which supports the latest and greatest syntax. For non-trivial agents I would recommend using frida-compile as it will allow you to use the latest syntax, and also make it possible to compose your agent from multiple files through require(), and give you access to thousands of existing modules from npm. (Including the ones that are Frida-specific.). Fixed in 10.6.12. Cheers!. @Yeradon Did you also upgrade the device side?. @waqarrashid33 Yeah the dlopen() hack hasn't been ported to x86 yet.. You need to specify which OS/arch to build for:\nmake -f Makefile.sdk.mk FRIDA_HOST=linux-arm\n(It defaults to your local system otherwise.)\nAlso, you need Node.js (recent version like 8.x) installed \u2013 make sure node and npm are on your PATH.. Glad to hear! The npm issue is because our auto-detection fails and doesn't do any error-checking. Sounds like which node doesn't result in a match on your system. Do you have the latest Node.js 8.x installed?. @coderiderlin Android systems with qemu-user (e.g. native x86 emulating arm code) are not currently supported. Supporting them is not something I need personally or at work, so I'm hoping that someone will eventually step up and contribute support for it.. Please file this in frida-java. Cheers!. \ud83e\udd18. Fixed in 10.6.12. Cheers!. @Sankalp-bst I'm afraid I won't have time to look into this anytime soon. Help appreciated!. Use this syntax: ObjC.classes['MyApp.JailbreakViewController']. Also, to list classes it is easier to do Object.keys(ObjC.classes).forEach(function (className) { ... });.. Hi,\nThis must have been a build machine hiccup. Should be resolved now.\nThanks for reporting!. I\u2019ve encountered this as well, and resolved it by making sure Xcode\u2019s command-line tools were properly installed. Could you check if that also resolves it for you?. Glad to hear! I suspect this happens after an Xcode upgrade, where somehow things go slightly out of sync.. This is because we parse /proc/self/maps and check if each executable range starts with an ELF header. The reason we do this is so we can run on systems that lack dl_iterate_phdr()... But what we should be doing is try to find dl_iterate_phdr() (through dlsym()) and use that if available.. Our current implementation is here in case any of you are interested in improving it.\nCheers!. FreeBSD is not (yet) supported. Help appreciated!. Use this syntax when the name contains underscores: app['- _workspace']. Fixed in 10.6.12. Cheers!. Fixed in frida/frida-gum@761aef463ee8b6a9cb7d932f59599e2401a0e808. Release coming soon.\nThanks a lot for your help! \u2764\ufe0f. Fix released in 10.6.2, out now. Cheers!. Either use a 64-bit Python, or, ideally, open a pull-request moving the spawn() implementation to the helper processes.. Great catch! This is indeed a bug.. Fixed in 10.6.12. Cheers!. Did you wrap your Java API calls in a Java.perform()? Seem to recall forgetting it results in symptoms like what you\u2019re seeing.. Systems like Genymotion, that emulate ARM binaries through qemu-user, are not supported. (PRs welcome though!). I know, that's why I said \"Systems like Genymotion\". It should work on apps with x86 native libraries though, so it appears we pick the wrong libc in those \u2013 separate issue for that in frida-core would be great. Thanks!. Your submodules are out of date. Run git submodule update, or, if you're hacking on Frida it's better to do: git submodule foreach 'git checkout master && git pull'. Ah, I think the issue here is that the system caches the code-signing state based on the inode, so if you overwrite the file with a new one it will no longer match, and result in the error you were seeing. The solution is to rm (unlink) the old one before copying the new one in.. > Frida doesn't support spawning on iOS 11 now.\nThe issue is that some (all?) of the new iOS 11 jailbreaks interfere with how apps are launched, which is also something Frida has been doing all along by injecting code into launchd and xpcproxy. Previous jailbreaks also tampered with the app launching logic, but quite differently from the current ones. So now we have the jailbreak and Frida stepping on each others' toes during their early instrumentation.\n(I didn't investigate this myself yet, kudos to @mrmacete for digging into this. Investigation isn't yet complete, though, so these are just some early observations.). @masbog Yeah if you don't type %resume fast enough the system will time out the launch and kill the process. Changing that behavior isn't something we can do without bumping the major version \u2013 it would be a breaking change. Instead I would suggest contributing an improvement to Frida that disables the timeout by hooking SpringBoard... :). @bensh Please make sure you\u2019re running the latest version of Frida before sharing your results \u2014 otherwise you might be reporting issues that have already been fixed.. @Disane Could you try with Frida 10.6.43? Lots of Android improvements happened in the latest releases.. Collisions like this currently results in the field name being prefixed with an underscore, e.g. _a.\nCheers!. This should be fixed as of 10.6.40. Cheers!. See the Interceptor.attach() docs \u2013 basically in onEnter:\njs\nthis.data = args[1];\nthis.dataLength = args[2];\nThen in onLeave:\njs\nvar data = Memory.readByteArray(this.data, this.dataLength);\nsend({ type: 'data-for-you' }, data);\nThough if you're writing a non-trivial agent you should be using frida-compile, in which case you might want to check out frida-trace for a more declarative approach.\nCheers!. Oops, I didn't actually test that code. Here's my mistake:\nthis.dataLength = args[2];\nshould have been:\nthis.dataLength = args[2].toInt32();\nAs the second argument to Memory.readByteArray() should be a number, and not a NativePointer.. This should be fixed as of 10.6.40. Cheers!. This should finally be working well now in 10.6.40. Cheers!. Should be working in 10.6.40. Known to work well on Nexus 5X running 8.1.0. Cheers!. Not App Player and other mixed-mode emulators that only support ARM native code are not supported.. Should be fixed in the latest version (10.6.40).. Afraid this won't ever be fixed unless somebody volunteers their time to investigate it. (I don't have any 32-bit devices to test on.). Fixed in 10.6.40.. This is because the wrong frida-server was deployed to the device. Make sure you're deploying the arm64 version (or x86_64, depending on the architecture) if the device is a 64-bit device.. Please try with 10.6.40 \u2013 should work much better on both iOS and Android.. Yes if it's a plain emulator and not an x86 emulator with ARM emulation inside \u2013 so avoid Nox App Player and emulators like that. (Plain x86 works, and of course arm and arm64. But a real device is recommended if available: Nexus 5X running 8.1.0 is known to work well.). Good catch! Moving this to frida-java.. Java.perform() is potentially asynchronous, i.e. early in the process lifetime when the app's class loader isn't yet available. However, if you need to return a result for example through rpc, you can do:\njs\nrpc.exports.foo = function () {\n  return new Promise(function (resolve, reject) {\n    Java.perform(function () {\n      try {\n        var result = ...\n        resolve(result);\n      } catch (e) {\n        reject(e);\n      }\n    });\n  });\n};. Use frida-compile, or switch to V8 through \u2014enable-jit. You can also call __android_log_write() through NativeFunction.. Closing due to inactivity.. Yes, but you have to use the mangled name. Use Module.enumerateExports() to list available exports.. Should be fixed in 10.6.40.. Mixed-architecture emulators are not supported. Please use a plain emulator or a real device. (Or contribute support for this.). Seems like you answered your own question \u2013 case closed. :). Please try with 10.6.40. Known to work well on Nexus 5X running 8.1.0. Cheers!. Assuming this is fixed in latest git. (Recently rebuilt the SDKs just fine.). Manage['- _userString:data:'].call(Manage, userString, data). It should work if iTunes is installed. Otherwise you won't have usbmuxd running.. The issue is that create_script() expects either a unicode value, or a str value that's valid UTF-8. One common way to do this is:\n```py\nimport codecs\nwith codecs.open(\"agent.js\", \"r\", \"utf-8\") as f:\n    source = f.read()\nscript = session.create_script(source)\n```. @madushan1000 There isn't any logging in Frida's code \u2013 I believe that logging (as a debugging mechanism, not for auditing) is an anti-pattern as there's always going to be a value one forgot to include in the logging or a function that doesn't log, or a bug in a format string that only applies to a particular log level, etc., and it slows things down and makes the code harder to read and maintain.\nThe easiest way to debug it is to build it yourself (Frida is easy to build), either using a debugger with breakpoints or adding temporary logging.. Considering that this was working on 7.1.1, I'm guessing that this is a missing SELinux rule in Frida's logic that patches the running kernel's policy:\nhttps://github.com/frida/frida-core/blob/616a03d470afe24487af8a7c79f8f99643cb732f/lib/selinux/src/patch.c#L46-L54\nDid you check logcat for audit errors? The ones with permissive=1 are harmless, but hopefully you'll see some without that happened at the time you attach()ed.. Cool! Yeah, just grab NDK r15c (version is important) and build frida-server. It's worth noting that Frida's shared library injector on Linux relies on ptrace briefly during the injection, so having a debugger attached to the target process is going to make it fail. (Long-term we'll hopefully have an optional kernel driver that avoids this problem. We don't have this issue on the other OSes though \u2013 well, except QNX.) So adding a few temporary log statements at strategic points is often easier than getting remote debugging set up and not interfering.. @madushan1000 Yes, look in Makefile.mac.mk or Makefile.linux.mk for the server-android target's dependencies (to the right of the :) and run make <one of them>, e.g.:\nsh\n$ make build/frida-android-arm64/lib/pkgconfig/frida-core-1.0.pc. As for the install-macos target, that seems to be broken. (PR welcome \u2013 I haven't used this target much myself but plan on adding proper install targets at some point.). @madushan1000 Thanks for digging into this!\nThe Linux injector is explained in this talk:\nhttps://www.youtube.com/watch?v=uc1mbN9EJKQ\nBut if you can verify that this function is reached:\nhttps://github.com/frida/frida-core/blob/616a03d470afe24487af8a7c79f8f99643cb732f/lib/agent/agent-glue.c#L8\nThen the injector is fine, and the issue must be in the transport:\nhttps://github.com/frida/frida-core/blob/616a03d470afe24487af8a7c79f8f99643cb732f/lib/pipe/pipe-posix.c\nCheers!. @madushan1000 Yay, nice catch! Yes this does indeed seem to be the issue! Should be easy to fix.. I've fixed this and another issue in frida-core master. Next up is this issue:\nE linker  : library \"/data/local/tmp/re.frida.server/frida-agent-32.so\"\n(\"/data/local/tmp/re.frida.server/frida-agent-32.so\")\nneeded or dlopened by \"(unknown)\" is not accessible for the namespace:\n[\n  name=\"(anonymous)\",\n  ld_library_paths=\"\",\n  default_library_paths=\"/data/app/com.android.chrome-2ElVtdOuGVdDMuA0sQzqIQ==/lib/arm:/data/app/com.android.chrome-2ElVtdOuGVdDMuA0sQzqIQ==/base.apk!/lib/armeabi-v7a\",\n  permitted_paths=\"\"\n]\n  . The next challenge is caused by a change starting with Android N, where the dynamic linker is now preventing apps from using private system libraries. To work around it we can either:\n- Copy frida-agent-32/64.so into one of the app's own library directories. This is quite intrusive and not a nice solution.\n- Make a copy of the .so in tmpfs by using memfd_create(), and loading that. This won't work on Android N, as this exception was added later.\n- Call android_dlopen_ext() and provide a namespace. Seems tedious.\n- Realizing that dlopen() is actually just a thin wrapper that tries to get the return address to identify the caller, e.g. on 32-bit ARM:\nasm\npush {r7, lr}\nmov r2, lr\nbl #0xee55874d\npop {r7, pc}\n(Meaning it calls an internal function that takes one additional argument: address of the caller.)\nWe can disassemble it at runtime to determine the inner function's address (0xee55874d in this example), and call that directly. By picking an address inside libc.so and passing that as the third argument we can pretend that libc.so is the one loading the library, so it looks like a system library is loading another system library, and we're good.\nI think I will try to implement the last solution. It's a bit painful to need the architecture-specific bits, but it's trivial to parse this function so it's probably the least painful solution.\n. Let's try this.\nReleasing Frida 10.6.30 right now with these improvements. Tested successfully on a Nexus 5X running Android 8.1.0, on both 32- and 64-bit targets.\n  . @madushan1000\n\nLooks like It's working fine for some small targets\n\nPlease don't use frida-trace -i open as the test-case \u2013 there's a known bug on Android where hooking open is problematic, and something we need to look into separately. Using the REPL with --no-pause should be a better test-case.. @madushan1000\n\nFound this in the logcat. It looks like this only happens with 32bit processes\n\nCould you disassemble you 32-bit libart.so's dlopen implementation and paste it here? I suspect we're a bit too strict when trying to parse it here.\n  . @madushan1000 Oops, sorry, I misspoke. I meant to say libdl.so, not libart.so. Could you try disassembling that? It should be a tiny function that calls another function with the same arguments plus one extra (that it gets from LR).. @madushan1000 Thanks! Could you try changing this line:\nC\n      insn[2].id == ARM_INS_BL &&\nto:\nC\n      (insn[2].id == ARM_INS_BL || insn[2].id == ARM_INS_BLX) &&\nAnd after the assignment here:\nC\n    impl = GSIZE_TO_POINTER (insn[2].detail->arm.operands[0].imm);\nadd another statement that sets the LSB in case of BLX:\nC\n    impl = GSIZE_TO_POINTER (insn[2].detail->arm.operands[0].imm);\n    if (insn[2].id == ARM_INS_BLX)\n      impl = GSIZE_TO_POINTER (GPOINTER_TO_SIZE (impl) | 1);. @madushan1000 Looks like it's crashing inside libdl.so, so we probably got the address of the inner dlopen() function wrong. Could you try the changes without the second statement that does | 1?. I don't have the bandwidth to debug this. Help appreciated!. The issue is that the actual arguments start at index 2.. (Index 0 is self and index 1 is sel, so the actual arguments \u2013 if any \u2013 start at index 2.). Use ObjC.choose(), see docs here.. Use 'pointer' instead of 'SBAlertItem'. If it crashes it means your replacement either has the wrong signature or doesn't behave as the caller expects, e.g. forgets to return a value.. Nox App Player is not supported. It expects native code to be ARM code (that it emulates), which means frida-java's method hooking isn't compatible with it.. Should be fixed in 10.6.40. Cheers!. @henrymark92 x86 emulators that only run ARM code (like Nox App Player, and presumably also Bluestack) are not supported.\n@3xp10it Please reopen if still reproducible on 10.6.40 and you are willing to help me debug it on your device. (There's no way I can reproduce it otherwise.). Interceptor doesn't know anything about Objective-C, so you will have to do new ObjC.Object(retval) to access the return value as an Objective-C object. Likewise when replacing it you have to assign an Objective-C object there (same way).. No need to create an NSString there, instead try: return result.toString();. Cheers!. You can use frida-gadget, or contribute an optional kernel driver for Linux that allows us to inject frida-agent without relying on ptrace \u2013 as using it means only one debugger process at a time can be attached. (This is Linux-specific, and we only attach briefly while doing the injection, then immediately detach.) We currently have such a driver for macOS, and long-term I hope others will contribute similar drivers for other OSes.. js\nvar permission = Java.use('android.Manifest$permission');\nthen:\njs\npermission.ACCESS_FINE_LOCATION.value. Please file an issue in frida-java if this is also reproducible on Android 8.1. (I do most of my testing these days on a Nexus 5X running 8.1.0.). Cannot reproduce this. Please reopen if you are able to provide a simple way to reproduce it. Cheers!. If this is still reproducible in 10.6.40 this must be a ROM-specific issue. One such known issue is on Samsung kernels where processes in /data/local/tmp (and maybe other locations) aren't able to spawn child processes. This is why we have a client that talks to SuperSU to ask it to spawn frida-helper-{32,64}, but obviously this won't work on devices with Magisk or another kind of rooting solution. PRs welcome!. Xcode issue, try xcode-select --install.. Hi,\nIf you want a persistent on-device solution take a look at Gadget's script mode.\nThe File API doesn't support reading just yet (PR welcome), but for non-trivial agents it's a better idea to use frida-compile anyway and use the frida-fs module.\nCheers!. Thanks for reporting. This is most likely a compatibility issue with the jailbreak being used.\n@Daemonceltics Spawn is supported. If it doesn't work it's a bug that should be reported.. @veehaitch My guess would be that our hook inside launchd isn't hit due to how the jailbreak is set up. Would you be interested in digging into this? I'm afraid I don't have any 10.3 device to reproduce this on, so we'll need your help to get this fixed.. @Daemonceltics Your issue is on Android, this is on iOS.\nI'll close this issue as I won't be able to reproduce it, and I will need someone to volunteer their time to debug it on such a device.. Is this still reproducible in 10.6.40? If so, would you be interested in building it yourself with symbols? (By removing --strip from here).. The issue must be elsewhere, as this test passes with the current code.. Fixed in 10.6.40. Avoid emulators that are hardwired to execute ARM code though, like Nox App Player, those probably won't ever be supported. (If you need to be able to hook Java methods.). Frida 10.6.40 is compatible with 4.x, 5.x, 6.x, 7.x, and 8.x. Avoid emulators that are hardwired to execute ARM code though, like Nox App Player, those probably won't ever be supported. (If you need to be able to hook Java methods.). Either use Genymotion or one of the stock ones from Google, or use a real device. (But I haven't really tried any beyond that: others may still work.). Hi,\nYou're probably missing the package containing usbmuxd. If you're able to successfully run ideviceinfo then Frida should also work.\nCheers!. - Move Java.use() calls outside hooks, right inside Java.perform().\n- You want this.b.value to read the value of the field named b.\nCheers!. Fixed in latest versions.. Hi,\nI'm not able to reproduce this on my Nexus 5X running Android 8.1.0. If you're interested in trying frida-java's test-suite on your device, that would be most appreciated.\nNote that if you had a previous version of Frida running and did spawn() at some point, and you install a new version -- or just restart frida-server, this is likely to crash Zygote on the next spawn(). The reason is that the old version injected a library, frida-loader-{32, 64}.so, and hooked some APIs but remains stuck there, so when the new version does the same, things blow up. Fixing this is on my TODO. Did you check if this crash also occurs after a device reboot and fresh start of frida-server?\nCheers!. Thanks! So the reason it hangs there is probably the same as why it's crashing in the real app. Which exact Nexus firmware do you have? (I might find some time this weekend to reflash mine to use the exact same image and try it.). Fixed in Frida 10.6.55.. Agreed! We could read the first bytes of the file to look for Duktape's magic, and do the right thing.. Released in 10.6.53. Thanks!. Hey,\nPlease reopen if this is also an issue on Frida 10.6.52 (10.6.27 and 10.6.32 are quite outdated).\nCheers!. No worries! pip install -U frida or easy_install -U frida depending on how you installed it. For the Android side grab the latest frida-server from our releases.. Hey @krytarowski,\nThe issue is that Frida does not yet support NetBSD. We would love to support it, though, so PRs are most welcome! You can find some pointers on porting Frida to new platforms at: https://www.frida.re/docs/hacking/. @krytarowski Awesome! Yeah it's fine to start out with most things being stubs, e.g. the foo_enumerate_bar APIs could just be implemented as empty functions that don't call the callback, effectively returning zero results.. (Sorry for the delay here, I was knocked out by a little food-poisoning incident over the last few days.)\n\nIs this file supposed to be called manually in such way? It could use libtool for portability reasons.\n\nIt should be called manually, but from inside a Frida build environment, which is generated by setup-env.sh. That script should hopefully only need one netbsd block similar to the one for linux. Once that's in place, and Makefile.sdk.mk is able to build an SDK \u2013 make -f Makefile.sdk.mk FRIDA_HOST=netbsd-x86_64 \u2013 run build-targetfunctions.sh and git commit the resulting binaries. (They're intended to not change so that Interceptor sees the exact same instruction sequences over time, i.e. the functions being instrumented don't change.)\n\nAnother question is regarding glib and libffi, it seems I need to use both from forks from frida.\n\nCorrect.\n\nAnything else custom needed?\n\nNot that I can remember \u2013 the dependencies built by Makefile.sdk.mk should be everything needed for a given platform beside compiler/toolchain/libc headers. The reason we maintain our own forks of GLib and libffi is that we need to be able to clean up statically allocated resources, as frida-agent.so may be injected into long-running processes, making it desirable to unload it at some point. (And be able to load it, or a different version, without leaking resources.). > I hope everything will be fine!\nThanks! Back on my feet today \ud83d\ude0a\n\nOK, I'm going to package them and attempt to build frida-gum.\n\nAwesome! Don't hesitate to poke me, nick: oleavr, in the fridadotre channel on Telegram or its mirror on IRC (#frida on FreeNode) whenever something's unclear.. Awesome!\nThe gum-tests binary (built by the build system) should provide pretty good coverage. But maybe a better \u201cHello World\u201d would be a function hooking example. For that grab any one of the frida-gum-devkit-* tarballs from Frida\u2019s releases and compile the example.c inside of it against your Gum \u2014 something like: $CC example.c $(pkg-config \u2014cflags \u2014libs frida-gum-1.0). > It looks I need frida-capstone too.\nThat\u2019s unfortunately correct.. > Hmm, I've been a little bit surprised that OS specific bits are larger than expected.\nIndeed. The good news is that once Gum has been ported there is only one part left needing porting: the shared library injector in frida-core. Since NetBSD supports ptrace() it might be possible to take inspiration from the Linux implementation. (It's pretty horrible though as it's doing thread hi-jacking trickery due to lack of a better API than ptrace() \u2013 our i/macOS and Windows backends are simpler in that regard due to more suitable OS APIs being available.)\n\nOnce I will build frida-gum with stubs, I will start upstreaming them in chunks.\n\nSounds great!\n\nI'm researching a room for a new self-introspecting syscall in the NetBSD kernel\n\nCool!\n\nFrida needs the same horrid magic on Linux: https://lkml.org/lkml/2006/9/1/217\n\nYep, that's how we implement Gum.Process.modify_thread(). It's horrible.\n\nAre there wanted features from the Frida point of view that could make life easier?\n\nI'm not familiar with what's currently available on NetBSD, but ideally there would be support for process A asking the kernel to perform the following operations in the context of process B:\n- Allocate pages of memory.\n- (Read/)Write (from/)to memory.\n- Change page protections.\n- Spawn a new thread, fully initialized so libc can be used.\nOn Linux we currently emulate these things by hi-jacking an existing thread with ptrace().. > I work on modernization of debugging interfaces and tools\nAwesome!!\n\nFrida is definitely a modern (and innovative) tool that we want to get aboard.\n\nCool!! Glad to hear that!\n\nIf this is a hard-requirement of getting Frida aboard\n\nThe primary use-case is Stalker, which uses it to dynamically instrument the threads of your choosing. We also piggyback on it for enumerating threads. But a lot of users won't care about either of those two things, so it's functionality that could be implemented down the road \u2013 Frida is also useful without that functionality.\n\nRegarding thread.. I expect that we don't need a pthread entity?\n\nWell pthread_self() must be functional and the thread needs to be able to spawn new pthreads. Though if pthread_create() works from an LWP we could just do that in the bootstrapper that we inject, to create a \"full thread\" and carry on from there.\nApple solved this on newer OSes by introducing an undocumented version of pthread_create() named pthread_create_from_mach_thread(), which we use when available. It is essentially a \"safer\" version of pthread_create() for use in naked Mach threads. That thread is still not able to use any other pthread APIs though, so we block in a mach_msg_receive() forever, making the thread safe to terminate. (It's horrible, but it's what Apple themselves do in Xcode's shared library injection implementation.)\nSo yeah perhaps the easiest for now is just using the same hijacking mechanism we use on Linux?\n That is assuming that it's always safe to interrupt a system call and later resume it. There's also the risk of hijacking a thread while it's inside pthread holding some lock so pthread_create() isn't safe... but I guess we can live with that, at least initially.\nThough OTOH if you have a clear idea how to add the needed kernel support nothing would be better... it just sounds like a lot of added work on top of the other porting TODOs. :-). Very cool!! Looking forward to see how it evolves!. > It looks like the only reliable way to perform anything from process B in process A.. is to rewrite .text/registers in process A using ptrace(2) from process B.\nOK!\n\nAre there plans to upstream glib2, libffi and capstone patches for Frida?\n\n\nGLib: No. Beside the bug-fixes, which are upstreamed now and then, we have some custom APIs that won't ever make it upstream. The big one here is that they don't consider it a valid use-case to be able to clean up static allocations/support unloading. Also there isn't that much value in using a system-wide GLib, as we always want to link it statically to allow users to instrument applications using the system-wide GLib. (Due to reentrancy-issues when hooking low-level GLib APIs.) Btw, I just rebased our GLib patches on top of the latest master the other day \u2013 it's living in the next branch and should soon become master.\nlibffi: I've upstreamed everything except Add API for custom memory management, which I'm quite sure that upstream won't be interested in as it's for a really specialized use-case: knowing about all of libffi's memory allocations so we can cloak them -- pretend they don't exist when the user does Process.enumerateRanges(). There's also the need to clean up static allocations here as well, which is unlikely to fly. (But might be worth a shot.)\ncapstone: Yes, but it's going to take a while. (It's way down on my list, spread a bit too thin these days.). > Is there an option to namespace these libraries\n\nNo but it would be good to namespace the files. I'm not sure I would recommend installing them on the system though \u2013 only static versions should be built, which is required for the deinit() APIs to not be no-ops.. You forgot to run Java.enumerateLoadedClasses() inside a Java.perform() callback. This is required for all Java API calls \u2013 and even if it appears to work without, it may result in undefined behavior and weird crashes.. @henrymark92 Not a priority for me personally. PRs welcome though!. The adb forward should not be done for -U \u2014 if adb can see the device and frida-ls-devices does too, you only need -U.. Gadget should always be downloaded from: https://github.com/frida/frida/releases\nAs for the crash, please file a separate issue after narrowing it down to a single function and providing disassembly of its instructions. Otherwise there's no way I can reproduce it.. Ah, oops! Care to open a PR against frida-website fixing this?. It is not well-defined which of the two libfoo.so you get in case of duplicates \u2013 the proper way to deal with this is to use the full module path everywhere. So instead of foo.so, use /path/to/foo.so. You could detect this by using Process.enumerateModulesSync() to pick the one you want, and assign that to a variable that you use when referencing it.. Ah, that is the issue then \u2013 the platform-specific backend in frida-gum should never report duplicates. If you're interested in digging deeper that would be great.. Hey,\nHappy to report that this is already supported! Have a look at the last section of this tutorial:\nhttps://www.frida.re/docs/messages/\nCheers!. @myzhan That works, but it's easier to hook it by replacing the method through the Java API.. Thanks for reporting!\nUnfortunately I am not able to reproduce this issue. Either it got infected on your system, or this is a false positive. Defender does not detect it as such on my end, though.\nPlease reopen if you find any evidence to the contrary.. I agree we need a better solution to this... ideally all repos should be tagged with the toolchain/SDK version, and the build system should be able to build the appropriate toolchain/SDK if a prebuilt tarball isn't available. I'm unfortunately spread way too thin to spend time on this, and the risk of using the wrong version (plus the ever-growing disk footprint) lead me to drop obsolete versions. Help appreciated!. This is not yet implemented in gadget, only agent \u2013 and that code hasn't been released yet as this is work-in-progress.. > Do you plan to release it in the next version (10.8) ?\nYep, but probably not in frida-gadget initially.. @0xh0b0 Yep, the entire child-gating feature was such a deep rabbit-hole that I didn't have time to port the Gadget. I doubt I will have time to do this anytime soon, as I have a long list of higher priority things to work on. The good news is that it shouldn't be a lot of work now that all the infrastructure is in place. The best place to start is reading the code here. Let me know if you have any questions and I'd be happy to help. Cheers!. Chrome OS is not currently supported, but if you're interested in taking a stab at adding support for it that would be awesome. Shouldn't be much work other than build system tweaks and perhaps a few tweaks to the Linux injector backend in frida-core.. Hey,\nYou are hooking a specific overload, then when calling the original you don't specify which to call. Instead do var ret = getMethod.call(this, param1, param2).\nCheers!. Reverse-engineer the platform's pthread library and find an internal function to hook. Ideally publish a module to npm that abstracts this, and use frida-compile to consume that.. Hey,\nNo, that would require Interceptor to know the function's calling convention and signature, e.g. for stdcall. Use Interceptor.replace() instead.\nCheers!. Use Memory.readCString() if you're uncertain about the encoding. Use Memory.readUtf8String() if you're certain it's valid UTF-8 \u2013 otherwise it will throw a JS exception, whereas Memory.readCString() will try to decode as UTF-8, where bytes that can't be interpreted as valid Unicode are replaced with the Unicode replacement character. (Frida uses g_utf8_make_valid() behind the scenes.). Stay away from memu, nox, etc., that is, emulators with an old VM, i.e. Dalvik, and emulators that are x86 but pretend to be arm, so they emulate any JNI libraries. Use stock emulator images from Google, ideally something on Android 8.x, or an image from Genymotion. As for physical devices I'd recommend getting a Nexus 5X \u2013 my primary test-device these days is a 5X running 8.1.0.. Thanks for reporting! Fixed in 11.0.1, currently being released.. Updating your macOS system to the latest, currently 10.13.4, should solve this issue. Your system's OpenSSL is too old.. No issues here on Electra 1.0.4 w/tweaks enabled. Either you have a different setup, or a tweak is causing issues.. Very doable \u2013 @s1341 did it for QNX and lived to tell the tale. :-)\nThere are some pointers here: https://frida.re/docs/hacking/. Hey @clviper,\nSorry it took a while to have a closer look at this \u2013 I'm spread a bit thin.\nReally appreciate that excellent test-case! This is indeed a regression. The problem is that getObjectType()'s isCompatible() doesn't actually fully validate whether a JS value is compatible with the given Java type. It just checks if the JS value looks like it's wrapping a Java object, no matter the type, and assumes it is compatible if so. (Ironically there's a TODO about it in the code that's been there since that code was written.)\nSo the reason this broke is that array values are now wrapped, so they can be passed from JS to Java by reference, which is important if Java code needs to modify an array, e.g. for in-place encryption, and the JS code needs to be able to inspect the mutated array afterwards. So when I made the changes to fix that issue I forgot that we had a really sloppy compatibility check in getObjectType(). This means when you do StringClass.$new(x) it's going to loop through the different overloads looking for one compatible with x. Since the first overload is the one accepting a java.lang.String and x now looks like a Java object, our getObjectType() for java.lang.String's isCompatible is going to respond true, resulting in an incompatible overload being called. This subsequently terminates the application:\nE zygote64: JNI ERROR (app bug): attempt to pass an instance of byte[] as argument 1 to java.lang.String java.lang.StringFactory.newStringFromString(java.lang.String)\nI'll take a stab at fixing that TODO now, which should fix this issue and also avoid terminating the application if the Frida user tries to call a Java method with an incompatible object value.. Fixed in https://github.com/frida/frida-java/commit/85ef3910a5d177deb7daa197b13d18181f9a6b9d -- releasing 11.0.11 right now with this fix. Thanks a lot for helping track this one down! \ud83c\udf7b\ud83d\ude4c. Iterate the method's overloads property, and hook each of them.. @minhtt159 Did you tell frida-server to listen on that interface? (By default it only listens on loopback.). Anyway, this is not a bug as I've been using this feature myself a lot. The unicode issue, however, should be filed in the frida-tools repo. And if you feel like opening a PR to fix it that would be even better! :-). Could you try again now? Might have been a temporary issue with the PyPI registry. In case the issue persists: which version of macOS is this on?. Thanks for reporting! Modules without any exports are indeed handled, but apparently not on all platforms :-) \u2014 which one is this on?. Thanks!. Fixed in https://github.com/frida/frida-gum/commit/45da27f7f146ff77f6fba491cf45cb1d64887d3a \u2013 available in Frida 11.0.10 as soon as the build workers finish chewing on it. Thanks for your help in tracking this one down!. Frida's Node.js bindings don't have any command-line tools. Those are part of the Python bindings.. Thanks, nice catch!. https://stackoverflow.com/a/42098127. Would you be interested in opening PRs for these issues? Would love to get these things fixed.. @r0ck3tAKATrashPanda They're generated by Makefile.toolchain.mk.. Have a look here at how Frida itself launches apps on Android. Btw, don't put Java.use() calls inside hooks, move those outside.. You need to wrap your timer code in a Java.perform(). Also, Date.now() is more idiomatic than doing arithmetic with Date instance that you got from new Date().. This error in logcat\nsrc/frida-core@sta/linux/linjector.c:1957:frida_agent_resource_get_path_template: code should not be reached\nmeans that assert_not_reached () was hit here. From looking at that code we can assume it failed to write out a temporary file, either frida-agent-32.so or frida-agent-64.so. So the root cause is either that:\n1) The frida-server daemon is not running as root.\n2) Our temporary directory selection logic made a bad choice due to a device-specific issue.\n3) Shell that frida-server was started from is not running in a permissive SELinux context.\nSince you're using an emulator that should rule out 2) and 3), so this is either 1) or some issue I didn't think of.. What kind of hooking are you referring to?. Right. That's a known issue \u2013 frida-java is not yet trying to do this in a concurrency-safe manner. PRs welcome!\nPS: Remove that setTimeout() call, otherwise when using this script with early instrumentation you allow the app to run its own code before your instrumentation is applied, which is probably not what you want.. After giving this some more thought I'm starting to feel like we're better off fixing Makefile.toolchain.mk so it fixes up the shebang before creating the tarball. What do you think? Sorry for the back and forth here. :-/. You can put a fixed up toolchain in build/toolchain.tar.bz2 and it will be used instead of downloading one.. Yep as soon as Makefile.toolchain.mk does the correct patching I can update the tarball on the build server.. I think the .package-stamp target looks like a good place to do it.. Is iTunes installed and running?. As of Frida 12.0 the CLI tools have been moved to frida-tools, so do: pip install frida-tools. Thanks! Currently publishing Frida 12.0.2, which should hopefully make it all the way through the release script.. Fixed in 12.0.3. Cheers!. Ah thanks, good point \u2013 I've been meaning to remove the stale binaries there. The GitHub releases page should be used these days. (Our current release frequency means there's no need for snapshot binaries.). Totally agree. PR welcome!. Like this: this.context.r0. Memory.readByteArray(this.context.r0, 16) to read the first 16 bytes, assuming r0 is a valid pointer. You can also do console.log(hexdump(this.context.r0.add(0x42), { length: 32, ansi: true })) to hexdump the first 32 bytes of memory at r0 plus 0x42.. Check out the Memory docs for the full story.. The reason is that binding.gyp and the C++ source code are not part of the module in npm. This is by design, as it's not possible to compile this code without also having frida-core already built. So the issue here is that prebuild fails to download a prebuilt binding for your system. Firewall issue perhaps?. Thanks!. @manish199014 This is a Python configuration issue. The certificate store used by Python 3 on your system is probably empty and needs to be initialized. This is covered in the Python docs. (Check the README.)\n@minhtt159 Frida is also useful for instrumenting Windows apps... and I'm not aware of any issues with iOS devices on Windows, so that sounds like a hardware/driver issue on your end.. This issue belongs in frida-java, please move it there. Also there should be a panic message right above what you pasted from logcat, so would be great to include that. Lastly, if you could run the frida-java test-suite on your device that would be great!. Yeah for now you'll have to build it yourself.. The issue is that Makefile.sdk.mk picks the latest master of each repo, i.e. does not pin to certain commits. I'm currently working on finishing the dependency-upgrades branch, which is able to build the latest SDK, at least on macOS. That won't help you much though, as I'm still working on porting Frida to the new APIs. So as a workaround in the meantime you could try hacking Makefile.sdk.mk so it checks out the appropriate older revision of each dependency.. (Please see my comment on the other issue \u2013 with the upgraded GLib we are now using Meson instead of the autotools build system.). Probably broken by this change.. Frida does actually have a CI set up, though not yet exposed, and it's been flashing red for weeks now. This is intentional as I've been working on upgrading all of Frida's dependencies, including moving to building everything with Meson (where available). First two targets that came back to life were macos-x86_64 and ios-arm64. Earlier this week I moved to Windows, where I've replaced how dependencies are built, using Meson there as well. Once that's done I will move back to Linux. I'm hoping to have all platforms back up in the next few days.\nFeel free to hit me up on our Telegram channel if any of you want to pitch in smoothing out the rough edges on the other platforms before I eventually get to them.. @mvastola Good idea! I'll keep you posted.. Done with Windows. Spent the last couple of hours struggling with getting the toolchain built on Linux. Currently trying to figure out why Meson puts -l flags in the wrong order when building the Vala compiler.. Linux x86 and x86_64 are now back. Aiming to finish the remaining platforms tomorrow: macOS, iOS, and Android.. 1) This is because the example was using arrow-functions, a language feature not supported by Frida's Duktape runtime. (Requiring using frida-compile to compile it to ES5 first.) Historically our V8 runtime was the default, and that's why this example was written using modern syntax. I've just ported it to ES5 to avoid confusing others. Glad you noticed this \u2013 thank you!\n2) One of the API changes in Frida 12 broke this example. I've just updated it \u2013 thanks for reporting this!\n3) Might be fixed in master. Please open a separate issue if this is not the case.. This is possible by using the child gating API. Example here.. Use spawn gating for that. (See other example.). Yes. The build system has been undergoing maintenance as part of upgrading all of Frida's dependencies. This is now finally done, so please grab a fresh git clone and build away. :-). One of your submodules must be out of date.. Which version of Node.js do you have on your PATH?. Ah! Thanks. Let\u2019s bump it \u2013 the current one of just one page isn\u2019t much.. Oops just noticed this PR should have been on frida-core. Let me merge your commit manually there.. The latest binaries were built for Python 3.7. Did you try upgrading to 3.7?. You're probably running that code inside a 32-bit process, i.e. Process.arch === 'arm', or  Process.pointerSize === 4, so you'll have to use ArmWriter or ThumbWriter.. Does it actually fail? We should get that fixed, but at least on our CI's Android build machine those errors still result in a devkit being generated.. This is a Python installation issue. Please read:\nhttps://stackoverflow.com/a/42107877. Hey,\nThat's possible; have a look at:\nhttps://github.com/frida/frida-core/pull/156\nCheers!. Our current Windows binaries require Python 3.7. You'll have to build Frida yourself if you need to use a different version of Python.. The problem is not in frida-gum, but in one of GLib's object files, which we build using Makefile.sdk.mk. I've double-checked that -fPIC actually makes it to the compiler, so this appears to be a a bug in the Android toolchain. The workaround is to add -Wl,--gc-sections when linking, which will eliminate the unused symbols and give you smaller binaries. (The problematic symbols are luckily unused.)\nI'll close this as there's already multiple issues open about this same problem.. No, you are making UIKit calls from a background thread, which is not allowed. Use ObjC.schedule(ObjC.mainQueue, function () { /* Call it here. */ }) to do it from the correct thread.. You need to give it an ID, not a process name or app name. Use frida-ps -Uai to find it.. @InfoSecPS Thanks! That log output is unfortunately from after the crash, so it's missing the interesting bits. (The flood of ServiceManager: service 'foo' died gives it away.). My primary test device is a Nexus 5X running 8.1.0, so that's currently the best-supported version. Which ROM would you recommend for Android 9?. Thanks! (And sorry about the delay, I somehow missed this.). If you're dealing with an address where you're not sure if the Thumb bit is already set, use .or(1). Never perform arithmetic on NativePointer values in Frida \u2013 such code is not portable to 64-bit processes, where JavaScript Number values are not able to represent all possible pointer values.. Please try again. We were having network issues last night.. Your frida-server executable is probably in a sandboxed location. Move it to /usr/sbin for example.. Great idea \u2013 let's do it!. \"Me too\" comments are not helpful, it's already clear what the problem is. Please open a PR fixing the issue instead.. Only the Dalvik and ART runtimes are currently supported. Support for other VMs is planned, but for now hasn't been a priority. PRs welcome!. @masbog This is your chance to contribute to Frida \u2013 happy to guide you in tracking it down and fixing the issue \ud83e\udd17. Use frida-ls-devices to list available device IDs.. Did you try moving the frida-server binary to /usr/sbin?. @mrmacete Ah yes, you're right \u2013 that's definitely the issue here.. obj['- __ck_bestAccountForAddress:'](address)\nor less explicit:\nobj['__ck_bestAccountForAddress:'](address). @raymontag Would be great if you could figure out why the prebuilt Vala compiler segfaults on your system.\n@omarroth Using the upstream Vala compiler will result in a broken or buggy build of Frida. Make sure you use our tweaked version available here. The main issue is that our patched GLib, improved to support static linking and dynamic unloading, requires calling glib_init(), and our Vala compiler inserts that call.. @raymontag Interesting, thanks. Could you grab the backtrace of that? (Using the bt command.). Thanks guys. The Docker image we use for building runs glibc-2.11.3 so that the generated binaries run on reasonably old glibc versions. I suspect the issue here is a bug in Frida's patched GLib that resulted in undefined behavior, and that behavior just happened to change in 2.28. If any of you get a chance to dig deeper, that would be awesome.. This is a device-/ROM-specific issue. I'm currently doing most of my Android-testing on a Nexus 5X running 8.1.0. Android 9 is not yet supported by frida-java, in case you're running that. (PRs welcome!). @jkryanchou Please upgrade to 8.1.0. Otherwise you will have to contribute to Frida to improve our support for 5.x. Support for older versions is not a priority for me personally as I am already spread too thin.. Awesome! \u2764\ufe0f Thanks for getting to the bottom of this! \ud83e\udd18. Thanks!. Try moving the frida-server binary to /usr/sbin. If that doesn't solve the issue, it means this is a jailbreak-specific issue.. Check this path. May not be appropriate for your target system.. @deathmemory No. You'll have to build it yourself.. Awesome!\nYes, Frida is able to handle multiple overlapping requests on its rpc API. Requests are however serialized, i.e. enqueued on the event loop of Frida's JS thread.\nHowever, assuming you'd like to concurrently call Java APIs from multiple native threads, it gets a bit more complicated. Frida's JS runtimes \u2013 Duktape (default) and V8 (opt-in) \u2013 only allow a single native thread at a time to execute JavaScript. This is coordinated by a lock. However, NativeFunction that's used under the hood by frida-java to call Java functions, does by default let go of that lock before the call, and re-acquires it afterwards. So by adding an API like ThreadPool.schedule(), one could do:\njs\nThreadPool.schedule(function () {\n  Java.perform(function () {\n    blockingJavaCall();\n  });\n});\nIt's actually pretty straight-forward to implement this. Should only be a matter of looking at how Memory.scan() is implemented, and copy-pasting bits of it. Would you be interested in taking a stab at implementing it?. By the way, whether you're using the rpc API to expose functions to the Node.js side, or recv(), those callbacks will be run on Frida's dedicated JS thread. So you can hit it with multiple requests, but if you do anything blocking like calling a Java API, it will only service one request at a time. However, if you were to implement the imaginary API that I sketched above, you could do this:\njs\nrpc.exports = {\n  foo: function () {\n    return new Promise(function (resolve, reject) {\n      ThreadPool.schedule(function () {\n        Java.perform(function () {\n          try {\n            var result = blockingJavaCall();\n            resolve(result);\n          } catch (e) {\n            reject(e);\n          }\n        });\n      });\n    });\n  },\n};. Note that the thread-pool approach above is only a good idea if the workload \u2013 blockingJavaCall() \u2013 takes significantly more time than the overhead of setting up and tearing down each worker, especially considering that each Java.perform() has to attach the native thread to the Java VM, and detach it afterwards. It also assumes that the Java API being called is MT-safe.\nIf the workload is light you might as well just run them on the JS thread, one at a time. There's still the price to pay for the Java.perform(), however.\nSomething I've been thinking about is optimizing Java.perform() so it defers detaching from the Java VM until the native thread terminates. That would make both approaches faster. But something that probably matters even more is that you're using the V8 runtime when using frida-java.. For now you'll have to parse the PE/Mach-O/ELF headers yourself, or use a static analysis tool like r2, to determine where the constructors are. You can also use the DebugSymbol API if symbols are available. PRs welcome to add API to Module to enumerate constructors. We already have implementation code for this for Mach-O and partially for ELF. Only PE would be some work to fill in the missing bits. Cheers!. Yeah the best solution is to hook the dynamic linker's internals. I'm hoping somebody will publish a Frida-specific module to npm that solves this problem across different OSes. (That module would then be consumed through frida-compile. Here is an example showing how to use frida-compile.). Did you try console.log(Instruction.parse(ptr('0x1234')).toString()); to make sure that the expected instruction is at the given address?\nBy the way, noticed this:\njs\nptr(0xf326afc7)\nHere you're constructing a NativePointer value from a JavaScript number. Instead I would recommend:\njs\nptr('0xf326afc7')\nThis is because JS numbers are backed by double, which means you might get bitten by rounding errors. Not really a problem in 32-bit processes, but very dangerous for 64-bit: dangerous in the sense that you might spend a lot of time debugging before you realize that the NativePointer value didn't get initialized with the value you think it should.. Thanks!. @muhzii Yes it would be good to support this. Will we be able to upload cross-compiled .egg builds though?. The LSB is set to indicate that this is a Thumb function. That is how e.g. Instruction.parse() knows it should parse it as Thumb, and not ARM. I know this is kinda quirky, but it's also what dlsym() would give you so the processor can switch to the appropriate mode when branching.. @daukstsoskars @Daemonceltics Please try Frida from git, which supports unc0ver (except for app launching).. You are arrayWithObjects: expects a nil-terminated argument list. You should however use arrayWithObject: given that you only have a single object. (And you don't even have to create a mutable array if you're not planning on adding objects to it after construction.). For now you'll have to build Frida from git yourself \u2013 unc0ver is only supported in latest git. Will push a new release as soon as early instrumentation is also working. (Everything else should work, though.). Try hooking SSLRead and SSLWrite to get the protocol data after decryption and before encryption, respectively.. You're in luck since I've actually covered this in some of my Frida talks, demoing the following on Snapchat:\nsh\n$ frida-trace -U -f com.toyopagroup.picaboo -i SSLRead -i SSLWrite\nThen replace the contents of SSLRead.js with:\n```js\n{\n  onEnter: function (log, args, state) {\n    log(\"SSLRead(\" + \"\" + \")\");\n    this.data = args[1];\n    this.processed = args[3];\n  },\nonLeave: function (log, retval, state) {\n    var status = retval.toInt32();\n    if (status === 0) {\n      var data = Memory.readByteArray(this.data, Memory.readPointer(this.processed).toInt32());\n      log(hexdump(data, { ansi: true }));\n    }\n  }\n}\n```\nAnd the contents of SSLWrite.js with:\n```js\n{\n  onEnter: function (log, args, state) {\n    log(\"SSLWrite(\" + \"\" + \")\");\n    this.data = args[1];\n    this.processed = args[3];\n  },\nonLeave: function (log, retval, state) {\n    var status = retval.toInt32();\n    if (status === 0 && !this.processed.isNull()) {\n      var data = Memory.readByteArray(this.data, Memory.readPointer(this.processed).toInt32());\n      log(hexdump(data, { ansi: true }));\n    }\n  }\n}\n```. It's possible to support, and I'm hopeful somebody will contribute support for it someday (I don't have the time).\nAll it takes is embedding both x86 and arm versions of frida-agent.so, just like we embed x86 and x86_64 in the x86_64 build. The injector would then have to detect that the target process is using emulation, and in the native x86 code that it generates that calls dlopen() it would instead call the emulator so it emulates some code that does dlopen().. The code generated to call dlopen() is here btw.. You'll have to enable child gating to deal with subprocesses. Here's an example boilerplate project that deals with it:\nhttps://github.com/oleavr/frida-tool-example\nHowever, child gating used to be quite unreliable until last night, so you'll have to make sure the device-side frida-server is built from git.. Sounds good. Would you be interested in opening a PR?. The Mixed Platforms platform should be removed, it is added by MSVS in some cases, and has really annoyed me in the past. :)\n. These two changes should not be here, this is covered by a configuration-specific props file that includes this props file.\n. I'm afraid we'll have to special-case here, because of this:\nbash\nbuild_platform=$(uname -s | tr '[A-Z]' '[a-z]' | sed 's,^darwin$,mac,')\n. Is snapshot=off needed?\n. That would be great! If it works with it on (the default), it'll improve startup-performance quite a bit.\n. Maybe an extra newline here to isolate this group? (Otherwise it looks connected to .PHONY below.)\n. Shouldn't be any newline here; it's to make it very clear that the targets are corresponding, but for different platforms/archs.\n. Could we also remove the atexit_stub.c while at it?\n. Could we put the two -static-* flags after one another?\n. The two newlines are intentional and used to visually separate distinct sections.\n. Let's keep this newline too.\n. Left-over?\n. Should be spaces around the = for consistency with the rest.\n. There should be a space after all the casts.\n. Indentation is off here.\n. Let's name this one v8_abi_flags for consistency, and also to allow us to use this for other ABI-related flags for other architectures.\n. I suppose we want to tag them @inject and not @server?\n. Since we're going to the trouble of aligning the ;; on the lines above we should also do that here.\n. I guess we should also replace lines 79 through 88 by:\nheader_files = deduplicate(header_refs). Nice! We should also drop the os.path.abspath() in generate_library_unix().. Trailing whitespace \ud83d\udc7b. How about using \"$FRIDA_TOOLROOT/bin\" here instead?. - Perhaps we should name this just python or python_interpreter?\n- Would be good to pass this in from the Makefiles, so the value of PYTHON3 from the config.mk is used instead.. This also needs to be done in the other places where we invoke the script \u2013 using git grep setup-env.sh is probably the easiest to find them.. - The in-place option for sed is a bit different between GNU and BSD. I remember getting bitten by this in the past. Did you try this on both macOS and Linux?\n- Is the stdio redirection necessary here?\n- We should probably add a fallback that uses which python3 when PYTHON3 is not defined, to still make it possible to run this script standalone without too much fuzz.. Did you try replacing + > /dev/null 2>&1 with \\;?. - Would be good to move this down to right before if [ $host_platform = android ]; then, to avoid chopping the build/host section in two.\n- Should drop spaces around =.\n- For consistency I'd say we should introduce a \"local\" variable, something like:\nsh\nif [ -n \"$PYTHON3\" ]; then\n  python3=$PYTHON3\nelse\n  python3=$(which python3)\nfi. Could we generalize the expression here so it matches #!/ at start-of-line followed by anything with python in the name? The current expression depends on the Frida Linux buildbot-worker's Python installation location and may change at any time.. Awesome! Maybe we should just hardcode python3 instead of using $(PYTHON3)? It should be reasonable to expect a python3 symlink somewhere on the user's PATH.. It's meant to be user-overridable, so it could be an absolute path, which we don't want after /usr/bin/env.. This already gets added right after the switch on line 630, so we can omit this part.. ",
    "pmj": "Ahh, I see, thanks! I'll experiment with that and see what works for my purposes, and maybe I can think of something more general.\n. ",
    "hackappcom": "There are few  errors. Here is listing:\n\nThis file contains any messages produced by compilers while\nrunning configure, to aid debugging if configure makes a mistake.\nIt was created by frida-python configure 1.0.0, which was\ngenerated by GNU Autoconf 2.69.  Invocation command line was\n$ ../../../frida-python/configure \n---------\nPlatform.\n---------\nhostname = bright\nuname -m = x86_64\nuname -r = 3.17.2-1-ARCH\nuname -s = Linux\nuname -v = #1 SMP PREEMPT Thu Oct 30 20:49:39 CET 2014\n/usr/bin/uname -p = unknown\n/bin/uname -X     = unknown\n/bin/arch              = unknown\n/usr/bin/arch -k       = unknown\n/usr/convex/getsysinfo = unknown\n/usr/bin/hostinfo      = unknown\n/bin/machine           = unknown\n/usr/bin/oslevel       = unknown\n/bin/universe          = unknown\nPATH: /home/afx237/frida/build/toolchain-linux-x86_64/bin\nPATH: /usr/local/rvm/gems/ruby-1.9.3-p547/bin\nPATH: /usr/local/rvm/gems/ruby-1.9.3-p547@global/bin\nPATH: /usr/local/rvm/rubies/ruby-1.9.3-p547/bin\nPATH: /home/afx237/GNUstep/Tools\nPATH: /usr/local/sbin\nPATH: /usr/local/bin\nPATH: /usr/bin\nPATH: /bin\nPATH: /usr/sbin\nPATH: /sbin\nPATH: /opt/android-sdk/tools\nPATH: /opt/gnuradio-3.7.3/bin\nPATH: /usr/lib/jvm/default/bin\nPATH: /usr/bin/site_perl\nPATH: /usr/bin/vendor_perl\nPATH: /usr/bin/core_perl\nPATH: /usr/local/rvm/bin\n-----------\nCore tests.\n-----------\nconfigure:2061: loading site script /home/afx237/frida/build/config-linux-x86_64.site\n| # config.site for configure\n| \n| frida_host_platform=linux\n| frida_host_arch=x86_64\n| frida_host_platform_arch=linux-x86_64\n| frida_prefix=/home/afx237/frida/build/frida-linux-x86_64\n| \n| test \"$prefix\" = NONE && prefix=\"$frida_prefix\"\n| \n| enable_nls=no\n| \n| frida_warning_flags=\"-Wall\"\n| \n| case \"$PACKAGE_TARNAME\" in\n|   capstone)\n|     # Takes ages to compile with debug information\n|     frida_flags=\"-Os -pipe\"\n|   ;;\n|   _)\n|     frida_flags=\"-Os -pipe -gdwarf-2 -g3\"\n|   ;;\n| esac\n| \n| case $frida_host_platform_arch in\n|   linux-i386)\n|     host_alias=\"i686-linux-gnu\"\n|     cross_compiling=yes\n|   ;;\n|   linux-x86_64)\n|     host_alias=\"x86_64-linux-gnu\"\n|     cross_compiling=no\n|   ;;\n|   android-arm)\n|     if [ -n \"$FRIDA_LEGACY_AUTOTOOLS\" ]; then\n|       host_alias=\"armv7-linux-eabi\"\n|     else\n|       host_alias=\"armv7-none-linux-androideabi\"\n|     fi\n|     cross_compiling=yes\n| \n|     frida_flags=\"$frida_flags -mthumb\"\n|   ;;\n|   mac-i386)\n|     host_alias=\"i686-apple-darwin\"\n|     cross_compiling=yes\n|   ;;\n|   ios-arm)\n|     host_alias=\"arm-apple-darwin\"\n|     cross_compiling=yes\n| \n|     frida_flags=\"$frida_flags -mthumb\"\n|   ;;\n|   ios-arm64)\n|     host_alias=\"aarch64-apple-darwin\"\n|     cross_compiling=yes\n|   ;;\n| esac\n| \n| # Work around a bug in stdint generation m4, where CFLAGS is overwritten,\n| # causing this check to conclude that there's no stdint.h support...\n| ac_cv_header_stdint_t=yes\n| \n| if [ -x /usr/bin/install ]; then\n|   ac_cv_path_install=\"/usr/bin/install -p\"\n| fi\n| \n| case \"$PACKAGE_TARNAME\" in\n|   'libffi')\n|     CFLAGS=\"$CFLAGS -DFFI_MMAP_EXEC_WRIT=1 -DFFI_MMAP_EXEC_SELINUX=0\"\n|     enable_shared=no\n|     enable_static=yes\n|   ;;\n|   'glib')\n|     enable_dtrace=no\n|     enable_tests=no\n| \n|     enable_shared=no\n|     enable_static=yes\n| \n|     glib_cv_stack_grows=no\n|     glib_cv_uscore=no\n| \n|     case $frida_host_platform in\n|       android)\n|         ac_cv_func_posix_getgrgid_r=no\n|         ac_cv_func_posix_getpwuid_r=no\n|       ;;\n|       )\n|         ac_cv_func_posix_getgrgid_r=yes\n|         ac_cv_func_posix_getpwuid_r=yes\n|       ;;\n|     esac\n| \n|     case $frida_host_platform in\n|       linux)\n|         glib_cv_have_qsort_r=yes\n|       ;;\n|       mac|ios|android)\n|         glib_cv_have_qsort_r=no\n|       ;;\n|     esac\n| \n|     case $frida_host_platform in\n|       linux|android|mac|ios)\n|         enable_proxy_libintl=yes\n|       ;;\n|     esac\n| \n|     CFLAGS=\"$CFLAGS -I$frida_prefix/include\"\n|     LDFLAGS=\"$LDFLAGS -L$frida_prefix/lib\"\n|   ;;\n|   'libgee')\n|     enable_shared=no\n|     enable_static=yes\n|     enable_internal_asserts=no\n|     enable_consistency_check=no\n| \n|     CFLAGS=\"$CFLAGS -Wno-error=implicit-function-declaration\"\n|   ;;\n|   'vala'|'json-glib')\n|     enable_shared=no\n|     enable_static=yes\n|   ;;\n|   'capstone')\n|     enable_shared=no\n|     enable_static=yes\n|     enable_maintainer_mode=yes\n|     frida_flags=\"$frida_warning_flags $frida_flags\"\n|   ;;\n|   frida-_)\n|     enable_maintainer_mode=yes\n|     frida_flags=\"$frida_warning_flags $frida_flags\"\n|   ;;\n|   )\n|     frida_flags=\"$frida_warning_flags $frida_flags\"\n|   ;;\n| esac\n| \n| CFLAGS=\"$CFLAGS $frida_flags\"\n| CXXFLAGS=\"$CXXFLAGS $frida_flags\"\n| OBJCFLAGS=\"$OBJCFLAGS $frida_flags\"\nconfigure:2194: checking build system type\nconfigure:2208: result: x86_64-unknown-linux-gnu\nconfigure:2228: checking host system type\nconfigure:2241: result: x86_64-pc-linux-gnu\nconfigure:2261: checking target system type\nconfigure:2274: result: x86_64-pc-linux-gnu\nconfigure:2318: checking for a BSD-compatible install\nconfigure:2386: result: /usr/bin/install -p\nconfigure:2397: checking whether build environment is sane\nconfigure:2452: result: yes\nconfigure:2603: checking for a thread-safe mkdir -p\nconfigure:2642: result: /usr/bin/mkdir -p\nconfigure:2649: checking for gawk\nconfigure:2665: found /usr/bin/gawk\nconfigure:2676: result: gawk\nconfigure:2687: checking whether make sets $(MAKE)\nconfigure:2709: result: yes\nconfigure:2738: checking whether make supports nested variables\nconfigure:2755: result: yes\nconfigure:2893: checking whether make supports nested variables\nconfigure:2910: result: yes\nconfigure:2923: checking whether to enable maintainer-specific portions of Makefiles\nconfigure:2932: result: yes\nconfigure:2958: checking for style of include used by make\nconfigure:2986: result: GNU\nconfigure:3057: checking for gcc\nconfigure:3084: result: /usr/bin/gcc\nconfigure:3313: checking for C compiler version\nconfigure:3322: /usr/bin/gcc --version >&5\ngcc (GCC) 4.9.2\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\nconfigure:3333: $? = 0\nconfigure:3322: /usr/bin/gcc -v >&5\nUsing built-in specs.\nCOLLECT_GCC=/usr/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-unknown-linux-gnu/4.9.2/lto-wrapper\nTarget: x86_64-unknown-linux-gnu\nConfigured with: /build/gcc-multilib/src/gcc-4.9.2/configure --prefix=/usr --libdir=/usr/lib --libexecdir=/usr/lib --mandir=/usr/share/man --infodir=/usr/share/info --with-bugurl=https://bugs.archlinux.org/ --enable-languages=c,c++,ada,fortran,go,lto,objc,obj-c++ --enable-shared --enable-threads=posix --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-clocale=gnu --disable-libstdcxx-pch --disable-libssp --enable-gnu-unique-object --enable-linker-build-id --enable-cloog-backend=isl --enable-lto --enable-plugin --enable-install-libiberty --with-linker-hash-style=gnu --enable-multilib --disable-werror --enable-checking=release\nThread model: posix\ngcc version 4.9.2 (GCC) \nconfigure:3333: $? = 0\nconfigure:3322: /usr/bin/gcc -V >&5\ngcc: error: unrecognized command line option '-V'\ngcc: fatal error: no input files\ncompilation terminated.\nconfigure:3333: $? = 1\nconfigure:3322: /usr/bin/gcc -qversion >&5\ngcc: error: unrecognized command line option '-qversion'\ngcc: fatal error: no input files\ncompilation terminated.\nconfigure:3333: $? = 1\nconfigure:3353: checking whether the C compiler works\nconfigure:3375: /usr/bin/gcc -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib conftest.c  >&5\nconfigure:3379: $? = 0\nconfigure:3427: result: yes\nconfigure:3430: checking for C compiler default output file name\nconfigure:3432: result: a.out\nconfigure:3438: checking for suffix of executables\nconfigure:3445: /usr/bin/gcc -o conftest -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib conftest.c  >&5\nconfigure:3449: $? = 0\nconfigure:3471: result: \nconfigure:3493: checking whether we are cross compiling\nconfigure:3501: /usr/bin/gcc -o conftest -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib conftest.c  >&5\nconfigure:3505: $? = 0\nconfigure:3512: ./conftest\nconfigure:3516: $? = 0\nconfigure:3531: result: no\nconfigure:3536: checking for suffix of object files\nconfigure:3558: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:3562: $? = 0\nconfigure:3583: result: o\nconfigure:3587: checking whether we are using the GNU C compiler\nconfigure:3606: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:3606: $? = 0\nconfigure:3615: result: yes\nconfigure:3624: checking whether /usr/bin/gcc accepts -g\nconfigure:3644: /usr/bin/gcc -c -g -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:3644: $? = 0\nconfigure:3685: result: yes\nconfigure:3702: checking for /usr/bin/gcc option to accept ISO C89\nconfigure:3765: /usr/bin/gcc  -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:3765: $? = 0\nconfigure:3778: result: none needed\nconfigure:3803: checking whether /usr/bin/gcc understands -c and -o together\nconfigure:3825: /usr/bin/gcc -c conftest.c -o conftest2.o\nconfigure:3828: $? = 0\nconfigure:3825: /usr/bin/gcc -c conftest.c -o conftest2.o\nconfigure:3828: $? = 0\nconfigure:3840: result: yes\nconfigure:3859: checking dependency style of /usr/bin/gcc\nconfigure:3970: result: gcc3\nconfigure:4088: checking the archiver (/usr/bin/ar) interface\nconfigure:4104: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:4104: $? = 0\nconfigure:4106: /usr/bin/ar cru libconftest.a conftest.o >&5\nconfigure:4109: $? = 0\nconfigure:4137: result: ar\nconfigure:4204: checking how to print strings\nconfigure:4231: result: printf\nconfigure:4252: checking for a sed that does not truncate output\nconfigure:4316: result: /usr/bin/sed\nconfigure:4334: checking for grep that handles long lines and -e\nconfigure:4392: result: /usr/bin/grep\nconfigure:4397: checking for egrep\nconfigure:4459: result: /usr/bin/grep -E\nconfigure:4464: checking for fgrep\nconfigure:4526: result: /usr/bin/grep -F\nconfigure:4561: checking for ld used by /usr/bin/gcc\nconfigure:4628: result: /usr/bin/ld\nconfigure:4635: checking if the linker (/usr/bin/ld) is GNU ld\nconfigure:4650: result: yes\nconfigure:4662: checking for BSD- or MS-compatible name lister (nm)\nconfigure:4716: result: /usr/bin/nm\nconfigure:4846: checking the name lister (/usr/bin/nm) interface\nconfigure:4853: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:4856: /usr/bin/nm \"conftest.o\"\nconfigure:4859: output\n0000000000000000 B some_variable\n0000000000000000 n wm4.0.c416a2f49fda0a2d2dc5712347c4c8c9\n0000000000000000 n wm4.stdcpredef.h.19.22e8ded16952f5e606376dc7a0da8b23\nconfigure:4866: result: BSD nm\nconfigure:4869: checking whether ln -s works\nconfigure:4873: result: yes\nconfigure:4881: checking the maximum length of command line arguments\nconfigure:5012: result: 1572864\nconfigure:5060: checking how to convert x86_64-unknown-linux-gnu file names to x86_64-pc-linux-gnu format\nconfigure:5100: result: func_convert_file_noop\nconfigure:5107: checking how to convert x86_64-unknown-linux-gnu file names to toolchain format\nconfigure:5127: result: func_convert_file_noop\nconfigure:5134: checking for /usr/bin/ld option to reload object files\nconfigure:5141: result: -r\nconfigure:5215: checking for objdump\nconfigure:5242: result: /usr/bin/objdump\nconfigure:5274: checking how to recognize dependent libraries\nconfigure:5471: result: pass_all\nconfigure:5556: checking for dlltool\nconfigure:5586: result: no\nconfigure:5616: checking how to associate runtime and link libraries\nconfigure:5643: result: printf %s\\n\nconfigure:5767: checking for archiver @FILE support\nconfigure:5784: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:5784: $? = 0\nconfigure:5787: /usr/bin/ar cru libconftest.a @conftest.lst >&5\nconfigure:5790: $? = 0\nconfigure:5795: /usr/bin/ar cru libconftest.a @conftest.lst >&5\n/usr/bin/ar: conftest.o: No such file or directory\nconfigure:5798: $? = 1\nconfigure:5810: result: @\nconfigure:5868: checking for strip\nconfigure:5895: result: /usr/bin/strip\nconfigure:5967: checking for ranlib\nconfigure:5994: result: /usr/bin/ranlib\nconfigure:6096: checking command to parse /usr/bin/nm output from /usr/bin/gcc object\nconfigure:6249: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:6252: $? = 0\nconfigure:6256: /usr/bin/nm conftest.o | sed -n -e 's/^. [ ][ ]([A-Za-z][_A-Za-z0-9])$/\\1 \\2 \\2/p' | sed '/ __gnu_lto/d' > conftest.nm\nconfigure:6259: $? = 0\nconfigure:6325: /usr/bin/gcc -o conftest -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib conftest.c conftstm.o >&5\nconfigure:6328: $? = 0\nconfigure:6366: result: ok\nconfigure:6413: checking for sysroot\nconfigure:6443: result: no\nconfigure:6450: checking for a working dd\nconfigure:6488: result: /usr/bin/dd\nconfigure:6492: checking how to truncate binary pipes\nconfigure:6507: result: /usr/bin/dd bs=4096 count=1\nconfigure:6628: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:6631: $? = 0\nconfigure:6821: checking for mt\nconfigure:6851: result: no\nconfigure:6871: checking if : is a manifest tool\nconfigure:6877: : '-?'\nconfigure:6885: result: no\nconfigure:7527: checking how to run the C preprocessor\nconfigure:7597: result: /usr/bin/cpp\nconfigure:7617: /usr/bin/cpp -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c\nconfigure:7617: $? = 0\nconfigure:7631: /usr/bin/cpp -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c\nconftest.c:11:28: fatal error: ac_nonexistent.h: No such file or directory\n #include \n                            ^\ncompilation terminated.\nconfigure:7631: $? = 1\nconfigure: failed program was:\n| /* confdefs.h /\n| #define PACKAGE_NAME \"frida-python\"\n| #define PACKAGE_TARNAME \"frida-python\"\n| #define PACKAGE_VERSION \"1.0.0\"\n| #define PACKAGE_STRING \"frida-python 1.0.0\"\n| #define PACKAGE_BUGREPORT \"\"\n| #define PACKAGE_URL \"\"\n| #define PACKAGE \"frida-python\"\n| #define VERSION \"1.0.0\"\n| / end confdefs.h.  */\n| #include \nconfigure:7660: checking for ANSI C header files\nconfigure:7680: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7680: $? = 0\nconfigure:7753: /usr/bin/gcc -o conftest -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib conftest.c  >&5\nconfigure:7753: $? = 0\nconfigure:7753: ./conftest\nconfigure:7753: $? = 0\nconfigure:7764: result: yes\nconfigure:7777: checking for sys/types.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for sys/stat.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for stdlib.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for string.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for memory.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for strings.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for inttypes.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for stdint.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7777: checking for unistd.h\nconfigure:7777: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7777: $? = 0\nconfigure:7777: result: yes\nconfigure:7791: checking for dlfcn.h\nconfigure:7791: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:7791: $? = 0\nconfigure:7791: result: yes\nconfigure:7995: checking for objdir\nconfigure:8010: result: .libs\nconfigure:8277: checking if /usr/bin/gcc supports -fno-rtti -fno-exceptions\nconfigure:8295: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -fno-rtti -fno-exceptions conftest.c >&5\ncc1: warning: command line option '-fno-rtti' is valid for C++/ObjC++ but not for C\nconfigure:8299: $? = 0\nconfigure:8312: result: no\nconfigure:8660: checking for /usr/bin/gcc option to produce PIC\nconfigure:8667: result: -fPIC -DPIC\nconfigure:8675: checking if /usr/bin/gcc PIC flag -fPIC -DPIC works\nconfigure:8693: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -fPIC -DPIC -DPIC conftest.c >&5\nconfigure:8697: $? = 0\nconfigure:8710: result: yes\nconfigure:8739: checking if /usr/bin/gcc static flag -static works\nconfigure:8767: result: yes\nconfigure:8782: checking if /usr/bin/gcc supports -c -o file.o\nconfigure:8803: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -o out/conftest2.o conftest.c >&5\nconfigure:8807: $? = 0\nconfigure:8829: result: yes\nconfigure:8837: checking if /usr/bin/gcc supports -c -o file.o\nconfigure:8884: result: yes\nconfigure:8917: checking whether the /usr/bin/gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries\nconfigure:10065: result: yes\nconfigure:10102: checking whether -lc should be explicitly linked in\nconfigure:10110: /usr/bin/gcc -c -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include conftest.c >&5\nconfigure:10113: $? = 0\nconfigure:10128: /usr/bin/gcc -shared  -fPIC -DPIC conftest.o  -v -Wl,-soname -Wl,conftest -o conftest 2>&1 | /usr/bin/grep  -lc  >/dev/null 2>&1\nconfigure:10131: $? = 0\nconfigure:10145: result: no\nconfigure:10305: checking dynamic linker characteristics\nconfigure:10832: /usr/bin/gcc -o conftest -fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -I/home/afx237/frida/build/sdk-linux-x86_64/include -Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib -Wl,-rpath -Wl,/foo conftest.c  >&5\nconfigure:10832: $? = 0\nconfigure:11043: result: GNU/Linux ld.so\nconfigure:11150: checking how to hardcode library paths into programs\nconfigure:11175: result: immediate\nconfigure:11723: checking whether stripping libraries is possible\nconfigure:11728: result: yes\nconfigure:11763: checking if libtool supports shared libraries\nconfigure:11765: result: yes\nconfigure:11768: checking whether to build shared libraries\nconfigure:11789: result: yes\nconfigure:11792: checking whether to build static libraries\nconfigure:11796: result: yes\nconfigure:11846: checking whether /usr/bin/python2.7 version is >= 2.6\nconfigure:11857: /usr/bin/python2.7 -c import sys # split strings by '.' and convert to numeric. Append some zeros # because we need at least 4 digits for the hex conversion. # map returns an iterator in Python 3.0 and a list in 2.x minver = list(map(int, '2.6'.split('.'))) + [0, 0, 0] minverhex = 0 # xrange is not present in Python 3.0 and range returns an iterator for i in list(range(0, 4)): minverhex = (minverhex << 8) + minver[i] sys.exit(sys.hexversion < minverhex)\nconfigure:11860: $? = 0\nconfigure:11862: result: yes\nconfigure:11955: checking for /usr/bin/python2.7 version\nconfigure:11962: result: 2.7\nconfigure:11974: checking for /usr/bin/python2.7 platform\nconfigure:11981: result: linux2\nconfigure:12007: checking for /usr/bin/python2.7 script directory\nconfigure:12042: result: ${prefix}/lib/python2.7/site-packages\nconfigure:12051: checking for /usr/bin/python2.7 extension module directory\nconfigure:12086: result: ${exec_prefix}/lib/python2.7/site-packages\nconfigure:12264: checking pkg-config is at least version 0.9.0\nconfigure:12267: result: yes\nconfigure:12277: checking for PYFRIDA\nconfigure:12284: $PKG_CONFIG --exists --print-errors \"\"frida-core-1.0\"\"\nconfigure:12287: $? = 0\nconfigure:12301: $PKG_CONFIG --exists --print-errors \"\"frida-core-1.0\"\"\nconfigure:12304: $? = 0\nconfigure:12362: result: yes\nconfigure:12481: checking that generated files are newer than configure\nconfigure:12487: result: done\nconfigure:12514: creating ./config.status\n----------------------\nRunning config.status.\n----------------------\nThis file was extended by frida-python config.status 1.0.0, which was\ngenerated by GNU Autoconf 2.69.  Invocation command line was\nCONFIG_FILES    = \n  CONFIG_HEADERS  = \n  CONFIG_LINKS    = \n  CONFIG_COMMANDS = \n  $ ./config.status \non bright\nconfig.status:1098: error: cannot find input file: `Makefile.in'\n----------------\nCache variables.\n----------------\nac_cv_build=x86_64-unknown-linux-gnu\nac_cv_c_compiler_gnu=yes\nac_cv_env_CC_set=set\nac_cv_env_CC_value=/usr/bin/gcc\nac_cv_env_CFLAGS_set=set\nac_cv_env_CFLAGS_value='-fPIC -ffunction-sections -fdata-sections'\nac_cv_env_CPPFLAGS_set=set\nac_cv_env_CPPFLAGS_value=-I/home/afx237/frida/build/sdk-linux-x86_64/include\nac_cv_env_CPP_set=set\nac_cv_env_CPP_value=/usr/bin/cpp\nac_cv_env_LDFLAGS_set=set\nac_cv_env_LDFLAGS_value='-Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib'\nac_cv_env_LIBS_set=\nac_cv_env_LIBS_value=\nac_cv_env_PKG_CONFIG_LIBDIR_set=\nac_cv_env_PKG_CONFIG_LIBDIR_value=\nac_cv_env_PKG_CONFIG_PATH_set=set\nac_cv_env_PKG_CONFIG_PATH_value=/home/afx237/frida/build/frida-linux-x86_64/lib/pkgconfig:/home/afx237/frida/build/sdk-linux-x86_64/lib/pkgconfig\nac_cv_env_PKG_CONFIG_set=set\nac_cv_env_PKG_CONFIG_value='/home/afx237/frida/build/toolchain-linux-x86_64/bin/pkg-config --define-variable=frida_sdk_prefix=/home/afx237/frida/build/sdk-linux-x86_64 --static'\nac_cv_env_PYFRIDA_CFLAGS_set=\nac_cv_env_PYFRIDA_CFLAGS_value=\nac_cv_env_PYFRIDA_LIBS_set=\nac_cv_env_PYFRIDA_LIBS_value=\nac_cv_env_PYTHON_set=set\nac_cv_env_PYTHON_value=/usr/bin/python2.7\nac_cv_env_build_alias_set=\nac_cv_env_build_alias_value=\nac_cv_env_host_alias_set=\nac_cv_env_host_alias_value=\nac_cv_env_target_alias_set=\nac_cv_env_target_alias_value=\nac_cv_header_dlfcn_h=yes\nac_cv_header_inttypes_h=yes\nac_cv_header_memory_h=yes\nac_cv_header_stdc=yes\nac_cv_header_stdint_h=yes\nac_cv_header_stdint_t=yes\nac_cv_header_stdlib_h=yes\nac_cv_header_string_h=yes\nac_cv_header_strings_h=yes\nac_cv_header_sys_stat_h=yes\nac_cv_header_sys_types_h=yes\nac_cv_header_unistd_h=yes\nac_cv_host=x86_64-pc-linux-gnu\nac_cv_objext=o\nac_cv_path_EGREP='/usr/bin/grep -E'\nac_cv_path_FGREP='/usr/bin/grep -F'\nac_cv_path_GREP=/usr/bin/grep\nac_cv_path_SED=/usr/bin/sed\nac_cv_path_install='/usr/bin/install -p'\nac_cv_path_lt_DD=/usr/bin/dd\nac_cv_path_mkdir=/usr/bin/mkdir\nac_cv_prog_AWK=gawk\nac_cv_prog_CPP=/usr/bin/cpp\nac_cv_prog_ac_ct_CC=/usr/bin/gcc\nac_cv_prog_ac_ct_OBJDUMP=/usr/bin/objdump\nac_cv_prog_ac_ct_RANLIB=/usr/bin/ranlib\nac_cv_prog_ac_ct_STRIP=/usr/bin/strip\nac_cv_prog_cc_c89=\nac_cv_prog_cc_g=yes\nac_cv_prog_make_make_set=yes\nac_cv_target=x86_64-pc-linux-gnu\nam_cv_CC_dependencies_compiler_type=gcc3\nam_cv_ar_interface=ar\nam_cv_make_support_nested_variables=yes\nam_cv_prog_cc_c_o=yes\nam_cv_python_platform=linux2\nam_cv_python_pyexecdir='${exec_prefix}/lib/python2.7/site-packages'\nam_cv_python_pythondir='${prefix}/lib/python2.7/site-packages'\nam_cv_python_version=2.7\nlt_cv_ar_at_file=@\nlt_cv_archive_cmds_need_lc=no\nlt_cv_deplibs_check_method=pass_all\nlt_cv_file_magic_cmd='$MAGIC_CMD'\nlt_cv_file_magic_test_file=\nlt_cv_ld_reload_flag=-r\nlt_cv_nm_interface='BSD nm'\nlt_cv_objdir=.libs\nlt_cv_path_LD=/usr/bin/ld\nlt_cv_path_NM=/usr/bin/nm\nlt_cv_path_mainfest_tool=no\nlt_cv_prog_compiler_c_o=yes\nlt_cv_prog_compiler_pic='-fPIC -DPIC'\nlt_cv_prog_compiler_pic_works=yes\nlt_cv_prog_compiler_rtti_exceptions=no\nlt_cv_prog_compiler_static_works=yes\nlt_cv_prog_gnu_ld=yes\nlt_cv_sharedlib_from_linklib_cmd='printf %s\\n'\nlt_cv_shlibpath_overrides_runpath=no\nlt_cv_sys_global_symbol_pipe='sed -n -e '\\''s/^. [     ][  ]([A-Za-z][_A-Za-z0-9])$/\\1 \\2 \\2/p'\\'' | sed '\\''/ __gnu_lto/d'\\'''\nlt_cv_sys_global_symbol_to_c_name_address='sed -n -e '\\''s/^: (.) .$/  {\"\\1\", (void ) 0},/p'\\'' -e '\\''s/^[ABCDGIRSTW][ABCDGIRSTW] .* (.)$/  {\"\\1\", (void ) &\\1},/p'\\'''\nlt_cv_sys_global_symbol_to_c_name_address_lib_prefix='sed -n -e '\\''s/^: (.) .$/  {\"\\1\", (void ) 0},/p'\\'' -e '\\''s/^[ABCDGIRSTW][ABCDGIRSTW] .* (lib.)$/  {\"\\1\", (void ) &\\1},/p'\\'' -e '\\''s/^[ABCDGIRSTW][ABCDGIRSTW] .* (.)$/  {\"lib\\1\", (void ) &\\1},/p'\\'''\nlt_cv_sys_global_symbol_to_cdecl='sed -n -e '\\''s/^T . (.)$/extern int \\1();/p'\\'' -e '\\''s/^[ABCDGIRSTW][ABCDGIRSTW] .* (.*)$/extern char \\1;/p'\\'''\nlt_cv_sys_global_symbol_to_import=\nlt_cv_sys_max_cmd_len=1572864\nlt_cv_to_host_file_cmd=func_convert_file_noop\nlt_cv_to_tool_file_cmd=func_convert_file_noop\nlt_cv_truncate_bin='/usr/bin/dd bs=4096 count=1'\npkg_cv_PYFRIDA_CFLAGS='-pthread -I/home/afx237/frida/build/frida-linux-x86_64/include/frida-1.0 -I/home/afx237/frida/build/frida-linux-x86_64/include/capstone -I/home/afx237/frida/build/sdk-linux-x86_64/include/gee-0.8 -I/home/afx237/frida/build/sdk-linux-x86_64/include/glib-2.0 -I/home/afx237/frida/build/sdk-linux-x86_64/lib/glib-2.0/include -I/home/afx237/frida/build/sdk-linux-x86_64/include '\npkg_cv_PYFRIDA_LIBS='-L/home/afx237/frida/build/frida-linux-x86_64/lib -L/home/afx237/frida/build/sdk-linux-x86_64/lib -L/home/afx237/frida/build/frida-linux-x86_64/lib -L/home/afx237/frida/build/sdk-linux-x86_64/lib -lfrida-core-1.0 -lgee-0.8 -lfrida-gum-1.0 -lv8_base.x64 -lv8_snapshot -lm -lstdc++ -lcapstone -lgio-2.0 -lz -lresolv -lgmodule-2.0 -pthread -lrt -ldl -lgobject-2.0 -lffi -lglib-2.0 -pthread -lrt '\n-----------------\nOutput variables.\n-----------------\nACLOCAL='aclocal -I /home/afx237/frida/build/frida-linux-x86_64/share/aclocal -I /home/afx237/frida/build/sdk-linux-x86_64/share/aclocal -I /home/afx237/frida/build/toolchain-linux-x86_64/share/aclocal'\nAMDEPBACKSLASH='\\'\nAMDEP_FALSE='#'\nAMDEP_TRUE=''\nAMTAR='$${TAR-tar}'\nAM_BACKSLASH='\\'\nAM_DEFAULT_V='$(AM_DEFAULT_VERBOSITY)'\nAM_DEFAULT_VERBOSITY='0'\nAM_V='$(V)'\nAR='/usr/bin/ar'\nAUTOCONF='${SHELL} /home/afx237/frida/frida-python/build-aux/missing autoconf'\nAUTOHEADER='${SHELL} /home/afx237/frida/frida-python/build-aux/missing autoheader'\nAUTOMAKE='${SHELL} /home/afx237/frida/frida-python/build-aux/missing automake-1.14'\nAWK='gawk'\nCC='/usr/bin/gcc'\nCCDEPMODE='depmode=gcc3'\nCFLAGS='-fPIC -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 -fno-strict-aliasing'\nCPP='/usr/bin/cpp'\nCPPFLAGS='-I/home/afx237/frida/build/sdk-linux-x86_64/include'\nCYGPATH_W='echo'\nDEFS='-DHAVE_CONFIG_H'\nDEPDIR='.deps'\nDLLTOOL='false'\nDSYMUTIL=''\nDUMPBIN=''\nECHO_C=''\nECHO_N='-n'\nECHO_T=''\nEGREP='/usr/bin/grep -E'\nEXEEXT=''\nFGREP='/usr/bin/grep -F'\nGREP='/usr/bin/grep'\nINSTALL_DATA='${INSTALL} -m 644'\nINSTALL_PROGRAM='${INSTALL}'\nINSTALL_SCRIPT='${INSTALL}'\nINSTALL_STRIP_PROGRAM='$(install_sh) -c -s'\nLD='/usr/bin/ld -m elf_x86_64'\nLDFLAGS='-Wl,--gc-sections -L/home/afx237/frida/build/sdk-linux-x86_64/lib'\nLIBOBJS=''\nLIBS=''\nLIBTOOL='$(SHELL) $(top_builddir)/libtool'\nLIPO=''\nLN_S='ln -s'\nLTLIBOBJS=''\nMAINT=''\nMAINTAINER_MODE_FALSE='#'\nMAINTAINER_MODE_TRUE=''\nMAKEINFO='${SHELL} /home/afx237/frida/frida-python/build-aux/missing makeinfo'\nMANIFEST_TOOL=':'\nMKDIR_P='/usr/bin/mkdir -p'\nNM='/usr/bin/nm'\nNMEDIT=''\nOBJDUMP='/usr/bin/objdump'\nOBJEXT='o'\nOTOOL64=''\nOTOOL=''\nPACKAGE='frida-python'\nPACKAGE_BUGREPORT=''\nPACKAGE_NAME='frida-python'\nPACKAGE_STRING='frida-python 1.0.0'\nPACKAGE_TARNAME='frida-python'\nPACKAGE_URL=''\nPACKAGE_VERSION='1.0.0'\nPATH_SEPARATOR=':'\nPKG_CONFIG='/home/afx237/frida/build/toolchain-linux-x86_64/bin/pkg-config --define-variable=frida_sdk_prefix=/home/afx237/frida/build/sdk-linux-x86_64 --static'\nPKG_CONFIG_LIBDIR=''\nPKG_CONFIG_PATH='/home/afx237/frida/build/frida-linux-x86_64/lib/pkgconfig:/home/afx237/frida/build/sdk-linux-x86_64/lib/pkgconfig'\nPYFRIDA_CFLAGS='-pthread -I/home/afx237/frida/build/frida-linux-x86_64/include/frida-1.0 -I/home/afx237/frida/build/frida-linux-x86_64/include/capstone -I/home/afx237/frida/build/sdk-linux-x86_64/include/gee-0.8 -I/home/afx237/frida/build/sdk-linux-x86_64/include/glib-2.0 -I/home/afx237/frida/build/sdk-linux-x86_64/lib/glib-2.0/include -I/home/afx237/frida/build/sdk-linux-x86_64/include '\nPYFRIDA_LDFLAGS=''\nPYFRIDA_LIBS='-L/home/afx237/frida/build/frida-linux-x86_64/lib -L/home/afx237/frida/build/sdk-linux-x86_64/lib -L/home/afx237/frida/build/frida-linux-x86_64/lib -L/home/afx237/frida/build/sdk-linux-x86_64/lib -lfrida-core-1.0 -lgee-0.8 -lfrida-gum-1.0 -lv8_base.x64 -lv8_snapshot -lm -lstdc++ -lcapstone -lgio-2.0 -lz -lresolv -lgmodule-2.0 -pthread -lrt -ldl -lgobject-2.0 -lffi -lglib-2.0 -pthread -lrt '\nPYTHON='/usr/bin/python2.7'\nPYTHON_CFLAGS=' -I\"/usr/include/python2.7/\"'\nPYTHON_EXEC_PREFIX='/usr'\nPYTHON_LDFLAGS=''\nPYTHON_LIBS=' -L\"/usr/lib/\" -L\"/usr/lib/python2.7/config/\" -lpython2.7'\nPYTHON_PLATFORM='linux2'\nPYTHON_PREFIX='/usr'\nPYTHON_VERSION='2.7'\nRANLIB='/usr/bin/ranlib'\nSED='/usr/bin/sed'\nSET_MAKE=''\nSHELL='/bin/sh'\nSTRIP='/usr/bin/strip'\nVERSION='1.0.0'\nac_ct_AR=''\nac_ct_CC='/usr/bin/gcc'\nac_ct_DUMPBIN=''\nam__EXEEXT_FALSE=''\nam__EXEEXT_TRUE='#'\nam__fastdepCC_FALSE='#'\nam__fastdepCC_TRUE=''\nam__include='include'\nam__isrc=' -I$(srcdir)'\nam__leading_dot='.'\nam__nodep='_no'\nam__quote=''\nam__tar='$${TAR-tar} chof - \"$$tardir\"'\nam__untar='$${TAR-tar} xf -'\nbindir='${exec_prefix}/bin'\nbuild='x86_64-unknown-linux-gnu'\nbuild_alias=''\nbuild_cpu='x86_64'\nbuild_os='linux-gnu'\nbuild_vendor='unknown'\ndatadir='${datarootdir}'\ndatarootdir='${prefix}/share'\ndocdir='${datarootdir}/doc/${PACKAGE_TARNAME}'\ndvidir='${docdir}'\nexec_prefix='${prefix}'\nhost='x86_64-pc-linux-gnu'\nhost_alias='x86_64-linux-gnu'\nhost_cpu='x86_64'\nhost_os='linux-gnu'\nhost_vendor='pc'\nhtmldir='${docdir}'\nincludedir='${prefix}/include'\ninfodir='${datarootdir}/info'\ninstall_sh='${SHELL} /home/afx237/frida/frida-python/build-aux/install-sh'\nlibdir='${exec_prefix}/lib'\nlibexecdir='${exec_prefix}/libexec'\nlocaledir='${datarootdir}/locale'\nlocalstatedir='${prefix}/var'\nmandir='${datarootdir}/man'\nmkdir_p='$(MKDIR_P)'\noldincludedir='/usr/include'\npdfdir='${docdir}'\npkgpyexecdir='${pyexecdir}/frida-python'\npkgpythondir='${pythondir}/frida-python'\nprefix='/home/afx237/frida/build/frida-linux-x86_64'\nprogram_transform_name='s,x,x,'\npsdir='${docdir}'\npyexecdir='${exec_prefix}/lib/python2.7/site-packages'\npythondir='${prefix}/lib/python2.7/site-packages'\nsbindir='${exec_prefix}/sbin'\nsharedstatedir='${prefix}/com'\nsysconfdir='${prefix}/etc'\ntarget='x86_64-pc-linux-gnu'\ntarget_alias=''\ntarget_cpu='x86_64'\ntarget_os='linux-gnu'\ntarget_vendor='pc'\n-----------\nconfdefs.h.\n-----------\n/* confdefs.h */\ndefine PACKAGE_NAME \"frida-python\"\ndefine PACKAGE_TARNAME \"frida-python\"\ndefine PACKAGE_VERSION \"1.0.0\"\ndefine PACKAGE_STRING \"frida-python 1.0.0\"\ndefine PACKAGE_BUGREPORT \"\"\ndefine PACKAGE_URL \"\"\ndefine PACKAGE \"frida-python\"\ndefine VERSION \"1.0.0\"\ndefine STDC_HEADERS 1\ndefine HAVE_SYS_TYPES_H 1\ndefine HAVE_SYS_STAT_H 1\ndefine HAVE_STDLIB_H 1\ndefine HAVE_STRING_H 1\ndefine HAVE_MEMORY_H 1\ndefine HAVE_STRINGS_H 1\ndefine HAVE_INTTYPES_H 1\ndefine HAVE_STDINT_H 1\ndefine HAVE_UNISTD_H 1\ndefine HAVE_DLFCN_H 1\ndefine LT_OBJDIR \".libs/\"\nconfigure: exit 1\n. Building was performed accroding this manual\nhttp://www.frida.re/docs/building/\n(just 'make' after git clonning)\n\nWhich distro and version is this on?\n\nArch linux  (kernel 3.17.2-1)\n. That's my fault, sorry. I've accidentally launched 'make' with root permissions, and as result, got a mess with permissions.  I've chowned repo and it was built successful.\nThanks for fast reply :)\n. Thanks, I've figured out with python (package manager in ARCH changes all python-related symlinks to Python3).\nRight now, \n1) I've started server on android device \n2) performed adb port forward (according to manual)\n3) performed easy_install\n4) downloaded scripts from ospy.org/frida/linux/lib/python2.7/site-packages/frida\n5) ...and when I run  python ps.py  -R\nFailed to enumerate processes: GDBus.Error:org.freedesktop.DBus.Error.UnknownMethod: No such interface 're.frida.HostSession' on object at path /re/frida/HostSession\nAny ideas what am I doing wrong ?)\n. Android:\nLinux localhost 3.4.0-cyanogenmod-g2bac6fc #1 SMP PREEMPT Wed Oct 8 06:00:13 PDT 2014 armv7l GNU/Linux\nSAMSUNG GALAXY GT-19190\n. Now it works ! Thank you!\n. ",
    "sagar38": "unfortunately I don't have any mac box to test that :/\nI simply assumed that in mac environments you would get build_platform=darwin in which case all should work as expected during the build\n. yes, that should work just fine.\nShould this PR be closed and then submit a new one with such change?\n. I committed the change you suggested.\nWorked fine on linux. \nGive it a try on a mac environment if you can\n. ",
    "shitsecurity": "The install on debian was via pip.\nI'm having trouble compiling some components of frida. Build log below. Any hints?\nroot@336e6d9de83a:/opt/frida.debug# ANDROID_NDK_ROOT=/opt/frida.debug/android-ndk-r10d/ make\nmake[1]: Entering directory '/opt/frida.debug'\n. build/frida-env-android-arm.rc && make -C build/tmp-android-arm/frida-gum install\nmake[2]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum'\nMaking install in gum\nmake[3]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/gum'\n  CXXLD    libfrida-gum.la\n  CCLD     libfrida-gum-1.0.la\nmake[4]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/gum'\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/lib'\n /bin/bash ../libtool   --mode=install /usr/bin/install -p   libfrida-gum-1.0.la '/opt/frida.debug/build/frida-android-arm/lib'\nlibtool: install: /usr/bin/install -p .libs/libfrida-gum-1.0.lai /opt/frida.debug/build/frida-android-arm/lib/libfrida-gum-1.0.la\nlibtool: install: /usr/bin/install -p .libs/libfrida-gum-1.0.a /opt/frida.debug/build/frida-android-arm/lib/libfrida-gum-1.0.a\nlibtool: install: chmod 644 /opt/frida.debug/build/frida-android-arm/lib/libfrida-gum-1.0.a\nlibtool: install: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/bin/arm-linux-androideabi-ranlib /opt/frida.debug/build/frida-android-arm/lib/libfrida-gum-1.0.a\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm'\n /usr/bin/install -p -m 644 ../../../../frida-gum/gum/arch-arm/gumarmbacktracer.h '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm'\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm64'\n /usr/bin/install -p -m 644 ../../../../frida-gum/gum/arch-arm64/gumarm64.h ../../../../frida-gum/gum/arch-arm64/gumarm64writer.h ../../../../frida-gum/gum/arch-arm64/gumarm64relocator.h '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm64'\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm'\n /usr/bin/install -p -m 644 ../../../../frida-gum/gum/arch-arm/gumarm.h ../../../../frida-gum/gum/arch-arm/gumarmwriter.h ../../../../frida-gum/gum/arch-arm/gumarmrelocator.h ../../../../frida-gum/gum/arch-arm/gumthumbwriter.h ../../../../frida-gum/gum/arch-arm/gumthumbrelocator.h '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-arm'\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum'\n /usr/bin/install -p -m 644 ../../../../frida-gum/gum/gum.h ../../../../frida-gum/gum/gumarray.h ../../../../frida-gum/gum/gumbacktracer.h ../../../../frida-gum/gum/gumcodeallocator.h ../../../../frida-gum/gum/gumdefs.h ../../../../frida-gum/gum/gumevent.h ../../../../frida-gum/gum/gumeventsink.h ../../../../frida-gum/gum/gumfunction.h ../../../../frida-gum/gum/gumhash.h ../../../../frida-gum/gum/guminterceptor.h ../../../../frida-gum/gum/guminvocationcontext.h ../../../../frida-gum/gum/guminvocationlistener.h ../../../../frida-gum/gum/gumlist.h ../../../../frida-gum/gum/gummemory.h ../../../../frida-gum/gum/gummemoryaccessmonitor.h ../../../../frida-gum/gum/gummemorymap.h ../../../../frida-gum/gum/gumprocess.h ../../../../frida-gum/gum/gumreturnaddress.h ../../../../frida-gum/gum/gumspinlock.h ../../../../frida-gum/gum/gumstalker.h ../../../../frida-gum/gum/gumsymbolutil.h ../../../../frida-gum/gum/gumsysinternals.h ../../../../frida-gum/gum/backend-linux/gumlinux.h ../../../../frida-gum/gum/gumscript.h '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum'\n /bin/mkdir -p '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-x86'\n /usr/bin/install -p -m 644 ../../../../frida-gum/gum/arch-x86/gumx86writer.h ../../../../frida-gum/gum/arch-x86/gumx86relocator.h ../../../../frida-gum/gum/arch-x86/gumx86reader.h '/opt/frida.debug/build/frida-android-arm/include/frida-1.0/gum/arch-x86'\nmake[4]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/gum'\nmake[3]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/gum'\nMaking install in tests\nmake[3]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests'\nMaking install in core\nmake[4]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests/core'\nmake[5]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests/core'\nmake[5]: Nothing to be done for 'install-exec-am'.\nmake[5]: Nothing to be done for 'install-data-am'.\nmake[5]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests/core'\nmake[4]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests/core'\nmake[4]: Entering directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests'\n  CCLD     gum-tests\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_VRS_Pop'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '__aeabi_unwind_cpp_pr0'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_VRS_Get'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_VRS_Set'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_RaiseException'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(libunwind.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_Complete'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_Resume'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(libunwind.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_GetLanguageSpecificData'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(pr-support.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_GetRegionStart'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(pr-support.o): previous definition here\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: error: /opt/frida.debug/android-ndk-r10d//sources/cxx-stl/llvm-libc++/libs/armeabi-v7a/libc++_static.a(Unwind-EHABI.o): multiple definition of '_Unwind_DeleteException'\n/opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/../../../../arm-linux-androideabi/bin/ld: /opt/frida.debug/android-ndk-r10d//toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86_64/lib/gcc/arm-linux-androideabi/4.8/armv7-a/thumb/libgcc.a(unwind-arm.o): previous definition here\n../../../../../glib/gio/xdgmime/xdgmimemagic.c:253: error: undefined reference to '__srget'\n../../../../../glib/gio/xdgmime/xdgmimemagic.c:301: error: undefined reference to '__srget'\n../../../../../glib/gio/xdgmime/xdgmimemagic.c:326: error: undefined reference to '__srget'\n../../../../../glib/gio/xdgmime/xdgmimemagic.c:265: error: undefined reference to '__srget'\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nMakefile:698: recipe for target 'gum-tests' failed\nmake[4]: *** [gum-tests] Error 1\nmake[4]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests'\nMakefile:754: recipe for target 'install-recursive' failed\nmake[3]: *** [install-recursive] Error 1\nmake[3]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum/tests'\nMakefile:495: recipe for target 'install-recursive' failed\nmake[2]: *** [install-recursive] Error 1\nmake[2]: Leaving directory '/opt/frida.debug/build/tmp-android-arm/frida-gum'\nMakefile.linux.mk:63: recipe for target 'build/frida-android-arm/lib/pkgconfig/frida-gum-1.0.pc' failed\nmake[1]: *** [build/frida-android-arm/lib/pkgconfig/frida-gum-1.0.pc] Error 2\nmake[1]: Leaving directory '/opt/frida.debug'\nMakefile:2: recipe for target 'all' failed\nmake: *** [all] Error 2\nroot@336e6d9de83a:/opt/frida.debug#\n. The ndk r9d dependency (https://dl.google.com/android/ndk/android-ndk-r9d-linux-x86_64.tar.bz2) would be useful to have in an INSTALL doc. The vanilla r9 fails to build due to clang not being included in the archive.\nNow i'm hitting a different error:\n```\nroot@ae28c4b496be:/opt/frida.debug# nc -l -p 8080 &\n[1] 3510\nroot@ae28c4b496be:/opt/frida.debug# ./build/frida-linux-x86_64/bin/frida-trace -i 'recv*' nc\n\nFailed to load the Frida native extension: dynamic module does not define init function (init_frida)\nPlease ensure that the extension was compiled for Python 2.7.\n\nTraceback (most recent call last):\n  File \"./build/frida-linux-x86_64/bin/frida-trace\", line 10, in \n    frida.tracer.main()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/tracer.py\", line 497, in main\n    app.run()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/application.py\", line 57, in run\n    mgr = frida.get_device_manager()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/init.py\", line 43, in get_device_manager\n    raise ex\nImportError: dynamic module does not define init function (init_frida)\nroot@ae28c4b496be:/opt/frida.debug#\n```\nFrom what i gather, the 3.4 python bindings are somehow being confused with the 2.7 ones, which are also present, but reside in a neighboring dir? Any fix for this?\nEdit: Uninstalled the frida version that came with pip via pip uninstall.\n. No go. Same problem.\nmake clean\ngit pull\nANDROID_NDK_ROOT=/opt/frida.debug/android-ndk-r9d/ make\n```\nroot@eef029454a21:/opt/frida.debug# nc -l -p 8080 &\n[1] 8532\nroot@eef029454a21:/opt/frida.debug# ./build/frida-linux-x86_64/bin/frida-trace -i 'recv*' nc\n\nFailed to load the Frida native extension: dynamic module does not define init function (init_frida)\nPlease ensure that the extension was compiled for Python 2.7.\n\nTraceback (most recent call last):\n  File \"./build/frida-linux-x86_64/bin/frida-trace\", line 10, in \n    frida.tracer.main()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/tracer.py\", line 497, in main\n    app.run()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/application.py\", line 57, in run\n    mgr = frida.get_device_manager()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/init.py\", line 43, in get_device_manager\n    raise ex\nImportError: dynamic module does not define init function (init_frida)\nroot@eef029454a21:/opt/frida.debug#\n```\n. Oh snap! Forgot about the submodules. My bad.\nroot@f179c5cdf954:/opt/frida.debug# ./build/frida-linux-x86_64/bin/frida-trace -h\nTraceback (most recent call last):\n  File \"./build/frida-linux-x86_64/bin/frida-trace\", line 10, in <module>\n    frida.tracer.main()\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/tracer.py\", line 432, in main\n    from frida.application import ConsoleApplication\n  File \"/opt/frida.debug/build/frida-linux-x86_64/lib/python3.4/site-packages/frida/application.py\", line 9, in <module>\n    import colorama\nImportError: No module named 'colorama'\nroot@f179c5cdf954:/opt/frida.debug# vim ./build/frida-linux-x86_64/bin/frida-trace\nFixed by changing 3.4 to 2.7 in frida-trace (shebang + sys.path).\n. Debug code:\nmodule = dlopen (local_library_path, RTLD_GLOBAL | RTLD_NOW);\n  if( module == NULL ){\n    printf( \"%s\\n\", local_library_path );\n  }\n  g_assert (module != NULL);\nNull library:\nroot@df135f6c6681:/opt/frida.debug# ./build/frida-linux-x86_64/bin/frida-trace -i 'recv*' nc\nAttaching...                                                                \n/mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\n**\nERROR:../../../../frida-core/src/linux/linjector-glue.c:931:frida_resolve_remote_library_function: assertion failed: (module != NULL)\nAborted\nroot@df135f6c6681:/opt/frida.debug#\n/proc/$pid/maps:\n00400000-00406000 r-xp 00000000 08:08 8391177                            /mnt/xdat/var/lib/docker/aufs/diff/ec85d4ebd7d191aaa045ef7ad63912d4335630b9badc2abd8f0e954797f9f548/bin/nc.traditional\n00605000-00606000 r--p 00005000 08:08 8391177                            /mnt/xdat/var/lib/docker/aufs/diff/ec85d4ebd7d191aaa045ef7ad63912d4335630b9badc2abd8f0e954797f9f548/bin/nc.traditional\n00606000-00607000 rw-p 00006000 08:08 8391177                            /mnt/xdat/var/lib/docker/aufs/diff/ec85d4ebd7d191aaa045ef7ad63912d4335630b9badc2abd8f0e954797f9f548/bin/nc.traditional\n0088d000-008ae000 rw-p 00000000 00:00 0                                  [heap]\n7fbc999a5000-7fbc999b0000 r-xp 00000000 08:08 8655134                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libnss_files-2.19.so\n7fbc999b0000-7fbc99baf000 ---p 0000b000 08:08 8655134                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libnss_files-2.19.so\n7fbc99baf000-7fbc99bb0000 r--p 0000a000 08:08 8655134                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libnss_files-2.19.so\n7fbc99bb0000-7fbc99bb1000 rw-p 0000b000 08:08 8655134                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libnss_files-2.19.so\n7fbc99bb1000-7fbc99d50000 r-xp 00000000 08:08 8655136                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\n7fbc99d50000-7fbc99f50000 ---p 0019f000 08:08 8655136                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\n7fbc99f50000-7fbc99f54000 r--p 0019f000 08:08 8655136                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\n7fbc99f54000-7fbc99f56000 rw-p 001a3000 08:08 8655136                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/libc-2.19.so\n7fbc99f56000-7fbc99f5a000 rw-p 00000000 00:00 0 \n7fbc99f5a000-7fbc99f7a000 r-xp 00000000 08:08 8655151                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/ld-2.19.so\n7fbc9a16e000-7fbc9a171000 rw-p 00000000 00:00 0 \n7fbc9a178000-7fbc9a17a000 rw-p 00000000 00:00 0 \n7fbc9a17a000-7fbc9a17b000 r--p 00020000 08:08 8655151                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/ld-2.19.so\n7fbc9a17b000-7fbc9a17c000 rw-p 00021000 08:08 8655151                    /mnt/xdat/var/lib/docker/aufs/diff/7ac40b0ba88f5f8629c8121162aa5aa7068436afde29e4887f25becfd317c6a7/lib/x86_64-linux-gnu/ld-2.19.so\n7fbc9a17c000-7fbc9a17d000 rw-p 00000000 00:00 0 \n7fff9273d000-7fff9275e000 rw-p 00000000 00:00 0                          [stack]\n7fff927ff000-7fff92800000 r-xp 00000000 00:00 0                          [vdso]\nffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\nThanks for the installation hand-holding!\n. Fix confirmed! Marking issue closed. Thanks for your help. I really appreciate it. Best of luck.\n. ",
    "dweinstein": "haven't had the time yet :-(\n. I started investigating how the Android Studio IDE handles suspending processes for debugging with JDWP...and with a hook to android.os.Process.start which also gives you a good time to switch the value of debugFlags i.e., args[5] = ((Integer) args[5] | 0x1); which will have the processes start with debugging enabled each time (process will show up in a adb jdwp). \nAnother thing to note is when debugging with the IDE apps can be started suspended as well which might be useful for Frida... still trying to figure out how this works exactly but based on this and assuming we're still talking about Dalvik runtime (maybe this should work with ART too) then we might be able to adjust the args and include the suspend=y option to our advantage.\nHonestly I was successful with using xposed to hook android.os.Process.start but I haven't figured out how precisely to do this yet with Frida :-)\n. what if you copy the cat binary first to /tmp/cat then try the example?\n. ~~ah I think this only would have worked for I think the prev mac os version (not sierra)~~\nit did't work cause I was stupid and still typed cat instead of the copied version :-)\n. I lied, it still works :-)\n```\n$ cp /bin/cat .\n$ ./cat &\n$ python test-frida.py\n[u'cat', u'libSystem.B.dylib', u'libcache.dylib', u'libcommonCrypto.dylib', u'libcompiler_rt.dylib', u'libcopyfile.dylib', u'libcorecrypto.dylib', u'libdispatch.dylib', u'libdyld.dylib', u'libkeymgr.dylib', u'liblaunch.dylib', u'libmacho.dylib', u'libquarantine.dylib', u'libremovefile.dylib', u'libsystem_asl.dylib', u'libsystem_blocks.dylib', u'libsystem_c.dylib', u'libsystem_configuration.dylib', u'libsystem_coreservices.dylib', u'libsystem_coretls.dylib', u'libsystem_dnssd.dylib', u'libsystem_info.dylib', u'libsystem_kernel.dylib', u'libsystem_m.dylib', u'libsystem_malloc.dylib', u'libsystem_network.dylib', u'libsystem_networkextension.dylib', u'libsystem_notify.dylib', u'libsystem_platform.dylib', u'libsystem_pthread.dylib', u'libsystem_sandbox.dylib', u'libsystem_secinit.dylib', u'libsystem_symptoms.dylib', u'libsystem_trace.dylib', u'libunwind.dylib', u'libxpc.dylib', u'libobjc.A.dylib', u'libauto.dylib', u'libc++abi.dylib', u'libc++.1.dylib', u'frida-agent.dylib', u'libresolv.9.dylib']\n```\nopened PR to docs here\n. sounds like you have two cat binaries running. Try killing both of those PIDs first and trying again. Or try the PIDs individually until you find the right one by passing the PID (number) to attach instead (frida.attach(29755))\nTo kill all the running cat processes you can run pkill cat then try again. \n. This is Closed via - frida/frida-gum#309 frida/frida-node#32. ",
    "GHXST01": "@dweinstein Hey! I know this is a while ago, but have you had progress hooking android.os.Process.start now we are able to spawn apps? I would still like force-able debug to be a thing and would very much like to be able to submit a PR for it if I am able to do so.. I found a work around by adding the internal IP address of the client requesting access, to the frida-server, to the bypass list in Proxydroid.. ",
    "rain6851": "@oleavr ,if i want to start a new process with some arguments using spawn, it fail.. ",
    "szwl": "It certainly is a build issue - I'm not sure if LD_FLAGS fixed it because I added it also to CFLAGS ;)\nI have another issue now: frida-trace is now stuck on Failed to attach: Timeout was reached .\nI've used strace on frida-server and the last part seems like this:\nptrace(PTRACE_ATTACH, 2915, 0, 0)       = 0\nwait4(2915, [{WIFSTOPPED(s) && WSTOPSIG(s) == SIGSTOP}], 0, NULL) = 2915\nopenat(AT_FDCWD, \"/proc/2915/maps\", O_RDONLY) = 11\nfstat64(11, {st_mode=S_IFREG|0444, st_size=0, ...}) = 0\nmprotect(0xb6471000, 4096, PROT_READ|PROT_WRITE) = 0\nmprotect(0xb6471000, 4096, PROT_READ)   = 0\nread(11, \"b6b00000-b6d00000 rw-p 00000000 \"..., 1024) = 1024\nfutex(0xbea5ca24, FUTEX_WAIT_PRIVATE, 2, NULL\nI'm trying to figure out why the server hangs - I could send a patch if I find the bug but I'd need some directions...\n. Well I thought about SELinux but it doesn't solve the problem. I'll play with it some more - maybe some printf debugging will help ;)\nIt just seems like the server is freezing for some reason and the client is getting timeout after a while\n. no free time yet :( I will try to find some this week\n2015-01-31 13:14 GMT+01:00 Ole Andr\u00e9 Vadla Ravn\u00e5s notifications@github.com\n:\n\nAny luck?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/frida/frida/issues/14#issuecomment-72315556.\n. Ok I've found the issue: it hangs on sscanf while trying to parse /proc//maps.\nThis is probably caused by: http://stackoverflow.com/questions/27847322/hang-in-sscanf-with-app-stl-c-shared-when-running-on-android-5-0-lollipop. What is the reason to use ndk-r9d? Ndk update would probably fix it\n. You can either rebuild the Frida SDK with newer ndk (I'd do that but I'm pretty lost in the build system...) or apply patch to ndk-r9d like suggested on https://android.googlesource.com/platform/ndk.git/+/47e68e84ee043436387a053c1cd47b97cabbb8ca\n\nto rebuild libc++  you have to use in ndk root:\nbuild/tools/build-cxx-stl.sh --stl=libc++ --verbose\nUnfortunately for me it failed because it couldn't find some directory ... linux-x86/ ...\nI have x86_64 so I had to fix one file to make it work: build/tools/prebuild-common.sh lines ~1133,\nchange RET=linux-x86 to RET=linux-x86_64\n```\n        linux-x86_64)\n            if [ \"$TRY64\" = \"no\" ]; then\n 1133:               RET=linux-x86_64\n            fi\n```\nthen rebuild frida and it seems to be working now without any hangs :)\n. ",
    "ignoramous": "Is the fix available in the latest release/source code?\n. ",
    "Tyilo": "I understand, done.\n. The problem is not ptr it's the return value from Memory.readU64.\nYou can use Memory.readU64(ptr('0x108520020')) and Memory.readU64(ptr('0x108520028')) instead and you will still get the same output.\n. Moved issue to frida-gum (https://github.com/frida/frida-gum/issues/16)\n. Oh, I didn't know frida-core used the same format.\nThe core tests should now respect the tests parameter if given.\n. You're right. Is there even a reason that we need to resolve the symlink if PYTHON is a symlink?\n. That explains why we need to get the path to the python binary, but not why we need to resolve the symlink.\n. Say I have two versions of python 2.7.x installed, eg. OS X system one and another one from homebrew, would they be built side by side?\nIf yes, then we need to resolve the symlink.\nIf no, we just need to detect the python version, which we should do by running $(PYTHON) -c 'import sys; v = sys.version_info; print \"{}.{}\".format(v[0], v[1])'\n. ",
    "averrin": "% frida-trace -i 'recv_' skype\nAttaching...\n_\nERROR:../../../../frida-core/src/linux/linjector-glue.c:958:frida_resolve_remote_library_function: assertion failed (local_library_path == remote_library_path): (\"/lib/x86_64-linux-gnu/libc-2.19.so\" == \"/lib/i386-linux-gnu/libc-2.19.so\")\n[1]    12166 abort (core dumped)  frida-trace -i 'recv' skype\nwith other programs:\n% frida-trace -i 'recv*' dolphin\nStarted tracing 0 functions. Press ENTER to stop.\nand.... nothing changes.\nLooks better=)\n. ",
    "jgeralnik": "Thanks, I was trying on Linux. As you said, I was looking for a readCString or some equivalent - my data may include binary data, but is not utf-8.\n. You also may want to update the api docs to make it clear that ansi is windows-only. \n. ",
    "s1341": "A couple of questions:\n1. How can I configure frida to build target components using an existing QNX cross-toolchain?\n2. What is the absolute minimum required to be implemented in order to get working code injection?\n. Ok. I made this a static library and made the name/location changes you suggested.\n. I updated the checklist to include the things that are currently to do on the qnx-arm(eabi) port. I pruned old items that seem to no longer be relevant.\n. Note that the qnx port is arm only\n. Working with mips(el)-linux-gcc 4.5.3 on uClibc 0.9.32\n. I don't think of it actually does anything. We can probably nuke it. I'll try to check it agian tomorrow. \n. I already did. that's what that diff does.\n. ",
    "TheBigS": "Yup that did it!, I figured something was up, received the error trying too build on master first, then switched to v3.0.1.Thanks for the quick reply.\n. ",
    "umpacu": "No problem! Thank you very much for the quick response!\nI'll be waiting to test it.\n. Sure, I'll try!\nFirs of all, I'm usgin Archlinux 64 bits and I would like to build frida with python 2.7. If I have the standard gcc package, the build fails with:\n\nconfigure: error: in /home/umpacu/tmp/frida/build/tmp-linux-i386/frida-gum':\nconfigure: error: C compiler cannot create executables\nSeeconfig.log' for more details\nMakefile.linux.mk:111: recipe for target 'build/tmp-linux-i386/frida-gum/Makefile' failed\nmake: *** [build/tmp-linux-i386/frida-gum/Makefile] Error 77\n\nI guess that's because it needs to compile something for x86, so if I install gcc-multilibs, then the build process goes further, but it still gives me an error, which is this (just the last few lines because the output is huge; if you need more, just tell me):\n/home/umpacu/tmp/frida/build/sdk-linux-i386/lib/libv8_base.a(string-builder.o): In function \nv8::internal::IncrementalStringBuilder::IncrementalStringBuilder(v8::internal::Isolate*)':\nstring-builder.cc:(.text._ZN2v88internal24IncrementalStringBuilderC2EPNS0_7IsolateE+0xc0): \nundefined reference toV8_Fatal'\n/home/umpacu/tmp/frida/build/sdk-linux-i386/lib/libv8_base.a(string-builder.o): In function \nv8::internal::IncrementalStringBuilder::Extend()':\nstring-builder.cc:(.text._ZN2v88internal24IncrementalStringBuilder6ExtendEv+0xc2): undefined \nreference toV8_Fatal'\n/home/umpacu/tmp/frida/build/sdk-linux-i386/lib/libv8_base.a(string-builder.o): In function \nv8::internal::IncrementalStringBuilder::Finish()':\nstring-builder.cc:(.text._ZN2v88internal24IncrementalStringBuilder6FinishEv+0x108): \nundefined reference toV8_Fatal'\n/home/umpacu/tmp/frida/build/sdk-linux-i386/lib/libv8_base.a(string-builder.o): In function \nv8::internal::IncrementalStringBuilder::AppendString(v8::internal::Handle<v8::internal::String>)':\nstring-builder.cc:(.text._ZN2v88internal24IncrementalStringBuilder12AppendStringENS0_6HandleINS0_6StringEEE+0x110): \nundefined reference toV8_Fatal'\n/home/umpacu/tmp/frida/build/sdk-linux-i386/lib/libv8_base.a(string-builder.o):string-builder.cc:(.text._ZN2v88internal24IncrementalStringBuilder12AppendStringENS0_6HandleINS0_6StringEEE+0x170): \nmore undefined references to `V8_Fatal' follow\ncollect2: error: ld returned 1 exit status\nMakefile:481: recipe for target 'libfrida-gumpp-1.0.la' failed\nmake[3]: * [libfrida-gumpp-1.0.la] Error 1\nmake[3]: Leaving directory \n'/home/umpacu/tmp/frida/build/tmp-linux-i386/frida-gum/bindings/gumpp'\nMakefile:374: recipe for target 'install-recursive' failed\nmake[2]: * [install-recursive] Error 1\nmake[2]: Leaving directory '/home/umpacu/tmp/frida/build/tmp-linux-i386/frida-gum/bindings'\nMakefile:503: recipe for target 'install-recursive' failed\nmake[1]: * [install-recursive] Error 1\nmake[1]: Leaving directory '/home/umpacu/tmp/frida/build/tmp-linux-i386/frida-gum'\nMakefile.linux.mk:115: recipe for target \n'build/frida-linux-i386/lib/pkgconfig/frida-gum-1.0.pc' failed\nmake: * [build/frida-linux-i386/lib/pkgconfig/frida-gum-1.0.pc] Error 2\nAny idea?\n. Great. I'll be waiting to test it.\nCheers!\n. I've created a virtualenv setup to use python2.7 because in Arch the default version is python3, and it was giving me an error during the compilation.\nBut other than that, it works great!\nThe build is complete, so now I'll try to use frida, but that's another thing. I can close this issue.\nThank you so much!\n. ",
    "piopro": "Hi, I have got the error trying to install Frida for Windows: Failed to load the Frida native extension: DLL load failed: ..... Please ensure that the extension was compiled for Python 3.x.\nThe install procedure was:\n1) Downloaded: https://www.python.org/ftp/python/3.6.0/python-3.6.0a3-amd64.exe\n2) Executed: python-3.6.0a3-amd64.exe\n3) Downloaded: https://bootstrap.pypa.io/ez_setup.py\n4) Executed: python ez_setup.py --insecure \n5) Executed: pip install Frida\n6) Executed: Frida\nThe output was:\nFailed to load the Frida native extension: DLL load failed: \u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c.\nPlease ensure that the extension was compiled for Python 3.x.\n\nTraceback (most recent call last):\n  File \"C:\\Software\\Python36\\Scripts\\frida-script.py\", line 9, in \n    load_entry_point('frida==7.2.16', 'console_scripts', 'frida')()\n  File \"c:\\software\\python36\\lib\\site-packages\\pkg_resources__init__.py\", line 542, in load_entry_point\n    return get_distribution(dist).load_entry_point(group, name)\n  File \"c:\\software\\python36\\lib\\site-packages\\pkg_resources__init__.py\", line 2569, in load_entry_point\n    return ep.load()\n  File \"c:\\software\\python36\\lib\\site-packages\\pkg_resources__init__.py\", line 2229, in load\n    return self.resolve()\n  File \"c:\\software\\python36\\lib\\site-packages\\pkg_resources__init__.py\", line 2235, in resolve\n    module = import(self.module_name, fromlist=['name'], level=0)\n  File \"c:\\software\\python36\\lib\\site-packages\\frida__init__.py\", line 26, in \n    raise ex\n  File \"c:\\software\\python36\\lib\\site-packages\\frida__init__.py\", line 6, in \n    import _frida\nImportError: DLL load failed: \u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u0434\u0443\u043b\u044c.\nWhat should I do to correct?\n. Solved this problem replacing Python distribution by this: https://www.python.org/ftp/python/3.5.2/python-3.5.2-amd64.exe\n. ",
    "flycrane": "Hi oleavr,\nThanks for the response, yes I was  trying building frida myself but met problem as well, haven't figured out why after a long time searching, any advice please?\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(hydrogen.o): In function v8::internal::HGraph::SourcePositionToScriptPosition(v8::internal::SourcePosition)':\nhydrogen.cc:(.text._ZN2v88internal6HGraph30SourcePositionToScriptPositionENS0_14SourcePositionE+0x63): undefined reference tostd::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(type-feedback-vector.o): In function v8::internal::Handlev8::internal::TypeFeedbackVector v8::internal::TypeFeedbackVector::Allocatev8::internal::ZoneFeedbackVectorSpec(v8::internal::Isolate_, v8::internal::ZoneFeedbackVectorSpec const_)':\ntype-feedback-vector.cc:(.text._ZN2v88internal18TypeFeedbackVector8AllocateINS0_22ZoneFeedbackVectorSpecEEENS0_6HandleIS1_EEPNS0_7IsolateEPKT_[_ZN2v88internal18TypeFeedbackVector8AllocateINS0_22ZoneFeedbackVectorSpecEEENS0_6HandleIS1_EEPNS0_7IsolateEPKT_]+0x27f): undefined reference tostd::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o): In function v8::internal::compiler::RegisterAllocator::ComputeLiveOut(v8::internal::compiler::InstructionBlock const*)':\nregister-allocator.cc:(.text._ZN2v88internal8compiler17RegisterAllocator14ComputeLiveOutEPKNS1_16InstructionBlockE+0x182): undefined reference tostd::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o): In function v8::internal::compiler::RegisterAllocator::ResolveControlFlow()':\nregister-allocator.cc:(.text._ZN2v88internal8compiler17RegisterAllocator18ResolveControlFlowEv+0x2d1): undefined reference tostd::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o):register-allocator.cc:(.text._ZN2v88internal8compiler17RegisterAllocator22FindOptimalSpillingPosEPNS1_9LiveRangeENS1_16LifetimePositionE+0x1d8): more undefined references to std::__throw_out_of_range_fmt(char const*, ...)' follow\ncollect2: error: ld returned 1 exit status\nmake[3]: *** [gum-tests] Error 1\nmake[3]: Leaving directory/home/txia/frida/build/tmp-linux-i386/frida-gum/tests'\nmake[2]: * [install-recursive] Error 1\nmake[2]: Leaving directory /home/txia/frida/build/tmp-linux-i386/frida-gum/tests'\nmake[1]: *** [install-recursive] Error 1\nmake[1]: Leaving directory/home/txia/frida/build/tmp-linux-i386/frida-gum'\nmake: * [build/frida-linux-i386/lib/pkgconfig/frida-gum-1.0.pc] Error 2\n. thanks, will try that\n. oleavr,\nso I checked out the frida-ci project, and run create-toolchain-and-sdk.sh as the doc suggested, however, got error \"Missing required script ../frida-ci/create-toolchain-and-sdk.sh/build-deps.sh\". I found no build-deps.sh out there, just build-deps-windows.sh which seems for windows.\n. no, Makefile.sdk.mk didn't work, anything missing?\ntxia@baidu:~/frida$ make -f Makefile.sdk.mk  FRIDA_HOST=linux-x86_64\nFRIDA_ENV_NAME=fs FRIDA_ENV_SDK=none FRIDA_HOST=linux-x86_64 ./releng/setup-env.sh\nDownloading and deploying toolchain...\nEnvironment created. To enter:\nsource /home/txia/frida/build/fs-env-linux-x86_64.rc\nrm -f -r zlib\nmkdir zlib\nwget -O - -q http://zlib.net/zlib-1.2.8.tar.gz | tar -C zlib -xz --strip-components 1\nrm -f -r build/fs-tmp-linux-x86_64/zlib\nmkdir -p build/fs-tmp-linux-x86_64\ncp -a zlib build/fs-tmp-linux-x86_64/zlib\n. build/fs-env-linux-x86_64.rc \\\n        && export PACKAGE_TARNAME=zlib \\\n        && . $CONFIG_SITE \\\n        && export CFLAGS CXXFLAGS OBJCFLAGS \\\n        && case \"linux-x86_64\" in \\\n            android-i386) \\\n                export PATH=\"$(dirname $NM):$PATH\"; \\\n                export CHOST=\"i686-linux-android\"; \\\n                ;; \\\n            android-arm) \\\n                export PATH=\"$(dirname $NM):$PATH\"; \\\n                export CHOST=\"arm-linux-androideabi\"; \\\n                ;; \\\n            qnx-i386) \\\n                export PATH=\"$(dirname $NM):$PATH\"; \\\n                export CHOST=\"i486-pc-nto-qnx6.6.0\"; \\\n                ;; \\\n            qnx-arm) \\\n                export PATH=\"$(dirname $NM):$PATH\"; \\\n                export CHOST=\"arm-unknown-nto-qnx6.6.0eabi\"; \\\n                ;; \\\n        esac \\\n        && cd build/fs-tmp-linux-x86_64/zlib \\\n        && ./configure \\\n            --prefix=$frida_prefix \\\n            --static\nCompiler error reporting is too harsh for ./configure (perhaps remove -Werror).\n* ./configure aborting.\nmake: ** [build/fs-tmp-linux-x86_64/zlib/Makefile] Error 1\ntxia@baidu:~/frida$ \n. also saw this:\ntxia@baidu:~/frida/build/fs-tmp-linux-x86_64/zlib$ cat configure.log\n./configure --prefix=/home/txia/frida/build/fs-linux-x86_64 --static\nMon Apr 20 16:52:16 CST 2015\n=== ztest25685.c ===\nextern int getchar();\nint hello() {return getchar();}\n/usr/bin/gcc -static-libgcc -static-libstdc++ -c ztest25685.c\n... using gcc\nChecking for obsessive-compulsive compiler options...\n=== ztest25685.c ===\nint foo() { return 0; }\n/usr/bin/gcc -static-libgcc -static-libstdc++ -c -include /home/txia/frida/build/frida-version.h -fPIC -m64 -ffunction-sections -fdata-sections -Wall -Os -pipe -gdwarf-2 -g3 ztest25685.c\nIn file included from :0:0:\n/usr/include/stdc-predef.h:59:1: fatal error: /home/txia/frida/build/frida-version.h: No such file or directory\n #endif\n ^\ncompilation terminated.\n(exit code 1)\nCompiler error reporting is too harsh for ./configure (perhaps remove -Werror).\n** ./configure aborting.\n. oleavr,\nit works when building sdk, but still got following error when building frida with \"make -f Makefile.linux.mk python-64 PYTHON=/usr/lib/python2.7\", seems \nmake[3]: Entering directory /home/txia/frida/build/tmp-linux-i386/frida-gum/tests'\n  CXXLD    gum-tests\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(compiler.o): In functionv8::internal::CompilationInfo::LogDeoptCallPosition(int, int)':\ncompiler.cc:(.text.ZN2v88internal15CompilationInfo20LogDeoptCallPositionEii+0x8c): undefined reference to std::__throw_out_of_range_fmt(char const*, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(hydrogen.o): In functionv8::internal::HGraph::SourcePositionToScriptPosition(v8::internal::SourcePosition)':\nhydrogen.cc:(.text._ZN2v88internal6HGraph30SourcePositionToScriptPositionENS0_14SourcePositionE+0x63): undefined reference to std::__throw_out_of_range_fmt(char const*, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(type-feedback-vector.o): In functionv8::internal::Handlev8::internal::TypeFeedbackVector v8::internal::TypeFeedbackVector::Allocatev8::internal::ZoneFeedbackVectorSpec(v8::internal::Isolate, v8::internal::ZoneFeedbackVectorSpec const_)':\ntype-feedback-vector.cc:(.text.ZN2v88internal18TypeFeedbackVector8AllocateINS0_22ZoneFeedbackVectorSpecEEENS0_6HandleIS1_EEPNS0_7IsolateEPKT[ZN2v88internal18TypeFeedbackVector8AllocateINS0_22ZoneFeedbackVectorSpecEEENS0_6HandleIS1_EEPNS0_7IsolateEPKT]+0x27f): undefined reference to std::__throw_out_of_range_fmt(char const*, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o): In functionv8::internal::compiler::RegisterAllocator::ComputeLiveOut(v8::internal::compiler::InstructionBlock const_)':\nregister-allocator.cc:(.text.ZN2v88internal8compiler17RegisterAllocator14ComputeLiveOutEPKNS1_16InstructionBlockE+0x182): undefined reference to std::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o): In functionv8::internal::compiler::RegisterAllocator::ResolveControlFlow()':\nregister-allocator.cc:(.text._ZN2v88internal8compiler17RegisterAllocator18ResolveControlFlowEv+0x2d1): undefined reference tostd::__throw_out_of_range_fmt(char const_, ...)'\n/home/txia/frida/build/sdk-linux-i386/lib/libv8_base.a(register-allocator.o):register-allocator.cc:(.text._ZN2v88internal8compiler17RegisterAllocator22FindOptimalSpillingPosEPNS1_9LiveRangeENS1_16LifetimePositionE+0x1d8): more undefined references tostd::__throw_out_of_range_fmt(char const, ...)' follow\ncollect2: error: ld returned 1 exit status\nmake[3]: * [gum-tests] Error 1\nmake[3]: Leaving directory /home/txia/frida/build/tmp-linux-i386/frida-gum/tests'\nmake[2]: *** [install-recursive] Error 1\nmake[2]: Leaving directory/home/txia/frida/build/tmp-linux-i386/frida-gum/tests'\nmake[1]: * [install-recursive] Error 1\nmake[1]: Leaving directory `/home/txia/frida/build/tmp-linux-i386/frida-gum'\nmake: *** [build/frida-linux-i386/lib/pkgconfig/frida-gum-1.0.pc] Error 2\n. oleavr,\nhere is what I did with a fresh clone:\n$make -f Makefile.sdk.mk FRIDA_HOST=linux-x86_64\n$make -f Makefile.toolchain.mk FRIDA_HOST=linux-x86_64\n$make -f Makefile.linux.mk python-64  PYTHON=/usr/bin/python2.7\nI am suprised that it is building with i386\n. i am using the lastest 4.0, everything is fine, thanks\n. ok, I am reading those code, and will make one when done.\n. ",
    "vikohone": "Thank you!\nYou were right, I was using an old version of Frida.\nI did install the newest one yesterday, but I must've failed somehow.\nMoving the old Frida away from /usr/local/bin/frida-ps and then sudoing the make command helped me.\nNow the Frida is at /usr/bin/frida-ps.\nCheers! \n. ",
    "bnovc": "You can see them now but you still can't change their implementation. \n\nOn Jun 9, 2015, at 4:42 PM, Ole Andr\u00e9 Vadla Ravn\u00e5s notifications@github.com wrote:\nClosed #37.\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "vah13": "ok, thank you\n. python process does not end for a long time\n. maybe inject code is not true?\n. Usage: frida-ps-script.py [options]\nfrida-ps-script.py: error: no such option: -l\n. it was my mistake). ",
    "hubert3": "I assume there's no change here and x86 isn't currently supported.\nI'd also love to use Genymotion (virtualbox/x86 based Android emulator) as it runs many times faster than ARM-based emulators for me.\nAny pointers for what needs to be implemented to make an x86 frida-server work?\nPS, I was super impressed that make server-android compiled arm & arm64 server binaries out of the box after git clone on the first try.\n. ",
    "haomnguyen": "I saw there's Frida for Android x86 in your latest release, is it a stable build?. I have the same problem when trying frida-trace on 4.2.2. ",
    "cse001": "We can find all the related frida-servers as well as other resources over here \nhttps://github.com/frida/frida/releases. ",
    "pavel-lazar": "I have attached after the write so hopefully gdb should not care. Any way, here is the original  disassembled function (taken from IDA):\n.text:00035C90 2D E9 F0 4F                 PUSH.W          {R4-R11,LR}\n.text:00035C94 CD B0                       SUB             SP, SP, #0x134\n.text:00035C96 90 46                       MOV             R8, R2\n.text:00035C98 DF F8 68 27                 LDR.W           R2, =(__stack_chk_guard_ptr - 0x48FD8)\n.text:00035C9C 0D 93                       STR             R3, [SP,#0x158+var_124]\n.text:00035C9E 05 46                       MOV             R5, R0\n.text:00035CA0 DF F8 64 37                 LDR.W           R3, =(GLOBAL_OFFSET_TABLE - 0x35CAC)\n.text:00035CA4 0E 46                       MOV             R6, R1\n.text:00035CA6 57 9F                       LDR             R7, [SP,#0x158+arg_4]\n.text:00035CA8 7B 44                       ADD             R3, PC ; GLOBAL_OFFSET_TABLE\n.text:00035CAA DF F8 60 07                 LDR.W           R0, =(aAndroid_dns_mo - 0x35CB4)\n.text:00035CAE 0C 97                       STR             R7, [SP,#0x158+var_128]\n.text:00035CB0 78 44                       ADD             R0, PC  ; \"ANDROID_DNS_MODE\"\n.text:00035CB2 9C 58                       LDR             R4, [R3,R2] ; __stack_chk_guard\n.text:00035CB4 23 68                       LDR             R3, [R4]\n.text:00035CB6 4B 93                       STR             R3, [SP,#0x158+var_2C]\n.text:00035CB8 F2 F7 D6 F9                 BL              getenv\nand here is the disassembled function after hooking it with frida and attaching with gdb:\nDump of assembler code from 0xb6e9ac91 to 0xb6e9accd:\n   0xb6e9ac91:  b5 01   push    {r0, r1, r2, r3, r4, r5, r6, r7, lr}\n   0xb6e9ac93:  48 00   ldr r0, [pc, #4]    ; (0xb6e9ac98)\n   0xb6e9ac95:  47 90   bx  r0\n   0xb6e9ac97:  46 05   mov r8, r2\n   0xb6e9ac99:  12 f2   asrs    r5, r0, #8\n   0xb6e9ac9b:  b6 0d           ;  instruction: 0xb6f2\n   0xb6e9ac9d:  93 05   str r3, [sp, #52]   ; 0x34\n   0xb6e9ac9f:  46 df   mov r5, r0\n   0xb6e9aca1:  f8 64 37 0e ldr.w   r3, [pc, #1892] ; 0xb6e9b408\n   0xb6e9aca5:  46 57   mov r6, r1\n   0xb6e9aca7:  9f 7b   ldr r7, [sp, #348]  ; 0x15c\n   0xb6e9aca9:  44 df   add r3, pc\n   0xb6e9acab:  f8 60 07 0c ldr.w   r0, [pc, #1888] ; 0xb6e9b40c\n   0xb6e9acaf:  97 78   str r7, [sp, #48]   ; 0x30\n   0xb6e9acb1:  44 9c   add r0, pc\n   0xb6e9acb3:  58 23   ldr r4, [r3, r2]\n   0xb6e9acb5:  68 4b   ldr r3, [r4, #0]\n   0xb6e9acb7:  93 f2   str r3, [sp, #300]  ; 0x12c\n   0xb6e9acb9:  f7 d6 f9 00 bl  0xb6e8d068\n   0xb6e9acbd:  21 20   movs    r1, #0\n   0xb6e9acbf:  22 0e   movs    r2, #32\n   0xb6e9acc1:  90 17   str r0, [sp, #56]   ; 0x38\n   0xb6e9acc3:  a8 ec   add r0, sp, #92 ; 0x5c\n   0xb6e9acc5:  f7 7c ea 00 blx 0xb6e871c0\n   0xb6e9acc9:  20 0f   movs    r0, #0\n   0xb6e9accb:  94 1f   str r4, [sp, #60]   ; 0x3c\nEnd of assembler dump.\nAnd the crash is always in 0x****0cb4.\n(I haven't noticed the strange instructions in c99 and c9b yesterday) \n. ",
    "radare": "Moved to https://github.com/frida/frida-node/issues/5\n. pr updated\n. Final builds are stripped by default, the way to disable strip is by editing all build/*.rc and change the  STRIP= line to be STRIP=echo\n. i can reproduce the same crash on kitkat and firefoxos\n. Sorry. Works fine in my android kitkat and also in fxos. It just crashes the app if this one is a fxos one. Works fine with the rest of processes. Will investigate on this to see if i can reproduce the crash in firefox for android\n\nOn 11 Jun 2015, at 15:32, marc1006 notifications@github.com wrote:\nVanilla Android 4.4.4 (Nexus 5)\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "s0be1t": "btw, the error message description i get is\n\"TypeError: cannont read property '0' of undefined\", meanwhile, signs is not an array? But even i send package_info.signatures directly, there is no neither payload or error field in message, i get a pure message like this:\n{u'type': u'send'}\nAny thought?\n. Thx! I'll wait for the new version.\n. ",
    "marc1006": "@s0be1t it should work fine now\njavascript\nDalvik.perform(function () {\n   ...\n   const sign = package_info.signatures.value[0];\n   ...\n});\n. Vanilla Android 4.4.4 (Nexus 5) but rooted.\n. ",
    "pandaiolo": "Side note: the frida-ps command is not triggering the segfault. The frida-server actually exits itself after 30seconds or so.\nOtherwise, I'll try to give you more info once I build from source, stay tuned\n. Ok, I'm not familiar with debugging android stuff (webdev here....)... I might be doing things wrong \nI used gdbserver pushed from android-ndk on the device, and arm-none-eabi-gdb on my mac to connect to remote debugging server\nI compiled using the following command : \nNDK_DEBUG=1 APP_OPTIM=debug ANDROID_NDK_ROOT=/Users/pandaiolo/ndk make server-android\nThen i pushed the binry on my device and launched it via gdbserver : \nshell@android:/data/local/tmp # ./gdbserver --debug :5039 ./frida-server-android\nThen I connected using gdb on my mac, here is the output : \n```\nacBook42:bin pandaiolo$ ./arm-none-eabi-gdb\nGNU gdb (GNU Tools for ARM Embedded Processors) 7.8.0.20150304-cvs\nCopyright (C) 2014 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"--host=x86_64-apple-darwin10 --target=arm-none-eabi\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\".\n(gdb) target remote :5039\nRemote debugging using :5039\nCannot access memory at address 0x0\n0xb0001000 in ?? ()\n(gdb) \n(gdb) c\nContinuing.\nProgram received signal SIGSEGV, Segmentation fault.\n0xb0004338 in ?? ()\n(gdb) \nContinuing.\nProgram received signal SIGCONT, Continued.\n0xb00010a4 in ?? ()\n(gdb) \nContinuing.\nProgram received signal SIGSEGV, Segmentation fault.\n0xb0004338 in ?? ()\n(gdb) \nContinuing.\nProgram terminated with signal SIGSEGV, Segmentation fault.\nThe program no longer exists.\n```\ngdbserver outputs some debug info which is the following :\n```\n|shell@android:/data/local/tmp # ./gdbserver --debug :5039 ./frida-server-and>\nnew_argv[0] = \"./frida-server-android\"\nProcess ./frida-server-android created; pid = 4712\nlinux_wait: [Process 4712]\nlinux_wait_for_lwp: \nmy_waitpid (-1, 0x40000000)\nblocking\nsigchld_handler\nmy_waitpid (-1, 0x1): status(57f), 4712\nGot an event from 4712 (57f)\nstop pc is b0001000\npc is 0xb0001000\nstop pc is 0xb0001000\nstop pc is b0001000\nlinux_wait_for_lwp: pc is 0xb0001000\nmy_waitpid (4713, 0x0)\nsigchld_handler\nmy_waitpid (4713, 0x0): status(137f), 4713\nmy_waitpid (4713, 0x0)\nsigchld_handler\nmy_waitpid (4713, 0x0): status(1057f), 4713\nmy_waitpid (4714, 0x0)\nmy_waitpid (4714, 0x0): status(137f), 4714\nmy_waitpid (4714, 0x0)\nsigchld_handler\nmy_waitpid (4714, 0x0): status(9), 4714\nmy_waitpid (4713, 0x0)\nsigchld_handler\nmy_waitpid (4713, 0x0): status(117f), 4713\nmy_waitpid (4713, 0x0)\nsigchld_handler\nmy_waitpid (4713, 0x0): status(9), 4713\nHit a non-gdbserver trap event.\nwait_for_sigstop: LWP 4712 already stopped\nChecking whether LWP 4712 needs to move out of the jump pad...no\nlinux_wait ret = LWP 4712.4712, 1, 5\nListening on port 5039\nhandling possible accept event\nRemote debugging from host 127.0.0.1\nlinux_async (0), previous=0\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nlinux_async (0), previous=0\nhandling possible serial event\nhandling possible serial event\nwait_for_sigstop: LWP 4712 already stopped\nChecking whether LWP 4712 needs to move out of the jump pad...no\nWriting resume reply for LWP 4712.4712:1\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nNeed step over [LWP 4712]? No\nstop pc is b0001000\npc is 0xb0001000\nNeed step over [LWP 4712]? No, no breakpoint found at 0xb0001000\nResuming, no pending status or step over needed\nresuming LWP 4712\nstop pc is b0001000\npc is 0xb0001000\nResuming lwp 4712 (continue, signal 0, stop not expected)\nstop pc is b0001000\n  resuming from pc 0xb0001000\nlinux_wait: []\nlinux_wait_for_lwp: \nmy_waitpid (-1, 0x40000000)\nblocking\nsigchld_handler\nmy_waitpid (-1, 0x1): status(b7f), 4712\nGot an event from 4712 (b7f)\nstop pc is b0004338\npc is 0xb0004338\nstop pc is 0xb0004338\nstop pc is b0004338\nlinux_wait_for_lwp: pc is 0xb0004338\nHit a non-gdbserver trap event.\nwait_for_sigstop: LWP 4712 already stopped\nChecking whether LWP 4712 needs to move out of the jump pad...no\nlinux_wait ret = LWP 4712.4712, 1, 11\nWriting resume reply for LWP 4712.4712:1\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nNeed step over [LWP 4712]? No\nstop pc is b0004338\npc is 0xb0004338\nNeed step over [LWP 4712]? No, no breakpoint found at 0xb0004338\nResuming, no pending status or step over needed\nresuming LWP 4712\nstop pc is b0004338\npc is 0xb0004338\nResuming lwp 4712 (continue, signal 11, stop not expected)\nstop pc is b0004338\n  resuming from pc 0xb0004338\nlinux_wait: []\nlinux_wait_for_lwp: \nmy_waitpid (-1, 0x40000000)\nblocking\nsigchld_handler\nmy_waitpid (-1, 0x1): status(127f), 4712\nGot an event from 4712 (127f)\nstop pc is b00010a4\npc is 0xb00010a4\nstop pc is 0xb00010a4\nstop pc is b00010a4\nlinux_wait_for_lwp: pc is 0xb00010a4\nHit a non-gdbserver trap event.\nwait_for_sigstop: LWP 4712 already stopped\nChecking whether LWP 4712 needs to move out of the jump pad...no\nlinux_wait ret = LWP 4712.4712, 1, 19\nWriting resume reply for LWP 4712.4712:1\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nNeed step over [LWP 4712]? No\nstop pc is b00010a4\npc is 0xb00010a4\nNeed step over [LWP 4712]? No, no breakpoint found at 0xb00010a4\nResuming, no pending status or step over needed\nresuming LWP 4712\nstop pc is b00010a4\npc is 0xb00010a4\nResuming lwp 4712 (continue, signal 18, stop not expected)\nstop pc is b00010a4\n  resuming from pc 0xb00010a4\nlinux_wait: []\nlinux_wait_for_lwp: \nmy_waitpid (-1, 0x40000000)\nblocking\nsigchld_handler\nmy_waitpid (-1, 0x1): status(b7f), 4712\nGot an event from 4712 (b7f)\nstop pc is b0004338\npc is 0xb0004338\nstop pc is 0xb0004338\nstop pc is b0004338\nlinux_wait_for_lwp: pc is 0xb0004338\nHit a non-gdbserver trap event.\nwait_for_sigstop: LWP 4712 already stopped\nChecking whether LWP 4712 needs to move out of the jump pad...no\nlinux_wait ret = LWP 4712.4712, 1, 11\nWriting resume reply for LWP 4712.4712:1\nhandling possible serial event\nhandling possible serial event\nhandling possible serial event\nNeed step over [LWP 4712]? No\nstop pc is b0004338\npc is 0xb0004338\nNeed step over [LWP 4712]? No, no breakpoint found at 0xb0004338\nResuming, no pending status or step over needed\nresuming LWP 4712\nstop pc is b0004338\npc is 0xb0004338\nResuming lwp 4712 (continue, signal 11, stop not expected)\nstop pc is b0004338\n  resuming from pc 0xb0004338\nlinux_wait: []\nlinux_wait_for_lwp: \nmy_waitpid (-1, 0x40000000)\nblocking\nsigchld_handler\nmy_waitpid (-1, 0x1): status(b), 4712\nGot an event from 4712 (b)\nLWP 4712 exiting\nLWP 4712 is last lwp of process\nChild terminated with signal = b \nChild terminated with signal = 0xb (SIGSEGV)\nWriting resume reply for LWP 4712.4712:2\nGDBserver exiting\n```\nAnything helpfull ? Should I change something in the build process, or in the debug process ?\nThanks\n. ",
    "StefaanSeys": "Same problem for me. I created a tiny HelloWorld Android App and when I attach to it, the app instantly crashes, the same for a couple of other Apps from the store.\nThe server does not output anything and keeps running...\nThis is the output of the python script:\n```\nPython 2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n\n\nimport frida\nsession = frida.get_remote_device().attach(\"org.proxydroid\")\nTraceback (most recent call last):\n  File \"\", line 1, in \n  File \"/usr/local/lib/python2.7/dist-packages/frida-4.2.6-py2.7-linux-x86_64.egg/frida/core.py\", line 73, in attach\nfrida.TransportError: unexpectedly timed out while waiting for FIFO to establish\n```\n\n\n\nSoftware versions:\nfrida-server 4.2.6 (binary from build.frida.re)\nhost: cyanogenmod 10.2.1 (Android 4.3.1) on Galaxy S4\n. Yes, I have seen that. That is why I have tried what you did: \nvar pwd = Java.cast(this.val$pwd1.value, EditText);\nwhich does not give an error, but then, when I want to use the object in\npwd.getText()\nI get this access violation error..... @muhzii I read the issue  you mentioned, but I do not think it is related. Issue 29 is about early instrumentation, while I am hooking an \"onClick\" and the hook is triggered the moment I click the button.  . Weirdly enough, they all work!\nI tried \n- toString() -> works\n- getDefaultEditable() -> works\n- getAccessibilityClassName() -> works\nBut getText() results in the access violation error.\nAny ideas?\nStefaan. I tried a different phone, and same result.\nOS's tried: \n- 7.1.2 (lineage)\n- 6.0.1 (Nexus 5 latest official update). Yes indeed, that fixes the issue!. ",
    "vtky": "Hey,\nI'm also getting the same issue. \"Failed to attach: unexpectedly timed out while waiting for FIFO to establish\"\nI'm attaching to com.android.chrome. Application crashes if I try to run frida-trace or frida-discover.\nFrida Server 4.3.6\nNexus 5 Android v5.0.1\n. Hey Oleavr,\nI'm using the following entitlements.plist. (Strings removed for privacy)\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n    <key>application-identifier</key>\n    <string></string>\n    <key>com.apple.developer.team-identifier</key>\n    <string></string>\n    <key>get-task-allow</key>\n    <true/>\n    <key>keychain-access-groups</key>\n    <array>\n        <string></string>\n    </array>\n</dict>\n</plist>\nApplication was started using ios-deploy.\nThe functions that I'm targeting are:\n- SSLSetSessionOption\n- SSLHandshake\n- SSLCreateContext\nRunning frida-trace works fine, however intercepting and replacing the methods does not.\n. Oh and I have just double checked, hooking those functions with Substrate does not work as well. I'm thinking it has something to do with unsigned code. However I have codesigned everything.\nThis is a snippet of my shell script\ncodesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE/$APP_NAME\n    codesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE/embedded.mobileprovision\n    codesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE/CydiaSubstrate\n    codesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE/FridaGadget.dylib\n    codesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE/$dyldme_NAME.dylib\n    codesign -fs \"$CODESIGN\" --entitlements entitlements.plist $APP_FILE\n. @v4if update your frida to ensure that the frida and frida-server version matches\n. ",
    "in7egral": "Thank you, oleavr! This is a great explanation of my mistake! But anyway there is a problem with exception handling while I use \"-f\" parameter (in the second example exception of incorrect function usage caught). What's the difference between the modes?\n. I fixed one of the issues by adding include path $(SolutionDir)frida-core\\lib\\interfaces to the frida-agent-32/64 projects.\n. I removed all git repo and reupload it again from github with version 4.2.9. And building was completed successfully:\n========== Build: 8 succeeded, 0 failed, 15 up-to-date, 0 skipped ==========\n. Is your phone connected with USB to MAC? Also login via SSH and check that frida-server is running.... @ooszero it depends on your dropbear configuration. If it listen 0.0.0.0 (or more safe 129.168.0.0 or 10.0.0.0 depending on your WiFi network settings) instead of 127.0.0.1 - you can connect to your iDevice via SSH by IP, without using usbmux.USBMux. In this case, frida has special option -H:\n-H HOST, --host=HOST  connect to remote frida-server on HOST\nFor example (iPhone/iPad/iPod has WiFi IP 192.168.1.50):\nfrida-ps -H 192.168.1.50\nThe most common reason of 'Waiting for USB device to appear...' - frida-server is not runned/installed on device.. Answered in #582 to your question. server side:\n/usr/bin/frida-server -l 192.168.1.4\nclient side:\nfrida-ps -H 192.168.1.4\nJust tried with latest frida 12.1.0 and everything works fine.. You can check launchd plist that starts frida and change command line /usr/bin/frida-server with specifying IP. If you don't care about security (but change password from alpine to something strong!) you can just leave /usr/bin/frida-server -l 0.0.0.0.\nStep by step guide.\n\n\nLocate file re.frida.server.plist  (it's not bplist, just simple xml)\n\n\nEdit it:\n\n\nFrom:\n<key>Program</key>\n    <string>/usr/sbin/frida-server</string>\n    <key>ProgramArguments</key>\n    <array>\n        <string>/usr/sbin/frida-server</string>\n    </array>\nTo:\n<key>Program</key>\n    <string>/usr/sbin/frida-server</string>\n    <key>ProgramArguments</key>\n    <array>\n        <string>/usr/sbin/frida-server -l 192.168.1.4</string>\n    </array>\n\nReboot device and activate your jb. Have no idea why this happens (it maybe be due to services startup sequence). But at least you can run it manually and this works.\n\nP.S. It doesn't matter where frida-server is located - /usr/sbin or /usr/bin. But avoid to use '/var/' or '/tmp/' and all sub catalogs (due to sandbox policies).. You said you have Frida version 10.7.7 installed on MAC and version 12.0.8 installed on iOS 11.\n10.7.7 is not equal to 12.0.8, so you get error:\nplease ensure that major versions match\nYou can install frida 12.0.8 on MAC and this error will disappear.. ",
    "AlexeyPerevalov": "Hello, thank you for response,\nI removed both easy_install'ed ) and Cydia's, and got build,\n\nbtw,\nI had another iOS toolchain, and prehardcoded value bitten me\n-    ios_sdkver=\"8.4\"\n-    ios_sdkver=\"8.1\"\nI don't know is it worth to detect it in runtime ;)\n\nI copied whole build/frida-ios-arm into /root at iPhone, added it into PATH and LD_LIBRARY_PATH\nand started frida-server,\non client I checked frida-ps -U - it worked well,\nbut I had the same problem with frida-trace -U process_Name,\nMaybe it's permission or some missed python package. I don't know frida's internals well to localise problem.\n. Hello, yes I have still such problem even after total rebuild. I'll figure out, maybe I'll add traces into frida-server, but now I don't have time ;)\n. yes, process to attach crashed, but frida-server didn't\n. ",
    "maycon": "I think you forgot to close a parenteses.\nInterceptor.attach(Module.findExportByName(null,\"getDeviceId\",{\n    onEnter:function() {\n        send(\"Injecting IMEI\");\n    }\n}));\nOn Wed, 26 Apr 2017 at 06:54 Jessie9122 notifications@github.com wrote:\n\nHello,\nI installed a frida on android arm-64 device and the client is install by\neasy_install on Linux x86_64, version is 9.1.27\n`from future import print_function\nimport frida\nimport sys\nsession=frida.get_usb_device().attach(\"com.abc\")\nhookcode=\"\"\"\nInterceptor.attach(Module.findExportByName(null,\"getDeviceId\",{\nonEnter:function() {\nsend(\"Injecting IMEI\");\n}\n});\n\"\"\"\nscript=session.create_script(hookcode)\ndef on_message(message,data):\nprint(message)\nscript.on('message',on_message)\nscript.load()\nsys.stdin.read()`\nafter excute the python script , we get an error information:\nuser@ubuntu:~/frida/script$ python imei.py Traceback (most recent call\nlast): File \"imei.py\", line 14, in \nscript=session.create_script(hookcode) File\n\"/usr/local/lib/python2.7/dist-packages/frida/core.py\", line 182, in\ncreate_script return Script(self._impl.create_script(args, *kwargs))\nfrida.TransportError: gDBus.Error:re.frida.Error.InvalidArgument:\nScript(line 6): SyntaxError: parse error\nI want to know if my argument is correct or if it is the bug of the tool\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/57#issuecomment-297326965, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AWT2f1yCHXgaBzcAW82R8LBmjpNfxJrBks5rzxRLgaJpZM4FRoZR\n.\n-- \n\n\nMaycon Vitali, BSc, MSc, OSCE, eMAPT\nSecurity Researcher, Hack N' Roll\nHack N' Roll | SECURITY AS A LIFE STYLE\nwww.hacknroll.com\n. FYI\n{18:50} [maycon@darkstar ~/Research/Android/Tools]\n$> adb devices -l\nList of devices attached\n4d0541327b0b5000       device usb:3-1 product:logandsdtvvj model:GT_S7273T device:logandsdtv. Hello @max01203,\nThank you for your response. I appreciate your support.\n(Un)Fortunately, after update to the last version the issue is gone. I'd be happy to close the issue, if you agreee. Otherwise I can rollback the version to try isolate the issue and provide more details.\n{21:46} [maycon@darkstar ~/Research/Android/Tools/frida-server]\n$> adb shell su -c '/data/local/tmp/frida-server-9.1.23-android-arm'\n```\n{21:47} [maycon@darkstar ~]\n$> frida-ps -U | head -n 10\n PID  Name\n\n2892  adbd\n2072  android.process.acore\n1966  android.process.media\n1419  auditd\n1434  bkmgrd\n2591  com.android.calendar\n2611  com.android.cellbroadcastreceiver\n2379  com.android.deskclock\n```\n. ",
    "ghost": "I can't find the header file even in the repo ('frida-core.h').\n. I installed every version of Python and followed the guide exactly. I'll try again.\n. @oleavr  I have same this problem\nI did  step by step of android example (https://www.frida.re/docs/examples/android/) and got a error.\n```\nTraceback (most recent call last):\n  File \"D:/source/App/test.py\", line 58, in \n    session = frida.get_usb_device().attach(\"com.example.seccon2015.rock_paper_scissors\")\n  File \"C:\\python32\\python-2.7.10\\lib\\site-packages\\frida\\core.py\", line 97, in attach\n    return Session(self._impl.attach(self._pid_of(target)))\nfrida.TransportError: timeout was reached\nProcess finished with exit code 1\n```\n+ When I use debug then I saw a process of example app\n\nDevice Info:\n+frida-server-10.6.37-android-x86.xz\n+Bluestack\n +Android version 4.4\n+Win 10. @oleavr . Please check example again(https://www.frida.re/docs/examples/android/)). I had tested with genymotion emulator(samsung galaxy S5 -4.4.4) and got crash when click button R\nThanks. Hi all.\nI have same issue on this emulator\nhttp://www.mediafire.com/file/chzx2cymbvyj5l6/BlueStacks+App+Player+0.9.24.5311+Superuser+BSEasy+-+bo+2.msi\n. hi @oleavr Do you know which emulator working well with frida?\nThanks. I've updated everything to the newest release.  It looks like Java.use() is taking a shit.\n```javascript\nJava.perform(function () {\n    var Activity = Java.use(\"android.app.Activity\");\n});\nbash\n{u'columnNumber': 1, u'description': u'TypeError: not configurable', u'fileName': u'frida/node_modules/frida-java/lib/class-factory.js', u'lineNumber': 290, u'type': u'error', u'stack': u'TypeError: not configurable\\n    at ensureClass (frida/node_modules/frida-java/lib/class-factory.js:290)\\n    at ensureClass (frida/node_modules/frida-java/lib/class-factory.js:268)\\n    at frida/node_modules/frida-java/lib/class-factory.js:115\\n    at frida/node_modules/frida-java/index.js:193\\n    at frida/node_modules/frida-java/lib/vm.js:35\\n    at java.js:1231\\n    at script1.js:24'}\n```. Thanks @oleavr I figured it had to do with the JS runtime changes.  . Get latest binaries: https://github.com/frida/frida/releases\nBTW. good place to ask is going to frida channel on https://webchat.freenode.net/. I was test with last version 10.3.0. It's occur this error. I also having the same problem. @oleavr\nI tried with genymotion and got crash when click button R\nHere logcat of other emulator (Bluestack). Please check log\nThanks.\n--------- beginning of /dev/log/main\nD/dalvikvm( 3123): GC_CONCURRENT freed 664K, 25% free 2682K/3536K, paused 0ms+0ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/su      ( 3974): su invoked.\nD/su      ( 3974): starting daemon client 2000 0\nD/su      ( 3977): remote pid: 3974\nD/su      ( 3977): remote pts_slave: /dev/pts/5\nD/su      ( 3977): waiting for child exit\nD/su      ( 3979): daemon: stdin using PTY\nD/su      ( 3979): daemon: stdout using PTY\nD/su      ( 3979): daemon: stderr using PTY\nD/su      ( 3980): su invoked.\nD/su      ( 3980): Allowing shell.\nD/su      ( 3980): 2000 /system/bin/sh executing 0 /data/local/tmp/frida-server & using binary /system/bin/sh : sh -c /data/local/tmp/frida-server &\nD/su      ( 3977): sending code\nD/su      ( 3977): child exited\n--------- beginning of /dev/log/system\nW/ActivityManager( 2955): Unable to start service Intent { act=com.google.android.gms.droidguard.service.START pkg=com.google.android.gms } U=0: not found\nE/GmsClient( 3223): unable to connect to service: com.google.android.gms.droidguard.service.START\nW/ActivityManager( 2955): Unbind failed: could not find connection for android.os.BinderProxy@330edddc\nW/GLSUser ( 3223): [AppCertManager] IOException while requesting key:\nW/GLSUser ( 3223): java.io.IOException: Invalid device key response.\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:303)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:134)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.b.a(SourceFile:43)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.b.a(SourceFile:62)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:120)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:61)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.cron.AuthCronService.a(SourceFile:44)\nW/GLSUser ( 3223):      at com.google.android.gms.gcm.ar.run(SourceFile:131)\nD/dalvikvm( 3123): GC_CONCURRENT freed 664K, 25% free 2682K/3536K, paused 0ms+0ms, total 0ms\nD/dalvikvm( 3123): GC_CONCURRENT freed 600K, 23% free 2746K/3536K, paused 10ms+0ms, total 20ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 664K, 25% free 2682K/3532K, paused 0ms, total 0ms\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nI/ActivityManager( 2955): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.seccon2015.rock_paper_scissors/.MainActivity} from pid 3171\nD/ActivityManager( 2955): TopActivityInfo, pkgName: com.example.seccon2015.rock_paper_scissors activityName: com.example.seccon2015.rock_paper_scissors.MainActivitycallingPackage: com.cyanogenmod.trebuchet  bstSpecialAppKeyboardHandlingEnabled = false\nD/ActivityManager( 2955): Showing guidance for pkgName: com.example.seccon2015.rock_paper_scissors\nD/GuidanceScreen( 3146): event === app_launch\nD/GuidanceScreen( 3146): hiding guidance\nD/GuidanceScreen( 3146): hardKeyboard = 1\nD/GuidanceScreen( 3146): controllerType === Keyboard\nD/GuidanceScreen( 3146): appName: rock_paper_scissors, currentPkg: com.example.seccon2015.rock_paper_scissors, event: app_launch, controller: Keyboard\nD/GuidanceScreen( 3146): appName: rock_paper_scissors\nD/audio_hw_primary(  586): found out /dev/snd/pcmC0D0p\nI/PGA     ( 2955): Attempting to create new SOCKET connectionn pid = 2955, tid = 3168\nI/PGA     ( 2955): New SOCKET connection: system_server (pid 2955, tid 3168)\nW/PGA     ( 2940): tid 2940: eglCreateSyncKHR: NOT IMPLEMENTED\nD/dalvikvm( 2955): GC_FOR_ALLOC freed 895K, 22% free 5422K/6936K, paused 10ms, total 10ms\nD/GuidanceScreen( 3146): no guidance for com.example.seccon2015.rock_paper_scissors.\nW/audio_hw_primary(  586): out_write() limiting sleep time 112539 to 46439\nI/ActivityManager( 2955): Start proc com.example.seccon2015.rock_paper_scissors for activity com.example.seccon2015.rock_paper_scissors/.MainActivity: pid=3990 uid=10053 gids={50053}\nD/WindowManager( 2955): in computeScreenConfigurationLocked() -- hardKeyboardAvailable :true  mHardKeyboardAvailable :true   mHardKeyboardEnabled :true\nD/dalvikvm( 3990): Trying to load lib /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88\nD/dalvikvm( 3990): Added shared lib /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88\nD/dalvikvm( 3990): No JNI_OnLoad found in /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88, skipping init\nD/WindowManager( 2955): Sending appClickStats request with data: [package=com.example.seccon2015.rock_paper_scissors, appname=rock_paper_scissors, appver=1.0, clickloc=system_server]\nD/InputMethodManagerService( 2955): ime_enabled = false is same as last value, no change\nW/audio_hw_primary(  586): out_write() limiting sleep time 65759 to 46439\nI/PGA     ( 3990): Attempting to create new SOCKET connectionn pid = 3990, tid = 3990\nI/PGA     ( 3990): New SOCKET connection: com.example.seccon2015.rock_paper_scissors (pid 3990, tid 3990)\nI/ActivityManager( 2955): Displayed com.example.seccon2015.rock_paper_scissors/.MainActivity: +170ms\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/dalvikvm( 3990): VM aborting\nF/libc    ( 3990): Fatal signal 6 (SIGABRT) at 0x00000f96 (code=-6), thread 3990 (_paper_scissors)\nD/audio_hw_primary(  586): found out /dev/snd/pcmC0D0p\nW/audio_hw_primary(  586): out_write() limiting sleep time 112539 to 46439\nW/audio_hw_primary(  586): out_write() limiting sleep time 65759 to 46439\nI/DEBUG   (  574): pid: 3990, tid: 3990, pkg name: com.example.seccon2015.rock_paper_scissors\nI/DEBUG   (  574):                \nI/DEBUG   (  574): Build fingerprint: 'samsung/kltexx/klte:4.4.2/KOT49H/G900FXXU1ANCE:user/release-keys'\nI/DEBUG   (  574): Revision: '0'\nI/DEBUG   (  574): pid: 3990, tid: 3990, name: _paper_scissors  >>> com.example.seccon2015.rock_paper_scissors <<<\nI/DEBUG   (  574): signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\nW/NativeCrashListener( 2955): Couldn't find ProcessRecord for pid 1885955130\nI/DEBUG   (  574):     eax 00000000  ebx 00000f96  ecx 00000f96  edx 00000006\nI/DEBUG   (  574): AM write failure (32 / Broken pipe)\nI/DEBUG   (  574):     esi 00000f96  edi 0000000b\nI/DEBUG   (  574):     xcs 00000073  xds 0000007b  xes 0000007b  xfs 00000000  xss 0000007b\nI/DEBUG   (  574):     eip 77673e96  ebp 776d8ce0  esp 7fc4ba94  flags 00210207\nI/DEBUG   (  574):\nI/DEBUG   (  574): backtrace:\nI/DEBUG   (  574):     #00  pc 0003be96  /system/lib/libc.so (tgkill+22)\nI/DEBUG   (  574):     #01  pc 00000005  \nI/DEBUG   (  574):\nI/DEBUG   (  574): stack:\nI/DEBUG   (  574):          7fc4ba54  00000000\nI/DEBUG   (  574):          7fc4ba58  00000000\nI/DEBUG   (  574):          7fc4ba5c  00000000\nI/DEBUG   (  574):          7fc4ba60  00000000\nI/DEBUG   (  574):          7fc4ba64  00000000\nI/DEBUG   (  574):          7fc4ba68  00000000\nI/DEBUG   (  574):          7fc4ba6c  00000000\nI/DEBUG   (  574):          7fc4ba70  00000000\nI/DEBUG   (  574):          7fc4ba74  00000000\nI/DEBUG   (  574):          7fc4ba78  00000000\nI/DEBUG   (  574):          7fc4ba7c  00000000\nI/DEBUG   (  574):          7fc4ba80  7767df66  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4ba84  00000000\nI/DEBUG   (  574):          7fc4ba88  00000000\nI/DEBUG   (  574):          7fc4ba8c  77645dd9  /system/lib/libc.so (pthread_mutex_lock+9)\nI/DEBUG   (  574):          7fc4ba90  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):     #00  7fc4ba94  00000006\nI/DEBUG   (  574):          7fc4ba98  00000f96\nI/DEBUG   (  574):          7fc4ba9c  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4baa0  77650636  /system/lib/libc.so (pthread_kill+102)\nI/DEBUG   (  574):          7fc4baa4  00000f96\nI/DEBUG   (  574):          7fc4baa8  00000f96\nI/DEBUG   (  574):          7fc4baac  00000006\nI/DEBUG   (  574):          7fc4bab0  00000000\nI/DEBUG   (  574):          7fc4bab4  776d4268  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4bab8  7fc4bc68  [stack]\nI/DEBUG   (  574):          7fc4babc  776505d9  /system/lib/libc.so (pthread_kill+9)\nI/DEBUG   (  574):          7fc4bac0  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4bac4  7fc4bb10  [stack]\nI/DEBUG   (  574):          7fc4bac8  7fc4bd50  [stack]\nI/DEBUG   (  574):          7fc4bacc  7fc4bd78  [stack]\nI/DEBUG   (  574):          7fc4bad0  776509fc  /system/lib/libc.so (raise+44)\nD/BstCommandProcessor-Application( 3132): Application crash has been observed.\nD/BstCommandProcessor-Application( 3132): in sendHttpRequest, request to send to (fqdn): http://10.0.2.2:2861/AppCrashedInfo\nD/BstCommandProcessor-Application( 3132): data: {\"packageName\":\"com.example.seccon2015.rock_paper_scissors\",\"shortPackageName\":\"com.example.seccon2015.rock_paper_scissors\",\"versionCode\":1,\"versionName\":\"1.0\"}\nW/ActivityThread( 3132): ClassLoader.loadClass: The class loader returned by Thread.getContextClassLoader() may fail for processes that host multiple applications. You should explicitly specify a context class loader. For example: Thread.setContextClassLoader(getClass().getClassLoader());\nI/BootReceiver( 2955): Copying /data/tombstones/tombstone_04 to DropBox (SYSTEM_TOMBSTONE)\nI/ActivityManager( 2955): Process com.example.seccon2015.rock_paper_scissors (pid 3990) has died.\nW/ActivityManager( 2955): Force removing ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}: app died, no saved state\nW/InputDispatcher( 2955): channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\nE/InputDispatcher( 2955): channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!\nD/Zygote  ( 2941): Process 3990 terminated by signal (6)\nW/InputDispatcher( 2955): Attempted to unregister already unregistered input channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)'\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5 f}}\nD/ActivityManager( 2955): TopActivityInfo, pkgName: com.cyanogenmod.trebuchet activityName: com.cyanogenmod.trebuchet/com.android.launcher3.LaunchercallingPackage:   bstSpecialAppKeyboardHandlingEnabled = false\nI/WindowState( 2955): WIN DEATH: Window{3307d504 u0 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity}\nD/ActivityManager( 2955): Showing guidance for pkgName: com.cyanogenmod.trebuchet\nD/GuidanceScreen( 3146): event === app_launch\nD/GuidanceScreen( 3146): hiding guidance\nD/GuidanceScreen( 3146): hardKeyboard = 1\nD/GuidanceScreen( 3146): controllerType === Keyboard\nD/GuidanceScreen( 3146): appName: Trebuchet, currentPkg: com.cyanogenmod.trebuchet, event: app_launch, controller: Keyboard\nW/SurfaceFlinger( 2940): couldn't log to binary event log: overflow.\nD/GuidanceScreen( 3146): appName: Trebuchet\nD/WindowManager( 2955): in computeScreenConfigurationLocked() -- hardKeyboardAvailable :true  mHardKeyboardAvailable :true   mHardKeyboardEnabled :true\nD/GuidanceScreen( 3146): no guidance for com.cyanogenmod.trebuchet.\nD/InputMethodManagerService( 2955): ime_enabled = false is same as last value, no change\nW/InputMethodManagerService( 2955): Got RemoteException sending setActive(false) notification to pid 3990 uid 10053\nW/Binder  ( 3052): Caught a RuntimeException from the binder stub implementation.\nW/Binder  ( 3052): java.lang.NullPointerException\nW/Binder  ( 3052):      at android.inputmethodservice.IInputMethodWrapper.setSessionEnabled(IInputMethodWrapper.java:280)\nW/Binder  ( 3052):      at com.android.internal.view.IInputMethod$Stub.onTransact(IInputMethod.java:129)\nW/Binder  ( 3052):      at android.os.Binder.execTransact(Binder.java:404)\nW/Binder  ( 3052):      at dalvik.system.NativeStart.run(Native Method)\nI/ActivityManager( 2955): Setting mBooting value to false, currently mBooted = true\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{330e3e64 ActivityRecord{330e3d28 u0 com.cyanogenmod.trebuchet/com.android.launcher3.Launcher t1}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{330e3e64 ActivityRecord{330e3d28 u0 com.cyanogenmod.trebuchet/com.android.launcher3.Launcher t1}}\nD/dalvikvm( 3123): GC_CONCURRENT freed 663K, 25% free 2682K/3532K, paused 0ms+0ms, total 10ms\nD/dalvikvm( 3123): GC_CONCURRENT freed 617K, 24% free 2699K/3516K, paused 10ms+0ms, total 20ms\nW/ActivityManager( 2955): Unable to start service Intent { act=com.google.android.gms.droidguard.service.START pkg=com.google.android.gms } U=0: not found\nE/GmsClient( 3223): unable to connect to service: com.google.android.gms.droidguard.service.START\nW/ActivityManager( 2955): Unbind failed: could not find connection for android.os.BinderProxy@33126a50\nD/dalvikvm( 3223): GC_CONCURRENT freed 1074K, 23% free 3821K/4928K, paused 10ms+0ms, total 30ms\nW/GLSUser ( 3223): [AppCertManager] IOException while requesting key:\nW/GLSUser ( 3223): java.io.IOException: Invalid device key response.\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:303)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:134)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.b.a(SourceFile:43)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.b.a(SourceFile:62)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:120)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:61)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.cron.AuthCronService.a(SourceFile:44)\nW/GLSUser ( 3223):      at com.google.android.gms.gcm.ar.run(SourceFile:131)\nD/dalvikvm( 3123): GC_CONCURRENT freed 619K, 23% free 2709K/3516K, paused 10ms+0ms, total 20ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/dalvikvm( 3132): GC_CONCURRENT freed 1267K, 21% free 5153K/6456K, paused 10ms+0ms, total 30ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 586K, 24% free 2690K/3508K, paused 10ms, total 10ms\nD/dalvikvm( 3788): GC_CONCURRENT freed 698K, 22% free 2845K/3608K, paused 0ms+0ms, total 10ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 598K, 24% free 2691K/3508K, paused 10ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nW/BstCommandProcessor-httpd( 3132): Reached maxLineLength limit while reading the content of a file\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1351K, 24% free 5151K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1186K, 24% free 5151K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1141K, 24% free 5156K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1117K, 24% free 5152K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1100K, 24% free 5161K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1114K, 24% free 5163K/6752K, paused 10ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}. Hello, @Disane \nwhich emulator did you use ?. I have the same behaviour on Mac Os X 10.12.6. I use the android emulator shipped with android studio and Android 6.0 with x86 CPU. The app crashes both using the onResume hooking and also if I try to enumerates all objects of a certain instance on the heap, using the script:\nconsole.log(\"Script loaded successfully \");\nJava.perform(function () {\n        Java.choose(\"com.opera.install.ConfReader\",{\n          onMatch: function (instance) {\n                    console.log(\"\"+instance);\n                 }\n        ,\n        onComplete: function () {\n                 }\n        }\n        );\n}); \nThe server version of frida is frida-server-10.6.21-android-x86.\nThe app that I am trying to hook is a really simple malware that does not have obfuscation or anti-debugger capabilities:\nhttps://koodous.com/apks/58687779d3d4455e0e0e3b5ed849b4bcd10d2909a01172e4b3981ba30fb66719/analysis\nI tried several version of frida server, and using frida-server-10.6.21-arm with the emulation of android kitkat 4.4 arm, the hooks work even if in a really unreliable way. A lot of crashes. \nThe enumeration of objects on the heap does not give any output even on kitkat 4.4 arm.. @oleavr  I have same this problem\nI did  step by step of android example (https://www.frida.re/docs/examples/android/) and got a error.\n```\nTraceback (most recent call last):\n  File \"D:/source/App/test.py\", line 58, in \n    session = frida.get_usb_device().attach(\"com.example.seccon2015.rock_paper_scissors\")\n  File \"C:\\python32\\python-2.7.10\\lib\\site-packages\\frida\\core.py\", line 97, in attach\n    return Session(self._impl.attach(self._pid_of(target)))\nfrida.TransportError: timeout was reached\nProcess finished with exit code 1\n```\n+ When I use debug then I saw a process of example app\n\nDevice Info:\n+frida-server-10.6.37-android-x86.xz\n+Bluestack\n +Android version 4.4\n+Win 10. @oleavr \nApp has stopped when user click button R: (The func MainActivity.onClick.implementation.xxx have issue on emulator.\nHere code:\n```\nimport frida, sys\ndef on_message(message, data):\n    if message['type'] == 'send':\n        print(\"[*] {0}\".format(message['payload']))\n    else:\n        print(message)\njscode = \"\"\"\nconsole.log('Done:');\nJava.perform(function () {\n    console.log('Done: 111');\n    // Function to hook is defined here\n    var MainActivity = Java.use('com.example.seccon2015.rock_paper_scissors.MainActivity');\n    console.log(MainActivity);\n    // Whenever button is clicked\n    MainActivity.onClick.implementation = function (v) {\n        // Show a message to know that the function got called\n        console.log(v);\n        send('onClick');\n    // Call the original onClick handler\n    this.onClick(v);\n\n    // Set our values after running the original onClick handler\n    this.m.value = 0;\n    this.n.value = 1;\n    this.cnt.value = 999;\n\n    // Log to the console that it's done, and we should have the flag!\n    console.log('Done:' + JSON.stringify(this.cnt));\n};\n\n});\n\"\"\"\n\ndevice = frida.get_usb_device()\nprocess = device.attach('com.example.seccon2015.rock_paper_scissors')\nscript = process.create_script(jscode)\nscript.on('message', on_message)\nprint('[*] Running CTF')\nscript.load()\nsys.stdin.read()\n```\noutput:\n[*] Running CTF\nDone:\nDone: 111\n<com.example.seccon2015.rock_paper_scissors.MainActivity>\nDevice Info:\n+frida-server-10.6.39-android-x86\n+Bluestack\n+Android version 4.4\n+Win 10. @oleavr Can you suggest for me an emulator compatible?\n+ Bluestack and Memu emulator can be compatible?\nThanks. @oleavr \nI tried with genymotion and got crash when click button R\nHere logcat of other emulator (Bluestack). Please check log\nThanks.\n--------- beginning of /dev/log/main\nD/dalvikvm( 3123): GC_CONCURRENT freed 664K, 25% free 2682K/3536K, paused 0ms+0ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/su      ( 3974): su invoked.\nD/su      ( 3974): starting daemon client 2000 0\nD/su      ( 3977): remote pid: 3974\nD/su      ( 3977): remote pts_slave: /dev/pts/5\nD/su      ( 3977): waiting for child exit\nD/su      ( 3979): daemon: stdin using PTY\nD/su      ( 3979): daemon: stdout using PTY\nD/su      ( 3979): daemon: stderr using PTY\nD/su      ( 3980): su invoked.\nD/su      ( 3980): Allowing shell.\nD/su      ( 3980): 2000 /system/bin/sh executing 0 /data/local/tmp/frida-server & using binary /system/bin/sh : sh -c /data/local/tmp/frida-server &\nD/su      ( 3977): sending code\nD/su      ( 3977): child exited\n--------- beginning of /dev/log/system\nW/ActivityManager( 2955): Unable to start service Intent { act=com.google.android.gms.droidguard.service.START pkg=com.google.android.gms } U=0: not found\nE/GmsClient( 3223): unable to connect to service: com.google.android.gms.droidguard.service.START\nW/ActivityManager( 2955): Unbind failed: could not find connection for android.os.BinderProxy@330edddc\nW/GLSUser ( 3223): [AppCertManager] IOException while requesting key:\nW/GLSUser ( 3223): java.io.IOException: Invalid device key response.\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:303)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:134)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.b.a(SourceFile:43)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.b.a(SourceFile:62)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:120)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:61)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.cron.AuthCronService.a(SourceFile:44)\nW/GLSUser ( 3223):      at com.google.android.gms.gcm.ar.run(SourceFile:131)\nD/dalvikvm( 3123): GC_CONCURRENT freed 664K, 25% free 2682K/3536K, paused 0ms+0ms, total 0ms\nD/dalvikvm( 3123): GC_CONCURRENT freed 600K, 23% free 2746K/3536K, paused 10ms+0ms, total 20ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 664K, 25% free 2682K/3532K, paused 0ms, total 0ms\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nI/ActivityManager( 2955): START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.seccon2015.rock_paper_scissors/.MainActivity} from pid 3171\nD/ActivityManager( 2955): TopActivityInfo, pkgName: com.example.seccon2015.rock_paper_scissors activityName: com.example.seccon2015.rock_paper_scissors.MainActivitycallingPackage: com.cyanogenmod.trebuchet  bstSpecialAppKeyboardHandlingEnabled = false\nD/ActivityManager( 2955): Showing guidance for pkgName: com.example.seccon2015.rock_paper_scissors\nD/GuidanceScreen( 3146): event === app_launch\nD/GuidanceScreen( 3146): hiding guidance\nD/GuidanceScreen( 3146): hardKeyboard = 1\nD/GuidanceScreen( 3146): controllerType === Keyboard\nD/GuidanceScreen( 3146): appName: rock_paper_scissors, currentPkg: com.example.seccon2015.rock_paper_scissors, event: app_launch, controller: Keyboard\nD/GuidanceScreen( 3146): appName: rock_paper_scissors\nD/audio_hw_primary(  586): found out /dev/snd/pcmC0D0p\nI/PGA     ( 2955): Attempting to create new SOCKET connectionn pid = 2955, tid = 3168\nI/PGA     ( 2955): New SOCKET connection: system_server (pid 2955, tid 3168)\nW/PGA     ( 2940): tid 2940: eglCreateSyncKHR: NOT IMPLEMENTED\nD/dalvikvm( 2955): GC_FOR_ALLOC freed 895K, 22% free 5422K/6936K, paused 10ms, total 10ms\nD/GuidanceScreen( 3146): no guidance for com.example.seccon2015.rock_paper_scissors.\nW/audio_hw_primary(  586): out_write() limiting sleep time 112539 to 46439\nI/ActivityManager( 2955): Start proc com.example.seccon2015.rock_paper_scissors for activity com.example.seccon2015.rock_paper_scissors/.MainActivity: pid=3990 uid=10053 gids={50053}\nD/WindowManager( 2955): in computeScreenConfigurationLocked() -- hardKeyboardAvailable :true  mHardKeyboardAvailable :true   mHardKeyboardEnabled :true\nD/dalvikvm( 3990): Trying to load lib /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88\nD/dalvikvm( 3990): Added shared lib /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88\nD/dalvikvm( 3990): No JNI_OnLoad found in /data/app-lib/com.example.seccon2015.rock_paper_scissors-1/libcalc.so 0x65f84b88, skipping init\nD/WindowManager( 2955): Sending appClickStats request with data: [package=com.example.seccon2015.rock_paper_scissors, appname=rock_paper_scissors, appver=1.0, clickloc=system_server]\nD/InputMethodManagerService( 2955): ime_enabled = false is same as last value, no change\nW/audio_hw_primary(  586): out_write() limiting sleep time 65759 to 46439\nI/PGA     ( 3990): Attempting to create new SOCKET connectionn pid = 3990, tid = 3990\nI/PGA     ( 3990): New SOCKET connection: com.example.seccon2015.rock_paper_scissors (pid 3990, tid 3990)\nI/ActivityManager( 2955): Displayed com.example.seccon2015.rock_paper_scissors/.MainActivity: +170ms\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}}\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/InputDispatcher( 2955): Motion event has invalid pointer count 0; value must be between 1 and 16.\nE/dalvikvm( 3990): VM aborting\nF/libc    ( 3990): Fatal signal 6 (SIGABRT) at 0x00000f96 (code=-6), thread 3990 (_paper_scissors)\nD/audio_hw_primary(  586): found out /dev/snd/pcmC0D0p\nW/audio_hw_primary(  586): out_write() limiting sleep time 112539 to 46439\nW/audio_hw_primary(  586): out_write() limiting sleep time 65759 to 46439\nI/DEBUG   (  574): pid: 3990, tid: 3990, pkg name: com.example.seccon2015.rock_paper_scissors\nI/DEBUG   (  574): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\nI/DEBUG   (  574): Build fingerprint: 'samsung/kltexx/klte:4.4.2/KOT49H/G900FXXU1ANCE:user/release-keys'\nI/DEBUG   (  574): Revision: '0'\nI/DEBUG   (  574): pid: 3990, tid: 3990, name: _paper_scissors  >>> com.example.seccon2015.rock_paper_scissors <<<\nI/DEBUG   (  574): signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\nW/NativeCrashListener( 2955): Couldn't find ProcessRecord for pid 1885955130\nI/DEBUG   (  574):     eax 00000000  ebx 00000f96  ecx 00000f96  edx 00000006\nI/DEBUG   (  574): AM write failure (32 / Broken pipe)\nI/DEBUG   (  574):     esi 00000f96  edi 0000000b\nI/DEBUG   (  574):     xcs 00000073  xds 0000007b  xes 0000007b  xfs 00000000  xss 0000007b\nI/DEBUG   (  574):     eip 77673e96  ebp 776d8ce0  esp 7fc4ba94  flags 00210207\nI/DEBUG   (  574):\nI/DEBUG   (  574): backtrace:\nI/DEBUG   (  574):     #00  pc 0003be96  /system/lib/libc.so (tgkill+22)\nI/DEBUG   (  574):     #01  pc 00000005  <unknown>\nI/DEBUG   (  574):\nI/DEBUG   (  574): stack:\nI/DEBUG   (  574):          7fc4ba54  00000000\nI/DEBUG   (  574):          7fc4ba58  00000000\nI/DEBUG   (  574):          7fc4ba5c  00000000\nI/DEBUG   (  574):          7fc4ba60  00000000\nI/DEBUG   (  574):          7fc4ba64  00000000\nI/DEBUG   (  574):          7fc4ba68  00000000\nI/DEBUG   (  574):          7fc4ba6c  00000000\nI/DEBUG   (  574):          7fc4ba70  00000000\nI/DEBUG   (  574):          7fc4ba74  00000000\nI/DEBUG   (  574):          7fc4ba78  00000000\nI/DEBUG   (  574):          7fc4ba7c  00000000\nI/DEBUG   (  574):          7fc4ba80  7767df66  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4ba84  00000000\nI/DEBUG   (  574):          7fc4ba88  00000000\nI/DEBUG   (  574):          7fc4ba8c  77645dd9  /system/lib/libc.so (pthread_mutex_lock+9)\nI/DEBUG   (  574):          7fc4ba90  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):     #00  7fc4ba94  00000006\nI/DEBUG   (  574):          7fc4ba98  00000f96\nI/DEBUG   (  574):          7fc4ba9c  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4baa0  77650636  /system/lib/libc.so (pthread_kill+102)\nI/DEBUG   (  574):          7fc4baa4  00000f96\nI/DEBUG   (  574):          7fc4baa8  00000f96\nI/DEBUG   (  574):          7fc4baac  00000006\nI/DEBUG   (  574):          7fc4bab0  00000000\nI/DEBUG   (  574):          7fc4bab4  776d4268  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4bab8  7fc4bc68  [stack]\nI/DEBUG   (  574):          7fc4babc  776505d9  /system/lib/libc.so (pthread_kill+9)\nI/DEBUG   (  574):          7fc4bac0  776d3fcc  /system/lib/libc.so\nI/DEBUG   (  574):          7fc4bac4  7fc4bb10  [stack]\nI/DEBUG   (  574):          7fc4bac8  7fc4bd50  [stack]\nI/DEBUG   (  574):          7fc4bacc  7fc4bd78  [stack]\nI/DEBUG   (  574):          7fc4bad0  776509fc  /system/lib/libc.so (raise+44)\nD/BstCommandProcessor-Application( 3132): Application crash has been observed.\nD/BstCommandProcessor-Application( 3132): in sendHttpRequest, request to send to (fqdn): http://10.0.2.2:2861/AppCrashedInfo\nD/BstCommandProcessor-Application( 3132): data: {\"packageName\":\"com.example.seccon2015.rock_paper_scissors\",\"shortPackageName\":\"com.example.seccon2015.rock_paper_scissors\",\"versionCode\":1,\"versionName\":\"1.0\"}\nW/ActivityThread( 3132): ClassLoader.loadClass: The class loader returned by Thread.getContextClassLoader() may fail for processes that host multiple applications. You should explicitly specify a context class loader. For example: Thread.setContextClassLoader(getClass().getClassLoader());\nI/BootReceiver( 2955): Copying /data/tombstones/tombstone_04 to DropBox (SYSTEM_TOMBSTONE)\nI/ActivityManager( 2955): Process com.example.seccon2015.rock_paper_scissors (pid 3990) has died.\nW/ActivityManager( 2955): Force removing ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5}: app died, no saved state\nW/InputDispatcher( 2955): channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\nE/InputDispatcher( 2955): channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)' ~ Channel is unrecoverably broken and will be disposed!\nD/Zygote  ( 2941): Process 3990 terminated by signal (6)\nW/InputDispatcher( 2955): Attempted to unregister already unregistered input channel '3307d504 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity (server)'\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{33147a30 ActivityRecord{33147980 u0 com.example.seccon2015.rock_paper_scissors/.MainActivity t5 f}}\nD/ActivityManager( 2955): TopActivityInfo, pkgName: com.cyanogenmod.trebuchet activityName: com.cyanogenmod.trebuchet/com.android.launcher3.LaunchercallingPackage:   bstSpecialAppKeyboardHandlingEnabled = false\nI/WindowState( 2955): WIN DEATH: Window{3307d504 u0 com.example.seccon2015.rock_paper_scissors/com.example.seccon2015.rock_paper_scissors.MainActivity}\nD/ActivityManager( 2955): Showing guidance for pkgName: com.cyanogenmod.trebuchet\nD/GuidanceScreen( 3146): event === app_launch\nD/GuidanceScreen( 3146): hiding guidance\nD/GuidanceScreen( 3146): hardKeyboard = 1\nD/GuidanceScreen( 3146): controllerType === Keyboard\nD/GuidanceScreen( 3146): appName: Trebuchet, currentPkg: com.cyanogenmod.trebuchet, event: app_launch, controller: Keyboard\nW/SurfaceFlinger( 2940): couldn't log to binary event log: overflow.\nD/GuidanceScreen( 3146): appName: Trebuchet\nD/WindowManager( 2955): in computeScreenConfigurationLocked() -- hardKeyboardAvailable :true  mHardKeyboardAvailable :true   mHardKeyboardEnabled :true\nD/GuidanceScreen( 3146): no guidance for com.cyanogenmod.trebuchet.\nD/InputMethodManagerService( 2955): ime_enabled = false is same as last value, no change\nW/InputMethodManagerService( 2955): Got RemoteException sending setActive(false) notification to pid 3990 uid 10053\nW/Binder  ( 3052): Caught a RuntimeException from the binder stub implementation.\nW/Binder  ( 3052): java.lang.NullPointerException\nW/Binder  ( 3052):      at android.inputmethodservice.IInputMethodWrapper.setSessionEnabled(IInputMethodWrapper.java:280)\nW/Binder  ( 3052):      at com.android.internal.view.IInputMethod$Stub.onTransact(IInputMethod.java:129)\nW/Binder  ( 3052):      at android.os.Binder.execTransact(Binder.java:404)\nW/Binder  ( 3052):      at dalvik.system.NativeStart.run(Native Method)\nI/ActivityManager( 2955): Setting mBooting value to false, currently mBooted = true\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{330e3e64 ActivityRecord{330e3d28 u0 com.cyanogenmod.trebuchet/com.android.launcher3.Launcher t1}}\nD/WindowManager( 2955): topDisplayedActivityInfo, appToken: Token{330e3e64 ActivityRecord{330e3d28 u0 com.cyanogenmod.trebuchet/com.android.launcher3.Launcher t1}}\nD/dalvikvm( 3123): GC_CONCURRENT freed 663K, 25% free 2682K/3532K, paused 0ms+0ms, total 10ms\nD/dalvikvm( 3123): GC_CONCURRENT freed 617K, 24% free 2699K/3516K, paused 10ms+0ms, total 20ms\nW/ActivityManager( 2955): Unable to start service Intent { act=com.google.android.gms.droidguard.service.START pkg=com.google.android.gms } U=0: not found\nE/GmsClient( 3223): unable to connect to service: com.google.android.gms.droidguard.service.START\nW/ActivityManager( 2955): Unbind failed: could not find connection for android.os.BinderProxy@33126a50\nD/dalvikvm( 3223): GC_CONCURRENT freed 1074K, 23% free 3821K/4928K, paused 10ms+0ms, total 30ms\nW/GLSUser ( 3223): [AppCertManager] IOException while requesting key:\nW/GLSUser ( 3223): java.io.IOException: Invalid device key response.\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:303)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.a.a(SourceFile:134)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.appcert.b.a(SourceFile:43)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.b.a(SourceFile:62)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:120)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.b.a.a(SourceFile:61)\nW/GLSUser ( 3223):      at com.google.android.gms.auth.be.cron.AuthCronService.a(SourceFile:44)\nW/GLSUser ( 3223):      at com.google.android.gms.gcm.ar.run(SourceFile:131)\nD/dalvikvm( 3123): GC_CONCURRENT freed 619K, 23% free 2709K/3516K, paused 10ms+0ms, total 20ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nD/dalvikvm( 3132): GC_CONCURRENT freed 1267K, 21% free 5153K/6456K, paused 10ms+0ms, total 30ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 586K, 24% free 2690K/3508K, paused 10ms, total 10ms\nD/dalvikvm( 3788): GC_CONCURRENT freed 698K, 22% free 2845K/3608K, paused 0ms+0ms, total 10ms\nD/dalvikvm( 3123): GC_FOR_ALLOC freed 598K, 24% free 2691K/3508K, paused 10ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: ping\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\nW/BstCommandProcessor-httpd( 3132): Reached maxLineLength limit while reading the content of a file\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1351K, 24% free 5151K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1186K, 24% free 5151K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1141K, 24% free 5156K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1117K, 24% free 5152K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1100K, 24% free 5161K/6740K, paused 0ms, total 0ms\nD/dalvikvm( 3132): GC_FOR_ALLOC freed 1114K, 24% free 5163K/6752K, paused 10ms, total 10ms\nD/BstCommandProcessor-httpd( 3132): command: clipboard (with args)\nD/BstCommandProcessor-httpd( 3132): response: {\"result\":\"ok\"}\n. I can chime in that, using the instructions mentioned in koz.io, trying to install frida-gadget into an app on a Pixel XL with Android 8.1 causes the app to crash on startup. I tried several version of frida-gadget including 10.6.53, 10.6.33, and 10.6.24. I'm a bit new to Android debugging but if someone needs more detailed information and is willing to find a link with some instructions on getting the necessary info, I can give it a shot.. @NGTmeaty  Do you know which android emulator Frida is working well?\nThanks. @oleavr . Can you make frida support this emulator ?\nhttp://www.mediafire.com/file/chzx2cymbvyj5l6/BlueStacks+App+Player+0.9.24.5311+Superuser+BSEasy+-+bo+2.msi\nThanks. @samyk Have you managed to solve this?\nI'm trying to re-implement ssl-kill-switch2 functionality in Frida that would work with iOS 10.x and 11.x but without any success. Please check #687 and let me know what you think?. Well, I'm reversing CFNetwork, libboringssl and libnetwork so I'll hopefully have some result soon, if not with *create_peer_trust then I'll find some other approach and working bypass, but I would also love to understand why this hook doesn't work... Also, I can't find anyone to confirm on which version did it work and find dyld_shared_cache_arm64 from that exact iOS version to see what changed.... > * What is your error?\n\n\nWhat happens when you run that code?\nWhat have you tried?\nDid you add frida loads and resign the application?\n\n\nNo error, nothing happens.\nI've tried basically everything, is there something specific that you have in ming that I should try out?\nI'm open to any suggestions!\nThere is no need to resign the application, I'm testing this on jailbroken devices, 10.3.3 and 11.3.1.. > I see a couple possible problems here:\n\n\nfrom iOS 11 on, apple is migrating to boringssl and things work quite differently - so probably the functions you're hooking are there but probably never called (see this for some more info: #541)\napps using WKWebView (which may be the case for your Cordova apps) actually run all network code outside the app process, as webkit webview has its own helper processes so you might need to attach also those (i don't remember the name right now but look at ps aux | grep -i webkit while the webview is running on the device)\n\n\nThis actually makes sense, however I've reversed boringssl and libnetwork just to check out what could it be. This lead me to some interesting things, specifically Apple's implementation of OpenSSL which is similar to standard OpenSSL implementation yet a bit different... \nI've targeted SSL_CTX_set_verify and some other functions...\nAs I've mentioned, this is not just a Cordova issue, I have the same problem with some other applications, not using WKWebView, however, I'll take your advice and try that right away.\nI think I've tried it before without success but it could be some mistake on my end so I'll double check that.\nBut, let's not forget that ssl-kill-switch2 does the same thing (on both iOS 10.x and 11.x) and it successfully bypasses the SSL Certificate Pinning, and my own tweak based on it does the exact same thing. I wrote it just to get a better understanding on how it works and to see if I could manage to do the same.. BTW, I saw @samyk issue, and it helped me pinpoint the issue.. No success attaching to WebKit.... ",
    "hemantmits": "Thanks  oleavr for quick response.\nI will try to build it and update my results in this thread.\nbtw I am trying to build Frida on rpi 2 directly, not cross compile from x86 to ARM.\n. ",
    "sha0coder": "I Have tried frida on ubuntu 64bits and also segfaulted, hope this helps:\n[ 7806.247173] telnet[15805]: segfault at 388 ip 00007faeb96c1912 sp 00007faeb8082bd0 error 4 in ld-2.19.so[7faeb96b7000+23000]\n[ 9146.240484] ptrace of pid 28007 was attempted by: frida-helper-64 (pid 28014)\n[ 9154.844689] nc[28057]: segfault at 388 ip 00007f44eb706912 sp 00007f44ea6d8c10 error 4 in ld-2.19.so[7f44eb6fc000+23000]\n. ",
    "nbsdx": "As a follow up, it looks like on Linux the only results I'm getting to onReceive and onCallSummary are addresses of a function inside Frida's injected library. I'm in the process of building and trying to debug what's going on. \n. Ah okay. So I changed my code to\njavascript\n    function agent() {\n        \"use strict\";\n        Process.enumerateThreads( {\n            onMatch: function( thread ) {\n                Stalker.follow( thread.id, {\n                    events: { call: true },\n                    onReceive: function( e ) {\n                         send( {name:'debug', data:'onReceive'} );\n                    },\n                    onCallSummary: function( e ) {\n                        send( {name:'debug', data:'onCallSummary'} );\n                    }\n            },\n            onComplete: function() {} // do nothing\n        } );\n    }\nand that doesn't crash, but I don't get any responses from Stalker. I tried following thread.id as well, but that caused a crash. The program that I'm testing on is the simple 'print number, sleep, repeat' program, so I would expect ~3 calls per iteration: foo, printf, sleep, + any calls in printf. I can see that the process I'm attaching to is still running, and no error messages are thrown. \nAdditionally, onComplete is never called. If I put a send() in there, it's never called unless I force onMatch to end with return \"stop\". Process.enumerateThreadsSync() just hangs, then eventually returns a timeout error, and no further execution is done in agent()\nEdit: Okay, I'm able to follow from inside of an Interceptor.attach()'s onEnter on the sleep function. and I get the function calls that I'm expecting. I'm still not sure what's wrong with Process.enumerateThreads.\n. ",
    "dreamx2": "Sounds good. Thank you.\n. This works now. Thanks.\n. ",
    "zhendeshiming": "this.destroy() can destroy all ?. ",
    "0xABD": "Thank you!\nTried with port forwarding a couple of times, it actually works, so there is a workaround (regardless of the type of device -- x86/Android).\nI believe something like \"add_remote_device\" will surely work, as it is easily accessible from scripts and can also be called from existing frida-* cmdline tools if a new parameter with a remote server connection string is specified.\n. That was from frida 5.0.2, code is\n```\n// frida-trace called as:\n// # frida-trace -R -f com.google.android.gm -i ssl3_read -i ssl3_write\n// handler for ssl3_read is:\n{\n    onEnter(log, args, state) {\n        this.buf = args[1];\n        this.len = parseInt(args[2]);\n    },\nonLeave(log, retval, state) {\n    log(\"ssl3_read(\" + this.buf.toString() + \", \" + this.len.toString() + \") = \" + retval.toString() + \"\");\nretcnt = parseInt(retval);\n    if (retcnt != 0xFFFFFFFF) {\n    var bbuf = Memory.readByteArray(this.buf, retcnt);\n        log(\"Read bytes: \" + bbuf.length.toString());\n}\n}\n\n}\n// handler for ssl3_write is:\n{\n    onEnter(log, args, state) {\n        this.buf = args[1];\n        this.len = parseInt(args[2]);\n        log(\"ssl3_write(\" + this.buf.toString() + \", \" + this.len.toString() + \")\");\n        var bbuf = Memory.readByteArray(this.buf, this.len);\n        log(\"Written bytes: \" + bbuf.length.toString());\n    },                     \nonLeave(log, retval, state) {\n}\n\n}\n```\n. With the provided script I do not see \"Read bytes\" or \"Written bytes\" messages at all, but if you change readByteArray to readCString, it magically works.\n. Thank you so much, that works! \n(My bad, missed the ArrayBuffer in the new version of the docs.)\n. Just tried that, returns the same error message \nSyntaxError: Unexpected token delete                            \n    at makeMethod (gumjs-java.js:1248:38)                       \n    at gumjs-java.js:978:28                                     \n    at Array.map (native)                                       \n    at makeMethodFromOverloads (gumjs-java.js:941:43)           \n    at gumjs-java.js:919:45                                     \n    at VM.perform (gumjs-java.js:2088:17)                       \n    at File.Object.defineProperty.get (gumjs-java.js:910:36)    \n    at script1.js:45:11                                         \n    at VM.perform (gumjs-java.js:2088:17)                       \n    at Array.forEach (native)\n. Tested the fix successfully on Nexus 4 Android 4.4.2 KTU84P.\nI actually also tried prepending an underscore instead of appending it, but I guess this counts.\nfrida -U -l foobar.js -f \"com.android.chrome\"\nfrida -U -l foobarbaz.js -f \"com.android.chrome\"\nfoobar.js.txt (prepending underscore)\nfoobarbaz.js.txt (appending underscore)\nAs a side note: I wonder whether the same issue applies to iOS? I don't have a test device, but I assume that there may be some reserved keywords in conflict at ObjC, too.\n. PyPi packages now seem to be distributed from different URLs.\nI confirm same errors while installing Frida from Python on all platforms.\nFor example, now the URL for Frida 7.1.5 for linux x64 is \nhttps://pypi.python.org/packages/00/9d/5b8a5a080f3f02b0f4888152089c470248ff0d78c50b3236fdcc6c05ef36/frida-7.1.5-py2.7-linux-x86_64.egg#md5=a931b2bbf73a2e58e2ae1e2e07116a17, but not the old https://pypi.python.org/packages/2.7/f/frida/frida-7.1.5-py2.7-linux-x86_64.egg\ndownloading prebuilt extension from https://pypi.python.org/packages/2.7/f/frida/frida-7.1.5-py2.7-linux-x86_64.egg\ntrying to get prebuilt extension from the current folder /tmp/pip-build-6GtOyY/frida/frida-7.1.5-py2.7-linux-x86_64.egg\nTraceback (most recent call last):\n...\nThe workaround is to manually download and install the *.egg file before running a python package manager.\n. As per discussion here:\nhttps://twitter.com/oleavr/status/762616376490065926\nhttps://twitter.com/oleavr/status/762621137385840640\n\nThat's definitely possible. You need to hook the class loader API so you can install your hook once it's loaded.\nFrida only uses the app's class loader, so if the class isn't visible to it in this case then we'll need to extend\n. I wonder if we may need to instantiate the HashMap with the exact key and value types specified in the signature?\nSomething like, \"Ljava/util/HashMap<Ljava/lang/String;Ljava/lang/String;>;\"\n. Tested in 9.1 and 9.1.16, same results.\nSurprisingly, frida-trace works on that function. So the issue must be with the way I am using Interceptor. \nCalling Interceptor.flush() does not help, but I can now see that the hook is placed in memory. The original target function is definitely being called by Java code (verified by adding logcat print in the source code), but the hook handler is either not being called, or is unable to communicate.\n. The minimum test case is: \n$ frida -U --enable-jit -l agent.js com.example.hellojnicallback\nagent.js:\n'use strict';\nInterceptor.attach(Module.findExportByName(\"libhello-jnicallback.so\",\"sendJavaMsg\"), \nfunction () {\n    console.log(\"sendJavaMsg()\");\n    }\n);. Also, frida-trace supports -a (--add=) option to quickly hook a function by its raw offset from the base address of the module, like:\nfrida-trace -U com.foobar.helloworld -a libfoo.so!0x1234. \n",
    "albertobarbaro": "Hi all,\nI have exactly the same problem while I intercept send on Windows... Any idea? My code is:\nonEnter: function onEnter(log, args, state) {\n        log(\"send()\");\n```\n    this.buf = args[1];\n    this.len = args[2].toInt32();\nlog(this.buf);\nlog(this.len);\nvar bbuf = Memory.readByteArray(this.buf, this.len);\nlog(\"Read bytes: \" + bbuf.length.toString());\n\n},\n```\nbbuf is empty...\n. @oleavr : Yes using your instruction it works. For sure my last line was incorrect but i still have a question: why if i use:\nthis.buf = args[1];\nthis.len = args[2].toInt32();\nlog(this.buf);\nlog(this.len);\nbuf = Memory.readByteArray(this.buf, this.len);\nlog(buf);\nI can only see \"()\" in the output rather then the actual bytes?\nThanks\n. @oleavr OK I read your email on the ML. All clear now.\nThanks\n. Problem solved :)\n. ",
    "distributed": "Does this mean that you compile Frida for QNX on QNX?\nUnfortunately I wouldn't even know where to start and I don't have the free time to do it :(\n. Thanks for the clarification. I will try the build on Ubuntu. That should for me :)\n. Oh, I didn't realize that. Of course I'm one of the few x86 QNX still out there ;)\n. ",
    "weshoke": "The solution was to run the script as administrator\n. ",
    "june5079": "Thx for the quick replying~!!!.\nI took your advice so that I upgraded my ubuntu from 14.04 to 15.10 and clean up git stuff...\nBut still same error occurred.\nThe reason I'm trying to compile (not using built binary you've uploaded on frida.re) is that,\nI had issus about SELinux on Samsung Galaxy Note2\nYes, I also read github issue post that you replied before.\nFrom that coment you said SELinux issue is now clear and works fine on your Galaxy S6 Device.\nBut I think It doesn't seem working on mine.\nThis is environment that I had.\nDevice : Galaxy Note2 (ARM32)\nRooted : Rooted firmware (Android 4.4.2)\nWhen I try to connect to frieda-server and attach to package, it stops with \"permission denied\" error msg.\nI think \"add shell\" privilege just have \"shell\" permission and can't fork process that I want to play.\nThis is what I wanted to test.\nhttp://rotlogix.com/2015/09/13/defeating-ssl-pinning-in-coin-for-android/\nIf you don't mind, I hope you test above on your Samsung Galaxy S6 device.\nThx for your support~!! I really appreciate.\n. I'm using NDK-10re version now.\n. ",
    "JohnCoates": "Took a look at the Android instructions, and it mentioned running \"frida-server\" so I ran that command over SSH and now it works\n. Ah, tricky. The iOS 9 jailbreak now enforces some entitlements that were optional in the past jailbreaks, might be something to look into\n. Thanks @oleavr, running xcode-select --install worked! The command-line tools were working for other things, xcode-select showed the correct path as well , but for some reason that command was required.. Awesome! Thanks for getting this fixed @oleavr \ud83d\udc4f. ",
    "Cianjoo": "hi, now I tried using frida in iphone5 (ios9) with Mac..\nbut I met.... is it still not fixed? or I have env problem? \nFailed to enumerate processes: unable to connect to remote frida-server: Unable to connect (connection refused)\n. hi, thanks for your replay..\nI tried sudo frida-ps -U but it still fail by same reason...\ndo you have any idea? \n. hi, \nmac : I just success for 'sudo easy_install frida'.\niphone5 : with jailbreak then install frida by your guide.\nthen I connected device to mac > tried frida-ps -U.... would you tell me it need to more?\n. ",
    "fingerco": "frida-server does seem to be working upon manually running it via SSH.\n. ",
    "hackvertor": "I've tried with a normal user and using sudo. The files seem to be written to the tmp directory.\n. ",
    "SOLEROM": "same issue; all the test are resulting in segFault at the attach line;\ntried both node.js and python frida code both on cat process and hello process (counting numbers with f func);\nmy config:\nFrida:root@:/$ uname -a\nLinux LpTwist 3.13.0-46-generic #79-Ubuntu SMP Tue Mar 10 20:06:50 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\nFrida:root@:/$ cat /etc/issue\nUbuntu 14.04 LTS \\n \\l\nFrida:root@:/$ python -V\nPython 2.7.6\nFrida:root@:/$ frida --version\n6.0.3\nFrida:root@:/$ node -v\nv5.1.0\nFrida:root@:/$ npm  -v\n3.5.0\n. ",
    "upfall": "the same!\nI am using 2.6.32-220.23.2.el6.x86_64 #1 SMP Mon Jan 28 17:12:52 CST 2013 x86_64 x86_64 x86_64 GNU/Linux, Frida 6.0.6.\nAnd find the /tmp/frida-xxxxxxxxx is  empty\n. ",
    "anirudhrata": "Thanks. Works like a charm!\n. ",
    "dpnishant": "Or may be disable SIP (System Integrity Protection) for test purposes? Reference: http://osxdaily.com/2015/10/05/disable-rootless-system-integrity-protection-mac-os-x/\n. ",
    "brandonros": "Just to clarify, there are no options available to hook onto Messages, etc.?\n. ",
    "IgorGanapolsky": "I am following installation instructions on http://www.frida.re/docs/installation/.  Upon executing session = frida.attach(\"cat\"), I get this error:\n\nfrida.PermissionDeniedError: unable to access process with pid 67947 from the current user account\n\nIs there a way to make these instructions clearer for Mac OS users?\n. @oleavr What should the PR entail?  How to forego SIP?  What if users have no knowledge of SIP, and just want to try Frida for the first time.  This gets a little complicated...\n. @dweinstein When I do frida.attach(\"cat\"), I get this error now:\n\nraise _frida.ProcessNotFoundError(\"ambiguous name; it matches: %s\" % \", \".join([\"%s (pid: %d)\" % (process.name, process.pid) for process in matching]))\nfrida.ProcessNotFoundError: ambiguous name; it matches: cat (pid: 29755), cat (pid: 29752)\n\nI am on Sierra.\n. ",
    "langrenfengzi": "Another way was to write a simple execute program, and attach it without disable SIP.\n\nWrite a simple \"hello.c\": \n```\n\ninclude \nint main() {\n     printf(\"Hello World\\n\");\n     getchar();\n     return 0;\n}\n2. Compile and run it\n$ gcc hello.c -o hello\n$ ./hello\n3. Modify the \"example.py\"\nimport sys\nimport frida\nsession = frida.attach(\"cat\" if len(sys.argv)<=1 else int(sys.argv[1]))\nprint([x.name for x in session.enumerate_modules()])\n4. Get the hello process id and attach it\n$ ps aux|grep hello\nlang             62676   0.0  0.0  2432780    728 s000  S+    1:56AM   0:00.00 ./hello\n$ python example.py 62676\n```. ",
    "0x00-0xFF": "Still doesn't work... Running on OSX 10.11.3 / XCode 7.2 / iOS 9.1\nWithout bitcode enabled:\nFrida: frida-gum/gum/backend-darwin/gumcodesegment-darwin.c:212:gum_code_segment_realize: assertion failed: (res == 0)\nWith bitcode enabled: \nFridaGadget.dylib' does not contain bitcode. You must rebuild it with bitcode enabled (Xcode setting ENABLE_BITCODE), obtain an updated library from the vendor, or disable bitcode for this target. for architecture arm64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n. ",
    "jacobrosenthal": "Im getting this as well with xcode 7.2.1\n. Just another user weighing in. I can run your script on my pixel device\nfrida -U package -l agent.js\nWaiting for USB device to appear...\nAttaching...                                                            \nWaiting for Java..\nJava available..\nEntered perform..\nCalled perform.. I also saw a solution posted in chat\nvar arr = characteristic.getValue();\n    console.log(\"writeCharacteristic: \", characteristic.getUuid(), \" value: \", arr);\n    var p = Memory.alloc(arr.length);\n    Memory.writeByteArray(p, arr);\n    console.log(hexdump(p, {\n      offset: 0,\n      length: arr.length,\n      header: false,\n      ansi: true\n    }));\nBut that also prints an incorrect number\nwriteCharacteristic:  ebdf00a0-706f-636f-9077-0002a5d5c51b  value:  0,1,14,-65,0,-1,0,0,0,0,5,5,1,0,0,0,0\n00000000  00 01 0e 00 00 00 00 00 00 00 05 05 01 00 00 00  ................\n00000010  00                                               .\n. Im guessing its related to this signed read here?\nhttps://github.com/frida/frida-java/blob/master/lib/class-factory.js#L1778\nThoughts on how youd fix? Presumably you might want it signed or unsigned.. Maybe it doesnt return an array directly but an object that has both signed and unsigned version? \n. If need be :) But Im not sure I understand enough still.\nIts not just array thats the problem, its the byte primitive in general..\nIt seems like maybe there should be a signed and unsigned byte type? But\nthen, who chooses which and when?\nOn Sun, Jul 23, 2017 at 8:04 AM, Ole Andr\u00e9 Vadla Ravn\u00e5s \nnotifications@github.com wrote:\n\n(Oops sorry about the late reply!) We should definitely return an object\ninstead, and handle signed va unsigned. Array-support is a half-baked\nfeature as it stands. Interested in taking a stab at fixing this? :)\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/289#issuecomment-317248437, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAb0dP3nQcAPluChN2223k8ZvkU-vv_Jks5sQzbpgaJpZM4OC2jE\n.\n. \n",
    "ay-kay": "Still (or again) seems to be an issue with latest FridaGadget.dylib (9.0.5)?. Confirming issue on jailbroken iOS 9.0.2 with Frida for 32-bit devices (version 10.2.1).\nFrida responds with the following error message after trying to spawn an app and SpringBoard freezes.\nFailed to spawn: unable to launch iOS app: timeout\n. ",
    "tosbaha": "Yay! It is working. Thanks very much. Frida is absolutely fantastic tool :+1: \n. Thanks @eugenekolo I tried but it didn't give any meaningful result. When I tried to hexdump the first pointer of result it gave me another pointer with mangled Swift class name something like ContinuousArray or something. I guess we have to wait for Swift ABI so that Swift support can be added otherwise it is pretty hard to get basic data out of Swift Binaries.. ",
    "zhangdingding": "Sorry, I'm afraid the problem is due to another frida instance was running.\nMay I ask you to close this issue? Sorry again :(\n. :)\n. ",
    "migueldeicaza": "Never mind, it looks like I had an old version of Frida, and using easy_install -U fixed it.\n. ",
    "superkhung": "i think it's all, still using repl without any error after import fixed\n. ",
    "xteraflopx": "I don't even know how to run frida-server whatsoever. I was following the instructions\n$ curl -O https://build.frida.re/frida/android/arm/bin/frida-server\n$ adb push frida-server /data/local/tmp/\n$ adb shell \"chmod 755 /data/local/tmp/frida-server\"\n$ adb shell \"/data/local/tmp/frida-server &\"\nIs the last command running frida-server? I do have a rooted phone, but I don't know how to start frida-server as root.\nSorry for my ignorance\n. Thank you!\nRunning \"frida-ps -U -i open com.android.chrome\" gave me an error that permission was denied, or something similar, and after running \"sudo sysctl kernel.yama.ptrace_scope=0\" now Chrome just closes every time I try to attach to it.\n. @oleavr With your most recent version of Frida, running on my rooted DROID 4 (Android 4.1.2), when trying to run:\nfrida-trace -U -i open com.android.chrome\nI get the output:\nFailed to start tracing: the connection is closed\nStopping...\nIt causes the app to close on my phone. This happens for nearly every app I attempt to attach to, except a few boring looking system apps like \"zygote\"\n. ",
    "rustymagnet3000": "Hi @oleavr @xteraflopx \nI hit the same thing on Android.  I got the Process IDs listing perfectly on iOS but not on Android.  I was using 6.2.4 version of Frida.\nI manually adb shelled into my device. Elevated myself to root. Went into the same directory you mentioned; /data/local/tmp/  I made sure the Frida Server was chmod 755.  \nI can see the Frida server is running.  But it is the only process that is being listed.  I have multiple apps open.\nThoughts?\nPS (I can attach to a PID on iOS, without issue).\n. I had the same issue.  I solved it by moving the entire Linguistics Data folder from System/Library to Var/Mobile.\n. Upgrade to the new Frida client on your device and machine (version 8+).\n. ",
    "samitanwer": "Hi, \nI am facing the same issue. I am successfully able to run frida-server on my rooted android device (6.0.1, arm), however, when I try to run: \"frida-ps -U\", I get only one process listed, viz the frida-server process itself and when I run: \"frida-ps -R, I get the message - \"unable to connect to remote frida-server\"\nFrida version on my host is 7.1.0 and frida-server version on my phone is 7.0.11\nAny solution to this, yet?\n. Also running \"frida-ps -Uai open com.android.chrome\" gives an error stating \"java API not available\"\n. ",
    "filipesam": "Hello, \nI'm having the same issue, i have a rooted phone, cydia and struff installed, upgraded to the last version of frida (/usr/sbin/frida-server --version shows: 7.2.15)\nEverytime i try to connect to the device via USB i get the message: \n\"Failed to enumerate applications: unable to connect to remote frida-server\"\nI've checked the apple systemd logs, and found that the frida-server is crashing everytime i try a connection.\nI've attached a crashreport for you guys to check.\nThanks, and great work on frida\n(crashreport from /Library/Logs/CrashReporter/frida-server_2016-07-27-104012_Flips-iPhone.ips)\nfrida-crash.txt\n. Thanks, for the update, it's working now in the iphone\nThanks, and keep up the great work!\n. ",
    "olifozzy": "Same error here :/\n. ",
    "tecolee99": "I tired the frida-server (v8.2.2) on my Acer S500 phone. The Apps crash while i tried to attached it by frida-trace -R ..com.supercell.clashroyale., the crash message is shown in below.\nfrom future import print_function\nimport frida\nimport sys\nsession = frida.get_remote_device().attach(\"com.supercell.clashroyale\")\nprint(session.enumerate_modules())\ncrash.txt\n. ",
    "anka-213": "I have the same problem with frida 8.2.3 on a rooted android phone. :/\nI can start the server just fine and it keeps running, but I cannot connect to it \nModel: GT-I9100\nAndroid-version: 4.1.2\nKernel version: 3.0.31-Siyah-s2-v6.0b4+. ",
    "baptx": "@oleavr I got this error when trying to list processes of Android x86 running in VirtualBox (bridged adapter network) on a Linux host with a command like frida-ps -H 10.0.0.110. The solution was to give the local network IP address of Android (or 0.0.0.0) to frida-server with -l parameter so it will listen on it. It looks like a bug since the server should listen on its own IP address by default.\nRelated: https://github.com/frida/frida/issues/582. I also had this issue and used the workaround by adding -l 0.0.0.0 when starting frida-server. Does someone know why it does not work without this parameter? A fix would be nice.. ",
    "jackjack-jj": "Never mind I messed up with the versions\n. ",
    "ballballsun": "Should be problem on project setting, try to see:\nhttp://stackoverflow.com/questions/24333981/ios-app-with-framework-crashed-on-device-dyld-library-not-loaded-xcode-6-beta\n. Yes it is should be running as root. I followed your instruction in https://github.com/frida/frida/issues/92\n```\n$ adb shell\nsu\n/data/local/tmp/frida-server &\n```\nIt is strange that I can attach to other game process, but only Line Ranger cannot.\nMaybe the game is protected?\nThe game i am trying is Line Ranger, you can try it.\nhttps://play.google.com/store/apps/details?id=com.linecorp.LGRGS\n. Oh ic, thanks a lot!!! I will try it.\nBy the way, any command can restart/shutdown frida server on android?\n. solved by using Module.enumerateExports\n. Thanks for your responsive and detailed reply :)\nI may need time to digest it.\n. # Update:\nFixed.\nThe problem was that node.js was not using the latest frida (using version 6.x).\n$ npm upgrade frida does not help me to upgrade frida from version 6 to 7.\nAfter I re-install frida, then it works!\n$ npm uninstall frida\n$ npm install frida\nOriginal problem:\nHi, I have the problem similar to second one.\nI am able to run frida-ps -Ua, but When I run a my old script. \nI get \nError: No such interface 're.frida.HostSession6' on object at path /re/frida/HostSession\n    at Error (native)\nI am using frida 7.0.5, by sudo pip install frida --upgrade.\nAnd the latest frida-server that get by\n$ curl -O https://build.frida.re/frida/android/arm/bin/frida-server\n$ adb push frida-server /data/local/tmp/\nSuppose now frida client and host are in the same version(?)\nBut still encounter the problem. Any idea?\n. ",
    "ChaplinLi": "May I ask how to use Frida to spawn theri app?I don't konw what's that mean.. Yes,i have try to use Frida interactive to spawn it,and it can find method inside  \"libhello.so\" .I suspected whether if the Interceptor can't attach it\n[device::app]-> Module.findExportByName(\"libhello.so\",\"Java_com_example_hello_MainActivity_hello\")\n\"0x7898af25\"\n  . Now i improve my code to display more infomation,it seems like frida can't find the function inside libhello.so.I'm thinking could i get this funtion's address,that i can attach it.\n```\ncode:\nvar func = Module.findExportByName(\"libhello.so\",\"Java_com_example_hello_MainActivity_hello\");\n        send(\"Find Function :\"+func);\nlogcat:\n[] Attach Application id: 20556\n[] Application onResume\n[] Start Script\n[] Running Script\n[*] Find Function :null\n```\nBy the way,i can use this command \"$ frida -U com.example.hello\" to find the function address,but can't do the same thing on the script.. ",
    "alxchk": "Also:\nmake[5]: Entering directory '/tmp/frida/build/tmp-linux-x86_64/frida-python2.7/src'\n  CC       _frida.lo\n  CCLD     _frida.la\n/tmp/frida/build/frida-linux-x86_64/lib/libfrida-core-1.0.a(libfrida_core_la-linux-host-session.o): In function `frida_robo_launcher_construct':\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/linux-host-session.c:4621: undefined reference to `frida_data_loader_get_frida_loader_32_so_blob'\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/linux-host-session.c:4623: undefined reference to `frida_data_loader_get_frida_loader_64_so_blob'\n/tmp/frida/build/frida-linux-x86_64/lib/libfrida-core-1.0.a(libfrida_core_la-linux-host-session.o): In function `frida_robo_agent_construct':\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/linux-host-session.c:7415: undefined reference to `frida_data_android_get_robo_agent_js_blob'\n/tmp/frida/build/frida-linux-x86_64/lib/libfrida-core-1.0.a(libfrida_core_la-frida-helper-process.o): In function `frida_resource_store_construct':\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/frida-helper-process.c:3693: undefined reference to `setfilecon'\n/tmp/frida/build/frida-linux-x86_64/lib/libfrida-core-1.0.a(libfrida_core_la-linjector.o): In function `frida_agent_resource_get_path_template':\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/linjector.c:1031: undefined reference to `setfilecon'\n/tmp/frida/build/tmp-linux-x86_64/frida-core/src/../../../../frida-core/src/linux/linjector.c:1116: undefined reference to `setfilecon'\n. Toplevel, default one.\n```\nmake ANDROID_NDK_ROOT=/opt/android-ndk NODE=/usr/bin/node NPM=/usr/bin/npm server-android python-64 server-64 server-32\n```\nSomething like that.\n. ",
    "litongxin1991": "Android 4.4 on Nexus 5.\nThanks!\n. I may find the cause.\nI'm not familiar with the code, the fixes are incomplete and I only tested on the simple code above. But I hope the following information I found may help you. \nIn dalvik byte code, the invocation to a constructor has two instructions.\nnew-instance v1, Ljava/lang/StringBuilder;\ninvoke-direct {v1}, Ljava/lang/StringBuilder;-><init>()V\nFor the last instruction, it's similar to call a instance method. And the  function is what I tried to hook.\nWhen the  function is called, there should be a this pointer. \nBut the wrapper in frida combines the two instructions. The return type is the class, not the void and the method type is CONSTRUCTOR_METHOD, not the INSTANCE_METHOD.\nIn https://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1309\nI changed\nif (type === INSTANCE_METHOD) {\n  argsSize++;\n}\n==>\nif (type === INSTANCE_METHOD **|| type === CONSTRUCTOR_METHOD** ) {\n  argsSize++;\n}\nSo the arguments received in the implement function is right.\nIt's because the this pointer should be an argument.\nIn https://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1181\nI changed \ntype === INSTANCE_METHOD ? \"this.$handle\" : \"this.$classHandle\",\n==>\n(type === INSTANCE_METHOD || type === CONSTRUCTOR_METHOD)?\"this.$handle\" : \"this.$classHandle\"\nAnd in https://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1537\n\"const self = \" + ((type === INSTANCE_METHOD) ? \"new C(C.__handle__, thisHandle);\" : \"new C(thisHandle, null);\")\n==>\n\"const self = \" + ((type === INSTANCE_METHOD || type === CONSTRUCTOR_METHOD) ? \"new C(C.__handle__, thisHandle);\" : \"new C(thisHandle, null);\") +\nThis will pass the this handler to  function.\nSo one can modify the this object in theimplement funciton.\nAnd there is no need to return an object in the hooked constructor.\nBut the origin <init> function still can't be called from the implement function\n. Sorry, the code above should not be changed in https://github.com/frida/frida-gum/blob/df1071108b08062f43e76bde89076f493ac602dc/bindings/gumjs/gumjs-java.js#L1537\n\"const self = \" + ((type === INSTANCE_METHOD) ? \"new C(C.__handle__, thisHandle);\" : \"new C(thisHandle, null);\")\nOtherwise, the $new can't be called in the script.\nActually, the origin $new function can be called. But it doesn't make any changes to the this pointer.  Maybe it's because that the <init> function is used for initializing this pointer after the object is alloced, while the $new is used for created a new object and initializing it.\n. ",
    "pandasauce": "duplicate https://github.com/frida/frida-gum/issues/89\n. ",
    "antojoseph": "Using Easy Install fixed the issue. Thanks \n. ",
    "winsun": "@oleavr,\nin my mac osx 10.9, autoconf and automake are in /usr/local/bin directory, i can't understand what's your mean ? \n. when i brew install pkg-config, this error not occur. but\nchecking pkg-config is at least version 0.9.0... ../../../frida-gum/configure: line 17531: /Users/winsunxu/GitHub/frida/build/toolchain-mac-x86_64/bin/pkg-config: No such file or directory\nno\nchecking for GUM... no\nconfigure: error: in `/Users/winsunxu/GitHub/frida/build/tmp-mac-x86_64/frida-gum':\nconfigure: error: The pkg-config script could not be found or is too old.  Make sure it\nis in your PATH or set the PKG_CONFIG environment variable to the full\npath to pkg-config.\nAlternatively, you may set the environment variables GUM_CFLAGS\nand GUM_LIBS to avoid the need to call pkg-config.\nSee the pkg-config man page for more details.\nTo get pkg-config, see http://pkg-config.freedesktop.org/.\nSee `config.log' for more details\nmake[1]: * [build/tmp-mac-x86_64/frida-gum/Makefile] Error 1\nmake: * [python-mac] Error 2\n. tks oleavr\n. ",
    "tfoldi": "I have the same issue on El Capitan\n. After disabling SIP it's working fine for me: http://www.macworld.com/article/2986118/security/how-to-modify-system-integrity-protection-in-el-capitan.html\nStrange, because I do not run anything under root user and I was able to debug for a few seconds.\nWhatever, with SIP disabled it works fine for me.\n. ",
    "subho007": "Frida has problem building in virtual env\n. @oleavr same error happening here for 10.6.13\nupdated in both places. ",
    "Grazfather": "This issue should be closed. It was fixed by frida/frida-python#72.\n@subho007 That doesn't explain much?\n. any time!\n. ",
    "hexploitable": "Yeah, I was planning on using Socket. I want to take the buffer from readByteArray and store it on disk, i'll just do it host side. \nThanks for the prompt response!\n. Literally just read the line in the docs regarding send(). Doh.\nCheers!\n. ",
    "mirkobrandner": "I get this too from time to time. My solution to this is to kill -9 frida-server and related processes (ps | grep frida). I appears to me that if I CTR-C an already connected client, frida-server needs a restart. I am on latest Frida and Android 6.0.1.\n(I wonder if part of my problems are related to having the Xposed framework installed)\n. I am running latest Frida and Android 6.0.1. Intention is to hook Java functions. No matter what I try (node.js or python) I get Java API not available errors. I have installed the Xposed framework on the Nexus 7 2013 device and wonder if this makes a difference for Frida. Maybe this is a hint.\n. I have been told by Ole that Xposed being installed means that Java will not be available. As much as I love frida, I think there is some bigger confusion for most users as which functionality / feature is available for which version of Android, sometime things are not available on Android Intel but only ARM. Boils down to a lack in documentation.. Hey Eduardo,\n\nI managed to use frida-server up to Android 6.x ARM, not 7, that\n    gives me a SElinux policy problem\nNo frida-server for Android Intel (which would be convenient for\n    using emulators)\nXposed installation really does not have frida work, Java.available\n    will always return false. Ole had confirmed earlier. e.g., frida-ps\n    -U might work but not -Uai and hooking not at all either\nfrida does allow to hook Java virtual functions on ART but not the\n    whole interface is implemented for it, just for Dalvik\n\nThat is what I have on my mind right now, I need to check my notes if I \nhad exerienced more interesting things. But I think that is about it,\nregards, Mirko\nAm 18/01/2017 um 13:29 schrieb Eduardo Novella:\n\nHi @mirkobrandner https://github.com/mirkobrandner,\ndo you know the current status of Frida and Android? Is Android ART \nsupported or WIP? It does not make any sense to me that Xposed \ninstalled hampers the Frida instrumentation. But yeah, you guys have \nfound problems in the same stone thus it might be totally possible. \nWhy is this happening then?\nCheers\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub \nhttps://github.com/frida/frida/issues/193#issuecomment-273463080, or \nmute the thread \nhttps://github.com/notifications/unsubscribe-auth/AEDy26466OJiOJdkaxFRzYhnq3-jyS4mks5rTgWqgaJpZM4K8MjS.\n\n\n-- \nMirko Brandner\nSchulstr. 1\n70736 Fellbach\nTel. privat: 0711-50438136\nMobil privat: \u202d+49 152 32014643\u202c\nSkype: mirkobrandner\n. Worked!\nMirko Brandner\nSchulstr. 1\n70736 Fellbach\nTel. privat: +49 711 50438136\nTel. mobil: \u202d+49 152 32014643\u202c\nSkype: mirkobrandner\n\nAm 18.01.2017 um 21:23 schrieb Eduardo Novella notifications@github.com:\nHi @mirkobrandner,\nThanks for the clarifications on your testing. Have you tested Frida and Android 6.x ARM for native hooking?\nCheers\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. I used a Nexus 7 (stock) and Google emulators.\n\nI wonder: Do certain custom roms have Xposed installed? \nWould be nice to gather data for a compatibility list.\nGood night, Mirko\nMirko Brandner\nSchulstr. 1\n70736 Fellbach\nTel. privat: +49 711 50438136\nTel. mobil: \u202d+49 152 32014643\u202c\nSkype: mirkobrandner\n\nAm 18.01.2017 um 21:28 schrieb Eduardo Novella notifications@github.com:\nAbsolutely fantastic. During some discussion on the IRC channel, Ole was commenting that him was only testing on a Samsung Galaxy S6 edge and maybe some ROMs can cause issues.\nAre you using custom or stock ROMs?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. \n",
    "c0n71nu3": "Am using Frida 10.0.15 and the above issue still seems to be present. . Actually, I was wrong. It needs to be done this way :\nconsole.log(\"Result again : \" + instance.class.getDeclaredFields()); \ninstead of :\nconsole.log(\"Result again : \" + instance.getClass().getDeclaredFields()); \nand it works. ",
    "hyrathon": "thanks, it helps. ",
    "ualwayswithme": "Hello, \nAfter ran the command \"frida-trace -U -i open -f com.example.hellojni\" , the application HelloJni would be set up normally. But after I executed the fellowing python script, i got a crash.\n```\ndevice = frida.get_device_manager().enumerate_devices()[-1]\nsession = device.attach(device.spawn([\"com.example.hellojni\"]))   \nss = '''\n       console.log(\"hello\")\n'''    \nscript = session.create_script(ss)\nscript.load()\nsession.detach()\nThe log \"hello\" showed in the console. But the app just crashed. And the logcat printed something like these:\n04-17 06:14:58.279: E/WindowManager(570): Starting window AppWindowToken{41e429c0 token=Token{41f753c8 ActivityRecord{41ea5dc0 u0 com.example.hellojni/.view.MainActivity t39}}} timed out\n04-17 06:14:58.279: W/ActivityManager(570): Process ProcessRecord{41dffd18 16943:com.example.hellojni/u0a203} failed to attach\n04-17 06:14:58.289: I/ActivityManager(570): Killing 16943:com.example.hellojni/u0a203 (adj -100): start timeout\nWas my script wrong? I'm using android4.4.4, dalvik mode, windows7, firda7.0.11..\nAny help would be appreciated.\n. ",
    "xiaoxiaotu": "why exist two cat pid,it's the problme ?\n. ",
    "manuporto": "Hi,\nSorry for the delay. I added some print's so I could have more information about the Exception's but I'm not getting anything useful. Here is the edited code:\npython\ntry:\n    print('downloading prebuilt extension from', egg_url)\n    egg_data = urlopen(egg_url).read()\nexcept Exception as e:\n    print(\"Error {0}: {1}\".format(e.errno, e.strerror)) #Here\n    egg_path = os.path.join(os.getcwd(), egg_filename)\n    print('trying to get prebuilt extension from the current folder', egg_path)\nAnd this it's what I'm getting:\nrunning build\nrunning build_py\nrunning build_ext\ndownloading prebuilt extension from https://pypi.python.org/packages/3.4/f/frida/frida-7.0.10-py3.4-linux-i686.egg\nError None: None <---------------------------------------- This is the print\ntrying to get prebuilt extension from the current folder /home/mporto/Downloads/frida-7.0.10/frida-7.0.10-py3.4-linux-i686.egg\nError 2: No such file or directory\nTraceback (most recent call last):\n  File \"setup.py\", line 140, in <module>\n    'build_ext': FridaPrebuiltExt\n  File \"/usr/lib/python3.4/distutils/core.py\", line 148, in setup\n    dist.run_commands()\n  File \"/usr/lib/python3.4/distutils/dist.py\", line 955, in run_commands\n    self.run_command(cmd)\n  File \"/usr/lib/python3.4/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/usr/lib/python3.4/distutils/command/build.py\", line 126, in run\n    self.run_command(cmd_name)\n  File \"/usr/lib/python3.4/distutils/cmd.py\", line 313, in run_command\n    self.distribution.run_command(command)\n  File \"/usr/lib/python3.4/distutils/dist.py\", line 974, in run_command\n    cmd_obj.run()\n  File \"/usr/lib/python3/dist-packages/setuptools/command/build_ext.py\", line 49, in run\n    _build_ext.run(self)\n  File \"/usr/lib/python3.4/distutils/command/build_ext.py\", line 339, in run\n    self.build_extensions()\n  File \"/usr/lib/python3.4/distutils/command/build_ext.py\", line 448, in build_extensions\n    self.build_extension(ext)\n  File \"setup.py\", line 82, in build_extension\n    raise Exception(\"Could not find prebuilt Frida extension. \"\nException: Could not find prebuilt Frida extension. Prebuilts only provided for python 2.6-2.7 and 3.5\nI don't know of other way of logging what happens with urlopen, so if you do I will be glad to try it out.\nCheers!\n. To anyone that happens to have this problem, now or in the future. A workaround to this problem is to download the latest source tarball and the corresponding .egg file and run setup.py. Thanks to the Frida developers, this option is available and you can download and install Frida behind a proxy.\n. @pentagramz you are not using setup.py correctly, see it's usage (it's printed in your cmd).\n. ",
    "pentagramz": "\nI downloaded the latest version tarball and corresponding .egg file .Not able to run setup.py?\nPlease support\n. Hello I tried python setup.py install and this is the error I am facing now.\nAny pointers?\n\n\n. desktop i just downloaded \nsudo easy_install frida.\nso i believe its latest one. ok im installing in progress best match shows 10.2.3. \n. Im getting this error now. i have 10.0.15 frida in iphone device. Any workaround?. can u tell please the latest on phone. thanks finally frida running fine...:). ",
    "gi0cann": "I may be wrong, but it looks like you have a .egg for python 3.5 and you are using python 2.7 to run setup .py. Run python -V to make sure you have the correct version of python.\n. ",
    "mike4420": "There is no linux egg available for the latest version of Frida (7.2.4).\nhttps://pypi.python.org/pypi/frida\n. ",
    "blshkv": "Let me try to include https://github.com/aquynh here\n. I guess I can close that one since the changes has been attempted to push to upstream and it is a work in progress. Thank you all for the good job!\n. ",
    "aquynh": "i havent merged this because it would break all the existing bindings.\nit is only a matter of time, however. my plan is to solve this issue sometime this month, or next month, because i also want to push out v4.0 soon.\nthanks.\n. ",
    "cganas": "How was this resolved?\n. Ahh, okay. So is it still supposed to be happening? Trying to pip install frida on Windows 8.\n. So I started poking at it and other than not setting os_version the setup script is looking for a dll in the zip target_extension but the contents are:\n['_frida.py', '_frida.pyc', '_frida.pyd', 'EGG-INFO/dependency_links.txt', 'EGG-INFO/entry_points.txt', 'EGG-INFO/native_libs.txt', 'EGG-INFO/PKG-INFO', 'EGG-INFO/requires.txt', 'EGG-INFO/SOURCES.txt', 'EGG-INFO/top_level.txt', 'EGG-INFO/zip-safe', 'frida/application.py', 'frida/application.pyc', 'frida/core.py', 'frida/core.pyc', 'frida/discoverer.py', 'frida/discoverer.pyc', 'frida/lsd.py', 'frida/lsd.pyc', 'frida/ps.py', 'frida/ps.pyc', 'frida/repl.py', 'frida/repl.pyc', 'frida/tracer.py', 'frida/tracer.pyc', 'frida/__init__.py', 'frida/__init__.pyc']\npy 2.7 on Win 8 x64\n. Yeah, hacking in target_extension = \".pyd\" fixes it as far as I can tell.\nI'm facing another issue with:\n```\n\nFailed to load the Frida native extension: Permission denied\nPlease ensure that the extension was compiled for Python 2.7.\n\n```\nHowever, I think that might be local to me. I'm going to continue poking around. Once I resolve it I can set up a pull request with the changes.\n. I've been bashing my head over importing the actual native extension. I figured someone else might have more experience with it so I'll explain what's currently wrong:\nI'm running on a 64bit system; however, I didn't realize my python is 32bit. So I let it pull the amd64 build, as expected, I get a format exec error when importing _frida but it did seem to find it.\nHowever, if I overwrite that 64bit dll with the 32bit version I get \"Failed to load the Frida native extension: No such file or directory\" even though it is otherwise identical.\nTried renaming it to .pyd (even though other .dlls are successfully being imported) with no luck.\n. ",
    "ptrac3": "I am experiencing the same issue too. Was this resolved?. ",
    "inode-": "My fault, it's only supported of Windows for now.\n. ",
    "jdrowell": "Sorry to ressurect this, but I'm getting something very similar. I'm using frida-server-10.7.7-android-arm on the device.\nF/Frida   (24154): frida-gum/gum/arch-arm/gumthumbrelocator.c:427:gum_thumb_relocator_can_relocate: assertion failed: (insn != NULL)\nF/libc    (24154): Fatal signal 6 (SIGABRT), code -6 in tid 24262 (gum-js-loop)\nI/debuggerd( 2827): type=1400 audit(0.0:3496): avc: denied { ptrace } for scontext=u:r:debuggerd:s0 tcontext=u:r:init:s0 tclass=process permissive=1\nI/DEBUG   ( 2827): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\nI/DEBUG   ( 2827): Build fingerprint: 'Android/sw01/sw01:5.1.1/LMY47V/20171015:user/test-keys'\nI/DEBUG   ( 2827): Revision: '0'\nI/DEBUG   ( 2827): ABI: 'arm'\nI/DEBUG   ( 2827): pid: 24154, tid: 24262, name: gum-js-loop  >>> ./HelloWorld <<<\nI/DEBUG   ( 2827): signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------\nI/DEBUG   ( 2827): Abort message: 'frida-gum/gum/arch-arm/gumthumbrelocator.c:427:gum_thumb_relocator_can_relocate: assertion failed: (insn != NULL)'\nI/DEBUG   ( 2827):     r0 00000000  r1 00005ec6  r2 00000006  r3 00000000\nI/DEBUG   ( 2827):     r4 f54c3dd8  r5 00000006  r6 00000000  r7 0000010c\nI/DEBUG   ( 2827):     r8 f634f150  r9 000001ab  sl f5839f50  fp 00000002\nI/DEBUG   ( 2827):     ip 00005ec6  sp f54c35e8  lr f6f8714d  pc f6fad228  cpsr 600f0010\nI/DEBUG   ( 2827):\nI/DEBUG   ( 2827): backtrace:\nI/DEBUG   ( 2827):     #00 pc 00025228  /system/lib/libc.so\nI/DEBUG   ( 2827):     #01 pc 00000149  /system/lib/libc.so\n. To give more context, I'm hooking several functions just fine, but weirdly it seems that after a certain address (same segment), any hooks I add give a SIGABRT. The code I'm analyzing is malicious, so the signal may be caused by anti-hooking techniques which I haven't identified.. ",
    "mrmacete": "for me is the same, it all started suddenly 15 minutes ago: it kicked me out while i had a REPL session running and the phone went standby, then it started refusing connection, on the phone now the persistent failure is:\nbash\nCane:~ root# frida-server \n2016-04-25 17:22:46.361 frida-server[853:4849] Frida: frida_temporary_file_destroy: assertion 'self != NULL' failed\nTrace/BPT trap: 5\nCane:~ root#\neven rebooting doesn't help :(\nboth server and client are version 7.1.4\n. maybe \"solved\": apparently there were too much frida-* things inside /Library/Caches, just nuked them all and frida-server started again, is it correct?\nactually, after the \"fix\", it failed to attach to apps - but was able to spawn them. after spawning, also attaching works again.\n. well, to my understading you can get the offset in this way using frida CLI:\n$ frida -U -f com.supermorte.nsurl-request\n     ____\n    / _  |   Frida 11.0.12 - A world-class dynamic instrumentation toolkit\n   | (_| |\n    > _  |   Commands:\n   /_/ |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\nSpawned `com.supermorte.nsurl-request`. Use %resume to let the main thread start executing!\n[iPhone::com.supermorte.nsurl-request]-> %resume\n[iPhone::com.supermorte.nsurl-request]-> DebugSymbol.fromName('boringssl_session_finish_handshake').address.sub(Module.findBaseAddress('libboringssl.dylib'))\n\"0x14888\"\nand then use that in frida-trace -a:\n$ frida-trace -U -f com.supermorte.nsurl-request -a 'libboringssl.dylib!0x14888'\nbut probably it's simpler to use frida-trace -s:\nfrida-trace -U -f com.supermorte.nsurl-request -s 'boringssl_session_finish_handshake'\nnote: i didn't try this with ssl killer tweak, but frida-trace seems happy. You have to get an instance of the object first, either:\n- allocating it and calling its constructor, for example var instance = ObjC.classes.ClassName.alloc().init();\n- getting an existing instance using ObjC.choose, like - if you know there's only one instance already created somewhere on the heap - you can to something like var instance = ObjC.chooseSync(ObjC.classes.ClassName)[0];\n- getting an existing instance from a singleton you know holds the instance in a property, for example var instance = ObjC.classes.MySingleton.getInstance().myInterestingInstance();\nand then call the method on the instance:\ninstance.setSomething();\nor, if the method signature takes an argument, like - setSomething:, you can also pass the argument (just remember to put a _ instead of ObjC's :):\ninstance.setSomething_(argument);\nbtw, you can find few examples of this here: https://www.frida.re/docs/examples/ios/\n. If you mean enumerating their type and get the number of them, I think getting the argumentTypes (and maybe returnType) properties of a method is the best approximation of what you're asking, examples from the CLI:\n```\nObjC.classes.UIView['- addSubview:'].argumentTypes\n[\n    \"pointer\",\n    \"pointer\",\n    \"pointer\"\n]\nObjC.classes.UIView['- addSubview:'].returnType\n\"void\"\n```\nYou can also get the low level encoding of types, like this, FWIW:\nObjC.classes.UIView['- addSubview:'].types\n\"v24@0:8@16\". Well, to my understanding NSTaggedPointerString is a subclass of NSString which, for very short strings, encodes its characters directly in the underlying pointer instead of pointing to an actual array of chars.\nYour solution to return a new instance of NSString looks good to me - because callers shouldn't make assumptions on the underlying concrete subclass.. from what you print it seems that new ObjC.Object(args[2]) actually is an array of AddMsg instances, i guess you should get the first element before getting the $ivars property, like:\nvar vars1 = new ObjC.Object(args[2]).objectAtIndex_(0).$ivars. are you able to spawn using Frida command line tools?\nif it's r2frida's fault please fill an issue here instead: https://github.com/nowsecure/r2frida/issues. the easiest workaround is to just disable bitcode when compiling your project (in build settings) that's not needed anyways (you're not going to submit frida-gadget to AppStore, right?). I see a couple possible problems here:\n- from iOS 11 on, apple is migrating to boringssl and things work quite differently - so probably the functions you're hooking are there but probably never called (see this for some more info: https://github.com/frida/frida/issues/541)\n- apps using WKWebView (which may be the case for your Cordova apps) actually run all network code outside the app process, as webkit webview has its own helper processes so you might need to attach also those (i don't remember the name right now but look at ps aux | grep -i webkit while the webview is running on the device). it seems you're trying to call methods on alertview which is the class itself, not an instance.\ni guess you have to call that on an instance.\na way to get all the running instances of a given class is to use ObjC.choose, like:\nvar alertInstances = ObjC.chooseSync(ObjC.classes.UIAlertView);\nwhere now alertInstances is an array of instances you can iterate to call the method you want. obviously the array isn't empty only if there are actual instances of UIAlertView alive in your app.. oh. and what's instead?\nalso: i think you can get rid of the whole for and if, just leave this:\nvar instance=ObjC.chooseSync(ObjC.classes.UIAlertView);\nconsole.log(JSON.stringify(instance));\nif the array is empty then it means either:\n- no alerts are being shown in the app while you run that code\n- the alert you're seeing is not an instance of UIAlertView\n- the alert you're seeing is not in the app process, but likely some other process (SpringBoard?). look at the ObjC API docs here: https://www.frida.re/docs/javascript-api/#objc\nyou'll be able to alloc and init the classes you need, call methods, create blocks, etc.\ntake also a look to the many iOS-related examples on https://codeshare.frida.re/browse to have an idea how to use that.. I think it's because iPhone5 is an armv7 device, for which spawning apps is currently broken.. one hypothesis here is that:\n\nyou're creating your NSData instance using an autoreleased constructor (i.e. it returns an already-autoreleased value)\nthe caller isn't retaining it (because it doesn't expect it to be autoreleased in the first place)\n\ndid you try to use the alloc + init way so to get a retained instance? or just to call .retain() before replacing? if that solves the bad access, then you have to manage the lifecycle of that instance yourself wisely to avoid memleaks. oh yeah now i guess that's because you're using the wrong initializer?\nwhat i meant was:\nvar test = ObjC.classes.NSData.alloc().initWithBytes_length_(address, size);. hrm... interesting. without more context it's difficult to explain this. i'd try to see what bt all says in the debugger to figure out what code is actually failing.. The second argument is a pointer to an NSError, which actually gets allocated inside the called method.\nIn this case you should allocate enough memory to contain just the pointer itself, like:\nvar errorPtr = Memory.alloc(Process.pointerSize);\nMemory.writePointer(errorPtr, NULL); // initialize to NULL\nthen, pass that errorPtr as the second argument:\nvar result = class[\"+ _iMessage_canSendComposition:error:\"](arg1, errorPtr);\nAfter the call you can read the pointer's value and check it, for example:\nvar error = Memory.readPointer(errorPtr);\nif (!error.isNull()) {\n    var errorObj = new ObjC.Object(error); // now you can treat errorObj as an NSError instance\n    console.log(errorObj.toString());\n}. what did you try that didn't work out?. ",
    "ali-alidoust": "Is there any way to enable it when using Python CLI?\n. ",
    "vakexuta": "Same problem here with Nexus 9 (Android 6.0.1), frida 7.1.4\n. ",
    "reu-res": "Fixed. \nThanks.\n. Me too. Arch linux, python 2.7.11\n```\n$ sudo pip2 install -U frida\nCollecting frida\n  Using cached frida-7.1.5.zip\nRequirement already up-to-date: colorama>=0.2.7 in /usr/lib/python2.7/site-packages (from frida)\nRequirement already up-to-date: prompt-toolkit>=0.57 in /usr/lib/python2.7/site-packages (from frida)\nRequirement already up-to-date: pygments>=2.0.2 in /usr/lib/python2.7/site-packages (from frida)\nRequirement already up-to-date: six>=1.9.0 in /usr/lib/python2.7/site-packages (from prompt-toolkit>=0.57->frida)\nRequirement already up-to-date: wcwidth in /usr/lib/python2.7/site-packages (from prompt-toolkit>=0.57->frida)\nInstalling collected packages: frida\n  Found existing installation: frida 7.1.4\n    Uninstalling frida-7.1.4:\n      Successfully uninstalled frida-7.1.4\n  Running setup.py install for frida ... error\n    Complete output from command /usr/bin/python2 -u -c \"import setuptools, tokenize;file='/tmp/pip-build-q7ZkZH/frida/setup.py';exec(compile(getattr(tokenize, 'open', open)(file).read().replace('\\r\\n', '\\n'), file, 'exec'))\" install --record /tmp/pip-R8qrkN-record/install-record.txt --single-version-externally-managed --compile:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build/lib.linux-x86_64-2.7\n    creating build/lib.linux-x86_64-2.7/frida\n    copying frida/init.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/tracer.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/repl.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/ps.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/lsd.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/discoverer.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/core.py -> build/lib.linux-x86_64-2.7/frida\n    copying frida/application.py -> build/lib.linux-x86_64-2.7/frida\n    running build_ext\n    downloading prebuilt extension from https://pypi.python.org/packages/2.7/f/frida/frida-7.1.5-py2.7-linux-x86_64.egg\n    trying to get prebuilt extension from the current folder /tmp/pip-build-q7ZkZH/frida/frida-7.1.5-py2.7-linux-x86_64.egg\n    Traceback (most recent call last):\n      File \"\", line 1, in \n      File \"/tmp/pip-build-q7ZkZH/frida/setup.py\", line 138, in \n        'build_ext': FridaPrebuiltExt\n      File \"/usr/lib/python2.7/distutils/core.py\", line 151, in setup\n        dist.run_commands()\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 953, in run_commands\n        self.run_command(cmd)\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"/usr/lib/python2.7/site-packages/setuptools/command/install.py\", line 61, in run\n        return orig.install.run(self)\n      File \"/usr/lib/python2.7/distutils/command/install.py\", line 563, in run\n        self.run_command('build')\n      File \"/usr/lib/python2.7/distutils/cmd.py\", line 326, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"/usr/lib/python2.7/distutils/command/build.py\", line 127, in run\n        self.run_command(cmd_name)\n      File \"/usr/lib/python2.7/distutils/cmd.py\", line 326, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"/usr/lib/python2.7/site-packages/setuptools/command/build_ext.py\", line 49, in run\n        _build_ext.run(self)\n      File \"/usr/lib/python2.7/distutils/command/build_ext.py\", line 339, in run\n        self.build_extensions()\n      File \"/usr/lib/python2.7/distutils/command/build_ext.py\", line 448, in build_extensions\n        self.build_extension(ext)\n      File \"/tmp/pip-build-q7ZkZH/frida/setup.py\", line 80, in build_extension\n        raise Exception(\"Could not find prebuilt Frida extension. \"\n    Exception: Could not find prebuilt Frida extension. Prebuilts only provided for python 2.6-2.7 and 3.5\n----------------------------------------\n\nRolling back uninstall of frida\nCommand \"/usr/bin/python2 -u -c \"import setuptools, tokenize;file='/tmp/pip-build-q7ZkZH/frida/setup.py';exec(compile(getattr(tokenize, 'open', open)(file).read().replace('\\r\\n', '\\n'), file, 'exec'))\" install --record /tmp/pip-R8qrkN-record/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /tmp/pip-build-q7ZkZH/frida/\n```\n. ",
    "MariasStory": "Me too in Ubuntu.\nThere seems to be a hard codded python number that doesn't much the subversion and stops the installation.\n. Ping.\n. ",
    "jenisys": "Looks good. Everything is fine again :smile:\n. ",
    "jamesst20": "Issue confirmed with my OnePlus X running CM13 Marshmallow.\nfrida-ps -Uai open com.android.chrome\nWaiting for USB device to appear...\nFailed to enumerate applications: java API not available\n. @oleavr\nI dont think this issue has anything to do with Xposed. Must be confirmed.. ",
    "nevermoe": "Sorry, it still doesn't work after i switching to your suggested style. I noticed that the function I'd like to hook might be an operator overload. In dynamic debugging, there is comment like \n``\nMyApp_inhouseJson::Value::operator[]:\n    0xbadbc <+0>:  push   {r7, lr}\n    0xbadbe <+2>:  mov    r7, sp\n```\nCan operator overload be hooked?\n. Perfectly solved my problem. Thank you!\n. Thank you Oleavr!\nThere remains a question that when I use Stalker on mac it also crashes. I tried to attach to a simple helloworld program and the stalker ran fine. But when I tried to stalk firefox, or calculator, it just crashed.. @oleavr hi, I'm on Android 7 and I am experiencing the same issue. It seems that first libfoo.so is loaded by the app itself and the second libfoo.so is loaded by frida. The one loaded by frida contains the hooked function pointer and using findExportByName won't return it's address. It will return the un-modified function address from the first libfoo.so and causing my hook not working. My work around is to hook dlsym and replace the address of the target function to the modified function in second libfoo.so. Anyway, I still want to figure out why this happens. It does not happen when I hook libc.so, but it happens when I hook a unity game's so file. Any suggestion?. ",
    "claudiocellec": "Hi,\nThanks for the quick help!\nit did worked. but now when i try to change more than one argument, like this:\nargs[2] = ObjC.classes.NSString.stringWithString_('a');\nargs[3] = ObjC.classes.NSString.stringWithString_('b');\nargs[4] = ObjC.classes.NSString.stringWithString_('c')\nIt does work only when the function is first called, after that, only the first argument (args[2]) is being changed. I have no clue why that happens.\nIs there a solution for this problem?\nThanks again,\nClaudio.\n. ",
    "brandon15811": "I started looking at this, and it applies to regular linux as well (when using dlopen at least). \nI've traced it to https://github.com/frida/frida-core/blob/ddb4f0b031cd51a717b22d3c7a1c3624e1adf960/lib/gadget/gadget-glue.c#L576 so far, it gets stuck somewhere in gum_interceptor_replace_function.\nTest case:\n```\ninclude \ninclude \ninclude \nint main(int argc, char argv) {\n    void handle;\n    char error;\nprintf(\"%s\\n\", \"test1\");\n//It doesn't get past dlopen\nhandle = dlopen (\"./frida-gadget.so\", RTLD_LAZY);\nif (!handle) {\n    fputs (dlerror(), stderr);\n    fputs(\"\\n\", stderr);\n    exit(1);\n}\nprintf(\"%s\\n\", \"test2\");\n\ndlclose(handle);\n\n}\n```\n. ",
    "c3c": "Thanks Ole :)\nI'll check it out in the near future.\nOn 7 August 2016 at 15:16, Ole Andr\u00e9 Vadla Ravn\u00e5s notifications@github.com\nwrote:\n\nThanks! This should be fixed in the latest releases, so let me know in\ncase 7.2.24 or newer doesn't fix this.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/149#issuecomment-238081850, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/ACOBoSmVb0kTBb2Tq4xSzUbvXGhX9DBKks5qddqmgaJpZM4IuAlE\n.\n\n\nGroeten,\nCedric\n. ",
    "pharazone": "The same problem\u2026\u2026how to reload the classes and the methods that dymanic loaded by the Packer.. MacOS 10.14.4    the same problem. ",
    "dspiir": "Java.perform(function() {\n    var classLoaderToUse = Java.enumerateClassLoadersSync()[1]; //Get another classloader\n    Java.classFactory.loader = classLoaderToUse; //Set the classloader to the correct one\n    var res = classLoaderToUse.findClass('<class name>'); //Just some simple test to make sure that the class can be loaded\n    console.log(res);\n});\nNow that the classFactory.loader is set can you hook classes in normal manner. ",
    "nshuba": "@dspiir thanks for the snippet! After getting the correct loader I am finally able to call Java.use(`<class name>`), however the returned object's methods are undefined... So I cannot hook them.\nCould anyone please post a more complete example? This is a similar issue, but there is no full sample there either.. @Disane were you able to find a solution to your issue? I am facing the exact same problem.. According to Disane's post on SE the issue was only present in Android versions above 4.4. \nBut the recommended Android is 8.1, which is what I am using. I am also using the latest Frida - 12.3.1. Is it possible for this issue to be fixed for newer Android OSes?. Ok I think I figured it out. Will post an easy example here in case anyone else gets stuck on something similar. Let's say we have the following classes in our Android code:\n```java\npublic class Person {\n    public String getName() { return  \"Original Name\"; }\n}\npublic class SpecialPerson extends Person {\n    @Override\n    public String getName() { return  \"Special Name\"; }\n}\n```\nAnd say we have the following use cases:\n```java\nPerson p = new Person();\nLog.d(TAG, p.getName());\nPerson p2 = new Person() {\n    @Override\n    public String getName() { return \"Override Name\"; }\n};\nLog.d(TAG, p2.getName());\nPerson sp = new SpecialPerson();\nLog.d(TAG, sp.getName());\n```\nSimply hooking getName will only work for the Person class. To hook all of them, we need to hook them in the base class constructor as follows:\n```javascript\nJava.perform(function() {\n    const origClassName = 'edu.uci.calit2.anteater.evaluator.Person';\n    const Person = Java.use(origClassName);\nPerson.$init.overload().implementation = function() {\n    console.log(\"Person constructor called \" + this.$className);\n    const SpecializedPerson = Java.use(this.$className);\n\n    SpecializedPerson.getName.implementation = function() {\n        const retVal = SpecializedPerson.getName.call(this);\n        console.log(\"Person.getName intercepted: \" + retVal);\n\n        return retVal;\n    };\n\n    return this.$init();\n};\n\n});\n```\nIssue can now be closed I think :). ",
    "junorouse": "Is it under development?. ",
    "stayliv3": "i just follow the article.\nthe code of ctf.js \nJava.perform(function () {\n    var c = Java.use(\"kr.repo.h2spice.yekehtmai.c\")\n    c.a.implementation = function (str1, str2) {\n        console.log(\"String1: \" + str1)\n        console.log(\"String2: \" + str2)\n    }\n});%\nuse the command \nfrida -U kr.repo.h2spice.yekehtmai  -l ctf.js\n. i test on android 4.4.4 . it is OK. maybe it's the bug of my rom of android 4.4.2\n. thanks for your reply. i'll modify the issue now.\n. i know where is my problem and would create a new issue to explain it .\n. really thanks for u. I'll try it.\n. @oleavr i test on the android 4.4.4 and frida 7.2.13  but still get the error message\nError: put: argument types do not match any overload\n    at HashMap.f (repl1.js:1089:27)\n    at repl1.js:3278:9\n    at VM.perform (repl1.js:2124:17)\n    at repl1.js:284:24\n    at Array.forEach (native)\n    at performPending (repl1.js:282:21)\n    at repl1.js:264:29\n    at VM.perform (repl1.js:2124:17)\n    at Runtime.perform (repl1.js:259:24)\n    at repl1.js:3274:9\nthe javascript i used\n```\nJava.perform(() =>{\n    const HashMap = Java.use('java.util.HashMap');\n    const initialCapacity = 2;\n    const map = HashMap.$new(initialCapacity);\n    map.put('name', 'Joe');\n    map.put('description', 'Engineer');\n    });\n```\n. @0xABD thanks for your advice. can u show me the javascript we should try. \n. ",
    "cheavyio": "I ran the same code as stayliv3 on a Samsung Galaxy S5 running 4.4.4 and in an ARM emulator running 4.4.2.   I'm getting the same error on the S5, but it runs fine in the emulator.\n[USB::Samsung SM-G900V::13090]-> Error: java.lang.NoClassDefFoundError: kr/repo/h2spice/yekehtmai/c\n    at [object Object].pending.forEach.sources.forEach.Object.keys.forEach.v.object.v.hasOwnProperty.Array.every.call.Env.checkForExceptionAndThrowIt (gumjs-java.js:2357:31)\n    at [object Object]. (gumjs-java.js:2345:18)\n    at [object Object].findClass (gumjs-java.js:2339:32)\n    at ClassFactory.use (gumjs-java.js:426:40)\n    at Runtime.pending.forEach.use (gumjs-java.js:315:33)\n    at repl2.js:3:20\n    at VM.perform (gumjs-java.js:2110:17)\n    at Runtime.perform (gumjs-java.js:251:24)\n    at repl2.js:2:8\nFor reference I'm running 7.2.14.  The server version is 7.2.4.\n. ",
    "enovella": "Sorry but the way of explaining yourself is way chaotic. \nApparently, you will have to overload your method defining the input parameters as java.util.Map\nCheers\n. Hi all,\nI just updated Frida from 7.1.3 to 8.0.3/8.1.0 and I am experimenting the same issue today. What it is weird is that the hooks I am working with were working smoothly in Frida 7.x.x (Android 4.4.4 Dalvik VM)\nThe error is when I do some casting (getIV function) outside of Java.perform():\n[!] Received: [Cipher.init(mode,key,parametersSpec): ]\n[!] Received: [Mode:]\n[!] Received: [ENCRYPT_MODE(1)]\n[!] Received: [Key:]\n[!] Received: [XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX]\n[!] Received: [AlgorithmParameterSpec:  (IV)]\n[!] Received: [{u'columnNumber': 23, u'description': u'Error: Not allowed outside Java.perform() callback', u'fileName': u'gumjs-java.js', u'lineNumber': 133, u'type': u'error', u'stack': u'Error: Not allowed outside Java.perform() callback\\n    at assertCalledInJavaPerformCallback (gumjs-java.js:133:23)\\n    at Runtime.use (gumjs-java.js:314:13)\\n    at getIV (script1.js:50:58)\\n    at Cipher.cipher.init.overload.implementation (script1.js:229:27)\\n    at init (eval at implement (gumjs-java.js:1556:13), <anonymous>:1:260)'}]\nI will check it out along today to see what is happening. \nCheers\n. Hi again,\nI have downgraded Frida from 8.1.0 to 7.1.4 and my old hooks are working fine:\n[!] Received: [Cipher.init(mode, key, parametersSpec): ]\n[!] Received: [Mode:]\n[!] Received: [DECRYPT_MODE(2)]\n[!] Received: [Key:]\n[!] Received: [E64389C45A5CC10157EBE11052562C23]\n[!] Received: [AlgorithmParameterSpec:  (IV)]\n[!] Received: [1755EDC583F5F87770D2265343A3A13F]\nLet us see what it is going on.  I would like to use the latest Frida version :)\nCheers,\n   Edu\n. Try using pip:\nsudo pip install frida==7.1.4\nI have not looked into the aforementioned issue yet. Busy at the moment.\n. Yeah. Both binaries must have the same version. I think I am using frida 7.1.4 and frida-server 7.1.3 if I recall correctly.\n. Hi,\nI have been storing on my HDD several versions of frida-server arm32 for a while. You never know :) I will upload it to somewhere tomorrow.\nCheers\n. Hi @mirkobrandner,\ndo you know the current status of Frida and Android? Is Android ART supported or WIP?  It does not make any sense to me that Xposed installed hampers the Frida instrumentation. But yeah, you guys have found problems in the same stone thus it might be totally possible. Why is this happening then? \nCheers. Hi @mirkobrandner,\nThanks for the clarifications on your testing.  Have you tested Frida and Android 6.x ARM for native hooking?\nCheers\n. Absolutely fantastic. During some discussion on the IRC channel, Ole was commenting that him was only testing on a Samsung Galaxy S6 edge and maybe some ROMs can cause issues.\nAre you using custom or stock ROMs?\n. Did you forward the TCP port for frida-server?. Hi @razaina,\ncould you provide more details about your set up and versions? \nAlso, if you are  using a python script might be handy to share the critical parts to try to identify the error.\nCheers. Hi @mutepigz ,\nAfter Frida version 9.x new Android features were added in the framework. Are you trying to hook ART or Dalvik?.  \nCheers. Please take a peek at https://github.com/frida/frida-java/issues/29. Hey,\nwhat about if you try this way?\n$ adb shell\nshell@zerolte:/ $ su\nroot@zerolte:/ # cd  /data/local/tmp/\nroot@zerolte:/ # ./frida-server &\nRemember to forward the TCP port for the channel between client & server.\nCheers\n. Would it be possible to upgrade Frida? This version looks ancient to me.. You could useInterceptor like that:\n```\n    var ptr_calc = Module.findExportByName(\"libcalc.so\",\"calc\");\n    send(\"ptr_calc = \" + ptr_calc);\n    Interceptor.attach(ptr_calc, {\n        onEnter(args) {\n        // do things\n\n        } ,\n        onLeave(retval) {\n        // do things\n        }\n});\n\n```\n. Did you mention native hooks? Because Xposed does not support native instrumentation, doesnt it?\n. Please run on your box:\n$ file frida-server-10.6.15-android-arm\nDid you uncompress the server?. Some questions:\n1. how do you run the frida-server? \n2. how do you launch Frida? bindings? REPL?\n3. could you run $ file frida-server on your box?\n4. did you chmod the binary on your nexus 5X?\nI am using Frida on Nexus5X for a while and never found this issue.. \n3. Please do $ file frida-server on your machine before pushing it into your Nexus5X. Did you uncompress the server?. What if you hook the methods stringFromJNI or setText?. In your code snippet you were hooking onStart but you are interested in onCreate. Mismatch?\nBtw, there was an issue (https://github.com/frida/frida-java/issues/29) with this topic. Did you take a peek at it?\nBR,. What about hooking a.d() if you want to intercept byte[] t?. In any case a.f() should work as well, if not probably it is not being called or triggered properly.. Sound odd to me. Can you share the APK?\nAlso, can you show the entire hook.js you are using?. Please try to share code snippets, and it will be way easier to give you ideas or advises.. Hi @cgbcsh,\nI see you wrote JS instead of Python code for your hooks, right?  Several things to discuss:\n\nTry to use unicode encoding instead of non-ascii characters. ( e.g.  this.\\u0345() instead of  this.\u1428())\nPython script should include both the JS file opening and encoding with UTF8\nDid you try with Frida REPL? Shouldn't give you errors\n\nCheers,\n   Eduardo N.\n. Hi,\nhave you tried Java.cast() ?\nhttps://www.frida.re/docs/javascript-api/. IMHO, Jadx is more updated and reliable than dex2jar.\nhttps://bintray.com/skylot/jadx/unstable#files. Hi @krytarowski,\nCan you see where the problem is by doing command to command? For instance, \n\nDo curl\nDo curl + xz\nDo curl + xz + tar\n....\n\nYou will find the issue by yourself. But at first glance, it seems related to xz.\nCheers\n. Hi @0xTHEgod,\nwhich permissions did you give to frida-server? which ROM are you using?  More details are always needed to try to spot the problem.\nCheers. Hi @gensone ,\nPlease share your code snippet to try to spot the issue.\nCheers. This is working for me and should work for you guys:\n```java\nJava.perform(function() {\n    const System = Java.use('java.lang.System');\n    const Runtime = Java.use('java.lang.Runtime');\n    const SystemLoad_2 = System.loadLibrary.overload('java.lang.String');\n    const VMStack = Java.use('dalvik.system.VMStack');\nSystemLoad_2.implementation = function(library) {\n    console.log(\"Loading dynamic library => \" + library);\n    try {\n        const loaded = Runtime.getRuntime().loadLibrary0(VMStack.getCallingClassLoader(), library);\n        if(library.includes(\"yourlibraryhere\")) {\n            // do stuff\n        }\n        return loaded;\n    } catch(ex) {\n        console.log(ex);\n    }\n};\n\n});\n```\nPlease close the issue when tested.. Please provide more info about your issue. E.g. frida version, architecture, code snippets, OS host, OS target, etc etc. Did you unpack the file xz?. Hi @cryptax,\nJust to ensure 2).... can you maybe try to run Frida from /sdcard/? . And highlight source code please :). Please format the source code. :). This app just starts/stops the server, but you can edit the code to also download the latest version.\nhttps://github.com/iGio90/frida-android-toggle. Only happens that with this app and this method? \nNo adb logcat?. Hey @supercop89,\nthis was already discussed. Please take a peek at https://github.com/frida/frida/issues/392#issuecomment-349921688. I always do it and it works for me. Give a try.. java\nconst hook = Java.use(\"com.application.obfuscated\");\nhook.\\u0345.overload().implementation = function() {\n       // do stuff\n    this.\\u0345.overload().call(this);\n};\nI mentioned the link above ;). ",
    "c00lyu": "@stayliv3 you can just try\n```\nvar HashMap = Java.use(\"java.util.HashMap\");\nvar Map = Java.use(\"java.util.Map\");\nhashmap = HashMap.$new()\nvar map = Java.cast(hashmap, Map);\nmap.put(\"a\", \"1\");\nmap.put(\"b\", \"2\");\n```. ",
    "wejdan": "how do I pass the arguments? for example if the function take two integers\n. Thank you I did set the lower bit to 1 and now it work :)\n. ",
    "juergenhoetzel": "\noleavr closed this on 19 Jan 2017\n\nIs this feature implemented meanwhile? . @benj56  I can reproduce this on an Android 6 Device (OnePlus One). Most likely you also hit the Activity Manager timeout. From adb logcat:\n08-27 14:57:45.530   825   863 W ActivityManager: Launch timeout has expired, giving up wake lock!. ",
    "HyEvil": "It is worked.\nBut got new errors..\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:298:49: error: use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?\ntemplate <>          struct __is_nullptr_t_impl<nullptr_t> : public true_type {};\n                                                ^\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:298:49: error: template argument for template type parameter must be a type\ntemplate <>          struct __is_nullptr_t_impl<nullptr_t> : public true_type {};\n                                                ^~~~~~~~~\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:297:17: note: template parameter is declared here\ntemplate <class _Tp> struct __is_nullptr_t_impl       : public false_type {};\n                ^\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:530:52: error: use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?\ntemplate <> struct _LIBCPP_TYPE_VIS_ONLY is_scalar<nullptr_t> : public true_type {};\n                                                   ^\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:530:52: error: template argument for template type parameter must be a type\ntemplate <> struct _LIBCPP_TYPE_VIS_ONLY is_scalar<nullptr_t> : public true_type {};\n                                                   ^~~~~~~~~\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:523:17: note: template parameter is declared here\ntemplate <class _Tp> struct _LIBCPP_TYPE_VIS_ONLY is_scalar\n                ^\nIn file included from ../src/base/file-utils.cc:10:\nIn file included from .././src/base/platform/platform.h:25:\nIn file included from /root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/list:174:\nIn file included from /root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/memory:597:\n/root/android-ndk-r12b//sources/cxx-stl/llvm-libc++/libcxx/include/type_traits:298:49: error: use of undeclared identifier 'nullptr_t'; did you mean 'nullptr'?\ntemplate <>          struct __is_nullptr_t_impl<nullptr_t> : public true_type {};\n                                                ^\n. ",
    "flop01": "Thanks for your prompt answer !\nSure, on both WinXP and Ubuntu 14.04 it's working upto Frida 7.0.11 and starts to fail from frida 7.1.0.\nSo problem looks to have happened on 7.1.0.\nRegards\n. ",
    "mrgreywater": "Doesn't appear to work in Frida 9.1.6. I tried your suggested Interceptor.replace, but NativeCallback appears to not properly clean the stack with the 'thiscall' abi on return on X86 (Windows). I'll investigate and create another bug report then. . thiscall has the first arg in ecx, and the callee cleans the stack (in this case the 'NativeCallback'). I'll try fastcall as workaround, which is almost the same.. edit: nope, libffi implements the msvc version of  thiscall: https://github.com/libffi/libffi/blob/60e4250a77eb3fde500bfd68ec40519fe34b21bd/src/x86/ffi.c#L228\nit also crashes with fastcall (with an empty additonal second [edx] argument). I'll go investigate.. Ok, the problem is that NativeCallback actually cleans too many arguments. (On X86, Windows)\n```\nvar func = new NativeFunction(func_ptr, 'pointer', ['pointer', 'pointer','pointer', 'pointer','pointer', 'pointer'] , 'thiscall')\nInterceptor.replace(func_ptr, new NativeCallback(function (ecx, stack1, stack2, stack3, stack4, stack5) {\n    return func(ecx, stack1, stack2, stack3, stack4, stack5)\n}, 'pointer', ['pointer', 'pointer', 'pointer', 'pointer', 'pointer', 'pointer'], 'thiscall'));\n```\nThe NativeCallback cleans 0x18 Bytes from the stack instead of the supposed 0x14 after properly executing the original function, which then crashes the caller of func_ptr. Same happens with the fastcall convention.\nedit: added new issue https://github.com/frida/frida/issues/229. Well, calling a NativeFunction with thiscall works, so It would be weird if it's the ffi_prep_cif call... But maybe frida is just saving and restoring esp so an unbalanced stack after the call doesn't matter there.\nI'm kinda busy right now, so I doubt I'll find the time to try fixing this anytime soon, sorry :S. ",
    "0xdeadbeefJERKY": "Been asking this for months now with no response...\n. I've tried using versions 8.1.6 and 7.3.6 (both frida client on OSX and frida-server on iOS matching). Unfortunately, I received the same error message.\n. Although this isn't a detailed bug report (apologies for that), I was able to resolve the issue. For some reason, the default deployment of frida-server from the Cydia repository isn't properly configured to interact with the frida client (at least out of the box). Additionally, I was unable to successfully kill frida-server from a shell on the device, as it would automatically restart. Once I removed the binary (and the repo), I pushed the frida-server binary from here to the device and started manually using the frida-server -l [listening interface IP] command. Afterward, I was able to attach to any target process without any errors.\n. @oleavr Thanks for the direction, much appreciated. I was running the client on OS X (El Capitan) and tried running the standalone binary with the -l switch and without (defaulting to localhost:27042). I was able to connect from the client in both situations, but confirmed that the version installed from Cydia (.deb package) was unsuccessful.\n. ",
    "piaoapiao": "you can delete some file,especailly \"/\" directory.\n. ",
    "v4if": "have you solved?\n. ",
    "jabbink": "Currently on mobile so can't look into it. I was suspecting this and actually made room behind the 036 address (put about 10-15 nop instructions there hoping it would be enough) but it didn't work. Will possibly look into this later today.\n. ",
    "c4242": "Thanks for the replies, I was worried it was some silly user mistake. What commit did you use to get to 7.1.3? I cannot find any pre-built older binaries available.\n. I tried that before posting but I'm assuming the server side Frida version must match the client side version. If I'm using 8.1.1 on the server and 7.1.4 on the client I get this error:\n```\n  File \"/usr/lib64/python2.7/site-packages/frida/core.py\", line 84, in spawn\n    return self._impl.spawn(argv)\nfrida.TransportError: no such interface 're.frida.HostSession7' on object at path /re/frida/HostSession\n```\n. But did you compile it from the git repo or did you get a binary from somewhere? If from the repo, then what commit did you build, if the latter, could you share where you got it?\n. ",
    "douniwan5788": "show more details please. is frida-server run in root?. ",
    "strano666": "Try to update to the 8.1.14\nNow works with me!. I've updated both frida and server (version 8.1.12), but the problem still persists.\n. I tried the workaround found here\nhttps://github.com/frida/frida/issues/182\nI've pushed the frida-server manually.\nand it's worked for me.\n. I've updated the packages to 8.1.14 and everything go well!!\nThank you guys!. ",
    "Neo01010": "\nRunning on android 5.1.Can't not start the server.\n. ",
    "krokofant": "@oleavr The log doesn't say much at all when starting the server or running the trace \ud83d\ude15 \nI changed the SELinux mode to permissive and then got Frida to say Resolving functions... and the logcat to output this upon a trace:\n11-12 21:14:27.279   3172     3506                  Frida  F  frida-gum/gum/backend-linux/gumprocess-linux.c:1218:gum_elf_module_open: assert\n                                                            ion failed: (module->data != MAP_FAILED)\n11-12 21:14:28.290   3172     3172                   libc  F  Fatal signal 6 (SIGABRT), code 0 in tid 3172 (llm.android.app)\n11-12 21:14:28.292   351      351                   DEBUG  I  property debug.db.uid not set; NOT waiting for gdb.\n11-12 21:14:28.292   351      351                   DEBUG  I  HINT: adb shell setprop debug.db.uid 100000\n11-12 21:14:28.292   351      351                   DEBUG  I  HINT: adb forward tcp:5039 tcp:5039\n11-12 21:14:28.294   3172     3506                   libc  F  Fatal signal 6 (SIGABRT), code -6 in tid 3506 (gum-js-loop)\n11-12 21:14:28.294   3172     3506                   libc  I  Another thread contacted debuggerd first; not contacting debuggerd.\n11-12 21:14:28.406   351      351                   DEBUG  F  *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n11-12 21:14:28.406   351      351                   DEBUG  F  CM Version: '13.0-ZNH2K-20160921-STABLE-Sultan-bacon'\n11-12 21:14:28.406   351      351                   DEBUG  F  Build fingerprint: 'oneplus/bacon/A0001:6.0.1/XXXXXX/XXXXXXXXXX:user/release-ke\n                                                            ys'\n11-12 21:14:28.406   351      351                   DEBUG  F  Revision: '0'\n11-12 21:14:28.407   351      351                   DEBUG  F  ABI: 'arm'\n11-12 21:14:28.411   351      351                   DEBUG  F  pid: 3172, tid: 3172, name: llm.android.app  >>> com.tellm.android.app <<<\n11-12 21:14:28.411   351      351                   DEBUG  F  signal 6 (SIGABRT), code 0 (SI_USER), fault addr --------\n11-12 21:14:28.472   351      351                   DEBUG  F  Abort message: 'frida-gum/gum/backend-linux/gumprocess-linux.c:1218:gum_elf_mod\n                                                            ule_open: assertion failed: (module->data != MAP_FAILED)'\n11-12 21:14:28.472   351      351                   DEBUG  F  r0 fffffffc  r1 befe7f28  r2 00000010  r3 ffffffff\n11-12 21:14:28.473   351      351                   DEBUG  F  r4 00000000  r5 00000008  r6 00000000  r7 0000015a\n11-12 21:14:28.473   351      351                   DEBUG  F  r8 aefc603c  r9 00000000  sl 00000000  fp 0000001c\n11-12 21:14:28.473   351      351                   DEBUG  F  ip befe7eb8  sp befe7ea8  lr b6d0bffb  pc b6d32acc  cpsr 000e0010\n11-12 21:14:28.476   351      351                   DEBUG  F  backtrace:\n11-12 21:14:28.476   351      351                   DEBUG  F  #00 pc 00000acc  /system/lib/libc.so (offset 0x40000)\n11-12 21:14:28.476   351      351                   DEBUG  F  #01 pc 00019ff7  /system/lib/libc.so (epoll_pwait+26)\n11-12 21:14:29.442   351      351                   DEBUG  F  Tombstone written to: /data/tombstones/tombstone_03\n11-12 21:14:29.442   351      351                   DEBUG  E  AM write failed: Broken pipe\nThe app crashes and the Frida CLI is frozen and not exitable with keys like Ctrl+C.\n. ",
    "AlexKoshulyan": "Hi,\nUnfortunately, it did not help. The same crash.\n. ",
    "razaina": "Hi,\ngetting almost the same error, frida-server built against android-6.0.1_r1\nTraceback (most recent call last):\n  File \"hook.py\", line 23, in <module>\n    process = frida.get_usb_device().attach('com.google.android.calendar')\n  File \"/home/r/Tools/frida/venv/lib/python3.6/site-packages/frida/core.py\", line 97, in attach\n    return Session(self._impl.attach(self._pid_of(target)))\nfrida.TransportError: the connection is closed\nFrida:ERROR:../../../../frida-core/src/linux/frida-helper-glue.c:2059:frida_resolve_library_function: assertion failed (local_library_path == remote_library_path): (\"/system/lib/libc.so\" == \"/lib/libc.so\"). Any idea please regarding why local and remote library paths are different?. yep sure @enovella \n```\n\n$ frida --version \n9.1.18\n```\n\n```\n\n$ git rev-parse HEAD\n45cf1583265fa539095066741fa80fd5381c2da4\n```\n\nshell@hammerhead:/ $ uname -a\nLinux localhost 3.4.0-g7717f76 #1 SMP PREEMPT Wed Nov 4 21:42:24 UTC 2015 armv7l\nThe python script is very simple:\n```\nimport frida\nprint(\"[+] Attaching...\\n\")\nprocess = frida.get_usb_device().attach('com.google.android.calendar')\nprint(\"[+] Yeah!\")\n```\nCrash log:\n03-22 16:30:35.593  5206  5206 F libc    : Fatal signal 6 (SIGABRT), code -6 in tid 5206 (frida-helper-32)\n03-22 16:30:35.694   332   332 F DEBUG   : pid: 5206, tid: 5206, name: frida-helper-32  >>> /data/local/tmp/re.frida.server/frida-helper-32 <<<\n03-22 16:30:35.710   332   332 F DEBUG   :     #05 pc 001dc14d  /data/local/tmp/re.frida.server/frida-helper-32\n03-22 16:30:35.710   332   332 F DEBUG   :     #06 pc 001db101  /data/local/tmp/re.frida.server/frida-helper-32 (g_assertion_message_cmpnum+188)\n03-22 16:30:35.710   332   332 F DEBUG   :     #07 pc 0006bdb5  /data/local/tmp/re.frida.server/frida-helper-32 (_frida_helper_service_do_inject+168)\n03-22 16:30:35.710   332   332 F DEBUG   :     #08 pc 0006257d  /data/local/tmp/re.frida.server/frida-helper-32\n03-22 16:30:35.710   332   332 F DEBUG   :     #09 pc 000642b3  /data/local/tmp/re.frida.server/frida-helper-32\n03-22 16:30:35.710   332   332 F DEBUG   :     #10 pc 00121639  /data/local/tmp/re.frida.server/frida-helper-32\n03-22 16:30:35.710   332   332 F DEBUG   :     #11 pc 001c44d5  /data/local/tmp/re.frida.server/frida-helper-32 (g_main_context_dispatch+196)\n03-22 16:30:35.710   332   332 F DEBUG   :     #12 pc 001c471f  /data/local/tmp/re.frida.server/frida-helper-32\n03-22 16:30:35.710   332   332 F DEBUG   :     #13 pc 001c493d  /data/local/tmp/re.frida.server/frida-helper-32 (g_main_loop_run+168)\n03-22 16:30:35.713   332   332 F DEBUG   :     #14 pc 00060a51  /data/local/tmp/re.frida.server/frida-helper-32 (frida_helper_service_run+36)\n03-22 16:30:35.713   332   332 F DEBUG   :     #15 pc 000609fd  /data/local/tmp/re.frida.server/frida-helper-32 (frida_main+36)\n03-22 16:30:35.713   332   332 F DEBUG   :     #17 pc 00060994  /data/local/tmp/re.frida.server/frida-helper-32\nSELinux stuff:\n03-23 10:57:06.061  6805  6805 I frida-server: type=1400 audit(0.0:60): avc: denied { read } for name=\"exe\" dev=\"proc\" ino=36085 scontext=u:r:init:s0 tcontext=u:r:logd:s0 tclass=lnk_file permissive=1\nScreencast:\nI just noticed that a new version has been pushed so I pulled it and recompiled frida-server and tested again:\n```\n\n$ git rev-parse HEAD                                 \n535651b3938b77fdc59bc9af5a921c1c7690701d\n$ git describe --tags                                                           \n9.1.23\n```\n\n\n. Hi,\nno idea regarding why local and remote path are different in this case? . @mutepigz \nIf you want to compile from the latest version\ngit clone --recursive https://github.com/frida/frida\nDownload android-ndk-r13b\nexport ANDROID_NDK_ROOT=/opt/android-ndk-r13b\ncd frida\nmake server-android\n. ",
    "daoduythuan": "Yes @enovella !\nI've forward-ed the TCP port before.. ",
    "alliejk": "Does \"frida-ps -Ua\" works in Windows10? I hava a same problem on my laptop, but it perfectly works on Windows7.... ",
    "riverar": "Removed trailing whitespace \ud83c\udf6d . I believe we fixed that in 8.2.3+ (https://github.com/frida/frida/commit/95a98554dcccd7c1bedb56c8e1587b04d22a00b5), can you verify?. Links look live here, can you verify? Will defer iOS question to @oleavr.. Fixed, good catch! https://github.com/frida/frida-website/commit/8c555ba28c213cb24a8f7d3898b8ceb54caf6372. Win32 ULONG is actually an unsigned 32-bit integer regardless of target architecture. So RtlFreeHeap should be represented with new NativeFunction(RtlFreeHeapAddr, 'uint', ['pointer', 'uint', 'pointer']). If you're on Windows 7 or older, however, the return type is Win32 BOOLEAN (uint8) so update accordingly.\nIt's not clear what architecture you're targeting, but if this is targeting a 32-bit process, your calling convention is implicitly set wrong. (The default calling convention is __cdecl.) Add stdcall to your definition and that should fix things up. (e.g. new NativeFunction(RtlFreeHeapAddr, 'uint', ['pointer', 'uint', 'pointer'], 'stdcall'))\nLet us know if that works out for you!. ",
    "mkmcsa": "Hi Ole,\n Thanks for the quick response, Deep links are still not working, couldn't download libs from these links.\nhttp://build.frida.re/frida/ios/bin/frida-server\nhttp://build.frida.re/frida/ios/lib/FridaGadget.dylib\nBTW , would these lib work on iOS 10.2 device? \nThanks,\nKarthik . ",
    "ping": "@oleavr I'm sorry when you refer to the host side, do you mean the frida-server binary?. @oleavr I think I found my problem. It was a conflict with the remnants of the old install in site-packages/. I switched to using virtualenv and that fixed the ProtocolError problem for me.\n. ",
    "tommy-dong": "thanks oleavr. ",
    "doegox": "And on Android I get always empty names:\nlet a=DebugSymbol.findFunctionsMatching(\"fwrite\")[0];\nDebugSymbol.fromAddress(a);\n{'address_hex': '0x4003db0c', 'name': '', 'fileName': '', 'moduleName': 'libc.so', 'lineNumber': 0, 'address': 1073994508}\n. thanks!\n. ",
    "mothran": "The phone I was working on was 6.0.1.. ",
    "bernard-wagner": "Awesome feedback! Really appreciate the swift response. PoC updated and working now, can dump all keychain items for the hooked application. . ",
    "ydaniels": "oh sorry i missed the chmod thing now fixed. ",
    "packmad": "Solved, I missed python3.6\nsudo add-apt-repository ppa:jonathonf/python-3.6\nsudo apt-get update\nsudo apt-get install python3.6 libpython3.6. ",
    "Coldz0": "i have the same problem, when i run  sudo apt-get install python3.6 libpython3.6 i get \n     root@Kali:/tmp/frida-9.1.6# sudo apt-get install python3.6 libpython3.6\nReading package lists... Done\nBuilding dependency tree     \nReading state information... Done\nE: Unable to locate package python3.6\nE: Couldn't find any package by glob 'python3.6'\nE: Couldn't find any package by regex 'python3.6'\nE: Unable to locate package libpython3.6\nE: Couldn't find any package by glob 'libpython3.6'\nE: Couldn't find any package by regex 'libpython3.6'\nroot@Kali:/tmp/frida-9.1.6# \n. ",
    "shaheming": "```shell\nwget https://bootstrap.pypa.io/get-pip.py\nsudo python3.6 get-pip.py\nsudo ln -s /usr/bin/python3.6 /usr/local/bin/python3\nsudo ln -s /usr/local/bin/pip /usr/local/bin/pip3\n```. ",
    "xabrouck": "I guess it's crashing here:\n```C\nstatic void *\nfrida_loader_run (void * user_data)\n{\n  char * pipe_address = user_data;\n  char * agent_path;\n  void * agent;\n  FridaAgentMainFunc agent_main;\n  unsigned int stay_resident;\nasprintf (&agent_path, \"%s/\" FRIDA_AGENT_FILENAME, frida_data_dir);\nagent = dlopen (agent_path, RTLD_LAZY);\n  if (agent == NULL)\n    goto beach;\nagent_main = (FridaAgentMainFunc) dlsym (agent, \"frida_agent_main\");  // <------------- dlsym\n[...]\n```\n. Thanks for your hints, very appreciated! I got this:\n[pod7-R1-csr1000v:/tmp/re.frida.server]$ ./dlopenhell \ndlopen failed : ./frida-agent-64.so: ELF file OS ABI invalid\nwith \n```C\ninclude \ninclude \nint main() {\n  if (!dlopen(\"./frida-agent-64.so\", RTLD_NOW)) {\n    printf(\"dlopen failed : %s\\n\",dlerror());\n    return -1;\n  } else {\n    printf(\"dlopen succeeded\\n\");\n    return 0;\n  }\n}\n```\nThis leads me to http://stackoverflow.com/questions/7647818/glibc-elf-file-os-abi-invalid\nThe file causing troubles:\n$ readelf.x86_64-elf -h frida-agent-64.so |grep ABI\n  OS/ABI:                            UNIX - GNU\n  ABI Version:                       0\nThose files work fine:\n$ readelf.x86_64-elf -h frida-helper-64 |grep ABI\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n$ readelf.x86_64-elf -h ls|grep ABI\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\nI guess it doesn't like the OS/ABI \"UNIX - GNU\".\nIs it possible to do a frida-agent-64.so that uses the \"UNIX - System V\" ABI?. ",
    "rprimus": "Sun Feb  5 02:05:51 GMT 2017\nfixed in 9.1.3. ",
    "eyahoww": "yes frida-server running as root.\nmy android system is 4.4.2.\ni think target application is protected from anti debugging.\nbecause my code execute very well for other application.. ",
    "egilas": "Resolved it. Seems there is hardcoded a reference to python36.dll somewhere in the ._frida.cp35-win32.pyd - saw this popping up on procmon, and confirm via:\nPS C:\\python353_x86\\lib\\site-packages> strings ._frida.cp35-win32.pyd | sls python36.dll\npython36.dll\nDownloaded and installed python 3.6 and installed via pip there solved it...\n. ",
    "verylove": "not resolved at all. ",
    "EionRobb": "@verylove frida 12 links against python37.dll \nAs a hacky workaround you can edit the _frida.cp35-*.pyd file in a hexeditor and rename python37.dll to whatever version of python you have (in my case, I renamed it to python35.dll). ",
    "bentau": "and here we have another error:\n```\n\n02-15 17:36:09.728   573   573 F DEBUG   : Build fingerprint: 'google/bullhead/bullhead:6.0.1/MTC20K/3142008:user/release-keys'\n02-15 17:36:09.729   573   573 F DEBUG   : Revision: 'rev_1.0'\n02-15 17:36:09.730   573   573 F DEBUG   : ABI: 'arm'\n02-15 17:36:09.732   573   573 F DEBUG   : pid: 14314, tid: 14808, name: gum-js-loop  >>> com.android.chrome <<<\n02-15 17:36:09.734   573   573 F DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x65b45\n02-15 17:36:09.778   573   573 F DEBUG   :     r0 f724cf00  r1 f724cc00  r2 00000000  r3 f724cc1e\n02-15 17:36:09.779   573   573 F DEBUG   :     r4 f724cf00  r5 c7a339b0  r6 c7a339b0  r7 00000000\n02-15 17:36:09.780   573   573 F DEBUG   :     r8 000013ff  r9 00000000  sl f724cf00  fp c7bff278\n02-15 17:36:09.781   573   573 F DEBUG   :     ip 00065001  sp c7bff200  lr cb650927  pc f71e22b0  cpsr 600b0010\n02-15 17:36:09.783   573   573 F DEBUG   : \n02-15 17:36:09.783   573   573 F DEBUG   : backtrace:\n02-15 17:36:09.784   573   573 F DEBUG   :     #00 pc 000152b0  /system/lib/libc.so\n02-15 17:36:09.784   573   573 F DEBUG   :     #01 pc 00000925  \n```. Ah sorry, I mean Interceptor.attach on that address. I better close this issue since I am not really sure if i am using it wrong or if its a bug in Frida. ",
    "max01203": "Hi,\ncan you please provide more details about the code that you used to be able to help you.\nThanks. Hi,\nCan you provide more information about your code and your script to be able to provide you more help please?\nThanks,. Hi,\nDid you use the arm-64 version of the frida-server?\nThanks,. It seems this issue can be closed nop?. Hi,\nCan you provide more detail about the error please?\nThanks,. I've double check and there are still some problems :( even if I'm using the script on the frida-helper-32, I don't know if my issue is in the right repo (sorry about that). If I can help let me know,\nThanks,. Hi,\nWhich version of Android are you using please?\nThanks . Hi, \nCan you please give the details of the version of frida with pip please?\nThanks,. I think we can close if the issue is fixed. Thanks for your help.. Hi, I think your main issue come from the delay that has to be present when attaching to a device. (I don't know if the modification was made in the frida command). \nTry to create a basic launcher in python and set a delay before attaching to USB device and load your JavaScript hooking script. \nIf you need more help check this : https://www.mavensecurity.com/blog/getting-started-with-frida-on-android/ I think it can help you :) If needed just ask ;) \nThanks,. Hi, \nFirst I advice you to split the code in 2 files, 1 for the python and 1 for the JS script to let you the ability to read the code with syntax highlighting in JS. \nAbout your error I suggest you to reduce the function that you hook to check if the crash still occurs because in my opinion the crash come from a function that you want to hook and make the application crash. I suggest to give us a look to adb logcat using the PID of the application to have a look about why the application crashed.\nThanks,. Hello,\nTry to use remote mode. To do so use adb forward tcp:27042 tcp:27042\nAnd then the same command but you use -R at the place of -U and let me know if it helps.\nOf course ensure that you run frida server as root and selinux is permissive if it is not the case run : setenforce 0 in your Android device.\nThanks,. We need more information to provide you help :)\nThanks,. Hi,\nI also had this issue. You just have to use %reload right after launching frida-cli.\nI also advice you to use the option --no-pause to avoid type %resume because in some applications if you're too long to resume it, the application will crash.\nThanks :). Hi, \ncan you try with the latest version that is 10.2.3 at the time of my comment please?\nCan you also try on another emulator to check?\nThanks,. Hello,\nI think the thing that you need is to learn smali or bytecode :) because in this particular think byte array is noted like this : [B\nSo if I'm not wrong you will have to create a variable like this:\nvar byteArr = Java.use(\"[B\"); // to declare the var in javascript\nbyteArr.$new() // to instantiate the object\nSee more detail here : https://github.com/frida/frida-java\nI'm not 100% sure about what you need but at least I hope it will help ;)\nThanks,. Hi,\nI assume that you try to hook your game in iOS? Do you have more information about the context? The device? The full stack trace and more detail?\nThanks . ",
    "QKaiser": "Aaah, that makes more sense !\nThanks for the super fast reply :). ",
    "manizzle": "Yeah I did. I am not sure why the resulting library is shown as being arm. I guessed some kind of compatibility hack was done? Regardless, tracing crashes on other applications as well. https://github.com/frida/frida-gum/issues/195. When running the application with a static thread ID(by looking at ps) instead of Process.getCurrentThreadId() I get the following error:\n02-21 15:50:29.660 23548-23548/com.demos.app A/libc: Fatal signal 4 (SIGILL), code 1, fault addr 0x7f7cebe428 in tid 23548 (demos.app)\n02-21 15:50:29.766 607-607/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n02-21 15:50:29.766 607-607/? A/DEBUG: Build fingerprint: 'google/angler/angler:6.0/MDA89D/2294819:user/release-keys'\n02-21 15:50:29.766 607-607/? A/DEBUG: Revision: '0'\n02-21 15:50:29.766 607-607/? A/DEBUG: ABI: 'arm64'\n02-21 15:50:29.767 607-607/? A/DEBUG: pid: 23548, tid: 23548, name: demos.app  >>> com.demos.app <<<\n02-21 15:50:29.768 607-607/? A/DEBUG: signal 4 (SIGILL), code 1 (ILL_ILLOPC), fault addr 0x7f7cebe428\n02-21 15:50:29.791 607-607/? A/DEBUG:     x0   0000000000000004  x1   0000007fc8983f30  x2   0000000000000010  x3   00000000ffffffff\n02-21 15:50:29.792 607-607/? A/DEBUG:     x4   0000000000000000  x5   0000000000000008  x6   0000000000000008  x7   0000007f9b35e000\n02-21 15:50:29.792 607-607/? A/DEBUG:     x8   0000000000000016  x9   00000000000092c0  x10  0000000004b89f48  x11  0000000004b8a008\n02-21 15:50:29.792 607-607/? A/DEBUG:     x12  0000007f7cebd000  x13  0000007f9b39e000  x14  0000007f9b2dcfc0  x15  0000007f9b2d0830\n02-21 15:50:29.793 607-607/? A/DEBUG:     x16  0000007f7cebe044  x17  0000007f9b2d81c4  x18  0000007f9b3a1f60  x19  0000000000000004\n02-21 15:50:29.793 607-607/? A/DEBUG:     x20  0000007fc8983f30  x21  00000000ffffffff  x22  0000007f9804a0f8  x23  0000000000000000\n02-21 15:50:29.794 607-607/? A/DEBUG:     x24  0000000000000000  x25  0000007f9804a188  x26  000027d600005bfc  x27  00000000ffffffff\n02-21 15:50:29.794 607-607/? A/DEBUG:     x28  000000000037c37a  x29  0000007fc8983e40  x30  0000007f9b2d81e8\n02-21 15:50:29.794 607-607/? A/DEBUG:     sp   0000007fc8983af0  pc   0000007f7cebe428  pstate 0000000020000000\n02-21 15:50:29.797 607-607/? A/DEBUG: backtrace:\n02-21 15:50:29.798 607-607/? A/DEBUG:     #00 pc 0000000000001428  <unknown>\n02-21 15:50:29.798 607-607/? A/DEBUG:     #01 pc 000000000001f1e4  /system/lib64/libc.so (epoll_pwait+32)\n02-21 15:50:29.798 607-607/? A/DEBUG:     #02 pc 000000000001f1e4  /system/lib64/libc.so (epoll_pwait+32)\n02-21 15:50:29.799 607-607/? A/DEBUG:     #03 pc 000000000001ad74  /system/lib64/libutils.so (android::Looper::pollInner(int)+144)\n02-21 15:50:29.799 607-607/? A/DEBUG:     #04 pc 000000000001b154  /system/lib64/libutils.so (android::Looper::pollOnce(int, int*, int*, void**)+80)\n02-21 15:50:29.799 607-607/? A/DEBUG:     #05 pc 00000000000d0fb8  /system/lib64/libandroid_runtime.so (android::NativeMessageQueue::pollOnce(_JNIEnv*, _jobject*, int)+48)\n02-21 15:50:29.799 607-607/? A/DEBUG:     #06 pc 00000000726a883c  /data/dalvik-cache/arm64/system@framework@boot.oat (offset 0x1ed4000)\n02-21 15:50:29.952 1035-23904/? W/ActivityManager:   Force finishing activity com.demos.app/.acitvities.EnvironmentSelectorActivity\n02-21 15:50:29.953 607-607/? A/DEBUG: Tombstone written to: /data/tombstones/tombstone_09\n02-21 15:50:29.953 607-607/? E/DEBUG: AM write failed: Broken pipe\n02-21 15:50:29.953 1035-1253/? I/BootReceiver: Copying /data/tombstones/tombstone_09 to DropBox (SYSTEM_TOMBSTONE)\n02-21 15:50:29.989 1035-23904/? E/JavaBinder: !!! FAILED BINDER TRANSACTION !!!  (parcel size = 112). moved to frida-gum. ",
    "dleyanlin": "sorry, i check on the cydia, it not be installed. but when select package to install prompt 404 error. upgrade to 9.1.12 it fixed fixed issue.\nthanks. ",
    "fr0zenrain": "today when i test it's ok,so strange!\npython appmon.py -p ios -a \u90ae\u4ef6 -s scripts/iOS/SQLite3/sqlite3_open.js\nmaybe i fixed,i just modify process name encode utf-8, i'm sorry, please close this issue,thanks!. i think you can copy to system directory by manual. thanks,,i will test,awesome!. ",
    "frozen-void": "frida --version says: 9.1.15\nedit: same with 9.1.16. Is there any progress on this issue? It's still relevant in version 10.0.5 and prevents me from using frida at all.. ",
    "mamamiya92": "the same problem as @ay-kay ,but frida -U XXX is ok(version 10.3.14). ",
    "ocecaco": "I had an issue very similar to this, where my own hooks would not get called, but frida-trace did work. In my case it turned out that the module I was trying to hook was loaded twice into memory at different base addresses. Then findExportByName would only find one of them and hook the wrong one. Frida-trace uses ApiResolver.enumerateMatchesSync so it does not have the same issue. So if you still have this issue, compare the addresses returned by those APIs or see if the module is loaded twice.\nI should mention that the behavior of enumerateMatchesSync is a bit strange, since it does NOT find the addresses of the function in both modules, but only one of them. Hence the two APIs both find only a single address, and for both of them it is a different address. Perhaps this is a bug in enumerateMatchesSync since it seems like it should return two addresses.. In my case both modules have the same path, so this does not work to disambiguate between them. I am not exactly sure how two copies of it are getting loaded, but it only occurs if I call getExportByName.. @M47H3W I think I worked around the issue by using Module.enumerateExportsSync to manually obtain a mapping from function names to addresses. Then once you have the address of the function you want you can just hook it normally. As long as you don't ever call findExportByName, everything should work.. ",
    "Alexeyan": "I'm having the same issue.. You might want to replace the get_usb_device() call with get_usb_device(1) to give it a higher timeout. \nThis was necessary for me to get it working on macOS.. ",
    "bkerler": "Make sure you \"setenforce 0\" before. Also I'd strongly recommend to use real hardware and no emulator, especially genymotion has some issues.. ",
    "nemirst": "Same for me when using Android Studio emulators on x86 or x86_64 platform. Tried multiple versions of Android starting from 4.4 with no luck. But it worked with armeabi-v7a 4.4 image, although it's quite slow. I will try on real devices next.. Same problem - shared libraries from APK file don't get loaded. At least on Android 7.1.1. For example, Process.enumerateModulesSync don't list .so files in APK. As a workaround I reload script and then libraries are suddenly listed.. Same problem - shared libraries from APK file don't get loaded. At least on Android 7.1.1. For example, Process.enumerateModulesSync don't list .so files in APK. As a workaround I reload script and then libraries are suddenly listed.. For example I run script like this 1st time:\nfrida -U -f name_of_process -l name_of_script --no-pause.\nAnd see that my .so files are not loaded. But script is still connected to process. Then i make a change in script itself (for example delete character and type it again & save file) which triggers reload of script inside frida server. This time .so files are loaded correctly.\nEDIT: I discovered that you can just use %reload command in frida prompt.. ",
    "pwg17": "Hello everyone\nHas this problem been solved?\nMy Android system version is 4.1.1, and I have this problem.\nThanks. ",
    "brian-leidos": "Same problem on 10.6.4 release of Frida. This problem goes away on Android 4.4 (and above). . Duplicate of #250 . I was able to run frida-server-10.6.3-ios-arm64 on this same device. Closing this. Apparently this is user error involving manually updating frida-server. Documenting it here for others who run into it.\nIf you have a version of frida-server running and want to put a different version on your device:\n1. kill -9  of frida-server\n2. shut down all apps running on the device\n3. copy the newer version of frida-server to /usr/sbin/frida-server\n3. try to run /usr/sbin/frida-server&\n4. if that fails: \n     a. start the app you had previously attached frida to (e.g., AngryBirds)\n     b. try to run /usr/sbin/frida-server&\n     c. if that fails, shutdown the app you ran (AngryBirds), then run /usr/sbin/frida-server& \nIt should start now.. Ah! Thanks @oleavr . That means your findExportByName isn't working. Best bet is to use Frida interactive to get it right:\n$ frida -U com.example.hello\n[device::app]-> Module.findExportByName(....)\nor you might try to use ApiResolver to get the names...\n[device::app]-> r = new ApiResolver(\"module\")\n[device::app]-> r.enumerateMatches(\"exports:libhello.so!*\", {onMatch: function(match) } console.log(match.name)}, onComplete: function() { } }). ",
    "neoz": "In some process, we have 2 more module of libc.so, so frida could not find correct libc.so\n14200000     424K r--p  /system/lib/arm/libc.so\n1426a000      12K rw-p  /system/lib/arm/libc.so\nb76b1000     628K r-xp  /system/lib/libc.so\nb774f000       8K r--p  /system/lib/libc.so\nb7751000      12K rw-p  /system/lib/libc.so. thanks oleavr. I see the release on github has the release for node binding in window now. Thanks,. ",
    "mutepigz": "Thanks for your solution .. My frida's version is 8.1.12 @enovella . thanks ..\nbut it seems doesn't work ....\n\n. ",
    "mohe2015": "```\nvar PackageManager = Java.use(\"android.app.ApplicationPackageManager\");\nPackageManager.getInstallerPackageName.implementation = function(package) {\n        send(\"getInstallerPackageName\");\n        return \"fakeinstallerpackage\";\n};\nworks! At first I didn't find the class because it does not exist in Android Studio, it probably gets loaded at runtime.. I think frida fails to load that class because if it is loaded from the application, no exception occurs.. Stale.. I'm currently on my phone but it may be because the new path is longer than the old path and therefore you may override some important data. @henrytom1703 First check if that's the issue by replacing the path with one with the same length. If that's really the issue I think you could use Memory.allocAnsiString(str). Check out the documentation at https://www.frida.re/docs/javascript-api/. You may need to change the function names etc. It should print the address of the function in the console at startup. Try to look up things in the [documentation](https://frida.re/docs/home/) to get familiar with it.javascript\nvar getInfoPtr = Module.findExportByName(\"libnative-lib.so\", \"_Z7getInfoP4info\");\nconsole.log(getInfoPtr); // check if found\n// android emulator 9 + 7.1.1 don't work, use 5.0.2\nInterceptor.attach(getInfoPtr, {\n    onEnter: function (args) {\n         console.log(\"onEnter\");\n         Memory.writeUtf8String(args[0], \"thefirststring\");\n         Memory.writeUtf8String(new NativePointer(args[0]).add(50), \"thesecondstring\");\n    }\n});\n``. @henrytom1703 In normal cases, yes. But there may be [structure alignments](https://en.wikipedia.org/wiki/Data_structure_alignment) by the compiler etc. but I don't think that's the case with byte arrays. Just try it and if it doesn't work you can further investigate it.. @henrytom1703 I found it too difficult to do it by hand as every architecture has different sizes of data types and as there may be padding anywhere. (P.S. would have also been possible by hand)static_assert(offsetof(struct ifreq, ifr_ifru.ifru_hwaddr.sa_data) == 18, \"fail\");**So you would need to use**console.log(Memory.readUtf8String(NativePointer(ifreqPtr).add(18)));`\nExplanation:\nThe ifreq struct contains two unions. The first union is before the second union which contains your targeted field. So we need to add the size of the first union which is IFNAMSIZ (16). As the second union is a union the ifru_hwaddr struct is at offset 0. The sa_data field in the struct sockaddr comes after the sa_family_t sa_family which is an unsigned short (2 bytes). So 16+0+2 = 18.\nHow I found that out:\nI used android studio and created a native project. I used static_assert(offsetof(struct ifreq, ifr_ifru.ifru_hwaddr.sa_data) >= x, \"fail\"); to limit the possible range of the offset (see above). Then I tried different values for x. To compile I changed directory to MyApplication/app/.externalNativeBuild/cmake/debug/armeabi-v7a and ran ninja. If the build fails the assert was wrong and my x was too high. Otherwise x was not high enough of correct so I incremented it. In the end I got the correct value.\nP.S.: I didn't test if that works so please tell me if it didn't.. @henrytom1703 You may also check out the telegram channel or IRC as most people don't like guiding questions in github issues.. ",
    "pyc0de": "same for:\nfile /usr/local/lib/python2.7/dist-packages/_frida.so                     /usr/local/lib/python2.7/dist-packages/_frida.so: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, not strippedib/python2.7/dist-packages/_frida.so:\nwich leads to:\n\nFailed to load the Frida native extension: /usr/local/lib/python2.7/dist-packages/_frida.so: cannot open shared object file: No such file or directory\nPlease ensure that the extension was compiled for Python 2.7.\n\nTraceback (most recent call last):\n  File \"/usr/local/bin/frida-ls-devices\", line 7, in \n    from frida.lsd import main\n  File \"/usr/local/lib/python2.7/dist-packages/frida/init.py\", line 26, in \n    raise ex. ",
    "dzonerzy": "Frida server version and client version maybe are different , please make sure to use the same version on both sides.. Try replace\nthis.init(x,y,z);\nwith\nmy_class.init.overload('int', 'java.security.Key', 'java.security.spec.AlgorithmParameterSpec').init.call(this, x,y,z);. ok try this, modify /home/username/.local/lib/python2.7/site-packages/frida/application.py on line 241\nchange this:\nself._update_status(\"Failed to attach: %s\" % e)\nto this\nself._update_status(\"Failed to attach: %s\" % str(e).encode('utf-8'))\nLet me know. Your code is wrong , since URI is you wrapper class to java.net.URI, if you want to hook constructor , you should do something similar:\nvar URI = Java.use('java.net.URI');\nURI.$init.overload('java.lang.String').implementation = function (url)\n{\nsend(\"URI object created with value: \" + url);\n// call the original method not the hooked one\nreturn URI.$init.overload('java.lang.String').call(this, url);\n}\nWe used .overload('java.lang.String') since URI constructor have different signature as stated here https://docs.oracle.com/javase/7/docs/api/java/net/URI.html. Please provide more details, are you trying to hook Android , Linux, Windows?\nAre you using frida-* prebuilt tools or Frida APIs? . ",
    "hellofrida": "thanks alot. ok . this is works    \n   var str  = ObjC.classes.NSString.stringWithString_('00000000000000000000000000000000');\n\n    retval.replace(str);.\n",
    "B4RD4k": "i'm using the pip windows python 2.7 repo . Thanks for the NO-COMMENT, But, i found my problem, \ndo not transfer the extracted frida server file using VMWARE cause it's getting seg fault.\ndo use wget directly from the device.\nGOOD LUCK. ",
    "Oreaz": "https://www.frida.re/docs/javascript-api/#java\n\nJava.use(className): dynamically get a JavaScript wrapper for className that you can instantiate objects from by calling $new() on it to invoke a constructor.\n\nAnother example\nJava.perform(function () {\n    var stringClass = Java.use(\"java.lang.String\");\n    var stringInstance = stringClass.$new(\"Hello World\");\n    send(stringInstance.toString());\n});\nbasically in the example code it's the equivalent of \nnew String(\"Hello World\") in Java\nhttps://developer.android.com/reference/java/lang/String.html. ",
    "williamfreeman667": "Was there an actual resolution to this? I am getting the same error with frida 10.3.14 when trying to instrument and subsequently call the Cipher.init method from within the instrumentation code. I tried @dzonerzy's solution without any luck.. ",
    "ultrafunkamsterdam": "I do not have that much java knowledge but The error seems to tell exactly what is wrong. Method asks for :\n\"\"\"\njava.security.AlgorithmParameters \n\"\"\"\nAnd you are sending it a:\n\"\"\njava.security.spec.AlgorithmParameterSpec\n\"\"\"\n. Do you happen to have the frida executable in /data/local/tmp ? \nIf so, i never managed to get the 64 bits arm version to spawn apps.\nonly the 32 bit in 'attach' mode worked.\nOptions to fix (try them one by one in this order):\n1\n- DISABLE AND REMOVE ALL GEAR VR STUFF APPS AND SERVICES. After that: reboot and make sure they are gone (and/or not running)\n2\nGo to step 4 and return here\nOn first frida launch, do not use -D but instead cd into /data/local/tmp and run (assuming file name is fr108064) : \n         nohup fr108064 & \n3\nclear /data/local/tmp folder :   rm -rf /data/local/tmp/*\n4\nrename frida binary to something else, without hypens -, dots .  (for ex : i called it fr108064)\n5\n(if root):\n   - set magisk to core only and dont install those damn modules, set magisk su hide to all google/samsung security/play related processes.\n   -in adb or terminal app:\n      su\n      mount -o rw,remount /system\n      move/copy the file into /system/priv-app\n      chown root:root /system/priv-app/fr108064\n      chmod 733 /system/priv-app/fr108064\n      mount -o ro,remount /system\n      reboot!\n      check step 1 again!\n . ",
    "MarcoMoby": "I am experiencing something similar too. I think it is a more widespread issue. Right now I am unable to use anything apart frida-ps on any genymotion simulator with API between  19 and 22. On 23 works like a charm.\nI would add that when I launch the command, the home screen appears to be relaunching or something like that, then the \"Failed to spawn: the connection is closed\" appears on the console.. ",
    "jhscheer": "Hi,\nI have the exact same error with frida-server-10.5.12-android-arm on a 5.1.1 Samsung device.\nThe fix suggested by @dzonerzy did not work :(\nFile \"/[...]/local/lib/python2.7/site-packages/frida/application.py\", line 267, in _try_start                          \n    self._update_status(\"Failed to attach: %s\" % str(e).encode('utf-8'))                                \nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 32: ordinal not in range(128). Hi,\nsince this issue looks similar to my issue, I'm going to share my experience here.\nI just tried (with pip install frida==10.5.11):\n- frida-server-10.5.11-android-x86\n- frida-server-10.5.2-android-x86\non Android Emulators 6.0/7.0/7.11 and\n- frida-server-10.5.11-android-arm\non a 4.1.2 ARM Device\nFor all these frida-ps -U worked, but frida-trace -U -i open com.android.browser (or any other App) did crash the App.\nThe next version I tried was\n- frida-server-9.1.16-android-i386\ntogether with pip install frida==9.1.16 and Android Emulator 6.0 and then frida-trace -U -i open com.android.browser finally worked.. Hi @oleavr,\nthanks a lot for fixing this!\nSpawning with -f works now.\nHowever, in my tests on Emulators, the App always crashes when I trigger a hooked function while interacting with the App on the device.\nOn a real Device everything works fine (except early instrumentation) :(\nI tested frida-server and frida-gadget version 10.6.13 on Emulators and on a real device.\nFor me, frida version 10.2.3 is still the most stable version to use for Android Emulators.\nFrida-Server\nReal Device:\nGoogle Nexus 5X  - 6.0.1\neverything works, except early instrumentation\nEmulators:\nGoogle Nexus 5 - 8.0.0 - API 26\nworks:\nfrida-ps -U\nsoft reset:\nfrida-ps -U -a\nfrida -U -f name.apk -l name.js --no-pause\napp crash:\nfrida  -U name.apk -l name.js --no-pause\nGoogle Nexus 5 - 7.1.1 - API 25\nworks:\nfrida-ps -U\nfrida-ps -U -a\nsoft reset:\nfrida -U -f name.apk -l name.js --no-pause\nworks until hooked methods are triggered while interactiing with the app:\nfrida  -U name.apk -l name.js --no-pause\nGoogle Nexus 5 - 6.0.0- API 23\nworks:\nfrida-ps -U\nfrida-ps -U -a\nworks until hooked methods are triggered while interacting with the app:\nfrida -U -f name.apk -l name.js --no-pause\nfrida  -U name.apk -l name.js --no-pause\nFrida-Gadget\nReal Device:\nGoogle Nexus 5X  - 6.0.1\neverything works, exept early instrumentation\nEmulators:\nGoogle Nexus 5 - 6.0.0- API 23 & Google Nexus 5 - 7.1.1 - API 25 & Google Nexus 5 - 8.0.0 - API 26\nworks:\nfrida-ps -U\nfrida-ps -U -a\nworks until hooked methods are triggered while interactiing with the app:\nfrida  -U Gadget -l name.js --no-pause\nadb logcat from Emulator 6.0.0:\n10-20 12:33:07.533  1597  1608 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=sg.vantagepoint.uncrackable1/.MainActivity bnds=[12,870][276,1167] (has extras)} from uid 10009 on display 0\n10-20 12:33:07.557  1597  2149 I ActivityManager: Start proc 4513:sg.vantagepoint.uncrackable1/u0a66 for activity sg.vantagepoint.uncrackable1/.MainActivity\n10-20 12:33:07.578  4513  4519 E art     : Failed writing handshake bytes (-1 of 14): Broken pipe\n10-20 12:33:07.578  4513  4519 I art     : Debugger is no longer active\n10-20 12:33:07.609  4513  4527 I Frida   : Listening on 127.0.0.1 TCP port 27042\n10-20 12:34:53.227  4513  4544 D OpenGLRenderer: Use EGL_SWAP_BEHAVIOR_PRESERVED: true\n10-20 12:34:53.232  4513  4513 D         : HostConnection::get() New Host Connection established 0xaa3fc580, tid 4513\n10-20 12:34:53.234  4513  4513 W         : Unrecognized GLES max version string in extensions: ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_dma_v1 \n10-20 12:34:53.317  4513  4544 D         : HostConnection::get() New Host Connection established 0xaa3fcf00, tid 4544\n10-20 12:34:53.320  4513  4544 W         : Unrecognized GLES max version string in extensions: ANDROID_EMU_CHECKSUM_HELPER_v1 ANDROID_EMU_dma_v1 \n10-20 12:34:53.335  4513  4544 I OpenGLRenderer: Initialized EGL, version 1.4\n10-20 12:34:53.337  4513  4544 W OpenGLRenderer: Failed to choose config with EGL_SWAP_BEHAVIOR_PRESERVED, retrying without...\n10-20 12:34:53.350  4513  4544 D EGL_emulation: eglCreateContext: 0xafec90c0: maj 2 min 0 rcv 2\n10-20 12:34:53.361  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.398  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.500  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.552  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.633  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.708  1597  1616 I ActivityManager: Displayed sg.vantagepoint.uncrackable1/.MainActivity: +1m46s164ms\n10-20 12:34:53.710  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:53.726  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:54.892  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:55.081  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:55.095  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:55.567  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:59.054  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:59.070  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:59.090  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:59.169  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:34:59.170  4513  4544 E Surface : getSlotFromBufferLocked: unknown buffer: 0xb403c8a0\n10-20 12:34:59.177  4513  4544 D OpenGLRenderer: endAllStagingAnimators on 0xa11c3500 (RippleDrawable) with handle 0xa0f7f180\n10-20 12:34:59.207  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:35:02.823  4513  4544 D EGL_emulation: eglMakeCurrent: 0xafec90c0: ver 2 0 (tinfo 0xaa3c2940)\n10-20 12:35:02.830  4513  4544 E Surface : getSlotFromBufferLocked: unknown buffer: 0xb403da20\n10-20 12:35:04.674  1597  2759 I ActivityManager: START u0 {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=sg.vantagepoint.uncrackable1/.MainActivity bnds=[12,870][276,1167] (has extras)} from uid 10009 on display 0\n10-20 12:35:04.696  4513  4513 D AndroidRuntime: Shutting down VM\n10-20 12:35:04.700  4513  4513 E AndroidRuntime: FATAL EXCEPTION: main\n10-20 12:35:04.700  4513  4513 E AndroidRuntime: Process: sg.vantagepoint.uncrackable1, PID: 4513\n10-20 12:35:04.700  4513  4513 E AndroidRuntime: java.lang.RuntimeException: Unable to resume activity {sg.vantagepoint.uncrackable1/sg.vantagepoint.uncrackable1.MainActivity}: android.util.SuperNotCalledException: Activity {sg.vantagepoint.uncrackable1/sg.vantagepoint.uncrackable1.MainActivity} did not call through to super.onStart()\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3103)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:3134)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1388)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.os.Handler.dispatchMessage(Handler.java:102)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.os.Looper.loop(Looper.java:148)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.ActivityThread.main(ActivityThread.java:5417)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at java.lang.reflect.Method.invoke(Native Method)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:726)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime: Caused by: android.util.SuperNotCalledException: Activity {sg.vantagepoint.uncrackable1/sg.vantagepoint.uncrackable1.MainActivity} did not call through to super.onStart()\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.Activity.performStart(Activity.java:6255)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.Activity.performRestart(Activity.java:6299)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.Activity.performResume(Activity.java:6304)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:3092)\n10-20 12:35:04.700  4513  4513 E AndroidRuntime:    ... 8 more\n10-20 12:35:04.710  1597  2165 W ActivityManager:   Force finishing activity sg.vantagepoint.uncrackable1/.MainActivity\n10-20 12:35:05.222  1597  1611 W ActivityManager: Activity pause timeout for ActivityRecord{7d7a288 u0 sg.vantagepoint.uncrackable1/.MainActivity t50 f}\n10-20 12:35:15.344  1597  1611 W ActivityManager: Activity destroy timeout for ActivityRecord{7d7a288 u0 sg.vantagepoint.uncrackable1/.MainActivity t50 f}\n10-20 12:35:52.479  4513  4513 I Process : Sending signal. PID: 4513 SIG: 9\n10-20 12:35:52.534  1597  2149 I ActivityManager: Process sg.vantagepoint.uncrackable1 (pid 4513) has died. Hi,\nI don't think it has something to do with the spawn-bug you mentioned.\nI followd your suggestions and restarted the device, started frida-server, started the app, attached frida (w/o the -f switch), and manually ran the enumerateLoadedClasses snippet from the frida console, but the process terminated again.\nI also tried frida-java-test-suite (also after a fresh restart) and ran make check, however it seems to be stuck at:\nmake[1]: Leaving directory '/frida-java/test'\nmake -C test run\nmake[1]: Entering directory '/frida-java/test'\nadb shell \"/data/local/tmp/frida-java-tests/runner\"\nJUnit version 4.12\n.\nso I aborted it after 15 minutes because I'm not sure what the supposed behaviour is.. Hi,\nthe Nexus 5X firmware version I used was: MMB29K\n(Sorry for not answering earlier, but I didn't have access to the device over the weekend.). To read from memory you need to know the start address and how many bytes to read.\nSo maybe something like this will help you figure it out:\n```\n    onEnter: function (args) \n    {\n        var ptr_prompt = args[2];\n        var length = args[3];    \n    var data = Memory.readByteArray(ptr_promt, length);\n    send(data);\n}\n\n. I looked up how to do this for **jstring** and one possibility is:javascript\n    onEnter: function (args) \n    {\n        var ptr_prompt = args[2];\n        Java.perform( function () {\n            var String = Java.use(\"java.lang.String\");\n            var promt = Java.cast(ptr(ptr_prompt), String);\n            send(prompt);\n        });\n    }\n```. ",
    "Paulswith": "it's working , thanks guy\n\"ok try this, modify /home/username/.local/lib/python2.7/site-packages/frida/application.py on line 241\nchange this:\nself._update_status(\"Failed to attach: %s\" % e)\nto this\nself._update_status(\"Failed to attach: %s\" % str(e).encode('utf-8'))\nLet me know\". ",
    "schniggie": "I got the same error and the fix of @Paulswith doesn't work for me. See:\n\u279c  frida frida-trace -U -i \"open\" -p 6633\nAttaching...                                                            \nException in thread Thread-1:\nTraceback (most recent call last):\n  File \"/usr/lib/python2.7/threading.py\", line 801, in __bootstrap_inner\n    self.run()\n  File \"/usr/lib/python2.7/threading.py\", line 754, in run\n    self.__target(*self.__args, **self.__kwargs)\n  File \"/usr/local/lib/python2.7/dist-packages/frida/application.py\", line 416, in _run\n    work()\n  File \"/usr/local/lib/python2.7/dist-packages/frida/application.py\", line 268, in _try_start\n    self._update_status(\"Failed to attach: %s\" % str(e).encode('utf-8'))\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 32: ordinal not in range(128)\nFor me i worked by using python3. \npip3 install frida. ",
    "benj56": "I was using a Nexus 7 (flo) on Android 6.\nToday I tried it on a x86 Android 6 (not sure if x86_64) emulator, same results as on the Asus. \nOn a x86_64 Android 7.1.1 emulator the app entirely crashes on %resume as soon as Java.perform is in the script, even when just using console.log in Java.perform. If loading the script using %load instead of before app start, the app does not crash and the script behaves as expected. The crash:\nSpawned `com.myapp`. Use %resume to let the main thread start executing!\n[USB::Android Emulator 5554::['com.myapp']]-> %load small.js\nWaiting for Java..\nJava available..\n[USB::Android Emulator 5554::['com.myapp']]-> %resume\n[USB::Android Emulator 5554::['com.myapp']]-> Error: abort was called\n    at frida/node_modules/frida-java/lib/env.js:206\n    at apply (native)\n    at frida/node_modules/frida-java/lib/env.js:201\n    at frida/node_modules/frida-java/lib/class-factory.js:114\n    at frida/node_modules/frida-java/lib/class-factory.js:1817\n    at call (native)\n    at getPackageInfoNoCheck (input:1)\n    at apply (native)\n    at r (frida/node_modules/frida-java/lib/class-factory.js:858)\n    [...]\nProcess terminated\nWhere small.js contains the following:\n```\nconsole.log(\"Waiting for Java..\");\nwhile(!Java.available) {\n    console.log(\"Java not available yet\");\n}\nconsole.log(\"Java available..\");\nJava.perform(function () {\n    console.log(\"Entered perform..\"); \n});\n```\n. ",
    "afjoseph": "I'll have to revive this issue since its been a year, its still open, and none of the above questions were even related to OP's question.\nI have the same issue where the script is not hooked up until I either edit/save my script in a text editor or write %reload, but its usually too late for both cases.\nMy solution is a bit cutthroat but its very similar to jmp2it tool that's meant to analyze shellcode, which is to basically inject a Systemclock.sleep(10000); in the source code in Application class. If the source code is not available, a smali version of the above command could be compiled and inject to a decompiled version just the same.\nIts best to close the issue.. Can you post a code example?\nI'm sure the answer can't be too hard. @GeekTan did this solve your issue?. ",
    "bianbian-org": "python 3.5.1. ",
    "huhuang03": "I use this frida-trace -i \"open\" -U com.xxx to trace open, and also these some encoding issue:\n6423 ms  open(path=\"/data/user/0/com.xxx/files/\u00e5\u00be\u00ae\u00e8\u00bd\u00af\u00e9\u009b\u0085\u00e9\u00bb\u0091\", oflag=0x0\nI run on a mac.\nUpdate:\nSorry, I think it's my terminal encoding setting issue.. Same question!. Thank you for your replay, \nIt's my network issue, I'm in China and some site can't access.. ",
    "thatname": "I've encountered this problem on NOX EMULATOR too, with the latest github version 10.3.1\nhost OS: windows 7 \nfrida-server-10.3.1-android-x86\ncalled \nfrida_device_get_frontmost_application_sync()\ngot :\nJava API only partially available; please file a bug. Missing: _Z20dvmDecodeIndirectRefP6ThreadP8_jobject, _Z15dvmUseJNIBridgeP6MethodPv, _Z20dvmHeapSourceGetBasev, _Z21dvmHeapSourceGetLimitv, _Z16dvmIsValidObjectPK6Object, JNI_GetCreatedJavaVMs, gDvmJni, gDvm\ncalled\nfrida_device_attach_sync()\ngot: \nThe connection is closed.\n. ",
    "gitQqqHs": "good. ",
    "awakened1712": "any update on this please?. I faced the same issue. In fact, I tested with Android 7.0 and 7.1 on the Nexus 6P too. I got the same error.. I don't remember exactly. I think the below should work\nvar newStr = 'abcd';\nMemory.writeUtf8String(retval, newStr);. 0x10001d does not seem to be a valid address to me.  That's why you had access violation.. I did not try to check the retval. Let me check again tomorrow.. @YaphetsH I gave up on dlopen hook. Instead, I hooked its Java wrapper, System.loadLibrary, as below:\n```javascript\nJava.perform(function() {\n    const System = Java.use('java.lang.System');\n    const Runtime = Java.use('java.lang.Runtime');\n    const VMStack = Java.use('dalvik.system.VMStack');\nSystem.loadLibrary.implementation = function(library) {\n    try {\n        console.log('System.loadLibrary(\"' + library + '\")');\n        const loaded = Runtime.getRuntime().loadLibrary0(VMStack.getCallingClassLoader(), library);\n        return loaded;\n    } catch(ex) {\n        console.log(ex);\n    }\n};\n\nSystem.load.implementation = function(library) {\n    try {\n        console.log('System.load(\"' + library + '\")');\n        const loaded = Runtime.getRuntime().load0(VMStack.getCallingClassLoader(), library);\n        return loaded;\n    } catch(ex) {\n        console.log(ex);\n    }\n};\n\n});\n```. ",
    "markszabo": "Thank you very much, it works! \ud83d\udc4d . Wow, that was quick, thank you.. ",
    "Nightshades1": "crash log https://pastebin.com/2q0iX4M8. ",
    "YuyeQingshan": "I meet a same problem @oleavr , do we need to decrypt the target app(downloaed from AppStore) first?\nmy script is:\n``` code\nvar f = Module.findExportByName(null, 'open');\nInterceptor.attach(f, {\n    onEnter: function (args) {\n        var path = Memory.readUtf8String(args[0]);\n        console.log(\"open\" + path + \")\\n\\t\" + Thread.backtrace(this.context, Backtracer.ACCURATE).map(DebugSymbol.fromAddress).join(\"\\n\") + \"\\n\");\n    }\n});\n```\nand the result is\nlog\nopen/var/mobile/Containers/Data/Application/3933BE13-0B2B-4665-A89B-6D0D5B7F390C/Documents/UserData/_a4daff06f292539b947d5bad567e3817.txt)\n    0x1b6ed40f Foundation!_NSReadBytesFromFileWithExtendedAttributes\n0x1b7066dd Foundation!-[NSString initWithContentsOfFile:encoding:error:]\n0x1b706683 Foundation!+[NSString stringWithContentsOfFile:encoding:error:]\n0xb3f21f MyApp!0xac421f\n0xb3e48f MyApp!0xac348f\n0xb3e3a5 MyApp!0xac33a5\n0x1a541783 libdispatch.dylib!_dispatch_client_callout\n0x1a542253 libdispatch.dylib!dispatch_once_f\n0xb3e37d MyApp!0xac337d\n0x344a73 MyApp!0x2c9a73\n0x344ea5 MyApp!0x2c9ea5\n0x344f31 MyApp!0x2c9f31\n0xb33edd MyApp!0xab8edd\n0xb43f9b MyApp!0xac8f9b\n0xb72ea7 MyApp!0xaf7ea7\n0xb72813 MyApp!0xaf7813\nthe MyApp is the target app(my app to test) and you can see that I can not get the symbol for their address.\nI'm using Frida 11.0.12 and the device is iPhone 5 with iOS10.3.3 cracked with h3lix-RC5.. @oleavr do I need to decrypt the app first?. ",
    "bmax121": "I ran into the same,,. ",
    "leiyugithub": "have you  solved this problem? i got  same with you . ",
    "lee5783": "I got same error message with 10.7.7 and 10.7.6 version\nIm using Android 4.4.2 x86 image (on Bluestacks). ",
    "snooze6": "Try it without using lambdas, like this:\njavascript\n   sub: function (a, b) {\n        return new Promise(function (resolve, reject) {\n            setTimeout(function () {\n                resolve(a - b);\n            }, 100);\n        });\n    }\nAlthough I like lambdas too they seem to be unsupported on Frida agents at this moment.\n. Same problem here, I can confirm this issue.. ",
    "lior82": "Hi Oleavr, I have problem with Frida about : \n\u03bb python test1.py\nTraceback (most recent call last):\n  File \"test1.py\", line 29, in \n    script = session.create_script(ss)\n  File \"C:\\Users\\users\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site-packages\\frida\\core.py\", line 148, in create_script\n    return Script(self._impl.create_script(args, *kwargs))\nfrida.InvalidArgumentError: gDBus.Error:re.frida.Error.InvalidArgument: Script(line 6): SyntaxError: invalid variable declaration\nI use Windows 10. Thanks you. . ",
    "teknogeek": "I'm having the same problem with the x86 Emulator (Android 6.0) and Frida 10.3.9. ",
    "Yeradon": "Still getting the error with freshly installed emulator (Android 8.0, x86).\nPS C:\\Users\\User> frida --version\n10.6.13\nPS C:\\Users\\User> frida-trace -U -f com.android.browser\nFailed to spawn: timed out while waiting for session to establish\n\n```\nPS C:\\Users\\User> frida-ps -U\n  PID  Name\n\n1412  adbd\n 8321  android.hardware.audio@2.0-service\n 1564  android.hardware.biometrics.fingerprint@2.1-service\n 1385  android.hardware.camera.provider@2.4-service\n 1386  android.hardware.configstore@1.0-service\n 1387  android.hardware.drm@1.0-service\n 1388  android.hardware.drm@1.0-service.widevine\n 1389  android.hardware.gatekeeper@1.0-service\n 1526  android.hardware.gnss@1.0-service\n 1390  android.hardware.graphics.allocator@2.0-service\n 1391  android.hardware.graphics.composer@2.1-service\n 1340  android.hardware.keymaster@3.0-service\n 1392  android.hardware.power@1.0-service\n 1393  android.hardware.sensors@1.0-service\n 1383  android.hidl.allocator@1.0-service\n 9184  android.process.acore\n10305  android.process.media\n 8317  audioserver\n 8318  cameraserver\n10158  com.android.keychain\n 8731  com.android.phone\n 8996  com.android.printspooler\n 9291  com.android.providers.calendar\n11137  com.android.systemui\n10011  com.google.android.apps.messaging:rcs\n 8980  com.google.android.apps.nexuslauncher\n 9535  com.google.android.calendar\n10282  com.google.android.deskclock\n 8814  com.google.android.dialer\n10214  com.google.android.ext.services\n 9607  com.google.android.gm\n 9114  com.google.android.gms\n 9260  com.google.android.gms.feedback\n 8909  com.google.android.gms.persistent\n 9836  com.google.android.gms.ui\n 9765  com.google.android.gms.unstable\n 8945  com.google.android.googlequicksearchbox:interactor\n 9056  com.google.android.googlequicksearchbox:search\n 8483  com.google.android.inputmethod.latin\n 9782  com.google.android.videos\n 9026  com.google.process.gapps\n 1516  drmserver\n 8287  frida-helper-32\n 8278  frida-server\n 1544  gatekeeperd\n 1394  healthd\n 1336  hwservicemanager\n    1  init\n 1517  installd\n 8325  ip6tables-restore\n 8323  iptables-restore\n 1518  keystore\n 1398  lmkd\n 1329  logd\n 1527  media.codec\n 1520  media.extractor\n 1521  media.metrics\n 1519  mediadrmserver\n 8319  mediaserver\n 8320  netd\n 1396  qemu-props\n 1528  rild\n 1335  servicemanager\n 1409  sh\n 4595  sh\n 4598  sh\n 1525  storaged\n 1402  surfaceflinger\n 8390  system_server\n 1563  tombstoned\n 1042  ueventd\n 1337  vndservicemanager\n 1341  vold\n 1817  webview_zygote32\n 8316  zygote\nPS C:\\Users\\User> adb shell getprop\n[gsm.version.ril-impl]: [android reference-ril 1.0]\n[ro.bootimage.build.date]: [Mon Sep 11 21:08:22 UTC 2017]\n[ro.build.date]: [Mon Sep 11 21:08:22 UTC 2017]\n[ro.build.description]: [sdk_gphone_x86-userdebug 8.0.0 OSR1.170901.008 4328566 dev-keys]\n[ro.build.display.id]: [sdk_gphone_x86-userdebug 8.0.0 OSR1.170901.008 4328566 dev-keys]\n[ro.product.model]: [Android SDK built for x86]\n[ro.vendor.build.date]: [Mon Sep 11 21:08:22 UTC 2017]\n```\n. @oleavr Yes i used a completely freshly installed emulator with frida 10.6.13 on client & server side.. I recently had problems with spawning processes on android aswell. Setting SELinux to permissive solved the problem for me.. ",
    "waqarrashid33": "Its happening with me too, 10.6.32. Its working fine on arm image but crashes the app on x86.. Anyone here know a solution to my Issue? I am new to Frida, Java and Javascript so pardon me, if I am missing something obvious.. Thanks @oleavr . Another question:\nBut how do I execute the compiled binary? Do I launch it from python bindings just like the JavaScript or some other way?\nUPDATE: My bad, so far according to my understanding it generates a single Javascript file from the nodejs project, which can then be loaded using \"create_script(fd.read())\" in python binding or its counterparts in other bindings.\nWaqar. For those of you who are visiting this issue for similar reason as mine, here is an example script to open a text file on android and send it to host.\n```JavaScript\n'use strict';\nconst fs = require(\"frida-fs\");\nJava.perform(function () {\n    var readStream = fs.createReadStream(\"/path/to/file.txt\");\n    var text = \"\";\n    readStream\n        .on('readable', function () {\n            var chunk;\n            while (null !== (chunk = readStream.read())) {\n                text = text.concat(chunk);\n            }\n        })\n        .on('end', function () {\n            send(text);\n        });\n});\n```\nBelow are roughly the steps I followed:\nTo compile this code, first install frida-compile. Thats how I did it:\nsudo npm install frida-compile -g\nAnd then create a NodeJS project with npm init in the directory you want your project to be. Then install frida-fs using npm install frida-fs. Then make the app.js( or whatever file you want to use as main script) and paste the above code into it.\nCompile this script using frida-compile app.js -o payload.js.\nThen change in your binding code, use payload.js as your JavaScript file. e.g in mine it looks like this:\nscript = process.create_script(open(\"path/to/payload.js\").read())\nI hope its helpful.\nWaqar. ",
    "xuehenIT": "i use frida-server-12.1.1-android-arm64 in my phone(android 6.0), it is listening, but exec frida -U -f xxx --no-pause -l xxx in my ubuntu16.04 , it appared \"Failed to spawn: unexpected error while attaching to process with pid 362\", what's wrong??. ",
    "xietao1233": "@xuehenIT same you, the name of the process is zygote on my phone(android 7.0). ",
    "redknifezs": "same error happening here\uff0c\nthere are my command:\nH:>frida --version\n12.2.25\nH:>frida-ps -U\n PID  Name\n 459  ATFWD-daemon\n 367  adbd\n 383  adspd\n5242  android.process.acore\n3814  android.process.media\n 455  bridgemgrd\n3729  com.android.cellbroadcastreceiver\n5672  com.android.chrome\n5697  com.android.chrome:sandboxed_process0\nH:>frida-discover -p 5672\nFailed to attach: unable to find process with pid 5672\nH:>frida-trace -i \"send\" 5672\nFailed to attach: unable to find process with pid 5672\nthank you for your help!. ",
    "coderiderlin": "thanks,i 've built the linux-arm sdk and it works.by the way,i don't know why the scripts use /npm not /usr/bin/npm,fixed this by ln -s /usr/bin/npm /npm.. yeah the node has been installed right now\n\ne@ubuntu32:~/projects/frida$ dirname `which node`\n/usr/bin\n\nmaybe i did install it after that.\nby the way ,how can i see the real gcc command while compile and link the frida-server?i 've compile frida-server for armhf but the glibc library version is newer than the system one,and i add the -rpath option\n\nLDFLAGS=\"$host_arch_flags -Wl,--gc-sections -Wl,-rpath,/boxer/lib -Wl,--dynamic-linker,/boxer/lib/ld-linux-armhf.so.3\"\n\nto LDFLAGS in /releng/setup.env (line 234) to  relocate the search library path but it doesn't work.\nHere is the LD_TRACE_LOADED_OBJECTS=1 option result,seem like the same as above\n\nroot@cubieboard2:/boxer# LD_TRACE_LOADED_OBJECTS=1 /boxer/frida-server\n/boxer/frida-server: /lib/arm-linux-gnueabihf/libc.so.6: version `GLIBC_2.17' not found (required by /boxer/frida-server)\n        libresolv.so.2 => /lib/arm-linux-gnueabihf/libresolv.so.2 (0xb6f10000)\n        libdl.so.2 => /lib/arm-linux-gnueabihf/libdl.so.2 (0xb6f05000)\n        libpthread.so.0 => /lib/arm-linux-gnueabihf/libpthread.so.0 (0xb6eea000)\n        libc.so.6 => /lib/arm-linux-gnueabihf/libc.so.6 (0xb6e06000)\n        /boxer/lib/ld-linux-armhf.so.3 (0xb6f28000)\nroot@cubieboard2:/boxer#\n\nWhat i think is if the rpath option must be in the frist of gcc option?so i want to see the raw gcc command to find out what exactly it is.. well,i've tried LD_LIBRARY_PATH and it work,i mean the frida-server was up,but attach faild cause:\n\n`# LD_LIBRARY_PATH='/boxer/lib' ./frida-server --version\n10.3.8\n`# LD_LIBRARY_PATH='/boxer/lib' ./frida-server -l 0.0.0.0\nFrida:ERROR:../../../frida-core/src/linux/frida-helper-service-glue.c:2059:frida_resolve_library_function: assertion failed (local_library_path == remote_library_path): (\"/boxer/lib/libc-2.23.so\" == \"/lib/arm-linux-gnueabihf/libc-2.15.so\")\n\ni'm going to downgrade the compiler... what i trying to work with is lubuntu system in armhf arch,not android.unfortunately i don't have the corresponds libc6-dev-armhf-cros version 2.17 (cuz the system's libc.so.6 is GLIBC_ 2.17) to build.\nfor now i'm using this server_armhf with frida8.0.0 (pip install frida==8.0.0) and it works fine.\nhowever ,i want to know how can i  build one with an old gcc version with the corresponds glibc?\nand as i know,the elf linked as static can run on that system,can frida link with static?what should i do if it can? thanks.. problem solved by replace \"-march=armv6\" to \"-marm\" in releng/setup-env.sh\n```\ncase $host_platform in\n  linux)\n    case $host_arch in\n      x86)\n        host_arch_flags=\"-m32\"\n        host_toolprefix=\"/usr/bin/\"\n        ;;\n      x86_64)\n        host_arch_flags=\"-m64\"\n        host_toolprefix=\"/usr/bin/\"\n        ;;\n      arm)\n        host_arch_flags=\"-march=armv5t\"\n        host_toolprefix=\"arm-linux-gnueabi-\"\n    meson_host_cpu=\"armv5t\"\n    ;;\n  armhf)\n    host_arch_flags=\"-marm\"\n    host_toolprefix=\"arm-linux-gnueabihf-\"\n\n    meson_host_cpu=\"armv6hf\"\n    ;;\n  mips)\n\n```. ",
    "Disane": "hmmm, it seems that I can simply pass the instanceas is to Java.cast()\nvar ydyvexoebmInstance = Java.cast(instance, ydyvexoebmClass);\nThough, when I print the properties of ydyvexoebmClassor ydyvexoebmInstance\nconsole.log(Object.getOwnPropertyNames(ydyvexoebmInstance));\nconsole.log(Object.getOwnPropertyNames(ydyvexoebmClass).filter(\n    function(p){return typeof ydyvexoebmClass[p] === 'function'}));\nI don't get anything meaningful other than these generic members:\n$classWrapper,$classHandle,$handle,$weakRef\n$classWrapper. After a bit of tinkering I got the following properties from the com.esinat.ytqilspn.ydyvexoebm instance :\nFound pointer to instance of com.esinat.ytqilspn.ydyvexoebm!\n$classWrapper : function ydyvexoebm() { [ecmascript code] }\n$classHandle : 0x100ef2\n$handle : 0x100ef6\n$weakRef : 12\nSo, the handle is the address that needs to be casted (well, now I know):\nconsole.log(ydyvexoebmInstance.$handle);\nvar ydyvexoebmHandle = Java.cast(ptr(ydyvexoebmInstance.$handle), ydyvexoebmClass);\nMy problem is that I need to somehow hook/mod the overloaded function :-/\nydyvexoebmInstance.farsy.overload('java.io.File').implementation = function(arg1)\n{\n    console.log(\"inside ydyvexoebmInstance.farsy(\\'java.io.File\\')\");\n    retval = this.farsy(arg1);\n    console.log('[*] ydyvexoebmClass.farsy(\\'java.io.File\\'): ' + retval);\n    return retval;\n}\nseems to do nothing :-/\nbut I can tell that I'm hooking the right function:\nconsole.log(ydyvexoebmInstance.farsy.overload('java.io.File'));\nfunction farsy() { [ecmascript code] }. I've finally found what the problem was. It was actually the version and the ABI of the Emulator.\nIt seems that using Frida-Server above Android OS ver. 4.4 is kinda pointless unless you only want to inject methods that will get called more often than once or twice right at the start of the execution of the target App.\nI've figured out that the command:\nfrida -U -l  -f  \ndoesn't work on AVDs running Android 5.0 and above. Also ver. 4.4 on x86 ABI also crashes the target App when injecting into the app_process. \nThe above code works perfectly on an AVD running Android 4.4 ARM! Thought it's slow as hell, but at least I've figured out that the error was not on my side.. hey there, I've noticed that you are using a lot of console outputs and you override the implementation, leaving it completely empty. What is the error message that you get? What is the ABI of the AVD that you use to execute frida-server? Does the version of frida-server match your frida client version?. ",
    "veehaitch": "There is no official support yet but @maltek is working on it.. Thanks for the fast reply! Is there any additional information that I can provide? The jailbreak I use is g0blin and it seems to work fine.. ",
    "erik-smit": "Frida also has trouble with Android/x86 on Android 5.1.\nI don't know if this problem is related, but as an alternative, you could try installing Android Studio, and simulating an Android/ARM device there.\nFrida works fine with that.. $ mv frida-server-10.4.0-android-arm.xz frida-server\nYou need to uncompress the \".xz\" file before renaming and uploading.. > These steps are not on the official docs (https://www.frida.re/docs/android/), maybe worth add? If there \n\nis a way for I help I can wrote and add. Maybe as a troubeshoot part. :-)\n\nThe website is on Github.\nThe page in question: https://github.com/frida/frida-website/blob/master/_docs/android.md\n\nBTW, is there a maillist or something like that to discuss frida usage? \n\nThere's a Telegram group (https://t.me/fridadotre) and a channel on Freenode (#frida).. ",
    "dPhoeniixx": "@erik-smit \nwork fine with android arm, but android arm so slow \ud83d\ude22 . ",
    "Sankalp-bst": "Hello @oleavr ,\nI am facing same issue while hooking android function. I am using frida version 10.6.52 . Working fine in ARM devices. Can you help me to solve this issue please.\nThanks.. ",
    "ChengChengCC": "oh ,I have resolved it. just use\n adb forward tcp:27042 tcp:27042. ",
    "akbulut": "OR when i try this one ;\nvar openURL = ObjC.classes.Service[\"+ GETParameterStringFromDictionary:\"];\nvar nes = new Object('{token:\"nHezHZakbdXATMQvFvxWxcbReBNQVVPH\",id:\"4999F2CE-E044-48E1-8933-EE45143A101A\",username:\"sfsxvfddbhfhvngnb\"}')\n[openURL:nes]\nFile \"/Library/Python/2.7/site-packages/frida/core.py\", line 182, in create_script\n    return Script(self._impl.create_script(args, *kwargs))\nfrida.InvalidArgumentError: gDBus.Error:re.frida.Error.InvalidArgument: Script(line 4): SyntaxError: parse error \n. ",
    "christiancoleman": "Whoops forgot to mention the versions of the programs I'm using:\nWindows 10 Pro 64-bit version 1703\nVisual Studio 2017 version 15.3.1\nNode v6.11.2\ngit version 2.13.3.windows.1\nPython 2.7 and Python 3.6 both downloaded separately before this endeavor. I made sure that 2.7 was listed first in my PATH via python --version. I notice that one of the build processes downloads both 2.7 and 3.6 at one point so I'm not sure how much this matters anymore.\n. ",
    "frapik99": "I noticed that using cmd.exe all is good, avoid using python IDLE console.... ",
    "typoon": "Hey @frapik99 \nI don't know if you solved this already or not, but wanted to give you a way of doing that. Try this code:\n```js\n'use strict';\nvar memory_regions = new Array();\nvar ranges = Process.enumerateRangesSync(\"r--\");\nfor(var i = 0; i < ranges.length; i++) {\n    memory_regions.push(ranges[i]);\n}\nconsole.log(\"Reading from address: \" + ranges[0].base);\nvar a = Memory.readByteArray(ranges[0].base, 64);\nconsole.log(a);\nvar b = new Uint8Array(a);\nvar str = \"\";\nfor(var i = 0; i < b.length; i++) {\n    str += (b[i].toString(16) + \" \");\n}\nconsole.log(str);\n```\nreadByteArray returns an ArrayBuffer, you have to convert it to Uint8Array and then just access the indexes in that array. Here is the output of the above code:\nfrida -l read_memory.js Calculator.exe\n     ____\n    / _  |   Frida 10.5.8 - A world-class dynamic instrumentation framework\n   | (_| |\n    > _  |   Commands:\n   /_/ |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\nAttaching...\nReading from address: 0x7ffe0000\n           0  1  2  3  4  5  6  7  8  9  A  B  C  D  E  F  0123456789ABCDEF\n00000000  00 00 00 00 00 00 a0 0f 75 f1 7a f4 a2 03 00 00  ........u.z.....\n00000010  a2 03 00 00 8d 00 87 a4 2e 22 d3 01 2e 22 d3 01  .........\"...\"..\n00000020  00 a0 11 87 21 00 00 00 21 00 00 00 64 86 64 86  ....!...!...d.d.\n00000030  43 00 3a 00 5c 00 57 00 49 00 4e 00 44 00 4f 00  C.:.\\.W.I.N.D.O.\n0 0 0 0 0 0 a0 f 75 f1 7a f4 a2 3 0 0 a2 3 0 0 8d 0 87 a4 2e 22 d3 1 2e 22 d3 1 0 a0 11 87 21 0 0 0 21 0 0 0 64 86 64 86 43 0 3a 0 5c 0 57 0 49 0 4e 0 44 0 4f 0\nHope that helps.. ",
    "Artem85": "In my case IOS simulator wasn't installed.\nGo to Xcode -> Preferences -> Components\nDownload the latest IOS Simulator.. ",
    "yicongli": "The root reason is missing the /usr/include folder, install command-line tools sometimes will not automatically add it. The Link shows the correct way:\nInstall the package at \n/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14. pkg. ",
    "WWQ1993": "\nThe root reason is missing the /usr/include folder, install command-line tools sometimes will not automatically add it. The Link shows the correct way:\nInstall the package at\n/Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14. pkg\n\nwell done. thanks. ",
    "olivierlacan": "For anyone discovering this later on who may not be familiar with the command line, here's how to install the macOS_SDK_headers_for_macOS_10.14.pkg package as explained in @yicongli's response above:\nIn Terminal.app or any shell app like iTerm:\ncd /Library/Developer/CommandLineTools/Packages/\nopen macOS_SDK_headers_for_macOS_10.14.pkg\nThis should open the following prompt: \n\nMake sure you go through the whole thing and try to install the gem that failed to install again or run bundle install again if this was something you encountered while trying to install from a Gemfile.. ",
    "dksam": "Olivierlacan your solution worked fine, thanks. ",
    "bladexxv": "@olivierlacan  brilliant answer -it solved my problem.  . ",
    "tgn3000": "@olivierlacan thanks, man. ",
    "roland-hochmuth": "u da man @olivierlacan. ",
    "sheffe": "@olivierlacan you're a lifesaver. ",
    "grjd": "@olivierlacan solution worked like a charm! \nI was having problems with \n\nimport theano. \n",
    "gnaixx": "i also encountered this issue. ",
    "meiskam": "any updates on this? i'm having the same issue. ",
    "raulsiles": "I can confirm that a very similar setup based on the Android emulator, but using the x86_64 version rather than the x86 version, perfectly works against the same target app. So this is a frida-server x86 issue.. ",
    "yuguorui": "I am running Android x86 emulator, this problem can be reproduced in Android 6.0 and 7.0.\nEven the example command frida-trace -U -i open com.android.chrome  will cause the app crash, but the frida-ps is working.. ",
    "rotlogix": "Yes, and the error does not always through.  One thing is for certain, none of method implementations I am choosing to hook are working.  Even generic Activities.. I'll probably just (re)flash and (re)root this phone to see if it has anything to do with the device, then go from there.. So I do get results if I hook a specific Activity instead of android.app.Activity .... ",
    "K-S-V": "I am also facing somewhat similar issue. My target device is not an emulator. It's physical Android x86 device (ASUS_T00J) running Android version 4.4.2. I haven't used Frida on this device before so I am not sure if it's a bug in new version of Frida or this configuration is not supported altogether. I am running latest frida and frida-server version (10.6.4).\n**\nFrida:ERROR:../../../frida-core/src/linux/frida-helper-service-glue.c:2059:frida_resolve_library_function: assertion failed (local_library_path == remote_library_path): (\"/system/lib/libc.so\" == \"/system/lib/arm/libc.so\")\nAborted\nThere is only one libc.so loaded in the target process.\ncat /proc/3579/maps | grep libc.so\n4005a000-4011c000 r-xp 00000000 b3:09 53196      /system/lib/libc.so\n4011c000-4011d000 r--p 000c1000 b3:09 53196      /system/lib/libc.so\n4011d000-40120000 rw-p 000c2000 b3:09 53196      /system/lib/libc.so\n. > Systems like Genymotion, that emulate ARM binaries through qemu-user, are not supported. (PRs welcome though!)\nBut I am not using an emulator. I am using a physical device and the target binary have x86 native libraries available within the apk and it's not emulating arm binaries. I can open a separate issue if you want.. ",
    "NamPNQ": "@oleavr Can you tell more about how to fix it?\n. I use latest version. ",
    "squidbobble": "Using server 10.6.8 x86 vers on android\n. also tried with a nexus device with same android version. just tried on 4.4.4 and 5.1. same problem. ",
    "juanriaza": "Seems to work fine with version 10.2.3\nSource: #343, plus my own experience. ",
    "sulhaedir": "thank you Eduardo.\nI'll try.. hi, I found a script using Exposed, is there a way to do this using frida?\nprivate static final String MAIN_ACTIVITY_CLASS = \"com.example.seccon2015.rock_paper_scissors.MainActivity\";\n    @Override\n    public void handleLoadPackage(final XC_LoadPackage.LoadPackageParam lpparam) throws Throwable{\n        if(lpparam.packageName.equals(\"com.example.seccon2015.rock_paper_scissors\")) {\n            XposedBridge.log(\"Loaded App: \" + lpparam.packageName);\n            XposedHelpers.findAndHookMethod(MAIN_ACTIVITY_CLASS, lpparam.classLoader, \"onCreate\", Bundle.class, new XC_MethodHook() {\n                @Override\n                protected void afterHookedMethod(MethodHookParam param) throws Throwable {\n                    Method calc = XposedHelpers.findMethodBestMatch(param.thisObject.getClass(), \"calc\");\n                    int resultKey = (int) calc.invoke(param.thisObject);\n                    XposedBridge.log(\"SECCON{\" + String.valueOf(107 * (1000 + resultKey)) + \"}\");\n                }\n            });\n        }\n    }. ",
    "csftech": "@masbog Try the latest frida.. @cpelliccioni Frida doesn't support spawning on iOS 11 now. I only tested on iPhone 6S 11.1.2 jailbreaked with Electra Beta 11-3.\nFrida should work normally on iOS 8 to iOS 10.. @veehaitch Perhaps, it is related to this issue https://github.com/frida/frida-core/pull/165.\nCould you help me to figure this out?\nFirst, inject the following script to your launchd. (frida -U -l launchd.js -p 1 --no-pause)\nlaunchd.js\nThen, click your target app icon on iPhone. you will get rawIdentifier output on your terminal.\nFinal, paste frida output here(you could hide your target app's bundle id before pasting.). Try this https://github.com/frida/frida-core/issues/7.. ",
    "cpelliccioni": "I have installed the latest frida (10.6.54) on a iOS 11.1.2 but I see the same message.. ",
    "galenbwill": "Also confirmed on iPhone 6 11.1.2 with latest Electra release 1.0.2, installing frida from cydia repo.\n(Also tried building from master with same result.)\nBut as you said...\n\nFrida doesn't support spawning on iOS 11 now.. \n",
    "masbog": "awh... just add \"--no-pause\" option fix for connection closed , can it add to default option just for iOS? seems got trouble pause after attach the program direct from USB  \ud83e\udd17. @nssecur1ty and @oleavr i was used like this :\n\n$ frida -U -f com.masbog.isJB-ObjC\n\ni don't know it must be %resume in terminal after \"Spawned\", if not will be terminate in seconds\n\n[iPhone::com.masbog.isJB-ObjC]-> Process terminated\n\nmaybe this same issues on FiOS, why after spawned the application was terminated on device...\n\n. @stevepoland85 always used a latest version \u263a\ufe0f. @NeKavai i used th0r on my 11, never get issues... or try download frida server, safe into /sbin directory and manually start the server.... @NeKavai glad to hear that... now still unsupported for my iP7 Meridian JB.... :( so sad... . ",
    "bensh": "also getting the same failed to attach issue even with the --no-pause switch\nFrida 10.6.21\niOS 9.0.2. Apologies, I wrote that comment then went to update in case it had been fixed then forgot to change the version. I am running 10.7.7. I did recently update to the latest Frida and this error no longer occurred. I haven't yet tested with Objection as was the reason I was installing Frida. Will update when I do,. ",
    "FuryX509": "Tanx for resp... :)\nI solve the problem, since we want to hook constructor type function we must use $init instead of function name, so we must write something like this:\nJava.perform(function() {\n  bClass = Java.use(\"com.***.f.a.h\");\n  bClass.$init.overload('java.security.KeyStore','android.content.Context').implementation = function(arg1,arg2) {\n  }\n  console.log(\"[] SSL modified\")\n}). ",
    "ChD1": "Maybe wrong arch? Try x86 and other archs. I Think this will help.. I use logcat. This is some example:\n```\nvar Log = Java.use(\"android.util.Log\");\nvar TAG_L = \"[FRIDA_SCRIPT]\";\nLog.v(TAG_L, \"[*] This string will be printed in to logcat!\");\n```\n. You can save you log to file Frida Javascript Api: File. Maybe better intercept getState() like this:\nvar states = Java.use(\"android.net.NetworkInfo.State\");\na[1] = Java.use(\"android.net.NetworkInfo\");\na[1].getState.implementation = function(){\n    var ret = states.valueOf(\"CONNECTED\");\n    return ret;\n};\nPS: I write code without checking.\n. Try this:\n```\n...\nComponentInfo.$new.overload(\"android.content.pm.ComponentInfo\").implementation = function(orig){\n...\n}\n});\n. And in the log there is a record console.log (this) ;? I certainly can be wrong, but I think that you hook code starts after Activity.onStart executed. In a frida, this is a problem, an early interception of Java. Some methods executed before the interception. I even built in the Application.onCreate method sleep instructions (smali) for pausing program execution so that the frida code had time to work. . Can you show full script code? What type of parentDir var? Maybe you need File.$new(parentDir) for first argument?. Try this:\n\"use strict\";\nJava.perform(function () {\n    if (Java.available) {\n        try{\n            var FileClass = Java.use('java.io.File');         \n            var AppInfoClass = Java.use('android.content.pm.ApplicationInfo');\n            var AppInfoObject = AppInfoClass.$new();\n            var parentDir_string = AppInfoObject.dataDir;\n            var parentDir = FileClass.$new.overload('java.lang.String').call(FileClass,parentDir_string);\n            //var FileObject = FileClass.$new(parentDir,\"shared_prefs\");\n            var FileObject = FileClass.$new.overload('java.io.File', 'java.lang.String').call(FileClass,parentDir,\"shared_prefs\");\n        }\n        catch(err){\n            console.log(\"Could not find class\");\n            console.log(err);\n            return;\n        }\n    }\n    else {\n        send(\"Java not available in this process\");\n    }\n});\n. Maybe: console.log(parentDir_string.getAbsoluteFile()). Take it:\n\"use strict\";\nJava.perform(function () {\n    if (Java.available) {\n        try{\n        var application = Java.use(\"android.app.ActivityThread\").currentApplication();\n        var context = application.getApplicationContext();\n        var AppPath = context.getFilesDir().getParent(); \n        console.log(AppPath);\n\n    }\n    catch(err){\n        console.log(\"Could not find class\");\n        console.log(err);\n        return;\n    }\n}\nelse {\n    send(\"Java not available in this process\");\n}\n\n});\n```. Try to use DebugSymbol documentation. ",
    "ibrahimyilmaz": "Hi there,\nI tried  in that way and I get that error.\nI just didn't understand how can I call it...\nError: expected an integer\n    at input:7\nInterceptor.attach(Module.findExportByName(\"libcommonCrypto.dylib\", \"CCHmacInit\"), {\n    onEnter: function (args) {\n    this.data = args[1];\n    this.dataLength = args[2];\n    },\n    onLeave: function (retval) {\n    var data = Memory.readByteArray(this.data, this.dataLength);\n    send({ type: 'data-for-you' }, data);\n    }\n});. ",
    "shanliangxiaomifeng": "How to get an error message on mobile device? I had the same trouble.. ",
    "stathisb": "@enovella First of all thank you for your answer.\n1) I run the frida-server following the official documentation https://www.frida.re/docs/android/\n2) Just check if i can see the running processes on my mobile device using the following command on my local machine: frida-ps -U\n3) The file command is not available on my device. So no, i cannot\n4) Yes i have changed the permissions of the file to 755\n. @enovella  The problem solved. The problem was with the decompression of the .xz server file. I finally decompressed the file using the WinZip (as i am working on Windows) and now all seems to work fine. So lets close that issue.\nThank you very much :). ",
    "epiciskandar": "solved. Frida works with colorama, so I could make output colorable by customizing callback function which pass to script.on('message').. resolved(?). some javascript error may lead to this situation. guess Frida could not handle those correctly. ",
    "nanoymaster": "I am having the same issue:\n```\nJava.choose(\"uk.rossmarks.fridalab.MainActivity\", {\n            onMatch: function (instance) {\n                rtn = instance.chall03();\n                console.log(rtn); // return's false\n                console.log(\"[3][+] Hooking chall03()\");\n            instance.chall03.implementation = function() {\n                console.log(\"[3][+] hooked\"); // never see this in console\n                return true;\n            }\n\n            rtn = instance.chall03();\n            console.log(rtn); // return's false\n        },\n        onComplete: function () { }\n    });\n\n}\n```\ntrying to make the following  in MainAtivity return true:\n```\n private boolean chall03() {\n        return false;\n    }\n```\nUsing frida version 12.2.18. ",
    "Zymlex": "-U - use USB connection, but Nox use Wi-Fi.\nExample for MEmu (on cmd):\nadb shell \"getprop dhcp.eth0.ipaddress\"\nadb shell \"/data/local/tmp/frida-server -l 10.0.2.15:21502 &\"\nfrida-ps -H 127.0.0.1:21502\nfrida -H 127.0.0.1:21502 -f it.app.mobile -l \"D:\\frida-android-repinning_sa-1.js\" --no-pause\nThe port must be forwarded and not busy (can use another forwarded).. ",
    "nssecur1ty": "Using a workaround for now ... http://sultan.readthedocs.io/en/latest/ + https://github.com/bored-engineer/iOS-sbutils (sblaunch). Worked for me on both iOS 8.2.1 and 9.3.5 (iPhone 4s). If you're looking for a workaround, try http://sultan.readthedocs.io/en/latest/ + https://github.com/bored-engineer/iOS-sbutils (sblaunch). Worked for me on both iOS 8.2.1 and 9.3.5 (iPhone 4s). ",
    "Qsec": "Still experiencing this issue - iPod touch 5th gen, iOS 9.3.5, jailbroken using phoenix.\nPython script causes iPod to reboot on device.spawn. Output:\nFile \"/usr/local/lib/python3.4/dist-packages/frida/core.py\", line 85, in spawn\n    return self._impl.spawn(argv)\nfrida.TransportError: the connection is closed\nUsing Frida for 32-bit devices, (10.6.40), from cydia repo. ",
    "0xra": "with iPod touch iOS 9.3.5 jailbroken using phoenix seems that the app looses its entitlements once frida injects its agent into the process. this happens when using simple frida -U APPNAME without -f flag\ngetting this from /private/var/mobile/Library/Logs/CrashReporter/DiagnosticLogs/security.log.20180417T134009Z\nApr 17 14:57:30 securityd[85] <Notice> [engine{} ]: engine  (null): will-commit api 1 changes\nApr 17 14:57:33 securityd[85] <Notice> [item{} ]: item SecDbItemDoInsert inserted O,genp,E9733F4A,L,dku,com.apple.apsd,426,acct,svce,v_Data,musr,20180417135733.261669Z,F2F6669A\nApr 17 14:57:33 securityd[85] <Notice> [engine{} ]: engine  (null): will-commit api 1 changes\nApr 17 14:57:46 securityd[85] <Error> [SecLogging{} ]:  SecOCSPSingleResponseCreate OCSPResponse: single response has extension(s).\nApr 17 14:57:46 securityd[85] <Error> [SecLogging{} ]:  SecOCSPSingleResponseCreate OCSPResponse: single response has extension(s).\nApr 17 14:57:46 securityd[85] <Error> [SecLogging{} ]:  SecOCSPSingleResponseCreate OCSPResponse: single response has extension(s).\nApr 17 14:58:36 securityd[85] <Notice> [item{} ]: item SecDbItemDoInsert inserted O,genp,038438AE,L,ak,SGGM6D27TK.com.microsoft.azureauthenticator,427,acct,svce,v_Data,musr,20180417135836.986502Z,5702E190\nApr 17 14:58:36 securityd[85] <Notice> [engine{} ]: engine  (null): will-commit api 1 changes\nApr 17 14:59:22 securityd[85] <Notice> [user{} ]: SecTaskLoadEntitlements failed error=22 cs_flags=e00500e, task->pid_self=-1\nApr 17 14:59:22 securityd[85] <Notice> [user{} ]: SecTaskCopyDebugDescription: Microsoft Authen[480]\nApr 17 14:59:22 securityd[85] <Error> [SecLogging{} ]:  secTaskDiagnoseEntitlements MISSING keychain entitlements: raw entitlement values: <CFBasicHash 0x17e43250 [0x38a62170]>{type = mutable dict, count = 0,\n        entries =>\n        }\nApr 17 14:59:22 securityd[85] <Error> [SecLogging{} ]:  secTaskDiagnoseEntitlements MISSING keychain entitlements: original ag: (null)\nApr 17 14:59:22 securityd[85] <Error> [SecLogging{} ]:  secTaskDiagnoseEntitlements MISSING keychain entitlements: newly parsed ag: (null)\nApr 17 14:59:22 securityd[85] <Error> [SecLogging{} ]:  __security_simulatecrash Simulating crash, reason: keychain entitlement(s) missing, code=53c00007\nApr 17 14:59:23 securityd[85] <Error> [SecLogging{} ]:  securityd_xpc_dictionary_handler Microsoft Authen[480] copy_matching Error Domain=NSOSStatusErrorDomain Code=-34018 \"client has neither application-identifier nor keychain-access-groups entitlements\" UserInfo={NSDescription=client has neither application-identifier nor keychain-access-groups entitlements}\nApr 17 14:59:23 securityd[85] <Notice> [user{} ]: SecTaskLoadEntitlements failed error=22 cs_flags=e00500e, task->pid_self=-1\ni assume this is why launchd crashes \nfrida version 8.2.5 does work with -f flag, versions 8.1.14 and 9.0.13 do not work with phoenix on ios 9.3.5 32-bit\nany ideas what it could be?. ",
    "rumpeltux": "I experience similar behavior in the emulator on x86.\nWith earlier api-levels native tracing works, although I can\u2019t get any of the java examples to run, e.g. the onResume example in https://www.frida.re/docs/javascript-api/#java always crashes the app (since super.onResume() wasn\u2019t called) and never logs anything.\nIs there a list of supported platforms / APIs?\n. ",
    "Nightbringer21": "Could be directly related to #373. . ",
    "Wingless-Archangel": "I have this similar issue but occur on the android emulator both 32-bit and 64-bit.. Let me try it as soon as I can. Thanks for the heads up! Just one quick question, Should the test including the emulator?. ",
    "GeekTan": "I try hook stringFromJNI and setText is sucessed,but I want to try hook onCreate(), onCreate() can't hook?. I want to get ssavedInstanceState.toString(),but in function(){} can not get,how to get?. ",
    "RazeeHJ": "I disabled root access and then turned it to apps & adb, and now it works fine. ",
    "fridaExplorer": "Thanks for the information!\nUnfortunately, the script that i use it on the apk does not execute the Java.perform, hence I cannot use Java.use to print the string to logcat.. Interceptor,attach(Module.findExportByName(\"libc.so\",\"open\"), {\n   OnEnter: function(args) {\n       console.log(\"Open called from:\\n\" +\n            Thread.backtrace(this.context, Backtracer.ACCURATE)\n            .map(DebugSymbol.fromAddress).join(\"\\n\") + \"\\n\");\n   }\n});\nThis will print the address of the caller where open is invoked.\n. I have just found the code on the gum interceptor...... ",
    "Darkkey": "@enovella \nI saw a.d() calls (not direct, but from b's instance) in the dex file, hooking a.d does not work (no such member), hooking b.d never produce any calls, calling this.f() or accessing this._m from a.f also is not working (undefined).. ",
    "paulnaoki": "I got this too.. u will need a rooted device with andriod version < 4.2.2 in order to bypass those security policies... ",
    "TheDauntless": "Surely there's a way around this. Where is this enforced? Android source? SELinux?. Extended logcat. I cleared logcat, then ran frida-ps -Ua.\n\u276f adb logcat                                                                                                                                                                                  [16:15:02]\n--------- beginning of main\n04-16 05:16:48.084   908   995 D WifiNative-HAL: Failing getSupportedFeatureset because HAL isn't started\n04-16 05:16:48.096   324   324 I SELinux : SELinux: Loaded service_contexts from /service_contexts.\n04-16 05:16:48.097   324   324 I SELinux : avc:  received policyload notice (seqno=5)\n--------- beginning of system\n04-16 05:16:48.104   908   924 E BatteryStatsService: no controller energy info supplied\n04-16 05:16:48.104   908   924 E BatteryStatsService: no controller energy info supplied\n04-16 05:16:48.109   908   924 E BatteryStatsService: power: Missing API\n04-16 05:16:48.131   908   924 E BatteryStatsService: modem info is invalid: ModemActivityInfo{ mTimestamp=0 mSleepTimeMs=0 mIdleTimeMs=0 mTxTimeMs[]=[0, 0, 0, 0, 0] mRxTimeMs=0 mEnergyUsed=0}\n--------- beginning of crash\n04-16 05:16:48.575  2747  2747 F libc    : Fatal signal 11 (SIGSEGV), code 1, fault addr 0x28 in tid 2747 (ndroid.systemui)\n04-16 05:16:48.575   250   250 W         : debuggerd: handling request: pid=2747 uid=10030 gid=10030 tid=2747\n04-16 05:16:48.591  4645  4645 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n04-16 05:16:48.591  4645  4645 F DEBUG   : AOSPA Version: '7.3.1-RELEASE-20171101'\n04-16 05:16:48.591  4645  4645 F DEBUG   : Build fingerprint: 'google/hammerhead/hammerhead:6.0.1/M4B30Z/3437181:user/release-keys'\n04-16 05:16:48.591  4645  4645 F DEBUG   : Revision: '0'\n04-16 05:16:48.591  4645  4645 F DEBUG   : ABI: 'arm'\n04-16 05:16:48.591  4645  4645 F DEBUG   : pid: 2747, tid: 2747, name: ndroid.systemui  >>> com.android.systemui <<<\n04-16 05:16:48.591  4645  4645 F DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x28\n04-16 05:16:48.591  4645  4645 F DEBUG   :     r0 0000000f  r1 39bba31a  r2 00000000  r3 b4697008\n04-16 05:16:48.591  4645  4645 F DEBUG   :     r4 ffffffff  r5 00000000  r6 0000000f  r7 39bba31a\n04-16 05:16:48.591  4645  4645 F DEBUG   :     r8 bed76d30  r9 ffffffff  sl 00000000  fp 00000001\n04-16 05:16:48.591  4645  4645 F DEBUG   :     ip b46925d0  sp bed76d00  lr b460e749  pc b491d9b0  cpsr 600e0030\n04-16 05:16:48.592  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2747\n04-16 05:16:48.601  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2752\n04-16 05:16:48.601  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2753\n04-16 05:16:48.602  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2754\n04-16 05:16:48.602  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2755\n04-16 05:16:48.603  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2756\n04-16 05:16:48.603  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2757\n04-16 05:16:48.604  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2758\n04-16 05:16:48.604  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2759\n04-16 05:16:48.605  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2769\n04-16 05:16:48.605  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2770\n04-16 05:16:48.605  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2771\n04-16 05:16:48.607  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2772\n04-16 05:16:48.608  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2777\n04-16 05:16:48.609  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2778\n04-16 05:16:48.609  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2783\n04-16 05:16:48.610  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2784\n04-16 05:16:48.610  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2785\n04-16 05:16:48.611  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2788\n04-16 05:16:48.612  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2789\n04-16 05:16:48.613  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2790\n04-16 05:16:48.613  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2794\n04-16 05:16:48.614  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2795\n04-16 05:16:48.614  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2796\n04-16 05:16:48.615  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2798\n04-16 05:16:48.616  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2805\n04-16 05:16:48.616  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 2820\n04-16 05:16:48.617  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 3303\n04-16 05:16:48.618  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 4496\n04-16 05:16:48.618  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 4505\n04-16 05:16:48.618  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 4513\n04-16 05:16:48.619  4645  4645 E DEBUG   : Unwind failed: pid = 2747, tid = 4644\n04-16 05:16:48.620  4645  4645 E         : AM data write failed: Broken pipe\n04-16 05:16:48.623   250   250 W         : debuggerd: resuming target 2747\n04-16 05:16:48.626   908   925 I BootReceiver: Copying /data/tombstones/tombstone_04 to DropBox (SYSTEM_TOMBSTONE)\n04-16 05:16:48.653   908  1487 I WindowManager: WIN DEATH: Window{2878fd3 u0 NavigationBar}\n04-16 05:16:48.655   908   994 D WifiService: Client connection lost with reason: 4\n04-16 05:16:48.657   908   919 D ConnectivityService: ConnectivityService NetworkRequestInfo binderDied(NetworkRequest [ LISTEN id=9, [] ], android.os.BinderProxy@9d5c041)\n04-16 05:16:48.658   908  1518 D GraphicsStats: Buffer count: 5\n04-16 05:16:48.658   908  1507 W AudioService: Current remote volume controller died, unregistering\n04-16 05:16:48.659   908   922 V KeyguardServiceDelegate: *** Keyguard disconnected (boo!)\n04-16 05:16:48.659   908  1507 W VolumeController: Error calling dismiss\n04-16 05:16:48.659   908  1507 W VolumeController: android.os.DeadObjectException\n04-16 05:16:48.659   908  1507 W VolumeController:  at android.os.BinderProxy.transactNative(Native Method)\n04-16 05:16:48.659   908  1507 W VolumeController:  at android.os.BinderProxy.transact(Binder.java:615)\n04-16 05:16:48.659   908  1507 W VolumeController:  at android.media.IVolumeController$Stub$Proxy.dismiss(IVolumeController.java:162)\n04-16 05:16:48.659   908  1507 W VolumeController:  at com.android.server.audio.AudioService$VolumeController.postDismiss(AudioService.java:6417)\n04-16 05:16:48.659   908  1507 W VolumeController:  at com.android.server.audio.AudioService.setVolumeController(AudioService.java:6265)\n04-16 05:16:48.659   908  1507 W VolumeController:  at com.android.server.audio.AudioService$4.binderDied(AudioService.java:6274)\n04-16 05:16:48.659   908  1507 W VolumeController:  at android.os.BinderProxy.sendDeathNotice(Binder.java:688)\n04-16 05:16:48.659   908   908 W WallpaperManagerService: Wallpaper service gone: ComponentInfo{com.android.systemui/com.android.systemui.ImageWallpaper}\n04-16 05:16:48.659   908   919 I ActivityManager: Process com.android.systemui (pid 2747) has died\n04-16 05:16:48.659   908   919 D ActivityManager: cleanUpApplicationRecord -- 2747\n04-16 05:16:48.660   908   919 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.keyguard.KeyguardService in 0ms\n04-16 05:16:48.660   908   919 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.ImageWallpaper in 0ms\n04-16 05:16:48.660   908   919 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.SystemUIService in 0ms\n04-16 05:16:48.660   908   999 E ConnectivityService: RemoteException caught trying to send a callback msg for NetworkRequest [ LISTEN id=9, [] ]\n04-16 05:16:48.661   908   919 W ActivityManager: Re-adding persistent process ProcessRecord{f9359e2 2747:com.android.systemui/u0a30}\n04-16 05:16:48.666   908   984 W InputDispatcher: channel '717b8bb DockedStackDivider (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 05:16:48.666   908   984 E InputDispatcher: channel '717b8bb DockedStackDivider (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 05:16:48.666   908   984 W InputDispatcher: channel 'abea4b1 com.android.systemui.ImageWallpaper (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 05:16:48.666   908   984 E InputDispatcher: channel 'abea4b1 com.android.systemui.ImageWallpaper (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 05:16:48.666   908   984 W InputDispatcher: channel '3810209 AssistPreviewPanel (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 05:16:48.666   908   984 E InputDispatcher: channel '3810209 AssistPreviewPanel (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 05:16:48.666   908   984 W InputDispatcher: channel 'ab1562f StatusBar (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 05:16:48.666   908   984 E InputDispatcher: channel 'ab1562f StatusBar (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 05:16:48.675   908  1487 W WindowManager: Failed to report 'resized' to the client of Window{abea4b1 u0 com.android.systemui.ImageWallpaper}, removing this window.\n04-16 05:16:48.682   908  1487 W InputDispatcher: Attempted to unregister already unregistered input channel 'abea4b1 com.android.systemui.ImageWallpaper (server)'\n04-16 05:16:48.688   908  1155 I WindowManager: WIN DEATH: Window{3810209 u0 AssistPreviewPanel}\n04-16 05:16:48.688   908  1155 W InputDispatcher: Attempted to unregister already unregistered input channel '3810209 AssistPreviewPanel (server)'\n04-16 05:16:48.690   335   335 I Zygote  : Process 2747 exited due to signal (11)\n04-16 05:16:48.690   908   918 I WindowManager: WIN DEATH: Window{ab1562f u0 StatusBar}\n04-16 05:16:48.690   908   918 W InputDispatcher: Attempted to unregister already unregistered input channel 'ab1562f StatusBar (server)'\n04-16 05:16:48.693   908  2573 W WindowManager: Failed looking up window\n04-16 05:16:48.693   908  2573 W WindowManager: java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@cc61b58 does not exist\n04-16 05:16:48.693   908  2573 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9518)\n04-16 05:16:48.693   908  2573 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9509)\n04-16 05:16:48.693   908  2573 W WindowManager:     at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1801)\n04-16 05:16:48.693   908  2573 W WindowManager:     at android.os.BinderProxy.sendDeathNotice(Binder.java:688)\n04-16 05:16:48.693   908  2573 I WindowManager: WIN DEATH: null\n04-16 05:16:48.693   908  1518 I WindowManager: WIN DEATH: Window{717b8bb u0 DockedStackDivider}\n04-16 05:16:48.693   908  1518 W InputDispatcher: Attempted to unregister already unregistered input channel '717b8bb DockedStackDivider (server)'\n04-16 05:16:48.710   908   919 I ActivityManager: Start proc 4651:com.android.systemui/u0a30 for restart com.android.systemui\n04-16 05:16:48.732  4651  4651 W System  : ClassLoader referenced unknown path: /system/priv-app/SystemUI/lib/arm\n04-16 05:16:48.753  4651  4651 V SystemUIService: Starting SystemUI services for user 0.\n04-16 05:16:48.761  4651  4651 V MediaRouter: Adding route: RouteInfo{ name=Phone, description=null, status=null, category=RouteCategory{ name=null types=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO  groupable=false }, supportedTypes=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO , presentationDisplay=null }\n04-16 05:16:48.764  4651  4651 V MediaRouter: Updating audio routes: AudioRoutesInfo{ type=SPEAKER }\n04-16 05:16:48.765  4651  4651 V MediaRouter: Selecting route: RouteInfo{ name=Phone, description=null, status=null, category=RouteCategory{ name=null types=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO  groupable=false }, supportedTypes=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO , presentationDisplay=null }\n04-16 05:16:48.774   908   908 D TrustManagerService: Removing dead TrustListener.\n04-16 05:16:48.777  4651  4651 V FingerprintManager: FingerprintManagerService was null\n04-16 05:16:48.780  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:48.780  4651  4651 W FingerprintManager: addLockoutResetCallback(): Service not connected!\n04-16 05:16:48.800   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.803   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.808   343   539 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 05:16:48.809  4651  4676 I OMXClient: MuxOMX ctor\n04-16 05:16:48.810   340  1086 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 05:16:48.893   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.896   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.901  4651  4651 I vol.Events: writeEvent collection_started\n04-16 05:16:48.901   343   539 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 05:16:48.901  4651  4681 I OMXClient: MuxOMX ctor\n04-16 05:16:48.902   340  1086 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 05:16:48.908  4651  4682 I vol.Events: writeEvent external_ringer_mode_changed normal\n04-16 05:16:48.908  4651  4682 I vol.Events: writeEvent internal_ringer_mode_changed normal\n04-16 05:16:48.985   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.988   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=4651\n04-16 05:16:48.992   343  1096 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 05:16:48.992  4651  4685 I OMXClient: MuxOMX ctor\n04-16 05:16:48.993   340  2304 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 05:16:49.018  4651  4682 I vol.Events: writeEvent level_changed STREAM_ALARM 6\n04-16 05:16:49.019  4651  4682 I vol.Events: writeEvent level_changed STREAM_BLUETOOTH_SCO 7\n04-16 05:16:49.020  4651  4682 I vol.Events: writeEvent level_changed STREAM_MUSIC 11\n04-16 05:16:49.022  4651  4682 I vol.Events: writeEvent level_changed STREAM_RING 5\n04-16 05:16:49.023  4651  4682 I vol.Events: writeEvent level_changed STREAM_SYSTEM 5\n04-16 05:16:49.025  4651  4682 I vol.Events: writeEvent level_changed STREAM_VOICE_CALL 4\n04-16 05:16:49.045  4651  4651 D StorageNotification: Notifying about private volume: VolumeInfo{private}:\n04-16 05:16:49.045  4651  4651 D StorageNotification:     type=PRIVATE diskId=null partGuid=null mountFlags=0 mountUserId=-1 \n04-16 05:16:49.045  4651  4651 D StorageNotification:     state=MOUNTED \n04-16 05:16:49.045  4651  4651 D StorageNotification:     fsType=null fsUuid=null fsLabel=null \n04-16 05:16:49.045  4651  4651 D StorageNotification:     path=/data internalPath=null \n04-16 05:16:49.059   908   922 V KeyguardServiceDelegate: *** Keyguard connected (yay!)\n04-16 05:16:49.088   908  1487 I StatusBarManagerService: registerStatusBar bar=com.android.internal.statusbar.IStatusBar$Stub$Proxy@4577294\n04-16 05:16:49.286  4651  4651 W ResourceType: Invalid package identifier when getting bag for resource number 0xff76c124\n04-16 05:16:49.393  4651  4651 W System  : ClassLoader referenced unknown path: \n04-16 05:16:49.393  4651  4651 W System  : ClassLoader referenced unknown path: /system/priv-app/Dialer/lib/arm\n04-16 05:16:49.394  4651  4651 D ApplicationLoaders: ignored Vulkan layer search path /system/priv-app/Dialer/lib/arm:/system/lib:/vendor/lib for namespace 0xb6dac090\n04-16 05:16:49.429  4651  4651 D LocalBluetoothProfileManager: Adding local MAP profile\n04-16 05:16:49.430  4651  4651 D BluetoothMap: Create BluetoothMap proxy object\n04-16 05:16:49.434  4651  4651 D LocalBluetoothProfileManager: LocalBluetoothProfileManager construction complete\n04-16 05:16:49.444  4651  4651 I CameraManagerGlobal: Connecting to camera service\n04-16 05:16:49.521  4651  4688 D OpenGLRenderer: profile bars disabled\n04-16 05:16:49.521  4651  4688 D OpenGLRenderer: ambientRatio = 1.50\n04-16 05:16:49.523  4651  4651 D PhoneStatusBar: navbar is enabled\n04-16 05:16:49.535  4651  4651 D PhoneStatusBar: navbar is regular\n04-16 05:16:49.539  4651  4651 D PhoneStatusBar: disable: < expand icons alerts system_info back HOME* RECENT* clock SEARCH* quick_settings >\n04-16 05:16:49.565  4651  4651 D PhoneStatusBar: heads up is enabled\n04-16 05:16:49.570  4651  4651 D PhoneStatusBar: navbar is regular\n04-16 05:16:49.571   908   919 I ActivityManager: Setting hasTopUi=true for pid=4651\n04-16 05:16:49.588  4651  4651 D PhoneStatusBar: disable: < expand ICONS* alerts SYSTEM_INFO* back HOME RECENT clock SEARCH quick_settings >\n04-16 05:16:49.591  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:49.591  4651  4651 D PhoneStatusBar: disable: < expand ICONS alerts SYSTEM_INFO back HOME RECENT clock SEARCH quick_settings >\n04-16 05:16:49.592  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:49.593   908  1049 D ActivityTrigger: ActivityTrigger activityPauseTrigger \n04-16 05:16:49.594   908   921 I VrManagerService: VR mode is disallowed\n04-16 05:16:49.594   908   921 D ActivityTrigger: ActivityTrigger activityStopTrigger \n04-16 05:16:49.597  4651  4651 W KeyguardUpdateMonitor: invalid subId in handleSimStateChange()\n04-16 05:16:49.598  4651  4651 W KeyguardUpdateMonitor: invalid subId in handleServiceStateChange()\n04-16 05:16:49.599  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:49.626   908  1518 V KeyguardServiceDelegate: **** SHOWN CALLED ****\n04-16 05:16:49.627  4651  4651 D PhoneStatusBar: disable: < EXPAND* ICONS alerts SYSTEM_INFO BACK* HOME RECENT clock SEARCH quick_settings >\n04-16 05:16:49.663  4651  4651 D ViewRootImpl[StatusBar]: changeCanvasOpacity: opaque=true\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: <qeglDrvAPI_eglInitialize:379>: EGL 1.4 QUALCOMM build: Nondeterministic_AU_msm8974_LA.BF.1.1.3_RB1__release_AU (I389a668de0)\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: OpenGL ES Shader Compiler Version: E031.28.00.04\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: Build Date: 10/24/15 Sat\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: Local Branch: mybranch15621148\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: Remote Branch: quic/LA.BF.1.1.3_rb1.3\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: Local Patches: NONE\n04-16 05:16:49.770  4651  4688 I Adreno-EGL: Reconstruct Branch: NOTHING\n04-16 05:16:49.774  4651  4688 I OpenGLRenderer: Initialized EGL, version 1.4\n04-16 05:16:49.774  4651  4688 D OpenGLRenderer: Swap behavior 1\n04-16 05:16:49.791   908   994 D WifiService: New client listening to asynchronous messages\n04-16 05:16:49.821  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:49.823  4651  4651 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 05:16:49.865  4651  4651 D PhoneStatusBar: disable: < expand* ICONS alerts SYSTEM_INFO back* HOME RECENT clock SEARCH quick_settings >. This time without the Magisk Frida package, but simply by pushing the binary to /data/local/tmp. In this case, frida-ps -Ua returns an error:\nFailed to enumerate applications: timed out while waiting for session to establish\nadb logcat                                                                                                                                                                                  [17:55:55]\n--------- beginning of main\n04-16 06:57:18.828   238   238 I auditd  : type=1403 audit(0.0:347): policy loaded auid=4294967295 ses=4294967295\n04-16 06:57:35.805  5585  5585 I sh      : type=1400 audit(0.0:348): avc: denied { module_request } for kmod=\"personality-8\" scontext=u:r:shell:s0 tcontext=u:r:kernel:s0 tclass=system permissive=1\n--------- beginning of crash\n04-16 06:57:36.154  4651  4651 F libc    : Fatal signal 11 (SIGSEGV), code 1, fault addr 0x28 in tid 4651 (ndroid.systemui)\n04-16 06:57:36.154   250   250 W         : debuggerd: handling request: pid=4651 uid=10030 gid=10030 tid=4651\n04-16 06:57:36.191  5613  5613 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***\n04-16 06:57:36.191  5613  5613 F DEBUG   : AOSPA Version: '7.3.1-RELEASE-20171101'\n04-16 06:57:36.191  5613  5613 F DEBUG   : Build fingerprint: 'google/hammerhead/hammerhead:6.0.1/M4B30Z/3437181:user/release-keys'\n04-16 06:57:36.191  5613  5613 F DEBUG   : Revision: '0'\n04-16 06:57:36.191  5613  5613 F DEBUG   : ABI: 'arm'\n04-16 06:57:36.191  5613  5613 F DEBUG   : pid: 4651, tid: 4651, name: ndroid.systemui  >>> com.android.systemui <<<\n04-16 06:57:36.191  5613  5613 F DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x28\n04-16 06:57:36.191  5613  5613 F DEBUG   :     r0 0000000f  r1 39bba31a  r2 00000000  r3 b4697008\n04-16 06:57:36.191  5613  5613 F DEBUG   :     r4 ffffffff  r5 00000000  r6 0000000f  r7 39bba31a\n04-16 06:57:36.191  5613  5613 F DEBUG   :     r8 bed76d30  r9 ffffffff  sl 00000000  fp 00000001\n04-16 06:57:36.191  5613  5613 F DEBUG   :     ip b46925d0  sp bed76d00  lr b460e749  pc b491d9b0  cpsr 600d0030\n04-16 06:57:36.196  5613  5613 F DEBUG   : \n04-16 06:57:36.196  5613  5613 F DEBUG   : backtrace:\n04-16 06:57:36.197  5613  5613 F DEBUG   :     #00 pc 000129b0  /system/lib/libutils.so (_ZN7android6Looper9pollInnerEi+143)\n04-16 06:57:36.197  5613  5613 F DEBUG   :     #01 pc 0001289d  /system/lib/libutils.so (_ZN7android6Looper8pollOnceEiPiS1_PPv+24)\n04-16 06:57:36.197  5613  5613 F DEBUG   :     #02 pc 0008e795  /system/lib/libandroid_runtime.so (_ZN7android18NativeMessageQueue8pollOnceEP7_JNIEnvP8_jobjecti+24)\n04-16 06:57:36.197  5613  5613 F DEBUG   :     #03 pc 01bfe1ad  /system/framework/arm/boot-framework.oat (offset 0x15d4000)\n04-16 06:57:36.724  5613  5613 E         : AM data write failed: Broken pipe\n--------- beginning of system\n04-16 06:57:36.728   908   925 I BootReceiver: Copying /data/tombstones/tombstone_05 to DropBox (SYSTEM_TOMBSTONE)\n04-16 06:57:36.738   250   250 W         : debuggerd: resuming target 4651\n04-16 06:57:36.775   908  1489 I WindowManager: WIN DEATH: Window{62beb69 u0 NavigationBar}\n04-16 06:57:36.776   908  1049 D ConnectivityService: ConnectivityService NetworkRequestInfo binderDied(NetworkRequest [ LISTEN id=10, [] ], android.os.BinderProxy@42616d7)\n04-16 06:57:36.776   908  1049 W AudioService: Current remote volume controller died, unregistering\n04-16 06:57:36.777   908   994 D WifiService: Client connection lost with reason: 4\n04-16 06:57:36.777   908  1049 W VolumeController: Error calling dismiss\n04-16 06:57:36.777   908  1049 W VolumeController: android.os.DeadObjectException\n04-16 06:57:36.777   908  1049 W VolumeController:  at android.os.BinderProxy.transactNative(Native Method)\n04-16 06:57:36.777   908  1049 W VolumeController:  at android.os.BinderProxy.transact(Binder.java:615)\n04-16 06:57:36.777   908  1049 W VolumeController:  at android.media.IVolumeController$Stub$Proxy.dismiss(IVolumeController.java:162)\n04-16 06:57:36.777   908  1049 W VolumeController:  at com.android.server.audio.AudioService$VolumeController.postDismiss(AudioService.java:6417)\n04-16 06:57:36.777   908  1049 W VolumeController:  at com.android.server.audio.AudioService.setVolumeController(AudioService.java:6265)\n04-16 06:57:36.777   908  1049 W VolumeController:  at com.android.server.audio.AudioService$4.binderDied(AudioService.java:6274)\n04-16 06:57:36.777   908  1049 W VolumeController:  at android.os.BinderProxy.sendDeathNotice(Binder.java:688)\n04-16 06:57:36.777   908   908 W WallpaperManagerService: Wallpaper service gone: ComponentInfo{com.android.systemui/com.android.systemui.ImageWallpaper}\n04-16 06:57:36.778   908  1507 I StatusBarManagerService: binder died for pkg=com.android.systemui\n04-16 06:57:36.779   908  2573 D GraphicsStats: Buffer count: 5\n04-16 06:57:36.779   908   922 V KeyguardServiceDelegate: *** Keyguard disconnected (boo!)\n04-16 06:57:36.781   908  1489 W WindowManager: Failed to report 'resized' to the client of Window{b5cef76 u0 com.android.systemui.ImageWallpaper}, removing this window.\n04-16 06:57:36.781   908  1489 W WindowManager: Failed to report 'resized' to the client of Window{b8ed525 u0 StatusBar}, removing this window.\n04-16 06:57:36.781   908   999 E ConnectivityService: RemoteException caught trying to send a callback msg for NetworkRequest [ LISTEN id=10, [] ]\n04-16 06:57:36.781   908  1049 I ActivityManager: Process com.android.systemui (pid 4651) has died\n04-16 06:57:36.781   908  1049 D ActivityManager: cleanUpApplicationRecord -- 4651\n04-16 06:57:36.782   908  1049 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.keyguard.KeyguardService in 0ms\n04-16 06:57:36.782   908  1049 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.ImageWallpaper in 0ms\n04-16 06:57:36.782   908  1049 W ActivityManager: Scheduling restart of crashed service com.android.systemui/.SystemUIService in 0ms\n04-16 06:57:36.784   908  1049 W ActivityManager: Re-adding persistent process ProcessRecord{f9359e2 4651:com.android.systemui/u0a30}\n04-16 06:57:36.794   908   984 W InputDispatcher: channel '92f6691 DockedStackDivider (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 06:57:36.794   908   984 E InputDispatcher: channel '92f6691 DockedStackDivider (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 06:57:36.800   908   984 W InputDispatcher: channel '1eece8f AssistPreviewPanel (server)' ~ Consumer closed input channel or an error occurred.  events=0x9\n04-16 06:57:36.800   908   984 E InputDispatcher: channel '1eece8f AssistPreviewPanel (server)' ~ Channel is unrecoverably broken and will be disposed!\n04-16 06:57:36.801   908  1049 I ActivityManager: Start proc 5628:com.android.systemui/u0a30 for restart com.android.systemui\n04-16 06:57:36.820   908   918 I WindowManager: WIN DEATH: Window{1eece8f u0 AssistPreviewPanel}\n04-16 06:57:36.820   908   918 W InputDispatcher: Attempted to unregister already unregistered input channel '1eece8f AssistPreviewPanel (server)'\n04-16 06:57:36.823   908  1487 W WindowManager: Failed looking up window\n04-16 06:57:36.823   908  1487 W WindowManager: java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@737b51c does not exist\n04-16 06:57:36.823   908  1487 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9518)\n04-16 06:57:36.823   908  1487 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9509)\n04-16 06:57:36.823   908  1487 W WindowManager:     at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1801)\n04-16 06:57:36.823   908  1487 W WindowManager:     at android.os.BinderProxy.sendDeathNotice(Binder.java:688)\n04-16 06:57:36.823   908  1487 I WindowManager: WIN DEATH: null\n04-16 06:57:36.824   908  1524 W WindowManager: Failed looking up window\n04-16 06:57:36.824   908  1524 W WindowManager: java.lang.IllegalArgumentException: Requested window android.os.BinderProxy@8397211 does not exist\n04-16 06:57:36.824   908  1524 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9518)\n04-16 06:57:36.824   908  1524 W WindowManager:     at com.android.server.wm.WindowManagerService.windowForClientLocked(WindowManagerService.java:9509)\n04-16 06:57:36.824   908  1524 W WindowManager:     at com.android.server.wm.WindowState$DeathRecipient.binderDied(WindowState.java:1801)\n04-16 06:57:36.824   908  1524 W WindowManager:     at android.os.BinderProxy.sendDeathNotice(Binder.java:688)\n04-16 06:57:36.824   908  1524 I WindowManager: WIN DEATH: null\n04-16 06:57:36.830   335   335 I Zygote  : Process 4651 exited due to signal (11)\n04-16 06:57:36.841   908  1505 I WindowManager: WIN DEATH: Window{92f6691 u0 DockedStackDivider}\n04-16 06:57:36.841   908  1505 W InputDispatcher: Attempted to unregister already unregistered input channel '92f6691 DockedStackDivider (server)'\n04-16 06:57:36.848   908   922 W InputMethodManagerService: Window already focused, ignoring focus gain of: android.view.inputmethod.InputMethodManager$1@832ab6a attribute=null, token = android.view.ViewRootImpl$W@5481436\n04-16 06:57:36.859   324   324 I SELinux : SELinux: Loaded service_contexts from /service_contexts.\n04-16 06:57:36.859   324   324 I SELinux : avc:  received policyload notice (seqno=7)\n04-16 06:57:36.879  5628  5628 W System  : ClassLoader referenced unknown path: /system/priv-app/SystemUI/lib/arm\n04-16 06:57:36.903  5628  5628 V SystemUIService: Starting SystemUI services for user 0.\n04-16 06:57:36.912  5628  5628 V MediaRouter: Adding route: RouteInfo{ name=Phone, description=null, status=null, category=RouteCategory{ name=null types=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO  groupable=false }, supportedTypes=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO , presentationDisplay=null }\n04-16 06:57:36.914  5628  5628 V MediaRouter: Updating audio routes: AudioRoutesInfo{ type=SPEAKER }\n04-16 06:57:36.916  5628  5628 V MediaRouter: Selecting route: RouteInfo{ name=Phone, description=null, status=null, category=RouteCategory{ name=null types=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO  groupable=false }, supportedTypes=ROUTE_TYPE_LIVE_AUDIO ROUTE_TYPE_LIVE_VIDEO , presentationDisplay=null }\n04-16 06:57:36.926   908   908 D TrustManagerService: Removing dead TrustListener.\n04-16 06:57:36.929  5628  5628 V FingerprintManager: FingerprintManagerService was null\n04-16 06:57:36.932  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:36.932  5628  5628 W FingerprintManager: addLockoutResetCallback(): Service not connected!\n04-16 06:57:36.951   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:36.954   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:36.959   343  1096 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 06:57:36.959  5628  5653 I OMXClient: MuxOMX ctor\n04-16 06:57:36.960   340   441 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 06:57:37.051   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:37.052  5628  5628 I vol.Events: writeEvent collection_started\n04-16 06:57:37.054   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:37.057  5628  5658 I vol.Events: writeEvent external_ringer_mode_changed normal\n04-16 06:57:37.057  5628  5658 I vol.Events: writeEvent internal_ringer_mode_changed normal\n04-16 06:57:37.059   343  1091 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 06:57:37.059  5628  5660 I OMXClient: MuxOMX ctor\n04-16 06:57:37.060   340  2304 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 06:57:37.146   337   337 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:37.148   337  1324 W ServiceManager: Permission failure: com.oma.drm.permission.ACCESS_OMA_DRM from uid=10030 pid=5628\n04-16 06:57:37.152   343   539 I MediaPlayerService: MediaPlayerService::getOMX\n04-16 06:57:37.153  5628  5666 I OMXClient: MuxOMX ctor\n04-16 06:57:37.154   340  1086 I OMXMaster: makeComponentInstance(OMX.google.vorbis.decoder) in mediacodec process\n04-16 06:57:37.168  5628  5658 I vol.Events: writeEvent level_changed STREAM_ALARM 6\n04-16 06:57:37.168  5628  5658 I vol.Events: writeEvent level_changed STREAM_BLUETOOTH_SCO 7\n04-16 06:57:37.170  5628  5658 I vol.Events: writeEvent level_changed STREAM_MUSIC 11\n04-16 06:57:37.172  5628  5658 I vol.Events: writeEvent level_changed STREAM_RING 5\n04-16 06:57:37.173  5628  5658 I vol.Events: writeEvent level_changed STREAM_SYSTEM 5\n04-16 06:57:37.176  5628  5658 I vol.Events: writeEvent level_changed STREAM_VOICE_CALL 4\n04-16 06:57:37.200  5628  5628 D StorageNotification: Notifying about private volume: VolumeInfo{private}:\n04-16 06:57:37.200  5628  5628 D StorageNotification:     type=PRIVATE diskId=null partGuid=null mountFlags=0 mountUserId=-1 \n04-16 06:57:37.200  5628  5628 D StorageNotification:     state=MOUNTED \n04-16 06:57:37.200  5628  5628 D StorageNotification:     fsType=null fsUuid=null fsLabel=null \n04-16 06:57:37.200  5628  5628 D StorageNotification:     path=/data internalPath=null \n04-16 06:57:37.212   908   922 V KeyguardServiceDelegate: *** Keyguard connected (yay!)\n04-16 06:57:37.236   908  1524 I StatusBarManagerService: registerStatusBar bar=com.android.internal.statusbar.IStatusBar$Stub$Proxy@39d6c6d\n04-16 06:57:37.420  5628  5628 W ResourceType: Invalid package identifier when getting bag for resource number 0xff76c124\n04-16 06:57:37.531  5628  5628 W System  : ClassLoader referenced unknown path: \n04-16 06:57:37.531  5628  5628 W System  : ClassLoader referenced unknown path: /system/priv-app/Dialer/lib/arm\n04-16 06:57:37.532  5628  5628 D ApplicationLoaders: ignored Vulkan layer search path /system/priv-app/Dialer/lib/arm:/system/lib:/vendor/lib for namespace 0xb6dac090\n04-16 06:57:37.561  5628  5628 D LocalBluetoothProfileManager: Adding local MAP profile\n04-16 06:57:37.563  5628  5628 D BluetoothMap: Create BluetoothMap proxy object\n04-16 06:57:37.567  5628  5628 D LocalBluetoothProfileManager: LocalBluetoothProfileManager construction complete\n04-16 06:57:37.578  5628  5628 I CameraManagerGlobal: Connecting to camera service\n04-16 06:57:37.654  5628  5668 D OpenGLRenderer: profile bars disabled\n04-16 06:57:37.655  5628  5668 D OpenGLRenderer: ambientRatio = 1.50\n04-16 06:57:37.656  5628  5628 D PhoneStatusBar: navbar is enabled\n04-16 06:57:37.668  5628  5628 D PhoneStatusBar: navbar is regular\n04-16 06:57:37.672  5628  5628 D PhoneStatusBar: disable: < EXPAND* icons alerts system_info BACK* HOME* RECENT* clock SEARCH* quick_settings >\n04-16 06:57:37.701  5628  5628 D PhoneStatusBar: heads up is enabled\n04-16 06:57:37.705  5628  5628 D PhoneStatusBar: navbar is regular\n04-16 06:57:37.706  5628  5628 W KeyguardUpdateMonitor: invalid subId in handleSimStateChange()\n04-16 06:57:37.731  5628  5628 W KeyguardUpdateMonitor: invalid subId in handleServiceStateChange()\n04-16 06:57:37.753  5628  5628 D PhoneStatusBar: disable: < EXPAND ICONS* alerts SYSTEM_INFO* BACK HOME RECENT clock SEARCH quick_settings >\n04-16 06:57:37.760  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:37.761  5628  5628 D PhoneStatusBar: disable: < EXPAND ICONS alerts SYSTEM_INFO BACK HOME RECENT clock SEARCH quick_settings >\n04-16 06:57:37.762  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:37.764  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:37.771  5628  5628 I Choreographer: Skipped 30 frames!  The application may be doing too much work on its main thread.\n04-16 06:57:37.771   908  1156 V KeyguardServiceDelegate: **** SHOWN CALLED ****\n04-16 06:57:37.797  5628  5628 D ViewRootImpl[StatusBar]: changeCanvasOpacity: opaque=true\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: <qeglDrvAPI_eglInitialize:379>: EGL 1.4 QUALCOMM build: Nondeterministic_AU_msm8974_LA.BF.1.1.3_RB1__release_AU (I389a668de0)\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: OpenGL ES Shader Compiler Version: E031.28.00.04\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: Build Date: 10/24/15 Sat\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: Local Branch: mybranch15621148\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: Remote Branch: quic/LA.BF.1.1.3_rb1.3\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: Local Patches: NONE\n04-16 06:57:37.905  5628  5668 I Adreno-EGL: Reconstruct Branch: NOTHING\n04-16 06:57:37.907  5628  5668 I OpenGLRenderer: Initialized EGL, version 1.4\n04-16 06:57:37.908  5628  5668 D OpenGLRenderer: Swap behavior 1\n04-16 06:57:37.926   908   994 D WifiService: New client listening to asynchronous messages\n04-16 06:57:37.959  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:37.959  5628  5628 W FingerprintManager: isFingerprintHardwareDetected(): Service not connected!\n04-16 06:57:37.996  5628  5628 D PhoneStatusBar: disable: < expand* ICONS alerts SYSTEM_INFO back* HOME RECENT clock SEARCH quick_settings >\n04-16 06:58:00.091   908   921 I ProcessStatsService: Prepared write state in 1ms \n. Take a look at the objection framework, which is built on Frida. It provides code for downloading files, and also for ssl pinning bypasses. \nhttps://github.com/sensepost/objection\nVote to close, as not a frida issue.. Please show us the script you are using.\nAdditionally, list your frida version and OS.. (Still learning myself, but ...)\nJava.available is to check if you are actually running on Android. For example, you could create 1 SSL bypassing script that first checks if you're on Android or iOS, and act accordingly.\nJava.perform is used to attach that function to the current thread, and, coincidentally, will crash if Java is not available. So functionality wise, this would be the same, I guess:\n```javascript\nif(Java.isAvailable)\n{\nJava.perform(function(){// ...});\n}\n//or\ntry\n{\nJava.perform(function(){// ...});\n}\ncatch(e)\n{\n}\n```\n. ",
    "thenak": "If it is due to SElinux policies, then perhaps this comment would help:\nhttps://github.com/frida/frida/issues/394#issuecomment-353405089. @madushan1000 did this work for you?  I ran 10.6.30 instead of .28 and it still crashes the app upon frida-trace..... ",
    "madushan1000": "take a look at the tombstone files (located at /data/tombstone/) they will provide more insight into what caused the crash. I'm pretty sure it was the same thing as issue 394. Since google apparently enforced the dlopen rule since android 7(but oneplus bypassed it for their Android 7 builds I think).. I have no idea how to get a log message, there is no documentation on how to enable debug logs in Frida server. But I have a feeling issue #398 you filed has something to do with it. . Good point about logging. I was trying to debug this without building Frida by myself, but the lack of precompiled debug tools(strace, ltrace) for Android, especially for arm64 is making it harder. And to get a copy of them, I might have to build AOSP itself.\nSo the correct way of going about this is building the Frida server for Android and running it under an android gdbserver?\nOn the other point: I have tried setting selinux to permissive on my phone and even then Frida didn't work. I'm not an expert on selinux and I'm not sure it's behaving the same on Android. I didn't specifically look of selinux audit logs, I will hopefully have some time to spend on this, this week. . @oleavr Is there a way to avoid building android-server for all the architectures? I tried setting FRIDA_HOST to arm64, but it doesn't look like It's working as intended. It takes up quite a space (my SSD itn's that big :( ) and takes a considerable amount of time to rebuild.\nAlso, I have been facing the following issue while building install-macos \nninja: Entering directory `build/tmp-macos-x86/frida-gum'\nninja: error: '../../../frida-gum/tests/data/targetfunctions-darwin-x86.dylib', needed by 'tests/data/targetfunctions-darwin-x86.dylib', missing and no known rule to make it\nmake[1]: *** [build/frida-macos-x86/lib/pkgconfig/frida-gum-1.0.pc] Error 1\nmake: *** [install-macos] Error 2\nAny idea what's causing this? I'm building from master.\n. Nice, I will try that. I'm trying with the latest python frida from pip for now. \nThis is the output of dmesg | grep -E -i selinux\n[35428.807710] selinux: avc:  denied  { set } for property=persist.vendor.camera.debug.logfile pid=1036 uid=1006 gid=1006 scontext=u:r:mm-qcamerad:s0 tcontext=u:object_r:default_prop:s0 tclass=property_service\\x0a\n[35439.447597] selinux: avc:  denied  { set } for property=persist.vendor.camera.debug.logfile pid=1036 uid=1006 gid=1006 scontext=u:r:mm-qcamerad:s0 tcontext=u:object_r:default_prop:s0 tclass=property_service\\x0a\n[36709.194204] [20171222_19:25:55.924908]@2 SELinux:  Context u:object_r:frida_file:s0 is not valid (left unmapped).\n[36716.064064] [20171222_19:26:02.794769]@2 SELinux: security_load_policy, ss_initialized: 1\n[36716.068928] [20171222_19:26:02.799618]@2 SELinux: 2048 avtab hash slots, 242638 rules.\n[36717.450690] [20171222_19:26:04.181393]@2 SELinux: 2048 avtab hash slots, 242638 rules.\n[36717.450716] [20171222_19:26:04.181424]@2 SELinux:  1 users, 4 roles, 2295 types, 0 bools, 1 sens, 1024 cats\n[36717.450723] [20171222_19:26:04.181432]@2 SELinux:  91 classes, 242638 rules\n[36717.454845] [20171222_19:26:04.185551]@2 SELinux:  Context u:object_r:frida_file:s0 became valid (mapped).\n[36717.562320] [20171222_19:26:04.293023]@2 SELinux: security_load_policy, sidtab.shutdown: 0\n[36721.932102] [20171222_19:26:08.662793]@2 selinux: SELinux: Loaded file_contexts\\x0a\n[36875.829826] [20171222_19:28:42.560533]@2 selinux: avc:  received policyload notice (seqno=3)\\x0a\n[37086.779257] [20171222_19:32:13.509960]@2 SELinux: security_load_policy, ss_initialized: 1\n[37086.782891] [20171222_19:32:13.513596]@2 SELinux: 2048 avtab hash slots, 242638 rules.\n[37088.126089] [20171222_19:32:14.856791]@3 SELinux: 2048 avtab hash slots, 242638 rules.\n[37088.126124] [20171222_19:32:14.856831]@3 SELinux:  1 users, 4 roles, 2295 types, 0 bools, 1 sens, 1024 cats\n[37088.126131] [20171222_19:32:14.856839]@3 SELinux:  91 classes, 242638 rules\n[37088.240074] [20171222_19:32:14.970774]@3 SELinux: security_load_policy, sidtab.shutdown: 0\n[37093.994991] [20171222_19:32:20.725678]@3 selinux: SELinux: Loaded file_contexts\\x0a\n[37187.111639] [20171222_19:33:53.842343]@2 selinux: avc:  received policyload notice (seqno=4)\\x0a\nCorrect me if I'm wrong, but it doesn't seem like there are any selinux policy violations by frida. \nI also noticed that sometimes the target app doesn't crash, but instead get very laggy, which seems to suggest the injection actually happen and then something goes wrong.. While trying to debug this, I got frida to compile with android ndk r16b, with some hackory. \nsh\ncd ~/android-ndk-r16b/platforms/android-21/arch-arm64/usr\ncp -rf ../../../../sysroot/usr/include .\ncd include\nmkdir asm\ncp aarch64-linux-android/asm/* asm/\ncd $FRIDA_HOME\nANDROID_NDK_ROOT=$HOME/android-ndk-r16b make -f Makefile.sdk.mk FRIDA_HOST=android-arm64\nANDROID_NDK_ROOT=$HOME/android-ndk-r16b make build/frida-android-arm64/lib/pkgconfig/frida-core-1.0.pc \nI'm not sure why the unified headers are not picked up by frida build system(if failes while compiling efsutls), But it should probably go to a separate issue.\nUnfortunately compiling with the new NDK didn't solve the original problem. I'll keep digging.\n. Hi @oleavr, \nI did some debugging and it looks like the injected code doesn't start correctly. I think the injection happens fine though(_frida_helper_service_do_inject doesn't return 0). Frida server just times out waiting to receive something on the socket/fifo. \nIs there any documentation I can read to get an understanding of how exactly the injection part happens? . @oleavr I wish I realized this before, but android apparently saves app crash dump to /data/tombstones. I took a look at the tombstone file related to one of the apps and noticed this section.\nmemory near x4:\n    0000007c775ce928 00534c5420746365 542063696e6f6962  ect TLS.bionic T\n    0000007c775ce938 616572687400534c 6c616e6769732064  LS.thread signal\n    0000007c775ce948 74006b6361747320 6973206461657268   stack.thread si\n    0000007c775ce958 617473206c616e67 6472617567206b63  gnal stack guard\n    0000007c775ce968 7470006567617020 72635f6461657268   page.pthread_cr\n    0000007c775ce978 6863732065746165 63737465735f6465  eate sched_setsc\n    0000007c775ce988 2072656c75646568 696166206c6c6163  heduler call fai\n    0000007c775ce998 007325203a64656c 5f64616572687470  led: %s.pthread_\n    0000007c775ce9a8 6620657461657263 63203a64656c6961  create failed: c\n    0000007c775ce9b8 69616620656e6f6c 007325203a64656c  lone failed: %s.\n    0000007c775ce9c8 5f64616572687470 6620657461657263  pthread_create f\n    0000007c775ce9d8 63203a64656c6961 2074276e646c756f  ailed: couldn't \n    0000007c775ce9e8 657461636f6c6c61 7479622d757a2520  allocate %zu-byt\n    0000007c775ce9f8 657070616d207365 3a65636170732064  es mapped space:\n    0000007c775cea08 7268747000732520 616572635f646165   %s.pthread_crea\n    0000007c775cea18 656c696166206574 646c756f63203a64  te failed: could\nAnd from it it looks like pthread_create failes. Or they maybe the symboles from the library. I'm not sure. I can't figure out a way to get a coredump style full memory dump on android to look into this further. If you're interested, I can send you the related tombstone file to inspect(I'm not posting here since I don't know if there anything I should not be posting public in it).\nAlso, do you know how can I link logcat lib to the frida-agent? I tried including <android/log.h> and adding -llog to by messing around with meson.build but It didn't work. I was probably doing it wrong.. I think this part would be helpful too,\n```\nBuild fingerprint: 'OnePlus/OnePlus3/OnePlus3:8.0.0/OPR6.170623.013/10250816:user/release-keys'\nRevision: '0'\nABI: 'arm64'\npid: 15656, tid: 15909, name: alogcatroot.app  >>> rs.pedjaapps.alogcatroot.app <<<\nsignal 11 (SIGSEGV), code 2 (SEGV_ACCERR), fault addr 0x7c78f220c0\n    x0   0000007c749fe360  x1   0000000000000001  x2   0000007c78f220c0  x3   0000007c77594f4c\n    x4   0000007c775ce94f  x5   0000000000000000  x6   0000007c546fa4f0  x7   000000000007d882\n    x8   0000000000000040  x9   8cd323293a1a4218  x10  8cd323293a1a4218  x11  0000007c546fa588\n    x12  0000007c546fa500  x13  0000007c546fa4f0  x14  0000000000000100  x15  0000007c749ffcc8\n    x16  0000007c775f3d88  x17  0000007c77594874  x18  0000000000000020  x19  0000000000000036\n    x20  0000007c546fa4f0  x21  0000007c546fa4f0  x22  0000000000003d28  x23  0000007c749fe060\n    x24  0000007c546fa570  x25  0000007c545fe000  x26  000000000000000b  x27  000000006f6b4ce8\n    x28  000000006fce7ea0  x29  0000007c546fa4b0  x30  0000007c749fe0a0\n    sp   0000007c546fa480  pc   0000007c78f220c0  pstate 0000000000000000\n    v0   0000007c545fe0000000000000000000  v1   0000007ff36a76a00000007ff36a7710\n    v2   00000000000000000000000000000004  v3   0000007c557920c00000007c557920b8\n    v4   00000000000000000000000000000000  v5   0000000000000000000000003f800000\n    v6   00000000000000003f80000000000000  v7   00000000000000000077006f0064006e\n    v8   00000000000000000000000000000000  v9   00000000000000000000000000000000\n    v10  00000000000000000000000000000000  v11  00000000000000000000000000000000\n    v12  00000000000000000000000000000000  v13  00000000000000000000000000000000\n    v14  00000000000000000000000000000000  v15  00000000000000000000000000000000\n    v16  00000000000000000000000044d84000  v17  00000000000000000000000040000000\n    v18  80200800000000008020000000000000  v19  00000000000000000000000000000000\n    v20  00000000000000000000000000000000  v21  00000000000000000000000000000000\n    v22  00000000000000000000000041600000  v23  00000000000000000000000000000000\n    v24  0000000000000000000000003f800000  v25  0000000000000000000000003f800000\n    v26  000000000000000000000000ebad808a  v27  000000000000000000000000ebad808b\n    v28  000000000000000000000000ebad808c  v29  000000000000000000000000ebad808d\n    v30  000000000000000000000000ebad808e  v31  00000000000000000000000000000001\n    fpsr 00000013  fpcr 00000000\nbacktrace:\n    #00 pc 00000000000010c0  [anon:linker_alloc:0000007c78f21000]\n    #01 pc 000000000000009c  \nstack:\n         0000007c546fa400  0077006f0064006e\n         0000007c546fa408  0000000000000000\n         0000007c546fa410  0000000000000000\n         0000007c546fa418  0000007c775524e8  /system/lib64/libc.so (open)\n         0000007c546fa420  0000000000001000\n         0000007c546fa428  0000007c775ce94f  /system/lib64/libc.so\n         0000007c546fa430  0000000000000000\n         0000007c546fa438  0000007c546fa4f0\n         0000007c546fa440  000000000007d882\n         0000007c546fa448  0000000000000000\n         0000007c546fa450  0000007c545fe000  [anon:thread stack guard page]\n         0000007c546fa458  0000000000000000\n         0000007c546fa460  0000007c6b60e000  [stack:15909]\n         0000007c546fa468  8cd323293a1a4218\n         0000007c546fa470  0000007c546fa4b0\n         0000007c546fa478  0000007c749fe078\n    #00  0000007c546fa480  0000007c546fa4f0\n         ........  ........\n    #01  0000007c546fa480  0000007c546fa4f0\n         0000007c546fa488  0000007c546fa4f0\n         0000007c546fa490  0000007c546fa4b0\n         0000007c546fa498  0000007c775917a0  /system/lib64/libc.so (_ZL15__pthread_startPv+40)\n         0000007c546fa4a0  0000007c77591778  /system/lib64/libc.so (_ZL15__pthread_startPv)\n         0000007c546fa4a8  0000000000000000\n         0000007c546fa4b0  0000007c546fa4e0\n         0000007c546fa4b8  0000007c7754a2b8  /system/lib64/libc.so (__start_thread+72)\n         0000007c546fa4c0  0000000000000000\n         0000007c546fa4c8  0000000000000000\n         0000007c546fa4d0  0000007c793a29b0\n         0000007c546fa4d8  0000007c793a2a58\n         0000007c546fa4e0  0000000000000000\n         0000007c546fa4e8  0000000000000000\n         0000007c546fa4f0  0000007c522894f0  [stack:15876]\n         0000007c546fa4f8  0000000000000000\n```. So, I found this and this.\nApparently android started enforcing mutually exclusive writable/executable pages in Android 8. But it looks like it's only applicable while loading libraries. \nCan this be the issue? if so, can we use something like PTRACE_PEEKTEXT or somehow give up the writability of the allocated pages?. @oleavr Any idea on how to fix this? Meanwhile, I'm trying to replicate the results with a small test program to see if codepage protection is actually enabled in the pages we allocate at runtime.. @thenak @oleavr Looks like It's working fine for some small targets (like aLogcat ROOT) but just crashes any bigger applications(like chrome or twitter). For medium-sized applications, there are different error messages.\nmedium sized apps\nfrida-trace -U -i open 17361\nFailed to start tracing: script is destroyed\nlarge apps\nfrida-trace -U -i open 4440\nFailed to attach: timed out while waiting for session to establish\nI'll try to get an idea of what's going on under the hood and file a different bug report when I have some time.. hi @oleavr, It looks like the dlopen/dlsym still has issues in android 8.0. Take a look at the bellow tombstone.\n```\n\nBuild fingerprint: 'OnePlus/OnePlus3/OnePlus3:8.0.0/OPR6.170623.013/10250816:user/release-keys'\nRevision: '0'\nABI: 'arm'\npid: 9845, tid: 1131, name: .android.chrome  >>> com.android.chrome <<<\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x0\nCause: null pointer dereference\n    r0 d6fe5360  r1 bd07f938  r2 00000000  r3 bd07fdf4\n    r4 bd07f970  r5 00000000  r6 00000000  r7 000000aa\n    r8 00002675  r9 00000000  sl d6fe4081  fp 0000000b\n    ip 00000000  sp bd07f938  lr d6fe40c3  pc 00000000  cpsr 40010010\n    d0  6166206d6c6c756e  d1  696c203a64656c69\n    d2  6168207972617262  d3  20736920656c646e\n    d4  7832634f4175497a  d5  335a75536d616468\n    d6  657361622f3d3d67  d7  696c2f216b70612e\n    d8  0000000000000000  d9  0000000000000000\n    d10 0000000000000000  d11 0000000000000000\n    d12 0000000000000000  d13 0000000000000000\n    d14 0000000000000000  d15 0000000000000000\n    d16 0000001100000021  d17 0000000000000000\n    d18 0000000000000000  d19 000000000688d168\n    d20 bc2c9d6f2871987b  d21 c000000000000000\n    d22 3f90851a81e3a35f  d23 4008002200000000\n    d24 4008000000000000  d25 3fdb6db6db6fabff\n    d26 3fd55555518f264d  d27 3f80842100000000\n    d28 0005c0000005c000  d29 0005c0000005c000\n    d30 0000000000000000  d31 0000001700000017\n    scr 2000001b\nbacktrace:\n    #00 pc 00000000  \n    #01 pc 000000c1  \nstack:\n         bd07f8f8  21ba20b0  /dev/ashmem/dalvik-main space (region space) (deleted)\n         bd07f8fc  d6fe40b3\n         bd07f900  00000000\n         bd07f904  00000000\n         bd07f908  00000000\n         bd07f90c  00000000\n         bd07f910  d6fe5260\n         bd07f914  00000000\n         bd07f918  00002675\n         bd07f91c  f1b7749f  /system/bin/linker (__dl__Z10dlsym_implPvPKcS1_PKv+74)\n         bd07f920  bd07f928\n         bd07f924  f1b7742b  /system/bin/linker (__dl__ZL10dlopen_extPKciPK17android_dlextinfoPKv+70)\n         bd07f928  00000000\n         bd07f92c  bd07f970\n         bd07f930  bd07f970\n         bd07f934  00000000\n    #00  bd07f938  00000000\n         ........  ........\n    #01  bd07f938  00000000\n         bd07f93c  eeba3053  /system/lib/libdl.so (dlsym+8)\n         bd07f940  000000aa\n         bd07f944  d6fe40b3\n         bd07f948  bd07f970\n         bd07f94c  bd07f970\n         bd07f950  00000078\n         bd07f954  efd59401  /system/lib/libc.so (_ZL15__pthread_startPv+24)\n         bd07f958  efd593e9  /system/lib/libc.so (_ZL15__pthread_startPv)\n         bd07f95c  efd2c53f  /system/lib/libc.so (__start_thread+34)\n         bd07f960  bd07f978\n         bd07f964  efd593e9  /system/lib/libc.so (_ZL15__pthread_startPv)\n         bd07f968  bd07f970\n         bd07f96c  00000000\n         bd07f970  be7af970  [stack:1100]\n         bd07f974  c8676970  [stack:1177]\nmemory near r0:\n    d6fe5340 00000000 00000000 00000000 00000000  ................\n    d6fe5350 00000000 00000000 00000000 00000000  ................\n    d6fe5360 65706970 6c6f723a 6c633d65 746e6569  pipe:role=client\n    d6fe5370 7461702c 642f3d68 2f617461 61636f6c  ,path=/data/loca\n    d6fe5380 6d742f6c 65722f70 6972662e 732e6164  l/tmp/re.frida.s\n    d6fe5390 65767265 69702f72 652d6570 37346132  erver/pipe-e2a47\n    d6fe53a0 36396436 37306432 62663034 61653737  6d962d0740fb77ea\n    d6fe53b0 64623436 30623361 00326562 00000000  64bda3b0be2.....\n    d6fe53c0 00000000 00000000 00000000 00000000  ................\n    d6fe53d0 00000000 00000000 00000000 00000000  ................\n    d6fe53e0 00000000 00000000 00000000 00000000  ................\n    d6fe53f0 00000000 00000000 00000000 00000000  ................\n    d6fe5400 00000000 00000000 00000000 00000000  ................\n    d6fe5410 00000000 00000000 00000000 00000000  ................\n    d6fe5420 00000000 00000000 00000000 00000000  ................\n    d6fe5430 00000000 00000000 00000000 00000000  ................\nmemory near r1:\n    bd07f918 00002675 f1b7749f bd07f928 f1b7742b  u&...t..(...+t..\n    bd07f928 00000000 bd07f970 bd07f970 00000000  ....p...p.......\n    bd07f938 00000000 eeba3053 000000aa d6fe40b3  ....S0.......@..\n    bd07f948 bd07f970 bd07f970 00000078 efd59401  p...p...x.......\n    bd07f958 efd593e9 efd2c53f bd07f978 efd593e9  ....?...x.......\n    bd07f968 bd07f970 00000000 be7af970 c8676970  p.......p.z.pig.\n    bd07f978 0000046b 00002675 00000000 bcf83000  k...u&.......0..\n    bd07f988 000fc970 00001000 00000000 00000000  p...............\n    bd07f998 00000003 00000000 d6fe4081 00000000  .........@......\n    bd07f9a8 00000000 c39d9000 00000001 00000000  ................\n    bd07f9b8 000fd000 00000000 bd07f9c0 bd07f970  ............p...\n    bd07f9c8 00000016 00000000 00000000 21ba20b0  ............. .!\n    bd07f9d8 bd07fdf4 00000000 00000000 00000000  ................\n    bd07f9e8 00000000 00000000 00000000 00000000  ................\n    bd07f9f8 00000000 00000001 00000000 00000000  ................\n    bd07fa08 00000000 00000000 00000000 00000000  ................\nmemory near r3:\n    bd07fdd4 00000000 00000000 00000000 00000000  ................\n    bd07fde4 00000000 00000000 00000000 00000000  ................\n    bd07fdf4 79736c64 6166206d 64656c69 696c203a  dlsym failed: li\n    bd07fe04 72617262 61682079 656c646e 20736920  brary handle is \n    bd07fe14 6c6c756e 2f706d00 662e6572 61646972  null.mp/re.frida\n    bd07fe24 7265732e 2f726576 64697266 67612d61  .server/frida-ag\n    bd07fe34 2d746e65 732e3233 6e20226f 65646565  ent-32.so\" neede\n    bd07fe44 726f2064 6f6c6420 656e6570 79622064  d or dlopened by\n    bd07fe54 75282220 6f6e6b6e 22296e77 20736920   \"(unknown)\" is \n    bd07fe64 20746f6e 65636361 62697373 6620656c  not accessible f\n    bd07fe74 7420726f 6e206568 73656d61 65636170  or the namespace\n    bd07fe84 61282220 796e6f6e 73756f6d 00002229   \"(anonymous)\"..\n    bd07fe94 00000000 00000000 00000000 00000000  ................\n    bd07fea4 00000000 00000000 00000000 00000000  ................\n    bd07feb4 00000000 00000000 00000000 00000000  ................\n    bd07fec4 00000000 00000000 00000000 00000000  ................\n```\nmemory nead r3 section has the error. Should I open a new issue or re open this one?. Found this in the logcat. It looks like this only happens with 32bit processes. 64bit processes actually load the library but run into some other issue.\nE linker  : library \"/data/local/tmp/re.frida.server/frida-agent-32.so\" (\"/data/local/tmp/re.frida.server/frida-agent-32.so\") needed or dlopened by \"(unknown)\" is not accessible for the namespace: [name=\"(anonymous)\", ld_library_paths=\"\", default_library_paths=\"/data/app/com.android.chrome-XXXXXXXX==/lib/arm:/data/app/com.android.chrome-XXXXXXXX==/base.apk!/lib/armeabi-v7a\", permitted_paths=\"\"]. I did some testing on 64bit targets, It looks like the scripts load fine on almost all 64bit targets except the twitter app. I'm not sure why. I checked and all of its jni libraries are 64bit objects.\nHere is a snippet of printed messages from frida-agent around the crash for the twitter app. (command is frida-trace -U -i open ****)\non_connection_message: \nType:    method-call\nFlags:   none\nVersion: 0\nSerial:  6\nHeaders:\n  path -> objectpath '/re/frida/AgentSession/1'\n  interface -> 're.frida.AgentSession10'\n  member -> 'PostToScript'\n  signature -> signature '(u)sbay'\nBody: ((uint32 1,), '[\"frida:rpc\", 1, \"call\", \"resolve\", [[[\"include\", \"function\", \"open\"]]]]', false, @ay [])\nUNIX File Descriptors:\n  (none)\nI noticed that it's different from something that works\non_connection_message Type:    method-call\nFlags:   none\nVersion: 0\nSerial:  10\nHeaders:\n  path -> objectpath '/re/frida/AgentSession/1\n  interface -> 're.frida.AgentSession10'\n  member -> 'PostToScript'\n  signature -> signature '(u)sbay'\n  Body: ((uint32 2,), '[\"frida:rpc\", 1, \"call\", \"add\", [[{\"absolute_address\": \"0x77f7bb54e8\", \"handler\": \"/*\\\\n * Auto-generated by Frida. Please modify to match the signature of open.\\\\n * This stub is currently auto-generated from manpages when available.\\\\n *\\\\n * For full API reference, see: http://www.frida.re/docs/javascript-api/\\\\n */\\\\n\\\\n{\\\\n  /**\\\\n   * Called synchronously when about to call open.\\\\n   *\\\\n   * @this {object} - Object allowing you to store state for use in onLeave.\\\\n   * @param {function} log - Call this function with a string to be presented to the user.\\\\n   * @param {array} args - Function arguments represented as an array of NativePointer objects.\\\\n   * For example use Memory.readUtf8String(args[0]) if the first argument is a pointer to a C string encoded as UTF-8.\\\\n   * It is also possible to modify arguments by assigning a NativePointer object to an element of this array.\\\\n   * @param {object} state - Object allowing you to keep state across function calls.\\\\n   * Only one JavaScript function will execute at a time, so do not worry about race-conditions.\\\\n   * However, do not use this to store function arguments across onEnter/onLeave, but instead\\\\n   * use \\\\\"this\\\\\" which is an object for keeping state local to an invocation.\\\\n   */\\\\n  onEnter: function (log, args, state) {\\\\n    log(\\\\\"open(\\\\\" +\\\\n      \\\\\"path=\\\\\\\\\\\\\"\\\\\" + Memory.readUtf8String(args[0]) + \\\\\"\\\\\\\\\\\\\"\\\\\" +\\\\n      \\\\\", oflag=\\\\\" + args[1] +\\\\n    \\\\\")\\\\\");\\\\n  },\\\\n\\\\n  /**\\\\n   * Called synchronously when about to return from open.\\\\n   *\\\\n   * See onEnter for details.\\\\n   *\\\\n   * @this {object} - Object allowing you to access state stored in onEnter.\\\\n   * @param {function} log - Call this function with a string to be presented to the user.\\\\n   * @param {NativePointer} retval - Return value represented as a NativePointer object.\\\\n   * @param {object} state - Object allowing you to keep state across function calls.\\\\n   */\\\\n  onLeave: function (log, retval, state) {\\\\n  }\\\\n}\\\\n\", \"name\": \"open\"}]]]', false, @ay [])\nUNIX File Descriptors:\n  (none)\nApps crashe instantly if they have 32bit libraries. . I'm not sure if this is correct but if frida is using 64bit libc return address to dlopen 32bit frida-agent, I think it can cause 32bit app crashing issue.. Looks like the REPL works fine with 64bit twitter app too. I didn't try to run any scripts though.\nHere is the 32bit libart.so dlopen disassembly (from GDB)\nDump of assembler code for function dlopen@plt:\n   0x000a6b9c <+0>:     add     r12, pc, #3145728       ; 0x300000\n   0x000a6ba0 <+4>:     add     r12, r12, #569344       ; 0x8b000\n   0x000a6ba4 <+8>:     ldr     pc, [r12, #4092]!       ; 0xffc\nEnd of assembler dump.\n. @oleavr Hi\nthis is from the libdl.so dlopen.\nDump of assembler code for function dlopen:\n   0x00001038 <+0>: push    {r7, lr}\n   0x0000103a <+2>: mov r2, lr\n   0x0000103c <+4>: blx 0xe38 <__loader_dlopen@plt>\n   0x00001040 <+8>: pop {r7, pc}\nEnd of assembler dump.. @oleavr Looks like the dlopen bug is gone, but now I'm getting a different crash due to improper open. I can't find where it's coming from. Here is the relevant section of the tombstone. Fault address is in libdl.so.\n```\n\nBuild fingerprint: 'OnePlus/OnePlus3/OnePlus3:8.0.0/OPR6.170623.013/10250816:user/release-keys'\nRevision: '0'\nABI: 'arm'\npid: 29053, tid: 29277, name: .android.chrome  >>> com.android.chrome <<<\nsignal 4 (SIGILL), code 1 (ILL_ILLOPC), fault addr 0xf6a80e38\n    r0 ce127160  r1 00000001  r2 f58713d1  r3 00000000\n    r4 c387f970  r5 c387f970  r6 c387f970  r7 000000c3\n    r8 0000717d  r9 00000000  sl ce126081  fp 0000000b\n    ip 000000c3  sp c387f948  lr ce1260a7  pc f6a80e38  cpsr 00070030\n    d0  0000000001410004  d1  ffd1382800000004\n    d2  ffd13828ffd138b0  d3  ffd13828cbb9510a\n    d4  ffd13828ffd13868  d5  d63f689300000001\n    d6  d5d77b41ffd138b0  d7  c49acbb0c49acbb0\n    d8  0000000000000000  d9  0000000000000000\n    d10 0000000000000000  d11 0000000000000000\n    d12 0000000000000000  d13 0000000000000000\n    d14 0000000000000000  d15 0000000000000000\n    d16 c378300000000000  d17 00001000000fc970\n    d18 0000000000000000  d19 00000000050ffb18\n    d20 bbf4e12430fc073c  d21 c000000000000000\n    d22 3f50863a98b18e3f  d23 4008002200000000\n    d24 4008000000000000  d25 3fdb6db6db6fabff\n    d26 3fd55555518f264d  d27 bf80842100000000\n    d28 0005c0000005c000  d29 0005c0000005c000\n    d30 00000000c3883268  d31 0000001700000017\n    scr 2000001b\nbacktrace:\n    #00 pc 00000e38  /system/lib/libdl.so\n    #01 pc 000000a5  \nstack:\n         c387f908  c387f970\n         c387f90c  c387f970\n         c387f910  00000078\n         c387f914  f587601d  /system/lib/libc.so (mmap+28)\n         c387f918  ffffffff\n         c387f91c  00000000\n         c387f920  ce11c000  [anon:thread signal stack guard page]\n         c387f924  53564d41\n         c387f928  00000000\n         c387f92c  00000078\n         c387f930  f58990c4  /system/lib/libc.so (_Z29__init_alternate_signal_stackP18pthread_internal_t+211)\n         c387f934  cbb9510a  /dev/zero (deleted)\n         c387f938  00000078\n         c387f93c  ce12608d\n         c387f940  ce11c000  [anon:thread signal stack guard page]\n         c387f944  00001000\n    #00  c387f948  c387f970\n         ........  ........\n    #01  c387f948  c387f970\n         c387f94c  c387f970\n         c387f950  00000078\n         c387f954  f5899401  /system/lib/libc.so (_ZL15__pthread_startPv+24)\n         c387f958  f58993e9  /system/lib/libc.so (_ZL15__pthread_startPv)\n         c387f95c  f586c53f  /system/lib/libc.so (__start_thread+34)\n         c387f960  c387f978\n         c387f964  f58993e9  /system/lib/libc.so (_ZL15__pthread_startPv)\n         c387f968  c387f970\n         c387f96c  00000000\n         c387f970  c3e7f970  [stack:29254]\n         c387f974  00000000\n         c387f978  0000725d\n         c387f97c  0000717d\n         c387f980  00000000\n         c387f984  c3783000  [anon:thread stack guard page]\nmemory near r0:\n    ce127140 00000000 00000000 00000000 00000000  ................\n    ce127150 00000000 00000000 00000000 00000000  ................\n    ce127160 7461642f 6f6c2f61 2f6c6163 2f706d74  /data/local/tmp/\n    ce127170 662e6572 61646972 7265732e 2f726576  re.frida.server/\n    ce127180 64697266 67612d61 2d746e65 732e3233  frida-agent-32.s\n    ce127190 0000006f 00000000 00000000 00000000  o...............\n    ce1271a0 00000000 00000000 00000000 00000000  ................\n    ce1271b0 00000000 00000000 00000000 00000000  ................\n    ce1271c0 00000000 00000000 00000000 00000000  ................\n    ce1271d0 00000000 00000000 00000000 00000000  ................\n    ce1271e0 00000000 00000000 00000000 00000000  ................\n    ce1271f0 00000000 00000000 00000000 00000000  ................\n    ce127200 00000000 00000000 00000000 00000000  ................\n    ce127210 00000000 00000000 00000000 00000000  ................\n    ce127220 00000000 00000000 00000000 00000000  ................\n    ce127230 00000000 00000000 00000000 00000000  ................\nmemory near r2:\n    f58713b0 b5804770 efcef7f4 60012109 30fff04f  pG.......!.`O..0\n    f58713c0 b580bd80 f240460a f7f52141 bd80e812  .....F@.A!......\n    f58713d0 b580b082 4684b082 e9cd4813 f0112304  .......F.H...#..\n    f58713e0 44780f40 68006800 d1019001 e0062300  @.xD.h.h.....#..\n    f58713f0 9000a804 0004f040 f8bd9000 f4413010  ....@........0A.\n    f5871400 f06f3200 46610063 ee04f7f5 9a014907  .2o.c.aF.....I..\n    f5871410 68094479 1a896809 b002bf01 4080e8bd  yD.h.h.........@\n    f5871420 4770b002 ef4ef7f4 0006ffde 0006ffb0  ..pG..N.........\n    f5871430 f0114603 bf010f40 3200f441 0063f06f  .F..@...A..2o.c.\n    f5871440 23004619 f05cbf08 b580bb39 f7fea001  .F.#...9.......\n    f5871450 bf00fe05 6e65706f 435f4f28 54414552  ....open(O_CREAT\n    f5871460 63203a29 656c6c61 69772064 756f6874  ): called withou\n    f5871470 70732074 66696365 676e6979 6d206120  t specifying a m\n    f5871480 0065646f b580b081 f8dfb083 f012c04c  ode.........L...\n    f5871490 93050f40 f8dc44fc f8dcc000 93023000  @....D.......0..\n    f58714a0 2300d101 ab05e005 33049301 f8bd9301  ...#.......3....\n```\n--->f6a80000-f6a82fff r-x         0      3000  /system/lib/libdl.so (BuildId: 8e5717c0395ca45cb9f110425ae1463a). Hi @oleavr, Looks like it works. I created PR https://github.com/frida/frida-core/pull/162 \nLibrary actually loads and gives me a REPL when id do frida -U com.android.chrome --no-pause\nBut, `frida-trace -U -i  com.android.chrome\" still crash large applications(chrome, twitter). \nI can look into what's wrong if you can point me where to look. Below are some of the tombstone content. I'll open a separate issue on frida-gum if it belongs there.\n```\n\nBuild fingerprint: 'OnePlus/OnePlus3/OnePlus3:8.0.0/OPR6.170623.013/12041042:use\nr/release-keys'\nRevision: '0'\nABI: 'arm'\npid: 22913, tid: 23607, name: gum-js-loop  >>> com.android.chrome <<<\nsignal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x10\nause: null pointer dereference\n    r0 00000000  r1 00000000  r2 00000004  r3 00000000\n    r4 c0ccc0b8  r5 000000df  r6 00000000  r7 bac90d90\n    r8 00000000  r9 c0ccc0b8  sl c21165b8  fp bac90e58\n    ip 00000000  sp bac90d38  lr b2f0ca04  pc b2a1c28e  cpsr 400b0030\n    d0  0000000000000000  d1  0000000000000000\n    d2  0000000000000000  d3  0000000000000000\n    d4  67422d656d6f7268  d5  4f4175497a386464\n    d6  536d616468783263  d7  622f3d3d67335a75\n    d8  0000000000000000  d9  0000000000000000\n    d10 0000000000000000  d11 0000000000000000\n    d12 0000000000000000  d13 0000000000000000\n    d14 0000000000000000  d15 0000000000000000\n    d16 0000000000000000  d17 0000000000000000\n    d18 000003c0000003c0  d19 000003c0000003c0\n    d20 0000000800000008  d21 0000000800000008\n    d22 0000000400000004  d23 0000000400000004\n    d24 000023c1000003c1  d25 000063c1000043c1\n    d26 000023c0000003c0  d27 000063c0000043c0\n    d28 0005c0000005c000  d29 0005c0000005c000\n    d30 0000000000f1ab76  d31 0000001700000017\n    scr 6000009b\nbacktrace:\n    #00 pc 0013728e  /data/local/tmp/re.frida.server/frida-agent-32.so\n```\n. You can use something like Java.enumerateLoadedClasses(callbacks) I think. But the last time I tried this on chrome, the script timed out. Your best bet is to use some apk decompiler like dex2jar with JD-GUI to get the java source code and find the function/class names from that.. AFAIK, in Android 7, Google introduced \"namespaces\" for dlopen, you can't load any dynamic library outside the app namespace or it will fault. Frida itself get around this using a neat trick, take a look at the android injection code for a reference, maybe you can adopt that to your hooking logic. \nSorry I can't link to the code, I'm on my phone :/. Nice! I didn't know Frida had a porting guide. I'll start looking into this. . ",
    "cgbcsh": "awesome!!!!!!!!!!!!!!!\nfrida is also excellent.\nThanks for your response.. Hi, thanks for your response.\nIf there is an example, can I see it...? . Thanks for your response.\nI need to study more about Java.cast()\nand It works\na[3100] = Java.use(\"android.net.NetworkInfo\");\na[3100].getState.implementation = function() {\n var ret = this.getState()\n console.log(ret) \n return ret\n};\nThank you all.\n. ",
    "akiannillo": "Any log message? . ",
    "BigFaceCat2017": "@oleavr  Hi\uff0ci meet the same question. In your may, you invoke the inner function \" __loader_dlopen(const char filename, int flags, const void caller_addr) \". and i call it with caller_addr is open address in my code, however, there is a  error \"dlopen failed: library \"/data/local/tmp/libhello.so\" needed or dlopened by \"(unknown)\" is not accessible for the namespace \"(anonymous)\".  my phone is Pixel2, android 9.0.. ",
    "henrytom1703": "How to modify android return int value? \nI'm seeing return a wrong format type:\nEx:\nconsole return 200.0 instead of 200\nvar clzString = Java.use(\"java.lang.String\");\nclzString.valueOf.overload('int').implementation = function (value) {\nconsole.log(this.valueOf(value));\nif (value == 200) {\nreturn this.valueOf(parseInt(\"100\"));\n}\nreturn this.valueOf(value);\n};\noutput console:\n200.0 --> this is wrong format\nHow to fix to a value return without endwiths .0  ?\n. Hello @oleavr  and @jeanbmar \nI have a same issue. I cannot hook  java.lang.Runtime class.\nAnd I have a question . how to inject native shared libs into app\nThanks. Hello @jeanbmar and @oleavr \nI tried it and not working. and I have a other question. I want inject native shared libs into  any app. \nDo you know how to do it?.  Can make inject native shared libs with xposed or firda, ...?\nThanks\n. @mohe2015 \nHow to replace the new path longer than the old path?\nThanks. @mohe2015 \nCould you help me the this new issue?\nhttps://github.com/frida/frida/issues/660. Thanks @mohe2015 \n. hi @mohe2015 \nThanks. hi @mohe2015 \nHow to access and replace the value in struct  below?\nThanks. ",
    "cmorell": "mmmm ok!\nSo sorry to open this issue\nfrida-ps -Rai\nNot work when you are tired and read until the end.... ",
    "3xp10it": "I found the answer:\nvar my_obj=ObjC.chooseSync(ObjC.classes.classNameValue)[0]\nmy_obj[\"- functionNameValue:\"](paramValue)\n. ",
    "cpilka": "Related to https://github.com/frida/frida/issues/295 ?\n. ",
    "nanshihui": "now  is  there any solution\uff1f  i got the same  problem. ",
    "jeanbmar": "It seems that Runtime.loadLibrary doesn't cover all the situations for some reason.\nI have the same issue on Android 7 (frida-server 10.7.7), but I'm able to hook some calls using loadLibrary0:\n```\nconst RuntimeDef = Java.use('java.lang.Runtime');\nconst RuntimeLoad_3 = RuntimeDef.loadLibrary0.overload('java.lang.ClassLoader', 'java.lang.String');\nRuntimeLoad_3.implementation = function(classLoader, library) {\n    send(\"Loading dynamic library (RuntimeLoad_3) => \" + library);\n    RuntimeLoad_3.call(this, classLoader, library);\n    send(\"Loading dynamic library (RuntimeLoad_3) SUCCESS => \" + library);\n    return;\n}. https://github.com/frida/frida-java/issues/63#issuecomment-384629231. See my response here https://github.com/frida/frida-java/issues/63#issuecomment-384629231 to hook loadLibrary. ",
    "Daemonceltics": "My very very stupid mistake , frida run in my custom ROM that I change fork logic , sorry for waste your time.. Spawn do not support iOS . . @oleavr @veehaitch sorry, maybe old version does't support?My issue #412 Failed to attach: failed to fork (Connection refused), I still not  resolved, any idea? . iOS 11.4.1 with unc0ver jailbreak\n$ frida-ps -U\nFailed to enumerate processes: the connection is closed\nDevice reboot!. > @daukstsoskars @Daemonceltics Please try Frida from git, which supports unc0ver (except for app launching).\nThanks, it works.. ",
    "ba0f3": "Lemme try it again. btw I can't make gadget-32 on both x86 and x86_64, due to this error:\n/bin/sh: 1: /../frida/releng/ninja-linux-x86: not found. ```\n0  0xb6590391 in ?? () from /tmp/frida-gadget-10.6.40-linux-x86.so\n1  0xb6599cfb in ?? () from /tmp/frida-gadget-10.6.40-linux-x86.so\n2  0xb657fdf4 in ?? () from /tmp/frida-gadget-10.6.40-linux-x86.so\n3  0xb773c465 in call_init (l=, argc=argc@entry=2, argv=argv@entry=0xbfcb8b04, env=0xbfcb8b10) at dl-init.c:72\n4  0xb773c58e in call_init (env=0xbfcb8b10, argv=0xbfcb8b04, argc=2, l=) at dl-init.c:30\n5  _dl_init (main_map=, argc=2, argv=0xbfcb8b04, env=0xbfcb8b10) at dl-init.c:120\n6  0xb772da5f in _dl_start_user () from /lib/ld-linux.so.2\nStill crash on 10.6.40. finally I was able to make it, here is the backtrace w/ debug symbols:\n0  0xb65489d6 in frida_gadget_detect_location () at lib/gadget/frida-gadget@sha/gadget.c:5185\n1  0xb6552443 in frida_gadget_load () at lib/gadget/frida-gadget@sha/gadget.c:4270\n2  0xb653849c in on_load () at ../../../frida-core/lib/gadget/gadget-glue.c:133\n3  0xb7726465 in call_init (l=, argc=argc@entry=1, argv=argv@entry=0xbfe73294, env=0xbfe7329c) at dl-init.c:72\n4  0xb772658e in call_init (env=0xbfe7329c, argv=0xbfe73294, argc=1, l=) at dl-init.c:30\n5  _dl_init (main_map=, argc=1, argv=0xbfe73294, env=0xbfe7329c) at dl-init.c:120\n6  0xb7717a5f in _dl_start_user () from /lib/ld-linux.so.2\n```. it seems fixed in recent releases. ",
    "HachimanSec": "Thanks for the hint, but the package is installed:\n```\nlibusbmuxd4/kali-rolling,now 1.1.0~git20171206.c724e70f-0.1 amd64 [installed,automatic]\n  USB multiplexor daemon for iPhone and iPod Touch devices - library\nusbmuxd/kali-rolling,now 1.1.0-2+b2 amd64 [installed,automatic]\n  USB multiplexor daemon for iPhone and iPod Touch devices\n```\nHowever the linux has no ideviceinfo command. Any other idea?. ",
    "CaledoniaProject": "Thanks for the quick response :-) It works by now. ",
    "FrankSpierings": "Checkout https://github.com/frida/frida/issues/426. Might this be related?. I have been out of the Frida game for a couple of months. Last week I started to play with Frida again and I have also noticed problems when embedding the Frida gadget. I've reverted to using version 10.6.11, since that one worked correctly a couple months back. I could get 10.6.31 to start, but previously written hooks crashed the Android application.. Checkout the code in https://github.com/frida/frida-java/blob/f22a5f2f8207f8cc0a5b4d65b59b138fd00340fa/index.js. Maybe you can figure out where it misses those classes. Any idea what the difference is between a found class and a missing class?. If you want to call a Java function, something like this:\n```java\nfunction myfunction() {\n    // Check if frida has located the JNI\n    if (Java.available) {\n    // Switch to the Java context\n    Java.perform(function() {\n        // https://www.frida.re/docs/javascript-api/#java \n        // Dynamically get a JavaScript wrapper for className that you can instantiate objects from by calling $new() on it to invoke a constructor.\n        const JavaString = Java.use('java.lang.String');\n        // Create an instance of java.lang.String and assign it to a variable \n        var exampleString1 = JavaString.$new('Hello World, this is an example string in Java.');\n        console.log('[+] exampleString1: ' + exampleString1);\n        console.log('[+] exampleString1.length(): ' + exampleString1.length());\n    }\n)}\n\n}\n// Call the function\nmyfunction()\n```. I use x86 android api level 24 without playstore with a emulated nexus 5\nOn Thu, 1 Mar 2018 at 08:35, Henry Jonh notifications@github.com wrote:\n\n@NGTmeaty https://github.com/ngtmeaty Do you know which android\nemulator Frida is working well?\nThanks\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/436#issuecomment-369502445, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AC0WsTy8Hy5ke2AqbayevzB7F183riv8ks5tZ6SpgaJpZM4SSCS2\n.\n. \n",
    "acuntex": "As further info:\nTried it again from Mac OS X with a Cordova app. Same error log entries.\nEdit: When using 10.6.43 it works.. ",
    "jpmasud": "Same problem on my side (Mac OS X and Android app). ",
    "H4oK3": "Hi, i have the same issue on my Nexus 5X, I am running it on android 6.0.1 though.. Awesome, thanks!. @SimonKoh Thanks for the reply, I did sth like this (inside Java.perform() callback):\n~~~JAVA\nlc_cast = Java.cast(ptr(lc.$handle), Java.cast(lc,LitClazz))\nconsole.log(lc_cast.int_lit)\n-> [OUTPUT]: [object Object]\n~~~\nand it returns as another object.\nAlso I would like to make this a little bit more interactive, like I would like to be able to access that object in a REPL; however I don't know if there is a way to drop a REPL inside Java.perform() callback. Any ideas about that?. did you guys figure out? The script above does not work for me. ",
    "burrowingsec": "@glennguy I was having the same issue. It seems the latest few versions of the Gadget are broken in some way. I've not had a chance to do a diff between a working version and the newest versions but there's obviously something wrong.\nI know this is 10 days after your initial issue but if you still have a need to patch your binary then I suggest manually patching using Frida Gadget 10.6.32. Instructions on how to do that are here: https://koz.io/using-frida-on-android-without-root/. @nadirwh Yep, have done that a few times now. I think when I posted originally @leonjza was still rolling out the update. Super handy stuff.. ",
    "glennguy": "Thanks @burrowingsec \nI tried manually as well but with no luck. Still couldn't connect :(\nNext step is to try downgrading to Marshmallow. Seems to be a lot more widely supported for these kind of tools.. ",
    "leonjza": "It seems like 10.6.33 is the last version that is working as expected in embedded mode. Any version after that does not show the \"I Frida   : Listening on 127.0.0.1 TCP port 27042\" message on startup once injected with a loadLibrary call.. ",
    "nadirio": "I can confirm that this works with 10.6.33. Any later versions don't. Also @burrowingsec you can now specify the gadget version in objection through --gadget-version.. ",
    "ccasadob": "Sorry about my ignorance. how can I upgrade my Frida 10.6.27 to the last version (10.6.52)?. Thanks you so much! It works very well when I upgrade both Frida, client an server!. ",
    "krytarowski": "I will have a look. Hope it's fine to have a subset of backends (frida-*) for now.. I'm using manually build-targetfunctions.sh to generate targetfunctions and special functions for NetBSD/amd64:\nCFLAGS=\"-fPIC\" STRIP=strip CC=gcc CONFIG_SITE=$PWD PKG_CONFIG=pkg-config LDFLAGS=\"-fPIC -DPIC\" sh build-targetfunctions.sh netbsd x86_64\nIs this file supposed to be called manually in such way? It could use libtool for portability reasons.\nAnother question is regarding glib and libffi, it seems I need to use both from forks from frida. Anything else custom needed?. > (Sorry for the delay here, I was knocked out by a little food-poisoning incident over the last few days.)\nI hope everything will be fine!\n\n\nAnother question is regarding glib and libffi, it seems I need to use both from forks from frida.\nCorrect.\n\n\nOK, I'm going to package them and attempt to build frida-gum.. Is there some way to test frida-gum with ported libffi, glib? Do I need core and maybe python to get anything to work? I should get them usable in not so distant time.. It looks I need frida-capstone too.\n../gum/arch-x86/gumx86relocator.c:555:12: error: no member named 'modrm_offset' in 'struct cs_x86'\n  if (x86->modrm_offset == 0)\n      ~~~  ^\n../gum/arch-x86/gumx86relocator.c:617:15: error: no member named 'modrm_offset' in 'struct cs_x86'\n    code[x86->modrm_offset] = (mod << 6) | (reg << 3) | rm;\n         ~~~  ^\n2 errors generated.. Hmm, I've been a little bit surprised that OS specific bits are larger than expected. Once I will build frida-gum with stubs, I will start upstreaming them in chunks.\nWhile there - this is how I landed here in frida... I'm researching a room for a new self-introspecting syscall in the NetBSD kernel. More context: https://github.com/ivmai/bdwgc/issues/207\nFrida needs the same horrid magic on Linux: https://lkml.org/lkml/2006/9/1/217\nI'm looking for a feedback whether it makes sense, and maybe how to extend it with additional features. I'm thinking to add 2 operations useful for remote forking: serializing and deserializing an application (something close to core-dumps). I would want it for criu, rr and reptyr.\nAre there wanted features from the Frida point of view that could make life easier?. I work on modernization of debugging interfaces and tools:\nhttp://netbsd.org/~kamil/ptrace-netbsd/presentation.html (bit dates, but gives a good overview)\nhttp://netbsd.org/~kamil/eurobsdcon2017.html (LLDB / NetBSD)\nThe general difference between Linux and NetBSD is that ptrace(2) is per-process (process group on Linux) rather than per-thread (process on Linux).\nFrida is definitely a modern (and innovative) tool that we want to get aboard.\n\nYep, that's how we implement Gum.Process.modify_thread(). It's horrible.\n\nRight. As of now we don't have a support for this, at least in a relatively clean approach. It could be reimplemented with fork(2) + ptrace(2) and IPC; or signal handlers.. but all that is horrid, racy and dangerous.\nIf this is a hard-requirement of getting Frida aboard, I will port the remaining bits, upstream, and keep researching a kernel new syscall followed by an implementation.\n\nI'm not familiar with what's currently available on NetBSD, but ideally there would be support for process A asking the kernel to perform the following operations in the context of process B:\nAllocate pages of memory.\n   (Read/)Write (from/)to memory.\n   Change page protections.\n   Spawn a new thread, fully initialized so libc can be used.\nOn Linux we currently emulate these things by hi-jacking an existing thread with ptrace().\n\nPerfect! This is what I was looking for.\nLLDB people told me that it would nice to have a remote ability to execute a syscall in the contest of traced process/thread... but I don't know of use-cases.\nRegarding thread.. I expect that we don't need a pthread entity? That would be harder than a native thread (LWP in NetBSD), as it would involve changes not just in the kernel, but also in libpthread structures.\nI think once we can get a new thread and control its body, we can do everything from it, including memory operations and the focus shall be on starting of a new injected thread.\nLow-level code for starting of a thread in userspace looks like:\n_lwp_makecontext(&uc, lwp_main_func, NULL, NULL, stack, ssize);\n_lwp_create(&uc, 0, &lid);\nThis means that we shall be already in the context of a target process and have dedicated text and data/bss piece of section.\nAssuming that we can fork LWP (thread) from the kernel, we would need to inject new code (stack, ...) to execute it.\nUnfortunately it looks complex and enrolls some assumptions and it will be followed by portability issues like static vs shared program code.\nMaybe I need to introduce a trampoline for pinspect thread in libc, created remotely from ptrace..\nI'm thinking out loudly looking for a solution.. > Though OTOH if you have a clear idea how to add the needed kernel support nothing would be better...\n\"How\" is just a matter of time an digging, I focus on the goal. I'm researching use-cases/users that will shape the API, in the context of what is possible.\nRegarding the Linux approach, it's not portable as-is. NetBSD's solution would be more complicated and more horrid... and I have got enough abomination before starting it..\nPerhaps something shaped close to signal handler/trampoline that executes code in libc is the way to go, establishing IPC between parent and child, and calling pinspect().. I need to think more about it. I think that the hard-requirement is to make it Machine-Independent.\nThank you for the list of requirements.\n\nit just sounds like a lot of added work on top of the other porting TODOs. :-)\n\nMy porting is driven by this API research.. It looks like the only reliable way to perform anything from process B in process A.. is to rewrite .text/registers in process A using ptrace(2) from process B.\nI'm in the process of fixing kernel bugs in NetBSD, mostly with multiple threads, signals. forks/vforks. This is planned to take a lot of time.. I will follow up by StopTheWorld-like syscall (from the current-process context).\nAre there plans to upstream glib2, libffi and capstone patches for Frida? It would make life easier to use pristine versions... while there I feel motivated to streamline NetBSD in glib2, as we keep over 30 local patches in pkgsrc... Frida uses old forks and I need to at least research whether there is need to backport them.. Looks good. Is there an option to namespace these libraries, like adding prefix frida- to libraries, pc, directory with headers and wherever needed?\nI've packaged them in pkgsrc, but there are some annoying conflicts with mainstream packages.. and I think I will need to do it myself with local patches. Installing just into a subprefix like $PREFIX/frida does not work so smoothly as we still have duplicate names in search paths.. This part stops me with building everything of frida-gum. I will namespace files installed by glib2 etc.. ",
    "0xTHEgod": "Thank you for the reply, but I will be closing the issue. With some trial and error (using a Samsung Galaxy 3) I just moved the frida-server to /system/priv-app and it suddenly worked. . ",
    "aliyuchang33": "Sorry, I use the wrong command.. ",
    "hemo91": "Thanks a lot @oleavr  :slightly_smiling_face: . ",
    "gensone": "That is the code, the application is firefox for Android, thank you.\n```\nJava.perform(function () {\n      var Activity = Java.use(\"org.mozilla.gecko.mozglue.GeckoLoader\");\n      Activity.loadGeckoLibs.overload('android.content.Context','java.lang.String').implementation  = function(a,b) {\nInterceptor.attach(Module.findExportByName('libmozglue.so', 'dlopen'), {\nonEnter: function (args) {\n    this.path = Memory.readUtf8String(args[0]);\n    console.log(this.path);\n},\nonLeave: function (retval) {\n    if(!retval.isNull() && this.path.indexOf('libxul.so')!== -1) {\n        didHookApis = true;\n        console.log(\"File loaded hooking\");\n    }\n}});\n\nthis.loadGeckoLibs(a,b);\n\n```. ",
    "S00164379": "Same issue. ",
    "NGTmeaty": "@FrankSpierings well, if there is a function already initialized in the code, and I want to call it, is there any way to do so with variables? I see how you can initialize the variables, but not how to pass them into an already existing function.. ",
    "tepmnthar": "@oleavr Thank you for your reply. I've posted a new issue here. . Doc seems a bit outdated. I feel confused when I found an invalid download link.. Maybe you should use pip3 install --user frida. It works for me.. If I'm not misunderstanding your question. You want to use proxy when installing frida, but you don't know which environment variable it will use?\nI write a bash script in /usr/local/bin/proxy.\n```\n!/bin/bash\nhttp_proxy=http://127.0.0.1:8118 https_proxy=http://127.0.0.1:8118 $*\n```\nIf I want to use proxy in bash. I just put proxy before other commands. Just like this: $ proxy pip install xxx. I think it will override any other https_proxy settings in your system.\nDon't know how to do it in Windows. Maybe you can download Proxifier.. ",
    "luh2": "Ok, under Linux it works, if I execute pip install frida as regular user or as root, but not as sudo pip install frida. . No, that didn't change anything. But it was as I suspected, it seems like the installation routine uses two different sources for the proxy information. One, the passed argument in the proxy parameter, second, the environment variable https_proxy. I had to set that manually in Windows. Once it was set, installation passed smoothly. I guess in Linux, when using sudo, the env variables are not quite the same as when actually logged in.. There is no question, just the observation that doing pip3 install --proxy=PROXY frida will successfully get the packages from pypi, but in the installation routine it will fail. But if the proxy is additionally set as environment variables http(s)_proxy it does work. That leads to the idea, that different parts of the installation routine read the settings from different places.. ",
    "mhsjlw": "After reading 247, and then looking at this issue, I am experiencing the same issue. I will use findExportByName and it will print the function pointer, yet Interceptor will never be called. Yet, when using frida-trace, it is able to properly hook the function and I have just been using those handlers. I am running Android 7, arm64, like ocecaco and have experienced the issue with multiple Android apps (using Interceptor). I will try using enumerateModulesSync.. Experiencing the same crash (on 11.0.0) with process = frida.get_usb_device().spawn(\"com.example.app\"), Android 7.. I just tested again using the exact same code I posted above using version 11.0.1 on both my Android phone and device and my phone just soft rebooted like it did before the patch. How can I provide information to help debug this?. I have also tested using frida-trace, and it has successfully spawned the app and did not crash my phone.. On Android, it just crashes when using 11.0.1. ",
    "kholia": "I believe that I ran into this issue today on Android 7.1.1 32-bit.\nWhat works -> frida-trace -U -i '_ZN14SkMemoryStreamC2EPKvjb' <app>\nWhat doesn't work ->\nscript = session.create_script(\"\"\"\nvar a = Module.findExportByName(\"libskia.so\", \"_ZN14SkMemoryStreamC2EPKvjb\");\nconsole.log(a);\nInterceptor.attach(a, {\n    onEnter: function(args) {\n    console.log(\"hello\");\n    }\n});\n\"\"\")\nThe console.log line never executes.\nFrida version,\n$ frida-trace --version\n12.0.6. ",
    "M47H3W": "Has anybody found a way around this issue? I seem to be experiencing the same issue and suspect that my code isn't hooking properly.. @ocecaco Thank you so much for your help! After searching through all of the issues I was never able to find anything.\nFor anybody else who comes across the problem, here is some code that utilizes the workaround:\n```\nvar module = Process.findModuleByName(\"libA.so\");\nModule.enumerateExportsSync(module.name).forEach(function (exp) {\n        console.log(\"Hook: \" + exp.name + \" in: \" + module.name + \" at: \" + ptr(exp.address));\n        try {\n            Interceptor.attach(ptr(exp.address), {\n                onEnter: function (args) {\n                    console.log(\"Called: \"+ exp.name);\n                }\n            });\n         } catch (e) {\n            console.log(\"Error: \" + e + \" at F: \" + exp.name + \"in M: \" + module.name);\n         }\n    });\n```. ",
    "HarDToBelieve": "Have you fixed it yet? Like you, I got stuck with the error Failed to attach: remote_exec PTRACE_CONT wait failed: 0 on 64 bits applications ( I am using Ubuntu 18.04 now ), but 32 bits app was fine. Moreover, I tested with a multi-thread application, and surprisingly, I could stalk all threads the app produced, except the main one.  Process.enumerateThreadsSync returned empty array.\nOn MacOS, I have never struggled with those problems, but when I moved my project to Ubuntu, they suddenly appeared.. It seems that the thread_id given by agent is under scope of the instrument tool, not target process. So I choose to run Process.enumerateThreads each time pthread_create is called. As I see it is not stable ( for race-condition reason, maybe ). Any suggestions?. ",
    "YaphetsH": "@awakened1712 Now I change my nexus6p system from 8.1 to 6.0,and it works,I think something different about dlopen since Android 7.0 .\nthis maybe help you something. \nAnd by  the way,do you know how to modify native method retval in onLeave callback when return type is String?. @awakened1712  I try it and get this error \n{'type': 'error', 'description': 'Error: access violation accessing 0x10001d', 'stack': 'Error: access violation accessing 0x10001d\\n    at script1.js:25', 'fileName': 'script1.js', 'lineNumber': 25, 'columnNumber': 1}\nAnd I use Memory.project  api to make target memory  readable&writable,like this:\nonLeave: function (retval) {\n        Memory.protect(retval, 4,rw-');\n    var newretval ='1234'\n    Memory.writeUtf8String(retval,newretval);\n }\nbut it doesn't work,do you have this problem and how to deal with?. @awakened1712    so you don't have this error in your nexus6p?Maybe I have some  code error.. @awakened1712   thanks\n. @awakened1712  Did you find something about it?. @myzhan  it works , very thanks. ",
    "SheilaLundin": "@YaphetsH Have you solved this problem?. ",
    "flynnch": "same problem. ",
    "daviyang35": "This code will log correctly and will not cause the program to crash abnormally. \njavascript\n    var dlopen = new NativeFunction(Module.findExportByName(null, 'dlopen'), 'pointer', ['pointer', 'int']);\n    Interceptor.replace(dlopen, new NativeCallback(function(path, mode) {\n        console.log(\"dlopen(\" + \"path=\\\"\" + Memory.readUtf8String(path) + \"\\\"\" + \", mode=\" + mode + \")\");\n        var name = Memory.readUtf8String(path);\n        if (name !== null && name.indexOf('msm8994') !== -1) {\n            console.log(\"[*] found msm8994\");\n            return dlopen(path, mode);\n        }\n        return dlopen(path, mode);\n    }, 'pointer', ['pointer', 'int']));. ",
    "lqxn1015": "I have the same problem. How can solve it? . @jhscheer not work .... thanks . ",
    "myzhan": "I have the same problem. I tried this and it didn't work.\n```javascript\nvar stringClass = Java.use(\"java.lang.String\");\nvar stringInstance = stringClass.$new(\"1234\");\nInterceptor.attach(funcAddr, {\n    onEnter: function (args) {\n        return 0;\n    },\n    onLeave: function (retval) {\n        console.log(stringInstance);\n            retval.replace(stringInstance);\n    },\n});\n```. OK, this will work.\njavascript\nInterceptor.attach(funcAddr, {\n        onEnter: function (args) {\n            return 0;\n        },\n        onLeave: function (retval) {\n            const dstAddr = Java.vm.getEnv().newStringUtf(\"1234\");\n            retval.replace(dstAddr);\n        },\n});. ",
    "iddoeldor": "did you manage to make it work ?.  Any update ?. how did you solve this issue ?. Solution. https://github.com/iddoeldor/frida-snippets/blob/master/scripts/log_string_builders_and_string_compare.js. ",
    "KTodts": "```\n\"use strict\";\nJava.perform(function () {\n    if (Java.available) {\n        try{\n            var FileClass = Java.use('java.io.File');         \n            var AppInfoClass = Java.use('android.content.pm.ApplicationInfo');\n            var AppInfoObject = AppInfoClass.$new();\n            var parentDir = AppInfoObject.dataDir;        \n            //var FileObject = FileClass.$new(parentDir,\"shared_prefs\");\n            var FileObject = FileClass.$new().overload('java.io.File', 'java.lang.String').(parentDir,\"shared_prefs\");\n        }\n        catch(err){\n            console.log(\"Could not find class\");\n            console.log(err);\n            return;\n        }\n    }\n    else {\n        send(\"Java not available in this process\");\n    }\n});\n. Running your script gives me:\nCould not find class\nError: invalid argument value\n``. Printing out parentDir_string to console returns:parentDir_string = [object Object]`\nI would be expecting somthing like:\nparentDir_string = /data/data/<application>\n. console.log(parentDir_string.getAbsoluteFile()) gives:\nTypeError: undefined not callable (property 'getAbsoluteFile' of [object Object])\nThe Error: invalid argument value from above was due to this line:\nvar parentDir = FileClass.$new.overload('java.lang.String').call(FileClass,parentDir_string);\n. ChD1,thank for helping! i got now a reference to the shared_prefs folder. I combined both of your solutions from above:\n```\n\"use strict\";\nJava.perform(function () {\n    if (Java.available) {\n        try{\n            var FileClass = Java.use('java.io.File');\n            var application = Java.use(\"android.app.ActivityThread\").currentApplication();\n            var context = application.getApplicationContext();                \n            var AppPath = context.getFilesDir().getParent(); \n            var FileObject = FileClass.$new.overload('java.lang.String', 'java.lang.String').call(FileClass,AppPath,\"shared_prefs\");          \n            console.log(\"AppPath:\",AppPath);\n            console.log(\"path to shared_prefs:\",FileObject);\n    }\n    catch(err){\n        console.log(\"Could not find class\");\n        console.log(err);\n        return;\n    }\n}\nelse {\n    send(\"Java not available in this process\");\n}\n\n});\n```\nTopic can be closed.\n. ",
    "YuKnight": "like this: Java.vm.getEnv().getIntArrayElements \nall jni method you can find in there. ",
    "SimonKoh": "I see your error is \"frida.core.RPCException: Error: VM::GetEnv failed: -2\",maybe you should use \"lc.int_lit\" in \"Java.perform()\".\nBesides,if it doesn't work,you can use \"Java.cast(Object,Java.use(\"your class\"))\",maybe you can get obj's field.. Hey H4oK3, i have tried Java reflect,and it works, here is my Person.java:\npublic class Person {\n    public String name;\n    public int age;\n    Person(String name,int age){\n        this.name = name;\n        this.age = age;\n    }\n    public String getName(){\n        return this.name;\n    }\n    public int getAge() {\n        return this.age;\n    }\n}\nAnd i've wrote a test() method in MainActivity.java:\n```\npublic class MainActivity extends AppCompatActivity {\n    private static final String TAG = \"MainActivity\";\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        Button b = findViewById(R.id.button);\n        b.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                Person p = new Person(\"Simon\",99);\n                test(p);\n            }\n        });\n}\npublic void test(Person test){\n    Log.d(TAG, \"test: \" + test.name); \n}\n\n}\n```\nI just log person's name  in text(),and call test() in onClick() method,when i click button,then i can get person's name \"Simon\" in logcat.\n\n04-05 02:59:59.513 8033-8033/com.simon.persontest D/MainActivity: test: Simon\n\nWhat i want is to hook test() method and modify person's name and log it,here is my JS code:\nJava.perform(function(){\n    person = Java.use(\"com.simon.persontest.Person\")\n    main = Java.use(\"com.simon.persontest.MainActivity\")\n    field = Java.use(\"java.lang.reflect.Field\")\n    clazz = Java.use(\"java.lang.Class\")\n    main.test.implementation = function(p){\n        var tmp = p\n        console.log(tmp)\n        var field_name = Java.cast(tmp.getClass(),clazz).getDeclaredField(\"name\")\n        field_name.setAccessible(true)\n        field_name.set(tmp,\"H4oK3\")\n        return this.test(p)\n    }\n});\nLog is:\n\n04-05 03:00:16.499 8033-8033/com.simon.persontest D/MainActivity: test: H4oK3\n\nHere you see, i hook test method and modifiy Person's name to \"H4oK3\".Run JS code and click button you can see \"H4oK3\" in logcat instead.Then H40K3 Hacked.\n. Maybe you should use ps command in shell to find frida-server and use kill command to kill it.. ",
    "0xh0b0": "Thanks,\nDo you plan to release it in the next version (10.8) ?. Hey!\nAny updates on the deadlock fix in gadget?\nI would be happy to help on this.\nCan you provide me with instructions on what needs to be done for the fork support?. @oleavr \nHey!\nI think the best way to add the feature is by creating BaseRunner class that implements  ForkHandler and SpawnHandler. All other runners  (gadget's and agent's) will extend the BaseRunner.\nI am not sure how to handle spawn in ScriptRunner and ScriptDirectoryRunner as there we do not have a client to resume the child process. We may override the BaseRunner implementation by one that does nothing or create a mixin (for SpawnHandling).\nOptimally, the script itself should define a behavior of spawning child processes. Something like:\nrpc.exports = {\n  onSpawn: function (child) {\n    child.envp.push(\"LD_PRELOAD=gadget.so\");\n    child.resume();\n  }\n};\nWhat do you think?. ",
    "ineedblood": "are you getting any error messages before it crashes? how are you performing hooks? . ",
    "trietptm": "There's no message before the target crashes except for the Windows message saying my target file has stopped working. I use this command to use frida-trace: frida-trace -i GetModuleHandleA -i GetModuleHandleW -i VirtualProtect  <upx_target.exe>\n. ",
    "yan20160909": "I also want to know the answer, Have you get the resolution?. ",
    "icew4y": "\nI also want to know the answer, Have you get the resolution?\n\nsetenforce 0. ",
    "AxDSan": "What do you mean by Confusioned? you mean obfuscated?. ",
    "chensem": "yes , it is  obfuscated. I have solved the question .Thanks for your reply.. ",
    "samouy": "Hey, \nThanks for you answer, I changed the function implementation by what you said :\n```javascript\nvar getMethod = Class.getMethod.overload('java.lang.String','[Ljava.lang.Object;');\ngetMethod.implementation = function(param1, param2) {\n        send('[*] Get Method : [' + param1 + ']');\n        var ret = getMethod.call(this, param1, param2);\n        return ret;\n    };\n```\nBut the problem still occurs : \n04-18 11:15:05.596 22562 22590 E art     : JNI ERROR (app bug): attempt to pass an instance of java.lang.Object[] as argument 2 to java.lang.reflect.Method java.lang.Class.getMethod(java.lang.String, java.lang.Class[])\n04-18 11:15:05.604 22562 22590 F art     : art/runtime/java_vm_ext.cc:470] JNI DETECTED ERROR IN APPLICATION: bad arguments passed to java.lang.reflect.Method java.lang.Class.getMethod(java.lang.String, java.lang.Class[]) (see above for details)\n04-18 11:15:05.604 22562 22590 F art     : art/runtime/java_vm_ext.cc:470]     from java.lang.reflect.Method java.lang.Class.getMethod!(java.lang.String, java.lang.Class[])\nI'll continue working on that, \nThanks,. ",
    "SajjadPourali": "I think this link could help you.\nhttps://www.frida.re/docs/installation/#install-with-pip. ",
    "minhtt159": "I'm using frida with pip2 which comes with python2. Hope it might help\nbrew install python2\npip2 install frida. Can you try install frida with python2 comes from Homebrew? It works for me. I'm having the same trouble as well\n1. macOS 10.13.4\n2. python3 & python2 installed and updated with Homebrew\n3. frida 11.0.3 on both host/slave\n4. iOS version 11.0.3 w Electra 1.0.4 w/tweaks enabled\nfrida can not spawn process, but attach seems ok.\n```\n$ frida -U -f com.apple.mobilephone\n     _\n    / _  |   Frida 11.0.3 - A world-class dynamic instrumentation toolkit\n   | (| |\n    > _  |   Commands:\n   // ||       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\nFailed to spawn: unexpectedly timed out while waiting for process to suspend\n$ frida -U Phone\n     __\n    / _  |   Frida 11.0.3 - A world-class dynamic instrumentation toolkit\n   | (| |\n    > _  |   Commands:\n   // |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\n[iPhone::Phone]-> \n. Maybe you can try to execute it to determine the address of each function, then remember it somewhere.. Seems not. I hope the author will fix it some day. @droidresearch\n$ ssh root@192.168.137.194\nThe authenticity of host '192.168.137.194 (192.168.137.194)' can't be established.\nRSA key fingerprint is SHA256:------------------------------------\nAre you sure you want to continue connecting (yes/no)? yes\nWarning: Permanently added '192.168.137.194' (RSA) to the list of known hosts.\nroot@192.168.137.194's password: \nJohns-iPhone:~ root# exit\nlogout\nConnection to 192.168.137.194 closed.\n$ frida-ps -H 192.168.137.194\nFailed to enumerate processes: unable to connect to remote frida-server \n``\nIt failed, in my case.. I know this is so confusing, but I used this setup and it works.\n1. Get Homebrew for Mac\n2. Install Python 2.7 from brew\n3. Upgrade pip2 to the newest version\n4. Install frida from pip2\n* Side note: If you are usinglldb, removepythonalias from/usr/local/bin/python`. Have you updated frida-server on your phone? I tried to attach to Safari, seem fine. Sorry if I don't understand your question.. TLDR: The phone's driver is buggy. \nI got it works on both Ubuntu / macOS (real machine) and macOS (on VMWare Workstation - Windows 10). Trust me, even if you choose the correct driver, Cydia Impactor seems to work, but Frida doesn't. My friend has to reinstall Windows, force it to automatically install driver itself in order to make Frida works. Not promissing.\nYesterday, I installed macOS on VMWare, it works perfectly.\n. Another approach I want to use is connect to Frida server over remote IP. I made another issues about this, but @oleavr doesn't seem to reply. I think he is fixing it. . pip install frida-tools. Please use another OS, even if you can install successfully, the iTunes driver will not recognize your phone properly.\n. > Did you update frida on your mac as well? Not just frida-tools.\nYes. It's not saying that frida is not compatible. It reboots the phone instantly. ",
    "pich4ya": "bump. up!. ",
    "Youlor": "So, Did you solute?. @vellrya  https://developer.android.com/reference/android/app/Application, This is Application, not Activity.  And the source code is built on Android Studio successfully.... So how to hook Application?. ",
    "projectbtle": "Hi,\nI had this same issue, but was able to hook onCreate() by following the suggestion here and based on the code here  (this assumes the use of a Python script to load the JavaScript code). \nThat is, in test.py:\n```\njscode=\"\"\"\nif (Java.available) {\n    Java.perform(function () {      \n        var mainapp = Java.use('com.abc.app.MyCustomApplication');\n        mainapp.onCreate.implementation = function() {\n            console.log('Called');\n        };\n    });\n}\n\"\"\"\ntry:\n    device  = frida.get_usb_device()\n    pid     = device.spawn(['com.abc.app'])\n    session = device.attach(pid)\n    script  = session.create_script(jscode)\nscript.on('message', on_message)\nscript.load()\nsys.stdin.read()\n\n#Call resume *after* script.load(), otherwise onCreate won't get hooked.\ndevice.resume(pid)\ntime.sleep(1)\n\nexcept KeyboardInterrupt:\n    print (\"[!] Killing app...\")\n```\nCould you try this and see if it works?. @H4oK3 Could you post your Android app code (only the relevant Activity/Application) and your Python/JS code?. If you don't mind using a Python script to load the JavaScript code, you could try the solution below (same solution as given here; based on suggestion here and code from here). \nTest.py\n```\njscode=\"\"\"\nif (Java.available) {\n    Java.perform(function () {      \n        var mainapp = Java.use('cn.youlor.demo2.MyApplication');\n        mainapp.onCreate.implementation = function() {\n            console.log('Called');\n        };\n    });\n}\n\"\"\"\ntry:\n    device  = frida.get_usb_device()\n    pid     = device.spawn(['cn.youlor.demo2'])\n    session = device.attach(pid)\n    script  = session.create_script(jscode)\nscript.on('message', on_message)\nscript.load()\nsys.stdin.read()\n\n#Call resume *after* script.load(), otherwise onCreate won't get hooked.\ndevice.resume(pid)\ntime.sleep(1)\n\nexcept KeyboardInterrupt:\n    print (\"[!] Killing app...\")\n```. ",
    "WarrenHood": "$ npm install frida\nnpm WARN lifecycle The node binary used for scripts is /data/data/com.termux/files/home/.nvm/versions/node/v10.0.0/bin/node but npm is using /data/data/com.termux/files/usr/bin/node itself. Use the --scripts-prepend-node-path option to include the path for the node binary npm was executed with.\n\nfrida@10.8.1 install /data/data/com.termux/files/home/node_modules/frida\nprebuild-install || node-gyp rebuild\n\nprebuild-install WARN install No prebuilt binaries found (target=8.11.1 runtime=node arch=arm platform=android)\ngyp: Undefined variable frida_host in binding.gyp while trying to load binding.gyp\ngyp ERR! configure error\ngyp ERR! stack Error: gyp failed with exit code: 1\ngyp ERR! stack     at ChildProcess.onCpExit (/data/data/com.termux/files/home/.nvm/versions/node/v10.0.0/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:336:16)\ngyp ERR! stack     at emitTwo (events.js:126:13)\ngyp ERR! stack     at ChildProcess.emit (events.js:214:7)\ngyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12)\ngyp ERR! System Linux 3.4.112-kali\ngyp ERR! command \"/data/data/com.termux/files/usr/bin/node\" \"/data/data/com.termux/files/home/.nvm/versions/node/v10.0.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js\" \"rebuild\"\ngyp ERR! cwd /data/data/com.termux/files/home/node_modules/frida\ngyp ERR! node -v v8.11.1\ngyp ERR! node-gyp -v v3.6.2\ngyp ERR! not ok\nnpm WARN enoent ENOENT: no such file or directory, open '/data/data/com.termux/files/home/package.json'\nnpm WARN home No description\nnpm WARN home No repository field.\nnpm WARN home No README data\nnpm WARN home No license field.\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.3 (node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"android\",\"arch\":\"arm\"})\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! frida@10.8.1 install: prebuild-install || node-gyp rebuild\nnpm ERR! Exit status 1\nnpm ERR!\nnpm ERR! Failed at the frida@10.8.1 install script.\nnpm ERR! This is probably not a problem with npm. There is likely additional logging output above.\nnpm ERR! A complete log of this run can be found in:\nnpm ERR!     /data/data/com.termux/files/home/.npm/_logs/2018-05-01T16_03_52_022Z-debug.log. ",
    "LouisonGitzinger": "Hi there, the problem seems to be solved with frida 10.8.2 today : \n```\n~\n\u276f npm install -g frida\n\nfrida@10.8.2 install /usr/local/lib/node_modules/frida\nprebuild-install || node-gyp rebuild\n\n\nfrida@10.8.2\nadded 69 packages in 2.197s\n```\n\nThanks !. In the log file /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-logs/meson-log.txt, I have the following : \n```\nBuild started at 2018-10-09T17:27:36.229235\nMain binary: /usr/local/bin/python3\nPython system: Darwin\nThe Meson build system\nVersion: 0.48.0.dev1\nSource dir: /Users/lgitzing/Development/work/frida/frida-gum\nBuild dir: /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum\nBuild type: cross build\nProject name: frida-gum\nProject version: 1.0.0\nSanity testing C compiler: /Users/lgitzing/Development/work/frida/build/frida-macos-x86_64-clang\nIs cross compiler: False.\nSanity check compiler command line: /Users/lgitzing/Development/work/frida/build/frida-macos-x86_64-clang /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-private/sanitycheckc.c -o /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-private/sanitycheckc.exe\nSanity check compile stdout:\n\nSanity check compile stderr:\n\nRunning test binary command: /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-private/sanitycheckc.exe\nAppending CFLAGS from environment: '-fPIC '\nAppending LDFLAGS from environment: '-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk -Wl,-macosx_version_min,10.9 -arch x86_64 -Wl,-dead_strip -L/Users/lgitzing/Development/work/frida/build/frida-macos-x86_64/lib -L/Users/lgitzing/Development/work/frida/build/sdk-macos-x86_64/lib'\nAppending CPPFLAGS from environment: '-include /Users/lgitzing/Development/work/frida/build/frida-version.h -mmacosx-version-min=10.9 -I/Users/lgitzing/Development/work/frida/build/frida-macos-x86_64/include -I/Users/lgitzing/Development/work/frida/build/sdk-macos-x86_64/include'\nSanity testing C compiler: /Users/lgitzing/Development/work/frida/build/frida-macos-x86-clang\nIs cross compiler: True.\nSanity check compiler command line: /Users/lgitzing/Development/work/frida/build/frida-macos-x86-clang -mmacosx-version-min=10.9 -I/Users/lgitzing/Development/work/frida/build/frida-macos-x86/include -I/Users/lgitzing/Development/work/frida/build/sdk-macos-x86/include -include /Users/lgitzing/Development/work/frida/build/frida-version.h -mmacosx-version-min=10.9 -Wl,-dead_strip -L/Users/lgitzing/Development/work/frida/build/frida-macos-x86/lib -L/Users/lgitzing/Development/work/frida/build/sdk-macos-x86/lib /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-private/sanitycheckc.c -o /Users/lgitzing/Development/work/frida/build/tmp-macos-x86/frida-gum/meson-private/sanitycheckc_cross.exe\nSanity check compile stdout:\n\nSanity check compile stderr:\nld: warning: The i386 architecture is deprecated for macOS (remove from the Xcode build setting: ARCHS)\nld: warning: ignoring file /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/lib/libSystem.tbd, missing required architecture i386 in file /Library/Developer/CommandLineTools/SDKs/MacOSX10.14.sdk/usr/lib/libSystem.tbd\nld: dynamic main executables must link with libSystem.dylib for architecture i386\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n\nmeson.build:1:0: ERROR:  Compiler /Users/lgitzing/Development/work/frida/build/frida-macos-x86-clang can not compile programs.\n```. ",
    "b1naryxx": "well i really dont know how to iterate it yet but my workaround to at least be able to print it using console.log is\nvar HashMap = Java.use(\"java.util.HashMap\");\nvar c = Java.cast(b,HashMap);\nwhere b is the [Object object] thats is supposed to be a hashmap object.. ",
    "JeffJerseyCow": "I've got the same problem for version 11.0.8.\n``\n(frida) root@hacking:~/tools/frida/build# frida-linux-x86_64/bin/frida -ppidof vim`\n     ____\n    / _  |   Frida 11.0.8 - A world-class dynamic instrumentation toolkit\n   | (| |\n    > _  |   Commands:\n   // |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\n[Local::PID::8138]-> Process.enumerateThreadsSync()\n[]\n[Local::PID::8138]-> Process.getCurrentThreadId()\n8355\n[Local::PID::8138]-> \nOS: Ubuntu 18.04 - 64 bit\nLinux hacking 4.15.0-22-generic #24-Ubuntu SMP Wed May 16 12:15:17 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nGDB threads\n(gdb) info threads \n  Id   Target Id         Frame \n* 1    Thread 0x7f19cc80df40 (LWP 8138) \"vim\" 0x00007f19cac48ff7 in __GI___select (nfds=1, \n    readfds=0x7fffe8f93e60, writefds=0x7fffe8f93ee0, exceptfds=0x7fffe8f93f60, timeout=0x0)\n    at ../sysdeps/unix/sysv/linux/select.c:41\n(gdb) \n```\nIt's worth noting the Process.getCurrentThreadId() returns a value. I'm guessing because this uses a direct systcall as opposed to whatever the enumerate_threads call does.. ",
    "TheKalin": "It works for me \n$ frida --version\n10.7.6\n```\nfrida -p 26305\n     ____\n    / _  |   Frida 10.7.6 - A world-class dynamic instrumentation toolkit\n   | (| |\n    > _  |   Commands:\n   // |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\n[Local::PID::26305]-> Process.enumerateThreadsSync()\n[\n    {\n        \"context\": {\n            \"pc\": \"0x7fafc91795d9\",\n            \"r10\": \"0x561e1c50ce40\",\n            \"r11\": \"0x293\",\n            \"r12\": \"0x9be\",\n            \"r13\": \"0x9be\",\n            \"r14\": \"0x7fafcb6adc80\",\n            \"r15\": \"0x2\",\n            \"r8\": \"0x0\",\n            \"r9\": \"0x561e1c5015d8\",\n            \"rax\": \"0xfffffffffffffdfc\",\n            \"rbp\": \"0x2\",\n            \"rbx\": \"0x561e1c4bc4f0\",\n            \"rcx\": \"0x7fafc91795d9\",\n            \"rdi\": \"0x561e1c4bc4f0\",\n            \"rdx\": \"0x9be\",\n            \"rip\": \"0x7fafc91795d9\",\n            \"rsi\": \"0x2\",\n            \"rsp\": \"0x7ffcfa7b1bb0\",\n            \"sp\": \"0x7ffcfa7b1bb0\"\n        },\n        \"id\": 26305,\n        \"state\": \"waiting\"\n    },\n[...]\n[Local::PID::26305]-> Process.getCurrentThreadId()\n26339\n[Local::PID::26305]-> \nOS:\nuname -a\nLinux KaliBox 4.15.0-kali3-amd64 #1 SMP Debian 4.15.17-1kali1 (2018-04-25) x86_64 GNU/Linux\n```\n. @ooszero connect your phone to the network than ssh into it. . @ooszero Make sure that your iPhone is paired/trusted to the macos. . ",
    "Manouchehri": "I\u2019m running into this as well on Android. Looks like it was reported here too: https://github.com/frida/frida-core/issues/125. ",
    "don1001": "is it ASCII string ? try \nlog(Memory.readUtf8String(args[3]));  //log 4th argument. ",
    "idb-": "I've gotten it to work with memu before, but it's extremely hit or miss. Some days it will work, others it will not.. ",
    "bxl0608": "Hello! When you use the Memory,readUtf8String(args[0]) to read the first argument. Can you succeed? Why is it when I use this readUtf8String(args[0]) , frida give me a ERROR that \ud83d\udc4d \n{u'columnNumber': 1, u'description': u\"Error: can't decode byte 0xbe in position 1\", u'fileName': u'script1.js', u'lineNumber': 18, u'type': u'error', u'stack': u\"Error: can't decode byte 0xbe in position 1\\n    at script1.js:18\"}\ni can't hook the native function,and see the argument. If you're successful, I'd like you to tell me.Thanks!. ",
    "clviper": "Have the same behavior in version 10.8.2. In 10.7.7 is working correctly.. Awesome @oleavr . Thnks for the quick fix.. Just tested and it's working. Thanks @oleavr!. Hi again. Just created a simple POC to help debug this.\nWith frida 10.6.29 I can output the string without any problems. With frida 11.0.3 I get the error:\nError: abort was called\n    at input:1\n    at [anon] (repl1.js:8)\n    at input:1\nProcess terminated\nIt is not the same error, but it might be related.\nThis is the frida script I'm using\nJavascript\nJava.perform(function x() {\n        console.log(\"\");\n        console.log(\"[.] Testing ByteArray output\");\n        var EncryptionClass = Java.use(\"pt.integrity.labs.aes.MainActivity\");\n        var StringClass = Java.use(\"java.lang.String\");\n        EncryptionClass.encrypt.overload(\"[B\").implementation = function(x){\n        this.encrypt(x);\n        value = StringClass.$new(x);\n        console.log(\"Value to encrypt: \"+value);\n        }\n});\napp-debug.apk.zip\n. ",
    "ninoz": "I managed to get the Application to work using https://github.com/dpnishant/appmon/ so I guess the issue is with Theos-Jailed / Sensepost's Objection methods of adding the dylib.  Ill do some more exploration\n. ",
    "19oos": "\nUpdating your macOS system to the latest, currently 10.13.4, should solve this issue. Your system's OpenSSL is too old.\n\n@oleavr hi, I got the same issue.\nmacOS 10.14.2\npython  2.7.13\npip 18.1\nHere is the Errinfo:\npy2android \u276f pip install frida-tools\nCollecting frida-tools\nRequirement already satisfied: colorama<1.0.0,>=0.2.7 in /Users/user/py2virtualenv/py2android/lib/python2.7/site-packages (from frida-tools) (0.4.1)\nCollecting frida<13.0.0,>=12.1.0 (from frida-tools)\n  Using cached https://files.pythonhosted.org/packages/28/57/dfd4b2965cb5a9d13e998aba038eb0d8150f1570e0c12a78158278a7403f/frida-12.2.27.tar.gz\nCollecting pygments<3.0.0,>=2.0.2 (from frida-tools)\n  Using cached https://files.pythonhosted.org/packages/13/e5/6d710c9cf96c31ac82657bcfb441df328b22df8564d58d0c4cd62612674c/Pygments-2.3.1-py2.py3-none-any.whl\nCollecting prompt-toolkit<2.0.0,>=0.57 (from frida-tools)\n  Using cached https://files.pythonhosted.org/packages/d1/b0/1a6c262da35c779dd79550137aa7c298a424987240a28792ec5ccf48f848/prompt_toolkit-1.0.15-py2-none-any.whl\nCollecting wcwidth (from prompt-toolkit<2.0.0,>=0.57->frida-tools)\n  Using cached https://files.pythonhosted.org/packages/7e/9f/526a6947247599b084ee5232e4f9190a38f398d7300d866af3ab571a5bfe/wcwidth-0.1.7-py2.py3-none-any.whl\nRequirement already satisfied: six>=1.9.0 in /Users/user/py2virtualenv/py2android/lib/python2.7/site-packages (from prompt-toolkit<2.0.0,>=0.57->frida-tools) (1.12.0)\nBuilding wheels for collected packages: frida\n  Running setup.py bdist_wheel for frida ... error\n  Complete output from command /Users/user/py2virtualenv/py2android/bin/python -u -c \"import setuptools, tokenize;file='/private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-install-C_ne2l/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" bdist_wheel -d /private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-wheel-LUOvVB --python-tag cp27:\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build/lib.macosx-10.6-intel-2.7\n  creating build/lib.macosx-10.6-intel-2.7/frida\n  copying frida/init.py -> build/lib.macosx-10.6-intel-2.7/frida\n  copying frida/core.py -> build/lib.macosx-10.6-intel-2.7/frida\n  running build_ext\n  querying pypi for available prebuilds\n  network query failed\n  looking for prebuilt extension in home directory, i.e. /Users/user/frida-12.2.27-py2.7-macosx-10.9-intel.egg\n  no prebuilt extension found in home directory\n  error: \n\nFailed building wheel for frida\n  Running setup.py clean for frida\nFailed to build frida\nInstalling collected packages: frida, pygments, wcwidth, prompt-toolkit, frida-tools\n  Running setup.py install for frida ... error\n    Complete output from command /Users/user/py2virtualenv/py2android/bin/python -u -c \"import setuptools, tokenize;file='/private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-install-C_ne2l/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" install --record /private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-record-iZUWw3/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/py2virtualenv/py2android/bin/../include/site/python2.7/frida:\n    running install\n    running build\n    running build_py\n    creating build\n    creating build/lib.macosx-10.6-intel-2.7\n    creating build/lib.macosx-10.6-intel-2.7/frida\n    copying frida/init.py -> build/lib.macosx-10.6-intel-2.7/frida\n    copying frida/core.py -> build/lib.macosx-10.6-intel-2.7/frida\n    running build_ext\n    querying pypi for available prebuilds\n    network query failed\n    looking for prebuilt extension in home directory, i.e. /Users/user/frida-12.2.27-py2.7-macosx-10.9-intel.egg\n    no prebuilt extension found in home directory\n    error: \n----------------------------------------\n\nCommand \"/Users/user/py2virtualenv/py2android/bin/python -u -c \"import setuptools, tokenize;file='/private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-install-C_ne2l/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" install --record /private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-record-iZUWw3/install-record.txt --single-version-externally-managed --compile --install-headers /Users/user/py2virtualenv/py2android/bin/../include/site/python2.7/frida\" failed with error code 1 in /private/var/folders/0f/v781tmf53yb24d4mmf0rwh4w0000gp/T/pip-install-C_ne2l/frida/. ",
    "thejunkjon": "@19oos , this seems to be very similar to your issue.\nhttps://stackoverflow.com/questions/44316292/ssl-sslerror-tlsv1-alert-protocol-version\nThe solution stated in the link above was to update/install openssl and python3.  You might want to give that a try and see if the issue goes away.. @nadavshtern , I just actually worked on a similar issue here (https://github.com/frida/frida/issues/636).  To fix my issue, I actually did the opposite.  I kept the -fPIC and removed the -fPIE since this was for frida-gum which is a static library.  I believe PIE can only be specified for executables.. I am looking at https://frida.re/docs/building/, for instructions on how to build frida for Android.  I was able to do this successfully.  Is there a way to package my build into a distributable package? i.e. the same format as found here (https://github.com/frida/frida/releases).\nBefore investigating the issue, I'd like to make sure I can reproduce it with my own builds.. I spent a little more time looking into this issue.  There isn't anything obvious that pops out in the diff.\nhttps://github.com/frida/frida/compare/12.0.8..12.1.0\nAlso, I did a dump of the relocation entries in the frida-gum static library via \"readelf --relocs libfrida.a\" and this also looked good.  I didn't see any TEXTRELs entries which would be typical if it wasn't built with -fPIC.\nLastly, I tried adding the suggested flags \"-Wl,--gc-sections, -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -fuse-ld=gold -Wl,--fix-cortex-a8 -Wl,--icf=safe\", and it still failed to link properly.\n. @oleavr , regarding my comment above (https://github.com/frida/frida/issues/636#issuecomment-431480750), would you mind providing instructions on how to create the distributable package similar to what you post in the \"releases\" section (https://github.com/frida/frida/releases) ?  I'd like to dig more into this issue but want to make sure I can reproduce on a local build.  Thanks!. In case this helps others, the way I was able to build a distributable package (similar to what is contained in the releases) was using devkit (https://github.com/frida/frida/blob/master/releng/devkit.py).  I built the frida-gum project using the following command.\nmake SHELL=\"sh -x\" gum-android\n`and then once it is completed, you can run the devkit command as follows.\n./releng/devkit.py frida-gum android-arm ./output/arm; \n./releng/devkit.py frida-gum android-arm64 ./output/arm64\nThe release script can be found here. \nhttps://github.com/frida/frida/blob/master/releng/release.py\nSome issues that I encountered while trying to run devkit were.\n1) The amalgamated header was being generated incorrectly.  It was leaving out the \"gum\" headers and only including its dependencies.  This was because the command it was using to determine the header dependencies (https://github.com/frida/frida/blob/master/releng/devkit.py#L93) was outputting an unexpected format using my compiler.  The expected format of this command is as follows.\ngum.o: \\\n         <path_to_gum.h> \\\n         <path_to_gumdefs.h> \\\nwhere as on my machine, it was outputting\ngum.o: <path_to_gum.h> \\\n           <path_to_gumdefs.h> \\\nThe change here would be to update the regex it is using.  I'll try to submit a PR for this fix.\n2) The aforementioned command (https://github.com/frida/frida/blob/master/releng/devkit.py#L93) was using the variable ${CPP} to find my compiler.  This didn't exist on my machine.  I had to change this to ${CXX} and then it worked. I wasn't able to figure out why ${CPP} didn't exist.\n. Regarding this issue, I was able to reproduce this within frida itself by updating frida-gum project to produce a shared library (instead of static library) as part of its build process.  To do this, I updated the common.mk file (https://github.com/frida/frida/blob/master/releng/common.mk#L9) and changed the line from:\nfrida_gum_flags := --default-library static $(FRIDA_COMMON_FLAGS) $(FRIDA_DIET_FLAGS)\nto\nfrida_gum_flags := --default-library shared $(FRIDA_COMMON_FLAGS) $(FRIDA_DIET_FLAGS)\nwhen this is done, the error is similar to the errors that I received while trying to link frida-gum static library to my own shared library.\n`\n/frida/build/frida-android-x86-clang  -o gum/libfrida-gum-1.0.so 'gum/gum@@frida-gum-1.0@sha/gum.c.o' 'gum/gum@@frida-gum-1.0@sha/gumapiresolver.c.o' 'gum/gum@@frida-gum-1.0@sha/gumbacktracer.c.o' 'gum/gum@@frida-gum-1.0@sha/gumcloak.c.o' 'gum/gum@@frida-gum-1.0@sha/gumcodeallocator.c.o' 'gum/gum@@frida-gum-1.0@sha/gumcodesegment.c.o' 'gum/gum@@frida-gum-1.0@sha/gumexceptor.c.o' 'gum/gum@@frida-gum-1.0@sha/gumeventsink.c.o' 'gum/gum@@frida-gum-1.0@sha/guminterceptor.c.o' 'gum/gum@@frida-gum-1.0@sha/guminvocationcontext.c.o' 'gum/gum@@frida-gum-1.0@sha/guminvocationlistener.c.o' 'gum/gum@@frida-gum-1.0@sha/gumkernel.c.o' 'gum/gum@@frida-gum-1.0@sha/gumleb.c.o' 'gum/gum@@frida-gum-1.0@sha/gumlibc.c.o' 'gum/gum@@frida-gum-1.0@sha/gummemory.c.o' 'gum/gum@@frida-gum-1.0@sha/gummemorymap.c.o' 'gum/gum@@frida-gum-1.0@sha/gummetalarray.c.o' 'gum/gum@@frida-gum-1.0@sha/gummetalhash.c.o' 'gum/gum@@frida-gum-1.0@sha/gummoduleapiresolver.c.o' 'gum/gum@@frida-gum-1.0@sha/gummodulemap.c.o' 'gum/gum@@frida-gum-1.0@sha/gumprintf.c.o' 'gum/gum@@frida-gum-1.0@sha/gumprocess.c.o' 'gum/gum@@frida-gum-1.0@sha/gumreturnaddress.c.o' 'gum/gum@@frida-gum-1.0@sha/gumstalker.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-x86_gumx86writer.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-x86_gumx86relocator.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-x86_gumx86reader.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm_gumarmwriter.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm_gumarmrelocator.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm_gumthumbwriter.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm_gumthumbrelocator.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm_gumarmreg.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm64_gumarm64writer.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-arm64_gumarm64relocator.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-mips_gummipswriter.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-mips_gummipsrelocator.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-linux_gummemory-linux.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-posix_gummemory-posix.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-linux_gumprocess-linux.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-posix_gumtls-posix.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-posix_gumexceptor-posix.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-elf_gumelfmodule.c.o' 'gum/gum@@frida-gum-1.0@sha/arch-x86_gumx86backtracer.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-x86_gumcpucontext-x86.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-x86_guminterceptor-x86.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-x86_gumspinlock-x86.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-x86_gumstalker-x86.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-x86_gumstalker-x86-glue.S.o' 'gum/gum@@frida-gum-1.0@sha/backend-libunwind_gumunwbacktracer.c.o' 'gum/gum@@frida-gum-1.0@sha/backend-libdwarf_gumsymbolutil-libdwarf.c.o' -Wl,--no-undefined -Wl,--as-needed -shared -fPIC -Wl,--start-group -Wl,-soname,libfrida-gum-1.0.so -llog -ldwarf -lelf -ldl -lz -pthread /frida/build/sdk-android-x86/lib/libiconv.a /frida/build/sdk-android-x86/lib/libglib-2.0.a -pthread /frida/build/sdk-android-x86/lib/libgobject-2.0.a -pthread /frida/build/sdk-android-x86/lib/libffi.a -pthread /frida/build/sdk-android-x86/lib/libgio-2.0.a -pthread -pthread /frida/build/sdk-android-x86/lib/libgmodule-2.0.a -pthread /frida/build/sdk-android-x86/lib/libz.a /frida/build/frida-android-x86/lib/libcapstone.a /frida/build/sdk-android-x86/lib/libunwind.a /frida/build/sdk-android-x86/lib/liblzma.a -Wl,--end-group -march=i686 -fuse-ld=gold -Wl,--gc-sections -Wl,-z,noexecstack -Wl,-z,relro -Wl,-z,now -L/frida/build/frida-android-x86/lib -L/frida/build/sdk-android-x86/lib \n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: gum/gum@@frida-gum-1.0@sha/gumcodeallocator.c.o: relocation R_386_GOTOFF against preemptible symbol gum_code_deflector_free cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: gum/gum@@frida-gum-1.0@sha/backend-x86_gumstalker-x86.c.o: relocation R_386_GOTOFF against preemptible symbol gum_stalker_unfollow_me cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_alloc.o): relocation R_386_GOTOFF against preemptible symbol _dwarf_failsafe_error cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_error.o): relocation R_386_GOTOFF against preemptible symbol _dwarf_errmsgs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_groups.o): relocation R_386_GOTOFF against preemptible symbol lookfor_name cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_groups.o): relocation R_386_GOTOFF against preemptible symbol lookfor_name cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_init_finish.o): relocation R_386_GOTOFF against preemptible symbol _dwarf_get_elf_flags_func_ptr cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_init_finish.o): relocation R_386_GOTOFF against preemptible symbol dwarf_cmdline_options cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_macro5.o): relocation R_386_GOTOFF against preemptible symbol dw5formsarray cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_macro5.o): relocation R_386_GOTOFF against preemptible symbol dw5formsarray cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_macro5.o): relocation R_386_GOTOFF against preemptible symbol dw5formsarray cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_macro5.o): relocation R_386_GOTOFF against preemptible symbol dw5formsarray cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libdwarf.a(libdwarf_la-dwarf_macro5.o): relocation R_386_GOTOFF against preemptible symbol dw5formsarray cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libz.a(trees.c.o): relocation R_386_GOTOFF against preemptible symbol _length_code cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libz.a(trees.c.o): relocation R_386_GOTOFF against preemptible \nsymbol _dist_code cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: \nerror: /frida/build/sdk-android-x86/lib/libz.a(trees.c.o): relocation R_386_GOTOFF against preemptible symbol _length_code cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libz.a(trees.c.o): relocation R_386_GOTOFF against preemptible symbol _dist_code cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libz.a(zutil.c.o): relocation R_386_GOTOFF against preemptible symbol z_errmsg cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gbytes.c.o): relocation R_386_GOTOFF against preemptible symbol g_bytes_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(ghash.c.o): relocation R_386_GOTOFF against preemptible symbol g_direct_hash cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-init.c.o): relocation R_386_GOTOFF against preemptible symbol g_log_msg_prefix cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-init.c.o): relocation R_386_GOTOFF against preemptible symbol g_log_msg_prefix cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-init.c.o): relocation R_386_GOTOFF against preemptible symbol g_log_always_fatal cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-init.c.o): relocation R_386_GOTOFF against preemptible symbol g_mem_gc_friendly cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_timeout_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_timeout_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_signal_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_child_watch_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_idle_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmain.c.o): relocation R_386_GOTOFF against preemptible symbol g_idle_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmessages.c.o): relocation R_386_GOTOFF against preemptible symbol _g_log_fallback_handler cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gtestutils.c.o): relocation R_386_GOTOFF against preemptible symbol g_strcmp0 cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gtestutils.c.o): relocation R_386_GOTOFF against preemptible symbol __glib_assert_msg cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gtestutils.c.o): relocation R_386_GOTOFF against preemptible symbol __glib_assert_msg cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol glib_thread_callbacks cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol glib_thread_callbacks cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol glib_thread_callbacks cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol glib_thread_callbacks cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol g_thread_proxy cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthread.c.o): relocation R_386_GOTOFF against preemptible symbol g_thread_proxy cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthreadpool.c.o): relocation R_386_GOTOFF against preemptible symbol g_thread_pool_new cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthreadpool.c.o): relocation R_386_GOTOFF against preemptible symbol g_thread_pool_new cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gthreadpool.c.o): relocation R_386_GOTOFF against preemptible symbol g_thread_pool_new cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-unix.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_fd_source_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(glib-unix.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_fd_source_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(giounix.c.o): relocation R_386_GOTOFF against preemptible symbol g_io_watch_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gobject.c.o): relocation R_386_GOTOFF against preemptible symbol g_cclosure_new_object cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gobject.c.o): relocation R_386_GOTOFF against preemptible symbol g_cclosure_new_object_swap cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gobject.c.o): relocation R_386_GOTOFF against preemptible symbol g_object_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gobject.c.o): relocation R_386_GOTOFF against preemptible symbol g_object_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gparamspecs.c.o): relocation R_386_GOTOFF against preemptible symbol g_param_spec_types cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gsignal.c.o): relocation R_386_GOTOFF against preemptible symbol g_signal_handler_block cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gsignal.c.o): relocation R_386_GOTOFF against preemptible symbol g_signal_handler_unblock cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gsignal.c.o): relocation R_386_GOTOFF against preemptible symbol g_signal_handler_disconnect cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gtype.c.o): relocation R_386_GOTOFF against preemptible symbol _g_type_debug_flags cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_mount_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_mount_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_unmount_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_unmount_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_unmount_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_unmount_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_eject_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_eject_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_eject_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_eject_mountable_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_mount_enclosing_volume cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_mount_enclosing_volume cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_load_partial_contents_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_replace_contents_bytes_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_start_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_start_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_stop_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_stop_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_poll_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_poll_mountable cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_load_bytes_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileattribute.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_attribute_info_list_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileattribute.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_attribute_info_list_dup cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileinfo.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_attribute_matcher_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileinfo.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_attribute_matcher_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_input_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_input_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileoutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_output_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileoutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_output_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_all_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_read_bytes_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_skip_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_skip_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_skip_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_skip_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(ginputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_input_stream_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_write_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_write_all_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_write_bytes_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_splice_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_flush_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(goutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_output_stream_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresource.c.o): relocation R_386_GOTOFF against preemptible symbol g_resource_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresource.c.o): relocation R_386_GOTOFF against preemptible symbol g_resource_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresource.c.o): relocation R_386_GOTOFF against preemptible symbol g_resource_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresource.c.o): relocation R_386_GOTOFF against preemptible symbol g_resource_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gtask.c.o): relocation R_386_GOTOFF against preemptible symbol trivial_source_funcs cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvfs.c.o): relocation R_386_GOTOFF against preemptible symbol g_vfs_is_active cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdesktopappinfo.c.o): relocation R_386_GOTOFF against preemptible symbol exec_key_match_blacklist cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdesktopappinfo.c.o): relocation R_386_GOTOFF against preemptible symbol desktop_key_match_category cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_connection_flush cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_connection_close cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_bus_get cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_node_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_node_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_interface_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_interface_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_method_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_method_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_signal_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_signal_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_property_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_property_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_method_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_signal_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_property_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_interface_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_node_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_interface_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_node_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_arg_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_method_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_signal_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_property_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_interface_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_node_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusintrospection.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_annotation_info_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _gio_xdg_type_empty cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _gio_xdg_type_textplain cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _gio_xdg_type_unknown cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(xdgmime.c.o): relocation R_386_GOTOFF against preemptible symbol _caches cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gbufferedinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_buffered_input_stream_fill_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gbufferedinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_buffered_input_stream_fill_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gbufferedinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_buffered_input_stream_fill_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gbufferedinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_buffered_input_stream_fill_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_next_files_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_next_files_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_next_files_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_next_files_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileenumerator.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_enumerator_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileiostream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_io_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gfileiostream.c.o): relocation R_386_GOTOFF against preemptible symbol g_file_io_stream_query_info_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(giostream.c.o): relocation R_386_GOTOFF against preemptible symbol g_io_stream_close_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(giostream.c.o): relocation R_386_GOTOFF against preemptible symbol g_io_stream_splice_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(giostream.c.o): relocation R_386_GOTOFF against preemptible symbol g_io_stream_splice_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gproxyresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_proxy_resolver_is_supported cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gproxyresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_proxy_resolver_lookup_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsocketconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_socket_connection_connect_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_connection_send_credentials_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixconnection.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_connection_receive_credentials_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixmounts.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_mount_free cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixmounts.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_mount_copy cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixmounts.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_mount_point_free cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixmounts.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_mount_point_copy cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixmounts.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_mount_free cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gactiongroupexporter.c.o): relocation R_386_GOTOFF against preemptible symbol org_gtk_Actions_xml cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdbusaddress.c.o): relocation R_386_GOTOFF against preemptible symbol g_dbus_address_get_stream cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_poll_for_media cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_poll_for_media cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_start cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_start cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_start cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gdrive.c.o): relocation R_386_GOTOFF against preemptible symbol g_drive_start cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gioscheduler.c.o): relocation R_386_GOTOFF against preemptible symbol g_io_scheduler_push_job cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_unmount_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_unmount_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_unmount_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_unmount_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_remount cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_remount cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_guess_content_type cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gmount.c.o): relocation R_386_GOTOFF against preemptible symbol g_mount_guess_content_type cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_resolver_lookup_by_name_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_resolver_free_addresses cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_resolver_lookup_by_name_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_resolver_lookup_by_name_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gresolver.c.o): relocation R_386_GOTOFF against preemptible symbol g_resolver_lookup_service_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsocketclient.c.o): relocation R_386_GOTOFF against preemptible symbol g_socket_client_connect_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsocketclient.c.o): relocation R_386_GOTOFF against preemptible symbol g_socket_client_connect_to_host_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsocketclient.c.o): relocation R_386_GOTOFF against preemptible symbol g_socket_client_connect_to_uri_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsrvtarget.c.o): relocation R_386_GOTOFF against preemptible symbol g_srv_target_free cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsrvtarget.c.o): relocation R_386_GOTOFF against preemptible symbol g_srv_target_copy cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gtlsinteraction.c.o): relocation R_386_GOTOFF against preemptible symbol g_tls_interaction_ask_password_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gtlsinteraction.c.o): relocation R_386_GOTOFF against preemptible symbol g_tls_interaction_request_certificate_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_mount cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_mount cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gvolume.c.o): relocation R_386_GOTOFF against preemptible symbol g_volume_eject_with_operation cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixinputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_input_stream_get_fd cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_source_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_source_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_key_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsettingsschema.c.o): relocation R_386_GOTOFF against preemptible symbol g_settings_schema_key_ref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gsubprocess.c.o): relocation R_386_GOTOFF against preemptible symbol g_subprocess_wait_async cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgio-2.0.a(gunixoutputstream.c.o): relocation R_386_GOTOFF against preemptible symbol g_unix_output_stream_get_fd cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gmappedfile.c.o): relocation R_386_GOTOFF against preemptible symbol g_mapped_file_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(goption.c.o): relocation R_386_GOTOFF against preemptible symbol g_option_group_unref cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gscanner.c.o): relocation R_386_GOTOFF against preemptible symbol g_scanner_warn cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libglib-2.0.a(gscanner.c.o): relocation R_386_GOTOFF against preemptible symbol g_scanner_error cannot be used when making a shared object\n/frida/build/ndk-android-x86/bin/../lib/gcc/i686-linux-android/4.9.x/../../../../i686-linux-android/bin/ld.gold: error: /frida/build/sdk-android-x86/lib/libgobject-2.0.a(gtypemodule.c.o): relocation R_386_GOTOFF against preemptible symbol g_type_module_unuse cannot be used when making a shared object\nclang60: error: linker command failed with exit code 1 (use -v to see invocation)\n[85/190] Compiling C++ object 'bindings/gumpp/bindings@gumpp@@frida-gumpp-1.0@sha/sanitychecker.cpp.o'.\nninja: build stopped: subcommand failed.\nmake[1]: *** [Makefile.linux.mk:136: build/frida-android-x86/lib/pkgconfig/frida-gum-1.0.pc] Error 1\nmake[1]: Leaving directory '/frida'\nmake: *** [Makefile:2: gum-android]. I believe the issue is with how the CFLAGS are specified in the following two links.\nhttps://github.com/frida/frida/blob/master/releng/setup-env.sh#L469\nhttps://github.com/frida/frida/blob/master/releng/setup-env.sh#L492\nThe \"-fPIE\" flag is being specified which is only for executable binaries.  Since in this case, we are building static libraries, this needs to be \"-fPIC\".  When I made this change locally, I was able to link correctly.  I didn't check though whether this change impacted other platforms/libraries.. Thanks @romainthomas . I'll close this issue then.. Hi @LouisonGitzinger , does that path to the clang compiler exist? \n/Users/lgitzing/Development/work/frida/build/frida-macos-x86-clang\nI had a similar issue where it was unable to find the path to my compiler correctly.  I had to manually create a symlink for my compiler to that location.  I was going to look into the issue but haven't had time.. Hi @neoz , would you mind providing the steps you used to get this error?  Also, have you tried this on a different device/emulator e.g. the standard Android emulator? Thanks.. I can also confirm that when I built with glibc-2.27 it worked fine.  I recently upgraded to glibc-2.28 and I am encountering this segfault issue.\n. @raymontag, one thing I noticed was that if I specify LC_ALL, then valac no longer crashes.  I haven't had time to dig into this but just thought I'd put that piece of info in case this helps someone. So, the command I used was:\nLC_ALL=\"en_US\" /frida/build/fs-linux-x86_64-valac\n. Please have a look here (https://github.com/frida/frida/issues/255).  It seems the consensus on this issue is that the code is unable to determine the path to the correct libc because there are multiple copies on that device.  Would you mind providing the device you are testing with? Thanks!. @javixeneize what version of Frida are you using?  you might want to try the latest if you are not using it.. Thanks @javixeneize.  Are you using python 2 or 3? I believe you should be using python 3.\nAlso, when you installed frida through pip, you should see a \"_frida.so\" library that gets put in your install directory.  To find this file, do \"pip show frida_tools\".  This will show you the path where it was installed (e.g. /home/frida/.local/lib/python3.7/site-packages).\nCan you show me the output of \"ldd _frida.so\"?. Hi @javixeneize , thanks for providing the info.  \nFrom here (http://www.manpagez.com/man/1/otool/), it looks like you should be providing the \"-L\" argument and not the \"-l\" (lowercase) argument.  Can you give that a try?  Also, please try providing the absolute path to the file.  So the entire command might be.\notool -L /home/frida/.local/lib/python3.7/site-packages/_frida.so\nMy theory is that the reason it is crashing is because it is picking up a version of a library that is incompatible with frida.  Knowing the result of that command would help confirm this.. @wangzery , please try using python 3.. @tautology0 , are you using the latest frida version? Also, can you paste (or link) the code you are using?\nRegarding that error (VM::GetEnv failed: -2), I am not sure if it helps but that error will get returned if you are attempting to invoke JNI methods on a thread that isn't attached to the VM.. @titze , I am not too familiar with ios but maybe this can help?\nhttps://stackoverflow.com/questions/31350957/fbsopenapplicationerrordomain-error-1\nIt seems similar to the issue you are having.. Thanks @oleavr . Ah yes, I see that now.  I'll make the change and retest.  . Oops. I think I clicked the resolve button on accident.  Sorry about that.  I'll submit another PR for the suggested change.. ",
    "kov4l3nko": "Frida 11.0.3 on iPhone 5s iOS 11.0.1 Electra JB 1.0.4 with Tweaks. \nThe same issue: spawn doesn't work (I got \"Failed to spawn: unexpectedly timed out while waiting for process to suspend\"). Attach is ok.. > frida -U --no-pause -f \"com.facebook.Facebook\" -l ios_hook.js\n\nI can spawn the facebook process.\n\nThe issue I mentoided is a history now. It was fixed several versions ago, so please just ignore my previous comment.. ",
    "lasting-yang": "(virtual-python3) \u279c  \u2717 frida -U --no-pause -f \"com.facebook.Facebook\" -l ios_hook.js\n     ____\n    / _  |   Frida 12.2.18 - A world-class dynamic instrumentation toolkit\n   | (| |\n    > _  |   Commands:\n   // |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\nSpawned com.facebook.Facebook. Resuming main thread!\n[iPhone::com.facebook.Facebook]->\nI can spawn the facebook process.. ",
    "icepng": "hello\uff0cI got the same problem and can't hook the getInputStream, are you getting the solution?. ",
    "ivanyadeshko": "I am localize the error.\nWhen i using ProxyDroid app. After enable proxy i cant connect to frida-server. But if i'm already connected to frida, and i enable proxy, then work fine =). ",
    "vellrya": "There isn't real problem, I find solutions). The same behavior with any script on android 8.0 on OnePlus 3. I just rolled back to 12.0.5 and it all worked). You can get byte object in this way:\nconst byteClass = Java.use(\"java.lang.Byte\");\nvar byteObj = byteClass.$new.overload(\"java.lang.String\").call(byteClass, \"your string\");\nCheck example here: https://www.frida.re/docs/examples/android/\nP.S: I doesn't check the code, but it should work. Please, feel free to reply if something goes wrong). All override onCreate function on Android must contain bundle argument:\nhttps://developer.android.com/reference/android/app/Activity\nSo, the source code of your MyApplication class is incorrect). ",
    "cvt126": "You should reboot the frida,\nadb shull\nsu\nchmod 777 /data/local/tmp/frida\n./data/local/tmp/frida\nopen other cmd to do this:\nadb forward tcp:27042 tcp:27042\nadb forward tcp:27043 tcp:27043\n. you should use \nadb forward tcp:27042 tcp:27042\nadb forward tcp:27043 tcp:27043\n. you can do this:\nadb forward tcp:27042 tcp:27042\nadb forward tcp:27043 tcp:27043. import frida\nimport sys\nrdev = frida.get_remote_device()\nsession = rdev.attach(\"com.hubox.project\")\nscr = \"\"\"\nsend(\"get in\");\nInterceptor.attach(Module.findExportByName(\"libtiny.so\",\"Java_com_zxy_libjpegturbo_JpegTurboCompressor_nativeCompress\"), {\n    onEnter: function(args) {\n        ret=Memory.readUtf8String(args[1]);\n        send(\"arg0:\"+args[0]);\n        send(\"arg1:\"+ret);\n},\nonLeave:function(retval){\n\n}\n\n});\n\"\"\"\nscript = session.create_script(scr)\ndef on_message(message ,data):\n    file=open(r'C:\\Users\\Administrator\\Desktop\\log.txt', 'a')\n    file.writelines(str(message)+\"\\n\")\n    file.close()\n    print (message)\nscript.on(\"message\" , on_message)\nscript.load()\nsys.stdin.read()\n. import frida\nimport sys\nrdev = frida.get_remote_device()\nsession = rdev.attach(\"com.hubox.project\")\nscr = \"\"\"\nsend(\"get in\");\nInterceptor.attach(Module.findExportByName(\"libtiny.so\",\"Java_com_zxy_libjpegturbo_JpegTurboCompressor_nativeCompress\"), {\n    onEnter: function(args) {\n        ret=Memory.readUtf8String(args[1]);\n        send(\"arg0:\"+args[0]);\n        send(\"arg1:\"+ret);\n},\nonLeave:function(retval){\n\n}\n\n});\n\"\"\"\nscript = session.create_script(scr)\ndef on_message(message ,data):\n    file=open(r'C:\\Users\\Administrator\\Desktop\\log.txt', 'a')\n    file.writelines(str(message)+\"\\n\")\n    file.close()\n    print (message)\nscript.on(\"message\" , on_message)\nscript.load()\nsys.stdin.read(). I user frida 12.0.8 os is 6.0.1 andriod. I use python 3.6.6 and win 7 64 . I used 3.7 but no  solution\uff0cand I copy the 3.6.6 from my friend to solution.. You hook other so, success by nox\uff1f. ",
    "vozitox": "What did you do to fix this??. ",
    "tekwizz123": "Best bet is that its related to this line:\nMay 28 12:10:50 iPhone-Andrej SpringBoard[255] <Warning>: Forcing crash report of <FBApplicationProcess: 0x1266264a0; Screenshot; pid: 1793> (reason: 1, description: zctym.Screenshot failed to launch after 20.00s (launchIntent: foreground-interactive))\nSeems like something on your phone is timing out, perhaps due to Frida suspending a process for too long such that its watchdog process thinks the main process has stopped responding?. ",
    "daibanshixianglan": "Same with my situation. Did you solve that?. ",
    "droidresearch": "This is related to UTF encoding issue. The quick way to solve this is to use python3 at the client side.\npip3 install frida-tools\nshould solve the issue.. @oleavr Sir, do we have any steps on how to build it The makefile.sdk.mk succeeds for ARM but there is no target for frida-tools for ARM.. While building it using the setup.py, should I provide the prebuilt extension \"_frida.so\" for ARM platform. Could you let me know where is _frida.so for ARM is hosted?. ",
    "wendal2841": "10.12.6, already 3 days such a problem. \n. ",
    "H0r53": "I'm running frida in a VM with: Linux ubuntu 4.13.0-43-generic #48~16.04.1-Ubuntu SMP Thu May 17 12:56:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\nThe frida client I used came straight from pip. ",
    "Jiramew": "I got the same error, any help? \nThanks in advance. I run it on an AVD(Nexus 4, Android 7.1.1, Google APIs Intel Atom (x86)) successfully, without the error. \nHope this will help ^.^. ",
    "ChiChou": "You should not try to dereference the pointer since it's handled by Objective C runtime, which you don't have enough knowledge. Use class-dump or new ObjC.Object(args[2]).$methods to see what methods does the object support.. Can't you see the comma instead of dot in your class name?\n\n\u628a\u8fd9\u4e2a\u5b57\u7b26\u4e32\uff0c\u653e\u5927\u5b57\u53f7\u4e86\u770b\uff1a\"cn.game,center.lib.network.SDKHttpRequest\". Same issue on frida 12.0.3, iOS 11.1.2. @minhtt159 Seems like this problem does not occur on all processes. \nEnable MobileSafari's developer option to make sure webinspectord running, then frida -U webinspectord. \"expected a pointer\" means you are supposed to give a pointer, and it's likely hndl is null here.. ",
    "custardcream": "Work around as follows:\npip install --trusted-host pypi.org --trusted-host files.pythonhosted.org frida\nStill an issue I feel ...\n. ",
    "youshaoduo": "\u6211\u5f00\u59cb\u7528sudo pip3 install frida-tools\u4f1a\u62a5\u8fd9\u4e2a\u9519\u8bef\uff0c\u540e\u6765\u7528sudo pip install frida-tools\u5c31\u597d\u4e86\u3002\u5e94\u8be5\u8ddf\u7cfb\u7edf\u7684Python\u7248\u672c\u6709\u5173\u7cfb.. ",
    "koangel": "Android 4.4\nABI:\"x86\". \u5df2\u4fee\u590d. ",
    "r0ck3tAKATrashPanda": "@oleavr Can you provide some details on how your build/fs-toolchain and build/toolchain are auto-generated. This seems to appear in multiple files, and it would be a better fix to change how they are being generated than to patch them post generation. I haven't had luck tracking down the generation of these files though.\nEDIT : When I say \"This\" I mean the /opt/python27-64/bin/python which seems like an artifact of building on CentOS, if I had to guess. I found that string in release.py, but nowhere else, and it doesn't seem like files are being generated from releng/release.py.. Tracking the hard coded path down. It seems to originate from the download of the toolchain on line 740 of releng/setup-env.sh. There are toolchains downloaded from https://build.frida.re and extracted to continue building. Is this something that can get changed server side. Or is there a way we can build this without dependancy on the download? I have tried building gum/core/python and everything relies on that download. That download of the toolchain is breaking the ARM sdk build.. Should be all fixed up. PYTHON3 is now being passed from config.mk through to setup-env.sh. Mac has a different string to patch. This should be done with the case, Windows may have yet a third, but I don't have a build environment set up to check that out. It should be fairly easy to patch that fix in though if someone runs across it.. I don't think I necessarily disagree. I just didn't see a place to fix it. Even when I try to build from source, the toolchain is downloaded which has the paths. You would need to remove the default of downloading any toolchains and always compile yourself.. Yes, but that will only work after the first download and use of the\ntoolchain. Unless there is an option I'm missing. If I clone from got and\nthen try to make the linux-x86_64 sdk, it downloads the toolchain (Which\nhad the incorrect paths). So you end up fixing the toolchain on the build\nserver, or I think you have to fix it post download?\nOn Tue, Jul 10, 2018, 8:55 AM Ole Andr\u00e9 Vadla Ravn\u00e5s \nnotifications@github.com wrote:\n\nYou can put a fixed up toolchain in build/toolchain.tar.bz2 and it will\nbe used instead of downloading one.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/pull/546#issuecomment-403811621, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AQvXtc8j9m2OBLD98m4mabjhMasJ6CUjks5uFKQugaJpZM4VG7gK\n.\n. I was looking at the tar process for the patching. Does that seem reasonable to you? That way it shouldn't break anything during the build process, but before it gets ready to be downloaded it should be patched.. I am less confident about this change than the previous ones. It is not simple for me to check if it worked since I don't have the same build environment.\n\nEDIT: This is a WIP for now. I have tested this on macOS and linux. This seems to be a reasonable fix. The only issue I foresee now, is that it is hardcoded to CentOS build systems. You could change the hardcoded path to $(PYTHON), but then you lose gtester-report, due to the shebang line not having a full path. . These are all good points. I have not tested on MacOS, but Linux I have tested on regularly. \nThe stdio redirection is by no mean necessary, but it prevents an error line when it complete the find list.\nAnd that fallback is a good idea. It has bee implemented.. This is the message that it prevents when you hit the end of the find list\nsed: can't read : No such file or directory. All changed, building on Mac to see how it goes. No luck with + > /dev/null 2>&1 to \\; change. Sed gives a wall of text errors on Linux.. This is testing right now, this regex should fix all of them to /usr/bin/env python3. Right now that is basically what we are doing. $(PYTHON3) is pulled from config.mk, which is just python3. It doesn't have a path. Is there an advantage to hardcoding?. Fair enough, hard coded python3 it is. ",
    "shmulikk": "it's a xz file, you need decompress it first. and yet, try decompress again...\nis the first bytes are: FD 37 7A 58 5A 00? it's xz magic. ",
    "koralaro": "of course i decompress it yet. ",
    "samyk": "Thank you, both of those methods worked!. I haven't had a chance to work on this further. Would love to hear any updates.. ",
    "mkwongae": "Getting the same error \"Failed to attach: expecting to read a single byte for receiving credentials but read zero bytes\" on Frida 12.2.18, iOS 9.3.3 64-bit jailbroken. Works on system apps and Cydia apps but not on the apps from App Store. frida-ps works fine.. ",
    "0xItx": "Getting this on iOS11, stemming from:\n* thread #10, name = 'pool', stop reason = breakpoint 1.1\n  * frame #0: 0x0000000104ad0a2c frida-server`g_unix_connection_receive_credentials\n    frame #1: 0x0000000104ae14fc frida-server`g_bus_get_finish + 3232\n    frame #2: 0x0000000104aa1450 frida-server`g_async_initable_new_finish + 304\n    frame #3: 0x0000000104aca490 frida-server`g_task_get_completed + 700\n    frame #4: 0x0000000104b55420 frida-server`g_thread_pool_move_to_front + 288\n    frame #5: 0x0000000104b54bc4 frida-server`g_thread_proxy + 120\n    frame #6: 0x000000022458c25c libsystem_pthread.dylib`_pthread_body + 128\n    frame #7: 0x000000022458c1bc libsystem_pthread.dylib`_pthread_start + 48\n    frame #8: 0x000000022458fcf4 libsystem_pthread.dylib`thread_start + 4\nRunning 8a58f1b84710d5faf25932fda70ce9baf9f02bd4 (HEAD at the time of writing)\n. ",
    "asmirkonjevic1": "I'm having the same issue, \"Failed to spawn: the connection is closed\".\nI'm running frida-server 11.0.13 on HTC One M8 6.0. I downloaded 32-bit arm, and I installed frida using pip.\nfrida-server is running as root.\nOnly thing i can run is frida-ps -U, but frida -U -f package.name is throwing error above. Running script is throwing same error as well.\nI tryed everything can someone help.. ",
    "cryptax": "@oleavr Unfortunately not (1) as I am root:\noot@generic:/data/local/tmp # id\nuid=0(root) gid=0(root) groups=0(root),1004(input),1007(log),1011(adb),1015(sdcard_rw),1028(sdcard_r),3001(net_bt_admin),3002(net_bt),3003(inet),3006(net_bw_stats) context=u:r:su:s0\nroot@generic:/data/local/tmp # ./frida-server\n\nI am actually in /data/local/tmp, so at least the dir works.\nno\n\nThat's my emulator:\n/opt/android-sdk-linux/emulator/emulator64-arm -avd Android60 -no-audio -no-boot-anim &\n. FYI, it does not crash from Android emulator 5.1. That's kind of a workaround (except that my process gets terminated so it's not quite working, but that's not a frida-server issue).\n. ",
    "muhzii": "After doing some steps, I found that crashing only happens if the function is being hooked at the same time the detach or unload methods are called e.g. the hooked function is being called in a loop inside the application. Is that normal?. @oleavr the Java.perform() one\nhere's an example:\nsetTimeout(function(){\n            Java.perform(function () {\n                var TM = Java.use(\"android.telephony.TelephonyManager\");\n                TM.getDeviceId.overload().implementation = function () {\n                    send(\"deviceID() is called\");\n                    return \"\";\n                };\n            });\n        },0);\n        \"\"\". OK, I resolved it and actually this.this$0 is a reference to the outer class object which was used to create an object from the inner class.. This was tested on a real device. And it works on an emulator with the same android version 5.0 and architecture arm:\nthe hook code used is just calling Java.choose where the error is produced:\nJava.choose(\"package.name.class\",{\n                onMatch: function(instance){send(instance);},\n                onComplete: function(){}\n});. I hook a function of the class and this is the Logcat at time of hooking:\nF zygote  : java_vm_ext.cc:534] \"Thread-2\" prio=5 tid=13 Runnable\nF zygote  : java_vm_ext.cc:534]   | group=\"main\" sCount=0 dsCount=0 flags=0 obj=0x14b01150 self=0xe043fe00\nF zygote  : java_vm_ext.cc:534]   | sysTid=23297 nice=0 cgrp=default sched=0/0 handle=0xcfbff970\nF zygote  : java_vm_ext.cc:534]   | state=R schedstat=( 13898876419 576679739 4037 ) utm=1015 stm=374 core=0 HZ=100\nF zygote  : java_vm_ext.cc:534]   | stack=0xcfafd000-0xcfaff000 stackSize=1038KB\nF zygote  : java_vm_ext.cc:534]   | held mutexes= \"mutator lock\"(shared held)\nF zygote  : java_vm_ext.cc:534]   native: #00 pc 0047eae1  /system/lib/libart.so (art::DumpNativeStack(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, int, BacktraceMap*, char const*, art::ArtMethod*, void*)+209)\nF zygote  : java_vm_ext.cc:534]   native: #01 pc 0057c193  /system/lib/libart.so (art::Thread::DumpStack(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, bool, BacktraceMap*, bool) const+355)\nF zygote  : java_vm_ext.cc:534]   native: #02 pc 00577693  /system/lib/libart.so (art::Thread::Dump(std::__1::basic_ostream<char, std::__1::char_traits<char>>&, bool, BacktraceMap*, bool) const+83)\nF zygote  : java_vm_ext.cc:534]   native: #03 pc 00395256  /system/lib/libart.so (art::JavaVMExt::JniAbort(char const*, char const*)+1254)\nF zygote  : java_vm_ext.cc:534]   native: #04 pc 00395765  /system/lib/libart.so (art::JavaVMExt::JniAbortF(char const*, char const*, ...)+117)\nF zygote  : java_vm_ext.cc:534]   native: #05 pc 00581c56  /system/lib/libart.so (art::Thread::DecodeJObject(_jobject*) const+390)\nF zygote  : java_vm_ext.cc:534]   native: #06 pc 0014e532  /system/lib/libart.so (art::ScopedCheck::CheckInstance(art::ScopedObjectAccess&, art::ScopedCheck::InstanceKind, _jobject*, bool)+114)\nF zygote  : java_vm_ext.cc:534]   native: #07 pc 0014dcc8  /system/lib/libart.so (art::ScopedCheck::CheckPossibleHeapValue(art::ScopedObjectAccess&, char, art::JniValueType)+296)\nF zygote  : java_vm_ext.cc:534]   native: #08 pc 0014cf85  /system/lib/libart.so (art::ScopedCheck::Check(art::ScopedObjectAccess&, bool, char const*, art::JniValueType*)+853)\nF zygote  : java_vm_ext.cc:534]   native: #09 pc 0013cd88  /system/lib/libart.so (art::CheckJNI::IsInstanceOf(_JNIEnv*, _jobject*, _jclass*)+936)\nF zygote  : java_vm_ext.cc:534]   native: #10 pc 001036b7  /data/local/tmp/re.frida.server/frida-agent-32.so (???)\nF zygote  : java_vm_ext.cc:534]   native: #11 pc 00103404  /data/local/tmp/re.frida.server/frida-agent-32.so (???)\nF zygote  : java_vm_ext.cc:534]   native: #12 pc 001031d5  /data/local/tmp/re.frida.server/frida-agent-32.so (???)\nF zygote  : java_vm_ext.cc:534]   native: #13 pc 000a3c87  /data/local/tmp/re.frida.server/frida-agent-32.so (???). Java.cast is meant to be used for Java types. In your case, you can do this using regular JavaScript.. This is probably; the same as .Error: invalid instruction happening in arm64.. Have a look at: Error: abort was called during instance cast. Well, you say it worked in the injected mode. I'm not exactly sure but it might be related to this.. Yeah, I saw that the same error as yours would happen if classes failed to load early and frida tried to access them. So what happens if you invoke other methods on the casted instance?. It's probably that frida fails at processing the returned value of type Editable when you call getText. frida-java@class-factory.js. Should be fixed now, see this.. Probably same as this if you are hooking the method early at program start-up: Android application crashes when hooking reflection methods. Java.cast not Java.case is what you mean.. Closing the issue.. This would actually be possible by changing the Python include directory in the build script meson.build to point to the platform specific Python headers.\n@oleavr , do you consider this a valid use case/ should be supported?. @oleavr No, They'd have to be manually built or installed.. var B = Java.use(\"package.name.A$B\");. ",
    "rnwkgus0734": "Yes, iTunes also running and recognizes devices. ",
    "Imzpy": "\u4f60\u662f\u7528\u7684 EndScene \u8fd9\u4e2a\u51fd\u6570\u5b58\u5728\u5417?  \u5728Dll \u4e2d\u5e94\u8be5\u6709\u5bf9\u5e94\u7684\u5bfc\u51fa\u7b26\u53f7\u624d\u5bf9 , \u62d6\u5165IDA \u770b\u770b\u5427. For Android\nvar linker = Module.findBaseAddress(\"linker\");\nvar dlopen = linker.add(0x4EBF);\nvar soName = \"\";\nInterceptor.attach(dlopen, {\n    onEnter: function(args) \n    {\n        soName = Memory.readCString(this.context.r4);\n        var soBaseAddr = Module.findBaseAddress(soName);\n                console.log(\"MuduleName:  \" + soName );\n        console.log(\"MuduleAddr:  \" + soBaseAddr );\n    }\n});\nwhen I used version 10.6.27, it work.\nwhen I used latest version, It doesn't work\n. I use  Google native system Android 6.0.1 , The model is Nexus5 . ",
    "AeonLucid": "Can confirm, thank you.\nWould like to point out that the binary on https://build.frida.re/frida/ios/bin/ is still outdated.. ",
    "michalfapso": "If you just need to use the MemoryAccessMonitor, try to run Frida with --enable-jit, it worked for me.. Hi @lhcn, could you please share your solution, if you succeeded to make it work?\nThanks a lot.. ",
    "gaplan": "i found this;\nInterceptor.attach(Module.findExportByName(null, 'CFUUIDCreateString'), {\n    onEnter: function (args) {\n        console.log('Context information:');\n        console.log('Context  : ' + JSON.stringify(this.context));\n        console.log('Return   : ' + this.returnAddress);\n        console.log('ThreadId : ' + this.threadId);\n        console.log('Depth    : ' + this.depth);\n        console.log('Errornr  : ' + this.err);\nContext information:\nContext  : {\"pc\":\"0x25eab9f4\",\"sp\":\"0x8415bc\",\"r0\":\"0x0\",\"r1\":\"0x175b6dd0\",\"r2\":\"0x0\",\"r3\":\"0x0\",\"r4\":\"0x5e2028\",\"r5\":\"0x0\",\"r6\":\"0x175b6dd0\",\"r7\":\"0x8415e0\",\"r8\":\"0x5e14f8\",\"r9\":\"0x3c787908\",\"r10\":\"0x0\",\"r11\":\"0x6b31ac\",\"r12\":\"0x25eab9f5\",\"lr\":\"0x7d2ed\"}\nhow can i read each of them ? . is there anyone ?. sorry for disturb, but i want to read what's in it.\nthis.context.r0\nread to text or array vsvs.\nThanks for help @oleavr . Thank you so much @oleavr . this is mine error too. ",
    "gdukas": "i reinstalled vala in frida/vala.. and build frida-resource-compiler successed.. . frida arm version is not offering.. so you build it yourself.. ",
    "ddzobov": "Thank you!\nHow can i enumerate arguments of method?. Thank you for explanation!. For me solution was:\n```\nvar strObj = return ObjC.classes.NSString.stringWithString_(\"US\");\nreturn ptr(strObj);\n```. > what did you try that didn't work out?\nI need perform this:\nNSString *docDir = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];\nIn ObjC.classes no NSSearchPathForDirectoriesInDomains / NSDocumentDirectory / NSUserDomainMask. Maybe you know how can i perform this?. ",
    "xiaomiwang": "Hi, I have some questions.\nWhen the function has two or more arguments, how can I call this function by JavaScript.\nAnd how can I pass nil as argument?\nplz, Thanks.. @in7egral @baptx @ooszero \nI think we can solve this issue via the next way.\n\n\nuse launchctl unload -w /Library/LaunchDaemons/re.frida.server.plist command to stop the process.\n\n\nThen modity file \"/Library/LaunchDaemons/re.frida.server.plist\" from\n<key>Program</key>\n<string>/usr/sbin/frida-server</string>\n<key>ProgramArguments</key>\n<array>\n<string>/usr/sbin/frida-server</string>\n</array>\n\n\nto\n<key>Program</key>\n<string>/usr/sbin/frida-server</string>\n<key>ProgramArguments</key>\n<array>\n<string>/usr/sbin/frida-server</string>\n<string>-l</string>\n<string>0.0.0.0</string>\n</array>.\n3.use launchctl load -w /Library/LaunchDaemons/re.frida.server.plist command to start the process.. Thanks very much\uff01. Thanks~. ",
    "localacct": "Hi nemirst\nJust curious. What do you mean by reloading the script? I wrote the script inside a python file and run it from there to spawn, attach and resume the apk.\nDo you mean I run frida in interactive mode?. Ok great thx!\nI will give that a try and see if it works. Hi steve\nDo you mean\naddr2 +=1?\nWhat is the purpose of this?. Hi mrmacete\nThanks, I will try that out.. Hi\nI tried the above suggestion and also a code snippet from https://github.com/0xdea/frida-scripts/blob/master/raptor_frida_ios_enum.js but I was not able to get an instance to the class. I tried printing the variable but it is blank.\n\"UIAlertView\" gets printed but the instance handle does not (it just prints a blank screen)\n````\n    for(var x in ObjC.classes)\n    {\n        if(ObjC.classes.hasOwnProperty(x))\n        {\n                if(x.match(\"UIAlertView\"))\n                {\n                    console.log(x);\n                var instance=ObjC.chooseSync(ObjC.classes.UIAlertView);\n                console.log(instance);\n            }\n    }\n}\n\n````. > Hi\n\nI tried the above suggestion and also a code snippet from https://github.com/0xdea/frida-scripts/blob/master/raptor_frida_ios_enum.js but I was not able to get an instance to the class. I tried printing the variable but it is blank.\n\"UIAlertView\" gets printed but the instance handle does not (it just prints a blank screen)\n```\n    for(var x in ObjC.classes)\n    {\n        if(ObjC.classes.hasOwnProperty(x))\n        {\n                if(x.match(\"UIAlertView\"))\n                {\n                    console.log(x);\n                var instance=ObjC.chooseSync(ObjC.classes.UIAlertView);\n                console.log(instance);\n            }\n    }\n}\n\n```\n\nSorry, what I meant is that I don't seem to get an array returned.. Thanks, will try that code. ",
    "bihihinok": "Any ideas ?\n@oleavr . Same as my issue #575 . ",
    "Kaizer69": "Your issue is different. Here the problem is only on EMU and with paused process.. ",
    "dwj1210": "So why is this happening? \nthank you all.. ",
    "ooszero": "@in7egral How do I not use USB connection?. @in7egral \nfrida-ps -H 192.168.1.2\nFailed to enumerate processes: unable to connect to remote frida-server\n582 . @TheKalin #582 . @cvt126 ios. @in7egral\nMy frida-server is installed on /usr/sbin by default, and it starts automatically.\nThen I killed the process and he restarted it. Then I moved him to /usr/bin/.\nThen I'll /usr/bin/frida-server -l 192.168.1.4 again.\niPhone7p:~ root# /usr/bin/frida-server -l 192.168.1.4\n2018-08-28 22:01:08.706 frida-server[2628:94693] Frida: Unable to check in with launchd: are we running standalone?\nfrida-ps -H 192.168.1.4\nConnection success\n. @in7egral \n<key>Program</key>\n<string>/usr/sbin/frida-server</string>\n<key>ProgramArguments</key>\n<array>\n    <string>/usr/sbin/frida-server -l 0.0.0.0</string>\n</array>\n\nor\n<key>Program</key>\n<string>/usr/sbin/frida-server</string>\n<key>ProgramArguments</key>\n<array>\n    <string>/usr/sbin/frida-server -l 192.168.1.4</string>\n</array>\n\nReboot device and activate jb\nssh root@192.168.1.4\nps -e | grep frida-server\nconnection failed\nIt is necessary to manually call /usr/sbin/frida-server -l 0.0.0.0 once.\nconnection success\n. @in7egral \n\nCOMMAND   PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME\nfrida-ser 901 root    5u  IPv4 0x792515c1a9a3a581      0t0  TCP localhost:27042 (LISTEN)\nfrida-ser 909 root    6u  IPv4 0x792515c1aa799c31      0t0  TCP 192.168.1.4:27042 (LISTEN)\n\nPID:901 launchd\nPID:909 run it manually\n. ",
    "3125788": "I would try to hacking it. But I want to know witch branch is stable? Could you give me more advice to hacking that file?\nThanks!. Thanks, could you tell me the link of that issue?. ",
    "alekc": "Update: looks like it's related to android version. \nI've installed 2 genymotion vm (4.4 and 8.0) and with the same code 4.4 works fine while 8.0 crashes. . ping @oleavr . ",
    "qssq": "strstr cause?. replace function not callback.. export function is callback succ.  are you solution problem?. .There's still a problem. @7763sea . ",
    "zorba10": "Thanks muhzii.\nI'm not sure I catched what you mean: if I use the \"regular\" cast, I get a syntax error from Frida:\ncasted = (byte[]) string1;\nAs it happens with all the casting. Somwhere I read to use Java.cast instead in Frida. But may be I didn't understood what you meant.\nThanks for your help. ",
    "mvastola": "Just ran into this too. (Ubuntu Bionic). @ion86 btw, your instructions are super helpful.\nThe only thing I'd add (for anyone else running into this issue) is that the third issue (re: libdwarf) is also present in Makefile.sdk.mk for anyone needing to build the SDK.\n@oleavr is there any way this could be reopened? It would be helpful to be updated when this is fixed.. Also, with compiling glib, for some reason I was also getting the following:\nIn file included from ../../../glib/glib/garcbox.c:24:0:\n../../../glib/glib/garcbox.c: In function \u2018g_atomic_rc_box_acquire\u2019:\n../../../glib/glib/grefcount.h:101:13: error: implicit declaration of function \u2018g_atomic_int_get\u2019; did you mean \u2018__atomic_store\u2019? [-Werror=implicit-function-declaration]\n     (void) (g_atomic_int_get (rc) == G_MAXINT ? 0 : g_atomic_int_inc ((rc))); \\\nI solved this by modifying glib/glib/grefcount.h to have #include <glib/gatomic.h> right after #include <glib/gtypes.h>.\nUpdate: I actually get several more errors after this. I don't even remember all the fixes, and it's still not fully compiled yet.. FYI, I'm still having issues with this, though not the same ones. (See #615). mvastola@vastdesk:~$ node -v\nv10.9.0. Ok. This was absolutely insane to figure out, but I finally managed. The issue was that I had the npm config option globalstyle set to true in my npmrc. This resulted in dependencies of the dependencies of frida-gumjs not being directly in frida-gum/bindings/gumjs/node_modules.\nAfter doing rm -Rf node_modules package-lock.json and npm i everything worked. \nI really wish browserify had at least given a warning about this, but it's not a frida issue.. ",
    "cxwithyxy": "thx. ",
    "dummys": "interesting, thanks. Do you have same in python ?\nOn Wed, 22 Aug 2018, 19:41 Ole Andr\u00e9 Vadla Ravn\u00e5s, notifications@github.com\nwrote:\n\nThis is possible by using the child gating API. Example here\nhttps://github.com/frida/frida-node/blob/master/examples/child_gating.js\n.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/602#issuecomment-415117070, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AB2fxWpMYDiVpMCZafGtIF9GU903jN8Vks5uTZe7gaJpZM4WH6eJ\n.\n. I think it's this: https://www.frida.re/news/2018/04/28/frida-10-8-released/,\nright ?\n\nOn Wed, 22 Aug 2018, 19:47 dummys, dummys1337@gmail.com wrote:\n\ninteresting, thanks. Do you have same in python ?\nOn Wed, 22 Aug 2018, 19:41 Ole Andr\u00e9 Vadla Ravn\u00e5s, \nnotifications@github.com wrote:\n\nThis is possible by using the child gating API. Example here\nhttps://github.com/frida/frida-node/blob/master/examples/child_gating.js\n.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/602#issuecomment-415117070, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AB2fxWpMYDiVpMCZafGtIF9GU903jN8Vks5uTZe7gaJpZM4WH6eJ\n.\n\n\n. The app is using android:process to spawn hiw own service, Does child\ngating works against that ?\n\nOn Wed, 22 Aug 2018, 19:50 dummys, dummys1337@gmail.com wrote:\n\nI think it's this:\nhttps://www.frida.re/news/2018/04/28/frida-10-8-released/, right ?\nOn Wed, 22 Aug 2018, 19:47 dummys, dummys1337@gmail.com wrote:\n\ninteresting, thanks. Do you have same in python ?\nOn Wed, 22 Aug 2018, 19:41 Ole Andr\u00e9 Vadla Ravn\u00e5s, \nnotifications@github.com wrote:\n\nThis is possible by using the child gating API. Example here\nhttps://github.com/frida/frida-node/blob/master/examples/child_gating.js\n.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/602#issuecomment-415117070, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AB2fxWpMYDiVpMCZafGtIF9GU903jN8Vks5uTZe7gaJpZM4WH6eJ\n.\n\n\n. this one ? https://gist.github.com/oleavr/ae7bcbbb9179852a4731. sorry to bother but I have a problem starting the script:\n\n\nself._impl.on(signal, callback)\nValueError: Device does not have a signal named 'spawned', it only has: 'spawn-added', 'spawn-removed', 'child-added', 'child-removed', 'output', 'uninjected', 'lost'\nFor this one I figured that your script is wrong, it's \"spawn-added\" and not \"spawned\" the correct signal.\nAnd there is also a typo: enumerate_pending_spawns\nI've removed the line stating: device.on('spawned', on_spawned) but the script hang \nBut I still get error:\npython\nEnabled spawn gating\nPending: []\nWaiting for data\non_spawned: Spawn(pid=22982, identifier=\"redacted\")\nInstrumenting: Spawn(pid=22982, identifier=\"redacted\")\nTraceback (most recent call last):\n  File \"gating.py\", line 74, in <module>\n    }).call(this);\"\"\")\n  File \"/home/redacted/.virtualenvs/frida/lib/python3.7/site-packages/frida/core.py\", line 148, in create_script\n. ",
    "Laura055": "I fixed it myself, thanks :). ",
    "QuestionGuy": "Try using send() instead.. ",
    "jcalabres": "Hi, I tried it before and doesn't work. \nThank you!. Kill Frida and start it again.\nbash\nps | grep frida\nkill -9 fridapid\n./frida &. ",
    "Kc57": "I am also running into this issue and have not found a way to address it. I have tried the code listed above as well as in the linked issue with no luck. Any additional pointers that may help?. @retroplasma Thanks for the reply! This seems to work for when hooking the return value for stringWithUTF8String but not when hooking the argument for isEqualToString. \nChecking on the types for each, it looks like stringWithUTF8String returns a __NSCFString but isEqualToString takes a __NSCFConstantString as an argument. This seems to be the same behavior that @jcalabres describes in the original issue.\nI have included a sample hook for each that demonstrates the issue as well as the output: \n```javascript\nInterceptor.attach(ObjC.classes.NSString['+ stringWithUTF8String:'].implementation, {\n    onEnter: function (args) {\n      console.log('[+] Hooked +[NSString stringWithUTF8String:] ');\n        //console.log('\\t[+] Backtrace:\\n\\t' + Thread.backtrace(this.context, Backtracer.ACCURATE).map(DebugSymbol.fromAddress).join('\\n\\t'));\n    },\n    onLeave: function (retval) {\n      var str = new ObjC.Object(ptr(retval)).toString()\n      console.log('[+] Returning [NSString stringWithUTF8String:] -> ', str);\n      console.log(\"[+] Type of retval -> \" + new ObjC.Object(retval).$className);\n      return retval;\n    }\n});\nInterceptor.attach(ObjC.classes.NSString['- isEqualToString:'].implementation, {\n    onEnter: function (args) {\n      var str = new ObjC.Object(ptr(args[2])).toString()\n      console.log(\"[+] Type of args[2] -> \" + new ObjC.Object(args[2]).$className);\n      console.log('[+] Hooked -[NSString isEqualToString:] ->' , str);\n      //console.log('\\t[+] Backtrace:\\n\\t' + Thread.backtrace(this.context, Backtracer.ACCURATE).map(DebugSymbol.fromAddress).join('\\n\\t'));\n    }\n});\n```\n\n. ",
    "retroplasma": "Try this: new ObjC.Object(ptr(...)).toString(). ",
    "MelonYii": "Same as me.\nMy device is Pixel XL, the system is Android 8.1.0. And I can't hook native function.\nIs your problem solved?\n. ",
    "kiukairor": "Nope sorry\nLe lun. 7 janv. 2019 \u00e0 12:07, MelonYii notifications@github.com a \u00e9crit :\n\nSame as me.\nMy device is Pixel XL, the system is Android 8.1.0. And I can't hook\nnative function.\nIs your problem solved?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/609#issuecomment-451914700, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AowMa1uDCbkWcl-jzLuaPNopDu9RBYWTks5vAziAgaJpZM4WNXWo\n.\n. \n",
    "andreafioraldi": "Same issue with the cli, i think is a problem of frida with my os.\n$ frida ./ais3_crackme ppp\n     ____\n    / _  |   Frida 12.1.0 - A world-class dynamic instrumentation toolkit\n   | (_| |\n    > _  |   Commands:\n   /_/ |_|       help      -> Displays the help system\n   . . . .       object?   -> Display information about 'object'\n   . . . .       exit/quit -> Exit\n   . . . .\n   . . . .   More info at http://www.frida.re/docs/home/\nFailed to attach: remote_exec PTRACE_CONT wait failed: 0\nI'm using ubuntu 18.04, libc version: GNU C Library (Ubuntu GLIBC 2.27-3ubuntu1) stable release version 2.27.\nptrace_scope is 0.\nI installed frida from PyPI.. ",
    "cbayet": "Thanks :D\nHonestly i'm not sure how to do small fixes in frida.\nMaybe a small tutorial on how to do it properly on https://frida.re/docs/contributing/ would be a good idea ? :')\nCya. ",
    "apoorvumang": "For me it was the opposite, 3.6.6 didn't work but 3.7 did. ",
    "shivang1989": "Solution : \nvar loaded_methods = obj.class.getDeclaredMethods();\nloaded_methods is of type object and there is some issue with casting while sending it back to python script(for further understanding, read @oleavr 's comment https://github.com/frida/frida/issues/503\nWhile trying to solve the issue I tried to stringify the object variable but din't succeed.\nsend(JSON.stringify(loaded_methods));\nThen realised that it was Java's object  Java.use (facepalm) and I was assuming it to be Javascript's object. And finally used String() for conversion. \nsend(String(loaded_methods));\nClosing the issue. Apologies for such a silly mistake. . ",
    "Kriskras99": "Thank you that worked. ",
    "nadavshtern": "You are absolutely right !\nHowever trying to run the executable file (frida-core-example) on android arm64 platform result with the following error:\n\"./frida-core-example\": error: only position independent executables (PIE) are supported.\nAborted\nI'll try to reproduce it on frida v12.2.05. I've update to v12.2.05. same issue\nBuilding (according to frida-core-example.c)\n  /home/user/frida/build/ndk-android-arm64/bin/aarch64-linux-android-clang -fPIC -DANDROID -fPIE -ffunction-sections -fdata-sections -Wall -Os -pipe -g3 frida-core-example.c -o frida-core-example -L. -lfrida-core -llog -ldl -lm -llog -ldl -lm -ldl -ldl -llog -lm -Wl,--export-dynamic -fuse-ld=gold -Wl,--gc-sections,-z,noexecstack,-z,relro,-z,now -L/home/user/frida/build/frida-android-arm64/lib -L/home/user/frida/build/sdk-android-arm64/lib\nSame error message:\n \"./frida-core-example\": error: only position independent executables (PIE) are supported.\nAborted\nIn previous versions I remember  a script use used  to sort out the gory details of the PIE\\PIC flags. Could that be the reason for this issue ?. Seems like removing the -fPIC did the trick:\n /home/user/frida/build/ndk-android-arm64/bin/aarch64-linux-android-clang -DANDROID -fPIE -pie ...\nProbably need some fix in the generated comment how to compile at the header of frida-core-example. . Could it be that the string we are trying to print has Unicode chars in it ?\nOn Tue, Oct 30, 2018 at 11:52 AM xiphiasilver notifications@github.com\nwrote:\n\nHi @oleavr https://github.com/oleavr .\nIn case when specific method - java.io.BufferedReader.readline() - is\nhooked on Android 7 and above, following errors are came across :\nError: can't decode byte 0xc0 in position 17\n    at frida/node_modules/frida-java/lib/env.js:923\n    at frida/node_modules/frida-java/lib/class-factory.js:2505\n    at input:1\n    at [anon] (/script1.js:169)\n    at input:1\nThis is the Frida script I'm using :\nvar Buffer = Java.use(\"java.io.BufferedReader\");\nBuffer.readLine.overload().implementation = function(){\n     var tmpResult = this.readLine();\n          if (tmpResult != null){\n               send(\"        [!] read is requested : \" + tmpResult.toString());\n          }\n     return tmpResult;\n}\nAnother method to return unicode string work properly.\nI'm using on the latest Frida 12.2.18 and I tested on some other versions,\nbut the results were the same...\nOn Android 6.0.1 with same code, I could output the string without any\nproblems...\nDo you have any idea how to fix this?\nThank you for you help in advance.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/688, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ApTiqmhAE9L8alNbxEG4cCLj_yOaBInmks5uqCFxgaJpZM4YBjFc\n.\n. \n",
    "romainthomas": "It looks similar to https://github.com/frida/frida-core/issues/211. It looks like it has been resolved on Frida 12.4.2. ",
    "gaybc": "SOLVED \nthis code is OK\nrecv('invoke', handleMessage);\nfunction handleMessage(message) {\n    message = message['data'];\n    send('args' + message['app']);\n    recv('invoke', handleMessage);\n}\n. ",
    "tsug0d": "When running with-in frida hook, this appear in logcat:\nW/ActivityManager(  861): Launch timeout has expired, giving up wake lock!\nI still don't know why, but i found the solution is just reload the script, so the app will continue to work. ",
    "marcelocecin": "same error here\nrunning install\nrunning build\nrunning build_py\ncreating build\ncreating build/lib.macosx-10.6-intel-3.6\ncreating build/lib.macosx-10.6-intel-3.6/frida\ncopying frida/__init__.py -> build/lib.macosx-10.6-intel-3.6/frida\ncopying frida/core.py -> build/lib.macosx-10.6-intel-3.6/frida\nrunning build_ext\nquerying pypi for available prebuilds\nnetwork query failed\nlooking for prebuilt extension in home directory, i.e. /Users/cecin/frida-12.2.6-py3.6-macosx-10.6-intel.egg\nno prebuilt extension found in home directory\nerror: <urlopen error [SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:777)>. ",
    "s2339956": "\u279c  ~ sudo -H pip install frida\nCollecting frida\n  Downloading https://files.pythonhosted.org/packages/4e/a3/ccfaa42bf09a8d59a1e1d835c09c80149c58350f4ade2e23f0c5a45635a7/frida-12.2.8.tar.gz\nInstalling collected packages: frida\n  Running setup.py install for frida ... error\n    Complete output from command /Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 -u -c \"import setuptools, tokenize;file='/private/tmp/pip-install-hez2ivfk/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" install --record /private/tmp/pip-record-6u5f415c/install-record.txt --single-version-externally-managed --compile:\n    /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py:274: UserWarning: Unknown distribution option: 'long_description_content_type'\n      warnings.warn(msg)\n    running install\n    running build\n    running build_py\n    creating build\n    creating build/lib.macosx-10.9-x86_64-3.7\n    creating build/lib.macosx-10.9-x86_64-3.7/frida\n    copying frida/init.py -> build/lib.macosx-10.9-x86_64-3.7/frida\n    copying frida/core.py -> build/lib.macosx-10.9-x86_64-3.7/frida\n    running build_ext\n    querying pypi for available prebuilds\n    network query failed\n    looking for prebuilt extension in home directory, i.e. /var/root/frida-12.2.8-py3.7-macosx-10.6-intel.egg\n    no prebuilt extension found in home directory\n    error: \n----------------------------------------\n\nCommand \"/Library/Frameworks/Python.framework/Versions/3.7/bin/python3.7 -u -c \"import setuptools, tokenize;file='/private/tmp/pip-install-hez2ivfk/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" install --record /private/tmp/pip-record-6u5f415c/install-record.txt --single-version-externally-managed --compile\" failed with error code 1 in /private/tmp/pip-install-hez2ivfk/frida/\nSuch an error, how can I solve it?\n. https://stackoverflow.com/questions/42098126/mac-osx-python-ssl-sslerror-ssl-certificate-verify-failed-certificate-verify/42098127#42098127\nsolution\uff01\uff01\nFacing new problems\n\n\n. ",
    "manjunathscp": "Same error with Python 3.7 in MACOS MOJAVE\nCollecting frida-tools\nRequirement already satisfied: colorama<1.0.0,>=0.2.7 in /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages (from frida-tools) (0.4.1)\nRequirement already satisfied: prompt-toolkit<2.0.0,>=0.57 in /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages (from frida-tools) (1.0.15)\nRequirement already satisfied: pygments<3.0.0,>=2.0.2 in /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages (from frida-tools) (2.3.0)\nCollecting frida<13.0.0,>=12.1.0 (from frida-tools)\n  Using cached https://files.pythonhosted.org/packages/9b/19/c5f9206e87a214fbcb8d0934256d9b769a6c925711f502a5cee172236e0a/frida-12.2.26.tar.gz\nRequirement already satisfied: wcwidth in /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages (from prompt-toolkit<2.0.0,>=0.57->frida-tools) (0.1.7)\nRequirement already satisfied: six>=1.9.0 in ./Library/Python/3.7/lib/python/site-packages (from prompt-toolkit<2.0.0,>=0.57->frida-tools) (1.11.0)\nBuilding wheels for collected packages: frida\n  Running setup.py bdist_wheel for frida ... error\n  Complete output from command /Library/Frameworks/Python.framework/Versions/3.7/bin/python3 -u -c \"import setuptools, tokenize;file='/private/var/folders/m2/nn2d03jx7cv8t3byfy6ytckr0000gn/T/pip-install-irni6ph2/frida/setup.py';f=getattr(tokenize, 'open', open)(file);code=f.read().replace('\\r\\n', '\\n');f.close();exec(compile(code, file, 'exec'))\" bdist_wheel -d /private/var/folders/m2/nn2d03jx7cv8t3byfy6ytckr0000gn/T/pip-wheel-v7c33bu0 --python-tag cp37:\n  /Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/distutils/dist.py:274: UserWarning: Unknown distribution option: 'long_description_content_type'\n    warnings.warn(msg)\n  running bdist_wheel\n  running build\n  running build_py\n  creating build\n  creating build/lib.macosx-10.9-x86_64-3.7\n  creating build/lib.macosx-10.9-x86_64-3.7/frida\n  copying frida/init.py -> build/lib.macosx-10.9-x86_64-3.7/frida\n  copying frida/core.py -> build/lib.macosx-10.9-x86_64-3.7/frida\n  running build_ext\n  querying pypi for available prebuilds\n  network query failed\n  looking for prebuilt extension in home directory, i.e. /Users/manjunathscp/frida-12.2.26-py3.7-macosx-10.6-intel.egg\n  no prebuilt extension found in home directory\n  error: \n\nFailed building wheel for frida\n  Running setup.py clean for frida\nFailed to build frida\n. ",
    "andrewBatutin": "with\nios-deploy --bundle  Payload/FoodSniffer.app -W -d\nit works all good. ",
    "mfpp": "It worked, thanks.. ",
    "bc10000": "I am having the same issue for MacOS 10.13 (High Sierra).\n. ",
    "lhcn": "it's done. ",
    "E3V3A": "@InfoSecPS\nI suggest open two terminals. \nRun logcat in one while trying frida in the other.\n. @InfoSecPS \nyeah, you need to clear the logcat buffers with something like: \nbash\nalias logclr='logcat -c -b main -b radio -b system -b events'\nlogclr; logcat -b main -b system -b radio V:*\n<immediately run your thing>\nAlso, turn off radio on the phone, unless you're actually using it, since that buffer is very chatty.\n. ",
    "InfoSecPS": "I ran logcat then ran the same frida-trace execution. \n10-24 17:33:29.719  1810  2384 W Watchdog:     at com.android.server.ServiceThread.run(ServiceThread.java:46)\n10-24 17:33:29.719  1810  2384 W Watchdog: *** GOODBYE!\n10-24 17:33:29.719  1810  2384 I Process : Sending signal. PID: 1810 SIG: 9\n10-24 17:33:29.773   723   723 I lowmemorykiller: ActivityManager disconnected\n10-24 17:33:29.773   723   723 I lowmemorykiller: Closing Activity Manager data connection\n10-24 17:33:29.774  1004  1004 E         : eof\n10-24 17:33:29.774  1004  1004 E         : failed to read size\n10-24 17:33:29.774  1004  1004 I         : closing connection\n10-24 17:33:29.777  1034  1034 D fingerprintd: binder died\n10-24 17:33:29.777   719   764 E PerMgrSrv: GPS registered for modem has died\n10-24 17:33:29.777  1000  1000 W Sensors : sensorservice died [0xaeb17e00]\n10-24 17:33:29.777  1034  1034 V fingerprintd: nativeCloseHal()\n10-24 17:33:29.777   719   764 D PerMgrSrv: modem num voters is 3\n10-24 17:33:29.777   719   764 D PerMgrSrv: modem state: is on-line, remove client GPS\n10-24 17:33:29.777  2264  2280 W Sensors : sensorservice died [0x9c9a1440]\n10-24 17:33:29.777  1000  1000 W AudioFlinger: power manager service died !!!\n10-24 17:33:29.777  4874  4874 E SensorManager: Exception dispatching input event.\n10-24 17:33:29.777  1000  1000 W AudioFlinger: power manager service died !!!\n10-24 17:33:29.777  1000  1000 W AudioFlinger: power manager service died !!!\n10-24 17:33:29.777  5343  5356 W Sensors : sensorservice died [0x9c9a1680]\n10-24 17:33:29.777  2406  3075 W Sensors : sensorservice died [0x9c9bd500]\n10-24 17:33:29.777  2393  2405 W Binder  : Binder call failed.\n10-24 17:33:29.777  2393  2405 W Binder  : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.777  4874  4874 D AndroidRuntime: Shutting down VM\n10-24 17:33:29.777  2406  3101 E WifiScanner: Channel connection lost\n10-24 17:33:29.777  2970  2994 W Sensors : sensorservice died [0x9e18cc80]\n10-24 17:33:29.777   724   724 I ServiceManager: service 'telecom' died\n10-24 17:33:29.777   724   724 I ServiceManager: service 'audio' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'DockObserver' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'midi' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'usb' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'serial' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'hardware_properties' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'jobscheduler' died\n10-24 17:33:29.778  4874  4874 E MotoDisplay: uncaughtException! \n10-24 17:33:29.778  4874  4874 E MotoDisplay: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.778   724   724 I ServiceManager: service 'soundtrigger' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'backup' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'appwidget' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'voiceinteraction' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'diskstats' died\n10-24 17:33:29.778  2393  2405 W Binder  : Binder call failed.\n10-24 17:33:29.778  2393  2405 W Binder  : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.778   724   724 I ServiceManager: service 'samplingprofiler' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'network_time_update_service' died\n10-24 17:33:29.778  4874  4886 W Sensors : sensorservice died [0x9c9e1cc0]\n10-24 17:33:29.778  7683  7694 W Sensors : sensorservice died [0x84eba680]\n10-24 17:33:29.778   724   724 I ServiceManager: service 'commontime_management' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'dreams' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'shortcut' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'assetatlas' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'graphicsstats' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'launcherapps' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'print' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'restrictions' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'media_session' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'media_router' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'trust' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'fingerprint' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'moto_pers_data_block' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'media_projection' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'imms' died\n10-24 17:33:29.778  4874  4874 I MotoDisplay: Releasing wakelock: MotoDisplayWakeLock\n10-24 17:33:29.778   724   724 I ServiceManager: service 'bluetooth_manager' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'connectivity_metrics_logger' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'connmetrics' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'netd_listener' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'contexthub_service' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'otadexopt' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'user' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'activity' died\n10-24 17:33:29.778  2393  2405 W Binder  : Binder call failed.\n10-24 17:33:29.778  2393  2405 W Binder  : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.778   724   724 I ServiceManager: service 'procstats' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'meminfo' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'gfxinfo' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'dbinfo' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'cpuinfo' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'permission' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'processinfo' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'sensorservice' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'package' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'com.qualcomm.location.izat.IzatService' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'battery' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'dropbox' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'usagestats' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'webviewupdate' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'scheduling_policy' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'telephony.registry' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'media.camera.proxy' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'content' died\n10-24 17:33:29.778   724   724 I ServiceManager: service 'account' died\n10-24 17:33:29.778  2393  2405 W Binder  : Binder call failed.\n10-24 17:33:29.778  2393  2405 W Binder  : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.778   724   724 I ServiceManager: service 'vibrator' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'consumer_ir' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'alarm' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'window' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'input' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'vrmanager' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'wallpaper' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'pinner' died\n10-24 17:33:29.779  2434  2448 W Sensors : sensorservice died [0x98dfe300]\n10-24 17:33:29.779   724   724 I ServiceManager: service 'input_method' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'accessibility' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'mount' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'uimode' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'lock_settings' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'persistent_data_block' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'deviceidle' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'device_policy' died\n10-24 17:33:29.779  1012  1352 W Sensors : sensorservice died [0xa0df2000]\n10-24 17:33:29.779   724   724 I ServiceManager: service 'statusbar' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'clipboard' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'network_management' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'textservices' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'network_score' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'netstats' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'netpolicy' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'wifip2p' died\n10-24 17:33:29.779   725   789 W DisplayPanel: PanelModeService remote (panel_native) died [0xb33665c0]\n10-24 17:33:29.779   724   724 I ServiceManager: service 'wifi' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'wifiscanner' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'rttmanager' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'ethernet' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'connectivity' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'servicediscovery' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'updatelock' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'recovery' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'batterystats' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'appops' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'power' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'panel_native' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'panel' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'display' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'notification' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'devicestoragemonitor' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'location' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'country_detector' died\n10-24 17:33:29.779   724   724 I ServiceManager: service 'search' died\n10-24 17:33:29.779  1034  2216 E fpce_extension: Connection lost\n10-24 17:33:29.779  2791  2852 E fingerprints_service: thread exiting with error 1\n10-24 17:33:29.780  2791  2852 D fingerprints_service: jint releaseNative(JNIEnv *, jobject)\n10-24 17:33:29.782   725   850 I SFPerfTracer:      triggers: (rate: 0:0) (0 sw vsyncs) (0 skipped) (4:2923 vsyncs) (6:3062)\n10-24 17:33:29.782  2406  2406 D AndroidRuntime: Shutting down VM\n10-24 17:33:29.783  2406  2406 E BaseUncaughtHandler: Hit an exception while processing the UncaughtExceptionHandler. Original exception: \n10-24 17:33:29.783  2406  2406 E BaseUncaughtHandler: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.783   725   725 D SurfaceFlinger: Set power mode=2, type=0 flinger=0xb5532000\n10-24 17:33:29.783   725   725 I SDM     : HWCDisplay::SetPowerMode: display = 0, mode = 2\n10-24 17:33:29.783   725   725 I SDM     : DisplayBase::SetDisplayState: Set state = 1, display 0\n10-24 17:33:29.784  2406  2406 E BaseUncaughtHandler: Hit an exception while processing the UncaughtExceptionHandler. Original exception: \n10-24 17:33:29.784  2406  2406 E BaseUncaughtHandler: DeadSystemException: The system died; earlier logs will point to the root cause\n--------- beginning of crash\n10-24 17:33:29.784  2406  2406 E AndroidRuntime: FATAL EXCEPTION: main\n10-24 17:33:29.784  2406  2406 E AndroidRuntime: Process: com.google.android.gms.persistent, PID: 2406\n10-24 17:33:29.784  2406  2406 E AndroidRuntime: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.784  2406  3215 W NearbyDiscovery: Runnable[stopIfNotScheduled] ran for 01:02.258 [CONTEXT service_id=49 ]\n10-24 17:33:29.784  2406  2406 I Process : Sending signal. PID: 2406 SIG: 9\n10-24 17:33:29.810  2970  2970 W RocketImpressions: ClearcutLogger connection suspended: 1\n10-24 17:33:29.811  4150  4150 D AndroidRuntime: Shutting down VM\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine: [1] JibeService.uncaughtException: Uncaught exception in primary thread Thread[main,5,main]: android.os.DeadSystemException\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1323)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.app.ContextImpl.registerReceiver(ContextImpl.java:1282)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.app.ContextImpl.registerReceiver(ContextImpl.java:1276)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.content.ContextWrapper.registerReceiver(ContextWrapper.java:586)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    iro.a(SourceFile:20)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    iuf.a(SourceFile:292)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    itp.a(SourceFile:27)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    iun.onConnectionSuspended(SourceFile:64)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    ixa.onConnectionSuspended(SourceFile:7)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    izn.a(SourceFile:3)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    iya.handleMessage(SourceFile:32)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.os.Handler.dispatchMessage(Handler.java:102)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.os.Looper.loop(Looper.java:154)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    android.app.ActivityThread.main(ActivityThread.java:6165)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    java.lang.reflect.Method.invoke(Native Method)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:888)\n10-24 17:33:29.812  4150  4150 E BugleRcsEngine:    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:778)\n10-24 17:33:29.814  8016  8045 E Isotope : UID: [10140]  PID: [8016] ProcessInitializer : Cannot redirect the user.\n10-24 17:33:29.814  8016  8045 E Isotope : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.823  8016  8045 E Isotope : UID: [10140]  PID: [8016] ProcessInitializer : Caught an exception cancelling notifications.\n10-24 17:33:29.823  8016  8045 E Isotope : DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.823  8016  8045 E Isotope : UID: [10140]  PID: [8016] ProcessInitializer : Supervisor crashed, forwarding it to the OS.\n10-24 17:33:29.823  8016  8045 E AndroidRuntime: FATAL EXCEPTION: GmsConnection\n10-24 17:33:29.823  8016  8045 E AndroidRuntime: Process: com.google.android.instantapps.supervisor, PID: 8016\n10-24 17:33:29.823  8016  8045 E AndroidRuntime: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:29.824  8016  8045 I Process : Sending signal. PID: 8016 SIG: 9\n10-24 17:33:29.831  1034  1034 D QSEECOMAPI: QSEECom_dealloc_memory \n10-24 17:33:29.831  1034  1034 D QSEECOMAPI: QSEECom_shutdown_app, app_id = 196611\n10-24 17:33:30.197   999  8282 E Zygote  : Exit zygote because system server (1810) has terminated\n10-24 17:33:30.286  8363  8368 D libEGL  : loaded /vendor/lib/egl/libEGL_adreno.so\n10-24 17:33:30.344  8363  8368 D libEGL  : loaded /vendor/lib/egl/libGLESv1_CM_adreno.so\n10-24 17:33:30.356  8363  8368 D libEGL  : loaded /vendor/lib/egl/libGLESv2_adreno.so\n10-24 17:33:30.379  8363  8368 I Adreno  : QUALCOMM build                   : a9083cf, Iaf618d42e3\n10-24 17:33:30.379  8363  8368 I Adreno  : Build Date                       : 03/14/17\n10-24 17:33:30.379  8363  8368 I Adreno  : OpenGL ES Shader Compiler Version: XE031.09.00.04\n10-24 17:33:30.379  8363  8368 I Adreno  : Local Branch                     : \n10-24 17:33:30.379  8363  8368 I Adreno  : Remote Branch                    : \n10-24 17:33:30.379  8363  8368 I Adreno  : Remote Branch                    : \n10-24 17:33:30.379  8363  8368 I Adreno  : Reconstruct Branch               : \n10-24 17:33:30.390  8363  8368 D BootAnimation: Found solFilePath = sol.png in bootanimation.zip\n10-24 17:33:30.391  8363  8368 D BootAnimation: Loading and displaying solFilePath = sol.png\n10-24 17:33:30.477  8363  8368 D BootAnimation: Parsed Video[0] minPlays=1 repeat=0\n10-24 17:33:30.494  1000  1375 W AudioFlinger: Thread AudioOut_D cannot connect to the power manager service\n10-24 17:33:30.494  1000  1380 W AudioFlinger: Thread AudioOut_1D cannot connect to the power manager service\n10-24 17:33:30.494  1000  1378 W AudioFlinger: Thread AudioOut_15 cannot connect to the power manager service\n10-24 17:33:30.494  1000  1375 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:30.494  1000  1380 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:30.494  1000  1375 W AudioFlinger: Thread AudioOut_D cannot connect to the power manager service\n10-24 17:33:30.494  1000  1375 E AudioFlinger: no wake lock to update, but system ready!\n10-24 17:33:30.495  1000  1378 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:30.495  1000  1380 W AudioFlinger: Thread AudioOut_1D cannot connect to the power manager service\n10-24 17:33:30.495  1000  1380 E AudioFlinger: no wake lock to update, but system ready!\n10-24 17:33:30.495  1000  1378 W AudioFlinger: Thread AudioOut_15 cannot connect to the power manager service\n10-24 17:33:30.495  1000  1378 E AudioFlinger: no wake lock to update, but system ready!\n10-24 17:33:30.497  1009  8370 D NuPlayer: onSetVideoSurface(0xa811e000, no video decoder)\n10-24 17:33:30.500  1002  1002 I SELinux : avc:  received policyload notice (seqno=2)\n10-24 17:33:30.500  1002  1002 I SELinux : avc:  received policyload notice (seqno=3)\n10-24 17:33:30.542  1009  8370 D NuPlayerDriver: notifyListener_l(0xae2aac60), (5, 1080, 1920), loop setting(0, 0)\n10-24 17:33:30.543  1008  2079 D MediaBufferGroup: creating MemoryDealer\n10-24 17:33:30.543  1009  8370 D NuPlayerDriver: notifyListener_l(0xae2aac60), (1, 0, 0), loop setting(0, 0)\n10-24 17:33:30.545  1009  2071 D NuPlayerDriver: start(0xae2aac60), state is 4, eos is 0\n10-24 17:33:30.545  1009  8370 I GenericSource: start\n10-24 17:33:30.546  8363  8368 V BootAnimation: playing 1_powerup_2017_main.mp4 \n10-24 17:33:30.565  1009  8373 I MediaCodec: (0xacabbc80) init name(video/avc) isType(1) encoder(0)\n10-24 17:33:30.566  1009  8375 I MediaPlayerService: MediaPlayerService::getOMX\n10-24 17:33:30.567  1009  8375 I OMXClient: MuxOMX ctor\n10-24 17:33:30.567  1009  8376 I MediaCodec: (0xabd13180) init name(audio/mp4a-latm) isType(1) encoder(0)\n10-24 17:33:30.568  1006  1493 I OMXMaster: makeComponentInstance(OMX.qcom.video.decoder.avc) in mediacodec process\n10-24 17:33:30.569  1006  1493 I OMX-VDEC-1080P: Video slvp perflock acquired\n10-24 17:33:30.569   569  2699 E ANDR-PERF-MPCTL: Invalid profile no. 0, total profiles 0 only\n10-24 17:33:30.570  1009  8377 I MediaPlayerService: MediaPlayerService::getOMX\n10-24 17:33:30.571  1009  8377 I OMXClient: MuxOMX ctor\n10-24 17:33:30.688  1006  1493 I OMX-VDEC-1080P: component_init: OMX.qcom.video.decoder.avc : fd=7\n10-24 17:33:30.696  1006  1493 I OMX-VDEC-1080P: omx_vdec::component_init() success : fd=7\n10-24 17:33:30.696  1006  1305 I OMXMaster: makeComponentInstance(OMX.google.aac.decoder) in mediacodec process\n10-24 17:33:30.696  1009  8374 I MediaCodec: (0xacabbc80) Component Allocated (OMX.qcom.video.decoder.avc)\n10-24 17:33:30.698  1009  8373 I MediaCodec: (0xacabbc80) configure surface(0xa811e000) crypto(0x0) flags(0)\n10-24 17:33:30.698  1009  8373 D MediaCodec: (0xacabbc80) configure format: AMessage(what = 0x00000000) = {\n10-24 17:33:30.698  1009  8373 D MediaCodec:       string mime = \"video/avc\"\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int64_t durationUs = 11000000\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t track-id = 1\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t width = 1080\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t height = 1920\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t color-range = 2\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t color-standard = 1\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t color-transfer = 3\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t max-input-size = 387434\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t frame-rate = 24\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t profile = 2\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t level = 2048\n10-24 17:33:30.698  1009  8373 D MediaCodec:       Buffer csd-0 = {\n10-24 17:33:30.698  1009  8373 D MediaCodec:         00000000:  00 00 00 01 67 4d 40 28  db 01 10 0f 1e 5f 01 6a  ....gM@(....._.j\n10-24 17:33:30.698  1009  8373 D MediaCodec:         00000010:  02 02 02 80 00 00 03 00  80 01 5f 90 07 8c 19 70  .........._....p\n10-24 17:33:30.698  1009  8373 D MediaCodec:       }\n10-24 17:33:30.698  1009  8373 D MediaCodec:       Buffer csd-1 = {\n10-24 17:33:30.698  1009  8373 D MediaCodec:         00000000:  00 00 00 01 68 ea cf 20                           ....h.. \n10-24 17:33:30.698  1009  8373 D MediaCodec:       }\n10-24 17:33:30.698  1009  8373 D MediaCodec:       int32_t priority = 0\n10-24 17:33:30.698  1009  8373 D MediaCodec:       float operating-rate = 24.000000\n10-24 17:33:30.698  1009  8373 D MediaCodec:     }\n10-24 17:33:30.698  1009  8374 I MediaCodec: [OMX.qcom.video.decoder.avc] setting surface generation to 1033219\n10-24 17:33:30.699  1009  8377 I MediaCodec: (0xabd13180) Component Allocated (OMX.google.aac.decoder)\n10-24 17:33:30.699  1009  8376 I MediaCodec: (0xabd13180) configure surface(0x0) crypto(0x0) flags(0)\n10-24 17:33:30.699  1009  8376 D MediaCodec: (0xabd13180) configure format: AMessage(what = 0x00000000) = {\n10-24 17:33:30.699  1009  8376 D MediaCodec:       string mime = \"audio/mp4a-latm\"\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int64_t durationUs = 11008000\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t track-id = 2\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t channel-count = 2\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t sample-rate = 48000\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t aac-profile = 2\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t max-input-size = 882\n10-24 17:33:30.699  1009  8376 D MediaCodec:       Buffer csd-0 = {\n10-24 17:33:30.699  1009  8376 D MediaCodec:         00000000:  11 90                                             ..\n10-24 17:33:30.699  1009  8376 D MediaCodec:       }\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t profile = 2\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t bitrate = 140007\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t max-bitrate = 209296\n10-24 17:33:30.699  1009  8376 D MediaCodec:       int32_t priority = 0\n10-24 17:33:30.699  1009  8376 D MediaCodec:     }\n10-24 17:33:30.700  1006  1493 E OMXNodeInstance: setConfig(3ee0044:google.aac.decoder, ConfigPriority(0x6f800002)) ERROR: Undefined(0x80001001)\n10-24 17:33:30.700  1009  8377 I ACodec  : codec does not support config priority (err -2147483648)\n10-24 17:33:30.700  1006  1493 E OMX-VDEC-1080P: Extension: OMX.google.android.index.storeANWBufferInMetadata not implemented\n10-24 17:33:30.700  1009  8375 I ACodec  : DRC Mode: Dynamic Buffer Mode\n10-24 17:33:30.700  1009  8375 I ExtendedACodec: setupVideoDecoder()\n10-24 17:33:30.700  1009  8375 I ACodec  : [OMX.qcom.video.decoder.avc] setupVideoDecoder Width Height (1080x1920)\n10-24 17:33:30.700  1009  8375 I ACodec  : mime (video/avc) compressionFormat (7)\n10-24 17:33:30.702  1006  1494 E OMXNodeInstance: setConfig(3ee0044:google.aac.decoder, ConfigPriority(0x6f800002)) ERROR: Undefined(0x80001001)\n10-24 17:33:30.702  1009  8377 I ACodec  : codec does not support config priority (err -2147483648)\n10-24 17:33:30.705  1009  8377 I MediaCodec: MediaCodec will operate in async mode\n10-24 17:33:30.705  1009  8376 I MediaCodec: (0xabd13180) start\n10-24 17:33:30.707  1006  1006 E OMX-VDEC-1080P: Extension: OMX.google.android.index.storeANWBufferInMetadata not implemented\n10-24 17:33:30.707  1006  1006 E OMX-VDEC-1080P: Extension: OMX.google.android.index.configureVideoTunnelMode not implemented\n10-24 17:33:30.707  1006  1006 E OMX-VDEC-1080P: Extension: OMX.google.android.index.useAndroidNativeBuffer is supported\n10-24 17:33:30.707  1009  8375 I ExtendedACodec: Decoder will be in frame by frame mode\n10-24 17:33:30.709  1009  8377 I MediaCodec: (0xabd13180) input buffers allocated\n10-24 17:33:30.710  1009  8377 I MediaCodec: (0xabd13180) numBuffers (4)\n10-24 17:33:30.710  1009  8377 I MediaCodec: (0xabd13180) output buffers allocated\n10-24 17:33:30.710  1009  8377 I MediaCodec: (0xabd13180) numBuffers (4)\n10-24 17:33:30.711  1006  1006 E OMX-VDEC-1080P: Does not handle dataspace request\n10-24 17:33:30.711  1006  1006 E OMXNodeInstance: getConfig(3ee0043:qcom.decoder.avc, ??(0x7f000062)) ERROR: UnsupportedSetting(0x80001019)\n10-24 17:33:30.711  1009  8374 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:30.712  1009  8374 I MediaCodec: MediaCodec will operate in async mode\n10-24 17:33:30.712  1009  8373 I MediaCodec: (0xacabbc80) start\n10-24 17:33:30.712  1006  8386 I SoftAAC2: Reconfiguring decoder: 0->48000 Hz, 0->2 channels\n10-24 17:33:30.716  1009  8374 I MediaCodec: (0xacabbc80) input buffers allocated\n10-24 17:33:30.716  1009  8374 I MediaCodec: (0xacabbc80) numBuffers (4)\n10-24 17:33:30.717  1009  8375 D SurfaceUtils: set up nativeWindow 0xa811e008 for 1080x1920, color 0x7fa30c06, rotation 0, usage 0x2002900\n10-24 17:33:30.719  1009  8377 I MediaCodec: (0xabd13180) output buffers allocated\n10-24 17:33:30.719  1009  8377 I MediaCodec: (0xabd13180) numBuffers (4)\n10-24 17:33:30.722  1009  8377 D MediaCodec: (0xabd13180) [OMX.google.aac.decoder] output format changed to: AMessage(what = 0x00000000) = {\n10-24 17:33:30.722  1009  8377 D MediaCodec:       string mime = \"audio/raw\"\n10-24 17:33:30.722  1009  8377 D MediaCodec:       int32_t channel-count = 2\n10-24 17:33:30.722  1009  8377 D MediaCodec:       int32_t sample-rate = 48000\n10-24 17:33:30.722  1009  8377 D MediaCodec:       int32_t pcm-encoding = 2\n10-24 17:33:30.722  1009  8377 D MediaCodec:       int32_t bit-width = 16\n10-24 17:33:30.722  1009  8377 D MediaCodec:     }\n10-24 17:33:30.726  1009  8372 D AudioTrack: Client defaulted notificationFrames to 12480 for frameCount 24960\n10-24 17:33:30.727  1000  1757 D APM_AudioPolicyManager: startOutput() output 21, stream 3, session 41\n10-24 17:33:30.727  1000  1378 W AudioFlinger: Thread AudioOut_15 cannot connect to the power manager service\n10-24 17:33:30.727  1000  1378 E AudioFlinger: no wake lock to update, but system ready!\n10-24 17:33:30.728  1009  8370 D NuPlayerDriver: notifyListener_l(0xae2aac60), (6, 0, 0), loop setting(0, 0)\n10-24 17:33:30.732  1009  8374 I MediaCodec: (0xacabbc80) output buffers allocated\n10-24 17:33:30.732  1009  8374 I MediaCodec: (0xacabbc80) numBuffers (22)\n10-24 17:33:30.732  1009  8373 I MediaCodec: (0xacabbc80) setParameters\n10-24 17:33:30.738  1000  1378 V msm8974_platform: platform_get_output_snd_device: enter: output devices(0x2)\n10-24 17:33:30.738  1000  1378 V msm8974_platform: platform_get_output_snd_device: exit: snd_device(speaker)\n10-24 17:33:30.738  1000  1378 V msm8974_platform: platform_send_audio_calibration: sending audio calibration for snd_device(2) acdb_id(14)\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_audio_cal, acdb_id = 14, path = 0, app id = 0x11130, sample rate = 48000\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_asm_topology\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_STREAM_TOPOLOGY_ID\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_adm_topology\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_COMMON_TOPOLOGY_ID\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_audtable\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_COMMON_TABLE_SIZE\n10-24 17:33:30.738  1000  1378 D         : ACDBFILE_MGR:Read the devices count as zero, please check the acdb file\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_COMMON_TABLE\n10-24 17:33:30.738  1000  1378 D         : ACDBFILE_MGR:Read the devices count as zero, please check the acdb file\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> AUDIO_SET_AUDPROC_CAL\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_audvoltable\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_GAIN_DEP_STEP_TABLE, vol index 0\n10-24 17:33:30.738  1000  1378 D         : ACDBFILE_MGR:Read the devices count as zero, please check the acdb file\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> AUDIO_SET_VOL_CAL cal type = 12\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_audstrmtable\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AUDPROC_STREAM_TABLE_V2\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> audstrm_cal->cal_type.cal_data.cal_size = 16\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_afe_topology\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AFE_TOPOLOGY_ID\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> GET_AFE_TOPOLOGY_ID for adcd_id 14, Topology Id 112fc\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_afe_cal\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_CMD_GET_AFE_COMMON_TABLE\n10-24 17:33:30.738  1000  1378 D         : ACDBFILE_MGR:Read the devices count as zero, please check the acdb file\n10-24 17:33:30.738  1000  1378 D         : Failed to fetch the lookup information of the device 0000000E \n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> AUDIO_SET_AFE_CAL\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> send_hw_delay : acdb_id = 14 path = 0\n10-24 17:33:30.738  1000  1378 D ACDB-LOADER: ACDB -> ACDB_AVSYNC_INFO: ACDB_CMD_GET_DEVICE_PROPERTY\n10-24 17:33:30.738  1000  1378 I audio_mot_sp: audio_extn_mot_spkr_send_cal: OSPL spkr calibration data [242359, 16] temperature [27], mixer ctrl: OSPL Rx temp_cal\n10-24 17:33:30.760  1006  1305 E OMX-VDEC-1080P: Does not handle dataspace request\n10-24 17:33:30.760  1006  1305 E OMXNodeInstance: getConfig(3ee0043:qcom.decoder.avc, ??(0x7f000062)) ERROR: UnsupportedSetting(0x80001019)\n10-24 17:33:30.772  1009  8375 D SurfaceUtils: set up nativeWindow 0xa811e008 for 1088x1920, color 0x7fa30c06, rotation 0, usage 0x2002900\n10-24 17:33:30.782  1009  8374 I MediaCodec: (0xacabbc80) output buffers allocated\n10-24 17:33:30.782  1009  8374 I MediaCodec: (0xacabbc80) numBuffers (10)\n10-24 17:33:30.793  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.796  1006  1006 E OMX-VDEC-1080P: Does not handle dataspace request\n10-24 17:33:30.797  1006  1006 E OMXNodeInstance: getConfig(3ee0043:qcom.decoder.avc, ??(0x7f000062)) ERROR: UnsupportedSetting(0x80001019)\n10-24 17:33:30.798  1006  1305 E OMX-VDEC-1080P: Does not handle dataspace request\n10-24 17:33:30.798  1006  1305 E OMXNodeInstance: getConfig(3ee0043:qcom.decoder.avc, ??(0x7f000062)) ERROR: UnsupportedSetting(0x80001019)\n10-24 17:33:30.804  1009  8374 D MediaCodec: (0xacabbc80) [OMX.qcom.video.decoder.avc] output format changed to: AMessage(what = 0x00000000) = {\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t color-range = 2\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t color-standard = 1\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t color-transfer = 3\n10-24 17:33:30.804  1009  8374 D MediaCodec:       string mime = \"video/raw\"\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t stride = 1152\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t slice-height = 1920\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t color-format = 2141391878\n10-24 17:33:30.804  1009  8374 D MediaCodec:       Rect crop(0, 0, 1079, 1919)\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t android._dataspace = 260\n10-24 17:33:30.804  1009  8374 D MediaCodec:       Buffer hdr-static-info = {\n10-24 17:33:30.804  1009  8374 D MediaCodec:         00000000:  00 00 00 00 00 00 00 00  00 00 00 00 00 00 00 00  ................\n10-24 17:33:30.804  1009  8374 D MediaCodec:         00000010:  00 00 00 00 00 00 00 00  00                       .........\n10-24 17:33:30.804  1009  8374 D MediaCodec:       }\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t width = 1088\n10-24 17:33:30.804  1009  8374 D MediaCodec:       int32_t height = 1920\n10-24 17:33:30.804  1009  8374 D MediaCodec:     }\n10-24 17:33:30.806  1009  8370 D NuPlayerDriver: notifyListener_l(0xae2aac60), (5, 1080, 1920), loop setting(0, 0)\n10-24 17:33:30.806  1009  8370 D NuPlayerDriver: notifyListener_l(0xae2aac60), (200, 3, 0), loop setting(0, 0)\n10-24 17:33:30.807  8363  8367 W MediaPlayer: info/warning (3, 0)\n10-24 17:33:30.809  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.812  1009  8372 I NuPlayerRenderer: possible video time jump of 0ms (41666 : 0) or uninitialized media clock, retrying in 41ms\n10-24 17:33:30.828  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.830  1000  1378 D audio_hw_primary: enable_snd_device: snd_device(2: speaker)\n10-24 17:33:30.831  1000  1378 D audio_hw_primary: enable_audio_route: apply and update mixer path: deep-buffer-playback speaker\n10-24 17:33:30.831  1000  1378 I audio_hw_utils: Set Audio Stream 0 App Type Cfg: app_type 69936 (DEFAULT), acdb_dev_id 14, sample_rate 48000\n10-24 17:33:30.847  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.853  1009  8372 I NuPlayerRenderer: possible video time jump of 0ms (41666 : 0) or uninitialized media clock, retrying in 41ms\n10-24 17:33:30.867  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.886  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.895  1009  8372 I NuPlayerRenderer: possible video time jump of 0ms (41666 : 0) or uninitialized media clock, retrying in 41ms\n10-24 17:33:30.904  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:30.937  1009  8372 I NuPlayerRenderer: possible video time jump of 0ms (41666 : 0) or uninitialized media clock, retrying in 41ms\n10-24 17:33:30.957  1000  1378 D AudioFlinger: mixer(0xada03ac0) throttle end: throttle time(49)\n10-24 17:33:31.002  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.022  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.040  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.059  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.088  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.139  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.172  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.222  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.255  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.305  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.339  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.390  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.422  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.443  1179  1179 I MSM-irqbalance: Decided to move IRQ18 from CPU0 [P:0] to CPU5 [P:1] (banned)\n10-24 17:33:31.443  1179  1179 I MSM-irqbalance: Decided to move IRQ18 from CPU3 [P:0] to CPU4 [P:1] (banned)\n10-24 17:33:31.444  1179  1179 I MSM-irqbalance: Decided to move IRQ18 from CPU1 [P:0] to CPU6 [P:1] (banned)\n10-24 17:33:31.444  1179  1179 I MSM-irqbalance: Decided to move IRQ18 from CPU2 [P:0] to CPU7 [P:1] (banned)\n10-24 17:33:31.473  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.506  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.556  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.589  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.643  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.676  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.726  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.760  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.810  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.843  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.893  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.926  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:31.976  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.010  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.060  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.094  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.144  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.177  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.228  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.261  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.295  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.345  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.378  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.428  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.461  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.512  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.545  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.595  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.629  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.679  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.712  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.762  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.796  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.846  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.879  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.930  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:32.963  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.013  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.047  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.097  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.131  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.181  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.214  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.264  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.297  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.347  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.381  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.403   725   725 I DisplayDevice: Built-in Screen: video On\n10-24 17:33:33.404   725   725 I DisplayPanel: failed to get service (panel_native)\n10-24 17:33:33.404   725   725 E DisplayPanel: failed to reconnect PanelModeService\n10-24 17:33:33.431  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.465  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.496  1000  1380 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:33.502  1000  1375 W BatteryNotifier: batterystats service unavailable!\n10-24 17:33:33.515  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.548  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.598  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.632  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.681  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.716  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.766  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.799  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.849  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.883  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.933  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:33.966  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.017  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.050  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.100  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.133  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.183  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.217  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.267  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.301  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.351  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.384  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.434  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.468  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.518  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.552  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.602  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.635  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.685  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.719  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.769  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.803  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.813  2970  2970 D AndroidRuntime: Shutting down VM\n10-24 17:33:34.815  2970  2970 E BaseUncaughtHandler: Hit an exception while processing the UncaughtExceptionHandler. Original exception: \n10-24 17:33:34.815  2970  2970 E BaseUncaughtHandler: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:34.815  2970  2970 E BaseUncaughtHandler: Hit an exception while processing the UncaughtExceptionHandler. Original exception: \n10-24 17:33:34.815  2970  2970 E BaseUncaughtHandler: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:34.815  2970  2970 E AndroidRuntime: FATAL EXCEPTION: main\n10-24 17:33:34.815  2970  2970 E AndroidRuntime: Process: com.google.android.gms, PID: 2970\n10-24 17:33:34.815  2970  2970 E AndroidRuntime: DeadSystemException: The system died; earlier logs will point to the root cause\n10-24 17:33:34.816  1014  1014 I cnss-daemon: RTM_NEWNEIGH message received: 28\n10-24 17:33:34.816  2970  2970 I Process : Sending signal. PID: 2970 SIG: 9\n10-24 17:33:34.817  1014  1014 I cnss-daemon: NDA_DST received: fe80::2620:c7ff:fe5a:ce11 ul: 33022\n10-24 17:33:34.817  1014  1014 I cnss-daemon: NDA_LLADDR received\n10-24 17:33:34.853  1006  8383 E DisplayMetaData: Unknown paramType 2\n10-24 17:33:34.886  1006  8383 E DisplayMetaData: Unknown paramType 2\nI hope that helps out. The Unknown paramType 2 goes on and on for a while with the device showing as being not responsive with a black screen. Restart is the only option. . ",
    "0n1y3nd": "3ks\n. ",
    "h3xstream": "I'm reading from unofficial source that Frida only works on really old images (Android 6 and below). I'm not sure if this is the case.. @oleavr OK I'll test with Nexus 5X with API 26 and 27.. API 27 is working \ud83d\udc4d\nThanks. @jkryanchou The stack trace I had was a compatibility issue with Frida and API 28 images.. ",
    "jkryanchou": "@h3xstream Could you modify script.js without restarting app.?. @h3xstream Yeah, I upgrade my Android version from 5.5.1 to 6.1. It works well.. Me too.. With same issue.. While I rehook by frida -l script.js -f package.name on restarting app. It works as i expected. . same issue like yours. Is there any solution on it? My android device version is Android 6.0. @oleavr The original script.js as below, and it works as I expected.\n```\n'use strict';\nif (Java.available) {\nJava.perform(function() {\n    var FooClass = Java.use(\"com.package.name.f\");\n    var foofunc = FooClass.a.overload(\"okhttp3.m\");\n    foofunc.implementation = function (mVar) {\n      console.log(\"mVar -> \", mVar);\n      return this.a(mVar);\n    }\n  });\n} else {\n   send(\"Java not available in this process\");\n}\n```\nWhile when I modify the script.js to \n```\n'use strict';\nif (Java.available) {\nJava.perform(function() {\n    var FooClass = Java.use(\"com.package.name.f\");\n    var foofunc = FooClass.a.overload(\"okhttp3.m\");\n    foofunc.implementation = function (mVar) {\n      console.log(\"mVar -> foo\", mVar);\n      return this.a(mVar);\n    }\n  });\n} else {\n   send(\"Java not available in this process\");\n}\n```\nJust add foo string in console.log() output, It occurs the errors like I paste above. cannot re-hook the method again.. @oleavr I am testing on OnePlus2(ONE A2001) on Android 5.1.1. Is the Android version or ROM could not be supported by frida-java? While I restart hook it could work as I expected. cannot hook by modifying script.js on REPL mode.. @oleavr OK, Got it. Thanks. I would upgrade my Android version to 8.1.0. If I get deep insight into frida. I wish I could make some PRs for it.. Finnaly found the solution. Upgrade my Android to 8.x it works.. ",
    "stevepoland85": "Try adding 1 to addr2. Yes I mean that. But addr2.add(1) seems to be the Frida idiom. I'm guessing you're on ARM and trying to hook a thumb address. . Your ANDROID_NDK_ROOT env variable isn't set to a supported NDK. Download 17b (17c worked for me too) and set ANDROID_NDK_ROOT to point to it.\nNot a bug with frida. . * What is your error? \n What happens when you run that code? \n What have you tried? \n* Did you add frida loads and resign the application? . > Your frida-server executable is probably in a sandboxed location. Move it to /usr/sbin for example.\nThat fixed it. Thanks. . Try adding a return to your Java readInt, i.e., return this.readInt(). \nWorked fine for me on:\n\nfrida -U <some app>\nPaste in your code\nI see a bunch of messages and it crashes (Probably due to no return)\nmessage: {'type': 'send', 'payload': 'readInt.'} data: None\nI try with the return, and see a bunch of messages and no crash.\n. Nexus 5x Android 6.0 Rooted | Frida 12.2.22 | com.google.android.deskclock\n. Does Frida work on anybody's Android 9 device? I'm not sure Frida's been updated for Android 9. . You can't do it this way. You'd have to hook the actual interpreter (python.exe), and hook things there.  Python is interpreted or compiled into JIT. You can't hook interpreted scripts or JIT code directly. . Please try the latest server and client. . @oleavr Awesome! Thank you.. What is arguments? The variable doesn't exist. \n\nI'm guessing you mean something like:\nd.read.overload(\"java.io.InputStream\").implementation = function (arg0) {\n        return this.read(arg0)\n    };\nYou must specify the function prototype correctly. \n. Looks like it works so long as the programming is running, and not using frida to spawn it.\n. ",
    "xiphiasilver": "@hi, @nadavshtern.\nThanks for your consideration.\nAfter google play and related library has been updated, it works well currently on Android 7...\nThe target application's code related google play seems not to implement properly.. ",
    "a1t3r570": "Then I did some experiments, I used frida hook IAlarmManager$Stub$Proxy set(...) ,\n```\n//IAlarmManager.java\n public void set(int type, long triggerAtTime, long windowLength,\n                long interval, int flags, android.app.PendingIntent operation,\n                android.os.WorkSource workSource,\n                android.app.AlarmManager.AlarmClockInfo alarmClock)\n                throws android.os.RemoteException {\n                android.os.Parcel _data = android.os.Parcel.obtain();\n                android.os.Parcel _reply = android.os.Parcel.obtain();\n            try {\n                _data.writeInterfaceToken(DESCRIPTOR);\n                _data.writeInt(type);\n                _data.writeLong(triggerAtTime);\n                _data.writeLong(windowLength);\n                _data.writeLong(interval);\n                _data.writeInt(flags);\n\n```\nand at the same time hook writeInt(int), nativewriteInt(,), writeLong(long),nativewriteLong(,), \n// Parcel.java\npublic final void writeInt(int val) {\n    nativeWriteInt(mNativePtr, val);\n}\npublic final void writeLong(long val) {\n    nativeWriteLong(mNativePtr, val);\n}\nthe result can only print about native*. \n...\n{u'type': u'send', u'payload': u'IAramManager--set--'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteLong.'}\n{u'type': u'send', u'payload': u'nativeWriteLong.'}\n{u'type': u'send', u'payload': u'nativeWriteLong.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'--end--IAramManager--set--'}\n...\nAt first I guess it maybe course by jvm inline function optimization, I don't know if this is right.\nAnd Then I use Xposed hook writeInt(int) at the same time, the result can print writeInt and right stacktrace. \nD/fuzz-writeInt( 1110): writeInt\nD/fuzz-writeInt( 1110): java.lang.Exception\nD/fuzz-writeInt( 1110):     at buptnsrc.com.xposed_example.Main$3.afterHookedMethod(Main.java:61)\nD/fuzz-writeInt( 1110):     at de.robv.android.xposed.XposedBridge.handleHookedMethod(XposedBridge.java:374)\nD/fuzz-writeInt( 1110):     at android.os.Parcel.writeInt(<Xposed>)\nD/fuzz-writeInt( 1110):     at android.app.IAlarmManager$Stub$Proxy.set(IAlarmManager.java:165)\nD/fuzz-writeInt( 1110):     at android.app.AlarmManager.setImpl(AlarmManager.java:409)\nD/fuzz-writeInt( 1110):     at android.app.AlarmManager.set(AlarmManager.java:208)\nD/fuzz-writeInt( 1110):     at com.example.android.apis.app.AlarmController$1.onClick(AlarmController.java:102)\nD/fuzz-writeInt( 1110):     at android.view.View.performClick(View.java:4780)\nD/fuzz-writeInt( 1110):     at android.view.View$PerformClick.run(View.java:19866)\nD/fuzz-writeInt( 1110):     at android.os.Handler.handleCallback(Handler.java:739)\nD/fuzz-writeInt( 1110):     at android.os.Handler.dispatchMessage(Handler.java:95)\nD/fuzz-writeInt( 1110):     at android.os.Looper.loop(Looper.java:135)\nD/fuzz-writeInt( 1110):     at android.app.ActivityThread.main(ActivityThread.java:5254)\nD/fuzz-writeInt( 1110):     at java.lang.reflect.Method.invoke(Native Method)\nD/fuzz-writeInt( 1110):     at java.lang.reflect.Method.invoke(Method.java:372)\nD/fuzz-writeInt( 1110):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:903)\nD/fuzz-writeInt( 1110):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:698)\nD/fuzz-writeInt( 1110):     at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:107)\nIs this a bug? Is it wrong with my use of frida, how to fix it? help me\uff01. > Try adding a return to your Java readInt, i.e., return this.readInt().\n\nWorked fine for me on:\n\nfrida -U <some app>\nPaste in your code\nI see a bunch of messages and it crashes (Probably due to no return)\nmessage: {'type': 'send', 'payload': 'readInt.'} data: None\nI try with the return, and see a bunch of messages and no crash.\n\n\nemm..,it doesn't work for me. \nmy test environment is:\nfrida 12.2.5\nemulator \nandroid6.0\nx86\ntest-app:API demos (system app)[com.example.android.apis/.AlarmController]\nCan you elaborate on the details? Like,android version?frida verison?emulator or real machine?x86 or arm? I can't reproduce.Thank you so much,it's important for me. . > Nexus 5x Android 6.0 Rooted | Frida 12.2.22 | com.google.android.deskclock\nemmm.., I did it follow your context. Although it(readInt/writeInt) can be caught occasionally,it is not what I want. To make the problem more directional, please consider to hook the specified method like IAramManager.set(),like this:\nJava.perform(function(){\n    var ibinder = Java.use(\"android.app.IAlarmManager$Stub$Proxy\");\n    ibinder.set.overload('int', 'long','long','long','int', 'android.app.PendingIntent','android.os.WorkSource','android.app.AlarmManager$AlarmClockInfo').implementation = function(a,b,c,d,e,f,g,h){\n        send(\"IAramManager--set--\");\n        var res = this.set(a,b,c,d,e,f,g,h);\n        send(\"--end--IAramManager--set--\");\n        return res;\n    }\n});\nJava.perform(function(){\n    var Parcel = Java.use(\"android.os.Parcel\");\n    Parcel.writeInt.implementation = function(i){\n        send(\"writeInt.\");\n        return this.writeInt(i);\n    }\n});\nJava.perform(function(){\n    var Parcel = Java.use(\"android.os.Parcel\");\n    Parcel.nativeWriteInt.implementation = function(a,b){\n        send(\"nativeWriteInt.\");\n        return this.nativeWriteInt(a,b);\n    }\n});\nAnd you can trigger set() by setting an alarm enable in com.google.android.deskclock.\nThe call relationship between the methods, please see my second comment. In my test,result is:\n{u'type': u'send', u'payload': u'IAramManager--set--'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'nativeWriteInt.'}\n{u'type': u'send', u'payload': u'--end--IAramManager--set--'}\nBut according to the source code, it should hook to writeInt, and I can hook to writeInt with Xposed.\nIf your results are different from me, please let me know. Thank you for your reply.\n. ",
    "deathmemory": "finally , I found the way, thanks. Yes, thank you !. > Check this path. May not be appropriate for your target system.\nYes, As you said, there is no /fs/tmpfs path on my host.\nSo I patched the frida server bin string from /fs/tmpfs to /tmp directly.\nI think that would be OK, but it still throw the same error.\nIs there anything else that needs to be changed?. > @deathmemory Make sure /tmp is writable by the frida-server. You can also maybe try /root/local/tmp instead. You need some sort of folder that is writable.\n/tmp and /root/local/tmp  are both can writeable. Can I get some more error logs from frida-server ?\nqnx\n```\nuname -a\nQNX mmx 6.6.0 2017/05/10-10:26:34CDT NVIDIA_Tegra_K1_(armv7l)_Boards armle\n```. ",
    "ktdkaer": "solution found. I needed to run the adb forward command. ",
    "benji1801": "Hi,\nI'm also on Android 9.0 device and Frida does not work... I've exactly same issue as you... :(. > I'm using a Samsung S4 on Android 9 and it works fine for me. So we need more device information about what's breaking.\n\nWorks:\nSamsung S4 (jflte) arm7l\nAndroid 9\nLineageOS 16\nEdit: it actually does give me that error. But, hooks still seem to work, at least for native functions.\nfrida-trace -U -i 'read' com.android.messaging and then playing around with the messaging app recorded a bunch of read calls.\nJava hooks seem broken though.\n[Samsung SGH-M919::com.android.messaging]-> Java.perform(function () {\n                                                var bufferedReader = Java.use(\"java.io.BufferedReader\");\n                                                bufferedReader.close.implementation = function () {\n                                                    console.log(\"[*] close() got called!\");\n                                                    this.close();\n                                                };\n                                            });\nundefined\nError: Unable to determine ArtMethod field offsets\n    at frida/node_modules/frida-java/lib/android.js:505\n    at frida/node_modules/frida-java/lib/vm.js:43\n    at x (frida/node_modules/frida-java/lib/android.js:527)\n    at frida/node_modules/frida-java/lib/android.js:1446\n    at replaceArtImplementation (frida/node_modules/frida-java/lib/class-factory.js:1662)\n    at frida/node_modules/frida-java/lib/class-factory.js:1443\n    at [anon] (input:6)\n    at frida/node_modules/frida-java/lib/vm.js:43\n    at frida/node_modules/frida-java/index.js:280\nThis works however:\n[Samsung SGH-M919::com.android.messaging]->Java.perform(function(){Java.enumerateLoadedClasses({\"onMatch\":function(className){ console.log(className) },\"onComplete\":function(){}})})\nbunch of things....\n\nYes I have same thing you, only java hook does not work... :(. ",
    "eugenekolo": "I'm using a Samsung S4 on Android 9 and it works fine for me. So we need more device information about what's breaking.\nWorks:\nSamsung S4 (jflte) arm7l\nAndroid 9\nLineageOS 16\nEdit: it actually does give me that error. But, hooks still seem to work, at least for native functions.\nfrida-trace -U -i 'read' com.android.messaging and then playing around with the messaging app recorded a bunch of read calls. \nJava hooks seem broken though.\n[Samsung SGH-M919::com.android.messaging]-> Java.perform(function () {\n                                                var bufferedReader = Java.use(\"java.io.BufferedReader\");\n                                                bufferedReader.close.implementation = function () {\n                                                    console.log(\"[*] close() got called!\");\n                                                    this.close();\n                                                };\n                                            });\nundefined\nError: Unable to determine ArtMethod field offsets\n    at frida/node_modules/frida-java/lib/android.js:505\n    at frida/node_modules/frida-java/lib/vm.js:43\n    at x (frida/node_modules/frida-java/lib/android.js:527)\n    at frida/node_modules/frida-java/lib/android.js:1446\n    at replaceArtImplementation (frida/node_modules/frida-java/lib/class-factory.js:1662)\n    at frida/node_modules/frida-java/lib/class-factory.js:1443\n    at [anon] (input:6)\n    at frida/node_modules/frida-java/lib/vm.js:43\n    at frida/node_modules/frida-java/index.js:280\nThis works however:\nfrida -U com.android.messaging\n[Samsung SGH-M919::com.android.messaging]->Java.perform(function(){Java.enumerateLoadedClasses({\"onMatch\":function(className){ console.log(className) },\"onComplete\":function(){}})})\nbunch of things.... \n. This seems to be the changelog: https://android.googlesource.com/platform/ndk.git/+/3c55bd3408f943fe1c3d83211efc4d4ba7e0c7f7/CHANGELOG.md\nSo nothing really different.. Sounds like what you're targeting has anti-debugging and is already being ptraced.. You want the --file option.\n```\neugenek:~ \u25aa\ufe0f \ufe0f frida --help\nUsage: frida [options] target\nOptions:\n  --version             show program's version number and exit\n  -h, --help            show this help message and exit\n  -D ID, --device=ID    connect to device with the given ID\n  -U, --usb             connect to USB device\n  -R, --remote          connect to remote frida-server\n  -H HOST, --host=HOST  connect to remote frida-server on HOST\n  -f FILE, --file=FILE  spawn FILE\n  -n NAME, --attach-name=NAME\n                        attach to NAME\n  -p PID, --attach-pid=PID\n                        attach to PID\n  --debug               enable the Node.js compatible script debugger\n  --enable-jit          enable JIT\n  -l SCRIPT, --load=SCRIPT\n                        load SCRIPT\n  -c CODESHARE_URI, --codeshare=CODESHARE_URI\n                        load CODESHARE_URI\n  -e CODE, --eval=CODE  evaluate CODE\n  -q                    quiet mode (no prompt) and quit after -l and -e\n  --no-pause            automatically start main thread after startup\n  -o LOGFILE, --output=LOGFILE\n                        output to log file\n```. From what I can tell, due to limited dev time emulated devices are not supported. Supporting all the various Android versions on physical devices, iOS, and desktop OS's there just isn't enough resources to debug things on emulators. . is this genymotion or another emulator? those devices aren't supported unfortunately.. You have a pointer to the array. I don't know the memory layout of a swift array. You're going to have to do research on that to get the actual contents. A very rough guess as to what you have:\nptr_to_array --->\n[flags] 64 bits\n[size] 64 bits\n[elements n...] n bits\nThis may be useful: https://gist.github.com/pyrtsa/f683a7fac160775a33a210e938f6b107\n. What android version, and device? . This works fine\n```\n$ npm install frida-fs\n$ npm install frida-compile\n$ ./node_modules/.bin/frida-compile test.js -o _test.js\n$ sudo frida -p 13242 -l _test.js\n...\nAttaching...                                                            \n/etc/profile: system-wide .profile file for the Bourne shell (sh(1))\nand Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n....\n\n$ cat test.js\nvar fs = require('frida-fs');\nvar x = fs.readFileSync('/etc/profile');\nconsole.log(x);\n```\n. Unfortunately it doesn't look like frida-fs supports Windows. You're going\nto have to do extend it yourself.\nAll the library basically does is create NativeFunctions for the basic file\nmethods in libc. The equivalent has to be done for Windows. I'm not\nfamiliar with Windows, but I imagine it's something like MSVCRT.dll!open\nand others.\nOn Thu, Jan 17, 2019, 2:27 AM o0xmuhe <notifications@github.com wrote:\n\nThis works fine\n$ npm install frida-fs\n$ npm install frida-compile\n$ ./node_modules/.bin/frida-compile test.js -o _test.js\n$ sudo frida -p 13242 -l _test.js\n...\nAttaching...\n/etc/profile: system-wide .profile file for the Bourne shell (sh(1))\nand Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n....\n$ cat test.js\nvar fs = require('frida-fs');\nvar x = fs.readFileSync('/etc/profile');\nconsole.log(x);\nThanks for your reply!\nBut it dosn't work on Windows...\nmy test.js is:\nvar fs = require('frida-fs');var x = fs.readFileSync('C:\\1.txt');console.log(x);\nbut I got error as follow :\nTypeError: null not callable\n    at [anon] (duk_js_call.c:1339)\n    at readFileSync (/repl1.js:4321)\n    at [anon] (/repl1.js:7998)\n    at o (/repl1.js:1)\n    at r (/repl1.js:1)\n    at /repl1.js:8001\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/frida/frida/issues/748#issuecomment-455069442, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/ACT-apvvZmc14qePbStdQ5NYj0p8IaeSks5vECXxgaJpZM4ZnshI\n.\n. @deathmemory Make sure /tmp is writable by the frida-server. You can also maybe try /root/local/tmp instead. You need some sort of folder that is writable. \n\n. Running latest frida? What process are you trying to connect to? . ",
    "leezn": "OnePlus3:/data/local/tmp # ./frida-server &\n./frida-server &\n[1] 12640\nOnePlus3:/data/local/tmp # {\"type\":\"error\",\"description\":\"Error: Unable to determine ArtMethod field offsets\",\"stack\":\"Error: Unable to determine ArtMethod field offsets\\n    at vm.perform (frida/node_modules/frida-java/lib/android.js:506:1)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:43:1)\\n    at _getArtMethodSpec (frida/node_modules/frida-java/lib/android.js:467:1)\\n    at frida/node_modules/frida-java/lib/android.js:1446:1\\n    at Function.replaceArtImplementation [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1662:1)\\n    at Function.set [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1443:1)\\n    at installLaunchTimeoutRemovalInstrumentation (/internal-agent.js:177:24)\\n    at init (/internal-agent.js:26:3)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:43:1)\\n    at performPending (frida/node_modules/frida-java/index.js:347:1)\",\"fileName\":\"frida/node_modules/frida-java/lib/android.js\",\"lineNumber\":506,\"columnNumber\":1}\noneplus3\nnitrogen 9.0\nandroid 9.0. ",
    "tfernandes": "Same issue. \ncrosshatch:/data/local/tmp # ./frida-server                                                \n{\"type\":\"error\",\"description\":\"Error: Unable to determine ArtMethod field offsets\",\"stack\":\"Error: Unable to determine ArtMethod field offsets\\n    at vm.perform (frida/node_modules/frida-java/lib/android.js:506:1)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:43:1)\\n    at _getArtMethodSpec (frida/node_modules/frida-java/lib/android.js:467:1)\\n    at frida/node_modules/frida-java/lib/android.js:1446:1\\n    at Function.replaceArtImplementation [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1662:1)\\n    at Function.set [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1443:1)\\n    at installLaunchTimeoutRemovalInstrumentation (/internal-agent.js:177:24)\\n    at init (/internal-agent.js:26:3)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:43:1)\\n    at performPending (frida/node_modules/frida-java/index.js:347:1)\",\"fileName\":\"frida/node_modules/frida-java/lib/android.js\",\"lineNumber\":506,\"columnNumber\":1}\nAndroid 9\nPixel 3XL \nMagisk Root. ",
    "rocco8620": "Same issue.\n{\"type\":\"error\",\"description\":\"Error: Unable to determine ArtMethod field offsets\",\"stack\":\"Error: Unable to determine ArtMethod field offsets\\n    at vm.perform (frida/node_modules/frida-java/lib/android.js:505:1)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:42:1)\\n    at _getArtMethodSpec (frida/node_modules/frida-java/lib/android.js:466:1)\\n    at frida/node_modules/frida-java/lib/android.js:1445:1\\n    at Function.replaceArtImplementation [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1662:1)\\n    at Function.set [as implementation] (frida/node_modules/frida-java/lib/class-factory.js:1443:1)\\n    at installLaunchTimeoutRemovalInstrumentation (/internal-agent.js:177:24)\\n    at init (/internal-agent.js:26:3)\\n    at VM.perform (frida/node_modules/frida-java/lib/vm.js:42:1)\\n    at performPending (frida/node_modules/frida-java/index.js:347:1)\",\"fileName\":\"frida/node_modules/frida-java/lib/android.js\",\"lineNumber\":505,\"columnNumber\":1}\nXiaomi MI MIX 2S - stock rom, europe\nAndroid 9\nMagisk root. ",
    "prettywolf": "i got the same error when run frida -U -f com.google.xxxx\nbut script is ok,frida-server is newest. ",
    "McDo": "@stevepoland85 thanks for your kind help. Do you know any tutorials on how to hook to python interpreter?. ",
    "NeKavai": "Same thing on iPhone 8 plus, iOS 11.2.6, unc0ver jailbreak. Both Frida client and server are latest 12.2.30 at this moment.. @masbog\nThanks. If someone is interested I found workaround. Just done jailbreaking with Electra jailbreak 'cause unc0ver is not officially supported by Frida. Now everything works perfectly.. ",
    "mr-m0nst3r": "BTW, I'm using the latest Mac OSX.\n$ sw_vers\nProductName:    Mac OS X\nProductVersion: 10.14.1\nBuildVersion:   18B75. ",
    "iGio90": "a colleague of me is experiencing some issues with the Java.perform <- which is what hang (on our end). The solution (on our end) was to wrap Java.perform into a setTimeout(fn, 0);\nhope it will be ur solution too!. ",
    "RaitoBezarius": "Same issue with latest version (for frida, frida-tools and frida-server) on a rooted Android 7.1 on Linux (Arch Linux, latest kernel version).. ",
    "comsians123": "I had the same issue i-e frida.TransportError: the connection is closed with the following script.\n```\nimport frida, sys\ndef on_message(message, data):\n    if message['type'] == 'send':\n        print(\"[*] {0}\".format(message['payload']))\n    else:\n        print(message)\njscode = \"\"\"\nJava.perform(function x() {\n    //do stuff\n});\n\"\"\"\nprocess = frida.get_usb_device().attach('com.package.name')\nscript = process.create_script(jscode)\nscript.on('message', on_message)\nscript.load()\nsys.stdin.read()\n```\nand I solved it by changing the script to \n```\nimport frida, sys\nimport time\ndef on_message(message, data):\n    if message['type'] == 'send':\n        print(\"[*] {0}\".format(message['payload']))\n    else:\n        print(message)\njscode = \"\"\"\nconsole.log(\"Script loaded successfully \");\nJava.perform(function x() { \n    //do stuff\n});\n\"\"\"\ndevice = frida.get_usb_device(1)\npid = device.spawn([\"com.package.name\"])\ndevice.resume(pid)\ntime.sleep(1) #Without it Java.perform silently fails\nprocess = device.attach(pid)\nscript = process.create_script(jscode)\nscript.on('message', on_message)\nscript.load()\nsys.stdin.read()\n```\nSummary: \nReplace this line process = frida.get_usb_device().attach('com.package.name') with: \ndevice = frida.get_usb_device(1)\npid = device.spawn([\"com.package.name\"])\ndevice.resume(pid)\ntime.sleep(1) #Without it Java.perform silently fails\nprocess = device.attach(pid)\nDon't forget to rerun frida-server on android device \nHope it might help someone. Thanks . ",
    "raymontag": "Thank you for clarification! Is it known why Frida cannot spawn processen on armv7?. @oleavr I'll try.. @oleavr It has something to do with setlocale.c which belongs to locale from glibc:\n$ gdb -q valac-0.42-impl\n\nwarning: ~/Projects/tools/peda/peda.py: No such file or directory\nReading symbols from valac-0.42-impl...(no debugging symbols found)...done.\n(gdb) run hello.vala\nStarting program: /home/grayfox/reversing/frida/build/frida_thin-toolchain-linux-x86_64/bin/valac-0.42-impl hello.vala\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff7dbb5ba in __GI_setlocale (category=<optimized out>, locale=<optimized out>) at setlocale.c:392\n392 setlocale.c: No such file or directory.\n\nInteresting enough, it builds in Ubuntu 18.04. So maybe it doesn't work with the current glibc from 18.10.\nEdit: Ubuntu 18.10 uses glibc-2.28, Ubuntu 18.04 uses glibc-2.27. @oleavr Of course:\n(gdb) bt\n#0  0x00007ffff7dbb5ba in __GI_setlocale (category=<optimized out>, locale=<optimized out>) at setlocale.c:392\n#1  0x000000000044a8b5 in main ()\n\n. @thejunkjon That's it! I thought I've already tried it because I read something similar in the Debian bugtracker: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=59802\nI will create a PR.. ",
    "sebastiaanv3": "I faced the same problem on an Apple iPhone 5c running iOS 10.3.3 jailbroken using h3lix-RC5. The first release of re.frida.server32 which poses this issue is 12.0.4.\nWorking setup:\n- frida 12.3.1\n- frida_tools 1.2.3\n- re.frida.server32 12.0.3\nYou can get older versions of frida32 from https://build.frida.re/debs/. ",
    "lisabrauns": "@stevepoland85 that's not work.. ",
    "7763sea": "Thanks\uff0cI found error\uff0cbecause \u534e\u4e3aXDD 259  is Android 8.0 os \uff0cneed Magisk module to open ro.debuggable to 1\u3002\ncommond\uff1a\nmagisk resetprop ro.debuggable 1. ",
    "folkene": "Hello,\nThanks for helping :). I tried the .retain() solution as you proposed, but it didn't work.\n//EDIT\nThe alloc + init solution does not make the app crashing but it returns an empty NSData (NSZero data). I'm not able to return the NSData fully set.\n// BEFORE EDIT\nFortunately, the alloc + init solution is working well. So here is the solution for the futur people facing this issue : \n ` \n                var test= ObjC.classes.NSData.alloc().init(address, size);\n             retval.replace( test);`\n\nThanks again. Thank you for the reply, but I had tried that before :).\nI tried almost all the constructors  of NSData and NSMutableData.\n// EDIT\nI also tried to call .retain() before returning as mentionned before\nProcess 2416 stopped\n* thread #1, queue = 'com.apple.root.utility-qos', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\n    frame #0: 0x00000001848ceaa0 libsystem_platform.dylib_platform_memmove + 208\nlibsystem_platform.dylib_platform_memmove:\n->  0x1848ceaa0 <+208>: stp    x12, x13, [x0]\n    0x1848ceaa4 <+212>: stp    x14, x15, [x0, #0x10]\n    0x1848ceaa8 <+216>: subs   x2, x2, #0x40             ; =0x40 \n    0x1848ceaac <+220>: b.ls   0x1848cead0               ; <+256>\n. Here is the back trace from the debugger : \n\n\nthread #1, queue = 'com.apple.root.utility-qos', stop reason = EXC_BAD_ACCESS (code=1, address=0x0)\nframe #0: 0x00000001848ceafc libsystem_platform.dylib_platform_memmove + 300\n    frame #1: 0x0000000105138688 MyApplldbunnamed_symbol58037$$MyApp + 120\n    frame #2: 0x0000000105138688 MyApp___lldb_unnamed_symbol58037$$MyApp + 120\n    frame #3: 0x000000010b33420c\n    frame #4: 0x000000010511307c MyApp_lldb_unnamed_symbol57563$$MyApp + 284\n    frame #5: 0x00000001050e4104 MyApp___lldb_unnamed_symbol57363$$MyApp + 172\n    frame #6: 0x00000001050e4008 MyApplldbunnamed_symbol57362$$MyApp + 360\n    frame #7: 0x00000001050e0fb4 MyApp___lldb_unnamed_symbol57336$$MyApp + 3308\n    frame #8: 0x00000001845a4ae4 libdispatch.dylib_dispatch_client_callout + 16\n    frame #9: 0x00000001845b29e0 libdispatch.dylib_dispatch_sync_function_invoke + 52\n    frame #10: 0x00000001050e0244 MyApp_lldb_unnamed_symbol57335$$MyApp + 212\n    frame #11: 0x00000001050dec3c MyApp___lldb_unnamed_symbol57326$$MyApp + 1220\n    frame #12: 0x00000001050ddae4 MyApplldbunnamed_symbol57320$$MyApp + 1340\n    frame #13: 0x000000010a64400c\n    frame #14: 0x0000000104962c00 MyApp___lldb_unnamed_symbol26759$$MyApp + 464\n    frame #15: 0x000000010495de88 MyApp_lldb_unnamed_symbol26712$$MyApp + 216\n    frame #16: 0x000000018e882e38 UIKit-[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 408\n    frame #17: 0x000000018e882240 UIKit-[UIApplication _callInitializationDelegatesForMainScene:transitionContext:] + 3484\n    frame #18: 0x000000018e84f65c UIKit-[UIApplication _runWithMainScene:transitionContext:completion:] + 1680\n    frame #19: 0x000000018ee7fa0c UIKit111-[__UICanvasLifecycleMonitor_Compatability _scheduleFirstCommitForScene:transition:firstActivation:completion:]_block_invoke + 784\n    frame #20: 0x000000018e84ee4c UIKit+[_UICanvas _enqueuePostSettingUpdateTransactionBlock:] + 160\n    frame #21: 0x000000018e84ece8 UIKit-[__UICanvasLifecycleMonitor_Compatability _scheduleFirstCommitForScene:transition:firstActivation:completion:] + 240\n    frame #22: 0x000000018e84db78 UIKit-[__UICanvasLifecycleMonitor_Compatability activateEventsOnly:withContext:completion:] + 724\n    frame #23: 0x000000018f4e372c UIKit__82-[_UIApplicationCanvas _transitionLifecycleStateWithTransitionContext:completion:]_block_invoke + 296\n    frame #24: 0x000000018e84d268 UIKit-[_UIApplicationCanvas _transitionLifecycleStateWithTransitionContext:completion:] + 432\n    frame #25: 0x000000018f2c89b8 UIKit__125-[_UICanvasLifecycleSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:]_block_invoke + 220\n    frame #26: 0x000000018f416ae8 UIKit_performActionsWithDelayForTransitionContext + 112\n    frame #27: 0x000000018e84cc88 UIKit-[_UICanvasLifecycleSettingsDiffAction performActionsForCanvas:withUpdatedScene:settingsDiff:fromSettings:transitionContext:] + 248\n    frame #28: 0x000000018e84c624 UIKit-[_UICanvas scene:didUpdateWithDiff:transitionContext:completion:] + 368\n    frame #29: 0x000000018e84965c UIKit-[UIApplication workspace:didCreateScene:withTransitionContext:completion:] + 540\n    frame #30: 0x000000018e8493ac UIKit-[UIApplicationSceneClientAgent scene:didInitializeWithEvent:completion:] + 364\n    frame #31: 0x00000001874b0470 FrontBoardServices-[FBSSceneImpl _didCreateWithTransitionContext:completion:] + 364\n    frame #32: 0x00000001874b8d6c FrontBoardServices__56-[FBSWorkspace client:handleCreateScene:withCompletion:]_block_invoke_2 + 224\n    frame #33: 0x00000001845a4ae4 libdispatch.dylib_dispatch_client_callout + 16\n    frame #34: 0x00000001845ac1f4 libdispatch.dylib_dispatch_block_invoke_direct$VARIANT$mp + 224\n    frame #35: 0x00000001874e4878 FrontBoardServices__FBSSERIALQUEUE_IS_CALLING_OUT_TO_A_BLOCK + 36\n    frame #36: 0x00000001874e451c FrontBoardServices-[FBSSerialQueue _performNext] + 404\n    frame #37: 0x00000001874e4ab8 FrontBoardServices-[FBSSerialQueue _performNextFromRunLoopSource] + 56\n    frame #38: 0x0000000184c5b404 CoreFoundation__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24\n    frame #39: 0x0000000184c5ac2c CoreFoundationCFRunLoopDoSources0 + 276\n    frame #40: 0x0000000184c5879c CoreFoundation__CFRunLoopRun + 1204\n    frame #41: 0x0000000184b78da8 CoreFoundationCFRunLoopRunSpecific + 552\n    frame #42: 0x0000000186b5b020 GraphicsServicesGSEventRunModal + 100\n    frame #43: 0x000000018eb5978c UIKitUIApplicationMain + 236\n    frame #44: 0x0000000104300bb0 MyApp___lldb_unnamed_symbol283$$MyApp + 60\n    frame #45: 0x0000000184609fc0 libdyld.dylibstart + 4\n  thread #2, name = 'gadget-main-loop'\n    frame #0: 0x000000018471c3e4 libsystem_kernel.dylibpoll + 8\n    frame #1: 0x0000000106bc99bc FridaGadget.dyliblldbunnamed_symbol4750$$FridaGadget.dylib + 336\n    frame #2: 0x0000000106bc9c44 FridaGadget.dylib___lldb_unnamed_symbol4755$$FridaGadget.dylib + 212\n    frame #3: 0x0000000106b16628 FridaGadget.dylib_lldb_unnamed_symbol469$$FridaGadget.dylib + 36\n    frame #4: 0x0000000106bd5898 FridaGadget.dylib___lldb_unnamed_symbol5039$$FridaGadget.dylib + 120\n    frame #5: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #6: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #7: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #3, name = 'gmain'\n    frame #0: 0x000000018471c3e4 libsystem_kernel.dylibpoll + 8\n    frame #1: 0x0000000106bc99bc FridaGadget.dyliblldbunnamed_symbol4750$$FridaGadget.dylib + 336\n    frame #2: 0x0000000106bc9a84 FridaGadget.dylib___lldb_unnamed_symbol4751$$FridaGadget.dylib + 60\n    frame #3: 0x0000000106bca8fc FridaGadget.dylib_lldb_unnamed_symbol4782$$FridaGadget.dylib + 60\n    frame #4: 0x0000000106bd5898 FridaGadget.dylib___lldb_unnamed_symbol5039$$FridaGadget.dylib + 120\n    frame #5: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #6: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #7: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #4\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylib__workq_kernreturn + 8\n    frame #1: 0x00000001848d7eb4 libsystem_pthread.dylib_pthread_wqthread + 928\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #5, name = 'pool'\n    frame #0: 0x00000001847390f4 libsystem_kernel.dylib__psynch_cvwait + 8\n    frame #1: 0x00000001848dbcc8 libsystem_pthread.dylib_pthread_cond_wait$VARIANT$mp + 700\n    frame #2: 0x0000000106be9080 FridaGadget.dyliblldbunnamed_symbol5412$$FridaGadget.dylib + 140\n    frame #3: 0x0000000106bb7184 FridaGadget.dylib___lldb_unnamed_symbol4418$$FridaGadget.dylib + 100\n    frame #4: 0x0000000106bb71fc FridaGadget.dylib_lldb_unnamed_symbol4420$$FridaGadget.dylib + 52\n    frame #5: 0x0000000106bd63d4 FridaGadget.dylib___lldb_unnamed_symbol5063$$FridaGadget.dylib + 412\n    frame #6: 0x0000000106bd5898 FridaGadget.dyliblldbunnamed_symbol5039$$FridaGadget.dylib + 120\n    frame #7: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #8: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #9: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #6, name = 'gdbus'\n    frame #0: 0x000000018471c3e4 libsystem_kernel.dylibpoll + 8\n    frame #1: 0x0000000106bc99bc FridaGadget.dylib___lldb_unnamed_symbol4750$$FridaGadget.dylib + 336\n    frame #2: 0x0000000106bc9c44 FridaGadget.dylib_lldb_unnamed_symbol4755$$FridaGadget.dylib + 212\n    frame #3: 0x0000000106b70cdc FridaGadget.dylib___lldb_unnamed_symbol2982$$FridaGadget.dylib + 32\n    frame #4: 0x0000000106bd5898 FridaGadget.dyliblldbunnamed_symbol5039$$FridaGadget.dylib + 120\n    frame #5: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #6: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #7: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #7, name = 'gum-js-loop'\n    frame #0: 0x000000018471c3e4 libsystem_kernel.dylibpoll + 8\n    frame #1: 0x0000000106bc99bc FridaGadget.dylib___lldb_unnamed_symbol4750$$FridaGadget.dylib + 336\n    frame #2: 0x0000000106bc9c44 FridaGadget.dylib_lldb_unnamed_symbol4755$$FridaGadget.dylib + 212\n    frame #3: 0x0000000106c8b364 FridaGadget.dylib___lldb_unnamed_symbol7741$$FridaGadget.dylib + 32\n    frame #4: 0x0000000106bd5898 FridaGadget.dyliblldbunnamed_symbol5039$$FridaGadget.dylib + 120\n    frame #5: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #6: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #7: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #8\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylibworkq_kernreturn + 8\n    frame #1: 0x00000001848d7eb4 libsystem_pthread.dylib_pthread_wqthread + 928\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #9\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylib__workq_kernreturn + 8\n    frame #1: 0x00000001848d80a0 libsystem_pthread.dylib_pthread_wqthread + 1420\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #10, name = 'com.apple.uikit.eventfetch-thread'\n    frame #0: 0x0000000184717e08 libsystem_kernel.dylibmach_msg_trap + 8\n    frame #1: 0x0000000184717c80 libsystem_kernel.dylibmach_msg + 72\n    frame #2: 0x0000000184c5ae40 CoreFoundation__CFRunLoopServiceMachPort + 196\n    frame #3: 0x0000000184c58908 CoreFoundation__CFRunLoopRun + 1568\n    frame #4: 0x0000000184b78da8 CoreFoundationCFRunLoopRunSpecific + 552\n    frame #5: 0x00000001855ed674 Foundation-[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 304\n    frame #6: 0x00000001855ed4dc Foundation-[NSRunLoop(NSRunLoop) runUntilDate:] + 84\n    frame #7: 0x000000018e83e7e4 UIKit-[UIEventFetcher threadMain] + 136\n    frame #8: 0x00000001856fdefc Foundation__NSThread__start + 1040\n    frame #9: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #10: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #11: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #11\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylib__workq_kernreturn + 8\n    frame #1: 0x00000001848d80a0 libsystem_pthread.dylib_pthread_wqthread + 1420\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #12\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylib__workq_kernreturn + 8\n    frame #1: 0x00000001848d7eb4 libsystem_pthread.dylib_pthread_wqthread + 928\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #13\n    frame #0: 0x0000000184739d84 libsystem_kernel.dylib__workq_kernreturn + 8\n    frame #1: 0x00000001848d80a0 libsystem_pthread.dylib_pthread_wqthread + 1420\n    frame #2: 0x00000001848d7b08 libsystem_pthread.dylibstart_wqthread + 4\n  thread #14\n    frame #0: 0x00000001847390f4 libsystem_kernel.dylib__psynch_cvwait + 8\n    frame #1: 0x00000001848dbc90 libsystem_pthread.dylib_pthread_cond_wait$VARIANT$mp + 644\n    frame #2: 0x0000000183df02ec libc++.1.dylibstd::__1::condition_variable::__do_timed_wait(std::__1::unique_lock<std::__1::mutex>&, std::__1::chrono::time_point<std::__1::chrono::system_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > >) + 96\n    frame #3: 0x000000018c2cf430 JavaScriptCorestd::__1::cv_status std::__1::condition_variable::wait_until > >(std::__1::unique_lock&, std::__1::chrono::time_point > > const&) + 124\n    frame #4: 0x000000018c2cf2e0 JavaScriptCorestd::__1::cv_status std::__1::condition_variable_any::wait_until<std::__1::unique_lock<bmalloc::Mutex>, std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > >(std::__1::unique_lock<bmalloc::Mutex>&, std::__1::chrono::time_point<std::__1::chrono::steady_clock, std::__1::chrono::duration<long long, std::__1::ratio<1l, 1000000000l> > > const&) + 112\n    frame #5: 0x000000018c2cee24 JavaScriptCorebmalloc::Scavenger::threadRunLoop() + 272\n    frame #6: 0x000000018c2ceb60 JavaScriptCorebmalloc::Scavenger::threadEntryPoint(bmalloc::Scavenger*) + 12\n    frame #7: 0x000000018c2cef7c JavaScriptCorevoid std::__1::__thread_proxy >, void ()(bmalloc::Scavenger), bmalloc::Scavenger> >(void) + 44\n    frame #8: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #9: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #10: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n  thread #15, name = 'WebThread'\n    frame #0: 0x00000001847390f4 libsystem_kernel.dylib__psynch_cvwait + 8\n    frame #1: 0x00000001848dbc90 libsystem_pthread.dylib_pthread_cond_wait$VARIANT$mp + 644\n    frame #2: 0x000000018b8232cc JavaScriptCoreWTF::ThreadCondition::timedWait(WTF::Mutex&, double) + 80\n    frame #3: 0x000000018c2b473c JavaScriptCoreWTF::ParkingLot::parkConditionallyImpl(void const*, WTF::ScopedLambda<bool ()> const&, WTF::ScopedLambda<void ()> const&, WTF::TimeWithDynamicClockType const&) + 2252\n    frame #4: 0x000000018c2ac6c0 JavaScriptCoreWTF::LockAlgorithm >::lockSlow(WTF::Atomic&) + 372\n    frame #5: 0x000000018d31bb40 WebCore_WebThreadLock() + 244\n    frame #6: 0x000000018ce1b960 WebCoreSendDelegateMessage(NSInvocation) + 820\n    frame #7: 0x0000000184cb82d4 CoreFoundation___forwarding___ + 624\n    frame #8: 0x0000000184b9e41c CoreFoundation_CF_forwarding_prep_0 + 92\n    frame #9: 0x000000018e541eec WebKitLegacy__48-[WebFrame(WebPrivate) deviceOrientationChanged]_block_invoke + 116\n    frame #10: 0x000000018df23da4 WebCoreHandleRunSource(void*) + 596\n    frame #11: 0x0000000184c5b404 CoreFoundation__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 24\n    frame #12: 0x0000000184c5ac2c CoreFoundation__CFRunLoopDoSources0 + 276\n    frame #13: 0x0000000184c5879c CoreFoundation__CFRunLoopRun + 1204\n    frame #14: 0x0000000184b78da8 CoreFoundationCFRunLoopRunSpecific + 552\n    frame #15: 0x000000018ce05dcc WebCoreRunWebThread(void*) + 592\n    frame #16: 0x00000001848d9220 libsystem_pthread.dylib_pthread_body + 272\n    frame #17: 0x00000001848d9110 libsystem_pthread.dylib_pthread_start + 292\n    frame #18: 0x00000001848d7b10 libsystem_pthread.dylibthread_start + 4\n. \n\n",
    "jpstotz": "In reality there is no class named android.os.Build.VERSION therefore your command fails. \nThe real name if the VERSION class is android.os.Build$VERSION. If you use this class name you should be able to read and modify SDK_INT.value:\nvar ver = Java.use('android.os.Build$VERSION');\nconsole.log(\"Version before: \"+ver.SDK_INT.value);\nver.SDK_INT.value = 15;\nconsole.log(\"Version after: \"+ver.SDK_INT.value);\n\n. ",
    "omarroth": "Creating symbolic links to the system valac works for me.\n$ which valac\n/usr/bin/valac\n$ ll *-valac\nlrwxrwxrwx 1 omar omar 14 Dec 12 13:57 frida-linux-mipsel-valac -> /usr/bin/valac\nlrwxrwxrwx 1 omar omar 14 Dec 12 13:57 frida-linux-mips-valac -> /usr/bin/valac\nlrwxrwxrwx 1 omar omar 14 Dec 12 13:53 frida-linux-x86_64-valac -> /usr/bin/valac\nlrwxrwxrwx 1 omar omar 14 Dec 12 13:53 frida-linux-x86-valac -> /usr/bin/valac\nAlthough obviously not ideal.. Gotcha, thanks @oleavr. The prebuilt Vala segfaults on my system as well, will investigate.. ",
    "AsenOsen": "\n@thejunkjon That's it! I thought I've already tried it because I read something similar in the Debian bugtracker: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=59802\nI will create a PR.\n\n\nGot this SIGSEGV even having locale configured. Could it be somehow connected with #790 ?. You can recv() it from python as a last resort. Ask on SO, that is not an issue. ",
    "lintangtimur": "using android virtual device x86 google nexus.\nAPK architecture is armeabi-v7a. from Android Studio. ",
    "javixeneize": "Hi\nI downloaded the latest pip package\npip freeze | grep frida\nfrida==12.2.27\nfrida-tools==1.2.2. Hi\nIm in python3 yes. There is no ldd command in MacOSX, i assume otool would do the same.\notool -l _frida.so\n/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/objdump: '_frida.so': No such file or directory\nSo seems like that object has not been installed?\nI have created a virtualenv and apparently it works fine there, so it solves my issue, but, i am happy to help to investigate what is the root cause for this, should it happen to any other user. Interestingly, looking at /usr/local/bin/frida, it was assembled with python2... \n!/usr/local/opt/python/bin/python2.7\nI have amended it to assemble it with python, and im having the following error now\nModuleNotFoundError: No module named 'frida.ps'\nI have reinstalled frida again but still having it.... Looks like its a local issue with my python installation, but it works fine with virtualenv, so just recommend that solution :). ",
    "wangzery": "@thejunkjon \nResolved , thanks for your solution !. Using python2.7-32bit helps it too. ",
    "tautology0": "Nexus 5, running Android 6.0.1. I refreshed the version of frida-server to the latest Android binary about two months ago.. ",
    "o0xmuhe": "\nThis works fine\n```\n$ npm install frida-fs\n$ npm install frida-compile\n$ ./node_modules/.bin/frida-compile test.js -o _test.js\n$ sudo frida -p 13242 -l _test.js\n...\nAttaching...                                                            \n/etc/profile: system-wide .profile file for the Bourne shell (sh(1))\nand Bourne compatible shells (bash(1), ksh(1), ash(1), ...).\n....\n\n$ cat test.js\nvar fs = require('frida-fs');\nvar x = fs.readFileSync('/etc/profile');\nconsole.log(x);\n```\n\nThanks for your reply!\nBut it dosn't work on Windows...\nmy test.js  is:\njavascript\nvar fs = require('frida-fs');\nvar x = fs.readFileSync('C:\\\\1.txt');\nconsole.log(x);\nbut I got error as follow : \nbash\nTypeError: null not callable\n    at [anon] (duk_js_call.c:1339)\n    at readFileSync (/repl1.js:4321)\n    at [anon] (/repl1.js:7998)\n    at o (/repl1.js:1)\n    at r (/repl1.js:1)\n    at /repl1.js:8001\n. @eugenekolo  Thank you very much!!  I will try it in other ways. . ",
    "titze": "Moving the binaries to /usr/sbin did not resolve the issue.\nAny way I can debug/fix this?\n. ",
    "zzzzfeng": "As for a extend b extend c, hooking in class a will not call method in class c. ",
    "wakawaka54": "Hmm okay I tried to find Memory.scan() but couldn't find it. I am unforunately not very familar with C or low level platform APIs. I looked in frida-gum but I only saw a method signature with Memory.scan(). I could look at the code and see if I could give it a shot, I woudn't make any promises however \u2639\ufe0f I am glad to hear that it is technically possible and seems to be pretty straight forward to do, that tells me it will likely eventually get done haha.. ",
    "henrayluo": "I am sorry for my poor english. I did find the address of the method i want to hook,  but it was called too early to hook. When the shared lib was be dlopened, it was called from the constructor. If i spawn the app then attach it, i can not get the base address of the load lib.. > I am sorry for my poor english. I did find the address of the method i want to hook, but it was called too early to hook. When the shared lib was be dlopened, it was called from the constructor. If i spawn the app then attach it, i can not get the base address of the load lib.\nfinally i got it worked. i hook into linker's call_constructor and get the soinfo's 'this' pointer which by adding some offset to get the base address of the shared lib.\nand i found a post http://www.giovanni-rocca.com/giving-yourself-a-window-to-debug-a-shared-library-before-dt_init-with-frida-on-android/ that also solved my problem.. thank u very much. i will learn about that.. ",
    "siebeneicher": "Latest frida 12.2.29 client + server.\nIt's: com.google.android.youtube. ",
    "rybby": "I have a same error: frida-ps -U\nFailed to enumerate processes: unable to connect to remote frida-server: Error s\nending data: \u60a8\u7684\u4e3b\u673a\u4e2d\u7684\u8f6f\u4ef6\u4e2d\u6b62\u4e86\u4e00\u4e2a\u5df2\u5efa\u7acb\u7684\u8fde\u63a5\u3002. I trying the frida-server_7.2.4_android-arm64(9.1.1, 11.0.1, 12.0.2, 12.0.8, 12.2.29), but it is no working\n. ",
    "mwq0106": "me,too. ",
    "everystone": "Your function f() doesn't take any arguments right, so your hook code is invalid.\nWhat you could do is hook printf, and log the second argument, that would get you the number.\nex: printf(\"printf() is at %p\\n\", printf);\nonEnter: function(args) {\n        send(args[1].toInt32());\n    }\n. ",
    "maldiohead": "thx, could you give me any details?. ",
    "ViRb3": "Same issue on a OnePlus 5T Running Android 9.. ",
    "sc07kvm": "Same issue on a Pixel 2 Android 9(PPR2.181005.003)\n./frida-server --version\n12.4.0. ",
    "schirrmacher": "I have seen that unc0ver is not supported yet.. ",
    "MuchiMuchiPink": "Did you update frida on your mac as well? Not just frida-tools.. 12.4.0 is the latest release from last week but @oleavr did the commit yesterday. Correct me if I'm wrong. Couldn't compile the new Binary having no access to MacOS rn and the iOS toolchain.. ",
    "mrchisel14": "@mezdanak comment, https://github.com/frida/frida/issues/792#issuecomment-470029154, on manually installing frida-server worked to fix this issue for me.. ",
    "mechanico": "@Daemonceltics  just downloaded https://github.com/frida/frida/releases/download/12.4.0/frida-server-12.4.0-ios-arm64.xz and run on my iOS 12.1.1-b3 device. (Copied to /usr/bin/ with scp, then run chmod +x, and finally started in Daemon mode -D.) Now it works like a charm.\nThanks for the advice @oleavr !\nNevertheless, I'm facing the same issue as @daukstsoskars.\n\nexpecting to read a single byte for receiving credentials but read zero bytes. @herven90,\n\nAs mentioned earlier, I was able to execute the frida-server but I'm also receiving the following error:\n\nFailed to attach: expecting to read a single byte for receiving credentials but read zero bytes' \n\nUnfortunately, I have no solution on this one until now. Falling back to lldb to extract unencrypted binaries and to patch the code flow... \nI will chase this one up later this week again, got several jailbroken devices (different CPU's) on 12.1.1-b3. Keep you up-to-date, here.. Thanks @oleavr, it worked.\nOn Mac:\n\nDownload the frida repo\nCreate a code signing certificate (https://sourceware.org/gdb/wiki/PermissionsDarwin#Create_a_certificate_in_the_System_Keychain)\nExport the certificate in environment variables\n\n$ make\n$ make server-ios-thin\n\nCopy the binary to the iOS device, e.g. with scp\n\nOn device:\n- create ent.xml \n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\">\n<plist version=\"1.0\">\n<dict>\n    <key>com.apple.springboard.launchapplications</key>\n    <true/>\n    <key>platform-application</key>\n    <true/>\n    <key>get-task-allow</key>\n    <true/>\n    <key>proc_info-allow</key>\n    <true/>\n    <key>task_for_pid-allow</key>\n    <true/>\n    <key>run-unsigned-code</key>\n    <true/>\n    <key>com.apple.system-task-ports</key>\n    <true/>\n</dict>\n</plist>\n- Run the following command on the frida-server binary\n$ ldid -Sent.xml /usr/sbin/frida-server\n- Start frida-server as a daemon\n$ frida-server -D\nOn Mac, now everything works like a charm :), e.g. dumping unencrypted binaries.. @scugn1zz0 did you make sure, that no other frida-server process is running? \n$ ps -A | grep frida\nBtw if you get the \"Killed 9\" error, something is wrong with the signing. Maybe revisit the content of ent.xml.. ",
    "daukstsoskars": "I get the same issue as before, i checked my version of frida-server on the iOS and it looks like i am running latest version of frida on pc and iOS device.\n//inside /usr/sbin\nfrida-server --version\n2019-03-06 09:37:05.296 frida-server[3705:389197] === SSL Kill Switch 2: Preference file not found.\n2019-03-06 09:37:05.296 frida-server[3705:389197] === SSL Kill Switch 2: Substrate hook disabled.\n12.4.0\n. ",
    "kernel-sanders": "I am having the reboot issues from #788 on iOS 11.1.2 unc0ver. Tried mechanico's solution but got the following:\niPhone:/tmp root# mv frida-server-12.4.0-ios-arm64 /usr/sbin/frida-server\niPhone:/tmp root# chmod +x /usr/sbin/frida-server \niPhone:/tmp root# frida-server --version\n12.4.0\niPhone:/tmp root# frida-server -D       \nThe process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().\nBreak on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.\nThe process has forked and you cannot use this CoreFoundation functionality safely. You MUST exec().\nBreak on __THE_PROCESS_HAS_FORKED_AND_YOU_CANNOT_USE_THIS_COREFOUNDATION_FUNCTIONALITY___YOU_MUST_EXEC__() to debug.\nIf I run it without -D, a frida-ps -U on my mac crashes the device with Failed to enumerate processes: the connection is closed\nDowngrading to 12.3.6 on the phone and mac results in the same issue.. @scugn1zz0 Download the frida repo by cloning it:\ngit clone https://github.com/frida/frida.git\nFollow the link on how to create a self signed code signing cert with Keychain Access, then export the name of that cert like so\nexport IOS_CERTID=frida-cert\nmacOS will lookup the cert in the keychain and it does not need to be in the frida directory.\nOn a 5S 11.1.2 I had to run frida in the foreground for it to work correctly. I also had to add the following to the entitlements to allow frida-server to spawn processes.\n<key>com.apple.frontboard.debuggingapplications</key>\n    <true/>. ",
    "AdamWang1102": "Same issue on iPhone6 iOS12.0 unc0ver. When I tap 'frida-ps -U' on my mac the phone crash & reboot with Failed to enumerate processes: the connection is closed. ",
    "herven90": "\n@Daemonceltics just downloaded https://github.com/frida/frida/releases/download/12.4.0/frida-server-12.4.0-ios-arm64.xz and run on my iOS 12.1.1-b3 device. (Copied to /usr/bin/ with scp, then run chmod +x, and finally started in Daemon mode -D.) Now it works like a charm.\n\nHi @mechanico,\ncan i check with you how do you execute the file (frida-server-12.4.0-ios-arm64.xz) in your iOS device? I have already chmod +x and moved the file to /usr/sbin/frida-server in my iOS device. Unpacked the file to retrieve binary and im still unable to get frida working on my end.\niOS 11.3.1 with Frida-server 12.4.0\nJailbroken via unC0ver\nOS: Kali installed with Frida 12.4.0\nThanks.. ",
    "ehvanr": "\nSame issue on iPhone6 iOS12.0 unc0ver. When I tap 'frida-ps -U' on my mac the phone crash & reboot with Failed to enumerate processes: the connection is closed\n\nI can confirm the same on iPhone X 12.1.2 unc0ver. Same result with the 12.4.0 frida-server binary as well. . This is working now as of Frida 12.4.1. ",
    "scugn1zz0": "@mechanico I\u2019m sorry to bother you, could you please be a bit more detailed with the passages shown above?\nWhat do you mean by downlod the frida repo? You mean downlod the source code to build it right?\nAlso how does exporting the certificate in environment variables work? Do I have to use the command \u201cmake\u201d while I\u2019m in the folder of both frida source code and the newly created certificate?\nI\u2019m really sorry to bother you, as you may have understood I am not a pro user at all, I\u2019m learning, and when I got to know frida months ago, no jailbreak was available so I\u2019m very excited in the idea of starting to use this tool now.\nThanks a lot. Thanks a lot for the help @kernel-sanders.\nUnfortunately I am having this error \"Failed to enumerate processes: unable to connect to remote frida-server: Unable to connect (connection refused)\"\nAs it is not installed or active on the iphone.\nThe device is an iPhone X on iOS 12.1 jailborken with unc0ver 3.0.0~b45\nWhat have i done:\n\ngit cloned the repo\ncreated the system certificate\nmake e make server-ios-thin (I think that the certificate \"thing\" worked properly because while building, Terminal app asked for my password to use the certificate)\nthen I went into the cloned folder frida>build>frida_thin-ios-arm64>bin>frida-server and copied this file through ssh into my iPhone at /usr/sbin/\nthen I put in the same directory /usr/sbin/ the file ent.xml as said by @mechanico and added the line that you (@kernel-sanders suggested)\nthen I did ldid -Sent.xml /usr/sbin/frida-server\nthen chmod +x frida-server\nand frida-server -D (the anser i get from iphone is \"Killed: 9\")\n\n...\nThen I try the frida test: frida-ps -U\nBut i get: Failed to enumerate processes: unable to connect to remote frida-server: Unable to connect (connection refused)\nP.S.) I tried both /usr/bin/ and /usr/sbin/ for doing this procedure, but I feel like something is missing.\nP.S. 2) Previously I had installed frida from cydia repo, but before doing these procedures I removed it\nP.S. 3) previoulsy, when frida was installed through Cydia, it provoked reboots every time I launched the \u201csmoke\u201d test (as it is called on the offical website documentation)\nA screenshot of the folder structure after building\n. Hey @mechanico and @ehvanr Thanks a lot for the precious help! now everything is up and running.\nI can attach to process, and I can do frida-trace -U -i \"CCCryptorCreate*\" Twitter smoothly.\nI can't really dump apps to be honest, using \"frida-ipa-dump\" or others, but I'm not a PRO user enough to say that it is due to frida.\nAnyway, let me take this opportunity to ask you if there are official or unofficial irc or telegram channel to share tips and advices about frida usage (or even more in general iOS RE procedures).\nThanks a lot for the help.\nTo me this issue can be closed!. ",
    "evandrix": "\nHey @mechanico and @ehvanr Thanks a lot for the precious help! now everything is up and running.\nI can attach to process, and I can do frida-trace -U -i \"CCCryptorCreate*\" Twitter smoothly.\nI can't really dump apps to be honest, using \"frida-ipa-dump\" or others, but I'm not a PRO user enough to say that it is due to frida.\nAnyway, let me take this opportunity to ask you if there are official or unofficial irc or telegram channel to share tips and advices about frida usage (or even more in general iOS RE procedures).\nThanks a lot for the help.\nTo me this issue can be closed!\n\ndump:decrypted(.ipa) - used to be Clutch(2), then Rasticrac, now CrackerXI\nnow that v12.4.1 is released, this issue can be closed!. oh ok :+1: . ",
    "ethemes": "To whom it may assist: after digging into this further I figured out that, for some reason, Cydia Impactor was not correctly signing and patching my IPA only when it came to FridaGadget. My workaround was to use: appmon. ",
    "priyankn": "Thanks for your reply! I can successfully create an object with arrayWithObject:\nFor arrayWithObjects:,  I was aware of the nil terminated arg, but doesnt seem to work as expected.\n[iPhone::]-> var arr = ObjC.classes.NSMutableArray.arrayWithObjects_(string, 'nil')\nError: access violation accessing 0x1\n[iPhone::]-> var arr = ObjC.classes.NSMutableArray.arrayWithObjects_(string, nil)\nReferenceError: identifier 'nil' undefined. ",
    "tomoyo": "One more thing, I traced the source code of java.lang.Runtime.exec and found it call the system execvp in libc.so at last. But when I attach to execvp, the callback never gets called, do you know why?. Thanks for reply, oleavr.\nI have followed your tips to built a server version: 12.4.0.10.g056ca60, and built the frida-tool-example.\nSince I don't know the typescript, I just copy my original code to the agent.js after built like this:\n```js\n    /#PURE/\n    _regenerator.default.mark(function _callee() {\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"-Hello World from PID: \" + Process.id);\n              console.warn(\"Example warning\");\nif(Java.available) {\n    Java.perform(function () {\n    var RootPackages = [\n\n...\nIt still stuck at exec.call, can you give more tips ?\nThanks in advance, love your work!. As I dig into child gating, I start to think my stuck is not caused by it.\nI'm not trying to gating the output of the child process, so I never enable it.js\nconsole.log(\"\\n\\nRuntime.real.exec: \" + JSON.stringify(cmdarr) + \", \" + env + \", \" + file);\nresult = exec.call(this, cmdarr, env, file);  //<----------\nconsole.log(\"Runtime.real.exec: \" + result);\n```\nThe stuck happens in java.lang.Runtime.exec, and it never return. ",
    "supercop89": "@enovella:\nThanks. So there is no difference between the python example and a javascript hook.\nIt's enough to hook with class name + unicode method? We tried that but no hooking process.\nIs it necessary to read the javascript file with unicode style?. Ok thanks. Do you have some common examples from your work to hook unicode methods?. Ok thanks.\nIs there also a way to monitor (live) the classes which are loaded. For example live monitoring during load Activity. Therefore you know which classes where loaded after a button click?. "
}