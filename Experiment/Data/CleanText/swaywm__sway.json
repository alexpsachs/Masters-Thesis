{
    "onny": "Nice write up! Especially looking for a i3 statusbar\n. @AreM: maybe it does only work with wayland windows so far?!\n. @AreM: maybe it does only work with wayland windows so far?!\n. Lets stay on Github until atleast one stable release is made. After that, the project might be \"mature\" enough to move on GitLab ... but now, we'll need as much contribution as possible\n. Lets stay on Github until atleast one stable release is made. After that, the project might be \"mature\" enough to move on GitLab ... but now, we'll need as much contribution as possible\n. Wow juju2143, do you mind sharing a screenshot of a working example? Looking forward to trying it out!\n. Wow juju2143, do you mind sharing a screenshot of a working example? Looking forward to trying it out!\n. Now I'm using sway with i3status and this configuration:\n status_command i3status\nUnfortunately I don't have the colors of i3status in the swaybar :(\n\n. Now I'm using sway with i3status and this configuration:\n status_command i3status\nUnfortunately I don't have the colors of i3status in the swaybar :(\n\n. Thanks for the info, sounds awesome :)\n. Thanks for the info, sounds awesome :)\n. Looks like there's already a pull request for that https://github.com/SirCmpwn/sway/pull/394#discussion_r48265119 :)\n. Looks like there's already a pull request for that https://github.com/SirCmpwn/sway/pull/394#discussion_r48265119 :)\n. I changed i3status output_format to i3bar but unfortunately swaybar doesn't render it :(\n. I changed i3status output_format to i3bar but unfortunately swaybar doesn't render it :(\n. Do you have i3status as input? And how did you configure it?\n. Do you have i3status as input? And how did you configure it?\n. i3status config:\ngeneral {\n        output_format = i3bar\n        colors = true\n        interval = 5\n}\nsway config:\nbar {\n        status_command i3status\n        font pango:DejaVu Sans Mono 8\n    }\ni3status output:\n{\"version\":1}\n[\n[{\"name\":\"ipv6\",\"color\":\"#00FF00\",\"full_text\":\"2a02:8071:****\"},{\"name\":\"disk_info\",\"instance\":\"/\",\"full_text\":\"1.0 GiB\"},{\"name\":\"run_watch\",\"instance\":\"/var/run/dhclient*.pid\",\"color\":\"#FF0000\",\"full_text\":\"DHCP: no\"},{\"name\":\"run_watch\",\"instance\":\"/var/run/vpnc/pid\",\"color\":\"#FF0000\",\"full_text\":\"VPN: no\"},{\"name\":\"wireless\",\"instance\":\"wlp2s0\",\"color\":\"#00FF00\",\"full_text\":\"W: (077% at ***) 192.168.1.33\"},{\"name\":\"ethernet\",\"instance\":\"enp3s0\",\"color\":\"#FF0000\",\"full_text\":\"E: down\"},{\"name\":\"battery\",\"instance\":\"/sys/class/power_supply/BAT1/uevent\",\"full_text\":\"FULL 93.18%\"},{\"name\":\"load\",\"full_text\":\"0.25\"},{\"name\":\"tztime\",\"full_text\":\"2015-12-22 22:33:28\"}]\nBut whole swaybar is somehow broken after that :(\n. i3status config:\ngeneral {\n        output_format = i3bar\n        colors = true\n        interval = 5\n}\nsway config:\nbar {\n        status_command i3status\n        font pango:DejaVu Sans Mono 8\n    }\ni3status output:\n{\"version\":1}\n[\n[{\"name\":\"ipv6\",\"color\":\"#00FF00\",\"full_text\":\"2a02:8071:****\"},{\"name\":\"disk_info\",\"instance\":\"/\",\"full_text\":\"1.0 GiB\"},{\"name\":\"run_watch\",\"instance\":\"/var/run/dhclient*.pid\",\"color\":\"#FF0000\",\"full_text\":\"DHCP: no\"},{\"name\":\"run_watch\",\"instance\":\"/var/run/vpnc/pid\",\"color\":\"#FF0000\",\"full_text\":\"VPN: no\"},{\"name\":\"wireless\",\"instance\":\"wlp2s0\",\"color\":\"#00FF00\",\"full_text\":\"W: (077% at ***) 192.168.1.33\"},{\"name\":\"ethernet\",\"instance\":\"enp3s0\",\"color\":\"#FF0000\",\"full_text\":\"E: down\"},{\"name\":\"battery\",\"instance\":\"/sys/class/power_supply/BAT1/uevent\",\"full_text\":\"FULL 93.18%\"},{\"name\":\"load\",\"full_text\":\"0.25\"},{\"name\":\"tztime\",\"full_text\":\"2015-12-22 22:33:28\"}]\nBut whole swaybar is somehow broken after that :(\n. Yep nice, it works for me now! Thank you!\n. Yep nice, it works for me now! Thank you!\n. Uff, just recognized that my left mouse button on my laptop is broken ... I usually use the touchpad for clicking. But this issue is wlc related, isn't it?\n. Uff, just recognized that my left mouse button on my laptop is broken ... I usually use the touchpad for clicking. But this issue is wlc related, isn't it?\n. @somebears: Do you know any workaround or hack for sway? Not sure how to use this wlc callback ...\n. @somebears: Do you know any workaround or hack for sway? Not sure how to use this wlc callback ...\n. Good point @mikkeloscar\n. Good point @mikkeloscar\n. Wohoo, the changes in the pull request are already working! Thank you colemickens!\n. Wohoo, the changes in the pull request are already working! Thank you colemickens!\n. @SirCmpwn: Both configuration formats should work ...\n. @SirCmpwn: Both configuration formats should work ...\n. It looks fine now for me, thanks :)\n. It looks fine now for me, thanks :)\n. alive4ever: I guess its related to this issue: XWayland popups are poorly sized https://github.com/SirCmpwn/sway/issues/731\n. alive4ever: I guess its related to this issue: XWayland popups are poorly sized https://github.com/SirCmpwn/sway/issues/731\n. Same issue for me, had more luck with the git version ....\nsway 0.10-1\nwlc 0.0.7-1\n. Same issue for me, had more luck with the git version ....\nsway 0.10-1\nwlc 0.0.7-1\n. I'm using sway 0.11 stable from the ArchLinux repo now and it works as long as I use the wlc-git package from the AUR (wlc stable reintroduces this issue). I'm using sway 0.11 stable from the ArchLinux repo now and it works as long as I use the wlc-git package from the AUR (wlc stable reintroduces this issue). This bug is still present in:\n- wlc 0.0.5\n- sway 0.9\n. This bug is still present in:\n- wlc 0.0.5\n- sway 0.9\n. This bug is still present in:\n- wlc-git (from today)\n- sway-git (from today)\n- wayland 1.12.0\n- wayland-protocols 1.7\n. This bug is still present in:\n- wlc-git (from today)\n- sway-git (from today)\n- wayland 1.12.0\n- wayland-protocols 1.7\n. 10$ to wayland/x11 clipboard sync damon :). No I don't think so. I also have this in some native html5 webapps (like OnlyOffice web editors etc.). @ianyfan: I'm also not able to click on nm-applet --indicator nor blueman-applet. Is there any working example?. ",
    "jdiez17": "workspace [name] done.\n. ",
    "progandy": "You forgot the scratchpad functionality.\n. @SirCmpwn In the longterm, sway should implement configuration options for input and output devices, but that has to wait until wlc implements an API for that. Maybe even provide some ipc options to allow dynamic changes like xinput/xrandr.\nCloudef/wlc#6\nCloudef/wlc#37\n. I found a small feature that is missing on this list: workspace number <number>\nI use that for my keybindings so that I can easily rename a workspace while keepig the hotkey.\n. i3 allows you to select workspaces that start with a number before the name using only the number part. You can also define a default name that is ignored if a workspace with the same number already exists. Numbered workspaces are also useful to keep them in the same order regardless of the name.\n5.13. Strip workspace numbers: http://i3wm.org/docs/userguide.html#_strip_workspace_numbers\n6.7.1. Named workspaces: http://i3wm.org/docs/userguide.html#_named_workspaces\nUpdate: Implemented with PR #352 and #424\n. @spagy That means this is a bug and instance is used instead of class\nWM_CLASS(STRING) = [$INSTANCE], [$CLASS]\nEdit: AFAIK wlc copies the whole string list from xorg, so it should be stored as $INSTANCE\\0CLASS\\0. If the view is an x11 view, you should try to parse the class this way I think.\n. @ammgws\n\nCould you please clarify how you are renaming workspaces in sway?\n\nIn most cases I start with a fresh workspace and give it a name, e.g. swaymsg workspace 5:new_project. My main environment is still i3, though. If I really have to do it in sway, then I can do something like this.\n```\n!/bin/bash\ntopfocus=\"\"\nfor i in {1..20}; do\n   topfocus=\"focus parent ; $topfocus\"\ndone\nswaymsg \"$topfocus\" move container to workspace \"$1\" ';' workspace \"$1\"\n. @hyiltiz that should add instead of replace...topfocus=\"focus parent ; $topfocus\"``. I believestringop.hmust not definestrdup. Includestring.h` instead.\n. This is how it looks for me:\n\n. @onny: Yes, I have i3status. I configured it with output_format=i3bar, colors=true and interval=5.\n@feliwyn: Works with conky, too. Currently you have to send everything on a single line with less than 1024 characters total. I guess there might be some problems with buffers.\n. @feliwyn Can you try it with these changes #402?\n. Maybe an image of a high wire obstacle course?\nI don't have one with a good license, though.\nWell, here is another idea for a more abstract background.\n\nEdit: The close up view of the leaves looks a bit like early autumn and assoicates with herbstluftwm in my mind.\n. The most common solution is to use librsvg for svg images. With that you already pull gdk-pixbuf2, so use that to load other formats. My installation supports ani, bmp, gif, icns, ico, jasper (jpeg-2000), jpeg, pnm, qtif, tga, tiff, xbm, and xpm\n. I'll do that, I never configured travis but it shouldn't be too difficult. Do you want a fixup commit or shall I amend the old one / force push the pull request?\nIs swaybg/CMakeLists.txt the right place or should the dependency be added in the root CMakeLists.txt and do you want a FindGDKPixbuf.cmake?\n. I see that, but cmake needs the dependency, too. I simply added a pkg_check_modules. Should I leave it like that or is it better to do it just like e.g. FindPango.cmake?\nBy the way, the second png path was there, since the gdk path is stupidly long and involves copying pixel colors around and calculating premultiplied alpha.\n. Yes, I can write it. I'll just copy FindPango and replace pango with gdk_pixbuf. \nIt may take some time, though. The alpha-conversion in my gdk->cairo converter is buggy and does strange stuff. I guess somewhere is a small incrementation error or something like that. That was mostly hidden because of the alternative png codepath.\n. This should be the final version. I force pushed to replace the old one.\nMy tests with different images worked so far. Even SVG works, but the resolution is taken from the svg metadata and the advantages of vector graphics are lost.\n. I guess sway should also support a custom command for the swaybar. i3 has i3bar_command <command>, so maybe swaybar_command <command> works.\n. Regarding trayicons, I suggest you use the StatusNotifier / AppIndicator protocol which is promoted heavily as the new way to display status icons. I guess that is what wayland applications will use.\nFor those who need old tray icons, simply try running e.g. stalonetray. Maybe implement a special case so that swaybar can swallow stalonetray.\n. I think there may be an error in parse_color. It should use strtoul instead of strtol with an explicit cast to uint32_t.\nhttps://github.com/SirCmpwn/sway/blob/44a4905466599155fb7203a585dfca1ce1720b33/common/util.c#L107\n. I can do that, but I'll have to test it first.\n. Well, I can't reproduce it, that may depend on the specific strtol implementation. I'll send the patch anyways.\n. @colemickens if you wish for a universal interface, I think you should define a wayland protocol extension which can be used to implement a configuration utility analog to setxkbmap/xinput. Static configuration can be kept in the sway config.\n. Request updated with fixed commits.\n. I reuploaded the same commit to run travis again.\nSince I got a success from a conky user, I request the pull now.\n. It may be useful, but maybe this should be configurable, something like send_event_bindsym as a boolean or tristate with the values always, marked, and never\nThen add another parameter --event for the bindsym option to select bindsyms to send events for.\nBy the way, to keep i3 compatibility, you could use add a symbol member if there is only one key.\n. Ok, I'll live with it :)\nI just found some close() calls without an if-clause in spawn_sh_cmd, so I'll just close the whole PR then. I guess this can be done during refactoring, too.\n. I think sway has to call arrange_windows after the window has been moved in the tree, so this pull request adresses that.\n. I can confirm that with xterm. weston-terminal works. \n. I can still reproduce it with sway, but it has gotten a bit better. A floating xterm is still increasing in size. If I send it to the scratchpad, the size increases after I show it the first time. After I hide and show it again the size is fixed.\nCurrently I don't have orbment installed, so I cannot test that.\n. I don't think this is a bug. I can do the same with xorg in all directions with my touchpad. I think this should be related to mouse pointer acceleration. In one direction you move your finger a bit faster and that results in a faster pointer movement.\n. Normally, wl_display_dispatch should be used after a poll/select event. I tried that once, but it didn't work.\n```\n    int wlfd = wl_display_get_fd(display);\nwhile (wl_display_dispatch_pending(display) > 0);\nwl_display_flush(display);\n\nPOLL/SELECT wlfd\n\nif (IN_EVENT ON wlfd) {\n    wl_display_dispatch(display);\n}\n\n```\n. Great. by the way, you don't have to fill the pfd structure in each iteration. Once before the loop is enough. That is different from select.\n. I reformatted the commit and split it in two parts with the dicussed change.\n. It works for me on an up-to-date Arch Linux x64 (testing) with\nwlc-git r910.5deece7-1 (== v0.0.1-9-g5deece7)\nsway-git r1441.0d4c31e-1 (== 0.3-13-g0d4c31e)\nDo you have some autostart exec commands in your sway config?\n. i3 uses $mod-h for splith and shifts the hjkl movement one key to the right, to \"jkl\u00f6\" with a german layout. I hated that, so I set it back to the well-known hjkl and moved splith to $mod-b, since b was unset and is next to $mod-v for the vertical split\n. Maybe it would be possible to import the files as a subtree? I guess that might satisfy both requirements \"no external static libraries\" and \"easier support with code-sharing\". People using the source without sending changes to the extension don't have to know about the subtree either, unlike a submodule.\n. delete_output doesn't do the same as new_workspace and has to be fixed.\ndelete_output: https://github.com/SirCmpwn/sway/blob/5b0af661b0b369a4edba71eb3c5d0a9ad81428ce/sway/container.c#L354\nnew_workspace: https://github.com/SirCmpwn/sway/blob/5b0af661b0b369a4edba71eb3c5d0a9ad81428ce/sway/container.c#L183\n. Are you sure this is right? I think that workspaces without numbers should not be sorted.\n. qsort is not stable, it doesn't guarantee the order. [1] AFAIK glibc is using a stable mergesort, but that isn't guaranteed.\nThere are ways to make it stable, e.g. by adding an order field to the workspace structure. [2]\n[1] http://www.gnu.org/software/libc/manual/html_node/Array-Sort-Function.html\n[2] http://nullprogram.com/blog/2014/08/29/\n. I think the keyboard leds are managed by libinput without any way to toggle them manually.\n. Is this even possible in sway without changing wlc? I think the whole keymapping is hidden and not accesible.\n. Did you try to run with all three monitors without disabling LVDS?\n. Well, maybe input and output could use fnmatch to allow pattern matching?\n. That may be the result of a double free bug in wlc. It is called once inside of wlc_keymap in case of an error and once again during wlc_seat_release which is called after wlc_keymap fails\n@Cloudef: Should wlc_keymap_release set the structure members to NULL? The alternative may be to do that each time after the wlc_keymap constructor fails.\n. It should be possible to call something like this after sway has started:\n```\n!/bin/bash\nsp=$(gdbus call -y -d org.freedesktop.login1 -o /org/freedesktop/login1 -m org.freedesktop.login1.Manager.GetSessionByPID $$ | sed -n \"s/^(objectpath '(.)'.$/\\1/p\")\nmaybe use $XDG_SESSION_ID instead\nsp=\"/org/freedesktop/login1/session/$XDG_SESSION_ID\"\ngdbus call -y -d org.freedesktop.login1 -o \"$sp\" -m org.freedesktop.login1.Session.SetIdleHint false\n```\n. > I found the i3 behaviour very useful for single monitor setups, especially on laptops, where your screen size is often limited. For example, you could code in a transparent vim, and on the 'background' / behind the window you could see datasheets/code examples/videos/whatever you like.\nReal transparency is really unnecessary, and these i3 \"features\" are better served with a script that makes a screenshot and sets it as your background, then bind it to a shortcut.\nFor a video background, use/create a player that supports playing in the desktop layer of the layer-shell..     man 5 sway-output\nhttps://github.com/swaywm/sway/blob/ea097631af79d49ec7c4f63e9167a52a82444643/sway/sway-output.5.scd#L25. Related to geis:\nhttps://launchpad.net/grail\nhttps://wiki.ubuntu.com/Multitouch/Architecture. I think that needs a new export in wlroots, maybe wlr_keyboard_set_modifiers to complement wlr_keyboard_get_modifiers.. Now everything should be there. I had to clean up my local clone first.\nI am a bit unsure about the \"on sway startup\", maybe \"and reloads the keyboard layout\" would be better?. I can do that. Should I somehow document that changing the value for NumLock resets CapsLock to the value stored in xkb_capslock as well? Maybe a general note that changing one xkb_ value applies all stored xkb_ values again.. The flags are currently set in the keyboard configuration and then applied with apply_keyboard_config / sway_keyboard_configure. There is no way to know which flag change was requested. I think I'd need a way to do different things when\n sway detects a new keyboard (startup or hotplug)\n swaymsg is sent for an existing keyboard. Is there a way to do that?\nI think I could create a status flag in the input config that the next call should only update the marked modifier, but that feels like dirty code. There shouldn't be status information in a configuration structure.. Somehow I missed that list, it is so short.\nShould this stay an individual setting for each keyboard then or simply a global option for all keyboards? I think I'd prefer the global option then.. I can't add a subcommand of input to the config_commands list. I'll mark this as WIP and keep on thinking, maybe I'll get a good idea.. I had another idea. What do you think about allowing the swaymsg command and just storing the new value? It will be applied only after hotplugging the keyboard or changing its layout.. @SirCmpwn, @RedSoxFan, the pull request is ready for review. I kept it restricted to the configuration file for now. Sometimes I try to perfect and polish too much.\nPS: I had to rebase it against the current master.. There are at least some commands that don't support the same boolean representations, for example focus_wrapping. sway only allows yes, no and force. i3 allows anything. \nforce is matched the same,\nyes can be anything that eval_boolstr recognizes (1, yes, on, true, enable, active)\nno is everything else. Breaking opacity for select views doesn't sound good to me. If unfocused windows are set to partially transparent, I'd like to make specific windows opaque, for example the pdf viewer while editing a latex document.. @clarcharr Did you try to run mpv with --stop-screensaver --gpu-context=wayland --vo=gpu?. Not everything that isn't in i3 is extraneous. Some of the properties have to be included by sway to handle output configuration that is done by xrandr in Xorg.. Out of security considerations, i3lock went for not displaying the modifier status at all before the password entry is complete. The list of enabled modifiers is only displayed when the user is notified about a wrong password. Is that something sway should do as well?\nhttps://github.com/i3/i3lock/pull/5#issuecomment-74132471. Maybe sway needs something like a oneshot bindkey to bind to any user input like mouse movement, clicks or pressed keys. Something like one or more of these options:\nbindsym --once UserInput <command>\nbindsym --once AnyKey <command>\nbindsym --once MouseMove <command>\nbindsym --once MouseClick <command>. If you need pseudo code, here:\n\nswayidle --usr1-idle DPMS_OFF --usr1-resume DPMS_ON\n  LOOP:\n    wait for SIGUSR1\n    create timer 0-timeout\n    react to timeout 0 or directly call --usr1-idle\n    wait for resume\n    call --usr1-resume\n    destroy timer 0-timeout\n  goto LOOP\nkillall -USR1 swayidle\nOr as oneshot:\nswayidle --oneshot DPMS_OFF --resume DPMS_ON\n    create timer 0-timeout\n    call --oneshot\n    wait for resume\n    call --resume\n    destroy timer 0-timeout\n    exit swayidle\n. It looks like there is already a build option for meson called sway-version\nBut if you use that, provide the the build date, the git descibe --always --tags output as well as the branch the source archive was exported from in your version string.. If that RDP server is implemented, then you could run a headless sway instance and connect to it I think. \nIf you want connections for multiple users with automatic sway startup and shutdown, then you might have to integrate it in something like ogon some background. This is using xkb_state_update_mask on the xkb state. Is the loss of some part of the keyboard state acceptable in this case? xkb_numlock is limited to the configuration file because of that.\n\nhttps://xkbcommon.org/doc/current/group__state.html#ga566677517a286527e05efc5680adbe6b\nThe serialization is lossy and will not survive round trips; it must only be used to feed slave state objects, and must not be used to update the master state.. If you are using a new git build of wlroots with the sway beta-1, then the floating logic may be broken because of swaywm/wlroots#1327\nIt is fixed in the sway master branch with swaywm/sway#2926 .. Ideally wayland applications would use monitor independent units (points, mm, inches) and automatically scale their GUI to the detected monitor dpi instead of using pixels and then the scale factor.. @ianyfan i3 just forwards notifications it receives from RandR\nhttps://i3wm.org/docs/3.e/ipc.html#_available_events\noutput (1)\n   Sent when RandR issues a change notification (of either screens, outputs, CRTCs or output properties).\n\nSince the only payload is an \"unspecified\" change, the response to this event would be to call get_outputs.\n. Interesting. If the numbers cannot be fixed, then criteria matching for make, model, and serial would be useful to implement.. Seems that way, what is missing is the documentation in the sway-output manpage.\noutput \"$make $model $serial\" ...\ne.g. output \"Dell Inc. DELL U2715H H7YCC88202KS\" mode 1920x1080. > Try to set its layout to tabbed\n\nNothing will happen.\nI'm using no borders at all, that's maybe related?\n\nWhen there are no borders, then the master branch doesn't show the tabs if there is only one window, you have to open at least two. (65328ef60c9468ae44b4b1d6316d604c47293ec3). @SirCmpwn I still run i3 most of the time, here are some tests:\n```\n$ i3 --version\ni3 version 4.15 (2018-03-10) \u00a9 2009 Michael Stapelberg and contributors\n$ cat /tmp/i3.conf \nhide_edge_borders none\ndefault_border pixel\nset $mod Mod4\nbindsym $mod+v split v\nbindsym $mod+b split h\nbindsym $mod+t layout toggle splitv splith tabbed stacked\nbindsym $mod+s layout stacked\nbindsym $mod+Shift+c reload\nbindsym $mod+Shift+r restart\nbindsym $mod+Shift+e exec --no-startup-id i3-msg exit\nbindsym $mod+Return exec termite\nchange focus\nbindsym $mod+h focus left\nbindsym $mod+j focus down\nbindsym $mod+k focus up\nbindsym $mod+l focus right\nmove focused window\nbindsym $mod+Shift+h move left\nbindsym $mod+Shift+j move down\nbindsym $mod+Shift+k move up\nbindsym $mod+Shift+l move right\n**hide_edge_borders smart,default_border pixel```**\n\n2 terminals open\n  splitv, splith - no titlebar\n  tabbed, stacked - titlebar visible\n1 terminal open \n  splitv, splitv - no titlebar\n  tabbed, stacked - no titlebar\n\nhide_edge_borders smart, default_border normal\n\ntitlebars always visible\n\nhide_edge_borders none, default_border pixel\n- 2 terminals open\n  splitv, splith - no titlebar\n  tabbed, stacked - titlebar visible\n- 1 terminal open\n  splitv, splitv - no titlebar\n  tabbed, stacked - no titlebar\n- 2 terminals side by side (splith), left terminal in a tabbed container:\n  - no titlebar visible\n  - while focusing on the left terminal, open another one\n  - left tabbed container shows two terminals with tabbar.. @emersion: libinput doesn't want that option\nhttps://bugs.freedesktop.org/show_bug.cgi?id=89323. It seems some people want this behaviour (#2912, #2987), maybe a configuration option is better like\nhide_lone_tabs\n\nEdit: Still, I am fine with removing it since the use case seems to mostly for full-screen views. Extending hide_edge_borders to hide titlebars if only one view exists in a workspace is better. (In a separate pull request).. Can you set DP-5 to 0/0 and eDP-1 to position 0/1080 instead?\noutput eDP-1 scale 1.25\noutput eDP-1 pos 0 1080 res 2560x1440\noutput DP-5 pos 0 0 res 1920x1080. Does toggling DPMS with ```swaymsg``` fix the blank monitor?. Your first sway log already says it all:\n\n\nlaunch with --my-next-gpu-wont-be-nvidia \n\nhttps://github.com/swaywm/sway/pull/2896#issuecomment-432489890\n. Or maybe there should be a mechanism to configure the window order depending on the layer-shell namespace? Perhaps with some standardized values for the namespace?. Maybe this should be optional, let bindsym detect a parameter like --code to switch the behaviour? Or do the reverse with bindcode --fromsym\n(If you use two layouts with different positions for the latin letters (e.g. de and us) I personally prefer the binding follows the new layout.)\nEdit: Tried it again, and it seems muscle memory trumps my preference. I quickly switch z and y, but for the shortcuts I keep pressing the original position.. Then it should be possible to use it with for_window [criteria] ... as well I think.\nfor_window [criteria] inhibit_idle  -> configuration for future windows\n[criteria] inhibit_idle  -> assign to currently open windows\ninhibit_idle  -> assign to focused window only. Your example result for two commands is wrong. It returns an array with two elements, but only if the first command is parsed succesfully. After a parser error no further commands get a success entry, but if the command itself fails the others are executed:\n```\n$ i3-msg \"nop ; nop\"       \n[{\"success\":true},{\"success\":true}]\n$ i3-msg \"nop ; op\" \nERROR: Your command: nop ; op\nERROR:                     ^^\nERROR: Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\n[{\"success\":true},{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\",\"input\":\"nop ; op\",\"errorposition\":\"      ^^\"}]\n$ i3-msg \"op ; nop\"              \nERROR: Your command: op ; nop\nERROR:               ^^^^^^^^\nERROR: Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\n[{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\",\"input\":\"op ; nop\",\"errorposition\":\"^^^^^^^^\"}]\n$ i3-msg \"nop ; focus output foobar\"\nERROR: Your command: (null)\nERROR:               (null)\nERROR: (null)\n[{\"success\":true},{\"success\":false}]\n$ i3-msg \"focus output foobar ;nop\"\nERROR: Your command: (null)\nERROR:               (null)\nERROR: (null)\n[{\"success\":false},{\"success\":true}]\n```. Your example result for two commands is wrong. It returns an array with two elements, but only if the first command is parsed succesfully. After a parser error no further commands get a success entry, but if the command itself fails the others are executed:\n```\n$ i3-msg \"nop ; nop\"       \n[{\"success\":true},{\"success\":true}]\n$ i3-msg \"nop ; op\" \nERROR: Your command: nop ; op\nERROR:                     ^^\nERROR: Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\n[{\"success\":true},{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\",\"input\":\"nop ; op\",\"errorposition\":\"      ^^\"}]\n$ i3-msg \"op ; nop\"              \nERROR: Your command: op ; nop\nERROR:               ^^^^^^^^\nERROR: Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\n[{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: , '[', 'move', 'exec', 'exit', 'restart', 'reload', 'shmlog', 'debuglog', 'border', 'layout', 'append_layout', 'workspace', 'focus', 'kill', 'open', 'fullscreen', 'sticky', 'split', 'floating', 'mark', 'unmark', 'resize', 'rename', 'nop', 'scratchpad', 'swap', 'title_format', 'mode', 'bar'\",\"input\":\"op ; nop\",\"errorposition\":\"^^^^^^^^\"}]\n$ i3-msg \"nop ; focus output foobar\"\nERROR: Your command: (null)\nERROR:               (null)\nERROR: (null)\n[{\"success\":true},{\"success\":false}]\n$ i3-msg \"focus output foobar ;nop\"\nERROR: Your command: (null)\nERROR:               (null)\nERROR: (null)\n[{\"success\":false},{\"success\":true}]\n. Can you try to build with #3178 while setting sysconfdir to/etc? Of course, you'll have to make sure that the files in/etcaren't conflicting with packages you installed with you package manager, but everything except the pam configuration is in the/etc/sway/``` directory\nmeson build -Dsysconfdir=/etc \nninja -C build\nsudo ninja -C build install. Can you try to build with #3178 while setting sysconfdir to ```/etc```? Of course, you'll have to make sure that the files in ```/etc``` aren't conflicting with packages you installed with you package manager, but everything except the pam configuration is in the ```/etc/sway/``` directory\n\nmeson build -Dsysconfdir=/etc \nninja -C build\nsudo ninja -C build install. Is it really frozen or is just the keyboard not configured and therefore sway doesn't receive keyboard events? . Is it really frozen or is just the keyboard not configured and therefore sway doesn't receive keyboard events? . @eternal-sorrow Your 1. and 2. have probably the same cause as #3561, firefox blocking while it isn't rendered on screen. Telegram might have the same problem.. @eternal-sorrow Your 1. and 2. have probably the same cause as #3561, firefox blocking while it isn't rendered on screen. Telegram might have the same problem.. On the xorg/systemd side, xss-lock has the ability to transfer the (e)logind delay lock with an environment variable to the locker which allows the locker to signal readiness without forking. That is useful to keep xss-lock from spawning a second locker in case of suspending an already locked session. It also makes killing the locker in reaction to an (e)logind unlock signal possible. I don't know if this would be useful or desired for swayidle.\n\n```\n -l, --tranfer-sleep-lock\nAllow the locker process to inherit the file descriptor that represents the delay lock obtained from the login manager.\n\nThe corresponding index will be made available in the environment variable $XSS_SLEEP_LOCK_FD; \nthis will only be set if the reason for locking is that the system is preparing to go to sleep.\nThe locker should close this file descriptor to indicate it is ready.\n```. On the xorg/systemd side, xss-lock has the ability to transfer the (e)logind delay lock with an environment variable to the locker which allows the locker to signal readiness without forking. That is useful to keep xss-lock from spawning a second locker in case of suspending an already locked session. It also makes killing the locker in reaction to an (e)logind unlock signal possible. I don't know if this would be useful or desired for swayidle.\n```\n -l, --tranfer-sleep-lock\nAllow the locker process to inherit the file descriptor that represents the delay lock obtained from the login manager.\n\nThe corresponding index will be made available in the environment variable $XSS_SLEEP_LOCK_FD; \nthis will only be set if the reason for locking is that the system is preparing to go to sleep.\nThe locker should close this file descriptor to indicate it is ready.\n. Since sway currently does not set any cursor theme, libwayland-cursor should pick up cursors first from~/.icons/default/cursorsand then inherited through~/.icons/default/index.theme, though. Did you maybe setXCURSOR_PATH?. Since sway currently does not set any cursor theme, libwayland-cursor should pick up cursors first from~/.icons/default/cursorsand then inherited through~/.icons/default/index.theme, though. Did you maybe setXCURSOR_PATH?. I have another question. Will this work with multiple seats, so each seat can have a different keyboard layout in the window?. I have another question. Will this work with multiple seats, so each seat can have a different keyboard layout in the window?. Wouldn't that be possible already by setting the \"flat\" acceleration profile and then setting a factor between -1 and 1? Or the calibration matrix may be another alternative.. Wouldn't that be possible already by setting the \"flat\" acceleration profile and then setting a factor between -1 and 1? Or the calibration matrix may be another alternative.. That looks like the option wassysconfdir? Of course that moves alsosway/configandsway/security.dto the same location, but why would you want that in a different location thanpam.d?. That looks like the option wassysconfdir? Of course that moves alsosway/configandsway/security.dto the same location, but why would you want that in a different location thanpam.d```?. Meson has build options like\nmeson builddir srcdir -Dprefix=/usr\nmeson builddir srcdir -Dsysconfdir=/etc\n\nIf pam.d is sometimes not located in sysconfdir, then a new option like pamconfdir should be added.\nEdit: I found a small issue partially related issue, though. -DSYSCONFDIR has the wrong path if an absolute path is set for sysconfdir and prefix differs from /usr. I'll send a patch.. Meson has build options like\nmeson builddir srcdir -Dprefix=/usr\nmeson builddir srcdir -Dsysconfdir=/etc\n\nIf pam.d is sometimes not located in sysconfdir, then a new option like pamconfdir should be added.\nEdit: I found a small issue partially related issue, though. -DSYSCONFDIR has the wrong path if an absolute path is set for sysconfdir and prefix differs from /usr. I'll send a patch.. @SpeedJack #2855 should have just replaced sysconfdir with join_paths(prefix, sysconfdir), instead of adding the test for /usr. \njoin_paths(prefix, dir) is an intelligent function that discards the prefix if dir is an absolute path: https://mesonbuild.com/Reference-manual.html#join_paths\nClarification: The change in this PR doesn't change the default location. That stays /usr/local/etc for /usr/local builds, but the change allows using meson build -Dsysconfdir=/etc.. @SpeedJack #2855 should have just replaced sysconfdir with join_paths(prefix, sysconfdir), instead of adding the test for /usr. \njoin_paths(prefix, dir) is an intelligent function that discards the prefix if dir is an absolute path: https://mesonbuild.com/Reference-manual.html#join_paths\nClarification: The change in this PR doesn't change the default location. That stays /usr/local/etc for /usr/local builds, but the change allows using meson build -Dsysconfdir=/etc.. Did you have no font installed at all? Then it should be normal you got placeholders. sway-git should probably depend on ttf-font for arch linux and on some other generic (meta)package name on other distributions.. Brightness 0 might be considered the same as dpms off by some drivers. Since there is no other known brightness value if you turn the screen back on, then it defaults to 100%.. The swaybar meson build is probably missing the dependency for systemd / elogind.. The swaybar meson build is probably missing the dependency for systemd / elogind.. >  Re-arrange icons: this theoretically could be done, but it not only requires a lot of extra input-handling code, but a decision on how to distinguish a regular click from a click to move the icon, so may not be practical\nI'd rather have an interface to activate an icon with keyboard shortcuts, e.g. select it with dmenu and send the click with swaymsg or dbus. That same interface could be used for reordering as well, drag&drop doesn't fit too well in a keyboard driven wm I think.. >  Re-arrange icons: this theoretically could be done, but it not only requires a lot of extra input-handling code, but a decision on how to distinguish a regular click from a click to move the icon, so may not be practical\nI'd rather have an interface to activate an icon with keyboard shortcuts, e.g. select it with dmenu and send the click with swaymsg or dbus. That same interface could be used for reordering as well, drag&drop doesn't fit too well in a keyboard driven wm I think.. @onny: Can you try with Waybar? It should include support for dbusmenu, but it depends on libdbusmenu which probably isn't an option for swaybar.\nBy the way, QT5 with QSystemTrayIcon creates a dbus menu as well. (example). . @onny: Can you try with Waybar? It should include support for dbusmenu, but it depends on libdbusmenu which probably isn't an option for swaybar.\nBy the way, QT5 with QSystemTrayIcon creates a dbus menu as well. (example). . @fdutheil The tray uses sd-bus as the dbus library. You could try building with basu or libsystemd That would require some patches to the meson configuration for sway.. Just to note, as far as I can see i3 does flatten split containers.. Just to note, as far as I can see i3 does flatten split containers.. Would it make sense to cap the allocation amount at a value like a few kB? At some point amortized time might be less important than memory footprint, especially if there are a lot of partially filled arrays.. Would it make sense to cap the allocation amount at a value like a few kB? At some point amortized time might be less important than memory footprint, especially if there are a lot of partially filled arrays.. Try to set WLR_DRM_DEVICES to your intel/amd graphics card.\nhttps://github.com/swaywm/sway/wiki#i-have-a-multi-gpu-setup-like-intelnvidia-or-intelamd-and-sway-does-not-start. Try to set WLR_DRM_DEVICES to your intel/amd graphics card.\nhttps://github.com/swaywm/sway/wiki#i-have-a-multi-gpu-setup-like-intelnvidia-or-intelamd-and-sway-does-not-start. @emersion No, i3 only supports hex colors in in RGB or RGBA with alpha channel.\nhttps://github.com/i3/i3/blob/db0add0f11995d4273c76c3c1ad3ab131cea6a99/libi3/draw_util.c#L86. @emersion No, i3 only supports hex colors in in RGB or RGBA with alpha channel.\nhttps://github.com/i3/i3/blob/db0add0f11995d4273c76c3c1ad3ab131cea6a99/libi3/draw_util.c#L86. Should command substitution be disabled as well with WRDE_NOCMD?\nIt looks like the only issue now would be paths that contain a literal $ sign instead of a variable (possible with background image paths and SYSCONFDIR), but that shouldn't be very common. . Should command substitution be disabled as well with WRDE_NOCMD?\nIt looks like the only issue now would be paths that contain a literal $ sign instead of a variable (possible with background image paths and SYSCONFDIR), but that shouldn't be very common. . It might be easier to create your own (e.g. ragel) parser for variables and tilde instead of hacking around wordexp.. It might be easier to create your own (e.g. ragel) parser for variables and tilde instead of hacking around wordexp.. I'm all for removing it, but I want to note that this differs from existing undocumented i3 behaviour. (The current implementation doesn't conform either). \n```\n$  i3-msg move aae\nERROR: Your command: move aae\nERROR:                    ^^^\nERROR: Expected one of these tokens: 'window', 'container', 'to', '--no-auto-back-and-forth', 'workspace', 'output', 'mark', 'scratchpad', 'left', 'right', 'up', 'down', 'position', 'absolute'\n[{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: 'window', 'container', 'to', '--no-auto-back-and-forth', 'workspace', 'output', 'mark', 'scratchpad', 'left', 'right', 'up', 'down', 'position', 'absolute'\",\"input\":\"move aae\",\"errorposition\":\"     ^^^\"}]\n```. I'm all for removing it, but I want to note that this differs from existing undocumented i3 behaviour. (The current implementation doesn't conform either). \n```\n$  i3-msg move aae\nERROR: Your command: move aae\nERROR:                    ^^^\nERROR: Expected one of these tokens: 'window', 'container', 'to', '--no-auto-back-and-forth', 'workspace', 'output', 'mark', 'scratchpad', 'left', 'right', 'up', 'down', 'position', 'absolute'\n[{\"success\":false,\"parse_error\":true,\"error\":\"Expected one of these tokens: 'window', 'container', 'to', '--no-auto-back-and-forth', 'workspace', 'output', 'mark', 'scratchpad', 'left', 'right', 'up', 'down', 'position', 'absolute'\",\"input\":\"move aae\",\"errorposition\":\"     ^^^\"}]\n```. The crash happens because actual_size is 0 and causes a division by zero. Regardless of whether xembed-sni-proxy sends bogus data, swaybar should at least reject 0-height icons.. The crash happens because actual_size is 0 and causes a division by zero. Regardless of whether xembed-sni-proxy sends bogus data, swaybar should at least reject 0-height icons.. > I also find it a bit silly that you can send non-square icons too.\nI haven't encountered it, but user input must not cause crashes. I could simply ignore non-square icons as well. The specification doesn't require square icons, though. It does mention animations of using same-size images as the frames.\nhttps://www.freedesktop.org/wiki/Specifications/StatusNotifierItem/Icons/\n. > I also find it a bit silly that you can send non-square icons too.\nI haven't encountered it, but user input must not cause crashes. I could simply ignore non-square icons as well. The specification doesn't require square icons, though. It does mention animations of using same-size images as the frames.\nhttps://www.freedesktop.org/wiki/Specifications/StatusNotifierItem/Icons/\n. @ianyfan This new version is the minimal validation I consider necessary to prevent a malicious application from crashing swaybar.. @ianyfan This new version is the minimal validation I consider necessary to prevent a malicious application from crashing swaybar.. You can probably copy your keyboard layout from /usr/share/X11/xkb/symbols/ to a new name in ~/.xkb/symbols/, modify it and then set your keyboard layout in sway to that.\nhttps://wiki.archlinux.org/index.php/X_keyboard_extension#Mouse_control\nhttps://www.vinc17.net/unix/xkb.en.html\nhttps://github.com/hupfdule/keyboardlayouteditor. You can probably copy your keyboard layout from /usr/share/X11/xkb/symbols/ to a new name in ~/.xkb/symbols/, modify it and then set your keyboard layout in sway to that.\nhttps://wiki.archlinux.org/index.php/X_keyboard_extension#Mouse_control\nhttps://www.vinc17.net/unix/xkb.en.html\nhttps://github.com/hupfdule/keyboardlayouteditor. It would be great if output positions could be defined in relation to each other (e.g. left-of, below, ...) and sway then calculates the optimal coordinates. . It would be great if output positions could be defined in relation to each other (e.g. left-of, below, ...) and sway then calculates the optimal coordinates. . swaybg supports svg as long as librsvg is installed and compiled with the gdk-pixbuf loader plugin.\nI think swaybg currently loads an svg with the dimension specified in the file, though. It would be better to load the svg at the desired size. Related GdkPixbuf functions: gdk_pixbuf_get_file_info, gdk_pixbuf_new_from_file_at_scale. swaybg supports svg as long as librsvg is installed and compiled with the gdk-pixbuf loader plugin.\nI think swaybg currently loads an svg with the dimension specified in the file, though. It would be better to load the svg at the desired size. Related GdkPixbuf functions: gdk_pixbuf_get_file_info, gdk_pixbuf_new_from_file_at_scale. Gentoo has a helpful wiki.\nhttps://wiki.gentoo.org/wiki/Project:Quality_Assurance/Backtraces#Core_dumps\nhttps://wiki.gentoo.org/wiki/Project_Talk:Quality_Assurance/Backtraces#Core_dump_naming_and_save_path. It might be useful to use export-subst to add additional information to archives exported from git.\nhttps://git-scm.com/docs/gitattributes#_creating_an_archive. If you want it, then there are some changes I'd want to make like removing gitinfo_tree. It serves no purpose, since it is only available when the commit hash is filled in as well.\nBy the way, I think we should also make sure that git doesn't return the value for a parent git repository if sway is built from a tarball, maybe something like comparing the output of \ngit rev-parse --show-toplevel\nand\njoin_paths(meson.source_root(), meson.current_source_dir()). It is possible to strip __FILE__ to the basename during compilation with long and ugly macros like this:\n```\ndefine STRIPPATH(s)\\\n(sizeof(s) > 2 && (s)[sizeof(s)-2] == '/' ? (s) + sizeof(s) - 1 : \\\nsizeof(s) > 3 && (s)[sizeof(s)-3] == '/' ? (s) + sizeof(s) - 2 : \\\n\n...\n    sizeof(s) > 20 && (s)[sizeof(s)-20] == '/' ? (s) + sizeof(s) - 19 : \\\n    sizeof(s) > 21 && (s)[sizeof(s)-21] == '/' ? (s) + sizeof(s) - 20 : (s))\ndefine JUSTFILE STRIPPATH(FILE)\n```\nhttps://stackoverflow.com/a/41367919\nOr if all occurences of __FILE__ are below the source path, then it is possible to determine the path length in meson and set a definition like LENGTH_OF_SOURCE_PATH for the compiler. In the code, then use  \n#define __FILENAME__ (__FILE__ + LENGTH_OF_SOURCE_PATH)\nhttps://stackoverflow.com/a/40947954. By the way, to get the length of a string in bytes you need to do this in meson:\nrun_command('sh', '-c', 'printf \"%s\" \"$1\" | wc -c', 'bytes', string_to_test). Then the only way I know to get rid of the build path will be compiler extensions or not using __FILE__ at all. In that case each file would have to set their own name to a standardized macro name or all log functions need a manual filename parameter.\nBy the way, the macro_prefix_map extension is the solution proposed and implemented by the reproducible builds project: https://reproducible-builds.org/docs/build-path/. It should be possible to build an additional package for json-c 0.13 that lives alongside the 0.12.x version. That should not make it \"impossible\" to build sway, just harder.. Did you try to look at TTY8? Note: If that doesn't help, you are on your own.. > I think this is a bug. We should properly escape arguments with spaces in swaymsg.\nWe'll lose some i3 compatibility with that, but that might be acceptable:\n$ i3-msg 'workspace one'\n[{\"success\":true}]\n$ i3-msg 'workspace foo' '; rename' 'workspace to bar'\n[{\"success\":true},{\"success\":true}]. The icon probably uses dbusmenu, which is not implemented yet.\n\nIn the meantime you could try Waybar, but the menu will open somewhere in the middle of the screen.\nMore about the tray status in https://github.com/swaywm/sway/issues/3799. I think I should remove the comment about fixed point math. That is no longer true, since colors work with 255==1 instead of 256==1.\nI need good results for a very specific range, numbers from 0 to 65025 (00 .. 255255) and there it works very well. I also don't want the normal integer division that ignores the remainder, but a rounded result.\ndef premul(primary_color, alpha)\n    return round(primary_color/255 * alpha/255 * 255)\npremul(0xff, 0xff) = 0xff\npremul(0xff, 0x80) = 0x80 (127.5 rounded up)\npremul(0x80, 0xff) = 0x80\nI never bothered to prove it formally, but the proof through demonstration is good enough for me.\nMy python script didn't find any wrong values in this range:\nfor x in range(0,256):\n    for a in range(0,256):\n        t=x*a+0x80\n        bs=((t>>8)+t)>>8\n        r=round(x*a/255)\n        if r != bs:\n            print(x, a, r, bs)\n. I knew I forgot something\n. My i3 prints a grey vertical line.\nPrinting a pipe is not exactly the same, but it looks similar enough. I probably should change the color and use a uniform grey? instead of the field color.\n. Is this ok?\nif () {\n} else {\n  switch () {\n  case:\n  }\n}\n. Not really. I don't use it, and swaybar still ignores align and urgent from the original.\n. WLR_MODIFIER_SHIFT is defined in wlroots/include/wlr/types/wlr_keyboard.h. \nIs using the structure directly fine here or should you call wlr_keyboard_get_modifiers?. This should test for xkb_numlock > 0. The variable has three states:\n-1: undefined, which you want to map to disabled\n0 numlock disabled\n1 numlock enabled. If the extensions have to be far away, what about using ((1<<31) | (1<<30) | 1) and higher for sway specific events?. @RyanDwyer (1<<31) is not sway specific. This bit marks an event sent from i3/sway to the client after the client did IPC_SUBSCRIBE.. As a compromise, maybe set the class to wayland if it is a native wayland window?. An implementation on top of bsearch doesn't look very complicated to me. Use a structure as the array element, add a comparator, qsort it and access with bsearch. That should be POSIX.1-2001 compliant.. Wrapping all occurrences in #ifdef HAVE_XWAYLAND should work. Is that bad style?. Sometimes, the number of elements in an enum is simply added as the last element of the enum. Is that a better option?\nc\nenum abc {\n    A,\n    B,\n    C,\n    NUM_ABC\n};. _POSIX_C_SOURCE is defined twice here.. Oh, right. Integer maths. I'll change it.. ",
    "ddevault": "Good call.\n. > I want to propose a feature request though, which i3 developers ignored: A tiling mode for binary space layout representing windows as the leaves of a full binary tree, very similar to default window tiling mode that comes with bspwm. It could be very handy letting the software manage my windows(specially terminals) instead of managing the arrangement in a single desktop. I don't want to break any compatibility though so I am hoping it does not. \nPerhaps eventually. That doesn't sound like it needs to be a high priority.\n\nAlso an option to set the gap between windows would be nice. This was done in i3 but by a third party git fork. I don't know why it was deemed not a necessity by i3 developers.\n\nThis is in the list of features to add.\n\nBTW This project should also get its own website. \n\nYeah, it'll have one eventually.\n. Will consider that once we hit feature parity with i3.\n. The tabbed layout is sort of blocked by the lack of borders.\n. No, we'll have something like feh for you to use instead.\n. And you can't do that hinting, I've been asking @Cloudef for it in wlc for a while.\n. That's not really our problem, it's wlc's problem. And wlc let's you set it through XKB environment variables, XKB_DEFAULT_LAYOUT.\n. bindcode isn't supported on sway yet. Try binding \"ampersand\".\n. Not strictly an i3 feature, but since there is no root window on Wayland, sway now supports setting your wallpaper from the sway config. See man 5 sway for details.\n. Not yet, no.\n. sway [command] does not work yet (sorry). You can use i3-msg, it'll work on sway. Use the floating toggle command to change the focused window to floating and back, just like i3.\n. I just pushed swaymsg.\n. \nNote that this is using colors from my sway config.\n. Thanks :) and this is just in time for our 1,000th commit, too!\n. I added it to the list, but I don't understand what it does. Can you explain?\n. swaylock works for me now, can anyone else confirm this? Not going to tick it off until it has some sort of visual feedback of the password entry like i3lock does, though.\n. Tabbed and stacking layouts are blocked by window borders, which are a WIP.\n. Thanks for the tip, @Airblader. What's that meant to do?\n. Makes sense. Thanks!\n. > Is it already reasonable to run Wayland these days and have a usable system for getting regular work done, perhaps by way of an X server running on Wayland so that one could run non-Wayland things (Firefox, XTerm)? I notice the xwayland package in Debian but have never played with it.\nYes\n\nIs there among the folks here any Debian developer who might make a deb package for sway et al. and get them into Debian unstable, so that one could just install the package and then log into wayland+sway+xwayland via lightdm or some such mechanism?\n\nhttps://bugs.debian.org/cgi-bin/bugreport.cgi?bug=821397\n. You can't change the font at runtime.\n. Open a github issue please\n. We don't actually have access to window_role. Not everything that works on x makes sense on Wayland, I'm afraid.\n. wlc returns the instance instead of the class in the latest stable version. In the next release (and HEAD) it returns the class correctly.. That's not how assign works. You'll have to put that in your config file, reload, and then start Chromium. [class=\"chromium\"] focus should focus the window but I'm not sure if that works on sway yet.. Thanks!. Not really, no.. Eh, I'm not sure that's worth supporting. It's kind of a stupid feature. I'd just use dmenu. Maybe we can add a script that utilizes dmenu for this purpose, I guess.. I'll just direct people to this comment if anyone else asks for sway-input.\n```sh\n!/bin/sh\nformat=\"%s\"\ndmenu=\"dmenu\"\nswaymsg=\"swaymsg\"\nwhile [ $# -gt 0 ]\ndo\n    case $1 in\n        -s)\n            swaymsg=\"$swaymsg -s '$2'\"\n            shift\n            ;;\n        -F)\n            format=\"$2\"\n            shift\n            ;;\n        -f)\n            dmenu=\"$dmenu -fn '$2'\"\n            shift\n            ;;\n        -P)\n            dmenu=\"$dmenu -p '$2'\"\n            shift\n            ;;\n        -l)\n            echo \"Warning: -l is not supported\"\n            ;;\n        -v)\n            exec swaymsg -v\n            ;;\n        *)\n            echo \"Unknown argument '$1'\" >&2\n            exit 1\n            ;;\n    esac\n    shift\ndone\ncmd=$(eval $dmenu < /dev/null)\n[ $? -ne 0 ] && exit $?\ncmd=$(printf \"$format\" \"$cmd\")\neval $swaymsg \"$cmd\"\nexit $?\n``. It's already supported in wlroots.. You could read 3 comments up from your own, perhaps?. No. Resources are specific to X11.. What does i3 have to do with 9p and Lua?. No.. hide mode is planned.. Yes, get_tree already works and has worked for some time.. It's supported in the wlroots branch, at least. Not sure about 0.x.. We have now reached our compatability target with i3. With the exception of layout save/restore and features which only make sense on X11, all i3 features are supported.. We should start with the same options i3 supports (with reasonable modifications).\n. Thanks!\n. Agreed. Travis works well. I'd merge a pull request adding a.travis.yml`.\n. We could install arch in a chroot on travis and... nevermind\n. No, not really.\n. Not going to go with Jenkins for this, ref chat on IRC.\n. Needs more discussion, folks. Speak up.\n. I'm not sure we do need a ton of contributions. We've already got enough consistent contributors to build an i3 clone in a fairly short amount of time.\n. I've found that most of the time, even projects with lots of contributors and exposure will be written almost entirely by one or two people.\n. It's both. There's a public gitlab running on gitlab.com, but the code is open source and you can deploy it on your own infrastructure if you want. We'd be using gitlab.com.\n. Eh, for now let's just stay here.\n. The plan is to move sway and wlroots to sr.ht - this has been the plan for longer than there have been talks of Microsoft buying GitHub. However, in light of the recent news, I intend to speed up work on sr.ht so that people leaving GitHub have another choice. To this end, I want to work on bringing sway+wlroots over sooner rather than later.\nI know that it's not ready yet and that it would be disruptive to the project to move now. Can I get some feedback from core contributors on what you think sr.ht needs before it's suitable for sway+wlroots? If you don't already have an account please reach out and ask for one.\nThe biggest one is obviously public code review tools, ideally which don't require git-send-email to use.. EXPECTED_MORE_THAN*\nAnd don't use == false, just use !.\nIt's fine for this pull request, but in the future split up your changes into several.\n. :tada: \n. Review done, bump the PR when the issues are addressed.\n. Perhaps if they splitv a splith workspace, we can switch the split mode? How does i3 behave?\n. Cool.\n. I like it, but can you remove the debug stuff before merge?\n. Thanks!\n. Nice. tyvm\n. LGTM\n. The style on the debug stuff is also abhorrent, but I'll rewrite it anyway.\n. Danke\n. Does this fix the problem I was talking about in IRC? Or what does it fix?\n. Alright, thanks.\n. So I should wait on merging this?\n. Hmm, alright. I use urxvt on sway, fwiw.\n. works for me in x.\n. Make sure you have xwayland installed.\n. Can we fall back to i3 config paths, too?\n. Also: this still supports ~/.sway/config?\n. Maybe in the future we can just have a list of paths, like this:\nstatic char *paths[] = {\n    \"$XDG_CONFIG_HOME/sway/config\",\n    \"$HOME/sway/config\",\n    ...\n}\n. I think we can live without this. It speeds things up, but things are not noticeably slow right now. This change adds some complexity I can live without - what if someone adds another means of creating views later, but forgets to set the user data? What if the user data ends up being something other than a swayc_t? Not worth it IMO. We don't need to optimize everything.\n. Whoops, reverted. Wrong button.\n. 360b3d67b0457016e4cc32dfd378fd01d30f48df\n. 360b3d67b0457016e4cc32dfd378fd01d30f48df\n. Thanks!\n. Oh, ^ is a fish operator. It redirects stderr to a file.\n. workspace next_on_output soon?\n. Oh, I should have caught that. Whoops. Will you fix it or should I?\n. unescape is not actually used for anything right now, fwiw.\n. I figured as much, but I wanted to see if dmenu would still work with that removed.\n. Alright.\n. Not really relevant now.\n. Thanks!\n. Thanks.\n. Nice.\n. tyvm\n. Looks good for the most part. Testing now.\n. Works for me, let's get those issues dealt with and this is good to merge. Another thing - can we make pop-ups automatically floated?\n. Left a few more comments.\n. :tada: \n. I don't understand what this serves to accomplish?\n. dmenu grabs the keyboard through some mechanism other than override_redirect, though. Are there other windows that use override_redirect but for which this behavior is not desirable?\n. override_redirect does not imply exclusive use of the keyboard, so far as I'm aware.\n. The text popup in firefox doesn't (or at least shouldn't) receive focus when it appears, or else the text box would not receive input.\n. Can you address my other concerns before this is merged?\n. Well, alright.\n. We have man pages as of 4b64e481a807bd97b12c29a7ce5044e5de5fc21d.\n. Low hanging fruit for pull requests, if anyone is interested.\n. Seems like this is taken care of now.\n. Thanks!\n. Thanks for letting us know!\n. I originally made this behave the way you have changed it to behave, but apparently this is not how it works in i3. We can talk about diverging from the i3 behaviour later. The fix, for now, is to change the config file, which I will do shortly.\n. Whoops. I'll revert that.\n. Thanks!\n. Thanks! I fixed that bug, but I didn't feel that it was necessary to merge your entire patch for several reasons.\n. Well, to elaborate:\n- Several style errors in your code\n- Not convinced it's necessary to add a whole join function\n- This code is slated to be rewritten later anyway\nSo, not worth the effort.\n. You have the latest code? Not able to run it in gdb right now.\n. aside: #66 needs to happen\n. Yes. When you do movement or resizing, we shouldn't send those clicks through.\n. > What I said above will end up denying all clicks to floating windows which is bad. The only way around this is to check for the floating_modifier key being held as the click happens, but this is not what i3 does. I think we should just allow clicks to happen, honestly.\nThis is what i3 does.\n. LGTM, thanks\n. This has merge conflicts that must be resolved. This looks like a decent start at doing gaps, and I'd merge it, but in the future I want to configure each container with a \"margin\" value. By default, we'd set the margin for workspaces to the outer gaps, and the margin for views to the inner gaps. Then we can let the user change gaps on a per-workspace or per-view basis on the fly at runtime.\n. Just tested it, works great! Thanks.\n. Can we set the SWAYSOCK and I3SOCK environment variables? That way, any scripts that use i3-msg will continue to work on sway with no changes.\n. We are maintaining compatibility with i3.\n. bump\n. conflicts, style issues still present\n. Alright.\n. Works for me. I closed it earlier after testing it, and I just tested it again with success.\n. 774e594714579699a5f73fd110007ebb5a60cec6 did not fix this on my system.\n. Thanks @taiyu-len \n. I get the occasional problem like you originally described, but I haven't figured out the conditions for reproducing it yet.\n. I haven't seen this again since my last comment. Anyone else able to repro?\n. Thanks!\n. I have no idea how I overlooked that.\n. Paging @Cloudef\n. Can you try running it with WLC_BG set to \"0\"?\n. > It works like a charm, thank you! So I guess the cool background uses some 3D or something?\nYeah, that's a wlc thing (wlc is our wayland compositor library).\n\nCan I use something for a static background like I use feh for a desktop background image in i3?\n\nEventually, yes.\n. Yeah, I think this is good now.\n. No longer seems to be an issue.\n. Please add to sway(5).\n. Thanks!\n. Sounds a lot like a wlc thing. Paging @Cloudef, and you should probably report upstream.\n. Thanks!\n. This reverts some of the choices I made last night, namely:\n- Using an enum instead of a define for the buffer size (wtf dude)\n- Using memmove instead of just fragmenting the buffer\nPut those changes back in and it's okay to merge.\n. /home/sircmpwn/sources/sway/sway/handlers.c: In function \u2018handle_key\u2019:\n/home/sircmpwn/sources/sway/sway/handlers.c:319:7: warning: variable \u2018mod\u2019 set but not used [-Wunused-but-set-variable]\n  bool mod = false;\n       ^\n. Looks good, fix the warning and I'll merge.\n. Whoops, didn't realize I had introduced it. Don't worry about it.\n. That's cool as shit, we should try do to that\n. Status update?\n. How does this behave, in plain english?\n. Looks good from my testing.\n. Yeah, we need to figure out how to make cmake read the git tags (and also start tagging versions). Blocked until I decide to mark the first version of sway.\n. @Luminarys @minus7 IPC reminder\n. For the sake of everyone who isn't on IRC, sway will start being versioned once wlc starts being versioned.\n. Yep.\n. I agree, but only if we see it tested.\n. Cool. Pull requests welcome.\n. This is cool as hell. Good work.\n. Style issues aside, this looks good. How does it compare to the i3 behaviour? Particularly when moving views between containers?\n. Thanks. Will test and merge in a bit.\n. This looks good as a first pass, so I'll merge it. However, I found a problem with it - the behaviour is not correct when moving a window over a split container. Let's say you have this layout:\n+----+----+\n|    |    |\n|    |    |\n| F  +----+\n|    |    |\n|    |    |\n+----+----+\nThe focus is on \"F\". After moving it to the right, the result should be this (to match the i3 behavior):\n+----+\n|    |\n|----+\n| F  |\n+----+\n|    |\n+----+\nInstead, we have this:\n+----+----+\n|    |    |\n|    |    |\n+----+ F  |\n|    |    |\n|    |    |\n+----+----+\n. By the way, the behavior is to insert the view after whatever view was last focused in the destination container.\n. (rather than in the middle always)\n. :tada: \n. Merge conflicts and questionable stability, what's the sitrep?\n. Agreed.\n. Agree that we don't need another modifier.\nThis PR looks pretty good for the most part, but it touches a lot of things so I want some testing. Can I get some second opinions? Test this and leave a :+1: if you like it.\n. I think we should change it to mouse_modifier and leave floating_modifier there as an alias for backwards compat.\n. I like the idea of having the resize/move behavior be consistent regardless of window arrangement, thus I dislike the idea of seperating the two.\n. Tested this with one output, gets a :+1: from me until I get home and test with several outputs and without x (still at work, can't give this too much of my attention).\n. Must be an older problem that has been fixed since. Works for me, too.\n. Code looks good. Will test soon\n. Good first pass. However, it doesn't match the i3 functionality. Try this from i3:\n1. move scratchpad\n2. scratchpad show\n3. scratchpad show\nThe second \"show\" will return the window to the scratchpad.\n. How to break this:\n1. Move app to scratchpad\n2. workspace next_on_output\nFix before merge\n. Let me know when it's ready for testing/review.\n. https://github.com/Cloudef/wlc/blob/master/include/wlc/wlc.h#L294-L295\n. Not sure. We can probably build this into i3-msg\n. If anyone plans on picking this up, let me know and I'll give you some details on how I'd like this to look\n. Key bindings in general is pretty broken at the moment. I'll be giving it a serious overhaul soon.\n. Fix the issues I've brought up and let me know when it's ready. I'll test this then.\n. Okay. I'll test this on top of X11. Can anyone test it on DRM?\n. ``\nOutput 1 resolution changed to 5760 x 1080\nAdded output 1:WLC-0\nsway: /tmp/yaourt-tmp-sircmpwn/aur-wlc-git/src/wlc/src/compositor/output.c:636: wlc_output_set_resolution_ptr: Assertionresolution->w != 0 && resolution->h != 0' failed.\nProgram received signal SIGABRT, Aborted.\n0x00007ffff73e45f8 in raise () from /usr/lib/libc.so.6\n. LGTM\n. Not using the i3 defaults for this in sway was intentional. Here's the reasoning:\n- It's stupid\n- Default sway config only affects new users. If you're an i3 user and are used to jkl; instead of hjkl, then you'll probably be using your old i3 config with sway anyway.\n. Update the man page.\n. Make it a second point, [like this](https://github.com/SirCmpwn/sway/blob/master/sway.5.txt#L49-L57).\n. I compile sway under GCC 5 every day without issue. Can you provide the actual errors given?\n. Interesting. Sounds reasonable to me to explicitly declare sway as C99.\n. Please confirm that this works for the given test cases:\n- Move container to workspace on same output\n- Move container to same workspace it's already on\n- Move container to workspace that is visible on a different output\n- Move container to a workspace that is not visible on a different output\n. Update the man pages\n. Fixed.\n. I agree with minus on both counts.\n. As soon as we introduce a JSON library, I want all of our JSON stuff refactored to use it.\n. Report upstream to wlc.\n.\n github wont let me post.... that tty switching is our fault, not wlcs. we dont handle destroyed outputs properly, so the views are lost.\n``\n. Still a problem? I can switch between ttys without any issues.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Can you run withsway -d 2> sway.log` to enable debug logging, and post the contents of sway.log?\nARM support is mostly up to wlc.\n. That log isn't super helpful. Can you try running orbment instead of sway and see if you get different results?\n. @Cloudef\n. http://dri.freedesktop.org/wiki/VC4/\nYou could try using the appropriate kernel branch if you like.\n. This seems to work with some additional configuration - running Sway on a misconfigured Raspberry Pi will now print details about how to configure it correctly. Please test this and let me know how it goes!. Gotcha. Out of curiousity, can you build wlroots and try out the examples?. Nope.\n. oneliner for arch is yaourt -S sway-git.\n. lol, who doesn't have one installed\n. In any case, an arch oneliner is not necessary:\nhttps://github.com/SirCmpwn/sway#from-packages\n. Well, can you take it out?\n. Does the i386 build not work for you?\n. Nevermind, it was my fault. Fixed.\n. Can you run sway -d 2> ~/sway.log? This will generate a more detailed log file at ~/sway.log, which you can upload here for us to review.\n. Thanks. Not sure what's going on here, even with the log.\n. https://github.com/SirCmpwn/sway/wiki#insert-any-question-here-and-i-use-nvidia is perhaps relevant\n. Added this, fwiw: 4ef60e7c094e3d27a068d0ae94d40dbefd38cfac\n. Probably more of a wlc issue.\n. Because your commit message included the magic string \"fix #165\"\n. I disagree.\n. LGTM. Why did you add criteria to every command?\n. I see. Would be nice if it passed in a list of matching views instead of making the command deal with the criteria itself.\n. Or I guess it could just be the same as it is now, but provide a function to map over views based on a criteria.\n. Which would then automatically support the case where criteria is NULL, i.e. by only mapping the focused view.\n. Well, alright.\n. Paging @taiyu-len to look into this\n. Looks alright. Need to hear test results from xorg and native before I'll merge.\n. bump. Any testers?\n. w/e\n. wat\n. That error is weird as hell. I have no clue. Good luck.\n. I have seen a similar issue. We probably just need to make sure that fullscreen windows are moved to the top.\n. @Cloudef any luck in figuring this one out? I'm 99% sure it's not on the sway end.\n. Yes, that seems to be the case.\n. Yep! Thanks!\n. Weird. It looked like a solid solution to me.\n. Thanks! Will merge once build passes.\n. No need to say it's unofficial. The arch package is unofficial, too.\n. Also, while you're here, can you remove the trailing period on the arch line?\n. ^_^\n. I didn't know suse had a package. Neat!\n. The idea behind sway_assert is to perform an assertion without aborting the application if it goes wrong. You can do a sway_abort if it fails in this scenario, though.\n. Use sway_abort. I want consistency in the various places sway might abort.\n. Right, instead of returning NULL, invoke sway_abort. The current code will run into a segfault.\n. Thanks, looks good.\n. Nice, thanks. Will merge once Travis likes it.\n. Looks good, will merge when build passes.\n. LGTM, will merge after build passes.\n. Can an output be resized via i3-msg on the fly?\n. I'd prefer to know why that doesn't work before this is merged.\n. Cool. I'll merge once travis is done with it.\n. No, thank you for all the excellent pull requests :)\n. I would prefer to determine the neighbour once the mouse reaches the edge rather than persisting it to the struct. Also, paging @Cloudef for comment.\n. Nice. Will merge once build passes.\n. Actually, can you make this behaviour toggle with a config flag?\n. seamless_mouse [on|off] or something?\n. :tada: \n. Looks good, thanks\n. Sweet, will merge shortly.\n. Can you compile in debug mode and reproduce this?\n. LGTM save for the minor error\n. > Hmm, there's also a thing with moving floating windows to another output: Sometimes the window disappears... Also, the floating window changes its geometry to become really small it seems.\nDoes this PR introduce that problem, or was it an issue before?\n. You can just force push a cleaned up history if you want.\n. Let's take this command out of the man page.\n. The clients need to be told the scaling factor (see Cloudef/wlc#57), but halving the resolution is a workaround.\n. That's a problem in wlc.\n. Experimental hidpi support has landed in master. Use the scale parameter in your output configuration line to set the scale factor. See the man page for more information.\n. Every time someone says \"I'm waiting on xyz before I move to Sway\" I mentally delay shipping xyz by a week. Don't wait, contribute.. Yes, that's the plan.. Changing this to be on by default.\n. I would merge PRs that add more comments to this effect. I'll add some myself, too, but at this point a significant amount of sway was written by others.\n. It's possible. @Cloudef, can we have sway agree to open a window and provide geometry before it's rendered? Some of this might also be the fault of the client GUI libraries.\n. Would it work for sway to toggle visibility, arrange, and restore visibility?\n. Spent some time looking into this. @Cloudef, we can fix this if there's a wlc API for setting the default mask for views on an output.\n. @stapelberg I hope you're a patient man. Likely an issue with wlc. Clipboard is \"partially working\" in wlc. Paging @Cloudef.\n. I haven't tried. I wouldn't expect much.\n. Adding something along the lines of exec swaybar to your sway config is not a future proof solution, by the way. Sometime in the near future, sway will run swaybar itself (and the command line usage of swaybar is undocumented and likely to change).\n. That's covered by this issue:\nhttps://github.com/SirCmpwn/sway/issues/343\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. A lot of the wayland client stuff is experimentation. Once it all works, it'll probably be all but thrown out and replaced with something better organized. In other words, don't spend too much effort on this part of the codebase if you don't want it to be wasted. Will merge this PR anyway, though, once the build passes.\n. Can you do a bisect?\n. No worries, thanks!\n. Is this still an issue? It may have been fixed.\n. What does this error mean? I'm not familiar with grsec.\n. That code isn't invoked for sway, either, just for swaybg. I don't know what's up here.\n. I have no clue.\n. Can you reproduce on orbment?\n. I can reproduce the menu bar issue - it's a known wlc problem afaik (cc @Cloudef). I can't reproduce the crash, though.\n. I've been clicking madly on some gnome-terminal windows for a few minutes and I can't get them to crash.\n. I'm fairly certain that won't work simply because wlc hasn't implemented wayland clipboard properly yet.\n. I am using the wayland backend.\n. Put this in a file called HACKING.md\n. Nice, thanks!\n. Nice script! I established a new page for your script and others like it instead of using the FAQ:\nhttps://github.com/SirCmpwn/sway/wiki/Install-on-other-distros\n. Nice. Will merge when build passes.\n. Jesus christ travis get your shit together\n. Absolute position is fine for this, I think.\n. Nice.\n. Thanks for all the feedback. Will definitely prioritize other features. Swaybar is coming soon, by the way.\n. Report to wlc.\n. Right, we can't rotate displays because wlc does not support it. Send a PR improving the docs if you like, though.\n. output HDMI-A-1 pos 0,0 res 1920x1080\n. You can get output names by running i3-msg -t get_outputs.\n. Thanks.\n. wlc.. https://github.com/SirCmpwn/sway/blob/master/sway/handlers.c#L266\nThis definitely gets called so far as I can tell.\n. Sway has an internal state machine for keeping track of the keyboard. If wlc isn't sending key release events, then shit would be pretty borken.\n. Would that make it be rebuilt every time you build sway-git?\n. Yeah, I'm not going to add it.\n. Nope, none of the above, though I'm open to changing that.\n. That looks nice given the goals you set, but I'm not sure that it's right for sway. I'd rather do something original instead of ripping off the i3 logo. I'm also not a huge fan of the Wayland logo in general.\n. Tree sounds like a good idea. Or perhaps just detail of a branch? Maybe even with a single leaf on it.\n. How about fields of tall grass? That comes to mind more so when I hear the word \"sway\". Sort of like this:\n\n. I don't think we need to include the word \"sway\". Something more simple and subtle would be better.\n. What if the logo isn't involved at all? The wallpaper could just be something nice that conveys the idea we're going for, without having to plug the logo.\n. Also reduces the problem to \"find a wallpaper\" rather than \"find a wallpaper, make a logo, and incorporate the logo into the wallpaper\".\n. I have permission to use this image, what do you guys think?\n\n. I agree that his example works well, but we need something that's CC-BY-SA or similar.\n. Generated backgrounds - no\n. That'd be perfect, but what license is it distributed under?\n. We can't use it under those conditions, I'm afraid.\n. I like that. Could work.\n. I doubt we're going to be able to come up with several wallpapers. It'll be hard enough to get one wallpaper in several aspect ratios.\n. I've reached out to a design I've worked with on other projects (notably TrueCraft) to make a logo and default wallpaper for Sway. I expect the final version tomorrow and will be switching to it.\n. I appreciate the effort, but I'd rather not do this unless we're going to get a plugin API (and for now, we are not going to get a plugin API).\n. Please share your config file.\n. Also, bonus points if you addr2line that apply_output_config line, or run with gdb and produce a backtrace.\n. Found the error.\n. Unable to reproduce.\n. Was able to reproduce with thunar, but only once (and of course I didn't have gdb attached). I'll look into this.\n. There's no such thing as a primary display on Wayland.\n. Correct.\n. Did you update sway as well? Try not to update just one, always update both.\n. Explicitly reinstall wlc-git and sway-git. It's probably not going to happen from packer. Just to be sure: running sway -v should show sway version g56e80c0 (2015-11-21, branch \"master\") (perhaps with a different date).\n. Custom backgrounds are a thing now. man 5 sway, grep for background.\n. You aren't meant to invoke swaybg manually. It expects the first argument to be an integer - the index of the output to display on. Sway is responsible for figuring out what index the output you've named is on (which can change with hotplugging and between boots and so on) and will invoke swaybg for you. Wayland clients can't get output names.\nIf you want to use a background, add an output line to your config.\n. Numbering starts from 1, not 0. Try running swaybg 0 /path/to/png stretch and see what happens?\n. Not as a sway command. Just run that in your shell.\n. Alright, thanks.\n. LGTM\n. Are you able to disable outputs from the config file rather than on the fly?\n. Everything in the man pages is implemented. Add this line to your config:\noutput LVDS-1 disable\n. Ah, well, everything on sway(5) is implemented.\n. I see. Well, will leave this issue open until it's sorted.\n. You can't enable/disable outputs on the fly. It has to be done through the config file. The way to turn it back on is to not turn it off in the first place.\n. Hotplugging works fine. The features are unrelated.\n. Because sway is not a complete piece of software. The code to disable/enable on the fly through commands hasn't been written. It's not that it's impossible, it's that no one's done it yet.\n. Looks good. Thanks!\n. LGTM. Merging after build passes.\n. Thanks!\n. This is going to require thorough review and testing, so it'll be a while before this is merged. Thanks!\n. Looks good. Will merge once that one style error is fixed.\n. Thanks!\n. Thanks!\n. The variable will be used at some point. Commenting it out to prevent a warning is silly.\n. > Is there any other way to fix this that you could consider applying?\nYes: implementing different scaling modes.\n. I agree that warnings should not be left sitting in the codebase. However, this warning is warranted - it's a warning that this feature is missing and still needs to be implemented. The resolution is to implement the feature, not to suppress the warning by commenting out the code.\n. Let's not bikeshed this any further. I've explained why the pull request was not merged.\n. LGTM, thanks!\n. Nice work. Thanks!\n. Thank god, I knew someone would eventually complain about issues with 100+ displays ;)\n. \n. More details about your setup?\n. Can you try compiling it manually? Without emerge?\n. Just to be clear, this is a seperate issue from the raspberry pi issue?\n. Did you install wlc from source as well?\n. And sway -v produces no output, either? That's really the thing that gets me.\n. Even with -d from the tty?\n. That's quite strange. I don't know where to go from here if there are no logs that hint at what could be wrong. You may have to debug this one yourself. I guess the other thing that it could be - are you using the nvidia proprietary driver?\n. Then I'm out of ideas, @fenque. Good luck, you're on your own here.\n. suid the sway executable to root.\n. sudo chmod a+s /usr/bin/sway\n. New strace and logs, please, with a+s set.\n. Also, just merged a PR that improves logging in this scenario, so please rebuild sway.\n. Hmm. /dev/input/event0 exists, right? Paging @Cloudef\n. Well, suid should let you read it. The sway binary is owned by root, too?\n. afaik you shouldn't have to create XDG_RUNTIME_DIR so long as the binary is a+s. We can probably add this as a build step somehow, detect if logind is present and chmod after install.\n. Looks good. Will merge once Travis is happy with it.\n. At  some point I want to replace this with the swaymsg -t get_tree JSON.\n. rofi deals with the keyboard in a weird way. It might be best to start discussions upstream about a native wayland port.\n. Gonna close this because it's not really sway's problem.. I don't get emailed when you push new commits - you've got to bump the thread (with a comment) for me to realize that it's updated and should be reviewed again. Thanks!\n. I don't want to remove support for combining output subcommands.\n. For the record, it makes sense for me to set them all at once in the config file. Here's my sway config:\noutput DVI-I-1 pos 3840,0 res 1920x1080\noutput DVI-D-1 pos 0,0 res 1920x1080\noutput HDMI-A-1 pos 1920,0 res 1920x1080\noutput * bg ~/wallpaper.png stretch\n. I don't want to write my config that way. I would be happy with a change that makes it so that it only overwrites whatever subcommand you use (output * res should probably work, too).\n. Looks good, will merge when travis likes it.\n. Looks good. Remove that TODO, though, that doesn't sound like a config option worth having.\n. I thought that was already supported? Does this break that?\n. I see what you mean now. We could change it to an int, -1 for unset (enabled), 0 for disabled, 1 for enabled?\n. I'm pretty sure not being able to disable outputs at runtime will break the workflow of that one guy.\n. Does the code need to be changed for when an output is added to make sure it's not immediately disabled by default?\n. Oh, I thought -1 was false.\n. I would merge a PR that makes the path customizable.\n. Can you fix your author info? Add the email you committed this with to your GitHub account, or force push a new commit that uses the correct email.\n. Do some changes need to be made to config.c to look for this in the new location?\n. git config --global user.email \"you@email.com\"\ngit commit --reset-author --amend\ngit push --force\nAnd config.c looks at /etc/sway/config as a fallback if you haven't copied it. You don't have to copy anything for sway to work correctly.\n. Right. I'm suggesting that the default path should be copied over into the C code so that it looks for it there. If you copy it somewhere else, config.c won't find it, and sway will run without a configuration, which is a bad idea.\nhttps://github.com/SirCmpwn/sway/blob/master/sway/config.c#L139\n. Yes, we should do just that. And it's not just about your use case, it's about the viability of this pull request for everyone.\n. Looks good. Will merge once Travis likes it. Thanks!\n. Probably involves using MagickWand or something. Or we could just straight up add support for more kinds of images.\n. #296 has been merged.\n. Err, this uses your home directory. Your home directory.\n. Build failing.\n. LGTM, will merge once Travis is okay with it.\n. Looks good save for that one comment.\n. Thanks. Will merge once Travis is good.\n. Travis is FUBAR now, they made the cutover to a system that does not work with our build requirements. I'll build this locally.\n. Thanks.\n. This does not build man pages correctly.\n. Thanks.\n. Thanks! I also followed up on email, but may as well ask this here. It looks like your builds are running on the legacy infrastructure, where as suddenly my builds were running on the new infrastructure (which led me to believe that it was this Travis change that caused failures). Will this change fix builds on the new Travis infrastructure?\n. So this PR is now obsolete?\n. I'll have to think for a bit about whether or not I like this before I merge it.\n. Yeah, it seems fine. Well, alright.\n. Sorry I haven't commented about this yet. I'm on the fence about this change. Let me think about it some more.\n. Danke\n. Dammit.\n. Also, update travis stuff to include the new dependency.\n. > Do you want a fixup commit or shall I amend the old one / force push the pull request?\nWhichever you prefer.\nThe dependencies don't have to be dealt with in cmake files. It's just that gdk pixbuf needs to be installed on the machine running the builds.\nhttps://github.com/SirCmpwn/sway/blob/master/.travis.yml#L3-L22\n. Can you do a FindGDKPIXBUF.cmake?\n. Cool, thanks. Don't worry about taking too long. I'd rather give this time to be fleshed out properly.\n. Code looks good. Will wait for Travis to pass and then I want to test this manually when I get some time.\n. Works great. Nice job!\n. Sway requires KVM, which does not work on VirtualBox. What's this about?\n. Oh, I misunderstood.\n. Thanks!\n. > One thing that I have noticed is that I am unable to change the background on the fly, once I set it in the config file, I can't change it.\nUnrelated, known problem.\n. I like the idea of adding an extension to floating_modifier.\n. Yep, that's fine. You may also want to explain in the text that it's optional. I'll review+merge this after work today.\n. LGTM.\n. Are you up to date on everything? In particular, make sure you're up to date on both wlc and sway.\n. Could you humour me by recompiling wlc? This was a known bug that was fixed in https://github.com/Cloudef/wlc/commit/359cfe776a17a0fae5f8179e8a89e9b47256f602\n. Recompiling sway or wlc? What distro are you on?\n. Which version of xwayland?\n. Can you try 1.18.0?\n. Strange. I can't reproduce. You're on your own here.\n. Unmanaged windows are pretty buggy in sway. I think they're the source of this and other problems.\n. My current understanding of the issue is that the fault is shared between all three.\n. This looks good. We'll see what Travis thinks of it.\n. I feel like I've seen some of this behaviour before. How long has it been since you updated sway?\n. It's generally best to update both of them at the same time. If the issue persists, let me know and I'll investigate it.\n. Alright. I'll try to reproduce this when I have time. In the meantime, can you produce a debug log? What distribution are you on?\n. Lot of gentoo people coming forward with problems today. Probably gentoo that's busted, not sway.\nYes, that's how you get a log.\n. The readme does mention that you have to setuid it.\n. https://github.com/SirCmpwn/sway/commit/fd4cf52518d265c681951bc4c193a2956afefc40\n. I feel like this is going to have broader consequences. I guess we'll see.\n. That's not a config file option, it's part of the JSON you can send via stdout from status_command to have formatted colors and such.\n. I have the gaps configured like so in that screenshot:\ngaps outer 0\ngaps inner 10\nIncorrect?\n. I see. The gaps right now are just implemented as margins. I'll see about fixing this, thanks!\n. As in fullscreening the actual container, instead of views? No, that's not supported, but would probably be fairly easy to do.\n. I could see it being useful if you have a complicated layout going and you want to focus on only some part of it for a while. You're right that I don't consider it a high priority, though. Sway also doesn't support floating containers like i3 does.\n. Not presently, no.. Looks good save for the minor issues I mentioned.\n. Spaces issue is everywhere, by the way. Use tabs.\n. Oh, don't return nothing. Implement those error cases!\n. Nice work!\n. Nice.\n. Tray icons aren't a thing on Wayland yet. I was planning on making up some protocol extensions for it and then submitting it to the major toolkit vendors to review/ignore.\n. It's fine for this to all be in one PR. Thanks for taking care of that.\n. Good catch.\n. LGTM, will merge once Travis is happy\n. Will test this in a bit.\n. Travis build failed.\n. Looks good, minor style issue is all.\n. Nice work. The foreground thing was a mistake. Can you extend this to support rgba?\n. Coolio, thanks!\n. Wayland uses client-side cursors, meaning that the wayland clients define the appearance of the cursor. Yes, it's stupid. No, there's nothing sway can do about it.\n. Paging @Cloudef\n. Link 404s.\n. Can you use addr2line to find the files/line nos of the addresses in this stack trace? Notably the WLC ones. You'll need to subtract the library's location from the addresses, which is 0x3543819b000 according to your map.\n. Run addr2line as root, then.\n. Thanks, added that.\n. Probably worth having a second issue for that.\n. Good call.\n. I plan on addressing that at some point, but no Wayland compositors currently support tray icons, so we'd have to make up our own protocol extension and try to land it in the various GUI toolkits, as well as in xwayland.\n. My intention is to support both.\n. Is that a request for a sway-exclusive feature, rather than one for a feature already in i3? If so, please create a new Github issue for it.\n. It's not implemented yet. The link from #222 has nothing to do with mouse events.\n. #450 is what really needs to get done before we can think about mouse events on swaybar.\n. Not yet afaik. It has to be made into a shell surface. A good start would be working on swaybg as a shell surface.\n. A surface is any rectangular area of pixels that the compositor knows about. Shell surfaces are surfaces that act like windows. Presently swaybg and swaybar are both surfaces but not shell surfaces. To interact with the mouse they need to be shell surfaces, but currently sway assumes that all shell surfaces are windows and will attempt to tile them and such.\n. wlc invokes this for shell surfaces. Some surfaces configure themselves through protocol extensions like this instead where sway makes a note of it and renders them later like this.\n. https://github.com/SirCmpwn/sway/blob/master/sway/extensions.c#L85-L99\n. Yes, that's how it works. No, desktop-shell is not sway specific.\n. I would rather call set_panel before creating the shell surface, then associating that surface with a panel and catching that in handle_view_created.\n. We can also just use that one wlc function that creates a shell surface out of an arbitrary surface without any client-side interactions.\n. I am talking about changes to swaybar and swaybg, yes.\n. I don't fully understand what you're asking for.\n. You have to provide all three colors if I recall correctly. The relevant error should have been logged.\n. Send patch?\n. Of course. Thanks!\n. I suppose.\n. Thanks @johnae, added those to the list.. None. Work on it yourself if you want.. That's unrelated to i3 compatability, but perhaps.. Yeah that looks wrong. This is the repository to send patches to.. i3bar's features are fully supported (except tray icons, which are being tracked separately).. See #308 - this needs to be handled on the sway side.\n. Not true. The children of the outputs (i.e. swayc_t->children) should be sorted according to #308, and the JSON will reflect that. This is important not just for displaying on swaybar, but also for things like workspace_next_on_output.\n. Split the second problem into #346 \n. CPU usage is still a bit high, paging @Cloudef for advice.\n. Our pre-render is here: https://github.com/SirCmpwn/sway/blob/master/sway/handlers.c#L74-L115\n. @Cloudef it's sway that's sitting at high CPU. I'll run it through perf later today, looping you in because I suspect wlc's the culprit.\n. swaybar was constantly requesting a rerender, but I fixed it so it only does so if it needs to change its appearance. Now it's requesting a rerender about once a second with the default config.\n. Related - you can't change your wallpaper at runtime. We need to kill and restart the sway subprocesses.\n. I like that approach.\n. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. The behaviour of the bar and gaps are both correct with this patch applied?\n. Thanks!\n. @mikkeloscar just run arrange_windows(&root_container, -1, -1) to force a rearrange of the entire compositor.\n. commands.c really needs to be split up at some point.\n. LGTM, but holding off on merge pending @mikkeloscar's feedback.\n. I'm not sure I follow. Is there something wrong with that behaviour?\n. I think I understand better now, thanks for pointing it out.\n. Thanks!\n. None of that makes sense.\n. Eventually I would like to have an input { } section in your config, like bar { }  and mode { } and such.\n. Indeed, there's a wlc callback.\n. I would really prefer if the input configuration was done in your sway config.\n. Can we CRC-32 the device name strings and let you edit config files with them? We can log the CRCs and add an IPC command for listing input devices to make it easier on the user.\n. I agree with that, @mikkeloscar.\n. Thanks!\n. Alright, but you can't have swaylock without it.\n. @mikkeloscar I'll be refactoring the crap out of swaybar et al soon.\n. Thanks @crondog!\n. Thanks!\n. Nah. If you want to specify the filetype, just specify the whole filename.\n. cc @Cloudef\n. It's not documenting the binary. It's a subpage of sway(5).\n. This is fine, I'll keep merging until I actually do the refactoring and I'll be sure to give everyone a head's up in #sway when it gets going.\n. I'm not sure that multiple graphics cards are well supported on wlc yet (paging @Cloudef).\n. Try setting WLC_DRM_DEVICE=card1.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Actually, we need to be parsing the pango: thing on the swaybar side of things to keep compatability with i3's IPC protocol.\n. Thanks!\n. That solution is the correct one.\n. It's okay to trigger it twice IMO.\n. Fixed by fc71c6303ca10b59c8f64e752307b0dd26832b52.\n. Man, I have got to refactor the bar soon.\n. Thanks!\n. See the FAQ.\n. If you want to change how imagemagick/ffmpeg are invoked, use raw mode (presently unimplemented).\n. Merge conflicts here.\n. Thanks!\n. Thanks! :christmas_tree: \n. Thanks!\n. Makes sense.\n. Thanks!\n. #203\n. i3lock or swaylock?\n. i3lock isn't supported on sway and swaylock doesn't work yet.\n. Still an issue? Run swaylock -i wallpaper.jpg.\n. :tada: \n. How recently did you update sway? How were you using i3bar?\n. Thanks. Will look into it when possible.\n. Can you just prevent full screening anything that isn't a view?\n. Update wlc-git.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. output * not setting the resolution or position is intentional because it doesn't make sense.\nAs for the rest, what's the output of swaymsg -t get_outputs? You have to restart sway for output settings to take effect, by the way.\n. Thanks. And you tried editing your config, stopping, and restarting sway? If so, please provide a sway log.\n. ls -l ~/Cars/Ferrari_458\\Italia.jpg\nIf there's any error in the output line, the whole thing will not be applied.\n. The output you get here is WLC-1. You're running sway under xorg, not directly.\nNew output 1:WLC-1\nOf course your VGA-1 settings won't work here.\n. The log you gave me is sway running under x.\n. Running sway within sway will run it with xwayland and cause this.\n. I have no idea what you're doing, but you aren't telling the whole story. Give me more details about what you're doing. Exhaustive detail.\n. > Unlike LCDs it has default resolution 1024x768 85hz, but capable of 1280x1024 60hz.\nHere's the issue. WLC (which sway uses for low level things) does not support modesetting. You can only use the default mode, and then scale the interface up to meet it (useful for HiDPI, for example). Anyway, this is a wlc issue, roping in @Cloudef and closing this issue.\n. LGTM, waiting on travis\n. > return focus to the original fullscreen view\nthis\n. Wayland has no concept of urgency so I want to hold off on all related features for now.\n. Thanks!\n. Thanks @mikkeloscar!\n. This opens the door for keylogging on sway. I have to think about this.\n. Can you put this feature behind a build flag?\n. I would rather put the #ifdefs into ipc_binding_event and make it a no-op if not enabled.\n. That's not what I mean. I want the event to be registerable and all of the code to remain the same, but the body of the ipc_event_binding function to be omitted if not SWAY_BINDING_EVENT.\n. Alright, w/e\n. That should work. Make it optional, though.\n. Can you squash all of this when you're done?\n. Do this:\ngit rebase -i HEAD~18\nDouble check that you have all the right commits here, then replace \"pick\" with \"squash\" for all but the first commit, then save and close the file and enter a single commit message for this whole change. Then:\ngit push -f\n. Whoops, you got one commit too many in the squash. This can't be merged like that. Can you just grab the relevant files and make a new commit on a new branch and open a new pull request?\n. Looks great. Nice work!\n. > The other two change the way swaybar sends commands to sway. Now it only uses a single socket to communicate with sway and treat responses to ipc commands the same as events.\nAfter this was discussed, I am supportive of the two socket approach.\n. LGTM, thanks\n. Can we make up a value for input_code and make sure to include it as well for backwards compatability? The first value of input_codes would be fine.\n. Thanks!\n. Thanks!\n. Duplicate of https://github.com/Cloudef/wlc/issues/104\n. > No way to swap keys... I had super and capslock swapped, so when i push the traditional capslock, it would do super, nad when i do the traditional super, it'd enable capslock.\nNot true, look into configuring your xkb settings properly.\n\nNo borders (obviously being fixed)\n\nYep.\n\nIn resize mode, it acts as though there is no keyboard repeat.\n\nhttps://github.com/Cloudef/wlc/pull/107\n\nChromium & mousepad (probably applies to other X.org things) stops working after a bit, sometimes vanishes after you use it for a bit, and vanishes if you switch workspaces occasionally.\n\nReport as a separate bug.\n\nNo system tray icons.\n\nWill be fixed, have patience.\n\nNo way to edit the repeat rate.\n\nBring it up with wlc.\n. Looks pretty good, nice work! Just a few comments here and there. Another thing: can you refactor this into a new command group? Instead of configuring inputs like this:\ninput 0:0:Atmel_maXTouch_Touchscreen events disabled\ninput 0:0:Atmel_maXTouch_Touchpad tap disabled\ninput 0:0:Atmel_maXTouch_Touchpad dwt enabled\ninput 0:0:Atmel_maXTouch_Touchpad click_method clickfinger\ninput 0:0:Atmel_maXTouch_Touchpad natural_scroll enabled\ninput 0:0:Atmel_maXTouch_Touchpad scroll_method two_finger\nHow about this:\ninput 0:0:Atmel_maXTouch_Touchscreen {\n    events disabled\n    tap disabled\n    dwt enabled\n    click_method clickfinger\n    natural_scroll enabled\n    scroll_method twofinger\n}\nAnd any thoughts on configuring pointer acceleration?\n. @onny I disagree.\n. No, that's not the intention, but that's an interesting point. I suppose I would support supporting both forms so long as DRY is not violated.\n. Other than the one issue, this looks great!\n. Thanks!\n. Please run addr2line on the backtrace to produce file names and line numbers.\n. That looks like a different backtrace? Compare the swaygrab addresses with the original backtrace.\n. Well this one also has a different error. This error is in the cleanup code. Line 257 frees the path to the file you wanted to save the screenshot to. In this case, the screenshot file should have actually been written by this point in the code. Does it exist?\n. After this is merged, I'm going to implement something similar for swaybar so we can get the pointer (and pointer events) over it as well.\n. Known issue - fullscreening a view now renders swaybar on top of it. I leave this as an exercise for another contributor to fix.\n. Hmm, that makes sense. I was considering a different strategy for this feature that I think I'm going to end up going with to fix that.\n. We need to support unmanaged views that live on outputs rather than workspaces. I'd start from scratch here tbh.\n. And it would also be better to use a custom role and use wlc_convert_to_view or whatever it's called instead of using a shell surface.\n. Will reattempt this from scratch when the time comes.\n. If the source of the problem is what you suggest, I don't want to fix it. One of the advantages of sway over i3 is that key bindings aren't based on modifiers. In i3 you can't have mod+1+2 do something distinct from mod+1 or mod+2, but in sway you can. I want to keep it that way. Key bindings are matched based on the current view of the keyboard state and that shouldn't change.\n. Well, think about stacking modifiers as well (in sway modifiers are treated as normal keys). Would you want mod+shift+s to behave differently than mod+s? In my own config I depend on there being a difference.\n. That seems fair. After playing around with sway's current keyboard handling, I also don't see any reason to allow $mod+1+2 and $mod+1 to coexist.\n. Fixed in #523, thanks @mikkeloscar \n. Yeah, that's the compositor's responsibility. It's about the same priority for sway as adding Windows support.\n. Thanks!\n. Gonna merge this since there have been no protests.\n. Can you elaborate? It's set so far as I can tell.\n. Interesting. I cannot reproduce.\n. Okay if you reattach to a tmux that was created with an older SWAYSOCK then of course it's not going to work.\n. The entire purpose of tmux is to do the opposite.\n. And the others?\n. Blocked by the lack of a means to get the pid of the client given a wlc_handle. cc @Cloudef\n. Sounds good to me, @Cloudef.\n. wlc has support for this, so now we should be able to track pids of windows that we open and assign them to the workspace that was visible when they were invoked.\n. Can you merge master into your branch?\n. Nevermind, read your diff and it's dead simple.\n. We should implement the same command line as i3lock.\n. Sorry, I misunderstood @mikkeloscar's comment. This looks fine.\n. Can you add some comment that clarifies that you aren't meant to run swaybar manually?\n. Thanks. Will merge with the build.\n. Figured if I left this alone for long enough someone else would do it :wink: \nShould I wait for those check boxes to be checked before review/merge?\n. Just took a look, it's all good. I like where this is heading.\n. Nice!\n. See https://github.com/SirCmpwn/sway/pull/472 for details on why this was closed.\n. I can reproduce this.\n. Haha, just use swaylock when it's done to lock your screen. That's not a bad idea for a feature, though.\n. I think it's entirely fair for swaylock to support transparency in the --color argument, so you could specify a completely transparent color to achieve that effect. Could also use semitransparent images as the background image.\n. swaylock --color #00000000 - transparent black\nswaylock --color #000000 - solid black\nswaylock --color #FF000000 - solid black\n. > Solid black should be swaylock --color #000000FF so it will play nice with cairo_set_source_u32\nYeah, my mistake.\n. Nice fix. Will merge when build passes.\n. Hmm. I only just now looked at these issues in detail, and I'm going to close both #468 and this pull request. swaymsg should only ever print out valid JSON, not something resembling it. I would be open to the idea of making a pretty flag that prints out something entirely unlike JSON, such as:\n$ swaymsg -pt get_outputs\nHDMI-A-1: 1920x1080+0,0\n    Primary: true\n    Active: true\n    Current workspace: 1\n. Yeah.\n. I'm leaving this slash problem in place to drive us towards the better feature of having a flag to enable output that is actually pretty and meaningful to humans, rather than patching up a feature designed for machines (JSON) to be easier for humans to read.\n. Let's start by checking that you're running the latest version of sway, @podhorsky-ksj.\n. Can you share your sway log? See the FAQ\n. This looks fine, thanks!\n. Probably easier to implement with GL. Unsure about the performance.\n. Text rendering in GL (for window titles) is a pain in the ass, fwiw\n. Probably, but the GL backend for cairo is experimental. Not sure what that implies.\n. Well, if it works, it works.\n. The surface method would be to create a new surface every time a view is created that needs window borders and somehow associate it with that window, then move it during the layout arrangement.\n. I have no intention of implementing window buttons.\n. I don't really understand what you're suggesting.\n. Borders are also very useful in the tiled and stacking layouts.\n. > As for the discussion, I see titlebars and borders as two separate features:\nThey aren't, really.\n. We're going to be adding multitouch bindings in the future, so you could bind a gesture to do whatever the buttons could do.\n. The bar font should use this if the user doesn't specify one.\n. Needs a default value too.\n. Thanks!\n. Please run addr2line on your backtrace. Also, your log is private.\n. Oh, you have stripped binaries. Can you compile sway yourself and run a debug build to reproduce the problem? Then addr2line will produce the expected results.\n. Oh, wow, this crash actually occurs in the video driver. Not sure what we can do about that.\n. To get us a usable backtrace. Right now I just have addresses and function names, which is not very useful for actually identifying the problem. If you compile it in debug mode, you'll get symbols in your binary and addr2line will translate the addresses into file names and line numbers, which pinpoints the actual problem.\n. I didn't see a make install in your steps. I'm also not sure that cmake isn't going to strip it anyway when you make install. Can you try running sway from the build directory?\n. Can you actually build it from source? I'm tired of reprimanding you for taking shortcuts. Do you want help with this problem or not?\n. Can you reproduce the problem with orbment?\n. Once it happens to both it's a wlc bug. cc @cloudef\n. Perhaps a fix similar to this in wlc would do the trick: https://github.com/swaywm/wlroots/pull/444. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. That's nvidia's fault.\n. Correct.\n. Fuck yeah! I'm going to test it out when I get home and I'll pull out the warnings if it works.\n. Well, on second thought, I'm going to wait before it hits arch stable before dropping the warnings. Will probably add a version check, too.\n. Implement it if you want. I'm happy on nouveau.. Tell that to nvidia.. No. The warning is just a warning, it doesn't stop sway from trying anyway. Once I hear positive feedback from some users, I will remove the warning.. Use i3, then.. Report to WLC.\n. Code looks good to me, but I want to manually test this before merging (will do tonight). Would appreciate tests from others as well.\n. Try wl_display_flush?\n. (It can return -1 and set errno to EAGAIN)\n. Nice. Will merge when build passes.\n. This has merge conflicts to resolve, but looks good aside.\n. Thanks!\n. Paging @aouelete to test\n. Thanks!\n. I can get why this might be happening. Once the screen is locked, the code to deal with key events is short circuited to avoid executing keybindings and passing keys along to programs. Should rework it to keep the internal keyboard state machine accurate even when locked.\n. Paging @stapelberg to confirm that assumption.\n. Seems reasonable to me. Let's go with that behavior.\n\nI\u2019m assuming \u201cview\u201d in sway maps to \u201ccontainer\u201d in i3.\n\nIndeed, but specifically refers to a window as opposed to any kind of container.\n. It's not sway's place to change i3's behavior. I'll merge it as-is if @stapelberg agrees that it's a bug.\n. Status of this?\n. Have you updated your pull request to implement the desired behavior of i3, rather than the behavior originally presented by this PR?\n. @Airblader added the bug tag on the i3 issue, let's bring him in. I'm still not convinced that the original PR behavior is the desired i3 behavior, I'd like to hear it from the horse's mouth.\n. Thanks for clarifying, @stapelberg.\n. Bump. What's the status of this? I'm okay with the original pitch (after @acrisci's comment), but I want to have it synced up with master and a quick sanity check to make sure it still works.\n. It's all good, @mikkeloscar. I'll see if I can tidy it up and get it merged myself when I have time.\n. Open a new pull request tidying it up and fixing the merge conflicts if you want it in sooner rather than later.\n. Tests have been looked into. I wasn't satisfied with any of the available testing frameworks for C.\n. I've done lots of research, including into the i3 tests. I'm sure they work well for you, but they aren't the sort of thing I'm looking for. There have been some discussions about a third party running the actual i3 test suite against sway, which I would love to see happen, but as far as upstream testing is concerned I'd like to identify something better.\nI recently wrote a blog post that talks about the usefulness of mocking and includes an example of what a test using my ideal test framework would look like, to give some extra details: https://drewdevault.com/2016/07/19/Using-Wl-wrap-for-mocking-in-C.html\nTests are something that's talked about a lot in the sway community and I definitely want to have them, but I don't think any of the solutions I've seen or researched so far are as effective as I would like.\n. I definitely understand the value of a test suite, though I don't think it's drop-everything-and-do-it-now valuable. Sway is still shipping 0.x releases, and I'm okay with some buginess (and actually sway has got a surprisingly small number of bugs all things considered). As I said earlier, I would be thrilled if a third party started setting up tests out of tree, and I might even contribute to them, but I don't want to start shipping a test suite upstream until I find or build a solution that I'm satisfied with. In my opinion the best way to test is to consider each tested function a contract and use mocking to test its obedience to that contract in isolation, plus tests more along the lines of what i3 uses to make sure all of the individually-tested pieces work together correctly (integration tests). I don't want to throw away a bunch of work when the right solution does come along.\nFor the record there's a branch where I started implementing a test suite based on cmocka, which I thought was the closest available test framework to what I'm looking for, but I abandoned the branch because of complications with how cmocka is implemented. The branch is here: https://gogs.sr.ht/SirCmpwn/sway\n. The cmocka tests were so close, but it fell apart as I tried to make it work for more complex parts of sway. I was going to try and improve cmocka to meet our needs but the codebase is pretty gross. I'd be better off just writing a new test framework, so I'll be looking into that in the nearish future. It's one of the things I would like to do prior to shipping 1.0. Believe me, I completely understand the value of a test suite, as well as the difficulty in introducing one late in development, but this is what I think is best.\nI've said before that I will give due consideration to any pull request proposed that adds a test suite, by the way. If someone else thinks they have a strategy that will do the trick, then by all means give it a shot and open up a PR. It doesn't even need to be perfect, I just need to feel like it will scale to the entire codebase and still be effective.\n. Replaced by #500\n. Thanks!\n. Thanks!\n. I can reproduce this and have similar issues for many other kinds of windows. I will investigate this soon.\n. Thanks. Window borders does reveal a lot about this problem. Pulled in @Cloudef, since I'm betting this is a wlc thing.\n. Right. I'm thinking that wlc is giving us one geometry for the window and rendering it in a different place. It's probably more subtle than that, though, because interactivity with these windows is weird.\n. It uses sway's internal state for that view, which is calculated by sway and handed to wlc_view_set_geometry.\n. Really? So far as I can tell, that's not the case (after reading through the relevant code).\n. Ah. Cool.\n. Fixed by https://github.com/Cloudef/wlc/issues/145\n. Check out the window-borders branch.\n. It will be done when it is done. You're welcome to send pull requests against that branch if you wish.\n. Fixed, thanks!\n. By the way, @Cloudef, you might want to do something like this in wlc. I've always felt like this was wlc's problem.\n. My bad - this does not seem to have been fixed by #510.\n. cc @mikkeloscar \n. No problem\n. Does not occur when running sway under X.\n. Correction - it works for me now. The only change I've made recently is that I'm running a debug build of wlc, not sure if it's related.\n. @onny can you confirm if this is still an issue for you?\n. Nice!\n. Feel free to keep having a discussion, but I'm not sure there's something actionable here so I'm going to close the issue.\n. It depends on what's necessary to support it. What would have to change?\n. That sounds like it's supported by i3-gaps and falls under the scope of https://github.com/SirCmpwn/sway/issues/307\n. Thanks!\n. Can confirm this is fixed now. Thanks @mikkeloscar!\n. Does this help address #514?\nAlso, please merge and/or rebase master into your branch.\n. I'll test the floating windows at work tomorrow (I noticed this problem on my setup at work, which has multiple display resolutions). Thanks!\n. > So, I tried sway some more nested in X11, and dmenu and urxvt would appear. Not exactly sure why :/\nThis is an issue with nested sways that comes from wlc. I informed @Cloudef of it a while ago.\nhttps://github.com/Cloudef/wlc/issues/113\n. Can reproduce on a void linux install with musl libc. Will investigate.. The problem lies somehow with Xwayland, though I'm not sure exactly how yet. Problem disappears when Xwayland is disabled. Also, interestingly, I can run sway as root and it works correctly. Likely related to some permissions problem.. So it seems that Xwayland is never sending SIGUSR1 to wlc, so it never thinks it's ready. Still not sure why. Going to end up having to dig into Xwayland itself. Bleh.. To clarify: this is a place where I am willing to break backwards compatability in exchange for saner behaviour. The correct command is:\nbindsym $mod+x exec dmenu_run -i -nb '#181818' -nf '#d8d8d8' -sb '#181818' -sf '#a1b56c'\n. Looks good. Can you sync with master?\n. Thanks!\n. Related to #519?\n. Got it. I'm pretty sure exec just runs the command with sh, but worth double checking.\n. I'm inclinded to agree with @mikkeloscar on this one.\n. Closing as intended behavior.\n. Well, if it's not the behavior of i3, I'll concede. I'd consider that a failing of i3, for what it's worth.\n. > I'll make a PR for i3-dmenu-desktop and see what they say about it.\nIf it gets merged, we're golden, but I'm not going to break backwards compatability with i3 over this if necessary.\n. Closed in favor of https://github.com/i3/i3/issues/2329\n. Nice! Will merge when build passes.\n. Looks good. Tested and can confirm it fixes #452. Will merge when build completes.\n. Can you make a new pull request?\n. No, that's not presently possible.. No. It should be possible when wlroots is complete.. What happens if I specify one image with an output name, but don't specify enough images for all outputs?\n. Alright, that seems fair to me.\n. LGTM, will merge when build passes.\n. I knew this was happening, and I didn't care. Thanks for caring :)\n. Cool, thanks.\n. I'd like to see a protocol extension written for this, and then a seperate daemon to manage it.\n. https://github.com/SirCmpwn/sway/tree/master/protocols\nThey're pretty straightfoward. Write an XML file describing the interface, add it to CMakeLists.txt, and you'll end up with a header to include.\n. See also https://github.com/SirCmpwn/sway/blob/master/sway/extensions.c\n. Nope.\n. It's not currently a priority in the wlroots port. Let's swing back to it later.. First pass on code is good, going to test this locally\n. LGTM. Would like a second review, though.\n. Thanks ^_^\n. Yes, it's the random wheel thing. You will be able to disable it with -u when we implement it.\n. You're encouraged to fork swaylock and make it do whatever you please.\n. Honestly I oppose any major changes to swaylock's behavior beyond what i3lock does. I think it'd be great if there were more screen lockers available that did more interesting things - you should definitely fork swaylock for this purpose.\n. Nice! Can you change how the file name works, though - can you use wordexp and support including multiple configs (i.e. include ~/.config/sway.d/*).\n. Just check that it's not a directory. I don't want to prevent people from doing clever things with sockets and fifos and symlinks and so on.\n. Oh, and don't log it, just continue silently. This isn't an error:\n.config\n\u2514\u2500\u2500 sway/\n    \u251c\u2500\u2500 config\n    \u2514\u2500\u2500 config.d/\n        \u251c\u2500\u2500 example\n        \u2514\u2500\u2500 homura/\n            \u2514\u2500\u2500 example\n. Thanks!\n. Err, no, I don't think logging it at all is necessary.\n. A problem that comes to mind is that bar config blocks can specify the bar ID for multiple bar commands. I think I'm willing to make a breaking change here, considering that most people don't have multiple bar configs, and support something like this:\nbar \"bar-0\" {\n    ...\n}\nInstead of the i3-compatible:\nbar {\n    id \"bar-0\"\n    ...\n}\nThough if anyone can think of a good way to get both working, that'd definitely be better.\n. Very cool stuff. Some feedback before I dive into the code:\n1. Isn't there supposed to be a different border for windows that are focused, but on an output that is not focused?\n2. My font is incorrect now for swaybar. Oddly it's correct for the window titles.\nA runtime check on endianness works for me.\n. Another issue: you can see the border through transparent surfaces.\n. Mar 29 13:27:15 (process:6942): Pango-CRITICAL **: pango_font_description_from_string: assertion 'str != NULL' failed\nFrom my log. 6942 is my swaybar process.\n. gnome-calculator freaks out when I'm running this branch, too.\nNot blocking a merge imo.\n. That's all I've got. Looks great, nice work!\n. > The title does not change. I don't know if wlc provides a way to get the current window title, haven't looked into it.\nSame way we get it in the first place, if I recall correctly.\n/** Get title. */\nconst char* wlc_view_get_title(wlc_handle view);\n. I get a crash on this branch when initiating a download in firefox.\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\n[handlers.c:347] geometry request for 7 499x379 @ 1261,706\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\nsway: /tmp/yaourt-tmp-sircmpwn/aur-wlc-git/src/wlc/src/compositor/output.c:142: blit: Assertion `b->x - a->x >= 0' failed.\n[log.c:150] Error: Signal 6. Printing backtrace\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x426aaf]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x33330) [0x7fd659773330]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7fd6597732a8]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(abort+0x16a) [0x7fd65977472a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x2c1b7) [0x7fd65976c1b7]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x2c262) [0x7fd65976c262]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(+0x22190) [0x7fd65b80d190]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(+0x9157) [0x7fd65af27157]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) [0x7fd65af27832]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7fd65af25ee5]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(wlc_run+0xec) [0x7fd65b81682c]\n[log.c:160] Backtrace: sway(main+0x473) [0x422beb]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7fd659760710]\n[log.c:160] Backtrace: sway(_start+0x29) [0x407fc9]\n[log.c:163] Maps:\n[log.c:174] 00400000-00432000 r-xp 00000000 fe:00 1866366                            /usr/bin/sway\n[log.c:174] 00631000-00633000 rw-p 00031000 fe:00 1866366                            /usr/bin/sway\n[log.c:174] 016b4000-040ac000 rw-p 00000000 00:00 0                                  [heap]\n[log.c:174] 7fd647ef8000-7fd6496f8000 rw-s 00000000 00:05 299620                     /drm mm object (deleted)\n[log.c:174] 7fd6496f8000-7fd64a4f8000 rw-s 00000000 00:05 299626                     /drm mm object (deleted)\n[log.c:174] 7fd64a4f8000-7fd64bcf8000 rw-s 00000000 00:05 285420                     /drm mm object (deleted)\n[log.c:174] 7fd64bcf8000-7fd64bdf7000 rw-s 00000000 00:2c 298881                     /run/user/1000/weston-shared-XWFJr8 (deleted)\n[log.c:174] 7fd64bdf7000-7fd64cc07000 rw-s 00000000 00:2c 298880                     /run/user/1000/sway-client-tuMlBd (deleted)\n[log.c:174] 7fd64cc07000-7fd64cc87000 rw-s 00000000 00:05 285418                     /drm mm object (deleted)\n[log.c:174] 7fd64cc87000-7fd64da87000 rw-s 00000000 00:05 285417                     /drm mm object (deleted)\n[log.c:174] 7fd64da87000-7fd64db87000 rw-s 00000000 00:05 285416                     /drm mm object (deleted)\n[log.c:174] 7fd64db87000-7fd64dc86000 rw-s 00000000 00:2c 294569                     /run/user/1000/weston-shared-j5Qwr8 (deleted)\n[log.c:174] 7fd64dc86000-7fd64e550000 rw-s 00000000 00:2c 294568                     /run/user/1000/sway-client-u3w8Ad (deleted)\n[log.c:174] 7fd64e550000-7fd64e64f000 rw-s 00000000 00:2c 297864                     /run/user/1000/weston-shared-nWarHO (deleted)\n[log.c:174] 7fd64e6ce000-7fd64eece000 rw-s 00000000 00:05 280477                     /drm mm object (deleted)\n[log.c:174] 7fd64eece000-7fd64f3c0000 rw-s 00000000 00:2c 297858                     /run/user/1000/sway-client-igWMqa (deleted)\n[log.c:174] 7fd64f3c0000-7fd64f3c4000 r-xp 00000000 fe:00 1861464                    /usr/lib/libtxc_dxtn.so\n[log.c:174] 7fd64f3c4000-7fd64f5c3000 ---p 00004000 fe:00 1861464                    /usr/lib/libtxc_dxtn.so\n[log.c:174] 7fd64f5c3000-7fd64f5c4000 r--p 00003000 fe:00 1861464                    /usr/lib/libtxc_dxtn.so\n[log.c:174] 7fd64f5c4000-7fd64f5c5000 rw-p 00004000 fe:00 1861464                    /usr/lib/libtxc_dxtn.so\n[log.c:174] 7fd64f5f5000-7fd64f5fd000 rw-s 00000000 00:05 299582                     /drm mm object (deleted)\n[log.c:174] 7fd64f5fd000-7fd64f605000 rw-s 00000000 00:05 299581                     /drm mm object (deleted)\n[log.c:174] 7fd64f605000-7fd64f62c000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd64f667000-7fd64f766000 rw-s 00000000 00:2c 297861                     /run/user/1000/weston-shared-nCyFvY (deleted)\n[log.c:174] 7fd64f766000-7fd64f865000 rw-s 00000000 00:2c 280471                     /run/user/1000/weston-shared-9ZL0m8 (deleted)\n[log.c:174] 7fd64f8ca000-7fd64f8cb000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd64f8cb000-7fd64f8cc000 rw-s 00000000 00:2c 300579                     /run/user/1000/xwayland-shared-9dnrvc (deleted)\n[log.c:174] 7fd64f8cc000-7fd64f8cd000 rw-s 00000000 00:05 299628                     /drm mm object (deleted)\n[log.c:174] 7fd64f8cd000-7fd64f8ce000 rw-s 00000000 00:05 300400                     /drm mm object (deleted)\n[log.c:174] 7fd64f8ce000-7fd64f8cf000 rw-s 00000000 00:2c 298938                     /run/user/1000/xwayland-shared-Ze8tSZ (deleted)\n[log.c:174] 7fd64f8cf000-7fd64f8d1000 rw-s 00000000 00:05 297983                     /drm mm object (deleted)\n[log.c:174] 7fd64f8d1000-7fd64f8d2000 rw-s 00000000 00:2c 300418                     /run/user/1000/xwayland-shared-tMgCXa (deleted)\n[log.c:174] 7fd64f8d2000-7fd64f8d3000 rw-s 00000000 00:05 299617                     /drm mm object (deleted)\n[log.c:174] 7fd64f8d3000-7fd64f8d4000 rw-s 00000000 00:2c 297871                     /run/user/1000/xwayland-shared-LVtleh (deleted)\n[log.c:174] 7fd64f8d4000-7fd64f8e4000 rw-s 00000000 00:05 300399                     /drm mm object (deleted)\n[log.c:174] 7fd64f8e4000-7fd64f9e3000 rw-s 00000000 00:2c 297859                     /run/user/1000/weston-shared-Dq1Yg5 (deleted)\n[log.c:174] 7fd64f9e3000-7fd64f9f3000 rw-s 00000000 00:05 285421                     /drm mm object (deleted)\n[log.c:174] 7fd64f9f3000-7fd64fa53000 rw-s 00000000 00:05 285419                     /drm mm object (deleted)\n[log.c:174] 7fd64fa53000-7fd64fa7f000 rw-s 00000000 00:2c 297868                     /run/user/1000/sway-client-xzXa3z (deleted)\n[log.c:174] 7fd64fa7f000-7fd64fab9000 rw-s 00000000 00:2c 297867                     /run/user/1000/sway-client-HPJSVE (deleted)\n[log.c:174] 7fd64fab9000-7fd64fada000 rw-s 00000000 00:2c 297866                     /run/user/1000/sway-client-P2yCOJ (deleted)\n[log.c:174] 7fd64fada000-7fd64fae2000 rw-s 00000000 00:05 299629                     /drm mm object (deleted)\n[log.c:174] 7fd64fae2000-7fd64faea000 rw-s 00000000 00:05 299623                     /drm mm object (deleted)\n[log.c:174] 7fd64faea000-7fd64fafa000 rw-s 00000000 00:05 299618                     /drm mm object (deleted)\n[log.c:174] 7fd64fafa000-7fd64fafb000 rw-s 00000000 00:05 299613                     /drm mm object (deleted)\n[log.c:174] 7fd64fafb000-7fd64fafc000 rw-s 00000000 00:05 299611                     /drm mm object (deleted)\n[log.c:174] 7fd64fafc000-7fd64fb04000 rw-s 00000000 00:05 299610                     /drm mm object (deleted)\n[log.c:174] 7fd64fb04000-7fd64fb05000 rw-s 100002000 00:06 13742                     /dev/dri/card0\n[log.c:174] 7fd64fb05000-7fd64fb0d000 rw-s 00000000 00:05 299603                     /drm mm object (deleted)\n[log.c:174] 7fd64fb0d000-7fd64fb0e000 rw-s 00000000 00:05 299600                     /drm mm object (deleted)\n[log.c:174] 7fd64fb0e000-7fd64fb16000 rw-s 00000000 00:05 299597                     /drm mm object (deleted)\n[log.c:174] 7fd64fb16000-7fd64fb1e000 rw-s 00000000 00:05 299590                     /drm mm object (deleted)\n[log.c:174] 7fd64fb1e000-7fd64fb72000 r--p 00000000 fe:00 406459                     /usr/share/fonts/ttf-dejavu-ib/DejaVuSansMono.ttf\n[log.c:174] 7fd64fb72000-7fd64fb9a000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd64fb9a000-7fd64fba2000 r-xp 00000000 fe:00 1857855                    /usr/lib/libpciaccess.so.0.11.1\n[log.c:174] 7fd64fba2000-7fd64fda2000 ---p 00008000 fe:00 1857855                    /usr/lib/libpciaccess.so.0.11.1\n[log.c:174] 7fd64fda2000-7fd64fda3000 r--p 00008000 fe:00 1857855                    /usr/lib/libpciaccess.so.0.11.1\n[log.c:174] 7fd64fda3000-7fd64fda4000 rw-p 00009000 fe:00 1857855                    /usr/lib/libpciaccess.so.0.11.1\n[log.c:174] 7fd64fda4000-7fd64fdba000 r-xp 00000000 fe:00 1838523                    /usr/lib/libgcc_s.so.1\n[log.c:174] 7fd64fdba000-7fd64ffb9000 ---p 00016000 fe:00 1838523                    /usr/lib/libgcc_s.so.1\n[log.c:174] 7fd64ffb9000-7fd64ffba000 rw-p 00015000 fe:00 1838523                    /usr/lib/libgcc_s.so.1\n[log.c:174] 7fd64ffba000-7fd65012c000 r-xp 00000000 fe:00 1838568                    /usr/lib/libstdc++.so.6.0.21\n[log.c:174] 7fd65012c000-7fd65032c000 ---p 00172000 fe:00 1838568                    /usr/lib/libstdc++.so.6.0.21\n[log.c:174] 7fd65032c000-7fd650336000 r--p 00172000 fe:00 1838568                    /usr/lib/libstdc++.so.6.0.21\n[log.c:174] 7fd650336000-7fd650338000 rw-p 0017c000 fe:00 1838568                    /usr/lib/libstdc++.so.6.0.21\n[log.c:174] 7fd650338000-7fd65033c000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65033c000-7fd650347000 r-xp 00000000 fe:00 1888741                    /usr/lib/libdrm_radeon.so.1.0.1\n[log.c:174] 7fd650347000-7fd650546000 ---p 0000b000 fe:00 1888741                    /usr/lib/libdrm_radeon.so.1.0.1\n[log.c:174] 7fd650546000-7fd650547000 r--p 0000a000 fe:00 1888741                    /usr/lib/libdrm_radeon.so.1.0.1\n[log.c:174] 7fd650547000-7fd650548000 rw-p 0000b000 fe:00 1888741                    /usr/lib/libdrm_radeon.so.1.0.1\n[log.c:174] 7fd650548000-7fd65054f000 r-xp 00000000 fe:00 1888750                    /usr/lib/libdrm_nouveau.so.2.0.0\n[log.c:174] 7fd65054f000-7fd65074e000 ---p 00007000 fe:00 1888750                    /usr/lib/libdrm_nouveau.so.2.0.0\n[log.c:174] 7fd65074e000-7fd65074f000 r--p 00006000 fe:00 1888750                    /usr/lib/libdrm_nouveau.so.2.0.0\n[log.c:174] 7fd65074f000-7fd650750000 rw-p 00007000 fe:00 1888750                    /usr/lib/libdrm_nouveau.so.2.0.0\n[log.c:174] 7fd650750000-7fd650770000 r-xp 00000000 fe:00 1888742                    /usr/lib/libdrm_intel.so.1.0.0\n[log.c:174] 7fd650770000-7fd65096f000 ---p 00020000 fe:00 1888742                    /usr/lib/libdrm_intel.so.1.0.0\n[log.c:174] 7fd65096f000-7fd650970000 r--p 0001f000 fe:00 1888742                    /usr/lib/libdrm_intel.so.1.0.0\n[log.c:174] 7fd650970000-7fd650971000 rw-p 00020000 fe:00 1888742                    /usr/lib/libdrm_intel.so.1.0.0\n[log.c:174] 7fd650971000-7fd650f49000 r-xp 00000000 fe:00 8313                       /usr/lib/xorg/modules/dri/i965_dri.so\n[log.c:174] 7fd650f49000-7fd651148000 ---p 005d8000 fe:00 8313                       /usr/lib/xorg/modules/dri/i965_dri.so\n[log.c:174] 7fd651148000-7fd651179000 r--p 005d7000 fe:00 8313                       /usr/lib/xorg/modules/dri/i965_dri.so\n[log.c:174] 7fd651179000-7fd651180000 rw-p 00608000 fe:00 8313                       /usr/lib/xorg/modules/dri/i965_dri.so\n[log.c:174] 7fd651180000-7fd651188000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd651188000-7fd65118d000 r-xp 00000000 fe:00 1861327                    /usr/lib/libXxf86vm.so.1.0.0\n[log.c:174] 7fd65118d000-7fd65138c000 ---p 00005000 fe:00 1861327                    /usr/lib/libXxf86vm.so.1.0.0\n[log.c:174] 7fd65138c000-7fd65138d000 r--p 00004000 fe:00 1861327                    /usr/lib/libXxf86vm.so.1.0.0\n[log.c:174] 7fd65138d000-7fd65138e000 rw-p 00005000 fe:00 1861327                    /usr/lib/libXxf86vm.so.1.0.0\n[log.c:174] 7fd65138e000-7fd6513a5000 r-xp 00000000 fe:00 1860321                    /usr/lib/libxcb-glx.so.0.0.0\n[log.c:174] 7fd6513a5000-7fd6515a5000 ---p 00017000 fe:00 1860321                    /usr/lib/libxcb-glx.so.0.0.0\n[log.c:174] 7fd6515a5000-7fd6515a7000 r--p 00017000 fe:00 1860321                    /usr/lib/libxcb-glx.so.0.0.0\n[log.c:174] 7fd6515a7000-7fd6515a8000 rw-p 00019000 fe:00 1860321                    /usr/lib/libxcb-glx.so.0.0.0\n[log.c:174] 7fd6515a8000-7fd6515ad000 r-xp 00000000 fe:00 1861332                    /usr/lib/libXfixes.so.3.1.0\n[log.c:174] 7fd6515ad000-7fd6517ac000 ---p 00005000 fe:00 1861332                    /usr/lib/libXfixes.so.3.1.0\n[log.c:174] 7fd6517ac000-7fd6517ad000 r--p 00004000 fe:00 1861332                    /usr/lib/libXfixes.so.3.1.0\n[log.c:174] 7fd6517ad000-7fd6517ae000 rw-p 00005000 fe:00 1861332                    /usr/lib/libXfixes.so.3.1.0\n[log.c:174] 7fd6517ae000-7fd6517b0000 r-xp 00000000 fe:00 1861338                    /usr/lib/libXdamage.so.1.1.0\n[log.c:174] 7fd6517b0000-7fd6519af000 ---p 00002000 fe:00 1861338                    /usr/lib/libXdamage.so.1.1.0\n[log.c:174] 7fd6519af000-7fd6519b0000 r--p 00001000 fe:00 1861338                    /usr/lib/libXdamage.so.1.1.0\n[log.c:174] 7fd6519b0000-7fd6519b1000 rw-p 00002000 fe:00 1861338                    /usr/lib/libXdamage.so.1.1.0\n[log.c:174] 7fd6519b1000-7fd6519c0000 r-xp 00000000 fe:00 1841274                    /usr/lib/libbz2.so.1.0.6\n[log.c:174] 7fd6519c0000-7fd651bbf000 ---p 0000f000 fe:00 1841274                    /usr/lib/libbz2.so.1.0.6\n[log.c:174] 7fd651bbf000-7fd651bc1000 rw-p 0000e000 fe:00 1841274                    /usr/lib/libbz2.so.1.0.6\n[log.c:174] 7fd651bc1000-7fd651bea000 r-xp 00000000 fe:00 1872899                    /usr/lib/libgraphite2.so.3.0.1\n[log.c:174] 7fd651bea000-7fd651dea000 ---p 00029000 fe:00 1872899                    /usr/lib/libgraphite2.so.3.0.1\n[log.c:174] 7fd651dea000-7fd651dec000 r--p 00029000 fe:00 1872899                    /usr/lib/libgraphite2.so.3.0.1\n[log.c:174] 7fd651dec000-7fd651ded000 rw-p 0002b000 fe:00 1872899                    /usr/lib/libgraphite2.so.3.0.1\n[log.c:174] 7fd651ded000-7fd651df4000 r-xp 00000000 fe:00 1873565                    /usr/lib/libdatrie.so.1.3.3\n[log.c:174] 7fd651df4000-7fd651ff3000 ---p 00007000 fe:00 1873565                    /usr/lib/libdatrie.so.1.3.3\n[log.c:174] 7fd651ff3000-7fd651ff4000 r--p 00006000 fe:00 1873565                    /usr/lib/libdatrie.so.1.3.3\n[log.c:174] 7fd651ff4000-7fd651ff5000 rw-p 00007000 fe:00 1873565                    /usr/lib/libdatrie.so.1.3.3\n[log.c:174] 7fd651ff5000-7fd651ffe000 r-xp 00000000 fe:00 1861613                    /usr/lib/libgudev-1.0.so.0.2.0\n[log.c:174] 7fd651ffe000-7fd6521fd000 ---p 00009000 fe:00 1861613                    /usr/lib/libgudev-1.0.so.0.2.0\n[log.c:174] 7fd6521fd000-7fd6521fe000 r--p 00008000 fe:00 1861613                    /usr/lib/libgudev-1.0.so.0.2.0\n[log.c:174] 7fd6521fe000-7fd6521ff000 rw-p 00009000 fe:00 1861613                    /usr/lib/libgudev-1.0.so.0.2.0\n[log.c:174] 7fd6521ff000-7fd652212000 r-xp 00000000 fe:00 1866752                    /usr/lib/libgpg-error.so.0.17.0\n[log.c:174] 7fd652212000-7fd652411000 ---p 00013000 fe:00 1866752                    /usr/lib/libgpg-error.so.0.17.0\n[log.c:174] 7fd652411000-7fd652412000 r--p 00012000 fe:00 1866752                    /usr/lib/libgpg-error.so.0.17.0\n[log.c:174] 7fd652412000-7fd652413000 rw-p 00013000 fe:00 1866752                    /usr/lib/libgpg-error.so.0.17.0\n[log.c:174] 7fd652413000-7fd6524eb000 r-xp 00000000 fe:00 1846502                    /usr/lib/libgcrypt.so.20.0.5\n[log.c:174] 7fd6524eb000-7fd6526eb000 ---p 000d8000 fe:00 1846502                    /usr/lib/libgcrypt.so.20.0.5\n[log.c:174] 7fd6526eb000-7fd6526ec000 r--p 000d8000 fe:00 1846502                    /usr/lib/libgcrypt.so.20.0.5\n[log.c:174] 7fd6526ec000-7fd6526f4000 rw-p 000d9000 fe:00 1846502                    /usr/lib/libgcrypt.so.20.0.5\n[log.c:174] 7fd6526f4000-7fd6526f5000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd6526f5000-7fd652706000 r-xp 00000000 fe:00 1846516                    /usr/lib/liblz4.so.1.7.1\n[log.c:174] 7fd652706000-7fd652905000 ---p 00011000 fe:00 1846516                    /usr/lib/liblz4.so.1.7.1\n[log.c:174] 7fd652905000-7fd652906000 r--p 00010000 fe:00 1846516                    /usr/lib/liblz4.so.1.7.1\n[log.c:174] 7fd652906000-7fd652907000 rw-p 00011000 fe:00 1846516                    /usr/lib/liblz4.so.1.7.1\n[log.c:174] 7fd652907000-7fd65292c000 r-xp 00000000 fe:00 1846387                    /usr/lib/liblzma.so.5.2.2\n[log.c:174] 7fd65292c000-7fd652b2b000 ---p 00025000 fe:00 1846387                    /usr/lib/liblzma.so.5.2.2\n[log.c:174] 7fd652b2b000-7fd652b2c000 r--p 00024000 fe:00 1846387                    /usr/lib/liblzma.so.5.2.2\n[log.c:174] 7fd652b2c000-7fd652b2d000 rw-p 00025000 fe:00 1846387                    /usr/lib/liblzma.so.5.2.2\n[log.c:174] 7fd652b2d000-7fd652b54000 r-xp 00000000 fe:00 1911915                    /usr/lib/libexpat.so.1.6.0\n[log.c:174] 7fd652b54000-7fd652d54000 ---p 00027000 fe:00 1911915                    /usr/lib/libexpat.so.1.6.0\n[log.c:174] 7fd652d54000-7fd652d56000 r--p 00027000 fe:00 1911915                    /usr/lib/libexpat.so.1.6.0\n[log.c:174] 7fd652d56000-7fd652d57000 rw-p 00029000 fe:00 1911915                    /usr/lib/libexpat.so.1.6.0\n[log.c:174] 7fd652d57000-7fd652d63000 r-xp 00000000 fe:00 1857923                    /usr/lib/libwayland-client.so.0.3.0\n[log.c:174] 7fd652d63000-7fd652f63000 ---p 0000c000 fe:00 1857923                    /usr/lib/libwayland-client.so.0.3.0\n[log.c:174] 7fd652f63000-7fd652f65000 r--p 0000c000 fe:00 1857923                    /usr/lib/libwayland-client.so.0.3.0\n[log.c:174] 7fd652f65000-7fd652f66000 rw-p 0000e000 fe:00 1857923                    /usr/lib/libwayland-client.so.0.3.0\n[log.c:174] 7fd652f66000-7fd652f67000 r-xp 00000000 fe:00 1861342                    /usr/lib/libxshmfence.so.1.0.0\n[log.c:174] 7fd652f67000-7fd653167000 ---p 00001000 fe:00 1861342                    /usr/lib/libxshmfence.so.1.0.0\n[log.c:174] 7fd653167000-7fd653168000 r--p 00001000 fe:00 1861342                    /usr/lib/libxshmfence.so.1.0.0\n[log.c:174] 7fd653168000-7fd653169000 rw-p 00002000 fe:00 1861342                    /usr/lib/libxshmfence.so.1.0.0\n[log.c:174] 7fd653169000-7fd65316e000 r-xp 00000000 fe:00 1860371                    /usr/lib/libxcb-sync.so.1.0.0\n[log.c:174] 7fd65316e000-7fd65336e000 ---p 00005000 fe:00 1860371                    /usr/lib/libxcb-sync.so.1.0.0\n[log.c:174] 7fd65336e000-7fd65336f000 r--p 00005000 fe:00 1860371                    /usr/lib/libxcb-sync.so.1.0.0\n[log.c:174] 7fd65336f000-7fd653370000 rw-p 00006000 fe:00 1860371                    /usr/lib/libxcb-sync.so.1.0.0\n[log.c:174] 7fd653370000-7fd653373000 r-xp 00000000 fe:00 1860334                    /usr/lib/libxcb-shape.so.0.0.0\n[log.c:174] 7fd653373000-7fd653572000 ---p 00003000 fe:00 1860334                    /usr/lib/libxcb-shape.so.0.0.0\n[log.c:174] 7fd653572000-7fd653573000 r--p 00002000 fe:00 1860334                    /usr/lib/libxcb-shape.so.0.0.0\n[log.c:174] 7fd653573000-7fd653574000 rw-p 00003000 fe:00 1860334                    /usr/lib/libxcb-shape.so.0.0.0\n[log.c:174] 7fd653574000-7fd653581000 r-xp 00000000 fe:00 1860379                    /usr/lib/libxcb-randr.so.0.1.0\n[log.c:174] 7fd653581000-7fd653780000 ---p 0000d000 fe:00 1860379                    /usr/lib/libxcb-randr.so.0.1.0\n[log.c:174] 7fd653780000-7fd653781000 r--p 0000c000 fe:00 1860379                    /usr/lib/libxcb-randr.so.0.1.0\n[log.c:174] 7fd653781000-7fd653782000 rw-p 0000d000 fe:00 1860379                    /usr/lib/libxcb-randr.so.0.1.0\n[log.c:174] 7fd653782000-7fd653784000 r-xp 00000000 fe:00 1860356                    /usr/lib/libxcb-present.so.0.0.0\n[log.c:174] 7fd653784000-7fd653983000 ---p 00002000 fe:00 1860356                    /usr/lib/libxcb-present.so.0.0.0\n[log.c:174] 7fd653983000-7fd653984000 r--p 00001000 fe:00 1860356                    /usr/lib/libxcb-present.so.0.0.0\n[log.c:174] 7fd653984000-7fd653985000 rw-p 00002000 fe:00 1860356                    /usr/lib/libxcb-present.so.0.0.0\n[log.c:174] 7fd653985000-7fd653987000 r-xp 00000000 fe:00 1860322                    /usr/lib/libxcb-dri3.so.0.0.0\n[log.c:174] 7fd653987000-7fd653b86000 ---p 00002000 fe:00 1860322                    /usr/lib/libxcb-dri3.so.0.0.0\n[log.c:174] 7fd653b86000-7fd653b87000 r--p 00001000 fe:00 1860322                    /usr/lib/libxcb-dri3.so.0.0.0\n[log.c:174] 7fd653b87000-7fd653b88000 rw-p 00002000 fe:00 1860322                    /usr/lib/libxcb-dri3.so.0.0.0\n[log.c:174] 7fd653b88000-7fd653b8c000 r-xp 00000000 fe:00 1860353                    /usr/lib/libxcb-dri2.so.0.0.0\n[log.c:174] 7fd653b8c000-7fd653d8b000 ---p 00004000 fe:00 1860353                    /usr/lib/libxcb-dri2.so.0.0.0\n[log.c:174] 7fd653d8b000-7fd653d8c000 r--p 00003000 fe:00 1860353                    /usr/lib/libxcb-dri2.so.0.0.0\n[log.c:174] 7fd653d8c000-7fd653d8d000 rw-p 00004000 fe:00 1860353                    /usr/lib/libxcb-dri2.so.0.0.0\n[log.c:174] 7fd653d8d000-7fd653db6000 r-xp 00000000 fe:00 1861530                    /usr/lib/libglapi.so.0.0.0\n[log.c:174] 7fd653db6000-7fd653fb5000 ---p 00029000 fe:00 1861530                    /usr/lib/libglapi.so.0.0.0\n[log.c:174] 7fd653fb5000-7fd653fb9000 r--p 00028000 fe:00 1861530                    /usr/lib/libglapi.so.0.0.0\n[log.c:174] 7fd653fb9000-7fd653fba000 rw-p 0002c000 fe:00 1861530                    /usr/lib/libglapi.so.0.0.0\n[log.c:174] 7fd653fba000-7fd653fbb000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd653fbb000-7fd653fc0000 r-xp 00000000 fe:00 1861593                    /usr/lib/libxcb-util.so.1.0.0\n[log.c:174] 7fd653fc0000-7fd6541bf000 ---p 00005000 fe:00 1861593                    /usr/lib/libxcb-util.so.1.0.0\n[log.c:174] 7fd6541bf000-7fd6541c0000 r--p 00004000 fe:00 1861593                    /usr/lib/libxcb-util.so.1.0.0\n[log.c:174] 7fd6541c0000-7fd6541c1000 rw-p 00005000 fe:00 1861593                    /usr/lib/libxcb-util.so.1.0.0\n[log.c:174] 7fd6541c1000-7fd6541c6000 r-xp 00000000 fe:00 1858037                    /usr/lib/libXdmcp.so.6.0.0\n[log.c:174] 7fd6541c6000-7fd6543c5000 ---p 00005000 fe:00 1858037                    /usr/lib/libXdmcp.so.6.0.0\n[log.c:174] 7fd6543c5000-7fd6543c6000 r--p 00004000 fe:00 1858037                    /usr/lib/libXdmcp.so.6.0.0\n[log.c:174] 7fd6543c6000-7fd6543c7000 rw-p 00005000 fe:00 1858037                    /usr/lib/libXdmcp.so.6.0.0\n[log.c:174] 7fd6543c7000-7fd6543c9000 r-xp 00000000 fe:00 1858041                    /usr/lib/libXau.so.6.0.0\n[log.c:174] 7fd6543c9000-7fd6545c9000 ---p 00002000 fe:00 1858041                    /usr/lib/libXau.so.6.0.0\n[log.c:174] 7fd6545c9000-7fd6545ca000 r--p 00002000 fe:00 1858041                    /usr/lib/libXau.so.6.0.0\n[log.c:174] 7fd6545ca000-7fd6545cb000 rw-p 00003000 fe:00 1858041                    /usr/lib/libXau.so.6.0.0\n[log.c:174] 7fd6545cb000-7fd6545df000 r-xp 00000000 fe:00 1838314                    /usr/lib/libresolv-2.23.so\n[log.c:174] 7fd6545df000-7fd6547de000 ---p 00014000 fe:00 1838314                    /usr/lib/libresolv-2.23.so\n[log.c:174] 7fd6547de000-7fd6547df000 r--p 00013000 fe:00 1838314                    /usr/lib/libresolv-2.23.so\n[log.c:174] 7fd6547df000-7fd6547e0000 rw-p 00014000 fe:00 1838314                    /usr/lib/libresolv-2.23.so\n[log.c:174] 7fd6547e0000-7fd6547e2000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd6547e2000-7fd6547e6000 r-xp 00000000 fe:00 1841393                    /usr/lib/libcap.so.2.25\n[log.c:174] 7fd6547e6000-7fd6549e5000 ---p 00004000 fe:00 1841393                    /usr/lib/libcap.so.2.25\n[log.c:174] 7fd6549e5000-7fd6549e6000 rw-p 00003000 fe:00 1841393                    /usr/lib/libcap.so.2.25\n[log.c:174] 7fd6549e6000-7fd654b5e000 r-xp 00000000 fe:00 1848371                    /usr/lib/libgio-2.0.so.0.4600.2\n[log.c:174] 7fd654b5e000-7fd654d5d000 ---p 00178000 fe:00 1848371                    /usr/lib/libgio-2.0.so.0.4600.2\n[log.c:174] 7fd654d5d000-7fd654d61000 r--p 00177000 fe:00 1848371                    /usr/lib/libgio-2.0.so.0.4600.2\n[log.c:174] 7fd654d61000-7fd654d63000 rw-p 0017b000 fe:00 1848371                    /usr/lib/libgio-2.0.so.0.4600.2\n[log.c:174] 7fd654d63000-7fd654d65000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd654d65000-7fd654d68000 r-xp 00000000 fe:00 1848368                    /usr/lib/libgmodule-2.0.so.0.4600.2\n[log.c:174] 7fd654d68000-7fd654f67000 ---p 00003000 fe:00 1848368                    /usr/lib/libgmodule-2.0.so.0.4600.2\n[log.c:174] 7fd654f67000-7fd654f68000 r--p 00002000 fe:00 1848368                    /usr/lib/libgmodule-2.0.so.0.4600.2\n[log.c:174] 7fd654f68000-7fd654f69000 rw-p 00003000 fe:00 1848368                    /usr/lib/libgmodule-2.0.so.0.4600.2\n[log.c:174] 7fd654f69000-7fd654ffe000 r-xp 00000000 fe:00 1989114                    /usr/lib/mesa/libGL.so.1.2.0\n[log.c:174] 7fd654ffe000-7fd6551fd000 ---p 00095000 fe:00 1989114                    /usr/lib/mesa/libGL.so.1.2.0\n[log.c:174] 7fd6551fd000-7fd655200000 r--p 00094000 fe:00 1989114                    /usr/lib/mesa/libGL.so.1.2.0\n[log.c:174] 7fd655200000-7fd655201000 rw-p 00097000 fe:00 1989114                    /usr/lib/mesa/libGL.so.1.2.0\n[log.c:174] 7fd655201000-7fd655202000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd655202000-7fd655217000 r-xp 00000000 fe:00 1841435                    /usr/lib/libz.so.1.2.8\n[log.c:174] 7fd655217000-7fd655416000 ---p 00015000 fe:00 1841435                    /usr/lib/libz.so.1.2.8\n[log.c:174] 7fd655416000-7fd655417000 r--p 00014000 fe:00 1841435                    /usr/lib/libz.so.1.2.8\n[log.c:174] 7fd655417000-7fd655418000 rw-p 00015000 fe:00 1841435                    /usr/lib/libz.so.1.2.8\n[log.c:174] 7fd655418000-7fd655429000 r-xp 00000000 fe:00 1861298                    /usr/lib/libXext.so.6.4.0\n[log.c:174] 7fd655429000-7fd655628000 ---p 00011000 fe:00 1861298                    /usr/lib/libXext.so.6.4.0\n[log.c:174] 7fd655628000-7fd655629000 r--p 00010000 fe:00 1861298                    /usr/lib/libXext.so.6.4.0\n[log.c:174] 7fd655629000-7fd65562a000 rw-p 00011000 fe:00 1861298                    /usr/lib/libXext.so.6.4.0\n[log.c:174] 7fd65562a000-7fd655633000 r-xp 00000000 fe:00 1862457                    /usr/lib/libXrender.so.1.3.0\n[log.c:174] 7fd655633000-7fd655832000 ---p 00009000 fe:00 1862457                    /usr/lib/libXrender.so.1.3.0\n[log.c:174] 7fd655832000-7fd655833000 r--p 00008000 fe:00 1862457                    /usr/lib/libXrender.so.1.3.0\n[log.c:174] 7fd655833000-7fd655834000 rw-p 00009000 fe:00 1862457                    /usr/lib/libXrender.so.1.3.0\n[log.c:174] 7fd655834000-7fd65583d000 r-xp 00000000 fe:00 1860315                    /usr/lib/libxcb-render.so.0.0.0\n[log.c:174] 7fd65583d000-7fd655a3c000 ---p 00009000 fe:00 1860315                    /usr/lib/libxcb-render.so.0.0.0\n[log.c:174] 7fd655a3c000-7fd655a3d000 r--p 00008000 fe:00 1860315                    /usr/lib/libxcb-render.so.0.0.0\n[log.c:174] 7fd655a3d000-7fd655a3e000 rw-p 00009000 fe:00 1860315                    /usr/lib/libxcb-render.so.0.0.0\n[log.c:174] 7fd655a3e000-7fd655a40000 r-xp 00000000 fe:00 1860349                    /usr/lib/libxcb-shm.so.0.0.0\n[log.c:174] 7fd655a40000-7fd655c40000 ---p 00002000 fe:00 1860349                    /usr/lib/libxcb-shm.so.0.0.0\n[log.c:174] 7fd655c40000-7fd655c41000 r--p 00002000 fe:00 1860349                    /usr/lib/libxcb-shm.so.0.0.0\n[log.c:174] 7fd655c41000-7fd655c42000 rw-p 00003000 fe:00 1860349                    /usr/lib/libxcb-shm.so.0.0.0\n[log.c:174] 7fd655c42000-7fd655c76000 r-xp 00000000 fe:00 1862444                    /usr/lib/libpng16.so.16.21.0\n[log.c:174] 7fd655c76000-7fd655e75000 ---p 00034000 fe:00 1862444                    /usr/lib/libpng16.so.16.21.0\n[log.c:174] 7fd655e75000-7fd655e76000 r--p 00033000 fe:00 1862444                    /usr/lib/libpng16.so.16.21.0\n[log.c:174] 7fd655e76000-7fd655e77000 rw-p 00034000 fe:00 1862444                    /usr/lib/libpng16.so.16.21.0\n[log.c:174] 7fd655e77000-7fd655f36000 r-xp 00000000 fe:00 1879484                    /usr/lib/libfreetype.so.6.12.2\n[log.c:174] 7fd655f36000-7fd656136000 ---p 000bf000 fe:00 1879484                    /usr/lib/libfreetype.so.6.12.2\n[log.c:174] 7fd656136000-7fd65613e000 r--p 000bf000 fe:00 1879484                    /usr/lib/libfreetype.so.6.12.2\n[log.c:174] 7fd65613e000-7fd65613f000 rw-p 000c7000 fe:00 1879484                    /usr/lib/libfreetype.so.6.12.2\n[log.c:174] 7fd65613f000-7fd65617d000 r-xp 00000000 fe:00 1862486                    /usr/lib/libfontconfig.so.1.9.0\n[log.c:174] 7fd65617d000-7fd65637c000 ---p 0003e000 fe:00 1862486                    /usr/lib/libfontconfig.so.1.9.0\n[log.c:174] 7fd65637c000-7fd65637e000 r--p 0003d000 fe:00 1862486                    /usr/lib/libfontconfig.so.1.9.0\n[log.c:174] 7fd65637e000-7fd656383000 rw-p 0003f000 fe:00 1862486                    /usr/lib/libfontconfig.so.1.9.0\n[log.c:174] 7fd656383000-7fd6563e2000 r-xp 00000000 fe:00 1872592                    /usr/lib/libharfbuzz.so.0.10200.3\n[log.c:174] 7fd6563e2000-7fd6565e2000 ---p 0005f000 fe:00 1872592                    /usr/lib/libharfbuzz.so.0.10200.3\n[log.c:174] 7fd6565e2000-7fd6565e3000 r--p 0005f000 fe:00 1872592                    /usr/lib/libharfbuzz.so.0.10200.3\n[log.c:174] 7fd6565e3000-7fd6565e4000 rw-p 00060000 fe:00 1872592                    /usr/lib/libharfbuzz.so.0.10200.3\n[log.c:174] 7fd6565e4000-7fd6565e5000 r-xp 00000000 fe:00 1848369                    /usr/lib/libgthread-2.0.so.0.4600.2\n[log.c:174] 7fd6565e5000-7fd6567e4000 ---p 00001000 fe:00 1848369                    /usr/lib/libgthread-2.0.so.0.4600.2\n[log.c:174] 7fd6567e4000-7fd6567e5000 r--p 00000000 fe:00 1848369                    /usr/lib/libgthread-2.0.so.0.4600.2\n[log.c:174] 7fd6567e5000-7fd6567e6000 rw-p 00001000 fe:00 1848369                    /usr/lib/libgthread-2.0.so.0.4600.2\n[log.c:174] 7fd6567e6000-7fd6567ee000 r-xp 00000000 fe:00 1862418                    /usr/lib/libthai.so.0.2.4\n[log.c:174] 7fd6567ee000-7fd6569ed000 ---p 00008000 fe:00 1862418                    /usr/lib/libthai.so.0.2.4\n[log.c:174] 7fd6569ed000-7fd6569ee000 r--p 00007000 fe:00 1862418                    /usr/lib/libthai.so.0.2.4\n[log.c:174] 7fd6569ee000-7fd6569ef000 rw-p 00008000 fe:00 1862418                    /usr/lib/libthai.so.0.2.4\n[log.c:174] 7fd6569ef000-7fd656a04000 r-xp 00000000 fe:00 1862766                    /usr/lib/libpangoft2-1.0.so.0.3900.0\n[log.c:174] 7fd656a04000-7fd656c03000 ---p 00015000 fe:00 1862766                    /usr/lib/libpangoft2-1.0.so.0.3900.0\n[log.c:174] 7fd656c03000-7fd656c04000 r--p 00014000 fe:00 1862766                    /usr/lib/libpangoft2-1.0.so.0.3900.0\n[log.c:174] 7fd656c04000-7fd656c05000 rw-p 00015000 fe:00 1862766                    /usr/lib/libpangoft2-1.0.so.0.3900.0\n[log.c:174] 7fd656c05000-7fd656c0e000 r-xp 00000000 fe:00 1882666                    /usr/lib/libwacom.so.2.4.5\n[log.c:174] 7fd656c0e000-7fd656e0d000 ---p 00009000 fe:00 1882666                    /usr/lib/libwacom.so.2.4.5\n[log.c:174] 7fd656e0d000-7fd656e0e000 r--p 00008000 fe:00 1882666                    /usr/lib/libwacom.so.2.4.5\n[log.c:174] 7fd656e0e000-7fd656e0f000 rw-p 00009000 fe:00 1882666                    /usr/lib/libwacom.so.2.4.5\n[log.c:174] 7fd656e0f000-7fd656e23000 r-xp 00000000 fe:00 1878987                    /usr/lib/libevdev.so.2.1.12\n[log.c:174] 7fd656e23000-7fd657022000 ---p 00014000 fe:00 1878987                    /usr/lib/libevdev.so.2.1.12\n[log.c:174] 7fd657022000-7fd657028000 r--p 00013000 fe:00 1878987                    /usr/lib/libevdev.so.2.1.12\n[log.c:174] 7fd657028000-7fd657029000 rw-p 00019000 fe:00 1878987                    /usr/lib/libevdev.so.2.1.12\n[log.c:174] 7fd657029000-7fd65702e000 r-xp 00000000 fe:00 1867087                    /usr/lib/libmtdev.so.1.0.0\n[log.c:174] 7fd65702e000-7fd65722d000 ---p 00005000 fe:00 1867087                    /usr/lib/libmtdev.so.1.0.0\n[log.c:174] 7fd65722d000-7fd65722e000 r--p 00004000 fe:00 1867087                    /usr/lib/libmtdev.so.1.0.0\n[log.c:174] 7fd65722e000-7fd65722f000 rw-p 00005000 fe:00 1867087                    /usr/lib/libmtdev.so.1.0.0\n[log.c:174] 7fd65722f000-7fd657236000 r-xp 00000000 fe:00 1838315                    /usr/lib/librt-2.23.so\n[log.c:174] 7fd657236000-7fd657435000 ---p 00007000 fe:00 1838315                    /usr/lib/librt-2.23.so\n[log.c:174] 7fd657435000-7fd657436000 r--p 00006000 fe:00 1838315                    /usr/lib/librt-2.23.so\n[log.c:174] 7fd657436000-7fd657437000 rw-p 00007000 fe:00 1838315                    /usr/lib/librt-2.23.so\n[log.c:174] 7fd657437000-7fd65743f000 r-xp 00000000 fe:00 1848294                    /usr/lib/libffi.so.6.0.4\n[log.c:174] 7fd65743f000-7fd65763e000 ---p 00008000 fe:00 1848294                    /usr/lib/libffi.so.6.0.4\n[log.c:174] 7fd65763e000-7fd65763f000 r--p 00007000 fe:00 1848294                    /usr/lib/libffi.so.6.0.4\n[log.c:174] 7fd65763f000-7fd657640000 rw-p 00008000 fe:00 1848294                    /usr/lib/libffi.so.6.0.4\n[log.c:174] 7fd657640000-7fd657658000 r-xp 00000000 fe:00 1838201                    /usr/lib/libpthread-2.23.so\n[log.c:174] 7fd657658000-7fd657857000 ---p 00018000 fe:00 1838201                    /usr/lib/libpthread-2.23.so\n[log.c:174] 7fd657857000-7fd657858000 r--p 00017000 fe:00 1838201                    /usr/lib/libpthread-2.23.so\n[log.c:174] 7fd657858000-7fd657859000 rw-p 00018000 fe:00 1838201                    /usr/lib/libpthread-2.23.so\n[log.c:174] 7fd657859000-7fd65785d000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65785d000-7fd6578ab000 r-xp 00000000 fe:00 1889806                    /usr/lib/libdbus-1.so.3.14.6\n[log.c:174] 7fd6578ab000-7fd657aab000 ---p 0004e000 fe:00 1889806                    /usr/lib/libdbus-1.so.3.14.6\n[log.c:174] 7fd657aab000-7fd657aac000 r--p 0004e000 fe:00 1889806                    /usr/lib/libdbus-1.so.3.14.6\n[log.c:174] 7fd657aac000-7fd657aad000 rw-p 0004f000 fe:00 1889806                    /usr/lib/libdbus-1.so.3.14.6\n[log.c:174] 7fd657aad000-7fd657aae000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd657aae000-7fd657ab0000 r-xp 00000000 fe:00 1838311                    /usr/lib/libdl-2.23.so\n[log.c:174] 7fd657ab0000-7fd657cb0000 ---p 00002000 fe:00 1838311                    /usr/lib/libdl-2.23.so\n[log.c:174] 7fd657cb0000-7fd657cb1000 r--p 00002000 fe:00 1838311                    /usr/lib/libdl-2.23.so\n[log.c:174] 7fd657cb1000-7fd657cb2000 rw-p 00003000 fe:00 1838311                    /usr/lib/libdl-2.23.so\n[log.c:174] 7fd657cb2000-7fd657cbe000 r-xp 00000000 fe:00 1861529                    /usr/lib/libgbm.so.1.0.0\n[log.c:174] 7fd657cbe000-7fd657ebe000 ---p 0000c000 fe:00 1861529                    /usr/lib/libgbm.so.1.0.0\n[log.c:174] 7fd657ebe000-7fd657ebf000 r--p 0000c000 fe:00 1861529                    /usr/lib/libgbm.so.1.0.0\n[log.c:174] 7fd657ebf000-7fd657ec0000 rw-p 0000d000 fe:00 1861529                    /usr/lib/libgbm.so.1.0.0\n[log.c:174] 7fd657ec0000-7fd657ece000 r-xp 00000000 fe:00 1892348                    /usr/lib/libdrm.so.2.4.0\n[log.c:174] 7fd657ece000-7fd6580cd000 ---p 0000e000 fe:00 1892348                    /usr/lib/libdrm.so.2.4.0\n[log.c:174] 7fd6580cd000-7fd6580ce000 r--p 0000d000 fe:00 1892348                    /usr/lib/libdrm.so.2.4.0\n[log.c:174] 7fd6580ce000-7fd6580cf000 rw-p 0000e000 fe:00 1892348                    /usr/lib/libdrm.so.2.4.0\n[log.c:174] 7fd6580cf000-7fd6580fa000 r-xp 00000000 fe:00 1989115                    /usr/lib/mesa/libEGL.so.1.0.0\n[log.c:174] 7fd6580fa000-7fd6582fa000 ---p 0002b000 fe:00 1989115                    /usr/lib/mesa/libEGL.so.1.0.0\n[log.c:174] 7fd6582fa000-7fd6582fb000 r--p 0002b000 fe:00 1989115                    /usr/lib/mesa/libEGL.so.1.0.0\n[log.c:174] 7fd6582fb000-7fd6582fc000 rw-p 0002c000 fe:00 1989115                    /usr/lib/mesa/libEGL.so.1.0.0\n[log.c:174] 7fd6582fc000-7fd658303000 r-xp 00000000 fe:00 1989117                    /usr/lib/mesa/libGLESv2.so.2.0.0\n[log.c:174] 7fd658303000-7fd658502000 ---p 00007000 fe:00 1989117                    /usr/lib/mesa/libGLESv2.so.2.0.0\n[log.c:174] 7fd658502000-7fd658503000 r--p 00006000 fe:00 1989117                    /usr/lib/mesa/libGLESv2.so.2.0.0\n[log.c:174] 7fd658503000-7fd658504000 rw-p 00007000 fe:00 1989117                    /usr/lib/mesa/libGLESv2.so.2.0.0\n[log.c:174] 7fd658504000-7fd65850a000 r-xp 00000000 fe:00 1860311                    /usr/lib/libxcb-xfixes.so.0.0.0\n[log.c:174] 7fd65850a000-7fd65870a000 ---p 00006000 fe:00 1860311                    /usr/lib/libxcb-xfixes.so.0.0.0\n[log.c:174] 7fd65870a000-7fd65870b000 r--p 00006000 fe:00 1860311                    /usr/lib/libxcb-xfixes.so.0.0.0\n[log.c:174] 7fd65870b000-7fd65870c000 rw-p 00007000 fe:00 1860311                    /usr/lib/libxcb-xfixes.so.0.0.0\n[log.c:174] 7fd65870c000-7fd658710000 r-xp 00000000 fe:00 1862363                    /usr/lib/libxcb-image.so.0.0.0\n[log.c:174] 7fd658710000-7fd65890f000 ---p 00004000 fe:00 1862363                    /usr/lib/libxcb-image.so.0.0.0\n[log.c:174] 7fd65890f000-7fd658910000 r--p 00003000 fe:00 1862363                    /usr/lib/libxcb-image.so.0.0.0\n[log.c:174] 7fd658910000-7fd658911000 rw-p 00004000 fe:00 1862363                    /usr/lib/libxcb-image.so.0.0.0\n[log.c:174] 7fd658911000-7fd65892c000 r-xp 00000000 fe:00 1860391                    /usr/lib/libxcb-xkb.so.1.0.0\n[log.c:174] 7fd65892c000-7fd658b2b000 ---p 0001b000 fe:00 1860391                    /usr/lib/libxcb-xkb.so.1.0.0\n[log.c:174] 7fd658b2b000-7fd658b2c000 r--p 0001a000 fe:00 1860391                    /usr/lib/libxcb-xkb.so.1.0.0\n[log.c:174] 7fd658b2c000-7fd658b2d000 rw-p 0001b000 fe:00 1860391                    /usr/lib/libxcb-xkb.so.1.0.0\n[log.c:174] 7fd658b2d000-7fd658b2f000 r-xp 00000000 fe:00 1860361                    /usr/lib/libxcb-composite.so.0.0.0\n[log.c:174] 7fd658b2f000-7fd658d2f000 ---p 00002000 fe:00 1860361                    /usr/lib/libxcb-composite.so.0.0.0\n[log.c:174] 7fd658d2f000-7fd658d30000 r--p 00002000 fe:00 1860361                    /usr/lib/libxcb-composite.so.0.0.0\n[log.c:174] 7fd658d30000-7fd658d31000 rw-p 00003000 fe:00 1860361                    /usr/lib/libxcb-composite.so.0.0.0\n[log.c:174] 7fd658d31000-7fd658d52000 r-xp 00000000 fe:00 1860337                    /usr/lib/libxcb.so.1.1.0\n[log.c:174] 7fd658d52000-7fd658f52000 ---p 00021000 fe:00 1860337                    /usr/lib/libxcb.so.1.1.0\n[log.c:174] 7fd658f52000-7fd658f53000 r--p 00021000 fe:00 1860337                    /usr/lib/libxcb.so.1.1.0\n[log.c:174] 7fd658f53000-7fd658f54000 rw-p 00022000 fe:00 1860337                    /usr/lib/libxcb.so.1.1.0\n[log.c:174] 7fd658f54000-7fd658f55000 r-xp 00000000 fe:00 1860413                    /usr/lib/libX11-xcb.so.1.0.0\n[log.c:174] 7fd658f55000-7fd659154000 ---p 00001000 fe:00 1860413                    /usr/lib/libX11-xcb.so.1.0.0\n[log.c:174] 7fd659154000-7fd659155000 r--p 00000000 fe:00 1860413                    /usr/lib/libX11-xcb.so.1.0.0\n[log.c:174] 7fd659155000-7fd659156000 rw-p 00001000 fe:00 1860413                    /usr/lib/libX11-xcb.so.1.0.0\n[log.c:174] 7fd659156000-7fd659291000 r-xp 00000000 fe:00 1860412                    /usr/lib/libX11.so.6.3.0\n[log.c:174] 7fd659291000-7fd659490000 ---p 0013b000 fe:00 1860412                    /usr/lib/libX11.so.6.3.0\n[log.c:174] 7fd659490000-7fd659492000 r--p 0013a000 fe:00 1860412                    /usr/lib/libX11.so.6.3.0\n[log.c:174] 7fd659492000-7fd659497000 rw-p 0013c000 fe:00 1860412                    /usr/lib/libX11.so.6.3.0\n[log.c:174] 7fd659497000-7fd659498000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd659498000-7fd659537000 r-xp 00000000 fe:00 1861592                    /usr/lib/libpixman-1.so.0.34.0\n[log.c:174] 7fd659537000-7fd659737000 ---p 0009f000 fe:00 1861592                    /usr/lib/libpixman-1.so.0.34.0\n[log.c:174] 7fd659737000-7fd65973f000 r--p 0009f000 fe:00 1861592                    /usr/lib/libpixman-1.so.0.34.0\n[log.c:174] 7fd65973f000-7fd659740000 rw-p 000a7000 fe:00 1861592                    /usr/lib/libpixman-1.so.0.34.0\n[log.c:174] 7fd659740000-7fd6598d8000 r-xp 00000000 fe:00 1838236                    /usr/lib/libc-2.23.so\n[log.c:174] 7fd6598d8000-7fd659ad7000 ---p 00198000 fe:00 1838236                    /usr/lib/libc-2.23.so\n[log.c:174] 7fd659ad7000-7fd659adb000 r--p 00197000 fe:00 1838236                    /usr/lib/libc-2.23.so\n[log.c:174] 7fd659adb000-7fd659add000 rw-p 0019b000 fe:00 1838236                    /usr/lib/libc-2.23.so\n[log.c:174] 7fd659add000-7fd659ae1000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd659ae1000-7fd659b05000 r-xp 00000000 fe:00 1863535                    /usr/lib/libgdk_pixbuf-2.0.so.0.3200.3\n[log.c:174] 7fd659b05000-7fd659d05000 ---p 00024000 fe:00 1863535                    /usr/lib/libgdk_pixbuf-2.0.so.0.3200.3\n[log.c:174] 7fd659d05000-7fd659d06000 r--p 00024000 fe:00 1863535                    /usr/lib/libgdk_pixbuf-2.0.so.0.3200.3\n[log.c:174] 7fd659d06000-7fd659d07000 rw-p 00025000 fe:00 1863535                    /usr/lib/libgdk_pixbuf-2.0.so.0.3200.3\n[log.c:174] 7fd659d07000-7fd659e0a000 r-xp 00000000 fe:00 1838312                    /usr/lib/libm-2.23.so\n[log.c:174] 7fd659e0a000-7fd65a00a000 ---p 00103000 fe:00 1838312                    /usr/lib/libm-2.23.so\n[log.c:174] 7fd65a00a000-7fd65a00b000 r--p 00103000 fe:00 1838312                    /usr/lib/libm-2.23.so\n[log.c:174] 7fd65a00b000-7fd65a00c000 rw-p 00104000 fe:00 1838312                    /usr/lib/libm-2.23.so\n[log.c:174] 7fd65a00c000-7fd65a135000 r-xp 00000000 fe:00 1862721                    /usr/lib/libcairo.so.2.11400.4\n[log.c:174] 7fd65a135000-7fd65a335000 ---p 00129000 fe:00 1862721                    /usr/lib/libcairo.so.2.11400.4\n[log.c:174] 7fd65a335000-7fd65a338000 r--p 00129000 fe:00 1862721                    /usr/lib/libcairo.so.2.11400.4\n[log.c:174] 7fd65a338000-7fd65a33a000 rw-p 0012c000 fe:00 1862721                    /usr/lib/libcairo.so.2.11400.4\n[log.c:174] 7fd65a33a000-7fd65a33b000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65a33b000-7fd65a447000 r-xp 00000000 fe:00 1848367                    /usr/lib/libglib-2.0.so.0.4600.2\n[log.c:174] 7fd65a447000-7fd65a646000 ---p 0010c000 fe:00 1848367                    /usr/lib/libglib-2.0.so.0.4600.2\n[log.c:174] 7fd65a646000-7fd65a647000 r--p 0010b000 fe:00 1848367                    /usr/lib/libglib-2.0.so.0.4600.2\n[log.c:174] 7fd65a647000-7fd65a648000 rw-p 0010c000 fe:00 1848367                    /usr/lib/libglib-2.0.so.0.4600.2\n[log.c:174] 7fd65a648000-7fd65a649000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65a649000-7fd65a69a000 r-xp 00000000 fe:00 1848370                    /usr/lib/libgobject-2.0.so.0.4600.2\n[log.c:174] 7fd65a69a000-7fd65a899000 ---p 00051000 fe:00 1848370                    /usr/lib/libgobject-2.0.so.0.4600.2\n[log.c:174] 7fd65a899000-7fd65a89a000 r--p 00050000 fe:00 1848370                    /usr/lib/libgobject-2.0.so.0.4600.2\n[log.c:174] 7fd65a89a000-7fd65a89b000 rw-p 00051000 fe:00 1848370                    /usr/lib/libgobject-2.0.so.0.4600.2\n[log.c:174] 7fd65a89b000-7fd65a8e4000 r-xp 00000000 fe:00 1862761                    /usr/lib/libpango-1.0.so.0.3900.0\n[log.c:174] 7fd65a8e4000-7fd65aae4000 ---p 00049000 fe:00 1862761                    /usr/lib/libpango-1.0.so.0.3900.0\n[log.c:174] 7fd65aae4000-7fd65aae6000 r--p 00049000 fe:00 1862761                    /usr/lib/libpango-1.0.so.0.3900.0\n[log.c:174] 7fd65aae6000-7fd65aae7000 rw-p 0004b000 fe:00 1862761                    /usr/lib/libpango-1.0.so.0.3900.0\n[log.c:174] 7fd65aae7000-7fd65aaf3000 r-xp 00000000 fe:00 1862768                    /usr/lib/libpangocairo-1.0.so.0.3900.0\n[log.c:174] 7fd65aaf3000-7fd65acf2000 ---p 0000c000 fe:00 1862768                    /usr/lib/libpangocairo-1.0.so.0.3900.0\n[log.c:174] 7fd65acf2000-7fd65acf3000 r--p 0000b000 fe:00 1862768                    /usr/lib/libpangocairo-1.0.so.0.3900.0\n[log.c:174] 7fd65acf3000-7fd65acf4000 rw-p 0000c000 fe:00 1862768                    /usr/lib/libpangocairo-1.0.so.0.3900.0\n[log.c:174] 7fd65acf4000-7fd65ad1d000 r-xp 00000000 fe:00 1853370                    /usr/lib/libinput.so.10.7.4\n[log.c:174] 7fd65ad1d000-7fd65af1c000 ---p 00029000 fe:00 1853370                    /usr/lib/libinput.so.10.7.4\n[log.c:174] 7fd65af1c000-7fd65af1d000 r--p 00028000 fe:00 1853370                    /usr/lib/libinput.so.10.7.4\n[log.c:174] 7fd65af1d000-7fd65af1e000 rw-p 00029000 fe:00 1853370                    /usr/lib/libinput.so.10.7.4\n[log.c:174] 7fd65af1e000-7fd65af2e000 r-xp 00000000 fe:00 1857922                    /usr/lib/libwayland-server.so.0.1.0\n[log.c:174] 7fd65af2e000-7fd65b12d000 ---p 00010000 fe:00 1857922                    /usr/lib/libwayland-server.so.0.1.0\n[log.c:174] 7fd65b12d000-7fd65b12f000 r--p 0000f000 fe:00 1857922                    /usr/lib/libwayland-server.so.0.1.0\n[log.c:174] 7fd65b12f000-7fd65b130000 rw-p 00011000 fe:00 1857922                    /usr/lib/libwayland-server.so.0.1.0\n[log.c:174] 7fd65b130000-7fd65b13a000 r-xp 00000000 fe:00 1864884                    /usr/lib/libjson-c.so.2.0.1\n[log.c:174] 7fd65b13a000-7fd65b339000 ---p 0000a000 fe:00 1864884                    /usr/lib/libjson-c.so.2.0.1\n[log.c:174] 7fd65b339000-7fd65b33a000 r--p 00009000 fe:00 1864884                    /usr/lib/libjson-c.so.2.0.1\n[log.c:174] 7fd65b33a000-7fd65b33b000 rw-p 0000a000 fe:00 1864884                    /usr/lib/libjson-c.so.2.0.1\n[log.c:174] 7fd65b33b000-7fd65b3aa000 r-xp 00000000 fe:00 1846593                    /usr/lib/libpcre.so.1.2.6\n[log.c:174] 7fd65b3aa000-7fd65b5a9000 ---p 0006f000 fe:00 1846593                    /usr/lib/libpcre.so.1.2.6\n[log.c:174] 7fd65b5a9000-7fd65b5aa000 r--p 0006e000 fe:00 1846593                    /usr/lib/libpcre.so.1.2.6\n[log.c:174] 7fd65b5aa000-7fd65b5ab000 rw-p 0006f000 fe:00 1846593                    /usr/lib/libpcre.so.1.2.6\n[log.c:174] 7fd65b5ab000-7fd65b5e8000 r-xp 00000000 fe:00 1862812                    /usr/lib/libxkbcommon.so.0.0.0\n[log.c:174] 7fd65b5e8000-7fd65b7e8000 ---p 0003d000 fe:00 1862812                    /usr/lib/libxkbcommon.so.0.0.0\n[log.c:174] 7fd65b7e8000-7fd65b7ea000 r--p 0003d000 fe:00 1862812                    /usr/lib/libxkbcommon.so.0.0.0\n[log.c:174] 7fd65b7ea000-7fd65b7eb000 rw-p 0003f000 fe:00 1862812                    /usr/lib/libxkbcommon.so.0.0.0\n[log.c:174] 7fd65b7eb000-7fd65b827000 r-xp 00000000 fe:00 1845386                    /usr/lib/libwlc.so.0.0.1\n[log.c:174] 7fd65b827000-7fd65ba27000 ---p 0003c000 fe:00 1845386                    /usr/lib/libwlc.so.0.0.1\n[log.c:174] 7fd65ba27000-7fd65ba29000 r--p 0003c000 fe:00 1845386                    /usr/lib/libwlc.so.0.0.1\n[log.c:174] 7fd65ba29000-7fd65ba2a000 rw-p 0003e000 fe:00 1845386                    /usr/lib/libwlc.so.0.0.1\n[log.c:174] 7fd65ba2a000-7fd65ba2b000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65ba2b000-7fd65ba4e000 r-xp 00000000 fe:00 1838232                    /usr/lib/ld-2.23.so\n[log.c:174] 7fd65ba4e000-7fd65ba4f000 rw-s 00000000 00:05 299598                     /drm mm object (deleted)\n[log.c:174] 7fd65ba4f000-7fd65ba50000 rw-s 100001000 00:06 13742                     /dev/dri/card0\n[log.c:174] 7fd65ba50000-7fd65ba51000 rw-s 00000000 00:05 299587                     /drm mm object (deleted)\n[log.c:174] 7fd65ba51000-7fd65ba52000 rw-s 00000000 00:05 299585                     /drm mm object (deleted)\n[log.c:174] 7fd65ba52000-7fd65ba53000 rw-s 00000000 00:05 299577                     /drm mm object (deleted)\n[log.c:174] 7fd65ba53000-7fd65ba54000 rw-s 100000000 00:06 13742                     /dev/dri/card0\n[log.c:174] 7fd65ba54000-7fd65ba5c000 rw-s 00000000 00:05 299575                     /drm mm object (deleted)\n[log.c:174] 7fd65ba5c000-7fd65baa9000 r--p 00000000 fe:00 528662                     /usr/share/fonts/ttf-liberation-ib/LiberationMono-Regular.ttf\n[log.c:174] 7fd65baa9000-7fd65baae000 r--s 00000000 fe:00 143276                     /var/cache/fontconfig/6d78b720ace5d3bb3fea22ee600d50bf-le64.cache-7\n[log.c:174] 7fd65baae000-7fd65bab4000 r--s 00000000 fe:00 143275                     /var/cache/fontconfig/558cfb7b00557d1eaf02482719df5bbf-le64.cache-7\n[log.c:174] 7fd65bab4000-7fd65bad2000 r--s 00000000 fe:00 143274                     /var/cache/fontconfig/2aeaefbbe8fee9acf2c287bc92ac119e-le64.cache-7\n[log.c:174] 7fd65bad2000-7fd65bad7000 r--s 00000000 fe:00 143273                     /var/cache/fontconfig/b987be13d9555b03a6cd440467233128-le64.cache-7\n[log.c:174] 7fd65bad7000-7fd65bade000 r--s 00000000 fe:00 143272                     /var/cache/fontconfig/05c6939ffcab4ece42a69ecb7571bcfc-le64.cache-7\n[log.c:174] 7fd65bade000-7fd65bae2000 r--s 00000000 fe:00 143271                     /var/cache/fontconfig/15307eb168539589f690be8d29ed1550-le64.cache-7\n[log.c:174] 7fd65bae2000-7fd65baed000 r--s 00000000 fe:00 143270                     /var/cache/fontconfig/81afcec12fadd71c4e03e0a437247ada-le64.cache-7\n[log.c:174] 7fd65baed000-7fd65baf7000 r--s 00000000 fe:00 143269                     /var/cache/fontconfig/eec1da544b6dea79174198a09a665442-le64.cache-7\n[log.c:174] 7fd65baf7000-7fd65baf8000 r--s 00000000 fe:00 143268                     /var/cache/fontconfig/dc14ea377282698501b78c9ee88ac8f5-le64.cache-7\n[log.c:174] 7fd65baf8000-7fd65bb18000 r--s 00000000 fe:00 143282                     /var/cache/fontconfig/8d4af663993b81a124ee82e610bb31f9-le64.cache-7\n[log.c:174] 7fd65bb18000-7fd65bb45000 r--s 00000000 fe:00 143248                     /var/cache/fontconfig/f6b893a7224233d96cb72fd88691c0b4-le64.cache-7\n[log.c:174] 7fd65bb45000-7fd65bb5e000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65bb5e000-7fd65bbdf000 r-xp 00000000 fe:00 1846522                    /usr/lib/libsystemd.so.0.14.0\n[log.c:174] 7fd65bbdf000-7fd65bbe2000 r--p 00080000 fe:00 1846522                    /usr/lib/libsystemd.so.0.14.0\n[log.c:174] 7fd65bbe2000-7fd65bbe3000 rw-p 00083000 fe:00 1846522                    /usr/lib/libsystemd.so.0.14.0\n[log.c:174] 7fd65bbe3000-7fd65bbe8000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65bbe8000-7fd65bc06000 r-xp 00000000 fe:00 1846523                    /usr/lib/libudev.so.1.6.4\n[log.c:174] 7fd65bc06000-7fd65bc07000 r--p 0001d000 fe:00 1846523                    /usr/lib/libudev.so.1.6.4\n[log.c:174] 7fd65bc07000-7fd65bc08000 rw-p 0001e000 fe:00 1846523                    /usr/lib/libudev.so.1.6.4\n[log.c:174] 7fd65bc08000-7fd65bc0e000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65bc0e000-7fd65bc11000 r--s 00000000 fe:00 143267                     /var/cache/fontconfig/d4119bf364b3cb6badea4cd5ba92dc93-le64.cache-7\n[log.c:174] 7fd65bc11000-7fd65bc1a000 r--s 00000000 fe:00 135961                     /var/cache/fontconfig/f349e9996a5320f6dd491cedd2b1f964-le64.cache-7\n[log.c:174] 7fd65bc1a000-7fd65bc42000 rw-p 00000000 00:00 0 \n[log.c:174] 7fd65bc42000-7fd65bc4e000 rw-s 00000000 00:2c 274394                     /run/user/1000/wlc-shared-UyYh3N (deleted)\n[log.c:174] 7fd65bc4e000-7fd65bc4f000 r--p 00023000 fe:00 1838232                    /usr/lib/ld-2.23.so\n[log.c:174] 7fd65bc4f000-7fd65bc50000 rw-p 00024000 fe:00 1838232                    /usr/lib/ld-2.23.so\n[log.c:174] 7fd65bc50000-7fd65bc51000 rw-p 00000000 00:00 0 \n[log.c:174] 7ffd5dc08000-7ffd5dc29000 rw-p 00000000 00:00 0                          [stack]\n[log.c:174] 7ffd5dc8c000-7ffd5dc8e000 r--p 00000000 00:00 0                          [vvar]\n[log.c:174] 7ffd5dc8e000-7ffd5dc90000 r-xp 00000000 00:00 0                          [vdso]\n[log.c:174] ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]\n[log.c:174]\n. > The border should be light grey with white font by default. But I forgot to test on multiple outputs (should work with multiple containers on one output). I'll fix this.\nIt appears to work for me with multiple containers on one output.\n. Woohoo!\n. I'm not entirely open to that idea right now, but if you make a seperate issue maybe it'll happen in the future.\n. Please rebase against master.\n. Hmm, on second thought, after more research, I'd rather not use htole32. It's nonstandard and not portable. Can we just fix the big endian path for the original strategy?\n. Yes, that would be acceptable.\n. I have some thoughts on the implementation. I'm concerned about the performance of walking up the tree to find a stacked/tabbed parents somewhere. I'm also not a fan of the approach to not drawing children's borders, and how stacked/tabbed is an explicit special case in many places. I would prefer an implementation that, perhaps, would instead allow containers to have borders and code it to stop rendering borders when recursively laying out going into a stacked/tabbed container.\n. Hmm, those are fair points. I agree. Will test this over the course of the day today and merge this afternoon.\n. Here we go :tada: \n. Works for me, too. Post sway debug log.\n. And config file\n. The log is printed to stderr. See the FAQ for how to save logs correctly.\n. [config.c:720] Invoking swaybar for bar id 'bar-0'\n[layout.c:58] Adding 0x22aeba0 (1, 1024.000000x600.000000) to 0x634440 (0, 0.000000x0.000000)\n(snip)\n[main.c:43] [wlc] Added output (1)\n[main.c:43] [wlc] become active\n[main.c:49] Using output 0 of 1\nERROR: Unable to connect to \n(snip)\n[handlers.c:727] Compositor is ready, executing cmds in queue\nI'm guessing the ERROR there is swaybar output. Maybe this would be fixed if we didn't invoke swaybar until after the compositor is ready?\n. Do you get a wallpaper, @nicman23?\n. LGTM. Will let @mikkeloscar merge though\n. Just confirmed: works correctly for wayland windows. Incorrectly for x windows.\n. Thanks @Cloudef!\n. I can reproduce this.\n. I believe this is fixed on the latest wlc+sway.\n. I want to get a couple more people to confirm.\n. Fuck this issue\n. It was the latter. That was fixed by wlc today.\n. Thanks!\n. I've noticed this with Firefox as well, notably the Tor browser bundle. Paging @Cloudef\n. Guys, if anyone wants to see this issue resolved you're gonna have to dig in and figure it out. A dozen people saying they can reproduce it isn't half as helpful as one person figuring the damn problem out.\n. Can someone clarify which (one or both) of wlc and sway can be built from source to \"fix\" the issue?. Bisect won't help. It's a difference with how it's built, not a bug introduced in a specific commit. Next step: can someone turn wlc logging up to 11 and show a comparison of two sway logs with and without the bug?. This is a 45-comment-strong issue about something else. Open a new one.. Two new ones.. This has been fixed in the wlroots branch. :tada: . LGTM\n. Regarding a colors block, see #547 \n. LGTM. Will merge on passing build.\n. Good call. I like this approach.\n. Well, who knows. I don't see any reason not to support the edge case.\n. Nope. VirtualBox doesn't support KMS and therefore sway won't work on it.\n. Suggestion: qemu\n. That's nice, but you really should be using qemu. VirtualBox is pretty bad.. Probably. Use qemu.. Thanks!\n. This is a WLC problem. Please report it there.\n. I don't see you making any attempts to switch workspaces here. Try running this and see if it changes the workspace for you:\nswaymsg workspace test\n. Can you share your config file? What kind of keyboard are you using?\n. Run xev and let us know what key name is reported when you press 1 on your keyboard.\n. Try binding to \"mod+ampersand\", or using bindcode 10 instead of bindsym.\n. Thanks for updating the wiki page.\n\nAssuming that libinput10 will work for the moment.\n\nWouldn't hold your breath.\n. Thanks!\n. Implemented in 2a0836e\n. Sure, but this is a recap of all development, including stuff not directly related to #2. I also don't bump the thread on #2 for changes, I usually just tick the checkbox.\n. It would be nice if you could just specify a whitelist of keys that should get through. Or maybe bindsym --locked?\n. You could have both. Write up your own locked mode, then make your \"lock screen\" keybinding switch to that mode before invoking swaylock. And in that mode section add a bunch of keybindings with --locked.\n. > Do normal keybindings work while locked? That would seem to be a security issue so I presume that only the bindings with --locked would be effective. Is that correct?\nYes.\n\nHow would you ensure that it left the locked mode upon unlocking or would you just have to manually escape every time you unlocked your computer? \n\nJust write a script like this:\nswaymsg mode locked\nswaylock\nswaymsg mode default\nInvoke this script instead of swaylock.\n. > Wouldn't a locked mode as opposed to a locked modifier be easier to implement?\nNo.\n. It doesn't open a terminal, unless of course you've bound a key with --locked that opens your terminal.\n. Hasn't been prioritized. Send a patch if you think it's important.. Config file?\n. That's agreeable to me.\n. FAQ\n. Yes, this is a wayland specific problem.\n. >Investigate! Ask for help on IRC! Send a patch!. Thanks!\n. Can you call the option \"pango_markup\"?\n. Ping @Cloudef\n. > This could be that the window type property is assigned to the window after being mapped.\nThat would suuuuuuck.\n. Ah, I didn't realize wlc_view_get_parent is a thing. We should probably default views with a parent to floating.\n. Duplicate of #604.\n. Does #691 fix this for you?\n. Yeah I figured LO wouldn't be helped but I'm glad to hear the other one is better.\n. Not sure. TBH I suspect wlc issues. Summoning @Cloudef: maybe you could implement the swaylock protocol in orbment and see if it's reproducable?\n. @ids1024 still a problem?\n. Thanks for the update.\n. @mikkeloscar correct\n. I'm going to close this as it seems to be an issue with wayland (the upstream Wayland project, that is). Please try to produce a test case that works outside of the context of sway and I'll reopen this.\n. How about binding with bindcode instead of bindsym?\n. Should be fixed by #611, please confirm\n. Wikis are publically editable.. The first problem is being tracked by https://github.com/Cloudef/wlc/issues/104\n. This is a WLC problem. Please report it there.\n. These changes all seem pretty fair. Will merge when build's green.\n. Good stuff, thanks! Will merge once the build passes.\n. Thanks!\n. I like the idea but the concerns raised by i3 definitely need to be addressed.\n. Regarding things like the width of the titlebar.\n. What?\n. 1. Click this link: https://github.com/i3/i3/issues/1977\n2. Read the concerns raised by i3 developers\n3. Apply the same concerns to sway\n. Implement it if you want it.. Thanks!\n. Style issue - use sizeof(...), not sizeof ...\n. Thanks! Will merge when build passes.\n. Keyboard focus does move, but the mouse focus doesn't seem to come along. Paging @Cloudef cause it's probably a wlc issue.\n. Closing cause WLC issue.\n. Should we also (at some point) re-check the window critera?\n. afaik window title changes at least will cause the criteria to be re-run on i3.\n. Thanks!\n. Thanks!\n. Thanks!\n. Modesetting of any kind isn't supported by WLC yet.\n. :+1:, but sync this with master and I'll merge it once tests pass\n. Sorry, you'll have to sync it up again.\n. :+1: \n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Bump\n. Thanks!\n. Is this still reproducable?\n. Closing this until you get a chance to verify. It was likely fixed in ce98569.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Subtree sounds like a reasonable solution, ish.\n. This has been fixed on the wlroots branch. :tada: . Thanks!\n. Does swaymsg output eDP-1 bg ~/\"as df.jpg\" fill work?. Please report to wlc.\n. https://github.com/Cloudef/wlc/issues/37\n. https://github.com/Cloudef/wlc/issues/126\n. This works in i3? Wow, that's weird.\n. Unable to reproduce.\n. We have an official openSUSE package now? Sweet!\n. Thanks!\n. LGTM. Merging when build passes.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Alright, verdict: implement the i3 behavior by default, but add a config command if you'd like both options.\n. Is qsort stable?\n. A stable sort, I mean. Does it retain the sort order of equivalent items?\n. Cool. Will merge once that change lands in this PR.\n. And the build passes.\n. Let's add a sort_stable to stringop.c.\n. > Is it possible to run sway without xwayland with only wayland native apps? If so, what are the steps to do this?\nJust don't install Xwayland, or run sway with WLC_XWAYLAND set to 0.\n\nSway seems to perform exceptionally well, but the ram usage is high compared with other tiling window managers.\n\nThis is mostly because of the memory leaks that are all over sway. They'll be cleaned up prior to 1.0. You're right, though, it's not fair to compare Sway's memory usage to X window managers. Better to compare it to X window managers usage plus Xorg memory usage.\n. Thanks!\n. I suspect WLC issues here.\n. Possibly related: swaylock issues on multiple outputs.\n. Can you reproduce this problem with orbment?\n. Report to wlc.\n. @tuncer is this fixed with #673 and #703 merged?\n. Does #691 fix this for you?\n. Can you sync your branch with master?\n. git checkout -b fix-bar-positions\ngit checkout smartgap-hide-edge-border-fix\ngit reset --hard HEAD~3\ngit push -f\nThen open another pull request for fix-bar-positions.\n. This is not currently implemented.\n. Thanks!\n. Thanks!\n. Nice work! Will merge when build passes.\n. I would rather add the $ for them than raise an error.\n. I think it would be better, yes. Log a warning though.\n. Thanks!\n. Thanks!\n. Thanks! I like how much detail you went into, the table is a nice touch.\n. Thanks!\n. Not a huge fan of this implementation. It would be simpler to address this around here:\nhttps://github.com/SirCmpwn/sway/blob/master/common/readline.c#L16\n. It also has several problems with the style, see the style guide in the CONTRIBUTING.md:\nhttps://github.com/SirCmpwn/sway/blob/master/CONTRIBUTING.md#coding-style\n. Thanks!\n. I think that this adds unnecessary complexity. If you want a more complex configuration file, then I've generally suggested invoking a bash script and using swaymsg from the script to perform further configuration.\n. Since no one has chimed in to support this idea, I'm closing the issue.\n. Can we use a different means of getting the pid of an arbitrary x window? @Cloudef would you be up for writing a wlc API for getting a pid from an arbitrary view that supports both x and wayland windows?\n. > If the app is a client-server-style app, like gnome-terminal for example, the pid we get from the view is probably the pid of the client, but the pid we're looking for is that of the original process, which could be the server.\nCan we walk up the tree somehow? How do tools like htop display the process tree?\n. Do you know how broadly it's implemented in practice?\n. Hmm, I wonder how things like X forwarding play into this.\n. Can you sync with master? I'm going to review and consider this for merge, because there is a place that this is useful: auto-starting common applications from your sway config on startup and assigning them to a workspace. I actually did that in my i3 config before I switched to sway.\n. Best solution might be to just keep around a timesteamp with each pid and expire them after a while?\n. > Good idea! That should work pretty well. I'll add a uniqueness check when adding a new pid_workspace and a garbage collection function that will clear any entry older than some amount of time, say 60 seconds. That should keep it clean.\nMake it configurable, and run the GC when adding new pids to the list.\n. Also, use monotonic time for getting the current time.\n. I suppose the latter is fine for now.\n. No.\n. Thanks!\n. Thanks!\n. :-1: \nWhy not just, you know, set the environment variables before starting up sway?\n. > Another aspect is that with this you can have specific environments variables depending where you are running sway; using the include with hostname.\nThat still works without this feature, just make your wrapper check the hostname and set the environment accordingly.\n. Going to close this for now. May consider the feature later.\n. No, this does not work and I don't expect it to work any time soon.\n. LGTM. Merging when build is good.\n. Nope.. Thanks. At some point I'd like to consider extending these to support floating windows as well.\n. Sweet.. That sounds fine to me.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I don't really understand how 0f1859e could be involved. I'm using the latest release and split h/v works as expected for me.\n. Ran into some bullshit. Not moving forward with cmocka.\n. A number of things. First, I ran into issues with bus errors and segfaults when accessing shared pointers between tests and tested code. I ran into this when I started to write tests for commands, which need the config global to be usable. For that to be usable I need to set up config defaults and clean up after the test. The second issue is that when digging into cmocka to find out more, I found it to be implemented in one big C file. This confirmed my suspicions that it wasn't very good, which I thought from the start based on the poor documentation and less-than-ideal set of assertions.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I think you should pitch this to libinput.\n. Ugh. I'll reopen this but I'm not sure how I want it to take shape in sway.\n. -1. This is not something I'm interested in doing with a protocol.. I don't think that any of those use-cases justify putting in what is literally a keylogger protocol extension.. Then you should patch sway.. No, I mean patch. I run sway with some private patches myself. Patching software is not a big deal. Just do it until you get bored of gathering stats on your typing habits.. That's pretty awesome!. Probably best for this to go into wlc. It provides us some touch stuff but it doesn't work well.\n. So work on it?. I think this belongs in wlc.\n. Thanks!\n. No thanks. I have a policy against implementing things with macros unless it's absolutely necessary.\n. I suppose, in a seperate PR please.\n. I don't know if I really appreciate this behavior of i3lock. I would merge a PR that adds -f (fork) to swaylock, though.\n. Please report the bugs you find. As for gnome-calculator, does this fix it for you?\nfor_window [id=\"gnome-calculator\"] floating enable; border pixel\nI've been thinking about distributing some default window rules with sway, anyone else have some thoughts?\n. Those rules are sane, but the information you mention isn't being bubbled up to us in Wayland.\n. Well, presumably most of them would be added by users via PR when they find windows that need tweaking. In practice my list is pretty short (I have 5 window rules and some of them aren't really that important).\nAs for identifying parents for modals, I agree that we can detect that and handle it fine. The code needs to be updated to reflect that. Some changes just landed in wlc yesterday related to this as well.\n. Instead of allocating a list like this ad-hoc why not just iterate over the workspaces in the root container and remove the empty ones?\n. Dupe https://github.com/SirCmpwn/sway/issues/571\n. @Cloudef: pretty please fix this\n. Thanks!\n. Using two sockets was established in #406. Paging @mikkeloscar for comment.\n. Make sure your sway and wlc are both up to date, and xwayland as well.\n. Yep.. I don't think this is us. oh.. LGTM, thanks!\n. LGTM.\n. You still have some formatting issues going on here. Can you give it another pass? Refer to the style guide in CONTRIBUTING.md. You also don't have to open a new pull request, just push a fixup commit to the same branch.\n. I noticed earlier that swaybar and swaybg don't have the right mouse cursor. This is usually indicative of a surface that is not a shell surface. This might be something wrong with your implementation or it could be something wrong with using side channels to create shell surfaces in wlc.\n. Yeah, that indicates to me that something's not right.\n. This never went anywhere but it demonstrates the problem: https://github.com/SirCmpwn/sway/pull/450\nBasically, if a surface is a shell surface it'll receive pointer events (since the sway wayland client code wires things up) and will handle the mouse cursor appropriately. This already works with correctly configured sway clients, you just have to indicate that the surface is to be a shell surface when you call window_setup. This will register the appropriate handlers for the mouse cursor over this surface. The fact that this doesn't happen leads me to believe that the shell surface is being misconfigured.\n. I did, see #450. The cursor over swaybg and swaybar has never been correct in the master branch because support for them as shell surfaces wasn't merged until recently.\n. No. I'm saying that swaybg and swaybar were not shell surfaces before this patchset, and it's only shell surfaces that receive a cursor. Because they aren't getting a cursor I think they've been misconfigured.\n. Dammit. Listen:\n1. Shell surfaces are managed by wlc with respect to their rendering and other surface upkeep.\n2. Shell surfaces created by passing true into create_window will, or at least would, register for pointer events and use the wayland protocol to set their cursor as appropriate, in the code I linked to.\n3. wlc renders this cursor for shell surfaces as it tracks your mouse's movements around the screen. As you move your pointer over a shell surface wlc will change the cursor to the one supplied by the relevant client.\n4. In my older pull request (that didn't get merged) making swaybg a shell surface, the pointer became the standard x pointer (as opposed to the default wlc rio-inspired pointer) over swaybg surfaces.\n5. After this pull request was merged, that does not happen.\nIt follows that something is different about this pull request and the factor that indicates that is the absence of a correctly configured pointer.\n. I'm telling you that you're going about reproducing it the wrong way. I'm not saying that you introduced a problem. I'm saying a problem that should have been solved by your changes wasn't.\n. Just invoke swaybar manually instead of letting sway run it for you.\n. I'm guessing that somewhere in your changes the code in window.c that registers the pointer stuff was broken. I haven't looked that deeply into the problem yet.\n. I don't really like the change of ownership over the keyboard. The window doesn't have ownership over it, the registry does. Same for pointers afaik.\n. You're making the incorrect assumption that one wayland client == one wayland window. The registry is something the client owns, and the client can spawn many windows. The client is only given one keyboard via the registry. We could open several connections and get the registry several times as several clients but that's ineffecient and not the Wayland way.\n. I think that implementing that behavior in the shared code misleads its users about the nature of the keyboard on wayland. It makes sense to have the pointer state live on the window since we get coordinates relative to the surface for that.\n. Because they are? That's how the API is written. Keypresses don't matter relative to a window's coordinates, but mouse movements do.\n. Yes. And sync with master and fix the formatting issues.\n. Thanks!\n. Thanks!\n. https://gogs.sr.ht/SirCmpwn/dotfiles\n. How well does this work with:\n- Output resizing (either via swaymsg output ... res ... or the x backend resizing the windows)\n- Z ordering when the layout is arranged, the bg should always be at the bottom and the bar should be on top of all tiled windows but below floating and fullscreened windows\n. Bump\n. No worries, take your time.\n. Not sure how it'd shake out over time, restarts, etc.\n. Sorry, I meant reload. Which causes the swaybg and swaybar processes to restart.\n. How about changing workspaces with the scroll wheel?\n. Sure.\n. Tested this and it doesn't work with multihead - all of the swaybars end up spawning on the same output. You can simulate multihead by running sway with the x backend and using WLC_OUTPUTS=n where n is the number of windows to spawn as virtual outputs.\n. Perhaps!\n. Can you just push more commits to this branch instead of making a fourth pull request?\n. Can you sync up with master?\n. Thanks!\n. LGTM, thanks!\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Fixed?\n. Oh, okay. I misunderstood the bug and wasn't able to reproduce it.\n. Thanks!\n. LGTM\n. Thanks!\n. Thanks!\n. So send a pull request? Seems like an easy fix.\n. On the wiki, even, why by its nature is publicly editable. I don't even have to approve your changes to it :smile: \n. Thanks! Changes on the wiki do show up in many people's feeds as well and will surely be addressed if changes are necessary.\n. Go for it.\n. Thanks!\n. Thanks!\n. A screensaver program could be made, but none exist. As for the latter issue see #541.\n. Yes, and why would I know how to report bugs on an unrelated project?\n. These are voluneer efforts. I encourage you to dig into it and send them a patch.\n. There's no profound knowledge to be had. GDM isn't that complicated. You overestimate the effort involved in hunting this down.\n. https://github.com/Cloudef/wlc/commit/71f013f62bd346bf415710e1ddcfd4d0f13a84bd\nFixed. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. What's the status of this, and #762?\n. Alright. Can you resolve the merge conflicts and get this up to date with master? I'll review+test this tomorrow and we can go from there.\n. Should work now.\n. I don't want to move forward with that strategy.\n. Can you run this with gprof and get is some profiling data?\n. No, no, profile sway, not glxgears.\n. Profile and send patches.. Benchmarks and profiling are not the same thing. Benchmarks tell you there are performance issues. Profiling tells you what they are.\nI'm closing issues that don't have enough information to solve. Profile it and leave a comment with the results, and I'll re-open this.\n\nAlso : as a simple user, I'm not required to send you patches.\n\nAs a developer, I'm not required to write them for you.. LGTM. Mergable?\n. When you move between stacked or tabbed views, does the background occlude the views?\n. This is a limitation with wlc. Ping @Cloudef.\n. Can you fix your authorship info so it links to your GH profile?\n. Thanks!\n. That idea doesn't make any sense on Wayland.\n. You can set the SOCKPATH environment variable when you start up sway if you want to get a predictable socket name, would that help?\n. DISPLAY is set to the display of your Xwayland server, which is an entirely seperate process from sway that has no knowledge of sway, and that doesn't even need to be installed to use sway.\nThere is no root window, and no properties on it. There is no display. All of that is specific to X.\nLike I said, you can specify the path to the sway socket if you like by using the SWAYSOCK variable.\n. lsof | grep sway-ipc | awk '{ print $2 \" \" $9 }' | uniq\nI guess\n. I don't want swaymsg to know about wayland. Swaymsg just talks to the sway socket and hell, swaymsg probably even works fine with i3. I don't see any reason why you couldn't just use the SWAYSOCK variable to get a predictable socket name and instructing swaymsg to use that.\n. > It's undocumented\nAnd that's part of why it's not considered a compatability issue :wink: \n\nThe primary use case is working with a nested sway server for development, like for observing test scripts when a situation might crash the server. I used this all the time for i3 with Xephyr.\n\nI don't understand how that scenario prevents the SWAYSOCK variable from being used to accomplish your goal.\n. \"It's not documented and no one uses it\" isn't a great argument for supporting a feature.\n. > Developers will use it and developers are more important than normal people.\nlol\nSeriously though, the only things you need to support to be strictly compatible with i3 is the documented interfaces. Undocumented interfaces are not included in this. And in any case, some things don't make sense to support in a Wayland context, such as the force_xinerama command.\nI'm not going to bikeshed the meaning of i3 compatible with you. If you have any problems using the SWAYSOCK variable to specify the socket path, feel free to continue discussing that.\n. Haha, no. It still wouldn't make sense to support something inherent to x in sway. It would just fall into the category of things like the force_xinerama command. I still don't fully understand why you seem resistant to the alternative solutions I've proposed.\n. Thanks!\n. It's cool.\n. Thanks again!\n. Do you want to wait for the i3 discussion to shake out before this is merged (so you can update this PR) or do you want to make a seperate PR if any fixes are necessary?\n. Sounds good to me.\n. I usually like to ship new sway versions when things are quiet, but there hasn't really been a quiet period since 0.8, and 0.9 is starting to get too big. So: I've just tagged 0.9-rc1. Please install it and use it as your daily driver if you're on 0.8 and let us know of any problems you find in it. If there are any PRs (like #793, #765, #762, or #500) that you would like to see land in 0.9, make sure you let me know and get them cleaned up and mergable soon (paging their authors: @thejan2009 @deklov @mikkeloscar).\n. Deadline for feature PRs: 2016-07-30\nTarget date for shipping 0.9: 2016-08-02 (no deadline for bugfix PRs)\n. 0.9-rc2 is out.\n. Since there seems to be no discussion here, presumably everyone is on board. Going to close this issue.\n. Thanks!\n. Client-side support done as of https://github.com/SirCmpwn/sway/compare/0913eff9157a...af441541197a\n. Note that sway doesn't use ewlc. If you'd like to see XWayland DPI improvements in Sway, they should be submitted to wlc.. That doesn't surprise me, but we're still not switching right now.. The hidpi branch was merged, just use stable releases.. This is done :tada: . I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Do you think a similar feature is going to land in i3 (not that I'm necessarily opposed to having this sort of feature in sway)?\nI would also prefer to see this implemented with something like the include command (which is unique to sway but is under discussion for inclusion in i3), which would be able to simply include colorschemes from ~/.config/sway/conf.d or whever you like in the form of simple i3 configs.\n. Good point. Can we explore alternate ways of setting bar colors instead? For example, in #547 we talked about things like having bars configured like this:\nbar \"id\" {\n    ...\n}\nWhich would expand to things like:\nbar \"id\" ...\nHow about supporting something like bar * ... to support configuring properties that all bars inherit by default?\n. Since the include directive supports shell expansion, maybe we could do something like this:\ninclude `i3-style solarized`\nWhich would dynamically rejigger the JSON schemas i3-style already supports into something i3-config-like and drop it in /tmp or something. Thoughts?\n. And then things like i3-style could install something to /etc/sway/config.d/i3-style or similar and it would just werk. Sounds like a good plan. I'm okay with programs having to write sway specific code to take advantage of sway specific features.\n. A place on the wiki sounds like a great place to discuss that. As for avoiding a seperate utility and using the colorscheme directive to support it, well, I feel like that's out of scope if we can find an acceptable solution for it built on top of sway's existing mechanics. As a bonus I feel it'll expand the usage of installing sway config.d files with packages to extend sway's functionality for them.\n. I don't think that's a very strong use-case, since you can also just do something like i3-style solarized > .config/sway/config.d/colorscheme or something similar and then remove i3-style.\n. Either way.\n. Thanks!\n. If I chose to remove it from the repo, I can purge it from the entire history of the repo if necessary.\n. I'm not going to break the repo's history by rebasing them out, so the bloat will always be there for clones. There's an option not to install them during the build. Kindly go fuck yourself.\n. I'm okay with pretty printing. Any program that depends on exact string matches for JSON output was written by an idiot anyway.\n. I also would like to see non-JSON pretty printing happen sometime, so you could do something like this:\n```\n$ swaymsg -ht get_outputs\nDVI-I-1: 1920x1080+3840,0 x1\n    Visible: true\n    Active: true\n    Primary: false\n    Current workspace: 3\nDVI-D-1: 1920x1080+0,0 x1\n    Visible: true\n    Active: true\n    Primary: false\n    Current workspace: 2\nHDMI-A-1: 1920x1080+1920,0 x1\n    Visible: true\n    Active: true\n    Primary: false\n    Current workspace: 1\n```\n. Would also be useful for inputs.\n. No, machine readable isn't a goal of a human-friendly output mode.\n. Better to have swaymsg do the pretty printing imo.\n. Looks good, but gonna leave the PR unmerged until sway 0.9 drops.\n. I could, but I still haven't fully defined the process for how this rc/release/etc stuff should be put together. I'll formalize the process before 0.10 and then we'll stick to it.\n. > I'm getting kind of confused by the vocabulary here. Should I refer to containers and views as separate things or is a view a type of container?\nNo, containers and views are the same thing. A view is a type (literally, swayc_t->type) of container, or rather a type of swayc_t. So are outputs and workspaces and so on.\n. Approach here seems fine.\n. Thanks!\n. NAK. I don't want to formalize a special case for layouts like these. At some point I'd like to see things refactored to avoid having tests for specific types of containers at all (i.e. implementations of each kind of container provide their own code for handling this and that, rather than having the shared code know about each kind of container).\n. FWIW vt switching is buggy as hell, which mostly comes from wlc issues. Change looks good, will merge once it's all green.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. swaymsg is doing the right thing, and the command is doing the right thing, but it should restart or at least signal a reload of swaybar and should redraw window borders. You'll probably notice that if you use the font command and then resize a window or something it'll be rerendered with the correct font.\n. Nah the right call for this is to defender everything.\n. Rerender* on mobile\n. Let's do it right the first time instead of putting in a temp solution.\n. Edit your config and reload sway ($mod+shift+c by default). Right now we restart the swaybar process whenever we reload the config, which to be honest I'm entirely okay with. This ticket would propose instead sending the reload signal over IPC and having swaybar pull down the new config.. >I.e. the issue can be closed.\nyeah\n\nI looked at the code, and it seems currently the communication channel between Sway and its bars is closed at invoke_swaybar(). Making bars to get reloaded instead of being restarted requires to store the pipe descriptors somewhere in Sway\n\nNo, swaybar then reaches out to sway as an IPC client.\nhttps://i3wm.org/docs/ipc.html#_barconfig_update_event. Thanks!\n. Cannot reproduce. Still an issue?\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!\n. Is this still a problem?. Please request this feature of wlc.\n. That sounds like a pretty solid set of goals. :+1: \n. weston-terminal might not support HiDPI. If you're looking for a term that does, try gnome-terminal.\n. Oh, and the window decorations and bar are known limitations in sway's HiDPI support. See #797 \n. Ah. I wouldn't suggest weston-terminal for any purpose.\n. swaybar, swaybg, and swaylock all support hidpi as of https://github.com/SirCmpwn/sway/compare/0913eff9157a...af441541197a\n. That's what I'd like to look into next. I actually missed a spot with swaybar I need to fix, though.\n. https://github.com/SirCmpwn/sway/issues/797. RTFM. Thanks!\n. Thanks!\n. Paging @Cloudef\n. Thanks!\n. Please report this to wlc.\n. Can you get us a core dump?\n. That's a stack trace, not a core dump. The information here is enough to see that this is an error in your gfx driver, though.\n. I'm not sure. You'd have to reach out to them.\n. I would be seriously surprised if this was a Sway problem. Does the same bug occur with orbment?\n. Yes, a log would be nice.\n. Update wlc.\n. #840\n. What two items are you referring to?\n. Ah. Well, feel free to send along a patch.\n. Thanks!\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. How about just not launching swaybg unless a background is specified?\n. Thanks!\n. I've never experienced this. Can you give some more info about your setup?\n. Can you share your sway config?\n. You should use %lu\n. Paging @Cloudef\n. Cannot reproduce. Can you share your mpv configuration?\n. Can you provide a core dump?\n. I got ibus working with xwayland apps today on sway with this configuration:\nhttps://gogs.sr.ht/SirCmpwn/dotfiles/commit/618910b97e3b400766a0d499372b2ad3d15fd7c2\nIt's not perfect but \u3053\u308c\u306f\u5927\u4e08\u592b\u3067\u3059 :)\n. See https://git.sr.ht/~sircmpwn/dotfiles/. Thanks!\n. Thanks!\n. Thanks!\n. :+1: \n. Thanks!\n. wlc doesn't yet support syncronization between the x and wayland clipboards.\n. I don't understand what you're asking for.\n. Interesting thought. May be worth looking into. Have you pitched this feature request to i3 as well?\n. Wouldn't be a bad idea.\n. Link to i3 discussion?\n. Thanks!\n. There's no fucking way I'm hardcoding some systemd API into sway to tell it not to suspend your laptop.\n. There should be some kind of setting exposed by systemd to disable this behavior. You should ask them about that.\n. Thanks!\n. Sync up with master?\n. No worries.\n. Thanks!\n. Should definitely be fixed in sway, not in i3ipc. Thanks for the bug report.\n. Is this good to go?\n. New problems, new issues.\n. This is reverting a commit, right? Which one?\n. Paging @acrisci for comment\n. >Having the same issue here let me know what information I can provide to help fix this.\nThe output of git diff on a branch with the feature patched would be a great start. Probably best to change swaybar to avoid submitting so many IPC requests in a row.. And update sway to avoid the deadlock. Thanks!\n. I guess we should implement that to support i3 compatability, but ftr I disagree with the feature. Why not just output unicode characters?\n. But you can use i.e. \\u\n. latam is listed in xkb's keyboard layouts. This is an XKB problem, not a Sway one.\n. Does it work on orbment?\n. Or Weston?\n. Send feature request up to wlc, then we'll add a command for it if they support it.\n\nIt's possible to do this with the IPC.\n\nHow?\n. This is planned for wlroots.. Thanks!\n. Thanks! Can you associate the email you committed with on your Github account?\n. Thanks!\n. This solution isn't very effecient. It's going to traverse the tree for every container in the response.\nJust do this: if this container isn't a C_VIEW, then false. Otherwise, go up the parents until you either hit the root container (true) or a parent whose focused property doesn't match where you just came from (false).\n. Fair. Could you instead make this function take in the focused container as an argument and compute it before calling the function?\n. You can bind things to mod+scroll wheel.\n. Sorry for the late response. Running sway within x is a developer feature and is unsupported. You can use it if you want, but not file bugs about it.. Can we add support for a specified container?\nWhat happens if that container is moved or resized while recording?\n. > If a container is moved or resized while recording, it just won't be in frame. The geometry is set from Swaygrab once, and it stays that way. Not sure how big a concern this is - I'd assume if you're going to be moving containers around you'd just capture the whole output.\nAlright\n\nIt would be possible to add support for a specified container I suppose but I'm not sure how you'd identify said container. The \"id\" field we have in the tree response is the pointer to a given container so I guess that could work.\n\nYes\n. Output of swaymsg -t get_outputs?\n. Thanks! I can reproduce this problem.\n. This isn't supported by any Wayland compositor. You could fake it by setting your resolution to the effective resolution you want.\n. If your resolution is i.e. 300x300 and you want to use 1:3 scale you would set your res to 100x100 in your output config line.\n. wlc's problem imo\n. https://github.com/SirCmpwn/sway/blob/master/include/stringop.h#L31\n. Do you need to free the string? Not sure if create_workspace dupes it.\n. Thanks!\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. You're right. I'm going to slow it down (and update the docs to reflect this) to an RC a week.\n. https://github.com/SirCmpwn/sway/releases/tag/0.10-rc2\n. https://github.com/SirCmpwn/sway/releases/tag/0.10-rc3\n. Last call for 0.10 PRs, it ships in a couple of hours\n. I've noticed this tool. Swaylock definitely needs work.\n. Thanks!\n. @Fale does it?\n. Thanks!\n. Thanks!\n. Keeping this open until we can read from the clipboard too.. You can also do things like run swaygrab to capture the screen or swaymsg to use swaymsg's IPC permissions. Part of a secure system is sandboxing things you want to keep under control, which includes removing access to swaymsg -t get_clipboard from the equation.. >should it be get_clipboard and set_clipboard or rather clipboard set and clipboard get?\nWell, sway commands cannot output information, similar to i3 commands (I want to change this in the future - but not now). For the time being you should add a new IPC message type and we can use swaymsg -t get_clipboard.\n\nis it enough to handle text support (i.e. text/plain targets, simply fail if the cilpboard cannot provide this) or is anything else required? (it might be possible to dump other clipboard targets but it is probably not worth it IMO, would require a rather huge wlc interface addition)\n\nSure, that's fine for now, but don't paint us into a corner such that we can't change that later.\n\n(sorry, still not too familiar with the codebase) where is security handled? is there an example of an command dealing with security (or isn't it handled by the command implementation directly?\n\nYou get security for new commands for free, you should just set their permissions appropriately in /etc/sway/security.d/00-defaults if the defaults aren't sufficient. For the new IPC message, however, you will have to do a bit more. Add a new feature type:\nhttps://github.com/SirCmpwn/sway/blob/master/include/sway/config.h#L223\nThen, when you implement it in ipc-server.c, check it with something similar to this:\nhttps://github.com/SirCmpwn/sway/blob/master/sway/ipc-server.c#L353\nAnd add an IPC subcommand so that this can be configured:\nhttps://github.com/SirCmpwn/sway/blob/master/sway/commands/ipc.c. swaymsg clipboard \"hello world\". Thanks!\n. Please provide a log.. Thanks!\n. Thanks!\n. Thanks!\n. Thanks!\n. Profile it and send patches.. If you've profiled it you need to make the results of your profiling available here, or this issue is useless. See #1004 for a better example of how to report performance issues.. My mistake, I see your results now. However, it appears to be the same underlying issue as in #1004.\nRemember this project is run by volunteers who owe you nothing, getting snotty with us gets you nowhere.. Thanks!\n. See #541.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Read the FAQ.\n. Most people write a script that sets up their environment variables the way they like and then launches sway with them.\n. Sorry it's taken me a while to review this. Per discussion in #939, was this a red herring? I'd rather not merge this if it adds complexity without solving a problem.\n. Style concerns aside this code looks good. Fix it up and rebase against master, please.\n. The default blending mode has been changed to overwite. This behavior won't be included in sway 0.10 and will be configurable in sway 0.11.\n. Leave this in wlc's tracker.\n. Thanks!\n. Read the FAQ.\n. Most of these problems almost certainly originate from wlc.\n. Open an issue in wlc's tracker please.. Can you fix your email on your github account so the commit gets associated with your user?\n. Looks good save for that.\n. Thanks!\n. Rebased and merged: https://github.com/SirCmpwn/sway/commit/35b8d185ac58eaaeb12a95d6947cdcb78a2ee487. Read the FAQ\n. Putting them on the heap is a bit cleaner imo\n. Try configuring your input device? man 5 sway-input. Try a flat accel_profile.\n. Guys, we don't another \"I can reproduce this\". Clearly it's a legitimate problem. What this needs is someone to investigate the problem, not someone to say they have it too.. Really this issue is a wlc issue, not a sway one. wlroots is going to replace wlc in the eventual future, and it's going to use a hardware cursor.. Yeah, this is fixed as of 0.14-rc5.. https://github.com/Cloudef/wlc/issues/174\n. This is either an issue with wlc or kmscon, not sway.\n. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. No, you should use a seperate tool like imagemagick or ffmpeg for post-processing.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Yes, that'd be a good first step. The issue is likely a problem with wlc - try to reproduce this with the orbment compositor, then move your bug to the wlc repo if you can. As a workaround, try forcing GTK to use the x11 backend with GDK_BACKEND=x11. Unable to reproduce. Please provide more information:\n\nYour config file\nA sway debug log\nThe Firefox stack trace\nYour sway and wlc versions. What happens if you try it without hidpi?. Can you provide a sway log as well, and a firefox core dump?. Thanks. Will have a look when I get the chance.. Firefox version?. All I'm going to do when I have the spare time is grab that core dump and debug firefox. Anyone else could do that, too.. Do you still experience this?. Come on dude, you have got to start providing more detail in your bug reports.. This needs to be handled by wlc. Don't get your hopes up, though, for Wayland reasons.. Can you describe your use-case?. How would you feel about binding reload to a key?. Sure, I love the terminal too :) thanks for the input. Put together a strategy that'll keep the option available, but it's likely to be turned off by default.. Well, the concern is that a malicious program could rewrite security rules in your config and then trigger a reload via IPC. Open to suggestions. You can change this behavior by editing this in the default security rules.. Simulate the key event how?. Paging @yohanesu75 for FreeBSD review. Alright, this pull request should be good to go. Going to leave it open for a couple of days to gather feedback and reviews - please take a look at this and let me know what you think. Can you find some flaws?\n\nWill tag 0.12-rc1 once this is merged (will grab #963 too).. Working release notes:\nThis release includes 139 changes from 12 authors. The biggest feature 0.11 offers is the first steps towards the goal of a secure Wayland desktop by adding new knobs to secure your sway installation - read sway-security(7) for details. These are only the first steps towards a secure sway, and no promises are made about how well it works. Please test it and look for ways to break it and provide feedback on your experiences.\nPackage maintainers - consider reading through sway-security(7) and seeing if there are any security-related configuration changes you'd like to ship with your sway installation. SYS_CAP_PTRACE is now required on /usr/bin/sway. Sway also hardcodes LD_LIBRARY_PATH on startup  now - you can change this with -DLD_LIBRARY_PATH=... if you set this to something other than /usr/lib in your distro.\nFreeBSD users - note that we cannot enforce security policies on a per-executable basis until this issue is resolved. The default security policy will be applied to all executables.\nChanges\n\nSway now depends on libcap on Linux\nMoving between containers now wraps according to i3 behavior (@thejan2009 - #936)\nAlpha blending is now done with CAIRO_OPERATOR_SOURCE (@SirCmpwn - c0916f6)\nbar pango_markup defaults to false, following i3 change (@Hummer12007 - #958)\n-Denable-binding-event is no longer available - see sway-security(7) (@SirCmpwn - #981)\nNew floating windows now spawn in the center of the screen (@alkino - #1001)\n\nNew Features\n\nClicking titlebars now focuses that window (@alkino, @thejan2009 - #933, #934, #945)\nChanging focus between floating containers is now supported (@thejan2009 - #935)\nNumeric character references in bar are now supported (@thejan2009 - #936)\nPango markup in workspaces names is now supported (@thejan2009 - #936)\nInput device configuration can now enable left_handed (@t3hknr - #961)\nImprovements to logging (@SirCmpwn - 0d6cbca...d3e55f8)\nNew bar colors following new i3 features - see sway-bar(5) (@thejan2009 - #965)\nNew security-related features - see sway-security(7) (@SirCmpwn - #981)\n\nBugs Fixed\n\nErrors in swaybar's hidpi rendering were corrected (@thejan2009 - #920)\nBug fixed where IPC events were emitted before IPC initialization (@gutsoo - #923)\nSegfault during edge case on workspace switching was fixed (@zandrmartin - #924)\nAn IPC tree response compatability issue was corrected (@zandrmartin - #925)\nBuggy font selection issues were fixed in swaylock (@wasamasa - #928)\nFixes to scale factor in text scaling (@alkino - #937)\nIssue creating a sibling of a floating window fixed (@alkino - #938)\nSome commands were not matched during command matching (@thejan2009 - #940)\nIndicator border no longer shown on floating windows (@thejan2009 - #941)\nAn issue with for_window [] move scratchpad was fixed (@thejan2009 - #942)\nYou can now move empty workspaces (@alkino - #947)\nFixes with default workspace layouts (@thejan2009 - #945)\nlayout toggle split behavior fixed for tabbed/stacked layouts (@thejan2009 - #966)\nWhen swaylock exited, it would not focus whatever you were using before (@cyphar - #1014). Yes, thank you.. Are you building on Linux? Which distro? You need to find sys/capability.h somewhere in your package manager.. 0.11-rc2 is out https://github.com/SirCmpwn/sway/releases/tag/0.11-rc2. 0.11-rc3 is out https://github.com/SirCmpwn/sway/releases/tag/0.11-rc3. If everything goes according to plan, sway 0.11 will ship on 2016-12-26 (the Monday after next).. 0.11 will have to wait until tomorrow, since I forgot to bring the signing key with me on this travel laptop. Flying home today.. Sway 0.11 released: https://github.com/SirCmpwn/sway/releases/tag/0.11. https://github.com/SirCmpwn/sway/commit/6604bb67ea1d7f7d395477607dc0395a63eea7be. >for some reason (security thing broken?) swaybar gets a full window, not a bar\n\nDoes sound like security related. Check the logs. Are you including the default security rules correctly?. >Disable -Werror because of assert-related warnings\nWhat warnings? I'm not disabling Werror unconditionally.. >permit * fullscreen keyboard mouse ipc lock panel background screenshot is the way to go for now.\nDefinitely not. The only problem is finding the pid for a unix socket client, right? We can still find pids for wayland clients, I hope. If so, we can enforce everything but IPC:\npermit * fullscreen keyboard mouse ipc\n\nWe definitely don't want to give sway shell permissions to everything by default.\n+1 to @yohanesu75's solution for getting the pid of the socket client, too, then we shouldn't have to make any compromises.\n. >Anyway, again \u2014 I think that fixing security should be a separate PR.\nI don't.. So what's the current status of this? Going to ship rc2 without it tomorrow if it's not fixed up in time.\nRegarding pids, sway needs them in two situations:\n\nFrom wayland clients via wl_client_get_credentials (from wayland-server) or wlc_view_get_pid (from wlc) to enforce all permissions except for IPC access\nFrom Unix socket clients via getsockopt/SO_PEERCRED to enforce IPC access\n\nThe former is a concern of sway's dependencies, wayland-server and wlc. The latter is sway's concern.\nThis PR should fix the latter, if possible, on FreeBSD. My understanding of the discussion so far is that it can do so.\nAs for the former, this PR needn't provide a solution (the problem doesn't live in our code anyway). I strongly encourage you to also send patches to the dependencies if these interfaces do not work on FreeBSD. If these interfaces do not work on FreeBSD, I will include a warning in the release notes about it, and maybe in the man page, when I ship sway 0.11.\nSounds good?. Couldn't the client just pretend to be a different pid than it actually is?. The kernel writes the hello message then? How does that work? Does this break compatability with i3 IPC?. Possibly helpful: https://lists.freebsd.org/pipermail/freebsd-bugs/2006-September/019991.html. Yeah, that seems to require changes on the client level, which I'm not fond of at all. I suppose we can move forward with FreeBSD support being insecure for now. Will you start a process with FreeBSD to make interfaces that support our needs possible? It shouldn't be too terribly difficult to add support for getting the pid of a unix socket client (or server!) to the kernel.. Is there a sway package for FreeBSD? Not entirely familiar with how software is distributed on FreeBSD. Should make sure the default security config it installs has this line:\npermit * fullscreen mouse keyboard background panel lock ipc\n\nWhich will fix the issues with swaybar, swaybg, etc (at the expense of not being able to lock down access to those features).. Thanks!. That's correct.. The bounty program is now in effect. Go forth and code!. Thanks to @fale for donating $90 to DPMS, https://github.com/SirCmpwn/sway/issues/975, and https://github.com/Cloudef/wlc/issues/87 :tada: . $60 donation added to Xembed support (tray icons), bringing the bounty up to $110 :tada:. Thanks! Raised that bounty to $150.. Claimed the redshift bounty for myself and redistributed it to real time video capture and touchscreen support.. (via https://github.com/SirCmpwn/sway/pull/1019). User demand. Lots and lots of programs still use Xembed. We should of course eventually support both.. Something important to note is that StatusNotifierItem is dbus-based, and so far I've worked to avoid making dbus a hard dependency of sway. If we do implement it, we should put it behind a flag and also implement XEmbed for systems without dbus. I would be open to adding that to the bounty, though. Will leave some time for discussion first.. I have a laptop running Void that doesn't presently have dbus.. Just looked through the StatusNotifierItem specification and was reminded of how godawful it is. That specification is a goddamn dumpster fire.. $50 added to tray icons, bringing the total bounty for that up to $200. Went ahead and made it more comprehensive - it now includes both Xembed and StatusNotifierItem support.. Same donor, second donation - DPMS. $50 brings that bounty up to $70.. @jplatte yes. Got it :). $40 donation to ARM support, x11/wayland clipboard, drag and drop, layout save/restore. Reached out and offered the bounty.. The awardee of the xdg-shell bounty has chosen to re-donate it to touchscreen support.. (which brings that bounty up to $95). $10 from @hosaka goes to tray icons (now $210), thanks!. $20 from @DenialAdams, split evenly between modesetting (now $30) and pointer constraints (now $10). Thanks!. Looking at the donation backend, I seem to have missed one - $5 to touchscreen support (now $100).. Added a $10 donation to tray icons!. $200 donation to touchscreen support!. #926 would be a good start, but syncronizing the clipboard should probably be done in wlc/wlroots.. Aye.. That sounds like a great plan, @NBonaparte.. >$200 donation to touchscreen support!\nUpdate - the donor gave me permission to disclose his name. Many thanks to Mikael Voss for this donation!. @4e554c4c has implemented i3-style marks and chosen to redonate the bounty to #892. Thanks!. $20 donation added to layout save/restore. $200 donation split four ways\n\n50$ for DPMS (#541), 50$ for Touchscreen support (Cloudef/wlc#172), 50$ for #892 and 50$ for Tray icons\n\nThanks to Mikael Voss for his continuing generosity!. I have set up a Patreon page for supporting general maintenance of this and other projects. This doesn't supplant the bounty system - it supplements it. Bounties support specific features and Patreon supports overall development and maintenance (basically all of the work I do).\nhttps://patreon.com/sircmpwn\nIf you have questions feel free to shoot them my way. I would also sincerely appreciate it if you spread the word about this Patreon page. Thanks!. It's managed by wlc, in a manner of speaking. You should read up on how the clipboard works on X11 and on Wayland. I think @nyorain is working on this, by the way.. $10 to tray icons, now $280.. $20 to pointer constraints, now $30. Hmm, I didn't hear anything about that from Stripe. Can you reach out to them for help?. Yeah, at this point, probably.. Actually, let's hold off on that. These don't translate well into that. I will move the touchscreen bounty to wlroots, though.. I've decided that we're not going to support layout save/restore. It's too hacky even in i3 and I don't want to bring that kind of cruft into Sway. For those who have contributed to its bounty, please contact me via sir@cmpwn.com to arrange for the reallocation or return of your funds. If I don't hear from you in 30 days, I'll reallocate the funds at my discretion.. $10 relocated from layout restore to ARM support at donor request.. $10 from anonymous donor for per-window keyboard layouts.. $50 donation from an anonymous donor to \"the bounty of my choice\", which I've chosen to add to real-time video capture. I also redistributed the layout save/restore into beefing up several other bounties.. I have received a $500 donation from an anonymous donor, with this note:\n\nI'd like to fund a bounty to add keymapping support to wlroots that would allow for a key to be remapped to both a modifier and a keypress. Specifically, if held while pressing another key, Caps Lock would act as Ctrl. When pressed by itself, Caps Lock would act as Escape.\n\nThis is a pretty easy feature, so after some discussion the donor agreed to diversify it. I'm going to call the feature he requested \"xcape features in wlroots\" and stick $100 on that. The rest is going towards incentivizing development on wlroots+sway integration overall with a few new bounties that I think cover the harder parts of integration:\n\nWindow borders: $100\nFractional scaling: $100\nSelected Wayland protocol extensions*: $100\n\nI'm going to hang on to the last $100 for now and open up a bounty later on, when it becomes clear what more of the difficult work will be.\n* input-method, pointer-constraints, presentation-time, relative-pointer, idle_inhibit, xdg-output. +$22 to tray icons. +$20 to tray icons. +$100 to DPMS. Your link 404s, and if you read my comment more carefully, you'll notice that no bounty has actually been put towards that feature.. Okay, current list of claims is:\n\n@atomnuker: real time video capture\n@RyanDwyer: window borders\n@emersion: drag and drop\n@snaggen: DPMS\n\nIf anyone else wants to lay a claim, do so by December 1st. I'll be paying out bounties then. Anything unclaimed will be moved into the general fund for hardware purchases, conferenece attendance, etc.. Oh, and email me your PayPal details. sir@cmpwn.com. Alright - $475 in bounties have been paid out and $815 is left in the discretionary fund. Thanks to everyone who participated, both donating towards bounties and working on features to claim them. The bounty program is now closed.. This has nothing to do with sway. Whatever is setting those to \"no\" is at fault here.. Seems like an easy change, send a pull request?. What version of sway?. You aren't meant to use the rc once the stable release is out, FYI.\nThis issue is solved in 0.11. 0.11-rc2 is out if you'd like to try it.. Thanks!. I'm not sure this is practical for us to address.. A workaround:\nbindsym $mod+d exec dmenu_path | dmenu -p \"Run:\" -l 10 | xargs swaymsg exec. Sounds overengineered.. I don't want to wrap malloc/realloc/calloc. It's better for the code doing the allocations to handle failure intelligently. I certainly don't want to terminate if allocation fails.\nAll we have to do is redesign criteria.c a bit. criteria.c is a poorly designed regardless and I should have picked up on that during the initial review.. As a rule of thumb sway should never terminate in response to an error if it can avoid it. Terminating sway means all subprocesses are terminated and the user loses their work.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!. Added to README. How would we log anything that happens before the config file is read (a lot of things happen before the config file is read). No.. Duplicate of #992 . Border only needs to be rerendered on window size change or title updates AFAIK. The former requires us to reallocate the buffer anyway.. If we were able to upload the border to the GPU that would probably be quite a bit faster.. We can actually do that by just using GLES2 directly, but that is a little bit icky because wlc technically is supposed to abstract that API away from us. Would still merge a PR that reworked rendering to use GLES directly.. I'm saying sway could use GLES2 directly, not wlc. Currently sway renders borders with wlc_write_pixels, which is the only API we have for doing it through wlc even though it's not ideal. We could instead take wlc out of the loop and call GLES2 ourselves.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I've decided that we are just not going to support this i3 feature, ever.. It's too complicated and hacky for too little benefit. I don't like the design constraints it imposes upon sway.. No, I won't reconsider. However, you should be able to accomplish something similar with a script that starts up the software you need and arranges it appropriately via IPC.. >It's too complicated and hacky for too little benefit. I don't like the design constraints it imposes upon sway.\nThis is why it was dropped, not because, quote, \"I'm too lazy to implement something I personally do not use.\" You can use IPC to move a window to a specific workspace over IPC with criteria. You can split the window and move things around, too. The pid associated with a window is included in the IPC_GET_TREE output, along with a unique ID you can use for criteria.. To arrange three windows like this on an empty workspace:\nxz\nyz\n\n\nExecute the 3 processes and wait for their windows to appear (you'll be notified via IPC_EVENT_WINDOW)\nUse IPC_GET_TREE and find the container IDs which map to those pids\nIf they're not already all on the desired workspace, issue [con_id=$id] move to workspace $ws commands until they are\n[con_id=x] splitv\n[con_id=y] move left. >right, why there can't be a method that does exactly this if it is so easy?\n\nSee\n\nIt's too complicated and hacky for too little benefit. I don't like the design constraints it imposes upon sway.\n\nIf you want to write a script which implements i3 layout save/restore as an external program, you should do so, but no one is going to write it for you. This project is run by volunteers, and no one is volunteering to do this.\n\nAnd btw I'm inside of a bash script so how do I get an IPC notification?\n\nBy not being in a bash script. I would consider a patch, but I'm not interested in doing this myself and I'm worried about the complexity/value tradeoff.. No one gets assigned to issues. Just do it and send a patch.\nBut... this is something we need to do in wlroots now, not sway.. This is implemented :tada: . Select... the first line?. Can reproduce.. Please provide a core dump. Known issue with wlc. Wayland and x clipboards are not synced.. It's not really an issue that goes on anything. The solution requires an external daemon that should be a separate project.. Because sway isn't GNOME.. They don't design their software to be reusable in other projects. Knowing them it probably involves dbus too.. You should just implement it if you're that concerned about it. Opening a bug doesn't really change anything.. I suppose it could be implemented that way but a daemon could be reused for other compositors. Unlike GNOME, sway does strive to make reusable components ;). You're right that it should work OOTB, but remember sway is 0.x and not done.. Oh, I see what you mean. Well, we can automatically run the daemon.. :-1: I don't personally see this as a compatibility issue.. There is no primary clipboard in Wayland. Wayland is not x. There is just one clipboard.. You can be real demanding, you know. Implement it if you want it.. We have implemented this in the wlroots branch and it'll land in sway 1.0.. Try on the latest rc please.. Thanks!. This is complicated because X and Wayland raise window notifications differently.. Does anyone know what the protocol is for doing this on Wayland? Should be fairly easy to add the X stuff to wlc. Now that I think of that, all of the above should be done in wlc. Can you move the issue?. Does anyone know what the protocol is for doing this on Wayland? Should be fairly easy to add the X stuff to wlc. Now that I think of that, all of the above should be done in wlc. Can you move the issue?. A fix for this is in tomorrow's release.. A fix for this is in tomorrow's release.. Thanks!. Thanks!. That's not how the flag is meant to work afaik. The docs should probably be clarified.. That's not how the flag is meant to work afaik. The docs should probably be clarified.. Yes.. Yes.. Sounds like a wlc issue?. Sounds like a wlc issue?. Right, but wlc provides an abstraction that prevents us from having to use x-isms and if the second class is the more canonical one or something then wlc should return that. If not then it's just an incomparability we'll have to live with - I've always been okay with incompatability where x-isms are concerned.. Right, but wlc provides an abstraction that prevents us from having to use x-isms and if the second class is the more canonical one or something then wlc should return that. If not then it's just an incomparability we'll have to live with - I've always been okay with incompatability where x-isms are concerned.. Well, find out if it is and bring it up with them please.. Well, find out if it is and bring it up with them please.. Can we get a copy of your custom_statusbar script?. Can we get a copy of your custom_statusbar script?. But your status command is not i3status, it's custom_statusbar. What is custom_statusbar?. But your status command is not i3status, it's custom_statusbar. What is custom_statusbar?. Try dropping that line from your bar config.. Try dropping that line from your bar config.. Do you have a similar problem with orbment?. Do you have a similar problem with orbment?. Overall these changes look good. I like the refactored layout code. You should do a pass on this with the style guide in hand.\nThere's a lot of complexity I would like to see simplified if you can spare the time to go through everything and see if you can find ways to simplify it (optional).\nThese are some huge changes, so I'm not going to merge them right away. I'm going to start running them locally for a few days and see if they break any existing functionality. Would appreciate it if any Awesome users could try this and verify that it behaves appropriately as well.\nCould you make a wiki page explaining how to configure sway to behave like Awesome?. Overall these changes look good. I like the refactored layout code. You should do a pass on this with the style guide in hand.\nThere's a lot of complexity I would like to see simplified if you can spare the time to go through everything and see if you can find ways to simplify it (optional).\nThese are some huge changes, so I'm not going to merge them right away. I'm going to start running them locally for a few days and see if they break any existing functionality. Would appreciate it if any Awesome users could try this and verify that it behaves appropriately as well.\nCould you make a wiki page explaining how to configure sway to behave like Awesome?. Pushed a couple of fixup commits to your branch. Pushed a couple of fixup commits to your branch. Can you get the direction move commands to still work when using the auto layout?. Can you get the direction move commands to still work when using the auto layout?. Mouse resize does not work in auto layouts.\nWhen leaving an auto layout for an i3 layout, should we reset the incncols and such?. Mouse resize does not work in auto layouts.\nWhen leaving an auto layout for an i3 layout, should we reset the incncols and such?. Instead of layout incnmaster [n] how about layout auto [master|slave] [add|set] [n]. Instead of layout incnmaster [n] how about layout auto [master|slave] [add|set] [n]. How about making layout auto_left into layout auto left, then we can fold all auto-related layout commands into one sub-command and move it into a seperate function?. How about making layout auto_left into layout auto left, then we can fold all auto-related layout commands into one sub-command and move it into a seperate function?. Clarification - resizing with resize command does work fine in auto layouts, it was my error. Resizing with mouse does not.. Clarification - resizing with resize command does work fine in auto layouts, it was my error. Resizing with mouse does not.. Also, have you pitched this feature to i3?. Also, have you pitched this feature to i3?. >wrt the \"move\" commands, I had something that seemed sensible at first but since I don't really use \"layouts within layouts\" other than for testing I'm unsure the behavior is intuitive (I also need to check whether I accidently broke it at some point).\nEven for moving with the auto layout, that is. Nested layouts is something that needs to work (and so far as I can tell your changes don't introduce issues with that).\n\nincnmaster/incncol are just a reuse of the same commands in awesome. So it's simple enough to switch to a different syntax. However incncol isn't strictly equivalent to changing the number of slaves (the number of slaves is simply #children - #masters), ncol is the number of \"groups\" over which all the slaves are distributed.\n\nWe aren't trying to be compatible with Awesome configuration here (that'd be a fool's errand), but I'm okay with offering similar features like this PR does. We should stick to idiomatically i3 style commands.\n\nI haven't pitched this to i3 and actually hadn't really considered it (a friend of mine once was hoping to see some changes pushed into i3 to help with better KDE integration and these were rejected because they weren't in line with intended direction of development. Kind of a turn-off)\n\nWell, you'll never know if you don't try.. >wrt the \"move\" commands, I had something that seemed sensible at first but since I don't really use \"layouts within layouts\" other than for testing I'm unsure the behavior is intuitive (I also need to check whether I accidently broke it at some point).\nEven for moving with the auto layout, that is. Nested layouts is something that needs to work (and so far as I can tell your changes don't introduce issues with that).\n\nincnmaster/incncol are just a reuse of the same commands in awesome. So it's simple enough to switch to a different syntax. However incncol isn't strictly equivalent to changing the number of slaves (the number of slaves is simply #children - #masters), ncol is the number of \"groups\" over which all the slaves are distributed.\n\nWe aren't trying to be compatible with Awesome configuration here (that'd be a fool's errand), but I'm okay with offering similar features like this PR does. We should stick to idiomatically i3 style commands.\n\nI haven't pitched this to i3 and actually hadn't really considered it (a friend of mine once was hoping to see some changes pushed into i3 to help with better KDE integration and these were rejected because they weren't in line with intended direction of development. Kind of a turn-off)\n\nWell, you'll never know if you don't try.. Running swaygrab causes this branch to crash\n```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00000000004276b0 in ipc_json_describe_view (c=0x2d45a40, object=0x2d55170) at /home/sircmpwn/sources/sway/sway/ipc-json.c:158\n158     const char *layout = (c->parent->type == C_CONTAINER) ?\n(gdb) bt\n0  0x00000000004276b0 in ipc_json_describe_view (c=0x2d45a40, object=0x2d55170) at /home/sircmpwn/sources/sway/sway/ipc-json.c:158\n1  0x0000000000427d3d in ipc_json_describe_container (c=0x2d45a40) at /home/sircmpwn/sources/sway/sway/ipc-json.c:228\n2  0x000000000042893a in ipc_json_describe_container_recursive (c=0x2d45a40) at /home/sircmpwn/sources/sway/sway/ipc-json.c:393\n3  0x0000000000428ada in ipc_json_describe_container_recursive (c=0x649140 ) at /home/sircmpwn/sources/sway/sway/ipc-json.c:416\n4  0x0000000000429d45 in ipc_client_handle_command (client=0x2545b50) at /home/sircmpwn/sources/sway/sway/ipc-server.c:461\n5  0x0000000000429301 in ipc_client_handle_readable (client_fd=83, mask=1, data=0x2545b50) at /home/sircmpwn/sources/sway/sway/ipc-server.c:245\n6  0x00007fa4ea98cd32 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n7  0x00007fa4ea98b1da in wl_display_run () at /usr/lib/libwayland-server.so.0\n8  0x00007fa4eb27f6d7 in wlc_run () at /home/sircmpwn/sources/wlc/src/wlc.c:260\n9  0x0000000000430809 in main (argc=2, argv=0x7ffcb333adf8) at /home/sircmpwn/sources/sway/sway/main.c:347\n```\ncore dump available upon request. Running swaygrab causes this branch to crash\n```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00000000004276b0 in ipc_json_describe_view (c=0x2d45a40, object=0x2d55170) at /home/sircmpwn/sources/sway/sway/ipc-json.c:158\n158     const char *layout = (c->parent->type == C_CONTAINER) ?\n(gdb) bt\n0  0x00000000004276b0 in ipc_json_describe_view (c=0x2d45a40, object=0x2d55170) at /home/sircmpwn/sources/sway/sway/ipc-json.c:158\n1  0x0000000000427d3d in ipc_json_describe_container (c=0x2d45a40) at /home/sircmpwn/sources/sway/sway/ipc-json.c:228\n2  0x000000000042893a in ipc_json_describe_container_recursive (c=0x2d45a40) at /home/sircmpwn/sources/sway/sway/ipc-json.c:393\n3  0x0000000000428ada in ipc_json_describe_container_recursive (c=0x649140 ) at /home/sircmpwn/sources/sway/sway/ipc-json.c:416\n4  0x0000000000429d45 in ipc_client_handle_command (client=0x2545b50) at /home/sircmpwn/sources/sway/sway/ipc-server.c:461\n5  0x0000000000429301 in ipc_client_handle_readable (client_fd=83, mask=1, data=0x2545b50) at /home/sircmpwn/sources/sway/sway/ipc-server.c:245\n6  0x00007fa4ea98cd32 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n7  0x00007fa4ea98b1da in wl_display_run () at /usr/lib/libwayland-server.so.0\n8  0x00007fa4eb27f6d7 in wlc_run () at /home/sircmpwn/sources/wlc/src/wlc.c:260\n9  0x0000000000430809 in main (argc=2, argv=0x7ffcb333adf8) at /home/sircmpwn/sources/sway/sway/main.c:347\n```\ncore dump available upon request. Been running this for a while and haven't encountered any issues aside from the ones already mentioned. This should be good to merge once the outstanding concerns are resolved.. Been running this for a while and haven't encountered any issues aside from the ones already mentioned. This should be good to merge once the outstanding concerns are resolved.. Alright, I'll retest and rereview this when I have some time (probably today or tomorrow). I'll try to get some more info about the swaygrab issue as well (fwiw the failure was when trying to capture video).. Alright, I'll retest and rereview this when I have some time (probably today or tomorrow). I'll try to get some more info about the swaygrab issue as well (fwiw the failure was when trying to capture video).. I would also make your sample awesome config more awesome like instead of trying to keep sway's default keybindings intact. Your config doesn't actually even include sway's default keybindings anyway, the defaults are via your config (rather than being hardcoded into sway). Fix that in a seperate pull request if you like.. I would also make your sample awesome config more awesome like instead of trying to keep sway's default keybindings intact. Your config doesn't actually even include sway's default keybindings anyway, the defaults are via your config (rather than being hardcoded into sway). Fix that in a seperate pull request if you like.. Thanks for all the hard work!. Thanks for all the hard work!. Read the FAQ: https://github.com/SirCmpwn/sway/wiki#my-favorite-application-isnt-displayed-right-how-can-i-fix-this. Read the FAQ: https://github.com/SirCmpwn/sway/wiki#my-favorite-application-isnt-displayed-right-how-can-i-fix-this. This is a wlc issue. I've mentioned this to @Cloudef before but it seems there was never a GitHub issue made. Basically when the view under the cursor changes, wlc doesn't update the cursor surface as necessary. This is also noticable when switching between workspaces. Anyway, please report this to wlc instead.. This is a wlc issue. I've mentioned this to @Cloudef before but it seems there was never a GitHub issue made. Basically when the view under the cursor changes, wlc doesn't update the cursor surface as necessary. This is also noticable when switching between workspaces. Anyway, please report this to wlc instead.. Hold on, just read your issue properly. It doesn't grab the keyboard focus too? So you type your password into whatever was focused before? I can't reproduce that behavior.. Hold on, just read your issue properly. It doesn't grab the keyboard focus too? So you type your password into whatever was focused before? I can't reproduce that behavior.. Executive decision: postponing the following tasks indefinitely:\n\n[ ] Get surface-layers protocol upstreamed in wayland-protocols (discussion on wayland-devel)\n[ ] Update swaylock, swaybar, swaybg to use surface-layers protocol\n[ ] Implement swayslop based on surface-layers\n[ ] Implement orbital/weston's screenshooter protocol and update swaygrab to use it\n[ ] Discuss permission management protocols with wayland-devel\n[ ] Implement KDE's DPMS protocol and write a DPMS daemon\n[ ] Implement KDE's modesetting protocol and work with KDE to improve arandr-style client interfaces\n\nAnd these permenantly:\n\n[ ] Fix xdg-shell support in wlc\n[ ] https://github.com/SirCmpwn/sway/issues/571\n[ ] Implement modesetting in wlc\n[ ] Output rotation support in wlc\n\n0.12 will be a much smaller release, mostly to ship redshift and bugfixes on a reasonable timeframe. The primary goal of 0.13 will be to replace wlc with our own wayland compositor implementation.. 0.12-rc1 has been released, please test it!. 0.12-rc2 released, please test it! The following changes were included: 0.12-rc1...0.12-rc2. sway 0.12 released!. Thanks!. Thanks!. I'm not sure what your issue is but it has nothing to do with sway.. No thanks to lossy compression. Wouldn't mind lossless, though.. Via discussion in IRC, --lossy_transparent just loses RGB data from pixels where A = 0.. These criteria don't work because they don't make sense on Wayland. Not all features of i3 are directly translatable to Wayland. You'll have to find different ways of matching these windows.. Yours look like different bugs to me.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Are you absolutely certain root_container is null? I highly doubt it would be.. In fact it's impossible for root_container to be null. Not just unlikely, but impossible.. Like I said, it's impossible for it to be NULL. It's a global statically allocated swayc_t. It isn't even NULL during initialization, it has a constant address.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. https://github.com/SirCmpwn/sway/issues/759. This was fixed minutes ago https://github.com/SirCmpwn/sway/commit/7c636da8a307f5aa3aa5f38a71b0a4e28fd5564c. Send a pull request or wait until gcc 7 lands in Arch.. I don't think we need a parser generator for a grammar this simple.. No thanks.. How does putting the bar on top solve this problem at all?. I put my bar on top and I often accidentally scroll it there, since I use the scroll wheel to go through tabs. I don't like your line of thinking (which I've seen more frequently than I'd like in i3 dev) that assumes why the user is asking for a feature and hand-waves it away with an explanation that misses the point. Maybe the user just wants that feature, ya?. If we implemented it the way @zandrmartin has proposed (with bindsym for compatability reasons) what are the odds that a similar feature would make its way into i3?. I cannot reproduce this.. The config you linked sets new_window twice, the second time overwriting your new_window pixel 1.. Thanks!. We have that command implemented, but it's undocumented and it seems to be buggy. Both of those things should be fixed.. Can you share the output of swaymsg -t get_outputs?. How about a debug log?. Oh, nevermind. Your problem is you're assigning workspaces to e-DP1, when you should be using eDP-1.. You need to position them correctly with output [name] pos [x,y]. Read man 5 sway and the FAQ.. This is not really feasible, no.. I'm not interested in upstreaming Xwayland hidpi hacks. If you're itching to write some this code for this problem, contribute to Firefox on Wayland.. >a blurry web browser (the application many use >50% of the time) in 2018 is a complete non-starter, I hope we can at least agree on that.\nI'm sure we can agree on that. But we don't seem to agree that doing the correct fix is better than doing a bad hack. Contribute to Firefox and everyone wins.. Thanks!. Send pull requests for this sort of thing, not issues.. Thanks!. Thanks!. There's nothing officially planned for this but you're welcome to work on it if that's important to you.. This is planned for wlroots.. Thanks!. That seems like a good fix to me. Feel free to send it along.. This will be addressed when wlroots is completed and integrated with sway.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Your version of wlc is outdated.. lol\nhttps://github.com/Cloudef/wlc. I'm closing issues that are resolved by the yet-unreleased sway 1.0.gg. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. This will be addressed when wlroots is completed and integrated with sway.. I'm not opposed to the feature. It's just complicated and I'm not sure the increase in code complexity is justified.. Probably not that difficult.. I won't put it on the roadmap but I would accept a pull request.. No.. Did you reboot after switching drivers? You might also have to specify the card with WLC_DRM_DEVICE=card{0,1}. Please provide a debug log.. This has been discussed and there are not presently any plans to support this. Environment variables are the way to go for now.. Write a script?. Code style. Yes. Thanks!. No, but it's going to be implemented in wlroots.. >I bet you have put some deep thought on this, but let me ask the obvious question: Why you want to restructure the whole repository, and rename everything?\nI don't, really. I want to maintain the status quo. Right now the actual compositor of sway is being kept seperate, in wlc. If we write our own, I want to maintain that separation. We currently have some components that are compositor-like (such as protocol extensions, rendering window borders, etc). The bulk of the code is more analagous to a WM than to a compositor, and what little compository code we have is intermixed with it. If we're going to write an in-house compositor, I would prefer to move the handful of things that we currently have that belong there into it.\n\nDo not rename the actual compositor from sway to \"i3wm\" (it is a completely different implementation after all!) or change the repository structure\n\nThe compositor renders windows to the screen. Strictly speaking wlc is the compositor. I'm not renaming sway to i3wm, I would like to clearly separate i3wm behavior into a seperate logical unit from the compositor, which is just a good design decision. It makes sense to call that module i3wm because that's what it does, implement i3wm. It is an implementation of i3wm. That is, any behaviors in i3wm that you can't reproduce in sway are considered bugs in sway (always have been).\n\nThe thing is, that sway is already used as day-to-day wm by some of us, including me, and I'd rather have a smooth transition than having stopped development and waiting for an unknown time period until wlc is replaced.\n\nI use sway every day, too, I'm using it right now :) trust me, the transition will be careful, slow, and smooth. I don't intend to ship any release that causes major breakage. I don't want to halt development, but I also don't want to ship half-assed versions of the code. Though I want to avoid breaking changes, iif we have to make them, the time to do so is while doing 0.x releases. We'll be thankful for that attitude 10 years from now. I also don't intend to halt all development - only some features will be postponed. Most of the work that's already being done in Sway can continue, only the work that might have been being done in wlc will be stalled.\n\nAlso the renaming will probably confuse people.\n\nNo renaming is happening externally, this project is still called \"Sway\". How end-users use it isn't changing either. We're just talking about the internal organization of the codebase.\n\nPlus I find it awkward to have one repository, that will now have the code of a wlc-replacement, \"i3wm for wayland\", and possibly \"openbox for wayland\", tons of other tiling/simplistic wms, and to call all that together \"sway\" from now on.\n\nIf we get to the point that we are implementing more WMs here (which is a dubious prospect in the first place), they won't all live in one repository and we'll find a way for it to make sense.. Something else to mention: wlc abstracts some of wayland away from the user, as if it were designed to also be able to support some other display protocol. We should not do this with our thing, it will save us some headache and make it easier to do some things.. After some of the design discussion with way-cooler (even though way-cooler has decided to go another direction), I'm considering doing this out-of-tree and making it a generic library like wlc/swc/libweston, but with these design goals in mind. Thoughts?. Oh, I didn't realize Fireplace was a separate project.. Of course.. I hate GNUisms, they were added by mistake and anywhere you find them is a bug.. Here are my current thoughts. I want to better support @Timidger and others with similar use-cases, so instead of doing this in-tree we'll be making a new library that will fulfill a similar role as wlc, but with a different design. We'll call this library \"wlroots\" (or \"wlr\"). The design I have in mind is this:\nSeveral independent components (compositor, wayland server, xwayland, xdg-shell, etc) that the user can compose freely. No functionality will be mandatory, and the user can implement any functionality themselves (no necessary information like libinput pointers will be hidden). The user will have ownership over lots of things that wlc currently has ownership over, but stewardship of these resources will be assisted by wlroots. Notably, the user will own the wayland registry and will probably own the event loop.\nAssuming we like this design, I'm ready to get started in the next few weeks.. Keep an eye on this thread and contribute when the code starts happening.. Ever.. I have started working on wlroots. The repository is available here: https://github.com/SirCmpwn/wlroots\nI've started putting together the wayland backend (for running the compositor nested in another wayland session), since this should be the simplest backend to make.\nMy current plan is:\n\nFlesh out the wayland backend\nEstablish the wayland server\nBuild the renderer\n\nWe'll go from there.. libweston inherits all of the problems of weston, of which there are many. It also is run with a different philosophy than my approach and the changes I would want to make would be difficult to upstream.. wlroots is well underway - closing this.. Can you update wlc?. Can you share your sway and wlc versions?. Can you update wlc to 0.0.8 please?. >Now's the time to learn! It's not a hard language. At worst, if you don't think it's good enough for a PR (even though it probably is) you can change it for yourself.\nThis. The odds of someone else doing this for you are low and the odds of you succeeding if you try are high.. Just put it on several lines:\nexec command\nexec command\nexec command\nSway does quoting differently from i3. exec \"commands; more commands; even more commands\" will attempt to run /usr/bin/\"commands; more commands; even more commands\". Basically, this changes IPC policies to be per-executable (based on the process that's connecting to the socket). It also moves the configuration to /etc/sway/security.d/00-defaults. Users will be discouraged from touching this file so we can continue to update it with the latest recommended default security policy between releases, and they can override it by writing their own files in /etc/sway/security.d. Third party packages that integrate with sway and need special permissions (third party bars, lock screens, etc) can also ship a file for this directory to configure their permissions.. FreeBSD will have to take care of that themselves, presumably by shipping some rules in their package.. It might be best to break swaylock compatability and change how the scaling mode is specified so we can gain compatability with this existing tool, like we have compatability with i3-gaps. Does anyone have an opinion on this? Also, -r doesn't conflict with any existing options, why not implement it?. Yeah, you can probably just leave all of the appearance options out of the usage string. Maybe add a \"for more details see man swaylock\" or something.. Thanks!. This is covered by the upcoming surface-layers protocol.. I added it to the i3 feature support issue. In the future please bring such requests up in the comments of that issue.. Thanks!. Thanks!. eDP1 isn't a valid output name. Did you mean eDP-1? Check with swaymsg -t get_outputs.. Duplicate of #892 . Bring this up with wlc.. Can you share your bar config and command, and run your bar manually with swaybar -b bar-0 -d and capture its debug output?. Ouch. Can you upload the core dump?. Consult your distro's docs.. Consider it requested.. So far as I can tell, sway isn't doing anything wrong here. Can you compile cairo and pixman with debug symbols so we can dig into those to be sure?. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Macros defined by standard headers are fine.. Does i3 support move left 10px?. How about move left 10?. Thanks!. Just check the environment variable?. XKB_DEFAULT_LAYOUT?. The same one you have to set to specify the layout in the first place.. Oh. I don't know how to do that.. No, that's all done by libinput, not us.. Send a patch.. We should probably clear to a solid color if -c isn't specified.. Ah, I see. That makes more sense.. Oh, durr. There's a breaking change in the swaylock command line for 0.13 (you're building from master, so you get features for the next version). -s has been removed. Use --scaling.. Like i3, sway does not include a notification daemon. You need to use an external one like dunst.. Can you do which swaymsg?. Is that log your entire (original) session?. No, swaymsg does not run sway. But if you used sway to do IPC then your alias would of course cause problems.. I mean if you do sway -t get_outputs instead of swaymsg -t get_outputs, it would cause issues.. How is that related?. Try quoting them and make sure all of the commands that reference the ws are consistent.. Yeah, we should probably join the args together when possible. Can leave this open until that's done.. Good for you, but this is a bug tracker, not a place to announce things like that.. Does the \"output\" limitation match i3?. Well, w/e. It probably works for most cases. We can change it if someone complains about some incompatability later on.. Thanks!. Seems that this only happens when a window fullscreens itself - not via the fullscreen command.. I'd rather break #1101 than let this stay broken. Will leave it up to @4e554c4c to sort it out.. Well, we missed a pretty major bug for 0.12. We'll do a minimum of 2 rc's, and I've already started to ship X.Y.Z releases.\nRegarding testing, looking for volunteers to read over the rc's and test anything that changed.. You might need instance instead of class now.. Can you provide a video of how this works? I don't really understand it.. You describe enough to implement it, maybe, but not enough to understand it.. Dupe https://github.com/SirCmpwn/sway/issues/1104. Provide a full debug log please.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!. Did you try reading the FAQ https://github.com/SirCmpwn/sway/wiki#faq. try WLC_DRM_DEVICE=card1 or whatever's appropriate. None of these subdirectories use WLC.... The actual problem then seems to be that \"include/util.h\" includes wlc/wlc.h without actually needing it.. I'm suggesting your remove them and update your pull request.. Thanks!. https://github.com/SirCmpwn/sway/issues/571. Thanks!. Hmm. It could be a security risk if we don't know what type of node it is.. Can you associate the email address you committed with to your GitHub account?. Thanks!. >where $screen2 is HDMI-A-2\nBut the config line you pasted uses $screen3. Wait so are you or are you not trying to move the workspace at runtime. Can you provide a debug log?. Can you produce a debug log please?. Thanks!. Thanks!. Don't bother. We've already confirmed that this isn't a problem with wlroots.. This will be addressed when wlroots is completed and integrated with sway.. xset is an x tool, not a wayland tool. See #541 . Thanks!. How big is the image when decoded to rgba?.     convert /usr/share/backgrounds/f25/default/normalish/f25.png rgba:rgba.dump\n    du -h rgba.dump. I'd rather not leave this open because I don't really think it's worth it. The complexity increase isn't justified for a minimal gain.. Do other compositors have the same problem? Other wlc-based compositors?. Investigate it. Complaining isn't going to help.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. The SWAYSOCK variable.. Good catch.. Is the sway binary setuid? Do you have the correct caps enabled for it? Are you in the input group?. I'm not sure what's necessary for grsec compatability. Run getcap /usr/bin/sway to check your caps, and see instructions in the README for setting them correctly.. Alright. See the README for instructions on setting them up.. Sorry, the readme doesn't mention another cap you need: cap_sys_tty_config. https://forums.gentoo.org/viewtopic-t-1005392-start-0.html\n?. @Hummer12007 do you remember the fix for this issue that gentoo users had to use?. Dupe of https://github.com/SirCmpwn/sway/issues/571. Debug it and send a patch.. It wasn't closed.... Yeah, addressing this is in scope for wlroots.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Debug log please. Start sway and press some keybindings, then provide a log of that. There is no quit command, the command is exit. I don't see you using that command in the log. I think sway's good to go, you just need to install the necessary software or configure it to use something else.. By \"try to move it\" do you mean with the move command or by dragging it there?. Double check that your monitors are correctly aligned in the config (with the output pos command). You may have to include the scale factor, I'm not sure off the top of my head.. Looks good at first glance. Will review more in depth tomorrow. Nice work, thanks!. Found an issue:\n\nshow_marks on\nmark a\nshow_marks off\nshow_marks on\n\nThe marks do not re-appear.. Thanks!. Right, so this change is eligible for a bounty. Please follow up via sir@cmpwn.com to claim it, or you can redonate it to another bounty if you wish.. Seems reasonable to add a sway_assert there.. I was just thinking about this the other day, thanks for working on it!. The switch to current_container is a good idea, but it almost certain to create some bugs. Please carefully check to make sure you've found every case.\nLooks good overall. Let me know when you've fixed the issues you mentioned and I'll take a closer look.. Please do, yes. But we can address that separately. Thanks!. Thanks!. Thanks!. Been running your command in a loop for a while, CPU usage seems nominal. Something else is probably the cause.. Interesting, maybe the fds aren't closed properly.. Does https://github.com/SirCmpwn/sway/pull/1153 fix the problem for you?. Ah, good point.. Thanks!. Thanks!. https://github.com/Cloudef/wlc/issues/181. Report to wlc. See #2 . Display managers are generally unsupported because none of the significant contributors use one. It's up to you to debug this and figure it out.. Thanks!. Attempt to reproduce this on other Wayland compositors, please.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Unlikely.. 0.13-rc1 has been released, please test it. Working on the changelog now.. This release contains 102 changes from 12 contributors. New features include support for i3's marks feature, \"immediate\" criteria commands, and experimental support for the nvidia proprietary driver. Many small improvements to i3 compatibility and many bugfixes are also included.\nFor nvidia users, nouveau is still strongly recommended. The proprietary driver mostly works, but is unsupported - do not report bugs unless you attach a patch. Unless your hardware is unsupported by nouveau, you should continue using nouveau. Using sway with the proprietary drivers requires additional configuration - sway will output the necessary information if you attempt it without a correct configuration.\nPackage maintainers: please update your packages to use -DVERSION=major.minor.patch. Normally the version is sourced from git, but if you build from a tarball then you'll have to specify it manually.\nChanges\n\nThe new_window and new_float commands are deprecated in favor of default_border and default_floating_border. A similar change is expected from i3. (@zandrmartin - #1105)\n444 is now an acceptable file mode for security configs (@jnsaff - #1117)\nAny executable that is not owned by root will receive the default security policy regardless of any additional configured permissions (@JerziKaminsky)\n\nNew features\n\ni3-style marks are now supported (@4e554c4c - #1145 & #1155)\nYou may now configure the color of swaylock UI elements via the command line (@4e554c4c - #1078)\nFloating containers may now be moved with the move command (@4e554c4c - #1092)\nswaymsg pretty-prints its output if stdout is a tty (@SirCmpwn - #1146)\n[criteria] command has been implemented (@4e554c4c - #1149)\nnvidia proprietary driver support has been implemented in wlc (@vially - https://github.com/Cloudef/wlc/pull/245) and sway was updated as necessary (@SirCmpwn - #1147)\nSecurity policies can now refer to symlinked executables (@JerziKaminsky - #1173)\nVersion string can now be specified at build time (@snoack - #1194)\n\nBugs fixed\n\nMissing swaylock security settings were added (@SirCmpwn - 21ad45b622eb1fc2c68d1036fd9763a37fec668b)\n-Werror issues on the latest gcc have been corrected (@Fale - #1086)\nThe codebase is more POSIXly correct and does not rely on GNUisms (@SirCmpwn - 9aed9d9)\nIssues building against a local copy of wlc has been fixed (@snoack - #1115)\nA problem with keyboard code in sway's Wayland clients was fixed (@zandrmartin - #1121)\nFocus could be stolen from fullscreen windows under some conditions (@zandrmartin - #1126)\nSpaces are now permitted in workspace names (@4e554c4c - #1101)\nIssues with workspace assignment have been corrected (@zandrmartin - #1105)\nMan page typos fixed (@johnchen902 - #1113)\nCrashiness with move [next|prev] was fixed (@oranenj - #1130)\nRegular expressions are now handled with PCRE for better i3 compatibility (@ascent12 - #1151)\nDangling file descriptors on IPC client termination was fixed (@SirCmpwn, @ascent12 - #1153)\nlibcap is now explicitly required in our CMakeLists.txt (@JerziKaminsky - #1150)\nmove [to] scratchpad did not support the \"to\" syntax (@wasamasa - #1180)\nWindows leaving the scratchpad are now sized to match i3 behavior (@wasamasa - #1181)\nSpecifying fewer than 5 colors with client.* now matches i3 behavior (@SirCmpwn - #1201). Thanks for pointing that out, @4e554c4c.. 0.13-rc2 would be released today, but there are no changes. I don't feel comfortable releasing 0.13 yet so we're going to delay rc2 another week.. 0.13-rc3 is out, please test it: https://github.com/SirCmpwn/sway/releases/tag/0.13-rc3. Changelog updated.. 0.13.0 has been released: https://github.com/SirCmpwn/sway/releases/tag/0.13.0. cc @Hummer12007 seems like libinput headers are missing. Distro problems are not sway problems.. oi. To be honest, no. Configuring it this way is a hacky workaround and you shouldn't expect it to work forever.. The long term plan is currently integer-only. Non-integral scaling is a non-starter, it's not a concept that really makes sense to implement or use.. Probably something specific to each GUI toolkit you use. Maybe something with fontconfig. Not sure.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Nice work!\n\n\nThis still isn't exactly like it is in i3, the majorgit fetch upstream difference being that there is always some space allocated to the bar, rather than having it display over the top of the workspace. I'm not entirely sure how to resolve this. It also doesn't fade in or out.\n\nPanel layout handling is a bit complicated. The way the bar is positioned is via the desktop-shell extension, which allows the swaybar client to indicate that it is a desktop panel. Swaybar first becomes a panel, then positions itself on screen (top, bottom, left, right) here. Sway handles the first request here, and the second request here. When it calls arrange_windows, the panel is positioned on screen and windows are offset to avoid occulding that space (this is the behavior that you need to change).\nPanel geometry is calculated by this function and applied by these functions, which are invoked upon creation of the panel view, which happens here. Currently this is the only place the panel geometry is assigned and it's left that way for the duration of the session. Panels are not added to the main layout tree, so they aren't rearranged during arrange_windows.\nHowever, arrange_windows is responsible for moving other windows out of the panel's way. Basically, arrange_windows_r is a recursive function that does most of the work in calculating the tree's on-screen layout. It's recursively invoked for each child of each container, and is called with the space that child has been allocated within the parent. The child then arranges itself within this space. For example, L_HORIZ is a horizontal split container so it will allocate its children areas tiled horizontally and recurse into them for each such area. Views will simply assign the wayland window geometry to the allocated space. Each kind of layout will handle this differently. Accomodating for panels is done in the output layout here. This just changes the geometry allocated to the output's children before recursing. Makes sense?\nThe solution is probably to switch from having swaybar use the desktop-shell extension to become a panel and instead using a custom wayland extension. This extension should probably have three functions:\n\nIndicate that a surface should become a panel\nIndicate where to position the panel (top, bottom, left, right)\nToggle the panel's visibility\n\nSimply making the panel transparent isn't going to cut it once you start placing it on top of other windows, because it will still receive mouse events. You need to have sway make it disappear in the compositor - Sway has a visibility toggle function somewhere that you can use. The process for making a wayland protocol extension is fairly straightforward:\n\nAdd an XML file describing your protocol to this directory\nAdd it to the relevant CMakeListst.txt\nCreate a compositor implementation of the interface in extensions.c and register a global for it\n\nThis whole process might seem intimidating, but it should be easier than you think.. >Would it be possible/easier to implement the bar as a floating window that moves across workspaces rather than writing a wayland extension?\nNo,I don't think so.. >Would it makes sense to also contact wayland upstream to try and get a compatible feature into a new version of the desktop-shell protocol? this isn't sway-specific, and although wayland protocols are great way for extending functionality, it's also a big risk for fragmentation when it comes to common functionality being exposed as a custom protocol for every wayland compositor. Someone will want to create a dock application that talks to more than one compositor.\nNo. This is just a stop-gap measure until we implement the surface-layers protocol later on.\n\nI'm also very new to wayland, but isn't that what input regions are for?\n\nFair point, but I'm not sure we have support for that.. postponed until we have wlroots, rather, which is coming soon. You're welcome to pitch this feature upstream to desktop-shell but don't hold your breath.. @calvinkosmatka what's an ETA on this? I'm getting ready to ship 0.13-rc1 - would you like me to wait for you so it lands in 0.13, or should this be postponed to 0.14?. Sway does not currently have an equivalent to i3-input. Try a dmenu-based solution instead. Marks are also not available in 0.12.*, they will be shipping in the upcoming sway 0.13.. Nope.. Thanks!. This is the intended behavior. Making /usr/bin/swaybar a symlink into your build directory is a very silly thing to do.. symlinks are fine, but symlinks into your development directory, which is presumably under /home and readable only by you, is weird and not something you should do.\nWe read /proc/[pid]/exe to find the location of the executable asking for special permissions, and match that with the rules in your config. The kernel follows symlinks before loading executables into memory and populating /proc/[pid]/exe. Nothing we can do about that.. >not even just checking if the permit target is a symlink when parsing the file and resolving them them to the target bin?\nWe could do that but I don't really care tbh. Send a PR if you want this. However, this brings up a good point: we should check that the file being given permissions is owned by root.. Before I consider this I think we also need to enforce that the program that ends up being executed is owned by root and not world-writable.. If you can write to a program that has security policies, then you can just overwrite it with a program whose behavior is more sinister.. >Sure but if you can't write to the program, why go through all the effort to sandbox it ? defense in depth I guess.\nA number of reasons. First, because we can limit what the program can access in the first place, so you can give limited permissions to mixed trust programs. More importantly, though, if we didn't have access controls at all then you could leverage bash or sed or something similar to arbitrarily work around restrictions.. - Renamed validate_ipc_target to validate_ipc_program_target\n  to emphasize the fact that it should be called with\n  a \"program target\" not a \"policy target\". This has\n  the unfortunate side-effect that errors report the \"program\n  target\" at fault, not the \"policy target\" as it appears in\n  the config file. This is necessary in order to avoid the\n  possible race condition, described below.\nI'm not really a huge fan of this distinction, I think it's not very important. It would be better to just resolve symlinks on policy creation and call it a day. No one is going to carry around references to unresolved paths.. Also, for development purposes it probably makes sense not to enforce that the binary is owned by root for debug builds. Useful for i.e. hacking on swaybar.. Looks good aside from minor nits, will merge once resolved. Thanks!. Thanks!. Well, I was going to help this guy, but on second thought I think I won't.. Alright, well, .xinitrc is not used by sway. Set the env before starting sway.. Thanks!. I can't reproduce this. Is it still an issue?. We just do key parsing with xkbcommon. I don't intend to change that.. Do you still experience this?. Thanks!. Thanks!. No thanks to L_WARN. The other change is fine. Can you rebase?. We generally just log warnings with L_INFO or L_ERROR if they're severe. Not necessary to add another thing.. Well, I suppose I would be more open to L_WARN if you went about the codebase and changed everything that should use it (but currently does not). Should be done separately though.. Really? Doesn't seem that bad to me.. Well, everything that should use the new log level and doesn't becomes a bug. So without doing all the work you're basically introducing a few dozen bugs.. If you just have a trash bin, then everything you throw out is already in the right place. If you add a recycle bin, however, lots of items in your trash bin are suddenly in the wrong place.\nMost of the logging in place is pretty clear. If you don't want to put in the work then that's fine, but it really wouldn't be very difficult. An hour's work at worst.. >ipc config option shouldn't fail if target doesn't exist (don't refuse to create a an ipc just because the file doesn't exist. Borks startup)\nWhy? In what situation does this occur? Seems to incur extra complexity to handle an unlikely scenario imo.\nA lot of changes seem to stem from that. I don't like the idea of pushing validation deeper into runtime, I'd rather do it all on startup - give warnings for bad configurations straight away and simplify checks later on.. We probably shouldn't abort, but we shouldn't defer validation. We should just ignore the policy and print a warning.. >Policy allocators now store the result of validate_ipc_target() under policy->validated.\n\ncmd_permit/_reject use policy->validated to make decisions.\n\nThese changes are ones that make me concerned. By the time you obtain a reference to a policy, that policy should have already been validated.. >Anyway, right now if validation fails the allocator tells the caller it's out of memory. That's wrong. This PR fixes it. That's it.\nReturning NULL doesn't signal OOM. It just means it didn't work. It would set errno = ENOMEM if we wanted to specify the specific failure, but that's not important here.. I still haven't looked over the code, but the only change I think is necessary is to avoid aborting if the target doesn't exist.. Why does the caller need to tell the difference?. Thanks!. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Since you've narrowed down the problem, how about testing a fix and sending a patch?. It should probably be changed to emit the event just once, then, if you can sort it out.. Produce a full debug log, please.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Log isn't particularly useful for crashes. Coredumps or consistent repro steps are better.. \"Me too\" isn't helpful unless you include a coredump.. You should be able to attach it to a github comment.. ```\n(gdb) bt\n0  0x00007f45fcc2b5b9 in wl_resource_post_event () at /usr/lib/libwayland-server.so.0\n1  0x00007f45f8b1b1c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n2  0x00007f45f8b1ac2a in ffi_call () at /usr/lib/libffi.so.6\n3  0x00007f45fcc2fffe in  () at /usr/lib/libwayland-server.so.0\n4  0x00007f45fcc2c8d7 in  () at /usr/lib/libwayland-server.so.0\n5  0x00007f45fcc2e232 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n6  0x00007f45fcc2ca7a in wl_display_run () at /usr/lib/libwayland-server.so.0\n7  0x00007f45fd51bc8c in pool_buffer_remove_move.lto_priv.65 (pb=0x3e8, index=) at /tmp/yaourt-tmp-sircmpwn/aur-wlc-git/src/wlc/lib/chck/chck/pool/pool.c:194\n8  0x0000000000433846 in main (argc=1, argv=0x7ffcd1a50868) at /home/sircmpwn/sources/sway/sway/main.c:399\n```\nOh boy.. You're removing information here, we still need the full git describe string for off-release builds.. You're right, I misread it. Thanks!. Added to #2. @karroffel mind testing this?. Can some Debian/Ubuntu users try this guy's PPA out and let me know how well it works?. I don't really care if it runs under X. That's a debugging feature. What matters is if it runs with the DRM backend.. It might. Can you elaborate?. You're right, none of that is relevant to the PPA. @snoack feel free to put your PPA on the wiki. Perhaps it would be wise to let multiple people have push access to your PPA, @snoack?. Can I get a debug log?. (for sway itself). No, I want to see sway -d. Did sway even start up here? I need a log that shows you reproducing the problem.. That looks like an unrelated issue. That looks like sway can't start at all.. Work with me here dude, don't half ass it or I can't help you.. See the FAQ.. I guess try running sway with LD_LIBRARY_PATH=/usr/local/lib. You'll have to use cmake -DLD_LIBRARY_PATH=/usr/local/lib for this to work. Or you could install wlc to /usr.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. https://github.com/SirCmpwn/sway/wiki/Sway-without-systemd-on-Arch-Linux. Beats me, then.. I have a few systems that run sway without logind.. @zandrmartin points out that child border is the one you tend to see most of the time. Which seems weird to me but w/e. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I have a Thinkpad X200 and middle button scroll works fine.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Hmm, interestingly, no \"Found input device ...\" is shown in your logs.. Thanks!. RTFM. Thanks!. Thanks!. Can we have a debug log, please?. wlc doesn't support modesetting. Specifying a resolution will use the\ndisplay's preferred mode and scale the buffer to meet it.\n. Correct.\n. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Use -vo=opengl --opengl-backend=wayland. See also https://github.com/mpv-player/mpv/pull/4384. Initial impression: I like it.\n\nlist_t is a bit of a misleading name: it's a dynamic array, not a linked list. Perhaps renaming this type would be appropriate.\n\nIt's not called llist_t.\n\nIn order for this code to be portable and correct, it needs to use a feature introduced in C11 (alignas).\n\nThis is probably okay. Let me think about it. I don't think we lose most of the benefits this PR comes with if we put the data buffer on the heap, do we? Could also just handle alignment manually.\n\nYou can't \"share\" a list_t in multiple places, and one of them might realloc the structure when something is added. I also don't think this happens anywhere in sway, but I'm not certain. Pointers to pointers still work, though.\n\nPutting the buffer on the heap also fixes this. It also makes sizeof(list_t) not misleading, which I prefer (I'm not keen on dynamically sized structs in general).\n\nlist_free removed: Since it's now a single allocation, we just need to use free().\n\nI still prefer this for the sake of making it cheaper to change later.\n\nlist_foreach now is a macro which acts like a normal for-loop. I know how much @SirCmpwn doesn't like using macros, but I believe this one adds a lot of useful utility. It can allow you to not have to define a simple callback function that you're just going to use in one place.\n\nNope.\nAlso, the build failed.. FTR you can (and we already do in many places) just write a for loop yourself to avoid making the extra function.. >I was REALLY just trying to optimise the crap out of the cache by removing as much indirection as I could. Using a heap buffer would remove the alignof requirement, and remove some of drawbacks. However, from my (still very basic) testing, this extra layer of indirection is about 25% slower than this implementation. It depends how far you want to go for the sake of speed.\nWell, list_t isn't the bottleneck in sway's performance. I won't sacrifice convenience and simplicity to fix a non-issue.\n\nWith this new implementation, writing such a loop would be a much more of a hassle, hence the macro.\n\nI don't think it's worth it. Still a no.. Cool, thanks.. Looks much better. Just addressing semantics now.. Looks good. Will merge once everything has been updated to use it correctly.. No problem, take your time. Ping me if you want any help migrating things.. Looks good. Going to start running this for a while and merge it in a week or so. I encourage others to run this patch as well and submit feedback.. This good to go?. Thanks!. You put the status_command into your color config. Move it to the bar config.. Please read the FAQ.. Once this is ready to roll, yes: https://github.com/Cloudef/wlc/pull/265\nNot until then. Also, the nvidia proprietary driver is unsupported, YMMV.. https://github.com/SirCmpwn/sway/wiki#keyboard-layout. Read /etc/sway/security.d/00-defaults. Write a commands block similar to the one in this file to /etc/sway/security.d/01-exit-cmd and change the exit permissions to binding ipc. This will allow it to be used from either a binding or from IPC, which is what swaymsg uses. If you do this, however, any program with IPC access or the ability to run swaymsg will be able to exit your sway session without your consent.. It depends on how you configure your system. You could run software as other users that has limited IPC access, or can't run sway-msg.. Dupe of #873. Basically, ibus is really X-specific and it'll be difficult for Sway to support it - at least until we implement the relevant protocols (and even then, it'll take some work). I'm able to type in Japanese fairly well - \u65e5\u672c\u8a9e\u3067\u3044\u3044\u3067\u3059, but it requires some patience and guesswork tbh.. Use ibus-daemon -drx. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. How did you install sway?. You'll need to remove the caps and setuid it. Majaro is stupid, lots of Arch packages just won't work on it. You need to compile it youself or better yet, get a distro that isn't dogshit.. You need to remove the caps as well. Pay attention.. I don't really care to help a Manjaro user troubleshoot. That distro is a dumpster fire and I don't have time to help you diagnose it. You got yourself into this mess, get yourself out of it. Manjaro is even worse than Gentoo at stability, and with a worse community to boot.. Duplicate https://github.com/SirCmpwn/sway/issues/1142. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. I'll get to it if I have time, but this isn't exactly that important in the grand scheme of things. I encourage you to dig into the code and see if you can find out the issue yourself if you want it done faster.. So look into it.. No, I want you to debug it and send a patch.. C isn't difficult. Anyone can learn it.. I would if you sent me a patch.. I bet you could!. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. This is pretty strange. I'm not sure what the issue is. That GCC command looks fine.. I think this is a downstream issue.. @marcoms perhaps.. Please don't increase XOPEN_SOURCE globally, but rather only in files where the newer functions are required.. Thanks!. Thanks!. I think I would rather add an environment variable or a flag like SWAYGRAB_FFMPEG_OPTS or --ffmpeg-opts. I think I would rather add an environment variable or a flag like SWAYGRAB_FFMPEG_OPTS or --ffmpeg-opts. I disagree. Depending on your setup there could be multiple ways of capturing audio, each different, plus there'd have to be driver-specific ways of picking the appropriate device and things like mixing in desktop audio with microphone audio... it's not going to happen.. I disagree. Depending on your setup there could be multiple ways of capturing audio, each different, plus there'd have to be driver-specific ways of picking the appropriate device and things like mixing in desktop audio with microphone audio... it's not going to happen.. One commit ;;. One commit ;_;. Problems I noticed while testing:\n\nSNI works quite well, nice job. The exception is that I can't seem to select context menu items that are occluded by other windows. Does the compositor need to do something special to let them keep focus? (i.e. open konversation's context menu and try to use any option that is displayed on top of another window, such as the konversation main window). Clicking outside of the context menu also doesn't seem to close it, and should. Making sure the context menu windows are getting focus should fix both of these issues.\n\nxembed doesn't work at all for me. The issues with it need to be ironed out or it needs to be removed before I'm comfortable merging this.. Problems I noticed while testing:\n\n\nSNI works quite well, nice job. The exception is that I can't seem to select context menu items that are occluded by other windows. Does the compositor need to do something special to let them keep focus? (i.e. open konversation's context menu and try to use any option that is displayed on top of another window, such as the konversation main window). Clicking outside of the context menu also doesn't seem to close it, and should. Making sure the context menu windows are getting focus should fix both of these issues.\n\nxembed doesn't work at all for me. The issues with it need to be ironed out or it needs to be removed before I'm comfortable merging this.. I also pushed a commit fixing up the cairo blending operator so that partially transparent icons wouldn't overwrite the background.. I also pushed a commit fixing up the cairo blending operator so that partially transparent icons wouldn't overwrite the background.. Status?. Status?. Should I hold off on rc1 for this?. Should I hold off on rc1 for this?. I'm okay with shipping SNI support alone, we already get plenty of stupid support requets and I doubt this will add much. I'll have a look at this in the morning and see if I can clean it up and still feel good about it.. I'm okay with shipping SNI support alone, we already get plenty of stupid support requets and I doubt this will add much. I'll have a look at this in the morning and see if I can clean it up and still feel good about it.. Spent some time poking on this. Results: focus is working good enough for now. Also I figured out what was wrong with the firefox address bar dropdown and fixed that. Going to include this in the next release and maybe iterate on it a bit during rc's to fix the edge cases.. Spent some time poking on this. Results: focus is working good enough for now. Also I figured out what was wrong with the firefox address bar dropdown and fixed that. Going to include this in the next release and maybe iterate on it a bit during rc's to fix the edge cases.. Yep.. Yep.. Thanks!. Thanks!. Thanks!. Thanks!. I have reverted this and it's not going to land in 0.14 unless you get it fixed within the next week. It was the cause of #1253 . I have reverted this and it's not going to land in 0.14 unless you get it fixed within the next week. It was the cause of #1253 . It's not immediately apparent to me how this caused #1253, but there's enough information there to reproduce it so we'll see.. It's not immediately apparent to me how this caused #1253, but there's enough information there to reproduce it so we'll see.. Changelog:\n\nThis is a relatively small release with 53 changes from 12 contributors. New features include support for tray icons and support for KDE's Wayland extension for client-side border negotiation. Several smaller features and many bug fixes are also included. Updates to wlc also improve touchscreen support and fix the old extra cursor gdm issue.\nTray icons are now supported via SNI, and Xembed support is in-progress and planned for a future release. Tray icons for programs using the new specification should work correctly, but older programs using Xembed will not. Border negotiation requries participation from the client - a patch for GTK+ is available here. Reminder to self: update wiki page on removing GTK borders\nYou may have heard that we're replacing wlc, a library that does a lot of low-level plumbing work for Sway. I'm happy to announce that our replacement project, wlroots, is progressing at a great pace - largely thanks to financial support from Nyantec, who offered to sponsor me to work full time on Sway for a while. Additional support has come from supporters of my new Patreon page - many thanks! Dramatic improvements to Sway will be possible when wlroots is ready. Look forward to it!\nChanges\n\nlibdbus is now an optional dependency for tray icon support (package maintainers, take note)\nNon-logind systems now report configuration errors more verbosely (@Hummer12007 - #1218)\nasciidoc is now optional; without it man pages will not be built (@SirCmpwn - cf4ea4c)\n\nNew Features\n\nSNI tray icon support in swaybar (@4e554c4c - #1234)\nKDE's server decorations protocol is now supported (@SirCmpwn - #1199)\nMouse button bindings (@janza - #1209)\ni3's no_focus command is now supported (@SirCmpwn - #1196)\n\nBugs fixed\n\nSpecifying fewer than 5 colors during configuration did not work (@SirCmpwn - #1201)\nlayout auto with no additional arguments no longer crashes Sway (@zandrmartin - #1204)\nIssues with the Firefox address bar dropdown have been fixed (@SirCmpwn - d158e18308e91f0c4ae81ac86976b0540e5efd84)\nNested child processes of swaybar are now killed correctly (@ykrivopalov - #1236)\nMinor documentation fixes via @4e554c4c, @zandrmartin, @wdbw, @her001 \n@johalun fixed some FreeBSD issues and is now the FreeBSD point of contact (#1232)\nUse-after-free bug fixed in bindsym (@tobiasblass - #1270)\nFail gracefully when security policies cannot be allocated (@Hummer12007 - #1255). Changelog:\n\nThis is a relatively small release with 53 changes from 12 contributors. New features include support for tray icons and support for KDE's Wayland extension for client-side border negotiation. Several smaller features and many bug fixes are also included. Updates to wlc also improve touchscreen support and fix the old extra cursor gdm issue.\nTray icons are now supported via SNI, and Xembed support is in-progress and planned for a future release. Tray icons for programs using the new specification should work correctly, but older programs using Xembed will not. Border negotiation requries participation from the client - a patch for GTK+ is available here. Reminder to self: update wiki page on removing GTK borders\nYou may have heard that we're replacing wlc, a library that does a lot of low-level plumbing work for Sway. I'm happy to announce that our replacement project, wlroots, is progressing at a great pace - largely thanks to financial support from Nyantec, who offered to sponsor me to work full time on Sway for a while. Additional support has come from supporters of my new Patreon page - many thanks! Dramatic improvements to Sway will be possible when wlroots is ready. Look forward to it!\nChanges\n\nlibdbus is now an optional dependency for tray icon support (package maintainers, take note)\nNon-logind systems now report configuration errors more verbosely (@Hummer12007 - #1218)\nasciidoc is now optional; without it man pages will not be built (@SirCmpwn - cf4ea4c)\n\nNew Features\n\nSNI tray icon support in swaybar (@4e554c4c - #1234)\nKDE's server decorations protocol is now supported (@SirCmpwn - #1199)\nMouse button bindings (@janza - #1209)\ni3's no_focus command is now supported (@SirCmpwn - #1196)\n\nBugs fixed\n\nSpecifying fewer than 5 colors during configuration did not work (@SirCmpwn - #1201)\nlayout auto with no additional arguments no longer crashes Sway (@zandrmartin - #1204)\nIssues with the Firefox address bar dropdown have been fixed (@SirCmpwn - d158e18308e91f0c4ae81ac86976b0540e5efd84)\nNested child processes of swaybar are now killed correctly (@ykrivopalov - #1236)\nMinor documentation fixes via @4e554c4c, @zandrmartin, @wdbw, @her001 \n@johalun fixed some FreeBSD issues and is now the FreeBSD point of contact (#1232)\nUse-after-free bug fixed in bindsym (@tobiasblass - #1270)\nFail gracefully when security policies cannot be allocated (@Hummer12007 - #1255). Some proof of concept work has been done with Xembed - it definitely works, it just requires some finageling. I don't really know much about AppIndicator.. Some proof of concept work has been done with Xembed - it definitely works, it just requires some finageling. I don't really know much about AppIndicator.. 0.14-rc2\n\nContains only documentation fixes, but I'd still like testing to continue for another week at the least.. 0.14-rc2\nContains only documentation fixes, but I'd still like testing to continue for another week at the least.. 0.14-rc3 is out. Contains 3 bug fixes. Please test.. 0.14-rc3 is out. Contains 3 bug fixes. Please test.. Symptoms typical of an incorrect security configuration. Check the log, it sounds like swaybg doesn't have permission to become the background.. Symptoms typical of an incorrect security configuration. Check the log, it sounds like swaybg doesn't have permission to become the background.. Meaning /etc/sway/security.d/*. Meaning /etc/sway/security.d/*. man 7 sway-security. man 7 sway-security. And swaybg is indeed installed to that location, is owned by root, and is not a symlink?. And swaybg is indeed installed to that location, is owned by root, and is not a symlink?. And sway is reading from /usr/local/etc/sway/?. And sway is reading from /usr/local/etc/sway/?. Aha.. Aha.. Alright, I'm just going to hold off rc4 until then and ship 0.14 a week after whenever that happens to land.. Alright, I'm just going to hold off rc4 until then and ship 0.14 a week after whenever that happens to land.. I don't want to break FreeBSD. We should ship a different configuration on FreeBSD that enables more security features by default for all clients.. I don't want to break FreeBSD. We should ship a different configuration on FreeBSD that enables more security features by default for all clients.. Yeah, something like 10-freebsd is what I was suggesting. Can you add a file like it (with a comment in the file explaining its necessity) that's installed on FreeBSD systems?\n\nThere seem to be a consensus that getting the PID via socket and using that for security is a bad thing. The PID can have changed and is being used by another process so there's a race condition (although time frame for that to happen is minimal...)\n\nMeh, we can assume that a process isn't giving away its i3 IPC handles willy nilly and that even if it did we could probably trust it to not be stupid enough to give it to a process that shouldn't have access to its security permissions.. Yeah, something like 10-freebsd is what I was suggesting. Can you add a file like it (with a comment in the file explaining its necessity) that's installed on FreeBSD systems?\n\nThere seem to be a consensus that getting the PID via socket and using that for security is a bad thing. The PID can have changed and is being used by another process so there's a race condition (although time frame for that to happen is minimal...)\n\nMeh, we can assume that a process isn't giving away its i3 IPC handles willy nilly and that even if it did we could probably trust it to not be stupid enough to give it to a process that shouldn't have access to its security permissions.. >Yeah, in Sway there shouldn't be any problems. But imagine someone hanging on to a pid of a crashed client, could have some unwanted consequences if the pid is reused by another program..\nThis seems unlikely, if not impossible. The file descriptor certainly would not remain valid between the two programs even if they shared a pid.\n\nThis will be tricky to solve without having the clients sending pid or binary path info to the compositor :(\n\nThis would not work because the clients can lie.. >Yeah, in Sway there shouldn't be any problems. But imagine someone hanging on to a pid of a crashed client, could have some unwanted consequences if the pid is reused by another program..\nThis seems unlikely, if not impossible. The file descriptor certainly would not remain valid between the two programs even if they shared a pid.\n\nThis will be tricky to solve without having the clients sending pid or binary path info to the compositor :(\n\nThis would not work because the clients can lie.. 0.14-rc4: https://github.com/SirCmpwn/sway/releases/tag/0.14-rc4. 0.14-rc4: https://github.com/SirCmpwn/sway/releases/tag/0.14-rc4. rc5: https://github.com/SirCmpwn/sway/releases/tag/0.14-rc5\nPlease actually test this one guys, we're already way behind schedule.. Sway 0.14.0 has been released:\nhttps://github.com/SirCmpwn/sway/releases/tag/0.14.0. Thanks!. Does this work on X11? This is almost certainly not sway's problem.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Can you run other Wayland compositors like Weston?. Is there anything unusual about your setup? Not using systemd? How did you install sway?. Instead use sway and wlc from the official repos. Don't use -git.. wlc as well?. Beats me, then. Try rolling back any recent changes you've made one at a time to narrow down what could have caused the issue.. Document this in the man page too. Yes, thanks. Thanks!. Use something to this effect.\nexport XKB_DEFAULT_LAYOUT=de,us\nexport XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle\nsway\nRead the XKB manual.. The plan is to support this in wlroots. The best place to help out wouldn't be keyboard related, but on wlroots as a whole (because sway won't switch until every feature is done, so it won't benefit from the features you want until then).\nTo help, pick something to do from here: https://github.com/SirCmpwn/wlroots/issues/9\nWe collaborate over IRC in #sway on freenode, be there.. No. Set them before you start sway if you want.. Report your bugs to Qt. I'm not going to add Qt-specific code to Sway.. Thanks!. swaygrab is a weekend hack. Please do.. I think that would be an interesting project, but it should be a third party one. I don't want to do that upstream.. No, that's already on the roadmap and won't be possible until wlroots is ready.. Build failure, please address. Thank you!. Multi-GPU support is planned for wlroots, if possible, but will not be attempted earlier than that.. Paging @Hummer12007, looks like stupid gentoo bullshit to me. Well, @Stryder0, did you compile without swaylock?. This is a known limitation of wlc and will be fixed when we switch to wlroots.. Thanks!. Your config link 404s for me.. Also, reload is known to cause this sometimes, has not be thoroughly investigated.. Give me more files. This isn't enough to reproduce your setup with.. How about ~/.i3/i3pystatus or any config it might have or... give me a break man, include as much detail as you can.. I can reproduce this. The issue is unrelated to yours, @Biohazard50. Looking into it now.. This is pretty weird. When I run i3status.py alone, it prints the expected output to the terminal. But when I run i3status.py | tee ~/test with swaybar as my status_command, only {\"version\": 1, \"click_events\": true} is written to ~/test.. 387eca1b29cbc6f497e2cb26a0bff0b06b50b6a1. This looks right, but I don't want to close #926 until we have the ability to read from the clipboard, too.. Looks good, thanks! Think you could squash the commits for me?. Thanks!. Can you clarify that this is because sway was compiled without gdk_pixbuf support, and that other formats could be available if you were to recompile?. Looks good, but could you narrow the scope of the \"extra\" message and just use a new #ifdef block? Also, How about this message: \"Sway was compiled without gdk_pixbuf support, which means only PNG images are supported. This is the likely cause.\"\nThanks for your patience with all of these requests.. I like it. Thanks!. Please provide more details about how you are starting sway, as well as a debug log.. Nevermind, LightDM doesn't support Wayland. Use something else, or better yet just run sway from your login tty.. Thanks!. To further clarify the intention of this, glibc is way too stringent with these and in many cases we just don't give a shit about i.e. ignoring the return value of write. And gcc fails to implement the generally-accepted means of explicitly silencing this on a case-by-case basis with (void)write(...).. I'm not interested in this at the moment.. Pointers, in this case. Thanks!. iiuc *timer is right.. cc @4e554c4c . Can you retarget this against master and rebase? Will fix the build and I'll cherry-pick your commit into 0.14.. Bump. 0.14-rc4 is going to be 2 days late now, I'd like to get this change in.. Noted issues aside, looks good.. >Targets imported from x11 like STRING or UTF8_STRING will currently be encoded in base64 but they are no real wayland targets so should not matter in the end (everything that does not begin with \"text/\" is base64 encoded).\nWe should special case these and treat them like text/plain (or text/plain;charset=utf-8). bump. Sounds good. Take your time, I'm just checking in.. 1 second is a bit strict. It could be like a video clip or something. Maybe 30 seconds is better? Will review the code tonight.. Signal an error with a standard IPC error response.. Also... not gonna make you implement this but you might consider writing partial JSON blobs and base64 encoding the data from the user on the fly, so that we can avoid copying it all to memory.. Well, non-text clipboard data is not uncommon at all. Maybe among hackers it's less common but the typical user may find themselves using it a lot more often. Graphics peeps too.. I mean, if you want to get any data other than text data out of the clipboard, you need to encode it in a form that can be used in JSON.. I can work on finishing this feature up if you're burned out on it.. I can work on finishing this feature up if you're burned out on it.. Let's merge this for now and make it more sophisticated later.. Let's merge this for now and make it more sophisticated later.. Yes, once wlroots is complete.. Yes, once wlroots is complete.. Thanks!. Thanks!. \"Me too\" ad nauseam isn't helpful. \"Here's a patch\" is helpful.. \"Me too\" ad nauseam isn't helpful. \"Here's a patch\" is helpful.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Mouse capture remains to be implemented.. Mouse capture remains to be implemented.. I use a script and an output line like this:\noutput * bg `wallpaper` fill. I use [a script](https://git.sr.ht/~sircmpwn/dotfiles/tree/bin/wallpaper) and an output line like this:\n\noutput * bg `wallpaper` fill. Thanks!. Thanks!. Thanks!. Thanks!. Thanks @choppa70 . Thanks @choppa70 . Yeah, wicd-gtk is broken here, but swaybar definitely should not crash.. Yeah, wicd-gtk is broken here, but swaybar definitely should not crash.. I don't intend to support wayland-wall. We have a better strategy via [sway-protocols](https://github.com/SirCmpwn/sway-protocols) that we'll use to support more use-cases more elegantly when the time comes.. I don't intend to support wayland-wall. We have a better strategy via [sway-protocols](https://github.com/SirCmpwn/sway-protocols) that we'll use to support more use-cases more elegantly when the time comes.. Correct.. Correct.. dmenu itself works fine on sway.. dmenu itself works fine on sway.. If it's going to use wayland-wall, no. Read the issue for our plans and speak with rofi if you are concerned about their support - we are are not rofi.. If it's going to use wayland-wall, no. Read the issue for our plans and speak with rofi if you are concerned about their support - we are are not rofi.. Thanks!. Thanks!. `man sway-input`. `man sway-input`. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!. Thanks!. Update wlc to master.. Update wlc to master.. A fix for that will be available in rc5. [This PR](https://github.com/SirCmpwn/sway/pull/1272). A fix for that will be available in rc5. [This PR](https://github.com/SirCmpwn/sway/pull/1272). See #1280. See #1280. Thanks!. Thanks!. Seems additional work is required to make this work correctly.. Seems additional work is required to make this work correctly.. Thanks!. Thanks!. This worked for a brief time while the tabbed layout was being developed for sway 1.0, it'd be cool to flesh it out properly.. This worked for a brief time while the tabbed layout was being developed for sway 1.0, it'd be cool to flesh it out properly.. Command security *should* work fine on FreeBSD, best to leave that alone.. Command security *should* work fine on FreeBSD, best to leave that alone.. Thanks!. Thanks!. No, this is not possible.. No, this is not possible.. Can I see more detail? What's your config file look like?. This should work but note that because of the way the scratchpad works in sway, it'll probably be *super* buggy with any command other than scratchpad show.. Sorry, I need to rewrite the whole scratchpad system to be less complex. It's not ideal \"first contribution\" work.. Sure! Why don't you [hop on IRC](http://webchat.freenode.net/?channels=sway-devel&uio=d4) to discuss it?. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. The error message tells you what to do -_-. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. tyvm. #267. They're probably doing something weird. I've never heard of such a font.. You cannot use setxkbmap to change the layout in Sway, gotta configure it at runtime. Provide log please.. No. According to your log, XKB_DEFAULT_VARIANT is unset.. Provide a log, please.. Odd. What happens when you position eDP-1 at 3840?. (I know it's disabled). Yeah, it looks like it's reassigning them new automatic positions, maybe?. Not like this will make it worse. Give it a shot.. Yeah that's fine.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Well, don't do that, then.. Thanks!. That is easily one of the all-time worst bug reports I've ever received.. Where?. Much better. I'm not putting it on the roadmap for 0.15 but you're more than welcome to debug it and submit a patch within the release window. The problem likely lies within wlc.. Yes, we've been working on that.. **NOTICE**\n\nDevelopment on new features is going to freeze after the release of 0.15-rc1 on Monday, 2017-10-9. After that, only bugfixes will be shipped until we finish integrating with wlroots. Features for ancillary programs like swaybar will still be considered, so long as they don't require new features in the compositor.\nI will plan to address the todo list mentioned in the topic of this thread, but I may be too busy to get to all of it and rc1 will ship on Monday. Help from anyone in addressing these goals is very much appreciated.\nThis is your last chance to get new features into sway for a while. Contribute!. Sway 0.15 includes 130 changes from 28 contributors. New features include scriptable clipboard support and raspberry pi support, but this release is mostly for bug fixes. This is also the last release of sway that will be based on wlc - for more information, see my blog post on the matter.\nThere will be no 0.16 - the next release will be 1.0.\nChanges\n\nDefault wallpapers are now in /usr/share/backgrounds/sway (@her001 - #1238)\nCompiling man pages (and asciidoc) is now optional (@SirCmpwn - 23a1e94)\nREADME translated into 9 more languages (too many to thank!)\nWe've split our IRC channels into separate support and development channels\n\nNew Features\n\nImproved clipboard support via swaymsg commands (@nyorain - #1254)\nswaylock indicator size is now configurable (@4e554c4c - #1294)\nRaspberry Pi support (@refacto - #1327)\nswaybar now supports scroll events over IPC (@johnae - #1368)\n\nBugs Fixed\n\nswaylock manual fixes (@her001 - #1244)\nTray icon theme parsing support handles getline failure (@Hummer12007 - #1251)\nFix tray when dbus is not present (@SirCmpwn, @tobiasblass #1285, @4e554c4c - #1316)\nCorrectly handle empty security policies (@Hummer12007 - #1255)\nFix zsh completion for swaylock (@refacto - #1258)\nFreeBSD compatability fixes (@johalun - #1265, #1271, #1288)\nUse after free in bindsym fixed (@tobiasblass - #1270)\nPointer accuracy bugs fixed via wlc (@ascent12 - #1272)\nswaybar crash with invalid SNI names fixed (@4e554c4c - #1276)\nRace condition in kill command fixed (@4e554c4c - #1309)\nIPC now uses nonblocking I/O, fixes #892 (@ilyaluk - #1313)\nswaygrab no longer uses the shell to execute subprocesses (@clarcharr - #1247, @Ongy - #1351)\nAn issue with variables set via set $xyz was fixed (@karjonas - #1287)\nA number of bugs with the output command were fixed (@4e554c4c - #1382)\nFixed move to workspaces with spaces in their names (@lbonn - #1384)\nSkip dotfiles when loading security configuration (@lbonn - #1385)\n\nSeveral issues with the scratchpad were fixed (@SirCmpwn - 5ecedc7, 46e5aea). I intend to fix at least the following issues before rc1:\n\n\n[x] https://github.com/swaywm/sway/issues/1217\n\n[x] https://github.com/swaywm/sway/issues/1363\n[x] https://github.com/swaywm/sway/issues/1369. There will be many alpha and beta releases before 1.0 on wlroots. It's going to be a while before we actually ship it.. 0.15-rc1 is out, please test it!. Blog post, please read. Note, there was a stupid bug in 0.15-rc1. You probably want to run from the tip of the 0.15 branch instead. In fact, maybe we should make that our rc testing policy in general.... 0.15-rc2, please test. 0.15-rc3, please test. rc4 test test test. Sway 0.15.0 has been released: https://github.com/swaywm/sway/releases/tag/0.15.0. Yeah, this needs to be fixed at the sway level, though I'm not opposed to throttling swaybar too.. I figured that might work. Can you rollback the other changes?. Well, throttling is fine. I'm still not on board with ipc_single_command_no_response.. Do you also have to deal with E_AGAIN?. grep for nonblock in the read(3) man page, it's pretty straightforward. Are you going to update this PR?. Sounds good. Many thanks!. Chill out, and give me specific reproduction steps.. >bash $ >> mupdf \" file.pdf\" & ; opens in \"workspace 4\" automatically.\n\nThis does not happen in i3 unless you configure it to. Let me see your Sway config.. Can you get a stack trace from the core dump?. We don't work very hard to maintain musl support. Are you interested in maintaining it?. Grab a core dump and open it with gdb.. What do you see in swaymsg -t get_tree? Also provide a debug log.. Another issue that's probably musl related: https://github.com/SirCmpwn/sway/issues/1305\nWe need a volunteer to maintain musl support.. Can you reproduce this on any other Wayland compositors?. If you can repro on Way Cooler, then it's unlikely to be a Sway bug.. You should be able to do that now, it'll automatically use the wayland backend.. LGTM, will test it later today.. Thanks!. I agree. Can you reproduce this on other compositors or under xorg?. Use the exact same XKB settings configured through the same environment variables on weston.. Thanks!. Thanks, added it to the list.. I wrote up some TL guidelines in the OP, please review them.. Standard \"this language is not English so here's how to get support\" README subsection:\n\n[Language] help\n[Username] provides support in [language] on IRC and GitHub in [timezone].\n[Information regarding the status of the translation and a link to this issue]\n\nIn Japanese I'm going to write:\n\n\u65e5\u672c\u8a9e\u52a9\u3051\nSirCmpwn\u306fIRC\u3068GitHub\u3067UTC-4\u306b\u65e5\u672c\u8a9e\u52a9\u3051\u4eba\u3060\u3002\n\u65e5\u672c\u8a9e\u7ffb\u8a33\u306f\u5b8c\u6210\u3058\u3083\u306a\u3044\u3001\u6b63\u3057\u304f\u306a\u3044\u3002\u30d1\u30c3\u30c1\u306f\u4e0e\u3048\u3063\u305f\u304f\u3060\u3055\u3044\u3002\n\nPlease include similar information in your translations.. Sorry for frequent updates to these guidelines, i18n is a WIP.. I pushed a branch with some support code for localizing man pages:\nhttps://github.com/SirCmpwn/sway/tree/localized-manpages\nUnfortunately I've run into an issue with how fucking shit asciidoc is. I think I'm just going to write a new man page authoring tool this weekend.. Take a look at the branch.. There is one: https://github.com/SirCmpwn/sway/blob/localized-manpages/sway/man/sway.1.ja.txt\nAnd I'll require changes to docs to sync them across all man pages when merging PRs in the future, even if they just put in the english docs.. (and I will cc the relevant language maintainer on that PR). Is pt_BR intelligible to pt_PT? We should aim to kill two birds with one stone.. I have written a man page generator which I intend to switch sway to soon. It's still missing a couple of important features (tables, mainly), but it's looking pretty good.\nhttps://git.sr.ht/~sircmpwn/scdoc/\nOnce it's done we should be able to translate man pages.. Great. I'll be looking into doing i18n for the man pages within a month or two.. Merci! I will review this in detail tomorrow.. Please add details on availability of support in French. Can you volunteer to provide support in the IRC channel for French users? Either way, mention it in the README.. In the Japanese readme I said \"\u79c1\u306e\u540d\u524d\u306fSirCmpwn\u3067\u3059\u3002\u52a9\u3051\u306e\u306fIRC\u3068GitHub\u3067\u65e5\u672c\u8a9e\u3067\u9811\u5f35\u308a\u307e\u3059\", which introduces my IRC handle and says I will do my best to help in Japanese on IRC or GitHub. I also said later, regarding the config file: \u82f1\u8a9e\u306f\u96e3\u3057\u3044\u306e\u3070IRC\u3067\u52a9\u3051\u306e\u3092\u5c0b\u306d\u308b\u3002\ufffc\u65e5\u672c\u8a9e\u52a9\u3051\u306e\u306fUTC-4\u3002Which means \"ask in IRC if you have trouble with the english config file, japanese help is available in the UTC-4 timezone\".. Can you sync with master and update the links at the top of the english readme as well?. I have updated the i18n guidelines here, please review: https://github.com/SirCmpwn/sway/issues/1318. The guidelines have been updated once again - sorry! These should be sufficient: https://github.com/SirCmpwn/sway/issues/1318.. Sorry - please move it to immediately following the donation information.. Merci!. Please add details on availability of support in German. Can you volunteer to provide support in the IRC channel for German users? Either way, mention it in the README.\n. In the Japanese readme I said \"\u79c1\u306e\u540d\u524d\u306fSirCmpwn\u3067\u3059\u3002\u52a9\u3051\u306e\u306fIRC\u3068GitHub\u3067\u65e5\u672c\u8a9e\u3067\u9811\u5f35\u308a\u307e\u3059\", which introduces my IRC handle and says I will do my best to help in Japanese on IRC or GitHub. I also said later, regarding the config file: \u82f1\u8a9e\u306f\u96e3\u3057\u3044\u306e\u3070IRC\u3067\u52a9\u3051\u306e\u3092\u5c0b\u306d\u308b\u3002\ufffc\u65e5\u672c\u8a9e\u52a9\u3051\u306e\u306fUTC-4\u3002Which means \"ask in IRC if you have trouble with the english config file, japanese help is available in the UTC-4 timezone\".. Can you sync with master and update the links at the top of each README?. Are you able to idle in the channel?. Cool! What's your nick?. Danke!. No worries. Maybe you can read over their PR and leave some feedback?. Danke!. \u0414\u044f\u043a\u0443\u044e!. >In the README, clarify the situation for speakers of that language who wish to get support. If you can volunteer to hang out in IRC and triage GitHub issues, mention your username and timezone.\nAlso, can you move translation status up and make it the first heading after the screenshot?. This still needs to clarify how to get support in Greek - I clarified in the guidelines the language to use.. \u0395\u03c5\u03c7\u03b1\u03c1\u03b9\u03c3\u03c4\u03ce!. Thanks!. Gotta wait until it ships in a stable version and has a couple weeks of user testing. Need an incentive for you to stick around and help fix bugs!. Danke!. Double check this matches the latest English readme in terms of information content and read through the updated TL guidelines - it looks like you're good on the latter but does your last section match the new English section?. @jdiez17 @hobarrera can we get one of these squared away please?. I would hold off on this one, we will probably be ditching asciidoc and I don't want you to invest a lot of effort that will have to be redone.. Thanks!. I took care of it, thanks!. Try building with the tray disabled.. Report it there, but don't get your hopes up.. Yeah, we're going to hold off on this.. You need to follow the i18n guidelines. Chill the fuck out, @SleepyMario. We aren't in a hurry here and you need to stop badgering him.. Maybe we'll get a Dutch translation from someone who is less of an asshole.. The nvidia proprietary driver is unsupported. Good luck.. It works for some people, but if you can't get it to work yourself then no help for you is to be found here.. No problem, glad you got it working.. LGTM, aside from a few style issues and those unrelated changes. Can you pull them into a separate PR?. Thanks!. Thanks! Double check the guidelines - are you missing a section with TL status & Czech support info?. And yeah, let's wait on the man pages.. Thanks, but not quite! You also need to provide in the section about czech support information about the current status of translation and a link to https://github.com/SirCmpwn/sway/issues/1318 indicating how to help.. Please test with wlroots as well: https://github.com/SirCmpwn/wlroots\nRun the examples and see if you can reproduce this there.. Can you file a wlroots ticket with what you know about DP MST support?. https://github.com/SirCmpwn/sway/issues/646\nPlease search for existing issues before submitting new ones.. Thanks! Can you also add a link to the main readme?. obrigado!. Thank you! You are missing a few things, though, please read the guidelines (https://github.com/SirCmpwn/sway/issues/1318).. Thanks! I don't actually see you in the IRC channel - can you actually commit to providing support there? No worries either way.. Great! One more change - add a link to your README in the English README.md file.. \u0421\u043f\u0430\u0441\u0438\u0431\u043e!. GPU?. I can reproduce this with\n19: PCI 02.0: 0300 VGA compatible controller (VGA)              \n  [Created at pci.378]\n  Unique ID: _Znp.j5duo6BuBmF\n  SysFS ID: /devices/pci0000:00/0000:00:02.0\n  SysFS BusID: 0000:00:02.0\n  Hardware Class: graphics card\n  Model: \"Intel Mobile 4 Series Chipset Integrated Graphics Controller\"\n  Vendor: pci 0x8086 \"Intel Corporation\"\n  Device: pci 0x2a42 \"Mobile 4 Series Chipset Integrated Graphics Controller\"\n  SubVendor: pci 0x17aa \"Lenovo\"\n  SubDevice: pci 0x20e4 \n  Revision: 0x07\n  Driver: \"i915\"\n  Driver Modules: \"i915\"\n  Memory Range: 0xf2000000-0xf23fffff (rw,non-prefetchable)\n  Memory Range: 0xd0000000-0xdfffffff (ro,non-prefetchable)\n  I/O Ports: 0x1800-0x1807 (rw)\n  Memory Range: 0x000c0000-0x000dffff (rw,non-prefetchable,disabled)\n  IRQ: 16 (72887 events)\n  I/O Port: 0x00 (rw)\n  Module Alias: \"pci:v00008086d00002A42sv000017AAsd000020E4bc03sc00i00\"\n  Driver Info #0:\n    Driver Status: i915 is active\n    Driver Activation Cmd: \"modprobe i915\"\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\nI'm tempted to pin this issue on either wlc or the graphics driver.. I can reproduce this with\n19: PCI 02.0: 0300 VGA compatible controller (VGA)              \n  [Created at pci.378]\n  Unique ID: _Znp.j5duo6BuBmF\n  SysFS ID: /devices/pci0000:00/0000:00:02.0\n  SysFS BusID: 0000:00:02.0\n  Hardware Class: graphics card\n  Model: \"Intel Mobile 4 Series Chipset Integrated Graphics Controller\"\n  Vendor: pci 0x8086 \"Intel Corporation\"\n  Device: pci 0x2a42 \"Mobile 4 Series Chipset Integrated Graphics Controller\"\n  SubVendor: pci 0x17aa \"Lenovo\"\n  SubDevice: pci 0x20e4 \n  Revision: 0x07\n  Driver: \"i915\"\n  Driver Modules: \"i915\"\n  Memory Range: 0xf2000000-0xf23fffff (rw,non-prefetchable)\n  Memory Range: 0xd0000000-0xdfffffff (ro,non-prefetchable)\n  I/O Ports: 0x1800-0x1807 (rw)\n  Memory Range: 0x000c0000-0x000dffff (rw,non-prefetchable,disabled)\n  IRQ: 16 (72887 events)\n  I/O Port: 0x00 (rw)\n  Module Alias: \"pci:v00008086d00002A42sv000017AAsd000020E4bc03sc00i00\"\n  Driver Info #0:\n    Driver Status: i915 is active\n    Driver Activation Cmd: \"modprobe i915\"\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\nI'm tempted to pin this issue on either wlc or the graphics driver.. See if you can reproduce it on older kernels. If you can, start doing a bisect. Try older wlc builds if that doesn't work. Maybe things like libdrm as well. Narrow down the problem.. See if you can reproduce it on older kernels. If you can, start doing a bisect. Try older wlc builds if that doesn't work. Maybe things like libdrm as well. Narrow down the problem.. How about on other non-wlc Wayland compositors?. How about on other non-wlc Wayland compositors?. This has been confirmed to not affect wlroots, so we'll probably just sit tight.. This has been confirmed to not affect wlroots, so we'll probably just sit tight.. See the previous comment.. See the previous comment.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues\nYour ticket is vague and confusing.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues\nYour ticket is vague and confusing.. wat. wat. #646. #646. I don't understand your question.. I don't understand your question.. If you just do this at your terminal, what happens:\nswaymsg 'workspace test; exec termite'. If you just do this at your terminal, what happens:\nswaymsg 'workspace test; exec termite'. How about swaymsg 'workspace \"1:\uf209General\"; exec urxvt -e vim' from the terminal?. How about swaymsg 'workspace \"1:\uf209General\"; exec urxvt -e vim' from the terminal?. Can you test https://github.com/SirCmpwn/sway/pull/1351 please?. Can you test https://github.com/SirCmpwn/sway/pull/1351 please?. Cheers. Cheers. Thanks!. Thanks!. This isn't enough information to reproduce your setup locally.. This isn't enough information to reproduce your setup locally.. i3status.conf and the contents of /tmp/weather.txt. i3status.conf and the contents of /tmp/weather.txt. It's probably a libinput issue. Try the wlroots touch screen demo and tell me how that goes.. It's probably a libinput issue. Try the wlroots touch screen demo and tell me how that goes.. >It's probably a libinput issue. Try the wlroots touch screen demo and tell me how that goes.\n. No, run that example from a tty like you would run sway.. The cat is precisely centered under your finger, right?. Then you can expect your touchscreen problems to go away with wlroots.. Then you can expect your touchscreen problems to go away with wlroots.. Move the bg line after your other output configs.. Move the bg line after your other output configs.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Looks like you have enough information to put a patch together?. Looks like you have enough information to put a patch together?. I'll be getting a bugfix release out fairly soon, and will address this in it.. I'll be getting a bugfix release out fairly soon, and will address this in it.. Wait, if it's a bug with json-c, can Fedora ship a patched version?. Wait, if it's a bug with json-c, can Fedora ship a patched version?. Next person inconvenienced by it will backport the patch to that branch.. Next person inconvenienced by it will backport the patch to that branch.. Remove all caps and add setuid. It's important that you remove all caps if you use setuid.. Remove all caps and add setuid. It's important that you remove all caps if you use setuid.. And it's setuid? If so I'll need a full, unadulterated/uninterpreted debug log.. And it's setuid? If so I'll need a full, unadulterated/uninterpreted debug log.. This is weird. Are you running it on musl? Do you have a coredump?. This is weird. Are you running it on musl? Do you have a coredump?. Can you compile in debug mode (with symbols and no optimizations) and attach to that coredump to gdb, then provide a stacktrace?. Looks like this was fixed in wlc, per the discussion on the way-cooler ticket.. Currently only icons using StatusNotifierItem are supported. Support for legacy Xembed icons will come later.. Beats me. I would just use nmtui from a terminal.. Are you in the video group? (or whatever group is appropriate for reading /dev/dri/card0 on your machine). And /dev/dri/card0 is in that group and g+rw?\nFull debug log please.. You're using open source drivers, right? Do you have anything in /dev/dri? Do you have /dev/drm?. zgrep CONFIG_DRM= /proc/config.gz. Well, beats me. It's not a Sway problem. Ask your distro support why you don't have /dev/drm. Maybe check dmesg for drm related errors?. #541. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01\u79c1\u306e\u65e5\u672c\u8a9e\u304c\u3060\u3081\u3001\u3053\u306ePR\u306f\u3068\u3066\u3082\u3044\u3044\u3067\u3059 :). I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Better reproduction steps, please.. It's in the FAQ. I'm not adding workarounds for specific shitty UI toolkits.. Output of swaygrab -rt get_workspaces?. Sorry, swaymsg -rt get_workspaces. Well, if it happens again, reopen this and give me that command again.. Yep, that's weird. Can you get me a Sway core dump? gcore -o sway.core [sway's pid]. Note this contains all of Sway's memory so if you have anything sensitive in your config or window titles or such, be mindful of that.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Why did you open a new issue? Go back to the other one.. There's bemenu but it has some issues.. That is swc-specific, does not work on Sway.. i3-dmenu-desktop works on sway.. Yeah I think rofi works fine on sway master.. Thanks for the patch!\n\nnow one probably has to put the pointer over the workspace buttons for it to work.\n\nThis isn't going to work - can you fix this?. Yes, that looks much better, thanks!. If xembedproxy was supported we wouldn't have said it wasn't -_-. Do those actually support SNI? Try konversation.. >    09/25/17 22:05:21 - [main.c:52] [wlc] unable to lock lockfile /run/user/1000/wayland-0.lock, maybe another compositor is running\nAre you running another compositor?. I'm not sure how the Fedora package works. Can you try building Sway from source and see if you can reproduce the issue? Post the cmake output as well.. Looks like this is complicated and not worth it.. That's not important. That is an unsupported means of running Sway.. No. I will reiterate: running Sway inside of X is not supported.. Use Intel and we'll figure out your Radeon problem. Are you using the open source drivers? How are you specifying the discrete card?. Uh... huh. That's weird.\nWhen using the Intel card, what are the contents of /dev/dri?. Try running sway as:\nWLC_DRM_DEVICE=card1 sway. Well, I don't know what your weird EFI thing does. But the kernel exposes both of your GPUs in /dev/dri so we just instructed Sway to use the other one.. This is pretty old, I cannot reproduce this today.. Dupe https://github.com/SirCmpwn/sway/issues/1344. Needs more context. What were you doing when you encountered this problem?. Which SDL program? Detailed steps to reproduce, please.. Alright, fair enough. This ticket belongs on wlc, can you open a new one there?. That hasn't been working right for some time, I think.. Aye.. Yes, please do.. Thanks!. Try switching to another window and back again.. Thanks!. Thanks!. Thanks!. Thanks!. Aye, you should add them and send a patch. focus shouldn't be difficult.. Thanks!. https://github.com/swaywm/sway/commit/a82aa2a20d865dd65f2ea9b9efb15d72ab7638a0. Thanks!. Man, our scratchpad implementation really sucks. I should really rewrite it.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Alright guys, it's go time. I have laid the foundation for a wlroots-based sway, and it's time to get everyone involved in working on porting it over. Remember to join the IRC channel, #sway-devel on freenode, for collaboration.\nI added this to the OP to explain the approach we're taking:\n\nLarge swaths of Sway code has been moved to sway/old/ and include/sway/old/ for reference. There are now two directories, sway/desktop/ and sway/tree/, where most of the work is ongoing. The former is where sway touches wlroots - event listeners, shell handlers, and so on all live here, and it has ownership over all wlr_* resources. sway/tree/ is where the sway tree is being managed, and contains code for manipulating the tree.\nThe plan is to gradually re-implement features of sway here. We will gradually re-introduce parts of the code from the old directories and adapt them for use with wlroots, rewriting and refactoring as appropriate. I'm also taking this opportunity to do some cleanup of some of the codebase's bigger design problems - this is a good opportunity to tweak existing interfaces to be cleaner while we're refactoring everything anyway.\n\nThe next things I want to work on right now are, approximately in order:\n\nSpinning up the tree (getting workspaces, containers, and views into the tree)\nSpinning up the command subsystem and porting a few commands over\nUsing these to configure outputs\nSpinning up IPC\nArranging the tree\nRendering views. Backend configuration spec:\n\nbackend add <type> [--name <name>] [args...]: spins up a backend of the given type with the given name (or a generated name: type-number e.g. libinput-0). [args...] is backend-specific, such as a path to a DRM device for the DRM backend, a DISPLAY for x11, an initial number of outputs for the wayland backend, etc.\nbackend del <name>: does what it says on the tin\nbackend <name> <subcommand> [args...]: runtime manipulation of backend-specific features\nSubcommands\nwayland\nbackend wayland-0 add-output\nbackend wayland-0 del-output <id>\nx11\nSee wayland\nheadless\nSee wayland, plus\nbackend headless-0 add-input <caps...>\nbackend headless-0 del-input <id>\nbackend headless-0 input <id> <send-keys|depress|release|click|move> [...]\nExample use-cases\n\nAdd an RDP backend at runtime so your buddy can pair program with you\nAdd a headless backend for scripting with\nAdd a nested Wayland backend to your DRM session cause you're weird\nAdd an x11 backend to your DRM session so you can switch TTYs to your x session and still manipulate your sway session. We should probably also add sway --no-backend to start it up with an empty multi-backend so you can explicitly configure the backends you need at runtime.. It might be better to write some kind of plugin that spins up a DRM backend separately from Sway's backend support code, then subdivides the outputs on it and exposes them back into the Sway tree and handles the rendering necessities.. Development is organized on IRC, join us there.. Come join us in the IRC channel and ask for things to do:\n\nhttp://webchat.freenode.net/?channels=sway-devel&uio=d4\nsway-devel on irc.freenode.net. I have split the work that remains out into separate tickets. We're almost there!. https://github.com/swaywm/sway/milestone/1. Sure.. Why are you even doing this in the first place?. I think we're just not going to support this behavior.. In this case I would accept a patch.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Stack trace too as well. So debug it.. gdb. Thanks!. Need to re-alphabetize it.. Thanks!. You can add ifdefs to that file to avoid defining them on FreeBSD if you like.. You can bump it to 11 if that makes it easier?. This is good now, right?. It's not like I'm unaware that you can define POSIX macros when you invoke the compiler. This was a deliberate design decision.. Thanks!. Can I see your full config, please.. Thanks!. LGTM, thanks! Will mege this once the build is happy.. Thanks!. Is this a new problem?. Can you do a bisect?. This sort of thing is something I would like to support post-wlroots, but until then you're just going to have to sit tight.. Seems like a good idea but will be complicated, especially if the two outputs have different resolutions. Should be possible after wlroots.. #1666 . >Or can the sway binary do this before dropping privileges?\nYes. #646 . https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Telegram is a godawful electron driven waste of electricity. Not our fault.. #731 . Please search the bug tracker before filing any more bugs.. Dude read the existing issues first https://github.com/swaywm/sway/issues/1062. That has nothing to do with Xwayland. Full debug log, please.. Of course.. What's happening here is Sway is crashing and dying before swaybg gets up. The error is misleading.. Why?. We should rearrange the container for which fullscreen was set (likely the workspace).. aight, thanks.. This will be addressed when wlroots is complete.. This is the first I've heard of it, so it's evidently not a major issue for users.. This is not a use case we support. Pick one or the other.. You can debug it and investigate it yourself. But it's not something that impacts day-to-day users at all, so I don't care to waste time on it.. Nope, feel free to write one.. @jdiez17 can you take a look at this. Please review the guidelines, @tonyskapunk https://github.com/swaywm/sway/issues/1318. Sorry it took me a while to get to this thread. I'm probably going to overhaul the readme for 1.0, so we should probably chill out on the TLs for now.. I would appreciate that.. Thanks!. These features are better offered by a third party program than by swaylock upstream.. swaygrab is deprecated, through the combination of grim and slurp on sway 1.0 you can achive this functionality.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I don't want to implement this or see it implemented.. Hmm, can we increase the limit to something more reasonable? Maybe 256?. Thanks! LGTM, will merge when the build completes.\nHandling permission failure is covered in a separate ticket, feel free to send another patch along if you like.. Looks good. Would you consider adding similar errors to the other IPC clients? Perhaps at a higher level?. https://en.wikipedia.org/wiki/Wikipedia:Be_bold. >why adding -g to all build types instead of recommending RelWithDebInfo (essentially Release with -g) as default?\nCause distro maintainers who remove debugging symbols should be drawn and quartered, that's why. We gotta make life difficult for them.. Thanks!. Test this on 0.15-rc3 and provide WAY more context.. How about a backtrace?. This isn't useful. Compile with debug symbols.. Thanks. This was fixed here: https://github.com/Cloudef/wlc/pull/280\nIt will be shipped in the upcoming release.. @johalun for FreeBSD questions. Does sway+nvidia blob even work on FreeBSD?\nSo far as Linux is concerned that seems like an acceptable approach to me, but we're dropping support for the proprietary driver the release after next. We can merge a fix for 0.15... but it'll be dropped right away.. Thanks!. >I'd like some users to test this a bit before it gets merged because I don't have any libappindicator programs on my laptop that work correctly.\nWait, so did you write this without testing it at all yourself?. >tray script I use\nWell?. >D-Bus not built with -rdynamic so unable to print a backtrace\nWell?. The thing about a wiki is, anyone can edit it!. There's not. If it works for you, go ahead. People do watch the wiki for changes so erroneous ones will be addressed.. VirtualBox is not supported.. Sorry, no new features are being accepted at this time.. No.. Right now you can just do post-processing, but we're working on alternatives.. >is there an approx ETA?\nNo.. Without steps to reproduce there's not much I can do.. Can you summarize any issues you've found arise from this change?. Thanks!. Can you file a bug with json-c asking them not to ship the change? Breaking API changes are typically not a good idea.. Yeah, but distros are going to have to deal with the fallout when we ship it and I imagine many of their users will come to us, not their distros, with the complaints.. Wrapper functions wouldn't really help.\nWe wouldn't be dictating what they release, we'd be letting them know as users of their library that the change would cause us headaches and politely asking that they roll it back before shipping it in a stable version. This is a perfectly reasonable thing for us to do.. Did you verify this works on both versions of json-c?. See if you can make a minimum reproducable test case.. I would rather just leave it open, no big deal. I appreciate the thought, but we're likely leaving CMake soon and there's not a good reason to make this change anyway. We aren't using any newer CMake features and we'd just leave older users behind senselessly.. Please associate your committer email with your GitHub account.. Hmm, that's not quite right.. Thanks!. This will be addressed when wlroots is completed and integrated with sway.. Can you make the same change to the other languages?. Thanks!. https://github.com/swaywm/sway/issues/267. \u3042\u308a\u304c\u3068\u3046\u3054\u3056\u3044\u307e\u3059\uff01IRC\u306f\u5927\u4e08\u592b\u3001\u79c1\u306e\u65e5\u672c\u8a9e\u306fOK\u3067\u3059\u3002. This will be addressed when wlroots is completed and integrated with sway.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I think we can support role for xwayland even if future properties with the same name come around for other shells. With the design I have in mind it will make sense to support both.. Don't obsfucate issues when you close them. What was this about?. Yes, this is indeed a downstream issue.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!. Thanks!. We always depend on the latest version of wlc (master). We ship sway and wlc releases together. I'd rather not specify this here because it'll keep changing all the time.. This will be addressed when wlroots is completed and integrated with sway.. Can you run swaybar -b bar-0 -d and let me know how that goes?. 404. Your wlc is outdated.. You must have installed it incorrectly, maybe into /usr/local.. Does /usr/include/wlc/wlc.h exist?. Well, there you have it.. /usr takes precedence. You already installed it there before. You need to remove the old version from /usr or install the new version to /usr.. If the instructions are wrong, fix them. It's a wiki. Sway on Debian is user-supported.. If you're not going to install to /usr you need to set some environment variables to load libraries from somewhere else. Ask your distro for help.. The error tells you what to do.. For security reasons, sway clears your LD_LIBRARY_PATH from the environment during startup. You have to hard code it when you compile sway with cmake -DLD_LIBRARY_PATH=.... For security reasons, sway clears your LD_LIBRARY_PATH from the environment during startup. You have to hard code it when you compile sway with cmake -DLD_LIBRARY_PATH=.... No, that doesn't have anything to do with it. I don't know what's wrong.. No, that doesn't have anything to do with it. I don't know what's wrong.. How did you configure gdm to start sway?. How did you configure gdm to start sway?. This will be addressed when wlroots is completed and integrated with sway.. This will be addressed when wlroots is completed and integrated with sway.. Thanks for the info, that's helpful - but we could use a little more:\nhttps://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Thanks for the info, that's helpful - but we could use a little more:\nhttps://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Wait, what segfaults? Sway?. Wait, what segfaults? Sway?. See if you can find a core dump for it.. See if you can find a core dump for it.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Can you add this to /etc/sway/security.d/10-sway.conf, restart sway, and see if it can be reproduced?\n```\nipc /usr/bin/swaymsg {\n    * enabled\nevents {\n    * disabled\n}\n\n}\n``. Can you add this to/etc/sway/security.d/10-sway.conf`, restart sway, and see if it can be reproduced?\n```\nipc /usr/bin/swaymsg {\n    * enabled\nevents {\n    * disabled\n}\n\n}\n```. Thanks, leaving this open so we don't forget to add that to the default security config.. Thanks, leaving this open so we don't forget to add that to the default security config.. Can I get a backtrace?. Can I get a backtrace?. Ask your distro for help obtaining a coredump and feed it into gdb to get a stack trace.. Ask your distro for help obtaining a coredump and feed it into gdb to get a stack trace.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. What software are you using that does not work?. What software are you using that does not work?. Move this discussion to #1372. Move this discussion to #1372. This should be possible, but it's not going to be done for some time.. This should be possible, but it's not going to be done for some time.. The travis build had been failing since before your patch. Don't worry about it.\nThanks!. The travis build had been failing since before your patch. Don't worry about it.\nThanks!. Sway does not support running concurrently with other compositors. Just don't do it.. Sway does not support running concurrently with other compositors. Just don't do it.. Switching TTYs in general is not supported either. That may impove with wlroots, but for now - just don't do it.. Switching TTYs in general is not supported either. That may impove with wlroots, but for now - just don't do it.. Why do you have to reinstall ubuntu? In any case, this problem is not nearly common enough to justify a spot in the readme.. Why do you have to reinstall ubuntu? In any case, this problem is not nearly common enough to justify a spot in the readme.. This is not something I would like to support. It's been requested before.. This is not something I would like to support. It's been requested before.. Thanks!. Thanks!. >I think this should probably be moved over to wlroots itself.\nNah, sway's the place for this imo.. >I think this should probably be moved over to wlroots itself.\nNah, sway's the place for this imo.. Waiting on the subprojects is fine.. Waiting on the subprojects is fine.. Xwayland does not support scaling.. Xwayland does not support scaling.. This code comes straight from rootston, we should yoink it there too. This code comes straight from rootston, we should yoink it there too. I'm not interested in issues filed by ghosts.. I'm not interested in issues filed by ghosts.. So why are you reporting this on our issue tracker, then?. So why are you reporting this on our issue tracker, then?. Thanks!. Thanks!. Thanks!. Thanks!. This was intentional. We should use whatever name is appropriate to each shell and try not to conflate different shell concepts.. Yep.. LGTM aside from the one issue. Thanks!. I cannot reproduce this, either.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. Thanks!. Looks good, just get rid of the lingering wlc issues. That's why the bulid failed, too.. Thanks!. I don't like this approach.. Thanks!. Thanks!. This will be addressed when wlroots is completed and integrated with sway.. Initial feedback\n\nXwayland crashes on changes\nI would prefer to replace refresh_rate/resolution with a single mode command: WIDTHxHEIGHT@RATE, and have res just be an alias for mode. LGTM :+1: . Thanks!. ```\ninput device_id {\n    # no change from existing input blocks\n    layout us\n    options caps:escape\n}\n\ncursor \"cursor-0\" {\n    attach device_id...\n    attach *\n    attach --output=HDMI-A-1 device_id\n    attach --region=100x100@10,10 device_id\n}\nseat \"seat-0\" {\n    attach keyboard_id...\n    attach cursor_id...\n    attach *\n    attach --layout=us --options=caps:escape keyboard_id\n    attach --as-pointer touch_id\n    attach --as-touch pointer_id...\n}\n```\nAttaching a touch device as a pointer would present a wl_pointer to the client and simulate that. Attaching n pointers as a touch device simulates a wl_touch with n touchpoints. Attaching a keyboard with layout/options/etc overrides that keyboard's default layout/options for any interactions that go through this seat.\nAttaching a device twice to anything should just update its options to match any extra parameters given.\nAfter config parsing, if no cursors were configured, add a default:\ncursor \"cursor-0\" {\n    attach *\n}\nIf no seats were configured, add a default:\nseat \"seat-0\" {\n    attach *\n}. Oh, I should mention that detach should work at runtime for all of these (attach should also work at runtime).. Also, another concern we should address is that previously sway input devices were identified with a consistent identifier based on libinput. We need to carry this identifier over, but there are additional constraints - we should be able to specify sway_id/keyboard for example to refer just to the keyboard capability of a multi-capable device. For other cases the old sway ID needs to remain the same for backwards compatability.. bindsym --to=keyboard_id|seat_id .... >It won't work well if seats share cursors because then they would be sharing the devices as well. If they share devices, surfaces then get double input events (one per seat). For instance, two button clicks on the surface when the user clicks once, two scrolls, two motion events, two dnd targets which is going to lead to a lot of nasty bugs that can't be fixed. Clipboard for cursor events is broken because only the first seat that wins the race to click the \"copy\" button gets the contents. Just picking a seat and going with that will break the clipboard for the same reason and is no different from just putting the device on that seat but with less predictability. I think this is a protocol limitation.\nCursors can be closely associated with seats I guess. However, I should note that I want you to be able to tie a keyboard into multiple seats, and we should work it out so that whichever seat got input last (from devices other than that keyboard) would propegate the keyboard events.\n\nAnd what if libinput is not in use for that backend? Should we just ignore all input configuration in that case?\n\nWe should make up some other predictable device naming schema for that device.. >This is your wm so I'll do the config your way even though I don't like the approach\nCan you enumerate your concerns, if only for posterity's sake?. Maybe attach --exclusive * would only attach devices which are not attached on any other seat? Would have to be delayed to the end of config file parsing.. seat {\n    fallback true\n}. Set the fallback to the last one to be set to it, and migrate any relevant input devices to that seat?. That works for me too.. Something I'd like to see done shortly after this PR is some commands that rely on focus, such as move and split.. I'd like to see swaymsg -t get_inputs supported in this PR.. Hmm, I am not well equipped to test some of these features because I only have one kind of mouse. I tested multi-seat stuff in wlroots with a tablet tool and touchscreen.. :+1: from testing. Thanks for your patience in implementing this and waiting on review. It's looking great, excellent work.. VT switching. >Update: it seems like adding a sleep 1 &&  doesn't work, so maybe that theory isn't correct.\nI also tested setting the layout from a separate keyboard (on a different computer via SSH) than the one I was configuring the layout for to no avail.. Can you take a look at this @emersion?. :tada: . Try the latest 0.15 branch.. Your stack traces are not terribly useful. Compile sway and wlc with debug symbols enabled.. Sounds like you're ready to submit a patch?. Yeah we'll be rewriting the whole title bar thing soon.. I'm closing issues that are resolved by the yet-unreleased sway 1.0.. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. https://github.com/swaywm/sway/issues/626. Can you still reproduce this?. You already requested this -_-\nhttps://github.com/swaywm/sway/issues/1426. This will be addressed when wlroots is completed and integrated with sway.. I'm not sure libinput supports that. To develop this I would need to have access to hardware with a multi-touch touchpad for testing and research, which I currently do not have.. If you'd like to work on this, start by learning how libinput works and how it interfaces with wlroots, then do some experimentation to find out how that takes shape with your hardware.. Thanks!. Can you retarget this against the 0.15 branch instead of master? Also, I'm pretty busy right now, it would save me review time if you could write up a test plan for verifying this change.. Have you tested it, @AravK?. I hate that we have to do this terrible workaround, but I don't see a better way. This sucks.. I'm referring to the typedef and the version check header, not the refcounting.. Nah, I prefer this to dropping Werror, since Werror is useful beyond this one json-c problem.. This has been merged into the 0.15 branch and will make the next bugfix release. Thanks!. Don't worry about it.. Does i3 support this feature?. i3 has docs. Cool, +1. Thanks!. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. What is the output of which j4-dmenu-desktop in your shell?. Oh, it's because of your quoting. Replace this:\nbindsym $mod+d exec --no-startup-id \"j4-dmenu-desktop --no-generic\"\n\nWith this:\nbindsym $mod+d exec j4-dmenu-desktop --no-generic\n\n(no-startup-id is unrelated but sway doesn't and won't support it anyway). Can you use the move command on a floating window outside of a rule?. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. >Single-frame reflows will be a big deal when we get around to doing it. The idea is to make rendering smoother when the position of the containers change so all the updates happen in one frame so it seems like a single update.\nI'm not sure how to distill this into a statement meaningful for end-users.. >- Rendering overhaul dramatically improves performance and accuracy\nAdded \"and accuracy\" to maybe address that. fwiw you could probably test rendering too by writing a simple test client that just draws a solid color or so.. Closing this as it'll happen out of tree anyway.. Aye, this is not a block.. I think we should just do --no-default-backend and make them configure it via IPC. No. The sort of people who can't figure out how to build this and the sort of people who should be using this right now are mutually exclusive groups. It's not done, or even remotely close to it.. I see a lot of this spammed in the console when I add a second headless output:\nlibEGL warning: FIXME: egl/x11 doesn't support front buffer rendering.. Should not have any outputs added to the headless backend by default imo\nAlso, I attempted to add a wayland backend at runtime to no avail. swaymsg backend add wayland gave an error about the # of args, swaymsg backend add wayland wayland segfaulted. I wonder if we should start it up with an empty multi-backend and wait to add more backends to it (including headless) until we're asked for (or they're specified in the config file).. >How do you want to handle the case of no backends?\nThis is a bit crazy, but what if we waited until at least one backend was created to initialize the wl_compositor et al?. Try this on sway 0.15.1 (just released).. It's probably an artifact of poor hotplugging code in both. IIRC tty switching \"unplugs\" all displays, then replugs them when you return. We need to reapply the output config (setting the scale factor) and send a surface_enter to all relevant clients.. What repo is that commit in?. Ah, thanks.. Obtain a debug log.. No wildcards on the input blocks, please. File that as a separate feature request if you'd like.. Aside from the one line that doesn't need to be wrapped, I'm not concerned about wrapping here. There's not a good way to do it pretty. As a general rule you don't have to wrap if there are no convenient break points - the long function name or the long debug logging strings make for difficult break points.. Sway 0.15.1 is coming out today with this patch applied.. Thanks!. Thanks!. Doing it via swaymsg should work correctly - this is not a security issue, the output command is not restricted in this way. Can you elaborate on your setup, add a config file, debug log, and show the swaymsg command you're using?. Thanks!. Thanks!. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. This is not and will not be supported. The FAQ has information on starting Sway.. We have damn good documentation, thank you very much, if only our users would actually read it.. Can you provide consistent reproduction steps and maybe run it through valgrind?. And a debug log.. Thanks, that's helpful.. Thanks!. json-c will be shipping in plenty of distros by the time we finish the wlroots branch.. The json-c problem has in fact been fixed, a fact known to all developers working on Sway, for whom the git repository is intended. End users are meant to use the stable releases, for which the problem has also been fixed in a different way.. Can you also test changing output settings and committing them with reload?. >Some things may hold onto elements of the config. When the old config is freed, they may still have references which become invalid when not overwritten. Input manager does this for devices.\nWhoops, I should have caught this in the review. This is invalid, nothing should store references to the config but should instead copy the data out.. Anyone have test results on this?. Code LGTM. There's no reason not to link everything to wlroots. These tools don't function without sway.. Thanks!. Thanks!. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. webm transcodes famously slowly. Grab it in some other format (like mp4) and transcode it to webm later if you want a webm.. Would appreciate some extra help testing this.. Thanks!. Can I see a screenshot?. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Dear god. Scratchpad support has been in for ages.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Looks like \"move window to scratchpad\" is not supported. Try just move scratchpad instead.. Screenshots are done with swaygrab, read the man page to learn about it.\nMake sure that the class names and such line up correctly, native wayland programs for example do not have a window class. Use swaymsg -t get_tree to find window properties.. >Unfortunately I can not switch between sway and i3wm. If you go to ctrl + alt + f2 then the previous session ends.\nThis is not supported. Based on your get_tree try this:\nfor_window [class=\"tilix\"] move position 0 18, resize set 1280 550, move scratchpad\nbindsym F12 [class=\"tilix\"] scratchpad show. It seems this is not a sway bug.. I like it aside from that sway_assert issue. Would appreciate someone else looking into testing it, I still don't have logind set up properly.. Summoning @Hummer12007 to this thread\nAre you in the input group?. @DarkReef maybe you can help this guy out in Russian?. This is a known issue that will be fixed in the wlroots update.. There is a 0% chance this is Sway's fault. Maybe GNOME starts NetworkManager for you or something.. Please retarget this at the 0.15 branch.. Thanks!. gdm is not supported. What did you set your XKB environment to?. How did you specify your keyboard layout?. Closing since login managers are not supported. The thing about wikis is that anyone can edit them. Grep for \"TODO FOCUS\" to find a bunch of shit I've littered around regarding this.. Plan for fixing this:\nSeats were designed with only ever focusing views in mind, but in practice will need to be able to focus any kind of container. I want seats to be the source of truth for what container is currently focused, even if they aren't doing any input dispatching to it or whatever.\nWe need to be able to walk focus both up and down the tree. For example, when we destroy a view, we need to walk up to transfer focus to its parent - seat should handle this automatically. When we move to a new workspace, we need to walk down the tree to find out what was last focused on that workspace. Consider this situation, where V indicates focused child and . indicates unfocused child:\nroot container\n          |\n          V\n        output\n         /  \\\n        V    .\nworkspace    workspace\n    |          /  \\\n    V         .    V\n window   window  container\n                   /    \\\n                  V      .\n               window  window\nIn this situation, the left workspace's window is focused. If we move from the first workspace to the second, we need to resume focus all the way down to that leaf.\nGiven that we need to (1) find the focused container of a seat and (2) track old paths down the focus tree, we keep the focused pointers up to date in the tree and have seats point to whatever they have focused. This gets complicated when we have several seats, because a container may have >1 focused child. To solve this, we should have a separate tree of focus for each seat, which is referenced whenever switching to a workspace on behalf of a seat.. I was thinking the seat owns it, given that the seat owns focus in general. It has its own data structure separate from the containers, and I think we'll want to make some kind of destruction signal for swayc_t that it can use to handle their removal.. I'm not 100% sure on the approach here, be creative.. Looking pretty good to me so far, the approach seems good. >are view coordinates in the output coordinate system or the layout coordinate system?\nAgree with emersion\n\nhow do I iterate a list of containers in rendering order? (BFS, DFS, or something else?)\n\nEither one should be correct. It'll get weird when we start doing tabbed/stacked layouts though.\n\nhow do I iterate a list of containers in input order? (reverse of rendering order)\n\nEither one should be correct. It'll get weird when we start doing tabbed/stacked layouts though.\n\nare there any use cases where the focus-inactive algorithm gives the wrong answer or is inefficient?\n\nLet's cross that bridge when we get to it?. >It's going to get pretty tiresome checking this everywhere. Maybe we should pull this higher up and put contextual commands into a different command list? Will file a ticket.\nThis\n\nMaybe the queue could be allocated once and used for the lifetime of the application?\n\nThis. >Another idea along those lines is to instead of passing a single container to the command, pass a list (for every container that was matched by the criteria). That way, commands might choose to behave a bit differently with a list. For instance [class=\".*\"] focus will get a list of all the windows and can choose to only focus the first one, or maybe do your multi-focus thing or whatever.\nEh, I'm not feeling this (at least for the time being). This is currently by design, it matches the behavior of i3. However, we intend to change it. The ticket for this is here: https://github.com/swaywm/sway/issues/548. The scratchpad is due for an overhaul soon.. \"Overhaul\" means your debug information isn't necessary anyway - we're going to completely rewrite the scratchpad from, err, scratch.. To be implemented in the first place?. Oh so it seems. Thanks - please retarget this patch for the 0.15 branch.. Thanks!. Thanks!. It was funded! Thank you, everyone!. We can just change it to strncmp(line, \"nvidia \", 7). Did you mean to make this for the 0.15 branch?. 0.15.. Thanks!. Thanks!. Yeah, report to libinput.. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. This will be fixed by the wlroots port.. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Can you point out the specific bindsym command that does not work?. Can I get a debug log?. We have implemented a screen capture protocol, it's up to someone else to plug this into pipewire now.. Well, we'll get there eventually.. Retarget this patch for the 0.15 branch.. Thanks!. >why does X11 window need that?\nIt's useful for getting a few things working like ibus or dmenu.. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Can you reproduce this with sway 1.0-alpha.4?. This should be pretty easy to implement with layer surfaces, we can set the exclusive zone to 0. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Thanks!. cc @4e554c4c. Thanks!. Not sure what happened with the build. Built and tested this locally.. @Hummer12007 \nlooks like GPU drivers are misinstalled or something. export XDG_RUNTIME_DIR=/tmp before starting sway. TTY switching is not presently supported on void.. Neither bspwm nor X11 are Wayland compositors, they work very differently from Sway. On Sway we have to support TTY switching ourselves and we haven't done the work to make it work well without logind.. Please rebase your patch against the 0.15 branch.. >not sure if I did that correctly\nNo, doesn't look like you did. You're merging everything from the master branch into 0.15. Which isn't actually a terrible thing, as I'm looking over this commit log. So don't sweat it.. Thanks!. Thanks!. Please rebase your patch against the 0.15 branch.. Thanks!. This needs the corresponding xdg shell stable fixes too. Build is failing here for wlr_renderer related reasons, are there other changes that need to be pulled forward?. Rebase this when you get the chance, I pushed a fix for the other issue to the wlroots branch. I think I just committed the bulk of the work here myself, the diff is basically empty now. Should probably restore it too. /shrug. Thanks!. Thanks!. This is mainly based on the rootston implementation, but streamlined a little bit and adapted to sway where necessary.. @emersion comments addressed. Thanks!. This is ready for review.. Something else to consider is that eventually we'll probably want to have some kind of callback function that gets hit when it's time to apply the layout, in addition to simply applying it. This could be used, for example, during modeswitching (arrange layout for the new mode, wait for all clients to be ready, then change the mode and apply the layout) or workspace switching (wait to actually switch the workspace until the new focused client has acked the focus change).. swaybar should listen to it and reload its config when it occurs, then we don't have to restart the swaybar process on reload. I think so, right?. I'm not really too concerned about supporting bar config update to be honest. Right now we just kill the bar and spawn new ones, which is fine with me. Thanks for looking into it.. Problems:\ndepth-first and breadth-first tree iteration were separate for a reason\nIt's spelt \"descendant\". output X11-1 scale 2\nStart sway, edit config to remove that line, reload\nProbably not wlroots-specific. At runtime, sure. At reload time we should probably reset everything imo.. Shit wrong PR to merge. I'll clean it up in another PR. man 5 sway\ngrep for default_orientation\n????. Relevant\nhttps://github.com/swaywm/sway/issues/1602. tyvm. Note that this might also come into play if we decide to let you do one workspace on several outputs, which has been requested before.. This should be good to go @acrisci. Thanks!. This seems premature given that #1601 isn't even merged. When testing this I just see a white screen. >Closing the last view on a workspace doesn't clear the screen.\nCannot reproduce. I don't think that's in scope for wlr-output-layout, we'll probably want to store that info on sway's structures. It looks like you've merged/rebased master into your branch. good shit/10. Also segfaults: just clicking an empty workspace in general.. Works!. Also check if it has a parent. Will switch to wlr_surface_point_accepts_input later so I can avoid some annoying rebasing. What distro?. Right. TTY switching is not supported without logind (or elogind).. Follow the instructions in the readme for use with logind.. derp. Comments address, please review. Can you run swaybar manually and see if it has anything to say? swaybar -d -b bar-0. closing because emersion is full of :hankey: . Nope. Weird. We SIGTERM the child when we get SIGTERM'd ourselves, and on a normal exit too.. Your config?. woot. Build unfailed. I like it but let's use wlr_box\nedit: nack. No. wl_shell was not dropped because it is not useful, but because it is broken. A new protocol should be written for non-desktop systems if xdg-shell is not a good fit.. man 5 sway to learn about available criteria\nswaymsg -t get_tree to see properties of containers in your session. Thanks!. Summary of notation follows\n(<type> <children...>)\nThis is nested indefinitely. Added extra info between type and children where it made things clearer.. Should it be moved to the end or adjacent to the inactive focus?. Latest commit fixes @acrisci's issue and also addresses another test case:\n```\n(root\n  (output\n    (workspace L_HORIZ\n      (view a focus)\n      (container\n        (view b)\n        (view c)))))\n-> move left\n(root\n  (output\n    (workspace L_HORIZ\n      (view a focus)\n      (container\n        (view b)\n        (view c)))))\nno changes\n(root\n  (output\n    (workspace L_HORIZ\n      (container\n        (view b)\n        (view c))\n      (view a focus))))\n-> move right\n(root\n  (output\n    (workspace\n      (container\n        (view b)\n        (view c))\n      (view a focus))))\nno changes\n```\nIn plain english, set up this layout:\n(root\n  (output\n    (workspace L_HORIZ\n      (view a focus)\n      (container (view b) (view c)))))\nThen move (view a) to the right, then again (it should now be to the right of the first container). Keep moving it right and the layout should not change. Move it left and it should again join the middle container, then move left again and it should be back to the original layout. Keep moving left and the layout should not change.. >You aren't supposed to flatten when you move out of a split. test\nTangental: please make your s-expression syntax consistent, you use view1 and (view 1) and (view a) in different places. Ideally just use the syntax I originally wrote in.. That makes it harder to read.. Another test case:\n(workspace\n  (view a)\n  (container\n    (container\n      (container\n        (container\n          (view b))))))\n-> move left\n(workspace\n  (view a)\n  (view b))\n-> move left\n(workspace\n  (view b)\n  (view a))\n. >H is horizontal, V is vertical, lower case letters are windows/leafs\n\nwith H [ a V[ b c ] ]:\nfocus a, move right, move right => new layout: H[ V[ b c ] a ] (correct).\nmove left => layout doesn't change.\n\nafaict this works. Pull and try again, please, but don't expect much else to work. There are known problems with this version.. I ~hope~ think this is all working now.. Fuck, that breaks something else. This is ready for another pass\n@stapelberg, you're one crazy dude. Thanks @orestisf1993. >A bug:\n\nH[V[a b c] d], focus a, move up, move right, move left.\nFinal i3 layout: H[V[b c] a d]\nFinal sway layout: H[V[b c a] d]\n\nI think the sway behavior here is more intuitive, I'm going to keep it.. This is ready for yet another review.. Yeah, it's a little weird, but it's based on the semantics of focus-inactive and follows more consistent rules. Let me ruminate on it but my inclination is to be okay with the departure from i3 in this case rather than add endless edge cases.. Can you also remove:\n\ndesktop-shell.xml\ngamma-control.xml\nserver-decoration.xml\nswaylock.xml. Thanks!. wrong base branch -_-. >Inconsistent with i3 behavior\n\nMove to new (empty) workspace\nOpen several containers\nfocus parent\nkill\n\ni3 closes the lot, sway refuses on the grounds that a workspace is not view || container\n\n\n\nThis problem persists. j/k it was my fault. :tada: . :tada: . Yes, and it's still something I want to get into.. Yes, and it's still something I want to get into.. This is ready for review.. Thanks!. Thanks!. I think I would rather call this opacity than transparency (I know you inverted it, I'd like to revert it and call it opacity).. This (should be) fixed with wlroots/sway 1.0.. I hate GNU C. Actually in this case it's legit, I thought it was elsewhere. Thanks!. >I'd prefer commands to spawn new outputs via IPC instead of env variables.\nThis\nWe should start with no outputs and make you use IPC to add them. Thanks!. Thanks!. >All of this code works but is hard to read. Converting between surface-local and buffer-local coordinates at the beginning and the end of functions doesn't help. I'd prefer everything to take coordinates in surface-local coordinates (especially hotspots), and mark variables using buffer-local coordinates with a buffer_ prefix.\nPart of the problem is that we need to communciate the scale to pango so it can up the font size/etc accordingly. I think that the approach used here is reasonably good considering this constraint.. per IRL discussion leaving this to @emersion to attempt to reproduce for now. per IRL discussion leaving this to @emersion to attempt to reproduce for now. https://sr.ht/D64e.log. https://sr.ht/D64e.log. Rootston does not have live config reloading, so.... Rootston does not have live config reloading, so.... Helpful disgusting hack https://gist.github.com/SirCmpwn/41378035c7ee6cc182813eca638420a4. It works for me but I noticed some issues - sway doesn't rearrange the layout when it makes new windows, so their size isn't right. If you switch between workspaces or otherwise trigger a layout update it fixes the sizes.. It works for me but I noticed some issues - sway doesn't rearrange the layout when it makes new windows, so their size isn't right. If you switch between workspaces or otherwise trigger a layout update it fixes the sizes.. Cannot reproduce.. Can you elaborate on what the bug was so we can test that this fixes it?. >Can you describe your test cases in weird lisp language?\nNot really, just review this one manually. >Can you describe your test cases in weird lisp language?\nNot really, just review this one manually. Tenative changelog for sway 1.0-alpha.1:\nSway 1.0-alpha.1 contains 544 changes from 5 contributors (plus 2,284 changes from 39 contributors to wlroots) and is the first alpha release of sway 1.0. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. The purpose of this release of sway is to help users understand the progress we've made towards 1.0 and provide internal versions for development use - many of the sway developers will be using sway 1.0-alpha.1 even though it is very incomplete, because it will help us understand the places where it is lacking.\nPlease do not submit bug reports for this version of sway. Submit patches instead.\nPackage maintainers: please do not package this release.\nBreaking Changes\n\nAs this is an alpha release and we have completely overhauled the codebase, many (perhaps most) features are missing and broken.\nThis release requires you to build it with the master branch of wlroots.\nExperimental Nvidia support has been deprecated since its inception, and has now been removed entirely. Please use nouveau and consider future purchases from GPU vendors that support open source. Other proprietary drivers are also unsupported.\n\nNew Features\nOutputs\n\nOutput rotation (e.g. output NAME transform 90)\nFractional scaling (e.g. output NAME scale 1.5)\nOutput resolution is now applied via modesetting\nSupport for daisy-chained DisplayPort and other exotic configurations\nSwaylock, swaybar, and swaybg support HiDPI correctly\n\nInputs\n\nMultiple input devices can be bound to a single on-screen cursor (or several)\nKeyboard layout and XKB options may be specified in the config file\nMultiple keyboards with different layouts can be used interchangably\nMultiple seats can be configured (each with their own input devices and focused window)\n\nWayland Features\n\nRich content (images, etc) can be copied from Xwayland to Wayland and vice versa\nGTK's primary selection protocol has been implemented (and syncs with Xwayland primary selection)\nThe layer-shell protocol has been implemented (which permits future support for e.g. rofi, on-screen keyboards, third-party panels, etc)\nOrbital's screenshooter protocol has been implemented (which permits third-party software to capture the screen)\nIdle & idle inhibit have been implemented (which permits DPMS and the inhibition of DPMS by e.g. video players to work)\nClient-side/server-side decoration negotiation has been submitted for standardization\n\nOther\n\nOutput damage tracking significantly improves both CPU performance and power usage\nThe Wayland and x11 backends are now supported for end user use\nWindow opacity can be configured with the opacity command\n\nBugs Fixed\n\nAll known problems with xdg-shell have been fixed (such as blurry menus that don't accept focus)\nAll known problems with Xwayland have been fixed (such as Firefox menu weirdness)\nAll known HiDPI bugs\nAll known swaylock & swaybar bugs\nReloading your config doesn't generally crash anymore\nTTY switching probably works\nMost bugs in general are fixed. Tenative changelog for sway 1.0-alpha.1:\n\nSway 1.0-alpha.1 contains 544 changes from 5 contributors (plus 2,284 changes from 39 contributors to wlroots) and is the first alpha release of sway 1.0. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. The purpose of this release of sway is to help users understand the progress we've made towards 1.0 and provide internal versions for development use - many of the sway developers will be using sway 1.0-alpha.1 even though it is very incomplete, because it will help us understand the places where it is lacking.\nPlease do not submit bug reports for this version of sway. Submit patches instead.\nPackage maintainers: please do not package this release.\nBreaking Changes\n\nAs this is an alpha release and we have completely overhauled the codebase, many (perhaps most) features are missing and broken.\nThis release requires you to build it with the master branch of wlroots.\nExperimental Nvidia support has been deprecated since its inception, and has now been removed entirely. Please use nouveau and consider future purchases from GPU vendors that support open source. Other proprietary drivers are also unsupported.\n\nNew Features\nOutputs\n\nOutput rotation (e.g. output NAME transform 90)\nFractional scaling (e.g. output NAME scale 1.5)\nOutput resolution is now applied via modesetting\nSupport for daisy-chained DisplayPort and other exotic configurations\nSwaylock, swaybar, and swaybg support HiDPI correctly\n\nInputs\n\nMultiple input devices can be bound to a single on-screen cursor (or several)\nKeyboard layout and XKB options may be specified in the config file\nMultiple keyboards with different layouts can be used interchangably\nMultiple seats can be configured (each with their own input devices and focused window)\n\nWayland Features\n\nRich content (images, etc) can be copied from Xwayland to Wayland and vice versa\nGTK's primary selection protocol has been implemented (and syncs with Xwayland primary selection)\nThe layer-shell protocol has been implemented (which permits future support for e.g. rofi, on-screen keyboards, third-party panels, etc)\nOrbital's screenshooter protocol has been implemented (which permits third-party software to capture the screen)\nIdle & idle inhibit have been implemented (which permits DPMS and the inhibition of DPMS by e.g. video players to work)\nClient-side/server-side decoration negotiation has been submitted for standardization\n\nOther\n\nOutput damage tracking significantly improves both CPU performance and power usage\nThe Wayland and x11 backends are now supported for end user use\nWindow opacity can be configured with the opacity command\n\nBugs Fixed\n\nAll known problems with xdg-shell have been fixed (such as blurry menus that don't accept focus)\nAll known problems with Xwayland have been fixed (such as Firefox menu weirdness)\nAll known HiDPI bugs\nAll known swaylock & swaybar bugs\nReloading your config doesn't generally crash anymore\nTTY switching probably works\nMost bugs in general are fixed. https://github.com/swaywm/sway/releases/tag/1.0-alpha.1\n\n1.0-alpha.1 has been released!. Sway 1.0-alpha.2 contains 327 changes from 20 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nThe recommended wlroots version to use with this sway release is 383ce3d.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.1. Bugfixes are not included.\nThis release replaces the asciidoc dependency with scdoc.\nNew Features\n\nWindow borders\nFull damage tracking (performance improvement)\nBasic touch screen support (only for touch-supported clients)\nBasic drawing tablet support (simulates a mouse)\nFullscreen windows\nDPMS & auto-lock via swayidle\nCriteria\nMapping input devices to specific outputs or regions of the screen\nIgnoring input from tablets or touch screens outside a specified region of the device\nMouse input simulation (e.g. swaymsg seat default cursor press left)\nSupports the xdg-shell stable protocol\nFull support for hardware cursors (performance improvement)\nXwayland is now started lazily (when the first X client tries to connect). Sway 1.0-alpha.2 contains 327 changes from 20 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\n\nThe recommended wlroots version to use with this sway release is 383ce3d.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.1. Bugfixes are not included.\nThis release replaces the asciidoc dependency with scdoc.\nNew Features\n\nWindow borders\nFull damage tracking (performance improvement)\nBasic touch screen support (only for touch-supported clients)\nBasic drawing tablet support (simulates a mouse)\nFullscreen windows\nDPMS & auto-lock via swayidle\nCriteria\nMapping input devices to specific outputs or regions of the screen\nIgnoring input from tablets or touch screens outside a specified region of the device\nMouse input simulation (e.g. swaymsg seat default cursor press left)\nSupports the xdg-shell stable protocol\nFull support for hardware cursors (performance improvement)\nXwayland is now started lazily (when the first X client tries to connect). Sway 1.0-alpha.2 is now available\n\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.2. Sway 1.0-alpha.2 is now available\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.2. Sway 1.0-alpha.3 contains 291 changes from 13 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nThe recommended wlroots version to use with this sway release is 9a1f0e2.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.2. Bugfixes are not included.\nNew Features\n\nBasic support for floating windows\nTabbed and stacked layouts\nDrag and drop support\nMarks\nGaps (i3-gaps compatible)\nPer-output images with swaylock\nFocus wrapping\nbindsym --locked\nswap command\nCommand blocks (e.g. bar { ... }) are now generic and work with any command. Sway 1.0-alpha.3 contains 291 changes from 13 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\n\nThe recommended wlroots version to use with this sway release is 9a1f0e2.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.2. Bugfixes are not included.\nNew Features\n\nBasic support for floating windows\nTabbed and stacked layouts\nDrag and drop support\nMarks\nGaps (i3-gaps compatible)\nPer-output images with swaylock\nFocus wrapping\nbindsym --locked\nswap command\nCommand blocks (e.g. bar { ... }) are now generic and work with any command. sway 1.0-alpha.3 is now available:\n\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.3. sway 1.0-alpha.3 is now available:\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.3. Going to release alpha.4 in a few days to give people some time to get in any interesting changes they think should make the release.\n\nSway 1.0-alpha.4 contains 304 changes from 20 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nThe recommended wlroots version to use with this sway release is 2a58d44.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.3. Bugfixes are not included.\nNew Features\n\nReal time video capture and improved screenshot capture via dmabuf-export and screencopy\nAtomic layout updates syncronizes layout updates with all clients before rendering the next frame\nMove and resize commands supported for floating windows\nWindow urgency is now supported\nswaylock's appearance can now be customized\nswaylock can now be configured with a file\nCertain windows are automatically floated now (e.g. dialogs)\nxdg-positioner is now supported (opening drop-down menus won't go over output boundaries)\nmode --pango_markup is now supported\nfloating_minimum_size and floating_maximum_size i3 commands supported\ni3's get_binding_modes and get_config messages now supported over IPC. Going to release alpha.4 in a few days to give people some time to get in any interesting changes they think should make the release.\n\n\nSway 1.0-alpha.4 contains 304 changes from 20 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nThe recommended wlroots version to use with this sway release is 2a58d44.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.3. Bugfixes are not included.\nNew Features\n\nReal time video capture and improved screenshot capture via dmabuf-export and screencopy\nAtomic layout updates syncronizes layout updates with all clients before rendering the next frame\nMove and resize commands supported for floating windows\nWindow urgency is now supported\nswaylock's appearance can now be customized\nswaylock can now be configured with a file\nCertain windows are automatically floated now (e.g. dialogs)\nxdg-positioner is now supported (opening drop-down menus won't go over output boundaries)\nmode --pango_markup is now supported\nfloating_minimum_size and floating_maximum_size i3 commands supported\ni3's get_binding_modes and get_config messages now supported over IPC. sway 1.0-alpha.4 is now available:\n\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.4. I have created a milestone for things we need to implement before shipping 1.0-beta.1: https://github.com/swaywm/sway/milestone/1. Sway 1.0-alpha.5 contains 273 changes from 21 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nWe're starting to see the light at the end of the tunnel here. We've defined the list of features necessary to ship 1.0-beta.1, which will be considered the feature-complete 1.0 release (but not considered bug-free). Sway 1.0 is drawing near!\nThe recommended wlroots version to use with this sway release is 28b0a40.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.4. Bugfixes are not included.\nNew Features\n\nInteractive move and resize of floating views (with the mouse)\nScratchpad support\nSupport for running sway on multiple GPUs\n\"swaynag\" added to offer similar functionality to i3-nagbar\nVirtual keyboard protocol added for on-screen keyboards\nSpecify numlock and capslock's value on startup (input * xkb_numlock enabled|disabled)\npid->workspace mappings (if you start a program and switch workspaces, we remember where you were and open the window there)\nMouse bindings\nFull support for i3-compatible IPC events\nfocus output [name]\nassign [critera] to output [name]. sway 1.0-alpha.5 is now available:\n\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.5. Sway 1.0-alpha.6 contains 390 changes from 18 contributors. Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\nMost of this release is bug fixes and aligning sway ever closer with i3 - our compatibility checklist is 92% complete. We have only a few items left on our todo list for 1.0-beta.1: security features, full drawing tablet support, and pointer locking being the big ones. We also landed a large refactoring in this release, which may make things more unstable for a little while but in the long run will flush out more bugs than not.\nThe recommended wlroots version to use with this sway release is 842368e.\nPackage maintainers: please do not package this release.\nThis changelog only includes new features since 1.0-alpha.5. Bugfixes are not included.\nNew Features\n\nMoving & resizing tiled windows with the mouse is now supported*\nresize grow|shrink <direction> <amt> now supported for tiled containers*\nmove to workspace <n> now works with floating containers\nwindow_role critiera now supported\nYou can now specify a fallback color for swaybg\n\nThis release is mostly bug fixes.\n* Works even better than on i3!\n. sway 1.0-alpha.6 is now available:\nhttps://github.com/swaywm/sway/releases/tag/1.0-alpha.6. We've discussed our schedule among the maintainers and decided to accellerate our plans for 1.0. Some of the features in this milestone are no longer considered blockers for 1.0, namely:\n\nPointer constraints & relative pointer\nDrawing tablet support\nVirtual keyboard support\nTray icons in swaybar\n\nWe already have partial support for most of these, but we aren't holding 1.0 for the full implementation. Sway's master branch is nearly stable now and is much, much better than sway 0.15. We do not wish to continue supporting 0.15 and we think that users will be much happier on wlroots. We'll still do these features - for sway 1.1.\nWe're still going to keep working on these, and if they're completed before we ship 1.0 then they'll make the release. If any of these features are important to you, help us finish them!. Provisional 1.0-beta.1 release notes; the last blocker is https://github.com/swaywm/sway/pull/2820\n\nSway 1.0-beta.1 contains 2,544 changes from 80 contributors since 0.15.2, plus 3,225 changes from 67 contributors via wlroots, for a total of 5,769 changes from 128 people over the past, and is the first beta release of sway 1.0.  Beta releases are considered feature-complete, but are not thought to be bug-free.  Nevertheless, it should be suitable for most users, and we did not ship it with any known major bugs. Please use it and provide feedback.\nPackage maintainers: please do not package this release.\nBreaking Changes\n\nWe have completely overhauled the codebase. Some behaviors were changed to match i3 behavior, in breaking ways. There are likely many bugs we don't know about. Your millage may vary.\nswaygrab has been removed. For screenshots, try grim, and for video capture try wlstream\nThis release depends on wlroots 0.1 and drops the dependency on wlc.\nThis release depends on scdoc for generating man pages, and drops the dependency on asciidoc.\nExperimental Nvidia support has been deprecated since its inception, and has now been removed entirely. Please use nouveau and consider future purchases from GPU vendors that support open source. Other proprietary drivers are also unsupported.\n\nNew Features\n\n100% i3 compatible*\n100% i3 IPC compatible*\n100% i3-gaps compatible\n100% i3bar compatible**\n\n* Not including a small number of features which are are deliberately unsupported, such as layout save/restore or features which only make sense on X11\n** Not including tray icons\nSway features\n\nswayidle, a daemon for managing DPMS and idle activity (e.g. automatic lock after a timeout), has been added - man swayidle to get started\nswaynag, an i3-nagbar replacement, has been added, with additional features not supported by i3-nagbar - man swaynag to get started\nbindsym --locked now adds keybindings which work when the screen is locked\nCommand blocks are now generic and work with any command\nWindow opacity can now be adjusted with the opacity command\nborder csd now enables client-side decorations explicitly\nAtomic layout updates ensure that, when resizing windows and adjusting your layout, you never see an invalid frame with partially drawn clients\nUrgency hints from Xwayland are now supported\nOutput damage tracking significantly improves CPU performance and power usage\nHardware cursors are now supported, improving performance\nThe Wayland, x11, and headless backends are now supported for end-user use, enabling nested and headless sway sessions\nOn-screen keyboards like virtboard are now supported\nMoving tiled windows with the mouse now behaves like the proposed i3 feature\n\nOutputs\nman 5 sway-output\n\nOutput rotation (e.g. output NAME transform 90)\nFractional scaling (e.g. output NAME scale 1.5) - see man page for warnings\nWindows can now be dragged between outputs with the mouse (and display correctly when dragged between outputs with different scale factors)\nOutput resolution is now applied via modesetting\nSway can now run on multiple GPUs\nSupport for daisy-chained DisplayPort and other exotic configurations\nAll sway clients (e.g. swaylock) now support HiDPI correctly\nA new gamma control interface with broader hardware support has been implemented* - see this redshift patch\n\n* Some users will have issues with buggy drivers, particularly certain AMDGPU configurations\nInputs\nman 5 sway-input\n\nKeyboard layout and XKB options may be specified in the config file\nMultitouch support is now stable\nDrawing tablets are now supported (partially - it emulates a mouse)\nYou can now specify the status of num lock and caps lock on startup\nMultiple input devices can be bound to a single on-screen cursor (or several cursors)\nMultiple keyboards with different layouts can be used interchangeably\nMultiple seats can be configured (each with their own input devices and focused window)\nInput devices can be mapped to limit their influence to specific outputs or regions of the screen\nInput devices which provide absolutely positioned events (e.g. drawing tablets) can now limit their influence to a subregion of the input device\nMouse movement and button presses can now be simulated with sway commands\n\nWayland Features\n\nDrag and drop is now supported\nRich content (images, etc) can now be copied between Xwayland and Wayland\nGTK's primary selection protocol has been implemented (and syncs with Xwayland primary selection)\nThe layer-shell protocol has been implemented (which allows for third-party panels, lock screens, notification daemons, etc)\nA real time screen capture protocol has been developed and implemented (which allows for future third-party screenshot and video capture tools)\nThe idle & idle inhibit protocols have been implemented (which permits DPMS and the inhibition of DPMS by e.g. video players to work)\nClient-side/server-side window decorations negotiation has been standardized and implemented\nThe xdg-shell stable protocol is now supported\n\nswaylock\nman swaylock\n\nNow supports different images on each output\nAppearance can now be configured\nAdds an optional config file\n\nMisc\n\nXwayland is now started only when the first X11 client is started\n\nBugs fixed\n\nAll known problems with xdg-shell have been fixed (such as blurry menus that don't accept focus)\nAll known problems with Xwayland have been fixed (such as Firefox menu weirdness)\nAll known HiDPI bugs\nAll known swaylock & swaybar bugs\nReloading your config doesn't cause crashes\nTTY switching doesn't hang your system\nMost bugs in general are fixed. sway 1.0-beta-1 has been released:\n\nhttps://github.com/swaywm/sway/releases/tag/1.0-beta.1. They always are, yes.. Should clarify that beta.2 has not yet been released, this is a provisional changelog.. Aye, beta.2 has been released. Forgot to update this thread.. We should probably start thinking about beta.3 soon.\nAlso, we set up a milestone for 1.0 (stable): https://github.com/swaywm/sway/milestone/3. We're going to release 1.0-rc1 at FOSDEM, come hang out with us and get a sticker!\nhttps://fosdem.org/2019/schedule/event/bof_sway_wlroots/. https://github.com/swaywm/sway/releases/tag/1.0-rc1\n1.0-rc1 has been released!\nThe release candidate process will have us shipping one of these every week until a week passes with no bugs found. Woohoo!. sway 1.0-rc2 released: https://github.com/swaywm/sway/releases/tag/1.0-rc2. This comment is for /r/linux verifying my identity as /u/nbHtSduS (we're planning an AMA next week).. sway 1.0-rc3 released:\nhttps://github.com/swaywm/sway/releases/tag/1.0-rc3\nAnd we're doing an AMA on /r/linux!\nhttps://redd.it/as1dd0. sway 1.0-rc4 released:\nhttps://github.com/swaywm/sway/releases/tag/1.0-rc4. sway 1.0-rc5 released:\nhttps://github.com/swaywm/sway/releases/tag/1.0-rc5. Can you add a utility function to this PR for me? container_damage_whole which just damages the container's whole box on its output (and any subsurfaces of descendants).. Man fuck glibc and gcc. Please don't report this kind of issue until #1700 is merged. We want to overhaul the parser, if @minus7 ever has the time :')\nhttps://github.com/swaywm/sway/issues/1034. I think this is good now.. cc @4e554c4c . This is not being worked on, feel free to adopt it. elogind ships with sd-bus.. Also, for the record, tray support should be compile-time optional.. I'm prepared to release 1.0 without this if no one starts posting patches soon.. Can you post the WIP patch so someone else doesn't have to start from scratch?. Thanks!. I don't think the old code is very maintainable. I know it's my fault for pushing back against sd-bus before. I'd rather not port it as-is, I think it'd be better to refactor it.. I think I would prefer to continue to have broad support for what the ecosystem is actually doing. I think KDE is in the wrong here, it's better to improve the canonical protocol than to encourage the proliferation of proprietary protocols.. I realize those two sentences conflict with each other. The point being that I want to support the freedesktop protocol as the primary target, but I acknowledge the popularity of the KDE protocol so we should support it as well. We should consider it deprecated and encourage the ecosystem to move over time, however.. Yeah, we can start talks. But in the meantime, let's implement both.. afaik KDE and Qt has no plans to move away from status icons.. Copying @kbroulik and @notmart, some relevant KDE peeps. Thanks!. Yep, seems to be fixed.. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. I would consider a patch for that. This is known.. What version of sway are you using?. Which branch?. If the issue affects rootston as well, please file a bug with wlroots. Thanks!. Definitely the kind of attitude that makes me want to support nvidia proprietary driver users even less.. Oh wait this needs man page updates. https://github.com/swaywm/sway/issues/1795. Oh, Github was only showing me a subset of the changes.. womp. >The height of the bar unless specified should not be a function of its contents but rather, like the manual says, should only depend on the font size.\nThis isn't exactly going to work, font rendering is messier than that. But yeah, we'll fix it.. Can you provide some config info that reproduces the issue?. For reference\n. Fixed.. This will be addressed when wlroots is completed and integrated with sway.. We're not going to set a non-integral scale factor by default.. Yes, it has downsides in all compositors. We have to either copy pixels or drop pixels, it's impossible to faithfully render clients at a fractional scale factor.. Thanks!. Thanks!. >you asked not to open issues for this branch, but this part already has been reworked?\nIf you're writing patches you can open tickets. I closed this due to don't report bugs for the alpha god dammit. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Thanks!. Test setup: wayland backend with this config\nTest issues:\n\nPressing f on mpv does not fullscreen the video (mpv config)\nMoving a fullscreen view to another output/workspace un-fullscreens it; it should still be fullscreen there\nMoving a container to a workspace with a fullscreen view, then switching back to that workspace will have the moved container focused. You can then fullscreen that container, with amusing results\nIf you fullscreen an unfocused window (e.g. via swaymsg \"[title=gedit] fullscreen toggle) it does not receive focus\nIf you fullscreen a window on an unfocused workspace, I can't seem to figure out how to give it focus when returning to that workspace\nIf you open two windows on a workspace, fullscreen one, then use criteria to fullscreen the other, breakage ensues\nOpen two windows on an output, fullscreen one. Move it left and right (ideally this should move it to the other output and back again) and bugginess followed by crashiness ensues\nFullscreen mpv, then resize the wayland backend output, observe mpv not getting resized (probably have the same issue if you modeset)\n\nAlso tested a bunch of other stuff that worked fine.. On this branch, closing qutebrowser context menus segfaults sway.. >wl_shell's set_fullscreen() function is marked as todo. I think a necessary function is missing from wlroots and rootston so I'd have to make a PR there too.\nEh, I wouldn't bother.. >Also, I think I've discovered an issue in wlroots where a rotated output doesn't have the wlr_output's width and height swapped. This causes my code to read the wrong dimensions for a fullscreen view on a rotated output.\nThis is addressed by getting the width/height via wlr_output_effective_resolution. Still getting segfaults when dismissing qutebrowser context menus, also tested on DRM backend.\n\nqutebrowser (webengine+x11 backend)\nRight click an image\nClick one of the options\nRIP\n\nAlso, moving fullscreen window to another output still un-fullscreens it.. qutebrowser crash:\n```\n0  0x000055f660154ba7 in seat_set_focus_warp (seat=0x55f660d485e0, container=0x0, warp=true) at ../sway/input/seat.c:462\n1  0x000055f660155121 in seat_set_focus (seat=0x55f660d485e0, container=0x0) at ../sway/input/seat.c:574\n2  0x000055f66015614b in dispatch_cursor_button (cursor=0x55f660d3dff0, time_msec=1433127, button=272, state=WLR_BUTTON_PRESSED) at ../sway/input/cursor.c:211\n3  0x000055f6601561c4 in handle_cursor_button (listener=0x55f660d3e040, data=0x7fffae5f6860) at ../sway/input/cursor.c:221\n4  0x00007fca2a81b9d9 in wlr_signal_emit_safe (signal=0x55f660d3e168, data=0x7fffae5f6860) at ../subprojects/wlroots/util/signal.c:29\n5  0x00007fca2a7f9b82 in handle_pointer_button (listener=0x55f661174e90, data=0x7fffae5f6860) at ../subprojects/wlroots/types/wlr_cursor.c:344\n6  0x00007fca2a81b9d9 in wlr_signal_emit_safe (signal=0x55f661162ae8, data=0x7fffae5f6860) at ../subprojects/wlroots/util/signal.c:29\n7  0x00007fca2a7e9dae in handle_pointer_button (event=0x55f6611ac790, libinput_dev=0x55f66108fae0) at ../subprojects/wlroots/backend/libinput/pointer.c:84\n8  0x00007fca2a7e968a in wlr_libinput_event (backend=0x55f660b62200, event=0x55f6611ac790) at ../subprojects/wlroots/backend/libinput/events.c:217\n9  0x00007fca2a7e85ad in wlr_libinput_readable (fd=27, mask=1, _backend=0x55f660b62200) at ../subprojects/wlroots/backend/libinput/backend.c:35\n10 0x00007fca28d209b2 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n11 0x00007fca28d1f14c in wl_display_run () at /usr/lib/libwayland-server.so.0\n12 0x000055f660145762 in server_run (server=0x55f66037f360 ) at ../sway/server.c:141\n13 0x000055f660145058 in main (argc=4, argv=0x7fffae5f6c58) at ../sway/main.c:418\n```. >Also, moving fullscreen window to another output still un-fullscreens it.\nWe can take this to a separate patch\n@emersion merge it if you like it. >I'm guessing this feature requires some wlroots improvements.\nNah it should be good to go. You have to render them, presumably with cairo, into a wlr_texture and upload it to the GPU. Then render it with wlr_renderer.. I want to wait until the xdg-output discussion on wayland-devel is resolved so we can do this without sway-specific IPC.. https://github.com/swaywm/wlroots/issues/961. xdg-output v2 is available in the Arch repos now and supported by wlroots.. >Is there anything else I need to do or is that a bug in wlroots?\nSounds like bug in wlroots maybe. >I'm ashamed to admit I'm still using i3 (I have rotated outputs)\nTry the alpha!. >This just doesn't work from a security perspective\nNote that this situation is something I think we can address with what I eventually have in mind for security stuff. Also, swayidle is going to be a privledged client at some point, when we add a protocol for DPMS so that the client can set that directly without using sway IPC (which is sway specific).. The advantage is that the approach can be more complex without requiring every compositor to implement something themselves. With this approach you can:\n\nLock the screen the screen after a timeout\nLaunch a screensaver on top of that\nDim the screen after a bit longer\nDPMS off after a bit longer\nSuspend the machine after a bit longer\n\nIf you really wanted to go all out, or any combination of these with any timings you prefer. All of it would (in theory) work on any compositor with the same idle daemon and no changes to the compositor or extra configuration.. Well, yeah if you hardcode the timings and do those 3 specific things, it's easy as pie. But what if you don't?. Which is a nontrivial amount of code to write that every compositor is going to have to do and will probably do differently.. Aye, this is probably not the right place for it. I intend to file some follow-up tickets to generalize it a bit more, then pull it into a separate project along with swaybg and swaylock.. In terms of \"put it in sway/wlroots\" versus \"put it in a daemon\", I think everyone has said their piece and I will go along with whichever solution @snaggen prefers.. This is looking okay, but it needs a lot of work.\n\nReview the style guide and fix the errors\nswayidle needs a man page\nswayidle should use an event loop instead of threads. Use the wayland-server event loop if you want,  we already depend on it\nInstead of adding specific sway commands like this, I imagined a different approach, something like this:\n\n$ swayidle \\\n    logind-sleep exec \"swaymsg exec swaylock\"\n    timeout 10m exec \"swaymsg exec swaylock\" \\\n    timeout 20m dpms on\nThen instead of having sway know much about it the user should just exec it themselves.. If it's easier you could use the swaybar event loop, which you can reference to get things working.. I don't want the just works behavior, it's no big deal to make people be explicit about it.. >Why? Why is it bad that things works, without people need to learn every knob in every daemon to get a sane behaviour? I have added the possibility to disable it all, for the people willing to learn this...\nJust gonna go with \"because I said so\". It's a matter of personal preference.\n\nHowever, the systemd sleep lock is not possible to setup by commandline, since that includes checking and releasing the lock. You can control that by specifying -x on the command line to disable it.\n\nInvert it, pass a flag to enable it\nWith no command line args swayidle should do nothing (except maybe print a warning telling you it's going to do nothing).. Still seeing style errors, please review the style guide. https://github.com/swaywm/sway/blob/master/CONTRIBUTING.md. We should probably think about how to incorporate idle inhibit into this. Updating the idle protocol to specify whether idle inhibit is active would probably be good.. >No need for this: just prevent the timers from being triggered while idle inhibit is active?\n:+1: . I see. Would suggest adding an arg that just specifies a command (or commands) to execute before sleep.. You can just assume that the command is a lock screen, or rather is whatever the user wanted you to start (maybe not a lockscreen). You can wait a second or something if you want.. Well, realistically lay out the worst case scenario for me.. Can you rebase so that you don't have such a long commit log? Rather than make cleanup commits just squash them into a proper commit. Sorry, I've just been busy and this is a big patch. I'll review it again soon.. This is looking much better, nice work.. The -l and -i options should be removed and users should instead just use the normal command line syntax.. Yeah, I'm not a huge fan of those.. Also, with the approach refined a bit now I'd be open to having it (commented out) in the default config again.. I pushed a new man page, let me know what you think.\nOne more change, let's get rid of timeout <n> exec <cmd> and just make it timeout <n> <cmd>. Already updated the man page assuming this.\nThanks for your patience and hard work, this is looking really great!. Beautiful. Great work.. scdoc is very strict about formatting - did you actually run it on your changes?. Ah, so it goes: https://builds.sr.ht/job/3079#task-build-14. Thanks!. >Maybe swaylock should install this by default\nNo. I'm still in favor of the external daemon approach. Can those who are still in favor of the in-the-compositor approach summarize their reasons succinctly in a comment in this thread?. Rationale for external daemon: Daemon can implement complex situations (e.g. dim screen after n seconds, then lock, then DPMS, then suspend), or simple ones like simply lock after n seconds, and be useful on many compositors without making them implement a more complex idle behavior. It also makes us expose DPMS to clients who might want to do novel things with it, and it keeps systemd-specific code out of sway.\nI don't think the complexity add is much.. I'm open to having sway support configuring this daemon in your config file and launching it from there (though I don't want it to work like the bar, i.e. by sending the config over IPC).. >Also one thing that I think will be easier to do with in the compositor is handling new outputs, like if I connect my laptop to a docking station, the new output should display the lock screen immediately, without even a glimpse of my desktop. Same for new keyboard and mouse.\nThis is unrelated to idle, more of a swaylock problem (and swaylock isn't being moved into the compositor any time soon). We already handle the case of new keyboards/mice immediately being restricted if the screen is locked, though.. wlroots can definitely implement the (e)logind side of things. Whatever.\nThe rest is opinionated, and wlroots isn't allowed to be opinionated.. Closing in favor of #1824. Thanks!. Something to note is that I wanted to change criteria a little bit for wlroots because we have some access we didn't have in wlc. Each shell has different properties - xdg-shell has app-id and title, xwayland has the kitchen sink, etc. On sway 0.x we had to tell users to find new criteria to use because their old X-based criteria were sometimes not possible on sway due to limitations in wlc. However, with wlroots, we have direct access to Xwayland so we should be able to fully support all i3 criteria for Xwayland windows, as well as new criteria for xdg-shell et al.. I like the ideas in your PR description. Woot. I looked into this a while earlier and the change will be a bit involved.. Thanks!. Thanks!. Blocked pending a new mpv release. It's broken and deprecated and annoying to maintain. We can't find any examples of users who don't support xdg-shell too, but if you come up with examples we'll block this on sending them patches.. Work is ongoing to add support for deprecation to wayland-scanner, deprecating wl_shell, and removing it. There is no reason to use wl_shell. Again, find links to software that doesn't support xdg-shell and we can send them patches.. The plan is to make use of e.g. gcc deprecation attributes. And you still haven't even shown us one of these tons of programs that will break.. Also, you'll have to ship xml anyway because wayland-scanner isn't the only scanner in town.. RIP o7. This is the intended behavior. Maybe make your lockscreen image owned by another user?. Correct.. >It was mentioned in IRC that we should use a wlr_texture, but I've done it textureless using wlr_render_rect().\n-1\nThis approach will not be sustainable as we add text to it. >Colours are now stored as a float[4] rather than uint32_t so that they can be passed directly to wlr_render_rect().\nThis was done for easier use with cairo. >Or is this PR not a WIP anymore?\nYou were the one who changed the title to WIP. Make sure damage accounts for this when moving windows or changing borders. This doesn't work correctly on hidpi (borders rendered at 1x scale and in the wrong position, but space is allocated for the full size), and pointer input at any scale factor is being sent to the wrong surface coordinates.. woot. Copying what we need and refactoring the rest away. Yeah, I can. If anyone cares, prepare a list of issues and I'll move them.. It already does, we support musl and FreeBSD. We forbid GNU extensions.. >Why not /usr/libexec?\nMeh. Yeah, can you change the option to libexecdir but leave the default as /usr/lib. Resubmitted the build. Is this still relevant?. I like the bitfield approach. I retract my endorsement of the bitfield approach and vote for abandoning this PR. rip. Thanks!. I am unable to reproduce this. No, in sway 0.15 the primary selection is an X concept that isn't tracked by Sway. Just use xsel to get it.. That's because Wayland native windows don't have a primary selection. In gnome they have a special primary selection protocol, which sway 1.0-alpha.1 supports.. You can set up for_window rules to automatically float them.. No, not anymore.. Just Werks when you wiggle the mouse. Extended examples with some gestures for interactive move/resize/rotate of windows. This looks close... I wonder if you could write a little demo program?. Duh, sorry. Yeah, I think it's time to start implementing some of this stuff so we can get an idea of how well the API works.. Thanks!. I understand the desire to avoid bloating this PR, but at +71/-21 you have a long ways to go before you get there. I'd rather not merge with known bugs when we could just fix those bugs and merge later.. I still get mouse input going to the first child whenever I move over the tabbed layout. If focus_follows_mouse is on then moving the mouse over the tabbed layout focuses the first child.. Also, changing the border of any of the children messes things up.. Where does that mess things up?. Where is the code that does this calculation?. What we do elsewhere, and should probably do here, is set aside some doubles for temporary use and sort them out into ints later on. wlr_box should not use doubles, you can't subdivide pixels.. I still have the issue with changing the borders of the children at runtime making things break.. 1. Open a few windows in a tabbed layout\n2. Execute border toggle\n3. Observe breakage. Looking better, but I can still get things to look wrong by making the children of my tabbed layout have different borders and switching between them. For example:\n\nOpen two windows in tabbed layout and focus the first\nborder toggle\nfocus right\n\nWe should probably\n\nAlways use the first child's border setting for the whole tabbed layout\nMake any border toggle command for the child of a tabbed container affect the first child. Not sure if this is directly related to your changes, but if I prepare the following layout:\n\n(workspace L_VERT\n  (view A)\n  (container L_TABBED\n    (view B focus)\n    (view C)))\nThen run border toggle, focus is moved to view A. It should stay on view B.. Those problems aside this is looking really solid.. >The other approach would be to to modify the toggle/hide command for tabbed layouts and have it change all the borders in the parent layout.\nHey I like this idea\n\nI've never actually used i3 before, so I don't know what it did in this case. Did it just hide the entire bar?\n\nActually i3 forces the border for tabbed windows to always be \"normal\". I like supporting alternate border styles though.\n\nThis happens on the master branch as well if you open up two different windows and then toggle the border on the second one.\n\nAlright I'll file a bug. Hey, if you get this finished up today I can ship it in 1.0-alpha.2. No rush if you don't have time, though.. https://github.com/swaywm/sway/issues/2063. Thanks!. Please rebase. Thanks!. >Add a IPC_SET_CLIPBOARD message, this would allow to do things like pass github.com | swaymsg -t set_clipboard. But how to set the MIME type? Should that be a JSON header before the data?\nYou can do passs github.com | swaymsg -t set_clipboard text/plain. Note, the IPC already sends along your command text even for non-command IPC messages. What system is that?. Haha, no. But what's odd is that your system finds libinput, libcap, etc just fine. That it doesn't find this one is weird, and sounds like a deeper issue.. Can you report this bug to meson?. aye. Thanks!. If there is, it's not sway's business. Ask the Nautilus or GTK people for help.. Can no longer reproduce this. Great work, thanks!. Thanks!. @nbraud looks like this has some issues, take another crack at it and submit a new PR please. This code is liable to cause buffer overflows. Measure the new length ahead of time and allocate it once.. Also, please associate your committer email with your GitHub account.. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Try the master branch.. The sway-git package is on the 0.15 branch. Build sway yourself.. What version of sway?. What version of sway?. Oh, it's obvious. 1.0 doesn't support floating yet. This will be addressed when wlroots is completed and integrated with sway.. Please rebase. This is looking great. Criteria has been in sore need of an overhaul for some time now.\nIf you update sway.5.txt I think this is ready to merge.. Thanks!. I was too quick to merge, gonna revert. After a bisect it seems that this causes both of these issues:\nhttps://github.com/swaywm/sway/issues/1966\nhttps://github.com/swaywm/sway/issues/1965. Thanks!. Thanks!. What's the latest commit you're able to reproduce this with? of both sway and wlroots. We also discussed activating all of the views under the focused container. Can you add that?. Definitely see if you can make it consistently use iterators or explicit recursion.. LGTM, but still have to test this tomorrow. We'll have to keep in mind how this interacts with stacked/tabbed as we implement those as well.. Please rebase. Works great, thanks!. The commit that was added in was by @RyanDwyer with the proported goal of updating the cursor when the border style changes.. Thanks!. swaymsg mark foobar\nDid not see my terminal get the foobar mark. Ah, I see you haven't done that part. I tested it with criteria and it worked fine.. Thanks!. Thanks!. Thanks!. This is ready for review.. I reverted the change that caused this.. Duplicate of https://github.com/swaywm/sway/issues/1963. Does this also fix https://github.com/swaywm/sway/issues/1965 ?. Can you add a WAYLAND_DEBUG=1 log?. Neither can I.. cc @RedSoxFan . gaps. Thanks!. >setting the timeout interactively doesn't affect a cursor until it moved. For example, from no timeout to some short timeout (e.g. 10ms) the cursor won't disappear until it moved.\nYeah, I saw this coming and was okay with it. Fixing it will make a lot of unrelated systems talk to each other.. Set the minimum to 100ms, also prevents you from setting a negative timeout.. This is a pretty weird use-case tbh. Can you try exec sleep 500 && swaylock -c 203040?. Note that it's a known problem that swaylock doesn't prevent keybindings from going through yet.. Sway uses CAP_SYS_PTRACE to read /proc/:pid/cmdline, which it uses to enforce security rules. This is something we will not be doing indefinitely, we're working on a new design.. >Can you please give at least one example of such security rules? Is there a document where I can easily consults them ?\nman 7 sway-security. Thanks!. cc @atomnuker, when switching between videos in a playlist mpv should probably re-center the video. Toggling fullscreen twice fixes the issue.. This is also a sway bug.. Note that it's likely that Weston is more tolerant of protocol errors than Sway, and it is in fact a kitty bug.. Yeah, that's Kitty's bug. A lot of clients are findings bugs in their implementation when tested against wlroots, it's stricter than most Wayland compositors about protocol correctness.. Thanks!. Auto layouts are being removed, so no.\nCheck out Way Cooler: http://way-cooler.org/. What version of sway?. I can't reproduce on wlroots. We're moving away from wlc.. Please stop making packages for software releases I explicitly, in bold, ask people not to package.. What's your keyboard layout? Did you configure it?. Answer the damn questions you're asked. Nah, I haven't seen this lately.. Thanks!. >Do you still want to go with the first-child solution?\nWe should do first descendant, maybe?. Or perhaps dispense with all of this and just make the tabbed container itself have borders.... i3 forces it to use the title border style, doesn't it?. But i3 always applies a consistent border regardless of which child is focused, right?. Alright, I guess we can live with it for now. I'll get this latest version tested shortly.. You need to split this up into several commits so it can be properly reviewed.. Part of me is saddened by this patch. But part of me accepts it as necessary. If you don't mind killing that dead comment, I'll get this merged up.. Thanks!. >The only issue that I've noticed so far is that you cannot move a container out of the stack in either vertical direction. It will only move up and down the stack and stop when hitting the bounds. It appears tabs have the same issue in the horizontal direction.\nSince this affects tabs too, you should file an issue and we'll address it separately.. Great work! Thanks!. https://i3wm.org/docs/ipc.html#_marks_reply\nI'm not sure what this means. Can I see a sample GET_MARKS response from i3?. If focus_follows_mouse is enabled, then this is by design. Having issues with move left|right and my output layout on this branch. My cursor leads me to believe that the output layout is still correct but the move commands focus the wrong outputs, I can get stuck on my transformed (270) output. Also, workspace 1 brings me to workspace 2 (which is on the transformed output).\noutput DP-2 pos 0,0 res 1920x1080\noutput DP-3 pos 1920,0 scale 2\noutput DP-1 pos 3840,-700 transform 270 bg `wallpaper 1:1 9:16` fill\noutput HDMI-A-1 pos 4920,0. Border renders incorrectly when gedit is floated (cursor events are wrong too). >Is it acceptable to not send the unmaximize event? The other option would be respecting CSD and accounting for the glow offset everywhere.\nFor now let's just always keep it maximized. We'll later give the user some control over this when we bring in the SSD protocol.. >I'm happy to squash all my commits into one prior to merging if you prefer a cleaner git history.\nNo, please don't.. Can you prepare a summary of necessary follow-up work? e.g. move/resize. >I haven't been able to replicate your output problem, but I think I fixed it in \"Fix getting adjacent output\". Can you please test again?\nI'm still encountering this. If I focus the leftmost output and focus right, I end up on the 3rd output (which is the one transformed 270). workspace 1 still brings me to the 3rd output.. The output issue was introduced by 38deed7fe3d8a26161c3d3697d90b8a04cdaa540.. 15dd31d fixes the issue I was having with focusing the wrong outputs on focus left/right.. Seems to work as advertised. Will run this as my daily driver for a bit.. Experiencing weirdness with mpv (--gpu-context=wayland) on my hidpi display. Similar to what I saw with mpv on x11 before 11393af.\nAlso having damage issues after unfullscreening a floating mpv window.. Getting the same mpv issues as before now even on lodpi displays. This is definitely not stable.. I don't want to hold this up forever so I'm going to file a separate ticket for the border issue.. Thanks!. We don't want to focus if you hover over the titlebar, but if you hover over a tab container and you previously had some other container focused we still want to give focus to the tab container.. Also breaks this on a single output:\n(workspace L_HORIZONTAL\n  (view focus)\n  (container L_TABBED\n    (view focus-inactive)\n    (view))). The correct solution is probably to check if we're about to focus a child of a tabbed container to see if it's the focus-inactive child and if not, focus the focus-inactive child instead.. Yes. >This also brings up a good point. If sway detects that swaylock (or whatever locking process is used) didn't exit cleanly, it should try and recreate it, so we don't just end up giving the a malicious user access to the session.\nI don't think this is worth it. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. This is a known problem, it's being worked on.. >I'd prefer the workspace not to switch at all on swap.\nIs the behavior of your current patch different from i3's behavior? If so that still needs to be addressed. I guess I can take a crack at debugging it if you're lost.. Alright. We'll have to do a big IPC cleanup later anyway.. Thanks!. >These commands were crafted to match their descriptions in $ man 5 sway. They implement both gaps and smart gaps. They support all permutations of the commands.\nCan you double check that what's described in sway(5) matches the behavior of i3-gaps. Code LGTM, will test it later.. Works well after a quick test too. Let me know when this is ready for merging.. Rather than littering this with comments all over the place, you should document the requirements, constraints, and approach in a single comment at the top and let the code do the rest of the talking.. Sit tight, this is still in my review list.. >Should Sway match i3-gaps, or should it continue doing what it's currently doing?\nShould match i3-gaps.\nAlso there are merge conflicts\nStill looking good though, nice work and thanks for your patience in tying it all together.. Thanks!. Thanks!. +1. We might also consider making the command line interface user-friendly. +1. We've never made any API stability promises about the swaybg interface. In fact.... Thanks!. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Thanks!. >Do we want to support the legacy force_focus_wrapping yes|no syntax and map those to WRAP_FORCE and WRAP_YES?\nYes. Can you try it on master? swaylock now uses UTF-8.. This is only half of the solution. In the future we'll also need to implement xdg-positioner in sway to prevent popups from being opened outside of outputs.. What's the story here?. Note all of the interactive move/resize stuff also applies to tiled views. Why not just render the fullscreen view with a constant instead?. That sounds better to me.. Thanks!. Thanks!. Has anyone confirmed this? Is it still reproducable?. Read through your details about how this works, seems good to me.\nCan we worry about \"what to do with old textures\" later?. This works pretty well on a cursory test, but it occurs to me that we're not going to be able to stress test this without something like interactive resize support.. https://sr.ht/p99v.mkv\nEdit: actually it's not much better on master: https://sr.ht/Cr1W.mkv. Codewise this looks pretty good. I'm a little concerned about thrashing the heap all the time but I'm not sure what alternative to offer. Need to test it more but I'm gonna wait until the current round of bugs is fixed.. >I suspect the overhead of spawning the swaymsg process 100 times and connecting to the IPC socket makes the test too inaccurate. But rather than implement interactive resize, an easier option might be to allow held keybindings to repeat, then hold your keybind for resize shrink width 1px. The tests also depend on how long the views take to respond to their configures, so if we're serious about performance then a good first step would be to obtain figures of how much time is spent waiting for views vs not waiting for views.\nIt would be nice if we had some code in place which measured this stuff, and printed to the debug log how long we spent calculating the layout, how long each client took to get configured, and how many frames elapsed before the first correct frame was rendered.. Probably hidden behind a flag like the debug overlay is.. Something I particularly wanted to see was a measure of which clients took what amount of time to get in sync. Would also be cool to get some insight into what's going on when there are several pending transactions.\n\nAfter this is merged, I plan on standardising how we handle debugging. I don't like strcmping environment variables multiple times (see SWAY_DAMAGE_DEBUG). I would make SWAY_DEBUG a comma separated string which is used to populate a bitfield server.debug_options. Then in various places we can check that to enable debug features. Another benefit of this is we could enable and disable debug features at runtime using something like swaymsg debug 'foo,bar'.\n\nI was thinking something more like getopt debug flags:\nsway -Ddisplay-tree -Dtxn-timings -Ddamage\nThese would naturally be unsupported options and we'd reserve the right to change/remove them at will.. Nice!. Couple issues:\n\nWhen fullscreened, qutebrowser's left border is shown\nWhen exiting fullscreen, there are damage problems on swaybar. Seems those issues only appear if qutebrowser fullscreens itself, e.g. by fullscreening a video.. Thanks! \\o/. Debug it yourself and send a patch. We do not accept bug reports for alpha releases.. Please do not report bugs from the alpha releases.. @martinetd take a look at this. Thanks!. This is looking good, nice work. This seems kind of silly. What if we just let you escape $\n\nbindsym $mod+Return exec $$term. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Needs rebase. We can just turn off -Werror for the 0.15 branch. Not a fan of this approach. I'd rather have each workspace just keep a track of the outputs it has been on in a list of priority. That way, you can remove N (where N>1) monitors and plug them back in and have everything as it was.. Can you give a test plan that demonstrates the bug and verifies the fix?. Thanks!. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Suprious warnings are not important right now. The master branch is not meant for end-user use, and warnings are useful for developers.. >Overall this looks pretty good. I'm always a little bit worried about adding too much complexity, but this patch seems fine.\nSo is that a +1 or what. Thanks!. We're not going to support using the clipboard this way from 1.0 forward.. (and the new approach won't have this issue). https://github.com/swaywm/sway/wiki#blank-window-in-java-application. \"Fixes\". You were right, this isn't acceptable. Leave it as a private patch for Debian.. I use\nbindsym XF86Sleep exec $swaylock -i `wallpaper` --scaling fill\nbindsym $mod+Pause exec $swaylock -i `wallpaper` --scaling fill. Thanks!. Shouldn't be too hard, you should dive in and send a patch.. This isn't really something I'm interested in supporting upstream, but it might be possible for others to do.. Thanks!. Did we decide it wasn't possible to pull this information out of wlroots?. bleh.. waiting on @RyanDwyer's review. Thanks!. @Hummer12007 I wonder if you could take a look at this too?. Apparently he can't.. No. A \"hostile\" system isn't that hard to end up with. Say for example someone (without root access, mind you) manages to steer you to a patched libinput via LD_LIBRARY_PATH in your .bashrc which installs a keylogger.\nI'm also not sure what this is about:\n08:52 <Asmadeus> And we unset LD_PRELOAD as well for the same reason but it's easy enough in the preloaded library to hook on execve and reinsert itself so that doesn't change much if you think about hostile environment\nIf you want to set the LD_LIBRARY_PATH there's a compile-time option to do it.. Right, but we are trying to keep child processes safe here. Let's switch libinput with xkbcommon in my example.. Remember that dumb Wayland \"keylogger\" that Wayland naysayers keep dragging out and putting on a pedistal? This addresses that problem.. Hm, good point.. fwiw we could put both of these in a file which is root editable, like the security config, so users can change them without having to recompile.. Remember that we're protecting sway's child processes, not sway itself.. >On the other hand, if you assume sway is setcap'd/setuid, the environment will be cleared (and not herited) for both variables anyway\nOkay, fair enough, so why do we give a shit. I love that the work for the compositor is just one line of code.. Can you add the email address you committed this with to your GitHub account?. Thanks!. which version of sway?. We have a function which applies input configuration when new input devices are discovered.. Can no longer reproduce this. Thanks!. This happens for me with split layouts too.. Thanks!. Thanks!. Rebased and addressed comments.. That's not how it works. It's only meant to work consistently with processes launched by sway itself. Try it with stuff bound to keybindings. I also set up dmenu like this:\nbindsym $mod+d exec dmenu_path | dmenu -p \"Run:\" -l 10 | xargs swaymsg exec\nSo that sway gets to exec the process I ask for.. >Ah, so it is supposed to match itself, and work in case you run x in a workspace then switch workspace before the window appears?\nya\n\nSmall nitpick: the workspace create might still be needed, if there was nothing ni the workspace I left between running bindsym and window creation, the workspace is destroyed when I leave it, and it doesn't show up in swaybar when it is created again when the window appears.\n\nThis is probably an unrelated bug. Updated\n\nOtherwise it will try to apply the criteria to the workspace (or wrong view) if you've switched workspace between the launch and map.\n\nI don't think this is how it works. I can give the full explanation if you want, but by way of demonstration I have a rule which removes borders from Chromium, which I just opened on an unfocused workspace via this feature. Everything behaved as expected.\n\nFor the crash, I can replicate this somewhat reliably now. If it has to create the workspace for the view then the workspace is added to the main/pending tree. The output needs to be arranged so the workspace is put in the output's current.children list. The view implementation does the arrange on the view's parent. In this case the parent is the workspace, but the arrange needs to be on the output.\n\nI either don't understand this or it isn't still a problem, by way of the previous proof.. LGTM but I'll have to test it when I get home from work. Got annoyed enough by this problem at work to test this out now :wink: . We can't let clients slowloris the compositor into a standstill.. Also, letting the client choose its initial size itself lets us stow that away and restore it when we float the client later.. >Alacritty sets a window geometry larger than the surface's size. We don't handle that properly.\nWe should report this to Alacritty (and fix the bug on our end too).. -1, I think this stretches our liberties with these protocols too far. I might be able to get behind a general powersaving mode, which would enable quality-of-life-lowering optimizations like this.. >>We can't easily tell if a surface is opaque.\n\nWhat we could do is make swaylock set the opaque region of the surface, and make sway use this optimization only if swaylock's opaque region covers the whole output.\n\nI think you guys are on the right track. wayland.xml defines an opaque region, we don't need to go to the GPU for this.. Side note\nWe could totally union all of the opaque regions of all of the layers above the shell layer, then compare it to individual surfaces beneath and stop sending frame events to surfaces which are occluded even if the layer surfaces don't fully cover the output. >I don't like this PR, but the old code is worse and refactoring output.c is necessary. @SirCmpwn merge it if you like it\nI'm always down to not merge +928 \u2212814. >Also not happy storing the list of idle inhibitors directly in servers struct, I might want to encompass things in a sway_idle_inhibit_manager_v1 or something\nYeah do this. Wait does this actually inhibit idle activity? I thought we'd have to somehow communicate this to swayidle. Thanks!. Thanks!. Rebase please. I think we should clip tiled views and let floating views do whatever they want.. Closing in favor of https://github.com/swaywm/sway/pull/2466. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. What's the story here?. Thanks!. Thanks!. Thanks!. Thanks!. Needs conflicts addressed. Code LGTM. sweet. I like what's in the man page now, let's just extend that to all of the flags.. Thanks!. While you're at it, can you implement resize grow|shrink <direction> <px> px or <ppt> ppt?\nhttps://github.com/swaywm/sway/issues/1737. Nice work!. Thanks!. cc @RyanDwyer . https://github.com/swaywm/sway/issues/1862. Thanks!. Thanks!. Why did you feel the need to rename this variable while you were at it?. Thanks!. >Ability to set command to run in swaylock container just like solid color or image so the script wouldn't be mandatory,\nWhat?\nI'm not sure what you expect to come out of this ticket.. >Currently swaylock behaves as a top layer to sway workspace. swaylock by itself renders two separate layers - background and indicator - it's possible to set color or image as a background layer but not a window like termite. Such option would make many customization possibilities.\nThis isn't going to happen.\nI suggest you fork swaylock.. I really like that this is +50 lines per shell, nice work @acrisci . You need to also set WAYLAND_DISPLAY accordingly for that to work. In any case, the option is deprecated for sway 1.0 so it's not going to be a concern for long.. >It the --socket option deprecated or setting SWAYSOCK at all?\nThe latter. At first, I thought this would let you ignore urgency from windows matching a criteria, which sounded coolio.. Yep. >It works properly on the right-most screen.\nConfirmed. Thanks!. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. We need to provide a meson_option which sets the appropriate LD_LIBRARY_PATH.. https://github.com/emersion/grim. This still needs mouse bindings, right? We implemented those.. Gotcha, thanks. No worries about squashing, the history LGTM.. Nice!. Hmm, I want to pump the brakes a bit on refactoring swaybg. I like that it's configured in the output command.. Beautiful. Bump. Thanks!. Thanks!. Great :smile: . LGTM aside from the one issue. Thanks!. Thanks!. Overall this LGTM. There's an off-by-one error somewhere\n. Actually I think it's because the urgent colors aren't correctly pulled out of the bar config in ipc.c. Sweet.. Thanks!. This can be done with swayidle on master. Thank you, but the tradeoffs don't make sense here. I'm not going to merge a hundred new lines of code to gain 1us in the common case. No one has 100000 keybindings.. Thanks!. LGTM aside from the one style issue. Thanks!. Thanks!. Thanks!. Assertions are used for catching programmer error. This is normal, yes.. Thanks!. Ah, so that's what causes it. I've been running into this problem for a while but wasn't sure of the exact cause. The bug is probably somewhere in here:\nhttps://github.com/swaywm/sway/blob/master/sway/config/output.c. Running this as daily driver to test it, will report back with issues as I see them.\n\nInteractive resize with nautilus is awful, I think it's due to atomic update issues. Gedit is fine. Maybe if a client starts falling behind once or twice we should mark it as a known-slow client?\nIf I float any GTK3 application and try to click near the right or bottom edges, it falls through to the tiled layer. I can also move my mouse up to the top or left edges, out of bounds, and still interact with the floating window. I think the geometry isn't being factored in here.. - Resizing from the center is not how sway 0.15 nor i3 works, we should resize from the top left corner (using mod+drag). - Client initiated resize and move isn't working on GTK3 apps for me. >Can you provide an example? I don't use GTK3 apps much, and I couldn't find any resize/move option in Nautilus.\n\nClick and drag on the client-side decorations. >Interactive resize with nautilus is awful, I think it's due to atomic update issues. Gedit is fine. Maybe if a client starts falling behind once or twice we should mark it as a known-slow client?\nConfirmed fixed\n\nResizing from the center is not how sway 0.15 nor i3 works, we should resize from the top left corner (using mod+drag)\n\nConfirmed fixed. To clarify client-initiated move/resize, here's how rootston does it:\nhttps://github.com/swaywm/wlroots/blob/master/rootston/xdg_shell.c#L269-L296. \\o/. Nah, I think we should just figure out why focus output DP-1 at the end of the config didn't work (probably because it wasn't deferred).. I'm closing issues that are resolved by the yet-unrelated sway 1.0.. Sounds like a mesa regression, you should reportit to them.. Can you open a ticket?. File a follow-up ticket for spotify. I like it. Most other window managers also aren't in charge of your entire input stack. But fair point, we should probably turn this off by default.. This is an Xwayland bug\nhttps://github.com/swaywm/wlroots/issues/848. Thanks!. Thanks x2!. This is probably a nouveau bug.. Please report nouveau bugs to nouveau.. Nice! Sway 1.0 now officially supports every feature I use in my config file :tada: . >how do I enable debugging symbols?\nIf you have to ask, you should not be using the alpha releases.. Read the stack trace, figure out the problem, send a patch.. I made some problems with my config that caused the error for unrelated reasons. This is actually working fine.. Can you update the man page and address the build failure?. (still missing man page updates). Can't we get the current state of the modifiers and OR/AND them with only the bits we want to flip?. I see. Let's take the easy way out for now and just make it effective in the config file (not at runtime)?. Just add it to the appropriate list of commands in commands.c.. Aye.. I like it individual, if you want global do input * xkb_numlock enable. Do whatever you want, just get something mergable. This feature is not that complicated.. >Can you actually move/rearrange tiled windows in i3 by dragging the title bar?\nYou can do this in sway 0.15.. My bad, we're still waiting on move support.. Taking 1.0-beta.1 off of this because the plan sucks. New plan under discussion here:\nhttps://github.com/swaywm/wlr-protocols/pull/27. Anyone interested in finishing this one up?. Sweet!. We should probably use something similar to eval_boolstr ourselves.. Thanks for putting that list together, much appreciated! I went through and crossed out some things that don't make sense for sway to implement.\n\n\n[ ] font (sway: can be command)\n[ ] workspace_layout default|stacking|tabbed (sway: can be command; allows auto)\n[ ] set $  (sway: can be command, despite documentation; if  is given without $, the $ is silently added instead of error)\n[ ] workspace  output  (sway: can be command)\n[ ] workspace_auto_back_and_forth yes|no (default: no) (sway: can be command)\n[ ] show_marks yes|no (default: yes) (marks starting with _ will never be drawn) (sway: can be command)\n\n\nCan you elaborate on these? Are these just differences with i3 rather than things sway is missing (save for better set docs)?\n\n\nclipboard \nseamless_mouse\n\n\nThese aren't present on master, was this list prepared against 0.15?. Gotcha, thanks. Good call, updated.. Thanks @martinsb, @RyanDwyer fixed that in #2755.. All done! Special thanks to @ianyfan for their hard work on shoring this up.. Can you open a new ticket for those things?. Up to you.. Yes. And send a patch. That's total horseshit.. I'd rather not implement set_from_resource, no.. Thanks!. Thanks!. I like your data structures but not the proposed rehoming of files.. Make it as small as practically possible, and ideally do it when there aren't many open PRs which will have to rebase. Then I'm okay with it.. Thanks!. https://github.com/swaywm/sway/issues/2335. Thanks!. Can you rebase this?. - Tiling a floated window no longer puts it back in the right place (reproduce: (ws (view) (cont (view) (view focus))) then floating toggle twice, it should go back to where it was but instead goes to the workspace)\n- ~~Changing the layout of a floated container does not work~~. Would it make sense for splitv/splith to work on a floated view? I think so.. Sent a floated container to the scratchpad.\n```\n(gdb) bt full\n0  0x00005558089085bb in view_is_visible (view=0x555809a73510) at ../sway/tree/view.c:1002\n    workspace = 0x0\n    floater = 0x555809a2acd0\n    is_sticky = false\n    seat = 0x5558089128a3\n    container = 0x7f5cf2ec3d20 <_wlr_strip_path+31>\n\n1  0x00005558088dc967 in output_damage_view (output=0x5558094b2240, view=0x555809a73510, whole=false) at ../sway/desktop/output.c:421\n    __PRETTY_FUNCTION__ = \"output_damage_view\"\n    data = \n      {root_geo = {x = 4.6361441659457401e-310, y = 6.9187545226569848e-310, width = 56, height = 0, rotation = 1.89276186e-40}, output = 0x7f5cf09d67b8 <__libc_multiple_threads>, whole = 32}\n\n2  0x00005558088dca13 in output_damage_from_view (output=0x5558094b2240, view=0x555809a73510) at ../sway/desktop/output.c:436\n3  0x0000555808906539 in view_damage_from (view=0x555809a73510) at ../sway/tree/view.c:309\n    cont = 0x5558094eeaa0\n    i = 0\n\n4  0x000055580890b4f1 in handle_commit (listener=0x555809a73620, data=0x555809aa10a0) at ../sway/desktop/xwayland.c:292\n    xwayland_view = 0x555809a73510\n    view = 0x555809a73510\n    xsurface = 0x555809aa9540\n    surface_state = 0x555809aa10f0\n\n5  0x00007f5cf2ec4fec in wlr_signal_emit_safe (signal=0x555809aa1328, data=0x555809aa10a0) at ../subprojects/wlroots/util/signal.c:29\n    pos = 0x555809a73620\n    l = 0x555809a73620\n    cursor = {link = {prev = 0x555809a73620, next = 0x7ffe4c33a030}, notify = 0x7f5cf2ec4f36 <handle_noop>}\n    end = {link = {prev = 0x7ffe4c33a010, next = 0x555809aa1328}, notify = 0x7f5cf2ec4f36 <handle_noop>}\n\n6  0x00007f5cf2eb9aab in surface_commit_pending (surface=0x555809aa10a0) at ../subprojects/wlroots/types/wlr_surface.c:397\n    invalid_buffer = true\n    subsurface = 0x555809aa1270\n\n7  0x00007f5cf2eb9cf8 in surface_commit (client=0x555809908d90, resource=0x555809a56980) at ../subprojects/wlroots/types/wlr_surface.c:466\n    surface = 0x555809aa10a0\n    subsurface = 0xbaedc1d6683ff400\n\n8  0x00007f5ceca591c8 in ffi_call_unix64 () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libffi.so.6\n9  0x00007f5ceca58c2a in ffi_call () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libffi.so.6\n10 0x00007f5cf1057a2f in  () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n11 0x00007f5cf1053f29 in  () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n12 0x00007f5cf1055a42 in wl_event_loop_dispatch () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n13 0x00007f5cf105414c in wl_display_run () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n14 0x00005558088cfcc6 in server_run (server=0x555808b26980 ) at ../sway/server.c:159\n15 0x00005558088cf525 in main (argc=3, argv=0x7ffe4c33a7c8) at ../sway/main.c:455\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x55580891045c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x555808910461 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x555808910468 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x555808910471 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x555808910477 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55580891047f \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x555808910487 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x55580890ffc0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n    suid = false\n\n``. When I usefloating toggle` on a floating container's child, the child is removed from its siblings and floats on its own. I would have expected this to reach up to the top-most floating parent container and tile that instead.. This is fuckin cool!. This is possible in theory, but no one has started working on it.. So start working on it.. I'm a bit conflicted. I think that if you want to have opacity follow the focused window around, a small daemon listening on IPC could do it. But if we set aside my reservations in that respect...\nclient.unfocused {\n    border       #333333\n    background   #222222\n    text         #888888\n    indicator    #292d2e\n    child_border #222222\n    opacity      0.8\n    shadow       ...\n}\nI like this but I think we should pitch it to i3 first. I also don't think this necessarily has to break the opacity command.. ACK, fixed there.. Yep. This doesn't fix the bug for me. I will likely be able to look into this over the weekend.. Thanks!. This should be in ZWLR_LAYER_SHELL_V1_LAYER_TOP. I also think that instead of using -l we should pipe the extended details into stdin, because specifying multi-line command line args is annoying.\nI also have some visual changes I want to make, I'll push the changes to your branch later.. I'd also probably call the binary swaynag just for brevity's sake.. I don't think we should treat an arg as a file descriptor OR a literal string. It should be XOR.. +1. I don't think this should apply an exclusive zone.. We should also probably limit the maximum height of the details and let the user scroll with the mouse wheel.. Oh neat I missed that. Needs hidpi support. ./swaynag/swaynag -dm 'There are errors in your config file!' -b 'Exit sway' 'swaymsg exit' -b 'Reload config' 'swaymsg reload' -l < some-file\nThis only shows one button and no details.. -b should probably be done as -b message=action rather than two arguments for better getopt support.\nAlso, this:\n./swaynag/swaynag -dm 'Test' -b 'Fullscreen' 'swaymsg fullscreen toggle'\nGives me the following:\n2018-07-28 09:52:38 - [swaynag/nagbar.c:57] $TERMINAL not found. Running directly\n/bin/sh: -c: option requires an argument. Oh I guess -b is done that way for i3 backwards compatability. Meh.. Config should be moved into a separate file from main.c. The following config does not seem to work:\n[error]\nfont=pango:IPAGothic 10, DejaVu Sans Mono 9. >Any color not set will now fallback to the default color for the error type\nI'm not sure that makes sense, what do you think about coming up with a fallback color scheme which looks like swaybar's defaults?. LGTM aside from the scdoc issue. @RyanDwyer can you take a look at this?. Thanks!. Thanks!. Can you provide more context?. Aight. Thanks!. Thanks!. Note: text input will have to wait until Purism finishes their work with it. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. We don't accept issues for the alpha releases unless you're willing to write a patch. Are you willing to write a patch?. It would seem a lot less strange if you had read the release notes:\n\nPlease do not submit bug reports for this version of sway. Submit patches instead.. Note to self: the bitfield of permitted features will be arrived at via ((default_policy.permit_features & ~default_policy.reject_features) | program_policy.permit_features) & ~program_policy.reject_features.. My intention is to finish this before the week is through.. As I'm working through this, the infancy of this plan is starting to dawn on me. I think I want to remove this from the 1.0 milestone and postpone it while we put together a design which we can bring to all Wayland compositors.. ```sh\n\n!/bin/sh\nIn practice I expect that sandboxed applications would be pre-packaged into a\nchroot by the distribution. Scripts can't be setuid, so this'd have to be\nimplemented in C, but the script is useful to demonstrate what needs to\nhappen.\nThis would expect WAYLAND_SOCKET to be set to a pre-authenticated socket when\ncalled. Run it with a keybinding or swaymsg exec /usr/bin/obs. I set up\ndmenu to run things through swaymsg already, which is convenient.\nSay for example we want to run obs, which needs special permissions to\ncapture the screen.\nappdir=/opt/obs\nrundir=${XDG_RUNTIME_DIR:-/tmp}/chroots/obs/$PID\nSet up a temporary environment for this process to run in:\nmkdir -p $rundir\nmount --bind $appdir $rundir\nmount --bind /dev $rundir/dev\nmount --bind /home/$USER/obs $rundir/home/$USER\nExecute obs (this will inherit all of our file descriptors, and thus\nWAYLAND_SOCKET)\nexec chroot --user=$UID:$GID $rundir /bin/obs\n```\n. How so?. Ah.. I think that gets back to the \"we could have a protocol for creating authorized Wayland sockets to pass to your client's child\", though per the discussion before we will likely need to consider this some kind of \"superuser\" protocol where the user is assumed to have access to everything.. I want to be able to touch and drag left/right to cycle through workspaces like we scroll through them today.. Thanks!. Thanks!. This has a regression on my desktop at work where none of the views on one of my displays are rendered. The borders, swaybar, and swaybg all render fine, but the windows just aren't there. Tested with Xwayland and xdg-shell.. Can we work on this a few commands at a time? I'd rather not do a mega-PR which attempts to close #2336 all in one go.. Thanks!. Can you squash those commits together, too?. https://github.com/swaywm/sway/issues/2398. https://github.com/swaywm/wlroots/issues/934. Needs a rebase. Rather than build up a list of errors in memory, I think we should spawn swaynag on the first error, leave the file descriptor open, and write all of the errors into it as we encounter them. Then when we're done reading the config we can close the fd and swaynag will display.. LGTM aside from those two issues. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. gdi. >I was going to move the workspace_pid tracking code into root.c as well, but realised that the workspace_pids are not stored in the root container. So I figured I'd leave that out and get feedback.\nIt'd probably make emersion happy if you moved this. (I don't care, it's not Wrong where it is). Thanks!. No, that works. I didn't toggle details to see what the real error was. New problem: having errors in your config and starting sway doesn't show swaynag.. >Weird. It kills swaynag before reading anything from the config.\nI mean, it works as expected. It's dismissed when I reload and if there are still errors I don't see two.\nIt's in my path.. Nope. Thanks!. Thanks!. Thanks!. Full debug log please. https://github.com/swaywm/sway/issues/2198. We do immediately drop privledges on start.. We also no longer require caps at all on systems with logind or elogind, that should probably be updated.. Leftover. I just removed it.. Thanks!. Can you use rootston? If not, please open a bug on the wlroots tracker.. Please move this bug to the wlroots tracker.. Can you try alpha.5?. No, sway-git is using the legacy 0.15 branch.. >If there is a floating view/container over a tiled one, the tiled one gets the resize event instead of the floating one.\n\nIt's no longer possible to resize a floating container.\n\nUnable to reproduce.\nMy own issues:\n\nDoesn't seem atomic?\nAll right click menus on GTK+ and Xwayland apps no longer appear. Thanks for the updates, pulling this locally and will be running the branch for a couple of days.. It's no longer choppy (every frame looks right) but it is really laggy, it feels like windows are catching up to my mouse.\n\nhttps://sr.ht/9rXA.mkv. Well, we can give it a shot.\nDo you think at some point we should just give up and show a stretched window if the client hasn't responded soon enough so that it keeps up with the mouse?. >If what I'm about to implement doesn't work then the options are to a) have perfect but laggy rendering, b) have imperfect but smooth rendering, or c) resort to something like stretching the surface.\nDo you think we can find a middle ground? Some of my clients respond fast enough to resize smoothly, and others don't. We could resort to being imperfect only if the lag would be severe.\n\nFor views that are shrinking I think cropping it is better than stretching it. For views that are expanding... I guess we'd have to stretch that :-\\\n\n+1\n\nWe'd also need to fine tune it. I don't think we'd want to use stretching for standard layout updates, only for the interactive resizing, and that means we'd have to flag those transactions/containers as such.\n\n+1. >It now does the one transaction at a time thing. I'm getting smooth resizing with termite + nautilus + gedit as you have in your video. I'm pretty pleased with this, assuming I haven't introduced any instability.\nMuch better, nice! I still get some stuttering, though. It doesn't help that I'm testing this on a 4K display. I would merge it with this level of performance.. By the way, to stress-test this I open (splitv (splith (natilus) (urxvt)) (gedit)) and just go fuckin nuts dragging urxvt around. Just moving my mouse in a circle around the output is enough to cause severe lag.. Does this or does it not fix #2425?. Thanks!. Thanks!. Thanks!. Thanks!\n@minus7 that's what this patch fixed. Oh, I misunderstood your comment. Using space is not deprecated afaik.... We should prefer spaces imo. I use spaces in my config. We should also not document deprecated options.. bump. No, we should have all window titles be at the same height, as a function of the tallest title text currently in use. We just need to center it and fill in the extra space for titles which are shorter than this.. Is this still a problem? I cannot reproduce.. Closing due to inactivity. I like your behavior.. >I'd really hate to have focus automatically come under the cursor instead of \"what was last focused in that workspace\"\nThis is what already happens if you have focus_follows_mouse. If you don't, the behavior also doesn't change from today.. This patch breaks GTK+ comboboxes, e.g. in pavucontrol.. Thanks!. I also don't care either way.. I can reproduce this too, but it's very inconsistent. Maybe on average once in every 30 times I focus the floating window, it jumps a bit.. Note: willing to file a follow-up ticket for this issue.. Thanks! :tada: . Thanks!. Works fine :+1: Thanks!. I liked it the way it was before, though we could stand to parse it into an enum. Thanks!. Thanks!. Does not fix https://github.com/swaywm/sway/issues/2158. Thanks!. Can you elaborate on this? It doesn't seem right to me.. Look for wlr_cursor related stuff, it's the thing which is responsible for drawing cursors on screen.. Thanks!. :+1: . Rendering in focus order sounds like a clever hack that would only serve to make the code less maintainable.. Is this ready to merge?. Thanks! Make sure to file a follow-up ticket for that issue.. Thanks!. I'm not sure I understand what the difference is between destroy and begin_destroy, what they do, and when they should be called.. Got it.. Thanks!. Thanks!. Thanks!. Thanks!. You would do something like bindsym Ctrl+G exec echo $$var.. Thanks!. We once had @airblader explain how our gaps were supposed to be and confirmed that we got it right at some point.\nhttps://github.com/swaywm/sway/issues/307. Thanks!. Thanks!. Thank you for putting in the effort, but I'm not really fond of this change. It was working as intended before.. I find the current design more simple. I don't intend to argue the point, I don't have the time.. Thanks!. Thanks! Can you add the email you used to author these commits to github so they show up linked to your GitHub account?. You just have to specify the prefix when you configure meson.. Thanks!. Thanks!. \"evacuate\" is such a good function name. Thanks!. >When moving a floating view/container to a new output using the mouse, the floating view/container would snap back to the center of the original output as soon as the center point crossed over.\nI don't understand and/or cannot reproduce this.. Thanks, I was able to reproduce it.. derp. Thanks!. No, we should leave it in so it doesn't break anything old which is unmarshalling that JSON.. I'm not sure how it works on i3, you'd know that better than I. How's this coming along?. Cool, thanks.. We've had a policy of not implementing undocumented i3 features in the past, a policy I expect to continue.. Thanks!. Thanks! Whether it fixes the crash or not, XORing the container IDs isn't a good design.. Thanks!. 1. Open a terminal and use it to play a video in mpv in fullscreen\n2. Close mpv with q\n3. Terminal is not focused. Hmm, this works for me now. Maybe I didn't have all my ducks in a row when I tested it before.. Thanks!. Thanks!. This will be addressed when wlroots is completed and integrated with sway.. Now using this as my daily driver. Will merge in 2 days if I don't run into issues.. Well, that was fast. I opened a floating window, split it horizontally and opened another window. First problem is that it was moved to 0,0 when I did so. Then I moved it back and started interactively resizing it, and split the right half vertically, then opened a third window. I tried to change the layout of the right pane and got a segfaut:\n```\n0  0x00007ff7a7850049 in __strcasecmp_l_avx () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libc.so.6\n1  0x00005579ece9d3fa in parse_layout_string (s=0x0) at ../sway/commands/layout.c:11\n2  0x00005579ece9d5f0 in get_layout_toggle (argc=1, argv=0x5579eec5c2c0, layout=L_VERT, prev_split_layout=L_NONE) at ../sway/commands/layout.c:64\n    i = 1\n    parsed = 21881\n    curr = 1\n\n3  0x00005579ece9d6e6 in get_layout (argc=1, argv=0x5579eec5c2c0, layout=L_VERT, prev_split_layout=L_NONE) at ../sway/commands/layout.c:92\n    parsed = L_NONE\n\n4  0x00005579ece9d7f9 in cmd_layout (argc=2, argv=0x5579eec5c2b8) at ../sway/commands/layout.c:125\n    error = 0x0\n    container = 0x5579ef2dec60\n    workspace = 0x5579eea74ee0\n    new_layout = L_NONE\n    old_layout = L_VERT\n\n5  0x00005579ece77583 in execute_command (_exec=0x5579eec5c790 \"layout toggle split\", seat=0x5579eec3f0f0) at ../sway/commands.c:317\n    res = 0x5579ecec1fb8\n    argc = 3\n    argv = 0x5579eec5c2b0\n    handler = 0x5579eced4010 <command_handlers+80>\n    results = 0x0\n    exec = 0x5579ef218100 \"layout toggle split\"\n    head = 0x0\n    cmdlist = 0x0\n    cmd = 0x5579ef218100 \"layout toggle split\"\n    views = 0x0\n    __PRETTY_FUNCTION__ = \"execute_command\"\n\n6  0x00005579ece99a22 in seat_execute_command (seat=0x5579eec3f0f0, binding=0x5579eec5d320) at ../sway/commands/bind.c:323\n    binding_copy = 0x5579eec5d320\n    reload = false\n    results = 0x5579eec5d320\n\n7  0x00005579ece950fd in handle_keyboard_key (listener=0x5579ef0187f0, data=0x7ffec1f71180) at ../sway/input/keyboard.c:281\n    binding_pressed = 0x5579eec5d320\n    keyboard = 0x5579ef0187e0\n    seat = 0x5579eec3f0f0\n    wlr_seat = 0x5579eec3f220\n    wlr_device = 0x5579ef018610\n    event = 0x7ffec1f71180\n    input_inhibited = false\n    keycode = 61\n    translated_keysyms = 0x5579ef02a958\n    translated_modifiers = 64\n    translated_keysyms_len = 1\n    raw_keysyms = 0x5579ef02a958\n    raw_modifiers = 64\n    raw_keysyms_len = 1\n    code_modifiers = 64\n    handled = false\n    binding_released = 0x0\n    next_repeat_binding = 0x0\n\n8  0x00007ff7a7d86e4e in wlr_signal_emit_safe (signal=signal@entry=0x5579ef018788, data=data@entry=0x7ffec1f71180) at ../util/signal.c:29\n    pos = 0x5579ef0187f0\n    l = 0x5579ef0187f0\n    cursor = {link = {prev = 0x5579ef0187f0, next = 0x7ffec1f71100}, notify = 0x7ff7a7d86dc0 <handle_noop>}\n    end = {link = {prev = 0x7ffec1f710e0, next = 0x5579ef018788}, notify = 0x7ff7a7d86dc0 <handle_noop>}\n\n9  0x00007ff7a7d766d6 in wlr_keyboard_notify_key (keyboard=0x5579ef018690, event=event@entry=0x7ffec1f71180) at ../types/wlr_keyboard.c:107\n    updated = <optimized out>\n\n10 0x00007ff7a7d5b1a7 in handle_keyboard_key (event=, libinput_dev=) at ../backend/libinput/keyboard.c:73\n    wlr_dev = 0x5579ef018610\n    kbevent = 0x5579ef2c5a00\n    wlr_event = {time_msec = 5895433, keycode = 53, update_state = true, state = WLR_KEY_PRESSED}\n    state = <optimized out>\n\n11 0x00007ff7a7d5a2dc in handle_libinput_readable (fd=, mask=, _backend=0x5579eea629b0) at ../backend/libinput/backend.c:35\n    backend = 0x5579eea629b0\n    event = 0x5579ef2c5a00\n\n12 0x00007ff7a7dbe702 in wl_event_loop_dispatch () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n13 0x00007ff7a7dbd2ac in wl_display_run () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n14 0x00005579ece82ddc in server_run (server=0x5579eced5a20 ) at ../sway/server.c:161\n15 0x00005579ece82579 in main (argc=3, argv=0x7ffec1f71568) at ../sway/main.c:444\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x5579ecebfa4c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5579ecebfa51 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5579ecebfa58 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5579ecebfa61 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5579ecebfa67 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5579ecebfa6f \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5579ecebfa77 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5579ecebf5c0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n    suid = false\n\n.\n0  0x00007f2058c6d049 in __strcasecmp_l_avx () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libc.so.6\n1  0x00005638d1b9c3fa in parse_layout_string (s=0x0) at ../sway/commands/layout.c:11\n2  0x00005638d1b9c5f0 in get_layout_toggle (argc=1, argv=0x5638d3de1500, layout=L_VERT, prev_split_layout=L_NONE) at ../sway/commands/layout.c:64\n    i = 1\n    parsed = 22072\n    curr = 1\n\n3  0x00005638d1b9c6e6 in get_layout (argc=1, argv=0x5638d3de1500, layout=L_VERT, prev_split_layout=L_NONE) at ../sway/commands/layout.c:92\n    parsed = L_NONE\n\n4  0x00005638d1b9c7f9 in cmd_layout (argc=2, argv=0x5638d3de14f8) at ../sway/commands/layout.c:125\n    error = 0x0\n    container = 0x5638d3e1bc80\n    workspace = 0x5638d374c160\n    new_layout = L_NONE\n    old_layout = L_VERT\n\n5  0x00005638d1b76583 in execute_command (_exec=0x5638d36b9a20 \"layout toggle split\", seat=0x5638d369c380) at ../sway/commands.c:317\n    res = 0x5638d1bc0fb8\n    argc = 3\n    argv = 0x5638d3de14f0\n    handler = 0x5638d1bd3010 <command_handlers+80>\n    results = 0x0\n    exec = 0x5638d3e17560 \"layout toggle split\"\n    head = 0x0\n    cmdlist = 0x0\n    cmd = 0x5638d3e17560 \"layout toggle split\"\n    views = 0x0\n    __PRETTY_FUNCTION__ = \"execute_command\"\n\n6  0x00005638d1b98a22 in seat_execute_command (seat=0x5638d369c380, binding=0x5638d36ba5b0) at ../sway/commands/bind.c:323\n    binding_copy = 0x5638d36ba5b0\n    reload = false\n    results = 0x5638d36ba5b0\n\n7  0x00005638d1b940fd in handle_keyboard_key (listener=0x5638d3a77bc0, data=0x7fff4ba54c30) at ../sway/input/keyboard.c:281\n    binding_pressed = 0x5638d36ba5b0\n    keyboard = 0x5638d3a77bb0\n    seat = 0x5638d369c380\n    wlr_seat = 0x5638d369c4b0\n    wlr_device = 0x5638d3a77b30\n    event = 0x7fff4ba54c30\n    input_inhibited = false\n    keycode = 61\n    translated_keysyms = 0x5638d3a898e8\n    translated_modifiers = 64\n    translated_keysyms_len = 1\n    raw_keysyms = 0x5638d3a898e8\n    raw_modifiers = 64\n    raw_keysyms_len = 1\n    code_modifiers = 64\n    handled = false\n    binding_released = 0x0\n    next_repeat_binding = 0x0\n\n8  0x00007f20591a3e4e in wlr_signal_emit_safe (signal=signal@entry=0x5638d3a64fc8, data=data@entry=0x7fff4ba54c30) at ../util/signal.c:29\n    pos = 0x5638d3a77bc0\n    l = 0x5638d3a77bc0\n    cursor = {link = {prev = 0x5638d3a77bc0, next = 0x7fff4ba54bb0}, notify = 0x7f20591a3dc0 <handle_noop>}\n    end = {link = {prev = 0x7fff4ba54b90, next = 0x5638d3a64fc8}, notify = 0x7f20591a3dc0 <handle_noop>}\n\n9  0x00007f20591936d6 in wlr_keyboard_notify_key (keyboard=0x5638d3a64ed0, event=event@entry=0x7fff4ba54c30) at ../types/wlr_keyboard.c:107\n    updated = <optimized out>\n\n10 0x00007f20591781a7 in handle_keyboard_key (event=, libinput_dev=) at ../backend/libinput/keyboard.c:73\n    wlr_dev = 0x5638d3a77b30\n    kbevent = 0x5638d3df6b30\n    wlr_event = {time_msec = 20094608, keycode = 53, update_state = true, state = WLR_KEY_PRESSED}\n    state = <optimized out>\n\n11 0x00007f20591772dc in handle_libinput_readable (fd=, mask=, _backend=0x5638d34bf9b0) at ../backend/libinput/backend.c:35\n    backend = 0x5638d34bf9b0\n    event = 0x5638d3df6b30\n\n12 0x00007f20591db702 in wl_event_loop_dispatch () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n13 0x00007f20591da2ac in wl_display_run () at /home/sircmpwn/sources/sway/build/sway/../../../../../../lib64/libwayland-server.so.0\n14 0x00005638d1b81ddc in server_run (server=0x5638d1bd4a20 ) at ../sway/server.c:161\n15 0x00005638d1b81579 in main (argc=3, argv=0x7fff4ba55018) at ../sway/main.c:444\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x5638d1bbea4c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5638d1bbea51 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5638d1bbea58 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5638d1bbea61 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5638d1bbea67 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5638d1bbea6f \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5638d1bbea77 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5638d1bbe5c0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n    suid = false\n\n```. This seems to have been working fine for me. Thanks!. Possibly related to https://github.com/swaywm/sway/issues/2539. My startup script starts applications on a specific workspace, then switches to different workspaces on those same outputs and relies on pid tracking to open the windows on the same workspaces and same outputs once the applications catch up. This has caused issues in the past.. Can you chase down the relevant FreeBSD maintainers to get those bullet points addressed? If so we can start running CI against FreeBSD.. Also, do you have the time and inclination to be the official FreeBSD point-of-contact for sway?. Thanks!. >It probably means getting in touch with dependencies maintainers in case something breaks.\nAye, it means \"keep using sway on FreeBSD and test each release before we tag it so we don't ship releases which break FreeBSD\". Also, keeping sway up to date in ports.. Works, thanks!. Thanks!. See https://github.com/swaywm/sway-tests. I don't think it should live in this repository at all.. When I want to test my local sway build I just run ./sway/sway. I use a separate config file, which specifies e.g. swaybg_command.\nRegarding scan stuff, either way is fine by me.. Thanks!. \u00af\\_(\u30c4)_/\u00af. Thanks!. Thanks!. Not a fan of the iovec approach.. Thanks!. Thanks!. Yep, thanks. Thanks!. bindsym $mod+r printf \"%s\" cmVsb2Fk | base64 -d | xargs swaymsg\n:wink: . Thanks!. Thanks!. We support this through the gamma control protocol, which is implemented by forks of redshift and is under review for upstream inclusion.. afaik mouse_warping only warps the mouse when you change outputs, which is implemented in sway.. Has this been pitched to i3?. Sure, seems like it'd be useful for both projects.. Sure, sounds good. Let's do it.. Thanks!. Thanks!. Wait, this didn't actually fix my problem.. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Can no longer reproduce this. Thanks!. @minus7 can you try this?. Thanks!. There's no need to shout\nhttps://github.com/swaywm/sway/pull/2603. We can't wait for a view to map, because not all secured protocols use views (e.g. dmabuf export). We'd have to add bind listeners to everything and disconnect clients that aren't authorized. Instead I want us to create the wayland connection for the client (by passing WAYLAND_SOCKET, something I already implemented in my PR) and then we can just set up a global filter that checks the list of authorized wl_clients before showing secure globals. I also only want to transfer grants to children explicitly, not implicity. On top of that, PIDs are not reliable, as @emersion mentioned.. Thanks!. I think I would rather see this done as input subcommands.. No problem, we're not in a hurry.. More like seat subcommands, actually.\nseat seat0 {\n    cursor_theme Adwaita 24\n}. bump?. I'm okay with setting feature test macros at the build system level now. I wanted to avoid it because if we build with a subset of options we may not need everything, but it's really not that important.. Thanks!. Nice work! On the whole this seems to work great. The only issue I found so far is that the UI doesn't work on hidpi displays.. Thanks!. Thanks!. Thanks!. Yes, you should probably move that logic to unref. But make unref accept a NULL argument without breaking. We model these functions after free.. If you want Debian or Ubuntu support, you've gotta step up and do it yourself. Our ports are maintained by users who use that distribution, and none of the core devs are on Debian or Ubuntu. Don't make demands, send patches!. Thanks!. Can you do '\"'.png (a double quote wrapped in single quotes)?. Thanks!. Thanks!. Thanks!. Thanks!. iirc you can escape $ with $$. reasons. Thanks!. I'm pretty meh on this. >Thoughts? I think the second option is probably better.\nAgree. Thanks!. You need to wrap the command in quotes. Ditch --no-startup-id while you're at it, it has no effect on sway.. This is fixed on 1.0.. This is fixed on 1.0.. If you have multiple bugs file multiple bug reports.. It's not the bug you originally opened this ticket to discuss.. Logs?. Can you provide a minimal reproducable config file and specific steps to reproduce?. Minimal config file and specific steps. Remove unnecessary stuff from your config and write a numbered list of steps to perform to trigger the bug. You've gotta put some of the work in here, we're volunteers with only so much time on our hands.. This isn't a minimal config, that has all sorts of stuff unrelated to your problem.. Sure, close enough.. Thanks!. Thanks!. You need to actually provide the hints, too. Check the wlr_output's subpixel geometry.. Nice.. LGTM aside from one minor style issue. Thanks!. Seems like weston-dnd works for me now, but nautilus doesn't.. Now it works. \u00af\\_(\u30c4)_/\u00af. Thanks!. >This patch relocates the sticky-moving code into seat_set_focus_warp.\nThis scares the shit out of me. Thanks!. Thanks! This was a tough one.. It works on one of my cards atm, fwiw.. Ask Debian or Ubuntu. This can be a separate patch, but I wonder if we should make XDG windows tiled on all four sides if they're floating with a server-side border. Then GTK for example will stop using rounded corners.. Thanks!. Thanks!. If this is a regression, git bisect will help, but it's up to you folks to dig into this. We don't deal with entitled users here, everyone is a volunteer and if none of the sway devs are available to investigate, then its up to you to.. I don't have nearly as much context for this problem as you do. You should make the call as to which behavior is best, and when you've done so and this PR is ready for code review, lmk.. Take as much time as you need and don't worry too much about getting it perfect or performant, unless it's obviously broken or very slow.. Thanks!. Thanks!. I think _C11_SOURCE is a FreeBSDism but if it's limited to the FreeBSD build I guess this simplifies things a bit.. Thanks!. If my interpretation of the POSIX spec is correct, this is a bug in FreeBSD. Also, FIONREAD is non-standard.. Thanks!. Thanks!. Thanks!. Can you open a pull request with your broken work?. Thanks!. Nice! Can you connect the email you wrote the commits with to GitHub, then squash them together?. Thanks!. Thanks!. Thanks!. Thanks!. >The code unsetting the LD_LIBRARY_PATH/LD_PRELOAD was also deleted as it's a placebo security at best - we should trust the execution path that leads us to running sway, and it's way too late to care about those variables since we already started executing our compositor, thus we would be compromised anyway.\nEh, the reasons behind this are more subtle than you think. But ultimately this is a good argument anyway. Can you update sway-security(7) accordingly?. Thanks!. ...That's not what you were asked to test. Thanks!. This hasn't always been broken, right? How about a bisect?. Thanks!. I think this is notifications generated by the browser or so, @RyanDwyer. They don't go through dbus or anything iiuc. Thanks!. I have written the updates, will push them once we release.. > key events - cannot be done using current layer shell protocol due to focus issues, may need a new protocol or IPC event\nLike I said on IRC, it can be - you just need sway to be paying attention and let swaybar know over IPC when the button is pressed or released.. If hidden_state is executed in the config file, sway segfaults. Actually I can't get any of the relevant config options to work without segfaulting sway.. I guess I'm probably misunderstanding this but I have no idea how to make this patch have any effect on swaybar. Can someone provide an example config and steps to reproduce the correct behavior?. I'm dumb, I was running /usr/bin/swaybar instead of ./swaybar/swaybar. LGTM, why [WIP]?. Thanks!. Can you do a bisect?. git bisect lets you identify the last known good commit, the first known bad commit, and do a binary search over the commits between to find the commit that introduced the bug.. Can you test this out with rootston, and if it also fails, move the ticket to https://github.com/swaywm/wlroots?. dur, it helps to read. Thanks!. Do you have any more logs to share?. I think i686 is a red herring. This is more likely to be the culprit:\n\nInitializing DRM backend for /dev/dri/card0 (radeon)\n\nThe radeon driver is old and unmaintained, I'm not sure it's going to have all of the features we need. Does AMDGPU work with your card?. glxinfo. >So clients on Wayland cannot know if they need to render their windows or not? It means that kitty on wayland will unnecessarily have to render each frame for every invisible window.\nNo, Wayland clients should render their window when they get the frame callback. They don't need to know if they're \"invisible\" or not. They just need to render every time they get a frame callback, no more or less frequently then that. If they are \"invisible\" they will not receive frame events.. Of course, if they get a frame callback and nothing has changed since the last one, they can choose not to rerender, too.. We should also probably update the keymap handler to correctly clean up the old keymap. dur. Thanks!. Thanks!. What OS are you using?. >Personally, I think the wlroots CONTRIBUTING.md is better, maybe this one should be updated with some information from there.\nGood call, I'll update it separately.. setuid programs will already not generate a coredump under normal conditions. That sounds like a great idea.. Use criteria.. I'd use the window id, since you also need to reset the opacity of the window which was just unfocused. Yes, it's unique.. I use i3ipc-python on sway without any patches.... Can you make a pull request adding something to contrib/ instead?. How about both?. I don't know the answer to these questions. As the person who most recently looked at this code, I'd wager you as the expert.. Those security considerations are pretty weak but I'm not opposed to the idea. Can you add the old default status command to the default config?. Thanks!. Thanks!. We need someone to do a git bisect here.. It's easier if you can reproduce this on rootston, which is part of the wlroots repository.. Are you using a DisplayPort hub or daisy chaining?. Aren't gaps always not rendered. Heh, okay. Thanks!. Thanks for the patch! It looks good, but you should review the style guide:\nhttps://github.com/swaywm/sway/blob/master/CONTRIBUTING.md#style-reference. Thanks!. Thanks!. Thanks!. Thanks!. Probably. >Another option is to make focus changes from the mouse movement only trigger when a window/container is actually entered (pointer is actually moving from outside the container across the border). But this may get hard to reliably implement.\nThis might be a good idea. Thanks for the patch! Can you associate the email you authored these commits with and your GitHub account so they link up nicely?. git rebase -i HEAD~3 then change everything to fixup except the first commit. Then you can git push -f. No, but it is desirable for the commits to be neatly arranged.. Thanks!. >When a scale is set, take what the user asked for and adjust it so it becomes evenly divisible by both the output's width and height.\nMaybe we can do this calculation and print a warning like \"Warning: your scale of %f is going to cause imperfect rendering. Try %f instead if you have issues\". Thanks!. We need a POSIX base implementation, then a BSD and Linux specific override, then select the right file based on the platform. On the POSIX base implementation we can set a timeout on poll based on the estimated time until the next timer that's due.. If you're not feeling up to it, we can live with just one POSIX implementation.. Thanks!. Thanks! If anyone wants to file a follow-up patch with memset that'd be fine.. Aight. Or we could put swaybar in the overlay layer (in this case).. We could disable tty switching on lock, but since you should have a getty with a password prompt on your other tty's and sometimes swaylock fucks up and tty switching is your only recourse, I don't think any of this makes sense.. Thanks!. Thanks!. Thanks!. The purpose of the removed code is to tell the user what happened when the buffer overflows. Now the text will just be wrong.. If you do that I'd rather see a [...] appended to the end. That's not gonna fly. My screen can easily fit 128 characters. At time of writing my statusbar is 122 characters long and only taking up half the screen.. You should set it to 199309L in this case. Our policy is to use the minimum required POSIX version for each file. You can find the minimum by consulting the clock_gettime man page.. Thanks! For more information about feature test macros, check out man 7 feature_test_macros. When you say \"move\" do you mean \"drag and drop\"? Can you describe this in terms of discrete, details steps we can do to reproduce? Steps like, \"drag window C onto the far left drop area of window B\". Windows have 9 drop areas, center, left, right, upper, lower, and far left, far right, far upper, far lower. Only two of the \"far\" areas will be valid, depending on the layout of the parent container (for splitv the far upper and far lower areas are valid). Can you describe your issue in these terms?\nAlso, if it's a crash, please obtain a core dump and give us the output of bt full from gdb.. >Unfortunately, I can't figure out how to get a core dump or backtrace given that sway suspends and I can't even change TTY. I don't have a second machine to SSH and I can't figure out how to send keystrokes to a nested instance.\nYou probably need to run sway -c some-other-config and use a different modifier key (like Alt) there.. Can you cause this to occur by hotplugging outputs or changing output resolution? Can you correlate these events with a particular part of a debug log?. >Is this a duplicate of swaywm/wlroots#988?\nThat's what I'm wondering. I think the answer is yes.. It's still an Xwayland bug. Tell them.. bump. Thanks!. This is probably an Xwayland bug, not a sway bug.. Thanks @sghctoma! I'll get this working soon.. Can you give me that patch in a more patchy form? This sort of base64 thing doesn't translate well to my CI platform.. Another couple of issues:\n\nI hit automake issues when installing wayland-protocols from ports: details\nCan you send me an email and/or patch with the necessary fixes for scdoc?\n\nI can also hook you up with a sr.ht account if you want to play with this build manifest yourself.\nI hope these comments are getting through.... >This version of the script uses this to get new libinput+deps: >https://gist.github.com/sghctoma/d627dbb72d262a45187cda0542e1bef0\n\nIs it ok this way?\n\nSure.\n\nLooking at the builds.sr.ht job, it seems you have an old ports tree (wayland-protocols 1.12 and wayland 1.14), I think that's the reason of the automake issue. You need to run portsnap fetch update.\n\nAh, thanks. Do you think this is something I should be running for all FreeBSD users when booting up their build VMs?. portsnap fetch update - can this be done non-interactively?. Current progress:\nhttps://builds.sr.ht/~sircmpwn/job/9016\nhttps://builds.sr.ht/api/jobs/9016/manifest. Thanks! I'll adapt this for wlroots and we'll add sway when FreeBSD 12 rolls around.. Sorry for the wait, I had to add support for this to dispatch.sr.ht...\nhttps://github.com/swaywm/wlroots/pull/1336. There shouldn't be more than, say, 10-15 hops between here and there in a bisect. Even if you have to find the appropriate wlroots version, that doesn't sound too bad? Just git log --since=[date of sway commit]. I wonder if we can make a minimal reproducable test case to submit a cairo bug with?. This was originally done to make it easier to move away from a singleton, but I don't really care.. Why does it make so much sense to handle warping in the focus command, and why didn't I do it that way in the first place? You're a genius.. If you resolve the conflicts I'll merge this. Thanks!. Are you using fractional scaling?. Sure, but it could be a separate patch.. Thanks!. Yeah this seems wrong. It seems like a sway bug that we show a cursor over a surface which doesn't set one.. Thanks!. fwiw I use a script. In my sway config:\nexec startup\nIn the startup script:\nswaymsg workspace 1\nswaymsg exec qutebrowser\nswaymsg workspace 2\nswaymsg exec \"urxvt -e mutt\"\nswaymsg workspace 3\nswaymsg exec \"urxvt -e weechat\". I was experiencing #2815 independently of this issue. But they could both be focus related.. Can't reproduce this since some recent sway commit.. I tried again and the issue is more specific:\n\nMove your mouse (using the pointer) to another output\nUse a keybinding to go back. Thanks!. Instead of an assertion failure can you do a post-arg-parse sanity check and give a better error message?. Thanks!. Thanks!. Thanks!. eh.... We should probably log the video driver in sway.log.. Sure.. >Maybe render an empty bar with a reasonable height? (20px?)\n\n+1. Sway probably shouldn't even start up on nvidia. It's just going to break.. Thanks!. patches welcome. If you don't like it, send a bloody patch!. What part of \"the nvidia proprietary isn't supported\" are you not getting? Any inconvenience we cause to users who are explicitly in an unsupported demographic isn't our problem. You don't have to buy a new graphics card, you can install nouveau. This is not our fault.. This project is run by volunteers and if none of them are interested in your problem, you need to volunteer yourself.. This patch was written with a workaround in the first place. It doesn't \"blatantly disrespect\" anyone. The only blatant disrespect is the entitlement on display here.\nYes, I could trivially merge the patch. But that's not the point. We have a policy here of making users step up and put in the work for the things they care about. This leads to more contributions and is a massive bonus to the health of sway as a whole.\n\nI don't use Nvidia proprietary drivers on my laptop, but I'm slowly transitioning to Sway from i3 on all my machines, and if this is your attitude toward hardware that works but isn't supported, that's a problem.\n\nHardware that's not supported is not supported. My attitude towards supporting it is not to. That's not a problem, that's a tautology.. We already had a warning message. A better patch takes @ascent12's advice. If you want to commit to working on that and revert this patch in the meanwhile, I would merge it.. And again, the patch didn't deliberately break anything. Its aim was to make it more obvious that already-broken systems were broken, and it included a flag which turned off the behavior. Just because you don't like it doesn't mean it's deliberately breaking anything.. You'll find that I'm generally pretty amicable to users who don't blatantly disregard the stated fact that we don't support systems running the proprietary driver. I agree that I've been too rude in this thread, though, and I apologise.\nThat being said, it doesn't change the fact that we explicitly do not support systems running this driver in any capacity. The whole point of \"unsupported\" is that we don't want to hear about it on our bug tracker. The only officially supported solution to this problem is \"rmmod nvidia\".. https://github.com/SirCmpwn/sway/wiki#how-do-i-report-issues. Thanks!. This would be pretty easy, we can just set a margin on the layer surface.. Thanks!. For this behavior you need to configure swayidle, see the man page for details.. This design is more flexible and accomodates more use-cases.. Thanks!. I mistook this for the earlier issue and thought I had forgotten to close it.. If you're using systemd you're probably better of configuring /etc/systemd/logind.conf. A wayland equivalent of xev would be a pretty easy weekend project for an interested programmer.\nFwiw XF86AudioRaiseVolume et al work fine for me.. We might want to add a kill -f which sigterms, or kill -9 which sigkills. But that should be done separately.. Thanks!. Thanks!. I think this bug is in libwayland (eeh, stretching it). But wl_display_roundtrip shouldn't hang on a disconnected display, it should return an error immediately.. >Reminder that we don't use the wayland event loop.\nI know, but maybe I misunderstood the issue here. w/e. Thanks!. Thanks!. Thanks!. I'd rather fix the race condition... and also deal with no outputs more gracefully.. >apart from making swaybg handle multiple outputs\n:D. git is used to determine the current version. So, yes.. Send patch?. I prefer to break rather than ship \"unable to provide version string...\" because we depend on the version string in bug reports.. Can you ditch the parenthetical and add it to all readmes?. Thanks!. Thanks!. I looked into it briefly, it wouldn't be terribly difficult. But I think on the whole I'd prefer to use dmabuf-export and virtual-keyboard. Though it would be very helpful to add damage info to dmabuf-export.... FreeRDP totally supports damage. Damage is essential for reducing bandwidth usage for remote desktop.. Or you mean dmabuf-export, right. Well, it doesn't have to, we can read the frames ourselves and hand it to FreeRDP in any format they want.. shrug. Both dmabuf-export and screencopy work with the headless backend.. Thanks!. Aye, this belongs on the wiki.. Thanks!. Thanks!. Duplicate of https://github.com/swaywm/sway/issues/1666. Thanks!. Thanks for your enthusiasm, but we'll pass on this.. Thanks!. Isn't this something you can just make xkb do via xkeyboard-config?. Oh, this is an attempt at per-window layout. Got it.. So, reviewing this, it's not really going to meet the stated goal. We need to add a per-window layout override, which would be annotated on the node in the tree. Then, upon focusing it, we would switch layouts.. I see. Well, I'm not interested in merging it in its current state.. Can you try the master branch?. Thanks!. I would rather not add features which worsen the Wayland experience for the sake of the X experience.. Well, it's more complex than you think. Trust me, we've thought about it.. I don't see any reason to implement output subscribe given it doesn't really do anything in i3.. Thanks!. Some of them are necessary because they, well, come from xwayland. Like window class should still be there.. >I don't know how you feel about deviating too much from i3's output in SWAYSOCK, but you could clean things up a bit by putting xwayland-related stuff in an xwayland map (notably window, class, window_properties.instance, and window_properties.transient_for) and then setting it to null for native wayland windows.\nNot fond of this. I don't want to deviate much at all.. We can omit \"dock areas\" in SWAYSOCK. But for situations like the one you described, I'd prefer not to introduce some xwayland-specific thing when we can just populate i3-compatible fields.. Lemme test this. There are still some workspace commands which cannot be run without any outputs.. Thanks!. Thanks!. Thanks!. Thanks!. Seems like your commit message is repeated twice, can you amend that?. Thanks!. Sounds like you have everything you need to make a patch?. This causes a crash on startup for me:\n```\n0  0x00007fedbebe2539 in wl_event_source_remove () at /usr/lib/libwayland-server.so.0\n1  0x000055b20ef71779 in sway_keyboard_destroy (keyboard=0x55b210222800) at ../sway/sway/input/keyboard.c:509\n2  0x000055b20ef69004 in seat_device_destroy (seat_device=0x55b21013fd40) at ../sway/sway/input/seat.c:37\n3  0x000055b20ef6a53f in seat_remove_device (seat=0x55b20fd6c120, input_device=0x55b2101359a0) at ../sway/sway/input/seat.c:554\n    seat_device = 0x55b21013fd40\n\n4  0x000055b20ef681c8 in handle_device_destroy (listener=0x55b2101359c0, data=0x55b210155960) at ../sway/sway/input/input-manager.c:258\n    device = 0x55b210155960\n    input_device = 0x55b2101359a0\n    __func__ = \"handle_device_destroy\"\n    seat = 0x55b20fd6c120\n\n5  0x00007fedbeba6f0e in wlr_signal_emit_safe (signal=signal@entry=0x55b2101559a0, data=data@entry=0x55b210155960) at ../util/signal.c:29\n    pos = 0x55b2101359c0\n    l = 0x55b2101359c0\n    cursor = {link = {prev = 0x55b2101359c0, next = 0x7fffebd90ae0}, notify = 0x7fedbeba6e80 <handle_noop>}\n    end = {link = {prev = 0x7fffebd90ac0, next = 0x55b2101559a0}, notify = 0x7fedbeba6e80 <handle_noop>}\n\n6  0x00007fedbeb95dfd in wlr_input_device_destroy (dev=0x55b210155960) at ../types/wlr_input_device.c:33\n7  0x00007fedbeb762c6 in backend_destroy (wlr_backend=0x55b20f4dfcc0) at ../backend/libinput/backend.c:116\n    wlr_devices = 0x55b2100d94f0\n    wlr_dev = <optimized out>\n    next = 0x55b2100d9498\n    i = 0\n\n8  0x00007fedbeb790d9 in multi_backend_destroy (wlr_backend=0x55b20f4d72d0) at ../backend/multi/backend.c:54\n    backend = 0x55b20f4d72d0\n    sub = <optimized out>\n    next = 0x55b20f4d72b8\n\n9  0x000055b20ef5c9cc in server_start_backend (server=0x55b20efb3b40 ) at ../sway/sway/server.c:181\n10 0x000055b20ef5bf38 in main (argc=3, argv=0x7fffebd90d28) at ../sway/sway/main.c:378\n    verbose = 0\n    debug = 1\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x55b20ef9db04 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55b20ef9db09 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55b20ef9db10 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x55b20ef9db19 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x55b20ef9db1f \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55b20ef9db27 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x55b20ef9db2f \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x55b20ef9db3e \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55b20ef9db4e \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x55b20ef9d6c0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n```\nPushed a revert.. Can no longer reproduce the crash. Pushed the change back up.. Thanks!. >I think that's wrong, I preferred the default behavior - to open one terminal, make it tabbed, and then open new tabs as I need.\nI agree, we should probably do this.. Can anyone start up an i3 session to confirm that claim?. Sorry this went unnoticed. Is it still up-to-date?. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. I'm not sure what this is trying to accomplish.. Hm.. Just thinking it over, even if i3 does that I'm not sure it's the right behavior.. Thanks!. I'm still not fond of this idea. I wasn't against this because I didn't want to implement it, but because I didn't want it implemented. The complexity this introduces to the codebase is remarkable.. I'm going to step out of the discussion. If you get a consensus from the rest of the core contributors, I won't block this patch.. Thank you for your enthusiasm, but we're not currently interested in introducing Rust to sway.. sway is presumably setuid on your system, you have to write 2 to /proc/sys/fs/suid_dumpable to enable coredumps for setuid programs.. Your stat says differently, this binary is setuid, owned by uid 0, and therefore runs as root.. setuid is the correct procedure in this situation. But as a consequence, the procedure for obtaining a core dump and corresponding stack trace changes.. This is deliberate, and yes, it comes from i3. I prefer this workflow.. Sway isn't designed for a mouse-based workflow :wink: \nI would accept a patch which extends focus_follows_mouse with such an option, though.. Thanks!. Is your terminal transparent?. >In the description\n\n:wink: \n\nMaybe we should scissor tiled views to their container's bound (excluding popups).\n\nMaybe. In my opinion this is working as designed.. Swaymsg is interpreting your negative coordinates as flags. Pass -- to disambiguate flags from the rest of your arguments, e.g. swaymsg -- output DP-5 pos 0 -1080. Thanks!. Okay, cool. And yeah, it should destroy the seat. I assume using any seat command on a nonexistent seat will create that seat, so you could recreate destroyed seats - right?. Okay, let's merge it. But it needs man page updates first.. Thanks, but given that this only shows up when the proprietary driver is loaded - a situation we expressly do not support - I'm not interested in improving the messaging.. Thanks!. This is deliberately unsupported. Consider colors, for example.. Gotcha. Still not a fan of it.. This is deliberate.. Maybe we should define a new layer.. Please review the style guide:\nhttps://github.com/swaywm/sway/blob/master/CONTRIBUTING.md#style-reference. Tone down the entitlement. This project is run by volunteers who are just doing their best in their spare time.\nI suppose a verdict of some kind is necessary here. Unless @emersion disagrees, I think that this behavior (translating keysyms to keycodes) should only be done with a flag, e.g. bindsym --to-code. Since sway supports more general subcommands, like this:\nbindsym --to-code {\n    Mod1+f foobar\n    Mod1+b foobaz\n}\nThis shouldn't be too much of a pain to configure.. This discussion has gone on too long and in too many directions with too many people. A pull request which makes my proposal a reality will be merged, one that does not will be closed.. >Bikeshedding, but bindcode --from-sym might be slightly more intuitive than bindsym --to-code, since, ultimately, a code gets bound, not a sym.\nGood call.. Also needs a man page update. Summary sounds good. Took a very brief glance over the code and it looked about right. Will review in more detail later.. This is a known Xwayland bug.. Hmm, I'm not sure I like that design.. Wait why was this merged.... Issue with dispatch.sr.ht, since resolved.. In any case, I'm not interested in this change as-is. If there's a race condition it should be fixed, not worked around.. No thanks. Try configuring a script with swayidle instead of calling swaylock directly.. Less \"I can reproduce\", more \"here's a patch\", please.. >There are some more additions outlined in the release notes, e.g. sync command, so don't close this until they've all been sorted.\nCan you enumerate these and update the OP?. Eh, I'm not a fan of this change.. I'm not really interested in fixing this. You can export GDK_BACKEND=x11 or something similar in your X environment, perhaps.. Thanks!. I'm skeptical about FreeBSD. I'd like to see a libwayland patch first.. I've long suspected that pid-based security was a dead end. Why don't we return to working on ideas based on WAYLAND_SOCKET, e.g. authenticating a specific connection and only for clients launched directly by the compositor?. Sorry, what part of it?. A simple chroot should be sufficient to prevent many of those bad things. Still, how do you intend to determine if a process is containerized? How will you grant that process privileges if it ought to have some?. Oh, like this:\n\nThe better solution would be to use a container software like e.g. Flatpak, implement container-specific access control interfaces (for Flatpak, it's an xdg-desktop-portal backend), and forbid apps running under containers from accessing our privileged globals.\n\nBleh. I'm not opposed to using this method to give flatpak processes et al their permissions, but I'm not convinced we can't also secure processes which are isolated more simply, e.g. chrooted.. Providing those things is easy, though. Mounting /dev into the chroot is trivial and required for many, many applications.\n\nEven so, if the Wayland compositor exposes an interface that allows to start new processes, then it's easy to escape the chroot.\n\nSo... don't provide that?. What part of that implies a protocol which lets clients escape a chroot by running arbitrary processes?. That's unrelated to the present discussion. If it doesn't work we can just ditch that protocol and the rest is still secure (or I think it is, but we won't know if we never get back on topic instead of hemming and hawing about unrelated crap).. Work based on the WAYLAND_SOCKET idea still exists here btw, in a dubiously mergable state https://github.com/swaywm/sway/pull/2375. Thanks!. Thanks!. I asked the guy to file a ticket here. I would like to see sway start reading wlr/config.h to check before using X11 symbols.. Thanks!. I just type sway in at my TTY, too.. Try imv instead of feh. I'm -1 to blocking 1.0 on this, it seems like a pretty cosmetic problem imo.. Send patch?. Yeah I think this is not a bug. You should specify the size of your emoji font in your font configuration.. Most garbage won't render at such a crazy size. There's no unicode codepoint for extra large. It's an issue with your local configuration.. Most garbage won't render at such a crazy size. There's no unicode codepoint for extra large. It's an issue with your local configuration.. Thanks!. >Instead we should use swaylock -f and make swayidle wait for the process to exit.\nThis. >Instead we should use swaylock -f and make swayidle wait for the process to exit.\nThis. Thanks!. Derp, sorry.. You can use app_id or title to match on wayland windows. This is the expected behavior.. You can use app_id or title to match on wayland windows. This is the expected behavior.. You need to update wlroots.. You need to update wlroots.. Thanks!. Don't merge WIP pull requests, Drew.. Probably not terribly hard. Looking forward to your patch!. Probably not terribly hard. Looking forward to your patch!. I would prefer titlebar_padding which, if given one argument, applies padding to both, if given two arguments, applies padding on both axes, and if given four arguments, specifies each dimension explicitly.. I would prefer titlebar_padding which, if given one argument, applies padding to both, if given two arguments, applies padding on both axes, and if given four arguments, specifies each dimension explicitly.. (We should be having this discussion on the pull request, though - can you open one?). (We should be having this discussion on the pull request, though - can you open one?). Sure, here are our guidelines:\nhttps://github.com/swaywm/sway/blob/master/CONTRIBUTING.md\nAnd GitHub's docs on pull requests:\nhttps://help.github.com/articles/creating-a-pull-request/. Sure, here are our guidelines:\nhttps://github.com/swaywm/sway/blob/master/CONTRIBUTING.md\nAnd GitHub's docs on pull requests:\nhttps://help.github.com/articles/creating-a-pull-request/. Thanks!. Thanks!. Thanks!. Thanks!. Hmm, I don't think I like this. I would prefer it as -Dxwayland=no. Hmm, I don't think I like this. I would prefer it as -Dxwayland=no. If you want to do it long-term, just uninstall Xwayland?. If you want to do it long-term, just uninstall Xwayland?. >wlroots will still try to to launch it (which will fail, but set DISPLAY to a bad value).\nSeems like a bug.. >wlroots will still try to to launch it (which will fail, but set DISPLAY to a bad value).\nSeems like a bug.. I dunno, I'm still -1 to this. We'll see what everyone else thinks.. I dunno, I'm still -1 to this. We'll see what everyone else thinks.. All features have a maintenance and complexity cost. I don't think this one pays its bill.. All features have a maintenance and complexity cost. I don't think this one pays its bill.. rootston isn't a user-facing compositor, we don't have to deal with support.. rootston isn't a user-facing compositor, we don't have to deal with support.. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. rc1 is feature frozen, so this won't get in regardless.. rc1 is feature frozen, so this won't get in regardless.. https://github.com/swaywm/sway/pull/3145. https://github.com/swaywm/sway/pull/3145. Re-running builds.sr.ht job for this guy. Re-running builds.sr.ht job for this guy. Thanks!. Thanks!. Thanks!. Thanks!. Pulled this down to give it a shot. Maybe I'm doing something dumb, but I can't see any icons. I tried konversation and akregator. Do I need to do some extra configuration or should it work OOTB?. >Maybe I'm doing something dumb\nThat'll be this, then. Works!. I spoke too soon:\n```\n0  0x000055bd022a3327 in render_sni (cairo=0x55bd02756140, output=0x55bd0274fda0, x=0x7ffc21bfc968, sni=0x55bd028dbe40) at ../swaybar/tray/item.c:381\n    idx = -1\n    smallest_error = 4294967295\n    pixmap = 0x61\n    pixmaps = 0x55bd028c9910\n    icon_found = false\n    icon_name = 0x55bd028abd60 \"konversation\"\n    height = 42\n    padding = 2\n    ideal_size = 38\n    icon_size = 38\n    icon = 0x55bd028cf810\n    padded_size = 42\n    y = 0\n    op = CAIRO_OPERATOR_SOURCE\n    hotspot = 0x55bd028cbee0\n\n1  0x000055bd022a3da3 in render_tray (cairo=0x55bd02756140, output=0x55bd0274fda0, x=0x7ffc21bfc968) at ../swaybar/tray/tray.c:122\n    h = 21\n    i = 1\n    config = 0x55bd0274a3e0\n    max_height = 21\n    tray = 0x55bd027b82e0\n\n2  0x000055bd0229edc2 in render_to_cairo (cairo=0x55bd02756140, output=0x55bd0274fda0) at ../swaybar/render.c:461\n    h = 0\n    bar = 0x55bd022b2b60 <swaybar>\n    config = 0x55bd0274a3e0\n    th = 32\n    max_height = 19\n    x = 3798\n\n3  0x000055bd0229f061 in render_frame (output=0x55bd0274fda0) at ../swaybar/render.c:522\n    __PRETTY_FUNCTION__ = \"render_frame\"\n    recorder = 0x55bd028abf60\n    cairo = 0x55bd02756140\n    fo = 0x55bd028fea70\n    height = 566218128\n    config_height = 32764\n\n4  0x000055bd0229745a in set_output_dirty (output=0x55bd0274fda0) at ../swaybar/bar.c:69\n5  0x000055bd0229768a in set_bar_dirty (bar=0x55bd022b2b60 ) at ../swaybar/bar.c:130\n    output = 0x55bd0274fda0\n\n6  0x000055bd0229779c in determine_bar_visibility (bar=0x55bd022b2b60 , moving_layer=false) at ../swaybar/bar.c:153\n    config = 0x55bd0274a3e0\n    visible = true\n    output = 0x55bd022b2c00 <swaybar+160>\n\n7  0x000055bd0229be32 in ipc_get_workspaces (bar=0x55bd022b2b60 ) at ../swaybar/ipc.c:393\n    output = 0x55bd022b2c00 <swaybar+160>\n    len = 2346\n    res = 0x55bd02905630 \"\\300\\240L^ \\177\"\n    results = 0x55bd028eae30\n    length = 4\n    ws_json = 0x55bd0290a330\n    num = 0x55bd0290c8c0\n    name = 0x55bd0290a6c0\n    visible = 0x55bd0290cb90\n    focused = 0x55bd0290cb00\n    out = 0x55bd0290c950\n    urgent = 0x55bd0290a3c0\n\n8  0x000055bd0229c719 in handle_ipc_readable (bar=0x55bd022b2b60 ) at ../swaybar/ipc.c:543\n    resp = 0x55bd028ed090\n    result = 0x55bd028c8910\n    bar_is_dirty = true\n\n9  0x000055bd022981e3 in ipc_in (fd=4, mask=1, data=0x55bd022b2b60 ) at ../swaybar/bar.c:396\n    bar = 0x55bd022b2b60 <swaybar>\n\n10 0x000055bd022a5e69 in loop_poll (loop=0x55bd0274a600) at ../common/loop.c:84\n    pfd = {fd = 4, events = 1, revents = 1}\n    event = 0x55bd0280cc70\n    events = 25\n    i = 1\n    ms = 2147483647\n\n11 0x000055bd022983cd in bar_run (bar=0x55bd022b2b60 ) at ../swaybar/bar.c:430\n12 0x000055bd0229cac1 in main (argc=3, argv=0x7ffc21bfcd98) at ../swaybar/main.c:105\n    socket_path = 0x55bd0274a3b0 \"org.kde.StatusNotifierHost-7549\"\n    debug = false\n    long_options =\n        {{name = 0x55bd022aae87 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55bd022aae8c \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55bd022aae94 \"socket\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x55bd022aae9b \"bar_id\", has_arg = 1, flag = 0x0, val = 98}, {name = 0x55bd022aaea2 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = 0x55bd022aabd0 \"Usage: swaybar [options...]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -v, --version          Show the version number and quit.\\n  -s, --socket <socket>  Connect to sway via socket.\\n  -b, \"...\n    c = -1\n\n```. I had konversation and akregator running, then uninstalled both of them without killing either process. I assumed they'd stay resident in memory but maybe something weird happened.. Codewise this looks pretty good. I wonder if it would make sense to make a little library in wlroots for this, especially once xembed is working. Or maybe a standalone library.... Thanks!. Thanks!. Don't give it CAP_SYS_ADMIN. Clear all caps and give it setuid (chmod a+s /usr/bin/sway). -1. Thanks!. I think this is basically an internal i3 feature that we should just return success: false on.. Aye. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Some languages lend themselves well to being written vertically, notably CJK languages. I would be interested in seeing a patch for a veritcal bar, both with CJK support and with a bar as wide as its contents (or with a user-defined minimum, ala the height parameter already supported by sway).. Thank you!. Thanks!. Thanks!. Thanks!. Thanks!. >@ddevault wrote the code a year ago in d7d21bb and probably can explain why this is all a dumb idea\n\u00af\\_(\u30c4)_/\u00af. Thanks!. Thanks!. Thanks!. Take a look at how we track xkb state for inspiration.. Re-emphasizing the importance of the style guide - also applies to the code in libtouch, if you want to upstream that.. Rebase?. Bizzare.. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. A bisect would tell us for sure where this came from.. Thanks!. Just where it's important. In this case it's possibly exploitable by an evil client which sets its title to something ridiculous that we can't draw.. I would rather just provide, and link to, an alternate implementation of the wlr_* log functions (or sway_*), than do things like passing an error string reference.. I imagine this is a byproduct of mouse capture not being supported in sway.. Thanks!. As a general rule we always depend on the latest version of everything. When distros go to package us, they can update our dependencies alongside.. Thanks!. Thank you, but I'd rather not give a preference to any particular init system. This is the sort of thing you should pitch to your Linux distro.. +1, wiki would be a great place for this. Thanks!. Thanks!. I agree. The workaround is to restart Xwayland. Kill the process and sway will automatically restart it.. Thanks!. Thanks!. You can do some of this with xkb, check out xkeyboard-config(7).     bindsym Hyper+h seat seat-0 cursor press button1; seat seat-0 cursor release button1. Thanks!. >I think @ddevault writes Japanese so maybe he uses it, or maybe an alternative I'm not aware of.\n\u305d\u3046\u3067\u3059\u3088 :) ibus\u3092\u4f7f\u3046\u3001\u554f\u984c\u306a\u3044. I use ibus-daemon --xim on sway startup and set the same environment variables. Try that?. Thanks!. Thank you, but this is by design.. Because I'm a lazy piece of shit, can you provide a test plan for me? I'm not sure what clients I should expect this to work with (or their behavior). Aside from the wlroots example of course.. If you don't have time it's no big deal, but if you're able to finish this by Friday it'll ship with sway 1.0 - if not, sway 1.1.. I'll carve out some time tomorrow for testing and reviewing this.. >In addition, should I add any config commands to control pointer constraints? I do not know how you'd like them to be designed, so I refrained from doing that. You can however even now just shift focus to the parent (or anything else really) to break the constraint.\n\ufffc\ufffcWould probably be good to have these two commands:\n\npointer_constraint enabled|disabled (config-time)\npointer_constraint escape (runtime)\n\nThis is okay to add separately if necessary, but if you have the time please add it to this patch.. Pushed the pointer_constraint command. @emersion take a look and merge this if you like it?. ```\ncc -Isway/345c74e@@sway@exe -Isway -I../sway -Iinclude -I../include -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng16 -I/usr/include/uuid -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/libmount -I/usr/include/blkid -I/usr/include/json-c -I/usr/include/libevdev-1.0/ -I/usr/include/pango-1.0 -I/usr/include/fribidi -I/usr/include/libdrm -fdiagnostics-color=always -pipe -D_FILE_OFFSET_BITS=64 -Werror -std=c11 '-DSWAY_SRC_DIR=\"/builddir/build/BUILD/sway\"' -DWL_HIDE_DEPRECATED -DWLR_USE_UNSTABLE -Wno-unused-parameter -Wno-unused-result -Wundef -Wvla '-DSYSCONFDIR=\"//etc\"' '-DSWAY_VERSION=\"1.0-beta.2-274-g5f45a4bb (\" DATE \", branch '\"'\"'master'\"'\"')\"' -O2 -g -Wall -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -fexceptions -fstack-protector-strong -grecord-gcc-switches -specs=/usr/lib/rpm/redhat/redhat-hardened-cc1 -specs=/usr/lib/rpm/redhat/redhat-annobin-cc1 -m64 -mtune=generic -fasynchronous-unwind-tables -fstack-clash-protection -fcf-protection -pthread  -MD -MQ 'sway/345c74e@@sway@exe/criteria.c.o' -MF 'sway/345c74e@@sway@exe/criteria.c.o.d' -o 'sway/345c74e@@sway@exe/criteria.c.o' -c ../sway/criteria.c\nIn file included from ../sway/criteria.c:15:\n../sway/criteria.c: In function 'criteria_parse':\n../include/log.h:40:2: error: '%s' directive argument is null [-Werror=format-overflow=]\n   40 |  _sway_log(verb, \"[%s:%d] \" fmt, _sway_strip_path(FILE), LINE, ##VA_ARGS)\n      |  ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n../sway/criteria.c:629:3: note: in expansion of macro 'sway_log'\n  629 |   sway_log(SWAY_DEBUG, \"Found pair: %s=%s\", name, value);\n      |   ^~~~~~~~\n../sway/criteria.c:629:40: note: format string is defined here\n  629 |   sway_log(SWAY_DEBUG, \"Found pair: %s=%s\", name, value);\n      |                                        ^~\ncc1: all warnings being treated as errors\n``. Thanks!. Update scdoc to 1.8.0.. Thanks!. Thanks!. Thanks!. I assume you're an alacritty user?. Well, this is a bug in alacritty. I assume it's also a bug in firefox.. By password manager, @emersion means clipboard manager.. Thanks!. Thanks!. Thanks!. Thanks!. I don't like-` either but who cares. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Thanks! But are memory leaks in the validation path really that important? We exit right away.. No chance.. Thanks!. This was by design.. Thanks!. This is by design. Is it causing errors for you?. We should make wildcards fail more gracefully instead.. Thanks! It might take a while to find someone to review your work, though.... Thanks for the reviews!. I have to admit that this patch makes me uneasy. Like @emersion said, it's the login manager's responsibility to login. Since login managers are unsupported, the normal way of logging in is by... logging in, e.g. with agetty, which will run a login shell. I imagine that the login managers are wrong if they aren't launching their compositors/X sessions like so:\nexecvp(\"/bin/sh\", { \"-sh\", \"/usr/bin/sway\" })\n\nSorry for stonewalling this, but I want to understand better before we start adding binaries to sway willy-nilly to fix someone else's bug.. Yeah, I'm going to pass on this patch. I think you should make your case with the login manager instead.. Hmm, annoying problem: different pixel formats.. Just cute effects, yeah. Not sure how it would interact with the Vulkan proposal (poorly, I assume).. Please submit a pull request rather than pasting patches into issues. Thanks!. Thanks!. Thanks!. I suggest patching meson.build instead.. Thanks!. Hmmmmmmmmmm. I gotta think this one over. I think I'm -1 to this change, it's a bit too complex to justify considering that 99% of the time we're going to be working with a release tarball, not a HEAD tarball.. -1, I'd prefer to find a solution which isn't as reliant on compiler-specific behavior. >Or if all occurences of __FILE__ are below the source path, then it is possible to determine the path length in meson and set a definition like LENGTH_OF_SOURCE_PATH for the compiler. In the code, then use\nThis seems reasonable to me. Okay, +1 to -fmacro-prefix-map so long as it doesn't break on a compiler which doesn't support it.. This is Debian's problem, not ours.. Sorry, that was a bit too curt. But Debian's bugtracker is the better place to report this.. Why not just report the bug to the right place?. This is by design and a limitation of using an Xwayland application (dmenu) for this purpose. Check out bemenu for an alternative.. Thanks!. If we're feeling spicy we could wait for the new swaybg instance to come up before killing the old one. The z-ordering should place it on top. I'd rather just remove this entirely to be honest.. You generally don't get useful logs after the bugs have started. A partial debug log isn't very useful. I'm still in favor of removing this entirely.. Needs links to this translation in the list of translations in the other README files.. Got some feedback from the spanish speaking community that this isn't a very good translation. I'm going to pass on this patch, but thank you.. We can merge new features into master, I cherry pick bugfixes into the 1.0 branch for each rc.. Can you update other READMEs with a link to the spanish TL?. Err, my bad. I wanted you to update the english readme with a link to yours.. Thanks!. Thanks!. Thanks!. Is the more portable solution to set CLOEXEC on the file descriptor with fcntl after the fact?. >A more portable way would be to replace _POSIX_C_SOURCE with _GNU_SOURCE unless compatibility with an old standard is important\nThat would be less portable. We're a POSIX shop here. I'm wondering if we can do this POSIXly by saving the file descriptor configuration until after it's opened.. Thanks!. Thanks!. Thanks!. Thanks!. Can you share your sway config?. You're not linking to the right version of wlroots. Don't install it in /usr/local unless you know what you're doing. Try just installing the wlroots-git AUR package instead.. Thanks! FreeBSD build soon?. No thanks.. Thanks!. Yeah, weird. Investigating.. Github was dragging its feet delivering the webhook, it seems.. The logistics of figuring out how to pay who and when and what for are complicated and difficult to get right. Today I work full time thanks to the donations on LiberaPay, and I hope tomorrow I'll be able to support more people. Until then, I just try to buy hardware and send it to devs when they need it, etc. I think the status quo is fine, but if there are any sway or wlroots devs who feel differently, please reach out privately.\nI appreciate your interest and support :). Thanks!. Thank you, but we'll pass on this patch.. Thanks!. Linode had an outage and the one service I still have on Linode was affected. Should be good now.. Prefer to call this sway-ipc. This looks great. Fix the FreeBSD build and a few minor issues and I'm +1 on merging.. I'm guessing it involves syncing up with whoever maintains the scdoc port in FreeBSD.. Thanks!. >There are a few changes I would like to make to the transform command possibly post-1.0.\nNote that we'll accept the patch into master whenever you want. We won't include it in 1.0 but 1.0 isn't based on master.. I think this is the source of the error:\n2019-02-25 19:43:41 - [sway/sway/config/output.c:128] Adding output * config\n2019-02-25 19:43:41 - [sway/sway/config/output.c:136] Config stored for output * (enabled: -1) (-1x-1@-1.000000Hz position -1,-1 scale -1.000000 transform -1) (bg (null) (null)) (dpms 0)\nI guess your script is applying the wallpaper via IPC, rather than having it specified in your config - but you have output * in your config. When you run reload, it's going to re-apply output *, overwriting all of your output configs. You need to re-run output <id> bg <path> <mode> after this happens.. If you can convince i3, we'll add it.. Thanks!. Thanks!. Thanks!. It's probably reasonable to use scdoc-git indefinitely for the same reasons we use wlroots-git.. Thanks!. Thanks!. Why not just drop versions from the README and let meson do it?. Just do >= 1.9.3. We have a policy of always being on the latest version of everything.. >Since you didn't update the version in the scdoc Makefile\nSorry :< I'm going to release .4 to correct this.. Aight. Thanks!. Thanks!. Thanks!. This is by design.. Oh, I misunderstood your bug report - apologies.. Thanks!. Thanks!. Yes, it does. You do not have wlroots 0.5 installed correctly.. Thanks!. Thanks!. ...this is definitely not our bug. Talk to pcmanfm.. >I acknowledge SWAY doesn't support DE/WM.\nThanks for stopping by!. LGTM. Thanks!. I mentioned wf-recorded in the blog post:\nhttps://drewdevault.com/2019/03/11/Sway-1.0-released.html. Thanks!. Thanks!. We don't accept machine translations. Stick to updating the english readme.. Removing text from READMEs in other languages is fine, it's adding new text that's the problem :smile: \n. Like @emersion said, this isn't the right solution.. Thanks!. Don't forget to reach out to Carla so other users don't experience the same issue.. Would the qutebrowser fix not apply here as well? Also, if the problem lies in PyQt, report the bug to them.. No, I mean can't the same fix that was done for qutebrowser be applied to Carla as well? And the issue doesn't lie in Qt if Qt provides a means of solving it - which qutebrowser seems to take advantage of.. Space between if and (, please.\n. Style violations - add a space between if and (, and do not include a space between the function name and (.\n. Style issue - join these two lines\n. Using length here is a waste of cycles. If we memmove with the capacity, we move fewer items (leaving garbage from items[list->length ... list->capacity]).\n. Oh, my bad, I read the diff backwards.\n. What's up with this?\n. Consider how this works when reloading, and also add a space between } and else\n. Use free_flat_list to free the command strings, too.\n. Don't use spaces, just do it better than this weirdness.\n. We need to run exec after wlc is initialized so that x programs will have a server to use.\n. Push the tabs further to the left and join the two halves of the ternary statement.\n. Is exec pushed to later?\n. I mean the exec command.\n. Yeah, sure.\n. How did I miss this earlier? Style guideline - one space around =, do not align.\n. This isn't the i3 behaviour and shouldn't be ours, either.\n. The i3 behaviour is to adopt whatever size the window would have had if we weren't managing it. Perhaps we can save desired_width and desired_height whenever the client makes a geometry request?\n. We should probably do this before we merge this PR. Empty containers being left around causes problems.\n. Does this return focus to the child once it's re-inserted into the tree?\n. Are there any other floating sub-commands?\n. We don't need an if statement, just pull it and deindent the block.\n. So does fullscreening a floating window already work as expected?\n. No, I would guess not.\n. Spaces around the ternary operator, and braces around the loop, please.\n. Sure, I agree. I was just curious if there was anything else we should do.\n. Meh, alright.\n. Add the corresponding else statement to the next block.\n. Not necessary for merging this PR, imo, but feel free to investigate it if you like.\n. Oh, coolio.\n. K, leave it be.\n. Note that this won't work for modifier keys. Look at bindsym, it has to deal with them special. Not going to block this pull request because of it, though.\n. This isn't the only place we exit from, fwiw.\n. Style issue - deindent the case blocks.\n. So that case lines up with switch.\n. I'd rather not have a stale socket lying around after an abort.\n. style\n. No\n. Minor style - space at the start of comments\n. style error\n. style error - space after comma\n. style error - space between if and (\n. arrange_windows does care about the order of children. It will update the x position when it's run.\n. And this is how I'd implement move if I were doing it.\n. I think that's the best way to arrange windows.\n. style: split these up into more lines and add /* fallthrough */ as appropriate\n. style\n. Forgot the whole \"keep alphabetized\" thing, huh?\n. Style: I prefer to declare these with powers of two explicitly, like so:\nM_FLOATING = 1,\nM_TILING = 2,\nM_DRAGGING = 4,\nM_RESIZING = 8\n. What is with you and using enums instead of defines? Justify this behaviour or switch to defines.\n. These names \"lr\", \"tb\", \"sib\", are not very helpful.\n. I don't like it. How about we have broader defines for EVENT_PASSTHROUGH and EVENT_HANDLED or something\n. We use strcasecmp for almost everything, let's continue that pattern.\n. Return a boolean here.\n. Sorry, didn't expand the diff. Thought this was part of handle_output_created.\n. Why is a boolean not sufficient\n. Don't do it this way. Write a FindJsonC.cmake instead.\n. You can use pkg-config inside the cmake file, I just want consistent dependency resolution between all of our dependencies.\n. style - add a space after the comma\n. style\n. > wtih\n. Use free_flat_list here.\n. Are you sure this works? I'm not.\n. Cool.\n. Use strdup\n. Trailing space\n. Woah, why did you change to vfork?\n. No macros.\n. If you aren't using it, take it out.\n. Well, alright then.\n. Can you fix the indentation here? And use sway_assert.\n. This isn't true, you can use it.\n. Ditto. You can use these sorts of things at runtime.\n. Always include braces.\n. Make cmd_results_new strdup both of the strings it gets and then make something higher up free them later.\n. Style error - } else { is correct\n. style - no extra space inside the parens\n. ditto\n. ^\n. Do not allocate a fixed buffer - measure the size of the final string and allocate the correct amount of memory.\n. The plural form of criteria is criteria.\n. Why a normal string? I'd rather not have different code paths for this.\n. style nitpicks - drop the extra newlines and make sure there are spaces around operators (i.e. +)\n. Can you split this function up into several?\n. We need to ensure that the new window receives focus before executing the command.\n. Which we do. Whoops.\n. Fair enough. It's probably okay to deviate here for the sake of better code. @stapleberg, did you have any particular reason for doing it that way?\n. @stapelberg *\n. @stapelberg what's the rationale for being able to set a window criteria that matches an unpredictable number?\n. style - deindent the body of the switch block (line up case with the switch statement).\n. Two semicolons?\n. I'd like to force debug information so that we get sane backtraces after crashes in the log.\n. Let's just use gdk for this, rather than having two paths.\n. Fixed in 155f5d2d3e054233875123efcdfb288c3bda3ff1.\n. Spaces!\n. I don't like all this commented out code. Just add the code when you implement the thing.\n. Can you define this closer to where it's used, and add const?\n. Nevermind, was me being stupid. I think there's a function in here somewhere that tells you how big a number is, we should reuse it.\n. https://github.com/SirCmpwn/sway/blob/master/swaygrab/main.c#L16-L24\n. Anyone want to take bets on when we'll get the first bug report for screens >1,000,000 pixels wide?\n. common/util.c or something\n. Indentation here is a bit off.\n. Here as well.\n. This comment doesn't make sense anyway, the button is a statically allocated uint32_t.\n. Err, does this function end?\n. Can you pull these out into a separate function that creates a new bar populated with defaults? And after config is parsed, we should make sure there's at least one bar.\n. Well, I guess I've never run i3 without a bar in the config. What happens if you do? I was assuming that it would add bars by default.\n. Huh. Well, let's go with that behavior.\n. style - space between if and (\n. Uhh?\n. You can't change this JSON property name - it's backwards compatible with i3bar.\n. We still have to update the IPC socket.\n. Can you put these into sway_terminate as well?\n. Does this transfer ownership of unmanaged containers to outputs instead of workspaces? That doesn't make sense. Try this: run dmenu and switch workspaces. If dmenu shows up behind the windows on the new workspace, bug.\n. You're right, I was confused before. Thanks.\n. This struct is getting kind of out of control. Half of the properties only apply to a certain kind of swayc (i.e. C_OUTPUT, in this case). Can we figure out a good way of splitting these up?\n. How about a union of pointers to type-specific data?\n. These comments are the sort of thing that would be better to put into the extended commit message.\n. Nah, leave it be. 0 is going to cause issues.\n. This comment is fine.\n. Style issue here\n. Don't comment out code.\n. More style problems\n. Style error\n. Commented out code\n. Style - don't do this weird thing here\n. So many indents\n. Want to implement the Airblader fork's border options, too?\n. Does i3 just print a | for the separator? Doesn't it also use the colors from your thing?\n. https://github.com/SirCmpwn/sway/blob/master/swaybar/main.c#L62\n. Yes.\n. Correct, use target_link_libraries in the sway subproject.\n. Example\n. semicolon?\n. You can move the declaration, or you could add curly braces around the body of this case block.\n. Yep.\n. Probably a wlc issue tbh. It draws them before we can arrange them. I keep asking @Cloudef about this but it's difficult to fix.\n. It looks like this code emits a bar modifier for every bar to every bar, instead of to every bar. In other words, press and release the mod key with three bars running and 6 events will be sent to each of them.\n. Can you put the include/add_definitions only where they're required, i.e. here https://github.com/SirCmpwn/sway/blob/master/sway/CMakeLists.txt#L1-L7\n. Can you add (but not necessarily support yet) a boolean for whether or not input from this device can be captured by a window, and a wlc_geometry for the usable region of the screen this input gets? cc @Cloudef, head's up, I'd like those features in wlc\n. This doesn't really belong in the config struct. Make it a new global.\n. sway_log(L_INFO, \"Found input device %s\", libinput_device_get_name(device));\nThis should be a higher log priority and should be user friendly, so you can look through your sway log for the input names.\n. Can you make a new man page: sway-input(5)? And on this man page, just do\n**input**\n    See sway-input(5)\n. Also, please note the defaults here.\n. This issue still persists?\n. > What is the usecase for this?\nWell, eventually Wayland clients will be able to grab the mouse (like games), but it'd be nice if we could prevent them from being able to grab certain input devices, if that makes sense.\n\nThat sounds like a good idea. \n\nYeah, xinput supports it and I actually use that feature, so I'd like to see that in wlc.\n. Actually, please use isspace from ctype.h.\n. I didn't notice that. That's a good idea.\n. Should probably go in include/client/cairo.h (I don't care where the implementation goes).\n. @mikkeloscar voluneteerd in IRC to move it, he's presumably already working on it.\n. Hold on, I'm not understanding why moving this one function has anything to do with gdk-pixbuf.\n. Yeah, that's annoying. But I appreciate that you put the ifdefs around it.\n. Weird indentation here\n. And sway_terminate should probably end with an exit(EXIT_FAILURE).\n. Better than the old way of crashing when you entered too much text and buffer overflowed, which I imagine could lead to code execution if done by a crafty person.\n. I don't understand why this is necessary over list_insert.\n. In this case it's unable to connect to wayland, not sway. And we should probably default to a directory in /tmp instead of just not working if XDG_RUNTIME_DIR isn't set.\n. Yeah, that's fine for a different PR. Do any Wayland clients work at all in these conditions? Should sway set XDG_RUNTIME_DIR itself if not already set?\n. The language is \"output\", rather than display.\n. s/display/output/\n. :+1: \n. Are we leaking memory every time the border updates? Where do we free this?\n. Commented code is bad. Why is this commented? It's kind of important, probably related to why gnome-calculator is fucked up.\n. Note: gnome-calculator is made to float in my config file with a for_window rule.\n. Sorry, the config I linked on IRC is actually a different one than I was testing with at the time.\nfor_window [title=\"^gnome-calculator$\"] floating enable\nIt freaks out by appearing briefly and then becoming very small, I think. I can still move up to the floating layer but I don't see it and I can't interact with it. I can also close it (with keybindings).\n. I'm going to suggest an \"if it ain't broke, don't fix it\" approach here.\n. Well, if it's broken then I prefer @fluxchief's approach.\n. The default text rendering in i3 is with pango markup enabled.\n. ^\n. It's not necessary to disconnect the client here. They can stay connected and issue further commands.\n. Ditto for here.\n. Why do you store it as a string here? You never use this string.\n. Indentation issues here.\n. Did you mean && here?\n. const char *sep = \" \";\n. Can you make the logging here make more sense out of context? Or just remove this, it seems kind of extraneous.\n. cc @Cloudef \n. You're right, || is correct. Perhaps just make this two if statements?\n. Shouldn't this be actual JSON null instead of a string \"null\"?\n. Can't we use wlc_view_from_surface?\n. Oh, my bad.\n. also here\n. If you find a file that doesn't conform to the rules, please reformat it as necessary.\n. .\n. tab issues\n. typo\n. This log thing is not necessarily true. Anything could have invoked this function, not just mouse click things.\n. style issue here\n. The correct behavior is prev_on_output.\n. Assertions are to detect things that should never happen. Horizontal scrolling doesn't qualify.\n. I don't have a strong preference for or against a default here, but the assert message needs to be updated.\n. It's \"30px\", not \"30 px\". Same arg\n. Maybe just have move_container detect if a window is floating or not.\n. https://faq.i3wm.org/question/2787/move-floating-window-with-arrows/\n. Yep.\n. :-1: \n. indentation is screwed up here\n. And in several other places\n. I'm familiar with this macro and its uses, and I've seen it elsewhere. :-1: \n. :-1: \n. Expand the macro everywhere. The size constant would have to be manually updated when we add new commands.\n. Why not just return EVENT_HANDLED; on each line you set handled = true on, then eliminate the variable and tighten up the performance a tad?\n. Focus is locked during view creation sometimes to deal with an edge case, iirc. @zandrmartin would know more. I'm not sure if the order matters.\n. Sounds good.\n. Struggling to find the thread where this was discussed.\n. Style error here, space between ) and {\n. Please put this in containers.c and expose it from containers.h\n. This should probably live outside of the if statement, right?\n. this line is too wide, split it up a bit\n. style: add spaces after the commas in function calls\n. style nit - add braces on these if/else blocks, and add spaces so it reads (item - list->items) / size.\n. Can you add more newlines in these functions? Try to limit your code to 80 characters wide.\n. braces again\n. Is there any way we could encode these into the char arrays? i.e. \"inherit\" or something.\n. How about just using strdup everywhere instead of this function?\n. Is there something else we could use to get the pid of the client? Have you filed a bug with FreeBSD asking for this feature? This is crucial to IPC security.. Don't comment this out, just have the FreeBSD version of get_client_pid return -1.. Does the lock surface still get all of the keypresses if you remove this?. Worked when I tested it \u00af_(\u30c4)_/\u00af. Yeah just revert all of the readme changes. Needs to move out of the header and into a file (no code in headers, just don't make it inline). Can you add error handling for invalid ints here?\nc\nchar *end;\nint inc = (int)strtol(argv[1], &end, 10);\nif (*end) {\n    // error\n}\nAlso note no space between (int) and strtol. Can you add another function somewhere that uses a switch case or something, given a layout, to find the next auto layout? I'd rather not rely on the order of and value of the enum values.. Would prefer this as move promote. Weird indent here, also weird extra parenthesis\nc\nif (index < 0 || !is_auto_layout(container->layout)\n    || (size_t)index < container->nb_master)) {\n}. Use size_t instead of uint_fast32_t. That goes for everywhere, s/uint_fast32_t/size_t/g. Can you prefix all of these auto related functions with auto_?. More weird indentation, use tabs. This whole function has now become pretty complicated. Can you split it up into several?. Unnecessary parens. No space after !. This won't accept any layout, right? It'll accept no layout, which isn't a thing that happens in practice (things like views have no layout). Please make the indentation on these consistent. Make this L_DEBUG. It's programmer error, right? Not user error? And is a recoverable condition?. Space after switch. Could this function be split up a bit?. Nevermind, let's not. -1 to all the changes in this file.\n\nDon't add this sort of doc comments thing. If you want to add doc comments, you should propose it in a seperate pull request. Note that we already use doxygen style comments informally in some other places as well, so if you wanted to do that sort of thing that'd be fine with me, but you should put it in the header.\nMaking read_line strip whitespace is beyond what this function should do. If the caller wants whitespace stripped, the caller should strip it themselves.. Use sway_assert, or better yet handle the error intelligently and return NULL. SIGABRT should never happen at runtime on sway, as a general rule.. Not necessary to specify u here. Join this { on the previous line. Not necessary to specify u everywhere. Just use if (str) here. Add spaces around mathematical operators. This is a better approach overall, though, +1. Does isspace(*str) not just work?. There's no need for the ret variable to exist. During this branch you can just return false directly, and return true at the end, and eliminate the variable.. Use size_t for the index and count, please.. Technically the word is braces, not parenthesis. () are parenthesis, {} are braces.. To be honest, rather than take this approach, I would prefer to make the whole config parser character oriented instead of line oriented, and make it a state machine, like a more typical parser would look. It would be a bit more complicated, but less sloppy and more things would work. It's my fault for not designing the config parser like this to begin with, for the record.\n\n@minus7 might be interested in making that change. You can even make it syncronous if you like!. Yeah getline is fine. Yes.. Better to do (unsigned char)*str, then. You don't need to change it everywhere, but going forward do not use that principle.. Just spell out \"bottom\" here. workspace_layout auto left, not workspace_layout auto_left. Don't we also want that TTY one?. Can you put this into a directory called contrib instead?. style nit: join the } and else if lines together. Can you make an enum for these?. Use a switch here please. These braces aren't necessary.. Seems docs are missing for line-uses-ring? Possibly others?. Can you alphabetize the options and put all the appearance-related ones under a new section called Appearance?. I would prefer to call this move_amt. Not really a length.. Since move prev et al don't work with pixel arguments, split them into a separate doc thing.. Can you clarify that px is optional and changes the behavior? Maybe this should be split again into two sections. Current version is unclear about the distinction between move left and move left 10px. Just proposing that two sections might make sense. If you can sufficiently clarify it without that's fine.. Join your elses on the same line as your closing braces. No yoda conditionals please. I would prefer snprintf to all of this manual string slinging. You can also use snprintf to measure the final string here. Better yet, how about just doing this in a loop and avoiding allocation and string slinging alltogether?. bool add = false\ninclude stdbool.h too. Initialize to NULL. Use container_map instead.     s/Here are some ways to use criteria in this way/For example:/. Use a struct.. Can you make this an enum?. If the mode is set, it renders this in the bar.. Sorry, nevermind. In the compositor it's fine to keep this a string. We'll want an enum on the swaybar side, though.. Yeah this can probably be removed. This is the one I'd rather have as an enum. Two enums.. Can you make a JSON object here and populate it instead of using string constants?. The binding mode can probably be removed from this struct entirely. I don't think it's used anywhere.. Aye, should probably go. Unless the i3 protocol does this or something.. We have a sway_assert for this purpose. But in this case w/e tbh. Alright, let's leave it. i3 compatability is the most important factor here.. Don't take that approach. This way the user can choose not to use this feature and adjust their security configuration accordingly.. No, bar config updates isn't an event we currently have, and I would rather not have the compositor updating the bar config to send over the wire every time the mod key is depressed. Definitely use the modifier event.. What about recursive symlinks?. abort is probably not the correct action here, use sway_assert and return a policy with no permissions.. In this case you need to return no permissions as well.. Actually I don't think this ever happens?. >I don't think security mandates one approach over another, the client must be free to ask for whatever it likes, It's the server that enforces policy and the client should deal. I think (and so did @calvinkosmatka, independently) that having the client ask for everything it wants, but use only what the server gives corresponds perfectly to the security model and would simplify matters.\nThe server returns errors if you try to bind to events you don't have permission for. So either that needs to be handled with a retry mechanism that removes the unpermitted events, disables the relevant UI in the bar, and tries again. But I don't think that's important, can just ask for only what the user needs instead. We shouldn't be binding to events we aren't going to use anyway, if there's a bug that leads to that information being exposed from swaybar it reduces the impact of that vulnerability if it didn't bind to some events in the first place.\n\nThis raises another point about client handling of security denials. In #1172 I saw that the server declined IPC, and swaybar carried on as if nothing happened, which I think is a problem.\n\nYes, the clients need to handle permissions errors more gracefully. I have done this for swaymsg but haven't gotten around to it for everyone else. Patches welcome\n\nThat suggests that maybe the client should not subscribe to all events at once, but group them by their \"severity\". Some events are optional (modifier events), and some may be critical (abort if not available).\n\nNo, i3 compatability\n\nWait, ok I see code in commands/bar/mode.c for handling bar display mode commands that sends an ipc barconfig event but the event never makes it to the socket because there's no security mapping there. I guess the question is whether to make bars subscribed to barconfig or bindings as a whole to do display mode switching.\n\nI don't think the barconfig is maintained in the compositor beyond the initial allocation, but that's probably the best approach.. No, it logs the error and returns the first parameter. Sway should never abort at runtime, because that would kill your whole session and cause data loss and things like that. It's just a utility function to add conditional logging, the user has to implement a safe exit path.. Also, you should be storing the fully resolved symlink. When we validate the policy we're going to get the fully resolved path from /proc/[pid]/exe, so we need to compare against that to get the appropriate policy. All symlink resolution should happen when the policy is parsed and never again.. That's not true. We can introduce our security policies without making backwards-incompatible changes to the IPC protocol.. You should probably return NULL in case of failure.. No need for the failed label and all the gotos in this function, just return false wherever you would goto failed. Style nit, don't put a space between function name and parenthesis. Tabs, not spaces. I see what you mean now. That makes more sense, but I still don't want swaybar asking for events that it doesn't need.. Don't you need to resolve symlinks here?. I don't understand how supporting mode switching requires subscribing to the modifier event.. I think that's niche enough that we don't need to bother handling it.. Is that something people do? I wasn't thinking you could change that at runtime. Currently you can't change anything about the bar at runtime without restarting it (reloading your sway config restarts the bar). Bleh. That's going to be annoying. Alright, here's the approach we should take: subscribe to only what we need, then add more subscriptions later if necessary as features are toggled on/off. We don't have to unsubscribe but we also don't have to subscribe until it's necessary.. >You can use sizeof(char* mode_enums[])/sizeof(void*) to have the compiler compute n for you\nsizeof(mode_enums) / sizeof(mode_enums[1]) is more correct. Don't update desktop-shell - make a new protocol and add this to it.. Use a constant and sizeof. Can you write an int with the length, then allocate an appropriately sized buffer for it?. Macros - fuck no\nsizeof(mode_enums) / sizeof(char *) - no, doesn't work if the array uses anonymous structs (so I'd rather not establish a pattern that doesn't work everywhere)\nsizeof(mode_enums) / sizeof(mode_enums[0]) - yes. You need to free buf when you're done with it. >BS. boilerplate - fuck no.\nI take a hardline stance on macros. I will reject pull requests that use them. I've been pretty successful at making a codebase that's accessible to new contributors so far.\n\nI don't understand how a char* enum_strings[] can \"use anonymous structs\". We're not talking about generic data structure here. And remember that calling the function means the compiler type-checks for this.\n\nI was talking about the generalized solution for getting the length of an array in items. It doesn't necessarily bring any significant benefits to the table in this case but it works for more situations, and if one solution works in many places then it should be preferred over a solution that only works for a few.. Regarding macros, I don't really want to justify my approach here. Take it on faith that I know what I'm doing.\n\nUsing the correct type of a variable also works in all cases and is certainly not an anti-pattern.\n\nWell, if the variable is an anonymous struct, then you either have to redefine it in the sizeof argument (i.e. sizeof(arr) / sizeof(struct { ... })) or use sizeof(arr) / sizeof(arr[0]). You can't use sizeof(array) / (sizeof(void *) + sizeof(void *)), for example, if the struct is just two pointers, because of alignment issues. So sizeof(arr) / sizeof(arr[0]) is the most general case.. This is getting out of hand.\n\nBut I do accept that in your project you get to decide such things (as I do in mine).\n\nGood. Leave it at that.. What with this syntax? Also, why unsigned char over uint8_t?. memcpy(&list->data[list->length], ...) should work the same, right?. Makes a little more sense here. Still a bit weird though.. return &list->data[list->memb_size * index] would probably be simpler. Indent this line once more. :+1: \nNo thanks for inline/__attribute__((pure)) though.. >I don't think uint8_t really adds much here. It's all basically \"typeless\" data that we're not going to touch. \"unsigned char\" seems good enough for a byte type.\nWell, you need the size to be 8 bits. I would use a uint8_t for that.\n\nIt's a pointer to a VLA. The syntax seems a bit tricky and clever, but it really cleans up the other parts of the code. We can treat it like a normal array, where pointer arithmetic will work properly.\nNo, because list->data is a void *, so we can't do pointer arithmetic. It would require casting to a char type and then doing the offsets yourself.\n\nAh. Well, alright then.. Not important.. sizeof measures in octets, so sizeof(uint8_t) is guaranteed to be 1 too, but it's more explicit about the nature of the type.. I know char is defined as a byte. I still consider it obsolete in favor of uint8_t.. style nit: indent the second line of the condition and remove the extra newline. If you're gutting free_flat_list, just drop it and replace its usages with list_free_withp.. This seems incorrect.. Is this sort of thing necessary? Why can't we just put char* into the list?. Can you move this into another file?. Consider moving this as well, just have a tray upkeep function that checks this and refires it if not running. This one too, just make it a simple\n```c\nifdef ENABLE_TRAY\ninit_tray();\n\nendif\n```\nThen make init_tray do all this work. Try to limit the tray code in this file to simple calls to another function.. Ditto here. Move it all into a separate function in another file.. Limit this to 80 columns please. Sorry, more style nits. You don't need these extra parens and you should put && on the next line.. I presume that you don't need to write the null delimiter?. Casting to void* here is unneccessary and probably on wlc_set_selection as well.. Well why did you make it const then?. It could work both ways and I'd err on the side of no null delimiter, but so long as you've tested it this way then I trust that it works.. Yeah, I figured as much.. I don't like the change in the docs here. This change is fine, though.. Just don't include this change.. Well, you also improved the message in this pull request, so I'm not really concerned. You could extend the error message to include the likely root cause if you like.. Should be tab, not spaces. Ditto. Also join this { onto the previous line.. (struct get_clipboard_request *)data;. What if the clipboard is longer than 512 bytes?. Also include the mimetype, and for mimetypes that aren't text/*, base64 encode the content.\nhttps://github.com/SirCmpwn/aerc/blob/master/src/util/base64.c. It might also make sense to update ipc_send_reply to handle large payloads that cannot (or should not) be written all in one write. Can everything from this point forward be moved into a separate function?. You can make the IPC command accept a preferred mimetype as input, and if omitted you could just send all of them (or the list, and wait for a second request to get the content?). Would be nice to offer wildcards, so that you could i.e. use swaymsg -t get_clipboard \"text/*\" in a script.. While you're at this, can you make swaymsg use a nonzero exit code if a command resulted in an error?. Can you add ;base64 to the mimetype? i.e. image/png becomes image/png;base64. Test for failure here. Otherwise a malicious client could just never stop sending us data until we OOM and then blow up. Let's also set a sane upper limit on the size of this in general, don't go higher than 8MiB. And double the size rather than adding 512 to it.. Yeah this whole loop could be made better in general.\nlen = 512, i = 0, buf = malloc(len)\ndo {\n  amt = read(fd, &buf[i], len - i - 1) // note handling of null delimiter here\n  i += amt\n  if i > len {\n    if len == 8MiB { free buf, error out }\n    _buf = realloc(buf, len *= 2)\n    if !_buf { free buf, error out }\n    buf = _buf\n  }\n} while (amt > 0). Also put a timeout on this to avoid a slow post attack. And instead of trying to do this all at once, let the readable signal get hit several times and build the buffer up over time. >as long as there is any data to read from the fd the wayland event loop (using poll)\nThat isn't how it works. You read until EoF here, you don't just read what's available (note, I haven't read your updated commit yet). You block until the whole thing is read and then you destroy the event source.. MiB, use * 1024. The extra parens are not necessary. Use {} here. Your error messages could be more descriptive. L_ERROR is bubbled up to the user by default, they should be able to understand them.. We could also change the offer strings?. Well, JSON does not support binary data. We must convert it to a string somehow.. I guess we could drop the JSON act and just dump the data directly into the socket like we do for screenshots, but screenshots are a hack too and I'd rather not proliferate hacky approaches.. I think that would be an unusual situation, but if it does occur, image/jpeg;base64;base64 is a valid mimetype afaik. Still, not that hard to just test if a string ends in ;base64 and skip adding it ourselves if that's the case.. We can't just not handle binary data, even if it's a bitch.. Use dash-case here.. Don't we need to read the response for further reads to make sense? Also, if chaning the client fixes this then I'm skeptical of the fix, malicious IPC clients shouldn't be able to crash sway.. Is there an advantage to reading it then instead of here? The response is generally meant to be specific to that request.. We can probably avoid the deadlock without resorting to rate limiting, no? Is that really the problem?. Alright then. Can you add the sway side to this PR?. Data loss sounds better than crashing to me.. This looks like it would cause issues if you didn't managed to clear out the write buffer all in one go, or for long lasting clients. No?. Gotcha, I was actually misreading some of this code.. See the change to the english readme in https://github.com/SirCmpwn/sway/pull/1317. Can you translate this to something to the effect of \"on Patreon\" rather than first person?. Clarify that I should be contacted in English. This section needs to be the first subsection. See other localized readmes for examples.. Also, if you can't be there on IRC, can you leave a snippet of Italian in the comments of #1318 we can use to instruct Italian speakers on IRC to direct their attention to GitHub?. Remove this line, and add your readme link to the main readme.md.. Do not localize my name. Translation improvements are to be done via GitHub pull requests.. GitHub pull requests against Sway, like this one. They shouldn't reach out to you directly, I will loop you into the review here on GitHub.. You also need to move the section on Dutch info up, please review the TL guidelines.. These changes seem unrelated?. Style errors, review the style guide. Ah, fair enough.. That wasn't the only style issue. Check here as well.. Here as well. No, no, put the parens and brace on the same line.. I would split it on the boolean operator and let it exceed 80 columns if necessary.. The language status summary should go immediately before the releases section.. Can you split this on to two lines? I don't like the dereference-increment operation going on here.. Ditto. This feedback should be more actionable.. We don't use C++ in Sway.. .. Should be CLASS. Speaking of which, we should get that subsystem spun back up sooner rather than later.. :hankey: . :hankey: . Don't just copy+paste more than a few lines at a time, @emersion - make sure you read everything you import.. Source?. I would rather just do\nc\nvolatile char *pw = password;\nvolatile char zero = 0;\nfor (size_t i = ...) {\n    pw[i] = zero;\n}. Can we resolve this now?. :+1: . It's not, pull it out. Note to self, put these in the wlroots ticket. This comment belongs in the commit message. I would rather just do\nc\nvolatile char *pw = password;\nvolatile char zero = 0;\nfor (size_t i = ...) {\n    pw[i] = zero;\n}. If you only use the first arg, should the checkarg call expect exactly 1 instead of at least 1? Does it make sense to join_args on argv and use all of them?. Same comment applies to a few files.. Can you just use int len = snprintf(NULL, 0, ...) here. I tried xkb_variant dvorak and it had no effect.. Woah. Changing XKB settings at runtime does not seem to have any effect.. -1 to this approach. Use swayc_descendants_of_type instead.. Sounds good.. Yeah this is confusing. In sway's command handlers argv[0] is the first argument and argv[-1] is the command name.. For wrapping purposes put these on the same line now that it's shorter.. This is an unsolved problem bigger than this PR.. Don't have time to do a proper review but -1 to whatever's going on here. This should probably use sway_assert. Nah just take this out. Can you define \"rendering order\" for me. derp. sway_seat_get_focus can just return null and then you don't have to check has_focus. Does has_focus need to exist at all?. Is it necessary for every container to be represented in every focus stack? If not found, can't we just go up the parents until we find a container that works?. (or return null if nothing is focused). Yeah seeing all of this boilerplate everywhere I am super on board with sway_seat_get_focus returning NULL and ditching has_focus. Uh, why is this allocating memory? Maybe make this generator-like and instead of returning a list, take a callback?. FYI floating is probably what should be done next. Can this be static?. Let's not call this multiple times, cache the call up above instead. I suppose that's reasonable.. While I think that heavy reliance on wl_list is appropriate for wlroots, it's not how Sway was written and I don't want to introduce new patterns. The map approach is more appropriate here. Also, macros are the devil.. This probably comes from old code but can you move this { over to the same line as the case and deindent the whole thing so it's not as crazy. It's going to get pretty tiresome checking this everywhere. Maybe we should pull this higher up and put contextual commands into a different command list? Will file a ticket.. This comment can be removed. Just iterate over the children twice\nc\nfor child : con.children {\n    f(child, data);\n}\nfor child : con.children {\n    container_for_each_bfs(child, f, data);\n}\nI still don't like allocating a list here. We should keep it explicit. Ticket for this. Static queue sounds good to me. error message here is wrong. here too. If we do the \"no backends at all until configured explicitly\" thing this should probably be --no-auto-backend. Will need a test here eventually to see if autocreate gave us a multibackend that we can just reuse or if we need to create a multibackend ourselves.. Maybe wlroots should provide some helper functions for merging multibackends together?. ?. This can be const. Should be const and strdup'd probably. I don't like \"subbackend\" everywhere, just call it backend (or backend_config maybe for this type). I know I'm picking nits here but we should probably default to 1280x720. Also, we should have add-output headless-2 [WIDTHxHEIGHT|WIDTH HEIGHT]. I wonder if we can set the mode on headless outputs to an arbitrary resolution via output HEADLESS-2 ..., hmm.... I've removed the \"window\" abstraction but kept this file for wl_buffer management. Refactored the old \"window\" abstraction out of it.. This file contains formatting fixes but also addresses a long-time TODO in Sway 0.x to bring the cairo helpers into libsway-common so we could use them in both clients and the compositor. woohoo. doop. doop. Ah. Alright.. They get typed a lot so it's more ergonomic. Since sway isn't a library I prefer it this way.. Could also just statically allocate it. Can you get all of the output layout stuff in order next. -1 to renaming this to container_arrange_windows, I don't feel like arrange_windows is a logical child of containers. container_for_each_bfs -> container_for_each and container_map -> container_descendants is a confusing change. The distinction between these two functions is important. It'd be better to do container_map_descendants and container_map_descendants_bfs.. deindent this a tab. ditto. It occurs to me that __func__ here is not useful. Do you mean layout coordinates?. If you have a crazy bar ID though that could fail and this might not. Fair. Call them container_descendants_for_each and container_descendants_for_each_bfs then?. meh. +1. We already have container_output_destroy and container_view_destroy in this file, I'll move them all. The command is named default_orientation, so it was poorly named in the first place.. doop. TODO what?. Sounds like a separate ticket?. doop x2. meh. alright you convinced me. w/e indeed. We'll have to do a big refactoring project-wide to deal with multiseat. nah. Yeah cause it can be NULL. 0 != NULL in this case. nack. I'll be adding something in a coming PR. I don't want to bring the seat into this level of the code (for the time being). We should consider renaming containers to nodes. Hm, what if focused is a workspace?. Eh. +1 good refactoring here. Can be static. Will this always be correct? Example: start a process in a different workspace, pid tracking picks it up, switch away, window opens off-screen\nProbably best to only set focus if the parent has focus?. Is this now okay? We should assert if it's a programming error to pass in a NULL container. 80 col limit. set ruler\nset cc=80. Extra space slipped in here. Can move this into the loop. Doesn't splitting a container just change the container layout? This is being handled at the command level iiuc. Probably better to handle here than at the command level though tbh. I wonder if we should be passing layout coords to this. Good catch. No, I think we need to do this here. i3 doesn't bring focus along for the ride.. Though I have always wanted an option to make moves follow, cause it's nice for moving a bunch of things at once. I think it would be wise to rename it internally, even if we don't update the docs.. Still have this question. Can still move this into the loop. hm. How about using a wlr_box while you're at it. Do we need to at least damage the output whole here for this to work?. hm?. hm?. This looks like a weird and inefficient workaround when the real solution is identify and fix the bug. Prefer strtof, better error handling. No, it's not portable.. Looks like uchar.h is pretty shit after further research. It doesn't guarantee UTF-8 on the other side, just some locale-specific nonsense. I like my stock functions.. While you're here can you rename these to surface_{width,height}. I liked these names before. Missing a space. This should be con. Or con->parent maybe. If it frees it should be named destroy. deindent. Is there a reason for workspace_layout and layout to both exist. two spaces in this string. Arrange the parent. Still should be strtof. workspace_create et al. It might have been more useful before than it is today. It's in wayland-protocols. Because we handled focus out of the context of the seat's normal focus handling, seat_get_focus still returns what was focused before. Calling seat_set_focus with the return value of seat_get_focus (rightfully) exits early without doing anything, given that the previous focus is still valid. To work around this the hack changes the focus to the parent, then back again.. ack. x cursor themes are weird, I dunno. on sway it won't be. I do this all the time, it's all over sway et al. This is fine.. Nevermind duh I see why. Noted. Pushed fix to this file but will file a follow-up ticket to go fix my fuck-ups elsewhere. I'm not 100% on the best way to refactor this, I would appreciate it if you filed a follow-up patch improving it if you're not happy with it. Please move protocol feedback to the wlr-protocols thread. ya. +1. https://github.com/swaywm/sway/blob/e79ef491c8fbcd4ed42d47478428b0e272a03348/swaylock/password.c#L102-L108. Aha. If the output scale is dynamically changed we're SOL, I want to file a ticket and deal with it never. yup. oh my. We don't dispatch in a loop like some of our other clients do.. Used to be constants. Will lowercase them now.. I don't think this is error prone, this behavior is well defined. I know what you're saying. I disagree.. cannot. \u00af\\_(\u30c4)_/\u00af\nIt comes from i3, it means percent. aight. It's used throughout the function, I think this is a reasonable spot for it.. Which it can't be. The only case where that's true is containers detached from the main tree or the root container, and the former can't happen here and the latter is explicitly checked for.. fair enough. I don't think this needs to change.. What is this supposed to do? It's not documented on the i3 user manual.. It includes it in the command syntax but doesn't explain how it works. I updated #1737 to include this.\nAlso, resize grow|shrink <direction> <ppt> ppt is undocumented by sway but also works.. wrong. addressed in latest patch. ack, this was causing a bug. We can fix it by making that code a bit better... that focus_get_inactive can return NULL is a tough cookie to think about. I'm so happy that popups are children of their parent windows now\nScrew you wlc. :<. :<. Can we at least do an implementation that might work, then?. subsurfaces tho. We can probably just remove L_LAYOUTS, it's not used anywhere. true -> rerender the bar. That's not what this function is for, read the comment.. suuuuuuuubsurfaces. nup. I think you're missing the point of the patch here. Shit I see what you mean. I pushed a fixup commit. Don't do numeric comparisons on enum types, enumerate the valid options and check for equality. Thanks!. wrap to 80 cols. Use clock_gettime with CLOCK_MONOTONIC to get a better timestamp here. Elaborate on this. spaces around operators. We shouldn't give people an option to skip the overlay layer when something is fullscreen, that's just a footgun waiting to happen (it would break lock screens, for example).. But we can give them a choice of putting fullscreen views between the shell layer and top layer, or between top and overlay.. Then it should be moved to a new struct and stuck in the union at the top of this struct. I haven't really finished reading all of this but instead of saving the x/y it's probably better to just call arrange_windows again. Braces are mandatory and these reading/active checks are now done at commands.c by placing it in the appropriate command block. Please implement the sway behavior for fullscreeen so that we don't break people's stuff. Fair point. But in the tiling case we cannot assume that these coordinates will continue to be valid after unfullscreening.. Fullscreen should indeed hide the bar. But the bar is in the bottom layer, so it'll work either way.. I mean, I think we should go between top and overlay by default for that reason. But I'm not gonna sweat it if someone wants to configure it to go elsewhere.. Can you prepare a list of the limitations of your PR so we can track what work remains to be done in a separate ticket?. Need to validate argc is <=1. top layer needs to be below the fullscreen surface. i.e. not rendered. Can you sprinkle some sway_asserts around that ensure that if view->is_fullscreen the sway_workspace->fullscreen is always set to that view. This should probably be a sway_assert. Unless the protocol allows you to set popups as fullscreen surfaces... I don't think it does. We may still want to set the workspace w/h/x/y (which is done after the switch), not sure what the ramifications of not doing that will be. I'm not going to merge a PR that breaks swaylock.. Probably also not too hard to continue to use wlr_output_set_fullscreen_surface if there isn't anything in the overlay layer at the time. bump. bump. Not sure splitting this is necessary. bump. Split this into two files. It's part of a larger epic, we can keep this patch smaller and more focused and deal with it later.. -1. Neat idea, I like it. Ah.. aight but don't merge the lines. This indent is pretty crazy. This could also stand to be one indent smaller. \u00af\\_(\u30c4)_/\u00af\nSort it out between yourselves. >Why? This is in its own thread\nOh god why does this have threads. Nah, we should make it opt-in. Having to opt out of DPMS always annoyed me.. The compositor will use the already_inhibited error on input-inhibitor, which aborts any swaylock clients after the first.. Threads are the devil. Can't you somehow get the underlying dbus fd and poll (as in poll.h) on it?. Add comment explaining what this does. This seems to be missing indicator color afaict. Can you move all of this border stuff into a separate file. deindent the case statements. imo we should disregard the client opacity when drawing the borders. Yeah, we should just use the border's configured alpha color.. Add space before the (. All of these strings need double quotes, did you even try to compile this before submitting it?\nAnd review the style guide, you have numerous errors. Why is this defined as RUNDIR? Just call it LIBEXECDIR everywhere. Be consistent.. no no no no no. This isn't the appropriate time for a /**< comment. This approach isn't going to cut it, you'll have to render the text and if it's taller/shorter than you expected you'll need to re-compute the border geometry and re-render. Re-render compositor-wide if this happens, it would be weird to see each window with a differently sized border.. What do you need to know this for?. I suppose I'm not clear on what the sleep lock is supposed to do.. Take this out of the default config, or at least comment it by default. If you choose the latter extend the comment to explain what these args do and suggest the man page for further reading.\n. Correct. These should be taken out, and swayidle shouldn't use sway IPC directly. It should just let the user execute commands on a timeout, such as swaymsg exec swaylock .... >I really think that it would be nice for the user to have a consistent way to run the lockscreen, so it looks the same everytime\nJust run it with the same arguments every time, then. If you want to run it from several places with the same arguments without having to update all of them every time you change it, wrap swaylock in a script.. What is the \"sleep lock\" part?. There is, yes. I intend to split swaylock out into a standalone project that works on many compositors. Users might want to lock with a different lock screen as well. It also adds unnecessary complexity, it's no better than just having swayidle take an arbitrary command.. I see. Rather than an IPC command can't we just assume that if we ran swaylock the lock screen is up?. style: no space after ). style: spaces around operators. style: space before (\n. style: 80 column limit. I don't think IPC has to be involved here at all. A parameter specifying the lockscreen would be good but not sure why swayidle has to know the command it's running is a lockscreen at all. This function does too much, we should split it into container_at and surface_at and update a bunch of stuff, but that's out of scope for this PR.. We informally use it for documentation under the assumption that maybe someone will export them with some kind of generator. This newline doesn't need to be here and the comment above should be updated. I think we should probably restructure the top-level loop to live entirely in the output code, instead of relying on the filtered map kind of deal. Then when we encounter a tabbed layout we can render its borders right there and worry about the children in recursive iterations.. To accomplish this containers need to grow their own borders and some sort of bool should exist in the recursive function to indicate that child borders should no longer be drawn for subsequent iterations.. Sorry, I have no clue what I'm talking about, disregard that. comment is outdated but I think your code is wrong, we're supposed to arrange them from top to bottom. Something that bugs me but I don't generally mention is functions with bad balance. You don't have to split the line once you get to 80 chars, you can split it earlier too.. No, we don't want to call notify_enter.. Style: deindent the case within the switch and add a space so switch( becomes switch (. Prefer multiple strings to backslashes\nc\n    wlr_log(L_ERROR, \"Too few parameters to timeout command. \"\n        \"Usage: timeout <seconds> exec <command>\");. Put spaces around operators. This looks weird in my terminal, can you align with spaces instead. If the user doesn't configure anything you should probably warn them with some logging. This should be documented as executed with a shell (and if it's not executed with a shell, it should be).. Can you split this onto several lines with \\ and comment it out by default?. Let's not try to maintain two examples, just stick with the one in the default config. Hmm.\nLet's get away from this being a flag and get rid of references to the lockscreen. Let's make it behave like timeout/resume:\nswayidle before-sleep exec 'swaylock...'. Can put another newline for resume. This could be better at describing each command line \"subcommand\". I can take a crack at rewriting it if you like\n. dfs is more expensive, do you actually need it?. Whoops, nevermind, bfs is the expensive one. It looks like i3 has added some new messages.\nhttps://github.com/i3/i3/blob/next/include/i3/ipc.h\nWhy don't we bump our extensions up to 100+.. I tried my best :'). No <> around the link here. This should be in a literal block, use ``` (see man scdoc). No + here. No :: here. Space after #. Remove the asciidoc file too. Style - move the * next to the parameter name. derp. This will break if the server advertises wl_outputs before advertising xdg_output_manager, or if the server doesn't support xdg_output at all. You should poll xdg_outputs after the registry roundtrip.. How about just using wordexp here. Don't align with spaces, just the two tabs is fine. This comment can probably go away. style issue, put a space between if and (, same for while. We should probably do both. I don't understand how that's supposed to work.. I see. I think we should be prepared for clients who set their xdg shell version to the latest but who don't bother implementing tiled to be pretty common.. Aight.. You should just inline this. +1 to early returns. 80 column limit, but this comment is hardly necessary anyway.. Maybe this should be an enum.. style: enum gaps_operation and make the members things like GAPS_OP_SET. Clarification: the correct style is static struct cmd_results *cmd_bindsym.... Clarification: the correct style is const char *bindtype.... Side note, you can also get this from argv[-1]. Style: only indent this two tabs and wrap parameters after 80 columns. 80 col limit. These parens aren't necessary, || has a higher precedence than &&. nah. lol I'm dumb. It's not just to break out of the loop. If we don't find a pid_workspace at the end of wl_list_for_each, pw will still be set to the last one in the list.. I can still simplify this nonetheless. New patch coming up momentarily.. I don't think we should log this. My fear is that this'll be used in something frequent like testing which view is under a pointer or something, then get logged every frame as you drag the pointer around the screen.. Aye. Removed the workspace switch, @martinetd is right that we don't ever need it.. Derp. Considered it, but this is probably the only place we're going to use it. Not worth the overhead.. Does it need to be? The pid namespace is inherently global on Linux, so it's not like we're gaining some feel-good ability to have two sway_roots or anything. I'd rather isolate it to the code that uses it.. What's this line for. oh duh here it is. This seems like an odd way to go about it. What if there are multiple inhibitors?. Wow I'm dumb. What if it's not an image, but a solid color?. This is still relevant. Why not just something like\nc\n        \" --inside-clear-color <color>   \"\n            \"Sets the color of the inside of the indicator when cleared.\\n\"\n. Hmm... is this really valid C99?. gross. Use strtol and detect errors. :hankey: . I don't care. It's a pointer to argv, which isn't freed until you exit (and leave user code that could keep accessing it)\nThis is debug code, it's not supposed to be pretty.. Cause it's outdated, I totally fixed that. oh derp I thought this comment had been referring to two lines up where I forgot to check the return value of strcmp for txn-debug. style: put this brace on the previous line. Let's set this to 32 or something, let's not be shy here. style nit, empty line after this. This line can probably be removed from both.. The bool argument doesn't need to be const here. I thought this too, but it looks like the function returns false for invalid values and if that matches i3's behavior we should keep it.. Can we say this for certain by checking errno?. You need to include errno.h in both files. Do what you think is best so long as the language matches the Wayland protocol. Add an empty line after headings. We need to match the i3 dudes where they line up and we need to put our extensions far away from them so i3 has room to grow.. can you remove the extra whitespace before the = here. We should keep IPC_EVENT_INPUT around. Does anyone know what IPC_EVENT_MODIFIER is used for? Also, let's assign these to '31' and '30', no need to be shy.. Looks like this snuck in. Does this have any undesirable side-effects if there are multiple pointers on the seat?. Let's drop IPC_EVENT_MODIFIER.. Actually, no, I was confusing it with IPC_GET_INPUTS which we should keep. We can drop IPC_EVENT_INPUT too.. What's this change all about?. Why does this exist when memcpy exists. I think this should just be a static function in that one file.. The preferred format is without the symbol. It seems the symbol is used in the default config, so I guess we'll just go with that.. Can we not use workspace 10? 11? etc?. Oh, duh. Can you use isdigit from ctype.h instead?. -1. Less code isn't always desirable. I think your suggestion is more complex.. Can you add a comment here clarifying what kind of outputs are included here? Then you don't need to change the variable name at all.. I'd rather replace these with _POSIX_C_SOURCE as appropriate. Can you name this i3bar_block_unref?. style nit: align case with switch. We've looked into clang-format before, unfortunately there are a few issues with our style that it doesn't support.. shadow.h is actually part of the open source extension so here it makes sense. Perhaps with a comment explaining what this esoteric-looking command does?. # When the status_command prints a new line to stdout, swaybar updates. The default just shows the current date & time. weird space here. Also, align with tabs. Don't align args like this, just indent it once.. bump\nalso, please squash your commits. Prefer static const over macros\nAlso, let's go with a bigger maximum, how about 16K. lowercase. Sorry to pick nits here, but can you make the size of the buffer max_chars, then strcpy the overflow text to the end? Something like this:\nc\nchar buf[max_chars];\n// ...\nstrcpy(&buf[sizeof(buf) - sizeof(overflow)], overflow);\nUse sizeof(buf) as well for vsnprintf.. nah. #!/usr/bin/env python3. \"Unable to drop root - we shouldn't be able to restore it after setuid - refusing to start\". +1, suggest using it in both places. I think you botched a merge/rebase/something. How about wl_list instead?. Yeah, I should have caught this in the other patches. We should be moving away from list_t.. Need to handle malloc failure. Here as well. This is wrong - wlr_log_init takes WLR_ arguments. You can also probably move this into sway_log_init and make the wlr log level implied by the sway log level (you'll need a mapping of sway loglevels to wlr loglevels). Good point. Skip it, then.. doop. Many doops throughout this commit. These () are also not necessary. Yes. 1.8.1 rather. Why do we care if they want to run it with some shell which isn't in /etc/shells?. I don't particularly care either way, just seems unnecessary. I'm not -1 or +1 on this. This is true each time your finger slides past a threshold of 10% of the width of the screen.. Actually this is pretty weird, not sure what I was thinking here. Will revisit this. I think so, yep. Actually, not sure it would. That would be checking that you are moving fast enough, not far* enough.. No, after further testing and reasoning I believe the original conditional is correct.. \nProgress is a value from [0..100) which represents how far your finger has travelled from its starting point to the starting point plus the width of the screen. We subdivide the bar into 10 segments, and passing from one segment to the next causes the workspace to change. We offset these by your starting position, so if you touch, then travel 10% of the screen, you go to workspace +1, then 10% more and workspace +2, and so on.\nprogress will be < prev_progress when you cross one of these thresholds - the previous value will be near the end of the last segment, so a higher number (in this example 9), and the new value will be near the start of the next segment, so a lower number (in this example 2).. Actually, reworked this a bit to make it behave a bit more intuitively. Does the new approach make more sense?. I would rather not document the name of the socket in case we want to change it later (and I might want to). Let's just say it'll be in the SWAYSOCK variable (and I3SOCK).. Indent error. Indent error. ",
    "Swoorup": "Nice, I have been looking at i3way but there's no single line of code after so many years. \nI want to propose a feature request though, which i3 developers ignored: A tiling mode for binary space layout representing windows as the leaves of a full binary tree, very similar to default window tiling mode that comes with bspwm. It could be very handy letting the software manage my windows(specially terminals) instead of managing the arrangement in a single desktop. I don't want to break any compatibility though so I am hoping it does not. \nAlso an option to set the gap between windows would be nice. This was done in i3 but by a third party git fork. I don't know why it was deemed not a necessity by i3 developers.\nBTW This project should also get its own website. \n. Nice, I have been looking at i3way but there's no single line of code after so many years. \nI want to propose a feature request though, which i3 developers ignored: A tiling mode for binary space layout representing windows as the leaves of a full binary tree, very similar to default window tiling mode that comes with bspwm. It could be very handy letting the software manage my windows(specially terminals) instead of managing the arrangement in a single desktop. I don't want to break any compatibility though so I am hoping it does not. \nAlso an option to set the gap between windows would be nice. This was done in i3 but by a third party git fork. I don't know why it was deemed not a necessity by i3 developers.\nBTW This project should also get its own website. \n. ",
    "Half-Shot": "\nAlso an option to set the gap between windows would be nice. This was done in i3 but by a third >party git fork. I don't know why it was deemed not a necessity by i3 developers.\n\nDue to it not fitting the i3 way, which means using all the screen space. I can understand why, but that doesn't mean this project has to enforce the same rules.\n. Will have a go at the move command. Should have some results tonight.\n. Would it be sensible to have our own wallpaper management, or somehow hook into a process like feh?\n(and as on a sidenote, how would I hint to sway/wlc that a surface should be drawn behind everything?)\n. I used to use bindcode in i3 for unknown symbols. I'm guessing another wlc feature.\nOn 12 Sep 2015 11:54, tiregram notifications@github.com wrote:Sorry , but the other keyboard are not supported on my pc (fr).\nI know i just need to export XKB_DEFAULT_LAYOUT=fr\nBut i can't use number to switch to other worspace, because on fr keyboard the \"1\" is \"&\" and & was forbiden. \nMessage log:\nBindsym - unknow key &.\nCan you help me ?\n\u2014Reply to this email directly or view it on GitHub.\n. Yep, I will be looking into that asap. I just finished this off a bit quicker because I use move quite a bit and wanted something basic to work with.\n. Not going to be at my desktop til Saturday, so feel free to hack at it first.\n. Sorry if it was a little wierd, but my logic was basically it's just shuffling a list round rather than moving a window. Could get a bit wierder when you have a mix of vertical and horizontal windows but we will see then.\nEDIT: With regards to how it compares, exactly the same as i3 for me :) \n. ",
    "robinmoussu": "Hi. I want to propose a feature request: vertical bar. I think the easiest way is to only do a 90\u00b0 rotation. The text orientation should be configurable: bottom to top, or top to bottom.\n. ",
    "ghost": "Sway looks like a really great project. I love i3, and the lack of something similar is the only thing that has been stopping me from giving Wayland a try. Great work so far!\nHowever, looking at the list above, I see that sway is still missing tabbed layout, which is essential for my workflow; I use it heavily in i3. This is the main thing stopping me from trying out sway at this point. I could live without the other missing features.\nOnce tabbed layout is done, I will try playing around with sway. I am really looking forward to it. Hope to catch/report some bugs and maybe contribute some patches.\nI honestly think this project has the potential to eventually become even better than i3.\n. Sway looks like a really great project. I love i3, and the lack of something similar is the only thing that has been stopping me from giving Wayland a try. Great work so far!\nHowever, looking at the list above, I see that sway is still missing tabbed layout, which is essential for my workflow; I use it heavily in i3. This is the main thing stopping me from trying out sway at this point. I could live without the other missing features.\nOnce tabbed layout is done, I will try playing around with sway. I am really looking forward to it. Hope to catch/report some bugs and maybe contribute some patches.\nI honestly think this project has the potential to eventually become even better than i3.\n. ~/.sway/config, line 16\nfont pango:DejaVu Sans Mono 9\n$ sway\nError on line 16 'font pango:DejaVu Sans Mono 9': Unknown/invalid command\n~/.sway/config, line 16\nfont DejaVu Sans Mono 9\n$ sway\nError on line 16 'font DejaVu Sans Mono 9': Unknown/invalid command\n~/.sway/config, line 16\nfont \"DejaVu Sans Mono 9\"\n$ sway\nError on line 16 'font \"DejaVu Sans Mono 9\"': Unknown/invalid command\n(\u0ca0_\u0ca0)\n. ~/.sway/config, line 16\nfont pango:DejaVu Sans Mono 9\n$ sway\nError on line 16 'font pango:DejaVu Sans Mono 9': Unknown/invalid command\n~/.sway/config, line 16\nfont DejaVu Sans Mono 9\n$ sway\nError on line 16 'font DejaVu Sans Mono 9': Unknown/invalid command\n~/.sway/config, line 16\nfont \"DejaVu Sans Mono 9\"\n$ sway\nError on line 16 'font \"DejaVu Sans Mono 9\"': Unknown/invalid command\n(\u0ca0_\u0ca0)\n. @tevaughan \nYes, sway is good enough for everyday use. Lots of people have been using it exclusively for quite a while now.\nThat said, there are some bugs and issues that still need to be sorted out, so do not expect to have a flawless experience. The most annoying one IMO is that dropdown menus and similar UI components in X11 apps (in XWayland) don't render correctly in the latest sway. Most of the other issues are fairly small and bearable.\nSome features such as changing the video mode (monitor resolution / refresh rate), dynamic hot-plugging / detection of monitors, and monitor power saving (DPMS, turning off the monitor) are not supported yet, so if you need those features, sway might not be suitable for you just yet.\nOverall, if you want to have a very good, flawless, feature-complete experience, you should probably wait a little more for sway to mature as a project, but if you don't mind the occasional small issues, and don't require the missing features, you can switch to Wayland+sway now, and help report bugs.\n. @tevaughan \nYes, sway is good enough for everyday use. Lots of people have been using it exclusively for quite a while now.\nThat said, there are some bugs and issues that still need to be sorted out, so do not expect to have a flawless experience. The most annoying one IMO is that dropdown menus and similar UI components in X11 apps (in XWayland) don't render correctly in the latest sway. Most of the other issues are fairly small and bearable.\nSome features such as changing the video mode (monitor resolution / refresh rate), dynamic hot-plugging / detection of monitors, and monitor power saving (DPMS, turning off the monitor) are not supported yet, so if you need those features, sway might not be suitable for you just yet.\nOverall, if you want to have a very good, flawless, feature-complete experience, you should probably wait a little more for sway to mature as a project, but if you don't mind the occasional small issues, and don't require the missing features, you can switch to Wayland+sway now, and help report bugs.\n. I can help with this, if we get some more voices into what flags and arguments there should be.\n. I can help with this, if we get some more voices into what flags and arguments there should be.\n. Gitlab sounds great, but I'm a little confused; is Gitlab self hosted or only on the web?\n. Gitlab sounds great, but I'm a little confused; is Gitlab self hosted or only on the web?\n. I'd say go for it :+1: \n. I'd say go for it :+1: \n. Because its an alternative to Github, I guess they've added migration options.\n. Because its an alternative to Github, I guess they've added migration options.\n. @RyanDwyer Maybe the Gnome Gitlab instance could be considered? I know, they're not the best guys with constantly removing features... but still they produce a large amount open-source software.. @RyanDwyer Maybe the Gnome Gitlab instance could be considered? I know, they're not the best guys with constantly removing features... but still they produce a large amount open-source software.. >Since moving projects leaves dangling pointers (i.e. old hpyerlinks) and is generally an annoying effort (migrating accounts, issues) I don't think it's a good idea to move now and then again later without a pressing need.\nThere's an Gitlab import tool, which simplifies the process, it should be able to import issues, PRs and everything else automatically. There's a video which demonstrates it: https://www.youtube.com/watch?v=VYOXuOg9tQI. >Since moving projects leaves dangling pointers (i.e. old hpyerlinks) and is generally an annoying effort (migrating accounts, issues) I don't think it's a good idea to move now and then again later without a pressing need.\nThere's an Gitlab import tool, which simplifies the process, it should be able to import issues, PRs and everything else automatically. There's a video which demonstrates it: https://www.youtube.com/watch?v=VYOXuOg9tQI. Could someone tell me why my comments get marked as spam? I agree that my first comment wasn't perfect and I've edited it.. Could someone tell me why my comments get marked as spam? I agree that my first comment wasn't perfect and I've edited it.. Never used that feature. Instead, I do use assignments to automatically place windows to specific workspaces, but there's almost never more than one window per workspace. So, IMHO, to implement assign keyword support is far more important.\nThanks you for sway! As soon as swaybar and assign feature are implemented I'm going to completely leave i3 for this awesome piece of software.\n. Never used that feature. Instead, I do use assignments to automatically place windows to specific workspaces, but there's almost never more than one window per workspace. So, IMHO, to implement assign keyword support is far more important.\nThanks you for sway! As soon as swaybar and assign feature are implemented I'm going to completely leave i3 for this awesome piece of software.\n. I'll make one, but I'll need a couple of days. Just discovered this thread. Not an artist, but I love making minimalistic backgrounds.\n. Seems like something has been broken in recent commits. I was able to use rofi in sway without any problem just a day before yesterday.\n. Yes, confirm that. Just didn't pay attention to this before.\n. I have the same.\n. I also have the Arch Linux xorg-server-xwayland 1.18.0-3 package installed.\n. It also works well with lxterminal running.\n. It also works well with lxterminal running.\n. @mikkeloscar I have the same focus issue using your rofi parameters. It does work given a click before any keypress, though!\n. @mikkeloscar I have the same focus issue using your rofi parameters. It does work given a click before any keypress, though!\n. @mikkeloscar I run rofi using the sway config's exec command.\n. @mikkeloscar I run rofi using the sway config's exec command.\n. @DaanDeMeyer I join. I use Gnome Shell on Wayland, instead urxvt - conky with own_window_type = \ndesktop. Also keyboard input prevent running Gtk3-applications.\n. @DaanDeMeyer I join. I use Gnome Shell on Wayland, instead urxvt - conky with own_window_type = \ndesktop. Also keyboard input prevent running Gtk3-applications.\n. Fixed the config issue. Didn't realize I had to copy from /etc/sway/config. Removed that part of the error message from the original post as that's no longer relevant. The modprobe problem still persists though.\n. Fixed the config issue. Didn't realize I had to copy from /etc/sway/config. Removed that part of the error message from the original post as that's no longer relevant. The modprobe problem still persists though.\n. After removing the nvidia package, I no longer get error messages about modprobe, but instead I get this (using sway --verbose from within X):\n[wlc] EGL is not or could not be initialized\n[wlc] Could not initialize any context\n. After removing the nvidia package, I no longer get error messages about modprobe, but instead I get this (using sway --verbose from within X):\n[wlc] EGL is not or could not be initialized\n[wlc] Could not initialize any context\n. Fixed by installing mesa-libgl and lib32-mesa-libgl.\n. Fixed by installing mesa-libgl and lib32-mesa-libgl.\n. Glad to see this, I couldn\u2019t use sway because default mouse acceleration is too fast\n. Glad to see this, I couldn\u2019t use sway because default mouse acceleration is too fast\n. About pointer acceleration: on xorg the option is 'Accel Speed' and the value is an integer in range -1 (slowest) and 1 (fastest); on laptops the device is called (on my system, I don\u2019t know if it\u2019s the same everywhere) 'SynPS/2 Synaptics TouchPad'\n. About pointer acceleration: on xorg the option is 'Accel Speed' and the value is an integer in range -1 (slowest) and 1 (fastest); on laptops the device is called (on my system, I don\u2019t know if it\u2019s the same everywhere) 'SynPS/2 Synaptics TouchPad'\n. @podhorsky-ksj:\nIf you want to compile with the AUR PKGFILE, try adding options=('debug', '!strip') near the top, and in build(), change cmake -DCMAKE_BUILD_TYPE=Release to cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo.\nYou can also just clone the repo and build as a debug build (though if you run make install after this, you have to manually uninstall):\nbash\ngit clone https://github.com/SirCmpwn/sway.git\ncd sway\nmkdir build\ncd build\ncmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo\nmake\n. @podhorsky-ksj:\nIf you want to compile with the AUR PKGFILE, try adding options=('debug', '!strip') near the top, and in build(), change cmake -DCMAKE_BUILD_TYPE=Release to cmake -DCMAKE_BUILD_TYPE=RelWithDebInfo.\nYou can also just clone the repo and build as a debug build (though if you run make install after this, you have to manually uninstall):\nbash\ngit clone https://github.com/SirCmpwn/sway.git\ncd sway\nmkdir build\ncd build\ncmake .. -DCMAKE_BUILD_TYPE=RelWithDebInfo\nmake\n. Just swaylock, no, and no.\n. Just swaylock, no, and no.\n. Here you go (pssway is cpu usage, logged once per second).\nAlso, github doesn't allow .log files. Huh.\nsway.txt\npssway.txt\n. Here you go (pssway is cpu usage, logged once per second).\nAlso, github doesn't allow .log files. Huh.\nsway.txt\npssway.txt\n. No, not nearly as much CPU increase with two fullscreen windows on both monitors.\nCould it be that the monitors are different sizes?\nI know that j4-dmenu-desktop is the width of my bigger screen, even on the smaller one.\n. No, not nearly as much CPU increase with two fullscreen windows on both monitors.\nCould it be that the monitors are different sizes?\nI know that j4-dmenu-desktop is the width of my bigger screen, even on the smaller one.\n. With one of todays commits (perhaps 89bb6a4 ?), I'm no longer experiencing this issue.\n. With one of todays commits (perhaps 89bb6a4 ?), I'm no longer experiencing this issue.\n. The output(s) omitted are drawn completely transparent, unless --color is specified.\n. huh... apparently '' is a comment in a git commit.\n. Commenting line 508 in wlc'ssrc/compositor/view.c` makes the menus work for me. Both sway and wlc are from the current master. \nI don't have programming experience with Wayland/Sway/X at all, so please double check.\n```\ndiff --git a/src/compositor/view.c b/src/compositor/view.c\nindex 77277bf..95dde59 100644\n--- a/src/compositor/view.c\n+++ b/src/compositor/view.c\n@@ -505,7 +505,7 @@ void\n wlc_view_focus_ptr(struct wlc_view *view)\n {\n    if (view && (view->type & WLC_BIT_UNMANAGED))\n-      return;\n+      //return;\nif (view)\n   wlc_x11_window_set_active(&view->x11, true);\n\n```\n. @robotanarchy yes, you are right, that was not intended. I tested and noticed that the menues work out of the box using the current master as @m1cr0man mentions. Probably I didn't check with the current wlc-master before doing the change... my apologies for the confusion.\n. I forked sway to work on this. Will update with progress.\n. Done. Tested it on my system; seems to work. Enjoy.\n. I wasn't able to focus on the new sway context, but i was hoping some clues in the log.\nBut you're rigth i can switch...\nSo i don't know why it's not working with bindsym (it's not working with the mouse too, but i don't think it's something supported yet)\n. I use the default config for now with just 2/3 line in more, (but i tried to switch with other bindsym like $mod+a)\nconfig.txt\nand i launch sway with this :\n```\n!/bin/zsh\nXKB_DEFAULT_LAYOUT=fr XKB_DEFAULT_MODEL=pc104 sway\n```\n. When i press the same touch as i3 : \n```\nKeyPress event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5601835, (-22,460), root:(635,508),\n    state 0x10, keycode 10 (keysym 0x26, ampersand), same_screen YES,\n    XLookupString gives 1 bytes: (26) \"&\"\n    XmbLookupString gives 1 bytes: (26) \"&\"\n    XFilterEvent returns: False\nKeyRelease event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5601930, (-22,460), root:(635,508),\n    state 0x10, keycode 10 (keysym 0x26, ampersand), same_screen YES,\n    XLookupString gives 1 bytes: (26) \"&\"\n    XFilterEvent returns: False\n```\nWith the numeric pad:\n```\nKeyPress event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5660720, (-22,729), root:(635,777),\n    state 0x10, keycode 87 (keysym 0xffb1, KP_1), same_screen YES,\n    XLookupString gives 1 bytes: (31) \"1\"\n    XmbLookupString gives 1 bytes: (31) \"1\"\n    XFilterEvent returns: False\nKeyRelease event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5660787, (-22,729), root:(635,777),\n    state 0x10, keycode 87 (keysym 0xffb1, KP_1), same_screen YES,\n    XLookupString gives 1 bytes: (31) \"1\"\n    XFilterEvent returns: False\n```\nAnd the official '1'\n```\nKeyPress event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5848350, (0,762), root:(657,810),\n    state 0x10, keycode 50 (keysym 0xffe1, Shift_L), same_screen YES,\n    XLookupString gives 0 bytes: \n    XmbLookupString gives 0 bytes: \n    XFilterEvent returns: False\nKeyPress event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5848643, (0,762), root:(657,810),\n    state 0x11, keycode 10 (keysym 0x31, 1), same_screen YES,\n    XLookupString gives 1 bytes: (31) \"1\"\n    XmbLookupString gives 1 bytes: (31) \"1\"\n    XFilterEvent returns: False\nKeyRelease event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5848782, (0,762), root:(657,810),\n    state 0x11, keycode 10 (keysym 0x31, 1), same_screen YES,\n    XLookupString gives 1 bytes: (31) \"1\"\n    XFilterEvent returns: False\nKeyRelease event, serial 32, synthetic NO, window 0x1000001,\n    root 0x260, subw 0x0, time 5848827, (0,762), root:(657,810),\n    state 0x11, keycode 50 (keysym 0xffe1, Shift_L), same_screen YES,\n    XLookupString gives 0 bytes: \n    XFilterEvent returns: False\n```\n. Sorry, i just realized that all other bindsym i have tried was already use...\nAnd yes ampersand is working :)\nI think i have just wast your time...\nI'll work on sway this summer as excuses ^^\n. I can reproduce the first issue, but not the second.\nDen 26. apr. 2016 19.46 skrev \"Ian D. Scott\" notifications@github.com:\n\nI have two monitors connected to my computer, and have noticed two issues\nwith swaylock:\n- If I start swaylock while the first monitor is focused, swaylock\n  displays only on that monitor and not on the second one.\n- If I start swaylock on the second monitor, it displays on both, but\n  upon entering an incorrect password, \"wrong\" is displayed only on the first\n  monitor.\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/605\n. I just assumed that if the path is inside quotes, spaces do not need to be escaped.\n\nI guess quotes have no effect in the sway config, then.\n. IMHO if border is set to none the window should be enlarged to fill the screen; I don\u2019t like i3 behaviour here.\n. @andya9 \nThat is another way to handle the situation, yes. I actually agree with you that it might be a better way to do it. However, sway aims to be an exact i3 replacement, intending to behave exactly like i3, so it should probably be done the same way as i3 does it.\nEither way, currently, the situation is not handled properly, as neither of the two is being done, and there is just an empty space. Screen space wasted (unlike your proposal), and tabs not drawn (unlike i3 behaviour).\n. I have mouse cursor scale issues without any scaling specified in my config. Above Qt clients (qutebrowser, qtcreator) it appears double the expected size, anything not-Qt is ok (xterm, wlterm, chromium, firefox).. I found that whole 1px area on the bottom and right edge of the screen is dead zone even in fullscreen in any application.\nTested with Chromium (try scrollbars or fullscreen video) and urxvt (try selecting text with mouse, selection cancels at mentioned edges).\n. If you are on a laptop, can you try to see if you notice the same problem on gnome-wayland? I found that in my case the issue is libinput (used by wayland instead of synaptics driver).. I can also reproduce it. When no applications are opened, the mouse feels quite smooth, but once I open Amy applications such as URxvt (terminal) or Chromium (browser) the mouse starts lagging/stuttering.. IMO just adding alias sway=\"sway > /var/log/sway.log 2>&1\" to your .bashrc is better than adding a feature to sway.\n. I found #43. The file could be set on compile time.. I'd be happy to be assigned this issue. . @SirCmpwn another error:\nc\n[ 83%] Building C object sway/CMakeFiles/sway.dir/handlers.c.o\n/home/user/sway/sway/handlers.c: In function \u2018handle_key\u2019:\n/home/user/sway/sway/handlers.c:705:8: error: this statement may fall through [-Werror=implicit-fallthrough=]\n     if (!binding->release && valid_bindsym(binding)) {\n        ^\n/home/user/sway/sway/handlers.c:709:4: note: here\n    case WLC_KEY_STATE_RELEASED:\n    ^~~~\n/home/user/sway/sway/handlers.c: In function \u2018handle_view_created\u2019:\n/home/user/sway/sway/handlers.c:373:11: error: this statement may fall through [-Werror=implicit-fallthrough=]\n   newview = new_floating_view(handle);\n   ~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/home/user/sway/sway/handlers.c:374:2: note: here\n  case WLC_BIT_POPUP:\n  ^~~~\ncc1: all warnings being treated as errors\nsway/CMakeFiles/sway.dir/build.make:2126: recipe for target 'sway/CMakeFiles/sway.dir/handlers.c.o' failed\nmake[2]: *** [sway/CMakeFiles/sway.dir/handlers.c.o] Error 1\nCMakeFiles/Makefile2:343: recipe for target 'sway/CMakeFiles/sway.dir/all' failed\nmake[1]: *** [sway/CMakeFiles/sway.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2. Further information from Enlightenment's implementation (as well as a little theory):\nhttps://blogs.s-osg.org/introduction-relative-constrained-pointers-enlightenment/. @wdbw Interesting workaround, but I fear it conflicts with other functionality. For example the statusbar (which can be fixed by declaring a font for it under bar {}, though). Please clear one of them (either the suid bit, or the file caps)\nif i clear the suid i've this error\n[main.c:48] [wlc] Could not open /dev/tty0 to find free vt\ni've no idea how to clean the file caps. I'll take the brazilian portuguese translation.\n\n[ ] pt_BR: @nuskorpios\n[x] README (#1340)\n[ ] Man pages\n[ ] sway(1)\n[ ] sway(5)\n[ ] sway-bar\n[ ] sway-input\n[ ] swaymsg\n[ ] swaygrab\n[ ] swaylock\n[ ] sway-security\n[ ] FAQ. There are small differences in the way some words are written (e.g., in some words, pt_PT exchanges the circumflex accent in favor of the acute accent), but the great difference resides in the slang. So I'll try my best to keep the translation neutral.. > I can take place, from the pt_BR, since the last user has been deleted :)\n\n\n\nNope, I'm right here, under a different username. This week, I was updating the README to the lastest version, and I'm waiting for the man pages to settle in order to translate them too.\nEdit: fix grammar, add context.. > We both can do it :)\nSure :)). Sorry for the late response.\n\n[...] Can you also add a link to the main readme?\n\nSure! The last commit should address that.. They don't work on every window, switching don't help. Also, I think I should attach my environmental variables\nexport XKB_DEFAULT_LAYOUT=us,ru\nexport XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle,sway\n. UPD: I'm dumb, numpad is working now but I still don't know how to make caps lock works as in other systems like windows. i could get polybar work with this workaround [though not sure if its the right way]\nsway config [bar portion]\n\nSetting up polybar(s)\n\nbar {\n    position top\ni3bar_command i3bar -t\n    colors {\n        statusline #ffffff00\n        background #2c2b2a00\n        focused_workspace  #b6a8a800 #3c3b3700 #b6a8a800\n                active_workspace   #3c3b379900 #b6a8a800 #3c3b3700\n                inactive_workspace #3c3b3700 #99999900 #3c3b3700\n                urgent_workspace   #90000000 #3c3b3700 #ffffff00\n    }\n}\nbar {\n    position bottom\ni3bar_command i3bar -t\n    colors {\n        statusline #ffffff00\n        background #2c2b2a00\n        focused_workspace  #b6a8a800 #3c3b3700 #b6a8a800\n                active_workspace   #3c3b379900 #b6a8a800 #3c3b3700\n                inactive_workspace #3c3b3700 #99999900 #3c3b3700\n                urgent_workspace   #90000000 #3c3b3700 #ffffff00\n  }\n}\nthen in autostart programs i defined two bars [top and bottom]\nnow the issue is bar does not display workspaces, xbacklight and window title... ! any help ?\n  . @codethief , you are correct. @rvc-2011 , I'm talking about https://github.com/jaagr/polybar.. @AravK , @codethief \nperhaps this L I N K and this => S H O T\nwill show what you meant ? it is polybar(s) with workspaces displayed.. @rvc-2011 AFAIK Polybar can't split into pieces like in your link. Please don't tell me what I'm saying. Polybar is an application. The configuration in sway.conf is for swaybar, but that's not the same as polybar. What you're talking about is something different. Please show me some configuration for your \"polybar\" so I can tell you what I'm talking about.. I have double pointer on assault cube and when i move system pointer, game pointer follow slower than system pointer. I use sway 0.15.0. I experienced this as well, exactly as described by @nickbatsaras.\nRunning Fedora 27 with Sway 0.15.1 x86_64. Sure, no problem! Thank'you for your interest.. Bump! Please integrate this, as till then rock-solid tab splitting functionality is not quite rock-solid.\nTab splitting is awesome but without this patch we cannot really do too many kind-of-large things at a time.\n  . My original Firefox issue isn't occuring any more, so yay! Nothing's broken, as far as I can tell.\nKeeping multiple splits of terminals open behind a Firefox session and clicking on Firefox tabs in front of invisible terminal title bars isn't clicking through. This patch works!\n  . NOTE: Solved by patch #1516 . Is this being worked on?\nI have a (not na\u00efve, I hope) question: is it really necessary to\nimplement tray support using sd-bus API?  AFAIK, it is not present in\nnon-SystemD distros and could be a problem for those who want this\nfeature.\nThere is some project similar to eudev or elogind, but for sd-bus, that\nI am not aware of?\n. sway not work without xwayland?\ni see xwayland need for depends.\nsry my second question in closed thread but this principial quest for me, i not use xwayand and no have this in system.. well, in any case, thanks, I realized what sway is at this stage of development. success to you with this project.\nI hope soon it will be available in Debian and ubuntu and remove the dependence as a mandatory xwayland.\nat the moment I will continue to use weston.\nclosed.. The same occurs when reloading configuration file ($mod+shift+c). Seem pertinent too. I'll go for two.. Yes, of course. The segfault was caused by the call to config_subcommand in commands/input.c:45,\nbecause the call was equivalent to config_subcommand((char **){(char *)NULL}, 0, input_handlers, sizeof(input_handlers)), which is not handled by config_subcommand.. Thanks, here it is:\nsway version 1.0-alpha.4-43-g27f65b94 (Jul 21 2018, branch 'master')\nLinux computer 4.17.8-1-ARCH #1 SMP PREEMPT Wed Jul 18 09:56:24 UTC 2018 x86_64 GNU/Linux\nStarted sway, super+enter (twice) to get 2 termite terminals up and running, turned off monitor, turned on, exited sway. My config just changes urxvt to termite.\nhttps://gist.github.com/seropp/a3e5cfadb43dee609be0362878e3e121. It seems very strange to me that issues are not accepted for alpha, especially since I provided a clear description and it's 100% reproducible on my end, but I actually thought I was helping.. > This didn't have any effect though.\nMaybe your user doesn't have the permission to do so.. You can see what's wrong with exec systemctl suspend by seeing the log generated by Sway.\nI stand with @SirCmpwn here though: you're better off editing /etc/systemd/logind.conf (/etc/elogind/logind.conf for those using elogind).. Everything works fine until I change keyboard keymap as you can see in my config file.. > calloc can't initialize struct fields correctly. For example, there was some pointer which was set to zero, whilst in properly configured keyboard it should've pointed to something\nSeems like you're using overloaded terminology here. An uninitialized struct will have fields of indeterminate value. calloc does initialize the struct with all zeroes, so the struct is already initialized. However, it sounds like your problem is you tried to dereference a pointer before it pointed to anything. What were you trying to dereference between calls of sway_keyboard_create and sway_keyboard_configure?. Is there any reason you can't move that code after wlr_keyboard_set_keymap? Adding more calls to sway_keyboard_configure may or may not have additional side effects.. ",
    "Airblader": "@Swoorup This is off-topic, but\n\nThis was done in i3 but by a third party git fork. I don't know why it was deemed not a necessity by i3 developers.\n\nWe don't want this in i3 for many reasons. For one, the i3-gaps patch (of which I am the maintainer) is really more of a hack (for example, window decorations don't work with it). But that could be solved. However, gaps violate the i3 tiling philosophy and that is why they will never be found in i3 itself.\nBeing a collaborator of i3 I understand this reasoning, being the maintainer of i3-gaps I obviously personally prefer gaps, though. ;)\n. @Swoorup This is off-topic, but\n\nThis was done in i3 but by a third party git fork. I don't know why it was deemed not a necessity by i3 developers.\n\nWe don't want this in i3 for many reasons. For one, the i3-gaps patch (of which I am the maintainer) is really more of a hack (for example, window decorations don't work with it). But that could be solved. However, gaps violate the i3 tiling philosophy and that is why they will never be found in i3 itself.\nBeing a collaborator of i3 I understand this reasoning, being the maintainer of i3-gaps I obviously personally prefer gaps, though. ;)\n. That's pretty cool! You guys move fast. Out of curiosity, do you have a screenshot? \n. That's pretty cool! You guys move fast. Out of curiosity, do you have a screenshot? \n. Cool, thanks. Great work, guys! \n. Cool, thanks. Great work, guys! \n. As a heads up, we have resource <\u2026> $<name> <fallback> coming in i3. Since X resources don't exist in Wayland, sway should probably just translate this to set $<name> <fallback>.\nThis isn't merged yet, though, so it's really just an early hint.\n. As a heads up, we have resource <\u2026> $<name> <fallback> coming in i3. Since X resources don't exist in Wayland, sway should probably just translate this to set $<name> <fallback>.\nThis isn't merged yet, though, so it's really just an early hint.\n. It let's you set variables based on X resources. So instead of having to define the color in the i3 config you can do\nresource i3wm.color0 $black #000000\nThis looks up the resource i3wm.color0 in the X resource database and assigns it to $black. For example, people typically have something like this in their X resources:\n*color0: #121212\nThe last part of the directive is just a fallback in case the resource can't be found (e.g., no match found or if the config validation is called which doesn't have a connection). This is needed to avoid config errors in these cases.\nHowever, the (or a similar) concept of X resources doesn't exist in Wayland, so sway can't do anything useful with this directive. Having the default at least allows sway to fail gracefully, just like in the X case of the resource not being found, by translating this into\nset $black #000000\n. It let's you set variables based on X resources. So instead of having to define the color in the i3 config you can do\nresource i3wm.color0 $black #000000\nThis looks up the resource i3wm.color0 in the X resource database and assigns it to $black. For example, people typically have something like this in their X resources:\n*color0: #121212\nThe last part of the directive is just a fallback in case the resource can't be found (e.g., no match found or if the config validation is called which doesn't have a connection). This is needed to avoid config errors in these cases.\nHowever, the (or a similar) concept of X resources doesn't exist in Wayland, so sway can't do anything useful with this directive. Having the default at least allows sway to fail gracefully, just like in the X case of the resource not being found, by translating this into\nset $black #000000\n. Missing:\n- [ ] move workspace to output current\n- [ ] move window|container to output current\n- [ ] command criteria tiling / floating\nAnd hopefully soon also swap which sway likely wants to have independently of whether i3 will merge it. Unless you already have it, I don't follow sway development.\n. Missing:\n- [ ] move workspace to output current\n- [ ] move window|container to output current\n- [ ] command criteria tiling / floating\nAnd hopefully soon also swap which sway likely wants to have independently of whether i3 will merge it. Unless you already have it, I don't follow sway development.\n. In your swaybar screenshot from today it seems to me that the gaps are actually implemented incorrectly. The spacing between two windows is double the spacing on the screen edges. This was a bug in the old original gaps patch which I've fixed quite a while ago. \n. In your swaybar screenshot from today it seems to me that the gaps are actually implemented incorrectly. The spacing between two windows is double the spacing on the screen edges. This was a bug in the old original gaps patch which I've fixed quite a while ago. \n. Your settings are fine, but the gaps implementation is wrong. Using the same gaps settings in i3-gaps, see the following screenshot. The gap between the two windows is just as big as the gap between a window and the screen edge, as it should be. In sway this seems to be incorrect because the gap between two windows is double the size of the gap between window and screen edge.\nThis is (at least in i3) a problem because if you just inset a window, you will naturally run into this problem. What you need to do is divide the gaps by two for edges between two windows.\n\n. Your settings are fine, but the gaps implementation is wrong. Using the same gaps settings in i3-gaps, see the following screenshot. The gap between the two windows is just as big as the gap between a window and the screen edge, as it should be. In sway this seems to be incorrect because the gap between two windows is double the size of the gap between window and screen edge.\nThis is (at least in i3) a problem because if you just inset a window, you will naturally run into this problem. What you need to do is divide the gaps by two for edges between two windows.\n\n. Sure, no problem. Does sway support fullscreening nested containers? You might want to check gap behavior there, too, as in i3-gaps I had to do some fixes for it.\n. Sure, no problem. Does sway support fullscreening nested containers? You might want to check gap behavior there, too, as in i3-gaps I had to do some fixes for it.\n. We don't really support this in i3 either, but it does work for the most part. It's not really a big deal. I honestly don't see why you'd want to fullscreen nested containers anyway. :)\n. We don't really support this in i3 either, but it does work for the most part. It's not really a big deal. I honestly don't see why you'd want to fullscreen nested containers anyway. :)\n. Looks like it, yes, but the screenshot I saw from @SirCmpwn had the bug.\n. Looks like it, yes, but the screenshot I saw from @SirCmpwn had the bug.\n. The bug tag only refers to what type of issue it is. It does not do all imply that it's reproducible or that we do consider it wrong behavior. I add the bug tag to all issues that don't get the enhancement tag. :) \n. The bug tag only refers to what type of issue it is. It does not do all imply that it's reproducible or that we do consider it wrong behavior. I add the bug tag to all issues that don't get the enhancement tag. :) \n. One big problem with waiting is that you'll never get anyone contributing tests alone. Starting early with tests is the only way, imho, to have the application well-tested later on. It admittedly slows development initially but I agree with Michael, it pays out quite quickly. Especially when that 1.0 release comes rolling around. \n. One big problem with waiting is that you'll never get anyone contributing tests alone. Starting early with tests is the only way, imho, to have the application well-tested later on. It admittedly slows development initially but I agree with Michael, it pays out quite quickly. Especially when that 1.0 release comes rolling around. \n. @SirCmpwn Since there's no separate issue for it \u2013 why implement Xembed at all? It's an outdated and annoying specification and you'd put the money to much better use implementing StatusNotifierItem specification instead. Also see https://github.com/i3/i3/issues/2088.. @SirCmpwn Since there's no separate issue for it \u2013 why implement Xembed at all? It's an outdated and annoying specification and you'd put the money to much better use implementing StatusNotifierItem specification instead. Also see https://github.com/i3/i3/issues/2088.. AFAIK most tray applications use libappindicator which will use the new spec if available and only fall back to Xembed.. AFAIK most tray applications use libappindicator which will use the new spec if available and only fall back to Xembed.. Out of curiosity, which desktop system doesn't have dbus?\nBut alright, I'll leave it up to you. Working with Xembed is painful. :-). Out of curiosity, which desktop system doesn't have dbus?\nBut alright, I'll leave it up to you. Working with Xembed is painful. :-). (Random side comment: instead of making i3 jump through hoops for KDE integration KDE should just behave better to not require special casing. Specifications exist for good reasons. I'm not sure why people don't consider this and then blame i3 for it.) . (Random side comment: instead of making i3 jump through hoops for KDE integration KDE should just behave better to not require special casing. Specifications exist for good reasons. I'm not sure why people don't consider this and then blame i3 for it.) . workspace back_and_forth ?. workspace back_and_forth ?. Yes, I can confirm again that current applies to the current workspace, not the current container. We don't have container level gaps in i3-gaps. . Yes, I can confirm again that current applies to the current workspace, not the current container. We don't have container level gaps in i3-gaps. . ",
    "tiregram": "hi, \ncan you add the  support to  layout keyboard azerty.\n. hi, \ncan you add the  support to  layout keyboard azerty.\n. Sorry , but the other keyboard are not supported on my pc (fr).\nI know i just need to export XKB_DEFAULT_LAYOUT=fr\nBut i can't use number to switch to other worspace, because on fr keyboard the \"1\" is \"&\" and & was forbiden. \nMessage log:\nBindsym - unknow key &.\nCan you help me ?\n. Sorry , but the other keyboard are not supported on my pc (fr).\nI know i just need to export XKB_DEFAULT_LAYOUT=fr\nBut i can't use number to switch to other worspace, because on fr keyboard the \"1\" is \"&\" and & was forbiden. \nMessage log:\nBindsym - unknow key &.\nCan you help me ?\n. yes i have try but i have the message.\nBindsym - unknow key &\non the tty, this message error was genenrate by the line:\ncommand.c:154\nbecause you check \nxkb_keysym_from_name(split->items[i], XKB_KEYSYM_CASE_INSENSITIVE);\n. yes i have try but i have the message.\nBindsym - unknow key &\non the tty, this message error was genenrate by the line:\ncommand.c:154\nbecause you check \nxkb_keysym_from_name(split->items[i], XKB_KEYSYM_CASE_INSENSITIVE);\n. ",
    "Luminarys": "Sway already does provide configuration options to alter the size, position, and status(on/off) of monitors. As of right now dynamic changes are not available though.\n. At the very least there should be a config location override.\n. Sure, I'll get on this.\n. I ended up almost getting Travis working a while back, but there ended up being a weird issue with some structs from #time.h somehow not being included in wlc. Have you given any more thought to how we should do CI @SirCmpwn?\n. I agree with all of your points, but you do have to consider the primary disadvantage of Gitlab having a much smaller user base. The good, and perhaps also bad, thing about Github is its ubiquity, which results in many users being able to find your project and contribute to it. But if you're ok with the decreased visibility, then I'd say go for it.\nEdit: Perhaps the project could be primarily developed on Gitlab while also being mirrored on Github.\n. Ok, everything has been fixed, but that ternary statement now looks weird on my computer. You'll probably want to check how it looks on your computer too.\n. Reopening after merge.\n. Should fix glitchiness where workspaces aren't properly focused on workspace switching. Previously, wlc_output_set_mask(wlc_get_focused_output(), 2); was used after workspace switching was done. This meant that if you did a workspace switch for a workspace in an output you weren't currently in, wlc wouldn't properly focus the workspace. That line is not changed to wlc_output_set_mask(ws_output->handle, 2); so that the output where the workspace was changed gets focused, rather than the output of whatever workspace is currently focused.\n. Ok sure.\n. Yes, that's the first thing tried.\n. Having a variable expander would probably be a good idea, I can go ahead and do this.\n. Oops, output_next/prev were supposed to be next/prev_on_output. I'll go ahead and change the names.\n. Yea, I'll handle it.\n. Alright, everything should be good to go. I'll get on floating modifier stuff later today if I can.\n. Alright, those should be taken care of.\n. Something is definitely awry because focus_pointer() is returning the correct view, but it needs to be focused again for it to work. I'm looking into this.\n. I've tested more, focus_view() for some reason needs to be called twice to work for refocusing from an unmanaged window close.\n. Using focus_view(focus_pointer()); is a hack for now, I'm going to try and figure out what the real issue is. If you want an example, open urxvt, and hold Control and right click the terminal. You'll get an unmanaged popup, which when closes, prevents refocusing back to urxvt.\n. Apparently running focused_view(focused) works, but not focus_pointer().\n. Figured out the issue. It's that focus_pointer is only going to focus when it sees that either pointer && focused != pointer is true, or focused is nonexistant. This means focus_pointer will never actually focus after an unmanaged window has been closed. So I do think that using focus_view(focus_pointer()); is appropriate, unless one of you guys has a better solution.\n. Interesting, this is quite different from what my version of CPP check yields. We'll be looking into these issues, feel free to send a PR with fixes.\n. You make a good point about the code in focus_pointer, the code there needs to be rearranged there so that focused is checked for validity initially.\n. I can't seem to duplicate this. Where does gdb say it's crashing, and why?\n. I do, but right clicks on the desktop don't seem to do anything.\n. I'll get around to testing this quickly, in the meanwhile, would you be able to provide some info from gdb or logs?\n. Ok, I've been able to replicate the bug, thanks.\n. Fixed the issue, will be pushing in upcoming commit.\n. Alright, fixed with 23b90d8e69d203697c5548fdd140bf3052749dfa.\n. We currently only block the clicks from going through if (pointer && pointer != focused) where pointer is the container under the pointer, does this need to be expanded?\n. Ok, so just check if the pointer is over a floating window, and if so, deny the request?\n. What I said above will end up denying all clicks to floating windows which is bad. The only way around this is to check for the floating_modifier key being held as the click happens, but this is not what i3 does. I think we should just allow clicks to happen, honestly.\n. Yea you're right, my bad. I was somehow checking in i3 incorrectly, so I mispoke.\n. I just pulled the latest changes, I'm not sure that this has been fixed. Could someone else confirm this?\n. Ok, I'll close the issue and make sure that I'm up to date.\n. Yep, I'm good now.\n. Closed with 774e594714579699a5f73fd110007ebb5a60cec6\n. I'll look into this, there may have been some regressions that resulted from recent changes.\n. This seems to be caused by glitches in the get_focused_container function as well as active_workspace not being set properly.\n. Since @taiyu-len doesn't seem to be experiencing these glitches, this might be a one-of problem for me. Could someone else confirm/deny this? \nLog info for spawning two workspaces:\nCompositor is ready, executing cmds in queue\nSetting focus to 0x24dcf10:1\nHandling command 'exec urxvt'\nExecuting urxvt\nAdding new view 3:urxvt to container 0x24db470 2\nAdding 0x25d0d80 (4, 0x0) to 0x24db470 (2, 606x983)\nSetting focus to 0x25d0d80:3\nArranging layout for 0x24dcf10\nArranging workspace #0 at 10, 10\nArranging layout for 0x24db470\nArranging 0x24db470 horizontally\nCalculating arrangement for 0x25d0d80:4 (will receive 1.00 of 606)\nSet view to 586 x 963 @ 20, 20\nfocus:R|(0x60cba0)(p:(nil))(f:0x24dcf10)(h:-1)Type:Root|layout:NONE|w:0|h:0|x:0|y:0|vis:f|wgt:0|name:(null)|children:2\n|focus:X|(0x24dcf10)(p:0x60cba0)(f:0x24db470)(h:1)Type:Output|layout:NONE|w:626|h:1003|x:0|y:0|vis:f|wgt:1|name:None-0|children:1\n|-focus:W|(0x24db470)(p:0x24dcf10)(f:0x25d0d80)(h:-1)Type:Workspace|layout:Horiz|w:606|h:983|x:10|y:10|vis:t|wgt:1|name:web|children:1\n|--focus:F|(0x25d0d80)(p:0x24db470)(f:(nil))(h:3)Type:View|layout:NONE|w:606|h:983|x:10|y:10|vis:t|wgt:1|name:urxvt|children:0\n|focus:X|(0x25ba650)(p:0x60cba0)(f:(nil))(h:2)Type:Output|layout:NONE|w:611|h:1003|x:0|y:0|vis:f|wgt:1|name:None-1|children:1\n|-focus:F|(0x25a37a0)(p:0x25ba650)(f:(nil))(h:-1)Type:Workspace|layout:Horiz|w:591|h:983|x:10|y:10|vis:t|wgt:1|name:term|children:0\nSetting focus to 0x25d0d80:3\nSetting focus to 0x25d0d80:3\nSetting focus to 0x25ba650:2\nHandling command 'exec urxvt'\nExecuting urxvt\nget_focused_container unable to find container\nAdding new view 4:urxvt to container 0x24db470 2\nAdding 0x25b5960 (4, 0x0) to 0x24db470 (2, 606x983)\nSetting focus to 0x25b5960:4\nSetting focus to 0x24dcf10:1\nArranging layout for 0x24dcf10\nArranging workspace #0 at 10, 10\nArranging layout for 0x24db470\nArranging 0x24db470 horizontally\nCalculating arrangement for 0x25d0d80:4 (will receive 0.50 of 606)\nSet view to 283 x 963 @ 20, 20\nCalculating arrangement for 0x25b5960:4 (will receive 0.50 of 606)\nSet view to 283 x 963 @ 323, 20\nfocus:R|(0x60cba0)(p:(nil))(f:0x24dcf10)(h:-1)Type:Root|layout:NONE|w:0|h:0|x:0|y:0|vis:f|wgt:0|name:(null)|children:2\n|focus:X|(0x24dcf10)(p:0x60cba0)(f:0x24db470)(h:1)Type:Output|layout:NONE|w:626|h:1003|x:0|y:0|vis:f|wgt:1|name:None-0|children:1\n|-focus:W|(0x24db470)(p:0x24dcf10)(f:0x25b5960)(h:-1)Type:Workspace|layout:Horiz|w:606|h:983|x:10|y:10|vis:t|wgt:1|name:web|children:2\n|--focus:F|(0x25d0d80)(p:0x24db470)(f:(nil))(h:3)Type:View|layout:NONE|w:303|h:983|x:10|y:10|vis:t|wgt:1|name:urxvt|children:0\n|--focus:F|(0x25b5960)(p:0x24db470)(f:(nil))(h:4)Type:View|layout:NONE|w:303|h:983|x:313|y:10|vis:t|wgt:1|name:urxvt|children:0\n|focus:X|(0x25ba650)(p:0x60cba0)(f:(nil))(h:2)Type:Output|layout:NONE|w:611|h:1003|x:0|y:0|vis:f|wgt:1|name:None-1|children:1\n|-focus:F|(0x25a37a0)(p:0x25ba650)(f:(nil))(h:-1)Type:Workspace|layout:Horiz|w:591|h:983|x:10|y:10|vis:t|wgt:1|name:term|children:0\nSetting focus to 0x25d0d80:3\nSetting focus to 0x24db470:-1\nSetting focus to 0x25d0d80:3\nSetting focus to 0x25d0d80:3\nCrashes such as this also happen:\n```\nfocus:R|(0x60cba0)(p:(nil))(f:0x158d400)(h:-1)Type:Root|layout:NONE|w:0|h:0|x:0|y:0|vis:f|wgt:0|name:(null)|children:2\n|focus:X|(0x14e21e0)(p:0x60cba0)(f:0x14abfc0)(h:1)Type:Output|layout:NONE|w:626|h:1003|x:0|y:0|vis:f|wgt:1|name:None-0|children:1\n|-focus:W|(0x14abfc0)(p:0x14e21e0)(f:(nil))(h:-1)Type:Workspace|layout:Horiz|w:606|h:983|x:10|y:10|vis:t|wgt:1|name:web|children:0\n|focus:X|(0x158d400)(p:0x60cba0)(f:(nil))(h:2)Type:Output|layout:NONE|w:611|h:1003|x:0|y:0|vis:f|wgt:1|name:None-1|children:1\n|-focus:F|(0x15ada40)(p:0x158d400)(f:(nil))(h:-1)Type:Workspace|layout:Horiz|w:591|h:983|x:10|y:10|vis:t|wgt:1|name:term|children:0\nSetting focus to 0x14abfc0:-1\nSetting focus to 0x14e21e0:1\nget_focused_container unable to find container\nMouse button 272 pressed\nSetting focus to 0x14abfc0:-1\nget_focused_container unable to find container\nMouse button 272 released\nSetting focus to 0x14abfc0:-1\nSetting focus to 0x158d400:2\nget_focused_container unable to find container\nMouse button 272 pressed\nProgram received signal SIGSEGV, Segmentation fault.\n0x0000000000405032 in handle_pointer_button (view=0, time=23959160, modifiers=0x7ffff7dd9918 , button=272, state=WLC_BUTTON_STATE_PRESSED, origin=0x7fffffffe2e0) at /....../sway/handlers.c:460\n460                     if (pointer->is_floating) {\n```\n. I just tested this, it doesn't seem to be an issue. Could you double check this?\n. Aside from the minor style point I commented on, LGTM.\n. I don't think that it would actually be too hard. I need to think more about this, but I believe that we could allow resizes in arbitrary directions by simply considering the movement to be a vector made up of a horizontal and vertical resize, and applying the logic I described for mouse resizes in both directions.\n. I've implemented everything described. The whole sibling insertion thing is somewhat irrelevant as arrange_windows takes care of this stuff. The only thing really left to debate are the minor details of how resizing should work, so I'm going to close the issue.\n. I'll work on improving the version information later tonight. Do you still want to do everything through macros defined at compile time?\n. I'm closing this for the time being, as the output is now essentially the same as i3's with the exception of the version.\n. I've added in bspwm-like mouse resizing. Currently, the resize will \"lock\" if the user hits the minimum sane size for any container involved in the resize, and can't be unlocked unless the user re-enters tiling resize mode. Since we're diverging in functionality, we'll have to to consider how best to handle this. Removing the lock doesn't do anything \"harmful\", but it results in resize focus being applied to an alternative container(I can alter this pretty easily).\n. Floating stuff is pretty broken with this change, if you weren't already aware. Also I'm not sure about using the macros, but that's a bit of a style choice which I'm not really going to decide on. Personally I see the way we handle floating containers as fine. Simply arrange everything but the floating containers first, then draw them in, using the list order as priority. Thoughts @SirCmpwn?\nFor the time being I'm going to more carefully read through the code and see if there's anything super wrong.\n. Try floating a window, running splith/v on it, then unfloating it. You'll get segfaults originating from line 87 in layout.c because there will be no floating array for the parent container created from the splitv/h.\n. Also, fullscreen stuff seems to be glitchy, try creating a new view while fullscreened.\n. Cool, I'll test some more. \nEdit: Briefly testing, it LGTM. :+1:\n. I think the correct way to handle this is to call the get_swayc_in_direction function to figure out which container needs to be grabbed, then simply swap the two in their parent's lists.\n. I don't think a resizing modifier is necessary, at least it isn't used in i3.\n. My initial comment was more saying just use floating_modifier, no need for a new one. Thinking about it, I think we probably should have a resizing_modifier. We should make it fall back to floating_modifier if it isn't defined though.\n. I was thinking that too, but it just seems odd to have floating_modifier be applicable to non_floating things. It'd be nice to have either a resizing_modifier or tiling_modifier(since we want to allow users to swap view's too) that would override floating_modifier for those situations.\n. This sounds fine to me.\n. I'll try to figure this out tonight.\n. Will be implemented with #118.\n. I just tested this with urxvt, and when I toggle floating, the terminal goes to the correct requested size. Can someone else confirm/deny this?\n. Also added in bspwm like view swapping. Once merged I'll close up the issue.\n. Weston seems to utilize its own tool for doing this, which we may want to look through to get an idea about how to do this. That being said I have the feeling that this will have to be done through wlc in some way.\nOn a separate note, we should probably create a list of sub-programs that we want to develop for sway so people interested can easily assist in their creation. A wiki page would probably suffice.\n. Cool. How high of a priority is this?\n. I've had some weird issues too with my up/down arrow keys not properly working. What is the exact keybind you're using for focus up/down?\n. Fixed.\n. I'm not sure how extensively you've tested the code for the tiling resizes, but they're definitely not functioning as they should compared to prior(try wildly flinging your mouse around and you'll see weird behavior). However, given the complexity of the previous resizing code, I think the best way to handle minimum width/height would be to go with these changes and try to get wlc to expose a function to allow us to set the pointer position, so if min sane height/width were exceeded the pointer's dy/dx could be reverted.\n. Tested again, LGTM. :+1: \n. Should I change it so that it reads <disable|resolution|res... or <disable>|<resolution|res... ?\n. Alright, should be good.\n. Code tags please.\n. Alright, should be good.\n. Fixed.\n. After the recent updates, sway crashes when I do the same thing. Here is the error and bt:\nsway: /home/luminarys/Installs/wlc/src/compositor/output.c:532: wlc_output_set_information: Assertion `output->active.mode != (0x7fffffff * 2U + 1U) && \"output should have at least one current mode!\"' failed.\nError: Signal 6. Printing backtrace\nBacktrace: ./bin/sway(error_handler+0x66) [0x407706]\nBacktrace: /usr/lib/libc.so.6(+0x33680) [0x7fec1e833680]\nBacktrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7fec1e8335f8]\nBacktrace: /usr/lib/libc.so.6(abort+0x16a) [0x7fec1e834a7a]\nBacktrace: /usr/lib/libc.so.6(+0x2c417) [0x7fec1e82c417]\nBacktrace: /usr/lib/libc.so.6(+0x2c4c2) [0x7fec1e82c4c2]\nBacktrace: /usr/local/lib64/libwlc.so.0(wlc_output_set_information+0x167) [0x7fec1f270581]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0xe547) [0x7fec1f26d547]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0xe80f) [0x7fec1f26d80f]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0x1b40b) [0x7fec1f27a40b]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0x1c336) [0x7fec1f27b336]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0x1ce50) [0x7fec1f27be50]\nBacktrace: /usr/local/lib64/libwlc.so.0(wlc_backend_update_outputs+0x5b) [0x7fec1f27a2ae]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0xddc4) [0x7fec1f26cdc4]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0x2ab89) [0x7fec1f289b89]\nBacktrace: /usr/local/lib64/libwlc.so.0(wlc_set_active+0x44) [0x7fec1f28a077]\nBacktrace: /usr/local/lib64/libwlc.so.0(+0x29645) [0x7fec1f288645]\nBacktrace: /usr/lib/libc.so.6(+0x33680) [0x7fec1e833680]\nBacktrace: /usr/lib/libc.so.6(epoll_wait+0x13) [0x7fec1e8e9703]\nBacktrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x43) [0x7fec1e5f7213]\n. Fixed.\n. I'll check again.\n. The mouse motion/click ignoring was a side effect I think, but there's still an issue. When you drag a floating view which is not at the front, it isn't moved to the front, i.e. you move/resize the floating view, but it still stays behind the other ones.\n. Fixed.\n. Fixed with #152 \n. The issues seems to be that the rofi window isn't properly destroyed once it launches something and becomes an invisible tile. I'll look into why this seems to be happening.\n. The issues seems to be that when rofi is being destroyed, its wlc view type isn't properly acknowledged as WLC_BIT_POPUP, so it isn't properly removed from sway as a result, which leaves that lingering invisible window.\n. Fixed.\n. I personally don't use it, and do agree that it would be likely be rather complicated to implement. Down the line it might be something to consider implementing though.\n. Odd, it looks fine in vim for me. I guess I'll just set it back to spaces then.\n. I'm not sure that it can be done w/out spaces, but I'll see.\n. My bad, I'll fix this. By exec do you mean running the wlc?\n. Ah I see. I assume it would be ok to just run sway_abort at the end of the main function if load_config failed?\n. Based on the i3 user guide, I don't think that there are any other commands for floating, but I left this open ended in case we wanted to extend functionality or if there was something I didn't see.\n. The if statement isn't necessary, but it saves an O(n) look up at the cost of that O(1) check. Seems like a good tradeoff to me.\n. I don't think they do, I'm looking into this now.\n. Yea, I'll go with this instead.\n. Good point, forgot about that.\n. Some basic testing indicates that using fullscreen on a floating container is compatible as is.\n. This was just me extending @taiyu-len's debugging to work on the floating windows. The whole thing is written in that style, and given that you intend to rewrite this, I'm not sure I see a point in adhering to the proper style for now. If you want me to, I'll fix it though.\n. I don't think it should, I changed some code a while back that made is so that varsubs are done on all parts of every command.\n. This is a temporary hack to allow floating views to resize while we wait for wlc to be patched to allow for proper key checking.\n. The spacing should probably be changed here so that it's dragging || resizing.\n. Anything other than the missing space on line 403?\n. Have you tested this logic? You aren't setting X/Y anywhere, just swapping list positions. I don't think arrange_windows really cares about the ordering of children in terms of how it positions things, but perhaps I'm wrong?\n. I do think I'm wrong about this, my bad. I wonder if this is a good way for arrange_windows to work though. Either way, it's fine.\n. Yea, I wasn't good about my phrasing. @Half-Shot's method is good, I'm simply unsure if the ordering within the list is the best way to arrange the windows.\n. Your logic is fine. Mixes won't matter because there's a fixed layout for each container. Just fix up style and this is good. :+1:\n. Yea, I'll change this.\n. Isn't the return type void?\n. You'll want to alter the style for this. Spaces -> Tabs, and please add in spaces for if statements so they read like if (cond) {. Thanks!\n. Forgot to remove that debug line, my bad.\n. ",
    "Manouchehri": "Is it possible to start a program as floating with Sway?\n. @SirCmpwn Would it be possible to change the layout of a window to floating via sway command or sway-msg? Also, what exactly is the proper way of using sway [command]? Every combination I tried just ended up spawning a new sway instance.\n. Ah, that makes sense; I blindly trusted the man page. Thanks, I'll give that a try!\n. I can check later, I was just heading out for dinner and wanted to submit\nthe issue before I left.\n. As of 86372d0 it's still the same.\n~ > sway --version\nPROT_EXEC|PROT_WRITE failed.\n~ > sudo dmesg | tail -1\n[ 7870.915655] grsec: denied RWX mmap of <anonymous mapping> by /usr/bin/sway[sway:6673] uid/euid:1000/1000 gid/egid:1000/1000, parent /usr/bin/bash[bash:6648] uid/euid:1000/1000 gid/egid:1000/1000\n~ > sudo setfattr -n user.pax.flags -v \"m\" /usr/bin/sway\n~ > sway --version\nsway version g86372d0 (2015-11-18, branch \"makepkg\")\n. There's a mapping created that has read-write-execute on it. Should be read-execute or read-write.\nI can only find void *data = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0); though. I don't see where PROT_EXEC is coming from.\nRelated: https://bitbucket.org/cffi/cffi/issues/177/foo-segfaults-with-grsec-denied-rwx-mmap\n. It might be a malloc, apparently Linux sets the default to PROT_EXEC in some cases?\nhttps://stackoverflow.com/questions/6315296/whats-the-protection-flags-of-memory-allocated-by-malloc\n. I haven't been using sway recently. I also had an accident with my hard drive, so my system is down right now.\n. @sce Thanks. Sounds like a wlc issue, maybe a race condition somewhere?\nI also can't open up the menu bar (or the right click drop down menu) in gnome-terminal unless the window is placed on the left most side or top (e.g., with five terminals only one will work properly). Is that a known issue?\n. You have to left and right click around a lot between different windows to trigger it. I'm unable to reproduce it reliability, it takes a few minutes to get it to trigger. (However, when it does happen, it's really annoying since all of my terminal sessions crash at once.)\nI've opened a ticket with wlc as well to see where that goes.\n. Also, I noticed I made a typo in my original bug report: \n\nGetting random crashes with gnome-terminal (GTK3) when I click a lot and move between workspaces \n\nShould be:\n\nGetting random crashes with gnome-terminal (GTK3) when I click a lot and move between windows \n\nWhile switching between workspaces might trigger it as well, that's not what I tested. The issue I'm observing is with moving between windows.\n. Try copy pasting between windows as well.\n. Wait, are you not using the Wayland GDK backend? If you're not, that's why\nit isn't being triggered; it's purely a Wayland related crash.\nCopy pasting works fine between gnome-terminal windows.\nJust had it crash on me right now with only moving my mouse.\n. @SirCmpwn Mind adding wlc-git to makedepends on the AUR?\n. Oops, you're right; I checked and it doesn't make a difference.\n. @robotanarchy That also looks quite similar to the Jack \u00dc logo.\n\n. I'm able to reproduce it, worked on the first try (using Wayland).\n. #228 is another memory allocation related issue if you haven't already seen it.\n. What's the correct way of doing that? (I can't tell what parts of the man page are implemented or not.)\n. sway-msg in mentioned in the man pages and doesn't exist. \nOne second while I restart to try that.\n. Putting it in the config file works (sort of). The screen is still physically on, but it's not being used (as intended).\n. Is output LVDS-1 1366x768 the correct way to turn it back on?\nLVDS-1 is gone from get_outputs when it's disabled via the config file (don't know if that's intended or not).\n~ > i3-msg -t get_outputs\n[ { \"name\": \"HDMI-A-1\", \"active\": true, \"primary\": false, \"rect\": { \"x\": 0, \"y\": 0, \"width\": 1920, \"height\": 1080 }, \"current_workspace\": \"1\" } ]\n. That would explain why I wasn't able to do it.\n. So by extension, isn't hot-plugging also not supported?\n. I don't understand how they're unrelated; how does physically plugging in a screen differ from turning it back on via software?\n. @SirCmpwn It's the client application that crashes. No VMs are being run.\n. ",
    "volkfried": "I love you for this. I too have grown frustrated with i3way's lack of progress. I can't code very well, otherwise I would have done something :/ Anything I would have made would be horrible, ugly, and slow XD Sway is looking great!\n. ",
    "agboom": "@progandy +1, I have icons as workspace labels and without numbering them, the order changes when switching workspaces.\nLooking forward to using this wm! I like the aim to let it just work with your existing i3config. Can't wait for support for assign and tabbed layouts.\n. Never mind, I just discovered it's not an issue. Strip workspace numbers work, but double quotes are not stripped as opposed to in i3.\n. Wow, that's fast. Thanks!\n. ",
    "mikkeloscar": "@agboom can you create a separate issue about the workspace order changing?\n. > but double quotes are not stripped as opposed to in i3.\n@agboom I pushed a fix for that earlier today #444 \n. @nicman23 that's an issue related to #450 when that's fixed then it will use the correct cursor.\n. It wouldn't be that hard to support, just tell swaybar about the update and refresh window borders.\n. I looked into this and since Travis is running ubuntu 12.04 a lot of stuff is either outdated or missing, so it is quite complicated to do this.\n. @onny The colors hasn't been implemented yet, but I'm sure it will happen soon.\n. @juju2143 no, swaybar is supposed to implement the i3bar protocol: http://i3wm.org/docs/i3bar-protocol.html so the colors should be provided as part of the json data.\n. @Manouchehri Can you still produce this error? I have no clue about grsec, but I just tried to run the grsec kernel in Arch, and I don't get any errors when running sway. Do you use some custom config?\n. @thestinger thanks for the info. I have now tried to run sway on the grsec kernel with paxd installed and don't see any of the errors mentioned here. So I'm inclined to close this, unless someone objects.\n. I guess this was implemented in #439\n. I guess this was implemented in #439\n. It doesn't make sense to have wlc-git in makedepends when it is already in depends. makedepends is only for packages which are not required at runtime. The user (or aur-helper) is responsible for rebuilding -git packages if required. I believe some aur-helpers can even auto-rebuild -git packages if they are told to do so.\n. It doesn't make sense to have wlc-git in makedepends when it is already in depends. makedepends is only for packages which are not required at runtime. The user (or aur-helper) is responsible for rebuilding -git packages if required. I believe some aur-helpers can even auto-rebuild -git packages if they are told to do so.\n. Awesome!\n. Awesome!\n. Have you tried to run strace sway that might give you some information?\n. Have you tried to run strace sway that might give you some information?\n. @fenque if you are running sway from a tty you might wanna do something like sway -d 2> ~/sway.log to capture the sway log output. \n. @fenque if you are running sway from a tty you might wanna do something like sway -d 2> ~/sway.log to capture the sway log output. \n. I run rofi like this: https://github.com/mikkeloscar/dotfiles/blob/33677ef833823eb1e679f3549a58177536b527f5/.config/i3/config#L39\nit does work, but rofi doesn't get focus so you have to move the mouse to rofi before you can type. It has always been like that with sway for me.\n. I have: xorg-server-xwayland  1.18.0-3 from archlinux.\n. @WokSearedBacon how do you run rofi -show run I noticed it works if I run it from urxvt rather than my usual terminal termite. I don't know why yet, but it might help narrow it down.\n. The problem is they do indirectly through the import of \"log.h\" -> \"container.h\" ->  as far as I can work out.\nIt makes total sense that this is not the solution but it would be nice if we could work out another way to solve the issue.\n. This is an arch-travis issue. I have fixed it here: mikkeloscar/arch-travis@c07c52e.\nHowever I'm not sure this is related to the other problems seen on the new Travis infrastructure, but it clashed because the iso was updated today.\n@solarce as an example this was build on the new infrastructure and failed, but not because of the ARCH_ISO value.\n. This is an arch-travis issue. I have fixed it here: mikkeloscar/arch-travis@c07c52e.\nHowever I'm not sure this is related to the other problems seen on the new Travis infrastructure, but it clashed because the iso was updated today.\n@solarce as an example this was build on the new infrastructure and failed, but not because of the ARCH_ISO value.\n. @solarce I'll merge it if you make a PR of that fix, It doesn't seem like it will cause problems even when the ubuntu user is removed at some point.\n. @solarce I'll merge it if you make a PR of that fix, It doesn't seem like it will cause problems even when the ubuntu user is removed at some point.\n. @SirCmpwn the issue this PR solves and the other issue related to running arch-travis on GCE (as discussed above) should be resolved now in arch-travis.\n. @SirCmpwn the issue this PR solves and the other issue related to running arch-travis on GCE (as discussed above) should be resolved now in arch-travis.\n. Yes, next time sway is build on travis these changes will take effect.\n. Yes, next time sway is build on travis these changes will take effect.\n. It seems to work pretty decent here as well.\n. It seems to work pretty decent here as well.\n. Great, me too actually. I have updated it to use floating_modifier and added that information to the example config and manpage.\nI'm not sure I used the correct man page notation is [normal|inverse] correct if that whole option is optional?\n. Great, me too actually. I have updated it to use floating_modifier and added that information to the example config and manpage.\nI'm not sure I used the correct man page notation is [normal|inverse] correct if that whole option is optional?\n. I just tested this, and only true transparency seems to work for me, but it works the same way whether I use gaps or not.\n. I just tested this, and only true transparency seems to work for me, but it works the same way whether I use gaps or not.\n. I believe this was fixed as part of Cloudef/wlc@2cf560cf.\n. I believe this was fixed as part of Cloudef/wlc@2cf560cf.\n. Do you know what a block is in the context of a bar? I'm trying to figure out how bar { border } should be implemented in the config file and the airblader/i3 docs mention individual blocks, but I'm not sure what those blocks are?\nAny idea what bar { border } should look like in the config?\n. Do you know what a block is in the context of a bar? I'm trying to figure out how bar { border } should be implemented in the config file and the airblader/i3 docs mention individual blocks, but I'm not sure what those blocks are?\nAny idea what bar { border } should look like in the config?\n. I think tray_padding was implemented before I realized that a systray wouldn't be supported by wayland in the current state (could be implemented eventually).\n. I think tray_padding was implemented before I realized that a systray wouldn't be supported by wayland in the current state (could be implemented eventually).\n. I have moved numlen() to common/util.c and merged it with sway/util.c which only had one function.\nI have also updated the bar-id stuff to use numlen.\nHope it's ok to have all this in a single PR.\n. I have moved numlen() to common/util.c and merged it with sway/util.c which only had one function.\nI have also updated the bar-id stuff to use numlen.\nHope it's ok to have all this in a single PR.\n. I have moved it to a separate function.\n. I have moved it to a separate function.\n. LGTM\n. LGTM\n. I will add rgba support!\n. I will add rgba support!\n. rgba support added. It is now possible to define the color as #rrggbb or #rrggbbaa.\n. rgba support added. It is now possible to define the color as #rrggbb or #rrggbbaa.\n. Fixed double return and renamed bar_height to height in sway/ipc-server.c\n. Fixed double return and renamed bar_height to height in sway/ipc-server.c\n. Sorry about that, I have reverted JSON property name to bar_height.\n. Sorry about that, I have reverted JSON property name to bar_height.\n. What about the cursor you get when you don't have any windows open? It seems like weston uses wl_cursor to load a cursor theme and use that for non-client interaction. It even supports the location mentioned by OP.\nIs there any reason why this wouldn't work in sway (excepts it's not currently implemented in wlc)?\nThis would give us a mostly consistent cursor theme assuming the toolkits like QT and GTK use the same method for loading a theme (which I think they do).\n. It would be cool if (at some point) it would be possible to draw the cursor on top of windows, for instance when dragging and resizing, such that the cursor shape could match the action. :). Wouldn't really work through swaybg though.\n. Will a pango font always be defined as pango:some font name ?\n. And the warning should say that a non-pango font isn't supported, right?\n. I think font support is missing as well.\n. I don't know if this belong here, but the bar doesn't seem to get fresh bar configuration if you edit the config and reload it from within sway.\n. We still need to sort it in swaybar unless we sort the json array before sending instead ofc.\n. I'm pretty sure the problem is that the dirty variable is never set to false, so it will render non stop. I will try to handle this tomorrow if no one beats me to it.\n. If we store the pids of swaybar and swaybg somewhere then it would be easy to kill and restart them on reload. My idea would be to store them in an output container since each swaybg/swaybar process \"belong\" to a single output as far as I can tell. What do you think of this approach?\n. Ok, cool, I will try to work on that tomorrow then.\n. Fixed in #358 \n. This has one problem where the windows will cover the bar after a reload until you do something to rearrange them, i.e. spawn a new window. I suspect this also happens on startup but since you don't have any windows open at that point you won't see it.\nAny ideas how to update the layout correctly when spawning the bar after a reload?\n. Hmm, that is called in cmd_reload after a new bar is spawned.\nI just tried on the master branch and if you spawn a window and then spawn a swaybar manually the same thing happens (it spawns behind the window). \nI did a bisect of master and I think this issue was introduced in ed730db\n. Yes, this problem doesn't happen if I revert ed730db\n@sce thoughts?\n. Except what you have explained above it LGTM. The behavior is as \"expected\" now.\n. Make sure you have the latest version of sway.\nIf you have the latest version then please run addr2line on the backtrace lines and post the result.\nYou can use this script to make it a bit easier. Just run:\n$ cat log | python addr2line_sway.py /path/to/sway\n. Indeed, is it the same sway binary you used when producing the log and when running addr2line?\n. I think it would be nice to support configuration for individual devices and for classes of devices. That way you can have a general config for touchpad devices, or you can customize it for a specific touchpad if you like.\nI think device/name is a fine identifier, and the config parser can handle quoted strings just fine. :)\n. I think everything here was solved long ago, so I'm closing this.\n. It looks like that crash happens somewhere in wlc (main.c:200 is wlc_run()).\n. I can reproduce this by opening urxvt and exiting sway.\n. Looks like this is fixed by @crondog 's patch!\n. :+1: \n. We also really need to split up swaybar into multiple files at some point as it's becoming a bit of a mess.\n. Yes, I think we should have something like a struct bar_config which is initialized from the json data in a separate function/file, so we don't mix parsing of the json with the initialization of the window for instance. We could also refactor the ipc stuff to a separate file.\n@SirCmpwn where should we put local header files only relevant to swaybar? Should they just go in inlcude/ or maybe in something like swaybar/include?\n. This was fixed in e45fd9b6.\n. I didn't think of that, but then this is correct.\n. Except the event might be triggered twice for some operations, since it is triggered in set_focused_container() in most cases.\n. :+1:\n. The build failed because of my changes in #401 I have fixed it upstream so it should build now. Sorry about that.\n. @SirCmpwn I'm positive you fixed this in baa958ea, so I'm gonna close this issue.\n. This is because sway currently doesn't handle a SIGTERM signal and gracefully shuts down.\n. Thanks @minus7 \nThis is how it's done in weston: http://cgit.freedesktop.org/wayland/weston/tree/src/main.c#n737\n. What is this supposed to achieve?\n. You should also add info about the debug option in the man page.\n. I must have been thinking about one of the other sway* binaries. But then it LGTM.\n. This is ready for review.\n. That should do it.\nThe last commit also makes sure that we only check modifiers that are considered active, that is, if pressing/releasing a modifier dosn't affect any bars, then the state won't be checked all the time.\n. I can reproduce this, and I think it's related to how wlc handles the return value of the handle_key callback: https://github.com/Cloudef/wlc/blob/master/src/compositor/seat/keyboard.c#L354\n. This has been fixed upstream: Cloudef/wlc@adbf9f09\n. It will only send the keys defined in bindsym's of your config. But you decide, I only implemented it because it's in i3.\n. That sounds a bit like pseudo security to me, if someone can run a keylogger on my machine, then they might very well also be able to change my sway config.\n\nBy the way, to keep i3 compatibility, you could use add a symbol member if there is only one key.\n\nI think that's a decent approach.\n. Is that the correct way to do it? I'm not completely sure how those enable-sway* options work, but I used the same pattern.\n. Updated.\n. Note that ipc_event_binding_keyboard is the exported function, ipc_event_binding is just an internal helper function.\nI don't think it makes sense to create a json object and just pass it to a no-op function. I think ipc_event_binding_keyboard should be the no-op function. Do you not agree with this?\nAbout the event being registerable, sure I will do that.\nAlso, I take it you don't like this change: https://github.com/mikkeloscar/sway/commit/15cbc53a771f35e5510b643193c4ba99e9f820a2#diff-b723e61881687dc0f9f542fdcd97b1c8L339 It is just to make sure that the binding isn't copied every time if it isn't needed. It really should belong in its own commit, and I will do that, unless you don't like it.\n. Thanks!\n. I think this is good, but maybe rename the files to something like completion.zsh or swaymsg-completion.zsh etc.\nAlso please use tabs for indentation, right now you use a mix of tabs and spaces :)\n. It's pretty much done like this: https://github.com/SirCmpwn/sway/blob/master/CMakeLists.txt#L121\n. @SethBarberee share/zsh/site-functions is the correct path as mentioned by @crondog.\nCould you also move the files to completions/zsh then it will be possible to add bash completions if anyone want that at some point.\nOther than that it looks good.\n. Done, also did the same for symbol/symbols same story.\n. > No way to edit the repeat rate.\nI haven't tried myself, but wlc has WLC_REPEAT_RATE, see readme.\n. Nice work! LGTM.\nDo you know why get_inputs returns an empty array when running under X?\n. @andya9 acceleration doesn't appear to be implemented in this PR but it should be fairly easy to do: http://wayland.freedesktop.org/libinput/doc/latest/group__config.html#ga1d9761bb99b445524fb2ea801f946ef1\nIt uses the same speed definition as you describe. (though I think you mean the value is a floating point number in the range [-1,1], not an integer :)\n. :+1: \n. You can close the background with the kill command if no other windows are open.\n. Background also only seem to appear on the first workspace.\n- Open sway, and see background\n- Switch to workspace 2, no background.\n. @SirCmpwn what's your ideas for this? I wouldn't mind having a crack at fixing this, but if you have some different strategy in mind, then I won't mess with this.\n. I'm pretty sure this happens because sway doesn't allow you to hold down $mod+1 and then click on 2 to switch to workspace 2 (this is possible in i3).\nWhen you try to switch quickly like that, you most likely press down one key before you release the other. So it seems like it's slow, but sway is just blocking the binding because you are pressing down more keys than expected. I bet you can make it switch quite fast if you really think about lifting your finger off the key, before pressing the next one :)\nWe need to make sway understand our gentle human touch. I'll look into it.\n. It would still be possible to have $mod+1+2 if the binding exists, but if it doesn't then you could use the \"trick\" that i3 uses so it feels more natural (for people with slow fingers lol). I would prefer it that way as I often have a quick peek at another workspace, and sometimes I fail to switch back quick because of this.\nBut I can definitely understand your argument, I just don't think $mod+1+2 behaving like $mod+2 is a problem, but there might be some other cases where it's annoying?\nEither way, that's my 2 cents.\n. I don't think that's a problem. The way it should work imo is:\nIf you press mod+Shift+s and the binding exists then that will win over mod+s. However, if you press mod+shift+s and that binding doesn't exist, then it would be treated as mod+s.\n. Just for reference SIGPIPE is triggered here: https://github.com/SirCmpwn/sway/blob/master/sway/ipc-server.c#L458 because sway is trying to send a binding event signal to the socket of the terminated swaybar.\n. Thanks!\n. LGTM, but since it changes the arguments I will let @SirCmpwn have a look :)\n. I would love a general review, just to see if you like this direction or not before I continue further. But don't merge until those are ticked off :)\n. This is ready for review/test/merge.\n. Ok, one has to wonder why the hell slashes can be escaped in JSON.\n. Yeah I saw that as well, but we will have to wait for a new json-c release before we can use it.\nA quick hack would be to just remove the slash escaping from the json string printed by swaymsg.\n. Updated, sorry about that.\n. This is how I would do it (without the flag). It's still valid json when the slashes aren't escaped, but @SirCmpwn's the boss :)\nThough I also like the idea of real pretty printing, the default flat json output can be a bit messy for humans, hehe.\n. :+1: \n. Would it be possible to post the script you are using (or a minimal example that shows the problem) then it would be easier to test.\n. The output format in i3status should be \"none\" when running it this way. Should auto detect if you don't set the value.\nI can't replicate the issue, it looks fine when I run the minimal script you posted. What happens if you run i3status as status_command, but set output_format = \"none\" in the config, does that work?\n. Could you also post the i3status config you use? I suspect it has something in it that messes up the bar, since I can't replicate the issue with my own config.\n. @podhorsky-ksj thanks for reporting it, I don't know why I couldn't trigger the issue without your config, but it's fixed now.\n. We need you to run addr2line on the backtrace and post it, so we can get an idea of what's going on.\nYou can use this helper script: https://gist.github.com/mikkeloscar/badebca2b9766a067397\ncat swaylog | python addr2line_sway.py /path/to/sway-binary\nAnd please create a new issue for this.\n. @gpyh they will just be inside the borders drawn by sway.\n. @ke7ofi borders are very helpful to see what window has focus, in i3 the focused window has a blue border while the others have a grey border (by default).\nAlso the title of the window is nice to have.\n. @ViktorNova what about CSD? Most clients has it enabled by default in wayland so the buttons are already there.\n. This is the address you want to translate according to the log you posted: 0x4206d9\n. I can't reproduce on my setup with two monitors.\nI have seen something like what you describe long ago, and I suspect it's not related to swaylock but rather that swaylock is in fullscreen. Could you try to reproduce it with fullscreened windows on both your monitors instead of swaylock?\n. Thanks!\n. This must be a wlc issue as it also happens in the wlc example compositor.\nI can also only trigger the issue with xterm.\n. It's related to how we handle geometry requests from wlc.\n. Thanks for the report, do you happen to know how to trigger this crash?\nIt happens because workspace->fullscreen is corrupted when called here, but I'm not sure I can figure out what caused it without running sway through gdb and trigger the crash manually.\n. @podhorsky-ksj it's most likely because wlc sends a SIGUSR1 when ready so gdb will pause on that signal. Just run handle SIGUSR1 noprint nostop in gdb before you run sway. Then it shouldn't stop.\n. @PluMGMK could please post a backtrace of the crashes so we can get a better understanding of when this happens. Remember to run addr2line on the backtrace and post that along with it. Thanks!\n. @PluMGMK yes, that's right. This script can be helpful: https://gist.github.com/mikkeloscar/badebca2b9766a067397\nYou run it like this:\n$  cat sway.log | python addr2line_sway.py path/to/bin/sway\nIt will take all the relevant addresses in the backtrace of the log, and translate them to line numbers in the sway source.\n. @PluMGMK thanks, one last thing, please post the version of sway you are using. I can see that this must be at least a couple of commits behind master.\n. Hmm, the problem I described above is caused by the fact that the bar on the output with the fullscreened view, is blocking at wl_display_dispatch because there is nothing to redraw when the bar is hidden. This in turn blocks the other bars from rendering since they are rendered one by one in a loop.\nI'm not sure this can be solved in a single threaded context (unless all bars are drawn on the same surface, which is not really a solution).\n. @progandy yes, that was my problem I actually just finished fixing this and have pushed it now.\n. Thanks, fixed!\n. Just pushed a few more fixes.\n. One call to arrange_windows should be enough, just arrange the workspace rather than the view, in the call at line 128.\n. LGTM :+1: \n. @stapelberg Thanks for describing why it works that way.\n\nFor people who prefer focus to allows follow the window, they can adjust the keybinding(s) from move to output  to move to output , focus.\n\nHow do you do this for a command like move left, so the focus follows the window which is moved to the output at the left of the current one?\nThe situation you describe sounds like it would better handled by move container/window to workspace/output <foo> because then you can not only send the windows to another visible workspace but you can send it to any number of workspaces.\n. Ok, this is gonna sound strange.\nWhen I logged into i3 today to test this behavior I was able to move windows from output to output with just move left|right|up|down and have the focus follow the window, like expected. I'm certain this didn't work the other night when I tested it for this patch, so I'm a bit confused as to what is the right behavior. It seems to me that i3 was in some weird state the other day when I tested it, such that it didn't work. So now I really do assume it's a bug in i3, unless there is some state where this behavior is expected, which I can't think of.\nI will try to see if I can trigger this assumed bug again to confirm.\n. Ok, now I'm pretty certain this is a bug in i3.\nAfter doing work for about 3 hours (since my previous comment) move left|right|up|down has stopped working as I would expect, e.g. focus doesn't follow the window to a new output.\nI still don't know when the bug was triggered, but simply running the i3 command restart fixed the problem, so i3 must end up in some state where it doesn't work, which is corrected by restarting i3 with the exact same window/workspace layout as when it didn't work before the restart.\n@stapelberg I will try to gather a bit more info about this and eventually open an issue for i3.\n@SirCmpwn What do you think, have I made my case that this PR does the right thing? :)\n. @SirCmpwn I opened an issue regarding at i3/i3#2257. It has been marked as a bug so I guess it's a confirmed bug in i3 now.\n. Ok, this thread has become a bit confusing, let me try to clear it up.\nI have NOT changed the original behavior of the PR because I believe it implements the desired behavior of i3.\nThe reason I believe this is that when I launch i3 it behaves the same as this PR, but after the bug occur (as described in i3/i3#2257), it behaves like @stapelberg suggested.\nI think @stapelberg was confusing the behavior of move container/window to workspace/output <foo> and move left|right|up|down because he wasn't initially aware of the bug (Michael, please correct me if I'm making a wrong assumption here).\nAlso, i3/i3#2257 includes this:\n\nWhat I expected instead:\nI expect the commands move left|right|up|down to always maintain focus when moving a window > between outputs.\n\nand since it has been marked as bug, I assume this expected behavior has been confirmed.\n. @SirCmpwn I'm sorry I haven't been active lately. I was away last week, and for this whole week I have been (and still is) quite sick with fever :(\nTo top it off, next week I start a new job in a another country, so I will be quite busy with that for a while as well.\nSo unfortunately I don't know when I will get around to fixing this up.\nIt's fine by me if you wanna close it, then I can just reopen when I get time to fix it.\n. @acrisci just rebased on master, last I worked on this it worked fine, but there was some movements on a single monitor that I wanted to fix before it was merged. I don't know if it still works, but please have a look if you have time, unfortunately I don't have much time these days.\n. Thanks!\n. This problem is more clearly exposed with borders enabled:\n\n. We only use wlc_view_get_visible_geometry now with the border stuff merged fwiw. (I kind of forgot about this, but it is the right thing to do anyway).\nDoesn't solve this problem directly though.\n. It was sneaked in here: https://github.com/SirCmpwn/sway/commit/5a13cb0ed136906a4370235214601b0129548c49#diff-5125e6a182d823f6a2ad1c0b7a576892L907 and 2 other places in that commit, to replace wlc_view_get_geometry\n. For anyone where #510 doesn't fix the issue, could you please post your sway config? Also please try to launch sway from inside X and from a tty and see if that makes a difference. That will help debug the issue.\nAnd as always, make sure wlc and sway are up to date :)\n. I think it's a race issue where swaybg starts too late in some cases, to be affected by the forced render request. I just haven't had time to look into it yet.\n. Please test #512 if you can, that should be the correct fix for this issue!\n. Swaybar has support for background colors through the i3bar protocol.\nTo do the arrows like that, swaybar would need to support per block separators with different fg/bg color by extending the i3bar protocol.\nAn alternative would be to add support for another protocol which is not aware of blocks like the protocol used in LemonBoy/bar (Which is the preferred way to do a powerline status bar in i3, it seems).\n. @ke7ofi you can pass it an arbitrary line of text if that is what you mean? You won't get colors that way though.\n. Great!\n. Yeah, I forgot to rebase, is done :)\nYes, it should address #514 unless you see it in some other cases than when running two monitors with a different resolution?\n. Seems like a config issue, can you post the config you are using?\n. Yeah, that doesn't seem to be the issue. Can you post a full log?  Run something like sway -d 2> sway.log ?\n. It looks like those commands are executed before sway is ready.\nTry to wait for the line Compositor is ready, executing cmds in queue before you start to click anything.\nI'm not quite sure how this can happen though, on my machine it takes less than 1 second to reach that state, so I couldn't possible execute all those commands by clicking the keyboard. Are you running those commands in a script?\n. Hmm, it could sound like a problem in wlc, since the compositor_ready callback takes so long to trigger.\n@Cloudef do you have an idea what could be happening here?\n. This has been discussed a bit here: https://github.com/SirCmpwn/sway/issues/521\nBasically in any sane implementation anything wrapped in \"\" means a single argument, if you start to make special cases like i3 does, it gets complicated and confusing. We like to avoid that if possible.\n. exec will run it as /bin/sh -c '\"firefox \"'.\nI would argue that it's wrong to run i3-msg 'exec \"firefox \"' if you don't intend to run the command \"firefox \". How should exec know it isn't meant as a single argument when passed as a single argument?\nUnless this should be a valid way to use exec: exec \"/bin/prog -a -b -c\", but I think that will just be confusing.\n. I see this as an opportunity to correct a poor design choice. It seems to be a single line patch to fix the behavior of i3-dmenu-desktop and I doubt that many people have custom scripts with this weird exec format (but you never know).\nI'll make a PR for i3-dmenu-desktop and see what they say about it.\n. sway(5) is also a bit wrong about what must be called at runtime. e.g. floating_modifier can be used directly in the config, but that's not what the man page says.\nEdit: nvm, I missread the man page...\n. Didn't know about wordexp I will definitely do that.\n. Ready for review/merge!\n. Good point, fixed!\n. Ok, that will also fail silently for sway -c /path/to/dir though, might not be such a big issue. Could also make it a L_DEBUG?\n. Fair\n. > Isn't there supposed to be a different border for windows that are focused, but on an output that is not focused?\nThe border should be light grey with white font by default. But I forgot to test on multiple outputs (should work with multiple containers on one output). I'll fix this.\n\nMy font is incorrect now for swaybar. Oddly it's correct for the window titles.\n\nI refactored wayland/pango.c to use it with the borders, might have messed something up there.\n\nAnother issue: you can see the border through transparent surfaces.\n\nForgot about this, will fix.\n\nI get a crash on this branch when initiating a download in firefox.\n\nCould be related to what I removed in handle_view_geometry_request.\n. Latest commit fixes the problems with gnome-calculator and firefox crashing. It also exposes #505 more clearly since the file dialog on firefox downloads is shifted off the expected geometry. I won't attempt to fix that issue in this PR.\n. I can't seem to replicate this issue. Tried to use the Hack font you mention.\nIf you still see this issue, can you post some special characters that cause this issue, cause those I tried do not.\n. @beanaroo can you post your configs so I can try to replicate the issue?\n. Strange, it looks pretty much aligned here:\n\n. Thanks\n. I'm afraid to get this wrong again, but I'm pretty sure the correct version is:\ncairo_set_source_rgba(cairo,\n                                (color >> (2*8) & 0xFF) / 255.0,\n                                (color >> (1*8) & 0xFF) / 255.0,\n                                (color >> (0*8) & 0xFF) / 255.0,\n                                (color >> (3*8) & 0xFF) / 255.0);\n. +1 for htonl\n. LGTM.\n. please run addr2line on the backtrace lines and post the result.\nYou can use this script to make it a bit easier. Just run:\n$ cat log | python addr2line_sway.py /path/to/sway\n. That's not right. The files/line numbers are missing. It should return something like this:\n```\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x427a3b]\n/home/moscar/projects/sway/sway/workspace.c:171\n[log.c:160] Backtrace: sway(container_under_pointer+0x1a8) [0x417ae7]\n/home/moscar/projects/sway/sway/container.c:335\n[log.c:160] Backtrace: sway(pointer_position_set+0x60) [0x41cd18]\n/home/moscar/projects/sway/sway/handlers.c:251\n[log.c:160] Backtrace: sway() [0x41be83]\n/home/moscar/projects/sway/sway/focus.c:26\n[log.c:160] Backtrace: sway(main+0x473) [0x423639]\n/home/moscar/projects/sway/sway/layout.c:336\n[log.c:160] Backtrace: sway(_start+0x29) [0x408489]\n/home/moscar/projects/sway/sway/commands.c:1844\n```\nbut with different line numbers.\n. @DaanDeMeyer yes, maybe that info is stripped from your executable. Could you try to build sway from source instead?\n. @DaanDeMeyer thanks. I also came across this bug myself after switching to tabbed layout. This should be fixed in #565.\n. > I have some thoughts on the implementation. I'm concerned about the performance of walking up the tree to find a stacked/tabbed parents somewhere.\n\n[...]\nand how stacked/tabbed is an explicit special case in many places.\n\nWe need some way to detect this, since tabbed/stacked is a special case, but it could possible be handled better by making a separate arrange_windows path for tabbed/stacked layout (would mean a tiny bit of code duplication), and have a flag set on the container/view which determines if it's in a tabbed/stacked layout or not. That flag could be easily updated in windows_arrange_r.\n\nI'm also not a fan of the approach to not drawing children's borders,\n\nI'm not sure I follow. Since we draw the borders in pre_render for a view, everything has to be rendered by the visible view. So there's no need to draw borders of invisible siblings/children.\n\n[...]\nI would prefer an implementation that, perhaps, would instead allow containers to have borders and code it to stop rendering borders when recursively laying out going into a stacked/tabbed container.\n\nI'm not sure what you mean. If you mean that the container could draw the tabbed/stacked titlebars then I don't see the benefit since the visible view has to render the border anyway.\n. Ok, cool.\nI have just pushed a commit removing the commented code you noticed above.\n. @crondog this is great. You just need to handle the titlebar (blue bg + lighter blue top/bottom line) the same as you handle the text. Right now they are moved down if you move the window past the top edge.\nAlso the bottom border seem to be cut off one border_thickness too early, try to use 10 pixel border to see this more clearly:\n\n(bottom edge of the output)\n. @crondog great, will merge when build passes.\n. Thanks\n. Can you post a screenshot of the issue?\n. Ok I see. I assume the problem is that the skype title isn't in UTF-8.\n@Cloudef what encoding is the title we get from wlc_view_get_title() in?\n. It's a bug in libinput: https://github.com/Cloudef/wlc/issues/126\n. I'm still not sure why we even want a buffer of more than 1024 bytes, but I guess someone could have some fancy device that can enter a really long password. I mean, you are not gonna type 1024+ keys on a normal keyboard :)\n. true\n. Yeah, it sounds like wlc is setting the wrong resolution (from the tty). However a bit strange that both screens would have a wrong resolution. Can you post the log you get from running sway -d 2> ~/sway.log just to see what resolution wlc chooses at startup?\n. What flags are you using to produce these warnings? If the flags are defined in a custom makepkg.conf, maybe you can post that?\n. The problem is that the default config file has $mod+s defined twice, so we need to find another default for either layout stacking or splith. i3 uses $mod+h for splith but that is used for focus left in sway, so I'm not sure what the best default would be?\n. @progandy I like the idea of using $mod+b for splith and keep the hjkl movement default in sway. What do you think about that approach @SirCmpwn?\n. As I understand from the man page (and the source) this is a runtime only command, to change gaps at runtime.\nIf you wanna set the default gaps, just use: gaps outer 0 and gaps inner 5\n. The error message could be better though.\n. I'm pretty sure those are generated by wayland-scanner from the xml files in protocols/.\n. Does $mod+\u00e9 work in i3? It's not recognized in sway because the keyname of \u00e9 is eacute in xkb.\n. Regarding $mod+\u00e9. i3 can't parse it either:\n2016-04-29 10:18:03 - ERROR: Could not translate string to key symbol: \"\u00e9\"\nSo I don't understand how it could work for you. The right thing is to use $mod+eacute.\n. Thanks!\nLGTM, but will let @SirCmpwn have a look.\n. Thanks. The break does indeed do the right thing here.\n. Damn. I don't have a workspace 10 so I didn't catch that the extra break did introduce a bug.\n@crondog what crashes do you see when running in x11?\n. Can you squash the merge commit?\n. Actually it is in i3 I see now. But not in the docs: http://i3wm.org/docs/i3bar-protocol.html\nBetter leave it.\n. This would be fairly easy to implement.\nHave you thought about how we could decide on the width of the tabs? I'm thinking it could be calculated based on the font size, so it scales with the rest of the sway UI, but it might look weird on different resolutions.\n. LGTM.\n. I don't know, I only thought it was checked when programs are spawned and when running a command with a criteria, neither of which should be affected by this?\n. Ok, I didn't know. But it should be easy to do here as well (though I don't wanna implement it in this PR).\n. sway should handle things in quotes as a single argument, so a path with spaces should work if it's in quotes. It's indeed a bug that it doesn't work.\n. Can you post a screenshot of this? I can't replicate this issue.\n. Awesome :+1: \n. There was a commit https://github.com/SirCmpwn/sway/pull/441/commits/96d787fc49738e70c10f50960459c1463a4ab148 making this possible, but it was part of a patchset which was never merged.\nThe code has changed a bit since then, but this method could be re-implemented and then a single socket would be enough.\n. I don't think this is the right approach. wlc should know that the swaybar (client) exists and sway should be able to use this info without getting a signal from swaybar.\n. I agree, it would be nice to make it a separate repo and package. I don't notice now because I have a decent connection. But when you are on a shitty connection like I was for the past few months then 10MB really is a lot :)\n@Hummer12007 is right, it will clone the whole history including the wallpapers, even if they are removed at some point. It would make sense to patch makepkg to not clone the entire history IMO.\nI have a CI server automatically building sway-git packages so cloning the whole repo is not a problem for me though :)\n. You just need to update your wlc-git package first, it's out of date. Good idea to always update it before updating sway.\n. Looks like your wlc is not up to date. Always remember to update wlc before sway.\n. :+1: \n. :+1: \n. can you post your config?\n. In my mind this is sort of against the philosophy of i3/sway. Wayland already gives you CSD for better or for worse, so you can just use the close button drawn by the clients if you want this feature.\n. My guess is this is in wlc, did you try to compare it to orbment?. Failing because json-c is newer in arch:\n-- Checking for module 'json-c=0.12.1'\n--   Requested 'json-c = 0.12.1' but version of json-c is 0.13\n-- Configuring incomplete, errors occurred!\nSee also \"/build/CMakeFiles/CMakeOutput.log\".\n$ make\nCMake Error at /usr/share/cmake-3.10/Modules/FindPkgConfig.cmake:415 (message):\n  A required package was not found\nCall Stack (most recent call first):\n  /usr/share/cmake-3.10/Modules/FindPkgConfig.cmake:593 (_pkg_check_modules_internal)\n  CMake/FindJsonC.cmake:19 (pkg_check_modules)\n  CMakeLists.txt:62 (find_package). Closed in favor of #1615  . Just a minor comment on style. Missing spaces between = :)\n. I have moved it down to the do-while loop, but I'm not sure what should be const?\n. numlen is defined in swaygrab/main.c, where should I put it for general use?\n. use config->current_bar to reference the correct bar.\n. No newline needed here :)\n. And here :)\n. should be bindsym instead of tray_padding.\n. Yeah I will move it to a separate function.\nShouldn't it be possible to not define any bars?\n. I just tried, it doesn't add a bar if you don't have a bar configured.\n. done\n. I don't know if this is the best approach, but what about adding a void* field to swayc_t which can be used for whatever, in this case it would point to:\nstruct swayc_output {\n    list_t *bar_pids;\n    pid_t bg_pid;\n    // other fields unique to a swayc_t of type C_OUTPUT\n};\n. Yeah that's probably better so we don't need to cast all over the place.\n. I assume the height parameter here is relevant as well.\n. I see, I think it is more clear with 0.\n. Yeah it's strange, but It's because gcc complains with error: a label can only be part of a statement and a declaration is not a statement if you have a declaration right after a case. I can move json_object *result; up to before the switch if you like.\n. Is this better?\n. I get a short flash of the new focused window, before the fullscreened regain focus. I wonder if it can be handled here, but it might have some other side effects.\n. Not like it's a big issue really, just noticed.\nLGTM.\n. This function is also in swaybar/render.c, maybe we should move it to util.h or something like that?\n. I had not considered that issue, so I'm actually not sure where to put it now. I bet people will complain if one thing becomes a hard dependency, so it should be put somewhere neutral.\n. I think the message here should just be Specify a config file since the default can be in a lot of different locations. The user can always refer to the man page for more information.\n. I feel like this could be used to crash swaylock, if you just fill it up until there are no more memory left.\nAlso, when do you need a password of more than 1024 bytes? Seems like a lot to enter on a keyboard. :P\n. The previous password should be freed before this, so it doesn't leak. (In case you make a new PR @gkbrk)\n. I think you would be better of using an array if you wan't to encode the output indices in the structure. A list is not really meant for that kind of thing, hence you end up doing all this :)\nYou could either create a fix sized array, limiting the number of outputs, or you could allocate it from registry->outputs->length.\n. Yeah, I have called it wayland compositor now.\nwl_display_connect expects XDG_RUNTIME_DIR but I guess we could change that. That's a different PR though, right? :)\n. Use sway_log(L_ERROR, \"...\"); instead of fprintf.\n. Just a minor comment, I guess most of the cairo stuff could be done once outside the loop, instead of doing the same drawing for every output.\n. Yeah, I think this could get stuck here with multiple outputs, if one call of wl_display_dispatch dispatches events for multiple windows.\n. It's commented out for that reason, I didn't know what it might break to remove it. The issue is that arrange_windows calls wlc_view_set_geometry at some point and a call to wlc_view_set_geometry triggers the handle_view_geometry_request, so you end up with the bug described in: #487 and this bug appeared with all floating windows with the border code.\nNow I know what it might break, so I can investigate. thanks :)\n. The border is freed here before it's calloced in create_border_buffer.\n. @SirCmpwn how does gnome-calculator freak out? It seems to work just fine when I make it floating. Also tried with your config, though I don't see a for_window rule in the config you linked on irc.\n. Ok, when spawned like that I also see it. It's definitely linked to this commented out code, and the border geometry logic. Also related to the firefox crash.\n. One line ifs should also have braces.\n. This won't work on big endian systems. The problem is that cairo writes to our border buffer in the order ARGB native-endian.\nThis will give us a border buffer with the order RGBA for little endian systems because of how we order the arguments in cario_set_source_rgba. But it will be RABG for big-endian systems. That's why we use two different cairo_set_source_rgba with different argument order depending on endianness.\n. Scratch that, I was wrong all along, and the cairo_set_source_rgba is also wrong..\nEdit: cairo_set_source_rgba (for big-endian) at line 20 is wrong.\n. ugly space before ';' :)\n. It should be possible to optionally define the alpha channel in the config (even though i3 doesn't support that).\n. This is a valid question, but should not be in the source, rather put it in the PR description so we can discuss it. :)\nI agree that the syntax for defining colors is very strange considering the rest of the syntax used in i3.\n. @fluxchief FYI we already do this for bar colors: https://github.com/SirCmpwn/sway/blob/master/sway/commands.c#L2800-L2827\n. I might be missing how this works compared to i3, but as I understand this is not possible in i3, so maybe it should default to false so it behaves as expected by default.\n. Move free to after sway_log.\n. better to use free_cmd_results() here.\n. wordfree() should be moved to before the if-statement, so it is called in all cases.\n. Hah, that's stupid. Should probably have been something like this: https://github.com/SirCmpwn/sway/blob/master/sway/commands/font.c#L15-L20\nBut it clearly doesn't make a difference, so the if statement should just be removed.\n. Does i3 do this, or why would you fall back to urgent_workspace_border ?\n. ",
    "crondog": "@kueea-yumi you can only change the font for the bar not global\n. I just tested with a color and image. I am able to type my password and get back in with no issue\n. Ergh what a derp. I thought I checked line 200. I'll take another look\n. Found the error. See https://github.com/Cloudef/wlc/pull/96\n. Ok ill close this since it's fixed :)\n. Should there be a swaybar/config.c file which loads in all of the configs or something else?\n. I have a solution to this but I don't think it is correct. Adding ipc_event_workspace(container, destination); at the end of move_container_to() gets the update happening.\n. The commit https://github.com/SirCmpwn/sway/commit/529ee83ef63d69f3cc045f2e9cc52c7ec2fe1334 doesn't fix this case (well for me at least)\n. Should be fixed now\n. Ah true\n. Fixed\n. There is no swaybar man page. There is an issue for it though https://github.com/SirCmpwn/sway/issues/375\n. Ah I think I know what you mean. A swaybar.1,txt ie the binary man page. That doesn't exist either\nfind . -name \"sway*.txt\"\n./swaymsg/swaymsg.1.txt\n./sway/sway.5.txt\n./sway/sway.1.txt\n./swaygrab/swaygrab.1.txt\n. Ok I can reproduce your issue. When you have term1 opened in fullscreen mode, then open term2 it gets put behind term1, however term2 has focus. This means that when you press mod+f it is fullscreening term2.\nNot sure what the best way to handle this situation is. I tested this in i3 and found that if i have a fullscreen term, I am unable to spawn a new term. I don't really agree with that.\nTwo alternatives that I can see are: If in fullscreen mode, make the new view have fullscreen or if in fullscreen return focus to the original fullscreen view.\n. I did a similar test with bindsym XF86AudioRaiseVolume exec $term and if I hold down XF86AudioRaiseVolume, heaps of terminals spawn. Is amixer working correctly?\n. Having something subscribed and listening to these events them is the same as running something like xbindkeys. Both capture key strokes and require the user to give access. If the user doesn't give access then you are compromised anyway\n. Shouldn't the directory be share/zsh/site-functions as that is where third party completions go\n. Thanks for looking into this. So far so good :)\n. A little more info. It only happens with i3status and conky. Using the inbuilt status command works ok...\n. So inside sway if I open termite (native wayland) and run swaymsg i get { success : true}. If i use st (xwayland) and run swaymsg I get sway no socket detected\n. I thought it might have been because I have xorg in tty1 but I tried just with sway and no xorg running at all and it still happens.\n. Ok I know how to reproduce.\nOpen sway spawn a terminal with tmux: st -e tmux\nExit sway without closing st. Just mod+shift+e\nCheck the processes. You should see tmux still running.\nRun sway again.\nOpen terminal\nRun swaymsg and it wont work\n. Hmm I would have thought that tmux would have been killed when I exit sway.\n. Looks ok and it didn't crash when I ran it :+1: \n. Solid black should be swaylock --color #000000FF so it will play nice with cairo_set_source_u32\n. Just a few thoughts. Which is the easiest to implement right now and what\nwould be the performance of each? We might not know that yet though\nOn 26 Jan 2016 8:19 am, \"Drew DeVault\" notifications@github.com wrote:\n\nDiscussion on how best to implement window borders. Two main choices:\nDraw them with GL in wlc's pre-render hook\nCreate rgba surfaces for each window that sit behind each window and draw\nthe border around it\nI'm really not convinced either way is the obvious solution. Discuss.\n\u2014\nReply to this email directly or view it on GitHub.\n. You can specify color in gl too :)\nOn 26 Jan 2016 8:36 am, \"Seth Barberee\" notifications@github.com wrote:\nWith rgba surfaces, wouldn't that mean that the user could specify the\ncolors too and hence a colored border? I think that would be good choice in\nterms of customization...\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/477#issuecomment-174674066.\n. We can use Cairo for that can't we\nOn 26 Jan 2016 8:42 am, \"Drew DeVault\" notifications@github.com wrote:\nText rendering in GL (for window titles) is a pain in the ass, fwiw\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/477#issuecomment-174678419.\n. Hmm most wayland client code/tutorials that I have seen all use egl and cairo and they all run ok\n. Would the surface method be something like \n- Create a surface and attach to a view\n- When rendering the view also render the surface\n. I am leaning towards the pre hook method as we only need to calculate and draw the border instead of dealing with creating/linking/moving/drawing another object\n. Sure\n. It's in the code\n. Steps to reproduce:\n- Make sure you have commit https://github.com/SirCmpwn/sway/commit/73ec01d8541a6a05ff253e2b1934d53932e26508\n- Open a terminal\n- Run swaylock -c ff00ff11\n- You now have a semi transparent purple lockscreen over the whole screen, but the terminal is not a single full view now. It has been moved to the left and half the size\n. Just a couple of things. What is the swaylock command you are running? Does this happen with 1 output? Does this happen when running sway inside X? I don't have a dual setup so I can't reproduce\n. Forgot to ask before but could you also post a full log from the time of launch to after you unlock?\n. An update on this: If lxappearance is set to floating, and then you open the font selection you are able to resize and click the buttons\n. It looks like the floating view has an offset of the parent view origin. \n. But the borders are correctly calculated\n. Doing the below will set the floating view to the parents x,y. Not sure how to fix it yet though\n\n```\ndiff --git a/sway/container.c b/sway/container.c\nindex 21a929b..75eb8c1 100644\n--- a/sway/container.c\n+++ b/sway/container.c\n@@ -311,8 +311,8 @@ swayc_t *new_floating_view(wlc_handle handle) {\n        wlc_view_get_visible_geometry(handle, &geometry);\n    // give it requested geometry, but place in center\n\n\nview->x = (swayc_active_workspace()->width - geometry.size.w) / 2;\nview->y = (swayc_active_workspace()->height- geometry.size.h) / 2;\nview->x = 0;\nview->y = 0;\n        view->width = geometry.size.w;\n        view->height = geometry.size.h;\n``\n. Hmm interesting. That sounds like a better idea. I'll need to look into protocol extensions over the weekend and report back\n. Thanks for the tip\n. Erg. Can't believe i did that\n. Shouldn't these be in separate commits?\n. @mikkeloscar good catch. I was testing this with my terminal which ended up covering the titlebar thus making it look like it worked\n. Woo hoo\n. I can reproduce by opening 11 windows. Notice that the width is 4294967292 for some of the windows which is clearly incorrect. Could you runWLC_DEBUG=xwm sway -d` and get those logs to see if you get something similar with the abnormal width\n\nfocus:R      |(0x633b20)(p:(nil)   )(f:0x14535a0)(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)                                                                            [428/1843]\n|focus:X     |(0x14535a0)(p:0x633b20)(f:0x145fbb0)(h: 1)Type:op  |layout:-    |w: 860|h:1070|x:   0|y:   0|g: -1|vis:t|children: 1|name:WLC-1\n|-focus:W    |(0x145fbb0)(p:0x14535a0)(f:0x1499070)(h:-1)Type:ws  |layout:Horiz|w: 760|h: 951|x:  50|y:  50|g: -1|vis:t|children:11|name:1\n|--focus:X   |(0x146ff50)(p:0x145fbb0)(f:(nil)   )(h: 2)Type:view|layout:-    |w:  66|h: 951|x:  50|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0x14708e0)(p:0x145fbb0)(f:(nil)   )(h: 3)Type:view|layout:-    |w:  66|h: 951|x: 116|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0x1475680)(p:0x145fbb0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:  67|h: 951|x: 182|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0xfd9cb0)(p:0x145fbb0)(f:(nil)   )(h: 5)Type:view|layout:-    |w:  67|h: 951|x: 249|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0xfda980)(p:0x145fbb0)(f:(nil)   )(h: 6)Type:view|layout:-    |w:  67|h: 951|x: 316|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0xfd9f50)(p:0x145fbb0)(f:(nil)   )(h: 7)Type:view|layout:-    |w:  70|h: 951|x: 383|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0xfdc9a0)(p:0x145fbb0)(f:(nil)   )(h: 8)Type:view|layout:-    |w:  70|h: 951|x: 453|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0xfdb540)(p:0x145fbb0)(f:(nil)   )(h: 9)Type:view|layout:-    |w:  70|h: 951|x: 523|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0x149ae50)(p:0x145fbb0)(f:(nil)   )(h:10)Type:view|layout:-    |w:  71|h: 951|x: 593|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:X   |(0x179e880)(p:0x145fbb0)(f:(nil)   )(h:11)Type:view|layout:-    |w:  73|h: 951|x: 664|y:  50|g: -1|vis:t|children: 0|name:st\n|--focus:K   |(0x1499070)(p:0x145fbb0)(f:(nil)   )(h:12)Type:view|layout:-    |w:  73|h: 951|x: 737|y:  50|g: -1|vis:t|children: 0|name:st\n[main.c:43] [wlc] -> Configure x11 window (25165825) 28x922+772,69\n[handlers.c:343] geometry request for 12 644x388 @ 772,69\n[main.c:43] [wlc] -> Configure x11 window (25165825) 28x922+772,69\n[main.c:43] [wlc] XCB_FOCUS_OUT\n[main.c:43] [wlc] XCB_FOCUS_IN (25165825) [25165825]\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (25165825)\n[main.c:43] [wlc] -> Configure x11 window (4194305) 21x922+60,69\n[main.c:43] [wlc] -> Configure x11 window (6291457) 4294967292x922+151,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\n[main.c:43] [wlc] -> Configure x11 window (8388609) 4294967293x922+217,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\n[main.c:43] [wlc] -> Configure x11 window (10485761) 4294967293x922+284,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\n[main.c:43] [wlc] -> Configure x11 window (12582913) 4294967293x922+351,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 11\n[main.c:43] [wlc] -> Configure x11 window (14680065) 0x922+418,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 2\n[main.c:43] [wlc] -> Configure x11 window (16777217) 0x922+488,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 2\n[main.c:43] [wlc] -> Configure x11 window (18874369) 0x922+558,69\n[main.c:39] [wlc] xwm: function set_geometry at line 307 x11 error code 2\n[main.c:43] [wlc] -> Configure x11 window (20971521) 1x922+628,69\ntresize: error resizing to 0x57\n[main.c:43] [wlc] -> Configure x11 window (23068673) 3x922+699,69\ntresize: error resizing to 0x57\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (4194305)\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (25165825)\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (20971521)\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (23068673)\n[handlers.c:343] geometry request for 2 21x922 @ 60,69\n[main.c:43] [wlc] -> Configure x11 window (4194305) 21x922+60,69\n[handlers.c:343] geometry request for 10 1x922 @ 628,69\n[main.c:43] [wlc] -> Configure x11 window (20971521) 1x922+628,69\n[handlers.c:343] geometry request for 11 3x922 @ 699,69\n[main.c:43] [wlc] -> Configure x11 window (23068673) 3x922+699,69\n[handlers.c:343] geometry request for 12 28x922 @ 772,69\n[main.c:43] [wlc] -> Configure x11 window (25165825) 28x922+772,69\nsway: wlc/src/compositor/output.c:142: blit: Assertion `b->x - a->x >= 0' failed.\n[log.c:150] Error: Signal 6. Printing backtrace\n[log.c:150] Error: Signal 6. Printing backtrace\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x4276c8]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x33330) [0x7f66b3004330]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7f66b30042a8]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(abort+0x16a) [0x7f66b300572a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x2c1b7) [0x7f66b2ffd1b7]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x2c262) [0x7f66b2ffd262]\n[log.c:160] Backtrace: wlc/src/libwlc.so.0(+0xff21) [0x7f66b508bf21] src/compositor/output.c:143\n[log.c:160] Backtrace: wlc/src/libwlc.so.0(+0x102e0) [0x7f66b508c2e0] src/compositor/output.c:204\n[log.c:160] Backtrace: wlc/src/libwlc.so.0(+0x10b1c) [0x7f66b508cb1c] src/compositor/output.c:329\n[log.c:160] Backtrace: wlc/src/libwlc.so.0(+0x10fb4) [0x7f66b508cfb4] src/compositor/output.c:397\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(+0x9157) [0x7f66b47b8157]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) [0x7f66b47b8832]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7f66b47b6ee5]\n[log.c:160] Backtrace: wlc/src/libwlc.so.0(wlc_run+0xc3) [0x7f66b50a7499]\n[log.c:160] Backtrace: sway(main+0x473) [0x42337f]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7f66b2ff1710]\n[log.c:160] Backtrace: sway(_start+0x29) [0x408049]\n. This commit breaks running sway inside x11 and it also makes the workspaces default to 10 when running standalone\n. Ok well the not working inside x11 only sometimes happens but it still defaults to workspace 10\n. It happened inside workspace_next_name and it only happened once. I closed my terminal before i could copy the backtrace. I can't seem to reproduce the crash. \n. lgtm\n. I wasn't really sure how to do this, as we need the window created before we can find the height of the text when no height is specified. The 30 being passed here is overwriten later before the window gets rendered anyway so it doesn't matter. It's a bit of a catch 22. I suppose I can change it to 0 to make it cleaner\n. ",
    "aouelete": "It seems to work alright for me also.\n. Ok, makes sense\n. I'm pretty sure this is fixed now\n. Thanks, looks like it is fixed\n. I've never used this feature in i3. Sometimes I think that it might be useful, but so far I have never found an actual use for it. So, I don't really care if it is implemented in sway.\n. Thanks! It works now.\n. Strange ...\nIt's happening to me both on wayland and X. I also tried it with a wayland window (termite) and an X window (thunar).\n. It looks like the original issue is fixed, but there are still problems.\nWhen I toggle floating mode on the second window twice, the window disappears, but it is still possible to recover it by making the invisble window tiling again.\nAlso when I then close the window sway crashes.\nLog: log.txt\n. I just tested this and was able to use both jpg's and png's for the wallpaper.\nOne thing that I have noticed is that I am unable to change the background on the fly, once I set it in the config file, I can't change it.\n. I do have the latest version of sway and this is what I got:\n```\nBacktrace: sway(error_handler+0x2b) [0x41b88b]\n/home/aaron/devel/sway/sway/output.c:135\nBacktrace: sway(free_flat_list+0x6) [0x41be66]\n/home/aaron/devel/sway/sway/resize.c:67\nBacktrace: sway(read_config+0x402) [0x40cc12]\n/home/aaron/devel/sway/sway/commands.c:2111\nBacktrace: sway(load_config+0x79) [0x40ce99]\n/home/aaron/devel/sway/sway/commands.c:2161\nBacktrace: sway() [0x40acb7]\n/home/aaron/devel/sway/sway/commands.c:1483\nBacktrace: sway(handle_command+0x1a3) [0x407003]\n/home/aaron/devel/sway/sway/commands.c:448\nBacktrace: sway() [0x4139a0]\n/home/aaron/devel/sway/sway/focus.c:83\nBacktrace: sway(main+0x323) [0x406383]\n/home/aaron/devel/sway/sway/commands.c:210\nBacktrace: sway(_start+0x29) [0x4063c9]\n/home/aaron/devel/sway/sway/commands.c:215\n```\n. I'll see what I can figure out when I get home.\nI might have actually used the wrong sway binary ...\n. Sorry about that, it does look like I used two different sway binaries.\nUsing the manually compiled binary, this is what I got:\n```\nBacktrace: bin/sway(error_handler+0xaa) [0x41e144]\n/home/aaron/devel/sway/common/log.c:147\nBacktrace: bin/sway(free_flat_list+0x3d) [0x41e6ca]\n/home/aaron/devel/sway/common/stringop.c:87 (discriminator 1)\nBacktrace: bin/sway() [0x40daee]\n/home/aaron/devel/sway/sway/config.c:57\nBacktrace: bin/sway() [0x40dc39]\n/home/aaron/devel/sway/sway/config.c:83 (discriminator 3)\nBacktrace: bin/sway(read_config+0x39d) [0x40e50c]\n/home/aaron/devel/sway/sway/config.c:319\nBacktrace: bin/sway(load_config+0xfc) [0x40e144]\n/home/aaron/devel/sway/sway/config.c:210\nBacktrace: bin/sway() [0x4095d3]\n/home/aaron/devel/sway/sway/commands.c:1099\nBacktrace: bin/sway(handle_command+0x2ef) [0x40d411]\n/home/aaron/devel/sway/sway/commands.c:2299\nBacktrace: bin/sway() [0x414ca4]\n/home/aaron/devel/sway/sway/handlers.c:374\nBacktrace: bin/sway(main+0x3b8) [0x41aee0]\n/home/aaron/devel/sway/sway/main.c:203\nBacktrace: bin/sway(_start+0x29) [0x405e99]\n??:?\n```\nDoes this make any more sense?\n. Has anyone managed to get tap-to-click working on a Synaptics touchpad?\nRunning swaymsg -t get_inputs gives me:\n[ { \"identifier\": \"0:1:Power_Button\" }, { \"identifier\": \"0:6:Video_Bus\" }, { \"identifier\": \"3034:22297:Integrated_\" }, { \"identifier\": \"1:1:AT_Translated_Set_2_keyboard\" }, { \"identifier\": \"2:7:SynPS\\/2_Synaptics_TouchPad\" }, { \"identifier\": \"2:10:TPPS\\/2_IBM_TrackPoint\" }, { \"identifier\": \"6058:20564:ThinkPad_Extra_B\" } ]\nAnd I have this in my sway config:\ninput 2:7:SynPS\\/2_Synaptics_TouchPad {\n    tap enabled\n    natural_scroll enabled\n}\nbut this doesn't change anything.\n. Oh, ok. It seems to be working now. Thanks!\n. It seems like I am still experiencing this issue with the latest version.\nHere's a screenshot:\n\n. It looks like this works :smile: \n. Done.\n. I have been using light without any problems. \nYou can always use /sys/class/backlight, see https://wiki.archlinux.org/index.php/Backlight.\n. ",
    "SageEx": "Sorry to ask like this, but when will the tabbed/stacked layout be implemented ? Or, is it waiting for some other feature. I'm asking because I want to use sway as my daily wm , but these features are essential.\nI'm sorry to nag, but just an expected timeline will be fine.\n. Thanks.\nOn Fri, Mar 25, 2016 at 4:29 PM, Drew DeVault notifications@github.com\nwrote:\n\nTabbed and stacking layouts are blocked by window borders, which are a WIP.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/2#issuecomment-201240130\n. \n",
    "nicman23": "A bit minor and not sure if relevant, but changing the cursor (that swaybar and swaybg) uses should be supported to much i3 feature parity. For now it is set to default what wlc uses (?) and i cannot for the life of me find where it is installed in my system...\n. well sway does not write anything when i issue sway -V -d > txt :/ . Here is my config file\nconfig.txt\nIgnore the swaybar_command, i was testing things\n. will do and sorry, missed that part of the faq\nedit: give me 5 i m recompiling\n. logs:\nsway.txt\n. yes\nedit : versions \nlocal/wlc-git r910.5deece7-1\nlocal/sway-git r1441.0d4c31e-1\nalready checked - they are the same \n. huh there is no SWAYSOCK in my env and find /run/user/1000/ -name 'sway*' has no results\n. sorry missclick\n. sigh made a temporary user and it worked. Then with the original user i run bash (was using zsh) and sway and it worked and of course works with zsh (having changed nothing) .... \nTesting now on a second pc with the same problem (what even - i cant)\n. Well this was a massive waste of time for everyone.... Turns out i had an line in my zshrc that read\nexport SWAYSOCK=/run/user/1000/ -name 'sway*'\nwhich of course did not do anything if sway was not up\nthe line was for controlling sway from other ttys / ssh. It appears that sway did not like it.\nI was running with this line for some days now without any problems, as to why it appeared now, i do not know.\n. ",
    "Hummer12007": "resize set [width] [height] wasn't mentioned on the list.\nIt resizes a floating window to specified dimensions in i3 (see https://git.io/vwl3L for the spec and https://git.io/vwlse for the impl).\n. Config options must be somehow renamed, too, in order to make sense though.\n(pango_markup  doesn't)\n. Unable to reproduce in recent head too.\n. @person666 you need to take a look at your /sys/class/leds and set the brightness directly via sysfs.\nI've written https://github.com/Hummer12007/brightnessctl for myself (it's probably crap code, worked for me though, but ymmv). It might help you (esp. the -l option)\n. git-bisect(1) showed that this was probably introduced by 0f1859ed.\n. CC @SirCmpwn \n. Sway idles at up to 50% usage in some cases for me too, although killing the bar does reduce cpu usage, it is not that significant.\n@N8Fear statusbar just renders the last line (or JSON block or whatever) output by a program. Sway has no control over the update rate whatsoever.\n. @deklov there's horizontal scrolling too (axis == 0 -> vertical, 1 -> horizontal)\n. It doesn't\n. Gaps are 2x bigger on hidpi (should be scaled).\n. Gnome is planning to implement fractional scaling: https://blogs.gnome.org/mclasen/2017/05/19/fractional-scaling-goes-east/. It's not like it'd make any difference, when you clone the repo (with full history contents).\n. Maybe it has something to do with https://github.com/SirCmpwn/sway/blob/master/sway/focus.c#L118 (though it'd be really strange, unless hardenning stuff in the libraries does that on purpose when it doesn't like something in the format string or has a bug).\nUPD: Filed a pr to address that, as it is incorrect anyway.\n. RIP, it's sometimes useful to try and compile stuff. (and it shall be fine now)\n. You want me to put in a bunch of braces?\nUPD: put them in (done).. One thing bothered me, when I took a glance: this will probably break clients on freebsd. A default policy to allow everything may be required there.. Do you have virtual/libudev?. @SirCmpwn, mark it as fixed, for the time being.. You do not need to enable any caps for SUID sway. (pages @SirCmpwn). Mark /usr/bin/sway with paxctl? (if you're talking about hardened (grsec) users). Do you have dev-libs/libinput installed?\nPost yout emerge --info output as well.\nP.S. Gentoo build issues are to be filled at bugs.gentoo.org.. And virtual/libudev. If you have, then try re-emerging wlc and then sway.. > If you have, then try re-emerging wlc and then sway.. Does wlc build show any errors?. Something like that.. It's ok, I have the same.. It might be caused by -Wl,--as-needed. Try removing it from your CFLAGS. edit your /usr/portage/make.conf. Or from LDFLAGS.... Ah, it's introduced by sway.... It tries to build with the static wlc lib, which requires explicitely specifying -ludev. Try installing dev-libs/wlc without the static-libs USE flag.. I wasn't the original author. Besides, it might've worked back then. I'll try making it work soon.. @DmitryHetman Looked into it some time ago. Didn't notice an obvious way it to fix it. Building static wlc just marks symbols from shared libs as missing, so, for sway to link, these libraries have to be specified explicitely in the LDLIBS. It is plausible that the current build works on some configurations (when all packages have static libs installed), so I won't add a blocker either.. Nope, didn't feel too well yesterday to look into it, but apparently resolve_path somehow failed. Or not.. (At the very least function call was in the wrong place). Ok now.. It's likely that by stupid gentoo bullshit you mean not installing swaylock, which is a valid choice.. There's an issue btw with sway segfaulting if a security policy target does not exist.. Same for me: caps lock has any effect only after another modifier key is pressed.. @4e554c4c rather than NULL, it was a dangling pointer for me, iirc, as there was no NULL pointer dereferencing.. - [ ] uk_UA:\n  - [x] README (#1325) @Hummer12007 (not up for anything else)\n  - [ ] Man pages:\n    - [ ] sway(1)\n    - [ ] sway(5)\n    - [ ] sway-bar\n    - [ ] sway-input\n    - [ ] swaymsg\n    - [ ] swaygrab\n    - [ ] swaylock\n    - [ ] sway-security\n  - [ ] FAQ. @ilyaluk what was the rationale behind the 4MB limit on replies? Screenshots do not fit.. https://github.com/Hummer12007/sway/blob/9e36204b230fb9ecc7eaab55c4eacb457e071cdd/sway/handlers.c#L580 is called with the NULL pointer (for fullscreen containres) otherwise (a user had this problem (sway crashing on unlocking swaylock), which is fixed by this commit, without breaking rearranging on destroying fullscreen views).. @SirCmpwn ?. Do not use root.. @Vadimshv28, \u0437\u0430\u0439\u0434\u0438 \u0432\u0435\u0447\u0435\u0440\u043e\u043c \u0432 irc-\u043a\u0430\u043d\u0430\u043b.. \u0425\u043c, \u0430 \u043f\u043e\u0447\u0435\u043c\u0443 \u0443 \u0442\u0435\u0431\u044f \u0441\u0442\u0430\u0440\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f sway? (0.15.0). \u0412 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u043e\u0440\u0438\u0438 \u0436\u0435 0.15.1. @comunity-tools\n0) Do you have mesa installed?\n1) emerge --info\n2) emerge --info sway. Why not /usr/libexec?. Thanks! FTR: it's commonly called libexecdir (the variable).. Yeah, but why should you add a default clause? The axis enum in libinput/wayland has only two directions.\n. Needs to be static inline (GNU semantics).. >This fork. No, it was required because a suid binary would not gain all caps as effective, and besides, all the privileged stuff is dealt with in a child process of wlc (forked in wlc_init, so it keeps everything), so it isn't.. sway_log(L_ERROR, \"%s\", subscribe_json);. Isn't the first clause implied by the second one?. Sorry, got confused. It's different fields.. ",
    "tevaughan": "I'm a Debian user who only just yesterday installed and started using i3. I'm liking it. Today, I started wondering about Wayland and stumbled here. This is amazing. Not that I know anything about Wayland except that it's supposed to be the next-generation windowing system following X.\nSo I have two questions, only the second of which is directly related to sway:\n1. Is it already reasonable to run Wayland these days and have a usable system for getting regular work done, perhaps by way of an X server running on Wayland so that one could run non-Wayland things (Firefox, XTerm)? I notice the xwayland package in Debian but have never played with it.\n2. Is there among the folks here any Debian developer who might make a deb package for sway et al. and get them into Debian unstable, so that one could just install the package and then log into wayland+sway+xwayland via lightdm or some such mechanism?\n. ",
    "mmlb": "@SirCmpwn is font actually supported? swaymsg -t command font Hack 12 returns success but nothing changes.\n. @SirCmpwn is font actually supported? swaymsg -t command font Hack 12 returns success but nothing changes.\n. oic. I'ts not documented in sway.5.txt, shall I open an issue or PR?\n. oic. I'ts not documented in sway.5.txt, shall I open an issue or PR?\n. @mikkeloscar font for window titles and such, not just bar.\n. @mikkeloscar font for window titles and such, not just bar.\n. ahh yes that would explain why I did not see an update after the command returned succes, I did not force a render. So this is in fact just missing documentation. Possibly with a note that it does not take effect until something forces a render?\n. ahh yes that would explain why I did not see an update after the command returned succes, I did not force a render. So this is in fact just missing documentation. Possibly with a note that it does not take effect until something forces a render?\n. Sure, but I'd think a PR for doc update now is better than undocumented font until rerender is done. Unless rerender is super quick, though I wouldn't be able to take care of the rerender case (probably).\n. Sure, but I'd think a PR for doc update now is better than undocumented font until rerender is done. Unless rerender is super quick, though I wouldn't be able to take care of the rerender case (probably).\n. np, thanks for sway!\n. np, thanks for sway!\n. ",
    "Hi-Angel": "What about transparency? For X11 it was done with a separate compositor, e.g. Compton, but what now about Wayland? I didn't see it in feature list, perhaps am I misunderstand something about how it is supposed to work?\nFWIW, besides being a fancy, tiling is uncomortable to use without effects like fading or transparency (of inactive windows), because otherwise the focus placement upon switching a desktop is not immediately obvious.\n. Minimal steps to reproduce would help. I've no idea how font could be changed with swaymsg or i3-msg, and google only gives font-configuration through files, which is how I did it with i3 either. My best guess a i3-msg \"font pango:Hack, FontAwesome 9\" didn't work.\n. > Right now we restart the swaybar process whenever we reload the config, which to be honest I'm entirely okay with.\nSo, if I understand correctly, the original problem of font not being changed is have been solved, by making Sway to restart swaybars upon config reload, right? I.e. the issue can be closed.\n\nThis ticket would propose instead sending the reload signal over IPC and having swaybar pull down the new config.\n\nI looked at the code, and it seems currently the communication channel between Sway and its bars is closed at invoke_swaybar(). Making bars to get reloaded instead of being restarted requires to store the pipe descriptors somewhere in Sway. I'm not seeing much point in doing this, given reload of configs happens rarely enough to consider restart of bars a no-op.\n. @SirCmpwn could you please link the issue?. I've heard alike somewhere, but recently when I had to refer the problem myself, I couldn't find anything on wlc or sway github, or anywhere, as if I imagined the discussion I saw.. @SirCmpwn well If the problem is just that, then Gnome already has the daemon (I just checked: the problem did not reproduce in gnome-on-wayland), and the problem again boils down to Sway: why doesn't Sway use this daemon?. Could you please elaborate?. So you don't know for sure\u2026 Anyway, somewhere should be the issue opened, to refer to. Because XWayland isn't going anywhere soon. E.g. I feel, it gonna take a long time for Wine to get ported.\nThen, if not Sway, where should I open a bug for this? XWayland project? Anything else?. > There is no primary clipboard in Wayland.\nThis is untrue. I remember there was a discussion about adding clipboard to the protocol. And this was added \u2014 again, I just checked in gnome-on-wayland, primary selection works.. > While support from wlc/sway is certainly not expected\nI have to disagree, it's one of showstoppers so far to migrating to sway.. @SirCmpwn thank you :\u0437 Not in the close time though because I have a real big TODO, but anyway.\nBy the way, I remember a talk on #wayland irc about removing all the \"gtk_*\" prefixes from the protocol to abstract it. Idk why wasn't it done yet. Though I don't have an idea why would anybody care about the names either\u2026. @TapioT just to be sure, are you saying about primary clipboard, or secondary one?. @TapioT I just tested, it didn't work. Here're my step-by-step actions, in case you'd have some idea what gone wrong:\n\nI switched to a virtual terminal\nExecuted GTK_IM_MODULE=fcitx QT_IM_MODULE=fcitx sway\n(sway started) I ran konsole, and started fcitx -d there.\nIn another tab I ran both gnome-terminal and gedit\nI selected a text in gnome-terminal\nI pressed with middle mouse into gedit. Nothing get pasted.. @TapioT by the way, this issue is specifically about pure wayland apps, for XWayland-specific clipboard problems there's another bugreport.. @fpqc I've chosen gnome-terminal just because it's a pure wayland app. If you've another in mind (as you said that st didn't work under sway), I can test it \u2014 but it is very unlikely that anything at all would change, because if you've read messages higher: primary clipboard just not implemented yet. It's just so happened that upon building Wayland protocol devs forgot it, and then Red Hat added primary clipboard as an afterthought extension. As of writing these words AFAIK there's only one mature enough Wayland-compositor to have everything including primary clipboard \u2014 Gnome/mutter.. @fpqc terrible idea, are you serious? That \"terrible idea\" is the thing that makes me swear every time someone asks me to sit down before PC with Windows to help with something, and I reflexively select text in text-process/editor/widget/anything, and especially putty (where they on Windows had to hack around the missing primary clipboard with something like just copying any selection either on selection, or on press mouse-2).\n\nPrimary clipboard allows one to optimize their workflow so that you don't have to press additional keys. E.g. just now I'm helping a buddy, and he pasted an error in the chat, and I use primary clipboard to paste part of the text into a terminal.\nAren't you're using a tiling WM? If you're, I wouldn't expect you to question a necessity of an optimized workflow.\n\nDrag-selection in terminal emulators should save text to the clipboard in Wayland\n\nThat would be horrible. Once I had experience of occasionally turning on some option in klipper, that made him to save every selected text into clipboard. I couldn't find anything I explicitly copied, that was actually a mess.. @fpqc well, I am not sure, but if you want examples when it is necessarily: copy a snippet from StackOverflow, copy a snippet from a blog, copy a code from an article, copy ip address from a terminal to a widget, copy a text from lowriter to a mail, copy a text from a mail to lowriter. Literally everything.\nIt's possible that you don't know \u2014 because when I didn't know, I also though \"what a stupid idea about primary cliboard\" \u2014 how it works. It does not copy anything when you select a text. I.e. when you selected a bunch of text, nothing happens. The copy only happens when you press the middle mouse button, not earlier.. Could somebody briefly outline what to look at?\nAm I correct that \"windows\" in the code are wrapped into wlr_box?\nWhere or how \"keyboard focused window\" is implemented? (as I recently learned, currently focused window is not necessarily the one receiving keyboard input \u2014 does that need to be changed btw?) \n. Some status update:\nSo far I figured:\n\nA window is represented by sway_view, so I need to keep layout state there\nAn active layout seems to be stored in an opaque struct xkb_state; with bunch of other stuff such as enabled LEDs and pressed keys.\nIt seems, layout change is not handled by sway at all, but rather by libxkbcommon. I.e. I got an impression that sway knows nothing about current keyboard layout.\n\nMy current problems:\n\nHow to get notified of layout change.\nHow to extract the new layout (to store it into sway_view).\n\nHow to change layout (e.g. when input focus changed from one sway_view to another).\n. My work-in-progress branch. TODOs:\n\n\n\u2713 SOLVED Where to put the code to stash keyboard layout when keyboard focus changes from one sway_view to another? I'm guessing it's probably the same place where I'm restoring layout (seat_send_focus()), then I need to figure out, how to get the previously focused sway_view.\n\n\u2713 SOLVED How a configuration option to enable it should look like?\nThe xkb_layout_index_t is probably specific to a xkb_state, hence I need to store it for every keyboard device.. I kind of stuck with the following question: after I updated xkb_state with new layout, I need to forward the update down the stack to change state of LEDs (if needed) and probably something else (not sure yet what is exactly, but without that the next keypress uses old keyboard layout).\n\nSo I did some research with debugger, and came to conclusion that physical keyboard state update is done by wlroots. However I didn't see a function that simply makes update, given a changed xkb_state. Do I need to extract that functional, or am I missing something?\n\nSolved by using wlr_keyboard_notify_modifiers() to set keyboard layout.. So, for the most part I've figured how to do it (I'll document it when it's complete, but basically one have to use i3ipc-python library, which needs to be modified to search for sway instead of i3; and then bind a small function to focus event to traverse windows in search for unfocused ones). One thing I don't see is: how to apply opacity command to a particular window? Looking at opacity.c it takes just a single argument, the opacity value.\n. But which criteria do I have to use? There doesn't seem to be \"focused\" criteria \u2014 do I need to extract window id in python script, and then issue a command for that id? Is that id unique?. Thank you all!\nSo, in short, the steps are:\n\nInstall via package manager or pip the i3ipc-python library.\n\nFind in the file i3ipc.pyof its installation the line:\n    python\n    ['i3', '--get-socketpath'],\nand replace with \npython\n['sway', '--get-socketpath'],\n3. run the following script:\n```python\nimport i3ipc\nipc = i3ipc.Connection()\ndef on_window_focus(ipc, e):\n    for c in ipc.get_tree():\n        if c.focused:\n            c.command('opacity 1')\n        else:\n            c.command('opacity 0.8')\nipc.on(\"window::focus\", on_window_focus)\nipc.main() # enter command loop\n```\n\n\ngotchas:\n* --get-socketpath of sway only works within its session, so be sure to execute it from there.\n\nI'll make a PR to have it in Sway documentation, but I'll probably get to that around next weekend.\n. Good point, will do.. > I use i3ipc-python on sway without any patches...\nOh, it's probably because sway sets SWAYSOCK variable, which is respected by i3ipc-python. Granted, I didn't check it because the analogous I3SOCK is never set by i3 themselves, and I thought it works the same for sway. Oh, well.. As changing wiki does not require PRs, I'm posting a text here, and if nobody has any objections I'm planning to add it somewhere around tomorrow.\nAs ATM there's just one effect, I'd create a new page Transparency with following content:\n\nOn X11, transparency of inactive windows required a compositor, like compton, compmgr, etc. Since on Wayland sway is the compositor, it's implemented here.\nInactive windows can be made transparent by binding opacity \u03b1 commands to focus events, where \u03b1 is the opacity value. This can be accomplished with a simple script. An example with python:\n\nInstall from a system package manager or pip a python library to talk to sway through i3 ipc protocol, i3ipc-python.\n\nSave the following as inactive-windows-transparency.py:\n    ```python\n    import i3ipc\nipc = i3ipc.Connection()\nprev_focused = None\nfor window in ipc.get_tree():\n    if window.focused:\n        prev_focused = window\n    else:\n        window.command('opacity 0.8')\ndef on_window_focus(ipc, focused):\n    global prev_focused\n    if focused.container.id != prev_focused.id: # https://github.com/swaywm/sway/issues/2859\n        focused.container.command('opacity 1')\n        prev_focused.command('opacity 0.8')\n        prev_focused = focused.container\nipc.on(\"window::focus\", on_window_focus)\nipc.main()\n``\n3. Add to autostartexec --no-startup-id python ~/Path-to-script/inactive-window-transparency.py`\n\n\n(upd: removed unnecessary comment, and fixed library name i3ipc\u2192i3ipc-python).. Sure, will do. I was thinking too that it would be nice to have such scripts somewhere in source repo, so people could fix bugs in them if they found something. Not to say they can't do it in wiki, just git-repository has a better interface for it.. @SirCmpwn what's the usecase of not having that behavior by default?. @SirCmpwn why did you close it? Shall I open a separate issue, unrelated to swayidle, on not being able to light up a screen?. I think, a way to move forward would be an addition to a protocol between swayidle and sway, in which sway tells swayidle that screens have just been powered off, so swayidle might start looking for \"non-idle\" events.. > however, it would also likely cause side-effects, like in case a user wants to turn a secondary display off permanently.\nNot necessarily, if combined with your 3-rd point.. > thought: read what I said; your \"new protocol\" is exactly requesting a new idle timer, possibly off the same manager, with a 0 timeout.\n@martinetd  but this means that now you can't set a timer to, say, 600 sec. to disable screens automatically.. @martinetd but then if you implemented a zero-based timer, how would swayidle know that it don't need to execute \"resume\" command, i.e. because screens are still enabled. This requires sway to notify swayidle that screens have been disabled; in which case we're down to my proposal, combined with either your zero-based timer, or the third @tg--'s point. And I'm in preference of the @tg--'s 3-rd point, because I really don't see any usecase for binding to it a timer.. > Err? Why would it not need a resume command? If you don't need a resume command, you don't need swayidle, just run the damn initial command.\n@martinetd you misinterpreted what I said, I meant that when screens are turned on, swayidle should not execute resume command, and the question is how would swayidle know about it.\nBut whatever.\n\nBasically what you need here is to add a new more/handle an event/whatever that would let you first execute a command and immediately enter idle state, to be able to wake up screens on first activity, then destroy that thing.\na 0-timer would be just that: create timer, (run your thing now or run it on the immediate idle event), run resume command when it comes, kill timer.\n\nNow that I'm reading these two paragraphs, I'm completely confused. I just not sure how to interpret the (run your thing now or run it on the immediate idle event). Do you want to run a command immediately as swayidle launched, or what?\nI think, to lessen confusion it would help if you pulled up some example of how would your idea be used to implement a generic DPMS (which is \"disable screens either on timer or explicitly, then enable them back on the first activity\").\n\nI'm sorry if you think that's rude\n\nNo, you're not being rude, it's a technical discussion.\n\nI'm just tired of repeating what I consider to be the same thing over and over\n\nYou did not repeat that, you wrote it once, and then were referring back to your first comment. Which, as it seems now, somewhat unclear to me.\n. > Turning screens on when they are on is a no-op.\nWell, then the question is 'how often that \"no-op\" gonna happen\"? You don't want, for example, spam it on every activity, right? This is not good from battery perspective.\nThis is why I'm asking an overall example of how would that be used to implement DPMS: because an overall example would also answer this trivia questions.. > Have you tried his PR?\nI did, I used it for a bit together with my own PR before returning back to X11. It worked well for me.. Hmm this is odd as the View changes link refers not to the commit I reviewed. I meant, it would probably make sense to merge the commit with style fixes into the prev. one.. > I think that this behavior (translating keysyms to keycodes) should only be done with a flag\nWhy not default? What would be downsides? FWIW, this is how keybindings work in pretty much any software. The example with Ctrl+q someone put above is a bright example. Not having it as default, I think, a unique \"feature\" to sway, any reason why?. > I have another question. Will this work with multiple seats, so each seat can have a different keyboard layout in the window?\nThat's a good point. Okay, then, steps to finish this PR probably would be:\n\nStore in every window a collection of layouts per every keyboard\nStore in every window a collection up to number of seats of collections of layouts per every keyboard.. Is there an implementation of a dynamically resized array, or do I have to make one? Till now I've only seen a list implementation, which is less suited here.. It's a list. It have good performance for removing/adding elements, but bad performance for traversing.\n\nIn my case operations of adding/removing are very rare, whereas traversing happens often, so I need a dynamic array.. FTR, it seems every keyboard has one seat it's assigned to.\n\nI think then, storing a layout per keyboard should solve the question of correct layouts per seat too.. How do I go through all sway_views? E.g. I need it when keyboard created/destroyed, to properly initialize/release tuples of layout per keyboard.. Oh, it must be root_for_each_container().. How do I loop over all keyboards? E.g. in view_init() I need to loop over sway_keyboards, to get their default layouts.\nHopefully, it's the last thing I have to do (well, codewise, I still need to test it though).. Thanks all for your tips, it should work now. I'm hoping the last commit not too big? I really don't see any way to split it. It might help to paste my checklist I've been following yesterday to make sure I didn't miss anything:\n\n\u2713 add default_kbd_layout to sway_keyboard.\n\u2713 add to sway_view: {*wlr_keyboard, layout}\n\u2713 on window losing focus: go through the list of the tuples, save the layout\n\u2713 on window getting focused: go through the list of tuples, set layout\n\u2713 on keyboard destroyed: go through views, remove the tuple\n\u2713 on keyboard created:\nset default_kbd_layout in sway_keyboard\ngo through list of sway_views, add a new tuple\n\n\n\u2713 on window created: go through sway_keyboards, add tuples with default_kbd_layout\n\u2713 on window destroyed: free the tuples.\n\nBut of course it's not a substitution for the code :). v2: I forgot some brackets around if-conditions.. I just made a little update to the code: the $mod key being pressed for some reason was unpressed on layout switch.\nThe reason turns out that wlr_keyboard is out of sync with its xkb_state. E.g. whilst wlr_keyboard::modifiers::locked was set, the analogous field inside xkb_state wasn't. It looks like a wlroots bug, but I'm not entirely sure, tell me if I need to report that.\nFor the time being I worked around that by using the fields inside wlr_keyboard (actually, that even made the code shorter, because I don't need to call xkb serialization functions anymore).\n. > We know all the layouts once Sway is initialized/reloaded, can we create an array with that size and pin it to every view?\nWe actually don't know. New keyboards may be added any time, that's why a dynamic array is used here.. Sure. It was in this version of sway_keyboard_set_layout function. In there I'm serializing xkb_state to get state of modificators. Then I found that if I pressed and held $mod key trying to change focused window back and forth, I only could switch focus once, and then $mod became, like, \"unpressed\", i.e. I had to release it and press again to swith a window.\nIn next version of the function I used modifiers fields from wlr_keyboard. It fixed the problem and even resulted in cleaner code, though I guess xkb_state isn't supposed to be out of sync with these fields.\nI tried debugging the problem for some time, IIRC I couldn't reproduce it when running sway under X11 (it's reproducible from a tty). But at some point I moved on for various reasons.. Btw, if you want to reproduce it with the code from this PR, make sure you have option keep_kbd_layout per_window in your ~/.config/sway/config, so the function sway_keyboard_set_layout() gets ran when a window is switched.. Any updates on this PR? It's already sway RC1, would be nice to have this feature in before the first release.. Actually wait, I just realized the code configuring keyboard runs on some other occasion too. I'll inspect it more closely, closing for now.. calloc can't initialize struct fields correctly. For example, there was some pointer which was set to zero, whilst in properly configured keyboard it should've pointed to something, which led to a crash for me until I figured that just after sway_keyboard_create() finished execution, the sway_keyboard is still partially uninitialized.\nThis change makes sure that if we ever created a sway_keyboard, it's properly initialized.\nupd: s/uninitialized/partially uninitialized\n. There's also a more general point (it doesn't immediately apply to this situation though) is that when you have two separate calls for struct creation and initialization, you need to create a temporary variable, and pass it between two calls. Often such design also makes problems with constifying variables.. > Seems like you're using overloaded terminology here. An uninitialized struct will have fields of indeterminate value. calloc does initialize the struct with all zeroes, so the struct is already initialized.\nOk, maybe I do. Although I'd argue there's little difference between a random value assigned to a field (i.e. uninitialized), and a wrong value assigned to the same field. But sure, a field initialized to wrong value is still initialized.\nStill, terminology doesn't make this pull request less useful.\n\nHowever, it sounds like your problem is you tried to dereference a pointer before it pointed to anything. What were you trying to dereference between calls of sway_keyboard_create and sway_keyboard_configure?\n\nThis line:\nc\nkeyboard->default_kbd_layout =\n\ufffc       sway_keyboard_get_layout(wlr_device->keyboard->xkb_state);\nThe xkb_state is zero between the calls.\n. > Is there any reason you can't move that code after wlr_keyboard_set_keymap? Adding more calls to sway_keyboard_configure may or may not have additional side effects.\nI kind of did, the diff I referred to in my prev. comment have this code after the wlr_keyboard_set_keymap(). Or do you mean, like, put it right after the call? (I put it to the end of the sway_keyboard_configure())?. @remyabel I think you misunderstood me. The code I referred to works right now, I just showed the line that per my memory resulted in crash back when the line was inside the sway_keyboard_create call.. ",
    "Kommynct": "Hey, I know this isn't super important, but I can't help but notice [window_role=] under for_window isn't on the list or mentioned in the thread anywhere.\n. If transparency did. Shadows should too. But those are things that should be implemented after wlroots. . You linked click events to issue #222, but I can't find click events mentioned anywhere there, and click events currently do not seem to work, at least on my i3blocks setup they do not.\nAm I doing something wrong or is this functionality just not implemented yet?\n. Shadow configuration, fading, opacity of unfocused windows, there's actually a lot. Blur too. . Yeah but I figured I was too broad. Not supporting most compton features =/= not supporting shadows.. Pull request was merged, shouldn't this be closed? . You're going to have to learn how to edit xkb.\n/usr/share/X11/xkb/symbols/us\nis the file you'd want to edit, but that'll edit it globally.\nedit: just realized that won't let you do it on the fly. I don't think you can yet.. ",
    "ArenM": "Assigning windows to workspaces doesent seem to work. Example: assign [class=\"Firefox\"] $w1. when I open firefox it opens on the active workspace not workspace 1. $w1 is set to the name of my first workspace.\n. @onny that seems to be the case. Should I file a bugg report?\n. Thanks @spagy that is the case.\n. ",
    "spagy": "@ArenM I also found that assigning windows to workspaces didn't work initially. I don't know what you're using to find the class of windows but with xprop there seems to be a list of classes given. I've found that using the first item in the list should work. This involves using Navigator instead of Firefox and urxvt instead of Urxvt, for example. This is from memory but I think this is accurate info.\n. Sorry if I'm missing something but the two branches of the if statment look the same to me. What's the point of of the comparison if it has no effect on what action is taken?\n. ",
    "TapioT": "I see this is an old discussion, but this seems to be the most relevant page: how do I match the window class? I have this in my i3 config:\n\nbindsym m [class=\"Thunderbird\"] focus\n\nwhich allows me to jump to mail by pressing $alt+m. This does not seem to work with sway. I see this is an old discussion, but this seems to be the most relevant page: how do I match the window class? I have this in my i3 config:\n\nbindsym m [class=\"Thunderbird\"] focus\n\nwhich allows me to jump to mail by pressing $alt+m. This does not seem to work with sway. If I read xprop output correctly, the instance of Chromium is \"chromium\" and class is \"Chromium\", but\nsway assign '[class=\"chromium\"]' 1 \ndoes not seem to bring Chromium to workspace 1. And I cannot find a command to focus a Window that matches a criteria. And matching [instance=\"chromium\"] gives an error.. If I read xprop output correctly, the instance of Chromium is \"chromium\" and class is \"Chromium\", but\nsway assign '[class=\"chromium\"]' 1 \ndoes not seem to bring Chromium to workspace 1. And I cannot find a command to focus a Window that matches a criteria. And matching [instance=\"chromium\"] gives an error.. If you use fcitx, the clipboard works. I also had problems with my keyboard mapping with xwayland applications, but using fcitx (or ibus) fixed that.. If you use fcitx, the clipboard works. I also had problems with my keyboard mapping with xwayland applications, but using fcitx (or ibus) fixed that.. I am not an expert in this, but when I copy something from Chromium running on xwayland, I can see the same text in the primary and clipboard but not on secondary (with xsel --output --primary or xsel --output -clipboard). When I paste to Chromium, the text comes from clipboard -- I copied different text to primary, secondary and clipboard and pasted to chromium to see what comes out.\nI am running fcitx. Works for me.. I am not an expert in this, but when I copy something from Chromium running on xwayland, I can see the same text in the primary and clipboard but not on secondary (with xsel --output --primary or xsel --output -clipboard). When I paste to Chromium, the text comes from clipboard -- I copied different text to primary, secondary and clipboard and pasted to chromium to see what comes out.\nI am running fcitx. Works for me.. Thanks for the hint! I got this to work from the command line:\necho | dmenu -p \"Mark_\" | xargs swaymsg '[class=\"Chromium\"] mark '\nto mark the chromium browser with a text of my choosing, and\necho | dmenu -p \"Mark\" | xargs swaymsg mark \nmarks the current window.. Thanks for the hint! I got this to work from the command line:\necho | dmenu -p \"Mark_\" | xargs swaymsg '[class=\"Chromium\"] mark '\nto mark the chromium browser with a text of my choosing, and\necho | dmenu -p \"Mark\" | xargs swaymsg mark \nmarks the current window.. And this seems to work in the config file:\nset $get_mark echo | dmenu -p Mark: | xargs swaymsg mark\nbindsym $mod+m exec $get_mark\nShould this be part of the default config file?. And this seems to work in the config file:\nset $get_mark echo | dmenu -p Mark: | xargs swaymsg mark\nbindsym $mod+m exec $get_mark\nShould this be part of the default config file?. ",
    "4e554c4c": "show_marks and [criteria] should be implimented.. Using the Arch Linux package sway I can confirm for the default config that I am no longer able to split horizontally once I split vertically.\n. The issue is that the MPV dimensions are off?. Well if other WMs have that problem I can't see how it's our fault.. duplicate of #571\n. @serussell , The IRC channel for sway is probably the best place for questions like this. It is #sway on irc.freenode.net and you can join the webchat here. However, they would probably tell you to read the wiki, because there is already a page dedicated to installing on Debian based systems which I think is what you want. Good luck!. @embik With #1081 this should be possible now.. Thanks for looking over this. Since -r and -s are for related features I elected to implement both or neither so I'll go and do both. Also the new usage string seems crowded to me, should I change it?. We get it, the isssue exists. Saying \"I can reproduce\" without any debugging adds absolutely nothing to the discussion.. I know that sway does not use macros, but I saw that MAX and MIN were used across layout.c already and decided to use them. Please tell me if this should be changed.. Yes, i3 allows both move left 10px and move left 10. This has been ammended.. @pauloue, I don't believe this is the best place to post that. You should probably put it on sway's wiki (probably around https://github.com/swaywm/sway/wiki#my-favorite-application-isnt-displayed-right-how-can-i-fix-this). Sway handles and displays unicode characters fine. Perhaps you have a space between the worspace number and symbol in your config?. I'm not sure. I can't find anything in the docs (relavent section here?) except that spaces are allowed in workspace names. I'm not quite sure how else to handle \"output\" other then this except for allowing spaces in one command and not another.. I don't believe that this will break anything, it was just a bug in my pr. Thanks for catching this @zandrmartin.. Is your WLC up to date?. Looks like the show_marks issue was because of some dumb code copying. These problems should be fixed now.. @SirCmpwn Please redonate my bounty to #892. Thanks for the review!. I've been using the proprietary driver for a few days and I haven't seen any problems yet. Having to enable the experimental DRM kms driver is annoying, but that's pretty much it. I'd give this a thumbs up.. I've gone back over the code and fixed a few things. Turns out the \"title matching bugs\" was just a consequence of how I was testing with swaymsg. One of the things that might not be 100% wanted is moving (non-flotaing)containers always focuses them, I can work on this if you'd like.. Will proprietary nvidia driver support be included in wlroots? . Not to be picky, but shouldn't marks also be in the \"New Features\" section?. @ascent12 I changed it. What's the difference?. Don't change something that affects the whole codebase if you don't want to change the whole codebase then?. Steps to reproduce?. Yes, exit works but is denied by default to swaymsg. The default binding for this command is $mod+Shift+e.\nIf you want to use swaymsg to exit sway (not recommended) see sway(7). Still working on getting tray windows working, pretty much everything else is in order.. I'd say not, unless you really want it there. I can't work on this 100% right now, so it might be good to delay things. Also I'm not even sure if it'd be good to release sni support without xembed included. People who don't know the difference will probably file reports.. Thanks!. I'll continue work on xembed, hopefully we can have that in the next release.. Is appindicator server side? I only see client side bindings. I think it's best to continue to use what we have already, and if it needs expansion for appindicators that can happen.. Does it not work with this rc? That project's readme says it uses StatusNotifierItem.. There is already some effort to extend sway development into a separate library and that is wlroots. In my opinion, sway should not be a large and modal library, but a smaller implementation of higher libraries.\n\nAs a bonus, this would allow to easily extend sway using other languages than C\n\nI believe it is especially true in this case. Sway is very C-centric and I don't think that any of it would be good to extended to other languages. They should be, like sway, another front-end to the same libraries. Just like what way-cooler is.\nThat being said, how sway is done could definitely be improved, and I know that Sircmpwn has expressed that he wants to do things a different way as well. See the initial proposition for #1076\n\nImplementing the feature, submitting a PR, and getting it merged. This is the ideal outcome, but I would assume it requires the feature to be \"reasonable\", and well behaved with respect to all the existing features of i3.\n\nYes, this is a problem, I agree. Again, the proposal in #1076 may be better for less i3 compatible features, and hopefully creating similar projects will be easier once wlroots is more complete.\n. Yep, timer_item holds a timer_t not a timer_t *. This should be right.. Please don't bump long dead issues @sbwtw. It will be implemented with wlroots: https://github.com/swaywm/sway/issues/1071#issuecomment-331705286. /org/ayatana/NotificationItem/wicd isn't a valid message bus name, it's an object path. wicd-gtk isn't following the SNI spec and swaybar crashed accordingly.. @lyovushka Does #1276 fix crashing for you?. Good catch! I forgot that we did name validation there. Does #1279 do the trick then? I appologise for not being able to test myself, I can't seem to get wicd to display tray items.. Yep! I'll look into how KDE registers items by object path later, but for now I think this'll work.. Why go directly to 1.0 after this release? I doubt sway will be \"stable\" after switching to wlroots, as the change of backend will probably create a lot of hidden problems.. Yep, it's most definitely that current_window is NULL. The problem originates at 069d37f. Yeah, appologies you're right about that.. @helaan thanks for looking through this. I'm working on a fix.. Please see if #1316 fixes the problem, if not I can make more changes.. Sounds like a libinput problem, I don't think this is a sway issue.. Thanks so much for the translation!. This is expected behavior. . You've already made an issue. If you'd like to help please debug more and send a patch.. What do you mean \"Doesn't render colors correctly\"? Are all colors off, sway config colors or something else?. Somewhat unrelated, should this be changed in wlroots as well? I had\ntrouble compiling it with the recent json-c.\n. I meant the wlroots branch of sway, sorry for confusion.. There isn't enough information to reproduce, so no. However if you've experiencing the problem then maybe you could help out.. @gnidorah Please attatch a debug log of swaybar. This can be done by killing swaybar after starting sway, and running swaybar -d --bar_id bar-0 2> swaybar.log. Yeah, that's it. The problem is that the client is trying to register by object path, which is a \"hidden feature\" of KDE's SNI implimentation. It's not yet supported because it'd require some deviation from the SNI protocol to make, but it's planned for the future.. We follow the specification plus all the deviations from it that I could find in kde software, eg using org.kde.*, registering by unique name, etc. I'll try to add support for these too, it's just difficult to imagine all the different ways people could impliment the specification.. Ok, support is in the works. @gnidorah  if you could link me to your example libappindicator client it'd help a lot.. Nice catch, I'll fix that.. Should be fixed with #1431. Not sure, it's probably us though. I'm working on the menu right now but I'll check that out.. @ReK2Fernandez This entire system is being reworked. Please test again once #1431 is merged.. The branch is sni_sucks on https://github.com/4e554c4c/sway. You can compile it and test, but as I said it's still being reworked.. The variables should already be added to the list longest->shortest, (see sway/commands/set.c:10) . Yeah, but the fix should either fix that code or remove it imo. - [x] Commands\n  - [x] Basics\n    - [x] bind\n    - [ ] ~~debuglog~~\n    - [x] include\n    - [x] exec\n    - [x] exec_always\n    - [x] exit\n    - [x] reload\n    - [x] set\n  - [x] New -- needs documentation\n    - [x] input\n    - [x] seat\n  - [x] Old\n    - [x] bar\n    - [x] border\n    - [x] client\n    - [x] floating\n    - [x] focus\n    - [x] font\n    - [x] fullscreen\n    - [x] gaps\n    - [x] kill\n    - [x] layout\n    - [x] mark\n    - [x] move\n    - [x] resize\n    - [x] scratchpad\n    - [x] split*\n    - [x] sticky\n    - [x] output\n    - [x] workspace\n  - [x] Other\n    - [x] Criteria matching\n. Requesting thread lock. We should reopen this after wlroots, but I don't see any productive discussion coming out of it until then.. If it's possible with a script/exec I see no reason for this to be sway's job. Each user's environment is different and I doubt any startup script could work for everyone. Especially things like dbus, because it isn't a hard dependency, and only used in one program.. What compton features? . It's supposed to check $XDG_DATA_DIRS, will check for bugs. I can fix the multiple icons. Canonical menus are tricky though because swaybar would have to draw them instead of the item.. @gnidorah See if 2f8cbbe fixes your issue with $XDG_DATA_DIRS. @gnidorah Sorry about that! See if 6ed5d6e fixes it.. @gnidorah sounds good to me! Thanks for all the help on this PR.. # Bugs Fixed\n+ Fix non-compliant KDE tray icons (@4e554c4c)\n+ Fix tray items setting and updating icons (@gnidorah and @4e554c4c)\n+ Fix various tray segfaults and memory leaks (@4e554c4c)\n+ Fix menu placement (@4e554c4c). VirtualBox's. >sway doesn't like the idea of having its output redirected to a file\nThere should be no problem with this, it is very common to do. Also without a log we can't really help you out. Perhaps state why you can't create a debug log.. @Timidger yep it outputs to stderr, sway -d 2> sway.log should do the trick. 0.14 is outdated. In that version swaybar will crash if it can't get a D-Bus connection when started. Either start D-Bus before starting swaybar or upgrade to 0.15.. Cannot confirm. This is the correct way to get a container out of the scratchpad.\nPlease attach a debug log and coredump so that we can debug your crash.. @cycomanic Yep, that's intended. If there aren't any items then tray_padding doesn't do anything. Also separator_symbol doesn't apply to the tray. In your logs it shows that it finds konversation and its icon just fine, so I don't see what's wrong. (perhaps try resetting all those config changes and try again?)\nSee:\nhttps://github.com/swaywm/sway/blob/7c3b0ffc324d913dd1c58b2497c9c36c74580ded/swaybar/tray/tray.c#L324-L329\nIf tray_padding is too large then the tray won't render.. Stop complaining and send a patch if you want something changed.. @codethief,\nYes, you're right, and I apologize for being rude.\nHowever, I have spent lots of time trying to create features and fix bugs for sway users (not as much as some, but it is still a labor of love), and it is quite disheartening to hear that it is completely unusable.\nThe sad truth is that we don't have enough contributors to fix all the bug reports that come in. I am trying to dedicate all the time I can to my subsystem, which isn't much, and most other contributors are focused on new big-picture changes with wlroots. This is why \"send a patch\" was my reply, not because I don't care about users, but we have to ask for all the help we can get (though I understand that each user of foss can only dedicate time to so many projects).\nI now understand your point, and am thankful for your report. It is just difficult to respond to bug reports that accuse sway of not being usable accurately.\nFurthermore, I would like to say that I agree with this feature. I have been meaning to improve debug logging for awhile, and once the feature freeze is over I will make this a priority.. Please attach debug log and switch to 0.15 if possible.. Debug log please. swaybar --bar_id bar-0 -d 2>swaybar.log. https://github.com/swaywm/sway/blob/7c3b0ffc324d913dd1c58b2497c9c36c74580ded/sway/border.c#L99-L107\nThe problem is just that we assume the text will never be larger than the height of \"Gg\". The solution would be to set the size of the titlebar to be the actual hight of the text plus a certain number of pixels each time it changes.. Honestly I would just run a script that determined if swaybar is running, and either kill it if it is or start it otherwise.. It's not yet released.. Should be fixed. Why do we need sway_log at all? when files are ported sway_log should be just changed to wlr_log, or if that's too difficult to do, sway_log could just be defined as a macro that gives its args to wlr_log.. Shouldn't things like common/*.c and swaymsg/* still use the sway_log logger? I don't think that we should make all the sway utilites link to wlroots.. Yes, I had this issue too. But after a bunch of digging through WLC and sway's handlers I couldn't figure it out. Menus will be changing a lot soon (they will be mostly going through dmenu, and then changed again under wlroots) so don't know if this will be fixed.. @Artlant First of all: calm down. Spamming comments will not help anything and it just make people block you and your issue. Second of all: read the manual (man sway, man 5 sway) and the wiki pages because they contain much useful information. Finally,\n\nI click a few more times on Insert and the window appeared.\n\nYour issue is solved.\nGithub issue comments are not the place for this kind of discussion. We have an IRC support channel for a reason.. xkb settings are to be specified through environment variables to sway. See this wiki entry and sway(5) for more info.\nFor example, I'm a dvorak user who uses right-alt as an XCompose key, so I put \nzsh\nexport XKB_DEFAULT_LAYOUT=dvorak\nexport XKB_DEFAULT_OPTIONS=compose:ralt\nin init files that run before sway.. https://github.com/swaywm/sway/wiki#how-do-i-report-issues\nPlease report sway(bar) version, i3status version, sway config and i3status config.\nI use i3status and it works fine.\nBut some details: The first argument sent to poll() should always be the sway IPC fd, and the second should be the one used for the status command; so I'd be really suprised if fd 14 is the one that poll's responding with. Also the issue isn't that it's polling offten. It's that it's /exiting/ poll too often because some file descriptor is waking it up.\nedit\n\nBut it is not installed\n\nMissed this part and can reproduce. I'll send a fix.. haha no it's good I'm just tired and missed it. Sounds like a race in libinput. This doesn't sound like sway's fault.. Thank you very much for debugging, I'll look into this.. If DBus isn't running then swaybar can't start the tray. This isn't a bug.. I can also work on this if sd-bus isn't a requirement. That's fair, the old code isn't very readable.\nIs one of the focuses still to operate on both \"org.freedesktop\" and \"org.kde\"?\nI think trying to uphold that was one of the issues in the previous codebase, if we just followed the KDE spec (that everyone uses) then it would be easier, and people could use the KDE SNIWatcher if desired.. >the canonical protocol\nWell Canonical moved to the KDE protocol too <.<\nJokes aside, the freedesktop protocol is insufficient to deal with the current KDE implementation. I fixed this in the old codebase by creating a new /sway specific proprietary protocol/ separate from the freedesktop one to deal with the inconsistencies between them, but this is sort of a mess.\nHonestly I'd appreciate it if you could bring this up at XDC 2018, about either standardizing the KDE protocol (which would probably be the easiest, since it's the defacto standard now) or whether the KDE folks would be down to switch back to the freedesktop protocol (with a bunch of extensions). Yes, I was considering it already.. Sure, I can see how this needs clarification. Both move left and move left 10px affect both floating and tiled containers. Why should they be split into different sections?. What are Yoda conditionals?. I wanted to use container map, but that only takes two arguments when I would need three: tokens, container and final list. I could solve that by passing a (container list,tokens list) struct or use a global, but both felt somewhat jurry-rigged.. Thanks for catching that.. s/quel/quelle/. s/consultez certainement/je vous recommande de consulter/. s/\u00e7a/cela. I would say 'donner une prime' instead of 'faire un don' as well. Unnecessary capitalization. For awhile I was thinking about making this a bitmask so different operations could be added to the flags (change mask, add event, etc), but now there isn't any of that so I'll remove it (also if it were a bitmask they'd both be on the same bit I think, because it can only be one or the other).. ",
    "rosshadden": "\nWe don't actually have access to window_role. Not everything that works on x makes sense on Wayland, I'm afraid.\n\n@SirCmpwn Is there an equivalent in Wayland as far as you know?  For example I often use window_role=\"pop_up\" which is common for things intended to be dialogs.  When investigating with xprop, window_role was the only distinguishing factor IIRC.. ",
    "auscompgeek": "Can we add i3-input to the list?. You missed the spaces in this file.\n. ",
    "AndreasBackx": "@SirCmpwn regarding the vertical monitor support, could this be added here or addressed in a new issue? Would love to use Sway as soon as that's supported.. Neat! Thank you, I'll give it a shot as soon as I get back from my holiday!. ",
    "educatedCaveman": "I've been toying w/ the idea of trying out Sway, and I've been looking through the man-pages trying to find an answer to this question:  given that sway would manage my monitors, how would I rotate one?  Or is it not yet possible?\nI didn't see where that was one of the documented options.\nApologies if this is not the most appropriate place to ask this question.. yeah, sorry, I'm a moron.  searched for \"rotate\" and \"output\", but not \"monitor\" or \"vertical\".  sorry again.. ",
    "ranisalt": "Is there a parallel for set_from_resources on Wayland? I used it with wal to set custom, consistent color schemes on all apps, including i3.. Nice. I found include which is much more powerful than set_from_resources was for me. Just for documentation, here's what I've done \ud83d\ude04 . Oh, how I love C++11 auto <3. Thanks. I will try \ud83d\ude04 . Is it sway, wlc or wayland's fault?. I wouldn't add -ggdb to a build since it is not portable - obviously, it adds info that is gdb-only. Also, I'd base it on CMAKE_C_FLAGS_DEBUG and add just -fsanitize=address, and you don't need any of the below added lines.. What mark_as_advanced means here?. ",
    "camoz": "Would real transparency qualify as an i3 feature?\nSee comment from Hi-Angel: https://github.com/swaywm/sway/issues/2#issuecomment-248215403\nand this issue: https://github.com/swaywm/sway/issues/973\nIt's not directly a feature of i3, but I assume it was present on many i3 setups, and AIUI sway would be the place to have it implemented since it does the compositing?. Switching from sway back to a TTY crashes sway always for me without xwayland installed.\nWith xwayland, I've never experienced this issue.\nThis is on an up-to-date Arch Linux with sway v0.15.0.\nDebug log of crash without xwayland: https://gist.github.com/camoz/e542e9bc21d41cd3a056fed271d42b9c\n(I think it happens on last 4 lines, not much info :/)\n. Log of just exiting sway (via $mod-shift-e): https://gist.github.com/camoz/b796e780b00d0752d56a6458f32cdab6. With xorg-server-xwayland installed but sway started with WLC_XWAYLAND=0 it does not crash when switching TTYs.. Switching workspaces via mouse clicks seems to work now, but switching tabbed/stacked windows by clicking on their title bar still doesn't work yet.. Switching workspaces via mouse clicks seems to work now, but switching tabbed/stacked windows by clicking on their title bar still doesn't work yet.. Hm. I'm now on a 12\" laptop (Thinkpad X200) and could use the feature even more, but it seems I have to accept it.\nI noticed that in sway 0.15 if I have two wayland-backed termite windows in tiling mode, and if I make one fullscreen, I'd see at least the other window (occupying half of the screen) in the background behind my semi-transparent termite window. In master, even this seems no longer possible.\n\nI'm not a fan of this. It would mean wasting resources in case windows are opaque. It would make the rendering code more complicated, it's already pretty complicated.\n\nWell, one could just not make windows transparent if one didn't want to waste resources I guess? Or make some of them transparent?\nWhat about a compromise: When a window gets fullscreened, it has \"real transparency\" meaning one can see the windows behind it? This would maybe limit the performance penality and also the complexity of the rendering code?\nWhat do you think about it?\n. @RyanDwyer: Thank you very much for your detailed explanation!\nWith that background now it seems reasonable not to implement it in fullscreen mode (since it's a protocol violation) or general \"real transparency\" like in i3 with a compositor like compton (due to the massive overhead).\nOut of curiousity: That would mean that sway is a lot more power/ressource efficient than traditional X11 WMs like i3 or openbox with \"real transparency\", right?\n\n\nWhat about a compromise: When a window gets fullscreened, it has \"real transparency\" meaning one can see the windows behind it? This would maybe limit the performance penality and also the complexity of the rendering code?\n\nEven if we found a resolution to the above, this would still be a protocol violation.\n\nAnother idea I could think of is designing/adding a \"second, transparent fullscreen mode\", without the solid, black background. But it sounds like that would also require changes to the protocol specifications, which is of course a big thing and not done unless it's clear that the developers want it or unless there's a strong demand from the community. (I'm assuming that it's not an issue of the wayland-protocol, but of the wlr-protocols.) \nSorry, I may be technically incorrect here and there and things may sound a bit stupid, I'm unfortunately still very unfamiliar with sway and all that graphics stuff is kind of a miracle to me.\nThe reason I'm still discussing this is that a) I've become very used to that feature and don't wanna miss it :D; but also b) that I think it's a useful feature in general, and that other people would want that. But that's maybe only in my head.\nI generally like to think about how one can optimize workflows, especially while working with computers. Although I don't like many \"desktop graphics effects\" (there's all kinds of unecessary shit out there), I e.g. think that having a \"sliding\" effect when switching workspaces would increase productivity for quite some people (including me). Similar to smooth scrolling it helps the mind focusing the new workspace during a switch (since humans have been practicing that for thousands of years), and it would probably help the mind keeping track of the order/locations of the workspaces and therefore improve orientation between the workspace (I have a single monitor setup with usually 6-8 workspaces).. @RyanDwyer: Thank you very much for your detailed explanation!\nWith that background now it seems reasonable not to implement it in fullscreen mode (since it's a protocol violation) or general \"real transparency\" like in i3 with a compositor like compton (due to the massive overhead).\nOut of curiousity: That would mean that sway is a lot more power/ressource efficient than traditional X11 WMs like i3 or openbox with \"real transparency\", right?\n\n\nWhat about a compromise: When a window gets fullscreened, it has \"real transparency\" meaning one can see the windows behind it? This would maybe limit the performance penality and also the complexity of the rendering code?\n\nEven if we found a resolution to the above, this would still be a protocol violation.\n\nAnother idea I could think of is designing/adding a \"second, transparent fullscreen mode\", without the solid, black background. But it sounds like that would also require changes to the protocol specifications, which is of course a big thing and not done unless it's clear that the developers want it or unless there's a strong demand from the community. (I'm assuming that it's not an issue of the wayland-protocol, but of the wlr-protocols.) \nSorry, I may be technically incorrect here and there and things may sound a bit stupid, I'm unfortunately still very unfamiliar with sway and all that graphics stuff is kind of a miracle to me.\nThe reason I'm still discussing this is that a) I've become very used to that feature and don't wanna miss it :D; but also b) that I think it's a useful feature in general, and that other people would want that. But that's maybe only in my head.\nI generally like to think about how one can optimize workflows, especially while working with computers. Although I don't like many \"desktop graphics effects\" (there's all kinds of unecessary shit out there), I e.g. think that having a \"sliding\" effect when switching workspaces would increase productivity for quite some people (including me). Similar to smooth scrolling it helps the mind focusing the new workspace during a switch (since humans have been practicing that for thousands of years), and it would probably help the mind keeping track of the order/locations of the workspaces and therefore improve orientation between the workspace (I have a single monitor setup with usually 6-8 workspaces).. FWIW I'm now happy with a border-less floating window for such situaltions (where I want to see something behind the terminal).\nIn case anyone's interested, I added this to my config:\nbindsym $mod+backslash exec termite --name=\"scratchterm\"\nfor_window [app_id=\"scratchterm\"] floating enable; border none; resize set 100 ppt 50 ppt; move absolute 1280 23; move scratchpad; scratchpad show\nAs I'm not using the scratchpad for other things, this works great.\nI actually also have a \"fullscreen\" one bound to $mod+Shift+backslash, but that's currently buggy, see  https://github.com/swaywm/sway/issues/3236\nThanks everyone for the comments and insights.. FWIW I'm now happy with a border-less floating window for such situaltions (where I want to see something behind the terminal).\nIn case anyone's interested, I added this to my config:\nbindsym $mod+backslash exec termite --name=\"scratchterm\"\nfor_window [app_id=\"scratchterm\"] floating enable; border none; resize set 100 ppt 50 ppt; move absolute 1280 23; move scratchpad; scratchpad show\nAs I'm not using the scratchpad for other things, this works great.\nI actually also have a \"fullscreen\" one bound to $mod+Shift+backslash, but that's currently buggy, see  https://github.com/swaywm/sway/issues/3236\nThanks everyone for the comments and insights.. I was not able to reproduce it via manually locking my screen, BUT I'm barely able to reproduce it again at all. Unfortunately, I updated to a newer revision, and out of 20 times only one time I saw my desktop before the lockscreen again. I'm also not able to downgrade at the moment, sorry.. I was not able to reproduce it via manually locking my screen, BUT I'm barely able to reproduce it again at all. Unfortunately, I updated to a newer revision, and out of 20 times only one time I saw my desktop before the lockscreen again. I'm also not able to downgrade at the moment, sorry.. I can no longer reproduce this issue with master.. I can no longer reproduce this issue with master.. Just experienced this issue again on my X200 with one external VGA monitor connected. The desktop showed briefly after resumung from a suspend (10 hours) on my X200 like described in my OP. With subsequent suspends afterwards, I wasn't able to reproduce it.\nVersion:\n$ swaymsg -v \nswaymsg version 1.0-rc1 (Feb  3 2019, branch 'master')\n. Just experienced this issue again on my X200 with one external VGA monitor connected. The desktop showed briefly after resumung from a suspend (10 hours) on my X200 like described in my OP. With subsequent suspends afterwards, I wasn't able to reproduce it.\nVersion:\n$ swaymsg -v \nswaymsg version 1.0-rc1 (Feb  3 2019, branch 'master')\n. No, I missed those options - sorry!\n. No, I missed those options - sorry!\n. I just want to mention that I experienced this, too, with my Lenovo X200 and an external monitor connected via VGA. As I'm using this as my main PC, I'm currently not able to obtain a debug log. I think there also was firefox involved.... I just want to mention that I experienced this, too, with my Lenovo X200 and an external monitor connected via VGA. As I'm using this as my main PC, I'm currently not able to obtain a debug log. I think there also was firefox involved.... Yes ofc, I'm just at it (I'm just learning git(hub)). Yes ofc, I'm just at it (I'm just learning git(hub)). Does this work now?\nIf not, I'll look into it tomorrow (have to sleep now).\n. Does this work now?\nIf not, I'll look into it tomorrow (have to sleep now).\n. Ah, I've missed that. I will send a patch.. Ah, I've missed that. I will send a patch.. Lol, never I had the time to read Git Pro, now I'm learning it on the fly :D. Lol, never I had the time to read Git Pro, now I'm learning it on the fly :D. Will try, never done that. I assume it's important to run immediately after the crash?\nI will learn about coredumpctl.... Will try, never done that. I assume it's important to run immediately after the crash?\nI will learn about coredumpctl.... Okay, will take me a bit, since I have to reproduce again..... Okay, will take me a bit, since I have to reproduce again..... Here we go, hope it helps.\nStack trace: https://gist.github.com/camoz/f24e5c30ac022ffedc62a11ae4513f49. Here we go, hope it helps.\nStack trace: https://gist.github.com/camoz/f24e5c30ac022ffedc62a11ae4513f49. Maybe this is related to https://github.com/swaywm/sway/issues/3235\nShould I also provide a stack trace here?. Maybe this is related to https://github.com/swaywm/sway/issues/3235\nShould I also provide a stack trace here?. Stack trace: https://gist.github.com/camoz/0f1e29a62a4e84d10094f58bca29cf0d. Stack trace: https://gist.github.com/camoz/0f1e29a62a4e84d10094f58bca29cf0d. Here it crashed without the scratchpad involved (stack trace): https://gist.github.com/camoz/f3265830fb868ae7b80813d5888297b6\nIn config:\nbindsym $mod+Shift+backslash exec termite --name=\"scratchterm_full\"\nfor_window [app_id=\"scratchterm_full\"] floating enable; border none; resize set 100 ppt 100 ppt; move absolute 1280 23\nThen hitting $mod+Shift+backslash...\n. Here it crashed without the scratchpad involved (stack trace): https://gist.github.com/camoz/f3265830fb868ae7b80813d5888297b6\nIn config:\nbindsym $mod+Shift+backslash exec termite --name=\"scratchterm_full\"\nfor_window [app_id=\"scratchterm_full\"] floating enable; border none; resize set 100 ppt 100 ppt; move absolute 1280 23\nThen hitting $mod+Shift+backslash...\n. ",
    "oblitum": "Hi, Sway/i3 beginner here. I've just loaded my termite setup and it's fine except for one thing, I use a very dim translucent background and noticed that when I go fullscreen, the sway topbar doesn't hide. Is there support to hide it away (I mean, when there's transparency) when applications go fullscreen?. @SirCmpwn Any plans? I asked here because of https://github.com/swaywm/sway/issues/1158#issuecomment-292709950.. Specifically #1158 asks about i3's hide mode,  which for me would work as good too.. Nice :). I'm author of this, may be interesting on this topic:\n\nhttps://gitlab.com/interception/linux/tools\n\nSpecifically the caps2esc plugin covers \"Bind Caps to ctrl when I hold it, escape else\" and hideaway covers \"Hide mouse cursor on inactivity\". I use it on Sway (works on X as well).. I've \"hacked\" this for manual bar hide:\nbindsym $mod+a exec ( ( ps axo comm= | grep -w swaybar > /dev/null ) && pkill swaybar ) || swaybar -b bar-0. You can use this tool to hide your mouse under Wayland, I've just written it and I'm happily making use of it:\n\nhttps://gitlab.com/interception/linux/plugins/hideaway. Just noticed that setting height to 0 cause the bar height get the font's height, as it's set by default. So I would still stumble upon that limitation.. Interesting, I'll go about trying that, though full bar reload can be a bit overkill, i3status for example, requires some time to load.. OK, this does a great job, thanks for the tip @4e554c4c :\n\nbindsym $mod+a exec ( ( ps axo comm= | grep -w swaybar > /dev/null ) && pkill swaybar ) || swaybar -b bar-0\nAs mentioned, the only caveat is the bar reload (and a defunct process), which takes some time. I'll leave the issue open as it's more general than this, and also could be implemented in a better way, feel free to close though.. ",
    "talwrii": "\nSaving layouts to disk will not support\nLoading layouts from disk will not support\n\nI use that feature in i3 :/ .\nI imagine it isn't too hard to implement this outside of i3 using i3-msg.\nIs i3-msg -t get_tree still going to be supported?. ",
    "sharpTrick": "I made a script that may be useful for\n- workspace\n    - left/right/up/down\nhttps://github.com/sharpTrick/set-i3-workspace. ",
    "hyiltiz": "Nice work! Expecting \"Restart in-place\".. @progandy why the loop that does nothing but set a variable?. Would you reconsider your decision? This feature is actually quite useful in some (could even say rare) professional settings, e.g. setting up a music production with a midi mixer, synthesizer, sequencer, and composition programs open in their specific layout every time, or just general software development with editors, compilers, debuggers and test windows. \nWhile there is no point in being i3 compliant on this, I think a good discussion in trying to come up with a better solution would be quite beneficial.. I would love to say \"Would you like to reconsider whether you would like to reconsider 'No, I won't reconsider' \", but that might easily overflow the buffer if not implemented correctly. Anyway, I do think writing a script for that should be straightforward so thanks!. ",
    "ammgws": "@progandy \n\nI use that for my keybindings so that I can easily rename a workspace while keepig the hotkey.\n\nCould you please clarify how you are renaming workspaces in sway? swaymsg doesn't appear to support the rename command (e.g. in i3: i3-msg 'rename workspace 5 to 6'). Cheers, I guess that's what I'll have to do for now.. @luctrudeau For now you could try something like this or this to screenshot a specific region.. @wernerb\nAfter changing the vertical position I could no longer get right click menus or other menus to show (probably being rendered off screen I guess?). ",
    "coderkun": "Is moving a workspace left/right/up/down still not supported?. Thanks, @SirCmpwn. It is good to know that it will be supported with 1.x.. Duplicate of #759.\n. ",
    "Sway-Jenkins": "Build finished. No test results found.\n. ",
    "jansuchomel": "Maybe it's time to reconsider the move given that Microsoft is about to acquire Github?\nhttps://www.bloomberg.com/news/articles/2018-06-03/microsoft-is-said-to-have-agreed-to-acquire-coding-site-github?. Maybe it's time to reconsider the move given that Microsoft is about to acquire Github?\nhttps://www.bloomberg.com/news/articles/2018-06-03/microsoft-is-said-to-have-agreed-to-acquire-coding-site-github?. ",
    "RyanDwyer": "Yeah, it's time to reconsider this. I support a move to GitLab, even if Microsoft isn't buying them out. But I'd probably wait a while to make sure GitLab has sorted out any infrastructure issues that arise.. I poked around in xwayland.c's handle_map. In my case the size that it's committing with is 299x186, which is too small. It seems to be a problem with Firefox or xwayland.. Yes, I can get two outputs working on X. It's an Intel HD 4000 (integrated).\n. sway.log\n~/.config/sway/config\n^ That's using a very minimal config.\n. As before, only the HDMI displays a picture. The VGA goes into sleep mode (it also does this when trying with two). The laptop display looks to be in sleep mode but there's no way to know for sure. I believe my integrated graphics can't handle all three displays at once - it's not something I've ever been able to do under X.\nsway.log\n~/.config/sway/config\nI note this in the log file - don't know if it's important:\n08/11/16 21:19:43 - [wlc] Failed to page flip: Device or resource busy\n. If I disable HDMI and enable VGA and LVDS then I get an image on VGA only.\n. My /dev/dri devices are:\n/dev/dri/card0\n/dev/dri/controlD64\n/dev/dri/renderD128\nThe page flip error isn't in the earlier log BTW. Maybe it's only there because the card can't output to three displays at once.\n. I started WLC with WLC_DEBUG=handle,render and with LVDS-1 disabled and found some more information. I think the LVDS-1 output isn't being terminated properly. It tries to re-use LVDS-1's handle for VGA-1 but thinks the output is still terminated.\nsway.log\nHere WLC is setting up LVDS with handle 1:\n08/13/16 08:17:25 - [wlc] => Calling constructor for (output) 1\n08/13/16 08:17:25 - [wlc] => Called constructor for (output) 1\n08/13/16 08:17:25 - [wlc] New handle (output) 1\n08/13/16 08:17:25 - [wlc] LVDS-1 Chose mode (0) 1920x1080\n08/13/16 08:17:25 - Output 1 resolution changed to 1920 x 1080\nSway terminates the LVDS output:\n08/13/16 08:17:25 - [wlc] Set new bsurface to output (1)\n08/13/16 08:17:25 - New output 1:LVDS-1\n08/13/16 08:17:25 - Matched output config for LVDS-1\n08/13/16 08:17:25 - [wlc] Output (1) terminated...\n08/13/16 08:17:25 - [wlc] Released drm surface (0x157df38)\n08/13/16 08:17:25 - [wlc] Removed bsurface from output (1)\n08/13/16 08:17:25 - [wlc] Removed output (1)\nVGA-1 appears without the constructor being called - handle is 1:\n08/13/16 08:17:26 - [wlc] Set new bsurface to output (1)\n08/13/16 08:17:26 - New output 1:VGA-1\n08/13/16 08:17:26 - Matched output config for VGA-1\n08/13/16 08:17:26 - Set VGA-1 size to 1920x1080 (1)\n08/13/16 08:17:26 - Set VGA-1 position to 1920, 0\nWLC sets up the HDMI output with handle 2:\n08/13/16 08:17:26 - [wlc] Added output (1)\n08/13/16 08:17:26 - [wlc] => Calling constructor for (output) 2\n08/13/16 08:17:26 - [wlc] => Called constructor for (output) 2\n08/13/16 08:17:26 - [wlc] New handle (output) 2\n08/13/16 08:17:26 - [wlc] HDMI-A-1 Chose mode (0) 1920x1080\n08/13/16 08:17:26 - Output 2 resolution changed to 1920 x 1080\n...\n08/13/16 08:17:26 - New output 2:HDMI-A-1\n08/13/16 08:17:26 - Matched output config for HDMI-A-1\n08/13/16 08:17:26 - Set HDMI-A-1 size to 1920x1080 (1)\n08/13/16 08:17:26 - Set HDMI-A-1 position to 0, 0\nMaybe WLC thinks handle 1 is still terminated?\nUpdate: I tried with HDMI physically disconnected and not in the Sway config file and I was able to get both VGA-1 and LVDS-1 working at the same time. This supports my theory that re-using a handle after it's been terminated is causing it to not work.\n. Yes. I believe my graphics card doesn't support three outputs at the same time (not even under X), hence the page flip error posted previously. When I tried all three only the HDMI displayed an image.\nIt seems like WLC always finds my LVDS output first. For me to use VGA and HDMI at the same time I must disable LVDS, but when I disable LVDS it re-uses the handle for one of the others and incorrectly thinks it's disabled.\nIf someone wants to try and replicate my problem, you could try:\n1. Have two or more displays.\n2. Start Sway normally, then examine your Sway log to determine which display is found first.\n3. Disable that output in your Sway config then restart Sway.\n. I don't believe this is a Sway or WLC problem any more.\nIf you recall, Sway works fine if I physically unplug either my HDMI or VGA and run with the other two. Well, if I try to launch X using xf86-video-modesetting (by uninstalling xf86-video-intel) then X crashes, unless I unplug one either my HDMI or VGA monitor in which case xf86-video-modesetting works fine. So it seems like the issue is something higher in the graphics chain, and xf86-video-intel happens to work around it maybe. I tried running the Arch LTS kernel (4.4) to see if that makes a different but it doesn't.\nI'm happy for someone to close this issue as it's not an issue with Sway or WLC, but if you have any suggestions on where I should look it would be appreciated.\nUPDATE: Actually, disregard all of the above. I did further testing with xf86-video-modesetting and found it was crashing because it was trying to set the mode on all three outputs. If I make my own xorg.conf and disable LVDS then it only attempts to set the mode on the two remaining outputs and it works. I guess xf86-video-intel is smart enough to only set modes for the outputs it's going to use.\nWhen it comes to WLC, it looks like the mode setting is done before the output.created handler is run. Although the handler returns false, the mode has already been set and this causes the mode set for the third output to fail. Does this shed light on why the VGA (third output)'s image is being displayed on the HDMI monitor (second output)?\nI'm guessing that making the initial mode setting happen after the output.created handler has returned should fix my problem.\n. I would say it's not a driver bug. When the modesetting DDX tries to set the mode on all three, this appears in the Xorg log:\n(EE) modeset(0): failed to set mode: Invalid argument\nSo it seems like the driver is returning EINVAL for whatever the modesetting call is. From the driver's perspective this is correct behaviour. The DDX/compositor shouldn't be trying to activate more outputs than the hardware can support.\nCould it be that WLC isn't deactivating the mode when the output is terminated? If the driver has allocated resources for it then that would cause the third one to fail in my case.\nSome error checking and logging in output_push_to_resource() would be useful BTW.\n. That commit doesn't have any noticeable effect for me (still shows VGA's image on HDMI when I start Sway with LVDS disabled).\nI'm currently learning a lot about the Linux graphics stack. I'll experiment more with WLC when I can. Given enough time, I'll send a PR eventually.\n. I've figured out exactly what's going on. To put it shortly, it's using the same CRTC for both HDMI and VGA. That's what causes the \"Device or resource busy\" when page flipping. Now for the long answer...\nMy video card has 3 CRTCs (26, 30 and something else) and 4 encoders (LVDS, VGA, HDMI and DisplayPort). When I first boot my computer and I'm at the console, it's showing the console on LVDS and VGA. The LVDS and VGA encoders are both using CRTC 26. CRTC 30 and the other are unused.\nWhen WLC starts, query_drm() iterates the connectors and calls find_encoder_for_connector() on each.\n- For LVDS, it returns the LVDS encoder and sets out_crtc_id to 26.\n- For VGA, it returns the VGA encoder and sets out_crtc_id to 26 (!).\n- For HDMI, the connector is not using an encoder so it enters the for() loops further down. encoder->possible_crtcs is 7 (binary 00000111), meaning all 3 CRTCs may be used. It uses the first CRTC in the array, which is ID 26 (!).\nAs you can see, this has no checks to see if the CRTC is already in use. One option is to keep track of which CRTCs have been assigned and don't re-assign them. However, I think the ideal option is to configure the CRTCs after the output.created callbacks. For example, Sway might return false from the output.created callback in which case a CRTC shouldn't be configured for it. Or Sway might want to position two outputs at the same position, using the same resolution and refresh rate in which case it makes complete sense to use the same CRTC. This depends on WLC having a way for Sway to relay position information, disable and enable outputs on the fly and request mode setting.\nWhat do you think about all of this @Cloudef?\n. I've managed to work around my issue by setting the console's outputs and resolution via kernel parameters:\nvideo=HDMI-A-1:1920x1080 video=VGA-1:1920x1080 video=LVDS-1:d\nI see from some of your other open issues that there's still work to be done in WLC on the DRM/modesetting side of things. There's little point in me submitting a fix because it might create more issues and it'll get superseded by the new DRM/modesetting code.\n. Done.\n. Amended.\n. Yeah, it dupes it, so I've added free() to my commit.\n. > Fedora is still using 0.15. If 0.15 isn't supported anymore then the rpm maintainer needs to know because they're probably waiting for the next stable version.\n0.15 is the latest stable but isn't receiving patches from the sway project. This is because the 1.0 beta is better than 0.15 in pretty much every way but is still too new to officially call it stable.. You could try running the Firefox Wayland port. Or just wait for them to support it in the main build.. > How can I change window style in wayland/sway?\n\nI can not figure out how to launch a terminal window with a specific class in sway. Any help appreciated\nI don't think there is an easy way to change window classes\n\nClasses (and instances) are specific to X11. Wayland has a similar thing called app_id. The good news is on Sway we can see all three of them and apply criteria to all of them too. As for how to set the class, you need to check the man page for the terminal you're running, but it's usually --class or --classname or --name. Note that some terminals, when running on Wayland, will take the class argument and set it as the app_id instead. Again, check the man page of the terminal you're running.\n\nI thought the best way would be to mark that terminal window upon launch and then use [con_mark=\"whatevermark\"], but unfortunately that doesn't work since for some reason it is always the previously focused window that is being marked instead of the new one.\n\nI don't understand the steps you're doing. How are you marking the window? You shouldn't need to mark the window in this case anyway.\n\nset $menu gnome-terminal --title Menu --hide-menubar --command \"bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'\", for_window [app_id=\"gnome-terminal-server\" title=\"Menu\"] border pixel 0, for_window [app_id=\"gnome-terminal-server\" title=\"Menu\"] floating enable\n\nThat's not really how it should be done. for_window adds a rule for windows matching the given criteria, and they exist until Sway exits or is reloaded. You're adding a new for_window rule every time you open your launcher.\nThis is how I'm doing it with termite:\nbindsym $mod+r exec termite --name=launcher -e \"bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'\"\nfor_window [app_id=\"^launcher$\"] floating enable, border none\n\n. The wiki shouldn't be updated until 1.0 is released. The content is still relevant for sway 0.15 which is the latest release.. Looks like this was fixed in #1769.. Implemented in 83e314bf51265ca825eaa78ffaaedeb10621f1b3.. Can you please try again with the latest commit in the wlroots branch? It may have been fixed in commit bac65078.. Done.\nBTW, I wrapped the expression on line 162 because it reached the 80 character limit, and I moved sep_height to the other side of the expression so that the multiplication part can stay together.. With the amount of changes we've done to the codebase since this issue was created, I'm confident this is no longer an issue.. I had a look at this but I couldn't see how I'm supposed to retrieve the output from mpv. It looks like we're supposed to receive a request_fullscreen event which has the output in the event data, but this event is not fired when I run the above mpv command. Instead it runs the map handler without having called request_fullscreen, and we apply fullscreen when mapping because it's marked as such in the pending state.\nFor anyone looking into this, note that it uses xdg_shell_v6 and not xdg_shell when using --gpu-context=wayland.. @emersion Regarding the damage tracking, I'm concerned about performance. Every time a view is damaged we'd have to iterate up to the workspace to check if it contains a fullscreen view. While it would save having to rerender some parts when fullscreen, it'd be adding overhead for everything when not fullscreen.. Current list of stuff outstanding:\n\nPopups not visible when parent surface is fullscreen (have to replace call to wlr_output_set_fullscreen_surface())\nContainers cannot be fullscreen (will probably do this in a separate PR once this is merged)\nFullscreen is not frame perfect\nThere might be some issues with fullscreening X11 windows - I think @emersion mentioned this but I don't know where\nwl_shell's set_fullscreen() function is marked as todo. I think a necessary function is missing from wlroots and rootston so I'd have to make a PR there too.\nInput events click through fullscreen windows. Will look into this over the next few days.\n\nEverything else should be good, including @SirCmpwn's feedback. Apart from sprinkling more asserts around - I still have to do that.\n@SirCmpwn I tried replicating your qutebrowser crash but couldn't. I tried in both my working copy and from the last pushed commit at the time. My test simply involves launching qutebrowser, right clicking to open the context menu, then left clicking off the menu to close it. Can you please check if it's still an issue in my latest commit?\nAlso, I think I've discovered an issue in wlroots where a rotated output doesn't have the wlr_output's width and height swapped. This causes my code to read the wrong dimensions for a fullscreen view on a rotated output.. You can use quotes to prevent splitting on the comma. However, Bash will swallow the quotes and not pass them to swaymsg so you have to escape them.\n$ swaymsg output FOO-1 pos \\'100,100\\'\n\nI'll leave this open for now, pending someone else agreeing that we're right to leave it as it is.. I've discovered there's actually nothing wrong with changing the repeat settings via swaymsg. I'm ashamed to admit I'm still using i3 (I have rotated outputs) and am doing most of my testing by using the X11 backend. I think X was controlling the repeat settings that it sent to my sway window. Changing the repeat settings via swaymsg using the drm backend works fine.. Closing this because the last remaining item has a specific issue for it (#1813).. It's not been implemented.. If anyone is considering working on this, please wait until after atomic layout updates is finished. Atomic layout updates will be changing the behaviour of these functions significantly.\nTo be more specific, once atomic layout updates are implemented, when you call container_destroy it can only mark the container as destroyed. The container has to remain in memory until the transaction is finished (ie. the container is no longer rendered on screen), then it is freed.. It's been decided in IRC that we can stick with wlr_render_rect() and floats for now. Please review, test and submit feedback.. Out of curiosity, what commands are you running to compile it? I'm on Arch Linux with GCC 7.3.1 too and it compiles fine for me.. We had a short discussion on IRC and came up with three possible ways we can do this:\n\nUse pointers as the PR currently does.\nMake the container type values use 1, 2, 3, 4... and pass 0 to the seat_get_focus_by_type() function if you want all types.\nMake the container type values use 1, 2, 4, 8... and pass C_OUTPUT | C_WORKSPACE etc to the seat_get_focus_by_type() function if you want all types.\n\nA benefit of option 3 is we can use that elsewhere, like sway_assert(container->type & (C_CONTAINER | C_VIEW)).. Please rebase. I was going to do some DRM testing for this but I can't compile it because wlroots has had backwards breaking changes.. I can't replicate this. I have borders showing, start Firefox from rofi, then right click on the page or left click the settings menu in the top right. The popups look aligned correctly. If I switch to another workspace and back and open the popups again then I don't notice anything different.. On second thought, I'm going to overhaul the criteria system and submit it as a new PR.. The sway-git AUR package is intentionally using the 0.15 branch. 0.15 is stable and uses CMake. The master branch is 1.0-alpha and uses Meson.. I don't think this will be changed, because you might already have a bar defined for the laptop screen, and moving the external output's bar to the laptop would cause a double up.\nWhat I do is use a wrapper script around sway which checks if a monitor is plugged in, and applies a different configuration if so:\nif grep -qs E2441 /sys/class/drm/card0-HDMI-A-1/edid; then\n    sway -c ~/.config/sway/desk.conf\nelse\n    sway -c ~/.config/sway/solo.conf\nfi\n\nHere, E2441 is the model number of one of my monitors. Both of these configuration files set the outputs and bars as desired, then include ~/.config/sway/common.conf which contains all my common configuration.. Not if sway isn't running ;-) I run that from a TTY.. I think i3 only unescapes the \\\" sequence: https://github.com/i3/i3/blob/1cdb1ab721deb9e2cead81d224f9f52390c73340/src/config_parser.c#L377\nMy implementation will only unescape sequences \\\" and \\\\. I'm happy to remove the latter so we behave exactly like i3.. Okay, have a look at that. It looks like xwayland (or maybe wlroots) doesn't allow multiple xwayland surfaces to be activated at the same time, but it works for XDG shell (using filezilla as my test).\nIt feels a little dirty because setting focus uses an iterator function, while unsetting focus just calls itself recursively. I prefer not using the iterator functions to be honest.. What this code is doing is: If there are several views in a workspace, and two seats working in that workspace, and one of the seats fullscreens a view, it moves the other seat's focus to the fullscreen view. In other words, the intention is to iterate the seats, get the workspace they're currently on, and if it's the same workspace as the view being fullscreened then change their focus.\nChanging it to be seat_get_focus_inactive(seat, workspace) will always return a view on the workspace being fullscreened, which means the workspace will match and the seat's focus will be changed regardless of what workspace they're on.\nWhat exactly is happening here? Is there no focus at all on the seat? Is that supposed to be possible?. > Right now, the fullscreen function uses seat_get_focus which will fail if the window is inactive\nseat_get_focus should return the focused container across the entire tree for the given seat. If it's returning NULL, that's quite unusual. Perhaps that seat has never focused a container before, or all the containers it's focused have been killed. I think the correct solution here is to call seat_get_focus as it did, then check if focus is NULL and only execute the following code if focus is valid.\n\nFrom what I understand, seat_get_focus_inactive will search and fetch the container that is focused or focused but inactive.\n\nThat's correct, but it will only search within the given container, which in your case is the workspace of the fullscreen view. The code is trying to determine if the seat's focus is in the same workspace as the fullscreen view or not, so limiting the search area to the workspace is not of any benefit. It needs to be across the whole tree, which is why seat_get_focus is used.\n\nI'm not sure how exactly you are using \"workspace\" here, but in the code it's just the parent container on the workspace.\n\nI don't understand what you mean by that.\n\nSo yes, it will always return a view on a workspace if a window exists on it. I believe that's desirable behaviour.\n\nThat's not the desired behaviour. The code is trying to determine if the seat has focus in the workspace. If so, it'll force the seat's focus to be the fullscreen view. If it didn't, the seat would have focus on a view that is hidden behind the fullscreen view.\n\nIt won't return anything the workspace is empty and/or you're on a different one.\n\nMy understanding is that seat_get_focus_inactive will return whatever was most recently focused within the container you pass to it. It doesn't care if you're currently on another workspace.. Yeah, that crash makes sense if focus and focus_ws are NULL.\nfocus is intended to be the actual container that has focus. focus_ws is the workspace that the focused container is sitting on. To find the workspace, you'd normally just use container_parent, but in our case focus might be a workspace itself (if the seat has focused an empty workspace). Hence why we need to wrap it in an if-statement.\nThere was talk of implementing a container_self_or_parent function which would operate similarly to container_parent but also consider the given container rather than just its parents. That would remove the need for an if-statement here and make the code easier to read. It's on my to do list.\n\nHell, is focus_ws needed?\n\nYou could re-use the focus variable, but the meaning of the variable becomes incorrect if you do that. Actually, you can't. focus is used a few lines later.. Thanks!. Alright, I'll revisit this.. Okay, I've changed it to match i3's implementation and this is ready for review again.. Just a note that I had to add using_criteria to the handler_context struct, because unmark needs to know if criteria is being used.. Thanks!. It does now.\nI had somehow reached the conclusion that seat_get_focus(seat) was the same thing as seat_get_focus_inactive(seat, &root_container) and as part of the criteria overhaul, replaced it with seat_get_focus. I've since learned it's not the same thing. seat_get_focus(seat) does an additional check on the seat->has_focus property. So ignoring that check meant that seat_get_focus can rightfully return NULL.\nI've changed it back to seat_get_focus_inactive(seat, &root_container) which is what the current master branch does and it works fine now.. Sure.\nTest sway won't crash on launch when criteria contains multiple errors by launching with the following config (proves #1966 is fixed):\nfor_window [id=\"nautilus\"] border pixel\nfor_window [id=\"gnome-calculator\"] floating enable; border pixel\nfor_window [class=\"Chromium\"] border none\nfor_window [title=\".*QEMU.*\"] border none; fullscreen enable\nfor_window [class=\"qutebrowser\"] border none\n\nTest sway doesn't crash when launching programs from dmenu (proves #1965 and #1963 are fixed):\n\nNo special config needed, just launch a program from dmenu.\n\nAs well as the test plans in the original PR (#1943).. I can't replicate this. @SirCmpwn Please confirm.. The former should be easily fixed. You don't need to traverse the tree to figure out if the container is at the edge of the output. Just compare the container's position to the output's dimensions (something like container->x == 0 and container->x + container->width == output->width).. The real problem here is that bindsyms still run when the lockscreen is active. Although if someone were to SSH into the machine when swaylock is running and run swaymsg workspace 2, it shouldn't crash either.\nMaybe a good way to handle this to deny IPC commands and keybinds if a lockscreen is active?. Okay, I've fixed a heap of opacity issues.\nI had to remove the box scaling from render_rect and apply all the scaling in the border functions. This is because it needs to get the width of the title and marks textures to position things properly, and those widths are scaled, and we don't like unscaling them.\nThe title and marks textures are still slightly incorrect when using opacity. I'm not sure what's going on there. I'm not rendering anything behind it.. The scaling issue is resolved. Please consider merging.. I just checked i3. The way it's implemented here is the same as i3's.\nHowever, I did notice a rendering difference (i3's tabs have left/right borders as well as top and bottom). I'll fix that now.. In i3, if I create a tabbed container with some views, focus parent (ie. the tabbed container), then run i3-msg border pixel 5 there is no change. If I focus a view and run i3-msg border pixel 5, the left/bottom/right borders take on the 5px thickness until I focus a different view within the tabbed container. This is the same functionality as implemented here.. No. It changes the left/bottom/right borders based on which view is focused.. > wlr_render_rect has an issue with lighter colors not blending\nI'm confused. Shouldn't that mean the fix should be made in wlroots?. Good catch. I've amended the commit.. I've updated the left and right calculations as discussed.. Hah, I was about to submit my own PR. It's exactly the same, except I named the variable allow_change_focus. I like your name better.. >> I will try to combine some of the rendering parts to minimise the amount of duplicate/similar code.\n\nIs it possible to do that now?\n\nDone. Removed more lines of code than I added :D\nAlso, I checked i3's implementation and made it pixel perfect. Marks now show in titlebars for tabbed and stacked containers too.. Thanks!. I think what's happening is the y_offset is being miscalculated and the container's title bar is being drawn over the top of the tabs. You can still focus left and right to change tabs.. The gedit issue is happening because we send an unmaximize to the client. This makes gedit draw the outer glow as part of its surface. It also uses rounded corners which looks terrible when we wrap the surface in our own borders.\nIs it acceptable to not send the unmaximize event? The other option would be respecting CSD and accounting for the glow offset everywhere.\nEDIT: I've just realised I should be calling something like wlr_xdg_toplevel_set_tiled as per #1988, but this function doesn't exist in wlroots yet.. @SirCmpwn I haven't been able to replicate your output problem, but I think I fixed it in \"Fix getting adjacent output\". Can you please test again?\nThe only outstanding work to be done in this PR is the xwayland auto floating which depends on wlroots changing things (https://github.com/swaywm/wlroots/issues/1010). I'm happy to do that later if that's easier.\nI'm happy to squash all my commits into one prior to merging if you prefer a cleaner git history.. > Can you prepare a summary of necessary follow-up work? e.g. move/resize\nI've created a floating status issue here: #2063. I can't replicate either of your problems, and I can't determine what would be causing those behaviours by looking at the code. Can you please investigate those?\nFor focus jumping to the third output, I would start by checking what values we're passing to wlr_output_layout_adjacent_output (from container_get_in_direction). Keep in mind the swayc x and y is now layout-local - not that it should matter because your focused output's position is 0,0 anyway.. I've fixed a bug with the move command, but I admit I was unable to replicate that myself.\nAlso, wlroot's wlr_box_contains_point is calculated incorrectly which could be causing you issues too. . I fixed the damage issue when unfullscreening into floating. I was setting the swayc geometry before calling view_configure, then there was a race condition where we might render another full screen surface before mpv sends a smaller surface, and at that point we couldn't damage properly because we didn't have the original swayc geometry any more.\nMy solution of storing the view's saved geometry as well as the swayc's saved geometry isn't very elegant. I'm looking forward to doing atomic because the view configuring and damaging code will get overhauled.\nI assume your weirdness with mpv --gpu-context=wayland is the fact that it's not scaling. We let the client choose their own dimensions for floating (within reason), and mpv is returning the same dimensions as the video. This makes sense I guess; mpv would be upscaling the video if it were to scale it. Can you confirm that's what you're experiencing?. Thanks!. Thanks!. * swaymsg gaps lol completes successfully but should display expected syntax\n swaymsg gaps edge_gaps with no more arguments makes sway crash\n I'm experiencing some damage issues if I do the following:\n    * Launch without any gaps commands in config\n    * Open a terminal and run swaymsg gaps outer 10. @SirCmpwn Is that build failure my problem? I can't see what I'm doing wrong.\n[2/212] Generating sway.5 with a custom command.\nFAILED: sway.5 \n/usr/bin/sh -c '/usr/bin/scdoc < ../sway/sway.5.scd > sway.5'\nError at 559:1: Cannot nest inline formatting.. Thanks.. * Have `focus_wrapping force` in your config\n\n\nCreate the layout H[view, V[view, view focused]]\nmove left\nObserve focus has changed to the left view\nShouldn't it not change in this case? The i3 docs suggest I would have to run focus parent then focus left.\n\nI'm all for dropping legacy syntax by the way.. I've rebased this and updated the PR description. It's ready for review now.. Both issues are now fixed.. I like that suggestion. We could also take the same approach for {container,popup}_at: Check the focused container first, then everything else. I'll adjust it.. This is ready for review again. You may want to consider comparing it with master rather than just looking at the latest commit, because the latest commit reverts/replaces a fair amount of stuff in the earlier commits.\nThe latest commit changes container_at so that it checks subsurfaces only for the focused view, then steps through the floating tree then the tiling tree. Also, the floating_container_at function is now included as part of container_at.\nThe commit also changes the rendering. We run through the tree like normal but skip rendering any subsurfaces. Then after we've gone through the tree, we render the subsurfaces only for the focused view.\nWith this change, it means if a popup is open and you use a focus command to focus another container, the popup will disappear. If you then focus the original container again then the popup will reappear. I'm guessing the desired behaviour is to kill the popup when focus is lost from the view. I'll save that as an exercise for another day though.\nTo test, play around with popup menus overlapping other views, in both tiling and floating contexts. A good example is having one floating view and one tiled view behind it, with the tiled view focused and a popup overlapping the floating container.. We can't take that approach, because the focused view might be a tiling view which appears behind a floating view.. Okay, give this one a ago. Similar to before, but it renders subsurfaces for all views, then popups for the focused view at the end. I can't fault it, having tested with weston-subsurfaces.. Because subsurfaces should be rendered for all views, even ones which don't have focus, and popups only need to be rendered for the focused view.. Because, from what I understand, if you move focus away from a view which has a popup then the popup should be closed. Correct me if I'm wrong.. Also, your comment here suggests that popups only exist on the focused container:\n\none other possible approach would be to render the focused container last\n\n...because we're trying to make popups appear on top of all other containers.. We can't render popups along with everything else because another view might get drawn on top of it. That's the problem this PR is solving. Popups must be drawn last. But subsurfaces must be drawn along with each view's surface because they might get covered by something else, such as a floating view.. Then it works correctly. The popup from the tiled view is displayed on top of the floating view. I even gave that as an example in an earlier comment.\n\nA good example is having one floating view and one tiled view behind it, with the tiled view focused and a popup overlapping the floating container.. Due to the age of this PR, I'll probably make a v2. I've been prioritising other features in the meantime.. I get some weird behaviour here. I created layout T[view #1, view #2, view #3 focused] where the workspace is the tabbed container, then ran move right. My layout then changed to H[T[view #1, view #3 focused, view #2]] where the workspace is splith and the new C_CONTAINER is tabbed. But it failed to move my view into the split, and instead moved it around within the tabbed container.. Yep, that one's fixed. But I found another.\n\nCreate layout H[view, T[view focused, view]] and run move left. The result is, believe it or not, H[view, H[view, H[view]]] and the inner-most view itself has layout=tabbed.. I don't understand that IPC code. Why does it show the parent's layout instead of the current node's layout? And if it is supposed to show the parent's layout, why doesn't it do it if the parent is the workspace?\ni3 just shows the current node's layout directly: https://github.com/i3/i3/blob/26f50898fd72c22a27e5b12db83808161bc3d9cd/src/ipc.c#L327\nSorry that this is diverging a bit.. Thanks!. Thanks!. I've updated the PR so it's now a basic working implementation. Atomic updates are implemented for the resize command only. Almost everything else is broken because everything else writes to the current properties/state, which get overwritten with the pending state when the transaction is applied.\nThe PR is ready to stash the last good surface texture away, but we need to have a good discussion on whether that's actually what we want to do, because apparently reading textures back from the GPU is expensive. So in lieu of a solution, if the transaction stalls for a view then you'll see the other surfaces resize before their borders and everything else does.\nIdeas mentioned in chat for preserving textures are:\n\nCopy the texture as originally planned (bad due to being expensive), or\nHave two wlr_textures for each surface, and swap them when we want to preserve one, or\nExpose the pixel data to sway so we can make a new texture from it, or\nDon't damage/rerender the area being updated until everything is ready (doesn't work if there's a layer above or below that needs to be updated)\n\nAnyway, when you resize a split, here's what's happening:\n\nThe resize command calls container_recursive_resize, which now sets the new dimensions in the container's pending state rather than directly to the container's width and height properties.\nThe resize command calls arrange_children_of. This function will be removed in favour of arrange_and_commit, but to make rebasing easier it exists as a wrapper around arrange_and_commit.\narrange_and_commit does the following:\nCreates a new transaction\nArranges the children as it did previously, but with the following differences:\nEverything is saved into the pending properties rather than the swayc's main properties.\nview_autoconfigure no longer calls view_configure and instead sets the view_{x,y,width,height} in the pending state.\n\n\nAdds each processed child to the transaction.\nAdds a single damage box to the transaction - the same box as the topmost parent's geometry (note the topmost parent does not move or change size, so only one damage box is needed and not a before and after).\nCommits the transaction with transaction_commit.\n\n\ntransaction_commit iterates through the instructions/containers/configures in the transaction.\nFor views, view_configure is called and the serial is stored. The view's current surface texture is copied into view->saved_texture.\nFor C_CONTAINERs and anything else, the instruction is marked as ready instantly.\n\n\ntransaction_commit prepares a timer (currently set at 200ms). If any views have not acknowledged the configure by then, the transaction will be applied anyway.\nWhen rendering, the main surface of each view will use the view->saved_texture if it exists.\nAs each view commits, it calls transaction_notify_view_ready with the view and the serial from that commit.\ntransaction_notify_view_ready marks off the view in the transaction and applies the transaction if all are ready.\ntransaction_apply copies the pending state into the main swayc properties and removes the view->saved_texture.\ntransaction_apply applies the damages that is stored in the transaction.\nThe transaction is then destroyed.\n\nA good test is to change the TIMEOUT_MS from 200 to 2000 (2 seconds). Then download emersion's hello-wayland program (https://github.com/emersion/hello-wayland) and rewrite the configure handler so it ignores subsequent configures (ie. making it a misbehaving client):\nstatic void xdg_surface_handle_configure(void *data,\n        struct xdg_surface *xdg_surface, uint32_t serial) {\n    static bool done_first = false;\n    if (!done_first) {\n        xdg_surface_ack_configure(xdg_surface, serial);\n        done_first = true;\n    }\n}\n\nThen open an xdg_shell terminal, use that terminal to launch hello-wayland, then use the resize command. You'll see it stall for 2 seconds before applying. You'll also see the surface resize before the borders do, due to the lack of texture preservation as mentioned in the second paragraph.\nMoving forward from here:\n\nWe'll need to change the entire codebase to write into the pending state instead of the current properties. A good way to do this would be to remove the current properties and have a swayc->current state. That way we know we'll have updated all references because it won't compile otherwise.\nWe need to handle tree modification operations, such as creating containers, reparenting containers and deleting containers. To do this I think we'll need to store new children lists in the pending state, and that makes for ugly code like container->pending.parent->pending.children. I don't know of a better way to do this.\nWe'll need to handle cases where transactions queue up, like when you repeatedly resize a split.. I'm making good progress on this.\n\nI decided to make it so the main swayc/view properties are the pending state rather than the current state. This is because so much of the code works with these properties, and they need to work with the pending state. The only exception is rendering code which works with the current state. So the good news is everyone can continue to use container->x and so on everywhere except in the rendering code.\nBTW, I consider the main/pending properties to be the \"live\" state, and the current state to be what the renderer displays which might be a few frames behind. So IPC events are sent when the live/pending state is changed.\nI discovered we called the arrange_foo functions in both high level functions and low level functions. I wouldn't be surprised if moving a view could trigger several arranges of the same containers. I've moved these out to be high level only. So arrange functions are typically called from command handlers or from a view's map/unmap handler.\nI've made floating, fullscreen, and floating + fullscreen all work with transactions.\nWhat's left now is:\n\nHandling tree operations.\nSaving the texture.\nMaking the title and marks textures atomic.. Update on this: It now preserves the buffer/texture using the wlr_buffer refcounting. I am now waiting on a way to access the buffer after the view has unmapped (see https://github.com/swaywm/wlroots/issues/1065).. This is now ready for testing. I'm going to start using this as my daily driver.\n\nMy latest commit implements atomic layouts for containers that are mapping, reparenting or unmapping.\nHow it works is we still have the regular tree, but the properties you're currently familiar with may not reflect what is actually rendered. Each container has a current state, and that state contains the properties that are rendered as well as another children list. When rendering, the con->current.children list is used rather than con->children. In most cases we can continue working with the tree as normal, and if a transaction is applied to a section of the tree then it'll eventually get updated in the rendered/current state.\nAnother key point is that destroying containers is now split into two steps: destroying and freeing. Destroying removes it from the tree (but keeps it in the current.children list of its old parent). When the container is no longer involved in a transaction (ie. removed from on-screen) then it'll be freed via container_free.\nFor views that are unmapping and destroying, a similar system is used. An unmapped view will still contain a reference to its swayc until it's no longer in a transaction. For this reason we can't use view->swayc to determine if a view is mapped, so a better check is view->surface. view->surface is set to NULL immediately at the end of each implementation's unmap handler.\nThe destroy callback in the view implementations has been renamed to free, to keep the terms consistent across the project.\nTo test what happens during a transaction, you can set TRANSACTION_DEBUG to true at the top of transaction.c. This makes it always wait for the timeout to expire before applying the new layout, even if the views are ready. You'll also want to bump up the TIMEOUT_MS to something like 1000 (1 second). Doing both of these allows you to observe what's rendered while a transaction is in progress, and test what happens if you interact with things while transactions are in progress. For example, launch a view then launch another one before the first one has appeared on screen.\nIf you use TRANSACTION_DEBUG and open several views, you will notice that no view is shown as focused while the transaction is happening. This is because the focus works with the pending tree, and your focus is on the view that hasn't appeared on screen yet. I think this is desirable behaviour, because it allows you to hammer out commands (eg. splitting and opening) without having to wait, and the rendered state will catch up.\nPossible issues or other points of discussion:\n\nWhen a transaction is happening, I'm still sending frame done to everything despite rendering a saved buffer. I'm not sure what the consequences of this are. I haven't seen any adverse effects and mpv seems to be fine with it.\ncontainer_at uses the pending state of the tree, not what's shown on screen, but with a timeout of 200ms I don't think we need to worry about this.\nIn theory, transactions that complete out of order may mess up the rendered state. I'm not sure how likely this is in practice though as there's usually only one transaction running at a time. So my strategy here is to wait and see if it's a problem, and if so I'll look at a solution. If it does happen, it'd be recoverable by doing another arrange operation (eg. switch workspace and back). Forcing transactions to complete in order is now implemented.. @atomnuker\nRunning mpv on one workspace and quickly opening and closing another mpv instance on the same workspace crashes the compositor. Works with any video and works even if mpv hasn't had a chance to open a window yet.\n\n\n\nThe mpv issue wasn't just related to mpv. Opening any view then closing it before it appeared on screen would cause the closing transaction to complete before the opening transaction. I actually had this working during development but accidentally broke it when I fixed another issue. To fix this, I've made it use a linked list of transactions and force them to apply in order.\n@SirCmpwn \nI suspect the overhead of spawning the swaymsg process 100 times and connecting to the IPC socket makes the test too inaccurate. But rather than implement interactive resize, an easier option might be to allow held keybindings to repeat, then hold your keybind for resize shrink width 1px. The tests also depend on how long the views take to respond to their configures, so if we're serious about performance then a good first step would be to obtain figures of how much time is spent waiting for views vs not waiting for views.\n@martinetd \n\nrender_container_stacked can still call render_view with NULL colors\n\nI've fixed the colours thing by initialising them to the unfocused colour. I think we'll ultimately have to track which view is visibly focused separately to which view is actually focused. I'm not sure if that should be done as part of this PR though.\nI've fixed some related issues to moving in and out of tabs and stacks too.\n\nAlso2, hits sway_assert when trying to move in an empty workspace\n\nFixed.\nEverything I'm aware of is fixed now.. @martinetd Should be fixed now.. I've added the debug option. To enable, launch sway with SWAY_DEBUG=txn_timings. One transaction can span multiple outputs and those outputs can have different refresh rates, so for the number of frames it assumes 60Hz.\nAn example log message is:\nTransaction 0x5599940d4e70: 0.0ms arranging, 24.0ms waiting, 24.0ms total (1.5 frames if 60hz)\n\nAfter this is merged, I plan on standardising how we handle debugging. I don't like strcmping environment variables multiple times (see SWAY_DAMAGE_DEBUG). I would make SWAY_DEBUG a comma separated string which is used to populate a bitfield server.debug_options. Then in various places we can check that to enable debug features. Another benefit of this is we could enable and disable debug features at runtime using something like swaymsg debug 'foo,bar'.. Done. New example log output (using two Firefox instances):\nTransaction 0x564224623e40 committing with 4 instructions\nTransaction 0x564224623e40: 1/2 ready in 4.9ms (Mozilla Firefox)\nTransaction 0x564224623e40: 2/2 ready in 5.1ms (Mozilla Firefox)\nTransaction 0x564224623e40 is ready\nApplying transaction 0x564224623e40\nTransaction 0x564224623e40: 0.5ms arranging, 5.2ms waiting, 5.7ms total (0.4 frames if 60hz)\n\n. Yeah, stacks (and tabs) are a bit weird because there are no separated pending and current states for the focus stack. This means when you add or remove a view in a stacked/tabbed container, it tries to render the new focus immediately.\nI haven't given much thought to the focus stack yet. We could copy the entire focus stack, or perhaps we could store a property in each container to say whether it should be rendered with focus/focused_inactive/unfocused styling. I'll come up with a good solution, but I'd rather do this in a follow up PR.. Fixed. It happened when a view is a grandchild or deeper of the workspace, is fullscreen, and unmaps. The workspace would not be included in the transaction and its pointer to the fullscreen view was left dangling.. I've renamed the free callback to destroy in the view implementations as per a comment thread.\n\nWhen fullscreened, qutebrowser's left border is shown\n\nI can't replicate this. Can you provide minimal config and steps to replicate? Replicated - leave it with me.\n\nWhen exiting fullscreen, there are damage problems on swaybar\n\nFixed. I've made it damage the output (rather than workspace) when a fullscreen view unmaps.. The fullscreen issues are now fixed.. @martinetd The output disconnect crash is fixed, and the timer source is now removed.\nFor the IPC response, it seems weird that an output had no workspace. Can you describe how you triggered that behaviour?. Completely random guess here, but could it be that the system is under too much load? Could it be taking more than 16.6ms to render a frame? That would explain why it happens consistently for some people and inconsistently for others. And why it happened for emersion when he opened 3-4 instances of mpv.. I see what's happening.\n\nA workspace is being destroyed via container_workspace_destroy.\ncontainer_workspace_destroy frees the sway_workspace then calls _container_destroy.\n_container_destroy emits the destroy event then destroys the swayc.\nThe seat code listens for the destroy event and calls handle_seat_container_destroy.\nhandle_seat_container_destroy uses container_find, which sees that the container is a workspace and tries to access container->sway_workspace, which is a dangling pointer.\n\nLeave it with me.. Superseded by #2350.. Thanks!. I found a problem. Create layout H[view, view focused] then run splitv. The indicator bar appears at the bottom as expected. Then create a new view. It appears horizontally. The final representation is H[view, V[view], view]. Thanks!. I can't reproduce this any more. It was likely fixed when atomic layout updates was merged.\n@emersion Can you please confirm and close?. I don't think we should do this. Consider a new user who installs sway, is happily using it, then accidentally presses the key binding to lock their screen. Assuming we don't set a lockscreen background image, their screen would turn a solid colour and they would have no idea what's going on, and would probably reboot and lose their work. For this reason I think the lockscreen should not be configured by default, but a commented example in the config is fine.. Can you please provide steps to reproduce? I set up two outputs in a nested session with one of them having a scale of 2, then moved a floating view between the two and observed the title texture updating correctly. Then I moved a tiled view between the outputs and also observed the title texture updating.. This is fixed in the atomic PR.\nFor anyone trying to replicate this, I found I needed to have for_window [class=\"Zenity\"] floating enable in my config, and I needed to run zenity on an empty workspace which means launching it via rofi rather than by terminal.. Can you confirm it's not an issue in my atomic branch?. Thanks!. I managed to create a crash but I've not been able to replicate it since. I was on workspace 1 which was empty, and pressed a bindsym to launch terminator, then switched to workspace 2 before it appeared. It opened on workspace 1 and took me back to workspace 1. Then when I tried to close terminator the crash occurred.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x000056180f708baf in container_parent (container=0x700000006, type=C_OUTPUT) at ../sway/tree/container.c:503\n503     } while (container && container->type != type);\n[Current thread is 1 (Thread 0x7f25674f0380 (LWP 21407))]\n(gdb) bt\n#0  0x000056180f708baf in container_parent (container=0x700000006, type=C_OUTPUT) at ../sway/tree/container.c:503\n#1  0x000056180f711fe1 in workspace_is_visible (ws=0x56180fe4a540) at ../sway/tree/workspace.c:437\n#2  0x000056180f6eb712 in render_floating (soutput=0x56180fc7f6f0, damage=0x7ffe89a1ca40) at ../sway/desktop/output.c:889\n#3  0x000056180f6ebc5a in render_output (output=0x56180fc7f6f0, when=0x7ffe89a1ca30, damage=0x7ffe89a1ca40)\n    at ../sway/desktop/output.c:987\n#4  0x000056180f6ec241 in damage_handle_frame (listener=0x56180fc7f7e8, data=0x56180fc71250) at ../sway/desktop/output.c:1128\n#5  0x00007f25670f1cff in wlr_signal_emit_safe (signal=0x56180fc712b0, data=0x56180fc71250)\n    at ../subprojects/wlroots/util/signal.c:29\n#6  0x00007f25670e330d in output_handle_frame (listener=0x56180fc71348, data=0x56180fc84920)\n    at ../subprojects/wlroots/types/wlr_output_damage.c:50\n#7  0x00007f25670f1cff in wlr_signal_emit_safe (signal=0x56180fc84a38, data=0x56180fc84920)\n    at ../subprojects/wlroots/util/signal.c:29\n#8  0x00007f25670e67eb in wlr_output_send_frame (output=0x56180fc84920) at ../subprojects/wlroots/types/wlr_output.c:532\n#9  0x00007f25670e682f in schedule_frame_handle_idle_timer (data=0x56180fc84920) at ../subprojects/wlroots/types/wlr_output.c:539\n#10 0x00007f256528a9ac in wl_event_loop_dispatch_idle () at /usr/lib/libwayland-server.so.0\n#11 0x00007f256528aa66 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n#12 0x00007f256528914c in wl_display_run () at /usr/lib/libwayland-server.so.0\n#13 0x000056180f6de1d4 in server_run (server=0x56180f92a7c0 <server>) at ../sway/server.c:146\n#14 0x000056180f6dda9a in main (argc=4, argv=0x7ffe89a1cf78) at ../sway/main.c:432\n\nAlso, if I do the above launch-switch-map trick with terminator, the following gets logged which is worrying:\n[sway/tree/view.c:480] Command 'title_format' failed: Only views can have a title_format\n\nI have for_window [title=\".*\"] title_format %title (%shell) (%class%app_id) in my config.. In view_execute_criteria, the call to seat_set_focus(seat, view->swayc) at the bottom of the for loop needs to be moved to before the call to execute_criteria. Otherwise it will try to apply the criteria to the workspace (or wrong view) if you've switched workspace between the launch and map.\nFor the crash, I can replicate this somewhat reliably now. If it has to create the workspace for the view then the workspace is added to the main/pending tree. The output needs to be arranged so the workspace is put in the output's current.children list. The view implementation does the arrange on the view's parent. In this case the parent is the workspace, but the arrange needs to be on the output.\nWe can either:\n\nchange view_map to return the container that needs to be arranged (output if workspace was created, workspace if view is fullscreen, else view's parent) and have the view implementation arrange it, or\nhave view_map arrange it.. > criteria to the workspace\n\nI made the fix in another PR and it got merged to master. So when you rebased it would have been resolved in your branch.\n\ncrash\n\nYeah, it may very well be fixed by now. I'll test it within the next day and let you know.. Thanks!. My understanding is that the view can create itself but choose not to map immediately. During this delay the user might focus another container, in which case the size it needs could be different. So if we did try to preempt the size when it's created then we'd have to arrange it again when it sends the map request. The positive would be that when it maps, the surface will probably already be the correct size so the transaction would have one less view to wait on. This isn't a huge positive considering it still has to wait for the siblings to resize.\nIt would be fairly complicated to determine what size the view should be without actually arranging its siblings. You'd need a function similar to arrange_children_of. And to further complicate it, you don't know what size it should be until you know whether it'll have borders, will be placed on a different workspace due to criteria, or will be floating.\nIn my opinion the negatives greatly outweigh the positives. It's a lot of complicated code for something that the user is never going to see.\nIt sounds to me like the recommendation is intended for floating window managers. . It must. After we send the configure, the client takes time to create the buffer, then commits or requests to be mapped when it's done. This could take 0ms, or it could take 10 seconds. It would be stupid for the compositor to block the event queue while waiting for the client to map, which means the user might change focus between these operations.. Thanks!. This appears to be a bug in pinentry-gtk-2 (or gtk-2) which occurs when the compositor requests a size outside of the view's min/max size hints. This happens when it's tiling.\nThe issue does not occur when the view is floating because it would be at the desired size. And it would be floating by default, except that we don't recognise the NET_WM_STATE property yet. The client sets it to MODAL (this is wrong - it actually sets it to normal).\nI tested it by removing this call to gtk_window_set_geometry_hints: https://github.com/gpg/pinentry/blob/d0eaec8ef60be9b4d1aa5993c11d261a35202a2e/gtk%2B-2/pinentry-gtk-2.c#L112-L113. Correction: pinentry-gtk-2 doesn't set the NET_WM_STATE to MODAL. It looks like it does in the code though.\nYou can't xprop it easily because it does a cursor grab - so I had to comment out the grabbing part of pinentry in order to xprop it. And yeah, the state is set to normal.. What if we could make it configurable? Such a feature would help with power saving.. I think by quality of life he's referring to denying users the ability to have transparency in their lockscreens.. We can't easily tell if a surface is opaque. That requires reading data off the GPU which is slow.. This now uses the opaque region. It depends on https://github.com/swaywm/wlroots/pull/1108 being merged. Without it, it won't find the opaque region.. Yeah, I think there's still plenty to be done in this area. We don't check much for occlusion when damaging surfaces (we do for views but nothing else). And view_is_visible doesn't check for lockscreens or other occlusions.. The latest commit depends on https://github.com/swaywm/wlroots/pull/1105 being merged.. Rotation is now re-implemented. I used a matrix instead of the previous implementation. The matrix stays in effect for all children, so subsurfaces and any child views will be rotated without us having to do anything. I say child views because eventually we'll be able to float containers.\nTo test, I set con->rotation = 0.1 at the start of render_floating_container. There is a scissoring issue (the damage box should take into account rotation) but that's going out of scope.. Mmkay, I'll refactor the remaining stuff in output.c as part of this PR then.. Closing this for several reasons:\n\nI don't want the the PR to become too big\nThere's conflicts which will be annoying to resolve\nIt's holding up my other work like my send frame done PR and popups PR\nPeople don't seem overly supportive of this PR anyway\n\nI'll keep my branch around in case we ever want to come back to it though.. The rendering is fixed in #2183, and the cursor interaction will be fixed in #2062 which I'll do afterwards.. Fixed by #2772.. I had a look into this. From what I understand, the width and height we send in the configure becomes the geometry, and in most cases (not alacritty) the surface may end up being bigger than this. So the surface overflows what we believe the boundaries of the container to be, resulting in damage issues and misaligned pointer events.\nI would think the solution would be something like:\n\nWhen doing pointer events, add geo.x/y to the coordinates we pass to wlr_surface_surface_at (in container_at_view).\nIn output_damage_whole_container, if the container is a view then use the surface size instead of the container's size.\nWhen rendering a floating container, instead of rendering at view_x, render at view_x - view.geo.x and likewise for y..     \u250206:12:04  emersion | ryan-au: have you seen https://github.com/swaywm/sway/pull/2204\n    \u250208:29:49   ryan-au | emersion: Can you explain why that solves the problem?                         \n    \u250208:30:17  emersion | ryan-au: view->{width,height} is set to 1                                      \n    \u250208:30:57  emersion | (and then the view is resized by the client to be larger, but the view size isn't\n    \u2502                   | updated)                                                                       \n    \u250208:31:28  emersion | this patch will need to go in anyway because popups                            \n    \u250208:31:34   ryan-au | The swayc dimensions should be resized if a floating view is resized by the client\n    \u250208:31:54  emersion | yeah, but that's tricky                                                        \n    \u250208:32:05   ryan-au | This might explain why my floating rofi window only has a top border :)        \n    \u250208:33:12  emersion | not sure                                                                       \n    \u250208:34:21   ryan-au | When I say the swayc dimensions should be resized, I mean there is code in place\n    \u2502                   | that does that                                                                 \n    \u250208:34:25   ryan-au | It should be doing it already                                                  \n    \u250208:36:01  emersion | oh, i think the swayc is fine                                                  \n    \u250208:36:05  emersion | but the view size isn't                                                        \n    \u250208:36:21  emersion | hmm, i don't remmeber                                                          \n    \u250208:36:26  emersion | remember*                                                                      \n    \u250208:36:59   ryan-au | Your PR is removing the swayc box check                                        \n    \u250208:39:09  emersion | ah, so the swayc size is incorrect\n\ntl;dr: The swayc's dimensions are 1x1, and shouldn't be. Removing the box check is not the right solution to the problem.. Nothing, but the other call to view_set_tiled is in container_set_floating and it makes sense for them both to be near each other.. That first one is perplexing. I don't see how we could have a freed instruction in the container's instruction list. We remove it from the list before we free it, unless it somehow got placed into a different container's list but I don't see how that can happen either.\nFor the second one, it doesn't look like Firefox requested to map. You would have the arrange log messages soon after \"New xwayland surface\" if it did. In fact, I think it stopped pretty early because when I start Firefox I get heaps of XCB log messages and several surfaces. So maybe that's a Firefox issue, or you had an instance open and it just opened a new tab or something.\nAs for the actual crash, I note that setting focus to a container can cause seat_set_focus_warp to destroy a workspace. This is likely the problem - the output is not being arranged, which causes the workspace to not be removed from the output's current children list. The workspace is marked as destroying, and when it's involved in another transaction it gets freed. I'm reluctant to create a transaction inside seat_set_focus though, because they should ideally only be done by high level code. If we scatter them everywhere then it becomes a mess and isn't very performant. I'm not sure what the best way is to handle that yet. I'm also not sure why I can't reproduce this.. When I run gnome-calculator it launches in tiling mode. The border is there and the surface is rendered. Can you provide more info?. I realise I'm a bit late to the party, but the first thing to check would be to try it with a different modifier key. Try Mod1 (Alt) instead of Mod4.\nThe other thing would be to try the 1.0 alpha. Your log contains references to WLC, so you must be using 0.15 which is no longer receiving support.. My interpretation of the i3 docs is that this should switch focus between a floating container and a tiled container. For example, if you had a floating container unfocused and you had a tiled container focused, you could run focus mode_toggle to focus the floating container.. > insight into why the destroy functions return the parent container and whether this is a good idea.\nThey return the parent container so that the calling code can add the parent to a transaction.. > Note that the original second output workspace sticks around even though it's empty, this is another bug\n\nThis appears to be due to the empty workspace on the second display. Because it is empty...\n\nWouldn't the solution be to clean up the empty workspace after the move operation? Then you wouldn't have to deal with this situation where the workspace has no output.. Thanks!. That ipc_feature enum appears to be unused BTW.. Yeah, I'm fine with leaving that. Are you happy for this to be merged now?. Thanks!. Needs rebase.. Code looks good to me. Will test it later.. Thanks!. Yes it is. Each shell's implementation calls arrange_and_commit in the request_fullscreen handler. The fullscreen properties are copied into the container state. And when rendering, we use the current properties to check if there's a fullscreen view.\nIs there a bug somewhere that causes it to not work as intended?. My latest commit changes the following:\n\nresize grow|shrink <direction> <amount> <unit> or <amount> <other_unit> is now implemented for both tiling and floating containers.\nThe general idea is you run resize grow 10ppt or 10px and the ppt value will apply if you've focused a tiled container, or px for floating.\nIf you throw tricky values at it like 10 or 20px then it'll figure out the most appropriate value to use. In this example, a floating container would use the 20px while a tiling container would use the 10 and interpret it as ppt.\n\n\nIf running resize set 0 500 on a floating container, it now ignores the 0 axis as per the i3 docs rather than setting it to 0.\nMy initial commit would introduce a failed assertion if you tried to run resize grow|shrink <direction|axis> with an up/down/left/right direction on a tiled container. I'm not sure if we even want to support this, so I've made these directions function the same as width or height, and are marked as TODO.\n\nI've also made some improvements to the code structure in this file:\n\nParsing the amount along with the unit is a task we have to do in several places, so I made it a function and created a struct resize_amount to represent an amount + unit.\nThe cmd_resize entry function previously delegated the set stuff to another function and handled the grow|shrink stuff itself. It now delegates both.\nThere are now function names resize_{adjust,set}_{tiled,floating}. adjust is used for a grow or shrink argument.\nWhen it comes to resizing a tiled container, I chose to leave the original resize code as untouched as possible. So resize_adjust_tiled calls the original resize_tiled with the raw amount and unit rather than the passing the new struct.. Forcing the min/max size is now done.\n\nAt first glance the changes I made to resize_adjust_floating in this commit will look fairly significant, but all I'm doing is splitting the switch into two switches because I have to constrain the grow amount between them (calculate grow_width/grow_height, then constrain them, then calculate x/y).. Fixed by #2248.. Misclick.. So I think what's happening here is the view is mapping as floating, and receives focus before it has mapped which is why it's not in the current list. If we avoid moving the view to the end of the current list then it may appear behind other floating views until a transaction is made (which replaces the current children list with the pending children list). However... it's likely to be at the end of the list anyway because the view was just mapped. So this would only be a problem if two floating views have mapped at the same time, and they overlap each other.\nThe correct solution would be to use transaction, but we haven't determined the best way to do this from low level code like this. But I'll approve this and deal with the edge case above later if it pops up.. Thanks!. I don't see why we couldn't do that too. I used the terms enable and disable to fit with the fullscreen and floating commands. If you wanted to keep that consistency then we could have urgent {enable,disable,allow,deny} where allow and deny controls whether the view can request urgency itself. Or you could not be consistent and have urgent {on,off,enable,disable} but I prefer the first option.. This needs to be rebased, and IPC events for mouse bindings can be implemented too. I'll review after that.. Thanks!. You didn't specify a version and I was going to ask you which version you were using, but then I saw this:\n\nmove them around (with mod+mouse)\n\nThat feature is not implemented in the 1.0 alpha yet, so I concluded that you were using 0.15 stable.\nPlease run sway --version to confirm.. I just realised that implementing the xwayland urgency hint was really easy, so I went and did that.\nI also had a look at focus_on_window_activation but I think some changes would need to be made in wlroots (eg. a request_activate event).\nEDIT: Instructions for testing xwayland urgency hint:\n\nUse a terminal that supports urgent on bell (eg. urxvt with URxvt.urgentOnBell: true in ~/.Xdefaults)\nsleep 2 && echo -ne \"\\a\", then focus away while the sleep is happening - terminal will become urgent\nswaymsg urgent deny to deny the view the ability to set itself as urgent\nsleep 2 && echo -ne \"\\a\", then focus away while the sleep is happening - terminal will not become urgent because it's denied. > 2. I can't seem to get urgent enable to work for any floating view (it works fine for tiling)\n\nFixed. This was a problem affecting all criteria. container_for_each_descendant_dfs did not descend into floating views. It does now.\n\n\nIf you close a window without focusing it while it's urgency flag is set, the workspace retains the urgent flag.\n\n\nFixed. The same issue occurred when moving urgent views to new workspaces. When reviewing this commit, start by looking at workspace_detect_urgent. The rest is mostly calling that function in various places.\n\n\nShould urgent deny be extended to prevent urgent enable or even something like urgent block added as a stricter option?\n\n\nI don't think so. The deny setting is there to prevent a noisy client from claiming unwanted urgency. swaymsg urgent enable is only run by the user or via a script of their's and should not be affected by the deny setting. \n\n\nShould the urgency flag be propagated upwards for nested containers? I'd have to check i3's behavior on this\n\n\nI can't check this right now, so I'll either wait for your response or I'll check it later.. Fixed. Swaybar was ignoring what IPC gave it and was using default colours. This would only be noticeable if you had an urgent_workspace_border colour that differed from the default.. I would love to see the view rotation code removed. It adds complexity and I don't know of a valid use case for it.. > Interactive resize with nautilus is awful, I think it's due to atomic update issues. Gedit is fine. Maybe if a client starts falling behind once or twice we should mark it as a known-slow client?\nThis works fine in rootston. I think we should be able to make it work even with atomic updates. I'll investigate this later. Fixed.\n\nIf I float any GTK3 application and try to click near the right or bottom edges, it falls through to the tiled layer. I can also move my mouse up to the top or left edges, out of bounds, and still interact with the floating window. I think the geometry isn't being factored in here.\n\nYeah, I didn't attempt to make it work with geometry because I know that's broken at the moment.\nBTW, do we want to set a minimum grabbable area (eg. 5px) regardless of the border width?\n\nResizing from the center is not how sway 0.15 nor i3 works, we should resize from the top left corner (using mod+drag)\n\nDone. I don't think I've ever resized a view using mod + right click before this PR.\n\nClient initiated resize and move isn't working on GTK3 apps for me\n\nCan you provide an example? I don't use GTK3 apps much, and I couldn't find any resize/move option in Nautilus.\n. request_move and request_resize are now implemented.\nAlso note these related changes:\n\nNow uses enum wlr_edges instead of our own enum resize_edge\nNow uses wlr_xcursor_get_resize_name and removes our own find_resize_edge_name\nRenames drag to move for consistency. > You can drag tiled windows (open gnome-calculator, drag the titlebar, move around, release - it segfaults)\n\nFixed.\n\nXwayland's move/resize requests are ignored (wlr_xwayland_surface.request_{move,resize}): try env WAYLAND_DISPLAY= gnome-calculator and try dragging the titlebar\n\nImplemented now. I noticed you can right click the title bar in xwayland gnome-calculator and there are resize and move options there, but clicking these don't fire the request_resize/move functions so I'm not sure sure how that's supposed to work.\n\nI have damage issues when resizing (shrinking) mpv under xwayland\n\nCan't replicate.\n\nFor some reason the cursor is not updated when I resize or move - it sticks to the arrow cursor\n\nAlso can't replicate.\nI also fixed a bug where if you had a tiled container behind a floating container, then clicked the tiled container then clicked the floating container, focus was not given to the floating container properly.. Not intentional. I'll add it to my todo list.. I don't think it's possible at the moment.\nPerhaps after setup we could focus the output closest to 0,0 as this is likely the user's intended primary.. When used with that argument, the workspace command will focus that workspace. This doesn't make sense in a config file.\nI think we should make the workspace command return an error if we're reading config and the command is not in the format workspace <workspace-name> output <output-name>.. Please keep this open because it's a segfault and it should be fixed.. Okay, ignore what I said earlier. Upon further inspection you're allowed to have workspace 1:I in your config. The command gets deferred until after config has finished reading, then it's run.\nI suspect what's happening is nothing has focus, so it doesn't find an output to place it on. We could fall back to placing it on the first output in that case.. I also tried to debug it. I was testing with filezilla and clicked the Help menu, which opened File. You can see we send the motion coordinates correctly, then it looks like it creates the Help popup but destroys it and then creates a File popup in the same frame (I assume the first argument in set_anchor_rect is the x coordinate).\n[1539049.366] wl_pointer@3.motion(68969832, 382.000000, 15.000000)\n[1539049.446] wl_pointer@3.frame()\n[1540104.425] wl_pointer@3.button(98, 68970888, 272, 1)\n[1540104.493] wl_pointer@3.frame()\n[1540105.481]  -> wl_pointer@3.set_cursor(97, wl_surface@15, 4, 4)\n[1540105.525]  -> wl_surface@15.attach(wl_buffer@28, 0, 0)\n[1540105.551]  -> wl_surface@15.set_buffer_scale(1)\n[1540105.574]  -> wl_surface@15.damage(0, 0, 24, 24)\n[1540105.622]  -> wl_surface@15.commit()\n[1540109.645]  -> wl_compositor@6.create_surface(new id wl_surface@27)\n[1540109.717]  -> wl_surface@27.set_buffer_scale(1)\n[1540110.772]  -> wl_surface@27.set_buffer_scale(1)\n[1540111.148]  -> xdg_wm_base@18.create_positioner(new id xdg_positioner@30)\n[1540111.178]  -> xdg_positioner@30.set_size(209, 113)\n[1540111.194]  -> xdg_positioner@30.set_anchor_rect(355, 0, 47, 27)\n[1540111.236]  -> xdg_positioner@30.set_offset(0, 0)\n[1540111.269]  -> xdg_positioner@30.set_anchor(6)\n[1540111.291]  -> xdg_positioner@30.set_gravity(8)\n[1540111.320]  -> xdg_positioner@30.set_constraint_adjustment(59)\n[1540111.344]  -> xdg_wm_base@18.get_xdg_surface(new id xdg_surface@31, wl_surface@27)\n[1540111.372]  -> xdg_surface@31.get_popup(new id xdg_popup@32, xdg_surface@23, xdg_positioner@30)\n[1540111.421]  -> xdg_positioner@30.destroy()\n[1540111.445]  -> xdg_popup@32.grab(wl_seat@11, 98)\n[1540111.483]  -> wl_surface@27.commit()\n[1540112.487]  -> xdg_popup@32.destroy()\n[1540112.512]  -> xdg_surface@31.destroy()\n[1540112.524]  -> wl_surface@27.destroy()\n[1540113.078]  -> wl_pointer@3.set_cursor(97, wl_surface@15, 4, 4)\n[1540113.118]  -> wl_surface@15.attach(wl_buffer@28, 0, 0)\n[1540113.144]  -> wl_surface@15.set_buffer_scale(1)\n[1540113.165]  -> wl_surface@15.damage(0, 0, 24, 24)\n[1540113.219]  -> wl_surface@15.commit()\n[1540117.349]  -> wl_compositor@6.create_surface(new id wl_surface@33)\n[1540117.375]  -> wl_surface@33.set_buffer_scale(1)\n[1540118.260]  -> wl_surface@33.set_buffer_scale(1)\n[1540118.467]  -> xdg_wm_base@18.create_positioner(new id xdg_positioner@34)\n[1540118.478]  -> xdg_positioner@34.set_size(383, 224)\n[1540118.485]  -> xdg_positioner@34.set_anchor_rect(0, 0, 41, 27)\n[1540118.494]  -> xdg_positioner@34.set_offset(0, 0)\n[1540118.500]  -> xdg_positioner@34.set_anchor(6)\n[1540118.509]  -> xdg_positioner@34.set_gravity(8)\n[1540118.517]  -> xdg_positioner@34.set_constraint_adjustment(59)\n[1540118.526]  -> xdg_wm_base@18.get_xdg_surface(new id xdg_surface@35, wl_surface@33)\n[1540118.545]  -> xdg_surface@35.get_popup(new id xdg_popup@36, xdg_surface@23, xdg_positioner@34)\n[1540118.560]  -> xdg_positioner@34.destroy()\n[1540118.565]  -> xdg_popup@36.grab(wl_seat@11, 98)\n[1540118.572]  -> wl_surface@33.commit()\n[1540121.189]  -> wl_surface@22.attach(wl_buffer@26, 0, 0)\n[1540121.227]  -> wl_surface@22.set_buffer_scale(1)\n[1540121.238]  -> wl_surface@22.damage(0, 0, 402, 27)\n[1540121.264]  -> xdg_toplevel@24.set_min_size(402, 300)\n[1540121.280]  -> xdg_toplevel@24.set_max_size(134217727, 134217727)\n[1540121.295]  -> xdg_surface@23.set_window_geometry(0, 0, 954, 984)\n[1540121.335]  -> wl_surface@22.frame(new id wl_callback@37)\n[1540121.354]  -> wl_surface@22.commit()\n\nWhat's weird is that this works in rootston.. Update: It works if I set the default decoration mode to WLR_SERVER_DECORATION_MANAGER_MODE_CLIENT in sway/server.c. That's the difference between rootston and sway.\nrootston also creates a wlr_xdg_decoration_manager_v1 in additional to the regular wlr_server_decoration_manager, which might be related.. If I change rootston to use SSD as default then it still works correctly. There must be another difference between rootston and sway which makes it work in rootston.. Does that PR fix the second issue too?. I accidentally referenced this issue in another PR, and this got closed when my PR got merged. Re-opening this issue.. Thanks!. This also fixes the border command.. What do you think of having numlock on by default (ie. if there's nothing in the config to say otherwise)?. I just opened two xwayland windows in the current master, floated them, moved one so it's partially overlapping the other, then was able to focus between them by clicking each one. I didn't notice any problems.\nCan you give a more specific example?. I just realised you asked jniedrauer to test it right after I merged it. Oh well. Thanks anyway!. The code you're looking at is the alpha-1.0. You're running sway 0.15, which is in the 0.15 branch.\nSo for now you'll need to use the environment variables, and when 1.0 is released you'll be able to define it in the config using the example you gave.. Is this still an issue? I can't reproduce.. Thanks!. Should the title of this just be \"Resize tiled windows interactively\"? Can you actually move/rearrange tiled windows in i3 by dragging the title bar?. > it probably makes more sense to make output_has_opaque_lockscreen return the layer surface that is opaque right\nSounds good to me, with a function rename of course (maybe output_get_opaque_lockscreen?).. I've made a start on this and I'm convinced this is what's best for the project. But before I get too deep I want to check that the development strategy I'm using is one that will be acceptable.\nIdeally I would break it down into smallish commits that can each be compiled and are easy to review, but to do it that way would require a transition state where both nodes and sway_containers can represent a generic tree item. This would be very complicated.\nThe method I want to use is to change everything in one commit so I don't have to worry about a transition state. There would be one commit with thousands of lines changed. Almost everything in the tree directory would be undiffable. Because of this, it would have to undergo a significant amount of testing before merging.\nIs that acceptable?. There was a commit to master 10 minutes ago which likely fixes the issue. Can you please confirm you're using that commit?. I think what was happening was we would focus the new workspace, which triggers a workspace::focus IPC event which causes swaybar to update. But this focus-stealing is not the intended behaviour and was fixed in a recent commit.\nThere will be a workspace::init IPC event which causes swaybar to update. This isn't implemented yet - it's in #2264.. All done.\nI also fixed a crash when you unfloat a container/view, by making it restore the container/view as a sibling rather than a child. The reason is the thing you're restoring it to might be a view and can't have children. So unfloating a container/view is not guaranteed to put it back exactly where it was, but it will be nearby.. @RedSoxFan I can't reproduce that crash. I've tried with both Firefox (xwayland) and Terminator (xdg_shell), both in a floating container with another view, and as a standalone floating view. When I hold mod and resize using right click, the container resizes and everything is fine.\nCould it be specific to the program you are testing with?. Running splitv/splith on a floating view is already supported in this branch :). Ah, yep. Another use case would be having an unfocused mpv window being opaque.\nI think this is best left to an IPC script.. I can't replicate it in master using your example.\nThis might be fixed in the floating containers PR. Can you test it there?. @SirCmpwn Can this be closed now?. I think there are two reasons for this. One is something in sway which I can fix easily. The other is in wlroots and I'll need some help fixing it.\nLooking at wlr_buffer_apply_damage, damage will not be applied if someone else has a reference to the buffer. When we have a queue of resize instructions, we have a reference to the buffer, and eventually unref it and then ref the current buffer. But despite receiving a commit with a newer size and surface->current->width being updated to the new size, the current buffer still has the old texture because it has not had damage applied to it.\nI'm not really sure how this works in wlroots. If someone else has a reference to the buffer when we go to apply damage, could we create a new buffer?. Don't merge this - I've found a better way of resolving this.. I've replaced my commit with a different one that addresses the root cause of the problem. Ready for review again.. Thanks!. In the current master you can open a popup and then focus another view using a bindsym, and the popup is still rendered and receives frame done events. In my PR I only render popups for the currently focused view, which means the frame done events should be limited to the focused view too.\nI guess in the future we'll make it so it either closes the popups on focus change, or denies the focus change entirely, in which case my changes to the send frame done in this PR can be reverted.. Sorry, I mean \"the frame done events should be limited to the popups for the focused view too\". Yeah, it only renders popups for the focused view. But now I've changed it so popups are closed when changing focus, so I've reverted the send frame done code.. Thanks!. I think that's related to geometry (#2197). We get the damage box wrong.. Thanks!. Both fixed.. Thanks!. Can you clarify why seat_get_active_child doesn't work? That should return the most recently active direct child of the given container - ie. the active workspace.. Thanks!. This is ready for review again. BTW, I wrote some details in the commit log for \"Deny moving a sticky container\".. Resolved by #2709. Set raise_floating disable in your config. It seems odd to me that this isn't the default, and that it's even configurable.\nFor dialogs within fullscreen parents, this has been fixed with the implementation of popup_during_fullscreen.. I renamed the container_at_view function, and also found and fixed another focus issue where if the floating view didn't have focus and you clicked the title, it would interpret it as a move event and wouldn't focus the view. So now it sends the focus when starting a move or resize operation.. I've refactored the dispatch function (see commit message for details) then implemented resizing tiled views via mod.. > You can try col-resize and row-resize.\nDone.\n\nIf there is a floating view/container over a tiled one, the tiled one gets the resize event instead of the floating one.\nIt's no longer possible to resize a floating container.\n\nI also can't reproduce either of these.\n\nDoesn't seem atomic?\n\nWhich clients are you testing with and what are you doing exactly?\n\nAll right click menus on GTK+ and Xwayland apps no longer appear\n\nFixed. Was missing a mod_pressed check. And while fixing this I noticed I was missing state == WLR_BUTTON_PRESSED checks.. @RedSoxFan I was able to reproduce with your instructions. I've made it so doing mod+resize within a floating split container will now resize the container itself rather than the split. And changing that also fixes the other issue.. I suspect what's happening here is some of the views are committing to transactions ahead of what the others have committed to, so when we progress the queue the \"ahead\" view is being rendered. Here it is step by step:\n\nAssume two views, both with state A.\nYou start resizing a view which creates pending state B and transaction B. Buffers at the current state (A) are saved and rendered while we wait for the views to commit with state B.\nView 1 commits state B. Because we're still waiting on the other view to commit, we continue to render both saved buffers.\nAnother motion of resize is dispatched, so we create pending state C and transaction C.\nView 2 commits state C. At this point transaction B is complete so we apply transaction B, drop the buffers and save the current buffers. But view 2 is already at state C, so we've saved a buffer that isn't the right size.\nWe render the saved buffers while waiting for view 1 to commit state C, which is imperfect.\n\nI've added a commit which changes the transaction queue logic. It now won't progress the queue if there are any transactions in it which have some (but not all) views committed. This prevents it from progressing past transaction B while C is partially complete, thus avoiding the scenario where we read the wrong buffer.\nIt appears to have fixed the atomic issue described, and I don't experience any choppy behaviour (using 4 instances of termite in a 2x2 layout).. There's one more thing I can try. When there's multiple transactions, we could delay sending the configures for the subsequent transactions until the previous transaction has completed. We could be smart about it, so if there's a bunch of transactions which all involve the same views then we'd skip ahead to the last transaction. It might still be laggy, but I think it'd be better than what it currently is.. If what I'm about to implement doesn't work then the options are to a) have perfect but laggy rendering, b) have imperfect but smooth rendering, or c) resort to something like stretching the surface.\nFor views that are shrinking I think cropping it is better than stretching it. For views that are expanding... I guess we'd have to stretch that :-\\\nWe'd also need to fine tune it. I don't think we'd want to use stretching for standard layout updates, only for the interactive resizing, and that means we'd have to flag those transactions/containers as such.. It now does the one transaction at a time thing. I'm getting smooth resizing with termite + nautilus + gedit as you have in your video. I'm pretty pleased with this, assuming I haven't introduced any instability.\nIf this implementation of transactions is what we'll use, then I'll also be able to simplify it. For example, views won't need to store a list of transactions they're involved with because there's only one at a time. But I'll do that after this PR is merged.. Also FYI, force_display_urgency_hint is already done, and focus_on_window_activation depends on changes in wlroots - specifically emitting events when an xwayland view requests focus/activation.. It does default to 500ms (see config.c:209), but the command isn't documented.. Thanks!. This was an issue a while ago and I made a fix for it but it appears to have regressed. The fix was to fill in the gap below the title. If you figure out why that's no longer working then you'll probably find that it's easy to fix.. The changing height for all containers is intentional. I can't say I'm a fan of it, but it's needed so that the title bars are the same height for tabbed containers.\nIf we could make it so it only changes the height for the glyph container (and if it's in a tabbed container, the siblings too) and leave the others at their normal height then that'd be cool. We could remove the whole recalculating font height thing in the config then.. @SirCmpwn Can I get an executive decision on whether focus should be switched? See martinetd and DarkDefender's comments.\nI consider i3's behaviour to be a bug BTW.. I think there's some confusion here. This PR does not change any behaviour with workspace switching, nor has anyone proposed it. It only changes focus after you click and drag from one view to another.. GTK+ comboboxes should be good now. GTK closes the combobox if it receives a motion event between the press and release.\nI considered making it skip sending the motion if the cursor's coords match the ref coords (the coords at the start of the click), but that wouldn't be a perfect solution because you could move the mouse back to the original pixel where you clicked. So I've introduced op_moved to track if the cursor was actually moved.\nI'm starting to think we should consider making a struct for each operation and use a union in the seat struct. It would make it easier to tell which properties relate to which operations.. > Do you think this could/should be added in wlroots? Would something that tracks the last position and doesn't send no-op move events fix the issue?\nI don't understand. All move events are relevant.. That's not what's happening. The events wlroots emits are all good.\nWe called cursor_send_pointer_motion so that we can select the new focus if you've moved the mouse off the surface, but this has a side effect of sending a motion event to the surface and that made GTK close the combobox on release.. I think it's so you can click down with the button, highlight the option you want then release the button to select it.. The latest commit in master (98ed05225e06618533fa0439fdc83463cb9f1d2e) might have fixed it - can you please try that?. The short story is I think the view got freed when it shouldn't have, and the memory got re-used by something else.\nThe long story: The container->instructions list was used to store the list of pending configures for that view, and also served as a reference count for the number of transactions. This worked because transactions were always committed (ie. configures sent) immediately after the transaction was created.\n4b8e3a885be74c588291c51f798de80bd81a92db changes it so transactions aren't necessarily committed immediately. Only one is committed at a time, and the others wait in a queue. This breaks the reference counting, because a container would only ever have zero or one instruction in its list, despite having several uncommitted transactions in the queue.\nWhen a container is being destroyed, the transaction_destroy code frees the container and view if the refcount becomes 0. So it would free the container and view when it still had transactions.\nc3ef36d6b5d36f783f41b8860cee321b652f91e3 unintentially fixes it by removing the container->instructions list and using a refcount variable (ntxnrefs) which is increased and decreased on transaction create/destroy, as opposed to when the transaction is committed and applied.\nI'll close this, and if it occurs again in master feel free to re-open or make a new issue.. Yeah, the root issue is in workspace_by_name on the line you highlighted. When the workspace is empty, seat_get_focus will return the workspace because the workspace itself has focus. Then it runs the first container_parent, but the workspace can't have a parent workspace so container_parent returns NULL. A good solution would involve changing this to check if the focus is a workspace.. Thanks!. I can't reproduce that. When I make the preferences window small it stops at a certain size. I don't notice any jumping when resizing, nor when switching focus between the preferences window and the main window behind it.. I still can't reproduce it, even using the default config. Can you try it with the default config if you're not already?. Some easier steps to reproduce:\n\nOpen any two views\nFloat one of them\nWith the floating view focused, run focus mode_toggle three times\n\nAnyway, I encountered this in my refactor-seat-get-focus branch and fixed it there. I don't remember exactly what the issue was.. Will be fixed in #2465.. The above PR has been merged. This is now fixed.. I opened it and it hasn't crashed. Is there something I have to do to make it crash, and is it 100% reproducible?. Where are these overlay windows? I loaded the file you supplied and moved the mouse around everywhere, and I'm noticing a significant lack of overlay windows. Maybe a plugin is responsible for them?. I opened it in rootston and now I see what you mean with the overlay windows. I didn't get that in sway at all. In fact there's so much stuff messed up when I run it in sway - not only do the overlay windows not appear, but sometimes the main area stops responding to cursor clicks. For example, I sometimes can't click to move the caret or click the Run button, but the File etc menus work fine. And trying to kill the program with a sway bindsym didn't work.\nAfter running it in rootston, I then ran it in sway again and now I get the overlay windows. I noticed it's spamming the creation and deletion of a second window which I think is trying to float.\nI'm going to leave this for now. I'll revisit it after my seat_get_focus PR is merged, and after I've removed the L_FLOATING container (no PR for this yet).. Noted, but I don't think it should be changed. There's essentially three modes of rendering:\n\nrender only the damaged parts (as we do normally),\nrender the full output when there's any damage event (as -Dnodamage does), and\nrender the full output on every frame regardless of damage.\n\nIf we were to benchmark how much time damage is saving us, we'd compare the first two because the third would surely never be worth doing.. Okay, do you have any suggestions?. > Does this also fix #2158?\nI've never experienced that issue. Probably a question for @SirCmpwn.\n\nThis is causing my sway to crash if I hotplug a new output whilst having floating windows. Logs are normal up to that point and do not give any information on the crash. Can you reproduce?\n\nI was able to make it crash by running it in a nested session and closing the \"output\" window from the outer session. I placed a floating view so it overlaps two outputs, then closed the output which it most recently entered. Then I attempted to move the view using mod+click and it crashed. I've added a fix to address this crash. I haven't done any DRM testing but it's likely this commit will fix that too.. I've committed a fix but it requires testing on DRM which I can't do at the moment. If you can test it then that'd be awesome, otherwise I'll get around to testing it later.. Thanks!. Will be fixed in #2483.. Bump.. Yeah, I think the rendering code needs to be changed in the same way, so it'll render in this order:\n\nRender unfocused views in the tiling layer\nRender focused view in the tiling layer if any (non-popups)\nRender unfocused views in the floating layer\nRender focused view in the floating layer if any (non-popups)\nRender popups\n\nThis means if the focused view's subsurfaces overflow the container, it'll be rendered on top of any siblings. And if there's an unfocused floating view on top of the subsurface, the subsurface will appear behind the floating view (I think this is desired, as subsurfaces could be non-popup-like things such as borders).\nIf this sounds good then I'll go ahead and implement it.. > We could also just render everything in focus order.\nNo we can't, because an unfocused floating view must be rendered on top of a focused tiling view.\n\nNote: this isn't processing all popups before everything else (only the focused view's popups)\n\nOnly the focused view has popups. We close all popups when focus is changed.. How should we handle a case where two unfocused tiling siblings both have subsurfaces which overlap the other sibling? The only way to render that perfectly is to render the subsurfaces on a separate \"layer\" to the main surface. Meaning we'd iterate the tree and draw the main surfaces, then iterate it again and draw the subsurfaces. And if we did that, that would make this task easier as we wouldn't have to render the focused view separately.\nThis would change the rendering order to be:\n\nRender all main surfaces and decorations in the tiling layer\nRender all subsurfaces in the tiling layer\nRender all main surfaces, subsurfaces and decorations in the floating layer (ie. just render in the z-order)\nRender popups\n\nThe container_at code would have to be updated accordingly.\nCan you think of any reason why this wouldn't work?. > IMHO we should just render everything in focus order (tiling then floating) and stop creating that many layers.\nThat would be pretty wasteful on CPU. If we iterate the focus stack then we need to do a view_is_visible check to skip rendering views which belong to different workspaces, and view_is_visible involves traversing up the ancestors. We also need to traverse the ancestors to see if any parent is focused so we can use the focused colours. And to render the children of a fullscreen container would involve a container_has_ancestor check.\nAlso, how would this work when it comes to multiseat and there are multiple focus stacks?. It's not perfect, but it solves more problems than it fixes so I'm happy for it to be merged.\nSpecifically, if you create V[terminal gedit], resize gedit to be stupidly small, then open the Open menu in gedit, it appears over the terminal. If you then focus the terminal and move the cursor over the menu, the cursor events apply to the terminal instead of the menu.. Thanks!. begin_destroy removes it from the pending tree and marks it as destroying. Then it gets included in the next transaction. Once that transaction has finished (ie. the thing is no longer rendered on screen), the destroy function is called to actually free all the resources for it. We had the same thing already, but container_destroy was the first function and container_free was the second function.. I've been running this branch as my daily for the last 24 hours and haven't had any problems. I also tested hotplugging and didn't notice any issues, though I didn't hotplug down to zero outputs.. Bump.. > Adding an output that changes the origin relative to the current workspace\nCan you clarify what you mean here? What outputs do you have, what are their positions, which workspace is active and which output are you disconnecting (if any) and reconnecting?. That explains it well - thanks. Debug log isn't needed.. I've noticed this with Slack recently, which also uses Electron. It freezes a few seconds after loading the main chat window and doesn't respond to configures. As a test, I opened it in rootston and it froze there too. So we can remove sway from the equation.. It appears to only freeze if I start it from rofi or from a terminal. I can't reproduce it if I start it from a keybind. Was able to reproduce with a keybind.\nhttps://gist.github.com/RyanDwyer/3ae2e8e2b49f44f27f46160e1b13fe5d\nIn this session I opened terminator from a keybind, then ran slack from the terminal. Note there is a \"loading\" window which appears and disappears before the main chat window appears. After the main chat window appeared, I used Ctrl+1 and Ctrl+2 to switch between two teams until it froze. Then I copied the log so it wouldn't be spammed with unmap and shutdown messages.\nThe freeze occurred at some point after the last \"Redacted Team 1\".. The strace output stops when the freeze happens. The last line of strace output is:\nfutex(0x7ffd10037b90, FUTEX_WAIT_PRIVATE, 0, NULL\n\n@martinetd It's the slack-desktop AUR package (version 3.2.1-5). I tested it with empty configuration and it also freezes on the login window.. Okay, I checked again with the bindsym and it froze again. So the bindsym is not related.\nWhen it freezes the following gets logged:\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:797] XCB_DESTROY_NOTIFY (12582913)\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:797] XCB_DESTROY_NOTIFY (10485766)\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:783] XCB_CREATE_NOTIFY (12582913)\n2018-09-03 11:46:06 - [sway/desktop/xwayland.c:550] New xwayland surface title='(null)' class='(null)'\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:783] XCB_CREATE_NOTIFY (10485762)\n2018-09-03 11:46:06 - [sway/desktop/xwayland.c:550] New xwayland surface title='(null)' class='(null)'\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:797] XCB_DESTROY_NOTIFY (10485762)\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:783] XCB_CREATE_NOTIFY (10485764)\n2018-09-03 11:46:06 - [sway/desktop/xwayland.c:550] New xwayland surface title='(null)' class='(null)'\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:797] XCB_DESTROY_NOTIFY (10485764)\n2018-09-03 11:46:06 - [subprojects/wlroots/xwayland/xwm.c:783] XCB_CREATE_NOTIFY (10485766)\n2018-09-03 11:46:06 - [sway/desktop/xwayland.c:550] New xwayland surface title='(null)' class='(null)'\n\nThe window is tiling but it also happens when floating. The md5sum of my slack binary is 982274db1365c1cdc1a0802108d9bb62.. I think this is related to glibc 2.28. The last two commits for slack-desktop in the AUR apply a patch to make it use glibc 2.27, then reverts the patch and adds a dependency on glibc>=2.28-4. I cannot reproduce the freeze when using the glibc 2.27 patch.\nMaybe Electron is doing something that doesn't play nicely with glibc 2.28. But I'm still stumped as to why it locks up in wlroots compositors, but not in gnome-shell.\nThe FUTEX_WAIT stuff in my strace output is a non-issue. Apparently that happens when you strace a process which uses threads.. Related issues:\n\nhttps://github.com/electron/electron/issues/13972\nhttps://bugs.archlinux.org/task/59550\n\nI checked coredumpctl and found Slack/Electron is actually crashing when it freezes, which matches what those issues describe.\nClosing this, as I'm pretty sure it's not related to sway or wlroots any more.. @coredump Oh, sweet! I disabled hardware acceleration and it appears to work fine now :)\nFor anyone else who wants to disable hardware acceleration in Slack, open up ~/.config/Slack/local-settings.json and set useHwAcceleration to false.. Hmm. That's true. Looking at the i3-gaps readme, it looks like current is supposed to apply them to the workspace anyway, meaning you shouldn't be able to apply them per-container. This looks like a bug to me, unless sway has intentionally deviated from upstream behaviour in a backwards-incompatible way.. Found a bug in this - please hold off on merging.. All good now.\nThe bug was a rendering issue when using tabbed containers with inner gaps. The tab bar was misaligned.. An alternative solution would be to check if diff_x and diff_y are zero and skip the entire for loop. This would be more performant too.. If the terminal is the only view in the workspace before running mpv then everything seems to work correctly. If I have two terminals open, use one to launch mpv, fullscreen mpv then press q, it looks like the workspace itself is focused (both terminals have focused styling) and one of the terminals has keyboard focus.\nIs that what you're experiencing?. I'm confident that this branch is now stable enough to be merged. I'm still running it as my daily and all known issues are fixed.\nI encourage others to run it as their daily as well and start reviewing.. Fixed both the 0,0 issue when splitting and the layout crash.. You might want to wait until the type safe PR is merged before actioning scan-build bugs. That PR refactors a lot of stuff.. My preference is no, because supporting the commands is just two lines while adding a nagbar warning is quite a bunch more (create new files etc). I imagine we'll just always support them.. Issue doesn't occur in #2540.. I can't reproduce this. The outputs and their workspaces are set up before deferred commands are run. Were all your outputs disconnected or disabled?. I'm having trouble reproducing this. I put this in my config:\nassign [class=\"Firefox\"] workspace 2\n\nThen in a single output session, I opened a terminal on workspace 1, created workspace 2 and put a terminal there, switched back to workspace 1 and launched Firefox. Firefox opened on workspace 2 and my focus remained on the terminal in workspace 1.. You could substitute Signal for any other non-Electron app and see if it still occurs. If it doesn't, you know the problem is Electron or Signal related and isn't a problem with sway.\nYou could also try bisecting the recent commits to narrow it down to a single one. It could be the seat.c cleanup commit.\nOh, and you could also try it on my type safe branch to see if it occurs there.. This was added in the past, but caused issues so it was removed temporarily.\nHere's where it was originally added:\ncommit 03d49490ccff3c5c81bea73622c8616fa61eb3dd\nAuthor: emersion\nDate:   Tue Jul 17 23:04:55 2018 +0100\n\n    Update cursor on focus change\n\n    This allows to send wl_pointer.enter when switching between views\n    in a split/tabbed layout for instance. This (1) updates the cursor\n    image accordingly (2) makes it unnecessary to move the mouse before\n    scrolling. It's harmless to always call cursor_send_pointer_motion\n    because in case the focused surface hasn't changed this is a no-op.\n\n    The `last_focus != NULL` condition is required otherwise\n    cursor_send_pointer_motion will crash when sway starts up (the\n    sway_output doesn't yet have a workspace).\n\nHere's where it was attempted to be fixed:\ncommit b14bd1b0b1536039e4f46fe94515c7c44e7afc61\nAuthor: Ryan Dwyer\nDate:   Wed Jul 25 19:26:12 2018 +1000\n\n    Fix crash when closing last child of a tabbed container\n\n    The crash only occurs if the mouse cursor is above the tabbed container\n    when the last child is closed.\n\n    Introduced in 03d49490ccff3c5c81bea73622c8616fa61eb3dd, over a week ago\n    and unnoticed until now :O\n\n    The above commit changes the behaviour of a focus change. When you\n    change focus, it sends pointer motion which makes the client set a new\n    cursor image. We already had this behaviour for workspace switching, but\n    this commit adds it for view switching too, such as in a tabbed\n    container or when closing a view.\n\n    The sequence of events that leads to the crash is:\n\n    * The last child of a tabbed container unmaps, which triggers a\n    `destroy` event before we've cleaned up the child or reaped the tabbed\n    container.\n    * The seat code listens to the `destroy` event and removes the seat\n    container from the focus stack. As part of this, it decides to set focus\n    to the parent (my fix alters this decision).\n    * When setting focus to the new parent, the container motion is sent as\n    per the previously mentioned commit.\n    * The motion code uses `container_at`, which encounters the tabbed\n    container and its child in a half destroyed state, and everything blows\n    up from there.\n\n    `con->parent` is needed because scratchpad containers don't have parents\n    if they're hidden, so this probably fixes a crash when a hidden\n    scratchpad container closes too.\n\n    The `con->parent->children->length > 1` check should catch any cases\n    where the parent is about to be reaped.\n\nHere's where it was removed completely:\ncommit 08cfba2192f5770d975c5fe70789a81aaee4dc7e\nAuthor: Ryan Dwyer\nDate:   Thu Jul 26 18:36:46 2018 +1000\n\n    Allow containers to float\n\n    Things worth noting:\n\n    <snip>\n    * My fix (b14bd1b0b1536039e4f46fe94515c7c44e7afc61) for the tabbed child\n    crash has a side effect where when you close a floating container, focus\n    is not given to the tiled container again. I've removed my fix and\n    removed the call to `send_cursor_motion` from `seat_set_focus_warp`. We\n    should consider calling it from somewhere earlier in the call stack.\n\n. Done. As part of the rebase I noticed the recent HAVE_XWAYLAND additions have caused some switch cases to flow into others unintentionally, so I've rearranged them.. Only window_type is needed because I had changed the data type to enum atom_name, and that datatype is defined in xwayland.h.\nwindow_role, class and instance are all specific to xwayland but compile fine without xwayland support. Maybe they should all be inside the HAVE_XWAYLAND checks? We might also want to update the documentation to say which properties won't work without xwayland support.. This bug was likely introduced when the magical floating container was removed. The parent of floating views used to be the magical floating container, but now it's the workspace.\nThe code you changed assumes the current container will be in the parent's children list, but in this case the parent is a workspace, the view is floating and workspace->children is the tiling list. If there are no tiling containers in the workspace then it would crash. I don't understand why it doesn't always happen though. I can't reproduce it.\nis_last_child is used to help determine whether the border around the title area should be fully boxed in, or whether the side borders of the container should flow into the title background. For floating views they should always flow/connect, so for the purpose of the check we want is_last_child to be true if there are no tiling children. Which means children->length == 0 || is the correct expression.. This is going to have conflicts with the typesafety branch. You'd be doing me a favour if you could rebase this off that.. This is a damage issue, introduced when I changed the container box to exclude the title when the child is in a tabbed or stacked container. The change introduces another bug too - create layout V[view T[view view]] and hover the tabs - the cursor changes to the resize icon anywhere on the tab.\nThe box was changed to make typesafety easier, but I'm considering reverting it in order to fix both of these issues. I plan to do this after typesafety is merged so that I can't accidentally revert it in such a way that is incompatible with typesafety.. Works for me. Note the following from https://i3wm.org/docs/userguide.html#mousebindings:\n\nBy default, the binding will only run when you click on the titlebar of the window.\n\nKeeping that in mind, can you check whether this is still an issue in master?. > Would this be a good first issue?\nYep.\n\nIs this a good solution to the request?\n\nYes, but you'll also need to change the mouse_warping command to accept a container argument (ie. mouse_warping none|container|output). This means config->mouse_warping can't be a boolean any more. Then yeah, the code you highlighted will need to be changed to respect the user's settings.. I'm unable to reproduce this. Can you please confirm which commit you're using (should be latest master), describe your setup in terms of outputs and workspace assignments, and provide the command you're running that triggers the crash?. I've implemented baseline alignment now. Note that marks are not aligned to a baseline, nor are marks even considered when calculating the config's font height. I'll address that in a different PR.. I don't think so. When I implemented title bars I took pixel measurements from i3, though I can't remember if I tried it with non-default border thicknesses.\nIf the spacing bothers you can you use for_window [title=\".*\"] title_format \" %title\".. What's wrong with this logic?\n\nWhen a view maps, get the PID\nLook up the executable path for the PID\nIf it's in the permit list, hooray\nIf not, maybe check the parent PID and so on\n\nThen if the user has swaylock && keylogger in their config, swaylock will be permitted but keylogger will not.. Sending cursor motion doesn't really belong in transaction_commit. It could have unintended side effects by sending motion too frequently. For example, GTK menus can close immediately on click if they receive a motion event between the press and release. Maybe we should send motion towards the end of view_unmap (after arranging), again in the workspace command after focusing the new workspace, and again in the focus command after changing focus.\nAlso, there is value in having node_is_view trigger a crash if node is NULL. If it silently handles the situation then it can hide potential errors and make them go undiscovered during development. And changing the calling code to if (node && node_is_view(node)) makes it clear to the reader that node might be NULL at this point.. > Minor bug: with a split layout with two views, dragging the left container on the center of the right one works (ie. switches views), but the other way around doesn't (is a no-op).\nThat's expected. Dragging into the center means \"move after this one\". If the view being moved is already the next sibling then it's a no op. I think this is what the i3 PR does too.. Ubuntu Cosmic hasn't been released yet. Are you running a dev version of Ubuntu?\nThe PPA contact's name is in the PPA URL: https://launchpad.net/~s.noack. You could ask him, but I'd wait until Cosmic is released.. Closing this.\n\nAs the wiki says, we don't provide support for PPAs\nThe PPA is for sway 0.15, which we are no longer accepting issues for\n\nWhen 1.0 is released, that wiki page will likely be changed or removed anyway. I would definitely go with option 2. If we were to go with option 1 then we'd have to make exceptions in places (eg. if node is output, return) which makes things more difficult for ourselves. If we go with option 2 then the logic isn't too hard - just build a list of unique outputs using seat_for_each_node, node_get_output, and list_find to prevent duplicates.. Uh... where? I searched the project for view_create and got no results.. The container is destroyed in view_unmap though, so it should be created in view_map. Perhaps we should remove it from view_init.. I can make sway crash on this PR by adding a container to the scratchpad and then running swaymsg -t get_tree. There's two reasons for the crash:\n\n\nIn node_get_output, the N_CONTAINER case needs to check if the container's workspace is NULL. Containers that are hidden in the scratchpad have no workspace.\n\nYour code needs to handle cases where node_get_output returns NULL.. Yes, confirming it works now.\n\nWorkspaces will have a NULL output when there are no outputs connected. The workspaces get stashed away in root->saved_workspaces until you connect an output. Admittedly I don't think anyone has tested hotplugging down to zero outputs.. Can you clarify why the server shutting down check is needed? I guess it would make the transaction complete instantly, which causes any destroying nodes to be freed before sway exits. I don't really see why that's useful.\n\nAlso, why did you change the state to be a pointer? Can't you have a union of structs directly?\n\nI made it a union of pointers because that's what I'd seen elsewhere and didn't think too much about it. Feel free to make it a union of structs instead.. > When the server shuts down, it destroys all of the wayland clients, which create transactions to destroy the sway view, as well as the rest of the nodes. If the transactions just get destroyed, it leaves these nodes hanging around as leaked memory.\nWhere does Sway destroy the clients? I'm not seeing it.\nI also don't see why this is a problem or how it's related to this PR. If I add free(instruction->output_state) as you have and don't make any other changes then it seems to work fine.. Can you please make it a union of structs rather than a union of pointers? We may as well change it.. I'm happy to merge this, but you still have [WIP] in the title. Please confirm if you're happy to have it merged.. Thanks!. I'm going to try and reproduce this later so I can find the underlying issue. Is there anything special you need to do to reproduce it?. Thanks!.     bar {\n        ...\n        status_command ~/.config/sway/status\n    }\n~/.config/sway/status:\n#!/bin/bash\n\necho '{\"version\":1}'\necho '[[],'\ni=0\n\nwhile true; do\n    #echo \"[{ \\\"full_text\\\" : \\\"test $i\\\" }],\"\n\n    echo '['\n    echo \"{ \\\"full_text\\\" : \\\"test $i\\\" }\"\n    echo '],'\n\n    i=$(($i+1))\n    sleep 0.5\ndone\n\nThis usually fails within a few seconds. If I uncomment the first and comment the second then I can't make it fail. The only difference with those is line breaks.\nEdit: Just clarifying that the error this produces is [failed to parse i3bar json].. @ianyfan\n2018-09-21 23:32:20 - [swaybar/i3bar.c:191] Received i3bar json: '[\n{ \"full_text\" : \"test 54\" }\n]'\n2018-09-21 23:32:20 - [swaybar/i3bar.c:244] Rendering last received json\n2018-09-21 23:32:21 - [swaybar/i3bar.c:191] Received i3bar json: '[\n{ \"full_text\" : \"test 55\" }\n]'\n2018-09-21 23:32:21 - [swaybar/i3bar.c:244] Rendering last received json\n2018-09-21 23:32:21 - [swaybar/i3bar.c:224] Failed to parse i3bar json: '\n[\n{ \"full_text\" : \"test 56\" }\n],\n'\n\nI also replaced the status_error line with this:\nstatus_error(status, json_tokener_error_desc(json_tokener_get_error(status->tokener)));\n\n...and when it fails, the error being returned is array value separator ',' expected.. Yep, that seems to have worked. I can't reproduce it any more.. A similar thing happens when you do the following:\n\nHave Firefox in a workspace by itself\nOpen another view so it appears to the right of Firefox\nSwap the views using move left or move right\n\nOpen a popup in Firefox or make a tooltip appear - it'll be on the left half of the screen rather than the right.. Works fine for me.. Is there anything special you need to do to reproduce this? I have tried:\n\n\nDragging from tiling to tiling, floating to floating, tiling to floating and floating to tiling\n\nWayland backend and DRM backend\nDefault config\nfocus_follows_mouse enabled and disabled\n\nI can't fault it.. This is intended. focused is only true for the single focused node (not the ancestors), so it can never be true on an output.\nThe i3 docs (https://i3wm.org/docs/ipc.html) confirm this:\n\n... will result in eventually reaching the one node with focused set to true\n\nAnd looking at the i3 code, it's only set for one node (focused is a global variable): https://github.com/i3/i3/blob/ac88d06632b6235e51d89806b7889ba5bfb9eb78/src/ipc.c#L420. Confirmed. An example of what they return is:\n{\n    \"name\": \"LVDS-1\",\n    \"active\": true,\n    \"primary\": true,\n    \"rect\": {\n      \"x\": 0,\n      \"y\": 0,\n      \"width\": 1920,\n      \"height\": 1080\n    },\n    \"current_workspace\": \"3\"\n},\n\nI'd support removing irrelevant elements from our get_outputs reply.. Thanks!. In i3, I created layout H[S[viewa viewb] V[viewc]], focused viewb and ran move right. It resulted in layout H[S[viewa] V[viewc viewb]]. Meaning the container has moved into the vsplit.\nIn sway, I did the same thing but it resulted in H[H[S[viewa] viewb] V[viewc]]. It's wrapped the stacked container in a hsplit and moved the view there instead. Looks like a bug to me.. Thanks!. Bump.. Copying my latest commit message into here...\nThis does the following:\n\nRemoves the xdg-decoration surface_commit listener. I was under the impression the client could ignore the server's preference and set whatever decoration they like using this protocol, but I don't think that's right.\nAdds a listener for the xdg-decoration request_mode signal. The protocol states that the server should respond to this with its preference. We'll always respond with SSD here.\nMakes it so tiled views which use CSD will still have sway decorations rendered. To do this, using_csd had to be added back to the view struct, and the border is changed when floating or unfloating a view.\n\nAlso note that when testing with the wlroots toplevel-decoration example, that example does not support server-decoration, so according to the server-decoration protocol we assume the client is using CSD. However, the example client believes it's using SSD as that's sway's default, so there's a mismatch there until the first time you change the border. Fixed by removing server-decoration assumption if view supports xdg-decoration.. That commit makes it so we re-advertise the new seat capabilities every time a device is added or removed. We previously only did it once when creating the seat.. @The-King-of-Toasters Can you please try the latest master and see if it's fixed?. Can you reproduce it without using go-luks-suspend? Can you also try suspending without running swaylock, and see if the first keypress after restore is also ignored?. Can you also test it on another compositor and see if it happens there?. Yes please. I want to rule out it being a bug in sway or wlroots.. Either of those should be fine. Make sure they're operating as Wayland compositors and not X11 compositors/WMs.. Closing this because the original issue was fixed, and the second issue looks very much like a problem with go-luks-suspend. We have no reason to believe there is a problem with sway here.. It looks like i3 ended up implementing this without a raise_floating directive. Perhaps we should do the same.. I installed it from AUR and when I start it a splash screen appears and then closes after a second or two. Neither EiffelStudio nor sway are crashing.. Yep. Sway c43374cdf043e913b48d3cdb31d0f716a2cf58bd and wlroots 5b687b4a9676448148aa8da1917b849857aae78f.. When I tested I opened a terminal then used it to execute the binary. So there's already a view there. The splash window opens as a tiling view on the right half of the workspace.. I'm running it in a nested session so it could be a DRM-only thing. I'll do some DRM testing later.. I also can't reproduce it on DRM, even using the default sway config. My output is 1920x1080 with no scaling.\nYou have a focused view with no ->container which shouldn't happen. I suspect EiffelStudio is unmapping and remapping a view before we've finished destroying its container, causing us to allocate a new container for it then wipe out the pointer when the first container finishes destroying. Can you please apply the following patch and see if that fixes it?\ndiff --git a/sway/tree/container.c b/sway/tree/container.c\nindex 329145cf..72cb6694 100644\n--- a/sway/tree/container.c\n+++ b/sway/tree/container.c\n@@ -66,15 +66,11 @@ void container_destroy(struct sway_container *con) {\n    list_free(con->current.children);\n    list_free(con->outputs);\n\n-   if (con->view) {\n-       struct sway_view *view = con->view;\n-       view->container = NULL;\n-       free(view->title_format);\n-       view->title_format = NULL;\n-\n-       if (view->destroying) {\n-           view_destroy(con->view);\n-       }\n+   if (con->view && con->view->container == con) {\n+       con->view->container = NULL;\n+   }\n+   if (con->view && con->view->destroying) {\n+       view_destroy(con->view);\n    }\n\n    free(con);\n\nIf that doesn't fix it, please run sway -d and post the debug log.. To squash the commits, checkout your branch then run git reset HEAD~. This removes the head commit from your branch and makes the changes show as modifications in your working directory. You'll want to do it twice because there's two commits in your branch. Then add your files and commit them like you would normally, and git push --force to overwrite your remote branch with the new one.. workspace_is_empty is only called from output_evacuate, so we could make it include sticky views. This would simplify both workspace_is_empty and output_evacuate because it would move the workspace like usual. Thoughts?. Thanks!. Thanks!. Yep, it's called floating windows with sticky enabled. Sticky makes it show on top of whatever workspace is active on that output.\nI also recommend using mpv as the media player, as it has no UI.. @colemickens @DawidLoubser Can you please check if #2771 resolves this?. This is fixed in the 1.0 alpha. By the way, we're not currently fixing issues in sway 0.15. I appreciate the fact that you typed your log messages by hand, though :). Which version of sway are you using?. You'll find it works correctly in the alpha. We aren't doing fixes for sway 0.15 any more.. I can't reproduce this, using mako. @kenan-rhoton What notification daemon are you using?. I killed mako, tried again and got a Firefox generated notification. But switching workspaces still works while the notification is visible.\nCan you please confirm:\n\nThat you're using the Firefox from the official Arch repos, and not some AUR variant\nThat the notification generated is indeed a Firefox notification (ie. has a settings cog in it with Firefox specific options)\nThat the issue occurs when using www.bennish.net/web-notifications.html (that's what I'm using for testing)\nThat you're running the sway 1.0 alpha (run swaymsg -v to check). What perf arguments are you using?. If you're trying to run gaps inner|outer <px>, that only sets the default for new workspaces. The previous implementation was wrong.\n\nTo change the gaps for the current workspace, use gaps inner|outer current set <px>. Replace current with all to change them on all workspaces.. Looking at set_get_focused_workspace, it's not immediately obvious how that can fail on that line. I suspect the focus stack is empty and we're reading garbage data from it.\n@ivyl Can you please try with the following?\ndiff --git a/sway/input/seat.c b/sway/input/seat.c\nindex e10b6409..69bee47e 100644\n--- a/sway/input/seat.c\n+++ b/sway/input/seat.c\n@@ -952,6 +952,9 @@ struct sway_node *seat_get_focus(struct sway_seat *seat) {\n    if (!seat->has_focus) {\n        return NULL;\n    }\n+   if (wl_list_length(&seat->focus_stack) == 0) {\n+       return NULL;\n+   }\n    struct sway_seat_node *current =\n        wl_container_of(seat->focus_stack.next, current, link);\n    return current->node;\n\n. It looks like the sway-specific part of this is fixed and the remaining issue is in wlroots. Can you test this out with rootston, and if it also fails, create an issue in wlroots?. handle_commit calls view_damage_from, which iterates each output and calls output_damage_view_surfaces. That calls output_view_for_each_surface, therefore calling damage_surface_iterator with each surface. It works the same way as it did before.. Superseded by #2769.. Which version of sway? Please run swaymsg -v.. A better fix is here: https://github.com/swaywm/wlroots/pull/1282. Is it just me or does it already do that? It calls xkb_keymap_unref here: https://github.com/swaywm/sway/blob/c1f09939ae4b5c0554b9f78921e02b2f9550c4e5/swaylock/seat.c#L31. status_line_init is not called if the status command is NULL.\nhttps://github.com/swaywm/sway/blob/89f4ebef064809c4e3d4cc08f8c7f08f4bc6d420/swaybar/bar.c#L499-L501. You can remove or comment the directive.. Done. Note that I found and fixed a bug in cmd_bar which prevented the anytime commands from being run at runtime.. This crash could also occur when the workspace is empty and you run it from a key binding (when handler_context.container is NULL it means a workspace itself is focused)..     2018-10-08 17:13:32 - [sway/sway/input/keyboard.c:116] encountered duplicate bindings 40 and 39\n    2018-10-08 17:13:32 - [sway/sway/commands/bind.c:279] running command for binding: focus mode_toggle\n    2018-10-08 17:13:32 - [sway/sway/commands.c:290] Handling command 'focus mode_toggle'\n    2018-10-08 17:13:32 - [sway/sway/commands.c:169] find_handler(focus)\n    2018-10-08 17:13:32 - [sway/sway/commands/bind.c:287] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\nIt seems to think these two are the same:\nbindsym $mod+Shift+space floating toggle\nbindsym $mod+space focus mode_toggle. The config you supplied does not match the config used in the log output. For example, the log output says you spelt \"space\" with a capital S, and the line numbers are off as well. Please paste the exact config that was used.. That bad commit was reverted in the following commit. Are you sure you bisected correctly?. Can't the 0,0 check in seat.c be removed now that the focus happens after the size has been determined?. Code looks good apart from style issues. I want to do some testing though, particularly with unusual cases such as views that map into the scratchpad via criteria and views that launch into fullscreen. Will do the testing later.. When the focused view unmaps, the new cursor position is chosen based on the layout that was there before the view unmapped. For example, create layout `H[view view]`, focus the right view and close it. The cursor will move to the center of the left half.\n\nThe fix for this will be in view_unmap. Focus is chosen when the unmap signal is emitted. This will need to come after the arrange.. I think the best way to do this is to move the focus setting code out of handle_seat_node_destroy and into view_unmap (or rather, make view_unmap call a new function such as choose_focus and put the logic there).\nhandle_seat_node_destroy would then be almost a one-liner which calls seat_node_destroy, so those two functions can be merged into one.\nBack in view_unmap, you'll probably need to determine needs_new_focus before calling container_begin_destroy, then do the rest afterwards.. Focus needs to be changed for each seat. This is getting complicated, and I'm beginning to think that warping the cursor a second time is the lesser of two evils. Let me know what you think.\nThis is out of scope for this PR, but I think seat_set_focus_warp needs to refactored in order to fix this properly. Perhaps some of the additional logic like cursor warping could be moved into the focus and workspace commands. Or perhaps the function should be split into two, where there's a high level function that does all the additional logic and a low level function that only manipulates the focus stack. Then functions like handle_seat_node_destroy could call the low level function. Or perhaps a mix of the two. I'll think about this over the next few days.. What about creating a cursor_warp_to_container function, and calling it from seat_set_focus_warp and at the end of view_unmap?. Thanks!. From the associated issue:\n\nI noticed the workspace_config struct introduced here: Commit: Rename workspace_outputs to workspace_configs and fix memory leak138d10d). I was wondering if the eventual intention is to have this replace the current data in the sway_workplace struct or if they are supposed to keep living side by side?\n\nThe workspace_config serves as stored configuration for a workspace that doesn't exist yet. When a workspace is created, it looks for a workspace_config for that workspace and copies the settings into the workspace struct. The workspace_config struct is then not used, unless the workspace is closed and recreated.\nOther feedback:\n\nThe -1 in the workspace_config is taking effect. You should initialise it to INT_MIN, then check for INT_MIN when it is copied into the workspace when the workspace is created.\nWhen using something like gaps outer current|all set -10 to change a workspace's outer gaps at runtime, the value is set to 0 (see configure_gaps function).\nWhen using workspace <ws> gaps outer -10, a check needs to be done here too. This syntax is intended to be used in configuration files so you can configure a single workspace's gaps before it exists.\nThere is still documentation for edge_gaps, but you probably didn't find it because it's written as edge\\_gaps.\n\nConsider updating the gaps documentation to say that negative outer gaps are allowed.. Can you provide a screenshot?. There's a pixel gap on the right edge as well. I think that might be side effect of running it in a nested session (I assume you are?). The output is 1920px wide. 1920 / 1.4 is 1371.4 so the Wayland backend reports a width of 1371. So within sway the container's width is 1371, scaled by 1.4 becomes 1919.4, which rounds down to 1919 and leaves a gap.. I think the same situation applies though. I can see three ways to fix it, none of which I'm fond of:\n\n\nSupport float output modes, float wlr_box coordinates and float container/workspace/output coordinates and sizes.\n\nPut an if statement in scale_box so it bumps it by one pixel if it's near the far edge.\nWhen a scale is set, take what the user asked for and adjust it so it becomes evenly divisible by both the output's width and height.\n\nMy preference is to not fix this. Fractional scaling is going to have inconsistent rendering anyway - for example, a 1px border might take up one pixel in one place and 2px in another.\nPerhaps we could set the clear colour to solid black to make it less obvious.. Is there a recommended alternative that works on both?. I made a POSIX compliant implementation using the method you described with the intention of overriding it with timerfds for Linux, but then decided to remove the Linux variant completely and just roll with the POSIX compliant one. It works, and I don't think it's worth maintaining two variants.\nMy latest commit replaces timerfd. This is ready for review and testing.. I implemented this locally but then discovered that Xwayland is started when launching most Wayland programs. Terminator, termite and gedit all start Xwayland before launching a Wayland window.\nGiven the above, and the fact that the end goal is to move away from Xwayland, I don't see much of a benefit in implementing this. Let me know if you think otherwise and I'll submit the PR.. Are you using an older version of swaylock? That error is generated from background-image.c, not main.c like your log says. Also I can't reproduce it - for me it shows a white screen when the image doesn't exist.. > Works, though I still find it a bit weird that moving the container changes the focus so that it has to be manually moved back.\nSay you have a container on workspace 1 and you're going to move it to workspace 2. Before moving, your focus stack is workspace 2 > workspace 1 > container. After moving the container, the focus stack hasn't changed but you need it to be workspace 1 > workspace 2 > container, and you need to emit a workspace::focus event too. To do this you'd normally call seat_set_focus(seat, container), but this is a no op because container is already focused. So you have to change the focus to something else then change it back.. You can achieve that effect by naming your workspaces 1: one, 2: two, 3: three then using strip_workspace_numbers yes in your bar config.. You can achieve that effect by naming your workspaces 1: one, 2: two, 3: three then using strip_workspace_numbers yes in your bar config.. I can't reproduce, as phpstorm tries to ask for a license and the license window has no content.\n@apreiml Can you please try with this patch to wlroots?\ndiff --git a/xwayland/xwm.c b/xwayland/xwm.c\nindex fce61f6b..48e74a60 100644\n--- a/xwayland/xwm.c\n+++ b/xwayland/xwm.c\n@@ -313,6 +313,7 @@ static void xwayland_surface_destroy(\n    wl_list_for_each_safe(child, next, &xsurface->children, parent_link) {\n        wl_list_remove(&child->parent_link);\n        wl_list_init(&child->parent_link);\n+       child->parent = NULL;\n    }\n\n    if (xsurface->surface_id) {\n\nIf you weren't aware, you probably need to have phpstorm in fullscreen.. I can't reproduce, as phpstorm tries to ask for a license and the license window has no content.\n@apreiml Can you please try with this patch to wlroots?\ndiff --git a/xwayland/xwm.c b/xwayland/xwm.c\nindex fce61f6b..48e74a60 100644\n--- a/xwayland/xwm.c\n+++ b/xwayland/xwm.c\n@@ -313,6 +313,7 @@ static void xwayland_surface_destroy(\n    wl_list_for_each_safe(child, next, &xsurface->children, parent_link) {\n        wl_list_remove(&child->parent_link);\n        wl_list_init(&child->parent_link);\n+       child->parent = NULL;\n    }\n\n    if (xsurface->surface_id) {\n\nIf you weren't aware, you probably need to have phpstorm in fullscreen.. Looks like you had no outputs connected, and a view unmapped. That's why the workspace had a NULL output.\nOne fix would be to check if the workspace has a NULL output in workspace_consider_destroy, but I think a better fix is to untangle cursor_send_pointer_motion and seat_set_focus_warp. When the view is unmapping, all we really want to do is ask the new client to set the new cursor image, and we don't care about changing focus at all.\nI have plans to untangle cursor motion/warping from seat_set_focus_warp after my existing PR is merged. I'll keep this issue in mind.. Looks like you had no outputs connected, and a view unmapped. That's why the workspace had a NULL output.\nOne fix would be to check if the workspace has a NULL output in workspace_consider_destroy, but I think a better fix is to untangle cursor_send_pointer_motion and seat_set_focus_warp. When the view is unmapping, all we really want to do is ask the new client to set the new cursor image, and we don't care about changing focus at all.\nI have plans to untangle cursor motion/warping from seat_set_focus_warp after my existing PR is merged. I'll keep this issue in mind.. @lephe Can you reproduce it on the latest master? If so, please provide a new backtrace.. @lephe Can you reproduce it on the latest master? If so, please provide a new backtrace.. It's for when you have multiple outputs and you click on a blank part of swaybar on an output which doesn't have focus. On i3 it focuses that output/workspace.. It's for when you have multiple outputs and you click on a blank part of swaybar on an output which doesn't have focus. On i3 it focuses that output/workspace.. I think you can fix this by putting this in your ~/.Xdefaults file:\nXcursor.size: 16. Rofi's window is an xwayland unmanaged window. This means we kind of leave it to do its own thing - we don't decorate it with borders, we don't allow standard container operations on it and it's exempt from IPC focus events. It would be interesting to see what i3 does in this case.\n\nRofi probably has its own transparency settings which you could tweak. If not, another option would be to replace rofi with a terminal and fzf.. We should probably emit an IPC event that sets the focus to NULL, so that you can adjust opacity on the previous view again.. Yeah, it's not ideal. It's even more difficult than I thought because we don't actually unfocus the view behind rofi. It retains focused styling and we haven't sent unfocus to the view.\nWe should check i3 and see what it does with focus styling and IPC events, then do the same.. It's intended. T1 and T3 are in a container, and when you focus left into that container we don't automatically set a new focus because you're moving into it from a perpendicular angle. It's how i3 works as well. You can tell in advance which container will be focused because it has focus_inactive styling.\nIt's not configurable within sway. It might be possible via a script that uses IPC, but would be somewhat complicated.. Someone in chat had the same problem, and they bisected it to c495164f6059d8f352afeead86a510365cc802a1 as being the first bad commit. It is suspected that the bug is in Cairo.. Someone in chat had the same problem, and they bisected it to c495164f6059d8f352afeead86a510365cc802a1 as being the first bad commit. It is suspected that the bug is in Cairo.. > Swaybar does currently not link against wlroots\nI don't know where you're getting your information from. It's linked in swaybar/meson.build, and if you search the swaybar directory for wlr_log you'll see it's used dozens of times.. > Swaybar does currently not link against wlroots\nI don't know where you're getting your information from. It's linked in swaybar/meson.build, and if you search the swaybar directory for wlr_log you'll see it's used dozens of times.. I can't reproduce. I tried with this config:\nworkspace 1 output WL-1\nworkspace 2 output WL-1\nworkspace 3 output WL-1\nworkspace 4 output WL-1\nworkspace 5 output WL-1\nworkspace 6 output WL-2\nworkspace 7 output WL-2\nworkspace 8 output WL-2\nworkspace 9 output WL-2\nworkspace 10 output WL-2\n\nworkspace 6\nexec firefox\nworkspace 2\nexec terminator\nworkspace 5. I can't reproduce. I tried with this config:\n\nworkspace 1 output WL-1\nworkspace 2 output WL-1\nworkspace 3 output WL-1\nworkspace 4 output WL-1\nworkspace 5 output WL-1\nworkspace 6 output WL-2\nworkspace 7 output WL-2\nworkspace 8 output WL-2\nworkspace 9 output WL-2\nworkspace 10 output WL-2\n\nworkspace 6\nexec firefox\nworkspace 2\nexec terminator\nworkspace 5. Works for me on DRM.. Works for me on DRM.. Try something like `WLR_DRM_DEVICES=/dev/dri/card0,/dev/dri/card1 sway`. I may be wrong BTW.. Try something like `WLR_DRM_DEVICES=/dev/dri/card0,/dev/dri/card1 sway`. I may be wrong BTW.. Thanks! This PR is very much appreciated.. Thanks! This PR is very much appreciated.. It will be resolved when #2890 is merged.. It will be resolved when #2890 is merged.. The Nvidia warning is included in the log but it gets lost in the information. Maybe we could open swaynag instead - but if we do that then we should consider providing a way for the user to say \"don't show this again\".. The Nvidia warning is included in the log but it gets lost in the information. Maybe we could open swaynag instead - but if we do that then we should consider providing a way for the user to say \"don't show this again\".. To give some background, prior to this patch we printed a log message if the nvidia driver was loaded. This works okay if the user's only GPU was nvidia because sway would crash and they'd see the log message. But if using hybrid graphics where the primary is Intel and the secondary is nvidia, sway would continue to work (just without nvidia monitors) and the user would never see the log message. Then they're likely to create issues related to outputs not working, causing us to invest time in troubleshooting it, only to find that they are using nvidia and never saw the warning.\n\nTo resolve this, we have to make sure the user is aware that they are running an unsupported driver. We wanted a one-time warning, but that means we'd have to store a \"seen warning\" flag somewhere, but we don't have any facility for that hence why aborting by default and using an argument to bypass it was the chosen method. Admittedly, the argument to bypass it is a bit cheeky, but the user is likely to configure it in a script and never type it again. The intention is not just to break sway for nvidia users.\nSince implementing this, it's been pointed out that the method we use to check if the nvidia driver is in use isn't perfect - it can trigger false positives. This is the same method we've used for a long time, but it's more important that we don't get false positives now. To detect it properly we have to retrieve it from DRM, and this requires changes to wlroots - which looks like it's already underway.. To give some background, prior to this patch we printed a log message if the nvidia driver was loaded. This works okay if the user's only GPU was nvidia because sway would crash and they'd see the log message. But if using hybrid graphics where the primary is Intel and the secondary is nvidia, sway would continue to work (just without nvidia monitors) and the user would never see the log message. Then they're likely to create issues related to outputs not working, causing us to invest time in troubleshooting it, only to find that they are using nvidia and never saw the warning.\nTo resolve this, we have to make sure the user is aware that they are running an unsupported driver. We wanted a one-time warning, but that means we'd have to store a \"seen warning\" flag somewhere, but we don't have any facility for that hence why aborting by default and using an argument to bypass it was the chosen method. Admittedly, the argument to bypass it is a bit cheeky, but the user is likely to configure it in a script and never type it again. The intention is not just to break sway for nvidia users.\nSince implementing this, it's been pointed out that the method we use to check if the nvidia driver is in use isn't perfect - it can trigger false positives. This is the same method we've used for a long time, but it's more important that we don't get false positives now. To detect it properly we have to retrieve it from DRM, and this requires changes to wlroots - which looks like it's already underway.. If you run swaylock from the command line you should get log output.\nYou might find it easier to run sway in a nested session (use a different config file with a different mod key) and launch swaylock into the nested session by running (from your normal session) WAYLAND_DISPLAY=wayland-1 swaylock. You could add log statements to common/loop.c in loop_poll to see how frequently it's hitting that function. You could also log these:\n\nSee if pfd.revents has the POLLHUP or POLLERR or POLLNVAL bits set.\nCheck that ms doesn't sit at 0 all the time.\nCheck that poll is not returning -1.. If you run swaylock from the command line you should get log output.\n\nYou might find it easier to run sway in a nested session (use a different config file with a different mod key) and launch swaylock into the nested session by running (from your normal session) WAYLAND_DISPLAY=wayland-1 swaylock. You could add log statements to common/loop.c in loop_poll to see how frequently it's hitting that function. You could also log these:\n\nSee if pfd.revents has the POLLHUP or POLLERR or POLLNVAL bits set.\nCheck that ms doesn't sit at 0 all the time.\nCheck that poll is not returning -1.. It just happened for me on 641fbe576e10064b253671acd0360b500232a235, which is a commit in a branch of mine which is branched from 46fc4ba4e3e2444ff68a894ab837d8e1e3324e0a.\n\nAfter unlocking, a swaylock process was still running. I straced it and got this repeatedly:\npoll([{fd=3, events=POLLIN}], 1, -1)    = 1 ([{fd=3, revents=POLLIN|POLLHUP}])\npoll([{fd=3, events=POLLIN}], 1, 2147483647) = 1 ([{fd=3, revents=POLLIN|POLLHUP}]). It just happened for me on 641fbe576e10064b253671acd0360b500232a235, which is a commit in a branch of mine which is branched from 46fc4ba4e3e2444ff68a894ab837d8e1e3324e0a.\n\nAfter unlocking, a swaylock process was still running. I straced it and got this repeatedly:\npoll([{fd=3, events=POLLIN}], 1, -1)    = 1 ([{fd=3, revents=POLLIN|POLLHUP}])\npoll([{fd=3, events=POLLIN}], 1, 2147483647) = 1 ([{fd=3, revents=POLLIN|POLLHUP}]). Ah, I didn't realise that #2925 fixes the issue (the title misled me) and hadn't been merged at the time that I started swaylock. So yes, that should fix it.\n\nI determined that the rogue swaylock process was one that I launched into a nested session before reproducing a compositor crash. With the wayland fd broken it went into a busy loop.. Ah, I didn't realise that #2925 fixes the issue (the title misled me) and hadn't been merged at the time that I started swaylock. So yes, that should fix it.\nI determined that the rogue swaylock process was one that I launched into a nested session before reproducing a compositor crash. With the wayland fd broken it went into a busy loop.. Fixed by the above PR.. Fixed by the above PR.. Are you sure about this? When using hide_edge_borders both, we always show the title bar even for linear containers, and I believe that was copied from i3.. Are you sure about this? When using hide_edge_borders both, we always show the title bar even for linear containers, and I believe that was copied from i3.. I actually think this is expected behaviour. When you open the autocomplete menu, we render focused styling on Firefox, and any key bindings (like move right) apply to Firefox as a whole. When you run kill, we ask the main Firefox window to close, which it rejects because the autocomplete surface is open. If the autocomplete surface was a floating view then it'd be a different story.\nBy the way, in Firefox you can press Escape to close the autocomplete menu.. I actually think this is expected behaviour. When you open the autocomplete menu, we render focused styling on Firefox, and any key bindings (like move right) apply to Firefox as a whole. When you run kill, we ask the main Firefox window to close, which it rejects because the autocomplete surface is open. If the autocomplete surface was a floating view then it'd be a different story.\nBy the way, in Firefox you can press Escape to close the autocomplete menu.. I'm playing around with seats and I have the duplicate cursor too, but with a more simple setup. I have a laptop with a USB keyboard and USB mouse. Here's my config:\nseat seat0 fallback true\nseat seat1 attach \"1:1:AT_Translated_Set_2_keyboard\"\n\nI'm just attaching the built-in keyboard to seat1. And for some reason I get two cursors. Everything appears to have mapped correctly:\n$ swaymsg -t get_seats\nSeat: seat1\n  Capabilities: 2\n  Devices:\n    AT Translated Set 2 keyboard\n\nSeat: seat0\n  Capabilities: 3\n  Devices:\n    ETPS/2 Elantech Touchpad\n    Chicony USB 2.0 Camera: Chicony\n    PixArt Microsoft USB Optical Mouse\n    Dell Dell USB Keyboard\n    Sleep Button\n    Power Button\n    Video Bus\n    Power Button\n\nEdit: Okay, it seems pretty obvious that this is happening because seat_create creates the cursor regardless of whether a pointer is attached to the seat or not.. I'm playing around with seats and I have the duplicate cursor too, but with a more simple setup. I have a laptop with a USB keyboard and USB mouse. Here's my config:\nseat seat0 fallback true\nseat seat1 attach \"1:1:AT_Translated_Set_2_keyboard\"\n\nI'm just attaching the built-in keyboard to seat1. And for some reason I get two cursors. Everything appears to have mapped correctly:\n$ swaymsg -t get_seats\nSeat: seat1\n  Capabilities: 2\n  Devices:\n    AT Translated Set 2 keyboard\n\nSeat: seat0\n  Capabilities: 3\n  Devices:\n    ETPS/2 Elantech Touchpad\n    Chicony USB 2.0 Camera: Chicony\n    PixArt Microsoft USB Optical Mouse\n    Dell Dell USB Keyboard\n    Sleep Button\n    Power Button\n    Video Bus\n    Power Button\n\nEdit: Okay, it seems pretty obvious that this is happening because seat_create creates the cursor regardless of whether a pointer is attached to the seat or not.. Thanks!. Thanks!. Does this match i3's output? It's weird for the title to be in the window properties, as it's probably also in the outer element.\nMaybe you could have window_properties regardless of whether it's Xwayland or not, and for Wayland list the app id, and for Xwayland keep it as you currently have it.. Does this match i3's output? It's weird for the title to be in the window properties, as it's probably also in the outer element.\nMaybe you could have window_properties regardless of whether it's Xwayland or not, and for Wayland list the app id, and for Xwayland keep it as you currently have it.. Okay, I didn't realise the app ID was already included. I'm happy to leave that as is and keep window_properties for Xwayland windows only.\nYou should be able to get the transient ID using c->view->wlr_xwayland_surface->parent->window_id, keeping in mind that parent may be NULL.. Okay, I didn't realise the app ID was already included. I'm happy to leave that as is and keep window_properties for Xwayland windows only.\nYou should be able to get the transient ID using c->view->wlr_xwayland_surface->parent->window_id, keeping in mind that parent may be NULL.. Thanks!. Thanks!. Thanks!. Is output_for_each_surface supposed to iterate all surfaces on the output or just the visible ones? Because if the workspace has a fullscreen container then it'll start with that as the root, and will run the callback for all tabbed children, even those which aren't visible. Sending frame done does this properly by calling view_is_visible in the iterator function, but send_presented_iterator does not.. Oh, right.. This is probably specific to your terminal and the value of focus_on_window_activation. BTW, are workspaces 1 and 2 on the same output?. Which terminal are you using? And is mpv launching a window to show album art?. I can't reproduce this..     2018-10-24 19:58:40 - [sway/sway/commands/bind.c:271] bindsym - Bound mod4+d to command exec rofi -i -modi drun,run,window -show drun for device '*'\nDefinitely a quoting issue. The commas are being interpreted as command separators.. That works for me. Config:\nset $menu \"rofi -i -modi drun,run,window -show drun\"\nbindsym $mod+n exec $menu\n\nHere it is parsing my config:\n2018-10-24 19:11:29 - [sway/config.c:654] Read line 62: set $menu \"rofi -i -modi drun,run,window -show drun\"\n2018-10-24 19:11:29 - [sway/commands.c:374] handling config command 'set $menu \"rofi -i -modi drun,run,window -show drun\"'\n2018-10-24 19:11:29 - [sway/commands.c:156] find_handler(set)\n2018-10-24 19:11:29 - [sway/config.c:654] Read line 63: bindsym $mod+n exec $menu\n2018-10-24 19:11:29 - [sway/commands.c:374] handling config command 'bindsym $mod+n exec $menu'\n2018-10-24 19:11:29 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-24 19:11:29 - [sway/commands/bind.c:271] bindsym - Bound Mod1+n to command `exec \"rofi -i -modi drun,run,window -show drun\"` for device '*'\n\nAnd here I am running the command:\n2018-10-24 19:11:31 - [sway/commands/bind.c:289] running command for binding: exec \"rofi -i -modi drun,run,window -show drun\"\n2018-10-24 19:11:31 - [sway/commands.c:277] Handling command 'exec \"rofi -i -modi drun,run,window -show drun\"'\n2018-10-24 19:11:31 - [sway/commands.c:156] find_handler(exec)\n2018-10-24 19:11:31 - [sway/commands/exec_always.c:44] Executing rofi -i -modi drun,run,window -show drun\n\n. This isn't the right fix for this issue. We shouldn't be patching low level functions to fix higher level issues. If we do, it becomes hard to maintain the codebase and we become scared to change things.. We're getting closer. A use case for the // Setting focus_inactive code is when the visible view in a tabbed container closes while focus is elsewhere. Without setting focus inactive, the most recently focused container in that subtree would be the tabbed container itself, so returning to that workspace after the view has unmapped would bring focus to the tabbed container. The code is setting focus inactive to another child within the tabbed container.\nThe use case is still valid when no container is focused. For example, a tabbed child unmapping while swaylock is running. I thnk the best solution would be to change the final call to seat_set_raw_focus so it passes the result of seat_get_focus_inactive instead of focus.\nI still don't understand how this is related to hotplugging a keyboard though. Any ideas?. I suspect your crash isn't related to the docking station or peripherals. I think a view unmapped while there wasn't a focused container (eg. if swaylock was running). I just reproduced it and got what looks like the same backtrace.. * Create layout T[terminal terminal terminal] on workspace 1\n In the visible terminal, run sleep 5 && exit\n Before the sleep finishes, focus workspace 2 and lock the screen\n Wait for the sleep to finish\n Unlock the lockscreen\n* The focus will have changed to a tabbed child on workspace 1 rather than remaining on workspace 2\nYou need to use seat_get_focus_inactive.. Closing this because no one has confirmed that there's an issue in the latest masters.\nIf anyone continues to have windows opening as floating and they believe they shouldn't, please confirm you're running the latest masters of both sway and wlroots. If you are and it still occurs, please reply here and we'll reopen the issue.. > Why doesn't output_get_active_workspace work properly if the top of the stack is the view on workspace 1? Wouldn't it find that view, and then take its workspace, which is 1?\nIt uses seat_get_active_tiling_child, which returns the most recently focused direct child. That function works by doing a foreach followed by a parent check on each node. If we were to change it to how you describe then it would have to use seat_get_active_child which does a foreach followed by an ancestor traversal on each node. It's more expensive.\nPlus, workspaces must be kept in focus order in the stack because of the IPC get_tree command. The focused element contains an array of children in focus order.. The intention behind it is for it to do as little as possible. I consider this good practice when still fleshing out a project. Once everything has settled, it's easy to search for usages of seat_set_raw_focus, determine if we can make it do a little more (like putting the parents on the stack) then make it be. In contrast, what we don't want to do is make that decision ahead of time then decide we need a seat_set_really_raw_focus function that bumps a single node. This is what has already happened with seat_set_focus as well as cursor_send_pointer_motion. They did too much and we had to split both of them, and that came with some difficulty.\nSo yes, we might make seat_set_raw_focus put the parents on the stack eventually.. @SirCmpwn Could you please look into your trace? The backend had failed to start and sway would have exited had it not crashed. I'm not convinced that your crash was related to this change, and this change should fix #3015 it we reapply it.. Thanks!. Works fine for me. When I set the layout to vertical I get the indicator along the bottom. Then when I set the layout to tabbed the indicator disappears. Note that the view still retains its border styling while there's only one child in the tabbed container, so if you're using border pixel then it'll still have a pixel border. Then when I open a second terminal, the tabbed title bar appears.\n\nWhat this prevents:\nHaving 2 containers, side by side, with one being tabbed\n\nYour instructions don't produce this layout.. Works with default_border none as well. Can you please attach a debug log?. Yeah, for the first issue have a look at output_enable. We are calling apply_output_config before we create the workspace, and apply_output_config triggers wlroots to emit an output layout change, which causes us to create a transaction which attempts a cursor rebase. As there is no workspace yet, this causes a crash.\nI would think that moving apply_output_config to after the workspace creation would fix it, but that produced another crash which got reverted so maybe that needs to be investigated further.\nOr maybe we should only be committing transactions in response to events on the Wayland event loop, and not in response to wlroots signals.. Can you also document it in the sway-input man page?. Yeah, I was thinking of acrisci (https://github.com/acrisci/i3ipc-python).. > I'm still not fond of this idea. I wasn't against this because I didn't want to implement it, but because I didn't want it implemented. The complexity this introduces to the codebase is remarkable.\nIn earlier versions of the codebase this was probably the case (before the type safety refactor), but it's in a better state now. Placeholder containers can be regular containers, just with a NULL view pointer and with a populated swallows_criteria list pointer, and should work without any major refactoring.\nThere is moderate complexity in the parsing of the JSON, but this is confined to commands/append_layout.c and doesn't affect the main codebase.\nHere's all the changes I can think of that affect the main codebase:\n\nWhen rendering, we'll need to check if the container is a placeholder and render it differently. It'll be the same as a normal view, but the surface is just black with a texture showing the raw criteria.\nview_map will need to check the swallows_criteria and place the view in the matching container. This involves either scanning all the containers for placeholders or storing a list of all placeholder criteria in the sway_root struct so we can iterate it in one place.\nBorder properties and marks will need to be moved from views to containers so we can set them on the placeholder container, but this should probably be done anyway.\nThe kill command will need to check if the container is a placeholder and destroy it (rather than try to send a close request to the surface).\nThere might be a couple of other checks to see if the container is a placeholder, such as when arranging, doing cursor motion and responding to IPC's get_tree, but I'm not sure about this yet.\nWhen destroying a container, we'll need to free the swallows criteria and criteria texture.\n\nIf you're not going to approve of a PR that does this then there's no point in me continuing. There's several people who want this feature though.. > > When rendering, we'll need to check if the container is a placeholder and render it differently. It'll be the same as a normal view, but the surface is just black with a texture showing the raw criteria.\n\nDoes this involve rendering additional textures?\n\nYeah. There'll be one new texture on the container struct which displays the criteria string. See this screenshot:\nhttps://i3wm.org/docs/layout-saving-1.png\nThe texture will be created in the append_layout command, destroyed when swallowed or when the container is killed without swallowing, and recreated at a different scale when moving the container to an output of a different scale.\nBTW, the screenshot above shows a watch icon. I don't plan on implementing that as part of this PR.. This is intended. See #2815.. A similar thing happens with gnome-calculator when you have swaybar at the bottom and gnome-calculator doesn't have enough space to fit its minimum surface height. It overlaps swaybar. For example, create layout V[view view gnome-calculator].. I started to do this, but having both enum movement_direction and enum wlr_direction is causing some grief. We have a function in move.c called opposite_direction which is exactly what we need, but it works with enum wlr_direction while the focus command uses enum movement_direction.. I just want to make it clear that what we currently have implemented matches exactly what i3 does, and by merging this we are intentionally diverging from i3's behaviour.\nThat said, I'm fine with this.. Wouldn't that be done by the calls to transaction_commit_dirty in handle_new_output and handle_destroy?. I see. We'll need to fix it using a different method then.. The gaps inner|outer all|current set <amount> command sets the gaps for the current (or all) workspaces at runtime. It is not intended to be used in config like this.\nUse this:\ngaps inner <amount>\ngaps outer <amount>. How about `[criteria] inhibit_idle focus|visible|open`? It'd be less code (don't have to deal with criteria in the command) and users could bind it to a key so it can run on the currently focused view.. In this branch, to run sway in a nested session, I now have to either unset `WAYLAND_DISPLAY` or set it to something like `wayland-1`. Is this intentional?. Thanks!. That commit doesn't exist. Anyway, your version is around 3 weeks old and it was likely fixed by 63d076dc2abba0cab6fb78bb2e36088f0b4f9ae5.. Thanks!. No docs?\n\nAlso, I assume you mean config-time and not runtime.. The only use case I can think of is a user who doesn't want to use Xwayland and who is using a distribution version of sway which has it enabled at compile time. It may be useful for someone who is running sway on a low memory device and wants as many resources as possible available for other things.\nI don't see any maintenance or complexity overhead in having it, so +1 from me.. > sway version 1.0-beta.1 (via Gentoo)\nDoes that mean you're running a version from mid October? I believe this is fixed in master.. Yes, use list_t (ie. create_list, list_add, etc). It's a dynamically resizing array.. Thanks!. Thanks!. Thanks!. Your wlroots version is from September 5th. Try updating it.. If we were to merge your PR as is and use the same logic everywhere (returning early if passed arguments are NULL) then this would leave sway in an indeterminable state after OOM situations. Instead, I think it would be better if the functions which created the lists were to check that they were created successfully, and attempt to handle the situation gracefully if possible.. > As it is right now however, there are a lot of places where null pointers would be derefenced, such as in the call to list_add() in swaynag/main.c line 35.\n\nIs it better to crash early in these cases or would it be better to check every call to create_list() and exit with a failure?\n\nI consider it critical that sway continue running during OOM situations, but not secondary programs like swaynagbar, swaybar and swaybag. The reason is if sway crashes then the user has lost their unsaved work, but if any of the secondary programs crash the user can just restart them and hasn't lost any work. For this reason I wouldn't bother trying to prevent OOM-related crashes in the secondary programs.\nFor sway, it's not desirable to crash or exit gracefully if the user didn't request it. What we should do depends on the context. If the user is running a command then we can just return a failure. If a view is trying to map then I think we can reply with a \"no memory\" response but I'm not sure how exactly. For memory allocations within transaction code, that really needs to work in all situations, so I'm not sure how we'd get around that other than reserving some memory ahead of time.. What about checking if the focused container has a single child and is already the desired layout, and returning an error if so? It would save the hassle of creating a container only to destroy it, and allows IPC scripts to detect when this is a no-op.. Thanks!. Would there be any benefit in making it a power of 2? Eg. set the initial capacity to 8 instead of 10.. > sway version: 0.15.2\nTry the latest version in master, along with wlroots. It's pretty much a rewrite and solves many problems in 0.15.. BTW, I'd be in favour of renaming free_flat_list to something that starts with list_. I'd also like to see create_list renamed to list_create at some point (not in this PR though).. Thanks!. You might be interested in mouse button bindsyms. For example, you can set up a bindsym so it closes the window when you right click anywhere on the title bar.. Please try again with the latest master.. Code LGTM. Not sure how I feel about having seat_begin_move_tiling set the seat operation to something other than MOVE_TILING though. I'd be neater if there was a seat_begin_move_tiling_threshold function.\nHowever, after reviewing this changes I'm thinking perhaps we should use an interface for the seat operation (for a separate PR). I haven't given it much thought yet, but something with .begin, .move, .end and .abort callbacks would be a good start. We could then have one file per seat operation and remove a lot of stuff from cursor.c.. I can't reproduce it. Just confirming, the steps I'm doing are:\n\nStart a nested session with WLR_WL_OUTPUTS=2\nLaunch terminator (it uses xdg_shell) on one output and another terminator on the other\nIn the left output's terminal, run the test program\nMove the window to the right output and fullscreen it\nMove focus back to the left output\nWait for sleep to expire\nSome stuff happens, a window is briefly opened on the left output and closed again\nSway continues running\n\nI also tried it with the DRM backend, using gnome-terminal (I noticed you were using that). BTW, I don't see a focus change message in your log, but I also can't reproduce the crash if I keep focus on the fullscreened view.\nAny ideas? Can you try the latest master of both sway and wlroots too?. Okay, I've reproduced it now using hello-wayland.\nTo give some background: In each transaction, we have to save the view's buffer so we can continue displaying it at the old size until all views in the transaction are ready. This can either be done on creation of the transaction or when committing it. Creating a transaction happens in the same event tick as whatever event triggered it. Committing a transaction means sending configures to the views. The commit usually happens in the same event tick as creation, but if there's another transaction in progress then this one needs to wait for the first to finish before committing. We currently save the buffers when committing, but in this case the buffer is already gone. However, saving the buffer upon creation isn't right either because the transaction that's in progress might have sent configures to resize it, so it wouldn't be the right size for the new transaction.\n\nThere's a simple immediate fix: check if the view's surface is null when rendering a fullscreen container in output_render.\n\nThat's what we currently do for non-fullscreen views. See render_view and render_saved_view. I guess the same check needs to be done for fullscreen views. Go forth and submit a PR :-). I'd rather see the existing threshold logic apply to both focused and unfocused containers than have separate commands for this.. I think for this to be practical the text must not be rotated. And as mentioned, that introduces challenges like choosing the width of the bar and figuring out how to lay out the elements (tray icons especially).\nI think this would be better suited to a third party program. Swaybar is text based, and text doesn't work very well for vertical bars due to it needing to be truncated. An icon-based bar would work better. And implementing this in swaybar would mean adding more configuration directives and code paths to support, with these only being used by a small fraction of users.. > I have all settings done like \"URxvt.urgentOnBell: true\"\nI don't think you can configure URxvt using ~/.Xresources on Wayland. Try putting it in ~/.Xdefaults instead.\n\nin termite in section options \"urgent_on_bell = true\" and etc.\n\nTermite uses Wayland by default, and Wayland doesn't support urgency. Only Xwayland windows do. If you want to use termite using Xwayland, launch it with termite --display :0.. Bump.. * Toggling logic has been adjusted.\n I've introduced a sway_fullscreen_mode enum and merged the two container_set_fullscreen functions into one. This means we can pass the enum value straight through IPC.\n As part of the above, I found several other places where we needed to check for fullscreen.\n* There is a new function container_fullscreen_disable which is just there for convenience.. 1 and 2 are now fixed. I'm too tired at the moment to try and understand what the swap command is doing with focus (I don't use the swap feature myself, which makes it even harder). It looks like you wrote the original code. Can you offer some insight?. I think I've fixed everything listed. For all the arrange issues, any time we arrange a workspace we have to check if there's a fullscreen global and arrange root instead. I don't particularly want to do that in arrange_workspace itself, so I'm doing it in each command.\nMy fix for the swap focus is a bit dirty, but I still don't understand the original logic. Specifically, I don't understand why it needs to check the parent layout type. We should consider refactoring that code and adding comments at a minimum.. I've made a bunch of updates. This is from my commit message:\n\narrange_root when doing fullscreen changes, because we don't know if normal fullscreening a normal container is unfullscreening a fullscreen global container\nConsider fullscreen global containers in node_at_coords\nNote that this doesn't consider transient containers. Transient containers need to be refactored anyway, as they aren't considered when the fullscreen view is a split container anyway.\n\n\nFix a bool that should be an enum in container_floating_move_to_center\nRefactor container_set_fullscreen so that the function only orchestrates the toggling of other containers\nIntroduces container_fullscreen_workspace which changes a container from FS none to FS workspace\nIntroduces container_fullscreen_global which changes a container from FS none to FS global\nRepurposes container_fullscreen_disable which changes a container from either FS mode to FS none\n\n\nFix some scratchpad weirdness:\nWhen scratchpad hiding a fullscreen global container, nullify the root's fullscreen_global pointer (in container_detach)\nWhen scratchpad showing a container with mode set to FULLSCREEN_GLOBAL, disable any existing fullscreen global container\n\n\n\nThe unresponsive view issue has me stumped at the moment. It happens for me with xwayland too. We send the pointer and keyboard events properly, but the client doesn't commit anything. And from what I can tell we're sending frame events properly (the view passes the view_is_visible check).\nI'd like to squash my commits once I have this in a mergeable state. I've refactored fullscreen a few times now in this PR and there are buggy commits, so having one squashed commit would make it easy to revert if needed.. I have resolved the remaining rendering/damaging issue. output_for_each_surface needed to consider the fullscreen global container and its children.\nIf you guys are happy to merge this now, let me know and I'll squash my commits first.. I've added documentation and squashed the commits.. Rebased. I'll do testing with the DRM backend this weekend. Please don't merge until then.. DRM tested fine, no crashes. I hotplugged from two outputs down to zero and back to two, and also ran swaymsg -t get_outputs via SSH from another device while there were no outputs connected.\nThis is still relevant:\n\nThe output is returned in the IPC get_outputs list, so perhaps we should hide it. Also, we never enable the output (we never have to), so perhaps we should add a check to make sure it can't be enabled using config or IPC.. Both of those are done now. I'm not sure what you mean by fake workspaces. When there's no outputs connected, swaymsg -t get_workspaces shows nothing.. What do you think of moving output_enable and output_disable into tree/desktop/output.c so they're in the same file as the handlers, and keeping the listener registration in those functions? It means the if (output->enabled) checks won't be needed, and it could register the listeners directly. Are there any other benefits to registering them on output creation?. Yes, we render the destroy views, and we do so using their saved buffer. I think the issue here is the view has a null container.. This might have been introduced by 0b18560952c8615b945ab62ee365b95fede647cc.. My preference is the first option (configure then insert to tree) because it won't trigger a bunch of unnecessary IPC events if the configure fails.. The core issue here is having root_scratchpad_remove_container call root_scratchpad_show. When destroying the container we don't really care about making it show, and this additionally triggers an unwanted window::move IPC event.\n\nroot_scratchpad_remove_container is called from three places:\n\nWhen destroying a container in container_begin_destroy, where we don't want to show it.\nIn container_set_floating, where it's already showing (we don't allow unfloating a hidden scratchpad container using criteria).\nIn cmd_move_container, where it needs to be shown.\n\nA better fix is to remove the call to root_scratchpad_show from root_scratchpad_remove_container and add it to cmd_move_container. Additionally, remove the window::move IPC event from root_scratchpad_show because it's already called in the move command. It would need to go in the scratchpad show command though.. Update the scdoc package.. This is happening because the down seat operation overrides most of the behaviour in dispatch_cursor_button. If the seat operation is active, the routine returns fairly early and doesn't send button events to the surface.\nI'm not sure what the best course of action is yet. Removing the down operation entirely might be best, but we'd have to track which node was active when any button presses started so that we can continue to send motion events to it, even if the cursor is no longer over that surface (eg. for when you operate a scrollbar and move the cursor off the surface while scrolling).\nAnother option would involve making dispatch_cursor_button not return early for the down seat operation, but this is a hacky solution.\nYet another option is to add a handle_button callback to seat operations, then make the down operation use this handler to send the button events to the surface. I'm not a fan of this idea.\nAt this stage I suspect removing the down operation is best.. While this works, it can be wasteful because there's probably other code somewhere that arranges layers and calls cursor_rebase itself. This commit would cause it to be rebased twice in this case.\nI'd prefer it to be rebased from handle_layer_shell_surface.. This is new behaviour in Arch's pambase package which was updated recently. It requires /etc/pam.d/swaylock to exist with this content:\nauth include login\n\nThe file already exists in the swaylock repo and Meson is configured to install it.. Fixed. From my commit message:\nBy the time seatop_allows_events was called, seatop_impl was already\nNULL, causing the function to always return false. This means a press\nevent was sent to clients without a corresponding release event.\n\nThis patch moves the call to seatop_finish to after the\nseatop_allows_events check.. Try this:\n\nassign [app_id=\"firefox\"] foo. I've been using this for over 24 hours now and haven't noticed any regressions. I'm now inviting others to review and test.. There was a commit recently (7b9ae42331e49fea0f566fa7592855dee5da1991) which probably affected this. It's not intentional.\n\nHowever, I'm struggling to find any functional difference between master and 73605dac2ae18e2ca84a74da895c4098a1bee6f8 which is a couple of commits prior to 7b9ae42331e49fea0f566fa7592855dee5da1991. In both commits, hovering a tab title with focus_follows_mouse brings focus to that window. Can you please write steps to reproduce and confirm which commit it works properly in?. I'm doing the following:\n\nUsing commit fb3475e\nHave focus_follows_mouse yes in config\nOpen two views\nlayout tabbed\nMove the cursor over the unfocused tab\n\nWhen I do that, the unfocused view is focused. From what you're saying, I should have to click to focus it. And this is the commit you said was good.\nCan you please clarify the steps to reproduce?. I suspect your shell is eating the quote characters. Try this:\nsway output '\"Panasonic Industry Company 0x96A2 0x00000000\"' scale 1.5. I tried this just now, but `last_workspace` can be null which means I'd have to make it conditional. It doesn't really improve the readability in that case.. I'd already removed these variables before seeing the latest two comments. I think it's best to leave them out for now and look at it once floating is implemented.. That requires replacing the call to `wlr_output_set_fullscreen_surface()` when rendering, and that's not something I want to do at this time.. I don't think this function is called before the view is mapped, so that's not a problem.\n\nI tested mpv with the fullscreen argument and realised that I need to adjust the handle_map() functions to check if the surface is requesting fullscreen while mapping. I've done this and mpv's fullscreen argument works now.. * Containers need to be fullscreenable.\n Surfaces can request to be fullscreened on a specific output, which is currently ignored.\n Fullscreen is not frame perfect.\nI think that's it.. See acrisci's comment here: https://github.com/swaywm/sway/pull/1817#pullrequestreview-112607354. I've tested this fine with mpv file --fs and mpv file --fs --opengl-backend=wayland. It was originally not working because it uses wl_shell which I hadn't implemented fullscreen in. I've figured out how that one works since then.. Resolved in 45a2fad.. Resolved in 2acfbc5.. Resolved in 7e38cc2.. Resolved in 9d3739a.. Resolved in 6afccd0.. Resolved in bd67342.. This file was copied from Sway 0.15. It's an optional part of the command: https://i3wm.org/docs/userguide.html#assign_workspace. Resolved in 30a7488.. Do you want me to change anything here?. Whoops, I was meant to remove that.. They can be removed if I move their implementations to above where they're called. The original layout.c did the same thing (see current master).\nI guess it's a tradeoff between duplicating the definition and having the flow of function calls be linear, or not duplicating the definition and having to jump around the file when reading the code. Not sure which is best.. arrange_children_of() would still need to accept a sway_container, and that means there'd be inconsistency in how you call these functions.\nAdditionally, there'd be nothing stopping you from accidentally passing the wrong pointer for that container type to the function. For example, if you had a C_CONTAINER, assumed it was a workspace by mistake and passed its sway_workspace pointer to arrange_workspace(). That wouldn't be caught during compilation, and arrange_workspace() wouldn't be able to assert that this has not happened.. Nope. When you fullscreen a view and move it to a workspace which already has a fullscreen view, the raw function is called directly to unfullscreen the previous one. It must do this without calling arrange_workspace(), because it hasn't yet sized the new fullscreen view and the widths get messed up. The arrange windows and output damaging still happen as part of the move operation.. @SirCmpwn Do you have a preference here?. The previous function had a lot of complexity which made it hard to understand. It was recursive, used different logic per container type, and some of the switch statements used return while others use break. Separating them into different functions improves readability because the part that is recursive is isolated to a smaller area of code.\nIn hindsight, I wouldn't have included the new arrange_windows() function at all. It's not called anywhere, and it's not a very appropriate name because it can also arrange outputs and workspaces.. I was thinking perhaps I should move all the rendering into a new render.c file. Are you cool with that?. At the moment I take the alpha from the container (from the opacity command). I guess we can allow them to enter the alpha part in their config and combine the two. I'd rather this be a separate PR so this one doesn't become huge.. Does /**< have any special meaning over the standard //? I copied the comment format from a few lines below because I thought there's no special meaning and it's just a style thing.. default_orientation tabbed is not supported by i3, so we shouldn't support it either.\nWorkspaces can either have a none, horizontal or vertical layout. If it's none then it'll choose between the other two based on whether it's portrait or landscape. Tabbed and stacking layouts are only applied to C_CONTAINERs.. This if-statement should be joined with the one below using else-if.. So to clarify, workspace_layout determines the layout that new containers have when they are direct children of the workspace, while default_orientation changes the layout of the workspace itself. I agree that this is confusing, and I'd even vote to break from i3's behaviour and simply remove both commands if it makes sense to do so. But that's not something that should be done as part of this PR (or done at all unless discussed and agreed on), so this PR should follow i3's behaviour.. Thanks!. parse_title_format is only called if the title is not NULL. Should I still put a check in here?. Great idea. Done in fc83e20.. I kind of agree, but that also means we'd be changing output->name to output->title and workspace->name to workspace->title, and I feel like name is a better name for those.. Could you change the logic in this function to be:\n\nIterate all children and render the tab/title\nInside the loop, if the child is focused or focus_inactive, store it in a variable active_child\n\n\nOutside of the title loop, render the child stored in active_child\n\nYou then wouldn't need get_title_textures at all.. Why remove this comment?. To be honest I'm not a fan of piggybacking off this function. \"simple\" refers to a linear layout, being L_HORIZ or L_VERT.\nIt's a tradeoff between code duplication vs the complexity of having separate execution paths through the function. I prefer the code duplication (separate function) option.. Why not pass a pointer to the appropriate border_colors struct like the layout does? Remember, some tabs might need to be rendered with the urgent class.. Could you remove this function and just refer to &config->border_colors.foo directly as needed?. I don't think this is right. The width needs to account for the borders on the sides. The title texture overlaps the right border because of this.. > Do you mean to render the tab/title for every child within the loop?\nYes.\n\nI thought @SirCmpwn didn't want to take that approach and wanted the tab/title to be only rendered for one child and for the logic for the other tabs to come from there. Please correct me if I'm misunderstanding either one of you.\n\nYeah, I think there's a misunderstanding. The tab/title must be rendered for all children (which it is), but he's saying that the border width should be the same, regardless of whether the children use different widths or which child is focused. Cycling through each child should make the layout remain the same (ie. one border width used for all). I think the easiest and best option is to use the default border width stored in config->border_thickness rather than look for one in a child.. Here's a quick example... this won't compile, but it should clarify the logic I would use:\nrender_container_tabbed():\nstruct sway_container *active_child = NULL;\nfor (int i = 0; i < con->children->length; ++i) {\n    struct sway_container *child = con->children->items[i];\n    if (child is focused) {\n        class = &config->border_colors.focused;\n        texture = &child->title_focused;\n        active_child = child;\n    } else if (child is focused_inactive) {\n        class = &config->border_colors.focused_inactive;\n        texture = &child->title_focused_inactive;\n        active_child = child;\n    } else if (child is unfocused) {\n        class = &config->border_colors.unfocused;\n        texture = &child->title_unfocused;\n    }\n\n    // Render title background for this tab here\n    // Render single pixel lines above and below title here\n\n    struct wlr_box box = {\n        .x = con->x + config->border_thickness,\n        .y = con->y + config->border_thickness,\n        .width = con->width / con->children->length - config->border_thickness * 2,\n        .height = con->title_height,\n    };\n    wlr_renderer_scissor(renderer, &box);\n    wlr_render_texture(texture)\n    wlr_renderer_scissor(renderer, NULL);\n}\nif (!sway_assert(active_child, \"tabbed layout has no active child\")) {\n    return;\n}\n\n// Render left, bottom and right borders here - copy from another function and discard indicator border\n// Render actual view that's stored in active_child. I don't know. Do we? From the look of it, only one view can have keyboard focus so it ends up giving keyboard focus to the last view. People aren't likely to type stuff when using focus parent anyway.. I've pushed a commit to address this, however this causes a usability issue where if you have a single view on the workspace and then run `focus parent` (eg. by mistake), there's no visible indication that the workspace itself is focused and anything you type has no effect.. If `focus` is `NULL`, `focus_ws` will also be `NULL`. Then the if-statement on line 171 will always succeed, and you'll pass `NULL` to `seat_set_focus`. It looks like `seat_set_focus` will handle `NULL` gracefully, but I'd rather wrap lines 166-173 in an `if (focus)` check to make it obvious to the reader that this only applies if the seat has focus somewhere.. What if the workspace contains a single container, and that container contains several children? Wouldn't you need to count all the views recursively?. This works fine when passing `C_VIEW` to the function, but if we were to try to pass `C_CONTAINER` then it wouldn't descend into the container's children.. I want to clarify something: The title bar height is border + title height + border as per the comment. The single pixel bars above and below the title are *always* 1px, and overlap the border. So if your border thickness is 3px, you'll have 1px of the \"border\" colour, 2px of the remaining border thickness (\"background\" colour), then the font/texture height for the title (also \"background\" colour), then the opposite for below the title.\n\nYour implementation culls the top 1px bar if border_top is false, but calculates the view's y as if it were culling one entire border (3px in the above example).\nI think the best option is to not cull anything at the top if using a normal border.. The calculation looks good now.\nYou also need to change the rendering code so it always renders the top pixel row when using border normal.. Yeah, I think there's still some confusion. My suggestion is to always render the full title bar and top border regardless of any hide_edge_borders setting, which means render_container_simple_border_normal should not contain any references to border_top.. elapsed. Thanks. I think I've fixed this issue, but not using the suggestion you gave. view->marks should always be a valid list.\nI replicated a segfault by marking a view then running swaymsg unmark. I realised I need to set *texture to NULL after destroying it. After doing that, unmark works correctly. I also copied this fix into the title texture code too - I guess it's not very common to update a title to be NULL which is why we haven't discovered it already.. Done.. I don't think you can... If you look at the title one, we have to adjust the texture box between the calls to wlr_matrix_project_box and render_texture.\nMaybe I'm misunderstanding you though, so correct me if I'm wrong.. I still don't understand. If you want to refactor it, can you do it as a separate PR? It's not a blocker to this one.. I chose to avoid a handle_ prefix because it doesn't actually do the reparent operation. Do you still want me to change it?. I just checked and i3 uses the window class. I've changed it to use the class too, with fallback to app_id. Also, they don't use commas so I've removed those.. If c is a C_CONTAINER (for example, you've hovered a tab title bar), wouldn't this then make it impossible to select a tab by hovering? I don't know if that's even desired, as I don't use focus_follows_mouse.\nIt might be better to change the comparison to c->type == C_WORKSPACE, assuming that's what the type is when you hover the swaybar.. Ah yeah, you or someone else has mentioned that to me before. I'll change it.. Move the call to view_is_visible outside of the while loop and store it in a variable rather than recomputing it on each iteration of the loop.\nAlso, assuming that c is a view makes me a little nervous. Please add an assertion for this.. Is this view_is_visible check needed? If so, assert that next_focus is a view. If not, remove it.. Yeah, I'm not a fan either. The options I can think of for this are:\n1) Adjust the container's position temporarily as it currently does.\n2) Have file-scoped translate_x and translate_y variables, which are 0 if the container being rendered is tiled, and the inverse of the output's position if floating. The rendering functions would add the translation to the thing being rendered, so it's basically forced into output-level scope.\n3) Same as above, but using a wlr_matrix instead of the translate variables.\n4) Use layout-local coordinates for all swayc positions, then subtract the output's position when adding damage and rendering anything.\nOptions 2 and 3 are pretty complicated. To damage or render any view, you have to figure out if the view is itself floating or a child of a floating container (this isn't supported yet but will be later). If it is, its coordinates are layout-local and need to be translated to output-local coordinates.\nI think the best option is option 4 - use layout-local coordinates for all swaycs. This would also resolve the \"these coords might be layout-local or output-local\" issue that you pointed out in https://github.com/swaywm/sway/pull/2027#pullrequestreview-123501607.. Are you sure about that? wlr_xdg_shell contains these:\nbool has_next_geometry;\nstruct wlr_box next_geometry;\nstruct wlr_box geometry;\n\n...which suggests to me that the geometry struct is always present.. I went and implemented option 4. That particular commit was +71, -130. It has simplified other areas of the codebase and appears to have fixed my damage problems too.. I don't quite understand this comment. Is this still relevant after my most recent commits, and if so can you please clarify what you mean?. Can you please clarify this? The wants_floating function is called when a view is mapped so that the implementation can decide whether it's floating by default (eg. for dialogs).. I floated Firefox, then right clicked near the right side so the context menu popped up outside of the float. I can interact with the popup outside the floating area just fine. That's because layer surfaces are checked before floating_container_at and container_at are called.. I can replicate this with FileZilla. However, I can also replicate it when tiled, and I can replicate in master, and I can replicate it in master from a week ago which was prior to when I split container_at into separate functions. So this problem has been around for a while.\nI guess the solution will be to iterate the containers, check their subsurfaces first, then iterate them all again and check the toplevel surface. The same has to happen for rendering too - currently a tiled view can render over the top of its left sibling's context menu.\nMy preference is to make a separate PR for this because it's not specific to floating.. next_focus may be NULL which would make this crash.\nAlso, when sway encounters a failing sway_assert in a development build, it'll crash with the message given. When sway encounters a failing sway_assert in a release build, the sway_assert will return false and it'll continue on executing code. Which in your case would lead to a crash. This is why other places in the code use a pattern of:\nif (!sway_assert(condition, \"message\")) {\n    return;\n}. This is resolved in commit \"Don't let xwayland views set position unless unmanaged\".. With the change of swayc coordinates from output-local to layout-local, this function was no longer needed so I've deleted it.. wlroots needs to expose its atom names first. And I'm a bit confused with how this all works - wlroots lacks atom names `DIALOG` and `TOOLBAR` which are used by i3. And according to `wlr_xwayland_surface_is_unmanaged`, surfaces with atoms `SPLASH` and `UTILITY` will be unmanaged, but to match i3 these would need to be managed and floated.\n\nBTW, according to Ongy the atom values are defined at runtime, so I've removed the hard coded values from my PR. Keeping them there may cause false positives.. My preference is to move it only if there's anything else that can make use of it. So I'd leave it where it is until that happens.. I've added a similar check. To test, I launched a terminal and Firefox side by side. In the terminal I ran i3-input & sleep 5 && killall i3-input, then while the sleep was occurring I opened the settings menu of Firefox and waited. After unmapping, the Firefox menu remained open and had keyboard focus.. Do you need to free the name in the output_priority list before deleting it?. I would prefer the PR be changed to use a double/nested for loop to iterate the workspaces, rather than use container_descendants. We don't need to walk the entire tree.\nIf we weren't going to go with that suggestion then my next preference would be to copy container_descendants into a new function called container_descendants_safe and go with the list copy idea.. Ah, yep. I had a derp moment. It was 12:30am local time.. Do you know of any program that does this which I can use for testing?. Keep in mind there's going to be some significant changes once the atomic layout updates PR is completed and merged. The calls to add damage in response to layout changes will all be removed and done in a single place when the layout is applied. For that reason you might not want to try too hard to get it perfect here.. What's the reason for not actioning this todo?. Yeah, I'm open to ideas. I don't think it should be something like transaction_process though because that implies it \"processes a transaction\" when in reality it iterates the queue and processes as many as it can. I think it should be <something>_queue.\nSome ideas:\n\nadvance_queue\ncheck_queue\nhandle_queue\nprocess_queue\nprogress_queue\nrun_queue\nwork_queue\n\nYou could also also add the word transaction to the above so it's advance_transaction_queue and so on.. I renamed it to free to keep it consistent with the view_destroy and view_free functions, and container_destroy and container_free. Destroying and freeing are now two different things. Destroying basically marks it as destroying, and when it's no longer in a transaction it gets freed.\nWhen a surface wants to destroy itself, we must unregister the wayland events before returning from handle_destroy because after we return the surface is no longer valid. But we can't free the view until later, when the view is no longer in a transaction. The non-atomic code in master does the unregistering and freeing of the view all in the destroy callback, using a call stack of handle_destroy -> view_destroy -> view->destroy().\nMy branch takes a shortcut by unregistering the events in handle_destroy, and view_destroy doesn't have to dive back into the implementation at all. I could add the destroy callback back and call it from view_destroy, but it needs to be separate from the free callback. The only benefit of doing it that way is the compositor could theoretically initiate a destroy without having the view requesting it. I'm not sure if that's against the protocol though, or if we'd ever use it.. @SirCmpwn You might want to consider waiting until atomic is merged then rebasing this.. That's a good question. If the user has a popup open and presses a keybind then we should execute it (eg. screenshot), but maybe we should either reposition or close popups when we apply a transaction. I guess with subsurfaces we'd have to play on the safe side and keep them open.. Theoretically it would configure and apply the first state which is bad, but this doesn't happen in practice. To make this happen you would have to make a transaction the manual way, add the container to it, modify something in the container, then add the container again. You should always do them in the order: modify tree, add to transaction, commit transaction.. That isn't a perfect solution. Consider a situation where a view is in two transactions and skips the first configure. If we mark both instructions as ready and the first transaction applies, the second transaction might still be waiting on another view in which case we'd be rendering the view at the wrong size.\nAs it stands at the moment, if the view skips the configure then we mark its second instruction as ready but the first is still waiting. The first transaction will time out, after which both transactions will be applied. This is frame perfect, but isn't ideal because we have to wait for the timeout.\nPerhaps we need to mark the first instruction as ready, but set a property to say that the view has acked a configure beyond it (the property would be a pointer to the acked instruction). When the transaction goes to apply, if any instruction has this property then it would look ahead in the transaction queue and verify that it can process the queue up until that point before applying the transaction.\nI guess it's a tradeoff between complexity, performance and perfection.. Thinking about this more, a much more simple option would be to mark skipped instructions as ready as you suggested, but not apply any transactions at all unless the transaction queue can be completely processed.. When I put it in destroy I get memory corruption. I think they have to be removed before handle_destroy returns because the surface (or the wayland resource?) no longer exists. Remember, we don't call destroy immediately in response to a destroy event - we wait until the transaction is finished with it. I don't think destroy is an appropriate name for that function. I had previously named it _free.\nIf you're going to tell me to call destroy from handle_destroy, then I'm going to have to split the freeing part out and add a callback for free because that needs to be done after the transactions.. > if A acks 1st configure, B acks 2nd configure directly, when C is done we'll redraw B & C but not A\nWhen would you redraw A? (or more correctly, when would you apply A's state?)\nI've changed the implementation to one which waits for the entire queue to be ready before applying them. This is easier to implement than trying to group them based on dependencies, and should have the same result as long as there's 2 or less transactions in progress at the same time. And even if you have 3 transactions, you'd have to have 2 of them in separate parts of the tree before the dependency-group option has a benefit over the wait-for-full-queue option.. See the comment thread above this one.. Done.. Then it wouldn't match any instruction in the list, the transaction would time out and then the transaction would apply. I don't think there's any other option. Keep in mind this function is only used by xwayland views.. If you have a floating tabbed container, and the view being checked is the active child of the tabbed container, this will return false which is incorrect. is_floating will be true for any child of the floating container.\nI think if you change the while condition to be container->type != C_WORKSPACE && container->layout != L_FLOATING then that would solve it.. Just using else is fine because render_top_border returns if the view's border_top is 0.\nBut render_floating_container is similar and whatever change we do here should also be done there for consistency.. I'm finding the focus and prev_focus stuff in this function very hard to follow. Can we simplify this to:\n\nstruct sway_container *prev_focus - the container which was focused when the view requested to be mapped (ie. set once, never set again)\nstruct sway_container *target - the sibling where we want to attach the new container. You don't do anything with prev_ws except free it. You may as well remove this block of code.. Consider moving this to the view implementations.. Are you sure the damage isn't necessary? What if the surface becomes smaller?\n\nI think you'd need to set view->swayc->current.view_{width,height} in addition to view->{width,height}. The view properties are considered pending, and the current state is what's used for rendering.\nHowever, you might not want to write them into the current state if there are transactions pending. I would try something like:\nif (view->swayc->instructions->length) {\n    transaction_notify_view_ready_by_size(view,\n            surface_state->width, surface_state->height);\n} else if (container_is_floating(view->swayc)) {\n    view_update_size(view, surface_state->width, surface_state->height);\n}\n\n...then make view_update_size set both the the pending properties and current properties. Not sure about damage.. My preference for this is to wait and see how complicated it becomes. There's no perfect solution here. We either have to duplicate code from wlroots (like this function is doing, though it's only several lines), or use an iterator with a struct which is a roundabout way of doing things.\nWhat's interesting about programming is the code always makes sense and usually doesn't seem complicated to the author. The author understands the problem, thinks up the solution and understands how every component works together. But they don't read their code with zero prior knowledge of how it works, so it's hard to get an outsider's perspective. I imagine the iterator and rendering code makes sense to you.\nI've mentioned this in #sway already, but I've found the iterator functions difficult to follow. Some of them went two levels deep, passing the iterator through to the nested one while modifying the geo data in the user data. I've had to figure out what values are actually in geo when passed to get_surface_box. I've wondered why there's weird naming like output_view_for_each_surface (during my refactor I realised this is because view_for_each_surface is already in use). I've wondered what the sx and sy values are relative to (the direct parent or root parent) because those were calculated by wlr_surface_for_each_surface in wlroots. If I was the author of this code then it'd make sense to me, but as a non-author I found the iterators difficult to follow.\nI know some developers who strictly believe in not having any duplicated code, and inadvertently add complexity to their code to avoid it. They see this as fine because they don't see the complexity, because they're the author. I agree that duplicated code is bad, but I also consider whether the alternative adds too much complexity for an outsider to easily understand. I think it's especially important in open source projects to write readable code.\nSorry for going on a bit, but yeah, I prefer to wait and see how complicated wlr_surface_for_each_surface becomes in wlroots. It might be worth using the iterator then, but until then my preference is to leave it as is.. > Well I don't know what to do if transactions are in progress. Once the transaction is applied the view won't have the size we want (from surface_state), it'll have the size of the transaction.\nThis problem isn't specific to floating xwayland views. We ultimately rely on the client to set their size to what we configure them to. If they don't, the transaction times out and we render them incorrectly.\nIf we have a floating xwayland view in a transaction and it resizes to something other than what we tell it to, once the transaction has applied it'll resize the swayc anyway.. I meant floating, and edited my comment to say so. You saw the pre-edit version.. This is the output box in output-local coords, so it'll always be 0,0. If the surface isn't at 0,0 then the pixman_region32_contains_rectangle check will fail.. I added the assert in the public function because it seemed like a more appropriate place. Also, container_floating_translate will get called for children of floating containers once we implement that, so putting the assertion here wouldn't work anyway.. There's another char * near the top of this file. I don't really want to go changing that one too. I think if our preference is char [] then we should replace them all across all commands in one commit.. There is nothing different to do with JSON in get_config than in any other IPC command.\nLiterally every command in the swaymsg man page says it gets JSON. In most (all?) cases swaymsg converts the JSON into a human friendly string, unless -r is used. This is no different.\nThe question is whether the swaymsg docs should mention JSON in each command, when the default is to make them a human friendly string.. Question for @SirCmpwn: Would it be acceptable to break the 80 character rule for these descriptions? I think it would improve readability, and it is only text. If you're reading the code in an 80 column terminal then you're not missing out on much by having the descriptions go off-screen.. Whoops. I'll replace my commit.. Yeah, not sure why GitHub has marked this as outdated. This is still relevant; everything else looks okay to me.. I would expect the fix to be:\n} else if (strncmp(flag, \"txn-timeout=\", 12) == 0) {\n        txn_timeout_ms = atoi(&flag[12]);\n\nie. s/txn-timeout/txn-timeout=/ and replacing 11 with 12.. I copied this from container_sort_workspaces. When I tried it without the cast something weird was happening and it wasn't comparing them properly.. If anyone knows how I can replace 1 with a constant or more meaningful value, let me know.. I replaced the value - thanks.\nI'm not sure what wlr_keyboard_get_modifiers is doing, so I'll wait for someone more knowledgeable to let me know if I should use it and what the consequences are of using the struct directly.. This is implemented BTW. See commit \"Consider view's min/max sizes when resizing\".. > For views that were floating (or moved while in the scratchpad), the location is retained relative to a pseudo output.\nJust confirming, the behaviour you're describing is what the PR currently does, but it should center the container every time it's displayed?. This call to transaction_commit_dirty shouldn't be here. It's already called in dispatch_cursor_button.. Style: Add space between while and (.. Style: Blank line between each function (happens after next function too).. What happens if no keyboard is connected? Wouldn't keyboard be NULL and cause a crash?. What about case sensitivity? Shouldn't these use strcasecmp?. Nitpick: You pass button to seat_begin_resize below, so for consistency you should pass button here despite it being equal to btn_move.. That happened during rebasing. Fixed.. Calling transaction_commit_dirty here could lead to problems if there is other code that calls arrange_layers at a time when the tree is in an inconsistent state. I try to only call it directly in the handler functions to avoid this.\nAlso, there is other code in sway that calls arrange_layers followed by arrange_windows, so this would end up calling arrange_windows twice which isn't very efficient.\nTo be safe, I'd pull these out and call them from the relevant handle_* functions in this file.\nBTW, I'd like to wire transaction_commit_dirty up to the event loop so it's run automatically, but I haven't looked into that yet.. s/sway/swaynagbar/. Surely you need to destroy the cairo surface and the cairo context here, or goto the end so it can be cleaned up there?. This can be static.. I also prefer rate over step.. This file uses two spaces for indenting but these lines are using tabs. I prefer tabs, but let's change these to spaces for consistency.. Why 16 and 17?\nSway 0.15 uses the following - not sure if we need to use the same:\nIPC_EVENT_MODIFIER = ((1<<31) | 6),\nIPC_EVENT_INPUT = ((1<<31) | 7),\n\n(SHUTDOWN and TICK aren't listed in 0.15. I guess there's no events for those.). Use calloc to allocate structs.. This is being sent when a workspace is being destroyed. Shouldn't it be sent when a workspace becomes empty?. I don't think SirCmpwn noticed the 1<<31. These values are already far away from i3's.\nMy point is sway 0.15 already has (1<<31) | 6 allocated to IPC_EVENT_MODIFIER. My comment is about being compatible with sway 0.15, not with i3.. I would think that these events need to be preserved/implemented, unless there's a protocol which does their job. Ping @SirCmpwn . If I uncomment this line then I reliably get this crash on shutdown (even with no views open):\nThread 1 \"sway\" received signal SIGSEGV, Segmentation fault.\n0x00007ffff7ba75f6 in output_destroy (output=0x7ffff7ba7a53 <output_manager_send_details+58>) at ../subprojects/wlroots/types/wlr_xdg_output.c:76\n76      wl_resource_for_each_safe(resource, tmp, &output->resources) {\n(gdb) bt\n#0  0x00007ffff7ba75f6 in output_destroy (output=0x7ffff7ba7a53 <output_manager_send_details+58>) at ../subprojects/wlroots/types/wlr_xdg_output.c:76\n#1  0x00007ffff7ba7cde in wlr_xdg_output_manager_destroy (manager=0x555555976308) at ../subprojects/wlroots/types/wlr_xdg_output.c:242\n#2  0x00007ffff7ba7af8 in handle_layout_destroy (listener=0x555555976350, data=0x555555975de0) at ../subprojects/wlroots/types/wlr_xdg_output.c:203\n#3  0x00007ffff7baa13e in wlr_signal_emit_safe (signal=0x555555975e18, data=0x555555975de0) at ../subprojects/wlroots/util/signal.c:29\n#4  0x00007ffff7b97031 in wlr_output_layout_destroy (layout=0x555555975de0) at ../subprojects/wlroots/types/wlr_output_layout.c:66\n#5  0x0000555555597a6d in root_destroy () at ../sway/tree/root.c:52\n#6  0x000055555556096c in main (argc=4, argv=0x7fffffffe288) at ../sway/main.c:462\n\nAny ideas?. Hmm. I'd favour renaming the function to surface_at_view and then having it return void.. Ah, good catch.. This function can be used in several other places. My plan is to submit a PR after this one which changes these:\n\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/root.c#L88\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/workspace.c#L296\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/workspace.c#L334\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/workspace.c#L343\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/layout.c#L25\nhttps://github.com/swaywm/sway/blob/e474d87e42d625eb4e0a41a0559bbf0e4ec5ecc5/sway/tree/layout.c#L129. This comment about sticky containers appears to be copied from elsewhere and doesn't apply here.. Could we keep these two as one enum value and do the isdigit check in select_workspace? Perhaps we could eventually make workspace_by_name do the isdigit check and call workspace_by_number for us.. This comment was originally added because it was in the else block. If this code will stay here (see my other comments) then we should remove this comment and probably add a // CT_ASSIGN_WORKSPACE to the else block.. If there are no tiling containers and I'm changing focus from floating to tiled, shouldn't focus == ws be a valid thing?\n\nAlso the seat_get_focus_inactive functions shouldn't return the L_FLOATING container. If that's happening, we should find out why and fix it there.. Any suggestions? Cursordown maybe?. Yeah, it should. I'll amend it after I get some more feedback.. Your commit that I cherry picked removed the view_set_{position,size} functions. Maybe it wasn't called here at the time you made your commit.\nI'm also unsure if there's any bad consequences of removing it. Maybe we could leave it out and see. If anything does need it, we can put it back and add a comment saying which program needs it.. We have an 80 character line limit, so this line needs to be wrapped onto two. That 80 characters assumes a tab width of 4 by the way.. Yep, that's perfect.. Not quite. transaction_commit_dirty sees that the pending size matches the desired size, so it'll won't send a configure. The transaction will be applied immediately.. It is. When the transaction is applied it copies the pending state to current.. Yeah, should_configure correctly returns false, but the instruction is already added to the transaction (added in transaction_add_container). An instruction is not a configure. An instruction may or may not need to send a configure. If it helps, you could think of an instruction as a container state that needs to be applied when the transaction is ready.. Yeah, there's something wrong there. Let me mull over this.. This is ready for review again.. At this point the view won't be floating sticky yet because criteria isn't run until near the end of view_map. Using your example, I expect the following to happen:\n\nselect_workspace returns workspace 2.\nThe view is added in the tree as a tiling child of workspace 2 (but no transaction has run yet, so this doesn't appear on screen).\nThe criteria runs the floating command, which moves the view into the L_FLOATING container of workspace 2.\nThe criteria runs the sticky command, which should move the view to the currently visible workspace on that output (eg. workspace 1). It doesn't look like the sticky command is doing this.\n\nA transaction is created which makes the final state appear on screen.. Could this block of code be replaced with something like this?\nint num = atoi(data);\nint view_num = atoi(view->name);\nreturn num == view_num && num > 0;. I'm happy to roll with your current implementation.. It seems to work as expected. We damage the container (using desktop_damage_whole_container) then apply the new state to current and call it again. The damage is based off the x/y properties, and these properties are changed when gaps are applied or removed.. Why the -1? Doesn't it achieve the same thing with less code?. Looks right to me.. Note that txn_debug snuck back in after a rebase, and removing it completely is the correct behaviour. We now stall transactions (when using -Dtxn-wait) by inflating the num_waiting figure rather than avoiding calls to transaction_progress_queue.. Yes. If the container renders its own title (eg. a nested split) then the title texture needs to be recreated at the new scale when the container enters a new output.\n\n\nRemember, the plan is for root, outputs and workspaces to not be part of sway_container any more, so the outputs property won't apply to them.. If we did that then we'd have to change the border command so it either ignores the command or writes to view->saved_border if CSD is in effect. But on the other hand, at the moment the rendering code has to check the using_csd value and omit the borders if so. I'm not sure which is best.. The plan is for the output and workspace destroy functions to eventually destroy a sway_output and sway_workspace (and likewise for their create functions). So while there's some code duplication at the moment, it's only temporary.\nThe purpose behind all these refactor PRs is to move things into their proper locations so that I can demote sway_container without it being too big of a PR.. Nitpick: This doesn't need to be a pointer.. Another nitpick: You could add a break here to stop iterating the loop once you've found the direction.. Derp. Fixed by replacing the commit.. We should call seat_send_unfocus before returning. Otherwise the previous surface will retain keyboard focus. It can also render a different surface depending on whether it believes it has focus or not.. I don't think this workspace_consider_destroy is needed. If you're changing focus to NULL, no workspace is being replaced by any other workspace.. Won't there always be a new_workspace? You made it return early if there's no container.. We should probably check notify here too.. I'm pretty sure this is needed. To test, have two outputs. On the left output have workspace 1, and on the right output have workspace 2 and 3. Make workspace 2 visible and empty. Focus workspace 1 on the left output. Then focus workspace 3. This code should destroy workspace 2.. This one should be before the call to transaction_commit_dirty. cursor_send_pointer_motion could end up changing state and marking nodes as dirty, which requires a transaction to be committed afterwards.. The surface pointer is still valid here. wlroots frees it after emitting the unmap event.. Ah, I missed that. Removed now.. This condition looks wrong, but I think it's right. If you've moved the mouse over the floating container and it's given focus but hasn't raised because raise_floating is disabled, this part of the code raises it on click. Maybe add a comment explaining why this is here.. No, because workspace_consider_destroy does not free the workspace immediately. It is marked as destroying and the next transaction frees it.. Yeah, it segfaults. I should have checked that :. Should be good now.. Can you give some example config that produces the crash?. Should be resolved now.. Yes, but in your example, fullscreen would have been exited when the parent was mapped.. Amended.. You could do this without introducing a new variable:\nif (config->gaps_outer < -config->gaps_inner) {\n    config->gaps_outer = -config->gaps_inner;\n}. This comment should probably say workspace instead of container.. Not any more ;). Done.. Yep. Copied it from list.c and forgot to change that. Fixed.. Removed.. Should be good now. I had to store the currently emitted workspace in the seat struct. See my commit message for more info.. This line should be wrapped.. This line shouldn't be indented this much.. Wrap.. Deindent, and add space between `){`.. Space before bracket.. May as well initialise `x` and `y` to these values rather than setting them to zero first.. * I think you intend to use `== WARP_OUTPUT` instead of `>= WARP_CONTAINER`.\n\n\nIn the warping to output part, it should just warp to the workspace and not care about containers.\nThe warp condition exist in both statements, so it could be moved into the if (last_focus) one (err... why is this even conditional on having a last focus?).. It is possible for the seat to have no focus, or for focus to be a layer surface or xwayland unmanaged. In these cases node will be NULL which will produce a crash. You should be able to produce this by making a view unmap while the lockscreen is active.. Space between ){.. Yep, let's remove it. And by remove I mean replace it with warp.. -1 to this. Loading the app id into the class or instance fields makes it confusing to end users. I value transparency - that is: telling the user what the properties actually are - over trying to allow for a zero configuration port between i3 and sway. I would add an app_id property, set it accordingly, and let the class and instance be null. This is the approach we've taken with criteria too.. I don't have a problem with setting I3SOCK because there's no bad consequences for doing it. But putting the app id into the class and instance is a decision that we could be forced to live with for a while, can confuse and frustrate users, and will become a legacy (especially when users no longer run Xwayland).. It gets removed in seat_update_capabilities.. Ah, but we've set the caps already. I'll amend.. The brackets aren't matching. Although I'd prefer wording such as \"Scroll factor cannot be negative\".. Done. Note that we can't use sway_assert here because this is common code and it can't link to sway_terminate.. s/numbers/name. Should you force strip_workspace_numbers to false here?. Set strip_workspace_name to false here.. This whole function appears to ignore the 80 character line limit, but that doesn't mean you should do the same. I'm not fussed as to whether you wrap the other lines or not.. strtok allocates a new string, unlike strip_workspace_number which returns a pointer within the same string. As it stands there's a memory leak here.\n\nI note this is being allocated while rendering, so I think a different approach needs to be taken. We could add a new property to the swaybar_workspace struct for the renderable name (ie. stripped), then update it when we receive workspace events. Then render using that property.. Style: Space between if and (.. I don't think you want to free the target. I'll look into this later if no one has confirmed this.. Oh, right. Freeing it is fine then.. Doesn't this mean we call view_child_destroy twice now? view_child_init already sets up a listener on the surface's destroy event and calls it from the destroy handler.. Surely you didn't mean to commit this?. ipc_client_disconnect removes the item from the list, which changes the length while you're iterating it. I'm pretty sure you want the while loop with items[0] instead of items[i].. Do you mean to use i instead of 0 here?. Don't you need to subtract start from len before doing this? len is still the original length of the string.. The should_focus check needs to be done after the view has run its criteria. Otherwise, criteria might move the view to another workspace which would cause it to steal focus.. Doesn't the middle underscore need to be escaped? Also again two lines down.. Won't this still go into an unexpected state if I press or release another button during a seat operation? By another button I mean a button that isn't cursor->seat->op_button.\nHere's an example of what I think it should be:\nif (button == cursor->seat->op_button && state == WLR_BUTTON_RELEASED) {\n    ...\n}\nif (state == WLR_BUTTON_PRESSED) {\n    state_add_button(cursor, button);\n} else {\n    state_erase_button(cursor, button);\n}\nreturn;. s/remove/erase/. `seat_consider_warp_to_focus` used to live in the `focus` command code and was static, hence why `view_unmap` did its own thing. `seat_consider_warp_to_focus` was moved to the seat code and made public so that it could be used when switching workspaces. It's likely an oversight, as I wouldn't have thought that anything else could utilise this function.\n\nI note the new behaviour will allow output warping to occur when a view unmaps from an output other than the pointer's output. I don't consider that a bug; most people would consider that to be the expected behaviour.. Does that mean I should change everything from enum wlr_edges to uint32_t where it could contain AXIS_HORIZONTAL or AXIS_VERTICAL?. Done.. Fixed.. This is wrong. It should be !=, or == WLR_XDG_SURFACE_V6_ROLE_TOPLEVEL as mentioned in another comment.. The braces you added aren't needed. Otherwise LGTM.. Fixed.. It looks like ws can be null if there's a lockscreen active and the command is executed via IPC. Either way, it doesn't hurt to be explicit here.. ",
    "Ongy": "I'll give my 2ct here, mainly as wlroots consumer, and small time contributer, since I highly expect wlroots to move with sway if it does move.\nI'm personally indifferent to github. I have been until now and will be for now. I think it's one of the more fleshed out platforms, but I dislike how it centralises everything at a single company.\nI personally don't expect a microsoft takeover to change anything in the near future.\nAfaik the long term infrastructure for sway and related projects is sr.ht, which makes the current situation a bit more complicated.\nIMO sr.ht isn't ready for a big project yet. It can host, but there's missing infrastructure for public review, and public tracking of current ongoing work.\nFor this reason I'm not currently in favor of moving there.\nOn the other hand, moving to gitlab at this point will probably require another move during the next couple of years, once sr.ht is at the point where it's suitable for sway.\nSince moving projects leaves dangling pointers (i.e. old hpyerlinks) and is generally an annoying effort (migrating accounts, issues) I don't think it's a good idea to move now and then again later without a pressing need.\nI propose to continue as before, long term plan to migrate but don't do anything rash.\nShould there be any change to the platform after a buyout that reinforces reasons to leave, I'll gladly help out to do so.. On IRC we talked about the version that should go into this.\nThe ideas were date (form meson, or C macro) or git ref.\nIMO git ref is strictly supperior, since \na) a date is useful if one expects the other party to have an up to date source tree\nb) it doesn't break reproducable builds. I'm not sure if they are currently possible, but it's something I think should be considered.\nThe downside: If a build is done without git, this needs some sane fallback. (Stable version for releases?). redefining errors. Which I'm not happy about, but I'm not aware of a better way. Uff, they are just defines, so unless both headers are included it won't colide.\nOn the other hand that would make it easier to init things properly. that conflicts on the L_DEBUG etc. defines =.=. ",
    "emersion": "As a contributor who probably wouldn't have started contributing if the project was using git-send-email on an obscure mailing list, I'd like to highlight that we need contributors and that lowering the barrier to entry is important. GitHub does a good job at this - I haven't really been using GitLab but it seems good enough.\nYeah, the plan is to eventually migrate to sr.ht - but it's not ready yet.\nIn any case, I don't think we should rush into migrating right now. As @Ongy, I don't want to migrate to anything if it's to migrate again after that.. Which is one of the reasons why we don't set up a SIGCHLD handler.. We have implemented everything in master.. The NVIDIA proprietary driver still doesn't support the standard GBM interface, which is what literally everyone else uses. We don't plan to add code for NVIDIA-specific proprietary interfaces in wlroots. NVIDIA not supporting Sway is a NVIDIA bug, please report this bug to them if you care.\nPlease use Nouveau and consider supporting vendors that actually care about open-source.. Additionally, proper multi-GPU support cannot be implemented with EGLStreams because it lacks DMA-BUFs.\nFor reference, here are some more discussions about EGLStreams:\n\nhttps://lists.freedesktop.org/archives/wayland-devel/2016-March/thread.html#27547\nhttps://dri.freedesktop.org/~cbrill/dri-log/?channel=wayland&highlight_names=&date=2019-02-21#t-1155. Please check if this issue is still relevant with sway 1.0, investigate it and send a patch.. >waiting for [\u2026] fix patch\n\nInvestigate! Ask for help on IRC! Send a patch!\n\n2018.2 did not fix it for me. Bummer\n\nNow idea what \"2018.2\" refers to.. No, it's not an automated reply, it's a legitimate call for help. We don't have time to investigate all issues here, so we call for help. We try to encourage contributions. Please try to debug this, please send patches!. Does swaymsg output eDP-1 bg \\\"~/as\\ df.jpg\\\" fill work?. I also think a complete manpage would be better, just like the other manpages.. Related: https://github.com/swaywm/sway/issues/1779\nNote that you can get keyboard identifiers with swaymsg -t get_inputs.. Can reproduce again in 1.0.. Status update: please send patches to fix this.. GNOME doesn't have this issue so its unlikely. There's a preferred size alongside the min and max size for xwayland views, maybe there's something to do about it.. Well, I do think this is us.. https://github.com/swaywm/wlr-protocols/issues/20. Note that @bugaevc's solution uses a hack to get keyboard focus (which spawns a transparent window, probably resulting in flickers in Sway because it shows up as tiling). This should be fixed by the clipboard manager protocol we're working on.. wl-paste uses a hack as of now. You're encouraged to contribute to make it so there's no hack anymore instead of making the hack more hacky.. >XWAYLAND0 and XWAYLAND1 is what I get from xrandr\nDon't do that, it doesn't work.. I don't think so.\nI'm not a fan of this. It would mean wasting resources in case windows are opaque. It would make the rendering code more complicated, it's already pretty complicated.. >but I haven't found a way yet to get it into something like Chromium.\nNot sure what you mean. Middle-click pastes the primary selection.. Does it show up when you run sudo libinput debug-events?. Then there's an issue with your hardware. Maybe the middle click button is broken.. Unfortunately it's not that simple. If you change how xwayland apps are scaled, you need to change how input events are processed and how outputs are exposed.. Excellent. Can you add it to the wiki?. New link: https://git.sr.ht/%7Esircmpwn/dotfiles/tree/master/bin/wallpaper. No. wlroots doesn't use json-c.. >when a background change occurs with swaybg\nYou mean you change the background and it flashes?\nAre you sure it flashes through? Meaning you only see your background (and nothing else) for a single frame?. See https://github.com/swaywm/sway/issues/1666. Here's the colord implementation: https://github.com/wayland-project/weston/blob/42c0e14808bfd39e1a2eea34f43f0b5fe20fbb16/compositor/cms-colord.c\nWe already have support for setting gamma ramps. However I'm not sure how this would work with e.g. redshift\u2026. Recently there's been some discussions about this on the wayland-devel mailing list.\nHere is a summary: http://www.argyllcms.com/WaylandCM_v1.txt. Ow, I didn't even noticed that. I'll pay more attention to includes in the future.. Example config:\noutput WL-1 pos 10,10 transform 90 scale 2\nTry changing these at runtime.. >output_add_notify() needs to handle the case where the new output is disabled.\nThis is already the case, but this is handled in apply_output_config.. >Xwayland crashes on changes\nI don't believe this is due to invalid code. I added some code in rootston that changes the output scale on click and Xwayland doesn't crash. I think it's related to having no seat. Plus, the segfault happens in CloseInput.. What about that checkarg stuff in seat and input commands?. My bad, for some reason I was still looking at the previous diff. . >Backends can now be added or removed at runtime, which lets you do things like adding a Wayland windows as a virtual \"display\" (nested in Sway or on another compositor), or something similar with an X11 virtual display, etc.\nShould be removed. Are you testing with the Wayland backend?. I'm talking about the backend: how did you run sway? In a tty or in another compositor?. Can you reproduce with rootston?. Fixed a while ago with https://github.com/swaywm/wlroots/pull/522. Yeah, for internal laptop screens it's generally not very helpful. External screens are usually better at this (mine displays as Samsung SyncMaster HS3P505873).\nThe mode seems to be invalid though.... Yeah, I tried putting it that way because I wanted to support configuring outputs with their make/model/serial next, and using the same format for swaymsg and for the configuration file seemed like a good idea. Users would be able to copy-paste the string in their config file.\nWhat we could do:\n Hide this information when make/model/serial is empty (and remove Wayland backend's make/model)\n Always populate this information in all backends (with dummy values for X11/Wayland/headless)\n Use a fallback value (unknown)\n Display partial information (only make/model when serial is empty), but then users won't always be able to copy-paste the output name directly in the config (but when make/model/serial is missing, what's the point of not using the connector name instead?)\nWhat do you think? Any other ideas?. >Why not populate this in X11/wayland/headless backend, this would let us test \"config by make/model/serial\" more easily as well.\nYes but configuring by make/model/serial in these situations doesn't make a lot of sense. Maybe if we allow to configure per make without model/serial it could be more useful (to say something like, \"apply this configuration to all Wayland outputs\").\n\nI'd also be tempted to hide this if unset for ugly cases like my laptop but... It is set with an arbitrary string, who are we to say 0x0000 is not a valid serial? So I'd just leave it as it is for these.\n\nIt's still useful to be able to configure an output with Unknown 0x0641 0x00000000, because it's unlikely that you have two screens with the same make/model, even if the serial is unset.. Code LGTM.\nA segfault happens if you open chromium maximized, un-maximize it and close it. I believe this is related to mapped/unmapped xwayland surfaces.\n```\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff74e9870 in wlr_surface_has_buffer (surface=0x0) at ../types/wlr_surface.c:669\n669     return surface->texture && surface->texture->valid;\n(gdb) bt\n0  0x00007ffff74e9870 in wlr_surface_has_buffer (surface=0x0) at ../types/wlr_surface.c:669\n1  0x000055555556aaa1 in render_surface (surface=0x0, wlr_output=0x555555f79ed0, when=0x555555f6e4e8, lx=0, ly=0, rotation=0) at ../sway/desktop/output.c:41\n2  0x000055555556aa3f in output_frame_view (view=0x555555fa6990, data=0x555555f6e4d0) at ../sway/desktop/output.c:202\n3  0x000055555556cc48 in swayc_descendants_of_type (root=0x555555f8c2f0, type=C_VIEW, func=0x55555556a8b0 , data=0x555555f6e4d0) at ../sway/tree/container.c:22\n4  0x000055555556cc7d in swayc_descendants_of_type (root=0x555555f8a800, type=C_VIEW, func=0x55555556a8b0 , data=0x555555f6e4d0) at ../sway/tree/container.c:25\n5  0x000055555556cc7d in swayc_descendants_of_type (root=0x555555779c68 , type=C_VIEW, func=0x55555556a8b0 , data=0x555555f6e4d0) at ../sway/tree/container.c:25\n6  0x000055555556a676 in output_frame_notify (listener=0x555555f6e4f8, data=0x555555f79ed0) at ../sway/desktop/output.c:218\n7  0x00007ffff74cc74b in wl_signal_emit (signal=0x555555f79fd8, data=0x555555f79ed0) at /usr/local/include/wayland-server-core.h:468\n8  0x00007ffff74cd433 in surface_frame_callback (data=0x555555f79ed0, cb=0x555555fa63e0, time=4910576) at ../backend/wayland/output.c:23\n9  0x00007ffff62ff1c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n10 0x00007ffff62fec2a in ffi_call () at /usr/lib/libffi.so.6\n11 0x00007ffff5eeb861 in wl_closure_invoke (closure=0x555555f9bb90, flags=, target=, opcode=0, data=) at src/connection.c:936\n12 0x00007ffff5ee9f03 in dispatch_event (display=, queue=) at src/wayland-client.c:1307\n13 0x00007ffff5ee99e9 in dispatch_queue (display=, queue=) at src/wayland-client.c:1453\n14 0x00007ffff5ee99e9 in wl_display_dispatch_queue_pending (display=0x55555578ae40, queue=0x55555578af08) at src/wayland-client.c:1695\n15 0x00007ffff5ee93c2 in wl_display_dispatch_queue (display=0x55555578ae40, queue=0x55555578af08) at src/wayland-client.c:1668\n16 0x00007ffff74cbcb7 in dispatch_events (fd=4, mask=1, data=0x55555578ad10) at ../backend/wayland/backend.c:26\n17 0x00007ffff7926f32 in wl_event_loop_dispatch (loop=0x555555781f10, timeout=) at src/event-loop.c:641\n18 0x00007ffff7924f0d in wl_display_run (display=0x555555784700) at src/wayland-server.c:1245\n19 0x000055555555b810 in server_run (server=0x555555779b70 ) at ../sway/server.c:84\n20 0x000055555555ac73 in main (argc=2, argv=0x7fffffffe758) at ../sway/main.c:414\n``. Related: if the seat only contains a tablet, hide the cursor when the pen leaves the tablet.. AlsoDISPLAY` for Xwayland.. >are view coordinates in the output coordinate system or the layout coordinate system?\nLayout coordinates. You don't want to deal with overlapping outputs with a different scale when using output coordinates. You want to keep the views at the same position when dynamically changing an output's scale. Output coordinates should only be used for rendering stuff.. >had to find out that the tree returned from sway ipc always only has one focused window in it.\nYes, this is related and this is the issue discussed here. No, we haven't decided how to fix it yet. Some ideas are in the first post.. For those interested, this project aims to implement PipeWire support: https://github.com/emersion/xdg-desktop-portal-wlr. >why does X11 window need that?\nIt seems to me that popups/menus are also positioned in the global compositor space by the client - not relative to their parent like in Wayland.. Added the subproject to .gitignore.. This can be merged since https://github.com/swaywm/wlroots/pull/722 has been merged upstream.. Not implemented in sway yet (and let's not do it for now).. Rebased. 0.15.2 has been released https://github.com/swaywm/sway/releases/tag/0.15.2. Cannot reproduce anymore, likely fixed in the last 7 days.. Hum, I'm not sure how to fix this. Not specifying an ouput option means \"don't change it\".. #1752. >how to test?\nOpen views in workspaces, close all views on one workspace, switch to another one. The empty workspace should be deleted.. Please always provide a test plan!. >This sets the cursor even if the view is on an invisible workspace\nNot my bug\u2122. The current code will give seat pointer focus to these (and send surface enter/motion events).\nWill send another PR to fix it.. >This sets the cursor even if the view is on an invisible workspace\nFixed in #1669 . Eh, we're missing map/unmap listeners for xdg-shell-v6 views. Adding them now.. We never have ETAs.. Tested on DRM, works fine. Someone else: please test too!. Sending wlr_xwayland_surface_configure should fix it. This PR is ready for review.. For me mouse_warping none is the same as the default.\nEDIT: ugh\nError on line 218 'mouse_warping none': Unknown/invalid command (/home/simon/.config/sway/config). On the X11/Wayland backend with mouse_warping output and focus_follows_mouse no, clicking on the other output moves the cursor in the middle of the output. If the cursor is already on the right output, we shouldn't move it in the middle (even if focus has changed).. See cairo_font_options_set_subpixel_order. Sorry for the noise. I was using swaybar from sway 0.15.\nswaybar starts correctly if I launch it manually.. Swaybar from the wlroots branch still doesn't show up sometimes.\nSwaybar from the wlroots branch starts correctly if I launch it manually.. ```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00007f15e0b5dc44 in wl_proxy_marshal () from /usr/lib/libwayland-client.so.0\n(gdb) bt\n0  0x00007f15e0b5dc44 in wl_proxy_marshal () at /usr/lib/libwayland-client.so.0\n1  0x0000563e91d85656 in wl_surface_attach (wl_surface=0x563e93f33d50, buffer=0x563e93f97090, x=0, y=0)\nat /usr/local/include/wayland-client-protocol.h:3458\n\n2  0x0000563e91d852f5 in render_frame (bar=0x563e91f8c720 , output=0x563e93f17b20)\nat ../swaybar/render.c:267\n\n3  0x0000563e91d8293d in render_all_frames (bar=0x563e91f8c720 ) at ../swaybar/bar.c:243\n4  0x0000563e91d82ae1 in status_in (fd=5, mask=1, _bar=0x563e91f8c720 )\nat ../swaybar/bar.c:319\n\n5  0x0000563e91d837ee in event_loop_poll () at ../swaybar/event_loop.c:122\n6  0x0000563e91d829f1 in bar_run (bar=0x563e91f8c720 ) at ../swaybar/bar.c:330\n7  0x0000563e91d85095 in main (argc=3, argv=0x7fff37edc348) at ../swaybar/main.c:104\n```\nAdding keywords so that I can find this issue easily: full of shit. Can you reproduce?. Also happens when swaybar exits normally:\n2018-03-31 13:44:29 - [sway/desktop/layer_shell.c:231] Layer surface destroyed (panel)\ndate: write error: Broken pipe\ndate: write error: Broken pipe\ndate: write error: Broken pipe\ndate: write error: Broken pipe. Crashes with my config:\n\n\n```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n#0  0x00005608462d486b in render_status_block (cairo=0x56084850aaa0, config=0x5608484873e0, \n    output=0x560848490580, block=0x560848516200, x=0x7fff0b5aecd0, height=24, focused=true, edge=false)\n    at ../swaybar/render.c:104\n104     if (!block->full_text || !*block->full_text) {\n(gdb) bt\n#0  0x00005608462d486b in render_status_block (cairo=0x56084850aaa0, config=0x5608484873e0, output=0x560848490580, block=0x560848516200, x=0x7fff0b5aecd0, height=24, focused=true, edge=false)\n    at ../swaybar/render.c:104\n#1  0x00005608462d47cb in render_status_line_i3bar (cairo=0x56084850aaa0, config=0x5608484873e0, output=0x560848490580, status=0x560848489ca0, focused=true, x=0x7fff0b5aecd0, width=1024, height=24)\n    at ../swaybar/render.c:234\n#2  0x00005608462d4205 in render_status_line (cairo=0x56084850aaa0, config=0x5608484873e0, output=0x560848490580, status=0x560848489ca0, focused=true, x=0x7fff0b5aecd0, width=1024, height=24)\n    at ../swaybar/render.c:254\n#3  0x00005608462d37bf in render_to_cairo (cairo=0x56084850aaa0, bar=0x5608464dc780 , output=0x560848490580) at ../swaybar/render.c:412\n#4  0x00005608462d343f in render_frame (bar=0x5608464dc780 , output=0x560848490580)\n    at ../swaybar/render.c:437\n#5  0x00005608462cf0c3 in layer_surface_configure (data=0x560848490580, surface=0x5608484a8460, serial=91, width=1024, height=24) at ../swaybar/bar.c:44\n#6  0x00007f7b3e5811c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n#7  0x00007f7b3e580c2a in ffi_call () at /usr/lib/libffi.so.6\n#8  0x00007f7b43582ddd in wl_closure_invoke (closure=, flags=, target=, opcode=0, data=) at src/connection.c:995\n#9  0x00007f7b43581127 in dispatch_event (display=, queue=)\n    at src/wayland-client.c:1434\n#10 0x00007f7b43580bb9 in dispatch_queue (display=, queue=)\n    at src/wayland-client.c:1580\n#11 0x00007f7b43580bb9 in wl_display_dispatch_queue_pending (display=0x560848489980, queue=0x560848489a48) at src/wayland-client.c:1822\n#12 0x00007f7b43580582 in wl_display_dispatch_queue (display=0x560848489980, queue=0x560848489a48)\n    at src/wayland-client.c:1795\n#13 0x00007f7b435802ab in wl_display_roundtrip_queue (display=0x560848489980, queue=0x560848489a48)\n    at src/wayland-client.c:1245\n#14 0x00005608462d34c1 in render_frame (bar=0x5608464dc780 , output=0x560848490580)\n    at ../swaybar/render.c:449\n#15 0x00005608462cfcfd in render_all_frames (bar=0x5608464dc780 ) at ../swaybar/bar.c:243\n#16 0x00005608462cfea1 in status_in (fd=5, mask=1, _bar=0x5608464dc780 )\n    at ../swaybar/bar.c:319\n#17 0x00005608462d0bae in event_loop_poll () at ../swaybar/event_loop.c:122\n#18 0x00005608462cfdb1 in bar_run (bar=0x5608464dc780 ) at ../swaybar/bar.c:330\n#19 0x00005608462d3315 in main (argc=4, argv=0x7fff0b5af438) at ../swaybar/main.c:104\n```\n\n\n. i3status config: https://sr.ht/PHIw.config. The blocks are printed in the reverse order.\nThere's also this weird bug: when I put a space right after a FontAwesome icon, it prints an invalid 0x0020 codepoint. Any other character is fine.. That 0x0020 thing is actually this bug https://bugs.archlinux.org/task/56899. Build failed. This PR is ready for review.. One moar review plz. Fixed conflicts. Ref https://github.com/hdante/hello_wayland/issues/5. Evolution works for me. Do you have an old version of Evolution?. A weird thing happens when you:\n Open something on workspace 1\n Move it to workspace 5\n* There's nothing left on workspace 1, focus right, that deletes workspace 1\nEDIT: not your bug. Fixed in https://github.com/swaywm/sway/pull/1755. Logs?. Tried all possible combinations of output layouts and scales, still cannot reproduce.. Relevant parts of the log:\n\n\n```\n2018-04-06 08:42:51 - [sway/config/output.c:153] Set DP-1 position to 3840, 0\n2018-04-06 08:42:51 - [sway/config/output.c:182] Setting background for output 0 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:42:51 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 0 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n2018-04-06 08:42:51 - [sway/config/output.c:139] Set DP-2 mode to 1920x1080 (-1.000000 GHz)\n2018-04-06 08:42:51 - [sway/config/output.c:108] Assigning configured mode to DP-2\n2018-04-06 08:42:51 - [sway/config/output.c:153] Set DP-2 position to 0, 0\n2018-04-06 08:42:51 - [sway/config/output.c:182] Setting background for output 1 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:42:51 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 1 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n2018-04-06 08:42:51 - [sway/config/output.c:143] Set DP-3 scale to 2.000000\n2018-04-06 08:42:51 - [sway/config/output.c:153] Set DP-3 position to 1920, 0\n2018-04-06 08:42:51 - [sway/config/output.c:182] Setting background for output 2 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:42:51 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 2 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n2018-04-06 08:43:04 - [sway/config/output.c:139] Set DP-2 mode to 1920x1080 (-1.000000 GHz)\n2018-04-06 08:43:04 - [sway/config/output.c:108] Assigning configured mode to DP-2\n2018-04-06 08:43:04 - [sway/config/output.c:153] Set DP-2 position to 0, 0\n2018-04-06 08:43:04 - [sway/config/output.c:143] Set DP-3 scale to 2.000000\n2018-04-06 08:43:04 - [sway/config/output.c:153] Set DP-3 position to 1920, 0\n2018-04-06 08:43:04 - [sway/config/output.c:153] Set DP-1 position to 3840, 0\n2018-04-06 08:43:04 - [sway/config/output.c:182] Setting background for output 0 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:43:04 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 0 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n2018-04-06 08:43:04 - [sway/config/output.c:182] Setting background for output 1 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:43:04 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 1 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n2018-04-06 08:43:04 - [sway/config/output.c:182] Setting background for output 2 to /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png\n2018-04-06 08:43:04 - [sway/config/output.c:195] -> ~/sources/sway/build/swaybg/swaybg 2 /home/sircmpwn/wallpapers/__original_drawn_by_banishment__ce9fe59c8d6c765caf2f744c9694b3c5.png fill\n```\n\n\nThis seems right to me. Can you reproduce with rootston?. Bump: can you try again?. This changelog is provisional. It includes changes up to https://github.com/swaywm/sway/commit/bbfe13a24893bac6a5c41ac39115288d1d6e025f.\nMilestone: https://github.com/swaywm/sway/milestone/2\n\nSway 1.0-rc1 contains 311 changes from 32 contributors since 1.0-beta2. The release candidates are considered complete and will receive no new features, only bug fixes. Once a release candidate sees a week of testing without turning up any new bugs, it will become a stable release.\nThe recommended wlroots version to use with this sway release is XXX.\nPackage maintainers: please do not package this release.\nChanges\n\nswayidle and swaylock are now standalone projects and must be installed separately. These no longer depend on wlroots or sway's internals and can be used with other Wayland compositors.\nThe minimum required scdoc version is now 1.8.1 (for generating man pages)\nThe minimum required systemd version (for optional systemd integration) is now 239\n\nNew features\n\nAdd tray support to swaybar. Note: this is limited to the SNI protocol. The legacy Xembed protocol is not yet supported, nor is the canonical dbus menu.\nPointer constraints (necessary for locking the pointer in video games) is now supported\nAdd hide_cursor <timeout> to hide the cursor when not in use\nSupport for clipboard managers such as wl-clipboard via the data-control-v1 protocol\nTiling containers can now be stickied\ni3's fullscreen global command has been implemented\nSeat commands can now refer to seat \"-\" to affect the current seat\nAdd a new xwayland command to disable Xwayland in the config file\nAdd a new tiling_drag_threshold command\n\nImprovements\n\nswaylock: clear password buffer on Ctrl-C, submit password on Ctrl-D\nUse meson feature options for build configuration\nAllow output ids and wildcard for workspace output\nAdd option to bindsym/bindcode to suppress warning on override\nAdd relative coordinates in JSON for i3bar click events\nswaybar: handle block->urgent\nAdd fullscreen_mode to get_tree output\nAllow tiling views to be dragged by the titlebar\nChange mouse buttons to x11 map and libevdev names\nRevamp seat configs\nswaylock: Add caps lock state to indicator\nswaybar: add status_padding command\nswaybar: add status_edge_padding command\ncursor: allow mapping to all outputs\ncursor: allow scrolling tabs/stack on title border\nbind{code,sym}, seat_cmd_cursor, bar_cmd_bind, input_cmd_scroll_button: improve mouse button parsing\ninput_cmd_events: implement toggle\nget_inputs: add libinput send events mode\nExtend input <identifier> events toggle with a list of modes to toggle through\n\nBugfixes\nThis release is mostly bug fixes.\n\nVarious shell completion improvements and fixes\nFix the error result of the fullscreen command\nFix outputs that are never enabled\nKeep focus when destroying containers on non-visible workspace\nswaybar: fix seperator block width for mixed scales\nswaybar: fix cursor scale\nswaynag: damage the cursor surface on update\nTerminate swaybg in output_disable\nFix crash when scratchpad contains split containers\nSet font options when computing text width\nseat: unhide the cursor if it is warped to focus\nswaybar: fix rendering of border and background\nswaybar: obey height if given\nHandle empty $XDG_CONFIG_HOME better, without setting it\nRemove 'input' field of IPC command return json \nDisarm key repeat on reload\nResize only current and immediate siblings rather than all siblings\nHandle hidden scratchpad containers in commands\nPermit resizing hidden scratchpad containers in some cases\nDon't abort when creating layer surfaces with zero outputs. Do we want to add a \"view\" type? That would be more consistent with enum sway_container_type.. Oh, if it comes from i3, I guess it can't be helped.. Cannot reproduce on the X11 backend. Will try on DRM.\n\nEDIT: can reproduce on DRM.. This PR is ready for review.. Cannot reproduce. Might be fixed with xorg-server-xwayland 1.20.. GNOME and GTK+ are moving away from status icons, so don't expect them to move this forward. Also expect many apps to remove status icons instead of adopting a new protocol.. >Now that this is nearing feature-completion, I would very much appreciate anyone who would like to help test this out and let me know which applications don't work to see what edge cases I haven't accounted for.\nhttps://github.com/swaywm/sway/pull/3249. Note that the keyboard part of this issue could be achieved with Wayland protocols: virtual-keyboard and input-method.. About read_line_buffer: can't we just use getline from _POSIX_C_SOURCE >= 200809L?. Thanks for your support!. Thanks!. Thanks!. Thanks!. >Oh wait this needs man page updates\nThe manpage has been updated in this PR, or am I missing something?. Will be fixed with wlroots.. Are you sure you have the latest wlroots? This shouldn't happen with https://github.com/swaywm/wlroots/pull/843. Thanks!. Fullscreen isn't implemented yet.. Yeah, this is most likely because the new_surface event is emitted after the set_fullscreen request.. >@emersion Regarding the damage tracking, I'm concerned about performance. Every time a view is damaged we'd have to iterate up to the workspace to check if it contains a fullscreen view. While it would save having to rerender some parts when fullscreen, it'd be adding overhead for everything when not fullscreen.\nDamaging a view is very costly from the client side, it means drawing again and swapping buffers. Iterating from the view to the workspace is basically while (container isn't a workspace) { go up; }, which is done generally in less than 5 loop iterations. Applying damage from the view to the output is very costly: it means drawing areas that didn't change and swapping buffers. That is, not applying damage from views that are hidden is a win. Same applies to layer surfaces.\nAdditional comment: after rendering we send frame done events. We should only send frame done events to fullscreened views.\nAlso, X11 unmanaged surfaces should always be drawn if the fullscreened container contains X11 views. This is because some X11 clients don't set their popups parent to the X11 view (e.g. Chromium).. One more comment: the input code in cursor.c needs to be updated not to allow surfaces under the fullscreen view to receive input events, even if the input region of the fullscreen view doesn't cover the whole surface.. >>This causes my code to read the wrong dimensions for a fullscreen view on a rotated output.\n\nThis is addressed by getting the width/height via wlr_output_effective_resolution\n\nThe preferred way to do this is to get this info from the C_OUTPUT.. Sway segfaults with this client: https://gist.github.com/emersion/4b5aa6df269daf8e53b900eef0c11be9\nThis is because request_fullscreen can be called when the client is not yet mapped. You should ignore requests if !xdg_shell_v6_view->view.wlr_xdg_surface_v6->mapped (because they're handled by the map handler).. Fixed in #1861. Thanks!. Is this on Sway 0.15 or 1.0-alpha.1?. Yet another fact to add to this drama: strtod parses hex numbers. It means \"0x42\" is not parsed as (0, 42) but is parsed as (66, error).. Thanks!. Yeah, I'm not sure why there's an idle protocol in the first place.. >Added a simple file signaling mechanism to swaylock to be able to determine if we have an active lockscreen.\nLet's say I have sway running on tty1 and another sway running on tty2. That means I can't lock both.. >Not a good idea to do what?\nTo listen to the parent session logind DBUS API when we do not own the session.. >So you mean that this should be moved in to the logind backend?\nWhen we said \"this should be part of wlroots\", that's what we meant yes. That's the right way to do it, but that also means external clients won't be able to listen to it directly and the compositor will have to handle it.. Maybe the \"systemd is in the daemon\" part can be filed as a follow-up issue.. >Updating the idle protocol to specify whether idle inhibit is active would probably be good.\nNo need for this: just prevent the timers from being triggered while idle inhibit is active?. Oh, and feel free to come on join us on our IRC channel (#sway-devel on Freenode).. This is probably a wl-shell issue. Someone please try with mpv-git!. That's not helpful. You need to enable the Wayland backend and use mpv-git.. Oh, yeah, sorry, this was mentioned on IRC but not here. Thanks for testing!. 3 approvals for a one-line fix, I can't leave this unmerged.\nThanks!. Yeah, that's because unmanaged xwayland surfaces need to be rendered if the fullscreen view is xwayland.. >fullscreen flipping is still not synchronized (e.g. it can tear), right?\nNo, it is synchronized, it can't tear.\n\nAlso fullscreen mode doesn't yet stop the frame callback for all invisible surfaces below.\n\nIt should and used to, probably a bug.. Thanks!. Can you rebase your patch against master?. Hmm, as @SirCmpwn said, we probably don't systemd-specific stuff in the compositor. However the systemd stuff doesn't require the idle protocol and can already be done outside the compositor. So I'm still not 100% convinced by the idle protocol approach.. >since we already have the same kind of things running already in the logind code I don't see why it would be so terrible to have it in the idle code in the compositor\nThe logind code is only used with the DRM backend. If the Wayland backend is used, we don't want to react to the parent session suspend event. Plus, we don't like systemd-specific code inside the compositor.\nIt's true that with an external client the lockscreen is going to be launched multiple times (and likely fail thanks to input-inhibit). Also we'll need to add a special case for the lockscreen anyway when we'll implement security feature (we'll want to expose input-inhibit only to this client).. What happens when you launch an Xwayland app from a Wayland terminal? Logs?\nCan you provide the stack trace of the coredump?\nurxvt seems to be able to connect to Xwayland.. Are you sure you have the latest wlroots and the latest sway installed?. It really seems that your wlroots is outdated.. Rebase your branch. @snaggen Can you rebase this branch?. Thanks!. I guess w/e, this isn't a big deal anyway.. Please open a pull request.. When the password indicator is updated, yes.. Updated man pages, added mm support, renamed to map_from_region for consistency with map_to_{output,region}.. Yeah, this has been fixed.. Thanks for investigating. So removing this fixes the issue? What is the value of ev->mode? Does it work in Weston? (not sure Weston has the same behaviour). Does this one need to be fixed too? https://github.com/swaywm/sway/blob/master/swaybar/status_line.c#L99. Thanks!. I don't think this is necessary. Errors will show in the log without --verbose, so errors will show up in the journal. If there's an error, users can run sway manually to get a debug log.. >Is it possible to pipe screenshot to clipboard like it is with X server, like:\nmaim -s | xclip -selection clipboard -t image/png\nThis is not yet possible, but it's planned.\n\nConsidering how the clipboards are synchronised on wlroots, why can't you just use xclip? Perhaps a swayclip tool might be nice to have, but once 1.0 comes out, that will work by itself.\n\nNo, xclip won't work unless an xwayland window is focused. This is a security feature to prevent X11 apps from spying on your clipboard.. >I'd say its still too early to tell whether its really been phased completely out. It was the only stable protocol up to until barely December.\nIt's explicitly mentioned in the protocol that nobody should use it anymore.. >Before dropping wl_shell, its stable successor xdg_wm_base should be supported first.\nThis will be done in another PR, and I'd like to get the annoying https://github.com/swaywm/wlroots/issues/916 bug fixed first.. mpv 0.28 with Wayland support is available and xdg-shell stable support has been merged.. Rebased. Thanks!. >view_update_position() is now removed\n-1, Xwayland views can move themselves.. >Title text is still to do.\nDo we want this in this PR as well? Or is this PR not a WIP anymore?. >You were the one who changed the title to WIP\nYeah, assumed this was WIP since there was no title text.. How will we manage the common lib?. We should also migrate issues to the new repos.. Thanks!. What does \"wlroots/EGL\" mean? Is this DRM?. Thanks for looking into this! When this PR gets merged, please open a new issue for \"reenabling output still doesn't work\".. This is probably because when we disable the output, we destroy its container and we loose the reference to the wlr_output. Maybe we should keep the unmapped sway_output around, just like views?. Yes, please open a PR initializing these variables.. Updated to use a bitfield. That was a good idea @RyanDwyer . Please ask these questions on IRC, thanks!. Duplicate of #1862. It's by design. In 1.0 X11 clients will only be able to access the clipboard if a X11 window is focused.\nYou can use swaymsg to read and write the clipboard instead (not yet implemented in sway 1.0).. swaymsg -t get_clipboard IIRC. Search for \"get_clipboard\" in the source code? This is most likely a bug, and will be fixed in 1.0.. Missing the \"show it again\" part.. Mind to set cursor->image_client to NULL?. Rebase?. Prior art: https://launchpad.net/geis. Yeah, has been fixed.. Superseded by #2027. rip. We probably need to un-fullscreen when switching workspaces, and re-fullscreen when switching back.\nShould investigate how i3 does it.. Cannot reproduce with Firefox. Will try with a game.. Just tried again, cannot reproduce, yay!. Thanks!. >You can do passs github.com | swaymsg -t set_clipboard text/plain\nThe current IPC client doesn't pipe stdin to the IPC server. I could do that and on the server side read from the client FD in a blocking mode until the client hangs up. I wonder if there's a better way to do this.. Assuming you're talking about 0.15:\n\nIt doesn't let you specify the MIME type and doesn't support binary data.\n\nFrom the issue description. Update: the clipboard command has been removed, this will be dealt with in https://github.com/swaywm/wlr-protocols/issues/20. Nah, sway doesn't handle icons displayed in nautilus.. This PR is ready for review.\nWill run this branch as my daily driver for a while to try to find any bug.. Rebased, fixed HiDPI. Please test!. Another way to reproduce: open Atom, start typing, a few seconds there's a white flash and the view is no longer rendered at the correct position (y offset). Switching workspaces fixes it.. Can't reproduce this one anymore. I still have black buffers in Atom, but I can reproduce in Weston, so we probably can't do anything about it.. Thanks!. Yeah, I think it's related. I haven't tested if libinput correctly sends correct discrete events, but I hope so.. Can you submit a PR to fix it?. Ugh, yeah, are you sure you're not trying to build the master branch? It seems you're building the 0.15 branch instead.. Bump. You can do something similar to this: https://github.com/swaywm/sway/pull/1915/files#diff-819010104a02bd78a3801147b06a4d57R501. >The characters & < > ' \" needs to be escaped when using pango markup\nHere you always escape the markup, making it impossible to actually use the markup. Users should be able to set the title format to something like <b>%title</b> to make window titles bold. You should instead escape text provided by the client embedded in the markup (such as the %title variable).. Well, we don't want an app to be able to use markup in its title, so (2) is probably better.. Can you rebase your PR please?. No problem, take your time ;). Thanks!. With recent changes, here's what happening:\n\nThe blue thing is my background.\n(Reproduce by opening https://duckduckgo.com/?q=%E8%B1%9A%E3%81%AE%E7%94%9F%E5%A7%9C%E7%84%BC%E3%81%8D+&t=ffab&ia=web). Please provide a stacktrace.. Instead of grepping /sys/class/\u2026, you can grep swaymsg -t get_outputs. Oh, you can just change the bar config via IPC instead of doing this weird config file switching.. Thanks!. Thanks!. Thanks!. > It looks like xwayland (or maybe wlroots) doesn't allow multiple xwayland surfaces to be activated at the same time\nYeah this is an X11 limitation. Windows are activated by setting a property on the root window.. > It looks like xwayland (or maybe wlroots) doesn't allow multiple xwayland surfaces to be activated at the same time\nYeah this is an X11 limitation. Windows are activated by setting a property on the root window.. Thanks!. Thanks!. Since this PR changes the rendering code, please make sure all of this works with scaled and rotated outputs.. Since this PR changes the rendering code, please make sure all of this works with scaled and rotated outputs.. Can you provide a test plan for this PR?. Can you provide a test plan for this PR?. That's not how it works.\nThe client always chooses the size fo the surface because it allocates the buffers. The compositor can ask the client to pick a specific size, with the configure event. However, this is optional (the compositor can say \"I don't know it's up to you\" by sending a configure with a zero width and height), and a client who wants to update its window size must not wait for a configure event. There's no \"please compositor send me a configure event with this size\" request for the client.. That's not how it works.\nThe client always chooses the size fo the surface because it allocates the buffers. The compositor can ask the client to pick a specific size, with the configure event. However, this is optional (the compositor can say \"I don't know it's up to you\" by sending a configure with a zero width and height), and a client who wants to update its window size must not wait for a configure event. There's no \"please compositor send me a configure event with this size\" request for the client.. Be the change you seek ;). Be the change you seek ;). Superseded by https://github.com/swaywm/sway/pull/3307. Superseded by https://github.com/swaywm/sway/pull/3307. It's still using scissors for clipping, but now the clipping box is intersected with the damaged region.. It's still using scissors for clipping, but now the clipping box is intersected with the damaged region.. Will probably break again because of https://github.com/swaywm/wlroots/pull/986. >Its a bug in sway/wlroots, not mpv. mpv will resize the window and rerun the whole code to figure out what dimensions it needs to fit in, and for that it needs an xdg resize event.\nI believe this is a mpv bug. However this issue about damage tracking is still a sway bug.. >Its a bug in sway/wlroots, not mpv. mpv will resize the window and rerun the whole code to figure out what dimensions it needs to fit in, and for that it needs an xdg resize event.\nI believe this is a mpv bug. However this issue about damage tracking is still a sway bug.. Even with misbehaving clients, sway shouldn't show damage tracking artifacts.. Even with misbehaving clients, sway shouldn't show damage tracking artifacts.. I though mpv was resizing its wl_surface, but it's not, so the artifacts are actually in the client buffer, we can't do anything about it.. I though mpv was resizing its wl_surface, but it's not, so the artifacts are actually in the client buffer, we can't do anything about it.. Requires xdg-shell stable from wayland-protocols 1.14.. Requires xdg-shell stable from wayland-protocols 1.14.. Thanks!. Thanks!. Thanks!. Thanks!. Can you provide a Wayland debug log? (set WAYLAND_DEBUG=1 and launch your client). Can you provide a Wayland debug log? (set WAYLAND_DEBUG=1 and launch your client). We can't do anything if you don't provide a stack trace (you can use coredumpctl for that).. We can't do anything if you don't provide a stack trace (you can use coredumpctl for that).. Since you're on 1.0 that should be the case. Try using coredumpctl gdb and the bt command. Since you're on 1.0 that should be the case. Try using coredumpctl gdb and the bt command. Don't install from AUR. Build from source.. Don't install from AUR. Build from source.. We're not going to be able to investigate without a stack trace. Please reopen if you get one.. We're not going to be able to investigate without a stack trace. Please reopen if you get one.. Gaps are implemented in sway 0.15. The status of the wlroots implementation is here: https://github.com/swaywm/sway/issues/1390. Gaps are implemented in sway 0.15. The status of the wlroots implementation is here: https://github.com/swaywm/sway/issues/1390. Read the status issue I linked above, grep for gaps. Patches welcome!. Read the status issue I linked above, grep for gaps. Patches welcome!. Please provide a stack trace with coredumpctl. Please provide a stack trace with coredumpctl. Closing because we can't do anything without a proper stack trace. Feel free to reopen if you get one.. Closing because we can't do anything without a proper stack trace. Feel free to reopen if you get one.. Ready for another review, thanks for you patience.. Ready for another review, thanks for you patience.. An alternative would be to listen to the reparent signal on the container, and check if the output's scale has changed.\nWe should probably store the texture's scale in a field alongside the textures.. >store that in config->max_scale\nNah, we don't want to render all textures on all outputs at scale=2 when there are 3 outputs with scale=1 and one with scale=2.. Thanks!. > I picked up where he left off\nDid you start from scratch? If you didn't, please keep him as an author in the commit history.. Probably not. swaywm/wlroots#678 is rootston-specific.. Yeah, that's true. +1 for doing this.. You should be able to use https://github.com/swaywm/wlroots/pull/1011 to properly fix this PR - let me know if you want me to help with that.. Closing, there are too many conflicts and sway will continue to use wlr_log.. >Shouldn't that mean the fix should be made in wlroots?\nwlroots assumes pre-multiplied alpha for textures and colors.. Thanks!. Thanks!. Sway isn't an X11 compositor. To start it, just run sway in a tty (without startx).. What's the program you're using?\nIn Wayland, the cursor is always set by the app, so some apps might use a cursor size which is too large (e.g. all Weston clients). . These are all xwayland programs, so this seems like a bug in sway 0.15.. >I will try to combine some of the rendering parts to minimise the amount of duplicate/similar code.\nIs it possible to do that now?. Code LGTM, nice work!\nRendering looks good, but pointer input to select the stack titlebar doesn't work (works in tabbed mode).. Thanks!. Yeah, I think this is a focus_follows_mouse issue.. Thanks!. Ah, reminder that you need to send the enter and leave events whenever a surface enters or leaves an output for HiDPI support.. Please provide a stack trace. You can get one with coredumpctl, if you use systems.. Please provide a backtrace with line numbers (coredumpctl gdb and then bt full).. This stack trace isn't complete. Please build from source.\nCan't reproduce.. Damn, these <optimized out> aren't helpful at all. Can you rebuild without optimizations?. I assume this is a mistake.. Ping @lake-effect @KaNe23 @ascent12. There are still damage issues when changing gaps. The usual workflow is: damage, change something, damage - that damages both the old state and the new state, ensuring everything gets re-drawn correctly.\n. BTW, if you're stuck when trying to fix a bug, don't hesitate to come on IRC and ask for help!. I think this happens: when gaps grow, containers are correctly damaged, but then views are too big. We ask clients to reconfigure themselves with a smaller size, but we don't damage correctly borders when they update their size.. I've been trying to debug this issue, and it's now pretty clear to me it's an existing bug in output_damage_container. Since this PR doesn't introduce a new bug, I'd be okay to merge it.\n@natesymer: I'm sorry for the delay and for wasting your time. Can you rebase this PR, squash all these commits into one and fix the merge conflict?. Thanks!. Thanks!. I don't think we want to keep the current swaybg CLI interface.. Yes. Let's keep it simple and restart on config change.. >The only issue I have (which also affects master) is that the workspaces are not moved when disconnecting an output, but when reconnecting it\nNah, it's just that the bar isn't updated. If you disconnect, then switch to another workspace, the moved workspace appears on the bar.. Thanks for your review. By the way, feel free to hop in on IRC (#sway-devel on Freenode).. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Can you rebase this  branch?. Note: one other possible approach would be to render the focused container last.. >We run through the tree like normal but skip rendering any subsurfaces.\nThis won't work. We need to render subsurfaces even if the view is not focused, because some clients (e.g. alacritty, weston-subsurfaces) use subsurfaces to render things that are not popups (actual content, decorations).\nThe most simple approach would be to render all views normally, but to force the focused one to be rendered last.. >Similar to before, but it renders subsurfaces for all views, then popups for the focused view at the end.\nI don't see why popups and subsurfaces should be handled differently.. >popups only need to be rendered for the focused view\nWhy?. >if you move focus away from a view which has a popup then the popup should be closed\nBut that's unrelated to rendering\u2026 And just creates one special case for popups, instead of doing the same thing for all view children.. What if i have a non-focused floating view on top of a tiled focused view with a popup?. Yeah, I don't think that's correct. I think the popup should be rendered behind the floating view.. Maybe we should re-translate all keycodes into keysyms every time a key is pressed.. The keycodes should already be stored in wlr_keyboard. >However I'm curious about why e.g. my Mod+Shift+2 binding was working even when I was just calculating the keysyms using the single keycode? What binding did I break by using the single keycode?\nThat's because modifiers are treated differently - they are stored in a bitfield. This is due to the fact that multiple keysyms can trigger the same modifier (e.g. you have Control_L and Control_R which both trigger Ctrl).\nIn order to test this, you need to bind a keybind with more than one non-modifier key (e.g. a+b+c).. This has been fixed in a different way in #2080.\nThanks for sending a PR anyway!. Thanks!. Is it possible to refactor the output command to use config_subcommand too?. I was able to trigger an infinite loop of peek_line with this config:\n```\noutput \"WL-1\"\n```\n(An unfinished ouput block at the end of the config, with empty newlines). >Copy the texture as originally planned\nThis seems pretty hard, there's no direct way to do it. We could:\n Download the texture data and re-upload it. Very expensive. I'd advise against it.\n Render the texture to a pbuffer/FBO and use glCopyTexImage2D. A little bit better, but still expensive.\n\nHave two wlr_textures for each surface, and swap them when we want to preserve one\n\nI'd rather \"steal\" the texture from the wlr_surface and force the wlr_surface to re-create a new texture next time the client commits. I don't think this strategy works for DMA-BUFs, as the client can update its texture without making the compositor import it again?\n\nExpose the pixel data to sway so we can make a new texture from it\n\nThe pixel data is in the GPU, so it's tricky to just read it.. Texture discussion: https://github.com/swaywm/wlroots/issues/1046. >I am now waiting on a way to access the buffer after the view has unmapped (see swaywm/wlroots#1065).\nNote that this should already work with xdg-shell views.. >Okay, that one did exist before and fixed (separate PR inc), but unfortunately some more with \"transaction\" in the backtrace so leaving this one to you...\nSee https://github.com/swaywm/sway/issues/1859. Do we even need to store damage? Can we just damage all containers in the transaction when applied?. >Do we even need to store damage? Can we just damage all containers in the transaction when applied?\nMy bad. I failed to see that you've ACKed this one.. Thinking again about subsurfaces: this is tricky because right now subsurfaces will be hidden while applying a transaction. Subsurfaces are part of the view content (ie. most of the view can be subsurfaces). You can try weston-subsurfaces for instance.. After discussion on IRC, @RyanDwyer convinced me the destroy/free wording is a good idea.\n11:29 <ryan-au> Let's talk about terms like destroy and free\n11:29 <emersion> ryan-au: also wanted to say it's very cool how atomic layout simplifies damage tracking\n11:30 <emersion> ryan-au: https://github.com/swaywm/wlroots/blob/master/CONTRIBUTING.md#constructiondestruction-functions\n11:30 <ryan-au> Yeah, I think we need to extend the naming convention\n11:30 <ryan-au> I like the destroy term, and used it for transactions and even in some non-sway projects of mine\n11:31 <ryan-au> But the problem is destroying is now a two step process due to transactions\n11:31 <emersion> just find another word\n11:32 <ryan-au> The only other word that comes to mind at the moment is remove\n11:33 <emersion> finalize?\n11:33 <emersion> prepare_destroy?\n11:33 <ryan-au> Finalise can be used in the context of setting up\n11:33 <emersion> true\n11:34 <ryan-au> ok, so are you happen if I rename container_destroy to container_prepare_destroy, and container_free to container_destroy?\n11:34 <ryan-au> *happy\n11:34 <emersion> yeah, works for me\n11:34 <ryan-au> It means any time you want to destroy a container you have to call container_prepare_destroy instead of container_destroy\n11:35 <emersion> hmm\n11:35 <ryan-au> Also container_workspace_destroy would become container_workspace_prepare_destroy\n11:36 <emersion> i don't like it, but i don't like the current name either\n11:36 <emersion> neither*\n11:39 <ryan-au> If you consider the *_free function to be a component of destroying, then using the destroy+free terms makes sense\n11:40 <ryan-au> Any time you call *_destroy, there's no backing out and it'll eventually get freed\n11:40 <emersion> you have a point\n11:41 <emersion> okay, i agree with you. Follow-up issues:\n Handle subsurfaces\n Views that aren't visible shouldn't block the transaction. What program are you using?\nOn Wayland the client is in charge to implement key repeat - so some programs may have that unimplemented.. Yeah, this has been fixed.. Tested with\n```patch\ndiff --git a/sway/input/keyboard.c b/sway/input/keyboard.c\nindex 420cefa6..6f58fd20 100644\n--- a/sway/input/keyboard.c\n+++ b/sway/input/keyboard.c\n@@ -41,6 +41,14 @@ static void update_shortcut_state(struct sway_shortcut_state *state,\n                        }\n                }\n        }\n+\n+       for (size_t i = 0; i < SWAY_KEYBOARD_PRESSED_KEYS_CAP; ++i) {\n+               if (state->pressed_keys[i]) {\n+                       char buf[256];\n+                       xkb_keysym_get_name(state->pressed_keys[i], buf, 256);\n+                       wlr_log(L_DEBUG, \"is pressed: %d %s\", state->pressed_keys[i], buf);\n+               }\n+       }\n }\n/\n@@ -212,6 +220,8 @@ static void handle_keyboard_key(struct wl_listener listener, void data) {\n        bool last_key_was_a_modifier = code_modifiers != keyboard->last_modifiers;\n        keyboard->last_modifiers = code_modifiers;\n\nwlr_log(L_DEBUG, \"\");\n+\n        // Update shortcut model state\n        update_shortcut_state(&keyboard->state_keycodes, event,\n                        (uint32_t)keycode, last_key_was_a_modifier);\n```. Thanks, nice work!. Thanks!. Thanks!. Thanks!. I get these:\n\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 38 'output * bg $wallpaper fill': Invalid syntax ($wallpaper). (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 188 'client.focused $bgf $bgf $fg $bgf $bgf': Unable to parse border color (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 189 'client.focused_inactive $bga $bga $fgi $bga $bga': Unable to parse border color (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 190 'client.unfocused $bg $bg $fgu $bg $bg': Unable to parse border color (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 202 'statusline $fg': Invalid color definition $fg (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 203 'background $bg': Invalid color definition $bg (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 204 'focused_background $bgf': Invalid color definition $bgf (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 205 'focused_workspace $bgf $bgf $fg': Invalid color definition $bgf (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 206 'active_workspace $bga $bga $fg': Invalid color definition $bga (/home/simon/.config/sway/config)\n2018-06-03 23:00:05 - [sway/config.c:601] Error on line 207 'inactive_workspace $bg $bg $fgi': Invalid color definition $bg (/home/simon/.config/sway/config)\nConfig:\n```\n        set $wallpaper /home/simon/.background\n        set $wallpaper_lock /home/simon/.background-lock\n    set $bg #000000\n    set $bgf #000000\n    set $bga #000000\n    set $fg #ffffff\n    set $fgi #888888\n    set $fgu #555555\n    set $btf #000000\n\nclient.focused $bgf $bgf $fg $bgf $bgf\nclient.focused_inactive $bga $bga $fgi $bga $bga\nclient.unfocused $bg $bg $fgu $bg $bg\noutput * bg $wallpaper fill\n```. Hmm, I'm not a fan of this bool, which introduces a lot of complexity. At the same time, I'm not sure there's a simpler solution\u2026. I've tried doing this:\nswaymsg set '$term' xterm\nswaymsg exec '$$term'\nBut it's not expanding $$term. Am I doing something wrong? Can you give a few usage examples?. Thanks!. Thanks, nice work!. Thanks!. I've not seen this for a while. Will reopen if I can reproduce again.. Thanks!. Tested by @atomnuker . >but I can't seem to find any difference before and after with the wip damage debug PR.\nYeah, this only stops the rendering loop for invisible surfaces. Rejecting damage from invisible surfaces will require more work. Since swaybar isn't using frame callbacks, it continues to damage fullscreened outputs.\n\nBeen using for 3 days now, no issues to report, should be good to push?\n\nAye.. Thanks!. Thanks!. Thanks!. Thanks!. Duplicate of https://github.com/swaywm/wlroots/issues/1023. Build fails because of an outdated pacman flag.. There are more of these: https://www.irccloud.com/pastebin/A4o46E0B/\nWe might just want to disable this stupid warning.. Superseded by https://github.com/swaywm/sway/pull/2136. Thanks!. Duplicate of #22. Thanks!. Thanks!. >With this here, how much effort would it be to implement what was discussed in swaywm/wlroots#479?\nThis is related to moving workspaces around, I think it belongs to another PR.. >In what way(s) is it better suited for this than list_t?\nYou don't need to allocate a list, you don't need to search the element in the list when removing it. Basically wl_list are linked lists and list_t is an array. Here is a simple example:\n```c\nstruct sway_root {\n  struct wl_list outputs;\n};\nstruct sway_root root_container = {\u2026};\nstruct sway_output {\n  struct wl_list link;\n};\n// Initialize the list\nwl_list_init(&root_container.outputs);\n// Add an output\nstruct sway_output *output = calloc(\u2026);\nwl_list_insert(&root_container.outputs, &output->link);\n// Iterate\nstruct sway_output *output;\nwl_list_for_each(output, &root_container.outputs, link) {\n  // Do something with output\n}\n// Remove an output\nwl_list_remove(&output->link);\n``. Thanks!. Not yet implemented. Please don't report issues for sway 1.0.. I'm not sure this is the correct fix. If there's an incoming event that isn't the framedone` event, it'll still not render the updated message. Not sure if this works well with multiple outputs, too.\nWe need to wait for all surfaces to not be dirty anymore.. Sure, no problem!\nswaylock has a rendering loop. The idea is to make sure we don't render more frames than the outputs' frame rate. It works this way:\n- When swaylock's state changes, damage_state (or damage_surface) is called, marking all surfaces (there's one surface per output) as dirty (ie. needs re-rendering). It also requests a new frame from the compositor (with wl_surface_frame + wl_surface_commit). Requesting a frame means \"I have something to render, let me know when it's a good time to start rendering\".\n- The compositor sends frame events, requesting clients to render. swaylock receives it in surface_frame_handle_done, calls render_frame (which renders + commits the new buffer) and marks the surface as not dirty anymore. It also requests a new frame, so that if the surface is marked dirty, we don't have to wait before rendering (that allows to render at exactly the output's framerate instead of half of it).\nBack to the issue this PR tries to fix: normally we have an event loop (main.c line 495) so we don't need to do anything in particular for the rendering loop to work. However attempt_password blocks until the password is verified, so if we request a frame right before we won't receive the frame event from the compositor until attempt_password returns. So we need to make sure all surfaces are not dirty anymore before calling attempt_password (ie. swaylock shows \"verifying\" on all outputs). We can do this by copying the loop and breaking it when not dirty anymore:\nc\ndamage_state(state);\nwhile (wl_display_dispatch(state->display) != -1 && state->run_display) {\n    // TODO: if all surfaces are not dirty anymore, break the loop\n}\nattempt_password(\u2026);\nLet me know if something's not clear or if you have more questions.. >FWIW the inner loop shouldn't check dirty but frame_pending - when all surfaces have no frame pending left we're good to go.\nMeh. frame_pending means that we've requested a frame callback, dirty means that we need to render again - so I'd rather check dirty.. Any news about this?. >it won't start anymore\nCan you post the stack trace?. @ppascher Can you open a PR please?. Thanks!. Thanks!. Thanks!. Thanks!. How we handle output * seems pretty weird in the first place.. Don't worry about it, we're not in a hurry :). Superseded by #2318. >Just for reference, how are you compiling? I'm not able to reproduce the errors\nI'm compiling with Clang.. You're right, it has been fixed. This is because when you run output * dpms off, the output position is changed to be automatic instead of fixed. Related to #2122 - as said on IRC, we probably want a function that merges output configs, and don't change the output positioning if not specified in the config.. >not sure where the complexity @emersion refers to is\nMainly sorting things, which makes functions like state_add_key more complicated, but it's nicely done in this PR, so yeah this is a +1.. Duplicate of #2125\nNah, this isn't a wlroots bug, it's a sway bug.. >Did we decide it wasn't possible to pull this information out of wlroots?\nDepends what you mean. We could parse these in wlroots, store them in a bitfield in wlr_xwayland_surface and read them here instead. But wlroots won't always support all atoms compositors might need.. Alternatively, we could decide not to expose atoms, and require wlroots to support all atoms a compositor might need.. >Breaks Firefox downloads (clicking on links does nothing). It does work correctly for save windows though.\nCan you elaborate? The downloads popup and the download section of the library window works for me.. >Breaks Firefox downloads (clicking on links does nothing). It does work correctly for save windows though.\nSo the \"Save As\" window where you select a destination directory works, but the \"Open with\u2026 or Save\" dialog that appears before is shrunk to 0x0 (with the texture overflowing out of the border). Also happens with the \"Username, password\" dialog when using HTTP auth.. >Breaks Firefox downloads (clicking on links does nothing). It does work correctly for save windows though.\nShould be fixed now.. Ping?\nI've been using this as my daily driver for a few days.. You can do this either with the IPC (man swaymsg), or if this isn't enough with a third-party background program.. The wiki has some instructions to install sway on debian/ubuntu: https://github.com/swaywm/sway/wiki/Debian-installation-guide\nPlease use IRC if you need support. Issues are for bug reports. You're sending 250 emails each time you submit one.. >Please use IRC if you need support. Issues are for bug reports. You're sending 250 emails each time you submit one.\nhttp://webchat.freenode.net/?channels=sway&uio=d4. Duplicate of https://github.com/swaywm/sway/issues/1859. Why. Un-setting LD_LIBRARY_PATH only applies to child processes because the dynamic linker has already run by the time you unset it in main. And child processes cannot be used to create keyloggers.. Then maybe we should unset PATH too, to prevent malicious users from overriding paths to firefox, urxvt and other popular programs to keyloggers.. Hi,\nIf you want to debug, the easiest thing to do would be to start gdb sway inside of sway - there you can pause the inner sway without freezing the outer one. Note that you can debug Sway like this inside any Wayland or X11 compositor.\nIf you need to debug the DRM backend, you'll need to either use coredumps or SSH into your machine from another one.\nHope this helps! Make sure to join #sway-devel on IRC if you have more questions!. Thanks!. Note that sometimes it works properly, and sometimes it doesn't. Never got zenity to work correctly though.\nYeah, you need to float zenity (I'm using my xwayland autofloat branch right now, so I didn't have to do it manually). Also I can reproduce when the workspace isn't empty.. Was a duplicate of #2161, as I'm not running atomic yet but can't reproduce anymore.. Oh, that makes sense - this is probably a view_is_visible issue then.. >This happens for me with split layouts too.\nCannot reproduce.. Related: https://github.com/swaywm/wlroots/issues/1098\nWe probably want to make the wlroots part more robust.. Hmm, shouldn't 2 arguments be enough? (We might have input <identifier> enable|disable in the future). Hmm, argc doesn't include \"input\", are you sure it fixes the segfault?. Oh, right, sorry, I got confused.. Thanks!. Thanks!. This code double-decorates floating xdg-shell windows.. Thanks!. @frsfnrrg Thoughts?. Thanks!. Thanks!. >My understanding is that the view can create itself but choose not to map immediately.\nI don't think so.. >It must. After we send the configure, the client takes time to create the buffer, then commits or requests to be mapped when it's done.\nIt's no different than a normal resize operation. If we block when resizing, we can block when mapping.. >We can't let clients slowloris the compositor into a standstill.\nI don't understand.\n\nAlso, letting the client choose its initial size itself lets us stow that away and restore it when we float the client later.\n\nThe official way to do this is to send a 0x0 size.. >We should report this to Alacritty (and fix the bug on our end too).\nNo, it's not an Alacritty bug. We just don't support it. They're aware they're doing this.. Thanks!. For those wondering, a simple way to reproduce is:\necho getpin | pinentry-gtk-2. Thanks for debugging.\n\nwhen the compositor requests a size outside of the view's min/max size hints\n\nI haven't seen any app doing something correct when we do this. With Firefox there's a region with undefined contents (previous frames are there sometimes). We probably shouldn't request such a size in the first place (ie. clamp the size before sending configures).\nAnd yeah, ofc we should support NET_WM_STATE.. >We can't easily tell if a surface is opaque.\nWhat we could do is make swaylock set the opaque region of the surface, and make sway use this optimization only if swaylock's opaque region covers the whole output.. >What if it's not an image, but a solid color?\nThis comment as been \"marked as outdated\", but it's not.\nWe should probably check the background type, and if it's a color check if the alpha channel is 0.. >The next couple of commits remove {output_view,unmanaged,layer,drag_icons}_for_each_surface and make their callers call surface_for_each_surface directly.\nThis duplicates stuff. Also, RIP popups.\nI agree the current situation is far from being perfect, though.. It should be supported, but it's broken at the moment.\ncc @ascent12 . Thanks!. Thanks!. Doesn't fix it when the view is unmapped while fullscreen?. Thanks!. Thanks!. Updated. Nah, I think we should clip the view instead. Same goes for apps drawing shadows.\nIn alacritty the surface size is smaller than the geometry, and subsurfaces outside the main surface draw decorations (which are part of the geometry).. This won't work with transparent colors for the indicator.. Thanks!. Thanks!. Thanks!. > shall handle_display_destroy do more and we could just remove the ipc_terminate call in main?\nYeah that's probably a good idea.. Thanks!. I mean, the box check shouldn't be here in the first place.\nBut maybe you want to change how input works, adding box checks everywhere and treating popups separately.. Can you try with the default config?. Thanks!. Note: this happens on 1.0.. Duplicate of https://github.com/swaywm/sway/issues/1859. Thanks!. Thanks!. Which sway version?. I use Atom and Keybase on Sway 1.0. Sway 1.0 is not for end users, it's for developers. That means a lot of things are not yet implemented and/or broken. You can try it out, but don't expect us to help you setting it up.. Thanks!. Thanks!. Thanks!. It's being worked on, and it's not a Sway issue, it's a wlroots issue.. Duplicate of https://github.com/swaywm/sway/issues/2382. Ehh, you're right, I misunderstood it. My bad,. Updated, and also implemented focus floating|tiling.. Ah, you're right, fixed and rebased.. Thanks!. Can you rebase your PR please?. Rebased. Probably, fullscreening mpv on xwayland isn't atomic for me. >backend_destroy\nEh, that's not looking good. Do you have debug logs too?. Some logs, cc @ascent12 \n2018-07-12 23:24:34 - [sway/sway/server.c:32] Preparing Wayland server initialization\n2018-07-12 23:24:34 - [backend/session/logind.c:404] Successfully loaded logind session\n2018-07-12 23:24:34 - [backend/backend.c:128] Found 1 GPUs\n2018-07-12 23:24:34 - [backend/drm/backend.c:124] Initializing DRM backend for /dev/dri/card0 (radeon)\n2018-07-12 23:24:34 - [backend/drm/drm.c:40] Atomic modesetting unsupported, using legacy DRM interface\n2018-07-12 23:24:34 - [backend/drm/drm.c:133] Found 4 DRM CRTCs\n2018-07-12 23:24:34 - [backend/drm/drm.c:64] Found 4 DRM planes\n2018-07-12 23:24:34 - [backend/drm/drm.c:106] (0 overlay, 4 primary, 0 cursor)\n2018-07-12 23:24:34 - [render/egl.c:145] Using EGL 1.5\n2018-07-12 23:24:34 - [render/egl.c:146] Supported EGL extensions: EGL_EXT_buffer_age EGL_EXT_create_context_robustness EGL_EXT_image_dma_buf_import EGL_KHR_cl_event2 EGL_KHR_co\nnfig_attribs EGL_KHR_create_context EGL_KHR_create_context_no_error EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_colorspace EGL_KHR_gl_renderbuffer_image EGL_KHR\n_gl_texture_2D_image EGL_KHR_gl_texture_3D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusabl\ne_sync EGL_KHR_surfaceless_context EGL_EXT_pixel_format_float EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_\ndisplay \n2018-07-12 23:24:34 - [render/egl.c:147] EGL vendor: Mesa Project\n2018-07-12 23:24:34 - [render/gles2/renderer.c:493] Using OpenGL ES 3.1 Mesa 18.1.3\n2018-07-12 23:24:34 - [render/gles2/renderer.c:494] GL vendor: X.Org\n2018-07-12 23:24:34 - [render/gles2/renderer.c:495] Supported GLES2 extensions: GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_APPLE_texture_max_level GL\n_EXT_base_instance GL_EXT_blend_func_extended GL_EXT_blend_minmax GL_EXT_buffer_storage GL_EXT_clip_cull_distance GL_EXT_color_buffer_float GL_EXT_compressed_ETC1_RGB8_sub_textu\nre GL_EXT_copy_image GL_EXT_discard_framebuffer GL_EXT_draw_buffers GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_frag_depth GL_EXT_geometry_point_size GL_\nEXT_geometry_shader GL_EXT_gpu_shader5 GL_EXT_map_buffer_range GL_EXT_multi_draw_arrays GL_EXT_occlusion_query_boolean GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box \nGL_EXT_read_format_bgra GL_EXT_robustness GL_EXT_separate_shader_objects GL_EXT_shader_integer_mix GL_EXT_shader_io_blocks GL_EXT_tessellation_point_size GL_EXT_tessellation_sha\nder GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_compression_dxt1 GL_EXT_texture_cube_map_array GL_EXT_texture_filter_anisotropic GL_EXT_texture_format_BGRA8\n888 GL_EXT_texture_rg GL_EXT_texture_sRGB_decode GL_EXT_texture_type_2_10_10_10_REV GL_EXT_unpack_subimage GL_KHR_context_flush_control GL_KHR_debug GL_KHR_no_error GL_KHR_robus\nt_buffer_access_behavior GL_KHR_robustness GL_MESA_shader_integer_functions GL_NV_draw_buffers GL_NV_fbo_color_attachments GL_NV_image_formats GL_NV_read_buffer GL_NV_read_depth\n GL_NV_read_depth_stencil GL_NV_read_stencil GL_OES_EGL_image GL_OES_EGL_image_external GL_OES_EGL_image_external_essl3 GL_OES_EGL_sync GL_OES_compressed_ETC1_RGB8_texture GL_OE\nS_copy_image GL_OES_depth24 GL_OES_depth_texture GL_OES_depth_texture_cube_map GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_element_index_uint GL_OES_fbo_\nrender_mipmap GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_get_program_binary GL_OES_gpu_shader5 GL_OES_mapbuffer GL_OES_packed_depth_stencil GL_OES_primitive_boundi\nng_box GL_OES_required_internalformat GL_OES_rgb8_rgba8 GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_image_atomic GL_OES_shader_io_blocks GL_OES_shader_multisampl\ne_interpolation GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_surfaceless_context GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_3D GL_OES_texture\n_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_\nOES_texture_npot GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_OES_vertex_array_object GL_OES_vertex_half_float GL_OES_viewport_array \n2018-07-12 23:24:34 - [sway/sway/main.c:175] Linux phoenix 4.17.5-1-ARCH #1 SMP PREEMPT Sun Jul 8 17:27:31 UTC 2018 x86_64 GNU/Linux\n2018-07-12 23:24:34 - [sway/sway/main.c:147] Contents of /etc/os-release:\n2018-07-12 23:24:34 - [sway/sway/main.c:154] NAME=\"Arch Linux\"\n2018-07-12 23:24:34 - [sway/sway/main.c:154] PRETTY_NAME=\"Arch Linux\"\n2018-07-12 23:24:34 - [sway/sway/main.c:154] ID=arch\n2018-07-12 23:24:34 - [sway/sway/main.c:154] ID_LIKE=archlinux\n2018-07-12 23:24:34 - [sway/sway/main.c:154] ANSI_COLOR=\"0;36\"\n2018-07-12 23:24:34 - [sway/sway/main.c:154] HOME_URL=\"https://www.archlinux.org/\"\n2018-07-12 23:24:34 - [sway/sway/main.c:154] SUPPORT_URL=\"https://bbs.archlinux.org/\"\n2018-07-12 23:24:34 - [sway/sway/main.c:154] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\n2018-07-12 23:24:34 - [sway/sway/main.c:393] Starting sway version 1.0-alpha.3-227-gabcc2ef9 (Jul 12 2018, branch 'makepkg')\n2018-07-12 23:24:34 - [sway/sway/server.c:45] Initializing Wayland server\n\u2026\n2018-07-12 23:24:34 - [sway/sway/server.c:145] Running compositor on wayland display 'wayland-0'\n2018-07-12 23:24:34 - [backend/drm/drm.c:815] Scanning DRM connectors\n2018-07-12 23:24:34 - [backend/drm/drm.c:877] Found display 'DP-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:877] Found display 'DVI-D-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:895] 'DVI-D-1' connected\n2018-07-12 23:24:34 - [backend/drm/drm.c:897] Current CRTC: 39\n2018-07-12 23:24:34 - [backend/drm/drm.c:902] Physical size: 600x340\n2018-07-12 23:24:34 - [backend/drm/drm.c:913] Detected modes:\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   2560x1440@59951\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1200@59950\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1600x1200@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1680x1050@59883\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@75025\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@60020\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x800@59910\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1152x864@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@75029\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@60004\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@60317\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x400@70082\n2018-07-12 23:24:34 - [backend/drm/drm.c:937] Sending modesetting signal for 'DVI-D-1'\n2018-07-12 23:24:34 - [sway/sway/desktop/output.c:528] New output 0x55d1e21bea50: DVI-D-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:512] Modesetting 'DVI-D-1' with '2560x1440@59951 mHz'\n2018-07-12 23:24:34 - [backend/drm/drm.c:394] Reallocating CRTCs for output 'DVI-D-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DVI-D-1' crtc=0x55d1e1fcacf0 state=1\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DP-1' crtc=(nil) state=0\n2018-07-12 23:24:34 - [backend/drm/drm.c:325] Reallocating planes\n2018-07-12 23:24:34 - [backend/drm/drm.c:368] Assigning plane -1 -> 38 to CRTC 39\n2018-07-12 23:24:34 - [backend/drm/drm.c:531] DVI-D-1: crtc=0 ovr=-1 pri=0 cur=-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:281] Starting renderer on output 'DVI-D-1'\n2018-07-12 23:24:34 - [sway/sway/tree/output.c:46] Matched output config for DVI-D-1\n2018-07-12 23:24:34 - [sway/sway/config/output.c:148] Set DVI-D-1 mode to 2560x1440 (-1.000000 GHz)\n2018-07-12 23:24:34 - [sway/sway/config/output.c:111] Assigning configured mode to DVI-D-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:512] Modesetting 'DVI-D-1' with '2560x1440@59951 mHz'\nWarning: /sbin directory link was not blacklisted\nWarning: /usr/sbin directory link was not blacklisted\n2018-07-12 23:24:34 - [backend/drm/drm.c:394] Reallocating CRTCs for output 'DVI-D-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DVI-D-1' crtc=0x55d1e1fcacf0 state=3\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DP-1' crtc=(nil) state=0\n2018-07-12 23:24:34 - [backend/drm/drm.c:325] Reallocating planes\n2018-07-12 23:24:34 - [backend/drm/drm.c:531] DVI-D-1: crtc=0 ovr=-1 pri=0 cur=-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:281] Starting renderer on output 'DVI-D-1'\n2018-07-12 23:24:34 - [backend/drm/legacy.c:21] DVI-D-1: Failed to page flip: Device or resource busy\n2018-07-12 23:24:34 - [sway/sway/config/output.c:162] Set DVI-D-1 position to 2560, 0\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:290] Transaction 0x55d1e216d1f0 committing with 1 instructions\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:322] Transaction 0x55d1e216d1f0 has nothing to wait for\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:178] Applying transaction 0x55d1e216d1f0\n\u2026\n2018-07-12 23:24:34 - [backend/drm/drm.c:877] Found display 'VGA-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:895] 'VGA-1' connected\n2018-07-12 23:24:34 - [backend/drm/drm.c:897] Current CRTC: 41\n2018-07-12 23:24:34 - [backend/drm/drm.c:902] Physical size: 480x270\n2018-07-12 23:24:34 - [backend/drm/drm.c:913] Detected modes:\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1600x1200@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1680x1050@59954\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@75025\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@60020\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1440x900@59887\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x960@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1152x864@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@75029\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@70069\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@60004\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   832x624@74551\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@72188\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@60317\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@56250\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@72809\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@66667\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x400@70082\n2018-07-12 23:24:34 - [backend/drm/drm.c:937] Sending modesetting signal for 'VGA-1'\n2018-07-12 23:24:34 - [sway/sway/desktop/output.c:528] New output 0x55d1e21beea0: VGA-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:512] Modesetting 'VGA-1' with '1920x1080@60000 mHz'\n2018-07-12 23:24:34 - [backend/drm/drm.c:394] Reallocating CRTCs for output 'VGA-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'VGA-1' crtc=0x55d1e1fcad50 state=1\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DVI-D-1' crtc=0x55d1e1fcacf0 state=3\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DP-1' crtc=(nil) state=0\n2018-07-12 23:24:34 - [backend/drm/drm.c:325] Reallocating planes\n2018-07-12 23:24:34 - [backend/drm/drm.c:368] Assigning plane -1 -> 40 to CRTC 41\n2018-07-12 23:24:34 - [backend/drm/drm.c:531] VGA-1: crtc=1 ovr=-1 pri=1 cur=-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:281] Starting renderer on output 'VGA-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:281] Starting renderer on output 'DVI-D-1'\n2018-07-12 23:24:34 - [sway/sway/tree/output.c:46] Matched output config for VGA-1\n2018-07-12 23:24:34 - [sway/sway/config/output.c:148] Set VGA-1 mode to 1920x1080 (-1.000000 GHz)\n2018-07-12 23:24:34 - [sway/sway/config/output.c:111] Assigning configured mode to VGA-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:512] Modesetting 'VGA-1' with '1920x1080@60000 mHz'\n2018-07-12 23:24:34 - [backend/drm/drm.c:394] Reallocating CRTCs for output 'VGA-1'\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'VGA-1' crtc=0x55d1e1fcad50 state=3\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DVI-D-1' crtc=0x55d1e1fcacf0 state=3\n2018-07-12 23:24:34 - [backend/drm/drm.c:405] output 'DP-1' crtc=(nil) state=0\n2018-07-12 23:24:34 - [backend/drm/drm.c:325] Reallocating planes\n2018-07-12 23:24:34 - [backend/drm/drm.c:531] VGA-1: crtc=1 ovr=-1 pri=1 cur=-1\n2018-07-12 23:24:34 - [backend/drm/drm.c:281] Starting renderer on output 'VGA-1'\n2018-07-12 23:24:34 - [sway/sway/config/output.c:162] Set VGA-1 position to 5120, 360\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:258] Arranging output 'DVI-D-1' at 2560.000000,0.000000\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:230] Usable area for ws: 2560x1440@0,0\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:329] Removing gaps 0x55d1e21e86c0\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:351] Adding gaps: 0x55d1e21e86c0\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:239] Arranging workspace '1' at 2565.000000, 5.000000\n2018-07-12 23:24:34 - [sway/sway/tree/arrange.c:183] Arranging layout for 0x55d1e21e86c0 1 2550.000000x1430.000000+2565.000000,5.000000\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:290] Transaction 0x55d1e21f7750 committing with 4 instructions\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:322] Transaction 0x55d1e21f7750 has nothing to wait for\n2018-07-12 23:24:34 - [sway/sway/desktop/transaction.c:178] Applying transaction 0x55d1e21f7750\n\u2026\n2018-07-12 23:24:34 - [backend/drm/drm.c:877] Found display 'DP-2'\n2018-07-12 23:24:34 - [backend/drm/drm.c:895] 'DP-2' connected\n2018-07-12 23:24:34 - [backend/drm/drm.c:897] Current CRTC: 43\n2018-07-12 23:24:34 - [backend/drm/drm.c:902] Physical size: 600x340\n2018-07-12 23:24:34 - [backend/drm/drm.c:913] Detected modes:\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   2560x1440@59951\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   2048x1152@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1200@59885\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@50000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@30000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@29970\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@25000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@24000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1920x1080@23976\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1600x1200@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1680x1050@59954\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@75025\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x1024@60020\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1200x960@59987\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1152x864@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x720@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x720@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1280x720@50000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@75029\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   1024x768@60004\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   800x600@60317\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x576@50000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x480@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x480@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@75000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@60000\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   640x480@59940\n2018-07-12 23:24:34 - [backend/drm/drm.c:928]   720x400@70082\n2018-07-12 23:24:34 - [backend/drm/drm.c:937] Sending modesetting signal for 'DP-2'\n2018-07-12 23:24:34 - [sway/sway/desktop/output.c:528] New output 0x55d1e21f9ab0: DP-2\n2018-07-12 23:24:34 - [backend/drm/drm.c:512] Modesetting 'DP-2' with '2560x1440@59951 mHz'\n2018-07-12 23:24:34 - [backend/drm/drm.c:489] Failed to get DRM encoder\n2018-07-12 23:24:34 - [backend/drm/drm.c:1081] Emitting destruction signal for 'DP-2'\nswaybg: ../sway/swaybg/main.c:212: main: Assertion `state.compositor && state.layer_shell && state.output && state.shm' failed.\nswaybg: ../sway/swaybg/main.c:212: main: Assertion `state.compositor && state.layer_shell && state.output && state.shm' failed.\nxrdb: Connection reset by peer\nxrdb: Can't open display ':0'\n2018-07-12 23:24:35 - [sway/common/ipc-client.c:68] Unable to receive IPC response\nUnable to init server: Could not connect: Connection refused\nUnable to init server: Could not connect: Connection refused. >Just to be sure, does weston work properly with your setup?\n@minus7 just tried with a new card, using the amdgpu driver, and it fails with the same error. X11 and Weston work properly. We are probably missing something on the wlroots side.. How should the interface be for per-output colors/image scaling modes? Maybe -o VGA-1 -i picture.jpg -o DP-1 -c 123456?. Thanks!. Thanks!. Thanks!. Duplicate of #1862. Hmm. This function is designed to fail if the item isn't found in the list:\nc\nif (!sway_assert(i < list->length, \"Item not found in list\")) {\nThis probably indicates a deeper issue - ie. a floating container not yet inserted into container->parent->children? (see sway/input/seat.c:672). >Don't some applications do that? For example, anki opens up with a floating window first before the rest of the application opens.\nThis is unrelated. When an application opens a floating window, it creates a floating container which is added to the list of floating containers. When focus is given to the container we just move it in the list of floating containers.\nMaybe in this case the floating container isn't yet in the current list? Is the first line failing or the second line failing in seat.c?. Ah. We can probably check that the item is in the current list before trying to move it.. >So you mean just making sure that container->parent->current.children->length is greater than 0 in seat.c before doing list_move_to_end?\nNo, because you could e.g. open a floating window when there are already other floating windows, in which case the length would be > 0 but the container would still not be in the list.\nMaybe just checking if there are no transactions in progress would be enough? (container->instructions->length == 0). Can you send a PR?. The goal is to save the whole file contents in a buffer, current_config. But we only do this for the main config file, not for config files included in another config file (that's what the config->current_config == NULL check is for, it sets reading_main_config to true).\nInitializing current_config to NULL would probably be enough to fix this.. Please post the stack trace too. You can use coredumpctl gdb and then run bt full.. This looks pretty good to me. Can you update the man pages too?. >Is there any way to only have borders on floating windows?\nHmm, maybe a criteria can do it?. Cannot reproduce, but I have only one screen right now. Will test with more screens tonight. Can you reproduce on all of your screens?. Can reproduce with 2 outputs. It seems to happen when I right-click on the right-most half of the left-most of my 2 screens. It works properly on the right-most screen.. This is a TODO. We probably need an option to disable this security \"feature\".. In the future, please ask this kind of questions on IRC (#sway on Freenode).. Thanks!\nShould we have something similar for swaybg?. Works with mpv.. This is a good fix, because get_next_buffer might fail and we should handle it. However I'm not sure why it does fail in this situation\u2026. Thanks!. :+1: aside from that signature issue. >I'm not entirely certain on naming, especially with 'list_sortedset_insert , list_sortedset_find, and find_workspace_name (e.g. is extract_binding_workspace_name clearer?).\nMaybe we could have a different type for sorted lists, since we use those in quite a few places. Not sure it's worth it.. Thanks, that would be helpful!. Thanks!. Thanks!. Thanks!. Probably need to implement the fallback for clients not supporting the protocol first.. This is a wontfix. dmenu will appear on the output where you last interacted with a X11 client and we can't do anything about it. You can try using bemenu which supports Wayland.. We probably need to do this like input devices, never applying the * config directly and instead merging * with the output's config.. >Interactive resize with nautilus is awful, I think it's due to atomic update issues. Gedit is fine. Maybe if a client starts falling behind once or twice we should mark it as a known-slow client?\nWorks fine in rootston, so probably a bug somewhere in sway.\n\nIf I float any GTK3 application and try to click near the right or bottom edges, it falls through to the tiled layer. I can also move my mouse up to the top or left edges, out of bounds, and still interact with the floating window. I think the geometry isn't being factored in here.\n\n2178 . * You can drag tiled windows (open gnome-calculator, drag the titlebar, move around, release - it segfaults)\n\nDamage tracking for CSD windows is messed up - but that's a window geometry issue, so it doesn't belong to this PR (open gnome-calculator preferences, drag it around)\nXwayland's move/resize requests are ignored (wlr_xwayland_surface.request_{move,resize}): try env WAYLAND_DISPLAY= gnome-calculator and try dragging the titlebar\nI have damage issues when resizing (shrinking) mpv under xwayland\nFor some reason the cursor is not updated when I resize or move - it sticks to the arrow cursor. >I have damage issues when resizing (shrinking) mpv under xwayland\n\nCan replicate on both the DRM backend and the Wayland backend.\n\n\nFor some reason the cursor is not updated when I resize or move - it sticks to the arrow cursor\n\nSame.. Found why the cursor isn't updated: there's a if (seat->operation != OP_NONE) that returns immediately in cursor_send_pointer_motion so the \"Handle cursor image\" part is never reached when resizing/moving.. seat_begin_move and seat_begin_resize should maybe set the correct cursor?. Thanks!. Tried to debug it, it seems related to grabs.. Oh, this is interesting. It seems like it's a GTK+ bug then.\nxdg-decoration is unrelated, GTK+ doesn't support it.. All right, I've been testing this with:\n\ndmenu\nChromium (right click menu + app menu + bar menu)\nFirefox (right click menu + app menu + bar menu)\nGTK+ under xwayland\nsyncplay\nSteam (menus are unclickable but that's a different issue reproducible on master)\nVLC under xwayland\nqutebrowser under xwayland\n\nAll of these work. Please test and report any misbehaving xwayland app wrt. menus/popups/etc.. Same bug: . Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Hmm. It's probably related to focus wrapping. For instance open gnome-dictionary's preferences, then click \"add\" (this opens another floating window). When you move your cursor over the stack it switches focus.\nI'd say focus wrapping ignores floating z-index.. Thanks!. We can't really investigate without a stack trace. Please provide a stack trace with debugging symbols enabled.. Hmm, this looks good to me. Can you post debug logs?. Indeed, cannot reproduce.. Can you post the stack trace with line numbers and arguments?. Can you also post logs? Is this different from https://github.com/swaywm/sway/issues/2238 ?. Prior art: https://github.com/mupuf/libwsm (config files: https://github.com/mupuf/libwsm/tree/master/data/security/wsm/default). You can use command substitution in include directives, e.g. include `hostname`.conf.. Grepping for root->outputs in the source tree reveals workspace_prev_next_impl may have issues with zero outputs. Is workspace->output set to NULL in this case?. I think this is fixed with the noop output.. Thanks!. Thanks!. Thanks!. Also the build has failed: https://builds.sr.ht/job/5388. Ah, one last thing: you'll need to #include \"config.h\" to be able to use HAVE_* constants.. Hmm, probably yes. Patches welcome :). Thanks!. Thanks!. IIRC this has been fixed on master.\nIf not, please post a complete stack trace, read it, and send a patch to fix this issue.. Thanks!. Fixed in mpv master.. >could we create a new buffer?\nThat's already what's done. The old buffer is unreferenced (so sway has the only reference to it) and a new one gets created.. >I was recently looking into seccomp, could it be useful here? Though, it's a Linux kernel feature, so BSD users will miss out.\nNo, seccomp is useful for sandboxes, we're not a sandbox.. We don't need to do that. It's not our job.. When this is ready, I'd like a real-world example of how this can be useful, e.g. running a restricted Wayland client in a chroot.. This won't work well for users who want their service manager to manage clients (e.g. swaylock).. (Or we could just use the pointer fallback). ~~Relative pointer is still WIP. Pointer constraints need sway support (they are only in wlroots).~~\nBoth protocols are now implemented in wlroots. We just eed to add support to sway now.. send_frame_done_container_iterator is an iterator, thus has a void *data argument. It expects a struct send_frame_done_data * but I was giving a struct timespec *. This patch switches to a safer function without a void * argument.. >For sending frame done, the logic has been updated to match the rendering logic:\nThis is probably not required: while the order in which views are rendered is important, the order in which we send frame events isn't.. >In my PR I only render popups for the currently focused view, which means the frame done events should be limited to the focused view too.\nI don't think that's right. We should send frame events to all visible surfaces.. If the popup is visible at all, we should send frame events. So I don't think this PR needs to make the send_frame_done code more complicated (in fact, this PR shouldn't affect it).. Or does this PR only renders popups for the focused view? In this case we should do as you said.. Ah, sorry, I missed that (I only read the PR description, not the actual diff).. Thanks!. Thanks!. This won't work if you have only a tablet attached to the seat (and no pointer). Touch probably shouldn't require a pointer (not sure if it should be displayed when we'll implement touch fallback? - this is for later anyway).\nFollow-up issue: if you unplug all pointer devices, it should hide the cursor again. This can probably be done by always calling seat_configure_xcursor as it's done right now, but also call:\nc\nwlr_xcursor_manager_set_cursor_image(seat->cursor->xcursor_manager, NULL, seat->cursor->cursor);\nWhen there's no pointer/tablet device attached in seat_add_device and seat_remove_device (and setting the cursor back to left_ptr if there's at least one pointer/tablet device).. >the cursor does leave\nTry without opening an app. I suspect this is a client hiding the cursor when the seat looses the pointer capability. We don't have code to do so in sway.. I guess so.. Thanks!. >wlroots uses wl_event_loop_add_signal to handle SIGUSR1 from Xwayland.\nMaybe we should unregister this handler when we got the signal?\n(In any case, because of race conditions, this is a good PR to have - maybe we should document in wlroots that wlr_xwayland registers a signal handler since this is global state). Thanks!. Thanks for this series of fixes!. Thanks!. https://github.com/swaywm/sway/wiki#how-do-i-report-issues. Thanks!. Thanks!. This sounds like a Qt bug.. What does weston-info say on GNOME and KDE?. Can you try to set QT_WAYLAND_FORCE_DPI? (https://github.com/GarageGames/Qt/blob/master/qt-5/qtwayland/src/client/qwaylandscreen.cpp#L111). If you set Xft.dpi to 96 in your Xresources and load these on startup, does it work better?. Oh, right. These font issues generally happen with Xwayland, but it isn't the case here. In which case\u2026\n\nMy guess is that Gnome sets some properties to make things work as they should, and Sway doesn't.\n\nNo, with pure Wayland there isn't anything like this.. Closing this, as I don't see any sway bug in there. Let me know if I've missed anything.. Closing this, as I don't see any sway bug in there. Let me know if I've missed anything.. This is a consequence of focus-follow-mouse. You can move the floating window to reveal the smaller window underneath.\nI wonder how i3 handles this. We could maybe always forbid child windows from being hidden behind their parent.. This is a consequence of focus-follow-mouse. You can move the floating window to reveal the smaller window underneath.\nI wonder how i3 handles this. We could maybe always forbid child windows from being hidden behind their parent.. I don't think it's fixed:\n\nWe could maybe always forbid child windows from being hidden behind their parent.. I don't think it's fixed:\nWe could maybe always forbid child windows from being hidden behind their parent.. Is it using Wayland or X11?. Is it using Wayland or X11?. Then I'm afraid we can't do anything about it. It should use system notifications via the dbus API instead. Maybe Telegram can already do that?. Then I'm afraid we can't do anything about it. It should use system notifications via the dbus API instead. Maybe Telegram can already do that?. In Wayland there's no standardized way for a regular client to decide to draw a window in the corner of the screen. Clients don't know their absolute position. There are privileged protocols to do so but they shouldn't be used by regular clients like Telegram.\n\nThe proper solution is to use the dbus notification API with a notification daemon like dunst or mako. This requires Telegram to support it, if it doesn't that's a Telegram bug.. In Wayland there's no standardized way for a regular client to decide to draw a window in the corner of the screen. Clients don't know their absolute position. There are privileged protocols to do so but they shouldn't be used by regular clients like Telegram.\nThe proper solution is to use the dbus notification API with a notification daemon like dunst or mako. This requires Telegram to support it, if it doesn't that's a Telegram bug.. Thanks!. Thanks!. wlroots requires it to do a sanity check before starting the direct session. Note that it's an optional dependency.. wlroots requires it to do a sanity check before starting the direct session. Note that it's an optional dependency.. sway uses it to drop capabilities. We should make it optional, and I wonder if we should keep it at all (we could just stick to setgid). Also we're keeping CAP_SYS_PTRACE, we shouldn't do that.. sway uses it to drop capabilities. We should make it optional, and I wonder if we should keep it at all (we could just stick to setgid). Also we're keeping CAP_SYS_PTRACE, we shouldn't do that.. >Please add an option to allow for the creation of a fixed number of workspaces and to prevent deleting empty workspaces.\nNot sure we want to support this. We already have a bunch of i3 extensions though.\n\nAs someone coming from awesomeVM \n\nIf you come from awesome you might want to support the Way Cooler project.\n\nI do not know how to implement it myself\n\nhttps://drewdevault.com/2018/03/17/Hack-everything-without-fear.html. >BTW, it would be good if the cursor icon could be something like this\nYou can try col-resize and row-resize. You also have diagonal versions like nwse-resize.\nYou can try all of this by running the \"Cursors\" demo in gtk3-demo.. >BTW, it would be good if the cursor icon could be something like this\nYou can try col-resize and row-resize. You also have diagonal versions like nwse-resize.\nYou can try all of this by running the \"Cursors\" demo in gtk3-demo.. >Doesn't seem atomic?\nYeah I have this issue too. Open a bunch of tiled terminals (termite), resize them quickly with the mouse: I can see flashes of my background.. >Doesn't seem atomic?\nYeah I have this issue too. Open a bunch of tiled terminals (termite), resize them quickly with the mouse: I can see flashes of my background.. Nope, #2425 is about the order of dialogs, not popups (and I'm not sure it's a bug).. Nope, #2425 is about the order of dialogs, not popups (and I'm not sure it's a bug).. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Reminder that PID files are considered bad practice.\n\nWhen reloading config, sway spawns new swaybg process and forgets about the old one which is still running in the background.\n\nIn fact the PID is saved and the old process is killed via terminate_swaybg before a new instance is started. Is this broken for some reason?. Thanks!. >GTK closes the combobox if it receives a motion event between the press and release.\nDo you think this could/should be added in wlroots? Would something that tracks the last position and doesn't send no-op move events fix the issue?\n\nI'm starting to think we should consider making a struct for each operation and use a union in the seat struct. It would make it easier to tell which properties relate to which operations.\n\nYeah, that would be a nice enhancement.. >GTK closes the combobox if it receives a motion event between the press and release.\nDo you think this could/should be added in wlroots? Would something that tracks the last position and doesn't send no-op move events fix the issue?\n\nI'm starting to think we should consider making a struct for each operation and use a union in the seat struct. It would make it easier to tell which properties relate to which operations.\n\nYeah, that would be a nice enhancement.. >I don't understand. All move events are relevant.\nA move event from position 10,15 to 10,15 isn't relevant, or is it?. >I don't understand. All move events are relevant.\nA move event from position 10,15 to 10,15 isn't relevant, or is it?. TBH that really seems like a GTK+ bug. I don't get how a pointer motion event can close a popup.. TBH that really seems like a GTK+ bug. I don't get how a pointer motion event can close a popup.. Oh right. Click down + move + up closes the popup, whereas click down + up (no move between) leaves it open.. Oh right. Click down + move + up closes the popup, whereas click down + up (no move between) leaves it open.. I have a preference for 748c22e87a231cfd888b3bb704f789be8f55d08c, but I'm not feeling strongly about it.\nLGTM in any case. You could probably create a third-party lock screen that uses DMA-BUFs, blurs images on the GPU and then directly uses those as the background image without writing anything to disk or RAM.. > So actually I had to replace that swaygrab with grim (and maybe appropriate command line switches and it should work?\nYes.. > So actually I had to replace that swaygrab with grim (and maybe appropriate command line switches and it should work?\nYes.. Fairly weird bug:\n\nOpen Gedit\nOpen the Preferences window, it's a floating window\nResize it smaller than the minimum size, it jumps a little at some point\nEnter and leave the dialog a few times, each time it's configured it jumps and gradually moves towards the bottom-right corner of the screen\n\nMoving the window doesn't fix it.. Fairly weird bug:\n\nOpen Gedit\nOpen the Preferences window, it's a floating window\nResize it smaller than the minimum size, it jumps a little at some point\nEnter and leave the dialog a few times, each time it's configured it jumps and gradually moves towards the bottom-right corner of the screen\n\nMoving the window doesn't fix it.. https://sr.ht/WEMm.mkv. https://sr.ht/WEMm.mkv. Tried with the default config, same issue.. Tried with the default config, same issue.. Yeah, I'm okay with a follow-up issue as well.. Yeah, I'm okay with a follow-up issue as well.. https://github.com/swaywm/wlroots/pull/841. https://github.com/swaywm/wlroots/pull/841. I don't think the CLI API will change a lot.. Thanks!. Thanks!. Thanks!. Duplicate of https://github.com/swaywm/sway/issues/1859. >Replaces -Ddamage=rerender with -Dnodamage\nThis mode still uses damage. It's more like a \"binary damage mode\", \"all or nothing mode\".. Thanks!. Does this also fix https://github.com/swaywm/sway/issues/2158?. Yeah, I've suspected this to happen for quite some time. I think we draw multiple times the cursor image for some reason.. Thanks!. This has been fixed.. None of these issues are related to this one. There's already an issue for mupdf, and there's already an issue for Steam.. Thanks!. We could also just render everything in focus order.. >No we can't, because an unfocused floating view must be rendered on top of a focused tiling view.\nOf course, render each layer (tiling and floating) individually. The goal would just be to simplify a little all of this.\n\nOnly the focused view has popups. We close all popups when focus is changed.\n\nWe can probably stop treating popups separately then.\n\nHow should we handle a case where two unfocused tiling siblings both have subsurfaces which overlap the other sibling?\n\nSubsurfaces are an integral part of the surface itself and can be placed under the main surface. You can't really order subsurfaces by layers across different surfaces.\nIMHO we should just render everything in focus order (tiling then floating) and stop creating that many layers.. >That would be pretty wasteful on CPU.\nWalking the ancestors is O(ln(n)). That means rendering would be O(n . ln(n)). Even if n=100 views, this doesn't seem very wasteful. And there are probably ways to improve this performance.\nWe could start with a simpler version of an iterator that first renders unfocused containers and then the focused one, as you said. I just want to avoid layers.\n\nAlso, how would this work when it comes to multiseat and there are multiple focus stacks?\n\nIn any case, we should probably have a \"global focus stack\" that should be used for rendering. We have issues with rendering focused workspaces too.. Adding more layers makes it even less maintainable.. Oh, and I might add: rendering in focus order is how all floating compositors work (and yes, GNOME uses focus order when it tiles views). So I wouldn't call it exactly a hack.. Duplicate of https://github.com/swaywm/sway/issues/2486. Thanks!. Thanks!. Thanks!. Could you open it in rootston with WAYLAND_DEBUG=client? It could be useful to have a Wayland log.. We should probably close stdin. But stdout is inherited from rootston so it shouldn't cause issues?. Other users running xorg-xserver have issues too, so it's probably not a sway bug.. I still think rendering is inconsistent with pointer input, even if the particular issue explained above is fixed. We really need to take the input code and \"reverse it\" when writing the rendering code.. Can reproduce 100%.. Ate you using Firefox as an X11 app or as a Wayland app?. Continuing to track in https://github.com/swaywm/wlroots/issues/1595, because it's a wlroots issue, not a sway issue.. Cannot reproduce anymore.... Eh, I haven't GNOME running.. Hmm, sorry for the delay. Let's just close it for now, I'll re-open with a newer stack trace if I can reproduce.. >devel/meson\nIs there a pending patch for this one?\n\ngraphics/wayland-protocols\n\nI submitted a patch to update to 1.16 a few weeks ago. Haven't heard about it yet.\n\ndevel/epool-shim\n\nHmm, it worked a few weeks ago with the version in the ports tree. Maybe something's changed since then.\n\nx11/libinput\n\nYeah, this one just needs testing, I hope to see it merged soon.\n\nAs for being the official point-of-contact, I have really no idea how much more time would it consume compared to just patching whenever something fails on my own system, but I think I could try.\n\nIt probably means getting in touch with dependencies maintainers in case something breaks.. > There is now. Submitted a PR for 0.47.2\nNice\n\nMay I ask which FreeBSD version did you use? Also, did you try it with rootston, or something else?\n\nAh, I disabled Xwayland completely.\n\nI think I can do that, if these few days long silences/delays are acceptable.\n\nYeah, no problem with that. Work at your own pace.. Ping?. Thanks!. Alternatively we could warn about deprecated config options via logs. Maybe related to https://github.com/swaywm/sway/issues/2486. Can you try https://github.com/swaywm/wlroots/pull/1320?. https://ptpb.pw/RDz1. Ping?. Ah, yeah. I only had LVDS-1 connected and LVDS-1 disable in my config.. Duplicate of https://github.com/swaywm/sway/issues/2401. Thanks!. Thanks!. Can you rebase so the build gets green?. Thanks!. What about window role? Doesn't it need the same treatment?. Cannot reproduce this bug. Code looks good though, so I'll merge it.. Thanks!. This is a regression.\nThe title change is detected at the correct time but not applied:\n2018-09-05 09:12:20 - [sway/ipc-server.c:325] Sending window::title event. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. What video player are you using?\nmpv should already have this behaviour, and I think vlc on Wayland too.. I'd also like more control over swayidle, to e.g. be able to immediately blank the screen when locking the computer. Maybe a third-party idle daemon should be created if these features are too much for swayidle.. >Can't you just run swaylock and turn on DPMS with the same keyboard combination?\nNah, because I want the screen to be turned on again when I move my cursor/type on my keyboard to unlock.. Related to https://github.com/swaywm/sway/issues/3070. This is handled by libxkbcommon IIRC, so probably not.. Closing because it's a 0.15 issue.. >Read the article i said that i used 9999 version which is using the latest git at the time..\nNo, 9999 still builds the 0.15 branch, not the master branch.\n\nBased on sway github issues most of issues is ignored by the sway developers\n\nWe don't have time to afford investigating all issues. I already spend most of my free time working on Sway and other open-source projects, and it's the case of many contributors too. Keep in mind that sway is not a product, it's a collaborative project, so don't expect commercial support.\nYou can help us by sending pull requests instead of opening issues. If you really can't investigate your issue, you can always support @SirCmpwn on Patreon.\n\nI'm not sure if i want to contribute to seemingly abadonware..\n\nI wouldn't call a project abandonware when 41 pull requests have been merged since last week.. PID is not always reliable, because it's racy and on Xwayland it's provided by the client. It's also not available on BSDs. But yeah, this solution could be better anyway.. Note that we don't need to wait for the view to map for Wayland clients, we can just get the connection credentials.. >PID is not always reliable, because it's racy and on Xwayland it's provided by the client. It's also not available on BSDs. But yeah, this solution could be better anyway.\nI want to correct myself:\n\nFor this use-case PIDs are reliable\nWe don't need to support Xwayland\nIt's available on OpenBSD, but I don't think it's available on FreeBSD\n\nHowever:\n\nIt requires procfs\nDoesn't work well when the client uses an interpreter like Python. I still don't find anything for FreeBSD. SO_PEERCRED is supported but doesn't include the PID. See https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=215202\n\nSide note: it may be possible to ptrace an executable that has privileges? Using WAYLAND_SOCKET instead doesn't fix this issue. See https://lists.freebsd.org/pipermail/freebsd-current/2017-July/066541.html. Yeah, groups could be used, but fine-grained control of security features is annoying. You cannot do one group per Wayland protocol you need to lock down because some clients might need multiple privileged protocols. So you need one group per client, with a security file that defines which group can have access to which protocols.\nYet another idea would be to use per-client tokens. This only works if each client has a safe place to store tokens so that they cannot be read by other clients (e.g. containers).. Thanks!. We generally don't do the former (e.g. we don't use GNU-specific functions with a fallback). Why is the FreeBSD symbol visible? Don't you need to define _BSD_VISIBLE to use it?. Hmm, isn't there a way to disable __BSD_VISIBLE without defining __POSIX_C_SOURCE? This could be done either in Meson or in stringop.h.. Thanks for looking into this. Defining _POSIX_C_SOURCE in files that include stringop.h has the downside of not failing on Linux (when it fails on FreeBSD), so it's not a perfect solution either.\nIn the end I'm fine with either renaming or defining _POSIX_C_SOURCE.. >What could cause a scenario where a FreeBSD build fails and a Linux build succeeds while using _POSIX_C_SOURCE?\nUse strcasestr in a file it wasn't used before. Minor bug: with a split layout with two views, dragging the left container on the center of the right one works (ie. switches views), but the other way around doesn't (is a no-op).. Thanks!. Should be fixed by https://github.com/swaywm/wlroots/pull/1237/files#diff-8b05a774317ee8e87d51422170f82d4bR1199. Closing because this is a 0.15 bug. Please reopen if you can reproduce on 1.0.. Thanks!. Thanks!. ~ isn't expanded by the shell if it's quoted. If ~/\"asdf(1).jpg\" works, \"/home/user/asdf(1).jpg\" should work too.. Thanks!. Maybe it would make sense to rename the function to include \"tiling\"?. Thanks!. Closing because this is a 0.15 bug. Please re-open if you can reproduce on sway 1.0.. Thanks!. >The problem is, you cannot really use nouveau for games.\nhttps://drewdevault.com/2017/10/26/Fuck-you-nvidia.html. Weird, the error message is \"Unable to create backend\" (not \"backendevice\").\nCan you please give use the full debug logs?. Please redirect the output to a file.\nsway -d >sway.log 2>&1. Can you describe what you do, and what happens?\nDo you have a stack trace?\ncoredumpctl gdb\nbt full. Sorry, I meant stack trace, not debug log. Please answer my other questions.. It seems you're auto-starting Firefox in your config file. What you uploaded is a Firefox stack trace.\nCan you try to get a sway stack trace? You should:\n\nList all available coredumps with coredumpctl -r\nFind the latest one from sway. Read its PID.\nGet the stack trace: coredumpctl gdb <pid> and then bt full. Eh, that's pretty weird. Can you upload your config file so we can try to reproduce? Can you temporarily comment out firefox (and other auto-started programs) to see if that's the issue?. Fixed by https://github.com/swaywm/sway/pull/2666. If sway crashes, please provide a sway stack trace (coredumpctl gdb sway).. Ping. I think it's a damage issue. Dragging the dialog updates its content.\n\nThis is not X11-specific, it happens with GTK3 dialogs too.. Thanks!. (Checked the wlroots code, and we indeed check if the output is still connected before sending a frame event). Oh, right. Should be fixed now.. >If I set swaybar to show on an output, unplug that output, and plug it back in, swaybar does not show on the output until I reload the config\nI couldn't reproduce this at first, because it doesn't happen with the Wayland backend. However it does happen with the DRM backend. The bug was a lack of wl_display_flush in the event loop.\nThis was the source of numerous bugs, from hotplug events not being\nreceived to segfaults because wl_display_roundtrip was making the\nbar process unplug events while blocking in an iteration over all\noutputs.\nThe last commit fixes that.. Please include the stack trace.\ncoredumpctl gdb sway\nbt full. Duplicate of https://github.com/swaywm/sway/issues/2648. >Ah, yeah. The actual patch I was using had an extra line setting subpixel order to CAIRO_SUBPIXEL_ORDER_RGB, since that's what my monitors use.\nPlease extract this piece of information from wl_output::geometry.. Thanks!. Thanks!. Thanks!. I can reproduce.. Thanks!. The fix is to listen to frame events on the surface to prevent rendering more buffers than necessary.. Thanks!. Thanks!. I think GTK+ honors the server preference but doesn't support dynamically changing the decoration mode. Also note that with the KDE protocol the client decides the mode anyway.\nI'd advise implementing xdg-decoration instead (you can test it with winit or Qt master, there's also a wlroots example and I think GLFW support is in progress). It works differently so it will require some thought to glue it with the current KDE protocol implementation.. Thanks!. Thanks!. What's your graphics card?. I can confirm it doesn't work anymore on my Intel graphics card.\n@SirCmpwn, I think using the legacy interface for changing gamma tables while using the atomic interface for everything else is breaking redshift on Intel.. Scratch that, it does work but since redshift exits it resets the gamma tables. @minus7, maybe we could block when users use -O?\n@sydneymeyer, can you confirm it works if you specify a location, like redshift -v -l 48:48 -m wayland?. Can you try wlroots' gamma control example instead of redshift: https://github.com/swaywm/wlroots/blob/master/examples/gamma-control.c\nCan you try wlroots with this branch: https://github.com/emersion/wlroots/tree/intel-gamma. Yeah, it should either error out or work, but it shouldn't silently fail.. Anyone could git bisect this?. >Thought from people using AMD cards & redshift?\nYeah, we would need a new temporary WLR_DRM_NO_ATOMIC_GAMMA env variable as a workaround for AMD users.. Does it work with WLR_DRM_NO_ATOMIC?. Does it work if you use the AMDGPU driver with DC enabled? (Without any env variables). Can you run https://github.com/ascent12/drm_info and paste the output here?. Hmm. GAMMA_LUT properties are in there. Maybe DRM_MODE_ATOMIC_TEST_ONLY doesn't apply them, but it works for plane positions, so I'm not sure. I don't have a card with GAMMA_LUT props, so I can't really try things out.. >both redshift and wlroots gamma-control are supposed to make changes only after reload?\nNo.. Intel doesn't expose the atomic property for gamma LUT. So it's just falling back to legacy.. Thanks!. >I wonder if we should make XDG windows tiled on all four sides if they're floating with a server-side border\nIf we do, we should only do so if server-decoration says the window is using CSD and xdg-decoration isn't supported.. Are there pointer config options not supported by tablets? Are there additional tablet config options not supported by pointers?. >This seems to be the same as #1214.\nNo, this one is different, because swaylock is laggy. I have been able to reproduce only once (and I suspend my laptop quite often).\n\nThe developers closed that issue because it was not a priority.\n\nThis is false, the OP closed the issue.. >This is a regression, and a pretty big one at that.\nThis isn't particularly helpful. Please try to point out which commit caused the regression (you can try git bisect). Please debug what happens, since you're able to reproduce. Please send patches to fix the issue.. Ah, and just as a reminder: alpha builds will contain bugs and will break, that's expected. If you're not prepared to face big regressions, don't use it. From the release notes:\n\nYou are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.. Can you try attaching GDB (or running swyalock inside GDB, really) to find out? Running env WAYLAND_DEBUG=1 swaylock might prove helpful. If that doesn't work, maybe using perf could give us a hint.. It's not yet implemented.. Thanks!. >makes sway crash (without core dump)\n\nEh. It's probably because it's got the suid bit set. Can you try installing elogind, unsetting the suid bit on the sway binary and try again?\nYou could also probably start sway, connect to your system with SSH, attaching GDB to the sway session via SSH, undock it and get the backtrace via the SSH connection.. >#2337 might actually fix this?\nUnlikely. This issue is kind of weird, because what happens is basically:\n\nWe request a pageflip\nYou unplug the output\n???\nWe get a pageflip event for the unplugged output\n\nIt seems that the wlr_drm_connector gets free'd (or at least has invalid data) by the time we get the pageflip event. It's weird because even if you disconnect an output we keep the wlr_drm_connector around. Maybe it's because the connector goes away (it's not just disconnected), but in this case this should probably cancel the pageflip? I'm confused.. Can you try https://github.com/swaywm/wlroots/pull/1268 and say if it fixes your issue?. Can you run it with valgrind and paste the logs here?. It's weird because the stack trace (https://pastebin.com/Yq30MLGh) doesn't match with the Valgrind one (https://pastebin.com/Ew6xWpQv).\nCan you try again to get a stack trace via coredumpctl gdb, and run bt full?. >I can reliably get sway to crash everytime when unplugging from dock, even with #2337.\nYou probably mean swaywm/wlroots#1268?\nPlease always include a debug log and a stack trace. It doesn't help a lot to know that \"it crashes\".. Duplicate of https://github.com/swaywm/sway/issues/2659. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Note: it seems that we don't have a sway-security(7) manpage anymore.\nEh, just noticed this has been brought up on IRC.. Thanks!. Can you edit the wiki? I think it means to say app-idinstead of id.. The stack trace is within sway, so it's unlikely the issue is about wlroots. It seems that the focus stack gets corrupted somehow? I think this is related to #2714.. Can you provide a backtrace? (coredumpctl gdb sway and then bt full). Thanks!. Hmm, maybe related to the new SSD code.\nCan you attach a stack trace too? (coredumpctl gdb sway and then bt full). It's not the right stack trace, you probably have multiple. You can list them with coredumpctl -r and then run GDB on a specific one with coredumpctl gdb <pid>.\nAlso please run bt full in GDB.. Eh, not really. Can you try running sway in GDB in sway (aka gdb sway in a sway session), then make it crash?. Thanks. Seems like https://github.com/swaywm/sway/pull/2759 is a fix.. Thanks!. Thanks!. Thanks!. >The whole argument has been removed from damage_surface_iterator because it was never used\nWhat happens if you map a view with popups/subsurfaces outside the window geometry?. >therefore calling damage_surface_iterator with each surface\nI mean, it should damage the whole surfaces, it shouldn't take the damage from the surfaces. So we need whole.. Thanks!. It seems you're not redirecting the logs to a file. Please use:\nsway -d >sway.log 2>&1. Hmm, so:\n\nYou don't have a cursor plane (but I think we fake it in this case)\neglCreateContext fails\n\nHave you tried Weston or kmscube?. It seems we can't find any appropriate EGL config. It would help to list all available EGL configs. Not sure there's a tool to do so.. >Happens with i3 also\nIf it happens on i3 as well, we can't really do anything about it. Thanks!. Can you upload a log of kitty with WAYLAND_DEBUG=1 set?. This seems like a Kitty (or GLFW) issue. When a client isn't visible (e.g. hidden because on another workspace) we don't send wl_surface.frame events (to prevent it from rendering frames that won't be displayed). However this seems to stall Kitty completely. Clients not receiving wl_syrface.frame events should stop rendering but should continue to process other Wayland events (like requests to send the clipboard data).\nOn the sending side:\n[1196800.577] wl_data_source@29.send(\"text/plain;charset=utf-8\", fd 13)\n[278 19:03:24.774997] [glfw error 65544]: Wayland: Could not copy writing to destination fd failed with error: Broken pipe\nOn the receiving side:\n[1191389.160]  -> wl_data_offer@4278190080.receive(\"text/plain;charset=utf-8\", fd 15)\n[278 19:03:21.365602] [glfw error 65544]: Wayland: Failed to read clipboard data from pipe (timed out). IIRC eglSwapBuffer manages frame events \"for you\" when you don't have eglSwapInterval(0).. I think there's some confusion here.\n\nLooking at the kitty code, kitty does not render windows that are marked as invisible.\n\nWayland doesn't have a way to \"mark windows as invisible\". Windows not visible have nothing different from visible ones, except they may not receive frame events.\n\nSo presumably weston simply allows clients to swap buffers at their discretion, leaving it up to the client to decide when to stop rendering, instead of trying to force the client to not swap buffers.\n\nThe compositor cannot prevent clients from swapping buffers. However as @martinetd said, if you don't eglSwapInterval(0) then eglSwapBuffers will block until the next frame event. This is a compatibility shim to allow clients not aware of frame events to work on Wayland too (preventing e.g. busy loops). This is the client decision to keep this behavior or don't block with eglSwapBuffers.\n\nSeems to me the correct fix is for sway to do the same.\n\nWeston probably just sends frame events to all windows even if they're invisible. That means that e.g. if you have a video player in a hidden workspace then it will continue to render frames even if none of them will be displayed. Thus for frame events Weston cannot be used as a reference. The fact that Weston always sends frame events is a Weston-specific behavior, and not doing it is (1) not violating the spec and (2) actually a lot better.\nWe will not send frame events to hidden clients. Instead, clients should properly:\n\nUse frame events to know when they should render\nContinue to process other events even when frame events don't come in\n\nIn order to do so, I suggest:\n\nYou always use eglSwapInterval(0) on Wayland\nWhen you want to render, you request a frame event\nWhen you receive a frame event, you render + eglSwapBuffers (which doesn't block)\n\nBy doing so, other events (such as clipboard) should properly be handled.. >Practically speaking, that is never going to happen, since most toolkits aren't designed that way, and even the reference Wayland compositor is not designed that way, since it sends frames even for hidden windows.\nNote that GTK, Qt, Weston clients, mpv, sway clients and many other clients handle this properly. The reference compositor isn't optimized, but this could be fixed.\nIt's indeed more difficult for cross-platform toolkits that weren't designed this way.. >I could probably use some heuristic hack\nIs there a reason why you can't implement frame callbacks properly?. You need to update your wlroots build.. We could also consider:\n\nEnsure that the password buffer isn't written to corefiles\nEnsure that the password buffer isn't swapped on disk\n\nSee https://wiki.sei.cmu.edu/confluence/display/c/MEM06-C.+Ensure+that+sensitive+data+is+not+written+out+to+disk. Thanks!. Oh, yeah probably. Can you confirm?. >Pointer isn't getting bound on start-up\nWhat do you mean? Works for me on DRM and Wayland.. I don't get it. seat_handle_capabilities isn't called \"for a non-pointer\". The capabilities event is sent whenever the seat changes its capabilities, e.g. when a pointer (mouse, touchpad) is connected or disconnected. If the seat still has the \"pointer\" capability, the wl_pointer will get re-created right away.. Yeah, multiseat isn't handled by swaybar, since we use a global bar->pointer.pointer. We should use a per-seat state instead. This is a separate issue though.. Thanks!. #2816 only happens if you have plugged in more outputs than your GPU supports.\nLogs?. Use criteria.. You should send a PR for i3ipc-python to connect to sway if i3 isn't running.. There should be a way to change status_command to be NULL in the config. Maybe status_command -?. I mean, there should be a way to change it via swaymsg. This is related to https://github.com/swaywm/sway/issues/2790. Can you open a pull request to fix this?. Thanks!. Thanks!. Can you provide a stack trace for sway? (coredumpctl gdb sway and then bt full)\nNext time don't forget to enable debug logs for sway (sway -d).. Nice. Can you add the stack trace?. Thanks!. This part is weird:\n2018-10-08 11:57:00 - [subprojects/wlroots/backend/drm/legacy.c:21] DP-3: Failed to page flip: No such file or directory\n2018-10-08 11:57:00 - [subprojects/wlroots/backend/drm/legacy.c:21] DP-1: Failed to page flip: No such file or directory\n\n2 out of my 4 monitors have a gray background and show no screens after the latest update\n\nWhat do you mean? Are they turned off? Are they completely gray and frozen?\nCan you try rootston (in wlroots) to see if you have the same issue? (And try to open an app -- the background there is gray)\nIf you can reproduce there, can you use git bisect to pin down which specific commit is the culprit?. Thanks!. Yes. Thanks!. Can we have logs?. Can you still reproduce?. It seems that FreeBSD uses an epoll-shim that provides timerfd emulation. It's used for libinput and Wayland.\n(No, there's no solution that works on both). Thanks!. >I implemented this locally but then discovered that Xwayland is started when launching most Wayland programs. Terminator, termite and gedit all start Xwayland before launching a Wayland window.\nThat's because GTK+ connects to the X11 server even if they're using Wayland. We should probably file a bug report to GTK+.. Could you send a pull request to fix this?. Yeah, same for me with e.g. /dev/null.. It's not an actual buffer overflow. The potential buffer overflow is detected and swaynag shows this error instead of corrupting memory.\nNot sure we want to do anything about this.. Is this a duplicate of https://github.com/swaywm/wlroots/issues/988?. It seems that -i resets state->args.mode. Can you try to send a patch to fix it?. Thanks!. Instead we shouldn't reset the cursor when entering a surface. Otherwise there's a race condition (cursor resets, and then the client sets it).. >Firstly, can sway distinguish between surfaces that don't use the pointer at all and ones that do, but don't set a cursor?\nNo\n\nSecondly, can there be valid cases where surfaces want to use the pointer but don't want/care to set the cursor?\n\nPer the Wayland spec, no. If clients don't want a cursor, they can set it to NULL on enter.. \"What it already is\" is defined as \"undefined\" by the spec. It can be e.g. a resize cursor if it crossed a border before entering the surface.. Yes. Otherwise there's a race condition: sway will decide to change the cursor and maybe after the surface will set a different cursor. In the end the cursor will blink with sway's cursor before displaying the correct one.\nThis is sway's current behaviour. To test, open two terminals on two workspaces (caret cursor). When switching from one workspace to the other a normal cursor set by sway blinks.. >a window that doesn't set the cursor\nThis is a client misbehaviour, per the spec.. >afaik wlr_log is only available to the compositor\nIt's also available in clients. But it makes clients link with wlroots, which is not great.. Thanks!. Thanks!. Instead you could just set it to BACKGROUND_MODE_FILL before processing arguments.. Thanks!. >but I have also been wondering whether to initialise swaybar with a small height of, say, 1, to provide a visual indication to the user that it has started.\nMaybe render an empty bar with a reasonable height? (20px?). We can probably improve wlr_xdg_popup_get_toplevel_coords. >I think that this patch hurts more than it helps \nIt's not like it makes it impossible to use your setup. Just start sway with the flag in the meantime.. Probably related: https://github.com/swaywm/wlroots/issues/1217. Also happened to me. Maybe we're not correctly handling being disconnected from the display.. We need to handle POLLHUP and stop the event loop in that case.. Does this only happen with xwayland windows?. Ah, on IRC it seems it's the case. It because the other window is stacked over the currently focused one on map. We need to restack the focused one on top.\nProbably requires wlroots changes?. Thanks!. Probably related to https://github.com/swaywm/wlroots/issues/348\n(Thanks for your support!). Can you try https://github.com/swaywm/wlroots/pull/1335?. @RyanDwyer confirmed this is a duplicate of swaywm/wlroots#348, fixed by swaywm/wlroots#1335.. Thanks!. This is expected. Outputs are turned back on only if swayidle turned them off, not if you did so manually.\nI'd also like a way to say to swayidle \"please turn my outputs off\", not sure if it's in scope.. > Shall I open a separate issue, unrelated to swayidle, on not being able to light up a screen?\nYou can light up a screen. Just run output * dpms on.. As others have pointed out, this could be done by just handling SIGUSR1 in swayidle, making it toggle the idle state.. I also think it's possible to implement this feature with a zero timer.\n\nI meant that when screens are turned on, swayidle should not execute resume command, and the question is how would swayidle know about it.\n\nWe don't care about it. Turning screens on when they are on is a no-op. Additionally, it's unrelated to this issue -- it also happens with the current implementation.\n\nDo you want to run a command immediately as swayidle launched, or what?\n\nNo. Set up a timer with a zero timeout on SIGUSR1. When it expires, turn off screens.. >'how often that \"no-op\" gonna happen\"?\nYou only set up the zero timer on SIGUSR1, so this isn't a concern.. Note that we can drop usr1 from the CLI options and just use the normal ones.. Can you upload the backtrace? (coredumpctl gdb sway and then bt full). You need to:\n1. Cause the crash\n2. Without rebooting, execute coredumpctl gdb sway and then type bt full\n3. Upload the output of the command. Yeah, I don't think we can do anything about this as a X11 window manager.. Maybe the keyboard is added to both seats?. Does https://github.com/swaywm/sway/pull/3390 fix this issue?. Yeah, I'm not sure how to fix this. We can't really guess which seat started a client. Maybe we should only focus the default seat?. >For sway exec it should be possible to figure out the seat,  and for regular programs spawning popups or windows maybe simply take  the last seat to interact with the said program?\nAye, that should work in most situations.\n. I'd also like to fix the loop on line 963: if the client is disconnected then we enter an infinite loop. loop_poll should be able to return an error, and we should break the loop in this case.. This is just how the loop should work. Otherwise on e.g. compositor crash swaylock will enter a busy loop.\nTo test you can probably run swaylock, and from another tty run swaymsg exit.. >I think this bug is in libwayland\nHmm? Reminder that we don't use the wayland event loop.. .config != ./config (but .config == ./.config). 1. An output is plugged in\n2. swaybg is spawned\n3. The output is unplugged\n4. swaybg tries to find the wl_output, but fails and aborts\nCan happen with e.g. docking stations.. This race condition can't be fixed (apart from making swaybg handle multiple outputs).. >and also deal with no outputs more gracefully.\nWhat do you mean?. >apart from making swaybg handle multiple outputs\nIt was #2239, I don't remember why I closed it.. #2937. Thanks!. Can you squash these commits together?. I just squashed them. Next time please don't use the GitHub UI.. Thanks!. No, and many of the protocols needed are already implemented. This includes export-dmabuf and virtual-keyboard. The only missing piece is virtual-pointer, and it's not particularly hard to do.\nWe basically just need someone to implement a Wayland client that records the screen, streams it via RDP and creates virtual input devices.\nIf you're interested, please ping us on IRC.. >Though it would be very helpful to add damage info to dmabuf-export...\nI'm not sure. TBH I'm not even sure dmabuf-export can be used here, depends if FreeRDP supports it.. Nah, I was speaking about DMA-BUFs, not damage.. >Or you mean dmabuf-export, right. Well, it doesn't have to, we can read the frames ourselves and hand it to FreeRDP in any format they want.\nThen we might as well just use screencopy.. Thanks!. I think this should be added to the wiki instead.. This is done in for_each_surface_container_iterator which is used for both. send_frame_done_iterator doesn't check view_is_visible.. Hmm, just realized I still have swaybar processes left behind when I Ctrl+C sway.. I'm going to close this, as we now disconnect swaybg instead of killing it.. Related to https://github.com/swaywm/sway/issues/1666. Related to https://github.com/swaywm/sway/issues/2780. Thanks!. Please say whether you're using the latest commit from master or sway 1.0-beta.1.. Yeah, please upgrade wlroots to the latest commit too.. We start Xwayland lazyly, which means we create the socket and set DISPLAY before starting Xwayland and start it only when an app connects.\nTwo things can be done:\n\nWe should add a runtime config option to disable Xwayland\nMaybe we should check for Xwayland before starting lazily? (This would require handling PATH, not sure it's actually a good idea). >I just thought wayland capable programs wouldn't/shouldn't need it\n\nThat's true. However GTK connects to X11 even if it uses Wayland for some reason =.=. >if the GTK application connects to X11 and is successful, does that mean it uses X11 and not wayland?\nIt uses Wayland, but still opens a connection to the X11 server \u00af_(\u30c4)_/\u00af. I'd rather add a config option to set the global Xwayland scale factor instead.\nBut that doesn't solve the issue. All coordinates (input events, output layout, menus, popups, etc) will be messed up.. >What gnome currently does (and imho is the correct behaviour alhought it seems @ddevault and @emersion disagree with me on this) is setting the scale of all X11 to 1 (or 2 or whatever number) and keeping it fixed.\nThis isn't as simple. But GNOME has a global coordinate space with scaled physical units, and this makes partial Xwayland HiDPI support possible (though this brings other issues as well and makes some features impossible to have).\n\nJust a question, is this by choice or is it just something you guys see no worth doing?\n\nIt would just be very difficult to get right and maintain. No, it's not as simple as \"just don't scale apps\", as already explained before.. KDE is working on a better solution: https://gitlab.freedesktop.org/xorg/xserver/merge_requests/111\nIt still requires some compositor changes, but limited to the X11 WM, which makes it a lot better than the Mutter solution.. Yes. Please send a patch.. @philipflohr You may be interested in https://github.com/emersion/kanshi. Can you open a PR to add this to the man page?. Thanks!. FAILED: sway-output.5 \n/usr/bin/sh -c '/usr/bin/scdoc < ../sway/sway-output.5.scd > sway-output.5'\nError at 21:1: Tabs are required for indentation. Thanks!. Thanks!. Thanks!. >this ends up crashing any script trying to regexp-match a string against a null,nil,None object, among other things.\nThis seems strange, do all x11 programs set class and instance? We could set them to an empty string, but that wouldn't make legacy scripts work.. Yeah, this command should be allowed even when no outputs are connected. Can you send a patch to fix that? (Maybe in some cases we do need at least one connected output?). Is kitty using Xwayland?. Okay. Maybe related to https://github.com/swaywm/wlroots/issues/348\nI'm actually happy about this issue because it'll potentially make debugging much easier.. > sync_to_monitor off in kitty config fixes it\nI think this is now fixed in Kitty master: https://github.com/kovidgoyal/kitty/issues/1051. Thanks!. Can you rebase and squash the fixup commit?. Needs rebase. Hmm, it should still work with a 1.8 scale.. Would you be willing to send a patch? This would require changing workspace_valid_on_output to compare the configured output name with output_get_identifier. output_get_identifier can be used like so:\nc\nchar identifier[128];\noutput_get_identifier(identifier, sizeof(identifier), output);. Can you provide debug logs too?. Thanks!. >key syms for w are different in these two keyboard layouts\nYou can use xev to get the keysym name in your ru layout.\n\nconvert key syms into key codes\n\nI'd like not to do this, and anyway I don't think it's possible.. Please help us debug it, find out what's wrong.. >This is simple\nThen send a patch.. >The only thing I want to say - this needs to be fixed. You just cannot leave it as it is.\nWe're all volunteers, and we never force anyone to work on anything. We work during our free time. In particular, sentences like \"you can't do this, you need to fix this\" or \"this is the only thing I need to switch to sway\" will be ignored.\nInstead, please help us!\n\nI can see two ways of solving this: the first was proposed in PR by @kupospelov - not binding to specific symbols, but to physical keys instead.\n\nHave you tried his PR?. Thanks!. Thanks!. Thanks!. Maybe this could be a libinput option?. All right, makes sense to do that in sway then.. I don't think we need to make wlroots changes for this feature.. >There's still no fix for this?\nPlease send a fix. >I know that the clients are currently massively over-linked, but do you really want a \"normal\" client depending on 'wayland-server'?\nI'm not a fan of this, but @SirCmpwn said he's fine with it iirc. Though, switching swayidle to another event loop would be a separate task.. Yeah, it's probably due to that. Note that fixing this issue is a work-in-progress, see https://github.com/swaywm/wlroots/pull/1324. Good catch, thanks!. >is checking errno != 0 sufficient, or should I provide separate checks and messages for each possible type of error strtof can encounter, e.g. out-of-range & underflow?\nI think just checking errno is enough.. Ping. You can try something like git rebase master (after making sure master is up-to-date).. > This rebase went OK.\nNot really. Can you try to:\ngit checkout master\ngit pull\ngit checkout <your-branch>\ngit rebase master. It seems it's down to one commit again somehow.. It seems it's down to one commit again somehow.. >is this not prone to regression? now success_object returns true when something failed\nCan you give an example? Tried swaymsg idontexist and it exits with 1 as expected.. >is this not prone to regression? now success_object returns true when something failed\nCan you give an example? Tried swaymsg idontexist and it exits with 1 as expected.. To clarify: the new code expects result objects to have a success field. Other objects won't be considered as results and won't make swaymsg exit with 1 anymore.. To clarify: the new code expects result objects to have a success field. Other objects won't be considered as results and won't make swaymsg exit with 1 anymore.. I'm fine with the current self-contained additions.\n\nWhen rendering, we'll need to check if the container is a placeholder and render it differently. It'll be the same as a normal view, but the surface is just black with a texture showing the raw criteria.\n\nDoes this involve rendering additional textures?\n\nscanning all the containers for placeholders\n\nThis seems reasonable.. I'm fine with the current self-contained additions.\n\nWhen rendering, we'll need to check if the container is a placeholder and render it differently. It'll be the same as a normal view, but the surface is just black with a texture showing the raw criteria.\n\nDoes this involve rendering additional textures?\n\nscanning all the containers for placeholders\n\nThis seems reasonable.. Is this texture really useful? I mean, this could be displayed as the title instead.. Is this texture really useful? I mean, this could be displayed as the title instead.. It seems that sway crashes. Can you enable coredumps (if not already enabled) and post a backtrace (bt full in GDB)?\n\nrunning with WLR_DRM_DEVICES to card0 or card1 set causes the program to return having found no GPUs swaycard.log even though they are is /dev/dri\n\nSet this variable to the full path to cards, e.g. WLR_DRM_DEVICES=/dev/dri/card0. It seems that sway crashes. Can you enable coredumps (if not already enabled) and post a backtrace (bt full in GDB)?\n\nrunning with WLR_DRM_DEVICES to card0 or card1 set causes the program to return having found no GPUs swaycard.log even though they are is /dev/dri\n\nSet this variable to the full path to cards, e.g. WLR_DRM_DEVICES=/dev/dri/card0. Hmm. Actually this happens because drop_permissions fails (exit(EXIT_FAILURE)). From the logs:\nRoot privileges can be restored.\nInstead, we should make drop_permissions return a bool indicating failure, and in this case cleanup the backend (that should fix the frozen VT issue).\nBut that won't make sway work. Are you running sway as root?. Hmm. Actually this happens because drop_permissions fails (exit(EXIT_FAILURE)). From the logs:\nRoot privileges can be restored.\nInstead, we should make drop_permissions return a bool indicating failure, and in this case cleanup the backend (that should fix the frozen VT issue).\nBut that won't make sway work. Are you running sway as root?. When you don't have logind, sway needs root privileges to become DRM master. In this situation, we start as root, become DRM master and then drop privileges. However sometimes dropping root fails. Instead of running the whole compositor as root, we prefer to fail.. When you don't have logind, sway needs root privileges to become DRM master. In this situation, we start as root, become DRM master and then drop privileges. However sometimes dropping root fails. Instead of running the whole compositor as root, we prefer to fail.. It's expected that no coredump is produced, since sway doesn't crash but exits with a non-zero status code. Here is the exact codepath:\nhttps://github.com/swaywm/sway/blob/d3a62633113d487b5a5b1b484736dbe7cbe26bd0/sway/main.c#L210. It's expected that no coredump is produced, since sway doesn't crash but exits with a non-zero status code. Here is the exact codepath:\nhttps://github.com/swaywm/sway/blob/d3a62633113d487b5a5b1b484736dbe7cbe26bd0/sway/main.c#L210. Tried your piece of code on my machine, here is the output:\nreal: 1000 eff: 1000 saved: 1000\nDropped root priviledges\nreal: 1000 eff: 1000 saved: 1000\nUnable to recover root\nreal: 1000 eff: 1000 saved: 1000\nAnd here is the stat:\nFile: a.out\n  Size: 16848       Blocks: 40         IO Block: 4096   regular file\nDevice: 2eh/46d Inode: 506522      Links: 1\nAccess: (4755/-rwsr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2018-10-30 18:52:26.769807762 +0100\nModify: 2018-10-30 18:51:56.963093513 +0100\nChange: 2018-10-30 18:52:25.009804898 +0100\n Birth: -. Tried your piece of code on my machine, here is the output:\nreal: 1000 eff: 1000 saved: 1000\nDropped root priviledges\nreal: 1000 eff: 1000 saved: 1000\nUnable to recover root\nreal: 1000 eff: 1000 saved: 1000\nAnd here is the stat:\nFile: a.out\n  Size: 16848       Blocks: 40         IO Block: 4096   regular file\nDevice: 2eh/46d Inode: 506522      Links: 1\nAccess: (4755/-rwsr-xr-x)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2018-10-30 18:52:26.769807762 +0100\nModify: 2018-10-30 18:51:56.963093513 +0100\nChange: 2018-10-30 18:52:25.009804898 +0100\n Birth: -. modprobe: FATAL: Module nvidia not found in directory /lib/modules/4.18.16-arch1-1-ARCH\nThis line looks suspicious. Are you sure you don't have kernel parameters or mkinitcpio config that makes nvidia load? Maybe try running mkinitcpio again.\n\nI should remove egl-wayland-1.1.0-1\n\nNo. EGL != EGLStreams.. modprobe: FATAL: Module nvidia not found in directory /lib/modules/4.18.16-arch1-1-ARCH\nThis line looks suspicious. Are you sure you don't have kernel parameters or mkinitcpio config that makes nvidia load? Maybe try running mkinitcpio again.\n\nI should remove egl-wayland-1.1.0-1\n\nNo. EGL != EGLStreams.. Please upload debug logs.. Please upload debug logs.. Hum, can you rebase please?. Hum, can you rebase please?. Thanks!. Updated to improve wording and properly teardown server before exiting.. Updated to improve wording and properly teardown server before exiting.. >Is your terminal transparent?\nIn the description:\n\nthough this is only visible if your terminal is configured to be transparent\n\nMaybe we should scissor tiled views to their container's bound (excluding popups).. >Is your terminal transparent?\nIn the description:\n\nthough this is only visible if your terminal is configured to be transparent\n\nMaybe we should scissor tiled views to their container's bound (excluding popups).. Layout can change when an output is in auto mode and another output is connected or disconnected. We need to reconfigure xwayland views in this case.. Layout can change when an output is in auto mode and another output is connected or disconnected. We need to reconfigure xwayland views in this case.. Yes, but the output layout also has a listener on wlr_output.events.destroy. There's no guarantee our listener will be called after.. Yes, but the output layout also has a listener on wlr_output.events.destroy. There's no guarantee our listener will be called after.. Thanks!. Thanks!. ~~Overlapping outputs are not expected to work with Xwayland yet.~~\n~~See https://github.com/swaywm/sway/issues/1666~~. ~~Overlapping outputs are not expected to work with Xwayland yet.~~\n~~See https://github.com/swaywm/sway/issues/1666~~. Use --.\nswaymsg -- output DP-5 pos 0 -1080 res 1920x1080. Use --.\nswaymsg -- output DP-5 pos 0 -1080 res 1920x1080. Hmm, it seems ws->floating contains NULL items, which is weird. Can you post your config and debug logs?. Hmm, it seems ws->floating contains NULL items, which is weird. Can you post your config and debug logs?. If we create seats on the fly, we probably want to remove them on the fly too.. Yeah, I've been wondering about this too. It shouldn't be too hard to get the current value with swaymsg -t get_outputs and update it afterwards.\n(On the other hand, this PR doesn't introduce a lot of complexity). Gah, I didn't think about this one. We can't really implement those since we only produce one output config. I'd say its fine not to support them for this command.. Gah, I didn't think about this one. We can't really implement those since we only produce one output config. I'd say its fine not to support them for this command.. Ah, and can you squash all of these commits into one?. Ah, and can you squash all of these commits into one?. Thanks!. Thanks!. https://github.com/swaywm/sway/issues/2952. Can you run a tool like massif to understand which are the objects taking memory?. Can you run a tool like massif to understand which are the objects taking memory?. Don't worry, it's easy:\nvalgrind --tool=massif sway\nThen try to reload multiple times, exit sway, run ms_print massif.out.* and inspect the output.. Don't worry, it's easy:\nvalgrind --tool=massif sway\nThen try to reload multiple times, exit sway, run ms_print massif.out.* and inspect the output.. I think we should do the same for D-Bus events too (dbus_event). See https://github.com/emersion/mako/blob/master/event-loop.c#L219. No worries :)\nAre you okay with the changes I made?. Thanks!. The issue template is not meant to be ignored like this. Please include debug logs.. We should use wlr_output.width,height,refresh. Maybe we're incorrectly using the output's container width/height instead?. output->{width,height} set the size of the sway_output. This shouldn't be changed.\nInstead, this function should be changed: https://github.com/swaywm/sway/blob/master/sway/ipc-json.c#L104\nIt seems like width and height are already set by ipc_json_describe_node. We should probably add new properties for the current mode width/height, or add a \"current\" flag to the current mode in the mode list.. Looks good. Can we remove the refresh property which is directly in the output JSON object? current_mode.refresh is the same value.. Why has refresh been removed from mode objects?. I suggested to remove it from the output object. In other words to move it from the output object to the current mode object.. >Consider colors, for example.\nThis PR allowed comments at the end of line only if # is followed by a space. This ensures colors still work.\nStill not sure it's a good idea.. Can you provide a clear description of the issue, with reproduction steps?\nSome applications refuse to render bigger or smaller than a given size.. Ah, right, this makes sense.. >That's basically forcing mako to use the overlay layer if someone wants to display over fullscreen\nYeah, this has been implemented in mako. I'm not too happy about it but I'm not sure there's a better solution.\n\n(I don't think they have any way of telling if a lockscreen/other overlay window covering the whole screen is active; did I miss something that'd make this possible?)\n\nCompositors have means to decide whether a lockscreen is active or not, e.g. through the layer-shell namespace or the wlr-input-inhibit protocol.\n\nwe don't do it anyway\n\nIt's something I'd like to work on.\n\nwe even have to map unmanaged xwayland window because of X11 context menus\n\nUsually there's no X11 unmanaged window.\n\nwas this discussed somewhere I could find traces of to refresh my memory?\n\nHmm, I don't remember.. >Hmm if we can identify one of the shell in the overlay layer as a lockscreen surface and display only that one within the layer I guess that would make me less reluctant with the principle, but I'm somehow not convinced this will be done :P\nIt's already done if the lockscreen is opaque. We don't render/send frame events to surfaces underneath.\n\nNot much different to also check for the top layer; that wasn't really a good argument to not do it, just the idea I had.\n\nYeah, this could have been a sway setting.. It's not only for optimizations. It's also very annoying when you watch a movie/do a presentation and a notification pops in.. I'm not sure this is a good idea. If you have a keyboard with multiple keys producing the same keysym, it'll only work with one of them.. I'm really not a fan of converting keysyms into keycodes. This makes bindings depend on the first layout, and breaks other layouts (set via xkb_layout a,b,c or when changed via the IPC).. Investigating what i3 does would be interesting.. @kupospelov, thanks for bumping this, and sorry for not clearly replying. I'll try to fully understand the issue, because I'm missing some pieces of the problem and haven't spent enough time thinking about it.\n\nDo you generally agree that layout-dependent shortcuts is a problem that should be addressed in one way or another?\n\nExcuse me, but an you please re-explain why it's an issue with Russian layouts?\nI only know the French issue: with the current design, if you bind $mod+1 you'll need to press $mod+Shift+\u00e0 (but I don't think this feature will change that, unless you set your layout to en,fr). Also, keybindings won't be the same across layouts (more on that below).\n\nIf you do agree, but do not like the keycode translation, do you know any better ways to achieve that?\n\nI should really read i3's code to understand in detail what they do.\nThe thing that makes me skeptical about this feature is that as a user, I really don't expect $mod+1 to be bound to a completely different keysym combination when switching layouts. If I bind a keysym, then I don't expect to trigger it when pressing keys that don't match keysyms on another layout.\nI think it would make sense to have an option for this.\nIt would be nice when implementing this to try to keep the code as simple and straightforward as possible (disclaimer: I haven't looked at the code yet).\n\nIf, for example, the keysym translation was performed on every change of layout configuration via the IPC and it worked with the xkb_layout command, how would this approach look?\n\nYes, I think we need to re-translate from keysyms each time the layout is changed via the xkb_layout command.. Can you rebase against master?. As much as I prefer things to hard-fail rather than to sweep things under the carpet and hope it still somehow works, bindcode --from-sym seems indeed to have issues when the input config is updated.\nIf we want bindcode --from-sym, I'd rather (1) log errors (2) cleanup successfully translated bindings and re-translate everything with the new layout. The latter conflicts with \"It may not be expected that the input command will remove stored bindings if they cannot be re-transated\" but IMHO it makes more sense.\nAll in all, not sure bindcode --from-sym is worth it. Thoughts?. I'll try having a look again soon.\nCan some other contributor look at the changes too?. Thanks!. Fixed by https://github.com/swaywm/sway/pull/3049, probably. Maybe fixed by https://github.com/swaywm/sway/pull/3381?. The remaining issue is a duplicate of https://github.com/swaywm/sway/issues/3119. Thanks!. Thanks!. Bump, damage tracking is broken without this fix.. What happens in i3?. >is there anything we can do on Sway/wlroots side to fix this?\nYeah, we can prevent windows from being re-stacked under their parent. There's already an issue about this iirc.\n\nHowever, I did still test it on i3wm and noticed a certain graphical bug didn't occur as it does with Sway. See below (there's a white/blackish border around the loading splash which isn't supposed to be there).\n\nProbably a window size issue specific to X11.. >I didn't phrase it very well. The graphical bug did not occur on i3wm, but it does on Sway.\nYeah, I mean it's sway not handling properly window sizes (maybe ignoring the preferred window size?) for X11 apps (running through Xwayland).. We could also add inhibit_idle fullscreen to only inhibit idle if fullscreened.. >For me it looks like inventing the wheel and making sway do the work of swayidle.\nNah, applications can inhibit idle for a specific surface, making it possible to e.g. turn off all screens except the ones where a video is playing.. >Neither the no or force options appear to be effected and should be working.\nHmm, where is the focus_wrapping preference checked?. Thanks!. Works for me. Can you post a WAYLAND_DEBUG log of swayidle when it doesn't work?\n. @oranenj: can you re-submit your pull request? Sorry for the fuss.. Thanks.\nNote that there's also https://github.com/swaywm/sway/pull/3049. Can you try https://github.com/swaywm/sway/pull/3049?\nCan you upload a log of swayidle with WAYLAND_DEBUG=1 set?. Can you make sure you have an up-to-date wlroots? Please use the latest one.. As a general rule, don't use sway master with wlroots 0.1. If you use sway master, also use wlroots master.\nwlroots master contains a fix for zero idle timeouts which isn't in wlroots 0.1.. Can you try with the pull request? Please post a WAYLAND_DEBUG log too.. Hmm, it really seems like your wlroots is outdated... Can you ldd $(which sway) and then ls -lh /path/to/libwlroots.so. >Is that actually valid?\nThis stops the timer. The fix in wlroots actually makes it so that we don't send zero to the timer. You likely still have an outdated wlroots.. Can reproduce on Weston, likely a GTK+ bug.. Thanks!. Yeah, but it definitely should work.. >mod+shift+space and mod+space are considered the same\nThis seems to only happen on non-US keyboards. Another user reported that it also happens with fr.. @lephe Ah, interesting. What are the relevant lines of your config? (Maybe capitalization matters). Please help us investigate the issue.. Note: someone started investigating the issue: https://github.com/swaywm/sway/issues/3705#issuecomment-469008357. We now correctly rebase on map.\nWe should also rebase on commit if it re-arranges layer surfaces. This requires detecting when layer surfaces need to be moved or resized.. Yes, we should rebase the cursor when a layer surface changes its size.. Thanks!. Thanks!. Me neither.. You can also set WAYLAND_DISPLAY='' in your X11 env.. >What if the connection is just kept open by also passing the file descriptor to some other process, and then the PID reuse happens?\nThe process which owns the file descriptor is responsible for keeping it safe.. Ping. Turns out this approach is a bad idea. Not a very bad idea because it's hard to exploit (Flatpak is vulnerable because it's reading /proc/$pid), but it's still bad. Thanks Simon McVittie for explaining why. Full discussion: https://lists.freedesktop.org/archives/wayland-devel/2019-January/039866.html\nThere are two mechanisms to check a peer's credentials: SO_PEERCRED and SCM_CRDENTIALS. These are Linux-specific but there are BSD counterparts.\nSO_PEERCRED is a way to get the PID/GID/UID when the socket is opened. I thought this was safe, because even if a PID has been re-used between wl_client_get_credentials and read(\"/proc/$pid/exe\"), this would mean the old process has been killed hence the connection has been closed. However this isn't true:\n\nA malicious process opens a Wayland connection, has PID x\nIt forks, and then the parent process exits\nA privileged binary is launched with PID x\nThe child process has escalated privileges\n\nSCM_CREDENTIALS allows one process to send its PID/GID/UID to another via an ancillary message on a Unix socket. The kernel will check that the credentials are correct (or that the sending process has permission to fake them). Using this for this use-case is exploitable:\n\nA malicious process opens a Wayland connection\nUnset the CLOEXEC flag on the connection's FD\nBuffer a SCM_CREDENTIALS message on the socket with the PID of a privileged process\nExecute a suid binary\nThe buffered message is sent, the kernel accepts the fake PID since the process is suid. TBH I wonder if we should do protocol security at all. Does it even make sense to try to restrict access to some Wayland global when processes can set $PATH globally?\n\nWithout containers/jails/VMs/whatever, trying to restrict Wayland interfaces will not prevent anything bad. It can still be nice to have to prevent everybody from using all possible privileged protocols, but then this solution is good enough (by far). Though, we shouldn't lie to our users and say it's secure.\nThe better solution would be to use a container software like e.g. Flatpak, implement container-specific access control interfaces (for Flatpak, it's an xdg-desktop-portal backend), and forbid apps running under containers from accessing our privileged globals.. >Why don't we return to working on ideas based on WAYLAND_SOCKET, e.g. authenticating a specific connection and only for clients launched directly by the compositor?\nSee my second post.. I don't think implementing strong Wayland protocol security is useful for regular un-containerized clients. Those clients don't need Wayland interfaces to do evil things, and we're not the ones responsible for stopping them.. >A simple chroot should be sufficient to prevent many of those bad things.\nI don't think chroot is well-suited for running desktop apps. You need to give access to various things like the DRM render node and /dev/shm. Maybe something like OpenBSD's unveil would be better.\nEven so, if the Wayland compositor exposes an interface that allows to start new processes, then it's easy to escape the chroot.. >So... don't provide that?\nWell, you just said:\n\nWhy don't we return to working on ideas based on WAYLAND_SOCKET, e.g. authenticating a specific connection and only for clients launched directly by the compositor?. I remember this was the result of last time's attempt at making the compositor launch processes: https://github.com/swaywm/wlr-protocols/pull/27. All right, fair enough. I'm not sure a lot of people will use this feature then, if it requires setting up per-app chroots.\n\nI guess this can just be closed.. Thanks!. In i3 zenity uses X11, which sets the window as a dialog window. In sway it uses Wayland which has no \"window type\". So we can't do anything about it.\nNote that if zenity was making the window non-resizable, we would make it floating.. You could probably use criteria to make zenity windows floating by default.. Window types are essentially useless. It's pretty uncommon to have dialog windows without a parent. In this particular case I think zenity should make its dialog non-resizable.. Please send a PR.. Feel free to re-open if necessary.. Yes.. Yes, it should be possible. I have no idea how to do it. I don't think we're interested in having it in our repo.\n(You could maybe use the Weston one as a start: https://gitlab.freedesktop.org/wayland/weston/merge_requests/39). Sure, I've linked the Weston service to give a starting point, it's not a complete solution.\nFeel free to configure your systemd services as you see fit.. (As a side note, we don't officially recommend people to start sway in their .profile -- I personally just start it from a TTY). Seems related.. You need to use xev to find out the name of the keysym you'll use in the config.. Thanks!. This happens because GDM doesn't start a shell. This is normal behaviour, and we can't do anything about it.\nWhy do you need to source /etc/profile?. >The reason I wanted this sourced is that on Arch Linux, a bunch of environment vars get set by files in /etc/profile.d (mostly not too important, but there is the occasional thing of significance in there, like setting up Java paths). However, if you feel this is not Sway's job to fix, I understand.\nThis shouldn't matter, because when you run exec in the sway config, a shell is used so the profile is sourced.. >To verify, you could do something like edit /etc/profile and add export MY_VARIABLE=1 to that file. Then login via GDM with Sway, launch a terminal and check to see if MY_VARIABLE is set. In my tests, it is not.\nWait, this should work. What is your /bin/sh?. Ah, right, this makes sense.\nGNOME has gnome-session which calls gnome-session-binary. You could setup sway like this too (e.g. I have sway-run which calls sway).. Seems like workspace->current.tiling is NULL for some reason.. Thanks!. >Just curious (maybe not releated) but there are still bugs on mixed dpi multimonitor setup?\nWhen I clicked menu in Firefox it was opening on another screen and I had other similar glitches.\nThis sounds like a Xwayland-related bug (which has been fixed). We're talking about the Wayland version here.. @stransky: just merged a patch that prevents Firefox crashes in wlroots. Now I'm able to run it as long as I don't copy something (the patch for this second crash is pending). However\u2026\n\nI work on Firefox Wayland port and I'm having an issues with Wayland Firefox on Sway compositor. Mouse cursor is not shown, popup menus are not shown and the browser does not response to uset input.\n\nI'm unable to reproduce this. Can you make sure you're running the latest sway and wlroots commits?\nNote that even if it works, it's very slow. That might be due to the fact Firefox creates ~50 wl_keyboard objects pretty quickly. Not sure why it happens on Sway and not on Weston.\n(In both Sway and Weston, Firefox uses wl_shm). >Menus get stuck on screen. So when I enable any menu, lets say the right-click context menu, and then click outside to disable it, I can't get rid of it. It is still drawn on screen.\nDoes scrolling the page underneath the menu fix it?. This one is likely a sway bug. Can you open a separate issue about it?. You need to use swaywm/wlroots#1384.. >Can you please provide a backtrace of the crash? I'd like to fix that. Thanks.\nDon't worry about it, it's a sway bug that has been fixed.. >Sometimes firefox doesn't start right up. It starts two firefox processes, one main process and one tab process and nothing happens then, no window shows up.\nI can reproduce this. It seems that disabling OpenGL \"fixes\" it (GDK_DEBUG=nogl).\n\nWeirdly enough it seems to be the vertical position.\n\nThis is a sway bug. @wernerb Can you open an issue?. >crashes Sway\nPlease submit stack traces (coredumpctl gdb sway then bt full) in a new issue.. Thanks, looks like it.\nFWIW, non-trivial Wayland clients should always use eglSwapInterval(0). There's no valid reason to ever use something else.. @stransky Another thing our users reported is that sometimes menus are off-screen and/or hidden. This happens because you use subsurfaces instead of xdg-popups. Subsurfaces spanning outside of the window geometry have no guarantee to be visible, whereas xdg-popups will be more cleverly displayed by the compositor.\n. > I doubt it. I experience the same issue despite I always manually lock screen before closing laptop lid and hence putting it to sleep.\nDo you mean you lock your screen, swaylock shows up, and when you resume your desktop shows up without swaylock? That sounds very weird.. >It's interesting that I have experienced exactly the same issue using i3 with i3lock, again, always manually locking the screen before putting laptop to sleep.\nBTH I think your issue is separate and related to your local configuration/hardware. I don't think we can do anything about it.. Maybe fixed by https://github.com/swaywm/sway/pull/3381?. Are you using swayidle -w and swaylock -f?. >I have set an alternative cursor on my system in multiple places\nYou've been configuring toolkits, not sway, so this is expected. Also don't expect your configuration to work with all clients.\nSetting the cursor theme and size in the sway config is a TODO. We'd need a new seat command.\nAs for configuring the cursor theme and size for all clients, I've been doing some work but interested parties lack time to review it: https://github.com/swaywm/wlroots/pull/1324\n\nI have also tried setting the env. var SWAY_CURSOR_THEME to the desired cursor and then starting sway, with no change in behavior.\n\nThis is a 0.15-specific env variable. It won't work on 1.0. In general we prefer configuration to go in the configuration file. Also the env variable has limitations in a multiseat setup.. Ah, it should be removed then. We have no plans to support it on 1.0.. Does i3 have a way to configure those?. Can you send a WAYLAND_DEBUG=1 debug log of pavucontrol?. Your log is weird. It seems you're pressing a keybind to shutdown sway and after that Xwayland crashes (making various X11 apps crash too).\nIf sway crashes, we need a stack trace (coredumpctl gdb sway and then bt full).. Please provide a stack trace. You can do so by running coredumpctl gdb and then bt full.. I'm not sure how we should handle this (and how we can handle this).. Indeed. I didn't realize laptop lids were exposed as libinput switches.. No, this issue is different, although related.. Duplicate of https://github.com/swaywm/sway/issues/2288. Thanks!. >and/or it doesn't know that width->amount and height->amount will always be non-negative, maybe?\nI don't think it matters whether these are negative or positive.\n\nanyway, thanks for the fast review as always.\n\n:). >No docs?\nOh right, I always forget those. Fixed.\n\nAlso, I assume you mean config-time and not runtime.\n\nI meant \"runtime\" as the opposite of \"compile-time\". But yeah it can only be used in the config file.. Disabling Wayland is not a debug option. It should be in the config file, you don't want to do it temporarily.. The whole point is that uninstalling Wayland doesn't work. wlroots will still try to to launch it (which will fail, but set DISPLAY to a bad value). See the original issue.. > Seems like a bug.\nWell, our only option would be to try to find Xwayland in $PATH which is not cool.. It's also useful to be able to disable Xwayland even if you have it installed.. You haven't explained why you don't like it, though.. I don't think a +72 \u221239 feature will have a high maintenance cost. Users can disable Xwayland anyway at build-time, so doing it at runtime doesn't add complexity. Eventually we'll want to have it anyway, as more applications migrate to Wayland. It's also already available in rootston, and the maintenance cost there has been zero.. Sure, I only mentioned rootston because you mentioned code complexity and maintainability.\n@ianyfan @ryandwyer @redsoxfan Thoughts?. Can you squash these commits together?. Hmm. It didn't help. If you have origin set to your fork and upstream set to this repo, you can do this:\nshell\ngit fetch upstream\ngit rebase upstream/master\ngit rebase -i upstream/master # Replace \"pick\" by \"squash\", except the first one\ngit push -f. >don't know why sr.ht fails the build though ...\nDon't worry about it, we'll sort it out.\n\nShould I remove titlebar_h_padding and titlebar_v_padding commands since the titlebar_padding one replaces both ?\n\nYeah. We might want to force a repaint of the whole output if this command is executed at runtime.. >Great, thank you for assisting me in this contrib. I hope I'll have other opportunities to help. You do a good job !\nYeah, sorry for the fuss about arrange_*. :)\n\nshould I squash the two commits in one ?\n\nIf possible, that would be best.. Thanks!. I think you want focus_follows_mouse always.\nMaybe related to https://github.com/swaywm/sway/pull/3118. There's a protocol for this: https://github.com/wayland-project/wayland-protocols/tree/master/unstable/keyboard-shortcuts-inhibit. >Simong?\nYeah, this is more-or-less how my name is pronounced in French. :)\n\nIs there a way I can \"activate\" that protocol simply by configuration, or would this require a change in sway or wayland itself\n\nUnfortunately this requires to implement the protocol in wlroots and in sway. \nIt seems Xwayland doesn't support this protocol though. Maybe xwayland-keyboard-grab is the one we need to support? (Or just wait until VirtualBox migrates to Wayland\u2026)\n\n(the protocol in question is still declared \"unstable\")\n\n\"Unstable\" Wayland protocols are not really unstable. It just means that a new major version can be published (if there's a v1 there can be a v2), but they actually have the same stability guarantees as stable protocols (which don't have explicit major version numbers).. Closing for now - please re-open if you can reproduce with the latest sway/wlroots commit.. Seems like an xwayland issue.. I mean, it's probably a bug in sway that happens for xwayland clients.. Can you confirm your Firefox is using Xwayland and not Wayland directly?. >However I'm wondering, whether this xkb_layout_index_t might have a different meaning for different keyboards.\nIndeed, the keyboard layout index is per XKB context.. >It's a list.\nIt's not a linked list. It's an array. Yes, it's badly named.. I think you can already do this with move events?\n(See e.g. https://github.com/acrisci/i3-dstatus/blob/master/i3dstatus/generators/scratchpad). These are probably two bugs. Please try in i3 to confirm.. >Should we keep the same approach for sway or is it acceptable adding a new json object, called \"scratchpad\", within the root json object?\nsway IPC should be compatible with i3 IPC.. Thanks!. Please send a patch!. Hmm. Maybe a better check would be mode == wlr_output->current_mode?\nMaybe wlroots should check this and do nothing if the mode is already set?. I thought we had subpixel rendering in swaybar. Are you using fractional scaling?. We do use cairo subpixel font rendering. Not sure what's wrong here.. You can check subpixel is correctly detected with weston-info.. wlroots detects your output's subpixel orientation. It does so via DRM (drmModeConnector.subpixel).. Hi! Thanks for getting in touch. :)\n\nDoes it make sense long term for your users to use i3blocks with swaybar, or does swaybar contain its own agnostic scheduler that makes i3blocks not relevant for sway users (except possibly those migrating from i3)?\n\nswaybar works just like i3bar, so i3blocks will still be useful on sway. swaybar doesn't contain a scheduler.\n\nHave you or any of your users complained of i3blocks not working for their setup? If so, were any specific blocks at fault? (E.g. if a block depended on xtitle, obviously it would not work with sway).\n\nHmm, I don't remember about anything like this. It's likely that some blocks aren't working on sway because they rely on X11, as you said. For instance, things like keyboard layout indicators, clipboard blocks, or anything that relies on global X11 state will probably be broken. Let us know if you're not sure how to make a particular script work on sway.\n\nAre there any \"gotchas\" that block writers should keep in mind that may not be obvious, e.g. global environmental variables that should not be overwritten etc.?\n\nHmm. Obviously, WAYLAND_DISPLAY and SWAYSOCK should be preserved, but apart from this, I can't think of anything else.\n\nEven if nothing comes to mind currently, please feel free at any point to direct users having troubling with i3blocks+swaybar over to our repositories (to i3blocks-contrib if it is script related), or to let us know of anything we can do to help ease integration issues on your end.\n\nThanks! No worries, we don't (yet?) get a lot of i3blocks bug reports.\n\nHighly anticipating the sway package in debian, your work is greatly appreciated.\n\nGlad you like it!. Can you obtain a stack trace? (coredumpctl gdb sway then bt full)\nNot sure we can do anything about an \"illegal instruction\". Maybe try recompiling on your VM?. We should probably filter these interlaced modes out with DRM_MODE_FLAG_INTERLACE.. FWIW Weston doesn't do anything special about interlaced modes. Only thing that changes is the refresh rate computation, see https://gitlab.freedesktop.org/wayland/weston/commit/c4621b07f\nI wonder if we actually need to do anything special about interlaced modes. Maybe that's a bug in the video driver.. And what happens if you choose an interlaced mode there? Does it work?. Okay. So\n\nA temporary fix would be to filter out interlaced modes\nA better fix would be to let users choose between interlaced and non-interlaced modes. Okay, this makes sense. @atomnuker Can you send your patch as a PR?. What's the output of swaymsg -t get_outputs?. Seems like wlroots hasn't been updated. How are you installing sway? Can you run ldd $(which sway)?. Seems like the fix had an issue (https://github.com/swaywm/wlroots/pull/1385). Can you try again updating wlroots?. Thanks!. Thanks!. Duplicate of https://github.com/swaywm/wlroots/issues/1041. Duplicate of https://github.com/swaywm/wlroots/issues/1041. This PR only fixes it for the primary selection. The clipboard still has this issue, I'm working on a patch.. This PR only fixes it for the primary selection. The clipboard still has this issue, I'm working on a patch.. Thanks!. Thanks!. ~~input-method is implemented in wlroots, but not in sway.~~\n\nEDIT: unrelated to the issue reported.. ~~input-method is implemented in wlroots, but not in sway.~~\nEDIT: unrelated to the issue reported.. input-method has not been implemented yet. This is a separate issue from the one you reported though, so I'm opening a new one: https://github.com/swaywm/sway/issues/3407\nvirtboard should work without input-method (see the logs: \"some functionality unavailable\"). You didn't reply to dcz here: https://github.com/swaywm/sway/pull/2376#issuecomment-441193511. input-method has not been implemented yet. This is a separate issue from the one you reported though, so I'm opening a new one: https://github.com/swaywm/sway/issues/3407\nvirtboard should work without input-method (see the logs: \"some functionality unavailable\"). You didn't reply to dcz here: https://github.com/swaywm/sway/pull/2376#issuecomment-441193511. >I can change the colorspace while sway is running by starting a regualar X-Server\nand issue the commands above but but it would be neat if that could be done without\nstarting an X-server.\nIt wouldn't be too hard to build a standalone tool that changes DRM properties. Would probably require CAP_SYS_ADMIN though.. >I can change the colorspace while sway is running by starting a regualar X-Server\nand issue the commands above but but it would be neat if that could be done without\nstarting an X-server.\nIt wouldn't be too hard to build a standalone tool that changes DRM properties. Would probably require CAP_SYS_ADMIN though.. True.. True.. Well, PAM isn't the only component you need to configure when you install to /usr/local. You also need to add /usr/local/bin to your PATH, /usr/local/lib to your ldconfig and /usr/local/{lib,share}/pkgconfig to you pkg-config path. Maybe we should just add a wiki article about how to do all of this.. Well, PAM isn't the only component you need to configure when you install to /usr/local. You also need to add /usr/local/bin to your PATH, /usr/local/lib to your ldconfig and /usr/local/{lib,share}/pkgconfig to you pkg-config path. Maybe we should just add a wiki article about how to do all of this.. If prefix is set to /usr/local, I don't think we should install anything outside of /usr/local. Maybe PAM has the /usr/local prefix too, for instance.\nA symlink would be better than a copy.\nYeah, the exact path might differ between distros. Not sure we can do anything about this.. If prefix is set to /usr/local, I don't think we should install anything outside of /usr/local. Maybe PAM has the /usr/local prefix too, for instance.\nA symlink would be better than a copy.\nYeah, the exact path might differ between distros. Not sure we can do anything about this.. It seems that i3 refused to add support for this feature, and suggests using title_format <span background=\"#ff0000\">%title</span> instead.. It seems that i3 refused to add support for this feature, and suggests using title_format <span background=\"#ff0000\">%title</span> instead.. >I would be also interested in advice how to group and color all window from a firefox instance.\n\nIs there something available in wayland protocol (I haven't looked up at the protocol specifics yet)? Would it be possible to proxy wayland socket from a firefox-instance and provide more insight about who that is?\n\nI'm not sure how this could work. Maybe the PID could be used?. >I would be also interested in advice how to group and color all window from a firefox instance.\n\nIs there something available in wayland protocol (I haven't looked up at the protocol specifics yet)? Would it be possible to proxy wayland socket from a firefox-instance and provide more insight about who that is?\n\nI'm not sure how this could work. Maybe the PID could be used?. >I tried the span trick but does looks supported in sway\nYou mean it's not working?. >I tried the span trick but does looks supported in sway\nYou mean it's not working?. Oh, you just need to add pango: in front of your font name, to enable pango markup.. Oh, you just need to add pango: in front of your font name, to enable pango markup.. Thanks!. Thanks!. Thanks!. Thanks!. The pw struct is inserted to the pid_workspaces list, which is then free'd later.. The pw struct is inserted to the pid_workspaces list, which is then free'd later.. Thanks!. Thanks!. Please use position x y instead of position x,y. The latter is causing issues with i3's syntax to execute multiple commands.. Please use position x y instead of position x,y. The latter is causing issues with i3's syntax to execute multiple commands.. Please post full debug logs.. Please post full debug logs.. Hmm. Strange, wlr_backend_destroy is supposed to reset everything properly.. Hmm. Strange, wlr_backend_destroy is supposed to reset everything properly.. No, so if we fail for another reason, we might also freeze the system. I suspect this is a bug in wlroots' direct session.. No, so if we fail for another reason, we might also freeze the system. I suspect this is a bug in wlroots' direct session.. Well there's _DIR in the name\u2026. Well there's _DIR in the name\u2026. I agree that wlr_backend_destroy should work. I agree that wlr_backend_destroy should work. I don't get this change. In both cases, sway_keyboard_configure is already called. Also, there's no uninitialized struct because we use calloc everywhere.. I don't get this change. In both cases, sway_keyboard_configure is already called. Also, there's no uninitialized struct because we use calloc everywhere.. How do you start it? I don't have such issues.. How do you start it? I don't have such issues.. Probably a wlroots bug related to the last X11 backend input changes.\nDisclaimer: this bug has pretty low priority, I'd suggest you investigate what's going on.. Probably a wlroots bug related to the last X11 backend input changes.\nDisclaimer: this bug has pretty low priority, I'd suggest you investigate what's going on.. The X11 backend is relatively small. Should probably add some debug logs to figure out what's going on. It's in backend/x11 in the wlroots tree.. The X11 backend is relatively small. Should probably add some debug logs to figure out what's going on. It's in backend/x11 in the wlroots tree.. Weird, there's a NULL check for source in xwm_selection_source_send. Hard to tell what's going on with these <optimized out> values.. Weird, there's a NULL check for source in xwm_selection_source_send. Hard to tell what's going on with these <optimized out> values.. Please reopen if you can reproduce. Can you try https://github.com/swaywm/wlroots/pull/1396?. Hmm, maybe https://github.com/swaywm/sway/pull/3199 also fixes this issue?. Can you try https://github.com/swaywm/sway/pull/3199?. Do you have systemd installed? If so, it's probably how you'll want to configure swaylock.. I'm referring to setting HandleLidSwitch in /etc/systemd/logind.conf.. If you've configured systemd to suspend on lid close, the easiest way to lock is to configure swayidle with a before-sleep action.. Please attach a debug log.. \u2026 and also a complete config.. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. Can you provide a stack trace? (coredumpctl gdb sway then bt full). Can you try https://github.com/swaywm/sway/pull/3211?. Thanks!. Thanks!. Thanks!. >Default output configs are created for the identifier now instead of name. This actually makes more sense anyway since you could hotplug multiple different outputs to the same port.\nIs this really required? What are default configs sued for again?. Thanks!. Thanks!. Duplicate of https://github.com/swaywm/wlroots/issues/1371. Please submit a stack trace (coredumpctl gdb sway then bt full).. No, you can run it anytime after it crashes, before it crashes again.. You can also run coredumpctl -r t list all coredumps (1 coredump = 1 crash), and coredumpctl gdb <pid> to run GDB on a specific one.. Yes please. Thanks!. Thanks!. Thanks!. BTW, this is kind of unrelated but we should probably not setenv here.. Thanks!. Hmm, interesting. We should make sure we use WRDE_UNDEF when calling wordexp to avoid looking up things like /sway/config, but I think it can work.. We should rebase the cursor after updating capabilities.\nWe should also make sure wlroots sends enter on bind if necessary.. Can you remove // Not reached on line 337? It can be reached on wordexp failures.\n(I guess WRDE_UNDEF is not strictly necessary since you overwrite entries with XDG_CONFIG_HOME, but I think it's still nice to have). Thanks!. Yeah, please don't make this PR bigger. I'd prefer to get this merged and get incremental enhancements later.. Can you send a pull request?. Please open a GitHub pull request by forking the repo and clicking on \"New pull request\" on the GitHub UI. Otherwise reviewing your changes will be difficult.. Thanks for opening a PR. Closing in favor of https://github.com/swaywm/sway/pull/3252. Thanks!. I think you forgot to explain your issue.. Can you post again a full backtrace?. It's not quite the same backtrace -- it happens in view_child_destroy while this one doesn't. Can you create a new issue?. >give it setuid\nNo. It seems you have logind installed and it fails to use that.\nFailed to get session id: No data available\nAre you sure you have a working dbus setup? Which distribution are you using?. >Since I do not use logind,\nEh. Then you have compiled wlroots with logind support, but don't want to use it. Weird.\nPlease try what @ddevault suggested.. 16:04 <SardemFF7> I think I know why\n16:04 <SardemFF7> I tested with gtk3-demo and weston-terminal\n16:04 <SardemFF7> GTK+ does set_cursor() *then* commit the cursor surface\n16:04 <SardemFF7> weston-terminal (toytoolkit really) does commit() *then* set_cursor()\n16:05 <emersion> oh, thanks SardemFF7, that makes sense\n16:05 <SardemFF7> tested with Weston, not Sway, but that was my first guess looking at the WAYLAND_DEBUG log. Hmm, I'm not sure what's going on. Here are server-side logs for weston-terminal:\n[2766932.998] wl_pointer@17.set_cursor(51, wl_surface@12, 14, 15)\n[2766933.085]  -> wl_surface@12.enter(wl_output@13)\nThough I can't see those in the client log.... I suspect this is due to clients not registering a listener for the cursor surface.. Are those supported by i3?. I would've considered merging this if it were for i3 compatibility, but if it's a new feature, then I'm not for this.\nSorry about this! Next time feel free to ask us on IRC or open an issue about new features.. No, it just means @ddevault and I don't like this feature.. Note that Xwayland has issues with outputs at negative positions anyway. I'd suggest adding 2160 to all your x coords instead.. Can you try https://github.com/swaywm/wlroots/pull/1426?. >+1 to list_create and probably rename list_free to list_destroy too.\n+1\nAnother thing would be to s/int/size_t/, but this might be a more involved change.\n\nBearing that in mind, call this list_free_and_destroy or list_free_all_and_destroy (list_freeall_and_destroy)?\n\nlist_free_items_and_destroy is fine.. I cannot reproduce, gnome-music works for me.\nIn any case, this is an issue with gnome-music. Lack for xdg-foreign support should not be fatal.. > Please upgrade wlroots and sway to the latest commit.\nPing. I'd still like to see readline.c go away. Thanks!. Thanks!. This is expected.\nI think firefox-wayland is in the process of implementing xdg-desktop-portal. When that happens, a wlroots portal could be used for screen sharing.. https://github.com/emersion/xdg-desktop-portal-wlr. Thanks!. Unfortunately this doesn't completely work. We'll need to escape \\t \\n|&;<>(){}.. All right, this works for me and preserves things like \\t.. Damn, nothing is expanded anymore now. I guess we need to use double quotes, and escape things that need to be escaped inside (\\ and \").. Scratch that, tilde expansion won't work anymore. I'm tempted to do it by joining words together (like we do now) and ignoring the fact the there can be tabs in filenames.. Yes, I've been tempted to copypasta code from mrsh instead of doing this.. Thanks!. Thanks!. Thanks!. >1 The way you can drag windows with $mod + mouse is awesome. Is there a way to do it without $mod key, but purely by dragging the titlebar?\nThis should already be possible. There's a bug that makes it impossible for tiled windows right now, though.\n\n2 A close button on the titlebar, usable with mouse\n\nSorry, I don't think we want this feature.\n\n3 (less important) A maximize/minimize button on the titlebar\n\nSame as (2), though note that Sway doesn't have maximized/minimized windows.. 1. Just merged the fix: https://github.com/swaywm/sway/pull/3303\n2. I don't think buttons would fit nicely in sway's workflow, and I believe using button bindings as @RyanDwyer suggested is a reasonable workaround. Also, the maintenance cost would be high, especially considering the rendering code is already pretty complex. Last, I don't think a lot of sway users would like to enable this feature.. Sway doesn't touch libEGL_mesa.so at all, so it's very unlikely that Sway is involved with your issue.. >I cannot reproduce a double free on my system\nNot all libc error out on double-free. Even if they can, they don't always do. To make sure we don't double-free, the best tool is -Db_sanitize=address,undefined or Valgrind.. Thanks!. Nice, thanks!. Thanks!. Please include a stack trace: coredumpctl gdb sway and then bt full.. Yes, thanks @RedSoxFan :D. Thanks!. Thanks!. Damn, code looked good to me but I forgot this comment -- what do you think?. Yeah, I think that would be nice.. Thanks!. Can you try to reproduce after updating wlroots?. Can you post a WAYLAND_DEBUG=1 debug log of Polari?. Thanks!. Thanks!. Thanks!. Can't reproduce.. >This PR is mainly for compatibility if any client were to actually implement it.\nNot sure it makes sense for us to have this feature,\n\nIf you want, a wayland equivalent can be added\n\nNo need for this, it's already baked in the Wayland protocol itself (wl_display.sync).\n. OTOH, maybe it could be useful to run the i3 test suite on Sway?. Thanks!. man sway-output. Some of these are supposed not to scale (like center). Are they buggy?. \"center\" is supposed to cut off without scaling.. Thanks for the fix!. Please provide logs.. >So the child's xdg_surface->toplevel->parent pointed to an xdg_surface with its role set\nto WLR_XDG_SURFACE_ROLE_NONE and its xdg_surface->toplevel pointer freed.\nHmm, that's annoying. We should probably remove all children before setting the role to WLR_XDG_SURFACE_ROLE_NONE in wlroots.. >We should probably remove all children before setting the role to WLR_XDG_SURFACE_ROLE_NONE in wlroots.\nIn fact, no. The parent argument is an xdg-surface, so it doesn't make sense to reset it when the xdg-toplevel is destroyed.. Thanks!. Thanks!. >Would there be a way to fix the compilation so that it looks for libsystemd.so.0 when libsystemd.so is not here? Or is this a bug in the Debian packaging of libsystemd?\nI believe this is a bug with Debian's pkg-config entry for libsystemd.. Thanks!. Related: https://github.com/emersion/slurp/issues/13. Also note that this feature is necessary for complete xdg-desktop-portal support.\nThis is not a sway issue though. All the necessary Wayland protocols are already in place.. Closing because this isn't a sway bug.. >I've had the same issue with this but also Firefox and Qutebrowser (so potentially X applications?) become unresponsive to mouse interactions when in tiling layout. They still accept key presses though. Moving the applications back to a display without negative positions makes them work again until moved to a display with negative pos.\nThis is an Xwayland bug.. >Maybe there should be a warning about that issue on the Sway wiki in the \"Outputs\" section? :-)\nThe better solution would be an Xwayland patch.. Thanks!. Thanks!. Thanks!. Thanks!. >Is there a way to set 'scale 1' per window?\nNo, this is too complicated.. Thanks!. Gentle ping: any updates on this?. > maybe I should just create a separate switch object.\n+1. Thanks!. Thanks!. It seems you started sway with some swaymsg options:\n2018-12-31 01:24:26 - [sway/sway/main.c:322] Don't use options with the IPC client\nPlease try sway -d >sway.log 2>&1 instead.\n\nsway does not crash\n\nHere sway does not crash, It just refuses to start.. Seems like an amdgpu bug then. Please report it to them.. Thanks!. >However, after reviewing this changes I'm thinking perhaps we should use an interface for the seat operation (for a separate PR). \nMaybe pointer grabs could be used?. Thanks!. Thanks!. Is there anything in dmesg? Can you do a perf record?. Maybe related to https://github.com/swaywm/wlroots/issues/1323. >I have a hunch it's related to the \"Replace _XOPEN_SOURCE with _POSIX_C_SOURCE\" commit, but it's only a hunch.\nVery unlikely. Can you reproduce with the latest wlroots commit?. +1, can you send a pull request?. Thanks!. wlroots-git isn't upgraded to the latest commit.. You should install both wlroots-git and sway-git. You should always upgrade them together to the latest commit.. Thanks!. >before Sway came with a compositor\nSway has always been a Wayland compositor. Things work differently on X11 and on Wayland.\nSway has the roles of a X11 server + X11 WM + X11 compositor.\n\nAre there any plans to implement any compositor effects similar to what Compton has for X?\n\nNo, sorry, this isn't planned.\nHowever, you can already set a window's opacity with the opacity command. See contrib/inactive-windows-transparency.py for example usage.\nIf you want effects, other compositors might suit you better (e.g. https://github.com/WayfireWM/wayfire).. >Does Sway work with other Compositors? (ie. Serving just the roles of X11 server + X11 WM).\nNo, you can't use sway and another compositor at the same time.. Thanks!. I think -f is confusing. swaylock -f daemonizes swaylock (ie. swaylock starts in the background). Here, the behaviour is different: swayidle either waits for child processes to finish, or runs them in the background.. This looks good. I think the example config still needs to be updated, to use swayidle -w and swaylock -f?. We also need to make sure this correctly locks the screen before idling.. I don't think this is a standard. I think this is a proprietary (ie. private) GNOME protocol.\nThe protocol we implement is KDE's Wayland idle protocol., which is also non-standard but at least is documented and isn't D-Bus.. >This does not address #3371 (comment) though, which sounds like a good idea as well\nSee https://github.com/swaywm/sway/pull/3388. Thanks!. Thanks!. Can you rebase this PR?. Thanks!. Thanks!. Thanks!. Thanks!. Yeah, this is a damage tracking issue. I believe it's also reproducible on rootston (will be easier to debug there).. Disclaimer: not sure we can do anything about this.. Thanks!. TBH I'm not a fan of dynamically adding/removing listeners when enabling/disabling outputs. . Thanks!. Thanks!. IMHO command handlers shouldn't be responsible for setting the input field anyway, because i3 puts there the full raw command.. Flameshot won't work anyway, because it only supports GNOME and KDE.\nSee https://github.com/lupoDharkael/flameshot/issues/446. Yes. The wlroots side already has an implementation.. Yeah, it's the same issue, it's just triggered differently.\nDuplicate of #2529. Thanks!. Derp. reset_xdg_surface should remove the popup from the list. Will submit a patch.. Hmm. This is already done in reset_xdg_surface\u2026 And I can't reproduce with gnome-calculator. What did you do to get this stack trace, @ianyfan?. https://github.com/swaywm/sway/pull/3585. Thanks!. Thanks!. Thanks!. Sure, go ahead. But please add disclaimers that this isn't a recommended way to run sway, that a lot of features will be missing and that a regular setup should be used instead.. Note: maybe it's possible to make each wlroots window fullscreen instead of moving it? This should increase performance.. Isn't this what you're trying to do with xdotool?. Eh, I think you're right. Let's just hope X11 is able to skip rendering completely.. Thanks!. Thanks!. Thanks!. Thanks!. Thanks!. >I still have input issue in firefox in xwayland, not sure if thats a bug introduced by this PR or an xwayland bug...\nThis bug also happens when switching workspaces, so I don't think it's related.. IPC errors probably shouldn't be fatal.. Oh, I forgot the sway binary could be used as an IPC client.... @sanga: You can list all coredumps with coredumpctl -r. If the compositor crashes, a coredump should have been produced there. Then use coredumpctl gdb <pid> and bt full to get a backtrace.. Thanks!. Thanks!. In some cases, static arrays can be used because the size is fixed (e.g. ipc_header_size).. >Do you mean that static arrays should be OK to use as long as the size is fixed? Because that makes sense to me, but the -Wvla flag still raises an error despite ipc_header_size being const.\nYes. Using a #define should fix it.. ```c\ndefine IPC_HEADER_SIZE (sizeof(ipc_magic) + 8)\n```\nFor the record, kernel devs are replacing most VLAs with static arrays.. >A related point, which is outside the scope of this PR, but may be an interesting point of discussion for the devs here in terms of standardising style is whether to use the variable name instead of the type for allocing, e.g. changing struct c v = malloc(sizeof(struct c)); to struct c v = malloc(sizeof(*v));.\nI don't have a strong opinion here. The first one is a little more readable, the second one ensures there's no mismatch (though I think many tools are able to catch those cases, at least Clang's static analyzer).\n\nwhether to use sizeof as an expression more\n\nWhat do you mean?\n\nwhether to always use calloc, or even to use calloc when you know you're about to initialise the memory\n\nOne important point is always use calloc when you initialize structs. It's just too easy to add a new field to the struct and forget to initialize it everywhere. Similarly, always use struct initializers (struct thing thing = {\u2026}; instead of struct thing thing;).\nI'm okay using malloc for strings initialized right away.. >The intent is already obvious from the context. sizeof(char) is unnecessary \"noise\" and usually comes off as a newbie mistake.\nI'm fine with either. I don't see why char would be a special case.. Thanks!. Thanks!. Thanks!. This sounds kind of dangerous. Maybe we could have a noop backend instead (without a renderer).. >The output is returned in the IPC get_outputs list, so perhaps we should hide it. Also, we never enable the output (we never have to), so perhaps we should add a check to make sure it can't be enabled using config or IPC.\n+1\nDo we do something similar for fake workspaces?. >I'm not sure what you mean by fake workspaces\nOh, right. We just move workspaces in saved_workspaces.. Thanks!. A perf record would be nice to have.. This seems like a different issue.. Yeah, attaching gdb would be a good idea too before perf records.. Can you send a debug log?. Weird, it seems we do call libinput_device_config_send_events_set_mode(dev, LIBINPUT_CONFIG_SEND_EVENTS_DISABLED) (line 1379).. Please upgrade wlroots.. Note that events disabled doesn't necessarily mean it's completely disabled.. I'm not opposed to it, but this will become confusing for users. We'll need to write docs for this. Maybe we could rename events disabled to something else? (But then it's not consistent with libinput's naming). (Context about \"doesn't necessarily mean it's completely disabled\")\n\nThe Send Events Mode is libinput\u2019s terminology for disabling a device. It is more precise in that the device only stops sending events but may not get fully disabled. For example, disabling the touchpad on a Lenovo T440 and similar leaves the top software buttons enabled for the trackpoint. Available options are enabled (send events normally), disabled ( do not send events), disabled on external mouse (disable the device while an external mouse is plugged in).\n\nhttps://wayland.freedesktop.org/libinput/doc/latest/configuration.html. I don't get why events disabled isn't supported for the device. Maybe we should ask libinput devs about this?. > The proper fix for this is swaybg needs to be updated to use xdg_output names instead of wl_output index numbers.\n+1. >These errors usually indicate to me that wlroots needs updating\nIndeed, your wlroots is out-of-date. Maybe you have multiple wlroots versions installed and it's picking an older version. Find out with ldd $(which sway) | grep wlroots.. This stacktrace looks corrupted. wlr_region_rotated_bounds doesn't call handle_unmap, and nrects = 21977 is impossible.. Ah, and I cannot reproduce.. Updated.\n\nI also question the value of a lot of the options like sway-version, use_rpath and custom_rpath.\n\n+1. I think sway-version is still useful if you download a tarball of sway, so I kept it.\n\nMake it possible to explicitly select libsystemd vs libelogind.\n\nWill do in another PR. \n\nThe wlroots option for this could also be yielding. Perhaps some detection if sway/wlroots are trying to link against different ones from each other would be warranted.\n\nI'm not sure we want to protect against linking different ones at all costs. Sway only uses these for the sd-bus lib, so I'd rather have a 'sd-bus-provider' option in sway than a 'logind-provider' one (a library might offer sd-bus without logind).\n\nMake 'xwayland' a yielding option inside of wlroots (This is useful when wlroots is being used as a subproject).\n\nMakes sense.. >Make 'xwayland' a yielding option inside of wlroots (This is useful when wlroots is being used as a subproject).\nWell, how does it work if 'xwayland' is set to 'auto', it's enabled in sway because 'xcb' is found but it's disabled in wlroots because some other dependency is not found?. get_define doesn't (yet) work for this use-case: https://github.com/mesonbuild/meson/issues/4800. This seems to be a thunar issue, not a sway issue.\nIs thunar running natively under Wayland or is it running as an X11 app via Xwayland? Can you send a WAYLAND_DEBUG=client log?\n\nWhat file manager works well with swaywm?\n\nPlease don't workaround the issue, instead help fixing it! :). Please report this to the Thunar devs.. >Are there any other benefits to registering them on output creation?\nIt makes code easier to follow IMHO, handlers are not registered only when a condition holds, they are always registered.\nI don't have strong feelings though, I can change it if you prefer. Note that the mode handler will need to be registered even if the output is disabled because of https://github.com/swaywm/sway/pull/3455.. This is now ready for review.. Do you have the latest commit?. Can you try https://github.com/swaywm/sway/pull/3460?. Eh, I see. I think https://github.com/swaywm/sway/pull/3454 broke sway and https://github.com/swaywm/sway/pull/3455 fixed it, and I've missed it because I was working on both at the same time. Sorry about that.. Actually this is still nice to have, to prevent segfaults when enabling, disabling and enabling again an output.. Do you have logs? I don't remember if we should render destroying views or not.\nIn any case, please submit your patch as a PR.. Can you try https://github.com/swaywm/sway/pull/3463?. If it doesn't fix it, please run recompile sway with meson build-asan -Db_sanitize=address && build-asan/sway/sway and upload logs. @mnd999 Please try the PR if you can reproduce the crash.. Ah, you get a different backtrace though. Pushed a new commit, can you try again?. Okay, that's what's implemented so far. I think we could simplify the code a lot more though.. Nah, because we need access to the conf_data variable of the subproject.. >With the xwayland option now being yielding, I don't think it's necessary to read it from the subproject.\nWell, the issue is if xwayland is set to auto, which resolves to enabled in sway and disabled in wlroots.. >I'd prefer it to be consistent with Meson's behaviour.\nI really don't like the default Meson behaviour. Once you have your system-wide wlroots install, you can't work on both projects at the same time anymore.\nMeson's default behaviour is for systems where there's no package for the subproject yet. It's a very different use-case than ours.. Thanks!. Yes, but this is racy.. Wait, maybe not, since we waitpid. So we're probably sending multiple name events for the same output.... A better fix is here: https://github.com/swaywm/wlroots/pull/1489. Thanks!. >relying on the fact that newly allocated memory is almost always zeroed out\nI don't get it. line is set to NULL.\nHowever, the code relies on getline not changing line if it fails. The spec doesn't say anything about this, so it's always better not to rely on it.. Thanks!. Seems like you added some .idea junk to your commit (please don't add it to .gitignore).. In a perfect world, the compositor would survive even if the device is running low on memory.. Thanks!. This needs a rebase.. Yeah, I'm not sure this is enough. Nobody sets the udev WL_OUTPUT property, and its meaning is not well-defined since output names are not consistent between compositors.\nRelated to https://github.com/swaywm/wlroots/issues/940. Maybe we're also missing some X11 configure events.. >Will it be fixed soon? This is only one thing that makes me stay away from Sway :/\nsway is not a product sold by a company. It's an open-source project run by volunteers. If you want this to be fixed, you should investigate why this happens.. BTW, can you commit with your GitHub email so that the commit is linked with your account?. Eh, sorry. Seems like a GitHub bug.. Thanks!. Thanks!. Thanks!. >I don't know whether we want to add optional sd_notify support into sway, so that systemd is capable of knowing when sway has finished its startup and can order units after that. It'd be a trivially small amount of code, but it depends on whether you want any direct systemd things in the code.\nAdd this to your config:\nexec systemd-notify --ready || true. Thanks!. Thanks!. There is an opened PR about this: https://github.com/swaywm/sway/pull/3045. You can use the xwayland config option.. If it's not in the manpage, please add it there.. Can you remove add_quotes as well?. Thanks!. Thanks!. I think this is https://github.com/swaywm/wlroots/issues/1119?. ```\n0  0x00005625ae7c4bfe in render_containers_linear (output=0x5625afba1c00, damage=0x7fff81bd2fb0, parent=0x7fff81bd2e70) at ../sway/desktop/render.c:675\n    i = 0\n\n1  0x00005625ae7c51d1 in render_containers (output=0x5625afba1c00, damage=0x7fff81bd2fb0, parent=0x7fff81bd2e70) at ../sway/desktop/render.c:848\n2  0x00005625ae7c537d in render_workspace (output=0x5625afba1c00, damage=0x7fff81bd2fb0, ws=0x5625afbcead0, focused=32) at ../sway/desktop/render.c:890\n    data = {layout = L_NONE, box = {x = 0, y = 0, width = 0, height = 0}, children = 0x0, focused = 32, active_child = 0x0}\n\n3  0x00005625ae7c5ba0 in output_render (output=0x5625afba1c00, when=0x7fff81bd2fa0, damage=0x7fff81bd2fb0) at ../sway/desktop/render.c:1037\n    clear_color = {0.25, 0.25, 0.25, 1}\n    nrects = 1\n    rects = 0x7fff81bd2fb0\n    wlr_output = 0x5625afac8870\n    renderer = 0x5625afa62cd0\n    __PRETTY_FUNCTION__ = \"output_render\"\n    workspace = 0x5625afbcead0\n    fullscreen_con = 0x0\n    seat = 0x69\n    focus = 0x2\n    width = -2118308096\n    height = 1\n    transform = 32767\n\n4  0x00005625ae7c1dde in damage_handle_frame (listener=0x5625afba1d78, data=0x5625afba1dc0) at ../sway/desktop/output.c:377\n    output = 0x5625afba1c00\n    now = {tv_sec = 2488, tv_nsec = 331610539}\n    needs_swap = true\n    damage = {extents = {x1 = 0, y1 = 0, x2 = 1920, y2 = 1080}, data = 0x0}\n\n5  0x00007f0485f3e7cf in wlr_signal_emit_safe (signal=0x5625afba1e20, data=0x5625afba1dc0) at ../util/signal.c:29\n    pos = 0x5625afba1d78\n    l = 0x5625afba1d78\n    cursor = {link = {prev = 0x5625afba1d78, next = 0x7fff81bd3020}, notify = 0x7f0485f3e719 <handle_noop>}\n    end = {link = {prev = 0x7fff81bd3000, next = 0x5625afba1e20}, notify = 0x7f0485f3e719 <handle_noop>}\n\n6  0x00007f0485f2c28e in output_handle_frame (listener=0x5625afba1eb8, data=0x5625afac8870) at ../types/wlr_output_damage.c:50\n    output_damage = 0x5625afba1dc0\n\n7  0x00007f0485f3e7cf in wlr_signal_emit_safe (signal=0x5625afac8990, data=0x5625afac8870) at ../util/signal.c:29\n    pos = 0x5625afba1eb8\n    l = 0x5625afba1eb8\n    cursor = {link = {prev = 0x5625afba1eb8, next = 0x7fff81bd30c0}, notify = 0x7f0485f3e719 <handle_noop>}\n    end = {link = {prev = 0x7fff81bd30a0, next = 0x5625afac8990}, notify = 0x7f0485f3e719 <handle_noop>}\n\n8  0x00007f0485f2f1c1 in wlr_output_send_frame (output=0x5625afac8870) at ../types/wlr_output.c:417\n9  0x00007f0485ef2914 in page_flip_handler (fd=9, seq=129689, tv_sec=2488, tv_usec=299987, data=0x5625afac8870) at ../backend/drm/drm.c:1314\n    conn = 0x5625afac8870\n    drm = 0x5625af8e4eb0\n    present_time = {tv_sec = 2488, tv_nsec = 299987000}\n    present_event = {output = 0x5625afac8870, when = 0x7fff81bd3140, seq = 129689, refresh = 16663333, flags = 7}\n\n10 0x00007f0484a70705 in drmHandleEvent () at /lib64/libdrm.so.2\n11 0x00007f0485ef2999 in handle_drm_event (fd=9, mask=1, data=0x0) at ../backend/drm/drm.c:1324\n    event = {version = 2, vblank_handler = 0x0, page_flip_handler = 0x7f0485ef27ab <page_flip_handler>, page_flip_handler2 = 0x0, sequence_handler = 0x0}\n\n12 0x00007f0485f83702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n13 0x00007f0485f822ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n14 0x00005625ae7bed1f in server_run (server=0x5625ae81cc80 ) at ../sway/server.c:201\n15 0x00005625ae7be2d4 in main (argc=2, argv=0x7fff81bd39b8) at ../sway/main.c:413\n    verbose = 0\n    debug = 1\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x5625ae804d24 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5625ae804d29 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5625ae804d30 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5625ae804d39 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5625ae804d3f \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5625ae804d47 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5625ae804d4f \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x5625ae804d5e \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x5625ae804d6e \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5625ae8048e0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n\n--Type  for more, q to quit, c to continue without paging--\n        c = -1\n(gdb) \n```. Maybe a duplicate of https://github.com/swaywm/sway/issues/3110?. >keyboard cursors\nWhat are these? Are you referring to sending a left arrow key?. Then you'll be interested in this issue: https://github.com/swaywm/sway/issues/1779. Can you send a WAYLAND_DEBUG=client firefox log? (It'll be big, please don't move the mouse while the cursor is spinning). Can you run echo 0xFF | sudo tee /sys/module/drm/parameters/debug, then trigger the bug, then echo 0x00 | sudo tee /sys/module/drm/parameters/debug, and finally upload your dmesg log? (Without WLR_DRM_NO_ATOMIC). [ 5654.015955] [drm:drm_atomic_check_only [drm]] checking 00000000209d4052\n[ 5654.015972] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] [CRTC:63:pipe C] mode changed\n[ 5654.015983] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] [CRTC:63:pipe C] enable changed\n[ 5654.015993] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] [CRTC:63:pipe C] active changed\n[ 5654.016061] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] Updating routing for [CONNECTOR:79:DP-1]\n[ 5654.016073] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] [CONNECTOR:79:DP-1] using [ENCODER:78:DP B] on [CRTC:63:pipe C]\n[ 5654.016082] [drm:drm_atomic_helper_check_modeset [drm_kms_helper]] [CRTC:63:pipe C] needs all connectors, enable: y, active: y\n[ 5654.016103] [drm:drm_atomic_add_affected_connectors [drm]] Adding all current connectors for [CRTC:63:pipe C] to 00000000209d4052\n[ 5654.016124] [drm:drm_atomic_add_affected_planes [drm]] Adding all current planes for [CRTC:63:pipe C] to 00000000209d4052\n[ 5654.016176] [drm:intel_atomic_check [i915]] [CONNECTOR:79:DP-1] checking for sink bpp constrains\n[ 5654.016223] [drm:intel_atomic_check [i915]] clamping display bpp (was 36) to EDID reported max of 24\n[ 5654.016269] [drm:intel_dp_compute_config [i915]] DP link computation with max lane count 4 max rate 270000 max bpp 24 pixel clock 262750KHz\n[ 5654.016315] [drm:intel_dp_compute_config [i915]] DP lane count 4 clock 270000 bpp 24\n[ 5654.016357] [drm:intel_dp_compute_config [i915]] DP link rate required 788250 available 1080000\n[ 5654.016413] [drm:intel_atomic_check [i915]] checking fdi config on pipe C, lanes 4\n[ 5654.016454] [drm:intel_atomic_check [i915]] only 2 lanes on pipe C: required 4 lanes\n[ 5654.016499] [drm:intel_atomic_check [i915]] fdi link bw constraint, reducing pipe bpp to 18\n[ 5654.016539] [drm:intel_atomic_check [i915]] checking fdi config on pipe C, lanes 3\n[ 5654.016583] [drm:intel_atomic_check [i915]] only 2 lanes on pipe C: required 3 lanes\n[ 5654.016625] [drm:intel_atomic_check [i915]] CRTC bw constrained, retrying\n[ 5654.016667] [drm:intel_dp_compute_config [i915]] DP link computation with max lane count 4 max rate 270000 max bpp 18 pixel clock 262750KHz\n[ 5654.016712] [drm:intel_dp_compute_config [i915]] DP lane count 4 clock 162000 bpp 18\n[ 5654.016754] [drm:intel_dp_compute_config [i915]] DP link rate required 591188 available 648000\n[ 5654.016794] [drm:intel_atomic_check [i915]] checking fdi config on pipe C, lanes 3\n[ 5654.016838] [drm:intel_atomic_check [i915]] only 2 lanes on pipe C: required 3 lanes\n[ 5654.016879] [drm:intel_atomic_check [i915]] CRTC fixup failed\n[ 5654.016924] [drm:intel_dump_pipe_config [i915]] [CRTC:63:pipe C][failed]\n[ 5654.016964] [drm:intel_dump_pipe_config [i915]] output_types: DP (0x80)\n[ 5654.017009] [drm:intel_dump_pipe_config [i915]] cpu_transcoder: C, pipe bpp: 18, dithering: 0\n[ 5654.017051] [drm:intel_dump_pipe_config [i915]] fdi: lanes: 3; gmch_m: 6122518, gmch_n: 8388608, link_m: 510209, link_n: 524288, tu: 64\n[ 5654.017096] [drm:intel_dump_pipe_config [i915]] dp m_n: lanes: 4; gmch_m: 7653148, gmch_n: 8388608, link_m: 425174, link_n: 262144, tu: 64\n[ 5654.017136] [drm:intel_dump_pipe_config [i915]] audio: 1, infoframes: 0\n[ 5654.017179] [drm:intel_dump_pipe_config [i915]] requested mode:\n[ 5654.017200] [drm:drm_mode_debug_printmodeline [drm]] Modeline 0:\"3840x2160\" 30 262750 3840 3888 3920 4000 2160 2163 2168 2191 0x40 0x9\n[ 5654.017243] [drm:intel_dump_pipe_config [i915]] adjusted mode:\n[ 5654.017264] [drm:drm_mode_debug_printmodeline [drm]] Modeline 0:\"3840x2160\" 30 262750 3840 3888 3920 4000 2160 2163 2168 2191 0x40 0x9\n[ 5654.017310] [drm:intel_dump_pipe_config [i915]] crtc timings: 262750 3840 3888 3920 4000 2160 2163 2168 2191, type: 0x40 flags: 0x9\n[ 5654.017351] [drm:intel_dump_pipe_config [i915]] port clock: 162000, pipe src size: 3840x2160, pixel rate 262750\n[ 5654.017396] [drm:intel_dump_pipe_config [i915]] pch pfit: pos: 0x00000000, size: 0x00000000, disabled\n[ 5654.017436] [drm:intel_dump_pipe_config [i915]] ips: 0, double wide: 0\n[ 5654.017477] [drm:intel_dump_pipe_config [i915]] dpll_hw_state: dpll: 0x0, dpll_md: 0x0, fp0: 0x0, fp1: 0x0\n[ 5654.017520] [drm:intel_dump_pipe_config [i915]] planes on this crtc\n[ 5654.017561] [drm:intel_dump_pipe_config [i915]] [PLANE:52:primary C] disabled, scaler_id = 0\n[ 5654.017604] [drm:intel_dump_pipe_config [i915]] [PLANE:55:sprite C] disabled, scaler_id = 0\n[ 5654.017645] [drm:intel_dump_pipe_config [i915]] [PLANE:60:cursor C] disabled, scaler_id = 0\n[ 5654.017666] [drm:drm_atomic_check_only [drm]] atomic driver check for 00000000209d4052 failed: -22. Duplicate of https://github.com/swaywm/sway/issues/3501. Related: https://github.com/swaywm/wlroots/issues/1501. Probably virtualization software, like GNOME Boxes?. @absrd: please make a PR without pointer-constraints. You can test it with the relative-pointer example in wlroots.. Thanks!. >I think disabling palm rejection when the mouse/pointer is captured/grabbed could be a good way to implement it. If I have a game open, then palm rejection is disabled so I can use my trackpad for camera movement. Then when I navigate to a Discord/IRC/other window, palm rejection is re-enabled for typing. Then when switching back to the game, palm rejection is disabled again and I get my trackpad back for camera movement. A keybinding could be a secondary/alternative method of disabling/enabling palm rejection.\nThere's a libinput setting for this. Should be easy to implement a script with the IPC to do exactly as you say.\n. You probably built with -Wformat-overflow. Apparently printf(\"%s\", NULL) is undefined behaviour, this should be fixed.. Thanks!. Please provide a stack trace. You can do so by running coredumpctl gdb and then bt full.. If the left output has scale 2 and is 3200px wide, you need to position the other one at 3200 / 2 = 1600. Patches welcome to improve the docs if it's not clear enough.. Can you run echo 0xFF | sudo tee /sys/module/drm/parameters/debug, then trigger the bug, then echo 0x00 | sudo tee /sys/module/drm/parameters/debug, and finally upload your dmesg log? \nAlso, can you post a full debug log, not a truncated one? (The one you link is missing the startup part)\n2019-01-28 13:57:23 - [backend/drm/atomic.c:55] DP-1: Atomic commit failed (pageflip): Invalid argument\n2019-01-28 13:57:23 - [backend/drm/atomic.c:62] DP-1: Atomic commit without new changes failed (pageflip): Invalid argument\n2019-01-28 13:57:23 - [backend/drm/atomic.c:55] eDP-1: Atomic commit failed (pageflip): Invalid argument\n2019-01-28 13:57:23 - [backend/drm/atomic.c:62] eDP-1: Atomic commit without new changes failed (pageflip): Invalid argument. >I would expect sway to just remember the copy buffer even after quitting, as it's the most convenient solution (if privacy is a concern, it could be put behind a config).\nThis isn't possible without a password manager.. Related to https://github.com/jwilm/alacritty/pull/1583. For the record, the Wayland equivalent to xclip would be wl-clipboard, you could make a PR to add support for it in neovim.\nI think Firefox uses directly the X11 API so I'm not sure what happens here. I also never had this kind of issue with Firefox and I use it as my daily driver, copy-pasting from/to xwayland/wayland apps all the time.. This has been added in libdrm-2.4.95. Which version do you have?. Apparently, now that https://github.com/swaywm/wlroots/pull/1517 is merged, this Nautilus bug happens when it's floating.\n@myfreeweb @ammen99 Could you try with wlroots master? (See https://github.com/swaywm/wlroots/issues/1569 for an upgrade path). Hmm. Can you create a wlroots issue about this?. This button count seems pretty weird tbh. Maybe you're sending a press event without a release? wlroots is pretty dumb regarding this, there are no safeguards (we should improve this).. >update: it still breaks eventually and starts rejecting the serials\nInterested in logs (wlroots debug logs + WAYALAND_DEBUG logs). . This issue is about floating. For the \"it doesn't work after some time\" issue, see https://github.com/swaywm/wlroots/issues/1576. Please post debug logs of the compositor and WAYLAND_DEBUG logs of clients there.. Actually, this issue only happens after you move a window with the mouse. Immediately dragging after putting Nautilus in floating mode works. It fails with:\n2019-02-28 18:46:55 - [sway/input/seat.c:335] Ignoring start_drag request: could not validate pointer or touch serial 66. Okay. It seems the button count gets corrupted. It gets decremented when it's already set to 0.. https://github.com/swaywm/wlroots/pull/1586 should fix the issue.. Related to https://github.com/swaywm/wlroots/issues/1506. Let button events through, until the button that started the grab is released?. Can you post a trace of Shift+XF86MonBrightnessUp in xev?. X11 configuration isn't going to affect sway.. Thanks!. Can you squash these commits together?. Thanks!. I believe this is a scdoc bug. @ddevault, any ideas?. A temporary workaround for those who build manually is meson build -Dman-pages=disabled.. Fixed in https://github.com/swaywm/sway/commit/82461c4165ce44e1ea63d5d8c3bda080b6f57148. Please update to scdoc 1.8.1.. Seems like you've made a client quit and the data source has been free'ed twice. I've trouble figuring out what happened though.. Can you guys try out https://github.com/swaywm/wlroots/pull/1529 to make sure it also fixes this issue?. In any case this isn't a sway bug. wl-clipboard used to use a hack to set the clipboard selection.. Maybe - would be better? (I don't know). >Ha, this feels like bikeshedding, but I don't really like - as the alias. I think I would prefer @, but in the end, I don't really think it matters.\nMany programs take - as a special argument, for instance for reading for stdin instead of a file. That's why I suggested that.. Thanks!. One issue per stack trace would be okay. Since each stack trace indicates a different bug, I think it makes more sense.\nOne meta issue with a checklist of crashes would be fine as well, but would make it more difficult to add new crashes as you find them (PRs will be sent with \"Fixes #XXX\" in their description, but may not fully fix the meta-issue when merged).. Maybe we should just commit a transaction in this case?\n@RyanDwyer Thoughts?. What if a layer surface is resized? We need to rebase in this case too.\n(I think we want to detect when we need to re-arrange layers, instead of doing it at every single commit.). >detect when we need to re-arrange layers\nRight now we re-arrange layer surfaces at each commit, even if they still keep the same size. This is unnecessary.\nFor this PR we could probably just rebase the cursor in handle_layer_shell_surface, which is necessary anyway. Not re-arranging when a layer surface doesn't resize is a follow-up issue.. Superseded by https://github.com/swaywm/sway/pull/3665. Thanks!. Thanks!. Thanks!. Yeah, !strcmp(a, b) is confusing because if checks if a and b match. OTOH, strcmp(a, b) != 0 is less so because it checks if a and b mismatch.. I suggest you run your tests with meson build -Db_sanitize=address,undefined. libc doesn't catch all use-after-free/double-free occurrences, if it catches them at all.. This is an Xwayland bug: https://github.com/swaywm/wlroots/issues/1119\nWould be nice to understand what's going on in Xwayland's code.. DPI != scale\nDPI can be used by X11 clients to adjust their font size. However all X11 clients are well aware that they should render in LoDPI, and they do so.\nIn the end, this doesn't sound like a bug to me.. >scale should be equal to display's DPI divided by 96 to get the same picture on different displays to be the same physical size\nScale matching DPI seems pretty unlikely.\n\nThat's not true. They do it for everything except for fonts. Try to exec, for example, xrandr --dpi 192 and then restart any of your X11 clients.\n\nxrandr --dpi 192\nenv GDK_BACKEND=x11 gnome-calculator\nworks correctly for me.. Fixed by https://github.com/swaywm/sway/pull/3585. Thanks!. Can reproduce with various xwayland apps.. Thanks!. Weird. Are you sure you're running the latest commit of both sway and wlroots?\nCan you run with ASAN? (meson build -Db_sanitize=address). Thanks!. Code LGTM, but I'm not sure we should merge this new feature before 1.0. @ddevault Thoughts?. Thanks!. Maybe related to https://github.com/swaywm/sway/issues/1865\nCan you try to remove these lines in wlroots to see if it fixes the issue: https://github.com/swaywm/wlroots/blob/51bfdd620e70c41e1a9fb4ce7831eddfb1bf893b/xwayland/xwm.c#L1192. Thanks!. Thanks!. I think those are in the same group.\nRelated: https://github.com/swaywm/wlroots/issues/1217. Hmm, maybe an issue with the wlroots direct session.. >The issue with that solution is seat_set_focus will immediately return due to a layer surface having focus so the workspace switch never occurs.\nMaybe seat_set_focus should do the workspace focus switch and then reset focus to the layer surface?. Can you send a PR doing these things?. I believe @sysconfdir@/sway/config.d/* expansion will fail if @sysconfdir@/sway/config.d doesn't exist.. The backtrace is not a backtrace, it's a system call trace. Can you get a proper backtrace (aka. stack trace)? You can obtain one from coredumps, though I'm not sure how this works on Gentoo.. Yes, that's expected. Look up how to enable coredumps on your system, or use gdb via ssh.. If the executable is suid, enabling coredumps will require more setup.. Maybe a bug in the atomic fullscreen code. Or maybe Firefox takes too long to render and we decide to move on.\nCan you post a debug log?. Looks like a sway bug. >This is an issue when you have a graphics card that supports utilizing less outputs than it has available.\nUpgrade to 1.0-rc.1, it has fixes for this.. rc.1 is no different than beta.2, none of those should be packaged in stable official repos.. >run 'dock' script to get the expected layout (3 external displays in use)\nIf you disable the internal screen, it won't get re-enabled automatically, because it's configured not to. You need to re-enable it when undocking.. > Though not coming back on redock still sounds like a bug.\nIndeed.\n(BTW kanshi might be useful in your situation). >Should sway enable a monitor immediately when plugged in?\nYes.\n\nI wonder what happens if you have only one virtual desktop and you plug a monitor in, the second monitor wouldn't have a desktop to display would it?\n\nI don't understand what you mean.. I think it's possible to make this code look a lot nicer, by merging the error paths with the normal path.. No, I mean you could remove the return line 584 and rename error_* labels to out_*.. No, this is by design.. It seems that all clients exit with\nwl_registry@2: error 0: invalid global wl_output (31)\nWe're probably creating and destroying an output very quickly, which triggers a race with Wayland globals.\nCan you start a Wayland client with WAYLAND_DEBUG=client, trigger the bug, and post the trace here?. Relevant race:\n[973903.810] wl_registry@2.global(28, \"wl_output\", 3)\n[973903.820]  -> wl_registry@2.bind(28, \"wl_output\", 2, new id [unknown]@28)\n[973903.838]  -> wl_display@1.sync(new id wl_callback@29)\n[982227.815] wl_registry@2.global_remove(28). I'm not sure we can do anything else. I'd like not to add timers as workarounds.. https://github.com/swaywm/sway/pull/3704. Just got an Xwayland crash after undocking. Probably related to this.. This issue is about apps exiting (loosing the connection), not about a lockup.. Thanks!. I don't get what's wrong. Can you describe in more detail, and if possible add a screenshot of the bug?. -Dtray=enabled is provided in the Meson command. This requires libelogind.. Have you installed /etc/pam.d/swaylock? Can you run swaylock -d >swaylock.log 2>&1?. Is it installed in /usr/local/etc/pam.d?. I'd prefer this to be a POSIX shell script and to be outside of $PATH (e.g. in /usr/libexec).. Eh, I haven't considered that. I think you're right, a short C executable is probably better.\nIs allowed_shell really necessary though?. >I feel it ought to be the responsibility of display managers and shells to play nice together.\nYeah, they're the ones responsible for login, after all.. Yes, libdir is fine by me. This indeed seems to be what most packages do.. Can you ask GNOME why they fixed it in gnome-shell rather than gdm?. Can you try https://github.com/swaywm/sway/pull/3794?. Thanks!. Thanks!. Thanks!. Maybe it makes more sense for the IPC to expose NULL, and for swaymsg to display (unnamed).. Thanks!. Thanks!. Thanks!. Thanks!. You can already use monitor identifiers from swaymsg -t get_outputs. For instance:\n```\n\nswaymsg -t get_outputs\nOutput LVDS-1 'Chimei Innolux Corporation 0x1484 0x00000000' (focused)\n```\n\nThe identifier is \"Chimei Innolux Corporation 0x1484 0x00000000\".. >Going forward, it might be interesting to define different blocks with various configuration sets, depending on what is connected.\nSee https://github.com/emersion/kanshi. If you're trying to open a terminal which uses X11, it won't work without Xwayland.\nPlease provide full debug logs.. Wayland terminals include termite, alacritty, gnome-terminal.\nClosing because this isn't a bug.. Yeah, on Wayland use app_id.. _sway_assert isn't really noreturn, we need to handle the case in which it returns.\n(Besides, there is a C11 way to mark functions as noreturn). That's expected, swaybg is killed and restarted on config change.. No. The way swaybg works now (no standalone config file, everything passed as arguments) makes it kind of annoying to implement. We could use a pipe, but we'd need to pass other arguments too, and this involves serializing\u2026. Maybe https://github.com/vilhalmer/oguri has a way to do this?. >Sort of\nWell if you kill it it's just the same as swaybg.. Running oguri on top of swaybg is the same as running swaybg twice.. Does it work properly in Weston?. >Transparent text reveals the wallpaper, not the background of the status bar, which was unexpected for me.\nHmm. How does i3 handle this?. >It is possible for wlr_surface_is_subsurface to return true, but\nwlr_surface_from_wlr_surface to be NULL.\nIn which case does this happen again? We should add this to the wlroots docs.. Thanks!. Thanks!. >This would let package maintainers override the version if there have been any changes.\nWhat's your use-case for this? I don't understand why you would need to patch up the version.. Firefox on Wayland native or in Xwayland?. Does it work in Weston?. Yes. Please report it to bugzilla if there's no bug for this yet.. Can you try https://github.com/swaywm/sway/pull/3700 and https://github.com/swaywm/wlroots/pull/1517?. Maybe fixed since you reported the issue?\n@JonnyMako, can you try again?. Thanks!. Thanks!. Yeah, we can always fallback to something else if a flag isn't available. BTW, we should use cc.get_supported_arguments for things like -Wno-unused-parameter.. 2019-02-15 01:05:40 - [sway/config/output.c:176] Unable to terminate swaybg [pid: 1713]\nInteresting. Maybe we block in waitpid.\nWe should probably just disconnect the client instead of killing it.. FWIW with this commit I was also experiencing freezes on shutdown, because swaybar wasn't killed properly:\n2019-02-16 11:48:41 - [sway/config/bar.c:22] Terminating swaybar 8978\n<freeze>. Can you try https://github.com/swaywm/sway/pull/3689?. >When modesetting an\noutput without a CRTC, a CRTC will not be given to an output that is not\ndesired to be enabled.\nBut enabling the output later should give the CRTC?\n(Maybe we can disable the output early too, if needed? That would make it so the DPMS code is all in one place). Thanks!. This has been fixed in master.. This would require to stop killing swaybg, and replace it with some kind of IPC.. Thanks!. Yeah, +1 for removing this.. Can you try https://github.com/swaywm/sway/pull/3702?. You can override them, they're just defaults. Also, this only happens when a subproject is used. Building wlroots and building wlroots as a subproject are completely separate, build files are at different locations.\nIf you build sway, I don't think you'll ever want to have sway/build/subproject/wlroots/rootston/rootston.. Which version of Meson do you have?\nEDIT: gah, sorry about that, fixed in https://github.com/swaywm/sway/commit/806129d3ccef1075e178791c56159e08e868bcaf. @ianyfan Is this ready for review again?. Thanks!. Probably an Alacritty bug. You probably need to quote the device name?. I believe it should be added to the DESCRIPTION part because it applies to all input commands.\nCould also do the same for seats.. Thanks!. Maybe related to https://github.com/swaywm/sway/issues/3079?\nWhich keyboard layout do you use?. Thanks for investigating. I think (2) would make more sense. We need to keep the call with translated keysyms because we need to execute A (capital A) bindings when Shift+a is pressed.\nStill need to think about the potential issues swapping these calls might introduce.. Good idea, done. Typo in the commit message?. Thanks!. Ah, yes. Hrm, we need to double-fork and waitpid.. Should be fixed now.. Thanks!. This code was borrowed from wlroots' xwayland code. A fix would need to be made there too if we don't use SOCK_CLOEXEC.\nWe could have a set_cloexec function instead (we already unset CLOEXEC right before the exec call).. Superseded by https://github.com/swaywm/sway/pull/3729. Nice, thanks!. Maybe related to https://github.com/swaywm/sway/issues/3593. I can't reproduce.. Pushed a fix for SOCK_CLOEXEC.. The builds haven't started (yet?), for some reason.. I think GitHub webhooks are behind, because the IRC push notifications are delayed too.. Can you try master?. Cannot reproduce, works fine for me. Not sure what's going on.. Maybe it's https://github.com/swaywm/sway/commit/7baaa3a0f80a28f58a3f95f7c3c832cb109b2aab ?. @0verse: seems like a somewhat different issue. Can you send debug logs?. >I have built a linux system from scratch and patched sway/main.c to allow root to run sway.\nThat's a very bad idea.. Well, in any case it's a completely unsupported configuration.. Can you compile sway with debugging symbols, and post the stack trace again?. Fixed in https://github.com/swaywm/sway/pull/3807. Logs?. Can you upload debug logs?. Can you retrieve logs via SSH?. Can you have a look at dmesg to see if sway has crashed at all?. Try building with meson build -Dman-pages=disabled. Can you reproduce with https://github.com/swaywm/sway/pull/3700 and https://github.com/swaywm/wlroots/pull/1517?. Seems like this is the culprit:\n2019-02-20 15:22:33 - [sway/input/seat.c:322] Ignoring start_drag request: could not validate pointer or touch serial 62. I'm going to close this as a duplicate of https://github.com/swaywm/sway/issues/3538. Apparently it's related to floating mode.. Thanks!. I believe this is a logind issue. If we don't use POSIX functions in this file, we might as well not define it.. Maybe we should just put assertions in command handlers too? I don't think there's a case in which commands should be executed in such a state? Not sure, though.. Hrm, CI hasn't been started it seems. Can you try to force-push?. Thanks!. Thanks!. >Maybe related to swaywm/wlroots#1537\nI don't think so, since moving the cursor shouldn't update its image.\nMaybe we shouldn't send an atomic test commit each time the cursor moves (but instead do it once per pageflip).\nCan you upload logs? (Maybe this is a legacy interface issue). Maybe we shouldn't drmModeMoveCursor at each input event?\n\nFrequent uses of glFinish certainly could mean higher CPU usage.\n\nThis also happens only if the cursor image changes. @GSF1200S, does the issue happen if you move the cursor without making it change its image?. Thanks!. Thanks!. Thanks!. Thanks!. Can you rebase? It seems wlroots is too new for this PR.. Thanks!. Debug logs please. Full debug logs please. You should configure your device with the full identifier: 1739:31251:SYNA2393:00_06CB:7A13_Touchpad.. Duplicate of https://github.com/swaywm/wlroots/issues/1570. >I would rather just pass -90\nIt would parse as a flag, IIRC.\nAnother issue is that we use wlroots output transform enums, which only has 0/90/180/270 transforms. What's your use-case for arbitrary transforms?. >I would just like values that fall outside of the 0-360 degree range to be wrapped and accepted.\nYes, I get that. But why would you need that?. >script calculates some value of its own and tries to pass a value outside of that range\nThe script can easily clamp the value. I'm more worried about bug reports like \"transform 42 doesn't return an error but doesn't do anything\".\nI'm fine with adding \"0\" as an alias for \"normal\".. Can you still reproduce?. Thanks!. Thanks!. If you don't specify workspace-output mappings, the output on which workspaces will appear is not defined.. >I essentially would like to be able to say \"put these workspaces on this display always, put the other workspaces on any other display if available\".\nYou can specify multiple outputs for each workspace.. Has this been suggested to i3 already?. This code has changed a lot since beta.2. Please upgrade to the latest wlroots and sway, and re-open if you can reproduce again.. Updated. Right, updated. I'm not a fan of the formatting wlroots uses.. @jbeich It seems scdoc's pkg-config file contains errors on FreeBSD. See https://builds.sr.ht/~sircmpwn/job/33711. In the meantime, pushed a fix not to use pkg-config to find scdoc's path.. Wow, thanks a lot, that was fast :). Hmm. Problem is, we'll probably fail builds on many platforms until all of them get a patched (non-1.9.1) scdoc. We'll probably need to build scdoc from source because of this\u2026\nI think it'd be better to merge this as-is and improve it when the situation settles.. Related: https://todo.sr.ht/~sircmpwn/scdoc/23. Submitted a patch to fix the pkg-config file: https://lists.sr.ht/~sircmpwn/public-inbox/%3C0k4nGuwl8cWAr8T9PlSbYQt33rnRn7rYoWEw-kKZ4WrhEK4Oco6AudUzWFmBKN8_7N_uJNcc_xY7iwzAE3s_2gD1Ie7NyDsAsdWjme3Vxss%3D%40emersion.fr%3E. Maybe an icon name cache could be implemented. Or maybe it's just an app bug.. >external gpu\nYes, this is supported.\n\ngpu hotswap\n\nNot supported, but it won't work with ExpressCard anyway.\n\nnon native resolution\n\nNot yet supported, but shouldn't be hard to add.. >I actually had some code sitting on a branch somewhere implementing the width*height@rate -> mode part, but I couldn't be bothered hooking the rest of it up at the time. I should dig that up at some point.\nNote that we already have a wlroots function adding a custom mode to a DRM output.. You need scdoc 1.9. See https://github.com/swaywm/sway/pull/3788. Can you share the output of swaymsg -t get_tree when Spotify is running?\nAlso a debug log.. sway -d >sway.log 2>&1. Thanks!. >the fix is going to be in seat_get_focused_workspace by also trying seat_get_focus_inactive\nWe should probably only do this if a layer surface is focused?. Thanks, but we'll pass on this one.. Gah. I can reproduce by just dragging a floating Nautilus. My previous patch fixed exactly this bug, I've probably missed something.. Okay, this one is a little different. It seems that it breaks only when dragging a window without the mod key. That is:\n\nOpen Nautilus\nMake it floating\nDrag the titlebar\nDrag-and-drop is broken. Fixed in https://github.com/swaywm/sway/pull/3812. >I'm still -1 on this\n\nI'm also -1 on this. Adding to much magic to sway commands won't do any good IMHO.\nSorry, but we'll pass on this one.. Don't worry about it, scdoc 1.9.1 is broken and causes CI failures. Unfortunately a fix hasn't been pushed yet to scdoc master, so we can't do a lot about it.. >FYI my patch to fix scdoc was merged into scdoc master ~90min ago\nOh indeed, I didn't notice because it hasn't been mentioned on the ML. Will send a patch to use scdoc-git.. Can you rebase this PR?. >You could absorb the condition into the above condition (since it's now a single if block in an if block)\nI'd prefer not to. This is security code, it needs to be readable.. Okay, one last thing: can you commit with the same e-mail as your GitHub account? (Or alternatively add the e-mail you use to your GitHub account). Thanks!. Hmm, apparently scdoc is broken on FreeBSD because install -D fails...\n\nIt's probably reasonable to use scdoc-git indefinitely for the same reasons we use wlroots-git.\n\nThat's a good question.. Thanks!. Thanks!. Thanks!. Not sure if it's worth it, but maybe we could add a comment to explain why we reset the focus?. I wonder whether we should properly damage child surfaces outside of the container's bounds instead.. Thanks!. +1\nWe do the same in wlroots for grabs, we have a default grab.. Can you run drm_info on your host?\nThis is probably due to https://github.com/swaywm/wlroots/pull/1526. You need scdoc == 1.9.0 or >= 1.9.2 to build man pages. It won't work with 1.9.1.\nAs a temp workaround, you can pass -Dman-pages=disabled to meson.. >The parent is the workspace.\nI can see how this could break scripts, however the Sway description seems more accurate (doesn't leak internal implementation details). I don't really know whether changing this is a big deal or not.. >I just noticed #1883 is to remove output_damage_view. Should I use output_view_for_each_surface directly?\nYeah, why not.. Thanks!. Looks good, will approve once we hear back from @SwayUser.. https://github.com/swaywm/sway/pull/3826. You need to upgrade wlroots.\nAlways upgrade wlroots when you upgrade sway.. wlroots is at 2baad6e, not g30d34261. Update it.. Your log hasn't captured anything. You need to redirect stderr.\nUse this: sway -d >sway.log 2>&1.. One is in the \"The following environment variables have an effect on sway\" section, the other is in the \"The following environment variables are set by sway\" section.. I've seen this kind of issue with multi-GPU support too (Intel-AMD). It's probably a bug with DMA-BUFs.. Thanks!. Err, I haven't noticed the destination branch :. Cherry-picked as https://github.com/swaywm/sway/commit/30931ad9e77b106956007530821d98bc20bca969. Okay, so that's a bug. If we receive one message without \\n and one message with \\n, we should concat both. It should be possible to check the last character returned by getline, and if it's not \\n, append instead of replace the status.. I think we already do this for windows that have a fixed size.\nWe try not to add features from other tiling window managers, otherwise sway will become like Frankenstein. Instead, you could contribute to projects like https://github.com/Bl4ckb0ne/bspwc/. >Is this the intended behavior until #2288 is addressed?\nYes. The tablet protocol should make the device appear in Xwayland.. I'm going to close this as a duplicate of #2288. The \"dpms\" property in DRM is being phased out IIRC. @ascent12 Thoughts?. The docs say:\n\nLegacy property\nNote that this property cannot be set through the MODE_ATOMIC ioctl, userspace must use \u201cACTIVE\u201d on the CRTC instead.\n\nSo it's a systemd bug. Please report it to them.. This happens because we restart swaybg when the output config changes.. We'll need a lot more details.\nWhich app? Which menu? How to reproduce? Which version of sway? Debug logs?. Has it ever worked at all? Can you send debug logs?. Thanks!. Yeah, please send a PR.. Which version of sway and wl-clipboard are you using?. Can you post a WAYLAND_DEBUG=client log of wl-clipboard?. This is a wl-clipboard bug. It's supposed to use the data-control protocol. Please report it to them with this log.. Maybe we should rename those, they are confusing. We could do that, but we've chosen not to in the first PR so that you can adjust position with multiple relative commands in the config. It probably doesn't make sense regardless, and would be good to guard them.\nTheir name is still confusing though.. Sure, but it's not clear it's relative. Also, when you use transform 90, you already need to know whether it's clockwise or anti-clockwise.. I can reproduce. @RedSoxFan Any ideas?. Thanks!. Hmm. Might be a firefox bug, not sure. A WAYLAND_DEBUG=client log of Firefox would help investigating.. This is a qutebrowser bug.. I think this is a bug. We should properly escape arguments with spaces in swaymsg.. Maybe it's because sway is suid or has caps?. What about getcap /usr/bin/sway?. Beats me then. Someone wanted to get the modifier information out of sway to display the current keyboard layout.. Negative positions don't work with Xwayland. This is an Xwayland bug.. Does i3 have a way to do this?. Original i3 issue: https://github.com/i3/i3/issues/2711\nWould be nice to explain your use-case there.. But initially there's no binmode right?. Tabs!. This is already done here: https://github.com/swaywm/sway/blob/wlroots/sway/desktop/output.c#L111. Not used yet, but will be when we'll implement background (see commented code below).. Can this be moved in config.h, just like apply_output_config? (Maybe rename the latter). Just like config/output.c, can you move these in config/input.c? config.c is already way too big.. Multiply this by the output scale to get output-local coordinates (render{width,height} are in output-local coordinates).. The if (argc > 2) check should be done before this line and return an error.. Oh, there's already checkarg(argc, \"input\", EXPECTED_AT_LEAST, 2)). So just remove the check, I guess? (And remove this useless return cmd_results_new(CMD_BLOCK_INPUT, NULL, NULL);). Same here: useless because of checkarg.. There's a bug in wlroots about setting a hardware cursor's image twice (it fallbacks to software cursors, I'll fix that).\nSetting the cursor image when it isn't needed is inefficient because it involves uploading the image to the GPU each time. This needs to be fixed here (maybe keep the name of the currently selected cursor in the struct?).. +1. Need to check if keyboard->keymap == NULL here in case the keymap doesn't exist.. I don't think the command name is included in argc, is it?. I'm not sure about it. Right below, argv[0] is used as the device identifier and argv[1] is {.. Okay just add a TODO then so we don't forget about it.. If we can't allocate an input config, we probably shouldn't allocate a command result.. Add a config->reading check just before. It seems this one could just be static. Below: can't you just get the swayc_t *output_container with a wl_container_of instead of iterating the container list?. For consistency's sake, can you rename the listener?. That's not how you do a BFS.. Would appreciate a comment to explain what this function is doing. You don't need to check if the dependency is found. Since it's an optional dep, adding it to the list will just work.\n\nYou can pass the opt_dep variable to target construction functions whether the actual dependency was found or not. Meson will ignore non-found dependencies.\n\nhttp://mesonbuild.com/Dependencies.html. Rename this file to pool_buffer.c?. Should be removed. Also check for shm, output. We might want to move this before the first commit in case the compositor closes the layer surface immediately.. Not sorted alphabetically. Maybe listeners have been removed in handle_output_destroy already. Should guard this with a \nc\nif (sway_layer->output != NULL). render_surface should also be called with &now instead of &soutput->last_frame. Same for wlr_output_swap_buffers.. This is not alphabetically sorted.. Any reason why these aren't prefixed?. Indentation is weird here. Why are some of these prefixed with container and some others with sway_container?. ~~Are you trying to save one character here?~~. new_swayc should be container_create right?. c\nif (container == NULL) {\n   return;\n}. Is this even needed?. Put this on the stack. Same. This can go inside the loop. cmd_results_new allocates stuff. size_t inside the loop. VLA?. <3. c\nif (workspace->type != C_WORKSPACE) {\n   return;\n}. I bet the compiler replaces this with a nop. render_all_frames. return ideal_height?. Why this s/orientation/default_orientation/?. Can't get this to work. Tried to resize the output so that height > width with default_orientation auto, it still opens new views on the right.. Problem is, container_at takes a container to search views in. Unmanaged views are always outside it.. Done. I don't know how to name this one. In rootston it's view_damage but I don't like this name because it doesn't imply the damage is taken from the view damage (the function doesn't damage the whole view). I'd like to call it something like desktop_damage_from_view but it isn't consistent with other names.. We'll probably want to wrap this into a wlr function. Doesn't work with multiseat, but w/e. This should be static. Err, this is confusing. Maybe pick another name?. Nice debug line. Remove this default. This is from another PR right? Why does it show up here?. Extra space here. Bump. Yeah, this function is broken anyway. I'll let it as is and fix it in the HiDPI PR.. Does it even make sense to have a double for the view position?. Mhh, this isn't even correct since output containers have layout coordinates.. next, prev and first seem to have been removed. sway_seat_set_focus?. I think so. It's only used for Xwayland and floating, both need layout coords.. Maybe not. In which case, should probably remove line 84.. It's strange to move by 10px when the argument is invalid.. Since configure is also responsible for updating the container view coords, I'm not sure about this change yet. Actually we don't (yet) track damage for popups, subsurfaces and unmanaged views (which are all the same kind of surface). It works because we're lucky. Will definitely fix that in an upcoming PR.. No, because HiDPI.. container_close_container?. Extra line here. For consistency, use sway_assert here. surface_{width,height} are unscaled in Wayland terms, so I picked buffer_{width,height}. It's not this function's responsibility to damage outputs. finish is supposed to free all resources allocated by a struct without free-ing the struct itself. Might want to rename this function to something else.. The behavior of this function has changed - it should always be called on the root container otherwise it won't work.. In case of C_TYPES it should fail. No need to declare parent and i before used.. Eh, e is changed inside the loop but is used outside. Even if it works because there's a break, it's very confusing. Inside the destructor?. Yeah, I'd like to remove it.. * 2?. Here's an example of why this PR is unreadable: here you compare height (in buffer coordinates) with ideal_height / output->scale (in surface coordinates). That doesn't make sense.. Cursor size changes when hovering the bar. Should be 24 * max_scale.. What if the output scale is dynamically changed?. surface_width. It's unused actually, does it make sense to remove it?. Should that be _height?. Ditto: surface_width?. Oh my, missing a space. I still don't get why this roundtrip is needed?. Oh, I see, makes sense. We wanted to get rid of this C_TYPES right?. This should\u2026 be recursive?. Double free of con. Maybe just do something like:\nc\nif (con->type == C_VIEW) {\n    view_close(con->sway_view);\n} else {\n    container_for_each_descendant_dfs(con, container_close_func, NULL);\n}. Ah, this happens in container_destroy. Makes sense.. No side effects in assertions. Side note: with assignments in ifs, side effects in array brackets are practices I don't like and are error-prone. Especially for a lockscreen.. Should cleanup all resources.. Define buffer_width before this instruction, and replace surface->width * surface->scale with buffer_width. Why are these in all caps?. If you want to damage buffer_{width,height}, use wl_surface_damage_buffer. Or you could just use surface->{width,height}.. I'm not saying this is undefined behavior, I'm just saying it's unreadable and thus error-prone, even for people used to these idioms. It's just like ifs without brackets.\nAnyway, I don't care too much, this is just a warning to say \"if there's a bug because of this, don't blame me for having approved this PR\".. Can be defined when used.. Quality comments here. These two lines can be combined in one. Also multiplying by -1 is weird.. Put these in uppercase letters?. parent->parent can be NULL.. What does PPT stands for?. What about putting this after the end of the else. No need for else here. Is it possible to use \"container\" instead? \"con\" is a bit weird.. The loop above breaks if parent->parent == NULL.. It's confusing because it makes the reader think the value is read outside the loop.. Then check for the container type in the loop condition instead of checking for parent->parent?. Hum, this could be a good idea. This can be done in a separate PR though.. output_ functions take an output as first argument. This function should be renamed to container_damage_whole and moved to container.h.. No need to declare i outside the loop. Should assert that container is not the root container.. Maybe this signal should be triggered by the function setting container->parent (here container_add_sibling). When does this exactly happen?. It's a good idea to handle output removal, but there's also another way swaybar can get destroyed: with the layer-surface closed event. We should handle this one too (since the compositor can close a swaybar without removing an output). There's a TODO: Deal with hotplugging about this above.. Ugh, my bad. I think this should be target->children->length instead of target->children->length - 1, just like at line 334.. I don't think this special case is required. Hmm, it is for the focus-inactive stuff.. The reason it's a TODO is that nobody moves an unmanaged window, so it's difficult to test.. Removed that outdated TODO. It's fixed by view_init_subsurfaces a few lines above.. Err, you're right, I can't do this. ack. No need for a has_listeners variable here. Just return true inside the loop.. Can be declared inside the loop. Either remove case L_LAYOUTS or remove default.. We don't need those line breaks.. You can just return \"splitv\" instead of assigning a variable.. Extra line here. Make ipc_json_layout_description return NULL instead of using strcmp?. true?. old_parent is always NULL. I'd expect reparent to be triggered even if the old parent was NULL. Inserting an item at index container->children->length - 1 should insert before the last item?. I mean, it should be possible to hit container->children->length without selecting the parent (just like it's possible to hit 0).. Ah, makes sense. Damage all outputs here?. Prefer to use current->sway_output->swayc->x (in the future, we might want to send a fake position to clients via wlr_output).. I'd like a little doc comment explaining what this function does, it's not immediately clear to me.. While you're at it, can you change \"For C_ROOT, this has no meaning\" to \"this is the output layout extent\"?. Yeah. I kind of want to restrict subsurfaces and popups to their container.\nFixed.. No need for an additional variable here right? We could just strdup(ws->name)?. 80 char limit. Should read at most state->buffer_size - state->buffer_index - 1 bytes at line 114?. Also, not related to your patch but read returns -1 on error.. Can you rename _ideal_height to _ideal_surface_height (so that it's explicit that this value is in surface-local coordinates, not in buffer-local coordinates)?\nAlso we should always compare sizes in surface-local coordinates to prevent rounding issues when the size is odd (see #1780). Se we should replace the comparison with _ideal_surface_height > surface_height.. We discussed this on IRC and agreed we should add an option for this.. This will only work if the surface doesn't have subsurfaces (try right-clicking in Chromium or Firefo in fullscreen mode). However this can be left as a TODO.. Unmanaged surfaces aren't views, so this will fail. Unamanged surfaces are typically popups and menus, so I don't think we want to be able to put them fullscreen.. Should check if the container is a view.. Since we need to render layer surfaces above the fullscreen view we won't be able to always use wlr_output_set_fullscreen_surface and we'll need to render the view manually. It's probably better to always do it like this for now.. This function should work when the view is unmapped, i.e. when not visible on screen. In this case the view doesn't have a container yet.\nTest case: launch mpv with the fullscreen flag.. >But the bar is in the bottom layer\nThis is true for swaybar, but would be false for a GNOME-like/Windows-like/KDE-like bar.. We're not doing the \"frame perfect\" milestone yet.. >I don't think this function is called before the view is mapped, so that's not a problem.\nAre you sure about this? It seems odd to me. Are you starting mpv with the Wayland backend?. wlr_output_set_fullscreen_surface is not designed to be used with custom rendering code. It's designed to allow for direct scanout.\nWhen swapping buffers, if a surface is fullscreened with wlr_output_set_fullscreen_surface, the wlr_output will clear the screen and render the fullscreen surface. Hence, any rendering that happened before will be discarded.\nSo the overlay layer cannot be rendered for now. This should be added to the list of limitations of this PR.. Then maybe don't use wlr_output_set_fullscreen_surface for now? Doing the rendering manually isn't that hard. We just need to be careful about surfaces that are smaller than the output size.. No, that's not that simple. wlr_output_set_fullscreen_surface can only be used if the fullscreened view doesn't have subsurfaces/popups AND (the view isn't X11 OR there's no unmanaged X11 surface).. Basically nothing is pixel perfect right now. When resizing a view you'll get background artifacts. When closing a view, same. Fixing all of these requires #1650.. I think we want to be able to start up multiple sway instances at the same time.. We probably want to keep this to true.. We're using tabs for indentation.. You could for instance start sway in sway, and start swaylock in both. This shouldn't fail.. We use tabs instead of spaces. This applies to several locations, make sure to fix them all!. Not all actually :). You could grep for two spaces, or configure your editor to show invisible chars, or configure your editor to use the .editorconfig file.. Oh, I was just talking about spaces vs tabs.. This comment also indicates spaces instead of tabs.. A good practice is to use org_kde_kwin_idle_interface.name here.. Bump: I still think this should be removed.. Why does this happen? swayidle shouldn't spawn more than one swaylock right?. Oh, you need the not-yet-released mpv (from Git), this is annoying. Alternatively, you can use my test client here: https://gist.github.com/emersion/34ed72adecd78bdfac9208a97ffb46a3. Can you add a\nc\n// TODO: handle views smaller than the output. >top layer needs to be below the fullscreen surface\nbump. We do this in a lot of places. Maybe we should make zero a special value that uses the current time?. I'd just close the layer surface in this case.. This comment seems outdated. Isn't there a constant for this one?. Actually 0x02 is not guaranteed to be Caps Lock. It would be better to use XKB_MOD_NAME_CAPS and xkb_state_mod_name_is_active.. Should error out if *end. Can you sway_assert(view->swayc) to make sure the view is mapped here? I'd like to make it explicit when some functions can only be called on mapped views, even if it's a static one.. Is this really some UTF-8?. size_t. Can you use calloc here instead?. Yeah, I just didn't know i3 had optional UTF-8 in its config files.\nFYI, we're going to review Sway 0.15 files even if they are copied verbatim.. s/unmanaged/unmapped/. No :^). In this case reordering doesn't hurt readability. It's true that files are generally read from bottom to top. I don't feel strongly about it though.\nIn other situations where functions operating on different types depend on each other and are in the same file, forward definitions can definitely help improve readability.. I'm not a fan of these \"I take a generic struct sway_container as input but I only work on output/workspace\". Basically these functions could be typed and take a sway_output/sway_workspace.. I don't like this default. Is it possible to explicitly say \"don't do anything for views\"? We still have C_LAST, but I'd like to get rid of it.. It's confusing to use the scale variable to accumulate child heights. Maybe we could use a new variable?. That should probably go into view_set_fullscreen_raw?. I don't see the value of having 4 functions taking \"generic containers, but not really\" instead of one.\nWhen you access a sway_workspace field you must always have an assert just above checking the type (or you already have the specialized type).. ACK. @RyanDwyer I just don't get why there's a need for these per-type functions instead of a generic one (which is here anyway). Can you explain me why you made this change?. >Separating them into different functions improves readability because the part that is recursive is isolated to a smaller area of code.\nSure, but these functions could be static.\n\nIt's not called anywhere, and it's not a very appropriate name because it can also arrange outputs and workspaces.\n\nCan you make a PR to remove it then?. This shouldn't be done here.. This should be removed.. Style: switch (c) {. This should be removed.. snprintf. What's the point of having an external client if you hardcode it?. I'd just remove those and let the user configure its swayidle command, just like dmenu.\nNot everybody wants swayidle to run.. The main advantage of having an external daemon is to be able to replace it with another one.\n\nThis kind of things should be run as default, with a possible option to opt out.\n\nYou can put it in the default config. No need to hardcode it anywhere.. We already talked about this, the systemd part should be in wlroots.. Ditto. Including WAYLAND_DISPLAY is a little bit better.\nWhy not having the compositor do this test? The compositor knows if the swaylock is running, because it started it.. There's no reason acquiring the lock in the compositor wouldn't work. Debug it and fix it?\nThe daemon doesn't have ownership over the session, it shouldn't lock a parent session if the compositor isn't using DRM+logind.. Polling is evil.. You could also keep the rendering in output.c and move the iterator stuff in another file.\nWhatever you think is the best. Personally I'm cool with both.. No need for a pointer here. Also, add static so that the min number of elements is 4:\nc\nfloat dest[static 4]. Same applies here. Maybe we want to parse alpha too?. Nevermind, not used here. Parse alpha?. ACK. Please file a follow-up ticket when this PR gets merged.. You mean, the per-view opacity?\nYeah, w/e, I don't know what the use-case for opacity is in the first place.. Should set output->sway_output->bg_pid to 0 here. Please use tabs instead of spaces. Can you add a space between + and 1. Hmmm, since we're now in a forked version of the process, does it make sense to return a new command result? Probably better to log the error and exit with a non-zero exit code?. Is it possible to remove the newlines here and after the assignment?. Re: https://github.com/swaywm/sway/pull/1881#discussion_r185303178\nI also think RUNDIR is confusing. Maybe renaming it to SWAY_LIBEXECDIR would be better?. We already have container_at, adding container_at_coords is confusing.\nThe doc comment should be updated.. con->children can be NULL. Style: } and else { on the same line. Style: spaces around =. I'd name this depth instead of iteration, but is just a personal preference.. Style: } and else { on the same line. Can probably be rewritten as:\nc\nsize_t num_tabs = 1;\nif (\u2026) {\n    \u2026\n}. The code after if (child->sway_view->border == B_NORMAL) { can be factored out of this if.\nWe may want a function that chooses colors and title_texture for a child (since this code is duplicated with line 408).. Is it possible to factor this into a function that returns the formatted length and only calls strcat if the buffer parameter isn't NULL? We should be able to call it first with buffer set to NULL, then allocate the buffer, and then call it again. That would de-duplicate this code.. No need for these if statements: free(NULL) is a no-op.. You can factor them out of the outer if. Is arrange_root necessary here?. strdup will segfault if view_get_title returns NULL. I'd prefer that, yes. Since it calls view_get_title itsef it's really not obvious.. Nitpick: maybe this should be renamed to title for consistency?. Yes. you're right.. You probably want to check if the xwayland surface is mapped here? xsurface won't be NULL.. In the end I don't care a lot about the order, I just want the non-exclusive layer surfaces to respect the exclusive ones. Pushed a new commit that does this.. Can this be static?. Can you merge these two functions, so that if we change one value we don't forget to change the other?\n(ie. if src is NULL, don't try to write to it, and always return the size). Not a fan of this, it's getting unreadable. I'd prefer to use two lines instead.. Ditto. I also thought that we probably shouldn't assert (ie. teardown the process) when pango_parse_markup fails. We should print an error, but we could probably return NULL (and check the callers don't crash when this functions returns NULL) or print a text like \"[pango markup error]\".. Hmm, when focusing a container with multiple views, do we want to call wlr_seat_keyboard_notify_enter on each view?. Yeah, I was wondering if it would make more sense to clear the keyboard focus.. This should be in seat_send_focus. Typo: defaults. This sounds really weird. I'd say \"requis pour les pages man\".. Should say \"background\", it's not directly obvious what \"bg\" is. s/compatability/compatibility/. Ditto. *exec*. Default is output. Missing one indentation level. Can you return an error if it's neither \"on\" nor \"off\"?. Nitpick: is this really needed?. Follow-up issue: rewrite this in scdoc. If the handler is just calling exit(0), imho it can be removed. Also _ should be used instead of < and > in the description: Execute _timeout command_ if \u2026. Ah, you're right, sway_terminate is not just exit(0).. Bump. Maybe set *error_arg to NULL here, just to prevent bad surprises?. Can you remove this assertion and just print an error please?. This will set again the cursor image each time an input event is received. This is an issue with wlr_xcursor_manager_set_cursor_image because it'll reupload the pixels to the GPU each time.. We should factor this into a function taking a texture and output-local coords.. No need to check for NULL. Should sway_assert these. Hmm, rendering one texture over the other breaks fully transparent borders. We should clip the other texture before this one begins.. See how to do this in #1983. Yeah, with my patch merged in it's more complicated. We could pass the box instead, and force the box to be passed to wlr_matrix_project_box to have the size of the texture (to make sure the texture isn't improperly scaled).. Can you also check the return value of wl_display_dispatch?. Please don't embed the protocol in Sway, use the XML file from wayland-protocols instead.. The wl_ prefix is reserved for the Wayland lib. We generally name these handle_reparent. Yes, listeners always have handle in their name and don't always do the operation: for instance handle_unmap doesn't unmap the surface, it's called when the surface is being unmapped by the unmap function.. Assert that swayc is a view. Meh. Hum, is that how i3 does it? Titles could end up being veeery long. Please use calloc for structs. Should check if an image has already been loaded for this output?. Hmm. What happens if both wlroots and sway loggers are included?. I'd name the IPC library just \"ipc\" (instead of \"swayipc\") or common/ipc, since sway directories contain executables.. I mean: we should probably prefix this in wlroots with wlr_ right?. Maybe we could add functions to render borders that could be reused?. Is it possible to add the 3px padding and the 1px border as constants to know why there are 7, 6, 4 and 3 floating around?. In this case, why don't you keep the L_FLOATING for the floating container?. is_floating is trivially implemented with a function. Should include the appropriate header instead of doing this. Yeah, that's why we need to prefix wlroots defines.. This should be renamed set_tiled (see #1988).. Should be added back?. Hmm, I'm really not a fan of this. Find another way.. This isn't enough, because popups/subsurfaces can be outside of this box and still need to get rendered.. Floating is under the top layer and under xwayland unmanaged surfaces. output_view_for_each_surface has not been updated for floating containers, so this can't work. Meh, I'm sure there's a nicer way to do this. This can return true if the view isn't resizable, ie. if the min size is equal to the max size.. The xdg-surface geometry can be unset, in which case the surface's size should be used.. This is documented to take layout coords. All my comments on xdg-shell also apply here. Hmmm.. No need to do all of this. Just take the struct sway_container *output's coordinates.. Let's implement this instead of having these magic values :). Not sure we want to allow xwayland windows to move. We want to allow that for unmanaged windows, sure, but do we want to do this for toplevels?. Won't work with subsurfaces/popups outside the box. The name should make it more obvious that it expects a floating view - maybe container_set_geometry_from_floating_view?. This name is weird, and doesn't match what the function really does?. Should still do nothing if the position hasn't changed. The client doesn't always set the geometry, so this box can be empty. We should probably document this, it's written in the protocol itself.. Don't use output->wlr_output->lx, use output->swayc->x instead. Yes. I'm just suggesting a way to implement this for xdg-shell.. This is completely unrelated to layer surfaces. Firefox is xwayland, which uses unmanaged surfaces that are global to the whole layout and don't have a parent. I'm talking about xdg-popups and wayland subsurfaces.. Filezilla is not* using xdg-shell. Pick any GTK+3 app, right click, and you should get a popup.. I can do the wlroots PR tonight if that helps. Maybe view_get_type should be renamed view_get_shell for consistency?. Hmmm. I'd rather keep the last position of the mouse in a field in sway_cursor.. Nah, see the wlroots PR. It falls back to maximized if the client doesn't support tiling.. If the client xdg-shell version is >= 2, then it supports tiling. If the client version is 1, then it doesn't support tiling and we make the window maximized instead. That's the best we can do.. I don't think so. GNOME has tiling too (if you move a window near a border of the screen), so apps that don't implement it will look bad on GNOME too. Also, an upside to tiling is that the app has no request to unset it.. This can't be an assert, seat_get_focus_inactive can return a workspace. Hmm, the layout may have changed since last time. We should probably store the previous container instead, but then we need to listen when the container is destroyed.. >move cursor\nShould focus B right? But this won't happen because of c != prev_c.. Oh, you're right.. Can be re-written without this flag with something more straightforward:\nc\nif (it's --release) {\n  \u2026\n} else if (it's --locked) {\n  \u2026\n} else {\n  break;\n}\nargv++;\nargc--;. Should be <=? argc doesn't include the command name.. Style: missing brackets. +1 to early returns. Bump. Not a fan of this. Yeah, just like saved_width/saved_height, that would be better.. You only generate keysyms from the last pressed keycode. You should use wlr_keyboard.keycodes instead of just keycode.. Style: these can move inside the loop. We generally only define outside the loop if we need the variables after the loop.. Style: you can merge this line and the next one.. I don't see k defined anywhere - am I missing something?. You need to translate keysyms for all pressed keycodes here too.. Maybe this should be renamed config_subcommand?. handlers_size could be a size_t. str can be const. Style: no need for two blank lines - one is enough. Style: no need for these parentheses. What if read == 0?. The code for add_gaps is the same as remove_gaps, with s/+/-/. Is it possible to unify these in a set_gaps function?. Missing a =?. In fact, even for C_ROOT, this is the position in layout coordinates (for C_ROOT, it's the extents of the whole output layout).. Hmm, can you just remove this wlr_box_contains_point check and only use container_at?. Why are the keycodes duplicated in each state?. Note that some keycodes can yield one modifier keysym and one non-modifier keysym.. Oh, right, that makes a lot more sense. Can you add a comment explaining the mapping between these two guys?. I don't really like the use of \"model\", which makes it sound more complicated than it is. What about something like update_shortcut_state?. I don't get what a model is.\nPlease keep things as simple as possible.. Style: we add one more level of indentation to multiline conditions, so that it's easy to distinguish between the condition and the block.. Hmm, excuse me if I'm missing something obvious, but why do we need to do this last_key_index trick?. This isn't pretty, but I guess it's necessary.. No need to calloc, you can set length = 0 and line = NULL and getline will do that for you.. Can you rename offset to line_offset so that it's obvious it's a number of lines? (vs number of bytes with position). All right, thanks for the explanation. This should really be container. Sorry, I still don't get it: why is there a special case for this one? Isn't it expanded anyway before the handler is executed?. If the handler \"forgets\" to set leftovers in some cases, this will become an infinite loop. Is it possible to reset them to NULL before handling and assert they're not NULL after handling?. This can be const. Oh, I see, thanks for the explanation.. What about subsurfaces?. Since we just erased one $, shouldn't this be += 1?. I think this should be set when the sway_output is created, not here. Same for this one. This will render subsurfaces of popups when data->popups == false.. Hmm, this is a bit hacky, and only works if the current container is removed. I'd rather copy the list when doing this sort of thing.. >I would prefer the PR be changed to use a double/nested for loop to iterate the workspaces\nWell, that doesn't change the fact that the inner loop will iterate over a list that will be mutated. But I agree it's a better idea.. No, sorry. The indentation is a bit weird here.\nWhy do we need that?. Why do we need that?. If you want to log something, use wlr_log (and don't use caps lock!). Seems like there's a typo in here. Ditto. I don't think these comments are needed. Ditto. If c doesn't have a parent, maybe we should do nothing (arranging root won't do anything interesting since c is out of the tree). This can be a size_t. It seems that we don't care about binding_pressed when event->state != WLR_KEY_PRESSED. Maybe we can move the code computing it in this if?. TBH I don't think this is the right fix. We should just damage before and after arranging. We only damage after right now.. >It's not worth the type disagreement with the int length parameter from list_t\nYeah, list_t.length being an int is a mistake. However you don't use list_t so this shouldn't be an issue.\n\nTo be pedantic, npressed is a count, not a size\n\nThis important thing is that size_t is guaranteed to hold an array index.\nNote that as @ascent12 said not all unsigned values should be size_t.. Style: don't intend switch labels\nc\nswitch (scope) {\ncase GAPS_SCOPE_ALL:\n    \u2026. This could probably use one of the #defines?. Style: missing brackets. Does config->edge_gaps need to be checked here?. wlroots doesn't expose this, yet. Nitpick: we prefer to add a space before the *, and no space after:\nc\nstruct cmd_results *cmd_res = \u2026. Removing these parens also makes the code unreadable.. Yeah, I also think a destroy function which doesn't frees is confusing. I'd rather keep destroy and pick another name for the other function.. The preferred datatype for a list of boxes is pixman_region32_t. It will merge boxes that overlap.. What do we want to do with subsurfaces and popups?. The preferred idiom when referencing a buffer is:\nc\ninstruction->saved_buffer = wlr_buffer_ref(view->surface->buffer);. What if the container has already been added to the transaction, but its state has changed since last time?. Nitpick: Hz with a capital H :). Style: not a fan of using the same variable for unrelated things.. Do we even need to store damage? Can we just damage all containers in the transaction when applied?. A client can receive configure n and n+1 and only ACK n+1. That means we should set_instruction_ready for all instructions that have a serial <= ACKed serial.. What if a client \"skips configures\", ie. receives one configure with size WxH, and then immediately receives another configure with size W'xH', and finally decides to render one frame with size W'xH'?. Hmm, why moving this in handle_destroy? This seems more confusing.. Can't this be done in view_unmap?. This can be static. This function allocates a box, and callers don't free it.. Should this be a list_free instead?. This should use the wlr_xdg_toplevel_set_tiled function\nc\nwlr_xdg_toplevel_set_tiled(xdg_surface, WLR_EDGE_LEFT | WLR_EDGE_RIGHT |\n    WLR_EDGE_TOP | WLR_EDGE_BOTTOM);. Probably want to disable tiling in the other branch?. Probably want to enable tiling in view_autoconfigure, in case it's not floating. For now doing nothing special is probably fine.\n(Subsurfaces are not \"opened\" or \"closed\" - they're just there or not there just like regular surfaces, they're different from popups which have a grab). Can you add this to the docs?. What if a client receives a configure with size WxH, and commits a W'xH' surface?. Functions named destroy should free. This is a convention we use everywhere. Functions that don't free should have a different name.. Style: missing space between void and *. Using the view width/height will render incorrectly if the surface size is different. This happens with unresizable windows for instance. We should crop surfaces instead.. And then we'll read workspace->sway_workspace after the loop :\\\nInstead I checked if container is floating. If a floating container has a direct tabbed/stacked parent, it's always visible. Does that sound better to you?. What about\nc\nreturn view_from_wlr_surface(subsurface->parent)\n?. +1. You can print wlr_surface->role too, might be useful. My bad, you're right. Force pushed your solution.. Pretty sure C compilers optimize tail calls at -O2 or -O3. Should be child->sway_view->border != B_NONE instead?. You need to render subsurfaces too.. Can't this be in sway_root, and initialized there?. Yeah but this is a little meh:\nc\n    if (!pid_workspaces.prev && !pid_workspaces.next) {\n        wl_list_init(&pid_workspaces);\n        return NULL;\n    }\nAlso cleanup is not handled.\nBut I guess since this is not wlroots it doesn't matter too much.. sway_assert is not designed not to always be an assert. We should probably do this:\nc\nif (!sway_assert(policy, \"Unable to allocate security policy\")) {\n    goto cleanup;\n}. It seems possible to me that this happens.. Ditto. Braces are mandatory. ++ doesn't do anything useful here.\nEDIT: err, it's confusing. I think it tries to print ws_num + 1 but fails. tl;dr don't act smart.. Well this should probably get replaced by a idle_inhibit_v1_check_active call?. Ah, we probably need to move this check after argc--; argv++;. I agree, it's out of scope.. Yeah, I saw that it was like this before too. But when we actually touch those lines, we might as well fix style issues.. Yeah, I understand this is very tedious and painful work and I'm grateful you take the time to do it!. Note that this function will damage stuff and that it's not necessary because wlr_surface does this automatically. Maybe we should just set view->width and view->height?. >Are you sure the damage isn't necessary? What if the surface becomes smaller?\nNah, this is handled by wlr_surface. Though, it's necessary if the view has borders, so in the end I'll probablu keep it.\n\nI think you'd need to set view->swayc->current.view_{width,height} in addition to view->{width,height}.\n\nThe input code is using pending properties, that's why it worked. We probably need to change that.\n\nHowever, you might not want to write them into the current state if there are transactions pending.\n\nWell I don't know what to do if transactions are in progress. Once the transaction is applied the view won't have the size we want (from surface_state), it'll have the size of the transaction. We probably need to queue a fake transaction instead.. Ugh. That's globals for you.. BTW, this won't work for popups.. Or will it? We used to have a rotate_child_position to handle this.. This is just a wlr_surface_for_each_surface away. This function will get more complicated when we'll properly support subsurfaces in wlroots (which makes it possible to place subsurfaces behind their parent for instance).. If it's opaque, we shouldn't need to clear.. >I've mentioned this in #sway already, but I've found the iterator functions difficult to follow.\nHow iterators are currently used is over-complicated and could be simplified a lot.\n\nI know some developers who strictly believe in not having any duplicated code, and inadvertently add complexity to their code to avoid it.\n\nI agree with you, but here I think iterators would be better.. To be completely standards-compliant, wlr_surface->current->opaque should be clipped to the surface's size. Probably better to do this on the wlroots side, with a different field.. There's no guarantee the layer surface has position 0,0.. Style: please don't put a space before parens. We should also remove the ipc_display_destroy listener. Should be false?. > If we have an xwayland view in a transaction and it resizes to something other than what we tell it to, once the transaction has applied it'll resize the swayc anyway.\nWhat if it's floating?. Ah okay, this makes more sense. I'd move this to line 537, because container_set_floating will un-tile views. Hmm, this should be already handled by line 488?. What I mean is: you need to translate wlr_surface->current.opaque. The roundtrip ensures that the compositor has received the request.\nWe could probably do more stuff like checking the compositor hasn't immediately closed the layer surface (I'm not even sure what we do in this case?) and checking we have sent buffers. The latter will be a more involved change.. This is already defined line 71. Nitpick: this can be char[] instead of char *. We could assert that this is a floating container here. char[] is objectively better (see https://www.akkadia.org/drepper/dsohowto.pdf section 2.4.1 Pointers vs. Arrays), so I'd prefer new code not to use char * if possible. It's no big deal anyway.. Yeah, +1. This doesn't seem JSON-encoded.. Ah, this seems deliberate. The man page should be updated.. Yeah, this is what confused me. This is out of scope for this PR though.. Is it really necessary to check scroll_button > 1000?. This message needs to be updated.. Hmm, not a fan of this one. size_t can be used here. Instead, parse_options could be a more simple parse_option function which parses a single option key/value.. Eh, doesn't getopt handle that for you? We should stick to getopt's behaviour (getopt supports --color <rrggbb[aa]> for you).. (I was thinking of something like parse_option(state, key, value)). You can now remove that (int) cast. You can now remove these extra parentheses ;). Should be void transaction_commit_dirty(void). This could probably be an enum. Missing =?. Well since this is const char * this could lead to various issues such as use-after-free\u2026. Well, one thing I'd like to do after this is set it at run-time via swaymsg. With the current API it's easy to be tricked into thinking providing a string and free-ing it afterwards is fine.\nw/e. Just make this a size_t. While you're at it, can you add error handling for this?. Replacing that XOR is probably a good thing. You can use WL_POINTER_AXIS_{VERTICAL,HORIZONTAL}_SCROLL. Style:\nc\nswitch (thing) {\ncase THING:\n    return OTHER_THING;\n\u2026\n}. Can't you return if you execute a hotspot->callback?. Style: no need for parentheses here. WLR_MODIFIER_* constants cannot be used with keyboard->modifiers.depressed, they can only be used with wlr_keyboard_get_modifiers, because modifier indexes are not guaranteed to be the same from one keyboard layout to another.. You can just use parse_movement_direction here. This can be a switch, extracted in a separate function that returns a cursor image name from a resize edge.. Use wlr_keyboard_get_modifiers. We don't need all of these includes, do we?. The client can request a resize when it's not the left button that is pressed - iirc mpv requests resize on right click.. Views themselves have size constraints. Should we handle these here?. This will set the cursor each time the mouse moves. This is very inefficient as this re-uploads the image each time. We could probably save the current cursor image name in sway_cursor.. Could be a switch so we don't forget to add stuff here when we add new enum values (such as rotate).. What if the client requested to move while another button was pressed?. We can probably use the serial to know which button the client is talking about.. Hmm, is this enough? Shouldn't this use handle_end_operation?. Do we want to handle errors? (ie. bool parse_boolean(const char *str, bool current, bool *out)). This should also do this:\nc\nwl_list_remove(&old->output_destroy.link);\nwl_list_init(&old->output_destroy.link);. Style:\n1. We're using tabs, not spaces\n2. We're not putting indentation for pre-processor directives. Can you exclude this file if xwayland is disabled? You can do this with get_option in the meson file.. Style: tabs, and no indentation for #ifdefs. No need for this since it's now done in the meson file.. You're missing one #include \"config.h\" here. Ditto. Ditto. Ditto. It's not sway/config.h, it's just config.h. Ditto. No indent. You need to include config.h before using it in an #ifdef. Any reason you renamed this? Wayland uses repeat, not step (https://wayland.freedesktop.org/docs/html/apa.html#protocol-spec-wl_keyboard-event-repeat_info). I think rate is better. This value is different from handle_keyboard_key's.. Oh, my bad.. swaygrab has been removed. We should remove completions too.. Yeah, you can now use tools like grim.. If possible, can you open a PR to remove all swaygrab references in docs and completion?\n```\nmeson.build\n185:        'completions/zsh/_swaygrab',\nsway/sway.1.scd\n95:sway(5) swaymsg(1) swaygrab(1) sway-input(5) sway-bar(5)\nswayidle/swayidle.1.scd\n61:sway(5) swaymsg(1) swaygrab(1) sway-input(5) sway-bar(5)\ncompletions/zsh/_swaygrab\n1:#compdef swaygrab\n6:# Completion script for swaygrab in sway wm (http://swaywm.org)\n``. Yes. It's not a length (as in number of chars), it's a size (as in number of bytes that will get malloc'ed) so it probably makes more sense to name itid_size. Also it should be asize_t, not anint.. Don't destroy objects created with awl_displayargument - they destroy themselves automatically when the display goes down to prevent being used while the display is destroyed.. Eh,wlr_output_layoutdoesn't have awl_displayargument. Then this is a bug in wlroots.. https://github.com/swaywm/wlroots/pull/1175. Hmm. So maybe we should make this function returnvoid` now, since it doesn't have the same semantics as other functions with the same signature?. Yeah, that seems sensible.. I don't think we should send a button event here. If you want to move a window and you drag over a button, it'll click the button.. Possible to rename this to something else? This will be useful for touch and tablet too.. This can be of the enum type instead of implicit casting the value (just need to name the enum).. \"down\" or \"cursor_down\" works for me. Shouldn't this use the saved geometry?. Hmm, is there any bad consequence of removing this?\nMaybe we should have common code for all shells doing that?. Need to add the same for zxdg-shell-v6.. I now remember what the issue is:\n1. Open Firefox\n2. Initiate a file download (e.g. go to https://www.debian.org/distrib/ and click on \"64-bit PC netinst iso\")\n3. The \"Open file/save as\" dialog appears. It's initially small and is then resized to a larger size. It's broken with this patch.. Hmm. So the client updated its size, and transaction_commit_dirty will send a new configure event with the same size?. Well current isn't updated, is it?. I don't get it. should_configure has this check:\nc\n    if (con->current.view_width == instruction->state.view_width &&\n            con->current.view_height == instruction->state.view_height) {\nWhen transaction_commit_dirty is called, current still has the old state (the transaction isn't applied yet). So it still sends a configure event right?. >Yeah, should_configure correctly returns false\nNo, should_configure returns true because the pending state (set here) mismatches the current state (set when the transaction is applied).. Maybe we need to damage the old size, in case the view size shrinks?. Nitpick: can't we just move these into the definition a few lines above?. What if the container is not a view and is changing its borders/gaps?. Oh right, missed that desktop_damage_whole_container call.. Do we really need to maintain a list of entered outputs per non-view container?. Note: in the future we'll want to use the effective output when sending frame events. We don't want to send frame events at 120FPS if a view has entered 2 outputs. That's also how Weston does it.. You can just use root_container.{x,y,width,height}. Hmm, this seems already done line 412, or am I missing something?. Maybe switching CSD should also change view->border and save the previous value in saved_border? (I think https://github.com/swaywm/sway/issues/2491 is due to this as well). This is duplicated with:\nhttps://github.com/swaywm/sway/pull/2499/files#diff-101a892d1de03398ff5a39989c2332dcR162\nMaybe we should consider calling this function from the other?. sway_fowa?. Rewrite with a switch?. Can you add a similar check line 249?. Can you move this below view->surface = NULL so we don't have bad pointers when calling cursor_send_pointer_motion?. Maybe we can use a bool here, and rename to after?. Maybe we can define 30 as a constant?. thickness should be an int. state == WLR_BUTTON_PRESSED?. This comment indentation is weird. Move it in the next branch?. You should include config.h if you use this macro. Maybe seat_set_focus_container on line 405 can be removed now?. Is it possible to remove this? It happens often and will clutter debug logs.. I think we already have a function (in cursor.c) to update the cursor (and ensure the cursor state is correctly updated): cursor_set_image. Hmmm. This will change when we'll support the tablet protocol, not sure it's worth it to do this. Eh, master is broken anyway because if a tablet is plugged in the seat won't advertise the POINTER capability. I'd say just add the capability if there's a tablet, no need for complicated proximity logic.. This should be cursor_set_image(seat->cursor, NULL, NULL). Can you change it to accept a NULL image?. I tried to use \"set\" for the server-side and \"update\" for the client-side. Is it possible to rename this to view_update_csd_from_client?. current_mode isn't the client preference, it's the current mode as chosen by the compositor.\nTo get the client preference, listen to request_mode.. void initialize_pw_backend(void);. We should probably use _POSIX_C_SOURCE instead. We could add proper error handling here. Zero means it's EOF, -1 means something bad happened.. <=. Missing a exit here?\n(Minor: no need for :). It seems that in the future, wsc->output may be NULL. We probably need to check this here.. In C, void call_me_maybe() declares a function that takes an unspecified number of parameters. So a call like call_me_maybe(1, 2, 3) is valid.\nTo declare a function that takes no parameter, one should use void call_me_maybe(void).. Not sure this is correct. We should still send frame events to surfaces that registered a frame callback even if there's no damage.. (Note: not sending frame callbacks when the view isn't damaged has caused bugs with mpv in the past). There's already a wlroots function that does just that.. Won't this comparison cause a use-after-free if new_output_last_ws was destroyed?. Hmm. Not a fan of this (we could in the future for instance destroy immediately when the transaction has nothing to wait for?). I guess since it's just pointer comparison and we're not actually dereferencing pointers it's fine.. What about subsurfaces? Does it segfault?. Can't this be done in a generic way with is_transient_for?. Note that the parent is not always the root. It's possible to have: root (fullscreen) \u2192 parent \u2192 child.. xdg-shell allows weird stuff like: root (fullscreen, mapped) \u2192 parent (unmapped) \u2192 child (mapped). This is equivalent to: root (fullscreen, mapped) \u2192 child (mapped).. Now that this part is generic, is it possible not to duplicate it and move it into view_map?. There's a race here. If ms is negative then poll will wait forever. We need to reset ms to zero in this case.. There's also a leak because elements in the lists aren't free'd.. Shouldn't this be sizeof(struct pollfd)?. Instead you can check if wl_display_roundtrip returns -1.. This can be const. Can you remove this ;? (There's another one on line 36). What happens when the seat looses the capability? This prevents the image from being unset.. ~~My bad, seat_update_capabilities doesn't call cursor_set_image (calls directly wlr_cursor_set_image).~~. I'm not sure whether checking for EAGAIN is relevant here. If we do, we should probably do it in a loop. But w/e.. c\nerrno = 0;\nwhile (wl_display_flush(state->display) == -1 && errno == EAGAIN) {\n    // This space is intentionally left blank\n}\nif (errno != 0) {\n    wlr_log_errno(WLR_ERROR, \"wl_display_flush failed\");\n    break;\n}. Oh, sorry, you're right. My bad.. However we never wait for the FD to become writable.. Can we add assert(!wl_list_empty(&output->workspaces))?. poll lets you know whether an FD is readable and/or writable. When reading we make sure that the FD is readable. However we don't check if it's writable before writing.. We should call wl_signal_init early too.. wl_client_get_credentials can fail (e.g. on FreeBSD where it's not supported). We should either check the return value or initialize p to 0 to make sure we don't kill random clients.. swaybg can be set to a third-party client, e.g. oguri. This client can open multiple connections. We shouldn't break here.. >wl_client_get_credentials has no return value\nOh, all right then, I somehow had the feeling it could fail but I've mixed things up.. Please use strtof and check for endptr and errno. Style: we use tabs. I think it's deliberate, it's a math notation. But yeah natural language seems more appropriate here.. event->delta_discrete is an integer, so maybe it should be rounded instead of being silently floored.. That >= 0 is strange here, Can you instead add a sentence in the description?. Can you set errno = 0 right before calling strtof? Otherwise it might fail because of a previous errno value.. This can just be a const size_t. I don't think those are necessary.. Shouldn't these be NULL instead if unset?. Some enum values are large here (e.g. IPC_GET_SEATS), so maybe it's more appropriate to have a list of pairs (command type, handler). Fortunately events (which have a very large value) shouldn't appear here.. Style: 80 char limit. Style: 80 char limit. Style: 80 char limit. Style: 80 char limit. c\nconst char *role = NULL;\nif (role) { \u2026 }\nShould compile right?. 4 cols. You can install an editorconfig plugin for your text editor if it doesn't support it already.. Style: extra indentation here. assert(false)?. I really think there's no need for this field. We can use wlr_output_transform_compose in output_cmd_transform.. 1. Get the current output transform\n2. wlr_output_transform_compose(current, relative). Yes. Yes, oc->name is set (you can sway_assert it). You can use output_by_name to get the sway_output.. This doesn't work if you chain output commands like so:\noutput XXX transform 90 scale 2. Done. I don't think this is right.. I don't think this works either. wl_display_dispatch_pending's description says:\n\nDispatch default queue events without reading from the display fd. \n\nI think we need to use wl_display_read_events. See how mako does it:\nhttps://github.com/emersion/mako/blob/master/event-loop.c#L238. This compiles:\n```c\ninclude \nenum abc {\n    A,\n    B,\n    C,\n};\nconst size_t ABC_NUM = C + 1;\n```. >because it's used in a type definition\nAh right. Yeah, #define would be better.. Style: extra line here. This can be an enum, this doesn't need to be initialized.. sway_assert is a little weird and its return value needs to be checked, e.g.:\nc\nif (!sway_assert(output->name != NULL, \"Output config name not set\")) {\n  return NULL;\n}. This shouldn't be an assertion, otherwise you'll crash the whole compositor if you execute swaymsg output IDONTEXIST transform 90 clockwise.. What happens if you execute output XXX transform 90 asdfclockwise? It should error out.. This needs to be called before polling, ie. in the main loop. Docs say:\n\nUse this function before polling on the display fd. (See https://people.freedesktop.org/~whot/wayland-doxygen/wayland/Client/classwl__display.html#a40039c1169b153269a3dc0796a54ddb0 for a complete example). I don't like this, because it gets in the way in switch statements. It's also not a valid value of the enum.. No need to initialize this to zero.. Style: no newline before brace, two indent levels for multiline if\n\nc\nif (thing &&\n        other_thing) {\n    do_stuff();\n}. Style: spaces \u2192 tabs. I don't think this check is necessary. sway_output always has a non-NULL wlr_output. Can you use validating to display a more precise debug message?. Style: can you remove the newline between ) and {?. Hmm, I still see spaces on this line. Style: please add one more indentation level to this line, so we can easily tell it's the condition and not the body.. >But then how would we know whether to cancel_read? \nWe could probably have a bool read_wl_events variable set to false before dispatching, set it to true if we read from the Wayland socket, and call wl_display_cancel_read after disptaching if read_wl_events is still false.\n\nAlso, why doesn't this use the default event loop?\n\nWhich default event loop?\nWe use the event loop from libwayland-server, but the wl_display doesn't have an event loop because we're a client. We should probably migrate to our own event loop instead.. This is needed if an event happens somewhere else (dbus, signal) and sends Wayland messages.. Elements in the list need to be free'ed too.. Why has this been removed?. This can be bool. Indeed. Apologies.. Actually I think we're not using these functions correctly. I just read how Weston does it for its Wayland backend. The event loop is just wl_event_loop_dispatch in a loop. The display_event handler uses the mask to know what to do: https://gitlab.freedesktop.org/wayland/weston/blob/master/libweston/compositor-wayland.c#L2593\nThey also use wl_event_source_check.\nCan you try doing the same?\n\nBut then why won't they cause an event on polling first time round?\n\nBecause \"I need to send data on the Wayland socket\" is a consequence of \"I've handled an D-Bus event\", and the event loop isn't aware of that without wl_event_source_check.. This can just be\nc\nif (json_object_object_get_ex(i, \"kbdlayout\", &kbdlayout)) {. Style: we try to group external headers, can you move this one line up?. Style: this can be declared in the for loop directly. Can you rename this to xkb_active_layout_name?. Oh, I missed the fact that including xkb_layout_index_t here makes the line go over the 80 char limit. Please either declare it right before, or indent with two tabs (instead of aligning).. Style: brackets even if there's a single statement.. >we're only checking for readable events\nHmm, what do you mean? Do you think we should not check for writable events?. Ah, right. We should add | WL_EVENT_WRITABLE then. It probably doesn't happen right now because we don't fill the receiver buffers, but it's probably best to handle it properly.. https://gitlab.freedesktop.org/wayland/weston/issues/163. I still don't get why this is needed. If this file is built without Xwayland, then the code becomes:\nc\nuint32_t window_id = 0;\n\u2026\njson_object_object_add(object, \"window\", json_object_new_int(window_id));\nWhy doesn't this work?. Then just add a guard to the declaration of those two?. Style: extra space here.. Ditto. I don't think this is required.. Can you remove the definitions of these constants?. Don't we need to use config->titlebar_border_thickness when arranging containers?. Changing the border thickness and the padding should move containers on screen, right?. Containers themselves also change when you have nested tabbed/stacked containers.\nIn any case, arrange_* should be updated. We're probably hardcoding values in there.. Just checked, container_titlebar_height is used. It uses your new config field. It seems titlebar_border_thickness is included in the padding. Looks good!. Is it possible to set this to be a pointer to a function instead?\nc\ntypedef void (*ipc_json_descriptor)(struct sway_node *, json_object *);. The one-char difference between ipc_json_descriptor and ipc_json_descriptors is confusing. Can we add a _map suffix or something?. Ditto\nc\ntypedef json_object *(*ipc_handler)(struct ipc_client *client, char *data);. Style: 80-char limit. This leaks the value returned by escape_title. Maybe we should move this to append_prop?. We could make buffer a const char* and stop free-ing it in this function.. Style: no space between * and variable name.. assert(false) would be better. Good catch. Since it's defined twice with the same value the compiler didn't complain. Fixed!. Can we add // output-buffer-local comments for those two?. Derp. We have two objects: the wl_surface itself and the wl_subsurface. This listener is listening on the subsurface destroy event.\nDestructors remove all listeners, so we should be fine if one is called before the other.. Can we use strlen instead of hardcoding the string length?. Maybe we can use bools here?. We should probably break here. What happens if this is not executed from the config, e.g. via swaymsg?. Shouldn't be 4 arguments at most here?. We don't want to send the terminating NULL byte.\nNitpick: const char thing[] = \u2026 is better than const char *thing = \u2026.. <amount>|<horizontal> <vertical>|<top> <right> <bottom> <left>\n1                     2                3       4        5. Ah, I see. Maybe we can put spaces around | to make it clearer (I thought it was <amount>|<horizontal> followed by vertical>|<top> \u2026).\nAnd yeah, \"all\" would be better.. Need to free this. Also, when computing the length it'd probably be better to use snprintf's return value instead of strlen.. No need to strdup here -- new_output_config takes a const char *.. This can be size_t. Need to add free(line) here. ++cmdlist?. Don't define both, they'll cause issues because _XOPEN_SOURCE defines implicitly _POSIX_C_SOURCE. free(line). Style: missing space. Can we move these lines to line 309, since we always to the same thing for all if branches?. Isn't this done already by get_output_config's caller? Otherwise the wildcard config wouldn't be merged in case oc_{name,id} is not NULL.. Hmm, I'm not sure why there's a need for a special case here.\nThere are three cases:\n\nThere's no output config, no wildcard config: need to use the default one as is\nThere's no output config, a wildcard config: need to use the default config with the wildcard config merged on top\nThere's an output config: need to use the default config, merge the wildcard config on top if any, and after that merge the output config on top\n\nSo I think get_output_config should always search for a wildcard config when reloading on line 311.. Hmm, I see. Thanks for the explanation.. It'd be better to damage the whole surface with wl_surface_damage_buffer since we're updating it.. Ah, we probably need to bump wl_compositor version to 4.. I think it's important to reset output->bg_pid here in case the output is enabled again.. Can clients still hide the cursor by setting a NULL image? (e.g. mpv does this). I'm not a fan of not specifying the image and expect this function to pick cursor->image_surface instead of hiding the cursor. Can't we just make the caller pick cursor->image_surface?. Maybe we could replace output_by_{name,identifier} by a single function? Don't know if we use one without the other somewhere.. I think we could change these checks to be surface->role == WLR_XDG_SURFACE_ROLE_TOPLEVEL.. Can we have #defines for those special values?. Maybe we could add a reference to libinput debug-events here, to get event code names?. In i3, this is an integer, not a boolean.. Extra space here. Missing one indentation level. Extra indentation level. Could this be a seat command instead?. We don't use relative #include directives. Instead, config.h should work.. Style: we use tabs, not spaces. Are double newlines necessary in code blocks?. Eh, I see.. It seems like sc is not free'd.. Is this a cairo bug?. Style: missing brackets. \"the top x-pos\"\nNo need for italic for \"bottom\". \"HiDPI isn't supported with Xwayland clients\" is probably a better way to phrase this. Could jq be used instead of this sed?. My bad, s/top/left/. Style: can we replace this with goto-based error handling?. This should be a bool. Eh, what is this cast?. Oh, my bad, mixed with the dest of the function above.. Missing goto here. Maybe add a warning like \"swayidle will block until the command finishes\".. Okay, this is fine.. You can use cairo_save instead.. Can we move this check on line 87?. Indeed, please do. Maybe we could use something else instead of \"0\", like \"disable\"? Or are you worried about name collisions with event code names?. Style: I think we don't hit the 80 char limit if we put this on one line. This value is outside of the enum. The return type should be changed to uint32_t.. Using enum thing with values outside of the enum is dangerous because switch statements might forget some cases. Bitfields are a special case of this. So yeah, everything should be changed if necessary.. Style: we use two tabs when indenting multi-line conditions. Can you add one more?. This is an external dependency, so angle brackets should be used (#include <libtouch.h>).. snprintf returns the number of chars printed, excluding the terminating NULL byte. This bug was there before, but we need to add + 1 here.. Again, a bug that was here before. execl only returns if it fails. We should log the error (wlr_log_errno) and return false in this case.. The stack size on musl in 80K. We should be careful not to allocate too-large objects on the stack. 16K seems kind of okay considering there are not nested calls to these functions, but anything larger would be too large.. Where it makes sense, yes. It may not make sense everywhere though.. It has been increased because some strings were truncated. We may just want to use dynamic allocation depending on the length of the string in this case.. Fine by me. line[nret - 1] always points to the terminating NULL-byte.. Oh, you're right, sorry. I read \"including the delimiter\" from the POSIX page and thought it was \"including the terminating NULL character\".. TBH I don't think limiting to MAX_CHARS is necessary.. Yeah, we don't do this elsewhere, let's not do it here.. Not a fan of this.. I'd prefer something like /build-* instead.. I think \"[0, max[\" is correct.\nUnrelated to this PR: I wonder why it's a function actually? Isn't ((i % max) + max) % max the same as i % max?. % is the modulus operator\u2026. Nitpick: I prefer to use \"length\" (or \"len\") to mean the return value of strlen (aka without the terminating NULL byte) and \"size\" to mean the value passed to malloc et al (aka including the terminating NULL byte).. Can we check against root.noop_output->name instead? I'm worried about someone using the noop backend for tests and running into this.. These could be L_* instead. SWAY_LAST is not a very good name.. Please use tabs. Style: bad indent here. focus can be NULL. Also, focus can be a workspace, so we should check its type too.. cursor->active_constraint needs to be unset too. It's probably better to call sway_cursor_constrain(NULL).. This can be static, and be set in sway_cursor_constrain near wl_signal_add. Makes code easier to follow.. Don't multiply by 1000, wlr_relative_pointer_manager_v1_send_relative_motion expects milliseconds too.. -1, pattern could be e.g. ./`hostname`.conf or ./*.conf.\nInstead, we should check for any load_include_config error on line 577.. I think we also need to restore the CWD here. An approach like this would probably work:\n```c\nbool success = true;\nfor (\u2026) {\n    success = load_include_config(\u2026);\n    if (!success) {\n        goto out;\n    }\n}\nout:\nfree(\u2026);\nchdir(\u2026); // TODO: error handling\nreturn success;\n``\n. Ah, right. Could you fix this one as well?. I'd prefer to drop the/etc/shellspart, it simplifies the code.. Yeah, but we assume the environment from which we're started is safe. If it's not the case, much more nasty things could be done, e.g. viaLD_PRELOADorPATH.. Style:char *. This should besize_t. Typo: arguments. Not a fan of returningerrnohere. It spec'ed as anintso it could be set to the error value 256, which can wrap-around when converted to an exit code. Instead, we can returnEXIT_FAILUREand change thefprintfcalls to also printstrerror(errno).. This stops confinings{x,y}..wlr_region_confinewill movesx.syinto the constrained region. We need to usesx_confined,sy_confinedsomehow. We also need to adddx,dyto the cursor position, but adding them tosx,syin thecursor_send_pointer_motionseems wrong anyway. We probably need to adddx,dyto the current cursor position earlier.. Oh, you're right. Forgotwlr_cursor_move` was doing all the magic.\nWe should probably add dx,dy in the first node_at_coords call right?. This could be removed. Okay, that's probably good enough for now.. What about non-wildcard configs?. Ah, I see. Instead, we could just have a 12-byte char array on the stack.. Can we use snprintf here, just in case?. Need to release wl_touch in case the seat looses the capability (just like the pointer, see https://github.com/swaywm/sway/pull/3711/files#diff-00a64d3193d21f96087133944068ca3eR393).. This can be const. This can be ssize_t. I'm not sure I get how this condition works. Why use a modulo?. We generally call functions that create things with the _create suffix, and those which destroy things with the _destroy suffix.. The XKB_DEFAULT_LAYOUT env variable is deprecated. Also, what about xkb options?\nCan't we just reference use the first xkb layout we create from the config instead? Why create another one?. Why not use input_config->xkb_layout directly?. Are all output_get_active_workspace callers expecting a NULL return value?. Missing if body?. Can this be executed outside of a command handler?. This should probably be an assertion too. Should click_region != binding->flags be a bitwise operation instead?. c\nif (abs(progress) > 10)\n?. Well I still don't understand it.. Style: case at the same indent level as switch. Please don't add default cases, the compiler won't tell you where your code needs an update if a new enum member is added. Instead, add assert(false) after the switch.. Don't you need to damage the whole output here?. Damn, fixed. -1. It's better to enter the error condition if something very bad happens, like setuid returning 42. ~~Additionally, the spec says that if setuid fails, it must return -1, but doesn't say that if setuid succeeds, it should return 0.~~. Yeah, sorry, skipped the important bit.. Eh?. Can you replace all exit calls?. Any bad consequences of doing this?. Instead of this, you can use struct initializers:\nc\nstruct xkb_rule_names rules = {0};. Can this fill a pointer to a struct xkb_rule_names instead of returning it?. = {} creates an uninitialized value. Use = {0} instead.. Bump?. Doesn't content_x change anyway in this case?. Not a fan of this. This casts a size_t into an int. (I'm not even sure the cast happens after the subtraction). We need to set CLOEXEC in the compositor process, but unset it in the child process. So this is really needed.. ",
    "ascent12": "This is a discussion for the sway team, and has no bearing on end users. The opinions of those who don't have some stake in sway/wlroots aren't helpful at all.. >I appreciate this is a political issue more than a technical one\nThere are technical aspects too.\n- As far as I understand it, the rendering model of EGLStreams is very different from what we have, meaning it is certainly not trivial to add support.\n- It's another code path that we'd have to add, making the code significantly more complicated.\n- EGLStreams is unsurprisingly tied to EGL, which means that it does not work with Vulkan.\n- It goes against our policy of writing any driver-specific code (even for open-source drivers), due to the maintenance and testing costs of doing so.\n\nDoes the WSI interface provide an alternate buffer path or is it still incomplete without GBM or EGLStreams?\n\nVulkan does not have a WSI for GBM nor EGLStreams. The lack of \"native GBM\" support is one of the main reasons I'm dropping the use of the Vulkan WSI or EGL platforms and handling the low-level buffers ourselves via GBM. It'll make the (eventual) Vulkan and OpenGL code much more consistent with each other, and well as make the DRM backend more consistent with the other backends.\nIt's all about reducing the different number of code paths, so everything is easier to maintain and test. EGLStreams have no place in this goal.\nNvidia was talking up some GBM-replacement called liballocator a while ago, and I'm not opposed to changing to this. However, it appears they have lost interest and the repository hasn't been touched for quite a while.\n\nIntel's support for open source is far better than AMD's\n\nWhile Intel's driver is still the most high-quality, AMD's open-source driver has improved significantly over the last several years (since amdgpu). Basically, their open-source driver is great now, and is perfectly usable.. With the new (now deleted) comment, I'm going to swoop back in with some other arguments, now that I've heard some more points from people much smarter than myself.\n\nEGLStreams completely breaks the Wayland rendering model and does not provide the atomicity guarantees that Wayland was explicitly designed around. You can only get the latest buffer, and not deliberately hold onto buffers longer if needed, without doing stupid shit like copying it. I've heard of there being inherent deadlocks with EGLStreams/Wayland, but I don't know of the exact technical details of it.\nEGLStreams removes the possibility for direct scan-out and overlay planes to be supported. When you configure a stream, you cannot change it without tearing the whole thing down again. When you create a stream to a GL texture, you cannot migrate it over to a DRM/KMS plane.\nEGLStreams does not allow for technologies such as Pipewire to work.\n\nThese are the main arguments I have heard as to why EGLStreams were not accepted into Weston, and these are really good arguments. EGLStreams are straight up broken, and the existing Wayland compositors that support it just choose to ignore the issues.\nThere are overwhelming technical and non-technical arguments as to why we are not going to support it. Face it, we are never going to support them. There is absolutely no point bringing it up; you are not going to change our minds.. @soulofmischief Using software cursors comes with a noticeable input lag.\nI'd highly recommend you upgrade to the sway 1.0-beta with wlroots; 0.15 is not supported any more.. @lofenyy If you're serious about trying to do this, you should join #sway-devel.\nThis task would require a serious amount of work, though.. I can confirm that sway (with wlroots) now starts perfectly fine with GDM without requiring any extra configuration.\nThis is only when using the logind wlr_session backend; the direct wlr_session does not work. Although this is not something I really care about, since GDM has a logind dependency anyway.. I've noticed that this is still an issue, even for unscaled outputs. With scale=1, when you have 10 workspaces open, clicking on the right half of '9' will select '10'.\nI suspect that the 1px border between buttons is not being accounted for when working out which button has been clicked.. I managed to reproduce the same issue after running it in a loop for about 10 minutes or so, also from the archlinux community version.\nUsing\n```bash\n!/bin/bash\ni=0\nwhile true; do\n    echo \"$i\"\n    swaymsg -t get_tree > /dev/null\n    ((i++))\ndone\nit freezes at 989, but does not cause any spike in CPU usage for me.\nAfter trying to run it again:\nUnable to accept IPC client connection: Too many open files\n```\nis spammed in sway's output.\nI tried with the master branch as well, and the same thing happens.. That fixes it, but I think the real issue is that client->fd is being set to -1 before the call to ipc_client_disconnect, so the cleanup functions in there aren't being called properly.. You should probably be using _Exit() instead of exit() when exiting from a child.. > I don't think we lose most of the benefits this PR comes with if we put the data buffer on the heap, do we?\n\nPutting the buffer on the heap also fixes this. It also makes sizeof(list_t) not misleading, which I prefer (I'm not keen on dynamically sized structs in general).\n\nI was REALLY just trying to optimise the crap out of the cache by removing as much indirection as I could. Using a heap buffer would remove the alignof requirement, and remove some of drawbacks. However, from my (still very basic) testing, this extra layer of indirection is about 25% slower than this implementation. It depends how far you want to go for the sake of speed.\n\nNope.\nFTR you can (and we already do in many places) just write a for loop yourself to avoid making the extra function.\n\nWith this new implementation, writing such a loop would be a much more of a hassle, hence the macro.\n\nAlso, the build failed.\n\nI know. The code hasn't been updated to use this list yet. This PR isn't ready to be accepted.. Also, I should note that for my testing, I've been filling the list with a million ints and accessing them randomly. This may not reflect on the real world cases that the lists are used for in sway, but it's something.. >I won't sacrifice convenience and simplicity to fix a non-issue.\nYeah, that's good point. I just adapted this from some toy code I was trying to make as fast as possible (just to see how far I could get it to go).\nI'll change it to a heap allocated buffer implementation.. @SirCmpwn \nOk, the implementation has changed.. >Will merge once everything has been updated to use it correctly.\nSweet. I've gotten started, but it's more gargantuan of a task than I would thought it would be. It turns out there are a lot of cases where it's not as simple as changing a function call, and requires restructuring some code.\nI'm also going to be busy in the near future, so it might be a while before it gets finished.. I've changed the old usage of list_t to the new implementation.\nDue to the sheer amount of code of code I changed, and the fact I don't understand a lot of it very well, the chance that I've introduced bugs is pretty high.\nI've done basic testing to make sure sway itself works, but I haven't testing all of the features, so there may be bugs and crashes lurking around. This code probably needs some pretty strict review and testing before it gets merged. Some help with that would be nice.\nI also added some new functions to the new API, to reduce some of the extremely cast-heavy code when working with lists of pointers (which is all of them at the moment).\nI haven't updated a lot of the code to use all of these new features. E.g. The types in the lists haven't changed, the \"capacity\" argument isn't being taken advantage of anywhere.\nThere is just far too much for me to do. Hopefully over time as the code gets updated, they can be changed to take advantage of the new features.\nOne particular area of attention is the bsearch/lsearch functions. The old list_seq_find took functions that are incompatible with bearch (cmp_to/key was passed second), and bsearch gives you pointers to pointers. The lsearch API was changed to match bsearch, as they're supposed to be drop in replacements for each other. I've tried to modify some of the code to fit the new API, but it's pretty likely I've missed some or screwed it up. I don't even know if having bsearch and possibly introducing all of these potentially buggy changes is worth it. It might not be the worst idea to remove this functionality and just keep the old API for this.. I've removed bsearch and changed the lsearch callback interface to match the old one.\nIt just becomes a mess of pointers to pointers trying to follow bsearch's interface.. After talking to @SirCmpwn about this, we've decided that this PR has too much potential to introduce bugs without enough payoff.\nThis PR ended up being a lot more work than I expected it to be, and I really don't have the motivation to try and iron out all of the very subtle bugs this may have caused.. >There is already some effort to extend sway development into a separate library and that is wlroots.\nwlroots is more focused on handling a lot of the details like displaying things to a monitor, input, and the like. It's not going to handle any window management features, which is supposed to allow a lot more flexibility for the compositors and what they can do. I think @Armael's talking more about window-manager specific stuff.. No. The xf86-video-* are Xorg drivers. Just having mesa installed should be enough.. This looks like a WLC issue. Can you reproduce this with other WLC compositors? (orbment, way-cooler, etc.). A debug log from when this happens would be helpful.\nSome laptop GPUs are pretty limited in the number of monitors they can use at a given time (sometimes it's as low as 2), so this may be the issue. Plugging in a 3rd monitor means you've run out of GPU resources, and WLC disables another monitor so it can get the new one to work.\nIt might also be related to the dock itself. Most newer laptop docks use DisplayPort MST (multi-stream transport) for the connections to the monitor. It requires a couple of things in software to handle it properly (although I don't exactly know what; I don't have any MST capable hardware), and I'm pretty sure WLC doesn't do those things.\nI'm just speculating based on your description, though. More information would be helpful.. Yeah, seeing if it breaks on wlroots would be really helpful. It would show if it's just a WLC issue.\nI've also spend a lot of effort trying to get hotplugging as good as I can, so I would really like to see tests for more exotic use-cases.\nDP MST is expected to be broken, though.. > Can you file a wlroots ticket with what you know about DP MST support?\nhttps://github.com/SirCmpwn/wlroots/issues/130. 08/31/17 12:20:49 - [main.c:50] [wlc] Failed to page flip: No space left on device\nIt'll definitely be related to that. I'm not really what it means when a page flip returns this error, though.. This is supported in wlroots, so when sway eventually gets ported over to that, rotation will be supported.. This is a WLC issue, and WLC doesn't support 10 bit colours.. This is related to #541, which has a bounty on it.. I agree that setting it on a per-file base is pretty pointless.\nIt's fully expected that POSIX.1-2008 is supported. Having it defined per-file isn't going to change anything.\nIf it removes a lot of clutter and makes it easier for other platforms, it's even more reason to put it in the build system.. Yes, I'm aware that it's a deliberate design decision, but I think it's a pointless one.\nIt simply adds boilerplate and people needing to worry about POSIX standard versions for absolutely no advantage.. I am aware of a somewhat similar artifact that I am personally affected by, but I haven't seem any other reports of it. The symptoms aren't exactly the same, as it can happen with more than just the background colour and doesn't just happen on the background change and can even persist.\nI was hoping like hell https://www.phoronix.com/scan.php?page=news_item&px=AMDGPU-DC-Polaris-Corrupt-Fix would be the issue (which is why I asked), but I haven't verified it yet.\nI'm not 100% sure if what you're talking about is caused by the same issue (meaning it's not some Polaris-related bug), but it's certainly likely.. I think this should probably be moved over to wlroots itself.. There is a 'version' argument to project (which I guess is going to be 1.0.0 for the wlroots branch), and you can access it later with meson.project_version().\nI think it makes sense to just use that in the absence of git information.. This is not a bug. That's just how pkg-config works.. If wlroots is compiled with libcap enabled, it will only ask for CAP_SYS_ADMIN instead of root. That's all of the elevated privileges you actually need.\nYou'll also need access to /dev/dri/card, /dev/input/event and /dev/tty*, but you can get that by adding your user to the appropriate groups.\nAnyway, the actual bug here is that sway is dropping permissions too early, before we've actually forked to keep the privileges.. This is more of a wlroots problem.\nIt's been discussed briefly, but nothing has been decided yet.. Wait for wlroots\u2122.\nNon-logind TTY switching should work then.. It's probably not worth bothering.\nYou'd normally consider errno useless after any function you call.. Wouldn't this require swaylock to have access to /etc/shadow?\nIt's probably not something that you'd want to get into.. Looks good to me.\nThis doesn't have anything to do with your code, but right above it, I'm seeing that it's trying to return -1 on failure in a function returning a bool, which is definitely wrong.. My local wlroots was checked out at swaywm/wlroots@7efd9885b65d0115e30f2253a30f165c12a07d2a, which is after that PR was merged. I'll admit that there is a possibility that this isn't the version I actually have installed.\nI'll make absolutely sure I'm not on an old version, and see if it randomly happens again.. I have some problems with the overall design of this PR.\nI really don't like that what is effectively a normal client (swayidle) is launching what should be a privileged client (a lockscreen). This just doesn't work from a security perspective.\nA lockscreen really should be launched by the compositor itself in a special way, so that it can gain access to special protocols, although this type of filtering has not been implemented yet. Otherwise we're just going allow malicious \"normal\" clients to steal input and all sorts of nonsense like that, and basically bring back the problems X11 has.\nI would personally prefer to see a DPMS option which would just do screen-blanking after so many minutes, just like it works for basically everything else. Having to exec swayidle in your config just seems extremely weird.. I don't see the value of this being a separate process. It's not like we're forking to keep privileged files open or anything like that.\nTo me, it just seems like a hack so you can use that KDE idle protocol as a client.. It's not like doing this kind of stuff is even a hard problem in the compositor itself.\n```c\ndim_source = wl_event_loop_add_timer(ev, dim_screen, data);\ndpms_source = wl_event_loop_add_timer(ev, screen_off, data);\nsuspend_source = wl_event_loop_add_timer(ev, suspend, data);\n// In input handling function\nwl_event_source_timer_update(dim_source, 2 * 60 * 1000);\nwl_event_source_timer_update(dpms_source, 5 * 60 * 1000);\nwl_event_source_timer_update(suspend_source, 30 * 60 * 1000);\n```\nOr something extremely similar to that.\nAll this extra crap with another process and trying to be reusable is massively over-designing the solution.. The numbers were just an example. It would obviously be something configurable with normal config options.. I don't know why you're trying to write everybody else's compositors for them.\nIf it's really supposed to be shared like that, it should exist in wlroots.. This whole logind thing just screams that it should be implemented in wlroots, not here. wlr_session was designed to hide these systemd vs whatever else differences, and this whole business is pretty useless without the DRM backend anyway, since we wouldn't be the session owner.\nIn terms of the external daemon, I just don't see the value in the slightest. What \"complex idle behaviour\" are you even talking about? What is someone going to do beyond \"dim, lock, blank\"? The timings might be different, but that's simple configuration.\nAnything beyond that is configuration to the point of absurdity.\nAnd as I said in the other issue, this is not a hard problem. The bulk of this PR is very simple. I don't see why you're trying to solve such simple problems for other compositors, and in the wrong place to begin with (i.e. not wlroots).. From https://i3wm.org/docs/userguide.html#_i3bar_command, it specifically mentions going through sh -c.\nI think all you need to do is call setsid() after the fork, and in terminate_swaybar negate the pid in kill, so it targets the whole process group.\nThis is what i3 does.. Actually, after looking it up, it may be more appropriate to call setpgid(0, 0) instead of setsid().. We aren't using CMake, though.... This is a known issue with 0.15. Sway 1.0-alpha has done a lot to make the CPU usage significantly lower.. >Escaping now works properly\nWhat's the i3 behaviour for this? Having no escaping is good for writing regexes, so you're not doing things like `\\\\W'.. Can you put that justification for why it's 17 in a comment?. Yeah. I've run into this recently too. I was sitting on an old version for awhile, so I didn't notice it straight away.\nSpecifically launching things from dmenu is what's causing the crash. It doesn't happen when opening something from a hotkey or a terminal.\nI've tried both Nautilus and Firefox, so it seems to affect both Wayland native and Xwayland programs.\nHere is a captured stack trace:\n```\n0  0x00007ff5c9fc686b in raise () at /usr/lib/libc.so.6\n1  0x000055a51a1b9338 in _sway_assert (condition=false, format=0x55a51a1c2c00 \"[%s:%d] %s:container_view_create called with NULL sibling/parent\") at ../common/log.c:27\n2  0x000055a51a1b1d6b in container_view_create (sibling=0x0, sway_view=0x55a51c50d350) at ../sway/tree/container.c:341\n3  0x000055a51a1b6522 in view_map (view=0x55a51c50d350, wlr_surface=0x55a51c4ee590) at ../sway/tree/view.c:377\n4  0x000055a51a19ccfb in handle_map (listener=0x55a51c50d4c8, data=0x55a51c50d150) at ../sway/desktop/xwayland.c:268\n5  0x00007ff5ca801095 in wlr_signal_emit_safe (signal=0x55a51c50d2a0, data=0x55a51c50d150) at ../util/signal.c:29\n6  0x00007ff5ca7c0f0f in handle_surface_commit (wlr_surface=0x55a51c4ee590, role_data=0x55a51c50d150) at ../xwayland/xwm.c:633\n7  0x00007ff5ca7f302a in surface_commit_pending (surface=0x55a51c4ee590) at ../types/wlr_surface.c:432\n8  0x00007ff5ca7f32ef in surface_commit (client=0x55a51c1164f0, resource=0x55a51c4de060) at ../types/wlr_surface.c:516\n9  0x00007ff5c79861c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n10 0x00007ff5c7985c2a in ffi_call () at /usr/lib/libffi.so.6\n11 0x00007ff5caa337fd in  () at /usr/lib/libwayland-server.so.0\n12 0x00007ff5caa2ff79 in  () at /usr/lib/libwayland-server.so.0\n13 0x00007ff5caa319b2 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n14 0x00007ff5caa3014c in wl_display_run () at /usr/lib/libwayland-server.so.0\n15 0x000055a51a18ee04 in server_run (server=0x55a51a3cd4a0 ) at ../sway/server.c:145\n16 0x000055a51a18e6ad in main (argc=2, argv=0x7fff39df5c88) at ../sway/main.c:418\n```. If I'm not mistaken, makepkg will strip symbols from all of the binaries it will generate.\nIf you build it straight from git with the default options, it will have debugging symbols intact.\nI think makepkg can be configured to not strip binaries, but I'm not sure.. Oddly enough, opening X11 in another VT seems to affect it.. I managed to reproduce this as well by going ham for a while. Having a keyboard with a customisable polling rate makes this a bit easier. Multiple monitors as well.\nExtra bits\n```(gdb) f 6\n6  0x000055acf58d4322 in render_frame (surface=0x55acf665c1f0) at ../swaylock/render.c:155\n155 in ../swaylock/render.c\n(gdb) print surface\n$2 = {image = 0x55acf6654750, state = 0x55acf5ada760 , output = 0x55acf6652580, surface = 0x55acf665c2b0, layer_surface = 0x55acf665c320, buffers = {{\n      buffer = 0x0, surface = 0x0, cairo = 0x0, pango = 0x0, width = 0, height = 0, busy = false}, {buffer = 0x55acf665cbb0, surface = 0x55acf665e470, \n      cairo = 0x55acf665cd10, pango = 0x55acf6642860, width = 1200, height = 1920, busy = false}}, current_buffer = 0x55acf665c248, width = 1200, \n  height = 1920, scale = 1, link = {prev = 0x55acf5ada788 , next = 0x55acf6652510}}\n(gdb) info locals\nstate = 0x55acf5ada760 \nbuffer_width = 1200\nbuffer_height = 1920\ncairo = 0x55acf665cd10\narc_radius = 50\narc_thickness = 10\ntype_indicator_border_thickness = 0.0245436933\n(gdb) print state\n$4 = {display = 0x55acf6654250, compositor = 0x55acf665c6e0, layer_shell = 0x55acf665c760, input_inhibit_manager = 0x55acf665c0d0, shm = 0x55acf6654700, \n  surfaces = {prev = 0x55acf6652510, next = 0x55acf665c290}, args = {color = 4294967295, mode = BACKGROUND_MODE_FILL, show_indicator = true}, password = {\n    len = 30, \n    buffer = \"j\", 'k' , \"ssssszllllllllbbbv\\000bzxcv,mnzbxcv,mnbzxcv,mnbzxcv,mnzbxcv,mnzbxcv,mnzbxcv,mnzbxcv,mnzbxcvm,nbzxc,mvnbz,xmcnvbnmcx,bzvmnxcbvnxcm,vbxncm,vm,zxcbcvnmzxcbvnm,zxcmvnbx,zmncvb,zxmncvbzxm,ncv,mnzx\"...}, xkb = {modifiers = 0, caps_lock = false, state = 0x55acf66af980, \n    context = 0x55acf66515c0, keymap = 0x55acf6663ee0, masks = {0, 0, 0, 0, 0, 0, 0, 0}}, auth_state = AUTH_STATE_INPUT, run_display = true}\n```. This also brings up a good point. If sway detects that swaylock (or whatever locking process is used) didn't exit cleanly, it should try and recreate it, so we don't just end up giving the a malicious user access to the session.. >Should the most recently created container have the same gaps as its sibling?\nIt's probably best to just see what the i3-gaps behaviour is.. Floating has not been merged to master yet.. >We might just want to disable this stupid warning.\nAgreed. It's generally pretty annoying and useless.\nAdd -Wno-format-truncation while you're at it too (snprintf version of this warning).\n\nI've been changing a lot of strncpy to snprintf due to it recently\n\n:+1: \nsnprintf is by far a better function than str(n)cat/str(n)cpy, even when not talking about this warning.. With this here, how much effort would it be to implement what was discussed in https://github.com/swaywm/wlroots/issues/479?. >I think it belongs to another PR\nYeah probably. I was just thinking this PR is somewhat related to that goal.. I'd like to note that starting an interactive debugger on the DRM backend is just going to cause issues. Due to the way the DRM rendering loop inherently works, pausing it can really mess it up, and if you're unlucky, it can completely break your session.\nAs @emersion says, it's generally better to rely on coredumps.. Multi-GPU support is supposed to be supported (i.e. it used to work), but is currently broken, waiting on myself to fix it. I've been dragging my feet a bit, just due to how annoying it is to test. It's something I hope to get around to doing before sway 1.0 is released, but it depends if I can muster up the time and motivation to do it.\n\nwith full respect to the complexities involved, and wishing I could help you but my C is pretty weak\n\nYeah, normally we would encourage people to try and have a go at fixing bugs themselves, but this is way beyond what a new contributor could casually fix.\nIt's actually a wlroots problem instead of a sway problem, and is a covered by https://github.com/swaywm/wlroots/issues/934, so I'll just close this ticket as a duplicate of that.. >2018-07-12 23:24:34 - [backend/drm/drm.c:489] Failed to get DRM encoder\nSomeone else mentioned also getting this message not too long ago, but with amdgpu.\nI think this may be a driver issue. If it's not reporting that the DP MST connector has any encoders associated with it, we can't figure out how we need to configure the display pipeline.\nJust to be sure, does weston work properly with your setup?. @DonnieWest It's probably worth squashing your commits, since they're basically all just fixups.. Just force push it here.. Looking at the git log, swaywm/wlroots@4ed6ee0a4d112711c3764b9b5d0d44ec916fb48a ends with 916fb48a.\nIt's possible that it's a coincidence, but the date looks about right. @SirCmpwn probably just copied the the short hash from the wrong side of the string.. I'm using X11 firefox and I still get it.. There was a discussion about this on IRC recently:\n<aminb> has anyone else noticed that putting a floating window in front of a tiled window of some applications causes sway to show the background image behind the floating window instead of showing the tilde application?\n<aminb> i haven't done any investigations but i've noticed this happen with firefox or emacs being tiled while putting a floating urxvt in front of them\n<minus> yes, noticed that too\n<minus> floating ontop of tabbed windows\n<ascent12> Does it happen consistently or just sometimes?\n<aminb> minus: ah so that's what it is: i indeed almost always tab my ff and emacs workspaces.  can confirm doesn't happen in normal tiling untabbed mode\n<aminb> ascent12: always happens with floating windows on tabbed workspaces, as minus mentioned\n<ryan-au> Which version of sway is this?\n<aminb> ryan-au: happens on latest master as of now (98ef29c) but i've only noticed it happen in the last week or two\n<aminb> i don't think it was present before that.  i may be wrong though\n<ascent12> Yeah, I can see tabbed containers messing up, but only if they cover the entire workspace.\n<ryan-au> I think it's not marking the workspace as dirty\n<aminb> huh. for what it's worth, when it happens, the entire workspace outside the window bounds can be used to drag-resize the floating window\n<aminb> (cursor shape also changes)\n<emersion> yeah, i've seen that too\n<emersion> i don't think it's a dirty issue\n<aminb> also happens in stacking mode (vertical \"tabs\")\n<ryan-au> The workspace's current state has a pointer to which child is focused, and if you float the focused tab child and the workspace isn't made dirty then it'll still point to the floating container and won't render the other tabs\n<emersion> oh\nBasically, this happens when the tabbed/stacked container covers the whole workspace.. An alternate solution is to use scatter/gather I/O to prevent misaligned accesses and byte-level copying in the first place.\n```c\nchar magic[sizeof(ipc_magic)];\nuint32_t data[2];\nstruct iovec iovec[2] = {\n    { .iov_base = magic, iov_len = sizeof(magic) },\n    { .iov_base = data, iov_len = sizeof(data) },\n};\nstruct msghdr msg = {\n    .msg_iov = iovec,\n    .msg_iovlen = 2,\n}\n...\nrecvmsg(socket_fd, &msg, 0);\n. An alternate solution is to use scatter/gather I/O to prevent misaligned accesses and byte-level copying in the first place.c\nchar magic[sizeof(ipc_magic)];\nuint32_t data[2];\nstruct iovec iovec[2] = {\n    { .iov_base = magic, iov_len = sizeof(magic) },\n    { .iov_base = data, iov_len = sizeof(data) },\n};\nstruct msghdr msg = {\n    .msg_iov = iovec,\n    .msg_iovlen = 2,\n}\n...\nrecvmsg(socket_fd, &msg, 0);\n```. >So as a new user of swarm I am confused what I should be using\nThere is not an entirely obvious answer to that right now.\nAt this point, sway 1.0 is literally an entirely different program than sway 0.15 (as in, basically all of the code has changed), so nobody really wants to support or even really think about 0.15. We're in a limbo of \"0.15 is too old\" but \"1.0 isn't released yet\".\nAs said in https://github.com/swaywm/sway/issues/1735#issuecomment-425046390, we want to get a real release out somewhat soon, and get people off of 0.15.\nThat stern warning is somewhat outdated (but not entirely). In general, sway 1.0 is very solid; I've been using it as my daily driver for ages now. Until there is a real release and people package it, you're going to need to compile it yourself.. >So as a new user of swarm I am confused what I should be using\nThere is not an entirely obvious answer to that right now.\nAt this point, sway 1.0 is literally an entirely different program than sway 0.15 (as in, basically all of the code has changed), so nobody really wants to support or even really think about 0.15. We're in a limbo of \"0.15 is too old\" but \"1.0 isn't released yet\".\nAs said in https://github.com/swaywm/sway/issues/1735#issuecomment-425046390, we want to get a real release out somewhat soon, and get people off of 0.15.\nThat stern warning is somewhat outdated (but not entirely). In general, sway 1.0 is very solid; I've been using it as my daily driver for ages now. Until there is a real release and people package it, you're going to need to compile it yourself.. >Warning: Proprietary Nvidia drivers are NOT supported. Use Nouveau.\nThe nvidia proprietary driver does not support the required interfaces for sway/wlroots to work.\nIn the off-chance you're using nvidiafb, that won't work either, since it's not a KMS driver.. >Warning: Proprietary Nvidia drivers are NOT supported. Use Nouveau.\nThe nvidia proprietary driver does not support the required interfaces for sway/wlroots to work.\nIn the off-chance you're using nvidiafb, that won't work either, since it's not a KMS driver.. Go bother Nvidia to support GBM then.. Go bother Nvidia to support GBM then.. We are capable of detecting the driver, but I am against adding any sort of driver specific code. I'd prefer a temporary environment variable or something to force legacy gamma if it ends up being an issue for people.. We are capable of detecting the driver, but I am against adding any sort of driver specific code. I'd prefer a temporary environment variable or something to force legacy gamma if it ends up being an issue for people.. I'm pretty sure a fix is required inside of the amdgpu kernel driver or otherwise show we're not using the gamma interface in the proper way.. I'm pretty sure a fix is required inside of the amdgpu kernel driver or otherwise show we're not using the gamma interface in the proper way.. That code basically calls right into the kernel, so that would be the component that may affect it.\nThat has nothing to do with X11 or mesa drivers.. That code basically calls right into the kernel, so that would be the component that may affect it.\nThat has nothing to do with X11 or mesa drivers.. We use a different naming scheme than Xorg, and just follow the same name that the kernel gives the devices.\nDP-1-3 implies that it's a DisplayPort MST connection.. We use a different naming scheme than Xorg, and just follow the same name that the kernel gives the devices.\nDP-1-3 implies that it's a DisplayPort MST connection.. Timerfd is a linux-specific feature, meaning this is going to break BSD support.. Timerfd is a linux-specific feature, meaning this is going to break BSD support.. : is the separator used between devices, just like the PATH environment variable.. : is the separator used between devices, just like the PATH environment variable.. @skaldesh Can you post the output of https://github.com/ascent12/drm_info?. @skaldesh Can you post the output of https://github.com/ascent12/drm_info?. >drmModeGetResources: Invalid argument\nHuh...\nPlease make absolutely sure you're using the nouveau kernel driver.. >drmModeGetResources: Invalid argument\nHuh...\nPlease make absolutely sure you're using the nouveau kernel driver.. Just for the record, the nvidia driver does not support the required interfaces for sway (wlroots specifically) to work.\nSince your laptop has those outputs going to that GPU, they will not work.. Just for the record, the nvidia driver does not support the required interfaces for sway (wlroots specifically) to work.\nSince your laptop has those outputs going to that GPU, they will not work.. >We should probably log the video driver in sway.log.\nWe normally do, but since drmModeGetResources failed, we don't get that far.. >We should probably log the video driver in sway.log.\nWe normally do, but since drmModeGetResources failed, we don't get that far.. @skaldesh The HDMI and other connectors go straight to your dGPU, not your iGPU. Unless the dGPU is in use (with the nouveau driver), there is nothing we can do about it.. @skaldesh The HDMI and other connectors go straight to your dGPU, not your iGPU. Unless the dGPU is in use (with the nouveau driver), there is nothing we can do about it.. You wouldn't even get as far as being able to see the swaynag notification if you were on Nvidia.. You wouldn't even get as far as being able to see the swaynag notification if you were on Nvidia.. I do agree that the way this is handled is incorrect. There is already logic inside wlroots for detecting the driver name of the GPU we're actually using: https://github.com/swaywm/wlroots/blob/master/backend/drm/backend.c#L149-L153.\nAny such checks belong there, instead of hackishly reading /proc/modules.. I do agree that the way this is handled is incorrect. There is already logic inside wlroots for detecting the driver name of the GPU we're actually using: https://github.com/swaywm/wlroots/blob/master/backend/drm/backend.c#L149-L153.\nAny such checks belong there, instead of hackishly reading /proc/modules.. I ran into a somewhat similar issue with swaybar ages ago where we weren't handling POLLNVAL/POLLHUP properly, causing the poll loop to spin extremely quickly, wasting 100% CPU.. I ran into a somewhat similar issue with swaybar ages ago where we weren't handling POLLNVAL/POLLHUP properly, causing the poll loop to spin extremely quickly, wasting 100% CPU.. A few of these are very X11 specific and wouldn't work in Wayland at all (e.g. DESKTOP, DOCK), but I suppose it's not particularly hard to just add more stuff to that if-else chain.. A few of these are very X11 specific and wouldn't work in Wayland at all (e.g. DESKTOP, DOCK), but I suppose it's not particularly hard to just add more stuff to that if-else chain.. An RDP backend like weston does it may also be viable, but I can't really say I've looked into it at all.. An RDP backend like weston does it may also be viable, but I can't really say I've looked into it at all.. Are we talking about logind seats or sway seats?\nIf it's the latter, I would argue that this would be the correct behaviour.. Are we talking about logind seats or sway seats?\nIf it's the latter, I would argue that this would be the correct behaviour.. Locking the screen locks the entire session, meaning that both seat0 and seat1 are now locked.\nI think it makes sense for either seat to unlock the session.\nThis stops seat0 from locking the screen and disallowing seat1 to continue doing whatever they're doing.\nIf we were talking about logind seats, it'd be different, but that's not the same kind of multiseat.\nI don't know what other developers think about this, though.. Locking the screen locks the entire session, meaning that both seat0 and seat1 are now locked.\nI think it makes sense for either seat to unlock the session.\nThis stops seat0 from locking the screen and disallowing seat1 to continue doing whatever they're doing.\nIf we were talking about logind seats, it'd be different, but that's not the same kind of multiseat.\nI don't know what other developers think about this, though.. >Use wl_event_loop_add_signal instead of signal\nI know that the clients are currently massively over-linked,  but do you really want a \"normal\" client depending on 'wayland-server'?. >Use wl_event_loop_add_signal instead of signal\nI know that the clients are currently massively over-linked,  but do you really want a \"normal\" client depending on 'wayland-server'?. Looking into this further, I think this now needs a more elaborate solution than what's here. Basically, we need to make sure we don't reap children from other places, such as a direct-session or xwayland in wlroots.\nThe most obvious way would be to create a process group and put all of the processes we want to watch in there. Then it becomes waitpid(-pgid, NULL, WNOHANG).\nIf we do file-descriptor handling too (instead of pids), then this basically turns into a service manager and possibly the foundation of privileged clients.. Looking into this further, I think this now needs a more elaborate solution than what's here. Basically, we need to make sure we don't reap children from other places, such as a direct-session or xwayland in wlroots.\nThe most obvious way would be to create a process group and put all of the processes we want to watch in there. Then it becomes waitpid(-pgid, NULL, WNOHANG).\nIf we do file-descriptor handling too (instead of pids), then this basically turns into a service manager and possibly the foundation of privileged clients.. This is actually a wlroots issue.. This is actually a wlroots issue.. @milkey-mouse It's a simple fix, so I just opened a PR for it: https://github.com/swaywm/wlroots/pull/1571\nCan you confirm that it works for you?. @milkey-mouse It's a simple fix, so I just opened a PR for it: https://github.com/swaywm/wlroots/pull/1571\nCan you confirm that it works for you?. >ascent12's IPC library\nWhat? I don't have one of those. You must be thinking of someone else.. >ascent12's IPC library\nWhat? I don't have one of those. You must be thinking of someone else.. >I am not sure if this is a bug or feature request.\nIt's a bug. We try to match i3 behaviour as much as we can, and 'left' seems to work properly.. >I am not sure if this is a bug or feature request.\nIt's a bug. We try to match i3 behaviour as much as we can, and 'left' seems to work properly.. This unfortunately would make the config parser ambiguous, due to the fact that i3 decided to use #RRGGBB syntax for specifying colours.\nThere would require making a context-sensitive parser, which I'm sure nobody wants to do.. The computer scientist in me really hates this. It's such a subtle difference and leads to \"# \" becoming a token in the grammar (even if it's not implemented that way).\nI would either argue for leaving it alone, or breaking i3 compatibility and using a different syntax for colours.. The computer scientist in me really hates this. It's such a subtle difference and leads to \"# \" becoming a token in the grammar (even if it's not implemented that way).\nI would either argue for leaving it alone, or breaking i3 compatibility and using a different syntax for colours.. I think adding this as a config option and/or a command line option would be better than an environment variable.\nThe client is the one that reads WAYLAND_DISPLAY. We're supposed to be the ones setting it.. >So Wayland has nothing similar to \"window type\"?\nWayland has shells, which is \"kind-of\" like a window type, but not really the same thing in an X11 sense.. I think https://github.com/swaywm/wlroots/pull/1377 is a step towards this.. I'm not using Firefox nightly right now, so I haven't confirmed this, but I assume that firefox is opening these windows as new wayland surfaces. In wayland, the client has no control of how it's placed, and sway is just doing its default of putting it into the middle. We're not going to add client-specific hacks to try and fix things like this.\nI'd recommend using a notification daemon such as mako instead, which firefox can use, and will correctly place the notification.. >wlroots detects your output's subpixel orientation. It does so via DRM (drmModeConnector.subpixel).\nAlso note that a bunch of hardware doesn't report this to us, so it's often just \"unknown\".. This is one of the various DRM properties that the kernel provides us. That particular one is Intel specific, so we wouldn't add a specific API for it.\nHowever, I do want to add a way to set arbitrary DRM properties like you're doing with xrandr at some point. Support is required inside wlroots first, though.. I'm not actually sure if you can change properties if you're not the DRM master, and an external tool trying to force it off us isn't going to work, even with privileges,\nEven then, I don't really want external tools trying to change the state, causing the wlroots internal state to be incorrect and probably be racy as hell.. I think there should be a meson option to override this.. In wayland, clients are deliberately not given the ability to move the cursor anywhere.\nSo this feature is currently not possible, and I don't see a good reason to add it, especially since it opens up the possibility for the client to abuse this.. >I guess this would mean that not even wayland programs could move the mouse on your behalf?\nRight.\nIt is possible to add extensions to the wayland protocol to allow for things like this (e.g. one was added to allow pointer capture), but I doubt anybody would want to do that in this circumstance.. @manio: You definitely want to use logind. Our direct session is crap (I know: I wrote it).\nI'm going to guess that you're trying run sway as root or through an otherwise \"improper\" login session (e.g. using su or sudo). Make sure you're running sway without setuid or setcap, and log in as a normal user.\nOtherwise, something about your logind/dbus session is screwed up.. Right, we don't support xdg_foreign yet. Support needs to be added to wlroots before it can be added to sway.\nIt's nice to know of a client that actually uses it now, but I don't understand why gnome-music would have a hard dependency on it.. Actually, are you running gnome-music as a flatpak or in some sort of similar container thing?\nThat would explain why it requires it if you do.. I tried running gnome-music myself, and it also fails when run inside weston or with GDK_BACKEND=x11.\nI believe this is actually a problem with gnome-music instead of sway.\n$ GDK_BACKEND=x11 gnome-music\nTraceback (most recent call last):\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/application.py\", line 110, in do_activate\n    self._window = Window(self)\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/window.py\", line 96, in __init__\n    self._setup_view()\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/window.py\", line 153, in _setup_view\n    self.player = Player(self)\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/player.py\", line 531, in __init__\n    self._player = GstPlayer()\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/gstplayer.py\", line 77, in __init__\n    self._setup_replaygain()\n  File \"/usr/lib/python3.7/site-packages/gnomemusic/gstplayer.py\", line 101, in _setup_replaygain\n    self._filter_bin.add(self._rg_volume)\nTypeError: Argument 1 does not allow None as a value. This is not a sway/wlroots issue.\n\nerror: failed to resolve wl_drm_interface(): /usr/lib/libEGL_mesa.so.0: undefined symbol: wl_drm_interface. I'd start by making sure you're using a recent build of mpv (i.e. make sure you're not using an AUR package from ages ago), and your OpenGL and EGL libraries are installed correctly.\nBut we have nothing to do with these. Hardware decoding is not tied to anything we're doing.. @c-edw https://github.com/wayland-project/wayland-protocols/blob/master/unstable/input-method/input-method-unstable-v1.xml\n\nMore specifically, implement the wlroots type for the v2 that protocol in sway.. >While it's true that sizeof(char) will always be 1, I think it conveys more meaning to developers\nThe intent is already obvious from the context. sizeof(char) is unnecessary \"noise\" and usually comes off as a newbie mistake.. >Well, how does it work if 'xwayland' is set to 'auto', it's enabled in sway because 'xcb' is found but it's disabled in wlroots because some other dependency is not found?\nProbably. We should add some stuff (get_define) reading wlroots' config.h to make sure we're not linking against a wlroots with optional features compiled out.\nThat would also be the way to see if wlroots was compiled with libsystemd or libelogind.\n\nI'm not sure we want to protect against linking different ones at all costs.\n\nThe point is that it's a linker error, since you'd have multiple definitions of the same symbol.\n\nSway only uses these for the sd-bus lib, so I'd rather have a 'sd-bus-provider' option in sway than a 'logind-provider' one (a library might offer sd-bus without logind).\n\nYeah, logind-provider is not a good name here, but I can't really think of a good middle-ground name between the two.  It would be nice if they were the same option.\nIt's not like it's really that big of a deal, considering that it'd be rare for someone to have both libraries.. We could just guard this check with if wlroots.type_name() == 'internal' or (perhaps != 'pkgconfig') and not have to do most of that extra stuff.. With the xwayland option now being yielding, I don't think it's necessary to read it from the subproject.. Oh right, that is an issue. That makes sense.\nI'm not really a fan of making the subproject being preferred over the system dependency, though. I'd prefer it to be consistent with Meson's behaviour.. Instead of sway calling systemctl, you'd want to have it so systemd calls sway, like any other normal service.\nWeston has an incomplete example of it: https://gitlab.freedesktop.org/wayland/weston/merge_requests/39 which you could take inspiration from.\nBut I also agree that we probably don't need a unit file upstream.\nI don't know whether we want to add optional sd_notify support into sway, so that systemd is capable of knowing when sway has finished its startup and can order units after that. It'd be a trivially small amount of code, but it depends on whether you want any direct systemd things in the code.. This is called multiseat and is possible with systemd/logind. This is referring to a different multiseat than the wayland one, so be careful of the terminology. It'll work with more than just sway; anything that uses logind properly should work.\n\nUse a display manager. I tried this with GDM a while ago, which seemed to have issues with starting wayland sessions on the other seat (the option does not appear). Maybe it's fixed there now, or maybe another display manager will do it properly.\nUsing the loginctl command, assign your GPU and input devices you want to be on the other seat.\nYou can get all of the devices associated with the default seat (seat0) with loginctl seat-status seat0.\nThen identify which device is your GPU and new input devices, and attach them like loginctl attach seat1 /sys/path/to/device.\nThe display manager should appear on both GPUs/monitors as separate instances, and you should be able to log into them separately.\n\nMore info:\nhttps://www.freedesktop.org/wiki/Software/systemd/multiseat/\nhttps://github.com/swaywm/wlroots/pull/1063. I'm not opposed to -fmacro-prefix-map, since it's a compile option that can be tested for and doesn't affect the validity of our code. It'll still be standard uses of __FILE__ in the source code itself, which itself is rife with implementation-defined behaviour. I wouldn't consider it any worse than -Wno-unused-parameter.\nWorst case is that someone is using a weird/old compiler, and their log statements will be longer.. I have a suspicion that this is related to implicit synchronisation. Without going into too much technical detail, we sometimes end up blocking waiting for a client to finish drawing, and could possibly cause us to miss a frame on another output, making it stutter. I have a worst-case video file with mpv (10000x10000 pixels) that can cause extreme lag when it tries to play, even with quite a low CPU usage.\nThe somewhat new wp_linux_explicit_synchronization extension is an avenue for fixing this, as we could then guarantee that we never block on clients. This is something I plan to implement in wlroots.\nHowever, this is purely conjecture. I don't have any way to verify that this is the cause of the issue.. Send patches, not issues.. Without debugging symbols, that backtrace isn't useful.\nAlso, sway doesn't use any threads itself, and those would all come internally from your GPU driver, so they can be ignored.\nThere is also the possibility this is a libinput issue, because it would go through them before it reaches us. Does it work on another wayland compositor (e.g. weston)?. Nouveau isn't atomic by default, so it's more likely he's using legacy.\nFrequent uses of glFinish certainly could mean higher CPU usage.. This is more of a wlroots issue than a sway issue.\n\ngpu hotswap\n\nThis is planned, but not at the top of my priority list.\n\n\nnon native resolution\n\nNot yet supported, but shouldn't be hard to add.\n\nI actually had some code sitting on a branch somewhere implementing the width*height@rate -> mode part, but I couldn't be bothered hooking the rest of it up at the time. I should dig that up at some point.. >Note that we already have a wlroots function adding a custom mode to a DRM output.\nYeah, I meant hooking it up to wlr_output_set_custom_mode. Calculating the drmModeModeInfo yourself is somewhat non-trivial, and I don't want the user to have to resort to anything archaic like xfree86 modelines or something.. Right. The way for setting DPMS on atomic drivers is to set the \"ACTIVE\" property on the CRTC. In fact, it'll even fail if we try to set the legacy DPMS property if I recall correctly.\nSystemd should not be probing this state.. >What with this syntax?\nIt's a pointer to a VLA. The syntax seems a bit tricky and clever, but it really cleans up the other parts of the code. We can treat it like a normal array, where pointer arithmetic will work properly.\n\nAlso, why unsigned char over uint8_t?\n\nI don't think uint8_t really adds much here. It's all basically \"typeless\" data that we're not going to touch. \"unsigned char\" seems good enough for a byte type.\n\nmemcpy(&list->data[list->length], ...) should work the same, right?\n\nNo, because list->data is a void *, so we can't do pointer arithmetic. It would require casting to a char type and then doing the offsets yourself.. It's just so that if you use it inside a loop condition, the compiler won't keep pointlessly calling the function over and over again.. >you need the size to be 8 bits\nNot really. It's just making use of the fact that sizeof(char) is guaranteed to equal 1, and that every other type is guaranteed to be a multiple of char. Nothing actually relies on anything being 8 bits.. >sizeof measures in octets\nI don't want to be too deep into the semantics of C, as this is a pretty pointless debate, but C uses char as its definition of byte. sizeof says \"how many chars big is this\". It can be changed to uint8_t if you want, but I feel that it doesn't really convey any useful information to a reader, as there is nothing which relies on anything being 8 bits.\nI've always considered unsigned char to be the \"byte type\" in C, and the stdint types are for cases where you explicitly need a certain size, for some reason.. Whoops, I get I forgot to run my search-and-replace on the common code. Yeah, it's supposed to use the list_getp function.. These should be 1 << 0 and 1 << 1 if this is trying to be a bitmask.\nBut seeing as it's a tag for a tagged union, I don't think that's actually what you're going for, so there would be no reason for the weird << 0.. If you wanted to be \"careful\" with stack space, you can use vsnprintf(NULL, 0, fmt, args) to get the number of characters to fit the string and use a VLA.. Allocating a single uint32_t?. You could rid of the need for this by using dprintf instead.\nc\ndprintf(write_fd, \"%s\\n\", json_object_to_json_string(event_json));. I think an accompanying \"is_valid\" bool would be more appropriate.. What's with the leading underscore?. Yeah, it's a static function, so you don't need to worry about any name/linker collisions.\nI'll often do something similar to this when rewriting a function but reusing a name, just to get compiler errors for the old usages, and then remove it when I'm done.. Would it be possible to use mbrtoc32/c32rtomb from , instead of doing it ourselves?. They're standard C11 functions. I'm not certain, but they may introduce some locale-specific shit, though.. You shouldn't put a side effect in an assertion.. I think if read() ends up reading enough to fill the entire buffer, realloc would get called, and would provide the space for this null terminator.\nThe logic is not very obvious, though.. I think these are still supposed to be rendered, even if there is a fullscreen surface.. Wrong indentation.. This follows the semantics of poll. You get those events, even if you don't ask for them.\nThat's actually what's causing the issue.. Align cases with the switch.. Explicitly put (void) for the arguments.\nEmpty argument lists in prototypes have surprising results in C.. Superfluous log message.. This too.. You've still got messed up indentation here. There are an extra 3 spaces at the end.. Is it possible to get rid of these prototypes, or is this required for mutual recursion?. I personally don't like using prototypes when they're not necessary, and would reorder the functions to not need them.\nYou'd normally read a file from bottom to top anyway.\nI don't know how other people feel about this.. sizeof pointer.. path is not freed here.. Copied to a buffer that is immediately discarded (and leaked). You need to add path = tmp;.. Missing NULL check.. This could actually just be an iteration over src. Using c is unnecessary.. This doesn't actually affect anything, but the arguments are in the wrong order.. Very small point, but you should put an explicit (void) as the arguments for a prototype.\nAn empty argument list for prototypes has surprising results in C.. I may as well give the reason now, in case anyone stumbles on this comment again.\nAn empty argument list in a prototype is actually declaring a function with unspecified arguments, not no arguments.\nSo if you tried to call it like container_titlebar_height(100);, you wouldn't get a warning.. This prototype should read as static int read_double(const char *str, double *out). I'd also prefer that bool is used instead of int. It would actually be possible to just use static double read_double(const char *str) and use NaN as an invalid return, but it's not something that's important.. Same as my other point.. Indentation on this line is wrong. The style is a simple two tab indent.. I know this code is basically copied from somewhere else, but I really don't see the point of forcing this assignment to happen inside the conditional.\nc\nstruct cmd_results *error = checkarg(...);\nif (error) {\n    ...\n}\nworks fine and I would argue looks a lot cleaner.. This function overall has some pretty deep indentation, going up to 6 levels. It should be possible to make it a lot shallower by refactoring it and adding some early return statements.. I would agree with you more if we were talking about a functional language, or something expression-oriented like Rust. But in a purely imperative language like C, exiting as soon as possible is generally a lot cleaner and can make the logic of the code easier to understand.. This could be moved inside the while loop now.. The correct type is long for ftell.. I feel that getline from the standard library would be better for this, so you're not making so many allocations and then immediately freeing them.. const arguments. I'm really not a fan of strcat. Using snprintf would be a lot better.. You could just read errno for ERANGE further on instead of explicitly checking for 0.. c\nif (!c->gapped) {\n    wlr_log(L_DEBUG, \"Not adding gaps: %p\", c);\n    return;\n}\nThat  removes a layer of indentation from this very indent heavy function.. Same point as above.. 80 column limit.. Yeah, it would be possible to factor that out into an \"apply gaps\" function, where you pass in +gaps for add, and -gaps for remove.. A switch seems more appropriate than an if-else chain. You get better warnings for them (e.g. an enum value is not handled).. I think this would be more appropriate as a switch too, also for better warnings. The GAPS_OP_SET case would just need to be total = val.. These comments go over the 80 column limit (It's not a hard limit, but this is significantly over).\nThey should go on their own line, or even on the enum definition itself.. Incorrect . Incorrect . Wrong type in sizeof (even if they happen to be the same size).. No space after casts.. Incorrect s and incorrect indentation.. Incorrect s. (uint32_t *). Spaces around binary operators.. Incorrect indentation.. size_t is the standard type for representing sizes and array indices. I would consider the fact that list_t uses int to be a bug.\nwlroots uses uint32_t to represent protocol values, which really are 32 bit unsigned integers.. You can use NULL for uid and gid if you're not interested in their values:\nhttps://github.com/wayland-project/wayland/blob/0e6ac72288f884ba0321c285a65578492c706534/src/wayland-server.c#L563-L564. I think using a goto to break out of a nested loop is cleaner than this.. return json_object_get_boolean(success);. Yes. It's called a compound literal.. Minor point, but don't cast away the const here.. It would make sense to add a comment stating that.. >Also it should be a size_t, not an int.\n*printf returns an int and so it makes sense to leave it as it is. It really is splitting hairs, though.. Looking at the freebsd patches for libwayland, it will simply set the pid to 0, which won't break the logic of this loop; it just won't close the connection.\nwl_client_get_credentials has no return value. It's just a getter for values which are read right when the client connects.\nThe only other way I can think to track this is through the socket file descriptor. It would require us opening it ourselves and using WAYLAND_SOCKET, and would require a fair bit of reworking. Not to mention it doesn't work if a process wants multiple connections (do we want to allow that?).\nChecking for the pid seems like to most reliable way, at least for Linux.. NAN would be a better sentinel value than this.\nOr change the signature to bool parse_float(const char *value, float *ret).. Yeah, you just need to call\nc\nwl_surface_damage_buffer(pointer->cursor_surface, 0, 0, INT32_MAX, INT32_MAX);\nat some point before the wl_surface_commit.. Wouldn't it make more sense to not set CLOEXEC in the first place?. ",
    "taiyu-len": "done. i love sed.\n. i3 changes split mode, which is what this change does.\n. it should be fine now.\n. i get urxvt: can't open display :1, aborting.\nguess its what happens when running in x\n. thanks, that works.\n. getting rid of handler.c line 100 seems to work.\nwlc_view_focus(handle);\n. im guna try to move the wlc stuff from new_view into the handler,\nand then try to handle it by its type.\ni think i got it figured out.\n. nvm, still doesnt interact properly with hidden views.\nworking on that\n. in i3, dmenu doesnt return keyboard focus until it quits.\nthis makes it do the same in sway.\n. ill check, the only other example ive seen is one with UNMANAGED and OVERRIDE set, but its treated as unmanged in that case.\nfor example, the popups in firefox are that.\n. i put back the focus_view(focus_pointer()); though i havent been able to see the difference.\n. test popup in firefox is treated as unmanged and doesnt get focus. so that should already be fine.\n. yep, working on fixing it up.\n. fixed all that in #79, checks if floating_modifier is pressed, and sets dragging/resize state or sends key to client.\n. ill fix that. just going to push it in a moment.\n. the problem is the active_workspace = workspace; part, it shouldnt be there.\nthat is handled in set_focused_container and update_focus\nupdate_focus handles all cases where the focus for a container changes.\nwhich includes setting the active workspace.\ntheres also a small bug i noticed about switching outputs and active workspace, ill send a fix for that.\noh and as for why changing active_workspace is a bad thing, its because set_focused_container needs to know the previous workspace so it can handle fullscreen windows\n. problem with output not having focus set to its only child. fixed by making sure add_child sets focus when adding first child. 6dc1ae802bb8cf1c272dc48c68fb42e3d548e812\n. should  be fixed it was cause by output not having a focus set f:(nil))(h:2)Type:Output|\nthou i wasnt able to reproduce this even before the fix\n. done. i also fixed some problems in the man pages.\n. thats from whatever changes you were working on last night, i just left it alone.\nill just comment it out, while you can do whatever you were doing with it later.\n. it sums up the total width of child containers,\n(if a child container has width/height 0 it is given a default value of to fit in container nicely)\nit then sets the scaling to be parent->width / total_width\nif it is unchanged, scaling is 1, and widths/height are unchanged.\nif total width is smaller (as a result of removing / resizing container), the scaling is 1.n, and the widths/height of all the children are increased to fill the parent container.\nif total width is larger (as a result in inserting / resizing container), the scaling is 0.n, and the widths/height of all the children are decreased to fill the parent container.\n. yep, i fixed up plenty of bugs, and other things.\nfloating windows should be fine now, fullscreen views should be work properly.\nas for style, and other things, i have no problem changing it.\n. k, guess ill spend more time trying to fix it. ;_;\nhmm, i think i got it now. maybe.\nit passed the button mashing test.\ni also checked, but it seems the splith/v is in both. a simple fix though.\ni probably should made a branch, then push bug fixes common to both.\n. i give up.\ngits merging method is horrid. a ton of random code from each version mixed together, with some bits here and there shared.\nits horrible.\nim going to fix all the bugs present in both then try again with the big changes later (maybe, it probably fine doing less)\n. in i3 there are 2 resizing behaviors for mouse.\n1: when left clicking on border,\n2: when right clicking on view while floating_modifier is pressed\n. should probably add the command to man page aswell.\nalso unset the fullscreen flag when pushing into scratchpad. wlc_view_set_state(view->handle, WLC_BIT_FULLSCREEN, false);\n. ah ya,\nthere is some oddities with resize. ill try to get that fixed.\nspecifically, with this kind of layout.\nfocus:R|(0x612ca0)(p:(nil))(f:0xe9c220)(h:-1)Type:Root\n|focus:X|(0xe9c220)(p:0x612ca0)(f:0xe94240)(h:1)Type:Output\n|-focus:W|(0xe94240)(p:0xe9c220)(f:0xea3e00)(h:-1)Type:Workspace|layout:Horiz\n|--focus:X|(0xe959b0)(p:0xe94240)(f:0xe976b0)(h:-1)Type:Container|layout:Vert\n|---focus:X|(0xe976b0)(p:0xe959b0)(f:(nil))(h:2)Type:View\n|--focus:X|(0xea3e00)(p:0xe94240)(f:0xeaced0)(h:-1)Type:Container|layout:Vert\n|---focus:K|(0xeaced0)(p:0xea3e00)(f:(nil))(h:8)Type:View\n|--focus:X|(0xe9e560)(p:0xe94240)(f:0xe8c920)(h:-1)Type:Container|layout:Vert\n|---focus:X|(0xe8c920)(p:0xe9e560)(f:(nil))(h:3)Type:View\nok fixed. guna work on those other small changes i mentioned.\nas far as i can tell its good. even the slightly odd behavior i was worried about is in both yours and i3.\n. @SirCmpwn i should probably post that its done i guess.\n. well that was a bug from the point i branched from, merged so it should be fine.\n. should be fixed now.\n. caused by default value of floating_mod being 0 i guess.\n((modifier & floating_mod) == floating_mod) -> modifier & 0 == 0\n. first part should be fixed, but i wasnt having the mouse motion/click ignored problem.\n. that should do it. just a bit of reordering.\n. whoops, i fixed that a while back, but then i added in another possible fail condition for that function and accidently used && instead of ||.\n. hmm, rofis view type changes, so we handled its destruction incorrectly.\neasy to fix though.\n. k, ill just fix up those bugs then.\n. why did it auto close it?\nanyway it seems to fail on freeing cmd_queue a second time,\ni say partially fix because i duno why its calling handle_wlc_ready twice though\n. oh well.\n. copying from i3 wiki\nbindsym $mod+x [class=\"Firefox\"] kill\nbindsym $mod+x [class=\"(?i)firefox\"] kill\nbindsym $mod+x [class=\"Firefox\" window_role=\"About\"] kill\nfor_window [class=\"^evil-app$\"] floating enable, move container to workspace 4\nfor things like this. the [criteria] part which comes before the command tells it how to behave,\ncommand handling probably needs to be redone a bit though. so it might be temporary.\n. theres swayc_map_by_test which i made for that.\nthough we need a criteria parsing function could generate the proper testfunction and data to handle whatever.\n. whoops, i made a dumb and simple mistake.\n. Ive only been able to reproduce the first segfault so far.\n1. open a window, splitv\n2. repeat step one until 3 windows are open\n3. move left\nIm still figuring out the movement code,but so far i think something like this happens.\nat the switch at layout.c:375, sibling->type is a C_CONTAINER.\nis_parallel is false, and branches to layout.c:406\ncontainer_remove_child is called, and containers parent is set to NULL\nfocus_inactive is set\nsibling gets set to another C_CONTAINER and continues the loop.\nit repeats all this, but segfaults at the container_remove_child step due to container having NULL parent.\ncontainer either needs to be put back into the tree before continuing the loop, or not removed at all for \nthat branch.\n. Not a use after free, but a null pointer dereference that happens a few functions further then the stack trace above\n../sway/desktop/output.c:132:28: runtime error: member access within null pointer of type 'struct wlr_surface'\nreproduced by running\nwhile xterm -e sleep 0.05& xterm -e sleep 0.05&; do; done\nfor a few seconds\nstacktrace\n```\n0  0x000055555562a387 in output_surface_for_each_surface (output=0x555555b254c0, surface=0x0, ox=1114,oy=24, iterator=0x55555562f945 , user_data=0x7fffffffd6a0) at ../sway/desktop /output.c:132\n1  0x00005555556308f0 in render_view_toplevels (view=0x555555cf1d80, output=0x555555b254c0, damage=0x7fffffffd920, alpha=1) at ../sway/desktop/render.c:200\n2  0x0000555555631605 in render_view (output=0x555555b254c0, damage=0x7fffffffd920, con=0x555555cf1ff0, colors=0x5555559c4c34) at ../sway/desktop/render.c:270\n3  0x000055555563538e in render_container_simple (output=0x555555b254c0, damage=0x7fffffffd920, con=0x555555a6bfb0, parent_focused=false) at ../sway/desktop/render.c:601\n4  0x0000555555637048 in render_container (output=0x555555b254c0, damage=0x7fffffffd920, con=0x555555a6bfb0, parent_focused=false) at ../sway/desktop/render.c:746\n5  0x0000555555638632 in output_render (output=0x555555b254c0, when=0x7fffffffd910, damage=0x7fffffffd920) at ../sway/desktop/render.c:888\n6  0x000055555562cbfa in damage_handle_frame (listener=0x555555b255b8, data=0x555555a66150) at ../sway/desktop/output.c:384\n7  0x00007ffff7ee3673 in wlr_signal_emit_safe (signal=0x555555a661b0, data=0x555555a66150) at ../subprojects/wlroots/util/signal.c:29\n8  0x00007ffff7e9f7ad in output_handle_frame (listener=0x555555a66248, data=0x555555b196a0) at ../subprojects/wlroots/types/wlr_output_damage.c:50\n9  0x00007ffff7ee3673 in wlr_signal_emit_safe (signal=0x555555b197b8, data=0x555555b196a0) at ../subprojects/wlroots/util/signal.c:29\n10 0x00007ffff7eab9de in wlr_output_send_frame (output=0x555555b196a0) at ../subprojects/wlroots/types/wlr_output.c:533\n11 0x00007ffff7eeeb26 in signal_frame (data=0x555555b196a0) at ../subprojects/wlroots/backend/x11/output.c:13\n12 0x00007ffff62fe35a in  () at /home/taiyu/prog/repo/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0\n13 0x00007ffff62fea42 in wl_event_loop_dispatch () at /home/taiyu/prog/repo/sway/build/sway/../../../. ./../../../lib64/libwayland-server.so.0\n14 0x00007ffff62fd14c in wl_display_run () at /home/taiyu/prog/repo/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0\n15 0x00005555556225c5 in server_run (server=0x555555797c20 ) at ../sway/server.c:164\n16 0x0000555555620578 in main (argc=2, argv=0x7fffffffde88) at ../sway/main.c:445\n```\n. capacity is the one that moves more though.\nlength is always less then capacity, so it moves less.\n. no problem, i wanted to try to implement the multikey handling with list_t but compiler complains about int->void* void->int to much.\nill send another pr with it edited a bit later. maybe\n. This might need to go in both, or its own cmd_exec_checkargs function.\nwith this change, invalid exec commands would not show this error during reload which might be unwanted behaviour.\n. might stick all this in an init function or something.\n. splitvh bug caused by not checking for floating window\n. active_workspace/output stuff\n. fix to fullscreen/focus behavior\n. check for modifier on pointer resize\n. forgot to add this.\nas the comment says, free_swayc removes the child from parent, so we continue until length is 0.\nbefore it would i=0 len=5 -> i=1 len=4 -> i=2 len=3 -> i=3 len=2 break; and not free 3 or 4\n. might reset tiling resize the same way as floating, all the information we need is there. it would be just 5 loc\n. forgot to add conditional if is_floating so it doesnt add gaps when it doesnt need to,\nalso forgot to reuse this in arrange_windows for the floating windows.\n. no need to undef after, it stays within the scope.\nnot really any other reason.\n. yes it should,\nbindings are sorted from longest to shortest, so longer ones are checked first\nso alt+q+a gets checked before alt+q.\nit was this one 470b4dfbae146d83c0061b39534c16b5aad90f1c\n. done, also added a bunch of free_*** for each config struct.\n. whoops, this is broken. guna fix.\n. prevents multiple child process from trying to write to the log at the same time.\nfor when keybinding multiple cmd_exec.\n. well i guess rearranging the sway_log before the fork would also fix it too,\nthough since all we do is fork/exec thats what vfork was made to do so either way is fine.\n. Im guessing you want that line removed?\ni left it in so that the scratchpad list is more clear. the output for example\nfocus:R      |(0x5555557a9320)(p:(nil)   )(f:0x55555583d4a0)(h:18446744073709551615)Type:root|layout:-    |w:1680|h:1818|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55555583d4a0)(p:0x5555557a9320)(f:0x55555583d820)(h: 1)Type:op  |layout:-    |w:1014|h: 746|x:   0|y:   0|g: -1|vis:t|children: 1|name:WLC-1\n|-focus:W    |(0x55555583d820)(p:0x55555583d4a0)(f:0x555555fd6430)(h:18446744073709551615)Type:ws  |layout:Vert |w:1014|h: 746|x:   0|y:   0|g: -1|vis:t|children: 2|name:1\n|--focus:X   |(0x555555fd4f90)(p:0x55555583d820)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1014|h: 373|x:   0|y:   0|g: -1|vis:t|children: 0|name:Wayland Terminal\n|--focus:K   |(0x555555fd6430)(p:0x55555583d820)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1014|h: 373|x:   0|y: 373|g: -1|vis:t|children: 0|name:Wayland Terminal\nScratchPad\nfocus:X      |(0x5555560e69f0)(p:(nil)   )(f:(nil)   )(h: 3)Type:view|layout:-    |w: 507|h: 559|x: 253|y:  93|g: -1|vis:f|children: 0|name:Wayland Terminal\nfocus:K      |(0x555555fd6430)(p:0x55555583d820)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1014|h: 373|x:   0|y: 373|g: -1|vis:t|children: 0|name:Wayland Terminal. dont need the strdup here,\njoin_args already allocates memory for format, which is also getting leaked here.. ",
    "minus7": "Depends on #6\n. Regarding I3SOCK and SWAYSOCK: Because i3 doesn't set those normally, I would just keep SWAYSOCK unset and just set I3SOCK so i3-msg works.\n. Should be everything. I'll rebase.\n. Done\n. IPC taken care of, just needs to be patched up with better version information.\n. I'll add the flags to CMakeLists.txt and fix the warnings.\n. More rewriting in hope of getting it right, it's now more broken than before. But! workspace next_on_output works correctly now :)\nI get the feeling like remove_child should hide a window as long as it's not attached to anything. Container/view visibility is really a pain currently.\n. I'll make a new PR when I got it right.\n. Possibly include the assign directive too.\n. You can totally ignore the first commit, it was all changed in the last one again.\n. Addressed all issues except for one thing: Outputs WLC-0 with workspace 1 focused, WLC-1 with workspace 2 focused and workspace 3 hidden with one view on it. Moving a view from 1 to 3 works as expected, but when you then show 3, the moved over view has \u2153 of the output width instead of half of it. Must be a bug in arrange_windows which I didn't touch. That's probably a case for a separate bug report though.\n. It is. Thanks.\n. Doesn't mimic i3's behaviour of using scratchpad show a second time to re-scratch the view.\n. It's listed under compile from source and just lists sway's deps, but i guess you could just install sway from the package and thus have the deps too. it was meant as a simple/quick way to just install the deps.\n. Calling sway_terminate (which in turn calls wlc_terminate and that sends an event on the wayland event loop) is a bad idea, as the program could be interrupted in a place where pushing something into the event loop might cause some corruption. The usual way this is solved is the self-pipe trick. It seems like Wayland can do that internally on signals (no idea if it's enabled by default) and you can just add your own signal handler via wl_event_loop_add_signal (haven't actually checked, but I'm pretty sure).\n. The suggested flexibility closely resembles what ferm does for iptables: http://ferm.foo-projects.org/download/examples/dsl_router.ferm\nI very much like the idea, although it's kind of sad that i3 doesn't want to go that way.\nSpecial case-ing the bar block shouldn't be a big problem.. Issue still persists:\n- Start sway (in X? rev de79fee) with folowing config:\nnew_window pixel 10\nexec xterm\n- Open empty workspace\n- Start terminal\n- run swaymsg 'split v'\n- run swaymsg 'layout tabbed'\n. Why not keep the static buffers? Is there any need for them to be dynamically allocated? color[0] == '\\0' could be used as sentinel and it would still be possible to make it generic.\n. Regarding default policies: Imho the default, without explicit configuration, should be to deny everything. This way there's no possibity to miss denying some permission when trying to create a secure setup. The config then has to explicity have to grant \"default\" permissions (like keyboard/mouse/fullscreen) explicitly via wildcard match. From a usage perspective this isn't a problem because an example (\"default\") config is shipped anyway.\n(Careful with the word \"default\" here, as it's used to refer to two different contexts). I've noticed that popups show ontop of swaylock too. In particular Thunderbird/Lightning reminders. Probably new-email-notifications too; I haven't seen it directly, but I noticed that after a while I couldn't log in anymore (no reaction to keyboard input).\n\"Luckily\" you can just log into another vty and kill swaylock.. See #343 for i3bar feature support: it's not implemented yet. Feel free to implement it and send a patch.. Duplicate of #1034. Works with amdgpu these days; I don't have my old card in a computer atm, so I can't test radeon though. I'm not sure how well MST works on radeon at all though. Well, that was less change than expected; thanks!. On a workspace with two windows, running swaymsg focus parent && swaymsg fullscreen fullscreens both windows for a second, then fullscreens just one.. > Would it make sense for splitv/splith to work on a floated view? I think so.\nI agree, that would be a nice feature. I've missed this on i3 before.. Causes sway to crash when fullscreening a window. No more crash. I don't remotely understand what's going on here. Using space instead of , is deprecated afaik; but you'll have to put the quotes around it, otherwise the comma is interpreted as command separator when using swaymsg and binds. Now sway will start with the lastest \"registered\" workspace on an output (e.g. 10 instead of 1 if you have explicit output-workspace bindings for the numbers). Adding a break in the loop should deal with that, though doesn't necessarily guarantee ordering as well as the explicit order id on bindings. pango_layout_get_pixel_size is used in the background, which should return the logical extents of the text, which should, as far as I understand it, include spacing for characters that extend beyond the baseline, etc. My guess is that CJK characters use a different font and cause the height to change. To make the  titlebar height stable, it'd have to always use the maximum height that could ever appear. Filling the gap alone has two problems: The text will not be centered and titlebars will change height when a window with tall characters appears/disappears. Yep, still pretty much the same.. I couldn't easily reproduce it; I'll try to and then try with https://github.com/swaywm/sway/commit/98ed05225e06618533fa0439fdc83463cb9f1d2e as well. Didn't manage to reproduce it on b4887ba154ab0d659c560a21194c8ca43b953632 where it originally crashed. @RyanDwyer do you know why th pointer was 0x1?. I didn't completely understand that, but I get the general idea. Thanks. Will do. Close but not quite right: the baseline (added in white) of both texts is different by one pixel (text without the kanji is too far up).\n\nOtherwise looks good to me. Looks great now, thanks. Do you think the spacing on the left side should be increased?. Last I checked gamma setting didn't work for me with atomic mode on amdgpu (even after @SirCmpwn's patch), so I'm still using WLR_DRM_NO_ATOMIC=1\nEdit: still doesn't work in atomic mode. @emersion Oneshot mode shouldn't change behavior on Wayland by blocking, imo. On the other hand, not working in oneshot mode is also a change in behavior. Actually, it looks like oneshot mode already blocks for Mac; so adding more special cases there would be a valid option. The non-atomic gamma setting on atomic mode does not work on AMDGPU either for me. I don't have a radeon-capable card in a PC right now, so no idea about that.. Just checked again, doesn't work unless I set WLR_DRM_NO_ATOMIC=1. It did work when it still was set using the atomic API in atomic mode, but required switching ttys or turning DPMS off/on for changes to take effect though.. bindsym with quoted exec works again with this for me. Turned off the monitor at :30 and on again at :40\nsway.log\n. The specific issue is gone, but others have appeared:\n- Monitors were previously listed as DP-2 and DP-3, now are DP-4 and DP-5.\n- After turning on the monitor again, I have an additional workspace named '2', i.e. I have two workspaces named '2' after turning the first monitor off and on once.\n- The chained monitor doesn't turn on itself, only after I press some button on it, but that's probably due to a bit weak signal.. That makes sense. Using names works (except on for_window + move container to output), and also seems to cause issue 2 to disappear.\nRe issue 3, the logs show the second monitor is detected immediately with the first one in the chain, and it not turning on on its own doesn't seem to be sway's fault.. No change. The man page has these words under a config option for a reason, I see. Sorry for the noise.. transform relative <degree> or make the degree relative if prefixed by + or -, though I fear that may be confusing as well (- being relative). FWIW clockwise/anticlockwise isn't unambigious either. You can interpret it as the rotation of the output/monitor or the rotation of the image displayed. I assumed former and got it the wrong way around. Imo it'll always involve trial and error when configuring, so it's not really important.. The other places are in sway_abort (where it's okay, i guess) and when forking (perfectly fine there).\n. Well, it's an abort after all.\nBut that reminds me to mark IPC client sockets as CLOEXEC (or does wlc do that?)\n. Socket is removed on sway_abort now.\n. Could just remove the initializer since global and static variables are initialized to zero by default. This thing looks ugly.\n. First I heard of it :D, fixing.\n. I kept it how it was, just changing it to use constants. Could add additional visibility layers there in future, is what i thought.\nI'll change it to be a bool only.\n. Why not just let it unset?\n. git describe --always gives the same output, git describe --tags might give a nicer output.\n. Any particular reason against pkg-config?\n. c\nif (strcasecmp(argv[0], \"show\") != 0 || scratchpad->length == 0) {\n    return false;\n}\nwould have saved you 2 levels of indention\n. Might be nice to run clang-tidy/clang-format or some other formatter/format verification tool over commits automatically?. Is that even correct?. It should be sizeof(a[0]) instead of sizeof(a)[0]. Is this the standard way to compute the string's length?. Your code doesn't seem to handle split here. ",
    "Cloudef": "Yeah, the wm is supposed to handle this case. Wlc tries to not change window states behind the scenes.\nwlc_view_set_state can be used to set the FULLSCREEN bit.\n. This is the route I decided to use for Orbment (and before log refactor in wlc)\nhttps://github.com/Cloudef/orbment/blob/master/src/log.c#L110-L152\n. The xwininfo outputs don't really have much useful information for wlc. I invite you to https://github.com/Cloudef/wlc/blob/master/src/xwayland/xwm.c#L470-L485 check out the xwm.c and decide what information you need for X11 windows.\n. https://github.com/Cloudef/orbment/blob/master/plugins/core-screenshot/core-screenshot.c Example usage here.\n. @Luminarys That looks like regression inside wlc. Maybe post bug there as well.\n. AFAIK pi needs to be supported separately as it does not have standard way to do contextes. (But I've heard there is recently some DRM enabled kernel)\nAs you see in logs, it fails to init any backend.\n. (WARN) wlc: /opt/vc/lib/libEGL.so: undefined symbol: glPointSizePointerOES <- I'm also not sure what this is, but it most likely isn't the real EGL implementation?\n. [wlc] Could not initialize any context\nIt seems to fail doing EGL context, which driver / GPU this is?\n. @FreeFull Can you get libwlc with debug symbols, and perhaps run under gdb or orbment, as the glibc's backtrace is not particularily useful.\n. This should be fixed nowadays as of comment on Sep 3\n. So far we know this happens with X windows and when multiple are resized at once(?). (May be wlc)\n. No I haven't yet. I'll try to get on it today. Is it confirmed that this only happens with X windows however? \n. Should be fixed now.\n. This is not yet prioritory. Wlc had some code before that delayed drawing for client acks, but it tend to cause code to be harder to follow / have bugs, so I removed it for now. It may have better place whenever I get back to internally start using fsm's for most of the moving part logic.\n. You can try.\n. It might make sense to make wlc set default mask to 0. And let window manager decide how to show it?\n. Partially working mainly means that xwayland <-> wayland isn't handled. This sounds more like bug in wlc's data-device implementation.\n. Without trace it's hard to say. But trace to libEGL seems like something wrong with driver. I suggest compiling with debug symbols and getting trace.\n. Is the high cpu usage in sway or the swaybar? Using tool like perf can find time consuming function easily. Using tool like perf can find time consuming function easily.\n. It probably is, if that's the case. WLC_DEBUG=render,render-loop,commit is useful here. If swaybar is not constantly requesting new content to be rendered the issue is in wlc. (Also the perf output of course :))\n. I'll make linked issue to bemenu\n. Yeah I'm not really sure if SLI setup works at all (as I don't have one), WLC_DRM_DEVICE may help.\n. The recent commits in wlc allow you to now turn any surface into wlc_view https://github.com/Cloudef/wlc/blob/master/include/wlc/wlc-wayland.h#L41\nSo you don't have to give the background \"desktop-like\" role such as xdg-shell-surface or wl_shell_surface.\n. I'll add wlc_view_get_client to wlc-wayland.h, you can then use wl_client* functions from \"wayland-server-core.h\" which includes wl_client_get_credentials.\n. TTY switch is known to be quite fragile process. This might become better when I decouple backends (x11, drm) from wlc (might be possible to even use glfw in future). Basically tty switching, drm and libinput are big moving part that you need to synchronize before you proceed. You can not tty switch during middle of page flip, you need to close inputs and all other crap, which are the reason I've considering using FSM for this part as anything unpredicted makes everything go wrong.\n. Having stuff happen on screen will cause more page flips. You can see what wlc render loop does with WLC_DEBUG=render-loop, you can see available WLC_DEBUG options from https://github.com/Cloudef/wlc/blob/master/src/wlc.c#L62-L69 if you are curious.\nFeel free do issue on wlc as I don't see one open for this issue.\n. Can you move this issue to wlc?\n. I can say that xterm works as expected in floating mode inside orbment\n. (Wlc's example too)\n. Both parented view's and subsurfaces have special logic. If this is either one of them, I would not be surprised if there was bugs. If input coordinates are wrong, then the surface is not rendered in correct place or vice versa.\n. @SirCmpwn Did you guys use wlc_get_visible_geometry that was recently added for visual stuff though?\n. Yup, this is the correct way when using wlc_surface_render, not needed if you decide to convert the surface to wlc_view or the shell_surface (should be no reason for that)\n. While orbment's core-dpms implements this using own timer and wlc's set_sleep. I think drm has dpms api too actually.. @mikkeloscar Good question, for wayland clients should be utf8, for X clients it can actually be anything since UTF8_STRING property atom isn't used (should be fixed to try that at least first)\n. I'll link to wlc\n. Cloudef/wlc#147\n. Should be fixed in wlc now. (At least partially, I don't still handle clients that don't support UTF8 NET_WM_NAME, and encode latin1 to utf8, should not matter though unless you dig something very rare.)\n. This could be that the window type property is assigned to the window after being mapped. Fortunately we now have view_properties_updated for updating window titles and such, and we can just use that to also inform about type updates.\n. That's just hypothesis. Fortunately I have wireshark here handy, so I can see what happens.\n. Ah, I realized wireshark is wayland native too. So wlc_view_get_type() returning 0 is normal in this case. I guess orbment handles this fine because it centers child windows on parent. (wlc_view_get_parent, which the dialogue is, it's not special in any other way inside wayland)\n. Yeah, wlc doesn't update focused view in this case.\n. We already have place for reading pid's from x11 windows here: https://github.com/Cloudef/wlc/blob/master/src/xwayland/xwm.c#L221 However it's not guaranteed every client supports this. (In other words, such API is possible at least)\n. Not sure about broadness, xprop would show it though. At least every gtk client has it.\n. Note that wlc uses GLES2 for compositing. I'm not sure what gnome uses for rendering but it may use less GPU resources. wlc also doesn't have direct scanout so fullscreen windows will be composited even though there would be no need. That said I would be interested in profiling results.\n. Weston throttles input, wlc doesn't. This is most likely the problem. (Also the fact that content is indeed updates as soon as possible).\n. What happens if all outputs are enabled?\n. Failing page flip means the image will not ever land to screen, so it's very important. What devices do you have in /dev/dri/ ?\n. The handle reuse should not matter. When sway terminates the output (by returning false in output.created callback) the whole output, including handle gets destroyed.\n. > I'm guessing that making the initial mode setting happen after the output.created handler has returned should fix my problem.\nYeah by default wlc wakes up all outputs, and it calls create callback after it's confirmed to be OK, instead of doing the creation after the callback and then have the output fail. Not sure if this is driver bug really.\n. The push to resource is simply wayland communication which you can see with WAYLAND_DEBUG=1, I'm not sure how to know how many outputs hardware can support, but if you can make PR to improve this that would be good.\n. @RyanDwyer Thanks, I'll hope you manage to fix your issue.\n. > As you can see, this has no checks to see if the CRTC is already in use. One option is to keep track of which CRTCs have been assigned and don't re-assign them. However, I think the ideal option is to configure the CRTCs after the output.created callbacks. For example, Sway might return false from the output.created callback in which case a CRTC shouldn't be configured for it. Or Sway might want to position two outputs at the same position, using the same resolution and refresh rate in which case it makes complete sense to use the same CRTC. This depends on WLC having a way for Sway to relay position information, disable and enable outputs on the fly and request mode setting.\nI really don't have much more to say to this. This is not something I would like to expose outside of wlc though, wlc should be able to figure out how to enable outputs and display the image. I would perhaps suggest to look at how weston does the detection.\n. @progandy https://github.com/Cloudef/wlc/commit/fe0a704f68809543f5a3fc8b15ab2fb4da840827 https://github.com/Cloudef/wlc/commit/fa780cede232fa8ca46448eb7cb7731922aa81f9 Yeah it should.\n. @jkobezda You could try compiling with -UHAVE_POSIX_FALLOCATE compiler flag to fall back to ftruncate.\n. @Timidger It's possible to improve this by caching the different canvases (per view, per output) in wlc to textures and only flush them when explicitly told, this would keep the API unchanged and simply just add new function to clean canvas (remove texture). The fastest way to draw however is always going to use directly whatever wlc uses behind the scenes (in this case GLES2). See remarks in https://github.com/Cloudef/wlc/blob/master/include/wlc/wlc-render.h#L12-19 however.\nAs for other performance problems. Since wlc was originally designed as immediate API by mistake, meaning any wayland, X11, device, etc event and API calls are processed immediatly, things such as mouse input and  resizing may cause wlc to do lots of unneccessary work and redraws. Rendering is not immediate however, but it would be better if all events and calls would just be queued.. @johalun This is indeed because of wlc_write_pixels and it not keeping the writes in GPU for longer than next render.. > boolean for whether or not input from this device can be captured by a window\nWhat is the usecase for this?\n\nwlc_geometry for the usable region of the screen this input gets\n\nThat sounds like a good idea. \n. ",
    "MartijnBraam": "Ok, please notice that this change is also committed in https://github.com/SirCmpwn/sway/commit/e9c3a9016f1df5877404721043967431afb2f5c7 while I was making this fix.\n. ",
    "twouters": "escaping would look like this:\nyour config file is \\~/.config/sway/config. ~/.sway/config will also work, and the\n. ",
    "steven-joruk": "Okay...\n. 1. It matches the style perfectly - there is already inconsistent attachment of pointers to types / identifiers and inconsistent use of space before an opening bracket.\n2. You can check for a NULL return from malloc in a single place instead of fixing it in each place, which is what I should have done.\n3. Irrelevant\nApparently it wasn't worth my effort either.\n. ",
    "Ninja3047": "I've been able to reproduce this by spamming right click while moving the mouse. \n. focus:R|(0x60c6c0)(p:(nil))(f:0x14d61a0)(h:-1)Type:Root|layout:NONE|w:0|h:0|x:0|y:0|vis:f|wgt:0|name:(null)|children:1\n(\n focus:X|(0x14d61a0)(p:0x60c6c0)(f:0x1503800)(h:1)Type:Output|layout:NONE|w:681|h:746|x:0|y:0|vis:f|wgt:1|name:None-0|children:1\n (\n  focus:F|(0x1503800)(p:0x14d61a0)(f:(nil))(h:-1)Type:Workspace|layout:Horiz|w:681|h:746|x:0|y:0|vis:t|wgt:1|name:1|children:0\n   )\n)\nwlc: Xwayland started (DISPLAY :1)\nwlc: xfixes (5.0)\nCompositor is ready, executing cmds in queue\nMouse button 273 pressed\nSetting focus to 0x1503800:-1\nMouse button 273 released\nMouse button 273 pressed\nSetting focus to 0x1503800:-1\nwlc: Parent exit (7322)\nThis is what it says when it closes. \n. Same issue here\nI'm also using US and US Colemak\nsway.log\nsway config\nRelevant portions of the log files seem to be\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/config.c:729] Read line 178:     bindsym $mod+Shift+space floating toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:357] Config command: bindsym $mod+Shift+space floating toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:145] find_handler(bindsym)\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:377] After replacement: bindsym Mod4+Shift+space floating toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+space to command `floating toggle` for device '*'\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/config.c:729] Read line 179:\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/config.c:729] Read line 180:     # Swap focus between the tiling area and the floating area\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/config.c:729] Read line 181:     bindsym $mod+space focus mode_toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:357] Config command: bindsym $mod+space focus mode_toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:145] find_handler(bindsym)\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands.c:377] After replacement: bindsym Mod4+space focus mode_toggle\n2019-02-15 16:59:20 - [sway-1.0-rc2/sway/commands/bind.c:315] bindsym - Bound Mod4+space to command `focus mode_toggle` for device '*'\n...\n2019-02-15 16:59:23 - [sway-1.0-rc2/sway/input/keyboard.c:184] encountered duplicate bindings 51 and 50\n2019-02-15 16:59:23 - [sway-1.0-rc2/sway/commands/bind.c:331] running command for binding: focus mode_toggle\n2019-02-15 16:59:23 - [sway-1.0-rc2/sway/commands.c:253] Handling command 'focus mode_toggle'\n2019-02-15 16:59:23 - [sway-1.0-rc2/sway/commands.c:145] find_handler(focus)\n2019-02-15 16:59:23 - [sway-1.0-rc2/sway/commands/bind.c:339] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\n2019-02-15 16:59:24 - [sway-1.0-rc2/sway/input/keyboard.c:184] encountered duplicate bindings 51 and 50\n2019-02-15 16:59:24 - [sway-1.0-rc2/sway/commands/bind.c:331] running command for binding: focus mode_toggle\n2019-02-15 16:59:24 - [sway-1.0-rc2/sway/commands.c:253] Handling command 'focus mode_toggle'\n2019-02-15 16:59:24 - [sway-1.0-rc2/sway/commands.c:145] find_handler(focus)\n2019-02-15 16:59:24 - [sway-1.0-rc2/sway/commands/bind.c:339] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:331] running command for binding: focus mode_toggle\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:253] Handling command 'focus mode_toggle'\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:145] find_handler(focus)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:339] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:331] running command for binding: focus mode_toggle\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:253] Handling command 'focus mode_toggle'\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:145] find_handler(focus)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:339] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:331] running command for binding: focus mode_toggle\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:253] Handling command 'focus mode_toggle'\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands.c:145] find_handler(focus)\n2019-02-15 16:59:26 - [sway-1.0-rc2/sway/commands/bind.c:339] could not run command for binding: focus mode_toggle (Failed to find a floating container in workspace)\nThis switching the shortcut to something else works fine and removing the keyboard variant customization section of the config also seems to work fine\n. ",
    "KoffeinFlummi": "Sweet, thanks!\n. Sweet, thanks!\n. ",
    "acrisci": "I would really like to see IPC done over dbus instead of sockets.\n. Ok have fun :)\n. My vote is to keep it how I intended it to work in i3, to have the same behavior moving between outputs as on the same output.\n. This is a feature I use a lot in i3 so I would like to see this in sway. I can take this up if nobody is working on it.\n. Thanks.\nI looked more closely and I'm seeing a lot of misses for how sway handles some subtle cases for movement that I use occasionally, so I think I'm going to have to do more work to get it right.\nBy the way, it would be very beneficial to have tests for this at some point.\n. Let me also add that you should strongly consider how easy it is for new contributors to write tests in your assessment of any testing framework. The i3 test suite is a big barrier of entry to new contributors because perl literacy is low among new developers and it has a large number of dependencies that are tricky to install (unless you are a perl guru).\nYou should also consider how fun it is to write tests. As a community project, almost all of your users are contributing code just for fun and only for their own personal use. If they encounter a test framework that is too difficult or feels too much like what they have to do at their day job, they will be more likely to keep personal forks rather than write tests.\nAll around, the i3 test suite does both of these very well (despite perl). Tests are conceptually very easy to understand because they are exactly like what you would do manually to test the bug or feature. That means there is no extra planning needed to design tests. From my experience, they can also be very fun to write.\n. I can confirm this.\n. #811 will fix this.\n. Some issues with this are discussed here: wlc#32\n. Sorry, this is a brand new linux install. I fixed it.\n. I see DISPLAY set in my env on sway and it seems to be the same kind of indicator that it is on X.\nX does all this for you because when you create the connection, it automatically reads the DISPLAY from the environment and gives you a connection to that display. Then (iirc) the socket path is retrieved from a property on the root window.\nIf there is no equivalent way of doing this in wayland, could we have a workaround? Perhaps we could encode the DISPLAY into the name of the socket path itself.\nThis is a really powerful feature of i3-msg because it allows us to run commands from anywhere outside of i3, such as from an init script that is run outside of the X environment (like systemd scripts or crons).\n. Thanks for that clarification. I am new to Wayland so I don't know the details of its inner workings yet.\nI would however like a feature like this where I can associate a particular instance of sway that I start with its socketpath so I will do a little more research into whether wayland supports something similar.\n. So from man wl_display_connect\n\nThe name argument specifies the name of the socket or NULL to use the default (which is wayland-0\"). The environment variable WAYLAND_DISPLAY replaces the default value. If WAYLAND_SOCKET is set\n\nI think it might be possible to use the Wayland registry to store information like we used to do on the root window in the old days.\nIf I come up with a poc to make swaymsg respect WAYLAND_DISPLAY would you consider it?\n. I thought this was a no-brainer because it's an i3 compatibility feature so I almost didn't make an issue. It's undocumented, it seems pretty simple, and it's an unusual code path that will almost never be taken outside of development situations.\n\nI don't see any reason why you couldn't just use the SWAYSOCK variable to get a predictable socket name and instructing swaymsg to use that.\n\nThe primary use case is working with a nested sway server for development, like for observing test scripts when a situation might crash the server. I used this all the time for i3 with Xephyr.\n. The first word of your tagline is \"i3-compatible\". That's what this project does well. Without this feature, Sway will never be i3 compatible.\n\n\"It's not documented and no one uses it\" isn't a great argument for supporting a feature.\n\nDevelopers will use it and developers are more important than normal people.\n. I think what I just heard you say that is if I go get it documented in i3 you have to support it.\n. Oops my commit message wasn't good. I implemented it for all movement not just focus parent.\n. And I introduced a nasty bug I'm fixing now\n. Here's what didn't work before:\nSuppose you are on the right monitor.\n1. Go to a workspace and open up two windows side by side.\n2. Focus the right window\n3. focus parent, focus left\nIt should go to the workspace on the left output, but it doesn't.\n. No, this feature was rejected from i3 so you don't have to worry about api conflicts.\nAn include would not work for bar colors because they must be configured within the bar block and including a bar block in the include makes themes unportable. It still leaves users to search for themes, which is overhead to customization.\n. Sure, that would work. Then you could include a default search path to resolve a relative path for the colorscheme, so something like colorscheme solarized expands to /usr/path/to/solarized.config behind the scenes.\nThat approach would be simple, but you gain a lot with a json format. Look at this colorscheme for solarized. It is very easy to read and modify. It gives you color aliases to make it even easier to modify. That could be done with variables, but the i3 config format is difficult to read because you have to look up what the positional arguments of the color directives are.\n. If you're just including what comes from stdout, that would take an argument like i3-style solarized --colors-only but that's not hard to do. However, it would have to be sway-specific because the top level bar config directives will not be supported by i3.\n. Well if it's a separate utility, people still have to search for it and go through the install steps, which requires the technical ability of a developer, and they still have to be clever enough to put all of that together. If you're ok with that, it's fine, but I think the built-in colorscheme directive is still the best choice.\nSo if it's a separate utility, how about adding a page to the wiki explaining how to change the colorscheme?\n. Actually after thinking about it, I think the way the tool is used now is superior because I don't have to have it installed for my theme to work which is one less moving part per machine (I don't have it installed now actually).\n. Yeah or you could do i3-style solarized -s and it will modify your config in place and then remove i3-style. Then you don't have to have two config files, which is one less moving part. Flat is better than nested.\n. Sure, is yaml good enough for that?\n. Do we want the ipc itself to give pretty printed json to clients or just reparse and pretty print in swaymsg? I think you could make an argument for either way.\n. You should use development/release branches.\n. I'm getting kind of confused by the vocabulary here. Should I refer to containers and views as separate things or is a view a type of container?\nOn i3, everything is a container, including workspaces and outputs.\n. It's WIP because there are a few bugs that this introduces from other parts of the code that assume this function will automatically find the view within the container and set focus on that.\nYou can test by opening two windows, splitting one and adding a new window to that container, and then do focus parent and focus child to see wlc focus being set correctly and borders being updated to show the container is focused by making all the children have focused borders.\n. As soon as you OK my approach here, I'll continue working in this branch to fix all the bugs this creates and find the edge cases.\n. I'm ok with how this is right now. I'm sure there are more bugs, but nothing major on my end. You can review/merge this whenever.\n. I'm trying to get at a crash that happens to me sometimes when switching vts.\n. @kobezda can you provide detailed steps to reproduce the issue?\n. I can't reproduce this issue but I'm on Fedora. I'll have to dig a little deeper then. Can anyone else reproduce this issue who is not on gentoo or is this a gentoo specific issue?\n. I can indeed reproduce the issue only with that patch applied. I will give this priority and find the root cause of the problem tomorrow.\n. It's possible to do this with the IPC.\n. I do. The bindings need to be changed for some reason so I edit the config file to change them. Then I do swaymsg reload in the terminal.. It's not my workflow. I'm already in a terminal from vim so that's where my head is at. I do everything I can from the terminal. I know from my experience supporting i3 is that this community loves the terminal.. ugh ok. So they can't read the config, find the button to reload, and simulate the key event that does the reload?. The i3 way to do this is\nbar {\n   bindsym button4 nop\n   bindsym button5 nop\n}\nto nop the scroll wheel buttons.\nBut the real solution is to put your bar on the top of the screen and you will never accidentally switch workspaces ever again. . i3bar doesn't listen to keyboard events either and probably never will. This is just the config approach we took for this behavior because it is more extensible to other use cases, but I don't think this feature is very widely used because it's kind of buried in the docs.\nYour approach is much more semantic and easier to find. However, this feature is not requested very much because putting the bar on the top is a much better solution to this problem.. This complaint arises only when the user accidentally scrolls their workspaces at some time. This accidental scrolling only has one cause that I am aware of.\nThe user is on a web page and scrolling through content with the scroll wheel. They click something on the web page and then move the mouse down to get it out of the way of the text, but they don't keep track of exactly how far they move the mouse down. Sometimes, they move the mouse all the way down to the bottom of the screen, which makes sense because the web browser and the bar share a lower boundary. Then after they read some more and it's time to scroll down again, they grab the mouse and use the scroll down button. This action itself naturally moves the cursor even lower on the screen. After you scroll down on the page enough, the cursor will get lower and lower until it finally is on the bar. This is when the accidental scroll happens.\nThe reason why putting the bar on the top fixes this is this:\n\nFor some reason, people will never move the mouse up to get the pointer out of the way of the text.\nPeople do not scroll up on their text for very long periods of time on a single page which is the main source of the cursor drifting onto the bar.. > Maybe the user just wants that feature, ya?\n\nYes, absolutely. That's why I implemented that way to disable the scrolling.\n\nI keep the bar at the top. I tend to move my mouse up to get it out of the way. So moving it to the top doesn't help.\n\nImplementing a feature where you can put the bar on the side of the screen (often requested in i3, but difficult to implement) might be an even better solution to your problem.. Just to be clear, I'm not opposing this PR at all. I've dealt with the angry mob of accidental scrollers before and I'm just providing you with context for how we solved the issue in i3 and why we did it that way.. They don't like multiple ways of doing the same thing in the config so you have that against you. They hate mouse features, but this is disabling a mouse feature, so that's a wild card. You'll have to ask. I'd say it's 50/50.. I wonder if we could support this use case with the mixed backends. I've wanted to try this out in my workflow for awhile.\nI would like to \"split\" a monitor so it is treated as two separate sway outputs. So for instance, if I split one of my monitors in half, it will have two separate groups of workspaces (which I can assign to either output on the monitor), and when I fullscreen a container on one of the split monitors, it will only fullscreen on that half of the screen. It would also use the tree move logic for outputs when moving between them which is convenient sometimes.\nThe multi backend feature might allow me to use one of my outputs to have two wayland window outputs nested within them which are arranged tiled. That would give me what I want, except we would have to be careful to choose how keyboard events are delivered to the window.. Actual EWMH support is not worth it. This issue is talking about an EWMH replacement which we are talking about right now.\nwindow_role is different. It's a property of an X11 window which we don't keep track of right now in wlroots, but I guess the implementation wouldn't be too complicated. I would be wary of supporting the old properties because of possible future conflicts with new properties that might come about in the shell interfaces to replace this.\nIf you can work around it with another kind of criteria or a simple ipc script, you probably should because it might be awhile until this can be implemented.\n. Fixed in wlroots.. The implementation would be a little tricky since we pass file descriptors between the windows and not the actual contents themselves.\n. >  The downside: If a build is done without git, this needs some sane fallback. (Stable version for releases?)\nI added an option called sway_version that you can set to something and git will not be invoked to get the version in this case.. That's a good approach, but version is not settable by the user in this way. Does anyone rely upon setting the project version?. @SirCmpwn do we want to do the meson build for the sway utilities (like the bar) now or are those getting totally redone?. Ok, we basically have the same functionality as before. Ready for review.. It's the same concept, it just got renamed for some reason. Weston treats them as the same thing as well in its desktop abstractions.\nWill criteria matching and the ipc (or anything else in sway) strictly differentiate between these?. I can see that causing some problems for people, but I think I'm ok with it because it's more encouragement for people to not use the legacy shells.. Code looks ok, will test it in a few hours. Can you provide an example config snippet?. Instead of this update_root_geometry() madness, why not listen for the change event of the output layout and update the root geometry then?. output_add_notify() needs to handle the case where the new output is disabled.. I don't think it makes sense to have cursor config and seat config in separate blocks since they are conceptually bound to each other. There is a 1:1 relationship between seat and cursor (necessary because there can only be a single pointer location within a surface per seat).\nIt won't work well if seats share cursors because then they would be sharing the devices as well. If they share devices, surfaces then get double input events (one per seat). For instance, two button clicks on the surface when the user clicks once, two scrolls, two motion events, two dnd targets which is going to lead to a lot of nasty bugs that can't be fixed. Clipboard for cursor events is broken because only the first seat that wins the race to click the \"copy\" button gets the contents. Just picking a seat and going with that will break the clipboard for the same reason and is no different from just putting the device on that seat but with less predictability. I think this is a protocol limitation.\nDevices can live on multiple seats, but this is a really dumb thing to do and I doubt anyone would ever us this configuration except by mistake. In this case, the single device will control both cursors at the same time.\n. > Also, another concern we should address is that previously sway input devices were identified with a consistent identifier based on libinput.\nAnd what if libinput is not in use for that backend? Should we just ignore all input configuration in that case?. I'm messing with the rendering a little bit.\nIt looks like we were trying to cram the buffer into the space of the desired window geometry. Window geometry is always smaller than the size of the buffer so this leads to scaling issues which 1) makes the windows look ugly when scaled and 2) completely screws up surface coordinate calculations.\nTo avoid this, the approach is to always render the surface buffer as it is intended to be rendered. When the shell specifies window geometry, we place the top left corner of the window geometry at the top left corner of the sway container.\nShell configure requests for size work on window geometry size and not buffer size so this gives us a good result with xdg-shell. wl-shell does not seem to have a way to get window geometry coordinates so this shell will never be completely supported by sway and we need to do crappy workarounds. Hopefully window maximization will clear this up a bit because it won't render shadows so window geometry offsets should be close to zero (untested).\nA consequence is we have to trust the shell surface to actually listen to our configure requests. If it doesn't, then I think we should call that a client bug and just clip the contents to the container extents (which should be done anyway to avoid shadows spilling over to adjacent containers).. Ok, we have basic input now so I'll stop here and do the rest in smaller PRs because this one is getting very big and the others might need closer supervision.\nThis is your wm so I'll do the config your way even though I don't like the approach because I just want to get sway out to the people. I'll do my config my way when it is time to make my own wm \ud83d\ude04 .. Something that's kind of awkward with how this works is there is no \"default seat\".\nSo I can't say \"put these specific devices on seat1 and all the other devices on seat0\".\nSo in this setup:\n```\nseat \"seat0\" {\n    attach *\n}\nseat \"seat1\" {\n    attach keyboard1\n}\n```\nWe get keyboard1 on both seats. If I don't use the attach * on seat0, then I have to specifically enumerate all the devices I want on that seat which is annoying because I want to be able to plug in anything and have it just work.\nShould we put all devices that do not match an attachment on seat0 (the default seat)? This is conceptually easier because it is unifying with the case where no seats are configured.. In English, that reads like \"attach this device to this seat and not any other seat\" which isn't logically what's happening. It seems a little cryptic for what will be necessary for the most common use case of multiseat.. That's a little better. What happens if there is more than one fallback?. Multiple fallbacks seems like a mistake for the user, so we might as well punish them in a way that makes the error clear from looking at the config and put all the devices not specifically configured on all the fallback seats instead of silently interpreting their intent based on the order fallbacks appear in the config.. > VT switching\nThis requires keycodes to keysyms which belongs in the effort for bindings.. Ok, changing the layout at runtime is a wlroots bug. The issue is the layout won't change while keys on the keyboard are depressed. You can make it work by trying to change the layout from outside the backend like on another VT.\nUpdate: it seems like adding a sleep 1 && <swaymsg command> doesn't work, so maybe that theory isn't correct.. > Something I'd like to see done shortly after this PR is some commands that rely on focus, such as move and split.\nYeah, the tree stuff will all happen next. This was only meant to get us to the point where input events could be tested.. This is a tricky issue. Like I said, dynamic layout setting works in the X11 backend. The only difference I see there is that the X11 backend only has one keyboard while the drm backend has many (for instance, your power button is a keyboard).\nI verified that the keymap is being sent by the seat in the expected way and the clients are receiving the event, and it seems to actually be for the new keymap, but the clients don't seem to be actually using the new keymap.\nIf I remove the device and readd it (like what happens when you switch VT), it will pick up on the new keymap.. The issue is that libinput is giving me two devices for the same keyboard and I was only configuring the first one which wasn't giving events because of an assumption that there would only be one device for the identifier.\nIt works now.. @martinetd yeah that's a wlroots issue related to a recent change. Make an issue there and we'll investigate it.. Ok I think I fixed everything.. You need to put in a little more effort for big proposals like this \ud83d\ude04 .. Single-frame reflows will be a big deal when we get around to doing it. The idea is to make rendering smoother when the position of the containers change so all the updates happen in one frame so it seems like a single update.. @SirCmpwn is this a block command? And if it is, shouldn't we make the block config api the same as the command api like the others?. Actually thinking about it now, maybe this is better left as a command and not a config block.. I think we should have an IPC command to list the backends.. I think we should add a --backend=<wayland|x11|drm|headless|none> to sway to control the initial backend.. I think that naming things (output, input, backend) should either always be a flag (set with --name) or always be a positional argument for consistency.. This is stalled because wlroots does not support multiple renderers.. Let me just set expecations by saying that adding and removing backends at runtime probably isn't going to work yet because of limitations in wlroots. That's going to be a pretty big effort to support. \nThis PR is primarily for tests. Tests just need to start with a headless backend with an output.\nThe rest of the interface is stubbed out in the way we determined it should be in the issue. This will help us to develop the wlroots features because now we have a way to test the multibackend support and see how the wlr interface to backends works.. > Also, we should have add-output headless-2 [WIDTHxHEIGHT|WIDTH HEIGHT]\nI think I'd rather have the output added in a disabled state, then use the normal output commands to do whatever you want to it, and finally enable it. That way we don't need to have every output param as part of this command.. > I wonder if we should start it up with an empty multi-backend and wait to add more backends to it (including headless) until we're asked for (or they're specified in the config file).\nHow do you want to handle the case of no backends? A backend renderer is needed to create a surface texture. What do we do with the surfaces that were created when no backend was present, and then the new backend appears? The surface interface doesn't fit this use case very well at all.\nAnother strange case is a backend with no outputs. In this case, the only container in the tree is the root container. What do we do with shell surfaces in this case? There's nowhere to put them in the tree.. > Lines were very long in the original code, do we want to use the heavy rewrite as a chance to wrap these?\nYeah please consider this a rewrite and make your best judgement on the new code.\n\nAs a further thought, one thing that might or might not make sense is allow '*' as device name like we do with outputs? I kind of just assumed it would work, then saw in code that it doesn't.\n\nIf it's a sway feature currently and it doesn't work now, then it should be done eventually. Otherwise make an issue for new features.. For the approach, libinput config is a special case because it is not per-seat configuration but truly per-device configuration. If the device is on  more than one seat, this configuration will happen multiple times, so it seems to me to be an input-manager responsibility.\nThe input-manager is intended to handle configuration and input state that is independent of the seat, so I think it makes more sense conceptually to bring this up a level to sway_input_manager_apply_input_config().. Yeah, it should be called when the device is added as well after the config is assigned.. > Can a device actually be in multiple 'seats' like you suggest?\nYes. Each seat has independent focus and will send input events from the device to its focused resources. This means if that the device is on five seats, and they all have the same window focused, and you press the 'f' key, the window will recieve 'fffff'.\nWe don't really know what we're going to do with this feature yet.. > I got Mod1+shift+2 to work, but not Mod1+@\nThat binding won't validate because apparently xkb wants to call it \"at\". I can make Alt+at work.\n\nI couldn't get Mod1+button1 to work despite seeing code that looks like it should be handled\n\nWe're only going to do keyboard bindings right now.. Ok I think everything works now.. Yeah, kind of agree with @martinetd here. It looks great when the fields exist, but when they don't, it looks a little weird. Here is my X11 output edgecase:\nOutput X11-1 '  '\n  Mode: 634x1039 @ 0.000000 Hz\n  Position: 0,0\n  Scale factor: 1x\n  Transform: normal\n  Workspace: 1\nI would like to see refresh rounded to two decimal places.. Tested it and it works. Code looks ok too.. Should update the documentation to tell people about the feature. Also, identifier should be included in the raw ipc output and maybe made a bit more clear in the pretty output.. Some things may hold onto elements of the config. When the old config is freed, they may still have references which become invalid when not overwritten. Input manager does this for devices.\nSo we probably need a \"destroy\" event for the config which gives everything an opportunity to dump their old references.\n  . Code looks ok, but it seems to break bindsym bindings for some reason, and there's still the issue with input holding onto configs instead of copies.. I agree with you that the config parser probably needs a rewrite.\nIt is my responsibility to fix my code and this is pretty high on my prioirty list, so don't worry about it if you don't have time. I know where the references are.\nTo reproduce, issue a reload command then your bindsyms might stop working. I need to investigate that too.. Yeah that would be helpful.. There are legitimate reasons to keep them separate so you can toggle one or the other off. In the future, most sway issues will not require wlroots logging.\n  . I can't reproduce from those instructions, but unmapping the xwayland surfaces is not supported in this PR or prior to. Let's work on that now and find more test cases.. I think that segfault should be handled now.. I think you're right that the we don't need to hold onto the config in the current implementation. The intention is future proofing since seat/device configuration is very incomplete and some very ambitious things are planned to that end.. Ready for testing.. Can you elaborate on the focus tree? Is it private to the seat? Does it have its own data structure independent of the containers? How might it get updated when the structure of the tree changes?. Windows aren't being arranged correctly in the multi output case (including DRM and wayland) but actually I don't think that ever completely worked correctly.. I fixed the easy problems and updated the original post with the hard problems.. Can you guys summarize your reviews so I can make a list of todos for this pr?. > It's going to get pretty tiresome checking this everywhere. Maybe we should pull this higher up and put contextual commands into a different command list?\nThis is a general problem with the approach of setting things on a global. It's kind of hard to reason about.\nSeat and container context should always be there for every command or that's an application error. That's an easy check to do before hand since running a command can only happen in two places.\nThen to get rid of the rest, it would be an obvious split to partition the commands into 1) commands that can run in the config and 2) commands that can't and then do the check accordingly earlier.. Another idea along those lines is to instead of passing a single container to the command, pass a list (for every container that was matched by the criteria). That way, commands might choose to behave a bit differently with a list. For instance [class=\".*\"] focus will get a list of all the windows and can choose to only focus the first one, or maybe do your multi-focus thing or whatever.. > It's going to get pretty tiresome checking this everywhere. Maybe we should pull this higher up and put contextual commands into a different command list? Will file a ticket.\nOk this solution partitions the handlers into three groups. 1) command_handlers can run after the config has been parsed, 2) config_handlers can run only when the config is parsing, and 3) handlers can run at any time.\nThe find_handler() function now uses the config reading state to find the correct handler. For instance, if the config is reading, it will ignore the command handlers and if config is not reading, it will ignore the config commands.\nNow the command handlers can make the assumption that they are running outside config loading because they are in this array and won't ever be considered otherwise.\n```c\nstatic struct cmd_handler handlers[] = {\n    { \"bindcode\", cmd_bindcode },\n    { \"bindsym\", cmd_bindsym },\n    { \"exec\", cmd_exec },\n    { \"exec_always\", cmd_exec_always },\n    { \"include\", cmd_include },\n    { \"input\", cmd_input },\n    { \"output\", cmd_output },\n    { \"seat\", cmd_seat },\n    { \"workspace\", cmd_workspace },\n};\nstatic struct cmd_handler config_handlers[] = {\n    { \"set\", cmd_set },\n};\nstatic struct cmd_handler command_handlers[] = {\n    { \"exit\", cmd_exit },\n    { \"focus\", cmd_focus },\n    { \"kill\", cmd_kill },\n    { \"layout\", cmd_layout },\n    { \"reload\", cmd_reload },\n};\n```. Yeah pointer events are not workspace aware yet.. :+1: looks ok so far. how to test?. how to test?. :+1: good so far. The ipc shows the visible workspace as off-screen.\nWorkspace 1 (focused) (off-screen)\n  Output: X11-1\n  Layout: (null). Click events don't work for workspaces, but that's something I should fix today.. Segfault with this STR:\nOpen up a terminal. Switch workspaces. Open another terminal. pkill gnome-terminal.\nI can reproduce when any window closes on a not visible workspace.\n==2849==ERROR: AddressSanitizer: heap-use-after-free on address 0x602000019dd0 at pc 0x7f3fd5893d75 bp 0x7ffe8f5df580 sp 0x7ffe8f5decf8\nREAD of size 2 at 0x602000019dd0 thread T0\n    #0 0x7f3fd5893d74  (/usr/lib64/libasan.so.4.0.0+0x73d74)\n    #1 0x7f3fd590925f  (/usr/lib64/libasan.so.4.0.0+0xe925f)\n    #2 0x7f3fd5893eed  (/usr/lib64/libasan.so.4.0.0+0x73eed)\n    #3 0x7f3fd5894c65 in vfprintf (/usr/lib64/libasan.so.4.0.0+0x74c65)\n    #4 0x7f3fd45372c0 in wlr_log_stderr ../util/log.c:41\n    #5 0x7f3fd4537417 in _wlr_log ../util/log.c:67\n    #6 0x41fb8f in arrange_windows ../sway/tree/layout.c:213\n    #7 0x4213a1 in container_view_destroy ../sway/tree/view.c:105\n    #8 0x41d467 in handle_destroy ../sway/desktop/xdg_shell_v6.c:86\n    #9 0x7f3fd45386e1 in wlr_signal_emit_safe ../util/signal.c:29\n    #10 0x7f3fd453018a in xdg_surface_destroy ../types/wlr_xdg_shell_v6.c:265\n    #11 0x7f3fd45325d1 in wlr_xdg_client_v6_destroy ../types/wlr_xdg_shell_v6.c:1408\n    #12 0x7f3fd4762f2f  (/lib64/libwayland-server.so.0+0x7f2f)\n    #13 0x7f3fd47677f8  (/lib64/libwayland-server.so.0+0xc7f8)\n    #14 0x7f3fd476301c in wl_client_destroy (/lib64/libwayland-server.so.0+0x801c)\n    #15 0x7f3fd47630d7  (/lib64/libwayland-server.so.0+0x80d7)\n    #16 0x7f3fd4764c11 in wl_event_loop_dispatch (/lib64/libwayland-server.so.0+0x9c11)\n    #17 0x7f3fd4763449 in wl_display_run (/lib64/libwayland-server.so.0+0x8449)\n    #18 0x406cae in server_run ../sway/server.c:111\n    #19 0x40672a in main ../sway/main.c:414\n    #20 0x7f3fd3f0bf29 in __libc_start_main (/lib64/libc.so.6+0x20f29)\n    #21 0x405989 in _start (/home/tony/projects/sway/build/sway/sway+0x405989). :+1: . Closing the last view on a workspace doesn't clear the screen.. wlr-output-layout has no support for z-ordering so we'll have to address it there.. :+1: . Ready for review.. Ok ready for another review.. :+1: . Ok this is ready for review.. This notation is very hard to read, but I will do my best to parse it and make test cases and compare with the i3 behavior.. tests. test_move_into_split fails. It doesn't get the ordering right when you move in.. It goes after the focus-inactive view of the container in that direction.\n(view 1 focus)\n(container view2 (view3 focus-inactive) view4)\n(view 5)\n-> move right\n(container view2 view3 (view1 focus) view4)\n(view 5). You aren't supposed to flatten when you move out of a split. test. > Tangental: please make your s-expression syntax consistent\nI simplify parens when it is not ambiguous like in math, (1) + (1) == 1 + 1. . @orestisf1993 thanks for checking on this. You are welcome to write some tests if you want to make sure these cases will work in the future. Look at our sway-tests repository. I'm on #sway-devel as acrisci on freenode if you run into issues.. I made a crappy curses debug console script to see the layout. It won't completely work on sway until we get the binding event because it won't refresh when the layout changes otherwise though.. Ok ready to go.. Can you describe your test cases in weird lisp language?. > Is it possible to use \"container\" instead? \"con\" is a bit weird.\n\nDo we want to add a \"view\" type?\n\nI wish we could, but it would break compatibility.. Having experience doing the majority of the wl_shell implementation for wlroots, I can say without a doubt it's impossible to make a working desktop client with this protocol and I support its removal everywhere.. oops this is a mistake\n. Does this need a guard for if view focused is locked? (I'm not sure when view focus can be locked).\nAlso, does the order that we do things here matter much? It could be a bit simpler if not.\n. This is intended to be a replacement for update_view_border(). I will eventually make that function private and replace all occurrences of that function with this new function.\n. Does this look ok to you @zandrmartin?\n. If no mode is ever set, the drm backend won't ever start up and (I think) the user loses the ability to switch VT so this is a pretty hard crash for a single monitor setup.\nThe obvious solution is to just set the default mode, but that's a silent error if you don't know to check the logs.\nThis is an excellent use case for system notifications but we don't have those yet.. No need for this guard, just free.. You can get output layout extents with wlr_output_layout_get_box(layout, NULL).. event from what?. Would be simpler to just have a create func here rather than exposing output_config_defaults().. I think if there are no outputs, sway should exit.. Do we need to explicitly take it out of the output layout?. We'll need to standardize our create function names.. Unused?. If we're out of memory, this is probably going to fail too.. The output container could listen to the output layout change event and automatically keep these in sync.. Unused?. Have you considered not listening to scale/transform/resolution but only output layout changes for determining when to rearrange the windows?. Yeah I think you're right.. Yeah we need to do a big name cleanup because there are like 3 different conventions going on in the project right now.. None of these seem to accept spaces. When you specify multiple options/layouts, it is a comma separated list and adding spaces does not work. I will use checkarg to specify exactly 1 argument.. I'm going to defer fixing this until my next effort, which will be to render popups and subsurfaces and have them work with inputs. Hidpi support will definitely be part of that.. I did this in my head earlier and determined that the correct way to do this will actually be reverse BFS to get the ordering correct. We don't really have a tree to test it with though.. This is how vim indented it with ==.. I only tested changing the layout, which works for me.. This approach is definitely going to change once we have popups/subsurfaces within a tree, and I'll probably need to do something like this to swayc_descendents_of_type to get the ordering right. The abstractions to tree searches might change since rendering and input handling need to happen in reverse order. There are a lot of subtleties here, so I think we should leave this in and wait to do all the search abstractions in the effort to render a tree with arbitrary depth later.. I think the checkarg needs to expect 3 arguments for seat <name> <command> or seat <name> {, then the argc check will be useless. Maybe this was copied over from the back block, which doesn't require an identifier.. Nevermind, it gets the original args minus the first command. Going to fix it by doing another checkarg so a command like seat <name> attach is not valid.. I dunno I'm not going to do the cursor until last and all of this will probably change. I'm happy if it just shows up.. Do we know this is only pointer configuration or does this apply to any other devices like tablet tool or touch devices?. Touch devices and tablet tool devices will now be treated separately. Look at the rootston code for a preview of what touch and tablet tool support will look like.\nIf this configuration applies to tablet tool and touch, then it should be applied to those kinds of devices as well.. This looks right to me.. It looks correct to me. The destination should be copy and the source should be ic.. The design intent is a bit subtle because I'm trying to design for a specific future use case.\nThe \"focus inactive\" is emphasized because it is needed for rendering (\"focused inactive\" has different border colors) and determining where focus goes when entering a new container.\nFor instance, if I enter a container with some children and want to focus a leaf, focus should go to the \"focus inactive\" as defined as the last child container to receive focus within the container. In this case you use sway_seat_get_focus(seat, &con) for that specific container to get the right answer. In this case, it will not actually give you the absolute focused container.\nThe two use cases might actually be separate enough to warrant different functions. Then you can get rid of those checks for the main use case and have sway_seat_get_focus(seat) which acts on the root container and implicitly checks the has_focus, then another function what we have here which would be renamed sway_seat_get_focus_inactive(seat, con).\n\nDoes has_focus need to exist at all?\n\nI put this in because lots of places in the code right now checks if there is actually a focused window, but I'm not sure if we can ever actually get into this situation. For instance, if there are no containers below the workspace level, then the workspace itself could get implicit focus.\nIf you don't see a problem with assuming that there is always a focused container, then we can take it out. Otherwise the algorithm we use here will always return the first thing in the focus stack.\n. What about making it one of those cool things with a block like wl_list_for_each()?. \"rendering order\" means the order in which containers go through the rendering loop. Later elements in rendering order are rendered \"on top of\" prior elements. Parent containers are rendered below their children, so they will be later in the list. Floating containers appear on top of tiled containers, so they go in the list earlier.\nFor a given cursor coordinate, the cursor position might be under several containers at the same time, such as when the cursor is over a floating window with a tiled window underneath it. To determine which window gets the mouse click, we find the first window in \"reverse rendering order\". This is the window the user sees on top of the others.\nI'm sort of inventing this vocabulary right now, but I think it fits the domain.. My reasoning is that if we're ever in a situation where a new container doesn't get focused right away, this can be helpful to determine focus inactive because it encodes in what order the containers appeared. It might not be so easy though.. \ud83d\udc4d . I'm not sure how to do a bfs without allocating a queue. Maybe the queue could be allocated once and used for the lifetime of the application?\nIt gets worse when we want to do reverse bfs (which is input order) because that requires two lists: one for the queue, and one for the result in reverse order.\nEvent worse, I'm also thinking that BFS with containers in children array order might not truly be rendering order, but rather based on the focus-inactive stack. So a child later in the stack might need to be rendered on top even though they are siblings (if for instance it is the focused window). You can see this bug right now when the popups of the focused window will render below a sibling.. probably not. oops, fixed. https://en.wikipedia.org/wiki/Map_(higher-order_function)\n\nIn many programming languages, map is the name of a higher-order function that applies a given function to each element of a list, returning a list of results in the same order. \n\nThis function is not \"map\".. The first and only pointer is a container and it affects the state of the tree of the container. If that's not a container function, then what does it take to be a container function?. what about container_for_each_descendant? sounds more like english.. probably belongs in workspace.c. container_coalesce?. let's have container_num_children() otherwise we need a todo for floating.. reset to L_NONE?. is it supposed to update the orientation of the workspace when this becomes true on layout/mode changes?. we have cursor->seat->wlr_seat->pointer_state.focused_client. I wish these were abstracted though.. There's an ugly situation where this fails.\nThe focus inactive is the last focused container that is a child of the output. What if that window closes? The window that was focused before that might be on a different workspace.\nFocus inactive should revert to another window on the visible workspace in that case.\n. Yeah this function is conceptually correct.. #1670 . The function is cursor_at, but it doesn't return a cursor. Should be surface_at_cursor_position() or something similar.. I think the logic to find unmanaged views should be within the container_at function. They are on top of everything, so it should probably run no matter what the parent is.. The way this will work (like it works in rootston), you need to handle the case where you get a container but no surface. In this case, the user has moused over the decorations of the window.. TODO: use vim Kappa. view damage from what?. I think the main advantage of this is that now the output layout can change and we don't have to adjust all of the coordinates of all the containers in the tree.. This function takes layout coordinates and you have given it output coordinates.. A simplifying assumption you might be able to make here is that the main surface of a tiling window will never intersect with any output except the one it is on.. Does this check need to be done for every surface that is contained in the view such as popups?. Did you consider to unify set_size and set_position and take a box?. Can we not call these functions close? That name conflicts with another commonly used function.. change to sx and sy and you can remove the comment.. This signal is never removed.. no need for the null check. nothing seems to listen to this.. handler context has a seat.. can confirm it takes layout coords.. it's probably better to use the center point of the view for the reference. The word container is used in the documentation and some commands. Renaming it will either break people's configs or split the name for it between the code and the user docs which would be confusing.. Ok let's do it in another pr.. i3 is actually creating a container around the containers in the workspace in this case.. I dunno this is kind of janky now that I look at it.. I dunno this function gives me lots of weird problems. I think I can write it better.. related to my weird reaper bugs.. btw this only fixes my segfault at depth ~= 5. where do you put it?. In my testing, they seem to be effective in that workspaces honor workspace_layout only (I think), but I'm  not sure because I haven't looked into that part of the code deeply. Make an issue and I'll look into it.. what do you want to call it?. what's the reason for C_TYPES? It's never used except as an error condition.. I didn't write this lol. It's not related to closing, so I'll do it in another PR.. what is the input-method protocol?. what. functions that return bools should be like input_is_allowed or input_allowed. This sounds like it makes input allowed.. on i3, the scratchpad is a child of the root container.. It should be represented that way in the ipc get_tree or you'll break people's scripts.. have you considered using the send_focus function?. it may be better, set focus to NULL.. I think you should specify what happens to input focus of the existing clients when this gets created (and destroyed).. I think you could qualify this a bit better.. I don't want library users to dig into pointer_state. What about making a getter for this now that it's important?. is this way of getting the time compatible with what we get from the real events?. why are you roundtripping here?. Yeah, we can do that in another PR. This is only for closing.. No, it walks up the tree iteratively now. I can explain how it works later.. I think pending_width|height are already cached in wlroots. Can this be brought into the library?. You're right in the tiling case, but It might be needed for the floating case.. Containers can be fullscreen too :D. Fullscreen should certainly hide the bar, right? This is the main difference between fullscreen and maximized.\ni3 has configuration for popups during fullscreen but that is for transient surfaces, which I don't think we have with xdg-shell.\nThe overlay should be above the fullscreen surface.. I don't think this is so simple. You have to wait until the surface commits with a buffer the size of the screen before you can actually set it to be fullscreen. Otherwise you will flash partially rendered content.. ",
    "renekliment": "Well, shit, that was fast! \nIt works like a charm, thank you! So I guess the cool background uses some 3D or something?\nCan I use something for a static background like I use feh for a desktop background image in i3?\n. ",
    "robotanarchy": "Just an update on this issue: for me, it makes Firefox barely usable, because most of the time tooltips behave like regular windows - see the attached screenshot. (this happens, when hovering the 'x' on a tab - but not all the time).\n\n. Let's start with a logo concept. It's a mix of the wayland and i3 logos. What do you guys think?\nFeel free to use the idea, or modify the image or put it on a wallpaper.\n\nsvg\nSway looks really promising, can't wait until it has a status bar :>\n. about the logged in shell, consider locking it with vlock after starting sway (in the background).\n. I'd also prefer to make this optional. If possible, we should not undermine Waylands security concept, which seems to be a lot better than in X11 (source):\n\nWayland removes the threats from the X11 world. The protocols are designed in a secure way. A client cannot in any way interact with windows from other clients. This implies:\n- reading of key events for other windows is not possible\n- getting window content of other windows is not possible\nIn addition the protocols do not allow to e.g. position windows themselves, or raise themselves, change stacking order and so on.\n\nSure, there are other ways to attack. But this is a start. You could also chown your sway config to root to limit access to it.\n. This ~~might be related to~~ is probably a duplicate of Cloudef/wlc#104:\n\n\nOpen Firefox\nFirst, a tooltip gets displayed fine\nSecond time, the tooltip just doesn't show up\nThird time (and all following), it looks like on the screenshot.\nWhen restarting Firefox, the first tooltip is normal again etc.\n. I guess your best bet is to ask @Cloudef in IRC if he can help you to debug/fix this.\nAs I wrote in the other ticket, he suggested a bisect (trying to find out which commit actually introduced this bug). Maybe you can do that and report it to him, so he can fix it.\n. Hey thanks for trying to fix this, @chel8413!\n\n\nI guess you did not intend to do this, but as far as I know with your patch, the remaining code works the following way (probably not intended):\nc\n    if (view && (view->type & WLC_BIT_UNMANAGED))\n    {\n        if (view)\n           wlc_x11_window_set_active(&view->x11, true);\n    }\nSo when you want to render the if-condition useless, comment out both lines (or delete them, as dead code is not really a good thing):\nc\n    // if (view && (view->type & WLC_BIT_UNMANAGED))\n        // return;\n@chel8413: Does commenting out the whole if-codition also fix it for you?\n@SirCmpwn, @Cloudef: Does the fix look legit, or is this just randomly avoiding the race condition?\n. After dealing a long time with the issue:\n It is reproducible for me (and for probably everyone in this ticket), when running the stock Arch Linux packages.\n Using the git version (eg. from AUR) always \"fixes\" the issue. But not, because it is fixed, but because you're compiling a bit different - and thus the race condition does not get executed.\nI guess this is obvious already to @SirCmpwn and @Cloudef, but it is probably not obvious to everyone else. So again: installing the git version is a workaround that randomly works, but it does not fix the issue!\nThe obvious difference between the AUR PKGBUILD and the ABS PKGBUILD is for both sway and wlc: -DCMAKE_BUILD_TYPE=Upstream (AUR) vs. -DCMAKE_BUILD_TYPE=Release (ABS). So the bug gets triggered with the Release config only, as I see it.\nEDIT:  @aereaux has already written this down here: https://github.com/Cloudef/wlc/issues/104#issuecomment-211114850. I have created some log files, with a diff. @SirCmpwn, can you take a look at them?\nversions\nsway: 0.10-1\nwlc: 0.0.7-1\nwlc-git: 0.0.7.r7.gb5bf9e4-1\nsteps\nfor each log file:\n- run sway\nexport WLC_DEBUG=handle,render,render-loop,focus,xwm,keyboard,commit,request\nsway -d -V > logfile 2>&1\n- run dmenu (via hotkey combination)\n- start geany\n- click on \"File\"\n    - menu opens\n    - menu is focused\n- click on \"File\"\n    - menu closes\n    - focus back to geany\n- click on \"File\" another time\n    - menu opens\n    - menu is focused\n    - (BUG!) release build only: menu is invisible\n- click on \"File\"\n    - menu closes\n    - focus back to geany\n- run dmenu via shortcut\n- type in \"killall sway\"\ngenerate the diff (remove timestamps, colorized diff, add line numbers, convert to html):\ncat log_wlc.txt | cut -d '-' -f 2- > log_wlc_notimestamp.txt\ncat log_wlc-git.txt | cut -d '-' -f 2- > log_wlc-git_notimestamp.txt\ncolordiff -y -W 150 log_wlc_notimestamp.txt log_wlc-git_notimestamp.txt | cat -n | ansi2html > diff.html\nfiles\n\ncolorized diff (left: wlc, right: wlc-git)\nlog_wlc.txt\nlog_wlc-git.txt\n\n. I can confirm this on Arch Linux without systemd, and also that it works after running the following setcap command: setcap cap_sys_tty_config=ep /usr/bin/sway\nAdded this to the wiki.. I bet you have put some deep thought on this, but let me ask the obvious question: Why you want to restructure the whole repository, and rename everything?\nIt seems to me, an easier upgrade path would be the following:\n Do not rename the actual compositor from sway to \"i3wm\" (it is a completely different implementation after all!) or change the repository structure\n Create a new repository, that will have the replacement for wlc. Call it swaylc (sway library for compositors) or whatever :p\n* Begin replacing parts of wlc in sway with the new library, until everything is replaced.\nThe thing is, that sway is already used as day-to-day wm by some of us, including me, and I'd rather have a smooth transition than having stopped development and waiting for an unknown time period until wlc is replaced. Also the renaming will probably confuse people.\nPlus I find it awkward to have one repository, that will now have the code of a wlc-replacement, \"i3wm for wayland\", and possibly \"openbox for wayland\", tons of other tiling/simplistic wms, and to call all that together \"sway\" from now on.\nAside from that, I think it is a good thing to replace wlc, if we can have a better/faster/stronger sway in the long run. And privilege separation is something I definitely would like to see.. Thanks for the clarification, now it makes sense to me :+1: . Something I just thought about:\nPlease make the in-house compositor code (be it a separate library or not) fully POSIX (and therefore musl libc) compatible. This means, do not use any glibc specific features, such as qsort_r. wlc did this right from the start afaik, and it was later patched in sway. I think the best way would be, to specify a POSIX_SOURCE define when compiling sway.. ",
    "nim-": "I not skilled enough to comment on the difficulty of implementing this, but in regards to mouse resizing I think it would make sense to implement simultaneous x- and y-axis mouse resizing of tiled windows as other WM's (like bspwm for example) have done it.\nExample:\nhttp://youtu.be/U17CLayt_aA?t=14s\nThis is an accepted i3 feature request but has not been implemented yet, probably because it is very complex (see https://github.com/i3/i3/issues/1122). Since sway is being built up from the ground it might be cleaner to implement this than in vanilla i3, but I wouldn't know.\n. ",
    "FSMaxB": "Nice. I'm gonna try it out with GDM.\n. I've tried it with the following files:\n/usr/share/wayland-sessions/sway.desktop\n[Desktop Entry]\nName=Sway\nComment=SirCmpwn's Wayland window manager\nExec=sway\nType=Application\n/usr/share/xsessions/sway-xorg.desktop\n[Desktop Entry]\nName=Sway (Xorg)\nComment=SirCmpwn's Wayland window manager\nExec=sway\nType=Application\nWorks fine for me when using GDM. Note that the xsession file has to have a different name than the wayland session file.\n. There is no oneliner for arch because arch has no default AUR-Helper.\n. All I wanted to say is that there is no oneliner that works for everyone because different people use different AUR helpers.\n. A tree would also represent the data structure in which the windows are in. Nice idea in my opinion.\n. Couldn't this still be a bug in sway? It's not the drivers fault for crashing if you give it a faulty reference for example. It might be unlikely but I think the stack trace is not enough to rule out a bug in sway.\n. @hosaka: As for further debugging: You could test this on the free AMDGPU driver and compare if it still happens, if not you should probably contact AMD. \n. Is it possible to test this with a fuzzer like afl?. ",
    "oatberry": "I'm a fan of the screenshot tool idea. On the X11 side of things, I really like @naelstrof's maim tool. If you make a screenshot tool, please consider modeling it off maim's features and functionality.\n. ",
    "FreeFull": "The binding does work if I bind to $mod+Shift+sterling instead of $mod+Shift+3. This is rather keyboard-layout specific, though\n. Confirmed as fixed\n. I believe what happens is this: Xwayland fails due to a bug, and sway doesn't handle Xwayland failing gracefully.\n. Closing since it's a wlc bug\n. I'm thinking the wallpaper could be something nice and abstract, with \"sway\" written on it in a very stylised way.\n. Maybe something to do with termite running as a native wayland program, and urxvt running under Xwayland?\n. You might be able to change the screen resolution before you launch sway, using fbset.\nEdit: Actually, nevermind, that won't work\n. You can set which variables tmux grabs from its environment when it's attached in a terminal using the update-environment option. By default it's set to copy over some environment variables relating to Xorg.\n. I can reproduce this with both sway and orbment, so it's presumably a bug in WLC or libinput, and not in sway.\n. I'm not able to reproduce this either.\n. I can't reproduce this any more. I think either #720 or #716 have fixed this.\n. I'm guessing the issue is that gdm uses a hardware cursor, and sway uses a software cursor. I agree that it's a gdm bug, it should be clearing/disabling the hardware cursor.\n. Those messages seem to be related to wireless networking (wl would stand for wireless)\n. I've ran into this bug too, but I'm not sure if it's sway's fault, wlc's fault, or XWayland's fault either. It'd be a good idea to test it with Weston and also orbment if possible.\n. @sfgasdfsafggfgg CSD = \"Client-Side Decorations\", that is, the client itself draws its own window border and title bar.\n. Is this the same issue as #571 ?. I think this is just a symptom how cursor hiding/unhiding is generally unreliable in all software running on Sway.  For another example, see #3596 . For me it works if, while dragging, I use the keyboard to switch focus to the Firefox window. ",
    "n3rdopolis": "Ah yes. Sorry.\nsway: [ 33%] Building C object CMakeFiles/sway.dir/sway/list.c.o\nsway: /srcbuild/sway/sway/stringop.c: In function \u2018join_list\u2019:\nsway: /srcbuild/sway/sway/stringop.c:217:2: error: \u2018for\u2019 loop initial declarations are only allowed in C99 or C11 mode\nsway:   for (int i = 0; i < list->length; i++) {\nsway:   ^\nsway: /srcbuild/sway/sway/stringop.c:217:2: note: use option -std=c99, -std=gnu99, -std=c11 or -std=gnu11 to compile your code\nsway: /srcbuild/sway/sway/stringop.c:226:11: error: redefinition of \u2018i\u2019\nsway:   for (int i = 1; i < list->length; i++) {\nsway:            ^\nsway: /srcbuild/sway/sway/stringop.c:217:11: note: previous definition of \u2018i\u2019 was here\nsway:   for (int i = 0; i < list->length; i++) {\nsway:            ^\nsway: /srcbuild/sway/sway/stringop.c:226:2: error: \u2018for\u2019 loop initial declarations are only allowed in C99 or C11 mode\nsway:   for (int i = 1; i < list->length; i++) {\nsway:   ^\nsway: CMakeFiles/sway.dir/build.make:62: recipe for target 'CMakeFiles/sway.dir/sway/stringop.c.o' failed\nsway: make[2]: *** [CMakeFiles/sway.dir/sway/stringop.c.o] Error 1\nsway: make[2]: *** Waiting for unfinished jobs....\nsway: /srcbuild/sway/sway/handlers.c: In function \u2018handle_view_created\u2019:\nsway: /srcbuild/sway/sway/handlers.c:164:3: warning: format \u2018%ld\u2019 expects argument of type \u2018long int\u2019, but argument 3 has type \u2018wlc_handle\u2019 [-Wformat=]\nsway:    wlc_view_get_class(handle), wlc_view_get_app_id(handle));\nsway:    ^\nsway: /srcbuild/sway/sway/handlers.c:164:3: warning: format \u2018%ld\u2019 expects argument of type \u2018long int\u2019, but argument 6 has type \u2018wlc_handle\u2019 [-Wformat=]\nsway: /srcbuild/sway/sway/handlers.c: In function \u2018handle_view_destroyed\u2019:\nsway: /srcbuild/sway/sway/handlers.c:208:2: warning: format \u2018%lu\u2019 expects argument of type \u2018long unsigned int\u2019, but argument 3 has type \u2018wlc_handle\u2019 [-Wformat=]\nsway:   sway_log(L_DEBUG, \"Destroying window %lu\", handle);\nsway:   ^\nsway: /srcbuild/sway/sway/handlers.c: In function \u2018handle_view_state_request\u2019:\nsway: /srcbuild/sway/sway/handlers.c:265:4: warning: format \u2018%ld\u2019 expects argument of type \u2018long int\u2019, but argument 3 has type \u2018wlc_handle\u2019 [-Wformat=]\nsway:     sway_log(L_DEBUG, \"setting view %ld %s, fullscreen %d\", view, c->name, toggle);\nsway:     ^\nsway: /srcbuild/sway/sway/handlers.c: In function \u2018handle_key\u2019:\nsway: /srcbuild/sway/sway/handlers.c:324:7: warning: \u2018match\u2019 may be used uninitialized in this function [-Wmaybe-uninitialized]\nsway:     if (match) {\nsway:        ^\nsway: CMakeFiles/Makefile2:104: recipe for target 'CMakeFiles/sway.dir/all' failed\nsway: make[1]: *** [CMakeFiles/sway.dir/all] Error 2\nsway: Makefile:127: recipe for target 'all' failed\nsway: make: *** [all] Error 2\nsway: PackageInstallSource finished in 0 seconds\nsway:  PackagePostInstall finished in 0 seconds\n. I should mention I am using wlc master... I forgot that wlc isn't a submodule in sway...\n. seems that adding \nset(CMAKE_C_EXTENSIONS OFF)\nto CMakeLists.txt\ngets me further. \n. Hi. After these changes, sway compiles again under Debian Strech/Testing. I think it's issues with GCC 5 though\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\nindex afad812..25d73bc 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -2,6 +2,7 @@ cmake_minimum_required(VERSION 2.8.5)\n project(sway C)\n set(CMAKE_C_FLAGS \"-g\")\n set(CMAKE_C_STANDARD 99)\n+set(CMAKE_C_EXTENSIONS OFF)\n set(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"bin/\")\n add_definitions(\"-Wall -Wextra -Wno-unused-parameter\")\n set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR}/CMake)\ndiff --git a/CMakeLists.txt b/CMakeLists.txt\nindex afad812..25d73bc 100644\n--- a/CMakeLists.txt\n+++ b/CMakeLists.txt\n@@ -2,6 +2,7 @@ cmake_minimum_required(VERSION 2.8.5)\n project(sway C)\n set(CMAKE_C_FLAGS \"-g\")\n set(CMAKE_C_STANDARD 99)\n+set(CMAKE_C_EXTENSIONS OFF)\n set(CMAKE_RUNTIME_OUTPUT_DIRECTORY \"bin/\")\n add_definitions(\"-Wall -Wextra -Wno-unused-parameter\")\n set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${PROJECT_SOURCE_DIR}/CMake)\ndiff --git a/sway/commands.c b/sway/commands.c\nindex e79746a..d7e716b 100644\n--- a/sway/commands.c\n+++ b/sway/commands.c\n@@ -6,6 +6,7 @@\n #include <errno.h>\n #include <string.h>\n #include <unistd.h>\n+#include <sys/types.h>\n #include <ctype.h>\n #include \"stringop.h\"\n #include \"layout.h\"\ndiff --git a/sway/main.c b/sway/main.c\nindex e03588e..97243f9 100644\n--- a/sway/main.c\n+++ b/sway/main.c\n@@ -3,6 +3,7 @@\n #include <stdbool.h>\n #include <wlc/wlc.h>\n #include <sys/wait.h>\n+#include <sys/types.h>\n #include <signal.h>\n #include <getopt.h>\n #include \"layout.h\"\n. I had to include #include  because of pid_t being undefined somhow ....after I added set(CMAKE_C_EXTENSIONS OFF) to CMakeLists.txt\n. Thanks!\n. ",
    "TuxCoder": "Add set (CMAKE_C_STANDARD 99) to the CMakeLists.txt fixes the problem for me.\nref: http://stackoverflow.com/questions/24840030/forcing-c99-in-cmake-to-use-for-loop-initial-declaration\nMy os is debian sid.\n. Add set (CMAKE_C_STANDARD 99) to the CMakeLists.txt fixes the problem for me.\nref: http://stackoverflow.com/questions/24840030/forcing-c99-in-cmake-to-use-for-loop-initial-declaration\nMy os is debian sid.\n. ",
    "nicklaswj": "The fix doesn't replicate the exact behavior of i3wm.\nEdit: I have just discovered that I have forgot to remove two lines of test code. I'll fix that, and sorry\n. The fix doesn't replicate the exact behavior of i3wm.\nEdit: I have just discovered that I have forgot to remove two lines of test code. I'll fix that, and sorry\n. will do\n. ",
    "diggit": "With latest wlc and sway switching between ttys and sway is ok. But I get black screen when switching from X to sway directly. Then I have to kill sway through ssh. Using Archlinux.\n. ",
    "ArchieT": "Hm, after update which I performed few minutes ago I didn't try -d, and now it outputs some messages.\nContents of sway.log:\nLoading config\nHandling command 'set $home /home/mf'\nHandling command 'set $config /home/mf/.config'\nChecking for config at /home/mf/.sway/config\nChecking for config at /home/mf/.config/sway/config\nHandling command 'set $mod Mod4'\nHandling command 'set $term urxvt'\nHandling command 'set $menu dmenu_run'\nHandling command 'bindsym $mod+Return exec $term'\nbindsym - Bound Mod4+Return to command exec urxvt\nHandling command 'bindsym $mod+Shift+q kill'\nbindsym - Bound Mod4+Shift+q to command kill\nHandling command 'bindsym $mod+d exec $menu'\nbindsym - Bound Mod4+d to command exec dmenu_run\nHandling command 'floating_modifier $mod'\nHandling command 'bindsym $mod+Shift+c reload'\nbindsym - Bound Mod4+Shift+c to command reload\nHandling command 'bindsym $mod+Shift+r restart'\nbindsym - Bound Mod4+Shift+r to command restart\nHandling command 'bindsym $mod+Shift+e exit'\nbindsym - Bound Mod4+Shift+e to command exit\nHandling command 'bindsym $mod+h focus left'\nbindsym - Bound Mod4+h to command focus left\nHandling command 'bindsym $mod+j focus down'\nbindsym - Bound Mod4+j to command focus down\nHandling command 'bindsym $mod+k focus up'\nbindsym - Bound Mod4+k to command focus up\nHandling command 'bindsym $mod+l focus right'\nbindsym - Bound Mod4+l to command focus right\nHandling command 'bindsym $mod+Left focus left'\nbindsym - Bound Mod4+Left to command focus left\nHandling command 'bindsym $mod+Down focus down'\nbindsym - Bound Mod4+Down to command focus down\nHandling command 'bindsym $mod+Up focus up'\nbindsym - Bound Mod4+Up to command focus up\nHandling command 'bindsym $mod+Right focus right'\nbindsym - Bound Mod4+Right to command focus right\nHandling command 'bindsym $mod+Shift+h move left'\nbindsym - Bound Mod4+Shift+h to command move left\nHandling command 'bindsym $mod+Shift+j move down'\nbindsym - Bound Mod4+Shift+j to command move down\nHandling command 'bindsym $mod+Shift+k move up'\nbindsym - Bound Mod4+Shift+k to command move up\nHandling command 'bindsym $mod+Shift+l move right'\nbindsym - Bound Mod4+Shift+l to command move right\nHandling command 'bindsym $mod+Shift+Left move left'\nbindsym - Bound Mod4+Shift+Left to command move left\nHandling command 'bindsym $mod+Shift+Down move down'\nbindsym - Bound Mod4+Shift+Down to command move down\nHandling command 'bindsym $mod+Shift+Up move up'\nbindsym - Bound Mod4+Shift+Up to command move up\nHandling command 'bindsym $mod+Shift+Right move right'\nbindsym - Bound Mod4+Shift+Right to command move right\nHandling command 'bindsym $mod+1 workspace 1'\nbindsym - Bound Mod4+1 to command workspace 1\nHandling command 'bindsym $mod+2 workspace 2'\nbindsym - Bound Mod4+2 to command workspace 2\nHandling command 'bindsym $mod+3 workspace 3'\nbindsym - Bound Mod4+3 to command workspace 3\nHandling command 'bindsym $mod+4 workspace 4'\nbindsym - Bound Mod4+4 to command workspace 4\nHandling command 'bindsym $mod+5 workspace 5'\nbindsym - Bound Mod4+5 to command workspace 5\nHandling command 'bindsym $mod+6 workspace 6'\nbindsym - Bound Mod4+6 to command workspace 6\nHandling command 'bindsym $mod+7 workspace 7'\nbindsym - Bound Mod4+7 to command workspace 7\nHandling command 'bindsym $mod+8 workspace 8'\nbindsym - Bound Mod4+8 to command workspace 8\nHandling command 'bindsym $mod+9 workspace 9'\nbindsym - Bound Mod4+9 to command workspace 9\nHandling command 'bindsym $mod+0 workspace 10'\nbindsym - Bound Mod4+0 to command workspace 10\nHandling command 'bindsym $mod+Shift+1 move container to workspace 1'\nbindsym - Bound Mod4+Shift+1 to command move container to workspace 1\nHandling command 'bindsym $mod+Shift+2 move container to workspace 2'\nbindsym - Bound Mod4+Shift+2 to command move container to workspace 2\nHandling command 'bindsym $mod+Shift+3 move container to workspace 3'\nbindsym - Bound Mod4+Shift+3 to command move container to workspace 3\nHandling command 'bindsym $mod+Shift+4 move container to workspace 4'\nbindsym - Bound Mod4+Shift+4 to command move container to workspace 4\nHandling command 'bindsym $mod+Shift+5 move container to workspace 5'\nbindsym - Bound Mod4+Shift+5 to command move container to workspace 5\nHandling command 'bindsym $mod+Shift+6 move container to workspace 6'\nbindsym - Bound Mod4+Shift+6 to command move container to workspace 6\nHandling command 'bindsym $mod+Shift+7 move container to workspace 7'\nbindsym - Bound Mod4+Shift+7 to command move container to workspace 7\nHandling command 'bindsym $mod+Shift+8 move container to workspace 8'\nbindsym - Bound Mod4+Shift+8 to command move container to workspace 8\nHandling command 'bindsym $mod+Shift+9 move container to workspace 9'\nbindsym - Bound Mod4+Shift+9 to command move container to workspace 9\nHandling command 'bindsym $mod+Shift+0 move container to workspace 10'\nbindsym - Bound Mod4+Shift+0 to command move container to workspace 10\nHandling command 'bindsym $mod+h splith'\nbindsym - Bound Mod4+h to command splith\nHandling command 'bindsym $mod+v splitv'\nbindsym - Bound Mod4+v to command splitv\nHandling command 'bindsym $mod+s layout stacking'\nbindsym - Bound Mod4+s to command layout stacking\nHandling command 'bindsym $mod+w layout tabbed'\nbindsym - Bound Mod4+w to command layout tabbed\nHandling command 'bindsym $mod+e layout toggle split'\nbindsym - Bound Mod4+e to command layout toggle split\nHandling command 'bindsym $mod+f fullscreen'\nbindsym - Bound Mod4+f to command fullscreen\nHandling command 'bindsym $mod+Shift+space floating toggle'\nbindsym - Bound Mod4+Shift+space to command floating toggle\nHandling command 'bindsym $mod+space focus mode_toggle'\nbindsym - Bound Mod4+space to command focus mode_toggle\nHandling command 'bindsym $mod+a focus parent'\nbindsym - Bound Mod4+a to command focus parent\nHandling command 'bindsym $mod+Shift+minus move scratchpad'\nbindsym - Bound Mod4+Shift+minus to command move scratchpad\nHandling command 'bindsym $mod+minus scratchpad show'\nbindsym - Bound Mod4+minus to command scratchpad show\n[wlc] WLC-1 Chose mode (0) 1280x1024\nOutput 1 resolution changed to 1280 x 1024\n[wlc] /opt/vc/lib/libEGL.so: undefined symbol: glPointSizePointerOES\n[wlc] Could not initialize any context\n[wlc] Removed bsurface from output (1)\nAdded output 1:WLC-1\nAdding 0x9a8a30 (1, 1280.000000x1024.000000) to 0x357b0 (0, 0.000000x0.000000)\nWorkspace: Generating new name\nGot valid workspace command for target: '1'\nWorkspace: Found free name 1\nAdded workspace 1 for output 1\nAdding 0x9a3ad0 (2, 1280.000000x1024.000000) to 0x9a8a30 (1, 1280.000000x1024.000000)\nSetting focus to 0x9a8a30:1\n[wlc] Added output (1)\n[wlc] become active\n[wlc] Cleanup wlc\n[wlc] Closing Xwayland\nEDIT: Tried the same on tty and the file is empty (maybe due to i3wm with midori with this issue page open on tty1, though (tried on tty2)).\n. Tried running sway -d 2> sway.log as the first command after reboot, still an empty file.\nWill try orbment in a moment.\nUpdate: Orbment is installing. BTW, if it will finally work for me, could you add armv7h to arch in AUR? I will use sway everyday, so I can be the tester ;)\n. orbment on tty (printed to stderr, I had to copy using gpm):\n```\nwlc: logind: session control granted\nwlc: Running on vt 1 (fd 0)\n(WARN) wlc: Failed to open X11 display\n(WARN) wlc: Failed to open device: /dev/dri/card0\nwlc: Closed drm\n(WARN) wlc: Could not initialize any backend\n(ERROR) wlc: Failed to init compositor\nwlc: Parent exit (455)\nwlc: Restoring vt 1 (0x4) (fd 0)\n```\norbment on i3 (also stderr, had to copy using mouse) (also, a white window for a split second):\nmf \ue0b0 ~ \ue0b0 orbment \nregistered plugin orbment () Hook api.\n(WARN) Could not open plugins directory: plugins\nregistered plugin core-dpsm () Core display power management.\nregistered plugin layout () Layout api.\nregistered plugin compressor () Compression api.\nregistered plugin compressor-ppm () Compression to ppm image format.\nregistered plugin keybind () Keybind api.\nregistered plugin configuration-ini () Configuration backend for the INI format.\nregistered plugin core-screenshot () Screenshot functionality.\nregistered plugin core-functionality () Core functionality.\nregistered plugin compressor-png () Compression to png image format.\nregistered plugin configuration () Configuration api.\nregistered plugin autostart () Launch programs on startup.\nregistered plugin core-layouts () Core set of layouts.\n(WARN) Could not open plugins directory: /home/mf/.local/share/orbment/plugins\nLoading plugin 'orbment'\nLoading plugin 'configuration'\nLoading plugin 'configuration-ini'\n(WARN) configuration-ini: Failed to open '/home/mf/.config/orbment/orbment.ini': No such file or directory\nLoading plugin 'keybind'\nLoading plugin 'core-dpsm'\nkeybind: Added keybind: Go to sleep (<P-d>)\nLoading plugin 'layout'\nkeybind: Added keybind: cycle clients (<P-h>)\nkeybind: Added keybind: next layout (<P-w>)\nLoading plugin 'compressor'\nLoading plugin 'compressor-ppm'\nLoading plugin 'compressor-png'\nLoading plugin 'core-screenshot'\nkeybind: Added keybind: take screenshot ppm (none)\nkeybind: Added keybind: take screenshot png (<SunPrint_Screen>, <P-s>)\nLoading plugin 'core-functionality'\nkeybind: Added keybind: exit (<P-Escape>)\nkeybind: Added keybind: close client (<P-q>)\nkeybind: Added keybind: spawn terminal (<P-Return>)\nkeybind: Added keybind: spawn bemenu (<P-p>)\nkeybind: Added keybind: toggle fullscreen (<P-f>)\nkeybind: Added keybind: focus next output (<P-l>)\nkeybind: Added keybind: focus next client (<P-j>)\nkeybind: Added keybind: focus previous client (<P-k>)\nkeybind: Added keybind: focus space 0 (<P-1>, <P-KP_1>)\nkeybind: Added keybind: focus space 1 (<P-2>, <P-KP_2>)\nkeybind: Added keybind: focus space 2 (<P-3>, <P-KP_3>)\nkeybind: Added keybind: focus space 3 (<P-4>, <P-KP_4>)\nkeybind: Added keybind: focus space 4 (<P-5>, <P-KP_5>)\nkeybind: Added keybind: focus space 5 (<P-6>, <P-KP_6>)\nkeybind: Added keybind: focus space 6 (<P-7>, <P-KP_7>)\nkeybind: Added keybind: focus space 7 (<P-8>, <P-KP_8>)\nkeybind: Added keybind: focus space 8 (<P-9>, <P-KP_9>)\nkeybind: Added keybind: focus space 9 (<P-0>, <P-KP_0>)\nkeybind: Added keybind: focus left space (<P-Left>)\nkeybind: Added keybind: focus right space (<P-Right>)\nkeybind: Added keybind: move to space 0 (<P-F1>)\nkeybind: Added keybind: move to space 1 (<P-F2>)\nkeybind: Added keybind: move to space 2 (<P-F3>)\nkeybind: Added keybind: move to space 3 (<P-F4>)\nkeybind: Added keybind: move to space 4 (<P-F5>)\nkeybind: Added keybind: move to space 5 (<P-F6>)\nkeybind: Added keybind: move to space 6 (<P-F7>)\nkeybind: Added keybind: move to space 7 (<P-F8>)\nkeybind: Added keybind: move to space 8 (<P-F9>)\nkeybind: Added keybind: move to space 9 (<P-F0>)\nkeybind: Added keybind: move to output 0 (<P-z>)\nkeybind: Added keybind: move to output 1 (<P-x>)\nkeybind: Added keybind: move to output 2 (<P-c>)\nkeybind: Added keybind: focus view (<B0>)\nLoading plugin 'autostart'\nLoading plugin 'core-layouts'\nlayout: Added layout: nmaster\nlayout: Added layout: grid\nlayout: Added layout: monocle\nkeybind: Added keybind: grow nmaster (<P-i>)\nkeybind: Added keybind: shrink nmaster (<P-o>)\nLoaded 13/13 plugins\n-- Orbment started --\nwlc: Activating tty\nwlc: WLC-1 Chose mode (0) 1280x1024\n(WARN) wlc: /opt/vc/lib/libEGL.so: undefined symbol: glPointSizePointerOES\n(WARN) wlc: Could not initialize any context\nwlc: Removed bsurface from output (1)\nwlc: Added output (1)\nwlc: become active\nwlc: Cleanup wlc\nwlc: Closing Xwayland\nkeybind: Removed keybind: Go to sleep\nkeybind: Removed keybind: exit\nkeybind: Removed keybind: close client\nkeybind: Removed keybind: spawn terminal\nkeybind: Removed keybind: spawn bemenu\nkeybind: Removed keybind: toggle fullscreen\nkeybind: Removed keybind: focus next output\nkeybind: Removed keybind: focus next client\nkeybind: Removed keybind: focus previous client\nkeybind: Removed keybind: focus space 0\nkeybind: Removed keybind: focus space 1\nkeybind: Removed keybind: focus space 2\nkeybind: Removed keybind: focus space 3\nkeybind: Removed keybind: focus space 4\nkeybind: Removed keybind: focus space 5\nkeybind: Removed keybind: focus space 6\nkeybind: Removed keybind: focus space 7\nkeybind: Removed keybind: focus space 8\nkeybind: Removed keybind: focus space 9\nkeybind: Removed keybind: focus left space\nkeybind: Removed keybind: focus right space\nkeybind: Removed keybind: move to space 0\nkeybind: Removed keybind: move to space 1\nkeybind: Removed keybind: move to space 2\nkeybind: Removed keybind: move to space 3\nkeybind: Removed keybind: move to space 4\nkeybind: Removed keybind: move to space 5\nkeybind: Removed keybind: move to space 6\nkeybind: Removed keybind: move to space 7\nkeybind: Removed keybind: move to space 8\nkeybind: Removed keybind: move to space 9\nkeybind: Removed keybind: move to output 0\nkeybind: Removed keybind: move to output 1\nkeybind: Removed keybind: move to output 2\nkeybind: Removed keybind: focus view\nkeybind: Removed keybind: grow nmaster\nkeybind: Removed keybind: shrink nmaster\nlayout: Removed layout: nmaster\nlayout: Removed layout: grid\nlayout: Removed layout: monocle\nkeybind: Removed keybind: cycle clients\nkeybind: Removed keybind: next layout\nkeybind: Removed keybind: take screenshot ppm\nkeybind: Removed keybind: take screenshot png\nDeloaded plugins\n-- Orbment is gone, bye bye! --\nwlc: Parent exit (1327)\n mf \ue0b0 ~ \ue0b0\n. ",
    "pickfire": "+1, I can't run sway too. Maybe this is the reason why velox doesn't work too.\n. +1, I can't run sway too. Maybe this is the reason why velox doesn't work too.\n. @fenque, can you please try velox.\n. @fenque, can you please try velox.\n. @fenque, I had that error too. Look at https://github.com/michaelforney/swc/issues/26#issuecomment-144071004.\n. @fenque, I had that error too. Look at https://github.com/michaelforney/swc/issues/26#issuecomment-144071004.\n. I uses the pi on arch which currently uses linux 4.1.20, I heard that 4.5 is a bit experimental. I will try it out if I get a chance.\n. What do you mean by that devicetree? I am actually not very sure what is devicetree.\n. @SirCmpwn Tested and working but sway is awfully slow when running on the pi even with gpu_mem=128. The display start to lag on mouse movement or keyboard input when I start an X-window application.. @SirCmpwn Tested and working but sway is awfully slow when running on the pi even with gpu_mem=128. The display start to lag on mouse movement or keyboard input when I start an X-window application.. @SirCmpwn I tried building the latest git but it doesn't build. Logs at http://sprunge.us/PaUP. @SirCmpwn I tried building the latest git but it doesn't build. Logs at http://sprunge.us/PaUP. @refacto I don't recall where I tried it, either alarm or alpine (probably not raspbian).. @refacto I don't recall where I tried it, either alarm or alpine (probably not raspbian).. i3 sometimes works with multi cursor but it might just gone wrong since the mouse focus is too random so applications are jumping around.\ndwm is running perfectly fine for me with multi-cursor setup (keyboard locked) but the just that the cursors are wrongly displayed.\nhttp://pickfire.tk/posts/linux/multi-pointer\nHaven't successfully tested multi seat. And haven't heard of multi-focus.. i3 sometimes works with multi cursor but it might just gone wrong since the mouse focus is too random so applications are jumping around.\ndwm is running perfectly fine for me with multi-cursor setup (keyboard locked) but the just that the cursors are wrongly displayed.\nhttp://pickfire.tk/posts/linux/multi-pointer\nHaven't successfully tested multi seat. And haven't heard of multi-focus.. > Is the sway binary setuid?\nProbably yes, the output of ls:\n-rwsr-xr-x 1 root root 303672 Mar 15 23:27 /usr/bin/sway*\n\n\nDo you have the correct caps enabled for it?\n\nWhat do you mean by that? Do I need to enable stuff for grsec compatibility?\n\nAre you in the input group?\n\nYes, I am in the input group.. > Is the sway binary setuid?\nProbably yes, the output of ls:\n-rwsr-xr-x 1 root root 303672 Mar 15 23:27 /usr/bin/sway*\n\n\nDo you have the correct caps enabled for it?\n\nWhat do you mean by that? Do I need to enable stuff for grsec compatibility?\n\nAre you in the input group?\n\nYes, I am in the input group.. I get nothing for getcap /usr/bin/sway. No errors as well.. I get nothing for getcap /usr/bin/sway. No errors as well.. @SirCmpwn Now I can't even start sway in a tty.\nDebug logs\n. @SirCmpwn Now I can't even start sway in a tty.\nDebug logs\n. Just notice that you had add that to the README, I had followed it (still does't work) and I get:\n\nI think that setcap needs to be done like the following since in will be overwritten:\nsudo setcap cap_sys_ptrace,cap_sys_tty_config=eip /usr/bin/sway. Just notice that you had add that to the README, I had followed it (still does't work) and I get:\n\n\nI think that setcap needs to be done like the following since in will be overwritten:\nsudo setcap cap_sys_ptrace,cap_sys_tty_config=eip /usr/bin/sway. Now it works but still doesn't solve the main issue where the mouse and keyboard still doesn't work. Note that I have updated the previous post.\n\nDebug logs. Now it works but still doesn't solve the main issue where the mouse and keyboard still doesn't work. Note that I have updated the previous post.\nDebug logs. The output that I get:\n```\n\nenv LIBGL_DEBUG=verbose glxgears\nMESA-LOADER: could not create udev device for fd 4\nlibGL: OpenDriver: trying /usr/lib/xorg/modules/dri/i965_dri.so\nlibGL: Can't open configuration file /etc/drirc: No such file or directory.\nlibGL: Can't open configuration file /home/ivan/.drirc: No such file or directory.\nlibGL: Using DRI2 for screen 0\nlibGL: Can't open configuration file /etc/drirc: No such file or directory.\nlibGL: Can't open configuration file /home/ivan/.drirc: No such file or directory.\nRunning synchronized to the vertical refresh.  The framerate should be\napproximately the same as the monitor refresh rate.\n304 frames in 5.0 seconds = 60.799 FPS\n300 frames in 5.0 seconds = 59.912 FPS\nIndeed, Alpine Linux uses grsecurity.. The output that I get:\nenv LIBGL_DEBUG=verbose glxgears\nMESA-LOADER: could not create udev device for fd 4\nlibGL: OpenDriver: trying /usr/lib/xorg/modules/dri/i965_dri.so\nlibGL: Can't open configuration file /etc/drirc: No such file or directory.\nlibGL: Can't open configuration file /home/ivan/.drirc: No such file or directory.\nlibGL: Using DRI2 for screen 0\nlibGL: Can't open configuration file /etc/drirc: No such file or directory.\nlibGL: Can't open configuration file /home/ivan/.drirc: No such file or directory.\nRunning synchronized to the vertical refresh.  The framerate should be\napproximately the same as the monitor refresh rate.\n304 frames in 5.0 seconds = 60.799 FPS\n300 frames in 5.0 seconds = 59.912 FPS\n``\nIndeed, Alpine Linux uses grsecurity..paxctldoesn't come with Alpine Linux by default. And how do I usepaxctlfor that?.paxctldoesn't come with Alpine Linux by default. And how do I usepaxctl` for that?. \n",
    "soredake": "Same problem, sway not starting and returns absolutely nothing.\n. @pickfire, i trying, but swc unable to fine wld Makefile:69: *** Could not find package wld.\n. Latest versions of wlc and sway, under weston sway successfully launches wlc-x11 with no errors.\nemerge --info log https://gist.github.com/fenque/b9738d15d4c055dcf2d1\n. Manually compiled version identical to the version that was installed with emerge.\n. Yes, my problem does not appear in the egl problems.\n. @SirCmpwn yes, same zero log as with version from package manager.\n. @SirCmpwn build from source gave progress, sway now successfully runs under X11 with the log no errors, but tty still return nothing\n. @SirCmpwn Yes, any parameter that I pass sway returns nothing. After reboot sway again now works in x11.\n. @SirCmpwn i use latest nouveau.\n. Hmm, if i run file directly (like ./sway -v), it prints version, progress...\n. @mikkeloscar with this https://gist.github.com/fenque/47a53f945efba701666b script from weston build instruction, sway successful starts from x11, in gentoo variable XDG_RUNTIME_DIR not set, so sway fails. And log from tty strace https://gist.github.com/fenque/3a1ef60422d0926b6131\n. @mikkeloscar i tried it many times, no log at all.\n. It has always been root\n. Still failing.\n. @SirCmpwn https://gist.github.com/fenque/f5f28f6bece659c56917 stray log\nsway log:\n```\n[wlc] Not running from X11 and no access to /dev/input/event0 or logind available\n. @SirCmpwn i'll try adding myself to input group.\n![1448807019](https://cloud.githubusercontent.com/assets/5204968/11457592/98745b14-96b5-11e5-84b7-c9de4c52ca50.png)\n. Finally works, but need script to create XDG_RUNTIME_DIR and do `sudo chmod a+s /usr/bin/sway` after every build, thanks all. Maybe we should mention this in the faq?\n. Yes, all system is up to date.\n. I recorded this videos after recompiling, so... for my setup it isn't fixed.\n. Yes, i recompile sway, wlc, and packages on which they depend after seeing a bug. Gentoo unstable.\n. 1.17.4\n. Still flickering with 1.18.0.\n. @kellpossible XEmbed is still not implemented.. Still happens to me in firefox with last versions wlc+sway\n. @SirCmpwn for me it's still crashing (torbrowser 7.0.6), i'll wait for wlroots to replace wlc and then re-test.. Quicky tested, browser works (but popups bug still present), mpv segfaults on all vo other than wayland.\nSteam throws this\nAssert( Assertion Failed: Fatal Error: OpenGL GLX extension not supported by display ):Main.cpp:313\n```\n. >appindicators\nI really want this for https://github.com/Bajoja/indicator-kdeconnect. @4e554c4c KStatusNotifierItem is kde only, not working on latest master.. ",
    "refacto": "@pickfire Did you try with the latest firmware? I can't reproduce, not on raspbian nor arch.. @pickfire Did you try with the latest firmware? I can't reproduce, not on raspbian nor arch.. Regarding support: I may be able to provide some support in #sway when I have the time and if there's a person needing support in German.. Regarding support: I may be able to provide some support in #sway when I have the time and if there's a person needing support in German.. Yup! . Yup! . azarus. azarus. Whoops, I didn't see that someone had already created a PR for translating to German. I'm sorry!. Whoops, I didn't see that someone had already created a PR for translating to German. I'm sorry!. Have suggested some changes,. Have suggested some changes,. I can add some explanation in the FAQ or wiki if there's demand.. I can add some explanation in the FAQ or wiki if there's demand.. Just a quick question -- Anything I could do to close the bounty for ARM support? ARM support is essentially here now.. Just a quick question -- Anything I could do to close the bounty for ARM support? ARM support is essentially here now.. sway ist kein Anzeigeserver, sondern ein Kompositor.. s/Punktdateien/Konfigurationsdateien/. Anstatt startx auszuf\u00fchren, f\u00fchr sway aus. Du kannst sway auch innerhalb\nX ausf\u00fchren, was n\u00fctzlich ist um zu testen. Manche Anzeige-manager k\u00f6nnten funktionieren, werden aber nicht von Sway unterst\u00fctzt (gdm scheint relativ gut zu funktionieren).. Okay, disregard this specific suggestion.. ",
    "enricoT": "default_border none\nthis prevent wlc to make work mouse as a whip. ",
    "AndrieVorster": "Sorry now I see there is a PKGBUILD error...\n. Sorry now I see there is a PKGBUILD error...\n. -arch=(\"i386\" \"x86_64\")\n+arch=(\"i686\" \"x86_64\")\n. -arch=(\"i386\" \"x86_64\")\n+arch=(\"i686\" \"x86_64\")\n. Thanks!\n. Thanks!\n. [apie@mecer ~]$ cat sway.log \nLoading config\nHandling command 'set $home /home/apie'\nHandling command 'set $config /home/apie/.config'\nChecking for config at /home/apie/.sway/config\nChecking for config at /home/apie/.config/sway/config\nChecking for config at /etc/sway/config\nHandling command 'set $mod Mod4'\nHandling command 'set $term urxvt'\nHandling command 'set $menu dmenu_run'\nHandling command 'bindsym $mod+Return exec $term'\nbindsym - Bound Mod4+Return to command exec urxvt\nHandling command 'bindsym $mod+Shift+q kill'\nbindsym - Bound Mod4+Shift+q to command kill\nHandling command 'bindsym $mod+d exec $menu'\nbindsym - Bound Mod4+d to command exec dmenu_run\nHandling command 'floating_modifier $mod'\nHandling command 'bindsym $mod+Shift+c reload'\nbindsym - Bound Mod4+Shift+c to command reload\nHandling command 'bindsym $mod+Shift+r restart'\nbindsym - Bound Mod4+Shift+r to command restart\nHandling command 'bindsym $mod+Shift+e exit'\nbindsym - Bound Mod4+Shift+e to command exit\nHandling command 'bindsym $mod+h focus left'\nbindsym - Bound Mod4+h to command focus left\nHandling command 'bindsym $mod+j focus down'\nbindsym - Bound Mod4+j to command focus down\nHandling command 'bindsym $mod+k focus up'\nbindsym - Bound Mod4+k to command focus up\nHandling command 'bindsym $mod+l focus right'\nbindsym - Bound Mod4+l to command focus right\nHandling command 'bindsym $mod+Left focus left'\nbindsym - Bound Mod4+Left to command focus left\nHandling command 'bindsym $mod+Down focus down'\nbindsym - Bound Mod4+Down to command focus down\nHandling command 'bindsym $mod+Up focus up'\nbindsym - Bound Mod4+Up to command focus up\nHandling command 'bindsym $mod+Right focus right'\nbindsym - Bound Mod4+Right to command focus right\nHandling command 'bindsym $mod+Shift+h move left'\nbindsym - Bound Mod4+Shift+h to command move left\nHandling command 'bindsym $mod+Shift+j move down'\nbindsym - Bound Mod4+Shift+j to command move down\nHandling command 'bindsym $mod+Shift+k move up'\nbindsym - Bound Mod4+Shift+k to command move up\nHandling command 'bindsym $mod+Shift+l move right'\nbindsym - Bound Mod4+Shift+l to command move right\nHandling command 'bindsym $mod+Shift+Left move left'\nbindsym - Bound Mod4+Shift+Left to command move left\nHandling command 'bindsym $mod+Shift+Down move down'\nbindsym - Bound Mod4+Shift+Down to command move down\nHandling command 'bindsym $mod+Shift+Up move up'\nbindsym - Bound Mod4+Shift+Up to command move up\nHandling command 'bindsym $mod+Shift+Right move right'\nbindsym - Bound Mod4+Shift+Right to command move right\nHandling command 'bindsym $mod+1 workspace 1'\nbindsym - Bound Mod4+1 to command workspace 1\nHandling command 'bindsym $mod+2 workspace 2'\nbindsym - Bound Mod4+2 to command workspace 2\nHandling command 'bindsym $mod+3 workspace 3'\nbindsym - Bound Mod4+3 to command workspace 3\nHandling command 'bindsym $mod+4 workspace 4'\nbindsym - Bound Mod4+4 to command workspace 4\nHandling command 'bindsym $mod+5 workspace 5'\nbindsym - Bound Mod4+5 to command workspace 5\nHandling command 'bindsym $mod+6 workspace 6'\nbindsym - Bound Mod4+6 to command workspace 6\nHandling command 'bindsym $mod+7 workspace 7'\nbindsym - Bound Mod4+7 to command workspace 7\nHandling command 'bindsym $mod+8 workspace 8'\nbindsym - Bound Mod4+8 to command workspace 8\nHandling command 'bindsym $mod+9 workspace 9'\nbindsym - Bound Mod4+9 to command workspace 9\nHandling command 'bindsym $mod+0 workspace 10'\nbindsym - Bound Mod4+0 to command workspace 10\nHandling command 'bindsym $mod+Shift+1 move container to workspace 1'\nbindsym - Bound Mod4+Shift+1 to command move container to workspace 1\nHandling command 'bindsym $mod+Shift+2 move container to workspace 2'\nbindsym - Bound Mod4+Shift+2 to command move container to workspace 2\nHandling command 'bindsym $mod+Shift+3 move container to workspace 3'\nbindsym - Bound Mod4+Shift+3 to command move container to workspace 3\nHandling command 'bindsym $mod+Shift+4 move container to workspace 4'\nbindsym - Bound Mod4+Shift+4 to command move container to workspace 4\nHandling command 'bindsym $mod+Shift+5 move container to workspace 5'\nbindsym - Bound Mod4+Shift+5 to command move container to workspace 5\nHandling command 'bindsym $mod+Shift+6 move container to workspace 6'\nbindsym - Bound Mod4+Shift+6 to command move container to workspace 6\nHandling command 'bindsym $mod+Shift+7 move container to workspace 7'\nbindsym - Bound Mod4+Shift+7 to command move container to workspace 7\nHandling command 'bindsym $mod+Shift+8 move container to workspace 8'\nbindsym - Bound Mod4+Shift+8 to command move container to workspace 8\nHandling command 'bindsym $mod+Shift+9 move container to workspace 9'\nbindsym - Bound Mod4+Shift+9 to command move container to workspace 9\nHandling command 'bindsym $mod+Shift+0 move container to workspace 10'\nbindsym - Bound Mod4+Shift+0 to command move container to workspace 10\nHandling command 'bindsym $mod+h splith'\nbindsym - Bound Mod4+h to command splith\nHandling command 'bindsym $mod+v splitv'\nbindsym - Bound Mod4+v to command splitv\nHandling command 'bindsym $mod+s layout stacking'\nbindsym - Bound Mod4+s to command layout stacking\nHandling command 'bindsym $mod+w layout tabbed'\nbindsym - Bound Mod4+w to command layout tabbed\nHandling command 'bindsym $mod+e layout toggle split'\nbindsym - Bound Mod4+e to command layout toggle split\nHandling command 'bindsym $mod+f fullscreen'\nbindsym - Bound Mod4+f to command fullscreen\nHandling command 'bindsym $mod+Shift+space floating toggle'\nbindsym - Bound Mod4+Shift+space to command floating toggle\nHandling command 'bindsym $mod+space focus mode_toggle'\nbindsym - Bound Mod4+space to command focus mode_toggle\nHandling command 'bindsym $mod+a focus parent'\nbindsym - Bound Mod4+a to command focus parent\nHandling command 'bindsym $mod+Shift+minus move scratchpad'\nbindsym - Bound Mod4+Shift+minus to command move scratchpad\nHandling command 'bindsym $mod+minus scratchpad show'\nbindsym - Bound Mod4+minus to command scratchpad show\n[wlc] libinput: resume\n[wlc] Activating tty\n[wlc] MODE: (0) 1024x768 *\n[wlc] Connector 1 is not connected or has no modes\n[wlc] Connector 2 is not connected or has no modes\n[wlc] LVDS-1 Chose mode (0) 1024x768\nOutput 1 resolution changed to 1024 x 768\n[wlc] Could not initialize any context\n[wlc] Released drm surface (0x9daae4c)\n[wlc] Removed bsurface from output (1)\nAdded output 1:LVDS-1\nAdding 0x9dad0d0 (1, 1024.000000x768.000000) to 0x805c860 (0, 0.000000x0.000000)\nWorkspace: Generating new name\nGot valid workspace command for target: '1'\nWorkspace: Found free name 1\nAdded workspace 1 for output 1\nAdding 0x9dac8a0 (2, 1024.000000x768.000000) to 0x9dad0d0 (1, 1024.000000x768.000000)\nSetting focus to 0x9dad0d0:1\n[wlc] Added output (1)\n[wlc] become active\n[wlc] Cleanup wlc\n[wlc] Closed drm\n[wlc] Closing Xwayland\n[wlc] Restoring vt 1 (0x4) (fd 0)\n. [apie@mecer ~]$ cat sway.log \nLoading config\nHandling command 'set $home /home/apie'\nHandling command 'set $config /home/apie/.config'\nChecking for config at /home/apie/.sway/config\nChecking for config at /home/apie/.config/sway/config\nChecking for config at /etc/sway/config\nHandling command 'set $mod Mod4'\nHandling command 'set $term urxvt'\nHandling command 'set $menu dmenu_run'\nHandling command 'bindsym $mod+Return exec $term'\nbindsym - Bound Mod4+Return to command exec urxvt\nHandling command 'bindsym $mod+Shift+q kill'\nbindsym - Bound Mod4+Shift+q to command kill\nHandling command 'bindsym $mod+d exec $menu'\nbindsym - Bound Mod4+d to command exec dmenu_run\nHandling command 'floating_modifier $mod'\nHandling command 'bindsym $mod+Shift+c reload'\nbindsym - Bound Mod4+Shift+c to command reload\nHandling command 'bindsym $mod+Shift+r restart'\nbindsym - Bound Mod4+Shift+r to command restart\nHandling command 'bindsym $mod+Shift+e exit'\nbindsym - Bound Mod4+Shift+e to command exit\nHandling command 'bindsym $mod+h focus left'\nbindsym - Bound Mod4+h to command focus left\nHandling command 'bindsym $mod+j focus down'\nbindsym - Bound Mod4+j to command focus down\nHandling command 'bindsym $mod+k focus up'\nbindsym - Bound Mod4+k to command focus up\nHandling command 'bindsym $mod+l focus right'\nbindsym - Bound Mod4+l to command focus right\nHandling command 'bindsym $mod+Left focus left'\nbindsym - Bound Mod4+Left to command focus left\nHandling command 'bindsym $mod+Down focus down'\nbindsym - Bound Mod4+Down to command focus down\nHandling command 'bindsym $mod+Up focus up'\nbindsym - Bound Mod4+Up to command focus up\nHandling command 'bindsym $mod+Right focus right'\nbindsym - Bound Mod4+Right to command focus right\nHandling command 'bindsym $mod+Shift+h move left'\nbindsym - Bound Mod4+Shift+h to command move left\nHandling command 'bindsym $mod+Shift+j move down'\nbindsym - Bound Mod4+Shift+j to command move down\nHandling command 'bindsym $mod+Shift+k move up'\nbindsym - Bound Mod4+Shift+k to command move up\nHandling command 'bindsym $mod+Shift+l move right'\nbindsym - Bound Mod4+Shift+l to command move right\nHandling command 'bindsym $mod+Shift+Left move left'\nbindsym - Bound Mod4+Shift+Left to command move left\nHandling command 'bindsym $mod+Shift+Down move down'\nbindsym - Bound Mod4+Shift+Down to command move down\nHandling command 'bindsym $mod+Shift+Up move up'\nbindsym - Bound Mod4+Shift+Up to command move up\nHandling command 'bindsym $mod+Shift+Right move right'\nbindsym - Bound Mod4+Shift+Right to command move right\nHandling command 'bindsym $mod+1 workspace 1'\nbindsym - Bound Mod4+1 to command workspace 1\nHandling command 'bindsym $mod+2 workspace 2'\nbindsym - Bound Mod4+2 to command workspace 2\nHandling command 'bindsym $mod+3 workspace 3'\nbindsym - Bound Mod4+3 to command workspace 3\nHandling command 'bindsym $mod+4 workspace 4'\nbindsym - Bound Mod4+4 to command workspace 4\nHandling command 'bindsym $mod+5 workspace 5'\nbindsym - Bound Mod4+5 to command workspace 5\nHandling command 'bindsym $mod+6 workspace 6'\nbindsym - Bound Mod4+6 to command workspace 6\nHandling command 'bindsym $mod+7 workspace 7'\nbindsym - Bound Mod4+7 to command workspace 7\nHandling command 'bindsym $mod+8 workspace 8'\nbindsym - Bound Mod4+8 to command workspace 8\nHandling command 'bindsym $mod+9 workspace 9'\nbindsym - Bound Mod4+9 to command workspace 9\nHandling command 'bindsym $mod+0 workspace 10'\nbindsym - Bound Mod4+0 to command workspace 10\nHandling command 'bindsym $mod+Shift+1 move container to workspace 1'\nbindsym - Bound Mod4+Shift+1 to command move container to workspace 1\nHandling command 'bindsym $mod+Shift+2 move container to workspace 2'\nbindsym - Bound Mod4+Shift+2 to command move container to workspace 2\nHandling command 'bindsym $mod+Shift+3 move container to workspace 3'\nbindsym - Bound Mod4+Shift+3 to command move container to workspace 3\nHandling command 'bindsym $mod+Shift+4 move container to workspace 4'\nbindsym - Bound Mod4+Shift+4 to command move container to workspace 4\nHandling command 'bindsym $mod+Shift+5 move container to workspace 5'\nbindsym - Bound Mod4+Shift+5 to command move container to workspace 5\nHandling command 'bindsym $mod+Shift+6 move container to workspace 6'\nbindsym - Bound Mod4+Shift+6 to command move container to workspace 6\nHandling command 'bindsym $mod+Shift+7 move container to workspace 7'\nbindsym - Bound Mod4+Shift+7 to command move container to workspace 7\nHandling command 'bindsym $mod+Shift+8 move container to workspace 8'\nbindsym - Bound Mod4+Shift+8 to command move container to workspace 8\nHandling command 'bindsym $mod+Shift+9 move container to workspace 9'\nbindsym - Bound Mod4+Shift+9 to command move container to workspace 9\nHandling command 'bindsym $mod+Shift+0 move container to workspace 10'\nbindsym - Bound Mod4+Shift+0 to command move container to workspace 10\nHandling command 'bindsym $mod+h splith'\nbindsym - Bound Mod4+h to command splith\nHandling command 'bindsym $mod+v splitv'\nbindsym - Bound Mod4+v to command splitv\nHandling command 'bindsym $mod+s layout stacking'\nbindsym - Bound Mod4+s to command layout stacking\nHandling command 'bindsym $mod+w layout tabbed'\nbindsym - Bound Mod4+w to command layout tabbed\nHandling command 'bindsym $mod+e layout toggle split'\nbindsym - Bound Mod4+e to command layout toggle split\nHandling command 'bindsym $mod+f fullscreen'\nbindsym - Bound Mod4+f to command fullscreen\nHandling command 'bindsym $mod+Shift+space floating toggle'\nbindsym - Bound Mod4+Shift+space to command floating toggle\nHandling command 'bindsym $mod+space focus mode_toggle'\nbindsym - Bound Mod4+space to command focus mode_toggle\nHandling command 'bindsym $mod+a focus parent'\nbindsym - Bound Mod4+a to command focus parent\nHandling command 'bindsym $mod+Shift+minus move scratchpad'\nbindsym - Bound Mod4+Shift+minus to command move scratchpad\nHandling command 'bindsym $mod+minus scratchpad show'\nbindsym - Bound Mod4+minus to command scratchpad show\n[wlc] libinput: resume\n[wlc] Activating tty\n[wlc] MODE: (0) 1024x768 *\n[wlc] Connector 1 is not connected or has no modes\n[wlc] Connector 2 is not connected or has no modes\n[wlc] LVDS-1 Chose mode (0) 1024x768\nOutput 1 resolution changed to 1024 x 768\n[wlc] Could not initialize any context\n[wlc] Released drm surface (0x9daae4c)\n[wlc] Removed bsurface from output (1)\nAdded output 1:LVDS-1\nAdding 0x9dad0d0 (1, 1024.000000x768.000000) to 0x805c860 (0, 0.000000x0.000000)\nWorkspace: Generating new name\nGot valid workspace command for target: '1'\nWorkspace: Found free name 1\nAdded workspace 1 for output 1\nAdding 0x9dac8a0 (2, 1024.000000x768.000000) to 0x9dad0d0 (1, 1024.000000x768.000000)\nSetting focus to 0x9dad0d0:1\n[wlc] Added output (1)\n[wlc] become active\n[wlc] Cleanup wlc\n[wlc] Closed drm\n[wlc] Closing Xwayland\n[wlc] Restoring vt 1 (0x4) (fd 0)\n. Xorg is able to run so it's nothing to do with permissions, graphics card etc....\n. Xorg is able to run so it's nothing to do with permissions, graphics card etc....\n. I am using inbuilt Intel Graphics... I will go thru my drivers and see which driver I am using.\n. I am using inbuilt Intel Graphics... I will go thru my drivers and see which driver I am using.\n. Output of lspci -v:\n00:02.0 VGA compatible controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02) (prog-if 00 [VGA controller])\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0, IRQ 11\n    Memory at f0000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe80000 (32-bit, non-prefetchable) [size=512K]\n    I/O ports at ec00 [size=8]\n    Expansion ROM at <unassigned> [disabled]\n    Capabilities: <access denied>\n    Kernel driver in use: i915\n    Kernel modules: i915\n. Output of lspci -v:\n00:02.0 VGA compatible controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02) (prog-if 00 [VGA controller])\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0, IRQ 11\n    Memory at f0000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe80000 (32-bit, non-prefetchable) [size=512K]\n    I/O ports at ec00 [size=8]\n    Expansion ROM at <unassigned> [disabled]\n    Capabilities: <access denied>\n    Kernel driver in use: i915\n    Kernel modules: i915\n. Output of sudo lspci -v\n```\n00:02.0 VGA compatible controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02) (prog-if 00 [VGA controller])\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0, IRQ 11\n    Memory at f0000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe80000 (32-bit, non-prefetchable) [size=512K]\n    I/O ports at ec00 [size=8]\n    Expansion ROM at  [disabled]\n    Capabilities: [d0] Power Management version 1\n    Kernel driver in use: i915\n    Kernel modules: i915\n00:02.1 Display controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02)\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0\n    Memory at e8000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe00000 (32-bit, non-prefetchable) [size=512K]\n    Capabilities: [d0] Power Management version 1\n    Kernel modules: i915\n00:1d.0 USB controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) USB UHCI Controller #1 (rev 03) (prog-if 00 [UHCI])\n    Subsystem: Uniwill Computer Corp Device 9020\n    Flags: bus master, medium devsel, latency 0, IRQ 11\n    I/O ports at e480 [size=32]\n    Kernel driver in use: uhci_hcd\n    Kernel modules: uhci_hcd\n``\n. Output ofsudo lspci -v`\n```\n00:02.0 VGA compatible controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02) (prog-if 00 [VGA controller])\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0, IRQ 11\n    Memory at f0000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe80000 (32-bit, non-prefetchable) [size=512K]\n    I/O ports at ec00 [size=8]\n    Expansion ROM at  [disabled]\n    Capabilities: [d0] Power Management version 1\n    Kernel driver in use: i915\n    Kernel modules: i915\n00:02.1 Display controller: Intel Corporation 82852/855GM Integrated Graphics Device (rev 02)\n    Subsystem: Uniwill Computer Corp Device 9500\n    Flags: bus master, fast devsel, latency 0\n    Memory at e8000000 (32-bit, prefetchable) [size=128M]\n    Memory at ffe00000 (32-bit, non-prefetchable) [size=512K]\n    Capabilities: [d0] Power Management version 1\n    Kernel modules: i915\n00:1d.0 USB controller: Intel Corporation 82801DB/DBL/DBM (ICH4/ICH4-L/ICH4-M) USB UHCI Controller #1 (rev 03) (prog-if 00 [UHCI])\n    Subsystem: Uniwill Computer Corp Device 9020\n    Flags: bus master, medium devsel, latency 0, IRQ 11\n    I/O ports at e480 [size=32]\n    Kernel driver in use: uhci_hcd\n    Kernel modules: uhci_hcd\n```\n. I have recompiled/reinstalled and it is still not working.\nSame log output...\n. I get no output at all!\n. Thanks.\n. Thanks...\n. ",
    "xanecs": "I just installed it from git and I can confirm this strange behaviour.\nalso arch x86_64, Intel graphics, running from TTY\n. ",
    "zetok": "Problem with windows disappearing is also reproducible by quickly changing size of window even with a keyboard ($mod + r + $mod + j).\nWhen doing that on 73af58152b24e0cfe28f6c613e8e7523ffb515fc windows become \"invisible\" and \"freeze\" sway. By r-clicking in a terminal that became invisible I somehow managed to unfreeze sway, and from there I could close one of invisible terminals - the other one became visible.\nWith 73af58152b24e0cfe28f6c613e8e7523ffb515fc reverted resizing doesn't cause sway to \"freeze\" and it's a lot harder to make windows \"invisible\",\nOn a downside of revert, resizing is a lot slower, and there are more graphical glitches when resizing.\n. Sadly, 5539fd89be99bcec6d5eeb43c6123954ce59038e doesn't fix the problem - instead it introduces regression, which renders sway useless, since no processes can be launched, keyboard is being held hostage by sway, so that switching to tty is possible only after SysRq + r..\nThere also was some error message about not handling signal correctly after I killed sway from another tty.\nReverting 5539fd89be99bcec6d5eeb43c6123954ce59038e fixes the regression.\nPlease reopen.\n. Looks like 18f4905e62e1fb2042abd79b2a4c756187e3d506 fixed it for me.\n. yep, will do\n. Actually, not a sway bug. Since gdk-pixbuf is used for images, it needed to be recompiled with +jpeg USE flag.\n. ```\n0x00007ffff76532fb in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:55\n55  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n(gdb) bt\n0  0x00007ffff76532fb in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:55\n1  0x00007ffff76547d0 in __GI_abort () at abort.c:89\n2  0x00007ffff7695984 in __libc_message (do_abort=do_abort@entry=2, fmt=fmt@entry=0x7ffff7792960 \" Error in `%s': %s: 0x%s \\n\") at ../sysdeps/posix/libc_fatal.c:175\n3  0x00007ffff769b58e in malloc_printerr (action=3, str=0x7ffff7792988 \"munmap_chunk(): invalid pointer\", ptr=) at malloc.c:4960\n4  0x0000555555556b67 in main (argc=2, argv=0x7fffffffdcf8) at /var/tmp/portage/wayland-wm/sway-9999/work/sway-9999/swaygrab/main.c:257\n```\nthis?\n. > That looks like a different backtrace?\nYeah, since it's reproducible I just ran it again under gdb.\n. Actually, nvm, looks like sway was using other config, which was still pointing to the old path.\n. ",
    "somebears": "this might not be of importance as I cannot reproduce this, but in the case it can help resolving this:\nI had opened two terminals, when resizing($mod + right mouse) only one of the windows disappeared (instead of the usual both) the second one seemed to be resized to a very small size(partially visible scrollbar). While I would have expected that it would reside on either side of the screen or in the centre, but it was roughly one third into the middle from the left side of the screen.\nWhen attempting to resize it to the proper size, the window disappeared.\n. Looking at the source of orbment (WM developed by the developer of wlc), it seems like libinput configuration is done in the WM\nsee:\nhttps://github.com/Cloudef/orbment/blob/229a870dbbb9dbc66c137cf2747eab11acdf1a95/plugins/core-input/core-input.c\n. I don't have the experience/knowledge for that, sorry.\nI suspect, that it would work very similar to the orbment version. The problem is getting the device. I suspect that there is an event you can look for, as done in https://github.com/Cloudef/orbment/blob/b0d3016275222a6a27bbeae9f9344c8ea0d2690c/src/hooks.c\nHowever, sway does not use anything similar as far as I can tell.\n. I don't know, I unfortunately had to switch to proprietary drivers and away from wayland/sway.\n. ",
    "Hello71": "@ddevault SIGCHLD SIG_IGN is inherited through execve on Linux.. keybind repeat still doesn't work in wlroots. useful commands to repeat include resizing and brightness or volume adjustments.. This seems to have been resolved at some point.. git master. I see that the libinput is initialized after the config is read, so I have no idea how this is supposed to work. (maybe I should look at the output config...). The name of the input got \"ad\" added to the end.. I don't understand the logic in 23c1c26c3fedf5470dbee9fe97c2374a48588863. . I also don't follow why we abort processing if expand_line fails, but keep trying if anything else goes wrong.. Seemed clearer to me as opposed to \"current_config\" and \"current_config\".. you are using git master, right?. ah. it only crashes if there is at least one window open on the current workspace, and the layout mode is set to tiling. it starts fine if there are no windows open or the layout mode is stacked or tabbed.\nedit: no, wait, it crashes in stacked mode too. tabbed mode is fine.. my display configuration is one screen at 1920x1080 with no scale. is your screen also the same? I tried killing swaybar (to fill the whole screen with picture), and starting estudio still crashed sway. I also tried using the stock sway config (sway -c /etc/sway/config) and it still crashed.. It doesn't crash anymore. Closing the \"open project/create project\" popup causes the editor window to resize incorrectly, but I don't really care because fullscreening and unfullscreening fixes it.. you know what, this is too much work, I'll just use xephyr or xpra or something. pretty sure, but it works now, so I guess that's fine. ",
    "sce": "When using sway_assert I just return NULL like the other code in sway seems to be doing. I don't actually know the effects of that though (e.g. the code I added to ipc_init doesn't take such a scenario into account...)\n. Okay, I'm doing an assert on malloc and snprintf, and if they fail I don't know what an appropriate action would be except aborting. So in that case the last commit can be reverted.\n. Oh okay. Let me know if there's anything else that needs to changed. Thanks for your time.\n. Ah of course, I misread your comment, I've fixed it now.\n. Thanks for your time and your quick response!\n. Excellent, thanks!\n. Thanks!\n. For some reason it doesn't work, the command just returns \"failed\". It's supposed to work, but I haven't looked into why yet. I can look into it now.\n. I don't know why that check was there, but changing resolution works on the fly via i3-msg now.\n. (That config reload check originated in commit 0bea2e2122bd573d1f9dc68b5a990c8f2ad3f3f0 .)\n. Excellent, thanks!\n. My pleasure, it's an excellent way for me to learn C. ;-)\n. That sounds like it would make things a lot easier, I'll have a go at it.\n. Sure, what do you want to call it?\n. Thanks for the review, let me know if there's anything else you want me to do.\n. Excellent, thanks for your time!\n. Fixed, thanks.\n. Hmm, there's also a thing with moving floating windows to another output: Sometimes the window disappears... Also, the floating window changes its geometry to become really small it seems.\n. I'm not sure, I'm going to investigate it.\n. I'm not sure, I'm going to investigate it.\n. Ah, both of those floating window issues exist in master as well.\n(On a side note I forgot to rebase this branch on top of master, so the history looks kind of wonky now. I'll do that and submit a new pull request.)\n. Ah, both of those floating window issues exist in master as well.\n(On a side note I forgot to rebase this branch on top of master, so the history looks kind of wonky now. I'll do that and submit a new pull request.)\n. So I found out why the floating windows resize upon changing workspace and fixed that (it's unrelated to my other code). I've been investigating the bug about disappearing windows (doesn't only happen to floating windows), but I don't have a clear fix yet (more info coming up).\n. https://github.com/sce/sway/commit/150e5d2ef8120c912c0e8feab78e8e4eb2d19572\nIf I set WLC_ACTIVE_BIT on all views after changing workspace, the bug is fixed (this might also fix the \"black windows upon tty switch\" issue #141 as the symptoms are similar).\nHowever, I believe the approach I'm taking just coincidentally works. That bit doesn't have to be set for the surfaces to redraw, but doing so triggers a refresh which does cause them to redraw (which is apparently needed when surfaces change workspace or outputs are destroyed and recreated).\nI think wlc needs a patch to fix this problem: either it needs to do the refreshes when needed or expose an interface to allow sway to do so when needed. (I would post a code example/pull request, but I don't have any yet ...) @Cloudef thoughts?\n. It's not just when being moved. In order to describe the bug clearly I made a new issue for it on wlc ( issue Cloudef/wlc#79 ).\n. All issues related to this code have been resolved (except the one that is triggered in wlc, but that bug exists in master also and it's not the fault of this code).\nSo this code is ready to merge, please review.\n. Excellent, thanks for your time!\n. No problem, done. The code works well, but if you want it implemented differently just let me know.\n. Excellent, thanks for your time!\n. https://github.com/SirCmpwn/sway/blob/36526e8cb2bfdfaf0b6c1f5679b8cf7a1f0db27c/sway/commands.c#L694\nDon't know why it tests for zero there, but that seems to be the culprit.\n. #205 still contains more functionality, so I'm not done with that yet (I'll update it appropriately).\n. Oh, sorry for being unclear.\n205 actually contains three separate functionalities. This pull request is the first one from #205 , it's unrelated to the other two, has no issues, and therefore can be merged.\nOnce this is merged I'll update (force push) #205 to only contain the unmerged code (the remaining two functionalities), and I'll continue the discussion there. Later, I'll clean up the remaining code in #205 and ask you for a formal review/merge of that pull request.\n. Excellent, thanks!\n. Yeah I just forgot :-p Thanks!\n. Done, let me know if there's anything else.\n. I forgot about that mouse_origin reference, it's removed now. Thanks for your time!\n. Thanks!\n. Excellent, thanks!\n. Source of error message (if it's any help): https://github.com/GNOME/gtk/blob/5ea692df23cf6caed7624554be46b8f39fe008ce/gdk/wayland/gdkeventsource.c#L167\n. Source of error message (if it's any help): https://github.com/GNOME/gtk/blob/5ea692df23cf6caed7624554be46b8f39fe008ce/gdk/wayland/gdkeventsource.c#L167\n. No problem, done.\n. No problem, done.\n. hahaha that's great, thanks for merging!\n. hahaha that's great, thanks for merging!\n. Excellent, thanks!\n. Excellent, thanks!\n. I've never tried it, I actually didn't know that feature even existed until I stumbled upon it in the documentation when hacking on sway.\nI guess some variant of \"predefined layout\" would be nice. E.g. being able to specify invisible \"placeholder containers\" for specific workspaces in the config file that are filled/replaced when views appear there. But yeah, low priority.\n. I've never tried it, I actually didn't know that feature even existed until I stumbled upon it in the documentation when hacking on sway.\nI guess some variant of \"predefined layout\" would be nice. E.g. being able to specify invisible \"placeholder containers\" for specific workspaces in the config file that are filled/replaced when views appear there. But yeah, low priority.\n. You just need to update wlc.\n. You just need to update wlc.\n. I think what happens is that floating view is being added as a sibling to the other floating view. add_sibling finds the index in workspace floating and then uses that to resize workspace children which causes the segfault, layout code here and here.\n. I think what happens is that floating view is being added as a sibling to the other floating view. add_sibling finds the index in workspace floating and then uses that to resize workspace children which causes the segfault, layout code here and here.\n. Excellent, thanks!\n. Excellent, thanks!\n. Please review, comments are welcomed. (Gosh, where are my manners. )\n. Please review, comments are welcomed. (Gosh, where are my manners. )\n. Thanks for fixing that, sorry for messing up the compare function (I didn't realize counting modifiers in it self was important).\n. Thanks for fixing that, sorry for messing up the compare function (I didn't realize counting modifiers in it self was important).\n. Thanks!\n. Thanks!\n. I see, no problem, fixed.\n. I see, no problem, fixed.\n. No problem, I figured it would ;-)\n. Done refactoring, and I've also fixed the other things you mentioned (whitespace, made app_id a regex). Please review again, comments are always welcomed.\n. Excellent, thanks for your time!\n. Thanks!\n. I'm pretty sure it fails here: https://github.com/Cloudef/wlc/blob/3b836aad5e6a281f78fb78c36d83be4857822334/src/wlc.c#L308-L309\nThat message is supposed to be logged by sway (the log handler is already set), so I'm not sure why it doesn't show up, maybe it needs to be flushed first (so that wlc doesn't quit before sway gets a chance to write the die-message to the log).\n. Ah, while the wlc log handler is set I now realize that of course the log for sway hasn't been initialized yet: https://github.com/SirCmpwn/sway/blob/master/sway/main.c#L127 (it happens after wlc_init which is the one that fails). That's why there's no log.\n. This is one of those where it's easier to review the code without whitespace changes, ie: https://github.com/SirCmpwn/sway/pull/263/files?w=1\n. Thanks!\n. Thanks!\n. (I also removed that comment because it doesn't make any sense / looks outdated.)\n. Yes, I've tested both.\n. Excellent, thanks!\n. Hmm... I'm looking in to it now.\n. I'm going to mention it here: I say that the second patch partially fixes swaybar irregularities because it restores the behaviour that my previous code changed. So far so good, however, what is actually happening is that the surface for swaybar has no size before it becomes visible for the first time (this is confirmed by the new debug output), and therefore the workspace will not \"move out of the way\". Once it becomes visible the surface correctly reports its size and the workspace adjusts accordingly.\nSo my theory is that it's only working correctly because gaps are being used. So if e.g. outer_gaps are in play then the swaybar will be immediately visible, swaybar will create a surface, and the workspace will move out of the way. (This has been the behaviour all along.)\n. The surface from the swaybar is still covered by the window on the workspace, so no surface will be created, and nothing is shown, unless something triggers it to create it, like e.g. a part of the surface becomes visible (which happens automatically if gaps are in play). That's my theory at least. I didn't mention this at once because I believe this has been the behaviour all along.\n. Whenever I would debug a segfault in sway I ran the following:\ngdb -batch -ex \"run -d\" -ex \"continue\" -ex \"bt\" ./bin/sway\nThis runs gdb in batch mode: After the first signal it simply continues and after the second one it prints a backtrace and exits. Hope this helps. [s/backspace/backtrace/, need more coffee]\n. @podhorsky-ksj that's even better, thanks.\n. cmd is freed later in this method, so I need to duplicate it. However, in the struct that string is never free-ed since it's supposed to be a const char* ... What's the right thing to do here?\n. Again, input is duplicated, but never freed ...\n. Ah I see, I'll do that.\n. Btw, I'm assuming that int compare(...) is the same as int (*compare)(...) when passed as an argument (I just mimicked the list_sort definition above). (Code works fine, I just want to make sure I know what I'm doing.)\n. I just blindly followed the i3 spec @ http://i3wm.org/docs/userguide.html#command_criteria (at the end it mentions that only some of them are regular expressions). But yeah, it reduces complexity when being consistent, so I'll change that.\n. Sure thing, I'll get on it.\n. [handlers.c:136] handle:11 type:0 state:0 parent:0 mask:1 (x:0 y:0 w:722 h:391) title:Terminal class:(null) appid:gnome-terminal-server\n[handlers.c:136] handle:12 type:0 state:0 parent:0 mask:1 (x:0 y:0 w:1920 h:1059) title:Volume Control class:(null) appid:pavucontrol\n[handlers.c:136] handle:8 type:8 state:0 parent:0 mask:1 (x:0 y:0 w:112 h:818) title:gkrellm class:gkrellm appid:(null)\nAh, turns out in wayland (or specifically xdg-shell) app_id is a string, e.g. dbus service name.\nhttps://github.com/Cloudef/wlc/blob/23cbe58d958911836698841aa1aab1c58f6c453d/protos/xdg-shell.xml#L197-L221\n. Ah, good catch. dmenu stays on top, but it's transferred to the new workspace. I'll fix it.\n. Hmm, actually after testing this, the behaviour with this patch is the same as before. The dmenu is transferred to the new workspace, but it stays on top and in focus. (Although if there's a wayland window maximized then it could steal focus, while xwayland windows don't. This is also the same behaviour as before.)\nI'm a little confused now, what is the expected behaviour? The unmanaged windows are a property of the output, so isn't this correct?\n. Okay, I'll remember that for next time. Thanks for merging!\n. I prefer the comment in the code, but just let me know if you want it in the commit message instead.\n. This is required by math.h, if this is not the right way to do this let me know.\n. Super, fixed!\n. ",
    "stapelberg": "Setting the resolution to half of the actual resolution makes everything big and blurry.\nhttps://github.com/Cloudef/wlc/issues/57 seems to be the relevant issue to track.\n. Sorry, just realized that this is a duplicate of #213.\n. I\u2019m assuming \u201cview\u201d in sway maps to \u201ccontainer\u201d in i3.\nThe idea behind not moving focus to the destination output is that it caters better to the use-case where you want to bulk-redistribute a couple of windows from one output/workspace. Imagine you just accumulate windows over time and then decided to clean them up and put them on proper workspaces. Focus staying on the source workspace means that you don\u2019t need to switch back and forth between workspaces/outputs. For people who prefer focus to allows follow the window, they can adjust the keybinding(s) from move to output <foo> to move to output <foo>, focus.\n. > How do you do this for a command like move left, so the focus follows the window which is moved to the output at the left of the current one?\nYou use move left, focus. Due to using the comma, both commands will be applied to the same window.\n. Please see https://github.com/i3/i3/issues/2257#issuecomment-210334756\n. > I wasn't satisfied with any of the available testing frameworks for C.\nWhich features were you missing, specifically?\nHave you considered implementing a blackbox test framework in a language other than C? As you might be aware of, i3 has a Perl test suite which I consider successful \u2014 certainly it has provided a lot of confidence for accepting contributions more quickly and doing larger refactorings. I consider having a comprehensive test suite vital for a FOSS project at a certain size, and the sooner it\u2019s started, the easier it is to implement :).\n. I\u2019m going to avoid getting into a debate about the merits of mocking, but let me give you two pieces of well-meant advice before becoming a lurker again:\n1. Perfect is the enemy of the good. i3\u2019s tests aren\u2019t the pinnacle of elegance either, but nevertheless they have helped a lot.\n2. If you are dead set on this approach and on doing it on your own, I\u2019d recommend to drop everything else and implement the test suite right away. A test suite will pay for itself very quickly.\n. Do I need to do anything to make weston-terminal support hidpi? \nWith sway 0.9 and wlc 0.0.5, I added output * scale 2 to my ~/.config/sway/config, but all fonts are still blurry \u2014 it looks like the applications were rendered at low-dpi, then scaled up:\n\nFor comparison, this is what I expect it to look like (from i3):\n\nI tried creating ~/.config/weston.ini with the following contents:\nini\n[output]\nname=eDP-1\nscale=2\n\u2026but that didn\u2019t change anything either.\n. Using gnome-terminal indeed works.\nI was originally trying weston-terminal because it was recommended in https://github.com/SirCmpwn/sway/issues/829#issuecomment-237478787\n. I can confirm that swaybar is now hidpi-compatible. Can we get window title bars next please? :)\n\n. From the userguide:\n\nCompares the X11 window ID, which you can get via xwininfo for example.\n\nThe window id is an arbitrarily chosen number, much like a pointer in C. It\u2019s not meaningful to do a regular expression match on the id, hence i3 just doesn\u2019t support it at all.\nFor what it\u2019s worth, i3 parses the id into an xcb_window_t, which is just a uint32_t underneath. Hence, it\u2019s not actually a string, but rather a number (in typically either decimal or hexadecimal). This also makes matching more efficient: in i3, we compare two uint32_ts, whereas, if you were to implement it as a regexp, you\u2019d need to first sprintf() the id into a string, then apply the regexp.\n. Matches on the window id have two use cases:\n1. i3 internally uses these when serializing state before an in-place restart, so that the same window will be matched when loading the state after the restart.\n2. IPC users can use this criterion in commands after locating a specific window in the tree.\n. ",
    "xeechou": "Hidpi support shouldn't be simply set resolution to half. But fonts and icons need to be adapted, right?\n. wayland protocol itself is per-output scale, so how do you expect wlc to change it?. ",
    "wzhd": "@SirCmpwn I set the resolution to half the actual resolution, but when I switch to X that runs at the actual resolution and switch back to sway, the resolution becomes the actual resolution. \n. ",
    "dobegor": "@SirCmpwn Cloudef/wlc#57 is closed now without any comment given. Is there any reason or fix? \n. Oh thanks, gonna check it out soon. \n. Could you please provide an example how do I calculate the needed resolution? \n. Thanks!\n. ",
    "mcoffin": "@SirCmpwn Will this effectively be solved with the move to wlroots in 1.0? I'm kind-of just waiting on that release to once again attempt moving to wayland, but hidpi would be a necessity.. > Don't wait, contribute.\nI was planning on taking a look at wlroots, and making sure that the things I wanted for HiDPI support were in there. That's why I was asking. I was just confirming that the move to wlroots was the planned way that this was going to get solved, and that I wouldnt' just be barking up the wrong tree.\n@SirCmpwn . ",
    "kon14": "almost works with xwayland enabled, positioning is somewhat broken (edit2: come to think of it that was due to my tiling 2 separate instances)\nedit: not that each conky instance acting like a window (check your conky config) won't work as expected sway (and possibly tiling wms for X too) unless you set a rule and let the window class float.\n. @robotanarchy I loved the logo myself, though it's indeed crossing the borders with i3.\nThe tree concept is nice, how about a rope swing swaying in the wind under the tree? Would defnitely be too much for a logo but could make a nice and elegant wallpaper. blue background and the tree/swing burned in with a darker shade?\n. I was thinking about something along those lines, yet I'm awful at gimp and can't actually reproduce the image I had in mind. Maybe add the logo beneath the grass on the left and a thick SWAY on the right, but that would ruin the minimal factor. \nDrawing is from google but I might be more successful in drawing the thing rather than editing it in gimp.\nedit: forget about the kid on the swing\n\n. As suggested on #sway, I've tried launching with various output lines in my  config file and used different pngs.\nThe format I should be using is, to my knowledge, supposed to be as follows:\noutput $DISPLAY bg /path/to/some/png stretch\nWhere $DISPLAY I've tried using WLC-0, WLC-1, 0, LVDS (the name of the display is not LVDS-0) depending on whether I'd be launching inside X or from a tty.\nIs it my format? Should I be doing something differently?\n. Have tried that too, Unknown/invalid command (tried full path to executable as well).\n. Just so as to clarify this, you mean use this from a terminal inside sway?\nsame as launching it in gdb before: free(): invalid next size (fast), backtrace and memory map get printed.\n. I feel quite embarassed about this, turns out it was my fault after all.\nI tried every naming pattern except for LVDS-1, expecting the names to be similar to what xrandr printed under X11, I even used xrandr (which returns XWAYLAND{0..X} under xwayland).\nBeing used to my desktop gpu's multiple output ports appended with ints I expected my laptop's LVDS to somehow differ as it was not appended by anything in xrandr, I then tried outputting to LVDS-0 rather than LVDS-1, that lead to me ruling this out.\ni3-msg -t get_outputs does the job perfectly under sway\nI'm glad it's working as expected now :) sorry for being an utter fool\n. Just rebuilt it today, could wlc be related? I didn't rebuild the latter yet but I'll be doing it anyway.\n. Same thing as before. \nI should note this behaviour was present in previous versions of Sway, I believe it's been that way ever since I started using it.\n. Just sway -d 2> ~/sway.log right? I believe I might be confusing myself with orbment a bit.\nI'm on gentoo, building diretly from git. I'll try following my instruction list for the loop in order to help navigate the output.\n. Here's the log, I removed the initialization/exit lines.\nI haven't been active in the irc lately but I bet most of those issues had to de with a) systemd (most gentoo users use openrc) and b) possibly non set environmental variables.\nSince superuser privileges are required by wlc in order to spawn sway, as is, outside of X without logind being present, gentoo users and everyone else not using systemd have to setuid sway (owned by root) before launching it, something that should be in the README.md\nchown root /path/to/sway && chmod u+s /path/to/sway is all that's required with /path/to/sway being /usr/local/bin/sway if default make install is used.\n. My bad then, think I've asked about this in #sway before as I couldn't find it at the time (could be I was blind all along?)\n. Yeap, must have been earlier then, glad it's there in any case.\n. This is related to what I've noticed in #303 (it's the same thing, only the issue is meant to cover another bug).\nReposting the important part for convenience:\nLaunching multiple windows horizontally (in the same workspace) creates a gap on the right end of the screen (gaps disabled), the width of which seems to increase the more windows you launch.\nIt's probably due to remaining pixels not being allocated to any of the windows (while dividing the screen's width / windows) but, since the gap is present on workspaces with even numbers of windows too (in that case horizontal pixels should divide perfectly), I'm kinda doubtful.\nThe above behaviour is reproduceable at any time on my 1366x768 display and might possibly affect vertical stacks too (it does affect them). The number of displayed windows required for the gap to show up might depend on the resolution.\n. - [ ] el_GR: @kon14\n    - [x] README (#1317)\n    - [ ] Man pages\n        - [ ] sway(1)\n        - [ ] sway(5)\n        - [ ] sway-bar\n        - [ ] sway-input\n        - [ ] swaymsg\n        - [ ] swaygrab\n        - [ ] swaylock\n        - [ ] sway-security\n    - [ ] FAQ\nI plan on doing the rest soon. Usually afking in IRC (kon14), GMT+2. I think it would be good to discuss where man page translations should be placed and agree on a naming format before we start submitting pull requests for those.\nIs a manpage directory to be created in each project the best approach? Should translation filenames be formatted as Name.Chapter.Lang.txt similarly to how README.mds are treated?\n. I noticed the man directories, I'm asking more in regards to the filename policy.\nSince there's still no translated manpage to make an example out of I'm not sure of what's expected of us. Perhaps I'm missing something?\nIt would also be nice if we could get some sort of documentation versioning or at least some way for users to tell if a translation is up to date. However that would needlessly complicate things and perhaps checking the last modification date of a translation and comparing that to the original file on this end would be all that's needed to keep things up to date.. I'll update this to reflect upon the above. Will also add a reply to the localization thread.. The caps lock inconsistency is a known bug that's been around for a while now (see #1266 for more)\nYou could work around it by specifying caps:none or caps:shiftlock in your XKB_DEFAULT_OPTIONS environmental variable and exporting it in a startup file appropriate for your shell.\nIf you're using some script to switch between layouts through setxkbmap (instead of reloading sway) you could apply the same workaround. Example: I use setxkbmap -option caps:shiftlock with a script called by macro key userspace driver to switch between (dvorak,gr) and (us,gr) for stuff that hardcodes for qwerty etc.. Possibly related to #1266 . ",
    "juju2143": "Conky works quite fine for me. I even wrote a lua script to get the current workspace. Allow me to share my config I did after many trial and error: https://gist.github.com/juju2143/aece6992955462333712\nOf course, starting from commit 6596582, you can set out_to_x = false and out_to_console = true in conky.conf and do a exec \"swaybar 0 conky\" instead in your sway config, but it will look less good.\n. Yeah, I know. You gotta follow the development of swaybar and make the necessary changes in your config as soon as they come out. Right now, swaybar only serves to reserve some space at the bottom so I can draw conky on it, but that would be nice if you can do that directly in conky somehow.\n. Sure. (Sorry for the ponies, though. xD)\n\nEdit: Also I see bar { } getting implemented in the commit log today, gotta try this out.\n. Colors would be nice. Are they supposed to be the standard ANSI escape codes?\n. @progandy Oh, that might be why I couldn't see anything in the bar after switching to the JSON format in my Conky config.\nOtherwise, fun fact, if you switch to the Lua config format, you can put somewhere in your config these lines, before config.text:\nprint([[{\"version\":1},\n[\n[],]])\nand you can directly put exec conky in status_command in your bar config.\n. Oh, it works as of 23df7ed now. Looks like a pretty simple fix.\n. I could definitely try to come up with a logo, that would be nice. I agree the default wallpaper could be a fancy, but simple gradient with the logo somewhere in there (when we come up with one) like many other WMs out there. It just works. Also you can definitely put several wallpapers to choose from in /usr/share/sway or something, if we have more than one default wallpaper.\n. Well, that works.\n. Shouldn't it be swaybar(5), to keep in line with the current naming?\n. ",
    "feliwyn": "\nWooow! I don't understand why are you speaking about i3bar. I can't use sway without conky. I like my conky bar :<\n. Ow... Some prob for me. My conky conf is here : https://github.com/feliwyn/i3config\n. @progandy Yeah! It's works!\nBut found another probleme. (I can open a new issue, if necessary)\nMode doesn't show their 'menu'\nhttps://paste.feliwyn.fr/?f11f28ed7b8123f2#1yzDh9Tfar5EZPo3hKvshoLp0qnuTPF9dq4btkGd09c=\nFor exemple, in this paste, the text : \"resize\" isn't show. So, you don't really now if you are in the mode or no.\nLike here : http://i.imgur.com/oAj31Fl.png\n. ",
    "thestinger": "@mikkeloscar You need to install paxd, or the userspace PaX features will be disabled.\n. ",
    "ookhoi": "I experiences crashes too on weston-terminal and uzbl (nothing else running yet). Sometimes on copy, sometimes on paste, sometimes on moving the mouse between two windows to paste something.\nThis is with wlc and sway cloned on the 2nd of February, on Debian sid/experimental with libwayland 1.9.0. No Xwayland.\nAnything I could do to help figure this out?\nThanks a lot for sway btw!\n. I experiences crashes too on weston-terminal and uzbl (nothing else running yet). Sometimes on copy, sometimes on paste, sometimes on moving the mouse between two windows to paste something.\nThis is with wlc and sway cloned on the 2nd of February, on Debian sid/experimental with libwayland 1.9.0. No Xwayland.\nAnything I could do to help figure this out?\nThanks a lot for sway btw!\n. ",
    "alive4ever": "Crashes still happening with gnome-terminal 3.22. This is gdb log when I started gnome-terminal-server, opening gnome-terminal client, and clicking on File menu bar.\n```\nStarting program: /usr/lib/gnome-terminal/gnome-terminal-server \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\n[New Thread 0x7fffea8e4700 (LWP 12098)]\n[New Thread 0x7fffea0e3700 (LWP 12099)]\n[New Thread 0x7fffe98e2700 (LWP 12100)]\n(gnome-terminal-server:12094): Gtk-WARNING **: Failed to get the GNOME session proxy: The name org.gnome.SessionManager is not owned\n(gnome-terminal-server:12094): Gtk-WARNING **: Failed to get the Xfce session proxy: The name org.xfce.SessionManager is not owned\n(gnome-terminal-server:12094): Gtk-WARNING **: Failed to get an inhibit portal proxy: The name org.freedesktop.portal.Desktop is not o\nwned\n[New Thread 0x7fffe2ed1700 (LWP 12110)]\n[New Thread 0x7fffe26d0700 (LWP 12111)]\n[Thread 0x7fffe26d0700 (LWP 12111) exited]\n(gnome-terminal-server:12094): Gdk-ERROR **: Error flushing display: Broken pipe\nThread 1 \"gnome-terminal-\" received signal SIGTRAP, Trace/breakpoint trap.\n0x00007ffff605cff1 in ?? () from /usr/lib/libglib-2.0.so.0\n0  0x00007ffff605cff1 in  () at /usr/lib/libglib-2.0.so.0\n1  0x00007ffff605f731 in g_log_writer_default () at /usr/lib/libglib-2.0.so.0\n2  0x00007ffff605db8c in g_log_structured_array () at /usr/lib/libglib-2.0.so.0\n3  0x00007ffff605de89 in g_log_structured () at /usr/lib/libglib-2.0.so.0\n4  0x00007ffff7018507 in  () at /usr/lib/libgdk-3.so.0\n5  0x00007ffff6056c89 in g_main_context_prepare () at /usr/lib/libglib-2.0.so.0\n6  0x00007ffff60576ab in  () at /usr/lib/libglib-2.0.so.0\n7  0x00007ffff605789c in g_main_context_iteration () at /usr/lib/libglib-2.0.so.0\n8  0x00007ffff661154d in g_application_run () at /usr/lib/libgio-2.0.so.0\n9  0x0000000000412909 in  ()\n10 0x00007ffff586d291 in __libc_start_main () at /usr/lib/libc.so.6\n11 0x0000000000412a3a in  ()\n```\nSwitching back to urxvt for default terminal.\n. I can confirm that with sway-git and wlc-git, the context menu and menu bar dropdown issue solved.\nHowever, the dropdown suggestion from Firefox address bar didn't show up as expected. The Firefox address bar suggestion is shown as plain small rectangle with no visible text.\nIs Firefox address bar suggestion related to this issue?\n. ",
    "main--": "After updating to sway 0.10, I'm seeing the same behavior as @alive4ever: gnome-terminal instantly crashes whenever any popup menu (both menu bar and context menu) is opened. As it triggers reliably, it might actually be a different issue than the one originally reported here.\nWhen I force it to xwayland, everything works fine as long as I use the dbus-launch workaround.\n. After updating to sway 0.10, I'm seeing the same behavior as @alive4ever: gnome-terminal instantly crashes whenever any popup menu (both menu bar and context menu) is opened. As it triggers reliably, it might actually be a different issue than the one originally reported here.\nWhen I force it to xwayland, everything works fine as long as I use the dbus-launch workaround.\n. By the way, I would love to have a way that disables all upscaling of non-highdpi-aware applications while still correctly telling the others about scale factors and scaling them down on non-highdpi displays (what you described in swaywm/wlroots#329).\nRight now I have highdpi disabled even for my 4k monitor because I strongly prefer hard-to-read over blurry.. By the way, I would love to have a way that disables all upscaling of non-highdpi-aware applications while still correctly telling the others about scale factors and scaling them down on non-highdpi displays (what you described in swaywm/wlroots#329).\nRight now I have highdpi disabled even for my 4k monitor because I strongly prefer hard-to-read over blurry.. So after some more extensive testing (aka everyday use), here's what I can reproduce reliably. Note that I have two displays, one 2K monitor that's connected via HDMI and one 4K monitor via DP.\n\nDisconnecting the second (DP) monitor works fine. Only when I reconnect it, the bar always becomes inverted and the new monitor's background is black.\nLaunching sway on the first (HDMI) monitor and only then connecting the other one works fine - no issue with the bars. However, many applications (emacs, mumble, etc) start rendering text (and only the text) in a bigger font size. Interestingly, this would be exactly what I want on my 4K monitor but it appears to be distinct from sway's actual highdpi support (I disabled that because I don't like the blurriness you get from scaling).\nDisconnecting the first monitor does not work. Sway never notices that it's gone and just keeps pretending it's still there until I reattach it. At least for my usecase (gpu passthrough) this is actually better as I don't usually want my window manager to move workspaces away from a display just because I temporarily switched it to Windows. Given that it still shows up as connected in /sys/class/drm I guess this is just the kernel being weird though.\n\nThe problem @craigcabrey and @DebugReport mention where the first monitor blacks out when I reconnect the second one did happen a few times on my system but I'm not able to reproduce it reliably. The same goes for the disappearing bar.\n@SirCmpwn Which of these do you think are wlc issues? If it helps, here are the logs.. So after some more extensive testing (aka everyday use), here's what I can reproduce reliably. Note that I have two displays, one 2K monitor that's connected via HDMI and one 4K monitor via DP.\n\nDisconnecting the second (DP) monitor works fine. Only when I reconnect it, the bar always becomes inverted and the new monitor's background is black.\nLaunching sway on the first (HDMI) monitor and only then connecting the other one works fine - no issue with the bars. However, many applications (emacs, mumble, etc) start rendering text (and only the text) in a bigger font size. Interestingly, this would be exactly what I want on my 4K monitor but it appears to be distinct from sway's actual highdpi support (I disabled that because I don't like the blurriness you get from scaling).\nDisconnecting the first monitor does not work. Sway never notices that it's gone and just keeps pretending it's still there until I reattach it. At least for my usecase (gpu passthrough) this is actually better as I don't usually want my window manager to move workspaces away from a display just because I temporarily switched it to Windows. Given that it still shows up as connected in /sys/class/drm I guess this is just the kernel being weird though.\n\nThe problem @craigcabrey and @DebugReport mention where the first monitor blacks out when I reconnect the second one did happen a few times on my system but I'm not able to reproduce it reliably. The same goes for the disappearing bar.\n@SirCmpwn Which of these do you think are wlc issues? If it helps, here are the logs.. The bar reliably disappears (crashes?) whenever I try to scroll through it (with mousewheel) once it's inverted.. The bar reliably disappears (crashes?) whenever I try to scroll through it (with mousewheel) once it's inverted.. Can this issue be revisited with wlroots? It's a perfect solution for applications like firefox where you can configure the application to upscale itself and the only missing link is xwayland. Configuring an override for the surface scale value on a per-application basis neatly works around this.\nI would write a patch myself but after skimming through the code for 2 hours and asking on IRC (no response) I still have no idea where to start. Any guidance would be much appreciated - firefox is the only application that's stopping me from enabling sway's scaling right now.. Can this issue be revisited with wlroots? It's a perfect solution for applications like firefox where you can configure the application to upscale itself and the only missing link is xwayland. Configuring an override for the surface scale value on a per-application basis neatly works around this.\nI would write a patch myself but after skimming through the code for 2 hours and asking on IRC (no response) I still have no idea where to start. Any guidance would be much appreciated - firefox is the only application that's stopping me from enabling sway's scaling right now.. @emersion Thanks a lot for your response. Since I'm not familiar with this codebase it's super hard for me to come up with an idea that's easy to implement. All I want is for my firefox to not be blurry on a highdpi display. That's it. And if the only way is some dirty hack that breaks upscaling entirely, so be it. (I remembered some idea about running all of xwayland at highdpi and then downscaling as necessary but I guess that's basically the same as telling firefox to do its own scaling)\nAny ideas at all how I could approach this?. @emersion Thanks a lot for your response. Since I'm not familiar with this codebase it's super hard for me to come up with an idea that's easy to implement. All I want is for my firefox to not be blurry on a highdpi display. That's it. And if the only way is some dirty hack that breaks upscaling entirely, so be it. (I remembered some idea about running all of xwayland at highdpi and then downscaling as necessary but I guess that's basically the same as telling firefox to do its own scaling)\nAny ideas at all how I could approach this?. @RyanDwyer Sadly, the state of Firefox Wayland can only be described as \"hot garbage\" right now - it's completely unusable with sway (I tried both the gnome flatpak nightly and building it myself from the repo). It honestly looks like it's going to take 1-2 years at least for this to be ready.\nFor example, any attempt to use the address bar instantly crashes the entire browser.. @RyanDwyer Sadly, the state of Firefox Wayland can only be described as \"hot garbage\" right now - it's completely unusable with sway (I tried both the gnome flatpak nightly and building it myself from the repo). It honestly looks like it's going to take 1-2 years at least for this to be ready.\nFor example, any attempt to use the address bar instantly crashes the entire browser.. @martinetd Very interesting. What exactly are you using? Again, both the nightly and my own build crash as soon as I use the address bar and hidpi scaling doesn't really work either, I basically get a non-scaled UI layout with scaled contents that keep clipping over edges everywhere. Looks funny but not usable. (also your link is wrong I think?)\n@SirCmpwn Of course I wouldn't try to upstream some awful hack but is it really too much to ask for some advice on creating a quick fix just for myself? All I'm looking for is any way at all to get a usable hidpi wayland desktop without committing entire months of my life to it and I'm almost there - but a blurry web browser (the application many use >50% of the time) in 2018 is a complete non-starter, I hope we can at least agree on that.\nI would greatly appreciate some technical background on why it's basically impossible to run xwayland at scale=2 and downscale as necessary when it's currently running at scale=1 and upscaling as necessary. It seems so simple on the surface I just want to understand why this is so hard.. @martinetd Very interesting. What exactly are you using? Again, both the nightly and my own build crash as soon as I use the address bar and hidpi scaling doesn't really work either, I basically get a non-scaled UI layout with scaled contents that keep clipping over edges everywhere. Looks funny but not usable. (also your link is wrong I think?)\n@SirCmpwn Of course I wouldn't try to upstream some awful hack but is it really too much to ask for some advice on creating a quick fix just for myself? All I'm looking for is any way at all to get a usable hidpi wayland desktop without committing entire months of my life to it and I'm almost there - but a blurry web browser (the application many use >50% of the time) in 2018 is a complete non-starter, I hope we can at least agree on that.\nI would greatly appreciate some technical background on why it's basically impossible to run xwayland at scale=2 and downscale as necessary when it's currently running at scale=1 and upscaling as necessary. It seems so simple on the surface I just want to understand why this is so hard.. ",
    "jplatte": "@main-- Sounds like https://github.com/Cloudef/wlc/issues/210. I'm using layout loading as well. I'm not sure if this issue is only about saving and loading layouts to / from files specifically; in that case I don't really need it. The only thing I need is an automated way of setting window layouts. It doesn't need to by via window placeholders as in i3, it could also just be swaymsg commands that I send right after starting the program (is that already a thing?) or something like that.\n. FWIW, I'm lurking here all the time to see when sway might become usable for me, and I personally have never had a need for DE-specific environment variables, nor do I see an advantage in having environment variables in the sway config file instead of setting them whereever you start sway from or creating a wrapper if you don't start sway from a shell script yet.\n. It's linked two comments above yours.. I don't think sway needs to provide an interface for this. Try https://haikarainen.github.io/light/\n. Yup, can reproduce with orbment. And thanks for providing a workaround!\nMoved to https://github.com/Cloudef/wlc/issues/210. First off, props for putting in some of your own money, and having PayPal as an option. There are some \"poor souls\" like me who don't have a credit card (not that I would actually feel bad about that) which often makes online money transfer very annoying, and PayPal is the only service I know of that fixes that (half-decently).\nQuestion: Am I understanding correctly that donations with no [meaningful] message were distributed to bounties you saw fit, and do you plan to continue handling them that way?. Hm, is PayPal only supported on the receiver side, not to add money to a bounty?. @SirCmpwn Why would this be implemented as an external daemon instead of as part of wlc? Is clipboard handling done in sway itself, or is there some reason why wlc would only handle the clipboard for wayland applications? It seems like it has a bunch of xwayland-specific code already.. Hm, I think it's important enough to expect it to work out-of-the-box though. For example KeePassX uses Qt4 and AFAIK that means it will run through XWayland. And Chromium users probably also copy links or text into other applications frequently enough (Chromium still uses gtk2, not sure how far they've gotten with porting to gtk3).\nWe should probably also ask @Cloudef: is clipboard sharing with X programs something you would like to have in wlc?. Alright, sounds good enough. Considering gtk2 and qt4 are kind of phasing out and it's gonna be a while until it's realistic for most i3 users to switch to sway, this might not be such a big thing actually.\nMainly wrote this comment because I just looked up if there were efforts to port keepassx to qt5, and actually it's already done and works (in arch it's as simple as installing keepassx-git from AUR) :)\nSo if anybody reading this had KeePassX blocking their switch to sway, I hope you can consider that fixed now!. @mckinney-subgraph are you still working on this?. I'm experiencing a very similar issue in the Signal desktop app. Mouse events are received, but keyboard events are often not received. What I mean by often is that sometimes it just doesn't work at all, and sometimes it works for a while after starting Signal and then it stops working.. Should this be working in sway version 1.0-alpha.5-243-gaa2bf98e (Sep  5 2018, branch 'master')?\nI just tried the second example from the PR description after not being able to get it working with other buttons and that too doesn't work. It's also not documented in the configuration man page.. I thought this was supposed to work already. According to man 5 sway:\n* may be used in lieu of a specific device name to configure all input devices.\n\nBut this might explain why I couldn't set my keyboard layout this way :sweat_smile: . Okay. Then that field being there at all is a bit misleading though. I just checked and in i3, the field is not part of the get_outputs IPC command output.. Also, as an aside: My main goal was to query the name of the currently focused output. I managed to do that after reading up on jq, which I had seen used for filtering out information from i3's ipc previously. This is what I came up with, for anyone looking to do the same thing:\nswaymsg -t get_tree | jq -r '.nodes[] | select(recurse(.nodes[], .floating_nodes[]) | .focused).name'. No, I'm only using scale 2 on one output and the default scale of 1 on all other outputs. Trying to create a minimal repro, I found out that this only happens with a custom, multi-character separator_symbol. E.g.:\nbar {\n    separator_symbol \"  \"\n    status_command i3status\n}. ",
    "tidux": "This is probably a GNOME Terminal issue rather than a Gtk3 issue.  Termite works fine under pure Wayland.  The only issue I have with Termite is that I can't copy/paste between it and Qt5 applications under Sway.. It does look like it.  I was unable to find 571 by searching the issues for Firefox so I assumed I was the first reporter.\nOn Wed, Dec 21, 2016 at 08:30:39PM -0800, Filip Szczepa\u0144ski wrote:\n\nIs this the same issue as #571 ?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.*\n. dunst also assumes DISPLAY=:0, so the provided systemd user service fails to run under Sway. . I can understand leaving the disable windowdecoration up to user prefs, but not setting QT_QPA_PLATFORM=wayland does nothing but cause bugs and misbehavior.  There's no reason not to set it in the compositor.. Steps to reproduce:\n\n\n\nInstall and launch MuCommander, or any other JDK9/Gtk3 application under Sway, from terminal or directly from dmenu.  \n\n\nNotice that floating windows are improperly sized.\n\n\nNotice that the window is proportioned oddly, with sub-widgets not displaying at all or not taking input.\n\n\nI'm testing again with the non-reparenting WM Java environment variable set, and will report back.. Java works with the following environment variable set:\n_JAVA_AWT_WM_NONREPARENTING=1\nIt may be useful to have Sway itself set this variable as it's a fairly obscure setting.. This is not only a bug, it's a regression.  This issue did not exist in 0.15.  I have specified my emoji font size and Firefox happily ignores it.\nIn ~/.config/sway/config:\nfont Dina 8, \"Noto Sans Emoji\" 8\nIn Firefox:\n\n. No, that configuration is already in place and the problem persists.\nOn February 13, 2019 9:44:36 AM PST, chzzzh notifications@github.com wrote:\n\n@tidux, turns out it's really a problem with fonts configuration. If\nwe'll open Rhythmbox' SoundCloud plugin for the case, it would screw up\nall the native GTK tabs, showing there album covers beside emojis. As\nfar as I remember, it can be fixed with one simple line:\nsudo ln -s /etc/fonts/conf.avail/10-scale-bitmap-fonts.conf\n/etc/fonts/conf.d.\nOr use your local configurations' directory to apply this for your\nuser:\n/home/$USER/.config/fontconfig/conf.d\n-- \nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub:\nhttps://github.com/swaywm/sway/issues/3114#issuecomment-463296042\n\n-- \nSent from my Android device with K-9 Mail. Please excuse my brevity.. That worked, thanks.. Follow-up: I don't think this is a bug with the configuration as much as the Noto Emoji font itself.  Switching my emoji font to Twemoji Mozilla was a more robust fix.. ",
    "DIzFer": "TL;DR: Defer to low priority.\nFor me personally, it's a nice to have feature, but i'm not currently using it. However, I can imagine myself making great use of this for development enviroments that involve non-tmuxable software.\n. ",
    "Drakulix": "Following sway for quite a while and this feature is absolutely unimportant for me. \nThe only things missing for me are swaybar, swaylock, borders+color and for_window.\n. I like simple less distracting backgrounds more. this just seems noisy to me. but hey, its just the default wallpaper and its your decision, what shall represent sway.\n. What about trayicon support? I might be difficult to do, but it is a quite major feature.\n. I like the idea of bindsym --locked. It would allow different actions for the same combinations in the locked state and it is more explicit, so you don't allow wrong key combinations resulting in harmful actions by accident.\n. I can confirm this issue, although I it very likely just https://github.com/Cloudef/wlc/issues/210 , as I have encountered this bug with nautilus as well.\nFedora 24, sway and wlc installed via testing repo (build date 2016-10-26). Since this version is quite outdated, I decided against reporting it.. Gnome has added an unstable new primary selection protocol very recently. While support from wlc/sway is certainly not expected, that would actually be nice to have.. Update: https://git.gnome.org/browse/mutter/tree/src/wayland/protocol/gtk-primary-selection.xml. > I have to disagree, it's one of showstoppers so far to migrating to sway.\nThats not exactly what I meant. It certainly disrupts my personal workflow, not being able to use such features, that I am used to from using i3 for quite a long time. But it is not essential, was very recently added by gnome and using a full wayland desktop outside of gnome should be expected to be not a very fleshed out experience anyway. There are certainly bigger and much more important TODOs for this project and given the limited time of the developers and contributors, I would not expect this feature to be supported at this time.\nThat said you request is not unreasonable or invalid. But I would not expect or even demand to see this fixed in the near future.. > This is complicated because X and Wayland raise window notifications differently.\nIf it would work at least for Wayland applications, that would be nice.. Scale is set per output in wlc. To be able set application/window specific scaling parameters this feature would need to be provided by wlc at first.. Build sway against latest wlc master. This was fixed in https://github.com/Cloudef/wlc/issues/210. I do expirience the same on my thinkpad (t450s), if I use my DP socket (not on VGA). This might be related to how wlc scans for connectors, as DP and my monitor supports daisy-chaining, which modifies the amount connectors and might shuffle their ids around, which might result in changing the id of my internal monitor to the external.\nThis is only an idea, I did not debug anything related to this error.. > Yeah, I'm not sure how to fix this. We can't really guess which seat started a client.\nI am not sure, if this a linux specific thing, but since it is possible to figure out the pid of the process, that connects to the wayland socket, would it not be possible to infer, which seat caused a program to start in many cases?\nFor cases, where sway's exec command is used this should be possible and for other program launches it might be possible to walk up the process hierarchy up to the first process, that was launched by sway exec or that has currently a focused window inside sway.\nMaybe this mapping of pids to seats could be cached inside sway to make the lookup easier.\nCarrying this information from the execution of a program through to the focus code might be quite difficult (I don't know much about sway's code structure), but technically this should be doable or am I missing something?. ",
    "KenMacD": "never use it here\n. ",
    "saraiva132": "Also never used this feature. As getsmp said, i am looking forward to move to sway as soon as you get swaybar up and running. Keep up the good work! \n. I will look into it.  I also thought it to be extremely weird. Thank you for the feedback,\n. @kon14 \nThat idea looks sweet and elegant :) I would love to have something like that as a wallpaper, \n. Have to agree with @Drakulix. Users tipically enjoy a simple, clean wallpaper. @coxley example is a fairly good example.\n. ",
    "StephenBrown2": "A bit late here, but I am just getting started with i3 and sway and find this feature to be quite useful for my work desktop, where I always have the same applications on the same monitors in the same layout, but I'm pretty sure this can be replicated with swaymsg commands without terrible difficulty, though it would be more complicated, so while I wouldn't vote for not supporting it, it can most certainly be lower priority.\n. Perhaps something more abstract?\nhttps://github.com/berock212/Maze-background\nor\nhttps://github.com/tmathmeyer/maze\noffer interesting options. Why have a static image when you could generate one!\nSources: https://redd.it/3sxw7g and https://redd.it/3tdv6i\n. And of course I mean once per login, or once forever, not like wlc's default moving background...\n. The bottom of the page linked has the text '\u00a9 2012 HD Wallpapers /', but no licensing details are available on the site.\n. Ah, derp. Well then, I wonder how swaybar will decide what output to be on... Probably an explicit setting, I'll bet.\n. Excellent. This will serve for posterity, anyone else wanting to know some more differences between wayland and X output handling.\nThank you for your work!\n. Can also confirm, though I found that mouse clicking isn't necessary, any mouse activity will work, and not just on the rofi 'window' to gain focus, like @mikkeloscar .\nSecondly, upon initially starting sway from a tty, nothing renders (except the mouse in the top left corner), until I move the mouse. Then the wallpaper and swaybar show up and I can start interacting with sway.\nI'm currently running sway-git-r1027.f994f00 (2015-12-18 branch \"master\"), and wlc-git-r824.6421f28 from the arch linux packages, which I understand are a bit out of date at this point.\nEDIT: Updated to 23df7ed, still happens (but I love my i3blocks working perfectly now!)\n. I thought that was fixed with #96 ?\n. Possibly relevant diffs:\nlayout.c\nhttps://github.com/SirCmpwn/sway/compare/616d630fb028e44359bc6f14d16f94564341c092...master#diff-6323e3c4489ba02f066e3dfbe4e3cbb0L153\nhttps://github.com/SirCmpwn/sway/compare/616d630fb028e44359bc6f14d16f94564341c092...master#diff-6323e3c4489ba02f066e3dfbe4e3cbb0R367\ncontainer.c\nhttps://github.com/SirCmpwn/sway/compare/616d630fb028e44359bc6f14d16f94564341c092...master#diff-33eb90e0d9b730214dd88b31235f3c4cL70\nhttps://github.com/SirCmpwn/sway/compare/616d630fb028e44359bc6f14d16f94564341c092...master#diff-33eb90e0d9b730214dd88b31235f3c4cL176\n. Just another silly question, but why is tray_output not supported, but tray_padding is a thing?\nI hope it's not supported yet because it's not implemented yet, in which case the message should be different. However, I presume it's partially because wayland is not X, but I don't know why.\n. I see. As I suspected, \"because wayland is not X\". ;-)\nSo in order for system tray icons to work in wayland, there has to be something at the wlc layer, or lower, I presume.\ndigs further into \"what is a systray icon?\"\nOh, wow, yeah, that's some interesting X stuff there.\n\n\"Having decided that we can't drop support just yet, it seems unlikely we can drop it in a few months when we switch to Wayland. So we need to consider how to make that work there. Embedding an X window inside a wayland window isn't going to work.\"\n\n^- http://blog.davidedmundson.co.uk/blog/xembed_back\n\n\"The system tray is an X client which owns a special manager selection on a given screen and provides container windows.\"\n\n^- http://standards.freedesktop.org/systemtray-spec/systemtray-spec-latest.html\n\n\"XEmbed is a protocol that uses basic X mechanisms such as client messages and reparenting windows to provide embedding of a control from one application into another application.\"\n\n^- http://standards.freedesktop.org/xembed-spec/xembed-spec-latest.html\nWhen the day comes that you decide to take on that task, I would ask that you consider supporting app indicators as well? (Cinnamon 2.8 just recently added support, Ubuntu's had them for a while, and since Ubuntu is the biggest, many applications are now supporting them)\nhttp://www.notmart.org/misc/statusnotifieritem/\nhttps://awesome.naquadah.org/bugs/index.php?do=details&task_id=1034\nAnd holy cow the links and information: https://github.com/picoe/Eto/issues/291\n(A new issue should likely be spawned for systray stuff by itself, methinks)\n. Looking forward to the day when I can use i3blocks seamlessly with swaybar...\nKeep up the great work!\n. Rather important feature missing from the list: click events\nhttp://i3wm.org/docs/i3bar-protocol.html#_click_events\n. Should this also make the spawned window \"urgent\" (or would it do that naturally), so that one knows a new window hasn't been lost when in fullscreen mode?\n. Note that Wayland names outputs slightly differently than Xorg.\nRun swaymsg -t get_outputs to find out what yours are named, and if it sees them at all.\n. Why are you setting both positions to 0,0? I believe VGA-1 should be 1920,0 if you wish it to be to the right of HDMI-A-1.. I'm quite pleased to see this make a comeback, and especially in Python 3.\nI can't speak to the sway side of things, but as for formatting, I think it looks decent. For a standard style, I'd recommend black and isort, running the following on sway-save-tree:\n$ black sway-save-tree/sway-save-tree\n$ isort --multi-line=3 --trailing-comma --force-grid-wrap=0 --combine-as --line-width=88 sway-save-tree/sway-save-tree. ",
    "cwmke": "I fully agree with @StephenBrown2.  I don't think it needs to be a priority but it is a very useful feature for those of us that currently rely on it.  I have three layouts ready to fire off when I need them including two that I auto-start each login.\n. ",
    "jodigiordano": "I'm late to the party but for me the lack of layout saving/loading is a deal breaker: I need some way to quickly set layouts as I often shutdown/restart my laptop and I have a very specific dev environment. That said, I would not mind migrating my layouts using swaymsg commands if it does the same job in the end. I'll need to dig in the documentation to make sure it is feasible before doing the switch.\n. ",
    "sajattack": ":+1: . ",
    "TMaYaD": "I'm talking about the output config option and man 5 sway documentation.\n. I'm talking about the output config option and man 5 sway documentation.\n. I would love to; if and when I manage to figure it out.\n. I would love to; if and when I manage to figure it out.\n. Awesome. I'll try that.\nAlso, raised an issue with wlc: https://github.com/Cloudef/wlc/issues/86\n. Awesome. I'll try that.\nAlso, raised an issue with wlc: https://github.com/Cloudef/wlc/issues/86\n. ",
    "thearthur": "is ewlc or wlc the place to work on this? I'm interested in hacking on it and digging into the history on this.. is ewlc or wlc the place to work on this? I'm interested in hacking on it and digging into the history on this.. ",
    "DragonAxe": "Does Sway have a logo, mascot, or idea associated with it that would be good for a background?\n. For some reason I keep returning to the idea of a tree as being a good logo for Sway. It kind of goes along with the phrase \"Sway with the wind\".\nI do like the wayland+i3 logo that you put together robotanarchy.\n. I like the colors and overall feel of the tree leaves picture, but the motion in the foreground is a bit too much.\nHere's a picture that I took, but I think evergreens are a little more spiky than the name 'sway' might bring to mind:\n\n. ",
    "coxley": ":+1:, I like the tree direction.\n. http://digitaljames.deviantart.com/art/life-is-minimal-669228\nSomething like this is simple and neat.\n. How about this?\nSome people in the thread reported using it in articles, I wonder if it could be as easy as asking for permission to distribute with a package.\n. Very cool\n. ",
    "MaxLeiter": "Perhaps something like this?\n\nSorry for low-quality, all I could find. \n. ",
    "stephen304": "I think it should be less nature photograph and more abstract / color gradient, which would be less distracting but still pleasing. Look at xfce's default background, which is just a blue radial gradient. \n. I always upgrade everything at once with packer -Syyu. wlc upgraded but there doesn't seem to be an update for sway:\nstephen@Jupiter ~ (git)-[master] % packer -Syyu\n:: Synchronizing package databases...\n core                     122.0 KiB  1173K/s 00:00 [#####] 100%\n extra                   1808.5 KiB  4.49M/s 00:00 [#####] 100%\n community                  3.1 MiB  1898K/s 00:02 [#####] 100%\n multilib                 144.1 KiB  1601K/s 00:00 [#####] 100%\n:: Starting full system upgrade...\n there is nothing to do\n:: Synchronizing aur database...\n aur                                        24  24 [#####]100%\n:: Starting full aur upgrade...\n local database is up to date\n. Nifty that worked! I guess I just have to watch out for if wlc upgrades and make sure to uninstall and reinstall sway too. Was the background removed recently? I hope custom background support will be a thing soon.\n. ",
    "yacinehmito": "Why can't we have both?\n\nhttp://topwalls.net/abstract-forest/\nIf you really wish to, you can easily incrustate the word 'sway' in the bottom left corner, on the cyan paint stroke.\n(Getting back to work after a fulfilling involvement in bikeshedding :dancers: )\n. Be right back then.\n. Nope, it only specifies where the standard configuration file is copied at installation.\nIt works for my use case without touching at the runtime behavior.\nPlus, it can be used to directly put the standard configuration file in ~/.config/sway/ for example, if need be.\nSorry about the author info, I'm on a new install. I'll fix this when I find how.\n. Indeed it does. By copying I mean during installation sway creates a standard config file.\nDUMP_CONFIG_DIR specifies where this config file should be put.\nIt just so happens that the default value is the fallback directory.\nIn my situation I can put it in a special environment to store my config files.\nIt another you could specify another location that sway looks into (say ~/.config/sway).\n. I was writing you a long answer on why it wouldn't work for my use case (a story of hashes and farm builds) but it actually would.\nShould we capture the value of the flag and use it as a C macro definition?\n. Getting back to work then.\n. The fallback config directory can now be changed from /etc/sway/ to whatever.\nI don't know enough about C macro language to handle the case where the last slash is omitted.\nDocumentation has been set accordingly.\nTell me if you want me to change anything.\n. Silly mistake. Was testing things. This is fixed now, sorry.\n. I'm lacking understanding of how CMake handles flags.\nOnce I figure this out, I'll get back here.\nThanks for your patience.\n. Styling is fixed.\nI didn't return anything because I didn't know how.\nI'll look into it tomorrow.\n. I don't think you need to do cd ... CMake already takes the parent directory as an argument and builds into the current directory.\n. This should fix the problem I told you about in IRC.\n. That's something I introduced.\nI'll fix it.\n. How will this interfere with client-side window decoration?\n. Resolved.\n. Copy-paste busted :p\n. ",
    "a0n": "\nYou can't enable/disable outputs on the fly. It has to be done through the config file. The way to turn it back on is to not turn it off in the first place.\n\nThis seems to be no issue now in the 1.0 beta.\nI can disable and enable outputs via swaymsg without a problem.. ",
    "christophgysin": "Any reason why you don't want to merge this?\n. I think it's good practice to fix warnings. It also encourages people not to add new ones.\nThere are other ways to fix this, like disabling the specific warning, or explicitly casting to void. Is there any other way to fix this that you could consider applying?\n. I think there are already better places to keep track of missing features.\nI'd love to be able to compile after every modification I make, without being told every single time that there is a missing feature in swaybg.\n. Is there anything else missing to get this merged?\n. Hmm, it doesn't seem to make much sense in the configuration, but I guess it would be nice to keep the feature for setting all the output options at once with swaymsg.\nI'll see what I can do.\n. The problem is that if you later set e.g.:\noutput HDMI-A-1 pos 1920,100\nIt will reset your resolution.\nAlso, * is only supported for backgrounds.\nThis would be a lot easier to fix and correctly document with my proposed change, if you're willing to write your config as:\noutput DVI-I-1 res 1920x1080\noutput DVI-I-1 pos 3840,0\noutput DVI-D-1 res 1920x1080\noutput DVI-D-1 pos 0,0\noutput HDMI-A-1 res 1920x1080\noutput HDMI-A-1 pos 1920,0\noutput * bg ~/wallpaper.png stretch\n. What about sending a command at runtime to enable/disable an output?\n. There is currently no way to know if the enabled flag was set, and should be merged.\n. I can turn it into an integer, and use -1 for unset, 0 for disabled, and 1 for enabled...\n. You beat me to it :)\n. How about this?\n. -1 is still true. Or did I miss something?\n. Removed the offending commit.\n. Fixed.\n. This fixes a couple of issues with the current config:\n- avoid building sources specified with ../dir/file.c multiple times\n- fix incremental builds when new files are added (due to file(GLOB ...))\nThe executables created should be identical.\n. Any reason why hasn't been merged?\n. Sure, just wasn't sure if you noticed it. Take your time.\n. That was the intention. i3lock does not support --scaling . But I added --tiling,  to be commandline compatible to i3lock.\nIs there something I should change to get this merged?\n. Added a note in the help message.\n. I was considering first util.h, but since it needs cairo moved it to client/cairo.h. But that forces swaylock to add gdk-pixbuf to the include_directories.\n. But if that's okay, I can combine the two and move it to client/cairo.h\n. If you move it to client/cairo.h which includes gdk-pixbuf/gdk-pixbuf.h, then code that uses that function also needs to be able to include gdk-pixbuf. It doesn't need to link against it, but when building, it needs to find that header.\n. See my PR to see the changes needed.\n. This is the ugly part. swaybar now needs the gdk-pixbuf headers...\n. ",
    "NateBrune": "I can confirm this issue. I start rofi with exec and it doesn't accept keyboard input.\n. ",
    "embik": "This is still an issue for me, xorg-server-xwayland is 1.18.3-1 and sway is 0.7-1 (Arch Linux).\nI noticed that launching rofi via $mod+d on a workspace running a xwayland application works (and you can launch e.g. urxvt afterwards and rofi will receive input), but launching it on an empty workspace or a workspace running a Wayland application (e.g. termite) makes rofi not receive any input events. Any way to fix that?\n. Thinking about this I'm not sure if reading from the clipboard is a feature you want to implement? As the copy to clipboard functionality works over swaymsg, wouldn't it be possible for malicious processes to read the clipboard if there was a swaymsg get-clipboard?. You're right, I'll take a look after my exams are over.. Wow, thanks a lot @4e554c4c \ud83d\udc4d . GTK3 applications can also expose config options for that (it's up to the app whether it is decorated or not). So opening an issue with the application developer is an option too.. @Artlant: Additionally, if I understand correctly, you do not need that pacman hook you complain about anyway. The wiki page says (pretty clearly) \n\nIf you run an Arch Linux based distribution without systemd [...]\n\nBut you said you're running Arch Linux, which comes with systemd. Don't blame someone else just because you did not read the documentation properly. Of course it's useless that way.. Looks like media-fonts/fontawesome to me.. ",
    "DaanDeMeyer": "I have the same issue but as soon as I open a urxvt terminal rofi is able to receive keyboard input. If the workspace is empty rofi will not receive keyboard input.\n. [log.c:160] Backtrace: sway(error_handler+0xb7) [0x427a3b]\n[log.c:160] Backtrace: sway(container_under_pointer+0x1a8) [0x417ae7]\n[log.c:160] Backtrace: sway(pointer_position_set+0x60) [0x41cd18]\n[log.c:160] Backtrace: sway() [0x41be83]\n[log.c:160] Backtrace: sway(main+0x473) [0x423639]\n[log.c:160] Backtrace: sway(_start+0x29) [0x408489]\n. I only get question marks. The path to sway is the path to the executable right?\n. @mikkeloscar \n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x4275ae]\n/home/daan/builds/sway/common/log.c:151\n[log.c:160] Backtrace: sway(container_under_pointer+0x1a8) [0x417657]\n/home/daan/builds/sway/sway/container.c:618\n[log.c:160] Backtrace: sway(pointer_position_set+0x60) [0x41c888]\n/home/daan/builds/sway/sway/input_state.c:216\n[log.c:160] Backtrace: sway() [0x41b9f3]\n/home/daan/builds/sway/sway/handlers.c:600\n[log.c:160] Backtrace: sway(main+0x473) [0x4231ac]\n/home/daan/builds/sway/sway/main.c:227\n[log.c:160] Backtrace: sway(_start+0x29) [0x407ff9]\n??:?\n. @mikkeloscar Yup, this fixed the issue. Thanks for the help!\n. Found the issue, I was using the i3 workspace_layout instead of just layout. Changing to layout in the config file fixed the issue.\n. nvm I was wrong, layout can't be used in the config file. I found out that activating tabbed layout via the keyboard shortcut fixes the issue but enabling tabbed layout via the config file gives the above issue.\n. ",
    "jpotier": "Same problem here on archlinux with rofi 1.2.0-1, xorg-server-xwayland 1.18.4-1 and sway-git r1969.ce713ef-1.\n. ",
    "nlgranger": "Same issue here with albert. \nWhen close on unfocus is enabled, the launcher closes immediately unless the desktop is empty.\nThe window is clickable, but it is impossible to enter text..  - [ ] fr_FR: @abdelq, @nlgranger\n   - [X] README (#1319)\n   - [ ] Man pages\n     - [X] sway(1) (#1333)\n     - [ ] sway(5)\n     - [ ] sway-bar\n     - [ ] sway-input\n     - [ ] swaymsg\n     - [ ] swaygrab\n     - [ ] swaylock\n     - [ ] sway-security\n     - [ ] FAQ. Thank you very much @abdelq, I just added you corrections.\n@SirCmpwn before holding off, would you like me to close this PR and push on #1330 instead?. I suggest: s/plus d' informations/la documentation/\n-> Pour la documentation sur le format .... ",
    "algmyr": "Cairo has support to create surfaces from pixel data, see cairo_image_surface_create_for_data(): http://cairographics.org/manual/cairo-Image-Surfaces.html\nSo adding other formats shouldn't be harder than to use some library to convert images to byte data. ImageMagick libs would probably be a great candidate considering the wide array of formats it supports.\n. @aouelete:\nThe slash shouldn't be escaped in the config.\n. json-c added a flag to disable escaping of slashes a while back:\nhttps://github.com/json-c/json-c/commit/316da8581819726597592be6d8ac787120c979bf\nIt could prove helpful here.\n. Correct me if I'm wrong, but your rounding trick doesn't seem to work well. I tried fooling around with the formula in octave and python, and 0x80 doesn't seem to work well at all.\nSome observations I've made (looking at values of t=[1,10000000]) is that depending on the offset you'll end up making one 2^16 interval exact:\n- offset=1: [0,2^16] is exact, [2^16+1,inf] is one too small at times\n- offset=2: [0,2^16] is one too large at times, [2^16+1,2*2^16] is exact, [2*2^16+1,inf] is one too small at times\n- offset=n: [0,(n-1)*2^16] is one too large at times, [(n-1)*2^16+1,n*2^16] is exact, [n*2^16+1,inf] is one too small at times\nIn general, using a offset of 1+(t>>16) seems to\u2020 give the exact result everywhere. So, depending on the range needed, one could either use 1 (if exact results for 16 bit unsigned is enough) or consider spending a few cycles calculating 1+(t>>16) if one is to pedantic about correctness.\n\u2020 As in it seems to be the case empirically but that I can't bother proving this formally.\n. You're absolutely right. This is pretty much the same as doing floor(x+0.5) to round things. I wasn't thinking about it properly. In light of this using 0x80=128 as an offset is perfectly correct.\n. ",
    "solarce": "@mikkeloscar great, the other error is due to a change in the UID of the travis user on our GCE images, because of the presence of a default ubuntu user. \nhttps://github.com/solarce/arch-travis/commit/675009ce736a621cdda254082721ebac9880d837 is a work-around until we get new GCE images made with the ubuntu user removed.\n. Happy to! https://github.com/mikkeloscar/arch-travis/pull/4\n. ",
    "fluxchief": "Drop-down menu seems to work for me, please try again with the latest version\n. I tried to figure out where the problem lies and added logging to the wayland registry display callbacks.\nThe output is\n[registry.c:29] display_handle_geometry x=0 y=0 phy_w=0 phy_h=0 spx=0 make=Xorg model=X11 Window t:0\n[registry.c:17] display_handle_mode flags=3 w=3360 h=1050 r=60000\nThe display_handle_geometry won't be called even if the resolution changes.\nA quick look at the wlc sources showed that they also suscribe to x11 events, I guess we're not receiving any callbacks for this type of event.\n. I'm currently working on this\n. If you have any suggestions which are not too complicated to implement (and cool ;)) I'd be happy to implement it.\n. Yes they should probably, but those changes were so little I didn't see much gain\n. @SirCmpwn htonl would be POSIX, does this sound better?\n@mikkeloscar I tried it out I guess and it looked right to me, but I can double check it\n. I switched to htonl, colors look good to me, please have another look & merge\n. I worked on this some time ago and I could not come up with a working solution. Having multiple wl_dispatch_events() seems to fix it sometimes but also causes some other weird behavior (application locks up) - even if it would work, this really should not be necessary.\nJust for the record: I tried manually checking if there are events in the pipeline and flushing them but it still didn't behave correctly.. I'd also do this. @SirCmpwn What do you think?\n. Oh, nice, I'll change my code accordingly\n. ",
    "PluMGMK": "I think this is fixed now.\n. This is happening unpredictably for me now. It tends to happen when I try to edit certain documents in LibreOffice Writer (running as an X app), or more occasionally when opening a window (or menu) in Wine. Also randomly happens when changing workspace.\n. I'd love to, but of course now I can't seem to trigger it anymore. Typical! If it happens again I'll post what I can.\n. Segfaults seem to happen when I (frustratedly) give a lot of keyboard input in rapid succession. At one point I launched Steam which (as usual) popped up an XTerm window trying to install Debian packages, which is neither possible nor necessary since I'm not on Debian, but I still had to type my password for sudo. I mistyped about half of it and started frustratedly hitting the backspace key, causing the window manager to crash and producing this output:\n[log.c:150] Error: Signal 11. Printing backtrace\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x42444a]\n[log.c:160] Backtrace: /lib64/libc.so.6(+0x35410) [0x7f0a79ae7410]\n[log.c:160] Backtrace: sway() [0x4156de]\n[log.c:160] Backtrace: sway() [0x41572c]\n[log.c:160] Backtrace: sway() [0x41572c]\n[log.c:160] Backtrace: sway(swayc_by_handle+0x22) [0x415777]\n[log.c:160] Backtrace: sway() [0x4193bf]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x19414) [0x7f0a7ac31414]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x2beba) [0x7f0a7ac43eba]\n[log.c:160] Backtrace: /usr/lib64/libwayland-server.so.0(wl_event_loop_dispatch+0x62) [0x7f0a7a384f52]\n[log.c:160] Backtrace: /usr/lib64/libwayland-server.so.0(wl_display_run+0x25) [0x7f0a7a3837e5]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(wlc_run+0xc4) [0x7f0a7ac410fc]\n[log.c:160] Backtrace: sway(main+0x456) [0x420ed7]\n[log.c:160] Backtrace: /lib64/libc.so.6(__libc_start_main+0xf5) [0x7f0a79ad3b15]\n[log.c:160] Backtrace: sway() [0x406e49]\nAnother one happened when I tried to play a game with Wine, but then a message box (from Uplay, also under Wine) popped up causing it to freeze. After frustratedly pressing Mod+Shift+Q, I got it to close, then when I right-clicked the Steam icon in the Wine system tray the window manager crashed (instead of bringing up a menu).\n[log.c:150] Error: Signal 11. Printing backtrace\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x42444a]\n[log.c:160] Backtrace: /lib64/libc.so.6(+0x35410) [0x7fb4f82e6410]\n[log.c:160] Backtrace: /lib64/libc.so.6(cfree+0x14) [0x7fb4f832d784]\n[log.c:160] Backtrace: /usr/lib64/dri/radeonsi_dri.so(+0x202801) [0x7fb4f2bec801]\n[log.c:160] Backtrace: /usr/lib64/dri/radeonsi_dri.so(+0x198131) [0x7fb4f2b82131]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x207ac) [0x7fb4f94377ac]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x20905) [0x7fb4f9437905]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x21a40) [0x7fb4f9438a40]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0xfb18) [0x7fb4f9426b18]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x24cbf) [0x7fb4f943bcbf]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0xfc63) [0x7fb4f9426c63]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x107bc) [0x7fb4f94277bc]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x19cfa) [0x7fb4f9430cfa]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(wlc_view_bring_to_front+0x3f) [0x7fb4f94310ba]\n[log.c:160] Backtrace: sway() [0x41f825]\n[log.c:160] Backtrace: sway(arrange_windows+0x48) [0x4203f9]\n[log.c:160] Backtrace: sway() [0x418f88]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x182c7) [0x7fb4f942f2c7]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x18130) [0x7fb4f942f130]\n[log.c:160] Backtrace: /usr/lib64/libwlc.so.0(+0x241af) [0x7fb4f943b1af]\nFrom the looks of it, I'm not even sure if it's the same problem that caused these two crashes. I've attached the full log files anyway.\n@mikkeloscar When you say to run addr2line \"on it\", what exactly do you mean? Do I take each individual address and check it? I don't have much debugging experience.\nsegfault.txt\nsegfault2.txt\n. Ah, okay then. The first segfault gave me:\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x42444a]\n/sources/sway/common/log.c:151\n()\n[log.c:160] Backtrace: sway() [0x4156de]\n/sources/sway/sway/container.c:534\n()\n[log.c:160] Backtrace: sway() [0x41572c]\n/sources/sway/sway/container.c:541\n()\n[log.c:160] Backtrace: sway() [0x41572c]\n/sources/sway/sway/container.c:541\n()\n[log.c:160] Backtrace: sway(swayc_by_handle+0x22) [0x415777]\n/sources/sway/sway/container.c:551\n()\n[log.c:160] Backtrace: sway() [0x4193bf]\n/sources/sway/sway/handlers.c:336\n()\n[log.c:160] Backtrace: sway(main+0x456) [0x420ed7]\n/sources/sway/sway/main.c:217\n()\n[log.c:160] Backtrace: sway() [0x406e49]\n??:?\n()\nAnd the second gave me:\n[log.c:160] Backtrace: sway(error_handler+0xb7) [0x42444a]\n/sources/sway/common/log.c:151\n()\n[log.c:160] Backtrace: sway() [0x41f825]\n/sources/sway/sway/layout.c:472 (discriminator 3)\n()\n[log.c:160] Backtrace: sway(arrange_windows+0x48) [0x4203f9]\n/sources/sway/sway/layout.c:617\n()\n[log.c:160] Backtrace: sway() [0x418f88]\n/sources/sway/sway/handlers.c:249\n()\n. @mikkeloscar As far as I can tell I'm only one commit behind (i.e. on https://github.com/SirCmpwn/sway/commit/91d6113d4ad15e38308a795313da92b0ec249bcf).\n. I don't think this is Sway's fault because I reverted to https://github.com/SirCmpwn/sway/commit/0ba3f08f526aac1668e53d5db696be36ba047b5d (predating this issue by a considerable amount of time) and it's still happening.\n. Since updating to the latest wlc and sway commits last Saturday, the window manager has crashed only once. That was when I attempted to use the clipboard in the Otter Browser, so it's probably QtWayland's fault. So for me, this issue seems to be resolved!\n. This was fine for me for a long time. But I think whatever seems to have fixed it for some people (i.e. the change that got this issue closed) brought it back for me.\nBasically, whether or not an XWayland app (either Qt5 or GTK3) gives me a menu is random, with the probability decreasing as I continue using menus. Occurs in Thunderbird and VirtualBox, which are important to me, but also any other app (eg. GIMP, but that can be run under Wayland anyway).\n. ",
    "joecool1029": "I've had this issue for some weeks.  Chromium generates it easy enough, just hover over any tabs and you'll get flickering when it fails to display the tooltip (hover-over text).\n. ",
    "fgaz": "Same here on every qt5 program. The menu either flickers or opens as a new window until I move the cursor.\nI just recompiled wlc and sway.\n. I just installed orbment and the same thing happens. It's probably wlc.\n. ",
    "nixpulvis": "I'm a bit new to bar configuration, but is there a way to add margin/gaps around the bar easily too?. I'm a bit new to bar configuration, but is there a way to add margin/gaps around the bar easily too?. Oh well, might be worth adding a gaps set of options to the bar config. I know people have accomplished this kind of thing with polybar, but if my understanding is correct that depends on an X server.. Oh well, might be worth adding a gaps set of options to the bar config. I know people have accomplished this kind of thing with polybar, but if my understanding is correct that depends on an X server.. ",
    "qubidt": "Gotcha. Thanks a lot. Still getting used to how wayland works. \n. ",
    "hashashini": "Unfortunately addr2line -e /usr/bin/sway only gave me \"addr2line: /usr/bin/sway: Permission denied\"\nBut after a kernel upgrade to 4.3 the problem disappeared anyways (sway at commit d91185d67b831ea5015b00a4721e209513f87fc7)\n. Well, the problem didn't disappear at all, it's still present. The reason why it seemed to have disappeared apparently was due to opengl not working with CONFIG_DRM_AMDGPU=y (Kaveri IGP). Now having switched back to CONFIG_DRM_RADEON=y I again can't start sway.\nIn case I used addr2line correctly are there any alternatives?\n/var/log/messages btw says:\n generic kernel: unknown displayid tag 3\n. Maybe I can provide additional information now:\nOutput of $ sway -d:\n https://gist.github.com/anonymous/2456965a895327180ca\n. Output of  sway -d:\nhttps://gist.github.com/hashashini/0f5462620582050c02f4\n. $ addr2line -e /usr/bin/sway\naddr2line: /usr/bin/sway: Permission denied\nafaict this is because of suid stuff (no logind present).\n. $ sway -d\ngave me\n\n[...]\nBacktrace: /usr/lib64/libwlc.so.0(+0x1adb2) [0x354381b5db2]\n[...]\n3543819b000-354381d7000 r-xp 00000000 00:0f 6897726 /usr/lib64/libwlc.so.0.0.1\n[...]\n\n(cf. https://gist.github.com/hashashini/0f5462620582050c02f4)\n354381b5db2 - 3543819b000 = 1adb2\n# addr2line -e /usr/bin/sway 1adb2\n# addr2line -e /usr/bin/sway 0x1adb2\n# addr2line -e /usr/bin/sway 0000001adb2\n# addr2line -e /usr/bin/sway 0x0000001adb2\n# addr2line -e /usr/bin/sway 354381b5db2\n# addr2line -e /usr/bin/sway 0x354381b5db2\n# addr2line -e /usr/bin/sway 3543819b000\n# addr2line -e /usr/bin/sway 0x3543819b000\nall resulted in ??:? or ??:0\nMaybe this can help:\n# gdb /usr/bin/sway\n\nGNU gdb (Gentoo 7.10.1 vanilla) 7.10.1\nCopyright (C) 2015 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttps://bugs.gentoo.org/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...Reading symbols from /usr/lib64/debug//usr/bin/sway.debug...done.\ndone.\n(gdb) run\nStarting program: /usr/bin/sway \nwarning: Cannot call inferior functions, Linux kernel PaX protection forbids return to non-executable pages!\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\n[wlc] Do not run wlc compositor as root\n[Inferior 1 (process 1448) exited with code 01]\n. This is probably not a problem with wlc or sway, I think it originates from mesa.\nUnsetting CONFIG_GRKERNSEC_SYSFS_RESTRICT=y in kernel config solved the issue.\nSorry for the noise and thank you for making sway.\n. Maybe not related, but thought I'd point it out in case you didn't yet see it yourself:\n# kill focused window\nbindsym $mod+Shift+c kill\n[...]\n# reload the configuration file\nbindsym $mod+Shift+c reload\n. \n",
    "norpol": "I'm getting similar errors on Debian Stretch/Testing, using the most recent git versions.\nsway is at 953d6880c7f534b1e333fd00d32aceea63d0eda5\nwlc is at Cloudef/wlc/1910a6ddffe53b8886c48566dce0ad6fd7f60f76\n``\n$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/ ..\n-- Could NOT find chck (missing:  CHCK_LIBRARIES CHCK_INCLUDE_DIRS) \nAdding chck as subdirectory\n-!- Use 'make doxygen' to generate documentation\nPackage wayland-protocols was not found in the pkg-config search path.\nPerhaps you should add the directory containingwayland-protocols.pc'\nto the PKG_CONFIG_PATH environment variable\nNo package 'wayland-protocols' found\n-- Could NOT find wlproto (missing:  WLPROTO_PATH) \n-- \n-- The following features have been enabled:\n\nStatic , Compile as static library\nExamples , Compile example programs\nTests , Compile tests\nwayland-protocols/unstable/xdg-shell/xdg-shell-unstable-v5 , Protocol extension\n\n-- The following OPTIONAL packages have been found:\n\nZLIB\n   Enables compression support\nThreads\n   Enables threading support\nValgrind\nDoxygen\n   Enables documentation\nPkgConfig\n\n-- The following RECOMMENDED packages have been found:\n\nDbus , Message bus system , http://www.freedesktop.org/wiki/Software/dbus/\n   Enables logind support\nSystemd , System and Service Manager , http://freedesktop.org/wiki/Software/systemd/\n   Enables logind support\n\n-- The following REQUIRED packages have been found:\n\nMath , Standard C math library\nWayland , Protocol for implementing compositors , http://wayland.freedesktop.org/\nPixman , Low-level software library for pixel manipulation , http://pixman.org/\nXKBCommon , Library to handle keyboard descriptions , http://xkbcommon.org/\nUdev , Device manager for the Linux kernel , https://www.kernel.org/pub/linux/utils/kernel/hotplug/udev/udev.html\nLibInput , Library to handle input devices , http://freedesktop.org/wiki/Software/libinput/\nX11 , Open source implementation of the X Window System , http://www.x.org/\n   Enables X11 backend\nXCB , X protocol C-language Binding , http://xcb.freedesktop.org/\n   Enables Xwayland and X11 backend\nGLESv2 , The Standard for Embedded Accelerated 3D Graphics , https://www.khronos.org/opengles/\n   Enables OpenGL renderer\nEGL , Native Platform Interface , http://www.khronos.org/egl/\n   Enables EGL context\nDRM , Kernel module that gives direct hardware access to DRI clients , http://dri.freedesktop.org/\n   Enables DRM backend\nGBM , Generic buffer manager , http://www.mesa3d.org/\n   Enables DRM backend\n\n-- The following features have been disabled:\n\nTests , Compile tests\nStatic , Compile as static library\n\n-- The following OPTIONAL packages have not been found:\n\nWaylandProtocols\n\n-- Configuring done\n-- Generating done\n-- Build files have been written to: ~/tmp/wlc/build\n$ make\n[  1%] Building C object protos/CMakeFiles/wlc-protos.dir/wayland-xdg-shell-unstable-v5-protocol.c.o\n[  2%] Linking C static library libwlc-protos.a\n[  5%] Built target wlc-protos\n[  6%] Building C object protos/CMakeFiles/wlc-tests-protos.dir/wayland-xdg-shell-unstable-v5-protocol.c.o\n[  7%] Building C object protos/CMakeFiles/wlc-tests-protos.dir/wayland-test-extension-protocol.c.o\n[  9%] Linking C static library libwlc-tests-protos.a\n[ 15%] Built target wlc-tests-protos\nScanning dependencies of target wlc-object\n[ 17%] Building C object src/CMakeFiles/wlc-object.dir/compositor/compositor.c.o\n[ 18%] Building C object src/CMakeFiles/wlc-object.dir/compositor/output.c.o\n~/tmp/wlc/src/compositor/output.c: In function \u2018blit\u2019:\n~/tmp/wlc/src/compositor/output.c:142:17: warning: unused variable \u2018gsz\u2019 [-Wunused-variable]\n    const size_t gsz = r->w * r->h;\n                 ^~~\n[ 19%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/data.c.o\n[ 21%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/keyboard.c.o\n[ 22%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/keymap.c.o\n[ 23%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/pointer.c.o\n[ 25%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/seat.c.o\n[ 26%] Building C object src/CMakeFiles/wlc-object.dir/compositor/seat/touch.c.o\n[ 27%] Building C object src/CMakeFiles/wlc-object.dir/compositor/shell/shell.c.o\n[ 28%] Building C object src/CMakeFiles/wlc-object.dir/compositor/shell/xdg-shell.c.o\n[ 30%] Building C object src/CMakeFiles/wlc-object.dir/compositor/shell/custom-shell.c.o\n[ 31%] Building C object src/CMakeFiles/wlc-object.dir/compositor/view.c.o\n[ 32%] Building C object src/CMakeFiles/wlc-object.dir/platform/backend/backend.c.o\n[ 34%] Building C object src/CMakeFiles/wlc-object.dir/platform/backend/drm.c.o\n[ 35%] Building C object src/CMakeFiles/wlc-object.dir/platform/context/context.c.o\n[ 36%] Building C object src/CMakeFiles/wlc-object.dir/platform/context/egl.c.o\n[ 38%] Building C object src/CMakeFiles/wlc-object.dir/platform/render/gles2.c.o\n[ 39%] Building C object src/CMakeFiles/wlc-object.dir/platform/render/render.c.o\n[ 40%] Building C object src/CMakeFiles/wlc-object.dir/resources/resources.c.o\n[ 42%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/buffer.c.o\n[ 43%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/data-source.c.o\n[ 44%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/region.c.o\n[ 46%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/shell-surface.c.o\n[ 47%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/surface.c.o\n[ 48%] Building C object src/CMakeFiles/wlc-object.dir/resources/types/xdg-surface.c.o\n[ 50%] Building C object src/CMakeFiles/wlc-object.dir/session/fd.c.o\n[ 51%] Building C object src/CMakeFiles/wlc-object.dir/session/tty.c.o\n[ 52%] Building C object src/CMakeFiles/wlc-object.dir/session/udev.c.o\n[ 53%] Building C object src/CMakeFiles/wlc-object.dir/wlc.c.o\n[ 55%] Building C object src/CMakeFiles/wlc-object.dir/extended/wlc-wayland.c.o\n[ 56%] Building C object src/CMakeFiles/wlc-object.dir/extended/wlc-render.c.o\n[ 57%] Building C object src/CMakeFiles/wlc-object.dir/platform/backend/x11.c.o\n[ 59%] Building C object src/CMakeFiles/wlc-object.dir/xwayland/xwayland.c.o\n[ 60%] Building C object src/CMakeFiles/wlc-object.dir/xwayland/xwm.c.o\n[ 61%] Building C object src/CMakeFiles/wlc-object.dir/session/dbus.c.o\n[ 63%] Building C object src/CMakeFiles/wlc-object.dir/session/logind.c.o\n[ 63%] Built target wlc-object\n[ 65%] Built target chck_buffer\n[ 68%] Built target chck_pool\n[ 71%] Built target chck_lut\n[ 73%] Built target chck_atlas\n[ 76%] Built target chck_dl\n[ 78%] Built target chck_fs\n[ 81%] Built target chck_sjis\n[ 84%] Built target chck_xdg\n[ 86%] Built target chck_string\n[ 89%] Built target chck_tqueue\n[ 92%] Built target chck_unicode\n[ 93%] Linking C static library libwlc-tests.a\n[ 93%] Built target wlc-tests\nScanning dependencies of target wlc\n[ 94%] Linking C shared library libwlc.so\n[ 94%] Built target wlc\nScanning dependencies of target example\n[ 96%] Building C object example/CMakeFiles/example.dir/example.c.o\n[ 97%] Linking C executable example\n[ 97%] Built target example\nScanning dependencies of target resources-test\n[ 98%] Building C object tests/CMakeFiles/resources-test.dir/resources.c.o\n[100%] Linking C executable resources-test\n[100%] Built target resources-test\n$ sudo make install\n[  5%] Built target wlc-protos\n[ 15%] Built target wlc-tests-protos\n[ 63%] Built target wlc-object\n[ 65%] Built target chck_buffer\n[ 68%] Built target chck_pool\n[ 71%] Built target chck_lut\n[ 73%] Built target chck_atlas\n[ 76%] Built target chck_dl\n[ 78%] Built target chck_fs\n[ 81%] Built target chck_sjis\n[ 84%] Built target chck_xdg\n[ 86%] Built target chck_string\n[ 89%] Built target chck_tqueue\n[ 92%] Built target chck_unicode\n[ 93%] Built target wlc-tests\n[ 94%] Built target wlc\n[ 97%] Built target example\n[100%] Built target resources-test\nInstall the project...\n-- Install configuration: \"Release\"\n-- Installing: /usr/lib/x86_64-linux-gnu/libwlc.so.0.0.5\n-- Installing: /usr/lib/x86_64-linux-gnu/libwlc.so.0\n-- Installing: /usr/lib/x86_64-linux-gnu/libwlc.so\n-- Installing: /usr/include/wlc\n-- Installing: /usr/include/wlc/wlc-wayland.h\n-- Installing: /usr/include/wlc/wlc-render.h\n-- Installing: /usr/include/wlc/wlc.h\n-- Installing: /usr/include/wlc/defines.h\n-- Installing: /usr/include/wlc/geometry.h\n-- Installing: /usr/lib/x86_64-linux-gnu/pkgconfig/wlc.pc\n```\n```\n$ cmake -DCMAKE_INSTALL_SYSCONFDIR=/etc ..\n-- The C compiler identification is GNU 6.1.1\n-- Check for working C compiler: /usr/bin/cc\n-- Check for working C compiler: /usr/bin/cc -- works\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- Found PkgConfig: /usr/bin/pkg-config (found version \"0.29\") \n-- Found JSONC: /usr/lib/x86_64-linux-gnu/libjson-c.so\n-- Found PCRE: /usr/lib/x86_64-linux-gnu/libpcre.so\n-- Found wlc: /usr/local/lib/libwlc.so\n-- Found WAYLAND_CLIENT: /usr/lib/x86_64-linux-gnu/libwayland-client.so\n-- Found WAYLAND_SERVER: /usr/lib/x86_64-linux-gnu/libwayland-server.so\n-- Found WAYLAND_EGL: /usr/lib/x86_64-linux-gnu/libwayland-egl.so\n-- Found WAYLAND_CURSOR: /usr/lib/x86_64-linux-gnu/libwayland-cursor.so\n-- Found WAYLAND: /usr/lib/x86_64-linux-gnu/libwayland-client.so;/usr/lib/x86_64-linux-gnu/libwayland-server.so;/usr/lib/x86_64-linux-gnu/libwayland-egl.so;/usr/lib/x86_64-linux-gnu/libwayland-cursor.so\n-- Found XKBCOMMON: /usr/lib/x86_64-linux-gnu/libxkbcommon.so\n-- Checking for one of the modules 'cairo'\n-- Checking for one of the modules 'pango pangocairo'\n-- Checking for one of the modules 'gdk-pixbuf-2.0'\n-- Found PAM: /usr/lib/x86_64-linux-gnu/libpam.so;/usr/lib/x86_64-linux-gnu/libdl.so\n-- Found LIBINPUT: /usr/include\n-- Looking for backtrace\n-- Looking for backtrace - found\n-- backtrace facility detected in default set of libraries\n-- Found Backtrace: /usr/include\n-- Found A2X: /usr/bin/a2x (found version \"8.6.9\") \n-- \n-- The following OPTIONAL packages have been found:\n\nGdkPixbuf\nPAM\nPkgConfig\nBacktrace\n\n-- The following REQUIRED packages have been found:\n\nJsonC\nPCRE\nWLC\nWayland\nXKBCommon\nCairo\nPango\nLibInput , Library to handle input devices , http://freedesktop.org/wiki/Software/libinput/\nA2X\n\n-- Configuring done\n-- Generating done\n-- Build files have been written to: ~/tmp/sway/build\n$ make\nScanning dependencies of target man-swaylock.1\n[ 52%] swaylock.1\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-swaylock.1\nScanning dependencies of target man-sway.5\n[ 52%] sway.5\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-sway.5\nScanning dependencies of target man-sway.1\n[ 52%] sway.1\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-sway.1\nScanning dependencies of target man-sway-input.5\n[ 52%] sway-input.5\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-sway-input.5\nScanning dependencies of target man-sway-bar.5\n[ 52%] sway-bar.5\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-sway-bar.5\nScanning dependencies of target man-swaymsg.1\n[ 52%] swaymsg.1\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-swaymsg.1\nScanning dependencies of target man-swaygrab.1\n[ 52%] swaygrab.1\na2x: WARNING: --destination-dir option is only applicable to HTML based outputs\n[ 52%] Built target man-swaygrab.1\nScanning dependencies of target man\n[ 52%] Built target man\n[ 52%] Generating wayland-swaylock-server-protocol.c\n[ 52%] Generating wayland-xdg-shell-client-protocol.h\n[ 52%] Generating wayland-xdg-shell-client-protocol.c\n[ 52%] Generating wayland-desktop-shell-client-protocol.h\n[ 52%] Generating wayland-desktop-shell-client-protocol.c\n[ 52%] Generating wayland-desktop-shell-server-protocol.h\n[ 52%] Generating wayland-desktop-shell-server-protocol.c\n[ 52%] Generating wayland-swaylock-client-protocol.h\n[ 52%] Generating wayland-swaylock-client-protocol.c\n[ 52%] Generating wayland-swaylock-server-protocol.h\nScanning dependencies of target sway-protocols\n[ 52%] Building C object protocols/CMakeFiles/sway-protocols.dir/wayland-xdg-shell-client-protocol.c.o\n[ 52%] Building C object protocols/CMakeFiles/sway-protocols.dir/wayland-desktop-shell-client-protocol.c.o\n[ 52%] Building C object protocols/CMakeFiles/sway-protocols.dir/wayland-desktop-shell-server-protocol.c.o\n[ 52%] Building C object protocols/CMakeFiles/sway-protocols.dir/wayland-swaylock-client-protocol.c.o\n[ 52%] Building C object protocols/CMakeFiles/sway-protocols.dir/wayland-swaylock-server-protocol.c.o\n[ 52%] Linking C static library libsway-protocols.a\n[ 52%] Built target sway-protocols\nScanning dependencies of target sway-common\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/ipc-client.c.o\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/list.c.o\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/log.c.o\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/util.c.o\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/readline.c.o\n[ 52%] Building C object common/CMakeFiles/sway-common.dir/stringop.c.o\n[ 52%] Linking C static library libsway-common.a\n[ 52%] Built target sway-common\nScanning dependencies of target sway-wayland\n[ 52%] Building C object wayland/CMakeFiles/sway-wayland.dir/buffers.c.o\n[ 52%] Building C object wayland/CMakeFiles/sway-wayland.dir/pango.c.o\n[ 52%] Building C object wayland/CMakeFiles/sway-wayland.dir/registry.c.o\n[ 52%] Building C object wayland/CMakeFiles/sway-wayland.dir/window.c.o\n[ 52%] Building C object wayland/CMakeFiles/sway-wayland.dir/cairo.c.o\n[ 52%] Linking C static library libsway-wayland.a\n[ 52%] Built target sway-wayland\nScanning dependencies of target sway\n[ 52%] Building C object sway/CMakeFiles/sway.dir/commands.c.o\nIn file included from ~/tmp/sway/sway/commands.c:24:0:\n~/tmp/sway/include/sway/output.h:9:56: error: \u2018struct wlc_point\u2019 declared inside parameter list will not be visible outside of this definition or declaration [-Werror]\n swayc_t output_by_name(const char name, const struct wlc_point abs_pos);\n                                                        ^~~~~~~~~\n~/tmp/sway/include/sway/output.h:10:91: error: \u2018struct wlc_point\u2019 declared inside parameter list will not be visible outside of this definition or declaration [-Werror]\n swayc_t swayc_adjacent_output(swayc_t output, enum movement_direction dir, const struct wlc_point abs_pos, bool pick_closest);\n                                                                                           ^~~~~~~~~\nIn file included from ~/tmp/sway/sway/commands.c:24:0:\n~/tmp/sway/include/sway/output.h:13:55: error: \u2018struct wlc_point\u2019 declared inside parameter list will not be visible outside of this definition or declaration [-Werror]\n void get_absolute_position(swayc_t container, struct wlc_point point);\n                                                       ^~~~~~~~~\n~/tmp/sway/include/sway/output.h:17:62: error: \u2018struct wlc_point\u2019 declared inside parameter list will not be visible outside of this definition or declaration [-Werror]\n void get_absolute_center_position(swayc_t container, struct wlc_point point);\n                                                              ^~~~~~~~~\ncc1: all warnings being treated as errors\nsway/CMakeFiles/sway.dir/build.make:62: recipe for target 'sway/CMakeFiles/sway.dir/commands.c.o' failed\nmake[2]:  [sway/CMakeFiles/sway.dir/commands.c.o] Error 1\nCMakeFiles/Makefile2:364: recipe for target 'sway/CMakeFiles/sway.dir/all' failed\nmake[1]:  [sway/CMakeFiles/sway.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n-> [2]\n```\n. ",
    "DerpyCrabs": "Can you also add smart_hide mode when swaybar is visible only if there is any window on workspace?\n. I use empty workspace as lockscreen in order to always see information from conky (like time, current track, battery level). I used my python script to hide i3bar on i3. I will be happy if i don't need this hack.\n. I like the idea with transparency. Waiting for this feature.\n. Transparency of swaylock has fixed this issue. Thank you.\n. ",
    "deklov": "Is anyone working on getting swaybar to handle mouse events? If not I might take a stab at it.\n. Not sure exactly what \"working on swaybg as a shell surface\" means. I haven't looked at swaybg yet and I'm still trying to understand the difference between a surface and a shell surface.  I'll take a look at swaybg and and do some more research on surface vs shell surface and maybe it will become clear. Thanks.\n. Thanks for the explanation. Could you please point me to the code that makes the assumption that shell surfaces are windows and where (non shell) surfaces are treated differently. \n. Thanks. I'll try and play around with this over the next couple of days to try to understand Sway and wlc a little better.\n. How is Sway \"notified\" that Swaybar is launced? handle_view_created() seems to get called whenever a window, or I guess a shell surface, like a terminal is created but it does not get called when Swaybar is launched by Sway. I'm trying to find the code that ensures that Swaybar is rendered in the appropriate place. \n. Is this how it works? set_panel() gets called. It calls find_or_create_panel_config() which does list_add(desktop_shell.panels, config). desktop_shell.panels is then used in handle_output_pre_render() which calls wlc_surface_render() to render the bar.\nAnd is the desktop-shell.xml a Sway specific extension?\n. If there is a reliable way to detect that the created view is either swaybar or swaybg in handle_view_created(), I guess we can essentially do nothing for swaybar and swaybg handle_view_created() and render them in handle_output_pre_render() as is done today. \n. Perhaps if we assume that swaybar and swaybg is launched by sway, we can stash away their PIDs and call wl_client_get_credentials() in handle_view_created() and compare the PIDs. Is there a better way of doing this? Can we get the PID of the process invoking set_panel and set_background? If we can, then at least we don't have to rely on sway launching swaybar and swaybg.\n. > I would rather call set_panel before creating the shell surface\nI don't follow. I thought that set_panels was called by the client through the wayland protocol. Hmm, are you talking about changes to the swaybar and swaybg?\n\nWe can also just use that one wlc function that creates a shell surface out of an arbitrary surface without any client-side interactions.\n\nNot familiar with that function but if it does what I think it does based on your explanation, I think this is the way to go. \n. I was looking at how keryboard is handled in registry.c and how pointer is handled in window.c. Why is keyboard handled per registry and pointer per window? struct registry has field of type struct input with some keyboard related state, e.g. last_code. Should this not be tracked on a per window basis?\n. I went ahead and made keyboard state tracked per window.\n. Perhaps take the second patch?\n. Okay. I got pretty confused when I saw the two file descriptors. To me it kind of looks like the two sockets are never read and/or written at the same time so I figured I get rid of one to make things easier to understand, but I guess I missed the case in #406.\n. Just realized I used spaces instead of tabs. I'll fix that once I got feedback.\n. Other than changing space to tabs. Is there anything else you want me to change?\n. Move {'s starting function bodies up one line. That's all I could find that violated the formatting rules.\n. I tried both commit c3373c6815b5c8cff8f48d1acb46be08b9654331 \"Merge pull request #737 from zandrmartin/fix-bar-on-reload\" and 99bda4afe27d9e5723ab6b0ebe5eabb0caaa8eeb \"swaybg: Make swaybg a shell surface\", and the mouse cursors are the same.\n. I interpret this as the problem was already there before my patch set. I try and see if I can do a bisect and find out what commit introduced this behavior.  Can you please point me to a commit where the mouse pointer looks like it is supposed to.\n. See commits     bb35960,    d3752b4 and 99bda4a. Calling window_make_shell after calling window_set(...false) is the same as calling window_setup(..., true).\nCan you please point me to a commit where the mouse pointer is correct so that I can determine if I introduced this problem. On my system the mouse pointer has always looked the same. \n. I'm a little confused. It sounds like you are saying that cursor problem was there before this patch set, is this correct? \n. > The cursor over swaybg and swaybar has never been correct in the master branch because support for them as shell surfaces wasn't merged until recently.\nSo they are even less correct now? It would be helpful if you could provide a commit id where the mouse look as it supposed to. I've only used sway for two weeks and the mouse pointer has always looked the same to me. Its a little hard to fix a problem that I never seen.\n. I hear you. But once again. Here is the history:\n`commit d9bcea381a69ebc6367aede7816b8e27d5fc9417\nAuthor: David Eklov david.eklov@gmail.com\nDate:   Mon Jul 4 22:18:56 2016 -0500\nFix formatting guide violations (spaces instead of tabs)\ncommit 99bda4afe27d9e5723ab6b0ebe5eabb0caaa8eeb\nAuthor: David Eklov david.eklov@gmail.com\nDate:   Mon Jul 4 17:04:16 2016 -0500\nswaybg: Make swaybg a shell surface\ncommit d3752b41405b5572d0ba488aaf969f308e06968a\nAuthor: David Eklov david.eklov@gmail.com\nDate:   Mon Jul 4 17:03:55 2016 -0500\nswaybar: Make swaybar a shell surface\ncommit bb35960e652f98a882ed3cd2d1968b860942b896\nAuthor: David Eklov david.eklov@gmail.com\nDate:   Mon Jul 4 17:01:37 2016 -0500\nMove code to make a window a shell surface into seperate function\ncommit 51204b33c18b6f7c248f558fbaeb7198efb32900\nAuthor: David Eklov david.eklov@gmail.com\nDate:   Mon Jul 4 16:53:03 2016 -0500\n```\nEnable backgrounds and panels to be shell surfaces\nPrior to this commit all windows (e.g. shell surfaces) were handled the same\nway in handle_view_created. Since backgrounds and panels have to be treated\ndifferently, they could not be shell surfaces. This changes checks whether\na client is a background or a panel in handle_view_created and exists to\nlet them be dealt with elsewhere.\n```\ncommit 2f540576238320b0921f2b4bc69e785693f9992c\nAuthor: Zandr Martin zandrmartin@gmail.com\nDate:   Mon Jul 4 17:45:37 2016 -0500\nI think this fixes #678\ncommit 33c923be731c0bb1c399bf3bd1011aa969e591d8\nMerge: 33abcd9 e07b8c8\nAuthor: Drew DeVault sir@cmpwn.com\nDate:   Mon Jul 4 16:03:23 2016 -0400\n```\nMerge pull request #735 from zandrmartin/get-tree-command\nimplement get_tree command\n```\n`\nWhen I compile and run 33c923be731c0bb1c399bf3bd1011aa969e591d8 (before this change set) and 99bda4afe27d9e5723ab6b0ebe5eabb0caaa8eeb (the top of this change set) the mouse pointer looks the same. Can you please try these two commits and verify that the pointer looks different. I just tried again and the mouse cursor looks the same.\n. Okay, thank you for answering my original question.\n. I was able to find something actionable. I did attached gdb to both 33c923b and 99bda4a and put a breakpoint on pointer_handle_enter which looks like the function where the cursor is set. For 33c923b the breakpoint hit when hovering the moues over swaybar, for 99bda4a it did not. However, the mouse pointer still looks the same in both cases.\n. I got it wrong in my previous post. Happened to set the breakpoint on the wrong function. pointer_handle_enter is not called for either of the two commits. I see what you were saying here:\n\nI'm saying that swaybg and swaybar were not shell surfaces before this patchset, and it's only shell surfaces that receive a cursor. Because they aren't getting a cursor I think they've been misconfigured.\n\nI miss read your first comment as if you were saying the mouse pointer had changed after this patch set, which was not what you said. Instead you were saying that its always been wrong and that you anticipated that once converted to using a shell surface, pointer_handle_enter should have been called setting the cursor.  Sorry!\n. I'm trying to dig into this some more but I can't figure an easy way how to capture the log output from swaybar. @SirCmpwn how to you normally do this?\n.  @SirCmpwn do you have any idea as to what is going wrong and/or a good way on how to approach this problems. As you can tell, I'm pretty new to sway/wlc/wayland.\n. I think the problem could be that I'm exiting out of handle_view_created at the top of the function. Something that would otherwise been done handle_view_created (setting focus?) is missing.\n. I might have made progress. If I call wlc_view_set_mask(handle, VISIBLE); before returning from handle_view_created the mouse callbacks (pointer_handle_enter et. al. in window.c) gets called on mouse events. However, this also causes two bars to be rendered one at the top and one at the bottom of the screen but it is only the one at the top that registers the mouse events. My config file puts the bar at the bottom. I double checked that I only have one swaybar process running. Any ideas?\n. Alright, I think I know what is going on.\nFirst, we need to call wlc_view_set_mask(handle, VISIBLE) on the panels and backgrounds.\nThe bar is now rendered both by handle_output_pre_render and wlc. handle_output_pre_render() calls wlc_surface_render(surface,  geometry) which faithfully renders the surface at a location dictated by the geometry but does not update the surface geometry (as a call to wlc_view_set_geometry would).\nFurthermore, wlc_view_set_geometry does not seem to be called by Sway for panel and background surfaces. In this case wlc seems to give them a default geometry locating them at the origin, hence the second bar at the top of the screen in my case. Now, wlc appears  to be using surfaces geometry to determine where to send mouse events and since it things that the bar's location is at the top of the screen, wlc wont generate mouse events when the mouse is over the bottom bar rendered handle_output_pre_render().\nPhew, this one took quite some effort to figure out.\n. Here are a few reasons why having windows \"own\" the mouse and the keyboard\n1. Before my change the mouse was \"owned\" by the window so someone probably thought this was a good idea for the mouse. This is not a very strong argument as this might be coincidental.\n2. Is the registry really \"owning\" the keyboard and mouse? Having a registry is standard pattern and does not necessarily imply ownership, the registry is just a place where you can find stuff which might be owned by other entities.\n3. The way I see it is not about ownership of the input devices but about how manages the state required to use them (e.g., last_code, last_x and last_y). This state is passed in as the auxiliary data to wl_pointer_add_listener and wl_keyboard_add_listener. The way I understand Sway's client support code, each client has one instance of struct registry. If a client has multiple windows, it seems reasonable that each window maintain their mouse/keyboard state. It could even be a bug if they don't.\nI have more to say about this but not enough time to write it up. Please correct me if I'm wrong about any of this\n. I'm sorry, I'm saying that: 1) a client can have many windows, 2) we need to maintain input state for each window (e.g., last_code) and 3) each client has a single instance of the registry. If these three points are correct it implies that a multi window client needs more than one instance of the input state.\n. Why are the two different?\n. Fair enough.  If I drop 06b63fe will you take the rest of the changes?\n. For me it  idles well below 1%. If you don't mind, could you share your configuration file and I'll try to reproduce this. If you think it has nothing to do with how its configured, could you give some pointers on how to reproduce?\n. Can't reproduce. However, I found that when XXX in bar { status_command XXX } does not exist swaybar runs at 100% CPU. \n. Hey, @SirCmpwn maybe you could try what happens if you don't use your custom status command.\n. Mouse pointer looks like the X default and mouse events are received by the bar.\n. Not very well unfortunately. I got so excited when the bar started getting mouse events that I forgot to test re-sizing and swaybg. I'll try to work on this some more maybe tonight or tomorrow.\n. Think I got this working but before you merge to master could you please test it.\nI wanted to focus on the bar first so I reverted some of my code related to background. I will come back to this later but just in case I don't, I don't want to leave half-done, non-working behind.\n. I forgot to commit something..\n. btw. I have not tested this on dual head since I only have one monitor at home.\n. One more thing. I didn't to anything to try to set the z ordering. Fullscreen does work, but that might be coincidental. Do we need to set it explicitly?\n. [handlers.c:521] Command 'restart' failed: Unknown/invalid command\nGet this before any of my changes as well.\n. Reload seems to work just fine.\n. This last commits require the previous commits to be tested and I was to lazy to create a branch with only these commits and too lazy to figure out how to create a PR with only these new commits. Hope you don't mind that I amended them to this PR.\n. Last piece of the puzzle. You can now change workspace by clicking on the bar.\n. Fixed the the memory leak and misuse of ipc_single_command.\n. I look into that once this PR has been merged. Can you please open a ticket with all the mouse related features you want to see for swaybar and assign it to me.\n. We know what output each panel should be on: https://github.com/SirCmpwn/sway/blob/master/sway/extensions.c#L88. Could it be as simple as telling wlc what output to put the panels on?\n. Yes, I didn't  mean to close this PR, must have done so by mistake.\n. The dual head problem was easy to fix: git grep -n 'wlc.*output' in sway's source tree, found wlc_view_set_outpu and added a call to it in handle_view_created. Patch on the way. It will take longer to fix the spelling and tab errors ;)\n. Bump. Can we please try and get this merged.\n. Done\n. This is more of a  RFC pull request.\n. I was waiting for you to sign off on this one so that I can do a second round of manual testing before merging it. #762 is pretty much ready to go but I think it might be better if we get this one merged first and then I can rebase  #762 on top of this one before merging.\n. It does. Thanks.\n. That looks pretty cool. I saw that you have some nice tests for list and readline in there.\nI've been looking at what needs to be unit tested to ensure the correctness of the move commands, its a lot, and some of it will not be easy to unit test. My experience is that it is sometimes quite hard to add unit tests after the fact. When production code and tests are written at the same time, the production code tends to be written in a way that makes it easy to test.  If production is written without tests, the converse is often true. \nHaving given this some more thought, it seems to me that we can get a lot of value with minimal effort by doing system testing like I outlined in the description of this ticket. Unit testing would be preferred, and is a great long-term goal, but it just seems to be too much work and even with full unit test coverage these system test will still have value and the time spent implementing them will not have been wasted.\nThat's my two cents.\n. That's disappointing \n. This function is called on the client side.\n. This file does not follow the formatting rules, it uses spaces instead of tabs. The two lines I added do use 8 space wide tabs. I'm not sure why it looks like their indention is less than other lines here.  Should I use spaces in this file spaces in this file to be consistent?\n. This log message should be: \"Clicked on workspace button %s\". \n. No need to have a global struct config since swaybar which points to it was already global.\n. No need for the in strip_num argument since all call sites pass in swaybar.config->strip_workspace_numbers which is available here.\n. Oops, memory leak forgot to free command.\n. And another bug, the last argument to ipc_single_command is both input and output... Interesting semantics.\n. Fixed\n. Fixed\n. Fixed\n. Not sure what the correct behavior is here: prev vs. prev_on_output. \n. I guess we could pass time as well but I didn't needed it..\n. Not exactly sure what axis and value. Documentation is lacking. Testing suggests that on a mouse with a standard scroll wheel axis is zero and value is -10.0/10.0 when scrolled up/down.\n. Btw. One annoying thing with prev/next is that when changing to a workspace on a different output the mouse pointer follows.\n. @Hummer12007 something like this?\n. My additions to this function made it even more of a mess. It needs refactoring. The way the arguments are parsed needs to be cleaned up a bit. If it turns out that the way I added this functionality is acceptable, I'll try and clean up how the arguments are parsed here.\n. https://i3wm.org/docs/userguide.html#_moving_containers\n. Support both?\n. I know you are not a fan of macros but I was hoping you would make an exception here on the basis that this macro improves code quality, is one of the most commonly used macros and that it cannot be implemented as a function. I'm not going to argue with religion though so if you still want me to get rid of it just give it another thumbs down. \n. How about this: Change all definitions of struct cmd_handler arrays to:\nstatic const size_t FOO_HANLDERS_SIZE = XXX;\nstatic const struct cmd_handler foo_handlers[FOO_HANLDERS_SIZE] = {\n...\n};\nThis way we can replace ARRAY_SIZE with FOO_HANLDERS_SIZE and we don't have to duplicate the expansion of ARRAY_SIZE all over the place.\n. Apparently clang-format is not enough. Guess I'll create a local vimrc which I probably should have done long time age. \n. Do you have any other suggestions or do you want me expand the ARRAY_SIZE macro everywhere? If you don't mind what's wrong with having the size constants?\n. ",
    "sullome": "Is it OK, that it is possible to use only half of the colors?\nI am trying to configure swaybar. In the config file:\nbar {\n    position top\n    colors {\n        statusline #000000\n        background #7f7f7f\n    }\n}\nIf I set background to darker colors, like #303030 it would be ok, but if I change any color (R,G or B) to the 80 or brighter (like #f0f0f0) it will turn to the bright cyan color (instead of white, gray, whatever) \u2014 it will be #7fffff.\nJust to be clear, this config:\nbar {\n    position top\n    colors {\n        statusline #000000\n        background #808080\n    }\n}\nwill produce bar with background color #7fffff.\n. Hm... I am trying to ask, is this an error, or not. Looks like an error.\n. Well, there is no error in log, actually. And the strange thing with colors appearing even with the default configuration (in which the statusbar, text on the swaybar, are bright cyan).\nAlso, for background and statusbar as I can see in man sway-bar only one color is needed.\nLog from another example:\nConfiguring bar bar-0\nhandling config command 'position top'\nfind_handler(position) 0\nSetting bar position 'top' for bar: bar-0\nhandling config command 'colors {'\nfind_handler(colors) 0\nhandling config command 'statusline #000000'\nfind_handler(statusline) 0\nhandling config command 'background #ffffffff'\nfind_handler(background) 0\nhandling config command '}'\nEnd of bar colors block\nhandling config command '}'\nEnd of bar block\nBackground also cyan here.\n. I can try to test this. If this is the only line that require changes...\n. Yeap, this worked for me:\nhttps://itmages.ru/image/view/4684832/e27eb77c\nBar config:\nbar {\n    position top\n    status_command sway_status.py\n    strip_workspace_numbers yes\n    pango_markup enabled\n    font swaybar-icons 14\n    colors {\n        statusline #000000\n        background #dedede\n        separator  #b7b7b7\n        inactive_workspace #00000000 #dedede #555555\n        focused_workspace  #b7b7b7   #f5f5f5 #555555\n        urgent_workspace   #00000000 #dedede #00a0ff\n    }\n}\nAnd the colors are correct now.\nThanks!\n. ",
    "sjug": "Shouldn't tray icon support be in this list?\n. Thanks light did work just not the -m or -c flags, SAU does. Cheers @aouelete.\n. @alkino Should I build off your branch?\n. @alkino Tested the same video with the same conditions on both Sway v0.9 and on your branch. Unfortunately, I see no performance difference with the setup described. \n. @alkino \nI've run your instructions, report gist: https://gist.github.com/sjug/84e135878f5b165a0c52218057f011d9\n. @alkino You're right sorry, that was a useless report. I've done another one that actually has some data.\nLet me know if this is more helpful: https://gist.github.com/sjug/3f01b61db85370ed614ae5cc934908df\n. Very clear difference in application profile with the patch, but the performance difference I do not see.\nSee: gprof report gist\n. I turn off borders on mpv, so shouldn't it not be calling that?\n. Not fixed but OK.\nOn Fri, Dec 23, 2016, 11:31 AM Drew DeVault notifications@github.com\nwrote:\n\nClosed #939 https://github.com/SirCmpwn/sway/issues/939.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/939#event-904210345, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AHM2sacdAaHt0Dcb3c-Jq7g2wyDoCm7Qks5rK_dbgaJpZM4KRinb\n.\n. I have profiled it. You might be lost though, this is the issue tracker not\nPR list. I'm reporting an issue.\n\nOn Fri, Dec 23, 2016, 11:32 AM Drew DeVault notifications@github.com\nwrote:\n\nProfile it and send patches.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/939#issuecomment-269014415, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AHM2sacdAaHt0Dcb3c-Jq7g2wyDoCm7Qks5rK_dbgaJpZM4KRinb\n.\n. What are you on about? How are the results of my profiling not available here, did you check this thread at all? So you're saying because I wasn't asked for a flame graph at any time and never generated one out of the profiling data that I've posted here... That's somehow what should be done. Good one.\n\nMaybe the guidelines for graph generation are in doc somewhere that I missed?. \"Getting snotty\"? I did everything I did to help debug the issue with these \"volunteers\" you speak of. Everything was fine until you rolled in here closing the issue and saying \"Profile it and send patches.\"\nLet me know how I was \"snotty\" prior to anything you said. . ",
    "johnae": "Should click events be part of this list? Eg. https://i3wm.org/docs/i3bar-protocol.html - when configuration specifies \"click_events\": true. I saw mouse events being part of this list but I assume those mean just in general (and perhaps clicking on workspace labels).. Yeah, I'm very unfamiliar with the code base atm - just started looking at it today. Should be quite easy to fix I believe.. @SirCmpwn There. Much better overall i.m.o and workspace switching should work as before (unless over the status bar items ofc).. Using sway at commit https://github.com/swaywm/sway/commit/5d21c33f13f34ed592388512cc092986324c8f35 (tip of master atm).. @martinetd Did as you suggested and debugged swaylock - it does get the correct password, which lead me to look elsewhere and ofc it's all my fault - bad/missing pam config. I've been running sway directly from a clone without ever thinking of pam. @SirCmpwn I'm running NixOS. So the fix in my case was really simple - in /etc/nixos/configuration.nix:\nnix\nsecurity.pam.services.swaylock = {\n    text = ''\n      auth include login\n    '';\n  };\nThen rebuild the os conf.. Thanks @colemickens that's very useful.. In sway/commands/opacity.c it doesn't look like it is checking whether config->handler_context.container is null though I'm no expert on the codebase at all.. Working on it.... Created a pull request. Verified locally that this solves the issue.. Rebased.. @RyanDwyer Yeah that's also the case. I found it when playing with IPC and issuing commands immediately on startup. There may be more bugs in that area, at least that was a \"feeling\" I had. I'll see if I can find some more.. I can confirm this happening reliably to me as well. Started when I updated sway - can't say exactly which version I had unfortunately but I know it was NOT older than this https://github.com/swaywm/sway/commit/1c1fbd49db9a493af8101792ceede5f035724a6d.. Afaik the new behavior is how i3 works which is why it was changed in sway. Doesn't mean it's the best way to do it ofc.. Yes. Since yesterday I believe.\nDen fre 7 dec. 2018 17:35JonnyMako notifications@github.com skrev:\n\nI'm seeing lots of crashes in nightly builds starting yesterday. Just\nopening a new tab and typing into url field seems to crash firefox, for\nexample. Anyone else seeing frequent crashes?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/3115#issuecomment-445288813, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AABurA5Kx_7zZBJqnNTbW56hdSv4gvOuks5u2pi0gaJpZM4YZw7u\n.\n. I have this problem very often. I tend to just close the lid on my laptop (relying on HandleLidSwitch of systemd). When I later wake it up, the desktop briefly shows - sometimes seemingly for a whole second - before the lock screen hides it.. @RedSoxFan Yeah I see that now. Force pushed.. Yep same here after just updating to latest wlroots + latest sway.. @RedSoxFan Yeah https://github.com/swaywm/sway/commit/4503ad2d19d5039259b572729115fef149f1b44e works fine wrt config reloading.. @RedSoxFan Yeah it may have been since I can't reproduce this anymore and I'm on latest sway/wlroots now. Closing this.. And when it does work, it looks like this:\n\njson\n{\n     \"identifier\": \"1118:2354:Surface_Arc_Mouse\",\n     \"name\": \"Surface Arc Mouse\",\n     \"vendor\": 1118,\n     \"product\": 2354,\n     \"type\": \"pointer\",\n     \"libinput\": {\n       \"send_events\": \"enabled\",\n       \"accel_speed\": 0.0,\n       \"accel_profile\": \"adaptive\",\n       \"natural_scroll\": \"enabled\",\n       \"left_handed\": \"disabled\",\n       \"middle_emulation\": \"disabled\",\n       \"scroll_method\": \"none\",\n       \"scroll_button\": 274\n     }\n   }\nSo basically no difference. I've got another mouse like this at home and the same thing happens when using that so it's not the mouse itself it would seem.. Ok so when I lose scrolling I also no longer see any axis events using sudo libinput debug-events.. ",
    "ItachiSan": "What is the progress about the tray icon bar?. ",
    "tmccombs": "I don't know very much about wayland or tray icons, but if someone points me in the right direction I'd be willing work on implementing the tray icon bar.. Is there a way to set the clipboard data from cli?. Is there a way to set the clipboard data from cli?. Got it. Couldn't find it in documentation. I may send a PR to add it to the man page.. Got it. Couldn't find it in documentation. I may send a PR to add it to the man page.. But is there any way to set these environment variables for a single user?. But is there any way to set these environment variables for a single user?. unfortunately, dmenu doesn't have an equivalent of the -l option for i3-input :(. unfortunately, dmenu doesn't have an equivalent of the -l option for i3-input :(. I much prefer rofi to dmenu. Will wayland-native rofi (which as I understand it will use the wayland-wall protocol) work on sway?. I much prefer rofi to dmenu. Will wayland-native rofi (which as I understand it will use the wayland-wall protocol) work on sway?. > Check for user input / event input and if it hadn't happened in n seconds\nI'm not super familiar with wayland, but from what I can tell there isn't a way to do that. What I'm really asking for is a way to ask sway  when the last user input happened, so that a script like that is possible.\nOne option could be to have sway tell logind when the session is active or idle, and have systemd handle actually locking, suspending, etc. Of course, that doesn't work on systems without logind.. > Check for user input / event input and if it hadn't happened in n seconds\nI'm not super familiar with wayland, but from what I can tell there isn't a way to do that. What I'm really asking for is a way to ask sway  when the last user input happened, so that a script like that is possible.\nOne option could be to have sway tell logind when the session is active or idle, and have systemd handle actually locking, suspending, etc. Of course, that doesn't work on systems without logind.. ",
    "kellpossible": "Is this issue's tray icons item closed with the merging of #1234?. Is this issue's tray icons item closed with the merging of #1234?. ",
    "PeaceAlways": "Really need mode options.\nAppreciation for this much fast and perfect development. Really awesome man.. Really need mode options.\nAppreciation for this much fast and perfect development. Really awesome man.. Mine too flickers, not usually but occasionally during chromium is running in full screen. I don't know but I guess this is not a graphics driver issue.. Mine too flickers, not usually but occasionally during chromium is running in full screen. I don't know but I guess this is not a graphics driver issue.. Suppose,\nset $term termite\nset $workspace1 \"1:\uf209General\"\nNow, if I have to open vim inside termite in specific work space i.e., $workspace1. Then what should I do.\nI tried:-\nexec --no-startup-id swaymsg 'workspace $workspace1; exec $term -e vim'\nbut this is not working. I don't know why but due to variables are not working under quotation or something. I just want real way of doing this.. Suppose,\nset $term termite\nset $workspace1 \"1:\uf209General\"\nNow, if I have to open vim inside termite in specific work space i.e., $workspace1. Then what should I do.\nI tried:-\nexec --no-startup-id swaymsg 'workspace $workspace1; exec $term -e vim'\nbut this is not working. I don't know why but due to variables are not working under quotation or something. I just want real way of doing this.. It goes to workspace test and opens termite.. It goes to workspace test and opens termite.. Can you please suggest some replacement that can be placed over swaybar. For networks and bluetooth.. Can you please suggest some replacement that can be placed over swaybar. For networks and bluetooth.. Yeah, of course we are looking forward for it.. Yeah, of course we are looking forward for it.. I am playing DotA 2. And that just works fine without this kind of issue... . I am playing DotA 2. And that just works fine without this kind of issue... . ",
    "kafran": "Will it support vertical bar/panel?. ",
    "ptMuta": "Did i3bar toss in trailing garbage during click events? Currently swaybar adds a trailing comma which means it emits a malformed JSON value and breaks the usability for example of i3status-rust.\nI would love to provide a patch for this but I'm not sure which repository to submit it to.. There we go... First time I had to correct commiting with a wrong profile. ",
    "cyberhuman": "Oh, I see. My working directory is not clean (previously the build was not performed in a separate dir) and cmake does not create any files in the build directory.\nI will remove that.\n. I have the same issue with font pango:dejaVu Sans Mono 8, and it's even more pronounced (even shorter titles are cut off), probably because of monospace font?. ",
    "colemickens": "I've looked at Orbital and wlc and I kind of understand how Orbital supports this configuration.\n@SirCmpwn Have you thought about what this might look like? I realize that each compositor owns the code that interacts with libinput, but I don't see any reason there couldn't be a small library that could be shared between Orbment/Sway/Gnome/whoever for configuring libinput devices.\nAny compositor that wants to support this common configuration mechanism will utilize this library. In turn, Orbment and Sway would connect the wlc interface to it. The library would handle new input device events and would have it's own logic for parsing a per-input-device config file (XDG_CONFIG_DIR/libinput/devices/DEVICE_NAME). It's only job is to parse the input device configuration files and apply them when wlc reports a new device.\nThat would allow me to configure my input devices once per computer and have them operate the same under any compositor that supports this \"standard\".\nJust a random idea I had. I've been toying with the notion of trying to hack Sway just enough to invert the scroll direction....\n. I have a branch with libinput modifications. These modifications allow you to control a number of things like natural scrolling click to type, disable while typing and more. I'm currently using it to enable natural scrolling, disable-while-typing on my touchpad, and using it to disable the touchscreen on my device (which prevents sway from crashing).\nThere is one small problem that keeps me from sending a pull request. libinput doesn't give a super great naming convention to devices, which makes it hard to select a good key to use for configuring a given input device. Orbment only allows you to configure libinput devices based on product/vendor id. But, for example, my touchpad and touchscreen have the same product/vendor id. Further, the event# identifier is inconsistent between boots, otherwise that would be usable.\nUnfortunately, I've been told that the only way to do this, is by configuring against the full string'd device name/description that comes back from libinput. So, you'd have to do something like input \"0:0:Atmel Touchscreen XL1\" tap off in your configuration file. Which has it's own obvious problems, like the fact that the device names have spaces in them and I don't know if the config parsing code knows how to handle quoted strings.\nThe other option is to reach down to the udev device and try to allow for configurations that address \"classes\" of devices. Something like this:\ninput touchpad tap enable # enable tap to click\ninput touchscreen events disable # disable all events for this device\nBut then what if someone wants to configure two touchpads independently, etc...\n@SirCmpwn  thoughts?\n. I think I see how to make input <id> {  } work. Is the desire to prevent runtime configuration as the bar block does? \n. I left the changes unsquashed here if you want to view the diff: https://github.com/colemickens/sway/commits/libinput-wip\nIt works with both config types -- with a block just like mentioned in @SirCmpwn's comment above, or with the format in the original post.\nI've added pointer acceleration, though I've not tested it.\n@mikkeloscar I wouldn't expect them to show up I think. Are you using xf86-input-libinput? Either way, I think you configure libinput through X via xorg.org.d overrides; at least that's what I've done.\n. I've now removed input_devs from input_config struct. \n. The slashes are added because the output format is JSON. swaymsg could decode the json rather than just printing it out.\n. Addresses #468 \n. Even though it's behind an optional flag that still prints valid JSON?\n. cc: @Flandoo\n. Thank you for the very fast answer. In case someone else comes across this, I have added this to the default config: bindsym $mod+Shift+Up sticky toggle and now I can make a window float, and then hit that button combo to make it sticky.\nThanks again for the helpful, fast reply. Cheers!. (My swaylock command is simple: swaylock -c 000000.). I may have misunderstood, but my swayidle command looks like this, so I wouldn't have expected dpms to be the culprit? exec swayidle timeout 300 'swaylock -c 000000'.\nIf we think dpms is still involved, or want to resolve the other issue first, we can put this Issue on hold and I can provide more data after Issue #2706 is closed and I pull latest.. Yes. I meant to mention it as well... When it gets into this failure state,\nthe interface acts almost like it's verifying (and quickly rejecting) the\npassword after each keystroke? It's quite strange. If I don't find any\ninformation with the debugging options, I'll try to take a shaky cam video\nat least.\nOn Mon, Oct 1, 2018, 10:23 PM Hendrik Schr\u00f6ter notifications@github.com\nwrote:\n\nI can confirm the issue. I noticed \"enter\" key events (key code 28) during\ntyping the password. It seems that only a part of the password is evaluated.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/2743#issuecomment-426152572, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAT9dOY6RH7LOPxAukayv1UtW2VOinZsks5ugvg6gaJpZM4XDNc9\n.\n. It repro'd again, but I didn't have debug enabled. I did get a video though: https://photos.app.goo.gl/mxRM2TiHjUgVm8ZP9 \n\n13s - 22s demonstrates the problem I've described. Input slows, and then circle interior flashes red very quickly as if it's validating and rejecting the password after each keystroke. As you can see, in this instance, it was only doing it part of the time, you can see after 23s that it seems to go back to taking the keystrokes normally.. I've updated to 5d21c33f13f34ed592388512cc092986324c8f35 and am setting WAYLAND_DEBUG now. I'll update if I see it again.. Thanks for the explanation, sorry for the noise.. @johnae just a heads up, there is a program wrapper for sway. I have a slimmed down version I'm using successfully with the latest commits as well: https://github.com/colemickens/nixpkgs/blob/3a7df52cf34cad742a943b4eb0644db8d0aa47a4/nixos/modules/programs/sway.nix (the sway/wlroots/meson packages are in sway-wip branch).\nIt has a more minimal pam config than you have here, but it seems to work for me. . Both would be great too.\nI tried peeking at the code, I see the switch statement, but it seems like it shouldn't be showing \"Caps Lock\" when it has just been disabled, unless there is a bug that causes the xkb->caps_lock to not be updated ahead of the switch? I also see what looks like code to specifically handle damaging/redraw when it's toggled. I'm probably missing some pertinent details. Please advise if you want help fixing/adding this, or ignore me if you or someone else can handle it.. @SirCmpwn I see, thanks. Updated, tested, pushed.. This is HEAD of wlroots/sway at this time:\n sway: cd02d60a992ee38689a0d17fc69c4e2b1956f266\n wlroots: 8beeb88309d87474e1b4e8eadcf245a24f04b2d0. Sorry, I tried to edit and add a bit of that earlier - it is indeed a series of drag and drop events.\nI'm not sure I understand the difference between \"upper\" and \"far upper\" in the context of a window. The only thing I can guess is that \"upper\" is the top part of the window and \"far upper\" is the slice along the edges of a bigger container or the workspace?\nGiven my confusion, a video might be better: https://photos.app.goo.gl/GHyMv3DySmX5dxxv7 \nLet me also try to be more precise:\n\nOpen three terminals, such that they're each in a column.\nDrag 'C' to the (far?) upper drop area of window 'B'. (eliminating the third column)\nDrag 'C' to the (far?) upper drop area of window 'A'. (causing the second column to become a vertically split container)\nDrag 'B' to the (far?) lower drop area of window 'A'. (eliminating the second column [and container])\n\n(The parenthetical bits are just my observations/guesses at what is going on.)\nUnfortunately, I can't figure out how to get a core dump or backtrace given that sway suspends and I can't even change TTY. I don't have a second machine to SSH and I can't figure out how to send keystrokes to a nested instance.. I found a stranger, 100% consistent repro that doesn't require reloading configuration:\n\nStart sway with outputs unconfigured.\nLaunch Chrome.\nRun keystroke to set output (including scale=2).\nLaunch Firefox.\n\nFirefox will be scaled effectively 4x, instead of 2x.\nEDIT: Note: Chrome is scaled up, properly, to a blurry 2x (Xwayland).\nI'll try to get a log tomorrow with this minimal repro if it's needed beyond what @c-edw provided.. Filed upstream: https://bugs.freedesktop.org/show_bug.cgi?id=108632. Actually, I just repro'd the same behavior with a simpler test case:\n```\nset $redshift workspace 2;\nbindsym $mod+Shift+r $redshift\n```\nbooted Sway with a single monitor attached and it started up on workspace 2.. @RedSoxFan Thank you very much for the detailed explanation; very illuminating.. Experiencing this nearly every time I lock. Does swaylock produce logs that I should be collecting - I don't see a flag. Are the sway debug logs even helpful here? Just trying to see if I can be of any help.... @emersion I'm seeing this is cases where DPMS is not involved. I have a very low threshold for trigger swaylock (30s) so I have lots of instances where swaylock is only running for maybe 10 seconds or so. I guess I don't know what sway/wlroots is doing internally, but I wouldn't guess there to be a monitor disconnect event involved.\nI think this is a somewhat recent regression, or at least it got considerably worse very recently. Lacking better suggestions, I can try to bisect this as well.... I've added this to my config:\noutput \"eDP-1\" enable mode 3840x2160@59.997002Hz pos 0 0 scale 2\nget_outputs still reports the incorrect 1080p mode as the current mode.. I'll try to fix it. Here's debug logs as well: sway.log\n. Found so far:\n\nsway->root->output->items[n] derives width and height from wlr_output_transformed_resolution: https://github.com/swaywm/sway/blob/b1aec1ef14459e3458ebb85a69bccad97e7658e7/sway/tree/output.c#L79\ndef of wlr_output_transformed_resolution: https://github.com/swaywm/wlroots/blob/675cf8457ef3493112def366d7090731172ee872/types/wlr_output.c#L321\n\n~~Looks suspicious. Both branches do the same thing, neither multiply by scale. Let me know, I can move the issue over if I'm on the right track.~~\nEdit: Never mind, that's a different transform, the two branches are different. I'll keep looking.. Made the requested changes. Maybe we should change current_mode in the json to something like current_dim[ensions] or current_resolution, or maybe it doesn't matter; let me know.. @emersion Late night edits? I did an amend where I removed \"refresh\" after I thought I'd already removed it from current_mode as requested. I must've just gotten it in the wrong place one of the times. Sending a follow-up PR now.... This PR has changed based on @emersion's suggestion here: https://github.com/swaywm/sway/pull/3052#issuecomment-435619288\nexample output from this revision:\n```\n$ swaymsg -t get_outputs\nOutput DP-1 'Dell Inc. Dell AW3418DW NDRWF78Q0G8L'\n  Current mode: 3440x1440 @ 49.987000 Hz\n  Position: 0,0\n  Scale factor: 1.000000\n  Transform: normal\n  Workspace: 1\n  Available modes:\n    640x480 @ 59.939999 Hz\n    640x480 @ 59.939999 Hz\n    640x480 @ 60.000000 Hz\n    720x480 @ 59.939999 Hz\n    720x480 @ 60.000000 Hz\n    720x576 @ 50.000000 Hz\n    800x600 @ 60.317001 Hz\n    1024x768 @ 60.004002 Hz\n    1280x720 @ 50.000000 Hz\n    1280x720 @ 59.939999 Hz\n    1280x720 @ 60.000000 Hz\n    1920x1080 @ 50.000000 Hz\n    1920x1080 @ 59.939999 Hz\n    1920x1080 @ 60.000000 Hz\n    3440x1440 @ 49.987000 Hz\nOutput eDP-1 'Sharp Corporation 0x148B 0x00000000' (inactive)\n``. and/or it doesn't know thatwidth->amountandheight->amount` will always be ~~non-negative~~ truthy, maybe?\nanyway, thanks for the fast review as always.. This seems to just be happening all of the time for me now, though I can also repro it on much older builds where I wasn't previously experiencing this issue.\nAnyway, the workaround described by @RedSoxFan here seems to resolve this issue as well, from initial testing: https://github.com/swaywm/sway/issues/3277#issuecomment-445565963. Cool, another thank you from me!. The add_definitions lines has a typo and can be removed. Removing the other two lines causes me this when starting ./bin/sway -d &> log:\n./bin/sway: error while loading shared libraries: libinput.so.10: cannot open shared object file: No such file or directory\n. I intentionally didn't mention defaults because I don't know what they are with libinput. My understanding is that each device or type of device might have different defaults. That's also why I provide explicit enable/disable for each configuration option.\n. fixed\n. I think I've added what you're asking for, I'm not 100% sure.\n. ",
    "vikstrous": "This is i3lock. I have xautolock set up to activate i3lock after 5 minutes of inactivity.\nI tried swaylock and it didn't even work when run from within a sway session on the command line. It crashed with:\n(process:3574): GdkPixbuf-CRITICAL **: gdk_pixbuf_new_from_file: assertion 'filename != NULL' failed\nERROR: Failed to load background image.\n. Sorry, I meant i3status.\nsway --version\nsway version 33a74bf (2015-12-27, branch \"master\")\n. ",
    "Kaligule": "While I don't know @archfan s setup, I can confirm sway from AUR does compile and run on arch linux (tested right now).\n. :)\n. > I tested this in i3 and found that if i have a fullscreen term, I am unable to spawn a new term.\nThats doesn't hold for my setup (Arch Linux, i3 version 4.11). When I'm in fullscreen and I open a new term, it is opened in the background and the fullscreen window persists.\nThe commit #433 solved that issue for me by implementing the exact same bahaviour. Thanks a lot.\n. :)\n. To be honest I am not sure. I was 100% certain I have used this command 100 times in i3, but I can't find it in my old config or the default configs.. You are right. It is documented here.. I can confirm this flash. I can also confirm that its just a minor issue.\n. ",
    "archfan": "Yup, compiling works fine now after updating the wlc libraries.\n. ",
    "chetanpm": "[ { \"name\": \"VGA-1\", \"active\": true, \"primary\": false, \"rect\": { \"x\": 0, \"y\":0, \"width\":1024, \"height\":768 }, \"current_workspace\": \"1\" } ]\nTried logoff,reboot\n. Here's the log: https://clbin.com/nz7FR\nThe bg image error, it is showing for other pictures as well.(should there be any specific package to process images to make them suitable for wallpaper?\nstill WLC chose mode (0)\n. Taking the background off, Can you make an inference from this log: https://clbin.com/TSlto\nThe text on screen are smaller-like they should be.\n- monitor resolution still stuck on 1024x768, 85hz. \n- swaybar is only up to 3/4th the width of display. The remaining area allows mouse pointer but unclickable(checked with chrome)\nCan't we list all the modes supported by the monitor first and then choose one from there. Because my monitor has 1024x768 85hz, 1156x956 75hz, 1280x1024 60hz,.... and so on.\n. I am running it directly from tty. I don't even have xorg package installed.\nFresh install wayland and its dependencies only.\n. Is there any suggestion of where to look, because I rechecked- I got no xorg installed, no display managers. I boot into tty and run sway from there. Can't understand why does it invoke New output 1..\n. which I am definitely not doing.\nThe log says something about a lock file and another compositor running thing in the first line. should I delete that file??: https://clbin.com/TSlto\n. Alright:\n// I was hoping to build a usable DE on the modern standards. The resolution is defaulting to low output,\n// I am more fixated now on knowing how is the issue fixed.\nI have a fresh arch installation, with just base packages.\nI then got wayland, sway-git and it dependencies and (dmenu, and chromium).\nI always boot to tty and then start sway. Now to rice it the way I want, starts configuring.\nMy desktop monitor is a CRT. Unlike LCDs it has default resolution 1024x768 85hz, but capable of 1280x1024 60hz. The first thing I do after an os installation is to increase resolution, so that everything look not gigantic.\nI am following each step, and as the culture of work in progress, am just curious about how to fix this. Maybe framework is too modern to support the vintage 2006 CRT, am curious.\n. @FreeFull: It looks like the feature needs to be added and enabled through DRM protocol- http://goo.gl/uLyXTK\n. ",
    "dotlambda": "I want to run j4-desktop-menu calling dmenu (corrected from dmenu_run) with the specified colors that I also use in other places in the config.\nI think I made it work:\nsh\nset $dmenu 'dmenu -fn ProFont-11 -nb \"$bg\" -nf \"$fg\" -sb \"$fg\" -sf \"$bg\"'\nset $menu j4-dmenu-desktop --dmenu=$dmenu --term=urxvt\nBut having a possibility to write a single backslash in front of a variable would still be nice:\nsh\nset $color #ffffff\nset $menu dmenu_run -nf \\\\$color\nshould result in $menu containing dmenu -nf \\#ffffff (without the backslash the # indicates a comment I guess)\n. It can't be amixer's fault: a simple exec echo \"foo\" >> ~/bar won't produce multiple lines when the key is held down, whereas in i3 this command does.\nIs it maybe because the command doesn't start a graphical application?\n. ",
    "SethBarberee": "I'll make sure to do that. The only thing that isn't in my request but should be is an update to cmake to install those files to the appropriate directory for zsh completions. I didn't do that because I did not how to code cmake. \n\nOn Jan 8, 2016, at 4:38 PM, Mikkel Oscar Lyderik notifications@github.com wrote:\nI think this is good, but maybe rename the files to something like completion.zsh or swaymsg-completion.zsh etc.\nAlso please use tabs for indentation, right now you use a mix of tabs and spaces :)\n\u2014\nReply to this email directly or view it on GitHub.\n. Could this work for the cmake file? They will be placed with this cmake file in a directory called completions. However, the problem with suffixing them with .zsh screws up the autoloading feature because it has to be prefixed with an underscore such as _(command) for each completion file. If I am wrong, then please tell me!\nhttps://gist.github.com/SethBarberee/7c833c963d06d1f4c778\n. I debated this on the sway IRC was told that it was share/zsh/Completions/ but I do agree with you, crondog. I too think it should be share/zsh/site-functions.\n\nSent from my iPhone\n\nOn Jan 11, 2016, at 5:11 PM, crondog notifications@github.com wrote:\nShouldn't the directory be share/zsh/site-functions as that is where third party completions go\n\u2014\nReply to this email directly or view it on GitHub.\n. Will do :)\n\nSent from my iPhone\n\nOn Jan 11, 2016, at 5:19 PM, Mikkel Oscar Lyderik notifications@github.com wrote:\n@SethBarberee share/zsh/site-functions is the correct path as mentioned by @crondog.\nCould you also move the files to completions/zsh then it will be possible to add bash completions if anyone want that at some point.\nOther than that it looks good.\n\u2014\nReply to this email directly or view it on GitHub.\n. I tried to squash them but to no avail... I'm sorry if i'm causing a lot of trouble. I'm still new to Git and I will try to fix the problems before I try to actually make the pull request. If I did somehow fix it then maybe there is hope..\n. It says 9 days ago so I guess I squashed it? Idk\n. Yeah, I've been busy all week and forgot to do that. Thx!\n\nSent from my iPhone\n\nOn Jan 17, 2016, at 11:39 AM, Drew DeVault notifications@github.com wrote:\nWhoops, you got one commit too many in the squash. This can't be merged like that. Can you just grab the relevant files and make a new commit on a new branch and open a new pull request?\n\u2014\nReply to this email directly or view it on GitHub.\n. So I force-pushed this so now it's one commit. This should work now, I hope. \n. I'll code the others up later because those will be a lot harder to do such as the sway command. My priority is the restructure swaymsg next then I'll code sway.\n\nSent from my iPhone\n\nOn Jan 22, 2016, at 10:47 AM, Drew DeVault notifications@github.com wrote:\nAnd the others?\n\u2014\nReply to this email directly or view it on GitHub.\n. With rgba surfaces, wouldn't that mean that the user could specify the colors too and hence a colored border? I think that would be good choice in terms of customization...\n. Fallback fonts are supported in swaybar but I don't know about background colors. Powerline is kinda what I'm doing with my status bar in sway but mine has only has the arrow tips in it\n. Try those commands with a plus instead and see if that works. Mine is like this:\n\nbindsym $mod+Print exec swaylock -i ~/wallpaper/angelswaylock.png -s fill\n. Can you post your config file? \n. Typo?. ",
    "parkerlreed": "Video https://www.youtube.com/watch?v=j0ClJC1K2xI\nEDIT: Debug log http://ix.io/nCP\n[wlc] udev: got device input28\n[wlc] udev: got device mouse2\nrewritten name Valve_Software_Steam_Controller\nFound input device (10462:4418:Valve_Software_Steam_Cont)\n[wlc] udev: got device event14\nSo it is showing up\n. Update: Seems to be however Steam is initializing it with uinpt/udev.\nWhen the controller is wired and Steam isn't running it presents itself as a hardware mouse and keyboard and performs fine in sway. \nWired with Steam running has the same behavior as wireless with Steam running. \"Invisible\" mouse.\nWireless without Steam running doesn't do anything (Wireless is only fully initialized while Steam is running)\nThird party https://github.com/ynsta/steamcontroller and using wireless works so I'm just going to chalk this up as a Steam issue and close it out.\n. It seems any window I make floating exhibits this behavior.\n. I don't have that current setup anymore. @progandy @mikkeloscar Either of you still having the issue? I don't want to submit to the wlc bug tracker without being able to provide extra info.\n. Confirmed still happening on latest git for me.\n. I'm running into this same issue with everything from git. This is with just my normal eDP laptop and an HDMI screen connected. Oddly enough the HDMI output shows up as DP1 in Xorg.\nsway-git r5104.51ad2676-1\nwlroots-git 0.1.r9.gc55d1542-1\nLog \nlog.txt\n. @emersion Here you go gdb.txt\n. ",
    "kigerpunk": "Would it be practical to have swaylock just literally lock the screen in its current state (--transparent?), requiring a password before accepting more input? This would allow the use of conky, a webpage in a browser, a video, whatever, as a \u201clock screen\u201d.\n. :+1: for the general idea, but maybe make that the default sub-arg to --color? I'm not sure how to make it comply with the standard RGB notation.\n. I feel like breaking from 6-digit hex and retaining the general scheme is ugly. A discrete -t is starting to sound better and better.\n. @ViktorNova if you're sad and have the skills, fork it. For something keyboard-operated like Sway, there's no reason to have them.\n. I'm not very familiar with the current situation, but isn't it basically just using the wallpaper? With i3, there's no \u201cjustification\u201d for having wallpaper, as it's never shown while windows (except the floating kind) are up, but here, the wallpaper could be the borders, providing a practical reason to have one.\nBasically, I'm suggesting not implementing custom borders at all, but I don't know if that would entail a loss of functionality.\n. @mikkeloscar I rarely use the titles except when they're forced (in tabbing mode), but I definitely see why that's important. Focus is also important, so I suppose my suggestion didn't make sense, sorry.\n. I'm not sure how separate you're thinking of, but I think i3's semi-optional titlebars are a reasonable implementation. (I guess reasonable design is a large part of why I like i3 so much, actually.)\n. What's the default?\n. I don't understand; what do you mean?\n. This is slightly irrelevant, but does swaybar support arbitrary input like i3blocks?\n. @VasilPupkin Sorry that this is off-topic, but are Rennaissance waifus a thing?\n. Does that mean the random wheel thing? I felt like that didn't fit i3 very well; is there some simpler method of feedback?\n. I know Sway is intended to implement all of i3's features, but I feel like this is a good place to diverge a little.\n. If I put together a mockup, would someone with actual skills consider implementing it?\n. Of course; I was just making a suggestion. I have no idea how to write anything, which is something I need to fix eventually, but figured I'd try to help out where possible.\n. Do we mind an indicator which gives away length? That's one of the advantages of the status quo (length-ambiguous - and -agnostic - while still giving feedback), but I have a couple of ideas that would indicate length (maybe more useful to the less security-conscious user).\n. @SirCmpwn That's a good point; people don't have to use swaylock.\n@fluxchief What do you think of something based on a Sierpinsky carpet or T-square, maybe stretched to the screen's ratio? (I love the idea of a fractal indicator, but something like a Fibonacci spiral would necessitate a golden aspect ratio. Another fun option is a centered Koch snowflake or Sierpinsky triangle.)\n. Actually, a Pythagoras tree would be awesome considering the logo. My primary concern with using fractals is how computationally intensive it could get for long passwords.\n. I very much like the idea of doing symlinks; i3 didn't read my config when I tried to link it from my dotfiles repo.\n. By the way (maybe this should be a separate issue), @SirCmpwn, would it be possible to add a \"true center\" (and maybe left) alignment so that swaybar sections wouldn't all have to be right-aligned? This is distinct from the current align-within-maximum-width option.\n. Wouldn't anyone watching get notifications for #2 unless they've unsubscribed?\n. Sorry, I had #2 open already, and since I have a Firefox extension that changes the placement of new tabs (but not the fact that ctrl+tab goes right one), I didn't realise it was a blog post.\n. @SirCmpwn What do you mean by \"concerns raised by i3\"?\n. @SirCmpwn How is that i3-specific?\n. I'm not sure which of us is more confused. Are you saying that there's a problem because it's a feature that i3 doesn't have?\n. @SirCmpwn Thanks, that makes a lot more sense.\nHaving read that, I would point out that window titles being clipped already happens in tabbed (and conceivably, though much less plausibly, other) mode(s) with long titles, particularly webpages followed by something like \"- Mozilla Firefox (Private Browsing)\".. My vote is to offer the following options for tab width:\n- static percentage of screen\n- longest title's length (dynamic)\n- static number of pixels\n- static number of characters\nAlso, what if we allowed adjustment through similar means to adjusting window width?\n. @SethBarberee What would the point be?\n. ",
    "podhorsky-ksj": "It's not in the script. When I try the minimal script, it behaves the same way:\n\n$ cat .config/i3/i3status.bash \n!/usr/bin/bash\nshell script to prepend i3status with more stuff\ni3status | while :\ndo\n read line\n echo \"$line\" || exit 1\ndone\n\nI think it's something about output_format.\nWhen I run this script in terminal, it prints correctly the rows\nIt also prints before it:\n\ni3status: trying to auto-detect output_format setting\ni3status: falling back to \"none\"\n. It's not in the script. When I try the minimal script, it behaves the same way:\n$ cat .config/i3/i3status.bash \n!/usr/bin/bash\nshell script to prepend i3status with more stuff\ni3status | while :\ndo\n read line\n echo \"$line\" || exit 1\ndone\n\nI think it's something about output_format.\nWhen I run this script in terminal, it prints correctly the rows\nIt also prints before it:\n\ni3status: trying to auto-detect output_format setting\ni3status: falling back to \"none\"\n. I just pull out the latest version of wlc and sway and build. Still the same behaviour.\n\nBut when I add to block general {} in i3status/config the\n\noutput_format = \"none\"\n\ni3status (without the external script):\n\nstatus_command i3status\n\nshows the same unprintable chars.\nSo, somehow the bar can't  show the output formated with:\n\noutput_format = \"none\".\n. I just pull out the latest version of wlc and sway and build. Still the same behaviour.\n\nBut when I add to block general {} in i3status/config the\n\noutput_format = \"none\"\n\ni3status (without the external script):\n\nstatus_command i3status\n\nshows the same unprintable chars.\nSo, somehow the bar can't  show the output formated with:\n\noutput_format = \"none\".\n. Ok here is the file:\nsway.txt\nHere is also script  how I run sway. \nMaybe some features are obsolete, I created it when I used orbment.\nsway-run.txt\nAnd yes, I rebooted before it.\n\nAlso, when I exited sway, to get log from i3status, some segfault was occured and then process sway-msg put CPU into heavy load.\nI have always enabled logging, so there is log from it. I'm not sure if it is connected with sway.\nsway-segfault.txt\n. Ok here is the file:\nsway.txt\nHere is also script  how I run sway. \nMaybe some features are obsolete, I created it when I used orbment.\nsway-run.txt\nAnd yes, I rebooted before it.\nAlso, when I exited sway, to get log from i3status, some segfault was occured and then process sway-msg put CPU into heavy load.\nI have always enabled logging, so there is log from it. I'm not sure if it is connected with sway.\nsway-segfault.txt\n. Ok, here it is:\ni3status.txt\n. Ok, here it is:\ni3status.txt\n. @mikkeloscar fix is ok, thanks.\nA what about the segfault. Is it connected with sway?\n. @mikkeloscar fix is ok, thanks.\nA what about the segfault. Is it connected with sway?\n. Ok thanks. I recompiled the binary, but if the issue will occur again, this script will help.\n. Ok thanks. I recompiled the binary, but if the issue will occur again, this script will help.\n. oh, now the file should be ok.\nI used helper script, which was recommended to me there https://github.com/SirCmpwn/sway/issues/473 the same way. And the result added to this ticket. And this script runs addr2line.\n. oh, now the file should be ok.\nI used helper script, which was recommended to me there https://github.com/SirCmpwn/sway/issues/473 the same way. And the result added to this ticket. And this script runs addr2line.\n. So, is there reason to reproduce issue with debug? But I used before orbment which uses wlc too and I didn't have such issue. But it is possible, in new mesa is some issue, it won't be first time.\n. So, is there reason to reproduce issue with debug? But I used before orbment which uses wlc too and I didn't have such issue. But it is possible, in new mesa is some issue, it won't be first time.\n. ok, I will try to reproduce with debug.\n. ok, I will try to reproduce with debug.\n. I set cmake to DCMAKE_BUILD_TYPE=Debug, so now it is:\n\ncmake . -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_INSTALL_PREFIX=/usr\n       make\n\nbut with new backtrace:\n\n[log.c:160] Backtrace: /usr/bin/sway(error_handler+0xb7) [0x423b17]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x33680) [0x7f361d70e680]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7f361d70e5f8]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(abort+0x16a) [0x7f361d70fa7a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x7205a) [0x7f361d74d05a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x779a6) [0x7f361d7529a6]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x7818e) [0x7f361d75318e]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(+0x12bbc) [0x7f361ea1fbbc]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(+0x145d2) [0x7f361ea215d2]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(udev_device_unref+0x1d) [0x7f361ea17c2d]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(+0xc9e0) [0x7f361dd899e0]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(libinput_device_unref+0x25) [0x7f361dd84d25]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(libinput_event_destroy+0x17) [0x7f361dd84d67]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(+0x14ad8) [0x7f361e610ad8]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) >[0x7f361dfa8242]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7f361dfa69a5]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(wlc_run+0xec) [0x7f361e62422c]\n[log.c:160] Backtrace: /usr/bin/sway(main+0x432) [0x4206d9]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7f361d6fb610]\n[log.c:160] Backtrace: /usr/bin/sway(_start+0x29) [0x406f59]\n\nI'm not able to get anything else:\n\n$ addr2line -e /usr/bin/sway 0x423b17\n??:?0x423b17\n\nIs there needed another parameter?\n. I set cmake to DCMAKE_BUILD_TYPE=Debug, so now it is:\n\ncmake . -DCMAKE_BUILD_TYPE=Debug -DCMAKE_INSTALL_SYSCONFDIR=/etc -DCMAKE_INSTALL_PREFIX=/usr\n       make\n\nbut with new backtrace:\n\n[log.c:160] Backtrace: /usr/bin/sway(error_handler+0xb7) [0x423b17]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x33680) [0x7f361d70e680]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7f361d70e5f8]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(abort+0x16a) [0x7f361d70fa7a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x7205a) [0x7f361d74d05a]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x779a6) [0x7f361d7529a6]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(+0x7818e) [0x7f361d75318e]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(+0x12bbc) [0x7f361ea1fbbc]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(+0x145d2) [0x7f361ea215d2]\n[log.c:160] Backtrace: /usr/lib/libudev.so.1(udev_device_unref+0x1d) [0x7f361ea17c2d]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(+0xc9e0) [0x7f361dd899e0]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(libinput_device_unref+0x25) [0x7f361dd84d25]\n[log.c:160] Backtrace: /usr/lib/libinput.so.10(libinput_event_destroy+0x17) [0x7f361dd84d67]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(+0x14ad8) [0x7f361e610ad8]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) >[0x7f361dfa8242]\n[log.c:160] Backtrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7f361dfa69a5]\n[log.c:160] Backtrace: /usr/lib/libwlc.so.0(wlc_run+0xec) [0x7f361e62422c]\n[log.c:160] Backtrace: /usr/bin/sway(main+0x432) [0x4206d9]\n[log.c:160] Backtrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7f361d6fb610]\n[log.c:160] Backtrace: /usr/bin/sway(_start+0x29) [0x406f59]\n\nI'm not able to get anything else:\n\n$ addr2line -e /usr/bin/sway 0x423b17\n??:?0x423b17\n\nIs there needed another parameter?\n. I tried all:\ncat sway.err | python addr2line_sway.py /usr/bin/sway\n\n[log.c:160] Backtrace: /usr/bin/sway(error_handler+0xb7) [0x423b17]\n??:?\n[log.c:160] Backtrace: /usr/bin/sway(main+0x432) [0x4206d9]\n??:?\n[log.c:160] Backtrace: /usr/bin/sway(_start+0x29) [0x406f59]\n??:?\n\nBtw. I had to change row in your script:\nbt = re.compile(\".*Backtrace: .*sway.*\\[(0x[a-f0-9]+)\\].*\")\notherwise it can't search anything.\n. I tried all:\ncat sway.err | python addr2line_sway.py /usr/bin/sway\n\n[log.c:160] Backtrace: /usr/bin/sway(error_handler+0xb7) [0x423b17]\n??:?\n[log.c:160] Backtrace: /usr/bin/sway(main+0x432) [0x4206d9]\n??:?\n[log.c:160] Backtrace: /usr/bin/sway(_start+0x29) [0x406f59]\n??:?\n\nBtw. I had to change row in your script:\nbt = re.compile(\".*Backtrace: .*sway.*\\[(0x[a-f0-9]+)\\].*\")\notherwise it can't search anything.\n. I modified archlinux (aur) package. In section package is only \"make install\" without anything.\n. I modified archlinux (aur) package. In section package is only \"make install\" without anything.\n. @nuew Thanks a lot.\nIt took me while to take the right crash, where was a main function of sway. Other crashes contains only error handler function, which probably have no use, and was caused by driver or xwayland. \nI translated the parts with sway:\nBacktrace: /usr/bin/sway(error_handler+0x2f) [0x41b25f]\nsway/common/log.c:151\nBacktrace: /usr/lib/libc.so.6(+0x33680) [0x7f03259d8680]\nBacktrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7f03259d85f8]\nBacktrace: /usr/lib/libc.so.6(abort+0x16a) [0x7f03259d9a7a]\nBacktrace: /usr/lib/libc.so.6(+0x7205a) [0x7f0325a1705a]\nBacktrace: /usr/lib/libc.so.6(+0x779a6) [0x7f0325a1c9a6]\nBacktrace: /usr/lib/libc.so.6(+0x7818e) [0x7f0325a1d18e]\nBacktrace: /usr/lib/libudev.so.1(+0x12bc5) [0x7f0326ce9bc5]\nBacktrace: /usr/lib/libudev.so.1(+0x145d2) [0x7f0326ceb5d2]\nBacktrace: /usr/lib/libudev.so.1(udev_device_unref+0x1d) [0x7f0326ce1c2d]\nBacktrace: /usr/lib/libudev.so.1(udev_device_unref+0x26) [0x7f0326ce1c36]\nBacktrace: /usr/lib/libinput.so.10(+0xc9e0) [0x7f03260539e0]\nBacktrace: /usr/lib/libinput.so.10(libinput_device_unref+0x25) [0x7f032604ed25]\nBacktrace: /usr/lib/libinput.so.10(libinput_event_destroy+0x17) [0x7f032604ed67]\nBacktrace: /usr/lib/libwlc.so.0(+0x14ad8) [0x7f03268daad8]\nBacktrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) [0x7f0326272242]\nBacktrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7f03262709a5]\nBacktrace: /usr/lib/libwlc.so.0(wlc_run+0xec) [0x7f03268ee22c]\nBacktrace: /usr/bin/sway(main+0x39c) [0x40716c]\nsway/main.c:214\nBacktrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7f03259c5610]\n. @nuew Thanks a lot.\nIt took me while to take the right crash, where was a main function of sway. Other crashes contains only error handler function, which probably have no use, and was caused by driver or xwayland. \nI translated the parts with sway:\nBacktrace: /usr/bin/sway(error_handler+0x2f) [0x41b25f]\nsway/common/log.c:151\nBacktrace: /usr/lib/libc.so.6(+0x33680) [0x7f03259d8680]\nBacktrace: /usr/lib/libc.so.6(gsignal+0x38) [0x7f03259d85f8]\nBacktrace: /usr/lib/libc.so.6(abort+0x16a) [0x7f03259d9a7a]\nBacktrace: /usr/lib/libc.so.6(+0x7205a) [0x7f0325a1705a]\nBacktrace: /usr/lib/libc.so.6(+0x779a6) [0x7f0325a1c9a6]\nBacktrace: /usr/lib/libc.so.6(+0x7818e) [0x7f0325a1d18e]\nBacktrace: /usr/lib/libudev.so.1(+0x12bc5) [0x7f0326ce9bc5]\nBacktrace: /usr/lib/libudev.so.1(+0x145d2) [0x7f0326ceb5d2]\nBacktrace: /usr/lib/libudev.so.1(udev_device_unref+0x1d) [0x7f0326ce1c2d]\nBacktrace: /usr/lib/libudev.so.1(udev_device_unref+0x26) [0x7f0326ce1c36]\nBacktrace: /usr/lib/libinput.so.10(+0xc9e0) [0x7f03260539e0]\nBacktrace: /usr/lib/libinput.so.10(libinput_device_unref+0x25) [0x7f032604ed25]\nBacktrace: /usr/lib/libinput.so.10(libinput_event_destroy+0x17) [0x7f032604ed67]\nBacktrace: /usr/lib/libwlc.so.0(+0x14ad8) [0x7f03268daad8]\nBacktrace: /usr/lib/libwayland-server.so.0(wl_event_loop_dispatch+0x72) [0x7f0326272242]\nBacktrace: /usr/lib/libwayland-server.so.0(wl_display_run+0x25) [0x7f03262709a5]\nBacktrace: /usr/lib/libwlc.so.0(wlc_run+0xec) [0x7f03268ee22c]\nBacktrace: /usr/bin/sway(main+0x39c) [0x40716c]\nsway/main.c:214\nBacktrace: /usr/lib/libc.so.6(__libc_start_main+0xf0) [0x7f03259c5610]\n. I tried to run sway through gdb, but whole pc got frozen just after sway was run through gdb.\n. I tried to run sway through gdb, but whole pc got frozen just after sway was run through gdb.\n. @mikkeloscar I think I got a segfault in gdb, but then the sway will freeze and I can't use any keyboard bindings. Do you think it can be replaced by set unlimited settings in ulimit to make core file and then load it into gdb?\n. @mikkeloscar I think I got a segfault in gdb, but then the sway will freeze and I can't use any keyboard bindings. Do you think it can be replaced by set unlimited settings in ulimit to make core file and then load it into gdb?\n. @sce Thanks for it, It works good, but I think is better use:\ngdb -batch -ex \"run -d\" -ex \"continue\" -ex \"generate-core-file\" ./bin/sway\nBecause then you get corefile, and you can then load it into gdb like:\ngdb ./bin/sway core.1234\nor exec file and core file give to someone else.\n. @sce Thanks for it, It works good, but I think is better use:\ngdb -batch -ex \"run -d\" -ex \"continue\" -ex \"generate-core-file\" ./bin/sway\nBecause then you get corefile, and you can then load it into gdb like:\ngdb ./bin/sway core.1234\nor exec file and core file give to someone else.\n. I also get one segfault in gdb:\n```\n0  update_focus (c=c@entry=0x627201 ) at /home/ksj/sway-git/src/sway/sway/focus.c:19\n1  0x0000000000413600 in set_focused_container (c=0xc3d450) at /home/ksj/sway-git/src/sway/sway/focus.c:122\n2  0x00007ffff7bb5767 in wlc_view_unmap (view=0xc6e868) at /home/ksj/wlc-git/src/wlc/src/compositor/view.c:67\n3  0x00007ffff7bb67d2 in wlc_view_release (view=0xc6e868) at /home/ksj/wlc-git/src/wlc/src/compositor/view.c:629\n4  0x00007ffff7bbc1c6 in handle_release (pool=pool@entry=0x7ffff7dda5e0 , handle=0x7843c0, preremove=preremove@entry=0x0)\nat /home/ksj/wlc-git/src/wlc/src/resources/resources.c:165\n\n5  0x00007ffff7bbc479 in wlc_handle_release (handle=) at /home/ksj/wlc-git/src/wlc/src/resources/resources.c:350\n6  0x00007ffff7bbc925 in wlc_handle_release (handle=) at /home/ksj/wlc-git/src/wlc/src/resources/resources.c:347\n7  0x00007ffff7bbe244 in wlc_surface_release (surface=0xc630e0) at /home/ksj/wlc-git/src/wlc/src/resources/types/surface.c:301\n8  0x00007ffff7bbc1c6 in handle_release (pool=0x7ffff7dda680 , handle=0xc553d0, preremove=0x7ffff7bbbf60 )\nat /home/ksj/wlc-git/src/wlc/src/resources/resources.c:165\n\n9  0x00007ffff754a5b4 in ?? () from /usr/lib/libwayland-server.so.0\n10 0x00007ffff754afd4 in wl_resource_destroy () from /usr/lib/libwayland-server.so.0\n11 0x00007ffff497c1f0 in ffi_call_unix64 () from /usr/lib/libffi.so.6\n12 0x00007ffff497bc58 in ffi_call () from /usr/lib/libffi.so.6\n13 0x00007ffff754efb8 in ?? () from /usr/lib/libwayland-server.so.0\n14 0x00007ffff754b4a6 in ?? () from /usr/lib/libwayland-server.so.0\n15 0x00007ffff754d242 in wl_event_loop_dispatch () from /usr/lib/libwayland-server.so.0\n16 0x00007ffff754b9a5 in wl_display_run () from /usr/lib/libwayland-server.so.0\n17 0x00007ffff7bc14ec in wlc_run () at /home/ksj/wlc-git/src/wlc/src/wlc.c:260\n18 0x00000000004071bc in main (argc=2, argv=0x7fffffffea08) at /home/ksj/sway-git/src/sway/sway/main.c:214\n```\nsway commit id is: 016a774\nI also have exec and core file. I'm attaching them here:\ncore.zip\nYou can use it as:\ngdb ./sway core.15654\nif needed.\n. I also get one segfault in gdb:\n```\n0  update_focus (c=c@entry=0x627201 ) at /home/ksj/sway-git/src/sway/sway/focus.c:19\n1  0x0000000000413600 in set_focused_container (c=0xc3d450) at /home/ksj/sway-git/src/sway/sway/focus.c:122\n2  0x00007ffff7bb5767 in wlc_view_unmap (view=0xc6e868) at /home/ksj/wlc-git/src/wlc/src/compositor/view.c:67\n3  0x00007ffff7bb67d2 in wlc_view_release (view=0xc6e868) at /home/ksj/wlc-git/src/wlc/src/compositor/view.c:629\n4  0x00007ffff7bbc1c6 in handle_release (pool=pool@entry=0x7ffff7dda5e0 , handle=0x7843c0, preremove=preremove@entry=0x0)\nat /home/ksj/wlc-git/src/wlc/src/resources/resources.c:165\n\n5  0x00007ffff7bbc479 in wlc_handle_release (handle=) at /home/ksj/wlc-git/src/wlc/src/resources/resources.c:350\n6  0x00007ffff7bbc925 in wlc_handle_release (handle=) at /home/ksj/wlc-git/src/wlc/src/resources/resources.c:347\n7  0x00007ffff7bbe244 in wlc_surface_release (surface=0xc630e0) at /home/ksj/wlc-git/src/wlc/src/resources/types/surface.c:301\n8  0x00007ffff7bbc1c6 in handle_release (pool=0x7ffff7dda680 , handle=0xc553d0, preremove=0x7ffff7bbbf60 )\nat /home/ksj/wlc-git/src/wlc/src/resources/resources.c:165\n\n9  0x00007ffff754a5b4 in ?? () from /usr/lib/libwayland-server.so.0\n10 0x00007ffff754afd4 in wl_resource_destroy () from /usr/lib/libwayland-server.so.0\n11 0x00007ffff497c1f0 in ffi_call_unix64 () from /usr/lib/libffi.so.6\n12 0x00007ffff497bc58 in ffi_call () from /usr/lib/libffi.so.6\n13 0x00007ffff754efb8 in ?? () from /usr/lib/libwayland-server.so.0\n14 0x00007ffff754b4a6 in ?? () from /usr/lib/libwayland-server.so.0\n15 0x00007ffff754d242 in wl_event_loop_dispatch () from /usr/lib/libwayland-server.so.0\n16 0x00007ffff754b9a5 in wl_display_run () from /usr/lib/libwayland-server.so.0\n17 0x00007ffff7bc14ec in wlc_run () at /home/ksj/wlc-git/src/wlc/src/wlc.c:260\n18 0x00000000004071bc in main (argc=2, argv=0x7fffffffea08) at /home/ksj/sway-git/src/sway/sway/main.c:214\n```\nsway commit id is: 016a774\nI also have exec and core file. I'm attaching them here:\ncore.zip\nYou can use it as:\ngdb ./sway core.15654\nif needed.\n. Now I'm only seeing crashes, dependent on Intel drivers, so it can't be corrected in sway or wlc. But no crashes with bt wlc or sway. So, I'm closing the ticket.\n. Now I'm only seeing crashes, dependent on Intel drivers, so it can't be corrected in sway or wlc. But no crashes with bt wlc or sway. So, I'm closing the ticket.\n. ",
    "ViktorNova": "I'm just chiming in with my 2 cents, but I really hope Sway is planning to support window buttons at some point in the future, and that whatever decision is made will allow for that feature down the road!! \nI know i3 does not do this and has no plans to do so, but it would be great if Sway did\n. Aww sad. \n. The reason this makes me sad is because right now there is no such thing as a tiling window manager that is touchscreen-friendly. However, i3 accidentally turned out to be damn near perfect for a touchscreen, but because of the main developers ideals, they 'will never add window decoration buttons'. \nI was hoping with Sway's broader goals and a different crew that I might be able to persuade you to at least consider this feature that, if implemented, could possible make Sway a major contender in the rapidly growing touchscreen market that is currently only served by window managers that are floating and/or fullscreen only.\nSadly I am not a coder, or I would absolutely fork it myself!\n. @SirCmpwn - That is EXCELLENT to hear, I will definitely keep my eye on the project! =)\n@mikkeloscar - This is unfortunately true only for GTK3 apps, which only accounts for a portion of Linux desktop software\n. ",
    "ledti": "Also worth noting is the hide_edge_borders feature, since its potential implementation might affect the consideration of how to implement window borders.\n\nAs for the discussion, I see titlebars and borders as two separate features:\nTitlebars are definitely needed for stacking/tabbed layouts.\nBorders are only necessary as an indicator of focus, but otherwise they're just a cosmetic feature.\n. ",
    "TheLQ": "I've also ran into this issue. These steps are always reproducible on my machine\n- Start sway in tty1\n- Open up firefox and play a youtube video, Video plays fine\n- Switch to tty2, then switch back to tty1\n- Firefox window is now black. Audio still plays and windows are movable\n- Put cursor in black firefox window. Graphics now freeze although audio still plays. SSH terminal shows XWayland and Swaybar spinning at 100%\n- Audio eventually stops, XWayland and Sway are still spinning. Can no longer switch to tty's and keyboard seems unresponsive (toggling numlock or sysreq (yes its enabled) don't do anything). Interestingly SSH still works and if I kill -9 XWayland, swaybar, then sway my tty returns. \n- log when run with -d doesn't show anything useful, last line is about giving focus to the firefox window\nSince it's not a hard crash, I'm not sure what information I can provide or how to provide it.\nSystem: Ubuntu 15.10\nLatest commit as of today of both sway and wlc, built with the above CMAKE_BUILD_TYPE\nHappens with either swaybar or i3status, although i3status doesn't spin\nGraphics: On-board graphics on Intel i5-3470S\n. Finally got orbment to build. I can make both sway and orbment cause XWayland to spin by just switching tty's. This causes UI and keyboard lockups until kill -9'd\nNot sure how helpful these are, but here's the logs before I killed them\nsway: https://gist.github.com/TheLQ/4fc701a564db88dd7b45\norbment: https://gist.github.com/TheLQ/dda2bd79845c562265b6\nNote I can't actually get orbment to do anything though. None of the hotkeys work, either when running in its own tty or under an existing i3 session. Not sure whats going on there\n. Just curious, could needing all that synchronization be related to XWayland spinning when doing normal youtube video watching in Firefox (no switching tty's but am going fullscreen and back)? Was going to make another ticket about that\n. It's been happening for a long time, I've only now made an issue for it. The top of the log says \n\nStarting sway version 378a45c (2016-03-18, branch \"master\")\n\nwhich is that merge commit\n. The problem is on Ubuntu 15.10 using the default i3-dmenu-desktop I cannot open firefox, gedit,  libreoffice, or any app that takes an optional parameter. The only way I've been able to run most apps is by opening a terminal and running the command from there which is very frustrating\nSway's handling of exec is incompatible with i3 and scripts that run i3-msg 'exec \"someCommand $optionalArgs\"'. It handles arguments completely differently as the above example with an argument like -v will try to run a binary called someCommand -v as you see below with libreoffice writer. \nWhile I agree the usage of quoting is questionable, the fact that i3's exec command, i3-dmenu-desktop (and maybe other launchers), and peoples configs, scripts, and apps assume that i3-msg 'exec \"firefox http://google.com\"'' means run a binary called firefox with the argument http://google.com and not a binary called firefox http://google.com should mean that sway does the same to remain compatible.\nHere's the logs of trying to run those apps. I tested all of the commands with the same quoting under i3 and they worked fine\n```\nEvent on IPC listening socket\nHandling command 'exec  \"libreoffice --writer \"'\nfind_handler(exec) 0\nExecuting \"libreoffice --writer \"\nChild process created with pid 29722\n{ \"success\": true }\nIPC Client -1 disconnected\n/bin/sh: 1: libreoffice --writer : not found\nEvent on IPC listening socket\nHandling command 'exec  \"gedit \"'\nfind_handler(exec) 0\nExecuting \"gedit \"\nChild process created with pid 29892\nIPC Client -1 disconnected\n{ \"success\": true }\n/bin/sh: 1: gedit : not found\nEvent on IPC listening socket\nHandling command 'exec  \"steam steam://rungameid/49520\"'\nfind_handler(exec) 0\nExecuting \"steam steam://rungameid/49520\"\nChild process created with pid 29906\n{ \"success\": true }\nIPC Client -1 disconnected\n/bin/sh: 1: steam steam://rungameid/49520: not found\nEvent on IPC listening socket\nHandling command 'exec  \"shotwell \"'\nfind_handler(exec) 0\nExecuting \"shotwell \"\nChild process created with pid 29915\n{ \"success\": true }\nIPC Client -1 disconnected\n/bin/sh: 1: shotwell : not found\n```\n. ",
    "z3ntu": "So they don't support wayland? Anyway, thanks for the info!\n. Thanks again for the clarification!\n. Newest driver supports wayland! https://www.reddit.com/r/linux/comments/4bcm9w/nvidia_releases_display_driver_36412_with_wayland/\n. I am also waiting for an Arch Linux update (will use testing, if available earlier). I am also running Kernel 4.5 from testing for a while and experienced no issues.\n. https://github.com/Cloudef/wlc/issues/138\nThat's why it doesn't / won't work right now...\nEDIT: Oh sorry, you apparently already know.\n. ",
    "lindhe": "Is there any plans on implementing EGLStream to get it to work with the proprietary Nvidia driver?\nhttp://www.phoronix.com/scan.php?page=news_item&px=GNOME-Mutter-Mainline-EGLStream. I'll put it in my \"Whenever I get time for it\"-list.. I believe I have failed to do so. I'll check it out and get back.. Indeed, it is well documented. :)\nI looked through all issues as suggested, and found this. And, after checking the logs, indeed sway seemed to look for card0 without finding it. It didn't even register for me that I neglected to mention my secondary card, because it's not even plugged into a monitor. Sorry for that.\nCool. Case closed. Sway don't deal with multi GPU systems (unless one is lucky enough to have the correct card as card0).. Ah, I see. Thank you for the advice, but it's easier for me to just leave the second card out since I didn't use it anyway.. ",
    "jramapuram": "Problem is can't do much on nouveau. My main reason is to run CUDA apps like tensorflow, etc. :'( . ",
    "vially": "wlc just added support for the proprietary NVIDIA driver.\n@SirCmpwn would you accept a PR which removes the warning about the proprietary NVIDIA driver?. I've tried sway with the latest git version of wlc and it seemed to work. But it definitely requires testing from more users.. Will this support EGL streams/proprietary nVidia drivers? You said that's unlikely but does that mean it's unlikely to have it in the beginning or ever?. ",
    "AsuMagic": "Tried it out with aur/wlc-git, and it does work. For some reason, most apps I've been running made sway run quite awful slow and use a lot of CPU. Could be xwayland related, I haven't tried it out extensively. But it works, without obvious glitches.. ",
    "telmotrooper": "Sorry to revive this topic, but as someone finding out about Sway just now I'd like to ask how is the support for the NVIDIA proprietary driver as of now (december/2018)?. @emersion Thanks for the reply!. ",
    "tokyovigilante": "I appreciate this is a political issue more than a technical one, and have read the arguments for and against supporting EGLStreams. Regrettably I have a GTX 1080 Ti in my workstation (using the Nouveau driver) and there are some instability issues I haven't had a chance to debug, so I would like to see support for the proprietary driver from a pragmatic POV, and I'd also like to work on a Vulkan-based project which Nouveau doesn't support. \nHowever I can acknowledge unless people vote with their code (and wallets) this situation won't change (and has been discussed at length previously).\nOrthogonally, is this likely be made moot if/when a Vulkan backend is completed for Sway/wlroots? Does the WSI interface provide an alternate buffer path or is it still incomplete without GBM or EGLStreams? I'd rather wait for Intel's Xe than replace a powerful NVIDIA card with a slower AMD one TBH, and from a political point of view it seems Intel's support for open source is far better than AMD's or NVIDIA's.\n[EDIT] Hmm, seems like GBM is still required. OK, forget NVIDIA ;). Thanks for the comments, I find as a layman developer it's very hard to get a handle on the whole stack. \n\nWhile Intel's driver is still the most high-quality, AMD's open-source driver has improved significantly over the last several years (since amdgpu). Basically, their open-source driver is great now, and is perfectly usable.\n\nGood to know. I haven't actually had an AMD card in years but maybe it's time for another go. Hopefully CES has some good news.... I did think about just writing a script, but a script is probably not very generalisable to other hardware. This way you can respond to any event or have any key or other input change rotation with a one-liner. \nI'd agree with @emersion that this isn't particularly complex as an addition and mostly uses existing wlroots functions, however my patch as it is currently does add another var to the output_config struct, which may not be desirable. I can't see any other way round that though, as we do need to signal through another parameter from the command line (i.e. relative vs absolute and which direction to rotate).. Thanks, I'll fix the bugs, move all the code into config/transform.c and add documentation.. Do I need to worry about wildcards?. In theory the way the patch now would work for a wildcard, as the offsets are applied to each window and calculated on update, but I don't think its a realistic scenario for people to want to rotate all their desktops by the same offset, so I'll make the modifications you've suggested.. From a code change point of view this should be feature complete. \nI've noticed one bug involving spurious output from swaymsg if an invalid transform command is passed, which may be due to my handling of the argv/argc offsets but not entirely sure how to fix. Handled multiple commands and wildcards however. \nWill update the man page once everyone's happy.. Sure if you're happy with the code and using clockwise/anticlockwise as verbs.. Man page updated.. Thank you! Much appreciated.. I often get a flash of the previous (unlocked) screen content before seeing the lock screen when I wake my laptop from sleep too. Standard Fedora 29/systemd and the config above.. Also seeing this odd behaviour, particularly annoying as I have both newline-on-save and save-on-focus-lost enabled causing the cursor to jump around.. This seems to be fixed with ST3 dev version 3184. I spoke to their devs about some other Wayland issues (scroll etc) that are now fixed too.. Are you also running up-to-date wlroots/sway? I re-enabled save-on-focus-lost a few days ago and have had no particular issues.. Sorry I've just seen #3081 yeah, that does fix 99% of what I'd like, but focus doesn't change until I move the mouse in the window the mouse is over. I'd rather it updated after the fullscreen switch, as I still need to go from keyboard -> mouse -> keyboard.. In fact probably 100% related to #3118, I'll test that one. Thanks!. I'm hoping to work on this once I finish implementing switch events.. Whoops! Forgot we\u2019d need at least those enum cases straight away.\n\nOn 17 Dec 2018, at 1:04 am, emersion notifications@github.com wrote:\nThanks!\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. Related but might have to wait for touch gestures, a double click in the window or another gesture to switch a window to full-screen would be great for tablets etc, but I'm not sure if this could be reliably intercepted. I know mpv does this, but that's presumably specific to that app. \n\nThe other issue with using title bars is that a number of apps can be either configured to or by default don't have title bars.. Also I might need to wait for #3341 et al to land.. Not currently but I see the input updates I was waiting on have merged so will have another go at this over the weekend.. I'm not quite sure how to proceed now, I'd expect events should be coming from wlroots, but not sure how/where to handle them in sway. Do I need an <input/switch.c> object to track the switch devices in sway? The existing keyboard/cursor handling seems a bit overkill for the switches which are a much simpler set of devices and states.\nI obviously need something like \nc\n    wl_signal_add(&wlr_device->keyboard->events.key, &keyboard->keyboard_key);\n    keyboard->keyboard_key.notify = handle_keyboard_key;\nFor the event handling somewhere, maybe I should just create a separate switch object.. Heh ok, and add to sway_seat?. This is a first cut of adding a sway_switch device to sway_seat_device. It seems to me that seat_configure_devices() is only called if a config for that device exists, so the switch listener won't be set up otherwise. Makes sense but I'll obviously have to implement a config handler for the switches before anything will work. I thought I'd put this out for heckling in the meantime.. OK, have got events up and running in basic form and ready for feedback/review.\nI've decided to go with bindswitch as a new command rather than further overloading bindsym as it was getty pretty unwieldy to do so. \nI've also created a new binding struct sway_switch_binding which seems a bit cleaner, although I then need a dummy sway_binding to pass to seat_execute_command, which is suboptimal, however I note there is also an (unused) sway_mouse_binding in config.h so I feel like I'm in good company. \nPlease let me know what you think.. Updated set of changes, I've added flags to support --locked et al and added support for --locked specifically. Documentation also updated.. And now with a few extra fixes.. Should be GTG. Thanks for your help!. We did talk about using +/- for relative transforms in rather than the clockwise/anticlockwise in IRC before the original pull request (#3046), it doesn\u2019t bother me too much if it changes.\nI\u2019m not sure accepting anything other than 90/180/270 or >360 degree relative transforms is a bad idea per se, but I don\u2019t know what scenario you would have a valid transform >270, and I always like to have a defined set of inputs rather than having to parse a large set.. I'm not impartial obviously, but clockwise/anticlockwise are unambiguous in terms of the rotation direction, whereas +/- and left/right are ambiguous when referring to a 2D vertical plane. I'd be in favour of only allowing them from the command line and logging or swaynaging an error if they're included in the config. \nMy original use case was rotating by 90 degrees when I hit my screen rotation button on my X230T.. I'm all for simplifying, but am not sure how then you'd signal that the transform should be relative rather than absolute.. Sure, but are you proposing doing that in output/transform.c?. ok, is oc->name set at that point? I assume I'd have to pull in tree/output and parse as apply_output_config does?. Sounds good, thanks.. Oh right, will tidy the detection up.. Fixed.. Changed.. Fixed. I wonder if the second sway_assert could be removed if the wl_output is guaranteed to be non-NULL.. Fixed.. Have altered to check specifically for clockwise/anticlockwise. I don't mind what these are called (left and right could be used, but using clockwise/anticlockwise seems to have the right amount of brevity and obviousness to me.. Fixed.. Fixed.. Fixed, I think... Should all be tabs.. Ok, removed.. Oh right, sorry.. Thanks for the feedback! Yeahlid_switch avoids the switch keyword, but switch_device is a good alternative. \nRegarding per-device, libinput only ever supports one lid switch and one tablet mode switch per device, and it's hard to imagine a device which would require more than one, which is why I've decided not to match device identifiers in this PR. However there's always new hardware, so will keep an eye on libinput.. Noted, most of the commented out sections are just because I wasn't sure if I needed them or not, and because I took a lot of this code from keyboard.c.. Does --no-warn make sense here? I guess in theory it can be overridden so happy to implement it.. Noted.. Good catch, thanks. . Noted.. Noted.. Noted.. Also noted.. s/lid_switch/switch device also done for wlroots in https://github.com/swaywm/wlroots/pull/1624. Fixed.. I had to think about that one for a bit... but you're absolutely right.. Fair, but it may be non-obvious what the switches refer to otherwise. I guess I did mention ...laptop lid and tablet mode switches.... That explains that mysterious crash on config reload... What happens when you're rushing before the kids are up from their naps.. ",
    "karansapolia": "\nTell that to nvidia.\n\nI am very pumped about wayland and sway. However so right this standpoint may be, about not supporting nvidia (due to technical reasons too, as have been mentioned), my ROG laptop has no card switching and has the nvidia card clamped to the display for vsync. In short, i am stuck (out of the sway experience). I want to use sway by any means, as my kind of permanent replacement for i3, and my hardware doesn't let me use nouveau (ROG support for recent nouveaus is so bad, distros recommend using nvidia instead in nouveau bug reports!). Can't just buy another laptop. Translates to i can't use sway :cry: . ",
    "Timidger": "@progandy I found that if you simple push down on the touchpad without moving at all, it will still slowly move upward, so I don't think that mouse acceleration being the issue (because I'm not moving in any direction faster, since I'm keeping still)\n. Seems annoying to have to define a whole protocol for this...but it is the most compositor agnostic option :\\\nUnless there was some other layer above libinput that's implemented that can implement this and all the compositors start using that. Though that seems mostly unnecessary and even less likely than all the compositors using the same protocol.. Not sure how much help this is, but running Firefox 50.1.0 on my Arch machine, with wlc v0.0.7 does not break on either Sway or Way Cooler. Given it happens with other X apps, probably an XWayland / other non-wlc environment issue.. Hmmmm I'm not sure. Potentially Sway is doing something extra with X apps, or setting some flags firefox doesn't like but only @SirCmpwn can say for sure. The logs don't say much unfortunately.. I had noticed this as well, I wonder if it has to do with this line in the border code. It seems that every time the border needs to be rerendered (which is quite often) the buffer is reallocated.. Ah, ok. Looking at the fire graph again it looks like the majority of the memcpy's are happening deep in the wlc_pixels_write call stack, would it be an issue in wlc? I noticed that when attempting to draw things with one of the pre/post render hooks with Way Cooler it seemed to consume a lot of resources, even when I was not reallocating the buffers.\nIs there a way to get the post/pre rendering cost down or is it just one of the tradeoffs to using a library that controls the rendering so heavily @cloudef?. Is it not using GLES2 directly? It's calling some kind of opengl functions here. . Ah, ok gotcha. I think having it out of tree would make the most sense -- it would allow others to easily bind with it better, and it will be easier to separate the concerns of the two layers if they live in separate projects. This also means issues with Sway won't get mixed in with issues about the compositor library.\nAlso--Way Cooler hasn't decided to go in another direction. Fireplace has decided to work on their own compositor framework Smithay. I'd still like to work with you on a non-Rust compositor library, as I think it will be easier to support in the future (there are more people who know C, there will more than likely be more compositors using it, I expect most of the contributors to wlc to contribute to this project, etc.). If it turns out to be better for my needs I might switch to Smithay in the future but for now I want to try to work on a more general solution.. Yes it's relatively new, despite the high version number. It's similar to orbment in that it's modular, but with Rust instead of C. Since users are expected to edit Rust, they benefit more from having a more ergonomic compositor library.. >but I have never written a single line of C\nNow's the time to learn! It's not a hard language. At worst, if you don't think it's good enough for a PR (even though it probably is) you can change it for yourself.. Way Cooler should have same issue as sway, we aren't doing anything fancy and both use wlc obviously.\nCan this be reproduced in wlroots? . Sounds like an upstream bug then, has it been reported yet?\nIf you can reproduce in Weston then that would certainly mean we aren't doing anything wrong ( @nharward-hd said it worked with Weston, though he also said it worked with Way Cooler... @veox is the issue reproducible in Weston?) . Hm, we had a similar problem in Way Cooler which was fixed with this patch. The gist was that we weren't cleaning up the reference to the WlcView in the layout tree code properly, causing a crash when trying to use a free-d WlcView. Most display managers allow you to edit how a window manager is spawned. It's quite easy to change the relevant line to\nexport XKB_DEFAULT_LAYOUT=dvorak; sway\nE.g, that's what I did for Way Cooler before I went DE-less.\nAnother alternative is to simply put it in your .bashrc, which is what I have opted to do.\nRight now the way wlc is set up this is difficult to change, but might be easier in the future with wlroots.. This has been discussed before, and currently is not possible. It might become an option once sway migrates to wlroot.. Does disabling \"focus on mouse over\" fix your issue?. I've also noticed this issue on Way Cooler (I also use a nonstandard keyboard setup). So either Sway and I are both doing something very wrong, or it's most likely a wlc issue.. I've been seeing similar issues on Way Cooler, but only on one of my machines. It's definitely not wlc related, as I have another machine that doesn't experience the issue. It's almost certainly some dependency issue, coupled potentially with a bad driver or something. Using standard Linux kernel myself, so libdrm might be a good thing to try next.. @SirCmpwn Haven't tested, I'll try running Weston tonight and see if I can reproduce it.. After some testing on weston, I can't reproduce it (it only appears sometimes though, so maybe it just hasn't happened yet).\nI'll test on wlroots later, maybe if we are lucky this is just a weird wlc edge case that didn't make it to wlroots. . While I admit to not knowing the sway / i3 api off the top of my head, wouldn't it be better for this to be doable using a user script? Check for user input / event input and if it hadn't happened in n seconds lock the screen. . Dup of #1344? Will probably be fixed in wlroots anyways . @moonheart08 Try using &> to capture all output (from both stderr and stdout). AFAIK Sway outputs to stderr (so 2> will work too). @Gomme-\nThese instructions should work for arch:\n1) run sway, make it crash\n2) run coredumpctl gdb (make sure you have gdb installed)\n3) type backtrace into the prompt, past output in this issue tracker . That doesn't help much. It doesn't have any debug symbols for one (unsurprising) but also because even if a client crashes Sway should handle it gracefully. If you can figure out why Sway crashes (and get a coredump of that, with debug symbols, if it is actually segfaulting) it would make it easier to debug.. This sounds like that scaling issue on wlc that affects Way Cooler as well and will be fixed with the move to wlroots.. I can confirm this also happens in rootson with the same applications that affect it in Sway and Way Cooler.\nThis looks like a bug that might have been accidentally copied over from wlc to wlroots.\nI noticed this only happens for xwayland apps, so the bug is probably in there. I'm going to try to dig around to find the cause, but someone more knowledgeable than me will probably find it first.. Update: did a bisect and found the commit that introduced this regression (because it wasn't always like this): bf1f461eba320cdeded1d5d8ae80caaa9d4cef98 (for wlroots).\nShould probably move this over to the wlroots issue tracker.. Not sure if this is useful in regards to multiple seats, but the way Way Cooler handles it is we keep an \"active\" number that's stored on each edge in the tree (see here). \nThis also allows us to delete a container and it will refocus the last one that was focused within that group by finding the next container with the lowest number in that container (something which i3 handles but Sway currently doesn't AFAIK).. Constant value before the variable in the comparison.\n E.g: \"0 equals mark's length\" instead of \"mark's length equals 0\". ",
    "addisonamiri": "Thanks. I didn't realize normal borders weren't implemented yet. I'll take\na look at this.\nOn Sat, Mar 5, 2016 at 10:15 PM Drew DeVault notifications@github.com\nwrote:\n\nCheck out the window-borders branch.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/506#issuecomment-192788693.\n. \n",
    "raycewest": "It still is for me.  I can upload config later if wanted.\nOn Wed, Mar 16, 2016 at 9:22 AM, Drew DeVault notifications@github.com\nwrote:\n\n@onny https://github.com/onny can you confirm if this is still an issue\nfor you?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/509#issuecomment-197352504\n. @mikkeloscar Indeed, twice out of the ten or so times I just restarted it to see, it rendered properly from the get-go.  The other times were nothing until I moved the mouse.\n. \n",
    "her001": "@SirCmpwn If someone were to submit a pull request that implemented support for powerline, do you think it would be appropriate to add that feature to swaybar?\n. I am not 100% sure as I have not gone through the code, https://github.com/s-ol/i3bgbar is the old fork of i3bar that supports it.\nThis issue https://github.com/powerline/powerline/issues/145#issuecomment-30094902 on the Powerline github has some details on how it was implemented. Looks like it was mostly adding a key to the json input for background-color and making sure it actually changed the background color for that text.\nOn Thu, Mar 17, 2016 at 10:24 PM, Drew DeVault notifications@github.com\nwrote:\n\nIt depends on what's necessary to support it. What would have to change?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/511#issuecomment-198184575\n\n\nAndrew Conrad\naconrad103@gmail.com\n. Oh, wow... I never saw that issue. It does look like it should work, if\nPowerline was modified. Thank you for pointing me in the right direction.\nOn Thu, Mar 17, 2016 at 10:35 PM, Drew DeVault notifications@github.com\nwrote:\n\nThat sounds like it's supported by i3-gaps and falls under the scope of\n307 https://github.com/SirCmpwn/sway/issues/307\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/511#issuecomment-198186074\n\n\nAndrew Conrad\naconrad103@gmail.com\n. May I ask what other properties besides \"focused\" are considered extraneous?. ",
    "kamiyaa": "It is mostly just the default config file.\nI think i only changed the quit and the kill window shortcuts:\n```\nDefault config for sway\n\nCopy this to ~/.config/sway/config and edit it to your liking.\n\nRead man 5 sway for a complete reference.\n\nSway is a work in progress. Some of these defaults are currently unimplemented.\nVariables\n\nLogo key. Use Mod1 for Alt.\nset $mod Mod4\nYour preferred terminal emulator\nset $term urxvt\nYour preferred application launcher\nset $menu dmenu_run\nOutput configuration\n\nDefault wallpaper - CC-BY-NC from Netzlemming http://netzlemming.deviantart.com/art/Field-of-Barley-05240017-307176737\noutput * bg /home/shana/wallpapers/Anime_Scenery_002-1.jpg fill\n\nExample output configuration:\n\noutput HDMI-A-1 resolution 1920x1080 position 1920,0\nKey bindings\n\nBasics:\n\n# start a terminal\nbindsym $mod+Return exec $term\n\n# kill focused window\nbindsym $mod+Shift+c kill\n\n# start your launcher\nbindsym $mod+d exec $menu\n\n# Drag floating windows by holding down $mod and left mouse button.\n# Resize them with right mouse button + $mod.\n# Despite the name, also works for non-floating windows.\n# Change normal to inverse to use left mouse button for resizing and right\n# mouse button for dragging.\nfloating_modifier $mod normal\n\n# reload the configuration file\nbindsym $mod+Shift+c reload\n\n# restart sway inplace (preserves your layout/session, can be used to upgrade sway)\nbindsym $mod+Shift+r restart\n\n# exit sway (logs you out of your wayland session)\nbindsym $mod+Shift+q exit\n\n\nMoving around:\n\n# Move your focus around with $mod+[h|j|k|l], like vim\nbindsym $mod+h focus left\nbindsym $mod+j focus down\nbindsym $mod+k focus up\nbindsym $mod+l focus right\n# or use $mod+[up|down|left|right]\nbindsym $mod+Left focus left\nbindsym $mod+Down focus down\nbindsym $mod+Up focus up\nbindsym $mod+Right focus right\n\n# _move_ the focused window with the same, but add Shift\nbindsym $mod+Shift+h move left\nbindsym $mod+Shift+j move down\nbindsym $mod+Shift+k move up\nbindsym $mod+Shift+l move right\n# ditto, with arrow keys\nbindsym $mod+Shift+Left move left\nbindsym $mod+Shift+Down move down\nbindsym $mod+Shift+Up move up\nbindsym $mod+Shift+Right move right\n\n\nWorkspaces:\n\n# switch to workspace\nbindsym $mod+1 workspace 1\nbindsym $mod+2 workspace 2\nbindsym $mod+3 workspace 3\nbindsym $mod+4 workspace 4\nbindsym $mod+5 workspace 5\nbindsym $mod+6 workspace 6\nbindsym $mod+7 workspace 7\nbindsym $mod+8 workspace 8\nbindsym $mod+9 workspace 9\nbindsym $mod+0 workspace 10\n# move focused container to workspace\nbindsym $mod+Shift+1 move container to workspace 1\nbindsym $mod+Shift+2 move container to workspace 2\nbindsym $mod+Shift+3 move container to workspace 3\nbindsym $mod+Shift+4 move container to workspace 4\nbindsym $mod+Shift+5 move container to workspace 5\nbindsym $mod+Shift+6 move container to workspace 6\nbindsym $mod+Shift+7 move container to workspace 7\nbindsym $mod+Shift+8 move container to workspace 8\nbindsym $mod+Shift+9 move container to workspace 9\nbindsym $mod+Shift+0 move container to workspace 10\n\n\nLayout stuff:\n\n# You can \"split\" the current object of your focus with\n# $mod+s or $mod+v, for horizontal and vertical splits\n# respectively.\nbindsym $mod+s splith\nbindsym $mod+v splitv\n\n# Switch the current container between different layout styles\nbindsym $mod+s layout stacking\nbindsym $mod+w layout tabbed\nbindsym $mod+e layout toggle split\n\n# Make the current focus fullscreen\nbindsym $mod+f fullscreen\n\n# Toggle the current focus between tiling and floating mode\nbindsym $mod+Shift+space floating toggle\n\n# Swap focus between the tiling area and the floating area\nbindsym $mod+space focus mode_toggle\n\n# move focus to the parent container\nbindsym $mod+a focus parent\n\n\nScratchpad:\n\n# Sway has a \"scratchpad\", which is a bag of holding for windows.\n# You can send windows there and get them back later.\n\n# Move the currently focused window to the scratchpad\nbindsym $mod+Shift+minus move scratchpad\n\n# Show the next scratchpad window or hide the focused scratchpad window.\n# If there are multiple scratchpad windows, this command cycles through them.\nbindsym $mod+minus scratchpad show\n\n\nStatus Bar:\n\nbar {\n        position top\n        colors {\n            statusline #ffffff\n            background #323232\n            inactive_workspace #32323200 #32323200 #5c5c5c\n        }\n}\n.\n[wlc] Doing work on SUID/SGID side and dropping permissions\n[wlc] Running on vt 3 (fd 3)\n[wlc] Work done, dropping permissions and checking communication\n[wlc] Failed to open X11 display\nStarting sway version 89ef36a (2016-03-16, branch \"branch-master\")\nSet XDG_CONFIG_HOME to /home/shana/.config\nLoading config from /home/shana/.config/sway/config\nhandling config command 'set $mod Mod4'\nfind_handler(set) 0\nhandling config command 'set $term urxvt'\nfind_handler(set) 0\nhandling config command 'set $menu dmenu_run'\nfind_handler(set) 0\nhandling config command 'output * bg /home/shana/wallpapers/Anime_Scenery_002-1.jpg fill'\nfind_handler(output) 0\nConfig stored for output * (enabled:-1) (-1 x -1 @ -1, -1) (bg /home/shana/wallpapers/Anime_Scenery_002-1.jpg fill)\nhandling config command 'bindsym $mod+Return exec $term'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Return to command exec urxvt\nhandling config command 'bindsym $mod+Shift+c kill'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+c to command kill\nhandling config command 'bindsym $mod+d exec $menu'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+d to command exec dmenu_run\nhandling config command 'floating_modifier $mod normal'\nfind_handler(floating_modifier) 0\nhandling config command 'bindsym $mod+Shift+e reload'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+e to command reload\nhandling config command 'bindsym $mod+Shift+r restart'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+r to command restart\nhandling config command 'bindsym $mod+Shift+q exit'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+q to command exit\nhandling config command 'bindsym $mod+h focus left'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+h to command focus left\nhandling config command 'bindsym $mod+j focus down'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+j to command focus down\nhandling config command 'bindsym $mod+k focus up'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+k to command focus up\nhandling config command 'bindsym $mod+l focus right'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+l to command focus right\nhandling config command 'bindsym $mod+Left focus left'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Left to command focus left\nhandling config command 'bindsym $mod+Down focus down'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Down to command focus down\nhandling config command 'bindsym $mod+Up focus up'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Up to command focus up\nhandling config command 'bindsym $mod+Right focus right'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Right to command focus right\nhandling config command 'bindsym $mod+Shift+h move left'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+h to command move left\nhandling config command 'bindsym $mod+Shift+j move down'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+j to command move down\nhandling config command 'bindsym $mod+Shift+k move up'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+k to command move up\nhandling config command 'bindsym $mod+Shift+l move right'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+l to command move right\nhandling config command 'bindsym $mod+Shift+Left move left'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+Left to command move left\nhandling config command 'bindsym $mod+Shift+Down move down'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+Down to command move down\nhandling config command 'bindsym $mod+Shift+Up move up'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+Up to command move up\nhandling config command 'bindsym $mod+Shift+Right move right'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+Right to command move right\nhandling config command 'bindsym $mod+1 workspace 1'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+1 to command workspace 1\nhandling config command 'bindsym $mod+2 workspace 2'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+2 to command workspace 2\nhandling config command 'bindsym $mod+3 workspace 3'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+3 to command workspace 3\nhandling config command 'bindsym $mod+4 workspace 4'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+4 to command workspace 4\nhandling config command 'bindsym $mod+5 workspace 5'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+5 to command workspace 5\nhandling config command 'bindsym $mod+6 workspace 6'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+6 to command workspace 6\nhandling config command 'bindsym $mod+7 workspace 7'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+7 to command workspace 7\nhandling config command 'bindsym $mod+8 workspace 8'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+8 to command workspace 8\nhandling config command 'bindsym $mod+9 workspace 9'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+9 to command workspace 9\nhandling config command 'bindsym $mod+0 workspace 10'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+0 to command workspace 10\nhandling config command 'bindsym $mod+Shift+1 move container to workspace 1'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+1 to command move container to workspace 1\nhandling config command 'bindsym $mod+Shift+2 move container to workspace 2'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+2 to command move container to workspace 2\nhandling config command 'bindsym $mod+Shift+3 move container to workspace 3'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+3 to command move container to workspace 3\nhandling config command 'bindsym $mod+Shift+4 move container to workspace 4'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+4 to command move container to workspace 4\nhandling config command 'bindsym $mod+Shift+5 move container to workspace 5'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+5 to command move container to workspace 5\nhandling config command 'bindsym $mod+Shift+6 move container to workspace 6'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+6 to command move container to workspace 6\nhandling config command 'bindsym $mod+Shift+7 move container to workspace 7'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+7 to command move container to workspace 7\nhandling config command 'bindsym $mod+Shift+8 move container to workspace 8'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+8 to command move container to workspace 8\nhandling config command 'bindsym $mod+Shift+9 move container to workspace 9'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+9 to command move container to workspace 9\nhandling config command 'bindsym $mod+Shift+0 move container to workspace 10'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+0 to command move container to workspace 10\nhandling config command 'bindsym $mod+s splith'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+s to command splith\nhandling config command 'bindsym $mod+v splitv'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+v to command splitv\nhandling config command 'bindsym $mod+s layout stacking'\nfind_handler(bindsym) 0\nbindsym - 'Mod4+s' already exists, overwriting\nbindsym - Bound Mod4+s to command layout stacking\nhandling config command 'bindsym $mod+w layout tabbed'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+w to command layout tabbed\nhandling config command 'bindsym $mod+e layout toggle split'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+e to command layout toggle split\nhandling config command 'bindsym $mod+f fullscreen'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+f to command fullscreen\nhandling config command 'bindsym $mod+Shift+space floating toggle'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+space to command floating toggle\nhandling config command 'bindsym $mod+space focus mode_toggle'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+space to command focus mode_toggle\nhandling config command 'bindsym $mod+a focus parent'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+a to command focus parent\nhandling config command 'bindsym $mod+Shift+minus move scratchpad'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+Shift+minus to command move scratchpad\nhandling config command 'bindsym $mod+minus scratchpad show'\nfind_handler(bindsym) 0\nbindsym - Bound Mod4+minus to command scratchpad show\nhandling config command 'bar {'\nfind_handler(bar) 0\nConfiguring bar bar-0\nhandling config command 'position top'\nfind_handler(position) 0\nSetting bar position 'top' for bar: bar-0\nhandling config command 'colors {'\nfind_handler(colors) 0\nhandling config command 'statusline #ffffff'\nfind_handler(statusline) 0\nSetting statusline color #ffffffff for bar: bar-0\nhandling config command 'background #323232'\nfind_handler(background) 0\nSetting background color #323232ff for bar: bar-0\nhandling config command 'inactive_workspace #32323200 #32323200 #5c5c5c'\nfind_handler(inactive_workspace) 0\nSetting inactive_workspace_border color #32323200 for bar: bar-0\nSetting inactive_workspace_bg color #32323200 for bar: bar-0\nSetting inactive_workspace_text color #5c5c5cff for bar: bar-0\nhandling config command '}'\nEnd of bar colors block\nhandling config command '}'\nEnd of bar block\n[wlc] libinput: resume\n[wlc] Activating tty\n[wlc] MODE: (0) 1920x1080 *\n[wlc] Connector 1 is not connected or has no modes\n[wlc] Connector 2 is not connected or has no modes\n[wlc] Connector 3 is not connected or has no modes\n[wlc] Connector 4 is not connected or has no modes\n[wlc] eDP-1 Chose mode (0) 1920x1080\nOutput 1 resolution changed to 1920 x 1080\n[wlc] EGL context is double buffered\n[wlc] EGL version: 1.4 (DRI2)\n[wlc] EGL vendor: Mesa Project\n[wlc] EGL client APIs: OpenGL OpenGL_ES OpenGL_ES2 OpenGL_ES3 \n[wlc] EGL context (RGB888)\n[wlc] GL version: OpenGL ES 3.0 Mesa 11.0.6\n[wlc] GL vendor: Intel Open Source Technology Center\n[wlc] GLES2 renderer initialized\n[wlc] Set new bsurface to output (1)\nNew output 1:eDP-1\nMatched wildcard output config for eDP-1\nSetting background for output 0 to /home/shana/wallpapers/Anime_Scenery_002-1.jpg\nInvoking swaybar for bar id 'bar-0'\nAdding 0x1f48bd0 (1, 1920.000000x1080.000000) to 0x6304c0 (0, 0.000000x0.000000)\nWorkspace: Generating new workspace name for output eDP-1\nGot valid workspace command for target: '10'\nWorkspace: Found free name 10\nGot valid workspace command for target: '1'\nWorkspace: Found free name 1\nGot valid workspace command for target: '2'\nGot valid workspace command for target: '3'\nGot valid workspace command for target: '4'\nGot valid workspace command for target: '5'\nGot valid workspace command for target: '6'\nGot valid workspace command for target: '7'\nGot valid workspace command for target: '8'\nGot valid workspace command for target: '9'\nAdded workspace 1 for output 1\nSetting focus to 0x1f48bd0:1 (OUTPUT 'eDP-1')\n[wlc] Added output (1)\n[wlc] become active\nUsing output 0 of 1\nEvent on IPC listening socket\nEvent on IPC listening socket\nSetting surface 0x1f64230 as panel for output 1 (wl_resource: 0x1f4a0f0)\nCreating panel config for resource 0x1f4a0f0\nArranging layout for 0x6304c0 (ROOT '(null)')\nArranging layout for 0x6304c0 (null) 0.000000x0.000000+0.000000,0.000000\nArranging output 'eDP-1' at 0.000000,0.000000\nArranging layout for 0x1f48bd0 (OUTPUT 'eDP-1')\nArranging layout for 0x1f48bd0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\nArranging layout for 0x1f677e0 (WORKSPACE '1')\nArranging layout for 0x1f677e0 1 1920.000000x1080.000000+0.000000,0.000000\n-> Found panel for this workspace: 0x0, position: 0\nArranging workspace '1' at 0.000000, 0.000000\nfocus:R      |(0x6304c0)(p:(nil)   )(f:0x1f48bd0)(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)\n|focus:X     |(0x1f48bd0)(p:0x6304c0)(f:0x1f677e0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1f677e0)(p:0x1f48bd0)(f:(nil)   )(h:-1)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\nFound existing panel config for resource 0x1f4a0f0\nPanel position for wl_resource 0x1f4a0f0 changed 0 => 0\nArranging layout for 0x6304c0 (ROOT '(null)')\nArranging layout for 0x6304c0 (null) 0.000000x0.000000+0.000000,0.000000\nArranging output 'eDP-1' at 0.000000,0.000000\nArranging layout for 0x1f48bd0 (OUTPUT 'eDP-1')\nArranging layout for 0x1f48bd0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\nArranging layout for 0x1f677e0 (WORKSPACE '1')\nArranging layout for 0x1f677e0 1 1920.000000x1080.000000+0.000000,0.000000\n-> Found panel for this workspace: 0x0, position: 0\nArranging workspace '1' at 0.000000, 0.000000\nfocus:R      |(0x6304c0)(p:(nil)   )(f:0x1f48bd0)(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)\n|focus:X     |(0x1f48bd0)(p:0x6304c0)(f:0x1f677e0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1f677e0)(p:0x1f48bd0)(f:(nil)   )(h:-1)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\nSetting surface 0x1b09570 as background for output 1\nrewritten name Power_Button\nFound input device (0:1:Power_Button)\nrewritten name Video_Bus\nFound input device (0:6:Video_Bus)\nrewritten name Video_Bus\nFound input device (0:6:Video_Bus)\nrewritten name USB_Optical_Mouse\nFound input device (7119:5:USB_Optical_Mou)\nrewritten name AT_Translated_Set_2_keyboard\nFound input device (1:1:AT_Translated_Set_2_keyboard)\nrewritten name AlpsPS/2_ALPS_DualPoint_Stick\nFound input device (2:8:AlpsPS/2_ALPS_DualPoint_Stick)\nrewritten name AlpsPS/2_ALPS_DualPoint_TouchPad\nFound input device (2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\nrewritten name ThinkPad_Extra_Buttons\nFound input device (6058:20564:ThinkPad_Extra_B)\nArranging layout for 0x6304c0 (ROOT '(null)')\nArranging layout for 0x6304c0 (null) 0.000000x0.000000+0.000000,0.000000\nArranging output 'eDP-1' at 0.000000,0.000000\nArranging layout for 0x1f48bd0 (OUTPUT 'eDP-1')\nArranging layout for 0x1f48bd0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\nArranging layout for 0x1f677e0 (WORKSPACE '1')\nArranging layout for 0x1f677e0 1 1920.000000x1080.000000+0.000000,0.000000\n-> Found panel for this workspace: 1920x21, position: 0\nArranging workspace '1' at 0.000000, 21.000000\nfocus:R      |(0x6304c0)(p:(nil)   )(f:0x1f48bd0)(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)\n|focus:X     |(0x1f48bd0)(p:0x6304c0)(f:0x1f677e0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1f677e0)(p:0x1f48bd0)(f:(nil)   )(h:-1)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\nHandling command 'workspace 2'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 2'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 3'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 4'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 4'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 1'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 8'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'workspace 8'\nfind_handler(workspace) 0\nCommand 'workspace' failed: (null)\nHandling command 'exec dmenu_run'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec dmenu_run'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec dmenu_run'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec dmenu_run'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exec urxvt'\nfind_handler(exec) 0\nCommand 'exec' failed: (null)\nHandling command 'exit'\nfind_handler(exit) 0\n[wlc] Terminating wlc...\n[wlc] Terminating compositor...\n[wlc] Output (1) terminated...\nOUTPUT: Destroying output '1'\n[wlc] Released drm surface (0x1ae01f8)\n[wlc] Removed bsurface from output (1)\n[wlc] Removed output (1)\n[wlc] Compositor terminated...\n[wlc] Cleanup wlc\nCompositor is ready, executing cmds in queue\n[wlc] Closing Xwayland\n[wlc] Closed drm\nPanel surface killed\nArranging layout for 0x6304c0 (ROOT '(null)')\nArranging layout for 0x6304c0 (null) 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x6304c0)(p:(nil)   )(f:(nil)   )(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:(null)\nBackground surface killed\n[wlc] Failed to activate vt3 for restoration\n[wlc] Failed to switch back to vt1\n[wlc] Parent exit (3289)\n[wlc] Restoring vt 3 (0x3) (fd 3)\n```\n. I always start trying out buttons after the bar is loaded (appears).\nI don't know when it's going to be ready because I start it from the console.\nIf I start sway from X11, the keyboard shortcuts work fine.\nBut if I start from console, the keyboard doesn't work.\nAlso my computer fan starts spinning really fast when I start from console, so I'm guessing there's some sort of task that's taking a long time to execute, maybe even an infinite loop?\n. So, I tried sway some more nested in X11, and dmenu and urxvt would appear. Not exactly sure why :/\nBut the process(dmenu and urxvt) is spawned according to htop.\nAlso the process (command) that was using 100% cpu, according to htop was: \nXwayland :0 -rootless -terminate -listen 16 -listen 17 -wm 21\n. I seem to be having similar freezes. Though, mine are not from scrolling between workspaces, but just switching between them using mod+num rapidly.. just wondering if it's possible to have the scrolling between work spaces feature something that can be toggled during compile time. :x \n. I cut out most of the logs in between because it would be too long.\nNot really sure why it's freezing up still :/\nNear the end was when I sent an event to systemd to shutdown using the power button.\n```\n12/17/16 17:29:26 - [wlc] logind: session control granted\n12/17/16 17:29:26 - [wlc] Running on vt 1 (fd 0)\n12/17/16 17:29:26 - [wlc] Failed to open X11 display\n12/17/16 17:29:26 - Starting sway version 0.11-rc2 (2016-12-12, branch \"HEAD\")\n12/17/16 17:29:26 - Linux blank 4.9.0 #1 SMP Mon Dec 12 09:31:42 EST 2016 x86_64 Intel(R) Core(TM) i7-5500U CPU @ 2.40GHz GenuineIntel GNU/Linux\n12/17/16 17:29:26 - Contents of /etc/lsb-release:\n12/17/16 17:29:26 - DISTRIB_ID=\"Gentoo\"\n12/17/16 17:29:26 - Contents of /etc/os-release:\n12/17/16 17:29:26 - NAME=Gentoo\n12/17/16 17:29:26 - ID=gentoo\n12/17/16 17:29:26 - PRETTY_NAME=\"Gentoo/Linux\"\n12/17/16 17:29:26 - ANSI_COLOR=\"1;32\"\n12/17/16 17:29:26 - HOME_URL=\"https://www.gentoo.org/\"\n12/17/16 17:29:26 - SUPPORT_URL=\"https://www.gentoo.org/support/\"\n12/17/16 17:29:26 - BUG_REPORT_URL=\"https://bugs.gentoo.org/\"\n12/17/16 17:29:26 - Contents of /etc/gentoo-release:\n12/17/16 17:29:26 - Gentoo Base System release 2.3\n12/17/16 17:29:26 - PATH=/usr/local/bin:/usr/bin:/bin:/opt/bin:/usr/x86_64-pc-linux-gnu/gcc-bin/4.9.3\n12/17/16 17:29:26 - LD_LOAD_PATH=(null)\n12/17/16 17:29:26 - LD_PRELOAD_PATH=(null)\n12/17/16 17:29:26 - LD_LIBRARY_PATH=OFF\n12/17/16 17:29:26 - SWAY_CURSOR_THEME=(null)\n12/17/16 17:29:26 - SWAY_CURSOR_SIZE=(null)\n12/17/16 17:29:26 - SWAYSOCK=(null)\n12/17/16 17:29:26 - WLC_DRM_DEVICE=(null)\n12/17/16 17:29:26 - WLC_SHM=(null)\n12/17/16 17:29:26 - WLC_OUTPUTS=(null)\n12/17/16 17:29:26 - WLC_XWAYLAND=(null)\n12/17/16 17:29:26 - WLC_LIBINPUT=(null)\n12/17/16 17:29:26 - WLC_REPEAT_DELAY=(null)\n12/17/16 17:29:26 - WLC_REPEAT_RATE=(null)\n12/17/16 17:29:26 - XKB_DEFAULT_RULES=(null)\n12/17/16 17:29:26 - XKB_DEFAULT_MODEL=(null)\n12/17/16 17:29:26 - XKB_DEFAULT_LAYOUT=(null)\n12/17/16 17:29:26 - XKB_DEFAULT_VARIANT=(null)\n12/17/16 17:29:26 - XKB_DEFAULT_OPTIONS=(null)\n12/17/16 17:29:26 - Set XDG_CONFIG_HOME to /home/shana/.config\n12/17/16 17:29:26 - Loading config from /home/shana/.config/sway/config\n12/17/16 17:29:26 - handling config command 'set $mod Mod1'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $up j'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $down k'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $left h'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $right l'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $term gnome-terminal'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'set $menu dmenu_run'\n12/17/16 17:29:26 - find_handler(set) 0\n12/17/16 17:29:26 - handling config command 'output * bg /home/shana/wallpapers/Anime_Scenery_001.png fill'\n12/17/16 17:29:26 - find_handler(output) 0\n12/17/16 17:29:26 - Config stored for output * (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg /home/shana/wallpapers/Anime_Scenery_001.png fill)\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Return exec $term'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Return to command exec gnome-terminal\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+c kill'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+c to command kill\n12/17/16 17:29:26 - handling config command 'bindsym $mod+p exec $menu'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+p to command exec dmenu_run\n12/17/16 17:29:26 - handling config command 'floating_modifier $mod normal'\n12/17/16 17:29:26 - find_handler(floating_modifier) 0\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+r reload'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+r to command reload\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+e restart'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+e to command restart\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+q exit'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+q to command exit\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+backslash focus up'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+backslash to command focus up\n12/17/16 17:29:26 - handling config command 'bindsym $mod+backslash focus down'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+backslash to command focus down\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Tab focus left'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Tab to command focus left\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Tab focus right'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Tab to command focus right\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Left move left'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Left to command move left\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Down move down'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Down to command move down\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Up move up'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Up to command move up\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+Right move right'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+Right to command move right\n12/17/16 17:29:26 - handling config command 'bindsym $mod+1 workspace 1'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+1 to command workspace 1\n12/17/16 17:29:26 - handling config command 'bindsym $mod+2 workspace 2'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+2 to command workspace 2\n12/17/16 17:29:26 - handling config command 'bindsym $mod+3 workspace 3'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+3 to command workspace 3\n12/17/16 17:29:26 - handling config command 'bindsym $mod+4 workspace 4'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+4 to command workspace 4\n12/17/16 17:29:26 - handling config command 'bindsym $mod+5 workspace 5'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+5 to command workspace 5\n12/17/16 17:29:26 - handling config command 'bindsym $mod+6 workspace 6'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+6 to command workspace 6\n12/17/16 17:29:26 - handling config command 'bindsym $mod+7 workspace 7'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+7 to command workspace 7\n12/17/16 17:29:26 - handling config command 'bindsym $mod+8 workspace 8'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+8 to command workspace 8\n12/17/16 17:29:26 - handling config command 'bindsym $mod+9 workspace 9'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+9 to command workspace 9\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+1 move container to workspace 1'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+1 to command move container to workspace 1\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+2 move container to workspace 2'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+2 to command move container to workspace 2\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+3 move container to workspace 3'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+3 to command move container to workspace 3\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+4 move container to workspace 4'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+4 to command move container to workspace 4\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+5 move container to workspace 5'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+5 to command move container to workspace 5\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+6 move container to workspace 6'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+6 to command move container to workspace 6\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+7 move container to workspace 7'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+7 to command move container to workspace 7\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+8 move container to workspace 8'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+8 to command move container to workspace 8\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+9 move container to workspace 9'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+9 to command move container to workspace 9\n12/17/16 17:29:26 - handling config command 'bindsym $mod+t layout toggle split'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+t to command layout toggle split\n12/17/16 17:29:26 - handling config command 'bindsym $mod+w layout tabbed'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+w to command layout tabbed\n12/17/16 17:29:26 - handling config command 'bindsym $mod+b layout stacking'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+b to command layout stacking\n12/17/16 17:29:26 - handling config command 'bindsym $mod+m fullscreen'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+m to command fullscreen\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+space floating toggle'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+space to command floating toggle\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Shift+space floating toggle'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - 'Mod1+Shift+space' already exists, overwriting\n12/17/16 17:29:26 - bindsym - Bound Mod1+Shift+space to command floating toggle\n12/17/16 17:29:26 - handling config command 'mode \"resize\" {'\n12/17/16 17:29:26 - find_handler(mode) 0\n12/17/16 17:29:26 - Switching to mode `resize'\n12/17/16 17:29:26 - handling config command 'bindsym $left resize shrink width 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound h to command resize shrink width 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym $down resize grow height 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound k to command resize grow height 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym $up resize shrink height 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound j to command resize shrink height 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym $right resize grow width 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound l to command resize grow width 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym Left resize shrink width 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Left to command resize shrink width 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym Down resize grow height 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Down to command resize grow height 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym Up resize shrink height 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Up to command resize shrink height 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym Right resize grow width 10 px or 10 ppt'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Right to command resize grow width 10 px or 10 ppt\n12/17/16 17:29:26 - handling config command 'bindsym Return mode \"default\"'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Return to command mode \"default\"\n12/17/16 17:29:26 - handling config command 'bindsym Escape mode \"default\"'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Escape to command mode \"default\"\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of mode block\n12/17/16 17:29:26 - handling config command 'bindsym $mod+r mode \"resize\"'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+r to command mode \"resize\"\n12/17/16 17:29:26 - handling config command 'bindsym XF86AudioRaiseVolume exec amixer -q set 'Master' 2%+ unmute'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86AudioRaiseVolume to command exec amixer -q set 'Master' 2%+ unmute\n12/17/16 17:29:26 - handling config command 'bindsym XF86AudioLowerVolume exec amixer -q set 'Master' 2%- unmute'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86AudioLowerVolume to command exec amixer -q set 'Master' 2%- unmute\n12/17/16 17:29:26 - handling config command 'bindsym XF86AudioMute exec amixer -q set 'Master' toggle'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86AudioMute to command exec amixer -q set 'Master' toggle\n12/17/16 17:29:26 - handling config command 'bindsym XF86MonBrightnessUp exec xbacklight -inc 5'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86MonBrightnessUp to command exec xbacklight -inc 5\n12/17/16 17:29:26 - handling config command 'bindsym XF86MonBrightnessDown exec xbacklight -dec 5'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86MonBrightnessDown to command exec xbacklight -dec 5\n12/17/16 17:29:26 - handling config command 'bindsym XF86MyComputer exec GTK_THEME=Adwaita:dark spacefm'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86MyComputer to command exec GTK_THEME=Adwaita:dark spacefm\n12/17/16 17:29:26 - handling config command 'bindsym XF86HomePage exec chrome'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound XF86HomePage to command exec chrome\n12/17/16 17:29:26 - handling config command 'bindsym $mod+XF86HomePage exec firefox'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+XF86HomePage to command exec firefox\n12/17/16 17:29:26 - handling config command 'bindsym F4 exec amixer set Capture toggle'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound F4 to command exec amixer set Capture toggle\n12/17/16 17:29:26 - handling config command 'bindsym Mod4+l exec swaylock --color 000000'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod4+l to command exec swaylock --color 000000\n12/17/16 17:29:26 - handling config command 'bindsym $mod+Print exec swaygrab'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+Print to command exec swaygrab\n12/17/16 17:29:26 - handling config command 'bindsym $mod+a exec st -e alsamixer'\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - bindsym - Bound Mod1+a to command exec st -e alsamixer\n12/17/16 17:29:26 - handling config command 'bar {'\n12/17/16 17:29:26 - find_handler(bar) 0\n12/17/16 17:29:26 - Configuring bar bar-0\n12/17/16 17:29:26 - handling config command 'status_command /home/shana/builds/sway_status.sh'\n12/17/16 17:29:26 - find_handler(status_command) 0\n12/17/16 17:29:26 - Feeding bar with status command: /home/shana/builds/sway_status.sh\n12/17/16 17:29:26 - handling config command 'font monospace 12'\n12/17/16 17:29:26 - find_handler(font) 0\n12/17/16 17:29:26 - Settings font 'monospace 12' for bar: bar-0\n12/17/16 17:29:26 - handling config command 'height 26'\n12/17/16 17:29:26 - find_handler(height) 0\n12/17/16 17:29:26 - Setting bar height to 26 on bar: bar-0\n12/17/16 17:29:26 - handling config command 'position top'\n12/17/16 17:29:26 - find_handler(position) 0\n12/17/16 17:29:26 - Setting bar position 'top' for bar: bar-0\n12/17/16 17:29:26 - handling config command 'colors {'\n12/17/16 17:29:26 - find_handler(colors) 0\n12/17/16 17:29:26 - handling config command 'statusline #f0f0f0'\n12/17/16 17:29:26 - find_handler(statusline) 0\n12/17/16 17:29:26 - handling config command 'background #0C131A'\n12/17/16 17:29:26 - find_handler(background) 0\n12/17/16 17:29:26 - handling config command 'inactive_workspace #f0f0f000 #32323200 #f0f0f0'\n12/17/16 17:29:26 - find_handler(inactive_workspace) 0\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of bar colors block\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of bar block\n12/17/16 17:29:26 - handling config command 'input \"2:8:AlpsPS/2_ALPS_DualPoint_TouchPad\" {'\n12/17/16 17:29:26 - find_handler(input) 0\n12/17/16 17:29:26 - new_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\n12/17/16 17:29:26 - entering input block: 2:8:AlpsPS/2_ALPS_DualPoint_TouchPad\n12/17/16 17:29:26 - handling config command 'natural_scroll enabled'\n12/17/16 17:29:26 - find_handler(natural_scroll) 1\n12/17/16 17:29:26 - new_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\n12/17/16 17:29:26 - handling config command 'tap enabled'\n12/17/16 17:29:26 - find_handler(tap) 1\n12/17/16 17:29:26 - tap for device: 2:8:AlpsPS/2_ALPS_DualPoint_TouchPad\n12/17/16 17:29:26 - new_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\n12/17/16 17:29:26 - apply-tap for device: 2:8:AlpsPS/2_ALPS_DualPoint_TouchPad\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of input block\n12/17/16 17:29:26 - handling config command 'include /etc/sway/config.d/'\n12/17/16 17:29:26 - find_handler(include) 0\n12/17/16 17:29:26 - Loading config from /etc/sway/config.d/security\n12/17/16 17:29:26 - handling config command 'permit * fullscreen keyboard mouse ipc'\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Permissions granted to * for features 240\n12/17/16 17:29:26 - handling config command 'permit /usr/bin/swaylock lock'\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Permissions granted to /usr/bin/swaylock for features 241\n12/17/16 17:29:26 - handling config command 'permit /usr/bin/swaybar panel'\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Permissions granted to /usr/bin/swaybar for features 242\n12/17/16 17:29:26 - handling config command 'permit /usr/bin/swaybg background'\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Permissions granted to /usr/bin/swaybg for features 244\n12/17/16 17:29:26 - handling config command 'permit /usr/bin/swaygrab screenshot'\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Permissions granted to /usr/bin/swaygrab for features 248\n12/17/16 17:29:26 - handling config command 'ipc {'\n12/17/16 17:29:26 - find_handler(ipc) 0\n12/17/16 17:29:26 - handling config command 'command enabled'\n12/17/16 17:29:26 - find_handler(command) 0\n12/17/16 17:29:26 - Enabled IPC command feature\n12/17/16 17:29:26 - handling config command 'outputs enabled'\n12/17/16 17:29:26 - find_handler(outputs) 0\n12/17/16 17:29:26 - Enabled IPC outputs feature\n12/17/16 17:29:26 - handling config command 'workspaces enabled'\n12/17/16 17:29:26 - find_handler(workspaces) 0\n12/17/16 17:29:26 - Enabled IPC workspaces feature\n12/17/16 17:29:26 - handling config command 'tree enabled'\n12/17/16 17:29:26 - find_handler(tree) 0\n12/17/16 17:29:26 - Enabled IPC tree feature\n12/17/16 17:29:26 - handling config command 'marks enabled'\n12/17/16 17:29:26 - find_handler(marks) 0\n12/17/16 17:29:26 - Enabled IPC marks feature\n12/17/16 17:29:26 - handling config command 'bar-config enabled'\n12/17/16 17:29:26 - find_handler(bar-config) 0\n12/17/16 17:29:26 - Enabled IPC bar-config feature\n12/17/16 17:29:26 - handling config command 'inputs enabled'\n12/17/16 17:29:26 - find_handler(inputs) 0\n12/17/16 17:29:26 - Enabled IPC inputs feature\n12/17/16 17:29:26 - handling config command 'events {'\n12/17/16 17:29:26 - find_handler(events) 0\n12/17/16 17:29:26 - handling config command 'workspace enabled'\n12/17/16 17:29:26 - find_handler(workspace) 0\n12/17/16 17:29:26 - Enabled IPC workspace event\n12/17/16 17:29:26 - handling config command 'output enabled'\n12/17/16 17:29:26 - find_handler(output) 0\n12/17/16 17:29:26 - Enabled IPC output event\n12/17/16 17:29:26 - handling config command 'mode enabled'\n12/17/16 17:29:26 - find_handler(mode) 0\n12/17/16 17:29:26 - Enabled IPC mode event\n12/17/16 17:29:26 - handling config command 'window enabled'\n12/17/16 17:29:26 - find_handler(window) 0\n12/17/16 17:29:26 - Enabled IPC window event\n12/17/16 17:29:26 - handling config command 'input enabled'\n12/17/16 17:29:26 - find_handler(input) 0\n12/17/16 17:29:26 - Enabled IPC input event\n12/17/16 17:29:26 - handling config command 'binding disabled'\n12/17/16 17:29:26 - find_handler(binding) 0\n12/17/16 17:29:26 - Disabled IPC binding event\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of IPC events block\n12/17/16 17:29:26 - handling config command '}'\n12/17/16 17:29:26 - End of IPC block\n12/17/16 17:29:26 - handling config command 'commands {'\n12/17/16 17:29:26 - find_handler(commands) 0\n12/17/16 17:29:26 - find_handler() 0\n12/17/16 17:29:26 - Set command policy for * to -1\n12/17/16 17:29:26 - find_handler(fullscreen) 0\n12/17/16 17:29:26 - Set command policy for fullscreen to 10\n12/17/16 17:29:26 - find_handler(bindsym) 0\n12/17/16 17:29:26 - Set command policy for bindsym to 1\n12/17/16 17:29:26 - find_handler(exit) 0\n12/17/16 17:29:26 - Set command policy for exit to 2\n12/17/16 17:29:26 - find_handler(kill) 0\n12/17/16 17:29:26 - Set command policy for kill to 2\n12/17/16 17:29:26 - find_handler(reload) 0\n12/17/16 17:29:26 - Set command policy for reload to 2\n12/17/16 17:29:26 - find_handler(permit) 0\n12/17/16 17:29:26 - Set command policy for permit to 1\n12/17/16 17:29:26 - find_handler(reject) 0\n12/17/16 17:29:26 - Set command policy for reject to 1\n12/17/16 17:29:26 - find_handler(ipc) 0\n12/17/16 17:29:26 - Set command policy for ipc to 1\n12/17/16 17:29:26 - End of commands block\n12/17/16 17:29:26 - [wlc] libinput: resume\n12/17/16 17:29:26 - [wlc] Activating tty\n12/17/16 17:29:26 - [wlc] MODE: (0) 1920x1080@60000 *\n12/17/16 17:29:26 - [wlc] Connector 1 is not connected or has no modes\n12/17/16 17:29:26 - [wlc] Connector 2 is not connected or has no modes\n12/17/16 17:29:26 - [wlc] Connector 3 is not connected or has no modes\n12/17/16 17:29:26 - [wlc] Connector 4 is not connected or has no modes\n12/17/16 17:29:26 - [wlc] eDP-1 Chose mode (0) 1920x1080\n12/17/16 17:29:26 - Output 1 resolution changed to 1920 x 1080\n12/17/16 17:29:26 - New output 1:eDP-1\n12/17/16 17:29:26 - Matched wildcard output config for eDP-1\n12/17/16 17:29:26 - Setting background for output 0 to /home/shana/wallpapers/Anime_Scenery_001.png\n12/17/16 17:29:26 - Adding 0x1b96940 (1, 1920.000000x1080.000000) to 0x635db8 (0, 0.000000x0.000000)\n12/17/16 17:29:26 - Invoking swaybar for bar id 'bar-0'\n12/17/16 17:29:26 - Workspace: Generating new workspace name for output eDP-1\n12/17/16 17:29:26 - Got valid workspace command for target: '1'\n12/17/16 17:29:26 - Workspace: Found free name 1\n12/17/16 17:29:26 - Got valid workspace command for target: '2'\n12/17/16 17:29:26 - Got valid workspace command for target: '3'\n12/17/16 17:29:26 - Got valid workspace command for target: '4'\n12/17/16 17:29:26 - Got valid workspace command for target: '5'\n12/17/16 17:29:26 - Got valid workspace command for target: '6'\n12/17/16 17:29:26 - Got valid workspace command for target: '7'\n12/17/16 17:29:26 - Got valid workspace command for target: '8'\n12/17/16 17:29:26 - Got valid workspace command for target: '9'\n12/17/16 17:29:26 - Creating default workspace 1\n12/17/16 17:29:26 - Added workspace 1 for output 1\n12/17/16 17:29:26 - Adding 0x1bce0d0 (2, 1920.000000x1080.000000) to 0x1b96940 (1, 1920.000000x1080.000000)\n12/17/16 17:29:26 - Setting focus to 0x1bce0d0:18446744073709551615 (WORKSPACE '1')\n12/17/16 17:29:26 - Sending workspace::focus event\n12/17/16 17:29:26 - [wlc] EGL context is double buffered\n12/17/16 17:29:26 - [wlc] EGL version: 1.4 (DRI2)\n12/17/16 17:29:26 - [wlc] EGL vendor: Mesa Project\n12/17/16 17:29:26 - [wlc] EGL client APIs: OpenGL OpenGL_ES \n12/17/16 17:29:26 - [wlc] EGL context (RGB888)\n12/17/16 17:29:26 - [wlc] EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_create_context EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n12/17/16 17:29:26 - [wlc] GL version: OpenGL ES 3.1 Mesa 13.0.0\n12/17/16 17:29:26 - [wlc] GL vendor: Intel Open Source Technology Center\n12/17/16 17:29:26 - [wlc] GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_OES_depth_texture_cube_map GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_KHR_blend_equation_advanced GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_shader_samples_identical GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_MESA_shader_integer_functions \n12/17/16 17:29:26 - [wlc] GLES2 renderer initialized\n12/17/16 17:29:26 - [wlc] Set new bsurface to output (1)\n12/17/16 17:29:26 - [wlc] Added output (1)\n12/17/16 17:29:26 - [wlc] become active\n12/17/16 17:29:26 - Event on IPC listening socket\n12/17/16 17:29:26 - Event on IPC listening socket\n12/17/16 17:29:26 - Using output 0 of 1\n12/17/16 17:29:26 - Setting surface 0x2093bb0 as panel for output 1 (wl_resource: 0x20d76a0)\n12/17/16 17:29:26 - Creating panel config for resource 0x20d76a0\n12/17/16 17:29:26 - Arranging layout for 0x635db8 (ROOT 'root')\n12/17/16 17:29:26 - Arranging layout for 0x635db8 root 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging output 'eDP-1' at 0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - -> Found panel for this workspace: 0x0, position: 0\n12/17/16 17:29:26 - Arranging workspace '1' at 0.000000, 0.000000\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1bce0d0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1bce0d0)(p:0x1b96940)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n12/17/16 17:29:26 - Found existing panel config for resource 0x20d76a0\n12/17/16 17:29:26 - Panel position for wl_resource 0x20d76a0 changed 0 => 0\n12/17/16 17:29:26 - Arranging layout for 0x635db8 (ROOT 'root')\n12/17/16 17:29:26 - Arranging layout for 0x635db8 root 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging output 'eDP-1' at 0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - -> Found panel for this workspace: 0x0, position: 0\n12/17/16 17:29:26 - Arranging workspace '1' at 0.000000, 0.000000\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1bce0d0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1bce0d0)(p:0x1b96940)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n12/17/16 17:29:26 - Arranging layout for 0x635db8 (ROOT 'root')\n12/17/16 17:29:26 - Arranging layout for 0x635db8 root 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging output 'eDP-1' at 0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 17:29:26 - Arranging workspace '1' at 0.000000, 25.000000\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1bce0d0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1bce0d0)(p:0x1b96940)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:1\n12/17/16 17:29:26 - Setting surface 0x1c212a0 as background for output 1\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 17:29:26 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 17:29:26 - Arranging layout for 0x1bce0d0 1 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 17:29:26 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 17:29:26 - Arranging workspace '1' at 0.000000, 25.000000\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1bce0d0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x1bce0d0)(p:0x1b96940)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:1\n12/17/16 17:29:26 - [wlc] Xwayland started (DISPLAY :0)\n12/17/16 17:29:26 - [wlc] xfixes (5.0)\n12/17/16 17:29:26 - Compositor is ready, executing cmds in queue\n12/17/16 17:29:26 - rewritten name Power_Button\n12/17/16 17:29:26 - Found input device (0:1:Power_Button)\n12/17/16 17:29:26 - rewritten name Video_Bus\n12/17/16 17:29:26 - Found input device (0:6:Video_Bus)\n12/17/16 17:29:26 - rewritten name Video_Bus\n12/17/16 17:29:26 - Found input device (0:6:Video_Bus)\n12/17/16 17:29:26 - rewritten name AT_Translated_Set_2_keyboard\n12/17/16 17:29:26 - Found input device (1:1:AT_Translated_Set_2_keyboard)\n12/17/16 17:29:26 - rewritten name AlpsPS/2_ALPS_DualPoint_Stick\n12/17/16 17:29:26 - Found input device (2:8:AlpsPS/2_ALPS_DualPoint_Stick)\n12/17/16 17:29:26 - rewritten name AlpsPS/2_ALPS_DualPoint_TouchPad\n12/17/16 17:29:26 - Found input device (2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\n12/17/16 17:29:26 - Matched input config for 2:8:AlpsPS/2_ALPS_DualPoint_TouchPad\n12/17/16 17:29:26 - apply_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad)\n12/17/16 17:29:26 - apply_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad) natural_scroll_set_enabled(1)\n12/17/16 17:29:26 - apply_input_config(2:8:AlpsPS/2_ALPS_DualPoint_TouchPad) tap_set_enabled(1)\n12/17/16 17:29:26 - rewritten name ThinkPad_Extra_Buttons\n12/17/16 17:29:26 - Found input device (6058:20564:ThinkPad_Extra_B)\n12/17/16 17:29:29 - Handling command 'exec gnome-terminal'\n12/17/16 17:29:29 - find_handler(exec) 0\n12/17/16 17:29:29 - Executing gnome-terminal\n12/17/16 17:29:29 - Child process created with pid 1133 for workspace 1\n(gnome-terminal:1134): Gdk-WARNING **: Wayland compositor does not support xdg_shell interface, not using Wayland display\n.......\n12/17/16 18:11:44 - looking for workspace for pid 1190\n12/17/16 18:11:44 - handle:7 type:8 state:0 parent:5 mask:0 (x:0 y:0 w:235 h:219) title:Open File class:chromium-browser appid:(null)\n12/17/16 18:11:44 - Adding new view 7:8:Open File as a floating view\n12/17/16 18:11:44 - Sending window::new event\n12/17/16 18:11:44 - Setting focus to 0x2168550:7 (VIEW 'Open File')\n12/17/16 18:11:44 - Sending window::focus event\n12/17/16 18:11:44 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 18:11:44 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+3840.000000,0.000000\n12/17/16 18:11:44 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 18:11:44 - Arranging layout for 0x1bce0d0 1 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:44 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:11:44 - Arranging workspace '1' at 0.000000, 25.000000\n12/17/16 18:11:44 - Arranging 0x1bce0d0 horizontally\n12/17/16 18:11:44 - Calculating arrangement for 0x2146070:4 (will scale 1920.000000 by 1.000000)\n12/17/16 18:11:44 - Arranging layout for 0x2146070 shana@blank:~/wallpapers 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:44 - Set view to 1920 x 1055 @ 0, 25\n12/17/16 18:11:44 - Arranging layout for 0x1a364c0 (WORKSPACE '4')\n12/17/16 18:11:44 - Arranging layout for 0x1a364c0 4 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:44 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:11:44 - Arranging workspace '4' at 0.000000, 25.000000\n12/17/16 18:11:44 - Arranging 0x1a364c0 horizontally\n12/17/16 18:11:44 - Calculating arrangement for 0x213e950:3 (will scale 1920.000000 by 1.000000)\n12/17/16 18:11:44 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:44 - Arranging layout for 0x2145f00 Google Images - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:44 - Set view to 1920 x 1055 @ 0, 25\n12/17/16 18:11:44 - Set floating view to 1 x 1 @ 960, 527\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1a364c0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:W    |(0x1a364c0)(p:0x1b96940)(f:0x2168550)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:(null)\n|---focus:X  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:Google Images - \n|==focus:K   |(0x2168550)(p:0x1a364c0)(f:(nil)   )(h: 7)Type:view|layout:-    |w:   1|h:   1|x: 960|y: 527|g: -1|vis:t|children: 0|name:Open File\n12/17/16 18:11:44 - geometry request for 7 235x219 @ 959,527\n12/17/16 18:11:44 - Sane values for view to 235 x 219 @ 960, 527\n12/17/16 18:11:45 - Setting focus to 0x2168550:7 (VIEW 'Open File')\n12/17/16 18:11:45 - Sending window::focus event\n12/17/16 18:11:46 - Setting focus to 0x2145f00:5 (VIEW 'Google Images - Chromium')\n12/17/16 18:11:46 - Sending window::focus event\n12/17/16 18:11:46 - Arranging layout for 0x213e950 (CONTAINER '(null)')\n12/17/16 18:11:46 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:46 - Arranging layout for 0x2145f00 Google Images - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:46 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1a364c0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:W    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:Google Images - \n|==focus:X   |(0x2168550)(p:0x1a364c0)(f:(nil)   )(h: 7)Type:view|layout:-    |w: 235|h: 219|x: 475|y: 280|g: -1|vis:t|children: 0|name:Open File\n12/17/16 18:11:47 - Setting focus to 0x2168550:7 (VIEW 'Open File')\n12/17/16 18:11:47 - Sending window::focus event\n12/17/16 18:11:47 - geometry request for 7 239x219 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 239 x 219 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 281x250 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 281 x 250 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 457x344 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 457 x 344 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 635x445 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 635 x 445 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 735x483 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 735 x 483 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 814x524 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 814 x 524 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 861x549 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 861 x 549 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 902x571 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 902 x 571 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 932x584 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 932 x 584 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 950x588 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 950 x 588 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 951x588 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 951 x 588 @ 475, 280\n12/17/16 18:11:47 - geometry request for 7 976x597 @ 475,280\n12/17/16 18:11:47 - Sane values for view to 976 x 597 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1047x622 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1047 x 622 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1097x634 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1097 x 634 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1119x640 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1119 x 640 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1120x641 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1120 x 641 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1160x662 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1160 x 662 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1191x676 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1191 x 676 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1197x678 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1197 x 678 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1200x679 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1200 x 679 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1207x684 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1207 x 684 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1210x684 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1210 x 684 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1211x684 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1211 x 684 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1212x684 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1212 x 684 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1213x684 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1213 x 684 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1219x686 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1219 x 686 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1232x692 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1232 x 692 @ 475, 280\n12/17/16 18:11:48 - geometry request for 7 1241x696 @ 475,280\n12/17/16 18:11:48 - Sane values for view to 1241 x 696 @ 475, 280\n12/17/16 18:11:52 - Destroying window 7\n12/17/16 18:11:52 - Destroying view '0x2168550'\n12/17/16 18:11:52 - Arranging layout for 0x1a364c0 (WORKSPACE '4')\n12/17/16 18:11:52 - Arranging layout for 0x1a364c0 4 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:52 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:11:52 - Arranging workspace '4' at 0.000000, 25.000000\n12/17/16 18:11:52 - Arranging 0x1a364c0 horizontally\n12/17/16 18:11:52 - Calculating arrangement for 0x213e950:3 (will scale 1920.000000 by 1.000000)\n12/17/16 18:11:52 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:52 - Arranging layout for 0x2145f00 Google Images - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:52 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1a364c0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:W    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:Google Images - \n12/17/16 18:11:52 - Sending window::close event\n12/17/16 18:11:52 - Setting focus to 0x2145f00:5 (VIEW 'Google Images - Chromium')\n12/17/16 18:11:52 - Sending window::focus event\n12/17/16 18:11:52 - Arranging layout for 0x213e950 (CONTAINER '(null)')\n12/17/16 18:11:52 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:52 - Arranging layout for 0x2145f00 Google Images - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:52 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1a364c0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:W    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:Google Images - \n12/17/16 18:11:53 - Setting focus to 0x2145f00:5 (VIEW 'Google Images - Chromium')\n12/17/16 18:11:53 - Sending window::focus event\n12/17/16 18:11:53 - Arranging layout for 0x213e950 (CONTAINER '(null)')\n12/17/16 18:11:53 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:53 - Arranging layout for 0x2145f00 Google Images - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:11:53 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1a364c0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:W    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:Google Images - \n12/17/16 18:11:53 - Sending window::title event\n12/17/16 18:11:54 - Sending window::title event\n12/17/16 18:11:57 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:11:57 - Sending window::title event\n12/17/16 18:11:57 - Sending window::title event\n12/17/16 18:12:00 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:00 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:01 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:01 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:02 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:02 - geometry request for 5 1916x1034 @ 2,44\n12/17/16 18:12:03 - Sending window::title event\n12/17/16 18:12:05 - Sending window::title event\n12/17/16 18:12:05 - Sending window::title event\n12/17/16 18:12:05 - Sending window::title event\n12/17/16 18:12:06 - Sending window::title event\n12/17/16 18:12:06 - Sending window::title event\n12/17/16 18:12:09 - Sending window::title event\n12/17/16 18:12:10 - Sending window::title event\n12/17/16 18:12:15 - Sending window::title event\n12/17/16 18:12:15 - Sending window::title event\n12/17/16 18:12:16 - Sending window::title event\n12/17/16 18:12:16 - Sending window::title event\n12/17/16 18:12:17 - Handling command 'workspace 1'\n12/17/16 18:12:17 - find_handler(workspace) 0\n12/17/16 18:12:17 - Switching to workspace 0x1bce0d0:1\n12/17/16 18:12:17 - Setting focus to 0x2146070:4 (VIEW 'shana@blank:~/wallpapers')\n12/17/16 18:12:17 - Sending window::focus event\n12/17/16 18:12:17 - Sending workspace::focus event\n12/17/16 18:12:17 - Sending workspace::focus event\n12/17/16 18:12:17 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 18:12:17 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+3840.000000,0.000000\n12/17/16 18:12:17 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 18:12:17 - Arranging layout for 0x1bce0d0 1 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:17 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:12:17 - Arranging workspace '1' at 0.000000, 25.000000\n12/17/16 18:12:17 - Arranging 0x1bce0d0 horizontally\n12/17/16 18:12:17 - Calculating arrangement for 0x2146070:4 (will scale 1920.000000 by 1.000000)\n12/17/16 18:12:17 - Arranging layout for 0x2146070 shana@blank:~/wallpapers 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:17 - Set view to 1920 x 1055 @ 0, 25\n12/17/16 18:12:17 - Arranging layout for 0x1a364c0 (WORKSPACE '4')\n12/17/16 18:12:17 - Arranging layout for 0x1a364c0 4 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:17 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:12:17 - Arranging workspace '4' at 0.000000, 25.000000\n12/17/16 18:12:17 - Arranging 0x1a364c0 horizontally\n12/17/16 18:12:17 - Calculating arrangement for 0x213e950:3 (will scale 1920.000000 by 1.000000)\n12/17/16 18:12:17 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:17 - Arranging layout for 0x2145f00 Google - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:17 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x1bce0d0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:W    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:shana@blank:~/wa\n|-focus:X    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:(null)\n|---focus:X  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:Google - Chro\n12/17/16 18:12:18 - Handling command 'workspace 3'\n12/17/16 18:12:18 - find_handler(workspace) 0\n12/17/16 18:12:18 - Added workspace 3 for output 1\n12/17/16 18:12:18 - Adding 0x214b660 (2, 1920.000000x1080.000000) to 0x1b96940 (1, 1920.000000x1080.000000)\n12/17/16 18:12:18 - Switching to workspace 0x214b660:3\n12/17/16 18:12:18 - Setting focus to 0x214b660:18446744073709551615 (WORKSPACE '3')\n12/17/16 18:12:18 - Sending workspace::focus event\n12/17/16 18:12:18 - Sending workspace::focus event\n12/17/16 18:12:18 - Arranging layout for 0x1b96940 (OUTPUT 'eDP-1')\n12/17/16 18:12:18 - Arranging layout for 0x1b96940 eDP-1 1920.000000x1080.000000+3840.000000,0.000000\n12/17/16 18:12:18 - Arranging layout for 0x1bce0d0 (WORKSPACE '1')\n12/17/16 18:12:18 - Arranging layout for 0x1bce0d0 1 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:18 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:12:18 - Arranging workspace '1' at 0.000000, 25.000000\n12/17/16 18:12:18 - Arranging 0x1bce0d0 horizontally\n12/17/16 18:12:18 - Calculating arrangement for 0x2146070:4 (will scale 1920.000000 by 1.000000)\n12/17/16 18:12:18 - Arranging layout for 0x2146070 shana@blank:~/wallpapers 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:18 - Set view to 1920 x 1055 @ 0, 25\n12/17/16 18:12:18 - Arranging layout for 0x214b660 (WORKSPACE '3')\n12/17/16 18:12:18 - Arranging layout for 0x214b660 3 1920.000000x1080.000000+3840.000000,0.000000\n12/17/16 18:12:18 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:12:18 - Arranging workspace '3' at 0.000000, 25.000000\n12/17/16 18:12:18 - Arranging layout for 0x1a364c0 (WORKSPACE '4')\n12/17/16 18:12:18 - Arranging layout for 0x1a364c0 4 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:18 - -> Found panel for this workspace: 1920x25, position: 0\n12/17/16 18:12:18 - Arranging workspace '4' at 0.000000, 25.000000\n12/17/16 18:12:18 - Arranging 0x1a364c0 horizontally\n12/17/16 18:12:18 - Calculating arrangement for 0x213e950:3 (will scale 1920.000000 by 1.000000)\n12/17/16 18:12:18 - Arranging layout for 0x213e950 (null) 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:18 - Arranging layout for 0x2145f00 Google - Chromium 1920.000000x1055.000000+0.000000,25.000000\n12/17/16 18:12:18 - Set view to 1920 x 1055 @ 0, 25\nfocus:R      |(0x635db8)(p:(nil)   )(f:0x1b96940)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b96940)(p:0x635db8)(f:0x214b660)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:3840|y:   0|g: -1|vis:t|children: 3|name:eDP-1\n|-focus:X    |(0x1bce0d0)(p:0x1b96940)(f:0x2146070)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x2146070)(p:0x1bce0d0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:shana@blank:~/wa\n|-focus:K    |(0x214b660)(p:0x1b96940)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:t|children: 0|name:3\n|-focus:X    |(0x1a364c0)(p:0x1b96940)(f:0x213e950)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:4\n|--focus:X   |(0x213e950)(p:0x1a364c0)(f:0x2145f00)(h:18446744073709551615)Type:cont|layout:Tab  |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 1|name:(null)\n|---focus:X  |(0x2145f00)(p:0x213e950)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1920|h:1055|x:   0|y:  25|g: -1|vis:f|children: 0|name:Google - Chro\n12/17/16 18:12:18 - Handling command 'workspace 4'\n12/17/16 18:12:18 - find_handler(workspace) 0\n12/17/16 18:12:18 - Switching to workspace 0x1a364c0:4\n12/17/16 18:12:18 - Setting focus to 0x2145f00:5 (VIEW 'Google - Chromium')\n12/17/16 18:12:18 - Sending window::focus event\n12/17/16 18:12:18 - Sending workspace::focus event\n12/17/16 18:12:18 - destroying workspace '3'\n12/17/16 18:12:18 - Sending workspace::empty event\n12/17/16 18:12:37 - [wlc] Terminating wlc...\n12/17/16 18:12:37 - [wlc] Terminating compositor...\n12/17/16 18:12:37 - [wlc] Output (1) terminated...\n12/17/16 18:12:37 - OUTPUT: Destroying output '1'\n[1190:1190:1217/181237:ERROR:chrome_browser_main_extra_parts_x11.cc(62)] X IO error received (X server probably went away)\n[1190:1190:1217/181237:ERROR:zygote_communication_linux.cc(292)] Failed to send GetTerminationStatus message to zygote\n[1190:1199:1217/181237:FATAL:bus.cc(1197)] D-Bus connection was disconnected. Aborting.\n0 0x561e4dfc6e3e \n1 0x561e4dfdd44e \n2 0x561e4e9b86f7 \n3 0x561e4e9b8723 \n4 0x7f1b8a4c8634 dbus_connection_dispatch\n5 0x561e4e9b7b59 \n6 0x561e4e04ca59 \n7 0x561e4dfe6696 \n8 0x561e4dfe7e3d \n9 0x561e4dfe8ca5 \n10 0x561e4dfe95d0 \n11 0x561e4e005fea \n12 0x561e4e022bc7 \n13 0x561e4e01ecb2 \n14 0x7f1b8ede1434 \n15 0x7f1b84b7750d clone\n``. I tried it withwlroots-0.1and it seems to be working fine now.\nCursor movement is buttery smooth :D . I don't know when(if) I will have the time to implement this as school recently started.\nApologize in advance.. Byinputsubcommands, do you mean the files undersway/commands/input`?\nso is it going to end up something like:\ninput \"2:7:SynPS/2_Synaptics_TouchPad\" {\n        dwt enabled\n        natural_scroll enabled\n        tap enabled\n        cursor_theme Adwaita 24\n}\nBut if that were the case, it would look like different input devices can have different cursors..?. uhh, I will close this as I don't have the time or expertise right now.. Not sure if this is related, but Alt+Left and Alt+Right doesn't work on Firefox on wayland either.. ",
    "dlrobertson": "FWIW I run Gentoo as well and I just hit this when I added the glamor use flag to x11-base/xorg-server. Without the glamor use flag I no longer hit this.. As of sway version 0.13.0 and wlc version 0.0.9, I no longer can reproduce this on my gentoo box.. Makes sense. http://clang.llvm.org/docs/AddressSanitizer.html is a good overview of address sanitizers. Running an address sanitized build is similar to running a process with valgrind. For example, the following is a snippet from running an address sanitized build of sway.\n```\n$ sway\n==2604==ERROR: LeakSanitizer: detected memory leaks\nDirect leak of 24 byte(s) in 1 object(s) allocated from:\n    #0 0x7f666d0ffe60 in __interceptor_malloc /var/tmp/portage/sys-devel/gcc-6.4.0/work/gcc-6.4.0/libsanitizer/asan/asan_malloc_linux.cc:62\n    #1 0x4131c5 in cmd_exec_always ../sway/commands/exec_always.c:76\n    #2 0x412ba1 in cmd_exec ../sway/commands/exec.c:14\n    #3 0x40db72 in handle_command ../sway/commands.c:471\n    #4 0x4509ce in handle_binding_command ../sway/handlers.c:715\n    #5 0x450cd9 in handle_bindsym ../sway/handlers.c:740\n    #6 0x451960 in handle_key ../sway/handlers.c:847\n    #7 0x7f666ce071c2  (/usr/lib64/libwlc.so.0+0x141c2)\nDirect leak of 22 byte(s) in 9 object(s) allocated from:\n    #0 0x7f666d093160 in __interceptor_strdup /var/tmp/portage/sys-devel/gcc-6.4.0/work/gcc-6.4.0/libsanitizer/asan/asan_interceptors.cc:560\n    #1 0x475812 in workspace_next_name ../sway/workspace.c:69\n    #2 0x43e6fb in new_output ../sway/container.c:201\n    #3 0x44d104 in handle_output_created ../sway/handlers.c:171\n    #4 0x7f666ce02dff  (/usr/lib64/libwlc.so.0+0xfdff)\n```\nYou'll run across a few false positives, but as a whole they tend to be pretty good. I haven't really used it here, but I use it a lot with other projects.. :+1: looks like one is fixed in 0.15.. Also was there a reason sanitized builds were removed? Didn't see support for them in the 0.15 branch. They can be super helpful for finding memory errors.. See #1591 . Updated. I used something similar to the original help string since it shouldn't be affected by the users choice of init system. I'm pretty sure it still has to be specified. Event if it must be specified, this should be a blank string. I'll look into this and potentially update this later.. > I'm pretty sure it still has to be specified. \nI was wrong. Removed in the update.. Updated. There is no need for these variables to be visible any cmake GUIs, so we can mark them as advanced. Actually CMAKE_EXE_LINKER_FLAGS_DEBUG and CMAKE_SHARED_LINKER_FLAGS_DEBUG will already be marked as advanced, so this could be compressed to mark_as_advanced(CMAKE_C_FLAGS_ASAN). json_object_get bumps the ref count. As a result, ownership does not actually transferr to obj.. ",
    "ilpianista": "Commit 99f26c6 breaks the following config:\nbindsym $mod+x exec \"dmenu_run -i -nb '#181818' -nf '#d8d8d8' -sb '#181818' -sf '#a1b56c'\"\nThis works in i3, but doesn't in sway.\nI'm missing why strip_quotes strips all quotes and not just starting and trailing quotes?\n. ",
    "artsi0m": "Thank you. \u0421\u043f\u0430\u0441\u0438\u0431\u043e.\nI wrote alias in my zshrc\nalias swaywm='export XKB_DEFAULT_LAYOUT=ru,us && export XKB_DEFAULT_OPTION=grp:alt_shift_toggle && sway -d 2> ~/sway.log'\nPlease write me if I doing something wrong again.\n. Sorry, I dont check my git acc yet. I dont understand what mean \"Rennaissance\", because\u00a0 im from Russia and I learn english now in school. I just choose arch-tan picture for wallpaper. If you want to know my favorite anime girl is Azusa from K-ON, lol. \n. ",
    "riquito": "@cafehaine thanks for redirecting me here but it doesn't seem to help with my problem.\nI cannot understand how to change the keyboard layout from inside a running sway (I usually change keyboard layouts to write in different languages to different people. Killing and restarting sway is not exactly the solution I was hoping for). If it isn't supported I'll open a feature request. @cafehaine thanks for redirecting me here but it doesn't seem to help with my problem.\nI cannot understand how to change the keyboard layout from inside a running sway (I usually change keyboard layouts to write in different languages to different people. Killing and restarting sway is not exactly the solution I was hoping for). If it isn't supported I'll open a feature request. My brain started working again, it's indeed a solution and I don't really need to do it programmatically. Thank you very much. My brain started working again, it's indeed a solution and I don't really need to do it programmatically. Thank you very much. What if you need to change layout at runtime?. What if you need to change layout at runtime?. ",
    "cafehaine": "export XKB_DEFAULT_LAYOUT=de,us\nexport XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle\nsway\nthen press alt and shift to switch layouts\nThere is now way to do it programmatically. Closing this issue, fixed by pull request #696 .\n. This is due to swaybar not handling clicks for the moment, this is on the feature list of this project's website. So, not possible for now.\n. It makes a difference when you install sway-git on arch, because it means you fully reclone the repo each time you want to update the package. For me it should be on another repo.\n. xwayland, swaybar and swaylock don't support native scaling at the moment. If you want a crisp font for your terminal, you can try and switch to a native wayland terminal, such as:\n-weston-terminal\n-germinal\n-wlterm\n-hawaii-terminal\nHope this helps!\n. It's on a per-toolkit / per-application basis, gtk can be scaled via an environment var for example.\nThis means that there is no global solution for now, but we might see one in the future\nYou can see more in the arch-wiki page about HiDPI:\nhttps://wiki.archlinux.org/index.php/HiDPI\nEDIT:\nBy the way, this is more of a wlc issue than sway, since the scaling on the wlc side\n. To be honest I did not test the scaling function, I just thought most native wayland applications supported scaling, which proves to be wrong\n. start glxgears like this to avoid the 60fps cap: vblank_mode=0 glxgears\n. not possible atm, see Cloudef/wlc#11. @riquito see https://github.com/SirCmpwn/sway/issues/532. https://github.com/swaywm/sway/blob/bc808680b173d5a3c4732265b33e2e8bd81e4d9b/sway/sway.5.scd#L543\nSo man 5 sway. see #646 . It's because dota doesn't implement it's own cursor system, simply skins the system one.\n(you can see this by hitting the super key on windoz, the cursor won't move)\n(Yeah I know It's a really wanky way of explaining it.). As said previously, see #1390 . The blur effect can be done using swaygrab and imagemagick, so no need for that. create a script that is called before swaylock, in which you call swaygrab, and output it's result in a file, then blur the file using imagemagick, see here on how to do it .\nMight not be the most efficient way of doing it but it's not that bad. probably duplicate of #646 . to automatically start sway without a login manager, you should use something like\nhttps://wiki.archlinux.org/index.php/Getty#Automatic_login_to_virtual_console\nand then a .bashrc (or whatever your shell is) with the following lines:\n```\nIf running trom tty1 start sway\nif [ $(tty) == \"/dev/tty1\" ]; then\n    sway\n    exit 0\nfi\n```. always happened on i3 with firefox for me, not linked with sway imo. ",
    "knezi": "Hi to all,\nthis option for switching layouts is not applicable to my use case. I use the following two layouts:\nsetxkbmap cz-prog,cz-moje -variant ,ucw -option grp:caps_switch\nsetxkbmap us,cz-moje -variant ,ucw -option grp:caps_switch\nbetween which I toggle with a small bash script. I can't use Alt+Shift to toggle between them, because it uses capslock as a switch between the variants. The question is if there is any way to switch between these two without the need of restarting sway?\n. Should I fill feature request?\n. ",
    "Fale": "any news on this?\n. I think the situation around this could/should/will change very soon due to #1076 . Thanks :)\n. Closed via #911 \n. Hi,\nmaybe I've misunderstood the new release cycle.\nIn the description I read\n\nEach morning, if bugfixes landed during the previous day, a new RC is cut.\n\nI was expecting to see the RC2 on 30/09/2016 and the RC3 on 02/09/2016, but no RC2 has yet been released, so maybe I misunderstood the release cycle?!\n. I'm not able to reproduce this on swaylock version  (2016-10-26, branch \"\"). Are you still able to reproduce this? (I tried 5 times, 30 seconds each time). I've tried and I'm not able to reproduce the problem. I wonder if it depends on other software or hardware. Yes, it did :) thanks a lot!\n. On Fedora 25, with Xorg 1.19 I don't see the described problem. Same as #960 comments 3 and 4. I've been able to reproduce this in a consitant way in the following way:\n\nStart mpv\nGo in full screen (f)\nClose mpv (Windows + Shift + Q)\nsway crushes. Having found the sequence to reproduce the bug, I have been able to get a better log: http://paste.fedoraproject.org/499040/80891120/. I tried having the following  ~/.config/mpv/config:\n\nvo=opengl\nBut I obtained the same result (https://paste.fedoraproject.org/513291/77859714)\nAn intereseting ERROR: Unable to receive IPC response appears toward the end of the file. I guess that due to sway movement to wlroot, all the wlc-related bounties will be moved against wlroot, right?. @SirCmpwn not really sure about that\n@ametisf as a user yes, as a packager, I can not do it, so I guess the majority of people (everyone who did not put the alias manually) will have no logs and therefore bugs will be far less helpful.. yeah, like the terminal double clicking on a word. You mean that would be hard to implement at all, or that it would be hard to implement X application raising notifications in sway?. Are -c and -i mutually exclusive?. sorry, I had a dependency chain problem. wlc 0.0.9 is out, so I guess you should try with it. could this be related? https://github.com/SirCmpwn/sway/issues/975. could this be related? https://github.com/SirCmpwn/sway/issues/975. 1. I think sometimes (like for 0.12) 3 rcs seems overkilling. At least 2 is what I would go for.\n2. I like it :)\n3. I'm up to do some testing on building it for Fedora and on Fedora in general, as I have been doing it for the last few releases. 1. I think sometimes (like for 0.12) 3 rcs seems overkilling. At least 2 is what I would go for.\n2. I like it :)\n3. I'm up to do some testing on building it for Fedora and on Fedora in general, as I have been doing it for the last few releases. If you are talking about #1105, I think that more \"generic\" testing would not have found that problem either way (I can not use multiple screens due to https://github.com/Cloudef/wlc/issues/87 so I would not have that tested either way).\nProbably we need to create list of tests and people can test stuff against that list and say \"I tested numbers 1,3,4,5,6 and they all worked\" so we can ensure that all tests have been run at least once. If you are talking about #1105, I think that more \"generic\" testing would not have found that problem either way (I can not use multiple screens due to https://github.com/Cloudef/wlc/issues/87 so I would not have that tested either way).\nProbably we need to create list of tests and people can test stuff against that list and say \"I tested numbers 1,3,4,5,6 and they all worked\" so we can ensure that all tests have been run at least once. Thanks.\nfor_window [instance=\"urxvt256c-ml\"] border none\nworks as expected :). Thanks.\nfor_window [instance=\"urxvt256c-ml\"] border none\nworks as expected :). @SirCmpwn how can I check that?. @SirCmpwn how can I check that?. 45Mb.\nOk, so now the maths adds up, thanks a lot :). 45Mb.\nOk, so now the maths adds up, thanks a lot :). Converting the image to 1:1 pixel ratio with what gets displayed and removing the parts of the image that are not showed to my screen, I arrived to:\n$ ls -alh .dotfiles/wallpaper.png \n-rw-rw-r--. 1 fale fale 1.3M Mar 19 22:11 .dotfiles/wallpaper.png\n$ convert .dotfiles/wallpaper.png rgba:rgba.dump\n$ du -h rgba.dump\n8.0M    rgba.dump\n$ ps -eo size,pid,user,command --sort -size | awk '{ hr=$1/1024 ; printf(\"%13.2f Mb \",hr) } { for ( x=4 ; x<=NF ; x++ ) { printf(\"%s \",$x) } print \"\" }' | grep sway\n        19.92 Mb sway -d \n         9.35 Mb swaybg 0 /home/fale/.dotfiles/wallpaper.png fill \n         2.12 Mb swaybar -b bar-0 \n         1.16 Mb sway -d \n         0.34 Mb grep --color=auto sway\nSo I guess swaybg could perform the same operations before putting the whole image in rgba on RAM to improve it's footprint. Converting the image to 1:1 pixel ratio with what gets displayed and removing the parts of the image that are not showed to my screen, I arrived to:\n$ ls -alh .dotfiles/wallpaper.png \n-rw-rw-r--. 1 fale fale 1.3M Mar 19 22:11 .dotfiles/wallpaper.png\n$ convert .dotfiles/wallpaper.png rgba:rgba.dump\n$ du -h rgba.dump\n8.0M    rgba.dump\n$ ps -eo size,pid,user,command --sort -size | awk '{ hr=$1/1024 ; printf(\"%13.2f Mb \",hr) } { for ( x=4 ; x<=NF ; x++ ) { printf(\"%s \",$x) } print \"\" }' | grep sway\n        19.92 Mb sway -d \n         9.35 Mb swaybg 0 /home/fale/.dotfiles/wallpaper.png fill \n         2.12 Mb swaybar -b bar-0 \n         1.16 Mb sway -d \n         0.34 Mb grep --color=auto sway\nSo I guess swaybg could perform the same operations before putting the whole image in rgba on RAM to improve it's footprint. I see, thanks :). I see, thanks :). \"[...] My goal is to ship sway 1.0 before the end of the year. [...]\" from https://drewdevault.com/2017/10/09/Future-of-sway.html. \"[...] My goal is to ship sway 1.0 before the end of the year. [...]\" from https://drewdevault.com/2017/10/09/Future-of-sway.html. yes, and @SirCmpwn already fixed it in master. ",
    "hosaka": "Looking at DRM docs, there is an api for setting dpms on drm_connector, but no way of getting current state. Would using wlc set_sleep approach be preferable?. Sure, here's the one for the same PID\nStack trace of thread 5131:\n                #0  0x00007f6c72516990 n/a (amdgpu_dri.so)\n                #1  0x00007f6c7251ba0d n/a (amdgpu_dri.so)\n                #2  0x00007f6c7251c952 n/a (amdgpu_dri.so)\n                #3  0x00007f6c719b4d6c n/a (amdgpu_dri.so)\n                #4  0x00007f6c7195a493 n/a (amdgpu_dri.so)\n                #5  0x00007f6c71af4aee n/a (amdgpu_dri.so)\n                #6  0x00007f6c71af4d55 n/a (amdgpu_dri.so)\n                #7  0x00007f6c724a2647 n/a (amdgpu_dri.so)\n                #8  0x00007f6c724a03d3 n/a (amdgpu_dri.so)\n                #9  0x00007f6c7249df4f eglMakeCurrent (amdgpu_dri.so)\n                #10 0x00007f6c7d67b8c9 n/a (libwlc.so.0)\n                #11 0x00007f6c7d67a6fd n/a (libwlc.so.0)\n                #12 0x00007f6c7d66e044 n/a (libwlc.so.0)\n                #13 0x00007f6c7d66cba8 n/a (libwlc.so.0)\n                #14 0x00007f6c7d679b0d n/a (libwlc.so.0)\n                #15 0x00007f6c7d66bdfe n/a (libwlc.so.0)\n                #16 0x00007f6c7d68971c wlc_run (libwlc.so.0)\n                #17 0x0000000000408f4c main (sway)\n                #18 0x00007f6c7bd77291 __libc_start_main (libc.so.6)\n                #19 0x0000000000408fa9 _start (sway)\n. A similar trace from another try, with sway-git and wlc-git, rather than the community repos. All of crashes were SIGV:\nStack trace of thread 28869:\n                #0  0x00007f038b16e990 n/a (amdgpu_dri.so)\n                #1  0x00007f038b173a0d n/a (amdgpu_dri.so)\n                #2  0x00007f038b174952 n/a (amdgpu_dri.so)\n                #3  0x00007f038a60cd6c n/a (amdgpu_dri.so)\n                #4  0x00007f038a5b2493 n/a (amdgpu_dri.so)\n                #5  0x00007f038a74caee n/a (amdgpu_dri.so)\n                #6  0x00007f038a74cd55 n/a (amdgpu_dri.so)\n                #7  0x00007f038b0fa647 n/a (amdgpu_dri.so)\n                #8  0x00007f038b0f83d3 n/a (amdgpu_dri.so)\n                #9  0x00007f038b0f5f4f eglMakeCurrent (amdgpu_dri.so)\n                #10 0x00007f03962d2bd9 create_context (libwlc.so)\n                #11 0x00007f03962d6ae8 wlc_context (libwlc.so)\n                #12 0x00007f03962d4d14 add_output (libwlc.so)\n                #13 0x00007f03962cbeae wl_signal_emit (libwlc.so)\n                #14 0x00007f03962db60f activate_event.lto_priv.100 (libwlc.so)\n                #15 0x00007f03962e05ac wl_signal_emit (libwlc.so)\n                #16 0x00007f03962e0680 wlc_run (libwlc.so)\n                #17 0x0000000000408edd main (sway)\n                #18 0x00007f03949cf291 __libc_start_main (libc.so.6)\n                #19 0x0000000000408f7a _start (sway)\n. Sorry, here's the coredump file itself: core.sway.5131.zip\nIf it's a problem with the driver, could you point me in the right direction on how to proceed with the debugging? It's a reasonably new driver.\n. Fair enough. Thanks for the tips. I'll try and see what I can do.\nI doubt contacting AMD will yield any results, the only support Ubuntu officially.\n. You're right though, similar things happen with orbment. Calls to ?? or n/a in sway's case, in amdgpu_dri.so and then a crash when returning from libc.\n. Here's a full backtrace from gdb if anyone is interested: http://pastebin.com/pqrvDM0j\n. ",
    "airstep": "The question is how to make it possible? \nFor now I can advice to switch to tty(n) and it works by default - screen is going off by some time. Why I can't do this in wayland? \nMy tty(n) is also in KMS mode (like wayland)... \nSo how tty(n) can turn screen off, but wayland can't - if them both in KMS mode? \nWhat do you think?. I'm using wlc from ABS (ArchLinux) and just change 'Release' word to 'Upstream' - and menu shows as expected. But I found another issue with mouse pointer - that disapear when using with Visual Studio Code as an example. When I move from opened file place to folder tree it often hide mouse pointer... And I need to switch to other workspace and move mouse to make it visible again.\nMouse theme is: Pulse-Glass\nAlso, often - dialogs shows behind main window - example: chromium (even attach this file). And I need to resize dialogs manualy - can it be configurable?... And how to position dialogs to center of the screen to prevent random positions...\nMy configuration file in atach...\nconfig.txt\n. My wlc version is:  0.0.8-1\nBut I compiled it from ABS tree (ArchLinux) and make just one change in PKGBULD - replace 'Release' to 'Upstream' to prevent random menu hide (you can see in attach).\nPKGBUILD.txt. Log in attach with possible places where mouse can disappear\nlogs.txt\n. As an example log in attach. Describe situation: when I try to generate signed apk, dialog popups behind the main window with small size like in log. So I need to press $mod+R to resize it, but even sometimes it won't appear to front of screen...\nlogs.txt\n. Maybe it must be not floating view? \n03/30/17 10:51:11 - [container.c:335] Adding new view 5:8:Enter Master Password as a floating view. It also desappear in QtCreator studio (.... Why mouse even hide itself? In what kind of source or logic? I'm switching back to openbox - very annoying issue (also in other applications like qt creator, etc..). Really? I'm Investigate it... But I just wanna know direct points by creator or any open minds about this serious issue.\nBeside this source code is complicated and there is many places where issue can be or you know better how to fix this?\nAnd how you debug it? Just logging?. Annoying hide mouse issue... Interested in use only sway, but can't get it work smooth when mouse hides randomly.... I told you in more detailed way about this issue earlier. This one\nMaybe related from other users\nAnd other:\nDialogs shows behind main window\nCompose and keyboard custom keys\nSome kind of corrupted window - in java autocomplete\nEven more - I can help if understand correct development way - how you ussually debug it, run it. Maybe some kind of tests.... ",
    "flounders": "I see on the status issue for for wlroots (wlroots/#9) that DPMS is checked off. I also see that DPMS is an unaddressed bounty problem as well. In a general, overview type answer, given the support in wlroots what needs to happen to bring this to Sway? This question is coming from someone not too familiar with the project or Wayland compositors. If it's not too far beyond my skill set, I wouldn't mind working on this as I am able.. ",
    "beanaroo": "I have my i3 configuration up on github over here..\nI did not make a backup of the sway config, but will post as soon as I can.\n. interesting, I'll try again today.\n. @mikkeloscar After reinstalling Arch and sway, the status line is now vertically centered. The workspace indicators, however, are not. Unlike the screenshot you posted. This is obvious when a binding mode indicator is present, which is centered.\nI tested multiple fonts, sizes and heights just to be sure.\n. Spaces are generally input field separators. I don't think this is a sway problem. The script generating the image ${PATH} variable (which is a system variable name, by the way) is not escaping spaces correctly. It should be expanded to:\nHandling command 'output DP-2 bg \"/home/tajjada/Pictures/Wallpapers/wide/02\\ -\\ Antelope\\ Canyon\\ Sunrise.jpg\" fill'\n. ",
    "TheBits": "Title of Skype(R)(C)(TM) for example.\n. Title of Skype(R)(C)(TM) for example.\n. ",
    "cg9999": "Thanks @robotanarchy, it looks somehow related.\nI've debugged this a bit further:\nIt seems this consistently happens only when wlc is build as RelWithDebInfo (not in Debug).\nI also set WLC_DEBUG=xwm to get more data\nClicking menu first time, menu works:\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_CREATE_NOTIFY (4194411 : 1)\n[main.c:43] [wlc] -> Unpaired collisions (0)\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] XCB_MAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] -> Surface resource for x11 window (4194411) does not exist yet\n[main.c:43] [wlc] -> Paired collisions (0)\n[main.c:43] [wlc] -> Linked x11 window (4194411) to view (3) [159x50+253,66]\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\n[handlers.c:210] handle:3 type:3 state:0 parent:2 mask:0 (x:253 y:66 w:159 h:50) title:Xfce Terminal class:xfce4-terminal appid:(null)                                                                                                \n[handlers.c:272] Adding unmanaged window 0x159ff260 to 0x16131160\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\n[handlers.c:343] geometry request for 3 159x50 @ 253,66\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\nDismissing menu:\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_UNMAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_UNMAP_NOTIFY (4194411)\n[handlers.c:280] Destroying window 3\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\nClicking menu again, menu does not appear:\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] XCB_MAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] -> Surface resource for x11 window (0) does not exist yet\nSomething sets the win->id to 0...\n. Thanks @robotanarchy, it looks somehow related.\nI've debugged this a bit further:\nIt seems this consistently happens only when wlc is build as RelWithDebInfo (not in Debug).\nI also set WLC_DEBUG=xwm to get more data\nClicking menu first time, menu works:\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_CREATE_NOTIFY (4194411 : 1)\n[main.c:43] [wlc] -> Unpaired collisions (0)\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] XCB_MAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] -> Surface resource for x11 window (4194411) does not exist yet\n[main.c:43] [wlc] -> Paired collisions (0)\n[main.c:43] [wlc] -> Linked x11 window (4194411) to view (3) [159x50+253,66]\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\n[handlers.c:210] handle:3 type:3 state:0 parent:2 mask:0 (x:253 y:66 w:159 h:50) title:Xfce Terminal class:xfce4-terminal appid:(null)                                                                                                \n[handlers.c:272] Adding unmanaged window 0x159ff260 to 0x16131160\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\n[handlers.c:343] geometry request for 3 159x50 @ 253,66\n[main.c:43] [wlc] -> Configure x11 window (4194411) 159x50+253,66\nDismissing menu:\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_UNMAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_UNMAP_NOTIFY (4194411)\n[handlers.c:280] Destroying window 3\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\nClicking menu again, menu does not appear:\n[debug_log.c:95] Setting focus to 0x15861d80:2 (VIEW 'Terminal')\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194308)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] XCB_MAP_NOTIFY (4194411)\n[main.c:43] [wlc] XCB_CLIENT_MESSAGE\n[main.c:43] [wlc] -> Surface resource for x11 window (0) does not exist yet\nSomething sets the win->id to 0...\n. The one called \"free\" looks to be similar to https://github.com/Cloudef/wlc/issues/146\nBut that one was supposed to be fixed since you have wlc 2a9a7d0.\nMaybe it's not complete fix yet\n. I have also this issue, but only when launching sway through sddm.\nIf I launch sway from VT command line, everything seems to be scaled correctly.\nAny ideas what could cause the different behaviour?\nThe .desktop file has nothing special and the launcher script simply has the same command line that works when launched manually (QT_WAYLAND_DISABLE_WINDOWDECORATION=1 XKB_DEFAULT_LAYOUT=fi sway). @johanhelsing: Makes sense, and I can confirm that now with QT 5.12  the fonts are scaled similarly to X with sway/wayland session.. @stransky new bug filled here #3506 since this only seems to happen under sway. Not sure if firefox or sway is to blame though.. Debug log during crash:\nsway.crash.log\nNote: there are two firefoxes running, X11 ff on workspace2 and wayland ff on workspace3.\nThe wayland ff update caused the crash. Unfortunately this seems to still happen sometimes, despite the workaround.\nThis time child->view->container was invalid pointer, but not null.\nAny idea where these null and invalid pointer values might be coming from?\n(gdb) print *child->view\n$5 = {type = (unknown: 2944062624), impl = 0x55bbaf7f5c80, container = 0x4000000c0, surface = 0x100000002, xdg_decoration = 0x37000000002, pid = 1, saved_x = 1.8673562960504278e-311, \n  saved_y = 2.121995791459338e-314, saved_width = 1, saved_height = 1, natural_width = 6744320, natural_height = 0, title_format = 0x1df000000004 <error: Cannot access memory at address 0x1df000000004>, \n  using_csd = 112, urgent = {tv_sec = 9, tv_nsec = 94264591767072}, allow_request_urgent = 225, urgent_timer = 0x0, saved_buffer = 0x400000000, saved_buffer_width = 0, saved_buffer_height = 0, geometry = {\n    x = 0, y = 0, width = 0, height = 0}, saved_geometry = {x = -1350634880, y = 21947, width = 0, height = 0}, destroying = false, executed_criteria = 0x0, {wlr_xdg_surface_v6 = 0x0, wlr_xdg_surface = 0x0, \n    wlr_xwayland_surface = 0x0, wlr_wl_shell_surface = 0x0}, events = {unmap = {listener_list = {prev = 0x0, next = 0x0}}}, surface_new_subsurface = {link = {prev = 0x0, next = 0x0}, notify = 0x0}}\n(gdb) print *child->view->container \nCannot access memory at address 0x4000000c0. Backtrace: btfull.txt\n. WAYLAND_DEBUG=client firefox log:\nclientdebug.zip\n. I'll close this as it seems to be fixed now.\nI believe it may have been related to  #3368\nThanks for fixing!. I ran 15 self update cycles without issues. As this crash is hard to reproduce, it's not a proof it's completely fixed, but it's looking good and I don't see any regressions.. ",
    "codebam": "Can confirm, same thing with GIMP as well\n. ",
    "scarejar": "This problem seems not only limited to GTk applications but qt applications too.\n. ",
    "tasn": "@scarejar, I've seen it in VirtualBox, which is a Qt application, so can confirm. It really just happens everywhere for me.\n. You're correct. It's fixed. Maybe close this ticket?\n. I get this in many places in Firefox. The easiest to reproduce is the window that pops when you click on the toolbar icon of the extension \"uMatrix\". I've also seen it many times already in other places too, just can't remember where.\n. That's a hack, no the same. What if locking takes 10 seconds due to system\nload? Or fails?\nOn 27 Jun 2016 5:42 p.m., \"Tom\u00e1\u0161 \u010cech\" notifications@github.com wrote:\n\nIt behaves the same was as slock so it fits me. You could do something like\nswaylock & sleep 1; date\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/725#issuecomment-228802481, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe/AAGofrpsgFi6rKbPV8ek9P9m3xij2-89ks5qP_1vgaJpZM4I_RIN\n.\n. I've always been meaning to give i3 and wayland a proper go, so I thought I'd kill two birds with one stone. :)\n\nUnfortunately though, I've encountered a lot of bugs, mostly with xwayland, some with sway, and one with sway/gtk3 (gnome-calculator). I haven't gotten around to reporting them all, because still unsure what I'm supposed to report as I guess everything is still WIP.\n. @SirCmpwn, OK, will try to get around to reporting them.\nAs for gnome-calculator, yes, making it float fixes it. I wrote the tiling module for www.enlightenment.org so I'm all too familiar with these issues. When I wrote it, I only had X in mind, not sure about all of the Wayland equivalents, but I'm sure there are.\nI'd strongly advise against touching the default window rules. That is just an annoying cat and mouse game that will always be frustrating. The more correct approach in my POV (and what I did in Enlightenment) is to automatically float certain windows. If for example a window has a minimum/maximum size that you can't cater to (because of other minimum/maximum size constraints, for example), make it float, if a window is fixed size (like gnome-calculator), make it float, if a window is a dialog (there are a few classes in X, I forgot atm), make it float. You get the drill.\nThese are roughly the rules I put in the Enlightenment tiling module, don't allow tiling (force floating) if:\n1. min size == max size (in the relevant direction) and they are > 0. Though the more correct thing is to see if catering to both min and max size in both directions will violate constraints. This is essentially the gnome-calculator issue iirc.\n2. window requested to be centred (don't know if there's a wayland equivalent there).\n3. If the config option to tile dialogs is off and a window is a dialog or \"transient for\".\n4. If the window is fullscreen/maximized/iconic (minimized)/sticky\n5. If the window is ignored (like root window, bars and etc).\nI hope this helps.\n. @SirCmpwn, I checked with a colleague that works on Wayland, and unfortunately:\nMin/Max/Centred aren't standardised yet, I wonder though, should sway just support whatever people are doing already in different toolkits (if that even exists).\nWindows can have parents so that solves the dialog/transient for issue I guess? Or do parents have other meanings too.\nMaybe as a hack it's a good idea to have defaults now, but this feels so wrong, and once the gates open, you'll just start maintaining a massive list of such hacks for a million different scenarios. Not fun. :|\n. Indeed fixed with latest sway and wlc from git.\nIt wasn't a font issue, but something was properly broken.\n. Or the uMatrix (firefox extension) window that is poorly sized, accepts input in areas in doesn't render to and etc...\n. ",
    "nightmared": "You're right, the problem no longer appears in firefox (with the latest version of wlc and sway from github). Thanks a lot, it was very annoying. ;)\n. I can confirm this still behave as you described in the latest wlc+sway (github's ones).\nThis is how it looks like: \n\nThere is something weird with xprop (running xprop and clicking on the black windows returns properties of another window):\n$xprop\nWM_LOCALE_NAME(STRING) = \"en_US.utf8\"\nWM_CLASS(STRING) = \"st-256color\", \"st-256color\"\nWM_HINTS(WM_HINTS):\n                Client accepts input or input focus: True\nWM_NORMAL_HINTS(WM_SIZE_HINTS):\n                program specified size: 566 by 366\n                program specified resize increment: 7 by 15\n                program specified base size: 6 by 6\nWM_CLIENT_MACHINE(STRING) = \"localhost\"\n_NET_WM_NAME(UTF8_STRING) = \"tmux\"\nWM_NAME(UTF8_STRING) = \"tmux\"\n_NET_WM_PID(CARDINAL) = 1951\nWM_PROTOCOLS(ATOM): protocols  WM_DELETE_WINDOW\nWhile on the real windows:\n$xprop\n_NET_WM_USER_TIME(CARDINAL) = 5503022\n_NET_WM_SYNC_REQUEST_COUNTER(CARDINAL) = 12583000\nblah blah blah, logo stuff....\nXdndAware(ATOM) = BITMAP\n_MOTIF_DRAG_RECEIVER_INFO(_MOTIF_DRAG_RECEIVER_INFO) = 0x6c, 0x0, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x10, 0x0, 0x0, 0x0\n_NET_WM_NAME(UTF8_STRING) = \"Oracle VM VirtualBox Manager\"\nWM_CLIENT_LEADER(WINDOW): window id # 0xc00004\n_NET_WM_PID(CARDINAL) = 6508\n_NET_WM_WINDOW_TYPE(ATOM) = _NET_WM_WINDOW_TYPE_NORMAL\n_MOTIF_WM_HINTS(_MOTIF_WM_HINTS) = 0x3, 0x3e, 0x7e, 0x0, 0x0\nWM_PROTOCOLS(ATOM): protocols  WM_DELETE_WINDOW, WM_TAKE_FOCUS, _NET_WM_PING, _NET_WM_SYNC_REQUEST\nWM_NAME(STRING) = \"Oracle VM VirtualBox Manager\"\nWM_LOCALE_NAME(STRING) = \"en_US.utf8\"\nWM_CLASS(STRING) = \"VirtualBox\", \"VirtualBox\"\nWM_HINTS(WM_HINTS):\n                Client accepts input or input focus: True\n                Initial state is Normal State.\n                bitmap id # to use for icon: 0xc0000f\n                window id # of group leader: 0xc00004\nWM_NORMAL_HINTS(WM_SIZE_HINTS):\n                user specified location: 2, 38\n                program specified location: 2, 38\n                user specified size: 1916 by 1040\n                program specified size: 1916 by 1040\n                program specified minimum size: 225 by 209\n                window gravity: Static\nWM_CLIENT_MACHINE(STRING) = \"localhost\"\nWM_COMMAND(STRING) = { \"/usr/lib/virtualbox/VirtualBox\" }\nCorresponding debug log: debug.txt\n. I think it depends of the font used: on my side it works (I'm using DejaVu Sans Mono 8).\n\n. It doesn't seem well supported everywhere however:\n$ grep 'Setting focus to 0x1ce93a0' ~/.sway.log\n[debug_log.c:94] Setting focus to 0x1ce93a0:3 (VIEW 'ynet - _____, ___)\n[debug_log.c:94] Setting focus to 0x1ce93a0:3 (VIEW 'Commits _ SirCmpwn/sway )\nI run sway with the shell script \n```\n$ cat sw\n!/bin/sh\nexport XKB_DEFAULT_LAYOUT=fr\npulseaudio --start\nsway -d 2> ~/.sway.log\n```\nBut maybe it is my shell fault. I will check that.\n. ",
    "ceesco53": "These are my dropdown menu issues.\nexample1: Right click in xfce4-terminal and the menu does not work on hover, but cursor keys work.\nexample 2:Right click in xfce4-terminal and the menu does not work on hover, but cursor keys work.  Move mouse to another tile and back.  Menu works with mouse.\nexample3: Drop down main menu in virtualbox doesn't receive click.\nexample4: Right click menu in chromium doesn't receive click regardless of actions.\nI'm running latest wlc + sway git on arch.\n. I deleted all my environment overrides for GTK/GNOME/wayland from my .zshrc and all my dropdown menus are working as intended.  I'm not sure which one caused the problem or if it was upgrading my wlc/sway to the latest git commits today... \n. Fosspay sent.  Thank you.\n. ",
    "m1cr0man": "I have the exact same symptoms as @ceesco53, but I'm running sway 0.8-2 from the community repos with wlc 0.0.4-1\nThe right-click menus are definitely appearing now, unlike before I upgraded wlc, but similarly I can't navigate them with the mouse.\nSublime Text 3 and GIMP's drop down menus still only show once, and their right click menus are being weird in different ways (Sublime's always appears but mouse doesn't work, GIMP's appears once but mouse works)\nI don't mind this too much, tbh I use keyboard navigation for 99% of things anyway. Being able to see what I'm doing is good enough!\n. I have been having this issue for a while now. I reloaded my laptop this weekend (ArchLinux x64, Intel GPU if that makes a difference). I used wlc-git and sway-git from AUR, giving me versions 0.0.7-r5 and 0.10-rc1-59 (2016-10-30) respectively.\nI ran GIMP as a test, as it had huge problems with context menus and drop downs not appearing. It now works flawlessly :smile: I am going to blame the fact that I moved from the AUR package to the community version back when I started using sway, and probably didn't uninstall them right. I was very very careful with my package selection this time around, so if anyone wants to see my setup commands I'll happily share them.\n. ",
    "automat0n": "@VoidNoire I had the same issue. I swapped the repo version for the git version and that solved it.\n. It is a problem from wlc. If you install sway from arch repos, then install wlc-git from aur the issue is solved. Maybe some bisection can tell us which commit solved it.. Seems a good idea.. @Kinokoio your idea may be a bit too complex. After tackling it a bit I created this function which can help creating the error messages just as other types of messages:\n`int allocprint(char message, int lenght, int argc, char fmt, ...)  {\n    va_list ap;\n    char error;\n    int i, len;\nva_start(ap, fmt);\nerror = malloc(lenght);\n// Terminate process if allocation fails\nif( error == NULL)\n    raise(SIGKILL);\n// Create error string\nvsprintf(error, fmt, ap);\n*message = error;\nva_end(ap);\nreturn 0;\n\n}`\nIt can be done in fewer lines of code if we use vasprintf(). And, I still need a bit of help with the way we indicate an error occured during memory allocation.. ",
    "esphen": "Still seeing this on Firefox Gentoo with both stable 0.9 and  sway-9999 and wlc-9999. Has been present for a while, not a recent regression. Menus show once and not until a new window is created.\nbash\n$ sway -v\nsway version 0.10-rc1-11-gd2aba3c (2016-10-03, branch \"HEAD\")\nWhat is strange is that the menus seem to be behind the main window. If I click the hamburger menu and move the mouse to where the buttons are supposed to be, I see nothing, but I am able to click them to open windows and whatnot.\nPlease note that this works flawlessly on Fedora with sway and wlc from copr.\n. On Gentoo with sway-9999, include /etc/sway/conf.d/* does not work. include /etc/sway/config.d/* does work, however. Typo?. ",
    "jhalmen": "i confirm that switching to the git versions fixed the issue with menus and tooltips.\nstill had the problem with arch community builds sway 0.9-1 and wlc 0.0.6-1\n. no you read right the first time around, keyboard input is grabbed correctly.\ni will report it to wlc.\nthank you for answering so promptly :). should've seen that. thanks\nOn Sun, Feb 26, 2017 at 12:36 AM, Fabio Alessandro Locati \nnotifications@github.com wrote:\n\n@Fale commented on this pull request.\nIn swaylock/swaylock.1.txt\nhttps://github.com/SirCmpwn/sway/pull/1084#discussion_r103091464:\n\n-i, --image [:]::\n- Display the given image, optionally only on the given output.\n+ Display the given image, optionally only on the given output. This option\n+ and -i are mutually exclusive.\n\nyes, and @SirCmpwn https://github.com/SirCmpwn already fixed it in\nmaster\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/pull/1084#discussion_r103091464, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AViFHFU0zxGcgasaMhtPCgr2GAYhGMN7ks5rgLsEgaJpZM4MMEyx\n.\n. ok i think i narrowed it down. it's not quite what it appeared to be at first, but this has been consistent now.\nwhenever i use swaygrab when something is hidden in the scratchpad, sway crashes.\nif the scratchpad is shown (it doesn't even have to be the workspace i'm trying to capture) everything works fine. managed to reproduce in weston, so i guess it can't be sways fault. you can use the sway-wlroots-git package on arch linux to build from the current master. shouldn't -i here be -c ?. \n",
    "Ant59": "Updated to the sway-git package from the AUR which fixed the issue in Firefox. Still occurs in other applications such as Atom, where the drop down menus cease to work more than once. However I did notice that if the Atom window is floating, the menus show up fine, albeit in the wrong place.\n\u279c  ~ sway -v\nsway version 0.10-rc1-52-g47fd538 (2016-10-24, branch \"makepkg\")\n. ",
    "logankaser": "@onny Same versions as you, same issue on Void Linux.\n. ",
    "evbogue": "I just encountered this issue in Gimp while using the sway and wlc packages in Arch Linux. Upgrading to sway-git and wlc-git from AUR fixed the issue.. I just encountered this issue in Gimp while using the sway and wlc packages in Arch Linux. Upgrading to sway-git and wlc-git from AUR fixed the issue.. ",
    "101stArrow": "I know he's gonna create a new issue and i can repeat this there but the exact same thing happens to me, i will go into additional detail when he creates the new issue else I'll do it in a little bit. Likewise, can post my config if needed but doubt the issue arises because of it.\nWhat versions of wlc and sway you running? Not at my computer right now will post mine later. ",
    "rolfen": "I'm having an issue with the right click contextual menu in Firefox, the right click event seems to be fired when I press and when I release the button. The thing is, I'm using Weston, no wlc or sway.\nI saw the same bug in in sway.\nI often see issues with mis-aligned menus, and had a random issue with the menu appearing beneath the window (very useful...) but it seems to have gone away in the latest update.\nFirefox under Gnome(Wayland) seems to work well and not exhibit this promplem.\nAgain, this is not sway/wlc - but it might help.. OK. However I am not very familiar with the compilation process, and with compiling software in general.\nIt compiles without errors (there might have been warnings). I didn't find any tests.\nI used it for a while didn't run into any crash / lock-up or such.\nIs it reasonably safe to skip installing optional and recommended dependencies? Should I be worried about unforseen consequences?. I missed that part where it says that the instructions are community maintained.\nHowever a second opinion would still be welcome.. ",
    "wobbol": "@cg9999 I use chromium in sway too and the code edited is where one of the SIGSEGV's happened but, I know I makepkg'd everything today with debug and nostrip. So I'm not sure that is the root of the cause. I'll look at it in more depth though.\n. I saw that when trying to reproduce the behavior on one workspace but, in general use, I have not opened >4 windows per workspace and still get kicked out of sway.\nhere is the output asked for.\n(no more than 3 windows open per workspace)\nDo note that launching an exuberant number of terminals in wlc's example is fine.\n$ TERMINAL=\"st\" ./example\n[Ctrl + Enter] x 150\nEdit: Noticed I sniped too much. Added some md\n```\n[main.c:203] Starting sway version 0.3-19-g5be624c (2016-04-03, branch \"master\")\n...snip...\n[main.c:43] [wlc] -> Configure x11 window (23068673) 1354x692+4,36\n[handlers.c:343] geometry request for 11 724x436 @ 4,36\n[main.c:43] [wlc] -> Configure x11 window (23068673) 1354x692+4,36\n[main.c:43] [wlc] XCB_FOCUS_IN (23068673) [23068673]\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (23068673)\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (23068673)\n[handlers.c:343] geometry request for 11 1354x692 @ 4,36\n[main.c:43] [wlc] -> Configure x11 window (23068673) 1354x692+4,36\n[commands.c:3080] Handling command 'workspace 1'\n[commands.c:3005] find_handler(workspace) 0\n[workspace.c:300] Switching to workspace 0xf83730:1\n[debug_log.c:95] Setting focus to 0x10b24b0:2 (VIEW 'st')\n[debug_log.c:95] Arranging layout for 0xf9fcc0 (OUTPUT 'WLC-1')\n[layout.c:588] Arranging layout for 0xf9fcc0 WLC-1 1362.000000x732.000000+0.000000,0.000000\n[debug_log.c:95] Arranging layout for 0xf83730 (WORKSPACE '1')\n[layout.c:588] Arranging layout for 0xf83730 1 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '1' at 2.000000, 20.000000\n[layout.c:689] Arranging 0xf83730 horizontally\n[layout.c:692] Calculating arrangement for 0x10b24b0:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10b24b0 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x10b0e30 (WORKSPACE '2')\n[layout.c:588] Arranging layout for 0x10b0e30 2 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '2' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x10b0e30 horizontally\n[layout.c:692] Calculating arrangement for 0x10b17a0:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10b17a0 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x10b1920 (WORKSPACE '3')\n[layout.c:588] Arranging layout for 0x10b1920 3 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '3' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x10b1920 horizontally\n[layout.c:692] Calculating arrangement for 0x10fdb70:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10fdb70 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x10fe020 (WORKSPACE '4')\n[layout.c:588] Arranging layout for 0x10fe020 4 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '4' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x10fe020 horizontally\n[layout.c:692] Calculating arrangement for 0x10ff860:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10ff860 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x10ff4f0 (WORKSPACE '5')\n[layout.c:588] Arranging layout for 0x10ff4f0 5 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '5' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x10ff4f0 horizontally\n[layout.c:692] Calculating arrangement for 0x1100130:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x1100130 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x1101e30 (WORKSPACE '6')\n[layout.c:588] Arranging layout for 0x1101e30 6 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '6' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x1101e30 horizontally\n[layout.c:692] Calculating arrangement for 0x10b1630:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10b1630 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x1103c50 (WORKSPACE '7')\n[layout.c:588] Arranging layout for 0x1103c50 7 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '7' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x1103c50 horizontally\n[layout.c:692] Calculating arrangement for 0x10fd630:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x10fd630 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0xf8aa00 (WORKSPACE '8')\n[layout.c:588] Arranging layout for 0xf8aa00 8 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '8' at 2.000000, 20.000000\n[layout.c:689] Arranging 0xf8aa00 horizontally\n[layout.c:692] Calculating arrangement for 0xf8a5f0:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0xf8a5f0 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x1106350 (WORKSPACE '9')\n[layout.c:588] Arranging layout for 0x1106350 9 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '9' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x1106350 horizontally\n[layout.c:692] Calculating arrangement for 0x110e000:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x110e000 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\n[debug_log.c:95] Arranging layout for 0x110d400 (WORKSPACE '10')\n[layout.c:588] Arranging layout for 0x110d400 10 1358.000000x710.000000+2.000000,20.000000\n[layout.c:627] -> Found panel for this workspace: 1362x18, position: 0\n[layout.c:649] Arranging workspace '10' at 2.000000, 20.000000\n[layout.c:689] Arranging 0x110d400 horizontally\n[layout.c:692] Calculating arrangement for 0x110cc60:4 (will scale 1358.000000 by 1.000000)\n[layout.c:588] Arranging layout for 0x110cc60 st 1358.000000x710.000000+2.000000,20.000000\n[layout.c:659] Set view to 1358 x 710 @ 2, 20\nfocus:R      |(0x634460)(p:(nil)   )(f:0xf9fcc0)(h:-1)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)\n|focus:X     |(0xf9fcc0)(p:0x634460)(f:0xf83730)(h: 1)Type:op  |layout:-    |w:1362|h: 732|x:   0|y:   0|g: -1|vis:t|children:10|name:WLC-1\n|-focus:W    |(0xf83730)(p:0xf9fcc0)(f:0x10b24b0)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x10b24b0)(p:0xf83730)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:t|children: 0|name:st\n|-focus:X    |(0x10b0e30)(p:0xf9fcc0)(f:0x10b17a0)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:2\n|--focus:X   |(0x10b17a0)(p:0x10b0e30)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x10b1920)(p:0xf9fcc0)(f:0x10fdb70)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:3\n|--focus:X   |(0x10fdb70)(p:0x10b1920)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x10fe020)(p:0xf9fcc0)(f:0x10ff860)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:4\n|--focus:X   |(0x10ff860)(p:0x10fe020)(f:(nil)   )(h: 5)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x10ff4f0)(p:0xf9fcc0)(f:0x1100130)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:5\n|--focus:X   |(0x1100130)(p:0x10ff4f0)(f:(nil)   )(h: 6)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x1101e30)(p:0xf9fcc0)(f:0x10b1630)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:6\n|--focus:X   |(0x10b1630)(p:0x1101e30)(f:(nil)   )(h: 7)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x1103c50)(p:0xf9fcc0)(f:0x10fd630)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:7\n|--focus:X   |(0x10fd630)(p:0x1103c50)(f:(nil)   )(h: 8)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0xf8aa00)(p:0xf9fcc0)(f:0xf8a5f0)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:8\n|--focus:X   |(0xf8a5f0)(p:0xf8aa00)(f:(nil)   )(h: 9)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x1106350)(p:0xf9fcc0)(f:0x110e000)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:9\n|--focus:X   |(0x110e000)(p:0x1106350)(f:(nil)   )(h:10)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n|-focus:X    |(0x110d400)(p:0xf9fcc0)(f:0x110cc60)(h:-1)Type:ws  |layout:Horiz|w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 1|name:10\n|--focus:X   |(0x110cc60)(p:0x110d400)(f:(nil)   )(h:11)Type:view|layout:-    |w:1358|h: 710|x:   2|y:  20|g: -1|vis:f|children: 0|name:st\n[main.c:43] [wlc] XCB_FOCUS_OUT\n[main.c:43] [wlc] XCB_FOCUS_IN (4194305) [4194305]\n[main.c:43] [wlc] XCB_CONFIGURE_NOTIFY (4194305)\n[main.c:43] [wlc] XCB_PROPERTY_NOTIFY (4194305)\n[main.c:43] [wlc] -> Configure x11 window (4194305) 1354x692+4,36\n[main.c:43] [wlc] -> Configure x11 window (23068673) 1354x692+-1354,36\n[log.c:150] Error: Signal 11. Printing backtrace\nERROR: Unable to receive IPC response\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 616 requests (604 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 769 requests (757 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 617 requests (605 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 617 requests (605 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 608 requests (596 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 594 requests (582 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 596 requests (584 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 589 requests (577 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 607 requests (595 known processed) with 0 events remaining.\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":1\"\n      after 635 requests (605 known processed) with 0 events remaining.\n[main.c:43] [wlc] Parent exit (1324)\n```\n. With SirCmpwn/sway@9412dc7 and Cloudef/wlc@309ddb0 this issue is resolved.\nThanks for your time.\n. ",
    "DenialAdams": "I know this is delayed, but thanks very much @tajjada and @colemickens - really awesome work! I am super eager to come back to sway now that this is implemented.\n@SirCmpwn thanks for the great project in general :)\n(I'm @flandoo)\n. Unfortunately I don't have the knowledge to fix it, but it looks like it it is getting stuck in the while(true) loop at layout#268.\n. Works great now! Thanks\n. ",
    "michallepicki": "Thank you for the quick response. Installed it on a real system and works pretty well, apart from multi-monitor setup (but that may be a hardware/config thing, will look into that).\n. ",
    "concatime": "I met this issue today. Sad that VirtualBox doesn't support it.. Hey. While setting my $right to ', I came across this issue. Using bindcode solved this issue. I think it would be wise to add it into the wiki.. ~~Same on NixOS.~~\nEDIT: Solved.. For all people on NixOS wondering, sway should be running this way.. Is libcap still required now? Even for wlroots?. And how about sway?. Sorry, but not related to sway, rather kitty.\nhttps://github.com/kovidgoyal/kitty/issues/862. ",
    "majewsky": "FYI: There is a KMS driver in the works for VirtualBox [1]. As of kernel 4.13, it lives in the kernel's staging area [2]. Since there seems to be some active development going on over there, there is a certain chance that, in the near future, we can finally have Sway (or any other Wayland compositor, for that matter) on VirtualBox guests. (Disclaimer: I only follow kernel development via news outlets, so I don't have any insider information about the progress or technical details.)\n[1] https://www.phoronix.com/scan.php?page=news_item&px=VirtualBox-vboxvideo-Plans\n[2] https://github.com/torvalds/linux/tree/master/drivers/staging/vboxvideo. https://github.com/majewsky/system-configuration/blob/3e8bfc00dd62a2803ce77534931e1563688a3b0c/src/sway.cfg was installed as /etc/sway/config, and there was no ~/.config/sway.d/config.\nThe commit following that one implemented the workaround that I'm currently using: https://github.com/majewsky/system-configuration/commit/2a31e481eb8b5a93b9cb5e68555af2b4bf290104. ",
    "cecton": "Is it the same problem for Hyper-V? I also get \"Failed to init compositor\". ",
    "cl91": "Oops sorry I meant cont->border != 0. Fixed now.\n. Hmm this seems to have fixed the residual memory leak that I observed above. I'll update pull request. It does not.\n. Sorry I misunderstood that. Yeah you're right it's an noop. I'll remove it.\n. ",
    "janhieber": "OK, after a reboot and not changing anything the right screen (1080) looks OK. The left one is still blurry, I think its 1200 height scaled to 1080 an then send to display and there scaled to 1200 or smth like this.\nsway log: http://pastebin.com/RV9b3bq9\nfbset output:\n\nmode \"1920x1080\"\n    geometry 1920 1080 1920 1080 32\n    timings 0 0 0 0 0 0 0\n    accel true\n    rgba 8/16,8/8,8/0,0/0\nendmode\n\nIn TTY the scaling of the bigger screen is strange, some area hangs out of the screen left: http://a55i.imgup.net/IMG_2016044a9c.jpg\nIn sway there is no problem, complete screen is visible but blurry on left side: http://n54i.imgup.net/IMG_201604bebb.jpg\n. ",
    "alexfornuto": "Resolved by changing to libxcb-emwh-dev (no idea why searching Debian's repos for just emwh didn't find that), but another dependancy listed, libinput5, is missing. Assuming that libinput10 will work for the moment.\n. Resolved by changing to libxcb-emwh-dev (no idea why searching Debian's repos for just emwh didn't find that), but another dependancy listed, libinput5, is missing. Assuming that libinput10 will work for the moment.\n. ",
    "jarias": "Looks like this got fix by the latest release of wlc or the latest master of sway.\n. @SirCmpwn thanks for pointing to the FAQ page I guess I miss that one, just one question how come i3 doesn't have this issue, is it a X11 trick? Patching every app that have this issue doesn't seem like a manageable solution, also having a patch version GTK could also be a pain in the long run.\n. @ids1024 @stwa thanks I'll try that as soon as I get home. I'm closing the issue since it looks like is a known Java issue.\n. Same with libreoffice\nLinux Arch\nSway 0.5-2\nwlc 0.0.2-1\n\n. @SirCmpwn would test that out as soon as I can.\n. @SirCmpwn It work for the minimum size now at least its usable not great cause manual resize is till needed but at least I can resize it now, but for the libreoffice example still works the same way the dialog is not floated and not clickable either \n. @psgarsenal Thanks for the info, that was my guess, do you know if xwayland will have scaling support eventually that's a big show stopper for me at least, since I still use a lot of apps that don't support wayland yet. This is the only ticket I found https://bugs.freedesktop.org/show_bug.cgi?id=93315.\n. Having the same issue here let me know what information I can provide to help fix this.. [\n   {\n     \"id\": 1131743256,\n     \"name\": \"eDP-1\",\n     \"rect\": {\n       \"x\": 0,\n       \"y\": 0,\n       \"width\": 3840,\n       \"height\": 2160\n     },\n     \"visible\": true,\n     \"focused\": false,\n     \"active\": true,\n     \"primary\": false,\n     \"layout\": \"output\",\n     \"type\": \"output\",\n     \"current_workspace\": \"1 \uf268\",\n     \"scale\": 2\n   }\n ]\n. ",
    "jleclanche": "The usual arch flags, but I believe this is i686.\n. The usual arch flags, but I believe this is i686.\n. ",
    "michaelmrose": "You could specifically let multimedia keys through or you could add a flag to pass a given key through but it seems like it would be simultaneously much easier and more useful to have a locked mode that is applied when you lock the screen.\nThis is useful because\n- Its simpler and easier to implement as you just engage a mode upon locking the screen\n-  it keeps all your lock screen bindings together\n- it allows you to reuse bindings that may be bound otherwise for your locksceen where useful example\njkhl volume up down track previous next (for those without multimedia keys)\nspace toggle playback\nI'm sure there are a multitude of permutations that others may find useful which is why its much more useful to have a lockscreen mode than passing specific keys and simpler than a flag for every possible binding.\n. You could specifically let multimedia keys through or you could add a flag to pass a given key through but it seems like it would be simultaneously much easier and more useful to have a locked mode that is applied when you lock the screen.\nThis is useful because\n- Its simpler and easier to implement as you just engage a mode upon locking the screen\n-  it keeps all your lock screen bindings together\n- it allows you to reuse bindings that may be bound otherwise for your locksceen where useful example\njkhl volume up down track previous next (for those without multimedia keys)\nspace toggle playback\nI'm sure there are a multitude of permutations that others may find useful which is why its much more useful to have a lockscreen mode than passing specific keys and simpler than a flag for every possible binding.\n. @SirCmpwn I have several questions.\nDo normal keybindings work while locked?  That would seem to be a security issue so  I presume that only the bindings with --locked would be effective. Is that correct?\nHow would you ensure that it left the locked mode upon unlocking or would you just have to manually escape every time you unlocked your computer?  \nDoes sway have anything like hooks or events so you could say run this script upon lock unlock etc etc? \nWouldn't a locked mode as opposed to a locked modifier be easier to implement?\n. @SirCmpwn I have several questions.\nDo normal keybindings work while locked?  That would seem to be a security issue so  I presume that only the bindings with --locked would be effective. Is that correct?\nHow would you ensure that it left the locked mode upon unlocking or would you just have to manually escape every time you unlocked your computer?  \nDoes sway have anything like hooks or events so you could say run this script upon lock unlock etc etc? \nWouldn't a locked mode as opposed to a locked modifier be easier to implement?\n. I suppose I should just configure a vm to test sway.  One last question if I have a hotkey to open a terminal but swaylock is engaged what happens?\n. ",
    "aparcar": "What happened to his issue?. Am I right that this issue stop the mail client Evolution from running?\n\nFailed to initialize gtk+: Unable to initialize the Clutter backend: no available drivers found.\n. \n",
    "diegoviola": "The default one from /etc/sway/config copied to ~/.config/sway/config\n. Can you reproduce it?\n. Thanks.\n. ",
    "ids1024": "Other java programs, like the arduino ide, seem to be fairly broken in sway, though in different ways.\n. export _JAVA_AWT_WM_NONREPARENTING=1 seems to fix the problem.\n. With the latest git of wlc and sway, I seem to no longer have the first problem, but the second issue remains.\nEdit: It's hardly a major issue, but it is strange.\n. I have seen this behaior too (though not in firefox, which I don't use). Using mod4+shift+space to switch the window out of floating mode seems to resize it to something usable.\n. I have seen this behaior too (though not in firefox, which I don't use). Using mod4+shift+space to switch the window out of floating mode seems to resize it to something usable.\n. ",
    "stwa": "This is a known problem with non-re-parenting window managers:\nhttps://awesome.naquadah.org/wiki/Problems_with_Java#Impersonate_Another_Window_Manager\nwmname LG3D works for me.\n. ",
    "ricejamesh": "I tried both _JAVA_AWT_WM_NONREPARENTING=1 and wmname LG3D with neither one working.  Are there any further suggestions for fixing this?. 2018.2 did not fix it for me.  Bummer. I am testing against webstorm and the latest release is 2018.2, as of 22 July 2018 (2 days ago).  AFAIK, there are typically two methods of fixing this blank display issue, setting export _JAVA_AWT_WM_NONREPARENTING=1 and/or wmname LG3D.  But generally, it is reported that some of the java based applications have display issues in linux while using RDP (xrdp to fedora in my case).  \n(I'm not here for sway but rather the blank screen while using RDP to a linux box.)\nI am interested in knowing if there are any further solutions that may have emerged lately.  I'm not finding anything out there other than the two listed solutions, or moving away from xrdp.\nThanks!\nJim. @SirCmpwn What do you mean by, \"Investigate! Ask for help on IRC! Send a patch!\"?  Is that an auto-reply?  Cheers.. ",
    "mkubasz": "I have this issue too.. Yeap, new version fixed this issue. Now I'll be waiting for android studio emulator fix patch. Thanks.. ",
    "roaddan": "I have the same issue.\nI am using Microsoft remote desktop application (ver. 10.2.1) on Mac OS X Sierra to connect to my  Linux box which is a Debian 9 i686. \nMy Debian box (Debian 4.9.110-3+deb9u4 (2018-08-21) i686 GNU/Linux) is running Xrdp over Xvnc. Everything else seems to be working well except for arduino 1.8.1... \nAny idea ?  . ",
    "fabean": "The fix of _JAVA_AWT_WM_NONREPARENTING=1 in my /etc/profile worked for me with PHPStorm.. ",
    "eabarbosa": "@ricejamesh  ask @ sway on IRC and if possible send a patch! \n@fabean Thanks, that works on Eclipse`s menu! So works too: \n# If running trom tty1 start sway\n    if [ $(tty) = \"/dev/tty1\" ]; then\n    _JAVA_AWT_WM_NONREPARENTING=1 window manager.\n    sway\n    exit 0\n    fi. Id prefer fullscreen it!. ",
    "c-edw": "Unfortunately still experiencing this issue on master as of Sway 1.0-beta.. Just found a bug that I think might be related to this. If you scroll on the bar using a mouse, it will reach a 'boundary' and stop. However, if you use a touchpad to scroll, it will wrap back around (though you have to scroll quite fast). @emersion Please confirm whether this would be fixed with this change.. I was recently looking into seccomp, could it be useful here? Though, it's a Linux kernel feature, so BSD users will miss out.. @emersion It is certainly used in sandboxes, but it seems it can be used a process to restrict it's own capabilities.. I'll give it a go.. @RyanDwyer I discovered this bug using swaylock version  (2018-07-26, branch \"\"), so indeed it's pretty old. Currently trying to get swaylock on master to run, getting undefined symbol errors. Closing since you have verified this has been fixed.. I thought that might be the case. Perhaps the message could be truncated instead?. The text will be truncated to 2048 chars. Then at least you'd be able to see a portion of the message, no? . I have reduced the truncation limit to 128, since 2048 characters would probably never fit on the screen for anyone. It will append ... if the message is over 128 characters.. Able to reproduce, verbose Sway log ~~here~~. Don't think there's a coredump.. There's no coredump for me. It does segfault but the latest entry in coredumpctl was yesterday (bearing in mind I just triggered it).. This has occurred with KeePassXC, dmenu, and  ~~gedit~~ for me, so Qt and GTK respectively. Haven't had anything like this occur with Chromium, though (something to do with the GTK theme in Settings, maybe). Unfortunately my system just crashed while I had the bug present, but I am verbosely logging to a file now, and I'll keep an eye out for when it happens next.. I've done some testing, I think a configuration reload ($mod+Shift+C) reliably produces this bug. Doing it ~~just once~~ will cause the applications to use what looks like a 2x scale factor. I have also removed my own Sway config to confirm that is not the cause.\nLog ~~here~~, using stock config. Required a few config reloads to trigger the bug.. I don't think either scenarios require hotplugging.. Just noticed that this also happens any time an external monitor is plugged/unplugged. The scale factor doubles.. I haven't been able to find the cause/commit of this. git bisect didn't work out so well because I would have to find the correct version of wlroots for each commit. The only thing I know is that version swaylock version  (2018-07-26, branch \"\") of swaylock works correctly.. Alright, so it looks like the bug goes all the way back to 0.15.2, or it's on wlroots... not entirely sure. I discovered along the way that \n./build/swaylock/swaylock -i ~/Downloads/Sway_Tree.png -s center \nworks, but \n./build/swaylock/swaylock -s center -i ~/Downloads/Sway_Tree.png \ndoesn't.. Investigating further, it seems position left doesn't work either. I believed it worked correctly because it creates a vertical bar. However, the workspace indicators will still display horizontally and be hidden behind applications.. Hmm, I thought they were the same, but nano also refuses the second path. Plus, I checked the code and it's just calling fopen so there isn't room for anything to go wrong. Will have to brush up on my UNIX :+1: Thanks!. Sorry, I'm tired. It's obvious why that didn't work.. I have also experienced this bug. My terminal emulator of choice is Terminator. I produce the bug by doing the following:\n1. Start Sway\n2. Enter workspace 1\n3. Open terminal emulator (Terminator in my case)\n4. Launch gedit (or another affected application) through the terminal\n5. Move the gedit window to workspace 2\n6. Send SIGINT within the terminal (Ctrl+C)\n7. Observe that workspace 2 is focused and is blank\n8. Observe that swaybar incorrectly displays still being in workspace 1 despite the blank workspace 2 being focused\n9. Enter workspace 1\n10. Observe that the terminal is there\nI have also been able to produce this with urxvt.. Some info about the window Class window created with Ctrl + N in CLion:\njson\n{\n   \"id\": 43,\n   \"name\": \"win4\",\n   \"rect\": {\n     \"x\": 960,\n     \"y\": 1080,\n     \"width\": 960,\n     \"height\": 1057\n   },\n   \"focused\": false,\n   \"focus\": [\n   ],\n   \"border\": \"pixel\",\n   \"current_border_width\": 2,\n   \"layout\": \"none\",\n   \"orientation\": \"none\",\n   \"percent\": 0.5,\n   \"window_rect\": {\n     \"x\": 2,\n     \"y\": 2,\n     \"width\": 956,\n     \"height\": 1053\n   },\n   \"deco_rect\": {\n     \"x\": 0,\n     \"y\": 0,\n     \"width\": 0,\n     \"height\": 0\n   },\n   \"geometry\": {\n     \"x\": 0,\n     \"y\": 0,\n     \"width\": 672,\n     \"height\": 60\n   },\n   \"window\": 14680218,\n   \"urgent\": false,\n   \"floating_nodes\": [\n   ],\n   \"sticky\": false,\n   \"type\": \"con\",\n   \"fullscreen_mode\": 0,\n   \"pid\": 10518,\n   \"app_id\": null,\n   \"marks\": [\n   ],\n   \"window_properties\": {\n     \"class\": \"jetbrains-clion\",\n     \"instance\": \"sun-awt-X11-XWindowPeer\",\n     \"title\": \"win4\",\n     \"transient_for\": 14680127\n   },\n   \"nodes\": [\n   ]\n }\nScreenshot of the window (right):\n\nRelated: #3106. Some info about the window Class window created with Ctrl + N in CLion:\njson\n{\n   \"id\": 43,\n   \"name\": \"win4\",\n   \"rect\": {\n     \"x\": 960,\n     \"y\": 1080,\n     \"width\": 960,\n     \"height\": 1057\n   },\n   \"focused\": false,\n   \"focus\": [\n   ],\n   \"border\": \"pixel\",\n   \"current_border_width\": 2,\n   \"layout\": \"none\",\n   \"orientation\": \"none\",\n   \"percent\": 0.5,\n   \"window_rect\": {\n     \"x\": 2,\n     \"y\": 2,\n     \"width\": 956,\n     \"height\": 1053\n   },\n   \"deco_rect\": {\n     \"x\": 0,\n     \"y\": 0,\n     \"width\": 0,\n     \"height\": 0\n   },\n   \"geometry\": {\n     \"x\": 0,\n     \"y\": 0,\n     \"width\": 672,\n     \"height\": 60\n   },\n   \"window\": 14680218,\n   \"urgent\": false,\n   \"floating_nodes\": [\n   ],\n   \"sticky\": false,\n   \"type\": \"con\",\n   \"fullscreen_mode\": 0,\n   \"pid\": 10518,\n   \"app_id\": null,\n   \"marks\": [\n   ],\n   \"window_properties\": {\n     \"class\": \"jetbrains-clion\",\n     \"instance\": \"sun-awt-X11-XWindowPeer\",\n     \"title\": \"win4\",\n     \"transient_for\": 14680127\n   },\n   \"nodes\": [\n   ]\n }\nScreenshot of the window (right):\n\nRelated: #3106. Is it an i3wm thing? Because this behaviour seems odd to me. If you have focus_follows_mouse enabled then I would expect the window under the mouse to be focused at all times. Especially because it won't refocus the window you're hovering over unless you flick it over swaybar or another window.. Is it an i3wm thing? Because this behaviour seems odd to me. If you have focus_follows_mouse enabled then I would expect the window under the mouse to be focused at all times. Especially because it won't refocus the window you're hovering over unless you flick it over swaybar or another window.. If it's been brought in for compatibility then I can't really argue, but this has an impact on a mouse-based workflow. I've found myself having to flick my cursor over swaybar several times to refocus a window, because I don't use $mod+[arrow keys]. I would like to propose that the window will be focused upon moving the cursor, which should preserve both keyboard and mouse based workflows.. If it's been brought in for compatibility then I can't really argue, but this has an impact on a mouse-based workflow. I've found myself having to flick my cursor over swaybar several times to refocus a window, because I don't use $mod+[arrow keys]. I would like to propose that the window will be focused upon moving the cursor, which should preserve both keyboard and mouse based workflows.. Something like focus_follows_mouse always? Could I have some guidance on where to look to implement this please?. Something like focus_follows_mouse always? Could I have some guidance on where to look to implement this please?. Yes, it is.. Yes, it is.. @RedSoxFan FYI this is still reproducible after your patch.\n\n. @RedSoxFan FYI this is still reproducible after your patch.\n\n. I am using output * bg ... in my config but can't reproduce this. Could you tell us the exact steps to reproduce this? Your configuration file would also help.. I am using output * bg ... in my config but can't reproduce this. Could you tell us the exact steps to reproduce this? Your configuration file would also help.. @emersion Are you able to confirm whether this is a Sway/wlroots bug? I've seen quite a few JetBrains-related issues raised in the past, but given this bug occurs with multi-layered floating windows, I think it could be Sway.. @emersion Are you able to confirm whether this is a Sway/wlroots bug? I've seen quite a few JetBrains-related issues raised in the past, but given this bug occurs with multi-layered floating windows, I think it could be Sway.. Agh, it's a mistake on my part. The third floating window is actually a modal designed to prevent you interacting with anything else. I think it confused me because usually modals won't be hidden by clicking on something else - is there anything we can do on Sway/wlroots side to fix this?\nHowever, I did still test it on i3wm and noticed a certain graphical bug didn't occur as it does with Sway. See below (there's a white/blackish border around the loading splash which isn't supposed to be there).\n\n. Agh, it's a mistake on my part. The third floating window is actually a modal designed to prevent you interacting with anything else. I think it confused me because usually modals won't be hidden by clicking on something else - is there anything we can do on Sway/wlroots side to fix this?\nHowever, I did still test it on i3wm and noticed a certain graphical bug didn't occur as it does with Sway. See below (there's a white/blackish border around the loading splash which isn't supposed to be there).\n\n. >Yeah, we can prevent windows from being re-stacked under their parent. There's already an issue about this iirc.\nAlright, great.\n\nProbably a window size issue specific to X11.\n\nI didn't phrase it very well. The graphical bug did not occur on i3wm, but it does on Sway.\n. >Yeah, we can prevent windows from being re-stacked under their parent. There's already an issue about this iirc.\nAlright, great.\n\nProbably a window size issue specific to X11.\n\nI didn't phrase it very well. The graphical bug did not occur on i3wm, but it does on Sway.\n. I will close this and raise a separate issue then. Thanks.. I will close this and raise a separate issue then. Thanks.. I will try to implement strip_workspace_name.\nAm I correct in thinking that having strip_workspace_numbers and strip_workspace_name enabled is invalid?. I will try to implement strip_workspace_name.\nAm I correct in thinking that having strip_workspace_numbers and strip_workspace_name enabled is invalid?. I'm almost certain that I have put a strip_workspace_name everywhere necessary, but it's still invalid when the config loads.\n2018-11-06 20:18:29 - [sway/config.c:655] Read line 212:     strip_workspace_numbers yes\n2018-11-06 20:18:29 - [sway/commands.c:374] handling config command 'bar strip_workspace_numbers yes'\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-11-06 20:18:29 - [sway/commands.c:409] Subcommand: strip_workspace_numbers yes\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-11-06 20:18:29 - [sway/commands/bar/strip_workspace_numbers.c:23] Stripping workspace numbers on bar: bar-0\n2018-11-06 20:18:29 - [sway/config.c:655] Read line 213:     strip_workspace_name yes\n2018-11-06 20:18:29 - [sway/commands.c:374] handling config command 'bar strip_workspace_name yes'\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_name)\n2018-11-06 20:18:29 - [sway/commands.c:409] Subcommand: strip_workspace_name yes\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_name)\n2018-11-06 20:18:29 - [sway/config.c:708] Error on line 213 'strip_workspace_name yes': Unknown/invalid command (/home/cedwards/.config/sway/config)\nIt fails to find the handler, even though I've defined it:\n...\n{ \"strip_workspace_numbers\", bar_cmd_strip_workspace_numbers },\n{ \"strip_workspace_name\", bar_cmd_strip_workspace_name },\n...\nI've also tried an rm -rf build since I had to add a file to meson.build. No luck.\n. I'm almost certain that I have put a strip_workspace_name everywhere necessary, but it's still invalid when the config loads.\n2018-11-06 20:18:29 - [sway/config.c:655] Read line 212:     strip_workspace_numbers yes\n2018-11-06 20:18:29 - [sway/commands.c:374] handling config command 'bar strip_workspace_numbers yes'\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-11-06 20:18:29 - [sway/commands.c:409] Subcommand: strip_workspace_numbers yes\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-11-06 20:18:29 - [sway/commands/bar/strip_workspace_numbers.c:23] Stripping workspace numbers on bar: bar-0\n2018-11-06 20:18:29 - [sway/config.c:655] Read line 213:     strip_workspace_name yes\n2018-11-06 20:18:29 - [sway/commands.c:374] handling config command 'bar strip_workspace_name yes'\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_name)\n2018-11-06 20:18:29 - [sway/commands.c:409] Subcommand: strip_workspace_name yes\n2018-11-06 20:18:29 - [sway/commands.c:156] find_handler(strip_workspace_name)\n2018-11-06 20:18:29 - [sway/config.c:708] Error on line 213 'strip_workspace_name yes': Unknown/invalid command (/home/cedwards/.config/sway/config)\nIt fails to find the handler, even though I've defined it:\n...\n{ \"strip_workspace_numbers\", bar_cmd_strip_workspace_numbers },\n{ \"strip_workspace_name\", bar_cmd_strip_workspace_name },\n...\nI've also tried an rm -rf build since I had to add a file to meson.build. No luck.\n. Can't believe I missed that, thanks a lot.. Can't believe I missed that, thanks a lot.. I have committed another solution. I'm not sure how picky i3 is about the [n]:[NAME] formatting, currently the code will just split by the : character and use the substrings. . I have committed another solution. I'm not sure how picky i3 is about the [n]:[NAME] formatting, currently the code will just split by the : character and use the substrings. . Let me know before you merge and I will do a squash.. Let me know before you merge and I will do a squash.. This commit fixes all the edge cases I'm aware of. I noticed some unrelated behaviour with custom workspace names - if you rename a workspace so that the num becomes 2 (swaymsg rename workspace \"1\" to \"2\"), using $mod+2 won't switch to that workspace. Is this intended?\nEDIT - I've squashed the commits together, but the relevant changes are in ipc.c.. This commit fixes all the edge cases I'm aware of. I noticed some unrelated behaviour with custom workspace names - if you rename a workspace so that the num becomes 2 (swaymsg rename workspace \"1\" to \"2\"), using $mod+2 won't switch to that workspace. Is this intended?\nEDIT - I've squashed the commits together, but the relevant changes are in ipc.c.. @RyanDwyer I think this commit should do it the way you suggested.. @RyanDwyer I think this commit should do it the way you suggested.. I have managed to get strip_workspace_numbers to work with/without a semicolon according to i3's behaviour, but having issues with strip_workspace_name. \nThere's some kind of memory bug I can't figure out. I'm allocating 2 bytes, one for the first character and one for the null terminator, and then calling strncat to copy the first character, but something is going wrong here. . I have managed to get strip_workspace_numbers to work with/without a semicolon according to i3's behaviour, but having issues with strip_workspace_name. \nThere's some kind of memory bug I can't figure out. I'm allocating 2 bytes, one for the first character and one for the null terminator, and then calling strncat to copy the first character, but something is going wrong here. . Ready for review again, it has the same behaviour as i3 AFAIK from testing.. Ready for review again, it has the same behaviour as i3 AFAIK from testing.. I have done some testing and these cases now work:\n- strip_workspace_name 1234: names the workspace 1234\n- strip_workspace_numbers :abcd names the workspace ~~abcd~~ :abcd\n- strip_workspace_name 1234:abcd names the workspace 1234\n- strip_workspace_numbers 1234:abcd names the workspace abcd\n- strip_workspace_name 1234abcd names the workspace 1234\n- strip_workspace_numbers 1234abcd names the workspace abcd. @ddevault It looks like something has gone wrong with the CI.. It works well. I am concerned though that needing to specify -Dsysconfdir will complicate the process for developers. Shouldn't this be the default, and if not, why?. It works well. I am concerned though that needing to specify -Dsysconfdir will complicate the process for developers. Shouldn't this be the default, and if not, why?. Closing since the issue has been resolved, though I would like to continue this discussion.. Closing since the issue has been resolved, though I would like to continue this discussion.. I've also been experiencing issues with a Rust library for displaying framebuffers (here). It looks like Sway is forcing the window be a specific size, and when the framebuffer is too small to fill it, the code segfaults. The developer of the library has confirmed this works correctly on i3wm because the window floats instead of tiling.. I've also been experiencing issues with a Rust library for displaying framebuffers (here). It looks like Sway is forcing the window be a specific size, and when the framebuffer is too small to fill it, the code segfaults. The developer of the library has confirmed this works correctly on i3wm because the window floats instead of tiling.. feh is having trouble displaying images properly in Sway. See https://github.com/derf/feh/issues/439. This doesn't happen on i3. @emersion Is this a separate issue? I don't want this to become a dumping ground for unrelated bugs.\n\n. feh is having trouble displaying images properly in Sway. See https://github.com/derf/feh/issues/439. This doesn't happen on i3. @emersion Is this a separate issue? I don't want this to become a dumping ground for unrelated bugs.\n\n. @emersion Could this be added to the 1.0 milestone? I think these apps need to work properly for the 1.0 release, especially feh. I'm willing to look into the issue if you can give me some suggestions on what might the cause might be.. @emersion Could this be added to the 1.0 milestone? I think these apps need to work properly for the 1.0 release, especially feh. I'm willing to look into the issue if you can give me some suggestions on what might the cause might be.. Thanks, I'll use imv in the meantime. To be clear, I'm only talking about the feh display issue here, not the JetBrains one. In the case of feh, it's actually made it unusable for me, it's not just cosmetic. Since it's a fairly popular non-proprietary piece of software, I feel that it should work properly for 1.0.. Thanks, I'll use imv in the meantime. To be clear, I'm only talking about the feh display issue here, not the JetBrains one. In the case of feh, it's actually made it unusable for me, it's not just cosmetic. Since it's a fairly popular non-proprietary piece of software, I feel that it should work properly for 1.0.. I'm willing to look into the issue if you can give me some suggestions on what might the cause might be.\nOtherwise, I'm clueless.. I'm willing to look into the issue if you can give me some suggestions on what might the cause might be.\nOtherwise, I'm clueless.. I've been using imv for a while. This bug also seems to be present when using imv with the -W flag.. I've been using imv for a while. This bug also seems to be present when using imv with the -W flag.. I left it there because it seemed like yes should yield false originally:\nc\n!strcasecmp(argv[0], \"yes\");. I've just noticed a few commits that address double-frees caused by this PR:\n- 828060af73dd2f3138ad9d1bf743f57dd567723c\n- eb527ac01ad7e3255b757d620bc678a834a3958a\n- 4e8bf5b328d8225f8f41a8b9d5229bd5f3775270\nI didn't have a good enough understanding of C when I sent this in (and still don't). I'm thinking perhaps this should be reverted.. May also be the cause of #3545.. @vivien There is a separate issue open for the system freezes: #3442. . As mentioned on the related issue, I started getting locked out of my computer because PAM couldn't see the policy file. It doesn't look in /usr/local/etc/pam.d. One way or another, the policy file needs to be present in /etc/pam.d, whether that's by copying it there or symlinking it there.\nI am open to any other suggestions.. @emersion The setup differed a bit for me, which is probably why I struggled initially compiling Sway. I would be willing to write this page and make sure it works between different distros. But - I think it's quite a pain to manually copy the PAM policy to /etc/pam.d. . @progandy Would you be able to take up this issue (#3096)? I'm quite confused as to what needs doing, but I can see you already have a good idea.. Closing in favor of #3178. Thanks @progandy.. Just a quick reminder to remove \n```\nWhere are my tray icons?\nSwaybar does not currently support tray icons.\n``\nfrom [here](https://github.com/swaywm/sway/wiki) upon merge.. Can you test if this still happens (without that flag)? I gave it go a go myself, seems to work okay.. Perhaps you could send a PR to emphasise the need for handling allocation failures in CONTRIBUTING.md?. Custom workspace names could be disabled when the bar is vertical so that only single digit numbers are displayed, but I don't think that's a good solution.\nAny thoughts @ddevault?. These patches are great @kennylevinsen. I checked out yourkl-vertical-swaybar-counterrotated` branch. The position of text on the bar seems to be slightly off.\n\nI have to say, it will be a struggle to read any meaningful info from the bar like this. That's alright though, there's other ways of looking at the date etc.. What is meant by this, what does it entail? I have been using fcitx for a while now for input methods.. Fixing some bugs with this currently.. Do you mean that static arrays should be OK to use as long as the size is fixed? Because that makes sense to me, but the -Wvla flag still raises an error despite ipc_header_size being const.. Since ipc_header_size is defined as sizeof(ipc_magic)+8, I don't know how how it would be declared using macros. Relying on somebody to recalculate ipc_header_size after changing ipc_magic isn't a good idea of course.\nIn my novice opinion, I think there's nothing wrong with the current solution.. Ah okay, I didn't think sizeof could be called in that context. Good to know, thanks.. @emersion Nice job spotting those bugs.\n@ianyfan While it's true that sizeof(char) will always be 1, I think it conveys more meaning to developers. \nc\nchar *command = malloc(sizeof(char) * (size + 1));\ndescribes that we're allocating size + 1 chars.\nc\nchar *command = malloc(size + 1);\ndescribes we're allocating size + 1 bytes.. @ascent12 That's a shame, it really looks clearer to me. I think it would also reduce the risk of somebody coming along and changing the type, but forgetting to change the allocated size. Maybe that's something you guys already watch out for.. I've finally got a repro on this. I'm working on something else at the moment so I'll come back with the perf later.\n\n\nModify your Sway config such that a specific workspace will display on an external display when plugged in, for example:\noutput DP-1 pos 0 0 res 1920x1080\noutput eDP-1 pos 0 1080 res 1920x1080\nworkspace 1 output eDP-1\nworkspace 2 output DP-1\nwhere DP-1 is my external monitor.\n\n\nStart Sway without the external monitor plugged in\n\nOpen two (issue does not occur with just one) tiling windows (st, in my case) in the workspace specified to show on the external display, in my case workspace 2\nConnect the external display\nObserve that once the workspace moves to the external display, the system freezes. @emersion I have tried perf record sway, but the perf.data file ends up being empty. I guess it doesn't get a chance to flush to disk before the system freezes (or before I have to force shutdown by holding the power button).. SysRq has unfortunately never worked for me. I doubt that this freezing is a kernel issue. I'll have to get creative with this, thanks for the tips.. I have retested this and can't produce the bug with the steps above anymore. It may have been inadvertently fixed. If it happens again, I will reopen this issue.. @emersion Biscected back to fe3f4882edf81d4e72f77948a99cfa94af7998f8.. Anomaly is causing CI build failure. Code compiles.\n\n...\n(1/5) Probing GDK-Pixbuf loader modules...\n(2/5) Reloading system manager configuration...\n(3/5) Reloading device manager configuration...\n(4/5) Arming ConditionNeedsUpdate...\n(5/5) Updating the MIME type database...\n:: Searching databases for updates...\n:: Searching AUR for updates...\nGet https://aur.archlinux.org/rpc.php?arg%5B%5D=yay-bin&type=info&v=5: dial tcp 5.9.250.164:443: i/o timeout. Yep, just force pushed.. In what cases do allocation failures need to be handled? Is it always? If that's the case, is that something that wasn't enforced in the past but is now?. I haven't seen this documented anywhere so I'll add it to the wiki.. If you want a workaround, I recommend fcitx.. I don't know whether any members of the Sway organisation use input methods. I think @ddevault writes Japanese so maybe he uses it, or maybe an alternative I'm not aware of.\nAll I can say is that fcitx seems to work great, and apparently is more modern than ibus anyway. Of course, this issue should still be looked into regardless.. Do you mean the XPS 15 9570? I have the XPS 13 9370 and haven't had any issues with scrolling, so it's unlikely to be a hardware issue. My config also looks similar to yours:\ninput 1739:30383:DELL07E6:00_06CB:76AF_Touchpad {\n    dwt enabled\n    tap enabled\n    natural_scroll enabled\n    middle_emulation enabled\n}\nMight be worth adding your kernel version/libinput package version. I think there's been some work going on to do with high-res scrolling which might have something to do with your issue.. It's absolutely smooth. I'm using Chromium, what browser are you using? Have you checked your browser settings? Is the behaviour only in the browser or in other apps too (e.g gedit)?. Chromium 71.0.3578.98. 1080p screen. Since the issue isn't specific to your browser, I'm out of ideas. Just to check, what is the output of swaymsg -t get_inputs?. Applications scroll perfectly for me, regardless of whether they are running on native Wayland or through XWayland. Have you configured the environment variables found here?. >it's sending key presses as touchpad scroll events\nWow, that's weird. I wonder why it does that.\nAs for GDK_BACKEND=wayland, I have it commented out in my ~/.profile for the reasons you described. \nI just remembered that I have this kernel parameter set. psmouse.synaptics_intertouch=1 apparently resolves some of the libinput issues on the XPS lineup so I've always had it set. Maybe you could give it a go, but given what you just said, it's probably something else.. I'm able to build Sway on both Rawhide and 29. Have a look here https://github.com/swaywm/sway/wiki/Development-Setup.. addendum: I guess I would've ideally added that to the translations too, but there's already discrepancies which make the READMEs unreliable to follow. As long as it's noted somewhere, I'm happy.. SVG rendering would be really quite nice. I don't think many DEs/WMs support that (if any), and I don't think it would be too difficult to implement.\nI'm sure you've checked in assets/ already. The logo SVG is in there, but the gradient background isn't.. Actually, swaybg already supports SVGs, I just tried it. . @emersion Would it be better to open a new issue for more segfaults like this, or reopen this issue and report them here? I don't want to spam too many issues when they are so closely related.. Agreed. Alright, thanks.. Could you distil what I need to do? I can move the cursor_rebase code into handle_layer_shell_surface, but if you're asking me to detect when we need to re-arrange layers, I don't know how that would be done.. I tried moving it into handle_layer_shell_surface, but that doesn't seem to fix the case I'm testing https://github.com/swaywm/swaylock/issues/32#issue-402670691.. Oh, that will help a lot. Thank you.. My bad, I only just noticed an issue with this. It will cause a segfault due to input manager being uninitialized. It looks like we can still skip IPC initialization though. I will send a PR in a few moments.. The original reason I wanted to do this is to solve detected memory leaks in the validation code path. But we can't skip server initialization, and freeing it leaks memory regardless. I think it would require quite a lot of digging to solve.. As you say, it's not really important. It just causes ugly traces to spit out with a build enabled with LeakSanitizer.. Could you show your config file? I'm using an external monitor via DP and have no issues with missing cursors.. @VincentVanlaer Would you be willing to look into this?\nEDIT - Looks like he's aware :+1: . I'm stunned at how fast you're fixing these issues. Really nice job.. If it's by design, you should add a comment or something. That commit also fixed an unnoticed issue where the CWD wouldn't be restored in some cases.. I will.\n@ddevault \nI would like to say that I'm unhappy with how this was reverted. It doesn't make you look good when you merge your own PR to revert other people's work without even a simple 'sorry', especially when you didn't intervene in my original PR (though I understand you may have been busy and weren't aware of it). If you have made specific decisions about how things like this function you must document them so people like me don't come along and see them as bugs.. I just saw the PR to remove include @sysconfdir@/sway/config.d/* because it was causing errors - the actual intention with my changes was to log an error if an absolute path was included but didn't exist. Wildcard paths were supposed to be unaffected and I could've sworn it worked when I tested it.. Do you mean that I am overusing labels? If so, how does this look:\nc\nif (wordexp(path, &p, 0) != 0) {\n    if (chdir(wd) == 0) {\n        sway_log(SWAY_ERROR, \"failed to change working directory\");\n    }\n    free(parent_path);\n    free(wd);\n    return;\n}\n...\nc\nerror_chdir_end:\nerror_chdir_start:\n    sway_log(SWAY_ERROR, \"failed to change working directory\");\n    free(parent_path);\n    free(wd);. Sorry for the delay on this. Would you mind giving it another look?. All good points. I just made a few idiotic mistakes so had to force push a lot. I'll stick to contributing during the daytime rather than at 5am.. I noticed this a while ago. I don't think it's fixable, but I could be wrong.. Yeah that's a good indicator that it can be fixed then. I'll see if I can find the cause.. Steps to produce:\n\nTrigger dmenu ($mod+d)\nLaunch a native Wayland app via keybind if possible (I launch Alacritty with $mod+Enter)\nObserve that the focus is stolen from dmenu\nObserve that Xwayland applications are uninteractable and only native Wayland applications can be used. Fixes it for me too.. https://github.com/swaywm/wlroots/pull/1545 has been reverted so I'm closing this. I believe @RedSoxFan is going to look into getting it working as it would've otherwise been nice to have.. It looks like I already have libva-intel-driver installed on my system.. >are you using modesetting driver or xf86-intel\n\nI have to be honest, I have no clue. I installed a package named mesa-dri-drivers and that's all.\nlibva info: VA-API version 1.4.0\nlibva info: va_getDriverName() returns 0\nlibva info: Trying to open /usr/lib64/dri/i965_drv_video.so\nlibva info: Found init function __vaDriverInit_1_4\nlibva info: va_openDriver() returns 0\nvainfo: VA-API version: 1.4 (libva 2.4.0)\nvainfo: Driver version: Intel i965 driver for Intel(R) Kaby Lake - 2.3.0\nvainfo: Supported profile and entrypoints\n      VAProfileMPEG2Simple            : VAEntrypointVLD\n      VAProfileMPEG2Simple            : VAEntrypointEncSlice\n      VAProfileMPEG2Main              : VAEntrypointVLD\n      VAProfileMPEG2Main              : VAEntrypointEncSlice\n      VAProfileH264ConstrainedBaseline: VAEntrypointVLD\n      VAProfileH264ConstrainedBaseline: VAEntrypointEncSlice\n      VAProfileH264ConstrainedBaseline: VAEntrypointEncSliceLP\n      VAProfileH264Main               : VAEntrypointVLD\n      VAProfileH264Main               : VAEntrypointEncSlice\n      VAProfileH264Main               : VAEntrypointEncSliceLP\n      VAProfileH264High               : VAEntrypointVLD\n      VAProfileH264High               : VAEntrypointEncSlice\n      VAProfileH264High               : VAEntrypointEncSliceLP\n      VAProfileH264MultiviewHigh      : VAEntrypointVLD\n      VAProfileH264MultiviewHigh      : VAEntrypointEncSlice\n      VAProfileH264StereoHigh         : VAEntrypointVLD\n      VAProfileH264StereoHigh         : VAEntrypointEncSlice\n      VAProfileVC1Simple              : VAEntrypointVLD\n      VAProfileVC1Main                : VAEntrypointVLD\n      VAProfileVC1Advanced            : VAEntrypointVLD\n      VAProfileNone                   : VAEntrypointVideoProc\n      VAProfileJPEGBaseline           : VAEntrypointVLD\n      VAProfileJPEGBaseline           : VAEntrypointEncPicture\n      VAProfileVP8Version0_3          : VAEntrypointVLD\n      VAProfileVP8Version0_3          : VAEntrypointEncSlice\n      VAProfileHEVCMain               : VAEntrypointVLD\n      VAProfileHEVCMain               : VAEntrypointEncSlice\n      VAProfileHEVCMain10             : VAEntrypointVLD\n      VAProfileHEVCMain10             : VAEntrypointEncSlice\n      VAProfileVP9Profile0            : VAEntrypointVLD\n      VAProfileVP9Profile0            : VAEntrypointEncSlice\n      VAProfileVP9Profile2            : VAEntrypointVLD. I'm running Fedora, so I'm not sure what the equivalent package is for xf86-video-intel. A repo search didn't reveal anything like it.\nI tried out the Chromium flags but the issue is still present. Also, I haven't experienced any crashes in Chromium, only stuttering/lag.\nThanks.. I still think this is a Swayroots issue. Scrolling doesn't lag if I have two Chromium windows open in the same workspace. . I'm going to close this and will reopen if I can demonstrate that it's a Sway issue. It is starting to look like a hardware acceleration issue but it's unclear why the lag only happens with another instance of Chromium in another workspace.. If that were the cause, what would the stutter look like? If it's a single frame then the stutter surely wouldn't be too severe. With this issue, the stutter can be over a second long.\nI should really get a recording of it.... Here's a video of it. https://my.mixtape.moe/rbrenk.mp4\nThese two windows are in different workspaces. The cursor is shown on both windows at the same time for some reason.\nThe issue is most visible around 1:00. There's a blank YouTube video playing on the right, and the mouse events are delayed by ~1s.. You might've noticed the deleted parts. It considers the binaries as deleted but in reality they were just replaced after I had recompiled and installed.\nIf these functions don't call each other as you say then it's probably just noise. I'm going to close this and I'll of course reopen it if I encounter the segfault again.\nThanks for having a look.. @RedSoxFan There isn't a way to have additive rotations right now. I didn't explain what I mean by that very clearly. If I specify a rotation of +90, then I would expect executing it four times to bring me back to the original rotation. Values without a plus/minus prefix will behave as they do now (a static rotation).\n@ddevault Are commits being cherry-picked from master?. Ah I see now, it does rotate relatively with clockwise/anticlockwise. I'm not a fan of how that works personally. I would rather just pass -90 or 90 for example to determine the direction and then you could instead pass relative when desired.\n```\nRotate relatively 90 degrees (clockwise)\noutput eDP-1 transform 90 relative\nRotate relatively by -90 degrees (anticlockwise)\noutput eDP-1 transform -90 relative\nRotate by a static -180 degrees.\noutput eDP-1 transform -180\n```\nThis simplifies things if you're passing in numbers from a script through swaymsg.\nI have a feeling you won't be keen on this either though. I do still think that values outside of the -360 to 360 range should be accepted. There's nothing invalid about a 720 degree rotation.. Not arbitrary transforms. I would just like values that fall outside of the 0-360 degree range to be wrapped and accepted.\nI put together a small example program which might clear things up a bit: https://gist.github.com/c-edw/2c147ee041763b028467d8ab0e73c2d0\nYou'll see if you run it with odd values like ./a.out normal -270, it wraps the value to 90 (WL_OUTPUT_TRANSFORM_90). Or you could pass -720 degrees and it will wrap the value to simply WL_OUTPUT_TRANSFORM_NORMAL.. I don't need it per se, but I can imagine a scenario where a script calculates some value of its own and tries to pass a value outside of that range. It's like I said above, a 720 degree rotation is valid anyway so I don't see why the command would bounce a value like that.\nI'm not too bothered about that part though. The reason I started looking at this code is because I can't pass transform 0, which is irritating. I can send a patch for just that component soon, but it leaves holes such as 'should flipped-0 also be allowed?'. I've tried it again this morning and can't produce the issue myself... maybe a fluke. I was fiddling with the config quite a lot after all. As usual, I'll reopen the issue if I encounter it again.. I see. The reason I'm looking at this is because I'm looking to see if I can get my config to be more versatile across different display setups. I essentially would like to be able to say \"put these workspaces on this display always, put the other workspaces on any other display if available\".\nBut now that I think about it, this should probably be done through a shell script. . Can't produce with the default config. I've isolated the relevant parts of my config that cause the issue and added them above.. Very possibly related to #3029, but this I'm quite sure this bug is fresh.. This is something you can send a PR for. That way you can phrase it however you see fit.. Correct me if I'm wrong, but you've used a translation tool for this, yes? I'm sure not what the procedure is supposed to be but most of the time I see people just updating the English README.md and then those changes eventually trickle down to the translated versions. It would be nice if somebody could clarify this.\nA lot of the translations right now are outdated and might just lead to further confusion. Maybe we should discuss this.. Copied this part from strip_workspace_number.c. Might be better to use parse_boolean here.. This is likely a poor way of doing it, but I am not familiar enough with C to know a better way.... Should I add a ws_number and ws_name field to swaybar_workspace then? I assume they'd both need to be char *.. There's definitely a few holes here, like the one you mentioned, and if you renamed a workspace to something like 1:a:b, the stripped_name will just be a and not a:b. I could try to fix this, but I wouldn't know how to do the validity check. I'd probably need to cast ws->num to a char and compare it to the first character of ws->name right?. I believe that ws->num is independent from ws->name. The ws->num workspace number is assigned automatically and cannot be changed, but the stripped_number is the 'frontend' number which can be changed. . Thank you for your help resolving these issues :+1: . According to documentation, atoi returns 0 if invalid. Existing code already assumes that num is 0-9. . Yeah you're right, thanks.. Ah, so I need to free the pointer before reassign otherwise it will be dangling, correct? . Got it, thanks.. I think this could be a bug. The docs for strip_workspace_name and strip_workspace_number emphasise that the name needs to be in the form [n]:[NAME] to apply. \nEDIT - I have raised an issue on i3wm to find out about this.. Be sure to adhere to the style guide. \n- if( -> if (\n- ){ -> ) {. They have confirmed that this is intended. I will see if I can get this done soon.. This code makes the assumption that the digit will always be a single character (0-9). Not ideal, but existing code already does this.. I tried strncpy originally and thought that maybe the issues I've been seeing were because strncpy doesn't append null terminators (or does it?). . It's a char*, are you suggesting that something else might use the pointer?. Nice catch with numlen, I have modified it to pass the absolute value to log10. Hanging colon will be stripped now too.. Can you clarify further? Changing it to a == could cause problems because len_offset will always be one less than strlen(ws->name).. But you said this is how it was on i3, no?\n\ni3 also strips the colon if the name is something like 1:. I don't think this does that, though admittedly I haven't actually tested it.. It doesn't make any sense to me why i3 would do that. If you define that you want the number stripped, why would it then strip everything but the number? It's especially difficult to understand when i3's documentation is barebones when it comes to the strip_workspace flags.\n\nI think this PR replicates the majority of the behaviour - can we merge this and raise an issue for the extra few bits?. I think it should remain like this. Negative numbers have lengths too, and before this change it would output a large negative number which could trigger a bug.. 16K does seem excessive. In commit cab13 it was just 2K.. I'll address this in another PR as long as that's alright with you.. Unlimited size? I guess the only benefit is protection against oversized strings created from a bug or something like that. . May I add these? It makes things easier when testing for each compiler.. Yep, thanks.. What can I do instead? Without this, I was having to do:\nCC=gcc meson build\nrm -rf build\n...\nCC=clang meson build\n...\nrm -rf build. I appreciate the suggestions and am happy to give them a go. But - it does look like this is somewhat standard practice.. I believe that in C, % calculates the remainder. ((i % max) + max) % max calculates the modulus.. Yep, that's fair. I can change it if you really want.. Yep, that's a much better solution. I think I tried that originally but for some reason it didn't resolve the issue. It does now.. What about the early return false on line 571? The CWD doesn't appear to be restored there.. IMO embedding a ternary in a condition is a bit nasty. I would recommend declaring a bool.. Are you sure? Don't think we can call wordfree until later.. ",
    "deathlyfrantic": "I've found this problem happens with all GTK dialogs.\n. SirCmpwn asked about this in IRC and was going to review this PR. It is a change; whether it's one people want is the question. I'm open to removing the alphabetic sorting portion of it. I only use numbered workspaces so it makes no difference to me.\nBased on what I can tell from looking at the i3 source, it appears i3 does not sort alphabetically. So alphabetic sorting should not be included if duplicating i3's behavior is the goal. Personally, I like things to be sorted. :smile: \n. I'll remove the alphabetic sorting for now, though adding it as an option with a config command might be a fun little project.\n@SirCmpwn I do not understand your question \"is qsort stable?\"\n. Ah! Yes, it is. I removed the alphabetic sorting and did some testing. The tests involved setting up ad hoc workspaces on each monitor, then turning off the right monitor and seeing how they ended up on the left. Results:\n```\nLeft: 000\nRight: 00, 0\nFinal: 000, 00, 0\nLeft: 1, def\nRight: abc\nFinal: 1, def, abc\nLeft: 1, 13\nRight: 12\nFinal: 1, 12, 13\nLeft: \"2: ZZZ\"\nRight: \"2: AAA\"\nFinal: \"2: ZZZ\", \"2: AAA\"\n```\nSo I think this is sorting as expected.\n. I'm sorry, I didn't realize @SirCmpwn was asking about the qsort function itself. I thought he was asking whether my cmp function that is passed to qsort returned 0 for equivalent items. Apparently there is no guaranteed-stable sorting function in stdlib (https://rosettacode.org/wiki/Sort_stability#C).\nI'm open to any option here:\n- revert this entirely - at this point sort_workspaces is being used in a couple places though, so that will require some unwinding of other changes\n- add an order field to swayc_t to use for qsorting workspaces (might be handy for other container types too?)\n- write a custom function to sort workspaces that doesn't use qsort at all (this might be above my current skill level but I would give it a try)\n- leave it - I personally don't think this matters too much but as mentioned above, I only use numbered workspaces and don't have workspace prev|next bound to anything\nI apologize for the trouble here, I should've understood the situation better before trying to fix it. :confused:\n. fixed with https://github.com/SirCmpwn/sway/pull/686\n. Sorry for all the commits - I didn't think about squashing them until after I had pushed. I could close this and create a new pull request using a single commit if that would be preferable.\n. redone on https://github.com/SirCmpwn/sway/pull/690\n. > Can we walk up the tree somehow? How do tools like htop display the process tree?\nAlmost certainly yes, I hadn't thought of this. I don't know what the API for process trees looks like but it should be possible, somehow, to walk up the tree checking each pid along the way, until we eventually find the \"right\" one or exhaust all the options. I can start working on this.\nEDIT: This might actually help solve another problem I didn't mention, which is making this work for views launched by a launcher (dmenu etc)! If I can walk up the tree and find the launcher's pid that should make this work for that purpose too. :+1: \n. Cleaned this up a little. This version works reliably on Wayland apps that are not client-server (e.g. not gnome-terminal whose parent process is systemd) which are launched using the exec command.\nI thought this was going to work for things launched by dmenu, but dmenu actually launches a shell which launches the chosen process; since Sway never knows that shell's pid, it won't be matched by the tree walking process here.\nIOW this is still not too useful.\n. One thing I should note is that in this version, the config->pid_workspaces list will basically always be growing, because many pid_workspace structs are added to it that are never matched and removed. Each of these is just an int and a string so it's not a ton of memory, but it is there. It would probably be good to clear the pid_workspaces list occasionally but I don't know when a good time to do that would be.\nI don't know if pids ever get reused but that could also be a concern on a long-running Sway session. Currently there is no uniqueness check on this, so it's possible to have two entries for the same pid. I could definitely add such a check to prevent that problem.\n. Good idea! That should work pretty well. I'll add a uniqueness check when adding a new pid_workspace and a garbage collection function that will clear any entry older than some amount of time, say 60 seconds. That should keep it clean.\n. > Make it configurable\nCan you elaborate on what you mean by this? Are you saying it should be end-user configurable, or just that it should be a #define?\n. Would there be any value in adding some sort of garbage collection process which could run arbitrary callbacks when it detects Sway's state is idle? Obviously that's a bigger and more-complicated project than should be implemented as part of this PR but it seems like it might be handy for situations like this where something needs to get cleaned up during a time when the data isn't being used.\n. How do I keep managing to push out-of-date commits? I should not be trusted with Git.\n. FWIW it's probably worth just removing all the changes from #709 and starting from scratch on this one, the way I added it was pretty janky.\n. Someone mentioned on IRC that i3 has a default dimension for resize and after reading through the i3 docs I've found there are some other things we're missing. Here's (what I believe to be) an exhaustive list of what we need for true i3-compatibility with our resize command:\n- [x] currently our resize does not support floating views at all as mentioned above\n- [x] need to differentiate between \"10px\" and \"10ppt\" (or more correctly \"10 px\" and \"10 ppt\") - right now we're just using strtol() to get the number and assuming it's pixels no matter what. An \"x ppt\" dimension should adjust the size by x percentage points. If I understand the documentation correctly, i3 restricts px dimensions to floating and ppt dimensions to tiled but I don't see why we couldn't make both dimension types work with both view types.\n- [x] need default dimensions. i3 defaults to 10px for floating views and 10ppt for tiled views.\n- [ ] need to support up/down/left/right directions for resize <grow|shrink> <direction> command\n- [x] our resize <width|height> <amount> syntax needs to change to resize set <width> [px] <height> [px]. In i3 this command only works on floating views - personally I'd like it to work on both floating and tiled views in Sway but that's a minor point.\n. i3 syntax for resize set is resize set <width> [px] <height> [px], so resize set 640 480 would set the width to 640 and the height to 480. I don't really like that syntax. What I'd prefer is resize set width 640 height 480 so that either dimension is optional.\n@SirCmpwn I'll implement the i3 syntax, but how do you feel about my syntax also being an option? Pro: can set either dimension without touching the other. Con: more syntax to maintain and document, maybe not actually that useful?\n. @Hummer12007 has pointed out this at least needs improvements before merged, and I'm sure @mikkeloscar is correct in that there is most likely a better approach.\n. Out of curiosity when was the last time you updated Sway? I know there was a short period where this happened for me too after all of the desktop shell stuff was implemented, but that bug was fixed about a week ago (I believe by #777).\n. This is ok to merge now if there are no further concerns I need to address.\n. ~~actually don't merge this yet please~~\nOK to merge now \ud83d\udc4d\n. FWIW those arrays do get added to views in the ipc_json_describe_view() function here, but I'm going to do a PR to merge those with the code in ipc_json_describe_container_recursive() anyway just to clean it up.\n. That's a non-standard key according to the i3 docs here. Looks like it might be an old version of event_state_mask which we do include.\n. For whatever it's worth I am able to reproduce the problem with the CMake patch and the fix by reverting that line. I tried tracing through all the focus logic but the root cause of this problem didn't jump out at me.\n. Hm, this may need further work, actually. I'm not sure I fully understand how the focus chain works.\n. Updated. To get the focused view from the tree, recursively search from root to a view where every child has a \"focused\": true attribute. If any container in the chain is not focused, keep searching. In this (shortened) example, view4 is the focused view:\njson\n{\n   \"name\": \"root\",\n   \"nodes\": [\n     {\n       \"name\": \"output1\",\n       \"nodes\": [\n         {\n           \"name\": \"workspace1\",\n           \"focused\": true,\n           \"nodes\": [\n             {\n               \"name\": \"view1\",\n               \"focused\": false,\n               \"nodes\": []\n             },\n             {\n               \"name\": \"container1\",\n               \"focused\": true,\n               \"nodes\": [\n                 {\n                   \"name\": \"container2\",\n                   \"focused\": false,\n                   \"nodes\": [\n                     {\n                       \"name\": \"view2\",\n                       \"focused\": true,\n                       \"nodes\": []\n                     },\n                     {\n                       \"name\": \"view3\",\n                       \"focused\": false,\n                       \"nodes\": []\n                     }\n                   ]\n                 },\n                 {\n                   \"name\": \"view4\",\n                   \"focused\": true,\n                   \"nodes\": []\n                 }\n               ]\n             }\n           ]\n         }\n       ]\n     },\n     {\n       \"name\": \"output2\",\n       \"nodes\": [\n         {\n           \"name\": \"workspace2\",\n           \"focused\": false,\n           \"nodes\": []\n         }\n       ]\n     }\n   ]\n}\nThis behavior makes sense to me but should definitely be reviewed to make sure it is \"correct.\"\n. Discussion on IRC with @Hummer12007 has revealed i3's tree response has only a single focused container. So our tree response is not currently i3-compatible and this PR will not make it so.\n. Third revision: tree now only has a single focused container which should match the i3 tree model.\n. The focused container is not always a view though. Sometimes it's a workspace or a non-view container.\n. I get where you're coming from but passing the focused container as an argument seems a bit clunky, just because this function is called from a few different places. It could be done though - I count 4 different locations this is called. Ideally we'd have some kind of mechanism to cache the value on the first call but knowing when to invalidate the cache could be tricky.\nApparently i3 has a single global pointer to the focused container. Adding that to Sway would be non-trivial but might it be worthwhile? Maybe a root->focused_container or config->focused_container?\n. Hm. The whitespace changes I made looked right in Neovim but look wrong here. \u00af(\u30c4)/\u00af\n. If a container is moved or resized while recording, it just won't be in frame. The geometry is set from Swaygrab once, and it stays that way. Not sure how big a concern this is - I'd assume if you're going to be moving containers around you'd just capture the whole output.\nIt would be possible to add support for a specified container I suppose but I'm not sure how you'd identify said container. The \"id\" field we have in the tree response is the pointer to a given container so I guess that could work.\n. I'll do specific containers in another PR - after looking at the id field in the tree response it seems to be broken so I want to figure out what's up with it first.\n. We don't have a way to do bindsym within a bar {} block (AFAIK) but I'm open to that behavior. I don't think Swaybar even processes keyboard events currently.. I keep the bar at the top. I tend to move my mouse up to get it out of the way. So moving it to the top doesn't help.. Except that I like the bar at the top, I just don't want it to move workspaces when I accidentally scroll.. This is probably because your shell is trying to parse the command. Try: swaymsg 'for_window [class=\"bemenu\"] fullscreen'. I actually can't reproduce this one - when I have window A fullscreened and focused, opening a new window B does not change focus.. Are you trying to move a workspace that already exists to a given output?. If you are, the command is move workspace to output <name> - workspace <name> output <output-name> only assigns a workspace to a given output, it does not actually move it.. What version of Sway are you running? This actually was broken in 0.12, but it was fixed in 0.12.1 - see #1105.. This is a consequence of the way we do view -> workspace assignments. When exec is used, it keeps track of the workspace that was focused at the time, and the pid of the forked process. When a new view is added, we grab its pid and look for a workspace to assign it to; if we can't find one, we walk the process tree by looking at parents. If we can't find a workspace for any pid, we just assign the view to the focused workspace when the view attaches.\nSo, in your config, it looks like you're executing the urxvt daemon, then switching to workspace F1, then executing the urxvt client.\n03/19/17 10:01:16 - [exec_always.c:33] Executing \"urxvt256cd\"\n03/19/17 10:01:16 - [exec_always.c:74] Child process created with pid 19626 for workspace 1\n[ ... snip ... ]\n03/19/17 10:01:18 - [exec_always.c:33] Executing urxvt256cc -ls\n03/19/17 10:01:18 - [exec_always.c:74] Child process created with pid 19635 for workspace F1\n03/19/17 10:01:18 - [ipc-server.c:727] Sending binding::run event\n03/19/17 10:01:18 - [workspace.c:329] looking for workspace for pid 19626\n03/19/17 10:01:18 - [workspace.c:344] found pid_workspace for pid 19626, workspace 1\n03/19/17 10:01:18 - [workspace.c:365] Creating workspace 1 for pid 19626 because it disappeared\nAs you can see above, the daemon gets created with pid 19626 for workspace 1. When you execute the client and it attaches to the compositor, the pid it gives us is that of the daemon, which we assigned to workspace 1 from before; so we move the client to that workspace.\nI think if you rearrange your config so the exec urxvt256cd line is after the workspace F1 line this should work as you would expect.. Try $mod+Shift+Period. That's what I get for using bad internet examples. Will fix!\n. I guess either would work in this case, since the read_line will always fail if the stat file can't be opened. I'll change it, that will prevent even checking the second condition.\n. Yes, I actually already removed this on my local copy; I just forgot to do so on this prior to committing and pushing.\n. Actually now that I look at this again I think || is right. Consider the case where fopen() succeeds but read_line() fails. In this case, with && you'd have:\nif (not (fopen succeeds) and not (read_line does not succeed))\nif (not (true) and not (false))\nif (false and true)\nfalse\ndon't return -1 to signal failure\nWith ||:\nif (not (fopen succeeds) or not (read_line does not succeed))\nif (not (true) or not (false))\nif (false or true)\ntrue\nreturn -1 to signal failure\n. I just changed the way this was arranged in the new version. There's no reason the logic needs to be that complicated for such a simple function.\n. That was in the get_workspace() code originally and I followed that in a couple other places too, but I don't really know what would be most appropriate. The JSON spec indicates null is a valid option so I could change it to that for all cases if preferable.\n. I think @SirCmpwn is mixing me up with someone else, I'm not too familiar with this code. Git blame says @mikkeloscar and @taiyu-len wrote the bulk of that section.\n. Makes sense to me. I see how the old way could potentially mis-set the focus to a higher-level container than it was previously.\n. Add braces to if and else please, even though they only contain one statement.. Please separate height and -.. ",
    "johnp": "Workaround for the probably Java-related case (happens to me in Jetbrains IDEs, JDownloader, Cisco ASDM): Select floating fragment and change to fullscreen. Won't be able to switch back though. Would be interesting if setting some minimum size for floating windows in case their dimensions can't be inferred helps.\ndebug log excerpt:\n[handlers.c:210] handle:5 type:8 state:0 parent:4 mask:0 (x:740 y:383 w:1 h:1) title:Add Per-Session NAT Rule class:sun-awt-X11-XDialogPeer appid:(null)\n[container.c:299] Adding new view 5:8:Add Per-Session NAT Rule as a floating view\n[debug_log.c:96] Setting focus to 0x1f70400:5 (VIEW 'Add Per-Session NAT Rule')\n[debug_log.c:96] Arranging layout for 0x1f433d0 (OUTPUT 'eDP-1')\n[layout.c:711] Arranging layout for 0x1f433d0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n[debug_log.c:96] Arranging layout for 0x1f434c0 (WORKSPACE '1')\n[layout.c:711] Arranging layout for 0x1f434c0 1 1920.000000x1059.000000+0.000000,0.000000\n[layout.c:750] -> Found panel for this workspace: 1920x21, position: 1\n[layout.c:772] Arranging workspace '1' at 0.000000, 0.000000\n[layout.c:840] Arranging 0x1f434c0 horizontally\n[layout.c:844] Calculating arrangement for 0x178b990:4 (will scale 1920.000000 by 1.000000)\n[layout.c:711] Arranging layout for 0x178b990 johnp@johnp-laptop: ~ 1920.000000x1059.000000+0.000000,0.000000\n[layout.c:782] Set view to 1920 x 1059 @ 0, 0\n[debug_log.c:96] Arranging layout for 0x19f6eb0 (WORKSPACE '2')\n[layout.c:711] Arranging layout for 0x19f6eb0 2 1920.000000x1059.000000+0.000000,0.000000\n[layout.c:750] -> Found panel for this workspace: 1920x21, position: 1\n[layout.c:772] Arranging workspace '2' at 0.000000, 0.000000\n[layout.c:840] Arranging 0x19f6eb0 horizontally\n[layout.c:844] Calculating arrangement for 0x1f6cc50:4 (will scale 1920.000000 by 1.000000)\n[layout.c:711] Arranging layout for 0x1f6cc50 Cisco ASDM 7.3 for ASA - 192.168.1.10 1920.000000x1059.000000+0.000000,0.000000\n[layout.c:782] Set view to 1920 x 1059 @ 0, 0\n[layout.c:941] Set floating view to 1 x 1 @ 960, 529\nfocus:R      |(0x633400)(p:(nil)   )(f:0x1f433d0)(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 1|name:(null)\n|focus:X     |(0x1f433d0)(p:0x633400)(f:0x19f6eb0)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x1f434c0)(p:0x1f433d0)(f:0x178b990)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:   0|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x178b990)(p:0x1f434c0)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1920|h:1059|x:   0|y:   0|g: -1|vis:f|children: 0|name:johnp@johnp-lapt\n|-focus:W    |(0x19f6eb0)(p:0x1f433d0)(f:0x1f70400)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:   0|g: -1|vis:t|children: 1|name:2\n|--focus:X   |(0x1f6cc50)(p:0x19f6eb0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1920|h:1059|x:   0|y:   0|g: -1|vis:t|children: 0|name:Cisco ASDM 7.3 f\n|==focus:K   |(0x1f70400)(p:0x19f6eb0)(f:(nil)   )(h: 5)Type:view|layout:-    |w:   1|h:   1|x: 960|y: 529|g: -1|vis:t|children: 0|name:Add Per-Session\nIf wlc gets bogus dimensions (0x0), shouldn't that probably be handled more gracefully than just setting dimensions to 1x1?\nhttps://github.com/Cloudef/wlc/commit/d17a9f4ba46ebaf4b1ac62cfdc0968dc1e24d601\nhttps://github.com/Cloudef/wlc/blob/390bdb0f3ea1767316a94a7db516e77c35fe2874/src/compositor/view.c#L212\nhttps://github.com/Cloudef/wlc/blob/390bdb0f3ea1767316a94a7db516e77c35fe2874/src/compositor/view.c#L240\n. Currently, setting border pixel <n> disables the title bar, while border normal <n> has the title bar at the top.\ntitle_bar bottom would instead place the title bar at the bottom. That's pretty much the main thing I'd be asking for. All the other options are I think less useful / bring only minor additional value, but would be nice to have.\n. No, I've just done a quick search and could only find this: https://www.reddit.com/r/i3wm/comments/463mtj/window_titlebars_on_bottom/\nShould I place a feature request at the i3 github too?\n. Opened i3/i3/issues/2441. The explanation of the dynamic placement option may be a bit better there.\n. Well, the first KeyError seems to be fixed. Here's the next (BindingEvent is missing mods key).\nShould I open a new issue for this or shall we just continue to collect i3ipc compat issues here?\n. Yeah it apparently is: i3 source code comment\n. I downloaded a build with the patch for bug 1507475 from autoland (direct link linux x64 pgo) and can confirm that Firefox runs far more smoothly now on latest sway-git/wlroots-git.\nedit: modifier keys also work smoothly now and don't get lost under load as before.\nedit2: fix is in Nightly since build 20181123220228. ",
    "thuck": "Similar issue for me. I have 3 monitors, if i lock when the first monitor is focused the third monitor is not \"locked\". If I change the focus to the second or third monitor them everything is locked.\nI don't face the second problem of the incorrect password. If I can help in some way let me know.\n. More on this; I was checking what could create this behave; so far looks something mess with the window; if I put some prints here:\nvoid shell_surface_configure(void *data, struct wl_shell_surface *wl_shell_surface,\n                          uint32_t edges, int32_t width, int32_t height) {\n        printf(\"shell_surface_configure\\n\");\n        struct window *window = data;\n        window->width = width;\n        window->height = height;\n        printf(\"window wayland width:%d height:%d\\n\", window->width, window->height);\n }\nWhen the lock fails (doesn't cover all screens) I have this:\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:960 height:1057\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:640 height:1057\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:480 height:1057\nshell_surface_configure\nwindow wayland width:1920 height:1080\nshell_surface_configure\nwindow wayland width:1440 height:900\nWhen I do the lock from another monitor (not the primary) it works and I got this:\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:1440 height:859\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:1440 height:859\nshell_surface_configure\nwindow wayland width:0 height:0\nshell_surface_configure\nwindow wayland width:1440 height:859\nshell_surface_configure\nwindow wayland width:1440 height:900\nshell_surface_configure\nwindow wayland width:1920 height:1080\nshell_surface_configure\nwindow wayland width:1440 height:900\nSo far I cannot explain what's going on, @SirCmpwn any idea?\n. I think it should be ok now.\nAlso I didn't use the master because the swaybar is not working for me there, I think it's related with the bug report  #684.\n. I think these patches floating_maximum_size and  floating_minimum_size partially solves #604 and #682.\nOr at least it \"hides\" the bad effect of the 1x1 issue from wlc.\nAnd thank you; keep it going :)\n. From what I understood from the i3 code this is the default behavior, it only raises an error.\nBut I can change this if you think it would be more aligned with sway.\n. @SirCmpwn is it ok now? Or do you need any modification to merge this?\n. You could set on your .profile, and you could set it on a wrapper for sway.\nA wrapper for this case looks bad, and also I don't think would play very nice with a DM, even more when sway starts to be included in the major distros.\nAnother aspect is that with this you can have specific environments variables depending where you are running sway; using the include with hostname.\nI use a similar configuration with awesome, since I need some env vars specific for it, but I don't need it for other things; but if you think this is not a good approach you can close it, no problem :)\n. Sure; but you can use a wrapper basically for doing anything, including to simulate the include.\nI understand that there is different possibilities to handle this, but I think this is simpler than the other options.\nIf you prefer you can keep this open, and check if people would like to have it included or not.\n. Initially I was using a string as the default; something like (\"75 x 50\"); but I changed my mind and forgot to do the clean up.\n. ",
    "fedya": "Seems to be issue in\nbuild/protocols/wayland-desktop-shell-server-protocol.c\n```\nWL_EXPORT const struct wl_interface screensaver_interface = {\n        \"screensaver\", 1,\n        1, screensaver_requests,\n        0, NULL,\n};\nWL_EXPORT const struct wl_interface desktop_shell_interface = {\n        \"desktop_shell\", 3,\n        7, desktop_shell_requests,\n        3, desktop_shell_events,\n};\n```\nBut i have no idea which macro create it.\n. ",
    "lord-re": "I tried bindcode $mod+10 workspace 1 but it failed too. Keys are still sent to the focused terminal.\nyes $mod+\u00e9 works in i3.\nIf i start sway on qwerty layout it works well.\nNumbers aren't on direct access on the b\u00e9po layout but need to be shifted.\n. I confirm it works with bindcode now.\n. Hoo yes it works !\nSo maybe the way to fix this should be to remove the borders when windows are tabbed, no ?. ",
    "neosilky": "Great, let me know if you'd like me to squash the extra commits.\n. @mikkeloscar Sorry about the bug, I was a bit hasty in testing. Looks good to me otherwise.\n. Done (in latest commit)\n. Ah, didn't see that method. Done in the latest commit.\n. Also done :)\n. ",
    "xerpi": "I'll just send a new PR...\n. ",
    "jvalrog": "The width would be user defined, in pixels for example. Large text would be cropped, or just display the window class/name or something like that.\nAs already mentioned in the i3 thread, the stacked layout also has the problem of running out of space, but that issue hasn't been solved yet.\nOne possible solution would be to scroll the tab list as the user goes up/down in the list and to show special tabs with an arrow or \"...\" in the top or bottom position indicating that there are more tabs in that direction. That would allow for \"infinite\" windows (constrained by memory).\nBut I don't know how difficult would be to do that.\n. ",
    "WMJi": "This feature is so cool, please do consider to implement it. Thx\n. 1. The stacking layout is very different with the tabbed layout in that, title bars are listed in different directions. For stacking layout, title bars are listed vertically; while for tabbed layout, title bars are listed horizontally. This simple fact implies that, very different results will be obtained by pressing Mod-Shift-Left/Right or Mod-Shift-Up/Down.\n   It is true that, the stacking layout can be regarded as a transposed tabbed layout, or vv. But such a fact does not really help, since English texts is printed horizontally in most applications.\n2. This layout would be very helpful.\n   In fact, I hoped to have such a layout even in those days of using wmii.\n3. I do not really care about the width of title bars, but it would be perfect if the width can be configured. \n   Additionally, it is also acceptable if texts in title bars are printed vertically in the new layout, and each character is transposed.\n. ",
    "1ace": "\nStyle issue - use sizeof(...), not sizeof ...\n\nFixed :]\n. Sorry, just tried to use github's \"update branch\" functionnality, and it created a merge. Give me a second and I'll do a proper rebase instead.\n. Yeah, sorry :/\nTime and all that. I'll try and do it this week.\n. Hi, sorry for the crazy long wait. I promise I won't make any more promises I can't keep \ud83d\udc4d\nThis should address the concerns you raised.\nAnything else? I should have a calmer week, so while I'm not promising anything, you probably won't have to wait as long for the next adjustments :)\n. Do you mean sway can't have features that i3 doesn't have? That's seems unnecessarily restrictive.. That's fair \ud83d\ude05. OK, sure.\nI haven't followed the development of sway; why was swaygrab removed? Is its functionality available some other way?. What would be incorrect here?. ",
    "lssimoes": "Up\n. ",
    "sardemff7": "My clone was a bit out of date (failed fetch) so now, this PR is correctly based on current master.\n. Updated the PR with some information.\n. Updated again for clarity, added the link to the interface definition.\n. I am all for plugins and will happily implement that interface as a plugin if Sway goes that way.\nConcerning the configuration, it all happens in the notification daemon, just like it did in X11.\nThe only part left to the compositor is to select the output.\nTo disable notifications while locked, currently, you just need to call wlc_notification_area_set_output(na, 0).\nIf you want to put all the configuration and placement in Sway, it is up to you.\nMy notification daemon has complex placement options, possibly based on notification content, so I cannot delegate all that to the compositor.\n. @SirCmpwn\nOutput choice is already up to the compositor and disabling notifications is as simple as sending a 0,0-sized area (since putting even 1 pixel of a notification outside the area is an error, although for my first draft I\u2019m not sure I did that yet).\nForcing placement will just mess up with the daemon stuff, or you will need really complex heuristic to guess what was the intention.\nYou can limit the work area to one side of the screen or a corner, the daemon has to deal with it, I said already. Of course you cannot use this PR for that as the work is done in the helper lib so you cannot properly override it now.\n@progandy\nHaving one interface per special role makes it possible to limit to one client for each of them.\nIf you make a generic interface, but you still want a role and per-role rules, it doesn\u2019t give you anything.\nImplementing Wayland interfaces is cheap, and we do not want all-in-one interfaces where it doesn\u2019t make sense, by design.\n. I designed my code to share the same wlc-based implementation between Orbment and Sway, to make it trivial to support both with minimal changes. Now you are basically asking to duplicate my code in Sway for the sake of having everything in Sway. I understand, but I won\u2019t do it.\n1. Do not consider this a library, just consider it implementation in a separate file in a separate project so you can share the implementation with Orbment. If it\u2019s not ok with you, no problem, but I won\u2019t  take such maintenance burden.\n2. I had requests to support Sway, it was trivial (because I designed the code specifically for that), so I\u00a0did it. But I don\u2019t use Sway, so I won\u2019t hack it more.\nIf anyone wants to do it, it\u2019s not hard, and everything is MIT-licenced. As long as I am not the one who will have to maintain it, I\u2019m fine.\nThanks for your time.\n. Ping @vially, @onny, @SethBarberee, and @quartz55 if one of you wants to maintain that.\n. @SethBarberee\nI just did the preliminary work and pushed it.\nHere are the remaining things to do, as follow-up commits:\n1. Probably rename some stuff, maybe restyle the code too\n2. Split other extensions from extensions.c to their own files\n. Feel free to do anything you want, as long as you keep my authorship on the two commits of this PR. (Of course if you use subtree to import the file, you can ditch said file from my import commit.)\nGood luck :-)\n. Feel free to do anything you want, as long as you keep my authorship on the two commits of this PR. (Of course if you use subtree to import the file, you can ditch said file from my import commit.)\nGood luck :-)\n. wayland-notification-area is no more, now there are wayland-wall (the protocols), weston-wall (Weston plugins for these protocols) and orbment-wall (Orbment plugins with, when reliable, a split of the wlc-shareable code to a specific file). I changed the links in the original post to reflect that.\n. wayland-notification-area is no more, now there are wayland-wall (the protocols), weston-wall (Weston plugins for these protocols) and orbment-wall (Orbment plugins with, when reliable, a split of the wlc-shareable code to a specific file). I changed the links in the original post to reflect that.\n. ",
    "YaLTeR": "This one is really annoying. I have only one display but frequently my mouse happens to stop on something that spawns a tooltip in firefox and suddenly sway shortcuts don't work any more (can't switch workspaces, etc). Also when I want to switch the workspace with mouse for whatever reason a tooltip is frequently spawned when leaving the firefox surface and the bar stops accepting any input until I mouse over firefox and back out.\nJudging by referenced issues closed as duplicates of this one, this is indeed the same issue.. Commenting on the Java problem: the windows are handled properly under the Awesome WM.. @khughitt I found the following to work: for_window [title=\"wl-clipboard\"] floating enable. Hey so I'm hitting this issue in sway and it works correctly in rootston. Maybe it's a sway issue after all?\nsway version 1.0-beta.2-136-g14cab786 (Jan  9 2019, branch 'master'). This redshift doesn't seem to work for me regardless of WLR_DRM_NO_ATOMIC_GAMMA. sway version 1.0-beta.2-147-g212baf2f (Jan 10 2019, branch 'master'), AMD RX 580, AMDGPU, Linux 4.18.. Yep, seems to work with WLR_DRM_NO_ATOMIC=1 regardless of WLR_DRM_NO_ATOMIC_GAMMA.. Seems to have the same behavior (only works with WLR_DRM_NO_ATOMIC=1 and doesn't work without, regardless of WLR_DRM_NO_ATOMIC_GAMMA).. https://gist.github.com/YaLTeR/807b51a74fddc49cc61a12f3f6e0fa67\nI stripped out card0\u2014it's the Intel integrated graphics which I don't use.. > Does it work if you use the AMDGPU driver with DC enabled? (Without any env variables)\nRevisiting this, just noticed without any env variables redshift does work but the gamma changes are applied only on mode change (even if I change to the same mode).. Hmm, perhaps. I changed the seat lines to:\nseat seat0 fallback true\nseat seat1 attach \"1133:49941:Logitech_Logitech_USB_Keyboard\"\nThen reloaded config, tried opening the terminal and closing it and got a crash, and then while trying to paste that to a gist got another crash.\nAfter reloading the session, I tried opening two wayland clients and while switching focus from seat0 resulted in me being able to correctly type in different clients with different keyboards, trying to bring focus back and then switch it from seat1 resulted in the same behavior (so seat0 typing in the newly focused client and seat1 in the old client, while it should've been the other way around). Surprisingly, trying to quit the client with $mod+q from seat1 sent that to the correct client, while typing events continued to send to the wrong one.\nWhile typing the rest of this issue from my primary seat0 keyboard with seat1 keyboard just attached and not doing anything, I got a third crash. I later got the same crash with seat1 keyboard not even attached.. Yeah, these issues seem to have been fixed on the latest master. There's one more thing I'd classify as unintuitive behavior: opening a client redirects all seats' inputs into it rather than just the seat that opened the client.. For sway exec it should be possible to figure out the seat, and for regular programs spawning popups or windows maybe simply take the last seat to interact with the said program?. Also reproducible in rootston from https://github.com/swaywm/wlroots/commit/f24e17259e49aef55b7ada54793a4cdb49ae94a1. > Excuse me, but an you please re-explain why it's an issue with Russian layouts?\nTo better demonstrate the issue, here's an example Russian keyboard:\n\nIt's expected to be used with the US layout interchangeably (so you toggle between the two). When you switch the Russian layout on, keys don't really move around (it's not like 1 becomes shift+something or anything like that) so it's expected that US bindings continue to work the same regardless of the currently active layout. For the keys that do move (some punctuation) I would say it's still expected that they work as in the US layout rather than as in the Russian layout.. Still reproduces on sway version 1.0-rc1-31-gee56428b (Feb  7 2019, branch 'master') and https://github.com/swaywm/wlroots/commit/20d404a091fa92f56be4825bbaf89e4027fda154. Confirming it fixes the issue.. FWIW it seems to work fine on rootston.. Looks like it was fixed in 1c329f2fe6ae344b3201447a586f6c9a571d44ff.. ",
    "FlyingWombat": "It seems this has popped back up again.\nWell, at least in sway-wlroots it has; not sure about sway-wlc.\nSway Version:\nsway-wlroots-git 1.0.alpha.5.r334.gdbaafdfa-1  (commit# = dbaafdf)\nwlroots-git r3065.769a8e99-1 (commit# = 769a8e9)\nI have two image files to set as background: asdf.jpg and  as df.jpg\nsetting background for asdf.jpg works as expected \nUsing swaymsg output eDP-1 bg \"~/asdf.jpg\" fill with or without quotes.\nSetting 'as df.jpg' does not work using either\nswaymsg output eDP-1 bg \"~/as df.jpg\" fill\nswaymsg output eDP-1 bg ~/as\\ df.jpg fill\n. No, that doesn't work either.. No, that also does not work.\nIs this working for you?. Thanks to @RedSoxFan  for the fix\nI found one more issue, though.\nThat is swaymsg output eDP-1 bg \"~/asdf(1).jpg\" fill doesn't work.\nI get Error: Invalid syntax (~/asdf(1).jpg). > I modified this so you can also execute arbitrary commands, like you can with dmenu/rofi:\n\nbindsym $mod+r exec termite --name=launcher -e \"bash -c 'compgen -c | sort -u | fzf --no-extended --print-query | tail -n1 | xargs -r swaymsg -t command exec'\"\nfor_window [app_id=\"^launcher$\"] floating enable, border none\nIf fzf finds a match, this will be executed. Else, what you typed will be executed.\n\nIf anyone is interested, I made a script based on this (still uses fzf).\nThe difference is that this script keeps a command history sorted by usage.\nYou can get it in my GitLab repo.\n. So, I'm not sure if I'm missing something, but it's still not working for me.\nI compiled sway at commit df80e6e from RedSoxFan's branch\nI still get:\n```\n$ swaymsg output eDP-1 bg ~/asdf(1).jpg fill\nError: Invalid syntax (/home/wombat/asdf(1).jpg)\n$ swaymsg output eDP-1 bg ~/asdf\"(1)\".jpg fill\nError: Invalid syntax (/home/wombat/asdf(1).jpg)\n$ swaymsg output eDP-1 bg \"~/asdf(1).jpg\" fill \nError: Invalid syntax (~/asdf(1).jpg)\n``. Okswaymsg output eDP-1 bg \"~/asdf(1).jpg\" fillworks\nAnd in sway config:output eDP-1 background ~/\"asdf(1).jpg\" works,\nbutoutput eDP-1 background \"~/asdf(1).jpg\"` does not work.\nIs there any way we could get \"~/asdf(1).jpg\", or at least \"/home/user/asdf(1).jpg\" to work?\nOtherwise it'll be a lot trickier to set the background with a variable,\nas in: output eDP-1 background $wallpaper fill. Well, output eDP-1 bg \"/home/user/asdf(1).jpg\" fill doesn't work\nError: Invalid syntax (/home/user/asdf(1).jpg). Ok, thanks; I think I understand how quote escaping works in Sway a bit better.\nIt now works in the way I'd like to use it.\nOne thing I'd like to clarify on Sway's behavior for quotes\nExpressions in commands can be quoted to use values with spaces or special chars\nAnd you said that the quotes are stripped upon parsing of the command\nIs set $<name> <value> an exception to that?\nFor example:\nWhen I put the following in my sway config\nset $img \"/home/user/some path/asdf(1).jpg\"\noutput eDP-1 bg '$img' fill\nit sets the wallpaper properly, and so fits my use case.\nBut, when I use the following I get these errors:\nUsing output eDP-1 bg \"$img\" fill gives Invalid syntax (/home/user/some path/asdf(1).jpg)\nUsing output eDP-1 bg '\"$img\"' fill gives Invalid syntax (\"\"/home/user/some path/asdf(1).jpg\"\")\nIt seems like the quotes are staying in the variable $img.\nIs that supposed to happen, or should I file a bug report on that?. Another test:\noutput eDP-1 bg '\"/home/user/some path/asdf !@#$%^&*()_+-=`~.jpg\"' fill\nGives a syntax error with '\"/path/to.jpg\"', but fails silently with \"'/path/to.jpg'\"\nBut that's to be expected, since even zsh needs to escape ! $ ` with \\ when using double quotes.\nUsing: output eDP-1 bg '\"/home/user/some path/asdf @#%^&*()_+-=~.jpg\"' fill works.\nUsing: output eDP-1 bg '\"/home/user/some path/asdf !@#\\$%^&*()_+-=\\`~.jpg\"' fill\nfails silently (note: for some reason sway doesn't need to escape !, but zsh does)\nAs far as I'm concerned, being able to use @#%^&*()_+-=~ is good enough.\nThe question is whether we want to support all characters in the path, or just most.. ",
    "Nomeji": "The bug seems to be fixed for swaybg but not for swaylock.\nI have an image called \"foo bar.jpg\" in ~\n[nomeji@Yuu ~]$ swaylock -i foo bar.jpg\n2018-12-10 22:32:21 - [sway/swaylock/main.c:889] Parsing CLI Args\n2018-12-10 22:32:21 - [sway/common/background-image.c:32] Failed to load background image (Failed to open file \u201cfoo\u201d: No such file or directory).\n2018-12-10 22:32:21 - [sway/swaylock/main.c:248] output name is LVDS-1\n[nomeji@Yuu ~]$ swaylock -i \"foo bar.jpg\"\n2018-12-10 22:32:27 - [sway/swaylock/main.c:889] Parsing CLI Args\n2018-12-10 22:32:27 - [sway/common/background-image.c:32] Failed to load background image (Failed to open file \u201cfoo\u201d: No such file or directory).\n2018-12-10 22:32:27 - [sway/swaylock/main.c:248] output name is LVDS-1\n[nomeji@Yuu ~]$ swaylock -i foo\\ bar.jpg\n2018-12-10 22:33:16 - [sway/swaylock/main.c:889] Parsing CLI Args\n2018-12-10 22:33:16 - [sway/common/background-image.c:32] Failed to load background image (Failed to open file \u201cfoo\u201d: No such file or directory).\n2018-12-10 22:33:16 - [sway/swaylock/main.c:248] output name is LVDS-1\n[nomeji@Yuu ~]$ ls -l \"foo bar.jpg\" \n-rw-rw-rw- 1 nomeji users 81765 Jan 11  2013 'foo bar.jpg'. ",
    "roosemberth": "workaround: create a layout file and export it before launching sway:\nXKB_DEFAULT_LAYOUT=MyLayout GDK_BACKEND=wayland sway -d &>/var/log/sway/logfile\nwith file available at /usr/share/X11/xkb/symbols/MyLayout and containing and xkb symbols definition\nthe following is an example for swapping caps lock with escape and left control with left shift:\nxkb_symbols \"MyCustomLayout\" {\n    // Base keyboard layout: /usr/share/X11/xkb/symbols/ch section fr\n    include \"ch(fr)\"\n    // Swap caps with escape\n    key <CAPS> { [ Escape ] };\n    key <ESC>  { [ Caps_Lock ] };\n    // Swap left shift with control\n    key <LFSH> { [ Control_L ] };\n    key <LCTL> { [ Shift_L ] };\n};\n. ",
    "nmiculinic": "Found solution on i3 user guide, and definition of 5 colors\n. ",
    "VoidNoire": "I get something similar occurring when I set workspace_layout tabbed into my ~/.config/sway/config file: https://bbs.archlinux.org/viewtopic.php?id=215904\n. This might be a dupe of #674 .\n. ",
    "okeri": "i  faced up to the same issue\npossible temprotary workaround is to add line below to your config \n\nexec swaymsg layout tabbed\n. Ou. it's true. duplicate isssue\n. same for me. \n",
    "Chrysostomus": "Many thanks! I currently use bspwm, but I'll probably transition to to sway when wayland ecosystem matures. I'm very excited about this project! \n. I can reproduce it. I use libinput also in x, so it is probably not libinput issue. . ",
    "tilpner": "On reload, the bar only shows if there are windows with border normal for me. Maybe this is related?\n. ",
    "tuncer": "Same corruption with xterm under orbment.\n. Okay, done: Cloudef/wlc#170.\n. Ping?. mpv's window is always created with incorrect dimension, not the video's dimensions. It almost looks like sway intends to create it like a 2nd or 3rd vertically tiled window but the rule forces it to be floating. The way it's supposed to work is how a floating mpv is handled in dwm, spectrwm or xmonad.. It's even worse for Java Swing windows. Any (file) dialog you open will be very small. It's a little better in Weston.\n_JAVA_AWT_WM_NONREPARENTING=1 is set.\nXMonad suffers from this too as do dwm and spectrwm. WindowMaker and FVWM deal with Swing dialogs properly, and out of the X11 tiling WMs dwm and spectrwm behave a little better than XMonad.. No, what I meant is that there's a similar issue which exists to varying degrees in other tiling window managers and also Weston (a floating compositor). That issue gets worse under Sway/XWayland, same as XWayland integration has more bugs in sway than it does in Weston/Xwayland. It is definitely a different bug, since none of the listed window managers or Weston exhibits the floating mpv problem.The Java issue doesn't need a floating rule or anything like that and is a quirk of Java Swing that's worse under Sway/XWayland.\nSo, it seems that sway creates the mpv window with dimensions like it was tiled as one of two or three columns, although it's floating.. The Java problem probably warrants a separate ticket.. Some observations with today's build that's using https://github.com/Cloudef/wlc/commit/e3abf0b2f322b9d376ced452190cd4dd9f6fcb8a and https://github.com/SirCmpwn/sway/commit/ea0f1f3a7edf92537f74b70b520103bb38ff1411:\nJava Swing\n\nJava Swing modal dialog initial dimensions seem to be respected correctly now.\nGeneral Wayland focus issue with Java Swing persists. Under Sway and Weston, if you have switched from the Swing window to another window and switch back, you have to explicitly set focus by clicking in the Swing window. Otherwise, Wayland doesn't give focus to the active window (Swing application) and none of the keys pressed are delivered to the Swing window.\n\nmpv\n\n\nmpv floating rule seems to be applied if mpv is an XWayland window and not using Wayland GPU context, but it's not centered. Since we want to use mpv's Wayland context to make use of the VAAPI pipeline, matching class=\"mpv\" is useless anyway. So changing it to title=\"mpv\" gives us a floating window that is correctly centered but where the dimensions are ignored or set so constraints as if it was tiled like a new column.. Closing due to wlroots rewrite.. Thanks, b63b011 doesn't crash anymore, closing.\n. Unfortunately, it doesn't. The window dimensions looks similar to the vertically large, horizontally small floating mpv (aka like a column), just not as high as the mpv window. Tested with sway version 0.6-107-g09670fc (2016-06-02, branch \"master\").\n. As of today's build that's using https://github.com/Cloudef/wlc/commit/e3abf0b2f322b9d376ced452190cd4dd9f6fcb8a and https://github.com/SirCmpwn/sway/commit/ea0f1f3a7edf92537f74b70b520103bb38ff1411\nthe issue persists for me with Firefox, which now exclusively uses GTK+3, since GTK+2 support has been dropped.\n\n\nClear setting dialog dimension ignored (it's correctly floating, though)\n\nAbout dialog is tiled but dimensions are not broken\nFirefox update progress bar dialog is not floating but tiled and as a GTK+3 window gets stretched and zoomed in. It doesn't get tiled in a useful way like About.\n\nIs this issue tracked in a different ticket, or should this one be re-opened?. It's actually + in the config file and these are typos in the ticket only. Fixed above.\n. This works:\nbindsym Mod1+Shift+l exec swaylock -c 333333 -s fill -i ~/some_wallpaper.jpg\nThese don't:\nbindsym Mod4+Shift+l exec swaylock -c 333333 -s fill -i ~/some_wallpaper.jpg\nbindsym $mod+Shift+l exec swaylock -c 333333 -s fill -i ~/some_wallpaper.jpg\n. I found the culprit. The default config has $mod+Shift+l bound to move right.\n. Solved by removing default binding.\n. I've observed the same issue under pure X11 with a Java Swing application.. Closing due to wlroots rewrite.. Yes, though I wouldn't be able to tell exactly when this started. Perhaps somewhere in the last week or two/three?\nMaybe at some point it'd make sense to pull in and link wlc (or its successor) as a submodule of sway, making sure they're both compatible at all times.. ",
    "josephg5": "i have the same issue too. i have this rule in ~/.config/sway/config\nfor_window [class=\"mpv\"] floating enable, focus;\nmpv window seems to be floating but with the same dimensions as if it were not floating, ie a vertically stretched mpv window that looks like a tiled column but only floating.\nin my mpv.conf, i restrict mpv window size with autofit. so i can clearly see issues with window sizes.\nthis issue is not present in i3, nor in weston. so this seems to be sway specific.. testing further it seems mpv floating windows seem to take the same size as whatever they would be if not floating. if i do a $mod+v before mpv, floating window is a horizontal row across the middle of the screen. if i do a $mod+h before mpv, floating window is a vertical column across the middle of the screen. size is about the same as if it would have been, had it not been set to floating.. ",
    "vadixidav": "@psgarsenal Does that also account for the titlebars as well? I wasn't aware they used the same system, but they do look similar now that I look. It looks like swaybar is in this repository either way, so this is the right place then.\n. ",
    "ianyfan": "Would a link to https://i3wm.org/docs/ipc.html and a note about sway-specific message types do?. Okay, I'll take a look.. It appears that the first case (L39) was added in order to fix #382. Removing that line now seems to work (and sending a workspace::focus event when moving a container to another workspace doesn't really make sense to me anyway since it's never technically visible), except that swaybar isn't updated correctly if it changes at the exact same time, so I don't know whether this can be fixed separately, or whether to change it so that the event is only emitted once in every situation, or just to keep it as it is for now.\nIf this is due to some problem in swaybar, I think it would be nice to fix it, since I've also been getting a problem that seems to be related, in which swaybar doesn't update correctly if you change the output at the same time as switching to a new (empty) workspace (i.e. in response to the workspace::focus event), but I'd have to look a bit more into how swaybar works in order to see if that's fixable.. @walterhuangio See https://github.com/swaywm/sway/pull/3249. SWAYSOCK I3SOCK WAYLAND_DISPLAY XCURSOR_SIZE XCURSOR_THEME. What does this still require?. It is? I can run swaymsg -t get_seats just fine.. What does this still require?. So is this only on config reload? Not when the hidden state/mode is updated?. Makes sense, but I don't think you can distinguish between the different cases from just the event. Though since the other cases aren't implemented yet, I guess it doesn't matter for now.. Started having a look at this, specifically at i3 behaviour, which does appear to only update upon receiving the event. The thing is, this means that if you add or remove bars in the config between reloads, then they do not register upon reload, i.e. added bars do not get added and removed bars do not get removed. Is this the behaviour we want to replicate? Just wondering because in i3, you can still add or remove bars by using the restart command, which is not supported by sway.. Closed by https://github.com/swaywm/sway/pull/2677. Closed by https://github.com/swaywm/sway/pull/2720. Should be fixed by https://github.com/swaywm/sway/pull/2640 please check. Is this still a problem?. Closed by 85961f63bfe922831011f75860b3acde3d890a9f. Is this still an issue? I don't think I've been having issues with fullscreen xwayland windows.. @adtac Are you still working on this?. Is this still an issue on 1.0? If so, can you provide steps to reproduce?. What about: swaybg -o <output> [-i <image> -m <mode> -c <color>] -o <another-output> etc. as CLI, with long options?\nAlso, would this mean that if no valid outputs are found, swaybg would continue to run in case a valid output is then hotplugged?. Unfortunately, my above suggestion would break any other programs that can currently be used as swaybg_command.. Is this still an issue on 1.0? If so, can you give steps to reproduce?. Strangely, keys seems to work when mupdf is the first xwayland window to be opened, but not after that.. I performed a git bisect and this seems to be the commit that broke this: https://github.com/swaywm/wlroots/commit/d0b3aed584ecb4cbaccb94e76ca5bcbc952075de\n(Tested against 93696b78ecbc31ec34be97ec26836efb74d359f0 for anyone that wishes to check)\nAnyone have any insights into this?. Wait, I haven't updated the ipc_feature enum, because it seems to work without it, but I still need to work out what it does.. Wait, don't merge yet, I missed an occurrence of current_config I need to replace. RE: ipc_feature\nI can add to it but I'm not even sure what the point is if it's unused. Yes. Rebased. Still not sure about the last commit though.. I added it in when I rebased it last time, because it messed up the commit anyway, and the logic was basically the same. Probably should have mentioned that, sorry.\n(Also, I separated out the commits rather gratuitously so that I could keep track of each event, but I guess some of them could be squashed together if that seems sensible). Rebased with aforementioned fixes.. Note: not sure if instead this could be implemented by instead of getting the size first it just starts with a fixed size and resizes as more of the config is read. This could even allow included files to be expanded, if the read variable is moved outside of the function to keep track of it across function calls.\nTechnically outside of the scope of this PR though.. Np, sorry about messing it up the first time round, hopefully I didn't make any more mistakes this time. Yes. (Possibly non-exhaustive) list of properties missing in get_tree:\n\nborder\ncurrent_border_width\ndeco_rect\nfloating\nfloating_nodes\nfullscreen_mode\ngeometry\nlast_split_layout\norientation\noutput\npercent\nscratchpad_state\nstick\nswallows\nwindow\nwindow_properties\nwindow_rect\nworkspace_layout\n\nAll the other commands seem to match i3.. I think this might actually be finished, and that the remaining properties are, as discussed in #2530, undocumented and therefore should not be added.. Made a start. Most seems to be there, mainly issues of documentation.\n\n@SirCmpwn moved this list into the top-level description so that GitHub can track the progress of this issue\n\n. > was this list prepared against 0.15?\nI accidentally started on the 0.15 docs and when I switched to the 1.0 docs I forgot to check ones that were removed.\nThe ones that I put \"can be command\" means that in i3, they're only supposed to be used in the config file but in sway they can also be executed at runtime. I don't know if you want to change it. Otherwise, it works as well as in i3.\n(I was going to put a note about that in the original comment but forgot)\nI also noticed a few markdown escapes I missed, I'll fix that.\n. Actually, if primary outputs aren't being supported you can mark them off. . i3-gaps:\n\n[x] gaps (though setting for workspace syntax is slightly different)\n[x] smart_gaps on|off\n[x] smart_borders on|no_gaps|off\n[x] hide_edge_borders smart_no_gaps. Sanity check that you're doing the busctl call after running virtboard?. Got it, I'll add a checklist in the description. Ready for review, though not sure if I've missed any edge cases in testing.. The logic is all done now, I think; I'll have a look at splitting the long lines later, and maybe squash some commits together.. Is this fixed by https://github.com/swaywm/sway/pull/2698?. Does the man page need to be updated?. Seems like it is: https://github.com/swaywm/sway/blob/146cc0a441f6901eeba7df691098f71d0de73a53/sway/commands/output/position.c#L29\n\nIn any case, both should be documented, perhaps with a note if using a space deprecated.. Ready for review, I think.\nIn particular, please see note about assigning sticky windows. Because it currently causes a crash.. Made a quick addition to allow move container to workspace number <number><name>. Okay, should check that off the list then. Does the timeout default to 500ms? Plus is it documented? If not, that could be fixed and added in this PR.. This is causing my sway to crash if I hotplug a new output whilst having floating windows. Logs are normal up to that point and do not give any information on the crash. Can you reproduce?. Did not fix the issue, but this time there was an error log, hopefully it is meaningful:\n```\n==18105==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x607000070ef8 at pc 0x562ddf0b9a69 bp 0x7fffdf93bf40 sp 0x7fffdf93bf30\nREAD of size 8 at 0x607000070ef8 thread T0\n    #0 0x562ddf0b9a68 in update_marks_texture ../sway/tree/view.c:892\n    #1 0x562ddf0ba7ed in view_update_marks_textures ../sway/tree/view.c:965\n    #2 0x562ddf0aa10c in container_discover_outputs ../sway/tree/container.c:1330\n    #3 0x562ddf04e272 in transaction_apply ../sway/desktop/transaction.c:197\n    #4 0x562ddf04e468 in transaction_progress_queue ../sway/desktop/transaction.c:214\n    #5 0x562ddf04fd97 in transaction_commit_dirty ../sway/desktop/transaction.c:396\n    #6 0x562ddf0b15db in output_layout_handle_change ../sway/tree/root.c:21\n    #7 0x7f49c432bdb7 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #8 0x7f49c43017a4 in output_layout_reconfigure ../subprojects/wlroots/types/wlr_output_layout.c:134\n    #9 0x7f49c430308e in wlr_output_layout_add_auto ../subprojects/wlroots/types/wlr_output_layout.c:411\n    #10 0x562ddf0715fb in apply_output_config ../sway/config/output.c:215\n    #11 0x562ddf0c00dc in output_create ../sway/tree/output.c:75\n    #12 0x562ddf041d87 in output_enable ../sway/desktop/output.c:577\n    #13 0x562ddf041cc7 in handle_new_output ../sway/desktop/output.c:567\n    #14 0x7f49c432bdb7 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #15 0x7f49c429e614 in new_output_reemit ../subprojects/wlroots/backend/multi/backend.c:113\n    #16 0x7f49c432bdb7 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #17 0x7f49c428e3ae in scan_drm_connectors ../subprojects/wlroots/backend/drm/drm.c:981\n    #18 0x7f49c42848a3 in drm_invalidated ../subprojects/wlroots/backend/drm/backend.c:112\n    #19 0x7f49c432bdb7 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #20 0x7f49c42a12d3 in udev_event ../subprojects/wlroots/backend/session/session.c:51\n    #21 0x7f49c2822a41 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0x9a41)\n    #22 0x7f49c282114b in wl_display_run (/usr/lib/libwayland-server.so.0+0x814b)\n    #23 0x562ddf037d3c in server_run ../sway/server.c:164\n    #24 0x562ddf0369b5 in main ../sway/main.c:445\n    #25 0x7f49c2004222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #26 0x562ddf01eb9d in _start (/usr/local/bin/sway+0x2fb9d)\n0x607000070ef8 is located 8 bytes to the left of 80-byte region [0x607000070f00,0x607000070f50)\nallocated by thread T0 here:\n    #0 0x7f49c4494019 in __interceptor_malloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:86\n    #1 0x562ddf0c6af4 in create_list ../common/list.c:14\n    #2 0x562ddf0a0407 in container_create ../sway/tree/container.c:95\n    #3 0x562ddf0a215d in container_view_create ../sway/tree/container.c:434\n    #4 0x562ddf0b7726 in view_map ../sway/tree/view.c:521\n    #5 0x562ddf055165 in handle_map ../sway/desktop/xdg_shell.c:399\n    #6 0x7f49c432bdb7 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #7 0x7f49c42d5120 in handle_xdg_surface_commit ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:363\n    #8 0x7f49c4311c33 in surface_commit_pending ../subprojects/wlroots/types/wlr_surface.c:398\n    #9 0x7f49c4312161 in surface_commit ../subprojects/wlroots/types/wlr_surface.c:470\n    #10 0x7f49bec5b1c7 in ffi_call_unix64 (/usr/lib/libffi.so.6+0x61c7)\n    #11 0x7f49bec5ac29 in ffi_call (/usr/lib/libffi.so.6+0x5c29)\n    #12 0x7f49c2824a2e  (/usr/lib/libwayland-server.so.0+0xba2e)\n    #13 0x7f49c2820f28  (/usr/lib/libwayland-server.so.0+0x7f28)\n    #14 0x7f49c2822a41 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0x9a41)\n    #15 0x7f49c282114b in wl_display_run (/usr/lib/libwayland-server.so.0+0x814b)\n    #16 0x562ddf037d3c in server_run ../sway/server.c:164\n    #17 0x562ddf0369b5 in main ../sway/main.c:445\n    #18 0x7f49c2004222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #19 0x562ddf01eb9d in _start (/usr/local/bin/sway+0x2fb9d)\nSUMMARY: AddressSanitizer: heap-buffer-overflow ../sway/tree/view.c:892 in update_marks_texture\nShadow bytes around the buggy address:\n  0x0c0e80006180: fd fd fd fd fd fd fd fd fa fa fa fa 00 00 00 00\n  0x0c0e80006190: 00 00 00 00 00 fa fa fa fa fa 00 00 00 00 00 00\n  0x0c0e800061a0: 00 00 00 fa fa fa fa fa 00 00 00 00 00 00 00 00\n  0x0c0e800061b0: 00 00 fa fa fa fa 00 00 00 00 00 00 00 00 00 00\n  0x0c0e800061c0: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fa fa\n=>0x0c0e800061d0: fa fa fd fd fd fd fd fd fd fd fd fd fa fa fa[fa]\n  0x0c0e800061e0: 00 00 00 00 00 00 00 00 00 00 fa fa fa fa 00 00\n  0x0c0e800061f0: 00 00 00 00 00 00 00 00 fa fa fa fa 00 00 00 00\n  0x0c0e80006200: 00 00 00 00 00 00 fa fa fa fa 00 00 00 00 00 00\n  0x0c0e80006210: 00 00 00 00 fa fa fa fa 00 00 00 00 00 00 00 00\n  0x0c0e80006220: 00 fa fa fa fa fa 00 00 00 00 00 00 00 00 00 00\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==18105==ABORTING\n```\nIt is specifically on adding a new output.. Almost every occurrence of this functions calls f(container, data) followed by container_for_each_child(container, f, data), which caused f to be called twice on the container. \nThe rest of the occurrences which do not call f, I checked to make sure they did not require it to be called.. I suppose the commit message isn't completely accurate, since it only double iterates on the top-level container, so might change that. Also could be fixed by removing the extra calls before calling the function, but then I feel like the function name should be changed.. The function implementation is fine, but it's called incorrectly in other places because they also call f on the top-level container.\nAdmittedly, should have explained the problem better originally.. @sharethewisdom mupdf is already known to have problems: https://github.com/swaywm/sway/issues/2231 and the above PR doesn't seem to fix it.. Sure. I start with workspace 1 on output 1 with a floating window (and the cursor) on it.\nNow I add output 2 (with dimensions 1920x1080) on the left of output 1, so it then becomes positioned at 0x0 and the old output at 1920x0 (with workspace 2 on it). However, the position of the floating window and cursor is unchanged, so they are rendered on output 2 (tiling/fullscreen containers are unmoved), despite still belonging to output 1. Thus, focus is still on output 1, and the floating window does not render new frames until it is moved via the title bar (haven't tested resizing it but should also work), at which point it does become a child of workspace 2 and works properly.\nLet me know if you want to see the whole debug log.. I think both problems have been fixed now. Added suggested changes and rebased.. Hasn't crashed in my testing so LGTM\nOn the other hand, I'm having a harder time reproducing the crash reliably today, I've only managed to do it once on the master branch.. My bad, I forgot that both last_workspace and new_workspace can be NULL here. I'll do a quick go over the function again to see if I've missed anything else.. I think this is fixed by #2540. Is this still an issue? If so, can you give steps to reproduce?. I don't think it is related.\nWhat was the context here? Because I don't understand how new_output can be NULL here when new_workspace is non-NULL.. Should (does) sway inform (maybe nag) the user that they're using a deprecated command?. @RyanDwyer Thanks for the explanation. Added a small change that fixes misalignment when moving a container due to gaps being present when they are assumed to not be. I hope that this does not have any unintended consequences.. Rebased and changed function name. Just realised that I forgot to check for NULL block in the new function, so may open a new PR to address that. Can it actually be NULL? Also, should I just remove the i3_bar_block_free function and move its logic to the unref function?. I think there are still some quote-escaping issues. Test with files named \".png and '.png and make sure you can get them to work. (really contrived cases, I know, but still...). view_init, sorry, mis-remembered the function name.. Makes sense, and still seems to work.. Thanks for testing. Does this work?\nAlso: in what cases can workspace->output actually be NULL? Except for between creating the workspace and assigning it to an output, I'm supposing.. Possibly naive question: why is the path handled like this instead of either being passed as-is or using something like realpath?. I'll have a look into it.. Addressed comments; the rewriting makes me want to squash some commits together.. This is more difficult than I thought it would be, so I'm not sure if this is a good solution.\nAlso, why did you change the state to be a pointer? Can't you have a union of structs directly?. When the server shuts down, it destroys all of the wayland clients, which create transactions to destroy the sway view, as well as the rest of the nodes. If the transactions just get destroyed, it leaves these nodes hanging around as leaked memory.\nIf I try to force through all of the pending transactions at the end using this patch, I get this error:\n```\n2018-09-21 11:00:37 - [sway/desktop/transaction.c:284] Applying transaction 0x6040000f1fd0\n2018-09-21 11:00:37 - [sway/desktop/transaction.c:404] Transaction 0x6040000f2010 committing with 2 instructions\n2018-09-21 11:00:37 - [sway/desktop/transaction.c:284] Applying transaction 0x6040000f2010\n2018-09-21 11:00:37 - [sway/desktop/transaction.c:404] Transaction 0x6040000f2090 committing with 2 instructions\n2018-09-21 11:00:37 - [sway/desktop/transaction.c:284] Applying transaction 0x6040000f2090\n=================================================================\n==21859==ERROR: AddressSanitizer: heap-use-after-free on address 0x613000000168 at pc 0x7f07abeea9e0 bp 0x7ffe5064bbc0 sp 0x7ffe5064bbb0\nREAD of size 8 at 0x613000000168 thread T0\n    #0 0x7f07abeea9df in wlr_egl_make_current ../subprojects/wlroots/render/egl.c:304\n    #1 0x7f07abef1ea0 in gles2_texture_destroy ../subprojects/wlroots/render/gles2/texture.c:119\n    #2 0x7f07abef48d0 in wlr_texture_destroy ../subprojects/wlroots/render/wlr_texture.c:16\n    #3 0x7f07abf1f370 in wlr_buffer_unref ../subprojects/wlroots/types/wlr_buffer.c:139\n    #4 0x556e016eabfa in view_remove_saved_buffer ../sway/tree/view.c:1063\n    #5 0x556e0167e2c9 in apply_container_state ../sway/desktop/transaction.c:258\n    #6 0x556e0167ebf0 in transaction_apply ../sway/desktop/transaction.c:312\n    #7 0x556e0167f0db in transaction_progress_queue ../sway/desktop/transaction.c:349\n    #8 0x556e0167f2f0 in transaction_progress_queue ../sway/desktop/transaction.c:373\n    #9 0x556e0167f2f0 in transaction_progress_queue ../sway/desktop/transaction.c:373\n    #10 0x556e01680a5a in destroy_transaction_queue ../sway/desktop/transaction.c:541\n    #11 0x556e016668c6 in server_fini ../sway/server.c:149\n    #12 0x556e016656c0 in main ../sway/main.c:451\n    #13 0x7f07aaa19222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #14 0x556e0164ac2d in _start (/usr/local/bin/sway+0x2ec2d)\n0x613000000168 is located 296 bytes inside of 344-byte region [0x613000000040,0x613000000198)\nfreed by thread T0 here:\n    #0 0x7f07ac0d3c19 in __interceptor_free /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:66\n    #1 0x7f07abebc6b3 in backend_destroy ../subprojects/wlroots/backend/drm/backend.c:54\n    #2 0x7f07abeb8f0d in wlr_backend_destroy ../subprojects/wlroots/backend/backend.c:46\n    #3 0x7f07abed7afc in multi_backend_destroy ../subprojects/wlroots/backend/multi/backend.c:53\n    #4 0x7f07abed7c89 in handle_display_destroy ../subprojects/wlroots/backend/multi/backend.c:84\n    #5 0x7f07ab039bee  (/usr/lib/libwayland-server.so.0+0x8bee)\n    #6 0x7f07ab03a376 in wl_display_destroy (/usr/lib/libwayland-server.so.0+0x9376)\n    #7 0x556e01666880 in server_fini ../sway/server.c:147\n    #8 0x556e016656c0 in main ../sway/main.c:451\n    #9 0x7f07aaa19222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #10 0x556e0164ac2d in _start (/usr/local/bin/sway+0x2ec2d)\npreviously allocated by thread T0 here:\n    #0 0x7f07ac0d4231 in __interceptor_calloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:95\n    #1 0x7f07abebce8a in wlr_drm_backend_create ../subprojects/wlroots/backend/drm/backend.c:139\n    #2 0x7f07abeb9484 in attempt_drm_backend ../subprojects/wlroots/backend/backend.c:131\n    #3 0x7f07abeb9e16 in wlr_backend_autocreate ../subprojects/wlroots/backend/backend.c:265\n    #4 0x556e016659f0 in server_privileged_prepare ../sway/server.c:37\n    #5 0x556e016650a3 in main ../sway/main.c:364\n    #6 0x7f07aaa19222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #7 0x556e0164ac2d in _start (/usr/local/bin/sway+0x2ec2d)\nSUMMARY: AddressSanitizer: heap-use-after-free ../subprojects/wlroots/render/egl.c:304 in wlr_egl_make_current\nShadow bytes around the buggy address:\n  0x0c267fff7fd0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c267fff7fe0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c267fff7ff0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c267fff8000: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n  0x0c267fff8010: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n=>0x0c267fff8020: fd fd fd fd fd fd fd fd fd fd fd fd fd[fd]fd fd\n  0x0c267fff8030: fd fd fd fa fa fa fa fa fa fa fa fa fa fa fa fa\n  0x0c267fff8040: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c267fff8050: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c267fff8060: fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa fa\n  0x0c267fff8070: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==21859==ABORTING\n```\nThe only time everything worked correctly was when I tested it with -Dnoatomic which was where I got the commit idea from.\nSo honestly... I'm not really sure, I'm not grokking it currently, so I wouldn't mind if you wanted to have a go yourself.. I'm happy to just add that line for now, and I'll investigate my other issue and open another PR/issue if I work out what's going on.. Yes, go ahead. Strange. How reproducible is it? And do you have to wait 5 minutes each time?. That occurs when looking for the opening bracket of the infinite array, and it encounters a character that is not either [ or whitespace. Could you share the output of your status command up to the first status?. Assuming the third line is an error message that isn't actually sent, there's nothing there that seems like it should cause an error. Could you share your i3status-rs config?. @sghctoma From the POSIX documentation:\n\"The characters read, including any delimiter, shall be stored in the object, and a terminating NUL added when the delimiter or end-of-file is encountered ... getline() and getdelim() functions shall return the number of bytes written into the buffer, including the delimiter character if one was encountered before EOF ... if no characters were read and the stream is at end-of-file, the end-of-file indicator for the stream shall be set and the function shall return -1\"\nThis does not explicitly specify the case that the delimiter is EOF, but seems to indicate that it is valid to encounter EOF before the delimiter, and that it should return what it has read so far. If FreeBSD does not do that, then I would argue that it is not POSIX-compliant.\nI didn't add clearerr because it doesn't read from the file anymore, it reads straight from the stream. I'm not sure if adding it would fix anything.. I see. So you're saying that where Linux treats the end of a stream as an EOF, FreeBSD treats it as an error, and only treats it as an EOF when the stream actually terminates?\nIf that is the case, then it feels like the only solution is to fread large chunks until no more can be read, reallocing the buffer as needed, but again I'm not sure if FreeBSD treats that any differently.\nHonestly, I've been meaning to try out FreeBSD myself but I keep putting it off.... @RyanDwyer I've run that several times and it hasn't failed :/\nI've added a commit to help debug this, could you apply that and see if it gives any useful information?. I think the problem is that I have misunderstood json_tokener_continue. Will push a fix shortly.. @RyanDwyer Check now. I can instantly reproduce the error by adding some sleeps between each line.\nI should have tested with split json earlier, and caught this bug much earlier, my apologies.. @cnt0 @Ogromny see if it is fixed now\n@sghctoma please get back to me on this and we can open another PR. Ref https://github.com/swaywm/sway/issues/1685?. Probably anything that isn't in the i3 reply.. I don't think there are any additional tablet options.\nI think there are pointer options not supported by tablets, but enough are supported that it seems it would be a lot of code duplication, and the way it is handled is already a \"throw everything at the wall and see what sticks\" approach.\nE.g. out of 12 possible options, my tablet supports 4 and my mouse supports 6.. When https://github.com/swaywm/sway/issues/1779 is added you might be able to do something like bindsym <useless key> ... keyboard type <useful key>. Could you add some documentation in sway.5.scd please?. I can reproduce it. @RyanDwyer your patch works. Can this be fixed by sending a leading comma instead? (except for the first item obviously). Then honestly, your implementation isn't properly parsing JSON, it's parsing lines of JSON arrays with optional leading commas, which may happen to be valid JSON.. Functionality is basically all there now, though I may still make small implementation changes.. I fixed mode & hidden_state, I'm not sure about the other ones though.. I'm fine with only allowing performing mode and hidden_state commands at runtime, though there's a bug with that currently: https://github.com/swaywm/sway/pull/2791#issuecomment-427852910. EDIT: now that the PR has been merged, this patch is no longer required\nThis PR is ready for review ~, though until https://github.com/swaywm/sway/pull/2808 is merged, this requires a patch in order to test changing mode/state at runtime:~\n```\ndiff --git a/sway/commands/bar.c b/sway/commands/bar.c\nindex 03f4c557..b0733452 100644\n--- a/sway/commands/bar.c\n+++ b/sway/commands/bar.c\n@@ -46,14 +46,16 @@ struct cmd_results cmd_bar(int argc, char *argv) {\n        return error;\n    }\n\nif (find_handler(argv[0], bar_config_handlers,\nsizeof(bar_config_handlers))) {\nif (config->reading) {\nreturn config_subcommand(argv, argc, bar_config_handlers,\nsizeof(bar_config_handlers));\n+\n+\nif (!config->reading) {\nif (!find_handler(argv[0], bar_config_handlers,\nsizeof(bar_config_handlers))) {\nreturn cmd_results_new(CMD_FAILURE, \"bar\",\n\"Can only be used in config file.\");\n        }\nreturn cmd_results_new(CMD_FAILURE, \"bar\",\n\"Can only be used in config file.\");\nreturn config_subcommand(argv, argc, bar_config_handlers,\n\nsizeof(bar_config_handlers));\n    }\nif (argc > 1) {\n``. I'm a bit confused what you're asking. The patch in the comment is just so you can runbar mode .../bar hidden_state ...` at runtime.\n\n\nAs for this PR, it allows using the bar subcommands mode, hidden_state and modifier as expected, in the config file and during runtime.\nExample:\nbar {\n    mode hide\n    hidden_state hide # default, but provided here for explicitness\n    modifier Mod4 # also default\n}\nhides the bar, but shows it if you press down Mod4 or when there is an urgent workspace.\nbar mode invisible hides the bar completely.\nbar hidden_state show which only has an effect in bar mode hide behaves like hide but the bar is always shown, on top of the workspace.. Forgot to change it. My bad, I'm still not grokking this part of the codebase.. Does this fix https://github.com/swaywm/sway/issues/2741? It seems like it should.. I'll test it. Pointer isn't getting bound on start-up. Otherwise does fix #2741 . You're releasing the old pointer event if seat_handle_capabilities is called for a non-pointer. I think you need to move that block into the next block.. Might have something to do with having multiple seats, perhaps? If I add some logging, I get this at startup:\n2018-10-06 18:38:13 - [swaybar/bar.c:292] adding pointer for 0x607000001670\n2018-10-06 18:38:13 - [swaybar/bar.c:287] releasing pointer for 0x6070000016e0\nwhich results in there being no pointer at the start.\n(just used pointer values for the seats because I'm not sure what other property to use). Superseded by https://github.com/swaywm/sway/pull/2789. You can use [con_id=__focused__]. Thanks!. Maybe you should add a check in status_line_init for a NULL cmd?. > I found and fixed a bug in cmd_bar which prevented the anytime commands from being run at runtime.\nI think this was actually right before. It's just that the array names bar_handlers and bar_config_handlers seem to be the wrong way round for what they denote.. ~Closes~ Ref https://github.com/swaywm/sway/issues/1521. https://github.com/swaywm/sway/pull/2751 adds that, so I guess wait until that is merged.. Actually, I'm not sure whether that PR is asking for bindings to be added at runtime, it's not very clear. In any case, it's so old that I don't actually think it's a problem to close it, and to open a new PR with  more specific request.. Bug - this config is invalid:\nbar {\n    id position\n}. So what is the planned syntax for performing runtime commands for specific bars? Are you going to modify every command so that it can accept bar <subcommand> [<bar_id>]?. Would there be any issues with bars having an id that is the same as the name of a subcommand? i.e. any ambiguities. Also what would happen if the command was bar <id> mode ... <different_id>?. >> Also what would happen if the command was bar  mode ... ?\n\nIt could go one of three ways: (1) use , (2) use , or (3) be invalid. My vote is for (2), where  has preference when given,  is second preferred, and all bars is the fallback (for i3 compat).\n\nActually, I think it should be the other way round, since if  is new then it would spawn a new bar, and if the mode didn't affect that it would be weird. This would require small changes to the command code.\nOr maybe both should be changed, I don't know what happens in i3 if you include mode ... <different-id> in a bar block the config file.. Why is id and swaybar_command not being allowed at runtime?. @RedSoxFan If you make the follow-up PR, can you remember to change the man pages to reflect this change in behaviour? Thanks. Can you provide an example (minimal) config, with expected behaviour and actual behaviour, to reproduce?\nIt feels a bit like you're misunderstanding the set command: it does not provide an alias to a key, it just assigns a value to a variable, i.e. you can do something like set $x 2; workspace $x and that will switch to workspace 2.\nSo I would hazard to guess that you do not have an issue with the set command but with the naming of your keys.. This isn't the right check. The right check is that the container isn't NULL in cmd_sticky, like in https://github.com/swaywm/sway/pull/2794. I still have pixel gaps between the bar and the edge of the screen. Is that a separate issue?. By \"the bar\" I meant swaybar, not sure why I was being so ambiguous. I'll get a screenshot.. \ngrim isn't capturing a row of grey pixels at the bottom. Looks like it's a problem with swaybar not dealing with scaling properly.. No, it's DRM. This would require sway to render top-layer panels above fullscreen containers.\nI am not sure which behaviour is intended.. Works, though I still find it a bit weird that moving the container changes the focus so that it has to be manually moved back.. Thanks!. Could you explain why this is required? Thanks.. Okay. Should this be put after the check_bindings block so that it can be overridden by bindings?\nAlso, would this send out an extraneous event if the user clicks on a hotspot? Not sure what i3 does.. I think you should add a property to the ipc binding event for this.. Firstly, can sway distinguish between surfaces that don't use the pointer at all and ones that do, but don't set a cursor?\nSecondly, can there be valid cases where surfaces want to use the pointer but don't want/care to set the cursor?. > Per the Wayland spec, no. If clients don't want a cursor, they can set it to NULL on enter.\nDoesn't that hide the cursor? What if it doesn't care to change it from what it already is?. Then you're suggesting that if a surface opens without setting a cursor because it just wants to display stuff, sway shouldn't change the cursor from what it was before?. But if instead sway doesn't change it, but the cursor moves into a window that doesn't set the cursor, and it's not a pointer, that feels wrong to me.. Seems like a lot of boilerplate to me :(. position left|right should not be allowed, and should raise an error.. Closing by https://github.com/swaywm/sway/pull/2925, please re-open if you are still experiencing this issue.. I'm not very aware of this problem. Could you give a set of steps to help me test it? (or maybe push this to a separate PR/issue). Could you outline what the race condition is? Thanks. Is it customary to require git for building from sources if it's just to get the version string? Why not make it optional and just produce a message like \"unable to provide version string since this was not built with git available\"?. I would do something like this:\n```\n\nGaps\n\nExample configuration:\n\ngaps inner 8\n\nSee man 5 sway for a complete reference.\n``\nIt might be a good idea to separate the gaps commands into its own section insway(5).. What does this do? Add a man entry please.sway-input.5.scd. We don't emit output events anywhere yet, since it's not documented by i3 when they should be emitted, so there hasn't really been a reason to allow it to be subscribed to yet.. If this gets implemented, it could also remove unnecessary xwayland properties from SWAYSOCK.. Why doesn'toutput_get_active_workspace` work properly if the top of the stack is the view on workspace 1? Wouldn't it find that view, and then take its workspace, which is 1?\nAlso, I feel like it would make more sense if output_get_active_workspace were moved to sway/tree/output.c instead of being in sway/desktop/output.c.. So why doesn't seat_set_raw_focus put the parents on the focus stack as well?. Duplicate of https://github.com/swaywm/wlroots/issues/958. Yeah sorry, I was planning on waiting to see if the Weston issue would get any feedback but then forgot about it.. LGTM. Is it also possible to change the scale factor to be a double? Since it is currently an integer, it displays the wrong value when the output is fractionally scaled.. https://github.com/swaywm/wlroots/issues/958. There are some more additions outlined in the release notes, e.g. sync command, so don't close this until they've all been sorted.. We're also missing the parse_error property, I think that should be addressed too.. I think this was fixed by #3049 could you check please?. +space seems to work fine for me. Please re-open, attaching a debug log, if this is still an issue.. > Can you check if the dbus invokation works?\n\nbusctl call --user sm.puri.OSK0 /sm/puri/OSK0 sm.puri.OSK0 SetVisible b true\nThe keyboard should appear after this.\n\nhttps://github.com/swaywm/sway/pull/2376#issuecomment-441193511. > wlr_backend_destroy is supposed to reset everything properly\nHas this been addressed?. Thanks!. Makes sense but it might make the wordexp logic a bit more complicated.. Would this work?\n```\ndiff --git a/sway/config.c b/sway/config.c\nindex 8bc65857..4311add4 100644\n--- a/sway/config.c\n+++ b/sway/config.c\n@@ -316,19 +316,10 @@ static char *get_config_path(void) {\n                SYSCONFDIR \"/i3/config\",\n        };\n\nchar *curr_config_home = getenv(\"XDG_CONFIG_HOME\");\nif (!curr_config_home || !*curr_config_home) {\nchar *home = getenv(\"HOME\");\nchar *config_home = malloc(strlen(home) + strlen(\"/.config\") + 1);\nif (!config_home) {\nwlr_log(WLR_ERROR, \"Unable to allocate $HOME/.config\");\n} else {\nstrcpy(config_home, home);\nstrcat(config_home, \"/.config\");\nsetenv(\"XDG_CONFIG_HOME\", config_home, 1);\nwlr_log(WLR_DEBUG, \"Set XDG_CONFIG_HOME to %s\", config_home);\nfree(config_home);\n}\nchar *config_home = getenv(\"XDG_CONFIG_HOME\");\nif (!config_home || !*config_home) {\nconfig_paths[1] = \"$HOME/.config/sway/config\";\nconfig_paths[3] = \"$HOME/.config/i3/config\";\n        }wordexp_t p;\n\n``. @artizirk Has the latest commit (i.e. 8aa035a8b47a3a5a9569f4d2d157098aa655e944) fixed it?. No themes are being found, even though looking at thebluemanpackage, it does install icons into/usr/share/icons/hicolor. My guess is either your$XDG_DATA_DIRSvariable is malformed, which means that/usr/shareisn't being searched for icons, or yourhicolordirectory does not contain the fileindex.theme` (or the file is corrupted), in which case you should reinstall it from https://www.freedesktop.org/software/icon-theme/releases/\n\n\nI should probably add a warning message if the \"Hicolor\" is not found, since it is required to be present as a fallback.. The latest commit should fix this, though I think it makes the function a bit less elegant. @artizirk If it still crashes with the latest changes, could you provide a backtrace? Thanks.. Sounds like an idea, but we don't even have that for clicking on status blocks yet. . This PR is now ready for review.\nFor ease of understanding, I've tried to make it as modular as possible, i.e. the implementation of icons and the watcher function completely independently from everything else, and there is only just enough interdependency between the host & items to allow the host to create & destroy items. The tray mostly acts as a container to hold all the other structures, its main job being to watch for disappearing watchers and try to create a new one.. I can't seem to reproduce this. Does it happen reliably?. Need to set enable-tray=true in meson. Do you want it to be true by default?. I pushed a fix for this crash, but it's strange that it happened, since it should have found the icon by name, especially since you indicated that it was working before it crashed.. > I had konversation and akregator running, then uninstalled both of them without killing either process.\nAh, nice edge case I didn't think of. However, it should fail gracefully without special handling, I just had that bug that didn't handle empty pixmaps correctly, so it should be all good now.\n\nI wonder if it would make sense to make a little library in wlroots for this, especially once xembed is working. Or maybe a standalone library...\n\nI don't think it makes sense for it to be in wlroots, since it's not really got anything to do with Wayland per se. It could work as a standalone library, though it does have a dependency on lists, so would have to work out what to do about that.. Registering the host multiple times isn't an issue, and it only happens here as a caveat of registering the watcher and the host in the same event tick, which means the host registers once because it thinks there is no watcher, and then again once the watcher turns up on the next tick, and I think it's more trouble than it's worth to do the check to prevent this since it isn't a problem.\nAs for the icons not showing up, I'm not sure. I don't think there's any way the item could be registering and the watcher fails without printing out some sort of debug log.\nAs a sanity check, make sure the watcher is actually being registered, and that the items are also turning up on dbus. On the off-chance you (or anyone else wanting to test this) aren't sure how to do this, to save a comment (and for ease of copy-paste?), to check the watcher is present, run busctl --user introspect org.kde.StatusNotifierWatcher /StatusNotifierWatcher org.kde.StatusNotifierWatcher\nTo look for items:\n- run busctl --user and look for services owned by the process; if it's well-behaved, it should be called be called org.kde.StatusNotifierItem-<pid>-<random number> but sometimes it's just the unique name :1.<some number>\n- run busctl --user tree <service name from first step> to see what the object path is; if it's well-behaved, it should be /StatusNotifierItem, but the ayatana ones are always something silly like /org/ayatana/NotificationItem and then they also have the menu as a sub-object which is confusing\n- if it turns up here, then it's usually all good, but you can run busctl --user introspect <service name> <object path> org.kde.StatusNotifierItem to check that all the properties are there\nI could never get blueman-applet to work, personally, and I couldn't find it on dbus, but konversation and slack should definitely work; I haven't tested the others.. Welp.\nI'm happy with the commits as they are, I just rebased it onto the latest master.. @electrickite Is this still an issue?. I believe I had the dropbox issue when I was testing this, so I'm not sure if there's anything I can do about it.\nAs for nm-applet, the menu doesn't show up because it hasn't been implemented yet. However, I'm still able to click on other tray icons, so I can't seem to replicate your problem. Maybe there's a clue in the (swaybar) debug logs?. Can you list the python packages required in a virtual environment to get this script to run? Thanks.. Could you attach the debug logs for when you try to register steam's icon?. That's strange. Can you get any icons working?. I think they use the dbus menu, which has not been implemented yet.. @progandy the current blocker is implementing layer shell popups. Missing features are now being tracked in https://github.com/swaywm/sway/issues/3799. Possibly, but it's more complicated than it seems so I don't think it's worth us worrying about it. (yet?)\nRef: https://stackoverflow.com/questions/3190146/is-it-better-to-allocate-memory-in-the-power-of-two. +1 to list_create and probably rename list_free to list_destroy too. Bearing that in mind, call this list_free_and_destroy or list_free_all_and_destroy (list_freeall_and_destroy)?. Ah, that's a good point. And since that functionality is needed in quite a few places, maybe this isn't a change worth doing.. I've added a commit to address the backslash continuation issue, hopefully this works? It's not the prettiest though.... Oh, I was going to squash the commits, but forgot, sorry.. For consistency, this should be changed in swaybar too.. Thanks!. I can't trigger a crash with the steps you outlined, but I think I found another way to do it: seems like if you restart Telegram and click the icon a couple of times, it sends a NewIcon signal, which triggers the callback from when the first icon was added. I thought it wouldn't because the sender is different, but I guess I thought wrong. I'm working out what the right/simplest fix is. Hopefully I can work out how to ignore it the way I thought it would, but probably the most correct way would be to unref the slot on SNI destruction, but then that would require a bit of extra code to keep it around, which makes it not as simple.\n:( is shown when it can't find an icon. The Telegram icon uses pixmaps instead of names so it isn't an issue of a missing icon file because Telegram should be communicating the pixmap over dbus. It works for me so I don't know what the problem is, sorry. Maybe there's a helpful tidbit in the debug logs.\nIt also doesn't show up if you start it before swaybar, but that's a problem with Telegram.. This PR is ready for review.. This opens a new file descriptor, which means the log line outputs a misleading value for lock_fd.. I don't think forking should be the default, but if you want it to be, please suggest what the flag and description should be.. Makes sense. I've changed it to -w to wait for the command to finish executing. What do you think?. This needs to be moved to the new repo. Try this patch?\n```\ndiff --git a/sway/config.c b/sway/config.c\nindex dfbe4cb9..b2742327 100644\n--- a/sway/config.c\n+++ b/sway/config.c\n@@ -601,6 +601,7 @@ static ssize_t getline_with_cont(char lineptr, size_t line_size, FILE file)\n }\nstatic int detect_brace(FILE file) {\n+   int ret = 0;\n    int lines = 0;\n    long pos = ftell(file);\n    char line = NULL;\n@@ -609,15 +610,15 @@ static int detect_brace(FILE file) {\n        lines++;\n        strip_whitespace(line);\n        if (line) {\n-           if (strcmp(line, \"{\") != 0) {\n-               fseek(file, pos, SEEK_SET);\n-               lines = 0;\n+           if (strcmp(line, \"{\") == 0) {\n+               ret = lines;\n            }\n            break;\n        }\n    }\n    free(line);\n-   return lines;\n+   fseek(file, pos, SEEK_SET);\n+   return ret;\n }\nstatic char expand_line(const char block, const char line, bool add_brace) {\n. This one might be nicer depending on your opinion of goto:\ndiff --git a/sway/config.c b/sway/config.c\nindex dfbe4cb9..6c6bca5e 100644\n--- a/sway/config.c\n+++ b/sway/config.c\n@@ -610,12 +610,14 @@ static int detect_brace(FILE file) {\n                strip_whitespace(line);\n                if (*line) {\n                        if (strcmp(line, \"{\") != 0) {\n-                               fseek(file, pos, SEEK_SET);\n                                lines = 0;\n                        }\n-                       break;\n+                       goto end;\n                }\n        }\n+       lines = 0;\n+end:\n+       fseek(file, pos, SEEK_SET);\n        free(line);\n        return lines;\n }\n. I think this would be better placed in the `else` block of the `if (strcmp(line, \"{\") == 0)`, so that it skips empty lines.. A fix for the continuation line problem would be good, too.. Thanks!. And an apology for completely forgetting how the code I wrote worked.. Thanks!. This causes a crash upon closing popups:\n=================================================================\n==442==ERROR: AddressSanitizer: heap-use-after-free on address 0x60d00002fe80 at pc 0x7fb80e7cf9a4 bp 0x7ffd8b305c70 sp 0x7ffd8b305c60\nREAD of size 8 at 0x60d00002fe80 thread T0\n    #0 0x7fb80e7cf9a3 in xdg_surface_for_each_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:614\n    #1 0x7fb80e7cfab7 in wlr_xdg_surface_for_each_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:638\n    #2 0x5562a5fa24cf in close_popups ../sway/desktop/xdg_shell.c:250\n    #3 0x5562a601b5cf in view_close_popups ../sway/tree/view.c:375\n    #4 0x5562a5facb85 in seat_set_focus ../sway/input/seat.c:832\n    #5 0x5562a5fa72aa in input_manager_set_focus ../sway/input/input-manager.c:611\n    #6 0x5562a601d4d9 in view_map ../sway/tree/view.c:633\n    #7 0x5562a5fa36f2 in handle_map ../sway/desktop/xdg_shell.c:427\n    #8 0x7fb80e81d216 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #9 0x7fb80e7cd65f in handle_xdg_surface_commit ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:351\n    #10 0x7fb80e80afe7 in surface_commit_pending ../subprojects/wlroots/types/wlr_surface.c:372\n    #11 0x7fb80e80b530 in surface_commit ../subprojects/wlroots/types/wlr_surface.c:444\n    #12 0x7fb80cc876cf in ffi_call_unix64 (/usr/lib/libffi.so.6+0x66cf)\n    #13 0x7fb80cc8709f in ffi_call (/usr/lib/libffi.so.6+0x609f)\n    #14 0x7fb80e0af6fe  (/usr/lib/libwayland-server.so.0+0xc6fe)\n    #15 0x7fb80e0ac0a2  (/usr/lib/libwayland-server.so.0+0x90a2)\n    #16 0x7fb80e0ad701 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0xa701)\n    #17 0x7fb80e0ac2ab in wl_display_run (/usr/lib/libwayland-server.so.0+0x92ab)\n    #18 0x5562a5f82571 in server_run ../sway/server.c:212\n    #19 0x5562a5f80afd in main ../sway/main.c:388\n    #20 0x7fb80dc8a222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #21 0x5562a5f62f4d in _start (/usr/local/bin/sway+0x34f4d)\n0x60d00002fe80 is located 16 bytes inside of 144-byte region [0x60d00002fe70,0x60d00002ff00)\nfreed by thread T0 here:\n    #0 0x7fb80e9a4c19 in __interceptor_free /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:66\n    #1 0x7fb80e7ce149 in reset_xdg_surface ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:466\n    #2 0x7fb80e7c777c in destroy_xdg_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_popup.c:290\n    #3 0x7fb80e7ce97d in wlr_xdg_popup_destroy ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:534\n    #4 0x5562a5fa247a in close_popups_iterator ../sway/desktop/xdg_shell.c:245\n    #5 0x7fb80e7cf8c5 in xdg_surface_for_each_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:622\n    #6 0x7fb80e7cfab7 in wlr_xdg_surface_for_each_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:638\n    #7 0x5562a5fa24cf in close_popups ../sway/desktop/xdg_shell.c:250\n    #8 0x5562a601b5cf in view_close_popups ../sway/tree/view.c:375\n    #9 0x5562a5facb85 in seat_set_focus ../sway/input/seat.c:832\n    #10 0x5562a5fa72aa in input_manager_set_focus ../sway/input/input-manager.c:611\n    #11 0x5562a601d4d9 in view_map ../sway/tree/view.c:633\n    #12 0x5562a5fa36f2 in handle_map ../sway/desktop/xdg_shell.c:427\n    #13 0x7fb80e81d216 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #14 0x7fb80e7cd65f in handle_xdg_surface_commit ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:351\n    #15 0x7fb80e80afe7 in surface_commit_pending ../subprojects/wlroots/types/wlr_surface.c:372\n    #16 0x7fb80e80b530 in surface_commit ../subprojects/wlroots/types/wlr_surface.c:444\n    #17 0x7fb80cc876cf in ffi_call_unix64 (/usr/lib/libffi.so.6+0x66cf)\n    #18 0x7fb80cc8709f in ffi_call (/usr/lib/libffi.so.6+0x609f)\n    #19 0x7fb80e0af6fe  (/usr/lib/libwayland-server.so.0+0xc6fe)\n    #20 0x7fb80e0ac0a2  (/usr/lib/libwayland-server.so.0+0x90a2)\n    #21 0x7fb80e0ad701 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0xa701)\n    #22 0x7fb80e0ac2ab in wl_display_run (/usr/lib/libwayland-server.so.0+0x92ab)\n    #23 0x5562a5f82571 in server_run ../sway/server.c:212\n    #24 0x5562a5f80afd in main ../sway/main.c:388\n    #25 0x7fb80dc8a222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #26 0x5562a5f62f4d in _start (/usr/local/bin/sway+0x34f4d)\npreviously allocated by thread T0 here:\n    #0 0x7fb80e9a5231 in __interceptor_calloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:95\n    #1 0x7fb80e7c724e in create_xdg_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_popup.c:248\n    #2 0x7fb80e7cccfc in xdg_surface_handle_get_popup ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:232\n    #3 0x7fb80cc876cf in ffi_call_unix64 (/usr/lib/libffi.so.6+0x66cf)\n    #4 0x7fb80cc8709f in ffi_call (/usr/lib/libffi.so.6+0x609f)\n    #5 0x7fb80e0af6fe  (/usr/lib/libwayland-server.so.0+0xc6fe)\n    #6 0x7fb80e0ac0a2  (/usr/lib/libwayland-server.so.0+0x90a2)\n    #7 0x7fb80e0ad701 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0xa701)\n    #8 0x7fb80e0ac2ab in wl_display_run (/usr/lib/libwayland-server.so.0+0x92ab)\n    #9 0x5562a5f82571 in server_run ../sway/server.c:212\n    #10 0x5562a5f80afd in main ../sway/main.c:388\n    #11 0x7fb80dc8a222 in __libc_start_main (/usr/lib/libc.so.6+0x24222)\n    #12 0x5562a5f62f4d in _start (/usr/local/bin/sway+0x34f4d)\nSUMMARY: AddressSanitizer: heap-use-after-free ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:614 in xdg_surface_for_each_popup\nShadow bytes around the buggy address:\n  0x0c1a7fffdf80: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c1a7fffdf90: fd fa fa fa fa fa fa fa fa fa fd fd fd fd fd fd\n  0x0c1a7fffdfa0: fd fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa\n  0x0c1a7fffdfb0: fa fa fa fa fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c1a7fffdfc0: fd fd fd fd fd fd fa fa fa fa fa fa fa fa fd fd\n=>0x0c1a7fffdfd0:[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c1a7fffdfe0: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\n  0x0c1a7fffdff0: 00 00 00 00 00 00 00 00 00 00 fa fa fa fa fa fa\n  0x0c1a7fffe000: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c1a7fffe010: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c1a7fffe020: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==442==ABORTING\n``. I was hovering over a qutebrowser tab so that the popup appeared, and opened a terminal.. Works, thanks.sizeof(char)` is not technically required since it is always guaranteed to be 1. It's splitting hairs but ideally it should be made consistent whether it is used or not.\nA related point, which is outside the scope of this PR, but may be an interesting point of discussion for the devs here in terms of standardising style is whether to use the variable name instead of the type for allocing, e.g. changing struct c v = malloc(sizeof(struct c)); to struct c v = malloc(sizeof(*v));. Futhermore, whether to use sizeof as an expression more, andwhether to always use calloc, or even to use calloc when you know you're about to initialise the memory.. @c-edw That's a very valid point that I'm not going to argue with, but I'll offer the counter-argument that if you're allocating on the same line as declaring, the dev can already see that it's a string, and therefore that it is allocating chars, which are equivalent size to bytes.  As I said, it's splitting hairs so I don't mind if it's left in, but I think that if writing sizeof(char) would cause the line to exceed the line width, it would in most cases be more readable to remove the sizeof(char)rather than split the line.\n@emersion Your point for using calloc is a very good one that I did not think about when writing my comment, thanks. \n\nwhether to use sizeof as an expression more\n\nIgnore this, I got confused at parentheses usage for sizeof.\n\nThe first one is a little more readable, the second one ensures there's no mismatch (though I think many tools are able to catch those cases, at least Clang's static analyzer).\n\nI believe an argument against the latter is that if you change the type of the variable, then you need to go through the code and change every occurrence of allocation. And I think that if you miss one, then it won't be reported as an error, though if this is picked up by compilers or static analysers (which clearly I should be using more) then ignore this point.\nEdit: furthermore, using variable names can make code cleaner because it makes it a little more abstract by making fewer assumptions.. > I don't see why char would be a special case.\nchar is a special case because it is the only type (I think) that is guaranteed by the C standard, as 1 no less, which means it is redundant if used as a multiplier in sizeof.. Good catch, submit a PR.\nFeel free to ask me any questions about the tray implementation to help you debug the problem.. I think unicode.c can be removed as well.. Some apps' menus don't work because they use the canonical dbus protocol, which hasn't been implemented yet.\nHowever, their status should change, can you attach a debug log?. Ah, sorry, I mean for swaybar. This probably means you have to run it manually, i.e. swaybar -d -b <bar-id> (use swaymsg -t get_bar_config to get ids). Fixed by https://github.com/swaywm/sway/pull/3502/ possibly?. This is fine, but may be overkill. I think I can remove all uses of sd_bus_slot_set_floating by just tracking them and unreferencing them on exiting. (also two of them are wrong, so a fix will be necessary anyway). The plan is to eventually build an xembed proxy into swaybar, though it's not very high priority right now.\nI have trouble debugging this because I've been struggling to build xembedproxy for myself. (can't work out how cmake works lol). I would prefer to reject invalid icons as early as possible, but a PR to perform a check here would also be fine.. That's already done in https://github.com/swaywm/sway/pull/3451/. A bit strange that it was working before. Seems like there's a bug that 'workspace \"1' behaves the same as 'workspace 1'\nEdit: seems like this is also the behaviour in i3, so working as intended??. This makes tiling mouse resize wavy, not sure what the right fix is.. Are you sure you're not using an old version of wl-clipboard?. It should be more obvious when resources should not be freed.. Ha, this feels like bikeshedding, but I don't really like - as the alias. I think I would prefer @, but in the end, I don't really think it matters.. Commands in i3 also seem to not strip trailing whitespace, e.g. run swaymsg 'workspace 2 '\nResult on i3: end up on workspace 2\nResult on sway: end up on workspace 2. I can't seem to get backslash continuation working in i3 (still works in config). Can you?. Most likely the icon is sent via the property IconPixmap with multiple icons of the same size. The spec isn't very clear on what to do when this is the case, so I just take the first one.. What if we want these options enabled?. Meh, I do this so that I can have access to rootston for testing without having to build wlroots separately.. But I am not against this change. Yes, I fixed the check.. Thanks!. I think only sy is being assigned to 0, should be sx = 0, sy = 0.. This issue is now being tracked in https://github.com/swaywm/sway/issues/3799.\nThe kmix issue is, I think, a case of missing icons. It's looking for an icon called 'audio-volume-high' or something, does that exists on your filesystem? . > Maybe an icon name cache could be implemented.\nThis is the solution. Here is a full outline of the problem:\nIcon themes define, for each size of icon, its range of acceptable rendering sizes, e.g. it may say that icons of size 22x22 can be resized to between 20 & 24 to be rendered. Hence, when swaybar searches for an icon to render, it tries to find an icon for which the current rendering height falls within the icon's acceptable range for rendering, but if that is not possible, it then finds the icons whose acceptable range is closest to the rendering size.\nIn each case, it also stores the acceptable range, with the idea that if the height of swaybar changes so that it falls out of that range, it can look for a new icon again. However, this has the side-effect that if the icon was not in the acceptable range to begin with, it will look for a new icon if the height does not change, which is usually the status quo, causing swaybar to poll every single possible icon file twice on every render.\nAs outlined in the specification the main solution would be to only traverse the file tree once, reading it all into memory, but this would require more implementation work, when initially I was just pushing to get the feature out there in a way that works. However, there could also be more state defined to monitor if the height changes, since if it does not, the icon should not change either.\nSorry for this problem, but I hope you understand why it's happening. When I get time, I hope to revisit this problem, since it's not too conceptually hard, just fiddly to work out the details, but in the meantime, contributions are welcome :). Hmm, I did allow it to load SVGs if it was built with gdk-pixbuf2 support, but I never actually tested it, so it might have gone wrong somewhere.. You could absorb the condition into the outer condition (since it's now a single if block in an if block). No, it showed \"hello\" then \"world\", separately, never \"hello world\".. I'm not sure we should, because the behaviour I'm getting matches the behaviour I'm getting with i3. You make a good point; I'm happy for this change to be made. And perhaps you should bring this up with the i3 team too if it hasn't already.. This is the only reference I can find: https://i3wm.org/docs/userguide.html#status_command. Firstly, I like the idea of a wildcard config, either if you specify arguments before specifying an output for the first time, or if you explicitly specify an output of *.\nSecondly, it doesn't seem like your code checks if the output config already exists, so say if you pass -o X -i Y ... -o X -m M you could merge the configs\n(edit) you can see here how I had a go at doing this, though this was quite a while ago: https://github.com/ianyfan/sway/commit/e03b1f7cab5d698b8dc9cd29167b9feab41a09fb. The arguments should be NULL, ws, \"urgent\" since the prototype has the old workspace first, then the current (\"new\") workspace. Also, do you send an event for the window too?. Added some, though not sure if it's good.. This seems to be the behaviour in i3. The naming confuses me too.. Sure, I just copied the code over from the 0.15 branch and updated the field allocations.. I think this is a moot point anyway because as far as I can tell, IPC_EVENT_MODIFIER and IPC_EVENT_INPUT don't actually appear anywhere else in the code. You can subscribe to IPC_EVENT_MODIFIER but nothing else.. Eh, modifier events are actually present in 0.15, but not input events. So maybe we can just remove IPC_EVENT_INPUT, and decide how important modifier events are to be preserved.\nAnyway, I'm more inclined to bring the values in line with i3.. Any further thoughts on:\n1. removing or implementing IPC_EVENT_INPUT;\n2. removing or implementing IPC_EVENT_MODIFIER?. Noted, thanks.. Noted, thanks.. I'm actually thinking 100+ to match the non-event sway-specific values. Also, it seems that IPC_EVENT_MODIFIER is used to indicate when a bar modifier is pressed/released (which doesn't seem to be implemented in 1.0 yet...). Ideas on what to use IPC_EVENT_INPUT for? Maybe I can implement it. Or leave it for now?. I did it to consolidate logic, treating commands '[move container to] workspace next thing' as just the next workspace without having to check for each case again in their respective functions. However, thinking about it, I guess it overcorrects if the name is quoted: 'workspace \"next thing\"' also gets treated as the next workspace. So I'm not opposed to changing it.. It's recreated in the commands that call it, but I wasn't sure whether it should be recreated in all cases (there's a few other functions that call it), so I didn't.. This just checks that the first character is a number, and if it isn't, bail. If it is, the logic is handled by get_workspace_by_number.. Not necessarily. You can't just do the check straight off because workspace 1 has different behaviour to workspace number 1.\nPerhaps we could save the number bit and check whether the name begins with that, but then that would prevent workspaces from being named 'number 1', i.e. it would cause workspace 'number 1' to have the same behaviour as workspace number 1, which it currently does not.\nAdmittedly very esoteric, so this could be changed. Would require an args split during command parsing though.. I copied it over because I'm not sure whether it does apply here.\nConsider you have a container that you've assigned as thus:\nfor_window [<criteria>] floating enable; sticky enable\nassign [<criteria>] 2\nand then you open it on workspace 1, then clearly it should open on workspace 1, because it's been stickied. But currently, the code selects workspace 2 to open it on (possibly creating it), before executing the prior commands and realising that it should be stickied, and then ??? before crashing, at least, it does on my machine.. I don't really agree, but I've rebased it to allow it.. Okay, I'll remove the comment and see if it can be fixed in the sticky command instead.. Have I got the logic here right? It seems to work but I still don't grok it.. That's for moving to the centre. This is for moving to a co-ordinate position.. No we don't. The reason it is because when a container is moved from, say, workspace 1 to workspace 2, it would focus workspace 2 to do whatever it does, and then change focus back to workspace 1. Hence, these events would normally be emitted:\nworkspace::focus 1->2\nworkspace::focus 2->1\nwindow::focus old->new\nso the workspace events need to be suppressed, but the window one actually doesn't.. Oh duh. Not sure how I missed that.. Somehow, no. I haven't tested it fully, but sometimes new_workspace is NULL. I know because I tried to replace https://github.com/swaywm/sway/blob/d6a5dfc913ba958d38af907ddb7acd7483a1cee7/sway/input/seat.c#L619 with  new_output = new_workspace to optimise it and it would crash because new_workspace is NULL, even though new_output ends up not being NULL. Very confusing.. It occurs when moving a workspace to a different output, since it focuses the new output, so new_workspace is NULL but new_output is not.. void. Need a container != NULL check here, otherwise focusing workspaces is crashing. Or maybe it should use node instead of container.. This should be binding_copy?. This doesn't work because binding_pressed is freed upon reload?. This case statement is a bit too heavy for my liking, since it's just a return statement and there are many fall-throughs. Personally, I'd make it a ternary, though I think even an if block would be better.. Only one of the operands needs to be casted to double. Also, there seems to a rogue trailing space here which you should definitely get rid of.\nAlso, does the percent property get added when the parent box is 0? If not, maybe it should have a default value.. Remove the space before the closing brace. Same as above.. Oh wait, I missed this question. tbh I'm not sure either, because I don't really use it. Maybe we should just leave it for now and see if someone with a better use case for it has an idea.. I was testing this and you need to initialise this to {0}, because if an error occurs, the values do not get initialised and so wordfree gets called on junk data, e.g. a segfault occurs if you run swaymsg 'output * bg \\\"'. (Technically outside the scope of this PR but since it's such a simple change I thought it could be thrown in there since it's related anyway). Whoops, forgot to remove that after testing. In that case, shall I just hold off with this PR until then?. I removed the proximity logic. Changing it to that causes a segfault. I had a go.\nLogic seems a bit messed up anyway. I wanted to add a check to only re-show the cursor if it isn't already visible, but it doesn't work.. This if block seems like it should be in the previous block. drop_permissions(void). @ivyl Leaving it empty is a mistake and should be corrected, along with the other functions in the code.. This ostensibly works, but there is a bug when validating that seat configs are still being applied: it seems that they are not local to a config but global, so it still destroys the keyboard and the crash I was trying to fix before still occurs.\nSo if I comment out this validation block, everything works as intended.. Since next_repeat_binding isn't being set conditionally now, one of these variables can be removed.. Actually, the problem is more subtle than I made out. It seems that if you have any seat configuration before setting a fallback, like:\nseat s attach \"fake_input\"\nseat seat0 fallback true\ninstead of the other way round, the first command causes all the devices to be removed from the fallback seat, destroying them, before the next command reattaches them.\nMy full minimal config is:\n```\nseat s attach \"fake_input\"\nseat seat0 fallback true\nbindsym Mod4+Shift+c reload\n```\nbut swapping the two aforementioned lines prevents the crash.\nEDIT: removed some unnecessary lines from the minimal config. Why not - '0'?. Should there be a bounds check here? Like > 0 && <= 9? I'm not sure if it's possible to do something funky like buttonA which probably shouldn't be allowed.. I think this is technically unnecessary due to calloc always initialising it to false, but I guess it doesn't hurt to be explicit.. Check here is unnecessary since freeing a NULL pointer is valid.. This seems unnecessary, just iterate over the list and free each item without deleting.. Make this consistent with the way bar bindings are freed in the other place.. Put the command in quotes. Also maybe add the word 'binding' into the message?\nThough I'm not sure if I agree with having a debug message here. It might be better to only log if the binding is actually found.. This should send both a pressed event and released event. (at least, that seems to be the behaviour in i3). Would it be possible to remove this check? And change the check above to EXPECTED_AT_LEAST, 2.\nIt seems like this is a vestige from when the code used to accept bar {, and I can't think of a case where there can be only one argument here.. What if we disallowed bar <id> <subcommand> in the config file?\nWould this allow this check to be changed to !config->reading && find_handler(argv[1], bar_handlers, sizeof(bar_handlers))? Then id id would not have to be disallowed.\nI'm not sure if this would change some later logic.. Okay, it should be fine to keep the behaviour as it is.\nHowever, is the first check !is_subcommand(argv[0]) actually required? Can't think of a (valid) case when that would be true but the later check false.. Would it be possible to change spawning behaviour so it only needs to allocate once?\nI'm thinking something like using a variable like spawn_with_id.\nI'm also confused why this loop is required later:\nhttps://github.com/swaywm/sway/blob/782a835175b1fecb427fbbafef4e7518af95329f/sway/commands/bar.c#L95\nsince wouldn't the bar always be the last one?\nAnyway, I think this may be outside of the scope of this PR, and I may open my own one. It otherwise looks good to me, and if you don't feel like dealing with this I'm happy to accept it.. Is there a leak here of loop->fds?. This line seems extraneous. I believe this is causing an extraneous workspace::focus event from the workspace that the container was moved to back to the original workspace.. Your problem is (probably) not about the slot being a field of the watcher struct, it's that you've declared the watcher on the stack here, meaning that when the function returns, it goes out of scope, causing its memory to become corrupted when it is used in the callback later.\nThe solution is to calloc it on the heap.. This fallback isn't performed for the same property above. Should it?. If by loop, you mean, keep running wl_display_flush, the documentation says: \"wl_display_flush() never blocks. It will write as much data as possible, but if all data could not be written, errno will be set to EAGAIN and -1 returned. In that case, use poll on the display file descriptor to wait for it to become writable again.\" so you can't do that.. I thought the documentation meant you can't do that, you have to poll before you can flush again.. Isn't that what poll does?.  I added a sway_assert.. You could also use Python sockets to perform IPC, though it would take about a dozen extra lines.\nAlso, this should all really be in a main function.. I pushed a different fix, namely changing wl_display_dispatch to wl_display_dispatch_pending so that it doesn't block.. So move the prepare_read to the main loop? But then how would we know whether to cancel_read? (which I forgot to put in my attempt either, but eh). Also, why doesn't this use the default event loop?. You should use ws->num to check that it is valid to do this to avoid stripping names like \"a:b\". Also, move the free{ws_dup} higher so that is is freed immediately after it has finished being used.. I don't think it needs to be that complicated. Just check if ws->num == -1 to see if the string begins with a valid number and if it is you can do this and it'll get the same result.. Another solution I thought of is to not have stripped_name and instead convert ws->num to a string. Could also have stripped_number just be either an index or pointer of where the name begins in ws->name and it'll still work as a valid string, though I'm not sure if it is more or less hassle than duplicating the string and freeing it each time.. I don't think so: https://github.com/swaywm/sway/blob/7fa7f4f48d17e0470c800b258061d188ceb705da/sway/ipc-json.c#L191. Not 0, -1.\nAlso, using a length of 2 misses cases when num > 9.\nI think you should do strlen(ws->name) > strlen(stripped_name) + 1. (or set some variable to strlen(stripped_name) + 1 and use that as the offset later too). https://github.com/swaywm/sway/blob/7fa7f4f48d17e0470c800b258061d188ceb705da/sway/ipc-json.c#L191 gives -1 for num if there isn't a number.. This comment needs to be changed.. I think removing this line is right now, because it's causing double display_event each time.. I've done that now.\nAnd I was thinking about the default event queue, sorry.. I just did some testing and it seems like i3 strips names even if the colon is not present: i.e. \"1a\" will be stripped into 1 and a. So this logic will have to be changed if we want to match their behaviour.. But then why won't they cause an event on polling first time round?\nThe alternative is to check whether read_wl_events has been set in display_event to prevent trying to read again.\nDo you want to go with that?. You need to account for multi-digit numbers. Either use numlen or search the string until the first non-number character.. Maybe you're thinking of strncpy. This can do weird stuff if ws->num == -1.\ni3 also strips the colon if the name is something like 1:. I don't think this does that, though admittedly I haven't actually tested it.. If strlen(ws->name) == len_offset this should just strip the last colon, matching the behaviour of strip_workspace_name.. \"1:\" gets displayed as \"1\" if strip_workspace_number is enabled (though not if both are disabled).. As in: this pr still doesn't strip the colon, even though it should.. Now that we're not calling this with -1 again, could you either revert this change or reject negative numbers until we have a use case for it?. Trailing space. Trailing space. Trailing space. Trailing space. \"then workspace name\" is grammatically incorrect. Sucks because the i3 devs should have named it strip_workspace_names but that's what we got.\nI'm also not sure about saying \"custom number\" either. Maybe just \"number\".. Follow what was done previously and start a new line of declarations json_object *... instead of overhanging it.\nAlso remember to fix trailing spaces.. Same as above, should probably move to the line below with bindings. I just realised you should be able to remove the three other lines in this block and this will still work, since it'll terminate the string in the correct place, even if there's leftover characters after it.. You could remove this line and use strcpy below, though it's less of a fun solution as the one above.. Style: space after if.. In that case, I think for negative numbers it should add an extra character to account for the '-' at the start.. I did it like in the link, though I omitted checking for WL_EVENT_WRITABLE because I thought that we're only checking for readable events. Is my understanding correct?\nAlso, I kept the count variable in, that's correct, right?. Yes, because https://github.com/swaywm/sway/blob/eda3bfeed5097c71634332bfe998188b028abf02/swayidle/main.c#L433 means it only triggers on readable events? or is my thinking wrong?. Oh, I see. I'll revert this change then.. I did not know that, thanks. I don't think this works because in this case \"config.h\" refers to this file, not the generated config.h. Changing it to config.h just happens to work because below, sway/tree/root.h  imports the config.h we want.. It was a stylistic choice to use an int since it is used in conjunction with the sd-bus functions that return an int. Do you still want me to change it?. Maybe this could be static const?. Unnecessary cast. Can you format cmd into the string like in the other ones?. Style: char *command. I don't think this is correct?. struct tray_binding *. struct tray_binding *. Is the plan to remove remove list.c and replace it with wl_list?. -1 on this change because it causes icons to look ugly when scaling only a little, say, from 20 to 22.. Is the first check redundant? Not sure whether ws could be NULL at this point.. Is this check needed?. I thought the loop would break if it reached the end (i.e. strtok returns null).. Do you mean if the string ends with a newline? Because I don't think this check passes in that case anyway. I can't think of a case where this does pass.. You are correct, sorry, I misremembered how strtok behaved on the last token.. on. i.e.. Maybe UNIX or Unix. I looked it up, and this is undefined behaviour, so I will revert it.. ",
    "apreiml": "It works fine for me on the current master branch (arch with qt 5.11.1 and virtualbox 5.2.12). I've similar problems with mattermost. I also tried atom and I got those messages on both of them:\n[32477:0627/182924.431307:ERROR:gles2_cmd_decoder.cc(17652)] [.DisplayCompositor-0x1cf805e97000]GL ERROR :GL_INVALID_OPERATION : glCreateAndConsumeTextureCHROMIUM: invalid mailbox name\n[32477:0627/182924.431329:ERROR:gles2_cmd_decoder.cc(9709)] [.DisplayCompositor-0x1cf805e97000]RENDER WARNING: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering.. This also happens in current master branch.\nCould this be related to https://github.com/swaywm/wlroots/issues/678?. Here's a small java application to reproduce the issue https://gist.github.com/apreiml/df8272f44975fca592453865fd9f62d0\nIt also fails with rootston when alt tabbing between windows. It works fine with i3 though.. @RyanDwyer Looks good. It hasn't been crashing anymore. Thanks :). I did the following\n\nopen recent file (https://gist.github.com/apreiml/f62c257b2e90a49712d189d13dcfade3)\nMove mouse around inside the editor window. \n\nThere are overlay windows appearing and at some point it crashes, I'll try to figure out when exactly.\n. Log output: \nGdk-Message: 13:34:42.114: Window 0x55ad364a31a0 is a temporary window without parent, application will not be able to position it on screen.\nGdk-Message: 13:34:42.114: Window 0x55ad364a31a0 is a temporary window without parent, application will not be able to position it on screen.\n2018-08-17 13:34:42 - [types/xdg_shell/wlr_xdg_surface.c:445] new xdg_surface 0x5564f82249f0 (res 0x5564f822ab50)\n2018-08-17 13:34:42 - [sway/desktop/xdg_shell.c:452] New xdg_shell toplevel title='' app_id='drracket'\n2018-08-17 13:34:42 - [sway/tree/root.c:169] Looking up workspace for pid 17681\n2018-08-17 13:34:42 - [sway/tree/container.c:451] Adding new view 0x5564f8224b70: to container 0x5564f821e9f0 4 Chapter 2.scm - DrRacket\n2018-08-17 13:34:42 - [sway/ipc-server.c:324] Sending window::new event\n2018-08-17 13:34:42 - [sway/ipc-server.c:324] Sending window::focus event\n2018-08-17 13:34:42 - [sway/ipc-server.c:324] Sending window::title event\n2018-08-17 13:34:42 - [sway/tree/arrange.c:211] Usable area for ws: 1920x1177@0,23\n2018-08-17 13:34:42 - [sway/tree/arrange.c:304] Removing gaps: not gapped: 0x5564f7f19c10\n2018-08-17 13:34:42 - [sway/tree/arrange.c:337] Adding gaps: 0x5564f7f19c10\n2018-08-17 13:34:42 - [sway/tree/arrange.c:220] Arranging workspace '2' at 0.000000, 23.000000\n2018-08-17 13:34:42 - [sway/tree/arrange.c:165] Arranging layout for 0x5564f7f19c10 2 1920.000000x1177.000000+0.000000,23.000000\n2018-08-17 13:34:42 - [sway/tree/arrange.c:304] Removing gaps: not gapped: 0x5564f821e9f0\n2018-08-17 13:34:42 - [sway/tree/arrange.c:304] Removing gaps: not gapped: 0x5564f8224b70\n2018-08-17 13:34:42 - [sway/tree/arrange.c:48] Arranging 0x5564f7f19c10 horizontally\n2018-08-17 13:34:42 - [sway/tree/arrange.c:54] Calculating arrangement for 0x5564f821e9f0:4 (will scale 1920.000000 by 0.500000)\n2018-08-17 13:34:42 - [sway/tree/arrange.c:337] Adding gaps: 0x5564f821e9f0\n2018-08-17 13:34:42 - [sway/tree/arrange.c:54] Calculating arrangement for 0x5564f8224b70:4 (will scale 1920.000000 by 0.500000)\n2018-08-17 13:34:42 - [sway/tree/arrange.c:337] Adding gaps: 0x5564f8224b70\n2018-08-17 13:34:42 - [sway/desktop/transaction.c:275] Transaction 0x5564f81e0110 committing with 4 instructions\n2018-08-17 13:34:42 - [sway/ipc-server.c:324] Sending window::focus event\n2018-08-17 13:34:42 - [sway/ipc-server.c:324] Sending window::close event\n2018-08-17 13:34:42 - [sway/tree/arrange.c:211] Usable area for ws: 1920x1177@0,23\n2018-08-17 13:34:42 - [sway/tree/arrange.c:304] Removing gaps: not gapped: 0x5564f7f19c10\n2018-08-17 13:34:42 - [sway/tree/arrange.c:337] Adding gaps: 0x5564f7f19c10\n2018-08-17 13:34:42 - [sway/tree/arrange.c:220] Arranging workspace '2' at 0.000000, 23.000000\n2018-08-17 13:34:42 - [sway/tree/arrange.c:165] Arranging layout for 0x5564f7f19c10 2 1920.000000x1177.000000+0.000000,23.000000\n2018-08-17 13:34:42 - [sway/tree/arrange.c:304] Removing gaps: not gapped: 0x5564f821e9f0\n2018-08-17 13:34:42 - [sway/tree/arrange.c:48] Arranging 0x5564f7f19c10 horizontally\n2018-08-17 13:34:42 - [sway/tree/arrange.c:54] Calculating arrangement for 0x5564f821e9f0:4 (will scale 960.000000 by 2.000000)\n2018-08-17 13:34:42 - [sway/tree/arrange.c:337] Adding gaps: 0x5564f821e9f0\n2018-08-17 13:34:42 - [sway/desktop/transaction.c:252] Transaction 0x5564f81e0110 timed out (1 waiting)\n2018-08-17 13:34:42 - [sway/desktop/transaction.c:149] Applying transaction 0x5564f81e0110\n2018-08-17 13:34:42 - [sway/desktop/transaction.c:275] Transaction 0x5564f8233010 committing with 4 instructions\nfailed to read Wayland events: Broken pipe. With overlay windows I mean that there appear arrows when you move your mouse over keywords. The arrows point to the place where those where defined. Also a tooltip is flickering in the center of the screen. For me it crashes sometimes, but not reliably, when I move over keywords like cons.\nI didn't install any addon beside the sicp language. I got drracket from the archlinux repo. It's included in community/racket 7.0-1. I tried DrRacket again and it doesn't seem to crash anymore. Als othose overlay windows are appearing correctly. Thanks!. @RyanDwyer I changed the code according your suggestions.. @RedSoxFan done. can't reproduce. orientation is obsolete. Should I skip this?. I tried to implement the window and deco rects. Can you check If I understood it correctly? I still need to figure out how the gaps effect those values.. I stopped because of https://github.com/swaywm/sway/pull/2540 I thought I'll wait until this will be merged, but I branched of from ryans branch yesterday. I will continue there and rebase later. I will try to finish it this week.. I've added all the missing fields that where documented. There some notable differences/changes though:\n\ni3 requires every key present in the json object, sway get_tree will do this also now for the documented i3 fields.\nwindow will only be set on x11 view, otherwise it's NULL\nThe defaults for (border, current_border_width) in sway are (\"none\", 0) instead of the i3 values (\"normal\", -1)\nThe bar in i3 is part of the tree, but not in sway.\n\nI would like this pr to include only those I did for now. The others may be a little bit more effort and I'd like to do them in separate PRs, if the plan of sway is to be also compatible to those. The i3 docs state, that they are not finalized and may change. \nFrom my point of view this PR is ready for a review.\n. @ianyfan About the undocumented ones: I'd like to postpone them and implement them as soon as they are required or stable. For example the value of last_split_layout is taken from the current layout in i3: https://github.com/i3/i3/blob/f454a5c2dd253abbe31cfbc8966a03a56222228b/src/ipc.c#L470 so I'm not sure if this is intended behavior and what the purpose is of those field.\nRegarding current_border_width: i3 initializes the container value to -1 on creation. In sway it's 0 so I can't differentiate easily between is 0 set by the user and leave it or is it the default value and print -1.. @Emantor \n```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00005580ce8e4fb0 in is_transient_for (child=0x5580cf4b8e20, ancestor=0x5580cf5a18d0) at ../../sway/desktop/xwayland.c:264\n264         if (surface->parent == ancestor->wlr_xwayland_surface) {\n[Current thread is 1 (Thread 0x7ff078e1e9c0 (LWP 743))]\n(gdb) bt full\n0  0x00005580ce8e4fb0 in is_transient_for (child=0x5580cf4b8e20, ancestor=0x5580cf5a18d0) at ../../sway/desktop/xwayland.c:264\n    surface = 0x1c1\n\n1  0x00005580ce8e110c in view_is_transient_for (child=0x5580cf4b8e20, ancestor=0x5580cf5a18d0) at ../../sway/tree/view.c:1164\n2  0x00005580ce8dc4a4 in container_is_transient_for (child=0x5580cf4b8c70, ancestor=0x5580cf57c510) at ../../sway/tree/container.c:1216\n3  0x00005580ce8e0e10 in view_is_visible (view=0x5580cf4b8e20) at ../../sway/tree/view.c:1104\n    workspace = 0x5580cf4ac150\n    floater = 0x5580cf4b8c70\n    is_sticky = false\n    seat = 0x5580ceef82d0\n    con = 0x0\n\n4  0x00005580ce8afc86 in output_damage_view (output=0x5580cefc3a70, view=0x5580cf4b8e20, whole=false) at ../../sway/desktop/output.c:457\n5  0x00005580ce8afcd8 in output_damage_from_view (output=0x5580cefc3a70, view=0x5580cf4b8e20) at ../../sway/desktop/output.c:465\n6  0x00005580ce8debf7 in view_damage_from (view=0x5580cf4b8e20) at ../../sway/tree/view.c:375\n    output = 0x5580cefc3a70\n    i = 0\n\n7  0x00005580ce8e5226 in handle_commit (listener=0x5580cf4b8f60, data=0x5580cf4b80e0) at ../../sway/desktop/xwayland.c:340\n    xwayland_view = 0x5580cf4b8e20\n    view = 0x5580cf4b8e20\n    xsurface = 0x5580cf4b4d30\n    state = 0x5580cf4b8148\n\n8  0x00007ff07c7b6cff in wlr_signal_emit_safe (signal=0x5580cf4b8380, data=0x5580cf4b80e0) at ../../util/signal.c:29\n    pos = 0x5580cf4b8f60\n    l = 0x5580cf4b8f60\n    cursor = {link = {prev = 0x5580cf4b8f60, next = 0x7ffc9c9f9aa0}, notify = 0x7ff07c7b6c49 <handle_noop>}\n    end = {link = {prev = 0x7ffc9c9f9a80, next = 0x5580cf4b8380}, notify = 0x7ff07c7b6c49 <handle_noop>}\n\n9  0x00007ff07c7ae5b2 in surface_commit_pending (surface=0x5580cf4b80e0) at ../../types/wlr_surface.c:405\n    invalid_buffer = true\n    subsurface = 0x5580cf4b82c8\n\n10 0x00007ff07c7ae7ff in surface_commit (client=0x5580ceeb05e0, resource=0x5580cf4b5410) at ../../types/wlr_surface.c:474\n    surface = 0x5580cf4b80e0\n    subsurface = 0xf5756fc2cca69000\n\n11 0x00007ff07b4531c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n12 0x00007ff07b452c2a in ffi_call () at /usr/lib/libffi.so.6\n13 0x00007ff07c7f76ff in  () at /usr/lib/libwayland-server.so.0\n14 0x00007ff07c7f40a3 in  () at /usr/lib/libwayland-server.so.0\n15 0x00007ff07c7f5702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n16 0x00007ff07c7f42ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n17 0x00005580ce8ac8ce in server_run (server=0x5580ce903b20 ) at ../../sway/server.c:174\n18 0x00005580ce8abfe3 in main (argc=1, argv=0x7ffc9c9fa238) at ../../sway/main.c:383\n    verbose = 0\n    debug = 0\n    validate = 0\n    long_options = \n        {{name = 0x5580ce8eca8c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5580ce8eca91 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5580ce8eca98 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5580ce8ecaa1 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5580ce8ecaa7 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5580ce8ecaaf \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5580ce8ecab7 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5580ce8ec648 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n``.0x1c1as pointer value for surface looks strange to me.. @RyanDwyer Thanks I'll try!. Didn't crash so far. I'll reopen this, if it reappears. Thanks a lot!. @zajca fyi PhpStorm <= 2018.2.5-1 is working fine using the packaged jre.. I'll remove the cast of the denominator. The default value would beNULL, otherwise I'm not sure in which cases the parent can be empty. If the parent is empty and has more than one child,1` as default value would also not make any sense. What do you think?. ",
    "includereserved": "@apreiml In virutalbox, dialog boxes don't like to respond. Do they work for you? For example open settings for a machine, go to storage and add a virtual hard disk controller, the dialog box disappears until you move your mouse over it then the buttons on it don't work. I just installed i3 and tested it in another tty and it works fine. Kind of hard to get a video.. Actually I can focus on other windows (only with the mouse) and toggle floating(with the keyboard)/move them around (with mod+mouse) but my keypresses are still only registered by the one window I was using before this bug occurred (presumably).. @RyanDwyer Can you please clarify? wlroots is installed. Do I need to recompile?. Yes, I am using 0.15.2. I will switch to the alpha.. ",
    "aereaux": "I am experiencing the same issue on sway 0.8.  Seems to be the same as or related to #710.  Interestingly, when I open a new window from a terminal (for example calling mpv somefile), it behaves as expected.\n. Backtrace: gdb.txt. It's not really intentional, but it is a side effect.  Do you think it would be better to get it from an argument instead?  That's the only easy fix I can think of.\nOn November 6, 2018 10:42:12 PM PST, Ryan Dwyer notifications@github.com wrote:\n\nIn this branch, to run sway in a nested session, I now have to either\nunset WAYLAND_DISPLAY or set it to something like wayland-1. Is\nthis intentional?\n-- \nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/swaywm/sway/pull/3084#issuecomment-436520733\n. Is there another approach that would be better, like using an argument or a config option?  I really would like a way to do this, because I frequently run into the issue in the commit I linked.. \n",
    "DavidVentura": "Oops. I had not installed xsltproc\n. ",
    "AbstractBeliefs": "Would you mind a brief explanation of the bullshit you ran into for those who 1) are considering different test frameworks and 2) a little insight into what you're looking for and looking to avoid for tests in sway?\n. Would you mind a brief explanation of the bullshit you ran into for those who 1) are considering different test frameworks and 2) a little insight into what you're looking for and looking to avoid for tests in sway?\n. Those who really want a small copy of the repo for light development purposes can just git clone --depth=1 to only get the current head, no need to rewrite history.\nIt's really substandard for any real work, though I think if images are too much a size constraint, best not try compiling anything.\n. ",
    "timokau": "Thank you, I did.\n. They won't fix, apparently its too high-level for libinput.\n. Thanks\nIt wouldn't really be a good solution if every compositor had to implement this (although I think that especially people using tiling window managers may profit from this).\nBut if its the only one, I'm glad that you at least consider it.\n. ",
    "myfreeweb": "Looks like this might be easier with wlroots.\nPlus, here's an idea! Since every problem in Wayland is solved by inventing a protocol\u2026\nWe need one that's kinda similar to xwayland-keyboard-grab, but:\n\nobviously, not an exclusive grab \u2014 keypresses must be copied to the client;\nthe client should provide the set of keys it's interested in \u2014 the compositor can implement security policies based on that. e.g. sway can have two different permit levels, watch-modifier-keys and watch-all-keys, or just allow everyone to grab modifier keys (they're not that interesting after all) and require permit watch-keys for a keylogger;\nand of course, the interface should also include a request that injects keypresses back.\n\nExample flow:\n\nthe hypothetical wcape or waycape or whatever requests watch_keypresses(wl_seat, ['Shift_L', 'Shift_R', 'Control'])\nthe user presses and releases Control in a terminal window\nthe compositor sends an event for Control to the terminal (which ignores it), but also sends that event to wcape because it's registered for that key\nwcape reads the event and requests inject_keypress('Escape')\nthe compositor sends an event for Escape to the terminal\n\nBonus idea: clients can request a \"secure mode\" like in macOS, so when you're entering a password, events would not be copied to wcape. (Not super necessary when only giving access to modifier keys, but would be great for, like, running a keylogger for typing statistics I guess :D). Yeah, just setting xcape style key presses is simple enough to do directly in compositors, but this protocol allows for more stuff, such as TextExpander-like apps, typing statistics, etc.. What do y'all think about this protocol?. So it won't be possible to do UI automation/testing/macros (java.awt.Robot, Sikuli, xdotool etc.), text snippet expansion, keyboard typing statistics, etc. under Sway?\nI guess I'll have to do this on evdev level then. It's possible to listen directly on evdevs and create a fake keyboard (uinput on Linux, cuse on FreeBSD) to inject events. I believe that a Wayland protocol would've been a much cleaner and better solution >_<. What if I want a literal keylogger to analyze my typing speed?\nThese features are useful. Global input access shouldn't be completely killed, it should be available to privileged applications. macOS uses accessibility APIs for this, you have to tick a checkbox in Preferences to allow an app to do this. Sway has IPC security already, which is pretty similar! permit /usr/local/bin/xcape keylogging. What do you mean by \"patch\"? \"maintain your own fork\"? :)\nActually, I'll probably do the evdev-level thing because it will work with GNOME, KDE, etc. out of the box. Would help with https://github.com/bulletmark/libinput-gestures/issues/27 as well.. So, seems like the list of solutions is here: https://github.com/alols/xcape/issues/67\nMy solution is evscript, it runs Dyon scripts with access to evdev/uinput.. So yeah, the whole security thing relies on get_client_pid and that's why swaybar can't get the permission to be a bar. ~~I'm going to try a super hacky solution \u2014 do what sockstat does.~~ that doesn't let me check if it's that particular connection on the socket.\npermit * fullscreen keyboard mouse ipc lock panel background screenshot is the way to go for now.\nBTW, seems like the warning errors are just gone\u2026 o_0. > We definitely don't want to give sway shell permissions to everything by default.\nWorked fine for Xorg :D I didn't mean changing the default config file, of course \u2014 just let security stay broken on FreeBSD for now. Fixing the unkillable freezes that literally make the compositors unusable is more important.\ncmsgcred seems like a solution, nice find @yohanesu75! But it introduces a new problem: it requires a message. In the case of extension permissions, the pid comes from wl_client_get_credentials, which\u2026\n\nWe can still find pids for wayland clients, I hope\n\n\u2026does the exact same thing (LOCAL_PEERCRED) which is uid/gid only, pid = 0. (In the current patch).\nAt least in the sway IPC, I see where the recv happens. I don't know where it happens for Wayland protocol messages.\nAnyway, again \u2014 I think that fixing security should be a separate PR.. I don't think it's related to the freezing. But it's definitely related to sway's security thing.\nOnce again, it's only possible to use cmsgcred IN THE CODE THAT DOES THE MESSAGE SEND/RECV. I don't know where that is. wlc?. > I don't know where it happens for Wayland protocol messages\n\nWayland protocol messages\nWayland protocol\n\nthe one between the wayland client and wayland server. Do you think that\n\nthe client sending a hello message (with the credentials) as soon as it opens the socket\nand the server synchronously waiting for that message in get_client_pid\n\nis an acceptable solution?\n(Not blocking there would require more complex functionality \u2014 asynchronously elevating permissions after receiving messages.). No, the pid is written by the kernel. The client sends a message with an empty cmsgcred struct as ancillary data. The kernel fills it in. The kernel guarantees that any messages with that struct have data from the kernel.\n\nPossibly helpful: https://lists.freebsd.org/pipermail/freebsd-bugs/2006-September/019991.html\n\nlinux_ucred.pid = 0;. There's a port by @yohanesu75 in the graphics (FreeBSDDesktop) fork. (If you're familiar with Arch, ports are like PKGBUILDs, packages are built from that). Wayland is not yet supported in upstream FreeBSD.\nFiled https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=215202. @yohanesu75 yeah, please update the ports (sway, wlc, wayland-protocols\u2026). The patches in the ports for sure. I don't think anything else needs changing for now.. Uhhh I guess you missed what I ended up doing in wlroots:\n```c\nifdef FreeBSD\ndefine __BSD_VISIBLE 1\nendif\n``. Why not keep debug logging enabled all the time?. Probably a wlroots bug, not sway-specific: in Wayfire, drag'n'drop completely doesn't work for me, and I'm getting the exact same log fromweston-dndas @yorickvP above. Nothing drag related afterstart_drag.. hm, I haven't managed to replicate the \"doesn't work\" problem in Sway or rootston, but inweston-dndSway \"collects\" multiple things onto the cursor, while rootston sometimes failsassert(seat->drag_icon == NULL)inroots_seat_handle_new_drag_icon`.\nAlso I managed to drag text in gedit once after restarting Wayfire, and it stopped working after that \u2014 counts as \"stops working at some point\" I guess.\nupd: with https://github.com/swaywm/wlroots/pull/1529 it worked for a bit longer but also stopped working. So what's happening now (in Wayfire with my changes) is: seat->pointer_state.button_count != 1 || seat->pointer_state.grab_serial != serial rejects the drag. Extra (button) events are sent in between the client getting the first click and it sending the drag start, and clients tend to pick the latest serial. With gedit, the serials are clear and sequential:\n[2214717.386] wl_pointer@3.button(958, 230256, 272, 0)\n\u2026\n[2215067.744] wl_pointer@3.button(959, 230606, 272, 1)\n\u2026\n[2215255.112]  -> wl_data_device@11.start_drag(wl_data_source@47, wl_surface@18, wl_surface@45, 959)\nWhile my extra log output prints\n2019-02-23 22:14:25 - [types/seat/wlr_seat_pointer.c:412] validating grab serial: 2 buttons, serial 958 vs 959\n2019-02-23 22:14:25 - [src/core/seat/seat.cpp:117] Ignoring start_drag request: could not validate pointer or touch serial 959. wow, all weirdness stopped when I fixed the start_drag callback (it was using the wlr_drag as wlr_drag_icon). That itself is very strange\u2026 dereferencing the wrong type caused ASan to report an error, but it did not get to the start_drag callback unless I changed the checks in wlroots to allow >=1 buttons. Now there's always 1 button. hmm. Well, whatever, seems like the refactored dnd actually does work for me, thanks :). update: it still breaks eventually and starts rejecting the serials. Weird: when I add extra logging, it starts working (still breaks eventually it seems), but without, it just never works, broken at the start. It's like something on this code path has to be slower?? o_0\n```diff\ndiff --git i/types/seat/wlr_seat_pointer.c w/types/seat/wlr_seat_pointer.c\nindex d03385cf..d9dcd604 100644\n--- i/types/seat/wlr_seat_pointer.c\n+++ w/types/seat/wlr_seat_pointer.c\n@@ -352,6 +352,8 @@ uint32_t wlr_seat_pointer_notify_button(struct wlr_seat wlr_seat,\n    struct wlr_seat_pointer_grab grab = wlr_seat->pointer_state.grab;\n    uint32_t serial = grab->interface->button(grab, time, button, state);\n\nwlr_log(WLR_DEBUG, \"wlr_seat_pointer_notify_button bcount %d new serial %d\",\nwlr_seat->pointer_state.button_count, serial);\n    if (serial && wlr_seat->pointer_state.button_count == 1) {\n        wlr_seat->pointer_state.grab_serial = serial;\n    }\n@@ -405,6 +407,8 @@ void seat_client_destroy_pointer(struct wl_resource *resource) {\n\nbool wlr_seat_validate_pointer_grab_serial(struct wlr_seat seat,\n        struct wlr_surface origin, uint32_t serial) {\n+   wlr_log(WLR_DEBUG, \"wlr_seat_validate_pointer_grab_serial bcount %d serial %d vs %d\",\n+           seat->pointer_state.button_count, seat->pointer_state.grab_serial, serial);\n    if (seat->pointer_state.button_count != 1 ||\n            seat->pointer_state.grab_serial != serial) {\n        return false;\n```\nWhen everything is good, this logs:\n2019-02-24 14:41:18 - [types/seat/wlr_seat_pointer.c:356] wlr_seat_pointer_notify_button bcount 1 new serial 1740\n2019-02-24 14:41:18 - [types/wlr_surface.c:609] New wlr_surface 0x6180000a6880 (res 0x60c000181540)\n2019-02-24 14:41:18 - [types/seat/wlr_seat_pointer.c:411] wlr_seat_validate_pointer_grab_serial bcount 1 serial 1740 vs 1740\n2019-02-24 14:41:18 - [types/wlr_surface.c:609] New wlr_surface 0x6180000a5c80 (res 0x60c0001810c0)\n2019-02-24 14:41:18 - [types/data_device/wlr_data_source.c:190] Offering additional MIME type after wl_data_device.set_selection\n2019-02-24 14:41:18 - [types/data_device/wlr_data_source.c:197] Ignoring duplicate MIME type offer GTK_TEXT_BUFFER_CONTENTS\n[\u2026more types\u2026]\n2019-02-24 14:41:19 - [types/seat/wlr_seat_pointer.c:356] wlr_seat_pointer_notify_button bcount 0 new serial 0\n2019-02-24 14:41:19 - [src/core/seat/cursor.cpp:169] change cursor focus 0x619000ce9f80 -> 0x6190003dd680\n[1298489.083] wl_pointer@3.button(1739, 1473499, 272, 0)\n[1298489.107] wl_pointer@3.frame()\n[1298511.099] wl_pointer@3.motion(1473521, 88.000000, 133.000000)\n[\u2026frames\u2026]\n[1298730.173] wl_pointer@3.frame()\n[1298776.344] wl_pointer@3.button(1740, 1473786, 272, 1)\n[\u2026frames\u2026]\n[1298918.144] wl_pointer@3.frame()\n[1298918.412]  -> wl_compositor@7.create_surface(new id wl_surface@57)\n[1298918.442]  -> wl_data_device_manager@4.create_data_source(new id wl_data_source@48)\n[1298918.449]  -> wl_data_source@48.offer(\"GTK_TEXT_BUFFER_CONTENTS\")\n[\u2026mime types\u2026]\n[1298918.488]  -> wl_data_device@11.start_drag(wl_data_source@48, wl_surface@18, wl_surface@57, 1740)\nwhen it's bad, well, see above. ",
    "frsfnrrg": "I have a patch for sway which permits key event injection (and hence xcape behavior), although there are significant limitations. It requires that one have an identifier for the keyboard (for this example, 0:0:X11_keyboard press)\u2020 , and creates a new process every use, but does not require root. \n0001-Add-fake_key-command.txt\nNote that faked event timestamps are 0, and please read the warning.\nThen in the sway config file, add a line like\nbindsym --release Control_L exec swaymsg fake_key 0:0:X11_keyboard press_and_release 9\n\nin which 9 is the xkb keycode for Escape. swaymsg indirection avoids a crash.\n\u2020  You can find this by running with full logging  (sway -d), and then reading the log for a line like\n2018-06-02 11:13:59 - [sway/sway/input/input-manager.c:221] adding device: '1:3:example_keyboard'\n\n. I have a patch for sway which permits key event injection (and hence xcape behavior), although there are significant limitations. It requires that one have an identifier for the keyboard (for this example, 0:0:X11_keyboard press)\u2020 , and creates a new process every use, but does not require root. \n0001-Add-fake_key-command.txt\nNote that faked event timestamps are 0, and please read the warning.\nThen in the sway config file, add a line like\nbindsym --release Control_L exec swaymsg fake_key 0:0:X11_keyboard press_and_release 9\n\nin which 9 is the xkb keycode for Escape. swaymsg indirection avoids a crash.\n\u2020  You can find this by running with full logging  (sway -d), and then reading the log for a line like\n2018-06-02 11:13:59 - [sway/sway/input/input-manager.c:221] adding device: '1:3:example_keyboard'\n\n. I've made a short script (https://github.com/frsfnrrg/shortcut/blob/master/shortcut.py) with\nwhich to compare shortcut implementations. It requires Python3.6 and xev.  So,\n\nShortcuts for i3 (\u2283 KDE) are group+modifier+keysym or group+modifier+keycode; very simple (see shortcut_i3) hence fast and bug free.\nSway's current shortcut handling is unintuitive -- it can't distinguish Ctrl+a+b from Ctrl+b+a,  and hardcodes modifiers. My translation is shortcut_sway, which skips translated keysyms due to complexity.\u2020 \nshortcut_delta is the shortcut behavior that I would prefer; a generalization of i3's behavior to short sequences of key combinations, such as Ctrl+m/Meta+r/Meta+s. A keypress is a modifier keypress if the next key press has a different modifier state.\u2020\u2020 We store the last N keypresses which are not modifier keypresses, and match regular shortcuts based on the suffixes of stored keypresses along with the current keypress (which may or may not be a modifier keypress) . (Thus Ctrl+Hyper_L is a valid key combination.) Release shortcuts are triggered on any keyrelease when a stored keypress suffix matches; if multiple do, we pick the shortest match. [In an actual implementation, when a shortcut is triggered, the ring of stored keypresses is wiped so we don't overcall; this can't be shown in the script.]\n\n\u2020(Isn't Unicode case normalization more appropriate? After all, some users might have keyboard states that translate QWERTY to Dvorak, and if they cared for key positions, they'd use bindcode not bindsym)\n\u2020\u2020Hopefully this would also identify latching modifiers.. I've made a short script (https://github.com/frsfnrrg/shortcut/blob/master/shortcut.py) with\nwhich to compare shortcut implementations. It requires Python3.6 and xev.  So,\n\nShortcuts for i3 (\u2283 KDE) are group+modifier+keysym or group+modifier+keycode; very simple (see shortcut_i3) hence fast and bug free.\nSway's current shortcut handling is unintuitive -- it can't distinguish Ctrl+a+b from Ctrl+b+a,  and hardcodes modifiers. My translation is shortcut_sway, which skips translated keysyms due to complexity.\u2020 \nshortcut_delta is the shortcut behavior that I would prefer; a generalization of i3's behavior to short sequences of key combinations, such as Ctrl+m/Meta+r/Meta+s. A keypress is a modifier keypress if the next key press has a different modifier state.\u2020\u2020 We store the last N keypresses which are not modifier keypresses, and match regular shortcuts based on the suffixes of stored keypresses along with the current keypress (which may or may not be a modifier keypress) . (Thus Ctrl+Hyper_L is a valid key combination.) Release shortcuts are triggered on any keyrelease when a stored keypress suffix matches; if multiple do, we pick the shortest match. [In an actual implementation, when a shortcut is triggered, the ring of stored keypresses is wiped so we don't overcall; this can't be shown in the script.]\n\n\u2020(Isn't Unicode case normalization more appropriate? After all, some users might have keyboard states that translate QWERTY to Dvorak, and if they cared for key positions, they'd use bindcode not bindsym)\n\u2020\u2020Hopefully this would also identify latching modifiers.. @RedSoxFan, try again with latest force pushed version; I incorrectly translated the length failure check in my first attempt.. @RedSoxFan, try again with latest force pushed version; I incorrectly translated the length failure check in my first attempt.. I think that I have a mechanism with which Qt-style shortcuts are easily obtained. (As for ease of use, I'd argue that needing fewer keys pressed at a given time is preferable to the simultaneous-keyset style.) I currently have a rough tool at (https://github.com/frsfnrrg/shortcut/blob/master/shortcut.py ) which shows how it works, and plan to have a branch implementing it within a week or two.\nThe mechanism is the same for all three key token types (keycodes, raw keysyms, translated keysyms), as each has associated modifiers and press/release state. With each token stream, we identify a ring buffer of N=3 (id+modifier mask+is_pressed)=token . Similarly, shortcut bindings are sequences of tokens of length <=N, with the usual pressed/locked/etc. flags. A given input key event will produce one keycode token, and some number of raw keysym and translated keysym tokens. For each stream:\n\nStore a short ring buffer of past (pressed ids + modifiers).\nWhen a new token comes in, and modifier state has changed and this is a press event, drop the last stored token if one exists.\nIf this is a press event, match against past tokens + the new token, preferring longer bindings; if this is a release event, match against past_ids and only for bindings with the --release flag.\nIf it is a press event and there was no match, add the current id to the ring buffer. \nIf there was a match of any type, return it.\n\nWhen there is a match, wipe all three ring buffers; indicate an error if the three streams identified more than one distinct binding. If there is a unique match after the key event, and the key event was a press event, propagate neither this keycode press nor the corresponding release. If the key event was a release event, still propagate the key if keyboard focus was not interrupted by the action.. I think that I have a mechanism with which Qt-style shortcuts are easily obtained. (As for ease of use, I'd argue that needing fewer keys pressed at a given time is preferable to the simultaneous-keyset style.) I currently have a rough tool at (https://github.com/frsfnrrg/shortcut/blob/master/shortcut.py ) which shows how it works, and plan to have a branch implementing it within a week or two.\nThe mechanism is the same for all three key token types (keycodes, raw keysyms, translated keysyms), as each has associated modifiers and press/release state. With each token stream, we identify a ring buffer of N=3 (id+modifier mask+is_pressed)=token . Similarly, shortcut bindings are sequences of tokens of length <=N, with the usual pressed/locked/etc. flags. A given input key event will produce one keycode token, and some number of raw keysym and translated keysym tokens. For each stream:\n\nStore a short ring buffer of past (pressed ids + modifiers).\nWhen a new token comes in, and modifier state has changed and this is a press event, drop the last stored token if one exists.\nIf this is a press event, match against past tokens + the new token, preferring longer bindings; if this is a release event, match against past_ids and only for bindings with the --release flag.\nIf it is a press event and there was no match, add the current id to the ring buffer. \nIf there was a match of any type, return it.\n\nWhen there is a match, wipe all three ring buffers; indicate an error if the three streams identified more than one distinct binding. If there is a unique match after the key event, and the key event was a press event, propagate neither this keycode press nor the corresponding release. If the key event was a release event, still propagate the key if keyboard focus was not interrupted by the action.. > @frsfnrrg Thoughts?\nThe previous behaviour was a rewriting artifact that I didn't catch, and in retrospect, definitely a bug.\nThe changes work as advertised.. > @frsfnrrg Thoughts?\nThe previous behaviour was a rewriting artifact that I didn't catch, and in retrospect, definitely a bug.\nThe changes work as advertised.. > Maybe we could have a different type for sorted lists, since we use those in quite a few places. Not sure it's worth it.\nIt's not worth it -- by the same argument, there'd be unorderedlist_t, orderedlist_t, sortedlist_t, etc. It's enough that list_t is a typedef (and even it ought to be renamed to struct list). Also, list_sortedset_insert/find are worse than linear scan for lists always shorter than ~30 elements, so right now the functions are only useful for the bindings.. > Maybe we could have a different type for sorted lists, since we use those in quite a few places. Not sure it's worth it.\nIt's not worth it -- by the same argument, there'd be unorderedlist_t, orderedlist_t, sortedlist_t, etc. It's enough that list_t is a typedef (and even it ought to be renamed to struct list). Also, list_sortedset_insert/find are worse than linear scan for lists always shorter than ~30 elements, so right now the functions are only useful for the bindings.. Thanks for the prompt rejection. (In retrospect, the optimization wasn't a good idea.) I'll make a separate PR for the \"Also extract first workspace name from bindcodes\" bit, since that part actually is useful.. Thanks for the prompt rejection. (In retrospect, the optimization wasn't a good idea.) I'll make a separate PR for the \"Also extract first workspace name from bindcodes\" bit, since that part actually is useful.. I've rebased to master, and have removed the WIP tag.\nThere's a remaining \"TODO: do we want to pass on the event?\" in the case where a binding gets called; I'm not sure what effect is has on clients if press or release mouse events are dropped, and it will be a while before I can investigate and compare with what i3 does.. I've rebased to master, and have removed the WIP tag.\nThere's a remaining \"TODO: do we want to pass on the event?\" in the case where a binding gets called; I'm not sure what effect is has on clients if press or release mouse events are dropped, and it will be a while before I can investigate and compare with what i3 does.. I've decided to use repeat_rate and repeat_delay, instead of separately specifying binding repeat properties. This reduces the extent of the change from this PR. . I may have had the same issue, a while back. If I recall correctly, Qt5 uses the DPI implied by wl_output settings, which often differs from the physical and/or logical DPI inferred under X11. The physical dimension information provided to Qt can be modified by patching wlroots, e.g. with dpi_patch.txt. One can find what wl_output is usually set to using the command weston-info.\n. I may have had the same issue, a while back. If I recall correctly, Qt5 uses the DPI implied by wl_output settings, which often differs from the physical and/or logical DPI inferred under X11. The physical dimension information provided to Qt can be modified by patching wlroots, e.g. with dpi_patch.txt. One can find what wl_output is usually set to using the command weston-info.\n. I'd prefer not to change this as it isn't immediately clear that argv has a valid value at -1; at least, no other command uses this trick. Also, the function changes the values of argc and argv, so this would only change the line which sets bindtype, making it more difficult to see the possible values.. They are necessary to keep track of the keysyms corresponding to a given keycode. (This is cleaner than trying to reverse the xkb API to find what the keysym would have been at the time the corresponding keycode was pressed; consider the shortcut Ctrl+b+at in which Shift is pressed halfway through.)\nThey are somewhat duplicated (up to translation by 8) for the shortcut model tracking keycodes, although even in this case, after a modifier key is erased, pressed_keys[i] might be 0 while pressed_keycodes[i] stores the event keycode.. Technically there is no such thing as a \"modifier keysym\"; modifiers are associated to the current xkb_state, and the set of produced keysyms are associated to the current xkb_state. (Granted, the rule files governing the keymap sometimes link keysyms to modifiers; but in some cases (altwin) it links keycodes directly to modifiers. These linkages may also depend on other properties of the xkb_state; it's telling that the xkbcommon API never provides such an association. The mapping implied by xmodmap is, like its assumption that a keycode can produce no more than one keysym, incorrect in the general case.)\n. That might work, if not for the existence of the function check_shortcut_model which also acts on the shortcut state.  Then again, the shortcut model is the rule set relating key input, binding output, and the state, so check_shortcut_model isn't strictly correct either.\nThe variations struct sway_shortcut_model_state,  update_shortcut_model_state, get_bindings_matching_shortcut_model_state are more precise, but verbose. \nI'll think about this again in eight hours.\n. update_shortcut_model stays, because it's the most apt description I could find. The shortcut model is a reduction of the full key history; and as given by the function comment, update_shortcut_model does precisely that. I did rename check_shortcut_model to get_active_binding.. Done.. This section erases modifier keys once they have been identified as changing the modifier state.\nAs this is discovered on the keypress after the modifier key, last_key_index is stored so that the modifier key can be identified.\nAs for last_key_index is reset: it may be that more than 32 keys are pressed, and then the value\nmight otherwise persist and cause an incorrect removal from the pressed key list.. It's not worth the type disagreement with the int length parameter from list_t, and I would rather avoid unsigned wherever a difference might be computed so as to avoid future type conversion or state bugs that trigger effectively infinite loops.\n(CONTRIBUTING.md points to Linux kernel coding style which says nothing, Google Style votes for signed, most sway code has chosen int in similar cases, and wlroots uses uint32_t to signal nonnegativity.). To be pedantic, npressed is a count, not a size ;-). Still, it would be nice if CONTRIBUTING.md were to mention this convention.. Done; also, indented by two tabs as per style and since the structure is otherwise confusing.. I've removed it from seat_execute_command, and placed it at the end of handle_keyboard_key, as a cleanup point, following the example of dispatch_cursor_button. (Tracking precisely which branches can cause changes ends up brittle.). Indeed. Fixed.. I was unaware of that protocol, and have consistently used 'repeat_step' to denote the spacing (in milliseconds) between subsequent binding invocations. The protocol does not apply in this instance because the binding repeat parameters are, as far as I know, used only for bindings, not clients.. It seems I've incorrectly repurposed the advisory key repeat information. Would you prefer:\n To create separate binding_repeat_rate and  binding_repeat_delay commands?\n To apply the advised repeat/rate information to the bindings?\n. ",
    "avrelaun": "I'm just going to drop my 2 cents here, I have been using this behaviour for more than a year, and it's awesome for tiling wm / vim / graphical apps with ctrl; left pinky finger has way less stress at the end of the day.\nI used https://github.com/oblitum/caps2esc at first and packaged it to exherbo, then @oblitum moved it to https://gitlab.com/interception/linux/plugins/caps2esc as a plugin to a bigger interception-tools project.\nNow that hideaway is built-in to sway, having such a generic input manipulation tool running just for the caps2esc behaviour seems a little overkill and being able to directly configure it from sway would be awesome.. Thanks, #2929 effectively fixed it.. I still have this issue even though #3031 was merged.\nI am running master and update several times a week, and the issue was never fixed.\nCan someone reopen or shall I create another ticket ?. I have similar behaviour with wayland native gtk apps, eg. pcmanfm-gtk3 or evolution: drag and drop won't work after some time.\nRestarting the apps does not make it work again.. Sure, an option would be great, for those of us wanting the old i3 behaviour.. This is really annoying, and it's pretty much the only reason I still have to start i3.\nI suspect all desktop Java apps might have a similar behaviour.. I cannot even start Libreoffice on weston \"Cannot open display\".. I updated Libreoffice from 6.1.4 to 6.2 today, it now works as expected.. ",
    "GrayHatter": "@tinchou I'm going to take a look at this, could you explain in very descriptive detail what's going wrong, why you think it's happening, and what you expect to be happening?. @tinchou I'm going to take a look at this, could you explain in very descriptive detail what's going wrong, why you think it's happening, and what you expect to be happening?. Yeah, I'm planning to put a little work in to touchscreen on sway when I get a few other projects cleaned up.. Yeah, I'm planning to put a little work in to touchscreen on sway when I get a few other projects cleaned up.. ",
    "tinchou": "I'm having trouble with my Arch installation at the moment. Will let you\nknow when I can test this!\nOn Fri, Dec 23, 2016, 04:18 Gregory Mullen notifications@github.com wrote:\n\n@tinchou https://github.com/tinchou I'm going to take a look at this,\ncould you explain in very descriptive detail what's going wrong, why you\nthink it's happening, and what you expect to be happening?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/721#issuecomment-268950052, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/ABeg9L8r5Fct2KJXdKeyvHS7R-iyojoqks5rK3XWgaJpZM4I7EQF\n.\n. Hi, I'm back :).\n\nLet's start with a very simple feature: I want to be able to touch buttons!\nMy primary use case is Google Chrome, but even with a native app like pcmanfm I can't touch them.\nBut that is very weird because scrolling and zooming kind of works. With Chrome, I am able to scroll the page, but the behavior is very weird:\n\nTouch and drag the page. It scrolls.\nDo (1) again. The page scrolls back to the original position, so you'll never be able to go down more than one page.\nIt doesn't keep scrolling after you lift your finger (I think it's called momentum scrolling). That's a great idea, but I haven't found the time yet. @GrayHatter seems to be interested in working on this, so I'm trying to help in some way.. \n",
    "JaneSmith": "I'd love to see a tiling window manager with solid touchscreen support. Maybe I'm wrong, but from my experience tiling window managers always seem to lack touch support entirely, and even have poor mouse support. While being keyboard-friendly is an advantage of TWMs, that doesn't mean mouse or touch support should be abandoned. A good use case for this in my opinion would be hybrid tablets/laptops. People often recommend TWMs on laptops to make use of the limited screen space and be more effective with a keyboard, but as soon as you switch it to tablet mode you need to rely on touch input only.. ",
    "matiasbattocchia": "I managed to calibrate my touchscreen accuracy following this article. It seems that both the status bar (i3status) and the window title bar introduce an offset of 40 px in my setup. Now it works rather well with certain programs. It is not the case of Firefox/Chrome; I think it also depends on the software support for touch interaction.\nWindow focus and screen splitting are still problematic. \nExample configuration for the aforementioned guide.\n```\ntotal_width  = 1366\ntotal_height =  768\ntouch_area_x_offset =   0\ntouch_area_y_offset = -40\ntouch_area_width  = total_width\ntouch_area_height = total_height\n```. ",
    "sleep-walker": "It behaves the same was as slock so it fits me. You could do something like\nswaylock & sleep 1; date\n. It's hack, I agree. Clean solution is the one @SirCmpwn already proposed. Nice to see using sway ;)\n. 1. I don't think 3 RCs are needed, but some more time between them could help. I'm packaging them as well but it takes time until it gets to wider audience.\n2. As package maintainer I welcome that.\n3. No opinion on this.. Hi, ng0. I'm looking forward to have sway also on Guix :)\nInteresting issue, but all leads to problem with GCC. Can you try different GCC version?\ngcc-toolchain 6.3.0 doesn't seem to have this issue and neither openSUSE's 7.2.... what about Stav instead?. zavislosti pro sestaveni (nebo build, preklad, ...)\nThese are build time dependencies, not run-time dependencies.... ",
    "asymmetric": "Still an issue on sway 0.15.0, especially with Firefox's uMatrix pop-up, where clicks aren't detected properly. . Has this been fixed as part of the hackathon? :). Should this be updated to say YES?. ",
    "sqrtroot": "Any status update?\n. Any insight as to where this problem stems from, a place to start making a patch to fix this?. ",
    "ixru": "Firefox submits two configure requests for any surface it intends to have mapped I think.\nThe first one requests the correct geometry, but the second passes 1x1 causing it to shrink.\nhttps://github.com/swaywm/wlroots/blob/master/xwayland/xwm.c#L804\nThis handles the event, but always handles it as an attempt to set the geometry even though that might not be the case. \nhttps://tronche.com/gui/x/xlib/events/structure-control/configure.html\nI think these are the other actions it can take. \nhttps://tronche.com/gui/x/xlib/window/configure.html#XWindowChanges\nIf I print value_mask for each event I get 12(width and height) for the first one and 64(StackMode) for the second. Perhaps it is trying to raise the window.. ",
    "N8Fear": "Yeah - I have had similar problems due to \"wrong\" settings in i3blocks (my status bar command uses it and sway sat at about 30% CPU utilization). Fixing my status bar helped and now it's normal again.\nMaybe it would be a good idea to kind of rate limit the statusbar updates to protect users from their wrong configs...\n. ",
    "thejan2009": "I could reproduce the crash by creating a tabbed layout and then constantly refocusing the first window, creating new containers in horizontal split.\nInteresting enough, when I try to get a similar crash with vertical split, sway doesn't crash, but the lower windows are squashed into 0 height. Attached is the relevant log. Notice how a few containers occupy the bottom side of the output, with a height of 0.\nsway.log\nOn another retry of reproducing the bug with horizontal split, I again managed to set visible container's width to 0, and then crash the program.\nsway.log\n. Those are actually 2 swaybars, because you have 2 bar{} sections in your config. If you merge them, your issue will disappear.\nThere is another bug actually: the button for workspace 3: Term is smaller than the others.\n. @kilbith If I remember correctly, only the latest Valgrind from their SVN repository can successfully launch sway.\n. This sometimes breaks hiding right and bottom borders (when there is more than one child in the workspace).\n. I think this should be merged, even if it's a temporary fix. While it doesn't match i3 behaviour exactly (yet), at least workspace_layout tabbed/stacked is usable again. I'll make another PR when I get some response over at i3.\n. Sometimes borders don't update (render) at the exact moment, but only when the mouse is moved or some other event occurs, so it looks like the compositor is lagging very much. You might want to add somewhere some explicit command for wlc to render the borders immediately.\n. > run swaymsg 'layout tabbed' \n@minus7 You said that the title bar should appear after this step. I tried the same sequence of commands in i3 and there was no title bar as long as only one window was open. The titlebar part that you see on the left top side of screenshot, behind the terminal window, is \"just\" a residue of previous drawing of the borders (that was also reported in #745). \nThe  only problem I noticed here is that the top border didn't get drawn - the darker grey colour in the top border is actually #383838 solid background.\n\n. Just sharing some of my findings. It might be a wlc xwayland bug.\nThe cause is not Mod1 not being processed and dropped. When an xwayland window gets focused, it gets sent a modifier pressed event.  This doesn't occur with native wayland windows. \nReproducing the issue with xev:\nxev | grep -A 4 \"KeyPress\\|KeyRelease\"\nIf you observe the output when changing focus to xev window with $mod+l, there will be Super_L KeyPress event (or Alt_L in your case, I guess) before KeyRelease event.\nIt doesn't happen with wayland clients, though:\nWAYLAND_DEBUG=1 weston-terminal 2>&1 | grep \"wl_keyboard.*key(\"\nWhen this window receives focus in the same way as xev, it will only receive KeyRelease events (indiciated by the last number in line being 0).\n. Sorry, didn't notice.\n. There are multiple issues here. First of all, the reported failure to parse criteria. There is also another issue which might be related to upstream: --class=something doesn't change the window's class or appname. Relevant output of command swaymsg -t get_tree when termite was started with --class option: \n\"window\": 5,\n              \"window_properties\": {\n                \"class\": \"termite\",\n                \"title\": \"js@planica:~\",\n                \"transient_for\": null\n              },\n              \"fullscreen_mode\": 0,\n              \"sticky\": false,\n              \"floating\": \"auto_off\",\n              \"app_id\": \"termite\",\n. Use title instead of class, e.g. termite --title=scratchpad_termite and for_window [title=\"scratchpad_termite\"] move scratchpad.  About the second part - criteria doesn't seem to be implemented as one would expect, it doesn't work with arbitrary commands, only with for_window. That should probably be a separate issue.\n. Here is what happens: if binding_mode colours aren't provided in config, i3 uses urgent_workspace setting as a fallback. Swaybar is also missing 3 colour settings: focused_background, focused_statusline and focused_separator.\n. I found a better way to do it. Views under workspaces should now be encapsulated pretty much every time. \n. #945 is the culprit.\n. Would closing a window by middle-clicking the title bar be a legit substitute?\n. This functionality is yet to be implemented.\n. Needs additional testing on multi-head setup: observe how views and containers move between workspaces on different outputs when you issue \"move (right|left|up|down)\" command. If that works as expected, this should be good to merge.\n. I'm not sure how Awesome does it, but you might have to look into container movements. The following was achieved by moving a container \"up\" into the bigger area and then moving it back \"down\".  When additional views are invoked, their width is different from every other container. I suppose they should be equally wide?\n\n. That should already be possible to do with a custom ipc command. Built on i3ipc, for example.. happens in i3 too: https://github.com/i3/i3/issues/2871\n. Change this too: https://github.com/SirCmpwn/sway/blob/master/swaymsg/main.c#L134. Right, I seem to have missed another setting, default_border, configured to anything but normal. I have it set to pixel 1. The combination results in borders displaying only between tiled containers, and stacked or tiled containers with multiple direct children are the only ones that show their titlebars.\nTo reproduce, a minimal config:\ndefault_border pixel 1\nhide_edge_borders smart\nworkspace_layout tabbed\nThen spawn a window, observe no borders or titlebars. Spawn another window, observe titlebar with two tabs. In sway, the titlebar is always present.. Interesting, I wasn't aware of flags in the config. It'd certainly be a better solution because all the options can be adjusted to behave as in i3. I'm sure this will affect the horizontal option too, and I'll have to look into what smart and smart_no_gaps should be doing. . The optional flag together with the original config command seems quite a mouthful, so I simplified it a bit.. I wasn't sure how sideway scrolling would register (if both vertical and horizontal components would be != 0).\n. It does, https://github.com/i3/i3/blob/next/i3bar/src/xcb.c#L430\n. @SirCmpwn you're too fast :)\n@emersion It's such a small change that I don't think it really matters... s/src/dst/. Would you consider changing last_output and new_output init a few lines below? Now that we have workspaces defined, these are just  one new_output = container_parent(new_workspace, C_OUTPUT) away.. I'd then settle on initially assigning new_workspace to new_output, last_workspace to last_output and leaving the container_parent calls inside if clauses.. There is a workspace_layout command in i3 though. And it works in quite an unexpected way (see https://github.com/i3/i3/issues/2402).. ",
    "siddharthist": "@SirCmpwn Just wanted to get some feedback before going ahead and changing it, especially considering that no review is needed for a wiki. I'll go ahead and do that now. \n. @SirCmpwn What do you think about adding NixOS to the README, since Sway is supported now?\n. ",
    "lepianoman": "Curious, what about Weston screensaver? (I'm not very knowledgeable so that may be a n00b question)\n. ",
    "rubdos": "I'd press the +1 button, but qutebrowser doesn't seem to support that.\nAnyhow, I have this issue too, should I report that to gdm, and how?\n. > wayland/x11 clipboard sync damon: $40\nCan this be implemented in terms of #926? I would suppose so. If so, I'd like to take on #926, and if that works out good, I would consider tackling wayland/xwayland clipboard sync.. @neon64, no, I dropped it because of a lack-of-time.. Tested and working. Solves my issue of running i3status-rust under wlroots.. I have the same issue (intermittently) on my Thinkpad dock. Unplugging other monitors seems fine.. ",
    "duckbrain": "I didn't see a bug report for this in GDM's issue tracker, so I submitted one here:\nhttps://bugzilla.gnome.org/show_bug.cgi?id=771394\n. ",
    "Ferruck": "There's been no reaction on the bugzilla since you reported the bug. It's really annoying, I hope they dig into it soon.\n. Sorry, I didn't want to offend anybody. I know that all this is volunteer work and I really appreciate this. Unfortunately I'm really busy at the moment so I've got no sparse time left to dig into a bigger code base such as gdms. That's why I hope that someone who already has a profund knowledge of the code base would care about the issue.\n. ",
    "toogley": "what's the current status of this?. ",
    "jkobezda": "Config file: http://ix.io/15sN\n. ```\n(gdb) run -dV\nStarting program: /usr/bin/sway -dV\n08/19/16 09:52:01 - [wlc] Failed to create file for keymap\nProgram received signal SIGSEGV, Segmentation fault.\nfree (p=0x7f21953091c0) at src/malloc/malloc.c:464\n464 src/malloc/malloc.c: No such file or directory.\n(gdb) bt full\n0  free (p=0x7f21953091c0) at src/malloc/malloc.c:464\n    self = 0x7f21953091b0\n    next = 0x7f21953092b0\n    final_size = 256\n    new_size = 256\n    size = <optimized out>\n    reclaim = 0\n\n1  0x00007f2199162718 in xkb_keymap_unref () from /usr/lib/libxkbcommon.so.0\nNo symbol table info available.\n2  0x00007f21993974cc in wlc_keymap_release (keymap=keymap@entry=0x7f21995bc8e0 )\nat /var/tmp/portage/dev-libs/wlc-9999/work/wlc-9999/src/compositor/seat/keymap.c:61\n\nNo locals.\n3  0x00007f2199399866 in wlc_seat_release (seat=0x7f21995bc6d8 ) at /var/tmp/portage/dev-libs/wlc-9999/work/wlc-9999/src/compositor/seat/seat.c:284\nNo locals.\n4  0x00007f2199399a22 in wlc_seat (seat=seat@entry=0x7f21995bc6d8 )\nat /var/tmp/portage/dev-libs/wlc-9999/work/wlc-9999/src/compositor/seat/seat.c:331\n    rules = {rules = 0x0, model = 0x0, layout = 0x0, variant = 0x0, options = 0x0}\n\n5  0x00007f21993921a5 in wlc_compositor (compositor=compositor@entry=0x7f21995bc6c0 )\nat /var/tmp/portage/dev-libs/wlc-9999/work/wlc-9999/src/compositor/compositor.c:766\n\nNo locals.\n6  0x00007f21993aaa8c in wlc_init () at /var/tmp/portage/dev-libs/wlc-9999/work/wlc-9999/src/wlc.c:391\n    x11display = 0x7ffeb39c4fb0 \":0\"\n    privileged = <optimized out>\n    vt = <optimized out>\n    socket_name = <optimized out>\n    libinput = <optimized out>\n\n7  0x00005629867ad6ee in main (argc=2, argv=0x7ffeb39c4618) at /var/tmp/portage/dev-libs/sway-9999/work/sway-9999/sway/main.c:191\n    verbose = 1\n    debug = 1\n    validate = 0\n    long_options = {{name = 0x5629867d3f6f \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5629867d26d8 \"config\", has_arg = 1, flag = 0x0, \n        val = 99}, {name = 0x5629867d3f74 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5629867d3f7d \"debug\", has_arg = 0, flag = 0x0, \n        val = 100}, {name = 0x5629867d3f83 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5629867d35ca \"verbose\", has_arg = 0, flag = 0x0, \n        val = 86}, {name = 0x5629867d48af \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5629867d4098 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = <optimized out>\n\n```\n. So, the \"Failed to create file for keymap\" is because I had XDG_RUNTIME_DIR on a ZFS filesystem, which doesn't support fallocate(). See strace:\nopen(\"/tmp/john//wlc-shared-PeIHcJ\", O_RDWR|O_CREAT|O_EXCL|O_CLOEXEC, 0600) = 10\nfcntl(10, F_SETFD, FD_CLOEXEC)          = 0\nunlink(\"/tmp/john//wlc-shared-PeIHcJ\")  = 0\nfallocate(10, 0, 0, 45094)              = -1 EOPNOTSUPP (Not supported)\nclose(10)                               = 0\nopen(\"/etc/localtime\", O_RDONLY|O_NONBLOCK|O_CLOEXEC) = 10\nfstat(10, {st_mode=S_IFREG|0644, st_size=2272, ...}) = 0\nmmap(NULL, 2272, PROT_READ, MAP_SHARED, 10, 0) = 0x7f84f8cc2000\nclose(10)                               = 0\nwritev(2, [{\"\", 0}, {\"08/19/16 15:12:40 - \", 20}], 208/19/16 15:12:40 - ) = 20\nioctl(2, TIOCGWINSZ, 0x7ffcad593100)    = -1 ENOTTY (Not a tty)\nwritev(2, [{\"[wlc] Failed to create file for \"..., 38}, {NULL, 0}], 2[wlc] Failed to create file for keymap) = 38\nioctl(2, TIOCGWINSZ, 0x7ffcad593100)    = -1 ENOTTY (Not a tty)\nwritev(2, [{\"\", 0}, {\"\\n\", 1}], 2\n)      = 1\n--- SIGSEGV {si_signo=SIGSEGV, si_code=SI_KERNEL, si_addr=0} ---\n+++ killed by SIGSEGV +++\n08/19/16 15:12:40 - [wlc] Parent exit (5926)\nEdit: https://github.com/zfsonlinux/zfs/issues/326\n. I worked around it by putting XDG_RUNTIME_DIR on tmpfs. \nAlso it doesn't segfault anymore. Closing.\n. This was probably caused by the same issue as https://github.com/SirCmpwn/sway/issues/865, my wallpaper file was inaccessible. It works now.\n. Sure. \n```\nsway version 0.9-48-gb18c64d (2016-08-20, branch \"HEAD\")\nPortage 2.2.28 (python 3.4.3-final-0, unavailable, gcc-4.9.3, glibc-2.22-r4, 4.7.1-hardened x86_64)\nSystem uname: Linux-4.7.1-hardened-x86_64-Intel-R-Core-TM-_i5-5200U_CPU@_2.20GHz-with-gentoo-2.2\nKiB Mem:    11750164 total,  10619304 free\n```\nAlso happens with grsecurity disabled, and on both glibc and musl... Sway 0.8 doesn't segfault.\n. Found out that https://github.com/SirCmpwn/sway/commit/735f3d076e7510ca20ada410037ed183f6f09fe5 is fine, https://github.com/SirCmpwn/sway/commit/5ec70458e5a840c5c85de46debdf7934d03d5904 sefgaults.\n. Sway config: sway-config.zip\nHowever it looks like it happens with default config, too.\n. ",
    "jonas-schievink": "Are you sure that this isn't an X11 vs. Wayland benchmark?\n. > Note : Gnome on Wayland gives more FPS than on X.\nIs Gnome on Wayland faster than sway too?\n. Might be related to #741, which sway version are you using?\n. I think target_link_libraries is the preferred way to link stuff. And since this is only required by sway this could be moved to sway/CMakeLists.txt.\n. ",
    "kilbith": "\nAre you sure that this isn't an X11 vs. Wayland benchmark?\n\nAbsolutely not. Wayland usually gives more FPS on a native window.\n. > Is Gnome on Wayland faster than sway too?\nYep, absolutely.\nEDIT : see glxgears benchmark in 1st comment.\n. > which sway version are you using?\nsway 0.8, on Arch. I've briefly tried the git version but the CPU was overly consuming up to 40% for basic tasks...\nAdd.: glxgears results added for gnome-wayland above.\n. Note : sway launching has prematurely aborted for some reason with Valgrind...\n- Callgrind\n- Massif\n. More extensive benchmarks (Xonotic) added in first comment.\n@DarkDefender Not tested on Weston.\n. I'm sorry, but I'm not understanding. I have ran some rigorous benchmarks, indicated objective values as the results of several circumstances that some users can correlate.\nProfiles or not it exposes a real issue, isn't that enough to keep this opened ? Or maybe it's preferable to re-open this on wlc ?\nAlso : as a simple user, I'm not required to send you patches.\nRegards,\nThe doofus.. Issue closed in all disdain from the majority of feedbacks in favor of removing these shitty wallpapers. Thanks Sir.\n. ",
    "DarkDefender": "I sadly can't help with profiling either as Valgrind does not support my Bulldozer CPU (it can't handle some AMD specific instructions).\nI just wanted to say that I notice the same problem with my AMD 290x.\nIn xorg I get ~6000 fps with  glxgears. In weston I get ~5600 fps and in sway I get ~4500 fps.\n@kilbith do you get the same fps with weston as with gnome-wayland?\n. I built and tested with todays git version. I have had this issue for as long as I tried sway (About 3 months)\n. @Cloudef Ah, I guess that maybe the problem is more obvious for me then because I have a 1000hz mouse.\n. Maybe this problem is also why we get lower fps with glxgears: #775 \n. ",
    "marcelltoth": "With Google Chrome (for example trying to change the default search engine in the Settings / Settings / Search section) it does not work the 1st time either, instead the whole window flashes once (going to the unfocused state then back again immediately), and the dropdown flashes as well (as if it was dismissed right at the moment it was opened). For this reason clicking \"in the air\" does not work here (but the arrow keys do).\n. ",
    "mlofjard": "I get mouse cursor size issues when adding scale 2x to my config. On the title bar and background surfaces the mouse cursor is really tiny (not scaled at all), and in urxvt or weston-terminal (i.e. both wayland and xwayland apps) the mouse cursor is 4x the size. I dont get the correct size of the cursor anywhere.. ",
    "wmww": "Programs running in XWayland are scaled correctly, but this is done (presumably) by rendering them at a low resolution and scaling them up because they are all low res and bury. A better solution would be to render them at full resolution with the proper HiDPI X11 settings or even have some mechanism to choose between the two options (since not everything works well on HiDPI). I know this is possible because Gnome does it and everything looks great. I'm willing to help implement this if you point me in the right direction.\n(btw, is this the right place or should I start a new issue?). This is happening to me too. I have a core dump available upon request (stack trace looks the same as one above).. Here it is. Sorry it took so long. I was on mobile before, then I forgot. My bad.\nswaybar_crash_after_a_while.zip\n. I too experience these crashes rather frequently (once every 20-40 pastes).. I now have a core dump. How should I get it to you?. sway_crash_on_paste.zip\nHere you go. Good luck. Just so you know, I built sway from the latest GitHub master (as of this morning).. Update: when run in valgrind, sway runs perfectly, because of course it does.. This bit of valgrind output might be relevant:\n==7669== Invalid write of size 8\n==7669==    at 0x129262: handle_xdg_shell_surface (xdg_shell.c:452)\n==7669==    by 0x6C98C4D: wlr_signal_emit_safe (signal.c:29)\n==7669==    by 0x6C7F777: handle_xdg_surface_commit (wlr_xdg_surface.c:344)\n==7669==    by 0x6C91641: surface_commit_pending (wlr_surface.c:398)\n==7669==    by 0x6C91A34: surface_commit (wlr_surface.c:470)\n==7669==    by 0x978B1C7: ffi_call_unix64 (in /usr/lib/libffi.so.6.0.4)\n==7669==    by 0x978AC29: ffi_call (in /usr/lib/libffi.so.6.0.4)\n==7669==    by 0x6A3BA2E: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==7669==    by 0x6A37F28: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==7669==    by 0x6A39A41: wl_event_loop_dispatch (in /usr/lib/libwayland-server.so.0.1.0)\n==7669==    by 0x6A3814B: wl_display_run (in /usr/lib/libwayland-server.so.0.1.0)\n==7669==    by 0x114FF1: server_run (server.c:159)\n==7669==  Address 0x12a63518 is 24 bytes after a block of size 288 in arena \"client\". It appears through a combination of accidentally leaving a wlroots AUR package installed and failing to give the wlroots install prefix to meson, sway ended up using a different wlroots then the one I intended. When both sway and wlroots are built from the latest master, everything seems to be fine. Sorry for the trouble.\nTLDR: everything seems to be fine. Acknowledged, Thanks for looking it over. I'll keep running it locally, and possibly update with your suggestions when I have more time. Unlikely to happen in the next few days though, so you can close this if you wan't to.. > Unlikely to happen in the next few days though\nWhoops, couldn't help myself.\nI fixed this, and moved it to the above-mentioned PR.. Sure, one sec.... done. done. ",
    "handijk": "Choosing between the two options does not seem possible, see: https://github.com/Enerccio/ewlc/issues/82\nI have created an issue to allow for setting a global DPI for xwayland in ewlc, see: https://github.com/Enerccio/ewlc/issues/99. I have submitted an issue to wlc also, https://github.com/Cloudef/wlc/issues/268. ",
    "Enerccio": "@SirCmpwn sway can be build with ewlc (tested):\ncmake -DWLC_LIBRARIES=<ewlc-path>/target/src/libewlc.so -DWLC_INCLUDE_DIRS=<ewlc-path>/include ... Of course, I mean more in a way that optionally someone can do it themselves .\n",
    "likyng": "Would it be possible that sway renders xwayland windows at 1x, even if scale=2 is set in the sway config? Then, scaling could be set within x11 so that xwayland windows (with scaling support) will be rendered crisply?\nEdit: I guess this is covered in #1047. Would it be possible that sway renders xwayland windows at 1x, even if scale=2 is set in the sway config? Then, scaling could be set within x11 so that xwayland windows (with scaling support) will be rendered crisply?\nEdit: I guess this is covered in #1047. Hey @WolfangAukang could you maybe tell me in more detail how you made it work?\nI think i tried the same, but I get the following error: \nNov 08 17:57:49 arch-tp systemd[1]: Starting Lock current sway session at device sleep...\nNov 08 17:57:49 arch-tp swaylock[13260]: error: XDG_RUNTIME_DIR not set in the environment.\nNov 08 17:57:49 arch-tp swaylock[13260]: E: 11/08/17 17:57:49 - [registry.c:256] Error opening display\nNov 08 17:57:56 arch-tp swaylock[13260]: sway socket not detected.\nNov 08 17:57:56 arch-tp swaylock[13260]: E: 11/08/17 17:57:56 - [main.c:550] Unable to connect to wayland compositor\nNov 08 17:57:56 arch-tp systemd[1]: lock-screen.service: Control process exited, code=exited status=1\nNov 08 17:57:56 arch-tp systemd[1]: lock-screen.service: Failed with result 'exit-code'.\nNov 08 17:57:56 arch-tp systemd[1]: Failed to start Lock current sway session at device sleep.\n\nmy lock-screen.service file is located in /etc/systemd/system/lock-screen.service and I enabled it. It looks like this: \n[Unit]\nDescription=Lock current sway session at device sleep\n\n[Service]\nUser=MYUSERNAME\nType=forking\nEnvironment=DISPLAY=:0\nExecStart=/usr/bin/swaylock -i /home/MYUSERNAME/pics/MYPIC.jpg --scaling=fill\n\n[Install]\nWantedBy=suspend.target\n\nAdding After=suspend.target or Before=suspend.target to the unit file does not change anything..\n. Hey @WolfangAukang could you maybe tell me in more detail how you made it work?\nI think i tried the same, but I get the following error: \nNov 08 17:57:49 arch-tp systemd[1]: Starting Lock current sway session at device sleep...\nNov 08 17:57:49 arch-tp swaylock[13260]: error: XDG_RUNTIME_DIR not set in the environment.\nNov 08 17:57:49 arch-tp swaylock[13260]: E: 11/08/17 17:57:49 - [registry.c:256] Error opening display\nNov 08 17:57:56 arch-tp swaylock[13260]: sway socket not detected.\nNov 08 17:57:56 arch-tp swaylock[13260]: E: 11/08/17 17:57:56 - [main.c:550] Unable to connect to wayland compositor\nNov 08 17:57:56 arch-tp systemd[1]: lock-screen.service: Control process exited, code=exited status=1\nNov 08 17:57:56 arch-tp systemd[1]: lock-screen.service: Failed with result 'exit-code'.\nNov 08 17:57:56 arch-tp systemd[1]: Failed to start Lock current sway session at device sleep.\n\nmy lock-screen.service file is located in /etc/systemd/system/lock-screen.service and I enabled it. It looks like this: \n[Unit]\nDescription=Lock current sway session at device sleep\n\n[Service]\nUser=MYUSERNAME\nType=forking\nEnvironment=DISPLAY=:0\nExecStart=/usr/bin/swaylock -i /home/MYUSERNAME/pics/MYPIC.jpg --scaling=fill\n\n[Install]\nWantedBy=suspend.target\n\nAdding After=suspend.target or Before=suspend.target to the unit file does not change anything..\n. Hey @lephe , I have the same issue (lenovo T480s with Intel IGP and nvidia graphics card). The issue persists even if I set WLR_DRM_DEVICES=/dev/dri/card0 before starting sway. \nHow have you solved the issue?\nPerhaps the graphics card could only be loaded by wlroots if it has a CRTC? EDIT: I just saw that an issue for that was already create by emersion: #2816 . Hey @lephe , I have the same issue (lenovo T480s with Intel IGP and nvidia graphics card). The issue persists even if I set WLR_DRM_DEVICES=/dev/dri/card0 before starting sway. \nHow have you solved the issue?\nPerhaps the graphics card could only be loaded by wlroots if it has a CRTC? EDIT: I just saw that an issue for that was already create by emersion: #2816 . ",
    "leorosa": "An option to mimic the i3 behavior (move only a wireframe, and then resize the windows) could be useful.. An option to mimic the i3 behavior (move only a wireframe, and then resize the windows) could be useful.. ",
    "rumpelsepp": "But then commit IDs will change. Might be problematic with tags and references in the bugtracker.\n. ",
    "ford-perfect": "I have the gut feeling that sway does not handle tabbed or stacked layouts the same way as the other ones. This becomes apparent in the following scenario:\nOne tries to vertically resize the browser in the picture you uploaded my using the floating_modifier. This does not work but it does work if one tries to resize the 'Angels Beats' tabs. \nOr should I open a seperate issue for that?\n. ",
    "rucuriousyet": "How can I set Sway to hidpi mode? I am currently using on a 4k display and its pretty blurry.. ",
    "danielcb": "@stapelberg did you get rxvt to work without blurry fonts by any chance? I've everything setup and working quite well. Gnome-terminal is as sharp as it can be (hidpi, scale 2), but I can't get rxvt-unicode to render sharp fonts (Xft.dpi 282, antialias and the like are set already).\nEdit:\nOkay, after reading again, probably an Xwayland/scaling issue? mh.. Meaning you know what the problem is or you determined it's not a problem of sway/wlroots/etc? I'm just asking, because I'm seeing this in a view apps (vs code, firefox, chrome, teamviewer).. Thanks!. There's still no fix for this? I just noticed this after upgrading to Goland 2018.3 :(. ",
    "ldmldmldm": "thanks @thejan2009 that worked, https://github.com/Cloudef/wlc/issues/167\n. Yes it would be nice to target all input for flat accel, but only all touchpads for natural scrolling.\n. I'm so sorry I thought I did.\n. ",
    "danroconnor": "Thanks @thejan2009! Adding a second video parameter forces the laptop display on as well:\nvideo=DP-1:1920x1200D video=eDP-1:1440x900D. ",
    "nloewen": "Better would be a way to target classes of devices like you can with the libinput Xorg configs.\n. Is this something that could be handled/abstracted in WLC? They already have a chunk of logind specific code.\n. Unicode characters can be difficult to type. This is especially when working with icon fonts which make use of otherwise unused code points which won't show up in any physical or soft keyboards.\nPlus months or years later when you want to tweak your bar script, you end up looking at a bunch of unknown character boxes. You can at least look up a code point in a reference. It's impossible to tell what a little box was supposed to be.\n. Ah, I was confusing this for any character substitution. Then I've got no clue.\n. This is a limitation of Wayland, not a bug.\nhttps://wiki.archlinux.org/index.php/Wayland#Running_graphical_applications_as_root. ",
    "acorreya": "Hello..\nGot busy with life. Meanwhile, I need to know how can I collect the logs.\nI'm failing to reproduce the error tho..\nAdrine Antony Correya\nDoctoral Researcher\nInternational School of Photonics\nCochin University of Science and Technology\nKochi, India - 682022\n+91 9746-117-110\nOn 15-Aug-2016 20:23, \"Drew DeVault\" notifications@github.com wrote:\n\nYes, a log would be nice.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/857#issuecomment-239822933, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/ADE2A-mVoEcf1Vk4zml5YNlqmr2Lc5uJks5qgH1tgaJpZM4JkaoU\n.\n. Can't reproduce this anymore. I think it's something with Firefox like windows\n. Thanks for all the great work, btw. Maybe I'll find a way out and let you know. Huge fan, by the way. \n. Will this do?\n```\nhwinfo --gfxcard \n10: PCI 02.0: 0300 VGA compatible controller (VGA)            \n  [Created at pci.378]\n  Unique ID: _Znp.CCoAMI2qUtC\n  SysFS ID: /devices/pci0000:00/0000:00:02.0\n  SysFS BusID: 0000:00:02.0\n  Hardware Class: graphics card\n  Model: \"Intel Atom Processor Z36xxx/Z37xxx Series Graphics & Display\"\n  Vendor: pci 0x8086 \"Intel Corporation\"\n  Device: pci 0x0f31 \"Atom Processor Z36xxx/Z37xxx Series Graphics & Display\"\n  SubVendor: pci 0x1025 \"Acer Incorporated [ALI]\"\n  SubDevice: pci 0x0933 \n  Revision: 0x0e\n  Driver: \"i915\"\n  Driver Modules: \"i915\"\n  Memory Range: 0x90000000-0x903fffff (rw,non-prefetchable)\n  Memory Range: 0x80000000-0x8fffffff (ro,non-prefetchable)\n  I/O Ports: 0x2050-0x2057 (rw)\n  Memory Range: 0x000c0000-0x000dffff (rw,non-prefetchable,disabled)\n  IRQ: 256 (3261 events)\n  Module Alias: \"pci:v00008086d00000F31sv00001025sd00000933bc03sc00i00\"\n  Driver Info #0:\n    Driver Status: i915 is active\n    Driver Activation Cmd: \"modprobe i915\"\n  Config Status: cfg=new, avail=yes, need=no, active=unknown\n\nPrimary display adapter: #10\n``. Is there anything I should do about it? Like raising an issue somewhere?. Please guide me, I'm all ears.. Update:\nLooks like it flickers very rarely when using kernelaur/linux-rt-bfq 4.9.47.37-1 (7, 0.52)`.\n4.12.13-1-ARCH #1 SMP PREEMPT Fri Sep 15 06:36:43 UTC 2017 x86_64 GNU/Linux . . Can see the same on way-cooler 1:0.6.2-2, less flicker on linux-rt-bfq kernel. ",
    "goetzc": "Oh, didn't see that PR.\nWhat about the other two items?\n. An 'input {}' example in the config file. \nAnd the other is that it is not so clear from the man page, that the sway-input commands must be specified inside the input {}block. The sway-bar man is clearer about that. Using those workings, one could have:\nIn the DESCRIPTION section, instead of:\n\nSway allows for configuration of libinput devices through input { } blocks in your config file.\n\nThis:\n\nSway allows for configuration of libinput devices within the sway configuration file. sway-input commands must be used inside a input {} block in the config.\n. Sure, hope it is ok #862.\n. \n",
    "PaulDebus": "I have this exact problem too. You know any more about this?\n. I have this exact problem too. You know any more about this?\n. @cactorium have you found out something? I just realized it is still not working correctly.... @cactorium have you found out something? I just realized it is still not working correctly.... It is not a sway bindsym it is an emacs keybinding or a shortcut in a program. I do not use the Alt key at all in may sway config. I tried in xev to listen for the keycode, but only for Alt-p it does not show up. It is not a sway bindsym it is an emacs keybinding or a shortcut in a program. I do not use the Alt key at all in may sway config. I tried in xev to listen for the keycode, but only for Alt-p it does not show up. sway_working_log.txt\nsway_not_working_log.txt\n. sway_working_log.txt\nsway_not_working_log.txt\n. I tried a little more and if I put e.g.\nbindysm Mod1+p exec notify-send \"alt-p\"\ninto my sway config, it works well. Then, I tried different small test programs to find it out. A simple ncurses python skript did work, whereas a small Qt application (see gist) did not react to alt-p but to alt-o and ctrl-p\nI do not know if this helps anything....\n. I tried a little more and if I put e.g.\nbindysm Mod1+p exec notify-send \"alt-p\"\ninto my sway config, it works well. Then, I tried different small test programs to find it out. A simple ncurses python skript did work, whereas a small Qt application (see gist) did not react to alt-p but to alt-o and ctrl-p\nI do not know if this helps anything....\n. ",
    "cactorium": "Same problem in Weston at least. I guess I'll go poke around in Chromium's notification code to see if I can force some debugging output. Whoops, that fixed it sorry!. ",
    "kb100": "New pull request taking your suggested approach https://github.com/SirCmpwn/sway/pull/867\n. ",
    "kiljacken": "I should probably add that the issue also occurs with the default config included with sway.\nEDIT: Those buttons are to close..\n. @Reventl0v This happens in several cases, straight from a tty, X as main wm, and as a window inside a X wm.\n. Upon reinstalling my laptop I can no longer reproduce this issue. Must've been a quirk with my setup.\n. xrdb must be run after sway is started as XWayland is started by sway. I (used to, not currently using sway) do it with an exec in my sway config.. ",
    "Reventl0v": "When this happen, is X running at the same time or not ?\n. Hi. I have no specific mpv configuration (no user conf). I can reproduce when using live video from dailymotion. What could I do to give you more information ?\n. ",
    "Kunagi7": "Right now sway supports basic input method switching via xkbconfig, I use this on my script to start sway:\n```\nKeyboard setup:\nexport XKB_DEFAULT_LAYOUT=es,ru\nexport XKB_DEFAULT_VARIANT=deadtilde,phonetic\nexport XKB_DEFAULT_MODEL=pc101\nexport XKB_DEFAULT_OPTIONS=grp:win_space_toggle\nsway\n```\nFirst line sets the layouts, the second one the layout types, third one the keyboard type and fourth the toggle key.\nTo obtain the keyboard layouts, variants... I used this command:\nman xkeyboard-config\nI've been trying to add the japanese keyboard but without ibus anthy it's quite useless...\nI hope they add ibus support into sway.\n. I found an ibus-toggle script on an archlinux forum which pretty match kills or starts the ibus-daemon (I have IBus 1.5.11).\nAlso added the different environment variables into my sway launch script.\nExecuting ibus engine :\n(process:21078): IBUS-WARNING **: ibus_bus_call_sync: org.freedesktop.DBus.Properties.Get: GDBus.Error:org.freedesktop.DBus.Error.Failed: No global engine.\nNo engine is set.\nLeaves me into that...\nBut after poking a little, if I do:\nibus engine anthy\n\u3059\u3054\u3044\u3044\uff01\u65e5\u672c\u8a9e\uff01\nSo pretty much, I can't switch between methods unless I use the terminal.\nSince I already have russian in xkb I can now make a shortcut to switch between xkb and ibus anthy :+1: .\n. A similar thing happens when I use stalonetray:\nstalonetray --window-type utility -bg \"#073642\" --geometry 4x1+60+1 -i 18\nBecause I need a system tray on sway since programs like telegram desktop, vlc or aimp [wine] use it.\nWhen I lock the screen the tray usually appears on top of swaylock and things like the number of messages from telegram can be seen on real time. Thankfully, it doesn't break unlocking.. Now it works again, thanks for the fast response :+1: . Yesterday, I tried this implementation after it was merged to master.\nSince I have an Intel HD 4000 I can't play fancy games to test this but:\nI was able to play Euro Truck Simulator 2 (from Steam) without any camera movement glitches.\nAlso tried Minecraft and it worked almost perfect (camera OK, the player's inventory shows the mouse cursor as expected but chest inventories don't show the mouse cursor).\nWith this I can fully switch to sway. \nGreat work!\nP.S: I had an issue with scdoc but I fixed it by updating to 1.8.0.. @Laaas When I open my inventory (E key) the cursor unhide works as expected.\nBut if I open a chest the cursor stays hidden (but I can still move stuff inside the chest, blindly).\nIf I have time I'll try to play Minecraft again and try to recreate the issue.\nUpdate:\nI tried again and yup, the same behavior happens (player inventory has visible cursor but chests don't have it).. @capelito I had this issue too! I solved it by compiling scdoc from git and checking out to the tag 1.8.0. \nI tried to compile scdoc directly from master (1.8.1) and it threw the same error.. ",
    "nerdDan": "@SirCmpwn I can not open your script. > I use a script and an output line like this:\n\noutput * bg `wallpaper` fill\nbroken link\n. \n",
    "alkino": "This feature has been refused in i3.\n. I reproduce it with a minimal case...\nType \"%n\" with double quote in a x terminal => sway crash.\n. We need more info about this.\nDoes it work with swaymsg? What are your bindings to change workspace. Give us some hints with \"xev\" and \"libinput-debug-events\".\nRegards\n. I can reproduce something similar.\nFocus a floating window. Open a terminal when this window is focused => crash\n. Can you try with my patch?\n. Yes.\n. Ok so. I will explain you how make performance measurement.\nClean all your builds.\nEnable performance:\nshell\ncmake -DCMAKE_C_FLAGS=-pg -DCMAKE_EXE_LINKER_FLAGS=-pg -DCMAKE_SHARED_LINKER_FLAGS=-pg ..\nmake\nRun your executable, a gmon.out should appear.\nNow run:\ngprof ./bin/sway gmon.out\nand send me this report.\n. As you can see. Nothing take time in sway \\o/\nDo you run your movie in your sway? If yes, maybe you need to run it longer.\n. As you can see, the function which takes most of the time is _swayc_by_handle_helper. This function has been remove by my patch. So can you take a new measurement with my patch?\n. Hm. My patch reduce use of CPU of sway. But it seems that the time is not lost in sway but in a sway's library. I'm doing more verbose perf test with \"perf\" in linux-tools, and it gives me that \"__mmsse3_memcpy\" consume a lot of time. Keep you in touch later.\n. So it's easy. There is a lot of call of wlc_set_view_render_pre_cb from wlc due to a lot of call of render_view. Each time we redraw all borders (but the windows didn't move). And so... sway is lagging.\nMaybe we should render_view_borders only when we move them.\nPro: redraw only when useful so less CPU consumption\nCon: more code and more tricky.\n@Cloudef @SirCmpwn: what do you think about it.\n. As you can see: render_view_border is call 639,081 times for you.\n. I got 60 FPS with glxgears.\n. Thanks. 710 FPS. I will start an implementation of \"redraw_borders\" only when needed.\n. 1000FPS vs 500FPS...\n. Partially fixed by #948 \nIf the mouse goes on the title bar the window lost focus.\n. In fact, they do it through \"startup notification\". When the view is created, they got the startup_id and look the workspace when it was asked and move the view in the right ws.. Updated. Thanks for review.. I don't think so.\nIf the user doesn't click on any title_bar process should continue.\n. ",
    "prosoitos": "My apologies for using this thread for an issue unrelated to sway, but I was wondering whether you found a solution to your problem @acorreya.\nI am having the exact same problem on Arch Linux with totally different setup (not using i3, not using Wayland and I realize that this is an old thread). But I am at a loss to find solutions, so any clue would be very helpful. Thank you.. ",
    "kobezda": "Yes, it reverts a line from 81eb9ea12c322b8b966779ec2e170820e06c5eb7\n. @acrisci Steps to reproduce:\n1. Install sway from git on a gentoo hardened installation\n2. run sway\n3. Without opening any windows, change workspace\nI'm not sure how much more detailed I can get, it happens every time on my system. \nSystem details are in the issue, here's full emerge --info output: \nemerge_info.txt\n. I haven't heard of anyone else having this problem yet. I'm suspecting it's because of some hardening feature in my toolchain... See https://wiki.gentoo.org/wiki/Hardened/Toolchain - most look like they can be enabled on Fedora via compile-time gcc flags.\n. Can anyone try to reproduce with -fPIE -fstack-protector? Here's a patch for CMakeLists.txt: \ncflags-hardened.patch.txt\n. Any progress on this, @acrisci?\n. Minimal steps to reproduce: \n1. Have two empty workspaces, let's call them w1 and w2. \n2. Switch to w1. \n3. Press your \"move container to w2\" keybinding\n4. Switch to w2\n5. Open something, for example a terminal emulator. It only opens on half the screen. \n6. When switching to tabbed layout, a title bar of the bogus container appears.\nswaymsg -t get_tree output: sway-gettree.txt\n. ",
    "ilyaluk": "I've debugged this issue. That's IPC problem. When user scrolls or clicks in swaybar, ipc_send_workspace_command is being called, which calls ipc_single_command, which waits for a reply and blocks swaybar thread until response from socket. But the response to this command not being sent by IPC server until all subscriptions processed. swaybar opens second socket for event processing and subscribes to workspace updates.\nLooks like when user scrolling too fast, buffer of event socket fills, which causes deadlock (sway cannot write to event socket because buffer is full, therefore cannot send response, and swaybar infinitely waits for this response).\nI'm not sure what is the best architectural solution.. I've debugged this issue. That's IPC problem. When user scrolls or clicks in swaybar, ipc_send_workspace_command is being called, which calls ipc_single_command, which waits for a reply and blocks swaybar thread until response from socket. But the response to this command not being sent by IPC server until all subscriptions processed. swaybar opens second socket for event processing and subscribes to workspace updates.\nLooks like when user scrolling too fast, buffer of event socket fills, which causes deadlock (sway cannot write to event socket because buffer is full, therefore cannot send response, and swaybar infinitely waits for this response).\nI'm not sure what is the best architectural solution.. Looks like after making socket non-blocking scrolling works fine without throttling on swaybar side. But with two sockets it still hangs.. Looks like after making socket non-blocking scrolling works fine without throttling on swaybar side. But with two sockets it still hangs.. Well, most changes are still needed (it hangs with event socket), but I can rollback throttling.. Well, most changes are still needed (it hangs with event socket), but I can rollback throttling.. Okay, I'll try to fix it with two sockets and without _no_response, but I'm not sure if it will work.. Okay, I'll try to fix it with two sockets and without _no_response, but I'm not sure if it will work.. I've played a bit with nonblocking sockets on sway side. Data loss could lead to client crashes, for example if ipc response lost. Probably it will be okay with throttling on client side, but nonblocking I/O may cause other unexpected bugs with current implementation.\nGenerally, the problem is that if client subscribed to some events and not reading them (e.g. swaybar not reading from event socket while processing scroll events), socket buffer fills and then on next write to that socket sway blocks.\nExample\nOpen at least two workspaces and run this script.. I've played a bit with nonblocking sockets on sway side. Data loss could lead to client crashes, for example if ipc response lost. Probably it will be okay with throttling on client side, but nonblocking I/O may cause other unexpected bugs with current implementation.\nGenerally, the problem is that if client subscribed to some events and not reading them (e.g. swaybar not reading from event socket while processing scroll events), socket buffer fills and then on next write to that socket sway blocks.\nExample\nOpen at least two workspaces and run this script.. Ah, and non-blocking patch is pretty simple. Link. Uh huh. I've never worked with async IO before, though.. Yeah, I'll figure it out.\nNo, I'll make another one.. Response is being read by handle_ipc_event.. Probably request rate should be limited on sway side too.. Yep, this solves deadlock problems. In i3 it's implemented like this too.. In i3bar there is one socket and requests made without reading response. Then, one handler handles events and responses.. Okay, I'll try.. I'm not sure how to throttle on sway side. Since all requests processed synchronous, we cannot limit request count (without counting requests in last n seconds), but we could make socket non-blocking, which will help with locks, but on high request rates there may be unexpected problems with data loss.. If client managed to fill its socket buffer, it might happen again. But we can shrink buffer in this case.. ",
    "serussell": "Hi @qlyoung,\nI'm finding it nigh-on impossible to install Sway on Ubuntu; I can't get WLC to install.  There are no packages for it, and the requirements information is skeletal at best.  I did my best dredging up the various dependencies, and am now stuck at a bunch of undefined references during linking libwlc, and Google fails to find any references to most of the missing symbols.\nSo: any pointers on how you got as far as getting Sway to actually install?  This is beyond bleeding edge, and I understand that. It's built on a foundation of bleeding edges, from Wayland on up.  Any pointers to how you got past the worst stumbling blocks you encountered would be a service.\nP.S.  This question has nothing to do with this ticket, but since Github removed any ability to direct message a user, this is about the only way to get a message to somebody.  Sorry about that.. ",
    "qlyoung": "@serussell I can confirm that following the wiki page for Debian based systems linked by @4e554c4c , starting from an Ubuntu Minimal install, is how I accomplished this.. Just tried it on the same version of Sway that I opened this issue with and yep, png's work just fine. Thanks a bunch!\nI'll close out this issue since you've got a PR open for it.. This would have been nice to see in the docs for those of us who aren't familiar with sway's compile time options. I would expect jpg's to be supported.\nI guess an error message is a decent breadcrumb though...\nEither way, thanks for the improvement.. ",
    "lheckemann": "@qlyoung try converting the image to png and using that \u2014 that fixed it for me. It should be documented that png is assumed unless using gdk_pixbuf.. I've removed the doc change, but would still like to know how reoccurrences of #895 will be avoided if the requirement for the image to be a PNG is not documented.. Added reference to PNG in the error message.. Done.. How about just removing the variable entirely? (see last commit). What's wrong with it? What should I change?. Then how are future occurrences of #895 meant to be avoided? Trying to load a JPEG with the PNG loader gives the rather unhelpful \"out of memory\" error message.. ",
    "ignaciocaamanio": "Yes, latam is listed in xkb's keyboard layouts, and works in all  WM's that I use. Some help to make it work? Thanks.\n. Sorry, I was making something wrong when setting XKB_DEFAULT_LAYOUT, now it works. Thanks for yout help. \n. ",
    "Unip0rn": "thanks for the replies, I will request at wlc then.\n. ",
    "ejiek": "Afaik kbdd uses Extended Window Manager Hints (EWMH) and wlc does have an xcb-ewmh as a dependancy. Are EWMH supported in Sway?\n\nFor now kbdd is not usable in Sway (even with X apps). Since libweston is a reference implementation for Wayland what is the reason to write custom solution?\nofftopic:\nMy team at university is about to write our own wayland based WM for mobile device (nothing fancy just one term project) and we have the same questions.\nWe've planed to use weston as a base due to its raspberry support but since vc4 it doesn't really mater.\n. ",
    "motherload": "Sorry, this is a duplicate of #856\n. sway version 0.10-rc1-34-g8d277bc (2016-10-10, branch \"makepkg\"). I second this.. ",
    "bonly": "nice\n. ",
    "kleinreact": "I just tested it again and I'm still able to reproduce the error. My current build is from a chechout from 2016-11-17, main branch. \"wlc\", as a dependency, has been checked out and build at the same date. Everything else are system packages.\nTo reproduce the error I am pressing with all ten fingers at high speed randomly on the keyboard, but I just use the letter keys, so no special keys, especially you have to avoid pressing enter. \nThe error is reproducable with the internal keywboards as well as with an external bluetooth keyboard.. I debugged the problem a little bit and found out the following:\nThe error always appears while executing cairo_paint(window->cairo) (swaylock, line 220), which is reached via the following call trace:\nnotify_key(...)\n -> render(...)               // line 210\n     -> render_color(...)     // line 577\n         -> cairo_paint(...)  // line 220\nCommenting out line 577 does not solve the problem, but swaylock now crashes with a much more verbose error message:\nwl_buffer@17: error 2: error accessing SHM buffer\n11/29/16 11:09:21 - [main.c:29] failed to run wl_display_dispatch\nCommenting out lines 210-213 solves the problem for me. However I do not have the fancy animations any more. Note that the problem cannot fixed by just using swaylock -u instead.\nSo it looks to me like something wayland or cairo related. For comparison, here is my current configuration:\nswaylock:          0.10-rc1-68-gcd5694f (2016-11-29, branch \"HEAD\")\nwayland:           1.12.0\nwayland-protocols: 1.7\ncario:             1.14.6\nJust to note: personally, I would also be fine with a minmal version of swaylock that does not have any additional rendering at all, but just restricts to the functionality and maybe hides the currently opened windows. However, I don't know how hard it is to archive this with the current setup.\n. @Lourens-Rich I check out the most recent changes regularly anyway. So I will keep you up to date as soon as something changes.. I just tested the most recent revision, but the error is still there. \nHowever, I also found out that the error only appears, if I am in a multi-screen setup. On a single screen everthing works fine. Maybe that helps for reproduction.. I just found out another condition, which is neccessary for reproduction. The error only appears, if I am in a multi-screen setup, where at least one monitor is scaled and another is not. As soon as I remove the scaling, the error goes away. I tested it under sway version 0.12-rc1-18-gd4aa604.. ",
    "Lourens-Rich": "@kleinreact Will you retest this problem after new commit?. Which version of Xorg do you have? \nMy last log item before crash:\n(gtk3-demo-application:11983): Gdk-WARNING **: Error 71 (Protocol error) dispatching to Wayland display.. @Laaas Xorg 1.19 or 1.18?. @Laaas, please give for us your old configuration file.. Or maybe you help me, what i must change for myself?. https://github.com/Cloudef/wlc/issues/210 it is fixed.. I added to AUR upstream version of Redshift with using yourself changes.\nhttps://aur.archlinux.org/packages/redshift-sway-git/\nHow to launch: redshift -m wayland. ",
    "heret1c": "Hi\nSwaywm version 0.9-1\nWayland 1.12.0-1\nKey remapping works great. But they appeared to me other problems.\nWhen gaming, the system is still active cursor. DOSBox and native games for Linux. Perhaps the problem is on the side of Weston config file?\nYours sincerely\n. ",
    "adamjedlicka": "Same problem is happening to me. I'm to using Czech keyboard layout and default config. This is output of libinput-debug-events when trying to switch workspaces: http://pastebin.com/RCy17FKt\nWhen I press '1' key (that one over 'Q' button, not on numpad) on Czech layout I get '+' sign. '2' is '\u011b', '3' is '\u0161' and so on (special characters). When I try to rebind workspaces to these characters it does nothing : bindsym $mod+\u011b workspace 2\n. ",
    "benjiprod": "For Czech or other keyboard, you have to remap your keyboard with 'xmodmap' for displaying key code.\nTry this for your keyboard : \n```\nbindsym $mod+plus workspace 1\nbindsym $mod+ecaron workspace 2\nbindsym $mod+scaron workspace 3\nbindsym $mod+ccaron workspace 4\nbindsym $mod+rcaron workspace 5\nbindsym $mod+zcaron workspace 6\nbindsym $mod+yacute workspace 7\nbindsym $mod+aacute workspace 8\nbindsym $mod+iacute workspace 9\nbindsym $mod+eacute workspace 0\nbindsym $mod+Shift+plus move container to workspace 1\nbindsym $mod+Shift+ecaron move container to workspace 2\nbindsym $mod+Shift+scaron move container to workspace 3\nbindsym $mod+Shift+ccaron move container to workspace 4\nbindsym $mod+Shift+rcaron move container to workspace 5\nbindsym $mod+Shift+zcaron move container to workspace 6\nbindsym $mod+Shift+yacute move container to workspace 7\nbindsym $mod+Shift+aacute move container to workspace 8\nbindsym $mod+Shift+iacute move container to workspace 9\nbindsym $mod+Shift+eacute move container to workspace 0\n```\n. For Czech or other keyboard, you have to remap your keyboard with 'xmodmap' for displaying key code.\nTry this for your keyboard : \n```\nbindsym $mod+plus workspace 1\nbindsym $mod+ecaron workspace 2\nbindsym $mod+scaron workspace 3\nbindsym $mod+ccaron workspace 4\nbindsym $mod+rcaron workspace 5\nbindsym $mod+zcaron workspace 6\nbindsym $mod+yacute workspace 7\nbindsym $mod+aacute workspace 8\nbindsym $mod+iacute workspace 9\nbindsym $mod+eacute workspace 0\nbindsym $mod+Shift+plus move container to workspace 1\nbindsym $mod+Shift+ecaron move container to workspace 2\nbindsym $mod+Shift+scaron move container to workspace 3\nbindsym $mod+Shift+ccaron move container to workspace 4\nbindsym $mod+Shift+rcaron move container to workspace 5\nbindsym $mod+Shift+zcaron move container to workspace 6\nbindsym $mod+Shift+yacute move container to workspace 7\nbindsym $mod+Shift+aacute move container to workspace 8\nbindsym $mod+Shift+iacute move container to workspace 9\nbindsym $mod+Shift+eacute move container to workspace 0\n```\n. I am pretty sure you can close this issue. . I am pretty sure you can close this issue. . I can reproduce your issue.. I can reproduce your issue.. https://github.com/SirCmpwn/sway/issues/1228 was closed because of duplicate issue. . https://github.com/SirCmpwn/sway/issues/1228 was closed because of duplicate issue. . I think you had to wait this features : #541 . I think you had to wait this features : #541 . If you have a popup on your currently screen, you can't switch workspaces. I don't know if there is a case about that bug.. If you have a popup on your currently screen, you can't switch workspaces. I don't know if there is a case about that bug.. ",
    "neon64": "@embik, I imagine if swaymsg get-clipboard was ever implemented, it would be disabled by default by sway-security, but you could override that by editing /etc/sway/security.d/. Although I guess that depends on sway-security being 100% secure which afaik I don't think it is at the moment.. If you want something with the same interface as xbacklight, check out acpilight. It's been working quite well for me so far.\n. I'm afraid I've already tried a multitude of options like that. Could it be to do with the fact that Sway has a software cursor thus its slightly slower?\n. @rubdos have you made any headway with #926? I was thinking of trying to implement it as well as it should be pretty easy. Also @SirCmpwn, just to save some digging around, is the current clipboard state managed by wlc or sway itself?. ",
    "nyorain": "So i will probably try to implement it the next days (will require to expose more of wlc's internals). A few questions:\n - should it be get_clipboard and set_clipboard or rather clipboard set and clipboard get?\n - is it enough to handle text support (i.e. text/plain targets, simply fail if the cilpboard cannot provide this) or is anything else required? (it might be possible to dump other clipboard targets but it is probably not worth it IMO, would require a rather huge wlc interface addition)\n- (sorry, still not too familiar with the codebase) where is security handled? is there an example of an command dealing with security (or isn't it handled by the command implementation directly?. Thanks for the pointers, am on it.. Yeah, I am currently working on x11/wayland clipboard sync from the list.\nThis merged patch makes it possible to implement #926, I think. Feel free to implement it, you will need the newly added wlc_set_selection function (see the wlc example), otherwise I will look into it once clipboard sync is finished (am not familiar with the sway codebase yet though).. This might be related to the problem fixed with Cloudef/wlc#272. I never had problems with it so would be nice if someone could try it out with wlc from master, there were some general changes to the clipboard in the last commits. What you describe sounds somewhat like the issue i had there (could still be something totally unrelated though, it's a wlc issue in the end probably).. I hope the new commit fixes all notes.\nSupport for receiving multiple clipboard targets at once can be easily enabled later on. The wildcard matching currently only supports * and is implemented rather simple, so it might struggle with more complex use cases (it works for e.g. * or text/* etc).\nTargets imported from x11 like STRING or UTF8_STRING will currently be encoded in base64 but they are no real wayland targets so should not matter in the end (everything that does not begin with \"text/\" is base64 encoded).. Had not had time the last few days to reimplement the data reading and add a timeout callback, will hopefully get this done at some time during the next days.. Does this fix the issues? Currently waiting 1 second for the clipboard owner to send the data.\nWhat to return to the ipc client when a requested format cannot be received? Currently, an array with all requested formats is returned (although it is limited to one format atm), how to signal an error? the current implementation just leaves the failed format out of the array but this may not be expected behavior (just an empty array on failure atm).. Yeah, i will not make this any more complicated. I already think features like the base64 (basically all non-text data) encoding will rarely be used and they have already make this whole implementation huge and rather complicated (it might make sense to move it to a separate file by now).. But what are usecases to receive the base64 encoded; json ecoded data using an ipc program for sway? I mean it is implemented now but don't make this more complicated please.. For now i will probably not have time to see to it, it does not sound that simple to implement.. did it because str is a const pointer and wlc_set_selection/free require a non-const pointer. ugh... actually not sure it writes to the fd of a client, is there a null delimiter needed/expected?\n. it works without at least for all common applications... the clients can determine the length from the number of bytes read. oh, good point... . Oversaw this, is it ok now? Still getting used to this codestyle. at the moment this does only support text. Not sure in which way other targets should be chosen, if e.g. image/png image/jpg and other non-text targets are supported which one should be used?will fix the style issues soon.. ok will look into it, returning the list of supported types as default sounds good (querying all of them does probably not make much sense imagine e.g. a large image offered in 5 different formats...). ok. yes, wildcards sound possible and are a good idea to not query for \"text/plain\" and \"text/plain;charset=utf-8\" every time.. as long as there is any data to read from the fd the wayland event loop (using poll) will probably call this function in a loop so that this would only introduce additional complexity without making it more secure i believe. Shouldn't the 8mb data limit be enough? the data is only sent once so such an attack could only happen from the ipc side (request loop) in which case a malicious client got access to the clipboard ipc feature which should not happen in the first place.... a timeout seems reasonable, sometimes clients just don't answer a request (or an error gets lost somewhere in the x11 <-> wayland conversion, will work on it but it might take a while).. By the way i don't think it is a good idea to add \";base64\" to the mimetype after some considerations. The client e.g. requests the data with \"image/png\" mimetype and the answer will only contain the \"image/png;base64\" mimetype. The current implementation only adds \";base64\" if the data is successfully retrieved - could be extended with additional checks - but i think we shouldn't do it at all.. yeah but then we would have convert them back when the client requests the data with this mimetype. And how to know if the ;base64 was added by sway when sending the supported types or was already present? We would have to guess or try 2 attempts... Probably not worth it. No i meant only the mimetype (but yes using binary data would be nice at some point). When we receive a data request for \"image/jpg;base64\" we would have to make sure somehow that the base64 was manually added by ourselves and not already present in the mime type offered by the clipboard owner.. yes that could be implemented that way (if it is really important enough). It would make the request and answer mimetypes at least match each other again, which was my primary point.. Well it would be possible to use a mechanism comparable to the one used in wayland data requests, i.e. passing an fd over the socket. But probably not worth it.. ",
    "clarfon": "I don't think that this was actually resolved by Cloudef/wlc#273, although GitHub automatically closed this.. I agree that it makes sense to allow arbitrary ffmpeg opts, but it would also be nice to have a simple default that includes audio so that someone can include audio in the captured video with minimal effort.. @tidux on the other hand, adding it also breaks a lot of Qt applications for me. it's better to have Qt default to wayland than require the variables.. Sway really shouldn't be piping out to shell for this; if no one takes it later this week I'll work on a better fix.. Sounds fair! I think that potentially offering the functionality to do the click-and-crop in the command-line version would be useful though. Should I open another issue for that?. Sounds good!. It's been a very long time but I just fixed the build failure.. I think a better request would just be trackpad gestures mapping to keybindings. Which could be possible, but I'm not sure how that would work from the libinput side.. Is there any particular problems with removing these lines for now, or is this something that Valve should fix upstream?. Considering how the clipboards are synchronised on wlroots, why can't you just use xclip? Perhaps a swayclip tool might be nice to have, but once 1.0 comes out, that will work by itself.. So, a PR that changes the behaviour to default to a white screen like when an image is not supplied, I'm assuming would not be accepted?. Personally I think that any invocation of swaylock that doesn't explicitly have --help or something similar in the arguments should still lock the screen. I would disagree with using a swaygrabbed image to lock though, as that's a security nightmare, but locking despite malformed input seems reasonable.\nAlthough also, I can't really do anything if the head dev disagrees. This isn't worth forking, although I will probably submit a PR at least documenting that swaylock will fail if the image doesn't exist, as it is the expected behaviour.. I'm still running into this problem on master. It would be nice if there were some kind of manual override, e.g. a keyboard shortcut that could toggle off swayidle manually. Right now, I just kill the swayidle process, which isn't ideal because then I have to manually restart it later.. Can't you just run swaylock and turn on DPMS with the same keyboard combination?. Sorry I haven't got to this yet. I'll try and remember to do that later today!. So I just tried again today and it seems to be working now. I'm going to just close this issue unless I encounter the problem again.. A swaynag notification honestly seems like a much better idea than what was merged. Added more comments in the original PR.. This check aborts even for users who run optimus and aren't actually running an nvidia display. Which is a bug, considering how sway doesn't even touch my nvidia GPU.\nI get that you hate nvidia (and I do too) but this really should have been reviewed better.. I currently don't have the time to work on a patch but my main reasoning here was to point out that I think that this patch hurts more than it helps and should be reverted, and the original issue should be reopened.. I don't see why requiring a flag in this case solves anything, and its only purpose at the moment is to be rude to me as a user because I don't have the resources to go out of my way and buy a new GPU. Plus, as stated, sway will already crash on an nvidia GPU when rendering directly, and the warning that showed before was sufficient to state that the nvidia GPU was the reason.\nLike, responding to nvidia's blatant disrespect for its users with blatant disrespect for users of nvidia GPUs is... not okay?. If there were a patch that were accepted too quickly that broke sway with absolutely no other benefits then I can imagine you'd revert it your damn self. But fine, I'll send in a revert PR later once I get back home and turn on my PC.. Nvidia proprietary drivers aren't supported on sway because you won't support EGLstreams. And, quite frankly, I 100% agree that you shouldn't. It's not worth your damned time and I've read every argument you've made on it and I agree with you.\nHowever, primus and bumblebee is an alternative workflow which encapsulates any access to an nvidia GPU through XWayland. As far as you're concerned, it's just another XWayland app. For someone like me, it's the best thing that I can do while being stuck with an nvidia GPU.\nI would use nouveau but because of poor support for my card it's literally worse than just using my integrated Intel GPU, which has open source drivers. I try to use that whenever possible but sometimes I have to use the other giant lump of silicon in my box which has no open source support from the manufacturer.\nI am not asking you to support EGLstreams. I'm not asking you to like Nvidia. Hell, I'm with you and I agree that we should not put up with any of their bullshit because they have gotten away with it for far too long.\nBut, adding patches like this which don't gain anything over existing functionality and seem to serve absolutely no purpose other than to piss off people who have an nvidia GPU, is really counterproductive.\nI'm willing to put in the effort to update the messages which tell Nvidia users that their hardware isn't supported with justifications and alternatives for the meantime, plus the existing suggestions to buy a different GPU in their next computers. And I'll do that because I don't expect you to.\nBut the fact that you'd rather put the effort in to tell me to revert the patch my damn self even though you have to click the button anyway is really frustrating. You're just being intentionally rude here.. > Yes, I could trivially merge the patch. But that's not the point. We have a policy here of making users step up and put in the work for the things they care about. This leads to more contributions and is a massive bonus to the health of sway as a whole.\nI agree with this. That's why I appreciate the fact that projects like Rust tend to prefer seasoned contributors mentoring new contributors for new features, because even though it takes more effort in the short term, it helps out in the long term.\nIf you had, say, responded with \"I am on a time crunch for beta and would like some opt-in flag to exist, and am not willing to put in the effort to change this myself. If you can devote the time to submit a better patch before then I can revert this one\" then that would have communicated that very clearly.\nRight now, your responses have been nothing but hostile, and it seriously pushes me away from this project as a contributor. In fact, your general attitude in situations like this is a very large reason why I haven't thought of contributing more: I already have a limited amount of energy on days after work, and I feel like trying to contribute to sway would be a mess of constant friction rather than the supposed aid you offer.\nI agree that preferring that others step up is better to help the project. But god, at least pretend that you'd like others to step up rather than constantly pushing them away.\nFor example, this flag itself is --my-next-gpu-wont-be-nvidia. That itself is basically making the users feel like their original choice of GPU was 100% their fault, and that they themselves deserve to not be supported. What about that makes it seem like you'd even give a shit about patches that make the experience better for nvidia users, even those that don't relate at all to EGLstreams?. I appreciate your apology. I think that your mentality is still rather rude but I won't blame you for hating nvidia, and I've already stated here that I agree with you.\nI'll see what I can do about submitting a patch tonight or tomorrow.. ",
    "Limero": "How can the clipboard be set on Sway 1.0? Above command does not work.. I can reproduce this with Firefox on xorg. It does not occur when running Firefox with Wayland nor on Chromium.. Is there more to be done or can this be closed? Cursor updates correctly in slurp after recent changes, so I'm happy :smile: . ",
    "bugaevc": "https://github.com/bugaevc/wl-clipboard. Yes \u2014 and the plan is, when new protocol materializes, make wl-clipboard automatically use it instead of the transparent surface hack when running under wlroots-based compositors.. ",
    "khughitt": "@bugaevc @emersion Do either of you happen to know if there is anyway the window might be configured to spawn in the background? For example, I'm not sure if for_window rules take effect before the window is drawn, or after, but if they are applied before, and the transparent window is given a known instance id or class, one might be able to add something like for_window [app_id=\"wl-clipboard\"] move scratchpad to their config to avoid triggering window tiling.\nRight now the flickering is quite bad with Neovim / Sway - every time text is yanked, the window temporarily resizes / flickers.\n. @YaLTeR That did the trick! Thanks for the suggestion! . Thanks for implementing this! Do you know where I can find more information on how to interact with the primary selection in Sway? I checked the man pages, but couldn't find any information on it..\nI can now output primary selection with wlpaste -p, but I haven't found a way yet to get it into something like Chromium.. Middle mouse is not working for me with latest git commit of sway and wl-roots. Any ideas what could be up?. Nope - middle mouse button clicks do not appear to register there.. Ha! Turns out you are right -- The button does still work, but the middle mouse button is much less sensitive than I remember. Pushing it a bit more forcefully did the trick.\nThanks for the suggestion about libinput debug-events! I didn't know that command existed.. Ah, I didn't realize app_id could also be used for matches. That did the trick! Thanks for the quick response.\nIn case it helps anyone else, here is an example of setting up two separate scratchpad, each with their own shortcuts, using app_id:\n```\nconsole terminal (alt + enter)\nexec termite --name=terminal_scratchpad\nR terminal (alt + space)\nexec termite --name=r_scratchpad -e R\nfor_window [app_id=\"terminal_scratchpad\"] move scratchpad, resize set 1440 810\nfor_window [app_id=\"r_scratchpad\"] move scratchpad, resize set 1440 810\nbindsym Mod1+Return [app_id=\"terminal_scratchpad\"] scratchpad show\nbindsym Mod1+space [app_id=\"r_scratchpad\"] scratchpad show\n```. ",
    "wasamasa": "I would also accept an alternative solution for recognizing a specific Termite window as scratchpad.\n. Thanks.  If I change the script and config as suggested, I get an additional error:\nCommand 'move' failed: Expected 'move <left|up|right|down>' or 'move <container|window> to workspace <name>' or 'move <container|window> to output <name|direction>' or 'move position mouse'\n. Truncated log:\n12/27/16 00:23:11 - [commands.c:482] handling config command 'exec --no-startup-id scratchpad'\n12/27/16 00:23:11 - [commands.c:328] find_handler(exec) 0\n12/27/16 00:23:11 - [config.c:656] Defferring command `exec --no-startup-id scratchpad'\n...\n12/27/16 00:23:11 - [commands.c:482] handling config command 'for_window [title=\"scratchpad_termite\"] move to scratchpad'\n12/27/16 00:23:11 - [commands.c:328] find_handler(for_window) 0\n12/27/16 00:23:11 - [criteria.c:101] Parsing criteria: '[title=\"scratchpad_termite\"]'\n12/27/16 00:23:11 - [criteria.c:231] title -> /scratchpad_termite/\n12/27/16 00:23:11 - [for_window.c:36] for_window: '[title=\"scratchpad_termite\"]' -> 'move to scratchpad' added\n12/27/16 00:23:11 - [commands.c:482] handling config command 'bindsym $mod+grave [title=\"scratchpad_termite\"] scratchpad show'\n12/27/16 00:23:11 - [commands.c:328] find_handler(bindsym) 0\n12/27/16 00:23:11 - [bind.c:85] bindsym - Bound Mod4+grave to command [title=\"scratchpad_termite\"] scratchpad show\n...\n12/27/16 00:23:12 - [exec_always.c:74] Child process created with pid 12416 for workspace 1\n12/27/16 00:23:12 - [commands.c:414] Handling command 'exec --no-startup-id scratchpad'\n12/27/16 00:23:12 - [commands.c:328] find_handler(exec) 0\n12/27/16 00:23:12 - [exec_always.c:18] exec switch '--no-startup-id' not supported, ignored.\n12/27/16 00:23:12 - [exec_always.c:33] Executing scratchpad\n12/27/16 00:23:12 - [exec_always.c:74] Child process created with pid 12418 for workspace 1\n...\n12/27/16 00:23:12 - [exec_always.c:74] Child process created with pid 12416 for workspace 1\n12/27/16 00:23:12 - [commands.c:414] Handling command 'exec --no-startup-id scratchpad'\n12/27/16 00:23:12 - [commands.c:328] find_handler(exec) 0\n12/27/16 00:23:12 - [exec_always.c:18] exec switch '--no-startup-id' not supported, ignored.\n12/27/16 00:23:12 - [exec_always.c:33] Executing scratchpad\n12/27/16 00:23:12 - [exec_always.c:74] Child process created with pid 12418 for workspace 1\n12/27/16 00:23:12 - [main.c:44] [wlc] xwm: unimplemented 29\n12/27/16 00:23:12 - [workspace.c:329] looking for workspace for pid 12424\n12/27/16 00:23:12 - [workspace.c:344] found pid_workspace for pid 12418, workspace 1\n12/27/16 00:23:12 - [handlers.c:341] handle:3 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:642 h:386) title:scratchpad_termite class:(null) appid:termite\n12/27/16 00:23:12 - [container.c:290] Adding new view 3:scratchpad_termite to container 0x267d050 2\n12/27/16 00:23:12 - [layout.c:62] Adding 0x2babe30 (4, 0.000000x0.000000) to 0x267d050 (2, 1366.000000x751.000000)\n12/27/16 00:23:12 - [container.c:240] creating container 0x2bc5050 around 0x2babe30\n12/27/16 00:23:12 - [layout.c:62] Adding 0x2babe30 (4, 0.000000x0.000000) to 0x2bc5050 (3, 0.000000x0.000000)\n12/27/16 00:23:12 - [ipc-server.c:665] Sending window::new event\n12/27/16 00:23:12 - [debug_log.c:94] Setting focus to 0x2babe30:3 (VIEW 'scratchpad_termite')\n12/27/16 00:23:12 - [ipc-server.c:665] Sending window::focus event\n12/27/16 00:23:12 - [debug_log.c:94] Arranging layout for 0x2bc5050 (CONTAINER '(null)')\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 0.000000x0.000000+0.000000,0.000000\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 0.000000x0.000000+0.000000,0.000000\n12/27/16 00:23:12 - [layout.c:858] Set view to 1 x 1 @ 0, 0\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2babe30)(h:18446744073709551615)Type:cont|layout:Tab  |w:   0|h:   0|x:   0|y:   0|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:   1|h:   1|x:   0|y:   0|g: -1|vis:t|children: 0|name:scratchpad_termi\n12/27/16 00:23:12 - [debug_log.c:94] Arranging layout for 0x267b700 (OUTPUT 'LVDS-1')\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x267b700 LVDS-1 1366.000000x768.000000+0.000000,0.000000\n12/27/16 00:23:12 - [debug_log.c:94] Arranging layout for 0x267d050 (WORKSPACE '1')\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x267d050 1 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:12 - [layout.c:826] -> Found panel for this workspace: 1366x17, position: 0\n12/27/16 00:23:12 - [layout.c:848] Arranging workspace '1' at 0.000000, 17.000000\n12/27/16 00:23:12 - [layout.c:918] Arranging 0x267d050 horizontally\n12/27/16 00:23:12 - [layout.c:922] Calculating arrangement for 0x2bc5050:3 (will scale 1366.000000 by 1.000000)\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 1366.000000x0.000000+0.000000,17.000000\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 1.000000x1.000000+0.000000,17.000000\n12/27/16 00:23:12 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2babe30)(h:18446744073709551615)Type:cont|layout:Tab  |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 0|name:scratchpad_termi\n12/27/16 00:23:12 - [handlers.c:393] for_window '[title=\"scratchpad_termite\"]' matches new view 0x2babe30, cmd: 'move to scratchpad'\n12/27/16 00:23:12 - [commands.c:414] Handling command 'move to scratchpad'\n12/27/16 00:23:12 - [commands.c:328] find_handler(move) 0\n12/27/16 00:23:12 - [handlers.c:396] Command 'move' failed: Expected 'move <left|right|up|down>' or 'move <container|window> to workspace <name>' or 'move <container|window|workspace> to output <name|direction>' or 'move position mouse'\n12/27/16 00:23:12 - [debug_log.c:94] Setting focus to 0x2babe30:3 (VIEW 'scratchpad_termite')\n12/27/16 00:23:12 - [ipc-server.c:665] Sending window::focus event\n12/27/16 00:23:12 - [debug_log.c:94] Arranging layout for 0x2bc5050 (CONTAINER '(null)')\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:12 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:12 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2babe30)(h:18446744073709551615)Type:cont|layout:Tab  |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 0|name:scratchpad_termi\n12/27/16 00:23:12 - [handlers.c:496] geometry request for 3 642x386 @ 0,17\n12/27/16 00:23:12 - [handlers.c:496] geometry request for 3 1366x751 @ 0,17\n12/27/16 00:23:13 - [input.c:52] rewritten name Power_Button\n12/27/16 00:23:13 - [handlers.c:131] Found input device (0:1:Power_Button)\n12/27/16 00:23:13 - [input.c:52] rewritten name Video_Bus\n12/27/16 00:23:13 - [handlers.c:131] Found input device (0:6:Video_Bus)\n12/27/16 00:23:13 - [input.c:52] rewritten name Sleep_Button\n12/27/16 00:23:13 - [handlers.c:131] Found input device (0:3:Sleep_Button)\n12/27/16 00:23:13 - [input.c:52] rewritten name AT_Translated_Set_2_keyboard\n12/27/16 00:23:13 - [handlers.c:131] Found input device (1:1:AT_Translated_Set_2_keyboard)\n12/27/16 00:23:13 - [input.c:52] rewritten name TPPS/2_IBM_TrackPoint\n12/27/16 00:23:13 - [handlers.c:131] Found input device (2:10:TPPS/2_IBM_TrackPoint)\n12/27/16 00:23:13 - [input.c:52] rewritten name ThinkPad_Extra_Buttons\n12/27/16 00:23:13 - [handlers.c:131] Found input device (6058:20564:ThinkPad_Extra_B)\n12/27/16 00:23:13 - [debug_log.c:94] Setting focus to 0x2babe30:3 (VIEW 'scratchpad_termite')\n12/27/16 00:23:13 - [ipc-server.c:665] Sending window::focus event\n12/27/16 00:23:13 - [debug_log.c:94] Arranging layout for 0x2bc5050 (CONTAINER '(null)')\n12/27/16 00:23:13 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:13 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:13 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2babe30)(h:18446744073709551615)Type:cont|layout:Tab  |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:(null)\n|---focus:K  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 0|name:scratchpad_termi\n12/27/16 00:23:14 - [handlers.c:592] Command '[title=\"scratchpad_termite\"] scratchpad show' failed: Can't handle criteria string: Refusing to execute command\n12/27/16 00:23:15 - [handlers.c:592] Command '[title=\"scratchpad_termite\"] scratchpad show' failed: Can't handle criteria string: Refusing to execute command\n12/27/16 00:23:15 - [handlers.c:592] Command '[title=\"scratchpad_termite\"] scratchpad show' failed: Can't handle criteria string: Refusing to execute command\n12/27/16 00:23:15 - [handlers.c:592] Command '[title=\"scratchpad_termite\"] scratchpad show' failed: Can't handle criteria string: Refusing to execute command\n12/27/16 00:23:15 - [handlers.c:592] Command '[title=\"scratchpad_termite\"] scratchpad show' failed: Can't handle criteria string: Refusing to execute command\n12/27/16 00:23:15 - [workspace.c:329] looking for workspace for pid 12425\n12/27/16 00:23:15 - [handlers.c:341] handle:4 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:656 h:576) title:emacs@odonien class:emacs appid:(null)\n12/27/16 00:23:15 - [container.c:290] Adding new view 4:emacs@odonien to container 0x2babe30 4\n12/27/16 00:23:15 - [ipc-server.c:665] Sending window::new event\n12/27/16 00:23:15 - [debug_log.c:94] Setting focus to 0x2bcf700:4 (VIEW 'emacs@odonien')\n12/27/16 00:23:15 - [ipc-server.c:665] Sending window::focus event\n12/27/16 00:23:15 - [debug_log.c:94] Arranging layout for 0x2bc5050 (CONTAINER '(null)')\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2bcf700 emacs@odonien 0.000000x0.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2bcf700)(h:18446744073709551615)Type:cont|layout:Tab  |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 2|name:(null)\n|---focus:X  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:f|children: 0|name:scratchpad_termi\n|---focus:K  |(0x2bcf700)(p:0x2bc5050)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 0|name:emacs@odonien\n12/27/16 00:23:15 - [debug_log.c:94] Arranging layout for 0x267b700 (OUTPUT 'LVDS-1')\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x267b700 LVDS-1 1366.000000x768.000000+0.000000,0.000000\n12/27/16 00:23:15 - [debug_log.c:94] Arranging layout for 0x267d050 (WORKSPACE '1')\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x267d050 1 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:826] -> Found panel for this workspace: 1366x17, position: 0\n12/27/16 00:23:15 - [layout.c:848] Arranging workspace '1' at 0.000000, 17.000000\n12/27/16 00:23:15 - [layout.c:918] Arranging 0x267d050 horizontally\n12/27/16 00:23:15 - [layout.c:922] Calculating arrangement for 0x2bc5050:3 (will scale 1366.000000 by 1.000000)\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2bc5050 (null) 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2babe30 scratchpad_termite 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\n12/27/16 00:23:15 - [layout.c:786] Arranging layout for 0x2bcf700 emacs@odonien 1366.000000x751.000000+0.000000,17.000000\n12/27/16 00:23:15 - [layout.c:858] Set view to 1366 x 751 @ 0, 17\nfocus:R      |(0x63bf20)(p:(nil)   )(f:0x267b700)(h:18446744073709551615)Type:root|layout:-    |w:1366|h: 768|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x267b700)(p:0x63bf20)(f:0x267d050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x267d050)(p:0x267b700)(f:0x2bc5050)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 1|name:1\n|--focus:X   |(0x2bc5050)(p:0x267d050)(f:0x2bcf700)(h:18446744073709551615)Type:cont|layout:Tab  |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 2|name:(null)\n|---focus:X  |(0x2babe30)(p:0x2bc5050)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:f|children: 0|name:scratchpad_termi\n|---focus:K  |(0x2bcf700)(p:0x2bc5050)(f:(nil)   )(h: 4)Type:view|layout:-    |w:1366|h: 751|x:   0|y:  17|g: -1|vis:t|children: 0|name:emacs@odonien\n12/27/16 00:23:15 - [handlers.c:496] geometry request for 4 656x576 @ 0,34\n12/27/16 00:23:15 - [handlers.c:496] geometry request for 4 1366x734 @ 0,34\n12/27/16 00:23:15 - [handlers.c:496] geometry request for 4 1360x720 @ 0,34\n12/27/16 00:23:15 - [handlers.c:496] geometry request for 4 1360x720 @ 0,34\n12/27/16 00:23:15 - [handlers.c:496] geometry request for 4 1366x734 @ 0,34\n12/27/16 00:23:15 - [ipc-server.c:665] Sending window::title event\n12/27/16 00:23:17 - [commands.c:414] Handling command 'exit'\n12/27/16 00:23:17 - [commands.c:328] find_handler(exit) 0\n12/27/16 00:23:17 - [main.c:46] [wlc] Terminating wlc...\n12/27/16 00:23:17 - [main.c:46] [wlc] Terminating compositor...\n12/27/16 00:23:17 - [main.c:46] [wlc] Output (1) terminated...\n12/27/16 00:23:17 - [container.c:439] OUTPUT: Destroying output '1'. https://github.com/wasamasa/dotfiles/blob/master/home/wasa/.config/i3/config\n. ",
    "occivink": "How much do you get under X11 though? Ideally there shouldn't be any difference.\n. ",
    "stozi": "so... I have to change my environment variables everytime I switch between window managers? This wasn't necessary in i3/X11\n. ",
    "exo66": "sorry wrong project.\n. ",
    "pkillnine": "@thejan2009 I worry about accidently closing a window if I'm middle-clicking on web browser tabs to close them.\n@mikkeloscar What is CSD?\n. ",
    "gferon": "Compiled sway and wlc from source, and the issue is gone! Keep up the good work, I'll try to find a way to contribute in the future :)\n. Yup. There you go.. ",
    "mrgrumpyarse": "I believe the issue still partially exists but appears to be in wlc\nhttps://github.com/Cloudef/wlc/issues/200\n. ",
    "craigcabrey": "When I plug in an external monitor, my laptop display goes black and the external monitor shows a new workspace. Unplugging the display does not bring back my laptop's screen. I am forced to hard reset my machine. Is this a wlc issue?\n. ",
    "MrSorcus": "Confirm, i get black screen too...\nhttps://gist.github.com/DebugReport/2448323415a554ac971ba60925e9d9bb\n. Not only GTK apps. Qt apps has this problem too.\n. ",
    "shengis": "I had the same issues, with my workspaces configured like this : \nworkspace 1 output eDP-1\n  workspace 2 output HDMI-A-2\n  workspace 3 output eDP-1\neDP-1 and HDMI-A-2 is what I get from swaymsg -t get_outputs\nOutput eDP-1 'Unknown 0x272D 0x00000000'\n  ...\n  Output HDMI-A-2 'Samsung Electric Company U28E590 HTPJ202323' (focused)\n  ...\nBut no more problems with : \nworkspace 1 output XWAYLAND0\n  workspace 2 output XWAYLAND1\n  workspace 3 output XWAYLAND0\nXWAYLAND0 and XWAYLAND1 is what I get from xrandr\nScreen 0: minimum 320 x 200, current 5760 x 2160, maximum 8192 x 8192\nXWAYLAND0 connected 1920x1080+3840+0 (normal left inverted right x axis y axis) 293mm x 165mm\n   1920x1080     59.96*+\nXWAYLAND1 connected 3840x2160+0+0 (normal left inverted right x axis y axis) 608mm x 345mm\n   3840x2160     29.98*+. @emersion yes thx, I saw that after posting... I will just \"unpin\" my workspaces.. ",
    "t3hknr": "Done\n. ",
    "ngrammel": "Thanks for the link. I wasn't aware of that one, nor would I have expected it to work in wayland (it does seem to work, though). I guess I imagined it might be nice for sway to provide this functionality itself, the way swaygrab replaced eg scrot. Perhaps at the least there should be a mention in the documentation somewhere (eg in sway(5) manpage) that refers the user to light. Since sway is meant to be a sort of drop-in replacement for i3, and surely many i3 users have keyboard shortcuts mapped to xbacklight. \nIn any case, I think this is just a minor feature request at best. \n. ",
    "kkliebersbach": "Bump, I can reproduce this issue.. ",
    "yegorius": "Yes, this bothers me too. It feels as if cursor was rendered at 30FPS.. ",
    "WhyNotHugo": "@Drakulix So, is there any specific reason why sway uses a software cursor, rather than a hardware cursor?. An alias might work, but a wrapper script seems to produced unexpected results (see #1097).\nTBH, configurability is what makes sense the most, but I fear what happens when parsing the configuration file (which specifies the log file) fails.. An alias might work, but a wrapper script seems to produced unexpected results (see #1097).\nTBH, configurability is what makes sense the most, but I fear what happens when parsing the configuration file (which specifies the log file) fails.. I'd also like to +1 this, but try to add some constructiveness to the discussion as well (I really hope this doesn't come out as a rant, because I'm just trying to convey difference perspectives). I get that some people don't like having two selections (I think we all agree that it's 100% personal preference), but personal dislike isn't really a reason to drop a core feature (I say core because it's so important is has a dedicated mouse button!), IMHO.\nWe currently have apps that unify both Xorg selections (clipboard/primary). Having both means people can use one or two selections, whatever suits them better. The current basically works for everyone. IMHO, we should port the same idea to wayland: have two, but some way of unifying them for those who want to.\nHaving a single one, means that some people are okay, but the others have no workaround, and permanently lose a very important feature.\nAlso, one of the reasons for dropping PRIMARY selection, was that there are few middle mouse buttons in the world[source]. This really hasn't been true since early last decade.\nFinally, if CLIPBOARD replaces PRIMARY, it's destructive. I constantly have a mental map of what each selection contains. If one deletes the other, it's destructive, and it might lead to irreversible data loss (eg: the data I'd ctrl+x'd somewhere else is gone, forever).\nI selected-middleClicked several times writing this, but I recall I've some important data in the CLIPBOARD selection that I'd hate to have lost and have to look for again.\n\n[...] so I can have my middle mousebutton back.\n\nI'm kind of curious what you mean by \"have [..] back\". It's not like it had some previous usage. The middle mouse button has served for pasting since it's inception, AFAIK (definitely so in the late nineties). Pasting has been that button's main usage (except \"open link in new tab\", and very specific exception).\n\nTLDR:\nI'm really okay with it being able to unify both clipboard as an option. But it being the only option (or even the default), is a loss of a core functionality we've had for too many years and will block many from migrating to wayland (even those of use really wanting to!).. @SirCmpwn Glad to hear that! Looks like that will keep everybody happy, thanks!. Are you configuring your keyboard layout first?\neg: XKB_DEFAULT_LAYOUT=es sway. Same results on ArchLinux using the stable packages. It only happens when opening certain apps, can't narrow it down to what they havin in common.. dunst doesn't really work well under sway:\n\nIt's positioned on the upper left corner regardless of config.\nGlobal hotkeys don't work.\nClicks pass through it to the window behind it.\n\nThis is probably due to the way wayland is designed (eg: can't grab global hotkey, etc).\nIs there any workaround for this? Am I mistaken in thinking that sway needs to explicitly support notification daemons somehow (due to the placement overriding and global hotkey grabbing).. dunst doesn't really work well under sway:\n\nIt's positioned on the upper left corner regardless of config.\nGlobal hotkeys don't work.\nClicks pass through it to the window behind it.\n\nThis is probably due to the way wayland is designed (eg: can't grab global hotkey, etc).\nIs there any workaround for this? Am I mistaken in thinking that sway needs to explicitly support notification daemons somehow (due to the placement overriding and global hotkey grabbing).. Oh, I figured out the problem just now.\nSo when I run sway on my terminal, it actually runs \nsh\nXKB_DEFAULT_LAYOUT=es XKB_DEFAULT_OPTIONS=caps:escape /usr/bin/sway -d > .cache/sway.log\n(Note: I configured this).\nLooks like this causes two issues:\n\nswaymsg fails (does it run sway, by any chance?).\nmore instances of sway are invoken, which overwrite the log.\n\n\n$ which swaymsg\n/usr/bin/swaymsg. Oh, I figured out the problem just now.\nSo when I run sway on my terminal, it actually runs \nsh\nXKB_DEFAULT_LAYOUT=es XKB_DEFAULT_OPTIONS=caps:escape /usr/bin/sway -d > .cache/sway.log\n(Note: I configured this).\nLooks like this causes two issues:\n\nswaymsg fails (does it run sway, by any chance?).\nmore instances of sway are invoken, which overwrite the log.\n\n\n$ which swaymsg\n/usr/bin/swaymsg. > But if you used sway to do IPC\nI don't quite understand this. All I did was the above mentioned wrapper, I didn't fiddle with anything else.. > But if you used sway to do IPC\nI don't quite understand this. All I did was the above mentioned wrapper, I didn't fiddle with anything else.. Nope, it's swaymsg -t get_outputs that fails (I never tried the other option). I realize that the alternative would cause issues.. Nope, it's swaymsg -t get_outputs that fails (I never tried the other option). I realize that the alternative would cause issues.. Thanks for the clear explanations. (I searched for \"titlebar\", and github's search didn't pick up \"title bar\" \ud83d\ude05 ).\nFWIW, I've opened an issue on GTK's issue tracker here. If I ever get the time, I might try and look into it, but, TBH, my C sucks too much for this sort of thing and I don't think it'll happen.. Thanks for the clear explanations. (I searched for \"titlebar\", and github's search didn't pick up \"title bar\" \ud83d\ude05 ).\nFWIW, I've opened an issue on GTK's issue tracker here. If I ever get the time, I might try and look into it, but, TBH, my C sucks too much for this sort of thing and I don't think it'll happen.. Yup, quoting them did the trick. Since i3wm supports these values unquoted, can this discrepancy be considered an issue, or should I just close this?. Yup, quoting them did the trick. Since i3wm supports these values unquoted, can this discrepancy be considered an issue, or should I just close this?. Thanks! \ud83c\udf89 . Thanks! \ud83c\udf89 . I hope this helps; logs using 0.12 and the latest master (mislabeled 0.13 there, I just realized).\nhttps://gist.github.com/hobarrera/c4b317677db8a8a07d31aea58163b1cc\nI just used the same settings I use for testing on my other machine (Intel-based video).. I updated the gist and also added the output of running latest master with the default config file, just in case.. What's the long-term plan for scaling, since the only thing currently supported is integer-only?. Back to my actual real issue: on X I just configured it to use 160dpi to achieve a desired widget/UI/text size.\nWhat can I do to achieve a similar result in sway?. > hook from Arch Linux (https://github.com/SirCmpwn/sway/wiki/Sway-without-systemd-on-Arch-Linux) it is complete garbage (do not misunderstand) if he needs why not include it in the release ?.\nRunning Arch without systemd isn't supported. If you're hacking the OS, and running it with some unsupported configuration, you can expect lots of things not to work and lots of missing configuration files out of the box.\nFWIW, @JerziKaminsky, the Arch sway package, both for the stable release and the git-based one, however the logs posted here say he's running ArchBang, not ArchLinux, so there may be some fault there (I'm unaware of the differences).. Thanks!. Unclear: I haven't been able to find a clear pattern (other than \"I was pasting each time\"). I'm guessing the debug log is insufficient?. I'll try to configure coredumps to be saved. If I find consistent repro steps, I'll post them, but no pattern so far.. Thanks! :D. For me, when simply having two tabbed windows, clicking on the title of the inactive one does nothing (whereas it changes to that window on i3).. Are you running this as a system unit or a user one? I think you should\nrun it as the latter.\nOn Tue, May 9, 2017, at 23:09, Pedro Rodr\u00edguez de Oliveira wrote:\n\nJust in case, I found a way to start swaylocks using systemd. The gist\nis here\nhttps://gist.github.com/WolfangAukang/ffc3f481696c239c5583b5b3a0499e06> So the question is more related to why swaylock isn't recognizing the\npassword> \u2014 You are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub[1], or mute the\nthread[2].> \n\n--\nHugo Osvaldo Barrera\nLinks:\n\nhttps://github.com/SirCmpwn/sway/issues/1214#issuecomment-300353592\nhttps://github.com/notifications/unsubscribe-auth/AAsmu66MbQLROOXlshdKqnJ2DzTK92DLks5r4RxhgaJpZM4NTNmD\n. > any program with IPC access or the ability to run swaymsg will be able to exit your sway session without your consent\n\nCan't any such program run kill or send a SIGKILL anyway, in most common cases?. > Tray icons are now supported via SNI, and Xembed\nAren't AppIndicator designed explicitly not to rely on Xorg-specifics? Maybe that's a slightly cleaner target for wayland?\nThe big downside is that there's very little/poor documentation. :(\nOh, and thanks for all the hard work and to Nyantec for sponsoring this too! :tada:. FWIW, this also happens on i3. I'd argue this might be more of a firefox issue.. ",
    "stsquad": "I'm seeing similar symptoms (laggy cursor over some windows). It seems to be time specific, apps become laggy after time and killing them and restarting is fine. When I tried to move a window from my secondary to primary display it left corruption on the secondary display despite me switching to another workspace. However the corruption went away when I killed the lagged application.\nCould this be GPU resource related? Is there anyway to see how much of the GPUs resources are tied up with each applications rendering buffers?. It certainly seems to be GPU related: intel_gpu_tools says I am running ~7% render busy on a static terminal. Around 10-15% on this Chrome window I'm typing in and  a steady 60-65% while the mouse is over a \"laggy\" window. It peeks another 10% up when I use the mouse.\nLooking at htop I can see a slight uptick in cpu usage the laggy process on htop but sway goes from an idling sub 1% to 35% just by having the laggy window visible.. I did run perf on sway to see if that pointed to anything. However even with the debug build I can't get decent backtraces. I see a lot of __memcpy_sse2_unaligned but I guess everything involves some sort of memcpy :-/. Certainly since upgrading to 1.0 on my #gentoo box I haven't noticed any cursor laginess.. I seem to have a similar problem (sway version 1.0-beta.2) with the XF86AudioPlay not making it to Emacs. Running xev I see it as:\nKeymapNotify event, serial 30, synthetic NO, window 0x0,\nkeys:  4294967199 0   0   0   0   0   0   0   0   0   0   0   0   0   0   0\n       0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0\n\nI have the raise and lower volume keys captured by sway but other \"media\" keys do arrive, for example XF86Mail:\nKeyPress event, serial 32, synthetic NO, window 0x1c00001,\nroot 0x39f, subw 0x1c00002, time 11035962, (33,43), root:(2584,541),\nstate 0x0, keycode 163 (keysym 0x1008ff19, XF86Mail), same_screen YES,\nXLookupString gives 0 bytes:\nXmbLookupString gives 0 bytes:\nXFilterEvent returns: False\n\nKeyRelease event, serial 34, synthetic NO, window 0x1c00001,\nroot 0x39f, subw 0x1c00002, time 11036073, (33,43), root:(2584,541),\nstate 0x0, keycode 163 (keysym 0x1008ff19, XF86Mail), same_screen YES,\nXLookupString gives 0 bytes:\nXFilterEvent returns: False\n\n. My thoughts could be the disappearing client might have been an ssh client in a terminal shell timing out overnight.. I rebuilt with debug symbols enabled which should (in theory) still match the binary/coredump I have:\n(gdb) bt\n#0  seat_node_from_node (seat=0x55845042d020, node=0x0) at ../sway-1.0-beta.1/sway/input/seat.c:193\n#1  0x000055844ebe6c1f in seat_set_raw_focus (seat=0x55845042d020, node=0x0) at ../sway-1.0-beta.1/sway/input/seat.c:633\n#2  0x000055844ebff6bc in wl_signal_emit (data=0x55845058d060, signal=0x55845058d090) at /usr/include/wayland-server-core.h:468\n#3  container_begin_destroy (con=0x55845058d060) at ../sway-1.0-beta.1/sway/tree/container.c:90\n#4  0x000055844ec022a7 in view_unmap (view=view@entry=0x55845058bb20) at ../sway-1.0-beta.1/sway/tree/view.c:635\n#5  0x000055844ec06257 in handle_unmap (listener=0x55845058bdb0, data=<optimized out>) at ../sway-1.0-beta.1/sway/desktop/xwayland.c:378\n#6  0x00007fe4fa4df50c in wlr_signal_emit_safe () from /usr/lib64/libwlroots.so.0\n#7  0x00007fe4fa4a5c13 in xsurface_unmap () from /usr/lib64/libwlroots.so.0\n#8  0x00007fe4fa4a6eae in x11_event_handler () from /usr/lib64/libwlroots.so.0\n#9  0x00007fe4fa519be2 in wl_event_loop_dispatch (loop=0x558450202f10, timeout=timeout@entry=-1) at /var/tmp/portage/dev-libs/wayland-1.16.0/work/wayland-1.16.0/src/event-loop.c:641\n#10 0x00007fe4fa5187fa in wl_display_run (display=0x558450205700) at /var/tmp/portage/dev-libs/wayland-1.16.0/work/wayland-1.16.0/src/wayland-server.c:1260\n#11 0x000055844ebd315e in main (argc=<optimized out>, argv=<optimized out>) at ../sway-1.0-beta.1/sway/main.c:404\n\nI was an XWAYLAND client that died:\n(gdb) f 5\n#5  0x000055844ec06257 in handle_unmap (listener=0x55845058bdb0, data=<optimized out>) at ../sway-1.0-beta.1/sway/desktop/xwayland.c:378\n378             view_unmap(view);\n(gdb) p view\n$3 = (struct sway_view *) 0x55845058bb20\n(gdb) p *$\n$4 = {type = SWAY_VIEW_XWAYLAND, impl = 0x55844ec21b60 <view_impl>, container = 0x55845058d060, surface = 0x558450638490, xdg_decoration = 0x0, pid = 22985, x = 1682, y = 27, width = 1916, height = 1146, saved_x = 0, saved_y = 0, saved_width = 0, saved_height = 0, natural_width = 884, natural_height = 532, title_format = 0x0, border = B_NORMAL, saved_border = B_NONE, using_csd = false, border_thickness = 2, border_top = false, border_bottom = true, border_left = true, border_right = true, urgent = {tv_sec = 0, tv_nsec = 0}, allow_request_urgent = true, urgent_timer = 0x0, saved_buffer = 0x0, saved_buffer_width = 1916, saved_buffer_height = 1146, geometry = {x = 0, y = 0, width = 1916, height = 1146}, saved_geometry = {x = 0, y = 0, width = 1916, height = 1146}, destroying = false, executed_criteria = 0x5584505759b0, marks = 0x558450521510, marks_focused = 0x0, marks_focused_inactive = 0x0, marks_unfocused = 0x0, marks_urgent = 0x0, {wlr_xdg_surface_v6 = 0x55845042de80, wlr_xdg_surface = 0x55845042de80, wlr_xwayland_surface = 0x55845042de80, wlr_wl_shell_surface = 0x55845042de80}, events = {unmap = {listener_list = {prev = 0x55845058bc38, next = 0x55845058bc38}}}, surface_new_subsurface = {link = {prev = 0x0, next = 0x0}, notify = 0x55844ec025e0 <view_handle_surface_new_subsurface>}}\n\nFrom the window title I'm fairly sure it was a ssh terminal that died overnight (possibly while the screen was locked).. @RyanDwyer ahh ok - the 1.0-beta.1 only just dropped in the gentoo repos. I'll switch to the -9999 version (git head) and see if it happens again - unless a new beta is likely to be tagged soon.. @emersion no that's fine. It hasn't re-occurred since and I haven't restarted the session since I moved up to the -9999 build.. ",
    "etherealvisage": "Agree it seems GPU related in some way at least. On a X1650 Pro (GPU from 2006-era) I get barely 10FPS when moving a cursor across a terminal. RX 470 gives solid ~30FPS on the same window on the same computer with only the GPUs changed.. ",
    "cbuschardt": "You hit the nail on the head.  There shouldn't be any large memory copies on the CPU in a window compositor.  This should be done through EGL.  \nThe problem is very pronounced on a 4k laptop.  I see one core running at 70% load.. ",
    "teiesti": "According to this conversation, wlc has found and fixed the issue. The problem ~is~ was coming from a float-to-int typecast that was rounding small changes away. (Therefore you're only noticing the issue when moving the mouse very slow.)\nUnfortunately, the typecast was in the API. So there is work to be done: wlc has decided to leave the old API for backward compatibility but there is a new one that should (hopefully) work as expected.\nCould someone who knows sway's codebase have a look?. You're right! I've found the pull request just seconds ago... :+1: . I've just tried Weston: No issue! Everything works fine!\nMaybe, I should also share that I am using Arch Linux in the latest version and a German keyboard. My .bash_profile includes this passage to start Sway:\n```bash\nStart Sway, if possible\nif [ -z \"$DISPLAY\" ] && [ \"$(fgconsole)\" -eq 1 ] && [ -n \"$(type -P sway)\" ]; then\n    export XKB_DEFAULT_LAYOUT=de\n    export XKB_DEFAULT_MODEL=pc105\n    exec sway\nfi\n```. This seems to be a dublicate of #1308. The issue should finally vanish when wlc is replaced by wlroots in the upcoming version 1.0.. ",
    "soulofmischief": "I am experiencing this bug on Fedora 29, using the latest available sway version 0.15.2-1, when running sway inside of a VM on a fresh image with just sway installed.\nBrand new to sway so I'm not sure how to begin debugging this.\nIf using a hardware cursor is fixed in wlroots then w/e, I'll just tough it out.. I am experiencing this bug on Fedora 29, using the latest available sway version 0.15.2-1, when running sway inside of a VM on a fresh image with just sway installed.\nBrand new to sway so I'm not sure how to begin debugging this.\nIf using a hardware cursor is fixed in wlroots then w/e, I'll just tough it out.. Fedora is still using 0.15. If 0.15 isn't supported anymore then the rpm maintainer needs to know because they're probably waiting for the next stable version.. Fedora is still using 0.15. If 0.15 isn't supported anymore then the rpm maintainer needs to know because they're probably waiting for the next stable version.. I see. Well thanks for all the hard work, I look forward to trying out sway when 1.0 arrives.. I see. Well thanks for all the hard work, I look forward to trying out sway when 1.0 arrives.. ",
    "Laaas": "I haven't tested any other GTK programs, but I'd expect it to be the same.\nBTW Discord canary works, even though it has gtk2 as a requirement.\n. Chromium also works fine\n. I'm using the latest version. Though this may not be a problem with sway as I tried gnome today and it didn't work either. Maybe I just fucked something up, maybe xwayland just doesn't work lately, or maybe it's gtk's fault.. 1.19. Honestly I think there is an incompatibility in my configuration somewhere,\nbecause everything worked fine when I created a new user and tested on that\nuser. If I find the cause I'll say it here.\nDen 24/11/2016 19.21 skrev \"Fabio Alessandro Locati\" \nnotifications@github.com:\n\nOn Fedora 25, with Xorg 1.19 I don't see the described problem\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. Honestly I just give up. I nuked my original user and made a new one.\nCouldn't figure out exactly what was causing the programs to crash.. Closing the issue. Given that I used the default config and had the exact same symptoms and\nissues, I'm pretty sure it's not because of HiDPI.\n\nDen 23/12/2016 17.28 skrev \"Drew DeVault\" notifications@github.com:\n\nWhat happens if you try it without hidpi?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/977#issuecomment-269014087, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AVDX0L4HfB9hQ18d_8L1SDR_zre41L-iks5rK_bBgaJpZM4K9jGn\n.\n. Nope. Has this been implemented? I don't see any relevant commits.. This is BTW on with wlc 0.0.10, sway 0.14, and it happens when running an SDL program using the wayland videodriver.. I've only tested it with Natural Selection 2 (a game). Will be hard for you to reproduce, which is why I think it would be best if I implemented it myself.. sure. This is true of firefox's notifications too.\nWeb page to demonstrate: https://drive.google.com/file/d/0By2m7AMQwLo8N3IxbFBwc2RlcUE/view?usp=sharing. ....what happened to this?. stack trace: https://pastebin.com/cDBMUjY1\n\nThe coredump is just 2 MiB compressed FYI.. I am pretty sure, but I'll attempt to pull again.\nAlso, running urxvt from gnome-terminal doesn't show anything in either stdout or stderr, and the program doesn't exit. Its window just doesn't show at all.. I was using my own pointer constraints branch of wlroots (obviously), but it seems it broke xwayland somehow.... Seems like it was all my fault! (Or maybe it's just outdated?). Yeah I just rebased it and it works fine now, great. Thanks for the help.. Seems relevant: https://github.com/swaywm/sway/pull/3516. I found this.\nTL;DR: 0 is the default, -1 is the minimum possible speed, and 1 is the maximum possible speed.\nOne thing that confuses me is how can there be a maximum and minimum speed? Does libinput perhaps pass this number to the device itself? In any case, it works well enough for me, but higher limits would be nice.. Huh that's odd, I didn't experience that. Thanks for the fix though.. Well it should generally be useful in games, although it won't be super useful without relative pointer motion. I'm actually not aware of any non-example clients that use pointer constraints without relative pointer motion.. I'll try finding an example though\n. @absrd will you make a PR?. @emersion that example actually segfaults without pointer constraints implemented... blame me lol.\n@ddevault It's honestly pretty finished and I just named it WIP because I wanted input, because I wasn't happy with the end result completely (some bad code duplication as mentioned at the top of this PR), so I thought maybe you could think of a nice way to avoid that, with your greater experience with the codebase.\nI'll rename this as not WIP, since it works AFAIK.. @klardotsh I think it would be helpful just trying to use it as a daily driver. I will switch my machine to @absrd's branch and try playing some of my games, maybe some Wayland native games too if I can find any.. @Kunagi7 what about when you just open your inventory? Seems like it doesn't unhide the cursor for some reason, i.e. a buggy client.. @emersion how would you implement this with cursor grabs?. ",
    "chuckhacker": "This. I am using a 12.5\" laptop so this is also really important to me, thanks.. ",
    "JonnyMako": "Is this in beta 1?. > I don't think so.\n\nI'm not a fan of this. It would mean wasting resources in case windows are opaque. It would make the rendering code more complicated, it's already pretty complicated.\n\nok, thanks. I've always weighed the pros and cons of \"real\" transparency\npros:\n1. seems more intuitive (definitely so for floating windows but then again this already works)\n2. can see the window behind the terminal without having to switch to it.\ncons:\n1. resource hog\n2. less privacy (can't hide windows behind terminals)\n3. can't enjoy the wallpaper as much :smile: \nI think I'm coming around to the side of not minding not having real transparency.. So, I'm trying to use virtboard but I get this message. Is this a regression? Am I missing components?\nNo input method manager global, some functionality unavailable\nCould not register to session manager: Cannot invoke method; proxy is for a well-known name without an owner and proxy was constructed with the G_DBUS_PROXY_FLAGS_DO_NOT_AUTO_START flag\ncc @dcz-purism. > These messages come from virtboard. The first one is talking that the input-method protocol is not implemented, and the other one is about missing org.gnome.SessionManager dbus interface. It should be working fine despite both, is it?\nNope. I don't see any keyboard.. @dcz-purism sorry I missed your reply. That still does not work:\nThe name sm.puri.OSK0 was not provided by any .service files. > Please include the stack trace.\n\nAttached.\nsway-gdb-bt.log\n. ```\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:776] XCB_CREATE_NOTIFY (8388611)\n2018-10-03 11:15:32 - [sway/desktop/xwayland.c:562] New xwayland unmanaged surface\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:776] XCB_CREATE_NOTIFY (8388615)\n2018-10-03 11:15:32 - [sway/desktop/xwayland.c:568] New xwayland surface title='(null)' class='(null)'\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:900] XCB_PROPERTY_NOTIFY (8388609)\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:417] XCB_ATOM_WM_NAME: java \n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:900] XCB_PROPERTY_NOTIFY (8388609)\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:900] XCB_PROPERTY_NOTIFY (8388615)\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:478] NET_WM_WINDOW_TYPE (1)\n2018-10-03 11:15:32 - [subprojects/wlroots/xwayland/xwm.c:900] XCB_PROPERTY_NOTIFY (8388615)\n2018-10-03 11:15:32 - [sway/tree/view.c:341] View 0x55bdc2e58360 updated CSD to 1 \n(EE) failed to read Wayland events: Broken pipe \nExiting due to signal.\nGdk-Message: 11:15:32.593: java: Fatal IO error 0 (Success) on X server :0.\n```. > Hmm, maybe related to the new SSD code.\n\nCan you attach a stack trace too? (coredumpctl gdb sway and then bt full)\n\nAttached. Although it looks like its notify-osd that is triggering the crash...\ngdb.txt\n. > It's not the right stack trace, you probably have multiple. You can list them with coredumpctl -r and then run GDB on a specific one with coredumpctl gdb <pid>.\n\nAlso please run bt full in GDB.\n\nYes, I couldn't find sway in the list there. I attached the latest. I uninstalled notify-osd and now the crash I have /usr/lib/Xorg in coredumpctl list. Would a trace of that be helpful?. > Eh, not really. Can you try running sway in GDB in sway (aka gdb sway in a sway session), then make it crash?\nSorry. I can't get a Sway coredump that way either.. @emersion I'm still getting crashes. I suspect they are related to this issue. The best way to reproduce is to try and move ($Mod+left click window title and drag) to edge of screen or beyond. I can get the crash consistently as long as there are at least two windows on screen. With multi monitor setup moving windows to an empty screen sometimes produces a crash.\nI am unable to produce any coredump files on my system, so I'm looking into that. Sorry. I can attach a plan log file if you like.. > What do you mean? Are they turned off? Are they completely gray and frozen?\n\nThey are turned on, but completely gray (akin to default rootston window, I can see cursor, but no swaybar or background wallpaper).  I can open a window on one of my other monitors where windows are visible and when I move them to DP-1 or DP-3 the window disappears, and re-appears on the working monitors, when moved back.\n\nCan you try rootston (in wlroots) to see if you have the same issue? (And try to open an app -- the background there is gray)\n\n\nrootston seems to be working fine.\n\nIf you can reproduce there, can you use git bisect to pin down which specific commit is the culprit?\n. > We need someone to do a git bisect here.\n\nI can do this. However, I don't know how this would work with wlroots and sway being two different repos. Will bisecting sway even guarantee a successful build with the latest wlroots and vice versa? If you or someone else can suggest a way, I'd be happy to help.. > It's easier if you can reproduce this on rootston, which is part of the wlroots repository.\n@emersion initially suggested that, but the issue is not there on rootston. I can display windows in rootston just fine.\n(Also, I'm pretty good about pulling frequently and rebuilding, so a rough estimate would be that this broke one or two commits before the timestamp of this issue being opened by me. I will try to rollback Sway and wlroots to that time frame and see if I can't pin down the exact commit.). I thought I'd also mention this following behavior. With the external monitor seemingly gray, if I transfer a window to it, the window is not displayed. However, now, in this state, if I reload Sway, the window appears. I can't interact with it, but as long as the window is \"selected\" (blindly), if I type something into that window, and then again reload Sway, the I can see that the text that I typed has in fact been entered into the window. I hope this can give some clues to isolate the issue.. So it seems the problem may lie elsewhere. I can't get external monitors to work with even older versions of Sway which I am sure worked before. So the problem is either the new X (1.20) and/or nouveau/intel drivers. I can't seem to find a combination that I'm able to roll back to, to make multimonitor work with Sway. So if nobody else is able to see this problem, I'm guessing they are on older X and/or Nouveau drivers. A final worst possible case is some Nouveau dirver bug which only affects my particular card (Quadro). Either way I'm unable to figure this out. If somebody has suggestions, I can try.. In any case the page flip error is coming from line#21 in wlroots/backend/drm/legacy.c\nif (drmModePageFlip(drm->fd, crtc->id, fb_id, DRM_MODE_PAGE_FLIP_EVENT, conn)) {\n        wlr_log_errno(WLR_ERROR, \"%s: Failed to page flip\", conn->output.name);\n        return false;\n    }. @ascent12 thanks for the suggestion. I rolled back the kernel (upto 4.17). Still no dice. :disappointed: . > Maybe rolling forward to the latest 4.19-rc8 helps?\n@Emantor It was fun building the kernel, but unfortunately, did not resolve the problem\n4.19.0-rc8-mainline #1 SMP PREEMPT Fri Oct 19 15:19:18 CDT 2018 x86_64 GNU/Linux. So, it occurs to me, xrandr shows DP-1-1 and DP-1-3, but the page-flip error references DP-1 and DP-3. Could this naming mismatch be the issue?. > Are you using a DisplayPort hub or daisy chaining?\nNeither. This is a vanilla Optimus laptop.. Now I'm convinced this change from DP-3 to DP-1-3 is a recent change that triggered this. The weird thing is I had DP-3 in my sway config and it still activates the correct monitor, so I failed to notice this change. Where is this DP-1-3 naming change coming from?. > We use a different naming scheme than Xorg, and just follow the same name that the kernel gives the devices.\n\nDP-1-3 implies that it's a DisplayPort MST connection.\n\nI see. Ok, then I guess I'm back to square one. I am unable to provide any useful information for you to be able to narrow this down. Let me know if you want me to try something. Otherwise, I'll keep checking back after kernel updates to see if any of them fixes this.. So, just out of curiosity, I disabled hybrid graphics in the BIOS of my laptop, and bingo! all four monitors sprung back to life! Even in X11 the ports are numbered as before DP-1 DP-2 DP-3 etc. So, there you are. I still think this is some bug in how muxed outputs are handled. I'm just not sure where the bug is. Clearly, Sway was working before with both Intel and Nvidia cards active. Now I have to lose Intel to get Sway working on all monitors. Just wanted to update you guys.. ok, I'm finally able to reproduce this on rootston. I'm attaching both logs (hybrid graphics enabled and disabled). With disabled, I'm able to see the browser on my external monitor connected to DP-3. With enabled, I get a gray screen. I hope there is some useful info in these logs.\nrootston.DP3.hybrid-disabled.log\nrootston.DP3.hybrid-enabled.log. And I was able to bisect and find the problem commit:\ngood:\nhttps://github.com/swaywm/wlroots/commit/24a48d4858a9d5eda0be86e20cbf0d378895063a\nbad:\nhttps://github.com/swaywm/wlroots/commit/b7b781ff448675cc8486d7aa8f6d78d1f1e7c727. @RyanDwyer I apologize. You are right. Something went wrong in my bisect. I believe, this is the bad commit:\nhttps://github.com/swaywm/wlroots/commit/ba9142274765869cd58ec0c55e7ef8da0354ed25. > I will see about reproducing the issue with Rootston, as was asked.\nFYI, I already reproduced it with rootston. That is how I was able to bisect wlroots and find the problem commit earlier today.... Yes, this is now fixed. Thanks!. Firefox-nightly 65.0a1 does not even launch for me with GDK_BACKEND=wayland\n```\nIPDL protocol Error: Received an invalid file descriptor\nIPDL protocol Error: Received an invalid file descriptor\nIPDL protocol Error: Received an invalid file descriptor\nGdk-Message: 21:38:04.157: Error reading events from display: Invalid argument\n[Child 10819, Chrome_ChildThread] WARNING: pipe error (41): Connection reset by peer: file /builds/worker/workspace/build/src/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 363\n[Child 10819, Chrome_ChildThread] WARNING: pipe error (3): Connection reset by peer: file /builds/worker/workspace/build/src/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 363\n!!! [Child][MessageChannel::SendAndWait] Error: Channel error: cannot send/recv\n!!! [Child][MessageChannel] Error: (msgtype=0x51001E,name=PLayerTransaction::Msg_Shutdown) Channel error: cannot send/recv\n[Child 10851, Chrome_ChildThread] WARNING: pipe error: Broken pipe: file /builds/worker/workspace/build/src/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 736\n[Child 10851, Chrome_ChildThread] WARNING: pipe error: Broken pipe: file /builds/worker/workspace/build/src/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 736\n[Child 10851, Chrome_ChildThread] WARNING: pipe error: Broken pipe: file /builds/worker/workspace/build/src/ipc/chromium/src/chrome/common/ipc_channel_posix.cc, line 736\n```. >Note that even if it works, it's very slow.\nFurther note that it gets slower with every key stroke, until it just freezes. Additionally, for non-us keyboard layouts, modifier keys don't work. (I filed a bug about this on mozilla).. Great! Firefox with wayland backend is working well enough for me to switch to using it by default! A couple of minor issues:\n1. Menus get stuck on screen. So when I enable any menu, lets say the right-click context menu, and then click outside to disable it, I can't get rid of it. It is still drawn on screen.\n2. Firefox with wayland backend does not pick up GTK themes.. > Does scrolling the page underneath the menu fix it?\nYes, scrolling gets rid of the context menu. The issue is not limited to context menus though. The menus in the menu bar are drawn over each other. So if I select File menu followed by Edit menu, then Edit menu is drawn over the still seemingly open File menu. All menus are reset when cursor is moved over the webpage area.. > This one is likely a sway bug. Can you open a separate issue about it?\nWill do.\nAlso, in newer firefox-nightly wayland, selecting and copying any text from webpage crashes firefox. I still run into the problem with firefox not starting up if clipboard has content. I suspect these are related.. > You need to use swaywm/wlroots#1384.\nGotcha. Thanks.. I seem to be able to reliably reproduce disappearing right-click context menu by right-clicking and very quickly moving the cursor onto the menu itself. This maneuver has to be quite quick and easier to do with a mouse. When I do this, I don't see part of the menu and the items appear as I move the cursor over them. @emersion  let me know if you want a separate issue for this.. Also auto updating nightly sometimes crashes Sway.. I'm seeing lots of crashes in nightly builds starting yesterday. Just opening a new tab and typing into url field seems to crash firefox, for example. Anyone else seeing frequent crashes?. @johnae thanks.\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1512589. I went ahead and reported to mozilla:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1528021. Why is this closed? Has input-method been implemented in Sway?. ok, thanks. I missed that.. I got a Sway crash just using firefox (not updating). I'm attaching the backtrace here. Let me know if it is a separate issue, I'll report as a different issue.\ngdb.txt. It would be nice if this crash was fixed. Its annoying to lose Sway when firefox-nightly needs updating. :angry: . > You should be able to run the following from a binding or swaymsg:\n\ninput <identifier> xkb_options ctrl:swap_rwin_rctl\nYou can get the <identifier> for the keyboard from swaymsg -t get_inputs\nSee man 5 sway-input and man 7 xkeyboard-config for more information/options.\n\n@RedSoxFan  is there a way to apply sequentially? For example, this seems to do something but not quite what I was expecting:\nxkb_options altwin:swap_alt_win,ctrl:swapcaps\nAfter this, ctrl is lost (dosen't do anything). Indeed, it seems to work for the inbuilt keyboard for my laptop, but on my external PS2 keyboard, lctrl is not working. Using xev, I can see the remapping worked, and the keypress is registered as Control_L, but shortcuts using the ctrl key don't work. So I'm at a loss. Let me know if someone can think of a way to debug. thanks!\n(The external keyboard is an omni key ultra T and has a dipswitch to switch ctrl-alt-caps. I encounter the same problem in both dipswitch positions.).   \n\nYou can try: xkb_model omnikey101, but if the keypress is registering correctly in xev, I'm not sure it will have any effect.\n\nThanks for the reply. Yes, specifying xkb_model did not fix it. No big deal. I'll can live with a slightly less ergonomic position for ctrl :grin: . @rtyler does reloading sway bring the display back? I've seen something similar with external displays (sometimes when hotpulgging). In my case reloading activates all displays.. > This has been added in libdrm-2.4.95. Which version do you have?\nI've installed 2.4.94 I'll try updating thanks.. Upgrading libdrm worked. Thanks for the help.. VGA is fine. DisplayPorts seems to be the issue.. I don't think I have anything fancy. Here are the output related lines:\n```\noutput \"*\" background ~/Pictures/background.png center #000000\noutput eDP-1 pos 0 0 res 1920x1080 scale 1\nworkspace 1 output eDP-1 \noutput DP-1 pos 1920 0 res 2560x1440 scale 1\nworkspace 9 output DP-1\noutput DP-3 pos 4480 240 res 1920x1200 scale 1\nworkspace 11 output DP-3 \noutput VGA-1 pos 6400 56 res 1280x1024 scale 1\nworkspace 12 output VGA-1\n```\nDP-1 and DP-3 have no cursor showing. Elements on screen are being highlighted (for eg. links on a webpage etc.) where the cursor is supposed to be and moving the invisible cursor and clicking blindly still works.. ok, I've done a bisect, and this is the offending commit:\nhttps://github.com/swaywm/wlroots/commit/7bc43413edc2db04bbfba395f9606957ff2fa21c. > Can this be closed or is this still an issue for some configurations/setups?\nI think failing to fall back to a software cursor is still an issue for some Radeon cards. Not sure if there is a separate issue.. Maybe we can close this now. swaywm/wlroots#1584 may fix Radeon issues?. Attached.\nsway.log\n. ok, thanks.. > Have you installed /etc/pam.d/swaylock? Can you run swaylock -d >swaylock.log 2>&1?\n2019-02-09 02:33:43 - [main.c:1057] Parsing CLI Args\n2019-02-09 02:33:43 - [main.c:271] output name is eDP-1\n2019-02-09 02:33:49 - [pam.c:102] pam_authenticate failed: invalid credentials\n2019-02-09 02:33:57 - [pam.c:102] pam_authenticate failed: invalid credentials\nI installed swaylock from source, but don't find swaylock in /etc/pam.d/. Probably a recent change? . > Is it installed in /usr/local/etc/pam.d?\nBing. Ok, I'll set meson --prefix thanks!. I might have run into this crash. Log attached.\nsway.log\n. @RedSoxFan I am not a 100% since I've not been able to get a useful trace for some reason\n```\n0  0x00005641f96e95c4 in set_workspace\n(container=Python Exception <class 'gdb.MemoryError'> Cannot access memory at address 0x7ffdef12bff8:\n\n1  0x00005641f96e6bf7 in container_for_each_child (container=0x5641fb5d6750, f=\n0x5641f96e95c0 <set_workspace>, data=0x0) at ../sway/tree/container.c:410\n    child = 0x5641fb6c4e20\n    i = 0\n\n``. I'm able to reproduce by creatingT[S[viewa] V[viewb]]and then trying to move the whole container by dragging \"T\". I may have been bitten by this, adding myself to participants.... @RedSoxFan  This doesn't fix the crash for me. Still seeing the crash insway version 1.0-rc1-54-gcc39bbdf (Feb 13 2019, branch 'master')`\nsway.log\nStill can't get a trace:\n```\n0  0x000055e3847d1bc6 in container_for_each_child (container=Python Exception  Cannot access memory at address 0x7fffe7953ff8:\n1  0x000055e3847d1c39 in container_for_each_child (container=0x55e386231c30, f=0x55e3847d45eb , data=0x0) at ../sway/tree/container.c:411\n    child = 0x55e386231490\n    i = 0\n\n2  0x000055e3847d1c39 in container_for_each_child (container=0x55e386231c30, f=0x55e3847d45eb , data=0x0) at ../sway/tree/container.c:411\n    child = 0x55e386231c30\n    i = 1\n\n.\n.\n.\n```\n. > Firefox on Wayland native or in Xwayland?\non Wayland native. > Does it work in Weston?\nIt does not work in weston or rootston. So I guess this is a firefox bug?. https://bugzilla.mozilla.org/show_bug.cgi?id=1527976. @emersion I looks like the bug has been fixed on Firefox side and drag and detach now works in Weston. It still does not work on sway and the comment in the mozilla bug suggests this is something to be fixed on Sway side. Can we reopen this issue? . > Can you try #3700 and swaywm/wlroots#1517?\nStill does not work with those branches.\nsway version 0.14-rc1-3418-g0e1a152f (Feb 20 2019, branch 'refactor-dnd'). Dragging to detach a firefox tab is still not working for me. Dragging tabs withing a window is working fine.. > @JonnyMako, can you please confirm that this fixes your issue (#3675 (comment))?\nYes, this branch fixes the crash for me. Thanks!. I think this is breaking the build for me:\n```\nProgram git found: YES (/usr/bin/git)\n|\n|Executing subproject wlroots \n|\n|Value disabled is not boolean (true or false).\n|\n|Subproject wlroots is buildable: NO (disabling)\nDependency wlroots found: NO (tried pkgconfig and cmake)\nmeson.build:73:1: ERROR:  Dependency \"wlroots\" not found, tried pkgconfig and cmake\n```. > Can you share your sway config?\nAttached.\nconfig.txt\n. > I can't reproduce.\nok, I'll try and further isolate the problem, if I can.. It looks like the text in the tilebar when I switch to the two webpage examples in my first post seem to have some special characters/icons which may be forcing the title bar to adjust the width. ~~I don't know how i3 handles this, but~~ would it be possible to do the resizing on a per window/container basis.\n(The amount of resizing required may also vary depending on what default font is chosen)\nEDIT: i3 doesn't seem to render special characters in the titlebar, so Sway's behavior is superior modulo the flicker.. Maybe. I don't have a problem with the size of the bar per se. It is just that all title bars in all work spaces and monitors seem to get adjusted causing the flicker effect on all screens. This is quite distracting.. > Logs?\nAttached. This is what I see, when moving the cursor:\n2019-02-19 16:01:08 - [sway/ipc-server.c:498] Client 25 writable\n2019-02-19 16:01:08 - [sway/ipc-server.c:297] Sending workspace::focus event\n2019-02-19 16:01:08 - [sway/ipc-server.c:911] Added IPC reply to client 103 queue: { \"change\": \"focus\", \"old\": { \"id\": 6, \"name\": \"11\", \"rect\": { \"x\": 4480, \"y\": 240, \"width\": 1920, \"height\": 1179 }, \"focused\": false, \"focus\": [ 13 ], \"border\": \"none\", \"current_border_width\": 0, \"layout\": \"splith\", \"orientation\": \"horizontal\", \"percent\": null, \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window\": null, \"urgent\": false, \"floating_nodes\": [ ], \"sticky\": false, \"num\": 11, \"output\": \"DP-3\", \"type\": \"workspace\", \"representation\": \"H[termite]\", \"nodes\": [ { \"id\": 13, \"name\": \"jonm@jonmhome: ~\", \"rect\": { \"x\": 4480, \"y\": 240, \"width\": 1920, \"height\": 1179 }, \"focused\": false, \"focus\": [ ], \"border\": \"normal\", \"current_border_width\": 2, \"layout\": \"none\", \"orientation\": \"none\", \"percent\": 1.0, \"window_rect\": { \"x\": 2, \"y\": 0, \"width\": 1916, \"height\": 1154 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 1920, \"height\": 23 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 574, \"height\": 362 }, \"window\": null, \"urgent\": false, \"floating_nodes\": [ ], \"sticky\": false, \"type\": \"con\", \"fullscreen_mode\": 0, \"pid\": 17010, \"app_id\": \"termite\", \"visible\": true, \"marks\": [ ], \"nodes\": [ ] } ] }, \"current\": { \"id\": 4, \"name\": \"9\", \"rect\": { \"x\": 1920, \"y\": 0, \"width\": 2560, \"height\": 1419 }, \"focused\": false, \"focus\": [ 12, 11 ], \"border\": \"none\", \"current_border_width\": 0, \"layout\": \"splith\", \"orientation\": \"horizontal\", \"percent\": null, \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window\": null, \"urgent\": false, \"floating_nodes\": [ ], \"sticky\": false, \"num\": 9, \"output\": \"DP-1\", \"type\": \"workspace\", \"representation\": \"H[firefox firefox]\", \"nodes\": [ { \"id\": 11, \"name\": \"Frame drops in video playback when moving cursor between monitors \u00b7 Issue #3732 \u00b7 swaywm\\/sway - Firefox Nightly\", \"rect\": { \"x\": 1920, \"y\": 0, \"width\": 1280, \"height\": 1419 }, \"focused\": false, \"focus\": [ ], \"border\": \"normal\", \"current_border_width\": 2, \"layout\": \"none\", \"orientation\": \"none\", \"percent\": 0.5, \"window_rect\": { \"x\": 2, \"y\": 0, \"width\": 1276, \"height\": 1394 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 1280, \"height\": 23 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 300, \"height\": 99 }, \"window\": null, \"urgent\": false, \"floating_nodes\": [ ], \"sticky\": false, \"type\": \"con\", \"fullscreen_mode\": 0, \"pid\": 16564, \"app_id\": \"firefox\", \"visible\": false, \"marks\": [ ], \"nodes\": [ ] }, { \"id\": 12, \"name\": \"2019 RAM 1500 Review - 1\\/2 Ton King? - YouTube - Firefox Nightly\", \"rect\": { \"x\": 1920, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"focused\": true, \"focus\": [ ], \"border\": \"normal\", \"current_border_width\": 2, \"layout\": \"none\", \"orientation\": \"none\", \"percent\": 1.014799154334038, \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 300, \"height\": 99 }, \"window\": null, \"urgent\": false, \"floating_nodes\": [ ], \"sticky\": false, \"type\": \"con\", \"fullscreen_mode\": 1, \"pid\": 16564, \"app_id\": \"firefox\", \"visible\": true, \"marks\": [ ], \"nodes\": [ ] } ] } }\n2019-02-19 16:01:08 - [sway/desktop/transaction.c:413] Transaction 0x55801f503d50 committing with 5 instructions\n2019-02-19 16:01:08 - [sway/desktop/transaction.c:281] Applying transaction 0x55801f503d50\n2019-02-19 16:01:08 - [sway/input/cursor.c:1151] denying request to set cursor from unfocused client\n2019-02-19 16:01:08 - [sway/input/cursor.c:1151] denying request to set cursor from unfocused client\n2019-02-19 16:01:08 - [sway/input/cursor.c:1151] denying request to set cursor from unfocused client\nsway.txt\n. Also, does not happen with software cursor.. I think I may have narrowed this a bit. I think this seems to be happening when one of the firefox tabs has video content in it. I've also noticed that when I fullscreen youtube videos in the browser on one monitor, the windows on the other external monitor seems to not redraw, leaving patches of blank. I wonder if these are related.\nEDIT: closing firefox and replugging, brings the monitors back.. @RyanDwyer That is exactly it. Bad commit: 7b9ae42331e49fea0f566fa7592855dee5da1991. Good commit: fb3475e291ea6be94131c19fdc006e9ad873ea5f. 1. Config does not have focus_follows_mouse line.\n2. Open layout T[ViewA, ViewB]\n3. With fb3475e291ea6be94131c19fdc006e9ad873ea5f moving the cursor over the container only focuses window that is in front. Even if I hover over the title bars of the two windows only the one on top remains focused. I have to click the title bar of the window that is behind to raise it.\n4. With 7b9ae42331e49fea0f566fa7592855dee5da1991, hovering over the title bars of the two windows raises the window corresponding to the title bar over which the cursor is placed.\nNote setting focus_follows_mouse no is not desirable since with this setting, the window on top remains unfocused when the mouse is moved from container to container.. ",
    "rosekunkel": "This happens to me as well on Arch Linux. It crashes in sway but not orbment.\nVersions\nsway --version:\n\nsway version  (2016-10-25, branch \"\")\n\nwlc version: 0.0.7-1\nSteps to reproduce\n\nrun sway\nopen a terminal\nrun firefox or firefox --safe-mode\n\nThe only output I get is\n\nSegmentation fault (core dumped)\n\nFirefox stack trace\nI'm not sure how to get a useful stack trace from Firefox. I got this by just running under gdb but it seems to be missing a lot of symbols:\nstacktrace.txt\nSway config file\nBasically the default config but with HiDPI settings and a different terminal:\n```\nDefault config for sway\n\nCopy this to ~/.config/sway/config and edit it to your liking.\n\nRead man 5 sway for a complete reference.\nVariables\n\nLogo key. Use Mod1 for Alt.\nset $mod Mod4\nHome row direction keys, like vim\nset $left h\nset $down j\nset $up k\nset $right l\nYour preferred terminal emulator\nset $term roxterm\nYour preferred application launcher\nset $menu dmenu_run\nOutput configuration\n\nDefault wallpaper (more resolutions are available in /usr/share/sway/)\noutput * bg /usr/share/sway/Sway_Wallpaper_Blue_1920x1080.png fill\n\nExample configuration:\n\noutput HDMI-A-1 resolution 1920x1080 position 1920,0\n\nYou can get the names of your outputs by running: swaymsg -t get_outputs\noutput WLC-1 scale 2\noutput eDP-1 scale 2\nInput configuration\n\nExample configuration:\n\ninput \"2:14:SynPS/2_Synaptics_TouchPad\" {\ndwt enabled\ntap enabled\nnatural_scroll enabled\nmiddle_emulation enabled\n}\n\nYou can get the names of your inputs by running: swaymsg -t get_inputs\nThe escape symbol \"\\\" has to be removed.\nRead man 5 sway-input for more information about this section.\nKey bindings\n\nBasics:\n\n# start a terminal\nbindsym $mod+Return exec $term\n\n# kill focused window\nbindsym $mod+Shift+q kill\n\n# start your launcher\nbindsym $mod+d exec $menu\n\n# Drag floating windows by holding down $mod and left mouse button.\n# Resize them with right mouse button + $mod.\n# Despite the name, also works for non-floating windows.\n# Change normal to inverse to use left mouse button for resizing and right\n# mouse button for dragging.\nfloating_modifier $mod normal\n\n# reload the configuration file\nbindsym $mod+Shift+c reload\n\n# exit sway (logs you out of your wayland session)\nbindsym $mod+Shift+e exit\n\n\nMoving around:\n\n# Move your focus around\nbindsym $mod+$left focus left\nbindsym $mod+$down focus down\nbindsym $mod+$up focus up\nbindsym $mod+$right focus right\n# or use $mod+[up|down|left|right]\nbindsym $mod+Left focus left\nbindsym $mod+Down focus down\nbindsym $mod+Up focus up\nbindsym $mod+Right focus right\n\n# _move_ the focused window with the same, but add Shift\nbindsym $mod+Shift+$left move left\nbindsym $mod+Shift+$down move down\nbindsym $mod+Shift+$up move up\nbindsym $mod+Shift+$right move right\n# ditto, with arrow keys\nbindsym $mod+Shift+Left move left\nbindsym $mod+Shift+Down move down\nbindsym $mod+Shift+Up move up\nbindsym $mod+Shift+Right move right\n\n\nWorkspaces:\n\n# switch to workspace\nbindsym $mod+1 workspace 1\nbindsym $mod+2 workspace 2\nbindsym $mod+3 workspace 3\nbindsym $mod+4 workspace 4\nbindsym $mod+5 workspace 5\nbindsym $mod+6 workspace 6\nbindsym $mod+7 workspace 7\nbindsym $mod+8 workspace 8\nbindsym $mod+9 workspace 9\nbindsym $mod+0 workspace 10\n# move focused container to workspace\nbindsym $mod+Shift+1 move container to workspace 1\nbindsym $mod+Shift+2 move container to workspace 2\nbindsym $mod+Shift+3 move container to workspace 3\nbindsym $mod+Shift+4 move container to workspace 4\nbindsym $mod+Shift+5 move container to workspace 5\nbindsym $mod+Shift+6 move container to workspace 6\nbindsym $mod+Shift+7 move container to workspace 7\nbindsym $mod+Shift+8 move container to workspace 8\nbindsym $mod+Shift+9 move container to workspace 9\nbindsym $mod+Shift+0 move container to workspace 10\n# Note: workspaces can have any name you want, not just numbers.\n# We just use 1-10 as the default.\n\n\nLayout stuff:\n\n# You can \"split\" the current object of your focus with\n# $mod+b or $mod+v, for horizontal and vertical splits\n# respectively.\nbindsym $mod+b splith\nbindsym $mod+v splitv\n\n# Switch the current container between different layout styles\nbindsym $mod+s layout stacking\nbindsym $mod+w layout tabbed\nbindsym $mod+e layout toggle split\n\n# Make the current focus fullscreen\nbindsym $mod+f fullscreen\n\n# Toggle the current focus between tiling and floating mode\nbindsym $mod+Shift+space floating toggle\n\n# Swap focus between the tiling area and the floating area\nbindsym $mod+space focus mode_toggle\n\n# move focus to the parent container\nbindsym $mod+a focus parent\n\n\nScratchpad:\n\n# Sway has a \"scratchpad\", which is a bag of holding for windows.\n# You can send windows there and get them back later.\n\n# Move the currently focused window to the scratchpad\nbindsym $mod+Shift+minus move scratchpad\n\n# Show the next scratchpad window or hide the focused scratchpad window.\n# If there are multiple scratchpad windows, this command cycles through them.\nbindsym $mod+minus scratchpad show\n\n\nResizing containers:\n\nmode \"resize\" {\n    # left will shrink the containers width\n    # right will grow the containers width\n    # up will shrink the containers height\n    # down will grow the containers height\n    bindsym $left resize shrink width 10 px or 10 ppt\n    bindsym $down resize grow height 10 px or 10 ppt\n    bindsym $up resize shrink height 10 px or 10 ppt\n    bindsym $right resize grow width 10 px or 10 ppt\n# ditto, with arrow keys\nbindsym Left resize shrink width 10 px or 10 ppt\nbindsym Down resize grow height 10 px or 10 ppt\nbindsym Up resize shrink height 10 px or 10 ppt\nbindsym Right resize grow width 10 px or 10 ppt\n\n# return to default mode\nbindsym Return mode \"default\"\nbindsym Escape mode \"default\"\n\n}\nbindsym $mod+r mode \"resize\"\n\nStatus Bar:\n\nRead man 5 sway-bar for more information about this section.\nbar {\n    position top\n    colors {\n        statusline #ffffff\n        background #323232\n        inactive_workspace #32323200 #32323200 #5c5c5c\n    }\n}\nYou may want this:\n\ninclude ~/.config/sway/conf.d/*\n\nProtip:\n\ninclude ~/.config/sway/hostname/*\n```\nNotes\nI saw this same behavior when trying to run firefox under weston without enabling xwayland. I've also been having issues running other X applications (google chrome, emacs), so it may be that xwayland is not working correctly.. This happens to me as well on Arch Linux. It crashes in sway but not orbment.\nVersions\nsway --version:\n\nsway version  (2016-10-25, branch \"\")\n\nwlc version: 0.0.7-1\nSteps to reproduce\n\nrun sway\nopen a terminal\nrun firefox or firefox --safe-mode\n\nThe only output I get is\n\nSegmentation fault (core dumped)\n\nFirefox stack trace\nI'm not sure how to get a useful stack trace from Firefox. I got this by just running under gdb but it seems to be missing a lot of symbols:\nstacktrace.txt\nSway config file\nBasically the default config but with HiDPI settings and a different terminal:\n```\nDefault config for sway\n\nCopy this to ~/.config/sway/config and edit it to your liking.\n\nRead man 5 sway for a complete reference.\nVariables\n\nLogo key. Use Mod1 for Alt.\nset $mod Mod4\nHome row direction keys, like vim\nset $left h\nset $down j\nset $up k\nset $right l\nYour preferred terminal emulator\nset $term roxterm\nYour preferred application launcher\nset $menu dmenu_run\nOutput configuration\n\nDefault wallpaper (more resolutions are available in /usr/share/sway/)\noutput * bg /usr/share/sway/Sway_Wallpaper_Blue_1920x1080.png fill\n\nExample configuration:\n\noutput HDMI-A-1 resolution 1920x1080 position 1920,0\n\nYou can get the names of your outputs by running: swaymsg -t get_outputs\noutput WLC-1 scale 2\noutput eDP-1 scale 2\nInput configuration\n\nExample configuration:\n\ninput \"2:14:SynPS/2_Synaptics_TouchPad\" {\ndwt enabled\ntap enabled\nnatural_scroll enabled\nmiddle_emulation enabled\n}\n\nYou can get the names of your inputs by running: swaymsg -t get_inputs\nThe escape symbol \"\\\" has to be removed.\nRead man 5 sway-input for more information about this section.\nKey bindings\n\nBasics:\n\n# start a terminal\nbindsym $mod+Return exec $term\n\n# kill focused window\nbindsym $mod+Shift+q kill\n\n# start your launcher\nbindsym $mod+d exec $menu\n\n# Drag floating windows by holding down $mod and left mouse button.\n# Resize them with right mouse button + $mod.\n# Despite the name, also works for non-floating windows.\n# Change normal to inverse to use left mouse button for resizing and right\n# mouse button for dragging.\nfloating_modifier $mod normal\n\n# reload the configuration file\nbindsym $mod+Shift+c reload\n\n# exit sway (logs you out of your wayland session)\nbindsym $mod+Shift+e exit\n\n\nMoving around:\n\n# Move your focus around\nbindsym $mod+$left focus left\nbindsym $mod+$down focus down\nbindsym $mod+$up focus up\nbindsym $mod+$right focus right\n# or use $mod+[up|down|left|right]\nbindsym $mod+Left focus left\nbindsym $mod+Down focus down\nbindsym $mod+Up focus up\nbindsym $mod+Right focus right\n\n# _move_ the focused window with the same, but add Shift\nbindsym $mod+Shift+$left move left\nbindsym $mod+Shift+$down move down\nbindsym $mod+Shift+$up move up\nbindsym $mod+Shift+$right move right\n# ditto, with arrow keys\nbindsym $mod+Shift+Left move left\nbindsym $mod+Shift+Down move down\nbindsym $mod+Shift+Up move up\nbindsym $mod+Shift+Right move right\n\n\nWorkspaces:\n\n# switch to workspace\nbindsym $mod+1 workspace 1\nbindsym $mod+2 workspace 2\nbindsym $mod+3 workspace 3\nbindsym $mod+4 workspace 4\nbindsym $mod+5 workspace 5\nbindsym $mod+6 workspace 6\nbindsym $mod+7 workspace 7\nbindsym $mod+8 workspace 8\nbindsym $mod+9 workspace 9\nbindsym $mod+0 workspace 10\n# move focused container to workspace\nbindsym $mod+Shift+1 move container to workspace 1\nbindsym $mod+Shift+2 move container to workspace 2\nbindsym $mod+Shift+3 move container to workspace 3\nbindsym $mod+Shift+4 move container to workspace 4\nbindsym $mod+Shift+5 move container to workspace 5\nbindsym $mod+Shift+6 move container to workspace 6\nbindsym $mod+Shift+7 move container to workspace 7\nbindsym $mod+Shift+8 move container to workspace 8\nbindsym $mod+Shift+9 move container to workspace 9\nbindsym $mod+Shift+0 move container to workspace 10\n# Note: workspaces can have any name you want, not just numbers.\n# We just use 1-10 as the default.\n\n\nLayout stuff:\n\n# You can \"split\" the current object of your focus with\n# $mod+b or $mod+v, for horizontal and vertical splits\n# respectively.\nbindsym $mod+b splith\nbindsym $mod+v splitv\n\n# Switch the current container between different layout styles\nbindsym $mod+s layout stacking\nbindsym $mod+w layout tabbed\nbindsym $mod+e layout toggle split\n\n# Make the current focus fullscreen\nbindsym $mod+f fullscreen\n\n# Toggle the current focus between tiling and floating mode\nbindsym $mod+Shift+space floating toggle\n\n# Swap focus between the tiling area and the floating area\nbindsym $mod+space focus mode_toggle\n\n# move focus to the parent container\nbindsym $mod+a focus parent\n\n\nScratchpad:\n\n# Sway has a \"scratchpad\", which is a bag of holding for windows.\n# You can send windows there and get them back later.\n\n# Move the currently focused window to the scratchpad\nbindsym $mod+Shift+minus move scratchpad\n\n# Show the next scratchpad window or hide the focused scratchpad window.\n# If there are multiple scratchpad windows, this command cycles through them.\nbindsym $mod+minus scratchpad show\n\n\nResizing containers:\n\nmode \"resize\" {\n    # left will shrink the containers width\n    # right will grow the containers width\n    # up will shrink the containers height\n    # down will grow the containers height\n    bindsym $left resize shrink width 10 px or 10 ppt\n    bindsym $down resize grow height 10 px or 10 ppt\n    bindsym $up resize shrink height 10 px or 10 ppt\n    bindsym $right resize grow width 10 px or 10 ppt\n# ditto, with arrow keys\nbindsym Left resize shrink width 10 px or 10 ppt\nbindsym Down resize grow height 10 px or 10 ppt\nbindsym Up resize shrink height 10 px or 10 ppt\nbindsym Right resize grow width 10 px or 10 ppt\n\n# return to default mode\nbindsym Return mode \"default\"\nbindsym Escape mode \"default\"\n\n}\nbindsym $mod+r mode \"resize\"\n\nStatus Bar:\n\nRead man 5 sway-bar for more information about this section.\nbar {\n    position top\n    colors {\n        statusline #ffffff\n        background #323232\n        inactive_workspace #32323200 #32323200 #5c5c5c\n    }\n}\nYou may want this:\n\ninclude ~/.config/sway/conf.d/*\n\nProtip:\n\ninclude ~/.config/sway/hostname/*\n```\nNotes\nI saw this same behavior when trying to run firefox under weston without enabling xwayland. I've also been having issues running other X applications (google chrome, emacs), so it may be that xwayland is not working correctly.. I see the same behavior with and without HiDPI.. I see the same behavior with and without HiDPI.. Sway log: swaylog.txt\nFirefox core dump: coredump.zip\n. Sway log: swaylog.txt\nFirefox core dump: coredump.zip\n. Firefox version is 50.1.0. Firefox version is 50.1.0. I just updated to the latest version of sway from the Arch repos and can confirm that this still happens with sway version sway version  (2016-12-27, branch \"\").. I just updated to the latest version of sway from the Arch repos and can confirm that this still happens with sway version sway version  (2016-12-27, branch \"\").. @Timidger I just tried out Firefox on Way Cooler and it ran fine. I think it is some sort of issue specifically with Sway and XWayland, but I have no idea how to go about diagnosing that. Do you have any suggestions?. @Timidger I just tried out Firefox on Way Cooler and it ran fine. I think it is some sort of issue specifically with Sway and XWayland, but I have no idea how to go about diagnosing that. Do you have any suggestions?. @hesiod I haven't set GDK_BACKEND to anything, although I did try setting it to wayland temporarily when I was first troubleshooting. Running Sway as GDK_BACKEND=x11 sway does seem to allow Firefox to run. Unfortunately it also forces every other GTK app to run through X, even those which support Wayland directly. Trying to just run Firefox as GDK_BACKEND=x11 firefox while in Sway doesn't work. I guess this leaves two questions:\n\nIs there a way to run just those apps which don't support Wayland under X, rather than every GTK app?\nIs this the intended behavior of Sway with no GDK_BACKEND set? It's inconsistent with the default behavior of e.g. Weston and Way-Cooler.. \n",
    "hesiod": "@wkunkel: Have you set GDK_BACKEND to wayland (as suggested in the sway wiki)? Firefox segfaults on my machine if I try to run without GDK_BACKEND=x11, I think its simply because Firefox doesn't support Wayland yet.. ",
    "bananaoomarang": "Likely related: \nhttps://github.com/Cloudef/wlc/issues/210. ",
    "lnjX": "I updated (via. git checkout 0.11-rc1), runned cmake (without errors) and make -j4:\n[ 95%] Building C object sway/CMakeFiles/sway.dir/ipc-server.c.o\n[ 96%] Building C object sway/CMakeFiles/sway.dir/layout.c.o\n[ 97%] Building C object sway/CMakeFiles/sway.dir/main.c.o\n/opt/sway/sway/main.c:12:28: fatal error: sys/capability.h: Datei oder Verzeichnis nicht gefunden\n #include <sys/capability.h>\n                            ^\ncompilation terminated.\nsway/CMakeFiles/sway.dir/build.make:2270: die Regel f\u00fcr Ziel \u201esway/CMakeFiles/sway.dir/main.c.o\u201c scheiterte\nmake[2]: *** [sway/CMakeFiles/sway.dir/main.c.o] Fehler 1\nmake[2]: *** Es wird auf noch nicht beendete Prozesse gewartet...\n[ 97%] Building C object sway/CMakeFiles/sway.dir/output.c.o\nCMakeFiles/Makefile2:369: die Regel f\u00fcr Ziel \u201esway/CMakeFiles/sway.dir/all\u201c scheiterte\nmake[1]: *** [sway/CMakeFiles/sway.dir/all] Fehler 2\nMakefile:127: die Regel f\u00fcr Ziel \u201eall\u201c scheiterte\nmake: *** [all] Fehler 2\nNow, I got this error. (the message is in german, I can translate, if you need something in English)\nAre there new dependencies?. I'm using Debian Sid.\nI searched for the package:\nlnj@ceres ~$ apt-file search \"sys/capability.h\"\ndietlibc-dev: /usr/include/diet/sys/capability.h\nlibcap-dev: /usr/include/sys/capability.h\nlibklibc-dev: /usr/lib/klibc/include/sys/capability.h\nlnj@ceres ~$\nIt's libcap-dev, now it's building correctly! :smiley: . ",
    "johalun": "I also had problems with freezing at kqflxw. Haven't really dug into it yet. I've been away for a while but I have some time this week to experiment. Is the hang using EGL, shared memory or both?  @myfreeweb . I also had problems with freezing at kqflxw. Haven't really dug into it yet. I've been away for a while but I have some time this week to experiment. Is the hang using EGL, shared memory or both?  @myfreeweb . How about using cmsgcred? \nhttp://stackoverflow.com/questions/8104904/identify-program-that-connects-to-a-unix-domain-socket. How about using cmsgcred? \nhttp://stackoverflow.com/questions/8104904/identify-program-that-connects-to-a-unix-domain-socket. > \u2026does the exact same thing (LOCAL_PEERCRED) which is uid/gid only, pid = 0. (In the current patch).\nThis is interesting. Exactly what implications does this have for Wayland? Maybe we need to fix this patch to use correct pid as well. Can it be related to the freezing? \n. > \u2026does the exact same thing (LOCAL_PEERCRED) which is uid/gid only, pid = 0. (In the current patch).\nThis is interesting. Exactly what implications does this have for Wayland? Maybe we need to fix this patch to use correct pid as well. Can it be related to the freezing? \n. > IN THE CODE THAT DOES THE MESSAGE SEND/RECV\nSend/Recv between what exactly?  WLC do open a socketpair and use for communication between parent and child process, is this what you're looking for? \nEdit: Sway don't open any sockets?\n. > IN THE CODE THAT DOES THE MESSAGE SEND/RECV\nSend/Recv between what exactly?  WLC do open a socketpair and use for communication between parent and child process, is this what you're looking for? \nEdit: Sway don't open any sockets?\n. @myfreeweb Will you handle these issues or is there something you want me to do (since I been working on this before..)? Ps, I like your rusty-sandbox :) Rust FTW!  \nEdit: Think I will have some time during next week.. @myfreeweb Will you handle these issues or is there something you want me to do (since I been working on this before..)? Ps, I like your rusty-sandbox :) Rust FTW!  \nEdit: Think I will have some time during next week.. > yeah, please update the ports (sway, wlc, wayland-protocols\u2026)\n@myfreeweb  Do you mean only the ports (Makefile etc), or required changes to the source codes as well?\n. Oh that's interesting.. I wonder where that is. Well, thanks for the info!. Yep will do\n. Returning directly with CMD_SUCCESS from handle_command() also cause freeze if I press mod+enter a few times..  I get a lot (almost 100) log output from one keypress often as well.. Usually that's when it freezes.. This might be solved by updating wayland & wlc.. Hang on. . Problem solved. Not related to sway.. That would surely get rid of one of the \"towers\".  The other issue is that wlc is uploading buffers to the GPU when it doesn't have to. . After fixing 6-7 files manually I gave up and replace everywhere. I'll give it another shot.. Fixed.. 0.14-rc3 unmodified on FreeBSD12-CURRENT with clang 4.0.0\nWill investigate further after lunch.\n[ 96%] Building C object swaybar/CMakeFiles/swaybar.dir/event_loop.c.o\n/home/johannes/dev/sway/swaybar/event_loop.c:99:24: error: comparison of distinct pointer types ('timer_t' (aka 'struct __timer *') and\n      'const timer_t *' (aka 'struct __timer *const *')) [-Werror,-Wcompare-distinct-pointer-types]\n        if (timer_item->timer == timer) {\n            ~~~~~~~~~~~~~~~~~ ^  ~~~~~\n/home/johannes/dev/sway/swaybar/event_loop.c:130:17: error: implicit declaration of function 'timer_getoverrun' is invalid in C99\n      [-Werror,-Wimplicit-function-declaration]\n                int overrun = timer_getoverrun(item->timer);. Hmm I'm getting some weird behavior where the background is treated as a regular window. \nI.e., when I start sway and can see the blue background image and as I launch a program, the background is shrunk and moved to left half of the screen while my new window is on the right half of the screen.. . @SirCmpwn What kind of security config? Does swaybg need SUID root? Currently I only set 'sway' binary SUID root. . I have permit /usr/local/bin/swaybg background in /usr/local/etc/sway/security.d/00-defaults and no error message in the log (output of sway command).. Hmm, -d gave this: \n07/08/17 20:47:39 - [security.c:133] WARNING: unable to read /proc/0/file for security check. Using default policy.\nMaybe need some FreeBSDification. \n. Oh, for every mouse event I get \n07/08/17 20:47:39 - [security.c:133] WARNING: unable to read /proc/0/file for security check. Using default policy.. Ok, so this is what we need to do: \nhttp://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/ch15lev1sec8.html\nI can implement it on Monday (possible tomorrow Sunday). . Great. Just a note, a log output or error message instead of silently failing on non-linux OS would be nice :)\nEdit: paste this\n```\nstatic pid_t get_client_pid(int client_fd) {\n// FreeBSD supports getting uid/gid, but not pid\nifdef linux\nstruct ucred ucred;\nsocklen_t len = sizeof(struct ucred);\n\nif (getsockopt(client_fd, SOL_SOCKET, SO_PEERCRED, &ucred, &len) == -1) {\n    return -1;\n}\n\nreturn ucred.pid;\n\nelse\nreturn -1;\n\nendif\n}\n. @SirCmpwn  Hmm, this wasn't so easy after all without modifying the client code. Maybe go ahead with the release while I figure out how to solve this. . Simply doing\nifdef FreeBSD\nreturn IPC_FEATURE_ALL;\n\nendif\n```\nin get_*_policy_mask() and it seems to work fine. For now anyway. Not sure what default policy we should use. \nThere seem to be a consensus that getting the PID via socket and using that for security is a bad thing. The PID can have changed and is being used by another process so there's a race condition (although time frame for that to happen is minimal...) \n. Btw, how do I set default config in security config file? \nEdit: never mind, found it. \nBy adding /usr/local/etc/sway/security.d/10-freebsd:\npermit * fullscreen keyboard mouse background screenshot panel lock \nI achieve the same results. \n. Yeah, in Sway there shouldn't be any problems. But imagine someone hanging on to a pid of a crashed client, could have some unwanted  consequences if the pid is reused by another program.. This will be tricky to solve without having the clients sending pid or binary path info to the compositor :( \nEdit:  Instead of #ifdef linux maybe we can simply do #ifdef SO_PEERCRED? \n. Sorry my question was confusing since its a double pointer :) \nIs my PR correct or should we take address of lhs object?  i.e.\n if (&timer_item->timer == timer). Ok. Yeah makes more sense. . Closing this in favor of new PR.. Yes, it works without changing 'commands'.  Fixed. . For now it's only one file, ipc-server.c. Maybe can make some exception for that file. The other files are ok with bumping xopen source to 700. . Maybe this is the culprit? \nset(CMAKE_C_STANDARD 99)\nSetting c99 basically hides everything on FreeBSD.. \n```\nelif defined(_C99_SOURCE)  / Localism to specify strict C99 env. /\ndefine __POSIX_VISIBLE     0\ndefine __XSI_VISIBLE       0\ndefine __BSD_VISIBLE       0\ndefine __ISO_C_VISIBLE     1999\ndefine __EXT1_VISIBLE      0\n```. No, 11 is the same. \nHere's a Q/A about similar issues. \nhttps://lists.freebsd.org/pipermail/freebsd-standards/2004-March/000474.html\nand the source\nhttps://github.com/freebsd/freebsd/blob/master/sys/sys/cdefs.h#L748-L773. It's working for now, although not an elegant solution. . Maybe it would be nice if these macros could be defined in the cmake config files instead of headers. \nEdit: Then we just skip them all together on freebsd - no reason to be compatible with an old system that doesn't even support wayland... . Changed to not freebsd and added a comment so we'll know why. maybe there's a better solution but this is what I got so far.. . @myfreeweb \n\ndefine __BSD_VISIBLE 1\n\nIt solves the problem but I don't think we should define things that are internal to the implementation. . Oh this is interesting.. Setting WLC_XWAYLAND=0 and it works. I can even launch programs like terminal with $mod+enter.\nXwayland is a bit flaky on freebsd. Might be it causing problems. \nhttps://pastebin.com/KSRygZGR\n. Xwayland stays on 50% cpu usage so something is wrong. Probably nothing to do with wlc/sway. . Is Xwayland working on Linux properly? . Most likely Xwayland issue on FreeBSD. . I'm not sure about the state of Nvidia. It's been a long time since I used it... I can ask around.. I'll look into it.\n. ",
    "lambdafu": "Mh, the donations list says \"project not specified\", but the 40 bucks I just gave are supposed to be for \"Xembed (tray icons) in Xwayland and wlc\". Thanks for setting this up :). ",
    "NBonaparte": "Regarding the XEmbed/tray feature, would it be more beneficial to recommend using something like xembed-sni-proxy instead of fully implementing XEmbed? That way, there will be less work involved as we only have to implement SNI.. ",
    "illdefined": "In case anyone wants to implement full touchscreen support in wlc/sway (Cloudef/wlc#172) but is lacking the necessary hardware to test it, I would be willing to donate a Lenovo YOGA 300 or a similarly priced alternative to them. I\u2019d love to see touchscreens work in sway, but unfortunately I don\u2019t have the time to do it myself.. ",
    "nh2": "@illdefined The world is a small place, you browse random projects and always the same people turn up.. ",
    "maxanier": "Unfortunately, my recent Bitcoin donation has not been successful. \nI got an email from Stripe saying \"Drew DeVault has been unable to complete your order and would like to refund you by sending Bitcoin to a refund address.\". ",
    "ghallberg": "Should this be updated to reference wlroots instead of wlc?. ",
    "WaltWatt": "@SirCmpwn in case no one has pointed it out by now the CapsLock/Ctrl/Escape functionality (exactly as described by the anonymous donor above) is quite reliably provided by this:\nhttps://gitlab.com/interception/linux/plugins/caps2esc\nThe author is also maintaining  an Archlinux package on AUR:\nhttps://aur.archlinux.org/packages/interception-caps2esc\nThe solution works independently of gui (X or wayland window managers). I have been using it with (and without) sway or i3 for quite a while now without any problems.\n. Sorry about the links. Don't understand how I did it. Corrected.\nI commented only with hope that this info somehow would get to the donor. Was not refering to the bounty. . ",
    "IAPR": "It is possible to create a new function which encapsulates the universal code used to generate the error messages. Insde the function we can also check if strings were allocated and try to send a different kind of error message if allocation failed.. Well, not encapsulate but create a function for it. There are 5 different implementations of the code.. ",
    "cyphar": "I did a bit of research using the documentation as a reference. Effectively the way this is implemented (I don't use this feature at all) is this:\n\n\nWhen generating the i3-save-tree output it includes all of the obvious information about container placement and so on -- which for us would just be a matter of recursively walking down the tree.\n\n\nHowever, it includes \"swallowing\" information which is effectively a set of regular expressions that matches WM_CLASS (which is a tuple of (instance, class)), _NET_WM_NAME (title) and WM_WINDOW_ROLE (window role). When a program is started in an i3 session and it matches all of the \"swallowing\" information, it will place that program in the loaded pane.\n\n\nThe swallowing information is actually an array, so you can create OR'd matches.\n\n\nNote that the output of i3-save-tree is not actually standard-conformant JSON. IMO we should not follow their lead, and we should always output standard compliant JSON.\n\n\nSo from what I can see there are a few things we need to implement and/or consider:\n\nIs there a nicer way of implementing \"swallowing\" in Wayland than in X? The above seems quite hacky to me.\nWhat is the analogy for WM_CLASS, _NET_WM_NAME and WM_WINDOW_ROLE in the Wayland (and wlc) protocols?\nWe need to implement the concept of a \"swallowing\" window, which is effectively an empty window which is \"busy\".\nNeed to create protocol endpoints for communicating about generating the JSON blob.\nNeed to augment the configuration to allow you to append_layout (source a JSON blob and add it to the current layout).. Yeah, it worked when I tested it too. I think it's because the keypresses are sent to the frontmost wlc view?. \n",
    "mahmoudhossam": "@SirCmpwn Any specific reason why?. ",
    "flux242": "it's a shame that this great i3 feature is dropped simply because \"I'm too lazy to implement something I personally do not use\". Please tell me how am I suppose to do swallowing in a script? How do I assign a program window to a specific layout window using IPC? If I start a program I only know its process id and what is available in the /proc/proc_id. . give an IPC command example please of moving a program window into a specific layout window on a workspaceX. right, why there can't be a method that does exactly this if it is so easy? It would just have to parse a layout file additionally, right? Now using your approach what would I do if I wanted to change my layout a bit, like resize here and there provided that my layout is a little bit more complex rather that just 3 windows? Currently I just have to resize and overwrite my layout file. And btw I'm inside of a bash script so how do I get an IPC notification? . nope, I'm not going to implement a script because\n\nIt's too complicated and hacky\n\nwithout proper support from underlying framework. Your script \"example\" could only work for very simple layouts. It's because if you have a generic layout description you'd have to start with a specific program window traversing the layout up the tree trying to figure out where that window would land in the end and how the inverted IPC command chain would look like. \nbtw feature that allows restoring a complex working environment (up to starting terminals with specific commands) just by a keyboard shortcut brings rather huge benefit than \"too little benefit\". Lacking such a feature is a road block for me => no switching from i3. Chusikowski. ",
    "Streetwalrus": "I agree that i3's implementation of this feature has its own set of shortcomings. However, the proposed alternative of using IPC feels rather clunky since all it allows is akin to replaying a keyboard macro.\nA more powerful alternative would be to extend the API to allow passing a tree of existing windows referenced by ID or criteria, with optional hints for layout and sizing, and have sway apply that atomically.\nThis would feel much cleaner than i3's swallow windows (which can only capture windows that do not yet exist), while providing equivalent, if not more flexible functionality.\nNote that my proposal differs from i3 in two ways:\n- i3 expects a path to a JSON file containing the layout. This is dumb, the entire layout should be passed over IPC instead. Clients may choose to read a layout from a file, but that's up to them.\n- When you call append_layout, i3 spawns placeholder windows, and stores the criteria in the container tree. When a new window is mapped and i3 attempts to manage it, it searches the tree for a matching placeholder and substitutes the first positive match. This requires special handling in various components of the window manager, and can't operate on existing windows.\nMy proposal is rather self-contained: since it should operate on existing windows, everything can be done immediately in the command handler, without having to spawn placeholders and/or store additional metadata in the tree.. That's all I needed to hear. I would gladly write this feature myself, but I'm currently focusing on other projects so i3 is still my daily driver for now. I'll probably come back to it later, unless someone else is interested in doing it before me.. ",
    "levimake": "\nThat was beyond fast. Thank you @SirCmpwn!\n\nHow to make screen capture from that ? Can you explain ?. ",
    "howdoicomputer": "@levimake Oh, sorry. I was more replying to how quickly he replied to the thread. At the time, he replied 30 seconds or so after I had posted my question. I was very appreciative.\nUnfortunately, I never figured out how to get something together. I ended up dropping Sway because of it, actually. I needed to use screen sharing applications for work related reasons and so I moved back to i3.. ",
    "j39m": "Here's the snip from the system log. Doubtful this will help, but all the same:\nDec 23 16:08:00 flaglock3 audit[8792]: ANOM_ABEND auid=1000 uid=1000 gid=1000 ses=6 subj=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023 pid=8792 comm=\"quodlibet\" exe=\"/usr/bin/python2.7\" sig=11\nDec 23 16:08:00 flaglock3 kernel: quodlibet[8792]: segfault at 21 ip 00007f82b4884575 sp 00007ffd79df0210 error 4 in libX11.so.6.3.0[7f82b47f3000+138000]\nDec 23 16:08:01 flaglock3 abrt-hook-ccpp[8799]: Process 8792 (python2.7) of user 1000 killed by SIGSEGV - dumping core\nDec 23 16:08:01 flaglock3 dhclient[8780]: XMT: Info-Request on wlp4s0, interval 4050ms.\nDec 23 16:08:01 flaglock3 /usr/libexec/gdm-wayland-session[8685]: /bin/bash: line 1:  8792 Segmentation fault      (core dumped) quodlibet\nDec 23 16:08:01 flaglock3 abrt-server[8800]: Deleting problem directory ccpp-2016-12-23-16:08:01-8792 (dup of ccpp-2016-12-23-16:07:39-8524). Coredump xzipped and then zipped (to appease Github).\n\n1009.zip\n. Closing because it looks like a QL bug. The same crash happens in weston and can be worked around with GDK_BACKEND=x11 quodlibet.... ",
    "fpqc": "Answer: Don't use GNOME terminal. Michael Fornay's port of st to pure Wayland sends selected text directly to the clipboard, and I also implemented OSC 52 support (in the clipboard branch) if you use tmux inside it.\nUnfortunately there is a minor problem getting st-wayland running on sway, but as always, patches are welcome.  GNOME-Terminal is doing it wrong, and so is libvte.. @Hi-Angel The primary clipboard should not be implemented.  It was a terrible idea to start with.  The way that st does things is correct: Drag-selection in terminal emulators should save text to the clipboard in Wayland.  In other applications, it shouldn't do so.  You're much more likely to be able to get st working under sway in the near future than convincing the GNOME people to fix their software.  Maybe @SirCmpwn  has an obvious patch for sway to make st work, but if not, the incompatibility is coming from using a different version of xdg-shell: https://github.com/michaelforney/st/issues/6. @Hi-Angel There is no reason why selecting text in a web-browser should copy to the PRIMARY.  There is no reason why selecting text in a file manager should set the PRIMARY.  There is literally no time you ever want to set a clipboard on selection outside of a terminal emulator.\nIn st for Wayland, middle click still pastes, but it pastes the Wayland clipboard.  Selecting text still sets a clipboard, but it sets the Wayland clipboard instead of of the PRIMARY.  The behavior of copying/pasting should be the same everywhere but in terminal emulators, and this is what you get if you use st in Wayland.  \nThere's nothing stopping you from continuing to use Xorg if you really want 9 independent clipboards =p.. ",
    "akostadinov": "I was surprised to recently see how only few people know and use clipboard managers. This is an essential feature for me because I often times switch between things I have copied/selected. IMO we need a nicely working clipboard manager. Last time I tried it was flaky and I had to switch back to X11. Not sure this is the right place but I think it is very much an important use case to consider when designing copy/paste features.. I was surprised to recently see how only few people know and use clipboard managers. This is an essential feature for me because I often times switch between things I have copied/selected. IMO we need a nicely working clipboard manager. Last time I tried it was flaky and I had to switch back to X11. Not sure this is the right place but I think it is very much an important use case to consider when designing copy/paste features.. ",
    "interduo": "@akostadinov +1 I select in one place 10+ things and paste in another place. It saves me a lot of time with changing the places of copy and paste. It's main thing i go back sometimes to x11.. What's the status of resolving this issue? Why it's closed?. ",
    "frequem": "It's working on the latest rc. Sorry for the trouble.. ",
    "LeonardKoenig": "Well, it returns a window class but in case there are two different ones, it's not the one we want / i3 specifies.. I'm not sure whether it's the more canonical one, I've never really touched X. But if so, then it's a wlc issue, yes. Hm, it seems to be more of what we want if I read this correct:\n\nWM_CLASS Property\nThe WM_CLASS property (of type STRING without control characters) contains two consecutive null-terminated strings. These specify the Instance and Class names to be used by both the client and the window manager for looking up resources for the application or as identifying information. This property must be present when the window leaves the Withdrawn state and may be changed only while the window is in the Withdrawn state. Window managers may examine the property only when they start up and when the window leaves the Withdrawn state, but there should be no need for a client to change its state dynamically.\nThe two strings, respectively, are:\n\n\nA string that names the particular instance of the application to which the client that owns this window belongs. Resources that are specified by instance name override any resources that are specified by class name. Instance names can be specified by the user in an operating-system specific manner. On POSIX-conformant systems, the following conventions are used:\n\n\nIf \"-name NAME\" is given on the command line, NAME is used as the instance name.\n\n\nOtherwise, if the environment variable RESOURCE_NAME is set, its value will be used as the instance name.\n\n\nOtherwise, the trailing part of the name used to invoke the program (argv[0] stripped of any directory names) is used as the instance name. \n\n\nA string that names the general class of applications to which the client that owns this window belongs. Resources that are specified by class apply to all applications that have the same class name. Class names are specified by the application writer. Examples of commonly used class names include: \"Emacs\", \"XTerm\", \"XClock\", \"XLoad\", and so on. \n\n\nNote that WM_CLASS strings are null-terminated and, thus, differ from the general conventions that STRING properties are null-separated. This inconsistency is necessary for backwards compatibility. \n\n\nhttps://www.x.org/releases/X11R7.7/doc/xorg-docs/icccm/icccm.html#WM_CLASS_Property\nI'll make an issue on wlc. ",
    "rolojf": "The config file in ~/i3status/config has only the folowig\ngeneral {\n        colors = true\n        interval = 5\n}. and part of the same config file (attached as config.zip) has the following:\n```\nStatus bar uses custom script\nset bg  #323232\nset bgu #323232B0\nset fg  #ffffff\nset fgu #aaaaaa\nbar {\n        status_command custom_statusbar\n        position top\n        swaybar_command /usr/bin/swaybar\n        pango_markup disabled\n        font pango:DejaVu Sans Mono 10\n        colors {\n            statusline $fg\n            background $bgu\n            focused_workspace $bgu #222222 $fg\n            active_workspace $bgu #222222 $fg\n            inactive_workspace $bgu $bgu $fg\n        }\n}\n```.  I copied this form the dotfile you shared and haven't fully reviewed all of it. \nMaybe that's it. I just  yesterday removed the lines refering to sr.ht. Maybe this custom_statusbar is some script you use but I don't have it properly configured.\n. Yes. That's was it. All ok now.. ",
    "gyakovlev": "you are quick =)\nI have not tried orbment, I can try to install it and test but probably it will take a lot of time. not ready for that right now. maybe next few days.\nyou mean those issues, right?\nhttps://github.com/Cloudef/orbment/issues/82\nhttps://github.com/Cloudef/orbment/issues/102. ok I tested orbment, it was faster than I imagined.\nit opens vt7 for me  and displays black desktop and a mouse (SUID, no capabilities set) but input devices don't work, but that's another issue I believe.. ",
    "willakat": "\nI was planning on adding an includable config file to obtain an Awesome-like config (I'm unsure where to drop it in the directory structure, maybe an examples directory?)\nwrt the \"move\" commands, I had something that seemed sensible at first but since I don't really use \"layouts within layouts\" other than for testing I'm unsure the behavior is intuitive (I also need to check whether I accidently broke it at some point).\nincnmaster/incncol are just a reuse of the same commands in awesome. So it's simple enough to switch to a different syntax. However incncol isn't strictly equivalent to changing the number of slaves (the number of slaves is simply #children - #masters), ncol is the number of \"groups\" over which all the slaves are distributed.\nauto_left to \"auto left\" does look better from a user standpoint. I'll add that to my todo list.\nresizing using the mouse isn't implemented. I was planning on having a look at it, but I first need a working understanding of how its handled in normal Sway.\nI haven't pitched this to i3 and actually hadn't really considered it (a friend of mine once was hoping to see some changes pushed into i3 to help with better KDE integration and these were rejected because they weren't in line with intended direction of development. Kind of a turn-off). I've been playing around with swaygrab but haven't encountered any SEGVs. I'm stumped as to what caused the parent pointer to get mangled. I could poke around the core file (if you kept it) and it would be interesting if this is a/ reproducible and b/ what sequence of actions preceded the crash.\n\nAs for the rest of the comments on the patch, I think I'm only missing the simplification bit (a few have been made, but nothing significant).\nRegarding reseting nb_master/nb_slave_groups when switching layouts, I would argue against since it's very convenient to switch back and forth to, say a tabbed layout, to use all the available space, and recover the child layout as it was prior to the switch.\nI also still need to push a sample Awesome-style config.. Regarding thejan2009's comment, the most recent batch of commits should address the issue. When inserting/removing a child in a container, the auto-layout will attempt to preserve sizes along the \"major\" axis. Along the \"minor\" axis, sizes are preserved for children that aren't promoted/demoted to a different group. In the latter case their size will match the spot vacated in the arrival group.. You're welcome! Many thanks for yours on Sway and to the other contributors.. done. done. renamed to \"move first\" (I actually had this change pending ... so I completely agree!). trying out \"spacemacs\", haven't yet looked into having it format using tabs only. For now fixed it up manually.. done. done. done. fixed. on todo list.... attempted to make things more consistent (used tabs exclusively). done. fixed. definitely. on todo list.. done. \"layout == L_NONE\" was to broad, replaced by \"layout == L_NONE && parent->type == C_CONTAINER\". This is intended to accept the MOVE_PREV/MOVE_NEXT directions regardless of the actual container layout.. grepped through the code for mixed tab/space indents and removed the ones I had put in.. done. done. ",
    "warlock90000": "ty SirCmpwn . ",
    "DerVerruckteFuchs": "I looked more into it and pulseaudio in general isn't working for some reason, even with i3. I'm not quite sure what happened. I was going to close this myself once I figured out what it was. It's very recent whatever caused it and I didn't notice it until I just recently played with sway again.. That seems to work just fine. It's not quite matching what i3 does with shortcuts, so that seems to need worked on I think. If I remember correctly, one of the goals for sway was to be able to use an i3 config file, which is what I used initially. Other than that though, it works.. After compiling the latest commit, I think libinput's palm rejection is preventing me from using my trackpad during games. If I press any keyboard keys, I have to wait a couple seconds before I can use my trackpad to move the camera. Mice work normally. I tried Heavy Bullets and Minecraft.\nIn general, palm rejection is a good idea for typing, but it would be nice if it could be disabled for games or other programs where using the trackpad/mouse and keyboard together at the same time make sense.\nI think disabling palm rejection when the mouse/pointer is captured/grabbed could be a good way to implement it. If I have a game open, then palm rejection is disabled so I can use my trackpad for camera movement. Then when I navigate to a Discord/IRC/other window, palm rejection is re-enabled for typing. Then when switching back to the game, palm rejection is disabled again and  I get my trackpad back for camera movement. A keybinding could be a secondary/alternative method of disabling/enabling palm rejection.\nI'm guessing this use case would be pretty niche since most people, including myself, would prefer a mouse in most gaming cases. In the event no mice are available, a trackpad would be nice in a pinch.\nedit: I can open a separate issue for this if needed/desired.. ",
    "natesymer": "I just encountered this bug myself, and I submitted an issue without reading yours. Oops. It's issue 1036.\nI provided more information about what code could be causing it.. Are you sure? Since you know more about the codebase than I, double check. I'd have more sanity checks in some of the functions I mentioned.\nIf it's not NULL, what could be causing this bug?. Maybe line 927 in container.c where the argument is not checked for NULL?. Has any progress been made?\nI get similar crashes too, I'm on the latest kernel. It only seems to happen when I have chromium open, and it happens only once or twice per day, it seems to have something to do with uptime.\nAlso, when I do get a crash, the only thing that works is a hard reset. Everything is completely frozen, or at least the video is frozen and everything else is still working.. Hey, what's some low-hanging fruit I could work on? I'm new to working on Sway.. Right, Gaps are implemented in sway 0.15, but I want to use the latest. Do you have plans to implement gaps in 1.0.0?. The builds.sr.ht builds failed because build/ is in the gitignore, and thus my changes to ninja.build are null and void.. I think I didn't do it perfectly, I'll look at it tomorrow morning. I looked at sway 0.1.5 and it seems inner gaps are applied on both sides of a view - I only did it on one side of a view. Let me know if you find any  bugs.. So I just fixed the command syntax. I'm tackling the damage issues as we speak.. Before I tackle the style issue with the enum, I realized I didn't implement inner gaps quite right. I wrote a new implementation. I can't figure out why with my implementation toggling the split mode erroneously re-applies gaps.\nI saw in sway/tree/layout.c that a new container is built to wrap any split container. Any advice?\n. Never mind. Took care of it myself. I'd say it's ready. @SirCmpwn, take a look at it.. @SirCmpwn so when will this get merged?. Say I launch sway and run two processes that display UI (swaymsg exec urxvt && swaymsg exec urxvt). Then, I focus one urxvt container. I then run swaymsg gaps inner current set 200. Then, in that container, I run swaymsg split toggle && swaymsg exec urxvt. Should the most recently created container have the same gaps as its sibling?. I trie i3-gaps, and it had different gaps semantics: all is the same, but there's no workspace - instead they use current. Should Sway match i3-gaps, or should it continue doing what it's currently doing?\nI personally wouldn't mind the hyper-precise and specific behavior I'm talking about; currrent should only apply to the current sway_container - not its children, siblings, etc.. @SirCmpwn Do things look good?. @SirCmpwn Even Sway 0.15 doesn't match i3-gaps.. @emersion Don't worry about it! Nothing about working on sway is a waste of my time. I squashed the merge conflict and rebased.. Just a question, how would I squash these commits together?. @emersion All prepared! Would you merge this?. Let me know what you think now, @emersion @SirCmpwn . There's currently a bug where a single C_CONTAINER container with multiple children would not get gapped under smart gaps. I've seen your comments, and I'm working on both.. This is to say that one of them is set to 0 for the duration of the floating window being on the screen. After it's gone, things return to normal.. Sorry, I'm coding for work too! Otherwise I'd be a lot better about adding details.\nAnother important tidbit is that whilst the floating window is focused, the gaps are not rendered right. While the floating window doesn't have focus (and a tiled one does), everything is normal.\nOpen chrome, bring up the save menu (ctrl+s), and then drag your mouse in and out of it. Also, try using the keybindings to change focus to and away from the floating save dialog/menu.\nFor clarity's sake: I have gaps, smart gaps, and smart borders enabled. I always use gaps so I forgot to mention.. I didn't use early returns because I'm personally opposed to them (they're less math-y). I can refactor it.. That makes sense, I've got a haskell/clojure background!. I was actually going to change the way gaps were set. Right now, too much of how gaps are removed depends on where the sway_container is. With things like flattening, some ugly bugs are going to pop up. I was going to change it so that a sway_container tracks gaps on each dimension (gaps_width, gaps_y, etc). This will make the remove_gaps() function smaller and more DRY.. If smart gaps are on and a second window is added to a workspace, damage gets left in the outer borders. This clears it.. The problem is that adding a container (by opening a terminal for example) to a workspace with a single container already in it only arranges the new container. If smart_gaps were on in this situation, the workspace would need to apply outer gaps.. Edge gaps must be enabled to have outer gaps. If disabled, workspaces have no gaps because workspaces only have outer gaps.. Ergo edge_gaps must be checked. It's cheap though.. ",
    "JerziKaminsky": "@SirCmpwn, lemon? I might go for this, If it isn't too yaccy.. @SirCmpwn , I'm about to submit an update to the policy validation thing as soon as #1184 is merged. I found an issue.. @calvinkosmatka , thanks for working on this. I was just about to open my own PR for this when I saw you beat me to it. Looking at the code was a bit uncanny, some telepathy might have been involved :). > The solution is probably to switch from having swaybar use the desktop-shell extension to become a panel and instead using a custom wayland extension. This extension should probably have three functions:\nWould it makes sense to also contact wayland upstream to try and get a compatible feature into a new version of the desktop-shell protocol? this isn't sway-specific, and although wayland protocols are great way for extending functionality, it's also a big risk for fragmentation when it comes to common functionality being exposed as a custom protocol for every wayland compositor. Someone will want to create a dock application that talks to more than one compositor.\n\nSimply making the panel transparent isn't going to cut it once you start placing it on top of other \nwindows, because it will still receive mouse events. \n\nI'm also very new to wayland, but isn't that what input regions are for?\nA.14.1.6. wl_surface::set_input_region - set input region\nThis request sets the region of the surface that can receive pointer and touch events.\nInput events happening outside of this region **will try the next surface in the server \nsurface stack**. The compositor ignores the parts of the input region that fall outside \nof the surface.\nIn particular, I'm thinking of the more general case where a dock isn't all-opaque or all-transparent (hidden), but hovers over application windows and has see-through areas. Like some of the more baroque Enlightenment contraptions (I prefer plain myself). So unless I misunderstood the spec, using input regions + transperancy would be more powerful and potentially require less new code.\n. > This is just a stop-gap measure until we implement the surface-layers protocol later on.\npostponed indefinitely. Also the solution you described is basically an extension that does desktop-shell(::panel) + a floating hint. So it's not crazy to just get floating into the desktop-shell protocol.\n. /usr/bin on my system has it's fare share of symlinks, there's nothing silly about that. The intended behavior is to treat symlinks as if they were missing files and give the user absolutely no indication of the fact except mysterious errors and bizarre UI effects? :man_shrugging: . > symlinks into your development directory, which is presumably under /home and readable only by you, is weird\nThere are no other users on my home machine, what's the difference (for dev purposes)? But nevermind.\n\nNothing we can do about that.\n\nnot even just checking if the permit target is a symlink when parsing the file and resolving them to the target bin?\n. Gladly, but can you clue me in on the reasoning? I can't make out the attack vector. If you're going to nuke it from space, what's the purpose of having such fine-grain control over IPC interactions per program?. > If you can write to a program that has security policies, then you can just overwrite it with a program \n\nwhose behavior is more sinister.\n\nSure but if you can't write to the program, why go through all the effort to sandbox it ? defense in depth I guess.\n. @SirCmpwn, ready for review.\nI reworked the whole thing and some positive collateral cleanup to existing code resulted.\nI've now spent quite a bit of effort on this, but that shouldn't prevent you from NAKing if you don't like it.\nI've reorganized the commit series so that everything up to and including validate_ipc_target() should be a no-brainer, and it implements the checks you wanted (root/chmod o-w) without doing anything else.\nAdd resolve_path util function is needed by the last commit, but separaed because it's a handy util function you might want to cherry-pick regardless.\nThe final commit Handle symlinks as IPC security targets is really the only commit that deals with the symlink issue at all. See the commit message for description and a longinh discussion about the race condition I mentioned earlier.\nHere's the test script I used (run from build directory, in X):\n```\n!/bin/sh\nsudo rm -f /usr/bin/swaybar2 /usr/bin/swaybar; sudo make -j 4 install > /dev/null\necho \"Standard config, should work\"\nsway\nsudo rm -f /usr/bin/swaybar2 ; sudo mv /usr/bin/swaybar /usr/bin/swaybar2; sudo ln -sf /usr/bin/swaybar2 /usr/bin/swaybar\necho \"symlink, should work\"\nsway\necho \"symlink to symlink, should work\"\nsudo rm -f /usr/bin/swaybar3 ; sudo mv /usr/bin/swaybar2 /usr/bin/swaybar3; sudo ln -sf /usr/bin/swaybar3 /usr/bin/swaybar2\nsway\nsudo rm /usr/bin/swaybar2\necho \"dangling symlink, should abort\"\nsway\nsudo rm -f /usr/bin/swaybar2 /usr/bin/swaybar; sudo make -j 4 install  > /dev/null\necho \"bad owner, should abort\"\nsudo chown user1:user1 /usr/bin/swaybar\nsway\nsudo rm -f /usr/bin/swaybar2 /usr/bin/swaybar; sudo make -j 4 install > /dev/null\necho \"bad perms, should abort\"\nsudo chmod o+w /usr/bin/swaybar\nsway\nsudo rm -f /usr/bin/swaybar2 /usr/bin/swaybar; sudo make -j 4 install > /dev/null\necho \"symlink is not a file, should abort\"\nsudo rm -f /usr/bin/swaybar2 ; sudo mv /usr/bin/swaybar /usr/bin/swaybar2; sudo ln -sf /usr/bin/swaybar /usr/bin/NOSUCHFILE\nsway\nsudo rm -f /usr/bin/swaybar*\nsudo make -j 4 install > /dev/null\n```\nI've spent this much time on it because it got delicate and therefore interesting, so fun. But I'd be the first to admit the result was more subtle than anticipated and maybe just barfing a log error on symlink (which was the alternative I suggested in #1172) might have been a suitable and far simpler solution.\nBut the resulting code cleanups are a win anyway, so something good did come out of it.\nThat said, as this point I think this PR does what it claims, and the test script should provide some confidence.\n. > I'm not really a huge fan of this distinction,\nit's really only there for documentation purposes, but I eliminated the renaming and played down the issue. Smaller patch.\n\nIt would be better to just resolve symlinks on policy creation and call it a day.\n\nThat statement is not at odds with what the code already did/does. I was worried that future contributors/changes would overlook the distinction, which is important because canonization needs to be done everywhere or it doesn't work, and this case has security implications. But you're a careful reviewer, so It's probably ok to just let it go.\n\nAlso, for development purposes it probably makes sense not to enforce that the binary is owned by \nroot for debug builds. Useful for i.e. hacking on swaybar.\n\nWrapped in #ifndef NDEBUG , else emits L_INFO and allows.\n. - You don't need to delete i3\n- Use sway -V or  sway -d to get a more detailed log\n- Tell us what wlc version you're using\n- Tell us what distro you're using\nThe problem seems  to be that when you use sudo it executes the program with a sanitized environment as a security measure. XDG_RUNTIME_DIR is unset, so sway/wlc can't locate the wayland socket that lives there in order to connect to the server. \nTry running without sudo first, then sett sway to setuid (it carefully drops privileges shortly after starting).\nBut this may be an actual bug IIUC that the wayland socket itself is created by sway as well.\n... and try to post a single detailed report instead of 6 comments within 5 minutes, it makes a bad impression. :)\nHope this helps.\n. @Artlant, rudeness actually carries very well across language barriers. :man_shrugging: . If anyone friendly can reproduce, please open a new issue so if it's real it can be fixed. \nAnd fwiw, sway is a joy of a codebase compared to some of the horrors I've waded in lately. Kudos to @SirCmpwn for both design and execution.. Sad to hear it, I needed it. Pushed.. Logging has its conventions and warnings are a standard thing. I needed something which signals a problem and is stronger than info. For example \"Security policy violated but this is a debug build\" feels like a warning to me, or \"Can't validate target, creating empty policy\". \n-V is verbose and it's hard to pick out the wheat from the chaff.  But I'll live.. That's a shitton of work. No thanks.. That's a shitton of work. No thanks.. Yeah, well you know the codebase backwards, but I'd have to be confident that I understand the context for every suspect log message. Too steep. If L_WARN makes sense -- merge it, if it doesn't -- don't.. Yeah, well you know the codebase backwards, but I'd have to be confident that I understand the context for every suspect log message. Too steep. If L_WARN makes sense -- merge it, if it doesn't -- don't.. How does making a new log level available \"affect the whole codebase\"? what code will it break exactly?. How does making a new log level available \"affect the whole codebase\"? what code will it break exactly?. You're right. Having all the messages which should be a warning report instead as INFO/ERROR would be a real problem, so I guess it's better to leave things as they are and have the messages which should be a warning report instead as INFO/ERROR.\nSeriously, there are 134 log INFO/ERROR messages in the codebase and auditing them one by one is simply not something I want to spend time on. If you can't live with stuff being printed exactly as they have been for a couple of years, ok. I hope someone else will step up in the future.. You're right. Having all the messages which should be a warning report instead as INFO/ERROR would be a real problem, so I guess it's better to leave things as they are and have the messages which should be a warning report instead as INFO/ERROR.\nSeriously, there are 134 log INFO/ERROR messages in the codebase and auditing them one by one is simply not something I want to spend time on. If you can't live with stuff being printed exactly as they have been for a couple of years, ok. I hope someone else will step up in the future.. Cute analogy but I think it misses some important points. Here's my own version:\nA man walks up to your house and offers to install a brand new shiny recycle bin, for free. \"It's eco-friendly,\" he says, \"and once installed you and your family and visitors can start using it for your recyclables instead of throwing them in the trash\". You reply \"That is indeed a handsome recycle bin, but I absolutely refuse to have it installed until you, the guy who is offering to install for free, go through my garbage can and place whatever recyclables are there into the new recycle bin.\". The man replies \"I don't like that idea at all,\" \"I had nothing to do with putting that garbage there, and I have better things to do then go through your garbage. Why don't you just accept the recycle bin, use it from now on, and if anyone walks by your house and sees this or that recyclable in your trash can, they can always fish it out and put it in the bin, if it bothers them.\" \"No,\" you say \"I wouldn't be able to sleep nights knowing that my trash possibly contains recyclables which are going to the landfill instead of the recycling center\". \"But you've been doing that for years!\" the man says, a little alarmed,  \"what's the difference? isn't it better to just start recycling from now on?\", \"No, I don't think so,\" you say, \"I'd simpler to not have the recycle bin installed in the first place and then I don't have to think about it.\" The man shrugs and walks away.... \n:man_shrugging: \n:walking_man:\n...\n. Cute analogy but I think it misses some important points. Here's my own version:\nA man walks up to your house and offers to install a brand new shiny recycle bin, for free. \"It's eco-friendly,\" he says, \"and once installed you and your family and visitors can start using it for your recyclables instead of throwing them in the trash\". You reply \"That is indeed a handsome recycle bin, but I absolutely refuse to have it installed until you, the guy who is offering to install for free, go through my garbage can and place whatever recyclables are there into the new recycle bin.\". The man replies \"I don't like that idea at all,\" \"I had nothing to do with putting that garbage there, and I have better things to do then go through your garbage. Why don't you just accept the recycle bin, use it from now on, and if anyone walks by your house and sees this or that recyclable in your trash can, they can always fish it out and put it in the bin, if it bothers them.\" \"No,\" you say \"I wouldn't be able to sleep nights knowing that my trash possibly contains recyclables which are going to the landfill instead of the recycling center\". \"But you've been doing that for years!\" the man says, a little alarmed,  \"what's the difference? isn't it better to just start recycling from now on?\", \"No, I don't think so,\" you say, \"I'd simpler to not have the recycle bin installed in the first place and then I don't have to think about it.\" The man shrugs and walks away.... \n:man_shrugging: \n:walking_man:\n...\n. > Why? In what situation does this occur? Seems to incur extra complexity to handle an unlikely scenario imo.\nRight now, a policy targeting a missing file prevents sway from starting up:\nsudo rm /usr/bin/swaybar\nsway\n04/20/17 20:17:55 - [permit.c:62] cmd_permit:Unable to resolve IPC permit target '/usr/bin/swaybar'. will issue empty policy\n04/20/17 20:17:55 - [security.c:156] Unable to allocate security policy\n./test.sh: line 20: 19485 Segmentation fault      (core dumped) sway -V\nThe policy allocators can currently only communicate with caller by returning a policy or NULL. \nOn the other hand allocators don't have the necessary context in order to perform policy decisions -- that's the caller's job (warn, don't give perms, ignore). This change puts the result of validation into new newly created policy so the caller can decide what to do.\nI think we do want to integrate validation down into the policy allocators, so that it's impossible to \"forget\" to do.\n\nA lot of changes seem to stem from that. \n\nnot really, I just took the opportunity to also tidy up.\n. > Why? In what situation does this occur? Seems to incur extra complexity to handle an unlikely scenario imo.\nRight now, a policy targeting a missing file prevents sway from starting up:\nsudo rm /usr/bin/swaybar\nsway\n04/20/17 20:17:55 - [permit.c:62] cmd_permit:Unable to resolve IPC permit target '/usr/bin/swaybar'. will issue empty policy\n04/20/17 20:17:55 - [security.c:156] Unable to allocate security policy\n./test.sh: line 20: 19485 Segmentation fault      (core dumped) sway -V\nThe policy allocators can currently only communicate with caller by returning a policy or NULL. \nOn the other hand allocators don't have the necessary context in order to perform policy decisions -- that's the caller's job (warn, don't give perms, ignore). This change puts the result of validation into new newly created policy so the caller can decide what to do.\nI think we do want to integrate validation down into the policy allocators, so that it's impossible to \"forget\" to do.\n\nA lot of changes seem to stem from that. \n\nnot really, I just took the opportunity to also tidy up.\n. > We should just ignore the policy and print a warning.\nWhat exactly do you mean by \"ignore\"? Earlier you asked that permit return an empty policy. It did and does.\n\nWe probably shouldn't abort, but we shouldn't defer validation\n\nWe don't.\n\nthat policy should have already been validated.\n\n\"checked\" or \"enforced\"? \nAnyway, right now if validation fails the allocator tells the caller it's out of memory. That's wrong. This PR fixes it. That's it.\n. > We should just ignore the policy and print a warning.\nWhat exactly do you mean by \"ignore\"? Earlier you asked that permit return an empty policy. It did and does.\n\nWe probably shouldn't abort, but we shouldn't defer validation\n\nWe don't.\n\nthat policy should have already been validated.\n\n\"checked\" or \"enforced\"? \nAnyway, right now if validation fails the allocator tells the caller it's out of memory. That's wrong. This PR fixes it. That's it.\n. > Returning NULL doesn't signal OOM. It just means it didn't work.\n\nthe only change I think is necessary is to avoid aborting if the target doesn't exist.\n\nHow will the caller tell the difference?\n. > Returning NULL doesn't signal OOM. It just means it didn't work.\n\nthe only change I think is necessary is to avoid aborting if the target doesn't exist.\n\nHow will the caller tell the difference?\n. > Why does the caller need to tell the difference?\nBecause an OOM is non-recoverable and a bad validation potentially is.\nYou seem to feel that the change needed to fix this is trivial and what I've done unnecessary, so I'm going to just close this and open an issue instead. You can deal with it as you think best.. > Why does the caller need to tell the difference?\nBecause an OOM is non-recoverable and a bad validation potentially is.\nYou seem to feel that the change needed to fix this is trivial and what I've done unnecessary, so I'm going to just close this and open an issue instead. You can deal with it as you think best.. Would it make more sense to stick with mode as the varname for mode config keyword and rename the binding mode var to binding_mode_indicator to match also? that seems like how the rest of the vars work, looking at sway-bar(5)\nbinding mode is not really a configuration option for bar and there's no config word for it, it's just a label published by sway itself for display. Just incidental that its stored in bar_config, because it doubles as a state object as well as a config store.\nWould also make the patch smaller.. Possible alternative: always subscribe to modifier events and ignore them when irrelevent.\nIf the user doesn't configure a bar modifier key, events won't be sent anyway, I think.. IIUC, this upgrades hidden_state from an internal state variable into a config option, and I'm not sure I understand why. hidden_state is just used a state variable for \"modifier pressed\" , isn't it? maybe I'm missing something.. defensive: assert instead of comment. Check for expected value and log unexpected values with L_ERROR instead?. I'll yield to compatibility concerns.\nUpdate:\n<wrongness removed>\nTurns out hidden_state=show acts as a hide_mode override, is bindable, and the config file sets the default value to override or not. So you can disable hide mode for a bit, then turn it on again,  and decide whether you start i3 with the override on. Three experienced users of i3, who are also devs have never used it, knew it's there, or understood what the hell it's for without mental back-flips once they met it. option creep, meh.\n@calvinkosmatka says mode changes from hide<->dock are bindable, so this doesn't even make tenuous sense. Probably just a vestigial from treating the config as scripted IPC.. > Don't take that approach. This way the user can choose not to use this feature and adjust their security configuration accordingly.\nI don't think security mandates one approach over another, the client must be free to ask for whatever it likes, It's the server that enforces policy and the client should deal. I think (and so did @calvinkosmatka, independently) that having the client ask for everything it wants, but use only what the server gives corresponds perfectly to the security model and would simplify matters.\nThis raises another point about client handling of security denials. In #1172 I saw that the server declined IPC, and swaybar carried on as if nothing happened, which I think is a problem.\nThat suggests that maybe the client should not subscribe to all events at once, but group them by their \"severity\". Some events are optional (modifier events), and some may be critical (abort if not available). \nFor example, being assigned mode hide and then denied modifier events is an error event IMO.\nSorry for causing so much discussion and of course I don't mean calvin has to deal with all the secondary issues himself simply because his PR exposed them. I'm glad to do a followup for the things calvin wants to consider out of scope here, assuming @SirCmpwn is interested.\nI'll switch to quiet mode now... :). Time of check/Time of use. The symlink could be switched under us from the time we validate to the time we create the policy. alloc_policy goes through the resolve independently, on purpose (for error reporting). . Wait, sway_assert doesn't abort??. Good catch, I was assuming readlink handled this, but I realize now that doesn't make sense.. resolve_path returns error only if malloc fails... . > No, i3 compatability\nsway introduces a security mechanism which doesn't exist in i3, so \"i3 compatibility\" can really apply only if security is off, otherwise it's new ground and subject to good judgment.. This was deliberate because it simplified handling of \"*\",  but I've changed it.. > Also, you should be storing the fully resolved symlink.\n\nAll symlink resolution should happen when the policy is parsed and never again.\n\nThat's what's stored in policy->program, yeah.\n\nSway should never abort at runtime, \n\ngot it. but this was during config parsing/startup. Anyway, the race condition couldn't be solved this way (it just moved it elsewhere) so I had to do things differently and this check eliminated now.\n. Fixed.. Done. Done.. Muscle memory. Until Sway becomes my focus project my default clang-format belongs to something else. \nFixed.. What I suggested was that the client send a separate SUBSCRIBE requests for [modifier] and for [mode,workspaces]. There's no wire-protocol or semantic changes involved, unless the i3 protocol state machine requires that the client only send a single subscribe request during its lifetime, is that the case? \nAnd even if it is (I'd be surprised), sway is certainly allowed to be a strict superset of i3 and  still be considered \"i3 compatible\".\n. Fixed. But the IPC protocol doesn't support UNSUBSCRIBE. So if you want to allow mode switching in the future, you'll have to deal with the situation where swaybar gets events it doesn't need (consider hide->dock). Might as well implement it to begin with. In fact this way, you avoid having to break compat with i3 protocol, because you won't need to extend its command set.\nAnd because i3 allows mode switching, but no unsubscribe, we can guess that this is the way i3/bar deals with this as well. So i3 compatibility almost requires that swaybar always subscribe to modifier events ;). Yes, I missed that. \nScenario: suppose a policy file indicates a reject target against a file which does not exist. if we ignore the resolve fail and use the verbatim policy target, and the target is then created as a symlink to elsewhere, the reject policy won't be found when get_pid_exe is used to look it up. \nHow do you want to handle that?. Done. You start in hide mode and subscribe to the events. You then switch into dock mode and the protocol doesn't allow unsubscribing. Presto, swaybar is still forced to deal with events it doesn't use in that mode. so...\n\nI still don't want swaybar asking for events that it doesn't need.\n\n...it might get them anyway in supported scenarios.. well, I never have, but I understood @calvinkosmatka to say i3 allows it.. @calvinkosmatka, suggestion:\nint parse_enum_string(const char** strings, int n, const char* s);\nThen put the variable part of the problem into static initialized arrays, then both these functions (and future ones) can just call into parse_enum_string, catch any error, and cast the return value.\nYou can use sizeof(char* mode_enums[])/sizeof(void*) to have the compiler compute n  for you\nfor each case. The compiler knows this value at compile-time.\n. Hmm. \nQuestions:\n1. Is this the best API looking ahead? How will someone add support for other modes to this? how much work will it entail? \n2. Is this restricted to panels only? remember, this is a wayland protocol. The object could potentially be any window. It might be cool to be able to set hide_mode for arbitrary windows (someday...). Must this mode be coupled to the \"placement\" semantics of a \"panel\"?\n3. Since the protocol supports enums, Is it necessary to tie the parameter/getter/setter to a specific mode? How about an API that uses a mode_id + param1/2/3/4. That's more extensible and keeps the protocol smaller.\n. True. And sizeof(mode_enums) / sizeof(mode_enums[0]) is even more correct.\nAnd sizeof(mode_enums) / sizeof(char *) still more correct because C allows empty arrays to be declared.\nAlso, there's no need for specialized functions at all. You can use a macro that takes\na name and picks out the right string array:\n```\nstatic const char *ss_enumA[];\ndefine ENUM_STR(NAME, S) parse (ss_enum ## NAME, sizeof(ss_enum ## NAME) / sizeof(char *), S)\nenum A val = ENUM_STR (A, \"FOOBAR\");\n```\nOnce merged, we should convert any similar code to make use of it.\n. > Macros - fuck no\nBS. boilerplate - fuck no.\nNothing eliminates bugs faster than deleting code. Don't be a zealot -- when exceptions make sense, make them.\n\nsizeof(mode_enums) / sizeof(char *) - no, doesn't work if the array uses anonymous structs \n(so I'd rather not establish a pattern that doesn't work everywhere)\n\nI don't understand how a char* enum_strings[] can \"use anonymous structs\". We're not talking about generic data structure here. And remember that calling the function means the compiler type-checks for this.\n. >  take a hardline stance on macros. I will reject pull requests that use them\nRegardless of context? I think that's wrong. Just because macros can be misused doesn't mean every particular use of them is misuse. cf. goto.  \n\nI've been pretty successful at making a codebase that's accessible to new contributors so far.\n\nNo argument here, but banning every use of macros had very little to do with it is my guess.\nIf you had 100 enums, would you prefer 100 boilerplate functions to a single macro?  Would that make for a cleaner codebase?\n\nI'd rather not establish a pattern that doesn't work everywhere\nIt doesn't necessarily bring any significant benefits to the table in this case but it works for \nmore situations\n\nUsing the correct type of a variable also works in all cases and is certainly not an anti-pattern.\nFor the record, sizeof is a compile-time operator so you can use whatever index you like when sizing an array element. 0,1, 2**31-1, it doesn't matter (I overlooked that earlier). \n. > Take it on faith that I know what I'm doing.\nHell no. If you can't/won't defend a contrary viewpoint, I'm not going to take that as proof you're right. But I do accept that in your project you get to decide such things (as I do in mine).\n\nWell, if the variable is an anonymous struct,\n\nBy which you mean \"But I implemented enum->string using anonymous structs in 60ce81e\".\nWell, my view is that you probably shouldn't have. Translating an enum into a string is a common operation so relying on an anon struct is a doubtful choice.\n. Thank god.. ",
    "bearcatsandor": "Thanks for helping a doofus!. Any chance this might make it into the roadmap, is it an addition that you'd accept?. The pointer does come back if i move it outside the boundries of the app in question, but it takes ~5 seconds of travel.. Didn't you know? Open Source means that we have full access to the code so that others can fix it for us when we complain!. If they don't know C, they can't submit a patch. Should they not have reported the bug?. Thank you @embik. I'll check that out.. You could fire up a wayland based terminal with a specified geometry and\nplacement that is running fzf inside it.  Here's an example in a blog post\nabout it:  https://medium.com/njiuko/using-fzf-instead-of-dmenu-2780d184753f\nOn Sat, Sep 23, 2017 at 12:38 AM, gnidorah notifications@github.com wrote:\n\nHi.\nIs there any application launcher for Sway that doesn't require xwayland?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/1367, or mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AADgP3_8jq_dAO1l6WHwGcOPBpAJelhWks5slKdJgaJpZM4PhdpL\n.\n\n\n-- \nBearcat M. \u015e\u00e1ndor\nFeline Soul Systems LLC\nVoice: 872.CAT.SOUL (872.228.7685)\nFax: 406.235.7070\n. For what it's worth, i'm no longer having focus issues with rofi after upgrading to 1.4.1.. ",
    "willd": "@Airblader Unfortunely only switches between specific workspaces, I cannot see a way to make it work across two generic workspaces :(\n@SirCmpwn A good start anyway! I'll poke around and see if there's anything I can do :). workspace back_and_forth seems to be working alright for me. Do you want me to keep the issue open until the command has been documented, or the bugginess you mentioned have been resolved?. ",
    "AndreRoehrig": "I took an example, where workspace 3 is on the wrong screen.\n[\n   {\n     \"id\": 1,\n     \"name\": \"eDP-1\",\n     \"rect\": {\n       \"x\": 0,\n       \"y\": 0,\n       \"width\": 3200,\n       \"height\": 1800\n     },\n     \"visible\": true,\n     \"focused\": false,\n     \"active\": true,\n     \"primary\": false,\n     \"layout\": \"output\",\n     \"type\": \"output\",\n     \"current_workspace\": \"2\",\n     \"scale\": 2\n   },\n   {\n     \"id\": 3,\n     \"name\": \"DP-1\",\n     \"rect\": {\n       \"x\": 3200,\n       \"y\": 0,\n       \"width\": 1920,\n       \"height\": 1080\n     },\n     \"visible\": true,\n     \"focused\": false,\n     \"active\": true,\n     \"primary\": false,\n     \"layout\": \"output\",\n     \"type\": \"output\",\n     \"current_workspace\": \"3\",\n     \"scale\": 1\n   }\n ]. Yes, thank you, this fixed the problem. Could imagine this being a common error when i3-configs are copied. Is there a similarly basic reason for why I cannot move my mouse from one screen to the other?. ",
    "kaueraal": "I don't have too much knowledge about the inner workings of wayland or wlm or sway and I'm not too sure how much is handled in wlm or the layers below it, so treat the following with caution.\nAs far I understand the wayland protocol you have actually two scaling variables and nothing actually forces per-output scaling. Wayland simply allows per-output scaling, something X11 doesn't.\nAccording to the protocol there is wl_output::scale and wl_surface::set_buffer_scale.\nThe first one allows a client to get the global scaling which should be applied. As far I can tell nothing in the spec forces this to be consistent between different clients (although Xwayland may be an issue). The second one allows a client to signal that it renders its content already in some way scaled. This is more or less the problem, as X11 applications won't do it.\nWhen the client has something rendered the compositor should scale the window content by wl_output::scale/buffer_scale so the globally wanted scale is achieved. Nothing stops the compositor to do different things. This e.g. allows scaling by a non-integral factor by simply using a different scale value later as advertised to the client (which seems something wlc already does: https://github.com/Cloudef/wlc/issues/57#issuecomment-145515885).\nWlc/sway could tackle the issue in several ways, although I don't know which of these things are actually in the scope the respective libraries and don't need some stuff from some layers below.\nThe easiest one would be tracking which window should be scaled differently than advertised. Sway could track all windows with a certain environment variable and simply don't scale them, independent of what wl_output::scale/buffer_scale says.\nIf this isn't possible we could maybe send messages for the client and forcefully set buffer_scale to a value we want. We are the compositor after all, even if the scaling happens a few layers below we might be able to fake the sending of such a message.\nAlternatively we maybe can funnel a different wl_output::scale somehow into the place we need it, so the place which calculates the scaling calculates the scaling we want.\nThis leaves Xwayland as an issue. According to SirCmpwn we can't scale different X11 applications differently. Maybe this can be sidestepped via starting multiple Xwayland instances, one for each scaling factor. I think I read somewhere that this should be possible, altough the place I read it wanted it for security reasons. This posibility of this is completely out of my knowledge though.. Damn, it seems the Xwayland issues can't be sidestepped that easily: https://bugs.freedesktop.org/show_bug.cgi?id=93315#c9 and the following comments.. ",
    "jeremiah-miller": "Would it be possible to disable scaling for xwayland apps entirely? I think some of them have some way to scale themself, like chromium. Personally, I'd prefer a few tiny apps over some blurry apps. ",
    "martinetd": "firefox wayland is perfectly usable for me; the main issue is that they create seats all the time and we don't handle that well (There's a workaround here: https://github.com/swaywm/wlroots/issues/1041#issuecomment-399196786 ), but past this on a daily basis the wayland-specific bugs are minor enough.. There just isn't anyone fixing them on their side, so, yeah; if you have time to help I'm sure they'd take patches.\n(EDIT: fixed link). FWIW this is https://github.com/Cloudef/wlc/issues/87 (already referenced in the bounty page, probably best not too have too many duplicates). talk about a useless version output... Probably built without git for the package (which is actually fairly standard, but we/downstream should handle that better) :/\nAnyway, fedora still ships 0.15; the reason this was closed is this is fixed with the new release. You can upgrade through one of the many copr repos but none of this is \"supported\" either, or build it yourself.. I don't really get why the build fails, here's log excerpt:\n$ git clone https://github.com/swaywm/wlroots\nCloning into 'wlroots'...\nremote: Counting objects: 10272, done.\nremote: Compressing objects: 100% (18/18), done.\nremote: Total 10272 (delta 4), reused 8 (delta 2), pack-reused 10252\nReceiving objects: 100% (10272/10272), 2.15 MiB | 11.97 MiB/s, done.\nResolving deltas: 100% (7558/7558), done.\n$ cd wlroots\n$ mkdir build\n$ cd build\n$ meson --prefix=/usr ..\nError during basic setup:\nNeither directory contains a build file meson.build.\nDoing the same thing here works, I can't see why it doesn't find meson.build. Fresh git clone should checkout the master branch which has a meson.build file.... pass, sorry.. Sounds like a duplicate of #918, do you have at least two with one scaled and one not?\nCurious if that would happen with wlroots as well, should be able to test pretty soon.... I can actually reproduce with rootston and urxvt, so wlroots has the same issue.\nMight want to open an issue there as well (or instead). wlroots'. FWIW. I only tested 'tap_enabled' and selected some text in a term that I spawned from a ssh session, I might be missing something here but at least the config block is properly parsed from previous PR merged earlier this week, the pointer finds it and it does apply something.\nAs a further thought, one thing that might or might not make sense is allow '*' as device name like we do with outputs? I kind of just assumed it would work, then saw in code that it doesn't.. Careful that sway_input_manager_apply_input_config is only called when we modify the config block, not when a new device is added (we listen with input_add_notify, which currently calls sway_seat_add_device).\nI'm not comfortable duplicating that code.\nI could add another function that is called in both paths, though.\nOn the rest:\n - ok, will rewarp a bit.\n - I do not think that sway currently handles wildcards on input block. I honestly have no idea but that's my take on the old code in 2 minutes, could very well be wrong\n - please see @emersion comment in the parallel rootston PR about renaming wlr_libinput_get_device_handle to something else, I'd rather do that first if we do.. > Yeah, it should be called when the device is added as well after the config is assigned.\nNot being very helpful as the current place the code is in does this (as well as is where you put a comment to do it :P)\nCan a device actually be in multiple 'seats' like you suggest? I'm not sure I fully grasp what sense this would make; I guess you could have two seats with a single pointer shared and two separate keyboards?\nI guess it can be, moved it into a separate function called in both paths as I offered to do.\n\nNo wildcards on the input blocks, please. File that as a separate feature request if you'd like.\n\nOk, was more a surprised input behaves differently than output kind of thing, I'm not fussy. This is out of scope anyway.\n\nIndent/wrapping\n\nAgreed long fonction names + long variables can be a pain with line length. I've taken a middle ground, wrapped the log calls that can be split semi-easily (still over 80 but now no longer than the function calls)\n. Basic things seem to work.\nProblems with drm backend\n - I got Mod1+shift+2 to work, but not Mod1+@. Looks like Setting a binding Mod1+@ also broke VT switching somehow?!\n - I couldn't get Mod1+button1 to work despite seeing code that looks like it should be handled\nI read code quickly, looks okish, too tired for proper review & will re-read tomorrow.. > That binding won't validate because apparently xkb wants to call it \"at\". I can make Alt+at work.\nDoh, ok. Could we catch that '@' is not valid xkb-speak somehow and log something? Should I look further into why that made ctrl+alt+Fx stop working altogether by setting an invalid keybind.. ```\nbindsym release\nbindsym --release a do-it-on-release\n```\nis not done on key release but on keypress here (still drm)\n\nShould I look further into why that made ctrl+alt+Fx stop working altogether by setting an invalid keybind.\n\nObviously can't reproduce anymore with last patches, so I guess this part is ok.... tested wayland backend in rootston, no problem. X11 backend in rootston got no keybindings to work, but X11 backend on wmii worked fine key-binding wise so I guess that's a rootston problem.\n(Same --release bindsym being executed on keypress with both, though). Here's the new interactive output for me:\n```\nOutput eDP-1 'Unknown 0x0641 0x00000000'\n  Mode: 0x0 @ 59.999001 Hz\n  Position: 0,0\n  Scale factor: 1x\n  Transform: normal\n  Workspace: 1\n```\nI'd say it's hard to tell what the make/model/serials are when it's as badly provided as this laptop... Not sure what to do about it though, I guess it's ok, and the json format still works. LGTM.. > The mode seems to be invalid though...\nGood point. It's not present in the json output at all for me, so explains why it's 0 here.. Why not populate this in X11/wayland/headless backend, this would let us test \"config by make/model/serial\" more easily as well.\nI'd also be tempted to hide this if unset for ugly cases like my laptop but... It is set with an arbitrary string, who are we to say 0x0000 is not a valid serial? So I'd just leave it as it is for these.. I've tried \"output * transform 90\" and the display got rotated as expected; but removing the whole line doesn't transform it back to normal (changing the 90 to normal does work), I suppose some default values need to be restored into outputs somehow, not sure how tricky this will be to fix, will have a look.. I've also tested input has the same problem, changing the value does work, but removing the line (even part of a block) entierely will just not re-apply the setting so for example if my system's libinput defaults to tap_disabled it won't re-enforce the default.\nTo do that, we'd have to call all the get_default functions to compare with the actual value and re-enforce things appropriately, e.g. libinput_device_config_tap_get_default_enabled vs. libinput_device_config_tap_get_enabled and then re-set with libinput_device_config_tap_set_enabled... And that's just tap, we have a dozen of these settings.\nAfter some thought I'd say fiddling with removed lines isn't our problem anymore, even if that means that a given config will not produce the same environment depending on what it's been before reload - this is basically the same as users running xmodmap or xinput manually.\nIf someone changed tap setting with xinput, and we reload sway config, we don't want to erase their tap setting do we?\nFor output, when we do a *randr tool, I don't think reload should reset the output to normal either if there's no output transform option.\nIf that's correct I believe this PR works as expected and is ready.. Right now I do not see anything that does, for example the strings allocated in input config for xkb used in sway_keyboard_configure aren't referenced anymore once the function exits so there is no risk (even if now I looked I can see that free_input_config() is far from complete in its freeing, leak sanitizer doesn't catch fields I don't allocate, but that's another problem orthogonal to this PR)\nThe free_config() calls appropriate subcomponent functions for each bit which each are responsible to do their own cleanup, I'm not even sure if a more global event would be more convenient?\nAnyway I don't really want to implement an event that's not used - whoever needs it first will add it somewhere appropriate on first use. Ultimately config is just a few values and strings, it's probably more convenient to just say config is config and whatever else is an independant copy that has its own independant lifespan.. You seem to know exactly where the copy is held, and I said I didn't see it -- I've just looked again and I still don't, and this doesn't crash for me (with ASAN) so it must be some setting I'm not using. Could you please point at where is holding a copy? input is fairly vague...\nI'll have a look at bindsym, I thought I checked that but will recheck tomorrow morning.. nm, found it; odd this doesn't trigger asan though I do have blocks there. Ok, this isn't trivial to copy the config as it's got nested pointer, and this code just sucks (seriously 1h is way too long to understand 600 lines of code, and I'm pretty sure I still don't understand it -- I'm not a genius and I'm pretty sure being tired doesn't help, but this is horrible)\nIn practice it looks like nothing is needed, as we re-assign the newly allocated config on reload before the old config is free, so the pointer is always valid. I've just started hating this code. Please fix that yourself later if you're not happy with this conclusion or just drop this PR.\nFWIW, bindsyms work fine for me with drm, what backend are you using?\nOne thing I hadn't noticed when playing with it last time is that reload seems to trigger the same weird \"X11 scaling changes\" as switching VT does; haven't taken time to work on that but it is separate enough to be fixed in another PR imo.. > In practice it looks like nothing is needed, as we re-assign the newly allocated config on reload before the old config is free, so the pointer is always valid. I've just started hating this code.\nHaving slept on this, I thought we had a problem if the input block is in conf so it's attached to a device, then we remove it entierly so new conf isn't linked through, then we use swaymsg to modify another input as that will call sway_input_manager_apply_input_config which walks all input_device configs including invalid ones; but the identifier used is device->identifier and not device->config->identifier so this works. I really think this stuff is working \"fine\" with regards to reload, can't come up with any way to access invalid pointer even if we sometimes have invalid references.\nI won't disagree a rewrite would be useful, I was going to suggest I could do it now I'm less angry at this stuff but happy to let you do, and this is pretty much unrelated to this PR. We really really don't need to store the config anywhere, just parse the config tree on device plug only for applying conf instead of storing it, and assign seats once at the end of config parsing by walking through the input_configs/seat attach rules instead of trying to attach everytime a rule changes; pretty sure we don't really need to muck with current_input_config around sway_input_manager_apply_input_config that way as well.\nRe-bindsym - really need more info, I've reloaded a hundred times during input tests and my main bindsym to spawn a shell (alt-enter) still works everytime, rest works when I occasionally try. I also had tried removing or adding bindsyms and such without problem. What backend are you using?. Been playing with seat thanks to that input stuff; it looks like removing seat from config+reload doesn't remove the pointer either, so I assume it doesn't kill the wlr seat -- I think that'd make sense to do?\nMost other config elements destroy everything after having instanciated new ones, for seat I could agree to not doing that as there is a lot bound to them in wlr, but we need to compare the list of seats in old and new configs and destroy any removed seat. Should I do that now?. Done that, appears to work for me (cursor poofs; on re-adding the seat block the cursor doesn't reappear but that might be related to the pending seat cursor PR I have in wlroots I think that's related ; there is a ghost cursor though as clicks/selection moves separately)\nThis already needed to poke into the input manager, insert generic grumbling as appropriate... FWIW we should also listen to seat destroy events and cleanup as appropriate, I don't think we do.. I don't care which, but let's not take too long to decide as right now the sway log init has been removed and none of the sway_log calls output anything.\nSome more complex logging systems have a 2nd parameter orthogonal to log level (say \"component\") so we could toggle various components log levels independantly, if you think we need that.\nwlroots could have a couple of components (backends, renderer, and types? maybe one for Xwayland too) and we could make extendable to stack other components on top for sway/whatever.\nAnything's possible... We just need to agree on something.\n(EDIT: FWIW, I don't think we need any more separation at this point. It might be useful later but I have no clear opinion there). Just to not lose the 5 minutes I spent on this on IRC, the map is a simple 2-values enum so would be very similar to the rest of sway-input, just need to call libinput_device_config_tap_set_button_map like the others.\nCould get an easy label (but should probably done in wlroots branch at this point, not sure if cherry-pick would work well). Can't say I like the idea of making this even more complex.\nSee my explanation on #1555 on why the dangling pointers are never accessed, so we're fine at the moment (so it could get merged if I was convincing enough) and let me do a bigger rework during the next few weeks for this?\nWe don't need to store anything config related in seat;just parse the global config tree when something gets plugged in (as we currently do) and instead of storing it just apply it.\nI had other things bothering me when I looked at this (and added to the mess with the seat removal), can't recall most of it right now but wanted to simplify how we apply seat config as well so it's less tangled together and hopefully will be a bit clearer to read.. hmm, unless we access it very frequently I think it'll always be simpler to just look it up whenever we need it occasionally, but I'll admit I don't know what ambitions you have so I'll leave it to you.\nI'll regroup all the tidbits I wanted to change and open an issue so we can discuss it. json-c won't ever cause a kernel panic, but this already has been done in the 0.15 and wlroots branches anyway - please use the 0.15 branch.. > It seems to me that popups/menus are also positioned in the global compositor space by the client - not relative to their parent like in Wayland.\nMakes sense, can't really slack on notifiying Xwayland then.. Try it again. When you type in password, the background will get more and more opaque everytime the password indicator is updated.. Ah, sorry. I'd say it's needed after the \"bigger\" indicators e.g. the \"cleared\" message when you empty the buffer, but haven't tried your PR. It's not a size problem, it's just more obvious with the ones like \"cleared\" e.g. press escape and the cleared message stays visible for a few keystrokes.\nEven without these, the indicator looks wrong because even on first frame it draws over semi-opaque with semi-opaque and isn't the same taint as the rest of the background. It really needs setting cairo to non-blending mode (see their faq for an example). Just had a look, the problem is this comment in container_output_destroy:\nif (output->children->length > 0) {\n                // TODO save workspaces when there are no outputs.\n                // TODO also check if there will ever be no outputs except for exiting\n                // program\n                if (root_container.children->length > 1) {\nBasically, the last output doesn't get any spring cleaning right now, so it's no wonder there are illegal accesses later on.\nI have no idea how flexible containers are (e.g. if it would be legal to have a workspace container directly in the root container without any output container in between for exemple) and tbh I'm not sure I want to learn before deciding to create a fake output or some other ugly thing, so I'll pass on this one.. If the problem is that there are two processes instead of one (sh and swaybar), just run sh -c \"exec <original command>\" instead?\nOtherwise you're leaving the problem open for everyone with a custom swaybar command.... This is actually meson being weird with find_library - since the nix store for libpam is considered a \"system\" path it only looks for liblibpam there but in the \"normal\" paths (e.g. the gcc store's libdir) it looks for both liblibpam and libpam\nI haven't spent the time to figure where meson finds these paths and decide which is what, but my opinion is just to change that to 'pam' for everyone instead of making this weird check. The other libs are like that anyway so it shouldn't cause any problem and that'll save meson looking for liblibpam then libpam everywhere.... I will once I figure where the paths come from, but should change both imo :). Ah, actually these paths aren't exposed to meson at all but brought in through a gcc wrapper script.\nmeson tries to build with -llibpam then falls back to manual searching which is why it works on other distros, but there's no way that manual searching would work on nixos because it doesn't expose the library paths in a normal manner.\nOnce that failed it does cc --print-search-dirs and looks in the libraries path for libfoo and foo (so liblibpam and libpam) and ends up finding libpam on most systems.\nI'll open a meson issue anyway (suggesting to add a second gcc call if the argument starts with lib) but it's more a RFE than a bugfix -- I wonder if we could get the nixos wrapper to add all the paths to --print-search-dirs as well.... IPC commands should work, really. It's going to be not-so-well tested but if folks want to run a background script that shuffles all their window while the screen is locked I don't see why we shouldn't let them (or more realistically, for example, someone on IRC was talking about automatic/regular background image changes that could happen while the screen is locked)\nkeybindings should be denied though, for sure, #592 mentions implementing a new switch to allow some commands to pass and deny others but default has to be denied.\nI think we should also consider denying switching to another tty if we can (or make that an option somehow) even if it's not an explicit bindsym command. A couple of issues when testing:\n * setting the timeout interactively doesn't affect a cursor until it moved. For example, from no timeout to some short timeout (e.g. 10ms) the cursor won't disappear until it moved.\n * setting the timeout to something really small (< 1 frame redraw time? try 10ms) will display as if the cursor didn't move when it really did move. Some slightly longer value (e.g. 100ms) work around the problem and work as expected.\n. @RedSoxFan you can create arbitrary \"bars\" by making an exclusive side-anchored layer-shell with the wlroots examples/layer-shell program.\nWith that said, I'd second the change for the x check agains ws->x and ws->x + ws->width to be consistent. render_container_stacked can still call render_view with NULL colors, happens for me with this repr \"H[S[URxvt] URxvt]\" (automatically happens with stacked workspace_layout stacking + default_orientation vertical, pop two windows, move right) then move the right window to the left.\n#0 0x426f95 in render_view ../sway/desktop/output.c:408\n    #1 0x42877c in render_container_stacked ../sway/desktop/output.c:819\n    #2 0x42877c in render_container ../sway/desktop/output.c:837\n    #3 0x427b63 in render_container_simple ../sway/desktop/output.c:699\n    #4 0x427b63 in render_container ../sway/desktop/output.c:834\n    #5 0x429d18 in render_output ../sway/desktop/output.c:984\n    #6 0x429d18 in damage_handle_frame ../sway/desktop/output.c:1126\n    #7 0x7f6c5319ece8 in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f6c5319ece8 in wlr_signal_emit_safe ../util/signal.c:29\n    #9 0x7f6c5340fe73 in wl_event_loop_dispatch_idle src/event-loop.c:600\n    #10 0x7f6c5340ff24 in wl_event_loop_dispatch src/event-loop.c:646\n    #11 0x7f6c5340e601 in wl_display_run src/wayland-server.c:1260\n    #12 0x40a2e4 in main ../sway/main.c:433\n    #13 0x7f6c528e918a in __libc_start_main ../csu/libc-start.c:308\n    #14 0x40b739 in _start (/opt/wayland/bin/sway+0x40b739)\n. Also I'm not 100% sure what happens but with this crash and urxvt my whole computer locks up (who said starting sway from sway/X would let one debug easily?), even a remote ssh preconnected hangs almost immediately so it's a bit of a pain to investigate.\nThis doesn't happen with gnome-terminal so definitely X/Xwayland specific, and doesn't happen if I pkill -11 sway so it has to crash during one of these \"transactions\"\nI straced Xwayland and it's stuck in \"ioctl(5, DRM_IOCTL_I915_GEM_SET_DOMAIN <unfinished ...>\" so sway crashed during that ioctl and the intel driver can't handle the compositor crashing at this point? That's gonna be fun to debug.... Well at least I fixed kdump and I know where to look now, will keep prodding at this a bit today.. Also2, hits sway_assert when trying to move in an empty workspace... happened by chance (urxvt not installed in my VM so windows didn't pop like I expected them to)\n2018-06-24 10:36:37 - [sway/commands.c:166] find_handler(move)\n2018-06-24 10:36:37 - [sway/tree/layout.c:340] container_move:Can only move containers and views, got C_WORKSPACE\n    #0 0x471bf4 in _sway_assert ../common/log.c:27\n    #1 0x464f4d in container_move ../sway/tree/layout.c:337\n    #2 0x44a2b7 in move_in_direction ../sway/commands/move.c:181\n    #3 0x44a90e in cmd_move ../sway/commands/move.c:211\n    #4 0x40ed01 in execute_command ../sway/commands.c:291\n    #5 0x43d464 in keyboard_execute_command ../sway/input/keyboard.c:128\n    #6 0x43e1f7 in handle_keyboard_key ../sway/input/keyboard.c:291\n    #7 0x7fe6cce48ce8 in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7fe6cce2a65f in wlr_keyboard_notify_key ../types/wlr_keyboard.c:125\n    #9 0x7fe6ccdf9dd8 in handle_x11_input_event ../backend/x11/input_device.c:61\n    #10 0x7fe6ccdf8efe in handle_x11_event ../backend/x11/backend.c:38\n    #11 0x7fe6ccdf8efe in x11_event ../backend/x11/backend.c:84\n    #12 0x7fe6cd0b9f01 in wl_event_loop_dispatch src/event-loop.c:641\n    #13 0x7fe6cd0b8601 in wl_display_run src/wayland-server.c:1260\n    #14 0x40a2e4 in main ../sway/main.c:433\n    #15 0x7fe6cc59318a in __libc_start_main ../csu/libc-start.c:308\n    #16 0x40b739 in _start (/opt/wayland/bin/sway+0x40b739). I still get a segfault with stacking (workspace_layout stacking + default_orientation vertical) and just moving left/right a few times randomly: right, left, left, right, right.\nRepresentation before last right is \"H[H[S[URxvt URxvt]]]\".\n(Yes, workspace_layout stacking is screwed up; I'll accept you saying \"H[H[S[X Y]]]]\" shouldn't happen if that's true)\n(lines are probably a bit off in layout.c as I'm dragging along a couple of debugging prints to try to debug that, say if it's too annoying for you)\n2018-06-24 15:06:16 - [sway/commands.c:166] find_handler(move)\n2018-06-24 15:06:16 - [sway/tree/layout.c:367] Visiting 0x61400003c840 C_VIEW 'asmadeus@fenrir:~'\n2018-06-24 15:06:16 - [sway/tree/layout.c:320] Moving out of tab/stack into a split\n2018-06-24 15:06:16 - [sway/tree/layout.c:849] creating container 0x614000044c40 around 0x61400003da40 (C_CONTAINER)\n2018-06-24 15:06:16 - [sway/tree/arrange.c:327] Removing gaps: not gapped: 0x61400003da40\n2018-06-24 15:06:16 - [sway/tree/arrange.c:343] Not adding gaps: 0x614000044c40\n2018-06-24 15:06:16 - [sway/tree/layout.c:132] Adding 0x61400003da40 (3, 0.000000x0.000000) to 0x614000044c40 (3, 1920.\n000000x1061.000000)\n2018-06-24 15:06:16 - [sway/tree/layout.c:104] Inserting id:5 at index 1\n2018-06-24 15:06:16 - [sway/ipc-server.c:304] Sending window::close event\n==25162==The signal is caused by a READ memory access.\n==25162==Hint: address points to the zero page.\n    #0 0x46266b in container_remove_child ../sway/tree/layout.c:146\n    #1 0x45e25b in container_destroy ../sway/tree/container.c:402\n    #2 0x45e3f8 in container_flatten ../sway/tree/container.c:387\n    #3 0x4650f7 in move_out_of_tabs_stacks ../sway/tree/layout.c:329\n    #4 0x44a97b in move_in_direction ../sway/commands/move.c:190\n    #5 0x44b12e in cmd_move ../sway/commands/move.c:223\n    #6 0x40ed01 in execute_command ../sway/commands.c:291\n    #7 0x43d774 in keyboard_execute_command ../sway/input/keyboard.c:128\n    #8 0x43e507 in handle_keyboard_key ../sway/input/keyboard.c:291\n    #9 0x7f8c2bf2cce8 in wlr_signal_emit_safe ../util/signal.c:29\n    #10 0x7f8c2bf0e65f in wlr_keyboard_notify_key ../types/wlr_keyboard.c:125\n    #11 0x7f8c2becc24a in handle_keyboard_key ../backend/libinput/keyboard.c:73\n    #12 0x7f8c2becac8a in handle_libinput_readable ../backend/libinput/backend.c:35\n    #13 0x7f8c2c19df01 in wl_event_loop_dispatch src/event-loop.c:641\n    #14 0x7f8c2c19c601 in wl_display_run src/wayland-server.c:1260\n    #15 0x40a2e4 in main ../sway/main.c:433\n    #16 0x7f8c2b67718a in __libc_start_main ../csu/libc-start.c:308\n    #17 0x40b739 in _start (/opt/wayland/bin/sway+0x40b739). Cool, I agree it's useful to be able to log.\nOne more (last?) nitpick for stacks:\nWhen using stacked and spawning a new window, you can clearly see the previous window disappear (background shows) then the new window appears with its decoration where the desktop was. It would be more natural to keep showing the pervious window in the background for as long as possible.\nWhen closing a window in a stack, something else feels off: I immediately see the window behind appear in the spot of the closed window (e.g. what would happen with focus up/down), but that window's decoration is still there, then that window decoration disappears, then current window resizes. I think in this case it would be more natural to keep showing the dead window's last frame whlie the window behind resizes in the background and then displayed the resized window behind in a single transition.\n(EDIT: tbh this could be done later, it doesn't have to all be in one huge PR)\nAt least none of the crashes I got this morning were related to this, so I think on that part it's starting to look good :+1: . I just noticed a couple of crashes when destroying an output (unplugging screen with DRM, but works fine with x11/wayland backends and WLR_X11/WL_OUTPUTS=2 and forcibly closing a window)\nFirst might not be new, cba testing and will let you do whatever you want with this:\n```diff\nFrom c7f86e7c878a9283b7c2b12939fb412244f5dd7e Mon Sep 17 00:00:00 2001\nFrom: Dominique Martinet asmadeus@codewreck.org\nDate: Tue, 26 Jun 2018 16:32:10 +0900\nSubject: [PATCH] ipc-json: allow describe_output with no ws\nFixes an obvious segfault when destroying an output\n=26150==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x7f9707fefa01 bp 0x7ffe6456aed0 sp 0x7ffe6456a648 T0)\n==26150==The signal is caused by a READ memory access.\n==26150==Hint: address points to the zero page.\n    #0 0x7f9707fefa00 in __strlen_avx2 (/lib64/libc.so.6+0x15ca00)\n    #1 0x7f970a8a980b  (/lib64/libasan.so.5+0x9980b)\n    #2 0x7f9709b546de in json_object_new_string (/lib64/libjson-c.so.4+0x56de)\n    #3 0x418e23 in ipc_json_describe_output ../sway/ipc-json.c:123\n    #4 0x418e23 in ipc_json_describe_container ../sway/ipc-json.c:231\n    #5 0x418348 in ipc_json_describe_container_recursive ../sway/ipc-json.c:249\n    #6 0x41bb2d in ipc_event_window ../sway/ipc-server.c:307\n    #7 0x45d684 in container_destroy_noreaping ../sway/tree/container.c:329\n    #8 0x45e59b in container_destroy ../sway/tree/container.c:406\n    #9 0x7f97087979fa in wlr_signal_emit_safe ../util/signal.c:29\n    #10 0x7f9708778451 in wlr_output_damage_destroy ../types/wlr_output_damage.c:90\n    #11 0x7f9708777f32 in output_handle_destroy ../types/wlr_output_damage.c:13\n    #12 0x7f97087979fa in wlr_signal_emit_safe ../util/signal.c:29\n    #13 0x7f970870c602 in drm_connector_cleanup ../backend/drm/drm.c:1055\n    #14 0x7f970870b3a0 in scan_drm_connectors ../backend/drm/drm.c:918\n    #15 0x7f9708702114 in drm_invalidated ../backend/drm/backend.c:107\n    #16 0x7f97087979fa in wlr_signal_emit_safe ../util/signal.c:29\n    #17 0x7f970871c8a3 in udev_event ../backend/session/session.c:51\n    #18 0x7f9708a0ef01 in wl_event_loop_dispatch src/event-loop.c:641\n    #19 0x7f9708a0d601 in wl_display_run src/wayland-server.c:1260\n    #20 0x40a2f4 in main ../sway/main.c:433\n    #21 0x7f9707eb618a in __libc_start_main ../csu/libc-start.c:308\n    #22 0x40b749 in _start (/opt/wayland/bin/sway+0x40b749)\ndiff --git a/sway/ipc-json.c b/sway/ipc-json.c\nindex b9289e25..000137f7 100644\n--- a/sway/ipc-json.c\n+++ b/sway/ipc-json.c\n@@ -120,8 +120,10 @@ static void ipc_json_describe_output(struct sway_container *container,\n            ws = focus->name;\n        }\n    }\n-   json_object_object_add(object, \"current_workspace\",\n-           json_object_new_string(ws));\n+   if (ws) {\n+       json_object_object_add(object, \"current_workspace\",\n+               json_object_new_string(ws));\n+   }\njson_object *modes_array = json_object_new_array();\nstruct wlr_output_mode *mode;\n\n```\nSecond looks like more work and I don't have time to investigate (use-after-free so you'll need ASAN or valgrind):\n```\n==29667==ERROR: AddressSanitizer: heap-use-after-free on address 0x612000190cc8 at pc 0x00000046f9d8 bp 0x7ffe15dba130 sp 0x7ffe15dba120\nWRITE of size 8 at 0x612000190cc8 thread T0\n    #0 0x46f9d7 in container_free ../sway/tree/container.c:174\n    #1 0x42fdcc in transaction_destroy ../sway/desktop/transaction.c:87\n    #2 0x431c64 in transaction_commit ../sway/desktop/transaction.c:291\n    #3 0x46e2d5 in arrange_and_commit ../sway/tree/arrange.c:322\n    #4 0x475c3e in output_layout_handle_change ../sway/tree/layout.c:25\n    #5 0x7f8bb23bb9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #6 0x7f8bb239e17c in output_layout_reconfigure ../types/wlr_output_layout.c:134\n    #7 0x7f8bb239e2f5 in handle_output_destroy ../types/wlr_output_layout.c:160\n    #8 0x7f8bb23bb9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #9 0x7f8bb23a24c2 in wlr_output_destroy ../types/wlr_output.c:284\n    #10 0x7f8bb234dc61 in handle_x11_event ../backend/x11/backend.c:66\n    #11 0x7f8bb234dcea in x11_event ../backend/x11/backend.c:84\n    #12 0x7f8bb2632f01 in wl_event_loop_dispatch src/event-loop.c:641\n    #13 0x7f8bb2631601 in wl_display_run src/wayland-server.c:1260\n    #14 0x40bab8 in server_run ../sway/server.c:137\n    #15 0x40ab36 in main ../sway/main.c:433\n    #16 0x7f8bb1ada18a in __libc_start_main ../csu/libc-start.c:308\n    #17 0x408d29 in _start (/opt/wayland/bin/sway+0x408d29)\n0x612000190cc8 is located 8 bytes inside of 296-byte region [0x612000190cc0,0x612000190de8)\nfreed by thread T0 here:\n    #0 0x7f8bb4522880 in __interceptor_free (/lib64/libasan.so.5+0xee880)\n    #1 0x42f07c in handle_destroy ../sway/desktop/output.c:1273\n    #2 0x7f8bb23bb9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #3 0x7f8bb23a24c2 in wlr_output_destroy ../types/wlr_output.c:284\n    #4 0x7f8bb234dc61 in handle_x11_event ../backend/x11/backend.c:66\n    #5 0x7f8bb234dcea in x11_event ../backend/x11/backend.c:84\n    #6 0x7f8bb2632f01 in wl_event_loop_dispatch src/event-loop.c:641\npreviously allocated by thread T0 here:\n    #0 0x7f8bb4522e50 in calloc (/lib64/libasan.so.5+0xeee50)\n    #1 0x42f298 in handle_new_output ../sway/desktop/output.c:1304\n    #2 0x7f8bb23bb9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #3 0x7f8bb233dcbf in new_output_reemit ../backend/multi/backend.c:113\n    #4 0x7f8bb23bb9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #5 0x7f8bb2351dca in wlr_x11_output_create ../backend/x11/output.c:174\n    #6 0x7f8bb234e989 in backend_start ../backend/x11/backend.c:173\n    #7 0x7f8bb2321d55 in wlr_backend_start ../backend/backend.c:35\n    #8 0x7f8bb233d7a0 in multi_backend_start ../backend/multi/backend.c:24\n    #9 0x7f8bb2321d55 in wlr_backend_start ../backend/backend.c:35\n    #10 0x40ba24 in server_run ../sway/server.c:132\n    #11 0x40ab36 in main ../sway/main.c:433\n    #12 0x7f8bb1ada18a in __libc_start_main ../csu/libc-start.c:308\n```. Ah, actually the timerfd part of swaywm/wlroots#1090 (mostly) comes from here as well: you use wl_event_loop_add_timer a lot and each of these create a new eventfd, but it's never cleaned up properly.\nI think you need to use wl_event_source_remove(transaction->timer) when you're done with it.\nThat adds up pretty quickly, explains why I ran out of fd in half a day :). ACK on timer fix, that works well, we leak much less FD (I'll have fun hunting the dozen of sources we're leaking all around later, but at least it's not something happening all the time like transactions :P)\nFor the output crash your fix makes my IPC crash just a bit earlier so my fix is indeed no longer valid, I'm now getting a crash here:\n==20426==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000000 (pc 0x00000041871f bp 0x7ffe702a8ab0 sp 0x7ffe702a8a60 T0)\n==20426==The signal is caused by a READ memory access.\n==20426==Hint: address points to the zero page.\n    #0 0x41871e in ipc_json_describe_output ../sway/ipc-json.c:88\n    #1 0x4195bc in ipc_json_describe_container ../sway/ipc-json.c:233\n    #2 0x419607 in ipc_json_describe_container_recursive ../sway/ipc-json.c:251\n    #3 0x41c320 in ipc_event_window ../sway/ipc-server.c:307\n    #4 0x4713bc in container_destroy_noreaping ../sway/tree/container.c:329\n    #5 0x47186e in container_destroy ../sway/tree/container.c:406\n    #6 0x42f003 in damage_handle_destroy ../sway/desktop/output.c:1261\n    #7 0x7f9a4bd709fa in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f9a4bd51451 in wlr_output_damage_destroy ../types/wlr_output_damage.c:90\n    #9 0x7f9a4bd50f32 in output_handle_destroy ../types/wlr_output_damage.c:13\n    #10 0x7f9a4bd709fa in wlr_signal_emit_safe ../util/signal.c:29\n    #11 0x7f9a4bd574c2 in wlr_output_destroy ../types/wlr_output.c:284\n    #12 0x7f9a4bd02c61 in handle_x11_event ../backend/x11/backend.c:66\n    #13 0x7f9a4bd02cea in x11_event ../backend/x11/backend.c:84\n    #14 0x7f9a4bfe7f01 in wl_event_loop_dispatch src/event-loop.c:641\n    #15 0x7f9a4bfe6601 in wl_display_run src/wayland-server.c:1260\n    #16 0x40bb25 in server_run ../sway/server.c:141\n    #17 0x40ab36 in main ../sway/main.c:433\n    #18 0x7f9a4b48f18a in __libc_start_main ../csu/libc-start.c:308\nI'm just starting sway with WLR_X11_OUTPUTS=2 sway and closing one of the two outputs window once it's ready. Doing things in it before doesn't seem to change much here.\nI get the very same crash with WLR_WL_OUTPUTS=2 and starting on wayland if that's easier for you to play with.. Looks good, way better patch than mine :P\nI'm getting one more use-after-free that needs patching wl_list_remove in for asan (so you could see it with valgrind), but it looks fairly unrelated I think it was here before. (output not cleaning its layer shells on output destroy)\nI'll fix it and keep reporting later. Okay, that one did exist before and fixed (separate PR inc), but unfortunately some more with \"transaction\" in the backtrace so leaving this one to you...\nReproduced by hitting the exit key binding on a sway instance with at least one window opened (works on all backends):\n```\n==3287==ERROR: AddressSanitizer: heap-use-after-free on address 0x614000012af8 at pc 0x000000472258 bp 0x7ffd6e6ce900 sp 0x7ffd6e6ce8f0\nREAD of size 4 at 0x614000012af8 thread T0\n    #0 0x472257 in container_parent ../sway/tree/container.c:502\n    #1 0x488608 in workspace_is_visible ../sway/tree/workspace.c:436\n    #2 0x471562 in container_reap_empty ../sway/tree/container.c:343\n    #3 0x4716cd in container_reap_empty_recursive ../sway/tree/container.c:369\n    #4 0x4718ce in container_destroy ../sway/tree/container.c:403\n    #5 0x482de0 in view_unmap ../sway/tree/view.c:559\n    #6 0x435573 in handle_unmap ../sway/desktop/xdg_shell.c:227\n    #7 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f8a573c1ee5 in unmap_xdg_surface ../types/xdg_shell/wlr_xdg_surface.c:35\n    #9 0x7f8a573c4100 in destroy_xdg_surface ../types/xdg_shell/wlr_xdg_surface.c:413\n    #10 0x7f8a573c3bc7 in xdg_surface_handle_surface_destroy ../types/xdg_shell/wlr_xdg_surface.c:350\n    #11 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #12 0x7f8a573ff3d7 in surface_handle_resource_destroy ../types/wlr_surface.c:576\n    #13 0x7f8a57681025 in destroy_resource src/wayland-server.c:688\n    #14 0x7f8a57681091 in wl_resource_destroy src/wayland-server.c:705\n    #15 0x7f8a573ff51d in surface_handle_renderer_destroy ../types/wlr_surface.c:591\n    #16 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #17 0x7f8a573ad152 in wlr_renderer_destroy ../render/wlr_renderer.c:28\n    #18 0x7f8a57381a20 in finish_drm_renderer ../backend/drm/renderer.c:54\n    #19 0x7f8a57375a53 in backend_destroy ../backend/drm/backend.c:45\n    #20 0x7f8a57371e08 in wlr_backend_destroy ../backend/backend.c:46\n    #21 0x7f8a5738d948 in multi_backend_destroy ../backend/multi/backend.c:47\n    #22 0x7f8a5738dacd in handle_display_destroy ../backend/multi/backend.c:77\n    #23 0x7f8a57680f8f in wl_priv_signal_emit src/wayland-server.c:2024\n    #24 0x7f8a576816ca in wl_display_destroy src/wayland-server.c:1092\n    #25 0x40b976 in server_fini ../sway/server.c:128\n    #26 0x40ab5f in main ../sway/main.c:437\n    #27 0x7f8a56b2a18a in __libc_start_main ../csu/libc-start.c:308\n    #28 0x408d29 in _start (/opt/wayland/bin/sway+0x408d29)\n0x614000012af8 is located 184 bytes inside of 432-byte region [0x614000012a40,0x614000012bf0)\nfreed by thread T0 here:\n    #0 0x7f8a59572880 in __interceptor_free (/lib64/libasan.so.5+0xee880)\n    #1 0x4706a7 in container_free ../sway/tree/container.c:197\n    #2 0x42ff87 in transaction_destroy ../sway/desktop/transaction.c:94\n    #3 0x4322ab in transaction_commit ../sway/desktop/transaction.c:319\n    #4 0x46ee66 in arrange_and_commit ../sway/tree/arrange.c:322\n    #5 0x42f205 in handle_destroy ../sway/desktop/output.c:1277\n    #6 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #7 0x7f8a573f24c2 in wlr_output_destroy ../types/wlr_output.c:284\n    #8 0x7f8a5737598a in backend_destroy ../backend/drm/backend.c:35\n    #9 0x7f8a57371e08 in wlr_backend_destroy ../backend/backend.c:46\n    #10 0x7f8a5738d948 in multi_backend_destroy ../backend/multi/backend.c:47\n    #11 0x7f8a5738dacd in handle_display_destroy ../backend/multi/backend.c:77\n    #12 0x7f8a57680f8f in wl_priv_signal_emit src/wayland-server.c:2024\npreviously allocated by thread T0 here:\n    #0 0x7f8a59572e50 in calloc (/lib64/libasan.so.5+0xeee50)\n    #1 0x46fcbe in container_create ../sway/tree/container.c:107\n    #2 0x4896fc in output_create ../sway/tree/output.c:66\n    #3 0x42f6c2 in output_enable ../sway/desktop/output.c:1338\n    #4 0x42f607 in handle_new_output ../sway/desktop/output.c:1328\n    #5 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #6 0x7f8a5738dcbf in new_output_reemit ../backend/multi/backend.c:113\n    #7 0x7f8a5740b9fa in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f8a5737f29c in scan_drm_connectors ../backend/drm/drm.c:911\n    #9 0x7f8a573758d2 in backend_start ../backend/drm/backend.c:20\n    #10 0x7f8a57371d55 in wlr_backend_start ../backend/backend.c:35\n    #11 0x7f8a5738d7a0 in multi_backend_start ../backend/multi/backend.c:24\n    #12 0x7f8a57371d55 in wlr_backend_start ../backend/backend.c:35\n    #13 0x40ba8a in server_run ../sway/server.c:136\n    #14 0x40ab2f in main ../sway/main.c:432\n    #15 0x7f8a56b2a18a in __libc_start_main ../csu/libc-start.c:308\n```. >> Okay, that one did exist before and fixed (separate PR inc), but unfortunately some more with \"transaction\" in the backtrace so leaving this one to you...\n\nSee #1859\n\nFair enough, I guess these are probably the same with just a sprinkle of atomicity. I was starting to feel sorry for @RyanDwyer anyway :P\nAs far as runtime goes and code itself I'm happy with the PR.. It might not be what was reported but for what it's worth sway itself has the problem for keybindings.\nFor example, enter resize mode and hold some movement key; in i3 that would repeat the command at repeat-key rate, in this version of sway it would only do one step and you'd need to manually mash the key if the resize step is small instead of holding it down.\n(I'm not sure I can argue than holding logo+enter to spawn many terminals is something most people do, but that has the same behaviour obviously :P). Thanks, that one is fixed with this.\nI get another segfault further down, no exact reproducer as I just moved windows around randomly for a while - happy to merge this first and open this in a new issue.\n```\n==2950==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000060 (pc 0x000000457a0d bp 0x7ffe81407ae0 sp 0x7ffe8\n1407ac0 T0)\n==2950==The signal is caused by a READ memory access.\n==2950==Hint: address points to the zero page.\n    #0 0x457a0c in container_remove_child ../sway/tree/layout.c:145\n    #1 0x45b06d in container_move ../sway/tree/layout.c:522\n    #2 0x44350b in cmd_move ../sway/commands/move.c:178\n    #3 0x40e414 in execute_command ../sway/commands.c:369\n    #4 0x435f7d in keyboard_execute_command ../sway/input/keyboard.c:100\n    #5 0x43636e in keyboard_execute_bindsym ../sway/input/keyboard.c:168\n    #6 0x437590 in handle_keyboard_key ../sway/input/keyboard.c:380\n    #7 0x7f48a54d8948 in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f48a54ba08f in wlr_keyboard_notify_key ../types/wlr_keyboard.c:125\n    #9 0x7f48a547b64a in handle_keyboard_key ../backend/libinput/keyboard.c:73\n    #10 0x7f48a547a0ca in handle_libinput_readable ../backend/libinput/backend.c:35\n    #11 0x7f48a5746f01 in wl_event_loop_dispatch src/event-loop.c:641\n    #12 0x7f48a5745601 in wl_display_run src/wayland-server.c:1260\n    #13 0x409da6 in main ../sway/main.c:428\n    #14 0x7f48a4c2818a in __libc_start_main (/lib64/libc.so.6+0x2318a)\n    #15 0x40b049 in _start (/opt/wayland/bin/sway+0x40b049)\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV ../sway/tree/layout.c:145 in container_remove_child\n==2950==ABORTING\n```. Yeah it looks completely different. I'll open the issue once this is merged and will include steps or a debug log. If you think it's missing some callback and fucks its loop up (I still think for opengl mpv should setup the frame callback in swap buffer and not from the previous frame callback), feel free to try this commit: https://github.com/martinetd/mpv/commit/853119a130cab9211446d2b8e6fa4aae5f390482 ; that doesn't work for vulkan so it's not a proper fix and won't get taken but might give an idea...\nI can't reproduce it at all, if you can send some log with WAYLAND_DEBUG=1 indicating around what timestamp the freeze starts it might help figure it out.\nOn the other hand, I got a fun one just now... Probably unrelated and should report that to the other side, nothing I could do woke it up\n[vo/gpu/opengl] vertex shader source:\n[vo/gpu/opengl] [  1] #version 440\n[vo/gpu/opengl] [  2] #define tex1D texture\n[vo/gpu/opengl] [  3] #define tex3D texture\n[vo/gpu/opengl] [  4] #define LUT_POS(x, lut_size) mix(0.5 / (lut_size), 1.0 - 0.5 / (lut_size), (x))\n[vo/gpu/opengl] [  5] in vec2 vertex_position;\n[vo/gpu/opengl] [  6] in vec2 vertex_texcoord0;\n[vo/gpu/opengl] [  7] out vec2 texcoord0;\n[vo/gpu/opengl] [  8] in vec2 vertex_t_color;\n[vo/gpu/opengl] [  9] out vec4 ass_color;\n[vo/gpu/opengl] [ 10] void main() {\n[vo/gpu/opengl] [ 11] gl_Position = vec4(vertex_position, 1.0, 1.0);\n[vo/gpu/opengl] [ 12] texcoord = vertex_texcoord;\n[vo/gpu/opengl] [ 13] ass_color = vertex_ass_color;\n[vo/gpu/opengl] [ 14] }\n[vo/gpu/opengl] vertex shader compile log (status=0):\n[vo/gpu/opengl] 0:12(1): error: `texcoord' undeclared\n[vo/gpu/opengl] 0:12(12): error: `vertex_texcoord' undeclared\n[vo/gpu/opengl] 0:13(13): error: `vertex_ass_color' undeclared\n[vo/gpu/opengl] \n[vo/gpu/opengl] shader link log (status=0): error: linking with uncompiled/unspecialized shader. That's probably different, maybe something with qutebrowser buffering stdout since redirecting stdout makes the problem go away. switching back to qutebrowser workspace would give qutebrowser the focus so that might do something about how it handles the output? You can check what happens with strace on the mpv process. yeah I really dislike the strncpy version of the warning. I've been changing a lot of strncpy to snprintf due to it recently, but it's a lot of effort of very little interest to me... >  Add -Wno-format-truncation while you're at it too (snprintf version of this warning).\nthe snprintf version of the warning is slightly less dumb: we just need to check the return code of snprintf, which isn't possible with strncpy. Sometimes it makes sense to log a warning on truncation so this is fine.\nFor strncpy since there is practically no way to check I find this warning of pretty bad taste, the only fixes are wasting memory or stop using strncpy :D. I still have a variant of my 2nd bug with initial config (default_orientation vertical + workspace_layout stacking) ; moving the window right now works but leaves the focus on the empty initial workspace. moving right again crashes with the same sway assert as 2nd.\nTesting the rest now.\n. 3rd is fixed. 2nd still happens just the same, so no need of any special config to reproduce now at least it's coherent :). Hmm, ok - I'll have a look tomorrow, already spent too much time off work today.\nLet's not wait and take this first.. > In master, sway/tree/layout.c:542 is not a call to arrange_children_of.\nHm it is?\nsway$ git fetch origin\nsway$ git checkout origin/master\nHEAD is now at 0549fd02 Merge pull request #2087 from RedSoxFan/output-subcommand\nsway$ sed -n -e '542p' sway/tree/layout.c\n                arrange_children_of(old_parent);. FWIW the inner loop shouldn't check dirty but frame_pending - when all surfaces have no frame pending left we're good to go.. Except that it doesn't work. dirty is cleared after the frame has been rendered/commited but before the callback came back.\nI agree about the English words, but he'd need to change the logic around the bools to make it true in swaylock. Okay, I take it back after discussing on IRC - dirty is fine, but need to call wl_display_flush(state->display) after the loop. @smlx: thanks for trying; I had a commit back then for testing so I'm pushing it in a new PR but if there's anything else you'd like to work on feel free to ask for some explanation again\n(woah, github is scary, it's still listing here the local commit I pushed by mistake and erased right away..). > I'm also not sure what this is about:\n\n08:52 <Asmadeus> And we unset LD_PRELOAD as well for the same reason but it's easy enough in the preloaded library to hook on execve and reinsert itself so that doesn't change much if you think about hostile environment\n\nI just meant that if you do that for security, a well-crafted attacker LD_PRELOAD lib can reinsert itself in the environment after you unset it if it is loaded - I don't have any open source example but I've seen it done, just check whatever environment is sent at various exec libc calls and re-set LD_PRELOAD if it has been modified to remove the \"malicious\" lib.\nOn the other hand, if you assume sway is setcap'd/setuid, the environment will be cleared (and not herited) for both variables anyway, so what we are doing is not useful in this case (where the lib couldn't protect itself) either.\nI just tried with\n```c\n/ simple lib to LD_PRELOAD /\ninclude \ninclude \ninclude \ninclude \ninclude \nvoid init(void) attribute((constructor));\nvoid init(void) {\n    int fd;\n    ssize_t n;\n    char buf[1024];\nfd = open(\"/proc/self/cmdline\", O_RDONLY);\nif (fd < 0) {\n    return;\n}\n\nn = read(fd, buf, sizeof(buf));\nif (n < 0) {\n    return;\n}\n\nprintf(\"%*s\\n\", n, buf);\n\n}\nc\n/ simple wrapper to play with setcap /\ninclude \ninclude \nint main() {\nreturn execl(\"/bin/bash\", \"bash\", \"-c\", \"env | grep LD_\", NULL);\n\n}\nbash\ngcc -o wrap wrap.c\ngcc -fPIC -shared -o spy.so spy.c\nLD_PRELOAD=$PWD/spy.so ./wrap\nLD_LIBRARY_PATH=$PWD ./wrap\nsudo chown root: wrap\nsudo setcap \"cap_sys_ptrace,cap_sys_tty_config=eip\" wrap\nLD_PRELOAD=$PWD/spy.so ./wrap\nLD_LIBRARY_PATH=$PWD ./wrap\n```\nFirst two should display stuff while not the other. Don't do like me and try in /tmp which is mounted nosuid -_-. > Remember that we're protecting sway's child processes, not sway itself. \n\nOn the other hand, if you assume sway is setcap'd/setuid, the environment will be cleared (and not herited) for both variables anyway\n\nMy point being, this only \"protects\" sway and sway children with a sloppy attacker and when sway isn't setcap'd.\nThat doesn't meant it's not worth doing (protecting against sloppy attacker can be considered better than nothing), but it's probably less useful than what you seem to think. Doesn't seem to work for me? If I try to open an urxvt, run right away 'sleep 3; urxvt' and change workspace before sleep runs out I get this in logs:\n2018-06-30 23:42:19 - [sway/tree/workspace.c:549] Looking up workspace for pid 25285\n2018-06-30 23:42:19 - [sway/tree/workspace.c:558] found pid_workspace for pid 25285, workspace 2\n..\n2018-06-30 23:42:27 - [sway/tree/workspace.c:549] Looking up workspace for pid 25290\n2018-06-30 23:42:27 - [sway/tree/container.c:439] Adding new view 0x61400002ea40:urxvt to container 0x61400002e640 2 3\nSo it looks like the process finds itself because you just added it, removes itself from the list, and the next one doesn't find it as a result.\n. That minor thing aside it looks good to me, everything I was worried about seems fixed :). > That's not how it works. It's only meant to work consistently with processes launched by sway itself. Try it with stuff bound to keybindings. I also set up dmenu like this:\n\nbindsym $mod+d exec dmenu_path | dmenu -p \"Run:\" -l 10 | xargs swaymsg exec\nSo that sway gets to exec the process I ask for.\n\nAh, so it is supposed to match itself, and work in case you run x in a workspace then switch workspace before the window appears?\nI'm not sure about your example (works for me before the patch and doesn't seem to pop the window spawnd by the second swaymsg exec where dmenu was running in the first place), but bindsym $mod+z exec sleep 2 && urxvt did the trick.\nSmall nitpick: the workspace create might still be needed, if there was nothing in the workspace I left between running bindsym and window creation, the workspace is destroyed when I leave it, and it doesn't show up in swaybar when it is created again when the window appears.\nWhen I switch to it, the window is in the correct workspace thoguh, so the feature works now that I understand what this is about.. Tricky because the surface might be transparent, yeah.\nInstead of the asumption that this is an exclusive client, if we can go to the output, look if there is a layer in the foreground that is totally opaque, we can then not send frame done to anything behind it -- it should be effectively the same thing for you yet much more accurate.\n(We don't send frame done events to surfaces in another workspace for example, this is pretty much the same). >> Also not happy storing the list of idle inhibitors directly in servers struct, I might want to encompass things in a sway_idle_inhibit_manager_v1 or something\n\nYeah do this\n\nDone.\nAlso fixed the direct calls to wlr_idle_set_enabled to use the check_active helper, so if someone spawns a mpv in the background inhibitor won't kick in as pointed out by emersion.. > We'll need to do as they say in the cairo FAQ. Here's another example of how to do it: emersion/mako:render.c@master#L125\nJust setting the operator out of the if ought to work for background images; artificially clearing the surface is a bit overkill :)\n(I agree cairo_save/cairo_restore is better though). >> shall handle_display_destroy do more and we could just remove the ipc_terminate call in main?\n\nYeah that's probably a good idea.\n\nDone in a force push. Also took me a while but I found a way to clean most of the fontconfig clutter (although it is a bit ugh, not sure where to put that pango_cairo_font_map_set_default(NULL) call); it's actually looking decent.. Yeah I spent a bit of time on the first one and I don't get it either... I can reproduce it once every 10 runs or so though, so added some logs, that makes it quite a bit easier to understand :)\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:400] transaction notify view ready by size on view 0x616000178880 con 0x614000020440\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:406] found instruction 0x61000028b540, index 0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:382] setting ready instruction 0x61000028b540, index 0\n2018-07-04 21:29:33 - [sway/ipc-server.c:371] Client 18 writable\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:400] transaction notify view ready by size on view 0x616000178880 con 0x614000020440\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:406] found instruction 0x61000028d140, index 1\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:382] setting ready instruction 0x61000028b540, index 0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:367] Transaction 0x6060000d6fa0 is ready\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:180] Applying transaction 0x6060000d6fa0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:83] destroying transaction 0x6060000d6fa0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b140 from container 0x6dc4a0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b240 from container 0x61400000dc40\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b340 from container 0x61400000de40\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b440 from container 0x61400000e040\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b540 from container 0x614000020440\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028b640 from container 0x614000020640\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:180] Applying transaction 0x6060000d85c0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:83] destroying transaction 0x6060000d85c0\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028cf40 from container 0x61400000de40\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028d040 from container 0x61400000e040\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028d140 from container 0x614000020440\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:88] destroying instruction 0x61000028d240 from container 0x614000020640\n2018-07-04 21:29:33 - [sway/desktop/transaction.c:382] setting ready instruction 0x61000028d140, index 1\n=================================================================\n==19747==ERROR: AddressSanitizer: heap-use-after-free on address 0x61000028d1fc at pc 0x000000433b46 bp 0x7ffcf7d017a0 sp 0x7ffcf7d01790\nI'm not sure why the second transaction would get applied, but that explains the use-after-free... I can get more logs (or more brain cells usage) if that wasn't enough.\nHaven't thought about what you said for 2nd one yet, will try to understand tomorrow maybe. If it's stuck in a drm ioctl you'll have better chance figuring it out looking at dmesg (should print a backtrace after it's stuck for a couple of minutes), or recompiling a kernel with CONFIG_DEBUG_INFO=y (iirc not set on arch) and investigating why it's stuck with crash. If you compiled this yourself you already have debug symbols (meson enables them by default); so you're probably asking the wrong question.\nYou can get the stack traces from a core dump after sway crashed, have a look at coredumpctl. Hmm just a thought but then what about focus on workspace switching? I'd really hate to have focus automatically come under the cursor instead of \"what was last focused in that workspace\" we currently have ; but then it's inconsistent with this change as things work right now e.g. one would still need \"to flick the mouse outside the window\" to change focus then (or, let's be crazy, click)\nAnyway I don't particularly care, things work.. > This is what already happens if you have focus_follows_mouse. If you don't, the behavior also doesn't change from today.\nErm, I just tried again to make sure, and no? I have focus_follows_mouse (it defaults to yes) and after changing workspace, the focus is where it was last in the workspace, not under the mouse.\nThis is consistent with i3 and honestly I wouldn't want it any other way - while changing focus on button up is minor and easy to adapt to, moving focus on workspace change would suck really hard.\nEDIT: Anyway this is mostly a moot point, I'm not expecting anyone to change their mind on the subject of the current PR nor did I intend to, I just wanted to bring this up so you're aware there are circumstances where the window under the pointer will not always be focused even with focus_follows_mouse set. Yes, I just used workspace switching as an example of similar behaviour to what we had prior to this PR for button up. Anyway, I'll just shut up and stop making things more confusing than they need to be.. Apps starting from rofi/dmenu that freeze after a while usually do so because they write something to stdout and at some point the pipe is full (because nothing reads their stdout)\nYou can confirm that with strace -p on the will-hang process, it'll block on a write(1, ...) or write(2, ...)\nI guess we could close the fds before execve in exec_always...?. hmm. I just remember some other issue exactly like this ... right #2090 it was, they were starting it from qutebrowser and not rofi though but I have no idea how they started qutebrowser, presumably a key binding?\nAnyway it can't hurt to strace or to check killing the output of this app like the other report, if that is the case we can investigate on why. Actually I can't read, he said rofi or terminal and terminal will have its own output handling, so it has to be something else.\nI'm curious what's different with keybind though... @RyanDwyer what's this slack client you're using, I might want to play with that next week?. I don't think it's the same, unless Ryan didn't wait long enough to get ETIMEDOUT multiple times... It could be on their side though, definitely, but if it doesn't happen on X11 (or when started from keybind?!) then it might still be something we do.\nThat said, I just tried with empty configuration and login window opened as you said it still freezes with that and nothing happened in about an hour, do you do anything with that window? floating or tiling? (I'm on fedora so might be different, but they ship binary only so I think we'd have the same stuff.. Well the aur packages takes the .deb and not the .rpm but I doubt it's different). Thanks for checking, at least it's rather reassuring that bindsym isn't related.\nI tried again, logging in and actually interacting with it but the hang really doesn't happen here, no clue what's different (the hash of the binary is different, but there are dozens of reasons this could happen - fedora rpm building with slightly different flags for example, or build containing a build timestamp somewhere)\nI'll just pass on this one, sorry. I can confirm reverting that commit fixes things for me on intel graphics... So basically can't mix atomic and legacy with intel, while AMD needs legacy anyway.\nI don't have any AMD hardware to check, is there any variable that stores amd or not we could use?\nMaybe the glGetString(GL_VENDOR) in render/gles2/renderer.c (gives \"Intel open source...\" on intel), but it's not really in the right part of the code...\n\nActually, it looks like oneshot mode already blocks for Mac; so adding more special cases there would be a valid option\n\n(on this off topic I have a trivial patch that blocks as I use oneshot and adapted my script to pkill old redshift process then start a new one, and the flicker sure is ugly... Really going to need a better remote control; reading temperature from stdin and using a pipe maybe...). Happy with that. Thought from people using AMD cards & redshift?\nWill submit a patch tomorrow if that's all it takes. You can run swaylock in a screen and look at it from another tty, or ssh in from another machine.\nI'm not sure what is expected of gdb here though, a log with WAYLAND_DEBUG=1 (which has timestamps and might help understand what's so slow) might be a better start; once we have an idea of what area is slow adding more debug statements will be possible. I'm glad we're asking for logs with WAYLAND_DEBUG=1 and you're giving a core dump... A core dump without the associated binaries is pretty much useless so you're the only one who can do anything with it (sway at least compiles the date in --version so it's not a reproductible build, we won't get the same binary as you without trying very, very hard)\nAnyway I just tried, can reproduce, and found something interesting, it looks like swaylock is a second firefox and it grabs new inputs again everytime it gets a chance, leading to things like this:\n[3524923.247] wl_seat@8.capabilities(3)\n[3524923.406]  -> wl_seat@8.get_pointer(new id wl_pointer@85)\n[3524924.983]  -> wl_seat@8.get_keyboard(new id wl_keyboard@103)\n[3524925.157] wl_seat@8.capabilities(3)\n[3524925.244]  -> wl_seat@8.get_pointer(new id wl_pointer@104)\n[3524925.390]  -> wl_seat@8.get_keyboard(new id wl_keyboard@105)\n[3524925.541] wl_seat@8.capabilities(3)\n[3524925.650]  -> wl_seat@8.get_pointer(new id wl_pointer@106)\n[3524925.773]  -> wl_seat@8.get_keyboard(new id wl_keyboard@107)\n[3524926.057] wl_keyboard@102.key(464, 876721680, 29, 0)\n[3524926.646] wl_keyboard@100.key(464, 876721680, 29, 0)\n[3524927.148] wl_keyboard@98.key(464, 876721680, 29, 0)\n[3524927.600] wl_keyboard@97.key(464, 876721680, 29, 0)\n[3524928.129] wl_keyboard@96.key(464, 876721680, 29, 0)\n[3524928.497] wl_keyboard@95.key(464, 876721680, 29, 0)\n[3524928.779] wl_keyboard@94.key(464, 876721680, 29, 0)\n[3524929.184] wl_keyboard@93.key(464, 876721680, 29, 0)\n[3524929.473] wl_keyboard@91.key(464, 876721680, 29, 0)\nA print statement in swaylock_handle_key confirms that unlike firefox it handles all of these events; no wonder your password is wrong (unless it's aaaaaaaaaa and you type a single a :D) ; the apparent lag just is here because it tries to render many frames on every keystroke.\nwlroots is resending a wl_seat@capabilities events because when you switch tty (or suspend), logind unplugs and replugs all your input devices, so we have to tell the program we lost some capabilities then got them back...\nYou can either add some logic to remember the old keyboard it got (from wl_seat_get_keyboard in seat_handle_capabilities) and call wl_keyboard_destroy on it if it exists... or remember it got a keyboard from the seat already  and don't get a new one; I think that would work as this keyboard has no relation to the input devices but is just a way to get keyboard events from the seat.\nI have no idea why that problem is new though, feel free to bisect if you're curious.\nWaiting for your patches now we know what happens, feel free to ask more questions if I wasn't clear.. weston?. dpms will probably do the same thing as #2706 ; you can add a keylogger or run with WAYLAND_DEBUG=1 and check if you get multiple key events when that happens.\nIf it's the same, the solution is the same as well: make it so it only listens to each seat once.. Ah, sorry I had misunderstood your first message. If you have nothing that would make logind take input devices off I'm not sure what it would be, feel free to have a look at logs with WAYLAND_DEBUG=1 to confirm if you have the same problem (you should see multiple wl_seat@*.get_keyboard() and then wl_keyboard@*.key will be printed for each of the new keyboards). That would probably also be why copy/paste doesn't work; kitty is heavily mono-threaded so odds are it just asked to draw something and waits there..\nActually it's just calling eglSwapBuffer without making sure the view is ready to draw, so that just hangs forever because it cannot do the swap while the term isn't displayed.\nIt's creating frame callbacks but it doesn't try to do the swap depending on the callback coming; it shouldn't be too complicated to fix... that part is in the kitty code so at least there's no worry about having to fix glfw both in kitty and upstream.\nThe dev will probably just tell you to use Xwayland if you ask but he'll take a patch if you send one, open an issue there if there isn't one yet :). Hmm actually spoke too fast, I don't see where kitty would explicitly create a wl_surface_frame, but it does according to the WAYLAND_DEBUG output so the first thing to do would be to figure where that happens... Anyway, it's definitely a kitty issue, closing here - feel free to ask more question about how wl_surface.frame events work here anyway.. meh, if so that's going to be quite a bit of work to make kitty properly wait for windows to be ready to display, which will imply some glfw changes as well... It realy hasn't been designed for having a single program display multiple windows over different workspaces and things like that\notoh there's already a kitty option to set eglSwapInterval to 0, setting sync_to_monitor no - that seems to help with that\n(EDIT: finished sentence). The problem is the current glfw code doesn't expose the frame callback because eglSwapBuffers does it for us ; mpv is slightly different because they already did have a frame callback to check and know if it's safe to draw (the wl->frame.pending is reset in that callback)\nBasically, a wayland app that wants to \"sync to monitor\" needs to explicitly create a frame, and swap buffers once the callback comes; so the proper fix for kitty is more involved than what I thought at first because glfw does not register that callback.\nSo a proper fix would be for glfwSwapBuffers() to create a frame if there isn't one yet, and then do the actual swap when the callback comes. I think one glfwSwapBuffers when callback comes is guaranteed not to block (or rather, we should set eglSwapInterval(0) anyway so it'll know it doesn't need to create a new frame, and won't block whatever happens anyway?) and the kitty sync_to_monitor option would either schedule that callback to be in sync, or just call eglSwapBuffer directly if it's off.\neglSwapBuffer with eglSwapInterval(1) does the same except that it just waits until the callback comes inline, which is effectively why you call it racy, but we can do the work for it and remove the race - if I understood things correctly, if your window is hidden between the callback and the eglSwapBuffer call, it'll just draw that one whenever the window is displayed again, and won't send any new callback until then ; basically you're always one step late so it doesn't matter when the window is hidden.\nActually setting sync_to_monitor off does \"fix\" the hang behaviour already but I'd like to hear from people who reported the bug if it fixes their copy/paste, that was the original issue afterall...\n(fwiw, I understand kitty's glfw and upstream have permanently diverged, but I was talking about fixing both because we have some glfw people lurking around, Cc @linkmauve - this might be something others run into). You must already have the wayland socket fd somewhere in your events, the callback is a function that will be called when you process wayland events.\nBasicaly just create the callback when you would be swapping then forget about it (just check if there isn't another pending callback first) ; and in the callback function do the swap itself.\nI think it'll work fine for kitty, it's just not going to be pretty because wayland won't behave the same as other backends even if it's all hidden in glfw/context.c :/. Everyone\u2122 have capital letters in their password, and it works for me ; you'll have to do some debugging (the ring is cleared when shift is pressed, as you describe)\nIf you don't mind dispaying your password, a simple thing to try would be to make swaylock just print your password to stdout before trying to unlock, then run swaylock manually from a term, enter password once, switch tty to kill swaylock then go back to the terminal to see what was printed. It's not easy to tell with github still buggy, but #2925 will be a fix for this, there's no need to spend more time debugging this issue.\n(a first approximation to the logging you suggest adding is strace, though; much easier to run and gives all the bits you suggested to log). The problem is that swayidle wouldn't even get a resume event in that case, because the compositor only sends it if it considers it was idle when activity happens (can't really go around and notify every listener everytime something moves)\nWe need to add a way to tell the compositor \"from here on notify me the next time something happens\" or something similar; I don't think there's any way to do that with the current protocols. Maybe just set a 0s idle timeout? Have you tried something like this (can improve the pkill if it works)?\n swayidle timeout 0 'swaymsg \"output * dpms off\"' resume 'swaymsg \"output * dpms on\"; pkill -n swayidle' ?. > but mainly, swayidle will not exit and thus the pkill will never be reached.\nI have no idea what you're saying here. I just tried with timeout 1 and get what I would expect, but anyway as I said this can be improved and made into oneshot/whatever as you want it's just a user program (and you can always just fork it/maintain a local patch if Sircmpwn doesn't want to see that)\nAnyway, the interesting part of what I posted earlier is that you won't get a resume event unless you setup idle, so you need to create an immediate timer and fix that \"timeout 0\". No idle, no resume.. thought: read what I said; your \"new protocol\" is exactly requesting a new idle timer, possibly off the same manager, with a 0 timeout.\n(that'd work with either signal or oneshot, but as said you need to fix 0. You can test with a 1ms timeout until then). No. timers can coexist with different timings with no problem, you can have how many timers or how many idle managers you want in parallel. See what I wrote earlier.\n(EDIT: ok, I wasn't specific about this part, thought I was; but you can read the idle.xml protocol before asking for a new one, these aren't too bad to look at). Err? Why would it not need a resume command? If you don't need a resume command, you don't need swayidle, just run the damn initial command.\nI'll repeat myself one last time: you need something to ask the compositor to tell you when there is activity.\nidle as it is has two stages: it starts active, then if there is no activity until timer hits notifies the client once (idle command) and enters idle state.\nIn idle state, it will notify the first activity to the client and exit idle state, waiting for timer again.\nBasically what you need here is to add a new more/handle an event/whatever that would let you first execute a command and immediately enter idle state, to be able to wake up screens on first activity, then destroy that thing.\na 0-timer would be just that: create timer, (run your thing now or run it on the immediate idle event), run resume command when it comes, kill timer.\nI do not care what kind of API you give to that, you can execute the same command for all resume events or you can do them individually (it'd make more sense to do them individually if you only want to shutdown a single screen one-shot e.g. for video playback on one screen with multiscreen, but that's not my problem), but this doesn't need anything new. It's a pure user/client program, and that doesn't need anything more from the compositor, just do it and send a PR.\n(TLDR: I'm sorry if you think that's rude, I'm just tired of repeating what I consider to be the same thing over and over; I won't reply to this issue anymore.). > Now that I'm reading these two paragraphs, I'm completely confused. I just not sure how to interpret the (run your thing now or run it on the immediate idle event). Do you want to run a command immediately as swayidle launched, or what?\nAs you set the new timer. That can be as you send a signal to the running swayidle, start the swayidle --once, or whatever you want the user experience to be.\n\nI think, to lessen confusion it would help if you pulled up some example of how would your idea be used to implement a generic DPMS (which is \"disable screens either on timer or explicitly, then enable them back on the first activity\").\n\nI'm not talking about generic DPMS, I'm talking about the idle protocol; it can do DPMS if you want it to. I've stayed abstract because I don't want to impose anything, talking about commands because that's the current swayidle \"interface\" e.g. run commands when an idle/resume event comes\nAll I'm saying here is that what you want to do (setup something to black the screen and wake it up on activity) is possible with the current wayland protocols.\n(with the exception that timeout = 0 doesn't work, but it's a wlroots bug because wl_event_source_timer_update considers timeout = 0 to be disable timer, not a protocol limitation)\n\nWell, then the question is 'how often that \"no-op\" gonna happen\"? You don't want, for example, spam it on every activity, right? This is not good from battery perspective.\n\nresume event isn't sent if you're not idle, you can create and destroy timers anytime, timers are independant.\nYou can have your 5/10/whatever minutes timer run, and when you get signal setup a new 0-timer just to get new resume events; then once that's resumed destroy that new timer and be back to normal.\nThe only overlap is if you've forced idle, and the other timer elapses, you'll get two resume events... That's what he referred to as no-op, but if you want you could notice that and not do it, although I wouldn't recommend it if commands are different.. copy/paste issue is a known kitty bug, see https://github.com/swaywm/sway/issues/2770 - they're aware of it but there's no trivial fix, discussions half continuing after the lock in the linked kitty issue. Feel free to prod there.. > There should be a way to do that, but surely it is not a trivial change. It seems that i3 uses xkb_keymap_key_for_each to iterate through all keycodes in the keymap to create all possible keysyms to compare with, and then stores the matching keycodes with proper modifiers.\nSo if your layout happens to be ru while the config is processed (e.g. on reload), none of your bindings will work anymore because no key code will match the keysym? Surely not doing this for all possible keymaps, especially when input config can change at runtime with swaymsg.... Well, if all we care about is swaybg, we can just start it in a double-fork so we don't care about reaping (and just need to waitpid at start time); but that has the same problem we currently have is that we're killing a pid we have no idea if that still is swaybg.\nIf on top of that we don't kill at all but just destroy the wayland client like you do here (need some message passing on double-fork to identify the right one but we do that in sway exec anyway), that solves both problem without the need for a full blown manager. I just checked, destroying the client makes swaybg exit.\n(EDIT: there's still the possibility that another process took the same pid and is a wayland client so we'd destroy the wrong client, I guess that cannot be solved without such a manager, but it's not a new problem - not sure how much we care about that)\nEDIT2: note to self, recompile when you test something -- I take what I just wrote back, destroying the wayland client doesn't make swaybg stop, need to look into why\nEDIT3: actually it does die, we just start two swaybg too close to each other when reloading config (I have output foo + output * so reloading restarts swaybg twice), and the first one hasn't finished connecting to the wayland socket yet when we try to kill it, so it doesn't get terminated by closing the wayland connection because it's not connected yet... Then it stays forever.\nI think we could fix that by just reloading the output config once per output per reload, but I guess it's still not as reliable as a real service manager.. Anyway we're probably returning the mode after scaling in swaymsg -t get_output, I just tried to change scale and value follows.\nThat should be trivial to fix (just remultiply or find the correct field), send a PR!. Not sure what made you start looking at output_enable(), I think the ipc code where the resolution comes from is ipc_json_describe_node -- the incorrect mode is labelled \"rect\" according to pretty_print_output. That should be enough to find where the values come from :)\nThat said, the fix won't be as obvious as I first though since the output function does what emersion said (and for ipc we want the wlr_output's dimensions, not the output's), but has other callers that expect the scaled dimension... We'll need to make the other callers use a new function I think, can discuss this once you've found it. Or what he just said works too, can add a new field to the json representation and use that in the pretty function - it's actually probably cleaner. That's basically forcing mako to use the overlay layer if someone wants to display over fullscreen, which may or may not go above a lockscreen depending on the compositor; I'm not sure that's ideal. (I don't think they have any way of telling if a lockscreen/other overlay window covering the whole screen is active; did I miss something that'd make this possible?)\nI initially thought this was on purpose as well (for e.g. easier direct scan-out) but we don't do it anyway, we even have to map unmanaged xwayland window because of X11 context menus (and with this probably come popups as well?); was this discussed somewhere I could find traces of to refresh my memory?\nThe protocol only says \"Fullscreen shell surfaces are typically rendered at the top layer\", which could arbitrarily display part of the top layer or not at the discretion of the compositor (because \"ordering within a single layer is undefined\"), so I believe it's not set in stone.\n(I won't insist more than that if you repeat the same thing, I'm mostly curious what the rationale was). \n\n\n(I don't think they have any way of telling if a lockscreen/other overlay window covering the whole screen is active; did I miss something that'd make this possible?)\n\nCompositors have means to decide whether a lockscreen is active or not, e.g. through the layer-shell namespace or the wlr-input-inhibit protocol.\n\nHmm if we can identify one of the shell in the overlay layer as a lockscreen surface and display only that one within the layer I guess that would make me less reluctant with the principle, but I'm somehow not convinced this will be done :P\n\n\ndirect scan-out\n\nIt's something I'd like to work on.\n\nEven if you do, you'll need to disable it if there are unmanaged x11 window, subshells, something in the overlay layer... Not much different to also check for the top layer; that wasn't really a good argument to not do it, just the idea I had.. Looks like that since 82423991a8512ab97fbc41d1e190e709c58bc346, the reload is called twice:\n - once when you run the command with a \"validating\" flag; basically checks for syntax errors and fail the command properly if there's a problem\n - once again \"for real\" in an idle event a bit later.\nIt looks like each command have to manually check for the config->validating flag themselves, and exec_always doesn't - that'd be an easy fix, and although I don't really like the design I don't see much way around this.\nFeel free to submit a PR to add the check, and you can reword the \"Performing configuration file reload\" message on the first pass while you're at it to be less confusing :)\n. Alternatively could try to use it or if it fails fallback to auto, but I agree using the same environment variable isn't ideal.... phabricator link of the same: https://phabricator.services.mozilla.com/D12255 (more direct for people like me)\nHaven't looked at the code in details but yes I believe this should help; not listing all global registries everytime you need something is the way to go! :)\nI'm too lazy to rebuild firefox, but someone here ought to be able to confirm sooner or later\n. Could you squash the commits so there is only one?. If it's an optimization thing try running qemu with an addition -cpu host switch, that might help. Welcome to recent gcc versions that enable optimizations which require hardware feature not present in \"bare\" VMs - most virtualization tools will enable a subset of -cpu host which would make this work though.\nIf you really care about this you can pass some CFLAGS like -mtune=generic when building... virtually everything (your problem is in libffi).\nClosing this for now, this isn't a sway issue.. There are ways to use git that do not rely on a .git directory (environment variable, .git file redirecting to another directory (e.g. worktrees), etc)\nI would run the git commands as long as git is found, and if their output is empty fallback to the else code instead.\n. >> _sway_assert isn't really noreturn, we need to handle the case in which it returns.\n\n\n(Besides, there is a C11 way to mark functions as noreturn)\n\nApparently, Clang is not bothered by that, and it does not impact code generation, but only helps with static analysis.\n\nNo, it's not that clang is bothered or not, it's that we really need to handle what happens after a sway_assert fails. The 19 \"bugs\" clang find on this are probably valid bug, just like assert for release builds with NDEBUG the function does return and sway must continue working.. argc is 1 for a command with no argument with just argv[0] set, so yes it is. You'll have 1 + number of arguments.. should free seat here. should free seat->name and seat here (free_seat_config isn't safe to use here because it doesn't check seat->attachments before using it). ditto should free seat. setting like accel don't make sense to me for non-pointers. I have no idea about tap and other settings though, but I check that the input device is of type WLR_*_POINTER before calling this function... \nAccording to https://wayland.freedesktop.org/libinput/doc/latest/group__config.html#details we seem to only set options that make sense for pointers and touchpads (which is pointer for us), but there are functions to probe if the device is capable so we could remove the wlr type check and use these instead.\nI think it's a bit more ambitious than just reviving the sway-input feature though, probably should get its own ticket/PR if we want to be that modular?. (nitpick) Block could be free_flat_list(binding->keys), it used to be that in old free_binding() function. (nitpick) no need to null-check for free. need to check if (!binding) { return; } for these functions?. this needs to be a calloc, because we can pass this to free_sway_binding halfway on invalid length with --release argument later on and this will segfault on free(binding->command) that is invalid pointer in this case.. ditto, calloc needed.. (nitpick) weird indentation?. Yeah, I thought about that, but I have no idea how to return something else? We can't return something on the stack or a null... This is pretty ugly but I need to access both old_config and the global variable 'config' inside this now; I'd usually be adding a second \"optional\" argument to compare to but that doesn't seem to be the style currently.\nOn final free_config at sway shutdown we won't be destroying seats (as they're all in the current config) but this is fine because the display going down should free stuff appropriately.\n. . . now I'm writing that though this actually isn't fine for another reason, we aren't removing from the list as we process it so that should have been accessing freed names, I'll repush something to kludge that out, although this really makes me want to go for extra argument.... Done the extra argument instead, not sure if you can access the old code somewhere as force pushed but alternatiive to that was renaming config to old_config or something to access the global variable.. Can do a separate pass instead of trying to force my way into accessing the new config here I guess, renaming this variable is just as bad in my opinion. merge should be the other way around?. doh, you're right, I was convinced it was the other way around for some reason... Even opened its implementation and didn't read what I had under my eyes, I need more sleep -_-. local includes should use double-quotes?. All I have is that backtrace:\n==1977==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000048 (pc 0x00000045368b bp 0x7fffe1220f30 sp 0x7fffe1220f10 T0)\n==1977==The signal is caused by a READ memory access.\n==1977==Hint: address points to the zero page.\n    #0 0x45368a in container_remove_child ../sway/tree/layout.c:124\n    #1 0x4555c8 in container_move ../sway/tree/layout.c:410\n    #2 0x440543 in cmd_move ../sway/commands/move.c:180\n    #3 0x40c3c1 in execute_command ../sway/commands.c:358\n    #4 0x4312ae in keyboard_execute_command ../sway/input/keyboard.c:98\n    #5 0x4317d5 in keyboard_execute_bindsym ../sway/input/keyboard.c:166\n    #6 0x432fdc in handle_keyboard_key ../sway/input/keyboard.c:372\n    #7 0x7f9dcd054e58 in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f9dccffcfda in handle_keyboard_key ../backend/libinput/keyboard.c:71\n    #9 0x7f9dccffbaaa in wlr_libinput_readable ../backend/libinput/backend.c:35\n    #10 0x7f9dcd2bcf01 in wl_event_loop_dispatch (/lib64/libwayland-server.so.0+0x9f01)\n    #11 0x7f9dcd2bb601 in wl_display_run (/lib64/libwayland-server.so.0+0x8601)\n    #12 0x40abcc in server_run ../sway/server.c:140\n    #13 0x409ab5 in main ../sway/main.c:418\n    #14 0x7f9dcc7ae1ba in __libc_start_main (/lib64/libc.so.6+0x231ba)\n    #15 0x408039 in _start (/opt/wayland/bin/sway+0x408039)\nNow that I'm looking at it again you're right, this change is most likely wrong - I was just thinking that since we're messing with sibling it would make more sense to move it out but we are adding container back in so that was likely as intended, just something wrong with it.\nI'll just remove that commit and open an issue, this is very close to the other crash I couldn't spend time on. force pushed spaces (and rebased). s/font/hide_cursor/. nice try, but trying to disable hide with hide_cursor 0 also sets it back to 100.\nOnce that's fixed I'm happy though ;). Not sure about what unmanaged means in the first place so I might be off the mark, but for layer shell you check if the seat's focus is on the unmapped surface ; this might need a similar check here?\nYou wouldn't want focus to change because some x11 window depops in another workspace due to a timeout or something.. crap, I actually thought of it when I wrote this because the previous line was way too long and forgot to wrap it. done in a force push.. (nitpick) Even if the implementation has been refactored to separate the rest of the destroy (now in surface notify destroy) and this function that is literally a free with extra checks, I'd keep the name destroy here as that's what we have all around in the impl vectors.\nYou never know if in the future that'll need to do a bit more work again, and it won't be the first destroy function that just frees its argument :). That check is technically no longer required, but I guess it doesn't hurt, just wanted to bring it up. It's a problem we have a lot in sway but I think even static function names should have a semi-obvious name that says what they work on, progress_queue in particular might be difficult for someone to understand in a stack trace here. I'm as bad with names as anyone else though, transaction_process or something? (might turn out difficult to differentiate with apply?)\nWell, just a thought.. just transaction_progress_queue is fine then, it's the main thing I find could be confusing.. I don't think it's worth checking for pid != getpid() here, we double-fork so that should never happen (except for swaybar and a few exceptions maybe), and if it does happen we'll still bail out because sway probably isn't too far from pid 1.\nWe could spare one iteration and stop a pid > 1 though, I don't think init will ever be in a workspace :D. That will really do the switch and a transaction, then when view_map() ends it will do a second arrange_and_commit... then as you pointed out on irc if this was assigned through a rule the focus is changed back again in a 3rd transaction?\nActually do we ever want to switch to the workspace where a new view got created? That happens when matching parent's pid?\nif e.g. firefox ever wants to open a popup in my back when I'm typing something in the terminal I sure wouldn't want switching to firefox's workspace.... Why remove pw, it can only match once?. It's almost never right to just wl_list_remove something. It won't be able to cleanup after itself on destroy if that happens before the timeout (and then this will be use-after-free here) and it cannot know if the list has already been cleaned up.\nI'm actually not sure I understand the timeout either tbh, in my earlier example, if firefox is over one minute old then its children will not pop in its workspace? What's the idea behind the \"inconsistent\" behaviour?\nI think the whole logic here can only work if we stop double-forking, but instead single-fork and handle sigchld and cleanup pids as they die... i3 does double-fork, how does it behave?. Possibly far fetched, but would it be possible to have transaction 1 with views A & B, transaction 2 with views B & C.\nWith what you just said, if A acks 1st configure, B acks 2nd configure directly, when C is done we'll redraw B & C but not A?\nI like your previous idea (mark first transaction as waiting-for-2nd, then apply both at once when 2nd is ready) better. Yeah, I think that'll work. It's less subtle than what was suggested earlier but it should be OK in practice.. I'd be much less subtle and just set list->length to 0, list_add does reallocs but list_del never bothers with reducing capacity either so meh.. I didn't realize we allowed that syntax, but there are plenty around so I guess it's ok :). This is the only wlr function named 'x_from_surface' instead of 'x_from_wlr_surface', we might want to consider renaming it in wlroots first.. I would do that in a language that optimizes tail-recursion... But I guess once again we don't really care, I'll do that.. Good idea. hm, right, I wonder why I was convinced it didn't. Guess optimisations weren't turned on properly when I last checked. opened swaywm/wlroots#1102 ; this PR won't build until the other one landed. I kind of want to know if someone tries to use idle inhibitor on something that doesn't have a view, but I can log it on that side; will remove this.. I plan on using it once at idle inhibitor init rather than every frame (even if there will be a check at every transaction which will be somewhat redundant on interactive resize :/), but yeah can't know where this will be used later. It's gone (force pushed). workspace_switch(ws) still looks here, doesn't add up with your (outdated) comment?. This is checked at the very start of the function, and argc isn't reassigned. Tell that to whoever wrote that if in the first place, but meh, sure. Well tbh relying on list length when there can be holes is pretty silly in the first place, a proper fix would be to walk over the list and look for the smallest number not taken (keep calling get_ws_by_name until none comes up?) or the highest number actually used (which could be much smaller than list length if they use names, and only cost trying to convert strings to ints), or it could be assuming the 0th output is set and want to print ws_num with a useless ++ (ok that one is far fetched given default config sets workspace 10 on 0 key)\nTempted to call an out of scope on this one, just setting +1 doesn't fix much, and I'm too lazy to decide on what kind of algorithm to pick. probably. Yeah probably, same in handle_destroy. meh, that means I need to check the other warnings like this I ignored because it's just not dead code -_- but righ, that sounds logical.. Yeah I'll fix it. You underestimate how much of a pain this whole serie of patch was though :P. It's done :) (force pushed after fixing each individual commits). That's precisely what this code handles: if any inhibitor has a visible view, the wlr_idle will be inhibited (the argument for wlr_idle_set_enabled is enabled so !inhibited)\nIf no inhibitors are on visible views then inhibited will have its default false value and idle timers will be reactivated.. Good point. I'll do that at the same time as the rest if I get an answer to my question at the end of original post. Ah, this loop sneaked in as I was working on leaks and I wondered why I couldn't find this chunk anymore.\nIt's unrelated so I'll remove it for now. ah, this is actually not correct; now that I've found the doc of json_object_to_json_string it says json_object_put should free it but that's no longer available in this scope.\nI guess we should strdup this. Done that.. Could this possibly have the same problem as verified, e.g. we'd need to wait till all surfaces are not dirty anymore?\n(well, I guess forking is faster than password validation so it's probably fine; but we'd ideally want to make sure the compositor has created the keyboard-exclusive layer surface before forking; not just that we asked the compositor to create it). Well if this change is about \"waiting for the lockscreen to be \"safe\" before forking\" then it's still lying a bit, that's what I meant yes.\nMeh I guess this can wait.. fwiw I found that function after using snprintf like that myself, but for integer string length conversion we have this in common/util.c (declared in include/util.h):\nint numlen(int n) {\n        if (n == 0) {\n                return 1;\n        }\n        return log10(n) + 1;\n}\n(It doesn't handle negative integers nor the full range of size_t, but both are fixable by just changing the prototype of the function. We only have one user though, it's a shame but it might be just as well to remove that function...). similarily I think this should match against known pids (e.g. swaybg_pid etc) and unset the values if it died, so we don't kill a random process later if a user killed swaybg themselves.. I would also do the kill before wl_client_destroy (before the whole loop?).\nIf a well-behaved client notices the destroy (that closes the socket connection right?) and exits before we send the kill, it's possible that the pid gets reused meanwhile which would make us kill a random process, or in most cases we could log an error.. You can use a global gitignore, or make subdirectories inside build e.g. build/gcc build/clang if you care about not having one. ",
    "CedricCabessa": "I confirm the bug, and I can not login anymore when a popup is shown on top of swaylock.\nIt is easy to reproduce with a few line of python (pyqt) creating a modal window:\n```\n!/usr/bin/env python3\nimport sys\nfrom PyQt5 import QtCore, QtWidgets\nif name == \"main\":\n    app = QtWidgets.QApplication(sys.argv)\n    win = QtWidgets.QMainWindow()\n    dialog = QtWidgets.QDialog(win)\n    dialog.setModal(True)\n    dialog.exec_()\n```\nThen, in a terminal:\nswaylock &  (sleep 5; ./modal.py)\nI've a simple patch here https://github.com/CedricCabessa/sway/commit/d6cc6600d0e69d7ca84064e4ea94e89055a83a42\nIt is not complete as the modal window still pass through swaylock, but at least the window do not steal the focus and I can type my password.\nI didn't PR it as it is not complete and I'm not confortable with the meaning of the other type like WLC_BIT_OVERRIDE_REDIRECT\n(my patch target 0.15). It crash only when the scale factor are different.\nWill try to come up with a fix or a stack trace by the end the week. ",
    "dantleech": "hi, i have the same issue - how did you solve this?. Upgraded to 0.8 but same thing:\nwlc --version\nwlc 0.8\nExact error:\n/home/daniel/www/sway/sway/container.c: In function \u2018new_view\u2019:\n/home/daniel/www/sway/sway/container.c:305:25: error: implicit declaration of function \u2018wlc_view_get_instance\u2019 [-Werror=implicit-function-declaration]\n  const char *instance = wlc_view_get_instance(handle);      \n                         ^~~~~~~~~~~~~~~~~~~~~                                   \n/home/daniel/www/sway/sway/container.c:305:25: error: initialization makes pointer from integer without a cast [-Werror=int-conversion]\n/home/daniel/www/sway/sway/container.c: In function \u2018new_floating_view\u2019:\n/home/daniel/www/sway/sway/container.c:345:25: error: initialization makes pointer from integer without a cast [-Werror=int-conversion]\n  const char *instance = wlc_view_get_instance(handle);\n                         ^~~~~~~~~~~~~~~~~~~~~\ncc1: all warnings being treated as errors\nsway/CMakeFiles/sway.dir/build.make:2150: recipe for target 'sway/CMakeFiles/sway.dir/container.c.o' failed\nmake[2]: *** [sway/CMakeFiles/sway.dir/container.c.o] Error 1\nCMakeFiles/Makefile2:369: recipe for target 'sway/CMakeFiles/sway.dir/all' failed\nmake[1]: *** [sway/CMakeFiles/sway.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2#. 0.8 seems to be the latest, or this isbthe wrong lib?: https://github.com/WeblateOrg/wlc\nOn 2 June 2017 14:28:08 BST, Fabio Alessandro Locati notifications@github.com wrote:\n\nwlc 0.9 is out, so I guess you should try with it\n-- \nYou are receiving this because you commented.\nReply to this email directly or view it on GitHub:\nhttps://github.com/SirCmpwn/sway/issues/1058#issuecomment-305786783\n\n-- \nSent from my Android device with K-9 Mail. Please excuse my brevity.. ",
    "lewishsh": "Have any of you managed to figure this out? I'm having this issue as well, but only with context menus in certain apps like those from the Libre Office suite. Firefox, thunderbird and evince on the other hand have fully working menus.\nNot sure if this is related, but the text in menus that aren't working is also pretty blurry.. ",
    "gnidorah": "For me it happens only with Wayland native programs, XWayland programs work coreectly. @SirCmpwn If I name sway wrapper just sway like he did, I get a behaviour similar to one on video.. @SirCmpwn \nThe reason is\n$ grep -Ir get_socketpath -C1\ncommon/ipc-client.c-\ncommon/ipc-client.c:char *get_socketpath(void) {\ncommon/ipc-client.c-    FILE *fp = popen(\"sway --get-socketpath\", \"r\");\n--\nswaymsg/main.c- if (!socket_path) {\nswaymsg/main.c:         socket_path = get_socketpath();\nswaymsg/main.c-         if (!socket_path) {\n--\nbut sway on his $PATH is a wrapper (citing @WhyNotHugo  when I run sway on my terminal, it actually runs...)\nXKB_DEFAULT_LAYOUT=es\nXKB_DEFAULT_OPTIONS=caps:escape \n/usr/bin/sway -d > .cache/sway.log\nwhich ignores --get-socketpath argument and just launches a new sway session. Thanks. We should wait then.. @bearcatsandor Funny solution, thanks. Would be nice to find .desktop files parser for that to get something similar to i3-dmenu-desktop/j4-dmenu-desktop. @SirCmpwn That's what I currently use, but It uses dmenu which requires xwayland. @4e554c4c Is this a culprit?\n```\n10/20/17 21:30:58 - [sni_watcher.c:153] RegisterStatusNotifierItem called with \"/org/ayatana/NotificationItem/example_simple_client\"\n10/20/17 21:30:58 - [sni_watcher.c:157] This item is not valid, we cannot keep track of it.\n. @4e554c4c Here it is https://askubuntu.com/questions/42211/how-to-create-unity-indicators/234204#234204 and here are build instructions on the top of file https://github.com/dorkbox/SystemTray/blob/master/test/example.c\nIt worked for me under i3 and plasma5. 'go-jump' icon should be in theme.. Here to note that KDE SNI works great for me, minor issue is that the right click menu shows in the top right corner, while the bar in my config is at bottom.. @4e554c4c Indeed it fixes, thank you!. @4e554c4c Another little issue is when I click on ksni4 menu entry under i3, menu auto closes as I expect, but under sway it stay open until I click tray icon again.. @4e554c4c Icon updating doesn't happen on external HDMI monitor but happens on internal eDP with default config. Is this a problem with tray or with something else? Thanks. @SirCmpwn Ok, sorry! Same with 0.15-rc3\nContext: https://github.com/NixOS/nixpkgs/pull/30493#issuecomment-337249453 (I'm getting the same backtrace with 0.15-rc3)\nThe question is what brought XWayland into runtime dependence. Perhaps change in wlc?\nSway 0.13 and wlc 0.0.9 worked fine with and without XWayland installed.. @SirCmpwn Copypasted from the above link\ngdb> bt\n0  0x00007f4798edf0f7 in wl_list_remove () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n1  0x00007f47997ce3a7 in wlc_xwm_release () from /nix/store/ia6jgf3yw2nrz0704dbnnk09bcrx6rsj-wlc-0.0.10/lib/libwlc.so.0\n2  0x00007f47997b34c0 in xwayland_event () from /nix/store/ia6jgf3yw2nrz0704dbnnk09bcrx6rsj-wlc-0.0.10/lib/libwlc.so.0\n3  0x00007f47997cbafc in wlc_xwayland_terminate () from /nix/store/ia6jgf3yw2nrz0704dbnnk09bcrx6rsj-wlc-0.0.10/lib/libwlc.so.0\n4  0x00007f47997cc422 in destroy_event () from /nix/store/ia6jgf3yw2nrz0704dbnnk09bcrx6rsj-wlc-0.0.10/lib/libwlc.so.0\n5  0x00007f4798eda7bc in wl_client_destroy () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n6  0x00007f4798eda8d8 in wl_client_connection_data () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n7  0x00007f4798edcae2 in wl_event_loop_dispatch () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n8  0x00007f4798edaf8a in wl_display_run () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n9  0x00007f47997c992c in wlc_run () from /nix/store/ia6jgf3yw2nrz0704dbnnk09bcrx6rsj-wlc-0.0.10/lib/libwlc.so.0\n10 0x000000000040bc81 in main ()\n11 0x00007f47974f4560 in __libc_start_main () from /nix/store/yydnhs7migvlbl48wpsxan1yvq2icbr9-glibc-2.25-49/lib/libc.so.6\n12 0x000000000040be3a in _start ()\n. @SirCmpwn\nProgram received signal SIGSEGV, Segmentation fault.\n0x00007ffff72c90f7 in wl_list_remove () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n(gdb) bt\n0  0x00007ffff72c90f7 in wl_list_remove () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n1  0x00007ffff7bba95e in wlc_xwm_selection_release (xwm=) at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/xwayland/selection.c:460\n2  0x00007ffff7bb9997 in wlc_xwm_release (xwm=xwm@entry=0x7ffff7dd73b0 ) at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/xwayland/xwm.c:853\n3  0x00007ffff7b9d620 in xwayland_event (listener=0x7ffff7dd7c00 , data=) at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/compositor/compositor.c:318\n4  0x00007ffff7bb6f7c in wl_signal_emit (data=0x7fffffffc8ef, signal=0x7ffff7dd7e00 ) at /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/include/wayland-server-core.h:357\n5  wlc_xwayland_terminate () at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/xwayland/xwayland.c:225\n6  0x00007ffff7bb78a2 in destroy_event (listener=, data=) at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/xwayland/xwayland.c:209\n7  0x00007ffff72c47bc in wl_client_destroy () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n8  0x00007ffff72c48d8 in wl_client_connection_data () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n9  0x00007ffff72c6ae2 in wl_event_loop_dispatch () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n10 0x00007ffff72c4f8a in wl_display_run () from /nix/store/xyajc0iyp9z1pkmssfazjjsvw1r9kc68-wayland-1.12.0/lib/libwayland-server.so.0\n11 0x00007ffff7bb4cfc in wlc_run () at /tmp/nix-build-wlc-0.0.10.drv-0/wlc-v0.0.10-src/src/wlc.c:260\n12 0x000000000040c018 in main (argc=, argv=) at /tmp/nix-build-sway-0.15-rc3.drv-0/sway-0.15-rc3-src/sway/main.c:464\n```. @SirCmpwn Thank you much!. @4e554c4c Icons from theme work, yay! Thanks much for your work! :-) Icons by path will need another quirk.. @4e554c4c Thank you much! Though I think it was issue at my side.. @4e554c4c \n\nAllow correct item to get icon updates\n\nWorks great, thank you much!. @4e554c4c After this commit https://github.com/swaywm/sway/pull/1431/commits/92078345eab4ec5dfed567f951b4ed105f577b57 some programs I use crash the traybar with\nprocess 16190: type struct 114 not a basic type\n  D-Bus not built with -rdynamic so unable to print a backtrace\nfish: 'swaybar -d --bar_id bar-0' terminated by signal SIGABRT (Abort)\nAnd with previous commit icon not shown, so perhaps they are related commits.. @4e554c4c It is, thanks a lot!. @4e554c4c Thanks for the last commit! Works fine according to swaybar -d output.\nBTW considering that there are already many useful tray fixes and improvements in this PR and considering that the sway-traymenu is some work and it will likely depend on wlroots, maybe it's better to split this PR into the two (ready and wip)?\n1. 1888677f8810614776a92f19352e0b39b9cb4797..d5aa676bfbcdbbc7b9abbeb0a303b16b0ad69c24 for 0.15.2\n2. WIP 2de973b99242f251f94d94a14799997ca978f0a7.. .... @SirCmpwn @4e554c4c Thanks!. @SirCmpwn Sorry, pal. Let me reformulate that.. @SirCmpwn Ok, I've tracked the issue and described it and proposed a solution for distro maintainers. I believe though that only NixOS currently does wrapping. Sorry for the noise.. @emersion It fixed issue for me.. @emersion Works fine!. @ianyfan Works fine for me. Thank you much!. @ianyfan Works fine for me. Thank you much!. @RedSoxFan HDMI-A-2 native resolution is 1920x1200. eDP-1 native resolution is 1920x1080. Again I got issues with games when I forgot to include\noutput HDMI-A-2 pos 0 0 res 1920x1200\nin my config. After I've added it, games started to work.\nI just think there should no be error or crash with games in that situation, there should be either warning that something is missing, or games should just work.. @RedSoxFan \nwith-line.txt\nwithout-line.txt\nThe only difference is:\n```\n--- without-line.txt    2019-03-03 22:35:28.383772291 +0300\n+++ with-line.txt       2019-03-03 22:34:15.455752680 +0300\n@@ -9,7 +9,7 @@ Output eDP-1 'Sharp Corporation 0x1447 0\nOutput HDMI-A-2 'Acer Technologies Acer V243PWL LV8080034233'\n   Current mode: 1920x1200 @ 59.950001 Hz\n-  Position: 3200,0\n+  Position: 0,0\n   Scale factor: 1.000000\n   Transform: normal\n   Workspace: 2\n@@ -35,4 +35,3 @@ Output HDMI-A-2 'Acer Technologies Acer\n     1280x1024 @ 75.025002 Hz\n     1680x1050 @ 59.882999 Hz\n     1920x1200 @ 59.950001 Hz\n. `xwayland-1.20.4`\nOk, I've tried some more games (supertux, wesnoth...) and they seem to work. Perhaps that's etr issue then.\nSome games fail with \"couldn't init graphics\", but I suppose that's distro issue.\nI just wonder though whether the following could influence on etr\n-  Position: 3200,0\n+  Position: 0,0\n```. ",
    "WeaponX1": "Hi Drew,\nPlease don't get me wrong, I'm a suckless/dynamic window manager fanatic and prefer to use keyboard most of the time however such a feature would better provide mouse support i.e. drag & drop of windows into position. It is a rather very useful functionality... not sure if inserting an empty window is the best solution IMHO. I was thinking of a command that can disable/enable dynamic scaling of windows altogether.\nIf you've ever used Notion Window Manager, you'd understand where I'm coming from as I'm migrating to Sway and it seems to be the only feature that I guess I will be missing.\n\nFrom: Drew DeVault notifications@github.com\nSent: January 29, 2017 12:37:58 AM\nTo: SirCmpwn/sway\nCc: WeaponX1; Author\nSubject: Re: [SirCmpwn/sway] Feature request: Please add a feature to disable window scaling (#1064)\nI'm inclined to say \"no\" to this. I've considered allowing users to create empty spaces, but to replace a window with an empty space when it closes would be quite complicated and niche.\n-\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHubhttps://github.com/SirCmpwn/sway/issues/1064#issuecomment-275895257, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AYPAtJKOSCqZwKQ6hmjWFS3UeLKligytks5rXCW2gaJpZM4LwteP.\n. Fair enough Sir.\nCan't thank you enough already for your dedication to the project :). ",
    "Moelf": "Do we have this implementation yet? No?. How should I pass a image/png to swaymsg clipboard?\nUsing scenario: screenshot to the clipboard.. I'm using Kitty terminal, and it's also floating for no reason. > \n\n\nI'm using Kitty terminal, and it's also floating for no reason\n\nI also use kitty but it does not float by default. I'm on version 1.0-beta ga918844e.\n\nWhat version of wlroots? My sway has 5fdfbbe, which was last beta release.\nupdate: going to master branch at g41f744c2 fixed the Kittty & Spotify. Although for some reason, Kittyy background is no longer transparent\nbash\nbackground_opacity   0.75. > Is kitty using Xwayland?\nI think so? https://github.com/kovidgoyal/kitty/issues/855#issuecomment-418365841. > Okay. Maybe related to swaywm/wlroots#348\n\nI'm actually happy about this issue because it'll potentially make debugging much easier.\n\nGood to hear that :+1: . Also it seems forcing wayland for Kitty would fix it in this specific situation:\nin sway/config\nset $term env KITTY_ENABLE_WAYLAND=1 kitty. > > > Okay. Maybe related to swaywm/wlroots#348\n\n\n\nI'm actually happy about this issue because it'll potentially make debugging much easier.\n\nGood to hear that +1 . Also it seems forcing wayland for Kitty would fix it in this specific situation:\nin sway/config\nset $term env KITTY_ENABLE_WAYLAND=1 kitty\n\nDo you have a copy/paste issue with KITTY_ENABLE_WAYLAND=1 ?\nTry to copy content from kitty (CTRL+MAJ+C) and paste it in a another container (x11 and wayland, try both) in another workspace\n\nIt works within Kitty & from Firefox -> Kitty, but not Kitty -> Firefox. I can live with it I guess.. > @mninja Please upgrade wlroots and sway to the latest commit.\nspeaking of which I haven't been able to compile sway despite successful installing wlroot-master, \nerror: \u2018WLR_INPUT_DEVICE_SWITCH\u2019 undeclared. > > speaking of which I haven't been able to compile sway despite successful installing wlroot-master,\n\n\nerror: \u2018WLR_INPUT_DEVICE_SWITCH\u2019 undeclared\n\nIt sounds like either you have multiple version of wlroots and an older one is being used or wlroots is not updating correctly. WLR_INPUT_DEVICE_SWITCH was added to wlroots fairly recently (12 days ago)\n\nI compiled wlroots and installed it following what in https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=wlroots-git  how do I make there's no other version of wlroots\nEDIT: I solved the issue, it turns out those flags in PKGBUILD are not necessary and harmful in this case. Just meson build for both wlroots and sway would work.. > Some apps' menus don't work because they use the canonical dbus protocol, which hasn't been implemented yet.\n\nHowever, their status should change, can you attach a debug log?\n\nhttps://pastebin.com/y5pRY5Cw. > Ah, sorry, I mean for swaybar. This probably means you have to run it manually, i.e. swaybar -d -b <bar-id> (use swaymsg -t get_bar_config to get ids)\nhttps://pastebin.com/CYj5z8W6. the delay in icon status update is fixed in the latest master.. > If you want a workaround, I recommend fcitx.\ndo the dev group use fcitx?. > I use ibus-daemon --xim on sway startup and set the same environment variables. Try that?\nsame effect as --drx, so still buggy.. now it's fixed in master somehow. ",
    "Jesin": "@jcf Just a reminder that it can be dangerous to pacman -Sy without -u (see System maintenance#Partial upgrades are unsupported).. @jcf Just a reminder that it can be dangerous to pacman -Sy without -u (see System maintenance#Partial upgrades are unsupported).. ",
    "jcf": "\nDid you reboot after switching drivers?\n\n@SirCmpwn yes.\n\nYou might also have to specify the card with WLC_DRM_DEVICE=card{0,1}\n\nI'll give this a try this week.. Setting the aforementioned environment variable before running Sway didn't help.. ",
    "rassouly": "I can reproduce the bug.. @zandrmartin You are right. My bad.. I had a similar issue. How are you launching sway? Can you reproduce the issue by launching sway from a terminal? . Then I don't know. For reference, I solved my issue by replacing dbus-launch --exit-with-session sway by simply sway (I can't remember why I had the dbus-launch stuff before) in my session script.. Hi,\nI also use a French keyboard and I use the following to change workspace.\nbindsym Mod4+ampersand workspace 1\nbindsym Mod4+eacute workspace 2\nbindsym Mod4+quotedbl workspace 3\nbindsym Mod4+apostrophe workspace 4\nbindsym Mod4+parenleft workspace 5\nbindsym Mod4+minus workspace 6\nbindsym Mod4+egrave workspace 7\nbindsym Mod4+underscore workspace 8\nbindsym Mod4+ccedilla workspace 9\nbindsym Mod4+agrave workspace 10\nI can't recall how I found the names though.. I just used the code from the bash completion. I hadn't looked at it very much but sed doesn't seem robust to parse json.. That was easier than expected. I also fixed the bash completion.. ",
    "mxab87ucgjf46heo": "@SirCmpwn Thank you. I'd be interested in joining this project, or shadowing to some extent if possible.. Thanks. Will do.. @SirCmpwn Thanks & sorry for missing.. ",
    "BrighBrigh": "I tried that and the issue persists. I am also noticing it with other applications such as Libreoffice Writer. When I attempt to Export a document as a PDF, a dialog pops up and the program crashes. I am not experiencing this in i3 nor in GNOME with Wayland. . sway version:  (2016-12-27, branch \"\")\nwlc: wlc-0.0.7-1\n. Also, I just wanted to say that I really appreciate what you do. Sway is an amazing WM and I look forward to seeing where the future takes it. \nEDIT: I see that this is a known problem with wlc implementation of xdg. Sorry to bother you with this. . That did it! Good looking out.. ",
    "boydkelly": "ok,  I fixed that, but it still does the same....  As mentioned above emacs, gvim, firefox etc actually display correctly as under gnome also with scale 2.  It is only the sway status bar that needs the magnifying glass.  When I press $MOD d the status bar becomes bigger and font readable.   When I press esc, it goes back to tiny.. ok,  I fixed that, but it still does the same....  As mentioned above emacs, gvim, firefox etc actually display correctly as under gnome also with scale 2.  It is only the sway status bar that needs the magnifying glass.  When I press $MOD d the status bar becomes bigger and font readable.   When I press esc, it goes back to tiny.. Hi,  Ok I've been trying this under a kvm and on my laptop.  I have problems on both, although under the kvm the bar looks ok until y ou press $mod d as indicated.  On my laptop i have the following in my config:\noutput eDP-1 pos 0,0 res 3200x1800\noutput eDP-1 scale 2\nBut a swaymsg -t get_outputs will show the res a 3200x1800 as requested but the scale continues to return 1.  The setting does't seem to take.\nThanks\n. Hi,  Ok I've been trying this under a kvm and on my laptop.  I have problems on both, although under the kvm the bar looks ok until y ou press $mod d as indicated.  On my laptop i have the following in my config:\noutput eDP-1 pos 0,0 res 3200x1800\noutput eDP-1 scale 2\nBut a swaymsg -t get_outputs will show the res a 3200x1800 as requested but the scale continues to return 1.  The setting does't seem to take.\nThanks\n. Thank you!  That works.  Oddly if I set the resolution to 1024x768 then the Scale setting will take. (On two lines). But not with 3200x1800.  . Thank you!  That works.  Oddly if I set the resolution to 1024x768 then the Scale setting will take. (On two lines). But not with 3200x1800.  . ",
    "mpcjanssen": "Putting it on one line works for me:\noutput eDP-1 pos 0,0 res 3200x1800 scale 2. ",
    "linkmauve": "https://github.com/Cloudef/wlc/issues/167 looks like the proper issue, thanks.. I just tested it, and this patch does fix #2619, thanks! :). I can\u2019t reproduce anymore, maybe you can close it?. An easy workaround is to reload the configuration, it will then DPMS it off.. I don\u2019t have focus_on_window_activation set, and I have a single enabled output.. Stupidterm (some libvte one, so using GTK+), and mpv is indeed displaying a video, otherwise no surface would get created, as there would be no buffer to attach.. Actually, the input stays on the terminal, the cursor surface changes, I can select text, etc., but the background is displayed instead of the terminal, as if its surface was made hidden once the video is done playing on the other workspace. Maybe the terminal being fullscreen has something to do with this issue.\nI confirmed that there is no actual workspace change, as pressing the keybind to go back to workspace 1 does nothing, I have to change to another and then back to workspace 1 in order to display the terminal again.. This check is superfluous, free is already a noop on NULL.\n. ",
    "woutermont": "Here's my bar config.\n```\nset fg  #aaaaaa\nset ind #ff0000aa\nset bgf #000000cc\nset bgu #00000033\nbar {\n    position top\n    status_command i3status --config ~/.config/sway/i3status.conf\n    strip_workspace_numbers no\n    pango_markup enabled\n    font swaybar-icons 14\n    colors {\n    #           color\n    statusline      $fg\n    separator       $fg\n    background      $bgu\n    focused_background  $bgu\n\n    #           border  bg      text\n    focused_workspace   $bgf    $bgf    $fg\n    active_workspace    $bgf    $bgf    $fg\n    inactive_workspace  $bgu    $bgu    $fg\n    urgent_workspace    $ind    $ind    $bgf\n\n}\n\n}\nI replaced my session's bar with a logging one, but no errors so far. I'll update when/if it crashes. Normally takes no longer than an hour.. Hm, strange, after about 38 minutes of working smoothly (no errors whatsoever), the bar crashes with a single line in the log: \"Bus error (core dumped)\".. How would I do such a thing?. I'll do so tomorrow.. Here's the core dump of yesterday\n           PID: 2989 (swaybar)\n           UID: 1000 (termontwouter)\n           GID: 100 (users)\n        Signal: 7 (BUS)\n     Timestamp: Mon 2017-02-27 18:38:29 CET (14h ago)\n  Command Line: swaybar -b bar-0\n    Executable: /usr/bin/swaybar\n Control Group: /user.slice/user-1000.slice/session-c2.scope\n          Unit: session-c2.scope\n         Slice: user-1000.slice\n       Session: c2\n     Owner UID: 1000 (termontwouter)\n       Boot ID: 9605ca0861e44557b74582d3d0946284\n    Machine ID: bfc07103349344b495f16a376ea25227\n      Hostname: zenbook\n       Storage: /var/lib/systemd/coredump/core.swaybar.1000.9605ca0861e44557b74582d3d0946284.2989.1488217109000000000000.lz4\n       Message: Process 2989 (swaybar) of user 1000 dumped core.\n            Stack trace of thread 2989:\n            #0  0x00007f865ba937d0 n/a (libpixman-1.so.0)\n            #1  0x00007f865ba7873b n/a (libpixman-1.so.0)\n            #2  0x00007f865ba32df9 pixman_fill (libpixman-1.so.0)\n            #3  0x00007f865d6f15b6 n/a (libcairo.so.2)\n            #4  0x00007f865d72d14d n/a (libcairo.so.2)\n            #5  0x00007f865d72d77e n/a (libcairo.so.2)\n            #6  0x00007f865d72da99 n/a (libcairo.so.2)\n            #7  0x00007f865d6e52d1 n/a (libcairo.so.2)\n            #8  0x00007f865d730b89 n/a (libcairo.so.2)\n            #9  0x00007f865d6edd75 n/a (libcairo.so.2)\n            #10 0x00007f865d6dfcb5 cairo_paint (libcairo.so.2)\n            #11 0x000000000040532e render (swaybar)\n            #12 0x0000000000406b9a bar_run (swaybar)\n            #13 0x0000000000404e13 main (swaybar)\n            #14 0x00007f865c31d291 __libc_start_main (libc.so.6)\n            #15 0x0000000000404eba _start (swaybar)\n\n. Is this a cairo / pixman issue, or are the crashes due to sway?. Been a while since I used sway, and it seems that this issue is still present. So, I compiled cairo and pixman with debug symbols and here's the latest core dump.\n           PID: 27535 (swaybar)\n           UID: 1000 (termontwouter)\n           GID: 100 (users)\n        Signal: 7 (BUS)\n     Timestamp: Sun 2017-09-03 19:41:54 CEST (33min ago)\n  Command Line: swaybar -b bar-0\n    Executable: /usr/bin/swaybar\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 (termontwouter)\n       Boot ID: 999692128a3f4e11b53b3756a6aaa095\n    Machine ID: 30ee9800dc854ec895dbecc721280b6f\n      Hostname: zenbook\n       Storage: /var/lib/systemd/coredump/core.swaybar.1000.999692128a3f4e11b53b3756a6aaa095.27535.1504460514000000.lz4\n       Message: Process 27535 (swaybar) of user 1000 dumped core.\n            Stack trace of thread 27535:\n            #0  0x00007f29c3c7d690 _mm_store_si128 (libpixman-1.so.0)\n            #1  0x00007f29c3c62739 _pixman_implementation_fill (libpixman-1.so.0)\n            #2  0x00007f29c3c1bbf9 pixman_fill (libpixman-1.so.0)\n            #3  0x00007f29c5b3e6a6 fill_boxes (libcairo.so.2)\n            #4  0x00007f29c5b79b22 composite_aligned_boxes (libcairo.so.2)\n            #5  0x00007f29c5b7a34e clip_and_composite_boxes (libcairo.so.2)\n            #6  0x00007f29c5b7a3cc _cairo_spans_compositor_paint (libcairo.so.2)\n            #7  0x00007f29c5b32891 _cairo_compositor_paint (libcairo.so.2)\n            #8  0x00007f29c5b7d76c _cairo_surface_paint (libcairo.so.2)\n            #9  0x00007f29c5b3ae67 _cairo_gstate_paint (libcairo.so.2)\n            #10 0x00007f29c5b2d1d5 INT_cairo_paint (libcairo.so.2)\n            #11 0x0000562801d6e0f4 render (swaybar)\n            #12 0x0000562801d6fbf3 bar_run (swaybar)\n            #13 0x0000562801d6db7f main (swaybar)\n            #14 0x00007f29c42fd4ca __libc_start_main (libc.so.6)\n            #15 0x0000562801d6dc7a _start (swaybar)\n\n```\nAnyone know what's the issue here? Is it swaybar, cairo or pixman?. Happens to me with gmail and some flash games in chromium. Something to do with flash?. Why was this issue closed? It is still present, affecting every application (as far as I know). Anything I can do to debug this?. Oh, right, my bad ... Still, same question: can we solve this extremely annoying issue?. ",
    "TrueBers": "Latest Arch. Have crashes of swaybar every several minutes with the same callstack.. ",
    "joenye": "Same issue here - running latest Arch with the same call-stack.. > This is how I'm doing it with termite:\nbindsym $mod+r exec termite --name=launcher -e \"bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'\"\nfor_window [app_id=\"^launcher$\"] floating enable, border none\nI modified this so you can also execute arbitrary commands, like you can with dmenu/rofi:\nbindsym $mod+r exec termite --name=launcher -e \"bash -c 'compgen -c | sort -u | fzf --no-extended --print-query | tail -n1 | xargs -r swaymsg -t command exec'\"\nfor_window [app_id=\"^launcher$\"] floating enable, border none\nIf fzf finds a match, this will be executed. Else, what you typed will be executed.. ",
    "marknsikora": "Did some initial digging on this. The end of the stack trace appears to be a sse2 optimized fill in cairo. It appears to be using a \"move aligned\" instruction under the hood, so this is probably due to a malloc somewhere not returning something aligned to the correct boundary. Most likely in the swaybar code as I imagine such an issue would have been caught in cairo by now. This would also explain the probabilistic nature of the crash. \nBuilding cairo without sse2 support and seeing if things crash is probably the easiest test until me or someone else has time to dig into the code. . ",
    "Freyr666": "\nJust check the environment variable?\n\nWhich one?. ```\n\necho $XKB_DEFAULT_LAYOUT\nus,ru\n```\n\nNo, that is not it. I need to know which layout is set, us or ru. I need a way to implement a kbd layout indicator.. But you implemented kbd switching somehow, there should be some way to get the value of the current active layout? Some ipc call?. That is gtk3 app, so it draws it's own titlebar on the client side. If your application has no feature such as turning the header bar off, you should patch Gtk somehow. \nhttps://github.com/SirCmpwn/sway/wiki\nGrep for Disabling client-side GTK3 decorations. I also think it is worthful to ask gtk guys about this on their bugtracker. There should be an option allowing header bars removal. . Wouldn't it be more sane to make a protocol for clipboard access with events on update? It can be useful not only for clipboard managers but also for dictioonaries and other stuff.. This works perfectly in i3 and doesn't work with sway, causing a lot of pain when using non-latin keymap. Does 1.0 release imply feature parity with i3?. Shouldn't you check the capacity in  list_add list_resize then? Seems like you are reallocating on each new element.. ",
    "RichardVoid": "@Freyr666  You can use something like this: https://gist.github.com/RichardVoid/51cd296535e11a73caf102855e0df4db. ",
    "ianhattendorf": "@RichardVoid I don't think that works under Wayland. Testing on i3 works, but on Sway it's always LED mask:  00000000.\nFor example, I have Exec=env XKB_DEFAULT_LAYOUT=us,br XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle sway in my sway.desktop file. I can toggle fine, however I can't query the current state. With i3, I was using the command xkb-switch -p;xkb-switch -W to get the initial state and then any updates in real-time.\n@SirCmpwn Is this something that would have to be handled by Sway/wlroots, or is it possible to query using something like libinput? I'm not seeing anything in it's man pages or online.. ",
    "maximiliankaul": "Clearing to a solid color would fix this. However, it used to be that the image gets stretched to fill each monitor and I think that is what users expect, when they specify -s stretch.. ",
    "albocc": "@WhyNotHugo Did you find a good alternative? I switched to Sway recently and noticed the same.. @t-8ch You might have an old version of the i3 config. My i3 config has the same syntax as Sway does and the default config seems to have it too:\nhttps://github.com/i3/i3/blob/d2e86da84f0db78dabcd5e587cbb3fe36ae428a4/etc/config#L134. I don't know if you managed to solve your issue, but I just installed sway on Gentoo (with OpenRC too of course) and it works out of the box after I set the XDG_RUNTIME_DIR variable according to the Gentoo wiki: https://wiki.gentoo.org/wiki/Weston (section \"Usage\").\nPS: Don't run the command chmod o+rwx /dev/**/* on your system. This will give every user access to all your devices! You should instead make sure what devices you need and add your user(s) to the respective groups. (For the record, I am part of the following groups: adm wheel floppy audio cdrom video usb input users portage utmp). ",
    "pauloue": "I was able to disable gtk3 titlebars by using a negative margin in ~/.config/gtk-3.0/gtk.css:\n.titlebar.default-decoration {\n  margin: -200px;\n  opacity: 0;\n}.\n",
    "skyfoosooc": "This also occures fo me. Another way do get focus back to a window is to \"focus child\" 2 or 3 times.\nI've noticed the behaviour your talking about when executing \"scratchpad show\" to hide the scratchpad as well. Though I have yet to find a consistent way of reproducing the behaviour.\nsway version : 0.12-rc1-18-gd4aa604\nwlc version : 0.0.8.r0.ge071b6c-1\nconfig.txt. ",
    "Raumzeitkeks": "I also see the behaviour as described by @spcmd on sway version 0.14.0 under ArchLinux.\nI created a debug log. A detailled description of what happens during log creation follows:\n(Note: I have set focus_follows_mouse no)\n Open sway\n Use keybinding to open terminal emulator on workspace 1\n Start logging with sway -d 2> sway.log\n Use keybinding to create and switch to workspace 2\n Use keybinding to open two terminal emulator windows on workspace 2\n Click on first (un-focused) terminal emulator and type something -> text appears\n Switch to workspace 1 by clicking on swaybar\n Switch back to workspace 2 by clicking on swaybar; same (first) terminal window appears focused\n Type something -> nothing happens (!)\n Click on \"focused\" terminal window\n Type something -> still nothing happens (!)\n Click on unfocused terminal window -> focus changes window\n Type something -> text appears\n Use keybinding to quit sway\nWhen focus_follows_mouse is unset or set to yes sway shows equivalent behaviour.\nAlso you do not even need to switch workspaces to reproduce. It is sufficent to click on any area of swaybar!\nI guess swaybar receives and keeps the focus, but the status of the other windows doesn't reflect this. That's why the broken \"focused\" window is highlighted as focused and doesn't receive focus even after being clicked, but unfocused windows work once they get focus.. ",
    "dumblob": "I don't have one currently, but I'll try to make some demonstration slideshow. In the meantime, could you please ask specific questions what exactly is not clear? I'd like to answer these and fix the description.. I don't have one currently, but I'll try to make some demonstration slideshow. In the meantime, could you please ask specific questions what exactly is not clear? I'd like to answer these and fix the description.. I'm drowning in other work, so thanks for reminding me. I'll provide a set of screenshots describing this functionality once I'll finish some other tasks currently bothering me. Thanks for understanding.. I'm drowning in other work, so thanks for reminding me. I'll provide a set of screenshots describing this functionality once I'll finish some other tasks currently bothering me. Thanks for understanding.. ",
    "ivoborisov": "I think that an update to mesa is causing this.\nYou can solve it by installing wlc-git and sway-git from AUR or wait for someone to update these packages in the official repos.\n. ",
    "avbobylev": "@ivoborisov using sway-git cause another error related to CAP_SYS_PTRACE in main.c:174, so sway is completely unusable after the latest mesa update even when installed from AUR. Seems wlc-git aur package is messed up a little. Build both sway and wlc from git, and everything works fine. . ",
    "jabranham": "Contrary to @avbobylev's experience, after installing wlc-git and sway-git from the AUR, it loads up fine for me. . ",
    "sanpoChew": "Worked for me without installing sway-git, just wlc-git. and it probably is an update to mesa as @ivoborisov said, I had updated a few hours before resetting and seeing this.. ",
    "francisco-colaco": "SOLUTION\nFOR ONE USER ACCOUNT ONLY\nIn order to get GDM to start sway, create a file in the directory ~/.config/environment.d, like ~/.config/.environment.d/sway.conf, with the following content.  If card0 does not work, which is why GDM refuses to start, the working card will be almost always card1. The layout should be your keyboard layout --- Portuguese in my case, so I set pt.\nWLC_DRM_DEVICE=card1\nXKB_DEFAULT_LAYOUT=pt\nAnd that's it!  Logout and you can start sway from GDM.\nwayland-session will not read .bash_profile, but systemd will read ~/.config/.environment.d/*.conf and thus you can define variables.\nIf you want to start also from the Linux console, either set and export the variables in ~/.bash_profile or include the following in ~/.bash_profile:\n. ~/.config/environment.d/sway.conf\nexport WLC_DRM_DEVICE XKB_DEFAULT_LAYOUT\nUsing the previous content provides a single point of edition.\nAT THE SYSTEM LEVEL, FOR ALL USERS\nNow, if one wants to make the variables available to all users, just write them in /etc/environment, like so, adapted to your circumstances:\nWLC_DRM_DEVICE=card1\nXKB_DEFAULT_LAYOUT=pt\nUsing this, no configuration is needed at the user directories.\n. ",
    "snoack": "Then why do I get following error, unless I add WLC_INCLUDE_DIRS to swaybg/CMakeList.txt (or install the WLC headers into /usr/includes)?\n[ 89%] Building C object swaybg/CMakeFiles/swaybg.dir/main.c.o\nIn file included from /tmp/sway/swaybg/main.c:14:0:\n/tmp/sway/include/util.h:6:21: fatal error: wlc/wlc.h: No such file or directory\n #include <wlc/wlc.h>\n                     ^\ncompilation terminated.\nswaybg/CMakeFiles/swaybg.dir/build.make:62: recipe for target 'swaybg/CMakeFiles/swaybg.dir/main.c.o' failed\nmake[2]: *** [swaybg/CMakeFiles/swaybg.dir/main.c.o] Error 1\nCMakeFiles/Makefile2:625: recipe for target 'swaybg/CMakeFiles/swaybg.dir/all' failed\nmake[1]: *** [swaybg/CMakeFiles/swaybg.dir/all] Error 2\nMakefile:127: recipe for target 'all' failed\nmake: *** [all] Error 2\n(It seems that code in these subdirectories includes headers which in return include WLC headers.). If that is the case, feel free to remove the redundant includes. That should work as well.. There you go.. I don't know what you mean. If -DVERSION isn't used, it is using the exact same version information as before my changes. If it does not, that wasn't indented, can you point me where information are removed?. @captnfab: Thanks for testing!\n@SirCmpwn: Done.. @captnfab: The Debian package from my PPA should now use the keyboard settings from /etc/default/keyboard as of version 0.13.0-2. This might fix your keyboard problems. At least it makes sure that the same keyboard layout/model/variant/options are in effect that you have elsewhere.. I just updated the PPA to sway 0.15. Thanks, for the heads up!. Sorry for the delay. I plan to update the PPA soon.. ",
    "oranenj": "I wrote a small tool to check how that thing behaves, and I'm not sure what's going on.\nWhen I run \n```\ninclude \ninclude \ninclude \ninclude \ninclude \ndefine SYSCONFDIR \"/etc\"\nint main() {\n    DIR dir = opendir(SYSCONFDIR \"/sway/security.d\");\n    char base = SYSCONFDIR \"/sway/security.d/\";\n    struct dirent ent = readdir(dir);\n    struct stat s;\n    while (ent != NULL) {\n        char _path = malloc(strlen(ent->d_name) + strlen(base) + 1);\n    strcpy(_path, base);\n        strcat(_path, ent->d_name);\n        printf(\"Checking %s... \", _path);\n        lstat(_path, &s);\n        if (S_ISREG(s.st_mode)) {\n            printf(\"File is regular\");\n        } else if (S_ISLNK(s.st_mode)) {\n            printf(\"File is a link\");\n        }\n        printf(\"\\n\");\n        ent = readdir(dir);\n    }\n    closedir(dir);\n}\nI get\nChecking /etc/sway/security.d/.... \nChecking /etc/sway/security.d/..... \nChecking /etc/sway/security.d/00-defaults... File is regular\nChecking /etc/sway/security.d/foo... File is a link\n```\neven with XFS.\nThat looks like a macro though. Maybe my system has a different definition of it than what sway was compiled with?. Oh, and just to clarify, I added the symbolic link just to see if you can test for those on XFS. Loading works on master, because the code looks like this:\nhttps://github.com/SirCmpwn/sway/blob/8306b886e9d24a5bbeafedf315724f97b3ae86d4/sway/config.c#L539\nbut fails on 0.12.1 because it doesn't use lstat\nhttps://github.com/SirCmpwn/sway/blob/0.12.1/sway/config.c#L532\nSomehow I can't find the commit that changed that code. though.. Found it, the commit fixing this is 9aed9d93596cdc72e305338d82ccc0dcaf85c6e2. Oh, I committed it with the wrong (work) identity. Let me fix that.. I compiled a non-release build of sway to dig some more into this.\nSeems like the crash occurs in set_focused_container_for called at the end of move_container in layout.c, and both parameters point to the same container, whose parent is NULL. However, it's not the root container, either.\nIf I debug and set a breakpoint to move_container, I can see that the hierarchy is at that point intact:\n(gdb) print container->parent->parent->parent\n$7 = (struct sway_container *) 0x64b260 <root_container>\nwith a hierarchy of view -> workspace -> output -> root\nAt this point, the parent variable is set to the container's parent, \nthe ifs all evaluate to false, so we get to the line where child is set to the value of container\nThe next if evaluates to false because parent->type is not C_CONTAINER\nthe we enter the while loop.\nThe first if evaluates to false, so we get to \nif (parent->children->length == 1 && parent->layout != layout && layout != L_NONE)\nWhich also evaluates to false. moving on, we finally get to an if which evaluates to true.\nwe get an abs_pos of: {x = 479, y = 539}\nAnd at this point, the swayc_t *output = swayc_adjacent_output(parent->parent, dir, &abs_pos, true); call apparently results in an \"ERROR: Function called with invalid argument\" so output becomes 0.\nNow something weird seems to have happened. our parent suddenly has a type of C_ROOT, as does our container.\nHmm.\n. looks like MOVE_NEXT is not a valid dir value for swayc_adjacent_output and it calls sway_abort, but somehow that doesn't actually abort the process... Or does it do so asynchronously?. Hmm.\nIf I make swayc_adjacent_output work with MOVE_NEXT or MOVE_PREV, move_container ends up in an infinite loop. Just skipping the if causes ascended to be set to true which breaks the parent/child hierarchy.\nBreaking out of the loop at https://github.com/SirCmpwn/sway/blob/master/sway/layout.c#L484 if dir == MOVE_NEXT or MOVE_PREV fixes the crash, but the behaviour is not quite what I'd expect (which is \"wraparound\" like in Awesome).\nI don't understand the layouting logic well enough to fix this properly, I think.. Uh, https://github.com/SirCmpwn/sway/blob/master/sway/layout.c#L446 subtracts a boolean from an int.\nI guess that would work if you can guarantee booleans are always either 0 or 1, but I'm not really a fan of clever code like that.\nI'm not really sure why the layout code thinks it should move the window from one output to another if the parent is a workspace?\n. I actually managed to repeat this with more than one window as well, so I guess it's not just the one-window case that's not working :/. @emersion I'll create an issue about this and put the debug output there. [oranenj@kurenai sway]$ WAYLAND_DEBUG=1 build/swayidle/swayidle timeout 1000 'echo foo'\n[1282021.353]  -> wl_display@1.get_registry(new id wl_registry@2)\n[1282021.382]  -> wl_display@1.sync(new id wl_callback@3)\n[1282021.435] wl_display@1.delete_id(3)\n[1282021.451] wl_registry@2.global(1, \"wl_shm\", 1)\n[1282021.470] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[1282021.509] wl_registry@2.global(3, \"wl_drm\", 2)\n[1282021.516] wl_registry@2.global(4, \"wl_compositor\", 4)\n[1282021.535] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[1282021.544] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[1282021.552] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[1282021.560] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[1282021.570] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[1282021.579] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[1282021.589] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[1282021.599]  -> wl_registry@2.bind(11, \"org_kde_kwin_idle\", 1, new id [unknown]@4)\n[1282021.613] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[1282021.622] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[1282021.631] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[1282021.641] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[1282021.650] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[1282021.659] wl_registry@2.global(17, \"zxdg_decoration_manager_v1\", 1)\n[1282021.671] wl_registry@2.global(18, \"wp_presentation\", 1)\n[1282021.679] wl_registry@2.global(19, \"zwlr_export_dmabuf_manager_v1\", 1)\n[1282021.687] wl_registry@2.global(20, \"zwlr_screencopy_manager_v1\", 1)\n[1282021.696] wl_registry@2.global(21, \"zwp_virtual_keyboard_manager_v1\", 1)\n[1282021.706] wl_registry@2.global(22, \"zwlr_input_inhibit_manager_v1\", 1)\n[1282021.716] wl_registry@2.global(23, \"wl_seat\", 6)\n[1282021.727]  -> wl_registry@2.bind(23, \"wl_seat\", 1, new id [unknown]@5)\n[1282021.740] wl_registry@2.global(24, \"wl_output\", 3)\n[1282021.749] wl_registry@2.global(25, \"wl_output\", 3)\n[1282021.758] wl_callback@3.done(28162)\n[1282021.765]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@3, wl_seat@5, 1000000)\n[1282021.778]  -> wl_display@1.sync(new id wl_callback@6)\n[1282021.849] wl_display@1.delete_id(6)\n[1282021.860] wl_callback@6.done(28162)\n[1284476.057]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@6, wl_seat@5, 0)\nWith the PR, the situation slightly improves:\n^[[A^[[A^C[oranenj@kurenai sway]$ build/swayidle/swayidle timeout 1000 'echo -d foo'\n2018-11-05 19:38:44 - [swayidle/main.c:329] Got timeout\n2018-11-05 19:38:44 - [swayidle/main.c:273] Register idle timeout at 1000000 ms\n2018-11-05 19:38:44 - [swayidle/main.c:274] Setup idle\n2018-11-05 19:38:44 - [swayidle/main.c:245] Command: echo foo\n2018-11-05 19:38:44 - [swayidle/main.c:207] Register with timeout: 1000000\n2018-11-05 19:38:46 - [swayidle/main.c:361] Got SIGUSR1\n2018-11-05 19:38:46 - [swayidle/main.c:207] Register with timeout: 0\n2018-11-05 19:38:47 - [swayidle/main.c:361] Got SIGUSR1\n2018-11-05 19:38:47 - [swayidle/main.c:207] Register with timeout: 0\nIt no longer gets stuck, but doesn't actually run the command it seems.\n```\n^C[oranenj@kurenai sway]WAYLAND_DEBUG=1 build/swayidle/swayidle timeout 1000 'echo foo'\n[1584569.951]  -> wl_display@1.get_registry(new id wl_registry@2)\n[1584569.983]  -> wl_display@1.sync(new id wl_callback@3)\n[1584570.090] wl_display@1.delete_id(3)\n[1584570.097] wl_registry@2.global(1, \"wl_shm\", 1)\n[1584570.103] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[1584570.110] wl_registry@2.global(3, \"wl_drm\", 2)\n[1584570.134] wl_registry@2.global(4, \"wl_compositor\", 4)\n[1584570.139] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[1584570.148] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[1584570.165] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[1584570.172] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[1584570.180] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[1584570.187] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[1584570.196] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[1584570.214]  -> wl_registry@2.bind(11, \"org_kde_kwin_idle\", 1, new id [unknown]@4)\n[1584570.235] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[1584570.244] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[1584570.254] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[1584570.262] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[1584570.271] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[1584570.280] wl_registry@2.global(17, \"zxdg_decoration_manager_v1\", 1)\n[1584570.288] wl_registry@2.global(18, \"wp_presentation\", 1)\n[1584570.297] wl_registry@2.global(19, \"zwlr_export_dmabuf_manager_v1\", 1)\n[1584570.305] wl_registry@2.global(20, \"zwlr_screencopy_manager_v1\", 1)\n[1584570.314] wl_registry@2.global(21, \"zwp_virtual_keyboard_manager_v1\", 1)\n[1584570.323] wl_registry@2.global(22, \"zwlr_input_inhibit_manager_v1\", 1)\n[1584570.334] wl_registry@2.global(23, \"wl_seat\", 6)\n[1584570.343]  -> wl_registry@2.bind(23, \"wl_seat\", 1, new id [unknown]@5)\n[1584570.357] wl_registry@2.global(24, \"wl_output\", 3)\n[1584570.368] wl_registry@2.global(25, \"wl_output\", 3)\n[1584570.378] wl_callback@3.done(29718)\n[1584570.384]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@3, wl_seat@5, 1000000)\n[1584570.397]  -> wl_display@1.sync(new id wl_callback@6)\n[1584570.428] wl_display@1.delete_id(6)\n[1584570.433] wl_callback@6.done(29718)\n[1586815.659]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@6, wl_seat@5, 0)\n[1587642.314]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@7, wl_seat@5, 0)\n[1588242.393]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@8, wl_seat@5, 0)\n[1588792.678]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@9, wl_seat@5, 0)\n```\n. To clarify what I did, in the previous WAYLAND_DEBUG output I sent 4 signals and in the normal debug only 2.. I'm currently using the 0.1 tag; I'll try a newer one. That would explain it then. I'll report back in a bit.. Using a newer wlroots doesn't seem to help here; the behaviour does not change as far as I can tell. I built wlroots commit d7b0100, and the behaviour is still the same. :/\nI also tried to spend a bit of time in GDB to see what the hell happens when the signal handler triggers, but I can't spot anything especially suspicious.\nfor some reason, I can't have GDB catch the signal though. It always goes through to the program. :/\n. With PR and newer wlroots\n[oranenj@kurenai sway]$ WAYLAND_DEBUG=1 build/swayidle/swayidle timeout 1000  'echo foo'\n[462096.901]  -> wl_display@1.get_registry(new id wl_registry@2)\n[462096.920]  -> wl_display@1.sync(new id wl_callback@3)\n[462096.979] wl_display@1.delete_id(3)\n[462096.987] wl_registry@2.global(1, \"wl_shm\", 1)\n[462096.993] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[462097.002] wl_registry@2.global(3, \"wl_drm\", 2)\n[462097.011] wl_registry@2.global(4, \"wl_compositor\", 4)\n[462097.020] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[462097.030] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[462097.037] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[462097.048] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[462097.058] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[462097.065] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[462097.073] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[462097.082]  -> wl_registry@2.bind(11, \"org_kde_kwin_idle\", 1, new id [unknown]@4)\n[462097.095] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[462097.103] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[462097.111] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[462097.120] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[462097.130] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[462097.140] wl_registry@2.global(17, \"zxdg_decoration_manager_v1\", 1)\n[462097.151] wl_registry@2.global(18, \"wp_presentation\", 1)\n[462097.163] wl_registry@2.global(19, \"zwlr_export_dmabuf_manager_v1\", 1)\n[462097.172] wl_registry@2.global(20, \"zwlr_screencopy_manager_v1\", 1)\n[462097.182] wl_registry@2.global(21, \"zwp_virtual_keyboard_manager_v1\", 1)\n[462097.191] wl_registry@2.global(22, \"zwlr_input_inhibit_manager_v1\", 1)\n[462097.202] wl_registry@2.global(23, \"wl_seat\", 6)\n[462097.212]  -> wl_registry@2.bind(23, \"wl_seat\", 1, new id [unknown]@5)\n[462097.227] wl_registry@2.global(24, \"wl_output\", 3)\n[462097.238] wl_registry@2.global(25, \"wl_output\", 3)\n[462097.247] wl_callback@3.done(59984)\n[462097.254]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@3, wl_seat@5, 1000000)\n[462097.267]  -> wl_display@1.sync(new id wl_callback@6)\n[462097.310] wl_display@1.delete_id(6)\n[462097.317] wl_callback@6.done(59984)\n[465033.906]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@6, wl_seat@5, 0)\n[469884.669]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@7, wl_seat@5, 0)\nEven a timeout of just 1 causes the problem to go away :/ changing the 0 to 1 in register_zero_idle_timeout, the output looks like this:\n[oranenj@kurenai sway]$ WAYLAND_DEBUG=1 build/swayidle/swayidle timeout 1000  'echo foo'\n[604117.116]  -> wl_display@1.get_registry(new id wl_registry@2)\n[604117.146]  -> wl_display@1.sync(new id wl_callback@3)\n[604117.243] wl_display@1.delete_id(3)\n[604117.253] wl_registry@2.global(1, \"wl_shm\", 1)\n[604117.259] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[604117.265] wl_registry@2.global(3, \"wl_drm\", 2)\n[604117.282] wl_registry@2.global(4, \"wl_compositor\", 4)\n[604117.303] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[604117.319] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[604117.336] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[604117.343] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[604117.351] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[604117.360] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[604117.368] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[604117.378]  -> wl_registry@2.bind(11, \"org_kde_kwin_idle\", 1, new id [unknown]@4)\n[604117.391] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[604117.400] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[604117.408] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[604117.416] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[604117.425] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[604117.434] wl_registry@2.global(17, \"zxdg_decoration_manager_v1\", 1)\n[604117.444] wl_registry@2.global(18, \"wp_presentation\", 1)\n[604117.453] wl_registry@2.global(19, \"zwlr_export_dmabuf_manager_v1\", 1)\n[604117.463] wl_registry@2.global(20, \"zwlr_screencopy_manager_v1\", 1)\n[604117.473] wl_registry@2.global(21, \"zwp_virtual_keyboard_manager_v1\", 1)\n[604117.481] wl_registry@2.global(22, \"zwlr_input_inhibit_manager_v1\", 1)\n[604117.490] wl_registry@2.global(23, \"wl_seat\", 6)\n[604117.500]  -> wl_registry@2.bind(23, \"wl_seat\", 1, new id [unknown]@5)\n[604117.513] wl_registry@2.global(24, \"wl_output\", 3)\n[604117.522] wl_registry@2.global(25, \"wl_output\", 3)\n[604117.532] wl_callback@3.done(60722)\n[604117.537]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@3, wl_seat@5, 1000000)\n[604117.548]  -> wl_display@1.sync(new id wl_callback@6)\n[604117.615] wl_display@1.delete_id(6)\n[604117.622] wl_callback@6.done(60722)\n[612968.776]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@6, wl_seat@5, 1)\n[612969.906] org_kde_kwin_idle_timeout@6.idle()\nfoo\n[613030.522] org_kde_kwin_idle_timeout@6.resumed()\n[613030.559]  -> org_kde_kwin_idle@4.get_idle_timeout(new id org_kde_kwin_idle_timeout@7, wl_seat@5, 1000000)\n. Digging through the code, it seems that what eventually ends up happening somewhere in the wayland server is that timerfd_settime gets called with an interval spec of all zeroes. Is that actually valid? I suppose it should cause a timer which immediately expires and then whatever is waiting on the fd triggers.\nSince the code seems to be destroying an org_kde_kwin_idle_timeout before it creates the new one, is anything actually listening to it at that point? It seems the code does a \"get_idle_timeout\" and then an \"add_listener\", but if get_idle_timeout starts the timerfd, wouldn't the timer have already triggered by the time the timeout expires? :/ Are the timers enabled at the time they are created?\nI confess it's a bit difficult to follow the execution path with all the wayland protocol stuff going on, with which I am completely unfamiliar.\nIt's getting a bit late, so any debugging on my part will have to continue tomorrow.. @emersion you're correct.\nYou mentioning ldd made me realize I hadn't actually restarted sway (since I use it as my WM) so it would've used a deleted version of wlroots. I was too focused on swayidle to realize that the timeout happens in the compositor.\nYep, with sway restarted, everything works just fine. Thanks for your patience :P And now I think I'll get some sleep.. ",
    "djmitche": "Ah, and the source shows why:\n// TODO: Move workspace to output. (don't do so when reloading). No, the first mention of the workspace in the config is\nworkspace F7 output $screen3\n(where $screen3 is HDMI-A-2)\n. fixed :). I didn't mean the issue is fixed, I meant hte comment was fixed.  The issue is still very much not fixed.. I'm not :)\nI want F7 to always appear on HDMI-A_2.  The line above is in my config.. Ah, indeed, 0.12.\n2017-03-26 20:39 GMT-04:00 Zandr Martin notifications@github.com:\n\nWhat version of Sway are you running? This actually was broken in 0.12,\nbut it was fixed in 0.12.1 - see #1105\nhttps://github.com/SirCmpwn/sway/pull/1105.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/1122#issuecomment-289329681, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AABwAcdg2ItXhku_v9qOHTVAtcMr493dks5rpwVagaJpZM4MhgTb\n.\n. ```\n03/19/17 10:01:15 - [main.c:153] Linux jemison 4.9.13-201.fc25.x86_64 #1 SMP Tue Mar 7 23:47:11 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n03/19/17 10:01:15 - [main.c:125] Contents of /etc/os-release:\n03/19/17 10:01:15 - [main.c:132] NAME=Fedora\n03/19/17 10:01:15 - [main.c:132] VERSION=\"25 (Workstation Edition)\"\n03/19/17 10:01:15 - [main.c:132] ID=fedora\n03/19/17 10:01:15 - [main.c:132] VERSION_ID=25\n03/19/17 10:01:15 - [main.c:132] PRETTY_NAME=\"Fedora 25 (Workstation Edition)\"\n03/19/17 10:01:15 - [main.c:132] ANSI_COLOR=\"0;34\"\n03/19/17 10:01:15 - [main.c:132] CPE_NAME=\"cpe:/o:fedoraproject:fedora:25\"\n03/19/17 10:01:15 - [main.c:132] HOME_URL=\"https://fedoraproject.org/\"\n03/19/17 10:01:15 - [main.c:132] BUG_REPORT_URL=\"https://bugzilla.redhat.com/\"\n03/19/17 10:01:15 - [main.c:132] REDHAT_BUGZILLA_PRODUCT=\"Fedora\"\n03/19/17 10:01:15 - [main.c:132] REDHAT_BUGZILLA_PRODUCT_VERSION=25\n03/19/17 10:01:15 - [main.c:132] REDHAT_SUPPORT_PRODUCT=\"Fedora\"\n03/19/17 10:01:15 - [main.c:132] REDHAT_SUPPORT_PRODUCT_VERSION=25\n03/19/17 10:01:15 - [main.c:132] PRIVACY_POLICY_URL=https://fedoraproject.org/wiki/Legal:PrivacyPolicy\n03/19/17 10:01:15 - [main.c:132] VARIANT=\"Workstation Edition\"\n03/19/17 10:01:15 - [main.c:132] VARIANT_ID=workstation\n03/19/17 10:01:15 - [main.c:125] Contents of /etc/redhat-release:\n03/19/17 10:01:15 - [main.c:132] Fedora release 25 (Twenty Five)\n03/19/17 10:01:15 - [main.c:110] PATH=/home/dustin/.nix-profile/bin:/home/dustin/.nix-profile/sbin:/home/dustin/bin:/home/dustin/go/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/usr/local/go/bin:node_modules/.bin\n03/19/17 10:01:15 - [main.c:110] LD_LOAD_PATH=(null)\n03/19/17 10:01:15 - [main.c:110] LD_PRELOAD_PATH=(null)\n03/19/17 10:01:15 - [main.c:110] LD_LIBRARY_PATH=(null)\n03/19/17 10:01:15 - [main.c:110] SWAY_CURSOR_THEME=(null)\n03/19/17 10:01:15 - [main.c:110] SWAY_CURSOR_SIZE=(null)\n03/19/17 10:01:15 - [main.c:110] SWAYSOCK=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_DRM_DEVICE=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_SHM=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_OUTPUTS=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_XWAYLAND=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_LIBINPUT=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_REPEAT_DELAY=(null)\n03/19/17 10:01:15 - [main.c:110] WLC_REPEAT_RATE=(null)\n03/19/17 10:01:15 - [main.c:110] XKB_DEFAULT_RULES=(null)\n03/19/17 10:01:15 - [main.c:110] XKB_DEFAULT_MODEL=(null)\n03/19/17 10:01:15 - [main.c:110] XKB_DEFAULT_LAYOUT=(null)\n03/19/17 10:01:15 - [main.c:110] XKB_DEFAULT_VARIANT=(null)\n03/19/17 10:01:15 - [main.c:110] XKB_DEFAULT_OPTIONS=(null)\n03/19/17 10:01:15 - [main.c:49] [wlc] logind: session control granted\n03/19/17 10:01:15 - [main.c:49] [wlc] Running on vt 2 (fd 0)\n03/19/17 10:01:16 - [main.c:47] [wlc] Failed to open X11 display\n03/19/17 10:01:16 - [main.c:350] Starting sway version  (2017-03-08, branch \"\")\n\n03/19/17 10:01:16 - [config.c:434] Set XDG_CONFIG_HOME to /home/dustin/.config\n03/19/17 10:01:16 - [config.c:459] Loading config from /etc/sway/security.d/00-defaults\n03/19/17 10:01:16 - [commands.c:484] handling config command 'permit * fullscreen keyboard mouse'\n03/19/17 10:01:16 - [commands.c:330] find_handler(permit) 0\n03/19/17 10:01:16 - [permit.c:73] Permissions granted to * for features 112\n03/19/17 10:01:16 - [commands.c:484] handling config command 'permit /usr/bin/swaylock lock'\n03/19/17 10:01:16 - [commands.c:330] find_handler(permit) 0\n03/19/17 10:01:16 - [permit.c:73] Permissions granted to /usr/bin/swaylock for features 113\n03/19/17 10:01:16 - [commands.c:484] handling config command 'permit /usr/bin/swaybg background'\n03/19/17 10:01:16 - [commands.c:330] find_handler(permit) 0\n03/19/17 10:01:16 - [permit.c:73] Permissions granted to /usr/bin/swaybg for features 116\n03/19/17 10:01:16 - [commands.c:484] handling config command 'permit /usr/bin/swaygrab screenshot'\n03/19/17 10:01:16 - [commands.c:330] find_handler(permit) 0\n03/19/17 10:01:16 - [permit.c:73] Permissions granted to /usr/bin/swaygrab for features 120\n03/19/17 10:01:16 - [commands.c:484] handling config command 'permit /usr/bin/swaybar panel'\n03/19/17 10:01:16 - [commands.c:330] find_handler(permit) 0\n03/19/17 10:01:16 - [permit.c:73] Permissions granted to /usr/bin/swaybar for features 114\n03/19/17 10:01:16 - [commands.c:484] handling config command 'ipc /usr/bin/swaymsg {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(ipc) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command ' enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler() 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC * feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'events {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(events) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command ' disabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler() 0\n03/19/17 10:01:16 - [ipc.c:149] Disabled IPC * event\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:802] End of IPC events block\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:797] End of IPC block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'ipc /usr/bin/swaybar {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(ipc) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bar-config enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bar-config) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC bar-config feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'outputs enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(outputs) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC outputs feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspaces enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspaces) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC workspaces feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'command enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(command) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC command feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'events {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(events) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [ipc.c:146] Enabled IPC workspace event\n03/19/17 10:01:16 - [commands.c:484] handling config command 'mode enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(mode) 0\n03/19/17 10:01:16 - [ipc.c:146] Enabled IPC mode event\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:802] End of IPC events block\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:797] End of IPC block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'ipc /usr/bin/swaygrab {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(ipc) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'outputs enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(outputs) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC outputs feature\n03/19/17 10:01:16 - [commands.c:484] handling config command 'tree enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(tree) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC tree feature\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:797] End of IPC block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'ipc /usr/bin/swaylock {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(ipc) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'outputs enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(outputs) 0\n03/19/17 10:01:16 - [ipc.c:97] Enabled IPC outputs feature\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:797] End of IPC block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'commands {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(commands) 0\n03/19/17 10:01:16 - [commands.c:330] find_handler() 0\n03/19/17 10:01:16 - [commands.c:588] Set command policy for * to -1\n03/19/17 10:01:16 - [commands.c:330] find_handler(fullscreen) 0\n03/19/17 10:01:16 - [commands.c:588] Set command policy for fullscreen to 10\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [commands.c:588] Set command policy for bindsym to 1\n03/19/17 10:01:16 - [commands.c:330] find_handler(exit) 0\n03/19/17 10:01:16 - [commands.c:588] Set command policy for exit to 2\n03/19/17 10:01:16 - [commands.c:330] find_handler(kill) 0\n03/19/17 10:01:16 - [commands.c:588] Set command policy for kill to 2\n03/19/17 10:01:16 - [config.c:792] End of commands block\n03/19/17 10:01:16 - [config.c:459] Loading config from /home/dustin/.config/sway/config\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $mod Mod1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $screen1 eDP-1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $screen2 eDP-1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $screen3 eDP-1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $screen4 eDP-1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $left h'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $down j'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $up k'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $right l'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $term urxvt256cc -ls'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $menu dmenu_run'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $ssh_agent SSH_AUTH_SOCK=\"$XDG_RUNTIME_DIR/ssh-agent.socket\"'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'focus_follows_mouse no'\n03/19/17 10:01:16 - [commands.c:330] find_handler(focus_follows_mouse) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'font pango:Lucida 8'\n03/19/17 10:01:16 - [commands.c:330] find_handler(font) 0\n03/19/17 10:01:16 - [font.c:24] Settings font Lucida 8\n03/19/17 10:01:16 - [commands.c:484] handling config command 'hide_edge_borders both'\n03/19/17 10:01:16 - [commands.c:330] find_handler(hide_edge_borders) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'exec \"urxvt256cd\"'\n03/19/17 10:01:16 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:16 - [config.c:706] Defferring command exec \"urxvt256cd\"'\n03/19/17 10:01:16 - [commands.c:484] handling config command 'output * bg #000000 solid_color'\n03/19/17 10:01:16 - [commands.c:330] find_handler(output) 0\n03/19/17 10:01:16 - [output.c:172] Config stored for output * (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg #000000 solid_color)\n03/19/17 10:01:16 - [commands.c:484] handling config command 'input \"SynPS/2 Synaptics TouchPad\" {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(input) 0\n03/19/17 10:01:16 - [input.c:18] new_input_config(SynPS/2 Synaptics TouchPad)\n03/19/17 10:01:16 - [input.c:14] entering input block: SynPS/2 Synaptics TouchPad\n03/19/17 10:01:16 - [commands.c:484] handling config command 'accel_profile adaptive'\n03/19/17 10:01:16 - [commands.c:330] find_handler(accel_profile) 1\n03/19/17 10:01:16 - [input.c:18] new_input_config(SynPS/2 Synaptics TouchPad)\n03/19/17 10:01:16 - [commands.c:484] handling config command 'pointer_accel 1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(pointer_accel) 1\n03/19/17 10:01:16 - [input.c:18] new_input_config(SynPS/2 Synaptics TouchPad)\n03/19/17 10:01:16 - [commands.c:484] handling config command 'dwt enabled'\n03/19/17 10:01:16 - [commands.c:330] find_handler(dwt) 1\n03/19/17 10:01:16 - [input.c:18] new_input_config(SynPS/2 Synaptics TouchPad)\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:775] End of input block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Return exec $term'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Return to command exec urxvt256cc -ls\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+Return exec $ssh_agent urxvt256cc -name dorp -title dorp -e ssh -t dorp.r.igoro.us bin/startscreen'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+Return to command exec SSH_AUTH_SOCK=\"$XDG_RUNTIME_DIR/ssh-agent.socket\" urxvt256cc -name dorp -title dorp -e ssh -t dorp.r.igoro.us bin/startscreen\n03/19/17 10:01:16 - [commands.c:484] handling config command 'assign [class=\"^URxvt\" title=\"^dorp$\"] F5'\n03/19/17 10:01:16 - [commands.c:330] find_handler(assign) 0\n03/19/17 10:01:16 - [criteria.c:101] Parsing criteria: '[class=\"^URxvt\" title=\"^dorp$\"]'\n03/19/17 10:01:16 - [criteria.c:235] class -> /^URxvt/\n03/19/17 10:01:16 - [criteria.c:235] title -> /^dorp$/\n03/19/17 10:01:16 - [assign.c:52] assign: '[class=\"^URxvt\" title=\"^dorp$\"]' -> 'move container to workspace F5' added\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+q kill'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+q to command kill\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+d exec $menu'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+d to command exec dmenu_run\n03/19/17 10:01:16 - [commands.c:484] handling config command 'floating_modifier $mod normal'\n03/19/17 10:01:16 - [commands.c:330] find_handler(floating_modifier) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+c reload'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+c to command reload\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+e exit'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+e to command exit\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+$left focus left'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+h to command focus left\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+$down focus down'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+j to command focus down\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+$up focus up'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+k to command focus up\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+$right focus right'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+l to command focus right\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Left focus left'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Left to command focus left\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Down focus down'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Down to command focus down\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Up focus up'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Up to command focus up\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Right focus right'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Right to command focus right\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+$left move left'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+h to command move left\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+$down move down'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+j to command move down\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+$up move up'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+k to command move up\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+$right move right'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+l to command move right\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+Left move left'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+Left to command move left\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+Down move down'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+Down to command move down\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+Up move up'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+Up to command move up\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+Right move right'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+Right to command move right\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F1 output $screen1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F1 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F2 output $screen1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F2 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F3 output $screen1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F3 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F4 output $screen1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F4 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F5 output $screen2'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F5 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F6 output $screen2'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F6 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F7 output $screen3'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F7 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'workspace F8 output $screen4'\n03/19/17 10:01:16 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:16 - [workspace.c:41] Assigning workspace F8 to output output\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F1 workspace F1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F1 to command workspace F1\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F2 workspace F2'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F2 to command workspace F2\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F3 workspace F3'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F3 to command workspace F3\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F4 workspace F4'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F4 to command workspace F4\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F5 workspace F5'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F5 to command workspace F5\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F6 workspace F6'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F6 to command workspace F6\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F7 workspace F7'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F7 to command workspace F7\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F8 workspace F8'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F8 to command workspace F8\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F1 move container to workspace F1; workspace F1'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F1 to command move container to workspace F1; workspace F1\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F2 move container to workspace F2; workspace F2'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F2 to command move container to workspace F2; workspace F2\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F3 move container to workspace F3; workspace F3'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F3 to command move container to workspace F3; workspace F3\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F4 move container to workspace F4; workspace F4'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F4 to command move container to workspace F4; workspace F4\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F5 move container to workspace F5; workspace F5'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F5 to command move container to workspace F5; workspace F5\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F6 move container to workspace F6; workspace F6'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F6 to command move container to workspace F6; workspace F6\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F7 move container to workspace F7; workspace F7'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F7 to command move container to workspace F7; workspace F7\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F8 move container to workspace F8; workspace F8'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F8 to command move container to workspace F8; workspace F8\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Ctrl+h splith'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Ctrl+h to command splith\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Ctrl+v splitv'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Ctrl+v to command splitv\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+s layout stacking'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+s to command layout stacking\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+w layout tabbed'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+w to command layout tabbed\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+e layout toggle split'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+e to command layout toggle split\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F11 fullscreen'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F11 to command fullscreen\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Shift+space floating toggle'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Shift+space to command floating toggle\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+space focus mode_toggle'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+space to command focus mode_toggle\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+a focus parent'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+a to command focus parent\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $scratchpadwindow [class=\"^URxvt$\" title=\"^scratchpad$\"]'\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'set $scratchpadexec urxvt256cc -name scratchpad -title scratchpad -e bash -c '$ssh_agent ~/bin/startscreen''\n03/19/17 10:01:16 - [commands.c:330] find_handler(set) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'for_window $scratchpadwindow move scratchpad; resize shrink width 10ppt; resize shrink height 10ppt'\n03/19/17 10:01:16 - [commands.c:330] find_handler(for_window) 0\n03/19/17 10:01:16 - [criteria.c:101] Parsing criteria: '[class=\"^URxvt$\" title=\"^scratchpad$\"]'\n03/19/17 10:01:16 - [criteria.c:235] class -> /^URxvt$/\n03/19/17 10:01:16 - [criteria.c:235] title -> /^scratchpad$/\n03/19/17 10:01:16 - [for_window.c:36] for_window: '[class=\"^URxvt$\" title=\"^scratchpad$\"]' -> 'move scratchpad; resize shrink width 10ppt; resize shrink height 10ppt' added\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Mod4+grave scratchpad show'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod4+grave to command scratchpad show\n03/19/17 10:01:16 - [commands.c:484] handling config command 'exec $scratchpadexec'\n03/19/17 10:01:16 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:16 - [config.c:706] Defferring commandexec $scratchpadexec'\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Mod4+Shift+grave exec $scratchpadexec'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod4+Shift+grave to command exec urxvt256cc -name scratchpad -title scratchpad -e bash -c 'SSH_AUTH_SOCK=\"$XDG_RUNTIME_DIR/ssh-agent.socket\" ~/bin/startscreen'\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym F10 exec $ssh_agent ssh-add ~/.ssh/dustin-2015'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound F10 to command exec SSH_AUTH_SOCK=\"$XDG_RUNTIME_DIR/ssh-agent.socket\" ssh-add ~/.ssh/dustin-2015\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+F10 exec $ssh_agent ssh-add ~/.ssh/dustin-mozilla-2016-04-12'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+F10 to command exec SSH_AUTH_SOCK=\"$XDG_RUNTIME_DIR/ssh-agent.socket\" ssh-add ~/.ssh/dustin-mozilla-2016-04-12\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0;             exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') -5%'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86AudioLowerVolume to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0; exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') -5%\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Next            exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0;             exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') -5%'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Next to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0; exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') -5%\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0;             exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') +5%'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86AudioRaiseVolume to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0; exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') +5%\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym $mod+Prior           exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0;             exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') +5%'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Mod1+Prior to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') 0; exec --no-startup-id pactl set-sink-volume $(pacmd list-sinks | awk '/ index:/{print $3}') +5%\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') toggle'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86AudioMute to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') toggle\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Pause         exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') toggle'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Pause to command exec --no-startup-id pactl set-sink-mute $(pacmd list-sinks | awk '/ index:/{print $3}') toggle\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute $(pacmd list-sources | awk '/ index:/{print $3}') toggle'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86AudioMicMute to command exec --no-startup-id pactl set-source-mute $(pacmd list-sources | awk '/ index:/{print $3}') toggle\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86MonBrightnessUp exec sudo /usr/local/bin/dsplight up'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86MonBrightnessUp to command exec sudo /usr/local/bin/dsplight up\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+XF86MonBrightnessUp exec  sudo /usr/local/bin/dsplight max'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+XF86MonBrightnessUp to command exec sudo /usr/local/bin/dsplight max\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym XF86MonBrightnessDown exec sudo /usr/local/bin/dsplight down'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound XF86MonBrightnessDown to command exec sudo /usr/local/bin/dsplight down\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bindsym Shift+XF86MonBrightnessDown exec sudo /usr/local/bin/dsplight off'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bindsym) 0\n03/19/17 10:01:16 - [bind.c:85] bindsym - Bound Shift+XF86MonBrightnessDown to command exec sudo /usr/local/bin/dsplight off\n03/19/17 10:01:16 - [commands.c:484] handling config command 'for_window [class=\"^Gcr-prompter$\"] floating enable'\n03/19/17 10:01:16 - [commands.c:330] find_handler(for_window) 0\n03/19/17 10:01:16 - [criteria.c:101] Parsing criteria: '[class=\"^Gcr-prompter$\"]'\n03/19/17 10:01:16 - [criteria.c:235] class -> /^Gcr-prompter$/\n03/19/17 10:01:16 - [for_window.c:36] for_window: '[class=\"^Gcr-prompter$\"]' -> 'floating enable' added\n03/19/17 10:01:16 - [commands.c:484] handling config command 'for_window [title=\"pinentry-gnome3\"] floating enable'\n03/19/17 10:01:16 - [commands.c:330] find_handler(for_window) 0\n03/19/17 10:01:16 - [criteria.c:101] Parsing criteria: '[title=\"pinentry-gnome3\"]'\n03/19/17 10:01:16 - [criteria.c:235] title -> /pinentry-gnome3/\n03/19/17 10:01:16 - [for_window.c:36] for_window: '[title=\"pinentry-gnome3\"]' -> 'floating enable' added\n03/19/17 10:01:16 - [commands.c:484] handling config command 'bar {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(bar) 0\n03/19/17 10:01:16 - [bar.c:56] Configuring bar bar-0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'position bottom'\n03/19/17 10:01:16 - [commands.c:330] find_handler(position) 0\n03/19/17 10:01:16 - [position.c:30] Setting bar position 'bottom' for bar: bar-0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'font pango:Lucida 7'\n03/19/17 10:01:16 - [commands.c:330] find_handler(font) 0\n03/19/17 10:01:16 - [font.c:24] Settings font 'pango:Lucida 7' for bar: bar-0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'mode hide'\n03/19/17 10:01:16 - [commands.c:330] find_handler(mode) 0\n03/19/17 10:01:16 - [mode.c:32] Setting mode: 'hide' for bar: bar-0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'hidden_state hide'\n03/19/17 10:01:16 - [commands.c:330] find_handler(hidden_state) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'colors {'\n03/19/17 10:01:16 - [commands.c:330] find_handler(colors) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'statusline #ffffff'\n03/19/17 10:01:16 - [commands.c:330] find_handler(statusline) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'background #323232'\n03/19/17 10:01:16 - [commands.c:330] find_handler(background) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command 'inactive_workspace #32323200 #32323200 #5c5c5c'\n03/19/17 10:01:16 - [commands.c:330] find_handler(inactive_workspace) 0\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:787] End of bar colors block\n03/19/17 10:01:16 - [commands.c:484] handling config command '}'\n03/19/17 10:01:16 - [config.c:781] End of bar block\n03/19/17 10:01:16 - [commands.c:484] handling config command 'include /etc/sway/config.d/'\n03/19/17 10:01:16 - [commands.c:330] find_handler(include) 0\n03/19/17 10:01:16 - [config.c:595] /etc/sway/config.d/ not found.\n03/19/17 10:01:16 - [main.c:49] [wlc] libinput: resume\n03/19/17 10:01:16 - [main.c:49] [wlc] Activating tty\n03/19/17 10:01:16 - [main.c:49] [wlc] MODE: (0) 2560x1440@60000 \n03/19/17 10:01:16 - [main.c:47] [wlc] Connector 1 is not connected or has no modes\n03/19/17 10:01:16 - [main.c:47] [wlc] Connector 2 is not connected or has no modes\n03/19/17 10:01:16 - [main.c:47] [wlc] Connector 3 is not connected or has no modes\n03/19/17 10:01:16 - [main.c:47] [wlc] Connector 4 is not connected or has no modes\n03/19/17 10:01:16 - [main.c:49] [wlc] eDP-1 Chose mode (0) 2560x1440\n03/19/17 10:01:16 - [handlers.c:219] Output 1 resolution changed to 2560 x 1440\n03/19/17 10:01:16 - [container.c:134] New output 1:eDP-1\n03/19/17 10:01:16 - [container.c:145] Matched wildcard output config for eDP-1\n03/19/17 10:01:16 - [config.c:1125] Setting background for output 0 to #000000\n03/19/17 10:01:16 - [layout.c:62] Adding 0x55889eae69d0 (1, 2560.000000x1440.000000) to 0x55889e402840 (0, 0.000000x0.000000)\n03/19/17 10:01:16 - [config.c:1007] Invoking swaybar for bar id 'bar-0'\n03/19/17 10:01:16 - [workspace.c:45] Workspace: Generating new workspace name for output eDP-1\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F1'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F2'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F3'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F4'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F5'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F6'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F7'\n03/19/17 10:01:16 - [workspace.c:67] Got valid workspace command for target: 'F8'\n03/19/17 10:01:16 - [container.c:200] Creating default workspace 1\n03/19/17 10:01:16 - [container.c:217] Added workspace 1 for output 1\n03/19/17 10:01:16 - [layout.c:62] Adding 0x55889eaeb1a0 (2, 2560.000000x1440.000000) to 0x55889eae69d0 (1, 2560.000000x1440.000000)\n03/19/17 10:01:16 - [debug_log.c:98] Setting focus to 0x55889eaeb1a0:18446744073709551615 (WORKSPACE '1')\n03/19/17 10:01:16 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:16 - [main.c:49] [wlc] EGL context is double buffered\n03/19/17 10:01:16 - [main.c:49] [wlc] EGL version: 1.4 (DRI2)\n03/19/17 10:01:16 - [main.c:49] [wlc] EGL vendor: Mesa Project\n03/19/17 10:01:16 - [main.c:49] [wlc] EGL client APIs: OpenGL OpenGL_ES \n03/19/17 10:01:16 - [main.c:49] [wlc] EGL context (RGB888)\n03/19/17 10:01:16 - [main.c:49] [wlc] EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_create_context EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n03/19/17 10:01:16 - [main.c:49] [wlc] GL version: OpenGL ES 3.2 Mesa 13.0.4\n03/19/17 10:01:16 - [main.c:49] [wlc] GL vendor: Intel Open Source Technology Center\n03/19/17 10:01:16 - [main.c:49] [wlc] GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_KHR_texture_compression_astc_ldr GL_OES_depth_texture_cube_map GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_framebuffer_fetch GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_ANDROID_extension_pack_es31a GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_KHR_blend_equation_advanced GL_KHR_blend_equation_advanced_coherent GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_shader_samples_identical GL_KHR_texture_compression_astc_sliced_3d GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_MESA_shader_integer_functions \n03/19/17 10:01:16 - [main.c:49] [wlc] GLES2 renderer initialized\n03/19/17 10:01:16 - [main.c:49] [wlc] Set new bsurface to output (1)\n03/19/17 10:01:16 - [main.c:49] [wlc] Added output (1)\n03/19/17 10:01:16 - [main.c:49] [wlc] become active\n03/19/17 10:01:16 - [ipc-server.c:147] Event on IPC listening socket\n03/19/17 10:01:16 - [ipc-server.c:147] Event on IPC listening socket\n03/19/17 10:01:16 - [ipc-server.c:590] Send IPC reply: { \"id\": \"bar-0\", \"tray_output\": null, \"mode\": \"hide\", \"hidden_state\": \"hide\", \"modifier\": \"Mod4\", \"position\": \"bottom\", \"status_command\": \"while :; do date +'%Y-%m-%d %l:%M:%S %p'; sleep 1; done\", \"font\": \"pango:Lucida 7\", \"bar_height\": -1, \"wrap_scroll\": false, \"workspace_buttons\": true, \"strip_workspace_numbers\": false, \"binding_mode_indicator\": true, \"verbose\": false, \"pango_markup\": false, \"colors\": { \"background\": \"#323232ff\", \"statusline\": \"#ffffffff\", \"separator\": \"#666666ff\", \"focused_background\": \"#323232ff\", \"focused_statusline\": \"#ffffffff\", \"focused_separator\": \"#666666ff\", \"focused_workspace_border\": \"#4c7899ff\", \"focused_workspace_bg\": \"#285577ff\", \"focused_workspace_text\": \"#ffffffff\", \"inactive_workspace_border\": \"#32323200\", \"inactive_workspace_bg\": \"#32323200\", \"inactive_workspace_text\": \"#5c5c5cff\", \"active_workspace_border\": \"#333333ff\", \"active_workspace_bg\": \"#5f676aff\", \"active_workspace_text\": \"#ffffffff\", \"urgent_workspace_border\": \"#2f343aff\", \"urgent_workspace_bg\": \"#900000ff\", \"urgent_workspace_text\": \"#ffffffff\", \"binding_mode_border\": \"#2f343aff\", \"binding_mode_bg\": \"#900000ff\", \"binding_mode_text\": \"#ffffffff\" } }\n03/19/17 10:01:16 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 1, \"name\": \"eDP-1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": false, \"focused\": false, \"active\": true, \"primary\": false, \"layout\": \"output\", \"type\": \"output\", \"current_workspace\": \"1\", \"scale\": 1 } ]\n03/19/17 10:01:16 - [main.c:69] Using output 0 of 1\n03/19/17 10:01:16 - [ipc-server.c:590] Send IPC reply: {\"success\": true}\n03/19/17 10:01:16 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:16 - [extensions.c:97] Setting surface 0x55889eaf0b00 as background for output 1\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eaeb1a0 (WORKSPACE '1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eaeb1a0 1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:16 - [layout.c:1126] Arranging 0x55889eaeb1a0 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889eaeb1a0)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x55889eaeb1a0)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n03/19/17 10:01:16 - [extensions.c:125] Setting surface 0x55889f02e050 as panel for output 1 (wl_resource: 0x55889f01e100)\n03/19/17 10:01:16 - [extensions.c:25] Creating panel config for resource 0x55889f01e100\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889e402840 (ROOT 'root')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889e402840 root 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:953] Arranging output 'eDP-1' at 0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eaeb1a0 (WORKSPACE '1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eaeb1a0 1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 0\n03/19/17 10:01:16 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:16 - [layout.c:1126] Arranging 0x55889eaeb1a0 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889eaeb1a0)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x55889eaeb1a0)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n03/19/17 10:01:16 - [extensions.c:21] Found existing panel config for resource 0x55889f01e100\n03/19/17 10:01:16 - [extensions.c:160] Panel position for wl_resource 0x55889f01e100 changed 0 => 1\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889e402840 (ROOT 'root')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889e402840 root 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:953] Arranging output 'eDP-1' at 0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eaeb1a0 (WORKSPACE '1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eaeb1a0 1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 1\n03/19/17 10:01:16 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:16 - [layout.c:1126] Arranging 0x55889eaeb1a0 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889eaeb1a0)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x55889eaeb1a0)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889e402840 (ROOT 'root')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889e402840 root 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:953] Arranging output 'eDP-1' at 0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [debug_log.c:98] Arranging layout for 0x55889eaeb1a0 (WORKSPACE '1')\n03/19/17 10:01:16 - [layout.c:946] Arranging layout for 0x55889eaeb1a0 1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:16 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:16 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:16 - [layout.c:1126] Arranging 0x55889eaeb1a0 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889eaeb1a0)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x55889eaeb1a0)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n03/19/17 10:01:16 - [main.c:49] [wlc] Xwayland started (DISPLAY :0)\n03/19/17 10:01:16 - [main.c:49] [wlc] xfixes (5.0)\n03/19/17 10:01:16 - [handlers.c:1039] Compositor is ready, executing cmds in queue\n03/19/17 10:01:16 - [commands.c:416] Handling command 'exec \"urxvt256cd\"'\n03/19/17 10:01:16 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:16 - [exec_always.c:33] Executing \"urxvt256cd\"\n03/19/17 10:01:16 - [exec_always.c:74] Child process created with pid 19626 for workspace 1\n03/19/17 10:01:16 - [commands.c:416] Handling command 'exec $scratchpadexec'\n03/19/17 10:01:16 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:16 - [exec_always.c:33] Executing $scratchpadexec\n03/19/17 10:01:16 - [exec_always.c:74] Child process created with pid 19628 for workspace 1\nrxvt-unicode daemon listening on /run/user/1000/.urxvt/urxvtd-jemison.\n03/19/17 10:01:17 - [input.c:52] rewritten name Power_Button\n03/19/17 10:01:17 - [handlers.c:131] Found input device (0:1:Power_Button)\n03/19/17 10:01:17 - [input.c:52] rewritten name Video_Bus\n03/19/17 10:01:17 - [handlers.c:131] Found input device (0:6:Video_Bus)\n03/19/17 10:01:17 - [input.c:52] rewritten name Sleep_Button\n03/19/17 10:01:17 - [handlers.c:131] Found input device (0:3:Sleep_Button)\n03/19/17 10:01:17 - [input.c:52] rewritten name Integrated_Camera\n03/19/17 10:01:17 - [handlers.c:131] Found input device (1266:46529:Integrated_)\n03/19/17 10:01:17 - [input.c:52] rewritten name AT_Translated_Set_2_keyboard\n03/19/17 10:01:17 - [handlers.c:131] Found input device (1:1:AT_Translated_Set_2_keyboard)\n03/19/17 10:01:17 - [input.c:52] rewritten name SynPS/2_Synaptics_TouchPad\n03/19/17 10:01:17 - [handlers.c:131] Found input device (2:7:SynPS/2_Synaptics_TouchPad)\n03/19/17 10:01:17 - [input.c:52] rewritten name TPPS/2_IBM_TrackPoint\n03/19/17 10:01:17 - [handlers.c:131] Found input device (2:10:TPPS/2_IBM_TrackPoint)\n03/19/17 10:01:17 - [input.c:52] rewritten name ThinkPad_Extra_Buttons\n03/19/17 10:01:17 - [handlers.c:131] Found input device (6058:20564:ThinkPad_Extra_B)\n03/19/17 10:01:17 - [commands.c:416] Handling command 'workspace F1'\n03/19/17 10:01:17 - [commands.c:330] find_handler(workspace) 0\n03/19/17 10:01:17 - [container.c:217] Added workspace F1 for output 1\n03/19/17 10:01:17 - [layout.c:62] Adding 0x55889f028060 (2, 2560.000000x1440.000000) to 0x55889eae69d0 (1, 2560.000000x1440.000000)\n03/19/17 10:01:17 - [workspace.c:314] Switching to workspace 0x55889f028060:F1\n03/19/17 10:01:17 - [debug_log.c:98] Setting focus to 0x55889f028060:18446744073709551615 (WORKSPACE 'F1')\n03/19/17 10:01:17 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] }, \"current\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": false, \"focused\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n03/19/17 10:01:17 - [container.c:468] destroying workspace '1'\n03/19/17 10:01:17 - [ipc-server.c:653] Sending workspace::empty event\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: { \"change\": \"empty\", \"current\": null }\n03/19/17 10:01:17 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": true, \"focused\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n03/19/17 10:01:17 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:17 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:17 - [debug_log.c:98] Arranging layout for 0x55889f028060 (WORKSPACE 'F1')\n03/19/17 10:01:17 - [layout.c:946] Arranging layout for 0x55889f028060 F1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:17 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:17 - [layout.c:1008] Arranging workspace 'F1' at 0.000000, 0.000000\n03/19/17 10:01:17 - [layout.c:1126] Arranging 0x55889f028060 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889f028060)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:K    |(0x55889f028060)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 0|name:F1\n03/19/17 10:01:17 - [ipc-server.c:727] Sending binding::run event\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:17 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:18 - [commands.c:416] Handling command 'exec urxvt256cc -ls'\n03/19/17 10:01:18 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:18 - [exec_always.c:33] Executing urxvt256cc -ls\n03/19/17 10:01:18 - [exec_always.c:74] Child process created with pid 19635 for workspace F1\n03/19/17 10:01:18 - [ipc-server.c:727] Sending binding::run event\n03/19/17 10:01:18 - [workspace.c:329] looking for workspace for pid 19626\n03/19/17 10:01:18 - [workspace.c:344] found pid_workspace for pid 19626, workspace 1\n03/19/17 10:01:18 - [workspace.c:365] Creating workspace 1 for pid 19626 because it disappeared\n03/19/17 10:01:18 - [container.c:217] Added workspace 1 for output 1\n03/19/17 10:01:18 - [layout.c:62] Adding 0x55889f063000 (2, 2560.000000x1440.000000) to 0x55889eae69d0 (1, 2560.000000x1440.000000)\n03/19/17 10:01:18 - [handlers.c:416] handle:4 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:564 h:340) title:urxvt256c class:URxvt appid:(null)\n03/19/17 10:01:18 - [container.c:295] Adding new view 4:urxvt256c to container 0x55889f063000 2\n03/19/17 10:01:18 - [layout.c:62] Adding 0x55889f063110 (4, 0.000000x0.000000) to 0x55889f063000 (2, 2560.000000x1440.000000)\n03/19/17 10:01:18 - [ipc-server.c:677] Sending window::new event\n03/19/17 10:01:18 - [debug_log.c:98] Setting focus to 0x55889f063110:4 (VIEW 'urxvt256c')\n03/19/17 10:01:18 - [ipc-server.c:677] Sending window::focus event\n03/19/17 10:01:18 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": false, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] }, \"current\": { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": false, \"focused\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ { \"id\": 5, \"name\": \"urxvt256c\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"visible\": true, \"focused\": true, \"type\": \"con\", \"scratchpad_state\": \"none\", \"percent\": null, \"urgent\": false, \"layout\": \"none\", \"last_split_layout\": \"none\", \"workspace_layout\": \"splith\", \"border\": \"normal\", \"current_border_width\": 2, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window\": 4, \"window_properties\": { \"class\": \"URxvt\", \"instance\": \"urxvt256c\", \"title\": \"urxvt256c\", \"transient_for\": null }, \"fullscreen_mode\": 0, \"sticky\": false, \"floating\": \"auto_off\", \"app_id\": null, \"floating_nodes\": [ ], \"nodes\": [ ] } ] } }\n03/19/17 10:01:18 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1440 }, \"visible\": true, \"focused\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ { \"id\": 5, \"name\": \"urxvt256c\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"visible\": true, \"focused\": true, \"type\": \"con\", \"scratchpad_state\": \"none\", \"percent\": null, \"urgent\": false, \"layout\": \"none\", \"last_split_layout\": \"none\", \"workspace_layout\": \"splith\", \"border\": \"normal\", \"current_border_width\": 2, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window\": 4, \"window_properties\": { \"class\": \"URxvt\", \"instance\": \"urxvt256c\", \"title\": \"urxvt256c\", \"transient_for\": null }, \"fullscreen_mode\": 0, \"sticky\": false, \"floating\": \"auto_off\", \"app_id\": null, \"floating_nodes\": [ ], \"nodes\": [ ] } ] } }\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889f063000 (WORKSPACE '1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f063000 1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:18 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:18 - [layout.c:1126] Arranging 0x55889f063000 horizontally\n03/19/17 10:01:18 - [layout.c:1132] Calculating arrangement for 0x55889f063110:4 (will scale 2560.000000 by 1.000000)\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f063110 urxvt256c 2560.000000x0.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:1018] Set view to 2560 x 1424 @ 0, 0\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889f028060 (WORKSPACE 'F1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f028060 F1 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:18 - [layout.c:1008] Arranging workspace 'F1' at 0.000000, 0.000000\n03/19/17 10:01:18 - [layout.c:1126] Arranging 0x55889f028060 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889f063000)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:W    |(0x55889f063000)(p:0x55889eae69d0)(f:0x55889f063110)(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x55889f063110)(p:0x55889f063000)(f:(nil)   )(h: 4)Type:view|layout:-    |w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 0|name:urxvt256c\n|-focus:X    |(0x55889f028060)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:f|children: 0|name:F1\n03/19/17 10:01:18 - [workspace.c:314] Switching to workspace 0x55889f028060:F1\n03/19/17 10:01:18 - [debug_log.c:98] Setting focus to 0x55889f028060:18446744073709551615 (WORKSPACE 'F1')\n03/19/17 10:01:18 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ { \"id\": 5, \"name\": \"urxvt256c\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": false, \"type\": \"con\", \"scratchpad_state\": \"none\", \"percent\": 1, \"urgent\": false, \"layout\": \"none\", \"last_split_layout\": \"none\", \"workspace_layout\": \"splith\", \"border\": \"normal\", \"current_border_width\": 2, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 17 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window_rect\": { \"x\": 0, \"y\": 17, \"width\": 2560, \"height\": 1407 }, \"window\": 4, \"window_properties\": { \"class\": \"URxvt\", \"instance\": \"urxvt256c\", \"title\": \"urxvt256c\", \"transient_for\": null }, \"fullscreen_mode\": 0, \"sticky\": false, \"floating\": \"auto_off\", \"app_id\": null, \"floating_nodes\": [ ], \"nodes\": [ ] } ] }, \"current\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"focused\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n03/19/17 10:01:18 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"focused\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ { \"id\": 5, \"name\": \"urxvt256c\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"focused\": false, \"type\": \"con\", \"scratchpad_state\": \"none\", \"percent\": 1, \"urgent\": false, \"layout\": \"none\", \"last_split_layout\": \"none\", \"workspace_layout\": \"splith\", \"border\": \"normal\", \"current_border_width\": 2, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 17 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"window_rect\": { \"x\": 0, \"y\": 17, \"width\": 2560, \"height\": 1407 }, \"window\": 4, \"window_properties\": { \"class\": \"URxvt\", \"instance\": \"urxvt256c\", \"title\": \"urxvt256c\", \"transient_for\": null }, \"fullscreen_mode\": 0, \"sticky\": false, \"floating\": \"auto_off\", \"app_id\": null, \"floating_nodes\": [ ], \"nodes\": [ ] } ] }, \"current\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889f063000 (WORKSPACE '1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f063000 1 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:18 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:18 - [layout.c:1126] Arranging 0x55889f063000 horizontally\n03/19/17 10:01:18 - [layout.c:1132] Calculating arrangement for 0x55889f063110:4 (will scale 2560.000000 by 1.000000)\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f063110 urxvt256c 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:1018] Set view to 2560 x 1424 @ 0, 0\n03/19/17 10:01:18 - [debug_log.c:98] Arranging layout for 0x55889f028060 (WORKSPACE 'F1')\n03/19/17 10:01:18 - [layout.c:946] Arranging layout for 0x55889f028060 F1 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:18 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:18 - [layout.c:1008] Arranging workspace 'F1' at 0.000000, 0.000000\n03/19/17 10:01:18 - [layout.c:1126] Arranging 0x55889f028060 horizontally\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889f028060)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x55889f063000)(p:0x55889eae69d0)(f:0x55889f063110)(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x55889f063110)(p:0x55889f063000)(f:(nil)   )(h: 4)Type:view|layout:-    |w:2560|h:1424|x:   0|y:   0|g: -1|vis:f|children: 0|name:urxvt256c\n|-focus:K    |(0x55889f028060)(p:0x55889eae69d0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 0|name:F1\n03/19/17 10:01:18 - [debug_log.c:98] Setting focus to 0x55889f028060:18446744073709551615 (WORKSPACE 'F1')\n03/19/17 10:01:18 - [ipc-server.c:653] Sending workspace::focus event\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"focused\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n03/19/17 10:01:18 - [handlers.c:571] geometry request for 4 564x340 @ 0,17\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:18 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 4, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": false, \"num\": 1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 3, \"name\": \"F1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 2560, \"height\": 1424 }, \"visible\": true, \"num\": -1, \"output\": \"eDP-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n03/19/17 10:01:21 - [commands.c:416] Handling command 'exec urxvt256cc -ls'\n03/19/17 10:01:21 - [commands.c:330] find_handler(exec) 0\n03/19/17 10:01:21 - [exec_always.c:33] Executing urxvt256cc -ls\n03/19/17 10:01:21 - [exec_always.c:74] Child process created with pid 19688 for workspace F1\n03/19/17 10:01:21 - [ipc-server.c:727] Sending binding::run event\n03/19/17 10:01:21 - [workspace.c:329] looking for workspace for pid 19626\n03/19/17 10:01:21 - [handlers.c:416] handle:5 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:564 h:340) title:urxvt256c class:URxvt appid:(null)\n03/19/17 10:01:21 - [container.c:295] Adding new view 5:urxvt256c to container 0x55889f028060 2\n03/19/17 10:01:21 - [layout.c:62] Adding 0x55889f068e30 (4, 0.000000x0.000000) to 0x55889f028060 (2, 2560.000000x1424.000000)\n03/19/17 10:01:21 - [ipc-server.c:677] Sending window::new event\n03/19/17 10:01:21 - [debug_log.c:98] Setting focus to 0x55889f068e30:5 (VIEW 'urxvt256c')\n03/19/17 10:01:21 - [ipc-server.c:677] Sending window::focus event\n03/19/17 10:01:21 - [debug_log.c:98] Arranging layout for 0x55889eae69d0 (OUTPUT 'eDP-1')\n03/19/17 10:01:21 - [layout.c:946] Arranging layout for 0x55889eae69d0 eDP-1 2560.000000x1440.000000+0.000000,0.000000\n03/19/17 10:01:21 - [debug_log.c:98] Arranging layout for 0x55889f063000 (WORKSPACE '1')\n03/19/17 10:01:21 - [layout.c:946] Arranging layout for 0x55889f063000 1 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:21 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:21 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n03/19/17 10:01:21 - [layout.c:1126] Arranging 0x55889f063000 horizontally\n03/19/17 10:01:21 - [layout.c:1132] Calculating arrangement for 0x55889f063110:4 (will scale 2560.000000 by 1.000000)\n03/19/17 10:01:21 - [layout.c:946] Arranging layout for 0x55889f063110 urxvt256c 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:21 - [layout.c:1018] Set view to 2560 x 1424 @ 0, 0\n03/19/17 10:01:21 - [debug_log.c:98] Arranging layout for 0x55889f028060 (WORKSPACE 'F1')\n03/19/17 10:01:21 - [layout.c:946] Arranging layout for 0x55889f028060 F1 2560.000000x1424.000000+0.000000,0.000000\n03/19/17 10:01:21 - [layout.c:986] -> Found panel for this workspace: 2560x16, position: 1\n03/19/17 10:01:21 - [layout.c:1008] Arranging workspace 'F1' at 0.000000, 0.000000\n03/19/17 10:01:21 - [layout.c:1126] Arranging 0x55889f028060 horizontally\n03/19/17 10:01:21 - [layout.c:1132] Calculating arrangement for 0x55889f068e30:4 (will scale 2560.000000 by 1.000000)\n03/19/17 10:01:21 - [layout.c:946] Arranging layout for 0x55889f068e30 urxvt256c 2560.000000x0.000000+0.000000,0.000000\n03/19/17 10:01:21 - [layout.c:1018] Set view to 2560 x 1424 @ 0, 0\nfocus:R      |(0x55889e402840)(p:(nil)   )(f:0x55889eae69d0)(h:18446744073709551615)Type:root|layout:-    |w:2560|h:1440|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55889eae69d0)(p:0x55889e402840)(f:0x55889f028060)(h: 1)Type:op  |layout:-    |w:2560|h:1440|x:   0|y:   0|g: -1|vis:t|children: 2|name:eDP-1\n|-focus:X    |(0x55889f063000)(p:0x55889eae69d0)(f:0x55889f063110)(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:f|children: 1|name:1\n|--focus:X   |(0x55889f063110)(p:0x55889f063000)(f:(nil)   )(h: 4)Type:view|layout:-    |w:2560|h:1424|x:   0|y:   0|g: -1|vis:f|children: 0|name:urxvt256c\n|-focus:W    |(0x55889f028060)(p:0x55889eae69d0)(f:0x55889f068e30)(h:18446744073709551615)Type:ws  |layout:Horiz|w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 1|name:F1\n|--focus:K   |(0x55889f068e30)(p:0x55889f028060)(f:(nil)   )(h: 5)Type:view|layout:-    |w:2560|h:1424|x:   0|y:   0|g: -1|vis:t|children: 0|name:urxvt256c\n03/19/17 10:01:21 - [handlers.c:571] geometry request for 5 564x340 @ 0,17\n03/19/17 10:01:21 - [handlers.c:571] geometry request for 5 2560x1407 @ 0,17\n03/19/17 10:01:24 - [commands.c:416] Handling command 'exit'\n03/19/17 10:01:24 - [commands.c:330] find_handler(exit) 0\n03/19/17 10:01:24 - [main.c:49] [wlc] Terminating wlc...\n03/19/17 10:01:24 - [main.c:49] [wlc] Terminating compositor...\n03/19/17 10:01:24 - [main.c:49] [wlc] Output (1) terminated...\n03/19/17 10:01:24 - [container.c:448] OUTPUT: Destroying output '1'\n03/19/17 10:01:24 - [main.c:49] [wlc] Released drm surface (0x55889eadc268)\n03/19/17 10:01:24 - [main.c:49] [wlc] Removed bsurface from output (1)\n03/19/17 10:01:24 - [main.c:49] [wlc] Removed output (1)\n03/19/17 10:01:24 - [main.c:49] [wlc] Compositor terminated...\n03/19/17 10:01:24 - [ipc-server.c:727] Sending binding::run event\n03/19/17 10:01:24 - [main.c:49] [wlc] Cleanup wlc\n03/19/17 10:01:24 - [main.c:49] [wlc] Closing Xwayland\n03/19/17 10:01:24 - [handlers.c:508] Destroying window 4\n03/19/17 10:01:24 - [handlers.c:508] Destroying window 5\n03/19/17 10:01:24 - [main.c:49] [wlc] Closed drm\n03/19/17 10:01:24 - [handlers.c:508] Destroying window 2\n03/19/17 10:01:24 - [handlers.c:508] Destroying window 3\n03/19/17 10:01:24 - [extensions.c:37] Background surface killed\n03/19/17 10:01:24 - [extensions.c:49] Panel surface killed\n03/19/17 10:01:24 - [debug_log.c:98] Arranging layout for 0x55889e402840 (ROOT 'root')\n03/19/17 10:01:24 - [layout.c:946] Arranging layout for 0x55889e402840 root 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x55889e402840)(p:(nil)   )(f:(nil)   )(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:root\n03/19/17 10:01:24 - [main.c:49] [wlc] Restoring vt 2 (0x4) (fd 0)\n```. Indeed, that does fix it.  Thanks for figuring that out!. ",
    "tjaartvdwalt": "I have also noticed this. \nIt seems a bit sporadic, but it often happens in Google Chrome when I have Dev tools open, and try to inspect elements on the page.. I use a very customized keyboard layout, and being able to change the keyboard layout at run time would be very handy in a couple of situations:\n\nA colleague wants to type on my laptop\nI want to plug in an external keyboard that has a different layout\n\nAre there plans to support this with wlroots? Is there a way I can contribute?. ",
    "marcv81": "Reproduced in VSCode, Sway 0.13.0, default config (installed from unofficial Debian repo, on Stretch 9.1).. Reproduced in VSCode, Sway 0.13.0, default config (installed from unofficial Debian repo, on Stretch 9.1).. ",
    "NicholasAsimov": "Easily reproducible in git-gui 0.21 with Tk version 8.6.7. I will provide a screencast and logs later.. Weirdly I have the same issue on sway 1.0@0f71547. xwayland programs have much larger cursor.\nI have 1 monitor with 2560x1440 resolution.. @somdoron thanks, great info!. git gui and gitk context menus are tiled as well (they are Tcl/Tk based gui).. ",
    "ykrivopalov": "The same for wpa_gui and wireshark (qt) when you open menu. Looks like it reproduces for all qt5 applications. I've checked weston (is weston wlc based?) and it doesn't have this problem. ",
    "severoraz": "@airstep are you able to use the compose key now?. Nevermind, it works for me now, turns out I was setting the wrong XKB option. ",
    "DmitryHetman": "sway.txt\n. mpv supports wayland natively. If it doesn't work try to launch it with xwayland.. They are. After updating libinput got another error.\nsway.log.txt\n. Yes I have libinput and virtual libudev. wlc re-emerged, this does'nt help same error.. @@LIBUDEV_183 \nIs it version of virtual/libudev?. On gentoo virtual/libudev 232 version\n. wlc only shows some warnings, not errors\n. wlc.log.txt\n. How remove it? . Ok!. Fine, it works, but why even add static option if it doesn't work?\n. Don't close the issue then\n. Does LXterminal support wayland?. ",
    "bugworm": "It happens to me too, only with native wayland qt apps, don't sure about gtk. I'm forced to use xwayland because of this. https://gist.github.com/AnotherBugworm/c838d9a8a39828cbfc4422603c4d576d\nversion and config from here\nhttps://gist.github.com/AnotherBugworm/5a023e0e3614450f360da41d42d8c16e\nDolphin and Konsole(launched after dolphin) are bugged.. My bad\nhttps://gist.github.com/AnotherBugworm/5a023e0e3614450f360da41d42d8c16e\n. ",
    "InfernoZeus": "@SirCmpwn Any ideas where I might start looking at debugging this? Is it likely to be something that will have to wait for the move to wlroots before being fixed?. >Resizing from the center is not how sway 0.15 nor i3 works, we should resize from the top left corner (using mod+drag)\nResizing in sway 0.15 was dependent on which quarter of the window the cursor started in. The corner furthest from the cursor is locked in place. I.e. it was possible to drag the top left corner of the window towards the top left corner of the screen.\nWith the current implementation, you have to drag the bottom right corner, and then move the window. Is this an intentional change in functionality?\nEdit: sorry, reposted on my personal account, so message is out of order.. ",
    "Stryder0": "edit - rebooted and tried again \n`````\n04/01/17 15:43:54 - [main.c:125] Contents of /etc/os-release:\n04/01/17 15:43:54 - [main.c:132] NAME=\"Arch Linux\"\n04/01/17 15:43:54 - [main.c:132] PRETTY_NAME=\"Arch Linux\"\n04/01/17 15:43:54 - [main.c:132] ID=arch\n04/01/17 15:43:54 - [main.c:132] ID_LIKE=archlinux\n04/01/17 15:43:54 - [main.c:132] ANSI_COLOR=\"0;36\"\n04/01/17 15:43:54 - [main.c:132] HOME_URL=\"https://www.archlinux.org/\"\n04/01/17 15:43:54 - [main.c:132] SUPPORT_URL=\"https://bbs.archlinux.org/\"\n04/01/17 15:43:54 - [main.c:132] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\n04/01/17 15:43:54 - [main.c:110] PATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_per\nl\n04/01/17 15:43:54 - [main.c:110] LD_LOAD_PATH=(null)\n04/01/17 15:43:54 - [main.c:110] LD_PRELOAD_PATH=(null)\n04/01/17 15:43:54 - [main.c:110] LD_LIBRARY_PATH=(null)\n04/01/17 15:43:54 - [main.c:110] SWAY_CURSOR_THEME=(null)\n04/01/17 15:43:54 - [main.c:110] SWAY_CURSOR_SIZE=(null)\n04/01/17 15:43:54 - [main.c:110] SWAYSOCK=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_DRM_DEVICE=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_SHM=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_OUTPUTS=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_XWAYLAND=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_LIBINPUT=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_REPEAT_DELAY=(null)\n04/01/17 15:43:54 - [main.c:110] WLC_REPEAT_RATE=(null)\n04/01/17 15:43:54 - [main.c:110] XKB_DEFAULT_RULES=(null)\n04/01/17 15:43:54 - [main.c:110] XKB_DEFAULT_MODEL=(null)\n04/01/17 15:43:54 - [main.c:110] XKB_DEFAULT_LAYOUT=(null)\n04/01/17 15:43:54 - [main.c:110] XKB_DEFAULT_VARIANT=(null)\n04/01/17 15:43:54 - [main.c:110] XKB_DEFAULT_OPTIONS=(null)\n04/01/17 15:43:54 - [main.c:49] [wlc] Doing work on SUID/SGID side and dropping permissions\n04/01/17 15:43:54 - [main.c:49] [wlc] Running on vt 1 (fd 0)\n04/01/17 15:43:54 - [main.c:49] [wlc] Work done, dropping permissions and checking communication\n04/01/17 15:43:55 - [main.c:47] [wlc] Failed to open X11 display\n04/01/17 15:43:55 - [main.c:334] Dropping extra capabilities\n04/01/17 15:43:55 - [main.c:350] Starting sway version  (2017-03-14, branch \"\")\n04/01/17 15:43:55 - [config.c:434] Set XDG_CONFIG_HOME to /home/jlribault/.config\n04/01/17 15:43:55 - [config.c:459] Loading config from /etc/sway/security.d/00-defaults\n04/01/17 15:43:55 - [commands.c:484] handling config command 'permit * fullscreen keyboard mouse'\n04/01/17 15:43:55 - [commands.c:330] find_handler(permit) 0\n04/01/17 15:43:55 - [permit.c:73] Permissions granted to * for features 112\n04/01/17 15:43:55 - [commands.c:484] handling config command 'permit /usr/bin/swaylock lock'\n04/01/17 15:43:55 - [commands.c:330] find_handler(permit) 0\n04/01/17 15:43:55 - [permit.c:73] Permissions granted to /usr/bin/swaylock for features 113\n04/01/17 15:43:55 - [commands.c:484] handling config command 'permit /usr/bin/swaybg background'\n04/01/17 15:43:55 - [commands.c:330] find_handler(permit) 0\n04/01/17 15:43:55 - [permit.c:73] Permissions granted to /usr/bin/swaybg for features 116\n04/01/17 15:43:55 - [commands.c:484] handling config command 'permit /usr/bin/swaygrab screenshot'\n04/01/17 15:43:55 - [commands.c:330] find_handler(permit) 0\n04/01/17 15:43:55 - [permit.c:73] Permissions granted to /usr/bin/swaygrab for features 120\n04/01/17 15:43:55 - [commands.c:484] handling config command 'permit /usr/bin/swaybar panel'\n04/01/17 15:43:55 - [commands.c:330] find_handler(permit) 0\n04/01/17 15:43:55 - [permit.c:73] Permissions granted to /usr/bin/swaybar for features 114\n04/01/17 15:43:55 - [commands.c:484] handling config command 'ipc /usr/bin/swaymsg {'\n04/01/17 15:43:55 - [commands.c:330] find_handler(ipc) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command ' enabled'\n04/01/17 15:43:55 - [commands.c:330] find_handler() 0\n04/01/17 15:43:55 - [ipc.c:97] Enabled IPC * feature\n04/01/17 15:43:55 - [commands.c:484] handling config command 'events {'\n04/01/17 15:43:55 - [commands.c:330] find_handler(events) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command ' disabled'\n04/01/17 15:43:55 - [commands.c:330] find_handler() 0\n04/01/17 15:43:55 - [ipc.c:149] Disabled IPC * event\n04/01/17 15:43:55 - [commands.c:484] handling config command '}'\n04/01/17 15:43:55 - [config.c:802] End of IPC events block\n04/01/17 15:43:55 - [commands.c:484] handling config command '}'\n04/01/17 15:43:55 - [config.c:797] End of IPC block\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Return exec $term'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Return to command exec urxvt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+q kill'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+q to command kill\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+d exec $menu'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+d to command exec dmenu_run\n04/01/17 15:43:55 - [commands.c:484] handling config command 'floating_modifier $mod normal'\n04/01/17 15:43:55 - [commands.c:330] find_handler(floating_modifier) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+c reload'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+c to command reload\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+e exit'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+e to command exit\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+$left focus left'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+h to command focus left\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+$down focus down'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+j to command focus down\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+$up focus up'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+k to command focus up\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+$right focus right'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+l to command focus right\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Left focus left'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Left to command focus left\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Down focus down'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Down to command focus down\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Up focus up'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Up to command focus up\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Right focus right'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Right to command focus right\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+$left move left'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+h to command move left\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+$down move down'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+j to command move down\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+$up move up'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+k to command move up\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+Shift+$right move right'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+l to command move right\n:\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+Shift+Right to command move right\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+1 workspace 1'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+1 to command workspace 1\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+2 workspace 2'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+2 to command workspace 2\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+3 workspace 3'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+3 to command workspace 3\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+4 workspace 4'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+4 to command workspace 4\n:\n04/01/17 15:43:55 - [commands.c:484] handling config command 'mode \"resize\" {'\n04/01/17 15:43:55 - [commands.c:330] find_handler(mode) 0\n04/01/17 15:43:55 - [mode.c:46] Switching to mode `resize'\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $left resize shrink width 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound h to command resize shrink width 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $down resize grow height 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound j to command resize grow height 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $up resize shrink height 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound k to command resize shrink height 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $right resize grow width 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound l to command resize grow width 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Left resize shrink width 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Left to command resize shrink width 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Down resize grow height 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Down to command resize grow height 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Up resize shrink height 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Up to command resize shrink height 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Right resize grow width 10 px or 10 ppt'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Right to command resize grow width 10 px or 10 ppt\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Return mode \"default\"'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Return to command mode \"default\"\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym Escape mode \"default\"'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Escape to command mode \"default\"\n04/01/17 15:43:55 - [commands.c:484] handling config command '}'\n04/01/17 15:43:55 - [config.c:769] End of mode block\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bindsym $mod+r mode \"resize\"'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bindsym) 0\n04/01/17 15:43:55 - [bind.c:85] bindsym - Bound Mod1+r to command mode \"resize\"\n04/01/17 15:43:55 - [commands.c:484] handling config command 'bar {'\n04/01/17 15:43:55 - [commands.c:330] find_handler(bar) 0\n04/01/17 15:43:55 - [bar.c:56] Configuring bar bar-0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'position top'\n04/01/17 15:43:55 - [commands.c:330] find_handler(position) 0\n04/01/17 15:43:55 - [position.c:30] Setting bar position 'top' for bar: bar-0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'colors {'\n04/01/17 15:43:55 - [commands.c:330] find_handler(colors) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'statusline #ffffff'\n04/01/17 15:43:55 - [commands.c:330] find_handler(statusline) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'background #323232'\n04/01/17 15:43:55 - [commands.c:330] find_handler(background) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command 'inactive_workspace #32323200 #32323200 #5c5c5c'\n04/01/17 15:43:55 - [commands.c:330] find_handler(inactive_workspace) 0\n04/01/17 15:43:55 - [commands.c:484] handling config command '}'\n04/01/17 15:43:55 - [config.c:787] End of bar colors block\n04/01/17 15:43:55 - [commands.c:484] handling config command '}'\n04/01/17 15:43:55 - [config.c:781] End of bar block\n04/01/17 15:43:55 - [commands.c:484] handling config command 'include /etc/sway/config.d/'\n04/01/17 15:43:55 - [commands.c:330] find_handler(include) 0\n04/01/17 15:43:55 - [config.c:595] /etc/sway/config.d/ not found.\n04/01/17 15:43:55 - [main.c:49] [wlc] libinput: resume\n04/01/17 15:43:55 - [main.c:47] [wlc] Could not set master for drm fd (11)\n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 1366x768@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 1024x768@75000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 1024x768@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 800x600@75000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 800x600@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 640x480@75000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 640x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (0) 720x400@70000 \n04/01/17 15:43:55 - [main.c:47] [wlc] Connector 1 is not connected or has no modes\n04/01/17 15:43:55 - [main.c:47] [wlc] Connector 2 is not connected or has no modes\n04/01/17 15:43:55 - [main.c:47] [wlc] Connector 3 is not connected or has no modes\n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@50000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1920x1080@50000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1680x1050@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1280x1024@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1440x900@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1280x800@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1152x864@75000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1280x720@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1280x720@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1280x720@50000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1024x768@70000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 1024x768@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 800x600@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 800x600@56000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 720x576@50000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 720x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 720x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 640x480@67000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 640x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 640x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 640x480@60000 \n04/01/17 15:43:55 - [main.c:49] [wlc] MODE: (4) 720x400@70000 \n04/01/17 15:43:55 - [main.c:49] [wlc] DVI-I-1 Chose mode (0) 1366x768\n04/01/17 15:43:55 - [handlers.c:219] Output 1 resolution changed to 1366 x 768\n04/01/17 15:43:55 - [container.c:134] New output 1:DVI-I-1\n04/01/17 15:43:55 - [container.c:145] Matched wildcard output config for DVI-I-1\n04/01/17 15:43:55 - [config.c:1125] Setting background for output 0 to /usr/share/sway/Sway_Wallpaper_Blue_1920x1080.png\n04/01/17 15:43:55 - [layout.c:62] Adding 0x12a4120 (1, 1366.000000x768.000000) to 0x649080 (0, 0.000000x0.000000)\n04/01/17 15:43:55 - [config.c:1007] Invoking swaybar for bar id 'bar-0'\n04/01/17 15:43:55 - [workspace.c:45] Workspace: Generating new workspace name for output DVI-I-1\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '10'\n04/01/17 15:43:55 - [workspace.c:107] Workspace: Found free name 10\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '1'\n04/01/17 15:43:55 - [workspace.c:107] Workspace: Found free name 1\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '2'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '3'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '4'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '5'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '6'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '7'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '8'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '9'\n04/01/17 15:43:55 - [container.c:200] Creating default workspace 1\n04/01/17 15:43:55 - [container.c:217] Added workspace 1 for output 1\n04/01/17 15:43:55 - [layout.c:62] Adding 0x12c7050 (2, 1366.000000x768.000000) to 0x12a4120 (1, 1366.000000x768.000000)\n04/01/17 15:43:55 - [debug_log.c:98] Setting focus to 0x12c7050:18446744073709551615 (WORKSPACE '1')\n04/01/17 15:43:55 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL context is double buffered\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL version: 1.4 (DRI2)\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL vendor: Mesa Project\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL client APIs: OpenGL OpenGL_ES \n04/01/17 15:43:55 - [main.c:49] [wlc] EGL context (RGB888)\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_cl_event2 EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n04/01/17 15:43:55 - [main.c:49] [wlc] GL version: OpenGL ES 3.1 Mesa 17.0.2\n04/01/17 15:43:55 - [main.c:49] [wlc] GL vendor: nouveau\n04/01/17 15:43:55 - [main.c:49] [wlc] GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_half_float GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_robustness GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_OES_depth_texture_cube_map GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_EXT_base_instance GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_KHR_blend_equation_advanced GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_NV_image_formats GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_EXT_window_rectangles GL_MESA_shader_integer_functions \n04/01/17 15:43:55 - [main.c:49] [wlc] GLES2 renderer initialized\n04/01/17 15:43:55 - [main.c:49] [wlc] Set new bsurface to output (1)\n04/01/17 15:43:55 - [main.c:49] [wlc] Added output (1)\n04/01/17 15:43:55 - [main.c:49] [wlc] HDMI-A-1 Chose mode (0) 1920x1080\n04/01/17 15:43:55 - [handlers.c:219] Output 2 resolution changed to 1920 x 1080\n04/01/17 15:43:55 - [container.c:134] New output 2:HDMI-A-1\n04/01/17 15:43:55 - [container.c:145] Matched wildcard output config for HDMI-A-1\n04/01/17 15:43:55 - [config.c:1125] Setting background for output 1 to /usr/share/sway/Sway_Wallpaper_Blue_1920x1080.png\n04/01/17 15:43:55 - [layout.c:62] Adding 0x1760f30 (1, 1920.000000x1080.000000) to 0x649080 (0, 1366.000000x768.000000)\n04/01/17 15:43:55 - [config.c:1007] Invoking swaybar for bar id 'bar-0'\n04/01/17 15:43:55 - [workspace.c:45] Workspace: Generating new workspace name for output HDMI-A-1\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '10'\n04/01/17 15:43:55 - [workspace.c:107] Workspace: Found free name 10\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '1'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '2'\n04/01/17 15:43:55 - [workspace.c:107] Workspace: Found free name 2\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '3'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '4'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '5'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '6'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '7'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '8'\n04/01/17 15:43:55 - [workspace.c:67] Got valid workspace command for target: '9'\n04/01/17 15:43:55 - [container.c:200] Creating default workspace 2\n04/01/17 15:43:55 - [container.c:217] Added workspace 2 for output 2\n04/01/17 15:43:55 - [layout.c:62] Adding 0x1778c30 (2, 1920.000000x1080.000000) to 0x1760f30 (1, 1920.000000x1080.000000)\n04/01/17 15:43:55 - [debug_log.c:98] Setting focus to 0x1778c30:18446744073709551615 (WORKSPACE '2')\n04/01/17 15:43:55 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:43:55 - [debug_log.c:98] Setting focus to 0x12c7050:18446744073709551615 (WORKSPACE '1')\n04/01/17 15:43:55 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL context is double buffered\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL version: 1.4 (DRI2)\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL vendor: Mesa Project\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL client APIs: OpenGL OpenGL_ES \n04/01/17 15:43:55 - [main.c:49] [wlc] EGL context (RGB888)\n04/01/17 15:43:55 - [main.c:49] [wlc] EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_cl_event2 EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n04/01/17 15:43:55 - [main.c:49] [wlc] GL version: OpenGL ES 3.1 Mesa 17.0.2\n04/01/17 15:43:55 - [main.c:49] [wlc] GL vendor: nouveau\n04/01/17 15:43:55 - [main.c:49] [wlc] GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_half_float GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_robustness GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_OES_depth_texture_cube_map GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_EXT_base_instance GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_KHR_blend_equation_advanced GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_NV_image_formats GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_EXT_window_rectangles GL_MESA_shader_integer_functions \n04/01/17 15:43:55 - [main.c:49] [wlc] GLES2 renderer initialized\n04/01/17 15:43:55 - [main.c:49] [wlc] Set new bsurface to output (2)\n04/01/17 15:43:55 - [main.c:49] [wlc] Added output (2)\n04/01/17 15:43:55 - [main.c:49] [wlc] become active\n04/01/17 15:43:55 - [ipc-server.c:147] Event on IPC listening socket\n04/01/17 15:43:55 - [security.c:85] WARNING: unable to read /proc/618/exe for security check. Using default policy.\n04/01/17 15:43:55 - [ipc-server.c:147] Event on IPC listening socket\n04/01/17 15:43:55 - [security.c:85] WARNING: unable to read /proc/618/exe for security check. Using default policy.\n04/01/17 15:43:55 - [ipc-server.c:253] IPC Client -1 disconnected\n04/01/17 15:43:55 - [ipc-server.c:147] Event on IPC listening socket\n04/01/17 15:43:55 - [ipc-server.c:253] IPC Client -1 disconnected\n04/01/17 15:43:55 - [ipc-server.c:147] Event on IPC listening socket\n04/01/17 15:43:55 - [ipc-server.c:590] Send IPC reply: { \"id\": \"bar-0\", \"tray_output\": null, \"mode\": \"dock\", \"hidden_state\": \"hide\", \"modifier\": \"Mod4\", \"position\": \"top\", \"status_command\": \"while :; do date +'%Y-%m-%d %l:%M:%S %p'; sleep 1; done\", \"font\": \"monospace 10\", \"bar_height\": -1, \"wrap_scroll\": false, \"workspace_buttons\": true, \"strip_workspace_numbers\": false, \"binding_mode_indicator\": true, \"verbose\": false, \"pango_markup\": false, \"colors\": { \"background\": \"#323232ff\", \"statusline\": \"#ffffffff\", \"separator\": \"#666666ff\", \"focused_background\": \"#323232ff\", \"focused_statusline\": \"#ffffffff\", \"focused_separator\": \"#666666ff\", \"focused_workspace_border\": \"#4c7899ff\", \"focused_workspace_bg\": \"#285577ff\", \"focused_workspace_text\": \"#ffffffff\", \"inactive_workspace_border\": \"#32323200\", \"inactive_workspace_bg\": \"#32323200\", \"inactive_workspace_text\": \"#5c5c5cff\", \"active_workspace_border\": \"#333333ff\", \"active_workspace_bg\": \"#5f676aff\", \"active_workspace_text\": \"#ffffffff\", \"urgent_workspace_border\": \"#2f343aff\", \"urgent_workspace_bg\": \"#900000ff\", \"urgent_workspace_text\": \"#ffffffff\", \"binding_mode_border\": \"#2f343aff\", \"binding_mode_bg\": \"#900000ff\", \"binding_mode_text\": \"#ffffffff\" } }\n04/01/17 15:43:55 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 1, \"name\": \"DVI-I-1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 1366, \"height\": 768 }, \"visible\": false, \"focused\": false, \"active\": true, \"primary\": false, \"layout\": \"output\", \"type\": \"output\", \"current_workspace\": \"1\", \"scale\": 1 }, { \"id\": 3, \"name\": \"HDMI-A-1\", \"rect\": { \"x\": 1366, \"y\": 0, \"width\": 1920, \"height\": 1080 }, \"visible\": false, \"focused\": false, \"active\": true, \"primary\": false, \"layout\": \"output\", \"type\": \"output\", \"current_workspace\": \"2\", \"scale\": 1 } ]\n04/01/17 15:43:55 - [main.c:69] Using output 0 of 2\n04/01/17 15:43:55 - [ipc-server.c:590] Send IPC reply: {\"success\": true}\n04/01/17 15:43:55 - 04/01/17 15:43:55 - [main.c:69] [ipc-server.c:590] Using output 1 of 2Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 1366, \"height\": 768 }, \"visible\": false, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true }, { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 1366, \"y\": 0, \"width\": 1920, \"height\": 1080 }, \"visible\": false, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false } ]\n04/01/17 15:43:55 - [extensions.c:125] Setting surface 0x1856c40 as panel for output 1 (wl_resource: 0x183b230)\n04/01/17 15:43:55 - [extensions.c:25] Creating panel config for resource 0x183b230\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [extensions.c:21] Found existing panel config for resource 0x183b230\n04/01/17 15:43:55 - [extensions.c:160] Panel position for wl_resource 0x183b230 changed 0 => 0\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [extensions.c:125] Setting surface 0x185a990 as panel for output 2 (wl_resource: 0x1856630)\n04/01/17 15:43:55 - [extensions.c:25] Creating panel config for resource 0x1856630\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [extensions.c:21] Found existing panel config for resource 0x1856630\n04/01/17 15:43:55 - [extensions.c:160] Panel position for wl_resource 0x1856630 changed 0 => 0\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 0x0, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 0.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x649080 root 3286.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'DVI-I-1' at 0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:43:55 - [layout.c:953] Arranging output 'HDMI-A-1' at 1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1080.000000+0.000000,0.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [extensions.c:97] Setting surface 0x1856380 as background for output 2\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1059.000000+0.000000,21.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '2' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [extensions.c:97] Setting surface 0x185b720 as background for output 1\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12a4120 (OUTPUT 'DVI-I-1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12a4120 DVI-I-1 1366.000000x768.000000+0.000000,0.000000\n04/01/17 15:43:55 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:43:55 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:43:55 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:43:55 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:43:55 - [layout.c:1126] Arranging 0x12c7050 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:43:55 - [main.c:49] [wlc] Xwayland started (DISPLAY :0)\n04/01/17 15:43:55 - [main.c:49] [wlc] xfixes (5.0)\n04/01/17 15:43:55 - [handlers.c:1039] Compositor is ready, executing cmds in queue\n04/01/17 15:43:57 - [input.c:52] rewritten name Power_Button\n04/01/17 15:43:57 - [handlers.c:131] Found input device (0:1:Power_Button)\n04/01/17 15:43:57 - [input.c:52] rewritten name Power_Button\n04/01/17 15:43:57 - [handlers.c:131] Found input device (0:1:Power_Button)\n04/01/17 15:43:57 - [input.c:52] rewritten name Sleep_Button\n04/01/17 15:43:57 - [handlers.c:131] Found input device (0:3:Sleep_Button)\n04/01/17 15:43:57 - [input.c:52] rewritten name Soarer_Soarer's_Keyboard_Converter\n04/01/17 15:43:57 - [handlers.c:131] Found input device (5824:1149:Soarer_Soarer's_Keyboard_Conv)\n04/01/17 15:43:57 - [input.c:52] rewritten name Sun_Sonny_USB_Gaming_Mouse\n04/01/17 15:43:57 - [handlers.c:131] Found input device (1241:41072:Sun_Sonny_USB_Gaming)\n04/01/17 15:43:57 - [input.c:52] rewritten name Sun_Sonny_USB_Gaming_Mouse\n04/01/17 15:43:57 - [handlers.c:131] Found input device (1241:41072:Sun_Sonny_USB_Gaming)\n04/01/17 15:43:57 - [input.c:52] rewritten name Creative_Technology_Ltd_Sound_Blaster_E1\n04/01/17 15:43:57 - [handlers.c:131] Found input device (1054:12859:Creative_Technology_Ltd_Sound_Blas)\n04/01/17 15:43:59 - [commands.c:416] Handling command 'focus left'\n04/01/17 15:43:59 - [commands.c:330] find_handler(focus) 0\n04/01/17 15:43:59 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:00 - [commands.c:416] Handling command 'focus right'\n04/01/17 15:44:00 - [commands.c:330] find_handler(focus) 0\n04/01/17 15:44:00 - [output.c:160] HDMI-A-1 (1920x1080+1366+0) is right of current output DVI-I-1 (y-position 373)\n04/01/17 15:44:00 - [layout.c:1469] Moving between outputs\n04/01/17 15:44:00 - [debug_log.c:98] Setting focus to 0x1778c30:18446744073709551615 (WORKSPACE '2')\n04/01/17 15:44:00 - [debug_log.c:98] Setting focus to 0x1778c30:18446744073709551615 (WORKSPACE '2')\n04/01/17 15:44:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"focused\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:44:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"focused\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:44:00 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\n04/01/17 15:44:00 - [commands.c:416] Handling command 'focus left'\n04/01/17 15:44:00 - [commands.c:330] find_handler(focus) 0\n04/01/17 15:44:00 - [output.c:160] DVI-I-1 (1366x768+0+0) is left of current output HDMI-A-1 (y-position 529)\n04/01/17 15:44:00 - [layout.c:1469] Moving between outputs\n04/01/17 15:44:00 - [debug_log.c:98] Setting focus to 0x12c7050:18446744073709551615 (WORKSPACE '1')\n04/01/17 15:44:00 - [debug_log.c:98] Setting focus to 0x12c7050:18446744073709551615 (WORKSPACE '1')\n04/01/17 15:44:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"focused\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:44:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"focused\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:44:00 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true }, { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false } ]\n04/01/17 15:44:00 - [ipc-server.c:590] Send IPC reply: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1366, \"height\": 747 }, \"visible\": true, \"num\": 1, \"output\": \"DVI-I-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true }, { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false } ]\n04/01/17 15:44:02 - [commands.c:416] Handling command 'mode \"resize\"'\n04/01/17 15:44:02 - [commands.c:330] find_handler(mode) 0\n04/01/17 15:44:02 - [mode.c:46] Switching to mode resize'\n04/01/17 15:44:02 - [ipc-server.c:702] Sending mode::resize event\n04/01/17 15:44:02 - [ipc-server.c:590] Send IPC reply: { \"change\": \"resize\" }\n04/01/17 15:44:02 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:02 - [commands.c:416] Handling command 'mode \"default\"'\n04/01/17 15:44:02 - [commands.c:330] find_handler(mode) 0\n04/01/17 15:44:02 - [mode.c:46] Switching to modedefault'\n04/01/17 15:44:02 - [ipc-server.c:702] Sending mode::default event\n04/01/17 15:44:02 - [ipc-server.c:590] Send IPC reply: { \"change\": \"default\" }\n04/01/17 15:44:02 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:04 - [commands.c:416] Handling command 'splitv'\n04/01/17 15:44:04 - [commands.c:330] find_handler(splitv) 0\n04/01/17 15:44:04 - [split.c:27] changing workspace layout\n04/01/17 15:44:04 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:05 - [commands.c:416] Handling command 'splith'\n04/01/17 15:44:05 - [commands.c:330] find_handler(splith) 0\n04/01/17 15:44:05 - [split.c:27] changing workspace layout\n04/01/17 15:44:05 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:06 - [commands.c:416] Handling command 'layout tabbed'\n04/01/17 15:44:06 - [commands.c:330] find_handler(layout) 0\n04/01/17 15:44:06 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:44:06 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:44:06 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:44:06 - [layout.c:1126] Arranging 0x12c7050 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:44:06 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:06 - [commands.c:416] Handling command 'layout toggle split'\n04/01/17 15:44:06 - [commands.c:330] find_handler(layout) 0\n04/01/17 15:44:06 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:44:06 - [layout.c:986] -> Found panel for this workspace: 1366x21, position: 0\n04/01/17 15:44:06 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:44:06 - [layout.c:1126] Arranging 0x12c7050 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x12a4120)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:0x12c7050)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:DVI-I-1\n|-focus:K    |(0x12c7050)(p:0x12a4120)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1366|h: 747|x:   0|y:  21|g: -1|vis:t|children: 0|name:1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:X    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:44:06 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:06 - [commands.c:416] Handling command 'mode \"resize\"'\n04/01/17 15:44:06 - [commands.c:330] find_handler(mode) 0\n04/01/17 15:44:06 - [mode.c:46] Switching to mode resize'\n04/01/17 15:44:06 - [ipc-server.c:702] Sending mode::resize event\n04/01/17 15:44:06 - [ipc-server.c:590] Send IPC reply: { \"change\": \"resize\" }\n04/01/17 15:44:06 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:09 - [commands.c:416] Handling command 'mode \"default\"'\n04/01/17 15:44:09 - [commands.c:330] find_handler(mode) 0\n04/01/17 15:44:09 - [mode.c:46] Switching to modedefault'\n04/01/17 15:44:09 - [ipc-server.c:702] Sending mode::default event\n04/01/17 15:44:09 - [ipc-server.c:590] Send IPC reply: { \"change\": \"default\" }\n04/01/17 15:44:09 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:10 - [commands.c:416] Handling command 'exec dmenu_run'\n04/01/17 15:44:10 - [commands.c:330] find_handler(exec) 0\n04/01/17 15:44:10 - [exec_always.c:33] Executing dmenu_run\n04/01/17 15:44:10 - [exec_always.c:74] Child process created with pid 663 for workspace 1\n04/01/17 15:44:10 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:10 - [handlers.c:416] handle:7 type:1 state:0 parent:0 mask:0 (x:0 y:0 w:1366 h:17) title:(null) class:(null) appid:(null)\n04/01/17 15:44:10 - [handlers.c:490] Adding unmanaged window 0x185a1b0 to 0x12c8870\n04/01/17 15:44:10 - [handlers.c:571] geometry request for 7 1366x17 @ 0,0\n04/01/17 15:44:10 - [commands.c:416] Handling command 'exec dmenu_run'\n04/01/17 15:44:10 - [commands.c:330] find_handler(exec) 0\n04/01/17 15:44:10 - [exec_always.c:33] Executing dmenu_run\n04/01/17 15:44:10 - [exec_always.c:74] Child process created with pid 670 for workspace 1\n04/01/17 15:44:10 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:12 - [commands.c:416] Handling command 'exec dmenu_run'\n04/01/17 15:44:12 - [commands.c:330] find_handler(exec) 0\n04/01/17 15:44:12 - [exec_always.c:33] Executing dmenu_run\n04/01/17 15:44:12 - [exec_always.c:74] Child process created with pid 679 for workspace 1\n04/01/17 15:44:12 - [ipc-server.c:727] Sending binding::run event\ncannot grab keyboard\n04/01/17 15:44:12 - [commands.c:416] Handling command 'exec dmenu_run'\n04/01/17 15:44:12 - [commands.c:330] find_handler(exec) 0\n04/01/17 15:44:12 - [exec_always.c:33] Executing dmenu_run\n04/01/17 15:44:12 - [exec_always.c:74] Child process created with pid 686 for workspace 1\n04/01/17 15:44:12 - [ipc-server.c:727] Sending binding::run event\ncannot grab keyboard\ncannot grab keyboard\n04/01/17 15:44:15 - [commands.c:416] Handling command 'exec urxvt'\n04/01/17 15:44:15 - [commands.c:330] find_handler(exec) 0\n04/01/17 15:44:15 - [exec_always.c:33] Executing urxvt\n04/01/17 15:44:15 - [exec_always.c:74] Child process created with pid 699 for workspace 1\n04/01/17 15:44:15 - [ipc-server.c:727] Sending binding::run event\n/bin/sh: urxvt: command not found\n04/01/17 15:44:53 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:53 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:53 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:54 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:54 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:54 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:54 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:54 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:54 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:54 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:54 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:54 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:54 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:54 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:54 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:55 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:55 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:55 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:44:55 - [commands.c:416] Handling command 'kill'\n04/01/17 15:44:55 - [commands.c:330] find_handler(kill) 0\n04/01/17 15:44:55 - [ipc-server.c:727] Sending binding::run event\n04/01/17 15:45:00 - [main.c:49] [wlc] Terminating wlc...\n04/01/17 15:45:00 - [main.c:49] [wlc] Terminating compositor...\n04/01/17 15:45:00 - [main.c:49] [wlc] Output (1) terminated...\n04/01/17 15:45:00 - [debug_log.c:98] Setting focus to 0x1778c30:18446744073709551615 (WORKSPACE '2')\n04/01/17 15:45:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:45:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"focused\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:45:00 - [layout.c:62] Adding 0x12c7050 (2, 1366.000000x747.000000) to 0x1760f30 (1, 1920.000000x1080.000000)\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x12c7050 1 1366.000000x747.000000+0.000000,21.000000\n04/01/17 15:45:00 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:45:00 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:45:00 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1059.000000+0.000000,21.000000\n04/01/17 15:45:00 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:45:00 - [layout.c:1008] Arranging workspace '2' at 0.000000, 21.000000\n04/01/17 15:45:00 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x1760f30)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x12a4120)(p:0x649080)(f:(nil)   )(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 0|name:DVI-I-1\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 2|name:HDMI-A-1\n|-focus:X    |(0x12c7050)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:f|children: 0|name:1\n|-focus:K    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:45:00 - [container.c:448] OUTPUT: Destroying output '1'\n04/01/17 15:45:00 - [workspace.c:314] Switching to workspace 0x1778c30:2\n04/01/17 15:45:00 - [debug_log.c:98] Setting focus to 0x1778c30:18446744073709551615 (WORKSPACE '2')\n04/01/17 15:45:00 - [ipc-server.c:653] Sending workspace::focus event\n04/01/17 15:45:00 - [ipc-server.c:590] Send IPC reply: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 4, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 21, \"width\": 1920, \"height\": 1059 }, \"visible\": true, \"focused\": true, \"num\": 2, \"output\": \"HDMI-A-1\", \"urgent\": false, \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ] } }\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x1760f30 (OUTPUT 'HDMI-A-1')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x1760f30 HDMI-A-1 1920.000000x1080.000000+1366.000000,0.000000\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x12c7050 (WORKSPACE '1')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x12c7050 1 1920.000000x1059.000000+0.000000,21.000000\n04/01/17 15:45:00 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:45:00 - [layout.c:1008] Arranging workspace '1' at 0.000000, 21.000000\n04/01/17 15:45:00 - [layout.c:1126] Arranging 0x12c7050 horizontally\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x1778c30 (WORKSPACE '2')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x1778c30 2 1920.000000x1059.000000+0.000000,21.000000\n04/01/17 15:45:00 - [layout.c:986] -> Found panel for this workspace: 1920x21, position: 0\n04/01/17 15:45:00 - [layout.c:1008] Arranging workspace '2' at 0.000000, 21.000000\n04/01/17 15:45:00 - [layout.c:1126] Arranging 0x1778c30 horizontally\nfocus:R      |(0x649080)(p:(nil)   )(f:0x1760f30)(h:18446744073709551615)Type:root|layout:-    |w:3286|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1760f30)(p:0x649080)(f:0x1778c30)(h: 2)Type:op  |layout:-    |w:1920|h:1080|x:1366|y:   0|g: -1|vis:t|children: 2|name:HDMI-A-1\n|-focus:X    |(0x12c7050)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:f|children: 0|name:1\n|-focus:K    |(0x1778c30)(p:0x1760f30)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1059|x:   0|y:  21|g: -1|vis:t|children: 0|name:2\n04/01/17 15:45:00 - [main.c:49] [wlc] Released drm surface (0x12d0958)\n04/01/17 15:45:00 - [main.c:49] [wlc] Removed bsurface from output (1)\n04/01/17 15:45:00 - [main.c:49] [wlc] Removed output (1)\n04/01/17 15:45:00 - [main.c:49] [wlc] Output (2) terminated...\n04/01/17 15:45:00 - [container.c:448] OUTPUT: Destroying output '2'\n04/01/17 15:45:00 - [main.c:49] [wlc] Released drm surface (0x12d0d38)\n04/01/17 15:45:00 - [main.c:49] [wlc] Removed bsurface from output (2)\n04/01/17 15:45:00 - [main.c:49] [wlc] Removed output (2)\n04/01/17 15:45:00 - [main.c:49] [wlc] Compositor terminated...\n04/01/17 15:45:00 - [main.c:49] [wlc] Cleanup wlc\n04/01/17 15:45:00 - [main.c:49] [wlc] Closing Xwayland\n04/01/17 15:45:00 - [handlers.c:508] Destroying window 7\nXIO:  fatal IO error 11 (Resource temporarily unavailable) on X server \":0\"\n      after 3332 requests (3331 known processed) with 0 events remaining.\n04/01/17 15:45:00 - [main.c:49] [wlc] Closed drm\n04/01/17 15:45:00 - [handlers.c:508] Destroying window 3\n04/01/17 15:45:00 - [handlers.c:508] Destroying window 4\n04/01/17 15:45:00 - [handlers.c:508] Destroying window 5\n04/01/17 15:45:00 - [handlers.c:508] Destroying window 6\n04/01/17 15:45:00 - [extensions.c:49] Panel surface killed\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x649080 root 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x649080)(p:(nil)   )(f:(nil)   )(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:root\n04/01/17 15:45:00 - [extensions.c:37] Background surface killed\n04/01/17 15:45:00 - [extensions.c:49] Panel surface killed\n04/01/17 15:45:00 - [debug_log.c:98] Arranging layout for 0x649080 (ROOT 'root')\n04/01/17 15:45:00 - [layout.c:946] Arranging layout for 0x649080 root 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x649080)(p:(nil)   )(f:(nil)   )(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:root\n04/01/17 15:45:00 - [extensions.c:37] Background surface killed\n04/01/17 15:45:00 - [main.c:49] [wlc] Restoring vt 1 (0x3) (fd 0)\n04/01/17 15:45:00 - [main.c:49] [wlc] Parent exit (613)\n04/01/17 15:45:00 - [main.c:49] [wlc] Restoring vt 1 (0x3) (fd 0)\n. and some parts at the beginning may be duplicated or missing in the very long log - i fixed the application launcher by installing dmenu and i think that may be the issue - a lot of the software used by sway is either not installed or not installed properly which i did not realize. I will install and configure a graphical terminal emulator to make sure that works not explain why the commands to quit and such were not working.. Sorry for the late response - Yep, I did not install swaylock. Didn't realize I needed a use flag for it to be installed when i installed sway. Adding dev-libs/sway swaylock to /etc/portage/package.use and running sudo emerge --ask sway fixed it. Thank you.. ",
    "sandler31": "Move command. Ok, I'll try that and update, it'll be in some days, I'm not with that laptop currently.\nThanks for the prompt reply!. ",
    "Sandmonster": "\nDisplay managers are generally unsupported\n\nOK, I'll keep this issue opened till I figure out what's the problem and how to make it work.. Well, that was confusing, in my mind I was absolutely sure that I use SDDM and I was trying to find solution where it couldn't be, then I started exploring log files and there were no logs of sddm, but I noticed lightdm folder and after some time I suddenly realized that I use LightDM. So, now it explains everything LightDM can't start wayland sessions and that's was the problem. Sorry for opening this meaningless issue.. ",
    "nharward-hd": "+1, having the same issue - works fine in X but not when using sway. When switching back to the default US layout my | turns into \u042d and while lowercase letters are US, all upper case letters are in Russian. If I switch to the [phonetic] Russian variant then upper case is US and lower case is Russian. Very odd.\nXKB_DEFAULT_MODEL=kinesis\nXKB_DEFAULT_LAYOUT=us,us\nXKB_DEFAULT_VARIANT=,rus\nXKB_DEFAULT_OPTIONS=grp:shifts_toggle,grp_led:scroll,compose:menu,caps:ctrl_modifier\nAlso on Arch:\nLinux yogi 4.11.9-1-ARCH #1 SMP PREEMPT Wed Jul 5 18:23:08 CEST 2017 x86_64 GNU/Linux. way-cooler worked correctly using environment variables picked up from the shell. weston worked with the following configuration in $HOME/.config/weston.ini:\n[keyboard]\nkeymap_layout=us,us\nkeymap_variant=,rus\nkeymap_options=grp:toggle,grp:shifts_toggle,grp_led:scroll,compose:menu,caps:ctrl_modifier\nFor some reason in weston I couldn't toggle variants with only grp:shifts_toggle specified. I had to add grp:toggle and then pressing both shift keys worked as well as right-Alt.. ",
    "veox": "To describe the issue in a more generic manner, when having several layouts in XKB_DEFAULT_LAYOUT:\n\npressing LShift+<key> will produce a <keysym> from the previous layout;\npressing RShift+<key> will produce a <keysym> from the next layout.\n\nAs can be seen from this gist with a xev snippet, pressing the {L,R}Shift keys sends ISO_{Prev,Next}_Group keysyms, whereas releasing them sends Shift_{L,R} respectively.\n\nEDIT:\n(Note I also have NumLock on, which shows in state as the second bit being set to 1.)\nIn other words, the Shift modifier is already propagated into the particular event's state when the event (both KeyPress and KeyRelease) is considered.\nSo, for example, pressing the LShift key registers the Shift modifier in state (as the first bit being set to 1), and then considers the keycode: it looks like a Shift has been pressed (but not released!) while a Shift is pressed.\nWhen the key is later released, the fact is first registered in state (i.e. the modifier is removed), and then then keycode is considered: a Shift has been released while a Shift is not pressed.\n\nI've also checked with xorg-server and awesome via startx, there the behaviour is reversed. That is, when a KeyPress event is considered, the key's effects are not yet propagated into state. They are for KeyRelease, though.\nI'm not yet sure which one would be \"correct\". :/\n\nPackage versions (using Arch Linux):\nsway 0.14.0\nwlc 0.0.10\nxkeyboard-config 2.21 (EDIT2: 2.22 has just become available)\nlibinput 1.8.3\nlibxkbcommon 0.7.2\n(any others?). Removing grp:shifts_toggle from XKB_DEFAULT_LAYOUT makes pressing the Shift keys behave as intended (when inspected with xev).\nThat is, they no longer generate ISO_{Prev,Next}_Group keysyms on a KeyPress event. Instead, they generate the expected Shift_{L,R} keysyms.. Dug up the issue having been mentioned in this bug report from 2006 in Freedesktop's xkeyboard-config. A solution might be possible by fiddling with XKB rulesets.\nAlthough the issue ~~seems to come~~ might be coming from somewhere upstream, I'd say keep this open to avoid dupes.. Edited comments above with more findings.\n\nAlso tested with way-cooler v0.6.2. Contrary to what @nharward-hd wrote, I've experienced the same unexpected behaviour as described above for sway.\n(Ping @Timidger?..). I used rootston from wlroots repo to try it. The issue can be reproduced there, too.\nImportant detail: all of the above is observed in XWayland programs (tried in urxvt and xev; and firefox a few times).\nI'm sure I used to see the same in weston-terminal just a few days ago, but can't reproduce it anymore. :/ It may be that I'm delusional, or that a recent (2017-10-07) system update changed something.\n\nIn rootston, both urxvt and weston-terminal were tested in the same session (i.e. rootston.ini has xwayland=true), with layout details provided via envvars XKB_DEFAULT_{LAYOUT,OPTIONS} (i.e. like in this bug report).. ",
    "nharward": "I think since my original comment (as @nharward-hd) other commenters have pointed out a key issue I failed to notice: it does seem to be only an issue in X programs. termite in sway works perfectly fine while Firefox right next to it does not. My suspicion is that I was using a mix of X and native wayland terminals when trying other window managers - my apologies.\nI'll try fiddling with different options after reading the very helpful comments from @veox.. I left sway/wayland to go back to X (unrelated reason), so I haven't :(. ",
    "Vintodrimmer": "Good day,\nHave you found a persistent solution that allows one to use shifts_toggle?. Thank you! That solved the issue completely!\nMay I ask another question? If I try to go to TTY from sway, no matter which one I chose (1,2,3,4,...) I get back to the first and am unable to do anything. What can be causing this?. Are you sure? I've just checked and it works with bspwm and X11. That's why I thought there is something wrong with my Sway setup again.\nAnyway, that's not that important. Thanks for the extremely fast help!. That makes sense. Thanks.. ",
    "tjavdar": "My solution (seems to work fine >= 6 months or so):\nXKB_DEFAULT_LAYOUT=se,ru\n  XKB_DEFAULT_VARIANT=,phonetic\n  XKB_DEFAULT_OPTIONS=ctrl:nocaps,grp:alt_shift_toggle,grp_led:caps\nKeypad (with num_lock on) does not, though.\nTjavdar Ivanov\n+46 (0) 739-10 16 06 (mobile)\n+46 (0)   36-10 16 23 (off)\nOn Mon, Mar 26, 2018 at 2:35 AM, NDH notifications@github.com wrote:\n\nI left sway/wayland to go back to X (unrelated reason), so I haven't :(\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/1161#issuecomment-376016889, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AJsWctX4gCnbPyKCiNewMpj8kSkF0asSks5tiDflgaJpZM4M38iF\n.\n. \n",
    "valryne": "I just tried to find a workaround for this problem (sway is working fine while I cannot access the second layer (capital letters) under Xwayland) using the german layout (de) and its neo variant on my system running current Arch and sway(1\u03b1 from AUR \u2013 I updated today, but the problem and my solution attempts were the same under 0.15).\nWith my layout/variant combination, the solution was using setxkbmap and actually adding the option: grp:shift_toggle (grp:alt_shift_toggle worked as well).    \n$ setxkbmap -layout de -variant neo -option grp:shift_toggle\n\nBut so far, I don't have a way to preserve settings across boots, except wrapper-scripts for the applications that call setxkbmap before calling the application itself.     \nAfter a lot of trial and error, switching back-and-forth between sway and i3 and trying multiple X-applications, I think the problem may be that Xwayland ignores some X-configs.   \n\u2192 If that is the case, then sway/wlroots may not be able to fix this issue. \nWhat did not work: \n- using localectl set-x11-keymap \n- modifying /etc/X11/xorg.conf.d/00-keyboard.conf by hand (usually set by localectl)                                                                                \n- adding a setxkbmap line to:                                                    \n        - ~/.xinit \n        - /etc/profile \n        - ~/.zprofile (my main shell is zsh and .zprofile also holds the commands to automatically start sway, if I log into tty1)                                    \n        - ~/.zshrc \n- define the global variable XKB_DEFAULT_OPTIONS in:    (@tjavdar how/where did you do that?)                         \n        - ~/.xinit \n        - /etc/profile \n        - ~/.zprofile \n        - ~/.zshrc \n        - or even ~/.pam_environment \nWhat worked: \n- running setxkbmap in a terminal before running X-applications                  \n- defining an alias for the setxkbmap-call in ~/.zshrc and run that prior to using the first X-application                                                          \n- when only using very few X-applications:                                         \n        - defining an alias for the X-application in ~/.zshrc that includes the call to setxkbmap (dmenu and probably other launchers cannot see this)   \n        - write a script that has a similar name to the original application-name and runs the setxkbmap command prior to calling the application (if the script is made executable and available in the $PATH, dmenu can see it)                          \nWhat is strange: \nWhen I use a wrapper-script or an alias for an X-application, the settings only apply to the so started instance of this application, whereas running the setxkbmap-command separately (typed by hand or via alias) has a permanent and application-independent effect. \nNot to mention that adding it to ~/.zshrc or ~/.zprofile should work like typing it into a terminal lateron \u2013 for ~/.zprofile it is probably because Xwayland is not yet initialized at this point, but the commands in ~/.zshrc must have been run already when I simply start a terminal, no\u203d\nI hope this can be of help for others trying to solve this problem.\nIf someone finds that solution-attempts I listed (don't) work for them, please say so \u2013 I may have made some stupid mistakes.\n\nEdit:\nFor sway 1.0\u03b1  #1735 @SirCmpwn mentioned that XKB options may now be specified in the sway-config.\nCould this solve this issue? \u2013 If so, how to properly set this in the config? (I looked through man 5 sway, but it might not be in there yet.). ",
    "DonOregano": "For reference, this is the wlc issue: https://github.com/Cloudef/wlc/issues/251. ",
    "chronokitsune3233": "@DmitryHetman When built with GTK+ 3.x libraries, yes. Otherwise, no. The Arch package lxterminal-gtk3 provides such a build.\nHowever, you question did prompt me to try the same thing with Wayland Terminal (weston-terminal). It did not switch to workspace 1 the second time as it does with LXTerminal.\ngtk3-demo-application, Chromium, ROXTerm, LXTerminal, and Xfce Terminal all use the GTK+ 3.0 libs and exhibit the same problem. Strangely, the Sakura terminal emulator, the Termite terminal emulator, and gtk3-demo do not suffer from the issue.. It would seem that when an application manages its own windows, including when you start a new process, there is a switch to the new window. As an example, when I execute pidof roxterm from one of the terminals, there is only one PID. Contrast that with the two PIDs output by pidof sakura.\ni3 somehow prevents this switch to the new window from happening when it's not on the active workspace, perhaps by ignoring some sort of event or notification, or maybe it's a difference in the way workspaces are coded in Sway vs. i3?. ",
    "calvinkosmatka": "Thanks!\n\nSimply making the panel transparent isn't going to cut it once you start placing it on top of other windows, because it will still receive mouse events. You need to have sway make it disappear in the compositor\n\nHadn't even thought of that. In i3, I have a gap around the edge and the bar stays within that, so that didn't occur to me as a problem.\nWould it be possible/easier to implement the bar as a floating window that moves across workspaces rather than writing a wayland extension?. > No,I don't think so.\nAlright - time for me to start learning about wayland extensions then.. @SirCmpwn Probably best not to count on having this in 0.13. Schedule is fairly busy now, but I'll see what I can do. I'll push some updates tonight.. Thanks - meant to take that out. No - in display_mode \"hide\" when the modifier is held down, hidden_state changes to \"show\", so the first clause will evaluate to false, while the second evaluates to true.\nWe could (and potentially should) make it so that we only need the second clause. I added the first because I think hidden_state defaults to \"hide\" but we want the bar to show anyway as long as the display_mode isn't \"hide\". Sounds good.. It looked like binding modes are passed directly to the bar, so this never gets changed. If instead we wanted to pass entire bar configs to the bar, we would need to handle that bar's binding modes on the sway side, so this would be necessary. In theory this would have the advantage of keeping sway up to date about the bar's state without requiring swaybar to send its state over ipc.. Oh yeah, no worries. Good reason to make those into enums.. i3bar has this as a config option. Looks like it's used for an initial default state (i.e. to show bar on startup before modifier has been pressed/released) and possibly as target for bindsyms. Honestly, I had just updated the name from what was there previously, but it looks like it should stay.. @JerziKaminsky I had considered doing it that way specifically for the reason that I commented - if the user wants to toggle the display mode between \"hide\" and \"dock\" the bar will need to be able to get modifier events even if it started as a \"dock\" bar. I'll go ahead and do that. Not entirely sure what governs which modifiers get sent when. In any case, subscribe and ignore will work for now.. Ok. Display mode toggling isn't even in play right now anyway. Thinking ahead, the best way to implement that would be to subscribe bars to barconfig updates and send that ipc event from the sway side (as opposed to subscribing bars to bindings) right?. Sorry, I just mean for display mode toggling. In i3 toggling between \"dock\" and \"hide\" is bindable, so the bar needs to respond to that binding. So what you're saying is this should be done by subscribing the bar to binding events?. Wait, ok I see code in commands/bar/mode.c for handling bar display mode commands that sends an ipc barconfig event but the event never makes it to the socket because there's no security mapping there. I guess the question is whether to make bars subscribed to barconfig or bindings as a whole to do display mode switching.. Right. And the bar needs to be subscribed to an event that will allow the display mode change to take place in the first place (i.e. a barconfig update event). ",
    "mwhipple": "I'm suffering the same issue. The backtrace is pretty much the same except line 7 is wlc_run. I'll try to dig into it (any pointers would be appreciated).. I just upgraded my wayland to master and now I'm getting a different backtrace, will continue digging:\n```\n0  0x00007f8463654f99 in wl_resource_post_event (resource=0x0,\nopcode=0) at src/wayland-server.c:246\n\n246             wl_argument_from_va_list(object->interface->events[opcode\n].signature,\n(gdb) bt\n0  0x00007f8463654f99 in wl_resource_post_event (resource=0x0,\nopcode=0) at src/wayland-server.c:246\n\n1  0x00007f845f091f30 in ffi_call_unix64 () from /usr/lib64/libffi.so.6\n2  0x00007f845f09199b in ffi_call () from /usr/lib64/libffi.so.6\n3  0x00007f84636599ce in wl_closure_invoke (closure=,\nflags=<optimized out>, target=0x17634c0, opcode=0, data=0x177d010)\nat src/connection.c:935\n\n4  0x00007f84636562b7 in wl_client_connection_data (\nfd=<optimized out>, mask=<optimized out>, data=0x177d010)\nat src/wayland-server.c:406\n\n5  0x00007f8463657c22 in wl_event_loop_dispatch (loop=0x91b420,\ntimeout=timeout@entry=-1) at src/event-loop.c:423\n\n6  0x00007f8463656455 in wl_display_run (display=0x91af60)\nat src/wayland-server.c:1245\n\n7  0x00007f8463f45cec in wlc_run ()\nat /home/mwhipple/src/wlc/src/wlc.c:260\n\n8  0x000000000043581c in main (argc=1, argv=0x7fff0dcc1148)\nat /home/mwhipple/src/sway/sway/main.c:423\n\n``\nI'll try flipping onWAYLAND_DEBUG` next...which didn't end up being too useful for me. I think wiring in a protocol logger may help circle around on the issue the long way.. Cool...when it happens to me again I'll try to nail down some some more concrete parameters for reproducing the issue and then try using the updated wlc.. ",
    "karroffel": "will give it a check! \ud83d\ude4f . ",
    "captnfab": "I tried the package. It installs correctly on debian stretch.\nI ran the programme inside an Xorg server, and it worked. Can't tell more.\nI also checked the debian package sources, it looks clean and reasonable :). I ran it into a tty. It works well. I have keyboard handling problems, but I assume it has nothing to do with the Debian package.. Ok. But first, I must say it's the first time I try sway and about the first time I try a wayland compositor.\nMy X keyboard setting is fr, variant bepo. It failed to recognize that. I changed it with the setxkbmap command, which I was a bit surprised to see working out of x. Some keys weren't functionnal, like & which was mixed up with up_arrow or something alike.\nAnother problem, probably unrelated to keyboard, I encountered after further testing was that firefox's menus were unstable or not shown at all. I was unable to enable scripts on a webpag using the \"noscript\" icon in the toolbar, no menu appeared.\nSorry if some of my remarks are irrelevant, I'm quite new to this project and just decided to give it a try since I'm an i3 user and found .deb package for sway today.... ",
    "cawilliamson": "@snoack Hey there - any estimate on when 0.15 will be added to your apt repo? \ud83d\udc4d . Whilst I do understand this isn't released - it is possible to compile it and there wouldn't be any harm in updating the README in the \"wlroots\" branch of this repo since it wouldn't be merged until that was merged to master anyway.\nI'll get around to writing a PR with updated build instructions - it really was a pain in the arse when I did build it.. @emersion Good question - checked the output log and it looks like I was actually running under xwayland. Oops! Any suggestion on how to switch to xwayland as the backend with wlroots+sway? I know you could disable it previously with WLC_XWAYLAND=0 but not sure what the equivalent is in wlroots.. Ah - in a tty yes.. Oh good - not just me missing something in the docs then! :+1: . I bodged together a quick patch to force the correct path for now:\n```\n--- a/sway/main.c\n+++ b/sway/main.c\n@@ -280,11 +280,9 @@\n    // Security:\n    unsetenv(\"LD_PRELOAD\");\n\n-#ifdef _LD_LIBRARY_PATH\n-       setenv(\"LD_LIBRARY_PATH\", _LD_LIBRARY_PATH, 1);\n-#else\n-       unsetenv(\"LD_LIBRARY_PATH\");\n-#endif\n+\n+        // NixOS:\n+        setenv(\"LD_LIBRARY_PATH\", \"/run/opengl-driver/lib:/run/opengl-driver-32/lib\", 1);\n    int c;\n    while (1) {\n\n```\nI'll have a look in to this more thoroughly shortly and see if I can submit a PR with the needed change to support this properly as a meson arg - just wanted a quick 'N dirty workaround for now.. ",
    "sainoba": "@snoack Hey there - any estimate on when 0.15.1 will be added to your apt repo? :+1: . ",
    "JakeBrawer": "@snoack Hey there - any estimate on when 0.15.2 will be added to your apt repo? :+1: . @snoack Any updates?. ",
    "luksak": "@snoack It would be nice to have 1.0-beta.1. Could you update your PPA?. ",
    "betkuriamtikslui": "@snoack any plans for 1.0-beta.1?. ",
    "Sunderland93": "I also create experimental PPA with latest versions of wlroots and Sway. For now only for Ubuntu 19.04 https://launchpad.net/~samoilov-lex/+archive/ubuntu/sway. I also create experimental PPA with latest versions of wlroots and Sway. For now only for Ubuntu 19.04 https://launchpad.net/~samoilov-lex/+archive/ubuntu/sway. Done. Done. @thuandt Bionic has very old libraries, needed for building Sway. It's possible, but I dont have a time for it now. I'll take a look of it closer on weekend.. @SirCmpwn this protocol is being proposed to wayland-protocols?. @SirCmpwn this protocol is being proposed to wayland-protocols?. Is wl_shell usefull on non-desktop systems?. Is wl_shell usefull on non-desktop systems?. ",
    "hinshun": "Looks like this is the issue?\nsway: error while loading shared libraries: libwlc.so.0: cannot open shared object file: No such file or directory\n04/28/17 15:58:11 - [ipc-client.c:37] Unable to connect to \n04/28/17 15:58:11 - [main.c:49] [wlc] EGL is not or could not be initialized\n04/28/17 15:58:11 - [main.c:49] [wlc] Could not initialize any context. Yes I'm using sway right now, let me try to get a clean set of logs.. Sorry for the trouble. How do I capture the logs for sway? It takes over my tty so I'm looking into ttylog but was wondering if you had a method.. ```\n04/28/17 16:15:59 - [main.c:185] Linux triforce 4.10.11-1-ARCH #1 SMP PREEMPT Tue Apr 18 08:39:42 CEST 2017 x86_64 GNU/Linux\n04/28/17 16:15:59 - [main.c:157] Contents of /etc/os-release:\n04/28/17 16:15:59 - [main.c:164] NAME=\"Arch Linux\"\n04/28/17 16:15:59 - [main.c:164] PRETTY_NAME=\"Arch Linux\"\n04/28/17 16:15:59 - [main.c:164] ID=arch\n04/28/17 16:15:59 - [main.c:164] ID_LIKE=archlinux\n04/28/17 16:15:59 - [main.c:164] ANSI_COLOR=\"0;36\"\n04/28/17 16:15:59 - [main.c:164] HOME_URL=\"https://www.archlinux.org/\"\n04/28/17 16:15:59 - [main.c:164] SUPPORT_URL=\"https://bbs.archlinux.org/\"\n04/28/17 16:15:59 - [main.c:164] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\n04/28/17 16:15:59 - [main.c:142] PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/edgar/.vim/plugged/fzf/bin\n04/28/17 16:15:59 - [main.c:142] LD_LOAD_PATH=(null)\n04/28/17 16:15:59 - [main.c:142] LD_PRELOAD_PATH=(null)\n04/28/17 16:15:59 - [main.c:142] LD_LIBRARY_PATH=(null)\n04/28/17 16:15:59 - [main.c:142] SWAY_CURSOR_THEME=(null)\n04/28/17 16:15:59 - [main.c:142] SWAY_CURSOR_SIZE=(null)\n04/28/17 16:15:59 - [main.c:142] SWAYSOCK=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_DRM_DEVICE=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_SHM=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_OUTPUTS=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_XWAYLAND=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_LIBINPUT=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_REPEAT_DELAY=(null)\n04/28/17 16:15:59 - [main.c:142] WLC_REPEAT_RATE=(null)\n04/28/17 16:15:59 - [main.c:142] XKB_DEFAULT_RULES=(null)\n04/28/17 16:15:59 - [main.c:142] XKB_DEFAULT_MODEL=(null)\n04/28/17 16:15:59 - [main.c:142] XKB_DEFAULT_LAYOUT=(null)\n04/28/17 16:15:59 - [main.c:142] XKB_DEFAULT_VARIANT=(null)\n04/28/17 16:15:59 - [main.c:142] XKB_DEFAULT_OPTIONS=(null)\n\u001b[1;31mWarning: Proprietary nvidia driver support is considered experimental. Nouveau is strongly recommended.\u001b[0m\n04/28/17 16:15:59 - [main.c:51] [wlc] logind: session control granted\n04/28/17 16:15:59 - [main.c:51] [wlc] Running on vt 1 (fd 0)\n04/28/17 16:15:59 - [main.c:49] [wlc] Failed to open X11 display\n04/28/17 16:15:59 - [main.c:377] Starting sway version 0.13-rc1-14-g11b4c34 (2017-04-28, branch \"master\")\n04/28/17 16:15:59 - [config.c:444] Set XDG_CONFIG_HOME to /home/edgar/.config\n04/28/17 16:15:59 - [config.c:469] Loading config from /etc/sway/security.d/00-defaults\n04/28/17 16:15:59 - [commands.c:510] handling config command 'permit * fullscreen keyboard mouse'\n04/28/17 16:15:59 - [commands.c:339] find_handler(permit) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target ''\n04/28/17 16:15:59 - [permit.c:72] Permissions granted to * for features 112\n04/28/17 16:15:59 - [commands.c:510] handling config command 'permit /usr/local/bin/swaylock lock'\n04/28/17 16:15:59 - [commands.c:339] find_handler(permit) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\n04/28/17 16:15:59 - [permit.c:72] Permissions granted to /usr/local/bin/swaylock for features 113\n04/28/17 16:15:59 - [commands.c:510] handling config command 'permit /usr/local/bin/swaybg background'\n04/28/17 16:15:59 - [commands.c:339] find_handler(permit) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaybg'\n04/28/17 16:15:59 - [permit.c:72] Permissions granted to /usr/local/bin/swaybg for features 116\n04/28/17 16:15:59 - [commands.c:510] handling config command 'permit /usr/local/bin/swaygrab screenshot'\n04/28/17 16:15:59 - [commands.c:339] find_handler(permit) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\n04/28/17 16:15:59 - [permit.c:72] Permissions granted to /usr/local/bin/swaygrab for features 120\n04/28/17 16:15:59 - [commands.c:510] handling config command 'permit /usr/local/bin/swaybar panel'\n04/28/17 16:15:59 - [commands.c:339] find_handler(permit) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\n04/28/17 16:15:59 - [permit.c:72] Permissions granted to /usr/local/bin/swaybar for features 114\n04/28/17 16:15:59 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaymsg {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(ipc) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaymsg'\n04/28/17 16:15:59 - [commands.c:510] handling config command ' enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler() 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC * feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'events {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(events) 0\n04/28/17 16:15:59 - [commands.c:510] handling config command ' disabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler() 0\n04/28/17 16:15:59 - [ipc.c:157] Disabled IPC * event\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:813] End of IPC events block\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:808] End of IPC block\n04/28/17 16:15:59 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaybar {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(ipc) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bar-config enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bar-config) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC bar-config feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(outputs) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'workspaces enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(workspaces) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC workspaces feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'command enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(command) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC command feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'events {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(events) 0\n04/28/17 16:15:59 - [commands.c:510] handling config command 'workspace enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(workspace) 0\n04/28/17 16:15:59 - [ipc.c:154] Enabled IPC workspace event\n04/28/17 16:15:59 - [commands.c:510] handling config command 'mode enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(mode) 0\n04/28/17 16:15:59 - [ipc.c:154] Enabled IPC mode event\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:813] End of IPC events block\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:808] End of IPC block\n04/28/17 16:15:59 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaygrab {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(ipc) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\n04/28/17 16:15:59 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(outputs) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 16:15:59 - [commands.c:510] handling config command 'tree enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(tree) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC tree feature\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:808] End of IPC block\n04/28/17 16:15:59 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaylock {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(ipc) 0\n04/28/17 16:15:59 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\n04/28/17 16:15:59 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 16:15:59 - [commands.c:339] find_handler(outputs) 0\n04/28/17 16:15:59 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:808] End of IPC block\n04/28/17 16:15:59 - [commands.c:510] handling config command 'commands {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(commands) 0\n04/28/17 16:15:59 - [commands.c:339] find_handler() 0\n04/28/17 16:15:59 - [commands.c:614] Set command policy for * to -1\n04/28/17 16:15:59 - [commands.c:339] find_handler(fullscreen) 0\n04/28/17 16:15:59 - [commands.c:614] Set command policy for fullscreen to 10\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [commands.c:614] Set command policy for bindsym to 1\n04/28/17 16:15:59 - [commands.c:339] find_handler(exit) 0\n04/28/17 16:15:59 - [commands.c:614] Set command policy for exit to 2\n04/28/17 16:15:59 - [commands.c:339] find_handler(kill) 0\n04/28/17 16:15:59 - [commands.c:614] Set command policy for kill to 2\n04/28/17 16:15:59 - [config.c:803] End of commands block\n04/28/17 16:15:59 - [config.c:469] Loading config from /home/edgar/.config/sway/config\n04/28/17 16:15:59 - [commands.c:510] handling config command 'set $mod Mod4'\n04/28/17 16:15:59 - [commands.c:339] find_handler(set) 0\n04/28/17 16:15:59 - [commands.c:510] handling config command 'font pango:Droid Sans Mono for Powerline 12'\n04/28/17 16:15:59 - [commands.c:339] find_handler(font) 0\n04/28/17 16:15:59 - [font.c:25] Settings font Droid Sans Mono for Powerline 12\n04/28/17 16:15:59 - [commands.c:510] handling config command 'floating_modifier $mod'\n04/28/17 16:15:59 - [commands.c:339] find_handler(floating_modifier) 0\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Return exec urxvt'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Return to command exec urxvt\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+q kill'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+q to command kill\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+d exec dmenu -show run'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+d to command exec dmenu -show run\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+h focus left'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+h to command focus left\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+j focus down'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+j to command focus down\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+k focus up'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+k to command focus up\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+l focus right'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+l to command focus right\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+h move left'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+h to command move left\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+j move down'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+j to command move down\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+k move up'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+k to command move up\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+l move right'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+l to command move right\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+mod1+h move workspace to output left'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+mod1+h to command move workspace to output left\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+mod1+l move workspace to output right'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+mod1+l to command move workspace to output right\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+semicolon split h'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+semicolon to command split h\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+v split v'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+v to command split v\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+f fullscreen'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+f to command fullscreen\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+s layout stacking'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+s to command layout stacking\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+w layout tabbed'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+w to command layout tabbed\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+e layout toggle split'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+e to command layout toggle split\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+space floating toggle'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+space to command floating toggle\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+space focus mode_toggle'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+space to command focus mode_toggle\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+a focus parent'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+a to command focus parent\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+1 workspace 1'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+1 to command workspace 1\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+2 workspace 2'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+2 to command workspace 2\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+3 workspace 3'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+3 to command workspace 3\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+4 workspace 4'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+4 to command workspace 4\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+5 workspace 5'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+5 to command workspace 5\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+6 workspace 6'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+6 to command workspace 6\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+7 workspace 7'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+7 to command workspace 7\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+8 workspace 8'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+8 to command workspace 8\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+9 workspace 9'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+9 to command workspace 9\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+0 workspace 10'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+0 to command workspace 10\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+1 move container to workspace 1'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+1 to command move container to workspace 1\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+2 move container to workspace 2'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+2 to command move container to workspace 2\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+3 move container to workspace 3'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+3 to command move container to workspace 3\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+4 move container to workspace 4'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+4 to command move container to workspace 4\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+5 move container to workspace 5'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+5 to command move container to workspace 5\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+6 move container to workspace 6'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+6 to command move container to workspace 6\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+7 move container to workspace 7'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+7 to command move container to workspace 7\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+8 move container to workspace 8'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+8 to command move container to workspace 8\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+9 move container to workspace 9'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+9 to command move container to workspace 9\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+0 move container to workspace 10'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+0 to command move container to workspace 10\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+c reload'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+c to command reload\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+Shift+r restart'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+Shift+r to command restart\n04/28/17 16:15:59 - [commands.c:510] handling config command 'mode \"resize\" {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(mode) 0\n04/28/17 16:15:59 - [mode.c:48] Switching to mode resize'\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym h resize shrink width 10 px or 10 ppt'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound h to command resize shrink width 10 px or 10 ppt\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym j resize grow height 10 px or 10 ppt'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound j to command resize grow height 10 px or 10 ppt\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym k resize shrink height 10 px or 10 ppt'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound k to command resize shrink height 10 px or 10 ppt\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym l resize grow width 10 px or 10 ppt'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound l to command resize grow width 10 px or 10 ppt\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym Return mode \"default\"'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Return to command mode \"default\"\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym Escape mode \"default\"'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Escape to command mode \"default\"\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:780] End of mode block\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+r mode \"resize\"'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+r to command mode \"resize\"\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym $mod+shift+x exec swaylock'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound Mod4+shift+x to command exec swaylock\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +10% && killall -SIGUSR1 i3status'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound XF86AudioRaiseVolume to command exec --no-startup-id pactl set-sink-volume 0 +10% && killall -SIGUSR1 i3status\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -10% && killall -SIGUSR1 i3status'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound XF86AudioLowerVolume to command exec --no-startup-id pactl set-sink-volume 0 -10% && killall -SIGUSR1 i3status\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle && killall -SIGUSR1 i3status'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 16:15:59 - [bind.c:85] bindsym - Bound XF86AudioMute to command exec --no-startup-id pactl set-sink-mute 0 toggle && killall -SIGUSR1 i3status\n04/28/17 16:15:59 - [commands.c:510] handling config command 'default_border pixel 1'\n04/28/17 16:15:59 - [commands.c:339] find_handler(default_border) 0\n04/28/17 16:15:59 - [commands.c:510] handling config command 'bar {'\n04/28/17 16:15:59 - [commands.c:339] find_handler(bar) 0\n04/28/17 16:15:59 - [bar.c:57] Configuring bar bar-0\n04/28/17 16:15:59 - [commands.c:510] handling config command 'position top'\n04/28/17 16:15:59 - [commands.c:339] find_handler(position) 0\n04/28/17 16:15:59 - [position.c:31] Setting bar position 'top' for bar: bar-0\n04/28/17 16:15:59 - [commands.c:510] handling config command '}'\n04/28/17 16:15:59 - [config.c:792] End of bar block\n04/28/17 16:15:59 - [main.c:204] !! DANGER !! Sway does not have CAP_SYS_PTRACE and cannot enforce security rules for processes running as other users.\n04/28/17 16:15:59 - [main.c:51] [wlc] libinput: resume\n04/28/17 16:15:59 - [main.c:51] [wlc] Activating tty\n04/28/17 16:15:59 - [main.c:51] [wlc] MODE: (0) 1920x1080@60000 *\n04/28/17 16:15:59 - [main.c:49] [wlc] Connector 1 is not connected or has no modes\n04/28/17 16:15:59 - [main.c:49] [wlc] Connector 2 is not connected or has no modes\n04/28/17 16:15:59 - [main.c:49] [wlc] Connector 3 is not connected or has no modes\n04/28/17 16:15:59 - [main.c:49] [wlc] Connector 4 is not connected or has no modes\n04/28/17 16:15:59 - [main.c:51] [wlc] eDP-1 Chose mode (0) 1920x1080\n04/28/17 16:15:59 - [handlers.c:221] Output 1 resolution changed to 1920 x 1080\n04/28/17 16:15:59 - [container.c:138] New output 1:eDP-1\n04/28/17 16:15:59 - [layout.c:63] Adding 0x1b363a0 (1, 1920.000000x1080.000000) to 0x64a180 (0, 0.000000x0.000000)\n04/28/17 16:15:59 - [config.c:1048] Invoking swaybar for bar id 'bar-0'\n04/28/17 16:15:59 - [workspace.c:46] Workspace: Generating new workspace name for output eDP-1\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '10'\n04/28/17 16:15:59 - [workspace.c:108] Workspace: Found free name 10\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '1'\n04/28/17 16:15:59 - [workspace.c:108] Workspace: Found free name 1\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '2'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '3'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '4'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '5'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '6'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '7'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '8'\n04/28/17 16:15:59 - [workspace.c:68] Got valid workspace command for target: '9'\n04/28/17 16:15:59 - [container.c:204] Creating default workspace 1\n04/28/17 16:15:59 - [container.c:221] Added workspace 1 for output 1\n04/28/17 16:15:59 - [layout.c:63] Adding 0x1b3dd00 (2, 1920.000000x1080.000000) to 0x1b363a0 (1, 1920.000000x1080.000000)\n04/28/17 16:15:59 - [debug_log.c:98] Setting focus to 0x1b3dd00:18446744073709551615 (WORKSPACE '1')\n04/28/17 16:15:59 - [ipc-server.c:676] Sending workspace::focus event\nsway: error while loading shared libraries: libwlc.so.0: cannot open shared object file: No such file or directory\n04/28/17 16:15:59 - [ipc-client.c:37] Unable to connect to \n04/28/17 16:15:59 - [main.c:51] [wlc] EGL context is double buffered\n04/28/17 16:15:59 - [main.c:51] [wlc] EGL version: 1.4 (DRI2)\n04/28/17 16:15:59 - [main.c:51] [wlc] EGL vendor: Mesa Project\n04/28/17 16:15:59 - [main.c:51] [wlc] EGL client APIs: OpenGL OpenGL_ES \n04/28/17 16:15:59 - [main.c:51] [wlc] EGL context (RGB888)\n04/28/17 16:15:59 - [main.c:51] [wlc] EGL_EXT_buffer_age EGL_EXT_image_dma_buf_import EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n04/28/17 16:15:59 - [main.c:51] [wlc] GL version: OpenGL ES 3.2 Mesa 17.0.4\n04/28/17 16:15:59 - [main.c:51] [wlc] GL vendor: Intel Open Source Technology Center\n04/28/17 16:15:59 - [main.c:51] [wlc] GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_half_float GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_robustness GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_KHR_texture_compression_astc_ldr GL_OES_depth_texture_cube_map GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_framebuffer_fetch GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_INTEL_conservative_rasterization GL_ANDROID_extension_pack_es31a GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_KHR_blend_equation_advanced GL_KHR_blend_equation_advanced_coherent GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_NV_image_formats GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_shader_samples_identical GL_KHR_texture_compression_astc_sliced_3d GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_MESA_shader_integer_functions \n04/28/17 16:15:59 - [main.c:51] [wlc] GLES2 renderer initialized\n04/28/17 16:15:59 - [main.c:51] [wlc] Set new bsurface to output (1)\n04/28/17 16:15:59 - [main.c:51] [wlc] Added output (1)\n04/28/17 16:15:59 - [main.c:51] [wlc] become active\n04/28/17 16:16:00 - [main.c:51] [wlc] Xwayland started (DISPLAY :0)\n04/28/17 16:16:00 - [main.c:51] [wlc] xfixes (5.0)\n04/28/17 16:16:00 - [handlers.c:1056] Compositor is ready, executing cmds in queue\n04/28/17 16:16:00 - [input.c:53] rewritten name Power_Button\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:1:Power_Button)\n04/28/17 16:16:00 - [input.c:53] rewritten name Video_Bus\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:6:Video_Bus)\n04/28/17 16:16:00 - [input.c:53] rewritten name Video_Bus\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:6:Video_Bus)\n04/28/17 16:16:00 - [input.c:53] rewritten name Power_Button\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:1:Power_Button)\n04/28/17 16:16:00 - [input.c:53] rewritten name Sleep_Button\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:3:Sleep_Button)\n04/28/17 16:16:00 - [input.c:53] rewritten name Integrated_Webcam_HD\n04/28/17 16:16:00 - [handlers.c:133] Found input device (7119:11157:Integrated_Web)\n04/28/17 16:16:00 - [input.c:53] rewritten name HID_05f3:0007\n04/28/17 16:16:00 - [handlers.c:133] Found input device (1523:7:HID_05f3:00)\n04/28/17 16:16:00 - [input.c:53] rewritten name HID_05f3:0007\n04/28/17 16:16:00 - [handlers.c:133] Found input device (1523:7:HID_05f3:00)\n04/28/17 16:16:00 - [input.c:53] rewritten name Razer_Razer_DeathAdder_Chroma\n04/28/17 16:16:00 - [handlers.c:133] Found input device (5426:67:Razer_Razer_DeathAdder_Chr)\n04/28/17 16:16:00 - [input.c:53] rewritten name Razer_Razer_DeathAdder_Chroma\n04/28/17 16:16:00 - [handlers.c:133] Found input device (5426:67:Razer_Razer_DeathAdder_Chr)\n04/28/17 16:16:00 - [input.c:53] rewritten name Razer_Razer_DeathAdder_Chroma\n04/28/17 16:16:00 - [handlers.c:133] Found input device (5426:67:Razer_Razer_DeathAdder_Chr)\n04/28/17 16:16:00 - [input.c:53] rewritten name DLL07BF:01_06CB:7A13_Touchpad\n04/28/17 16:16:00 - [handlers.c:133] Found input device (1739:31251:DLL07BF:01_06CB:7A13_To)\n04/28/17 16:16:00 - [input.c:53] rewritten name Intel_HID_events\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:0:Intel_HID_events)\n04/28/17 16:16:00 - [input.c:53] rewritten name AT_Translated_Set_2_keyboard\n04/28/17 16:16:00 - [handlers.c:133] Found input device (1:1:AT_Translated_Set_2_keyboard)\n04/28/17 16:16:00 - [input.c:53] rewritten name PS/2_Synaptics_TouchPad\n04/28/17 16:16:00 - [handlers.c:133] Found input device (2:1:PS/2_Synaptics_TouchPad)\n04/28/17 16:16:00 - [input.c:53] rewritten name Dell_WMI_hotkeys\n04/28/17 16:16:00 - [handlers.c:133] Found input device (0:0:Dell_WMI_hotkeys)\n04/28/17 16:16:00 - [commands.c:420] Handling command 'exec urxvt'\n04/28/17 16:16:00 - [commands.c:339] find_handler(exec) 0\n04/28/17 16:16:00 - [commands.c:460] Running on container '1'\n04/28/17 16:16:00 - [exec_always.c:34] Executing urxvt\n04/28/17 16:16:00 - [exec_always.c:75] Child process created with pid 1038 for workspace 1\n04/28/17 16:16:00 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:01 - [workspace.c:330] looking for workspace for pid 1038\n04/28/17 16:16:01 - [workspace.c:345] found pid_workspace for pid 1038, workspace 1\n04/28/17 16:16:01 - [handlers.c:420] handle:2 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:496 h:316) title:urxvt class:URxvt appid:(null)\n04/28/17 16:16:01 - [container.c:299] Adding new view 2:urxvt to container 0x1b3dd00 2\n04/28/17 16:16:01 - [layout.c:63] Adding 0x1998ca0 (4, 0.000000x0.000000) to 0x1b3dd00 (2, 1920.000000x1080.000000)\n04/28/17 16:16:01 - [ipc-server.c:700] Sending window::new event\n04/28/17 16:16:01 - [debug_log.c:98] Setting focus to 0x1998ca0:2 (VIEW 'urxvt')\n04/28/17 16:16:01 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:01 - [debug_log.c:98] Arranging layout for 0x1b363a0 (OUTPUT 'eDP-1')\n04/28/17 16:16:01 - [layout.c:968] Arranging layout for 0x1b363a0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:01 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:01 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:01 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:01 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:01 - [layout.c:1154] Calculating arrangement for 0x1998ca0:4 (will scale 1920.000000 by 1.000000)\n04/28/17 16:16:01 - [layout.c:968] Arranging layout for 0x1998ca0 urxvt 1920.000000x0.000000+0.000000,0.000000\n04/28/17 16:16:01 - [layout.c:1040] Set view to 1920 x 1080 @ 0, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x1998ca0)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x1998ca0)(p:0x1b3dd00)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:urxvt\n04/28/17 16:16:01 - [handlers.c:585] geometry request for 2 496x316 @ 1,1\n04/28/17 16:16:01 - [handlers.c:585] geometry request for 2 1918x1078 @ 1,1\n04/28/17 16:16:01 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:06 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:06 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:09 - [commands.c:420] Handling command 'exec urxvt'\n04/28/17 16:16:09 - [commands.c:339] find_handler(exec) 0\n04/28/17 16:16:09 - [commands.c:460] Running on container '~'\n04/28/17 16:16:09 - [exec_always.c:34] Executing urxvt\n04/28/17 16:16:09 - [exec_always.c:75] Child process created with pid 1181 for workspace 1\n04/28/17 16:16:09 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:09 - [workspace.c:330] looking for workspace for pid 1181\n04/28/17 16:16:09 - [workspace.c:345] found pid_workspace for pid 1181, workspace 1\n04/28/17 16:16:09 - [handlers.c:420] handle:3 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:804 h:460) title:urxvt class:URxvt appid:(null)\n04/28/17 16:16:09 - [container.c:299] Adding new view 3:urxvt to container 0x1998ca0 4\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::new event\n04/28/17 16:16:09 - [debug_log.c:98] Setting focus to 0x192cf70:3 (VIEW 'urxvt')\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:09 - [debug_log.c:98] Arranging layout for 0x1b363a0 (OUTPUT 'eDP-1')\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x1b363a0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:09 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:09 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:09 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:09 - [layout.c:1154] Calculating arrangement for 0x1998ca0:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x1998ca0 ~ 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:09 - [layout.c:1040] Set view to 960 x 1080 @ 0, 0\n04/28/17 16:16:09 - [layout.c:1154] Calculating arrangement for 0x192cf70:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x192cf70 urxvt 1920.000000x0.000000+960.000000,0.000000\n04/28/17 16:16:09 - [layout.c:1040] Set view to 960 x 1080 @ 960, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x192cf70)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 2|name:1\n|--focus:X   |(0x1998ca0)(p:0x1b3dd00)(f:(nil)   )(h: 2)Type:view|layout:-    |w: 960|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:~\n|--focus:K   |(0x192cf70)(p:0x1b3dd00)(f:(nil)   )(h: 3)Type:view|layout:-    |w: 960|h:1080|x: 960|y:   0|g: -1|vis:t|children: 0|name:urxvt\n04/28/17 16:16:09 - [handlers.c:585] geometry request for 3 804x460 @ 961,1\n04/28/17 16:16:09 - [handlers.c:585] geometry request for 2 958x1078 @ 1,1\n04/28/17 16:16:09 - [handlers.c:585] geometry request for 3 958x1078 @ 961,1\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:09 - [commands.c:420] Handling command 'focus left'\n04/28/17 16:16:09 - [commands.c:339] find_handler(focus) 0\n04/28/17 16:16:09 - [commands.c:460] Running on container '~'\n04/28/17 16:16:09 - [layout.c:1551] get_swayc_in_direction_under cont 1-0x192cf70 dir 0 sibling 0: 0x1998ca0\n04/28/17 16:16:09 - [debug_log.c:98] Setting focus to 0x1998ca0:2 (VIEW '~')\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:09 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:09 - [commands.c:420] Handling command 'kill'\n04/28/17 16:16:09 - [commands.c:339] find_handler(kill) 0\n04/28/17 16:16:09 - [commands.c:460] Running on container '~'\n04/28/17 16:16:09 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:09 - [handlers.c:522] Destroying window 2\n04/28/17 16:16:09 - [container.c:518] Destroying view '0x1998ca0'\n04/28/17 16:16:09 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:09 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:09 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:09 - [layout.c:1154] Calculating arrangement for 0x192cf70:4 (will scale 1920.000000 by 2.000000)\n04/28/17 16:16:09 - [layout.c:968] Arranging layout for 0x192cf70 ~ 960.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:09 - [layout.c:1040] Set view to 1920 x 1080 @ 0, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x192cf70)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x192cf70)(p:0x1b3dd00)(f:(nil)   )(h: 3)Type:view|layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:~\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::close event\n04/28/17 16:16:09 - [debug_log.c:98] Setting focus to 0x192cf70:3 (VIEW '~')\n04/28/17 16:16:09 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:09 - [handlers.c:585] geometry request for 3 1918x1078 @ 1,1\n04/28/17 16:16:12 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:12 - [debug_log.c:98] Setting focus to 0x192cf70:3 (VIEW 'edgar: chromium')\n04/28/17 16:16:12 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:13 - [workspace.c:330] looking for workspace for pid 1238\n04/28/17 16:16:13 - [handlers.c:420] handle:2 type:0 state:0 parent:0 mask:0 (x:1 y:1 w:958 h:1078) title:New Tab - Chromium class:Chromium appid:(null)\n04/28/17 16:16:13 - [container.c:299] Adding new view 2:New Tab - Chromium to container 0x192cf70 4\n04/28/17 16:16:13 - [ipc-server.c:700] Sending window::new event\n04/28/17 16:16:13 - [debug_log.c:98] Setting focus to 0x1998ca0:2 (VIEW 'New Tab - Chromium')\n04/28/17 16:16:13 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:13 - [debug_log.c:98] Arranging layout for 0x1b363a0 (OUTPUT 'eDP-1')\n04/28/17 16:16:13 - [layout.c:968] Arranging layout for 0x1b363a0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:13 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:13 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:13 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:13 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:13 - [layout.c:1154] Calculating arrangement for 0x192cf70:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:13 - [layout.c:968] Arranging layout for 0x192cf70 edgar: chromium 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:13 - [layout.c:1040] Set view to 960 x 1080 @ 0, 0\n04/28/17 16:16:13 - [layout.c:1154] Calculating arrangement for 0x1998ca0:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:13 - [layout.c:968] Arranging layout for 0x1998ca0 New Tab - Chromium 1920.000000x0.000000+960.000000,0.000000\n04/28/17 16:16:13 - [layout.c:1040] Set view to 960 x 1080 @ 960, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x1998ca0)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 2|name:1\n|--focus:X   |(0x192cf70)(p:0x1b3dd00)(f:(nil)   )(h: 3)Type:view|layout:-    |w: 960|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:edgar: chromium\n|--focus:K   |(0x1998ca0)(p:0x1b3dd00)(f:(nil)   )(h: 2)Type:view|layout:-    |w: 960|h:1080|x: 960|y:   0|g: -1|vis:t|children: 0|name:New Tab - Chromi\n04/28/17 16:16:13 - [handlers.c:585] geometry request for 2 958x1078 @ 961,1\n04/28/17 16:16:13 - [handlers.c:585] geometry request for 3 958x1078 @ 1,1\n04/28/17 16:16:13 - [debug_log.c:98] Setting focus to 0x192cf70:3 (VIEW 'edgar: chromium')\n04/28/17 16:16:13 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:14 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:15 - [commands.c:420] Handling command 'kill'\n04/28/17 16:16:15 - [commands.c:339] find_handler(kill) 0\n04/28/17 16:16:15 - [commands.c:460] Running on container '~'\n04/28/17 16:16:15 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:15 - [handlers.c:522] Destroying window 3\n04/28/17 16:16:15 - [container.c:518] Destroying view '0x192cf70'\n04/28/17 16:16:15 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:15 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:15 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:15 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:15 - [layout.c:1154] Calculating arrangement for 0x1998ca0:4 (will scale 1920.000000 by 2.000000)\n04/28/17 16:16:15 - [layout.c:968] Arranging layout for 0x1998ca0 New Tab - Chromium 960.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:15 - [layout.c:1040] Set view to 1920 x 1080 @ 0, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x1998ca0)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x1998ca0)(p:0x1b3dd00)(f:(nil)   )(h: 2)Type:view|layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:New Tab - Chromi\n04/28/17 16:16:15 - [ipc-server.c:700] Sending window::close event\n04/28/17 16:16:15 - [debug_log.c:98] Setting focus to 0x1998ca0:2 (VIEW 'New Tab - Chromium')\n04/28/17 16:16:15 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:15 - [handlers.c:585] geometry request for 2 1918x1078 @ 1,1\n04/28/17 16:16:19 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:19 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:19 - [debug_log.c:98] Setting focus to 0x1998ca0:2 (VIEW 'sway github faq - Google )\n04/28/17 16:16:19 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:21 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:23 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:24 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:27 - [commands.c:420] Handling command 'exec urxvt'\n04/28/17 16:16:27 - [commands.c:339] find_handler(exec) 0\n04/28/17 16:16:27 - [commands.c:460] Running on container 'swaybar quits immediately \u00b7 Issue #1198 \u00b7 SirCmpwn/sway - Chromium'\n04/28/17 16:16:27 - [exec_always.c:34] Executing urxvt\n04/28/17 16:16:27 - [exec_always.c:75] Child process created with pid 1959 for workspace 1\n04/28/17 16:16:27 - [ipc-server.c:750] Sending binding::run event\n04/28/17 16:16:27 - [workspace.c:330] looking for workspace for pid 1959\n04/28/17 16:16:27 - [workspace.c:345] found pid_workspace for pid 1959, workspace 1\n04/28/17 16:16:27 - [handlers.c:420] handle:3 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:804 h:460) title:urxvt class:URxvt appid:(null)\n04/28/17 16:16:27 - [container.c:299] Adding new view 3:urxvt to container 0x1998ca0 4\n04/28/17 16:16:27 - [ipc-server.c:700] Sending window::new event\n04/28/17 16:16:27 - [debug_log.c:98] Setting focus to 0x28f08b0:3 (VIEW 'urxvt')\n04/28/17 16:16:27 - [ipc-server.c:700] Sending window::focus event\n04/28/17 16:16:27 - [debug_log.c:98] Arranging layout for 0x1b363a0 (OUTPUT 'eDP-1')\n04/28/17 16:16:27 - [layout.c:968] Arranging layout for 0x1b363a0 eDP-1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:27 - [debug_log.c:98] Arranging layout for 0x1b3dd00 (WORKSPACE '1')\n04/28/17 16:16:27 - [layout.c:968] Arranging layout for 0x1b3dd00 1 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:27 - [layout.c:1030] Arranging workspace '1' at 0.000000, 0.000000\n04/28/17 16:16:27 - [layout.c:1148] Arranging 0x1b3dd00 horizontally\n04/28/17 16:16:27 - [layout.c:1154] Calculating arrangement for 0x1998ca0:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:27 - [layout.c:968] Arranging layout for 0x1998ca0 swaybar quits immediately \u00b7 Issue #1198 \u00b7 SirCmpwn/sway - Chromium 1920.000000x1080.000000+0.000000,0.000000\n04/28/17 16:16:27 - [layout.c:1040] Set view to 960 x 1080 @ 0, 0\n04/28/17 16:16:27 - [layout.c:1154] Calculating arrangement for 0x28f08b0:4 (will scale 1920.000000 by 0.500000)\n04/28/17 16:16:27 - [layout.c:968] Arranging layout for 0x28f08b0 urxvt 1920.000000x0.000000+960.000000,0.000000\n04/28/17 16:16:27 - [layout.c:1040] Set view to 960 x 1080 @ 960, 0\nfocus:R      |(0x64a180)(p:(nil)   )(f:0x1b363a0)(h:18446744073709551615)Type:root|layout:-    |w:1920|h:1080|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x1b363a0)(p:0x64a180)(f:0x1b3dd00)(h: 1)Type:op  |layout:-    |w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 1|name:eDP-1\n|-focus:W    |(0x1b3dd00)(p:0x1b363a0)(f:0x28f08b0)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1920|h:1080|x:   0|y:   0|g: -1|vis:t|children: 2|name:1\n|--focus:X   |(0x1998ca0)(p:0x1b3dd00)(f:(nil)   )(h: 2)Type:view|layout:-    |w: 960|h:1080|x:   0|y:   0|g: -1|vis:t|children: 0|name:swaybar quits im\n|--focus:K   |(0x28f08b0)(p:0x1b3dd00)(f:(nil)   )(h: 3)Type:view|layout:-    |w: 960|h:1080|x: 960|y:   0|g: -1|vis:t|children: 0|name:urxvt\n04/28/17 16:16:27 - [handlers.c:585] geometry request for 3 804x460 @ 961,1\n04/28/17 16:16:27 - [handlers.c:585] geometry request for 2 958x1078 @ 1,1\n04/28/17 16:16:27 - [handlers.c:585] geometry request for 3 958x1078 @ 961,1\n04/28/17 16:16:27 - [ipc-server.c:700] Sending window::title event\n04/28/17 16:16:31 - [ipc-server.c:700] Sending window::title event\n```. I've tried/usr/local/liband/usr/local/lib64`; both of which fails to start sway with the attached log.\nMy system runs logind, and I've never been able to run sway after adding the capabilities listed in the README:\nsudo setcap cap_sys_ptrace=eip /usr/local/bin/sway\nsudo setcap cap_sys_tty_config=eip /usr/local/bin/sway\nAfter adding those capabilities, I get this:\nsway: error while loading shared libraries: libwlc.so.0: cannot open shared object file: No such file or directory\nThese are the logs for without adding capabilities:\n```\n04/28/17 17:03:26 - [main.c:185] Linux triforce 4.10.11-1-ARCH #1 SMP PREEMPT Tue Apr 18 08:39:42 CEST 2017 x86_64 GNU/Linux\n04/28/17 17:03:26 - [main.c:157] Contents of /etc/os-release:\n04/28/17 17:03:26 - [main.c:164] NAME=\"Arch Linux\"\n04/28/17 17:03:26 - [main.c:164] PRETTY_NAME=\"Arch Linux\"\n04/28/17 17:03:26 - [main.c:164] ID=arch\n04/28/17 17:03:26 - [main.c:164] ID_LIKE=archlinux\n04/28/17 17:03:26 - [main.c:164] ANSI_COLOR=\"0;36\"\n04/28/17 17:03:26 - [main.c:164] HOME_URL=\"https://www.archlinux.org/\"\n04/28/17 17:03:26 - [main.c:164] SUPPORT_URL=\"https://bbs.archlinux.org/\"\n04/28/17 17:03:26 - [main.c:164] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\n04/28/17 17:03:26 - [main.c:142] PATH=/usr/local/bin:/usr/local/sbin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/edgar/.vim/plugged/fzf/bin\n04/28/17 17:03:26 - [main.c:142] LD_LOAD_PATH=(null)\n04/28/17 17:03:26 - [main.c:142] LD_PRELOAD_PATH=(null)\n04/28/17 17:03:26 - [main.c:142] LD_LIBRARY_PATH=/usr/local/lib64\n04/28/17 17:03:26 - [main.c:142] SWAY_CURSOR_THEME=(null)\n04/28/17 17:03:26 - [main.c:142] SWAY_CURSOR_SIZE=(null)\n04/28/17 17:03:26 - [main.c:142] SWAYSOCK=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_DRM_DEVICE=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_SHM=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_OUTPUTS=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_XWAYLAND=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_LIBINPUT=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_REPEAT_DELAY=(null)\n04/28/17 17:03:26 - [main.c:142] WLC_REPEAT_RATE=(null)\n04/28/17 17:03:26 - [main.c:142] XKB_DEFAULT_RULES=(null)\n04/28/17 17:03:26 - [main.c:142] XKB_DEFAULT_MODEL=(null)\n04/28/17 17:03:26 - [main.c:142] XKB_DEFAULT_LAYOUT=(null)\n04/28/17 17:03:26 - [main.c:142] XKB_DEFAULT_VARIANT=(null)\n04/28/17 17:03:26 - [main.c:142] XKB_DEFAULT_OPTIONS=(null)\n\u001b[1;31mWarning: Proprietary nvidia driver support is considered experimental. Nouveau is strongly recommended.\u001b[0m\n04/28/17 17:03:26 - [main.c:51] [wlc] logind: session control granted\n04/28/17 17:03:26 - [main.c:51] [wlc] Running on vt 1 (fd 0)\n04/28/17 17:03:26 - [main.c:49] [wlc] Failed to open X11 display\n04/28/17 17:03:26 - [main.c:377] Starting sway version 0.13-rc1-15-g1376de4 (2017-04-29, branch \"master\")\n04/28/17 17:03:26 - [config.c:444] Set XDG_CONFIG_HOME to /home/edgar/.config\n04/28/17 17:03:26 - [config.c:469] Loading config from /etc/sway/security.d/00-defaults\n04/28/17 17:03:26 - [commands.c:510] handling config command 'permit * fullscreen keyboard mouse'\n04/28/17 17:03:26 - [commands.c:339] find_handler(permit) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target ''\n04/28/17 17:03:26 - [permit.c:72] Permissions granted to * for features 112\n04/28/17 17:03:26 - [commands.c:510] handling config command 'permit /usr/local/bin/swaylock lock'\n04/28/17 17:03:26 - [commands.c:339] find_handler(permit) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\n04/28/17 17:03:26 - [permit.c:72] Permissions granted to /usr/local/bin/swaylock for features 113\n04/28/17 17:03:26 - [commands.c:510] handling config command 'permit /usr/local/bin/swaybg background'\n04/28/17 17:03:26 - [commands.c:339] find_handler(permit) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaybg'\n04/28/17 17:03:26 - [permit.c:72] Permissions granted to /usr/local/bin/swaybg for features 116\n04/28/17 17:03:26 - [commands.c:510] handling config command 'permit /usr/local/bin/swaygrab screenshot'\n04/28/17 17:03:26 - [commands.c:339] find_handler(permit) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\n04/28/17 17:03:26 - [permit.c:72] Permissions granted to /usr/local/bin/swaygrab for features 120\n04/28/17 17:03:26 - [commands.c:510] handling config command 'permit /usr/local/bin/swaybar panel'\n04/28/17 17:03:26 - [commands.c:339] find_handler(permit) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\n04/28/17 17:03:26 - [permit.c:72] Permissions granted to /usr/local/bin/swaybar for features 114\n04/28/17 17:03:26 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaymsg {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(ipc) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaymsg'\n04/28/17 17:03:26 - [commands.c:510] handling config command ' enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler() 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC * feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'events {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(events) 0\n04/28/17 17:03:26 - [commands.c:510] handling config command ' disabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler() 0\n04/28/17 17:03:26 - [ipc.c:157] Disabled IPC * event\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:813] End of IPC events block\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:808] End of IPC block\n04/28/17 17:03:26 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaybar {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(ipc) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bar-config enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bar-config) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC bar-config feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(outputs) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'workspaces enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(workspaces) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC workspaces feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'command enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(command) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC command feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'events {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(events) 0\n04/28/17 17:03:26 - [commands.c:510] handling config command 'workspace enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(workspace) 0\n04/28/17 17:03:26 - [ipc.c:154] Enabled IPC workspace event\n04/28/17 17:03:26 - [commands.c:510] handling config command 'mode enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(mode) 0\n04/28/17 17:03:26 - [ipc.c:154] Enabled IPC mode event\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:813] End of IPC events block\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:808] End of IPC block\n04/28/17 17:03:26 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaygrab {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(ipc) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\n04/28/17 17:03:26 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(outputs) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 17:03:26 - [commands.c:510] handling config command 'tree enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(tree) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC tree feature\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:808] End of IPC block\n04/28/17 17:03:26 - [commands.c:510] handling config command 'ipc /usr/local/bin/swaylock {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(ipc) 0\n04/28/17 17:03:26 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\n04/28/17 17:03:26 - [commands.c:510] handling config command 'outputs enabled'\n04/28/17 17:03:26 - [commands.c:339] find_handler(outputs) 0\n04/28/17 17:03:26 - [ipc.c:105] Enabled IPC outputs feature\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:808] End of IPC block\n04/28/17 17:03:26 - [commands.c:510] handling config command 'commands {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(commands) 0\n04/28/17 17:03:26 - [commands.c:339] find_handler() 0\n04/28/17 17:03:26 - [commands.c:614] Set command policy for * to -1\n04/28/17 17:03:26 - [commands.c:339] find_handler(fullscreen) 0\n04/28/17 17:03:26 - [commands.c:614] Set command policy for fullscreen to 10\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [commands.c:614] Set command policy for bindsym to 1\n04/28/17 17:03:26 - [commands.c:339] find_handler(exit) 0\n04/28/17 17:03:26 - [commands.c:614] Set command policy for exit to 2\n04/28/17 17:03:26 - [commands.c:339] find_handler(kill) 0\n04/28/17 17:03:26 - [commands.c:614] Set command policy for kill to 2\n04/28/17 17:03:26 - [config.c:803] End of commands block\n04/28/17 17:03:26 - [config.c:469] Loading config from /home/edgar/.config/sway/config\n04/28/17 17:03:26 - [commands.c:510] handling config command 'set $mod Mod4'\n04/28/17 17:03:26 - [commands.c:339] find_handler(set) 0\n04/28/17 17:03:26 - [commands.c:510] handling config command 'font pango:Droid Sans Mono for Powerline 12'\n04/28/17 17:03:26 - [commands.c:339] find_handler(font) 0\n04/28/17 17:03:26 - [font.c:25] Settings font Droid Sans Mono for Powerline 12\n04/28/17 17:03:26 - [commands.c:510] handling config command 'floating_modifier $mod'\n04/28/17 17:03:26 - [commands.c:339] find_handler(floating_modifier) 0\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Return exec urxvt'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Return to command exec urxvt\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+q kill'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+q to command kill\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+d exec dmenu -show run'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+d to command exec dmenu -show run\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+h focus left'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+h to command focus left\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+j focus down'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+j to command focus down\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+k focus up'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+k to command focus up\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+l focus right'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+l to command focus right\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+h move left'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+h to command move left\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+j move down'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+j to command move down\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+k move up'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+k to command move up\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+l move right'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+l to command move right\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+mod1+h move workspace to output left'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+mod1+h to command move workspace to output left\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+mod1+l move workspace to output right'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+mod1+l to command move workspace to output right\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+semicolon split h'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+semicolon to command split h\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+v split v'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+v to command split v\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+f fullscreen'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+f to command fullscreen\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+s layout stacking'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+s to command layout stacking\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+w layout tabbed'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+w to command layout tabbed\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+e layout toggle split'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+e to command layout toggle split\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+space floating toggle'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+space to command floating toggle\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+space focus mode_toggle'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+space to command focus mode_toggle\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+a focus parent'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+a to command focus parent\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+1 workspace 1'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+1 to command workspace 1\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+2 workspace 2'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+2 to command workspace 2\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+3 workspace 3'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+3 to command workspace 3\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+4 workspace 4'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+4 to command workspace 4\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+5 workspace 5'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+5 to command workspace 5\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+6 workspace 6'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+6 to command workspace 6\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+7 workspace 7'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+7 to command workspace 7\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+8 workspace 8'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+8 to command workspace 8\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+9 workspace 9'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+9 to command workspace 9\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+0 workspace 10'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+0 to command workspace 10\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+1 move container to workspace 1'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+1 to command move container to workspace 1\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+2 move container to workspace 2'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+2 to command move container to workspace 2\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+3 move container to workspace 3'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+3 to command move container to workspace 3\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+4 move container to workspace 4'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+4 to command move container to workspace 4\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+5 move container to workspace 5'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+5 to command move container to workspace 5\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+6 move container to workspace 6'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+6 to command move container to workspace 6\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+7 move container to workspace 7'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+7 to command move container to workspace 7\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+8 move container to workspace 8'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+8 to command move container to workspace 8\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+9 move container to workspace 9'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+9 to command move container to workspace 9\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+0 move container to workspace 10'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+0 to command move container to workspace 10\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+c reload'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+c to command reload\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+Shift+r restart'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+Shift+r to command restart\n04/28/17 17:03:26 - [commands.c:510] handling config command 'mode \"resize\" {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(mode) 0\n04/28/17 17:03:26 - [mode.c:48] Switching to mode resize'\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym h resize shrink width 10 px or 10 ppt'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound h to command resize shrink width 10 px or 10 ppt\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym j resize grow height 10 px or 10 ppt'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound j to command resize grow height 10 px or 10 ppt\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym k resize shrink height 10 px or 10 ppt'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound k to command resize shrink height 10 px or 10 ppt\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym l resize grow width 10 px or 10 ppt'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound l to command resize grow width 10 px or 10 ppt\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym Return mode \"default\"'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Return to command mode \"default\"\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym Escape mode \"default\"'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Escape to command mode \"default\"\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:780] End of mode block\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+r mode \"resize\"'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+r to command mode \"resize\"\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym $mod+shift+x exec swaylock'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound Mod4+shift+x to command exec swaylock\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume 0 +10% && killall -SIGUSR1 i3status'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound XF86AudioRaiseVolume to command exec --no-startup-id pactl set-sink-volume 0 +10% && killall -SIGUSR1 i3status\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume 0 -10% && killall -SIGUSR1 i3status'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound XF86AudioLowerVolume to command exec --no-startup-id pactl set-sink-volume 0 -10% && killall -SIGUSR1 i3status\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute 0 toggle && killall -SIGUSR1 i3status'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bindsym) 0\n04/28/17 17:03:26 - [bind.c:85] bindsym - Bound XF86AudioMute to command exec --no-startup-id pactl set-sink-mute 0 toggle && killall -SIGUSR1 i3status\n04/28/17 17:03:26 - [commands.c:510] handling config command 'default_border pixel 1'\n04/28/17 17:03:26 - [commands.c:339] find_handler(default_border) 0\n04/28/17 17:03:26 - [commands.c:510] handling config command 'bar {'\n04/28/17 17:03:26 - [commands.c:339] find_handler(bar) 0\n04/28/17 17:03:26 - [bar.c:57] Configuring bar bar-0\n04/28/17 17:03:26 - [commands.c:510] handling config command 'position top'\n04/28/17 17:03:26 - [commands.c:339] find_handler(position) 0\n04/28/17 17:03:26 - [position.c:31] Setting bar position 'top' for bar: bar-0\n04/28/17 17:03:26 - [commands.c:510] handling config command '}'\n04/28/17 17:03:26 - [config.c:792] End of bar block\n04/28/17 17:03:26 - [main.c:204] !! DANGER !! Sway does not have CAP_SYS_PTRACE and cannot enforce security rules for processes running as other users.\n04/28/17 17:03:26 - [main.c:51] [wlc] libinput: resume\n04/28/17 17:03:26 - [main.c:51] [wlc] Activating tty\n04/28/17 17:03:26 - [main.c:51] [wlc] become active\n04/28/17 17:03:26 - [main.c:51] [wlc] Cleanup wlc\n04/28/17 17:03:26 - [handlers.c:1056] Compositor is ready, executing cmds in queue\n04/28/17 17:03:26 - [main.c:51] [wlc] Closing Xwayland\n04/28/17 17:03:26 - [main.c:51] [wlc] Closed drm\n04/28/17 17:03:26 - [main.c:51] [wlc] Restoring vt 1 (0x4) (fd 0)\n```. Also how would I go about installing wlc to/usr`?. ",
    "Dudemanguy911": "Yes, I've done both of those.. After some more time tinkering around, Sway does start up fine using elogind (as it should). Since my only concern was playing with Wayland without systemd, I'm pretty satisfied with that although I'm not convinced that Sway will work without logind.. Went ahead and rebased this (and sorry, I somehow messed up the order of my commit history in the process) since some of @RyanDwyer's last commits were useful. I've addressed some things, but there are still a couple of lingering limitations/questions.\nThis may not be ideal, but previously the mouse was pretty broken on the tabbed layout. Any click would automatically focus on the very first child meaning that any children past the very first one were totally unusable with the mouse. I think this is because the container_at_coords function grabs the surface of the parent container and the dispatch_mouse_button function changes the focus to the parent container. I just told dispatch_mouse_button not to change the focus if the layout is tabbed so you can use the mouse on other children, but that also means that clicking the border for other children won't change the focus.\nThe borders aren't totally perfect (I also ripped out pixel borders for now). I know @SirCmpwn suggested building the border from just one window and that makes sense to me as well. However, I haven't thought of a simple way to hack that onto render_border_simple_normal and I think that would probably require a new function. At the same time, the outline borders can be fixed as well. Currently, the left/right/bottom borders will be shown as inactive unless the last child is focused. I think those two things can be handled in a future pull request though. I don't want to bloat up this one.. Okay, I'll spend some time on it.. Another update. Since only the top bar needs to be different for the tabbed view, I pulled out the part of render_container_simple_border_normal that renders to the top bar and put it in its own function. I also added render_container_top_tabbed_border_normal and render_container_tabbed_border_normal which piggyback off of the other rendering functions specifically for tabbed view. The design is pretty different now and some of this could be carried over to render_container_simple if it's desired.\nI believe all of the concerns are addressed now. The border is now only rendered on the focused child and from there it calculates the position of the textures and borders for the other children. Unfortunately, clicking the mouse on the tabs will not change the view. Like I said before, this is because of how container_at_coords works and honestly I don't really don't have a good idea how to get around fixing that. But other than the mouse not being able to focus new tabs, everything should working nicely now.. Updated and simplified the border rendering functions as requested. Let me know if there are any further concerns.. Oh no, I just realized this implementation has strange mouse issues with gtk3 applications. It seems like gtk3 windows try to automatically grab the focus for some reason (is it because of client side decorations?). Since I have disabled setting the focus on click for tabbed windows (to avoid the first child automatically grabbing the focus), opening a gtk3 application will disable all clicks. qt5 applications don't seem to do this and behave normally. Very strange issue. I'll have to look into it some more.. It's just dawned on me that wlr_box casts integers. That inherently messes up all of the math that we use to render the borders. That should be changed, but I don't know if it's as simple as just changing all instances of int to double in wlroots.. All of the widths and heights that are calculated are stored in a wlr_box before being rendered. The cast will break any case where the number of tabs don't perfectly divide into integers.. Well for example take what renders one of the tab separators.\nbox.x = con->x + depth * tab_width;\nbox.y = con->y + 1; \nbox.width = con->sway_view->border_thickness;\nbox.height = con->sway_view->y - con->y - 2;\ntab_width here is calculated from tab_width = con->width / num_tabs which I have stored as float (which probably should be changed to double really). box.x tells the renderer where to start drawing the box. In case of tabs, this is iterated through with depth which controls where each tab starts. However, box.x is an int. So the proper value will get its decimals truncated and cast into an integer which will offset the borders. I imagine it probably gets worse the more and more windows you open up.. Nevermind, I'm stupid. I can just use floor and ceiling. Now there's still the mouse thing to fix.. I've come up with a fix for the mouse focus problems (which in reality boiled down to fetching the correct container). Let me know what you think.\nEdit: Gah, the swaybar isn't clickable in tabbed mode. Almost there.. What's breaking exactly?. >Looking better, but I can still get things to look wrong by making the children of my tabbed layout have different borders and switching between them.\nAh, the reason for that behaviour is because every child renders their own border separately. So hiding one border will still leave the others intact. There's a couple of ways to approach this. One would be, as you said, to render the whole border based off of the first child (or perhaps the focused one), so that way hiding the border would hide the entire thing. I had something similar that in an earlier design of this actually although there was probably too much abstraction. The other approach would be to to modify the toggle/hide command for tabbed layouts and have it change all the borders in the parent layout.\nI've never actually used i3 before, so I don't know what it did in this case. Did it just hide the entire bar?\n\nThen run border toggle, focus is moved to view A. It should stay on view B.\n\nThis happens on the master branch as well if you open up two different windows and then toggle the border on the second one.. I should have added [WIP] ages ago. Tabbed borders should share all of their settings now (thickness, type and toggle). Still a few things left to do. Holler at me if you find something else.\n\n[ ] making splitting a tabbed child work like in 0.15\n[ ] make swaybar clickable/have the correct focus on the first workspace (works on other workspaces)\n[ ] make moving a child in/out of a tabbed layout possible (sometimes it works; sometimes it doesn't)\n[x] sometimes the view flickers a bit likely because of calling view_autoconfigure; find a better way to do this. Right now, the fullscreen function uses seat_get_focus which will fail if the window is inactive and thus result in sway crashing since the seat isn't technically focused (just pop open dmenu or something and try it yourself). From what I understand, seat_get_focus_inactive will search and fetch the container that is focused or focused but inactive.\n\n\nChanging it to be seat_get_focus_inactive(seat, workspace) will always return a view on the workspace being fullscreened, which means the workspace will match and the seat's focus will be changed regardless of what workspace they're on.\n\nI'm not sure how exactly you are using \"workspace\" here, but in the code it's just the parent container on the workspace. So yes, it will always return a view on a workspace if a container exists on it. I believe that's desirable behaviour. It won't return anything if the workspace is empty and/or you're on a different one.\nEdit: Although I see that some of the other code after getting the focus it seems useless now, it didn't really work in the first place.. >I think the correct solution here is to call seat_get_focus as it did, then check if focus is NULL and only execute the following code if focus is valid.\nYeah that works. Oddly enough, this even focuses the inactive workspace. I was wrong. It looks like this causes the crash, but I don't know why.\nif (focus_ws->type != C_WORKSPACE) {\n    focus_ws = container_parent(focus_ws, C_WORKSPACE);\n}\nIs that if statement really needed? Hell, is focus_ws needed?. Come to think of it, I think I'll just do  focus && focus_ws->type ... there. That should make everyone happy I think.. Oh I did change this by the way.. >This probably indicates a deeper issue - ie. a floating container not yet inserted into container->parent->children?\nDon't some applications do that? For example, anki opens up with a floating window first before the rest of the application opens.. >Maybe in this case the floating container isn't yet in the current list? Is the first line failing or the second line failing in seat.c?\nIt's the second line with current.children. The first one works fine.. So you mean just making sure that container->parent->current.children->length is greater than 0 in seat.c before doing list_move_to_end?. >Maybe just checking if there are no transactions in progress would be enough? (container->instructions->length == 0)\nThis doesn't seem to work (or at least the various ways I've tried to use the instructions struct). I think the current state can have no instructions and floating windows so list_move_to_end gets executed anyway. For now, I changed seat.c to use has_ancestor for checking the current.parent since it works better than the original PR, but I don't know if this is the correct approach.. It's #2703. Some applications can trigger CSD and subsequently crash. I've only been able to trigger this with Pale Moon though (e.g. urxvt and pcmanfm work fine).\nThere was a couple of things that I noticed. In xwayland.c:\n```\nstatic void handle_set_decorations(struct wl_listener listener, void data) {\n    struct sway_xwayland_view xwayland_view =\n        wl_container_of(listener, xwayland_view, set_decorations);\n    struct sway_view view = &xwayland_view->view;\n    struct wlr_xwayland_surface *xsurface = view->wlr_xwayland_surface;\nbool csd = xsurface->decorations != WLR_XWAYLAND_SURFACE_DECORATIONS_ALL;\nview_update_csd_from_client(view, csd);\n\n}\n`\n`WLR_XWAYLAND_SURFACE_DECORATIONS_ALL can sometimes be 0 which sets the bool to 1 and executes.\nAnd then view_update_csd_from_client in view.c\nvoid view_update_csd_from_client(struct sway_view *view, bool enabled) {\n    wlr_log(WLR_DEBUG, \"View %p updated CSD to %i\", view, enabled);\n    if (enabled && view->border != B_CSD) {\n        view->saved_border = view->border;\n        if (container_is_floating(view->container)) {\n            view->border = B_CSD;\n        }\n    } else if (!enabled && view->border == B_CSD) {\n        view->border = view->saved_border;\n    }\n    view->using_csd = enabled;\n}\nIn my case, Pale Moon crashes while trying to evaluate container_is_floating.. Do you mean to render the tab/title for every child within the loop? I thought @SirCmpwn didn't want to take that approach and wanted the tab/title to be only rendered for one child and for the logic for the other tabs to come from there. Please correct me if I'm misunderstanding either one of you.. Ah, that makes sense @RyanDwyer. Thanks for the explanation.. ",
    "hesseltuinhof": "That's interesting. Is it working out of the box or did you have to configure it via input device {}? \n(btw find above the gist). Can I provide any more information for you to figure out the problem maybe? \n. Since running 0.14.0 middle-button scrolling is working fine.... ",
    "lhanson": "Which FM? I don't see wildcards mentioned anywhere in sway(5), sway-input(5), or the wiki.\nOf course, I simply just tried it and it seems to work, but it's probably worth mentioning in TFM.. Which FM? I don't see wildcards mentioned anywhere in sway(5), sway-input(5), or the wiki.\nOf course, I simply just tried it and it seems to work, but it's probably worth mentioning in TFM.. Gotcha, thanks.. Gotcha, thanks.. I'm experiencing the same thing: sway.log\n. I'm experiencing the same thing: sway.log\n. ```\n$ coredumpctl gdb sway\n           PID: 12951 (sway)\n           UID: 1000 (ldh)\n           GID: 1000 (ldh)\n        Signal: 11 (SEGV)\n     Timestamp: Wed 2019-02-27 12:11:59 CST (19h ago)\n  Command Line: sway -V\n    Executable: /usr/bin/sway\n Control Group: /user.slice/user-1000.slice/session-1.scope\n          Unit: session-1.scope\n         Slice: user-1000.slice\n       Session: 1\n     Owner UID: 1000 (ldh)\n       Boot ID: a730d4078de94c8899388fe77f87238e\n    Machine ID: 5dc0876aec7a4edfa5b191574e86607f\n      Hostname: laika\n       Storage: /var/lib/systemd/coredump/core.sway.1000.a730d4078de94c8899388fe77f87238e.12951.1551291119000000.lz4\n       Message: Process 12951 (sway) of user 1000 dumped core.\n            Stack trace of thread 12951:\n            #0  0x00007fc2f1258c1e __strcmp_avx2 (libc.so.6)\n            #1  0x0000555f8e575427 input_manager_get_seat (sway)\n            #2  0x0000555f8e5753db input_manager_get_default_seat (sway)\n            #3  0x0000555f8e5753bc input_manager_current_seat (sway)\n            #4  0x0000555f8e5a7f6f workspace_by_name (sway)\n            #5  0x0000555f8e5a79a9 workspace_name_from_binding (sway)\n            #6  0x0000555f8e5a7bbd workspace_next_name (sway)\n            #7  0x0000555f8e5a9a3a output_enable (sway)\n            #8  0x0000555f8e56df04 handle_new_output (sway)\n            #9  0x00007fc2f13a7bce wlr_signal_emit_safe (libwlroots.so.1)\n            #10 0x00007fc2f13a7bce wlr_signal_emit_safe (libwlroots.so.1)\n            #11 0x00007fc2f136d5bd scan_drm_connectors (libwlroots.so.1)\n            #12 0x00007fc2f136a3c3 backend_start (libwlroots.so.1)\n            #13 0x00007fc2f1374066 multi_backend_start (libwlroots.so.1)\n            #14 0x0000555f8e56a128 server_start (sway)\n            #15 0x0000555f8e5696c2 main (sway)\n            #16 0x00007fc2f1122223 __libc_start_main (libc.so.6)\n            #17 0x0000555f8e55be6e _start (sway)\n\n            Stack trace of thread 12953:\n            #0  0x00007fc2f10eaafc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007fc2ee986c94 n/a (i965_dri.so)\n            #2  0x00007fc2ee9869b8 n/a (i965_dri.so)\n            #3  0x00007fc2f10e4a9d start_thread (libpthread.so.0)\n            #4  0x00007fc2f11f9b23 __clone (libc.so.6)\n\nGNU gdb (GDB) 8.2.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n    http://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...done.\n[New LWP 12951]\n[New LWP 12953]\nCore was generated by `sway -V'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00007fc2f1258c1e in ?? ()\n[Current thread is 1 (LWP 12951)]\n(gdb) bt full\n0  0x00007fc2f1258c1e in ?? ()\nNo symbol table info available.\n1  0x0000555f8e575427 in ?? ()\nNo symbol table info available.\n2  0x00005501900a1bc0 in ?? ()\nNo symbol table info available.\n3  0x0000555f8e5b3b80 in ?? ()\nNo symbol table info available.\n4  0x00007ffeb4c5cf10 in ?? ()\nNo symbol table info available.\n5  0x0000555f8ffa7620 in ?? ()\nNo symbol table info available.\n6  0x00007ffeb4c5ce40 in ?? ()\nNo symbol table info available.\n7  0x0000555f8e5753db in ?? ()\nNo symbol table info available.\n8  0x00007ffeb4c5ce60 in ?? ()\nNo symbol table info available.\n9  0x0000555f8e5753bc in ?? ()\nNo symbol table info available.\n10 0x00007ffeb4c5cf10 in ?? ()\nNo symbol table info available.\n11 0x0000000000000000 in ?? ()\nNo symbol table info available.\n(gdb)\n.\n$ coredumpctl gdb sway\n           PID: 12951 (sway)\n           UID: 1000 (ldh)\n           GID: 1000 (ldh)\n        Signal: 11 (SEGV)\n     Timestamp: Wed 2019-02-27 12:11:59 CST (19h ago)\n  Command Line: sway -V\n    Executable: /usr/bin/sway\n Control Group: /user.slice/user-1000.slice/session-1.scope\n          Unit: session-1.scope\n         Slice: user-1000.slice\n       Session: 1\n     Owner UID: 1000 (ldh)\n       Boot ID: a730d4078de94c8899388fe77f87238e\n    Machine ID: 5dc0876aec7a4edfa5b191574e86607f\n      Hostname: laika\n       Storage: /var/lib/systemd/coredump/core.sway.1000.a730d4078de94c8899388fe77f87238e.12951.1551291119000000.lz4\n       Message: Process 12951 (sway) of user 1000 dumped core.\n            Stack trace of thread 12951:\n            #0  0x00007fc2f1258c1e __strcmp_avx2 (libc.so.6)\n            #1  0x0000555f8e575427 input_manager_get_seat (sway)\n            #2  0x0000555f8e5753db input_manager_get_default_seat (sway)\n            #3  0x0000555f8e5753bc input_manager_current_seat (sway)\n            #4  0x0000555f8e5a7f6f workspace_by_name (sway)\n            #5  0x0000555f8e5a79a9 workspace_name_from_binding (sway)\n            #6  0x0000555f8e5a7bbd workspace_next_name (sway)\n            #7  0x0000555f8e5a9a3a output_enable (sway)\n            #8  0x0000555f8e56df04 handle_new_output (sway)\n            #9  0x00007fc2f13a7bce wlr_signal_emit_safe (libwlroots.so.1)\n            #10 0x00007fc2f13a7bce wlr_signal_emit_safe (libwlroots.so.1)\n            #11 0x00007fc2f136d5bd scan_drm_connectors (libwlroots.so.1)\n            #12 0x00007fc2f136a3c3 backend_start (libwlroots.so.1)\n            #13 0x00007fc2f1374066 multi_backend_start (libwlroots.so.1)\n            #14 0x0000555f8e56a128 server_start (sway)\n            #15 0x0000555f8e5696c2 main (sway)\n            #16 0x00007fc2f1122223 __libc_start_main (libc.so.6)\n            #17 0x0000555f8e55be6e _start (sway)\n\n            Stack trace of thread 12953:\n            #0  0x00007fc2f10eaafc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007fc2ee986c94 n/a (i965_dri.so)\n            #2  0x00007fc2ee9869b8 n/a (i965_dri.so)\n            #3  0x00007fc2f10e4a9d start_thread (libpthread.so.0)\n            #4  0x00007fc2f11f9b23 __clone (libc.so.6)\n\nGNU gdb (GDB) 8.2.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n    http://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...done.\n[New LWP 12951]\n[New LWP 12953]\nCore was generated by `sway -V'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00007fc2f1258c1e in ?? ()\n[Current thread is 1 (LWP 12951)]\n(gdb) bt full\n0  0x00007fc2f1258c1e in ?? ()\nNo symbol table info available.\n1  0x0000555f8e575427 in ?? ()\nNo symbol table info available.\n2  0x00005501900a1bc0 in ?? ()\nNo symbol table info available.\n3  0x0000555f8e5b3b80 in ?? ()\nNo symbol table info available.\n4  0x00007ffeb4c5cf10 in ?? ()\nNo symbol table info available.\n5  0x0000555f8ffa7620 in ?? ()\nNo symbol table info available.\n6  0x00007ffeb4c5ce40 in ?? ()\nNo symbol table info available.\n7  0x0000555f8e5753db in ?? ()\nNo symbol table info available.\n8  0x00007ffeb4c5ce60 in ?? ()\nNo symbol table info available.\n9  0x0000555f8e5753bc in ?? ()\nNo symbol table info available.\n10 0x00007ffeb4c5cf10 in ?? ()\nNo symbol table info available.\n11 0x0000000000000000 in ?? ()\nNo symbol table info available.\n(gdb)\n```. ",
    "wulvyrn": "Solution...\n.Xdefaults has termname and keysym\nurxvt.termName:             rxvt-256color\n! delete, Pageup, pagedown, home, end\nurxvt.keysym.M-BackSpace:.  \\033[3~\nurxvt.keysym.M-Up:          \\033[5~\nurxvt.keysym.M-Down:        \\033[6~\nurxvt.keysym.M-Left:        \\033[7~\nurxvt.keysym.M-Right:       \\033[8~. It works on i3wm and wm using xterm.\nsway 0.13.0\ni'm using termite (to support copy past)\nnote: urxvt-unicode has the same behavior.\ncan you verify in a terminal:\n```\ncd\n~ should display in title bar\nPS1='[\\e]2;\\u@\\h: \\w\\a]$\n~/downloads should display in title bar\ncd downloads\n~ should display in title bar\n~/downloads continues to display in title bar\ncd\n/ root should display\ncd /\n~ should display\ncd\n```\nif you have different results or suggestions, i'd be happy to review my problem.. small typo: notice the extra space after \\w\n$ PS1='\\[\\e]2;\\u@\\h: \\w \\a\\]$ '. ",
    "zsrkmyn": "I did a research and the full log can be found here.\nIn L461, the mode 1280x720 is chosen by wlc, but sway set it to 1920x1080 in L467.\nIn L773, I switched to Xserver in tty1 and then switched back, and this time wlc chose the proper mode in L830.. Do you mean that we cannot specify a resolution to wlc, and wlc will automatically choose the display's preferred mode?. ",
    "WolfangAukang": "Just in case, I found a way to start swaylocks using systemd. The gist is here https://gist.github.com/WolfangAukang/ffc3f481696c239c5583b5b3a0499e06\nSo the question is more related to why swaylock isn't recognizing the password. Right now, as a user one (and it's working). Before I made this issue, I executed it as a system unit. Try to run it as a user unit instead of system. This is the service file I created. Hey @tardypad, it has been a long time I haven't been using Sway with the Arch setup, but as I can recall, if I used it as a system service, I needed to use the root password to unlock the computer. Using it as a user unit fixed that issue for me (although, if running as system worked for you, that's great). I can't give you a good technical explanation of why it worked that way, though.\nThe lock-screen script is based on this one here (https://gist.github.com/embik/eef65b532c88c101af3c8b058084e5bc), and the service file is the one above your comment. It specifies the user, environment as it is managed differently on Wayland and the forking path is just what I've dragged from another script, without making proper tests of what it does.\nI wish I could help you more, but it has been a long time without using my personal laptop with Arch :(. ",
    "tardypad": "I've been struggling to set this up too..., but now I have it \"working\"\nI have a question though @WolfangAukang, I wonder how you made this work as a \"user unit\".\nFrom what I see it should not be possible (and I couldn't make it work myself indeed)\nFrom that Arch link you sent just before: systemd --user runs as a separate process from the systemd --system process. User units can not reference or depend on system units.\nWhich AFAICS means that user unit should not be triggered by the system suspending\nCould you please post again the unit file you're using, along with its location on the filesystem?\nI'm curious as well about that lock-screen.sh script you have (is it still the same as sent before?)\nFor me depending on the way swaylock is launched, I needed to remove Type=forking from the unit\nLast question :) : when you come back from suspend, do you as well have that problem that first the screen with its applications is shown briefly (like 1sec) before the lock appears?\nI tried to change orders with Before: but it doesn't seem to have any effect on that behavior...\nThanks for any pointers\nI'm trying to have this run a bit smoother than it is now. Thanks for the extra info anyway :)\nFor now I removed this \"feature\" :/\nThere were too many minor issues that I didn't feel like spending time on at the moment:\n- problem when screen is already locked manually before the suspend\n- screen displayed before the lock on resume\n- fragile looking scripting. I confirm that problem too\nStill happening in version 0.15.2. Sorry maybe I misread the bug report.\nFor me the moving of a floating window from a for_window rule \"works\", as in the window moves, but the move is not really what I defined, unless I force the resizing, as done in the workaround above.\nI can't really find a logic to where the window gets moved to.\nIf I move up and right, neither of this move seems correct.\nUsing the move commands from bindings works fine. @bpinto Could you please precise what you mean by that previous comment, I'm not sure which codebase you're refering to?\nDo you mean \"Sway doesn't support class criteria from native Wayland apps\" or \"Native Wayland apps don't support class criteria at all\" or something else?\nI just opened the issue https://github.com/thestinger/termite/issues/595 before seeing your comment. Got a reply in that other issue I mentioned, saying \"Native Wayland apps don't support window class\".\nBut I guess this bug report stays valid nevertheless.\nSince Sway seems to have assigned \"termite\" to it, I would expect such rules to work too. @heghe Indeed I was using directly pango markup within i3blocks but not when setting the workspace name\nTesting a bit more on workspace name with the characters you mention in that PR:\nboth & and < make the bar crashes but not > and '\n@emersion I don't have time at the moment to compile sway but will try one of these days\nIsn't it reproduceable as such already though?. I understand the problem with the double bar\nIn any case, thanks for the config tip, that wrapper is gonna be good enough for me I think\nI'm not sure I understand the IPC version though\nI don't see any such command to change the bar config afterwards. ",
    "flynnham": "Man, the things I end up missing being half-awake. Thanks for pointing that out!. ",
    "aidanharris": "@SirCmpwn Thanks. I fixed it as soon as I posted the issue (funny how that seems to happen sometimes). For future reference in case anyone stumbles upon this, I solved my issue as follows:\nCopy default config\nbash\nsudo cp /usr/share/wayland-sessions/sway.desktop /usr/share/wayland-sessions/sway-custom.desktop\nChange 'Exec' line to 'sway-custom'\nbash\n[Desktop Entry]\nName=Sway (custom)\nComment=SirCmpwn's Wayland window manager\nExec=sway-custom\nType=Application\nCreate '/bin/sway-custom'\n```bash\n!/bin/bash\nexport XKB_DEFAULT_OPTIONS=ctrl:nocaps,\nsway\n```\nbash\nsudo chmod +x /bin/sway-custom. @emersion That helped but seems to have revealed another issue\n```\nContinuing.\nThread 1 \"sway\" received signal SIGSEGV, Segmentation fault.\nsubsurface_get_root_coords (child=, root_sx=0x7fff78033e80, root_sy=0x7fff78033e84) at ../sway-9999/sway/tree/view.c:686\n686         *root_sx += subsurface->current.x;\nThread 2 (Thread 0x7ff7b02df700 (LWP 27073)):\n0  0x00007ff7b37ba11c in pthread_cond_wait@@GLIBC_2.3.2 () from /lib64/libpthread.so.0\nNo symbol table info available.\n1  0x00007ff7b08948fa in ?? () from /usr/lib64/dri/i965_dri.so\nNo symbol table info available.\n2  0x00007ff7b0894435 in ?? () from /usr/lib64/dri/i965_dri.so\nNo symbol table info available.\n3  0x00007ff7b37b3433 in start_thread () from /lib64/libpthread.so.0\nNo symbol table info available.\n4  0x00007ff7b38d520f in clone () from /lib64/libc.so.6\nNo symbol table info available.\nThread 1 (Thread 0x7ff7b1141ec0 (LWP 27072)):\n0  subsurface_get_root_coords (child=, root_sx=0x7fff78033e80, root_sy=0x7fff78033e84) at ../sway-9999/sway/tree/view.c:686\n    subsurface = 0x0\n    surface = 0x562681a34a20\n\n1  0x00005626811c7c9f in view_child_damage (child=0x562681a3cc70, whole=whole@entry=false) at ../sway-9999/sway/tree/view.c:708\n    sx = 0\n    sy = 0\n\n2  0x00005626811c7d31 in view_child_handle_surface_commit (listener=, data=) at ../sway-9999/sway/tree/view.c:718\n    child = <optimized out>\n\n3  0x00007ff7b3a78b3e in wlr_signal_emit_safe (signal=signal@entry=0x562681a34cc0, data=data@entry=0x562681a34a20) at ../wlroots-9999/util/signal.c:29\n    pos = 0x562681a3cc88\n    l = 0x562681a3cc88\n    cursor = {link = {prev = 0x562681a3cc88, next = 0x7fff78033ee0}, notify = 0x7ff7b3a78aca <handle_noop>}\n    end = {link = {prev = 0x7fff78033ec0, next = 0x562681a34cc0}, notify = 0x7ff7b3a78aca <handle_noop>}\n\n4  0x00007ff7b3a73955 in surface_commit_pending (surface=surface@entry=0x562681a34a20) at ../wlroots-9999/types/wlr_surface.c:375\n    invalid_buffer = <optimized out>\n    subsurface = 0x562681a34c08\n\n5  0x00007ff7b3a73ad3 in surface_commit (client=, resource=) at ../wlroots-9999/types/wlr_surface.c:444\n    surface = 0x562681a34a20\n    subsurface = <optimized out>\n\n6  0x00007ff7b2a029dd in ffi_call_unix64 () at /var/tmp/portage/dev-libs/libffi-3.3_rc0/work/libffi-3.3-rc0/src/x86/unix64.S:101\nNo locals.\n7  0x00007ff7b2a0223c in ffi_call_int (cif=cif@entry=0x7fff78034090, fn=0x7ff7b3a73a97 , rvalue=rvalue@entry=0x0, avalue=avalue@entry=0x7fff78034160, closure=closure@entry=0x0)\nat /var/tmp/portage/dev-libs/libffi-3.3_rc0/work/libffi-3.3-rc0/src/x86/ffi64.c:667\n    classes = {X86_64_INTEGER_CLASS, X86_64_NO_CLASS, 2996823539, 32759}\n    stack = 0x7fff78033eb0 \"@K\\243\\201&V\"\n    argp = 0x7fff78033f70 \"\"\n    arg_types = 0x7fff780340b0\n    gprcount = 2\n    ssecount = 0\n    ngpr = 1\n    nsse = 0\n    i = 2\n    avn = 2\n    flags = 0\n    reg_args = 0x7fff78033eb0\n\n8  0x00007ff7b2a02613 in ffi_call (cif=cif@entry=0x7fff78034090, fn=, rvalue=rvalue@entry=0x0, avalue=avalue@entry=0x7fff78034160)\nat /var/tmp/portage/dev-libs/libffi-3.3_rc0/work/libffi-3.3-rc0/src/x86/ffi64.c:683\n\nNo locals.\n9  0x00007ff7b3ab7eb4 in wl_closure_invoke (closure=0x562681af0110, flags=2, target=, opcode=6, data=)\nat /usr/src/debug/dev-libs/wayland-9999/wayland-9999/src/connection.c:1006\n    count = <optimized out>\n    cif = {abi = FFI_UNIX64, nargs = 2, arg_types = 0x7fff780340b0, rtype = 0x7ff7b2a04220 <ffi_type_void>, bytes = 0, flags = 0}\n    ffi_types = {0x7ff7b2a04100 <ffi_type_pointer>, 0x7ff7b2a04100 <ffi_type_pointer>, 0x7ff7b2a04100 <ffi_type_pointer>, 0x7ff7b2a04160 <ffi_type_sint32>, 0x7ff7b2a04160 <ffi_type_sint32>, 0x7ff7b2a04160 <ffi_type_sint32>, 0x40888bf7cee3e998, 0xb4, 0x7fff78034150, 0x4000004081d49d00, 0x0, 0xff1ba1f454455100, 0xb4, 0x562681ca2700, 0xb4, 0x7fff780345b0, 0x7ff7b3ab701a <wl_connection_pending_input+5>, 0x7ff7b3ab70ed <wl_connection_read+210>, 0x0, 0x200000000, 0x0, 0x0}\n    ffi_args = {0x7fff78034080, 0x7fff78034088, 0x562681cfd908, 0xff1ba1f454455100, 0x0, 0x562681af0110, 0x0, 0x7ff7b3ab75d1 <wl_closure_init+129>, 0x8, 0x7ff7b3ab69a9 <wl_buffer_copy+47>, 0x7ff7b3ac0310 <wl_surface_requests+144>, 0x7ff7b3ab6e57 <wl_connection_copy+9>, 0x562681c7e3d0, 0x7ff7b3ab8a95 <wl_connection_demarshal+1125>, 0x562681ca2700, 0x562681af01e0, 0x7ff7b3abb49e, 0x562681c7e400, 0x7ff7b3ac0310 <wl_surface_requests+144>, 0x7ff7b3ab3841 <log_closure+66>, 0x562681c7e400, 0x7ff7b3ac0310 <wl_surface_requests+144>}\n    implementation = <optimized out>\n\n10 0x00007ff7b3ab532e in wl_client_connection_data (fd=, mask=, data=0x562681c7e3d0) at /usr/src/debug/dev-libs/wayland-9999/wayland-9999/src/wayland-server.c:420\n    client = 0x562681c7e3d0\n    connection = 0x562681ca2700\n    resource = 0x562681a39d50\n    object = 0x562681a39d50\n    closure = 0x562681af0110\n    message = 0x7ff7b3ac0310 <wl_surface_requests+144>\n    p = {23, 524294}\n    resource_flags = <optimized out>\n    opcode = 6\n    size = <optimized out>\n    since = <optimized out>\n    len = <optimized out>\n\n11 0x00007ff7b3ab604b in wl_event_source_fd_dispatch (source=, ep=) at /usr/src/debug/dev-libs/wayland-9999/wayland-9999/src/event-loop.c:95\n    fd_source = <optimized out>\n    mask = <optimized out>\n\n12 0x00007ff7b3ab67db in wl_event_loop_dispatch (loop=0x5626816d3ee0, timeout=timeout@entry=-1) at /usr/src/debug/dev-libs/wayland-9999/wayland-9999/src/event-loop.c:641\n    ep = {{events = 1, data = {ptr = 0x562681a1b2b0, fd = -2120109392, u32 = 2174857904, u64 = 94723383603888}}, {events = 32759, data = {ptr = 0x562681d06180, fd = -2117049984, u32 = 2177917312, u64 = 94723386663296}}, {events = 1413828864, data = {ptr = 0x78034330ff1ba1f4, fd = -14966284, u32 = 4280001012, u64 = 8647829587198976500}}, {events = 32767, data = {ptr = 0x14, fd = 20, u32 = 20, u64 = 20}}, {events = 2177509120, data = {ptr = 0x81ca571800005626, fd = 22054, u32 = 22054, u64 = 9352383336779109926}}, {events = 22054, data = {ptr = 0x28a4, fd = 10404, u32 = 10404, u64 = 10404}}, {events = 3014356674, data = {ptr = 0xa00007ff7, fd = 32759, u32 = 32759, u64 = 42949705719}}, {events = 118, data = {ptr = 0x1, fd = 1, u32 = 1, u64 = 1}}, {events = 0, data = {ptr = 0x0, fd = 0, u32 = 0, u64 = 0}}, {events = 0, data = {ptr = 0x7fff78034370, fd = 2013479792, u32 = 2013479792, u64 = 140735206867824}}, {events = 1, data = {ptr = 0x0, fd = 0, u32 = 0, u64 = 0}}, {events = 0, data = {ptr = 0x0, fd = 0, u32 = 0, u64 = 0}}, {events = 0, data = {ptr = 0x811b15a70000202d, fd = 8237, u32 = 8237, u64 = 9303053262267621421}}, {events = 22054, data = {ptr = 0x562681ca3fac, fd = -2117451860, u32 = 2177515436, u64 = 94723386261420}}, {events = 20, data = {ptr = 0x81ca370800000000, fd = 0, u32 = 0, u64 = 9352348083687522304}}, {events = 22054, data = {ptr = 0x38, fd = 56, u32 = 56, u64 = 56}}, {events = 20, data = {ptr = 0x100000000, fd = 0, u32 = 0, u64 = 4294967296}}, {events = 1, data = {ptr = 0x7fff00000051, fd = 81, u32 = 81, u64 = 140733193388113}}, {events = 3014096451, data = {ptr = 0x2800007ff7, fd = 32759, u32 = 32759, u64 = 171798724599}}, {events = 48, data = {ptr = 0x7fff78034490, fd = 2013480080, u32 = 2013480080, u64 = 140735206868112}}, {events = 2013479888, data = {ptr = 0x5445510000007fff, fd = 32767, u32 = 32767, u64 = 6072348733020864511}}, {events = 4280001012, data = {ptr = 0x3000000020, fd = 32, u32 = 32, u64 = 206158430240}}, {events = 2013480112, data = {ptr = 0x811d296300007fff, fd = 32767, u32 = 32767, u64 = 9303637910395846655}}, {events = 22054, data = {ptr = 0xbd, fd = 189, u32 = 189, u64 = 189}}, {events = 2174247657, data = {ptr = 0x78031bc500005626, fd = 22054, u32 = 22054, u64 = 8647786242404013606}}, {events = 32767, data = {ptr = 0x5626811d2098, fd = -2128797544, u32 = 2166169752, u64 = 94723374915736}}, {events = 392, data = {ptr = 0x100000000000000, fd = 0, u32 = 0, u64 = 72057594037927936}}, {events = 0, data = {ptr = 0xff1ba1f454455100, fd = 1413828864, u32 = 1413828864, u64 = 18382464374800732416}}, {events = 2174866816, data = {ptr = 0x816d692800005626, fd = 22054, u32 = 22054, u64 = 9326226023873795622}}, {events = 22054, data = {ptr = 0x14, fd = 20, u32 = 20, u64 = 20}}, {events = 2171431168, data = {ptr = 0x5626, fd = 22054, u32 = 22054, u64 = 22054}}, {events = 0, data = {ptr = 0x7ff7b3ab54ba <wl_display_flush_clients+68>, fd = -1280617286, u32 = 3014350010, u64 = 140701847999674}}}\n    source = <optimized out>\n    i = 0\n    count = 1\n\n13 0x00007ff7b3ab5516 in wl_display_run (display=0x5626816d6900) at /usr/src/debug/dev-libs/wayland-9999/wayland-9999/src/wayland-server.c:1260\nNo locals.\n14 0x00005626811a2c68 in server_run (server=0x5626811ea940 ) at ../sway-9999/sway/server.c:190\nNo locals.\n15 0x00005626811a2693 in main (argc=, argv=) at ../sway-9999/sway/main.c:410\n    verbose = 0\n    debug = 1\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = {{name = 0x5626811d21fc \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5626811d4aef \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5626811d2201 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5626811d220a \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5626811d2065 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5626811d12ba \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5626811d2210 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x5626811d221f \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x5626811d222f \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = <optimized out>\n    usage = 0x5626811d2570 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = <optimized out>\n\nDetaching from program: /usr/bin/sway, process 27072\n[Inferior 1 (process 27072) detached]\n```\nAdding another check for NULL seems to have fixed things although I don't know if this is the correct place for this:\ndiff\n--- a/sway/tree/view.c.orig 2018-11-27 00:21:29.253717136 +0000\n+++ b/sway/tree/view.c  2018-11-27 00:22:58.728713467 +0000\n@@ -683,6 +683,9 @@\n    while (surface && wlr_surface_is_subsurface(surface)) {\n        struct wlr_subsurface *subsurface =\n            wlr_subsurface_from_wlr_surface(surface);\n+       if ( subsurface == NULL ) {\n+           break;\n+       }\n        *root_sx += subsurface->current.x;\n        *root_sy += subsurface->current.y;\n        surface = subsurface->parent;. This crashes for me with Zeal. Other applications I've tried so far (KDE's Akregator and Cantata) worked fine:\nhttps://gist.github.com/aidanharris/c87561dc14211aff0e9fcfdfe657f26d\n. This crashes for me with Zeal. Other applications I've tried so far (KDE's Akregator and Cantata) worked fine:\nhttps://gist.github.com/aidanharris/c87561dc14211aff0e9fcfdfe657f26d\n. ",
    "mathewcohle": "For future reference, I think the right way to do it is mentioned in docs now: https://github.com/swaywm/sway/wiki#keyboard-layout. ",
    "derekdreery": "Note that the default in i3 on some distros is (after a confirm dialog) to run exec i3-msg exit, but the equivalent on sway (exec swaymsg exit) will not work. You must use exit directy (without the confirm).. Note that the default in i3 on some distros is (after a confirm dialog) to run exec i3-msg exit, but the equivalent on sway (exec swaymsg exit) will not work. You must use exit directy (without the confirm).. ",
    "manonthemat": "@saih792, did you ever get your issue resolved (using ibus-daemon or by other means)?. I would love to have that feature.. ",
    "noobpurple": "I installed the \"sway\" package from the official repo. Should be the same as Arch Linux.. I told you I added the hook that already handled the setuid. I removed the caps, but the problem persists.. ",
    "narutowindy": "sway version 0.13.0\nSway.log > below link\nsway.log \n (log file not suppored to upload ??) \nsway config file. i just want to know, this issue only with me or anybody having the same issue? if not i will reinstall sway to get back to it. @SirCmpwn . i did a fresh reinstall  whole machine with Arch+official sway 0.13 packacge, when i set my URxvt to foating enabled by default,  it still spwans at the top left corner .  @SirCmpwn . do you want me to close the issue??  @SirCmpwn. @kaberc nope its not working .. .  would you consider #1229 for this 0.15 release??\nspawning in the floating mode is seems buggy ! (Not exactly buggy , but not spawing at the correct postion, that make images ,videos goes out of the screen,manually have to bring them back in to the screen).\n\"feh, mpv , Urxvt \" all seems to be not working as expected in Floating mode.  . i wish i could send you a patch, unfortunately i cant make one.. swaymsg -t get_version >\nsway socket not detected.\n06/17/17 10:29:05 - [ipc-client.c:37] Unable to connect to . log file\nsway.txt\n. Yes i can, weston working normally. nope using systemd, installed direclty from AUR, sometime reinstalled from arch main packge.. yes, after the issue, i installed from official repo, removed aur git variant. yup, still has the problem. okay, i will undo the changes and i'll let you know !!. but there is some error \n06/17/17 10:50:52 - [main.c:65] swaybg requires the compositor to support the desktop-shell extension.\n06/17/17 10:50:52 - [ipc-client.c:37] Unable to connect to /run/user/1000/sway-ipc.1000.3360.sock\n. assume : \nuser working on terminal  in workspace1 .\n bash $  >> mupdf \" file.pdf\" & ;   opens in \"workspace 4\" automatically. \n-> in \" i3 \" it is opened it as Urgent workspace and doesnt switch to it .waits for the user to switch to new workspace\n->  But in \"sway\", it switches new workspace automatically , ignoring the fact that \"user could be doing something else in the terminal. \"  we have to manually switch back to the workingspace to do my work. \nalso in sway \"workspace_auto_back_and_forth\"   doesnt work at this point of time.\n. working nicely in my machine!. ",
    "kaberc": "I think you can try to replace this:\n```\n:::::::::disable_window_borders::::::::\nfor_window [class=\"^.*\"] border pixel 0                                                                 \n new_window pixel 1                                                                                      \n new_float  normal \nin your config withdefault_border pixel 1and report here if it helped. I have simular issue\nexport XKB_DEFAULT_LAYOUT=us,ru\nexport XKB_DEFAULT_VARIANT=,winkeys\nexport XKB_DEFAULT_OPTIONS=grp:caps_toggle\n```\nAfter that caps doesn't toggle layouts. It toggles only after I press shift or alt keys. The same issue with rctrl_toggle and shifts_toggle. Maybe it's a different issue, I'll post it then.. ",
    "v0idwalker": "This conversation was glorious. \nAnyhow, firefox-nightly (60) also spaws its default browser dialogue in the top left corner. . ",
    "ng-0": "I have updated wlc to 0.0.9 and  chck to HEAD from now (5 minutes ago) and it still fails with the same error message.\nI will send this for review to our mailinglist and see if someone else can figure it out.. I have updated wlc to 0.0.9 and  chck to HEAD from now (5 minutes ago) and it still fails with the same error message.\nI will send this for review to our mailinglist and see if someone else can figure it out.. ",
    "marcoms": "Thanks for the suggestions. It would be better for users I think to have a configuration option as a single source of truth, but if there are technical limitations at the moment then that makes sense.\n@sircmpwn could something like this be considered after migrating to wlroots?. ",
    "nemanjan00": "Any progress? . Any progress? . Turns out tray is disabled by default in konversation on Arch... :)\nWorks for me. ",
    "abdelq": "@narutowindy What's the output of echo $XDG_RUNTIME_DIR?. - [ ] fr_FR: @abdelq\n  - [x] README (#1319)\n  - [ ] Man pages\n    - [ ] sway(1)\n    - [ ] sway(5)\n    - [ ] sway-bar\n    - [ ] sway-input\n    - [ ] swaymsg\n    - [ ] swaygrab\n    - [ ] swaylock\n    - [ ] sway-security\n  - [ ] FAQ. @4e554c4c Thanks for the review!. @SirCmpwn Included the help subsection and added clarification about emailing you in English.. Done.. @nlgranger, it's probably better to wait.\nAs @SirCmpwn said in #1330 \n\nI would hold off on this one, we will probably be ditching asciidoc and I don't want you to invest a lot of effort that will have to be redone.\n\nI'll still proof-read later today.. @nlgranger Some of these are just personal nitpicks, your choice to edit them or not.\nPersonnaly, I prefer being closer to the original text, when possible.. s/Specifie/Sp\u00e9cifie/. s/s'arr\u00eate/quitte/. s/Le compositeur/Compositeur/. s/----/---/. s/ et s'arr\u00eate/, puis s'arr\u00eate/. s/avec/incluant/\ns/mise au point/d\u00e9bogage/. s/le num\u00e9ro de version/la version/\ns/s'arr\u00eate/quitte/. Obtient le chemin de socket IPC et l'affiche, puis s'arr\u00eate.. s/d'effectuer le portage/de le porter/\nOr\ns/d'effectuer le portage/de le migrer/\ns/projets d'autres/projets propos\u00e9s par d'autres/\ns/tellement/si/\ns/pareil/comme i3/\nLacking consistency: de i3 or d'i3. I'm in favor of the latter.. s/bien//\ns/favori./favori, compatible avec Wayland./. s/et probablement aussi avec i3(1)/ou m\u00eame avec i3(1), probablement/. s/L' emplacement/L'emplacement/\ns/aussi et/aussi, et/\ns/essaiera/tentera/\ns/dossier/r\u00e9pertoire/\ns/qui est r\u00e9gl\u00e9 de base sur/, qui est/\ns/rien n'est disponible/rien n'est trouv\u00e9/\ns/le programme retournera une erreur/vous recevrez une erreur/. s/plus d'/de l'/. s/influencent le fonctionnement de/ont un effet sur/. s/le th\u00e8me/le nom du th\u00e8me/. s/vers le/du/. It's better to use the same author section on all manpages. Here is the one I used:\n\nMaintenu par Drew DeVault sir@cmpwn.com, assist\u00e9 par d'autres contributeurs\nopen source. Pour plus d'information sur le d\u00e9veloppement de sway, voir\nhttps://github.com/SirCmpwn/sway.. xkb, you mean?. \n\ns/sa/votre/\ns/recommand\u00e9/sugg\u00e9r\u00e9/\ns/choix puis/choix, puis/\n. ",
    "Blajda": "Will that work? If it does I'll squash the commit. ",
    "janza": "Until wlroots is ready you can use slop and imagemagick to get a screenshot of selection:\nswaygrab /tmp/sshot.png\nconvert /tmp/sshot.png -crop \"$(slop)\" /tmp/sshot.png\n\n. Until wlroots is ready you can use slop and imagemagick to get a screenshot of selection:\nswaygrab /tmp/sshot.png\nconvert /tmp/sshot.png -crop \"$(slop)\" /tmp/sshot.png\n\n. ",
    "fusion809": "Oops the link is fixed now. . Oops the link is fixed now. . Oh the reload thing only occurs with 0.14-rc2 btw, 0.13.0 for me works fine with reload. \nEDIT: Oops sorry seems I already said that in the initial issue, just forgot.. Oh the reload thing only occurs with 0.14-rc2 btw, 0.13.0 for me works fine with reload. \nEDIT: Oops sorry seems I already said that in the initial issue, just forgot.. Which files? Really am surprised more are required as to my knowledge there's only one config file to Sway ~/.config/sway/config. . Oops the config I'm using ATM is https://github.com/fusion809/sway-config/blob/archlinux/config. Sorry for wasting ya time with the wrong config. ~/.i3/i3status.py is https://github.com/fusion809/i3-configs/blob/master/.i3/i3status.py. Sorry I wasn't trying to make it difficult for ya I really just didn't realize what you were looking for, should have known that was the file. i3pystatus and pysensors were installed with pip with:\nbash\nsudo pip3 install https://github.com/enkore/i3pystatus/archive/master.tar.gz\nsudo pip3 install https://github.com/bastienleonard/pysensors/archive/master.tar.gz. Sure can, I usually start it with SDDM, might be unsupported but it works. But if I start from a terminal I get the same behaviour.. Well if upstream (for i3pystatus) ever needs to be contacted it is enkore/i3pystatus (suspect yas know, after all it was in the pip commands earlier, but just in case). I really don't know why this odd behaviour is happening.. Built wlc from master (using the wlc-git package) and retried and got this error instead:\nbash\n/home/fusion809/AUR/sway/src/sway-0.14-rc4/sway/commands/move.c: In function \u2018cmd_move\u2019:\n/home/fusion809/AUR/sway/src/sway-0.14-rc4/sway/commands/move.c:165:4: error: \u2018wlc_pointer_get_position\u2019 is deprecated [-Werror=deprecated-declarations]\n    wlc_pointer_get_position(&origin);\n    ^~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from /home/fusion809/AUR/sway/src/sway-0.14-rc4/sway/commands/move.c:3:0:\n/usr/include/wlc/wlc.h:513:6: note: declared here\n void wlc_pointer_get_position(struct wlc_point *out_position);\n      ^~~~~~~~~~~~~~~~~~~~~~~~\ncc1: all warnings being treated as errors. ",
    "wdbw": "The problem with lightdm was reported in #1159.. One can significantly reduce the size of the titlebar by setting the font size to zero:\nfont pango:DejaVu Sans Mono 0. ",
    "tragiclifestories": "Thanks guys, but to be clear, lightDM does support wayland. It is advertised as doing so on freedesktop.org, and I can find no references to the contrary being true except in closed sway issues. Indeed, in my own case, I can happily boot into Gnome with Wayland from LightDM.\nClearly, however, using display managers is not the supported happy path for sway, which is fine and up to you guys.. Thanks guys, but to be clear, lightDM does support wayland. It is advertised as doing so on freedesktop.org, and I can find no references to the contrary being true except in closed sway issues. Indeed, in my own case, I can happily boot into Gnome with Wayland from LightDM.\nClearly, however, using display managers is not the supported happy path for sway, which is fine and up to you guys.. ",
    "Armael": "Ok. Thanks for your time.. ",
    "Zer0-One": "Same issue ^\nzero-one@electron ~ $ setxkbmap -verbose -query\nTrying to build keymap using the following components:\nkeycodes:   evdev+aliases(qwerty)\ntypes:      complete\ncompat:     complete\nsymbols:    pc+us+inet(evdev)\ngeometry:   pc(pc105)\nrules:      evdev\nmodel:      pc105\nlayout:     us. @gnidorah see the wayland branch of https://github.com/michaelforney/dmenu. oh, well shoot. done. You probably don't want to avoid defining that on everything except Linux, you just want to avoid defining it on FreeBSD. And before doing that, you might want to ask the FreeBSD people about their SUSv4 compliance.. ",
    "sameer": "Looks like KDE had a similar issue and fixed it: https://bugs.kde.org/show_bug.cgi?id=377155\nI've been investigating for a bit but I can't tell if it's the same.\n. ",
    "sbwtw": "Is there any plan to solve this problem? @SirCmpwn . Is there any plan to solve this problem? @SirCmpwn . ",
    "xyproto": "I am trying to write a small utility that can change the desktop wallpaper, regardless of which windowmanager is running. The plan is to change the wallpaper according to the time of day.\nIs there a command that can be used for changing the wallpaper after Sway has started?\nFor Gnome 3 it is something along the lines of:\ngsettings set org.gnome.desktop.background picture-uri file:///$PATH_TO_FILE\n\nWhat would an equivalent command be for Sway?. Found it!\nswaymsg 'output \"*\" background $HOME/some/image.png fill'\n\nNever mind then. :). When building with -DCMAKE_C_FLAGS=\"$CFLAGS -w\" (ignoring warnings), it works.. I was using the unofficial sway-git package from AUR. Will check.. The package was (incorrectly) using the 0.15 branch. Will check again with master.. @RyanDwyer\nThe official Arch Linux package is named \"sway\" and is at version 0.15.\nThe \"-git\" packages in AUR are expected to use the latest commit from master.. Sway master works perfectly with GCC 8.1.0.. When I log into my locked computer over ssh, I see that swaylock uses 100% CPU on one of the cores. I have never had issues with swaylock not terminating, though, so I'm not sure if this is the same issue or not.\n\nArch Linux\nswaylock version 1.0-beta.1-6-ga918844e (Oct 22 2018, branch 'master'). ok, thanks. With gaps enabled, sway looks amazing. And since these options are also enabled:\n\nsmart_gaps on\nsmart_borders on\n...gaps will only appear for multiple windows per workspace, not for users with a single terminal window. I consider this to be enough \"out of the way\" for a default configuration, while still being pretty.\nThe thinking is that most sway users are pretty experienced, and will want to configure sway to their liking anyhow, while unexperienced users will appreciate good defaults that also look nice.\nIt's only the default configuration, the configuration of existing users will remain the same.. These suggested changes follows the comment format that is already present in the existing default configuration.. Just installed and tested with master.\nThe windows have stopped blinking, but the background wallpaper still blinks by briefly changing to gray before changing to the desired image.. Created a new issue for just the background switching to gray before setting the image here: https://github.com/swaywm/sway/issues/3693. Just using a commented out example for configuring gaps was suggested in #2955.. ",
    "choppa70": "1246 .",
    "lyovushka": "I guess it is correct. Still, misbehaving applicants shouldn't crash swaybar.. @4e554c4c I am afraid it does not. Swaybar still crashes. I think the problematic call is dbus_bus_has_name_owner from the function register_item in sni_watcher.c.. This one works. Swaybar does not show any icons, but also does not crush. Thanks!. ",
    "lf-": "This seems to imply that they're not implemented yet, is that correct?\nOn Jul 13, 2017 8:08 AM, \"Drew DeVault\" notifications@github.com wrote:\n\nI don't intend to support wayland-wall. We have a better strategy via\nsway-protocols https://github.com/SirCmpwn/sway-protocols that we'll\nuse to support more use-cases more elegantly when the time comes.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/1275#issuecomment-315088604, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGWDqEG0Tp74BgSUGhEtADnA4q-slGsQks5sNiTBgaJpZM4OWgFK\n.\n. Well, that represents a decently large gap in functionality. I rely on rofi\nevery day to launch applications and it effectively isn't any good on sway\nsince it doesn't focus automatically (though it might on some other\nimplementations that have wayland-wall).\n\nIs there any way of showing a dmenu like dialog with sway then? Or do I\nneed to hack something together using the IPC interface to focus any rofi\nwindow as soon as it's started?\nOn Jul 13, 2017 10:56 AM, \"Drew DeVault\" notifications@github.com wrote:\n\nCorrect.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/1275#issuecomment-315138589, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGWDqOcO55S1bbgh0KsaEEc5OiTDPXQmks5sNkxVgaJpZM4OWgFK\n.\n. Kind of. My friend who uses sway all the time added a rule to just make\nrofi always on top, which seems to do the trick. Ask @parrottq if you need\nmore details.\n\nOn Sep 2, 2017 5:21 PM, \"Thayne McCombs\" notifications@github.com wrote:\n\nI much prefer rofi to dmenu. Will wayland-native rofi (which as I\nunderstand it will use the wayland-wall protocol) work on sway?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/SirCmpwn/sway/issues/1275#issuecomment-326774574, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AGWDqBt3yOL3T4NT5gVTQOUOVAX_0OzUks5seeMNgaJpZM4OWgFK\n.\n. \n",
    "gerrard00": "For future web searchers:\nswaymsg -t get_inputs\nWill let you determine the identifier to use and:\nswaymsg input <identifier> events disabled\nwill disable the device. This is deatils in the man page discussed earlier.. ",
    "Zach-Button": "The issue only occurs with focus on mouse over, because the issue occurs when the other window is focused. The window is being focused when it shouldn't.\nSo the issue is related to \"focus on mouse over\" specifically.. Issue updated with log and version.. ",
    "LucaSpinosi": "Thank you. ",
    "tobiasblass": "I'm sorry, apparently I changed the default value of enable-tray during my debugging. This made my \"all variables on default\" test build rather pointless :-)\nIt turns out that CMake interprets set(VARIABLE) as unset(VARIABLE) (probably for some legacy reason). Setting the variable to true solves the issue.. I'm sorry, apparently I changed the default value of enable-tray during my debugging. This made my \"all variables on default\" test build rather pointless :-)\nIt turns out that CMake interprets set(VARIABLE) as unset(VARIABLE) (probably for some legacy reason). Setting the variable to true solves the issue.. ",
    "bohrshaw": "It is useful in small screens where almost every window is perferably maximized.. ",
    "RedSoxFan": "This appears to be working in both 0.15 and master.. This appears to be working fine for me in both 0.15.2 and master so I'm going to close this. If you are still having issues, feel free to reopen with a full debug log.. Duplicate of #1569. This appears to have been resolved at some point. The first is fixed by #2082\nNot sure if the second is still an issue. I'll do some testing with an xwayland client and see if I can reproduce. So the requested output can be stored in the pending state by wlroots, which can be retrieved by sway when mapping. What I'm not sure about is how to handle the view being fullscreened on a specific output.\n1. If it is not already mapped, should the view be mapped to the visible workspace on the output (ignoring focus, assigns, etc)? \n2. If it is mapped, should the view be automatically moved to the visible workspace on the output? If yes, does this need to be moved back when exiting fullscreen?. Related #3413 . I think github lets repo admins move issues between repos within an organization now. I'm not sure if anyone other than ddevault is a repo admin though.\nHowever, some issues may be better off recreated and linked to in the existing issue due to spanning multiple items.. Is this still an issue? I'm not able to reproduce it on master.. It appears that this is due to the following in sway/commands/border.c:\nc\nstruct sway_seat *seat = input_manager_current_seat(input_manager);\nif (seat->cursor) {\n    cursor_send_pointer_motion(seat->cursor, 0);\n}\nThis affects all arguments of the border command, not just toggle, and only with focus_follows_mouse yes. Additionally, it isn't necessarily the first child, it will switch focus to whatever is under the cursor.\nI'm not sure what the snippet is trying to accomplish in relation to changing the border style, otherwise I would create a PR to remove it.. A few things:\n1. In i3, the default method is --replace not --add\n2. In i3, the command is mark [--add|--replace] [--toggle] <identifier>, which allows --toggle to be used with either --add or --replace.\n   - --add --toggle keeps the list and toggles the mark. (what this PR does for --toggle)\n   - --replace --toggle clears the marks and if it the mark wasn't in the list before clearing, adds it\n3. --add and --replace are basically ignored in this implementation.\n   - --add should append (what this PR is currently doing)\n   - --replace should clear the marks before adding\n4. This implementation allows for multiple views to have the same mark. When marking, i3 removes the mark from any view that has the mark.\n5. In i3, unmark without any arguments removes all marks from ~~the view~~ all views (unless criteria is given).. @RyanDwyer \nThis is ready for another review. The views are now counted recursively for all descendants of the workspace and only counted when hide_edge_borders is set to smart.. > Since this PR changes the rendering code, please make sure all of this works with scaled and rotated outputs.\nAll modes for hide_edge_borders appear to be working with scaled and rotated outputs. Oops. I'll submit a fix for both issues. The latter is a trivial change. Not sure about the former.. If there are gaps, then the border won't be on the screen edge. I think @RyanDwyer's suggestion would work. Since gaps are not yet implemented in sway 1.0, I cannot test against gaps though.. @ggreer \nCan you please test this when you get a chance?. Are you still able to reproduce this? I think this might have been fixed sometime in the last ~10 months.. > > wlr_render_rect has an issue with lighter colors not blending\n\nI'm confused. Shouldn't that mean the fix should be made in wlroots?\n\nSorry. Let me clarify, the resulting render (using the formulas in my original post) for wlr_render_rect has an issue with lighter colors not blending. As emersion pointed out, wlroots assumes pre-multiplied alpha for textures and colors, this PR applies the that to the colors passed to wlr_render_rect so we achieve the same result as wlr_render_texture (which already has the premultiplied alpha applied by cairo). The only difference is that we pass con->alpha to the shader for wlr_render_texture, but not wlr_render_rect so I applied it to the colors passed wlr_render_rect.. Looks good for hide_edge_borders both and position bottom.\nWith hide_edge_borders both and swaybar with position top, the top border still renders with border pixel (it should with border normal, which ignores view->border_top). If you want, that could be lumped in with this PR. If not, I'll create a follow up PR. It's basically the same concept. Just changing the y check from 0 to ws->y. I guess view->border_left and view->border_right should be changed to check against ws->x and ws->x + ws->width as well. I'm not sure if it is possible to test with a left/right sidebar currently or not.\nAlso as an aside, sorry for some reason I thought i3 showed borders against bars in my original PR for hide_edge_borders. Apparently, I missed a lot when testing that PR.. @martinetd Thanks for the information\nLooks good for both top and bottom now\n. The only issue that I've noticed so far is that you cannot move a container out of the stack in either vertical direction. It will only move up and down the stack and stop when hitting the bounds. It appears tabs have the same issue in the horizontal direction. \nIf you have multiple outputs, moving a container out of the stack/tabs in the direction of the other output does move it out, but to the other output. To match i3, you should be able to move containers out of stacks/tabs and create a split on a single output (then if you move again, it will move to another outputs, if possible).. > https://i3wm.org/docs/ipc.html#_marks_reply\n\nI'm not sure what this means. Can I see a sample GET_MARKS response from i3?\n\nI just ran this with two terminals open in a horizontal split:\n```sh\n\ni3-msg \"mark one, focus right, mark two, mark --add three, focus left\"\n[{\"success\":true},{\"success\":true},{\"success\":true},{\"success\":true}]\ni3-msg -t get_marks\n[\"one\", \"two\", \"three\"]\n``. I found a couple more issues:\n1. If youfullscreen enablea floating view and thenfullscreen disable` it, the position and geometry are not restored and the view remains to cover the entire output.\n2. When you focus a sticky view, whatever workspace the view was made sticky on is switched to. I think this is ready for review.\n\nI'd prefer the workspace not to switch at all on swap. However, I was not able to figure out why container_insert_child was resulting in the workspace switching when the insert was on a hidden workspace.  Maybe someone else will be able to shed some light on it. Currently, the visible workspaces and prev_workspace_name are restored after the swap.. > Is the behavior of your current patch different from i3's behavior? If so that still needs to be addressed. I guess I can take a crack at debugging it if you're lost.\nI'll take a look to see at the IPC events that i3 sends. The end result should be the same, but there may be some intermediate workspace change events generated by this patch. Ya. This patch generates either two or four workspace::focus events (2, if at least one container visible. 4, if both are hidden). i3 does not generate any workspace::focus events during a swap.\nThis should produce the same end result, there is just some noise in the IPC events. I'm not sure if it is worth worrying over or not. In either case, I have tried to modify the code to make it so the workspace does not change when inserting a child, but failed. I would not be surprised if it is simple and I just don't have a good enough handle on the codebase yet.. Actually, it appears that move container to workspace <name> generates workspace::focus events as well. If it is decided that intermediate IPC events are an issue, then that is something for another PR since it is out of the scope of this one.. On the first line of the description, you have xdg_shell. The underscore needs to be escaped to make it xdg\\_shell.. > This removes the need for the compositor to (re-)spawn or kill swaybg when an output is hotplugged or when the config is updated\nIf swaybg doesn't get (re-)spawned when the output config changes, wouldn't that require an IPC protocol or a wallpaper wayland protocol to obtain the change?. > Nah, it's just that the bar isn't updated. If you disconnect, then switch to another workspace, the moved workspace appears on the bar.\nOh so a missing IPC event. That should be trivial to resolve then. I'll see what the correct IPC event is and submit a PR after this one is merged.. With this PR, reload and exit are not executing for me while unlocked. Example bindings:\nbindsym Mod4+Shift+c reload\nbindsym Mod4+Shift+e exit\nOther commands like exec, focus, move, layout, etc are working though.. > - Have focus_wrapping force in your config\n\n\nCreate the layout H[view, V[view, view focused]]\nmove left\nObserve focus has to changed to the left view\nShouldn't it not change in this case? The i3 docs suggest I would have to run focus parent then focus left.\n\n\nI just checked i3 and it does focus the left view. If you have H[view, V[view, H[view focused, view]]], it does not. It appears that force only has an effect when there is another view in the direction (or it's inverse) in that container. So you can focus left/right for L_VERT/L_STACKED and focus up/down for L_HORIZ/L_TABBED even with focus_wrapping force.\n\nI'm all for dropping legacy syntax by the way.\n\nSounds good to me. With workspace_layout stacking or workspace_layout tabbed in the config, sway crashes on launch\n```\nAddressSanitizer:DEADLYSIGNAL\n=================================================================\n==7481==ERROR: AddressSanitizer: SEGV on unknown address 0x000000000020 (pc 0x563bc913d8e0 bp 0x7ffc7e7d6db0 sp 0x7ffc7e7d6d50 T0)\n==7481==The signal is caused by a READ memory access.\n==7481==Hint: address points to the zero page.\n    #0 0x563bc913d8df in popup_at_container ../sway/tree/container.c:670\n    #1 0x563bc913d9db in popup_at_container ../sway/tree/container.c:677\n    #2 0x563bc913dc7c in popup_at ../sway/tree/container.c:707\n    #3 0x563bc910c7e0 in container_at_coords ../sway/input/cursor.c:111\n    #4 0x563bc910cdfa in cursor_send_pointer_motion ../sway/input/cursor.c:152\n    #5 0x563bc910db4d in handle_cursor_motion_absolute ../sway/input/cursor.c:230\n    #6 0x7f01de95310f in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #7 0x7f01de9233f9 in handle_pointer_motion_absolute ../subprojects/wlroots/types/wlr_cursor.c:402\n    #8 0x7f01de95310f in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #9 0x7f01de8e9a8d in x11_handle_pointer_position ../subprojects/wlroots/backend/x11/input_device.c:41\n    #10 0x7f01de8eac65 in update_x11_pointer_position ../subprojects/wlroots/backend/x11/input_device.c:176\n    #11 0x7f01de8ec416 in handle_x11_configure_notify ../subprojects/wlroots/backend/x11/output.c:186\n    #12 0x7f01de8e7eb5 in handle_x11_event ../subprojects/wlroots/backend/x11/backend.c:56\n    #13 0x7f01de8e8040 in x11_event ../subprojects/wlroots/backend/x11/backend.c:84\n    #14 0x7f01dca62a41 in wl_event_loop_dispatch (/usr/lib/libwayland-server.so.0+0x9a41)\n    #15 0x7f01dca6114b in wl_display_run (/usr/lib/libwayland-server.so.0+0x814b)\n    #16 0x563bc90dc9d4 in server_run ../sway/server.c:126\n    #17 0x563bc90dbaf5 in main ../sway/main.c:428\n    #18 0x7f01dc27406a in __libc_start_main (/usr/lib/libc.so.6+0x2306a)\n    #19 0x563bc90d9cb9 in _start (/home/brian/programming/forks/sway/build/sway/sway+0x27cb9)\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV ../sway/tree/container.c:670 in popup_at_container\n```. I'm also not getting any popups for xwayland clients.. All items listed above are now implemented. @RyanDwyer Can you try again? Should be fixed now. > Create layout H[view, T[view focused, view]] and run move left. The result is, believe it or not, H[view, H[view, H[view]]] and the inner-most view itself has layout=tabbed.\nThe layout was actually correct. It was actually the IPC that was returning the wrong layout.. > I don't understand that IPC code. Why does it show the parent's layout instead of the current node's layout? And if it is supposed to show the parent's layout, why doesn't it do it if the parent is the workspace?\nI have no idea. I'm actually just as confused now.\n\ni3 just shows the current node's layout directly: https://github.com/i3/i3/blob/26f50898fd72c22a27e5b12db83808161bc3d9cd/src/ipc.c#L327\n\nI changed it to match that. I'm not noticing any issues\n\nSorry that this is diverging a bit.\n\nHonestly, I'm completely fine with that. Having correct IPC information is extremely useful for debugging/testing PRs like this one. I wouldn't have included the commits in this PR if I felt it was out of the scope.. > Why not just render the fullscreen view with a constant instead?\nCurrently the same function is called (render_view_surfaces) for any view (fullscreen or not). If preferred, I can alter the signature to take an alpha value instead of reading it from the passed view. I think this is ready for review.. > I was able to trigger an infinite loop of peek_line with this config:\nShould be fixed. Forgot to set line to NULL at EOF when I switched to using getline. @martinetd Can you please verify this fixes the issue you submitted?. > I get another segfault further down, no exact reproducer as I just moved windows around randomly for a while - happy to merge this first and open this in a new issue.\nBased on that trace, it appears to be a separate issue at a surface level. Without reproduction steps or even a debug log, it will probably be hard to determine the issue, but I'll take a look. Either way, I would recommend opening a new issue.. Rebased and ready for review. Oops. I guess this is more complicated then I thought. I'll go through each command and see what needs to be expanded at config time and what can wait until runtime.. Ok. I think this is ready for another round of review.\nI've assigned each handler a bool that determines whether it should wait until runtime to expand variables. I set every command with subcommands to expand a runtime so that the decision is passed on to the subcommands. For identifiers in the block itself, there are if (config->reading) { //expand } checks just like for <key combo> in bindsym and bindcode.\nAdditionally, since starting workspace names are generated off of bindings for workspace commands, I have it expand there as well.. > This seems kind of silly. What if we just let you escape $\n\nbindsym $mod+Return exec $$term\n\nWorks for me. I'll update the PR. This has been switched to sircmpwn's suggestion of using $$. > I've tried doing this:\n\nswaymsg set '$term' xterm\nswaymsg exec '$$term'\nBut it's not expanding $$term. Am I doing something wrong?\n\nYou only need to use $$term in the config file. For swaymsg, just use $term.\n\nCan you give a few usage examples?\n\nConfig File:\nset $mod Mod4\nset $term termite\nbindsym $mod+Return exec $$term\nbindsym $mod+Shift+Return exec $term\n\nPress Mod4+Return. termite should launch\nPress Mod4+Shift+Return. termite should launch\nRun swaymsg exec '$term'. termite should launch\nRun swaymsg set '$term' xterm\nPress Mod4+Return. xterm should launch\nPress Mod4+Shift+Return. termite should launch. ($term was expanded to termite when reading the config so changing $term has no effect)\nRun swaymsg exec '$term'. xterm should launch. Rebased and ready for review. > Build fails because of an outdated pacman flag.\n\nActually, it's a pacman bug: https://lists.archlinux.org/pipermail/pacman-dev/2018-June/022561.html. @martinetd Can you please confirm this fixes all three issues?. > I still have a variant of my 2nd bug with initial config (default_orientation vertical + workspace_layout stacking) ; moving the window right now works but leaves the focus on the empty initial workspace. moving right again crashes with the same sway assert as 2nd.\n\n2nd still happens just the same, so no need of any special config to reproduce now at least it's coherent :)\n\nUnfortunately, I am unable to reproduce the focusing issue. Also, I'm a little confused by the trace you gave for that one:\n```\n0 0x469444 in _sway_assert ../common/log.c:27\n1 0x452919 in arrange_children_of ../sway/tree/arrange.c:205\n2 0x45e414 in container_move ../sway/tree/layout.c:542\n```\nIn master, sway/tree/layout.c:542 is not a call to arrange_children_of.. Nevermind. I read that as 524 which was the same line as the first trace. My fault.. > Yeah probably. I was just thinking this PR is somewhat related to that goal.\nI have no problems restoring workspaces to their previous output when plugging a monitor back in, but I'd rather have it as a follow up PR. > Looks OK besides these two comments. I think a wl_list would be better suited instead of a list_t, but it's no big deal.\nAddressed the two comments. As for wl_list, I'm not too familiar with wl_list. In what way(s) is it better suited for this than list_t?\n. > You don't need to allocate a list, you don't need to search the element in the list when removing it. Basically wl_list are linked lists and list_t is an array.\nThanks for the explanation and example. I agree that wl_list would be better. I'll update the PR.. Updated the PR to use wl_list instead of list_t.. This has been rebased and is ready for review. > Not a fan of this approach. I'd rather have each workspace just keep a track of the outputs it has been on in a list of priority. That way, you can remove N (where N>1) monitors and plug them back in and have everything as it was.\nSounds good to me. I'll update the PR. I'll need some help testing the implementation for that approach though since I only have two monitors.. > I found a problem. Create layout H[view, view focused] then run splitv. The indicator bar appears at the bottom as expected. Then create a new view. It appears horizontally. The final representation is H[view, V[view], view]\nShould be fixed now. Just for reference, how are you compiling? I'm not able to reproduce the errors. Duplicate of #2111. @martinetd Are you still able to reproduce the second crash? If so, would you be able to provide a current trace?. I tried to look into this. mupdf is working as expected in sway 0.15.2. However it does not work in rootston either, which suggests this is either a wlroots issue or an issue in both rootston and sway.\nLooking at WAYLAND_DEBUG=1 for rootston and sway master, the key events are being emitted. However when I attach xev to the window id, there are no keyboard events received (mouse events are being received). I'm not noticing any obvious differences in the output of WAYLAND_DEBUG=1 for sway 0.15.2, where it is working.. Thanks!. I changed the config flag handling to use a small getopt_long block to allow for -C/path/to/config and --config=/path/to/config (and possibly even others) to be handled correctly.. > Should we have something similar for swaybg?\nSounds good to me. I think it makes sense to wait for your swaybg refactor PR (#2239) to be merged first. Or if you want to include it in that PR, that would be fine too.. 1. Splitting is working again after your last commit (woot)\n2. I can't seem to get urgent enable to work for any floating view (it works fine for tiling)\n3. If you close a view without focusing it while it's urgency flag is set, the workspace retains the urgent flag.\n4. Should urgent deny be extended to prevent urgent enable or even something like urgent block added as a stricter option?\n5. Should the urgency flag be propagated upwards for nested containers? I'd have to check i3's behavior on this. > > 5. Should the urgency flag be propagated upwards for nested containers? I'd have to check i3's behavior on this\n\nI can't check this right now, so I'll either wait for your response or I'll check it later.\n\nYes, i3 does propagate the urgent flag up the tree.\n--\nAside from the urgency propagation, this LGTM. . Just needs the urgent border colors set when there is an urgent descendant and this should be good. Can you please rebase and force push? I'd rather not have two consecutive Merge branch 'master' into resolve-workspace-name-todo commits.. Thanks!. Thanks!. This appears to be one of the many issues with output *. I am able to replicate this consistently when an output * command is given before (or given without) output <name> commands. When the output <name> commands are first, I cannot replicate at all.. Can you post your config?. Closed by #2330. Thanks!. ~Sorry if I wasn't clear in my description of i3's behavior for force_display_urgent_timeout 0. I meant the urgent state is cleared immediately after switching to the workspace. Currently this is clearing it immediately without the workspace switching~ Nevermind. I guess my build just got messed up. It's working as expected now.. Thanks!. @jniedrauer If you get a chance, can you please confirm that this fixes #2293? I'm unable to replicate it on this branch.. > A little late, but yes. I've confirmed that I am no longer able to reproduce the issue.\nThanks for confirming.. Use the following:\nstatus_command while date; do sleep 1; done\nThe status_command is executed only once and should be a stream of output. Using just date outputs one line of text and then closes the output stream (thus there is nothing to read from).. Since the implementation is not restricted to startup, you could change the man page to Enables or disables CapsLock/NumLock. The default on startup is disabled/enabled.. I think the runtime portion of this can be added to the keyboard part of #1779 . > I can't add a subcommand of input to the config_commands list. I'll mark this as WIP and keep on thinking, maybe I'll get a good idea.\nSee https://github.com/swaywm/sway/blob/master/sway/commands/bar.c#L38 and\nhttps://github.com/swaywm/sway/blob/master/sway/commands/bar.c#L49. Thanks!. > Should the title of this just be \"Resize tiled windows interactively\"?\nI think it is correct as is.\n\nCan you actually move/rearrange tiled windows in i3 by dragging the title bar?\n\nNot currently, but there is an open PR (https://github.com/i3/i3/pull/3085).. > What about set_from_resource?\nset_from_resource loads a value from the X resource database. Sway does not use the X resource database and there is not a Wayland equivalent.. > I was using set_from_resource $user echo \"$USER\" which actually work for getting your username into i3 config to write multi-user configs. It also works for reading any other env variable.\nYou can just replace it with set $user $USER (or better yet, just replace all instances of $user with $USER). See https://www.reddit.com/r/i3wm/comments/4zq30r/is_there_a_way_to_use_bash_environmental/d6y50tt/\n\nIs there another way to read env variables in sway config?\n\nNo, there is no way to read an environment variable's value into a sway variable. > set $<name> <value> doesn't work inside mode <name> {} blocks, which doesn't match i3's behavior.\n\nIs that a bug, an intentional divergence, or an oversight?\n\nI think this is an oversight since they don't really have any relation to modes since they are not scoped. I'll submit a PR to allow it  -- Submitted as #3940 \n\nsway could just interpret set_from_resource commands including <fallback> args as set $<name> <value (fallback)>\n\nI have no problem submitting a PR to add this for i3 compatibility and just documenting that the fallback is always used and the command only exists for compatibility with i3 configs. @ddevault @emersion any objections?. Thanks!. Thanks!. - > When I use floating toggle on a floating container's child, the child is removed from its siblings and floats on its own. I would have expected this to reach up to the top-most floating parent container and tile that instead.\nI think it would make sense to apply the same logic to adding to the scratchpad. \n\nfocus mode_toggle is not working for me with floating containers. It works fine with floating views.. I got the following by floating a split container and then running floating toggle on one of the views while there are no tiled views (it works when there are tiled views in the workspace).\n```\n==8907==ERROR: AddressSanitizer: SEGV on unknown address 0x0000000000c8 (pc 0x561e295e835e bp 0\nx7ffc799de920 sp 0x7ffc799de910 T0)\n==8907==The signal is caused by a READ memory access.\n==8907==Hint: address points to the zero page.\n    #0 0x561e295e835d in arrange_windows ../sway/tree/arrange.c:281\n    #1 0x561e295c6f05 in cmd_floating ../sway/commands/floating.c:55\n    #2 0x561e29574cf8 in execute_command ../sway/commands.c:299\n    #3 0x561e295c45d2 in seat_execute_command ../sway/commands/bind.c:279\n    #4 0x561e295b89ac in handle_keyboard_key ../sway/input/keyboard.c:280\n    #5 0x7f2becf6c999 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #6 0x7f2becf373d8 in wlr_keyboard_notify_key ../subprojects/wlroots/types/wlr_keyboard.c:10\n7\n    #7 0x7f2becedbb68 in handle_keyboard_key ../subprojects/wlroots/backend/libinput/keyboard.c\n:73\n    #8 0x7f2becedb514 in handle_libinput_event ../subprojects/wlroots/backend/libinput/events.c\n:213\n    #9 0x7f2beced9b62 in handle_libinput_readable ../subprojects/wlroots/backend/libinput/backe\nnd.c:35\n    #10 0x7f2beb05da41 in wl_event_loop_dispatch (/home/brian/programming/forks/sway/build/sway\n/../../../../../../../lib64/libwayland-server.so.0+0x9a41)\n    #11 0x7f2beb05c14b in wl_display_run (/home/brian/programming/forks/sway/build/sway/../../.\n./../../../../lib64/libwayland-server.so.0+0x814b)\n    #12 0x561e29573227 in server_run ../sway/server.c:159\n    #13 0x561e29572051 in main ../sway/main.c:455\n    #14 0x7f2bea64606a in __libc_start_main (/home/brian/programming/forks/sway/build/sway/../.\n./../../../../../lib64/libc.so.6+0x2306a)\n    #15 0x561e2956fef9 in _start (/home/brian/programming/forks/sway/build/sway/sway+0x2cef9)\n\nAddressSanitizer can not provide additional info.\nSUMMARY: AddressSanitizer: SEGV ../sway/tree/arrange.c:281 in arrange_windows\n==8907==ABORTING\n```. Also, when a floating container is added to the scratchpad and shown, the whole container is focused. I think it would be better if the focus inactive view/container became focused. When using mod+resize on a floating container, I get the following:\n```\n==15101==ERROR: AddressSanitizer: heap-use-after-free on address 0x6110003443cc at pc 0x56188ecbd4f7 bp 0x7ffd02b51ee0 sp 0x7ffd02b51ed0\nREAD of size 1 at 0x6110003443cc thread T0\n    #0 0x56188ecbd4f6 in set_instructions_ready ../sway/desktop/transaction.c:366\n    #1 0x56188ecbd694 in transaction_notify_view_ready ../sway/desktop/transaction.c:377\n    #2 0x56188ecc1823 in handle_commit ../sway/desktop/xdg_shell.c:225\n    #3 0x7f39a4a43999 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #4 0x7f39a4a2ab86 in surface_commit_pending ../subprojects/wlroots/types/wlr_surface.c:397\n    #5 0x7f39a4a2b09a in surface_commit ../subprojects/wlroots/types/wlr_surface.c:466\n    #6 0x7f399db881c7 in ffi_call_unix64 (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libffi.so.6+0x61c7)\n    #7 0x7f399db87c29 in ffi_call (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libffi.so.6+0x5c29)\n    #8 0x7f39a2b36a2e  (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0+0xba2e)\n    #9 0x7f39a2b32f28  (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0+0x7f28)\n    #10 0x7f39a2b34a41 in wl_event_loop_dispatch (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0+0x9a41)\n    #11 0x7f39a2b3314b in wl_display_run (/home/brian/programming/forks/sway/build/sway/../../.\n./../../../../lib64/libwayland-server.so.0+0x814b)\n    #12 0x56188ec91227 in server_run ../sway/server.c:159\n    #13 0x56188ec90051 in main ../sway/main.c:455\n    #14 0x7f39a211d06a in __libc_start_main (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libc.so.6+0x2306a)\n    #15 0x56188ec8def9 in _start (/home/brian/programming/forks/sway/build/sway/sway+0x2cef9)\n0x6110003443cc is located 204 bytes inside of 208-byte region [0x611000344300,0x6110003443d0)\nfreed by thread T0 here:\n    #0 0x7f39a4da69b1 in __interceptor_free /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:66\n    #1 0x56188ecba7a7 in transaction_destroy ../sway/desktop/transaction.c:96\n    #2 0x56188ecbc2c6 in transaction_progress_queue ../sway/desktop/transaction.c:232\n    #3 0x56188ecbd39e in set_instruction_ready ../sway/desktop/transaction.c:353\n    #4 0x56188ecbd514 in set_instructions_ready ../sway/desktop/transaction.c:367\n    #5 0x56188ecbd694 in transaction_notify_view_ready ../sway/desktop/transaction.c:377\n    #6 0x56188ecc1823 in handle_commit ../sway/desktop/xdg_shell.c:225\n    #7 0x7f39a4a43999 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #8 0x7f39a4a2ab86 in surface_commit_pending ../subprojects/wlroots/types/wlr_surface.c:397\n    #9 0x7f39a4a2b09a in surface_commit ../subprojects/wlroots/types/wlr_surface.c:466\n    #10 0x7f399db881c7 in ffi_call_unix64 (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libffi.so.6+0x61c7)\npreviously allocated by thread T0 here:\n    #0 0x7f39a4da6fc1 in __interceptor_calloc /build/gcc/src/gcc/libsanitizer/asan/asan_malloc_linux.cc:95\n    #1 0x56188ecbb570 in transaction_add_container ../sway/desktop/transaction.c:154\n    #2 0x56188ecbdccd in transaction_commit_dirty ../sway/desktop/transaction.c:415\n    #3 0x56188eccfc2b in handle_cursor_motion ../sway/input/cursor.c:415\n    #4 0x7f39a4a43999 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #5 0x7f39a4a0770b in handle_pointer_motion ../subprojects/wlroots/types/wlr_cursor.c:330\n    #6 0x7f39a4a43999 in wlr_signal_emit_safe ../subprojects/wlroots/util/signal.c:29\n    #7 0x7f39a49b2f5d in handle_pointer_motion ../subprojects/wlroots/backend/libinput/pointer.c:39\n    #8 0x7f39a49b252c in handle_libinput_event ../subprojects/wlroots/backend/libinput/events.c:216\n    #9 0x7f39a49b0b62 in handle_libinput_readable ../subprojects/wlroots/backend/libinput/backend.c:35\n    #10 0x7f39a2b34a41 in wl_event_loop_dispatch (/home/brian/programming/forks/sway/build/sway/../../../../../../../lib64/libwayland-server.so.0+0x9a41)\n    #11 0x6290000a51ff  ()\n```. >  I also think that instead of using -l we should pipe the extended details into stdin, because specifying multi-line command line args is annoying.\nThat should already be working. Just use -l -\n(ex. echo -e \"Line1\\nLine2\" | swaynagbar -m Message -l -)\n--\nI'll push changes for the rest of the comments in a few minutes.. >  I also think that instead of using -l we should pipe the extended details into stdin, because specifying multi-line command line args is annoying.\nThat should already be working. Just use -l -\n(ex. echo -e \"Line1\\nLine2\" | swaynagbar -m Message -l -)\n--\nI'll push changes for the rest of the comments in a few minutes.. > I don't think we should treat an arg as a file descriptor OR a literal string. It should be XOR.\nOk. I'll remove the argument from the flag and if the flag is given, just read from stdin.. > I don't think we should treat an arg as a file descriptor OR a literal string. It should be XOR.\nOk. I'll remove the argument from the flag and if the flag is given, just read from stdin.. > I don't think this should apply an exclusive zone.\nI personally prefer it with the exclusive zone. If we have errors displaying in the detailed box, it's easy to open an editor in the available space. Without setting it as exclusive, you would have to manipulate the layout to see your editor and the detailed message.\nI could make it a flag that can be decided by the use case. I'm also considering a follow-up with a config file for user preferences like default font, default output, and default edge. I guess that could have a default user preference as well.. > I don't think this should apply an exclusive zone.\nI personally prefer it with the exclusive zone. If we have errors displaying in the detailed box, it's easy to open an editor in the available space. Without setting it as exclusive, you would have to manipulate the layout to see your editor and the detailed message.\nI could make it a flag that can be decided by the use case. I'm also considering a follow-up with a config file for user preferences like default font, default output, and default edge. I guess that could have a default user preference as well.. >We should also probably limit the maximum height of the details\nCurrently the maximum height of swaynag as a whole is hard coded to 500px.\n\nlet the user scroll with the mouse wheel.\n\nThat should be working right now. >We should also probably limit the maximum height of the details\nCurrently the maximum height of swaynag as a whole is hard coded to 500px.\n\nlet the user scroll with the mouse wheel.\n\nThat should be working right now. > Needs hidpi support\nWhat do I need to do for that?\n\n./swaynag/swaynag -dm 'There are errors in your config file!' -b 'Exit sway' 'swaymsg exit' -b 'Reload config' 'swaymsg reload' -l < some-file\n2018-07-28 09:52:38 - [swaynag/nagbar.c:57] $TERMINAL not found. Running directly\n/bin/sh: -c: option requires an argument\n\nBoth should be working now\n\nOh I guess -b is done that way for i3 backwards compatability. Meh.\n\nCorrect\n\nConfig should be moved into a separate file from main.c\n\nDone\n\n[error]\nfont=pango:IPAGothic 10, DejaVu Sans Mono 9\n\nCurrently, only colors can be set per type. I'm working on allowing other option defaults per type.. > Needs hidpi support\nWhat do I need to do for that?\n\n./swaynag/swaynag -dm 'There are errors in your config file!' -b 'Exit sway' 'swaymsg exit' -b 'Reload config' 'swaymsg reload' -l < some-file\n2018-07-28 09:52:38 - [swaynag/nagbar.c:57] $TERMINAL not found. Running directly\n/bin/sh: -c: option requires an argument\n\nBoth should be working now\n\nOh I guess -b is done that way for i3 backwards compatability. Meh.\n\nCorrect\n\nConfig should be moved into a separate file from main.c\n\nDone\n\n[error]\nfont=pango:IPAGothic 10, DejaVu Sans Mono 9\n\nCurrently, only colors can be set per type. I'm working on allowing other option defaults per type.. > Currently, only colors can be set per type. I'm working on allowing other option defaults per type.\nThe config now allows for per-type defaults to be defined for font, edge, output, and several sizing options. Additionally, all color and sizing options can also be given as command line arguments. The order of preference for options is command line argument value, per-type config default, global config default, and finally swaynag default.. > I dug into this a little bit, the way you handle outputs needs to be reworked. You should stash some state about each of them and wait until surface_enter is sent to apply a scale factor for the relevant output.\nI think this should be fixed now.\nAlso, I think this PR is ready for another round of review. . > On a hidpi display the cursor is lowdpi.\nThis should be fixed. I was using swaybar as a reference and apparently a PR needs to be opened to support hidpi cursors in swaybar.\n\nswaynag -h segfaults\n\nShould be fixed now.\n\nIf I only specify one color in a config for a new type, the rest of the values should probably be sane (I only set background)\n\nAny color not set will now fallback to the default color for the error type.. > Hmm, swaybar supports HiDPI cursors just fine...\nCorrection: swaybar does not update cursor scale when the output scale changes.\n\nI'm not sure that makes sense, what do you think about coming up with a fallback color scheme which looks like swaybar's defaults?\n\nSure. I just used the error colors since that's the default type. > Hmm, swaybar supports HiDPI cursors just fine...\nCorrection: swaybar does not update cursor scale when the output scale changes.\n\nI'm not sure that makes sense, what do you think about coming up with a fallback color scheme which looks like swaybar's defaults?\n\nSure. I just used the error colors since that's the default type. Thanks!. Thanks!. Thanks!. Thanks!. Just needs the long lines split and then it will LGTM.. Just needs the long lines split and then it will LGTM.. Duplicate of #1266. Duplicate of #1266. This looks good for resizing floating xdg-shell views.\nI'm not sure if it is in the scope of this PR, but there are still artifacts when resizing floating containers with at least one xdg-shell view. It looks like it's only happening when resizing using one of the left corners and doesn't matter what the layout is.. This looks good for resizing floating xdg-shell views.\nI'm not sure if it is in the scope of this PR, but there are still artifacts when resizing floating containers with at least one xdg-shell view. It looks like it's only happening when resizing using one of the left corners and doesn't matter what the layout is.. > Rather than build up a list of errors in memory, I think we should spawn swaynag on the first error, leave the file descriptor open, and write all of the errors into it as we encounter them. Then when we're done reading the config we can close the fd and swaynag will display.\nDone. In the process, I also made it so that swaynag can be called in a generic way for anything that gets added in the future. Additionally, I added a swaynag_command config directive that is used as a base.. > Rather than build up a list of errors in memory, I think we should spawn swaynag on the first error, leave the file descriptor open, and write all of the errors into it as we encounter them. Then when we're done reading the config we can close the fd and swaynag will display.\nDone. In the process, I also made it so that swaynag can be called in a generic way for anything that gets added in the future. Additionally, I added a swaynag_command config directive that is used as a base.. Thanks!. Thanks!. > Can you clarify why seat_get_active_child doesn't work? That should return the most recently active direct child of the given container - ie. the active workspace.\nWhen moving the sticky container to the next workspace, the ancestors are not always being added to the focus stack. I'm looking into the exact situation now, but if (all on one output) you:\n- open a view in workspace 1\n- open another view and make it sticky\n- switch to workspace 2\n- switch to workspace 3\nthe sticky view is gone. Workspace 2 was never added to the focus stack so it checks against workspace 1 (the only workspace in the focus stack).. > Can you clarify why seat_get_active_child doesn't work? That should return the most recently active direct child of the given container - ie. the active workspace.\nWhen moving the sticky container to the next workspace, the ancestors are not always being added to the focus stack. I'm looking into the exact situation now, but if (all on one output) you:\n- open a view in workspace 1\n- open another view and make it sticky\n- switch to workspace 2\n- switch to workspace 3\nthe sticky view is gone. Workspace 2 was never added to the focus stack so it checks against workspace 1 (the only workspace in the focus stack).. > When moving the sticky container to the next workspace, the ancestors are not always being added to the focus stack\nIf one of the sticky containers had focus, the workspace was never being added to the focus stack. This is fixed by removing focus from the focused sticky container and then setting the focus back after moving it.. > When moving the sticky container to the next workspace, the ancestors are not always being added to the focus stack\nIf one of the sticky containers had focus, the workspace was never being added to the focus stack. This is fixed by removing focus from the focused sticky container and then setting the focus back after moving it.. Thanks!. Thanks!. The code is in place to do so and It is working fine for me.\nDo you get two swaynag instances if you reload with errors still in the config?. The code is in place to do so and It is working fine for me.\nDo you get two swaynag instances if you reload with errors still in the config?. > No, that works.\nWeird. It kills swaynag before reading anything from the config.\n\nNew problem: having errors in your config and starting sway doesn't show swaynag.\n\nIs swaynag in your path or are you setting swaynag_command?. > No, that works.\nWeird. It kills swaynag before reading anything from the config.\n\nNew problem: having errors in your config and starting sway doesn't show swaynag.\n\nIs swaynag in your path or are you setting swaynag_command?. Are you still having issues with swaynag not starting or dismissing correctly?. Are you still having issues with swaynag not starting or dismissing correctly?. Thanks!. Thanks!. Thanks!. Thanks!. > If there is a floating view/container over a tiled one, the tiled one gets the resize event instead of the floating one.\n\nOpen two views in a spltith\nOpen a third view.\nFloat it\nCreate a splitv\nOpen another view in the floating container\nUsing floating_mod + right click, try to change the height of the third and fourth views at their split\n\n\nIt's no longer possible to resize a floating container.\n\nResizing a floating view is working fine. I cannot resize any floating container though.. > If there is a floating view/container over a tiled one, the tiled one gets the resize event instead of the floating one.\n\nOpen two views in a spltith\nOpen a third view.\nFloat it\nCreate a splitv\nOpen another view in the floating container\nUsing floating_mod + right click, try to change the height of the third and fourth views at their split\n\n\nIt's no longer possible to resize a floating container.\n\nResizing a floating view is working fine. I cannot resize any floating container though.. Thanks!. Thanks!. > OK, so RVS does work (via config.c, line 761, the $$ approach just mentioned)\nTry the following steps: https://github.com/swaywm/sway/pull/2084#issuecomment-395218464\nIf the config contains:\nset $mod Mod4\nset $term termite\nbindsym $mod+Return exec bind $$term\nWhat is happening is:\n- config_command calls cmd_bind with the binding expanded to bindsym Mod4+Return exec $term\n- cmd_bind calls parse_command which expands exec $term to exec termite\n- If you change $term via swaymsg set \\$term any-other-terminal, it will still have the binding stored as exec termite. > OK, so RVS does work (via config.c, line 761, the $$ approach just mentioned)\nTry the following steps: https://github.com/swaywm/sway/pull/2084#issuecomment-395218464\nIf the config contains:\nset $mod Mod4\nset $term termite\nbindsym $mod+Return exec bind $$term\nWhat is happening is:\n- config_command calls cmd_bind with the binding expanded to bindsym Mod4+Return exec $term\n- cmd_bind calls parse_command which expands exec $term to exec termite\n- If you change $term via swaymsg set \\$term any-other-terminal, it will still have the binding stored as exec termite. > arrange_children_of (now arrange_children) would check if the parent had gaps and would copy them to the child, effectively making the workspace's gaps recurse into all children. We can't do this any more without passing has_gaps, gaps_inner and gaps_outer as arguments to arrange_children, so I've changed the add_gaps function to retrieve it from the workspace directly.\nI don't personally use gaps so I could be misunderstanding something, but this doesn't sound right to me. The gaps appear to only be copied from the parent to the child if the child does not have gaps and the parent does. Since it looks like it is possible to override gaps on a per container/view basis, wouldn't it be possible that the gaps at the workspace-level are not the correct gaps to apply?. > arrange_children_of (now arrange_children) would check if the parent had gaps and would copy them to the child, effectively making the workspace's gaps recurse into all children. We can't do this any more without passing has_gaps, gaps_inner and gaps_outer as arguments to arrange_children, so I've changed the add_gaps function to retrieve it from the workspace directly.\nI don't personally use gaps so I could be misunderstanding something, but this doesn't sound right to me. The gaps appear to only be copied from the parent to the child if the child does not have gaps and the parent does. Since it looks like it is possible to override gaps on a per container/view basis, wouldn't it be possible that the gaps at the workspace-level are not the correct gaps to apply?. > Looking at the i3-gaps readme, it looks like current is supposed to apply them to the workspace anyway, meaning you shouldn't be able to apply them per-container. This looks like a bug to me, unless sway has intentionally deviated from upstream behaviour in a backwards-incompatible way.\nBased on the changes to sway/commands/gaps.c in the open PR #2131, it looks like you are correct and this is actually a bug and not intentional.\nI'm fine with removing the ability to change gaps at the container/view level for now. I think that if it is re-implemented in the future, it should be done as an extension (rather than a deviation) and use an unused scope (ex container). > Looking at the i3-gaps readme, it looks like current is supposed to apply them to the workspace anyway, meaning you shouldn't be able to apply them per-container. This looks like a bug to me, unless sway has intentionally deviated from upstream behaviour in a backwards-incompatible way.\nBased on the changes to sway/commands/gaps.c in the open PR #2131, it looks like you are correct and this is actually a bug and not intentional.\nI'm fine with removing the ability to change gaps at the container/view level for now. I think that if it is re-implemented in the future, it should be done as an extension (rather than a deviation) and use an unused scope (ex container). Can you please rebase and force push? swaywm/wlroots#1199 has been merged so it should be good to merge after.. Can you please rebase and force push? swaywm/wlroots#1199 has been merged so it should be good to merge after.. Thanks!. Thanks!. Thanks!. Thanks!. > An alternative solution would be to check if diff_x and diff_y are zero and skip the entire for loop. This would be more performant too.\nI like that idea better. I've replaced the commit and force pushed.. > An alternative solution would be to check if diff_x and diff_y are zero and skip the entire for loop. This would be more performant too.\nI like that idea better. I've replaced the commit and force pushed.. > I don't understand and/or cannot reproduce this.\nI'm able to replicate with the default config. Try using floating_mod and dragging a floating view/container to a different output slowly and keep holding the buttons for a couple seconds afterwords. If you do it quickly, the arrange call may not happen before the move is over.. > I don't understand and/or cannot reproduce this.\nI'm able to replicate with the default config. Try using floating_mod and dragging a floating view/container to a different output slowly and keep holding the buttons for a couple seconds afterwords. If you do it quickly, the arrange call may not happen before the move is over.. Thanks!. Thanks!. This PR causes rendering issue for children of tabbed and stacked containers.\nFor the representation T[view#1 V[view#2 view#3]] only view#2 or view#3 will be rendered depending on which is focused. The same thing happens when using stacked instead of tabbed and/or horizontal instead of vertical. Also, as the nesting gets deeper, less and less is visible since only the focused view is rendered.. This PR causes rendering issue for children of tabbed and stacked containers.\nFor the representation T[view#1 V[view#2 view#3]] only view#2 or view#3 will be rendered depending on which is focused. The same thing happens when using stacked instead of tabbed and/or horizontal instead of vertical. Also, as the nesting gets deeper, less and less is visible since only the focused view is rendered.. Thanks!. Thanks!. Are you still able to reproduce this? It looks like the seat focusing code has heavily changed since September. Are you still able to reproduce this? It looks like the seat focusing code has heavily changed since September. Thanks!. Thanks!. I think this is resolved by https://github.com/swaywm/wlroots/pull/1541 and would have only occurred when a xwayland client had focus and another xwayland client was opened (which appears to be true for every application listed in this thread).\nI'm going to close this via swaywm/wlroots#1541, but if anyone is able to reproduce, feel free to reopen.. I think this is resolved by https://github.com/swaywm/wlroots/pull/1541 and would have only occurred when a xwayland client had focus and another xwayland client was opened (which appears to be true for every application listed in this thread).\nI'm going to close this via swaywm/wlroots#1541, but if anyone is able to reproduce, feel free to reopen.. According to the libinput documentation, tap to click is not effected by middle emulation. Middle emulation only determines whether to translate simultaneous left and right button events into middle button events. Setting middle emulation to enabled or disabled is working fine for me, but some devices may not support configuration.\nAssuming you actually do want to disable middle tap to click, there really are not many options. The only three states for tap to click are:\n  - tap to click is disabled\n  - tap to click is enabled with button map lrm (1 finger tap = left, 2 fingers = right, 3 fingers = middle)\n  - tap to click is enabled with button map lmr (1 finger tap = left, 2 fingers = middle, 3 fingers = right)\nOnly the first option disables middle tap to click, but that would disable both left and right tap to click as well.. According to the libinput documentation, tap to click is not effected by middle emulation. Middle emulation only determines whether to translate simultaneous left and right button events into middle button events. Setting middle emulation to enabled or disabled is working fine for me, but some devices may not support configuration.\nAssuming you actually do want to disable middle tap to click, there really are not many options. The only three states for tap to click are:\n  - tap to click is disabled\n  - tap to click is enabled with button map lrm (1 finger tap = left, 2 fingers = right, 3 fingers = middle)\n  - tap to click is enabled with button map lmr (1 finger tap = left, 2 fingers = middle, 3 fingers = right)\nOnly the first option disables middle tap to click, but that would disable both left and right tap to click as well.. > This is going to have conflicts with the typesafety branch. You'd be doing me a favour if you could rebase this off that.\nDone. typesafety actually made this PR smaller since half the changes were already done/no longer needed.. > This is going to have conflicts with the typesafety branch. You'd be doing me a favour if you could rebase this off that.\nDone. typesafety actually made this PR smaller since half the changes were already done/no longer needed.. Thanks!. Thanks!. I'm able to replicate this 100% of the time with the following:\n- Have two views open on a workspace\n- Run move container to workspace empty; workspace empty on one of them\nI was actually looking into this a few hours ago. In render_workspace, ws->current.tiling is NULL so when it tries to access length in render_containers_linear, the SIGSEGV occurs.\nAs a naive solution, I have https://github.com/swaywm/sway/compare/master...RedSoxFan:fix-move-switch-ws-crash, but I was trying to figure out if there is a bigger issue/better solution since the SIGSEGV did not occur before typesafety was merged.. I'm able to replicate this 100% of the time with the following:\n- Have two views open on a workspace\n- Run move container to workspace empty; workspace empty on one of them\nI was actually looking into this a few hours ago. In render_workspace, ws->current.tiling is NULL so when it tries to access length in render_containers_linear, the SIGSEGV occurs.\nAs a naive solution, I have https://github.com/swaywm/sway/compare/master...RedSoxFan:fix-move-switch-ws-crash, but I was trying to figure out if there is a bigger issue/better solution since the SIGSEGV did not occur before typesafety was merged.. Thanks!. Thanks!. Thanks!. Thanks!. I'm going to close this in favor of #3070, which is more generic/powerful and has syntax proposals. I don't think it makes sense to keep both open. Can you please post a debug log for the case where the HDMI-A-1 line is included in the config at launch?. Can you please post a debug log for the case where the HDMI-A-1 line is included in the config at launch?. > Test with files named \".png and '.png and make sure you can get them to work. (really contrived cases, I know, but still...)\nBoth are now working. '.png can be given as \"'\".png (a single quote wrapped in double quotes) or \\\\\\'.png (escaped with 3 backslashes). Similarly \".png can now be given as '\"'.png (a double quote wrapped in single quotes) or \\\\\\\".png (escaped with 3 backslashes).\n\nCan you do '\"'.png (a double quote wrapped in single quotes)?\n\nNow you can. Before my last commit, the file path would be parsed, but was not correctly passed to swaybg.\nAdditionally, I changed it so the paths stored have spaces, single quotes, and double quotes escaped with a single backslash. This makes it easier to pass to swaybg and works better than enclosing the path in quotes.. > Test with files named \".png and '.png and make sure you can get them to work. (really contrived cases, I know, but still...)\nBoth are now working. '.png can be given as \"'\".png (a single quote wrapped in double quotes) or \\\\\\'.png (escaped with 3 backslashes). Similarly \".png can now be given as '\"'.png (a double quote wrapped in single quotes) or \\\\\\\".png (escaped with 3 backslashes).\n\nCan you do '\"'.png (a double quote wrapped in single quotes)?\n\nNow you can. Before my last commit, the file path would be parsed, but was not correctly passed to swaybg.\nAdditionally, I changed it so the paths stored have spaces, single quotes, and double quotes escaped with a single backslash. This makes it easier to pass to swaybg and works better than enclosing the path in quotes.. @FlyingWombat\nIf you get a chance, can you please test this? I think with this version all characters should be working (although some will have to be escaped).. @FlyingWombat\nIf you get a chance, can you please test this? I think with this version all characters should be working (although some will have to be escaped).. > So, I'm not sure if I'm missing something, but it's still not working for me.\nWhat I posted above was for if you were putting it in your config. If you are using it with swaymsg, you will have to wrap the path in quotes (escaping any double quotes with a backslash) so the shell does not do any expansion on it at that stage.\nEx. swaymsg output eDP-1 bg \"~/asdf\\(1\\).jpg\" fill or swaymsg output eDP-1 bg \"~/asdf\\\"(1)\\\".jpg\" fill. > So, I'm not sure if I'm missing something, but it's still not working for me.\nWhat I posted above was for if you were putting it in your config. If you are using it with swaymsg, you will have to wrap the path in quotes (escaping any double quotes with a backslash) so the shell does not do any expansion on it at that stage.\nEx. swaymsg output eDP-1 bg \"~/asdf\\(1\\).jpg\" fill or swaymsg output eDP-1 bg \"~/asdf\\\"(1)\\\".jpg\" fill. Quotes around entire arguments get stripped before any command is executed, they are only used for grouping. This makes it so the path passed to wordexp is /home/user/asdf(1).jpg, which will fail due to the attempt to run 1 in a subshell.\nIf you use the path \"'/home/user/asdf(1).jpg'\"' or '\"/home/user/asdf(1).jpg\"',  it will work. I'll look into allowing \"\\\"/home/user/asdf(1).jpg\\\"\" and '\\'/home/user/asdf(1).jpg\\'' (and possibly the same without requiring the outer single/double quotes) since I think those should work as well, but I think that's the best it's going to get. . Quotes around entire arguments get stripped before any command is executed, they are only used for grouping. This makes it so the path passed to wordexp is /home/user/asdf(1).jpg, which will fail due to the attempt to run 1 in a subshell.\nIf you use the path \"'/home/user/asdf(1).jpg'\"' or '\"/home/user/asdf(1).jpg\"',  it will work. I'll look into allowing \"\\\"/home/user/asdf(1).jpg\\\"\" and '\\'/home/user/asdf(1).jpg\\'' (and possibly the same without requiring the outer single/double quotes) since I think those should work as well, but I think that's the best it's going to get. . > Is set $<name> <value> an exception to that?\n~Yes, set is the one exception. The only change to the value argument for set is variable substitution still occurs.~\nActually, I take that back. I looked at the code again and only the first argument to commands and subcommands have the quotes stripped, which would be <name> for set. I don't remember the reasoning for only stripping the quotes on the first argument.. > Is set $<name> <value> an exception to that?\n~Yes, set is the one exception. The only change to the value argument for set is variable substitution still occurs.~\nActually, I take that back. I looked at the code again and only the first argument to commands and subcommands have the quotes stripped, which would be <name> for set. I don't remember the reasoning for only stripping the quotes on the first argument.. The following should all now be working: \n\"\\\"/home/user/asdf(1).jpg\\\"\"\n'\\'/home/user/asdf(1).jpg\\''\nset $img \"/home/user/some path/asdf(1).jpg\"\n output eDP-1 bg '\"$img\"' fill\nAdditionally, this fixes #2658. \nI tried this with a bunch of different paths and I think this is ready for review again.. Ping?. Ping?. Thanks!. Thanks!. This works great when the bar config is for all outputs, but if I specify an output name, swaybar is not appearing on any output. This works great when the bar config is for all outputs, but if I specify an output name, swaybar is not appearing on any output. If I set swaybar to show on an output, unplug that output, and plug it back in, swaybar does not show on the output until I reload the config. If I set swaybar to show on an output, unplug that output, and plug it back in, swaybar does not show on the output until I reload the config. Thanks!. Thanks!. Thanks!. Thanks!. > Thoughts?\nThe issue with that solution is it only works if the workspace that would be moved has focus. If it does not, the sticky container(s) is/are not visible on the new output (which could be worked around, but then we would have an empty workspace that is not visible or end up destroying the workspace anyway).. Can you please try https://github.com/swaywm/sway/pull/2735?. This has bee rebased and is ready for review. The handler structs/selection need to be modified to allow the commands at runtime. Thanks!. > Closes #1521\nI don't think it does. I think all that's missing is a bar config update ipc event though. I'll add that real quick. > > Closes #1521\n\nI don't think it does. I think all that's missing is a bar config update ipc event though. I'll add that real quick\n\nActually swaybar doesn't currently subscribe to barconfig_update so I'd rather separate it from this one. @natesymer If you get a chance, can you please try this?. > Bug - this config is invalid: bar id position\nGood catch. Should be fixed now.. > So what is the planned syntax for performing runtime commands for specific bars?\nThe easiest would be just bar <bar-id> <subcommand> since that already sets config->current_bar. For i3 compatibility, bar mode|hidden_state [<bar-id>] should also be allowed though.. > Would there be any issues with bars having an id that is the same as the name of a subcommand? i.e. any ambiguities\nWith the last commit, the only invalid id should be id. It also makes it so subcommands cannot be the first argument of the subcommand (with the except of <bar> id <subcommand-as-id>), but unless I'm missing something, I don't think that'll be a problem. I'm also not sure how many people would use any of the current subcommands as an id anyway.\n\nAlso what would happen if the command was bar <id> mode ... <different_id>?\n\nIt could go one of three ways: (1) use <id>, (2) use <different_id>, or (3) be invalid. My vote is for (2), where <different_id> has preference when given, <id> is second preferred, and all bars is the fallback (for i3 compat).. > Actually, I think it should be the other way round, since if is new then it would spawn a new bar, and if the mode didn't affect that it would be weird. This would require small changes to the command code.\nSounds good to me. Order of preference should then be: (1) config->current_bar, (2) arg[2] in bar_cmd_mode,  and finally(3) all bars\n\nWhy is id and swaybar_command not being allowed at runtime?\n\nid because it would require a barrename IPC event since bars only listen for their bar-id for barconfig_update IPC events. \nswaybar_command to be consistent with swaybg_command and swaynag_command in sway/commands.c\n. This can be closed now, right?. Thanks!. This is due to how sway generates workspaces names and is working as intended, \nThe order in which Sway generated workspaces names is as follows:\n1. The next available configured workspace that is allowed on the output. The commands that configure a workspace are\n    - workspace <workspace> output <output>\n    - workspace <workspace> gaps inner|outer <amount>\n2. The next available workspace name in a bindsym (what you are seeing) or bindcode\n3. The next number\nIf you do not want to start on workspace 9 (or 2), the easiest change would be to just add workspace <starting-workspace> to the end of your config. You could also create a binding to switch to the workspace you want to start on and place that higher in the config or use a command that configures the workspace that you want to start on.. Thanks!. Some light on what divides the bindings that work and do not work: https://github.com/swaywm/sway/issues/3540#issuecomment-471174161\nThere is likely an issue with sharing modifiers across the keyboard devices in a seat.. Can you please post the output of swaymsg -t get_seats?. Sorry, I completely misunderstood this issue before. #3280 should fix this.. Is anyone still able to replicate this?. Bump. Anyone interested in this?. > This is presumably from rootston? \nSway does not inherit anything from Rootston. They are two different compositors that use the wlroots library. It's just the default background color.\n\nIs there a way to change this background color?\n\nYou can use output <name> bg <image> <mode> <fallback-color>.\nExample: output eDP-1 bg ~/wallpaper.png center #000000. Duplicate of #2912 . Thanks!. Thanks!. I think this fixes #2952. Are you still able to replicate this? I think with the current code base, the cursor image will be hidden when the seat loses the WL_CAPABILITY_POINTER capability on exit.. Can you please post the output of git remote -v? I'll give you instructions after that. Hopefully, it will help you figure out what you are doing differently.. Try the following:\ngit fetch upstream\ngit checkout add-scroll-factor\ngit rebase upstream/master\ngit push -f origin add-scroll-factor. Looks like that worked. It's rebased now.. > Out of curiosity, do you know what I was doing wrong when rebasing in the first place? \nI think either your forks master or what you had fetched for upstream/master were outdated and on a commit that was reverted. I'm not sure which since it looks like your fork is up-to-date now. Just make sure to do git fetch upstream before git rebase upstream/master (if you just do git rebase master, it will rebase against origin/master -- which is your fork).. Thanks!. > @RedSoxFan FYI this is still reproducible after your patch.\nI only touched floating clients. Nothing has been changed regarding tiling ones, which is why this remains opens.\n. It has been decided that this will not be implemented. If you would like to include comments for units (or anything else), please put them on their own line.. > Hmm, where is the focus_wrapping preference checked?\nIt is checked at https://github.com/swaywm/sway/blob/master/sway/commands/focus.c#L129 and https://github.com/swaywm/sway/blob/master/sway/commands/focus.c#L136\nIf focus_wrapping is set to no, wrap_candidate will never be set to anything other than NULL. If focus_wrapping is set to force, the focus_inactive view's node for wrap_candidate is immediately returned. At the point of the change in this PR, wrap_candidate will only be non-NULL when focus_wrapping is set to yes and there is a wrap possible.. @alon For pycharm, you'll want to follow #3007, which appears to apply to all JetBrains IDEs. Closing via #3855 . > ...\n\n{ \"strip_workspace_numbers\", bar_cmd_strip_workspace_numbers },\n{ \"strip_workspace_name\", bar_cmd_strip_workspace_name },\n...\n\nThe handlers need to be in alphabetical order. Just reverse the two lines and it should work.\n. Thanks!. I think the following is what you are looking for:\n```\nset $display $dlap\nmode \"display\" {\n    # select the display\n    bindsym 1 set $$display $dlap\n    bindsym 2 set $$display $dhdmi\n# enable or disable the display\nbindsym c output $$display enable\nbindsym v output $$display disable\n\n# return to the default mode\nbindsym Backspace mode \"default\"\n\n}\nbindsym $mod+m mode \"display\"\n```. It is not possible to display it in the mode string.\nYou could write the contents of the display variable to a file before entering the mode and on display change, delete (or empty) the file on mode exit, and read the contents (if it exists) into a custom status line though.. This is already implemented. If it is not working for you, please provide your config and a debug log.. This is resolved by #3145. I haven't been able to figure out why yet, but for some GTK applications, if the absolute y location of the output is a higher value than the surface local y location of the last wl_pointer motion event before the popup is created, the xdg-positioner's set_anchor_rect's y value is the y location of the output.\nAlso, the issue occurs in rootston as well so this is not sway specific.\nExample snippets from WAYLAND_DEBUG=1 pavucontrol when the sink selection button is clicked for a sink input.\n\n\nOutput Y: 400 -- Motion Y: 186.460938 -- Anchor Y: 400\nwl_output@17.geometry(0, 400, 344, 193, 0, \"Unknown\", \"0x38ED\", 0)\n-> wl_pointer@3.motion(257345051, 824.769531, 186.460938)\nxdg_positioner@28.set_anchor_rect(828, 400, 1, 1)\n\n\nOutput Y: 100 -- Motion Y: 179.523438 -- Anchor Y: 180\nwl_output@7.geometry(0, 100, 344, 193, 0, \"Unknown\", \"0x38ED\", 0)\n-> wl_pointer@3.motion(258462167, 794.757812, 179.523438)\nxdg_positioner@28.set_anchor_rect(798, 180, 1, 1). More information:\n\nIf the surface local x position is less than the left-most output's x position, the anchor rect's x value will be the left-most output's x position.\nIf the surface local y position is less than the top-most output's y position, the anchor rect's y value will be the top-most output's y position.. This is caused by applications using the function gtk_menu_popup() which was deprecated in GTK 3.22. \n\nPlease submit patches or report to effected applications to have them update to use one of the newer functions.\nhttps://bugzilla.gnome.org/show_bug.cgi?id=772096#c10\nhttps://developer.gnome.org/gtk3/stable/GtkMenu.html#gtk-menu-popup. I have not looked into the issue with QT since I was not aware of any QT application that showed the behavior. However, the GTK issue is definitely due to the deprecated function in my previous comment. My guess is QT may have a similar function or it is an issue with Calibre itself. I can take a look into it in a few hours. ~Are you aware of any QT application that isn't using the pyqt bindings that has the issue?~ Nevermind, this is not pyqt specific. See my next comment. For QT apps see: https://community.kde.org/Guidelines_and_HOWTOs/Wayland_Porting_Notes\nSummary in case the link breaks in the future: QMenu needs to either have a parent or use mapToGlobal with an event position in order for the menu's to be positioned correctly in Wayland. QCursor::pos should not be used under Wayland.\nSimilar to the message for GTK apps above, please submit patches or report to effected applications to have them update their logic for Wayland.. > >  wlroots will still try to to launch it (which will fail, but set DISPLAY to a bad value).\n\nSeems like a bug.\n\nI agree that this does not sound like the correct/ideal behaviour, but I am not currently familiar enough with related code to suggest a solution.\nWith that said, I don't think that this adds any maintenance or complexity overhead since it can only be adjusted on launch so +1 from me.\nI would like to suggest a small addition/change to this implementation however. Currently on reload, the command will be executed but silently ignored. I think that if the config is being reloaded and the value changes, swaynag should be spawned to notify the user that the new value won't take effect until sway is restarted.. Duplicate of #3014 . Is there a case where the --release flag is insufficient for this?. Superseded by swaywm/wlroots#1545 (drm only) and then swaywm/wlroots#1554 (all backends). Thanks!. This is ready for review. It has been rebased and the merge conflicts have been addressed.. Thanks!. For nomenclature, name is used to refer to the port and identifier is used to refer to the <make> <model> <serial> string. The term identifier is not used directly in the IPC or man page, but sway-output(5) does specify that the <make> <model> <serial> string can be used in place of name.\nAs for your issue, it appears to just  be a typo in the serial portion of the identifier you have connected via eDP-1. In your config, you have Unknown 0x492D 0x0000000 (7 zeroes), but the actual identifier should be Unknown 0x492D 0x00000000 (8 zeroes).. Can you please post the output of libinput list-devices for both cases? Also, if you run libinput debug-events when it is not working, does it print events when you use the touchpad?. Ping?. @normn, if you run sudo libinput debug-events when it is not working, does it print events when you use the touchpad?. Are you still able to reproduce this?. Would you be able to provide some concrete reproduction steps? I'm not able to replicate it based off of your description. > Step 2: Switch to workspace k \u2260 n via keyboard shortcut (it does not occur if the switch is triggered via mouse click in the status bar).\n\nStep 5: press any key. The program now responds to right clicks again.\n\nSince you are using the x11 backend, what are you running sway inside of? It sounds like there may be some interference/conflict.. > I am starting sway via an .xinitrc script called from lightdm. I can post the script if it helps.\n\nHowever, if interference from something else is to blame, this should have occurred also in earlier versions, no? This is definitely a regression.\n\nSorry, I completely overlooked that you could run sway that way with the x11 backend. I was thinking it was inside of another DE/WM.\nCan you please post a debug log with WAYLAND_DEBUG=1 set (env WAYLAND_DEBUG=1 sway -d)?. Have you been able to reproduce this since?. Are you still able to replicate this? I think #3339 should have fixed this.. I'm closing to close this since I'm pretty sure #3339 fixes this. However, if you are able to replicate, feel free to reopen.. Can you please provide a backtrace? I'm not able to replicate.. > So I went to try this and due to me misunderstanding how to set it up, I stumbled on an interesting bug ... Probably not something a lot of people will screw up, but I got a chuckle out of it and figured you might want to idiot-proof it.\nThat's actually working as intended. Sway allows for bar commands to be given in the form bar [<bar-id>] <bar-subcommand>. In your example above, the first gaps is being parsed as the bar-id and the second gaps as the subcommand. We decided a while ago to have the only invalid bar-id be id, which will be parsed as the subcommand. This is to prevent future subcommands from breaking configs that used the subcommand as a bar-id before it was a subcommand.. Thanks!. > Is this really required? What are default configs sued for again?\nDefault configs are generated on reload to reset output settings that are not specified. Without them, reloading will not change settings not in the config and anything that was removed or not in the config and changed at runtime will not be reset. Thanks!. Duplicate of #3135. Thanks!. I'm not sure what I'm missing. I can't get any icons to show up. Based on the swaybar debug output, it does appear to be initializing the tray code. I'm not sure if it trying to register the host multiple times is an issue or what's going on. I've tried several applications including nm-applet, blueman-applet, konversation, empathy, spotify, and slack (with XDG_DESKTOP_SESSION=Unity).  Any ideas?\n2018-12-30 23:12:55 - [swaybar/tray/tray.c:37] Initializing tray\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:195] Registered org.freedesktop.StatusNotifierWatcher\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:195] Registered org.kde.StatusNotifierWatcher\n2018-12-30 23:12:55 - [swaybar/tray/host.c:196] Registered org.freedesktop.StatusNotifierHost-26300\n2018-12-30 23:12:55 - [swaybar/tray/host.c:196] Registered org.kde.StatusNotifierHost-26300\n2018-12-30 23:12:55 - [swaybar/tray/icon.c:314] Loaded themes: Hicolor, Adwaita, Faenza-Radiance, HighContrast, Faenza-Ambiance\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:106] Registering Status Notifier Host 'org.freedesktop.StatusNotifierHost-26300'\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:106] Registering Status Notifier Host 'org.kde.StatusNotifierHost-26300'\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:111] Status Notifier Host 'org.freedesktop.StatusNotifierHost-26300' already registered\n2018-12-30 23:12:55 - [swaybar/tray/watcher.c:111] Status Notifier Host 'org.kde.StatusNotifierHost-26300' already registered. Thanks for the detailed explanation. I'm not sure what went wrong, but it worked fine this time. I also didn't realize a few of the applications I listed use xembed.\nDo you want to squash any of the commits before this gets merged?\nAside: I'll have to update #3344 to include tray bindings, but that's fine.. Thanks!. Can you please post the full backtrace (coredumpctl gdb sway followed by bt full) as well as your wlroots version?. I would recommend changing your repeat_rate (or repeat_delay). In your original debug log, splith is being executed from binding 8 times within 2 seconds (probably shorter, but we don't log fractions of a second).\n2018-12-05 17:12:13 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:13 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:13 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:14 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:14 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:14 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:14 - [sway/sway/commands/bind.c:293] running command for binding: splith\n2018-12-05 17:12:14 - [sway/sway/commands/bind.c:293] running command for binding: splith\n. In that case, it appears to be working as intended. For tabs and stacks, the title is a representation of the contents. H[ is a horizontal split, V[ is a vertical split, T[ is a tabbed container, and S[ is a stacked container.\nAs for the (null), that is where the application is identified. For native wayland views, app_id is used and for xwayland views, instance is used. However, alacritty does not set its app_id so (null) is shown.\nThe lag is probably just sway generating the representation string, which will take longer as the tree gets larger. . A single container does not have multiple layouts, but it can have unlimited (in theory anyway; restricted by memory) descendants. Containers are not directly shown on the screen (aside from the tab and stack user interfaces). Only views (application windows) are shown.\n~Basically what happens when you run splith is the selected view or container gets wrapped in a container with a horizontal layout with a single child. Doing it repeatively will generate a horizontal split with one child that itself is a horizontal split with one child (and repeat) until you get to the application window.~\n~Whether this is useful or not depends on the situation, but it is possible. When a user manually splits a container, it is expected they know what they are doing and will not be flattened.~ \nEdit: The title is fine, but the tree should be flattened.. > Just to note, as far as I can see i3 does flatten split containers.\nActually, I just confirmed that you are correct. So there is no issue with the name being malformed, but the layout should be flattened. For some reason, I thought that was intentional. Sorry about that.. The container being created would not be what's destroyed. The parent of that container would be. Also, it may not be a no-op since the parent does not have to be the same layout. I guess it could work like a layout toggle when there is a single child though.. Thanks!. Does the following work?\noutput eDP-1 position 0 1080 scale 1 mode 1920x1080\noutput \"Dell Inc. DELL U2718Q FN84K774130L\" position 0 0 scale 2 mode 3840x2160. Yes, it is intended and expected behavior. See the wiki section: https://github.com/swaywm/sway/wiki#hidpi\nThis should probably be added to sway-output(5) though. I'll leave this open as a reminder to do it later. The issue lies in wlroots. DP-6 is found and disappears within a single execution of scan_drm_connectors. At the end of the function, wlroots is requesting a modeset for the output despite it no longer existing. When sway attempts to modeset the output, it causes a segfault.  Can you please open the issue in the wlroots repo?\nThere are also a lot of occurrences of a connector name (usually DP-5 or DP-6) appearing twice in the list of connectors. This looks like it could be another issue, but may be fine. Hopefully, someone more knowledgeable on the topic can chime in on that.\nAs for the crash without MST, that looks like a different issue. Could you provide the full backtrace?. Since sway crashes, can you please also provide a backtrace (coredumpctl gdb sway followed by bt full)?. > Would a backtrace still be useful in that instance?\nNope. Unless sway crashes, there won't be a coredump to generate a backtrace from.\nCan you please try the kvm setup with rootston and see if you experience the same behavior? After looking at the log further, it looks like the issue may lie in a lower level than sway.\nAlso, can you please provide which wlroots version you are using?. Since it sounds like this is resolved, or not a sway issue at least , I'm going to close this.. I'm unable to reproduce (with shorter timeouts -- 30 and 60 -- I have not tried with 300 and 600). Scale is retained for me.\nCan you please provide a debug log for sway? Also, what version of wlroots are you using?. @terminalnode, can you please create your own issue and include: your sway version, your wlroots version, and a debug log? If it turns out they are related, we can deal with that later.. Is this still an issue?. Can you please provide a full backtrace (coredumpctl gdb sway followed by bt full)?. What version of wlroots are you using?. > speaking of which I haven't been able to compile sway despite successful installing wlroot-master,\nerror: \u2018WLR_INPUT_DEVICE_SWITCH\u2019 undeclared\nIt sounds like either you have multiple version of wlroots and an older one is being used or wlroots is not updating correctly. WLR_INPUT_DEVICE_SWITCH was added to wlroots fairly recently (12 days ago). This is a bug with the default output configs we use to reset settings removed from the config or changed at runtime and not in the config on reload. I'll rework the system within the next day or so.\nThe band-aid for this would be to replace eDP-1 with Apple Computer Inc Color LCD 0x00000000 in your config.. Once the following PRs are merged, this can be closed:\n- [x] #3341 - Improve mouse button parsing: helpers and bind{code,sym}\n- [x] #3342 - Improve mouse button parsing: input scroll_button\n- [x] #3343 - Improve mouse button parsing: seat cursor\n- [x] #3344 - Improve mouse button parsing: bar bind{code,sym}\n- [x] #3357 - Improve mouse button parsing: bar tray_bind{code,sym}. @colemickens, can you please try this and confirm that it fixes #3261 for you?. Thanks!. > Damn, code looked good to me but I forgot this comment -- what do you think?\nI just implemented it the same as the original PR, but it could be either. Honestly, never even thought of it before. If you want, I have no problem changing this to a seat command. That would be the more flexible option since you could specify a timeout per seat, if you wanted. Without looking, I'm not sure if seat wildcards are implemented though (I also have no problem adding those, if they aren't already). Ok. I'll create a follow-up PR to switch it over within the next day or two. > For consistency, this should be changed in swaybar too.\nBindings for swaybar already use the x11 mouse button mappings. I'll add libevdev_event_code_from_name support in a follow-up PR.. Superseded by #3315 . I can change this to just be a minimal {'success': false} on IPC_SYNC and #3082 can be closed (since this is the last item), if you would prefer. Honestly, I have no idea how useful this PR is. I do think sway should handle IPC_SYNC, but whether or not it implements the protocol or just returns a failure seems borderline. I tried to make this PR as encapsulated in the xwayland file as possible.. @edrex are you able to reproduce the tab scaling issue on master? If so, can you provide a minimal config for reproduction?\nIf the scaling bug is not reproducible, I'm going to close this issue. The tabbed/stacked children not being rendered bug is fixed by #3848 and the input issue is a xwayland bug, not a sway bug.. Rebased and ready for review. Rebased and ready for review. Thanks!. >  In this and following PRs, get_mouse_* are called with nonnull error, in which case the branches testing if (error) are unnecessary.\nI originally designed it to make the human readable error message optional. Since all the current callers do request the error message, I have removed the NULL-checks. If the caller doesn't want it, they can just immediately free it.\n\nThe code does not account for memory allocation failure, rare as it may be. In general, one should not signal errors using heap allocated values, lest strdup or malloc return NULL, and the caller falsely assume success. One workaround is a more cumbersome signature, such as bool parse_x(const char* str, uint32_t* ret, char** err_msg).\n\nI slightly modified the calling code (for this PR -- I'll update the rest once this is merged) to check for a return value of 0, which denotes a failure anyway. I also added NULL-checks around the calls to snprintf after calls tomalloc.. Rebased and ready for review. Rebased and ready for review. Rebased and ready for review. Thanks!. Can you try https://github.com/swaywm/sway/commit/4503ad2d19d5039259b572729115fef149f1b44e ?\nI probably missed something for reloading in the seat config revamp. I'll look into fixing it in 3-4 hours.. Thanks!. > This also adds a reference to sway-input(5) in xkb env configuration. Maybe we\nshould just un-document these instead.\nI think this is fine since the section is The following environment variables have an effect on sway. The environment variables do have an effect on sway, even if they aren't the preferred or highest precedence method. Thanks!. Thanks!. Rebased and ready for review. Actually hold off on this until after #3403 gets merged and I'll rebase and alter the calls to cmd_results_new.. Rebased and removed the input argument for the cmd_results_new calls.\nThis is ready for review.. > Not sure how I feel about having seat_begin_move_tiling set the seat operation to something other than MOVE_TILING though. I'd be neater if there was a seat_begin_move_tiling_threshold function.\nI split it into a separate function. I just did it in one before since it was an almost identical function body. \n\nHowever, after reviewing this changes I'm thinking perhaps we should use an interface for the seat operation (for a separate PR). I haven't given it much thought yet, but something with .begin, .move, .end and .abort callbacks would be a good start. We could then have one file per seat operation and remove a lot of stuff from cursor.c.\n\nsway/input/seat.h and sway/input/cursor.h  could probably both be split into smaller files. However, since I haven't given it much thought, I'm not sure what the best approach is. At a glance, your idea sounds good and would move a lot of code out of both files.. Closed by #3361 \n(@eiz, just for future reference, if you include Fixes #IssueNumber or Closes #IssueNumber in the PR description, it will auto close the corresponding issues on merge). I'm going to close this as a duplicate of #3029. It's a different example of the same issue. Thanks!. What version of sway are you using? That swaymsg -t get_inputs output doesn't look like it is from the current master. I'm guessing this is from a 0.15.x release, which doesn't support the input <input-identifier> xkb_layout <layout> command.. I think this comment may help: https://github.com/swaywm/sway/issues/3247#issuecomment-444058339\nI haven't used gentoo, but I think the issue is that both the capability and the SUID bit are set and based on that comment, it looks like filecaps should handle setting the correct one for you. I may be misunderstanding that comment though. > On the other hand, without chmod +s /usr/bin/sway the system freezes and I have to reboot (and I don't get any log file)\nIs your user in the input group? Excerpt from the previously linked comment:\n\nIf, in this case, the computer freezes, the problem is something else.\nFrom the logfile, Sway seems unable to read input devices. Emerge, at the end of Sway installation,\nshould have printed this message:\nYou must be in the input group to allow sway to access input devices!\nSo you must add your user to the input group: gpasswd -a input .. Sorry, didn't realize we were fine with having jq as a dependency when I approved/merged the sed version.\n\nThanks!. Can you please provide the full backtrace for swaybar? coredumpctl gdb swaybar followed by bt full.\nAlso, not sure if it is related without the backtrace, but Wayland/Sway does not have the concept of primary outputs. tray_output primary will only show the tray on an output with the name or identifier of primary, which won't exist.. > This doesn't fully implement the suggestions in #2788, but is a more basic fix that just makes it so the caps lock indicator is always accurate. I'd be happy to have a go implementng them if anyone's interested, although it doesn't personally seem to me that they'd be that useful.\nIt looks like there are three things in that issue:\n\n\nPersistent Caps Lock ON with Caps Lock OFF for the next key press\nThis PR mostly hits this bullet, it's just missing the Caps Lock OFF for a key press. Personally, I think this is good enough and if someone really wants the last bit, another PR (or even a local patch) can be submitted/applied.\n\n\n--indicator-ring-caps-lock (along with something like --disable-caps-lock-text)\nI do like this idea, but it can be done in a separate PR.\n\n\nOnly showing caps lock on entry\nIf this does get implements, I think it should be optional, but I don't personally have any strong opinion either way on implementing this.. It sounds like the issue occurs whenever the cursor image is set (not necessarily changed since moving between views/layer-shell surfaces may not result in a different image). I'm not sure if that is related or just a coincidence, but I'm also not really sure the best way to test/debug that.. I agree that modifying tiling_drag_threshold (and it's documentation) would be the better solution. The only reason why it only applies to unfocused containers is because I replicated an open i3 PR.. Thanks!. It would probably also be a good idea to reset inputs on reload like we do for outputs. If i remember correctly, libinput has functions for getting the default values for a device. Are you changing focus after running sleep 5; echo -e \"\\a\"? Urgency will be cleared immediately for the focused view since it already focused. Urgency appears to be working fine for me. My guess is the same it was two months ago and the view was focused when the urgency hint was set, causing it to be immediately cleared.\n\n\nI'm going to close this. Feel free to reopen if you can reproduce on master without the view having focus. Thanks!. Thanks!. Thanks!. > Can you rebase this PR?\nDone. Thanks!. Can you please post your config file? Either there is a trailing open brace at the end of your config or something weird is going on with brace detection.\n2019-01-09 16:15:16 - [sway/sway/config.c:680] Read line 390: bindsym $mod+q mode \"run\"   \n2019-01-09 16:15:16 - [sway/sway/config.c:691] Detected open brace on line 392            \n2019-01-09 16:15:16 - [sway/sway/config.c:733] Entering block 'bindsym $mod+q mode \"run\"'\n<end of config reading>\n. The config looks fine so it is definitely an issue with brace detection. However, it looks like ianyfan's got it covered and can turn the patch (or an equivalent) into a PR.. > TBH I'm not a fan of dynamically adding/removing listeners when enabling/disabling outputs.\nWell this is one step towards not dynamically adding/removing them since it moves the destroy listener out of output_enable and into output_create. Try setting the position of both outputs. If that doesn't work, please post a debug log and the output of swaymsg -t get_outputs.. > Most of the formatting requests are consistent with 4-spaces per tab and a maximum line length of 80. As this deviates from kernel-style (8-spaces per tab), it would be helpful to have this mentioned in CONTRIBUTING.md.\nSounds like a good idea to me. I actually thought it was in there.. Thanks!. Thanks!. The issue with that is the lines numbers for errors won't match the real file line number (note that this is already the case if the config file contains any continued lines since get_line_with_cont is assumed to be a single line.) Ideally, the numbers should be accurate to make finding and fixing the lines easier. I think your PR actually fixed EOF not empty lines. > A fix for the continuation line problem would be good, too.\nWas going to include it in this one, but decided it would be better as a separate PR. Going to work on it now.\n\nAnd an apology for completely forgetting how the code I wrote worked.\n\nI mean it still looks a lot nicer than the code I wrote months ago that you replaced haha. Thanks!. For output identifiers, see #3415.\nAs far as multiple outputs go, you should be able to specify the output subcommand multiple times to have the bar on multiple outputs.\nI'm not a fan of adding support for having multiple outputs listed together for this. The reasoning is that the other cases where multiple outputs are allowed to be listed together, have the outputs given as a priority list . Adding support for prioritized outputs to swaybar would be a separate feature request.. #1832 and #3104 can be moved to swaywm/swaylock. Thanks!. I just did some testing in i3 and found the following:\n- fullscreen global is synonymous with fullscreen toggle global (similar to fullscreen to fullscreen toggle)\n- fullscreen enable on a container that is fullscreen global works the same as fullscreen disable global, fullscreen enable (and similar for fullscreen enable global)\n- fullscreen disable [global] will disable fullscreen regardless which mode it is in\n    - fullscreen disable global disables the fullscreen, but also returns CMD_INVALID with ^^^ under global\n- fullscreen toggle [global] on a container that is fullscreen in either mode will act as fullscreen disable. Can you please also remove the input argument for the calls to cmd_results_new  since #3403 has been merged?\nAlso, i3 sets fullscreen_mode to 2 in IPC_GET_TREE for a container that is fullscreen global. If you fullscreen (in either mode) a container with multiple views, this prevents changing focus between them. . A few more issues:\n1. If you splith a descendant of a fullscreen container, the container gets arranged as if it is not fullscreen.\n2. You can move a descendant  out of the fullscreen container onto the workspace it is covering. If the descendant had focus, focus will be stay on the now hidden container/view\n3. When swapping a focused descendant of a fullscreen container with one hidden, focus will stay on the now hidden container/view. > I'm too tired at the moment to try and understand what the swap command is doing with focus (I don't use the swap feature myself, which makes it even harder). It looks like you wrote the original code. Can you offer some insight?\n(I don't use it either. It was one of my first contributions and I just picked it since it seemed like something that would let me get a feel for different things.)\nIt looks like this is actually a bug on master as well (when I implemented swap, fullscreen containers weren't supported yet). \nHere's what I think is going on\n- If the focused container is not part of the swap, there is no focus change.\n- If the focus container remains on the same workspace it retains focus, otherwise the swapped container gets focused.\n   - Previously, container_set_fullscreen handled focusing the fullscreen view since fullscreen containers were not yet supported\n  - I think that fullscreen gets disabled during the swap so that the views get arranged properly. This probably needs to be extended to check if an ancestor is fullscreen and disable fullscreen of the ancestor during the swap\nI think the only issue is when swapping a descendant of a fullscreen container with a container that is not a descendant of a fullscreen container.. Also, I found one more issue:\n- Create the layout H[view view] and fullscreen global it\n- From the left view, run move right\n- The views get arranged as if it is not fullscreen\n- If you attempt to run fullscreen toggle on either of the views, it toggles fullscreen of that view never exiting the ancestor's fullscreeen\n- If you focus the parent and then fullscreen toggle, there is some artifacts on the other outputs\n(Actually, it seems like this effects all move commands). A few more issues:\n1. This is a slight variation of the move one in my previous post, but without the move step\n    - Create the layout H[view view] and fullscreen global it\n    - Run fullscreen toggle on either of the views, it toggles fullscreen of that view never exiting the parent's fullscreeen\n    - If you focus the parent and then fullscreen toggle, there is some artifacts on the other outputs\n2. When in fullscreen global, the damage of xdg-shell views exclusively on an output other than the workspace's doesn't seem to be correct (for xwayland views it appears to be working)\n    - With two outputs open two xdg-shell views (termite, gnome-calculator, etc)\n    - focus parent\n    - fullscreen global\n    - focus the view on the output that does not contain the workspace\n    - Try to type anywhere that accepts text\n    - Move the view to the output where the workspace is and notice the text is there\n3. root_scratchpad_show needs to handle fullscreen global\nAs for swap, it probably could use some refactoring. I think a lot of stuff has changed since I original wrote it, but that's for a different PR. Your changes appear fine to me for now.. Aside from the remaining rendering/damaging/whatever-it-ends-up-being issue, this LGTM.. So implementing the syntax in #1904 is going to have some challenges with the current config parser. It predates the generic code blocks PR\nI'd propose the following instead:\n```\nDeclare variables outside of touch to avoid having to deal with scoping\ntouch {\n    gesture  {\n        # Actions\n        # I would also suggest changing it so a command comes first so for example\n        #     50ms < delay < 1s\n        # would become\n        #     delay > 50ms < 1s\n        # or even delay <longer-than> [<shorter-than>] (this is the easiest)\n        #     delay 50ms 1s\n    }\n    binding  \n# gesture ...\n# binding ...\n\n}\nThe following would also work since this is what the parser will convert it to\ntouch gesture  \n...\ntouch gesture  \ntouch binding  \n```\nSome thoughts for the above syntax:\n- cmd_touch should be in it's own file (sway/commands/touch.c) and have two subcommands touch_cmd_gesture and touch_cmd_binding (which are both in their own files inside of the directory sway/commands/touch)\n- touch_cmd_gesture has subcommands for each action touch_gesture_cmd_<action>\n   - They should probably also be split into separate files -- sway/command/touch/gesture/<action>.c\n- current_gesture should be added to config->handler_context and set/unset in touch_cmd_gesture\n- cmd_touch should be added to the handler list in config_command so quotes do not get stripped\n    - touch_cmd_gesture should strip quotes\n    - touch_cmd_binding should only strip quotes for <gesture-identifier>\n- cmd_touch should be added as a subcommand of cmd_mode\n    - touch bindings should be stored per mode\n    - I'm indecisive on whether gestures should be per mode or global\n(Also, note some commands in the example in #1904 like workspace --create next_on_output are not currently implemented and if they do get implements, should be done in a separate PR)\nHopefully, that helps iron out structure. As for cmd_touch not being recognized in your current code, it appears to be recognized for me. However, you are returning NULL instead of a result from the handler so sway segfaults (this should probably be handled better -- but that's for a different PR).\n(Side note: the meson.build currently in the libtouch repo generates a library called touch not libtouch so currently the dependency line in this PR's meson.build needs to be changed for it to build). > Somewhere hidden in these commits are my commits. \nDepending on what your remotes are, you may need to alter the commands, but the following should fix the commit history\n```\ngit reset --hard 12590e9 \ngit rebase upstream/master\ngit rebase --skip\ngit log --oneline upstream/master..\nOnly your commits should be listed now\ngit push -f origin touch-gestures\n```\n\nShould the gestures be mode-specific? Should they be able to be both mode-specific and mode-agnostic?\n\nI think the gestures can be mode-agnostic. You can bind the same gesture to different commands in different modes though.. I'm just going to leave this here as something to keep in mind when working on the PR:\nhttps://github.com/swaywm/sway/blob/master/CONTRIBUTING.md#style-reference. > Now it's crashing with some xcb errors that I have no understanding of. Yet.\nIf you are getting that from the debug log, it's probably unrelated and harmless. You probably want coredumpctl gdb sway followed by bt full. \n\nAm I checking for complete gestures in the right place? In cursor.c, after updating the gestures?\n\nThe location is fine. However, this current data structures do not take into account seats or modes. Each action of a gesture could occur on a different seat and the command will execute on the seat that performed the last action. With the current structure of libtouch, it's probably going to be really hard to account for either since there will have to be multiple engines and a gesture is tied to a single engine.\nAlso, do not pass the focused container to execute_command, just leave the last argument NULL.\n\nI'll give the style guide a proper read before I add anything else! (and commit with a million undescriptive messages, sorry about those)\n\nAlthough the final product should have well divided commits with good commit messages, WIP commits are fine for now. This will need some squashing/fix-ups later on anyway and you can reword the final commits then.\n. Thanks!. Is the sway server crashing too or just the IPC client? #3434 should fix the IPC client (the trace given is when running as an IPC client). The server crash is related to #2337. Sway currently does not handle having zero outputs that well.. swayidle has been moved to https://github.com/swaywm/swayidle (see #3413). I think the guard needs to be added to apply_output_config as well to prevent against enabling with output * enable. It might also make sense to move the existing guard to cmd_output just to be safe for all subcommands. Can you please post a log using this branch https://github.com/RedSoxFan/sway/tree/libinput-send-events-verbose? I added some code to check the status returned by libinput_device_config_send_events_set_mode. > That's surprising as xinput --disable used to work. I guess sway should also report a failure?\nPersonally, I think every device should be allowed to be either enabled or disabled (disabled_on_external_mouse is a different story). I guess we could guard input handlers and ignore the input event if the device is desired to be disabled.. > Note that events disabled doesn't necessarily means it's completely disabled.\nTrue. Should we add actual enable/disable commands then?. If we do add enable and disable, the only event mode that I see useful is disabled_on_external_mouse. Maybe we could just change that to disabled_on_external_mouse true|false? Maybe I'm missing a case where you would want the device to be enabled, but not send events?. Also, should disable remove the seat capability (if it is the last keyboard, pointer, etc)?. After looking at the libinput source, it appears that libinput supports LIBINPUT_CONFIG_SEND_EVENTS_DISABLED for all devices, except tablet tools.. Can you please submit the patch as a PR?. I'm guessing that:\n- HDMI-A-1 was output index 1 when swaybg was launched\n- eDP-1 got disabled and the wl_output global removed before swaybg was fully launched.\n- swaybg is looking for output index 1, but only gets one wl_output (index 0, which is now HDMI-A-1)\n- swaybg aborts since it cannot find the wl_output\nI'm guessing swaybg's output selection predates xdg_output. The proper fix for this is swaybg needs to be updated to use xdg_output names instead of wl_output index numbers.. A touchpad likely supports three modes: enabled, disabled_on_external_mouse, and disabled. Currently events toggle cycles through all supported modes for the device.. > I also support separating disabled_on_external_mouse.\nI no longer have any interest in doing that. I spaced out on some things that libinput event modes handle differently than a true enable/disable and it does not make sense to change the existing command.\nAs for this issue, I'd rather just add the ability to list the modes to toggle, falling back to all supported modes. This would be somewhat similar to how layout toggle works. You should be able to run the following from a binding or swaymsg:\ninput <identifier> xkb_options ctrl:swap_rwin_rctl\nYou can get the <identifier> for the keyboard from swaymsg -t get_inputs\nSee man 5 sway-input and man 7 xkeyboard-config for more information/options.. @aerappa, Sway 0.15.0 does not support the configuration options. I would recommend installing sway from git master (Sway has been completely rewritten since 0.15.x). I have no idea if the dependencies are up-to-date on Ubuntu 18.04 or if you would have to compile those from source as well.. Try the following (it appears to work for me):\nxkb_options \"altwin:swap_alt_win,ctrl:swapcaps\"\nCommas are used to separate a list of commands so they have to be in quotes otherwise it won't be parsed correctly.. You can try: xkb_model omnikey101, but if the keypress is registering correctly in xev, I'm not sure it will have any effect.. bindsym Super_L exec $menu should work. Mod4 is a modifier and Super_L/Super_R are the keys themselves.. Thanks!. Thanks!. Thanks!. > #2  0x00005625ae7c537d in render_workspace (output=0x5625afba1c00, damage=0x7fff81bd2fb0, ws=0x5625afbcead0, focused=32) at ../sway/desktop/render.c:890\n\nfocused=32\n\nBased on the above back trace snippet, I'm going to close this via #3743 . What version of sway are you using? This looks like the same stack trace that was fixed by https://github.com/swaywm/sway/pull/3498 yesterday. Thanks!. Duplicate of #3470. Thanks!. Duplicate of #3521 \nAs RyanDwyer said, update scdoc. Thanks!. @progandy, that could probably be tacked onto #1666.\nEither way, this specific issue has been resolved.. Can you please test https://github.com/swaywm/sway/pull/3689? I think it should fix the issue since #3688 appears to be a duplicate of this one.. Thanks!. I'm going to close this as a duplicate of #2897 since this one is newer. However, schauveau's comment appears to be correct. There is likely an issue with sharing modifiers across the keyboards in a seat.. If you don't mind, could you please add documentation for --border and --exclude-titlebar as well?\n\nI tried to add emphasis to the warning, but it didn't render how I wanted, so is there a better way to highlight that sentence, or should I just leave it un-emphasized?\n\nI'm fine with it not being emphasized. . Oh actually, one small thing. Can you please add the flags to the bindcode syntax line?. Just noticed that your last two commits are not tied to your github account. Can you please squash the three commits into one (with an email attached to your account) and force push?. Can you replicate on master? This might have been fixed by https://github.com/swaywm/sway/pull/3694.. > However occasionally going to the most right pixel column in firefox (wayland) and scrolling still won't work for me.\nI can only replicate with firefox and the same behavior occurs with both the x11 and wayland backends for firefox and occurs under weston and i3 as well. I'm not sure if that's a bug or intended behavior for firefox, but it is consistent across the board and has nothing to do with sway.\nI'm going to close this as fixed by #3694.. Thanks!. > Maybe - would be better? (I don't know)\nThat sounds fine to me. I'll update this in a couple hours. Changed from . to -. I'm not able to reproduce this. It looks like the same trace as #3311.\nAre you still able to reproduce? If so, can you please provide a debug log and your config?. I think this was unknowingly fixed by #3550. The handlers struct array in sway/commands.c did not have the commands in alphabetical order in 0c975af, which would have caused issues for bsearch.\nSnippet from 0c975af:\nc\n{ \"popup_during_fullscreen\", cmd_popup_during_fullscreen },\n{ \"pointer_constraint\", cmd_pointer_constraint },. Thanks!. > Commands in i3 also seem to not strip trailing whitespace\nI'll fix that in a second PR since it affects binding too. I'll change the current one to not close this issue.. > > Commands in i3 also seem to not strip trailing whitespace\n\nI'll fix that in a second PR since it affects binding too. I'll change the current one to not close this issue.\n\nActually it looks like that's a bug in i3 (https://github.com/i3/i3/issues/3316#issuecomment-405259574) so I'm just going to close this since I don't think we should add support for bugs.. > I can't seem to get backslash continuation working in i3 (still works in config). Can you?\nThought I did, but nope. Removed support since it simplifies the code a bit. Thanks! (Sorry for breaking it). Oh derp, I had it inverted. Thanks!. Can this be closed or is this still an issue for some configurations/setups?. Can you please try the following branch? https://github.com/RedSoxFan/sway/tree/cursor-include-wlr-seat-pointer\nIt also looks like wlroots is outdated. The frame member was added fairly recently (~2 weeks ago). If you are using an AUR helper, it may be necessary to force a clean build of wlroots-git. > Code LGTM, but I'm not sure we should merge this new feature before 1.0.\nI viewed it as a bug since it should have been implemented for i3 compatibility. If this doesn't get merged, none has to get removed from sway-bar(5) since it was documented.. Related https://github.com/swaywm/wlroots/issues/403. Can you provide a debug log? What applications are you experiencing the issue with?. Oh actually try the following:\nset $menu dmenu_path | dmenu | xargs swaymsg exec\nSway can only keep track of which workspace an application was launched in when it executes the command.. I'm going to close this as a duplicate of #3234. Atom and chromium spawn child processes and sway currently does not check process ancestors when comparing PIDs. You should be able to bind the command seat seat0 cursor press BTN_MIDDLE; seat seat0 cursor release BTN_MIDDLE (if you are attaching the device to a different seat, use that instead of seat0) to whatever button you want. If you are using a mouse button, you will want to use the --whole-window flag for the bindsym. Like #3616, the issue is seat_get_focused_workspace returns NULL when a layer surface is focused. However, unlike #3616, simply using the focus inactive does not completely work.\nThe issue with that solution is seat_set_focus will immediately return due to a layer surface having focus so the workspace switch never occurs. Adding a call to seat_set_raw_focus will switch the workspace, but won't consider workspace destruction or emit IPC events.\nI'm not really sure what the best solution is.. > > The issue with that solution is seat_set_focus will immediately return due to a layer surface having focus so the workspace switch never occurs.\n\nMaybe seat_set_focus should do the workspace focus switch and then reset focus to the layer surface?\n\nThat sounds like it could work.. Related https://github.com/swaywm/wlroots/pull/1526. >  Sway Version: 1.0_beta2\n1.0-beta.2 was released over 2 months ago (Nov 29, 2018) and there has been numerous changes to the code base since then. Can you please try with git master?. Full backtrace snippet:\n```\n0  0x000055f70781b413 in container_at_stacked\n(parent=0x55f709099910, lx=100, ly=100, surface=0x7ffd0dcc0080, sx=0x7ffd0dcc0088, sy=0x7ffd0dcc0090) at ../sway/tree/container.c:256\n    child = 0x7ffd0dcc0088\n    box = {x = 10, y = 40, width = 1077, height = 567}\n    seat = 0x55f708f3c340\n    children = 0x55f708f7f250\n    title_height = 0\n    child_index = -2147483648\n    current = 0x7ffd0dcc0080\n\n```\nRelevant source:\nc\nint title_height = container_titlebar_height();\nint child_index = (ly - box.y) / title_height;\nFrom your config:\nfont Hack 0px\ntitlebar_border_thickness 0\ntitlebar_padding 0 0\nSo it looks like you are using a font and padding that cause the title bars to be 0px tall, which is causing a division by zero, resulting in child_index getting set to INT_MIN (as close to negative infinity a 32-bit signed integer can get). I'll have a PR up to protect against this in a minute. > But after the freeze and force reboot no file is being created.\nThe core dump will be removed on reboot. You'll have to ssh in or do something like:\n(sleep 5 && killall sway) &\nsway -d 2>sway.log\nAlso, your system call trace shows [wlroots-0.2/backend/session/direct-ipc.c:35] Do not have CAP_SYS_ADMIN; cannot become DRM master (which doesn't match your debug log btw).\nIf that trace is up to date, you need to verify the capabilities of the sway binary with getcap. It most likely is incorrect.\n. > If all workspaces were assigned to outputs and a new output was plugged in, what would happen?\nA new workspace would be created\n\nhere's the debug log: https://paste.pound-python.org/show/XDvQiwoR98sZcW0yFrJ1/\n\nI looks like the link expired. Can you reproduce and generate a new debug log?. Can you just remove the blank line before the wordexp if, squash the commits, and force push? Aside from those, looks good to me.. Can you cleanup that commit message? I should have said to fixup the commits instead of squash them.. Thanks!. I'm actually able to reproduce this with b57761e833f0198d2bd9ac95b1926cc5b08d6ac3 and wlroots swaywm/wlroots@8600f457be7a538e39914c37b72fee1a933ebe1 with the following (slightly modified version of the original issue):\n- Two outputs: $LAPTOP and $HDMI\n- Start sway with $HDMI disconnected\n- Run swaymsg output \\$HDMI disable (this could also just be added to the config)\n- Connect $HDMI\n- Run swaymsg output \\$HDMI enable, output \\* disable, output \\$LAPTOP enable\n- Only swaybg is running. All applications and swaybar are gone.\nObviously, not sure why you would want to do that for anything other than testing things, but it does reproduce 100% of the time so I'm going to reopen this.\nEdit: debug log. Related https://gitlab.freedesktop.org/wayland/wayland/issues/10. > ``` \n\ninput \"2:14:SynPS/2_Synaptics_TouchPad\" {\n      dwt false\n  tap enabled\n  natural_scroll enabled\n  middle_emulation enabled\n} \n```\n2019-02-09 00:35:30 - [sway/input/input-manager.c:467] adding device: '2:7:SynPS/2_Synaptics_TouchPad'\n\nIt looks like the identifier in your config is incorrect. Also, just for reference libinput list-devices will always show the default settings for the device, not the settings used by Sway. It looks like this is actually an issue with your bar colors, It appears that the border and background colors for inactive_workspace are completely transparent.. If you are using Arch Linux, see https://github.com/swaywm/sway/issues/3631\nAlso in the future, please use the swaylock issue tracker (https://github.com/swaywm/swaylock/issues) for swaylock related items.. Can you replicate the crash on master? I think it might have been fixed by #3643. If you can still replicate, please post a backtrace (if you are using systemd, use coredumpctl gdb sway followed by bt full).\nAs for the tablet tool issue, can you please post a full debug log?\n. Since you said it was working with 1.0-beta.2, it most likely has something to do with either relative pointer or pointer constraints. I think the former is more likely. Unfortunately, I don't have the hardware to test myself.\nCan you send a wayland debug log (preferably as a gist or some other paste bin)? Since osu! is using xwayland, you'll have to start sway with env WAYLAND_DEBUG=client sway 2>xwayland.log.\nSince this will log all operations seen by the xwayland instance, it would be best if you can open sway, launch osu!, experience the issue, exit osu!, and exit sway to minimize the log size.. So I think I may have found the issue. However, I'm not sure how to solve it. \nTablet tools use absolute motion and if the axis hasn't changed, handle_tool_axis will use NAN for that axis. In cursor_motion_absolute, NAN is changed to the cursor's x/y due to the call to wlr_cursor_absolute_to_layout_coords. However, if there is a constraint active and the cursor leaves the surface's bounds, the cursor is never moved and only relative motion is sent.\nThe next time cursor_motion_absolute gets called, the cursor x/y will be the same, despite there being motion in at least one axis for the previous call. Basically, this results in the relative motion being inaccurate.. @robertgzr, can you please try https://github.com/RedSoxFan/sway/tree/fix-abs-motion-relative-pointer and let me know if it fixes it (with pointer constraints enabled)? If it works, I'll write a better commit message and submit it as a PR.. > I don't know if it could have anything to do with it but in the patch you set cursor->previous.{x|y} in cursor_motion_absolute while they also get updated at the end of the function by cursor_send_pointer_motion\nCan you please try the branch again? I just pushed a new commit that should address this.. Can you send a wayland debug log on that branch? I'm curious if the cursor hint for the locked pointer is valid and could be of use. > pen works fine until you tap it once, where it goes all sensitive and weird\nThis may be related to seatop_down, which is already planned for removal (#3539). I'm not sure seatop's on a constrained surface even make sense, in general. > Maybe it makes more sense for the IPC to expose NULL, and for swaymsg to display (unnamed).\nUpdated to your suggestion. Other points:\n- This needs to be reset on reload (see default_output_config)\n- This should probably be added to IPC_GET_OUTPUTS. Also just as a note, since sway is currently in a feature freeze for the 1.0 tree, this will not make it into 1.0.. It looks like you compiled without xwayland support. It looks like workspace->current.floating contains a NULL container just like #3043.. If you are able to replicate, can you send a debug log?. @JonnyMako Just to confirm, the backtrace for that debug log matches the one above, right?. > I'm able to reproduce by creating T[S[viewa] V[viewb]] and then trying to move the whole container by dragging \"T\"\nI was not able to get the backtrace for this issue from that. However, I did get an unrelated segfault and submitted #3675 to fix it.. Can you please send a debug log?. > I did. debug.log, bt full\n2019-02-18 11:07:30 - [backend/drm/drm.c:878] Reallocating CRTCs\n2019-02-18 11:07:30 - [backend/drm/drm.c:890] State before reallocation:\n2019-02-18 11:07:30 - [backend/drm/drm.c:900]   'eDP-1' crtc=-1 state=3 desired_enabled=1\n2019-02-18 11:07:30 - [backend/drm/drm.c:900]   'DP-1' crtc=1 state=3 desired_enabled=0\n2019-02-18 11:07:30 - [backend/drm/drm.c:900]   'DP-2' crtc=2 state=3 desired_enabled=0\n2019-02-18 11:07:30 - [backend/drm/drm.c:957] Assigning CRTC 0 to output -1 -> 0 'eDP-1'\n2019-02-18 11:07:30 - [backend/drm/drm.c:961] State after reallocation:\n2019-02-18 11:07:30 - [backend/drm/drm.c:966]   'eDP-1' crtc=0 state=3 desired_enabled=1\n2019-02-18 11:07:30 - [backend/drm/drm.c:966]   'DP-1' crtc=1 state=3 desired_enabled=0\n2019-02-18 11:07:30 - [backend/drm/drm.c:966]   'DP-2' crtc=2 state=3 desired_enabled=0\nI don't have time to dive into this at the moment, but this appears to be hotplugging from zero to one outputs. This issue may be related to the noop output\nI'll look into this further tonight (EST) unless someone beats me to it. @sanga Since you seem to be able to reproduce this to some degree, would you be willing to attempt running with ASAN and upload the debug log? You would need to build sway with the following: meson build -Db_sanitize=address. Note that this will still cause sway to crash and may change the time in which it does, but may give some good information if it is a use-after-free or something similar.. Related https://github.com/swaywm/sway/pull/3161. (Sorry for accidental close/reopen. Misclick while attempting to reply on my phone). It looks like it was decided to diverge from i3's behavior on this due to popular demand. See https://github.com/swaywm/sway/pull/3031\nThere is mention in that thread about adding an hide_lone_tabs config option though, which does not appear to be followed up upon so I'll turn this issue into the tracker for it.. Thanks!. > > It is possible for wlr_surface_is_subsurface to return true, but\n\n\nwlr_surface_from_wlr_surface to be NULL.\n\nIn which case does this happen again? We should add this to the wlroots docs.\n\nTo be honest, I'm not sure. I modeled this PR around one of your wlroots ones (https://github.com/swaywm/wlroots/pull/1396).\nEdit: The subsurface has been destroyed... If only I read your function documentation.... > I'll update the docs.\nSomehow I completely ignored all documentation in that PR that I was referencing... It is already documentated. @JonnyMako, I am able to replicate when dragging into a descendant of the container. Working on a fix. @JonnyMako, can you please confirm that this fixes your issue (https://github.com/swaywm/sway/pull/3675#issuecomment-463452459)?. > Probably a dup of #3030 \nThat was for focus output right not focus right so this is not a duplicate.\nHowever, the currently implemented behavior matches i3's behavior. Instead of wrapping over the outputs, focus left/right will wrap the other side of the current output (when there is no output in that direction), which has no effect when the workspace is empty or there is only one descendant.. > even if there are no workspaces on \"right\" output\nAn output always has at least one workspace. > Actually, it has an effect, it deactivates current workspace, even if there are no workspaces on \"right\" output\nCan you give a more detailed explanation on what the issue is? In my testing, sway's behavior appears to be identical to i3's. I am not able to replicate. Would you be able to provide a debug log? The following should allow you to obtain one without having to do a hard reboot:\n(sleep 10 && killall sway) &\nsway -d 2> sway.log\nIf this just started happening today, can you try rolling wlroots back to https://github.com/swaywm/wlroots/commit/5c8d2da0a1cd3839663d070532ba45bd61d374ca? Maybe there is a case where modesetting to the current mode is needed that is being overlooked.. Actually I am able to replicate this. Reverting https://github.com/swaywm/wlroots/pull/1545 fixes it for me.. Duplicate of #3014 . > But enabling the output later should give the CRTC?\nCurrently on master (https://github.com/swaywm/sway/commit/e8c472aee95ce1cbb6feef04d970327d1717d7fc), apply_output_config would return early due to modeset_success being false so dpms on would never take effect. If you did output <identifier> disable and output <identifier> enable, then it would get a CRTC.\n\n(Maybe we can disable the output early too, if needed? That would make it so the DPMS code is all in one place)\n\nThat would not work since a DPMS'd off output is still usable (blindly anyway) and should have the resolution, scale, and transform set correctly.. > We can merge new features into master, I cherry pick bugfixes into the 1.0 branch for each rc.\nOh ok. Thanks!. Can you please send a debug log (sway -d 2>sway.log)?\nAlso, sway does not use wlc anymore so any of the WLC_ environment variables will have no effect.. Just as a sanity check, can you try using input * { instead of the identifier.\nAlso, I see you are using alacritty in the log. Are you experiencing the issue in all applications or just alacritty?. 1. That's probably a bug in sway. I'll take a look\n2. https://github.com/jwilm/alacritty/issues/2041. For 1, what do you have in your input * block? I'm not seeing it in the debug log\nOr did you mean it works with input *, but not input 1:1:AT_Translated_Set_2_keyboard?. Are you using an external keyboard? There is also 2522:37008:A4TECH_USB_Device_Keyboard, which sounds like it could be an actual keyboard. If not, I'd try the various identifier listed by swaymsg -t get_inputs until you find the right one. If input * works, one of the identifiers should match the device you are using. > Also I installed alacritty-git from AUR, still no changes, however, patch was merged to master according to their bugtracker, weird stuff.\nI think the fix was for a dependency so it may not be pulling the newest version of the dependency yet. Closing via #3855 . nitpick: can you change the commit message to something that identifies the header being removed?. Thanks!. > Typo in the commit message?\nEh, I guess tshooting isn't as common of a shorthand for troubleshooting as I thought. Maybe a regional thing or something since searching for it doesn't yield results. Changed the commit message.. I'm getting defunct swaybg processes with this when the output config changes, an output is unplugged, and after reloads. Thanks!. > there are still issues with resizing: mismatch window - borders size, which might also produce artifacts on the background tiling area.\nCan you provide more information and possibly reproduction steps and/or a screenshot?. The first screenshot is due to mpv keeping the aspect ratio constant and sending a surface smaller than the view. In this situation we just center the surface in the view. I think this is working as intended, but it is possible that it could be changed to have sway render black bars.\nThe second is #3029 . I think this is a duplicate of #3114 . You just need to update scdoc to 1.8.1 and it should work. > Sadly Manjaro's latest version of scdoc is 1.6.1-1. Does scdoc have any source code I can download?\nI guess Manjaro's repos are not up-to-date with Arch's. The source is available at: https://git.sr.ht/~sircmpwn/scdoc. Duplicate of #2529. It is the same core issue, just a different way of producing it. > If it's confirmed as a bug, I'd like to fix it as a #firstpatch\nSince this does not match i3's behavior, I'm going to confirm this as a bug. Feel free to work on it and send a PR. Thanks!. Can you post the output of coredumpctl gdb sway followed by bt full?. @mithodin Can you also post the output of coredumpctl gdb sway followed by bt full? You'll have to reproduce the issue first and run the commands without rebooting. If your backtrace looks like the one above with all the question marks, please recompile with debugging symbols.. In sway 1.0-rc3, sway will abort and show that error before the display is even created so it shouldn't be freezing the system even when XDG_RUNTIME_DIR is not set.\nCan you try env XDG_RUNTIME_DIR=/tmp sway -d 2>sway.log from a TTY and see what gets logged?. Since the log looks truncated, I'm guessing Sway is crashing and the direct session is not cleaning up properly.\nCan you please send a full backtrace? Since you aren't using systemd, you'll have to enable core dumps, reproduce, and without rebooting (so probably via another SSH session) run gdb -q /path/to/sway -c /path/to/coredump followed by bt full.\nTo enable core dumps, you can try running ulimit -c unlimited. If that doesn't work, you'll have to edit /etc/security/limits.conf, raise the core hard limit, and try again. As for the location, you should be able to find the pattern used with cat /proc/sys/kernel/core_pattern. It doesn't look like that dmesg snippet has anything to do with sway. Since it looks like I was wrong and sway is not crashing, the next step is to figure out where it is freezing.\nMy guess is somewhere in spawn_swaybg. Can you try https://github.com/RedSoxFan/sway/tree/spawn-swaybg-debug-log and post what the last line of the debug log is? If it is spawn_swaybg successful, then I'm wrong again and it may be easier to find the freeze location with gdb\n(Almost all of the calls in spawn_swaybg are non-blocking, but I added the log lines anyway). > 2019-03-02 21:47:09 - [sway/config/output.c:252] spawn_swaybg waitpid\nWell that confirms my suspicion of it blocking on the waitpid, but I also don't see how it's possible. The child process forks again and immediately exits.. Yes, we spawn swaybg differently now. See #3708. The new way is better and is the same way we have launched swaybar for a while. Just need to figure out the hiccup that is this issue.\nAs you found, you can use sway without a background until this is resolved. Can you please try #3807?. Duplicate of #3658\nThanks for the additional debug log. > Maybe we should just put assertions in command handlers too? I don't think there's a case in which commands should be executed in such a state? Not sure, though.\nI changed it to have sway_asserts for the command handlers. It should be impossible to handle a command before output_enable returns.. I'm actually going to label this as a bug since sway's behavior unintentionally differs from i3's. For some reason, I thought this did not work in i3, but just confirmed it does.\n\nHow difficult would this be to incorporate in Sway? I am prepared to run the latest git, provide logs or provide whatever information you may need.\n\nIt should be relatively easy to implement. No logs or anything needed. Maybe related to https://github.com/swaywm/wlroots/pull/1537. > I don't think so, since moving the cursor shouldn't update its image.\nIt could be depending on if it is cross surface boundaries or the client is changing it.. Thanks!. > would have liked a full backtracked to confirm\nIt is a use-after-free so you have to use ASAN to even get the stack trace since it will be silently ignored without it. I'm not sure if there is a way to get a full backtrace. Either way, you can tell by the line numbers that seat->workspace is the cause of the use-after-free. Thanks!. Thanks!. Thanks!. I have a few example replies/events to fill in (which I'll do in a few hours) so I'm going to leave the [WIP] for now. Everything else should be there so if anyone wants to review this and provide feedback, it is ready for that.\nI documented every property that was documented for i3 and I think I got all the new additions for sway. Anything that is undocumented for i3 is also undocumented for sway.. Ready for review. > Fix the FreeBSD build\nThe FreeBSD build is failing because this requires scdoc 1.9.0 and it is using 1.8.1. I don't think that there is anything I can do about that. > I'm guessing it involves syncing up with whoever maintains the scdoc port in FreeBSD.\nBased on https://svnweb.freebsd.org/ports/head/textproc/scdoc/distinfo?revision=493833&view=markup, it looks like it was already updated ~48hrs ago. @jbeich It looks like the scdoc port in FreeBSD was updated to 1.9.0 about 48 hours ago. Any idea why the CI is still pulling 1.8.1?. @jbeich Thanks for the information! Sorry, never used any BSD before and from the web view it looked like it was updated. I didn't realize there was another process after since I'm used to Linux where it doesn't update the listing until it is available.. Update: FreeBSD build is passing now. Can you remove the hide_edge_borders lone_tab remnants since the flag more powerful?. Thanks!. >  The first one is 'additive' transforms. The would allow users to prefix the rotation value with a plus (+) or minus (-), and this value would be added to the current rotation value.\ntransform [flipped-](90|180|270) [clockwise|anticlockwise] already exists for +/- 90/180/270 degree relative transformations. I'm not sure how useful arbitrary degree rotations would be, but there may be a use case\n\nThe second is that I would like to improve the arg parsing for the transform command. Currently, it won't allow for a user to have a rotation of 0, you have to pass normal. Same for 360 or 720 (obviously these are redundant, but still valid). To fix this, I would like to parse the value as an int and then apply a modulus operation to clamp it between 0-360 degrees. It looks like the command also allows flipped- in the value so the actual implementation will be a bit more complex.\n\nI'm fine with 0 as an alias for normal. However, I am not a fan of clamping the transformation. I think that whatever is supplying the transformation should be in charge of clamping the values and making sure it is supplying a supported value. My comments on the arbitrary degree rotations here are the same as above. > @RedSoxFan There isn't a way to have additive rotations right now. I didn't explain what I mean by that very clearly. If I specify a rotation of +90, then I would expect executing it four times to bring me back to the original rotation. Values without a plus/minus prefix will behave as they do now (a static rotation).\nFor +/- 90/180/270 transformations, you can append the transform with clockwise and anticlockwise for relative transformation. So transform 90 clockwise four times (or transform 180 clockwise twice) would accomplish that. Other arbitrary degree transformations are not currently supported\n\n@ddevault Are commits being cherry-picked from master?\n\n(Obviously I'm not ddevault, but) yes. > I have a feeling you won't be keen on this either though\nSubmit a PR. If others are fine with it, I won't block it from being merged. The only part of it that I'm not a huge fan of is the clamping since I think that should be done by the caller. If you are parsing it as an integer, that is trivial anyway. If you are going that route, you may want to consider making flipped a flag to make parsing easier. Relative could be implemented as one as well if you wanted.. Can you send the output of swaymsg -t get_outputs before and after rotating? It's working fine for me with your config snippet. Thanks!. The value given to set is a literal replacement so\nset $HELLO \"<span bgcolor='blue'>Hello</span>\"\nbindsym Alt+F3 mode \"$HELLO\"\nmode --pango_markup \"$HELLO\" {\nwill be converted to\nbindsym Alt+F3 mode \"\"<span bgcolor='blue'>Hello</span>\"\"\nmode --pango_markup \"\"<span bgcolor='blue'>Hello</span>\"\" {\nwhich will not work due to having invalid quoting\nWith #3777, the following will work\n```\nset $HELLO \"Hello\"\nbindsym Alt+F3 mode $HELLO\nmode --pango_markup $HELLO {\n- or -\nset $HELLO Hello\nbindsym Alt+F3 mode \"$HELLO\"\nmode --pango_markup \"$HELLO\" {\n``. Thanks!. Since the default config usesdpms onanddpms offwith the swayidle example, should this be changed todpms on|off` for consistency?. Thanks!. > sway-input currently recognizes touchpads as \"mouse\", which is not granular enough. However, considering that GNOME can distinguish between such devices using libinput (i.e. it separates touchpad and mouse configuration), I suppose that the information should be available from libinput.\nLooks like GNOME checks whether the output of libinput_device_config_tap_get_finger_count is greater than zero for the device (https://gitlab.gnome.org/GNOME/mutter/blob/master/clutter/clutter/evdev/clutter-input-device-evdev.c#L1459). According to the i3 ipc documentation (https://i3wm.org/docs/ipc.html), the currently implementation is correct:\n\nwindow_rect (map)\nThe coordinates of the actual client window inside its container. These coordinates are relative to the container and do not include the window decoration (which is actually rendered on the parent container). So, when using the default layout, you will have a 2 pixel border on each side, making the window_rect { \"x\": 2, \"y\": 0, \"width\": 632, \"height\": 366 } (for example).\n\nI'll create a PR to clarify this in sway-ipc(7). Can you change this to match the formatting that wlroots uses?. Do you want this merged now or wait for FreeBSD (and possibly #3792)?. > I think it'd be better to merge this as-is and improve it when the situation settles.\nSounds good. Thanks!. There is a bug in scdoc 1.9.1. The patch to fix it has been submitted (https://lists.sr.ht/~sircmpwn/public-inbox/%3C20190228171655.3854-1-bosrsf04%40gmail.com%3E). Update: scdoc was patched ~90 minutes ago so the current scdoc master should allow building sway with man pages enabled. 1.9.1 is still the newest release, but the patch should be included in the next scdoc release. scdoc 1.9.1 is no longer the newest scdoc release so I'm going to close this. sway should have a successful build when man pages are enabled with scdoc 1.9.0 and 1.9.2 or newer.. This is an issue with Spotify itself. It is setting WM_CLASS after mapping so assign commands are not going to work with it (and it is also a ICCCM violation). According to a Spotify developer in 2016, it is a limitation of the way they are using the Chromium Embedded Framework (CEF).\ni3 recommends using the following instead (which is working for me in Sway):\nfor_window [class=\"Spotify\"] move container|window to workspace $workspace. > If the screen to the left (pos 0,0) is disabled, Firefox (with wayland enabled) will no longer show any menus \nThat is https://github.com/swaywm/sway/issues/3135#issuecomment-448794177 and unrelated to this issue.\nThis issue is probably due to clients not being able to change the resolution and whatever the native resolution for HDMI-A-2 is (which I'm guess is not 1920x1200 since it works with that mode), is not supported by the game. After reading https://bugzilla.redhat.com/show_bug.cgi?id=1289714, it looks like the solution may be implementing viewporter (wlroots tracker for viewporter - https://github.com/swaywm/wlroots/issues/633). > HDMI-A-2 native resolution is 1920x1200.\nSo HDMI-A-2 automatically gets set to 1920x1200 even without it being set in the config? Can you post the output of swaymsg -t get_outputs with and without the config line? If the mode is the same, it should make no difference.\n\nI just think there should no be error or crash with games in that situation, there should be either warning that something is missing, or games should just work.\n\nSway has no control over the games code and cannot detect when it is going to crash. What version of xwayland are you using? extremetuxracer is working fine for me in Arch Linux with xwayland 1.20.4 with the same config. It looks like https://gitlab.freedesktop.org/xorg/xserver/merge_requests/2/, which was merged in 1.20.2 might be related.. Thanks!. I'm still -1 on this. All this does is complicate the code to do a modulus on the degree given, which I still think should be done by whatever/whoever is feeding the transform to sway. Additionally, this will accept any integer and truncate it one of the valid values. I do not think giving output <output> transform 143 should be a valid equivalent to output <output> transform 90. Also, this is not arbitrary rotations since there are 4 possible rotations this will map to (8 possible transforms).\nPutting my opinions on this aside, in case the others disagree with me, here is an actual review:\n- There is way too much duplicated code with minor changes. It needs to be cleaned up in some manor\n- Although they are unlikely to change, the values of the wl_output_transform enum should not be assumed. Use an array and index it to get the transform's value.\n- Consolidate the This allows for: comment into a command syntax instead of a list\n- If the value given is not a multiple of 90, an error should be given instead of truncating it to a valid one.\n- The commit message has to be changed since as I stated above, this is not arbitrary rotations\n\nUnfortunately this doesn't achieve the goal of having negative rotations because Sway tries to parse it as an argument.\n\nNegative rotations should actually work with this code. Use swaymsg -- output <output> transform -<degree> or swaymsg \"output <output> transform -<degree>\". > Unfortunately a fix hasn't been pushed yet to scdoc master, so we can't do a lot about it.\nFYI my patch to fix scdoc was merged into scdoc master ~90min ago. Duplicate of #2897 . Can you please update the commit message to also have a standalone description of the issue and fix?\nOtherwise, this LGTM. > Not sure if it's worth it, but maybe we could add a comment to explain why we reset the focus?\nDone. Hold off on merging this for now. I'll rebase it against #3812 and move the focusing into cursor.c before the button press events are sent. Rebased and refactored now that #3812 is merged. > I wonder whether we should properly damage child surfaces outside of the container's bounds instead.\nI'll see if I can get that working. We started adding the version there to attempt to reduce the bug reports for old versions, which predated the meson version checks. However, meson currently has >= 1.9.0 and 1.9.1 will not work, so it will not display a user friendly error message. This at least documents it in the readme for now since it's fairly obvious a lot of users aren't searching through the issue tracker before submitting a new one (although there is no guarantee they'll read the readme either...). Since you didn't update the version in the scdoc Makefile, scdoc >= 1.9.3 will fail. I can change meson to >= 1.9.2  and then drop the version in the README though. > I can change meson to >= 1.9.2 and then drop the version in the README though\nChanged. > Sorry :< I'm going to release .4 to correct this.\nI'd still rather keep this >= 1.9.2 for now until 1.9.4 actually hits repos.. Sway sets SWAYSOCK on launch. What exactly are you trying to do? Some more information may help point you in the right direction.. > This is a followup on issue #3785 which was IMHO closed too early.\n\n\nAm I right to assume that window_rect is supposed to provide the relative geometry of the window without its decorations?\n\n\n3785 was closed because the question quoted above was answered and better documented. Since #3785 was focused on window_rect, this is technically a separate issue (deco_rect and rect) anyway. Sorry, I didn't get to your follow-up response sooner though\nAs for this issue, #3823 should correct both rect and deco_rect, but please let me know if you notice a case that I missed.\n\nin i3 each floating window is described by 2 nodes (the actual window and its PARENT container) but in sway only one node is used (so no usable PARENT).\n\nI think that sway's current response is sufficient (or at least will be after #3823) in regard to this. The parent is the workspace. @ddevault @emersion thoughts?. > Simply speaking, for a stacked parent container, the code at ipc-json.c:537 should consider the height of the decoration multiplied by the number of siblings.\n3828\n\nThere is a problem in fullscreen mode where a decoration is incorrectly reported.\n\n3827 . @schauveau, I think we are going to hold off on changing the way floating containers are represented until a sound argument is made for making the change, but all of your other points have been fixed and this can be closed, correct?. Thanks for the detailed explanation!\n\nDamaging view children should probably be done in desktop_damage_whole_container.\n\nI ended up putting it in output_damage_whole_container instead, which desktop_damage_whole_container calls for every output. . I just noticed #1883 is to remove output_damage_view. Should I use output_view_for_each_surface directly? If so, I could roll #1883 into this PR since output_damage_from_view is the only other caller of output_damage_view. > It depends how far we want to go with this, but: this will work if the container is a view, but it won't work if the container contains multiple views. We'd need to recursively traverse child containers in this case.\nOops. This should be fixed now\n\n\nI just noticed #1883 is to remove output_damage_view. Should I use output_view_for_each_surface directly?\n\nYeah, why not.\n\nChanged to using output_view_for_each_surface directly. I'll create a follow-up PR for #1883. Thanks!. 2019-03-10 17:47:11 - [xwayland/xwm.c:441] XCB_ATOM_WM_NAME: References & Borrowing - The Rust Programming Language - Mozilla Firefox\n2019-03-10 17:47:11 - [sway/sway/ipc-server.c:323] Sending window::title event\n2019-03-10 17:47:11 - [sway/sway/tree/view.c:440] Checking criteria [title=\"win*\"]\n2019-03-10 17:47:11 - [sway/sway/tree/view.c:446] for_window '[title=\"win*\"]' matches view 0x55c41be49310, cmd: 'floating enable'\n2019-03-10 17:47:11 - [sway/sway/commands.c:253] Handling command 'floating enable'\n2019-03-10 17:47:11 - [sway/sway/commands.c:145] find_handler(floating)\n2019-03-10 17:47:11 - [sway/sway/ipc-server.c:323] Sending window::floating event\nIt appears this is due to your criteria. The window title gets changed to have the word Borrowing, which matches your [title=\"win*\"] criteria. Maybe you want [title=\"^win*\"] instead?\nEither way, this is working as indented so I'm going to close the issue as this is a problem with/side-effect of your configuration. Thanks!. @minus7 how about now?. > The window size isn't zero anymore, but until I move the window, mpv's content is larger than the window: \nOn IRC, it was determined that this only happens when --force-window=immeadiate (and running as a xwayland client), which forces mpv to map at 640x480. After some investigation, I'm pretty sure this falls under the same core issue as #3029 so I'd like to tackle that as a separate PR. Thanks!. If it's is not showing in libinput debug-events, then sway is not getting the event from libinput and there is nothing we can do. It is either a libinput, driver, or hardware issue. I'd suggest starting with the libinput tracker and see where they point you as they'll probably have a better idea where the issue may lie.. Thanks!. There is a missing case for floating views on a workspace that has the tabbed layout set that has no tiling children. I'll submit a bug fix PR in a few hours, if no one beats me to it.. Debug log?. >Sway was compiled without gdk_pixbuf support, so only PNG images can be loaded. This is the likely cause.\n\nI reinstalled sway hoping it would compile with gdk_pixbuf support but I don't believe it did.\n\nAre you compiling it manually or installing from a package? If you are using the Arch Linux package, you'll want 1.0-2 or newer since 1.0-1 was compiled without gdk_pixbuf support. The sway-git AUR package should compile with gdk_pixbuf support since gdk-pixbuf2 is a dependency. Are you using a different AUR package? Does it work with the sway package in community?. Thanks!. Can you post the full debug log?. Thanks. Found the issue. Will have a PR up as soon as I can figure out how to fix it.\nOn a side note, it looks like you are setting output DP-2 bg grey solid_color somewhere, which is invalid. The color should be of the form #RRGGBB. I'll submit a PR to check the color in output_cmd_background. Is this #3135 or something different?. Duplicate of #1865 . 2019-03-14 22:15:28 - [sway/desktop/xdg_shell.c:480] New xdg_shell popup\nGdk-Message: 22:15:28.992: Window 0x559b694907d0 is a temporary window without parent, application will not be able to position it on screen.\nIf you run pcmanfm in weston, you can briefly see the entry box being rendered at the wrong location. This is a pcmanfm issue. Please report it to them.. It is possible to run multiple swaynag instances that have nothing to do with each other. Furthermore, sway does not care what you are executing via bindings and will not kill something you spawn with a binding because you chose to execute it again.\nIf you want it to be single instance, wrap the swaynag command in a script that creates a lock file on creation, removes the lock file on exit, and doesn't spawn another instance if the lock file exists.. > xkb_options \"gpr:alt_space_toggle\"\nThe issue appears to be a typo. That line should be xkb_options \"grp:alt_space_toggle\". (grp not gpr). If you are using setxkbmap to determine whether they are applied, it is not going to work. setxkbmap is an X11 utility and does not work in Wayland. You can check the active layout with swaymsg -t get_inputs\n. I think this combined with #3916 should be good. Don't use clockwise or anticlockwise in the config as they are relative to the current transform. When specifying the transform in the config, use (flipped-)90/180/270 directly. > Maybe we should rename those, they are confusing\nMaybe we can just guard clockwise/anticlockwise with a if (!config->reading)?. > We could do that, but we've chosen not to in the first PR so that you can adjust position with multiple relative commands in the config. It probably doesn't make sense regardless, and would be good to guard them.\noutput <name-or-id> transform 90/180/270 clockwise|anticlockwise does not even work when the config is first read since the output doesn't yet exist and it is not deferred. The only time it triggers is during a reload and the output is not reset in any way before the handler is executed so you experience this specific issue.\n\nTheir name is still confusing though.\n\nSuggestions?. Duplicate of #3007 . Thanks!. Thanks!. Looks like I overlooked that get_output_config skips the wildcard case for #3916. It should be fine to add it with the current version of things. Unfortunately, I'll be away from my laptop for the next ~8hrs. I can submit a PR to add it then, if someone else doesn't before then. > Shouldn't this merge the wildcard config in all cases?\nIt's merged on to the output configs when they are stored, which has better layering. See merge_wildcard_on_all. > Firstly, I like the idea of a wildcard config, either if you specify arguments before specifying an output for the first time, or if you explicitly specify an output of *.\nThe output * should work as a wildcard. If desired, I could change it so anything before the first output gets treated as wildcard, as well\nhttps://github.com/swaywm/sway/blob/50ef791d51f938a367f4086164b7fc9617144c63/swaybg/main.c#L205-L216\n\nSecondly, it doesn't seem like your code checks if the output config already exists, so say if you pass -o X -i Y ... -o X -m M you could merge the configs\n\nSounds good. I'll make the change and push. > Secondly, it doesn't seem like your code checks if the output config already exists, so say if you pass -o X -i Y ... -o X -m M you could merge the configs\nDone. Thanks!. Thanks!. > Currently, I only added an empty array because I don't know exactly how to get the modifiers.\nswaybar does not receive keyboard events so it's not going to be able to access which modifiers are pressed. Try title instead of name. The name property in the IPC reply should be the title (before title_format).\nAs for opening a Carla issue, it would probably be more useful if it set its own app id rather than using python3. These are in the default i3 config. Is there a reason that sway will not be supporting the syntax?. For tiling containers, it uses  ppt, and for floating, it uses  px. It allows users to have the same binding for both instead of having to use one for tiling and one for floating.\nAlso, the syntax is in the i3 user guide under section 6.12:\nresize grow|shrink <direction> [<px> px [or <ppt> ppt]]\nresize grow|shrink <direction> <ppt> ppt is not supported in i3. Not really. Wasn't sure which to use. I'll switch it to bfs. You are correct. I missed that case when testing. I'll update the code. Oops. Fixed. If I understood your comment correctly, this should be fixed. Ok. I'll look at it again in a few hours after some sleep. I'm not seeing what I need to change at the moment. It looks like if border_top is false, then box.y would be con->y, which is the same y that the single pixel bar above the title is rendered at.. Oh ok. Should be fixed now. This can be simplified to !toggle || !had_mark. Sorry. I was incorrect in my statement previously. unmark should remove all marks from all views unless criteria is given. Example: [con_id=__focused__] unmark would only remove marks from the focused view. Similar to above, unmark <identifier> should remove the mark from all views unless criteria is given. unmark results in a segmentation fault. Changing this to !view->marks fixes the issue. . There should be a check against the border style here. If you have a floating view with opacity set below 1.0 and border pixel or border none, the title bar is visible since it is being rendered underneath the view.. Would it be worth moving this to common/stringop.c and renaming it to something like lenient_strcat_size? I would guess that this is not the only place that could make use of it.. Ok. That works. Would a float saved_alpha field in struct sway_container and store/restore it when changing the fullscreen status be fine?. Fixed. Oops. No. Variables are expanded at runtime in this PR, not when loading the config. This allows for something like the following in the config:\nset $term termite\nbindsym $mod+Enter exec $term\nAnd at runtime, you could do swaymsg set $term gnome-terminal and $mod+Enter would spawn gnome-terminal. However, since you need to expand $mod to create the binding, that needs to be expanded regardless.. Fixed. No, because instead of using strdup(output->name) like I do if it's not in the list, I'm just re-inserting the same copy on the following line. I could do the following, but I felt it was a waste to make a duplicate after freeing a duplicate:\n`c\nchar *name = ws->output_priority->items[new_index];\nlist_del(ws->output_priority, new_index);\nfree(name);\nlist_insert(ws->output_priority, old_index, strdup(output->name));. I switched it to using a nested for loop. Since it's only ever removes the current element, it should be fine.. I added a debug line before line 488 and got bar->config->height = -1. In sway/config/bar.c, there is bar->height = -1 (line 82), which is passed across the IPC. Unless bar <bar-id> height <height> is set in the config, bar->config->height will start off at -1 and line 488 will not force a positive height. I could change sway/config/bar.c:82 to bar->height = 1 instead, if that would be preferred.. Nitpick: Group the wl_signal_emit line with the block above (since that block does the reparenting) and move the blank line below.. Updated to use @SirCmpwn's suggested format. Style: Use tabs not spaces.. Style: Lines should not exceed 80 columns.. The parens are not needed on this line. The path? I can remove it. I just followed the same path formats that sway uses.. That increases the complexity of command line arguments since --color <rrggbb[aa]> (which is two arguments) could be given instead of --color=<rrggbb[aa]>. I guess I could make the = mandatory for command line arguments ~or detect whether there is a = in the argument~ (actually the latter wouldn't work since they don't all take arguments).. After discussing on IRC, we decided to keep it as is. @emersion's complaint was with the manual -C, --config handling. Since the config file needs to be loaded first and then have command line overrides, we agreed to keep it as is.. On IRC, we agreed to keep the path for now to maintain consistency with other tools.. ...and that's why I usually don't try to push something quickly before having to go afk...\nExtra parens are now removed.. Not all of these headers are needed.. I think this should be part of struct sway_root instead of struct sway_server. This does not match i3's behavior. For views that were tiling that are added to the scratchpad, this does match. For views that were floating (or moved while in the scratchpad), the location is retained relative to a pseudo output.\nhttps://github.com/i3/i3/blob/next/src/scratchpad.c#L248\nhttps://github.com/i3/i3/blob/next/src/floating.c#L926\n(I'm fine with this being changed in a follow-up PR). So currently this PR centers the view if not in bounds of the output.\nIn i3, if you have two outputs of the same resolution, the view will always be at the same (x, y) relative to the top-left of the output.\nFor outputs of different resolutions, the views may extend over the bounds of the output. I'm not exactly sure how the views are being translated on the outputs. I think the second link contains the  function doing the translation.. > It would make sense to add a comment stating that.\nAdded\n\nWhat about case sensitivity? Shouldn't these use strcasecmp?\n\nFixed. This line should be indented one more level. Reverted it back to what's in master. See the strike-through text in the PR description for the original change.. I'm not sure what was going through my head when I did that. Switched to using memcpy.. Needs a reparent signal event here so that the textures get updated when moved to an output with a different scale. What's the reasoning for getting and checking against the first word in this function? . Should this recreate the workspace if it doesn't exist anymore?. Nitpick: can you change BTN_LEFT to button for consistency?. sway/tree/root.h only needs to be added once. Done. Oops. I meant to remove that.\nI added a debug message for the binding being executed.. Style: Please use tabs for indentation. Style: Please use tabs for indentation. Style: Please use tabs for indentation. The second level indentation here is still spaces. The third level of indentation here is still spaces. The third level of indentation here is still spaces. If a user wanted to define multiple bars in the config, this would force bar blocks again (expanded would work fine for one bar). Since there is no release allowing the bar <bar-id> <subcommand> syntax, this could be an option since there probably aren't many people who have the expanded notation in their config.\nAlso, some insight into allowing bar <bar-id> <subcommand> was to make it uniform with input <input-name>, output <output-name>, mode <mode-name>, seat <seat-name>, etc. . Done. Done. > Would it be possible to change spawning behaviour so it only needs to allocate once? I'm thinking something like using a variable like spawn_with_id.\nI'm not sure I understand what you are asking. That's line is inside the creation of a bar with a custom id. spawn would not be set to true if the bar already exists.\n\nI'm also confused why this loop is required later [..] since wouldn't the bar always be the last one?\n\nI'm actually not sure. I'm guessing its an artifact from an older version of the codebase. I'll remove the loop. The loop has been removed. I also fixed up a few of the commits to group them better since there were multiple small related changes.. Can you please remove the leading space before the tab on line 150?. Since ic can be NULL (no user config for the input device), it is possible to segfault here. Please add a null-check for ic to the condition.. Thanks. Instead of applying the suggestion and adding a commit for the typo, I just fixed it locally before rebasing.. You need to free ws->label before assigning a new value here to avoid a memory leak.. ws->label also needs to be free'd here. Correct. ws->label held the only reference to the value.. Unless I'm missing something, it looks like free_flat_list frees all of the elements of the list before freeing the list itself.. I replaced the list_foreach(..., free) and list_free with free_flat_list, which should have the same end result.. Oops. Fixed.. Style: Lines should not exceed 80 columns. Sorry. I missed this before. You cannot compare a floating point value with NAN to determine whether the value is NAN since NAN != NAN. You can either use isnan(scroll_factor) or scroll_factor != scroll_factor.. Done. Changed all replies in the case to use strlen. Done. Fixed. It is?. Added a check for config->reading.. 1 arg: gaps <amount>\n2 args: gaps <horizontal> <vertical>\n4 args: gaps <top> <right> <bottom> <left>\nShould I reword <amount> to something like <all>?. Fixed both. Changed to <all> and added spaces. Style: Can you please change this so it does not go past column 80? . Fixed. Fixed. The caller will not have the wildcard config merged on top of the default output config. Without this outputs without their own output config will not get reset on reload and just have whatever is in the wildcard config itself changed.. I refactored it to move those lines above the branches. Currently, the wildcard config gets merged on to all output configs when it is modified so the output config already has the information from the wildcard config. See merge_wildcard_on_all (L90) and store_output_config (L100).\nWildcard is currently treated as a special shorthand to apply to all rather than plain defaults. Changing it to apply wildcard here instead would be a breaking change. For example, if you manually set dpms on for a specific output, swayidle would not be able to change the dpms state with output * dpms off since the output specific dpms on would override it.. Do I just need to add a call to wl_surface_damage_bufer or can you please explain what I should be changing?. When I add that, swaybar crashes with absolutely no useful information:\n``\nCore was generated byswaybar -b bar-0'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007f03d8a0ed7f in ?? ()\n(gdb) bt full\n0  0x00007f03d8a0ed7f in ?? ()\nNo symbol table info available.\n1  0x0000000000000000 in ?? ()\nNo symbol table info available.\n``. Oh. That works. Thanks. I'll have to keep that noted for the future.. Oops. Fixed. Just checked and mpv is still able to hide the cursor. I split setting the cursor withcursor->image_surfaceinto a new function calledcursor_set_image_surface. If this implementation is preferred, I'll fixup the commit before this is merged.. Done. Added. Oops. Yes, they do. Fixed.. The correct indentation here should be a single tab. The indentation here is wrong, but there is also no need to alter this file.. The indentation here is wrong, but there is also no need to alter this file. Yup. Should be fixed now.. Actually, it wouldn't since the state just wouldn't change during an operation and state is only used for bindings, but I think this is a better approach anyway.. Derp. Fixed. Without the double newlines, it's just all on a single line when viewing the resulting man page.scis stored inconfig->seat_configsinstore_seat_configand should not be free'd here. Related: https://lists.cairographics.org/archives/cairo/2005-July/004448.html. Changed. Oh right. Changed. Yup, moved. I just went off the0value from the man page. Although it looks like the code never actually allowed for0`.\ndisable would be fine since all valid button events start with BTN_ and the only other syms we support are the ones starting with button for x11 button mappings.. Changed it to disable. Also, can you please reset state->args.color.text.input after setting the cairo source?. You have to store the value before changing it. Currently, this line is a nop. It is also a memory leak and will later result in a double free. Can you also add a check for show_caps_lock_text here since both can be disabled and some other form of text may be shown?\nTbh I'm not a huge fan of setting the font color here, but moving it would require changes that don't belong in this PR. Removed cast and added the missing const modifier.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please wrap this line so it does not go past column 80?. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. This file should not be readded. It was replaced by sway/commands/bar/bind.c in #3344 . Can you please combine cmd_name); with the line above?. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Since this is being modified, can you please add the braces and make this a block to conform with the current style guide?. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine the Expected... line with the previous line?. This should be modified so it does not revert #3398. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. This should be changed to not revert #3342 . Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please remove the period and combine these into a single line?. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please rewrap the arguments here?. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. Can you please combine this into a single line? Line wrapping is no longer necessary here.. This should be modified to not revert #3343. Can you please combine this into a single line? Line wrapping is no longer necessary here.. When running resize grow width 10px or resize grow height 10px on the first or last child, sway segfaults since prev and next get assigned invalid values here that are later dereferenced.. Fixed. Oops, missed that one. Fixed.. Changed. Changed. I think these should be enum sway_fullscreen_mode now. I think this should be replaced with cursor_rebase(cursor) so that it handles layer surfaces as well. Uh sure, I can change it to use wl_list. I just used list_t since that's what all the other bindings are using. This has been modified to use wl_list. I don't think this is specific to floating views anymore so the comment should be updated (repeat for xdg_shell_v6 and xwayland). @ddevault With scdoc 1.8, is it intentional that the underscores have to be escaped here to underline the whole word? I'm not sure due to the outer underscores.. This needs to be freed in i3bar_block_unref. free(NULL) is a no-op so the condition here is actually unnecessary and can be removed. Yes, otherwise it will replace the final null terminator with ;. It could be changed from >= to == though.. It will, but the following line line[line_length] = ';' should not be executed for the final token. For swaymsg \"$(echo 'workspace 1\\nworkspace 2')\", buf will be changed from workspace 1\\nworkspace 2\\0 to workspace 1;workspace 2\\0\nWithout the check, it will become workspace 1;workspace 2; and the null terminator will be lost. Style: use tabs not spaces. I think you have to write your own, which should be trivial since it is a small enum. This could be simplified to the following, which does fit on a single line:\nc\nbool create = argc > 1 && strcasecmp(argv[1], \"--create\") == 0;. Since GitHub won't let me add the comment to the actual lines, can you change all ocurrances of seat to be the same for consistency? seat is redefined in the body for back_and_forth (L211) and config->handler_context.seat is used directly in seat_consider_warp_to_focus on L227.\nSince this is in a command handler, config->handler_context.seat should be set, but input_manager_current_seat() should return config->handler_context.seat when set. I don't really care which is used, but it should be consistent. The wildcard config is only ever applied directly when there is no output specific config. If there is an output specific config, that is applied instead.\nhttps://github.com/swaywm/sway/blob/77a3694a782f48ea476958bf97e3f82ebafae0b1/sway/config/output.c#L375-L381. Changed. Done. https://github.com/swaywm/sway/pull/3744. Not sure what happened there. Should be fixed. Nope. Just missed it. Changed. binding->flags must be BINDING_TITLEBAR | BINDING_BORDER | BINDING_CONTENTS (aka whole-window) for the bindings to trigger on a workspace. Earlier in the function, click_region is set to that value so a simple equality check should be sufficient. Actually, nevermind. It does need to be bitwise since there are other non-region flags. Changed. This needs a NULL check for view->xdg_decoration since not every view is going to have a xdg_decoration. Also, only xdg_shell views can have a xdg_decoration so it probably makes more sense to have this in sway/desktop/xdg_shell.c. Move this up and remove the out_chdir label. Invert this and have the sway_log error inside saying failed to restore working directory. Invert this, have through wordfree in here and remove the out_wordexp label. nitpick: can you change this to cleanup for consistency with the rest of the code base\n(sorry missed this one before). Move everything that uses the wordexp in there (it's only 6 lines). The blank line before the if can also be removed. The line wrapping is off here and there should not be single quotes around the flag. It looks like the flags does fit on the line below once the single quotes are removed.. Can you rename this to detected_subpixel?. Can you change the order of these includes so the sway/ ones are grouped and in order?. Can you move this debug line below the if?. Oh sorry, missed this. Either use:\nc\nstruct sway_output *output = wlr_output->data;\noc->subpixel = output->detected_subpixel;\nor change the function signature to take a struct sway_output instead of struct wlr_output and use\noc->subpixel = output->detected_subpixel;\n. Actually use (along with the change in default_output_config):\nc\nif (oc && (oc->subpixel != WL_OUTPUT_SUBPIXEL_UNKNOWN || config->reloading)) {\n    sway_log(SWAY_DEBUG, \"Set %s subpixel to %s\", oc->name,\n            sway_wl_output_subpixel_to_string(oc->subpixel);\n    wlr_output_set_subpixel(wlr_output, oc->subpixel);\n}. Extra indent here. Otherwise, LGTM. Thanks! Fixed, fixed up, and force pushed. Changed. Fixed. Fixed. Fixed. Changed. Changed. s/teh/the/. I just moved it into seatop_begin_move_floating so no. Can you  please also change this to subpixel or subpixel_hinting and document it in sway-ipc.7.scd? (swaymsg pretty print will also need to be updated to reflect the change). Ya, I think I just got confused while testing something. This should be executed, otherwise the following will create four input configs for type:touchpad:\ninput type:touchpad {\n  tap enabled\n  tap_button_map lmr\n  scroll_method edge\n  natural_scroll disabled\n}. If this is not a type config and a matching type config exists, that should be used as the base here. If this is a type config, it should be merged on all configs of the type similar to the wildcard. Note that this will not have any effect in the config since the inputs do not yet exist so it will have to be handled on retrieval as well. This is not sufficient. This will need a somewhat simpler version of get_output_config . This should not be changed. I think it's needed for the double fork for the wayland client socket. Just as a note, that's currently in master. I just moved the function. Can you wrap this in log_libinput_config_status?. If wlr_seat isn't needed, the variable can be removed instead of commented out. Can you either implement the --no-warn flag or remove this code block?. I think this should be uncommented. dummy_binding needs to be freed after seat_execute_command. This should probably be uncommented. Extra set of parenthesis here. This should be free_switch_binding so the command is freed, as well.. This should also be free_switch_binding so the command is freed. s/--release and // or maybe just replace the whole line with // Handle flags. Looks like this still needs log_libinput_config_status. The condition here appears to be inverted. --locked should allow execution when locked or unlocked. Without --locked, the binding should only execute when unlocked. This doesn't need to expose implementation details such as WLR_SWITCH_*. s/mouse/switch/. Extra ). ",
    "BigfootN": "Thank you. ",
    "mariusor": "See the link in my original post, it was the configuration used.. Thanx for the quick fix.\nIt works to show the window in the scratch workspace, but it doesn't work to hide it again. I'm not sure if it's the same issue, or not.\nbindsym $mod+Shift+p [class=\"Pidgin\" instance=\"Pidgin\" title=\"Buddy List\"] scratchpad show\nbindsym $mod+p [class=\"Pidgin\" instance=\"Pidgin\" title=\"[^(Buddy List)]\"] scratchpad show\n\nActually the behaviour is somewhat stranger than that: see my two bindings above. With the current build, $mod+p shows conversation, but it gets hidden at $mod+shift+p. The Pidgin's buddy list keybinding with $mod+shift+p works to show it (if conversation is hidden) but not to hide it, and then, to hide it I have to use $mod+p.  \nThank you again.. @SirCmpwn could you please point me in the right direction for verifying why the key bindings work like that? Maybe I can crop up a fix.. OK. No worries. :) Then maybe you have a suggestion for a first time contribution?. Hi @keithbowes, I took a look at your issue, and I think besides explicitly requiring the latest json-c version in the cmake file there's really nothing that can be done. \nWhen they release the next version, which will probably have this API break, we can update the code by converting the counters to size_t.\nI'm not sure if @SirCmpwn would agree to this.. @SirCmpwn the changes required for changing the iterators to size_t's are minimal. I think it's a better idea just to follow the project and when they release the new version, we update. . OK. Then maybe we should create some wrapper functions? \nI doubt somebody else dictating what they release would go well with the people from json-c. :D. Nope, not yet. \nWith the master version it crashes a lot and behaves quite weirdly. I need to look into it further, as I'm not sure if they made other changes which might be the cause.. So, I'm not sure what to do, using sway with the master version of json-c does not work. This is the log and the stack trace from changing the workspace for example. I'm not too sure what to make of it or how to debug further, but to me it looks like an internal issue with json-c. \nLog\n```\n10/29/17 14:15:19 - [commands.c:425] Handling command 'workspace 1:\u4e00'\n10/29/17 14:15:19 - [commands.c:469] Running on container '1:\u4e00'\n10/29/17 14:15:19 - [ipc-client.c:50] Unable to receive IPC response\n```\nStack trace\n```\nProcess 18564 (sway) of user 1001 dumped core.\n   Stack trace of thread 18564:\n   #0  0x00007f13a1646b0b _int_malloc (libc.so.6)\n   #1  0x00007f13a164967a __libc_calloc (libc.so.6)\n   #2  0x00007f13a2ceac94 json_object_new_int (libjson-c.so.3)\n   #3  0x000055bfbda2894c ipc_json_describe_container (sway)\n   #4  0x000055bfbda2a909 ipc_get_workspaces_callback (sway)\n   #5  0x000055bfbda223c5 container_map (sway)\n   #6  0x000055bfbda223c5 container_map (sway)\n   #7  0x000055bfbda2bd0d n/a (sway)\n   #8  0x000055bfbda2c49f ipc_client_handle_readable (sway)\n   #9  0x00007f13a2adc9b2 wl_event_loop_dispatch (libwayland-server.so.0)\n   #10 0x00007f13a2adb14c wl_display_run (libwayland-server.so.0)\n   #11 0x00007f13a33ceefd wlc_run (libwlc.so.0)\n   #12 0x000055bfbda0fdda main (sway)\n   #13 0x00007f13a15e6f6a __libc_start_main (libc.so.6)\n   #14 0x000055bfbda0ffca _start (sway)\n\n   Stack trace of thread 18578:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18575:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18572:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18579:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18574:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18577:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18573:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n   Stack trace of thread 18576:\n   #0  0x00007f139ec3538d pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n   #1  0x00007f1398b4adac n/a (radeonsi_dri.so)\n   #2  0x00007f1398b4acb8 n/a (radeonsi_dri.so)\n   #3  0x00007f139ec2f08a start_thread (libpthread.so.0)\n   #4  0x00007f13a16bc24f __clone (libc.so.6)\n\n```\n. OK, will try, but I feel like this is a bit more than I can chew. It might take a while. Is it OK to close the PR and come back to it when I've made more progress?. No problem. I was looking through the docs today and was bothered by this. :D \nThanx for merging.. ",
    "DerJesko": "https://gist.github.com/DerJesko/e2bfd742ad29689326164fb424e27c34\nHere is a log. I am currently using the default config. Should I for conveinience of debugging disable that config file and rerun?. Now I feel stupid. Misspelled it XKB_DEFAULT_VARIANT != XKB_DEFAULT_VARINANT. My current working machine is not running sway. I have a old laptop with sway + qwertz. I will try it on there as soon as I have the time to. ",
    "leezu": "@DerJesko does the neo layout work for you with sway now?\nI find that XKB_DEFAULT_LAYOUT=de XKB_DEFAULT_VARIANT=neo sway indeed activates the neo layout, but that the shift key fails to capitalize letters. I.e. shift+a produces a instead of A. Did you experience the same issue?\nThe issue seems to be with xkbcommon given the following error message xkbcommon: ERROR: Key \"<LFSH>\" added to modifier map for multiple modifiers; Using Lock, ignoring Shift. Strangely though I do not have issues with the neo keymap outside sway (e.g. X Server, KDE with Wayland, vconsole, ...) More information can also be found in https://bugs.freedesktop.org/show_bug.cgi?id=97024. ",
    "SilverBut": "@StephenBrown2 Sorry for typo. It is 1920,0 in my config file. Besides, it behaves normally before reload.. To describe it more clearly: Contents are still at HDMI-A-1 or VGA-1. They are not moved to another display. Seems only the position argument is changed.. @SirCmpwn @StephenBrown2 \nSorry for such a late response. Log is [here]:https://gist.github.com/SilverBut/ee367166a713d8ad736e658b48d0de14\nNow version is 0.14.0 and problem still exists.. Seems like some variables are not calculated properly. \nBefore reload: \n08/13/17 20:53:34 - [layout.c:975] Arranging output 'VGA-1' at 1920.000000,0.000000\n...\n08/13/17 20:53:34 - [layout.c:975] Arranging output 'HDMI-A-1' at 0.000000,0.000000\nAfter reload: \n08/13/17 20:53:36 - [layout.c:975] Arranging output 'VGA-1' at 3840.000000,0.000000\n...\n08/13/17 20:53:36 - [layout.c:975] Arranging output 'HDMI-A-1' at 5760.000000,0.000000. > Odd. What happens when you position eDP-1 at 3840?\n@SirCmpwn  I'd rather not try it. eDP-1 is completely broken now, physically.. Here is my opinion: both screen is 1920x1080, and the new arrangement have two problems:\n\nassert( VGA-1 == HDMI-A-1 + 1920 )  failed\nassert( min(VGA-1.x, HDMI-A-1.x) == 0 ) failed\n\nShould be treated separetly. \n\nNot like this will make it worse. Give it a shot.\n\nWill try it later...but let me read the related code first. . @SirCmpwn One OT question: many logs are from debug_log.c:98. Is this work as designed?. @SirCmpwn Thanks for providing get_tree. My fault. Seems class names detected by sway is only Keepassx2. Now fixed using class=Keepassx2. . ",
    "hillyu": "Similar problem happened to me.\nIn my config:\noutput eDP-1 res 1366x768 pos 1920,180\noutput HDMI-A-2 res 1920x1080 pos 0,0\nbefore reload output is configured as defined in the config file.\nafter reload the position is automatically moved as if the original ones are occupying the spots and newly created ones are shifted to the right.\n~ \u00bb swaymsg -t get_outputs                                                                           \nOutput eDP-1\n  Geometry: 1366x768 @ 3286,180\n  Scale factor: 1x\n  Workspace: 10 \uf1bc\nOutput HDMI-A-2\n  Geometry: 1920x1080 @ 4652,0\n  Scale factor: 1x\n  Workspace: 1 \uf0ac. ",
    "m-khvoinitsky": "\nXembed tray icons\n\nYou can consider using KDE's xembed-sni-proxy. For me it looks like inventing the wheel and making sway do the work of swayidle. \nShouldn't swayidle just implement org.freedesktop.PowerManagement? The only problem is that I was unable to find a specification for it (all links I found are 404). However, a lot of applications and desktop environments use it.. Just reported a very similar issue #3111 but it seems to be the same problem.\n\nYou need to use xev to find out the name of the keysym you'll use in the config.\n\nI understand that may be that's not the best argument but it used to work in i3. :D\nIt totaly makes sense to bind to keysym for bindsym and to bind to keycode for bindcode. Especially because there are some latin keyboard layouts which may differ significantly from QWERTY (Dvorak, German, etc). However, that's veeery inconvenient. Probably, there should be some extra command to bind by keycode but using standard QWERTY keysyms. Also, it completely makes no sense to have hotkeys that are specific to keyboard layouts (for people that have more than one keyboard layout).. I've read this bug more carefully: no, that's a bit different issue (properly naming keysyms) rather than #3111.. I update sway & wlroots regularly and there wasn't a crash related to this issue in the last few weeks. So, I guess this issue can be closed now. . Duplicate of #3107. After careful reading of #3107, it's not a duplicate of #3107.. > This is a consequence of \"waiting some time in swayidle and hoping swaylock has had time to startup\".\nI doubt it. I experience the same issue despite I always manually lock screen before closing laptop lid and hence putting it to sleep.\nIt's interesting that I have experienced exactly the same issue using i3 with i3lock, again, always manually locking the screen before putting laptop to sleep.. > Do you mean you lock your screen, swaylock shows up, and when you resume your desktop shows up without swaylock? That sounds very weird.\nYes, exactly.. @camoz, can you clarify whether the issue is still reproducing if you lock your screen manually before putting laptop into sleep?. In my case, 118x118 dots per inch is an actual DPI of one of my displays, so it looks like something a bit different.. It seems that XWayland merely (as well as regular xorg server) gathers DPI from EDID which works fine if you have one display and a regular xorg server. But if you have a wayland compositor which scales windows according to their preferences and assuming that everything that comes from XWayland is 96 dpi, some issues happen.\nSo, the point is: if sway assumes that everything what comes from XWayland is 96 dpi, it should ensure that that everything what comes from XWayland is 96 dpi.. > DPI != scale\nWell, ignoring custom user's preferences based on display proximity, vision, etc., in perfect setup, scale should be equal to display's DPI divided by 96 to get the same picture on different displays to be the same physical size. So, it's not the same, true, but they correlate.\n\nHowever all X11 clients are well aware that they should render in LoDPI, and they do so.\n\nThat's not true. They do it for everything except for fonts. Try to exec, for example, xrandr --dpi 192 and then restart any of your X11 clients.\nProbably, XWayland should not try to detect display's DPI and always use 96 in the first place. From that point, it may be considered as XWayland bug.. So, after long, more careful testing, it seems that you're right: dpi changes happen on display hot plug, XWayland completely ignores setting dpi via xrandr hence the workaround doesn't work.\nI'll try workaround proposed in https://github.com/swaywm/sway/issues/3499#issuecomment-456576277.\nI guess we can close this issue in favor of https://github.com/swaywm/wlroots/issues/1119.. Consider adding: SVG icons support.\nCurrently, for example, Quassel shows sad face instead of icon because its icon is SVG.. I'm not 100% sure that the reason is SVG but that's the only difference that I've noticed between Quassel and working icons. And there is no any hint in logs.. ",
    "max-orhai": "I don't believe it's musl-related, since my coworker (also on Void) had the same problem, using the glibc version of the package. I was able to get both Weston and Enlightenment to start without any trouble, so it's not fundamental to my Wayland setup. Might possibly be WLC, though.\nI couldn't get anything interesting out of gdb, but I gave up fairly quickly. Now that I'm up and running with i3 I'll try to compile sway myself. I don't see any debugging options in the cmake lists... can you give some advice on how to get a stack trace?. ",
    "helaan": "I have the same symptoms, upgraded from v0.13.0 to v0.14.0 and my bar only shows after a reload. I'm running Gentoo on a default/linux/amd64/13.0/desktop profile, which uses glibc.\nEdit: logs, sway config and portage info: https://gist.github.com/helaan/6556a38930d0660dbcea5a82f0090b4d. I performed a git-bisect using wlc 0.0.10 from the repos, system-sway removed and -Wall removed from the CFLAGS to \"fix\" compilation.\nhttps://github.com/SirCmpwn/sway/commit/843ad38b3c427adb0bf319e9613d9813c8d9246c was found guilty. Unfortunately it is quite a large commit and reverting it is not a feasible solution.. DING! Found out why this issue occurs and why this commit is significant. The code in this commit expects dbus to be running when starting sway. On our devices, this is not the case, as indicated by the \"Connection is null, cannot initiate StatusNotifierWatcher\" error message. Users of logind/systemd already have dbus running, but because Void and Gentoo use runit and openrc respectively, this was not the case here. A fix can be found on the Sway Wiki and I can confirm it works for me.. Patch seems to work, at least for me. Can @code8buster also confirm?. I've tried building with the tray disabled, as well as building the current version from git. Both have the freezing issue.. I was able to succesfully reproduce this using Orbment: https://gist.github.com/helaan/9ca559d5870534170d4676eea15e1541. I've tried to fix it myself, but it doesn't quite work yet: convert now exits with the following:\nconvert: unable to open image `8': No such file or directory @ error/blob.c/OpenBlob/2701.\nconvert: no decode delegate for this image format `' @ error/constitute.c/ReadImage/504.\nconvert: unexpected end-of-file `-': No such file or directory @ error/rgb.c/ReadRGBImage/239.\nHere is my non-functional patch:\ndiff --git a/swaygrab/main.c b/swaygrab/main.c\nindex 6e85189..c5f4922 100644\n--- a/swaygrab/main.c\n+++ b/swaygrab/main.c\n@@ -58,13 +58,15 @@ void grab_and_apply_magick(const char *file, const char *payload,\n    if ((child = fork()) < 0) {\n        sway_log(L_ERROR, \"Swaygrab failed to fork.\");\n        exit(EXIT_FAILURE);\n-   } else if (child == 0) {\n+   } else if (child != 0) {\n+       close(fd[0]);\n+       write(fd[1], pixels, len);\n        close(fd[1]);\n-       write(fd[0], pixels, len);\n        free(pixels - 9);\n        waitpid(child, NULL, 0);\n    } else {\n-       close(fd[0]);\n+       close(fd[1]);\n+       dup2(fd[0], 0);\n        execlp(\"convert\", \"-depth\", \"8\", \"-size\", size, \"rgba:-\", \"-flip\", file, NULL);\n        sway_log(L_ERROR, \"Swaygrab could not run convert.\");\n        exit(EXIT_FAILURE);\n-- \n2.13.5\n. #1351 works, swaygrab seems to work fine now.. ",
    "code8buster": "I can try getting more info with gdb. I'm just not sure how I should go about that since I don't develop software. I'll learn everything required to get you the data you will need.. ",
    "j1e8WTb1A1nReiUc": "I have this problem on 1/3 of my screens.  After reloading my config (Mod4+Shift+C) things work as expected.\nSway is version 1.0-beta.1\nGentoo - default/linux/amd64/17.0/ profile. \ndbus is installed with X support. \nI launch sway as mentioned on the Sway Wiki without the ck-launch-session part.\nHere is my sway config, gentoo system information, and sway debug log my debug files\n. ",
    "wyvie": "under xorg using xkb and i3 everything's fine.\nmay try to install other wm or de. will try kde later today or tomorrow\nforgot to mention (not sure whether it's important or not), i'm using arch, my friend with the same issue is using fedora.. well, in plasma on wayland everything seems fine. no unexpected keyboard layout switches.\nthough i've set up the settings using kde settings, so might be different that way. ",
    "sykhro": "Will take on the Italian translation\n\n[ ] it_IT: @sykhro \n[x] README\n[ ] Man pages\n[ ] sway(1)\n[ ] sway(5)\n[ ] sway-bar\n[ ] sway-input\n[ ] swaymsg\n[ ] swaygrab\n[ ] swaylock\n[ ] sway-security\n\n\n[ ] FAQ\n\n\n\nI plan on doing the rest soon. No IRC for now, GMT+2. For IRC, to redirect Italian support to GitHub:\nAttenzione! Il supporto Italiano su IRC al momento non \u00e8 attivo. Per favore, utilizza il tracker su GitHub. uh.. something went wrong, the support subsection hunk wasn't staged properly, sorry. I can resubmit if you want.. Oh, thank you! Btw, the reason I put CET/CEST was because of daylight saving time, but I guess a hour of difference isn't that much in the end. yeah for the time being I don't have time to be active on IRC, I'll leave something in #1318 now. ",
    "gjask": "I've started with Czech translation.\n\n[ ] cs_CZ: @gjask\n[ ] README (#1337)\n[ ] Man pages\n[ ] sway(1)\n[ ] sway(5)\n[ ] sway-bar\n[ ] sway-input\n[ ] swaymsg\n[ ] swaygrab\n[ ] swaylock\n[ ] sway-security\n\n\n[ ] FAQ . I think I fixed what you did not like.. Is Stav v\u00fdvoje better?. \n",
    "DarkReef": "I start the translation into Russian.\n\n[ ] ru_RU: @DarkReef \n[x] README (#1342)\n[ ] Man pages\n[ ] sway(1)\n[ ] sway(5)\n[ ] sway-bar\n[ ] sway-input\n[ ] swaymsg\n[ ] swaygrab\n[ ] swaylock\n[ ] sway-security\n\n\n[ ] FAQ. Well, I'm about to join the channel. And yes, I can provide support here.. Done. @SirCmpwn it's a false issue, can we close it?. @martinetd oh, my bad. Thanks.. \n",
    "horstmannmat": "I can take place, from the pt_BR, since the last user has been deleted :). > > I can take place, from the pt_BR, since the last user has been deleted :)\n\nNope, I'm right here, under a different username. This week, I was updating the README to the lastest version, and I'm waiting for the man pages to settle in order to translate them too.\nEdit: fix grammar, add context.\n\nWe both can do it :) \nTwo is better than one. Done :). We (the other author and me) tried to make as neutral as possible, I agree with you that it should be reviewed by portuguese speakers around the world, not just from Portugal and Brazil.\nI fixed grammars errors and also agreed that vers\u00e3o looks better than lan\u00e7amento. > Having lived in Brazil and Portugal, I think I qualify as a speaker of both pt_PT and pt_BR. Some thoughts:\n\n1. It's not worth it, IMO, to hybridize the dialects, this will lead to more confusion that anything.\n\nAs I said in Mastodon European Portuguese is understandable by Brazilians, and vice-versa. And translate for both at same time could sound strange.. \n",
    "ParadoxSpiral": "@refacto Thanks for the review! (I also included a lot of changes based on a review by @minus7). ",
    "alexbakker": "The translation looks alright. No obvious mistakes. Though some of the sentences are somewhat oddly worded.. The translation looks alright. No obvious mistakes. Though some of the sentences are somewhat oddly worded.. Passing --disable-gpu-driver-bug-workarounds to Chromium fixes this issue for me.. Passing --disable-gpu-driver-bug-workarounds to Chromium fixes this issue for me.. ",
    "SleepyMario": "Yeah it's a bit archaic, which i intend to change. I'm still looking at the right mix between casual and formal language. I don't want to resort to baby-language but turning it too formal is odd as well. \nFeel free to offer suggestions~. @alexbakker Suggestions are appreciated. . Come on @alexbakker , if you're that quick to comment on translation quality, you should be capable of producing something.\nAnd if you were offline then I'm sure you were online when you made your intelligent comments. Now, please, can I have some constructive input please?. ",
    "ycUygB1": "OK, I will try it on nouveau.  I thought the proprietary driver sort of, kind of,  almost worked...guess not. Thanks.. Fair enough.  That is what I get for using a proprietary, closed source driver.   . Works fine on nouveau, by the way.  Thanks.. ",
    "akokshar": "@SirCmpwn I am done with a changes you requested. Could you review again please.. These are related. \nThere were no pipe created for the stdin of a spawned process. The lines marked above are part of a bigger change which defines pipe_write_fd and attaches if to stdin of a status command. Ah, ok. \nI have just made same thing as in a code right above. Condition there is a multi-line one. \nif I do it on a same line it is 116 chars long...\nCan I split it like this:\nif (json_object_object_get_ex(proto, \"click_events\", &click_events) \n      && json_object_get_boolean(click_events)) {\nor just keep it 116 chars long?. ",
    "Ppjet6": "My setup is Thinkpad x250, Intel(R) Core(TM) i5-5300U CPU @ 2.30GHz (Broadwell), Thinkpad Pro Dock. My internal screen handles 1080p, and the two external monitors 1440p, (same model from Dell).\nI forgot to specify I can run sway fine if I have all monitors plugged before I start it, and it does run also on X (I usually use wmii).\nThanks for the comment, I'll try to reproduce and get debug logs.. sway.log.txt\nWhat I did was, from my login shell:\n- Dock the laptop, where one monitor is plugged\n- Plug another external monitor via miniDP directly onto the laptop\n- Start sway, sway --debug &> /tmp/sway.log\nsway started, 3 screens active\n- Open a terminal\n- Remove miniDP monitor\ninternal screen and one external monitor alive\n- Undock\ninternal screen alive\n- Dock again.\nboth internal and external monitor black. I have \"cleaner\" logs here, without dock, and also dmesg with drm debug.\nsway2.log.txt\nsway2.dmesg.txt\nFrom a login shell, no external monitor plugged:\n- sway --debug &> /tmp/sway.log\ninternal screen comes alive\n- Plug external monitor via miniDP on the laptop.\ninternal screen goes away, external monitor comes alive\n- Quit sway.\nEDIT: The behavior with the dock is clearly different, I can't get back to my login shell. I should probably move that to a different issue.. From what I have been able to grasp from a colleague working on weston, the buffer wlc is giving to drm is not big enough. My internal screen is 1080p and the external one is 1440p.. ",
    "Diadlo": "Seems, upstream issue https://github.com/Cloudef/wlc/issues/86. Seems, upstream issue https://github.com/Cloudef/wlc/issues/86. ",
    "WonderWoofy": "I think this is a legitimate issue with the README.*.md files actually.  \nSetcap overwrites existing capabilities each time you call it, so setting CAP_SYS_TTY_CONFIG=eip after a separate setcap to give CAP_SYS_PTRACE=eip, you'll only end up with CAP_SYS_TTY_CONFIG=eip on the binary.\n# setcap cap_sys_ptrace=eip /usr/bin/sway\n\n$ getcap /usr/bin/sway\n/usr/bin/sway = cap_sys_ptrace+eip\n\n# setcap cap_sys_tty_config=eip /usr/bin/sway\n\n$ getcap /usr/bin/sway\n/usr/bin/sway = cap_sys_tty_config+eip\n\n# setcap cap_sys_ptrace=eip /usr/bin/sway\n\n$ getcap /usr/bin/sway\n/usr/bin/sway = cap_sys_ptrace+eip\n\nAs you can see it unsets any cap previously set.  So after a bit of searching through the man pages, I managed to find a reference to how to set two at the same time.\n# setcap \"cap_sys_ptrace,cap_sys_tty_config=eip\" /usr/bin/sway\n\n$ getcap /usr/bin/sway\n/usr/bin/sway = cap_sys_ptrace,cap_sys_tty_config+eip\n\nUnfortunately, I cannot seem to find any possible way to set Enforced, Inhereted, and Permitted in different combinations for two different capability sets.  Here is an example...\n# setcap \"cap_sys_ptrace=ep,cap_sys_tty_config=ei\" /usr/bin/sway\nusage: setcap [-q] [-v] (-r|-|<caps>) <filename> [ ... (-r|-|<capsN>) <filenameN> ]\n\nNote <filename> must be a regular (non-symlink) file.\n\nThat is really of no consequence when the instructions are to give both capability sets the same eip.  But I just wanted to point that out in case anyone finds this post as a reference to a related but different issue.\nIf this makes sense to you, please update the README pages with this information.  Thanks!\n. ",
    "avivace": "Exactly what my issue was about, thank you for the detailed explanation. I concur in updating accordingly the README.. ",
    "viluon": "@SirCmpwn I've provided the relevant script and swaybar configuration. What else is needed?. Sorry. Updated.. \"fungov\u00e1ni\" should be \"fungov\u00e1n\u00ed\" here.. \"vystaven\u00fd\" should be \"vystaven\u00e1\".. Missing a comma before \"ale\".. I'd use \"na\" instead of \"pomoc\u00ed\" here. (\"na ... str\u00e1nce\" rather than \"pomoc\u00ed ... str\u00e1nky\".). \"m\u016f\u017eete p\u0159isp\u011bt\" is repetitive here, and you missed a comma before \"nebo\". \"nebo odm\u011bnou\" should be enough.. \"za\" rather than \"na\". Also reorder this: \"za roz\u0161\u00ed\u0159en\u00ed konkr\u00e9tn\u00edch funkc\u00ed\".. ",
    "rememberYou": "Hi SirCmpwn,\nThank you for your answer. I defined the output * bg `/path/to/my/wallpaper` fill after added the lines with output DP-1 and output e-DP1 but it didn't fix the problem.\nI came up from the initial configuration that sway come up to reproduce this issue.\nIf I define the output * bg `/path/to/my/wallpaper` fill\" line before the lines with output DP-1 and output e-DP1, my DP-1 screen is on the left and my e-DP1 screen is on the right.\nYou can find the configuration file to reproduce this: here\nIf now I define the output * bg `/path/to/my/wallpaper` fill\" line after the lines with output DP-1 and output e-DP1, my DP-1 screen is on the right and my e-DP1 screen is on the left.\nYou can find the configuration file to reproduce this: here. ",
    "keithbowes": "I got it to compile by changing the CmakeLists.txt file to ignore warnings, but I have no idea how to fix the crash.  Mere typecasting doesn't work.  I guess you'd have to really change a lot of Sway's internal code so that it uses the same data types as json-c.. I went out of my way to compile Sway 1.0 alpha 5 and it reports the same problem that Weston  does: eglInitialize fails.  However, at least Weston has the --use-pixman argument (which enables it to start), but AFAIK, Sway doesn't have a similar option.\nThe log\n@dvejmz, same here.  However, I looked at mesa's dependencies and started downgrading them as well until I found the culprit: libdrm.  Now, both Sway 0.15.2 and Sway 1.0 alpha 5 work, until I update my packages again, natch.. ",
    "morxa": "This issue just hit Fedora Rawhide (future Fedora 28). As json-c 0.13 has been released now, are there any plans to adapt sway accordingly? We can't enforce json-c <= 0.12 in Fedora.\nSee https://bugzilla.redhat.com/show_bug.cgi?id=1525020 for the Fedora-related discussion.. This issue just hit Fedora Rawhide (future Fedora 28). As json-c 0.13 has been released now, are there any plans to adapt sway accordingly? We can't enforce json-c <= 0.12 in Fedora.\nSee https://bugzilla.redhat.com/show_bug.cgi?id=1525020 for the Fedora-related discussion.. FYI: Looks like this was actually a json-c bug and should be fixed by json-c/json-c#389. Not exactly sure if this is the same issue, but it certainly looks like it.. FYI: Looks like this was actually a json-c bug and should be fixed by json-c/json-c#389. Not exactly sure if this is the same issue, but it certainly looks like it.. Yes, Fedora now includes the json-c patch in Rawhide (commit), so at least from Fedora side, the problem is fixed. I would suggest to test the patched version of json-c before doing any other work related to this issue.. Yes, Fedora now includes the json-c patch in Rawhide (commit), so at least from Fedora side, the problem is fixed. I would suggest to test the patched version of json-c before doing any other work related to this issue.. ",
    "besser82": "The problem was in Sway actually\u2026  The current patch Fedora ships was a cludge to restore the faulty behaviour when double free'ing a json_object\u2026 (see: https://github.com/swaywm/sway/pull/1517/commits/f325e5e2c54228682c2fe919c5d143b16139194f)\nThe fixes needed for Sway are in #1517.\nJust to clarify this a bit more:  The real problem has been in Sway since https://github.com/swaywm/sway/commit/6392abe35b32c66c642c25a7c6911021862d3413.  There was a bug in json_object_put() (which is the dtor function with ref-counting for a json_object) in all versions of json-c prior to v0.13, which camouflaged any invalid call of the dtor with an already destroyed json_object.\nI will apply this set of patches to Sway in Fedora and update json-c to the correct patch, which prevents segfaults on double free and fails an assert instead.. @cauebs Use sway v0.15.1 release, which has all needed fixes.. @SirCmpwn This is actually NOT a workaround, but well documented behaviour of json_object_object_add() in the json-c API\u2026\nSee:  https://github.com/json-c/json-c/blob/master/json_object.h#L379\nRemember, when using\njson_object_object_add or json_object_array_put_idx, ownership will\ntransfer to the object/array.  Call json_object_get if you want to maintain\nshared ownership or also add this object as a child of multiple objects or\narrays.  Any ownerships you acquired but did not transfer must be released\nthrough json_object_put.\nand:  https://github.com/json-c/json-c/blob/master/json_object.h#L408\n```\nThe reference count will not be incremented. This is to make adding\nfields to objects in code more compact. If you want to retain a reference\nto an added object, independent of the lifetime of obj, you must wrap the\npassed object with json_object_get.\nUpon calling this, the ownership of val transfers to obj.  Thus you must\nmake sure that you do in fact have ownership over this object.\n``. Ahh, I see\u2026  Well, the typedef is not needed, if we remove-Werror`\u2026  Converting from size_t to int is safe in all cases, since there are no json_array_objects bigger than 4 GiB used somewhere\u2026. @SirCmpwn What about the master-branch?. ",
    "cauebs": "json-c just got updated to 0.13 on ArchLinux. Now what?. Adding a parameter for the coordinates is already enough, then we can leave the rest of the work for slop.. Wouldn't it be best to leave this open?. ",
    "Guppster": "getcap /usr/bin/sway returns nothing.. ls -la /usr/bin/sway\n-rwsr-xr-x 1 root root 320656 Jul 28 03:34 /usr/bin/sway\nI think it is setuid. \nsway -Vd : https://gist.github.com/Guppster/a5694727cf4bba7e41727241bf19afd5. Nope not on musl \nCoredump?: https://mega.nz/#!ugZwCQrS!cn3yq5nuUURQ_5GKdn7bhDnMZYFsQoinT_c2K4FYijA. I'v been trying to do that, but haven't been very successful. :confused: \nThings i did:\n Cloned the repo\n Changed line 5 of CMakeLists.txt to include -O0 -g\n Ran the cmake, make, make install commands\n Ran sudo chmod a+s /usr/local/bin/sway\n Tried to run sway which produced the same result as the initial post and generated a core file\n Ran gdb sway corefile\n typed run and it produced Could not open /dev/tty0 to find free vt which is not what it produced when ran outside of gdb. (this is usually how it behaves when i setcap outside of gdb)\n typed backtrace and got back No stack :(\nEDIT: If it helps, i receive a segfault on way-cooler as well. (Another wayland compositor) \nEDIT2: Oh .... i ran into the problem shown in #1355 and ignored by disabling warnings as errors.... that was probably a bad idea. ",
    "walterhuangio": "Re-visiting this, I've installed nm-applet using AUR network-manager-applet-indicator package and start it with nm-applet --indicator, the icon shows! However, clicking it doesn't do anything. Notification works as well.. @progandy with Waybar nm-applet --indicator responds to right click, the context menu shows up center of the screen.. ",
    "treeman": "Yes I believe so\n```\n\ngroups tree\ntree : tree wheel floppy disk lp dialout audio video cdrom optical mail storage scanner network kvm input users xbuilder\n```. Huh. I don't have the card. Does that mean I have the wrong drivers? I did get X up and running in a basic manner.\n\nI assume sway -Vd is what you want?\nhttps://gist.github.com/treeman/05542f677f25e7c0ad56df89b794f6c6. Yes that's the open source drivers. No /dev/dri or /dev/drm.. zgrep CONFIG_DRM= /proc/config.gz\nCONFIG_DRM=m. Alright, will do. Thanks.. ",
    "elverskog": "invalid option -- t. bt - I already got rid of the dupe workspace (sorry). Not sure how I did it.. Will do. Well that was fast! wokspace!?\nwokspace-dump.txt\n. Will do. I'm in the middle of my workday. So I keep fixing the issue and reproducing. So if I get it to break again. I will post the workspace output again as well.. workspace-dump-2.txt\nI see two PIDs for sway. Sound weird? Likeps aux | grep sway right?. Looking at getting a core dump (in Arch). This is new to me. gdb crashing system.. One of the dump files is about 1.6mb the other is 65mb. I've attached the former. Lemme know if there is something I can do with the larger file. \nsway.core.431.txt\n. References closed issue #1364. It looks like it allows for non-unique names. Is there any setting to force unique names?. ",
    "jbg": "I use compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec launched in a terminal with a specific window class, and configure sway to float and position that window. it works pretty well.. compgen -c lists commands on your PATH, sort -u gets rid of duplicates and puts it in alphabetical order, fzf shows an interactive interface to select one of those commands and outputs the selected command on stdout, xargs -r swaymsg -t command exec tells sway to run the selected command. if you bind a key to run this pipeline in a terminal with a specific window class, you can style that terminal in your sway configuration. i make it floating and small. ",
    "alexryndin": "still have focus issue with rofi 1.5.1 and sway 0.15. @jbg could you explain your solution a bit?. @jbg Thank you. This part is still unclear for me: \n\nterminal with a specific window class\n\nHow can I change window style in wayland/sway?. Indeed there is no any focus issues with rofi on latest sway beta with wlroots. It actually doesn't have anything to do with rofi and still reproduces with latest, not beta sway with wlc.. ",
    "Shusek": "@alexryndin In 1.0 version albert (simmilar to rofi) is alive so maybe so maybe rofi will also work without any problem.. ",
    "KubqoA": "@jbg Hi, I am curious about your solution. However, I can not figure out how to launch a terminal window with a specific class in sway. Any help appreciated. ",
    "PumbaPe": "@alexryndin @KubqoA I don't think there is an easy way to change window classes, but you can use specific criteria of that window to customize it. See the Criteria section on sway's man page. I thought the best way would be to mark that terminal window upon launch and then use [con_mark=\"whatevermark\"], but unfortunately that doesn't work since for some reason it is always the previously focussed window that is being marked instead of the new one.  I've worked around this by launching the terminal window with a specific title (I guess most terminals support this) and then using that title as a criterion for customization commands. So my full command with gnome-terminal looks like this:\nset $menu gnome-terminal --title Menu --hide-menubar --command \"bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'\", for_window [app_id=\"gnome-terminal-server\" title=\"Menu\"] border pixel 0, for_window [app_id=\"gnome-terminal-server\" title=\"Menu\"] floating enable\n(You can see the attributes of all open windows with swaymsg -t get_tree). > I don't understand the steps you're doing. How are you marking the window? You shouldn't need to mark the window in this case anyway.\nI was marking it with swaymsg mark whatever and I was trying to do so to have a command that works with any terminal. Because for example with gnome-terminal --name and --class have no effect, only --title changes the name. Whereas with Tilix it is the other way around.\n\nThat's not really how it should be done. for_window adds a rule for windows matching the given criteria, and they exist until Sway exits or is reloaded. You're adding a new for_window rule every time you open your launcher.\n\nYes, you're right. I wasn't aware of that, makes much more sense to define the customization outside of the menu command.. I must have missed something the first time around, after forking and cloning properly and redoing the additions it actually works! Here is the pull request: #2725 . Not sure what you mean by that... I set the email and tried to resubmit the commits together. Is that what you were asking?. Ah thanks, I did this the last time, but still didn't manage to commit everything together. Sorry, first time actually using git. Should be one commit now.. ",
    "psnszsn": "\nThis is how I'm doing it with termite:\nbindsym $mod+r exec termite --name=launcher -e \"bash -c 'compgen -c | sort -u | fzf | xargs -r swaymsg -t command exec'\"\nfor_window [app_id=\"^launcher$\"] floating enable, border none\n\nI modified this so it lets you select from the .desktop files at /usr/share/applications and launch them with gtk-launch:\nbindsym $mod+n exec termite --name=launcher -e \"bash -c 'find /usr/share/applications -name *.desktop | xargs basename -s .desktop -a | fzf | xargs -r swaymsg -t command exec gtk-launch'\"\nIt works for most apps, but some, like dconf-editor, do not launch properly.. ",
    "bojankajfes": "Bemenu can be used in combination  with j4-dmenu-desktop (or maybe even with i3-dmenu-desktop) for getting similar result like with dmenu (-i => ignore case switch is mandatory for bemenu to work like expected) :\nset $menu j4-dmenu-desktop --dmenu=\"bemenu -i\" --no-generic --term=kitty\n. ",
    "uberbrodt": "sway.log\n. Tried Konversation and still no status indicator. Double checked that it\nwas enabled in the app settings.\nOn Tue, Sep 26, 2017 at 11:46:32AM +0000, Drew DeVault wrote:\n\nDo those actually support SNI? Try konversation.\n-- \nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/SirCmpwn/sway/issues/1372#issuecomment-332173223\n. Hangon, that maybe a bad log.  I started sway a couple of times inside another sway session while trying to get debug logging going.\n\nsway.log\n. Cool. Probably won't get to it until tomorrow at the earliest. I'm going\nto follow the directions from the README, let me know if I need to do\nsomething different with it.\nOn Tue, Sep 26, 2017 at 02:11:03PM +0000, Drew DeVault wrote:\n\nI'm not sure how the Fedora package works. Can you try building Sway from source and see if you can reproduce the issue? Post the cmake output as well.\n-- \nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/SirCmpwn/sway/issues/1372#issuecomment-332210801\n. Sorry, been busy with moving to a new place...I'll see if I can build it\nand test tonight.\n\nOn Oct 12, 2017 02:32, \"Nemanja Nedeljkovi\u0107\" notifications@github.com\nwrote:\n\nTurns out tray is disabled by default in konversation on Arch... :)\nWorks for me\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/1372#issuecomment-336045443, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AA7towNyvILaWuUhVdFQtYdjwvj5Ze25ks5srcB8gaJpZM4Pjnih\n.\n. Sorry for being so late to follow up...I was able to build and test the HEAD revision today and I can confirm that the Konversation icon shows up, however I'm unable to make it respond to actions with either right or left mouse button clicks.. \n",
    "cjacker": "SNI support requires a session bus setup before starting sway, if launch sway from TTY, run 'dbus-launch sway', tray should work properly.\n. It's ok for me.\nREADME.md said \"Run sway from a TTY. Some display managers may work but are not supported by Sway (gdm is known to work fairly well).\"\nFor non-gdm user, the tray will not work without a session bus, better to metion it in README.md.\n. ",
    "ReK2Fernandez": "Hello I tested this with konversation and icon shows but when I click on it no menu, also Idk how to make konversation window come out.. such is why I was looking for the menu :) since click will not pop it up.. Hey thanks for responding... hmm and when is this happening? can I compile it myself ? whats the branch name so I can pull it?. lol :) ok I may,  as a work around I am running keybase and enpass on their own workspaces .. but that \"alsosucks\" :) . any news on this? . @SirCmpwn so when does the new version with the merge coming out? is there an approx ETA?. thats what the log for sddm said when it was trying to start it. also when I try to compile a new version it broke on json-c complaining it was looking for the older version. Im about to go to bed but will reproduce tomorrow and take a picture or something of the console since the only way to see it is to ctrl+alt+f4 etc. @SirCmpwn ok I can do that, still I find amusing that you dont support your own app :) the -git is just like doing a git clone and compiling that way manually :) I like to run the latest version because of some issues I had last month dont remember why at the moment but that was the reason I changted to git, doing it this way arch knows about it.. while if I do a git clone it does not.. Awesome!, when will this get released?. @emersion latest stable\n[ blackarch ~ ]$ sway -version\nsway version 0.15.2\nhave not try on the 1.x beta yet. @emersion so this is fixed on the 1.x of sway? is it ready for me to upgrade since I use signal/keybase a lot on a daily basis? or should I wait? I dont mind small bugs here and there, but this one in particular may be worse than the ones on 1.x for me.. @emersion I was a developer before I started to work as a penetration tester 15 years a go, still code and build my own tools, so I think  I can handle it, my worries are only the state of usability, but I don't need much since I do most of my work from terminal, if I can run terminology, my browsers and keybase/signal im good.. I fixed this today  https://github.com/signalapp/Signal-Desktop/issues/2567  and https://www.reddit.com/r/archlinux/comments/8z5bex/slackdesktop_freezes_on_notification/. is not that different as long you follow the international Spanish standards, indeed there are diff slang but is all understandable. With time you can get more into details and regional pick latin american, central American and Iberian Spanish but to start Spanish generic is better than nothing.. . ",
    "ellipticaldoor": "If I startx and inside xterm I run sway it works, now is really using wayland or X11?\nWith the intel card this step is not required. If I startx and inside xterm I run sway it works, now is really using wayland or X11?\nWith the intel card this step is not required. So its just fine to run sway like this?. So its just fine to run sway like this?. okay!\nI have a MacBookPro11,5 with an Intel Iris Pro and a AMD Radeon R9 M370X\nI use this script to change the graphics card https://github.com/0xbb/gpu-switch. okay!\nI have a MacBookPro11,5 with an Intel Iris Pro and a AMD Radeon R9 M370X\nI use this script to change the graphics card https://github.com/0xbb/gpu-switch. looks like this\n\nIt's the only way that I'm able to change the graphics card.. looks like this\n\nIt's the only way that I'm able to change the graphics card.. Yes! With that command it works. Yes! With that command it works. Can you explain why this happens? I'm really interested in this project. Awesome work :). Can you explain why this happens? I'm really interested in this project. Awesome work :). ",
    "karjonas": "It seems like the sorting of variables is already handled so this pull request is pointless. But, there is a bug that is due to the code that handles variables with a $ prefix, it missing the last character of the variable name. The issue is sway/commands/set.c:33 should have 'size+1' instead of 'size'. Should I update this PR with the correct fix?. That should do it.. ",
    "jparsert": "How long is the wlroots transition expected to take ?. How long is the wlroots transition expected to take ?. ",
    "moritz31": "Hey,\nare there some easy things to do, where i can maybe help? . ",
    "arcnmx": "Heh, I like how physlock looks. Though the one important advantage of using physlock over swaylock currently is that a VT can trigger DPMS.. Expected that :(\nWould you accept a patch that fixes it? I've seen a lot of bugs and feature requests that get closed and it's ambiguous whether your stance is that it doesn't belong in the codebase or you're just trying to prune issues you don't have the time or interest to address. Maybe github issue labels could help with that?. Oh hm playing with it more just running chvt causes freezes and segfaults in sway pretty easily and can also lockup other system VTs.... ",
    "charlesay": "i would like to use sway but can't mostly because of this. would appreciate some response. any suggestions as to how?. how do i use that in this case?. ",
    "paulolieuthier": "I got it to work by setting both XKB_DEFAULT_VARIANT and XKB_DEFAULT_LAYOUT in ~/.zshrc.. > I got it to work by setting both XKB_DEFAULT_VARIANT and XKB_DEFAULT_LAYOUT in ~/.zshrc.\n@charlesay I see now that you have set as well, sorry. And it only works for me when starting from a shell, not from GDM.. OK, it works for me now, starting Sway from GDM. Simply put your environment variables in ~/.pam_environment.\nshell\n$ cat ~/.pam_environment\nXKB_DEFAULT_LAYOUT=us\nXKB_DEFAULT_VARIANT=intl. ",
    "madblobfish": "You are fast :) thank you!. I could not reproduce your issue, could you post your configuration?\nAlternatively you can try to reproduce with the default config file.. Please provide a debug log and the exact sway version. (see https://github.com/swaywm/sway/wiki#how-do-i-report-issues). I have the same issue and found out that it starts properly when I disable my external monitors in the config and enable them later through swaymsg.\n(currently on b29beb1, can provide logs if needed). Sorry, I could not seat cleanup get it to work properly (see my try d0c44d15).\n@SirCmpwn Destroyed seats can be recreated. Not sure if this works in all places.\nEdit: fixed build: removed broken debug line. So more information:\nwhen removing the last device from a seat i get either a crash or other strange behavior.\nHere is my config, the debug log and a stack trace: https://gist.github.com/madblobfish/f6188bf61f7eb97ccdf30a092dd41204\n. ### More on the problems.\n1. Crash - When running detach on existing seat but removing the last device.\nHere is what I ran:\nbash\nswaymsg \"seat seat1 attach mouse2\" #works, attaches the mouse to seat1 (and detaches off of seat0)\nswaymsg \"seat seat0 attach mouse2\" #works correctly, mouse2 now attached to both\nswaymsg \"seat seat0 detach mouse2\" #works correctly, reverted to before\nswaymsg \"seat seat0 attach mouse2\"\nswaymsg \"seat seat1 detach mouse2\" #crash\nHere is my config, the debug log and stack trace: https://gist.github.com/madblobfish/f6188bf61f7eb97ccdf30a092dd41204\n\nStrange behavior - When running detach without seat1 existing.\nSway kills at least all visible windows and swaybar. I only see a black screen (my bg). Can still open terminals and programms as usual.\nDebug log using same config as above: https://gist.github.com/madblobfish/f32e57327097c7df81e4e389ff3aba57\n. whoops, fixed. \n",
    "codethief": "@rvc-2011 I don't think this is what OP meant by \"polybar\". See https://github.com/jaagr/polybar .. Thanks, that's good to know. But now after rebooting I'm running it alone (the only Gnome-related process  $ ps faux | grep gnome can find is /usr/lib/at-spi2-core/at-spi2-registryd) and it's still freezing upon switching TTYs and/or exiting (see item 7 above which I just added). So I suspect there is more going on that simply running two compositors at the same time. Unless, of course, running two compositors at once caused some permanent damage, i.e. left some traces behind that are now causing all these issues(?). Ok, good to know, too. Could you add a corresponding warning to the README file? In my case I'll simply reinstall Ubuntu now and try again but other users probably wouldn't be happy to do that.. @4e554c4c I apologize if I came across as demanding. However, please do try to understand my perspective as well: \nRight now, Sway is pretty much in an unusable state for me. I'm not saying this to complain; in fact I love what you guys are doing here and have been following the project for quite a long time and will keep on following it. The thing is just that with something as essential as a compositor / window manager it costs a hell of a lot of energy and time to debug issues while one is actually trying to do some other work. (I mean, who am I telling this\u2026 you probably know this better than I.) I'd either have to maintain a second compositor that I use to do actual work while I'm keeping the first one just for fun (and debugging) or I'd need to two machines or whatever. At the end of the day the reality is this: It's simply impossible for a user of open source software to fix every single bug he runs into or implement every single feature he'd love to see realized. I can't possibly dig into the code of every single software I'm using.(*) I have to focus on some projects and leave out others. Period.\n(*) Yes, the actual implementation of the requested feature is probably simple. But first I'd have to set up the build environment and so on and so forth\u2026\nNow what I could have done would have been to try Sway, realize that it's not working properly and uninstall it again right away. But I figured I could at least report the bugs so that you as the developers are aware of the issues I'm experiencing. (I thought this was the whole purpose of providing a public bug tracker?) And yeah\u2026 while trying to debug other issues I realized that on-the-fly logging would be a good thing. In fact, I thought that this might potentially be a feature keeping other users from reporting bugs in the first place. You might call this \"complaining\" and maybe your general perception of bug reports and feature requests is that of \"complains\". In that case, I'd recommend creating a private repository (or, in this case, a fork) in which you can code just for yourself. Then you will only have to make sure that things are working for you and you won't have to worry about other users \"complaining\" that it's not working for them.\nDifferences of opinion and/or perception aside, thank you all for the time and effort you're putting into making an i3-like WM for Wayland a reality.\n. @myfreeweb You're right, that'd probably do the trick as well. Though then I'm wondering why log messages are not being written to, say, /var/log/sway automatically and this has to be done manually instead through shell scripting. So maybe I should rename this request to \"Enable logging by default\"?. ",
    "ponkyh": "Sorry.\nI couldn't reproduce the problem until I started telegram. Seems to work with 1 monitor though. Might not be related to sway afterall?\nhttps://gist.github.com/ponkyh/f677368540bda57f12b23e36cdc4a098. Ah, of course. Linux is hard :)\nHere's the dump:\nhttps://pastebin.com/zTzYx17w. It looks like there's some kind of a bus reset, because eDP-1 (laptops internal monitor) gets destroyed as well.\nhttps://github.com/swaywm/sway/issues/2337 might actually fix this?. Managed to unplug today withou crashing, only once though.. Unplugging works now, but replugging causes a crash.\nhttps://pastebin.com/Yq30MLGh. Took like 5 replug cycles to get a crash.\nhttps://pastebin.com/Ew6xWpQv. Updated sway to 1.0-alpha.6-105-g51f68e10\nValgrind and gdb dumps:\nhttps://pastebin.com/k4kqS4vR. Seems to be fixed, thank you!. ",
    "blackmirroxx": "I do have the same problem as cjacker . ",
    "deepakjois": "Ok, but may I ask why? Is this too difficult to support? Could you tell me what is involved in enabling such a use case?. Sorry if it sounded like I was asking you to debug and investigate. I wasn\u2019t, and it is fine if you don\u2019t want to pursue this. I actually looked at the Wayland API docs and even searched the Wayland mailing list before I filed the issue and did not really get any definitive answers about running multiple Wayland sessions as a single user.\nI was just looking to better understand what exactly is happening here. If that is not an appropriate question here, I apologise.. ",
    "tonyskapunk": "Any particular reason why not to provide Spanish translation? I can write that ;). OK, will do, PR soon.  Thanks1. Thanks for looking, I've fixed the typos in the last commit, I can rebase at any time since this branch is out of date, before doing that I want to ensure the commits look right.. Thanks for the review @miguelbernadi I've fixed all the typos in my last commit.. Yes I'll rebase once everything is good, that way is easier for the reviewer(s).\nRegarding the \"bounties\" comment, I see the README has changed considerably, I think it would be better to match it to the actual one, instead of pushing with the old content.  Thoughts?. I see that the README on each language have been changed a lot since this PR, I can help with the .es version of them if those are reflecting the version 1.0.. fixed. fixed. It is a  [ and not a (, is a markdown link.. fixed. fixed. fixed. fixed. fixed. also fixed.. Ah I see the  problem, this PR was created when the content of the README was a bit diff, this commit removed the reference to the bounties f0ddf6d74. ",
    "miguelbernadi": "Thanks for the effort @tonyskapunk ! You'll still need to rebase over master before merging?. Should be gestor de composci\u00f3n de ventanas Wayland compatible con i3 as i3 itself is unrelated to Wayland.. \"congelado\"(\"frozen\") seems missing a space between the \" and (. I'd expect to have one there.. recompensas(\"bounties\") would also expect a whitespace before the (.. huso horario.. est\u00e1. est\u00e1. est\u00e1s. correo(en Ingl\u00e9s) missing whitespace before (.. and swaylock should be y swaylock.. In line 29 it's not a markdown link. Adicionalmente se pueden crear recompensas(\"bounties\") para cualquier. ",
    "2Belette": "thanks! any idea on how I could set swaylock to use them?. thanks! any idea on how I could set swaylock to use them?. that's a good tips! I just did it and it works :)\nThe only downside is that it is laggy (like the first version i3lock-color used in the past) this is the reason their new approach seems better.\nAnd also would handle better when an external screen is connected for the swaygrab rendering. that's a good tips! I just did it and it works :)\nThe only downside is that it is laggy (like the first version i3lock-color used in the past) this is the reason their new approach seems better.\nAnd also would handle better when an external screen is connected for the swaygrab rendering. ",
    "ambiso": "@ddevault Could elaborate on how third party programs can achieve the same functionality (and speed) as i3lock?. ",
    "Emantor": "Fork swaylock and implement the features you want in your swaylock fork.. Pull requests are always welcome.. backtrace:\n```\n0  0x0000560dc1fce79b in container_find (container=0x560dc3a99a80, test=0x560dc1fcf3da , data=0x560dc3ac1450) at ../sway/tree/container.c:481\n    i = 0\n\n1  0x0000560dc1fce77b in container_find (container=0x560dc3b22bc0, test=0x560dc1fcf3da , data=0x560dc3ac1450) at ../sway/tree/container.c:486\n    res = 0x1\n    child = 0x560dc3a99a80\n    i = 0\n\n2  0x0000560dc1fcf43f in container_has_child (con=0x560dc3b22bc0, child=0x560dc3ac1450) at ../sway/tree/container.c:752\n3  0x0000560dc1fb4f95 in seat_get_focus_by_type (seat=0x560dc3775370, container=0x560dc3b22bc0, type=C_TYPES) at ../sway/input/seat.c:142\n    floating = 0x0\n    current = 0x560dc3b9e400\n\n4  0x0000560dc1fb6e79 in seat_get_focus_inactive (seat=0x560dc3775370, container=0x560dc3b22bc0) at ../sway/input/seat.c:857\n5  0x0000560dc1fd888e in workspace_is_visible (ws=0x560dc3ac1450) at ../sway/tree/workspace.c:441\n    output = 0x560dc3b22bc0\n    seat = 0x560dc3775370\n    focus = 0x560dc3c5a670\n\n6  0x0000560dc1fce236 in container_reap_empty (con=0x560dc3ac1450) at ../sway/tree/container.c:349\n    __PRETTY_FUNCTION__ = \"container_reap_empty\"\n\n7  0x0000560dc1fce321 in container_reap_empty_recursive (con=0x560dc3ac1450) at ../sway/tree/container.c:375\n    next = 0x560dc3b22bc0\n\n8  0x0000560dc1fce3f8 in container_destroy (con=0x560dc3c5bae0) at ../sway/tree/container.c:409\n    parent = 0x560dc3ac1450\n\n9  0x0000560dc1fd5d96 in view_unmap (view=0x560dc3bdf1f0) at ../sway/tree/view.c:652\n    ws = 0x560dc3ac1450\n    parent = 0x560dc3be6f60\n\n10 0x0000560dc1fb28c3 in handle_unmap (listener=0x560dc3bdf410, data=0x560dc3bdef70) at ../sway/desktop/xwayland.c:328\n    xwayland_view = 0x560dc3bdf1f0\n    view = 0x560dc3bdf1f0\n    __PRETTY_FUNCTION__ = \"handle_unmap\"\n\n11 0x00007fcb3a5314d8 in wlr_signal_emit_safe (signal=0x560dc3bdf0d0, data=0x560dc3bdef70) at ../subprojects/wlroots/util/signal.c:29\n    pos = 0x560dc3bdf410\n    l = 0x560dc3bdf410\n    cursor = {link = {prev = 0x560dc3bdf410, next = 0x7ffdec3c35e0}, notify = 0x7fcb3a531422 <handle_noop>}\n    end = {link = {prev = 0x7ffdec3c35c0, next = 0x560dc3bdf0d0}, notify = 0x7fcb3a531422 <handle_noop>}\n\n12 0x00007fcb3a4e7296 in xsurface_unmap (surface=0x560dc3bdef70) at ../subprojects/wlroots/xwayland/xwm.c:703\n13 0x00007fcb3a4e60d4 in xwayland_surface_destroy (xsurface=0x560dc3bdef70) at ../subprojects/wlroots/xwayland/xwm.c:294\n    child = 0x560dc3c52ef8\n    next = 0x560dc3c52ef8\n\n14 0x00007fcb3a4e8b26 in xwm_destroy (xwm=0x560dc3be1df0) at ../subprojects/wlroots/xwayland/xwm.c:1338\n    xsurface = 0x560dc3bdef70\n    tmp = 0x560dc3c5a2f0\n\n15 0x00007fcb3a4e493e in xwayland_finish_server (wlr_xwayland=0x560dc3742b00) at ../subprojects/wlroots/xwayland/xwayland.c:147\n16 0x00007fcb3a4e4af0 in handle_client_destroy (listener=0x560dc3742b18, data=0x560dc3be12a0) at ../subprojects/wlroots/xwayland/xwayland.c:206\n    wlr_xwayland = 0x560dc3742b00\n\n17 0x00007fcb386bfad2 in  () at /usr/lib/libwayland-server.so.0\n18 0x00007fcb386bfc61 in wl_client_destroy () at /usr/lib/libwayland-server.so.0\n19 0x00007fcb386bfd5b in  () at /usr/lib/libwayland-server.so.0\n20 0x00007fcb386c1a42 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n21 0x00007fcb386c014c in wl_display_run () at /usr/lib/libwayland-server.so.0\n22 0x0000560dc1f9ea66 in server_run (server=0x560dc21f2920 ) at ../sway/server.c:154\n23 0x0000560dc1f9e2c5 in main (argc=1, argv=0x7ffdec3c3b38) at ../sway/main.c:455\n    verbose = 0\n    debug = 0\n    validate = 0\n    long_options =\n        {{name = 0x560dc1fdd31c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x560dc1fdd321 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x560dc1fdd328 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x560dc1fdd331 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x560dc1fdd337 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x560dc1fdd33f \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x560dc1fdd347 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x560dc1fdcea0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n    suid = false\n\n```\nLooks very similar to #2238. Unfortunately I have no logs, but can reproduce.. Closing this as a duplicate of #2238. Thanks, tested and works as expected.\nGuess its back to tapping mod+q to trigger the multiple cursor uploads.. :laughing: :+1: :laughing: . Can you test #2804 please?. Maybe rolling forward to the latest 4.19-rc8 helps?. This does not work after refactoring, looking into it\u2026. Fixed, I just can't read.. The mouse_warping container option was implemented by me and still needs fixes for its focus issue, see #2820.. Yes, I can drop that.\nEdit: And its gone.. This will be a lot harder to untangle, since the cursor is refocused in container_begin_destroy:\n```\n0  0x0000555c0236271d in seat_set_focus_warp (seat=0x555c0461fc30, node=0x555c04846090, warp=true, notify=true) at ../sway/input/seat.c:628\n1  0x0000555c02362f6b in seat_set_focus (seat=0x555c0461fc30, node=0x555c04846090) at ../sway/input/seat.c:810\n2  0x0000555c0236143d in handle_seat_node_destroy (listener=0x555c04847460, data=0x555c04862930) at ../sway/input/seat.c:184\n3  0x0000555c02380774 in wl_signal_emit (signal=0x555c04862960, data=0x555c04862930) at /usr/include/wayland-server-core.h:468\n4  0x0000555c02380ac7 in container_begin_destroy (con=0x555c04862930) at ../sway/tree/container.c:90\n5  0x0000555c0238746e in view_unmap (view=0x555c04861ce0) at ../sway/tree/view.c:626\n``\nAnd without the destroyed node, the workspace can't be arranged.. I implemented your suggestion. From cursory testing it works, I'm not entirely sure focus is still handled correctly. Please test.. Warping the cursor a second time may also introduced other bugs since we can't simply warp the cursor if the focus was already changed and the node to warp to is the same node focus is set on (early return inseat_set_focus_warp`).\nTo the overall focus vs cursor problem:\nI think it maybe overall beneficial to separate focus from the cursor movement. At the moment cursor movement and focus warp are very entangled inside seat_set_focus_warp, imo its going to be much clearer when reading the code if the cursor is moved explicitly, instead of in the seat_set_focus_warp function. This also makes it possible to configure the cursor move semantics in depth, if that is requested.\nMy concern is that it may be hard to achieve this regression free without tests. I noticed the swaywm/sway-tests repository, it may be very useful to have tests for focus and cursor behaviour to cache regressions.. Yes, I'll do that when I'm back from work this evening.. Pushed a new version which currently warps the cursor again. Eventually I'd like to refactor all funtions to warp the cursor explicitly and not during seat_set_focus_warp, but that will be left for another PR.. Hm, I can't reproduce with your instructions. However I found another bug:\n- If focus_follows_mouse is set to no and you click into a container, the mouse is warped to the middle of the container.. The connector names being different can't be changed and is expected with MST. It's best to use the names as identifiers.. Yes, unless I'm mistaken swaylock_password is contained in swaylock_state which is statically allocated before running main. A memset should be fine by my analysis.. Can you please post the output of bt full?. Sway suspends? I don't understand what you mean by \"suspend\".\nYour video shows you dropping back to a shell with the segfault message.\nIs the shell input frozen afterwards?\nSystemd should save a coredump of sway, run coredumpctl to see a list of the coredumps, you can use coredumpctl gdb sway to get a gdb with the latest sway coredump.\nUse bt full to get a backtrace and post it here.\nTo obtain debug logs, start sway with the -d options and redirect output into a file, i.e. sway -d &> ~/sway.log.. @ianyfan We could also exit instead of defaulting to bottom, I decided to keep the existing behaviour here. What is your opinion on that?. I think both should be removed. I'll add the wlr_log for commands/bar/position.c, but I don't think that will work for swaybar, since afaik wlr_log is only available to the compositor. I think printing to stderr is the right call there.. Swaybar does currently not link against wlroots, so i'd like to avoid that dependency.. I removed the allowed positions from sways command. The command already returns an error for invalid positions, so imo no change is needed there. Should be ready for review.. > > Swaybar does currently not link against wlroots\n\nI don't know where you're getting your information from. It's linked in swaybar/meson.build, and if you search the swaybar directory for wlr_log you'll see it's used dozens of times.\n\nI did rg \"wlr*.h\" in the swaybar directory, however * does not match / and since the include path is wlr/util/log.h I assumed that swaybar is not linked against wlroots, since my grep returned no matches.\nI replaced the fprintf with wlr_log, sorry for the noise.. According to the log, only your laptop eDP-1 output gets reported. Do you have two graphic cards in your laptop? If yes, you need to tell wlroots to use both, however I can't currently find the article which explains how to do that. But it has to be done using the wlroots env variables.. The fix for this was only merged on 24th of October, please update your sway version.. We will need full backtraces from gdb:\n- start gdb after a crash with coredumpctl gdb sway\n- type bt full\nIf you still now which crash corresponds to which log, you can use coredumpctl to look for the correct one and start gdb with i.e. coredumpctl gdb <pid>\nThanks.. While imo this should not be enabled by default, there should still be a commented section in the default configuration file which shows how to configure the gaps.. I assume these are from your laptop, since it uses the daisy chained monitor.\nFor MST ports (display port daisy chaining) the connector ids are not stable and change on hotplug.\nLooking at the code, you should be able to match on the identifier of the monitor already, which consists of make, model and serial.. @krgn can you test this PR?. I can reproduce the first issue.\nThe problem is that output_get_active_workspace in sway/input/cursor.c:94 does not return a valid workspace:\n(gdb) p *ws\n$1 = {node = {type = N_ROOT, {sway_root = 0x6174732d6b6e696c, sway_output = 0x6174732d6b6e696c, \n      sway_workspace = 0x6174732d6b6e696c, sway_container = 0x6174732d6b6e696c}, id = 7566708, instruction = 0x0, \n    ntxnrefs = 0, destroying = 2, dirty = false, events = {destroy = {listener_list = {prev = 0x55ae7aec6be0, \n          next = 0x2}}}}, fullscreen = 0x55ae7aec6460, name = 0x0, representation = 0x0, x = 4.7924367646600915e-322, \n  y = 4.6544874604882317e-310, width = 0, height = 0, layout = 2062316160, prev_split_layout = 21934, \n  current_gaps = 2062332432, gaps_inner = 21934, gaps_outer = 0, output = 0x64656c6261007b20, \n  floating = 0x2c53452030302e31, tiling = 0x53452030302e3320, output_priority = 0x452030312e33202c, urgent = 83, \n  current = {fullscreen = 0x53452030322e, x = 1.6304166312761136e-322, y = 4.6175460729911888e-310, \n    width = 1868771193, height = 1734960750, layout = 707748910, output = 0x21, floating = 0xa, \n    tiling = 0x55ae7aec6b80, focused_inactive_child = 0x0, focused = 49}}\nI guess this is the case because we are trying to do a cursor rebase on an output where no workspace is created yet.. Probably a duplicate of Issue one in #3015. Now the message should be correct :+1:. Thanks, I'm fine with getting this merged as is. I left a comment for view_unmap, if that is answered I'll remove the [WIP] and we can get this merged.. I split up the commits and wrote real commit messages, should be ready to merge after another review.. Probably a duplicate of #2529. Looking at the code again we sent the enter event after we move the cursor. Are there edge cases where this can be a problem?\nEdit: Yes, testing reveals that clicking does not work this way.\nEdit2: I amended the commit to call cursor_handle_activity before sending the pointer events, this should ensure we send the enter event before dispatching buttons or movement.\nThis is ready for testing and review.. I still have input issue in firefox in xwayland, not sure if thats a bug introduced by this PR or an xwayland bug.... You can try to use sysrq for the reboot, this way your logs will be flushed to disk.\nIf that does not work this might be a kernel issue and it would be useful to create a netconsole setup.\nI also had some success by using SSH and attaching gdb to a running sway on my laptop to debug hotplug issues.. Time to try my Intel MST setup again!. Pretty sure thats my fault since view_unmap now takes WARP_OUTPUT into account and did not do so before. I'll post a fix shortly.. Fixing the original issue is easy, but now I get a stacktrace where sway is trying to render a view which is currently destroying\u2026\n```\n0  0x00005560c8a81068 in output_view_for_each_popup\n(output=0x5560ca0e65a0, view=0x5560ca5b44d0, iterator=0x5560c8a82d7c <render_popup_iterator>, user_data=0x7ffe8a91f960) at ../sway/desktop/output.c:172\n    data = \n      {user_iterator = 0x5560c8a82d7c <render_popup_iterator>, user_data = 0x7ffe8a91f960, output = 0x5560ca0e65a0, ox = 4.6380003261270182e-310, oy = 4.6380014860856954e-310, width = -905026144, height = 21856, rotation = -2333058}\n\n1  0x00005560c8a82e44 in render_view_popups\n(view=0x5560ca5b44d0, output=0x5560ca0e65a0, damage=0x7ffe8a91fa80, alpha=1) at ../sway/desktop/render.c:232\n    data = {damage = 0x7ffe8a91fa80, alpha = 1}\n\n2  0x00005560c8a857e1 in output_render (output=0x5560ca0e65a0, when=0x7ffe8a91fa70, damage=0x7ffe8a91fa80)\nat ../sway/desktop/render.c:1051\n    wlr_output = 0x5560ca1221f0\n    renderer = 0x5560ca0d1700\n    __func__ = \"output_render\"\n    workspace = 0x5560ca245440\n    fullscreen_con = 0x0\n    seat = 0x5560ca0e2260\n    focus = 0x5560ca5c3110\n    width = -1970144816\n    height = 1\n    transform = 32766\n\n3  0x00005560c8a819f2 in damage_handle_frame (listener=0x5560ca0e6718, data=0x5560ca1f8870)\nat ../sway/desktop/output.c:377\n    output = 0x5560ca0e65a0\n    now = {tv_sec = 43036, tv_nsec = 204302432}\n    needs_swap = true\n    damage = {extents = {x1 = 0, y1 = 0, x2 = 1920, y2 = 1080}, data = 0x0}\n\n4  0x00007f526ac05169 in wlr_signal_emit_safe (signal=0x5560ca1f88d0, data=0x5560ca1f8870)\nat ../subprojects/wlroots/util/signal.c:29\n    pos = 0x5560ca0e6718\n    l = 0x5560ca0e6718\n    cursor = {link = {prev = 0x5560ca0e6718, next = 0x7ffe8a91faf0}, notify = 0x7f526ac050b3 <handle_noop>}\n    end = {link = {prev = 0x7ffe8a91fad0, next = 0x5560ca1f88d0}, notify = 0x7f526ac050b3 <handle_noop>}\n\n5  0x00007f526abf2d30 in output_handle_frame (listener=0x5560ca1f8968, data=0x5560ca1221f0)\nat ../subprojects/wlroots/types/wlr_output_damage.c:50\n    output_damage = 0x5560ca1f8870\n\n6  0x00007f526ac05169 in wlr_signal_emit_safe (signal=0x5560ca122310, data=0x5560ca1221f0)\nat ../subprojects/wlroots/util/signal.c:29\n    pos = 0x5560ca1f8968\n    l = 0x5560ca1f8968\n    cursor = {link = {prev = 0x5560ca1f8968, next = 0x7ffe8a91fb90}, notify = 0x7f526ac050b3 <handle_noop>}\n    end = {link = {prev = 0x7ffe8a91fb70, next = 0x5560ca122310}, notify = 0x7f526ac050b3 <handle_noop>}\n\n7  0x00007f526abf5c3f in wlr_output_send_frame (output=0x5560ca1221f0)\nat ../subprojects/wlroots/types/wlr_output.c:413\n\n8  0x00007f526abb97dc in page_flip_handler (fd=9, seq=1428732, tv_sec=43036, tv_usec=204651, data=0x5560ca1221f0)\nat ../subprojects/wlroots/backend/drm/drm.c:1303\n    conn = 0x5560ca1221f0\n    drm = 0x5560c9f52150\n    present_time = {tv_sec = 43036, tv_nsec = 204651000}\n    present_event = {output = 0x5560ca1221f0, when = 0x7ffe8a91fc10, seq = 1428732, refresh = 16661112, flags = 7}\n\n9  0x00007f526a010705 in drmHandleEvent () at /usr/lib/libdrm.so.2\n10 0x00007f526abb9861 in handle_drm_event (fd=9, mask=1, data=0x0) at ../subprojects/wlroots/backend/drm/drm.c:1313\n    event = \n{version = 2, vblank_handler = 0x0, page_flip_handler = 0x7f526abb9673 <page_flip_handler>, page_flip_handler2 = 0x0, sequence_handler = 0x0}\n\n11 0x00007f526a550702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n12 0x00007f526a54f2ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n13 0x00005560c8a7e921 in server_run (server=0x5560c8adbbe0 ) at ../sway/server.c:195\n14 0x00005560c8a7df2a in main (argc=1, argv=0x7ffe8a920488) at ../sway/main.c:408\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x5560c8ac3d3c \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5560c8ac3d41 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5560c8ac3d48 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5560c8ac3d51 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5560c8ac3d57 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5560c8ac3d5f \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5560c8ac3d67 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x5560c8ac3d76 \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x5560c8ac3d86 \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5560c8ac38d0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n(gdb) p view\n$1 = (struct sway_view ) 0x5560ca5b44d0\n(gdb) p view\n$2 = {type = (unknown: 3395077392), impl = 0x5560ca5c4900, container = 0x0, surface = 0x0, xdg_decoration = 0x0, \n  pid = 5425, saved_x = 0, saved_y = 0, saved_width = 0, saved_height = 0, natural_width = 654, natural_height = 434, \n  title_format = 0x0, using_csd = false, urgent = {tv_sec = 0, tv_nsec = 0}, allow_request_urgent = true, \n  urgent_timer = 0x0, saved_buffer = 0x0, saved_buffer_width = 654, saved_buffer_height = 434, geometry = {x = 0, \n    y = 0, width = 654, height = 434}, saved_geometry = {x = 0, y = 0, width = 654, height = 434}, destroying = true, \n  executed_criteria = 0x5560ca5cc5d0, {wlr_xdg_surface_v6 = 0x0, wlr_xdg_surface = 0x0, wlr_xwayland_surface = 0x0, \n    wlr_wl_shell_surface = 0x0}, events = {unmap = {listener_list = {prev = 0x5560ca5b4598, next = 0x5560ca5b4598}}}, \n  surface_new_subsurface = {link = {prev = 0x0, next = 0x0}, \n    notify = 0x5560c8ab5d54 }}\n(gdb) p view->destroying \n$3 = true\n(gdb) \n```\nNot really sure how to handle this and if destroying views should not even reach the output_render function. But I guess the iterating functions should skip destroying views.\n/cc @emersion @RyanDwyer  . For reasons I have not found out yet, the seat_consider_warp_to_focus call wants to warp to the view which is currently unmapping:\n```\n(gdb) bt\n0  0x000055e02417b187 in output_get_box (output=0x0, box=0x7ffee1520f90) at ../sway/tree/output.c:370\n1  0x000055e02414d909 in seat_consider_warp_to_focus (seat=0x55e024d6d260) at ../sway/input/seat.c:1063\n2  0x000055e02417647f in view_unmap (view=0x55e02525a1a0) at ../sway/tree/view.c:658\n3  0x000055e024148593 in handle_unmap (listener=0x55e02525a368, data=0x55e0252476c0) at ../sway/desktop/xdg_shell.c:395\n4  0x00007fc1355e1169 in wlr_signal_emit_safe (signal=0x55e0252477c8, data=0x55e0252476c0) at ../subprojects/wlroots/util/signal.c:29\n5  0x00007fc1355bcfaa in unmap_xdg_surface (surface=0x55e0252476c0) at ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:34\n6  0x00007fc1355bde0d in reset_xdg_surface (xdg_surface=0x55e0252476c0) at ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:444\n7  0x00007fc1355bdf1f in destroy_xdg_surface (surface=0x55e0252476c0) at ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:478\n8  0x00007fc1355bdb26 in xdg_surface_handle_surface_destroy (listener=0x55e025247758, data=0x55e02523ef60) at ../subprojects/wlroots/types/xdg_shell/wlr_xdg_surface.c:379\n9  0x00007fc1355e1169 in wlr_signal_emit_safe (signal=0x55e02523f220, data=0x55e02523ef60) at ../subprojects/wlroots/util/signal.c:29\n10 0x00007fc1355d8efa in surface_handle_resource_destroy (resource=0x55e02523f280) at ../subprojects/wlroots/types/wlr_surface.c:553\n11 0x00007fc134f2ac7f in  () at /usr/lib/libwayland-server.so.0\n12 0x00007fc134f2f052 in  () at /usr/lib/libwayland-server.so.0\n13 0x00007fc134f2f55f in  () at /usr/lib/libwayland-server.so.0\n14 0x00007fc134f2adff in wl_client_destroy () at /usr/lib/libwayland-server.so.0\n15 0x00007fc134f2aedb in  () at /usr/lib/libwayland-server.so.0\n16 0x00007fc134f2c702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n17 0x00007fc134f2b2ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n18 0x000055e02413dc2d in server_run (server=0x55e02419bc20 ) at ../sway/server.c:195\n19 0x000055e02413d236 in main (argc=1, argv=0x7ffee15216a8) at ../sway/main.c:408\n(gdb) frame 1\n1  0x000055e02414d909 in seat_consider_warp_to_focus (seat=0x55e024d6d260) at ../sway/input/seat.c:1063\nwarning: Source file is more recent than executable.\n1063            if (config->mouse_warping == WARP_NO || !focus) {         \n(gdb) p focus->sway_container->title\n$1 = 0x55e025249180 \"Testtterm\"\n(gdb) \n``\nAbove testterm is a termite instance which was killed while its in the scratchpad. It looks like the focus is still set on the unmapping view when we call warp to focus.. None of these functions manipulate thefocus_stack, the only difference is that the open coded function did not take any action ifWARP_OUTPUTwas set and thus hid the bug. I have not dug into the code deep enough to find the place where the unmapping views container is removed from thefocus_stack.. From the Readme:\nscdoc >= 1.8.0 (optional: man pages)\n. No, this was hard to reproduce even without the fix. I also assume this is fixed, will reopen if I see this again.. I suspect that this is a rebranded PowerVR graphics card, those cards do not have an open source driver, meaning they won't support modesetting.. Did you use an AUR helper for the installation? And if yes, which one did you use?. Unless I'm misreading the man page, yay requires the use of--rebuildotherwise it will just use the already build package from cache.. @RedBorg which AUR helper are you using? Or are you building the package manually?. If I am not mistaken this was fixed by https://github.com/swaywm/sway/pull/3488. The signed-off-by is a habit, I'll remove it from the commit\u2026. Do you have a debug log? I unfortunately had none.. Update to latest wlroots, this was recently added and needs an up to date version. It is also advisable to remove already installed versions of wlroots (i.e. from repos or even the aur packages) and build it as subproject within sway. A stable sway experience on themasterbranch requires wlroots from itsmasterbranch as well.. Do you have an old version ofwlroots-gitinstalled? Maybe a dependency of an earlierswayidle-gitorswaylock-gitpackage?  Or maybe thewlroots` package which is in community as an dependency of another package?. Sound argument, amended and pushed.. This is from the recursion inside:\nhttps://github.com/swaywm/sway/blob/f078a1ccb899e04d24ba76418bdf574aa45c9c7e/sway/ipc-json.c#L543\n~~This for loop will be traversed once even if the length is zero, thus leading to the use after free.~~\nScratch that, I confused it with a do-while loop.\nCan you post the backtrace?. This should have been fixed by 16ddd00102c7713b7d1c404393768eb06c829751, new_output_last_ws is null so seat_get_focus_inactive should have never been called. Are you sure your version information is correct and fits the stacktrace?. You can check the debug log file, it should note the version at the very beginning. If you see this again don't hesitate to reopen.. Ah, yes you're right. Thanks for the explanation :+1: . To me the stack trace does not make any sense. None of the functions call each other,  was this binary stripped?. Yes, will fix tomorrow.. Should be fixed now.. I use output * dpms off and output * dpms on which turn the output off and on.. From IRC:\nemersion \u2561 workaround: meson -Dman-pages=disabled. Investigating the code, the fix is going to be in seat_get_focused_workspace by also trying seat_get_focus_inactive. However a seat not having a focus or inactive focus behaviour is still valid (e.g. shortly after creation) and should imo be handled by all callers. In this case I think its also fine to abort in the case of the above command.\nThe other call sites of seat_get_focused_workspace need investigation as well.. I'll test after lunch :+1: . My scratchpad terminal works again and I have not met undesirable side effects yet, looks good to me.. Are you talking about:\nmouse_warping container. I'll add node && to the conditional.. - I intended to use >= WARP_OUTPUT to ensure we also warp on output change if the WARP_CONTAINER is set. I'll need to read more code to understand whether it still works with == WARP_OUTPUT.\n- Current code warps to the container on output change, this may regress if we change it to warp only to workspaces\n- Yes,  I'll unify this into the (last_focus) condition. I copied  (last_focus) from previous code, I'll look into it.. Judging by git blame, last_focus was used to remove the focus from a view previously. It will probably cause no harm to remove here. What are your thoughts on this @RyanDwyer?. Done.. Done.. @RyanDwyer Do you have an idea why this was not changed to seat_consider_warp_to_focus previously? Just want to make sure I'm fixing a leftover location and not introducing a bug.. Nice catch, this fixed the input bug I was experiencing.. This breaks a floating terminal which was resized using a for_window [app_id=\"quick_scratchpad\"] mark quick, move scratchpad, resize set 1600 900 directive. The resize command is no longer applied (but worked before).. Yep, moved and added the check.. dmenu is not a wayland application. ",
    "manio": "@SirCmpwn \nIf it's removed from the git and deprecated then maybe can you please update the wiki?\nhttps://github.com/swaywm/sway/wiki#taking-screenshots\nThanks in advance! :). Hi guys,\nI don't know if it is related but I also have similar problem. I was just trying to run sway on new machine. It's debian sid. I just cloned and installed wlroots and sway as usual (master git). The host have two gpu's:\n- radeon\n- nvidia (using nouveau)\nWhen i just type 'sway -d' then I've got:\n2018-12-21 05:54:55 - [sway/server.c:34] Preparing Wayland server initialization\n2018-12-21 05:54:55 - [backend/session/logind.c:494] Failed to get session id: No data available\n2018-12-21 05:54:55 - [backend/session/direct-ipc.c:47] Do not have root privileges; cannot become DRM master\n2018-12-21 05:54:55 - [backend/session/session.c:91] Failed to load session backend\n2018-12-21 05:54:55 - [backend/backend.c:265] Failed to start a DRM session\n2018-12-21 05:54:55 - [sway/server.c:40] Unable to create backend\nAfter making sway binary setuid it just stack on startup with black screens (on one screen the console logs are frozen). When I masked systemd-logind and rebooted, similar error as above log appear and it doesn't start.\nDo i need to compile wlroots without logind support?. @ascent12\nNo, I was trying to run it from normal user... (I logged from regular getty from VT - system is booted to text mode). Now I am running sway without setuid (I did it only once for testing as pointed in this issue).. In my case i don't need to do REISUB, I can login remotely via ssh. My problem was that loginctl list-sessions was returning 'no sessions'. I reinstalled pam because the problem was with systemd-pam. After fixing this, the sessions are registered properly and I can run sway from normal user (and without any setuid workarounds).\nIt is running perfectly fine on two gpu (radeon, nouveau) and 3 displays :)\nthank you for help/tips :). ",
    "ggreer": "In case you're curious, here's the JSON response that caused swaygrab to segfault for me: https://gist.github.com/ggreer/11efa2ddb0e39b4604e9e00e5a728b04\nI'm not sure how, but I accidentally created a bunch of nested splits.\nOh yeah, and I did actually exercise this code path:\n\n. OK, increased to 256.\nBTW while testing this, I found that swaygrab will segfault if IPC returns a message such as { \"success\": false, \"error\": \"Permission denied\" }. I was thinking about that. A json_object* ipc_parse_and_check(char *res, uint32_t len) might make sense. Give it an IPC response, and it parses with a 256 max depth. Then it either returns a JSON object or aborts with an error message (can't parse JSON, success is false, etc).\nAnother option would be for the function to return an error (or take a pointer to an error struct/string/whatever). That way any calling code could choose to abort or recover.\nThis codebase is new to me though, so I'm erring on the side of making smaller changes.\n. I'd still prefer to not call sh except for custom commands, but at least this fixes the annoying double/triple swaybar issue.. A common use case is showing a blurred or pixelated version of the screen while locked. That means using swaygrab + swaylock. But if swaygrab fails, the user still wants their screen locked.. FYI, I didn't really take the time to understand this code. I just got it working to fix the behavior that was annoying me.\nIf somebody has better ideas, I'm all ears.. This fixes the issue. Thanks a lot.. The new default behavior is not fun on many laptop keyboards, where the \"number pad\" reuses U, I, O, J, K, L, and other keys.\nAlso on most systems, isn't the default numlock value configurable in the BIOS? I don't know of any other window manager that defaults to messing with numlock.. I made a PR that changes this behavior: https://github.com/swaywm/sway/pull/2371. I built your disabled-crtc branch and no more crashes. Thanks!\nEdit: Now I'm getting a different crash if I make a split, put two windows in it, and try to move one window up past the \"top\" of the split.. It looks like https://github.com/swaywm/sway/pull/2628 fixed my other crash. Closing this because all my crashes are fixed in master. Thanks!. Ah, yeah. The actual patch I was using had an extra line setting subpixel order to CAIRO_SUBPIXEL_ORDER_RGB, since that's what my monitors use.. Before (antialiased) \nAfter (subpixel rendering) \n. I think the correct field is \"app_id\", not \"app-id\". (At least, that's what works for me in master as of 2019-02-12.) I've updated the wiki to reflect this.. #3049 fixed this issue for me, though now before-sleep happens after resume. After I wake up my laptop, there's a fraction of a second where my screen is unlocked. #3198 sorta describes what I'm seeing.. Perhaps it's a bug detecting your screen's subpixel output. In common/cairo.c, to_cairo_subpixel_order() defaults to CAIRO_SUBPIXEL_ORDER_DEFAULT if the subpixel order is WL_OUTPUT_SUBPIXEL_UNKNOWN. That renders text with antialiasing and no hinting. I have this bug on one of my laptops, but it uses an eDP->LVDS converter.\nI guess some debug logging in that function could be useful.. Gist updated with the output of WAYLAND_DEBUG=client gnome-power-statistics &> wayland-gnome-power-settings.log\nhttps://gist.github.com/ggreer/120d530e5b034dcac6fd1f87878ea89e#file-wayland-gnome-power-settings-log\nAnother clue: If I start sway with the external monitor plugged in, I can unplug and re-plug in all I want and nothing ever crashes. This is true even if I sleep/wake my laptop.. I think https://github.com/swaywm/wlroots/pull/1545 fixed this issue.\nI bet the underlying race condition is still there (and could likely be triggered with an appropriately flaky monitor), but I can't seem to reproduce the problem when using wlroots after that version. Also external monitors become usable much quicker now.. Now that https://github.com/swaywm/wlroots/pull/1545 is reverted, this bug is back.. After some recent wlroots changes, I can reproduce this issue if sleep/wake and then connect an external monitor. I'll try to collect some useful logs.. ```\nggreer@iron:~/code/sway% swaymsg -t get_outputs\nOutput eDP-1 'Unknown 0x06D0 0x00000000' (focused)\n  Current mode: 2880x1920 @ 60.007000 Hz\n  Position: 0,0\n  Scale factor: 2.000000\n  Subpixel hinting: rgb\n  Transform: normal\n  Workspace: 2\n  Available modes:\n    2880x1920 @ 60.007000 Hz\nggreer@zinc:~% swaymsg -t get_outputs\nOutput eDP-1 'Lenovo Group Limited 0x4005 0x00000000' (focused)\n  Current mode: 1400x1050 @ 50.000000 Hz\n  Position: 0,0\n  Scale factor: 1.000000\n  Subpixel hinting: rgb\n  Transform: normal\n  Workspace: 2\n  Available modes:\n    640x480 @ 59.939999 Hz\n    800x600 @ 60.317001 Hz\n    1024x768 @ 60.004002 Hz\n    1280x1024 @ 60.020000 Hz\n    1400x1050 @ 50.000000 Hz\n```\nI can also change the subpixel hinting at runtime with swaymsg output eDP-1 subpixel rgb. Some apps don't pick up the new hinting until they're restarted, but app title bars are updated immediately. The difference is extremely obvious on my laptop with a 1400x1050 screen.. Alright. I added the code to store the original subpixel value & reset it in apply_output_config(). In testing, I can run swaymsg output eDP-1 subpixel rgb and swaymsg -t get_outputs says hinting is rgb. Then I can reload my config and swaymsg -t get_outputs says unknown (which is the original value).\n. Alright, changes made. Before merging, I want to test this again on a lower resolution display to make sure it still behaves correctly. I'm busy for the rest of the day, so it might be as late as tomorrow before I know for sure.. This only happens to me if I have a background set in my config.\nLog of me reloading my config (but with sway -V, not -d) https://gist.github.com/ggreer/df9cfbf1bec06d9b73524aef246d1963\nIf I try to kill swaybg with kill -TERM, it becomes a zombie process.\nggreer@iron:~/code/sway% ps ax | ag swaybg\n 1936 tty1     Z+     0:00 [swaybg] <defunct>\n 3390 pts/0    S+     0:00 ag swaybg\n. I think it's pretty handy to be able to set the log level in the config instead of tweaking how sway is started. I ended up making this change because someone on IRC recommended running swaymsg debuglog on to get more logging out of a sway that was in a buggy state. It turns out that despite being in the manpage, that's not a command that works.\nIdeally, I'd also like to change the command line args to use a --log_level instead of -V and -d, but that seems like a whole 'nother can of worms. Long term, it'd be neat if config, swaymsg commands, and command line arguments were all unified in their names and behavior.\n. I have no idea how that happened. I blame sublime text.. Oops. That was the code I meant to have in this PR, but I'd forgotten to add -f to my git push.. Oops. Thanks for pointing that out. Fixed.. Fixed. I wonder if there's a clang-format rule for that.. If there is a toString function for wl_output_subpixel, I'd love to use it. I looked around for a few minutes but I didn't find one.. I added one to my wlroots PR, since I'm guessing both wlroots and WMs that use it will want to log subpixel order.. But oc might be null, right? Then oc->name would cause a segfault.. Originally I put the damage in wlr_output_set_subpixel(). Fixed.. I see one assert(false) in the codebase, so I used sway_assert() with an error message instead. Anyway, default case removed.. Done.. ",
    "markstos": "Sure, but only the people who know the answers can usefully edit it. I don't know if there is a replacement for i3-nagbar or not, which is why I opened the issue here. I expect someone monitoring the issue tracker knows the answer.. Thanks for the clarification-- now I can update the wiki. ;). ",
    "pcewing": "Ah sorry. I did not know that!. ",
    "luctrudeau": "Seeing that screenshot options under wayland are limited, This feature would be a great addition to swaygrab. Is there another way to take a screenshot for only a region of the screen?. ",
    "Magicking": "No, it's an Intel Corporation HD Graphics 620 (rev 02) from https://ark.intel.com/products/97466/Intel-Core-i7-7600U-Processor-4M-Cache-up-to-3-90-GHz-. The \"flashes\" / artifacts I see looks like a buffer being updated while being displayed (maybe a transparency issue as I see no transparency on the artifacts ?)\nHere a slow-mo video of the problem http://6120.eu/private/ff1f024031fc9d07ba7fe4d85bc4d44c.mp4\nIn the background run while true; do find ${HOME}/wallpapers/ -name \\*.jpg -o -name \\*.png | grep -v hidden | shuf -n 1 | xargs -I{} swaymsg -t command output eDP-1 bg {} fill; sleep 1m; done (Yes, I do have that every minute, it's quite annoying)\nEdit: extracted screenshot from video above https://6120.eu/private/2018-12-25-115259_2560x1440_scrot.png. ",
    "herrold": "As predicted, as I read the thread, a topic of discussion at\"\nhttps://lists.fedoraproject.org/archives/list/devel@lists.fedoraproject.org/message/BGLLIFYNCJ6N5JNIWZNRH2OE6P23KAZX/\n\nand their bug:\nhttps://bugzilla.redhat.com/show_bug.cgi?id=1525020\n\n. ",
    "HenryMiller1": "Note, as far as I can tell this is never actually used, (nothing seem to link to the library) even though you require it on linux.  Since I know almost nothing about your project I'm not willing to tell you to remove it, but you might want to consider if you still need this at all.. ",
    "dvc94ch": "Does this work now? I tried\noutput eDP-1 pos 0,0\noutput DP-1 pos 0,0\nbut that only mirrors the cursor not the workspace.. ",
    "moonheart08": "I've been trying to redirect sway's output via '>', but im suprisingly incompetent with a terminal. IF someone can point me in the right direction, i'll do it.. ",
    "prg318": "I've experienced this as well in sway 0.15.1.  It would be nice to be able to scroll workspaces on the bottom most pixel - if you happen to be using a mouse, it's a convenient \"gesture\". I'm honestly going to close this an a non-issue since I don't think anyone cares or will run into this (new i3 config files work fine). ",
    "soleera": "Yep, that worked; swaybar displays with window buttons, i3status, and uses the config file successfully (font, colours,  etc.). \nHere's a gist of the debugging messages.. 0.15.0 just got added to my distribution's repo a couple of days ago (gentoo), so I've updated to that and don't have any more issues with swaybar. Not quite sure why swaybar wouldn't be able to get a connection to dbus though since I start dbus at boot time;\nroot #  rc-update add dbus default\n* rc-update: dbus already installed in runlevel `default'; skipping. ",
    "nlescoua": "Use the following configuration to circumvent the issue. Note that i3 (contrary to sway) support you specification ($mod+1 ....)\nswitch to workspace\nbindsym $mod+ampersand workspace 1\nbindsym $mod+eacute workspace 2\nbindsym $mod+quotedbl workspace 3\nbindsym $mod+apostrophe workspace 4\nbindsym $mod+parenleft workspace 5\nbindsym $mod+egrave workspace 6\nbindsym $mod+minus workspace 7\nbindsym $mod+underscore workspace 8\nbindsym $mod+ccedilla workspace 9\nbindsym $mod+agrave workspace 10\nmove focused container to workspace\nbindsym $mod+Shift+ampersand move container to workspace 1\nbindsym $mod+Shift+eacute move container to workspace 2\nbindsym $mod+Shift+quotedbl move container to workspace 3\nbindsym $mod+Shift+apostrophe move container to workspace 4\nbindsym $mod+Shift+parenleft move container to workspace 5\nbindsym $mod+Shift+egrave move container to workspace 6\nbindsym $mod+Shift+minus move container to workspace 7\nbindsym $mod+Shift+underscore move container to workspace 8\nbindsym $mod+Shift+ccdedilla move container to workspace 9\nbindsym $mod+Shift+agrave move container to workspace 10. ",
    "Alphare": "\nbindsym $mod+Shift+ccdedilla move container to workspace 9\n\nNote: it's ccedilla, like above, else sway will spit out and error.. @SirCmpwn Alright, completely understand. Thanks for your quick reply! . https://pbs.twimg.com/media/Docf6V9XgAUevS5.jpg:large. I've actually had that very error message pop up once (I haven't had time to do a proper bug report yet). What does \"Root privileges can be restored. Refusing to start.\" really mean? Why do we refuse to start? \nThanks. This indeed matches what i3 does. It's a little frustrating, but the argument about switching to a context-sensitive parser outweighs this minor inconvenience. Thanks. @progandy Mhhh, that might be it yeah. This libinput docs paragraph seems to indicate that you can indeed keep a 1:1 ratio and have a factor. Now, whether that factor is wide enough is another question. I'm not on my machine right now, I'll test that later .\nMoreover, my initial issue with inconsistent default sens (read: DPI settings) might be something in udev unrelated to sway.\nI'll check back soon, thanks.. Wouldn't it be clearer to say something like\nsuggestion\n        wlr_log(WLR_ERROR, \"Dropping root privileges failed. Refusing to start.\"); \n?. suggestion\n    // If there is a wrap candidate, return its focus inactive view\nMinor typo. ",
    "brandon-arnold": "How? It just came from the master branch.. Unless it's picking up something from apt-get....let me see\n. brandon@goatboxter3:/etc$ which wlc\n/usr/bin/wlc\nbrandon@goatboxter3:/etc$ which sway\n/usr/local/bin/sway. Here is the output after sudo make install of wlc:\n-- Install configuration: \"Release\"\n-- Up-to-date: /usr/local/lib/libwlc.so.0.0.10\n-- Up-to-date: /usr/local/lib/libwlc.so.0\n-- Up-to-date: /usr/local/lib/libwlc.so\n-- Up-to-date: /usr/local/include/wlc\n-- Up-to-date: /usr/local/include/wlc/defines.h\n-- Up-to-date: /usr/local/include/wlc/wlc-wayland.h\n-- Up-to-date: /usr/local/include/wlc/wlc-render.h\n-- Up-to-date: /usr/local/include/wlc/wlc.h\n-- Up-to-date: /usr/local/include/wlc/geometry.h\n-- Up-to-date: /usr/local/lib/pkgconfig/wlc.pc. Yes, it does.. I think I get it. So some other thing installed an older version, probably aptitude. Well I will have to figure out where that's coming from.. Wait. No! What's wrong with it installing to /usr/loca/wlc? The output of sudo make install clearly states that it installed it there!. I mean. Not my problem, right? I'm just following directions.. Okay, thanks for the help.. @SirCmpwn I just removed the following files--my only guess is that I've tried installing this some time ago and forgotten:\nusr\n    \u251c\u2500\u2500 include\n    \u2502\u00a0\u00a0 \u2514\u2500\u2500 wlc\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 defines.h\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 geometry.h\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 wlc.h\n    \u2502\u00a0\u00a0     \u251c\u2500\u2500 wlc-render.h\n    \u2502\u00a0\u00a0     \u2514\u2500\u2500 wlc-wayland.h\n    \u2514\u2500\u2500 lib\n        \u2514\u2500\u2500 x86_64-linux-gnu\n            \u251c\u2500\u2500 libwlc.so -> libwlc.so.0\n            \u251c\u2500\u2500 libwlc.so.0 -> libwlc.so.0.0.9\n            \u251c\u2500\u2500 libwlc.so.0.0.9\n            \u2514\u2500\u2500 pkgconfig\n                \u2514\u2500\u2500 wlc.pc\nI've also verified that wlc installed to the location as per the output of sudo make install, above.\nWhy then is sway unable to find libwlc.so, as below?\nbrandon@goatboxter3:~/wlc-temp$ sway\nsway: error while loading shared libraries: libwlc.so.0: cannot open shared object file: No such file or directory. Yep, I added a the *.so paths to my LD_LIBRARY_PATH in .bashrc and it seems to have picked them up. Now I'm getting the error as per #1162, as follows:\n!! DANGER !! Sway does not have CAP_SYS_PTRACE and cannot enforce security rules for processes running as other users.. I did it. Now I'm getting the damn missing .so file again. Sheesh!. Alll right now we are cooking with grease. Let me try it.. Passing in a -D switch to CMake did not do it, but I was able to load it in system-wide via adding it to /etc/ld.so.conf. I feel like I am close but it is still not starting; here's the output after sway -d:\n```\nI: 11/12/17 22:58:35 - [main.c:250] Linux goatboxter3 4.9.0-4-amd64 #1 SMP Debian 4.9.51-1 (2017-09-28) x86_64 GNU/Linux\nI: 11/12/17 22:58:35 - [main.c:222] Contents of /etc/os-release:\nI: 11/12/17 22:58:35 - [main.c:229] PRETTY_NAME=\"Debian GNU/Linux 9 (stretch)\"\nI: 11/12/17 22:58:35 - [main.c:229] NAME=\"Debian GNU/Linux\"\nI: 11/12/17 22:58:35 - [main.c:229] VERSION_ID=\"9\"\nI: 11/12/17 22:58:35 - [main.c:229] VERSION=\"9 (stretch)\"\nI: 11/12/17 22:58:35 - [main.c:229] ID=debian\nI: 11/12/17 22:58:35 - [main.c:229] HOME_URL=\"https://www.debian.org/\"\nI: 11/12/17 22:58:35 - [main.c:229] SUPPORT_URL=\"https://www.debian.org/support\"\nI: 11/12/17 22:58:35 - [main.c:229] BUG_REPORT_URL=\"https://bugs.debian.org/\"\nI: 11/12/17 22:58:35 - [main.c:222] Contents of /etc/debian_version:\nI: 11/12/17 22:58:35 - [main.c:229] 9.1\nI: 11/12/17 22:58:35 - [main.c:207] PATH=/home/brandon/bin:/home/brandon/.dvm/bin/docker/1.11.2/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games:/usr/lib/jvm/java-8-oracle/bin:/usr/lib/jvm/java-8-oracle/db/bin:/usr/lib/jvm/java-8-oracle/jre/bin:/home/brandon/bin:/home/brandon/opt/node-v8.1.2-linux-x64/bin:/usr/local/go/bin:/home/brandon/go/bin\nI: 11/12/17 22:58:35 - [main.c:207] LD_LOAD_PATH=(null)\nI: 11/12/17 22:58:35 - [main.c:207] LD_PRELOAD_PATH=(null)\nI: 11/12/17 22:58:35 - [main.c:207] LD_LIBRARY_PATH=/usr/local/lib/\nI: 11/12/17 22:58:35 - [main.c:207] SWAY_CURSOR_THEME=(null)\nI: 11/12/17 22:58:35 - [main.c:207] SWAY_CURSOR_SIZE=(null)\nI: 11/12/17 22:58:35 - [main.c:207] SWAYSOCK=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_DRM_DEVICE=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_SHM=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_OUTPUTS=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_XWAYLAND=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_LIBINPUT=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_REPEAT_DELAY=(null)\nI: 11/12/17 22:58:35 - [main.c:207] WLC_REPEAT_RATE=(null)\nI: 11/12/17 22:58:35 - [main.c:207] XKB_DEFAULT_RULES=(null)\nI: 11/12/17 22:58:35 - [main.c:207] XKB_DEFAULT_MODEL=(null)\nI: 11/12/17 22:58:35 - [main.c:207] XKB_DEFAULT_LAYOUT=(null)\nI: 11/12/17 22:58:35 - [main.c:207] XKB_DEFAULT_VARIANT=(null)\nI: 11/12/17 22:58:35 - [main.c:207] XKB_DEFAULT_OPTIONS=(null)\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] logind: session control granted\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Running on vt 2 (fd 0)\nI: 11/12/17 22:58:35 - [main.c:50] [wlc] Failed to open X11 display\nI: 11/12/17 22:58:35 - [main.c:466] Starting sway version 0.15-rc1-48-g7c3b0ff (2017-11-13, branch \"master\")\nD: 11/12/17 22:58:35 - [config.c:450] Set XDG_CONFIG_HOME to /home/brandon/.config\nI: 11/12/17 22:58:35 - [config.c:475] Loading config from /etc/sway/security.d/00-defaults\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'permit * fullscreen keyboard mouse'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(permit) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target ''\nD: 11/12/17 22:58:35 - [permit.c:71] Permissions granted to * for features 112\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'permit /usr/local/bin/swaylock lock'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(permit) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\nD: 11/12/17 22:58:35 - [permit.c:71] Permissions granted to /usr/local/bin/swaylock for features 113\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'permit /usr/local/bin/swaybg background'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(permit) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaybg'\nD: 11/12/17 22:58:35 - [permit.c:71] Permissions granted to /usr/local/bin/swaybg for features 116\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'permit /usr/local/bin/swaygrab screenshot'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(permit) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\nD: 11/12/17 22:58:35 - [permit.c:71] Permissions granted to /usr/local/bin/swaygrab for features 120\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'permit /usr/local/bin/swaybar panel'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(permit) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\nD: 11/12/17 22:58:35 - [permit.c:71] Permissions granted to /usr/local/bin/swaybar for features 114\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'ipc /usr/local/bin/swaymsg {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(ipc) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaymsg'\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command ' enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler() 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC * feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'events {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(events) 0\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command ' disabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler() 0\nD: 11/12/17 22:58:35 - [ipc.c:158] Disabled IPC * event\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:822] End of IPC events block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:817] End of IPC block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'ipc /usr/local/bin/swaybar {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(ipc) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaybar'\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'bar-config enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(bar-config) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC bar-config feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'outputs enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(outputs) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC outputs feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'workspaces enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(workspaces) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC workspaces feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'command enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(command) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC command feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'events {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(events) 0\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'workspace enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(workspace) 0\nD: 11/12/17 22:58:35 - [ipc.c:155] Enabled IPC workspace event\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'mode enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(mode) 0\nD: 11/12/17 22:58:35 - [ipc.c:155] Enabled IPC mode event\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:822] End of IPC events block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:817] End of IPC block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'ipc /usr/local/bin/swaygrab {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(ipc) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaygrab'\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'outputs enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(outputs) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC outputs feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'tree enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(tree) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC tree feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:817] End of IPC block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'ipc /usr/local/bin/swaylock {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(ipc) 0\nD: 11/12/17 22:58:35 - [security.c:14] Validating IPC target '/usr/local/bin/swaylock'\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'outputs enabled'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(outputs) 0\nD: 11/12/17 22:58:35 - [ipc.c:106] Enabled IPC outputs feature\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command '}'\nD: 11/12/17 22:58:35 - [config.c:817] End of IPC block\nI: 11/12/17 22:58:35 - [commands.c:519] handling config command 'commands {'\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(commands) 0\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler() 0\nI: 11/12/17 22:58:35 - [commands.c:623] Set command policy for * to -1\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(fullscreen) 0\nI: 11/12/17 22:58:35 - [commands.c:623] Set command policy for fullscreen to 10\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(bindsym) 0\nI: 11/12/17 22:58:35 - [commands.c:623] Set command policy for bindsym to 1\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(exit) 0\nI: 11/12/17 22:58:35 - [commands.c:623] Set command policy for exit to 2\nD: 11/12/17 22:58:35 - [commands.c:344] find_handler(kill) 0\nI: 11/12/17 22:58:35 - [commands.c:623] Set command policy for kill to 2\nD: 11/12/17 22:58:35 - [config.c:812] End of commands block\nI: 11/12/17 22:58:35 - [config.c:475] Loading config from /home/brandon/.config/sway/config\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Terminating wlc...\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Terminating compositor...\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Compositor terminated...\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Parent exit (3364)\nD: 11/12/17 22:58:35 - [main.c:52] [wlc] Restoring vt 2 (0x4) (fd 0)\n``. Maybe the config it copied over isn't working. I will fiddle with that.. Nope. Not sure! ThatI: 11/12/17 22:58:35 - [main.c:50] [wlc] Failed to open X11 displayline must have something to do with it.. @SirCmpwn It turns out the problem is in trying to load the file in~/.config/sway. Having removed the whole~/.config/sway`, the PPA as well as the AUR package for Arch are working. When I have time I will look over Sway/source/doc to see how the experience may be improved for idiots such as myself.. ",
    "cycomanic": "I just did some more debugging and I (or the install script) had put the desktop file into /usr/share/xsessions after moving that to /usr/share/wayland-sessions/ everything is working. Sorry for the noise, and thanks for all the hard work  on sway!. I've tried konversation, tried vlc, tried the script mentioned in the other discussion based on python-kde4: https://github.com/ubuntu/gnome-shell-extension-appindicator/blob/master/indicator-test-tool/ksni.py\nclementine (with sni-qt installed). Not sure what other ones to test. It does not seem that there is a tray area even showing. If I add a separator_symbol and tray_padding to very high numbers nothing changes on the bar.. OK, just did a check after removing the padding, konversation is working now. None of the other apps are showing I suspect that's due to #1372 ? I thought according to the thread there the ksni.py utility should work?. OK, just did a check after removing the padding, konversation is working now. None of the other apps are showing I suspect that's due to #1372 ? I thought according to the thread there the ksni.py utility should work? . ",
    "deevus": "But how?. I must be running an older version as that man page doesn't exist. \n$ sway -v\nsway version  (2018-07-26, branch \"\")\nI'm running Fedora 28 (current release version as of this post). I installed sway using dnf install sway. I'll try a copr. I might look into how to pressure them to update the official repository version. It could be the wayland version as its one minor version too old to compile sway. Name         : sway\nVersion      : 0.15.2\nRelease      : 1.fc28\nArch         : x86_64\nSize         : 670 k\nSource       : sway-0.15.2-1.fc28.src.rpm\nRepo         : @System\nFrom repo    : updates\nSummary      : i3-compatible window manager for Wayland\nURL          : https://github.com/swaywm/sway\nLicense      : MIT\nDescription  : Sway is a tiling window manager supporting Wayland compositor protocol and\n             : i3-compatible configuration.. ",
    "dmeijboom": "Thanks! Here is the additional information: https://gist.github.com/dmeijboom/64ff38bff135444731e0bab3cb520ed8. Thanks! Here is the additional information: https://gist.github.com/dmeijboom/64ff38bff135444731e0bab3cb520ed8. I think so because in the logs from journalctl it says \"sway [PID]\" and I'm returning to my display manager (which is SDDM). I'm not 100% sure though. I will try it again in another application to make sure the segfault is happening in sway and not in Firefox.. I think so because in the logs from journalctl it says \"sway [PID]\" and I'm returning to my display manager (which is SDDM). I'm not 100% sure though. I will try it again in another application to make sure the segfault is happening in sway and not in Firefox.. Hmm, on second thoughts I think it's Firefox and not sway. I can't find a coredump for Sway but I can find multiple coredumps for Firefox so I think this issue can be closed. Sorry ;). Hmm, on second thoughts I think it's Firefox and not sway. I can't find a coredump for Sway but I can find multiple coredumps for Firefox so I think this issue can be closed. Sorry ;). @RyanDwyer Nothing more than makepkg -si on the cloned git repository from the AUR. I checked my makepkg.conf but it looks like I don't have any custom CFLAGS or something so I think that those are the defaults on Archlinux but I'm not sure... @RyanDwyer Nothing more than makepkg -si on the cloned git repository from the AUR. I checked my makepkg.conf but it looks like I don't have any custom CFLAGS or something so I think that those are the defaults on Archlinux but I'm not sure... I have the same problem but it doesn't happen when I start the vm in detached mode.. In my case the cursor is \"grabbed\" by Virtualbox. I can move it around but clicking on things other than the virtual-machine doesn't work. It can only be stopped by closing the virtual machine. . Done!. ",
    "goose121": "s/swaymsg/sway, but it worked! Thank you so much!. Also, you may want to add a similar clause for /usr/bin/i3-msg so that e.g. sway-dmenu-desktop works.\nEDIT: i3-input also needs a clause. ",
    "Gomme-": "Here is the debug log:\nsway.log\n. I am sorry I don't know what it is. How can I get that?. Yes it seems to happen just after starting sway with one window. \nBy the way, sorry for not providing a backtrace yet. I am quite busy now and still don't know how to get that. I might have time to read the archwiki carefully and provide you the backtrace next week.. Sadly, I still have the problem with 0.15.1.. ",
    "kasicka": "I have similar problem, sway usually crashes once per day or two. Initially it was crashing far more often, then I noticed FF57 consuming all the ram, disabling extensions helped a bit, but sway still crashes sometimes.\nsway version is 0.15, wlc is 0.0.11\nLog:\n```\nD: 11/15/17 09:30:20 - [ipc-server.c:249] Client 50 readable\nD: 11/15/17 09:30:20 - [ipc-server.c:983] Added IPC reply to client 50 queue: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 23, \"width\": 1920, \"height\": 1057 }, \"visible\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 1, \"output\": \"eDP-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 6, \"name\": \"2\", \"rect\": { \"x\": 0, \"y\": 23, \"width\": 1920, \"height\": 1057 }, \"visible\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 2, \"output\": \"eDP-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 55, \"name\": \"6\", \"rect\": { \"x\": 0, \"y\": 23, \"width\": 1920, \"height\": 1057 }, \"visible\": true, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 6, \"output\": \"eDP-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true }, { \"id\": 11, \"name\": \"7\", \"rect\": { \"x\": 0, \"y\": 23, \"width\": 1920, \"height\": 1057 }, \"visible\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 7, \"output\": \"eDP-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false }, { \"id\": 40, \"name\": \"8\", \"rect\": { \"x\": 0, \"y\": 23, \"width\": 1920, \"height\": 1057 }, \"visible\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 8, \"output\": \"eDP-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": false } ]\nD: 11/15/17 09:30:20 - [ipc-server.c:315] Client 50 writable\nI: 11/15/17 09:30:20 - [commands.c:425] Handling command 'scratchpad show'\nD: 11/15/17 09:30:20 - [commands.c:344] find_handler(scratchpad) 0\nI: 11/15/17 09:30:20 - [commands.c:469] Running on container '6'\nD: 11/15/17 09:30:20 - [layout.c:140] Adding 0x27f75d0 (4, 960.000000x792.750000) to 0x37a2ef0 (2, 1920.000000x1057.000000)\nD: 11/15/17 09:30:20 - [ipc-server.c:1080] Sending window::floating event\nE: 11/15/17 09:30:21 - [bar.c:275] failed to dispatch wl: 104\nE: 11/15/17 09:30:21 - [ipc-client.c:50] Unable to receive IPC response\nD: 11/15/17 09:30:21 - [main.c:52] [wlc] Parent exit (2025)\nD: 11/15/17 09:30:21 - [main.c:52] [wlc] Restoring vt 1 (0x4) (fd 0)\nGdk-Message: /usr/lib64/firefox/firefox: Fatal IO error 11 (Resource temporarily unavailable) on X server :0.\nPidgin: Fatal IO error 11 (Resource temporarily unavailable) on X server :0.\nGdk-Message: firefox: Fatal IO error 0 (Success) on X server :0.\n```. Missing  comma before \"kterou\". Missing  comma before \"kter\u00fd\". Although \"za\" makes sense to me, it sounds really strange. Maybe \"m\u016f\u017eete podpo\u0159it roz\u0161\u00ed\u0159en\u00ed konkr\u00e9tn\u00edch funkc\u00ed\"?. ",
    "icetan": "I have the same problem. When after starting sway and following the instructions I get a crash every time.\nI'm on Arch Linux\n$ uname -a\nLinux pix 4.13.8-6-ph #1 SMP Mon Oct 23 14:02:48 CEST 2017 x86_64 GNU/Linux\n$ pacman -Q sway wlc\nsway 0.15.0-1\nwlc 0.0.11-1. ",
    "nikosbatsaras": "I have a similar issue. Following the exact steps below, crashes sway everytime:\n1. Move a window to scratchpad\n2. Move another window to scratchpad\n3. Scratchpad show\n4. Floating toggle\n5. Scratchpad show\n6. Scratchpad show\nI am using sway version 0.15.0 on Arch.. ",
    "bzub": "I experience this, also on Arch.\n@Timidger @SirCmpwn When sway crashes it doesn't appear to generate a coredump, according to coredumpctl list. From time to time manipulating firefox windows seems to crash sway as well, and does generate a coredump. So I'm posting one of those with backtrace in case it's related to this issue.\nbacktrace.txt. I experience this, also on Arch.\n@Timidger @SirCmpwn When sway crashes it doesn't appear to generate a coredump, according to coredumpctl list. From time to time manipulating firefox windows seems to crash sway as well, and does generate a coredump. So I'm posting one of those with backtrace in case it's related to this issue.\nbacktrace.txt. This issue seems to have gone away since my last comment. I upgraded sway to 0.15.1, so @Gomme- @icetan you might want to try that version.. This issue seems to have gone away since my last comment. I upgraded sway to 0.15.1, so @Gomme- @icetan you might want to try that version.. ",
    "naibaf0": "I can confirm the same behaviour on Arch with 0.15.1-2.\nD: 03/22/18 13:28:20 - [ipc-server.c:1080] Sending window::floating event\nD: 03/22/18 13:28:20 - [debug_log.c:98] Arranging layout for 0x55983cfe6190 (WORKSPACE '1:\uf015')\nD: 03/22/18 13:28:20 - [layout.c:968] Arranging layout for 0x55983cfe6190 1:\uf015 1356.000000x736.000000+5.000000,27.000000\nD: 03/22/18 13:28:20 - [layout.c:1008] -> Found panel for this workspace: 1366x22, position: 0\nD: 03/22/18 13:28:20 - [layout.c:1030] Arranging workspace '1:\uf015' at 5.000000, 27.000000\nD: 03/22/18 13:28:20 - [layout.c:1148] Arranging 0x55983cfe6190 horizontally\nD: 03/22/18 13:28:20 - [layout.c:1115] Set floating view to 678 x 552 @ 339, 92\nfocus:R      |(0x55983c9248a0)(p:(nil)   )(f:0x55983cfe6070)(h:18446744073709551615)Type:root|layout:-    |w:2390|h: 768|x:   0|y:   0|g:  0|vis:t|children: 2|name:root\n|focus:X     |(0x55983cfe6070)(p:0x55983c9248a0)(f:0x55983cfe6190)(h: 1)Type:op  |layout:-    |w:1366|h: 768|x:   0|y:   0|g: -1|vis:t|children: 1|name:LVDS-1\n|-focus:W    |(0x55983cfe6190)(p:0x55983cfe6070)(f:0x55983d742f20)(h:18446744073709551615)Type:ws  |layout:Horiz|w:1356|h: 736|x:   5|y:  27|g: -1|vis:t|children: 0|name:1:\uf015\n|==focus:K   |(0x55983d742f20)(p:0x55983cfe6190)(f:(nil)   )(h: 7)Type:view|layout:-    |w: 678|h: 552|x: 339|y:  92|g: -1|vis:t|children: 0|name:user@host\n|focus:X     |(0x55983d5ab480)(p:0x55983c9248a0)(f:0x55983d5a78f0)(h: 2)Type:op  |layout:-    |w:1024|h: 768|x:1366|y:   0|g: -1|vis:t|children: 1|name:DP-2\n|-focus:X    |(0x55983d5a78f0)(p:0x55983d5ab480)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:1014|h: 736|x:   5|y:  27|g: -1|vis:t|children: 0|name:2:\uf086\nD: 03/22/18 13:28:20 - [debug_log.c:98] Setting focus to 0x55983d742f20:7 (VIEW 'user@host:~')\nD: 03/22/18 13:28:20 - [ipc-server.c:1080] Sending window::focus event\nD: 03/22/18 13:28:20 - [ipc-server.c:1126] Sending binding::run event\nD: 03/22/18 13:28:20 - [handlers.c:616] geometry request for 7 678x552 @ 339,92\nD: 03/22/18 13:28:20 - [container.c:423] Sane values for view to 678 x 552 @ 339, 92\nI: 03/22/18 13:28:21 - [commands.c:425] Handling command 'floating toggle'\nD: 03/22/18 13:28:21 - [commands.c:344] find_handler(floating) 0\nI: 03/22/18 13:28:21 - [commands.c:469] Running on container 'user@host:~'\nD: 03/22/18 13:28:21 - [debug_log.c:98] Setting focus to 0x55983cfe6070:1 (OUTPUT 'LVDS-1')\nI: 03/22/18 13:28:21 - [main.c:50] [wlc] compositor/view.c: 574 @ wlc_view_focus(): Tried to retrieve handle of wrong type (output != view)\nD: 03/22/18 13:28:21 - [ipc-server.c:1056] Sending workspace::focus event\nD: 03/22/18 13:28:21 - [ipc-server.c:983] Added IPC reply to client 54 queue: { \"change\": \"focus\", \"old\": null, \"current\": { \"id\": 2, \"name\": \"1:\uf015\", \"rect\": { \"x\": 5, \"y\": 27, \"width\": 1356, \"height\": 736 }, \"visible\": true, \"focused\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 1, \"output\": \"LVDS-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"floating_nodes\": [ ], \"nodes\": [ ], \"focus\": [ ] } }\nD: 03/22/18 13:28:21 - [floating.c:63] Non-floating focused container is 0x55983cfe6070\nE: 03/22/18 13:28:21 - [debug_log.c:88] swayc_log:swayc_log: no container ...\nE: Gdk-Message: Error reading events from display: Broken pipe\n03/22/18 13:28:21 - [ipc-client.c:50] Unable to receive IPC response\nD: 03/22/18 13:28:21 - [main.c:52] [wlc] Parent exit (26592)\nD: 03/22/18 13:28:21 - [main.c:52] [wlc] Restoring vt 2 (0x4) (fd 0)\nhere is what I get in the log of sway, no coredump/backtrace seems to happen for me either.\nHowever this only happened for me when running sway in parallel to a normal xsession with i3. If I started sway and nothing else the problem didn't occur.. It seems to work for me now in regards to clicking for example the workspace buttons with the top-most pixel row.\nHowever occasionally going to the most right pixel column in firefox (wayland) and scrolling still won't work for me.. ",
    "t-8ch": "@codethief\nI also had the problem of not being able to move containers to workspaces.\nThe configuration between i3 and sway differs here:\n```\ni3:\nbindsym $mod+Shift+1 move workspace 1\nsway\nbindsym $mod+Shift+1 move container to workspace 1\n. @codethief\nI also had the problem of not being able to move containers to workspaces.\nThe configuration between i3 and sway differs here:\ni3:\nbindsym $mod+Shift+1 move workspace 1\nsway\nbindsym $mod+Shift+1 move container to workspace 1\n```. Thanks @albocc , I am actually not sure why I wrote this comment, as my current config looks like the example one and works -.-. Thanks @albocc , I am actually not sure why I wrote this comment, as my current config looks like the example one and works -.-. ",
    "pauledd": "thank you, that works!. Slightly offtopic... If I start my old X-Window system instead of sway/wayland than xrandr shows me the different interlaced modes with a small \"i\" right after the resolution so that I can choose what to set...\nxrandr \nScreen 0: minimum 320 x 200, current 1920 x 1080, maximum 8192 x 8192\nHDMI-1 connected primary 1920x1080+0+0 (normal left inverted right x axis y axis) 531mm x 299mm\n   1920x1080     60.00 +  50.00*   59.94  \n   1920x1080i    60.00    50.00    59.94  \n   1680x1050     59.88  \n   1600x900      60.00  \n   1280x1024     75.02    60.02  \n   1280x800      59.91  \n   1152x864      75.00  \n   1280x720      60.00    50.00    59.94  \n   1024x768      75.03    60.00  \n   832x624       74.55  \n   800x600       75.00    60.32  \n   720x576       50.00  \n   720x576i      50.00  \n   720x480       60.00    59.94  \n   720x480i      60.00    59.94  \n   640x480       75.00    60.00    59.94  \n   720x400       70.08. I dont have to set anything special in X-Window mode... it defaults to 1920x1080 non-interlaced, but I then later do a \"xrandr -r 50\" to set my Monitor to 50Hz.\nBut yes... If I do a \"xrandr --output HDMI-1 --mode 1920x1080i\" it changes to interlaced.. but as I said, I need not-Interlaced ;)\nAnd I need 50Hz and thats the reason I changed the option line in sway config. If I dont specify it in the sway config and leave the default setting:\noutput * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill\nthen sway starts in 1080 non interlaced... but of cause not in my desired 50hz...\n. >     * A temporary fix would be to filter out interlaced modes\nTo be honest, I've never ever heard of anyone who needed interlaced output, but maybe there are still some cathode ray tube users out there who need this... \nBut then sway sould maybe  not default to interlaced when a mode is configured in the config file with \"Hz\" specified. If I set output to:\noutput HDMI-A-1 mode 1920x1080\nthen it does not do interlaced but as soon as I add \"*Hz\" to the resolution it uses the interlaced mode, no matter if 50 or 60Hz .... hm, so I pulled sway and wlroots master again and recompiled and installed but I still get a interlaced video signal if I have specified a \"Hz\" value in my config:\noutput HDMI-A-1 mode 1920x1080@50Hz\nswaymsg -t get_version\nsway version 1.0-beta.1-213-gcecf00b9 (Nov 22 2018, branch 'master')\nDid I miss something?. swaymsg -t get_outputs\nOutput HDMI-A-1 'Unknown BenQ GL2460 53E00568SL0'\n  Current mode: 1920x1080 @ 50.000000 Hz\n  Position: 0,0\n  Scale factor: 1.000000\n  Transform: normal\n  Workspace: 1\n  Available modes:\n    720x400 @ 70.082001 Hz\n    640x480 @ 59.939999 Hz\n    640x480 @ 60.000000 Hz\n    640x480 @ 75.000000 Hz\n    720x480 @ 59.939999 Hz\n    720x480 @ 60.001999 Hz\n    720x480 @ 59.939999 Hz\n    720x480 @ 60.000000 Hz\n    720x576 @ 50.000000 Hz\n    720x576 @ 50.000000 Hz\n    800x600 @ 60.317001 Hz\n    800x600 @ 75.000000 Hz\n    832x624 @ 74.551003 Hz\n    1024x768 @ 60.004002 Hz\n    1024x768 @ 75.028999 Hz\n    1280x720 @ 50.000000 Hz\n    1280x720 @ 59.939999 Hz\n    1280x720 @ 60.000000 Hz\n    1152x864 @ 75.000000 Hz\n    1280x800 @ 59.910000 Hz\n    1280x1024 @ 60.020000 Hz\n    1280x1024 @ 75.025002 Hz\n    1600x900 @ 60.000000 Hz\n    1680x1050 @ 59.882999 Hz\n    1920x1080 @ 50.000000 Hz\n    1920x1080 @ 50.000000 Hz\n    1920x1080 @ 59.939999 Hz\n    1920x1080 @ 60.000000 Hz\n    1920x1080 @ 59.939999 Hz\n    1920x1080 @ 60.000000 Hz\nThats how it looks like: https://www.youtube.com/watch?v=B77-_0YWYPk. ldd $(which sway)\n        linux-vdso.so.1 (0x00007ffca5785000)\n        libcairo.so.2 => /usr/lib64/libcairo.so.2 (0x00007f2728a49000)\n        libgdk_pixbuf-2.0.so.0 => /usr/lib64/libgdk_pixbuf-2.0.so.0 (0x00007f2728825000)\n        libgobject-2.0.so.0 => /usr/lib64/libgobject-2.0.so.0 (0x00007f27285d0000)\n        libglib-2.0.so.0 => /usr/lib64/libglib-2.0.so.0 (0x00007f27282bc000)\n        libjson-c.so.4 => /usr/lib64/libjson-c.so.4 (0x00007f27280ad000)\n        libinput.so.10 => /usr/lib64/libinput.so.10 (0x00007f2727e74000)\n        libm.so.6 => /lib64/libm.so.6 (0x00007f2727aeb000)\n        libpango-1.0.so.0 => /usr/lib64/libpango-1.0.so.0 (0x00007f27278a5000)\n        libpcre.so.1 => /lib64/libpcre.so.1 (0x00007f2727632000)\n        libpixman-1.so.0 => /usr/lib64/libpixman-1.so.0 (0x00007f2727393000)\n        libwayland-server.so.0 => /usr/lib64/libwayland-server.so.0 (0x00007f2727180000)\n        libwlroots.so.0 => /usr/lib64/libwlroots.so.0 (0x00007f2726ef4000)\n        libxkbcommon.so.0 => /usr/lib64/libxkbcommon.so.0 (0x00007f2726cb4000)\n        libxcb.so.1 => /usr/lib64/libxcb.so.1 (0x00007f2726a8a000)\n        libpangocairo-1.0.so.0 => /usr/lib64/libpangocairo-1.0.so.0 (0x00007f272687d000)\n        libc.so.6 => /lib64/libc.so.6 (0x00007f27264b5000)\n        libpthread.so.0 => /lib64/libpthread.so.0 (0x00007f2726295000)\n        libfontconfig.so.1 => /usr/lib64/libfontconfig.so.1 (0x00007f2726052000)\n        libfreetype.so.6 => /usr/lib64/libfreetype.so.6 (0x00007f2725d99000)\n        libEGL.so.1 => /usr/lib64/libEGL.so.1 (0x00007f2725b60000)\n        libdl.so.2 => /lib64/libdl.so.2 (0x00007f272595c000)\n        libpng16.so.16 => /usr/lib64/libpng16.so.16 (0x00007f2725729000)\n        libXrender.so.1 => /usr/lib64/libXrender.so.1 (0x00007f272551f000)\n        libX11.so.6 => /usr/lib64/libX11.so.6 (0x00007f27251e2000)\n        libXext.so.6 => /usr/lib64/libXext.so.6 (0x00007f2724fd0000)\n        libz.so.1 => /lib64/libz.so.1 (0x00007f2724db9000)\n        libGL.so.1 => /usr/lib64/libGL.so.1 (0x00007f2724b45000)\n        librt.so.1 => /lib64/librt.so.1 (0x00007f272493d000)\n        libgmodule-2.0.so.0 => /usr/lib64/libgmodule-2.0.so.0 (0x00007f2724739000)\n        libgio-2.0.so.0 => /usr/lib64/libgio-2.0.so.0 (0x00007f272439e000)\n        libffi.so.6 => /usr/lib64/libffi.so.6 (0x00007f2724196000)\n        /lib64/ld-linux-x86-64.so.2 (0x00007f2728fca000)\n        libmtdev.so.1 => /usr/lib64/libmtdev.so.1 (0x00007f2723f90000)\n        libudev.so.1 => /lib64/libudev.so.1 (0x00007f2723d6b000)\n        libevdev.so.2 => /usr/lib64/libevdev.so.2 (0x00007f2723b51000)\n        libgthread-2.0.so.0 => /usr/lib64/libgthread-2.0.so.0 (0x00007f272394f000)\n        libfribidi.so.0 => /usr/lib64/libfribidi.so.0 (0x00007f2723737000)\n        libcap.so.2 => /lib64/libcap.so.2 (0x00007f2723531000)\n        libwayland-client.so.0 => /usr/lib64/libwayland-client.so.0 (0x00007f2723322000)\n        libwayland-egl.so.1 => /usr/lib64/libwayland-egl.so.1 (0x00007f2723120000)\n        libGLESv2.so.2 => /usr/lib64/libGLESv2.so.2 (0x00007f2722f16000)\n        libdrm.so.2 => /usr/lib64/libdrm.so.2 (0x00007f2722d04000)\n        libgbm.so.1 => /usr/lib64/libgbm.so.1 (0x00007f2722af6000)\n        libxcb-composite.so.0 => /usr/lib64/libxcb-composite.so.0 (0x00007f27228f3000)\n        libxcb-render.so.0 => /usr/lib64/libxcb-render.so.0 (0x00007f27226e5000)\n        libxcb-xfixes.so.0 => /usr/lib64/libxcb-xfixes.so.0 (0x00007f27224dd000)\n        libXau.so.6 => /usr/lib64/libXau.so.6 (0x00007f27222d9000)\n        libXdmcp.so.6 => /usr/lib64/libXdmcp.so.6 (0x00007f27220d3000)\n        libpangoft2-1.0.so.0 => /usr/lib64/libpangoft2-1.0.so.0 (0x00007f2721ebf000)\n        libharfbuzz.so.0 => /usr/lib64/libharfbuzz.so.0 (0x00007f2721c03000)\n        libexpat.so.1 => /usr/lib64/libexpat.so.1 (0x00007f27219d9000)\n        libuuid.so.1 => /lib64/libuuid.so.1 (0x00007f27217d2000)\n        libbz2.so.1 => /lib64/libbz2.so.1 (0x00007f27215c1000)\n        libglapi.so.0 => /usr/lib64/libglapi.so.0 (0x00007f272138f000)\nlibX11-xcb.so.1 => /usr/lib64/libX11-xcb.so.1 (0x00007f272118d000)\n        libxcb-dri2.so.0 => /usr/lib64/libxcb-dri2.so.0 (0x00007f2720f88000)\n        libxcb-dri3.so.0 => /usr/lib64/libxcb-dri3.so.0 (0x00007f2720d84000)\n        libxcb-present.so.0 => /usr/lib64/libxcb-present.so.0 (0x00007f2720b81000)\n        libxcb-sync.so.1 => /usr/lib64/libxcb-sync.so.1 (0x00007f272097a000)\n        libxshmfence.so.1 => /usr/lib64/libxshmfence.so.1 (0x00007f2720778000)\n        libxcb-glx.so.0 => /usr/lib64/libxcb-glx.so.0 (0x00007f272055c000)\n        libXfixes.so.3 => /usr/lib64/libXfixes.so.3 (0x00007f2720356000)\n        libXdamage.so.1 => /usr/lib64/libXdamage.so.1 (0x00007f2720153000)\n        libresolv.so.2 => /lib64/libresolv.so.2 (0x00007f271ff3c000)\n        libmount.so.1 => /lib64/libmount.so.1 (0x00007f271fce3000)\n        libbsd.so.0 => /usr/lib64/libbsd.so.0 (0x00007f271facc000)\n        libgraphite2.so.3 => /usr/lib64/libgraphite2.so.3 (0x00007f271f8a0000)\n        libblkid.so.1 => /lib64/libblkid.so.1 (0x00007f271f650000)\nsway --version\nsway version 1.0-beta.1-213-gcecf00b9 (Nov 22 2018, branch 'master')\nI update sway via gentoo package manager which \"should\" pull from git master...\nI first updated wlroot and then sway.  The sway executable seems to be indeed updated according to its date..\nTo be sure gentoo package manager isnt faulty I then created an gentoo independent build directory and manually cloned wlroots and sway and installed it again into /usr/local and started sway via:\nexec ck-launch-session dbus-launch --sh-syntax --exit-with-session /usr/local/bin/sway\nResult... same interlaced output. I have one more idea, I will try to completly remove sway and its dependencies from gentoo and do a reinstall, maybe that helps. No, it does not help... I am out of ideas, I still get only interlaced output if specifying \"Hz\" in the config.\nI will maybe try a VM and install sway in there from git.... Works now. Thanks :)\nswaymsg -t get_outputs\nOutput HDMI-A-1 'Unknown BenQ GL2460 53E00568SL0'\n  Current mode: 1920x1080 @ 50.000000 Hz\n  Position: 0,0\n  Scale factor: 1.000000\n  Transform: normal\n  Workspace: 1\n  Available modes:\n    720x400 @ 70.082001 Hz\n    640x480 @ 59.939999 Hz\n    640x480 @ 60.000000 Hz\n    640x480 @ 75.000000 Hz\n    720x480 @ 59.939999 Hz\n    720x480 @ 60.000000 Hz\n    720x576 @ 50.000000 Hz\n    800x600 @ 60.317001 Hz\n    800x600 @ 75.000000 Hz\n    832x624 @ 74.551003 Hz\n    1024x768 @ 60.004002 Hz\n    1024x768 @ 75.028999 Hz\n    1280x720 @ 50.000000 Hz\n    1280x720 @ 59.939999 Hz\n    1280x720 @ 60.000000 Hz\n    1152x864 @ 75.000000 Hz\n    1280x800 @ 59.910000 Hz\n    1280x1024 @ 60.020000 Hz\n    1280x1024 @ 75.025002 Hz\n    1600x900 @ 60.000000 Hz\n    1680x1050 @ 59.882999 Hz\n    1920x1080 @ 50.000000 Hz\n    1920x1080 @ 59.939999 Hz\n    1920x1080 @ 60.000000 Hz. sure\nsway.log\nconfig.txt\n. sorry for the delay, I currently struggle with installing sway on gentoo again so I cant test it until this is solved. Thanks anyway.. ",
    "maletor": "Thanks for the quick response. I understand you are working on this longer term with wlroots. Appreciate it.. @torpak but what about Chromium's internal force-device-scale-factor flag? That would work with XWayland correctly?. ",
    "torpak": "@maletor i think you misunderstood: Scaling will ever only work correctly with wayland applications. Chromium still uses X and there for Xwayland unter sway and will not scale correctly until it switches to wayland.. @maletor I have no idea, since i don't use chromium. But as i understand it that would be the same for all environments using xwayland for legacy applications. So maybe you should ask chromiums developers?. Would that imply no headless option?. @progandy a single user headless variant would be fine for my use case (using manually started vncserver with i3 at the moment).\n. ",
    "jypma": "FWIW, I dug up the part weston implements (cms-helper.c), which ends up calling drmModeCrtcSetGamma. That seems to be the key, since ChromeOS's color management apparently relies on it as well. I couldn't find anything further on drmModeCrtcSetGamma, but it seems to be the entry point to the individual xf86 drivers implementing gamma.\nIt's only gamma curves for R, G and B; I don't know enough about ICC whether that's enough.. ",
    "HeroicKatora": "I'm having quite a bit of a headache on how to correctly support color profiles as an application and WM user. Regarding 2., if I understand correctly, you intend all applications to query the display color space independently from the window manager, then render to some color space it has found. My problem with that approach is this, especially in a multi-display setup:\n\nAn application may end up spread over different monitors as its final positioning is performed by the window manager. An application rendering with mixed color profiles at the same time is unrealistically difficult.\nIf the color profile information is specific not only to rendering system but also to the actual compositor/window, it is very counter intuitive that rendering as sRGB would yield different colors even on calibrated systems. In case I cannot supports particular WMs simply because I don't know them/there is no budget for such specialization, and I choose to render to the least common denominator sRGB, what reason is there for the WM to assume that I did not render as sRGB when it may know for a fact that the program did not adjust for a particular output.\nAs a pure user, not a developer, it should be possible to correctly display an application that has been coded with no particular support for color profiles. Similar to above, it is unreasonable to expect devs to support any fringe WM. Hence, shouldn't the enduser always have the possibility of making sRGB applications show up correctly? Without affecting other applications that are aware of the output, in particular without configuring global gamma tables or ICCs which should only change when the display hardware or output lightning conditions change?\n\nWithout particular pretense on object truth, it is my understand that 1. implies the window manager converting application output to the display color space during compositing, 2. would be possible by asking the particular WM to interpret application framebuffer as a particular color space, and 3. requires it be possible for the user to override that interpretation for example through a window directive in the .config file such as for_window. If those are feasible is another question, for example if kernel drm doesn't support it performant enough, I do not know.\nIt may be that I have misunderstood the current state of color support available or planned.. ",
    "wilecoyote2015": "I found an interesting thread regarding the practical implications and demand of color management in wayland:\nhttps://discuss.pixls.us/t/wayland-color-management/10804. I'm also experiencing the issue with sway. However, it is not present with other desktop environments like Gnome and KDE.\nweston-info yields the wl_output parameters:\ninterface: 'wl_output', version: 3, name: 22\n    x: 1280, y: 0, scale: 1,\n    physical_width: 309 mm, physical_height: 173 mm,\n    make: 'Panasonic Industry Company', model: '0x96A2',\n    subpixel_orientation: unknown, output_transform: normal,\n    mode:\n        width: 2560 px, height: 1440 px, refresh: 48.000 Hz,\n        flags:\n    mode:\n        width: 2560 px, height: 1440 px, refresh: 59.999 Hz,\n        flags: current\n. interface: 'wl_output', version: 3, name: 26\n        x: 0, y: 0, scale: 1,\n        physical_width: 310 mm, physical_height: 170 mm,\n        make: 'VVX14T058J10', model: 'eDP-1-unknown',\n        subpixel_orientation: unknown, output_transform: normal,\n        mode:\n                width: 2560 px, height: 1440 px, refresh: 48.000 Hz,\n                flags:\n        mode:\n                width: 2560 px, height: 1440 px, refresh: 59.999 Hz,\n                flags: current preferre\nThe different x and y values are because I've vonfigured my display for a multihead setup in sway. (The config is:\nhttps://gist.github.com/wilecoyote2015/fd19bceda96c23305564bec0afd558e6 ). I've tried now and with QT_WAYLAND_FORCE_DPI=96, QT applications scale as intended with 1x. . However, menus are misaligned with QT_WAYLAND_FORCE_DPI=96 set.\nFor example, open Konsole and try to open the File drop-down menu. It is shifted by a half screen width to the right on my QHD screen.. @johanhelsing\n1. It is QT 5.11.2\n2. weston-info reports the correct dimensions\n3. Yes, I'm using a Multi-Monitor setup, but the problem also occurs with a single monitor\n4. I cannot post the output now, but will do it later.\n5. Yes.\nAs said,  QT_WAYLAND_FORCE_DPI=96 fixes the issue, but leads to some menus (e.g. all menus from the menubar in krusader) are dispaced, so that it isn't usable really. Does anyone experience this, too?. ",
    "yw662": "cannot reproduce with termite&&fish. cannot reproduce with termite&&fish. update : version 0.15.1 wont solve this issue.. update : version 0.15.1 wont solve this issue.. Seems that we are having the same issue. #3265 . Seems that we are having the same issue. #3265 . Thanks, but there is only one card called card0, which is the i915 card, since I blacklisted nouveau as well.\nAnd I set WLR_DRM_DEVICES=card0, it still stack.. Thanks, but there is only one card called card0, which is the i915 card, since I blacklisted nouveau as well.\nAnd I set WLR_DRM_DEVICES=card0, it still stack.. Thanks RyanDwyer, I tried the master version,\nSince I do not use logind,\nIt now gives out\nFailed to get session id: No data available\nDo not have CAP_SYS_ADMIN, cannot become DRM master\nFailed to load session backend\nFailed to start a DRM session\nUnable to create backend\nAfter I give sway CAP_SYS_ADMIN, it stacks.. Thanks RyanDwyer, I tried the master version,\nSince I do not use logind,\nIt now gives out\nFailed to get session id: No data available\nDo not have CAP_SYS_ADMIN, cannot become DRM master\nFailed to load session backend\nFailed to start a DRM session\nUnable to create backend\nAfter I give sway CAP_SYS_ADMIN, it stacks.. These errors only occur when there is neither setuid nor CAP_SYS_ADMIN. But it still stack with no output. I guess this is related to libglvnd since I still have nvidia-dkms installed. Or it is related to i915, maybe.\nIt is arch but I simply masked logind. Whatever it is not related to dbus and logind. It is precompiled binary, so there is logind support.. These errors only occur when there is neither setuid nor CAP_SYS_ADMIN. But it still stack with no output. I guess this is related to libglvnd since I still have nvidia-dkms installed. Or it is related to i915, maybe.\nIt is arch but I simply masked logind. Whatever it is not related to dbus and logind. It is precompiled binary, so there is logind support.. @manio\nLets say you get stacked with no output after give it setuid, right?\nIf so, I am not sure whether it is related or not, if not, it is not related.\nAnd the reason why you get these errors again is that, your disk lost sync the moment sway stacked, so you need to set setuid bit again.\nEven a REISUB cannot bring them back, so I am pretty sure it is related to graphical drivers.. @manio\nLets say you get stacked with no output after give it setuid, right?\nIf so, I am not sure whether it is related or not, if not, it is not related.\nAnd the reason why you get these errors again is that, your disk lost sync the moment sway stacked, so you need to set setuid bit again.\nEven a REISUB cannot bring them back, so I am pretty sure it is related to graphical drivers.. ",
    "cedrichaase": "Push.\nI might have failed to convey this, but this is a blatant security issue. If anybody can unlock my screen by typing in random stuff for a while, it makes swaylock rather pointless.\nAs indicated by the stack trace, the error seems to occur during the process of rendering the \"typing indicator\". I've toyed around with the code a little, but seeing as I have very limited experience with C and no experience with pixman/cairo, the best I could come up with was disabling rendering of said indicator altogether. This stops the error from occuring, but yeah, disabling a feature is not the same as fixing it :)\nSo, can anybody reproduce this?. I had to keep hammering away at my keyboard a little longer this time, but swaylock still crashes for me at c08c805 (latest commit in 0.15 at the time of writing). I added the stack trace for this version to the gist mentioned in the original post. It does look slightly different than before, although the error still seems to occur in cairo_paint.. Yeah, sounds like the same issue all right. Sorry, guess I overlooked that.\nIndeed, I'm using a 13\" MacBook Pro Retina (scaled) with an additional 1080p (non-scaled) display configured in .config/sway/config:\noutput eDP-1    scale 2     pos 320 1080\noutput DP-1     scale 1     pos 0   0\noutput DP-2     scale 1     pos 0   0\nThough, while testing, the external (non-scaled) monitor was not connected.\nEdit:\nJust tried commenting out the non-scaled displays from the config and tried again, both with 0.15 from the Arch repo as well as the latest 0.15 branch, the issue still occurs. :slightly_frowning_face: . Yeah, I thought I might have to do that. Unfortunately, I have no idea how. Can you explain or point me to some documentation?. ",
    "AGausmann": "Unfortunately, I don't have enough knowledge of the code structure to track down where this is, and attempting to use git bisect reveals that my current version of wlc is not backwards-compatible... If someone else could help me find the offending lines, I would greatly appreciate it! \nMy guess is that either sway_container.visible is not checked in these circumstances, or it is not updated properly when the container goes out of focus inside of a stacked/tabbed container.. I've spent some time studying the code and I think I found the place causing part of this issue. In the functionswayc_border_check(*c, *origin) (passed into container_find() by handle_pointer_button() where mouse clicks are used to update focus), there is no check to make sure c->visible == True. \nUPDATE: I just looked at the code where focus changes based on mouse motion (which does work in the given scenario). It is handled by the following series of calls: handle_mouse_motion() -> pointer_position_set() -> container_under_pointer(). The last function there is actually what determines which container will receive focus, where it handles stacked and tabbed containers as special cases. It does not use the visible field at all, nor does it need to. It just unwraps the tab that is currently selected inside the container and continues execution. \nNow I'm not sure whether visible is the correct field to use, however, I don't see any reason why it shouldn't be used in this case. Setting it for containers within tabs and stacks may actually solve additional issues that have not been found.. Working on the patch now. Notes in the meantime:\n\n\nI was mistaken, visible was already set correctly in the case of tabs by update_visibility(). Simply adding a check in swayc_border_check() resolves that issue.\n\n\nAdditional details on the other erroneus behavior that I had found: Tabbed containers with a container as a child will handle their entire tab bar as the tab of the focused window, whether it be a view or a container. Clicking anywhere on the tab bar only attempts to focus the currently focused child. Additionally, when focusing the child container, the container is focused and all children are updated to match (blue title bar). The parent container's tab color does not update to match its focused state. I suspect these issues have to do with the title bar's geometry set by update_geometry(). Turns out the issue is far more complicated than a single line patch. Tabs which are out of focus have their visible flag set to false, meaning that clicking their title bars/tabs does not work. Title bar visibility is not the same as full container visibility. This may be fixed by checking the parent container's visibility instead.. Okay, I'm submitting what I have right now; however, containers are far more broken than I've outlined here. The title bars are honestly completely screwed up, and I don't even know where to start with those. . Rebasing, give me a second.. \n\n",
    "rafaelleru": "okey, I will improve it tonigh \ud83d\ude04 . Yes what I mean is that it will be cool if in the config file you can specify that 4 fingers swipe left is for go to the next workspace, or 3 fingers swipe up to move the focused cointainer to a superior container.. Since libinput is the default input manager in wayland and it supports multitouch gestures I think that will be cool to define some gestures in the config file, for example 4 fingers swipe to change the workspace or 3 fingers up to reveal the scratchpad windows. It is only a idea and I can think if it is even possible.. ",
    "Moret84": "So sorry,\nI use Sway on Archlinux (a fresh install) and the version is 0.15.0.\nThe debug log is here: \nhttps://gist.github.com/Moret84/1b23f52dbd3537f284bc0f76bdfe43b4. /usr/bin/j4-dmenu-desktop\nYeah  just read #521 . Sorry. You can close.\nThanks.\n. ",
    "tsloughter": "Ah, yup! I hadn't pinned it down to the hover and forgot the name of \"tooltips\" so missed that. Thanks.. I just noticed that they also will display when I'm on another workspace and put my mouse cursor in a place that were I on the workspace with firefox a tooltip would show.. It is a 1.0 issue. And the issue you mention with not being able to switch workspaces is fixed in 1.0.\nBut it also seems this issue is now fixed. I realized I hadn't noticed it in a bit so just tried again and wasn't able to produce it anymore.. ",
    "jelly": "Just noticed this is a duplicate of https://github.com/swaywm/sway/pull/1439/files. ",
    "Ethergeist": "Sorry for my delay in reply - holidays and whatnot\nSway Version: \n0.15-rc1-48-g7c3b0ff\nConfig file:\n````\ngaps inner 50\ngaps outer 50\nfor_window [class=\"^.*\"] border pixel 0\nnew_window pixel 0\nVariables\n\nLogo key. Use Mod1 for Alt.\nset $mod Mod1\nHome row direction keys, like vim\nset $left h\nset $down j\nset $up k\nset $right l\nYour preferred terminal emulator\nset $term gnome-terminal\nYour preferred application launcher\nset $menu dmenu_run\nPreferred browser\nset $browser google-chrome-beta\nget random wallpaper\nset $wallpaper exec 'swaypickwall'\nOutput configuration\n\nDefault wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)\noutput * bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill \n\nExample configuration:\n\noutput HDMI-A-1 resolution 1920x1080 position 1920,0\n\nYou can get the names of your outputs by running: swaymsg -t get_outputs\nInput configuration\n\nExample configuration:\n\ninput \"2:14:SynPS/2_Synaptics_TouchPad\" {\ndwt enabled\ntap enabled\nnatural_scroll enabled\nmiddle_emulation enabled\n}\n\nYou can get the names of your inputs by running: swaymsg -t get_inputs\nRead man 5 sway-input for more information about this section.\nKey bindings\n\nBasics:\n\n# start a terminal\nbindsym $mod+Return exec $term\n\n# kill focused window\nbindsym $mod+Shift+q kill\n\n#start browser\nbindsym $mod+Shift+b exec $browser\n# start your launcher\nbindsym $mod+d exec $menu\n#wallpaper\nbindsym $mod+z output * bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill \nbindsym $mod+Shift+z output * bg $wallpaper fill\n\n\n\n\n# Drag floating windows by holding down $mod and left mouse button.\n# Resize them with right mouse button + $mod.\n# Despite the name, also works for non-floating windows.\n# Change normal to inverse to use left mouse button for resizing and right\n# mouse button for dragging.\nfloating_modifier $mod normal\n\n# reload the configuration file\nbindsym $mod+Shift+c reload\n\n# exit sway (logs you out of your wayland session)\nbindsym $mod+Shift+e exit\n\n\nMoving around:\n\n# Move your focus around\nbindsym $mod+$left focus left\nbindsym $mod+$down focus down\nbindsym $mod+$up focus up\nbindsym $mod+$right focus right\n# or use $mod+[up|down|left|right]\nbindsym $mod+Left focus left\nbindsym $mod+Down focus down\nbindsym $mod+Up focus up\nbindsym $mod+Right focus right\n\n# _move_ the focused window with the same, but add Shift\nbindsym $mod+Shift+$left move left\nbindsym $mod+Shift+$down move down\nbindsym $mod+Shift+$up move up\nbindsym $mod+Shift+$right move right\n# ditto, with arrow keys\nbindsym $mod+Shift+Left move left\nbindsym $mod+Shift+Down move down\nbindsym $mod+Shift+Up move up\nbindsym $mod+Shift+Right move right\n\n\nWorkspaces:\n\n# switch to workspace\nbindsym $mod+1 workspace 1\nbindsym $mod+2 workspace 2\nbindsym $mod+3 workspace 3\nbindsym $mod+4 workspace 4\nbindsym $mod+5 workspace 5\nbindsym $mod+6 workspace 6\nbindsym $mod+7 workspace 7\nbindsym $mod+8 workspace 8\nbindsym $mod+9 workspace 9\nbindsym $mod+0 workspace 10\n# move focused container to workspace\nbindsym $mod+Shift+1 move container to workspace 1\nbindsym $mod+Shift+2 move container to workspace 2\nbindsym $mod+Shift+3 move container to workspace 3\nbindsym $mod+Shift+4 move container to workspace 4\nbindsym $mod+Shift+5 move container to workspace 5\nbindsym $mod+Shift+6 move container to workspace 6\nbindsym $mod+Shift+7 move container to workspace 7\nbindsym $mod+Shift+8 move container to workspace 8\nbindsym $mod+Shift+9 move container to workspace 9\nbindsym $mod+Shift+0 move container to workspace 10\n# Note: workspaces can have any name you want, not just numbers.\n# We just use 1-10 as the default.\n\n\nLayout stuff:\n\n# You can \"split\" the current object of your focus with\n# $mod+b or $mod+v, for horizontal and vertical splits\n# respectively.\nbindsym $mod+b splith\nbindsym $mod+v splitv\n\n# Switch the current container between different layout styles\nbindsym $mod+s layout stacking\nbindsym $mod+w layout tabbed\nbindsym $mod+e layout toggle split\n\n# Make the current focus fullscreen\nbindsym $mod+f fullscreen\n\n# Toggle the current focus between tiling and floating mode\nbindsym $mod+Shift+space floating toggle\n\n# Swap focus between the tiling area and the floating area\nbindsym $mod+space focus mode_toggle\n\n# move focus to the parent container\nbindsym $mod+a focus parent\n\n\nScratchpad:\n\n# Sway has a \"scratchpad\", which is a bag of holding for windows.\n# You can send windows there and get them back later.\n\n# Move the currently focused window to the scratchpad\nbindsym $mod+Shift+minus move scratchpad\n\n# Show the next scratchpad window or hide the focused scratchpad window.\n# If there are multiple scratchpad windows, this command cycles through them.\nbindsym $mod+minus scratchpad show\n\n\nResizing containers:\n\nmode \"resize\" {\n    # left will shrink the containers width\n    # right will grow the containers width\n    # up will shrink the containers height\n    # down will grow the containers height\n    bindsym $left resize shrink width 10 px or 10 ppt\n    bindsym $down resize grow height 10 px or 10 ppt\n    bindsym $up resize shrink height 10 px or 10 ppt\n    bindsym $right resize grow width 10 px or 10 ppt\n# ditto, with arrow keys\nbindsym Left resize shrink width 10 px or 10 ppt\nbindsym Down resize grow height 10 px or 10 ppt\nbindsym Up resize shrink height 10 px or 10 ppt\nbindsym Right resize grow width 10 px or 10 ppt\n\n# return to default mode\nbindsym Return mode \"default\"\nbindsym Escape mode \"default\"\n\n}\nbindsym $mod+r mode \"resize\"\n\nStatus Bar:\n\nRead man 5 sway-bar for more information about this section.\nbar {\n    position bottom\n    colors {\n        statusline #ffffff\n        background #00000090\n    }\n}\ninclude /etc/sway/config.d/*\n`````\nSwaymsg Command I used:\n'swaymsg output * bg ' + wallpaper + ' fill' \nThis is being executed via nodejs - wallpaper is a random file from my Pictures folder - to take the script out of the command I manually have executed this from the shell:\nswaymsg output * bg /home/steve/Pictures/153515_archlinux-wallpapers-38868_1920x1200_h.jpg\nThe above results in no error, just a return to the command prompt (as expected)\nDebug log to follow - I am using GDM, so I need to do some configuration to launch sway in debug mode.\n. lol. I figured it out from the debug log - Swaymsg needed quotes around the command - Adding the quotes results in a background change as expected. I am including the debug log anyway since it still does not return an error if the command is not in quotes. (Not sure if this is expected or aberrant behavior)\n`````\nI: 01/01/18 22:43:53 - [main.c:250] Linux Ultima 4.14.9-1-ARCH #1 SMP PREEMPT Tue Dec 26 00:18:37 UTC 2017 x86_64 GNU/Linux\nI: 01/01/18 22:43:53 - [main.c:222] Contents of /etc/os-release:\nI: 01/01/18 22:43:53 - [main.c:229] NAME=\"Arch Linux\"\nI: 01/01/18 22:43:53 - [main.c:229] PRETTY_NAME=\"Arch Linux\"\nI: 01/01/18 22:43:53 - [main.c:229] ID=arch\nI: 01/01/18 22:43:53 - [main.c:229] ID_LIKE=archlinux\nI: 01/01/18 22:43:53 - [main.c:229] ANSI_COLOR=\"0;36\"\nI: 01/01/18 22:43:53 - [main.c:229] HOME_URL=\"https://www.archlinux.org/\"\nI: 01/01/18 22:43:53 - [main.c:229] SUPPORT_URL=\"https://bbs.archlinux.org/\"\nI: 01/01/18 22:43:53 - [main.c:229] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\nI: 01/01/18 22:43:53 - [main.c:207] PATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nI: 01/01/18 22:43:53 - [main.c:207] LD_LOAD_PATH=(null)\nI: 01/01/18 22:43:53 - [main.c:207] LD_PRELOAD_PATH=(null)\nI: 01/01/18 22:43:53 - [main.c:207] LD_LIBRARY_PATH=(null)\nI: 01/01/18 22:43:53 - [main.c:207] SWAY_CURSOR_THEME=(null)\nI: 01/01/18 22:43:53 - [main.c:207] SWAY_CURSOR_SIZE=(null)\nI: 01/01/18 22:43:53 - [main.c:207] SWAYSOCK=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_DRM_DEVICE=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_SHM=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_OUTPUTS=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_XWAYLAND=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_LIBINPUT=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_REPEAT_DELAY=(null)\nI: 01/01/18 22:43:53 - [main.c:207] WLC_REPEAT_RATE=(null)\nI: 01/01/18 22:43:53 - [main.c:207] XKB_DEFAULT_RULES=(null)\nI: 01/01/18 22:43:53 - [main.c:207] XKB_DEFAULT_MODEL=(null)\nI: 01/01/18 22:43:53 - [main.c:207] XKB_DEFAULT_LAYOUT=(null)\nI: 01/01/18 22:43:53 - [main.c:207] XKB_DEFAULT_VARIANT=(null)\nI: 01/01/18 22:43:53 - [main.c:207] XKB_DEFAULT_OPTIONS=(null)\n\u001b[1;31mWarning: Proprietary nvidia driver support is considered experimental. Nouveau is strongly recommended.\u001b[0m\n\u001b[1;31mWarning: You must load nvidia-drm with the modeset option on to use the proprietary driver. Consider adding nvidia-drm.modeset=1 to your kernel command line parameters.\u001b[0m\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] logind: session control granted\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] Running on vt 1 (fd 0)\nI: 01/01/18 22:43:53 - [main.c:50] [wlc] Failed to open X11 display\nI: 01/01/18 22:43:53 - [main.c:466] Starting sway version 0.15-rc1-48-g7c3b0ff (2017-12-23, branch \"master\")\nD: 01/01/18 22:43:53 - [config.c:450] Set XDG_CONFIG_HOME to /home/steve/.config\nI: 01/01/18 22:43:53 - [config.c:475] Loading config from /etc/sway/security.d/00-defaults\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit * fullscreen keyboard mouse'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target ''\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to * for features 112\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit /usr/bin/swaylock lock'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaylock'\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to /usr/bin/swaylock for features 113\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit /usr/bin/swaybg background'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaybg'\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to /usr/bin/swaybg for features 116\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit /usr/bin/swaygrab screenshot'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaygrab'\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to /usr/bin/swaygrab for features 120\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit /usr/bin/swaybar panel'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaybar'\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to /usr/bin/swaybar for features 114\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'ipc /usr/bin/swaymsg {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(ipc) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaymsg'\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command ' enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler() 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC * feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'events {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(events) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command ' disabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler() 0\nD: 01/01/18 22:43:53 - [ipc.c:158] Disabled IPC * event\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:822] End of IPC events block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:817] End of IPC block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'ipc /usr/bin/swaybar {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(ipc) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaybar'\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bar-config enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bar-config) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC bar-config feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'outputs enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(outputs) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC outputs feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'workspaces enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(workspaces) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC workspaces feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'command enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(command) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC command feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'events {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(events) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'workspace enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(workspace) 0\nD: 01/01/18 22:43:53 - [ipc.c:155] Enabled IPC workspace event\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'mode enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(mode) 0\nD: 01/01/18 22:43:53 - [ipc.c:155] Enabled IPC mode event\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:822] End of IPC events block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:817] End of IPC block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'ipc /usr/bin/swaygrab {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(ipc) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaygrab'\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'outputs enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(outputs) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC outputs feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'tree enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(tree) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC tree feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:817] End of IPC block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'ipc /usr/bin/swaylock {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(ipc) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/usr/bin/swaylock'\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'outputs enabled'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(outputs) 0\nD: 01/01/18 22:43:53 - [ipc.c:106] Enabled IPC outputs feature\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:817] End of IPC block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'commands {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(commands) 0\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler() 0\nI: 01/01/18 22:43:53 - [commands.c:623] Set command policy for * to -1\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(fullscreen) 0\nI: 01/01/18 22:43:53 - [commands.c:623] Set command policy for fullscreen to 10\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nI: 01/01/18 22:43:53 - [commands.c:623] Set command policy for bindsym to 1\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(exit) 0\nI: 01/01/18 22:43:53 - [commands.c:623] Set command policy for exit to 2\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(kill) 0\nI: 01/01/18 22:43:53 - [commands.c:623] Set command policy for kill to 2\nD: 01/01/18 22:43:53 - [config.c:812] End of commands block\nI: 01/01/18 22:43:53 - [config.c:475] Loading config from /etc/sway/security.d/10-bgpermissions\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'permit /home/steve/bin/swayrwp output'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(permit) 0\nD: 01/01/18 22:43:53 - [security.c:14] Validating IPC target '/home/steve/bin/swayrwp'\nI: 01/01/18 22:43:53 - [security.c:33] IPC target '/home/steve/bin/swayrwp' MUST be owned by root (waived for debug build)\nD: 01/01/18 22:43:53 - [permit.c:71] Permissions granted to /home/steve/bin/swayrwp for features 112\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'commands{'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(commands{) 0\nE: 01/01/18 22:43:53 - [config.c:721] Error on line 3 'commands{': Unknown/invalid command (/home/steve/.config/sway/config)\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '/home/steve/bin/swayrwp all'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(/home/steve/bin/swayrwp) 0\nE: 01/01/18 22:43:53 - [config.c:721] Error on line 4 '/home/steve/bin/swayrwp all': Unknown/invalid command (/home/steve/.config/sway/config)\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nE: 01/01/18 22:43:53 - [config.c:827] Unmatched }\nE: 01/01/18 22:43:53 - [config.c:498] Error(s) loading config!\nI: 01/01/18 22:43:53 - [config.c:475] Loading config from /home/steve/.config/sway/config\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'font pango:Oswald Light 12'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(font) 0\nD: 01/01/18 22:43:53 - [font.c:25] Settings font Oswald Light 12\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'gaps inner 50'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(gaps) 0\nD: 01/01/18 22:43:53 - [debug_log.c:98] Arranging layout for 0x55a25ae728a0 (ROOT 'root')\nD: 01/01/18 22:43:53 - [layout.c:968] Arranging layout for 0x55a25ae728a0 root 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x55a25ae728a0)(p:(nil)   )(f:(nil)   )(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:root\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'gaps outer 50'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(gaps) 0\nD: 01/01/18 22:43:53 - [debug_log.c:98] Arranging layout for 0x55a25ae728a0 (ROOT 'root')\nD: 01/01/18 22:43:53 - [layout.c:968] Arranging layout for 0x55a25ae728a0 root 0.000000x0.000000+0.000000,0.000000\nfocus:F      |(0x55a25ae728a0)(p:(nil)   )(f:(nil)   )(h:18446744073709551615)Type:root|layout:-    |w:   0|h:   0|x:   0|y:   0|g:  0|vis:t|children: 0|name:root\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'for_window [class=\"^.\"] border pixel 0'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(for_window) 0\nD: 01/01/18 22:43:53 - [criteria.c:104] Parsing criteria: '[class=\"^.\"]'\nD: 01/01/18 22:43:53 - [criteria.c:256] class -> /^./\nD: 01/01/18 22:43:53 - [for_window.c:37] for_window: '[class=\"^.\"]' -> 'border pixel 0' added\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'new_window pixel 0'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(new_window) 0\nI: 01/01/18 22:43:53 - [new_window.c:6] new_window is deprecated and will be removed in the future. Please use default_border instead.\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $mod Mod1'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $left h'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $down j'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $up k'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $right l'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $term gnome-terminal'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $menu dmenu_run'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $browser google-chrome-beta'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'set $wallpaper exec 'swaypickwall''\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(set) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'output * bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(output) 0\nD: 01/01/18 22:43:53 - [output.c:194] Config stored for output * (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill)\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Return exec $term'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Return to command exec gnome-terminal\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+q kill'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+q to command kill\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+b exec $browser'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+b to command exec google-chrome-beta\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+d exec $menu'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+d to command exec dmenu_run\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+z output * bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+z to command output * bg /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg fill\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+z output * bg $wallpaper fill'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+z to command output * bg exec 'swaypickwall' fill\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'floating_modifier $mod normal'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(floating_modifier) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+c reload'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+c to command reload\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+e exit'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+e to command exit\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+$left focus left'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+h to command focus left\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+$down focus down'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+j to command focus down\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+$up focus up'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+k to command focus up\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+$right focus right'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+l to command focus right\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Left focus left'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Left to command focus left\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Down focus down'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Down to command focus down\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Up focus up'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Up to command focus up\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Right focus right'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Right to command focus right\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+$left move left'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+h to command move left\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+$down move down'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+j to command move down\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+$up move up'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+k to command move up\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+$right move right'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+l to command move right\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+Left move left'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+Left to command move left\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+Down move down'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+Down to command move down\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+Up move up'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+Up to command move up\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+Right move right'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+Right to command move right\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+1 workspace 1'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+1 to command workspace 1\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+2 workspace 2'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+2 to command workspace 2\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+3 workspace 3'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+3 to command workspace 3\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+4 workspace 4'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+4 to command workspace 4\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+5 workspace 5'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+5 to command workspace 5\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+6 workspace 6'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+6 to command workspace 6\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+7 workspace 7'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+7 to command workspace 7\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+8 workspace 8'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+8 to command workspace 8\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+9 workspace 9'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+9 to command workspace 9\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+0 workspace 10'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+0 to command workspace 10\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+1 move container to workspace 1'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+1 to command move container to workspace 1\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+2 move container to workspace 2'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+2 to command move container to workspace 2\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+3 move container to workspace 3'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+3 to command move container to workspace 3\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+4 move container to workspace 4'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+4 to command move container to workspace 4\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+5 move container to workspace 5'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+5 to command move container to workspace 5\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+6 move container to workspace 6'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+6 to command move container to workspace 6\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+7 move container to workspace 7'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+7 to command move container to workspace 7\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+8 move container to workspace 8'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+8 to command move container to workspace 8\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+9 move container to workspace 9'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+9 to command move container to workspace 9\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+0 move container to workspace 10'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+0 to command move container to workspace 10\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+b splith'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+b to command splith\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+v splitv'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+v to command splitv\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+s layout stacking'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+s to command layout stacking\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+w layout tabbed'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+w to command layout tabbed\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+e layout toggle split'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+e to command layout toggle split\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+f fullscreen'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+f to command fullscreen\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+space floating toggle'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+space to command floating toggle\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+space focus mode_toggle'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+space to command focus mode_toggle\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+a focus parent'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+a to command focus parent\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+Shift+minus move scratchpad'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Shift+minus to command move scratchpad\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+minus scratchpad show'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+minus to command scratchpad show\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'mode \"resize\" {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(mode) 0\nD: 01/01/18 22:43:53 - [mode.c:48] Switching to mode `resize'\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $left resize shrink width 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound h to command resize shrink width 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $down resize grow height 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound j to command resize grow height 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $up resize shrink height 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound k to command resize shrink height 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $right resize grow width 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound l to command resize grow width 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Left resize shrink width 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Left to command resize shrink width 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Down resize grow height 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Down to command resize grow height 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Up resize shrink height 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Up to command resize shrink height 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Right resize grow width 10 px or 10 ppt'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Right to command resize grow width 10 px or 10 ppt\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Return mode \"default\"'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Return to command mode \"default\"\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Escape mode \"default\"'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Escape to command mode \"default\"\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:789] End of mode block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym $mod+r mode \"resize\"'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+r to command mode \"resize\"\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bar {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bar) 0\nD: 01/01/18 22:43:53 - [bar.c:57] Configuring bar bar-0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'position bottom'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(position) 0\nD: 01/01/18 22:43:53 - [position.c:31] Setting bar position 'bottom' for bar: bar-0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'colors {'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(colors) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'statusline #ffffff'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(statusline) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'background #00000090'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(background) 0\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:807] End of bar colors block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command '}'\nD: 01/01/18 22:43:53 - [config.c:801] End of bar block\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'include /etc/sway/config.d/*'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(include) 0\nI: 01/01/18 22:43:53 - [config.c:475] Loading config from /etc/sway/config.d/swaygrab-helper\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Print exec swaygrab-helper'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Print to command exec swaygrab-helper\nI: 01/01/18 22:43:53 - [commands.c:519] handling config command 'bindsym Mod1+Print exec swaygrab-helper --focused'\nD: 01/01/18 22:43:53 - [commands.c:344] find_handler(bindsym) 0\nD: 01/01/18 22:43:53 - [bind.c:94] bindsym - Bound Mod1+Print to command exec swaygrab-helper --focused\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] libinput: resume\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] Activating tty\nI: 01/01/18 22:43:53 - [main.c:50] [wlc] Connector 0 is not connected or has no modes\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 4096x2160@30000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 4096x2160@24000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 3840x2160@30000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 3840x2160@30000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 3840x2160@24000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@120000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@120000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1920x1080@24000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1280x720@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 1280x720@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 720x480@60000 \nD: 01/01/18 22:43:53 - [main.c:52] [wlc] MODE: (1) 640x480@60000 \nI: 01/01/18 22:43:53 - [main.c:50] [wlc] Connector 2 is not connected or has no modes\nI: 01/01/18 22:43:53 - [main.c:50] [wlc] Connector 3 is not connected or has no modes\nI: 01/01/18 22:43:53 - [main.c:50] [wlc] Connector 4 is not connected or has no modes\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] HDMI-A-1 Chose mode (0) 4096x2160\nD: 01/01/18 22:43:53 - [handlers.c:221] Output 1 resolution changed to 4096 x 2160\nD: 01/01/18 22:43:53 - [container.c:138] New output 1:HDMI-A-1\nD: 01/01/18 22:43:53 - [container.c:149] Matched wildcard output config for HDMI-A-1\nD: 01/01/18 22:43:53 - [config.c:1178] Setting background for output 0 to /home/steve/Pictures/138242-gorgerous-4k-abstract-wallpaper-3840x2160-picture.jpg\nD: 01/01/18 22:43:53 - [layout.c:63] Adding 0x55a25bb5aaa0 (1, 4096.000000x2160.000000) to 0x55a25ae728a0 (0, 0.000000x0.000000)\nD: 01/01/18 22:43:53 - [config.c:1060] Invoking swaybar for bar id 'bar-0'\nD: 01/01/18 22:43:53 - [workspace.c:46] Workspace: Generating new workspace name for output HDMI-A-1\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '10'\nD: 01/01/18 22:43:53 - [workspace.c:108] Workspace: Found free name 10\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '1'\nD: 01/01/18 22:43:53 - [workspace.c:108] Workspace: Found free name 1\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '2'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '3'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '4'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '5'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '6'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '7'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '8'\nD: 01/01/18 22:43:53 - [workspace.c:68] Got valid workspace command for target: '9'\nD: 01/01/18 22:43:53 - [container.c:204] Creating default workspace 1\nD: 01/01/18 22:43:53 - [container.c:221] Added workspace 1 for output 1\nD: 01/01/18 22:43:53 - [layout.c:63] Adding 0x55a25bb5aca0 (2, 4096.000000x2160.000000) to 0x55a25bb5aaa0 (1, 4096.000000x2160.000000)\nD: 01/01/18 22:43:53 - [debug_log.c:98] Setting focus to 0x55a25bb5aca0:18446744073709551615 (WORKSPACE '1')\nD: 01/01/18 22:43:53 - [ipc-server.c:1056] Sending workspace::focus event\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL context is double buffered\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL version: 1.4\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL vendor: NVIDIA\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL client APIs: OpenGL_ES OpenGL\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL context (RGB888)\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] EGL_EXT_create_context_robustness EGL_EXT_output_base EGL_EXT_output_drm EGL_EXT_stream_consumer_egloutput EGL_EXT_stream_acquire_mode EGL_IMG_context_priority EGL_KHR_config_attribs EGL_KHR_create_context_no_error EGL_KHR_create_context EGL_KHR_display_reference EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_swap_buffers_with_damage EGL_KHR_gl_colorspace EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_3D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_reusable_sync EGL_KHR_stream EGL_KHR_stream_consumer_gltexture EGL_KHR_stream_cross_process_fd EGL_KHR_stream_fifo EGL_KHR_stream_producer_eglsurface EGL_KHR_surfaceless_context EGL_NV_nvrm_fence_sync EGL_NV_stream_metadata EGL_NV_stream_reset EGL_NV_stream_sync EGL_NV_stream_consumer_gltexture_yuv EGL_NV_stream_attrib EGL_NV_sync EGL_NV_system_time EGL_NV_output_drm_flip_event EGL_WL_bind_wayland_display EGL_WL_wayland_eglstream\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] GL version: OpenGL ES 3.2 NVIDIA 387.34\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] GL vendor: NVIDIA Corporation\nD: 01/01/18 22:43:53 - [main.c:52] [wlc] GL_EXT_base_instance GL_EXT_blend_func_extended GL_EXT_blend_minmax GL_EXT_buffer_storage GL_EXT_clear_texture GL_EXT_clip_cull_distance GL_EXT_color_buffer_float GL_EXT_color_buffer_half_float GL_EXT_conservative_depth GL_EXT_copy_image GL_EXT_debug_label GL_EXT_discard_framebuffer GL_EXT_disjoint_timer_query GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_float_blend GL_EXT_frag_depth GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_gpu_shader5 GL_EXT_map_buffer_range GL_EXT_multi_draw_indirect GL_EXT_multisample_compatibility GL_EXT_occlusion_query_boolean GL_EXT_polygon_offset_clamp GL_EXT_post_depth_coverage GL_EXT_primitive_bounding_box GL_EXT_raster_multisample GL_EXT_render_snorm GL_EXT_robustness GL_EXT_separate_shader_objects GL_EXT_shader_group_vote GL_EXT_shader_implicit_conversions GL_EXT_shader_integer_mix GL_EXT_shader_io_blocks GL_EXT_shader_non_constant_global_initializers GL_EXT_shader_texture_lod GL_EXT_shadow_samplers GL_EXT_sparse_texture GL_EXT_sparse_texture2 GL_EXT_sRGB GL_EXT_sRGB_write_control GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_compression_bptc GL_EXT_texture_compression_dxt1 GL_EXT_texture_compression_rgtc GL_EXT_texture_compression_s3tc GL_EXT_texture_cube_map_array GL_EXT_texture_filter_anisotropic GL_EXT_texture_filter_minmax GL_EXT_texture_format_BGRA8888 GL_EXT_texture_norm16 GL_EXT_texture_rg GL_EXT_texture_sRGB_R8 GL_EXT_texture_sRGB_decode GL_EXT_texture_storage GL_EXT_texture_view GL_EXT_draw_transform_feedback GL_EXT_unpack_subimage GL_EXT_window_rectangles GL_KHR_context_flush_control GL_KHR_debug GL_EXT_memory_object GL_EXT_memory_object_fd GL_KHR_parallel_shader_compile GL_KHR_no_error GL_KHR_robust_buffer_access_behavior GL_KHR_robustness GL_EXT_semaphore GL_EXT_semaphore_fd GL_NV_bgr GL_NV_bindless_texture GL_NV_blend_equation_advanced GL_NV_blend_equation_advanced_coherent GL_NV_blend_minmax_factor GL_NV_conditional_render GL_NV_conservative_raster GL_NV_copy_buffer GL_NV_copy_image GL_NV_draw_buffers GL_NV_draw_instanced GL_NV_draw_texture GL_NV_draw_vulkan_image GL_NV_EGL_stream_consumer_external GL_NV_explicit_attrib_location GL_NV_fbo_color_attachments GL_NV_fill_rectangle GL_NV_fragment_coverage_to_color GL_NV_fragment_shader_interlock GL_NV_framebuffer_blit GL_NV_framebuffer_mixed_samples GL_NV_framebuffer_multisample GL_NV_generate_mipmap_sRGB GL_NV_geometry_shader_passthrough GL_NV_instanced_arrays GL_NV_internalformat_sample_query GL_NV_gpu_shader5 GL_NV_image_formats GL_NV_occlusion_query_samples GL_NV_non_square_matrices GL_NV_pack_subimage GL_NV_packed_float GL_NV_packed_float_linear GL_NV_path_rendering GL_NV_path_rendering_shared_edge GL_NV_pixel_buffer_object GL_NV_polygon_mode GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_NV_sample_locations GL_NV_sample_mask_override_coverage GL_NV_shader_atomic_fp16_vector GL_NV_shader_noperspective_interpolation GL_NV_shadow_samplers_array GL_NV_shadow_samplers_cube GL_NV_sRGB_formats GL_NV_texture_array GL_NV_texture_barrier GL_NV_texture_border_clamp GL_NV_texture_compression_latc GL_NV_texture_compression_s3tc GL_NV_texture_compression_s3tc_update GL_NV_timer_query GL_NV_viewport_array GL_NV_viewport_array2 GL_NV_viewport_swizzle GL_KHR_blend_equation_advanced GL_KHR_blend_equation_advanced_coherent GL_OES_compressed_ETC1_RGB8_texture GL_EXT_compressed_ETC1_RGB8_sub_texture GL_OES_depth24 GL_OES_depth32 GL_OES_depth_texture GL_OES_depth_texture_cube_map GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_texture_border_clamp GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_buffer GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_gpu_shader5 GL_OES_shader_io_blocks GL_OES_texture_view GL_OES_primitive_bounding_box GL_OES_EGL_image GL_OES_EGL_image_external GL_OES_EGL_image_external_essl3 GL_OES_EGL_sync GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_get_program_binary GL_OES_mapbuffer GL_OES_packed_depth_stencil GL_OES_rgb8_rgba8 GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_image_atomic GL_OES_shader_multisample_interpolation GL_OES_standard_derivatives GL_OES_surfaceless_context GL_OES_texture_cube_map_array GL_OES_texture_npot GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_OES_vertex_array_object GL_OES_vertex_half_float GL_OES_viewport_array GL_ANDROID_extension_pack_es31a \nD: 01/01/18 22:43:54 - [main.c:52] [wlc] GLES2 renderer initialized\nD: 01/01/18 22:43:54 - [main.c:52] [wlc] Set new bsurface to output (1)\nD: 01/01/18 22:43:54 - [main.c:52] [wlc] Added output (1)\nD: 01/01/18 22:43:54 - [main.c:52] [wlc] become active\nD: 01/01/18 22:43:54 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:43:54 - [ipc-server.c:225] New client: fd 69, pid 1351\nD: 01/01/18 22:43:54 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:43:54 - [ipc-server.c:225] New client: fd 71, pid 1351\nD: 01/01/18 22:43:54 - [ipc-server.c:249] Client 69 readable\nD: 01/01/18 22:43:54 - [ipc-server.c:983] Added IPC reply to client 69 queue: { \"id\": \"bar-0\", \"tray_output\": null, \"icon_theme\": null, \"tray_padding\": 2, \"activate_button\": 272, \"context_button\": 273, \"secondary_button\": 274, \"mode\": \"dock\", \"hidden_state\": \"hide\", \"modifier\": \"Mod4\", \"position\": \"bottom\", \"status_command\": \"while :; do date +'%Y-%m-%d %l:%M:%S %p'; sleep 1; done\", \"font\": \"Oswald Light 12\", \"bar_height\": -1, \"wrap_scroll\": false, \"workspace_buttons\": true, \"strip_workspace_numbers\": false, \"binding_mode_indicator\": true, \"verbose\": false, \"pango_markup\": false, \"colors\": { \"background\": \"#00000090\", \"statusline\": \"#ffffffff\", \"separator\": \"#666666ff\", \"focused_background\": \"#00000090\", \"focused_statusline\": \"#ffffffff\", \"focused_separator\": \"#666666ff\", \"focused_workspace_border\": \"#4c7899ff\", \"focused_workspace_bg\": \"#285577ff\", \"focused_workspace_text\": \"#ffffffff\", \"inactive_workspace_border\": \"#333333ff\", \"inactive_workspace_bg\": \"#222222ff\", \"inactive_workspace_text\": \"#888888ff\", \"active_workspace_border\": \"#333333ff\", \"active_workspace_bg\": \"#5f676aff\", \"active_workspace_text\": \"#ffffffff\", \"urgent_workspace_border\": \"#2f343aff\", \"urgent_workspace_bg\": \"#900000ff\", \"urgent_workspace_text\": \"#ffffffff\", \"binding_mode_border\": \"#2f343aff\", \"binding_mode_bg\": \"#900000ff\", \"binding_mode_text\": \"#ffffffff\" } }\nD: 01/01/18 22:43:54 - [ipc-server.c:315] Client 69 writable\nI: 01/01/18 22:43:54 - [main.c:69] Using output 0 of 1\nD: 01/01/18 22:43:54 - [ipc-server.c:249] Client 69 readable\nD: 01/01/18 22:43:54 - [ipc-server.c:983] Added IPC reply to client 69 queue: [ { \"id\": 1, \"name\": \"HDMI-A-1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 4096, \"height\": 2160 }, \"visible\": false, \"focused\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": 1, \"urgent\": false, \"current_border_width\": 0, \"active\": true, \"primary\": false, \"layout\": \"output\", \"type\": \"output\", \"current_workspace\": \"1\", \"scale\": 1 } ]\nD: 01/01/18 22:43:54 - [ipc-server.c:315] Client 69 writable\nD: 01/01/18 22:43:54 - [ipc-server.c:249] Client 71 readable\nD: 01/01/18 22:43:54 - [ipc-server.c:983] Added IPC reply to client 71 queue: {\"success\": true}\nD: 01/01/18 22:43:54 - [ipc-server.c:315] Client 71 writable\nD: 01/01/18 22:43:54 - [ipc-server.c:249] Client 69 readable\nD: 01/01/18 22:43:54 - [ipc-server.c:983] Added IPC reply to client 69 queue: [ { \"id\": 2, \"name\": \"1\", \"rect\": { \"x\": 0, \"y\": 0, \"width\": 4096, \"height\": 2160 }, \"visible\": false, \"border\": \"none\", \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"deco_rect\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"geometry\": { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 }, \"percent\": null, \"window\": -1, \"urgent\": false, \"current_border_width\": 0, \"num\": 1, \"output\": \"HDMI-A-1\", \"type\": \"workspace\", \"layout\": \"splith\", \"focused\": true } ]\nD: 01/01/18 22:43:54 - [ipc-server.c:315] Client 69 writable\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Power_Button\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:1:Power_Button)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Power_Button\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:1:Power_Button)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Sleep_Button\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:3:Sleep_Button)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_NVidia_HDMI/DP,pcm=3\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_NVidia_HDMI/DP,pcm=3)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_NVidia_HDMI/DP,pcm=7\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_NVidia_HDMI/DP,pcm=7)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_NVidia_HDMI/DP,pcm=8\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_NVidia_HDMI/DP,pcm=8)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_NVidia_HDMI/DP,pcm=9\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_NVidia_HDMI/DP,pcm=9)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name SIGMACHIP_USB_Keyboard\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (7247:38:SIGMACHIP_USB_Keybo)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name SIGMACHIP_USB_Keyboard\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (7247:38:SIGMACHIP_USB_Keybo)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Valve_Software_Steam_Controller\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (10462:4418:Valve_Software_Steam_Cont)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Logitech_Anywhere_MX\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (1133:4119:Logitech_Anywhe)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Logitech_M215\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (1133:4128:Logitech)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Logitech_M215\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (1133:4128:Logitech)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Logitech_K360\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (1133:16388:Logitec)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Line_Out_Surround\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Line_Out_Surround)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Line_Out_CLFE\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Line_Out_CLFE)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Front_Headphone\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Front_Headphone)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Front_Mic\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Front_Mic)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Rear_Mic\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Rear_Mic)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Line\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Line)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name HDA_Intel_PCH_Line_Out_Front\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:HDA_Intel_PCH_Line_Out_Front)\nD: 01/01/18 22:43:54 - [input.c:53] rewritten name Eee_PC_WMI_hotkeys\nI: 01/01/18 22:43:54 - [handlers.c:133] Found input device (0:0:Eee_PC_WMI_hotkeys)\nD: 01/01/18 22:43:55 - [extensions.c:127] Setting surface 0x55a25bcaf210 as panel for output 1 (wl_resource: 0x55a25bcae430)\nD: 01/01/18 22:43:55 - [extensions.c:27] Creating panel config for resource 0x55a25bcae430\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25ae728a0 (ROOT 'root')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25ae728a0 root 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [layout.c:975] Arranging output 'HDMI-A-1' at 0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aaa0 (OUTPUT 'HDMI-A-1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aaa0 HDMI-A-1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aca0 (WORKSPACE '1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aca0 1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [layout.c:1008] -> Found panel for this workspace: 0x0, position: 0\nD: 01/01/18 22:43:55 - [layout.c:1030] Arranging workspace '1' at 75.000000, 75.000000\nD: 01/01/18 22:43:55 - [layout.c:1148] Arranging 0x55a25bb5aca0 horizontally\nfocus:R      |(0x55a25ae728a0)(p:(nil)   )(f:0x55a25bb5aaa0)(h:18446744073709551615)Type:root|layout:-    |w:4096|h:2160|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55a25bb5aaa0)(p:0x55a25ae728a0)(f:0x55a25bb5aca0)(h: 1)Type:op  |layout:-    |w:4096|h:2160|x:   0|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:K    |(0x55a25bb5aca0)(p:0x55a25bb5aaa0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:3946|h:2010|x:  75|y:  75|g: -1|vis:t|children: 0|name:1\nD: 01/01/18 22:43:55 - [extensions.c:23] Found existing panel config for resource 0x55a25bcae430\nD: 01/01/18 22:43:55 - [extensions.c:162] Panel position for wl_resource 0x55a25bcae430 changed 0 => 1\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25ae728a0 (ROOT 'root')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25ae728a0 root 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [layout.c:975] Arranging output 'HDMI-A-1' at 0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aaa0 (OUTPUT 'HDMI-A-1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aaa0 HDMI-A-1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aca0 (WORKSPACE '1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aca0 1 3946.000000x2010.000000+75.000000,75.000000\nD: 01/01/18 22:43:55 - [layout.c:1008] -> Found panel for this workspace: 0x0, position: 1\nD: 01/01/18 22:43:55 - [layout.c:1030] Arranging workspace '1' at 75.000000, 75.000000\nD: 01/01/18 22:43:55 - [layout.c:1148] Arranging 0x55a25bb5aca0 horizontally\nfocus:R      |(0x55a25ae728a0)(p:(nil)   )(f:0x55a25bb5aaa0)(h:18446744073709551615)Type:root|layout:-    |w:4096|h:2160|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55a25bb5aaa0)(p:0x55a25ae728a0)(f:0x55a25bb5aca0)(h: 1)Type:op  |layout:-    |w:4096|h:2160|x:   0|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:K    |(0x55a25bb5aca0)(p:0x55a25bb5aaa0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:3946|h:2010|x:  75|y:  75|g: -1|vis:t|children: 0|name:1\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25ae728a0 (ROOT 'root')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25ae728a0 root 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [layout.c:975] Arranging output 'HDMI-A-1' at 0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aaa0 (OUTPUT 'HDMI-A-1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aaa0 HDMI-A-1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aca0 (WORKSPACE '1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aca0 1 3946.000000x2010.000000+75.000000,75.000000\nD: 01/01/18 22:43:55 - [layout.c:1008] -> Found panel for this workspace: 4096x31, position: 1\nD: 01/01/18 22:43:55 - [layout.c:1030] Arranging workspace '1' at 75.000000, 75.000000\nD: 01/01/18 22:43:55 - [layout.c:1148] Arranging 0x55a25bb5aca0 horizontally\nfocus:R      |(0x55a25ae728a0)(p:(nil)   )(f:0x55a25bb5aaa0)(h:18446744073709551615)Type:root|layout:-    |w:4096|h:2160|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55a25bb5aaa0)(p:0x55a25ae728a0)(f:0x55a25bb5aca0)(h: 1)Type:op  |layout:-    |w:4096|h:2160|x:   0|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:K    |(0x55a25bb5aca0)(p:0x55a25bb5aaa0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:3946|h:1979|x:  75|y:  75|g: -1|vis:t|children: 0|name:1\nD: 01/01/18 22:43:55 - [extensions.c:99] Setting surface 0x55a25bc98610 as background for output 1\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aaa0 (OUTPUT 'HDMI-A-1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aaa0 HDMI-A-1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:43:55 - [debug_log.c:98] Arranging layout for 0x55a25bb5aca0 (WORKSPACE '1')\nD: 01/01/18 22:43:55 - [layout.c:968] Arranging layout for 0x55a25bb5aca0 1 3946.000000x1979.000000+75.000000,75.000000\nD: 01/01/18 22:43:55 - [layout.c:1008] -> Found panel for this workspace: 4096x31, position: 1\nD: 01/01/18 22:43:55 - [layout.c:1030] Arranging workspace '1' at 75.000000, 75.000000\nD: 01/01/18 22:43:55 - [layout.c:1148] Arranging 0x55a25bb5aca0 horizontally\nfocus:R      |(0x55a25ae728a0)(p:(nil)   )(f:0x55a25bb5aaa0)(h:18446744073709551615)Type:root|layout:-    |w:4096|h:2160|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55a25bb5aaa0)(p:0x55a25ae728a0)(f:0x55a25bb5aca0)(h: 1)Type:op  |layout:-    |w:4096|h:2160|x:   0|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:K    |(0x55a25bb5aca0)(p:0x55a25bb5aaa0)(f:(nil)   )(h:18446744073709551615)Type:ws  |layout:Horiz|w:3946|h:1979|x:  75|y:  75|g: -1|vis:t|children: 0|name:1\nD: 01/01/18 22:43:56 - [main.c:52] [wlc] Xwayland started (DISPLAY :0)\nD: 01/01/18 22:43:56 - [main.c:52] [wlc] xfixes (5.0)\nD: 01/01/18 22:43:56 - [handlers.c:1108] Compositor is ready, executing cmds in queue\nI: 01/01/18 22:44:05 - [commands.c:425] Handling command 'exec gnome-terminal'\nD: 01/01/18 22:44:05 - [commands.c:344] find_handler(exec) 0\nI: 01/01/18 22:44:05 - [commands.c:469] Running on container '1'\nD: 01/01/18 22:44:05 - [exec_always.c:34] Executing gnome-terminal\nD: 01/01/18 22:44:05 - [exec_always.c:75] Child process created with pid 1390 for workspace 1\nD: 01/01/18 22:44:05 - [ipc-server.c:1126] Sending binding::run event\nWarning: DESKTOP_STARTUP_ID not set and no fallback available.\nD: 01/01/18 22:44:07 - [workspace.c:330] looking for workspace for pid 1404\nD: 01/01/18 22:44:07 - [handlers.c:422] handle:4 type:0 state:0 parent:0 mask:0 (x:0 y:0 w:974 h:626) title:Terminal class:(null) appid:gnome-terminal-server\nD: 01/01/18 22:44:07 - [container.c:299] Adding new view 4:Terminal to container 0x55a25bb5aca0 2\nD: 01/01/18 22:44:07 - [layout.c:63] Adding 0x55a25bcc7920 (4, 0.000000x0.000000) to 0x55a25bb5aca0 (2, 3946.000000x1979.000000)\nD: 01/01/18 22:44:07 - [ipc-server.c:1080] Sending window::new event\nD: 01/01/18 22:44:07 - [debug_log.c:98] Setting focus to 0x55a25bcc7920:4 (VIEW 'Terminal')\nD: 01/01/18 22:44:07 - [ipc-server.c:1080] Sending window::focus event\nD: 01/01/18 22:44:07 - [debug_log.c:98] Arranging layout for 0x55a25bb5aaa0 (OUTPUT 'HDMI-A-1')\nD: 01/01/18 22:44:07 - [layout.c:968] Arranging layout for 0x55a25bb5aaa0 HDMI-A-1 4096.000000x2160.000000+0.000000,0.000000\nD: 01/01/18 22:44:07 - [debug_log.c:98] Arranging layout for 0x55a25bb5aca0 (WORKSPACE '1')\nD: 01/01/18 22:44:07 - [layout.c:968] Arranging layout for 0x55a25bb5aca0 1 3946.000000x1979.000000+75.000000,75.000000\nD: 01/01/18 22:44:07 - [layout.c:1008] -> Found panel for this workspace: 4096x31, position: 1\nD: 01/01/18 22:44:07 - [layout.c:1030] Arranging workspace '1' at 75.000000, 75.000000\nD: 01/01/18 22:44:07 - [layout.c:1148] Arranging 0x55a25bb5aca0 horizontally\nD: 01/01/18 22:44:07 - [layout.c:1154] Calculating arrangement for 0x55a25bcc7920:4 (will scale 3946.000000 by 1.000000)\nD: 01/01/18 22:44:07 - [layout.c:968] Arranging layout for 0x55a25bcc7920 Terminal 3946.000000x0.000000+75.000000,75.000000\nD: 01/01/18 22:44:07 - [layout.c:1040] Set view to 3946 x 1979 @ 75, 75\nfocus:R      |(0x55a25ae728a0)(p:(nil)   )(f:0x55a25bb5aaa0)(h:18446744073709551615)Type:root|layout:-    |w:4096|h:2160|x:   0|y:   0|g:  0|vis:t|children: 1|name:root\n|focus:X     |(0x55a25bb5aaa0)(p:0x55a25ae728a0)(f:0x55a25bb5aca0)(h: 1)Type:op  |layout:-    |w:4096|h:2160|x:   0|y:   0|g: -1|vis:t|children: 1|name:HDMI-A-1\n|-focus:W    |(0x55a25bb5aca0)(p:0x55a25bb5aaa0)(f:0x55a25bcc7920)(h:18446744073709551615)Type:ws  |layout:Horiz|w:3946|h:1979|x:  75|y:  75|g: -1|vis:t|children: 1|name:1\n|--focus:K   |(0x55a25bcc7920)(p:0x55a25bb5aca0)(f:(nil)   )(h: 4)Type:view|layout:-    |w:3946|h:1979|x:  75|y:  75|g: -1|vis:t|children: 0|name:Terminal\nD: 01/01/18 22:44:07 - [handlers.c:616] geometry request for 4 974x626 @ 100,100\nD: 01/01/18 22:44:07 - [handlers.c:616] geometry request for 4 3896x1929 @ 100,100\nD: 01/01/18 22:44:10 - [ipc-server.c:1080] Sending window::title event\nD: 01/01/18 22:44:52 - [ipc-server.c:1080] Sending window::title event\nD: 01/01/18 22:44:52 - [ipc-server.c:1080] Sending window::title event\nD: 01/01/18 22:45:00 - [ipc-server.c:1080] Sending window::title event\nD: 01/01/18 22:45:03 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:45:03 - [ipc-server.c:225] New client: fd 76, pid 1981\nD: 01/01/18 22:45:03 - [ipc-server.c:249] Client 76 readable\nI: 01/01/18 22:45:03 - [commands.c:425] Handling command 'output 2017-12-18-085554_4800x2160_scrot.png 2017-12-18-085644_4800x2160_scrot.png bin Desktop Development Documents Downloads etc fonts.scale Libs mirrorlist.new Music New Unity Project oldsys Pictures PlayOnLinux's virtual drives Public Software sway.log Templates test.txt tmp Videos xorg.conf xsessions-backup bg arch-futurism.png fill'\nD: 01/01/18 22:45:03 - [commands.c:344] find_handler(output) 0\nI: 01/01/18 22:45:03 - [commands.c:469] Running on container 'swayrwp ~/Pictures/ 3000'\nD: 01/01/18 22:45:03 - [output.c:194] Config stored for output 2017-12-18-085554_4800x2160_scrot.png (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg (null) (null))\nD: 01/01/18 22:45:03 - [ipc-server.c:983] Added IPC reply to client 76 queue: [ { \"success\": true } ]\nD: 01/01/18 22:45:03 - [ipc-server.c:315] Client 76 writable\nD: 01/01/18 22:45:03 - [ipc-server.c:244] Client 76 hung up\nI: 01/01/18 22:45:03 - [ipc-server.c:347] IPC Client 76 disconnected\nD: 01/01/18 22:45:06 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:45:06 - [ipc-server.c:225] New client: fd 76, pid 1989\nD: 01/01/18 22:45:06 - [ipc-server.c:249] Client 76 readable\nI: 01/01/18 22:45:06 - [commands.c:425] Handling command 'output 2017-12-18-085554_4800x2160_scrot.png 2017-12-18-085644_4800x2160_scrot.png bin Desktop Development Documents Downloads etc fonts.scale Libs mirrorlist.new Music New Unity Project oldsys Pictures PlayOnLinux's virtual drives Public Software sway.log Templates test.txt tmp Videos xorg.conf xsessions-backup bg WPL5LAW9.jpg fill'\nD: 01/01/18 22:45:06 - [commands.c:344] find_handler(output) 0\nI: 01/01/18 22:45:06 - [commands.c:469] Running on container 'swayrwp ~/Pictures/ 3000'\nD: 01/01/18 22:45:06 - [output.c:194] Config stored for output 2017-12-18-085554_4800x2160_scrot.png (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg (null) (null))\nD: 01/01/18 22:45:06 - [ipc-server.c:983] Added IPC reply to client 76 queue: [ { \"success\": true } ]\nD: 01/01/18 22:45:06 - [ipc-server.c:315] Client 76 writable\nD: 01/01/18 22:45:06 - [ipc-server.c:244] Client 76 hung up\nI: 01/01/18 22:45:06 - [ipc-server.c:347] IPC Client 76 disconnected\nD: 01/01/18 22:45:09 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:45:09 - [ipc-server.c:225] New client: fd 76, pid 1997\nD: 01/01/18 22:45:09 - [ipc-server.c:249] Client 76 readable\nI: 01/01/18 22:45:09 - [commands.c:425] Handling command 'output 2017-12-18-085554_4800x2160_scrot.png 2017-12-18-085644_4800x2160_scrot.png bin Desktop Development Documents Downloads etc fonts.scale Libs mirrorlist.new Music New Unity Project oldsys Pictures PlayOnLinux's virtual drives Public Software sway.log Templates test.txt tmp Videos xorg.conf xsessions-backup bg abstract_black_background_smoke_76311_3840x2400.jpg fill'\nD: 01/01/18 22:45:09 - [commands.c:344] find_handler(output) 0\nI: 01/01/18 22:45:09 - [commands.c:469] Running on container 'swayrwp ~/Pictures/ 3000'\nD: 01/01/18 22:45:09 - [output.c:194] Config stored for output 2017-12-18-085554_4800x2160_scrot.png (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg (null) (null))\nD: 01/01/18 22:45:09 - [ipc-server.c:983] Added IPC reply to client 76 queue: [ { \"success\": true } ]\nD: 01/01/18 22:45:09 - [ipc-server.c:315] Client 76 writable\nD: 01/01/18 22:45:09 - [ipc-server.c:244] Client 76 hung up\nI: 01/01/18 22:45:09 - [ipc-server.c:347] IPC Client 76 disconnected\nD: 01/01/18 22:45:12 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:45:12 - [ipc-server.c:225] New client: fd 76, pid 2005\nD: 01/01/18 22:45:12 - [ipc-server.c:249] Client 76 readable\nI: 01/01/18 22:45:12 - [commands.c:425] Handling command 'output 2017-12-18-085554_4800x2160_scrot.png 2017-12-18-085644_4800x2160_scrot.png bin Desktop Development Documents Downloads etc fonts.scale Libs mirrorlist.new Music New Unity Project oldsys Pictures PlayOnLinux's virtual drives Public Software sway.log Templates test.txt tmp Videos xorg.conf xsessions-backup bg 4k-abstract-artistic-wallpaper.jpg fill'\nD: 01/01/18 22:45:12 - [commands.c:344] find_handler(output) 0\nI: 01/01/18 22:45:12 - [commands.c:469] Running on container 'swayrwp ~/Pictures/ 3000'\nD: 01/01/18 22:45:12 - [output.c:194] Config stored for output 2017-12-18-085554_4800x2160_scrot.png (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg (null) (null))\nD: 01/01/18 22:45:12 - [ipc-server.c:983] Added IPC reply to client 76 queue: [ { \"success\": true } ]\nD: 01/01/18 22:45:12 - [ipc-server.c:315] Client 76 writable\nD: 01/01/18 22:45:12 - [ipc-server.c:244] Client 76 hung up\nI: 01/01/18 22:45:12 - [ipc-server.c:347] IPC Client 76 disconnected\nD: 01/01/18 22:45:15 - [ipc-server.c:178] Event on IPC listening socket\nD: 01/01/18 22:45:15 - [ipc-server.c:225] New client: fd 76, pid 2013\nD: 01/01/18 22:45:15 - [ipc-server.c:249] Client 76 readable\nI: 01/01/18 22:45:15 - [commands.c:425] Handling command 'output 2017-12-18-085554_4800x2160_scrot.png 2017-12-18-085644_4800x2160_scrot.png bin Desktop Development Documents Downloads etc fonts.scale Libs mirrorlist.new Music New Unity Project oldsys Pictures PlayOnLinux's virtual drives Public Software sway.log Templates test.txt tmp Videos xorg.conf xsessions-backup bg abstraction_hq_wallpaper_raven_2560x1440.jpg fill'\nD: 01/01/18 22:45:15 - [commands.c:344] find_handler(output) 0\nI: 01/01/18 22:45:15 - [commands.c:469] Running on container 'swayrwp ~/Pictures/ 3000'\nD: 01/01/18 22:45:15 - [output.c:194] Config stored for output 2017-12-18-085554_4800x2160_scrot.png (enabled:-1) (-1 x -1 @ -1, -1 scale 1) (bg (null) (null))\nD: 01/01/18 22:45:15 - [ipc-server.c:983] Added IPC reply to client 76 queue: [ { \"success\": true } ]\nD: 01/01/18 22:45:15 - [ipc-server.c:315] Client 76 writable\nD: 01/01/18 22:45:15 - [ipc-server.c:244] Client 76 hung up\nI: 01/01/18 22:45:15 - [ipc-server.c:347] IPC Client 76 disconnected\nD: 01/01/18 22:45:18 - [ipc-server.c:1080] Sending window::title event\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] libinput: suspend\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] Released drm surface (0x55a25bb5fbc0)\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] Removed bsurface from output (1)\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] Activate vt: 2\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] SIGUSR1\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] libinput: suspend\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] Releasing tty\nD: 01/01/18 22:45:22 - [main.c:52] [wlc] deactive\n````. ",
    "nick-walt": "Hi mate, yeah I read through the documentation first then found the unsupported PPA and decided to take the plunge and installed it. Does exactly what I was wondering about: putting the option to use Sway as a session in GDM login, above X.org and Wayland (if that is the right way to say it).\nHaving Sway as a selectable session is a nice way to try something as different as a tiling wm. Sat there looking at a beautiful screen but no idea what to do next. A bit like a new user who follows a How To that references vi instead of Nano and has no idea wtf is going on when nothing happens as they increasingly bash their keyboard.\nFollowed your video showing the key commands and was able to see the selectable options arising after pressing Super + D. Though, a few of them didn't work, like resizing windows.\nBUT! I'm writing this from within Chrome in Sway.\nI'm sure you guys have good doco, but it's probably making a lot of assumptions about what the user understands. Good doco helps less knowledgeable users understand the tech better through a first-principles revelation as they read through it. This is hard to write without pissing off the advanced users, but it can be done with the right intent.\nI'm gonna get back to exploring this deep UI. Cheers on creating something so beautifully fluid.. ",
    "awkure": "Just found out that the problem was inside my configuration file. \nSo to reproduce the bug just add the following \nset $ws10 \"shi\"\nbindsym Mod1+0 workspace $ws10\nAnd here's my debug.log\n. ",
    "MTHSBGN": "I'm currently running Arch and json-c 0.13-1 and I don't have any problem starting sway. Are you sure the problem comes from the json-c library? . I'm not using sddm so I can't reproduce your problem but you should try to start sway from the console to see what happens. \nOn another note, I do have the same error as you when trying to build sway from source.. ",
    "Xaleth": "I'll report my issue correctly in the next one.. I'll report my issue correctly in the next one.. ",
    "AmarOk1412": "Oh Indeed. Thx.. ",
    "ManDay": "\nThis is what I see. The background image in use is this one. No longer an issue with master@{1 May 18}, cheers.. ",
    "fooishbar": "Specifically, that's getting a 10bpc (but still 32bpp) EGLConfig, and adding it to KMS as an XRGB8888 buffer. If you look at how Weston's compositor-drm does it, we explicitly pass attribs to match the correct format when calling eglChooseConfig. Even without the presence of 10bpc configs, as channel order is defined, EGL could very legitimately return you a XBGR8888 (in KMS format naming) config, leading to swapped channels.. Specifically, that's getting a 10bpc (but still 32bpp) EGLConfig, and adding it to KMS as an XRGB8888 buffer. If you look at how Weston's compositor-drm does it, we explicitly pass attribs to match the correct format when calling eglChooseConfig. Even without the presence of 10bpc configs, as channel order is defined, EGL could very legitimately return you a XBGR8888 (in KMS format naming) config, leading to swapped channels.. ",
    "raingart": "@SirCmpwn  I also used\nbindsym $mod+Shift+KP_Subtract [floating] move scratchpad\nbut they also do not work. ",
    "ppascher": "I have the same problem using German AdNW keyboard layout wich is based on NEO.\nI start sway using\nXKB_DEFAULT_LAYOUT=de XKB_DEFAULT_VARIANT=adnw XKB_DEFAULT_MODEL=pc105 sway\nI get the same error messages as @triebelf : \nxkbcommon: ERROR: Key \"<MDSW>\" added to modifier map for multiple modifiers; Using Mod3, ignoring Mod5\nxkbcommon: ERROR: Key \"<HYPR>\" added to modifier map for multiple modifiers; Using Mod2, ignoring Mod4\nxkbcommon: ERROR: Key \"<LFSH>\" added to modifier map for multiple modifiers; Using Lock, ignoring Shift\nThe problem only exists with XWayland Windows. Using native Wayland programs the layout works as expected. The layout also works fine using X without XWayland.\nI tried various xkb options but did not find a solution so far.\nEDIT:\nI just noticed I get the same warnings about multiple modifier maps when starting a regular xfce4 session. The layout works fine there though:\n$ setxkbmap -print -verbose 10\nSetting verbose level to 10\nlocale is C\nTrying to load rules file ./rules/evdev...\nTrying to load rules file /usr/share/X11/xkb/rules/evdev...\nSuccess.\nApplied rules from evdev:\nrules:      evdev\nmodel:      pc105\nlayout:     de,de\nvariant:    adnw,\noptions:    grp:ctrls_toggle,terminate:ctrl_alt_bksp\nTrying to build keymap using the following components:\nkeycodes:   evdev+aliases(qwertz)\ntypes:      complete\ncompat:     complete+caps(caps_lock)+misc(assign_shift_left_action)+level5(level5_lock)\nsymbols:    pc+de(adnw)+de:2+inet(evdev)+group(ctrls_toggle)+terminate(ctrl_alt_bksp)\ngeometry:   pc(pc105)\nxkb_keymap {\n    xkb_keycodes  { include \"evdev+aliases(qwertz)\" };\n    xkb_types     { include \"complete\"  };\n    xkb_compat    { include \"complete+caps(caps_lock)+misc(assign_shift_left_action)+level5(level5_lock)\"   };\n    xkb_symbols   { include \"pc+de(adnw)+de:2+inet(evdev)+group(ctrls_toggle)+terminate(ctrl_alt_bksp)\" };\n    xkb_geometry  { include \"pc(pc105)\" };\n};\n. Thank you! I just used your PR and adjusted it to current master. Sway compiled and starts fine now.\nHere is a git diff if that helps:\nhttps://gist.github.com/ppascher/0efdd6ad36f8540c8073704d4f8ad7f4. Thank you @emersion. I (hopefully) applied all fixes/changes you mentioned.. Thanks for your patience @emersion! Still figuring many things out. My last commit I build both sway+wlroots with xwayland and without xwayland support. Both compiled and ran fine on my computer. Using wlroots without xwayland support and trying to compile sway with xwayland failed as expected.. Thank you @emersion & @RyanDwyer . I placed those three criteria inside xwayland checks as you suggested.. I am using: 1.0-alpha.5-284-gbea9f9c6 (should be latest master). This started about a day or two ago.\nI open any window (termite, qutebrowser, keepass) on empty workspace 1 on output DVI-D-1. I press 'mod+shift+7' to move said window to new empty workspace 7 on HDMI-A-1. Sway segfaults with stacktrace above. Sometimes I can move a window several times before it segfaults. Sometimes it happens on the first move. I just tested some more and it does not seem to matter if the target workspace is on a different output or not.\nsway config:\n ```\n  output DVI-D-1 resolution 2560x1440 pos 0,0\n  output HDMI-A-1 resolution 1920x1080@60Hz pos 2560,370\n ...\n  set $ws7 7\n  workspace $ws1 output DVI-D-1\n  workspace $ws2 output DVI-D-1\n  workspace $ws3 output DVI-D-1\n  workspace $ws4 output DVI-D-1\n  workspace $ws5 output DVI-D-1\nworkspace $ws6 output HDMI-A-1\n  workspace $ws7 output HDMI-A-1\n  workspace $ws8 output HDMI-A-1\n  workspace $ws9 output HDMI-A-1\n  workspace $ws10 output HDMI-A-1\n ...\n bindsym $mod+Shift+7 move container to workspace $ws7;workspace $ws7\n ```\nAlso coredumctl info lists alot of those threads:\n```\n0  0x00007f812b7a9afc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n1  0x00007f81268a4404 n/a (radeonsi_dri.so)\n2  0x00007f81268a40f8 n/a (radeonsi_dri.so)\n3  0x00007f812b7a3a9d start_thread (libpthread.so.0)\n4  0x00007f812b8b8a43 __clone (libc.so.6)\nEDIT: I have 2 AMD 290x GPUs installed if that is relevant?. Here is a coredump when \"playonlinux\" crashes:#0  0x0000557ec73d59a6 in container_is_floating (container=0x0) at ../sway/tree/container.c:738\n1  0x0000557ec73d97a9 in view_update_csd_from_client (view=0x557ec839ab30, enabled=true) at ../sway/tree/view.c:344\n2  0x0000557ec73dfa26 in handle_set_decorations (listener=0x557ec839ad90, data=0x557ec839a8e0) at ../sway/desktop/xwayland.c:253\n    xwayland_view = 0x557ec839ab30\n    view = 0x557ec839ab30\n    xsurface = 0x557ec839a8e0\n    csd = true\n\n3  0x00007f64d97fc7f1 in wlr_signal_emit_safe (signal=0x557ec839aad8, data=0x557ec839a8e0) at ../util/signal.c:29\n    pos = 0x557ec839ad90\n    l = 0x557ec839ad90\n    cursor = {link = {prev = 0x557ec839ad90, next = 0x7ffe2f57a670}, notify = 0x7f64d97fc73b <handle_noop>}\n    end = {link = {prev = 0x7ffe2f57a650, next = 0x557ec839aad8}, notify = 0x7f64d97fc73b <handle_noop>}\n\n4  0x00007f64d97ae75c in read_surface_motif_hints (xwm=0x557ec82c9970, xsurface=0x557ec839a8e0, reply=0x557ec838d8c0) at ../xwayland/xwm.c:597\n    decorations = 0\n    motif_hints = 0x557ec838d8e0\n\n5  0x00007f64d97aeb46 in read_surface_property (xwm=0x557ec82c9970, xsurface=0x557ec839a8e0, property=253) at ../xwayland/xwm.c:666\n    cookie = {sequence = 369}\n    reply = 0x557ec838d8c0\n\n6  0x00007f64d97af5c9 in xwm_handle_property_notify (xwm=0x557ec82c9970, ev=0x557ec83870f0) at ../xwayland/xwm.c:906\n    xsurface = 0x557ec839a8e0\n\n7  0x00007f64d97b00a5 in x11_event_handler (fd=77, mask=1, data=0x557ec82c9970) at ../xwayland/xwm.c:1273\n    count = 2\n    event = 0x557ec83870f0\n    xwm = 0x557ec82c9970\n\n8  0x00007f64d9839702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n9  0x00007f64d98382ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n10 0x0000557ec73a85b5 in server_run (server=0x557ec73feae0 ) at ../sway/server.c:174\n11 0x0000557ec73a7cca in main (argc=3, argv=0x7ffe2f57ab58) at ../sway/main.c:384\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x557ec73e79a4 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x557ec73e79a9 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x557ec73e79b0 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x557ec73e79b9 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x557ec73e79bf \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x557ec73e79c7 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x557ec73e79cf \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x557ec73e7560 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n. For me the issue is gone when setting \"focus_follows_mouse no\". So it seems to be a focus rather than an output problem. Possibly related to #2815 . Thank you for your input. Would this work? Adding the output check directly after the else does not let me use the workspace command by itself for a \"workspace $ws1; exec program\".. Duplicate of #2797 ?. I have the same problem using the following keymap:export XKB_DEFAULT_OPTIONS=\n export XKB_DEFAULT_LAYOUT=de\n export XKB_DEFAULT_VARIANT=adnw\n export XKB_DEFAULT_MODEL=pc105\n``\nI always blamed it on the error I reported in issue #1573 :xkbcommon: ERROR: Key \"\" added to modifier map for multiple modifiers; Using Lock, ignoring Shift`\nso mod+shift+space and mod+space are considered the same. That's probably why commenting the mod+space key binding makes mod+shift+space work. Just guessing though.. ",
    "vadimshv28": "if I understood you correctly, then i use root, for run sway. Pls Im sorry my english.. I did:\nChmod o+rwx /dev/*/\nrun sway from user, and keyboard not working\n\nand im sorry my English . \u041f\u043e\u043d\u044f\u043b. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u044e. @Hummer12007, \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0438 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043b\u043e\u0433 \u0438\u0437 \u043f\u043e\u0434 \u044e\u0437\u0435\u0440\u0430, \u0432\u0441\u0435\u0442\u0430\u043a\u0438 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0447\u0435\u0440\u0435\u0437 \u0442\u0430\u0439\u043c\u0430\u0443\u0442 \u0435\u0433\u043e \u0441\u043e\u0431\u0440\u0430\u0442\u044c: \nhttps://github.com/vadimshv28/files/blob/master/sway5.log. Hi, I did not solve the problem, thanks I take your advice.. ",
    "ainmosni": "Thanks, looking forward to it, just wanted to add that sway is higher quality than I expected and I'm enjoying using it.. ",
    "jni": "Sorry I should have mentioned that I\u2019m new at this, so I don\u2019t know how to answer your question.... @SirCmpwn I'm not actually sure anymore, but I think I set it when initially setting up Ubuntu, since the gdm login screen is set to Dvorak.\n@4e554c4c,\n\nthe init files that run before sway\n\nAnd what are those exactly? =)\nBut I suspect I need to disable my other settings before I can go this route...\nFor the record, I'd read various places that gdm was not the right way to run sway, although I've seen a couple of posts (lost the link now) saying that selecting Sway from the login settings menu worked for them. But the guide that I (roughly) followed to try to get Sway working is this one:\nhttps://github.com/swaywm/sway/wiki/Debian-installation-guide\nSpecifically the line at the end to turn off the graphical login. However I still got the error above.. Thanks @SirCmpwn @4e554c4c @hareluuu for your help so far. At one point I'd like to be able to specify automatically booting into Sway, but right now I can't even boot into it manually. As mentioned before, I booted into the multi-user.target, and running sway with or without some XKB prefixes results in the same error (see attachment). As @SirCmpwn hinted, probably there is some keyboard layout call that is incompatible with Sway being run when Sway launches (something to do with Wayland launching?), but I have no idea how to turn it off. Any further ideas would be much appreciated!\n\n. As another aside, @SirCmpwn, the Archlinux Sway wiki that has been referred to multiple times already (https://wiki.archlinux.org/index.php/Sway) points to GDM being able to pick up Sway at least in some cases. In my install I believe it's picking it up correctly but then running into the above problem when trying to launch it.. ",
    "hrslkvc": "@jni \n\nAnd what are those exactly? =)\n\nIn this case I'm guessing it would be .bash_profile or a custom file that is made to auto-run on startup\nThere's some troubleshooting help and info here: https://wiki.archlinux.org/index.php/Sway that mentions .bash_profile and .zprofile as files to use for setting the keyboard layout. The wiki is centered on arch but the general commands and tips are mostly system-agnostic in this case. . @jni Can you try exporting XKB_DEFAULT_LAYOUT=dvorak instead of XKB_DEFAULT_VARIANT?\nAs for booting directly into desktop, it can be done with GDM by modifying /etc/gdm/custom.conf as explained here: https://wiki.archlinux.org/index.php/GDM#Automatic_login\nI'm not really sure how to do this without a login manager in wayland and Google hasn't been helpful, so I hope someone else chimes in.. @cafehaine sorry for off-topic but thank you so much, I remember looking for a way to do this for days and just giving up and using a login manager.. ",
    "marshallward": "I compared the strace with the i3status line removed, and it polls a few times per second, looks like about once to fd 14 per second.  (Well, maybe a struct with fd=14 as first element...)\nWith i3status added (again, when it doesn't exist), it's polling fd 14 about 20,000 times per second. . I've checked this further, it happens any time the status_command argument is missing.  It goes away if I install i3status.  Apologies for the misleading title.. ",
    "chep": "Ok,\nI have no debug information but it's look like a recursive loop. gdb gives me\nhuge backtrace. More than 3k calls to ipc_json_describe_container_recursive. ",
    "David96": "Not sure whether this is related, but I just tried to adapt the transparency script for a multiseat environment with multiple focused windows and had to find out that the tree returned from sway ipc always only has one focused window in it.\nDo I understand that right that this is intentional so far until we have a solution which returns the focus states for different seats separately? Because intuitively I would have expected the tree to simply include multiple focused containers in a multiseat setup.\nThe current state makes supporting multiple seats with the transparency script impossible as I see it.\nIf it's not related, I'll create a new issue for it, just thought I'd ask first.. As a workaround you could do something like \"for_window [class=\"qutebrowser\"] border none\" in your config (or whatever qutebrowser's window class is) - at least for me scrolling works fine without a border.\nSo the bug seems to be that mouse events on the window border are not being processed.\n. I can create a pull request for that instead, but as the tiling threshold doc explicitly states that it doesn't apply to focused containers I thought this was the behaviour that most people agreed on.. Alright, closing this PR then.. Done.. ",
    "sudo97": "well if I swap those strings it does not return true on nvidiafb(which is logical), but what if some nvi module exists, it would return true in this case.\nWhy not use strcmp?. ",
    "nickbp": "Wasn't sure what branches to apply it to. Which one(s) would you like it in? It seems to apply to both wlroots and master.. :+1: be right back. ",
    "varyoo": "Turns out i was doint intensive I/O on the GUI thread :grin:. ",
    "iH8c0ff33": "I also get that and the cursor is really slow, as well as videos in firefox\nPS: That doesn't happen with gnome on wayland. ",
    "jannispinter": "I'm facing the exact same issue.. ",
    "JakeHedman": "Same thing happens to me but also on empty workspaces. Also version 0.15.1 but on Arch.. Same thing happens to me but also on empty workspaces. Also version 0.15.1 but on Arch.. ",
    "milkey-mouse": "Looks like this was fixed by #1848.. It seems to be fixed as of 1.0_rc1.. For some reason this issue is back for me on 1.0_rc3. Perhaps it was intermittent to begin with and I got lucky twice with 1.0_rc1.. Should I open an issue there?. That patch seems to work, thanks!. ",
    "probitlabs": "Update:\nIt can be reproduced by:\n1) Using a current (since when?) Sway version\n2) Shifting the output's positioning normal towards the orientation. (by 135, in my case)\n3) Sliding along the partly \"died\" and partly \"monitor-jumping\" edge of the screen on a monitor. (from the upper-left-hand corner down, in my case)\n4) Now Sway's dead. (You can't do something compositor respectively input related)\nAscii Visualization:\n!--Slide on that edge--\n      \\ v /\n       .______.\n       |v     |\n.______|v     | << MONITOR 2\n|      |<_____|\n| MONI | TOR1\n|______|\n\nEdit:\nIt seems to only go wrong if MONITOR1 is currently displaying an XWayland window.\nIt seems to also happen when the output's positioning is not even shifted; when I move the cursor from the upper-left-hand corner downwards\u2014but using just the pos 0,0 shift for the 2nd monitor\u2014, I can also reproduce the error.. ",
    "mckinney-subgraph": "Closing -- sent a fix and it was merged :). Okay, thanks! :) I will be more careful next time. . Hey,\nAfter discussing with @SirCmpwn and @emersion on IRC, I have started working on this. The first phase will be to re-implement the SNI dbus protocol using the sd-bus API. I'll add this as a first item to the task list.\nI am also still reading through the tray code and looking at the efforts already undertaken so I will update this task list as I progress. If other people have some tasks in mind, please add them to the issue.\n\n[ ] Implement SNI dbus protocol using sd-bus. Actually, I will submit a pull request for \"minimal viable SNI\" at some point during this week. . Err yeah, sorry :(. I had the \"minimal viable SNI\" patch in the works but ran into troubles getting it working with the event loop code and then my free time evaporated. I am happy to continue to working on this when I have some spare time but can't give an ETA.   . @SirCmpwn Sure, can do.. @SirCmpwn @4e554c4c\n\nI submitted a PR with the patch. I ironed out one of the issues and included notes about the other one. Also, I wrote a simple testing tool to interact with the service. I will put it up today and add the link.. @SirCmpwn @4e554c4c \nThe SNI testing tool:\nhttps://github.com/mckinney-subgraph/snit\n. A simple tool I wrote to test this code:\nhttps://github.com/mckinney-subgraph/snit\n. Closing this PR due to the fantastic effort by @ianyfan in PR https://github.com/swaywm/sway/pull/3249. ",
    "southern-tools": "Thank you for your response, drivers seem to be ok but I don't realize what is failing. 0. Yes, I have mesa. Here the info about portage and sway:\n\n\nemerge_info.log\n\n\nemerge_info_sway.log\n\n\nThank you for your help\n. Thank you @RedSoxFan for your help.\nYou are right about filecaps, I recompiled Sway and then ran getcap /usr/bin/sway getting /usr/bin/sway = cap_sys_admin+ep. So far so good.\nOn the other hand, without chmod +s /usr/bin/sway the system freezes and I have to reboot (and I don't get any log file). Yes, I have my user in the input and also the video group, as is adviced at gentoo handbook.. Ok, I was able to solve the problem.\nI was wrong about the lack of a log file, it only needed some time \"frozen\" to generate it. The new log has not the warning: Unable to drop root [...] but now: XDG_RUNTIME_DIR not set in the environment.\nSo, following the gentoo handbook for Weston, I added:\nif test -z \"${XDG_RUNTIME_DIR}\"; then\n    export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir\n    if ! test -d \"${XDG_RUNTIME_DIR}\"; then\n        mkdir \"${XDG_RUNTIME_DIR}\"\n        chmod 0700 \"${XDG_RUNTIME_DIR}\"\n    fi\nfi\nto my .bash_profile.\nI was finally able to start Sway, so I am closing this ticket.\nAgain, thank you very much @RedSoxFan for your help.. I see, well, thank you very much for your help. I will still not close the ticket just in case somebody comes up with  a solution (but apparently you are right).. ",
    "CameronNemo": "pam_rundir can be used to create a runtime directory on login. I can reproduce with the default configuration.. sway version 1.0-beta.1\nhttp://ix.io/1qfm. FWIW I have not seen this exact behavior, but I did see a zombie swaybg recently.. ",
    "jrouleau": "Rebased. ",
    "7415963987456321": "They are currently on a two week, hackathon, I reckon the next release will be 1.0 or some RC before that. . > I'm using Kitty terminal, and it's also floating for no reason\nI also use kitty but it does not float by default. I'm on version 1.0-beta ga918844e.\n. Rebased. Output from running coredumpctl gdb sway  and bt full\nhttps://gist.github.com/7415963987456321/3c7448ce12ac15ea3bfd01ddde06b3f5\nNot sure if i'm doing this right, was expecting more output from this. Not very experienced with gdb.. Thanks, just tested and this indeed fixes my problem.. Doing this repeatedly and switching between tabbing and stacking I am able to make this:\nhttps://imgur.com/a/ctRNLCT\nThats only two terminals.. Oh, no that was me repeatedly pressing splith in order to demonstrate how it can look. The point is that even pressing it one time on each container results in the H[null ] string appearing in the title, and that effet can then stack indefinitely and if done enough times will introduce a noticebla lag each time it is pressed.. Hmm, so you're supposed to be able to do this indefinitely? Don't really understand how a container can be H[H[H[H[H[H[H[H... and so forth. Doesn't really make sense that it opens a bunch of 'tabs' that contain nothing.  It seems that the 'title' tab thing gets left behind when I do H[H[.... multiple times and then remove the windows from the container.  The only way to get rid of it is to float the container and then back again. As can be seen from my second image it is possible to do this a lot and potentially fill the screen with these titlebars.. Yeah sorry about that, my title was probably not the most informative. . Just tested this. It indeed works a lot better now.. I had this issue just moments ago, it only gave that error when trying to open sway within sway but not when opening on another tty.  Updating wlroots and sway to latest master made the problem go away.. This works fine with firefox-nightly on sway on my end.. ",
    "onorua": "do you have a roadmap for this issue already?. ",
    "vitorhugomattos": "Void Linux. I managed to get sway working (and swaybar too) by reinstalling it, but without the capabilities I can't change tty, right?. Yes, that is because I installed elogind instead of ConsoleKit, but now I need to set the capabilities. I will do some tests and take conclusions after... Is the cap_sys_ptrace really necessary? They've been set correctly? I'll return the responses here later.. rly, it`s working fine with dbus-launch sway x-P. In debug log I just started sway, reloaded the config and exited.. Uh, looks like I can't trust clipboard. Sorry for the inconvenience :). ",
    "orestisf1993": "H is horizontal, V is vertical, lower case letters are windows/leafs\nwith H [ a V[ b c ] ]:\nfocus a, move right, move right => new layout: H[ V[ b c ] a ] (correct).\nmove left => layout doesn't change.. This is what I get: https://gfycat.com/FarflungSizzlingEmperorpenguin\nsorry if I am doing something wrong :/. Yeah it works now. I can test it later when you have everything sorted out if you want.. H[ a V[ b c ] ] c focused more recently than b (will write as c > b from now on).\nmove a right, a shouldn't be placed to the top of the vertical container.. 1. open window\n2. splitv\n3. open window\n4. move down\nexpected outcome: no change\nactual outcome: the second window moves and gets a reduced size. A dissimilarity with i3:\nH[a V[b c]], focus c, move up, move up, move down.\nFinal i3 layout: H[a V[c b]]\nFinal sway layout: H[a V[b c]].\nA bug:\nH[V[a b c] d], focus a, move up, move right, move left.\nFinal i3 layout: H[V[b c] a d]\nFinal sway layout: H[V[b c a] d]. So, you think it's more intuitive to create a new H split when moving right from the top? Not judging, just asking. i3 views the process like this:\ninitial\n\nmove up\n\nmove right\n\nand the video of what sway does, just in case: https://gfycat.com/SilverYoungKitfox. Sure. I tested with both branches btw.. New stuff in i3 4.16:\n\nstrip_workspace_name yes|no - https://i3wm.org/docs/userguide.html#_strip_workspace_numbers_name\ntitle_align left|center|right - https://i3wm.org/docs/userguide.html#_window_title_alignment\ni3-msg: add support for the SUBSCRIBE message type - https://github.com/i3/i3/pull/3435\nborder toggle now accepts an optional pixel argument - https://i3wm.org/docs/userguide.html#_changing_border_style\nresize set now accepts the width and height keywords - https://i3wm.org/docs/userguide.html#resizingconfig\nallow multiple assignments of workspaces to output - https://i3wm.org/docs/userguide.html#workspace_screen. A new ticket for each or a single for all?. > Am I correct in thinking that having strip_workspace_numbers and strip_workspace_name enabled is invalid?\n\ni3 will only respect one of them if they are both specified.. ",
    "Arnaudv6": "wow, thanks for your tremendous amount of work!\nThe world is a better place. Not testing yet, but hoping most \"DEs\" will come aboard.. disclaimer: never used i3 and really new to this all.\nAnd I know this is hackish/defeating.\nBut those lines in config should work isn't it?\nfor_window [class=\"[.]*\"] floating enable, focus;\nI also tried this one:\nfor_window [id=\"[.]*\"] floating enable, focus;\nyet I get Token 'class' is not recognized\nrespectively Token 'id' is not recognized\n. Should I open a new bug?. #3653\n@ddevault: I would take years to send a patch there really sorry, just hope this gets tackled before.. might add it to dependencies list?. #2937 . working through the website here, not git: not sure how to do that?. I'll try, thanks!. yes I did. I take it those lines only apply in X world?. Thank you both.. ",
    "Rawa": "Just want to say awesome job @SirCmpwn, I'm amazed by the progress of sway and wlroots by you and the other people on the crew.. ",
    "TylerBrock": "This is awesome, thank you so much for the hard work!. This is awesome, thank you so much for the hard work!. ",
    "mithodin": "I have waited for the beta to be released and I have to commend you for an entirely painless upgrade. After I had all the dependencies installed, I just compiled, installed, and everything worked just as before (or better). Thank you!. I will maybe have time tonight to test this.. I cannot reproduce this on my notebook, so I will have to wait until monday for further testing.. I have now had time to test things with the latest master. The problem is fixed.. Yes, as of right now (wlroots fe187fc8, sway 9abac858) the problem persists.. Actually, slight correction: Just pressing any key fixes the input issues.. Step 1: open a program that is interactable with right-click (e.g. a browser) on workspace n.\nStep 2: Switch to workspace k \u2260 n via keyboard shortcut (it does not occur if the switch is triggered via mouse click in the status bar).\nStep 3: switch back to workspace n\nStep 4: right-click anywhere in the program. The program does not respond.\nStep 5: press any key. The program now responds to right clicks again.\nAs I said, this happens 100% of the time.. I am starting sway via an .xinitrc script called from lightdm. I can post the script if it helps.\nHowever, if interference from something else is to blame, this should have occurred also in earlier versions, no? This is definitely a regression.. I will do the debug run on monday, since it's actually my work pc that has the problem. I'm happy to help in whichever way I can, however figuring out this bug is a bit beyond my current skillset, I think. I completely understand if there are higher priority issues. If I do start looking into it, what should I read to get a grasp of what wlroots and sway are even doing with regards to this bug?. Here's the debug log. I'm starting sway, running my browser, testing right-click, it works, changing to workspace 2 and back, right-click does not work, I press a key, now it works.\nsway.log\n. This is fixed in 1.0-rc5. Not sure what did it, but the problem is gone.. That I can do.. But then those windows will span the whole output, no?. Well, it depends on what you mean by fullscreen. The guide depends on X.org presenting a unified screen covering all physical screens. So, just going fullscreen would mean one window spanning all physical screens, which is not what I want. I've read a bit into the xdotool documentation and I don't think there is even a concept of fullscreen, because I don't have any underlying wm, just a pure X.org server. I may be wrong in that respect though.. Well, at least for me, there is no obvious performance issue. Top shows Xorg at around 0.3% cpu and sway mostly at around 2% with occasional spikes to around 10.. At be0588e (wlroots at 50011e7), the problem persists.. Huh. I'll see if later releases fix the problem. Maybe I'll be able to track down the exact commit that causes the issue.. Yep, that's the one. I'll try to understand what the new code does, maybe I'll be able to figure out what is wrong with my setup.. Sorry, I was quite busy this week. I'll do a debug build on monday and post the results.. Uhm, so, I checked out the latest commit in wlroots (c9b9e48) and sway (a053823) and the problem is gone. Is the trace still of interest?. ",
    "klardotsh": "Is this new beta going to be tagged in Git? (I use the tags for my PKGBUILD) . Looks like Beta 2 was tagged now? Is that tag \"safe\" (as far as beta tags are concerned) to test or still \"provisional\"?. It might not just be Xwayland stuff that's freezing: I've so far lost two Termite (VTE, GTK3 so I'm assuming Wayland natively. They scale correctly, so probably) windows to the void, too.... I'm... not sure this is (1) fixed, as those tickets imply, and (2) actually unrelated to sway/wlroots/wayland. I still have this issue despite Arch claiming to have fixed it, but ONLY on my laptop running Sway (I basically can't run anything Electron-based on this machine other than, for some reason, Discord). My desktop running AwesomeWM (Xorg) can run everything just fine, and both machines are kept fully up to date at least every few days.\nWhat can I do to give reasonable debug output that would help here? Absolutely nothing ends up in the console when running Slack or Riot.im from there.. The useHwAcceleration flag toggle fixed Slack in Sway for me (despite it working great in Xorg this whole time), awesome!\n--disable-gpu works for Riot.im as well - I made some wrappers to make this launcher-friendly: https://github.com/klardotsh/dotfiles/commit/ed1bb60103d7b13e4c580107c3c969da4910a018. I am absolutely thrilled to see these branches happening (these are two of the last three blockers from me using sway as my daily driver on my desktop - I already use it on laptop). I can gladly test a few games and perhaps VirtualBox or something this evening if this needs any further testing/reassurance (most of the games I play are XWayland-based as far as I know, especially a few of the WIne-/Proton-based titles, but I'm not sure if that matters)\nAny particular testing requests @ddevault / @Laaas ?. Well, there's other bugs at play for sure for my setup (going to open a separate ticket for that), but this functionality seems to work exactly as advertised! Was able to play Guild Wars 2 (via Wine+XWayland) and the cursor correctly locked to the window, and didn't get \"caught\" at the edge of the screen when spinning the character in endless circles.\nLooks like a win to me!. ",
    "freed00m": "I have a small issue with resize grow|shrink left|right|up|down. On alpha\nOn i3 when the resizing action does nothing no success true returned ( for example when you try growing down and you can't cause it's already at the bottom or it's only window on a workspace ) but swaymsg reports \n$ swaymsg -r resize shrink down\n[\n   {\n     \"success\": true\n   }\n ]\nI don't think it should report success true if nothing has been resized. \nI am used to a different behavior when resizing and used a small script to achieve more natural behavior and I have to know if growing in given direction happened or not. I3 has success false if nothing happens.\n. Maybe there is still a issue, I clearly see no op on window and still returned true.\nImages posted below are here just to demonstrate that window dimensions remained same but success was true.\nsway version 1.0-alpha.6-191-g4bebee62 (Oct  9 2018, branch 'master')\n\n\n. ",
    "aenda": "Additionally, right now reloading when an output command is specified in the config seems to mess up scaling on newly launched xwayland apps (at least dmenu and kitty for me, it looks zoomed so that fonts are about twice as large). Apps that had already been launched are fine. This occurs for me with output eDP-1 resolution 1920x1080 position 1920,0 in my config and stops when I remove it.\nSeems to be related to this issue.. I added some suggestions for spelling/grammar fixes as comments on the PR (given my lack of C experience, that's the most helpful I think I can be). Looking forward to this functionality getting implemented!\nEdit: Sorry, didn't notice that was copied from KDE, I'll move that over to the right place/delete the comments here.. I'm still experiencing this issue with the config above on 76bdbe9 (I installed sway-wlroots-git which shows version 1.0.alpha.2.r22.g76bdbe93-1). I have two swayidle processes at 100% utilization. What logs I could provide that would be useful?. I'm not 100% sure, but the issue seems to be that if you close sway, swayidle does not end with it. (Should exiting sway kill the swayidle process?) Starting sway again launches a second swayidle process, and the original one starts maxing out CPU for some reason.. Thanks for the quick reply. Here's a Wayland debug log:\n```\n\nWAYLAND_DEBUG=1 KITTY_ENABLE_WAYLAND=1 kitty\n[2341688.537]  -> wl_display@1.get_registry(new id wl_registry@2)\n[2341688.598]  -> wl_display@1.sync(new id wl_callback@3)\n[2341688.683] wl_display@1.delete_id(3)\n[2341688.691] wl_registry@2.global(1, \"wl_drm\", 2)\n[2341688.702] wl_registry@2.global(2, \"wl_shm\", 1)\n[2341688.714]  -> wl_registry@2.bind(2, \"wl_shm\", 1, new id [unknown]@4)\n[2341688.745] wl_registry@2.global(3, \"wl_compositor\", 4)\n[2341688.760]  -> wl_registry@2.bind(3, \"wl_compositor\", 3, new id [unknown]@5)\n[2341688.779] wl_registry@2.global(4, \"wl_subcompositor\", 1)\n[2341688.792]  -> wl_registry@2.bind(4, \"wl_subcompositor\", 1, new id [unknown]@6)\n[2341688.811] wl_registry@2.global(5, \"wl_data_device_manager\", 3)\n[2341688.824] wl_registry@2.global(6, \"org_kde_kwin_idle\", 1)\n[2341688.837] wl_registry@2.global(7, \"orbital_screenshooter\", 1)\n[2341688.848] wl_registry@2.global(8, \"gamma_control_manager\", 1)\n[2341688.856] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[2341688.868] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 1)\n[2341688.879] wl_registry@2.global(11, \"zwlr_layer_shell_v1\", 1)\n[2341688.891] wl_registry@2.global(12, \"zxdg_shell_v6\", 1)\n[2341688.901] wl_registry@2.global(13, \"xdg_wm_base\", 1)\n[2341688.913]  -> wl_registry@2.bind(13, \"xdg_wm_base\", 1, new id [unknown]@7)\n[2341688.928] wl_registry@2.global(14, \"org_kde_kwin_server_decoration_manager\", 1)\n[2341688.940] wl_registry@2.global(15, \"zwp_linux_dmabuf_v1\", 3)\n[2341688.951] wl_registry@2.global(16, \"wl_seat\", 6)\n[2341688.963]  -> wl_registry@2.bind(16, \"wl_seat\", 4, new id [unknown]@8)\n[2341688.977] wl_registry@2.global(17, \"zwlr_input_inhibit_manager_v1\", 1)\n[2341688.988] wl_registry@2.global(18, \"wl_output\", 3)\n[2341689.000]  -> wl_registry@2.bind(18, \"wl_output\", 2, new id [unknown]@9)\n[2341689.016] wl_callback@3.done(580)\n[2341689.023]  -> wl_display@1.sync(new id wl_callback@3)\n[2341689.088] wl_display@1.delete_id(3)\n[2341689.098] wl_seat@8.name(\"seat0\")\n[2341689.105] wl_seat@8.capabilities(7)\n[2341689.111]  -> wl_seat@8.get_pointer(new id wl_pointer@10)\n[2341689.120]  -> wl_seat@8.get_keyboard(new id wl_keyboard@11)\n[2341689.128] wl_output@9.geometry(0, 0, 293, 165, 0, \"Chimei Innolux Corporation\", \"0x1365\", 0)\n[2341689.155] wl_output@9.mode(0, 1920, 1080, 40001)\n[2341689.171] wl_output@9.mode(1, 1920, 1080, 60001)\n[2341689.196] wl_output@9.scale(1)\n[2341689.203] wl_output@9.done()\n[2341689.208] wl_callback@3.done(580)\n[2341689.398]  -> wl_shm@4.create_pool(new id wl_shm_pool@3, fd 6, 4096)\n[2341689.551]  -> wl_shm_pool@3.resize(12288)\n[2341689.625]  -> wl_shm_pool@3.resize(28672)\n[2341689.746]  -> wl_shm_pool@3.resize(61440)\n[2341689.974]  -> wl_shm_pool@3.resize(126976)\n[2341691.240]  -> wl_shm_pool@3.resize(258048)\n[2341691.358]  -> wl_shm_pool@3.resize(520192)\n[2341692.708]  -> wl_shm_pool@3.resize(1044480)\n[2341696.115]  -> wl_shm_pool@3.resize(2093056)\n[2341709.154]  -> wl_compositor@5.create_surface(new id wl_surface@12)\n[2341710.713]  -> wl_compositor@5.create_surface(new id wl_surface@13)\n[2341710.737]  -> wl_compositor@5.create_region(new id wl_region@14)\n[2341710.745]  -> wl_region@14.add(0, 0, 1918, 1055)\n[2341710.782]  -> wl_surface@13.set_opaque_region(wl_region@14)\n[2341710.787]  -> wl_surface@13.commit()\n[2341710.812]  -> wl_region@14.destroy()\n[2341711.939]  -> wl_display@1.get_registry(new id wl_registry@15)\n[2341711.950]  -> wl_display@1.sync(new id wl_callback@16)\n[2341712.129] wl_display@1.delete_id(14)\n[2341712.139] wl_display@1.delete_id(16)\n[2341712.146] wl_registry@15.global(1, \"wl_drm\", 2)\n[2341712.178]  -> wl_registry@15.bind(1, \"wl_drm\", 2, new id [unknown]@14)\n[2341712.198] wl_registry@15.global(2, \"wl_shm\", 1)\n[2341712.211] wl_registry@15.global(3, \"wl_compositor\", 4)\n[2341712.223] wl_registry@15.global(4, \"wl_subcompositor\", 1)\n[2341712.233] wl_registry@15.global(5, \"wl_data_device_manager\", 3)\n[2341712.246] wl_registry@15.global(6, \"org_kde_kwin_idle\", 1)\n[2341712.259] wl_registry@15.global(7, \"orbital_screenshooter\", 1)\n[2341712.269] wl_registry@15.global(8, \"gamma_control_manager\", 1)\n[2341712.280] wl_registry@15.global(9, \"gtk_primary_selection_device_manager\", 1)\n[2341712.289] wl_registry@15.global(10, \"zxdg_output_manager_v1\", 1)\n[2341712.297] wl_registry@15.global(11, \"zwlr_layer_shell_v1\", 1)\n[2341712.305] wl_registry@15.global(12, \"zxdg_shell_v6\", 1)\n[2341712.314] wl_registry@15.global(13, \"xdg_wm_base\", 1)\n[2341712.323] wl_registry@15.global(14, \"org_kde_kwin_server_decoration_manager\", 1)\n[2341712.331] wl_registry@15.global(15, \"zwp_linux_dmabuf_v1\", 3)\n[2341712.341]  -> wl_registry@15.bind(15, \"zwp_linux_dmabuf_v1\", 3, new id [unknown]@17)\n[2341712.353] wl_registry@15.global(16, \"wl_seat\", 6)\n[2341712.374] wl_registry@15.global(17, \"zwlr_input_inhibit_manager_v1\", 1)\n[2341712.382] wl_registry@15.global(18, \"wl_output\", 3)\n[2341712.391] wl_callback@16.done(581)\n[2341712.396]  -> wl_display@1.sync(new id wl_callback@16)\n[2341712.556] wl_display@1.delete_id(16)\n[2341712.565] wl_drm@14.device(\"/dev/dri/card0\")\n[2341712.602]  -> wl_drm@14.authenticate(5)\n[2341712.608] wl_drm@14.format(808669761)\n[2341712.614] wl_drm@14.format(808669784)\n[2341712.620] wl_drm@14.format(875713089)\n[2341712.627] wl_drm@14.format(875713112)\n[2341712.633] wl_drm@14.format(909199186)\n[2341712.640] wl_drm@14.format(961959257)\n[2341712.646] wl_drm@14.format(825316697)\n[2341712.653] wl_drm@14.format(842093913)\n[2341712.659] wl_drm@14.format(909202777)\n[2341712.665] wl_drm@14.format(875713881)\n[2341712.671] wl_drm@14.format(842094158)\n[2341712.678] wl_drm@14.format(909203022)\n[2341712.685] wl_drm@14.format(1448695129)\n[2341712.692] wl_drm@14.capabilities(1)\n[2341712.699] zwp_linux_dmabuf_v1@17.modifier(808669761, 0, 0)\n[2341712.712] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 1)\n[2341712.724] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 2)\n[2341712.735] zwp_linux_dmabuf_v1@17.modifier(808669784, 0, 0)\n[2341712.745] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 1)\n[2341712.759] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 2)\n[2341712.773] zwp_linux_dmabuf_v1@17.modifier(875713089, 0, 0)\n[2341712.786] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 1)\n[2341712.796] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 2)\n[2341712.811] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 4)\n[2341712.819] zwp_linux_dmabuf_v1@17.modifier(875708993, 0, 0)\n[2341712.829] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 1)\n[2341712.840] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 2)\n[2341712.849] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 4)\n[2341712.857] zwp_linux_dmabuf_v1@17.modifier(875713112, 0, 0)\n[2341712.871] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 1)\n[2341712.885] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 2)\n[2341712.900] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 4)\n[2341712.915] zwp_linux_dmabuf_v1@17.modifier(875709016, 0, 0)\n[2341712.930] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 1)\n[2341712.945] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 2)\n[2341712.959] zwp_linux_dmabuf_v1@17.modifier(892424769, 0, 0)\n[2341712.972] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 1)\n[2341712.984] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 2)\n[2341712.996] zwp_linux_dmabuf_v1@17.modifier(909199186, 0, 0)\n[2341713.009] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 1)\n[2341713.023] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 2)\n[2341713.037] zwp_linux_dmabuf_v1@17.modifier(538982482, 0, 0)\n[2341713.052] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 1)\n[2341713.069] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 2)\n[2341713.083] zwp_linux_dmabuf_v1@17.modifier(540422482, 0, 0)\n[2341713.096] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 1)\n[2341713.107] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 2)\n[2341713.119] zwp_linux_dmabuf_v1@17.modifier(943215175, 0, 0)\n[2341713.131] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 1)\n[2341713.143] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 2)\n[2341713.156] zwp_linux_dmabuf_v1@17.modifier(842224199, 0, 0)\n[2341713.167] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 1)\n[2341713.180] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 2)\n[2341713.192] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 4)\n[2341713.203] zwp_linux_dmabuf_v1@17.modifier(961959257, 0, 0)\n[2341713.215] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 1)\n[2341713.226] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 2)\n[2341713.238] zwp_linux_dmabuf_v1@17.modifier(825316697, 0, 0)\n[2341713.250] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 1)\n[2341713.261] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 2)\n[2341713.273] zwp_linux_dmabuf_v1@17.modifier(842093913, 0, 0)\n[2341713.285] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 1)\n[2341713.296] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 2)\n[2341713.308] zwp_linux_dmabuf_v1@17.modifier(909202777, 0, 0)\n[2341713.319] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 1)\n[2341713.331] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 2)\n[2341713.342] zwp_linux_dmabuf_v1@17.modifier(875713881, 0, 0)\n[2341713.354] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 1)\n[2341713.369] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 2)\n[2341713.383] zwp_linux_dmabuf_v1@17.modifier(961893977, 0, 0)\n[2341713.395] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 1)\n[2341713.410] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 2)\n[2341713.423] zwp_linux_dmabuf_v1@17.modifier(825316953, 0, 0)\n[2341713.438] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 1)\n[2341713.453] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 2)\n[2341713.466] zwp_linux_dmabuf_v1@17.modifier(842094169, 0, 0)\n[2341713.477] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 1)\n[2341713.490] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 2)\n[2341713.505] zwp_linux_dmabuf_v1@17.modifier(909203033, 0, 0)\n[2341713.517] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 1)\n[2341713.531] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 2)\n[2341713.546] zwp_linux_dmabuf_v1@17.modifier(875714137, 0, 0)\n[2341713.559] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 1)\n[2341713.572] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 2)\n[2341713.586] zwp_linux_dmabuf_v1@17.modifier(842094158, 0, 0)\n[2341713.600] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 1)\n[2341713.614] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 2)\n[2341713.626] zwp_linux_dmabuf_v1@17.modifier(909203022, 0, 0)\n[2341713.639] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 1)\n[2341713.653] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 2)\n[2341713.668] zwp_linux_dmabuf_v1@17.modifier(1448695129, 0, 0)\n[2341713.681] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 1)\n[2341713.696] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 2)\n[2341713.711] zwp_linux_dmabuf_v1@17.modifier(1498831189, 0, 0)\n[2341713.724] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 1)\n[2341713.738] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 2)\n[2341713.753] wl_callback@16.done(581)\n[2341713.761]  -> wl_display@1.sync(new id wl_callback@16)\n[2341713.800] wl_display@1.delete_id(16)\n[2341713.809] wl_drm@14.authenticated()\n[2341713.813] wl_callback@16.done(581)\n[2341725.891]  -> wl_surface@13.frame(new id wl_callback@16)\n[2341725.947]  -> zwp_linux_dmabuf_v1@17.create_params(new id zwp_linux_buffer_params_v1@18)\n[2341726.014]  -> zwp_linux_buffer_params_v1@18.add(fd 9, 0, 0, 7680, 16777216, 4)\n[2341726.084]  -> zwp_linux_buffer_params_v1@18.add(fd 10, 1, 8110080, 256, 16777216, 4)\n[2341726.115]  -> zwp_linux_buffer_params_v1@18.create_immed(new id wl_buffer@19, 1918, 1055, 875713089, 0)\n[2341726.134]  -> zwp_linux_buffer_params_v1@18.destroy()\n[2341726.143]  -> wl_surface@13.attach(wl_buffer@19, 0, 0)\n[2341726.153]  -> wl_surface@13.damage(0, 0, 2147483647, 2147483647)\n[2341726.592]  -> wl_surface@13.commit()\n[2341791.444]  -> xdg_wm_base@7.get_xdg_surface(new id xdg_surface@20, wl_surface@13)\n[2341791.465]  -> xdg_surface@20.get_toplevel(new id xdg_toplevel@21)\n[2341791.470]  -> xdg_toplevel@21.set_title(\"kitty\")\n[2341791.492]  -> wl_surface@13.commit()\n[2341791.495]  -> wl_display@1.sync(new id wl_callback@22)\n[2341791.516] wl_keyboard@11.keymap(1, fd 6, 48257)\n[2341798.540] wl_keyboard@11.repeat_info(25, 600)\n[2341798.591] wl_display@1.delete_id(18)\n[2341798.658] wl_display@1.delete_id(20)\n[2341798.666] wl_display@1.error(wl_surface@13, 3, \"xdg_surface must not have a buffer at creation\")\nwl_surface@13: error 3: xdg_surface must not have a buffer at creation\n[136 08:17:48.470051] [glfw error 65544]: Wayland: Focusing a window requires user interaction\n[136 08:17:48.470077] [glfw error 65544]: Wayland: Window position retrieval not supported\n[2341808.327]  -> wl_display@1.sync(new id wl_callback@18)\n[2341808.562]  -> xdg_toplevel@21.set_title(\"kitty\")\n[2341810.786]  -> wl_buffer@19.destroy()\n[2341815.926]  -> xdg_toplevel@21.destroy()\n[2341815.945]  -> xdg_surface@20.destroy()\n[2341815.954]  -> wl_surface@13.destroy()\n[2341830.815]  -> zwp_linux_dmabuf_v1@17.destroy()\n[2341831.938]  -> wl_shm_pool@3.destroy()\n[2341832.177]  -> wl_surface@12.destroy()\n[2341832.184]  -> wl_subcompositor@6.destroy()\n[2341832.189]  -> xdg_wm_base@7.destroy()\n.\n[root@spectre netctl]# coredumpctl gdb 519\n           PID: 519 (swayidle)\n           UID: 1000 (gmend)\n           GID: 1000 (gmend)\n        Signal: 6 (ABRT)\n     Timestamp: Thu 2018-05-17 16:15:50 CDT (5h 12min ago)\n  Command Line: swayidle timeout 180 swaymsg \"output * dpms off\" resume swaymsg \"output * dpms on\" timeout 600 exec systemctl suspend before-sleep swaylock -i /home/gmend/.dotfiles/sway/lockscreen.png\n    Executable: /usr/bin/swayidle\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 (gmend)\n       Boot ID: 4b610dd9dee9445dbbcf99eeb43ef541\n    Machine ID: 9abc13d0191f400db2d10e00a47913e8\n      Hostname: spectre\n       Storage: /var/lib/systemd/coredump/core.swayidle.1000.4b610dd9dee9445dbbcf99eeb43ef541.519.1526591750000000.lz4\n       Message: Process 519 (swayidle) of user 1000 dumped core.\n\n            Stack trace of thread 519:\n            #0  0x00007feaa2f2886b raise (libc.so.6)\n            #1  0x00007feaa2f1340e abort (libc.so.6)\n            #2  0x00007feaa2f6a8b8 __libc_message (libc.so.6)\n            #3  0x00007feaa2ffb80d __GI___fortify_fail_abort (libc.so.6)\n            #4  0x00007feaa2ffb7c2 __stack_chk_fail (libc.so.6)\n            #5  0x000055841d9a3f52 n/a (swayidle)\n            #6  0x00007feaa32d3657 n/a (libsystemd.so.0)\n            #7  0x00007feaa32d338f n/a (libsystemd.so.0)\n            #8  0x00007feaa32d38ee n/a (libsystemd.so.0)\n            #9  0x00007feaa32d338f n/a (libsystemd.so.0)\n            #10 0x00007feaa32d38ee n/a (libsystemd.so.0)\n            #11 0x00007feaa32d338f n/a (libsystemd.so.0)\n            #12 0x00007feaa32d38ee n/a (libsystemd.so.0)\n            #13 0x00007feaa32d338f n/a (libsystemd.so.0)\n            #14 0x00007feaa32d38ee n/a (libsystemd.so.0)\n            #15 0x00007feaa32d338f n/a (libsystemd.so.0)\n            #16 0x00007feaa32d346e n/a (libsystemd.so.0)\n            #17 0x00007feaa32d32b5 n/a (libsystemd.so.0)\n            #18 0x00007feaa32be21f n/a (libsystemd.so.0)\n            #19 0x00007feaa33120a6 n/a (libsystemd.so.0)\n            #20 0x000055841d9a3933 n/a (swayidle)\n            #21 0x00007feaa37aea42 wl_event_loop_dispatch (libwayland-server.so.0)\n            #22 0x000055841d9a366f n/a (swayidle)\n            #23 0x00007feaa2f1506b __libc_start_main (libc.so.6)\n            #24 0x000055841d9a378a n/a (swayidle)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swayidle...(no debugging symbols found)...done.\n[New LWP 519]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swayidle timeout 180 swaymsg \"output * dpms off\" resume swaymsg \"output * dpms'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007feaa2f2886b in raise () from /usr/lib/libc.so.6\n(gdb) bt full\n0  0x00007feaa2f2886b in raise () at /usr/lib/libc.so.6\n1  0x00007feaa2f1340e in abort () at /usr/lib/libc.so.6\n2  0x00007feaa2f6a8b8 in __libc_message () at /usr/lib/libc.so.6\n3  0x00007feaa2ffb80d in __fortify_fail_abort () at /usr/lib/libc.so.6\n4  0x00007feaa2ffb7c2 in  () at /usr/lib/libc.so.6\n5  0x000055841d9a3f52 in  ()\n6  0x00007feaa32d3657 in  () at /usr/lib/libsystemd.so.0\n7  0x00007feaa32d338f in  () at /usr/lib/libsystemd.so.0\n8  0x00007feaa32d38ee in  () at /usr/lib/libsystemd.so.0\n9  0x00007feaa32d338f in  () at /usr/lib/libsystemd.so.0\n10 0x00007feaa32d38ee in  () at /usr/lib/libsystemd.so.0\n11 0x00007feaa32d338f in  () at /usr/lib/libsystemd.so.0\n12 0x00007feaa32d38ee in  () at /usr/lib/libsystemd.so.0\n13 0x00007feaa32d338f in  () at /usr/lib/libsystemd.so.0\n14 0x00007feaa32d38ee in  () at /usr/lib/libsystemd.so.0\n15 0x00007feaa32d338f in  () at /usr/lib/libsystemd.so.0\n16 0x00007feaa32d346e in  () at /usr/lib/libsystemd.so.0\n17 0x00007feaa32d32b5 in  () at /usr/lib/libsystemd.so.0\n18 0x00007feaa32be21f in  () at /usr/lib/libsystemd.so.0\n19 0x00007feaa33120a6 in  () at /usr/lib/libsystemd.so.0\n20 0x000055841d9a3933 in  ()\n21 0x00007feaa37aea42 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n22 0x000055841d9a366f in  ()\n23 0x00007feaa2f1506b in __libc_start_main () at /usr/lib/libc.so.6\n24 0x000055841d9a378a in  ()\n(gdb) \n```\nI'm very new to this, but I tried to get a stack trace from gdb as above - it doesn't seem to have any new information, however, so I apologize if I'm doing something wrong.\nI also ran thread apply all bt full at the gdb prompt and got the same output.. OK, I was reading up on some other issues and believe the issue is that I installed from AUR. I will build from source again and if the issue reoccurs provide a stack trace. Is there something I need to do differently for a debug build? Unless I am missing something, the build commands given in the readme and in the PKGBUILD from the AUR seem to be the same?. I've been having this intermittent crash as well that seems related - if I'm making a mistake and it's not I can file a separate issue. Here is a backtrace:\n```\ncoredumpctl gdb 15295\n           PID: 15295 (sway)\n           UID: 1000 (gmend)\n           GID: 1000 (gmend)\n        Signal: 6 (ABRT)\n     Timestamp: Fri 2018-05-25 15:54:37 CDT (3min 26s ago)\n  Command Line: sway -d\n    Executable: /usr/bin/sway\n Control Group: /user.slice/user-1000.slice/session-c4.scope\n          Unit: session-c4.scope\n         Slice: user-1000.slice\n       Session: c4\n     Owner UID: 1000 (gmend)\n       Boot ID: 5f1d9f2727284360b873a11f27443d96\n    Machine ID: 9abc13d0191f400db2d10e00a47913e8\n      Hostname: spectre\n       Storage: /var/lib/systemd/coredump/core.sway.1000.5f1d9f2727284360b873a11f27443d96.15295.1527281677000000.lz4\n       Message: Process 15295 (sway) of user 1000 dumped core.\n            Stack trace of thread 15295:\n            #0  0x00007f691440286b raise (libc.so.6)\n            #1  0x00007f69143ed40e abort (libc.so.6)\n            #2  0x00007f69144448b8 __libc_message (libc.so.6)\n            #3  0x00007f691444ad4a malloc_printerr (libc.so.6)\n            #4  0x00007f691444b2a4 munmap_chunk (libc.so.6)\n            #5  0x000055cfa5050a69 _container_destroy (sway)\n            #6  0x000055cfa5051522 container_destroy (sway)\n            #7  0x000055cfa505573c view_unmap (sway)\n            #8  0x00007f6914c1f3be wlr_signal_emit_safe (libwlroots.so.0)\n            #9  0x00007f6914bef7b4 xsurface_unmap (libwlroots.so.0)\n            #10 0x00007f6914c1f3be wlr_signal_emit_safe (libwlroots.so.0)\n            #11 0x00007f6914c1ba9a surface_handle_resource_destroy (libwlroots.so.0)\n            #12 0x00007f6914e4cb5f n/a (libwayland-server.so.0)\n            #13 0x00007f6914e4cbcf wl_resource_destroy (libwayland-server.so.0)\n            #14 0x00007f6914c1f3be wlr_signal_emit_safe (libwlroots.so.0)\n            #15 0x00007f6914c04091 wlr_renderer_destroy (libwlroots.so.0)\n            #16 0x00007f6914bf6d33 finish_drm_renderer (libwlroots.so.0)\n            #17 0x00007f6914bf3be5 backend_destroy (libwlroots.so.0)\n            #18 0x00007f6914bfb099 multi_backend_destroy (libwlroots.so.0)\n            #19 0x00007f6914e4cad2 n/a (libwayland-server.so.0)\n            #20 0x00007f6914e4d217 wl_display_destroy (libwayland-server.so.0)\n            #21 0x000055cfa50339d3 main (sway)\n            #22 0x00007f69143ef06b __libc_start_main (libc.so.6)\n            #23 0x000055cfa5033bfa _start (sway)\n\n            Stack trace of thread 15296:\n            #0  0x00007f69141baffc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007f690c391094 n/a (i965_dri.so)\n            #2  0x00007f690c390d88 n/a (i965_dri.so)\n            #3  0x00007f69141b5075 start_thread (libpthread.so.0)\n            #4  0x00007f69144c453f __clone (libc.so.6)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...done.\n[New LWP 15295]\n[New LWP 15296]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `sway -d'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007f691440286b in raise () from /usr/lib/libc.so.6\n[Current thread is 1 (Thread 0x7f6916e369c0 (LWP 15295))]\n(gdb) bt full\n0  0x00007f691440286b in raise () at /usr/lib/libc.so.6\n1  0x00007f69143ed40e in abort () at /usr/lib/libc.so.6\n2  0x00007f69144448b8 in __libc_message () at /usr/lib/libc.so.6\n3  0x00007f691444ad4a in  () at /usr/lib/libc.so.6\n4  0x00007f691444b2a4 in  () at /usr/lib/libc.so.6\n5  0x000055cfa5050a69 in _container_destroy (cont=0x55cfa5f687c0) at ../sway/sway/tree/container.c:166\n    parent = <optimized out>#6  0x000055cfa5051522 in container_destroy (con=0x55cfa5f687c0) at ../sway/sway/tree/container.c:347\n    parent = 0x0\n\n7  0x000055cfa505573c in view_unmap (view=0x55cfa5f7f080) at ../sway/sway/tree/view.c:502\n    parent = <optimized out>\n    view = 0x55cfa5f7f080\n    __PRETTY_FUNCTION__ = \"view_unmap\"\n    __PRETTY_FUNCTION__ = \"view_unmap\"\n\n8  0x00007f6914c1f3be in wlr_signal_emit_safe (signal=signal@entry=0x55cfa5f67360, data=data@entry=0x55cfa5f67200) at ../util/signal.c:29\n    pos = 0x55cfa5f7f240\n    l = 0x55cfa5f7f240\n    cursor = {link = {prev = 0x55cfa5f7f240, next = 0x7fff60ab6530}, notify = 0x7f6914c1f330 <handle_noop>}\n    end = {link = {prev = 0x7fff60ab6510, next = 0x55cfa5f67360}, notify = 0x7f6914c1f330 <handle_noop>}\n\n9  0x00007f6914bef7b4 in xsurface_unmap (surface=0x55cfa5f67200) at ../xwayland/xwm.c:677\n10 0x00007f6914c1f3be in wlr_signal_emit_safe (signal=signal@entry=0x55cfa5f7f518, data=data@entry=0x55cfa5f7f480) at ../util/signal.c:29\n    pos = 0x55cfa5f673d0\n    l = 0x55cfa5f673d0\n    cursor = {link = {prev = 0x55cfa5f673d0, next = 0x7fff60ab65b0}, notify = 0x7f6914c1f330 <handle_noop>}\n    end = {link = {prev = 0x7fff60ab6590, next = 0x55cfa5f7f518}, notify = 0x7f6914c1f330 <handle_noop>}\n\n11 0x00007f6914c1ba9a in surface_handle_resource_destroy (resource=) at ../types/wlr_surface.c:633\n    surface = 0x55cfa5f7f480\n\n12 0x00007f6914e4cb5f in  () at /usr/lib/libwayland-server.so.0\n13 0x00007f6914e4cbcf in wl_resource_destroy () at /usr/lib/libwayland-server.so.0\n14 0x00007f6914c1f3be in wlr_signal_emit_safe (signal=signal@entry=0x55cfa5b90b28, data=data@entry=0x55cfa5b90b20) at ../util/signal.c:29\n    pos = 0x55cfa5f7f558\n    l = 0x55cfa5f7f558\n    cursor = {link = {prev = 0x55cfa5f7f558, next = 0x55cfa5dbb7b8}, notify = 0x7f6914c1f330 <handle_noop>}\n    end = {link = {prev = 0x55cfa5dbb7b8, next = 0x55cfa5b90b28}, notify = 0x7f6914c1f330 <handle_noop>}\n\n15 0x00007f6914c04091 in wlr_renderer_destroy (r=0x55cfa5b90b20) at ../render/wlr_renderer.c:28\n16 0x00007f6914bf6d33 in finish_drm_renderer (renderer=0x55cfa5a0ee38) at ../backend/drm/renderer.c:54\n17 0x00007f6914bf3be5 in backend_destroy (backend=0x55cfa5a0ed30) at ../backend/drm/backend.c:45\n    drm = 0x55cfa5a0ed30\n    conn = <optimized out>\n    next = <optimized out>\n\n18 0x00007f6914bfb099 in multi_backend_destroy (wlr_backend=0x55cfa5a04d70) at ../backend/multi/backend.c:47\n    backend = 0x55cfa5a04d70\n    sub = <optimized out>\n    next = 0x55cfa5a0d0e0\n\n19 0x00007f6914e4cad2 in  () at /usr/lib/libwayland-server.so.0\n20 0x00007f6914e4d217 in wl_display_destroy () at /usr/lib/libwayland-server.so.0\n21 0x000055cfa50339d3 in main (argc=, argv=) at ../sway/sway/main.c:433\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x55cfa5059b5d \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55cfa505e01f \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55cfa5059b62 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x55cfa5059b6b \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x55cfa5059aa8 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55cfa5059b71 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x55cfa5059b79 \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = <optimized out>\n    usage = 0x55cfa5059d70 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = <optimized out>\n    suid = false\n\n(gdb) quit\n```\n(I built sway and wlroots with --buildtype debug but am still getting <optimized out> - what can I do to avoid this?)\nAt times this error seems to be reproducible for me consistently when opening certain sites, like flightaware.com or netflix.com, but after a reboot the sites will be fine and load normally, until they suddenly will start consistently crashing again. So it's reproducible under certain conditions, but I don't know what those conditions are. I can't seem to find anything in the sway debug logs that would indicate a cause, however.. \"Turning on screen\". \"from sway: it sets up the lockscreen and turns off the screen.\" might be better, but this isn't as clear cut. ",
    "smlx": "I can't reproduce this on master. Fixed?. This doesn't happen for me anymore on master branch. Is it still a problem?. I can reproduce this by starting and exiting gvim immediately after starting sway.\nIt doesn't occur after just starting gvim - exiting is what triggers it.. @emersion I moved the last position of the mouse into sway_cursor as suggested. There were also some subtle bugs in the focus switching logic, but I think those are fixed now too.. Do you mean by storing the keycodes in the sway_keyboard struct along with (or instead of) the keysyms?. @emersion Thanks for the suggestion, this is a much cleaner approach.\nAgain, I've tried to test everything I could think of but please try this to see if it breaks anything... I see what you mean about calculating keysyms for all keycodes, and I've pushed a commit to work that way.\nHowever I'm curious about why e.g. my Mod+Shift+2 binding was working even when I was just calculating the keysyms using the single keycode? What binding did I break by using the single keycode?. Ah, great! I ran out of time for this.. Hmm. I'm well beyond my bounds of understanding how wayland rendering works in that case. There was some trial and error involved getting this far!\nCould you point me towards any code or documentation that might help?. Sorry, I'm not going to have time to finish this anytime soon. I'll close the PR and open a new one later when I get a chance (if it's not fixed by then).. I agree that a commented example configuration will probably suffice.\nFWIW, I use $mod+Shift+`. @colin-williams you might be interested in this Docker-based builder https://gitlab.com/smlx/sway-build\nIt's Debian-specific, but should be adaptable for other distros.. https://github.com/electron/electron/issues/9485 looks similar.. could this be unrelated to wlroots / sway?. >  It supports python 3, so not sure if the shebang line should list python3 or just python as it is.\nMost distros link python to python2, however Arch does not - python is python3.\nSo python seems like a good choice.. Also happens occasionally with Firefox on i3 for me.\nIt's reported for other tiling WMs too: https://bugzilla.mozilla.org/show_bug.cgi?id=927621\nNot a sway bug.. @eternal-sorrow is 3 similar to #3055?. I'm not sure it matters in this case.\nConsider:\ncursor is over container A\nlayout changes, cursor is now over B\nmove cursor\nAll I'm checking here is if the previous pointer position and the current pointer position are over the same container at this point in time. The specific container it is doesn't actually matter, does it? The behaviour seems to be correct at any rate.. Moved into the struct, as suggested.. Okay, I changed this to just check the type.. For me in that scenario in i3, focus doesn't change to B, it remains on A. Are you able to check it to confirm?\nFocus basically doesn't change until a window border is crossed.. ",
    "NilsBrause": "I'm on 48fca1c7 now, and the problem persists.. With gdb, it seems like the first few lines of the status script output (after the version line) aren't being read in:\nBreakpoint 2, i3bar_handle_readable (status=0x555555778cb0) at ../sway/swaybar/i3bar.c:113\n113             char *cur = &state->buffer[state->buffer_index];\n(gdb) n\n114             ssize_t n = read(status->read_fd, cur,\n(gdb)\n113             char *cur = &state->buffer[state->buffer_index];\n(gdb)\n114             ssize_t n = read(status->read_fd, cur,\n(gdb)\n116             if (n == -1) {\n(gdb) p *state\n$22 = {click_events = false,\n  buffer = 0x555555778d80 \"{ \\\"name\\\" : \\\"net_tap0\\\", \\\"color\\\" : \\\"#ff0000\\\", \\\"full_text\\\" : \\\"tap0: down\\\" },\\n{ \\\"name\\\" : \\\"net_tun0\\\", \\\"color\\\" : \\\"#00ff00\\\", \\\"full_text\\\" : \\\"tun0: 10.0.0.18 & 2a03:4000:15:2a3:1::1003\\\", \\\"short_text\\\" : \\\"10.0.0\"...,\nbuffer_size = 4096, buffer_index = 0, current_node = 0x0, escape = false, depth = 0, nodes = {JSON_NODE_UNKNOWN <repeats 16 times>}}\nNote that the '[' is missing. Then, a ']' is encountered, status_error closes the fd, and the poll in the event loop alsways immediately returns with an error for the status fd, resulting in 100% CPU usage.\nI don't know why it doesn't read the first few lines, but to get rid of the high CPU usage, could we maybe remove the status fd from the event loop in the status_error function?\nInterestingly, it works fine when being run manually with strace swaybar -b bar-0\nAnother workaround is adding a sleep 1 to the first line of the script.\n. Alright, I think I got it: \nfdopen is used to associate a FILE stream with the status read fd. This stream is buffered. Therefore read_line_buffer will not only read a single line but potentially more from the fd. Making the FILE stream unbuffered using setvbuf(status->read, NULL, _IONBF, 0); fixes this (like [1]).\nUnfortunately, this didn't seem to make it work with my script and i3status didn't work anymore either. Looking at the i3bar/JSON parser revealed, that it doesn't expect the opening '[' of the infinite array. When using i3status before, the '[' was in the FILE stream buffer. Therefore that didn't matter. Since it is present now, the i3bar/JSON parser has to be changed accordingly (maybe like [2] but this is just a quick hack).\n[1] https://github.com/NilsBrause/sway/commit/e8b222a4e8fbf9e630b1c92a47d5f25dc8b829bf\n[2] https://github.com/NilsBrause/sway/commit/e74c07ad0450c319109cf1cfd17e0d3c5317ee3e\n. Since sway has fractional scaling, you could even make the scaling factor a function of the PPI, e.g. scale=ppi/100. That way, everything would have consistent physical dimensions on every display. . Okay. Does fractional scaling have any downsides in sway?. I see. In that case, I'd say about 200 ppi. Also scale=3 for 300 ppi and so on.. To fix the second last one, there needs to be a json_object_put(results); before the return true; at the end of i3bar_parse_json() in swaybar/i3bar.c.. Before dropping wl_shell, its stable successor xdg_wm_base should be supported first. As far as I can see, this is not the case yet. There is only support for the unstable zxdg_shell_v6:\n% ./dump\n* Global interface wl_drm (name 1 version 2)\n* Global interface wl_shm (name 2 version 1)\n* Global interface wl_compositor (name 3 version 4)\n* Global interface wl_subcompositor (name 4 version 1)\n* Global interface wl_data_device_manager (name 5 version 3)\n* Global interface orbital_screenshooter (name 6 version 1)\n* Global interface gamma_control_manager (name 7 version 1)\n* Global interface gtk_primary_selection_device_manager (name 8 version 1)\n* Global interface zxdg_output_manager_v1 (name 9 version 1)\n* Global interface zwlr_layer_shell_v1 (name 10 version 1)\n* Global interface zxdg_shell_v6 (name 11 version 1)\n* Global interface wl_shell (name 12 version 1)\n* Global interface org_kde_kwin_server_decoration_manager (name 13 version 1)\n* Global interface zwp_linux_dmabuf_v1 (name 14 version 3)\n* Global interface wl_seat (name 15 version 6)\n* Global interface zwlr_input_inhibit_manager_v1 (name 16 version 1)\n* Global interface wl_output (name 17 version 3). @SirCmpwn Please stay professional and stop insulting people. :). ",
    "Zubnix": "the one I cloned from github 1h ago :)\n(Be advised that I suspect the flipped_90 & flipped_270 cases to be bugged in weston & weston-fullsccreen test client). master. ",
    "atomnuker": "sway config: https://0x0.st/su4a.txt\ni3status config: https://0x0.st/su4B.conf. Yep, that looks about right. If you disable everything except the clock in the i3status config you should see the bar height decrease by quite a bit.. Thanks, that fixed it. Figured it would have something to do with scale.. fullscreen flipping is still not synchronized (e.g. it can tear), right? This ought to be added.\nAlso fullscreen mode doesn't yet stop the frame callback for all invisible surfaces below.. 4 hours in, resident memory hasn't changed a kb. I think all per-frame leakage has disappeared.. Why? It's not a lot of code and there are still users, and its in the baseline protocol.. The thing is its part of the base protocol. Its usually the first thing implemented by someone who just wants to show something on the screen and doesn't know any better. And usually people only go for xdg if they need more features and because they haven't heard of wl_shell being deprecated (I haven't heard of that either, and indeed the headers mention nothing).\nI'd say its still too early to tell whether its really been phased completely out. It was the only stable protocol up to until barely December.. wayland-scanner printing warnings matters for nought if distributions never ship wayland.xml but only preprocessed wayland headers. Furthermore you can't actually remove it from the protocol because it'll likely break a ton of programs.. Its alright, its just very barebones, gives you nothing useful and doesn't integrate well with any shell.. Completely breaks scaling.. Works perfectly, can't find anything that breaks (which isn't already broken by the lack of atomic layout updating, like mpv randomly losing the frame callback when resizing).. Works fine, just as well as zxdg_v6. Tested mpv, gedit and gnome-terminal.. debug.log. I already reported a bug 2 days ago: #1972 \nIts a bug in sway/wlroots, not mpv. mpv will resize the window and rerun the whole code to figure out what dimensions it needs to fit in, and for that it needs an xdg resize event.. Fix submitted to mpv, please close this.. Is it? With my fix in mpv it works fine. It was a misbehaving client after all.. Setting each window as maximized to fix a very minor issue is way more evil to everyone than just asking people to ignore the few pixels until support for a protocol is implemented. Clients can't resize themselves if they're maximized.. Works well, haven't found faults yet. One thing is that when toggling fullscreen any clients using the layer shell don't get damaged until they flip, but I'm guessing this would be fixed by proper layer shell client management (which would fix other bugs too probably, such as the damage from layer shell clients not affecting fullscreen clients).. Actually I can crash it easily. Create 2 windows, make either of them stacking, create a few tabs in the stacking container and then close all of them one by one. Closing the last one will crash the compositor.. Running mpv on one workspace and quickly opening and closing another mpv instance on the same workspace crashes the compositor. Works with any video and works even if mpv hasn't had a chance to open a window yet.. Leaving mpv in fullscreen mode to quit at the end of a file crashes the compositor.\nCan't reproduce consistently.. Works fine, and looks fine code-wise, but I can't seem to find any difference before and after with the wip damage debug PR.. Been using for 3 days now, no issues to report, should be good to push?. Breaks Firefox downloads (clicking on links does nothing). It does work correctly for save windows though.. This doesn't lower quality of life. Wayland clients must be able to handle not receiving a frame callback and still function perfectly when they do. No liberties taken here.. So leave a setting for it. The whole purpose of a lockscreen is to hide what's behind it. If users want to do that, leave a setting.\nWe decided to leave a setting for exactly the same reason to allow for direct fullscreen scanout as well, since that has the exact same issue as here where you can't render any layers behind.. That's the whole point of the line - to disable borders for floating views.. That's the whole point of the line - to disable borders for floating views.. What's wrong with leaving the call in view_init_floating()?. What's wrong with leaving the call in view_init_floating()?. That's okay then.. That's okay then.. Tested, works. Is there any way to only have borders on floating windows?. Tested, works. Is there any way to only have borders on floating windows?. Tested, works perfectly.. Tested, works perfectly.. There has been a regression and this happens again.. Just perf top, but mostly looked at htop.\nThe PR as-is does fix the issue, now mpv spends as much time as it needs to decode the audio and sway's CPU use is the same as in idle with just htop open (0.0% - 1.3%).. Just perf top, but mostly looked at htop.\nThe PR as-is does fix the issue, now mpv spends as much time as it needs to decode the audio and sway's CPU use is the same as in idle with just htop open (0.0% - 1.3%).. They don't because I wanted the simplest possible version to replicate.\nI'm using no borders at all, that's maybe related?. They don't because I wanted the simplest possible version to replicate.\nI'm using no borders at all, that's maybe related?. I think that's wrong, I preferred the default behavior - to open one terminal, make it tabbed, and then open new tabs as I need.\nI'd agree to make it a setting, but forcing this on users isn't nice.. I think that's wrong, I preferred the default behavior - to open one terminal, make it tabbed, and then open new tabs as I need.\nI'd agree to make it a setting, but forcing this on users isn't nice.. I agree, just filter out interlaced modes until someone complains. I've been doing that for months and haven't encountered problems not getting a good mode on any displays.. I agree, just filter out interlaced modes until someone complains. I've been doing that for months and haven't encountered problems not getting a good mode on any displays.. Works fine.. Works fine.. I disagree, make it an option.. What do you mean its not frame perfect?. That's kind of a big issue. Would fixing it take a lot of work?. We can't use else in the render_floating_container function because that will draw a top border. The 2 functions can't be the same, they do different things, if they did the same thing then there would be a single function to do so!. ",
    "snaggen": "I assume you closed this, due to some commit. It might be nice to reference this issue in the commit, or just mention it when closing. Nice to see this handled so fast though.... will pull and test. . Have updated this to use wlr_output_enable for DPMS, which means no modifications are needed in wlroots. Should have fixed all tabs vs spaces now.... Diff against master and grep for 2 spaces... fix! Next time I code in vim , I will make sure to set it to noet.. I must say that I'm a little split myself about having it in the compositor vs split out, having it in the compositor would make it work out of the box and it feels like it would fit there, as it is core functionality. But on the other hand, having it split out creates a clean separation and adds less clutter in the compositor code, as a compositor really should focus on compositing. In the end, I think both ways are ok, and went with the daemon version due to being preferred by the lead dev (he should have better insight in to the design of the project). \nAlso, about it feeling a little weird having to do exec swayidle in the sway config, this is how many other DE:s are doing this. Gnome have gnome-session starting the power-manager and other stuff. So this is really more a result of not having a sway-session, so that we need to do our own session manually by adding exec to the config. . I have another pullrequest on my way, implementing this directly in the compositor. So wait with this, and then we can see which we prefer. . Ok, so I have created https://github.com/swaywm/sway/pull/1831 and I actually think that pull request is the preferred solution... but I'm not a manintainer, so it is your call. . Ported over the sleep handling and inhibiting from the other version to the daemon. Added a simple file signaling mechanism to swaylock to be able to determine if we have an active lockscreen.. Not a good idea to do what?. So you mean that this should be moved in to the logind backend? . Ok, I didn't read that as a firm decision but as part of a discussion... but it sounds good so.... After writing two versions that a functionally equivalent, it seems that the \"in compositor\" are not able to aquire the lock for some reason. Of course, we could spend more time digging in to the internals of systemd and dbus, but I really starting to lean towards that these kind of things shouldn't be inside the compositor. \nWhat all this is about is policy, and policy is better handled outside the compositor. With my latest changes to this daemon version I think I have handle most problems related to having it as a daemon. \n The daemon is automatically started\n Configuration is handled as normal configuration\n Swayidle is a totally unprivileged daemon, requesting the compositor to do the privileged tasks. \n The lock signaling file mechanism should allow to run multiple sway sessions in parallell, since it uses the wayland socket id in the filename. \nI consider this ready, so please review this and consider merging it. . Have a link to the style guide? \nThink I have adressed most other things, like the eventloop, letting compositor find the lock, let already_inhibited handle multiple lockscreens. Removed the hardcoded autostart, just adding it to the default config, removed the idle/lock_timeout and adding a man-page. . Focusing on moving the systemd parts to the eventloop I forgot the other parts... so this is currently most likely not working I will fix this and go over the style (if I find the style guide) later.. Ok, it seems I need some assistance from the people who actually know wayland here.... \nFor the event loop i used wl_event_loop_create() to create an event loop, and run that with a\n```\nwhile (wl_event_loop_dispatch(state.event_loop, 0) != -1) {\n; //Intentionally left blank;\n}\nNow I need to hook up the wl_display_dispatch to that loop, and my assumption was that I should do something like\nwl_event_loop_add_fd(state.event_loop, wl_display_get_fd(state.display),\n            WL_EVENT_READABLE, display_event, NULL);\n``\nand in the function display_event callwl_display_dispatch(state.display);`\nHowever, this doesn't seem to work... so Im a little lost here... so any input would be appreciated. . Ok, I'll try that.. Now it is working again, I also did some minor clean up and looked over the code to fix obvious style issues. . I added the possibility to run arbitrary commands on idle, I support forking and executing commands in a shell, and sending commands to sway. However, to keep the \"just works\" part, it will by default setup a dpms and lock listener, you can control the timeout of these using the -i and -l (as before). Setting the to 0 will disable them. If you want to disable them and set them up yourself, you can run:\n\nswayidle -i 0 -l 0 timeout 600 command \"output * dpms off\" resume command \"output * dpms on\" timeout 300 command \"lock\". Why? Why is it bad that things works, without people need to learn every knob in every daemon to get a sane behaviour? I have added the possibility to disable it all, for the people willing to learn this... . However, the systemd sleep lock is not possible to setup by commandline, since that includes checking and releasing the lock. You can control that by specifying -x on the command line to disable it. . I guess \"Because I said so\" is a reason as goo as any :) \nI'll fix this later today. I'll just remove the default, but keep the -i -l options as convenience options. \nIf nothing is specified, no timers are created, so I'll make swayidle just exit then. . I haven't found the style guide and I haven't gotten a link either... . Have look at the style guilde and reviewed the code. . The issue of detecting the lockscreen is not connected with the idle timers at all. It is all about when I get the prepare sleep from systemd on dbus, which will happen regardles of if the timers are prevented from sending things when inhibit is active. . Yes, but then I need to know how to verify that that unknown command have raised the lock screen, so I can release the sleep lock. Hence my request for assistance with a generic version of the IPC_IS_LOCKSCREEN_ACTIVE call. . Well, just waiting a second and hoping for the best is not really a good design choise ... especially for a security related function.. But if that is your preferred solution.... I think this is getting close to what you have outlined... No ipc, only exec things on idle/resume. . Looked through the git diff upstream/master output and it seems that it only contains the things needed. . Rebase done. . Updated the spelling pointed out... thanks for the review, not native english speaker, so its nice to get help with this. . Updated the manpage, removed the comment about the default behaviour. Also, removed the socket options, since that was removed. Updated the spelling and wording in the manpage. Also updated the branch against latest master and rebased, for easy merging. . I noticed that this pull request haven't been merged yet, which I assume is due to much work and little time... but, I also want to make sure I haven't missed anything, so you are waiting for me to do something...  since I live under the impression that I have fixed all the requested changes, and that this is ready for merge. . No, problem... just worried that you were waiting for me, without me realizing it... . I thought it would be nice to have convenience options for the most common use cases. But, I'll remove them if you don't like it.. Rebased against master... going to sleep now. Let me know if there is more work needed. . Thanks for the help with the manpage, it looks great! I have updated swayidle to remove the redundant exec command, as in the manpage. I also noticed that one extra exec was missed in the default config for the before-sleep command, so I fixed that also. . Realized I had missed some review comments above... but now I have fixed all issues mentioned, so this should be ready to merge. . Ok, have fixed these last comments, and have rebased against master resolving the scd conflicts... so now it should be merge:able again. . Hmmm... seems I don't have scdoc installed, and that is probably why the build succeeds anyway... . Ok, I fixed the scdoc comments above, and the checks passes... so can you please see if the sayidle manpage looks ok now? I fail to find a scdoc package for fedora.... seems I have lost my googling mojo. . Ok, I fixed the scdoc comments above, and the checks passes... so can you please see if the sayidle manpage looks ok now? I fail to find a scdoc package for fedora.... seems I have lost my googling mojo. . built scdoc from source and were able to test the scd version of the man page. Fixed a minor issue and rebased to squash the small fixes. . built scdoc from source and were able to test the scd version of the man page. Fixed a minor issue and rebased to squash the small fixes. . Sorry for this unexpected hassle, due to me lacking scdoc... but now it should be ok again and ready to merge. . Sorry for this unexpected hassle, due to me lacking scdoc... but now it should be ok again and ready to merge. . Do systemd have a before suspend event? Aren't you supposed to use a lock service \n/etc/systemd/system/lock.service with systemd?\n\nAs described by\nhttps://unix.stackexchange.com/questions/81692/suspend-and-lock-screen-on-closing-lid-in-arch-systemd\nMaybe swaylock should install this by default, and then have a check to just silently do nothing if not run in a sway environment. \nIf there is an event, you could send me a link and I can take a look. However, as @SirCmpwn points out, that fits better with a daemon. . Do systemd have a before suspend event? Aren't you supposed to use a lock service \n/etc/systemd/system/lock.service with systemd?\nAs described by\nhttps://unix.stackexchange.com/questions/81692/suspend-and-lock-screen-on-closing-lid-in-arch-systemd\nMaybe swaylock should install this by default, and then have a check to just silently do nothing if not run in a sway environment. \nIf there is an event, you could send me a link and I can take a look. However, as @SirCmpwn points out, that fits better with a daemon. . After looking in to this, wlroots already listens to a bunch of logind signals in its logind session code. \nwlroots/backend/session/logind.c\nSo maybe the PrepareForSleep should best be handled within that session code somehow since it is tied to logind. Anyway, it feels it is getting a little out of scope for this kind of pull request.. After looking in to this, wlroots already listens to a bunch of logind signals in its logind session code. \nwlroots/backend/session/logind.c\nSo maybe the PrepareForSleep should best be handled within that session code somehow since it is tied to logind. Anyway, it feels it is getting a little out of scope for this kind of pull request.. On a second look, it wasn't that hard to add it, since we already hade the dbus eventloop up and running due to the logind integration. . On a second look, it wasn't that hard to add it, since we already hade the dbus eventloop up and running due to the logind integration. . I added sleep inhibiting just for completeness, and the systemd things can be moved out to a daemon, but since we already have the same kind of things running already in the logind code I don't see why it would be so terrible to have it in the idle code in the compositor. It is inside ifdefs.\nPractical problems I see with the daemon version is (besides the security issues raised earlier): \n Determine if lockscreen is running would need some new IPC protocol, or is it possible to get that as an unpriviliged client? \n Configuration needs to be synced, for the daemon and key-binding invocation of a lock command to be the same. A user would expect the invocation of a lock screen to have the same settings regardless on how it it launched.\n* Needs user setup to work. I added sleep inhibiting just for completeness, and the systemd things can be moved out to a daemon, but since we already have the same kind of things running already in the logind code I don't see why it would be so terrible to have it in the idle code in the compositor. It is inside ifdefs.\nPractical problems I see with the daemon version is (besides the security issues raised earlier): \n Determine if lockscreen is running would need some new IPC protocol, or is it possible to get that as an unpriviliged client? \n Configuration needs to be synced, for the daemon and key-binding invocation of a lock command to be the same. A user would expect the invocation of a lock screen to have the same settings regardless on how it it launched.\n* Needs user setup to work. But go with which ever version you like and fits in to the sway design best, if you choose to go with https://github.com/swaywm/sway/pull/1824 I suggest to merge that as is feature wise, then we can add lockscreen detection IPC and systemd suspend stuff later. . But go with which ever version you like and fits in to the sway design best, if you choose to go with https://github.com/swaywm/sway/pull/1824 I suggest to merge that as is feature wise, then we can add lockscreen detection IPC and systemd suspend stuff later. . Ok, I have moved the systemd related parts to the logind backend, so please have a look at how you think the interface to this is. Also, please test this and see if the inhibit part works as expected. I tend to get error on the Inhibit dbus call, seeing \"Failed to send Inhibit signal: Operation now in progress\" in the logs. Is the wayland eventloop taking to long, so that the prepare for sleep signal comes to late for an inhibit to be made? It would be good if someone with deeper knowledge about this could take a look. \nAlso, a second opinion on the have_lock() function, currently it is a kind of brute force approach to this, is there a more efficient and simpel way to find the lockscreen surface?. Ok, I have moved the systemd related parts to the logind backend, so please have a look at how you think the interface to this is. Also, please test this and see if the inhibit part works as expected. I tend to get error on the Inhibit dbus call, seeing \"Failed to send Inhibit signal: Operation now in progress\" in the logs. Is the wayland eventloop taking to long, so that the prepare for sleep signal comes to late for an inhibit to be made? It would be good if someone with deeper knowledge about this could take a look. \nAlso, a second opinion on the have_lock() function, currently it is a kind of brute force approach to this, is there a more efficient and simpel way to find the lockscreen surface?. After some more investigating by running the swayidle daemon with its more agressive dbus loop in parallel, I have inhibit issues on both implementations. So this is probably not due to the event_loop. However, I'm running a mid 2015 Mac, which have notoriously bad Linux support, so suspend resume is not really working as it should on my laptop (with a suspend/resume cycle that takes about a minute). So my issues may very well be caused by this. So test this and see how it works, and please give feedback on the interfaces and have_lock function. . After some more investigating by running the swayidle daemon with its more agressive dbus loop in parallel, I have inhibit issues on both implementations. So this is probably not due to the event_loop. However, I'm running a mid 2015 Mac, which have notoriously bad Linux support, so suspend resume is not really working as it should on my laptop (with a suspend/resume cycle that takes about a minute). So my issues may very well be caused by this. So test this and see how it works, and please give feedback on the interfaces and have_lock function. . Completely misread the docs... must update this to work as you say and using the block lock. Saw at the end of the document, it was stated explicitly to use block for lockscreen... my bad. . Completely misread the docs... must update this to work as you say and using the block lock. Saw at the end of the document, it was stated explicitly to use block for lockscreen... my bad. . Ok, new version available with block and that only inhibits when going down. Using timers to check for lock... so this should be more correct according to the docs. Please have a look. . Ok, new version available with block and that only inhibits when going down. Using timers to check for lock... so this should be more correct according to the docs. Please have a look. . Thanks for the help testing and solving this. Will try to find some time to fix this during the weekend.. Thanks for the help testing and solving this. Will try to find some time to fix this during the weekend.. That is really weird... also if you look at the debug output you will see that we actually get a lock file descriptor back even in the compositor case so it really looks like everything is find and dandy, but then it is still not listed in systemd-inhibit. So yes, as you say, that probably settles the whole in compositor vs daemon discussion!\nAlso, I have been thinking a bit about this. And this is mostly policy, and this kind of policy should not be handled by a compositor. Also, when you answering the question \"what is a compositor?\" you really do not think about polling systemd for sleep event. . That is really weird... also if you look at the debug output you will see that we actually get a lock file descriptor back even in the compositor case so it really looks like everything is find and dandy, but then it is still not listed in systemd-inhibit. So yes, as you say, that probably settles the whole in compositor vs daemon discussion!\nAlso, I have been thinking a bit about this. And this is mostly policy, and this kind of policy should not be handled by a compositor. Also, when you answering the question \"what is a compositor?\" you really do not think about polling systemd for sleep event. . Ok, will do in a few hours.\n. Ok, will do in a few hours.\n. Rebased!. Rebased!. Hmmm.. yes, that was not meant to slip in... . Well, it makes no sense to run mutilpe lockscreens in paralell, and it will fail anyway... so I thought it would be nice to handle this properly since this will be triggered if user starts swaylock and then swayidle starts another. . If you remove this, the only difference will be that you will get\nzwlr_input_inhibit_manager_v1@8: error 0: this compositor already has input inhibited\nSince the scenario where two swaylock might be run at the same time, will be a quite common one with the swayidle trying to run swaylock in the background. I thought it would be better to handle this in a more controlled fashion. \nCan you please argue, the pros of having swaylock exit by\nzwlr_input_inhibit_manager_v1@8: error 0: this compositor already has input inhibited. There is actually WLR_MODIFIER_CAPS in wlr/types/wlr_keyboard.h. However, including that caused some errors due to deprecation... And besides that one, I didn't find an obvious one... . Thanks for the pointer, I have fixed this.. Where should it be done do you mean? It is used the row right below, to construct the sd_bus_add_match parameter, following the style used in logind.c in wlroots. . why? This, the daemon version, does all its lock handling by it self... so it really need to aquire the sleep lock. . Why? If the user starts a lock screen, and leaves the sceen, then swayidle will try to start a lockscreen and get an error. I prefer handling known race scenarious and exit cleanly. I will update this to include the WAYLAND_DISPLAY in the path, so you can run lockscreens in paralell sway instances. . One of the conserns about having this in a daemon would be that it is weird that the user would have do do config to get this kind of basic functionality. And I agree. This kind of things should be run as default, with a possible option to opt out. \nAnd there are actually a few gains of running it as a daemon even if it is always started. \n It runs in parallel, no blocking of the compositor. I accidentally added a busy wait loop in my lockscreen check, and froze the compositor for a second. And even with no stupid misstake like that, you are still performing non-compositing work in the compositing mainloop. \n Crash safety, even if a bug appears in the idle code, or a third party lib like sd_bus causing  a crash, you still only crash the idle manager and not the compositor. \n* Code separation, non-compositing related code are separated out to its own daemon. \nHowever, I understand your point, so I'll add a check and if both idle and lock timeouts are zero, no daemon is started. That way you get an opt out.. Adding opt out if both are zero. having the user to setup a swayidle_command for basic functionallity makes no sense. This functionality should be there by default, if someone wants to opt out, the can do that by setting them to zero. . Why? This is in its own thread, so if it wasn't sleeping it would still not do anything. This is for all practical reasons completely equivalent of having a timer on a eventloop, since this thread doesn't have any other thing to do. The difference in this case would be absolutely zero. . sd_bus_wait will block waiting for the next request, so it felt easier to just have a simple thread than to start up a full eventloop just for this... . That is to know when the lockscreen have been raised, so I can release the sleep lock. . So, there shoud not be any dpms/lockscreen handling by default?. Well I understand that... but I really think that it would be nice for the user to have a consistent way to run the lockscreen, so it looks the same everytime. And for the systemd handling that executes the lockscreen, it is impossible to know how the user wants it. So it makes sense have a sway command for that, so that it is possible to just let sway lock the screen and get the same result everytime. This also have the benefit that the user can bind a key to the lock command and get the same lockscreen as swayidle uses for the systemd part. . Well, since the sleep lock part, is nothing we get from the user (since that will make it impossible to know how to verify it is ok to release the lock), it is not possible to get this from the user. This is the reason I added the lock and swaylock_command. . Is there a problem having a lock and swaylock_command? Or is there a problem with swayidle doing ipc? I'm not really sure I understand the issues caused by this?. The sleep lock prevents the laptop from going to sleep until it is release. We use this to ensure that the lockscreen is up before the system is going to sleep. If we do not release the lock, the system will have a delay on about 5 seconds before going to sleep. \nIf we do not use a sleep lock, the system may go to sleep before the lock is up. This will cause any person that opens the laptop to see the content on the screen on resume, before the lockscreen is up. . I assume that if you can help me make the IPC_IS_LOCKSCREEN_ACTIVE more generic (currently it looks at the name of the lockscreen surface), I guess we could just let the -x parameter take the lock command to use. . Done. Its probably better, since my native tongue is Swedish... . done. done. That is done at: \n    if (!should_run) {\n        wlr_log(L_INFO, \"No command specified! Nothing to do, will exit\");\n        sway_terminate(0);\n    }\n. This is fixed. done. Done. Done. Done. Well, I guess it isn't striclty needed... but I think it is good to handle SIGINT and SIGTERM when you have a long running process, that handles shutdown in a controlled way.. Done.. Well, it destroys the eventloop and disconnects from the display... so it is not just exit 0... not sure how important it is to destroy the eventloop nicely and disconnect from the display... but, I don't see any reason not to do it.. done. Done. Done. Done. Done. asciidoc file removed.... ",
    "sellleon": "I don't think this is related to your problem, but you shouldn't put the , (comma) before nodeadkeys and after grp:alt_shift_toogle, as you're only using one default keyboard layout.\nBut nonetheless your script produces the correct result for me. Note that I use sway-wlroots-git 1.0.alpha.1.r46.g57851704-4 from AUR.. ",
    "gabm": "@SirCmpwn I looked into the code of sway and wlroots here. It seems rootston doesn't show this off atm. \nAs far as I understood sway already tells wlroots that it will do the server side decorations by default. But where in sway can we attach the titlebars and borders to the window? Any idea?. Unfortunately I have the same issue on alpha 5... Interestingly it scales fine on my external screen out of the box. When I unplug that and swtich to my interal scren (that has higher DPI) then I see everything very large... weston-info says:\ninterface: 'wl_output', version: 3, name: 22\n        x: 0, y: 0, scale: 1,\n        physical_width: 309 mm, physical_height: 174 mm,\n        make: 'Unknown', model: '0x046D',\n        subpixel_orientation: unknown, output_transform: normal,\n        mode:\n                width: 1920 px, height: 1080 px, refresh: 60.020 Hz,\n                flags: current\nThe dimensions should be about right I think... I calculated the DPI for my screen, which is 157. If I force this DPI  using the mentioned variable, then everything is way too large again.... ",
    "nearffxx": "I'm on 1.0-alpha.1-105-gb2402acc, but IIRC both version are affected.. ```\nrax            0x55d743001110   0x55d743001110\nrbx            0x55d742fdf560   0x55d742fdf560\nrcx            0x1c8    0x1c8\nrdx            0x7fff0ab5cbd0   0x7fff0ab5cbd0\nrsi            0x55d740dd62c8   0x55d740dd62c8\nrdi            0x55d742fdf560   0x55d742fdf560\nrbp            0x0  0x0\nrsp            0x7fff0ab5cc90   0x7fff0ab5cc90\nr8             0x20a    0x20a\nr9             0x2  0x2\nr10            0x7ff7e651ea30   0x7ff7e651ea30\nr11            0x7ff7e677daa0   0x7ff7e677daa0\nr12            0x0  0x0\nr13            0x55d742fb6c00   0x55d742fb6c00\nr14            0x55d742cada60   0x55d742cada60\nr15            0xffffffff   0xffffffff\nrip            0x55d740dc9703   0x55d740dc9703\neflags         0x10246  [ PF ZF IF RF ]\ncs             0x33 0x33\nss             0x2b 0x2b\nds             0x0  0x0\nes             0x0  0x0\nfs             0x0  0x0\ngs             0x0  0x0\n0  0x000055d740dc9703 in  ()\n1  0x000055d740dcab27 in  ()\n2  0x000055d740dc157e in  ()\n3  0x000055d740daf0c1 in  ()\n4  0x000055d740dbc3a6 in  ()\n5  0x000055d740dbc4e0 in  ()\n6  0x000055d740dbc968 in  ()\n7  0x00007ff7e6c195ce in  () at /usr/lib/libwlroots.so.0\n8  0x00007ff7e6c073b6 in wlr_keyboard_notify_key () at /usr/lib/libwlroots.so.0\n9  0x00007ff7e6bf4557 in  () at /usr/lib/libwlroots.so.0\n10 0x00007ff7e6bf368c in  () at /usr/lib/libwlroots.so.0\n11 0x00007ff7e6e479b2 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n12 0x00007ff7e6e4614c in wl_display_run () at /usr/lib/libwayland-server.so.0\n13 0x000055d740dad647 in  ()\n14 0x00007ff7e63ea06b in __libc_start_main () at /usr/lib/libc.so.6\n15 0x000055d740dad83a in  ()\n=> 0x55d740dc9703:  mov    rdi,QWORD PTR [rbp+0x60]\n   0x55d740dc9707:  mov    eax,DWORD PTR [rdi+0x4]\n   0x55d740dc970a:  test   eax,eax\n```\nrbp is null?\nIt seems symbols are stripped on sway, should I make a debug build?\n. even with bt it doesn't give additional informations about the current function. From what I understand, it must be caused by a heap overflow somewhere.\nI'm trying to debug it with valgrind.\n. it seems it was fixed by PR #2612 . ",
    "bpinto": "@vgribov I've noticed I use capitalized \"Termite\" class on my configuration file, could it be it?\nfor_window [class=\"Termite\"] border pixel 1\nRegarding assigning a workspace, I know Spotify had a configuration problem that wouldn't let assign work, so a workaround I've been using for spotify specifically was this:\nfor_window [class=\"Spotify\"] move to workspace 4\nI don't know if evolution has or not the same issue.. From what I've seen on the codebase, native wayland apps do not accept the class criteria, I think you have to use title or id.. I couldn't reproduce this problem with latest (commit) sway/wlroots and mpv 0.27.2.. The description didn't mention it was a wayland backend only problem, now that you've mentioned it, I'm running mpv with --opengl-backend=wayland\nv0.27.2: issue reproducible.\ngit(e7e06a4): issue not reproducible.. Just to add more information to this issue, the latest released version is 0.28.2 and it has this issue fixed.\nBoth gentoo and arch (and maybe other distros) are still on 0.27.2.. @martinetd :100: \nI am not a C programmer and I don't even know (yet) how to get information about leaks - I might try to work on these other leaks you referenced. It was a surprise to me that a method named json_object_put would do anything to free memory. :joy: \nI just noticed that code was there on a comment and felt I could do something other than ignore it by packaging that single-line patch into a PR. And here it is, after an indentation issue. :grimacing: . You are right, I had missed the errors on the journalctl when running without --verbose mode. But I have tried it again and I can see them now.. I think that is a bug on spotify, check this issue: https://github.com/i3/i3/issues/2060. In a single line commit I was able to get an issue... that's a new mark in my life :joy: \nFixed it, I have my vim configured to use spaces and not tabs. Got it to use a tab now.. ",
    "vgribov": "@bpinto no, I don't think so. Have tried the following in my config:\nfor_window [class=\"Termite\"] border pixel 1\n\nunfortunately, it doesn't make my Termite window having 1 pixel border without a title.\n    . ",
    "thebunnyrules": "I've had the same experience with for_window. It has no effect in 0.15.. Thanks, I'll keep that in mind for the future but title was actually the first thing I tried.. Nice! Is there something similar for reading selections?. I was able to get swaymsg -t get_cliboard TEXT\nto grab clipboard content. Is there anyway of getting selection content (in the style of xsel)?. xsel doesn't work on the wayland native windows (at least not in sway, for some reason it seems to work in gnome-shell wayland). . Yey!!! :+1:  That's great to know. . swaymsg -t get_cliboard TEXT \nI noticed that the above command would cut off after 578 characters in Sway 0.15. Is this by design or a bug ? If it's by design, where can I modify the limit in the source code? . Ok. I'll way for the 1.0 release. Thanks emersion.. Thanks alot. . Isn't icon support handled by the WM how can it not be Sway's business?. Seems strange to me but I don't really understand enough on how Nautilus or Sway works to comment. I'll ask them for help and see what they say. . ",
    "somdoron": "Also, when using xwayland app (chromium) in full screen context menu doesn't show up.. xss-lock can actually do this without systemd service.\nhttps://bitbucket.org/raymonad/xss-lock\nhttps://www.mankier.com/1/xss-lock. what about PrepareForSleep from logind dbus signal?\nhttps://www.freedesktop.org/wiki/Software/systemd/logind/. and this can also be a solution:\nhttps://www.freedesktop.org/wiki/Software/systemd/inhibit/. do you want to block the sleep until you sure swaylock is running?. Also maybe it should be an option. I tested it on my machine, works great! I never managed to have a good setup for locking my screen with i3 and this just works out of the box.\nfew comments:\n- Dependency to systemd is missing\n- Because you are not blocking the sleep operation, the swaylock is actually become active after the computer is awaken, so I have a glimpse of my desktop when awaken.. I actually ambivalent to the solution, however I like the configuration through sway config file. \nIf it can work like swaybar that will be nice (can be configured within sway configuration), but not a must.\nAlso one thing that I think will be easier to do with in the compositor is handling new outputs, like if I connect my laptop to a docking station, the new output should display the lock screen immediately,  without even a glimpse of my desktop. Same for new keyboard and mouse.. @snaggen you assume the prepare to sleep will be called multiple times, but from the docs it seems it will be called once for sleep and once for awake. Also from the docs the delay lock should be taken before the prepare for sleep, released when you are ready and retake after the system is awake.\nYou are currently using the block semantic, which I actually think is more accurate in this scenario. I think we should switch to using block. However you must close the fd or it will prevent the system from sleeping.. You might want to have a timer after the prepare for sleep, checking the if the lock is active and then release the lock.\nAlso prepare for sleep is being call twice, once before the sleep and once after, I think you are not checking that at the moment, so the lock screen will actually be invoked twice.\n. @snaggen looks good.\nFew thoughts regarding finding out if lock screen is already active:\n1. You can check if the input-inhibitor has been set.\n2. You can have a global mutex, derive his name from the session id or wayland display environment variable, and check if the mutex has been acquired/acquire it from swaylock. This solution might be too specific for swaylock, and I'm not sure it's the wayland way, but it will be simple.\n3. Extended the input-inhibitor protocol to lock-protocol, swaylock will send the lock message when needed. This can also help solve the problem of connecting new outputs while the lock screen is active. On lock mode, compositor might only draw lock screen surfaces, so worst case scenario new output will have black screen.. @snaggen I think I was wrong and actually the correct pattern is to use the delay inhibit.\nI tested the current code and swaylock is still shown only after the computer is awaken.\nI took a look at xss-lock and it is using delay lock.\nI think the correct workflow is:\n1. Take the delay lock when you register to prepare_for_sleep\n2. When prepare for sleep is called with true, run swaylock and activate timer\n3. On every timer interval check if lock screen is up, if so, release the lock and the timer. (You actually don't need to manage your own timeout or counter, as logind is already doing that, delay lock is not for good).\n4. When prepare for sleep is called with false (after the computer is awaken), retake the delay lock.\nxss-lock, taking lock when registering for prepare to sleep:\nhttps://bitbucket.org/raymonad/xss-lock/src/1e158fb20108058dbd62bd51d8e8c003c0a48717/src/xss-lock.c?at=master&fileviewer=file-view-default#xss-lock.c-282\nand the prepare for sleep implementation:\nhttps://bitbucket.org/raymonad/xss-lock/src/1e158fb20108058dbd62bd51d8e8c003c0a48717/src/xss-lock.c?at=master&fileviewer=file-view-default#xss-lock.c-339\n. I just tested it with the delay lock taken when registering to prepare for sleep and the swaylock is displayed before the computer is going to sleep.. @snaggen I tested both solutions, the in compositor and daemon. Surprisingly only the daemon solution is able to acquire the delay lock. I don't know why, but with the compositor solution the lock is not being acquired. You can see that by running systemd-inhibit after logging in to sway. Only with daemon solution you actually see the lock. Also only the daemon solution is able to lock the screen before the sleep. I have no clue why this is happening. I guess it is answering the question of daemon vs compositor.\nAlso I think the daemon solution might be better place to implement something like global mutex to know if the swaylock is actually running. . @NicholasAsimov I was able to fix it by setting the cursor size to 16 in .Xdefaults\nXcursor.size: 16. I can confirm that #2305 solved the issue for me. After further checks it is unrelated to the scale. XWayland cursor is always larger than wayland cursor. I was able to fix it by setting the cursor size in ~/.Xdefaults to 16.\nIt is also seems XWayland and wayland are not using the same cursor.. If I ran without any open apps it is crashes as well, with following error:\n2018-07-22 09:30:24 - [backend/drm/drm.c:218] Skipping pageflip on output 'DP-1'\n(EE) failed to read Wayland events: Broken pipe\n2018-07-22 09:30:24 - [common/ipc-client.c:68] Unable to receive IPC response. swaylock by the way doesn't report anything. how do I enable debugging symbols?. @SirCmpwn I'm an experienced programmer (managing few popular open source projects myself), probably can fix this myself and I want to contribute to sway.\nMy C experience is on Windows and not linux, so I don't know how to enable debug symbols, if you can point to the right direction that will help.\n. @martinetd thanks.\n@SirCmpwn @emersion I edited the issue and attached the stacktrace.. #2338. @RyanDwyer I took another approach, where if the focus of the seat is null I'm skipping the handling of node destroy.\nCan you review now?. I awaked my computer from sleep and connected to docking station at the same time (new keyboard/mouse).\nI assume it was a new seat without a container attached.\nI will try another version of the fix.. Make sense, swaylock was running as well.\nAnyway, I made another attempt to fix it. Please review.. @emersion acquiring the lock with in the compositor doesn't work. This is way the daemon solution.. ",
    "ssendev": "\n\nThe wallpaper should still be rendered in fullscreen for transparent applications.\n\nA setting was agreed on to toggle that.\n\nBut i can't seem to find it. Or was it just agreed on and not implemented?. ",
    "agx": "I had similar stuff within our compositor first and moved it into a separate process using idle, layer-shell and input-inhibitor protocols. Main reason was to keep all the policy decisions (what to do on which event) out of the compositor.. ",
    "mucamaca": "Is rerendering of background color really necessary?. Isn't the indicator just drawn over everything else? I only meant the static image/color in the background. I tried rendering it only once and it seems to work just fine.. I know. That is the issue I'm trying to fix. If the background is only drawn once, this issue is fixed and there is also a small performance gain. I'll open a pull request, so you can see the code. . I think all the indicators are the same size.. I see. I'll fix it with non-blending mode then. Thanks for the link.. Turns out this is a bad idea.. ",
    "zeGrandpa": "Hi, did 82423b8 solve this issue ?. Hi, did 82423b8 solve this issue ?. ",
    "den731": "Menu items can be pseudo \"clicked\" by hovering the mouse over item and pressing enter. Main menu item seems to be clickable, but not its subsequent menu entries.\nJust a tid-bit for others as a workaround. ",
    "eiz": "This was annoying me a bit so I traced it out and it arises when the xwayland integration in wlroots resets the input focus after an X client tries to change it: https://github.com/swaywm/wlroots/blob/51bfdd620e70c41e1a9fb4ce7831eddfb1bf893b/xwayland/xwm.c#L1192\nSteam's menu system seems to have some really odd focus behavior and when the compositor resets the input focus the menu disappears before handling the selection. Honestly not sure what the correct fix is.. Yeah, removing it fixes the issue. ev->mode is XCB_NOTIFY_MODE_NORMAL.\nAs for what happens in Weston, I get very odd behavior. The pointer tracking doesn't seem to work correctly -- the hover menus appear and disappear when the pointer is at the wrong location (there is an offset), and the items also don't work when selected. gnome-shell --wayland --nested works as expected, though.. I believe the relevant focus change is the one on line 1470.\nI am able to reproduce it using WLR_WL_OUTPUTS=2 and a nested session on the latest wlroots/sway master (pulled just now, commit 3b4cf3718b05d5ebd98d730abb742e82f8980287 in sway and e2c216a4b84803668a10351dc1d5d9d922ae5539 in wlroots).\nStep by step:\n\nIn host terminal, run WLR_WL_OUTPUTS=2 sway -c dev.config -d 2> dev.log\nIn nested session, start a urxvt in workspace 1\nIn urxvt run hello-wayland & and move its window to workspace 2\nIn urxvt start the test case\nMove the black window to workspace 2 and switch it to fullscreen\nSwitch focus back to urxvt and wait\n\nLogs from nested session: https://gist.github.com/eiz/3b14482ff5c464ca0555b1843d24b826 [edited, posted wrong log file]\nStack trace from nested session: https://gist.github.com/eiz/5484853b70b5232982c812c7f93904f2\nContents of dev.config: https://gist.github.com/eiz/37bf21d00b6dc12ee664f2502b643334. FWIW, I tried with terminator as the secondary window and it's not reproducing every time, but does happen. Sample logs: https://gist.github.com/eiz/b575890d46cb9432d9a928252a933904. ",
    "nbraud": "I'm not sure whether hardcoding /usr/lib/sway and secure_getenv(3) is appropriate; will sway ever support non-Linux or non-GLibC environments?. @Hummer12007 I made INSTLIBDIR configurable, so you can make it be /usr/libexec or /usr/local/libexec on systems which use libexec. Sure. @SirCmpwn The CI reports the build as failed, but has no build log  :/. @SirCmpwn @ascent12 @emersion Thanks for the feedback.  Can you confirm this was all handled?. OK, that's exciting since it didn't come up in local testing (OTOH, syncing that branch with my debian/patches files was wonky, so I might just have missed some commits in one branch or the other). Yes, I got confused while amending the patch for style, and didn't rebuild right before resubmitting.... Because LIBEXECDIR is /usr/lib (or /usr/libexec), and I didn't want to write join(LIBEXECDIR, 'sway') all over the place; there is a comment about it in the commit message.. Aaaaaaaa.  I removed the call to secure_getent(3) but forgot to remove that.. Arg, yes, this was lost during rebase  ;_;\n(I just checked, still had it in the .deb I built earlier :(). Corrected. Fair; I will do that in a bit  :). ",
    "mstoeckl": "\nLatency (using https://github.com/mstoeckl/latencytool ), determined using a small window, and 187 fps camera. Results include display switching, camera, and USB latency, and as such are only suitable for relative comparisons. Latency values get worse with increased system load.\n\n| Screen | GPU | Backend  | Compositor | Application | Latency |\n| ------------- | ------------- | ------------- | ------------- | ------------- |------------- |\n| 60Hz IPS QHD | HD5500+i915  |  X11/uxa | i3/none | latency_cv_qt  | 25 ms  |\n| 60Hz IPS QHD | HD5500+i915  |  X11/uxa | i3/none | latency_cv_xcb  | 24 ms  |\n| 60Hz IPS QHD | HD5500+i915 |  drm | kwin  | latency_cv_qt  | 45 ms  |\n| 60Hz IPS QHD | HD5500+i915 |  drm | weston  | latency_cv_qt  | 41 ms |\n| 60Hz IPS QHD | HD5500+i915 |  drm | weston  | latency_cv_xcb  | 41 ms |\n| 60Hz IPS QHD | HD5500+i915 |  wlroots/X11 | sway  | latency_cv_qt  | 43 ms |\n| 60Hz IPS QHD | HD5500+i915 |  wlroots/drm | sway  | latency_cv_qt  | 47 ms |\n| 60Hz IPS QHD | HD5500+i915 |  wlroots/drm | sway  | latency_cv_xcb  | 44 ms |\n| 60Hz IPS QHD | HD5500+i915 |  wlroots/drm | sway  | latency_cv_wayland  | 44 ms |\nNote: latencytool was written yesterday; possibly more efficient frontends are in progress. Tests may be confounded by the terminal printing stdout. Weston lags when unrelated Xwayland applications are resized.\nSecond update: Implementation of xcb and Wayland frontends. Note that the Qt frontend uses QPainter on each frame, whereas the xcb/Wayland frontends do no rendering whatsoever. Replaced '50ms' measurement with  wlroots/drm, sway, latency_cv_qt, with 47ms --it may be that DPI settings affect performance.. Yes, updated.. I wasn't aware that that runtime variable substitution was an explicit feature. As it is, I'll close this PR.. @RedSoxFan , runtime variable substitution (RVS), is, depending on your interpretation of what it is, broken to begin with -- was anyone using it?. You would need the following workaround to bypass double evaluation (and let us not forget unescaping, either)\nset $dsubvar $var\nset $var 2\nbindsym Ctrl+a set $dsubvar A\nbindsym Ctrl+b set $dsubvar B\nbindsym Ctrl+G exec echo $dsubvar\n\nSince I've recently worked with the area, I could fix the double-RVS effect (and/or make it compatible with this PR), were you to specify the behaviour you'd think reasonable.. OK, the following \"works\" (but produces an error message), as long as $var has not been set before,  but there still is the issue of double unescaping.\nbindsym Ctrl+a set $var A\nbindsym Ctrl+b set $var B\nbindsym Ctrl+G exec echo $var\nset $var 2\n\n. OK, so RVS does work (via config.c, line 761, the $$ approach just mentioned), although double unescaping is still an issue.\n(E.g. bindsym Ctrl+k exec echo \\\\\\\" \\\\\\\\ \\\\\\\"). . > Thank you for putting in the effort, but I'm not really fond of this change.\nI have more experience with i3, and their design opinions re simplicity[0]. May I ask about your general configuration philosophy, and recommend that it be made more prominent?\n\nIt was working as intended before.\n\nThis change does ensure that nested commands only require one level of escaping, just like top-level \ncommands. The existing behavior, in which double-escaping is required, is counterintuitive.\n[0] provided at https://i3wm.org/index.html. i3 has another feature: keybindings can be restricted to a single layout with the Group1, Group2, Group3, Group4 modifiers. See https://github.com/i3/i3/pull/1857 and the discussion in https://github.com/i3/i3/issues/1835.. I have the same issue. One possible cause: swaywm/wlroots@b6b1bf9 modifies wlr_box_intersection,\nbut this is not corrected for in 788b715776b. (The type signature change of wlr_box_intersection does not produce any errors.). Changing the following lines seems to resolve the issue.\ndiff --git a/sway/desktop/output.c b/sway/desktop/output.c\nindex ed504bdf..79ad7faa 100644\n--- a/sway/desktop/output.c\n+++ b/sway/desktop/output.c\n   @@ -108,7 +108,7 @@ static bool get_surface_box(struct surface_iterator_data *data,\n           };\n\n        struct wlr_box intersection;\n-       return wlr_box_intersection(&output_box, &rotated_box, &intersection);\n+       return wlr_box_intersection(&intersection, &output_box, &rotated_box);\n }\n\n static void output_for_each_surface_iterator(struct wlr_surface *surface,\ndiff --git a/sway/desktop/render.c b/sway/desktop/render.c\nindex 1260d85a..14881e96 100644\n--- a/sway/desktop/render.c\n+++ b/sway/desktop/render.c\n@@ -261,7 +261,7 @@ static void render_saved_view(struct sway_view *view,\n        };\n\n        struct wlr_box intersection;\n-       bool intersects = wlr_box_intersection(&output_box, &box, &intersection);\n+       bool intersects = wlr_box_intersection(&intersection, &output_box, &box);\n        if (!intersects) {\n                return;\n        }\ndiff --git a/sway/tree/container.c b/sway/tree/container.c\nindex b106e0d9..0a96088e 100644\n--- a/sway/tree/container.c\n+++ b/sway/tree/container.c\n@@ -979,7 +979,7 @@ void container_discover_outputs(struct sway_container *con) {\n                output_get_box(output, &output_box);\n                struct wlr_box intersection;\n                bool intersects =\n-                       wlr_box_intersection(&con_box, &output_box, &intersection);\n+                       wlr_box_intersection(&intersection, &con_box, &output_box);\n                int index = list_find(con->outputs, output);\n\n                if (intersects && index == -1) {\n\n. Just passing by; two comments:\n In this and following PRs, get_mouse_* are called with nonnull error, in which case the branches testing if (error) are unnecessary.\n The code does not account for memory allocation failure, rare as it may be. In general, one should not signal errors using heap allocated values, lest strdup or malloc return NULL, and the caller falsely assume success. One workaround is a more cumbersome signature, such as bool parse_x(const char* str, uint32_t* ret, char** err_msg). \n. 0001-proof-of-concept-for-rotating-swaybar.patch.txt\nTLDR: Adding left/right bar anchor options is easy. It's straightforward to render swaybar rotated 90 degrees CCW, thanks to cairo_transform; the main coordinate wrangling that needs to be done is to replace width and height  (in the screen frame) with length and breadth (in the transformed frame).\nThe patch implements the bare minimum. Fixing hotspots/mouse interaction requires a bit of additional logic, while optionally counterrotating text to be horizontal probably requires a lot more work.\nSadly, I don't have the time to bring this patch to completion, but it may form a good starting point.. The second and significantly larger commit removes the unused input argument from cmd_results_new.\nI also replaced static const char *foo = \"blah\" with static const char foo[] = \"blah\" on encounter, but beyond that (and minor format string editing), I avoided making changes to the code.\nOccasionally CMD_INVALID (\"Unknown command or parser error\") is used where CMD_FAILURE (\"The command resulted in an error\") should be. Continuation lines are often two tabs instead of one.. ~I am currently rebasing, although it may take up to an hour since the change to cmd_results_new does not always introduce compile errors.~ Done with rebase, see changes.txt. Looking with grep -rnC1 cmd_results_new revealed places I had missed in   client.c and exec_always.c, now fixed.\n. Oops, confused 'ours' with 'theirs' during rebase conflict resolution. Sorry about that.\nMost of the formatting requests are consistent with 4-spaces per tab and a maximum line length of 80. As this deviates from kernel-style (8-spaces per tab), it would be helpful to have this mentioned in CONTRIBUTING.md.\n~Rebasing again...~ Done, now based off 64ef9366733d6d33.. Superseded by #3485.. My usual commit email has been linked. (Edit: just ~2 minutes ago, that is.). I wrote that TODO. A workaround with very recent GCC (and, possibly in the future, clang) is to use -fmacro-prefix-map to perform the path stripping. This makes for reasonably simple patches (repro_sway.patch.txt, repro_wlroots.patch.txt), but, since I sometimes use computers with gcc 4.5.x, does not solve the problem as cleanly as would a build system passing in canonical names to the preprocessor.. I tried: \n// strip prefix from __FILE__, leaving the path relative to the project root\n#define _SWAY_FILENAME (__FILE__ + SWAY_SRC_DIR_LENGTH)\n\n#define sway_log(verb, fmt, ...) \\\n    _sway_log(verb, \"[%s:%d] \" fmt, _SWAY_FILENAME, __LINE__, ##__VA_ARGS__)\n\n#define sway_vlog(verb, fmt, args) \\\n    _sway_vlog(verb, \"[%s:%d] \" fmt, _SWAY_FILENAME, __LINE__, args)\n\n#define sway_log_errno(verb, fmt, ...) \\\n    sway_log(verb, fmt \": %s\", ##__VA_ARGS__, strerror(errno))\n\n#define sway_abort(FMT, ...) \\\n    _sway_abort(\"[%s:%d] \" FMT, _SWAY_FILENAME, __LINE__, ##__VA_ARGS__)\n\n#define sway_assert(COND, FMT, ...) \\\n    _sway_assert(COND, \"[%s:%d] %s:\" FMT, _SWAY_FILENAME, __LINE__, __PRETTY_FUNCTION__, ##__VA_ARGS__)\n\nin include/log.h, and \nlength_finder = 'import os.path; print(len(os.path.join(os.path.relpath(\\'@0@\\', \\'@1@\\'),\\'\\')))'\nrel_src_dir_length = run_command('python3', '-c',\n    length_finder.format(meson.source_root(), meson.build_root())).stdout().strip()\n\nfollowed by\n        '-DSWAY_SRC_DIR_LENGTH=@0@'.format(rel_src_dir_length),\n\nin meson.build. \nTesting with strings, the above trick doesn't work: GCC doesn't optimize the string constant prefixes away. The change still improves over the current situation, as it lets us drop _sway_strip_path and its expensive call to strstr.. ~85.~ 84.. Fixing anyway -- the 80 char limit is soft, and the line originally was 103.. Assuming four spaces per tab, this should not be a single line; I instead combined lines 55-56 -> 54.. To quote the man page:\n\nOn success, getline() and getdelim() return the number of characters read, including the delimiter character, but not including the terminating null byte.\n\nSo, if successful, line[nret] is \\0, and if the line ended with a newline, rather than EOF, line[nret -1] is \\n. This function is not used anywhere?. Modify .git/info/exclude ? It's a repository specific .gitignore.. Done.. I'm now using SWAY_LOG_IMPORTANCE_LAST, similar to WLR_LOG_IMPORTANCE_LAST.. Thank you for catching that. As sway and wlroots are only used together by the main sway executable, not by swaymsg and others, having sway_log_init call wlr_log_init conditionally will be tricky to implement cleanly.\n. ",
    "lightyou": "+1. ",
    "BurningTreeC": "If the mouse pointer moves before the click, the coordinates update and it works as one expects\nBut not if the cursor doesn't move - in that case a popup triggered by right-click opens at the touch position. @ascent12 sway seats ... I didn't expect this, say I have two keyboards quite distant from each other, I'd expect I can unlock with the one I locked the session. If it's standard behavior or you want it like this, just ignore my issue and I'll close it. >I think it makes sense for either seat to unlock the session.\nI agree. ",
    "edrex": "ah, I was able to reproduce by moving during the touch, which generates TOUCH_MOTION events, which evidently are updating the pointer position. libinput debug for click-touch-click and click-touchmove-click here.. I'm seeing the same behavior as with FF and pavucontrol with menus in Calibre, a pyqt5 application. Since this is happening for both GTK and QT apps doesn't this indicate a bug in wlroots?\nI played around with positioning a bit and the results match @RedSoxFan's description of the way the coordinates are transformed.. Same issue with popups in Krita, another pyqt app, which runs xwayland because of tablet stuff (checked via xprop, ~~which interestingly acts like an xwayland client in that it is blurry on hidpi, but seems to be running native~~. Calibre was running native wayland.\nSo with QT at least, the problem is present in both modes.. When this issue is triggered on my setup (primary display scale 2, negative y on scale 1 display) the tab text is rendered 2x normal (like the tabs think they are on the scale 2 display). \n\n\nIt could be a separate issue but I'm guessing they have the same root cause.. I can reproduce it with a single display just by setting the y coord negative:\nswaymsg output eDP-1 pos \"0 -3000\". Oops, I see your change, need to test on master. ~~Still reproducable on master~~. Seems fixed on master. I forgot to install the binary before I ran sway. Long day+sick. Thanks @RedSoxFan !. I haven't tested the weird tab size issue I previously reported since I don't have my display dongle with me, will test once I have it and report a new issue if it still happens.. Duplicates #3333. Reading the source I realize this tries to get an output device name via libinput_device_get_output_name already. I can't reproduce with the testcase.\nsway version 1.0-beta.2-274-g5f45a4bb (Jan 26 2019, branch 'master')\nwlroots 209210d307 (master Jan 25)\nfirefox-nightly 66.0a1.20190126-1 (via AUR)\nInterestingly with the official nightly the wait cursor amimates, while with the flatpak build it doesn't. But no crash.. I see this too. It's a Firefox bug so it should be reported there.\nWorkaround: after moving the firefox window between different-scale outputs, take some action to change the window W/H such as opening another window beside it, then removing it. This causes the firefox window to redraw correctly for me (although sometimes it takes several attempts). Filed https://bugzilla.mozilla.org/show_bug.cgi?id=1528581. #3689 fixes this for me. Tested, fixes #3688 for me.. ",
    "grahnen": "I have a suggestion for an API, built on the API sent to me by @ddevault over on IRC. (Thanks a lot for the guidance!) It's a little crude maybe, so if it could receive a second opinion from someone that'd be incredibly helpful! For now it's over on https://github.com/grahnen/libtouch but if you want to adopt it, it can just be transferred to swaywm/libtouch.\nSeeing this is my first attempt at any actual FLOSS contribution, I feel like I need the approval (and constructive critique!) of at least one more before I proceed, hope that's not too much to hope for ^^. There's the examples.c that has some example gestures (given a working API of course), if that's what you meant. One could add more there, should you want to. Otherwise, the demo program would need a (semi-)complete implementation, which I could make. Alright I've started, There's basically only the \"register_touch\" and \"register_move\" implementations (in which the actual tracking and progress tracking is done) left to be completed (they've been started).\nCreating multitouch gestures consisting of taps/swipes should be doable now.\nEdit: Most of it is done now. Except some (probably major) bugfixing. I don't really know the ins and outs of sway so I don't know where to begin to implement it.. I am starting to come to the conclusion that I have no idea what I'm doing right now. Not sure I understand how the configuration parsing works, and I don't know how to extend it to support the syntax of #1904. I've done what i think looks correct-ish, but sway still says touch is an invalid command.. Sorry about the chaos above. Tried to rebase my local branch to upstream master, but I messed it up big time. It's fixed now, anyway. It even compiles correctly when libtouch is installed.\nSomewhere hidden in these commits are my commits. Oops.\nThanks @RedSoxFan for the help with the structure!\nShould the gestures be mode-specific? Should they be able to be both mode-specific and mode-agnostic?. Now it's crashing with some xcb errors that I have no understanding of. Yet.\nThe following config is parseable\n`touch {\ngesture tap {\n\n    touch down\n\n    threshold 3\n\n }\n\n binding tap exec \"notify-send progress!\"\n\n}`\nAm I checking for complete gestures in the right place? In cursor.c, after updating the gestures?\nI'll give the style guide a proper read before I add anything else! (and commit with a million undescriptive messages, sorry about those). Is it reasonable to attach the engine to the sway_seat struct, and simply deep-copy it from the config for each seat, or is that too lazy a solution?. Yeah, sorry about those. Something went terribly wrong here.. ",
    "adabru": "In the meantime you can use wl-clipboard. It provides the programs wl-copyand wl-paste that can deal with different MIME-types and implement some tricks that circumvent the missing clipboard-protocol.. I have the same issue with XF86TouchpadOn(keycode 200), XF86TouchpadOff(201), XF86MonBrightnessDown(232), XF86MonBrightnessUp(233), XF86WebCam(220), XF86Launch7(194), etc. but not with XF86AudioRaiseVolume, XF86AudioLowerVolume, XF86AudioNext(171), XF86AudioPlay/XF86AudioPause(172), XF86AudioPrev(173), XF86AudioStop/XF86Eject(174). At least in my case all meida keys above a certain keycode threshold (~194) don't propagate modifiers. In case of e.g. XF86AudioPlay the keysym changes from the shiftkey, though.\n@megamann you can try removing all bindsyms from your sway.conf (so they are not absorbed) and running xev to see which media keys propagate modifiers and which ones don't. I ended up using the media keys that work with modifiers, violating the function that is printed on them.\nI looked a little bit at the /usr/share/X11/symbols/* files but couldn't find a clue there (I looked superficially though).. ",
    "yorickvP": "NixOS. Is it called liblibpam.so on arch?!. libinput, libcap, etc are found with pkg-config, this one is found using cc.find_library.. this is me opening weston-dnd, moving the mouse into it, and attempting to drag. https://pub.yori.cc/weston-dnd.log. sway log, client log. It's also hard to bring up the firefox nav bar in fullscreen.. https://bugzilla.mozilla.org/show_bug.cgi?id=1515448. I did. debug.log, bt full. swaymsg output DP-1 bg ~/wp/069.png stretch causes the entire screen (including the windows) to flicker, not just the background. It does not happen when running/killing swaybg manually.. The commit was reverted. Should this be reopened?. https://github.com/colemickens/nixpkgs-wayland/blob/master/pkgs/sway-beta/default.nix#L38 building from a github archive discards all other revision information. Be prepared to receive bug reports from end-users with the wrong version, then.. https://github.com/systemd/systemd/issues/12001. https://pub.yori.cc/3891.log\nCuriously, if I do swaymsg 'output DP-2 bg ~/wp/asdf.png' at some point, it reverts to that.. I also experience this bug sometimes, but it can be fixed by restarting sway.. I have not been able to find the popups anywhere. I'll collect a debug log next time I see it.. ",
    "aperezdc": "This might be related to WebKitGTK+ bug #170553, which I tried to fix a while ago but broke things and the patch was reverted. I'll try to at least get the part for the right click menu (context menu) fixed, which fortunately is the easiest one.. This might be related to WebKitGTK+ bug #170553, which I tried to fix a while ago but broke things and the patch was reverted. I'll try to at least get the part for the right click menu (context menu) fixed, which fortunately is the easiest one.. I have submitted a new patch for merging into WebKitGTK+ which makes the context menus appear correctly over the MiniBrowser window when running under Sway/wlroots, but mouse input goes to the window instead of to the context menu. If one uses right-click to open the context menu, and then the arrow keys in the keyboard, the menu items can be selected and activated with Enter.\nI suspect that there may be something that needs being fixed in Sway or wlroots to make input go to the context menu.\n(JFTR: MiniBrowser is included in the WebKit sources, we use it for testing). . I have submitted a new patch for merging into WebKitGTK+ which makes the context menus appear correctly over the MiniBrowser window when running under Sway/wlroots, but mouse input goes to the window instead of to the context menu. If one uses right-click to open the context menu, and then the arrow keys in the keyboard, the menu items can be selected and activated with Enter.\nI suspect that there may be something that needs being fixed in Sway or wlroots to make input go to the context menu.\n(JFTR: MiniBrowser is included in the WebKit sources, we use it for testing). . I have seen this as well, and is 100% reproducible when the layout of the active container is \u201ctabbed\u201d when pinentry-gnome3 is executed. Switching the layout to \u201csplit\u201d makes the window receive events again.\n(JFTR, for me happens with Sway+wlroots, I suppose that's the case for @emersion as well.). I have seen this as well, and is 100% reproducible when the layout of the active container is \u201ctabbed\u201d when pinentry-gnome3 is executed. Switching the layout to \u201csplit\u201d makes the window receive events again.\n(JFTR, for me happens with Sway+wlroots, I suppose that's the case for @emersion as well.). ",
    "heghe": "That's true in case of a long string, which might happend when it's used by the bar. Should I have a dynamic allocated array and double it's length in case it's not enough the first 2048 bytes?. Sounds good. I'll be back with the fix.. That's true. I didn't think about this. I see two solutions:\n1. Parse the string an escape ony the characters which are not used in tags or other markup related usecases. This solution is a bit harder and more complex.\n2. Escape the string before putting it in the title. This is more simple but I wouldn't take this aproach.\nI'll work on the first method, but it will take some time.. Oh. ok. I'll do (2) then. Fixed the style issue an email mismatch.. Yeah, I'll change that. I have done the rebase and push it before I saw the other comment. Do you use pango markup font? Because '&' needs to be escaped when using pango. See #1935. ",
    "nekinie": "I installed sway-git from the AUR (r2587.22db6013-1) and the issue is no longer present. There is noticeable screen tearing, specifically when moving the mouse but suspect that's been picked up in another ticket.\nThanks for the help!. I have Nvidia cards on the desktop using the open source drivers if it helps, the workstation is running AMD cards.. So the issue has re-occurred on the sway-git package, will update over the next few days with any additional information I can collect.. ",
    "petoknm": "I remember having the same issue once when my nvidia graphics card complained about something called \"falcon\" during boot... I remember i had to power off the machine wait a bit and power on... Fortunately it happened to me only once.... The same issue has just happened to me using gnome... so i guess it is something to do with the nouveau drivers. I assume it's sway sending those events... I think we could include modifiers along with those mouse events, or at least a way to somehow get the modifier state.. ",
    "RedBorg": "I have the same problem, running sway built from master. I am running Parabola ( libre-patched arch linux ) with nouveau drivers, if it helps. Sway will use near to 98% on all cores.\nEntering commands in termite keep CPU usage low, but scrolling makes it lag. When selecting a region with Slurp, cpu usage maxes out too. Same for most gtk software I tested.. > What version of sway?\nBuilt from master branch yesterday, wlroots from wlroots-git package in aur.. \nsway-output.txt\nI captured the output of a sway session where I spawn a few terminals, seems like a problem with the drivers.. Driver issue pretty much confirmed to me. Recreated setup on another computer and worked flawlessly. This could work like variables, you add an option to bindcode and then specify the layout to use it on, and when the file is processed, you convert it to a normal bindcode.\nExample of implementation:  \nbindcode --sym [layout]:[variant] [keybind] [command]\nThis:  \nbindcode --sym us:us Mod4+e reload\nWould get read as:  \nbindcode Mod4+44 reload. Manually building wlroots fixed the issue, seems like the \u02cbwlroots-git` package Is unreliable . ",
    "chebykinn": "Can't reproduce in 0c96d757d0d5d1762390dd119cbe344e8781c19f, closing.. This is sometimes hard to reproduce, sometimes it's always happening.. sway: 9731d080bea58fee78bd52bb5633cb37ec7edc22\nwlroots: swaywm/wlroots@341af97125b4376d7a38f00299539ebb050b235c\nLatest for today, just pulled recently.. Is mouse focusing based on inactivity?. I think I know why this is happening. Mouse focusing in sway is motion-based, so my mouse sometimes sends spurious motions and pointed window instantly gets focused! i3's behaviour is different. You can move mouse inside pointed window and focus will not change until you cross the border of this window.. Yes, it's focus_follows_mouse issue, quote from i3 docs: \"By default, window focus follows your mouse movements as the mouse crosses window borders. \". Oh, yeah, I get it, it breaks multiple outputs, if I do it like this.. Welp, I kinda rushed this, now it seems a bit tricky. I've allowed focusing from other containers, but\nif I focus on title of tabbed container when moving from non-tabbed container it'll still be focused.\nI see this solution: when focusing tabbed/stacked container, recursively find previously focused child in this container and focus it again.. Makes sense, I'll try that.. Is this correct?. Should I rebase?. Done. Thanks!. Any updates on this? This is currently one of the biggest pain points with sway for me.. Ok. ",
    "adtac": "I'd like to see this as well.\nMy use-case is this: when I'm in a terminal and want to open another one, I'd like for the new terminal to have the same working directory as the previous one. If there was a .pid field, I can hack together a script that's something like swaymsg -t get_tree | jq '.. | select(.focused? == true) | .pid' to get the PID, and then get the working directory with readlink /proc/$PID/cwd.\nI haven't contributed to sway or read the source code before, but I'll try my hand at this this weekend :). I tried hacking something together, but I didn't get anywhere. If you'd like to pick this up, feel free!. This is great, thanks! I was still wrapping my head around the different internal terminologies (view, display, node, output, ...) when I gave up :P . ",
    "synaptiko": "Is there a chance this would be rebased and merged? I'm using xbanish on i3wm and this looks like a nice replacement. Or is there an alternative approach over ipc? I was trying to find something for Wayland and I found only a script which was moving the cursor to 0\u00d70 position.. ",
    "limadm": "My sleep takes seconds as argument, so I used exec sleep 5 && swaylock -c 203040.\nAfter the autologin, I waited for 30s, then pressed $mod+e.\nIt opened the file manager window, and after 5 seconds, started swaylocker.\nNo worries, I saw the bindsym --locked suggestion. :). My sleep takes seconds as argument, so I used exec sleep 5 && swaylock -c 203040.\nAfter the autologin, I waited for 30s, then pressed $mod+e.\nIt opened the file manager window, and after 5 seconds, started swaylocker.\nNo worries, I saw the bindsym --locked suggestion. :). Issue was fixed last week. :). Issue was fixed last week. :). This seems to be the same as #1214.\nThe developers closed that issue because it was not a priority.. This seems to be the same as #1214.\nThe developers closed that issue because it was not a priority.. Since last week (after commit 769a8e99 but I don't know exactly which), when I resume my desktop after a long suspend, it behaves just like @The-King-of-Toasters described.\nIt has some delay between a keypress and its animation, and flashes \"Wrong\" and green rings if I type slower.\nI also observed that sometimes when resuming from systemctl suspend, there are repeated Return key events, like if it was stuck.\nCompeting swaylock copies? Unprocessed events in some buffer?. Since last week (after commit 769a8e99 but I don't know exactly which), when I resume my desktop after a long suspend, it behaves just like @The-King-of-Toasters described.\nIt has some delay between a keypress and its animation, and flashes \"Wrong\" and green rings if I type slower.\nI also observed that sometimes when resuming from systemctl suspend, there are repeated Return key events, like if it was stuck.\nCompeting swaylock copies? Unprocessed events in some buffer?. Okay, I'll try to gdb/record after work. See you tomorrow.. Okay, I'll try to gdb/record after work. See you tomorrow.. ",
    "TLogiviere": "\nit uses CAP_SYS_PTRACE to enforce security rules\n\nCan you please give at least one example of such security rules? Is there a document where I can easily consults them ?\n\nThis is something we will not be doing indefinitely, we're working on a new design.\n\nDefinitely... This has some crazy havoc potential..  > it uses CAP_SYS_PTRACE to enforce security rules\nCan you please give at least one example of such security rules? Is there a document where I can easily consults them ?\n\nThis is something we will not be doing indefinitely, we're working on a new design.\n\nDefinitely... This has some crazy havoc potential.. ",
    "mulimoen": "I've noticed that the focus changes to a window that has a title update. replicate: sleep(3); change workspace, the workspace and focus jumps to the window with the new title.. ",
    "maxhetfeld": "sway 0.15.2-1\nbundled with wlc. ",
    "kzwkt": "how to set it i dont know it works fine in xorg though. i didnt configure it in sway. ",
    "juicetin": "Yikes, didn't even realise my mistake as I typed it out. Thanks!. ",
    "mklpiening": "I am using mainly urxvt, firefox, audacity, chromium and vscode and the problem persists with all of these programs.. ",
    "Marteon": "But using chvt always works. Only the Keycombo doesn't work.. @SirCmpwn I don't quite understand.\nIt the --socket option deprecated or setting SWAYSOCK at all?\nAlso setting WAYLAND_DISPLAY accordingly does not fix the problem.. I don't really know much about the technical stuff but I had the exact (as far as I can tell) same issue.\nThe problem had something to do with the nouveau drivers. There was a bugreport somewhere, when I find it again I'll add it here.\nSadly there was no fix at the time I was using Nvidia graphics cards.. 0.15 Bugs are not accepted anymore. I don't know how sway handles this internally but it sounds like the porblem is the move part. Might be related to #2657 . I narrowed it down.\n~~It does not depend on the programms but on your config.~~ It sort of depends on your config. When testing it crashed with Firefox but not with Spotify.\nThe assign [class=\"Firefox\"] workspace causes the crash. \nWhile testing it on my setup it only crashed with auto-back-and-forth enabled but you don't seem to have this in your config.. Seconding to say that this is great!\nThanks!. What os do you run? What sway version are you using?. From the readme: \"We are no longer accepting bugs for 0.15\". In my case Spotify does not only start in floating but it also has a title bar even through border none is set.. Will edit the version in here later. But I'm pretty sure that I'm some commits ahead of 1.0-beta.1.. You should write a script for this.. I think configs explain the situation better than I can with words.\nbindsym $mod+n opacity 0.8\nbindsym --release $mod+n opacity 1\nThis should make a window transparent on keypress and make it nontransparent on release.\nWhen focusing another window it also becomes transparent because opacity 0.8 is repeated.\nI guess --release is sufficent but it kind of depends on your liking whether you would like to execute a command on keypress or keyrelease.. What do you mean with not properly?\nSince the config does not do much there isn't much that can not work.. ",
    "adrubesh": "I can understand focus following a container if moving from the actual content area, but I feel the tabs should not follow this rule.. I can understand focus following a container if moving from the actual content area, but I feel the tabs should not follow this rule.. ",
    "AmateurMemetics": "Tried using this, top borders not rendered on windows which start as floating (gnome-terminal preferences window and gnome-keyring when opening Geary). . ",
    "lake-effect": "```\n           PID: 12218 (swaylock)\n           UID: 1000 (ashley)\n           GID: 985 (users)\n        Signal: 7 (BUS)\n     Timestamp: Thu 2018-05-24 15:31:37 EDT (59min ago)\n  Command Line: swaylock -c --color 111111FF\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c6.scope\n          Unit: session-c6.scope\n         Slice: user-1000.slice\n       Session: c6\n     Owner UID: 1000 (ashley)\n       Boot ID: 7788c87ae4c641faadc8e3fafb4c8fcb\n    Machine ID: 09e133327a73455db032d8dab986c186\n      Hostname: cryptid\n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.7788c87ae4c641faadc8e3fafb4c8fcb.12218.1527190297000000.lz4\n       Message: Process 12218 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 12218:\n            #0  0x00007fe5dd2347d0 n/a (libpixman-1.so.0)\n            #1  0x00007fe5dd21973b n/a (libpixman-1.so.0)\n            #2  0x00007fe5dd1d3df9 pixman_fill (libpixman-1.so.0)\n            #3  0x00007fe5def03457 n/a (libcairo.so.2)\n            #4  0x00007fe5def3ebd2 n/a (libcairo.so.2)\n            #5  0x00007fe5def3f3fe n/a (libcairo.so.2)\n            #6  0x00007fe5def3f47c n/a (libcairo.so.2)\n            #7  0x00007fe5deef7121 n/a (libcairo.so.2)\n            #8  0x00007fe5def4b1ec n/a (libcairo.so.2)\n            #9  0x00007fe5deeff9a7 n/a (libcairo.so.2)\n            #10 0x00007fe5def584e5 cairo_paint (libcairo.so.2)\n            #11 0x00005560d697641d render (swaylock)\n            #12 0x00005560d6976cfb notify_key (swaylock)\n            #13 0x00007fe5dd89c1c8 ffi_call_unix64 (libffi.so.6)\n            #14 0x00007fe5dd89bc2a ffi_call (libffi.so.6)\n            #15 0x00007fe5df404f9f n/a (libwayland-client.so.0)\n            #16 0x00007fe5df40170a n/a (libwayland-client.so.0)\n            #17 0x00007fe5df402c5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #18 0x00005560d69755f1 main (swaylock)\n            #19 0x00007fe5ddac206b __libc_start_main (libc.so.6)\n            #20 0x00005560d6975b8a _start (swaylock)\n\n.\n\u2570\u2500>$ coredumpctl gdb 12218\n           PID: 12218 (swaylock)\n           UID: 1000 (ashley)\n           GID: 985 (users)\n        Signal: 7 (BUS)\n     Timestamp: Thu 2018-05-24 15:31:37 EDT (1h 6min ago)\n  Command Line: swaylock -c --color 111111FF\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c6.scope\n          Unit: session-c6.scope\n         Slice: user-1000.slice\n       Session: c6\n     Owner UID: 1000 (ashley)\n       Boot ID: 7788c87ae4c641faadc8e3fafb4c8fcb\n    Machine ID: 09e133327a73455db032d8dab986c186\n      Hostname: cryptid\n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.7788c87ae4c641faadc8e3fafb4c8fcb.12218.1527190297000000.lz4\n       Message: Process 12218 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 12218:\n            #0  0x00007fe5dd2347d0 n/a (libpixman-1.so.0)\n            #1  0x00007fe5dd21973b n/a (libpixman-1.so.0)\n            #2  0x00007fe5dd1d3df9 pixman_fill (libpixman-1.so.0)\n            #3  0x00007fe5def03457 n/a (libcairo.so.2)\n            #4  0x00007fe5def3ebd2 n/a (libcairo.so.2)\n            #5  0x00007fe5def3f3fe n/a (libcairo.so.2)\n            #6  0x00007fe5def3f47c n/a (libcairo.so.2)\n            #7  0x00007fe5deef7121 n/a (libcairo.so.2)\n            #8  0x00007fe5def4b1ec n/a (libcairo.so.2)\n            #9  0x00007fe5deeff9a7 n/a (libcairo.so.2)\n            #10 0x00007fe5def584e5 cairo_paint (libcairo.so.2)\n            #11 0x00005560d697641d render (swaylock)\n            #12 0x00005560d6976cfb notify_key (swaylock)\n            #13 0x00007fe5dd89c1c8 ffi_call_unix64 (libffi.so.6)\n            #14 0x00007fe5dd89bc2a ffi_call (libffi.so.6)\n            #15 0x00007fe5df404f9f n/a (libwayland-client.so.0)\n            #16 0x00007fe5df40170a n/a (libwayland-client.so.0)\n            #17 0x00007fe5df402c5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #18 0x00005560d69755f1 main (swaylock)\n            #19 0x00007fe5ddac206b __libc_start_main (libc.so.6)\n            #20 0x00005560d6975b8a _start (swaylock)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n---Type  to continue, or q  to quit---\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaylock...(no debugging symbols found)...done.\n[New LWP 12218]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swaylock -c --color 111111FF'.\nProgram terminated with signal SIGBUS, Bus error.\n0  0x00007fe5dd2347d0 in ?? () from /usr/lib/libpixman-1.so.0\n(gdb) bt full\n0  0x00007fe5dd2347d0 in  () at /usr/lib/libpixman-1.so.0\n1  0x00007fe5dd21973b in  () at /usr/lib/libpixman-1.so.0\n2  0x00007fe5dd1d3df9 in pixman_fill () at /usr/lib/libpixman-1.so.0\n3  0x00007fe5def03457 in  () at /usr/lib/libcairo.so.2\n4  0x00007fe5def3ebd2 in  () at /usr/lib/libcairo.so.2\n5  0x00007fe5def3f3fe in  () at /usr/lib/libcairo.so.2\n6  0x00007fe5def3f47c in  () at /usr/lib/libcairo.so.2\n7  0x00007fe5deef7121 in  () at /usr/lib/libcairo.so.2\n8  0x00007fe5def4b1ec in  () at /usr/lib/libcairo.so.2\n9  0x00007fe5deeff9a7 in  () at /usr/lib/libcairo.so.2\n10 0x00007fe5def584e5 in cairo_paint () at /usr/lib/libcairo.so.2\n---Type  to continue, or q  to quit---\n11 0x00005560d697641d in render ()\n12 0x00005560d6976cfb in notify_key ()\n13 0x00007fe5dd89c1c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n14 0x00007fe5dd89bc2a in ffi_call () at /usr/lib/libffi.so.6\n15 0x00007fe5df404f9f in  () at /usr/lib/libwayland-client.so.0\n16 0x00007fe5df40170a in  () at /usr/lib/libwayland-client.so.0\n17 0x00007fe5df402c5c in wl_display_dispatch_queue_pending ()\nat /usr/lib/libwayland-client.so.0\n\n18 0x00005560d69755f1 in main ()\n(gdb) quit\n```. ",
    "KaNe23": "I can reproduce the issue only when providing a background image to swaylock.\nIt also behaves more clunky with a background image, to the point were there is almost no\nredraw of the circle.\n```\ncoredumpctl gdb 28231                                                                                                                                                                                                                            !10019\n           PID: 28231 (swaylock)\n           UID: 1000 ()\n           GID: 1000 ()\n        Signal: 6 (ABRT)\n     Timestamp: Fri 2018-05-25 13:29:10 CEST (1min 37s ago)\n  Command Line: swaylock -i /tmp/root.png\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 ()\n       Boot ID: c9807f1e8a424c4aa587c8c65502e1fd\n    Machine ID: d1bdd2acda1a453f83bc044a88651b79\n      Hostname: \n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.c9807f1e8a424c4aa587c8c65502e1fd.28231.1527247750000000.lz4\n       Message: Process 28231 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 28231:\n            #0  0x00007fa256e6986b raise (libc.so.6)\n            #1  0x00007fa256e5440e abort (libc.so.6)\n            #2  0x00007fa25746df90 n/a (libwayland-client.so.0)\n            #3  0x00007fa257469cd8 wl_proxy_marshal_array_constructor_versioned (libwayland-client.so.0)\n            #4  0x00007fa257469e2e wl_proxy_marshal (libwayland-client.so.0)\n            #5  0x000055b8200c9935 wl_surface_set_buffer_scale (swaylock)\n            #6  0x000055b8200c9f98 render_frames (swaylock)\n            #7  0x000055b8200c9654 swaylock_handle_key (swaylock)\n            #8  0x00007fa2545b71c8 ffi_call_unix64 (libffi.so.6)\n            #9  0x00007fa2545b6c2a ffi_call (libffi.so.6)\n            #10 0x00007fa25746cf9f n/a (libwayland-client.so.0)\n            #11 0x00007fa25746970a n/a (libwayland-client.so.0)\n            #12 0x00007fa25746ac5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #13 0x000055b8200c8c57 main (swaylock)\n            #14 0x00007fa256e5606b __libc_start_main (libc.so.6)\n            #15 0x000055b8200c8e9a _start (swaylock)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaylock...done.\n[New LWP 28231]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swaylock -i /tmp/root.png'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007fa256e6986b in raise () from /usr/lib/libc.so.6\n(gdb) bt full\n0  0x00007fa256e6986b in raise () at /usr/lib/libc.so.6\n1  0x00007fa256e5440e in abort () at /usr/lib/libc.so.6\n2  0x00007fa25746df90 in _fini () at /usr/lib/libwayland-client.so.0\n3  0x00007fa257469cd8 in wl_proxy_marshal_array_constructor_versioned () at /usr/lib/libwayland-client.so.0\n4  0x00007fa257469e2e in wl_proxy_marshal () at /usr/lib/libwayland-client.so.0\n5  0x000055b8200c9935 in wl_surface_set_buffer_scale (scale=, wl_surface=) at /usr/include/wayland-client-protocol.h:3707\n    state = <optimized out>\n    buffer_width = <optimized out>\n    buffer_height = <optimized out>\n    cairo = 0x55b8205b5080\n    arc_radius = <optimized out>\n    arc_thickness = <optimized out>\n    type_indicator_border_thickness = <optimized out>\n\n6  0x000055b8200c9935 in render_frame (surface=surface@entry=0x55b82057a9f0) at ../sway/swaylock/render.c:155\n    state = <optimized out>\n    buffer_width = <optimized out>\n    buffer_height = <optimized out>\n    cairo = 0x55b8205b5080\n    arc_radius = <optimized out>\n    arc_thickness = <optimized out>\n    type_indicator_border_thickness = <optimized out>\n\n7  0x000055b8200c9f98 in render_frames (state=state@entry=0x55b8202d1380 ) at ../sway/swaylock/render.c:164\n    surface = 0x55b82057a9f0\n\n8  0x000055b8200c9654 in swaylock_handle_key (state=0x55b8202d1380 , keysym=, codepoint=) at ../sway/swaylock/password.c:146\n9  0x00007fa2545b71c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n10 0x00007fa2545b6c2a in ffi_call () at /usr/lib/libffi.so.6\n11 0x00007fa25746cf9f in  () at /usr/lib/libwayland-client.so.0\n12 0x00007fa25746970a in  () at /usr/lib/libwayland-client.so.0\n13 0x00007fa25746ac5c in wl_display_dispatch_queue_pending () at /usr/lib/libwayland-client.so.0\n14 0x000055b8200c8c57 in main (argc=, argv=) at ../sway/swaylock/main.c:418\n    long_options = \n        {{name = 0x55b8200cccb5 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55b8200cd403 \"color\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55b8200cccba \"image\", has_arg = 1, flag = 0x0, val = 105}, {name = 0x55b8200cccc0 \"scaling\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x55b8200cccc8 \"tiling\", has_arg = 0, flag = 0x0, val = 116}, {name = 0x55b8200ccccf \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55b8200cccd7 \"socket\", has_arg = 1, flag = 0x0, val = 112}, {name = 0x55b8200cccde \"no-unlock-indicator\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55b8200ccc6a \"daemonize\", has_arg = 0, flag = 0x0, val = 102}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = 0x55b8200ccd78 \"Usage: swaylock [options...]\\n\\n  -h, --help\", ' ' <repeats 21 times>, \"Show help message and quit.\\n  -c, --color <rrggbb[aa]>       Turn the screen into the given color instead of white.\\n  -s, --scaling      \"...\n    args = {color = 4294967295, mode = BACKGROUND_MODE_SOLID_COLOR, show_indicator = true}\n    c = <optimized out>\n    __PRETTY_FUNCTION__ = \"main\"\n    registry = <optimized out>\n    surface = 0x55b8202d12f8 <types+120>\n\n. I can reproduce the issue only when providing a background image to swaylock.\nIt also behaves more clunky with a background image, to the point were there is almost no\nredraw of the circle.\ncoredumpctl gdb 28231                                                                                                                                                                                                                            !10019\n           PID: 28231 (swaylock)\n           UID: 1000 ()\n           GID: 1000 ()\n        Signal: 6 (ABRT)\n     Timestamp: Fri 2018-05-25 13:29:10 CEST (1min 37s ago)\n  Command Line: swaylock -i /tmp/root.png\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 ()\n       Boot ID: c9807f1e8a424c4aa587c8c65502e1fd\n    Machine ID: d1bdd2acda1a453f83bc044a88651b79\n      Hostname: \n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.c9807f1e8a424c4aa587c8c65502e1fd.28231.1527247750000000.lz4\n       Message: Process 28231 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 28231:\n            #0  0x00007fa256e6986b raise (libc.so.6)\n            #1  0x00007fa256e5440e abort (libc.so.6)\n            #2  0x00007fa25746df90 n/a (libwayland-client.so.0)\n            #3  0x00007fa257469cd8 wl_proxy_marshal_array_constructor_versioned (libwayland-client.so.0)\n            #4  0x00007fa257469e2e wl_proxy_marshal (libwayland-client.so.0)\n            #5  0x000055b8200c9935 wl_surface_set_buffer_scale (swaylock)\n            #6  0x000055b8200c9f98 render_frames (swaylock)\n            #7  0x000055b8200c9654 swaylock_handle_key (swaylock)\n            #8  0x00007fa2545b71c8 ffi_call_unix64 (libffi.so.6)\n            #9  0x00007fa2545b6c2a ffi_call (libffi.so.6)\n            #10 0x00007fa25746cf9f n/a (libwayland-client.so.0)\n            #11 0x00007fa25746970a n/a (libwayland-client.so.0)\n            #12 0x00007fa25746ac5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #13 0x000055b8200c8c57 main (swaylock)\n            #14 0x00007fa256e5606b __libc_start_main (libc.so.6)\n            #15 0x000055b8200c8e9a _start (swaylock)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaylock...done.\n[New LWP 28231]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swaylock -i /tmp/root.png'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007fa256e6986b in raise () from /usr/lib/libc.so.6\n(gdb) bt full\n0  0x00007fa256e6986b in raise () at /usr/lib/libc.so.6\n1  0x00007fa256e5440e in abort () at /usr/lib/libc.so.6\n2  0x00007fa25746df90 in _fini () at /usr/lib/libwayland-client.so.0\n3  0x00007fa257469cd8 in wl_proxy_marshal_array_constructor_versioned () at /usr/lib/libwayland-client.so.0\n4  0x00007fa257469e2e in wl_proxy_marshal () at /usr/lib/libwayland-client.so.0\n5  0x000055b8200c9935 in wl_surface_set_buffer_scale (scale=, wl_surface=) at /usr/include/wayland-client-protocol.h:3707\n    state = <optimized out>\n    buffer_width = <optimized out>\n    buffer_height = <optimized out>\n    cairo = 0x55b8205b5080\n    arc_radius = <optimized out>\n    arc_thickness = <optimized out>\n    type_indicator_border_thickness = <optimized out>\n\n6  0x000055b8200c9935 in render_frame (surface=surface@entry=0x55b82057a9f0) at ../sway/swaylock/render.c:155\n    state = <optimized out>\n    buffer_width = <optimized out>\n    buffer_height = <optimized out>\n    cairo = 0x55b8205b5080\n    arc_radius = <optimized out>\n    arc_thickness = <optimized out>\n    type_indicator_border_thickness = <optimized out>\n\n7  0x000055b8200c9f98 in render_frames (state=state@entry=0x55b8202d1380 ) at ../sway/swaylock/render.c:164\n    surface = 0x55b82057a9f0\n\n8  0x000055b8200c9654 in swaylock_handle_key (state=0x55b8202d1380 , keysym=, codepoint=) at ../sway/swaylock/password.c:146\n9  0x00007fa2545b71c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n10 0x00007fa2545b6c2a in ffi_call () at /usr/lib/libffi.so.6\n11 0x00007fa25746cf9f in  () at /usr/lib/libwayland-client.so.0\n12 0x00007fa25746970a in  () at /usr/lib/libwayland-client.so.0\n13 0x00007fa25746ac5c in wl_display_dispatch_queue_pending () at /usr/lib/libwayland-client.so.0\n14 0x000055b8200c8c57 in main (argc=, argv=) at ../sway/swaylock/main.c:418\n    long_options = \n        {{name = 0x55b8200cccb5 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55b8200cd403 \"color\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55b8200cccba \"image\", has_arg = 1, flag = 0x0, val = 105}, {name = 0x55b8200cccc0 \"scaling\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x55b8200cccc8 \"tiling\", has_arg = 0, flag = 0x0, val = 116}, {name = 0x55b8200ccccf \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55b8200cccd7 \"socket\", has_arg = 1, flag = 0x0, val = 112}, {name = 0x55b8200cccde \"no-unlock-indicator\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55b8200ccc6a \"daemonize\", has_arg = 0, flag = 0x0, val = 102}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = 0x55b8200ccd78 \"Usage: swaylock [options...]\\n\\n  -h, --help\", ' ' <repeats 21 times>, \"Show help message and quit.\\n  -c, --color <rrggbb[aa]>       Turn the screen into the given color instead of white.\\n  -s, --scaling      \"...\n    args = {color = 4294967295, mode = BACKGROUND_MODE_SOLID_COLOR, show_indicator = true}\n    c = <optimized out>\n    __PRETTY_FUNCTION__ = \"main\"\n    registry = <optimized out>\n    surface = 0x55b8202d12f8 <types+120>\n\n. There you go.\nMaybe I should mention that I run multiple screens:\noutput DP-4 resolution 1920x1080 position 0,0\noutput eDP-1 resolution 2560x1440 position 1920,0 scale 1.444\noutput DP-5 resolution 1920x1080 transform 270 position 3692,0\n\ncoredumpctl gdb 2397                                                                                                                                                                                                                             !10033\n           PID: 2397 (swaylock)\n           UID: 1000 ()\n           GID: 1000 ()\n        Signal: 6 (ABRT)\n     Timestamp: Fri 2018-05-25 13:52:18 CEST (12s ago)\n  Command Line: swaylock -i /tmp/root.png\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 ()\n       Boot ID: c9807f1e8a424c4aa587c8c65502e1fd\n    Machine ID: d1bdd2acda1a453f83bc044a88651b79\n      Hostname: \n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.c9807f1e8a424c4aa587c8c65502e1fd.2397.1527249138000000.lz4\n       Message: Process 2397 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 2397:\n            #0  0x00007f16cfaf686b raise (libc.so.6)\n            #1  0x00007f16cfae140e abort (libc.so.6)\n            #2  0x00007f16d00faf90 n/a (libwayland-client.so.0)\n            #3  0x00007f16d00f6cd8 wl_proxy_marshal_array_constructor_versioned (libwayland-client.so.0)\n            #4  0x00007f16d00f6e2e wl_proxy_marshal (libwayland-client.so.0)\n            #5  0x000055d8003d1484 wl_surface_set_buffer_scale (swaylock)\n            #6  0x000055d8003d1daf render_frame (swaylock)\n            #7  0x000055d8003d1e87 render_frames (swaylock)\n            #8  0x000055d8003d136b swaylock_handle_key (swaylock)\n            #9  0x000055d8003d22db keyboard_key (swaylock)\n            #10 0x00007f16cd2441c8 ffi_call_unix64 (libffi.so.6)\n            #11 0x00007f16cd243c2a ffi_call (libffi.so.6)\n            #12 0x00007f16d00f9f9f n/a (libwayland-client.so.0)\n            #13 0x00007f16d00f670a n/a (libwayland-client.so.0)\n            #14 0x00007f16d00f7c5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #15 0x000055d8003d0da0 main (swaylock)\n            #16 0x00007f16cfae306b __libc_start_main (libc.so.6)\n            #17 0x000055d8003cf56a _start (swaylock)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaylock...done.\n[New LWP 2397]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swaylock -i /tmp/root.png'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007f16cfaf686b in raise () from /usr/lib/libc.so.6\n(gdb) bt full\n0  0x00007f16cfaf686b in raise () at /usr/lib/libc.so.6\n1  0x00007f16cfae140e in abort () at /usr/lib/libc.so.6\n2  0x00007f16d00faf90 in _fini () at /usr/lib/libwayland-client.so.0\n3  0x00007f16d00f6cd8 in wl_proxy_marshal_array_constructor_versioned () at /usr/lib/libwayland-client.so.0\n4  0x00007f16d00f6e2e in wl_proxy_marshal () at /usr/lib/libwayland-client.so.0\n5  0x000055d8003d1484 in wl_surface_set_buffer_scale (wl_surface=0x55d8006e67d0, scale=1) at /usr/include/wayland-client-protocol.h:3707\n6  0x000055d8003d1daf in render_frame (surface=0x55d8006dc9f0) at ../sway/swaylock/render.c:158\n    state = 0x55d8005da420 <state>\n    buffer_width = 1080\n    buffer_height = 1920\n    cairo = 0x55d800717220\n    arc_radius = 50\n    arc_thickness = 10\n    type_indicator_border_thickness = 0.0245436933\n\n7  0x000055d8003d1e87 in render_frames (state=0x55d8005da420 ) at ../sway/swaylock/render.c:167\n    surface = 0x55d8006dc9f0\n\n8  0x000055d8003d136b in swaylock_handle_key (state=0x55d8005da420 , keysym=97, codepoint=97) at ../sway/swaylock/password.c:146\n9  0x000055d8003d22db in keyboard_key (data=0x55d8005da420 , wl_keyboard=0x55d8006e6ae0, serial=32058, time=6784789, key=30, _key_state=1) at ../sway/swaylock/seat.c:78\n    state = 0x55d8005da420 <state>\n    key_state = WL_KEYBOARD_KEY_STATE_PRESSED\n    sym = 97\n    keycode = 38\n    codepoint = 97\n\n10 0x00007f16cd2441c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n11 0x00007f16cd243c2a in ffi_call () at /usr/lib/libffi.so.6\n12 0x00007f16d00f9f9f in  () at /usr/lib/libwayland-client.so.0\n13 0x00007f16d00f670a in  () at /usr/lib/libwayland-client.so.0\n14 0x00007f16d00f7c5c in wl_display_dispatch_queue_pending () at /usr/lib/libwayland-client.so.0\n15 0x000055d8003d0da0 in main (argc=3, argv=0x7ffcdf0d6568) at ../sway/swaylock/main.c:451\n    long_options = \n        {{name = 0x55d8003d6525 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55d8003d652a \"color\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55d8003d6530 \"image\", has_arg = 1, flag = 0x0, val = 105}, {name = 0x55d8003d6536 \"scaling\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x55d8003d653e \"tiling\", has_arg = 0, flag = 0x0, val = 116}, {name = 0x55d8003d6545 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55d8003d654d \"socket\", has_arg = 1, flag = 0x0, val = 112}, {name = 0x55d8003d6554 \"no-unlock-indicator\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55d8003d6568 \"daemonize\", has_arg = 0, flag = 0x0, val = 102}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = \"Usage: swaylock [options...]\\n\\n  -h, --help\", ' ' <repeats 21 times>, \"Show help message and quit.\\n  -c, --color <rrggbb[aa]>       Turn the screen into the given color instead of white.\\n  -s, --scaling\", ' ' <repeats 18 times>...\n    c = -1\n    __PRETTY_FUNCTION__ = \"main\"\n    registry = 0x55d8006d4440\n    surface = 0x55d8005da390 <types+112>\n\n. There you go.\nMaybe I should mention that I run multiple screens:\noutput DP-4 resolution 1920x1080 position 0,0\noutput eDP-1 resolution 2560x1440 position 1920,0 scale 1.444\noutput DP-5 resolution 1920x1080 transform 270 position 3692,0\n\ncoredumpctl gdb 2397                                                                                                                                                                                                                             !10033\n           PID: 2397 (swaylock)\n           UID: 1000 ()\n           GID: 1000 ()\n        Signal: 6 (ABRT)\n     Timestamp: Fri 2018-05-25 13:52:18 CEST (12s ago)\n  Command Line: swaylock -i /tmp/root.png\n    Executable: /usr/bin/swaylock\n Control Group: /user.slice/user-1000.slice/session-c1.scope\n          Unit: session-c1.scope\n         Slice: user-1000.slice\n       Session: c1\n     Owner UID: 1000 ()\n       Boot ID: c9807f1e8a424c4aa587c8c65502e1fd\n    Machine ID: d1bdd2acda1a453f83bc044a88651b79\n      Hostname: \n       Storage: /var/lib/systemd/coredump/core.swaylock.1000.c9807f1e8a424c4aa587c8c65502e1fd.2397.1527249138000000.lz4\n       Message: Process 2397 (swaylock) of user 1000 dumped core.\n            Stack trace of thread 2397:\n            #0  0x00007f16cfaf686b raise (libc.so.6)\n            #1  0x00007f16cfae140e abort (libc.so.6)\n            #2  0x00007f16d00faf90 n/a (libwayland-client.so.0)\n            #3  0x00007f16d00f6cd8 wl_proxy_marshal_array_constructor_versioned (libwayland-client.so.0)\n            #4  0x00007f16d00f6e2e wl_proxy_marshal (libwayland-client.so.0)\n            #5  0x000055d8003d1484 wl_surface_set_buffer_scale (swaylock)\n            #6  0x000055d8003d1daf render_frame (swaylock)\n            #7  0x000055d8003d1e87 render_frames (swaylock)\n            #8  0x000055d8003d136b swaylock_handle_key (swaylock)\n            #9  0x000055d8003d22db keyboard_key (swaylock)\n            #10 0x00007f16cd2441c8 ffi_call_unix64 (libffi.so.6)\n            #11 0x00007f16cd243c2a ffi_call (libffi.so.6)\n            #12 0x00007f16d00f9f9f n/a (libwayland-client.so.0)\n            #13 0x00007f16d00f670a n/a (libwayland-client.so.0)\n            #14 0x00007f16d00f7c5c wl_display_dispatch_queue_pending (libwayland-client.so.0)\n            #15 0x000055d8003d0da0 main (swaylock)\n            #16 0x00007f16cfae306b __libc_start_main (libc.so.6)\n            #17 0x000055d8003cf56a _start (swaylock)\n\nGNU gdb (GDB) 8.1\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\nhttp://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaylock...done.\n[New LWP 2397]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `swaylock -i /tmp/root.png'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x00007f16cfaf686b in raise () from /usr/lib/libc.so.6\n(gdb) bt full\n0  0x00007f16cfaf686b in raise () at /usr/lib/libc.so.6\n1  0x00007f16cfae140e in abort () at /usr/lib/libc.so.6\n2  0x00007f16d00faf90 in _fini () at /usr/lib/libwayland-client.so.0\n3  0x00007f16d00f6cd8 in wl_proxy_marshal_array_constructor_versioned () at /usr/lib/libwayland-client.so.0\n4  0x00007f16d00f6e2e in wl_proxy_marshal () at /usr/lib/libwayland-client.so.0\n5  0x000055d8003d1484 in wl_surface_set_buffer_scale (wl_surface=0x55d8006e67d0, scale=1) at /usr/include/wayland-client-protocol.h:3707\n6  0x000055d8003d1daf in render_frame (surface=0x55d8006dc9f0) at ../sway/swaylock/render.c:158\n    state = 0x55d8005da420 <state>\n    buffer_width = 1080\n    buffer_height = 1920\n    cairo = 0x55d800717220\n    arc_radius = 50\n    arc_thickness = 10\n    type_indicator_border_thickness = 0.0245436933\n\n7  0x000055d8003d1e87 in render_frames (state=0x55d8005da420 ) at ../sway/swaylock/render.c:167\n    surface = 0x55d8006dc9f0\n\n8  0x000055d8003d136b in swaylock_handle_key (state=0x55d8005da420 , keysym=97, codepoint=97) at ../sway/swaylock/password.c:146\n9  0x000055d8003d22db in keyboard_key (data=0x55d8005da420 , wl_keyboard=0x55d8006e6ae0, serial=32058, time=6784789, key=30, _key_state=1) at ../sway/swaylock/seat.c:78\n    state = 0x55d8005da420 <state>\n    key_state = WL_KEYBOARD_KEY_STATE_PRESSED\n    sym = 97\n    keycode = 38\n    codepoint = 97\n\n10 0x00007f16cd2441c8 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n11 0x00007f16cd243c2a in ffi_call () at /usr/lib/libffi.so.6\n12 0x00007f16d00f9f9f in  () at /usr/lib/libwayland-client.so.0\n13 0x00007f16d00f670a in  () at /usr/lib/libwayland-client.so.0\n14 0x00007f16d00f7c5c in wl_display_dispatch_queue_pending () at /usr/lib/libwayland-client.so.0\n15 0x000055d8003d0da0 in main (argc=3, argv=0x7ffcdf0d6568) at ../sway/swaylock/main.c:451\n    long_options = \n        {{name = 0x55d8003d6525 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55d8003d652a \"color\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55d8003d6530 \"image\", has_arg = 1, flag = 0x0, val = 105}, {name = 0x55d8003d6536 \"scaling\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x55d8003d653e \"tiling\", has_arg = 0, flag = 0x0, val = 116}, {name = 0x55d8003d6545 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55d8003d654d \"socket\", has_arg = 1, flag = 0x0, val = 112}, {name = 0x55d8003d6554 \"no-unlock-indicator\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55d8003d6568 \"daemonize\", has_arg = 0, flag = 0x0, val = 102}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = \"Usage: swaylock [options...]\\n\\n  -h, --help\", ' ' <repeats 21 times>, \"Show help message and quit.\\n  -c, --color <rrggbb[aa]>       Turn the screen into the given color instead of white.\\n  -s, --scaling\", ' ' <repeats 18 times>...\n    c = -1\n    __PRETTY_FUNCTION__ = \"main\"\n    registry = 0x55d8006d4440\n    surface = 0x55d8005da390 <types+112>\n\n```. ",
    "vilhalmer": "If you git rebase -i master you will get an editor with a file where you can change the first word of every line to select the action to take on the commit. If you change all but the first one to squash (or just s), you will end up with one commit, and it will walk you through fixing any conflicts on the way. At the end you should be good to merge! (Since you're rewriting history by doing so, it'll require a force push to update your branch after doing this.). I did that as well in #2230, but I figured it was worth having the defense in depth. Up to you all, though.. Fixed the spacing, and also realized that it was pointless to look for the workspace manually in the focus chain since the container_reap_empty_recursive will figure that out.. My rationale for the PR was based on considering a fullscreen container to be at the same layer as all of the other shell surfaces in the workspace, rather than over top them. (It \"replaces\" them while in fullscreen.) Then it makes sense for TOP layer-shell surfaces to still be higher, without needing to define another layer. This doesn't match the current wording in the protocol, though, and I understand the advantages of having fullscreen surfaces \"win\" more often in order to gain rendering optimizations.. True, though I'd often rather be able to control that on a case-by-case basis via the notification daemon.. ",
    "Organic-Code": "It work as intended on master, with algr combinations as well. same error with sway version 1.0-beta.2-33-g01420193 / wlroots version 0.1.r103.g05bb4407-1\nHowever, sway runs with no errors when launched with /usr/bin/sway instead of a plain sway. ",
    "StringEpsilon": "In i3 4.15, the pop-up from a tiled focused window will be rendered in front of a unfocused floating window. So RyanDwyers implementation is correct in terms of i3-compatibility.\n(I tested this with the context menu from firefox, gedit and kcachegrind and a floating terminal window)\n. You could make a bit of a performance improvement by checking view->parent->focused first and only get p only if you actually need it.\nDownside: Makes the ifs a bit uglier.\n. ",
    "ya-isakov": "I've tried to reproduce it on new master, and cannot, so closing it. I can confirm that sway is crashing on enabling internal output when Firefox is running. Also, sometimes, even without Firefox running, redshift with wayland method is crashing with error\nwl_registry@2: error 0: invalid global wl_output (30)\nThe Wayland connection experienced a fatal error: -1\nMaybe same error leads to XWayland crashing, which also crashes Sway itself. Actually, it has an effect, it deactivates current workspace, even if there are no workspaces on \"right\" output. I've checked with i3, and yes, it's the same behaviour, so I'm closing this bug. It is not quite intuitive for me, but at least it's a not a bug, definitely.. ",
    "kitdarko": "I have this same issue with Alacritty, but mod+enter and holding resize do repeat fine.\n(0.15.2, Arch). ",
    "mysteryjeans": "Any pointers to fixed this issue?. ",
    "bitraid": "For me mpv always freezes under sway (both versions 0.x and 1.0alpha), whether using wayland or xwayland for mpv, if it starts from qutebrowser (running under wayland) and then move mpv to a different workspace and switch to it. After 9 seconds it freezes, and gets fixed when switching back to qutebrowser's workspace (but freezes againg after 9 seconds if i leave that workspace). I've seen this happening on multiple machines running  archlinux x64.. I tried @martinetd commit, but it still freezes. The system is not under heavy load, either. The combination i previously described, always freezes mpv - but i'm not able to capture the wayland debug of mpv when is directly spawn from qutebrowser. Calling a script to start mpv and capture the debug doesn't reproduce the problem. The detailed steps i use to freeze mpv are:\n- Start qutebrowser using wayland: make sure qt.force_platform = 'xcb' is not present in config.py and the env variable QUTE_SKIP_WAYLAND_CHECK=1 is set.\n- Enter command mode : and call mpv to play a video, e.g: spawn mpv https://www.youtube.com/watch?v=Zsz7Shbnb9c (needs youtube-dl, you can also use a local video).\n- Move the mpv window to a different workspace and switch to it (or to any workspace other than the one qutebrowser is). It takes about 8-9 seconds for mpv to freeze (i've tested it on different machines).\n- Switching back to qutebrowser's workspace unfreezes mpv.. Well, thats weird: running strace to the mpv process, stops the problem from reproducing. I guess it has something to do with QT running under wayland - so yeah, that must be a different problem.. Thanks for the suggestion @aminb - i tried it but still the same.\nWhat did work though is the --no-terminal, so i think @martinetd guessed it right: something to do with mpv's stdout, when is run from QT under wayland (under x11 is ok). Something similar to when running mpv under tmux and then entering copy-mode.. Thanks for the patch, it works better now but there are still issues with resizing: mismatch window - borders size, which might also produce artifacts on the background tiling area.. ",
    "aminb": "Out of curiosity, have you tried setting mpv's x11-bypass-compositor=no and see if that works around the issue or not? You can either do that in the config file or like mpv --x11-bypass-compositor=no in terminal.. Right. @SirCmpwn also pointed out that it probably happens because new cursor is created without cleaning up the old one, which they end up piling up on top of each other.\nAny hints on where to look for this? My first instinct was to look into sway/commands/reload.c but there wasn't much there, aside from a call to load_main_config. sway/config.c does seem to include some mentions to inputs.. ",
    "jgbyrne": "Ok, sorry.. Ok, sorry.. I'm not sure if there's a formal structure for a test plan that you'd like me to follow, but the bug can be demonstrated by running the command:\nswaymsg \"output {NAME} dpms off\"\n\nWhere {NAME} is taken from the output of swaymsg -t get_outputs.\nExpected behaviour is for the output in question to turn off, actual behaviour was that nothing would happen.\nWhen the command:\nswaymsg \"output * dpms off\"\n\nis run, all outputs should turn off - this was working anyway, and still is as far as I can ascertain on my one-monitor laptop.\nThis patch, which removes the null clobber, shouldn't affect any other logic in that procedure, and as far as I can determine it doesn't, because all logic below it is already doing the necessary checks anyway.. I'm not sure if there's a formal structure for a test plan that you'd like me to follow, but the bug can be demonstrated by running the command:\nswaymsg \"output {NAME} dpms off\"\n\nWhere {NAME} is taken from the output of swaymsg -t get_outputs.\nExpected behaviour is for the output in question to turn off, actual behaviour was that nothing would happen.\nWhen the command:\nswaymsg \"output * dpms off\"\n\nis run, all outputs should turn off - this was working anyway, and still is as far as I can ascertain on my one-monitor laptop.\nThis patch, which removes the null clobber, shouldn't affect any other logic in that procedure, and as far as I can determine it doesn't, because all logic below it is already doing the necessary checks anyway.. I'm afraid it'll probably be a little while before I have a moment to look at this, maybe in a few weeks I'll get a chance to sort it out properly.. I'm afraid it'll probably be a little while before I have a moment to look at this, maybe in a few weeks I'll get a chance to sort it out properly.. ",
    "japrogramer": "Super Weird, I can start weston and inside weston I can launch sway with no errors. Super Weird, I can start weston and inside weston I can launch sway with no errors. I had to revert to the previous version of the linux kernel 4.19 \n@7415963987456321 which version of wlroots do you have.. I had to revert to the previous version of the linux kernel 4.19 \n@7415963987456321 which version of wlroots do you have.. @emersion look at my dmesg that is where the error is ...\n```\n[  794.999608] amdgpu 0000:02:00.0: [gfxhub] VMC page fault (src_id:0 ring:221 vmid:1 pasid:32768, for process sway pid 4391 thread sway:cs0 pid 4392)\n[  794.999611] amdgpu 0000:02:00.0:   in page starting at address 0x0000800100038000 from 27\n[  794.999614] [Hardware Error]: Deferred error, no action required.\n[  794.999618] [Hardware Error]: CPU:0 (17:11:0) MC20_STATUS[-|-|MiscV|-|AddrV|Deferred|-|SyndV\n[  794.999621] amdgpu 0000:02:00.0: VM_L2_PROTECTION_FAULT_STATUS:0x001009BA\n[  794.999621] |-|UECC]: 0x9c2030000001085b\n[  794.999626] [Hardware Error]: Error Addr: 0x00007ffcffffff00\n[  794.999627] [Hardware Error]: IPID: 0x0000002e00000000, Syndrome: 0x000000005b240203\n[  794.999631] [Hardware Error]: Coherent Slave Extended Error Code: 1\n[  794.999633] [Hardware Error]: Coherent Slave Error: Address violation.\n[  794.999636] [Hardware Error]: cache level: L3/GEN, mem/io: IO, mem-tx: IRD, part-proc: SRC (no timeout)\n```\nsame thing happens with weston.. @emersion look at my dmesg that is where the error is ...\n```\n[  794.999608] amdgpu 0000:02:00.0: [gfxhub] VMC page fault (src_id:0 ring:221 vmid:1 pasid:32768, for process sway pid 4391 thread sway:cs0 pid 4392)\n[  794.999611] amdgpu 0000:02:00.0:   in page starting at address 0x0000800100038000 from 27\n[  794.999614] [Hardware Error]: Deferred error, no action required.\n[  794.999618] [Hardware Error]: CPU:0 (17:11:0) MC20_STATUS[-|-|MiscV|-|AddrV|Deferred|-|SyndV\n[  794.999621] amdgpu 0000:02:00.0: VM_L2_PROTECTION_FAULT_STATUS:0x001009BA\n[  794.999621] |-|UECC]: 0x9c2030000001085b\n[  794.999626] [Hardware Error]: Error Addr: 0x00007ffcffffff00\n[  794.999627] [Hardware Error]: IPID: 0x0000002e00000000, Syndrome: 0x000000005b240203\n[  794.999631] [Hardware Error]: Coherent Slave Extended Error Code: 1\n[  794.999633] [Hardware Error]: Coherent Slave Error: Address violation.\n[  794.999636] [Hardware Error]: cache level: L3/GEN, mem/io: IO, mem-tx: IRD, part-proc: SRC (no timeout)\n```\nsame thing happens with weston.. @emersion fixed it by adding iommu=soft to the boot options. @emersion fixed it by adding iommu=soft to the boot options. ",
    "paulriddle": "I'm having something similar o archlinux as well. I did a huge system update yesterday. Can't start wayland from tty. However, I can start it from within i3. Weston also appears to be working without issues. This is the output of sway -d:\n```\nI: 06/10/18 14:37:54 - [main.c:250] Linux atlantis 4.16.13-2-ARCH #1 SMP PREEMPT Fri Jun 1 18:46:11 UTC 2018 x86_64 GNU/Linux\nI: 06/10/18 14:37:54 - [main.c:222] Contents of /etc/os-release:\nI: 06/10/18 14:37:54 - [main.c:229] NAME=\"Arch Linux\"\nI: 06/10/18 14:37:54 - [main.c:229] PRETTY_NAME=\"Arch Linux\"\nI: 06/10/18 14:37:54 - [main.c:229] ID=arch\nI: 06/10/18 14:37:54 - [main.c:229] ID_LIKE=archlinux\nI: 06/10/18 14:37:54 - [main.c:229] ANSI_COLOR=\"0;36\"\nI: 06/10/18 14:37:54 - [main.c:229] HOME_URL=\"https://www.archlinux.org/\"\nI: 06/10/18 14:37:54 - [main.c:229] SUPPORT_URL=\"https://bbs.archlinux.org/\"\nI: 06/10/18 14:37:54 - [main.c:229] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\nI: 06/10/18 14:37:54 - [main.c:207] PATH=/home/riddle/.rbenv/shims:/home/riddle/.config/fnm/bin:/home/riddle/bin:/home/riddle/.cargo/bin:/home/riddle/.rbenv/bin:/home/riddle/.fzf/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nI: 06/10/18 14:37:54 - [main.c:207] LD_LOAD_PATH=(null)\nI: 06/10/18 14:37:54 - [main.c:207] LD_PRELOAD_PATH=(null)\nI: 06/10/18 14:37:54 - [main.c:207] LD_LIBRARY_PATH=(null)\nI: 06/10/18 14:37:54 - [main.c:207] SWAY_CURSOR_THEME=(null)\nI: 06/10/18 14:37:54 - [main.c:207] SWAY_CURSOR_SIZE=(null)\nI: 06/10/18 14:37:54 - [main.c:207] SWAYSOCK=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_DRM_DEVICE=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_SHM=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_OUTPUTS=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_XWAYLAND=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_LIBINPUT=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_REPEAT_DELAY=(null)\nI: 06/10/18 14:37:54 - [main.c:207] WLC_REPEAT_RATE=(null)\nI: 06/10/18 14:37:54 - [main.c:207] XKB_DEFAULT_RULES=(null)\nI: 06/10/18 14:37:54 - [main.c:207] XKB_DEFAULT_MODEL=(null)\nI: 06/10/18 14:37:54 - [main.c:207] XKB_DEFAULT_LAYOUT=us,ru\nI: 06/10/18 14:37:54 - [main.c:207] XKB_DEFAULT_VARIANT=(null)\nI: 06/10/18 14:37:54 - [main.c:207] XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle,caps:ctrl_modifier\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] logind: session control granted\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Running on vt 2 (fd 0)\nI: 06/10/18 14:37:54 - [main.c:50] [wlc] Failed to open X11 display\nI: 06/10/18 14:37:54 - [main.c:466] Starting sway version 0.15.2\nD: 06/10/18 14:37:54 - [config.c:450] Set XDG_CONFIG_HOME to /home/riddle/.config\nI: 06/10/18 14:37:54 - [config.c:475] Loading config from /etc/sway/security.d/00-defaults\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'permit * fullscreen keyboard mouse'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(permit) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target ''\nD: 06/10/18 14:37:54 - [permit.c:71] Permissions granted to * for features 112\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'permit /usr/bin/swaylock lock'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(permit) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaylock'\nD: 06/10/18 14:37:54 - [permit.c:71] Permissions granted to /usr/bin/swaylock for features 113\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'permit /usr/bin/swaybg background'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(permit) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaybg'\nD: 06/10/18 14:37:54 - [permit.c:71] Permissions granted to /usr/bin/swaybg for features 116\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'permit /usr/bin/swaygrab screenshot'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(permit) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaygrab'\nD: 06/10/18 14:37:54 - [permit.c:71] Permissions granted to /usr/bin/swaygrab for features 120\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'permit /usr/bin/swaybar panel'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(permit) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaybar'\nD: 06/10/18 14:37:54 - [permit.c:71] Permissions granted to /usr/bin/swaybar for features 114\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'ipc /usr/bin/swaymsg {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(ipc) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaymsg'\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command ' enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler() 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC * feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'events {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(events) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command ' disabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler() 0\nD: 06/10/18 14:37:54 - [ipc.c:158] Disabled IPC * event\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:822] End of IPC events block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:817] End of IPC block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'ipc /usr/bin/swaybar {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(ipc) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaybar'\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bar-config enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bar-config) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC bar-config feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'outputs enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(outputs) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC outputs feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'workspaces enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(workspaces) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC workspaces feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'command enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(command) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC command feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'events {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(events) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'workspace enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(workspace) 0\nD: 06/10/18 14:37:54 - [ipc.c:155] Enabled IPC workspace event\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'mode enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(mode) 0\nD: 06/10/18 14:37:54 - [ipc.c:155] Enabled IPC mode event\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:822] End of IPC events block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:817] End of IPC block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'ipc /usr/bin/swaygrab {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(ipc) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaygrab'\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'outputs enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(outputs) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC outputs feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'tree enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(tree) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC tree feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:817] End of IPC block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'ipc /usr/bin/swaylock {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(ipc) 0\nD: 06/10/18 14:37:54 - [security.c:14] Validating IPC target '/usr/bin/swaylock'\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'outputs enabled'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(outputs) 0\nD: 06/10/18 14:37:54 - [ipc.c:106] Enabled IPC outputs feature\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:817] End of IPC block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'commands {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(commands) 0\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler() 0\nI: 06/10/18 14:37:54 - [commands.c:623] Set command policy for * to -1\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(fullscreen) 0\nI: 06/10/18 14:37:54 - [commands.c:623] Set command policy for fullscreen to 10\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nI: 06/10/18 14:37:54 - [commands.c:623] Set command policy for bindsym to 1\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(exit) 0\nI: 06/10/18 14:37:54 - [commands.c:623] Set command policy for exit to 2\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(kill) 0\nI: 06/10/18 14:37:54 - [commands.c:623] Set command policy for kill to 2\nD: 06/10/18 14:37:54 - [config.c:812] End of commands block\nI: 06/10/18 14:37:54 - [config.c:475] Loading config from /home/riddle/.config/sway/config\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $win Mod4'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $alt Mod1'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $left h'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $down j'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $up k'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $right l'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $term termite'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'set $menu dmenu_run'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(set) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+Return exec $term'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+Return to command exec termite\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+Shift+q kill'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+Shift+q to command kill\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+d exec $menu'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+d to command exec dmenu_run\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'floating_modifier $alt normal'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(floating_modifier) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+Shift+c reload'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+Shift+c to command reload\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+Shift+e exit'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+Shift+e to command exit\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym XF86MonBrightnessDown exec brightnessctl set 5%-'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound XF86MonBrightnessDown to command exec brightnessctl set 5%-\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym XF86MonBrightnessUp exec brightnessctl set +5%'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound XF86MonBrightnessUp to command exec brightnessctl set +5%\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+$left focus left'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+h to command focus left\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+$down focus down'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+j to command focus down\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+$up focus up'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+k to command focus up\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+$right focus right'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+l to command focus right\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+$left move left'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+h to command move left\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+$down move down'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+j to command move down\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+$up move up'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+k to command move up\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+$right move right'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+l to command move right\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+1 workspace 1'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+1 to command workspace 1\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+2 workspace 2'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+2 to command workspace 2\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+3 workspace 3'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+3 to command workspace 3\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+4 workspace 4'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+4 to command workspace 4\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+5 workspace 5'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+5 to command workspace 5\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+6 workspace 6'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+6 to command workspace 6\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+7 workspace 7'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+7 to command workspace 7\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+8 workspace 8'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+8 to command workspace 8\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+9 workspace 9'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+9 to command workspace 9\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+0 workspace 10'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+0 to command workspace 10\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+1 move container to workspace 1'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+1 to command move container to workspace 1\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+2 move container to workspace 2'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+2 to command move container to workspace 2\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+3 move container to workspace 3'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+3 to command move container to workspace 3\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+4 move container to workspace 4'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+4 to command move container to workspace 4\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+5 move container to workspace 5'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+5 to command move container to workspace 5\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+6 move container to workspace 6'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+6 to command move container to workspace 6\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+7 move container to workspace 7'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+7 to command move container to workspace 7\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+8 move container to workspace 8'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+8 to command move container to workspace 8\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+9 move container to workspace 9'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+9 to command move container to workspace 9\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+0 move container to workspace 10'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+0 to command move container to workspace 10\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+b splith'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+b to command splith\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+v splitv'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+v to command splitv\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+s layout stacking'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+s to command layout stacking\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+w layout tabbed'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+w to command layout tabbed\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+e layout toggle split'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+e to command layout toggle split\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+f fullscreen'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+f to command fullscreen\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+Shift+space floating toggle'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+Shift+space to command floating toggle\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+space focus mode_toggle'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+space to command focus mode_toggle\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+a focus parent'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+a to command focus parent\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+Shift+minus move scratchpad'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+Shift+minus to command move scratchpad\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $win+minus scratchpad show'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod4+minus to command scratchpad show\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'default_border none'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(default_border) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $alt+r mode \"resize\"'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Mod1+r to command mode \"resize\"\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'mode \"resize\" {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(mode) 0\nD: 06/10/18 14:37:54 - [mode.c:48] Switching to mode resize'\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $left resize shrink width 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound h to command resize shrink width 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $down resize grow height 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound j to command resize grow height 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $up resize shrink height 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound k to command resize shrink height 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym $right resize grow width 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound l to command resize grow width 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Left resize shrink width 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Left to command resize shrink width 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Down resize grow height 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Down to command resize grow height 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Up resize shrink height 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Up to command resize shrink height 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Right resize grow width 10 px or 10 ppt'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Right to command resize grow width 10 px or 10 ppt\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Return mode \"default\"'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Return to command mode \"default\"\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bindsym Escape mode \"default\"'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bindsym) 0\nD: 06/10/18 14:37:54 - [bind.c:94] bindsym - Bound Escape to command mode \"default\"\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:789] End of mode block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'bar {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(bar) 0\nD: 06/10/18 14:37:54 - [bar.c:57] Configuring bar bar-0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'position bottom'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(position) 0\nD: 06/10/18 14:37:54 - [position.c:31] Setting bar position 'bottom' for bar: bar-0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'colors {'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(colors) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'statusline #ffffff'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(statusline) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'background #323232'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(background) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'inactive_workspace #32323200 #32323200 #5c5c5c'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(inactive_workspace) 0\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:807] End of bar colors block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command '}'\nD: 06/10/18 14:37:54 - [config.c:801] End of bar block\nI: 06/10/18 14:37:54 - [commands.c:519] handling config command 'include /etc/sway/config.d/*'\nD: 06/10/18 14:37:54 - [commands.c:344] find_handler(include) 0\nD: 06/10/18 14:37:54 - [config.c:615] /etc/sway/config.d/* not found.\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] libinput: resume\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Activating tty\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1920x1080@60000 *\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1680x1050@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1280x1024@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1440x900@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1280x800@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1280x720@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 1024x768@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 800x600@60000 \nD: 06/10/18 14:37:54 - [main.c:52] [wlc] MODE: (0) 640x480@60000 \nI: 06/10/18 14:37:54 - [main.c:50] [wlc] Connector 1 is not connected or has no modes\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] eDP-1 Chose mode (0) 1920x1080\nD: 06/10/18 14:37:54 - [handlers.c:221] Output 1 resolution changed to 1920 x 1080\nD: 06/10/18 14:37:54 - [container.c:138] New output 1:eDP-1\nD: 06/10/18 14:37:54 - [layout.c:63] Adding 0x55d8630672e0 (1, 1920.000000x1080.000000) to 0x55d8617078a0 (0, 0.000000x0.000000)\nD: 06/10/18 14:37:54 - [config.c:1060] Invoking swaybar for bar id 'bar-0'\nD: 06/10/18 14:37:54 - [workspace.c:46] Workspace: Generating new workspace name for output eDP-1\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '10'\nD: 06/10/18 14:37:54 - [workspace.c:109] Workspace: Found free name 10\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '1'\nD: 06/10/18 14:37:54 - [workspace.c:109] Workspace: Found free name 1\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '2'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '3'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '4'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '5'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '6'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '7'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '8'\nD: 06/10/18 14:37:54 - [workspace.c:68] Got valid workspace command for target: '9'\nD: 06/10/18 14:37:54 - [container.c:204] Creating default workspace 1\nD: 06/10/18 14:37:54 - [container.c:221] Added workspace 1 for output 1\nD: 06/10/18 14:37:54 - [layout.c:63] Adding 0x55d863067580 (2, 1920.000000x1080.000000) to 0x55d8630672e0 (1, 1920.000000x1080.000000)\nD: 06/10/18 14:37:54 - [debug_log.c:103] Setting focus to 0x55d863067580:18446744073709551615 (WORKSPACE '1')\nD: 06/10/18 14:37:54 - [ipc-server.c:1056] Sending workspace::focus event\nI: 06/10/18 14:37:54 - [main.c:50] [wlc] Arguments are inconsistent\nI: 06/10/18 14:37:54 - [main.c:50] [wlc] Could not initialize any context\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Released drm surface (0x55d863070db0)\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Removed bsurface from output (1)\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Added output (1)\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] become active\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Cleanup wlc\nD: 06/10/18 14:37:54 - [handlers.c:1113] Compositor is ready, executing cmds in queue\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Closing Xwayland\nD: 06/10/18 14:37:54 - [main.c:52] [wlc] Closed drm\nE: 06/10/18 14:37:54 - [main.c:48] [wlc] Failed to activate vt2 for restoration\nE: 06/10/18 14:37:54 - [main.c:48] [wlc] Failed to switch back to vt2\n```$WLC_XWAYLANDis unset. This is ofswaymsg -t get_outputs`:\nsway socket not detected.\nE: 06/10/18 15:20:23 - [ipc-client.c:37] Unable to connect to\nI have AMD Radeon RX540. From brief searching I've got the impression that GPU driver might be the issue. My sway config is https://github.com/paulriddle/dotfiles/blob/634eec858e2dc127ffaac8211b2082f560c4d35d/sway/.config/sway/config except without\nexec redshift -l 56.8:60.6 -t 5700:3600 -g 0.8 -m randr\n$XDG_RUNTIME_DIR is /run/user/1000. There are some directories and files.. ",
    "ZJaume": "I have the same issue and my debug log says the same wlc errors, also socket not detected. I have radeon HD5450.. I can confirm that downgrading from mesa 18.1.1 to 18.0.4 solves the issue for me. I can confirm that downgrading from mesa 18.1.1 to 18.0.4 solves the issue for me. Yep, it's working, thanks!. ",
    "ianbashford": "Downgrading mesa to 18.0.4.1 solved the issue for me too.. ",
    "adonikh": "Hello, I'm having the same issue with mouse window focus, It doesn't work at first boot up when I log out and log back in it works again normally. Any luck fixing this?. Hello, I'm having the same issue with mouse window focus, It doesn't work at first boot up when I log out and log back in it works again normally. Any luck fixing this?. ",
    "ael-code": "sorry for the noise.... ",
    "The-King-of-Toasters": "I second adding an event toggle feature. Coming from i3 XF86TouchpadToggle worked OOTB. I've replicated this using a script, but it's too process intensive for actual use.. Can someone please mark this as a bug? Because this is a pretty serious issue.. I'd like to point out that unlock on resume was working 100% of the time for me, and now it works 0%. This is a regression, and a pretty big one at that. . So I've compiled a debug build and I've run it in gdb, but I'm wondering how to actually save something in gdb to pass on, being that I can't unlock my screen to go to my terminal.. Ok, I've got my logs and a generated core dump here. The sha256sum is 3664bc74367d802de33962f536ac946642fb38d23358f4cf0fbe5a1353f08e84. Also, I've replicated the issue just by switching back and forth between sway and tty2, no suspend needed. It seems swaylock is constantly trying to authenticate after one bad password is accepted.. Ok, bisect complete, it was 271b24ddfb4ab06452c90a680aaa81385cf88407:\n```\n271b24ddfb4ab06452c90a680aaa81385cf88407 is the first bad commit\ncommit 271b24ddfb4ab06452c90a680aaa81385cf88407\nAuthor: Ryan Dwyer ryandwyer1@gmail.com\nDate:   Sun Sep 23 22:00:18 2018 +1000\nFix GtkMenuBar always opening first item\n\nIt seems like advertising that we support touch when we don't, while\nusing SSD, makes GtkMenuBar misbehave. Please don't ask me why...\n\n:040000 040000 cc0c5873899c6f0681952a48113d7d461c770a60 ed56ac81f4194f56a3e72f7a638175baeb2e57fb M      sway\n``. @RyanDwyer \nOK, I have mixed results. The good news is that the lag is gone and I'm able to enter my password from both resume and changing tty's. The bad news is that when unlocking from resumeswaylockstill doesn't register my password's first character, and only shows the wheel on the second one. Striking any other key likeEscorF1-12seems to fix that problem.. @RyanDwyer \nOk, it seems that disablinggo-luks-suspendstops the eat-the-first-char behaviour. When enabled, it seems that the first char on any input is eaten. I tested this by having a terminal open and striking thea` key.\nWould this count as a fix? I'm fine disabling go-luks-suspend, but I'd effectively be disabling a security feature for something that worked fine before.. One that isn't based on wlroots?. Any suggestions? I only know of GNOME and KDE.. Both of them immediately crash on me when trying their wayland sessions, any others?. Locks up my laptop. I'm beginning to think I have a cursed thinkpad.. Confirmed not working on 51f68e10. Oops, I thought I'd been merged. Gimme a couple of hours and I'll test it properly.. This is already closed, but I'm just confirming that #2735 does fix my problem. Thanks @RedSoxFan!. That's a shame. I guess this would mean that not even wayland programs could move the mouse on your behalf?. Oh yeah, looks like I missed that section in sway-input(5). Since this is related to #3443, I also support separating disabled_on_external_mouse.. ",
    "DawidLoubser": "Thanks @emersion ! I'm running latest Git master BTW.\nI'll keep an eye on this then, with the hope that it gets fixed in the near future - with full respect to the complexities involved, and wishing I could help you but my C is pretty weak.. Hi, was just about to figure out how to do this, when I thought I'd try the latest master, and the issue is resolved. Thanks!\nP.S. Just for my benefit, how do I get a hold of the stack trace when sway has crashed?. Sure thing, apologies for the noise.. I'm also experiencing the exact same problem - also tried to fiddle with the QT/Wayland env vars to no avail.. As default behaviour, forbidding child windows from being hidden behind their parent seems correct to me, so I vote +1 on that. \nCan anybody think of a scenario where that would be the wrong behaviour?. I've set\nQT_QPA_PLATFORMTHEME=qt5ct \nQT_QPA_PLATFORM=wayland-egl\nAnd when launching telegram-desktop, it prints \nUsing Wayland-EGL. Interesting... so you're saying that in Wayland there is no way for an application to specify a small, floating window such that a tiling window manager can honor that?\nOr, if so - what is the \"proper\" solution from a wayland perspective?\nOr, do you mean simply that this is probably a buggy implementation from Telegram's part?. Thanks for the clarification and amazing work @emersion !. I can concur that, on the machine I'm currently using (intel embedded graphics) redshift no longer works either. Running on 1.0.alpha.6.r21.g082488a8-1. Can confirm, this bug has been affecting me over the past week or so. I have, in my .config/sway/config:\nexec swayidle before-sleep 'swaylock -c 102020 -i /some/picture.jpg'\nNote: Pretty sure this never happens when I explicitly activate swaylock (with shortcut key). Only when swayidle invokes it.. Agreed, this started happening for me today also.. Log file: sway.log\nAh, I've been wondering how to run sway with logging! Thanks. Log attached. \nIt would make my day to get sway running on this golden oldie. Sway seems to be so resource-efficient, it's perfect for an almost 20-year-old machine.\nHope you can help! With regards to building via Arch Linux AUR, this was my process:\n\nI manually installed meson 0.48 via pip - 32-bit AUR doesn't have it.\nI installed wlroots-git from AUR, after changing arch to i686 and removing meson build dep.\nI installed sway-latest-git from AUR, after changing arch to i686 and removing meson build dep.\n\nEverything compiled fine, but fails to load as per attached sway.log.. Weston (official 32-bit build in Arch community repo) also fails to launch:\n[00:20:12.566] weston 5.0.0\n               https://wayland.freedesktop.org\n               Bug reports to: https://gitlab.freedesktop.org/wayland/weston/issues/\n               Build: unknown (not built from git or tarball)\n[00:20:12.567] Command line: weston\n[00:20:12.567] OS: Linux, 4.18.6-arch1-1.0-ARCH, #1 SMP PREEMPT Sat Sep 8 12:28:56 CEST 2018, i686\n[00:20:12.567] Starting with no config file.\n[00:20:12.567] Output repaint window is 7 ms maximum.\n[00:20:12.621] Loading module '/usr/lib/libweston-5/x11-backend.so'\n[00:20:12.676] Loading module '/usr/lib/libweston-5/gl-renderer.so'\n[00:20:12.680] EGL client extensions: EGL_EXT_platform_base\n               EGL_KHR_client_get_all_proc_addresses EGL_EXT_client_extensions\n               EGL_KHR_debug EGL_EXT_platform_wayland EGL_EXT_platform_x11\n               EGL_MESA_platform_gbm EGL_MESA_platform_surfaceless\n[00:20:12.694] No EGL configs with appropriate attributes.\n[00:20:12.694] failed to choose EGL config\n[00:20:12.695] fatal: failed to create compositor backend\nAny idea how to debug this further?\nOr, perhaps a better question is - is there perhaps a fundamental reason why wayland wouldn't run on a 32-bit machine?. > I think i686 is a red herring. This is more likely to be the culprit:\n\n\nInitializing DRM backend for /dev/dri/card0 (radeon)\n\nThe radeon driver is old and unmaintained, I'm not sure it's going to have all of the features we need. Does AMDGPU work with your card?\n\nAfraid it does not. \n@emersion might be onto something - is there any way which I can find out which EGL configs are available?\nI started this little experiment with my doubts about sway running on this old hardware - but if there is a way to get it to work, it would be really sweet :-). I've noticed this as well. If I take Firefox to fullscreen and back (Meta + F) then it sits normally.. sway version 1.0-alpha.6-145-gc8d1f376 (Oct  4 2018, branch 'master'). Just came here to post the same thing. Attached another log, if it helps.\nsway-second-screen-not-working.log\nBehaviour:\n\nOn startup, both monitors (internal laptop, and external) fire up.\nSometimes the external monitor is all grey, sometimes is shows my background image\nIf I switch to external monitor (e.g. workspace 2) and do something like open a terminal, it opens, but does not display at all.\nIf I \"move current focused window\" to e.g. my laptop monitor, it appears.\nIf I move it back to external monitor, it disappears - external monitor just displays either background, or neutral grey.\n\nAttached logfile was captured while doing some of the above, if that helps.\n$ swaymsg -v\nsway version 1.0-alpha.6-187-ga999269e (Oct  8 2018, branch 'master'). This may be obvious, but just to add to the above: On the same machine with the same kernel + drivers, multi-monitor with xrandr in i3 works fine, but not in sway.\nI'm sure that doesn't eliminate either as options for the source of this bug, but just wanted to add that.. For the record, my sway config does not contain any references or configuration to external displays - I've always just relied on the automatic behaviour when I plug in an external display.\nIn addition to my Optimus laptop, I'm also running sway on a pure intel laptop. I've been too afraid to upgrade sway because of this issue, but I'll bite the bullet and report back if the issue also happens on it ( and figure out which version to downgrade to again, as I actually use multi-monitor on this laptop with sway all the time, and the per-display scaling etc is glorious. Don't want to lose that like I did on my Optimus laptop.. Relevant section from input log... no issues reported. Any theories?\nDo I need to apply any other configuration to libinput separately?\n```\n2019-02-23 22:32:38 - [sway/sway/config.c:728] Read line 74: input \"SYNA2393:00 06CB:7A13 Touchpad\" {\n2019-02-23 22:32:38 - [sway/sway/config.c:782] Entering block 'input \"SYNA2393:00 06CB:7A13 Touchpad\"'\n2019-02-23 22:32:38 - [sway/sway/config.c:728] Read line 75:    dwt enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:357] Config command: input \"SYNA2393:00 06CB:7A13 Touchpad\" dwt enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(input)\n2019-02-23 22:32:38 - [sway/sway/commands.c:377] After replacement: input \"SYNA2393:00 06CB:7A13 Touchpad\" dwt enabled\n2019-02-23 22:32:38 - [sway/sway/commands/input.c:48] entering input block: SYNA2393:00 06CB:7A13 Touchpad\n2019-02-23 22:32:38 - [sway/sway/config/input.c:14] new_input_config(SYNA2393:00 06CB:7A13 Touchpad)\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(dwt)\n2019-02-23 22:32:38 - [sway/sway/commands.c:406] Subcommand: dwt enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(dwt)\n2019-02-23 22:32:38 - [sway/sway/config/input.c:160] Adding non-wildcard input config\n2019-02-23 22:32:38 - [sway/sway/config/input.c:177] Config stored for input SYNA2393:00 06CB:7A13 Touchpad\n2019-02-23 22:32:38 - [sway/sway/config.c:728] Read line 76:    tap enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:357] Config command: input \"SYNA2393:00 06CB:7A13 Touchpad\" tap enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(input)\n2019-02-23 22:32:38 - [sway/sway/commands.c:377] After replacement: input \"SYNA2393:00 06CB:7A13 Touchpad\" tap enabled\n2019-02-23 22:32:38 - [sway/sway/commands/input.c:48] entering input block: SYNA2393:00 06CB:7A13 Touchpad\n2019-02-23 22:32:38 - [sway/sway/config/input.c:14] new_input_config(SYNA2393:00 06CB:7A13 Touchpad)\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(tap)\n2019-02-23 22:32:38 - [sway/sway/commands.c:406] Subcommand: tap enabled\n2019-02-23 22:32:38 - [sway/sway/commands.c:145] find_handler(tap)\n2019-02-23 22:32:38 - [sway/sway/config/input.c:154] Merging on top of existing input config\n2019-02-23 22:32:38 - [sway/sway/config/input.c:177] Config stored for input SYNA2393:00 06CB:7A13 Touchpad\n2019-02-23 22:32:38 - [sway/sway/config.c:728] Read line 77: }\n2019-02-23 22:32:38 - [sway/sway/config.c:799] Exiting block 'input \"SYNA2393:00 06CB:7A13 Touchpad\"'\n``. [sway.log](https://github.com/swaywm/sway/files/2897335/sway.log)\n. Thank you so much @emersion - you are right, theIdentifieras perswaymsg -t get_outputs` has that additional vendor ID stuck to the front of it. Works perfectly now.. ",
    "blitmap": "I'm not sure why the tag 'fixed by wlroots' was added...  I built the 'sway-wlroots-git' package.  It was not working.  Are you saying in the future it may be fixed by that library?. ",
    "sharethewisdom": "Is there some progress on this issue? Should one create a wlroots issue, then? How can I help other than confirming @RedSoxFan 's observations? I 'd really like this to be solved because I heavily rely on both sway-wlroots and mupdf. The same problem occurs with mupdf-gl, by the way.\nI guess mupdf does not \"set metadata to its windows\" (as quoted from xdotool(1)), and so there is no PID associated with it. Is that an sway problem? https://github.com/swaywm/sway/blob/881f729af9e675710dea43eb268cf644e6ec66be/sway/tree/view.c#L449\nedit: I'm using llpp now, which is receiving keys fine on sway version 1.0-alpha.5-114-g389d159c (Aug 19 2018, branch 'master'). The output of xwininfo -all for both viewers does not reveal much, though.. My problem with mupdf might be related. I tried downgrading several versions of mupdf to be sure. Although the window isn't floating, I can only rarely (1 time out of 30 or so) make mupdf react to key presses when the window is focused. Scrolling using the mousepad works (edit: most of the time). I used the stock config, /etc/sway/config and sway --validate shows no errors. I it with a new user across several reboots.\nLinux libreboot 4.18.1-arch1-1-ARCH #1 SMP PREEMPT Wed Aug 15 21:11:55 UTC 2018 x86_64 GNU/Linux`\nsway version 1.0-alpha.5-114-g389d159c (Aug 19 2018, branch 'master')\nI'll try to debug, but have little time.\nps.: I also have been experiencing issues with Firefox: left clicks sometimes suddenly cease all interaction on the webpage and the toolbar. The context menu works, though.. yeah you have a point.\nBut when it comes to locking: I like the possibility to lock the underlying tty. Another feature in physlock is disabling the magic SysRq key.\nThe multiseat idea reminded me of setting general limitations to console switching which would make sense in such a setup to avoid abuse or confusion (if the users where students for example). . ow! cool. sorry. ",
    "Wolf480pl": "\nStrangely, keys seems to work when mupdf is the first xwayland window to be opened, but not after that.\n\nI've been testing it with rootston, and I found that even if it's the first xwayland window, it only works until it loses focus. After it loses and regains focus, the keys no longer work.. According to xwininfo -all, mupdf doesn't set the input flag in WM hints.\n~~I looked it up in the ICCCM Spec, and looks like there are 3 ways to handle input (and 1 to not handle it), and one of them involves setting WM_TAKE_FOCUS in WM_PROTOCOLS, but unsetting the input flag... in which case the WM should still send the WM_TAKE_FOCUS message, if I understand correctly?~~\n~~Edit: \nBut looks like it's not case with mupdf - it doesn't have WM_TAKE_FOCUS in WM_PROTOCOLS.\nSo maybe the question should be: why does it work on i3?~~\nOk, I misunderstood that.\nThere's a flag in WM hints that says whether the input hint is meaningful. mupdf doesn't set it, which, as far as I understand, means the input hint should be ignored, and a sane default (true) should be used.\nThe following change seems to fix it:\n-       if (xsurface->hints && !xsurface->hints->input) {\n+       if (xsurface->hints && !xsurface->hints->input\n+               && (xsurface->hints->flags & XCB_ICCCM_WM_HINT_INPUT)\n+       ) {\n(and this is also more-or-less what i3 does 1 2). Shouldn't sway be declinated, eg.\nJe\u015bli chcesz wsprze\u0107 rozw\u00f3j swaya,\n?. pomocy or podr\u0119cznika ?. IMO ustawi\u0107 bit suid - \"set the suid bit\", as opposed to \"execute the suid command\".. Wouldn't z TTYka be more idiomatic?. I'd rather translate it as menad\u017cery ekranu, unless menad\u017cery wy\u015bwietlania is an established term. Or as display managery, if we want to sacrifice grammar for clarity.. The original English README is very informal (eg. \"stop by the IRC channel\"), but ok.. ",
    "rustysec": "i think i got it all, thanks. i can work the nested tabs and submit a second pr. i'll follow the style/contribution guide this time :wink: . ",
    "rkubosz": "Yes, I will add appropriate paragraph to man pages.. Probably not. In the worst case the identifier will not match any physical button and the scroll_button option will not work. I don't see any chance to crash sway or make it unusable by setting too big identifier.\nI will modify it.. ",
    "TimsManter": "\nAbility to set command to run in swaylock container just like solid color or image so the script wouldn't be mandatory\nWhat?\n\nCurrently swaylock behaves as a top layer to sway workspace. swaylock by itself renders two separate layers - background and indicator - it's possible to set color or image as a background layer but not a window like termite. Such option would make many customization possibilities.\n\nI'm not sure what you expect to come out of this ticket.\n\nI introduced my hack to make something like xscreensaver mixed with lock screen but in Wayland/Sway way and only thing I expect is opinion that it could be eventually implemented more natively in Sway later on in form of appearance settings in this or other way.. ",
    "yiwan": "How is this feature going?\nI cloud totally drop off i3wm, once pen pressure is working :). ",
    "ronchaine": "What would it require to implement this?  I am pretty swamped by work but I might have time to start looking at this during the weekend.\nI haven't touched sway code yet except for building it, so might be a bit rough ride though.. xkb_layout fi also makes me unable to bind both shift+space and mod+shift+space. ",
    "jniedrauer": "\nI am able to replicate this consistently when an output * command is given before (or given without) output  commands. When the output  commands are first, I cannot replicate at all.\n\nConfirmed, this is the behavior I am seeing. Thank you.\nI think this is the first application I've ever seen where assertions are a normal part of runtime (and not just tests). It may just be that I haven't ever read low enough level code before. But is this normal?\nAnd how do you solve this type of problem without blocking until the assertions pass?. A little late, but yes. I've confirmed that I am no longer able to reproduce the issue. Thanks for the quick fix.. Firefox nightly 65.0a1 still has the browser bar crash. It seems to perform in an identical fashion to firefox 63, including the same error message output and performance issues.. ",
    "Rikorose": "Alright, I had this in my config file from 0.15 and it worked back then. I removed it and it's fine now.. Now I am. Confirmed fixed.. @johanhelsing \nedit:\nBy the way QT_WAYLAND_FORCE_DPI=96 fixes the issue for me.\n/edit\n1.\nbash\n[rik@T450 ~]$ dnf info qt5-devel\nLast metadata expiration check: 2 days, 0:12:04 ago on Fri 14 Sep 2018 11:40:12 AM CEST.\nInstalled Packages\nName         : qt5-devel\nVersion      : 5.11.1\nRelease      : 3.fc28\nArch         : noarch\nSize         : 25  \nSource       : qt5-5.11.1-3.fc28.src.rpm\nRepo         : @System\nFrom repo    : updates\nSummary      : Qt5 meta devel package\nURL          : https://getfedora.org/\nLicense      : GPLv3\nDescription  : Qt5 meta devel package.\n2.\nI'm on a 14\" 1080p screen. Seems correct:\nbash\ninterface: 'wl_output', version: 3, name: 22\n    x: 0, y: 0, scale: 1,\n    physical_width: 309 mm, physical_height: 173 mm,\n    make: 'Unknown', model: '0x123D',\n    subpixel_orientation: unknown, output_transform: normal,\n    mode:\n        width: 1920 px, height: 1080 px, refresh: 40.033 Hz,\n        flags:\n    mode:\n        width: 1920 px, height: 1080 px, refresh: 60.049 Hz,\n        flags: current\n3.\nUsually not. I did not test in multi-monitor setup\n4.\nbash\n[rik@T450 ~]$ QT_SCALE_FACTOR=1 QT_AUTO_SCREEN_SCALE_FACTOR=0 QT_QPA_PLATFORM=wayland WAYLAND_DEBUG=1 okular\n[383267.363]  -> wl_display@1.get_registry(new id wl_registry@2)\n[383267.401]  -> wl_display@1.sync(new id wl_callback@3)\n[383267.493] wl_display@1.delete_id(3)\n[383267.518] wl_registry@2.global(1, \"wl_shm\", 1)\n[383267.544]  -> wl_registry@2.bind(1, \"wl_shm\", 1, new id [unknown]@4)\n[383267.578] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[383267.599] wl_registry@2.global(3, \"wl_drm\", 2)\n[383267.618] wl_registry@2.global(4, \"wl_compositor\", 4)\n[383267.639]  -> wl_registry@2.bind(4, \"wl_compositor\", 3, new id [unknown]@5)\n[383267.665] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[383267.686]  -> wl_registry@2.bind(5, \"wl_subcompositor\", 1, new id [unknown]@6)\n[383267.716] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[383267.736]  -> wl_registry@2.bind(6, \"wl_data_device_manager\", 1, new id [unknown]@7)\n[383267.764] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[383267.786] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[383267.806] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[383267.827] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[383267.847] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[383267.869] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[383267.889] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[383267.909] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[383267.929] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[383267.951] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[383267.974] wl_registry@2.global(17, \"zwlr_export_dmabuf_manager_v1\", 1)\n[383267.995] wl_registry@2.global(18, \"zwlr_screencopy_manager_v1\", 1)\n[383268.016] wl_registry@2.global(19, \"wl_seat\", 6)\n[383268.037]  -> wl_registry@2.bind(19, \"wl_seat\", 4, new id [unknown]@8)\n[383268.066]  -> wl_data_device_manager@7.get_data_device(new id wl_data_device@9, wl_seat@8)\n[383268.084] wl_registry@2.global(20, \"zwp_virtual_keyboard_manager_v1\", 1)\n[383268.109] wl_registry@2.global(21, \"zwlr_input_inhibit_manager_v1\", 1)\n[383268.129] wl_registry@2.global(22, \"wl_output\", 3)\n[383268.156]  -> wl_registry@2.bind(22, \"wl_output\", 2, new id [unknown]@10)\n[383268.186]  -> wl_display@1.sync(new id wl_callback@11)\n[383268.200] wl_callback@3.done(3961)\n[383268.263] wl_display@1.delete_id(11)\n[383268.275] wl_shm@4.format(0)\n[383268.287] wl_shm@4.format(1)\n[383268.298] wl_shm@4.format(875708993)\n[383268.310] wl_shm@4.format(875709016)\n[383268.322] wl_seat@8.name(\"seat0\")\n[383268.331] wl_seat@8.capabilities(7)\n[383268.345]  -> wl_seat@8.get_keyboard(new id wl_keyboard@3)\n[383268.359]  -> wl_seat@8.get_pointer(new id wl_pointer@12)\n[383268.374]  -> wl_compositor@5.create_surface(new id wl_surface@13)\n[383268.389]  -> wl_seat@8.get_touch(new id wl_touch@14)\n[383268.406] wl_output@10.geometry(0, 0, 309, 173, 0, \"Unknown\", \"0x123D\", 0)\n[383268.453] wl_output@10.mode(0, 1920, 1080, 40033)\n[383268.480] wl_output@10.mode(1, 1920, 1080, 60049)\n[383268.514] wl_output@10.scale(1)\n[383268.526] wl_output@10.done()\n[383268.537] wl_callback@11.done(3961)\n[383268.659]  -> wl_shm@4.create_pool(new id wl_shm_pool@11, fd 5, 4096)\n[383268.883]  -> wl_shm_pool@11.resize(12288)\n[383268.990]  -> wl_shm_pool@11.resize(28672)\n[383269.159]  -> wl_shm_pool@11.resize(61440)\n[383271.028]  -> wl_shm_pool@11.resize(126976)\n[383271.116]  -> wl_shm_pool@11.resize(258048)\n[383271.259]  -> wl_shm_pool@11.resize(520192)\n[383273.228]  -> wl_shm_pool@11.resize(1044480)\n[383278.301]  -> wl_shm_pool@11.resize(2093056)\n[383383.769]  -> wl_display@1.get_registry(new id wl_registry@15)\n[383383.800]  -> wl_display@1.sync(new id wl_callback@16)\n[383383.976] wl_display@1.delete_id(16)\n[383383.997] wl_registry@15.global(1, \"wl_shm\", 1)\n[383384.009] wl_registry@15.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[383384.027]  -> wl_registry@15.bind(2, \"zwp_linux_dmabuf_v1\", 3, new id [unknown]@17)\n[383384.057] wl_registry@15.global(3, \"wl_drm\", 2)\n[383384.079]  -> wl_registry@15.bind(3, \"wl_drm\", 2, new id [unknown]@18)\n[383384.103] wl_registry@15.global(4, \"wl_compositor\", 4)\n[383384.122] wl_registry@15.global(5, \"wl_subcompositor\", 1)\n[383384.141] wl_registry@15.global(6, \"wl_data_device_manager\", 3)\n[383384.162] wl_registry@15.global(7, \"gamma_control_manager\", 1)\n[383384.179] wl_registry@15.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[383384.199] wl_registry@15.global(9, \"gtk_primary_selection_device_manager\", 1)\n[383384.218] wl_registry@15.global(10, \"zxdg_output_manager_v1\", 2)\n[383384.236] wl_registry@15.global(11, \"org_kde_kwin_idle\", 1)\n[383384.252] wl_registry@15.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[383384.271] wl_registry@15.global(13, \"zwlr_layer_shell_v1\", 1)\n[383384.289] wl_registry@15.global(14, \"zxdg_shell_v6\", 1)\n[383384.305] wl_registry@15.global(15, \"xdg_wm_base\", 2)\n[383384.324] wl_registry@15.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[383384.340] wl_registry@15.global(17, \"zwlr_export_dmabuf_manager_v1\", 1)\n[383384.360] wl_registry@15.global(18, \"zwlr_screencopy_manager_v1\", 1)\n[383384.377] wl_registry@15.global(19, \"wl_seat\", 6)\n[383384.394] wl_registry@15.global(20, \"zwp_virtual_keyboard_manager_v1\", 1)\n[383384.411] wl_registry@15.global(21, \"zwlr_input_inhibit_manager_v1\", 1)\n[383384.430] wl_registry@15.global(22, \"wl_output\", 3)\n[383384.446] wl_callback@16.done(3962)\n[383384.458]  -> wl_display@1.sync(new id wl_callback@16)\n[383384.611] wl_display@1.delete_id(16)\n[383384.623] zwp_linux_dmabuf_v1@17.modifier(808669761, 0, 0)\n[383384.643] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 1)\n[383384.659] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 2)\n[383384.678] zwp_linux_dmabuf_v1@17.modifier(808669784, 0, 0)\n[383384.696] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 1)\n[383384.713] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 2)\n[383384.733] zwp_linux_dmabuf_v1@17.modifier(875713089, 0, 0)\n[383384.751] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 1)\n[383384.770] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 2)\n[383384.790] zwp_linux_dmabuf_v1@17.modifier(875708993, 0, 0)\n[383384.806] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 1)\n[383384.823] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 2)\n[383384.842] zwp_linux_dmabuf_v1@17.modifier(875713112, 0, 0)\n[383384.861] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 1)\n[383384.881] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 2)\n[383384.897] zwp_linux_dmabuf_v1@17.modifier(875709016, 0, 0)\n[383384.915] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 1)\n[383384.936] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 2)\n[383384.953] zwp_linux_dmabuf_v1@17.modifier(892424769, 0, 0)\n[383384.969] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 1)\n[383384.986] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 2)\n[383385.005] zwp_linux_dmabuf_v1@17.modifier(909199186, 0, 0)\n[383385.022] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 1)\n[383385.038] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 2)\n[383385.059] zwp_linux_dmabuf_v1@17.modifier(538982482, 0, 0)\n[383385.077] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 1)\n[383385.096] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 2)\n[383385.114] zwp_linux_dmabuf_v1@17.modifier(540422482, 0, 0)\n[383385.133] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 1)\n[383385.148] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 2)\n[383385.167] zwp_linux_dmabuf_v1@17.modifier(943215175, 0, 0)\n[383385.183] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 1)\n[383385.200] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 2)\n[383385.217] zwp_linux_dmabuf_v1@17.modifier(842224199, 0, 0)\n[383385.235] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 1)\n[383385.251] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 2)\n[383385.270] zwp_linux_dmabuf_v1@17.modifier(961959257, 0, 0)\n[383385.286] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 1)\n[383385.301] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 2)\n[383385.317] zwp_linux_dmabuf_v1@17.modifier(825316697, 0, 0)\n[383385.336] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 1)\n[383385.355] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 2)\n[383385.373] zwp_linux_dmabuf_v1@17.modifier(842093913, 0, 0)\n[383385.391] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 1)\n[383385.410] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 2)\n[383385.431] zwp_linux_dmabuf_v1@17.modifier(909202777, 0, 0)\n[383385.447] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 1)\n[383385.467] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 2)\n[383385.487] zwp_linux_dmabuf_v1@17.modifier(875713881, 0, 0)\n[383385.508] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 1)\n[383385.529] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 2)\n[383385.548] zwp_linux_dmabuf_v1@17.modifier(961893977, 0, 0)\n[383385.568] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 1)\n[383385.584] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 2)\n[383385.603] zwp_linux_dmabuf_v1@17.modifier(825316953, 0, 0)\n[383385.622] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 1)\n[383385.639] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 2)\n[383385.656] zwp_linux_dmabuf_v1@17.modifier(842094169, 0, 0)\n[383385.673] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 1)\n[383385.690] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 2)\n[383385.706] zwp_linux_dmabuf_v1@17.modifier(909203033, 0, 0)\n[383385.725] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 1)\n[383385.746] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 2)\n[383385.767] zwp_linux_dmabuf_v1@17.modifier(875714137, 0, 0)\n[383385.788] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 1)\n[383385.810] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 2)\n[383385.831] zwp_linux_dmabuf_v1@17.modifier(842094158, 0, 0)\n[383385.853] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 1)\n[383385.869] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 2)\n[383385.878] zwp_linux_dmabuf_v1@17.modifier(909203022, 0, 0)\n[383385.886] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 1)\n[383385.894] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 2)\n[383385.902] zwp_linux_dmabuf_v1@17.modifier(1448695129, 0, 0)\n[383385.911] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 1)\n[383385.922] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 2)\n[383385.933] zwp_linux_dmabuf_v1@17.modifier(1498831189, 0, 0)\n[383385.944] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 1)\n[383385.961] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 2)\n[383385.984] wl_drm@18.device(\"/dev/dri/card0\")\n[383386.030]  -> wl_drm@18.authenticate(6)\n[383386.041] wl_drm@18.format(808669761)\n[383386.051] wl_drm@18.format(808669784)\n[383386.060] wl_drm@18.format(875713089)\n[383386.071] wl_drm@18.format(875713112)\n[383386.083] wl_drm@18.format(909199186)\n[383386.093] wl_drm@18.format(961959257)\n[383386.104] wl_drm@18.format(825316697)\n[383386.114] wl_drm@18.format(842093913)\n[383386.123] wl_drm@18.format(909202777)\n[383386.132] wl_drm@18.format(875713881)\n[383386.141] wl_drm@18.format(842094158)\n[383386.151] wl_drm@18.format(909203022)\n[383386.161] wl_drm@18.format(1448695129)\n[383386.171] wl_drm@18.capabilities(1)\n[383386.182] wl_callback@16.done(3962)\n[383386.196]  -> wl_display@1.sync(new id wl_callback@16)\n[383386.249] wl_display@1.delete_id(16)\n[383386.262] wl_drm@18.authenticated()\n[383386.270] wl_callback@16.done(3962)\n[383393.550]  -> wl_compositor@5.create_surface(new id wl_surface@16)\n[383410.136]  -> wl_shm_pool@11.create_buffer(new id wl_buffer@19, 36864, 32, 32, 128, 0)\n[383410.198]  -> wl_pointer@12.set_cursor(0, wl_surface@13, 5, 5)\n[383410.218]  -> wl_surface@13.attach(wl_buffer@19, 0, 0)\n[383410.235]  -> wl_surface@13.damage(0, 0, 32, 32)\n[383410.260]  -> wl_surface@13.commit()\n[383410.295]  -> wl_registry@2.bind(14, \"zxdg_shell_v6\", 1, new id [unknown]@20)\n[383410.332]  -> zxdg_shell_v6@20.get_xdg_surface(new id zxdg_surface_v6@21, wl_surface@16)\n[383410.354]  -> zxdg_surface_v6@21.get_toplevel(new id zxdg_toplevel_v6@22)\n[383410.370]  -> zxdg_toplevel_v6@22.set_title(\"Okular\")\n[383410.383]  -> zxdg_toplevel_v6@22.set_app_id(\"org.kde.okular\")\n[383410.394]  -> wl_surface@16.set_buffer_scale(1)\n[383411.860]  -> wl_surface@16.set_buffer_transform(0)\n[383411.893]  -> wl_surface@16.commit()\n[383411.905] wl_keyboard@3.keymap(1, fd 5, 49987)\n[383421.639] wl_keyboard@3.repeat_info(50, 250)\n[383444.473] zxdg_shell_v6@20.ping(3964)\n[383444.531]  -> zxdg_shell_v6@20.pong(3964)\n[383444.540] zxdg_toplevel_v6@22.configure(0, 0, array)\n[383444.560] zxdg_surface_v6@21.configure(3963)\n[383444.571]  -> zxdg_surface_v6@21.ack_configure(3963)\n[383444.661]  -> wl_shm@4.create_pool(new id wl_shm_pool@23, fd 15, 8574552)\n[383444.679]  -> wl_shm_pool@23.create_buffer(new id wl_buffer@24, 0, 1926, 1113, 7704, 0)\n[383466.598]  -> wl_surface@16.frame(new id wl_callback@25)\n[383466.656]  -> wl_surface@16.attach(wl_buffer@24, 0, 0)\n[383466.673]  -> wl_surface@16.damage(3, 30, 1920, 1080)\n[383466.751]  -> wl_surface@16.commit()\n[383467.330]  -> wl_shm@4.create_pool(new id wl_shm_pool@26, fd 15, 8574552)\n[383467.369]  -> wl_shm_pool@26.create_buffer(new id wl_buffer@27, 0, 1926, 1113, 7704, 0)\n[383479.649]  -> wl_surface@16.frame(new id wl_callback@28)\n[383479.687]  -> wl_surface@16.attach(wl_buffer@27, 0, 0)\n[383479.711]  -> wl_surface@16.damage(532, 131, 156, 43)\n[383479.736]  -> wl_surface@16.commit()\n[383479.786] wl_display@1.delete_id(25)\n[383479.805] wl_buffer@24.release()\n[383479.813] wl_keyboard@3.enter(3968, wl_surface@16, array)\n[383479.836]  -> wl_display@1.sync(new id wl_callback@25)\n[383479.850] wl_data_device@9.data_offer(new id wl_data_offer@87642672)\n[383479.865] wl_data_offer@4278190080.offer(\"text/html\")\n[383479.879] wl_data_offer@4278190080.offer(\"text/_moz_htmlcontext\")\n[383479.890] wl_data_offer@4278190080.offer(\"text/_moz_htmlinfo\")\n[383479.901] wl_data_offer@4278190080.offer(\"text/plain;charset=utf-8\")\n[383479.912] wl_data_offer@4278190080.offer(\"text/plain\")\n[383479.923] wl_data_offer@4278190080.offer(\"text/x-moz-url-priv\")\n[383479.934] wl_data_device@9.selection(wl_data_offer@4278190080)\n[383479.948] wl_keyboard@3.modifiers(3969, 0, 0, 16, 0)\n[383479.981] zxdg_toplevel_v6@22.configure(1916, 1030, array)\n[383480.002] zxdg_surface_v6@21.configure(3965)\n[383480.021]  -> zxdg_surface_v6@21.ack_configure(3965)\n[383481.011]  -> wl_shm_pool@23.destroy()\n[383481.045]  -> wl_buffer@24.destroy()\n[383481.135]  -> wl_shm@4.create_pool(new id wl_shm_pool@29, fd 15, 7893920)\n[383481.161]  -> wl_shm_pool@29.create_buffer(new id wl_buffer@30, 0, 1916, 1030, 7664, 0)\n[383494.908]  -> wl_surface@16.frame(new id wl_callback@31)\n[383494.973]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[383494.998]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[383495.020]  -> wl_surface@16.commit()\n[383495.067]  -> wl_surface@16.frame(new id wl_callback@32)\n[383495.083]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[383495.107]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[383495.132]  -> wl_surface@16.commit()\n[383495.147]  -> wl_surface@16.frame(new id wl_callback@33)\n[383495.162]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[383495.183]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[383495.205]  -> wl_surface@16.commit()\n[383495.246] wl_display@1.delete_id(25)\n[383495.264] wl_display@1.delete_id(28)\n[383495.272] wl_buffer@27.release()\n[383495.285] wl_callback@25.done(3969)\n[383496.284]  -> wl_shm_pool@26.destroy()\n[383496.326]  -> wl_buffer@27.destroy()\n[383496.457]  -> wl_shm@4.create_pool(new id wl_shm_pool@25, fd 15, 7893920)\n[383496.490]  -> wl_shm_pool@25.create_buffer(new id wl_buffer@28, 0, 1916, 1030, 7664, 0)\n[383511.898]  -> wl_surface@16.frame(new id wl_callback@34)\n[383511.971]  -> wl_surface@16.attach(wl_buffer@28, 0, 0)\n[383512.011]  -> wl_surface@16.damage(3, 121, 517, 96)\n[383512.036]  -> wl_surface@16.damage(3, 217, 171, 769)\n[383512.068]  -> wl_surface@16.damage(490, 217, 30, 769)\n[383512.118]  -> wl_surface@16.damage(3, 986, 171, 40)\n[383512.157]  -> wl_surface@16.damage(490, 986, 1423, 40)\n[383512.185]  -> wl_surface@16.damage(3, 1026, 1910, 1)\n[383512.217]  -> wl_surface@16.commit()\n[383512.928]  -> wl_shm@4.create_pool(new id wl_shm_pool@35, fd 15, 7893920)\n[383512.965]  -> wl_shm_pool@35.create_buffer(new id wl_buffer@36, 0, 1916, 1030, 7664, 0)\n[383528.459]  -> wl_surface@16.frame(new id wl_callback@37)\n[383528.493]  -> wl_surface@16.attach(wl_buffer@36, 0, 0)\n[383528.518]  -> wl_surface@16.damage(3, 121, 517, 96)\n[383528.539]  -> wl_surface@16.damage(3, 217, 171, 769)\n[383528.561]  -> wl_surface@16.damage(490, 217, 30, 769)\n[383528.583]  -> wl_surface@16.damage(3, 986, 171, 40)\n[383528.612]  -> wl_surface@16.damage(490, 986, 1423, 40)\n[383528.633]  -> wl_surface@16.damage(3, 1026, 1910, 1)\n[383528.659]  -> wl_surface@16.commit()\n[383528.685] wl_display@1.delete_id(23)\n[383528.697] wl_display@1.delete_id(24)\n[383528.707] wl_display@1.delete_id(26)\n[383528.717] wl_display@1.delete_id(27)\n[383528.726] wl_display@1.delete_id(34)\n[383528.736] wl_display@1.delete_id(33)\n[383528.746] wl_display@1.delete_id(32)\n[383528.752] wl_display@1.delete_id(31)\n[383528.761] wl_buffer@30.release()\n[383528.769] wl_surface@16.enter(wl_output@10)\n[383528.780] wl_buffer@30.release()\n[383528.787] wl_buffer@30.release()\n[383528.793] wl_buffer@28.release()\n[383529.662] wl_buffer@36.release()\n[383531.520] wl_display@1.delete_id(37)\n[383531.534] wl_callback@37.done(45443472)\n[384341.638] wl_pointer@12.enter(3971, wl_surface@16, 999.570312, 393.109375)\n[384341.761]  -> wl_pointer@12.set_cursor(3971, wl_surface@13, 5, 5)\n[384341.818]  -> wl_surface@13.attach(wl_buffer@19, 0, 0)\n[384341.878]  -> wl_surface@13.damage(0, 0, 32, 32)\n[384341.962]  -> wl_surface@13.commit()\n[384342.001] wl_pointer@12.motion(45444280, 999.570312, 393.109375)\n[384438.725] wl_pointer@12.motion(45444379, 1000.300781, 393.402344)\n[384479.848] wl_keyboard@3.key(3972, 45444421, 125, 1)\n[384479.995] wl_keyboard@3.modifiers(3973, 64, 0, 16, 0)\n[384487.496] wl_pointer@12.motion(45444428, 1000.988281, 393.539062)\n[384497.274] wl_keyboard@3.key(3974, 45444438, 42, 1)\n[384497.411] wl_keyboard@3.modifiers(3975, 65, 0, 16, 0)\n[384515.682] wl_pointer@12.motion(45444456, 1001.437500, 393.652344)\n[384555.628] wl_pointer@12.motion(45444496, 1001.882812, 393.761719)\n[384585.260] wl_pointer@12.motion(45444526, 1002.367188, 394.003906)\n[384631.172] wl_pointer@12.motion(45444572, 1002.906250, 394.410156)\n[384650.388] wl_pointer@12.motion(45444591, 1003.390625, 394.652344)\n[384673.481] zxdg_toplevel_v6@22.close()\n[384673.888]  -> zxdg_toplevel_v6@22.destroy()\n[384673.917]  -> zxdg_surface_v6@21.destroy()\n[384673.935]  -> wl_surface@16.destroy()\n[384674.249]  -> wl_display@1.sync(new id wl_callback@37)\n[384694.322]  -> wl_shm_pool@35.destroy()\n[384694.348]  -> wl_buffer@36.destroy()\n[384696.242]  -> wl_shm_pool@25.destroy()\n[384696.272]  -> wl_buffer@28.destroy()\n[384696.494]  -> wl_shm_pool@29.destroy()\n[384696.521]  -> wl_buffer@30.destroy()\n[384696.697] wl_display@1.delete_id(22)\n[384696.718] wl_display@1.delete_id(21)\n[384696.723] wl_display@1.delete_id(16)\n[384696.730] wl_display@1.delete_id(37)\n[384696.739] wl_keyboard@3.leave(3977, nil)\n[384696.797] wl_pointer@12.leave(3986, nil)\n[384696.819] wl_callback@37.done(3987)\n[384701.793]  -> zwp_linux_dmabuf_v1@17.destroy()\n[384701.850]  -> wl_pointer@12.release()\n[384701.942]  -> wl_keyboard@3.release()\n[384701.960]  -> wl_touch@14.release()\n[384701.987]  -> wl_buffer@19.destroy()\n[384702.094]  -> wl_shm_pool@11.destroy()\n\nYes:\nbash\n[rik@T450 ~]$ WAYLAND_DEBUG=1 okular\n[502144.584]  -> wl_display@1.get_registry(new id wl_registry@2)\n[502144.616]  -> wl_display@1.sync(new id wl_callback@3)\n[502144.757] wl_display@1.delete_id(3)\n[502144.781] wl_registry@2.global(1, \"wl_shm\", 1)\n[502144.799]  -> wl_registry@2.bind(1, \"wl_shm\", 1, new id [unknown]@4)\n[502144.835] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[502144.851] wl_registry@2.global(3, \"wl_drm\", 2)\n[502144.877] wl_registry@2.global(4, \"wl_compositor\", 4)\n[502144.892]  -> wl_registry@2.bind(4, \"wl_compositor\", 3, new id [unknown]@5)\n[502144.904] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[502144.920]  -> wl_registry@2.bind(5, \"wl_subcompositor\", 1, new id [unknown]@6)\n[502144.938] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[502144.948]  -> wl_registry@2.bind(6, \"wl_data_device_manager\", 1, new id [unknown]@7)\n[502144.970] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[502144.988] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[502145.006] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[502145.023] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[502145.040] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[502145.057] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[502145.074] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[502145.091] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[502145.108] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[502145.125] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[502145.143] wl_registry@2.global(17, \"zwlr_export_dmabuf_manager_v1\", 1)\n[502145.160] wl_registry@2.global(18, \"zwlr_screencopy_manager_v1\", 1)\n[502145.177] wl_registry@2.global(19, \"wl_seat\", 6)\n[502145.196]  -> wl_registry@2.bind(19, \"wl_seat\", 4, new id [unknown]@8)\n[502145.220]  -> wl_data_device_manager@7.get_data_device(new id wl_data_device@9, wl_seat@8)\n[502145.236] wl_registry@2.global(20, \"zwp_virtual_keyboard_manager_v1\", 1)\n[502145.253] wl_registry@2.global(21, \"zwlr_input_inhibit_manager_v1\", 1)\n[502145.270] wl_registry@2.global(22, \"wl_output\", 3)\n[502145.288]  -> wl_registry@2.bind(22, \"wl_output\", 2, new id [unknown]@10)\n[502145.313]  -> wl_display@1.sync(new id wl_callback@11)\n[502145.323] wl_callback@3.done(4456)\n[502145.391] wl_display@1.delete_id(11)\n[502145.403] wl_shm@4.format(0)\n[502145.412] wl_shm@4.format(1)\n[502145.421] wl_shm@4.format(875708993)\n[502145.429] wl_shm@4.format(875709016)\n[502145.438] wl_seat@8.name(\"seat0\")\n[502145.447] wl_seat@8.capabilities(7)\n[502145.460]  -> wl_seat@8.get_keyboard(new id wl_keyboard@3)\n[502145.472]  -> wl_seat@8.get_pointer(new id wl_pointer@12)\n[502145.482]  -> wl_compositor@5.create_surface(new id wl_surface@13)\n[502145.493]  -> wl_seat@8.get_touch(new id wl_touch@14)\n[502145.518] wl_output@10.geometry(0, 0, 309, 173, 0, \"Unknown\", \"0x123D\", 0)\n[502145.559] wl_output@10.mode(0, 1920, 1080, 40033)\n[502145.580] wl_output@10.mode(1, 1920, 1080, 60049)\n[502145.602] wl_output@10.scale(1)\n[502145.610] wl_output@10.done()\n[502145.621] wl_callback@11.done(4456)\n[502145.712]  -> wl_shm@4.create_pool(new id wl_shm_pool@11, fd 5, 4096)\n[502145.923]  -> wl_shm_pool@11.resize(12288)\n[502146.038]  -> wl_shm_pool@11.resize(28672)\n[502146.204]  -> wl_shm_pool@11.resize(61440)\n[502147.962]  -> wl_shm_pool@11.resize(126976)\n[502148.047]  -> wl_shm_pool@11.resize(258048)\n[502148.176]  -> wl_shm_pool@11.resize(520192)\n[502150.052]  -> wl_shm_pool@11.resize(1044480)\n[502154.647]  -> wl_shm_pool@11.resize(2093056)\n[502275.878]  -> wl_display@1.get_registry(new id wl_registry@15)\n[502275.904]  -> wl_display@1.sync(new id wl_callback@16)\n[502276.120] wl_display@1.delete_id(16)\n[502276.144] wl_registry@15.global(1, \"wl_shm\", 1)\n[502276.159] wl_registry@15.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[502276.176]  -> wl_registry@15.bind(2, \"zwp_linux_dmabuf_v1\", 3, new id [unknown]@17)\n[502276.201] wl_registry@15.global(3, \"wl_drm\", 2)\n[502276.219]  -> wl_registry@15.bind(3, \"wl_drm\", 2, new id [unknown]@18)\n[502276.246] wl_registry@15.global(4, \"wl_compositor\", 4)\n[502276.264] wl_registry@15.global(5, \"wl_subcompositor\", 1)\n[502276.278] wl_registry@15.global(6, \"wl_data_device_manager\", 3)\n[502276.294] wl_registry@15.global(7, \"gamma_control_manager\", 1)\n[502276.309] wl_registry@15.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[502276.330] wl_registry@15.global(9, \"gtk_primary_selection_device_manager\", 1)\n[502276.346] wl_registry@15.global(10, \"zxdg_output_manager_v1\", 2)\n[502276.364] wl_registry@15.global(11, \"org_kde_kwin_idle\", 1)\n[502276.380] wl_registry@15.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[502276.397] wl_registry@15.global(13, \"zwlr_layer_shell_v1\", 1)\n[502276.418] wl_registry@15.global(14, \"zxdg_shell_v6\", 1)\n[502276.435] wl_registry@15.global(15, \"xdg_wm_base\", 2)\n[502276.453] wl_registry@15.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[502276.469] wl_registry@15.global(17, \"zwlr_export_dmabuf_manager_v1\", 1)\n[502276.487] wl_registry@15.global(18, \"zwlr_screencopy_manager_v1\", 1)\n[502276.516] wl_registry@15.global(19, \"wl_seat\", 6)\n[502276.537] wl_registry@15.global(20, \"zwp_virtual_keyboard_manager_v1\", 1)\n[502276.554] wl_registry@15.global(21, \"zwlr_input_inhibit_manager_v1\", 1)\n[502276.570] wl_registry@15.global(22, \"wl_output\", 3)\n[502276.589] wl_callback@16.done(4457)\n[502276.600]  -> wl_display@1.sync(new id wl_callback@16)\n[502276.749] wl_display@1.delete_id(16)\n[502276.761] zwp_linux_dmabuf_v1@17.modifier(808669761, 0, 0)\n[502276.781] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 1)\n[502276.797] zwp_linux_dmabuf_v1@17.modifier(808669761, 16777216, 2)\n[502276.817] zwp_linux_dmabuf_v1@17.modifier(808669784, 0, 0)\n[502276.833] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 1)\n[502276.853] zwp_linux_dmabuf_v1@17.modifier(808669784, 16777216, 2)\n[502276.869] zwp_linux_dmabuf_v1@17.modifier(875713089, 0, 0)\n[502276.889] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 1)\n[502276.909] zwp_linux_dmabuf_v1@17.modifier(875713089, 16777216, 2)\n[502276.926] zwp_linux_dmabuf_v1@17.modifier(875708993, 0, 0)\n[502276.944] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 1)\n[502276.960] zwp_linux_dmabuf_v1@17.modifier(875708993, 16777216, 2)\n[502276.978] zwp_linux_dmabuf_v1@17.modifier(875713112, 0, 0)\n[502276.991] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 1)\n[502277.011] zwp_linux_dmabuf_v1@17.modifier(875713112, 16777216, 2)\n[502277.029] zwp_linux_dmabuf_v1@17.modifier(875709016, 0, 0)\n[502277.046] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 1)\n[502277.062] zwp_linux_dmabuf_v1@17.modifier(875709016, 16777216, 2)\n[502277.081] zwp_linux_dmabuf_v1@17.modifier(892424769, 0, 0)\n[502277.097] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 1)\n[502277.117] zwp_linux_dmabuf_v1@17.modifier(892424769, 16777216, 2)\n[502277.136] zwp_linux_dmabuf_v1@17.modifier(909199186, 0, 0)\n[502277.155] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 1)\n[502277.169] zwp_linux_dmabuf_v1@17.modifier(909199186, 16777216, 2)\n[502277.186] zwp_linux_dmabuf_v1@17.modifier(538982482, 0, 0)\n[502277.204] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 1)\n[502277.223] zwp_linux_dmabuf_v1@17.modifier(538982482, 16777216, 2)\n[502277.239] zwp_linux_dmabuf_v1@17.modifier(540422482, 0, 0)\n[502277.257] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 1)\n[502277.275] zwp_linux_dmabuf_v1@17.modifier(540422482, 16777216, 2)\n[502277.294] zwp_linux_dmabuf_v1@17.modifier(943215175, 0, 0)\n[502277.313] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 1)\n[502277.332] zwp_linux_dmabuf_v1@17.modifier(943215175, 16777216, 2)\n[502277.350] zwp_linux_dmabuf_v1@17.modifier(842224199, 0, 0)\n[502277.367] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 1)\n[502277.382] zwp_linux_dmabuf_v1@17.modifier(842224199, 16777216, 2)\n[502277.399] zwp_linux_dmabuf_v1@17.modifier(961959257, 0, 0)\n[502277.418] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 1)\n[502277.436] zwp_linux_dmabuf_v1@17.modifier(961959257, 16777216, 2)\n[502277.454] zwp_linux_dmabuf_v1@17.modifier(825316697, 0, 0)\n[502277.470] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 1)\n[502277.490] zwp_linux_dmabuf_v1@17.modifier(825316697, 16777216, 2)\n[502277.516] zwp_linux_dmabuf_v1@17.modifier(842093913, 0, 0)\n[502277.533] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 1)\n[502277.550] zwp_linux_dmabuf_v1@17.modifier(842093913, 16777216, 2)\n[502277.567] zwp_linux_dmabuf_v1@17.modifier(909202777, 0, 0)\n[502277.584] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 1)\n[502277.603] zwp_linux_dmabuf_v1@17.modifier(909202777, 16777216, 2)\n[502277.621] zwp_linux_dmabuf_v1@17.modifier(875713881, 0, 0)\n[502277.637] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 1)\n[502277.655] zwp_linux_dmabuf_v1@17.modifier(875713881, 16777216, 2)\n[502277.673] zwp_linux_dmabuf_v1@17.modifier(961893977, 0, 0)\n[502277.687] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 1)\n[502277.707] zwp_linux_dmabuf_v1@17.modifier(961893977, 16777216, 2)\n[502277.726] zwp_linux_dmabuf_v1@17.modifier(825316953, 0, 0)\n[502277.744] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 1)\n[502277.763] zwp_linux_dmabuf_v1@17.modifier(825316953, 16777216, 2)\n[502277.779] zwp_linux_dmabuf_v1@17.modifier(842094169, 0, 0)\n[502277.799] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 1)\n[502277.818] zwp_linux_dmabuf_v1@17.modifier(842094169, 16777216, 2)\n[502277.836] zwp_linux_dmabuf_v1@17.modifier(909203033, 0, 0)\n[502277.849] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 1)\n[502277.863] zwp_linux_dmabuf_v1@17.modifier(909203033, 16777216, 2)\n[502277.880] zwp_linux_dmabuf_v1@17.modifier(875714137, 0, 0)\n[502277.897] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 1)\n[502277.917] zwp_linux_dmabuf_v1@17.modifier(875714137, 16777216, 2)\n[502277.934] zwp_linux_dmabuf_v1@17.modifier(842094158, 0, 0)\n[502277.953] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 1)\n[502277.971] zwp_linux_dmabuf_v1@17.modifier(842094158, 16777216, 2)\n[502277.987] zwp_linux_dmabuf_v1@17.modifier(909203022, 0, 0)\n[502278.004] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 1)\n[502278.021] zwp_linux_dmabuf_v1@17.modifier(909203022, 16777216, 2)\n[502278.036] zwp_linux_dmabuf_v1@17.modifier(1448695129, 0, 0)\n[502278.056] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 1)\n[502278.076] zwp_linux_dmabuf_v1@17.modifier(1448695129, 16777216, 2)\n[502278.095] zwp_linux_dmabuf_v1@17.modifier(1498831189, 0, 0)\n[502278.112] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 1)\n[502278.132] zwp_linux_dmabuf_v1@17.modifier(1498831189, 16777216, 2)\n[502278.145] wl_drm@18.device(\"/dev/dri/card0\")\n[502278.187]  -> wl_drm@18.authenticate(6)\n[502278.199] wl_drm@18.format(808669761)\n[502278.207] wl_drm@18.format(808669784)\n[502278.213] wl_drm@18.format(875713089)\n[502278.220] wl_drm@18.format(875713112)\n[502278.231] wl_drm@18.format(909199186)\n[502278.240] wl_drm@18.format(961959257)\n[502278.251] wl_drm@18.format(825316697)\n[502278.261] wl_drm@18.format(842093913)\n[502278.269] wl_drm@18.format(909202777)\n[502278.278] wl_drm@18.format(875713881)\n[502278.285] wl_drm@18.format(842094158)\n[502278.292] wl_drm@18.format(909203022)\n[502278.301] wl_drm@18.format(1448695129)\n[502278.310] wl_drm@18.capabilities(1)\n[502278.318] wl_callback@16.done(4457)\n[502278.327]  -> wl_display@1.sync(new id wl_callback@16)\n[502278.375] wl_display@1.delete_id(16)\n[502278.386] wl_drm@18.authenticated()\n[502278.394] wl_callback@16.done(4457)\n[502285.413]  -> wl_compositor@5.create_surface(new id wl_surface@16)\n[502307.604]  -> wl_shm_pool@11.create_buffer(new id wl_buffer@19, 36864, 32, 32, 128, 0)\n[502307.662]  -> wl_pointer@12.set_cursor(0, wl_surface@13, 5, 5)\n[502307.687]  -> wl_surface@13.attach(wl_buffer@19, 0, 0)\n[502307.706]  -> wl_surface@13.damage(0, 0, 32, 32)\n[502307.728]  -> wl_surface@13.commit()\n[502307.755]  -> wl_registry@2.bind(14, \"zxdg_shell_v6\", 1, new id [unknown]@20)\n[502307.790]  -> zxdg_shell_v6@20.get_xdg_surface(new id zxdg_surface_v6@21, wl_surface@16)\n[502307.810]  -> zxdg_surface_v6@21.get_toplevel(new id zxdg_toplevel_v6@22)\n[502307.823]  -> zxdg_toplevel_v6@22.set_title(\"Okular\")\n[502307.834]  -> zxdg_toplevel_v6@22.set_app_id(\"org.kde.okular\")\n[502307.844]  -> wl_surface@16.set_buffer_scale(1)\n[502310.257]  -> wl_surface@16.set_buffer_transform(0)\n[502310.305]  -> wl_surface@16.commit()\n[502310.319] wl_keyboard@3.keymap(1, fd 5, 49987)\n[502319.121] wl_keyboard@3.repeat_info(50, 250)\n[502347.995] zxdg_shell_v6@20.ping(4459)\n[502348.020]  -> zxdg_shell_v6@20.pong(4459)\n[502348.044] zxdg_toplevel_v6@22.configure(0, 0, array)\n[502348.066] zxdg_surface_v6@21.configure(4458)\n[502348.078]  -> zxdg_surface_v6@21.ack_configure(4458)\n[502348.167]  -> wl_shm@4.create_pool(new id wl_shm_pool@23, fd 15, 8574552)\n[502348.194]  -> wl_shm_pool@23.create_buffer(new id wl_buffer@24, 0, 1926, 1113, 7704, 0)\n[502373.952]  -> wl_surface@16.frame(new id wl_callback@25)\n[502374.002]  -> wl_surface@16.attach(wl_buffer@24, 0, 0)\n[502374.027]  -> wl_surface@16.damage(3, 30, 1920, 1080)\n[502374.051]  -> wl_surface@16.commit()\n[502374.611]  -> wl_shm@4.create_pool(new id wl_shm_pool@26, fd 15, 8574552)\n[502374.640]  -> wl_shm_pool@26.create_buffer(new id wl_buffer@27, 0, 1926, 1113, 7704, 0)\n[502389.708]  -> wl_surface@16.frame(new id wl_callback@28)\n[502389.748]  -> wl_surface@16.attach(wl_buffer@27, 0, 0)\n[502389.776]  -> wl_surface@16.damage(532, 131, 156, 43)\n[502389.802]  -> wl_surface@16.commit()\n[502389.863] wl_display@1.delete_id(25)\n[502389.883] wl_buffer@24.release()\n[502389.896] wl_keyboard@3.enter(4463, wl_surface@16, array)\n[502389.925]  -> wl_display@1.sync(new id wl_callback@25)\n[502389.942] wl_data_device@9.data_offer(new id wl_data_offer@661333760)\n[502389.958] wl_data_offer@4278190080.offer(\"UTF8_STRING\")\n[502389.972] wl_data_offer@4278190080.offer(\"COMPOUND_TEXT\")\n[502389.985] wl_data_offer@4278190080.offer(\"TEXT\")\n[502389.996] wl_data_offer@4278190080.offer(\"STRING\")\n[502390.008] wl_data_offer@4278190080.offer(\"text/plain;charset=utf-8\")\n[502390.020] wl_data_offer@4278190080.offer(\"text/plain\")\n[502390.032] wl_data_offer@4278190080.offer(\"SAVE_TARGETS\")\n[502390.047] wl_data_device@9.selection(wl_data_offer@4278190080)\n[502390.059] wl_keyboard@3.modifiers(4464, 0, 0, 16, 0)\n[502390.098] zxdg_toplevel_v6@22.configure(1916, 1030, array)\n[502390.123] zxdg_surface_v6@21.configure(4460)\n[502390.142]  -> zxdg_surface_v6@21.ack_configure(4460)\n[502391.186]  -> wl_shm_pool@23.destroy()\n[502391.213]  -> wl_buffer@24.destroy()\n[502391.284]  -> wl_shm@4.create_pool(new id wl_shm_pool@29, fd 15, 7893920)\n[502391.316]  -> wl_shm_pool@29.create_buffer(new id wl_buffer@30, 0, 1916, 1030, 7664, 0)\n[502409.049]  -> wl_surface@16.frame(new id wl_callback@31)\n[502409.104]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[502409.120]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[502409.151]  -> wl_surface@16.commit()\n[502409.197]  -> wl_surface@16.frame(new id wl_callback@32)\n[502409.212]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[502409.234]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[502409.259]  -> wl_surface@16.commit()\n[502409.269]  -> wl_surface@16.frame(new id wl_callback@33)\n[502409.281]  -> wl_surface@16.attach(wl_buffer@30, 0, 0)\n[502409.300]  -> wl_surface@16.damage(3, 30, 1910, 997)\n[502409.323]  -> wl_surface@16.commit()\n[502409.355] wl_display@1.delete_id(25)\n[502409.369] wl_display@1.delete_id(28)\n[502409.378] wl_buffer@27.release()\n[502409.384] wl_callback@25.done(4464)\n[502410.477]  -> wl_shm_pool@26.destroy()\n[502410.500]  -> wl_buffer@27.destroy()\n[502410.578]  -> wl_shm@4.create_pool(new id wl_shm_pool@25, fd 15, 7893920)\n[502410.612]  -> wl_shm_pool@25.create_buffer(new id wl_buffer@28, 0, 1916, 1030, 7664, 0)\n[502426.219]  -> wl_surface@16.frame(new id wl_callback@34)\n[502426.292]  -> wl_surface@16.attach(wl_buffer@28, 0, 0)\n[502426.330]  -> wl_surface@16.damage(3, 121, 517, 96)\n[502426.352]  -> wl_surface@16.damage(3, 217, 171, 769)\n[502426.368]  -> wl_surface@16.damage(490, 217, 30, 769)\n[502426.385]  -> wl_surface@16.damage(3, 986, 171, 40)\n[502426.453]  -> wl_surface@16.damage(490, 986, 1423, 40)\n[502426.482]  -> wl_surface@16.damage(3, 1026, 1910, 1)\n[502426.523]  -> wl_surface@16.commit()\n[502427.583]  -> wl_shm@4.create_pool(new id wl_shm_pool@35, fd 15, 7893920)\n[502427.646]  -> wl_shm_pool@35.create_buffer(new id wl_buffer@36, 0, 1916, 1030, 7664, 0)\n[502440.495]  -> wl_surface@16.frame(new id wl_callback@37)\n[502440.540]  -> wl_surface@16.attach(wl_buffer@36, 0, 0)\n[502440.560]  -> wl_surface@16.damage(3, 121, 517, 96)\n[502440.585]  -> wl_surface@16.damage(3, 217, 171, 769)\n[502440.609]  -> wl_surface@16.damage(490, 217, 30, 769)\n[502440.633]  -> wl_surface@16.damage(3, 986, 171, 40)\n[502440.655]  -> wl_surface@16.damage(490, 986, 1423, 40)\n[502440.679]  -> wl_surface@16.damage(3, 1026, 1910, 1)\n[502440.701]  -> wl_surface@16.commit()\n[502440.727] wl_display@1.delete_id(23)\n[502440.739] wl_display@1.delete_id(24)\n[502440.746] wl_display@1.delete_id(26)\n[502440.754] wl_display@1.delete_id(27)\n[502440.763] wl_display@1.delete_id(34)\n[502440.773] wl_display@1.delete_id(33)\n[502440.784] wl_display@1.delete_id(32)\n[502440.791] wl_display@1.delete_id(31)\n[502440.800] wl_buffer@30.release()\n[502440.806] wl_surface@16.enter(wl_output@10)\n[502440.818] wl_buffer@30.release()\n[502440.823] wl_buffer@30.release()\n[502440.827] wl_buffer@28.release()\n[502441.742] wl_buffer@36.release()\n[502451.011] wl_display@1.delete_id(37)\n[502451.047] wl_callback@37.done(45562391)\n[502512.230] wl_pointer@12.enter(4466, wl_surface@16, 471.695312, 699.425781)\n[502512.357]  -> wl_pointer@12.set_cursor(4466, wl_surface@13, 5, 5)\n[502512.430]  -> wl_surface@13.attach(wl_buffer@19, 0, 0)\n[502512.490]  -> wl_surface@13.damage(0, 0, 32, 32)\n[502512.576]  -> wl_surface@13.commit()\n[502512.619] wl_pointer@12.motion(45562451, 471.695312, 699.425781)\n[502987.230] wl_pointer@12.motion(45562928, 471.003906, 697.574219)\n[503266.057] wl_pointer@12.motion(45563206, 470.941406, 697.453125)\n[503418.442] wl_pointer@12.button(4467, 45563359, 272, 1)\n[503423.861]  -> wl_surface@16.frame(new id wl_callback@37)\n[503423.915]  -> wl_surface@16.attach(wl_buffer@36, 0, 0)\n[503423.954]  -> wl_surface@16.damage(173, 216, 341, 1)\n[503424.031]  -> wl_surface@16.damage(173, 217, 1, 809)\n[503424.092]  -> wl_surface@16.damage(490, 217, 24, 809)\n[503424.166]  -> wl_surface@16.damage(173, 1026, 341, 1)\n[503424.238]  -> wl_surface@16.commit()\n[503425.457] wl_display@1.delete_id(37)\n[503425.495] wl_buffer@36.release()\n[503425.543] wl_callback@37.done(45563366)\n[503505.232] wl_pointer@12.button(4468, 45563446, 272, 0)\n[503534.097] wl_pointer@12.motion(45563475, 470.941406, 697.453125)\n[503680.004] wl_pointer@12.motion(45563621, 470.980469, 697.414062)\n[503695.652] wl_keyboard@3.key(4469, 45563637, 42, 1)\n[503695.698] wl_keyboard@3.modifiers(4470, 1, 0, 16, 0)\n[503696.031] wl_keyboard@3.key(4471, 45563637, 125, 1)\n[503696.063] wl_keyboard@3.modifiers(4472, 65, 0, 16, 0)\n[503698.123] wl_pointer@12.motion(45563639, 471.019531, 697.453125)\n[503756.549] wl_pointer@12.motion(45563697, 471.105469, 697.710938)\n[503804.477] wl_pointer@12.motion(45563745, 471.257812, 697.863281)\n[503823.962] zxdg_toplevel_v6@22.close()\n[503824.350]  -> zxdg_toplevel_v6@22.destroy()\n[503824.381]  -> zxdg_surface_v6@21.destroy()\n[503824.398]  -> wl_surface@16.destroy()\n[503824.758]  -> wl_display@1.sync(new id wl_callback@37)\n[503859.735]  -> wl_shm_pool@35.destroy()\n[503859.771]  -> wl_buffer@36.destroy()\n[503861.676]  -> wl_shm_pool@25.destroy()\n[503861.697]  -> wl_buffer@28.destroy()\n[503861.950]  -> wl_shm_pool@29.destroy()\n[503861.960]  -> wl_buffer@30.destroy()\n[503862.257] wl_display@1.delete_id(22)\n[503862.278] wl_display@1.delete_id(21)\n[503862.283] wl_display@1.delete_id(16)\n[503862.289] wl_display@1.delete_id(37)\n[503862.298] wl_keyboard@3.leave(4474, nil)\n[503862.309] wl_pointer@12.leave(4483, nil)\n[503862.319] wl_callback@37.done(4484)\n[503864.047]  -> zwp_linux_dmabuf_v1@17.destroy()\n[503864.079]  -> wl_pointer@12.release()\n[503864.164]  -> wl_keyboard@3.release()\n[503864.185]  -> wl_touch@14.release()\n[503864.199]  -> wl_buffer@19.destroy()\n[503864.294]  -> wl_shm_pool@11.destroy(). It opens maximized (not floating) for me in sway:\n\n\n. +1 for popups of full-screen parents. Eg. smplayer -> context menu -> options -> preferences.. I can confirm the issue. I noticed \"enter\" key events (key code 28) during typing the password. It seems that only a part of the password is evaluated.. Ah yea I don't have meson 48 yet. Thanks.. > Can you please provide the full backtrace for swaybar? coredumpctl gdb swaybar followed by bt full.\n```\n[N][rik@T450 ~]$ coredumpctl gdb swaybar\n           PID: 28961 (swaybar)\n           UID: 1000 (rik)\n           GID: 1001 (rik)\n        Signal: 11 (SEGV)\n     Timestamp: Wed 2019-01-02 07:09:03 CET (41min ago)\n  Command Line: swaybar -b bar-0\n    Executable: /usr/bin/swaybar\n Control Group: /user.slice/user-1000.slice/session-177.scope\n          Unit: session-177.scope\n         Slice: user-1000.slice\n       Session: 177\n     Owner UID: 1000 (rik)\n       Boot ID: e211e98d397b43ef991987969a309ca1\n    Machine ID: 9ada6c77f16845cea1d15a0707e6172f\n      Hostname: T450\n       Storage: /var/lib/systemd/coredump/core.swaybar.1000.e211e98d397b43ef991987969a309ca1.28961.1546409343000000.lz4\n       Message: Process 28961 (swaybar) of user 1000 dumped core.\n            Stack trace of thread 28961:\n            #0  0x00007f29bd12d123 __libc_free (libc.so.6)\n            #1  0x0000000000410f12 handle_new_icon (swaybar)\n            #2  0x00007f29bd28b6f6 n/a (libsystemd.so.0)\n            #3  0x00007f29bd28b1f3 n/a (libsystemd.so.0)\n            #4  0x00007f29bd28b1ca n/a (libsystemd.so.0)\n            #5  0x00007f29bd28b1f3 n/a (libsystemd.so.0)\n            #6  0x00007f29bd28b1ca n/a (libsystemd.so.0)\n            #7  0x00007f29bd28b1f3 n/a (libsystemd.so.0)\n            #8  0x00007f29bd28b1ca n/a (libsystemd.so.0)\n            #9  0x00007f29bd28b1f3 n/a (libsystemd.so.0)\n            #10 0x00007f29bd28b1ca n/a (libsystemd.so.0)\n            #11 0x00007f29bd28b1f3 n/a (libsystemd.so.0)\n            #12 0x00007f29bd28b4b3 n/a (libsystemd.so.0)\n            #13 0x00007f29bd28b416 n/a (libsystemd.so.0)\n            #14 0x00007f29bd2a7718 n/a (libsystemd.so.0)\n            #15 0x00007f29bd2ad4eb n/a (libsystemd.so.0)\n            #16 0x0000000000412465 tray_in (swaybar)\n            #17 0x0000000000414472 loop_poll (swaybar)\n            #18 0x0000000000407353 bar_run (swaybar)\n            #19 0x000000000040b77f main (swaybar)\n            #20 0x00007f29bd0ca413 __libc_start_main (libc.so.6)\n            #21 0x0000000000405dfe _start (swaybar)\n\nGNU gdb (GDB) Fedora 8.2-5.fc29\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n    http://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/swaybar...done.\n[New LWP 28961]\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nwarning: Loadable section \".note.gnu.property\" outside of ELF segments\nCore was generated by `swaybar -b bar-0'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00007f29bd12d123 in free () from /lib64/libc.so.6\nMissing separate debuginfos, use: dnf debuginfo-install bzip2-libs-1.0.6-28.fc29.x86_64 cairo-1.16.0-3.fc29.x86_64 expat-2.2.6-1.fc29.x86_64 fontconfig-2.13.1-3.fc29.x86_64 freetype-2.9.1-6.fc29.x86_64 fribidi-1.0.5-1.fc29.x86_64 gdk-pixbuf2-2.38.0-4.fc29.x86_64 glib2-2.58.2-1.fc29.x86_64 glibc-2.28-26.fc29.x86_64 graphite2-1.3.10-6.fc29.x86_64 harfbuzz-1.8.7-1.fc29.x86_64 json-c-0.13.1-3.fc29.x86_64 libX11-1.6.7-1.fc29.x86_64 libX11-xcb-1.6.7-1.fc29.x86_64 libXext-1.3.3-10.fc29.x86_64 libXrender-0.9.10-8.fc29.x86_64 libblkid-2.32.1-1.fc29.x86_64 libcap-2.25-12.fc29.x86_64 libdatrie-0.2.9-8.fc29.x86_64 libdrm-2.4.96-2.fc29.x86_64 libevdev-1.5.9-5.fc29.x86_64 libffi-3.1-18.fc29.x86_64 libgcc-8.2.1-6.fc29.x86_64 libgcrypt-1.8.4-1.fc29.x86_64 libglvnd-1.1.0-2.fc29.x86_64 libglvnd-egl-1.1.0-2.fc29.x86_64 libglvnd-gles-1.1.0-2.fc29.x86_64 libgpg-error-1.31-2.fc29.x86_64 libgudev-232-4.fc29.x86_64 libinput-1.12.4-1.fc29.x86_64 libmount-2.32.1-1.fc29.x86_64 libpng-1.6.34-6.fc29.x86_64 libselinux-2.8-4.fc29.x86_64 libthai-0.1.28-1.fc29.x86_64 libuuid-2.32.1-1.fc29.x86_64 libwacom-0.32-2.fc29.x86_64 libwayland-client-1.16.0-1.fc29.x86_64 libwayland-cursor-1.16.0-1.fc29.x86_64 libwayland-egl-1.16.0-1.fc29.x86_64 libwayland-server-1.16.0-1.fc29.x86_64 libxcb-1.13.1-1.fc29.x86_64 libxkbcommon-0.8.2-1.fc29.x86_64 lz4-libs-1.8.2-2.fc29.x86_64 mesa-libgbm-18.2.6-3.fc29.x86_64 mtdev-1.1.5-13.fc29.x86_64 pango-1.42.4-1.fc29.x86_64 pcre-8.42-5.fc29.x86_64 pixman-0.34.0-10.fc29.x86_64 systemd-libs-239-7.git3bf819c.fc29.x86_64 xcb-util-wm-0.4.1-14.fc29.x86_64 zlib-1.2.11-14.fc29.x86_64\nI bt full\n0  0x00007f29bd12d123 in free () at /lib64/libc.so.6\n1  0x0000000000410f12 in handle_new_icon (msg=0x582010, data=0x566370, error=0x7ffc80166b20) at ../swaybar/tray/item.c:163\n    sni = 0x566370\n\n2  0x00007f29bd28b6f6 in  () at /lib64/libsystemd.so.0\n3  0x00007f29bd28b1f3 in  () at /lib64/libsystemd.so.0\n4  0x00007f29bd28b1ca in  () at /lib64/libsystemd.so.0\n5  0x00007f29bd28b1f3 in  () at /lib64/libsystemd.so.0\n6  0x00007f29bd28b1ca in  () at /lib64/libsystemd.so.0\n7  0x00007f29bd28b1f3 in  () at /lib64/libsystemd.so.0\n8  0x00007f29bd28b1ca in  () at /lib64/libsystemd.so.0\n9  0x00007f29bd28b1f3 in  () at /lib64/libsystemd.so.0\n10 0x00007f29bd28b1ca in  () at /lib64/libsystemd.so.0\n11 0x00007f29bd28b1f3 in  () at /lib64/libsystemd.so.0\n12 0x00007f29bd28b4b3 in  () at /lib64/libsystemd.so.0\n13 0x00007f29bd28b416 in  () at /lib64/libsystemd.so.0\n14 0x00007f29bd2a7718 in  () at /lib64/libsystemd.so.0\n15 0x00007f29bd2ad4eb in  () at /lib64/libsystemd.so.0\n16 0x0000000000412465 in tray_in (fd=7, mask=1, data=0x4b6bc0) at ../swaybar/tray/tray.c:95\n    bus = 0x4b6bc0\n    ret = 1\n\n17 0x0000000000414472 in loop_poll (loop=0x432620) at ../common/loop.c:84\n    pfd = {fd = 7, events = 1, revents = 1}\n    event = 0x519b10\n    events = 25\n    i = 3\n    ms = 2147483647\n\n18 0x0000000000407353 in bar_run (bar=0x420b80 ) at ../swaybar/bar.c:430\n19 0x000000000040b77f in main (argc=3, argv=0x7ffc80167438) at ../swaybar/main.c:105\n    socket_path = 0x4323d0 \"\"\n    debug = false\n    long_options = \n        {{name = 0x418edf \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x418ee4 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x418eec \"socket\", has_arg = 1, flag = 0x0, val = 115}, {name = 0x418ef3 \"bar_id\", has_arg = 1, flag = 0x0, val = 98}, {name = 0x418efa \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    usage = 0x418c20 \"Usage: swaybar [options...]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -v, --version          Show the version number and quit.\\n  -s, --socket <socket>  Connect to sway via socket.\\n  -b, \"...\n    c = -1\n\n```\n\nAlso, not sure if it is related without the backtrace, but Wayland/Sway does not have the concept of primary outputs. tray_output primary will only show the tray on an output with the name or identifier of primary, which won't exist.\n\nOk thanks, that may explain why I don't see any tray icons also for other apps.... After removing tray_output primary the icon get's shown properly. I guess the problem is related to the output name being not existent.\nHowever, the telegram tray icon does not work. Instead a red smiley is shown. Is this expected?\n\n. ",
    "idest": "Downgrading mesa to 18.0.4-1 fixed this for me (https://github.com/swaywm/sway/issues/2126). ",
    "dvejmz": "Hi @idest , I tried your suggestion of downgrading mesa to 18.0.4-1 but the issue persists. It happened just now and it took me 3 reboots to get it to launch correctly again. I guess there's not really much else I can do other than to wait for sway 1.0 to go stable. Thanks for your suggestion anyway.. Thanks for the info @keithbowes , what version of libdrm did you downgrade to to resolve the issue?. Is this a 1.0 issue or a 0.15 issue? I've tried to reproduce this on 0.15.2 and I got a different (but also wrong) behaviour. If I make a tooltip appear on Firefox, I cannot switch workspaces as long as the tooltip is on display. As soon as I hover my mouse out and the tooltip disappears, I can switch workspaces again.\nThis doesn't happen in Chrome.. ",
    "f4814": "I have the same issue on 0.15. And I, too, am using a nvidia card and nouveau.\nDmesg spits this: (seems to be a noveau bug)\n[  614.018177] INFO: task kworker/u16:1:87 blocked for more than 120 seconds.\n[  614.018184]       Not tainted 4.18.5-arch1-1-ARCH #1\n[  614.018186] \"echo 0 > /proc/sys/kernel/hung_task_timeout_secs\" disables this message.\n[  614.018189] kworker/u16:1   D    0    87      2 0x80000000\n[  614.018255] Workqueue: events_unbound nv50_disp_atomic_commit_work [nouveau]\n[  614.018257] Call Trace:\n[  614.018268]  ? __schedule+0x29b/0x8b0\n[  614.018271]  schedule+0x32/0x90\n[  614.018275]  schedule_timeout+0x311/0x4a0\n[  614.018279]  ? _raw_spin_unlock+0x16/0x30\n[  614.018285]  dma_fence_default_wait+0x1e8/0x270\n[  614.018288]  ? dma_fence_default_wait+0x270/0x270\n[  614.018292]  dma_fence_wait_timeout+0x39/0x110\n[  614.018305]  drm_atomic_helper_wait_for_fences+0x38/0xc0 [drm_kms_helper]\n[  614.018355]  nv50_disp_atomic_commit_tail+0x7c/0x860 [nouveau]\n[  614.018360]  ? _raw_spin_unlock_irq+0x1d/0x30\n[  614.018364]  ? __switch_to_asm+0x40/0x70\n[  614.018369]  process_one_work+0x1eb/0x3c0\n[  614.018372]  worker_thread+0x2d/0x3d0\n[  614.018375]  ? process_one_work+0x3c0/0x3c0\n[  614.018379]  kthread+0x112/0x130\n[  614.018382]  ? kthread_flush_work_fn+0x10/0x10\n[  614.018386]  ret_from_fork+0x35/0x40. ",
    "superseed": "Same issue here, though no variant works.\nEdit: I can't type. Still, some debug output which mentions altgr-intl in this case:\nI: 07/23/18 21:03:59 - [main.c:250] Linux exnihilo 4.17.8-1-ARCH #1 SMP PREEMPT Wed Jul 18 09:56:24 UTC 2018 x86_64 GNU/Linux\nI: 07/23/18 21:03:59 - [main.c:222] Contents of /etc/os-release:\nI: 07/23/18 21:03:59 - [main.c:229] NAME=\"Arch Linux\"\nI: 07/23/18 21:03:59 - [main.c:229] PRETTY_NAME=\"Arch Linux\"\nI: 07/23/18 21:03:59 - [main.c:229] ID=arch\nI: 07/23/18 21:03:59 - [main.c:229] ID_LIKE=archlinux\nI: 07/23/18 21:03:59 - [main.c:229] ANSI_COLOR=\"0;36\"\nI: 07/23/18 21:03:59 - [main.c:229] HOME_URL=\"https://www.archlinux.org/\"\nI: 07/23/18 21:03:59 - [main.c:229] SUPPORT_URL=\"https://bbs.archlinux.org/\"\nI: 07/23/18 21:03:59 - [main.c:229] BUG_REPORT_URL=\"https://bugs.archlinux.org/\"\nI: 07/23/18 21:03:59 - [main.c:207] PATH=/home/superseed/.bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\nI: 07/23/18 21:03:59 - [main.c:207] LD_LOAD_PATH=(null)\nI: 07/23/18 21:03:59 - [main.c:207] LD_PRELOAD_PATH=(null)\nI: 07/23/18 21:03:59 - [main.c:207] LD_LIBRARY_PATH=(null)\nI: 07/23/18 21:03:59 - [main.c:207] SWAY_CURSOR_THEME=(null)\nI: 07/23/18 21:03:59 - [main.c:207] SWAY_CURSOR_SIZE=(null)\nI: 07/23/18 21:03:59 - [main.c:207] SWAYSOCK=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_DRM_DEVICE=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_SHM=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_OUTPUTS=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_XWAYLAND=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_LIBINPUT=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_REPEAT_DELAY=(null)\nI: 07/23/18 21:03:59 - [main.c:207] WLC_REPEAT_RATE=(null)\nI: 07/23/18 21:03:59 - [main.c:207] XKB_DEFAULT_RULES=(null)\nI: 07/23/18 21:03:59 - [main.c:207] XKB_DEFAULT_MODEL=(null)\nI: 07/23/18 21:03:59 - [main.c:207] XKB_DEFAULT_LAYOUT=en_US\nI: 07/23/18 21:03:59 - [main.c:207] XKB_DEFAULT_VARIANT=altgr-intl\nI: 07/23/18 21:03:59 - [main.c:207] XKB_DEFAULT_OPTIONS=(null)\nD: 07/23/18 21:03:59 - [main.c:52] [wlc] logind: session control granted\nD: 07/23/18 21:03:59 - [main.c:52] [wlc] Running on vt 1 (fd 0)\nxkbcommon: ERROR: Unrecognized RMLVO variant \"altgr-intl\" was ignored\nI've repeated the same test with alt-intl and the message was the same, save for the variant name.. Strange. On sway version 1.0-alpha.5-62-gd0fb2d9a (Aug 13 2018, branch 'master'), using xkb_variant altgr-intl works for me.. ",
    "martinsb": "I noticed that \"tiling\" and \"floating\" criteria do not work.\nEx. for_window [tiling] border none yields error that Token 'tiling' is not recognized. The same happens if using floating criterion.\nEDIT: forgot to mention, using version 1.0 alpha 6.. I noticed that \"tiling\" and \"floating\" criteria do not work.\nEx. for_window [tiling] border none yields error that Token 'tiling' is not recognized. The same happens if using floating criterion.\nEDIT: forgot to mention, using version 1.0 alpha 6.. Same thing happens in my environment with Dell WD15 dock. No issues when using USB-C to HDMI adapter (without the dock).. Same thing happens in my environment with Dell WD15 dock. No issues when using USB-C to HDMI adapter (without the dock).. ",
    "ndrewtl": "Hooray! Thank you so much @SirCmpwn and all contributors for making this happen. This project is so exciting, as is wl-roots. Huge shoutout to everyone volunteering hours of their lives to make this work, and many thanks!. Hooray! Thank you so much @SirCmpwn and all contributors for making this happen. This project is so exciting, as is wl-roots. Huge shoutout to everyone volunteering hours of their lives to make this work, and many thanks!. ",
    "paualberto": "What about set_from_resource? It's strikethrough'd in the issue, but not sure if it's implemented, this breaks compatibility with i3 configs. > set_from_resource loads a value from the X resource database. Sway does not use the X resource database and there is not a Wayland equivalent.\nYou're right, appearently this is what the i3 guide says.\nI was using set_from_resource $user echo \"$USER\" which actually work for getting your username into i3 config to write multi-user configs. It also works for reading any other env variable.\nIs there another way to read env variables in sway config?\n. ",
    "Patricol": "Couldn't find a more relevant issue for this:\nset $<name> <value> doesn't work inside mode <name> {} blocks, which doesn't match i3's behavior.\nIs that a bug, an intentional divergence, or an oversight?\nAlso, @RedSoxFan,  i3's set_from_resource $<name> <resource_name> <fallback> does allow for the inclusion of a fallback. If drop-in compatibility with i3 configurations is desired, sway could just interpret set_from_resource commands including <fallback> args as set $<name> <value (fallback)>.\nIn interpreting my 450 line i3 config file, those are the only two stumbles sway had.. ",
    "ganguin": "Thanks.\nShouldn't meson xwayland flag also disable xcb dependency?. Done: https://github.com/swaywm/sway/pull/2393. ",
    "mihaicmn": "My config file contains the following settings:\n...\nset $ws1 \" 1 \"\nbindsym $mod+1 workspace $ws1\n...\nAt startup the first workspace name is read from the bindings (#2284). Due to removal of leading spaces the newly created workspace is not accessible via keyboard. I can only switch to that workspace by using swaybar.. Played around with IPC_EVENT_WINDOW and IPC_GET_TREE and unfortunately the first one is not triggered when a window is moved to scratchpad and get_tree replay does not include scratchpad containers.. In i3 get_tree's reply contains the hidden scratchpad windows as floating nodes on the \"__i3_scratch\" workspace which belongs to the \"__i3\" output. Should we keep the same approach for sway or is it acceptable adding a new json object, called \"scratchpad\", within the root json object?\nAlso moving a window to/from scratchpad does trigger move events in i3.. > Can you please add window::move events for when the container is added to and removed from the scratchpad (see root_scratchpad_add_container and root_scratchpad_remove_container)? \nDone. ",
    "dcz-purism": "These messages come from virtboard. The first one is talking that the input-method protocol is not implemented, and the other one is about missing org.gnome.SessionManager dbus interface. It should be working fine despite both, is it?. These messages come from virtboard. The first one is talking that the input-method protocol is not implemented, and the other one is about missing org.gnome.SessionManager dbus interface. It should be working fine despite both, is it?. Can you check if the dbus invokation works?\nbusctl call --user sm.puri.OSK0 /sm/puri/OSK0 sm.puri.OSK0 SetVisible b true\nThe keyboard should appear after this.. Can you check if the dbus invokation works?\nbusctl call --user sm.puri.OSK0 /sm/puri/OSK0 sm.puri.OSK0 SetVisible b true\nThe keyboard should appear after this.. ",
    "rkanati": "Yeah, this is working correctly for me on master. Should probably close.. Yeah, this is working correctly for me on master. Should probably close.. I used to use LightDM and had this exact problem, so I ended up writing a custom Xsession script that actually used a proper login shell. Since switching to Sway, I've been using SDDM, which supports more shells natively, and I've not needed to do this.\nMy point is, while this might be a useful stopgap in the meantime, I feel it ought to be the responsibility of display managers and shells to play nice together.. I used to use LightDM and had this exact problem, so I ended up writing a custom Xsession script that actually used a proper login shell. Since switching to Sway, I've been using SDDM, which supports more shells natively, and I've not needed to do this.\nMy point is, while this might be a useful stopgap in the meantime, I feel it ought to be the responsibility of display managers and shells to play nice together.. set $OUT_02 ...\nfocus output $OUT_2 ...\nSee the problem?. set $OUT_02 ...\nfocus output $OUT_2 ...\nSee the problem?. How would this interact with, e.g. the vulkan renderer proposal? And how much could you really achieve with this - cute effects, sure, but is there something bigger I'm missing?. How would this interact with, e.g. the vulkan renderer proposal? And how much could you really achieve with this - cute effects, sure, but is there something bigger I'm missing?. ",
    "chr0me-sh": "\nFollow-up issue: if you unplug all pointer devices, it should hide the cursor again. This can probably be done by always calling seat_configure_xcursor as it's done right now, but also call...\n\n@emersion I will have a look at addressing your follow up issue and push a fix when I can get it done.\n. I'm not sure how this applies to USB inputs being inserted or removed, but at the moment if I remove my pointer kernel module the cursor does leave, and reappear when I insert the module again.. > Try without opening an app\nYep, you are right. I believe the effect came from the mouse auto hiding when I started typing..  The laptop I am testing has a track stick pointer device and a trackpad. No side effects, both of them work fine.. ",
    "marienz": "I didn't really look at what wlroots and Xwayland do with SIGUSR1. It seemed reasonable to just clear the mask unconditionally (and clear the entire mask instead of just SIGUSR1).. ",
    "Alexays": "My fault I added the version\nedit: maybe you should add ISSUE_REPORTING template to avoid idiot like me ;). I think there is not only a focus problem because if I move to a new workspace sticky windows aren't there. ",
    "johanhelsing": "Hi, I'm working on Qt and would be very happy to get any Qt related bugs sorted out!\nThere might be a couple of different issues involved here. Could each of you experiencing this please answer all of the following questions:\n\nWhich Qt version are you using?\nDoes weston-info report correct physical dimensions? All the previous bugs I've seen on font size issues have been because the compositor reports the wrong physical size.\nDo you have a multi-monitor setup? Prior to Qt version 5.11, Qt didn't handle per-monitor DPI. So Qt applications would draw themselves with the dpi of the first monitor. Secondly, I've  also seen wlroots-based compositors (at least rootston) sending bogus screen enter/leave events, which may confuse clients. i.e. do you see \"unexpected enter/leave event\" warnings in the terminal?\nPlease attach the output when an application is run with WAYLAND_DEBUG=1 set.\nAlso, does it happen without any QT_*SCALE_* env vars set?\n\nIf you have Qt 5.11 or newer and weston-info is reporting the correct physical size. Please open a new bug at bugreports.qt.io (with answers to the questions above).\nAnd just a side note: Because compositors so often are misreporting physical size, in Qt Wayland 5.12 we will switch to forcing 96 DPI by default, essentially making pixel sized and point sized fonts the same thing. If you have a working compositor and want fonts with point size 11 to be the same physical size on each monitor regardless of its DPI (their intended use), you can restore the old behavior by setting QT_WAYLAND_FORCE_DPI=physical. Pixel sized fonts will still get their size from the monitor scale factor.. @Rikorose:\nPoint sized fonts in Qt are meant to be physically the same size regardless of what DPI you screen is. It's meant as a way for the application programmer to say this character is going to be this size in mm in the physical world. It becomes a problem when applications mix pixel sized UI elements (which follow scale factor) with point sized fonts (which follow real world sizes). Since you're using a very low scale factor (1) on a display with a very high dpi (157), things will look weird for applications that mix the two concepts.\nSo unless I've overseen something, these are application bugs. They should probably switch to pixel sized fonts for the things that should scale with scale factor and not with the DPI.\nA workaround is of course to set QT_WAYLAND_FORCE_DPI, and lie about your DPI. Which is what we will do in Qt 5.12, because apparently, neither compositors nor applications can be trusted. Sigh...\nHowever, just to make sure I'm not mistaken, can you run the following and make sure everything makes sense?\n```qml\n!/usr/bin/env qml\nimport QtQuick 2.7\nimport QtQuick.Window 2.2\nWindow {\n    id: win\n    visible: true\n    width: 600\n    height: 300\n    Column {\n        anchors.fill: parent\n        Text { text: \"Screen name: \" + win.screen.name }\n        Text { text: \"Screen model: \" + win.screen.model }\n        Text { text: \"Screen width: \" + win.screen.width }\n        Text { text: \"Screen height: \" + win.screen.height }\n        Text { text: \"Screen devicePixelRatio: \" + win.screen.devicePixelRatio }\n        Text { text: \"Screen pixelDensity: \" + win.screen.pixelDensity }\n        Text { text: \"\\\"pixels\\\" per inch: \" + win.screen.pixelDensity * 25.4 }\n        Text { text: \"Physical DPI: \" + win.screen.pixelDensity * 25.4 * win.screen.devicePixelRatio }\n        Text { text: \"Physical width: \" + win.screen.width / win.screen.pixelDensity }\n        Text { text: \"Physical height: \" + win.screen.height / win.screen.pixelDensity }\n        Text { text: \"pixelSize 12\"; font.pixelSize: 12 }\n        Text { text: \"pointSize 12\"; font.pointSize: 12 }\n    }\n}\n```\nEDIT: And btw, the reason it looks \"right\" with eglfs, is probably because it doesn't know the correct physical size of your screen. It can be set through QT_QPA_EGLFS_KMS_CONFIG.. @ThomasLeister (and also @cg9999): My guess it that you are experiencing varying behavior because you are sometimes not running Qt using the wayland backend.\nMy guess at what's happening, making a lot of assumptions:\nQt (5.11 an newer) will select the wayland plugin if XDG_SESSION_TYPE=wayland is set in the environment. This is normally done when you log in using a graphical login manager.\nHowever, we (Qt) are currently blacklisting gnome-shell and run our X backend there instead due to this bug: https://gitlab.gnome.org/GNOME/mutter/issues/199\nSo:\n\ngnome-shell is not using the wayland backend (because we blacklist it)\nsway started from your login manager uses wayland (because XDG_SESSION_TYPE is set)\nsway started from a different tty (ctrl+alt+f2) does not use wayland (because XDG_SESSION_TYPE is unset)\n\nNow your fonts are looking different than they do on X. The questions is still, is it a bug? And whose bug is it?\nThe reason it's different, is that the application is using point-sized fonts, which according to our documentation, is supposed to be physically sized. I.e.\n\n[...] sets the point size in a device-independent manner. However, specifying fonts in points and other sizes in pixels causes problems, because points are independent of the display density. A frame around a string that looks correct on low DPI displays is likely to become too small on high DPI displays, causing the text to be clipped.\n\nSo arguably it's an application bug. So why is it working on X, then? Well the answer is simple: On X it's hard or impossible to get reliable DPI information, so it's almost always set to 96 or some value close to that.\nOn wayland, we usually have accurate DPI information available, but since all the applications developed for X assumed a constant DPI of 96, without any consideration that it might change, they are now looking incredibly ugly on Wayland, and people start believing it's a bug either in the compositor or in the Qt Wayland plugin.\nNow we have two options:\n\nDo it the \"correct\" way, and start reporting bugs to all ugly-looking applications that they need to start using pixel-sized fonts, or scale the rest of their UI using point sizes as well.\nThe more pragmatic approach: Give up and just start hard-coding the DPI to 96 on wayland as well.\n\nSomewhat disappointingly, we chose the latter starting with Qt 5.12. The old behavior can be re-enabled by setting QT_WAYLAND_FORCE_DPI=physical.\nIf you're on older Qt and would just like your Qt applications to look nice, you can set QT_WAYLAND_FORCE_DPI=96 and get the new default behavior immediately.. @ThomasLeister, yes, reporting bugs to those projects would make sense. It would also make it a lot easier for those projects if they decide to add support for macOS, for instance, where the DPI is hard coded to 72 iirc.. I also get enter events with gtk clients.\nHowever, I don't get enter events on Qt clients, eventhough we don't commit before set_cursor:\n[3991287.209]  -> wl_compositor@5.create_surface(new id wl_surface@36)\n[3991287.218]  -> wl_pointer@3.set_cursor(6921, wl_surface@36, 4, 4)\n[3991287.231]  -> wl_surface@36.attach(wl_buffer@30, 0, 0)\n[3991287.242]  -> wl_surface@36.set_buffer_scale(2)\n[3991287.247]  -> wl_surface@36.damage(0, 0, 24, 24)\n[3991287.260]  -> wl_surface@36.commit()\nrectangle.log\n. Yep, you're right. After adding a listener I can see the events client side. Didn't know that was needed.. ",
    "LeePowell": "Different monitors preserve Window size - finally; however, Qt is still not High DPI aware in 5.11.2 on Windows. Scaling issue abounds for non HiDPI monitors still (years of promises now). When will it be fixed?. ",
    "ThomasLeister": "Hello everyone,\nI'm facing similar scaling issues with QT5 apps, too. (Running 1.0-0.beta.2).\nIf I start up my computer and start Sway right away, Nextcloud client  (QT-based) starts up automatically. It is scaled too big (compare to terminal - this is a FullHD screen):\n\n(Also note the glitch at the bottom border of the qt window)\nBut if I start up my Gnome Shell first and then switch to Sway later, everything is fine:\n\nMy guess is that Gnome sets some properties to make things work as they should, and Sway doesn't. But I'm not sure. The workaround is reproducible on my machine.\n. Unfortunately it seems to have no effect at all. I've tried different values from 80 to 150, but couldn't tell a difference (in general, also concerning the size of QT apps)\nCorrect me if I'm wrong, but as far as I understand Xresources is not relevant for Wayland sessions, because it says \"X\", is it?. @johanhelsing thanks for explaining! As I'm running QT 4.8.7 on Fedora 29, I'll just start my applications with QT_WAYLAND_FORCE_DPI=96 (and wait for QT 5.12).\nBut still it would make sense to ask application developers to change their code to pixel sized or point sized elements only, right? Because even if QT 5.12 introduces a \"fix\" for that problem, problems will again occur if you try to change DPI. It that correct? . I'm having similar issues with negative display positions. if I use this configuration:\n```\noutput eDP-1 {\n        pos 0 0\n}\noutput DP-4 {\n    scale 1.2\n        pos 1 -1800\n        res 3840x2160\n}\n```\nSome applications on DP4 (to one with the negative position argument) do not respond to mouse pointer, e.g. Mozilla Firefox, Mozilla Thunderbird and VirtualBox (Qt 5.6.1).\nOther applications do work as expected: Gnome Terminal, Nautilus, Dino XMPP Client, KeePassXC (Qt 5.11.3), Virt-Manager and Firefox Nightly with Native wayland supported.\nAll in all: \n\nThis is an Xwayland bug.\n\nCan confirm. Maybe there should be a warning about that issue on the Sway wiki in the \"Outputs\" section? :-) \nMy current workaround is to align display coordinates in a way that I don't need to use negative positions. ",
    "nagisa": "I have encountered this problem even after raise_floating has been removed.\nMy specific problem involves scenarios when the dialogs are transient and disable interactions with the parent windows. For example, closing a floating gedit window will ask if you want to close without saving. This dialog will go under the parent window if the parent is focused and focusing back to the dialog using the focus left/right commands will not raise the dialog back, rendering interaction with either window infeasible until the parent window is moved or unfloated.\nI think that in floating scenarios a transient dialog should never be put behind the parent window. In fact, I believe that attempting to focus the parent window (via e.g. focus follows mouse) should focus the transient dialog(s) instead (perhaps making this behaviour configurable).. Know an easy way to reproduce this issue as I\u2019ve been facing it with firefox.\n\nHave in your config something like assign [class=\"Firefox\"] workspace 1;\nOpen firefox, then open a new window of firefox and move the new window to a workspace other than 1st;\nWith the new window focused click Ctrl+N to open a new window (alternatively right-click any link and \u201cOpen Link in New Window\u201d);\nObserve being unable to interact with a page or most of the Firefox UI (e.g. omnibar or the hamburger menu);\nSwitch to workspace 1 and then back;\nObserve being able to interact with the pages again.. > we ask the main Firefox window to close, which it rejects because the autocomplete surface is open.\n\nAh, I suspected sway not sending a request to close at all (or sending it to a wrong window/surface. If it\u2019s application-specific behaviour then it is all fine.. ",
    "tdw546": "Wow thanks, that is awesome. ",
    "hanko34": "After removing all caps from sway, the following warning is given at startup:\n\n[sway/sway/main.c:197] !! DANGER !! Sway does not have CAP_SYS_PTRACE and cannot enforce security rules for processes running as other users.\n\nTestet on: sway version 1.0-alpha.5-43-g425ee270 (Aug  9 2018, branch 'master')\nIs the warning still valid or a leftover?. I can use rootston, however the same issues apply if I run e.g. firefox in rootston. ",
    "kminehart": "kminehart-linux-desktop ~/.sway \u20390cd418ba\u203a \u00bb sway -v\nsway version 1.0-alpha.5 (Aug  9 2018, branch 'HEAD')\nWell, there we go, that did it. I tried using sway-git on the AUR yesterday and that didn't seem to work, I'm assuming it's because that's using the master branch?\nThanks for the quick response!. ",
    "DonnieWest": "Evidently I also included an unrelated variable change, sorry about that. I'll remove it if desired . Aha, there's the hole in my understanding. I think I know what I need to do now. I'll try to follow up tomorrow unless someone beats me to it. This seems to work @RyanDwyer - let me know if there's anything else I can do here. @RyanDwyer fixed. Let me know if you'd like me to rebase or anything :). How would you like me to handle that? Just squash and force push here or open a new PR with the squashed commits?. Done :). @RyanDwyer would wrapping on the ? be acceptable here?\nEdit: like...\nif (focus) {\n        current_workspace = focus->type == C_WORKSPACE ?\n            focus : container_parent(focus, C_WORKSPACE);\n        current_output = container_parent(focus, C_OUTPUT);\n    }. ",
    "dano6": "Same with many GTK apps (Gnome Calendar, Builder, Glade, Contacts, gnome-terminal preferences window). ",
    "Cherser-s": "For me, input is broken in popover menus in Steam. (in both floating and fixed modes, menu items are inside window geometry)\nIt doesn't handle mouse clicks but it handles key press and mouse hovering.. For me, input is broken in popover menus in Steam. (in both floating and fixed modes, menu items are inside window geometry)\nIt doesn't handle mouse clicks but it handles key press and mouse hovering.. ",
    "SWW13": "Thanks for the hint. --disable-gpu works for signal (see also https://github.com/signalapp/Signal-Desktop/issues/2442). ",
    "coredump": "That makes a lot of stuff slow as a dog tho.\nI agree with emersion that this sounds more like a bug on the underlying\ngraphics/driver system\nOn Tue, Nov 13, 2018 at 3:34 PM Josh Klar notifications@github.com wrote:\n\nThe useHwAcceleration flag toggle fixed Slack in Sway for me (despite it\nworking great in Xorg this whole time), awesome!\n--disable-gpu works for Riot.im as well - I made some wrappers to make\nthis launcher-friendly: klardotsh/dotfiles@ed1bb60\nhttps://github.com/klardotsh/dotfiles/commit/ed1bb60103d7b13e4c580107c3c969da4910a018\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/2508#issuecomment-438426604, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AADO9chy27iG3d6SxiYcxAfRHPVaD9Kbks5uuyzRgaJpZM4WKOKI\n.\n. \n",
    "fokditkak": "There is a slight problem - the default path to the fish completions file is different from what I've put in the meson.build file. I've put absolute path but I'm not sure whether that's ok or not. Also, I haven't pushed this last change.\nEdit: now is: /usr/local/share/fish/completions\nShould be: /usr/share/fish/completions\nAccording to my system. ",
    "BuJo": "@RyanDwyer with #2709 merged, this is hopefully no longer an issue?. As I'm quite unfamiliar with the code-base:  I'm really not sure about the positioning of the 'raise on click'.  But I'm in awe how fast a working implementation could be created (I'm an openbox user and trying slowly to replace it).. Hmm unsure on how this can be handled without a configuration option, as some people might prefer one of the behaviours.  It seemed to me that i3 simply reverted what appeared to be a mistaken commit.. Thank you! Will do.. That will take me a little time, I'm trying to understand scdoc.. I installed the manpage locally and looked at it, it looks ok.. Please hold off merging the branch for now.\nI've been using this branch for a bit and I'm getting a few focus related bugs (where the focus is still on windows behind the foregroung one, missing focus borders..).  I'm not sure if it's related to my configuration or my code. I'll investigate.. I may have found the source of my problems regarding it not focusing other floating windows above the one with the focus.  #2492 adds code to container.c:container_at() which seems to \"short circuit\" container lookup as long as the cursor is still in the area of the focused view.\ndiff\n--- a/sway/tree/container.c\n+++ b/sway/tree/container.c\n@@ -371,6 +371,17 @@ struct sway_container *container_at(struct sway_workspace *workspace,\n        }\n        // If focused is floating, focused view's non-popups\n        if (focus && focus->view && is_floating) {\n+               // Prefer floating views above the focused one\n+               double _sx = 0, _sy = 0;\n+               struct wlr_surface *_surface = NULL;\n+               struct sway_container *_c = floating_container_at(lx, ly, &_surface, &_sx, &_sy);\n+               if (_surface && _c && _c != focus && container_is_floating(_c)) {\n+                       *surface = _surface;\n+                       *sx = _sx;\n+                       *sy = _sy;\n+                       return _c;\n+               }\n+\n                surface_at_view(focus, lx, ly, surface, sx, sy);\n                if (*surface) {\n                        return focus;\nThis is what I have so far.  I'm really not sure if this goes into the right direction.  I could not reproduce the steps outlined in #2492 with this code, but I'm not feeling at ease.. I found #2525 which is a problem not unlike this one.... Thanks for the review!\nI'm also good with reworking the pr to do what i3 did (which means having no configuration and the focus raising off). Let's see what the others say, then the pr needs a little bit of cleanup (wip on one commit, the container_is_floating() might not be necessary, ...) before a merge.. I marked the pr as wip, because I managed to reproduce the steps from #2492 after all.\nExperimenting with the following now:\nc\n// If focused is floating, focused view's non-popups\nif (focus && focus->view && is_floating) {\n    bool has_subsurfaces = wl_list_length(&focus->view->surface->subsurfaces) > 0;\n    c = floating_container_at(lx, ly, surface, sx, sy);\n        // only switch to second container if focused container has no menus open\n    if (!has_subsurfaces && c && c != focus) {\n        return c;\n    }\nThis feels a little like what other window managers do.. including oddities like \"when the menu is closed, the focused window will not unfocus without another click\".\n\ncreate two windows, one of the something like gnome-dictionary\nopen a menu in gnome-dictionary overlapping the second window\nclick something in the menu\nwriggle mouse a little\nfocus should move to the second window, but does not\nunfocuses only on hitting root window, not when moving outside the menu area onto the second window\n\nAnd then, the simple question for subsurfaces, I'm not sure on the rules here. Is this even a legal assumption? There could be other reasons for subsurfaces I'm not seeing.\n\"When there is/was a menu, let the window keep the focus\"... I'd rather it only keep it as long as the pointer is within the surface (+ subsurfaces).\nI apologize for the back and forth, I'll see what I can come up with.\n[edit 1]\nLog of wriggling the mouse pointer after selecting something from the menu:\n2018-09-30 10:51:01 - [sway/tree/container.c:374] floating 0x11ab9a0 or focused 0x124c9f0: sub:1 sur:1 v:1\n2018-09-30 10:51:01 - [sway/tree/container.c:383] Using focused 0x124c9f0\n2018-09-30 10:51:01 - [sway/desktop/transaction.c:394] Transaction 0x124cbc0 committing with 1 instructions\n2018-09-30 10:51:01 - [sway/desktop/transaction.c:264] Applying transaction 0x124cbc0\n2018-09-30 10:51:04 - [sway/tree/container.c:374] floating 0x11ab9a0 or focused 0x124c9f0: sub:0 sur:1 v:1\n2018-09-30 10:51:04 - [sway/tree/container.c:377] Using floating 0x11ab9a0\n2018-09-30 10:51:04 - [sway/tree/container.c:374] floating 0x11ab9a0 or focused 0x124c9f0: sub:0 sur:1 v:1\n2018-09-30 10:51:04 - [sway/tree/container.c:377] Using floating 0x11ab9a0\n2018-09-30 10:51:04 - [subprojects/wlroots/types/wlr_output.c:810] Falling back to software cursor on output 'X11-1'\n2018-09-30 10:51:34 - [sway/tree/container.c:374] floating 0x11ab9a0 or focused 0x124c9f0: sub:0 sur:1 v:1\n2018-09-30 10:51:34 - [sway/tree/container.c:377] Using floating 0x11ab9a0\nSo the the focused 0x12 gets chosen until the click. After that the branch for the floating window 0x11 below is used. Nevertheless, the focus stays on 0x12. There must still be some logic higher up the stack?\n[edit]\nYes, there was a little bit of a higher level logic.\nc\nvoid cursor_send_pointer_motion(struct sway_cursor *cursor\n...\n        // Find the node beneath the pointer's previous position\n    //struct sway_node *prev_node = node_at_coords(seat, cursor->previous.x, cursor->previous.y, &surface, &sx, &sy);\n    struct sway_node *prev_node = cursor->previous.node;\nThe previous node wasn't saved but was recalculated for the previous pointer position again.  The environment changed (the menu was closed) so the re-calculation returned a wrong previous node.\n. Note, that this might fix #2525 too for the non-floating case, if the check were to be expanded for the tiling case. (That is, if this is a valid way of handling it...)\n[edit]\nIt does, but there is a slight oddness around re-focusing the the container with the menu.  It is not sufficient to have the cursor above the subsurface, it needs to be inside the main container it seems (unsure, I should not have lost the focus).\nAnd as a second sidenote, it seems to be no longer possible to use a click to force focusing another container.\n[edit]\nI think the better check would be a fictional in_surface = is_within_surface(focus, x, y) which also handles subsurfaces. Unsure on how expensive that is.. Thank you @SirCmpwn for the kind words, I will tag you for a review when I feel that confident that the implementation is something that I want to use. Until then, I'll just keep doing what I do.. I found that the surface_at_view() function should be doing what I was thinking about in my comment before. Which is go through all the surfaces within a container including sub-surfaces and if the cursor is within their area.\nRight now I'm experimenting with an approach of \"raycasting\" through the stack of containers.\nc\nfor (int i = workspace->floating->length - 1; i >= 0; --i) {\n  struct sway_container *cn = workspace->floating->items[i];\n  surface_at_view(cn, lx, ly, surface, sx, sy);\n  if (*surface) return cn;\nThe commit b356b66 shows the basic idea without the popup handling.  I used it for a little bit and it handles really nicely and feels good.\nI will test it for a little while.. @SirCmpwn I think it's ok enough for you to have a look. I threw gperf/perf at it, it doesn't seem too expensive (at least what I could gather), valgrind didn't shout at me much and I couldn't make it crash.\n(I tested mostly in the nested X11 variant.). Thanks @SirCmpwn, everyone!. I amended the second commit with a comment.. ",
    "trobjo": "The issue seems to be solved now. At least I don't experience the behavior. I'm running the latest sway + latest firefox nightly and gtk 3.24.1-1.. Ah okay, sorry about that. I use the Firefox with Wayland. . This definitely solves the problem for me! But it introduces another bug, namely that the timeout parameters no longer work. Sorry if this goes the wrong place, I'm new to Github.. @ojab I have this issue as well, and it's not just tab switching but the Alt key behaviour at large. I can't even Alt+Left/Right arrow to navigate pages. . I still can't build sway after building wlroots from the current master branch. \n143/259. \nsway/sway@@sway@exe/commands_swap.c.o\nError: test_id defined but not used. [-Werror=unused-function]. \nAnd then below: \n152/259\nsway/sway@@sway@exe/commands_workspace.c.o\nninja: build stopped: subcommand failed. \nWhere does meson/ninja keep the log? I only have a tty now (building from a clean install), and I don't know how to copy the output. . ",
    "mxmilkb": "It happens for me when using workspace next/prev and the cursor goes from being over the xwayland firefox window to an inactive xwayland window. If instead the cursor lands on an active xwayland window or a wayland window, the tooltip disappears.\nAfter the tooltip has started to remain on screen, it will continue remaining on screen until I move my mouse, so even if the cursor subsequently lands on an active xwayland window or a wayland window through use of workspace prev/next, the tooltip remains on screen.\nArgh; so, a counter example - my window setup is thus; by workspace, 1) soulseekqt (wayland) 2) a small floating urxvt 3) two urxvt side by side 4) firefox 5) quassel (wayland). If I  start with the cursor over firefox and get a tooltip, then hit workspace prev and it lands on the inactive urxvt, I can hold down my workspace prev hotkey and it cycles endlessly in that direction with the tooltip remaining on screen. If I then, without moving the mouse, do workspace next, the tooltip disappears once the cursor lands on quassel.\nBut(!); the tooltip remaining bug also happens when I click on the workspace names in the bar to change workspace. If I change workspace then move the cursor down to a position over a non-active window and the same coordinates of FF element that would give me a tooltip if I were on the FF workspace, I get a tooltip popping up. I can get multiple different tooltips this way.. sway r5204.4a219818-1\nThese don't work;\nbindsym  --whole-window button9 kill\nbindsym  --whole-window Mod4+button8 move position center. https://gist.github.com/milkmiruku/dc34125dac988512c097ff9c83fe602d. I've only experienced this problem with sway for about a month. I have a hunch it's related to the \"Replace _XOPEN_SOURCE with _POSIX_C_SOURCE\" commit, but it's only a hunch.. FIXED! Thank you all :D :dancer: . Hmm. Whilst tray support isn't final, it appears the individual apps could be more conservative. Not sure how much swaybar can do when apps do this, are the apps expecting some specific tray feature, or are they just generally misbehaving?\nhttps://github.com/ebruck/radiotray-ng/issues/103. title does it, thanks :+1: . <falktx> that is expected and unavoidable afaik\n<falktx> all python based applications get that as their initial application name\n<falktx> if you know of a way to change this, let me know\nlad on Freenode. For future reference https://github.com/qutebrowser/qutebrowser/pull/4153. > Would the qutebrowser fix not apply here as well?\nIndeed, which was why I mention it.\n\nAlso, if the problem lies in PyQt\n\nIt does. I'll pass the message on.. ",
    "sghctoma": "The libinput update is already underway, I will look into the epoll-shim issue this week, and will also try to contact the other maintainers.\nAs for being the official point-of-contact, I have really no idea how much more time would it consume compared to just patching whenever something fails on my own system, but I think I could try.. Thanks for the merge!\n\nIs there a pending patch for this one?\n\nThere is now. Submitted a PR for 0.47.2\n\nI submitted a patch to update to 1.16 a few weeks ago. Haven't heard about it yet.\n\nYup, sadly things can be slow here...\n\nHmm, it worked a few weeks ago with the version in the ports tree. Maybe something's changed since then.\n\nThat's strange, the ports tree has a 2016 december version, which contains a bug that causes both Weston and rootston to exit with SIGUSR1 (jiixyj/epoll-shim#2). May I ask which FreeBSD version did you use? Also, did you try it with rootston, or something else? \n\nIt probably means getting in touch with dependencies maintainers in case something breaks.\nAye, it means \"keep using sway on FreeBSD and test each release before we tag it so we don't ship releases which break FreeBSD\". Also, keeping sway up to date in ports.\n\nI think I can do that, if these few days long silences/delays are acceptable.. Yup, my bad, did not think this through. Sorry for that.\n__BSD_VISIBLE is needed, but it is defined by default unless there are some other feature macros defined. Only needed to define __POSIX_C_SOURCE in files that include stringop.h to resolve this.\nI will send a PR, but I'd like to test in on a Linux machine too, to ensure nothing broke.. If _POSIX_C_SOURCE is not defined, __BSD_VISIBLE is disabled only if one of the following is defined:\n\n_ANSI_SOURCE\n_C99_SOURCE\n_C11_SOURCE\n\nI have tried adding the -D_C11_SOURCE=1 parameter through meson.build, but than _POSIX_C_SOURCE had to be defined at even more places, because otherwise struct timespec is hidden.\nSo in summary, I don't think there is a cleaner way.. I've read everything I could about feature macros in the past few days, but I've never dealt with them before I started using sway/wlroots, so this may be a dumb question:\nWhat could cause a scenario where a FreeBSD build fails and a Linux build succeeds while using _POSIX_C_SOURCE? As per my understanding, when only the _POSIX_C_SOURCE macro is defined, the compilation environments should be the same (= everything the defined POSIX version provides, and nothing else) on both operating systems. Is there something I'm missing here? I would like to fully understand the possible drawbacks before sending the pull request.\nOn a related note: the fact that struct timespec is visible only with _POSIX_C_SOURCE is a bug in FreeBSD. It is in the C11 standard, so it should also be visible when STDC_VERSION >= 201112L (which is true for sway, since -std=c11 sets that macro). I have filed a bug (https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=231425), and when that gets resolved, maybe sway should define _C11_SOURCE, and the _POSIX_C_SOURCE defines added here could be removed.. Ah, OK, thanks @emersion, I was overthinking it, and could not see the obvious answer.\nMaybe I'm spending too much time on this, but I'd like to do it right, and because of this, I still have questions. I hope it's not a problem :)\nThe root cause of this issue is that with no feature test macros defined, FreeBSD gives you everything (POSIX 2008 + XSI extensions, C11 + EXT1 extensions, BSD specific stuff). So right now there are files in wlroots and sway that use a much wider namespace set than needed. This could be solved by defining _C11_SOURCE in meson.build, which gives only C11. \n@SirCmpwn, I know you've rejected the idea of defining feature test macros at the build system level before, but if I understood correctly, the reason behind that was to keep every file at the narrowest possible namespace. Would defining a macro that minimizes the build environment on FreeBSD acceptable? \nIf it is acceptable, I have another question:\nThere is one problem with using _C11_SOURCE currently: the file sway/ipc-server.c causes trouble, because POSIX 2008 is needed for setenv, but SOCK_NONBLOCK and SOCK_CLOEXEC are not POSIX (nor any other standard). On FreeBSD, they are guarded by __BSD_VISIBLE, therefore both _POSIX_C_SOURCE and _C11_SOURCE will hide them. This is currently solved by not defining any feature macros on FreeBSD (= everything is visible), but it would be possible to use two fcntl calls to set FD_CLOEXEC and O_NONBLOCK instead. This would make ipc-server.c POSIX compliant. What do you think?\n. OK, thanks for the answer. I'll send a PR shortly.. Hi,\nI have started investigating another issue regarding the new swaybar JSON processing that occurs on FreeBSD, and while I don't see a clear connection to this issue, here is what I have found out so far, maybe it will help investigating this:\nFirst, getdelim(..., EOF, ...) won't work on FreeBSD, because EOF is never reached (at least not until the bar exits), and getdelim on FreeBSD returns -1 when the delimiter is not found.\nOn Linux it behaves a bit oddly in such a case, which might have something to do with these issues. It reads the whole content available, returns the size of it, but also sets the error indicator of the stream, and errno to EAGAIN, so subsequent reads from the stream will fail until the error indicator is reset.\nPOSIX does not say anything about what should happen when the delimiter is not found, so both behaviours are acceptable I guess, but setting errno and the error indicator while succeeding feels dodgy to me.  That said, maybe using clearerr here too (just like after calling getline) would improve things?. @ianyfan\n\nThis does not explicitly specify the case that the delimiter is EOF, but seems to indicate that it is valid to encounter EOF before the delimiter, and that it should return what it has read so far. If FreeBSD does not do that, then I would argue that it is not POSIX-compliant.\n\nThis is all true, but getdelim won't encounter EOF here, because the stdout of the status program is a continous stream, and will contain EOF only when it exits. In other words, \"getdelim not finding the delimiter\" is the problem, not \"EOF being the delimiter\".\n\nI didn't add clearerr because it doesn't read from the file anymore, it reads straight from the stream. I'm not sure if adding it would fix anything.\n\nFair enough, I missed that.\n. @ianyfan \n\nI see. So you're saying that where Linux treats the end of a stream as an EOF, FreeBSD treats it as an error, and only treats it as an EOF when the stream actually terminates?\n\nYep, something like that, but not exactly, since the EOF indicator is not set on Linux either.\n\nIf that is the case, then it feels like the only solution is to fread large chunks until no more can be read, reallocing the buffer as needed, but again I'm not sure if FreeBSD treats that any differently.\n\nI have some free time at the weekend, will look into this a bit more, and I'll get back to you. Maybe in another issue/PR, did not want to hijack this one in the first place.\n\nHonestly, I've been meaning to try out FreeBSD myself but I keep putting it off...\n\nI've tried it out ~8 years ago, and stuck wih it as my main desktop OS :). > If my interpretation of the POSIX spec is correct, this is a bug in FreeBSD.\nIn my understanding, using EOF as delimiter is undefined behaviour, because POSIX states the following about getdelim (highlight by me):\n\"The delimiter argument is an int, the value of which the application shall ensure is a character representable as an unsigned char of equal value that terminates the read process.\"\nThe delimiter here is EOF, which \"shall expand to an integer constant expression with type int and a negative value\" as per POSIX. \n\nAlso, FIONREAD is non-standard.\n\nIndeed. I just assumed it is, because I \"stole\" the idea from sway/ipc-server.c.\n. Hey, @SirCmpwn \nI've put the script here: https://gist.github.com/sghctoma/df3acbe8f082c593fa53670d2836f397\nYou will need FreeBSD 12 for this, and the script will only build wlroots and sway, you won't be able to run it (because we don't have EVDEV support in the default kernel, and there are some issues with epoll-shim).. Hey, @SirCmpwn \nI've put the script here: https://gist.github.com/sghctoma/df3acbe8f082c593fa53670d2836f397\nYou will need FreeBSD 12 for this, and the script will only build wlroots and sway, you won't be able to run it (because we don't have EVDEV support in the default kernel, and there are some issues with epoll-shim).. Hey, @SirCmpwn \nI've put the script here: https://gist.github.com/sghctoma/df3acbe8f082c593fa53670d2836f397\nYou will need FreeBSD 12 for this, and the script will only build wlroots and sway, you won't be able to run it (because we don't have EVDEV support in the default kernel, and there are some issues with epoll-shim).. My pleasure.\nAnd sorry for sending this three times, plus in e-mail. I was getting error messages, and my comments didn't show up here when I sent them because of the GitHub outage.. The patch agains the ports tree would be quite large (~160kB), but I've just found out GitHub also \"speaks\" SVN, so I can export individual directories from a repo. This version of the script uses this to get new libinput+deps: https://gist.github.com/sghctoma/d627dbb72d262a45187cda0542e1bef0\nIs it ok this way?\nLooking at the builds.sr.ht job, it seems you have an old ports tree (wayland-protocols 1.12 and wayland 1.14), I think that's the reason of the automake issue. You need to run portsnap fetch update.\nAs for scdoc, I was reading the Makefile of an older version, and didn't realize I can set MANDIR form env. Anyways, I'll send a patch that does that automatically.\nAn sr.ht account would be nice, thanks! I've tried setting it up in a VM, but had some troubles with the database, and didn't have much time to troubleshoot yet.. > Do you think this is something I should be running for all FreeBSD users when booting up their build VMs?\nTo be honest, I would reconsider even installing the ports tree in the first place by default. Mixing ports and packages is generally not a good idea because of the version differences (installing from ports could result in rebuilding lots of stuff), and I would assume most users won't need it anyways. Those who do, could fetch it from manifest. \nBut if you do install it, than yes, updating when booting up would be a good idea.\n\nportsnap fetch update - can this be done non-interactively?\n\nThis should be non-interactive by default (without the --interactive option), but will check.\nIssues with job 9016:\n- You try to run portsnap without sudo (also pkg remove and the epoll-shim.pc redirect)\n- portsnap cron is not a good idea here, since it sleeps a random amount up to one hour.\nI'll get my builds.sr.ht running, and fix the manifest today.. Okay, I see why you did portsnap cron. I'm trying to find a solution for this.. Here is my current manifest: https://builds.sr.ht/api/jobs/9140/manifest\nIt builds wlroots, but you need FreeBSD 12.0 (which is currently in BETA1 phase) for sway because of this bug: https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=231425. > Thanks! I'll adapt this for wlroots and we'll add sway when FreeBSD 12 rolls around.\nAwesome, glad I could help!\nFreeBSD 12 is due in late December, I will remind you when it's released.. It's done.. I didn't want to nest the ifs, and also thought that an extra check on status->buffer won't hurt anyone. Logging errno here could be misleading though. All in all, I'm not adamant on keeping it this way.. ",
    "arandomhuman": "@SirCmpwn The \"test\" simply opens sway after setting the PATH variable. The point was simply to get a sway instance up after compilation without actually installing it, instead of replicating sway-tests. I found it convenient when having a global (usable) sway installation. YMMV.\nIf you think it's useful but rather be implemented in a different manner (as a script?), let me know.. @SirCmpwn The \"test\" simply opens sway after setting the PATH variable. The point was simply to get a sway instance up after compilation without actually installing it, instead of replicating sway-tests. I found it convenient when having a global (usable) sway installation. YMMV.\nIf you think it's useful but rather be implemented in a different manner (as a script?), let me know.. Fair enough.\nSimply running ./sway/sway doesn't pick up the instances of swaybg, swaymsg, etc. in the build directory, which was the motivation.\nAlso, quick question, since this is closed: scan-build for sway gave me ~55 bugs. Should I open a WIP pull request or send them in bunches?\nJust trying my hand at low-hanging fruit to get up to speed.. Fair enough.\nSimply running ./sway/sway doesn't pick up the instances of swaybg, swaymsg, etc. in the build directory, which was the motivation.\nAlso, quick question, since this is closed: scan-build for sway gave me ~55 bugs. Should I open a WIP pull request or send them in bunches?\nJust trying my hand at low-hanging fruit to get up to speed.. ",
    "trmendes": "It normally happens when I first start sway. When I do so, the first thing I do is to press the shortcut to start firefox on WS2 then I move to the WS2 using a shortcut for that and then I start Signal Messenger with another shortcut assignet to WS8 and now I'm just wondering if this could be an issue with electron apps\nsway_config.txt\nI'm posting my config file as a resource..it has a txt extension because it seems like github can't post a file without an ext here (I might be wrong)\nAnyway....this behavior isn't constant but it is pretty common here on my setup. \nI'm going to run sway on debug mode to see if something come out from the logs and I post here latter....what else could I do to bring more valuable information to this issue?. Awesome @RyanDwyer ...I'll try it all out and I'll let you know the results....thanks. It seems like it is Electron related. I ran a shortcut for libreoffice and after 10 tries nothing happened....then I ran a shortcut for Riot which is Electron based and the issue happen straight away.. I belive this one is related to #2746 . I have been facing other problems with Electron apps on sway. Since a few git updates back they started to freeze a lot and the app container blinks once in a while. . I have the same problem here but it only happens when I'm running electron apps like Slack.. sorry @SirCmpwn but I don't get it. What do you mean by that?. @SirCmpwn Got it....I didn't know about it :)...Thanks!\nI made a change on my config file and it is now working\nBefore I had:\nset $mode_resize \"Resize: (arrows) to resize or (enter) to leave this mode\"\nmode \"$mode_resize\"\n...\nbindsym $mod+r mode \"$mode_resize\"\nand then I made a test removig the \"\nset $mode_resize \"Resize: (arrows) to resize or (enter) to leave this mode\"\nmode $mode_resize\n...\nbindsym $mod+r mode $mode_resize\nAnd now it is working like before :). It works if I have output scale equal to 2. Before that I had it equal to 1.8. I'm now back to 1.8 and it is working. I'll let you know if it happens again.. ",
    "jajo-11": "you might have been searching for #2299 . you might have been searching for #2299 . ",
    "I60R": "Right, currently it looks like the following:\nmouse_warping output|none\nBut I propose to extend it:\nmouse_warping focus|output|none. Nope. \nShould I propose this to i3 first?. Ok, I will do that. Thank you for feedback :). Most likely it wouldn't be supported in i3, see this issue for relevant information.\nTLDR: it's hard to maintain under X11.\nBut situation might be better under Wayland. What do you think about that?. The same problem occurs for me.\nI use Intellij IDEA EAP.\nBoth, sway and IDEA are up to date.\nGraphic driver - nouveau (if that matter).\nUnder GNOME Wayland everything works fine.  . Yes, switching boot JDK to OpenJDK as suggested in Jetbrains issue tracker solved issue for me. IDEA now looks ugly, but at least it's usable. I have the same issue: Quadro 3000m + nouveau, Linux 4.20, Manjaro.\nEdit: setting WLR_NO_HARDWARE_CURSORS=1 env. variable fixes it. ",
    "leonm1": "I'd be interested in doing this feature as my first contribution. I found the code responsible for warping the cursor on a change to a new workspace here, and I believe the only change needed would be to remove && new_output != last_output from line 714 and make it conditional on the user's settings.\n1) Would this be a good first issue?\n2) Is this a good solution to the request?. I'd be interested in doing this feature as my first contribution. I found the code responsible for warping the cursor on a change to a new workspace here, and I believe the only change needed would be to remove && new_output != last_output from line 714 and make it conditional on the user's settings.\n1) Would this be a good first issue?\n2) Is this a good solution to the request?. ",
    "glpub": "Hm\nJust tried both mpv and vlc - monitor goes blank\nAnd when chromium or firefox play youtube video the screen switches off too. ",
    "akiva": "I second this. Some way to trigger a keepalive would be great.. Following here, rather than #3198. Just to confirm, running latest build on Arch, opening the lid for the first time runs swaylock as expected. After that, it fails to get triggered. No flash or anything, as some have reported, just the plain, unlocked desktop. . If by \"screen is turned off but sway does not disable the output\" you mean that upon opening the lid and the screen coming back on, swaylock does not get called and prompt for the password, I also experience this issue.. See #3198 for related issue. . I do, yes. Are you referring to customizing /etc/systemd/system/lock.service?. @emersion I appreciate the fast replies, although please forgive me as I am not sure what you mean here. By default, logind has HandleLidSwitch set to suspend, which is working, as verified by the systemd status for the service. Is there something I should be doing differently for it to trigger the lock when re-opened?. @emersion I suspect you may be suggesting creating a hook into the event, \u00e1 la /etc/systemd/system/suspend@.service?. @emersion yes, I have this (see my config file above).. Closing in favour of #3062, as this now seems to work the first time.. ",
    "efouladi": "Given that wlroots already implemented zwp_idle_inhibit_v1, shouldn't this be on the apps to adhere to? . ",
    "raidzero": "Just wanted to chime in here and offer a pretty simple workaround. I use swayidle and I have inhibitors in place by way of wrapper scripts around my idle actions. Inhibitors are AC power present and pulseaudio playing.\nYou may want to just query sway for any fullscreen containers using IPC and also query alsa/pulseaudio for active playback. If sound is playing and a fullscreen container is focused (EDIT: or even present, maybe you have multiple outputs), you can assume that video is playing.\nI can give some example scripts if necessary.. ",
    "mwenzkowski": "https://github.com/swaywm/wlroots/commit/3512db3ded997de8339602f1bc514965442a870d fixed this issue for me.. https://github.com/swaywm/wlroots/commit/3512db3ded997de8339602f1bc514965442a870d fixed this issue for me.. I think the issue with scrolling in zathura could be a bug in zathura itself and is not related to your Firefox problem. I tried zathura under sway and weston and was not able to scroll in both cases, but otherwise scrolling works for me. Moreover there is a bug report for zathura mentioning the same behavior for Gnome on Wayland.. I think the issue with scrolling in zathura could be a bug in zathura itself and is not related to your Firefox problem. I tried zathura under sway and weston and was not able to scroll in both cases, but otherwise scrolling works for me. Moreover there is a bug report for zathura mentioning the same behavior for Gnome on Wayland.. I have seen this issue also, and so far my research shows that this issue was introduced with commit 60a1d79de71660949f7a6fc83e242d9d95c75187.\nIn the body of the function output_enable the function apply_output_config is called before the initializations wl_list_init(&output->layers[i]); are done. But with the mentioned commit cursor_rebase gets eventually called by running apply_output_config and then the uninitialized list is used inside node_at_coords by the call\nif ((*surface = layer_surface_at(output,\n            &output->layers[ZWLR_LAYER_SHELL_V1_LAYER_OVERLAY],\n            ox, oy, sx, sy))) {. I have seen this issue also, and so far my research shows that this issue was introduced with commit 60a1d79de71660949f7a6fc83e242d9d95c75187.\nIn the body of the function output_enable the function apply_output_config is called before the initializations wl_list_init(&output->layers[i]); are done. But with the mentioned commit cursor_rebase gets eventually called by running apply_output_config and then the uninitialized list is used inside node_at_coords by the call\nif ((*surface = layer_surface_at(output,\n            &output->layers[ZWLR_LAYER_SHELL_V1_LAYER_OVERLAY],\n            ox, oy, sx, sy))) {. Yes, I will try it.. Yes, I will try it.. ~Please do not merge, I discovered a problem with my patch.~ Nevermind, I made a typo using the gaps command with swaymsg.. ~Please do not merge, I discovered a problem with my patch.~ Nevermind, I made a typo using the gaps command with swaymsg.. I have build both wlroots (commit swaywm/wlroots@c4c1d63a0c0d7315a1a4468d62d883371ba3ec4e) and sway (commit 477bca5e288cc3155c536265272490b413328778) from source and I can still reproduce the crash.\nI also tried it in rootston and there it doesn't crash.. I have build both wlroots (commit swaywm/wlroots@c4c1d63a0c0d7315a1a4468d62d883371ba3ec4e) and sway (commit 477bca5e288cc3155c536265272490b413328778) from source and I can still reproduce the crash.\nI also tried it in rootston and there it doesn't crash.. Here is the log: polari.log.\nThis time I noticed that sway crashes as soon as the mouse cursor enters the dialog window. If the cursor was on the dialog window already, the crash occurs immediately when the mouse is moved.\nI have updated the description above accordingly.. Here is the log: polari.log.\nThis time I noticed that sway crashes as soon as the mouse cursor enters the dialog window. If the cursor was on the dialog window already, the crash occurs immediately when the mouse is moved.\nI have updated the description above accordingly.. ",
    "Kreyren": "Requesting removing this issue, not sure why was it published without description. . > Closing because it's a 0.15 issue.\nRead the article i said that i used 9999 version which is using the latest git at the time..\nBased on sway github issues most of issues is ignored by the sway developers so it's probably better to keep it to closed.. I'm not sure if i want to contribute to seemingly abadonware.. . > as a gentoo user, @Kreyren you can check that the ebuild 9999 version is not latest git of master, but 0.15 branch\n\n```\ncat sway-9999.ebuild \nCopyright 1999-2018 Gentoo Authors\nDistributed under the terms of the GNU General Public License v2\nEAPI=6\ninherit git-r3 eutils cmake-utils\nDESCRIPTION=\"i3-compatible Wayland window manager\"\nHOMEPAGE=\"http://swaywm.org/\"\nEGIT_REPO_URI=\"https://github.com/swaywm/sway.git\"\nEGIT_BRANCH=\"0.15\"\n.......\n```\n\nNoted, afaik most of 9999 builds is mirror to the github not sure why its limited on this ebuild. My bad then.\n\n\nRead the article i said that i used 9999 version which is using the latest git at the time..\n\nNo, 9999 still builds the 0.15 branch, not the master branch.\n\nBased on sway github issues most of issues is ignored by the sway developers\n\nWe don't have time to afford investigating all issues. I already spend most of my free time working on Sway and other open-source projects, and it's the case of many contributors too. Keep in mind that sway is not a product, it's a collaborative project, so don't expect commercial support.\n\nI'm aware of that thats the point of FOSS, but since the response took so long i assumed that none is maintaining sway and when i look last time the last commit was long ago too..  \n\nYou can help us by sending pull requests instead of opening issues. If you really can't investigate your issue, you can always support @SirCmpwn on Patreon.\n\nI'm not sure if i want to contribute to seemingly abadonware..\n\nI wouldn't call a project abandonware when 41 pull requests have been merged since last week.\n\nNoted, not problem then.. ",
    "alexjp": "as a gentoo user, @Kreyren you can check that the ebuild 9999 version is not latest git of master, but 0.15 branch\n```\ncat sway-9999.ebuild \nCopyright 1999-2018 Gentoo Authors\nDistributed under the terms of the GNU General Public License v2\nEAPI=6\ninherit git-r3 eutils cmake-utils\nDESCRIPTION=\"i3-compatible Wayland window manager\"\nHOMEPAGE=\"http://swaywm.org/\"\nEGIT_REPO_URI=\"https://github.com/swaywm/sway.git\"\nEGIT_BRANCH=\"0.15\"\n.......\n```. as a gentoo user, @Kreyren you can check that the ebuild 9999 version is not latest git of master, but 0.15 branch\n```\ncat sway-9999.ebuild \nCopyright 1999-2018 Gentoo Authors\nDistributed under the terms of the GNU General Public License v2\nEAPI=6\ninherit git-r3 eutils cmake-utils\nDESCRIPTION=\"i3-compatible Wayland window manager\"\nHOMEPAGE=\"http://swaywm.org/\"\nEGIT_REPO_URI=\"https://github.com/swaywm/sway.git\"\nEGIT_BRANCH=\"0.15\"\n.......\n```. ",
    "Snaipe": "Can't we actually use socket credentials (Linux and FreeBSD have SO_PASSCRED, OS X has LOCAL_PEERCRED, and OpenBSD has SO_PEERCRED) to retrieve the pid of the other side of the socket connection, and then check that the process is authorized? If the connection closes before you're able to do security checks on the PID, you can assume that whatever check you did on /proc or whatever is no longer valid.. > It's available on OpenBSD, but I don't think it's available on FreeBSD\nAFAIK pretty much all unices have some form of socket credentials for AF_UNIX, because you can't do secure IPC without that.\n\nIt requires procfs\n\nThat's only true if you only implement your checks to use /proc -- systems that don't have a procfs have other APIs to check, for instance, the path of an executable by PID through sysctl.\nAnother benefit of using socket credentials is that no other mechanism would let you check that the program connecting has the right uid/gid, which in turn would allow you to e.g. deny any program not running as the same uid as the sway process, or whitelist gids that you'd reserve for IPC with sway.. > Doesn't work well when the client uses an interpreter like Python\nAlso, small addendum regarding scripts:\nYou pretty much can't reliably check a script's path anyway. As you implied, the executable name for a script is the interpreter itself, and APIs to retrieve the cmdline of a process are usually unreliable, because it reads the process's argv, which can be mutated.\nThankfully, there are many solutions for embedding scripts in actual executables (shc, py2exe+cython), which is precisely why I would encourage using slightly permissive settings by default, because security-conscious people know what they can and can't do.. Ah, right -- FreeBSD can instead send credentials as ancillary data, which has a PID, it's not a socket option. See cmcred_pid here: https://www.freebsd.org/cgi/man.cgi?query=recvmsg&sektion=2&manpath=FreeBSD+9.0-RELEASE\n\nSide note: it may be possible to ptrace an executable that has privileges? Using WAYLAND_SOCKET instead doesn't fix this issue. See https://lists.freebsd.org/pipermail/freebsd-current/2017-July/066541.html\n\nOh, they do have a point; you can trivially ptrace a \"privileged\" process in the wayland sense by doing fork(); ptrace(PTRACE_TRACEME); execve(\"the-privileged-process\");. This can be addressed by using the setgid bit on the privileged executable, and make it group-owned by e.g. sway-ipc (uid and gid bits are dropped when ptraced).. Actually, since PIDs are an issue, you can entirely enforce group credentials for processes rather than checking if they're the right executable. For instance with grim & screenshots, you could define a wl-screenshot group in your sway config, run chown :wl-screenshot /usr/bin/grim; chmod g+s /usr/bin/grim, and check the group credentials. You'd have to have distro maintainers and other wayland compositors to agree on the groups to use, but this would be more practical than checking executable paths.. Well, it might be annoying, but it's pretty much just as annoying as having per-executable permissions. It's not that far from distributions packaging e.g. docker, and creating a docker group so that all users with that group can interact with the daemon. Plus, I still expect the majority of programs to fall into a known category; there's a limit to what a screenshotter, for instance, should be able to do, whatever its implementation.\nSocket credentials involves the kernel to guarantee that the credentials are not fake, and has been around long enough to be pretty much on all unices -- and whatever ends up being chosen, it should definitely be something that was designed for that express purpose, and that the operating system provides.\nPure-software solutions, like tokens, requires the implementation to be way more careful than it should be (file access control, make sure you can't be ptraced, make sure you can't be paged to swap, make sure you're not MitM'd, make sure you can't guess secrets using side-channels, etc). The fact that it's a somewhat common occurrence in security CTFs makes me uncomfortable to recommend it.\n(Now, it's still probably overkill to do 1 group per client, and since it's not that different from just comparing the executable path of the client, we might just as well have PID checks alongside UID/GID checks, unless something really makes it impossible to have reliable PID checks on all the platforms sway targets). (paging interested parties from the other PR: @ianyfan @RyanDwyer @progandy). > Does this match i3's output? It's weird for the title to be in the window properties, as it's probably also in the outer element.\nYes. It's a bit weird, but I looked at both the output from an i3 session I ran from my laptop, and the current bleeding ipc docs, and they seem to document that now. I'm guessing they wanted to bundle a subset of x11 window properties at the same place?\nOut of that lot, the only element I didn't provide the definitions for is transient_for, which seems to be the ID of a window transient to the current view, but I'm both unsure if this is right, and looking through the wlroots codebase there doesn't seem to be an easy way to find that information right now.\n\nMaybe you could have window_properties regardless of whether it's Xwayland or not, and for Wayland list the app id, and for Xwayland keep it as you currently have it.\n\nThat would be a bit weird, wouldn't it? It really looks like that map was made for X11 properties, so it does seem to be somewhat not relevant for native wayland windows. I don't see a real benefit in duplicating app_id in there, considering it's a sway-specific field.. Thanks for the pointer. I checked on i3 and I can confirm that transient_for is the ID of the parent window. I updated the commit with the transient_for key, and the output matches i3's.. > This seems strange, do all x11 programs set class and instance? We could set them to an empty string, but that wouldn't make legacy scripts work.\nIt's a standard property according to the libx11 manual but I'm not seeing anywhere that it's actually mandatory.\nThis might be a side effect of poor & buggy code on the client's side, though I don't remember ever seeing a X11 window without at least WM_CLASS.. Well that could be a good way to actually have some sections of the json that makes sense.\nFor instance, I recently added window_properties to sway's json output for xwayland windows since i3 has that map in its output, but it brings window_properties.class, which is a duplicate of class, and window_properties.title, which is a duplicate of name.\nI don't know how you feel about deviating too much from i3's output in SWAYSOCK, but you could clean things up a bit by putting xwayland-related stuff in an xwayland map (notably window, class, window_properties.instance, and window_properties.transient_for) and then setting it to null for native wayland windows.. Just so we're on the same page, since i3's output features a \"dock area\" container that we probably want to mimic in I3SOCK, can we omit it in SWAYSOCK, or do you consider that to deviate too much from i3's output?\nI guess a better question would be: do we keep all i3 fields in SWAYSOCK, even those that are either unimplemented, or don't always make sense, and set them to e.g. null, or can we selectively omit them? I'm not 100% sure what the backward-compat policy for the IPC is.. I pretty much got it to work; here's a sample example of GET_TREE for a workspace with a wayland terminal and an xwayland chromium:\nswaymsg -t get_tree\ni3-msg -t get_tree\nI still have to clean things up a bit, but I think that's a pretty good start.. I'm starting to get happy with this PR, and I think it's ready for a first review.. FWIW, i3-msg treats json objects without a success key as successful, so it's probably fine to assume so. Real IPC failures are going to have \"success\": false and maybe an error string anyways.. This is something that has been biting me. Essentially, consider the following config:\nbindsym Left focus left\nbindsym Up focus up\nIf you press Left, then Up while still releasing Left, then there's a chance that the keypress for Up happens while the keypress for Left isn't quite completely released, which makes the binding resolution try to find a binding for Left+Up. When Left is completely released, you're left with the Up key pressed, and the binding for Up not running.\nThese sorts of things happen quite often when using movement bindings, which are pretty much used in rapid succession.\nThis patch essentially makes the Up binding run as soon as it is pressed if, and only if, there is no Left+Up binding already taking precedence.. Another way to put it:\nPress and hold Left, then press Up, then release Left. In i3, this makes the binding for Left run, then the binding for Up run. In sway, only the binding for Left runs.. Sorry, I might have not explained that too well. Is something the matter?. Oh, my point about i3 is more about comparison more than a compatibility thing.\nI think Sway's current behaviour is correct when taking into account that bindings can have multiple non-modifiers keys, but at the same time, I'm inclined to believe that the vast majority of bindings out there are single-key (in fact, sway's default config doesn't have multi-key bindings).\nTriggering single-key bindings when no multi-key binding has matched seems like a sensible middle ground.\nWhat it does mean, however, is that if a user defines the bindings b and a+b+c, and presses+hold a, then b, then c, then both bindings will be executed. It's weird, but I think it's also consistent with the fact that if a user defines a and a+b, and presses+hold a then b, then both bindings are executed (this is what Sway is currently doing).. Yeah, I initially put that at the top, but wasn't sure if that was completely the right fix. I guess we can have this fallback in place for both and see if anything breaks down the line.. I would have agreed with that point if sway didn't try to pretend it was i3: by providing I3SOCK, you're pretty much promising that existing programs written for i3 are still going to work under sway, which is not really true as it is.\nWould it be reasonable to stop populating I3SOCK altogether, or alternatively set it to a socket serving an i3-matching fallback protocol? I'm fine with either, but keeping the status-quo is confusing and against the transparency you advocate.. Wow, sorry for the spam, looks like GitHub is choking on requests right now.. Alright. I somewhat find it just as frustrating to see every single ipc script that check the instance or the class of a window completely break, but I can see why you wouldn't want that in sway. I just hoped that sway would own being its own thing for the sake of consistency.\nI'll just write a standalone ipc proxy providing an I3SOCK socket to convert from the sway-flavored json to the i3-flavored one in the meantime.\ntl;dr: Dropping this PR; window_properties are very much more so a compatibility thing with i3 rather than something critical.. Would it make sense to keep using this magic number for I3SOCK, but use something like \"sway-ipc\" for SWAYSOCK?. The project doesn't compile without those if HAVE_XWAYLAND isn't defined, because the compiler ends up seeing the if ({role,parent_id,window_id}) and decides that the condition can never be true, and that the variables are actually never used.. i3 omits all fields in window_props when they have no value, except for transient_for, for some reason.. I think it's mostly fine; the array is still way smaller than a page, and pages are cheap on modern systems anyway. If you're worried about having the array explode in size if somebody mistakenly adds a large value, I can make it size-bound to e.g. 128 slots. I'm not sure using an array of pairs is worth enough the trouble for such a small memory saving, when it ultimately makes the implementation slightly more complicated.\nLet me know if you still want me to do so.. Mmh, I thought going over 80 was okay as long as the line was readable and still below the 100 columns hard limit, but I just realized that the column size of a tab isn't defined in the contribution guidelines, and this goes over 100 if the column size of a tab is 8.\nI'll fix this, but does a tab count for 8 columns, or 4 columns?. On my system with GCC 8, it doesn't, because GCC thinks (correctly) that role is unused, warns, and stops due to -Werror. I guess you could throw a volatile in there, but you'd loose quite more than void-casting or doing a noop on the variables. Sure, I can gate these bits with HAVE_XWAYLAND, it's not like we have a non-xwayland fallback for those anyway. It might lead to slightly larger diffs if we do something about the window_id/parent_id, but I don't think we really have to care about that.. Oh, I was not arguing that it was going to be complicated, just slightly more complicated than necessary (plus you need to call qsort, as you mentioned, while using a 1:1 array makes it without change compile-time valid; although you could order the array of pairs directly in the source, but this is really not ideal).\nMy point is that once again one page of .rodata containing both arrays is not only cheap but also half relevant for memory usage, as it's file-backed memory anyway, and the kernel may decide to page it out if it runs out of memory.. On that note, I also realized that I'm missing a const modifier on the array and other global structures introduced.. I actually can't, because it's used in a type definition, and const variables aren't compile-time available. I can use a macro definition here if you'd like it to be size_t.. I left the fixup commit as-is for review because that really didn't feel like it improved code quality here.\nShould I drop this and keep the void casts, or does anyone have a better alternative?. GitHub seems to have choked on the rebase, here is the actual fixup commit.. I'm going to drop this commit and just move the void casts in the #else of the HAVE_XWAYLAND check, if that's alright with everyone. That ought to be cleaner.. Oh, yeah, now that you mention it, the void cast for window_id was an oversight. The only guards needed are for role and parent_id, because the compiler complains that they are effectively unused when compiling without Xwayland. I'll remove the bit about window_id though.. I've updated the fixup commit without the window_id guard, and I moved parent_id and role into the first guard. Is that more in line with what you had in mind?. ",
    "brianmay": "Sorry, not sure where I should file bug reports concerning \"Unsupported-packages.\" Possibly that wiki page should be updated to have contact details for bug reports.... No, like I said this is Debian/stretch.\nI have no idea why add-apt-repository ppa:s.noack/ppa is choosing to use cosmic, or what I should be using instead.\nI looked up that web page, but couldn't find any way of contacting him.. Maybe you should update https://github.com/swaywm/sway to point to the preferred way of installation then? Currently the first thing I see is the unsupported packages.\nThere are also stern warnings not to use the 1.0 release \"Note that sway alpha releases are not considered complete, are missing many features, and will have many bugs. You are strongly encouraged to remain on sway 0.15.x if you are not prepared to deal with constant breakage and keep quiet about it. Please do not submit bug reports for this version of sway. Submit patches instead.\"\nSo as a new user of swarm I am confused what I should be using. Or maybe I should avoid this project  until it becomes more mature?. ",
    "mhalano": "I opened a request-for-packaging bug today on Ubuntu. I want to use Sway when it's become available as a native package. (:. ",
    "nycex": "The problem is, you cannot really use nouveau for games.. 2018-09-17 15:22:05 - [sway/sway/server.c:33] Preparing Wayland server initialization\n2018-09-17 15:22:05 - [sway/sway/server.c:39] Unable to create backendevicegind. That's with the -d option. Weird. That's the output now\n2018-09-17 15:42:10 - [sway/sway/server.c:33] Preparing Wayland server initialization\n2018-09-17 15:42:10 - [backend/session/logind.c:404] Successfully loaded logind session\n2018-09-17 15:42:10 - [backend/backend.c:128] Found 0 GPUs\n2018-09-17 15:42:10 - [backend/backend.c:267] Failed to open any DRM device\n2018-09-17 15:42:10 - [sway/sway/server.c:39] Unable to create backend\n. Ok, wait that was an error on my side, but now, that i've fixed this, I get this error:\nhttp://ix.io/1mS2. This is the debug log. 1. I just start sway via commandline on tty1 and it just pops up for a few seconds and then crashes\n2. That is the stacktrace I get when I type what you said, no idea if I did something wrong. There is no stack trace for sway. Okay, I just figured out, it crashes only if I start firefox.\nIf I disable it in the config and start them e.g. via dmenu, it crashes, too.. That is my current sway config. Okay, starting discord appearently also crashes sway, but chromium doesn't\nEdit: Also crashes when I start steam. Its actually one bug, I just listed the applications that don't work. I meant that bug, but I didn't know why it was crashing and thought it was because of the graphics driver.\nBut whatever I already opened a new one.. Yeah, it is the move part,\nfor_window [instance=$scratchterm] floating enable\nand\nfor_window [instance=$scratchterm] resize set 1000 600\nwork fine. That's the sway log and that's the firefox stacktrace from gdb. Ehm, I think I tried to removed that and it didn't work. Wait a minute I'll just try that out. Hm. The problem just dissappeared. But now I have the same problem as in #2658 . No, the problem didn't disappear. It does crash after all, but only if I move firefox to a workspace I can see or I if go to the workspace firefox is in.. Here is my config file and steps... I just did it like you can see in the config. That would be the minimal config if you meant that.\nAnd steps...:\n1. Load the config\n2. Start firefox\n3. See it is assigned to a false workspace name. Do you mean something like that? http://ix.io/1mTC. Yeah, I can confirm it fixes my issue.. ",
    "DanySpin97": "I'm still encountering this issue with\nsway version 1.0-alpha.6-333-g64534d2f (Oct 20 2018, branch 'master'). ",
    "cnt0": "Applied this patch, no success. \nMy config\nFrom what I see, args should normally contain some separate tokens from swaybar, like \uf017 Wed 19/09 20:13. In my case everything goes normal and then (after ~5 minutes) it tries to process this big raw json (see my attachment in the first post). Looks like some race condition.. looks like https://github.com/swaywm/sway/pull/2672 fixes it. Yes, I can't reproduce this issue anymore.  \nThere's another one (onclick events cause crash in i3status-rust and \"error reading from status command\" in swaybar), but I have to check if it is related to swaybar; I will create a separate issue if needed. ",
    "Ogromny": "sh\ni3status-rs ~/.config/sway/i3status-rs.toml\njson\n{\"version\": 1, \"click_events\": true}\n[[{\"background\":null,\"color\":\"#424242\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#ffffff\",\"full_text\":\" i3status-rs  /home/ogromny \",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#535353FF\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#535353FF\",\"color\":\"#FFFFFFFF\",\"full_text\":\" \uf017  \",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#535353FF\",\"color\":\"#424242\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#ffffff\",\"full_text\":\" \uf062  \",\"name\":\"pacman\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#535353FF\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#535353FF\",\"color\":\"#FFFFFFFF\",\"full_text\":\" \uf1eb  \",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#000000\",\"full_text\":\"\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#000000\",\"full_text\":\"\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#424242\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#ffffff\",\"full_text\":\" \uf026  \",\"name\":\"e55c84fc365f46a0b6e950b72142b14f\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#000000\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#000000\",\"full_text\":\"\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#424242\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#ffffff\",\"full_text\":\" \uf2c8  \",\"name\":\"661d735f70534940bf627998681122bf\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#000000\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#000000\",\"full_text\":\"\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#000000\",\"color\":\"#424242\",\"full_text\":\"\ue0c2\",\"markup\":\"pango\",\"separator\":false,\"separator_block_width\":0},{\"background\":\"#424242\",\"color\":\"#ffffff\",\"full_text\":\" \uf017  \",\"name\":\"0823e702b7a84e9fb6ae22b395469115\",\"separator\":false,\"separator_block_width\":0}],\nTemperature (-127) outside of range ([-100, 150])\n. icons = \"awesome\"\n[theme]\nname = \"slick\"\n[theme.overrides]\nseparator = \"\ue0c2\"\n[[block]]\nblock = \"focused_window\"\nmax_width = 72\n[[block]]\nblock = \"uptime\"\n[[block]]\nblock = \"pacman\"\ninterval = 30\n[[block]]\nblock = \"net\"\ndevice = \"wlp3s0\"\nip = true\nssid = true\nspeed_up = false\nspeed_down = false\n[[block]]\nblock = \"sound\"\nstep_width = 0\n[[block]]\nblock = \"backlight\"\n[[block]]\nblock = \"temperature\"\ncollapsed = false\ninterval = 1\nformat = \"{max}\u00b0C\"\n[[block]]\nblock = \"battery\"\nshow = \"both\"\n[[block]]\nblock = \"time\"\nformat = \"%d/%m/%Y %H:%M:%S\"\ninterval = 1\n. It's works !\nThanks you so much ^^ !. I have just added the debug log ^^. stack trace\n```\nGNU gdb (GDB) 8.2\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n    http://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...done.\n[New LWP 20038]\n[New LWP 20039]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `sway --debug'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00007f786d7652b8 in malloc_consolidate () from /usr/lib/libc.so.6\n[Current thread is 1 (Thread 0x7f786a4049c0 (LWP 20038))]\n(gdb) #0  0x00007f786d7652b8 in malloc_consolidate () at /usr/lib/libc.so.6\n1  0x00007f786d767f58 in _int_malloc () at /usr/lib/libc.so.6\n2  0x00007f786d769ada in malloc () at /usr/lib/libc.so.6\n3  0x00007f786d754791 in _IO_file_doallocate () at /usr/lib/libc.so.6\n4  0x00007f786d762bc0 in _IO_doallocbuf () at /usr/lib/libc.so.6\n5  0x00007f786d760364 in __GI__IO_file_seekoff () at /usr/lib/libc.so.6\n6  0x00007f786d75cfcd in fseek () at /usr/lib/libc.so.6\n7  0x000055ab9d7347f3 in read_config\n(file=file@entry=0x55ab9f8e8a00, config=config@entry=0x55ab9f95beb0, swaynag=swaynag@entry=0x55ab9f95beb8)\nat ../sway/sway/config.c:632\n    ret_seek = <optimized out>\n    ret_tell = <optimized out>\n    reading_main_config = true\n    this_config = 0x0\n    config_size = 0\n    success = <optimized out>\n    line_number = <optimized out>\n    line = <optimized out>\n    stack = <optimized out>\n    read = <optimized out>\n\n8  0x000055ab9d734ae1 in load_config\n(path=path@entry=0x55ab9f926700 \"/home/ogromny/.config/sway/config\", config=0x55ab9f95beb0, swaynag=0x55ab9f95beb8) at ../sway/sway/config.c:369\n    sb = \n        {st_dev = 2053, st_ino = 1351205, st_nlink = 1, st_mode = 33188, st_uid = 1000, st_gid = 985, __pad0 = 0, st_rdev = 0, st_size = 6806, st_blksize = 4096, st_blocks = 16, st_atim = {tv_sec = 1539011512, tv_nsec = 209913813}, st_mtim = {tv_sec = 1539011512, tv_nsec = 209913813}, st_ctim = {tv_sec = 1539011512, tv_nsec = 209913813}, __glibc_reserved = {0, 0, 0}}\n    f = 0x55ab9f8e8a00\n    config_load_success = <optimized out>\n\n9  0x000055ab9d7353dd in load_main_config\n(file=<optimized out>, is_active=is_active@entry=true, validating=validating@entry=false)\nat ../sway/sway/config.c:461\n    path = 0x55ab9f926700 \"/home/ogromny/.config/sway/config\"\n    old_config = 0x55ab9f55d4d0\n    success = true\n\n10 0x000055ab9d754256 in do_reload (data=) at ../sway/sway/commands/reload.c:19\n    bar_ids = 0x55ab9f95c4b0\n\n11 0x00007f786dbba66c in wl_event_loop_dispatch_idle () at /usr/lib/libwayland-server.so.0\n12 0x00007f786dbba726 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n13 0x00007f786dbb92ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n14 0x000055ab9d73270a in main (argc=, argv=) at ../sway/sway/main.c:384\n    verbose = 0\n    debug = 1\n    validate = 0\n    long_options = \n        {{name = 0x55ab9d76c18a \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55ab9d76e680 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55ab9d76c18f \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x55ab9d76c198 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x55ab9d76c0c6 \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55ab9d76b29d \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x55ab9d76c19e \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x55ab9d76c340 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = <optimized out>\n\n(gdb)            PID: 20038 (sway)\n           UID: 1000 (ogromny)\n           GID: 985 (users)\n        Signal: 11 (SEGV)\n     Timestamp: Mon 2018-10-08 17:13:34 CEST (7min ago)\n  Command Line: sway --debug\n    Executable: /usr/bin/sway\n Control Group: /user.slice/user-1000.slice/session-1.scope\n          Unit: session-1.scope\n         Slice: user-1000.slice\n       Session: 1\n     Owner UID: 1000 (ogromny)\n       Boot ID: 2b15c8de31164816ac191e3c47810110\n    Machine ID: 9338f28dabe240b4a8241d710c54ecfc\n      Hostname: Ogromny\n       Storage: /var/lib/systemd/coredump/core.sway.1000.2b15c8de31164816ac191e3c47810110.20038.1539011614000000.lz4\n       Message: Process 20038 (sway) of user 1000 dumped core.\n            Stack trace of thread 20038:\n            #0  0x00007f786d7652b8 malloc_consolidate (libc.so.6)\n            #1  0x00007f786d767f58 _int_malloc (libc.so.6)\n            #2  0x00007f786d769ada malloc (libc.so.6)\n            #3  0x00007f786d754791 _IO_file_doallocate (libc.so.6)\n            #4  0x00007f786d762bc0 _IO_doallocbuf (libc.so.6)\n            #5  0x00007f786d760364 _IO_file_seekoff@@GLIBC_2.2.5 (libc.so.6)\n            #6  0x00007f786d75cfcd fseek (libc.so.6)\n            #7  0x000055ab9d7347f3 read_config (sway)\n            #8  0x000055ab9d734ae1 load_config (sway)\n            #9  0x000055ab9d7353dd load_main_config (sway)\n            #10 0x000055ab9d754256 do_reload (sway)\n            #11 0x00007f786dbba66c wl_event_loop_dispatch_idle (libwayland-server.so.0)\n            #12 0x00007f786dbba726 wl_event_loop_dispatch (libwayland-server.so.0)\n            #13 0x00007f786dbb92ac wl_display_run (libwayland-server.so.0)\n            #14 0x000055ab9d73270a main (sway)\n            #15 0x00007f786d708223 __libc_start_main (libc.so.6)\n            #16 0x000055ab9d73281e _start (sway)\n\n            Stack trace of thread 20039:\n            #0  0x00007f786d6d0afc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007f7869bf417c n/a (i965_dri.so)\n            #2  0x00007f7869bf3eb8 n/a (i965_dri.so)\n            #3  0x00007f786d6caa9d start_thread (libpthread.so.0)\n            #4  0x00007f786d7dfa43 __clone (libc.so.6)\n\n. I have commentedbindsym $mod+space focus mode_toggleand nowbindsym $mod+Shift+space floating toggle``` works ^^. With CLion it's doesn't works, but, I tried with Intellij and it's works... I will try to reinstall CLion. ",
    "sydneymeyer": "Intel Core i7 8550u with UHD Graphics 620 on ThinkPad X1 2018. . @emersion No, unfortunately it does not. It tries to adjust the temperature gradually from ~6400K to 5000K without actually doing so and exits with segfault if i cancel the process.. If i have understood everthing correctly,\n\"./gamma-control -g 1\" gives:\nfailed to set gamma table\nBuilt wlroots from emersion/wlroots intel-gamma tree with same output. \nSame result with redshift, failed to set gamma table with \"gamma-control\" from \nexamples.\n. I tried @minus7's suggestion about running with WLR_DRM_NO_ATOMIC=1 together with his wayland branch from redshift and it is indeed working fine here, i.e. redshift -m wayland -l 50:4 -v is gradually adjusting color temperature, Oneshot mode switches temperature and immediateley jumps back to where is was before.\n@giucam's redshift fork appears to be working again with WLR_DRM_NO_ATOMIC=1 as before, that is, adjusting temperature in Oneshot mode only sporadically once every few invocations and adjusts temperature just fine with above mentioned redshift options and then exits always with segfault.\nI dont know if this helps anybody, because frankly this compositor stuff is way above my head.. I think it stopped working with this commit.\nhttps://github.com/swaywm/wlroots/commit/633663cddefea5d66e2116573f39ec9aab9e12ab\nCorresponding Sway Version: sway version 1.0-alpha.5-186-g602ccca1\n. I don't know wheter this issue can be closed or not, but i am running sway 1.0 now and even without WLR_DRM_NO_ATOMIC=1 \"wayland-patched\" redshift appears to be working fine, at least on two different systems (i.e. Intel HD Graphics 4000 and Intel UHD Graphics 620).. Another crash log:\nsway2.log\nSway version 1.0-alpha.6-43-ga032925a (Sep 24 2018, branch 'master'). I can reliably get sway to crash everytime when unplugging from dock, even with https://github.com/swaywm/sway/issues/2337.. > You probably mean \n\nswaywm/wlroots#1268?\n\nYes, my bad.\n\nPlease always include a debug log and a stack \ntrace.\n\nI'll try and come back.. @Emantor yes, as far as i can tell the sway crashes are appear to be indeed gone now with sway version 1.0-beta.1-128-gb1aec1ef built an hour ago. The eratic blank screen issues upon disconnect or reconnect from the dock have gotten fewer, but now sometimes the external display becomes then blank. Suspend mode and/or powering the external display on/off sometimes help salvage this.. Neither dpms nor disable/enable the display recovers the external screen. I just wanted to try this with the internal screen, as i only have tried executing the swaymsg commands blindly but never verified if these commands are actually executed, and just now after disconnecting and reconnecting the laptop to the dock, sway crashed again:\nPID: 1222 (sway)\n           UID: 1000 (sydney)\n           GID: 1000 (sydney)\n        Signal: 11 (SEGV)\n     Timestamp: Fri 2018-11-02 00:50:08 CET (1min 36s ago)\n  Command Line: sway\n    Executable: /usr/local/bin/sway\n Control Group: /user.slice/user-1000.slice/session-1.scope\n          Unit: session-1.scope\n         Slice: user-1000.slice\n       Session: 1\n     Owner UID: 1000 (sydney)\n       Boot ID: 9d1290f55bf845dfbd2ad9e81e405c80\n    Machine ID: 7b45b5080431451fa0aef8ea1018df1f\n      Hostname: x1\n       Storage: /var/lib/systemd/coredump/core.sway.1000.9d1290f55bf845dfbd2ad9e81e405c80.1222.1541116208000000.lz4\n       Message: Process 1222 (sway) of user 1000 dumped core.\n            Stack trace of thread 1222:\n            #0  0x000055e25875e6af node_set_dirty (sway)\n            #1  0x000055e25873b979 seat_set_raw_focus (sway)\n            #2  0x000055e25873bba0 seat_set_focus (sway)\n            #3  0x000055e2587399eb input_manager_set_focus (sway)\n            #4  0x000055e258761731 view_map (sway)\n            #5  0x000055e258738143 handle_map (sway)\n            #6  0x00007f55e11e8e39 wlr_signal_emit_safe (libwlroots.so.0)\n            #7  0x00007f55e11c89a9 handle_xdg_surface_commit (libwlroots.so.0)\n            #8  0x00007f55e11e071a surface_commit_pending (libwlroots.so.0)\n            #9  0x00007f55e11e0981 surface_commit (libwlroots.so.0)\n            #10 0x00007f55dfe861c8 ffi_call_unix64 (libffi.so.6)\n            #11 0x00007f55dfe85c2a ffi_call (libffi.so.6)\n            #12 0x00007f55e122a6ff n/a (libwayland-server.so.0)\n            #13 0x00007f55e12270a3 n/a (libwayland-server.so.0)\n            #14 0x00007f55e1228702 wl_event_loop_dispatch (libwayland-server.so.0)\n            #15 0x00007f55e12272ac wl_display_run (libwayland-server.so.0)\n            #16 0x000055e25872d9cb server_run (sway)\n            #17 0x000055e25872d022 main (sway)\n            #18 0x00007f55e0d54223 __libc_start_main (libc.so.6)\n            #19 0x000055e258720b1e _start (sway)\n\n            Stack trace of thread 1223:\n            #0  0x00007f55e0d1cafc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007f55dd6251ac n/a (i965_dri.so)\n            #2  0x00007f55dd624ee8 n/a (i965_dri.so)\n            #3  0x00007f55e0d16a9d start_thread (libpthread.so.0)\n            #4  0x00007f55e0e2bb23 __clone (libc.so.6)\n\nI don't have any debug logs for this specific crash.. I start sway without the dock connected, connect the dock, disconnect, internal screen becomes blank. When i try to open a new terminal, sway crashes reproducibly.\nsway version 1.0-beta.1-128-gb1aec1ef\nwlroots commit 675cf8457ef3493112def366d7090731172ee872\nsway_backtrace.txt\nsway_debuglog.txt\nsway_stacktrace.txt\n. FWIW: With Linux 4.20 i haven't been able to reproduce the issue (~6 dis-/re-connects) so far.\nNote: I don't know if this is related, but there has been work [1,2] around the PCI Hotplug subsystem for the 4.20 Kernel.\n[1] https://lwn.net/Articles/767885/\n[2] https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=125450f814418b9f889c9885831467d1b2e25a7d\nsway version 1.0-beta.2-60-g9bf1b7a0 (Dec 26 2018, branch 'master')\nwlroots commit ed5296c6cf23efa07f78e1657cec1528f638f95e\nLinux 4.20.0-arch1-1-ARCH from Arch Linux Testing Repository. Perhaps related: sway crashes sporadically when (re)enabling internal display\nsway version 1.0-beta.2-195-g023c9242 (Jan 15 2019, branch 'master')\nwlroots commit dc9c91b0a4a973f100ead0c2b1dad9f0699a8a69\nLinux Kernel: 4.20.1-arch1-1-ARCH (Arch Linux)\nback_trace.txt\nstack_trace.txt\n. Also, this appears to be happening only when there is a running XWayland application, i.e. Firefox in my case, but if so, it happens reproducibly.. FWIW: Soon after opening the bug report (#3501) i switched to Wayland-enabled Firefox Nightlies and replaced XWayland-Thunderbird and haven\u2018t had sway crashing since.. @yannick do you have any updates on your tests with the two other docks? Having similar issues with a ThinkPad X1 2018 and their Ultra Thunderbolt Dock.. I never had any issues with this setup until i updated my sway/wlroots combo yesterday.. @ascent12 OK, Thanks.\n@emersion It indeed appears to be an issue with libva/libva-intel-driver.\nParticulary https://github.com/intel/intel-vaapi-driver/issues/419#issuecomment-445164123\nAnyway.. sorry for the noise and thank you both for your quick help.. I have thunar also crashing when launching with \"GDK_BACKEND=wayland\" in .bashrc, as soon as i interact with it.. no problems with x11 backend.\nI meant so say that thunar runs without issues under sway as long as it get started with GDK_BACKEND=x11, as intended. IIRC most xfce applications don't have support for running under wayland. \nedit: clarification.. I have been running this revision just for a few minutes now, but it appears that commit https://github.com/swaywm/sway/commit/03dfdb1edbfc445fe30b6456827ae93ef6c18426 could have resolved this issue. I cannot reproduce the issue anymore so far. Tested with https://github.com/swaywm/sway/commit/546b976baa9989676c2fb2aff8c36f42b3d19810 and the behaviour is still present. Perhaps, this is intended behaviour, but i have noticed that sway crashes when there is no display \"enabled\" (via sway output) and i disconnect the laptop from it's docking station.. > If you are using Arch Linux, see #3631\nIndeed. Duplicate of #3631. Setting meson prefix for swaylock solves the issue.\n\nAlso in the future, please use the swaylock issue tracker (https://github.com/swaywm/swaylock/issues) for swaylock related items.\n\nOf course, will do.\nedit: Thanks for the reference.. ",
    "Edootjuh": "I have an Intel GPU, and when running wlroots and sway master (no forks), and using Lourens-Rich's redshift fork, redshift only works when starting sway with WLR_DRM_NO_ATOMIC=1.. ",
    "pvreevil": "@emersion both redshift and wlroots gamma-control are supposed to make changes only after reload?\n1.0-beta.2-264-g9e6c6ce3 (Jan 22 2019, branch 'HEAD'), wlroots-c41d013, Linux4.20.3, amdgpu(rx550), firmware-20181218.. Disabling AMD DC on Kernel solved the issue. Thanks for your attention. It works pretty well btw.. ",
    "e00E": "Is there anything I can do to help get this fixed? I created the above referenced closed issue because I have this problem with an AMD RX Vega 64.. I encounter this every time I systemctl suspend with sway version 1.0-beta.2-56-g00d97cb1 (Dec 24 2018, branch 'master').\nThe desktop should not be shown because it violates my expectation that the lock screen makes it impossible to interact with or gather information about the locked session without authenticating first.. @emersion Yes #3381 fixes it for me.. ",
    "foxxx0": "I've run into the same issue, although i'm not using go-luks-suspend and just do a \"normal\" systemctl suspend.. ",
    "HaoZeke": "That probably won't happen since Xmodmap is incompatible with xkb.\nWhat you need to do is define a new layout in the xkb style and load that with XKB_DEFAULT_LAYOUT. ",
    "JackalopeGit": "\nWhen #1779 is added you might be able to do something like bindsym <useless key> ... keyboard type <useful key>\n\n<key> is a key index or string? Is it equal to xmodmap config names\\indices?. > When #1779 is added you might be able to do something like bindsym <useless key> ... keyboard type <useful key>\n<key> is a key index or string? Is it equal to xmodmap config names\\indices?. ",
    "RorraVox": "ver: 0.15.2\nos: ArchLinux(Antergos). I think log will not be useful since i experience this issue with ALL applications.\nWhen i launch an app and change workspace the app follow me and start in my actual workspace not in the workspace where i've launched it.\nSIMPLE EXAMPLE:\nwith dmenu i run gedit in wordpace 7\nswitch to workspace 3\ngedit is open in workspace 3\nThis is my config file:\n```\n Config for sway\n~/.config/sway/config\nRead man 5 sway for a complete reference.\nVariables\n\nLogo key. Use Mod1 for Alt.\nset $mod Mod4\nHome row direction keys, like vim\nset $left h\nset $down j\nset $up k\nset $right l\nYour preferred terminal emulator\nset $term urxvt\nYour preferred application launcher\nset $menu dmenu_run\nOutput configuration\n\nDefault wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)\noutput * bg /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1920x1080.png fill\noutput * bg ~/.config/sway/bg/wallpaper_1920x1080_arch-linux_pacman_invaders.png fill\n\nExample configuration:\n\noutput HDMI-A-1 resolution 1920x1080 position 1920,0\n\nYou can get the names of your outputs by running: swaymsg -t get_outputs\nInput configuration\ninput 3141:30211:USB_Keyboard {\n    xkb_layout it\n}\n\nYou can get the names of your inputs by running: swaymsg -t get_inputs\nRead man 5 sway-input for more information about this section.\nKey bindings\n\nBasics:\n\n# start a terminal\nbindsym $mod+Return exec $term\n\n# kill focused window\nbindsym $mod+Shift+q kill\n\n# start your launcher\nbindsym $mod+d exec $menu\n\n# Drag floating windows by holding down $mod and left mouse button.\n# Resize them with right mouse button + $mod.\n# Despite the name, also works for non-floating windows.\n# Change normal to inverse to use left mouse button for resizing and right\n# mouse button for dragging.\nfloating_modifier $mod normal\n\n# reload the configuration file\nbindsym $mod+Shift+c reload\n\n# exit sway (logs you out of your wayland session)\nbindsym $mod+Shift+e exit\n\n\nMoving around:\n\n# Move your focus around\nbindsym $mod+$left focus left\nbindsym $mod+$down focus down\nbindsym $mod+$up focus up\nbindsym $mod+$right focus right\n# or use $mod+[up|down|left|right]\nbindsym $mod+Left focus left\nbindsym $mod+Down focus down\nbindsym $mod+Up focus up\nbindsym $mod+Right focus right\n\n# _move_ the focused window with the same, but add Shift\nbindsym $mod+Shift+$left move left\nbindsym $mod+Shift+$down move down\nbindsym $mod+Shift+$up move up\nbindsym $mod+Shift+$right move right\n# ditto, with arrow keys\nbindsym $mod+Shift+Left move left\nbindsym $mod+Shift+Down move down\nbindsym $mod+Shift+Up move up\nbindsym $mod+Shift+Right move right\n\n\nWorkspaces:\n\n# switch to workspace\nbindsym $mod+1 workspace 1\nbindsym $mod+2 workspace 2\nbindsym $mod+3 workspace 3\nbindsym $mod+4 workspace 4\nbindsym $mod+5 workspace 5\nbindsym $mod+6 workspace 6\nbindsym $mod+7 workspace 7\nbindsym $mod+8 workspace 8\nbindsym $mod+9 workspace 9\nbindsym $mod+0 workspace 10\n# move focused container to workspace\nbindsym $mod+Shift+1 move container to workspace 1\nbindsym $mod+Shift+2 move container to workspace 2\nbindsym $mod+Shift+3 move container to workspace 3\nbindsym $mod+Shift+4 move container to workspace 4\nbindsym $mod+Shift+5 move container to workspace 5\nbindsym $mod+Shift+6 move container to workspace 6\nbindsym $mod+Shift+7 move container to workspace 7\nbindsym $mod+Shift+8 move container to workspace 8\nbindsym $mod+Shift+9 move container to workspace 9\nbindsym $mod+Shift+0 move container to workspace 10\n# Note: workspaces can have any name you want, not just numbers.\n# We just use 1-10 as the default.\n\n\nLayout stuff:\n\n# You can \"split\" the current object of your focus with\n# $mod+b or $mod+v, for horizontal and vertical splits\n# respectively.\nbindsym $mod+b splith\nbindsym $mod+v splitv\n\n# Switch the current container between different layout styles\nbindsym $mod+s layout stacking\nbindsym $mod+w layout tabbed\nbindsym $mod+e layout toggle split\n\n# Make the current focus fullscreen\nbindsym $mod+f fullscreen\n\n# Toggle the current focus between tiling and floating mode\nbindsym $mod+Shift+space floating toggle\n\n# Swap focus between the tiling area and the floating area\nbindsym $mod+space focus mode_toggle\n\n# move focus to the parent container\nbindsym $mod+a focus parent\n\n\nScratchpad:\n\n# Sway has a \"scratchpad\", which is a bag of holding for windows.\n# You can send windows there and get them back later.\n\n# Move the currently focused window to the scratchpad\nbindsym $mod+Shift+minus move scratchpad\n\n# Show the next scratchpad window or hide the focused scratchpad window.\n# If there are multiple scratchpad windows, this command cycles through them.\nbindsym $mod+minus scratchpad show\n\n\nResizing containers:\n\nmode \"resize\" {\n    # left will shrink the containers width\n    # right will grow the containers width\n    # up will shrink the containers height\n    # down will grow the containers height\n    bindsym $left resize shrink width 10 px or 10 ppt\n    bindsym $down resize grow height 10 px or 10 ppt\n    bindsym $up resize shrink height 10 px or 10 ppt\n    bindsym $right resize grow width 10 px or 10 ppt\n# ditto, with arrow keys\nbindsym Left resize shrink width 10 px or 10 ppt\nbindsym Down resize grow height 10 px or 10 ppt\nbindsym Up resize shrink height 10 px or 10 ppt\nbindsym Right resize grow width 10 px or 10 ppt\n\n# return to default mode\nbindsym Return mode \"default\"\nbindsym Escape mode \"default\"\n\n}\nbindsym $mod+r mode \"resize\"\ngaps outer 6\ngaps inner 4\nSCREEN BRIGHTNESS\nbindsym XF86MonBrightnessUp exec BKLIGHT_PER=\"5\" &&\\\nBKLIGHT_PATH=\"/sys/class/backlight/intel_backlight\" &&\\\necho $(bc <<< \"scale=2; $(cat ${BKLIGHT_PATH}/brightness) + ($(cat ${BKLIGHT_PATH}/max_brightness) / 100 * ${BKLIGHT_PER})\") | awk '{print int($1)}'\\\n| tee ${BKLIGHT_PATH}/brightness\n\nbindsym XF86MonBrightnessDown exec BKLIGHT_PER=\"5\" &&\\\nBKLIGHT_PATH=\"/sys/class/backlight/intel_backlight\" &&\\\necho $(bc <<< \"scale=2; $(cat ${BKLIGHT_PATH}/brightness) - ($(cat ${BKLIGHT_PATH}/max_brightness) / 100 * ${BKLIGHT_PER})\") | awk '{print int($1)}'\\\n| tee ${BKLIGHT_PATH}/brightness\n\nVOLUME\nbindsym XF86AudioRaiseVolume exec amixer sset Master 5%+\nbindsym XF86AudioLowerVolume exec amixer sset Master 5%-\nbindsym XF86AudioMute exec amixer sset Master toggle\nSWAY BS SLIDESHOW\nexec ~/.config/sway/sway_bg_slideshow.sh ~/.config/sway/bg &> /dev/null\n\nStatus Bar:\n(sway-bar)\nbar {\n    id 00\n    position bottom\n    font pango:Gohu GohuFont, Siji 8\n    #status_command exec ~/.config/sway/ps_swaybar.sh\n    height 24\n    colors {\n        statusline #ffffff\n        background #25252590\n        # BORDER BACKGROUND TEXT\n        focused_workspace   #000000 #719611 #ffffff\n        #active_workspace   #000000 #f1c40f #ffffff\n        inactive_workspace  #000000 #6688aa #ffffff\n        urgent_workspace    #000000 #aa3b31 #ffffff\n    }\n}\nbar {\n    id 10\n    position top\n    font pango:Gohu GohuFont, Siji 8\n    status_command exec ~/.config/sway/ps_swaybar.sh\n    height 24\n    workspace_buttons no\n    colors {\n        statusline #ffffff\n        background #25252590\n    }\n}\ninclude /etc/sway/config.d/*\n. that didn't work for all programs\nWork: gedit pavucontrol gnome-boxes\nDon't Work: atom chromium. as you said IT WORKS:\nbindsym --whole-window BTN_SIDE seat seat0 cursor press BTN_MIDDLE; seat seat0 cursor release BTN_MIDDLE\nnow i can copy and paste again!\n=). *FACEPALM* Next time before open a issue i'll check better with\nsway -C\n```\nSorry\nCan you delete this unuseful issue? @RedSoxFan . ",
    "tarmack": "The forced gaps around my work-spaces has been bugging me since I started using Sway-1.0. I started on implementing the i3 way of allowing negative values for gaps outer. I do have a little request for some assistance tough.\nI noticed the workspace_config struct introduced here: Commit: Rename workspace_outputs to workspace_configs and fix memory leakhttps://github.com/swaywm/sway/commit/138d10d5d62a25c2e00bd9051c835b9e78a36de4). I was wondering if the eventual intention is to have this replace the current data in the sway_workplace struct or if they are supposed to keep living side by side? If it will replace the old way I will clean the gaps bits up while at it.\nAdditionally, just removing the check in the config handler makes negative values actually work. There seems to be only one smallish issue: the window borders get drawn on top of the bar. Would it be possible to fix the tree drawing order to fix this? And if it is, I may need a few pointers on how to go about that.. I went the easy route, and don't allow the negative value to move windows outside the container.\nThe token value of -1 in the workspace_config seems to not pose issues but I may not fully understand the reason and working of that piece of the sway code anyway.. I am also seeing this issue, what I noticed as well is that Kitty seems to not actually render any output from the running command either when not on the active workspace. When getting focus back to the workspace the terminal is running at it seems to catch up really quickly.\nI am inclined to deduce from this that Kitty stops processing (only the display threat?) when not in focus for some reason. Another reason for coming to this conclusion: Start Kitty from a terminal, move the Kitty window to a different workspace, go back to the previous terminal and ^C it. Kitty will not die, the workspace with Kitty will stay. Only when you focus the workspace with Kitty again it will quickly quit.\nAnd yet another point, Sway and running Kitty in single-process mode are not compatible, the Kitty windows will only work on the workspace that has the master process.\nI know this is just a bunch of anecdotes, but they may help to get to the issue. I will be digging in the code (both Sway and Kitty) some where later this week.. Would this be as easy as just making the allow_refocusing argument to cursor_send_pointer_motion() false in the workspace_switch() function in commands/workspace.c? It does at least fix it in the single test I've done for now.\nI'll be looking for strange side effects from this change... Yeah no, it is not that easy. It seems that this issue is one in a long line of mouse focus issues (such as: 2401 and 2558). I noticed that if you move a tiling window away from under the pointer, scrolling events keep going to the focused window (now no longer under the cursor). But as soon as the cursor moves a bit the focus jumps to the window now under the mouse.\nI get the feeling that the easiest way to make the mouse focus issues go away completely is to move the mouse pointer over to the (center of) a newly focused window if it is not over that window already. This is not ideal however because users might get confused about the location of the cursor.\nAnother option is to make focus changes from the mouse movement only trigger when a window/container is actually entered (pointer is actually moving from outside the container across the border). But this may get hard to reliably implement.\nI'm not sure what would be the best way forward but I'm confident that some discussion here can point us in the right direction.. Even though mouse_warping container setting will mostly fix this issue it is not the default and very much a user preference. I will look into getting the default settings to behave in a better way by only changing focus when the mouse actually crosses borders. I do seem to remember i3 doing the same but I might be mistaken (and it seems it does: i3 issue: focus not following mouse unless click or crossing window border (you can't please everyone I suppose)).. The email address is associated with my GitHub account now.. Thank you for the feedback and further information @RyanDwyer, it was really helpful.\nI think all feedback should now be taken care of.. Sorry about the spaces, @RedSoxFan. I fixed my editor but didn't quite manage to fix the code... I kind of messed up the squash, I'll split the style fixes out again, hold on... Is it customary for the pull requests on Sway to have just the one final commit? If so, maybe it could be added to the contribution guide.. This is the fallback that sets the previous/default mode and will only be hit when the mode is not changed explicitly by the user. In such a case I would assume that any (accidental) change to the mode would come as a surprise to the user anyway. For this reason I thought simple boolean logic should suffice.\nOn top of that it could indeed be argued that wlroots should just not actually set the mode when it is the same as the current mode anyway. However, that is only a good idea if re-setting the same mode does not ever make sense. I could think of things like the hardware and internal state getting out of sync (no idea if there is any real chance of this, though).\nIf setting the mode to the same mode as the current mode does really not ever make sense, then fixing this in wlroots is probably better. Can someone with more knowledge of the details here help me make the call?. Currently life is occupying my time so I don't have time to investigate further, but I found that this patch is not enough. The DPMS logic in the same function seems to trigger a flash when the background is changed when the screen is \"DPMS off\".\nI will have time again soon and will improve the patch, please don't merge yet.. I had this same issue, it was related to the primary selection refactor in wlroots. It has not been an issue for me anymore for quite a while now. Is it still an issue for you @mninja?. Done. Done. ",
    "ivyl": "If I am missing something, I would appreciate the explanation so we can document that in the code/readme. > Eh, the reasons behind this are more subtle than you think. But ultimately this is a good argument anyway. Can you update sway-security(7) accordingly?\nWill do. I definitely see some use for debugging purposes with overloaded libraries, but that's  just development convenience. Reasons for calling it security keep to elude me.\nI'll also make sure to address this fail :-)\n. > @ivyl Can you please try with the following?\nIndeed, I did some poking around inside the coredump and the list seems to be empty. After adding the sanity check you have proposed, sway does no longer crash the same way, although it is still far from handling DisplayPort hubs gracefully.\nAfter about 20 power cycles of the main monitor:\na) all graphic applications just die, including swaylock\nb) sometimes one of the outputs does not get up and remains blank\nc) swaybg segfaults all the time\n``\nCore was generated byswaybg 0 /home/ahiler/pictures/n0x244u8ajez.png fill'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x000014da033c6eab in raise () from /lib64/libc.so.6\n(gdb) bt\n0  0x000014da033c6eab in raise () at /lib64/libc.so.6\n1  0x000014da033b15b9 in abort () at /lib64/libc.so.6\n2  0x000014da033b1491 in _nl_load_domain.cold.0 () at /lib64/libc.so.6\n3  0x000014da033bf612 in  () at /lib64/libc.so.6\n4  0x0000000000402d99 in main (argc=4, argv=0x7ffe092456a8) at ../swaybg/main.c:230\n(gdb) f 4\n4  0x0000000000402d99 in main (argc=4, argv=0x7ffe092456a8) at ../swaybg/main.c:230\n230             assert(state.compositor && state.layer_shell && state.output && state.shm);\n(gdb) l\n225             assert(state.display);\n226\n227             struct wl_registry registry = wl_display_get_registry(state.display);\n228             wl_registry_add_listener(registry, &registry_listener, &state);\n229             wl_display_roundtrip(state.display);\n230             assert(state.compositor && state.layer_shell && state.output && state.shm);\n231\n232             // Second roundtrip to get output properties\n233             wl_display_roundtrip(state.display);\n234\n(gdb) p state.compositor\n$1 = (struct wl_compositor ) 0x0\n(gdb) p state.layer_shell\n$2 = (struct zwlr_layer_shell_v1 ) 0x0\n(gdb) p state.output\n$3 = (struct wl_output ) 0x0\n(gdb) p state.shm\n$4 = (struct wl_shm *) 0x0\nd) sway segfaults 1/10 times\nCore was generated by `sway'.\nProgram terminated with signal SIGABRT, Aborted.\n0  0x000014a1059f2eab in raise () from /lib64/libc.so.6\n(gdb) bt\n0  0x000014a1059f2eab in raise () at /lib64/libc.so.6\n1  0x000014a1059dd5b9 in abort () at /lib64/libc.so.6\n2  0x000014a1059dd491 in _nl_load_domain.cold.0 () at /lib64/libc.so.6\n3  0x000014a1059eb612 in  () at /lib64/libc.so.6\n4  0x000014a10641ca6d in get_drm_backend_from_backend (wlr_backend=0x258ed60) at ../backend/drm/backend.c:20\n5  0x000014a10642135d in page_flip_handler (fd=9, seq=743371, tv_sec=789424, tv_usec=91398, user=0x20a7ee0) at ../backend/drm/drm.c:1135\n6  0x000014a101fdb8ed in drmHandleEvent () at /lib64/libdrm.so.2\n7  0x000014a10642146f in handle_drm_event (fd=9, mask=1, data=0x0) at ../backend/drm/drm.c:1164\n8  0x000014a10669e9b2 in wl_event_loop_dispatch (loop=0x1a35f40, timeout=timeout@entry=-1) at src/event-loop.c:641\n9  0x000014a10669d70a in wl_display_run (display=0x1a38500) at src/wayland-server.c:1260\n10 0x00000000004157d5 in server_run (server=0x666ae0 ) at ../sway/server.c:165\n11 0x0000000000414fa3 in main (argc=1, argv=0x7ffeb7813798) at ../sway/main.c:384\n(gdb) f 4\n4  0x000014a10641ca6d in get_drm_backend_from_backend (wlr_backend=0x258ed60) at ../backend/drm/backend.c:20\n20              assert(wlr_backend_is_drm(wlr_backend));\n(gdb) l\n15      #include \"backend/drm/drm.h\"\n16      #include \"util/signal.h\"\n17\n18      struct wlr_drm_backend get_drm_backend_from_backend(\n19                      struct wlr_backend wlr_backend) {\n20              assert(wlr_backend_is_drm(wlr_backend));\n21              return (struct wlr_drm_backend )wlr_backend;\n22      }\n23\n24      static bool backend_start(struct wlr_backend backend) {\n(gdb) p wlr_backend\n$1 = (struct wlr_backend ) 0x258ed60\n(gdb) p wlr_backend\n$2 = {impl = 0x90, events = {destroy = {listener_list = {prev = 0x211, next = 0x20a7ed0}}, new_input = {listener_list = {prev = 0x23b8b80, next = 0x1100000006}}, new_output = {listener_list = {\n        prev = 0x2422a00, next = 0x2380410}}}}\n```. @RyanDwyer @emersion  yep, seems like I don't see any backtraces that would suggests it's sway at fault. No get-drm_backend_from_backend issue too after 20-ish runs.\nI'll do a couple of test rounds with my home setup later and file the findings, if any, in the correct project.\nThanks! :-). is this a convention here? I neither see other functions in the immediate neighborhood using this, nor CONTRIBUTIN.md mentions it. Oh yeah, forgot about that C quirk. Thanks!\n2 additional patches to follow this one coming in 5 :-). ",
    "kenan-rhoton": "I'm using 0.15.2, I can test on the latest alpha if needed.. Still happening on master...\nEdit: Actually, I just realized it isn't even just switching workspaces, it won't let me focus any other window while there is a notification.\nI'm unsure if this is a Firefox issue of some sort, I don't generally get other notifications in my normal usage.... As far as I can tell... none? :thinking: I don't have anything installed other than libnotify that I can see could possibly be related... . Ok, I was apparently not launching sway correctly and going into 0.15.2 (which I thought I'd removed). :see_no_evil: \nAfter completely erradicating sway and rebuilding from master I no longer have this issue.. ",
    "simonics": "A quick patch would suggest that a leading comma is functional with my particular i3bar implementation, regardless of whether the first item has a leading comma. Removing the comma on the first output has no discernable effect.\nMy assumption is that a leading comma removal in the implementation I'm using has a lot to do with this. I'm not sure whether other implementations have something similar, or whether i3 spits out leading commas.\ndiff --git a/swaybar/i3bar.c b/swaybar/i3bar.c\nindex 8e9b038b..7caabff2 100644\n--- a/swaybar/i3bar.c\n+++ b/swaybar/i3bar.c\n@@ -276,7 +276,7 @@ enum hotspot_event_handling i3bar_block_send_click(struct status_line *status,\n    json_object_object_add(event_json, \"button\", json_object_new_int(button));\n    json_object_object_add(event_json, \"x\", json_object_new_int(x));\n    json_object_object_add(event_json, \"y\", json_object_new_int(y));\n-   if (dprintf(status->write_fd, \"%s,\\n\",\n+   if (dprintf(status->write_fd, \",%s\\n\",\n                json_object_to_json_string(event_json)) < 0) {\n        status_error(status, \"[failed to write click event]\");\n    }. A quick patch would suggest that a leading comma is functional with my particular i3bar implementation, regardless of whether the first item has a leading comma. Removing the comma on the first output has no discernable effect.\nMy assumption is that a leading comma removal in the implementation I'm using has a lot to do with this. I'm not sure whether other implementations have something similar, or whether i3 spits out leading commas.\ndiff --git a/swaybar/i3bar.c b/swaybar/i3bar.c\nindex 8e9b038b..7caabff2 100644\n--- a/swaybar/i3bar.c\n+++ b/swaybar/i3bar.c\n@@ -276,7 +276,7 @@ enum hotspot_event_handling i3bar_block_send_click(struct status_line *status,\n    json_object_object_add(event_json, \"button\", json_object_new_int(button));\n    json_object_object_add(event_json, \"x\", json_object_new_int(x));\n    json_object_object_add(event_json, \"y\", json_object_new_int(y));\n-   if (dprintf(status->write_fd, \"%s,\\n\",\n+   if (dprintf(status->write_fd, \",%s\\n\",\n                json_object_to_json_string(event_json)) < 0) {\n        status_error(status, \"[failed to write click event]\");\n    }. I would agree, the implementation could (and perhaps should) be validating more stringently. Thanks for the fix, appreciate it! I'll read up on the code style and submit my own pull request next time.. I would agree, the implementation could (and perhaps should) be validating more stringently. Thanks for the fix, appreciate it! I'll read up on the code style and submit my own pull request next time.. ",
    "Fallstar": "Hi,\nOn https://github.com/swaywm/sway/wiki#window-rules-to-adjust-sways-borders the example is for_window [id=\"nautilus\"] border none, whereas the id must be numeric.. ",
    "wsddn": "I have the same issue as parkerlreed on sway version 1.0-beta.1-108-gb90af335 (Oct 30 2018, branch 'master').\nSway starts normally when the extra screen is not plugged into my laptop's dock, and when plugging the extra screen in later it also works (background and swaybar both showing on the extra screen).\nHowever when trying to start sway (with default config) with both screens plugged in I get swaybg: ../sway/swaybg/main.c:235: main: Assertion state.compositor && state.layer_shell && state.output && state.shm' failed. This occurs consistently.\nA small aside: my dock reports the DVI connection I have as HDMI for some reason.\nMy debug log. ",
    "Ranguvar": "sway version 1.0-alpha.6-147-gc1f09939 (Oct  5 2018, branch 'makepkg'). Happens with i3 also. Likely Firefox bug.. Absolutely.\nFirst run - allowing kitty to fail to copy, by not switching workspaces rapidly after attempting to paste.\nFirst kitty (copying from): http://ix.io/1lZf\nSecond kitty (copying to): http://ix.io/1lZz\nSecond run - switch workspaces back and forth when the stall hits after pasting, which results in a successful paste.\nFirst kitty (copying from): http://ix.io/1lZA\nSecond kitty (copying to): http://ix.io/1m3H\nI also noticed that during the paste attempt, while terminal blinker pauses, ALL debug output ceases.. > > > Okay. Maybe related to swaywm/wlroots#348\n\n\n\nI'm actually happy about this issue because it'll potentially make debugging much easier.\n\nGood to hear that +1 . Also it seems forcing wayland for Kitty would fix it in this specific situation:\nin sway/config\nset $term env KITTY_ENABLE_WAYLAND=1 kitty\n\nDo you have a copy/paste issue with KITTY_ENABLE_WAYLAND=1 ?\nTry to copy content from kitty (CTRL+MAJ+C) and paste it in a another container (x11 and wayland, try both) in another workspace\n\nsync_to_monitor off in kitty config fixes it. ",
    "kovidgoyal": "If I understand the issue correctly, all you need to do is patch glfw to track whether a window is ready to swap buffers or not and make glfwSwapBuffers() simply return early if it is not.. Oh and there is no need to fix glfw upstream (unless you want to) kitty's copy of glfw has permanently diverged, principally because of https://github.com/glfw/glfw/issues/1140. Similar fix for mpv: https://github.com/mpv-player/mpv/issues/249\nAnd this seems like a problem with wayland/eglSwapBuffers design. There seems to be an unavoidable race here. Any client trying to use eglSwapBuffers has to somehow know if the window is drawable or not before calling eglSwapBuffers. Since the notification is asynchronous, there is no reliable way to do that. It can happen that the window is hidden while the client is calling eglSwapBuffers. . doesn't seem that hard. Just add a #ifdef _GLFW_WAYLAND block to glfwSwapBuffers() in context.c that can register the callback on the window as needed.. Just for giggles, I tried to reproduce this issue using weston owrkspaces, and I cannot. Steps I tried:\n1) Start kitty\n2) Copy some text\n3) switch to another workspace\n4) start weston-terminal and right click and select paste\n5) text from (2) is copied.\nI tried this several times just in case it is timing related. Looking at the kitty code, kitty does not render windows that are marked as invisible. So presumably weston simply allows clients to swap buffers at their discretion, leaving it up to the client to decide when to stop rendering, instead of trying to force the client to not swap buffers. \nSeems to me the correct fix is for sway to do the same. That way all clients will work with it and the worst that will happen is clients that do not checkvisible status of their windows before swapping, will do some extra rendering. No potential for races here, or relying on things like swap buffers not hanging after a callback. . On Tue, Oct 09, 2018 at 02:22:43AM -0700, emersion wrote:\n\nI think there's some confusion here.\n\nLooking at the kitty code, kitty does not render windows that are marked as invisible.\n\nWayland doesn't have a way to \"mark windows as invisible\". Windows not visible have nothing different from visible ones, except they may not receive frame events.\n\nSo clients on Wayland cannot know if they need to render their\nwindows or not? It means that kitty on wayland will\nunnecessarily have to render each frame for every invisible window.\nA big waste of energy. I dont mean to offend, but are you sure? It\nseems like a weird omission. There really is no way to find out\nif a window is visible or not?  \n\n\nSo presumably weston simply allows clients to swap buffers at their discretion, leaving it up to the client to decide when to stop rendering, instead of trying to force the client to not swap buffers.\n\nThe compositor cannot prevent clients from swapping buffers. However as @martinetd said, if you don't eglSwapInterval(0) then eglSwapBuffers will block until the next frame event. This is a compatibility shim to allow clients not aware of frame events to work on Wayland too (preventing e.g. busy loops). This is the client decision to keep this behavior or don't block with eglSwapBuffers.\n\nSeems to me the correct fix is for sway to do the same.\n\nWeston probably just sends frame events to all windows even if they're invisible. That means that e.g. if you have a video player in a hidden workspace then it will continue to render frames even if none of them will be displayed. Thus for frame events Weston cannot be used as a reference. The fact that Weston always sends frame events is a Weston-specific behavior, and not doing it is (1) not violating the spec and (2) actually a lot better.\n\nIn that case I agree, not sending frame events is the better design. \nI can easily patch kitty's copy of glfw to use render events when the\nswap interval is non-zero.\n. On Tue, Oct 09, 2018 at 05:34:22AM -0700, Drew DeVault wrote:\n\nNo, Wayland clients should render their window when they get the frame callback. They don't need to know if they're \"invisible\" or not. They just need to render every time they get a frame callback, no more or less frequently then that. If they are \"invisible\" they will not receive frame events.\n\nPractically speaking, that is never going to happen, since most toolkits\naren't designed that way, and even the reference Wayland compositor is\nnot designed that way, since it sends frames even for hidden windows.\nIndeed, in pretty much any application I have ever seen, high level\nrendering is never driven solely by window expose events, but by lots\nof other input sources, background data processing, etc.\nAnyway, I'll simply patch the glfw copy in kitty to deal\nwith this for those people that want to use its wayland backend.\nI could probably use some heuristic hack like considering the window\ninvisible if it has had no frame callbacks for a while and not rendering\nit, to reduce energy consumption under wayland.\nThanks to everyone for the explanation, it was a big help to me to\nunderstand the issue.\n. I dont see an elegant way to integrate frame callbacks into kitty's event loop (all the other backends kitty works with dont have any such concept, and I'd really rather avoid having two different event loops per backend). \nBasically the rendering logic in kitty is:\nwait for window system events\ncheck all windows that are visible and that have changed their state since the last render\nrender these windows and call swap buffers\nThe main problem is with this structure, I dont see a good way to decide when not to render a window. Only thing I can think of is a hearistic based on time since last frame callback. But if someone else has a bright idea, I am all ears.. The problem is that on wayland all the processing that is skipped for hidden windows on other backends will happen without the heuristic I mentioned. Fixing the hang issue with sway is pretty trivial, as I said earlier. The problem I am concerned about is the lack of window visible state in wayland.. ",
    "lephe": "Ok, so I've been looking at my graphics card configuration, and I must admit it doesn't work well at all. Currently no application is able to use the nVIDIA card, so it's unlikely that there's anything wrong with sway.\nI'll close this issue. Thanks for helping me fixing the situation, I can keep working with sway without worries. :) . > Hey @lephe , I have the same issue (lenovo T480s with Intel IGP and nvidia graphics card). The issue persists even if I set WLR_DRM_DEVICES=/dev/dri/card0 before starting sway.\n\nHow have you solved the issue?\n\nIn my case setting WLR_DRM_DEVICES was enough. The latency I had at startup was caused by some operation on the GPU, which I could reproduce when using Bumblebee's optirun. So using only the Intel card switfly solved it.\nYour logs will tell, but you may want to check that /dev/dri files are mapped the same way on your system.\n\n2816 only happens if you have plugged in more outputs than your GPU supports.\n\nIs it relevant when the GPU has no CRTC?. I can also reproduce this bug, and I got a coredump (11 seconds after the crash). Here is the output of bt full from gdb:\nsway-2846-backtrace.txt\n. Sure. I had a bit of a hard time because @colemickens' initial arrangement did not work anymore. I had to use another drag-and-drop scheme:\n|   |             |                  |               B\n  |   |   drag C    |  B   drag B   B  |    drag C ---------\nA | B | C   =>   A  +-----   =>   -----+  C   =>       A\n  |   |             |  C            A  |           ---------\n  |   |             |                  |               C\nAnyway, here is a backtrace with wlroots 9e060be and sway 0a4735c: sway-2846-backtrace-2.txt\n. > This seems to only happen on non-US keyboards. Another user reported that it also happens with fr.\nFor what it's worth, I have XKB_DEFAULT_LAYOUT=fr (variant and model unset) and the two commands are properly differentiated.. Nothing in the config file, only environment variables in my login script:\nWLR_DRM_DEVICES=/dev/dri/card0 XKB_DEFAULT_LAYOUT=fr exec sway\n. I noticed this also depends on the selected variant in `fr` layouts. Earlier in this thread I mentioned the shortcut worked for me, this was the case when the variant was unset.\n\nI currently have two variants, namely oss and bepo, and I can only use shift+super+space with the second one. It is very clear that shift+super+space in oss variant executes the binding for super+space, whatever it is.\nThe only relevant difference I see is that in oss, shift+space is just a space, but in bepo, shift+space is a non-breakable space. But I figure sway's key bindings are at a lower level.. FWIW, I have the same gray antialias here (just built sway 77554f5 on wlroots c70b8f6) and a close-to-default configuration. The relevant part would be...\nbar {\n    status_command i3blocks\n    position top\n    font \"Droid Sans Mono 10\"\n    colors { ... }\n}\n\n\nMy display is HiDPI (1920\u00d71080) but the scale factor is 1.. Interestingly weston-info fails in my case:\ninterface: 'wl_output', version: 3, name: 24\n    x: 0, y: 0, scale: 1,\n    physical_width: 344 mm, physical_height: 193 mm,\n    make: 'Unknown', model: '0x38ED',\n    subpixel_orientation: unknown, output_transform: normal,\n    mode:\n        width: 1920 px, height: 1080 px, refresh: 40.064 Hz,\n        flags:\n    mode:\n        width: 1920 px, height: 1080 px, refresh: 60.096 Hz,\n        flags: current\nI'm not sure which API is responsible for detecting it -is this the Wayland server? I'm wondering if it's possible to specify subpixel alignment in a static way (such as a config file).. Sorry about this. Is the disappearance of the window title and border related?. It's awesome to see this key feature implemented. I'll be happy to use it and report any bugs. Thanks a lot!. ",
    "Bryophyllum": "I have the same issue using the default configuration file copied from /etc/sway/. \nNamely, the key binding $mod+space for swapping focus between the tiling area and the floating area works while $mod+Shift+space for toggling the current focus between tiling and floating mode doesn't at all unless I comment bindsym $mod+space focus mode_toggle same as @Ogromny did, or bind floating toggle to other key binding such as $mod+Alt+space.. I have the same issue using the default configuration file copied from /etc/sway/. \nNamely, the key binding $mod+space for swapping focus between the tiling area and the floating area works while $mod+Shift+space for toggling the current focus between tiling and floating mode doesn't at all unless I comment bindsym $mod+space focus mode_toggle same as @Ogromny did, or bind floating toggle to other key binding such as $mod+Alt+space.. I use an alias sway=\"export XKB_DEFAULT_LAYOUT=de && export QT_QPA_PLATFORM=wayland-egl && export QT_WAYLAND_DISABLE_WINDOWDECORATION=\"1\" && sway\"\nThis is my Swayidle config:\n### Idle configuration\nexec swayidle \\\n        timeout 600 \"brightnessctl --save --device=acpi_video0 && brightnessctl set 10% --device=acpi_video0\" \\\n        resume 'brightnessctl --restore --device=acpi_video0' \\\n        timeout 3600 'swaymsg \"output * dpms off\"' \\\n        resume 'swaymsg \"output * dpms on\"' \\\nEdit:The same result with the default configuration.. I use an alias sway=\"export XKB_DEFAULT_LAYOUT=de && export QT_QPA_PLATFORM=wayland-egl && export QT_WAYLAND_DISABLE_WINDOWDECORATION=\"1\" && sway\"\nThis is my Swayidle config:\n### Idle configuration\nexec swayidle \\\n        timeout 600 \"brightnessctl --save --device=acpi_video0 && brightnessctl set 10% --device=acpi_video0\" \\\n        resume 'brightnessctl --restore --device=acpi_video0' \\\n        timeout 3600 'swaymsg \"output * dpms off\"' \\\n        resume 'swaymsg \"output * dpms on\"' \\\nEdit:The same result with the default configuration.. https://gist.github.com/Bryophyllum/262d53af7ce6561b827cb8032cdff556 \nHere's mine. https://gist.github.com/Bryophyllum/262d53af7ce6561b827cb8032cdff556 \nHere's mine. So does it for me! Great job!. So does it for me! Great job!. Is there a reason for not enabling tray by default?. Is there a reason for not enabling tray by default?. https://github.com/swaywm/sway/wiki#disabling-client-side-qt-decorations\nPlease read the wiki next time.. https://github.com/swaywm/sway/wiki#disabling-client-side-qt-decorations\nPlease read the wiki next time.. Sorry about that, here are the logs: https://gist.github.com/Bryophyllum/9bae47daea1dc2f899b1cf73c00a30b7\nI'll try running sway with the default conifiguration to eliminate one possibility.\nEdit: Same results. Sorry about that, here are the logs: https://gist.github.com/Bryophyllum/9bae47daea1dc2f899b1cf73c00a30b7\nI'll try running sway with the default conifiguration to eliminate one possibility.\nEdit: Same results. I'm also experiencing the said problem after removing tray_output primary from my configuration file.\na) Appending exec --no-startup-id swaymsg 'workspace $workspace2; exec /usr/local/bin/telegram-desktop' to my Sway configuration and starting Sway, then closing Telegram and re-opening it ----> Swaybar crashes.(https://gist.github.com/Bryophyllum/5067dc8b981137e5444bc2bc3d39fa08)\nb) Doing the same as above, but instead of re-opening Telegram, I open Steam client ----> Swaybar does not crash.\nc) Following the steps from the subpoint \"b\", and closing and re-opening Steam client multiple times ----> Swaybar does not crash.\nd) Launching Telegram myself for the first time after starting Sway ----> Swaybar does not crash, but it does when I close the Telegram instance I started, and re-open Telegram.\nOn top of that, instead of having the red sad face, the Telegram icon is purpleish with a blue unread messages badge (not shown in the screenshot): \n\n. I'm also experiencing the said problem after removing tray_output primary from my configuration file.\na) Appending exec --no-startup-id swaymsg 'workspace $workspace2; exec /usr/local/bin/telegram-desktop' to my Sway configuration and starting Sway, then closing Telegram and re-opening it ----> Swaybar crashes.(https://gist.github.com/Bryophyllum/5067dc8b981137e5444bc2bc3d39fa08)\nb) Doing the same as above, but instead of re-opening Telegram, I open Steam client ----> Swaybar does not crash.\nc) Following the steps from the subpoint \"b\", and closing and re-opening Steam client multiple times ----> Swaybar does not crash.\nd) Launching Telegram myself for the first time after starting Sway ----> Swaybar does not crash, but it does when I close the Telegram instance I started, and re-open Telegram.\nOn top of that, instead of having the red sad face, the Telegram icon is purpleish with a blue unread messages badge (not shown in the screenshot): \n\n. @RedSoxFan Here you go: https://gist.github.com/Bryophyllum/57110715fbe7620bc55b086e1f692af6\n@ianyfan I applied the former patch and it works now! I tried applying the latter too, but I was getting Hunk #1 FAILED at 610 while patching. . @RedSoxFan Here you go: https://gist.github.com/Bryophyllum/57110715fbe7620bc55b086e1f692af6\n@ianyfan I applied the former patch and it works now! I tried applying the latter too, but I was getting Hunk #1 FAILED at 610 while patching. . @emersion I've re-built master branch of Sway just now and it works. I must've built it within a short time window where the neccessary commit was not merged, given that Arch's makepkg reports wlroots to be up-to-date with its master branch. I was really unlucky it appears. \ud83d\ude05. @emersion I've re-built master branch of Sway just now and it works. I must've built it within a short time window where the neccessary commit was not merged, given that Arch's makepkg reports wlroots to be up-to-date with its master branch. I was really unlucky it appears. \ud83d\ude05. ",
    "Eluminae": "This one has been fixed ? I'm still facing the problem on : \nbash\n$ sway --version\nsway version 1.0-beta.2-74-g54d0f3a4 (Dec 31 2018, branch 'master'). ",
    "0xdec": "I'm also still experiencing this on sway version 1.0-beta.2-204-g70637b40 (Jan 17 2019, branch 'master') with both US and US Colemak keyboards.. Any chance this can get fixed before 1.0? I'm experiencing it on both US and US Colemak. Happy to post any other relevant info.. @RedSoxFan holy moly, thanks for the super-quick fix! And thanks @emersion for merging so quickly!. ",
    "JonathanILevi": "(I posted the issue swaywm/wlroots#1328)\nThis problem occurs (for me) will any monitors on non-primary graphics cards.  My guess is with the Optimus/Prime that the external displays are powered by the non-primary dedicated graphics.\nI have a desktop with multiple (three, different, non-sli) graphics cards and only the monitors on the \"first\" graphics cards are rendering correctly.\nRegardless of the version of Sway:\nswaywm/wlroots@4e89a2139749c996d0c3ef6da5042d0a3cd9c9e6 is the last commit that works.\nswaywm/wlroots@1280b4920d311e311e339a6f13b004bac6bc668f does not work but 4e89a21 reverts it.\nThe commits that caused the problem are changing what triggers a frame/buffer to render.  It looks like the new logic never finds the non-primary graphics cards worthy of rendering (save when reloading or switching ttys).\nI was trying to fix the problem myself but it is over my head (:\nI will see about reproducing the issue with Rootston, as was asked.\n. (I posted the issue swaywm/wlroots#1328)\nThis problem occurs (for me) will any monitors on non-primary graphics cards.  My guess is with the Optimus/Prime that the external displays are powered by the non-primary dedicated graphics.\nI have a desktop with multiple (three, different, non-sli) graphics cards and only the monitors on the \"first\" graphics cards are rendering correctly.\nRegardless of the version of Sway:\nswaywm/wlroots@4e89a2139749c996d0c3ef6da5042d0a3cd9c9e6 is the last commit that works.\nswaywm/wlroots@1280b4920d311e311e339a6f13b004bac6bc668f does not work but 4e89a21 reverts it.\nThe commits that caused the problem are changing what triggers a frame/buffer to render.  It looks like the new logic never finds the non-primary graphics cards worthy of rendering (save when reloading or switching ttys).\nI was trying to fix the problem myself but it is over my head (:\nI will see about reproducing the issue with Rootston, as was asked.\n. ",
    "skaldesh": "You are rigth, theoretically I have an iGPU and a dGPU. However, I have currently another problem that my iGPU is not used at all (but that has its own issue and is its own story).\nThese env variables look interesting, though I can not find further documentation on them right now. I tried it, my .bash_profile contains this:\nbash\nif [[ -z $DISPLAY ]] && [[ $(tty) = /dev/tty1 ]]; then\n        export XKB_DEFAULT_MODE=pc105\n        export XKB_DEFAULT_LAYOUT=de\n        export XKB_DEFAULT_VARIANT=neo\n        export _JAVA_AWT_WM_NONREPARENTING=1\n        export WLR_DRM_DEVICES=/dev/dri/card0:/dev/dri/card1\n        exec sway\nfi\nUnfortunately, this did not change anything with the outputs. Device: /dev/dri/card0\n\u251c\u2500\u2500\u2500Driver: i915 1.6.0 20180514\n\u2502   \u251c\u2500\u2500\u2500DRM_CLIENT_CAP_STEREO_3D supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CLIENT_CAP_UNIVERSAL_PLANES supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CLIENT_CAP_ATOMIC supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_DUMB_BUFFER supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_VBLANK_HIGH_CRTC supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_DUMB_PREFERRED_DEPTH = 24\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_DUMB_PREFER_SHADOW supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_PRIME supported\n\u2502   \u2502   \u251c\u2500\u2500\u2500DRM_PRIME_CAP_IMPORT supported\n\u2502   \u2502   \u2514\u2500\u2500\u2500DRM_PRIME_CAP_EXPORT supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_CURSOR_WIDTH = 256\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_CURSOR_HEIGHT = 256\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_ADDFB2_MODIFIERS supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_PAGE_FLIP_TARGET supported\n\u2502   \u251c\u2500\u2500\u2500DRM_CAP_CRTC_IN_VBLANK_EVENT supported\n\u2502   \u2514\u2500\u2500\u2500DRM_CAP_SYNCOBJ supported\n\u251c\u2500\u2500\u2500Connectors\n\u2502   \u2514\u2500\u2500\u2500Connector 0\n\u2502       \u251c\u2500\u2500\u2500Object ID: 71\n\u2502       \u251c\u2500\u2500\u2500Type: eDP\n\u2502       \u251c\u2500\u2500\u2500Status: Connected\n\u2502       \u251c\u2500\u2500\u2500Subpixel: Unknown\n\u2502       \u251c\u2500\u2500\u2500Encoders: {0}\n\u2502       \u251c\u2500\u2500\u2500Modes\n\u2502       \u2502   \u251c\u2500\u2500\u25001920x1080@60.03\n\u2502       \u2502   \u2514\u2500\u2500\u25001920x1080@47.99\n\u2502       \u2514\u2500\u2500\u2500Properties\n\u2502           \u251c\u2500\u2500\u2500\"EDID\" (Immutable): Blob\n\u2502           \u251c\u2500\u2500\u2500\"DPMS\": Enum {On, Standby, Suspend, Off} - On\n\u2502           \u251c\u2500\u2500\u2500\"link-status\": Enum {Good, Bad} - Good\n\u2502           \u251c\u2500\u2500\u2500\"non-desktop\" (Immutable): Range [0, 1] - 0\n\u2502           \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 41\n\u2502           \u251c\u2500\u2500\u2500\"Broadcast RGB\": Enum {Automatic, Full, Limited 16:235} - Automatic\n\u2502           \u2514\u2500\u2500\u2500\"scaling mode\": Enum {Full, Center, Full aspect} - Full aspect\n\u251c\u2500\u2500\u2500Encoders\n\u2502   \u2514\u2500\u2500\u2500Encoder 0\n\u2502       \u251c\u2500\u2500\u2500Object ID: 70\n\u2502       \u251c\u2500\u2500\u2500Type: TMDS\n\u2502       \u251c\u2500\u2500\u2500CRTCS: {0, 1, 2}\n\u2502       \u2514\u2500\u2500\u2500Clones: {0}\n\u251c\u2500\u2500\u2500CRTCs\n\u2502   \u251c\u2500\u2500\u2500CRTC 0\n\u2502   \u2502   \u251c\u2500\u2500\u2500Object ID: 41\n\u2502   \u2502   \u2514\u2500\u2500\u2500Properties\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"ACTIVE\" (Atomic): Range [0, 1] - 1\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"MODE_ID\" (Atomic): Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"OUT_FENCE_PTR\" (Atomic): Range [0, UINT64_MAX] - 0\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"DEGAMMA_LUT\": Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"DEGAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"CTM\": Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"GAMMA_LUT\": Blob\n\u2502   \u2502       \u2514\u2500\u2500\u2500\"GAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2502   \u251c\u2500\u2500\u2500CRTC 1\n\u2502   \u2502   \u251c\u2500\u2500\u2500Object ID: 55\n\u2502   \u2502   \u2514\u2500\u2500\u2500Properties\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"ACTIVE\" (Atomic): Range [0, 1] - 0\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"MODE_ID\" (Atomic): Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"OUT_FENCE_PTR\" (Atomic): Range [0, UINT64_MAX] - 0\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"DEGAMMA_LUT\": Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"DEGAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"CTM\": Blob\n\u2502   \u2502       \u251c\u2500\u2500\u2500\"GAMMA_LUT\": Blob\n\u2502   \u2502       \u2514\u2500\u2500\u2500\"GAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2502   \u2514\u2500\u2500\u2500CRTC 2\n\u2502       \u251c\u2500\u2500\u2500Object ID: 69\n\u2502       \u2514\u2500\u2500\u2500Properties\n\u2502           \u251c\u2500\u2500\u2500\"ACTIVE\" (Atomic): Range [0, 1] - 0\n\u2502           \u251c\u2500\u2500\u2500\"MODE_ID\" (Atomic): Blob\n\u2502           \u251c\u2500\u2500\u2500\"OUT_FENCE_PTR\" (Atomic): Range [0, UINT64_MAX] - 0\n\u2502           \u251c\u2500\u2500\u2500\"DEGAMMA_LUT\": Blob\n\u2502           \u251c\u2500\u2500\u2500\"DEGAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2502           \u251c\u2500\u2500\u2500\"CTM\": Blob\n\u2502           \u251c\u2500\u2500\u2500\"GAMMA_LUT\": Blob\n\u2502           \u2514\u2500\u2500\u2500\"GAMMA_LUT_SIZE\" (Immutable): Range [0, UINT32_MAX] - 512\n\u2514\u2500\u2500\u2500Planes\n    \u251c\u2500\u2500\u2500Plane 0\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 28\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {0}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500C8\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u251c\u2500\u2500\u2500VYUY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500NV12\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Primary\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 83\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 41\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 1920\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 1080\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 1920\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 1080\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u251c\u2500\u2500\u2500Plane 1\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 33\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {0}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u251c\u2500\u2500\u2500VYUY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500NV12\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Overlay\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u251c\u2500\u2500\u2500Plane 2\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 38\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {0}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u2514\u2500\u2500\u2500ARGB8888\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Cursor\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 872\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 700\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 256\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 256\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 256\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 256\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u2514\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-180} - (rotate-0)\n    \u251c\u2500\u2500\u2500Plane 3\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 42\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {1}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500C8\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u251c\u2500\u2500\u2500VYUY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500NV12\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Primary\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u251c\u2500\u2500\u2500Plane 4\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 47\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {1}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u251c\u2500\u2500\u2500VYUY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500NV12\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Overlay\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u251c\u2500\u2500\u2500Plane 5\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 52\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {1}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u2514\u2500\u2500\u2500ARGB8888\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Cursor\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u2514\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-180} - (rotate-0)\n    \u251c\u2500\u2500\u2500Plane 6\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 56\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {2}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500C8\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR2101010\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500VYUY\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Primary\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u251c\u2500\u2500\u2500Plane 7\n    \u2502   \u251c\u2500\u2500\u2500Object ID: 61\n    \u2502   \u251c\u2500\u2500\u2500CRTCS: {2}\n    \u2502   \u251c\u2500\u2500\u2500Formats:\n    \u2502   \u2502   \u251c\u2500\u2500\u2500RGB565\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ABGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500ARGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XBGR8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500XRGB8888\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YUYV\n    \u2502   \u2502   \u251c\u2500\u2500\u2500YVYU\n    \u2502   \u2502   \u251c\u2500\u2500\u2500UYVY\n    \u2502   \u2502   \u2514\u2500\u2500\u2500VYUY\n    \u2502   \u2514\u2500\u2500\u2500Properties\n    \u2502       \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Overlay\n    \u2502       \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n    \u2502       \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n    \u2502       \u251c\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-90, rotate-180, rotate-270} - (rotate-0 | rotate-90)\n    \u2502       \u251c\u2500\u2500\u2500\"COLOR_ENCODING\": Enum {ITU-R BT.601 YCbCr, ITU-R BT.709 YCbCr} - ITU-R BT.709 YCbCr\n    \u2502       \u2514\u2500\u2500\u2500\"COLOR_RANGE\": Enum {YCbCr limited range, YCbCr full range} - YCbCr limited range\n    \u2514\u2500\u2500\u2500Plane 8\n        \u251c\u2500\u2500\u2500Object ID: 66\n        \u251c\u2500\u2500\u2500CRTCS: {2}\n        \u251c\u2500\u2500\u2500Formats:\n        \u2502   \u2514\u2500\u2500\u2500ARGB8888\n        \u2514\u2500\u2500\u2500Properties\n            \u251c\u2500\u2500\u2500\"type\" (Immutable): Enum {Overlay, Primary, Cursor} - Cursor\n            \u251c\u2500\u2500\u2500\"FB_ID\" (Atomic): Object Framebuffer - 0\n            \u251c\u2500\u2500\u2500\"IN_FENCE_FD\" (Atomic): SRange [-1, INT32_MAX] - -1\n            \u251c\u2500\u2500\u2500\"CRTC_ID\" (Atomic): Object CRTC - 0\n            \u251c\u2500\u2500\u2500\"CRTC_X\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"CRTC_Y\" (Atomic): SRange [INT32_MIN, INT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"CRTC_W\" (Atomic): Range [0, INT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"CRTC_H\" (Atomic): Range [0, INT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"SRC_X\" (Atomic): Range [0, UINT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"SRC_Y\" (Atomic): Range [0, UINT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"SRC_W\" (Atomic): Range [0, UINT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"SRC_H\" (Atomic): Range [0, UINT32_MAX] - 0\n            \u251c\u2500\u2500\u2500\"IN_FORMATS\" (Immutable): Blob\n            \u2514\u2500\u2500\u2500\"rotation\": Bitmask {rotate-0, rotate-180} - (rotate-0)\nDevice: /dev/dri/card1\ndrmModeGetResources: Invalid argument. my card1 does not have any output :/. thats the problem! I have to use the nvidia driver right now, due to my problem with the hybrid graphics not working (I got a pretty new laptop, the Thinkpad P1, so have to do some pioneer work on it regarding linux).\nWhen I am switching to the Nouveau driver, sway (and other display managers) are unusable. The CPU usage skyrockets immediately to 100% on all cores and I can barely move the mouse.\nTherefore, it seems I have to solve this issue first and then outputs with sway will probably work just fine! Thank you all for your help. Please reopen this issue!\nI fixed my dGPU issue. I am now using only the iGPU, but still the display is not appearing in the outputs. @RedSoxFan Thank you, exactly what I wanted!\nDo you have an idea, how to make it visible, which display is currently selected? Before, that was indicated by the different modes. I checked the doc with man 5 sway-bar, but I think it is not possible to set the display string for the current mode in a custom manner, right? Any other idea?  \nIf its not possible out of the box, not bad at all, I am happy with this solution anyways :). ",
    "NoraCodes": "Wait, this is ridiculous. Reverting this requires two git commands, you're not being asked to volunteer an appreciable amount of time. Hell, I'll pay you for a quarter hour of time to revert this if you want.\nA patch that deliberately breaks peoples' potentially working setups isn't a patch that should be merged. Because it shouldn't have been merged, it should have been reverted. Even if you disagree with me and @clarcharr, it's not really great to be extremely disrespectful to people asking you to run a couple of git commands.\nWhat kind of patch would you accept here? If I were to submit at patch that replaces this change - that is, reverts it and adds a more moderate response like a warning message - would you accept that patch?\nI don't use Nvidia proprietary drivers on my laptop, but I'm slowly transitioning to Sway from i3 on all my machines, and if this is your attitude toward hardware that works but isn't supported, that's a problem.. There's a difference between not supporting something and deliberately breaking it.\nThat said, would you accept a patch that just prints a warning message in this case? I'm happy to submit one.. Yes, I think the motivation makes sense and that the correct solution is to merge the device name/version extraction changes to wlroots and then warn the user through sway \u2194 they actually initialize a backend on an unsupported device. \nThat warning could potentially be provided through means that are more obvious (nagbar, etc), or perhaps sway could bail out by default to ensure they see the message.\nHowever, with the additional wlroots functionality, it would be easy to implement more informative error messages: e.g. \"Your only video device is unsupported; sway is unlikely to work at all, please do not open issues about this. Use --unsupported-gpus to force.\" vs. \"One or more video devices are unsupported, but there are supported devices present as well; you may experience problems with displays connected to [device], [device], .... Please do not open issues about these problems. Use --unsupported-gpus to force.\". ",
    "megamann": "sway version 1.0-alpha.6-329-gc75098e9 (Oct 20 2018, branch 'master')\nlog.sway.txt\n. ",
    "tg--": "I was just stumbling upon the same thing, my usecase is:\nI want to turn off the display immediately on demand (for example after a movie finishes), by script.\nA solution that would work for me would be, if swayidle itself hat a oneshot/once option, i.e. run:\nswayidle --once timeout 1 'swaymsg \"output * dpms off\"' resume 'swaymsg \"output * dpms on\"'\nAfter that, swayidle exits only when the display comes back on.. @martinetd: this won't work for multiple reasons: timeout 0 is not possible right now; but mainly, swayidle will not exit and thus the pkill will never be reached.\nThat's where the oneshot-option would be helpful (in which case pkill wouldn't be needed anyway).\nHowever, it's of course limited in that it still doesn't detect other \"dpms off\" calls - but those could just be replaced with a 'oneshot ... off resume on' which could even be its own shortcut (swayidle --now?) or an alias.. I've looked at the swayidle code now, and considered a few different things to accomplish this:\n\n\nSIGUSR1: this sounded like a good solution at first; however, implementing it would be really ugly, since swayidle itself has actually no concept of DPMS and just uses swaymsg to communicate this to the compositor. For SIGUSR1 to work we would then need to either hardcode a swaymsg command to turn the display off and on, which is very ugly, or go through the cmd list and just pick the first one containing dpms which is equally ugly.\nJust picking the first one (i.e. toggling idle state) won't work, since the point is to turn the display off and make sure it comes on again, and the first idle command is not guaranteed to do this.\n\n\nOneshot: Still seems somewhat reasonable, but it's a bit clumsy since there are probably 2 instances of swayidle running and it's actually somewhat tricky to figure out when to terminate swayidle (has to be something like at the first resume command)\n\n\nAdding a top level \"resume\" command to swayidle which is not conditional to the \"timeout\" command and will be run at every resume event\n\n\n@Hi-Angel's solution seems also reasonable, though this would require a new RPC mechanism (or maybe just a registering a new WL event?), however, it would also likely cause side-effects, like in case a user wants to turn a secondary display off permanently.\nThoughts?\n. ",
    "DutchMofo": "Do I need to have sway running and then cause the crash?. Here you go, \nhttps://gist.github.com/DutchMofo/79619cc7e85d04f386beeaf7a7a08909\nAlso congrats on sway 1.0!. ",
    "mb720": "@skrps: Thanks for your comment. I don't think that's it since I can suspend my system by executing systemctl suspend in the shell. I updated my original question with that piece of information.\n. exec systemctl suspend works fine; for example with this key mapping, I can suspend the machine by pressing the mute button:\nbindsym XF86AudioMute exec systemctl suspend\n\nAs helpfully suggested, I edited /etc/systemd/logind.conf:\nHandlePowerKey=suspend\n\nI made the changes effective with sudo systemctl restart systemd-logind (which logged me out).\nPressing the power button now on my loptop for about half a second will suspend the machine, just like I wanted it to.\nThanks for your help!\n. ",
    "Ferdi265": "I think this is slightly relevant:\non my system, XF86AudioMute, XF86AudioRaiseVolume and XF86AudioLowerVolume don't work, even though they work fine with xev in Xorg and Xwayland, and other XF86 keys do work in sway for me. (for example XF86MonBrightnessUp and Down)\nI have also tried with bindcode, which only works for those keys that also work with key names.\nI haven't found a better way to test inputs than xev. If there is a pure wayland alternative, that would be nice.. I'm currently trying to printf-debug sway's input handling to see where it goes wrong.\nThe keysym is correctly made into a binding, but the get_active_binding says ~~modifiers~~ number of keys don't match for the XF86Audio buttons. I'll try to further look into this.\nInterestingly, when using the XF86Audio buttons, my system generates an XF86WakeUp too, which seems to come from the Fn key. It's only added to the list of pressed keys for the audio keys though.\nAdding a bindsym with XF86WakeUp+XF86AudioMute works as expected. My keyboard seems pretty weird now.... Also, independent of wether we implement it or not, the irrelevant errno formatted message should IMO be removed / changed. It just doesn't make sense here.. Will do :). Here is a minimal config and bar-script to reproduce this:\nhttps://gist.github.com/Ferdi265/f53c6372583eb271f7b16056b802ade1. Setting a fixed height in the sway config using height X in the bar block doesn't work either. The bar expands to \"fit\" the character.\nIMO a fixed height in the config should mean that height is actually fixed, with any resulting cutoff of the font being intended.. I think this is caused by the fact that on Wayland, drawing the mouse cursor is left up to the application. So in this case, your applications don't seem to agree on the scale of the mouse cursor. See #330.. Thanks for fixing this :). the ArchLinux community repo has switched to scdoc 1.9.1. For now it is impossible to build sway on ArchLinux with manpages without downgrading scdoc.. ",
    "victordiaz": "Github was missbehaving yesterday close this issue as duplicated in #2921 . ",
    "pbeliveau": "Issue is fixed as of at least #3037 \nNo cursor slow down when dpms off on one screen.\nClosing.. ",
    "ibrokemypie": "it doesnt work as set $menu \"rofi -i -modi drun,run,window -show drun\" either though. huh, not sure what I did wrong before, mustve mistyped, but copying from your worked fine. ",
    "nowrep": "It doesn't seem to lose numlock state for me. After running this command, I have still numlock enabled.. > Isn't this something you can just make xkb do via xkeyboard-config?\nIf you mean set it so you can have layout switching with some key, then yes that can be set with xkeyboard_options. My use-case here is to set different layout for specific windows (with script over ipc), and I am not aware of any other way to do it (without needing to press some key).. Sure, that wasn't my intention with this actually.\nI chose this approach because it is easier and more flexible I think. For me it works perfectly, I only needed small change to script I used with i3.. Fixed in current master. ",
    "mteyssier": "It might actually explain why I couldn't start termite on the first try, just after installing sway.\nThanks for the report!\nI uninstalled xwayland to run some tests (using termite instead of gnome-terminal or terminator):\nUsing sway:\n- indeed termite doesn't start if called via exec in the config\n- weston-terminal starts fine in sway!\n- lauching termite from a weston-terminal: termite doesn't return and doesn't display any window.\n- strace on termite: it is stuck on connect(... \"/tmp/.X11-unix/X0\").\nUsing weston:\n- both weston-terminal and termite are running fine.\nThe key is the DISPLAY environment variable.\nIt is not set by weston. (And is not set in your ssh session, right?)\nYou can try to unset the DISPLAY variable (via script?) and your terminal should run fine, something like:\nenv -u DISPLAY termite or just unset DISPLAY before.\nAnyway the DISPLAY variable shouldn't be set, should it?\nI just skimmed through the code but it looks like a wlroots issue, not  handling the error producing [xwayland/xwayland.c:144] failed to exec Xwayland: No such file or directory and thus not  unsetting DISPLAY.\nAfter a quick glance at sway/server.c, currently sway would not properly handle this kind of error anyway (if compiled with HAVE_XWAYLAND).. Thanks to both of you for the quick answers.\n\nWe start Xwayland lazyly, which means we create the socket and set DISPLAY before starting Xwayland and start it only when an app connects.\n\nOf course the lazy start. It all makes sense now. Hard to do anything at this stage if starting Xwayland fails.\n\nTwo things can be done:\n    * We should add a runtime config option to disable Xwayland\n    * Maybe we should check for Xwayland before starting lazily? (This would require handling PATH, not sure it's actually a good idea)\n\nI can't tell if something has to be done, but:\n Yes, I wondered at some point if there were a Xwayland option I should disable.\n Indeed checking for Xwayland before starting lazily might be clumsy.\n\nmteyssier - Thanks for the info. I was able to start weston as well, which matches your findings. Everything works fine with XWayland installed, I just thought wayland capable programs wouldn't/shouldn't need it\n\nThanks for testing it.\nI thought the same, that's why I first installed sway without Xwayland and wasn't able to launch a Wayland capable terminal. I ended up installing Xwayland anyway.\nAnd as you said everything works fine with Xwayland installed, it solved my issue without me noticing.\nMoreover xwayland is in the dependency list of the Readme, isn't it?. ",
    "praetorian55": "mteyssier - Thanks for the info.  I was able to start weston as well, which matches your findings.  Everything works fine with XWayland installed, I just thought wayland capable programs wouldn't/shouldn't need it. > > I just thought wayland capable programs wouldn't/shouldn't need it\n\nThat's true. However GTK connects to X11 even if it uses Wayland for some reason =.=\n\nInteresting - One thing I thought was weird is that when I had xwayland installed and started the terminals, graphical applications (like retroarch which is wayland compatible) run from the terminal would cause CPU usage on both xwayland and sway. \nif the GTK application connects to X11 and is successful, does that mean it uses X11 and not wayland?\n. > I thought the same, that's why I first installed sway without Xwayland and wasn't able to launch a Wayland capable terminal. I ended up installing Xwayland anyway.\n\nAnd as you said everything works fine with Xwayland installed, it solved my issue without me noticing.\nMoreover xwayland is in the dependency list of the Readme, isn't it?\n\nIt definitely is - and things work when its installed.  I started experimenting with it when I saw xwayland using significant CPU (as much as sway) when running wayland capable apps, which I thought was odd - I did not see that when running the .15 branch - so I interpreted that as maybe the applications were using X instead of wayland.\n. ",
    "RuiAlias": "I don't see how native-scale would worsen the Wayland experience, perhaps my explanation wasn't clear enough. If someone uses only Wayland-native programs (which I'm all for), native-scale would be identical to scale and those users wouldn't need to change their config as I'm not proposing the removal of or changes to scale.\nThe only effect I can see this having for \"Wayland only\" users would be the extra option in the manual and the extra \"unnecessary\" code in sway. (But sway supports XWayland to begin with.). I assumed this was relatively easy to implement since I interpreted it as \"scale with less features\" (i.e. without the \"stretching\" of X-programs) but I believe you.\nThanks anyway.. I don't know how they have implemented it (I haven't tried GNOME), but I can tell you that it's possible to use Sway today with both Wayland and X native programs scaled properly, because that's what I'm doing.\nThe solution consists in:\n- Setting Sway's scale to 1 (default), i.e. removing Sway from the equation;\n- For Wayland apps: configuring each Wayland application \"by hand\" (either by increasing the font size or by setting some environment variable);\n- For X apps: using the Xft.dpi property of Xresources.\nThis is obviously not an ideal solution and it doesn't work in a mixed DPI setup (more than one monitor with each having a different dpi / scaling factor).\n@maximbaz Does GNOME scale both XWayland and Wayland apps properly in a mixed DPI setup?. ",
    "maximbaz": "I've seen that GNOME managed to scale properly XWayland apps, so that no apps are blurry with HiDPI, neither native Wayland nor old XWayland apps. Does anyone know how they managed to achieve this? I really really want to switch to Wayland + sway, but although using only Wayland apps is a noble goal, in practice this is not feasible today, so I would have to use some XWayland and I can't use them if they are blurry and/or not properly scaled.. I don't have a way to test mixed DPI, so I don't know... \nThanks for sharing your approach, yes it's less than ideal, but I see now why you created this issue in the first place - if there was a way to ignore scaling XWayland apps / set XWayland scale factor to 1, you could have focused on manually hand-crafting X applications while having awesome experience with Wayland native apps, but right now your experience is completely opposite, you have to manually configure Wayland apps.. ",
    "tareefdev": "@RuiAlias Thanks your solutions worked with me too. ",
    "scarlehoff": "@RuiAlias This basically cripples one of the advantages of wayland wrt X11, which is support for hidpi in a multimonitor set up.\nWhat gnome currently does (and imho is the correct behaviour alhought it seems @ddevault and @emersion disagree with me on this) is setting the scale of all X11 to 1 (or 2 or whatever number) and keeping it fixed.\nAdventage: not blurry\nDisadvantage: tiny text in the HiDPI screen.\nTo me is better to have tiny but not blurry text since I always can increase the text size but can\u2019t undo the blurryness.\nI was going to open an issue commenting exactly this, since I see the issue is closed I imagine there is no interest in this. Just a question, is this by choice or is it just something you guys see no worth doing?\nAlso: is there a known way of doing this already? (i do not want to waste my time reinventing the wheel or trying to write a feature that is explicitly not wanted)\nThanks!. I see. Well, I\u2019ll have a look at it when/if I have the time since for me it would be a nice feature to have.\nIf it turs out to be too difficult I\u2019ll just stop using Thunderbird :__\n. ",
    "philipflohr": "@SirCmpwn I'm writing a little tool helping to configure outputs which could use the output event. \nIf I write a patch implementing the output event will you merge it?. @emersion thanks but not excatly what I'm looking for as I plan to implemet workspace -> output save/restore and other features. \nBut maybe there can be some mutual inspiration\nhttps://github.com/philipflohr/SwayMonMan\n@ddevault Would you merge a patch implemeting the output event?. With my setup this only happens for xwayland windows, right-click works fine for native wayland applications. wow - this is the greates copy & paste with wrong focus error I ever encountered. \nPlease close - this is a total accident. ",
    "japhir": "I have the same issue, it seems!. ",
    "yory8": "I edited the report to correct it.. I solved the issue: between the last time I used sway and now the name of the identifier has slightly changed (from TouchPad to Touchpad). It works now.. I can confirm the second issue (black screen after unlocking), I'm on latest master too, with a single monitor (laptop).\nAfter I validate the login password the screen turns to normal.. @ddevault Yes! But I'm experiencing it also when copying from closed geany into firefox\n@emersion why passwords?. @ddevault you are right, I'm only experiencing it when copying to those two applications. Just tried atom and from geany to geany and the error message wasn't there.\nThank'you. @emersion yes, and https://github.com/neovim/neovim/issues/2642, it seems to be about xclip, though I didn't know it was used in firefox. @emersion in fact, I'm not getting it anymore \"from geany to firefox\"  nor \"from alacritty to firefox\" . that's weird, I could swear it happened just yesterday :confused: . ",
    "GreyXor": "\n\nOkay. Maybe related to swaywm/wlroots#348\nI'm actually happy about this issue because it'll potentially make debugging much easier.\n\nGood to hear that +1 . Also it seems forcing wayland for Kitty would fix it in this specific situation:\nin sway/config\nset $term env KITTY_ENABLE_WAYLAND=1 kitty\n\nDo you have a copy/paste issue with KITTY_ENABLE_WAYLAND=1 ?\nTry to copy content from kitty (CTRL+MAJ+C) and paste it in a another container (x11 and wayland,  try both) in another workspace. ",
    "Robinhuett": "Sure, I'll look into it later.. Thanks for your input. --caps-lock-key-hl-color <color> and --caps-lock-bs-hl-color <color> are good ideas which I have totaly overlooked.\nI have added both as well as resetting state->args.color.text.input in af30046. Ahh, I see. This was total nonsense. Sorry for that. It's fixed now. I'm not a fan of this either, but unfortunatly there was no \"easy\" way of setting just one color.\nNonetheless I've added the check. ",
    "krgn": "What is strange is that line 267 does not actually exist in the config file, so the error message there is a little misleading.\n2018-10-26 18:55:13 - [sway/server.c:34] Preparing Wayland server initialization\n2018-10-26 18:55:13 - [backend/session/logind.c:537] Successfully loaded logind session\n2018-10-26 18:55:13 - [backend/backend.c:143] Found 1 GPUs\n2018-10-26 18:55:13 - [backend/drm/backend.c:151] Initializing DRM backend for /dev/dri/card0 (i915)\n2018-10-26 18:55:13 - [backend/drm/drm.c:63] Using atomic DRM interface\n2018-10-26 18:55:13 - [backend/drm/drm.c:156] Found 3 DRM CRTCs\n2018-10-26 18:55:13 - [backend/drm/drm.c:87] Found 9 DRM planes\n2018-10-26 18:55:13 - [backend/drm/drm.c:129] (3 overlay, 3 primary, 3 cursor)\n2018-10-26 18:55:13 - [render/egl.c:146] Using EGL 1.4\n2018-10-26 18:55:13 - [render/egl.c:147] Supported EGL extensions: EGL_ANDROID_blob_cache EGL_ANDROID_native_fence_sync EGL_EXT_buffer_age EGL_EXT_create_context_robustness EGL_EXT_image_dma_buf_import EGL_EXT_image_dma_buf_import_modifiers EGL_IMG_context_priority EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_create_context_no_error EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_colorspace EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_3D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_EXT_pixel_format_float EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n2018-10-26 18:55:13 - [render/egl.c:148] EGL vendor: Mesa Project\n2018-10-26 18:55:13 - [render/egl.c:96] Supported dmabuf buffer formats: AR30 XR30 AR24 AB24 XR24 XB24 AR15 RG16 R8   R16  GR88 GR32 YUV9 YU11 YU12 YU16 YU24 YVU9 YV11 YV12 YV16 YV24 NV12 NV16 YUYV UYVY \n2018-10-26 18:55:13 - [render/egl.c:214] Failed to obtain a high priority context\n2018-10-26 18:55:13 - [render/gles2/renderer.c:493] Using OpenGL ES 3.2 Mesa 18.1.7\n2018-10-26 18:55:13 - [render/gles2/renderer.c:494] GL vendor: Intel Open Source Technology Center\n2018-10-26 18:55:13 - [render/gles2/renderer.c:495] Supported GLES2 extensions: GL_ANDROID_extension_pack_es31a GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_APPLE_texture_max_level GL_EXT_blend_func_extended GL_EXT_blend_minmax GL_EXT_buffer_storage GL_EXT_clip_cull_distance GL_EXT_color_buffer_float GL_EXT_compressed_ETC1_RGB8_sub_texture GL_EXT_copy_image GL_EXT_discard_framebuffer GL_EXT_disjoint_timer_query GL_EXT_draw_buffers GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_frag_depth GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_gpu_shader5 GL_EXT_map_buffer_range GL_EXT_multi_draw_arrays GL_EXT_occlusion_query_boolean GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_read_format_bgra GL_EXT_robustness GL_EXT_separate_shader_objects GL_EXT_shader_framebuffer_fetch GL_EXT_shader_framebuffer_fetch_non_coherent GL_EXT_shader_integer_mix GL_EXT_shader_io_blocks GL_EXT_shader_samples_identical GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_compression_dxt1 GL_EXT_texture_cube_map_array GL_EXT_texture_filter_anisotropic GL_EXT_texture_format_BGRA8888 GL_EXT_texture_rg GL_EXT_texture_sRGB_decode GL_EXT_texture_type_2_10_10_10_REV GL_EXT_unpack_subimage GL_INTEL_conservative_rasterization GL_INTEL_performance_query GL_KHR_blend_equation_advanced GL_KHR_blend_equation_advanced_coherent GL_KHR_context_flush_control GL_KHR_debug GL_KHR_no_error GL_KHR_robust_buffer_access_behavior GL_KHR_robustness GL_KHR_texture_compression_astc_ldr GL_KHR_texture_compression_astc_sliced_3d GL_MESA_shader_integer_functions GL_NV_draw_buffers GL_NV_fbo_color_attachments GL_NV_image_formats GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_OES_EGL_image GL_OES_EGL_image_external GL_OES_EGL_image_external_essl3 GL_OES_EGL_sync GL_OES_compressed_ETC1_RGB8_texture GL_OES_copy_image GL_OES_depth24 GL_OES_depth_texture GL_OES_depth_texture_cube_map GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_get_program_binary GL_OES_gpu_shader5 GL_OES_mapbuffer GL_OES_packed_depth_stencil GL_OES_primitive_bounding_box GL_OES_required_internalformat GL_OES_rgb8_rgba8 GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_image_atomic GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_surfaceless_context GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_3D GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_OES_vertex_array_object GL_OES_vertex_half_float GL_OES_viewport_array \n2018-10-26 18:55:13 - [sway/main.c:189] Linux stimpy 4.18.14 #1-NixOS SMP Sat Oct 13 07:33:17 UTC 2018 x86_64 GNU/Linux\n2018-10-26 18:55:13 - [sway/main.c:161] Contents of /etc/os-release:\n2018-10-26 18:55:13 - [sway/main.c:168] NAME=NixOS\n2018-10-26 18:55:13 - [sway/main.c:168] ID=nixos\n2018-10-26 18:55:13 - [sway/main.c:168] VERSION=\"18.09.932.09195057114 (Jellyfish)\"\n2018-10-26 18:55:13 - [sway/main.c:168] VERSION_CODENAME=jellyfish\n2018-10-26 18:55:13 - [sway/main.c:168] VERSION_ID=\"18.09.932.09195057114\"\n2018-10-26 18:55:13 - [sway/main.c:168] PRETTY_NAME=\"NixOS 18.09.932.09195057114 (Jellyfish)\"\n2018-10-26 18:55:13 - [sway/main.c:168] HOME_URL=\"https://nixos.org/\"\n2018-10-26 18:55:13 - [sway/main.c:168] SUPPORT_URL=\"https://nixos.org/nixos/support.html\"\n2018-10-26 18:55:13 - [sway/main.c:168] BUG_REPORT_URL=\"https://github.com/NixOS/nixpkgs/issues\"\n2018-10-26 18:55:13 - [sway/main.c:352] Starting sway version 1e8e7e16e73cb3c633cf52fbe5bc9c625e4cd029\n2018-10-26 18:55:13 - [sway/server.c:47] Initializing Wayland server\n2018-10-26 18:55:13 - [types/wlr_idle.c:231] idle manager created\n2018-10-26 18:55:13 - [types/wlr_idle_inhibit_v1.c:191] idle_inhibit manager created\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:242] Loaded cursor theme 'default', available cursors:\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] X_cursor (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] help (1 images) 24x24+12,21\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dotbox (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] left_ptr_watch (31 images) 24x24+6,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] top_side (1 images) 24x24+12,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] lr_angle (1 images) 24x24+20,20\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 9081237383d90e509aa00f00170e968f (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 14fef782d02440884392942c11205230 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] bottom_tee (1 images) 24x24+11,18\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] icon (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] ur_angle (1 images) 24x24+18,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 028006030e0e7ebffc7f7070c0600140 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] d9ce0ab605698f320427677b458ad60b (1 images) 24x24+12,21\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] right_ptr (1 images) 24x24+17,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] top_right_corner (1 images) 24x24+18,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 640fb0e74195791501fd1ed57b41487f (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 00008160000006810000408080010102 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] diamond_cross (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_left_arrow (1 images) 24x24+7,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] left_ptr (1 images) 24x24+7,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] draft_large (1 images) 24x24+17,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] left_side (1 images) 24x24+7,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 5c6cd98b3f3ebcb1f9c7f1c204630408 (1 images) 24x24+12,21\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] right_tee (1 images) 24x24+20,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] move (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] tcross (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] bottom_left_corner (1 images) 24x24+4,20\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 1081e37283d90000800003c07f3ef6bf (1 images) 24x23+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] copy (1 images) 24x23+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] hand2 (1 images) 24x24+9,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 3085a0e285430894940527032f8b26df (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] c7088f0f3e6c8088236ef8e1e3e70000 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] xterm (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] crosshair (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dnd-link (1 images) 24x24+9,9\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dnd-none (1 images) 24x24+13,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_h_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] draft_small (1 images) 24x24+17,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] pencil (1 images) 24x24+7,23\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] top_tee (1 images) 24x24+12,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 4498f0e0c1937ffe01fd06f973665830 (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 3ecb610c1bf2410f44200f48c40d3599 (31 images) 24x24+6,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 9d800788f1b08800ae810202380a0822 (1 images) 24x24+9,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] ul_angle (1 images) 24x24+5,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_up_arrow (1 images) 24x24+12,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] left_ptr_help (1 images) 24x24+12,21\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] bottom_side (1 images) 24x24+11,18\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] bd_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_right_arrow (1 images) 24x24+20,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 2870a09082c103050810ffdffffe0204 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] fd_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] grabbing (1 images) 24x24+13,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] cross (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] plus (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dnd-copy (1 images) 24x24+9,9\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] arrow (1 images) 24x24+7,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] color-picker (1 images) 24x24+4,19\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] crossed_circle (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dnd-ask (1 images) 24x24+9,9\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 03b6e0fcb3499374a867c041f52298f0 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] right_side (1 images) 24x24+20,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] target (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] left_tee (1 images) 24x24+7,13\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] question_arrow (1 images) 24x24+12,21\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] fcf1c3c7cd4491d801f1e1c78f100000 (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 6407b0e94181790501fd1e167b474872 (1 images) 24x23+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] ll_angle (1 images) 24x24+4,20\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] draped_box (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] fleur (1 images) 24x24+13,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dnd-move (1 images) 24x24+9,9\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] top_left_arrow (1 images) 24x24+7,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] 08e8e1c95fe2fc01f976f1e063a24ccd (31 images) 24x24+6,4\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] circle (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] hand (1 images) 24x24+9,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] dot_box_mask (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] bottom_right_corner (1 images) 24x24+20,20\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_down_arrow (1 images) 24x24+11,18\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] h_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] e29285e634086352946a0e7090d73106 (1 images) 24x24+9,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] watch (31 images) 24x24+12,12\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] v_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] link (1 images) 24x24+4,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] pirate (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] sb_v_double_arrow (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] hand1 (1 images) 24x24+9,5\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] cross_reverse (1 images) 24x24+11,11\n2018-10-26 18:55:13 - [xcursor/wlr_xcursor.c:248] top_left_corner (1 images) 24x23+5,5\n2018-10-26 18:55:13 - [sway/main.c:146] PATH=/home/k/bin:/run/wrappers/bin:/home/k/.local/bin:/bin:/usr/bin:/home/k/.nix-profile/bin:/nix/var/nix/profiles/default/bin:/run/current-system/sw/bin:/etc/profiles/per-user/k/bin\n2018-10-26 18:55:13 - [sway/main.c:146] LD_LIBRARY_PATH=(null)\n2018-10-26 18:55:13 - [sway/main.c:146] LD_PRELOAD_PATH=(null)\n2018-10-26 18:55:13 - [sway/main.c:146] LD_LIBRARY_PATH=(null)\n2018-10-26 18:55:13 - [sway/main.c:146] SWAY_CURSOR_THEME=(null)\n2018-10-26 18:55:13 - [sway/main.c:146] SWAY_CURSOR_SIZE=(null)\n2018-10-26 18:55:13 - [sway/main.c:146] SWAYSOCK=/run/user/1000/sway-ipc.1000.13116.sock\n2018-10-26 18:55:13 - [sway/config.c:322] Set XDG_CONFIG_HOME to /home/k/.config\n2018-10-26 18:55:13 - [sway/config.c:352] Loading config from /home/k/.config/sway/config\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 1: ## Base16 Gruvbox dark, hard\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 2: # Author: Dawid Kurek (dawikur@gmail.com), morhetz (https://github.com/morhetz/gruvbox)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 3: #\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 4: # You can use these variables anywhere in the i3 configuration file.\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 5: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 6: set $base00 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base00 #1d2021'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 7: set $base01 #3c3836\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base01 #3c3836'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 8: set $base02 #504945\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base02 #504945'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 9: set $base03 #665c54\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base03 #665c54'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 10: set $base04 #bdae93\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base04 #bdae93'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 11: set $base05 #d5c4a1\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base05 #d5c4a1'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 12: set $base06 #ebdbb2\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base06 #ebdbb2'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 13: set $base07 #fbf1c7\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base07 #fbf1c7'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 14: set $base08 #fb4934\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base08 #fb4934'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 15: set $base09 #fe8019\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base09 #fe8019'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 16: set $base0A #fabd2f\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0A #fabd2f'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 17: set $base0B #b8bb26\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0B #b8bb26'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 18: set $base0C #8ec07c\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0C #8ec07c'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 19: set $base0D #83a598\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0D #83a598'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 20: set $base0E #d3869b\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0E #d3869b'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 21: set $base0F #d65d0e\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $base0F #d65d0e'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 22: bar {\n2018-10-26 18:55:13 - [sway/config.c:727] Entering block 'bar'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 23:     status_command    i3status-rs /home/k/.config/i3/i3status.toml\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar status_command    i3status-rs /home/k/.config/i3/i3status.toml'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(i3status-rs)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(i3status-rs)\n2018-10-26 18:55:13 - [sway/commands/bar.c:99] Creating bar bar-0\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(status_command)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: status_command i3status-rs /home/k/.config/i3/i3status.toml\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(status_command)\n2018-10-26 18:55:13 - [sway/commands/bar/status_command.c:22] Feeding bar with status command: i3status-rs /home/k/.config/i3/i3status.toml\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 24:     position          bottom\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar position          bottom'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bottom)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bottom)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(position)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: position bottom\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(position)\n2018-10-26 18:55:13 - [sway/commands/bar/position.c:19] Setting bar position 'bottom' for bar: bar-0\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 25:     modifier          Mod3\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar modifier          Mod3'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(Mod3)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(Mod3)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(modifier)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: modifier Mod3\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(modifier)\n2018-10-26 18:55:13 - [sway/commands/bar/modifier.c:34] Show/Hide the bar when pressing 'Mod3' in hide mode.\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 26:     strip_workspace_numbers no\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar strip_workspace_numbers no'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(no)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(no)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: strip_workspace_numbers no\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(strip_workspace_numbers)\n2018-10-26 18:55:13 - [sway/commands/bar/strip_workspace_numbers.c:23] Enabling workspace numbers on bar: bar-0\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 27: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 28:     font pango:Terminess Powerline, FontAwesome 10\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar font pango:Terminess Powerline, FontAwesome 10'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(pango:Terminess)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(pango:Terminess)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(font)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: font pango:Terminess Powerline, FontAwesome 10\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(font)\n2018-10-26 18:55:13 - [sway/commands/bar/font.c:19] Settings font 'pango:Terminess Powerline, FontAwesome 10' for bar: bar-0\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 29:     height 17 \n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar height 17'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(17)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(17)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(height)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: height 17\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(height)\n2018-10-26 18:55:13 - [sway/commands/bar/height.c:18] Setting bar height to 17 on bar: bar-0\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 30: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 31:     colors {\n2018-10-26 18:55:13 - [sway/config.c:727] Entering block 'bar colors'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 32:         background $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors background $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(background)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(background)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors background #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: background #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(background)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 33:         separator  $base01\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors separator  $base01'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(separator)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(separator)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors separator #3c3836\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: separator #3c3836\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(separator)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 34:         statusline $base04\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors statusline $base04'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(statusline)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(statusline)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors statusline #bdae93\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: statusline #bdae93\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(statusline)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 35: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 36:         # State             Border  BG      Text\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 37:         focused_workspace   $base05 $base0D $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors focused_workspace   $base05 $base0D $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(focused_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(focused_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors focused_workspace #d5c4a1 #83a598 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: focused_workspace #d5c4a1 #83a598 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(focused_workspace)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 38:         active_workspace    $base05 $base03 $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors active_workspace    $base05 $base03 $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(active_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(active_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors active_workspace #d5c4a1 #665c54 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: active_workspace #d5c4a1 #665c54 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(active_workspace)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 39:         inactive_workspace  $base03 $base01 $base05\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors inactive_workspace  $base03 $base01 $base05'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(inactive_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(inactive_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors inactive_workspace #665c54 #3c3836 #d5c4a1\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: inactive_workspace #665c54 #3c3836 #d5c4a1\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(inactive_workspace)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 40:         urgent_workspace    $base08 $base08 $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors urgent_workspace    $base08 $base08 $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(urgent_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(urgent_workspace)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors urgent_workspace #fb4934 #fb4934 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: urgent_workspace #fb4934 #fb4934 #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(urgent_workspace)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 41:         binding_mode        $base00 $base0A $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bar colors binding_mode        $base00 $base0A $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bar)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(binding_mode)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(binding_mode)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: colors binding_mode #1d2021 #fabd2f #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(colors)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: binding_mode #1d2021 #fabd2f #1d2021\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(binding_mode)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 42:     }\n2018-10-26 18:55:13 - [sway/config.c:744] Exiting block 'bar colors'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 43: }\n2018-10-26 18:55:13 - [sway/config.c:744] Exiting block 'bar'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 44: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 45: # Basic color configuration using the Base16 variables for windows and borders.\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 46: # Property Name         Border  BG      Text    Indicator Child Border\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 47: client.focused          $base05 $base0D $base00 $base0D   $base0D\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.focused          $base05 $base0D $base00 $base0D   $base0D'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.focused)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 48: client.focused_inactive $base01 $base01 $base05 $base03   $base01\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.focused_inactive $base01 $base01 $base05 $base03   $base01'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.focused_inactive)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 49: client.unfocused        $base01 $base00 $base05 $base01   $base01\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.unfocused        $base01 $base00 $base05 $base01   $base01'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.unfocused)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 50: client.urgent           $base08 $base08 $base00 $base08   $base08\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.urgent           $base08 $base08 $base00 $base08   $base08'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.urgent)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 51: client.placeholder      $base00 $base00 $base05 $base00   $base00\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.placeholder      $base00 $base00 $base05 $base00   $base00'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.placeholder)\n2018-10-26 18:55:13 - [sway/commands/client.c:119] Warning: client.placeholder is ignored by sway\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 52: client.background       $base07\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'client.background       $base07'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(client.background)\n2018-10-26 18:55:13 - [sway/commands/client.c:119] Warning: client.background is ignored by sway\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 53: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 54: # set $alt Mod1\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 55: set $win                Mod4\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $win                Mod4'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 56: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 57: set $choose_project     rofi -normal-window -show fb -modi fb:rofi-choose-project\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $choose_project     rofi -normal-window -show fb -modi fb:rofi-choose-project'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 58: set $jump_window        rofi -normal-window -show fb -modi fb:sway-window\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $jump_window        rofi -normal-window -show fb -modi fb:sway-window'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 59: set $move_window        rofi                -show fb -modi fb:sway-move-to-workspace\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $move_window        rofi                -show fb -modi fb:sway-move-to-workspace'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 60: set $pm_command         rofi -normal-window -show fb -modi fb:rofi-pm\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $pm_command         rofi -normal-window -show fb -modi fb:rofi-pm'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 61: set $run_command        rofi -normal-window -show combi -modi combi -combi-modi run,drun\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $run_command        rofi -normal-window -show combi -modi combi -combi-modi run,drun'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 62: set $screenshot_area    screenshooter area-clipboard\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $screenshot_area    screenshooter area-clipboard'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 63: set $screenshot_full    screenshooter full-clipboard\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $screenshot_full    screenshooter full-clipboard'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 64: set $set_theme          rofi -normal-window -show fb -modi fb:rofi-set-theme\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $set_theme          rofi -normal-window -show fb -modi fb:rofi-set-theme'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 65: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 66: set $editor             emacsclient -c -s $EMACS_SERVER_FILE || emacs\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $editor             emacsclient -c -s $EMACS_SERVER_FILE || emacs'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 67: set $browser            firefox-devedition\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $browser            firefox-devedition'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 68: set $show_notes         emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/show-notes)\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $show_notes         emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/show-notes)\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 69: set $new_note           emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/insert-note)\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $new_note           emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/insert-note)\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 70: set $slack              slack\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $slack              slack'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 71: set $signal             signal-desktop\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $signal             signal-desktop'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 72: set $spotify            spotify\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $spotify            spotify'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 73: set $file_manager       pcmanfm\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $file_manager       pcmanfm'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 74: set $terminal           termite -e \"tmux a\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $terminal           termite -e \"tmux a\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 75: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 76: set $play_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $play_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 77: set $next_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $next_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 78: set $prev_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $prev_command       dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 79: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 80: set $mute_command       pamixer --toggle-mute\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $mute_command       pamixer --toggle-mute'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 81: set $raise_command      pamixer --increase 5\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $raise_command      pamixer --increase 5'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 82: set $lower_command      pamixer --decrease 5\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $lower_command      pamixer --decrease 5'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 83: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 84: set $brigher_command    light -A 10\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $brigher_command    light -A 10'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 85: set $darker_command     light -U 10\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'set $darker_command     light -U 10'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(set)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 86: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 87: gaps inner 10\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'gaps inner 10'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(gaps)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 88: gaps outer 10\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'gaps outer 10'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(gaps)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 89: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 90: # Font for window titles. Will also be used by the bar unless a different font\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 91: # is used in the bar {} block below.\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 92: font pango: DejaVu Sans Mono for Powerline 8\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'font pango: DejaVu Sans Mono for Powerline 8'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(font)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 93: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 94: # Before i3 v4.8, we used to recommend this one as the default:\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 95: # font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 96: # The font above is very space-efficient, that is, it looks good, sharp and\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 97: # clear in small sizes. However, its unicode glyph coverage is limited, the old\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 98: # X core fonts rendering does not support right-to-left and this being a bitmap\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 99: # font, it doesn\u2019t scale on retina/hidpi displays.\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 100: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 101: # Use Mouse+$win to drag floating windows to their wanted position\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 102: floating_modifier $win\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'floating_modifier $win'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(floating_modifier)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 103: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 104: # no borders for windows at all!\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 105: default_border pixel 1\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'default_border pixel 1'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(default_border)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 106: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 107: # kill focused window\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 108: bindsym $win+F4 kill\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F4 kill'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F4 to command `kill` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 109: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 110: bindsym $win+space focus mode_toggle\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+space focus mode_toggle'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+space to command `focus mode_toggle` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 111: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 112: # change           focus\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 113: bindsym $win+h     focus left\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+h     focus left'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+h to command `focus left` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 114: bindsym $win+j     focus down\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+j     focus down'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+j to command `focus down` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 115: bindsym $win+k     focus up\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+k     focus up'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+k to command `focus up` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 116: bindsym $win+l     focus right\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+l     focus right'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+l to command `focus right` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 117: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 118: # alternatively, you can use the cursor keys:\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 119: bindsym $win+Left  focus left\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Left  focus left'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Left to command `focus left` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 120: bindsym $win+Down  focus down\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Down  focus down'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Down to command `focus down` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 121: bindsym $win+Up    focus up\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Up    focus up'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Up to command `focus up` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 122: bindsym $win+Right focus right\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Right focus right'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Right to command `focus right` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 123: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 124: # move focused window\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 125: bindsym $win+Shift+h     move left\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+h     move left'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+h to command `move left` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 126: bindsym $win+Shift+j     move down\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+j     move down'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+j to command `move down` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 127: bindsym $win+Shift+k     move up\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+k     move up'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+k to command `move up` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 128: bindsym $win+Shift+l     move right\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+l     move right'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+l to command `move right` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 129: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 130: # alternatively, you can use the cursor keys:\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 131: bindsym $win+Shift+Left  move left\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+Left  move left'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+Left to command `move left` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 132: bindsym $win+Shift+Down  move down\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+Down  move down'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+Down to command `move down` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 133: bindsym $win+Shift+Up    move up\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+Up    move up'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+Up to command `move up` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 134: bindsym $win+Shift+Right move right\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+Right move right'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+Right to command `move right` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 135: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 136: # enter fullscreen mode for the focused container\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 137: bindsym $win+f fullscreen toggle\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+f fullscreen toggle'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+f to command `fullscreen toggle` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 138: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 139: # change container layout (stacked, tabbed, toggle split)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 140: bindsym $win+F5 layout splitv\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F5 layout splitv'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F5 to command `layout splitv` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 141: bindsym $win+F6 layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F6 layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F6 to command `layout splith` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 142: bindsym $win+F7 layout tabbed\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F7 layout tabbed'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F7 to command `layout tabbed` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 143: bindsym $win+F8 layout stacking\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F8 layout stacking'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F8 to command `layout stacking` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 144: bindsym $win+F9 layout toggle all\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F9 layout toggle all'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F9 to command `layout toggle all` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 145: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 146: # split in horizontal orientation\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 147: bindsym $win+F10 split vertical\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F10 split vertical'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F10 to command `split vertical` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 148: bindsym $win+F11 split horizontal\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F11 split horizontal'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F11 to command `split horizontal` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 149: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 150: # toggle tiling / floating\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 151: bindsym $win+Shift+space floating toggle\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+space floating toggle'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+space to command `floating toggle` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 152: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 153: # change focus between tiling / floating windows\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 154: # focus the urgent window \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 155: bindsym $win+d [urgent=latest] focus\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+d [urgent=latest] focus'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+d to command `[urgent=latest] focus` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 156: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 157: # really useful switching between previous workspace\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 158: bindsym $win+Tab workspace back_and_forth\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Tab workspace back_and_forth'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Tab to command `workspace back_and_forth` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 159: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 160: # focus the parent container\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 161: bindsym $win+a focus parent\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+a focus parent'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+a to command `focus parent` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 162: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 163: # reload the configuration file\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 164: bindsym $win+Shift+r reload\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+r reload'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+r to command `reload` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 165: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 166: # Commands\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 167: bindsym $win+F2               exec $run_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F2               exec $run_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F2 to command `exec rofi -normal-window -show combi -modi combi -combi-modi run,drun` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 168: bindsym $win+e                exec $editor\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+e                exec $editor'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+e to command `exec emacsclient -c -s $EMACS_SERVER_FILE || emacs` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 169: bindsym $win+t                exec $set_theme\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+t                exec $set_theme'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+t to command `exec rofi -normal-window -show fb -modi fb:rofi-set-theme` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 170: bindsym $win+Return           exec $terminal\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Return           exec $terminal'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Return to command `exec termite -e \"tmux a\"` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 171: bindsym $win+n                exec $new_note\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+n                exec $new_note'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+n to command `exec emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/insert-note)\"` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 172: bindsym $win+s                exec $show_notes\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+s                exec $show_notes'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+s to command `exec emacsclient -s $EMACS_SERVER_FILE --eval \"(krgn/show-notes)\"` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 173: bindsym $win+g                exec $jump_window\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+g                exec $jump_window'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+g to command `exec rofi -normal-window -show fb -modi fb:sway-window` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 174: bindsym $win+p                exec $choose_project\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+p                exec $choose_project'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+p to command `exec rofi -normal-window -show fb -modi fb:rofi-choose-project` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 175: bindsym $win+Shift+g          exec $move_window\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+g          exec $move_window'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+g to command `exec rofi -show fb -modi fb:sway-move-to-workspace` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 176: bindsym $win+Escape           exec $pm_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Escape           exec $pm_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Escape to command `exec rofi -normal-window -show fb -modi fb:rofi-pm` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 177: bindsym $win+Prior            exec $screenshot_area\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Prior            exec $screenshot_area'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Prior to command `exec screenshooter area-clipboard` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 178: bindsym $win+Shift+Prior      exec $screenshot_full\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+Shift+Prior      exec $screenshot_full'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+Shift+Prior to command `exec screenshooter full-clipboard` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 179: bindsym XF86AudioPlay         exec $play_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioPlay         exec $play_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioPlay to command `exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.PlayPause` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 180: bindsym XF86AudioNext         exec $next_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioNext         exec $next_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioNext to command `exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Next` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 181: bindsym XF86AudioPrev         exec $prev_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioPrev         exec $prev_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioPrev to command `exec dbus-send --print-reply --dest=org.mpris.MediaPlayer2.spotify /org/mpris/MediaPlayer2 org.mpris.MediaPlayer2.Player.Previous` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 182: bindsym XF86AudioMute         exec $mute_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioMute         exec $mute_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioMute to command `exec pamixer --toggle-mute` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 183: bindsym XF86AudioRaiseVolume  exec $raise_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioRaiseVolume  exec $raise_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioRaiseVolume to command `exec pamixer --increase 5` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 184: bindsym XF86AudioLowerVolume  exec $lower_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86AudioLowerVolume  exec $lower_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86AudioLowerVolume to command `exec pamixer --decrease 5` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 185: bindsym XF86MonBrightnessUp   exec $brigher_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86MonBrightnessUp   exec $brigher_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86MonBrightnessUp to command `exec light -A 10` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 186: bindsym XF86MonBrightnessDown exec $darker_command\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym XF86MonBrightnessDown exec $darker_command'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound XF86MonBrightnessDown to command `exec light -U 10` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 187: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 188: bindsym $win+F1 mode \"resize\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+F1 mode \"resize\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+F1 to command `mode \"resize\"` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 189: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 190: bindsym $win+plus  splitv\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+plus  splitv'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+plus to command `splitv` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 191: bindsym $win+minus splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'bindsym $win+minus splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Mod4+minus to command `splith` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 192: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 193: #bindsym $win+b bar mode toggle\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 194: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 195: # resize window (you can also use the mouse for that)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 196: mode \"resize\" {\n2018-10-26 18:55:13 - [sway/config.c:727] Entering block 'mode \"resize\"'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 197:   # same bindings, but for the arrow keys\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 198:   bindsym h resize shrink width 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym h resize shrink width 10 px or 10 ppt'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym h resize shrink width 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound h to command `resize shrink width 10 px or 10 ppt` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 199:   bindsym j resize grow height 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym j resize grow height 10 px or 10 ppt'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym j resize grow height 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound j to command `resize grow height 10 px or 10 ppt` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 200:   bindsym k resize shrink height 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym k resize shrink height 10 px or 10 ppt'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym k resize shrink height 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound k to command `resize shrink height 10 px or 10 ppt` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 201:   bindsym l resize grow width 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym l resize grow width 10 px or 10 ppt'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym l resize grow width 10 px or 10 ppt\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound l to command `resize grow width 10 px or 10 ppt` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 202: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 203:   # back to normal: Enter or Escape\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 204:   bindsym Return mode \"default\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym Return mode \"default\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym Return mode default\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Return to command `mode default` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 205:   bindsym Escape mode \"default\"\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'mode \"resize\" bindsym Escape mode \"default\"'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(mode)\n2018-10-26 18:55:13 - [sway/commands/mode.c:70] Switching to mode `resize' (pango=0)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: bindsym Escape mode default\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(bindsym)\n2018-10-26 18:55:13 - [sway/commands/bind.c:271] bindsym - Bound Escape to command `mode default` for device '*'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 206: }\n2018-10-26 18:55:13 - [sway/config.c:744] Exiting block 'mode \"resize\"'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 207: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 208: assign [class=\"Firefox\"]        web\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Firefox\"]        web'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Firefox\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Firefox\"]' -> 'web' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 209: assign [class=\"Chromium\"]       web\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Chromium\"]       web'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Chromium\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Chromium\"]' -> 'web' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 210: assign [class=\"Skype\"]          chat\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Skype\"]          chat'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Skype\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Skype\"]' -> 'chat' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 211: assign [class=\"Gimp\"]           img\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Gimp\"]           img'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Gimp\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Gimp\"]' -> 'img' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 212: assign [class=\"Inkscape\"]       img\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Inkscape\"]       img'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Inkscape\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Inkscape\"]' -> 'img' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 213: assign [class=\"Pcmanfm\"]        fm \n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Pcmanfm\"]        fm'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Pcmanfm\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Pcmanfm\"]' -> 'fm' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 214: assign [class=\"Emacs\"]          dev\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Emacs\"]          dev'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Emacs\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Emacs\"]' -> 'dev' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 215: assign [class=\"Termite\"]        dev\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Termite\"]        dev'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Termite\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Termite\"]' -> 'dev' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 216: assign [app_id=\"termite\"]       dev\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [app_id=\"termite\"]       dev'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: app_id=termite\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[app_id=\"termite\"]' -> 'dev' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 217: assign [class=\"Alacritty\"]      dev\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Alacritty\"]      dev'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Alacritty\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Alacritty\"]' -> 'dev' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 218: assign [class=\"st-256color\"]    dev\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"st-256color\"]    dev'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=st-256color\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"st-256color\"]' -> 'dev' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 219: assign [class=\"VirtualBox\"]     vm\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"VirtualBox\"]     vm'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=VirtualBox\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"VirtualBox\"]' -> 'vm' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 220: assign [class=\"Vlc\"]            media\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'assign [class=\"Vlc\"]            media'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(assign)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Vlc\n2018-10-26 18:55:13 - [sway/commands/assign.c:60] assign: '[class=\"Vlc\"]' -> 'media' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 221: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 222: for_window [title=\"org-notes\"] floating enable\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [title=\"org-notes\"] floating enable'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: title=org-notes\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[title=\"org-notes\"]' -> 'floating enable' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 223: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 224: # electron apps need this\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 225: for_window [class=\"(?i)spotify\"]    move window to workspace msk\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"(?i)spotify\"]    move window to workspace msk'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=(?i)spotify\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"(?i)spotify\"]' -> 'move window to workspace msk' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 226: for_window [class=\"(?i)slack\"]      move window to workspace chat\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"(?i)slack\"]      move window to workspace chat'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=(?i)slack\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"(?i)slack\"]' -> 'move window to workspace chat' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 227: for_window [class=\"(?i)signal\"]     move window to workspace chat\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"(?i)signal\"]     move window to workspace chat'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=(?i)signal\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"(?i)signal\"]' -> 'move window to workspace chat' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 228: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 229: for_window [class=\"Pinentry-gtk-2\"] floating enable\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Pinentry-gtk-2\"] floating enable'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Pinentry-gtk-2\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Pinentry-gtk-2\"]' -> 'floating enable' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 230: for_window [title=\"Preferences$\"]   floating enable\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [title=\"Preferences$\"]   floating enable'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: title=Preferences$\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[title=\"Preferences$\"]' -> 'floating enable' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 231: for_window [class=\"(?i)mplayer\"]    floating enable\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"(?i)mplayer\"]    floating enable'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=(?i)mplayer\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"(?i)mplayer\"]' -> 'floating enable' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 232: for_window [class=\"(?i)qjackctl\"]   floating enable\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"(?i)qjackctl\"]   floating enable'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=(?i)qjackctl\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"(?i)qjackctl\"]' -> 'floating enable' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 233: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 234: for_window [class=\"st-256color\"]    focus, layout tabbed\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"st-256color\"]    focus, layout tabbed'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=st-256color\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"st-256color\"]' -> 'focus, layout tabbed' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 235: for_window [class=\"Alacritty\"]      focus, layout tabbed\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Alacritty\"]      focus, layout tabbed'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Alacritty\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Alacritty\"]' -> 'focus, layout tabbed' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 236: for_window [class=\"Termite\"]        focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Termite\"]        focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Termite\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Termite\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 237: for_window [app_id=\"termite\"]       focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [app_id=\"termite\"]       focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: app_id=termite\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[app_id=\"termite\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 238: for_window [class=\"Emacs\"]          focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Emacs\"]          focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Emacs\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Emacs\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 239: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 240: for_window [title=\"rofi\"]           fullscreen\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [title=\"rofi\"]           fullscreen'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: title=rofi\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[title=\"rofi\"]' -> 'fullscreen' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 241: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 242: for_window [class=\"Firefox\"]        focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Firefox\"]        focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Firefox\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Firefox\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 243: for_window [class=\"Chromium\"]       focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Chromium\"]       focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Chromium\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Chromium\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 244: for_window [class=\"Pcmanfm\"]        focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Pcmanfm\"]        focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Pcmanfm\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Pcmanfm\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 245: for_window [class=\"Skype\"]          focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Skype\"]          focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Skype\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Skype\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 246: for_window [class=\"Gimp\"]           focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Gimp\"]           focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Gimp\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Gimp\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 247: for_window [class=\"Inkscape\"]       focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Inkscape\"]       focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Inkscape\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Inkscape\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 248: for_window [class=\"VirtualBox\"]     focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"VirtualBox\"]     focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=VirtualBox\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"VirtualBox\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 249: for_window [class=\"Vlc\"]            focus, layout splith\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'for_window [class=\"Vlc\"]            focus, layout splith'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(for_window)\n2018-10-26 18:55:13 - [sway/criteria.c:627] Found pair: class=Vlc\n2018-10-26 18:55:13 - [sway/commands/for_window.c:27] for_window: '[class=\"Vlc\"]' -> 'focus, layout splith' added\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 250: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 251: output \"eDP-1\" res 2560x1440 \n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'output \"eDP-1\" res 2560x1440'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(output)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(res)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: res 2560x1440\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(res)\n2018-10-26 18:55:13 - [sway/config/output.c:114] Adding non-wildcard output config\n2018-10-26 18:55:13 - [sway/config/output.c:135] Config stored for output eDP-1 (enabled: -1) (2560x1440@-1.000000Hz position -1,-1 scale -1.000000 transform -1) (bg (null) (null)) (dpms 0)\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 252: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 253: input \"1739:0:Synaptics_TM3288-011\" {\n2018-10-26 18:55:13 - [sway/config.c:727] Entering block 'input \"1739:0:Synaptics_TM3288-011\"'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 254:     tap enabled\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'input \"1739:0:Synaptics_TM3288-011\" tap enabled'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(input)\n2018-10-26 18:55:13 - [sway/commands/input.c:47] entering input block: 1739:0:Synaptics_TM3288-011\n2018-10-26 18:55:13 - [sway/config/input.c:14] new_input_config(1739:0:Synaptics_TM3288-011)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(tap)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: tap enabled\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(tap)\n2018-10-26 18:55:13 - [sway/config/input.c:156] Adding non-wildcard input config\n2018-10-26 18:55:13 - [sway/config/input.c:173] Config stored for input 1739:0:Synaptics_TM3288-011\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 255:     natural_scroll enabled\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'input \"1739:0:Synaptics_TM3288-011\" natural_scroll enabled'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(input)\n2018-10-26 18:55:13 - [sway/commands/input.c:47] entering input block: 1739:0:Synaptics_TM3288-011\n2018-10-26 18:55:13 - [sway/config/input.c:14] new_input_config(1739:0:Synaptics_TM3288-011)\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(natural_scroll)\n2018-10-26 18:55:13 - [sway/commands.c:409] Subcommand: natural_scroll enabled\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(natural_scroll)\n2018-10-26 18:55:13 - [sway/config/input.c:150] Merging on top of existing input config\n2018-10-26 18:55:13 - [sway/config/input.c:173] Config stored for input 1739:0:Synaptics_TM3288-011\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 256: }\n2018-10-26 18:55:13 - [sway/config.c:744] Exiting block 'input \"1739:0:Synaptics_TM3288-011\"'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 257: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 258: exec mako\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec mako'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec mako'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 259: exec swayidle timeout 300 'swaylock -c 000000' timeout 600 'swaymsg \"output * dpms off\"' resume 'swaymsg \"output * dpms on\"' before-sleep 'swaylock -c 000000'\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec swayidle timeout 300 'swaylock -c 000000' timeout 600 'swaymsg \"output * dpms off\"' resume 'swaymsg \"output * dpms on\"' before-sleep 'swaylock -c 000000''\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec swayidle timeout 300 'swaylock -c 000000' timeout 600 'swaymsg \"output * dpms off\"' resume 'swaymsg \"output * dpms on\"' before-sleep 'swaylock -c 000000''\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 260: \n2018-10-26 18:55:13 - [sway/config.c:654] Read line 261: exec $editor\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $editor'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $editor'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 262: exec $terminal\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $terminal'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $terminal'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 263: exec $signal\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $signal'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $signal'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 264: exec $slack\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $slack'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $slack'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 265: exec $spotify\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $spotify'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $spotify'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 266: exec $browser\n2018-10-26 18:55:13 - [sway/commands.c:374] handling config command 'exec $browser'\n2018-10-26 18:55:13 - [sway/commands.c:156] find_handler(exec)\n2018-10-26 18:55:13 - [sway/config.c:717] Deferring command `exec $browser'\n2018-10-26 18:55:13 - [sway/config.c:654] Read line 267: \n2018-10-26 18:55:13 - [sway/config.c:660] Config file changed during reading\n2018-10-26 18:55:13 - [sway/config.c:369] Error(s) loading config!\n2018-10-26 18:55:13 - [sway/server.c:178] Starting backend on wayland display 'wayland-0'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1007] Scanning DRM connectors\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'eDP-1'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1106] 'eDP-1' connected\n2018-10-26 18:55:13 - [backend/drm/drm.c:1108] Current CRTC: 41\n2018-10-26 18:55:13 - [backend/drm/drm.c:1113] Physical size: 310x170\n2018-10-26 18:55:13 - [backend/drm/drm.c:1124] Detected modes:\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   2560x1440@60012\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'DP-1'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'HDMI-A-1'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'DP-2'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'HDMI-A-2'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'DP-3'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1106] 'DP-3' connected\n2018-10-26 18:55:13 - [backend/drm/drm.c:1108] Current CRTC: 55\n2018-10-26 18:55:13 - [backend/drm/drm.c:1113] Physical size: 800x330\n2018-10-26 18:55:13 - [backend/drm/drm.c:1124] Detected modes:\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   3440x1440@59973\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   3440x1440@49987\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   3440x1440@29993\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   2560x1440@59951\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   2560x1080@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   2560x1080@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   2560x1080@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1720x1440@59980\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1920x1080@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1920x1080@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1920x1080@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1920x1080@50000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1600x1200@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x1024@75025\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x1024@60020\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x800@59910\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1152x864@75000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x720@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x720@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1280x720@50000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1024x768@75029\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   1024x768@60004\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   800x600@75000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   800x600@60317\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x576@50000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x480@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x480@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x480@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x480@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   640x480@75000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   640x480@60000\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   640x480@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   640x480@59940\n2018-10-26 18:55:13 - [backend/drm/drm.c:1139]   720x400@70082\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'DP-4'\n2018-10-26 18:55:13 - [backend/drm/drm.c:1070] Found connector 'DP-5'\n2018-10-26 18:55:13 - [backend/drm/drm.c:857] Reallocating CRTCs\n2018-10-26 18:55:13 - [backend/drm/drm.c:869] State before reallocation:\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'DP-5' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'DP-4' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'DP-3' crtc=1 state=1 desired_enabled=1\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'HDMI-A-2' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'DP-2' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'HDMI-A-1' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'DP-1' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:879]   'eDP-1' crtc=0 state=1 desired_enabled=1\n2018-10-26 18:55:13 - [backend/drm/drm.c:940] State after reallocation:\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'DP-5' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'DP-4' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'DP-3' crtc=1 state=1 desired_enabled=1\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'HDMI-A-2' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'DP-2' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'HDMI-A-1' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'DP-1' crtc=-1 state=0 desired_enabled=0\n2018-10-26 18:55:13 - [backend/drm/drm.c:945]   'eDP-1' crtc=0 state=1 desired_enabled=1\n2018-10-26 18:55:13 - [backend/drm/drm.c:433] Reallocating planes\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 33 (type 0) to CRTC 41\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 47 (type 0) to CRTC 55\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 28 (type 1) to CRTC 41\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 42 (type 1) to CRTC 55\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 38 (type 2) to CRTC 41\n2018-10-26 18:55:13 - [backend/drm/drm.c:478] Assigning plane -1 -> 52 (type 2) to CRTC 55\n2018-10-26 18:55:13 - [backend/drm/drm.c:1210] Requesting modeset for 'eDP-1'\n2018-10-26 18:55:13 - [sway/desktop/output.c:561] New output 0x23ea1a0: eDP-1\n2018-10-26 18:55:13 - [sway/tree/output.c:253] Matched output config for eDP-1\n2018-10-26 18:55:13 - [sway/config/output.c:201] Set eDP-1 mode to 2560x1440 (-1.000000 GHz)\n2018-10-26 18:55:13 - [sway/config/output.c:162] Assigning configured mode to eDP-1\n2018-10-26 18:55:13 - [backend/drm/drm.c:510] Modesetting 'eDP-1' with '2560x1440@60012 mHz'\n2018-10-26 18:55:13 - [backend/drm/drm.c:357] Starting renderer on output 'eDP-1'\n2018-10-26 18:55:13 - [GLES2] FS SIMD8 shader: 5 inst, 0 loops, 24 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 80 to 48 bytes.\n2018-10-26 18:55:13 - [GLES2] FS SIMD16 shader: 5 inst, 0 loops, 34 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 80 to 48 bytes.\n2018-10-26 18:55:13 - [GLES2] VS SIMD8 shader: 28 inst, 0 loops, 116 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 448 to 336 bytes.\n2018-10-26 18:55:13 - [GLES2] FS SIMD16 shader: 2 inst, 0 loops, 0 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 32 to 32 bytes.\n2018-10-26 18:55:13 - [sway/tree/workspace.c:231] Workspace: Generating new workspace name for output eDP-1\n2018-10-26 18:55:13 - [sway/tree/workspace.c:168] Got valid workspace command for target: 'back_and_forth'\n2018-10-26 18:55:13 - [sway/tree/output.c:82] Creating default workspace 1\n2018-10-26 18:55:13 - [sway/tree/workspace.c:55] Adding workspace 1 for output eDP-1\n2018-10-26 18:55:13 - [sway/desktop/layer_shell.c:178] Usable area changed, rearranging output\n2018-10-26 18:55:13 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2018-10-26 18:55:13 - [sway/tree/arrange.c:221] Arranging workspace '1' at 10.000000, 10.000000\n2018-10-26 18:55:13 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2018-10-26 18:55:13 - [sway/tree/arrange.c:221] Arranging workspace '1' at 10.000000, 10.000000\n2018-10-26 18:55:13 - [sway/desktop/transaction.c:402] Transaction 0x24ac980 committing with 2 instructions\n2018-10-26 18:55:13 - [sway/desktop/transaction.c:265] Applying transaction 0x24ac980\n2018-10-26 18:55:13 - [backend/drm/drm.c:1210] Requesting modeset for 'DP-3'\n2018-10-26 18:55:13 - [sway/desktop/output.c:561] New output 0x24512e0: DP-3\n2018-10-26 18:55:13 - [backend/drm/drm.c:510] Modesetting 'DP-3' with '3440x1440@59973 mHz'\n2018-10-26 18:55:13 - [backend/drm/drm.c:357] Starting renderer on output 'DP-3'\n2018-10-26 18:55:13 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2018-10-26 18:55:13 - [sway/tree/arrange.c:221] Arranging workspace '1' at 3450.000000, 10.000000\n2018-10-26 18:55:13 - [sway/desktop/transaction.c:402] Transaction 0x24ac930 committing with 1 instructions\n2018-10-26 18:55:13 - [sway/desktop/transaction.c:265] Applying transaction 0x24ac930\n. Thanks!;. I don't have the docking station/monitor around right now, but will test tomorrow.. I also experience this now when I connect an external screen. Its hard to debug, because the machine locks up completely and no core dumps are created.. @martinsb ah that works for me as well! Thanks, you made my day!. @yannick yes, I noticed this as well. If I start sway with the monitor already connected from the tty the lock-up doesn't occur, so it indicates it could well be a timing issue when the display comes online.\nI also noticed that, when I plugged it in once and had termite focused with htop running, Xwayland was at 97% CPU just before everything froze.. ",
    "kupospelov": "\nYou can use xev to get the keysym name in your ru layout.\n\nI can, but I would expect these shortcuts to work in any layout out of the box. I cannot think of any use case to justify layout-dependent shortcuts.\n\nI'd like not to do this, and anyway I don't think it's possible.\n\nThere should be a way to do that, but surely it is not a trivial change. It seems that i3 uses xkb_keymap_key_for_each to iterate through all keycodes in the keymap to create all possible keysyms to compare with, and then stores the matching keycodes with proper modifiers.. I would say that in one layout keyboards should only produce one unique keysym per key most of the time. From what I see, even numpad keys (digits, enter, insert, etc) produce keysyms which are different from the other keys' keysyms.\nIn the rare case when the same keysym is producible from different keys, we could just skip the conversion. In other words, we will only convert keysyms which can be replaced with a single keycode. This should still fix bindings with Latin characters, since it is hard to imagine a keyboard with several keys to type in the same letter in one layout, and keysyms which cannot be safely replaced won't be affected.. > it seems muscle memory trumps my preference. I quickly switch z and y, but for the shortcuts I keep pressing the original position.\nThis is exactly what I experience from time to time (except that in my case almost all shortcuts just stop working). People do not normally think about the current layout all the time, so this inconsistency is annoying.\n\nMaybe this should be optional, let bindsym detect a parameter like --code to switch the behaviour? Or do the reverse with bindcode --fromsym\n\nMaking the bindsym conversion optional would mean that there are cases when people use some shortcuts in one keyboard layout and do not use in another. I cannot say for everyone, but to me it seems weird.\nIn my opinion, it is convenient to use keysyms in the config file, but they should not be interpreted literally. Instead, bindings should be bound to proper hardware keys and just work consistently in any layout.\nThis is not exactly what this pull request does, though. This change fixes the problem, but does not eliminate layout-dependent keysym comparisons altogether. I do not think I can do this until there is an agreement to drop support for layout-dependent keysym bindings.. Squashed the style fixes and rebased the changes.. > Let's say keycodes Shift+1 gives the keysym 1 in one of my layouts (e.g. fr), and that just pressing the keycode 1 gives the keysym 1 in the other (e.g. en). What happens with this patch applied?\nIt depends on how you have configured your layouts. The layout which comes first is used to resolve the bindsyms.\nFor XKB_DEFAULT_LAYOUT='us,fr':\n1. $mod+1 will switch to workspace 1 in both layouts.\n2. $mod+w will work in both layouts as if you used us.\nFor XKB_DEFAULT_LAYOUT='fr,us':\n1. 1 cannot be resolved into a bindcode, so it will be layout-dependent: you will have to use $mod+1 in us and $mod+Shift+1 in fr.\n2. $mod+w will work in both layouts as if you used fr.. > I'm really not a fan of converting keysyms into keycodes. This makes bindings depend on the first layout, and breaks other layouts (set via xkb_layout a,b,c or when changed via the IPC).\nThe issue with keysyms is that they depend on the current layout and this is a pain. The simplest way to fix that is to use only one layout for bindings, which sounds like a reasonable requirement.\nAs for IPC, there are options:\n Do not allow changing the layout configuration using the IPC\n Re-translate the keysyms every time there is a change in the layout configuration\n\nInvestigating what i3 does would be interesting.\n\nThis approach is actually inspired by what i3 does. You can take a look at i3/bindings.c, function translate_keysyms. You can also look into function get_binding to make sure that there are no direct keysym comparisons. The behavior is also similar: the first configured layout is used to resolve keysyms.. @emersion, could you please make your point clearer:\n\nDo you generally agree that layout-dependent shortcuts is a problem that should be addressed in one way or another?\nIf you do agree, but do not like the keycode translation, do you know any better ways to achieve that?\nIf, for example, the keysym translation was performed on every change of layout configuration via the IPC and it worked with the xkb_layout command, how would this approach look?. > Excuse me, but an you please re-explain why it's an issue with Russian layouts?\n\nFolks in this thread were quite eloquent at describing issues, it is hard to add anything else.\nGenerally speaking, the main issue is that there is no [a-z] keysyms in the Russian layout. When layout changes, every such key changes its keysym to something else. The [a-z] and [\u0430-\u044f] keysym sets do not overlap (e.g. keysym for \u0430 is Cyrilic_a, not a). Because of that most of the default keysym bindings just stop working until the layout is switched back to us. \nI am also pretty sure that the same issue exists for a number of other layouts (Ukrainian and Greek for example, should be more).\n\nI should really read i3's code to understand in detail what they do.\n\nPlease take a look when you have a chance. The most interesting file there is src/binding.c. \nFrom what I see the meaning of bindsym is different in i3. It basically says \"bind the command to all the keys the keysym can be produced from in layout N\". By default N = 1, but as @mstoeckl mentioned, it is also possible to specify which layout to use with Group[1-4].\n\nThe thing that makes me skeptical about this feature is that as a user, I really don't expect $mod+1 to be bound to a completely different keysym combination when switching layouts. If I bind a keysym, then I don't expect to trigger it when pressing keys that don't match keysyms on another layout.\n\nThis sounds reasonable, but there is another expectation: any binding should consistently work. As a result, in case of two or more layouts, only keys producing the same keysyms in all of the layouts are actually usable, and the others are the source of pain and despair.\n\nIt would be nice when implementing this to try to keep the code as simple and straightforward as possible (disclaimer: I haven't looked at the code yet).\n\nPlease consider the current implementation a prototype. It has worked for me since October, but some pieces of code will need to be changed or added to support dynamic re-translation.\nIt seems that the key decision that needs to be made is whether sway must be consistent with i3 in how bindings work.\nIn terms of implementation, I tend to believe that approach used in i3 (\"translate every keysym into keycodes and then only use keycodes\") is simplest possible, just because there would basically be only one type of bindings instead of two and the code to process keysyms might be dropped.. Here is the updated changeset.\nSummary:\n1. bindsym --to-code enables keysym to keycode translation.\n2. If there are no xkb_layout commands in the config file, the translation uses the XKB_DEFAULT_LAYOUT value.\n3. It there is one or more xkb_layout command, the translation uses the first one.\n4. If the translation is unsuccessful, a message is logged and the binding is stored as BINDING_KEYSYM.\n5. The binding keysyms are stored and re-translated when a change in the input configuration may affect the translated bindings.\nLimitations:\n1. Keysyms translated into several keycodes are not supported for now. This will complicate input processing, I am not sure this is worth it, at least right now.\n@emersion, @ddevault, please take a look when you have a chance.. > @kupospelov What about bindcode --from-sym?\nI think this should depend on the behavior of the flag. In the current implementation, bindsym --to-code works as an ordinary bindsym if the translation is not possible. This would hardly be expected when using bindcode --from-sym.\nOn the other hand, if the binding completely failed in that case, bindcode --from-sym would look fine.. > Hmm. I personally would prefer it to fail, rather than fall back to bindsym, for the same reasons one would prefer not to use implicit typecasting (i.e. less magic). Is there some edge case I'm overlooking?\nI think a certain decision needs to be made regarding the command behavior in case the translation fails. I am not sure how realistic these cases are, but I have to describe them at least.\nThe translation is triggered and may generally fail in two commands:\n1. bindcode --from-sym (a new binding cannot be translated)\n2. input (some stored bindings cannot be re-translated using the new input configuration)\nThe current implementation has the following features:\n1. If the keysym translation fails, the binding is still stored and can potentially be successfully re-translated when the input configuration changes. As a side effect, the order of input and bindsym --to-code commands does not matter, the result should be the same.\n2. It may not be expected that the input command will remove stored bindings if they cannot be re-transated. Since we use bindsym as a fallback it will not.\nIn case of bindcode --from-sym, we have some options:\n1. bindcode --from-sym:\n    1. Do not store failed bindings: the order of input and bindcode commands becomes important.\n    2. Introduce a separate list to store failed bindings and try to re-translate them when the input configuration changes: it may look strange to say the least that a command reported to be failed just started working after an input configuration change.\n2. input:\n    1. Remove stored bindings if they cannot be re-translated (and put them in the list of failed bindings if we decide to store them).\n    2. Leave such bindings as is and just log this fact: this may lead to some inconsistency when older bindings are converted using a previously defined input configuration.\nI like the fact that an explicit error message will be shown, but I think that the only viable solution with bindcode --from-sym is to implement 1.i and 2.ii with their pros and cons.\n@emersion, what do you think?. > All in all, not sure bindcode --from-sym is worth it. Thoughts?\nI agree. In addition to that, bindsym --to-code does not imply any implementation details and gives us more freedom: we can always change the fallback behavior (e.g. make it fail) and the users won't be forced to update their config files.\nIt looks like I have addressed all the review points, so this PR should be ready for a final review or can be merged.. Yep, I will need to add xkb options.\nAs for the reference, ideally we need to use xkb_keymap from the corresponding sway_keyboard instance. The issue is that input devices are created after the main config is loaded. To workaround this, we might need to add some code to update config and retranslate keysyms when the keyboard is configured somewhere in seat_add_device, but in my opinion a separate instance of xkb_keymap is not so expensive to justify the complications.. For some reason, I supposed that xkb_layout could be removed from an input configuration. This does not seem to be true, so now keysyms are re-translated if the changed input is the first one with a configured xkb_layout.. It is possible to have several configured inputs, each with a different xkb_layout. We need to check if input_config is the first one in the list, otherwise, it should not affect the translated bindings.. ",
    "xzfc": "\nSo if your layout happens to be ru while the config is processed (e.g. on reload), none of your bindings will work anymore because no key code will match the keysym?\n\nI've checked how some apps on X11 (i3, gedit, gnome-terminal) handle this (setxkbmap ru) \u2014 yes, none of the keybindings works (even the predefined ones like ^W in terminal or ^S in gedit).\nBut using ru layout alone is uncommon, most users use it together with some Latin layout (e.g. setxkbmap us,ru).. ",
    "eternal-sorrow": "any updates on this? it's very annoying. This is simple I've got layout en,ru. When I switch to en, all bindings work perfectly. When I switch to ru, all \"letter\" bindings stop working.. I could, but I'm not familiar with sway source code (yet?).\nI can see two ways of solving this: the first was proposed in PR by @kupospelov - not binding to specific symbols, but to physical keys instead.\nThe second is using sophisicated logic to determine which symbols in different layouts correspond to each other. i3 seems to use some functions from libxkbcommon-x11 for that. I think, it's not an option for wayland? Maybe there are some alternatives? Needs investigating.\nThe only thing I want to say - this needs to be fixed. You just cannot leave it as it is.. >this is the only thing I need to switch to sway\nI've already switched to sway. And it pretty much satisfies me as it is now. But this problem just annoys me from time to time.\n\nHave you tried his PR?\n\nno, not yet. . > global switch, which simply would choose which layout to use for keysym \u2192 keycode translation\nWhy don't make it like in i3 - by default use the first layout and bind in all layouts, but with Group<1-4> you can bind only in one of layouts.. I've managed to build firefox-63.0.3 with wayland support on my gentoo system using patches from fedora package. It's very stable and smooth, but I've ecountered two minor problems. Don't know if it's problems with my build or real bugs.\n\n\nSometimes firefox doesn't start right up. It starts two firefox processes, one main process and one tab process and nothing happens then, no window shows up. It outputs in terminal only this:\nAttempting load of libEGL.so\nIPDL protocol Error: Received an invalid file descriptor\nI have to kill these processes and try to start it again. After some try it starts normally and works well.\n\n\nClipboard works weird. At first it looks like bug https://bugzilla.mozilla.org/show_bug.cgi?id=1504689 - copied text is not being pasted in another applications (but I've got patch for 1504689 applied). And then, after I switched back to firefox, and after some time switched back to that application I tried to paste to, I see the text was pasted. But it took some time. Why could that happen?. The problems I see with Firefox 65 (running as native wayland application) in sway-1.0-rc1:\n\nI'm still having problems with copying text from Firefox to another application as I pointed out in https://github.com/swaywm/sway/issues/3115#issuecomment-443467939. After some experiments I found out that it only happens when the other application is on a different workspace than Firefox. I have to press paste keybinding, then switch back to workspace where the Firefox window is and then back to my application to get text pasted. And even this trick does not work with Telegram flatpak app (and maybe other Qt and/of flatpak apps, I don't know about it). I can't get text pasted in Telegram unless I move Firefox and Telegram windows on the same workspace.\nWhen I open a link from another application, it really starts loading in Firefox only when I switch back to Firefox window. Turns out it only happens when that another application is on another workspace than Firefox window, so it may be related to the first of my issues.\nSome issues with resizing Firefox window in some circumstances. For example when there is another tiled window alongside the Firefox window and then it becomes a fullscreen window, and then I close it while it's still fullscreen. Then Firefox window sometimes stays tiled to the side of the screen while there is an empty space on the other side.. > @eternal-sorrow is 3 similar to #3055?\n\nIt kind of is, as far as I can see, referenced issue happens after firefox startup, also it's probably related to firefox on Xwayland. My problem happens only with native firefox wayland application. Also it happens in very strange circumstances (I still can't reliably reproduce it).. Actually any application inconsistently responds to clicks made in 1 pixel from any screen boundary (left, right, top and bottom).. The problem started occuring only after upgrade to sway-1.0-rc1. It didn't occur on beta.2.. It's not xwayland app. TRG runs on wayland natively.. Fixed this by adding floating_maximum_size -1 x -1 to config. This should be default.. ",
    "asolopovas": "Super annoying, unfortunately. Especially for the beginners when I switch to Russian layout none of the keybindings work so I can't even switch back to British layout. Not even mod + enter works so that I could change the layout. I am pretty much locking myself out of the system as soon as I switch to russian.. ",
    "SpencerMichaels": "Ah, glad you found that issue. I was worried about exactly that, since the libinput devs seems to be a bit\u2026 averse to configuration, to put it mildly. One comment on that issue states \"There is nothing to configure at this level in the stack, this is something that would need to be sorted in the toolkits/compositor.\" I will start familiarizing myself with the sway/wlroots source to see how I can implement this, then.\nWould it be preferable if I implement this at the wlroots level and make an API that sway (and potentially other WMs) can use, or should I do it all in sway?\nIt looks like one way, if it's done via wlroots, is to modify this line to have a scale factor for the delta value. The equivalent in sway appears to be here.. Both of those work normally for me in CLion. What Jetbrains product are you using? Do you have focus-follows-mouse enabled (I don't)?. OK, implemented all of @emersion 's fixes and documented the new option in the sway-input man page. One question: is checking errno != 0 sufficient, or should I provide separate checks and messages for each possible type of error strtof can encounter, e.g. out-of-range & underflow?. Great! Thanks for the help.. Er, hold on \u2014 it looks like something is wrong with the parsing of scroll_factor now. To anyone who might merge this: don't yet.. Okay, not sure what was going on there; I may not have compiled the latest version when I last tested. Everything works now. I also realized that pointer_accel.c was also using the atof method that I had used in the first commit of this PR, so I moved the float parsing code into a parse_float function in common/util.c and changed both scroll_factor.c and pointer_accel.c to use it. It takes a const char * and returns NAN on error.\nEDIT: @ascent12 good point. Changed.. Oh dear, very sorry about the delay \u2014 somehow I didn't see your last message. I just incorporated your changes and rebased. This was a particularly ugly rebase due to a bunch of merge conflicts in util.h and util.c \u2026 looks like the final result is right, but I seem to have created a bunch of garbage intermediate commits in the process. I wasn't able to figure out a way around this.. OK, I figured I might have to do that. Still not sure what the heck happened during rebasing, so I just completely redid the changes as a single comment as @RedSoxFan suggested.. Changed the two instances of x == NAN to isnan(x) (there was also one in pointer_accel.c) and rebased. This rebase went OK.. Oh dear. Having done that, all the commits to master since I created this PR become a part of the PR itself, which is the same problem I ran into when I first tried to rebase. I'm stuck at this point; never seen this happen before. Is there some git setting that is making my rebases behave differently than would normally be expected? Still trying to resolve this; sorry for all the force-pushes that are appearing here.... Sure.\norigin    git@github.com:sxmichaels/sway.git (fetch)\norigin    git@github.com:sxmichaels/sway.git (push)\nupstream    https://github.com/swaywm/sway (fetch)\nupstream    https://github.com/swaywm/sway (push). Ah! That did it this time, I think, although strangely I could have sworn I'd tried that before. Out of curiosity, do you know what I was doing wrong when rebasing in the first place? I'm still not exactly sure. It looks like the two sets of commands you gave me should have the same effect (pulling upstream/master into master, then rebasing this PR on local master, versus directly rebasing on upstream master).\nThanks very much for the help \u2014 and sorry for all this trouble for such a simple PR!. Fixed. Let me know if you'd prefer the alternate signature instead of NAN. The other parsing functions, e.g. parse_color seem to follow the \"return a sentinel\" convention, so I suppose NAN is OK.. ",
    "ESipalis": "This should be an issue with jetbrains 2018.1 products: https://youtrack.jetbrains.com/issue/IDEA-188824. @Freyr666 it checks in list_resize method.. ",
    "pimeys": "Having the same problem with intel drivers and intellij fuzzy search. Did anybody find any workaround yet?. Were you able to get fonts to look better with the OpenJDK? It seems all my JVM needs are covered with Emacs luckily, but would like to try not to switch back to i3 if I ever need Intellij again.. > As a workaround I am currently using PHPStorm EAP with registry settings new.search.everywhere unset and with bundled JRE which does not have problem with autocomplete.\nThis has been working perfectly for me whenever I need to navigate a Scala codebase, and it makes sense to use intellij.. ",
    "francma": "\"Search everywhere\" works for me on PHPStorm 2018.2.6.\n2018.3 introduced New search popup and that is broken. It looks like sway isn't able to recognize that it is a dialog and spawns the popup next to the PHPStorm instance and then immediately closes it as it has no focus.\nPHPStorm 2018.3.log (launched PHPStorm (centered loading screen opens) -> selected project in floating window -> main window opens -> opened \"Search everywhere\" multiple times -> exit sway)\nAdding also PHPStorm 2018.2 where it is working fine for comparasion.\nPHPStorm 2018.2.log\nUsing sway 1.0-beta.2-148-g33d9de88 and PHPStorm with bundled JRE.\nWorks fine on Weston and i3wm. Tested on clean PHPStorm installation and different OpenJDKs.. Sort of solved my problem with setting boot JDK via application settings instead of setting it via environment variable. You can check your JDK version in (Menu > Help > About).\n\njre11-openjdk  \"search everywhere\" works, but \"intellisense\" popup randomly disappears and dialogs are not centered\njre10-openjdk \"search everywhere\" works, but \"intellisense\" popup randomly disappears\njre8-openjdk \"search everywhere\" works, but \"intellisense\" popup randomly disappears\nbundled-jdk \"search everywhere\" not working, \"intellisense\" popup working\n\n. Autocompletion popup hides when I select item which overflows (https://my.mixtape.moe/jntzoz.png) and then I select another one (arrow down/up). The overflow is a normal behaviour, not a bug. This happens with OpenJDK and latest sway from git. Works fine on Weston.\nAs a workaround I am currently using PHPStorm EAP with registry settings new.search.everywhere unset and with bundled JRE which does not have problem with autocomplete. . ",
    "monsieurh": "I can reproduce the bug with Rider2018.3 which is another of their products.\nI tested with focus_follows_mouse set to no, always and yes, with no success.. Out of curiosity, why not using pandoc to build the doc instead of scdoc ?. ",
    "dynaxis": "In my case, I've switched the boot JDK to OpenJDK 11 on Arch, and I can at least get the popups staying on the screen. But there is frequent flickering of screen areas and other popups instead. I use Nouveau and have problems w/ the lastest version of IntelliJ Ultimate.. @pimeys in my case, font rendering is fine, but screens are flickering here and there. I tried OpenJDK 11 on Arch and using the lastest version of Sway via AUR.. @zajca https://youtrack.jetbrains.com/issue/IDEA-202762 this seems filed 3 weeks ago.. ",
    "Agyar": "reading the pycharm.sh stored from jetbrains-toolbox, I saw it's using PYCHARM_JDK and not IDEA_JDK.\nusing alias pycharm=\"export _JAVA_AWT_WM_NONREPARENTING=1; export PYCHARM_JDK=/usr/lib/jvm/java-11-openjdk; /usr/bin/pycharm\" I managed to have shift-shift working.\n. ",
    "zajca": "I have same problem with PhpStorm. All popups (Action, Search everywhere, New ...) just blink as it creates new tile next to editor and then disappear. Dialogs like settings, print, ... are working fine.\nWhen I switch to JDK 11, dialogs working  but fonts are different.\nLeft is JDK 11 right Shipped JDK\n\n. @apreiml you are right 2018.2.5 works just fine. Is there aby bug report in jetbrains youtrack? (I didn't find any). ",
    "jupblb": "Seems to work with IntelliJ 2019.1 EAP + Jetbrains Runtime 11. (Though it's ridiculus that one has to set -Djdk.gtk.version=2 in order for JavaFX to work under Wayland...). Seems to work with IntelliJ 2019.1 EAP + Jetbrains Runtime 11. (Though it's ridiculus that one has to set -Djdk.gtk.version=2 in order for JavaFX to work under Wayland...). ",
    "eaceaser": "interestingly enough, this only appears to happen with certain forms of autocomplete. For example, variable name autocomplete works fine, but function name autocomplete does not. Maybe this isn't a WM bug?. ahh its the overflow, I couldn't figure out what the characteristic was. Thanks for that workaround property to set!. ",
    "catb0t": "is this not prone to regression? now success_object returns true when something failed. I don't have an example (on mobile), it just looks like the fix is with how success-lacking objects are specifically treated in success, rather than making failure after get_ex return true always. Happy to be wrong though. I'm not sure this will make a difference but this version attempts to make setuid and getuid syscalls directly, bypassing glibc / musl libc (hopefully). If musl libc has a bug or different behaviour in setuid, this should expose it.\nIs the output of that any different for you? My output with both the libc and syscall code is \nreal: 1000 eff: 0 saved: 0\nGained root priviledges\nreal: 1000 eff: 0 saved: 0\nDropped root priviledges\nreal: 1000 eff: 1000 saved: 1000\nUnable to recover root\nreal: 1000 eff: 1000 saved: 1000. ",
    "Ferk": "Was a decision made on this feature?\nPersonally, I'm not a huge fan of i3, but I was still drawn to sway because it's the most complete tiling window manager for wayland and has a very unix-y philosophy that I really like.\nThere are essentially only 3 points so far that for my personal use I find uncomfortable in i3, and I believe this feature combined with some scripting would help mitigate the one thing that was so far not possible to workaround sanely: the fact that the tiling in sway is manual and static instead of dynamic (unlike most tiling window managers, like dwm, awesomewm, xmonad..)\nFor the record, the other 2 points are:\n\n\nThe lack of a focus next/prev cmd. I don't mean complex alt-tab, just a key to cycle all windows in the workspace, I wouldn't really care much which direction as long as it's consistent, it might as well just be a new type of focus_wrapping that automatically moves one additional space down/right (whatever is orthogonal) after wrapping the workspace, just so that I don't have to have to bind 4 keys just for window navigation (this could be scripted, but it's annoying that such simple thing requires the entire json tree to be parsed by a script that would have to also understand how the tree is represented, it would be great if at least a command existed to get the properties of the focused container including the ids of immediate childs & parent without having to deal with json, then scripting this would be simpler and could even be done in bash iteratively)\n\n\nThe fact that you either need to have the window titlebar  decoration taking tiling space on top of every single window or no titles at all (this annoyed me a lot 10 years ago in wmii and i3.. but since then high res screens have become cheaper and it's now not a big deal, but if the aforementioned command to get current window was added I might try in the future to set up the bar so it shows the currently active window title, like dwm does and then I could disable window titles)\n\n\nThis reddit comment highlights and explains word-by-word my mayor gripes, I'm sure there are more people sharing these thoughts. Although I could do without a floating layout mode, personally. Just solving the navigation and layout inconveniences would be enough.. ",
    "apilat": "Even after enabling core dumps with ulimit -c unlimited sway does not produce a core dump when freezing the system. (I have verified core dumps are being produced for a different crashing program.)\nI am going to sleep now; tomorrow I\u2019ll try to ssh onto the machine after running sway to test if the system is working correctly apart from the graphics.\nSetting WLR_DRM_DEVICES to the full path does work to isolate a single GPU, but selecting either, the system still becomes unresponsive.. @SirCmpwn yes you're right - I should've read the man page more carefully, however even with the correct configuration no core dump is produced still. I think @emersion is right in what is happening.\nThe program is still able to regain root permissions after dropping them. I wrote this piece of code to investigate this behavior. I created the setuid executable with\ngcc setuidtest.c -o setuidtest\nsudo chown root:root setuidtest\nsudo chmod u+s setuidtest\nand I can indeed reproduce that my program is able to regain root permissions.\nI would appreciate if someone else could try to run it to verify whether it is just a quirk with my machine.. I am also definitely not running the program as root.\nEDIT: To avoid confusion, what I meant was that the RUID is not root.\n```\n$ id\nuid=1000(antek) gid=1000(antek) groups=1000(antek),4(wheel),12(audio),13(video)\n$ stat $(which sway)\n  File: /usr/local/bin/sway\n  Size: 3182384     Blocks: 6216       IO Block: 4096   regular file\nDevice: 804h/2052d  Inode: 6177135     Links: 1\nAccess: (6755/-rwsr-sr-x)  Uid: (    0/    root)   Gid: (    0/    root)\nAccess: 2018-10-29 18:53:48.347007172 +0000\nModify: 2018-10-29 18:52:57.850012581 +0000\nChange: 2018-10-29 18:53:15.584010681 +0000\n Birth: -\n``. I don't uselogindand therefore, according to your installation guide, I need tosetuidthe binary.\nIf i remove thesetuidbit, sway fails to run because it doesn't haveCAP_SYS_ADMIN.. Yes, you're right. What I meant was that I am not running the program with the real UID of root, so it should be able to drop priviledges normally (as opposed to running it with sudo, wheresetuid(getuid())` wouldn't drop them).\nThe procedure I followed to try to get the core dump of the program was\nulimit -c unlimited\necho 2 | sudo tee /proc/sys/fs/suid_dumpable\necho /root/core | sudo tee /proc/sys/kernel/core_pattern\nsway -d\nAgain, no core dump was produced which suggests that the program exited instead of crashing (as @emersion mentioned).. @emersion thanks! What's interesting, on your machine the effective uid starts out as that of your user (unlike mine, where it is already 0). Could you try out this version which explicitly setuid's to 0 (and still fails on my pc).\nMy output for reference:\nreal: 1000 eff: 0 saved: 0\nGained root priviledges\nreal: 1000 eff: 0 saved: 0\nDropped root priviledges\nreal: 1000 eff: 1000 saved: 1000\nERROR Still able to recover root\nreal: 0 eff: 0 saved: 0. @catb0t thanks for the program, but unfortunatelly the output produced is still the same. In fact, I managed to reproduce the same issue with a piece of assembler code which only performed the mentioned setuid calls. I think this is a problem with my kernel and will report it to the void developers.\nAs for sway, if I comment the last check out and recompile the code, it seems to work just fine.\nTherefore, I suggest to close this issue as the problem is beyond the scope of sway.. @logol quite interestingly this issue did turn out to come partly from XDG_RUNTIME_DIR. What I used to set this envvar up was pam_rundir.so, which turned out to set capabilities making it impossible to successfully drop root (namely SECBIT_NO_SETUID_FIXUP) because of a Void-specific patch!. ",
    "logol": "I had nearly the same problem (freezed system after sway binary execution on void linux from tty), but my binaries are built with glib\nI solved the issue by setting up required XDG variables (https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html), especially XDG_RUNTIME_DIR (others may be required too, e.g. for starting alacritty inside sway)\npeople on void linux should have a look here https://wiki.voidlinux.eu/Wayland\nquick fix, before starting sway: export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir && mkdir $XDG_RUNTIME_DIR. It seems this only happens when I do not add extra delays between the different commands e.g. press/release. Anyways it is related to libinput, I can reproduce on weston - so no sway issue... closing.. ",
    "noopro": "Thanks @emersion ! Unless I am missing something obvious, I thought that sway only supports open source drivers? I am trying to use nouveau and I thought the nouveau and nvidia modules were mutually exclusive?. Thanks @emersion ! Unless I am missing something obvious, I thought that sway only supports open source drivers? I am trying to use nouveau and I thought the nouveau and nvidia modules were mutually exclusive?. Okay, thanks! So my understanding from what you have said is that I would need to roll back to the previous wlroots-git for now and then wait for the most recent release?. Okay, thanks! So my understanding from what you have said is that I would need to roll back to the previous wlroots-git for now and then wait for the most recent release?. ",
    "azavalla": "@ddevault I'm having the exact same error output when trying to start sway on a fresh Archlinux install.\nI have Intel graphics. I have not installed/configured any nvidia drivers.\nI think this is a sway thing.. ",
    "adouzzy": "Right does work, it moves to the rightest output and then stopped.\nI just tried left. It behaves similarly as right. . To my understanding, #2952 only mentioned the swaybg process. The issue I got is the main sway process's memory increases after reload.. Too bad, I am a statistician... Valgrind is too much for me. I will try with vanilla config see if I can reproduce the problem.. ",
    "fruitloop": "Hi, I've got the same problem.\nyes, setting the displays with positive positions does work.\nhowever that means that now my external monitor (which is not always connected)\nis the \"main\" monitor position wise and my internal monitor (Surface Go) is the one that\nhas an offset.\nThe problem seems to be the negative offset though.\nEdit: my bad, just noticed the other issue. ",
    "tcpaiva": "I'm afraid I don't have anything anymore. I had to reinstall my system due to software requirements.. ",
    "cetex": "I also saw this earlier, just had a problem where the desktop was laggy, found i had 50+ swaybg processes running..\npkill swaybg -> no lagginess.\nJust tried configuration reloads, with swaybg running memory increases by 10-30MB every time i reload configuration, haven't figured out why it differs, but each time a new swaybg process is launched.\npkill swaybg -> sway still uses memory (now after 15 reloads, 217MB), but desktop is not laggy any more.\nDisable swaybg in configuration, reload, and it stops increasing in memory consumption, although memory is not released again.\nEdit: Noticed some memory is released when disabling output * bg ... went down to 205MB after disabling swaybg and killing all processes again.. ",
    "HeXXiiiZ": "I am having this issue as well. Specifically, when using the line\noutput * bg path/to/my/bg fill\nto set the background, reloading the config causes additional swaybg instances to start. The memory appears to double at each reload. (The first time this happened to me it OOMed me off the face of the earth because 2^n sneeks up on you). Killing the extraneous swaybg instances only cleans up some of this memory on the side of the sway process.\nI am pretty busy right now, but when I get less busy, I would be glad to try and find the issue. I am guessing that when the config is reloaded, the logic to determine whether a swaybg is already running has a bug and the allocation for the new instance gets heaped up.\nI built off of tag 1.0-beta-2, and found the problem happened on a recent master build as well.. ",
    "HoshiYamazaki": "Yeah, I can confirm that gaps are not saved when switching to other monitors.. Ok, works! Thanks :). Just curious (maybe not releated) but there are still bugs on mixed dpi multimonitor setup?\nWhen I clicked menu in Firefox it was opening on another screen and I had other similar glitches.. I think I used wayland version, but I'm not sure. And it was not only me, there are other people who have bugs on mixed dpi multimonitor setup:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=635134\n(Latest updates).\nI don't have now Linux machine to check it if it persist, sorry. Was just curious.. Ah I forgot - I tested in this week an newest Xwayland with sway and wlroots and it don't helped.\nWill it be fixed soon? This is only one thing that makes me stay away from Sway :/. This is probably Wine bug that occurs when using Gnome too.\nI will check it today at evening and will close issue if it's not releated to sway.. ",
    "bl33pbl0p": "How about using something else for comments? (// or / /). > (Also, it's not racy -- if the PID has been re-allocated for another process then the connection has been closed anyway)\nWhat if the connection is just kept open by also passing the file descriptor to some other process, and then the PID reuse happens?. ",
    "archshift": "Hm, reproduction's been difficult. I'll close this issue for now, but keep watch for what I'm doing the next time I see odd painting behavior.. Ah, I spotted it.\n\n(Sorry for this being a photo of my screen).\nBasically, this seems to happen intermittently when I cold-open Firefox, e.g. from booting up my computer. It paints to the correct size if I resize the window or toggle floating, etc.. ",
    "vberger": "Actually, this is a bug in waybar, which further calls layer_surface.set_size with non-zero values, opting-out of auto-configure. Sorry for the noise.. I can confirm. On my output with a scale factor of 2, the cursor has a correct size when over a window (both native wayland and xwayland), but is very small when over an empty desktop or over the UI elements (titlebars) drawn by sway.. ",
    "ojab": "\nExcuse me, but an you please re-explain why it's an issue with Russian layouts?\n\nBecause pressing $mod+x , for instance, with ru layout (the physical key, that is actually a \u0447 keysym) doesn't work like pressing $mod+x in en layout.\nIt's an issue since shortcuts are generally working in any layout (in Qt & GTK+, for example, Ctrl+q [Ctrl+\u0439] in ru closes the program).\nRight now $mod-[a-z] is not working at all in ru layout and that's a PITA: switching to the container on the right while using ru layout leads to $mod+\u0434, $mod+\u0434, $mod+\u0434, why the fuck it doesn't work, oh, change layout, $mod+l, change layout, there it is.. I have an issue with Alt+[1-9] not switching tabs (and just typing [1-9]) using latest Nightly + sway from git master.\nIt looks like https://bugzilla.mozilla.org/show_bug.cgi?id=1509152, but it's fixed according to https://github.com/swaywm/sway/issues/3115#issuecomment-441247363.\nCan anyone else reproduce it?. Filled https://bugzilla.mozilla.org/show_bug.cgi?id=1519940. ",
    "jeremejevs": "Bikeshedding, but bindcode --from-sym might be slightly more intuitive than bindsym --to-code, since, ultimately, a code gets bound, not a sym.. Bikeshedding, but bindcode --from-sym might be slightly more intuitive than bindsym --to-code, since, ultimately, a code gets bound, not a sym.. @kupospelov What about bindcode --from-sym?. @kupospelov What about bindcode --from-sym?. Hmm. I personally would prefer it to fail, rather than fall back to bindsym, for the same reasons one would prefer not to use implicit typecasting (i.e. less magic). Is there some edge case I'm overlooking?. > Thoughts?\nGiven that this appears to be less of a no-brainer than it at first seemed, it's probably better to just merge this PR as-is, and then consider adding bindcode --from-sym later, based on user feedback; the two options aren't mutually exclusive after all.. Commenting here because the PR is already merged. Limited time right now, so tried it out with my regular config, with Kanshi enabled, and it crashed in a few plugs/unplugs. Logs, backtrace. Will do more testing later today, with a clean config.\nSorry, forgot bt full in the non-MST case. I'll open a new issue for it later as well, appears to be unrelated to whether MST is enabled or not, hanged with Chromium running when testing new wlroots.\nEdit: Busy month, but hope I'll find some time this week.. Sorry, never got a chance to test, and I don't have my old setup anymore, unfortunately. I'll close this, since this appears to be an edge case that hasn't affected anybody but me in a whole month.. ",
    "electrickite": "It seems that #3049 fixed the issue for me, but leaving the issue open for now since other issues are being discussed.. It seems that #3049 fixed the issue for me, but leaving the issue open for now since other issues are being discussed.. @emersion The original issue was fixed by #3049, at least for me. . @emersion The original issue was fixed by #3049, at least for me. . Posting this here because there seems to be discussion in this thread about specific apps' tray support.\nI tried the new system tray with both Dropbox and nm-applet. Dropbox worked pretty well, although the context menu appeared in the middle of the screen rather than near the tray icon.\nnm-applet did not work as well. It was built ad run with Appindicator support. The icon did appear in the tray, but did not respond to any type of click; no menus appeared. Even stranger, when nm-applet was showing in the tray, no other tray icons could be clicked either. Once the nm-applet process was killed, the other icons began responding to clicks again.. Posting this here because there seems to be discussion in this thread about specific apps' tray support.\nI tried the new system tray with both Dropbox and nm-applet. Dropbox worked pretty well, although the context menu appeared in the middle of the screen rather than near the tray icon.\nnm-applet did not work as well. It was built ad run with Appindicator support. The icon did appear in the tray, but did not respond to any type of click; no menus appeared. Even stranger, when nm-applet was showing in the tray, no other tray icons could be clicked either. Once the nm-applet process was killed, the other icons began responding to clicks again.. @ianyfan Yes it still seems to happen on the latest build.. @ianyfan Yes it still seems to happen on the latest build.. @emersion A shell script is actually where I started this PR and I would prefer that solution as well. However, AFAIK, there is no POSIX-compliant way to invoke a login shell from a shell script.\nsh (And ex: bash run as sh) can only be invoked in login mode if ARGV[0] is prefixed with a \u201c-\u201c. The -l flag is non standard, so we can\u2019t guarantee that the user\u2019s preferred shell supports it. But, the exec command has no standard way to set ARGV[0]. Bash provides a non-standard set of exec options, -l and -a, that could be used  to do this.  zsh uses an environment variable to set ARGV[0].  I\u2019m sure other shells have their own ways.\nIt is comparatively easy to do this using POSIX C exec functions.\nSo, if we use a shell script, we would need to decide on which non-POSIX shell to use to invoke the login shell. GNOME, for example, chose bash. This may be a relatively safe choice since it is included in the LSB and, at least on Arch, is an indirect dependency of Sway.\nThoughts? Would you prefer a hard dependency on a non-POSIX shell, or the C route? My thought was that the C wrapper was so small (<100 lines) that it did not add too much complexity to Sway.. @emersion A shell script is actually where I started this PR and I would prefer that solution as well. However, AFAIK, there is no POSIX-compliant way to invoke a login shell from a shell script.\nsh (And ex: bash run as sh) can only be invoked in login mode if ARGV[0] is prefixed with a \u201c-\u201c. The -l flag is non standard, so we can\u2019t guarantee that the user\u2019s preferred shell supports it. But, the exec command has no standard way to set ARGV[0]. Bash provides a non-standard set of exec options, -l and -a, that could be used  to do this.  zsh uses an environment variable to set ARGV[0].  I\u2019m sure other shells have their own ways.\nIt is comparatively easy to do this using POSIX C exec functions.\nSo, if we use a shell script, we would need to decide on which non-POSIX shell to use to invoke the login shell. GNOME, for example, chose bash. This may be a relatively safe choice since it is included in the LSB and, at least on Arch, is an indirect dependency of Sway.\nThoughts? Would you prefer a hard dependency on a non-POSIX shell, or the C route? My thought was that the C wrapper was so small (<100 lines) that it did not add too much complexity to Sway.. > Yeah, they're the ones responsible for login, after all.\n@emersion It doesn\u2019t seem like there\u2019s consensus on where (or if?) profile scripts should be sourced in the Wayland world. Things seemed clearer when using startx or xinitrc.. @emersion Do you still feel the swayrun executable should live outside of $PATH? If so, I would suggest /usr/lib/sway/swayrun. Both Debian and Arch discourage the use of /usr/libexec and Fedora seems to allow /usr/lib/<pkg>.. @emersion Latest commit moves swayrun to libdir.\n@ddevault I believe this is ready for review.. I modeled the approach from the gnome-session wrapper. It checks /etc/shells and also does not accept nologin or false. I suppose it is probably not necessary since by the time this gets called, the DM has already decided to allow or deny a login. \nWould you prefer the check be removed?. @emersion I agree it would simplify things. Can you see any security concerns with using an \u201cunapproved\u201d login shell? chsh and friends confirm a shell is in /etc/shells before running.. Sounds reasonable. The allowed_shell check has been removed.. Thanks for the correction.. Sorry about that. Corrected.. Changed from int to size_t. Good point on errno as a return value. The only function that can set the return value should be execvp, but good to be cautious. It also improves the error messages.. ",
    "alon": "I'm not sure it is the same issue, but I want to mention on pycharm I get the same behaviour when using the search everywhere drop down:\n1. start pycharm\n2. press \"shift-shift\"\n3. a window opens and closes immediately.\n\n . ",
    "exastion": "Same issue here using de,neo and also under de without variant, but with both configured.\ninput '*' {\n    xkb_layout  de,de\n    xkb_variant neo,\n    xkb_options grp:alt_shift_toggle\n}. ",
    "jpts": "Ignore me... it was just a config typo doh. Thanks @RedSoxFan @SirCmpwn . ",
    "fredefox": "Thanks for the clarification! So Wayland has nothing similar to \"window type\"? Seems like a huge design oversight to me.... Thanks for the clarification! So Wayland has nothing similar to \"window type\"? Seems like a huge design oversight to me.... I see. Thank you!. I see. Thank you!. ",
    "chzzzh": "\nIs it really frozen or is just the keyboard not configured and therefore sway doesn't receive keyboard events?\n\nNo, sway received every needed configurations in original instance, I removed the garbage from it before debugging. But even in original one everything seems ok now, so it was kinda random. Sorry for disturbing.. @tidux, turns out it's really a problem with fonts configuration. If we'll open Rhythmbox' SoundCloud plugin for the case, it would screw up all the native GTK tabs, showing there album covers beside emojis. As far as I remember, it can be fixed with one simple line:\nsudo ln -s /etc/fonts/conf.avail/10-scale-bitmap-fonts.conf /etc/fonts/conf.d.\nOr use your local configurations' directory to apply this for your user:\n/home/$USER/.config/fontconfig/conf.d. @tidux, try out prioritizing an emoji font ahead (and don't forget to install noto-fonts-emoji package):\nsudo $EDITOR /etc/fonts/local.conf\n<?xml version=\"1.0\"?>\n<!DOCTYPE fontconfig SYSTEM \"fonts.dtd\">\n<fontconfig>\n<alias>\n        <family>serif</family>\n        <prefer>\n                <family>Noto Color Emoji</family>\n        </prefer>\n</alias>\n<alias>\n        <family>sans-serif</family>\n        <prefer>\n                <family>Noto Color Emoji</family>\n        </prefer>\n</alias>\n<alias>\n        <family>monospace</family>\n        <prefer>\n                <family>Noto Color Emoji</family>\n        </prefer>\n</alias>\n</fontconfig>. ",
    "SpeedJack": "This is the wrong place. This is (eventually) a Gentoo specific issue and should be posted on Gentoo Bug Tracker.\nAnyway I'm the maintainer of the Sway's ebuild, but I can't reproduce the issue. I've tried to build wlroots and sway with your flag config and it works fine. Right now, I'm using Sway on Gentoo with X11 backend disabled.\nFrom your build log, the problem seems caused by the fact that during Sway installation the WLR_HAS_X11_BACKEND option is set while it shouldn't (since wlroots has x11 backend disabled).\nThe only thing I can think, is a 'dirty' wlroots installation. Please, try rebuilding wlroots and sway:\nemerge -v1 dev-libs/wlroots dev-libs/sway\nIf it doesn't work, please try a low level compile with (using root):\ncd /usr/portage/dev-libs/wlroots\nebuild wlroots-0.1.ebuild merge 2>&1 > ~/wlroots.log\ncd /usr/portage/dev-libs/sway\nebuild sway-1.0_beta1.ebuild merge 2>&1 > ~/sway.log\nAnd post the content of files /root/wlroots.log, /root/sway.log and /usr/include/wlr/config.h, and the output of emerge --info dev-libs/wlroots dev-libs/sway.. See #2855 . You're right! \ud83d\udc4d . > Before I had set \"chmod a+s /usr/bin/sway\" manually after install\nIn Gentoo you should never have to do this. The ebuild should take care of everything.\nWith filecaps enabled, the ebuild should try to set the CAP_SYS_ADMIN capability on the binary, and if something goes wrong (eg. the system does not support capabilities) it should set the SUID bit.\nIf you run getcap /usr/bin/sway you should see the CAP_SYS_ADMIN set. This means that you don't have to set SUID or run Sway as root. If, in this case, the computer freezes, the problem is something else.\nFrom the logfile, Sway seems unable to read input devices. Emerge, at the end of Sway installation, should have printed this message:\nYou must be in the input group to allow sway to access input devices!\nSo you must add your user to the input group: gpasswd -a input <username>.\nIf you use ConsoleKit2 (instead of systemd/elogind), you also have to run sway with exec ck-launch-session sway, as advised by emerge at the end of installation. . The code inside the if git.found() block should be executed only if we are in a valid git repo (maybe checking if the .git directory exists?). Otherwise the else block should be executed.. ",
    "jpoppe": "Same here, running latest sway/wlroots git versions (from Arch AUR,) without the before-sleep argument swayidle works fine.. @emersion I guess the coredump is not needed anymore since you've already fixed the bug? ;) Thank you so much!\nEDIT 2: LOL, RedSoxFan fixed the bug faster then I could do the coredump :1st_place_medal: . ",
    "shibumi": "yep would be nice to have this feature in sway as well. 11/28/18 16:20:50 - [config.c:721] Error on line 67 'bindsym --whole-window $mod+button2 floating toggle': Unknown key '--whole-window' (/home/chris/.config/i3/config)\nSway Version: 0.15.2 (on Arch Linux)\nCC: @RedSoxFan @emersion . I guess the feature has been added in one of the new alpha or beta releases, correct?. ",
    "vivien": "The link seems to run Weston as a system-wide service, not a user service, which seems hacky. Starting Sway as a systemd user service would unclutter the shell profile (which is discutably the place to start it), and benefit from environment.d or dependencies such as starting graphical apps wanting sway.service.. Thanks. You type sway in your TTY every times you're logged in? What do you guys recommend?. Almost same issue here. When I unplug the HDMI cable from my laptop, windows from the external monitor get backed up to the laptop screen, when I replug the HDMI cable windows are correctly moved back to the external monitor but the whole system freezes. (This doesn't seem to happen when there's no window on the external monitor before unplugging it.)\nNote: this happens with Firefox. Without it, I experience no crash.. ",
    "webrouse": "Informations about jetbrains splash window:\njson\n{\n\"id\": 24,\n\"name\": \" \",\n\"rect\": {\n    \"x\": 638,\n    \"y\": 326,\n    \"width\": 644,\n    \"height\": 427\n},\n\"focused\": false,\n\"focus\": [\n],\n\"border\": \"csd\",\n\"current_border_width\": 2,\n\"layout\": \"none\",\n\"orientation\": \"none\",\n\"percent\": 0.1354994481236203,\n\"window_rect\": {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 644,\n    \"height\": 427\n},\n\"deco_rect\": {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 0,\n    \"height\": 0\n},\n\"geometry\": {\n    \"x\": 0,\n    \"y\": 0,\n    \"width\": 640,\n    \"height\": 400\n},\n\"window\": 23068701,\n\"urgent\": false,\n\"floating_nodes\": [\n],\n\"sticky\": false,\n\"type\": \"floating_con\",\n\"pid\": 13839,\n\"app_id\": null,\n\"marks\": [\n],\n\"window_properties\": {\n    \"class\": \"jetbrains-idea\",\n    \"instance\": \"sun-awt-X11-XDialogPeer\",\n    \"title\": \" \",\n    \"transient_for\": 23068696\n},\n\"nodes\": [\n]\n}. Intellij Idea splash screen is using csd border, set border to none fix it.\nMy workarounds for idea:\n```\nFix rendering of jetbrains splash screen and other floating windows\nfor_window [class=\"jetbrains-idea\" floating] {\n    border none\n}\nFix rendering of jetbrains fuzzy search (doble shift)\nfor_window [class=\"jetbrains-idea\"  title=\"win*\"] {\n    border none\n    floating enable\n    move position center\n    move up 300px\n}\n```. ",
    "cmdcelp": "tested. Yes keysym works. however, shouldn't every key work as is? All media keys etc. just working fine with the xev \"XLookupString and XmbLookupString\" as well and they are even manufacturer specific.. ",
    "asppsa": "Hi, thanks for getting back so fast. \nThe reason I wanted this sourced is that on Arch Linux, a bunch of environment vars get set by files in /etc/profile.d (mostly not too important, but there is the occasional thing of significance in there, like setting up Java paths). However, if you feel this is not Sway's job to fix, I understand.. My understanding is that profile files (/etc/profile, ~/.bash_profile, etc.) are only sourced by login shells (e.g. bash -l).  .bashrc would be sourced for every exec, so I could of course add something there to source /etc/profile.  My actual solution (changing the Exec= line) seems to work better than this though (although it won't source my .zprofile if I had one).\nI'm using zsh, but as you ask about /bin/sh:\n~~~\n$ /bin/sh --version\nGNU bash, version 4.4.23(1)-release (x86_64-unknown-linux-gnu)\nCopyright (C) 2016 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software; you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\n~~~\nI also found this discussion of the same issue with relation to the same issue in Gnome under wayland. It looks like there they have [some code inside of the gnome-session bash script][2] which relaunches the script in a login shell when wayland is in play.\n[2]: https://gitlab.gnome.org/GNOME/gnome-session/blob/master/gnome-session/gnome-session.in#L3. Yes, that sounds like a plan. Thanks for your help.. ",
    "jnpkrn": "\nYou might want to first try in rootston (wlroots' reference\ncompositor). I just tried the latest Flatpak nightly and it works\nthere (!). There are performance issues though\n\nThe same with sway 1.0 beta...\n\nBut scrolling is choppy\n\n...similar thing reported at b.m.o:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1493493\n\nI will try 1.0.0 beta when I have time.\n\nQuick shot COPR build for Rawhide:\nhttps://copr.fedorainfracloud.org/coprs/jpokorny/sway-testing/build/820081/. > You might want to first try in rootston (wlroots' reference\n\ncompositor). I just tried the latest Flatpak nightly and it works\nthere (!). There are performance issues though\n\nThe same with sway 1.0 beta...\n\nBut scrolling is choppy\n\n...similar thing reported at b.m.o:\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1493493\n\nI will try 1.0.0 beta when I have time.\n\nQuick shot COPR build for Rawhide:\nhttps://copr.fedorainfracloud.org/coprs/jpokorny/sway-testing/build/820081/. Works, thanks.. Works, thanks.. The issue might have been exposed with #3199.\nThanks for the fix.. The issue might have been exposed with #3199.\nThanks for the fix.. ",
    "baloo": "I tried the hg master of firefox, wlroots and sway. And I'm observing the same behavior as @JonnyMako. But I also tried to start firefox in weston, and it appears to be starting to be okay.\nI also see the IPDL protocol error errors, on both sway and weston.\nI'm not quite sure how to debug this issue. Any help to debug this further would be appreciated here.. I tried the span trick but does looks supported in sway (I tried swaymsg title_format \"<span background=\"#ff0000\">%title</span>\"). yes, does not work. It displays the <span> in the title.. I tried with \"font pango:DejaVu Sans Mono 10\" in config (deja vu is installed) but does not work for me. According to sway -d it is loaded correctly, and doesn't show any error there.. I fixed support for pango_markup in #3179 \nFor anyone needing the configuration syntax for this:\nfont pango:\"DejaVu Sans Mono 10\"\nfor_window [class=\".*\"] title_format \"<span background='#ff0000'>%title</span>\". the pango_markup works, but only the text has background, no the whole window decoration, a window not giving any title would appear empty.. Thank you!. fixed as suggested. ",
    "uwqwxing886": "@JonnyMako I was seeing the same Gdk-Message: Error reading events from display: Invalid argument error message that you posted in https://github.com/swaywm/sway/issues/3115#issuecomment-439584937. Try clearing the clipboard before launching firefox. See #3170.. Firefox is not just usable but fast and stable using the build in https://github.com/swaywm/sway/issues/3115#issuecomment-441247363 (previous comment) and the wlroots fix in https://github.com/swaywm/wlroots/pull/1384.. Is this a bug in firefox? I can report the issue in the firefox tracker.. Fixed in https://github.com/swaywm/wlroots/pull/1380.. ",
    "stransky": "\nNote that even if it works, it's very slow. That might be due to the fact Firefox creates ~50 wl_keyboard objects pretty quickly. Not sure why it happens on Sway and not on Weston.\n(In both Sway and Weston, Firefox uses wl_shm)\n\nCan you please provide a firefox backtrace where the wl_keyboard objects are created? I'm not aware of that at Firefox code. Thanks.. I see only this place - so is the wl_seat send multiple times?\nhttps://dxr.mozilla.org/mozilla-central/rev/7488645b27ac9b273d6785db04204684673b3657/widget/gtk/nsGtkKeyUtils.cpp#633. Thanks, it should be handled by https://bugzilla.mozilla.org/show_bug.cgi?id=1507475. Thanks for the confirmation, I'll backport the wl_keyboard part of the patch to Fedora Firefox package.. > > This one is likely a sway bug. Can you open a separate issue about it?\n\nWill do.\nAlso, in newer firefox-nightly wayland, selecting and copying any text from webpage crashes firefox. I still run into the problem with firefox not starting up if clipboard has content. I suspect these are related.\n\nCan you please provide a backtrace of the crash? I'd like to fix that. Thanks.. >     1. Sometimes firefox doesn't start right up. It starts two firefox processes, one main process and one tab process and nothing happens then, no window shows up. It outputs in terminal only this:\n\nAttempting load of libEGL.so\nIPDL protocol Error: Received an invalid file descriptor\nI have to kill these processes and try to start it again. After some try it starts normally and works well.\n\nThat's https://bugzilla.mozilla.org/show_bug.cgi?id=1489902. > @stransky Another thing our users reported is that sometimes menus are off-screen and/or hidden. This happens because you use subsurfaces instead of xdg-popups. Subsurfaces spanning outside of the window geometry have no guarantee to be visible, whereas xdg-popups will be more cleverly displayed by the compositor.\nThat's https://bugzilla.mozilla.org/show_bug.cgi?id=1339920. > @stransky still having issue #3233 with latest nightly. Its been pointed out that its due to using a deprecated method in firefox? Is this fixable? Like I said before no context dialogs are possible with any sort of vertical output set.\nI think it's https://bugzilla.mozilla.org/show_bug.cgi?id=1423598. ",
    "wernerb": "@stransky\nIt is very stable now, haven't had a crash since the above fixes. There are still problems:\n* Context menu's, rightclick menus, also extension windows (1password etc)  are misaligned and not following Y position of sway\nCan be repoduced with: you'l see that rightclick's / menu's will be offset.\noutput eDP-1 {\n position 0 80\n}\nSee \n\nSometimes creating a firefox window will result in it crossing its sway window boundary and I have to fullscreen toggle to return it to correct dimensions\nMoving a window from non hidpi to hidpi often results in zoomed in window. Again, fullscreen toggling fixes this.. Weirdly enough it seems to be the vertical position. horizontal position is fine so try to set your monitors to \n\noutput $monitor1 pos 0,1400 res 1920x1080 scale 2\noutput $monitor2 pos 1920,1400 res 1920x1080. @emersion done in #3233. @stransky still having issue #3233 with latest nightly. Its been pointed out that its due to using a deprecated method in firefox? Is this fixable? Like I said before no context dialogs are possible with any sort of vertical output set.. I can reproduce this. ",
    "tallandtree": "I've got a similar issues today with Firefox on fedora 29 with the latest patches of both: it crashes frequently and gives other browser issues. But Chrome crashed as well just now, so not sure what to think of it.... ",
    "firat": "\nI have an issue with Alt+[1-9] not switching tabs (and just typing [1-9]) using latest Nightly + sway from git master.\nIt looks like https://bugzilla.mozilla.org/show_bug.cgi?id=1509152, but it's fixed according to #3115 (comment).\nCan anyone else reproduce it?\n\nHappening to me too with Fedora 29, Sway & wlroots master and Firefox 66 Beta.. ",
    "lcandeago": "Indeed, I was using the latest master, but previously I had built wlroots without specifying the --prefix=/usr, hence sway was picking up the wlroots version in /usr/local/lib instead of the newly compiled one in /usr/lib\nAfter removing the /usr/local wlroots version it works!\nSorry for the fuzz.. ",
    "bool3max": "Alright, thanks for the input. SWAY_CURSOR_THEME is still listed under the ENVIRONMENT VARIABLES section of the sway 1.0-beta manpage, which is why I thought it might have an effect.. Thank you! How hard would it be to make this a configurable property inside the config file? It's a shame that they're hardcoded.. ",
    "fdlamotte": "You might be looking for TITLEBAR_BORDER_THICKNESS and TITLEBAR_V_PADDING in include/sway/tree/container.h, I changed their values to 0 recompiled and now I have thin titlebars ;). I've been toying around with it a little, here is a little patch, just a POC, It has been a long time since I wrote any meaningfull line of code, so the quality should be considered very low. I've proposed three commands : titlebar_v_padding titlebar_h_padding (titlebar_border_width) titlebar_border_thickness\nRegards\npatch.txt\n. I'm new to this but interested, I read the guidelines and go through the process. Thank you for the help, it seems easier than I thought (remembered) to contribute to projects . thanks for the review, it should be fixed ;). I don't know if I did the squashing well. I'm not that familiar with git ...\nI did a \"git rebase interactive HEAD~6\" and then I had to do a \"git pull\" before doing the push ... \nIt does not help that I quickly set up an old PC at home to do the job while my laptop stayed at work so I will try to tidy the mess tomorow if I did things wrong.. > Hmm. It didn't help. If you have origin set to your fork and upstream set to this repo, you can do this:\n\nshell\ngit fetch upstream\ngit rebase upstream/master\ngit rebase -i upstream/master # Replace \"pick\" by \"squash\", except the first one\ngit push -f\n\nThank for the advice, I think my last push was not better than the other ;) I've just seen your msg. Things seems cleaner now, don't know why sr.ht fails the build though ...\nMy error was mainly not to fetch and rebase with upstream ... \nShould I remove titlebar_h_padding and titlebar_v_padding commands since the titlebar_padding one replaces both ? . > > Should I remove titlebar_h_padding and titlebar_v_padding commands since the titlebar_padding one replaces both ?\n\nYeah\n\nOk, done\n. You're right, I was just lazy trying to find how to do it before knowing if my changes would even work ;)\nI did an output_damage on all output, but it was not enough, had to call arrange_workspace on all displayed workspaces too \nI kept a separate commit, will squash everything after review. Great, thank you for assisting me in this contrib. I hope I'll have other opportunities to help. You do a good job !. should I squash the two commits in one ?. should I squash the two commits in one ?. I don't think so \ntitlebar_border_thickness is only used in render_titlebar (from sway/desktop/render.c), which is called by render_containers/render_container/render_workspace/output_render/damage_handle_frame\nThe arrangement process seems to be independant from the window rendering process. This seems good to me ;)\nBut i've only started to read the code with this PR so I may be missing something. containers stay the same, the size of the inner window (application) changes. I see ...\nI'll look for hardcoded values in arrange functions (the values I removed were not used over there) and try to see if arranging uses any value for the titlebar size ... but since the height of titlebars depend on the size of the font I don't know how an hardcoded value could be used\nby the way, I've set up my environment with nested tabbed and split containers to visualize what happens, the rendering looks fine .... ",
    "yannick": "@philipflohr which sway version? i think it worked for me in an older version.\nas you can see in the title bar its not an xwayland window. and funnily enough in xwayland it works for me correctly. @emersion \nhttps://gist.github.com/8c7fde478fc842bfc6e948676c8546eb\n. -> sway version 1.0-beta.1-203-geda3bfee (Nov 17 2018, branch 'master')\nwith sway started from console the whole thing crashes when i unplug. voila:\n```\n  ~ coredumpctl gdb sway\n           PID: 13300 (sway)\n           UID: 1000 (yannick)\n           GID: 1001 (yannick)\n        Signal: 11 (SEGV)\n     Timestamp: Sun 2018-11-18 01:04:24 CET (1min 28s ago)\n  Command Line: sway\n    Executable: /usr/bin/sway\n Control Group: /user.slice/user-1000.slice/session-1.scope\n          Unit: session-1.scope\n         Slice: user-1000.slice\n       Session: 1\n     Owner UID: 1000 (yannick)\n       Boot ID: feeb3c98dff641af9a46042d07d9826c\n    Machine ID: 64d41d1d5a12442aa7a00f77e3bab28e\n      Hostname: xy1\n       Storage: /var/lib/systemd/coredump/core.sway.1000.feeb3c98dff641af9a46042d07d9826c.13300.1542499464000000.lz4\n       Message: Process 13300 (sway) of user 1000 dumped core.\n            Stack trace of thread 13300:\n            #0  0x00005577ff1fb2e2 node_set_dirty (sway)\n            #1  0x00005577ff1d7c1d seat_set_raw_focus (sway)\n            #2  0x00005577ff1d7e44 seat_set_focus (sway)\n            #3  0x00005577ff1d686b handle_seat_node_destroy (sway)\n            #4  0x00005577ff1f6d68 wl_signal_emit (sway)\n            #5  0x00005577ff1f714a container_begin_destroy (sway)\n            #6  0x00005577ff1fe469 view_unmap (sway)\n            #7  0x00005577ff203e5b handle_unmap (sway)\n            #8  0x00007fcf7037d4ee wlr_signal_emit_safe (libwlroots.so.0)\n            #9  0x00007fcf70341814 xsurface_unmap (libwlroots.so.0)\n            #10 0x00007fcf70341850 xwayland_surface_destroy (libwlroots.so.0)\n            #11 0x00007fcf70343945 xwm_destroy (libwlroots.so.0)\n            #12 0x00007fcf703405b6 xwayland_finish_server (libwlroots.so.0)\n            #13 0x00007fcf70340ffe xwayland_finish_server (libwlroots.so.0)\n            #14 0x00007fcf703b7bef n/a (libwayland-server.so.0)\n            #15 0x00007fcf703b7de1 wl_client_destroy (libwayland-server.so.0)\n            #16 0x00007fcf703b7edb n/a (libwayland-server.so.0)\n            #17 0x00007fcf703b9702 wl_event_loop_dispatch (libwayland-server.so.0)\n            #18 0x00007fcf703b82ac wl_display_run (libwayland-server.so.0)\n            #19 0x00005577ff1c9cf6 server_run (sway)\n            #20 0x00005577ff1c934d main (sway)\n            #21 0x00007fcf6ff03223 __libc_start_main (libc.so.6)\n            #22 0x00005577ff1bcb6e _start (sway)\n\n            Stack trace of thread 13301:\n            #0  0x00007fcf6fecbafc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007fcf6d3a91ac n/a (i965_dri.so)\n            #2  0x00007fcf6d3a8ee8 n/a (i965_dri.so)\n            #3  0x00007fcf6fec5a9d start_thread (libpthread.so.0)\n            #4  0x00007fcf6ffdab23 __clone (libc.so.6)\n\nGNU gdb (GDB) 8.2\nCopyright (C) 2018 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later http://gnu.org/licenses/gpl.html\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.\nType \"show copying\" and \"show warranty\" for details.\nThis GDB was configured as \"x86_64-pc-linux-gnu\".\nType \"show configuration\" for configuration details.\nFor bug reporting instructions, please see:\nhttp://www.gnu.org/software/gdb/bugs/.\nFind the GDB manual and other documentation resources online at:\n    http://www.gnu.org/software/gdb/documentation/.\nFor help, type \"help\".\nType \"apropos word\" to search for commands related to \"word\"...\nReading symbols from /usr/bin/sway...done.\n[New LWP 13300]\n[New LWP 13301]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated by `sway'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x00005577ff1fb2e2 in node_set_dirty (node=0x0) at ../sway/sway/tree/node.c:33\n33  ../sway/sway/tree/node.c: No such file or directory.\n[Current thread is 1 (Thread 0x7fcf6dbba9c0 (LWP 13300))]\n(gdb) bt full\n0  0x00005577ff1fb2e2 in node_set_dirty (node=0x0) at ../sway/sway/tree/node.c:33\n1  0x00005577ff1d7c1d in seat_set_raw_focus (seat=0x557800f0cca0, node=0x557800ed4e80) at ../sway/sway/input/seat.c:643\n    seat_node = 0x557800ed4fa0\n\n2  0x00005577ff1d7e44 in seat_set_focus (seat=0x557800f0cca0, node=0x557801403c60) at ../sway/sway/input/seat.c:713\n    last_focus = 0x557800ed4e80\n    last_workspace = 0x557800ed4e80\n    new_workspace = 0x557800ed4e80\n    container = 0x557801403c60\n    new_output = 0x0\n    new_output_last_ws = 0x0\n\n3  0x00005577ff1d686b in handle_seat_node_destroy (listener=0x5578013dd0b0, data=0x5578013dce90) at ../sway/sway/input/seat.c:182\n    seat_node = 0x5578013dd090\n    seat = 0x557800f0cca0\n    node = 0x5578013dce90\n    parent = 0x0\n    focus = 0x5578013dce90\n    needs_new_focus = true\n    next_focus = 0x557801403c60\n\n4  0x00005577ff1f6d68 in wl_signal_emit (signal=0x5578013dcec0, data=0x5578013dce90) at /usr/include/wayland-server-core.h:468\n    l = 0x5578013dd0b0\n    next = 0x5578013dcec0\n\n5  0x00005577ff1f714a in container_begin_destroy (con=0x5578013dce90) at ../sway/sway/tree/container.c:98\n6  0x00005577ff1fe469 in view_unmap (view=0x5578013dc2f0) at ../sway/sway/tree/view.c:637\n    parent = 0x0\n    ws = 0x557800ed4e80\n    seat = 0x7fcf6f432060 <ffi_type_pointer>\n\n7  0x00005577ff203e5b in handle_unmap (listener=0x5578013dc530, data=0x5578013dbc60) at ../sway/sway/desktop/xwayland.c:391\n    xwayland_view = 0x5578013dc2f0\n    view = 0x5578013dc2f0\n    __func__ = \"handle_unmap\"\n\n8  0x00007fcf7037d4ee in wlr_signal_emit_safe (signal=signal@entry=0x5578013dbdd8, data=data@entry=0x5578013dbc60) at ../util/signal.c:29\n    pos = 0x5578013dc530\n    l = 0x5578013dc530\n    cursor = {link = {prev = 0x5578013dc530, next = 0x7ffd547bc350}, notify = 0x7fcf7037d460 <handle_noop>}\n    end = {link = {prev = 0x7ffd547bc330, next = 0x5578013dbdd8}, notify = 0x7fcf7037d460 <handle_noop>}\n\n9  0x00007fcf70341814 in xsurface_unmap (surface=0x5578013dbc60) at ../xwayland/xwm.c:772\n10 0x00007fcf70341850 in xwayland_surface_destroy (xsurface=0x5578013dbc60) at ../xwayland/xwm.c:301\n    child = <optimized out>\n    next = <optimized out>\n\n11 0x00007fcf70343945 in xwm_destroy (xwm=0x55780132f620) at ../xwayland/xwm.c:1428\n    xsurface = <optimized out>\n    tmp = 0x5578013c3400\n    xwm = 0x55780132f620\n\n12 0x00007fcf703405b6 in xwayland_finish_server (wlr_xwayland=wlr_xwayland@entry=0x557800de7390) at ../xwayland/xwayland.c:162\n13 0x00007fcf70340ffe in xwayland_finish_server (wlr_xwayland=0x557800de7390) at ../xwayland/xwayland.c:221\n    wlr_xwayland = 0x557800de7390\n\n14 0x00007fcf70340ffe in handle_client_destroy (listener=0x557800de73a8, data=) at ../xwayland/xwayland.c:221\n    wlr_xwayland = 0x557800de7390\n\n15 0x00007fcf703b7bef in  () at /usr/lib/libwayland-server.so.0\n16 0x00007fcf703b7de1 in wl_client_destroy () at /usr/lib/libwayland-server.so.0\n17 0x00007fcf703b7edb in  () at /usr/lib/libwayland-server.so.0\n18 0x00007fcf703b9702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n19 0x00007fcf703b82ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n20 0x00005577ff1c9cf6 in server_run (server=0x5577ff222b20 ) at ../sway/sway/server.c:190\n21 0x00005577ff1c934d in main (argc=1, argv=0x7ffd547bc878) at ../sway/sway/main.c:411\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x5577ff20bb94 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5577ff20bb99 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5577ff20bba0 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5577ff20bba9 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5577ff20bbaf \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5577ff20bbb7 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5577ff20bbbf \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x5577ff20bbce \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x5577ff20bbde \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5577ff20b750 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n```\nfrom what i read, the dirty node is already deallocated?!\nedit: i could unplug when i first moved all windows to the internal screen\n. this log is when i detached the screen and the whole machine went black (sometimes i can switch to another tty and bring it back, not this time)\nhttps://gist.github.com/yannick/4c0b7212a15d95f34edbf4fb462aae95\nthis one is the following workflow:\nstart firefox (wayland) and plugin the dock/screen:\nhttps://gist.github.com/yannick/e78e0103b2906bf3006cbee3dd54f4b9\nresult: firefox crashes\n. update: i just attached an eizo screen via usb-c, there it works. \nso its either something with thunderbolt or the lenovo dock.\ni will test 2 other TB docks that i have here. @sydneymeyer  OWC dock was similar behavior, TB15 dock i could not test as i sold it. \n . i now switched to a Caldigit TB3 Dock and it works much better. so the problem seems to be within the timing when devices are getting online it seems. how does gnome make it work then and could that be enabled too temporary? . ",
    "jameswalmsley": "I've also just experienced this with my Thinkpad dock today. I'll try to reproduce again and get extra information if that would help.. I've also just experienced this with my Thinkpad dock today. I'll try to reproduce again and get extra information if that would help.. ",
    "yglukhov": "Another stack trace happening when unplugging external usb-c displayport monitor:\n```\n0  0x00007f47c3a0ed7f raise (libc.so.6)\n1  0x000055655bf497d8 _sway_assert (sway)\n2  0x000055655bf0d1ca handle_layer_shell_surface (sway)\n3  0x00007f47c3e7614e wlr_signal_emit_safe (libwlroots.so.0)\n4  0x00007f47c3e672e5 layer_surface_role_commit (libwlroots.so.0)\n5  0x00007f47c3e703ea surface_commit_pending (libwlroots.so.0)\n6  0x00007f47c3e70708 surface_commit (libwlroots.so.0)\n7  0x00007f47c2f276d0 ffi_call_unix64 (libffi.so.6)\n8  0x00007f47c2f270a0 ffi_call (libffi.so.6)\n9  0x00007f47c3eb86ff n/a (libwayland-server.so.0)\n10 0x00007f47c3eb50a3 n/a (libwayland-server.so.0)\n11 0x00007f47c3eb6702 wl_event_loop_dispatch (libwayland-server.so.0)\n12 0x00007f47c3eb52ac wl_display_run (libwayland-server.so.0)\n13 0x000055655bf0b4e8 server_run (sway)\n14 0x000055655bf0ab3f main (sway)\n15 0x00007f47c39fb223 __libc_start_main (libc.so.6)\n16 0x000055655befdb9e _start (sway)\n. Full stack trace:\n0  0x00007f47c3a0ed7f in raise () at /usr/lib/libc.so.6\n1  0x000055655bf497d8 in _sway_assert (condition=false, format=0x55655bf500b0 \"[%s:%d] %s:cannot auto-assign output for layer\")\nat ../sway/common/log.c:27\n    args = {{gp_offset = 40, fp_offset = 48, overflow_arg_area = 0x7ffc888d8f10, reg_save_area = 0x7ffc888d8e50}}\n\n2  0x000055655bf0d1ca in handle_layer_shell_surface (listener=0x55655bf66c08 , data=0x55655e42b2c0)\nat ../sway/sway/desktop/layer_shell.c:382\n    output = 0x0\n    seat = 0x55655dfbffe0\n    layer_surface = 0x55655e42b2c0\n    server = 0x55655bf66ba0 <server>\n    __func__ = \"handle_layer_shell_surface\"\n    sway_layer = 0x7f47c15e4da6\n    output = 0xef95614f40370f00\n    old_state = \n      {anchor = 1581060832, exclusive_zone = 21861, margin = {top = 1077350144, right = 4019544399, bottom = 1581744720, left = 21861}, keyboard_interactive = 2, desired_width = 0, desired_height = 1575599600, actual_width = 21861, actual_height = 1581060832}\n\n3  0x00007f47c3e7614e in wlr_signal_emit_safe (signal=0x55655de9be30, data=data@entry=0x55655e42b2c0) at ../util/signal.c:29\n    pos = 0x55655bf66c08 <server+104>\n    l = 0x55655bf66c08 <server+104>\n    cursor = {link = {prev = 0x55655bf66c08 <server+104>, next = 0x7ffc888d9010}, notify = 0x7f47c3e760c0 <handle_noop>}\n    end = {link = {prev = 0x7ffc888d8ff0, next = 0x55655de9be30}, notify = 0x7f47c3e760c0 <handle_noop>}\n\n4  0x00007f47c3e672e5 in layer_surface_role_commit (wlr_surface=) at ../types/wlr_layer_shell_v1.c:293\n    surface = 0x55655e42b2c0\n    __PRETTY_FUNCTION__ = \"layer_surface_role_commit\"\n\n5  0x00007f47c3e703ea in surface_commit_pending (surface=surface@entry=0x55655e3d12e0) at ../types/wlr_surface.c:372\n    invalid_buffer = false\n    subsurface = 0x55655e3d14c8\n\n6  0x00007f47c3e70708 in surface_commit (client=, resource=) at ../types/wlr_surface.c:444\n    surface = 0x55655e3d12e0\n    subsurface = <optimized out>\n\n7  0x00007f47c2f276d0 in ffi_call_unix64 () at /usr/lib/libffi.so.6\n8  0x00007f47c2f270a0 in ffi_call () at /usr/lib/libffi.so.6\n9  0x00007f47c3eb86ff in  () at /usr/lib/libwayland-server.so.0\n10 0x00007f47c3eb50a3 in  () at /usr/lib/libwayland-server.so.0\n11 0x00007f47c3eb6702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n12 0x00007f47c3eb52ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n13 0x000055655bf0b4e8 in server_run (server=0x55655bf66ba0 ) at ../sway/sway/server.c:190\n14 0x000055655bf0ab3f in main (argc=1, argv=0x7ffc888d97f8) at ../sway/sway/main.c:414\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x55655bf4fc54 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55655bf4fc59 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55655bf4fc60 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x55655bf4fc69 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x55655bf4fc6f \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55655bf4fc77 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x55655bf4fc7f \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x55655bf4fc8e \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55655bf4fc9e \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x55655bf4f810 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n```. ",
    "prometheanfire": "huh, having the same issue with my tb3 dock (2017 X1C with this dock https://support.lenovo.com/us/en/solutions/acc100356 ).  My sway -d log is linked below.\nhttps://bpaste.net/raw/3e514f7e46a9. Side note, I haven't been able to switch to another tty and have to do a hard shutdown.  (ACPI responds, systemd kills stuff as it normally would (killing sway and restoring console output while shutting down)).. here's another log https://mthode.org/sway.debug2.log.xz. iirc beta2 was still cap_sys_admin as was the original 1.0-rc1.  1.0-rc1-r1, 1.0-rc2 and 9999 were changed to use suid.\n fowners root:0 /usr/bin/sway                                                                                         \n fperms 4511 /usr/bin/sway. can you give the output of `id` as well?  video, input and users groups could help (though I think video is mainly for webcam).. if only it were packaged (since the release notes said not to...). fair enough. ok, this is what's happening on rc1\n\n\ndock\nauto enables screens (new behavior) (2 external, 1 internal display in use)\nrun 'dock' script to get the expected layout (3 external displays in use)\ndisconnect and wait for internal display to come back (it doesn't)\nreconnect dock and hope displays come back (they are active but non-responsive)\nsubmit updated bug report\n\nhere's the debug log: https://paste.pound-python.org/show/XDvQiwoR98sZcW0yFrJ1/. here's the docking toggle script https://paste.pound-python.org/show/HQqVi9iOtIYpgDlDVGDL/\nI think the explicit disable of the internal display causes no outputs to be available (possibly expected behaviour, should make a UDEV thing to re-enable probably).  Though not coming back on redock still sounds like a bug.. I've also had a config reload (making the internal display Output eDP-1 'Unknown 0x058B 0x00000000' (inactive)) followed by the dock script to undock cause sway to crash, don't have a debug log of that (hasn't reproduced yet).  Right now I'm going to add a sleep of 0.1s to see if it's a problem with the CRTCs not fully de-initializing and becoming available or something.. Should sway enable a monitor immediately when plugged in?  I wonder what happens if you have only one virtual desktop and you plug a monitor in, the second monitor wouldn't have a desktop to display would it?. nevermind on the second part (I don't see an option to define workspaces in the config).\nIf all workspaces were assigned to outputs and a new output was plugged in, what would happen?. that debug log is probably more to do with the https://github.com/swaywm/sway/issues/3136 bug. hmm, might be seeing this on my tb dock at work.  will post logs if I can reproduce on rc1. Sounds related, I'm not sure I was able to reproduce without xwayland apps running, though the undock'd outputs were disabled.  Did it lock up or actually crash?  (mine is a lock up). the normal way I do screenshots won't work, but I'll take a photo (grim isn't package, might do that some time).. https://www.youtube.com/watch?v=n9700mnxaUs. yep, that was it, thanks. ",
    "FlorianFranzen": "As soon as #3340 is working and merged, you should be able to bind the lid switch event to toggling the associated output.. ",
    "SDEagle": ":thinking: just tried that build out - I didn't get any autocomplete at all - so unable to verify if it's actually fixed. Also while looking through the sublime forums I found this thread https://forum.sublimetext.com/t/build-3183-save-on-focus-lost-and-about-problems/40772/5 so seems like there are still some bugs somewhere... I wonder what Gnome on Wayland does differently so that the whole issue is avoided.... Yes. Just tried it out again. With sway 1.0-beta.2-93-ga96e8674 and wlroots 0.2.r65.ge2c216a4 and the latest stable sublime (3176) there are still focus issues. I should mention that they changed slightly. Currently, a (supposedly wrong) focus lost event seems to happen whenever to autocomplete popup is closed. The issues on focus beeing lost when the autocomplete popup appears seem to be resolved though. The latest sublime dev build (3184) shows still no autocomplete at all.. Allright, with sublime dev build 3186 the problem seems to be fixed, so I'm going to close this.. ",
    "mankesca": "I can confirm too, I have the same problem with a scale factor of 2 too.. ",
    "terminalnode": "Can confirm as well. When multiple displays are connected it looks fine on the displays that aren't scaling (which is to be expected I suppose).\nInterestingly, this topic reminded me to change my cursor theme and after doing so (using lxappearance) the cursor scale as it's supposed to.. Possibly related: for me reloading the config file (the $mod+c command) ruins scaling.\nThese are the configurations I've tried to set my scaling with:\noutput eDP-1 pos 0 0 res 2560x1600 scale 1.9\nand\noutput eDP-1 pos 0 0 res 2560x1600\noutput eDP-1 scale 1.9\nI've also tried other scaling factors and it makes no difference.. OK. The new issue has ID #3277.. Yes, that fixes it. Thank you.. I've had the same issue with Stellaris. Furthermore when I have two screens connected and start the game on the non-scaled screen it still has problems displaying as shown in the screenshot below.\nThis is with the game set to fullscreen by the way, but I've had no luck with the other modes either.\n\n. Maybe try to start with the default config file, then add and remove things as you go along. I think by default this is available in /etc/sway/config\nAs Marteon said your config file doesn't really contain much. There's literally just a mod-key definition and volume control. You need some controls for navigating workspaces, input/output configuration, probably want a statusbar as well.. Oh, nevermind. It seems I'm stupid. I didn't realise this was a bug, I thought it was just a feature that wasn't implemented yet. In producing the bug report I realised it was my fault all along as I was using commas to separate the output names, i.e.: workspace 6 output DP-1, DP-2, HDMI-1 etc instead of workspace 6 output DP-1 DP-2 HDMI-1.. ",
    "koysean": "I also have the same problem. I have a scaling factor of 1.25, and usually the cursor looks larger on the desktop.\nI am getting some strange behavior when changing the scaling factor and refreshing sway. I changed the factor to 1.5, and the cursor was still larger on the empty desktop. However, after changing back to 1.25, the cursor is now remaining at a consistent size. After a restart, the behavior resets, and the cursor is enlarged on desktop again.. I also have the same problem. I have a scaling factor of 1.25, and usually the cursor looks larger on the desktop.\nI am getting some strange behavior when changing the scaling factor and refreshing sway. I changed the factor to 1.5, and the cursor was still larger on the empty desktop. However, after changing back to 1.25, the cursor is now remaining at a consistent size. After a restart, the behavior resets, and the cursor is enlarged on desktop again.. ",
    "bitthief": "Can confirm also. I use two screens with different scales [1.0 (2560x1440) and 2.0 (3840x2160)]. The cursor size is inconsistent between the screens and also between the swaybar / empty desktop, apps and XWayland apps. The cursor theme and size appear to be overridden in the code:\nhttps://github.com/swaywm/sway/blob/4879d40695047a4c493bd8871d810c543978a869/sway/server.c#L144-L154\nI've written this patch which improves things:\n```\n--- a/sway/server.c 2019-01-15 13:55:14.869123884 +0200\n+++ b/sway/server.c 2019-01-15 13:54:10.251126412 +0200\n@@ -142,15 +142,15 @@ void server_fini(struct sway_server *ser\n }\nbool server_start(struct sway_server server) {\n-   // TODO: configurable cursor theme and size\n-   int cursor_size = 24;\n-   const char cursor_theme = NULL;\n-\n-   char cursor_size_fmt[16];\n-   snprintf(cursor_size_fmt, sizeof(cursor_size_fmt), \"%d\", cursor_size);\n-   setenv(\"XCURSOR_SIZE\", cursor_size_fmt, 1);\n-   if (cursor_theme != NULL) {\n-       setenv(\"XCURSOR_THEME\", cursor_theme, 1);\n+    int cursor_size = (int) strtoul(getenv(\"XCURSOR_SIZE\"), NULL, 10);\n+    if (cursor_size < 0 || cursor_size > 64) {\n+        char cursor_size_fmt[16];\n+        snprintf(cursor_size_fmt, sizeof(cursor_size_fmt), \"%d\", 24);\n+        setenv(\"XCURSOR_SIZE\", cursor_size_fmt, 1);\n+    }\n+    char *cursor_theme = getenv(\"XCURSOR_THEME\");\n+   if (!cursor_theme) {\n+       setenv(\"XCURSOR_THEME\", \"whiteglass\", 1);\n    }\n#if HAVE_XWAYLAND\n```\nAlso make sure to define the XCURSOR_PATH env variable to a correct location containing your cursor themes. I'm running Gentoo and the xcursor-themes package installs all X11 cursors to /usr/share/cursors/xorg-x11, which does not fall under the wlroots/xcursor search paths, so I need to define it manually before I start sway.\nhttps://github.com/swaywm/wlroots/blob/a22311ec76802d2d8eb4bc3fcb3e9b713f7cd1c6/xcursor/xcursor.c#L612-L637\n. Can confirm also. I use two screens with different scales [1.0 (2560x1440) and 2.0 (3840x2160)]. The cursor size is inconsistent between the screens and also between the swaybar / empty desktop, apps and XWayland apps. The cursor theme and size appear to be overridden in the code:\nhttps://github.com/swaywm/sway/blob/4879d40695047a4c493bd8871d810c543978a869/sway/server.c#L144-L154\nI've written this patch which improves things:\n```\n--- a/sway/server.c 2019-01-15 13:55:14.869123884 +0200\n+++ b/sway/server.c 2019-01-15 13:54:10.251126412 +0200\n@@ -142,15 +142,15 @@ void server_fini(struct sway_server *ser\n }\nbool server_start(struct sway_server server) {\n-   // TODO: configurable cursor theme and size\n-   int cursor_size = 24;\n-   const char cursor_theme = NULL;\n-\n-   char cursor_size_fmt[16];\n-   snprintf(cursor_size_fmt, sizeof(cursor_size_fmt), \"%d\", cursor_size);\n-   setenv(\"XCURSOR_SIZE\", cursor_size_fmt, 1);\n-   if (cursor_theme != NULL) {\n-       setenv(\"XCURSOR_THEME\", cursor_theme, 1);\n+    int cursor_size = (int) strtoul(getenv(\"XCURSOR_SIZE\"), NULL, 10);\n+    if (cursor_size < 0 || cursor_size > 64) {\n+        char cursor_size_fmt[16];\n+        snprintf(cursor_size_fmt, sizeof(cursor_size_fmt), \"%d\", 24);\n+        setenv(\"XCURSOR_SIZE\", cursor_size_fmt, 1);\n+    }\n+    char *cursor_theme = getenv(\"XCURSOR_THEME\");\n+   if (!cursor_theme) {\n+       setenv(\"XCURSOR_THEME\", \"whiteglass\", 1);\n    }\n#if HAVE_XWAYLAND\n```\nAlso make sure to define the XCURSOR_PATH env variable to a correct location containing your cursor themes. I'm running Gentoo and the xcursor-themes package installs all X11 cursors to /usr/share/cursors/xorg-x11, which does not fall under the wlroots/xcursor search paths, so I need to define it manually before I start sway.\nhttps://github.com/swaywm/wlroots/blob/a22311ec76802d2d8eb4bc3fcb3e9b713f7cd1c6/xcursor/xcursor.c#L612-L637\n. ",
    "benjaminbauer": "Thanks @emersion (Simong?)!\nNoob question: Is there a way I can \"activate\" that protocol simply by configuration, or would this require a change in sway or wayland itself (the protocol in question is still declared \"unstable\")?. Thanks @emersion (Simong?)!\nNoob question: Is there a way I can \"activate\" that protocol simply by configuration, or would this require a change in sway or wayland itself (the protocol in question is still declared \"unstable\")?. ",
    "mathroc": "I'm not sure this is it, I'm using make and it works well for web notifications. the \"update notification\" is something different\nit's similar to this but anchored to the menu button:\n\nbut not exactly like this because this one is correctly positioned, I'll post a screenshot when I get a new notification\nbesides, the \"update notification\" was positioned correctly before the beta. it didn't take long to have another one:\n\n@emersion even though it worked with sway 0.15 you think it could be related to xwayland and not sway ?. ok :+1:  I'm leaving this open then. yes that's using Xwayland, it's supposed to have basic wayland support but does not work well enough for me if I start it with GDK_BACKEND=wayland. ",
    "Adonai": "Hi! I'm the author of original issue, thanks for taking your time to implement this!\n\nIn my case operations of adding/removing are very rare, whereas traversing happens often, so I need a dynamic array.\n\nWe know all the layouts once Sway is initialized/reloaded, can we create an array with that size and pin it to every view?. ",
    "h0tbird": "Also: https://github.com/swaywm/sway/blob/d14a627c106327340fb04876ac5a2d3403f9cfc9/swayidle/swayidle.1.scd#L52. :meh: sorry for the duplicate, this did the trick:\nswaymsg input 1739:1751:Apple_SPI_Touchpad events toggle enabled disabled\nthanks!. ",
    "vperilla": "I am using factional scaling\n\n. coredumpctl output\nwlroots version aur/wlroots-git r3030.73423c98-1. Updated wlroots to wlroots-git 0.2.r18.gfdb67ff6-1\nbut have the same error. I see this output on dmesg\n285.789972] sway[2637]: segfault at 8 ip 00007fc6083f1080 sp 00007ffea8680b58 error 4 in libwayland-server.so.0.1.0[7fc6083eb000+7000]. If I temporaly remove this line, I can run sway from my i3 session but crash eventually\nhttps://github.com/swaywm/sway/blob/dbf8e1cead12ba775a9a702140576c5f7406c380/sway/server.c#L100. In my case with /usr/bin/sway also get segmentation fault . I can run sway with the next packages:\nsway version 1.0-beta.2-33-g01420193 (last version)\nwlroots version wlroots-git-0.2.r10.g273e110b-1-x86_64.pkg.tar.xz (2018-12-03)\nError happens If update wlroots to a newer version (since wlroots-git-0.2.r12.g3efc6bc3-1-x86_64.pkg.tar.xz also (2018-12-03))\nMaybe something related to https://github.com/swaywm/wlroots/pull/1409. ",
    "mrlotfi": "\nI thought we had subpixel rendering in swaybar. Are you using fractional scaling?\n\nNo. I have only overridden the default font using font pango: xxxxxx option.\n. ",
    "twitchyliquid64": "Stack traces are in the coredump section, sorry about my english.\nNormally 'illegal instruction' means the stack was messed up, and the return pointer was corrupted (pointed to a place in an executable page that happened to be an invalid instruction).. Stack traces are in the coredump section, sorry about my english.\nNormally 'illegal instruction' means the stack was messed up, and the return pointer was corrupted (pointed to a place in an executable page that happened to be an invalid instruction).. Omg, -cpu host worked :O. Omg, -cpu host worked :O. ",
    "RockyTV": "I was discussing this on Mastodon and after reading a bit on the i18n issue, I have some feedback:\n\nYou switched from se voc\u00ea deseja apoiar to se desejas apoiar\nThroughout the text, you use both voc\u00ea and tu\nThere are some minor mistakes such as using n\u00e3o exite, which should be n\u00e3o hesite\nCada lan\u00e7amento \u00e9 assinado [...] e publicadas should be publicado, and a personal suggestion, I think vers\u00e3o instead of lan\u00e7amento fits better\n\nThe way I see it, it looks like if you mixed both pt_PT and pt_BR. It's not bad, but there are a few inconsistencies which made me think that.\nEDIT: I was reading the previous issue and I agree with the author of the previous PR that translated the README to portuguese that a portuguese should review the PR as well, to provide feedback on it. Both me and the PR author are from Brazil, which makes it a bit harder to provide \"neutral\" text for lusophones in general.. If the agreement is to translate it to Brazilian Portuguese, I think the\nfile should be renamed to suit it better.\nOn Tue, 27 Nov 2018, 09:13 Bernardo Meurer <notifications@github.com wrote:\n\ntranslate for both at same time could sound strange.\nYes, that's what I said, translating to both at the same time would sound\nstrange.\nEuropean Portuguese is understandable by Brazilians, and vice-versa.\nSure, this is mostly true with some minor exceptions. This doesn't,\nhowever, negate the fact that the dialects are different enough that it can\nfeel uncomfortable for a native speaker of one to read a document in the\nother, specially a technical one.\nI think we are fine with just a Brazilian Portuguese document, at least\nuntil until someone steps up to support an European Portuguese one, and\nthen we could maybe just have both, not that the differences matter too\nmuch.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/pull/3166#issuecomment-442020966, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/ABMW-6k2UWNxYghg7W4PLM2ki1nB512Xks5uzR5YgaJpZM4YtATC\n.\n. \n",
    "bemeurer": "Having lived in Brazil and Portugal, I think I qualify as a speaker of both pt_PT and pt_BR. Some thoughts:\n1. It's not worth it, IMO, to hybridize the dialects, this will lead to more confusion that anything. \n2. Brazilian Portuguese docs, including the README, should use voc\u00ea and avoid tu and v\u00f3s   since that is the most common. \n3. Portugal Portuguese docs should use tu and v\u00f3s and avoid voc\u00ea since the latter is uncommon.\n4. On the current revision, under the section regarding installing Sway, I think Por ... is better than A partir de ...\nThanks for putting the work in the translation, and let me know if there's anything I can do to help. Cheers!. Just an addendum after having review the file, this is through and through a Brazilian Portuguese doc, if someone wishes to add a Portugal Portuguese README it should have some changes.. > translate for both at same time could sound strange.\nYes, that's what I said, translating to both at the same time would sound strange.\n\nEuropean Portuguese is understandable by Brazilians, and vice-versa.\n\nSure, this is mostly true with some minor exceptions. This doesn't, however, negate the fact that the dialects are different enough that it can feel uncomfortable for a native speaker of one to read a document in the other, specially a technical one.\nI think we are fine with just a Brazilian Portuguese document, at least until until someone steps up to support an European Portuguese one, and then we could maybe just have both, not that the differences matter too much.. @RedSoxFan I haven't been able to reproduce it anymore, so I'll be closing this for now. Thanks!. @ascent12 I just installed it from pacman. I tried to manually set XDG_MUSIC_DIR but to no help, Guess it's broken for now.. FWIW Lollypop works perfectly fine :). I think the second no is redundant, canal IRC should suffice,. I don't think lan\u00e7amentos is usual terminology. If anything I'd stick with the anglicized Releases.. I  think Por is better than A partir de for this and subsequent subsections.. voc\u00ea estiver. Add a link to the IRC channel.. envie um e-mail as opposed to mande um e-mail. Se voc\u00ea j\u00e1 usa i3, copie sua configura\u00e7\u00e3o para .... I think configura\u00e7\u00e3o already strongly implies that it's an arquivo so it becomes redundant.. I think usar\u00e1 is better than ler\u00e1 here.. I believe the correct form is Se n\u00e3o, no?. arquivo de configura\u00e7\u00e3o exemplo, the de seems unnecessary.. Maybe link to gdm.. ",
    "artizirk": "Correct mouse DPI setting in 70-mouse.hwdb file helps quite a lot \n\nhttp://who-t.blogspot.com/2014/12/building-a-dpi-database-for-mice.html\nhttps://wayland.freedesktop.org/libinput/doc/latest/pointer-acceleration.html. Build seems to fail on my Arch Linux machine with this error\n\ntray_item_kde.c.o: undefined reference to symbol 'sd_bus_get_property_string@@LIBSYSTEMD_221'\nFull build log:\narti@orav ~/code/sway (git)-[tray] % meson build -Denable-tray=true    \nThe Meson build system\nVersion: 0.48.2\nSource dir: /home/arti/code/sway\nBuild dir: /home/arti/code/sway/build\nBuild type: native build\nProject name: sway\nProject version: undefined\nNative C compiler: ccache cc (gcc 8.2.1 \"cc (GCC) 8.2.1 20180831\")\nBuild machine cpu family: x86_64\nBuild machine cpu: x86_64\nFound pkg-config: /usr/bin/pkg-config (1.5.4)\nDependency json-c found: YES 0.13.1\nDependency libpcre found: YES 8.42\nDependency wlroots found: YES 0.2.0\nDependency wayland-server found: YES 1.16.0\nDependency wayland-client found: YES 1.16.0\nDependency wayland-cursor found: YES 1.16.0\nDependency wayland-egl found: YES 18.1.0\nDependency wayland-protocols found: YES 1.17\nDependency xkbcommon found: YES 0.8.2\nDependency cairo found: YES 1.16.0\nDependency pango found: YES 1.42.3\nDependency pangocairo found: YES 1.42.3\nDependency gdk-pixbuf-2.0 found: YES 2.38.0\nDependency pixman-1 found: YES 0.36.0\nDependency libinput found: YES 1.12.3\nLibrary pam found: YES\nLibrary crypt found: YES\nDependency libsystemd found: YES 239\nDependency libelogind found: NO (tried pkgconfig)\nLibrary m found: YES\nLibrary rt found: YES\nProgram git found: YES (/usr/bin/git)\nDependency xcb found: YES 1.13.1\nProgram scdoc found: YES (/usr/bin/scdoc)\nProgram sh found: YES (/usr/bin/sh)\nConfiguring config.h using configuration\nProgram wayland-scanner found: YES (/usr/bin/wayland-scanner)\nDependency threads found: YES \nConfiguring config using configuration\nWARNING: Output file \"@BASENAME@\" for configure_file() at meson.build:172 overwrites configure_file() output at meson.build:157\nConfiguring 00-defaults using configuration\nBuild targets in project: 21\nOption werror is: True [default: true]\nFound ninja-1.8.2 at /usr/bin/ninja\narti@orav ~/code/sway (git)-[tray] % ninja -C build \nninja: Entering directory `build'\n[273/281] Linking target swaybar/swaybar.\nFAILED: swaybar/swaybar \nccache cc  -o swaybar/swaybar 'swaybar/swaybar@@swaybar@exe/bar.c.o' 'swaybar/swaybar@@swaybar@exe/config.c.o' 'swaybar/swaybar@@swaybar@exe/i3bar.c.o' 'swaybar/swaybar@@swaybar@exe/input.c.o' 'swaybar/swaybar@@swaybar@exe/ipc.c.o' 'swaybar/swaybar@@swaybar@exe/main.c.o' 'swaybar/swaybar@@swaybar@exe/render.c.o' 'swaybar/swaybar@@swaybar@exe/status_line.c.o' 'swaybar/swaybar@@swaybar@exe/tray_host_kde.c.o' 'swaybar/swaybar@@swaybar@exe/tray_icon.c.o' 'swaybar/swaybar@@swaybar@exe/tray_item_kde.c.o' 'swaybar/swaybar@@swaybar@exe/tray_tray.c.o' 'swaybar/swaybar@@swaybar@exe/tray_watcher_kde.c.o' -Wl,--no-undefined -Wl,--as-needed -Wl,--start-group common/libsway-common.a client/libsway-client.a protocols/libclient_protos.a /usr/lib/libcairo.so /usr/lib/libgdk_pixbuf-2.0.so /usr/lib/libgobject-2.0.so /usr/lib/libglib-2.0.so /usr/lib/libjson-c.so -lm /usr/lib/libpango-1.0.so /usr/lib/libpangocairo-1.0.so -lrt /usr/lib/libwayland-client.so /usr/lib/libwayland-cursor.so /usr/lib/libwlroots.so -Wl,--end-group '-Wl,-rpath,$ORIGIN/../common:$ORIGIN/../client:$ORIGIN/../protocols' -Wl,-rpath-link,/home/arti/code/sway/build/common:/home/arti/code/sway/build/client:/home/arti/code/sway/build/protocols  \n/usr/bin/ld: swaybar/swaybar@@swaybar@exe/tray_item_kde.c.o: undefined reference to symbol 'sd_bus_get_property_string@@LIBSYSTEMD_221'\n/usr/bin/ld: /usr/lib/libsystemd.so.0: error adding symbols: DSO missing from command line\ncollect2: error: ld returned 1 exit status\n[280/281] Linking target sway/sway.\nninja: build stopped: subcommand failed.\nninja -C build  8,70s user 1,55s system 1383% cpu 0,741 total\n1 arti@orav ~/code/sway (git)-[tray] %. @ianyfan Yes, it compiles now, thank you!\nAlthough it currently segmentation faults as soon as i have any programs running that provide a tray icon\n/swaybar --bar_id bar-0 --debug\n2018-12-06 16:13:00 - [swaybar/tray/icon.c:323] Loaded themes: (null)\n2018-12-06 16:13:00 - [swaybar/tray/tray.c:35] Initialized tray\n2018-12-06 16:13:00 - [swaybar/status_line.c:72] Using i3bar protocol.\n2018-12-06 16:13:00 - [swaybar/status_line.c:78] Enabling click events.\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 15K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 15K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 15K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 100%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 15K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 16:13:00\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 16:13:00 - [swaybar/i3bar.c:253] Rendering last received json\n2018-12-06 16:13:00 - [swaybar/tray/watcher_kde.c:74] Registering Status Notifier Item ':1.20432/org/ayatana/NotificationItem/blueman'\n2018-12-06 16:13:00 - [swaybar/tray/watcher_kde.c:96] Registering Status Notifier Host 'org.kde.StatusNotifierHost-30413'\n2018-12-06 16:13:00 - [swaybar/tray/host_kde.c:20] Registering Status Notifier Item ':1.20432/org/ayatana/NotificationItem/blueman'\n2018-12-06 16:13:00 - [swaybar/tray/item_kde.c:24] TODO remove - IconName: blueman-active\n[1]    30413 segmentation fault (core dumped)  ./swaybar --bar_id bar-0 --debug\n. On My machine default is this\nXDG_DATA_DIRS=/home/arti/.local/share/flatpak/exports/share/:/var/lib/flatpak/exports/share/:/usr/local/share/:/usr/share/\nso /usr/share is in the search path\nI reinstalled hicolor-icon-theme package from arch linux repo so index.theme file should be fine (it exists and doesn't look corrupted).\nForcing XDG_DATA_DIRS  to be only /usr/share/ doesn't do much but setting it to /usr/share/icons/hicolor/scalable/status/ (witch is quite wrong, i know) and running swaybar with strace shows that it finds some icons.\nIm not really sure how to debug this more.\nedit:\nsetting export XDG_DATA_DIRS=/usr/share/icons seems to help swaybar tray to find my themes\narti@orav ~/code/sway_tray/build/swaybar (git)-[tray] % export XDG_DATA_DIRS=/usr/share/icons\narti@orav ~/code/sway_tray/build/swaybar (git)-[tray] % ./swaybar --bar_id bar-0 --debug\n2018-12-06 18:02:25 - [swaybar/tray/icon.c:323] Loaded themes: Hicolor, Adwaita, HighContrast\n2018-12-06 18:02:25 - [swaybar/tray/tray.c:35] Initialized tray\n2018-12-06 18:02:25 - [swaybar/status_line.c:72] Using i3bar protocol.\n2018-12-06 18:02:25 - [swaybar/status_line.c:78] Enabling click events.\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 21K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 21K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 100%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 21K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:25 - [swaybar/i3bar.c:253] Rendering last received json\n2018-12-06 18:02:25 - [swaybar/tray/watcher_kde.c:74] Registering Status Notifier Item ':1.21809/org/ayatana/NotificationItem/blueman'\n2018-12-06 18:02:25 - [swaybar/tray/watcher_kde.c:96] Registering Status Notifier Host 'org.kde.StatusNotifierHost-20364'\n2018-12-06 18:02:25 - [swaybar/tray/host_kde.c:20] Registering Status Notifier Item ':1.21809/org/ayatana/NotificationItem/blueman'\n2018-12-06 18:02:25 - [swaybar/tray/item_kde.c:24] TODO remove - IconName: blueman-active\n2018-12-06 18:02:25 - [common/background-image.c:32] Failed to load background image (Couldn\u2019t recognize the image file format for file \u201c/usr/share/icons/hicolor/16x16/status/blueman-active.png\u201d).\n2018-12-06 18:02:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 100%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 26.6G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"IN 21K OUT 0K\",\"name\":\"bandwidth\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"CPU 9.69%\",\"short_text\":\"9.69%\",\"min_width\":\"CPU: 100.00%\",\"name\":\"cpu_usage\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-06 18:02:25\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-06 18:02:26 - [swaybar/i3bar.c:253] Rendering last received json\n[1]    20364 segmentation fault (core dumped)  ./swaybar --bar_id bar-0 --debug\n139 arti@orav ~/code/sway_tray/build/swaybar (git)-[tray] % file /usr/share/icons/hicolor/16x16/status/blueman-active.png    \n/usr/share/icons/hicolor/16x16/status/blueman-active.png: PNG image data, 16 x 16, 16-bit/color RGBA, non-interlaced. Looks like tray doesn't like something in my XDG_DATA_DIRS path\narti@orav ~/code/sway_tray (git)-[tray] % build/swaybar/swaybar --bar_id bar-0 --debug\nERROR block_reap:328: [bandwidth] bad exit code 1\n2018-12-07 11:21:26 - [swaybar/tray/icon.c:323] Loaded themes: Hicolor, Hicolor, Adwaita, HighContrast\n2018-12-07 11:21:26 - [swaybar/tray/tray.c:36] Initialized tray\n2018-12-07 11:21:26 - [swaybar/status_line.c:72] Using i3bar protocol.\n2018-12-07 11:21:26 - [swaybar/status_line.c:78] Enabling click events.\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 0%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:21:26\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:21:26 - [swaybar/i3bar.c:253] Rendering last received json\n2018-12-07 11:21:26 - [swaybar/tray/watcher_kde.c:96] Registering Status Notifier Host 'org.kde.StatusNotifierHost-19700'\n2018-12-07 11:21:26 - [swaybar/tray/watcher_kde.c:74] Registering Status Notifier Item ':1.37312/org/ayatana/NotificationItem/blueman'\n2018-12-07 11:21:26 - [swaybar/tray/host_kde.c:20] Registering Status Notifier Item ':1.37312/org/ayatana/NotificationItem/blueman'\n2018-12-07 11:21:26 - [swaybar/tray/item_kde.c:24] TODO remove - IconName: blueman-tray\n[2]    19700 segmentation fault (core dumped)  build/swaybar/swaybar --bar_id bar-0 --debug\n139 arti@orav ~/code/sway_tray (git)-[tray] %\nUnsetting XDG_DATA_DIRS gets it further\narti@orav ~/code/sway_tray (git)-[tray] % XDG_DATA_DIRS='' build/swaybar/swaybar --bar_id bar-0 --debug\nERROR block_reap:328: [bandwidth] bad exit code 1\n2018-12-07 11:22:21 - [swaybar/tray/icon.c:323] Loaded themes: Hicolor, Adwaita, HighContrast\n2018-12-07 11:22:21 - [swaybar/tray/tray.c:36] Initialized tray\n2018-12-07 11:22:21 - [swaybar/status_line.c:72] Using i3bar protocol.\n2018-12-07 11:22:21 - [swaybar/status_line.c:78] Enabling click events.\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 0%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:21 - [swaybar/i3bar.c:253] Rendering last received json\n2018-12-07 11:22:21 - [swaybar/tray/watcher_kde.c:74] Registering Status Notifier Item ':1.37312/org/ayatana/NotificationItem/blueman'\n2018-12-07 11:22:21 - [swaybar/tray/watcher_kde.c:96] Registering Status Notifier Host 'org.kde.StatusNotifierHost-21135'\n2018-12-07 11:22:21 - [swaybar/tray/host_kde.c:20] Registering Status Notifier Item ':1.37312/org/ayatana/NotificationItem/blueman'\n2018-12-07 11:22:21 - [swaybar/tray/item_kde.c:24] TODO remove - IconName: blueman-tray\n2018-12-07 11:22:21 - [common/background-image.c:32] Failed to load background image (Couldn\u2019t recognize the image file format for file \u201c/usr/share/icons/hicolor/16x16/status/blueman-tray.png\u201d).\n2018-12-07 11:22:22 - [swaybar/i3bar.c:199] Received i3bar json: '[{\"full_text\":\"\"},{\"\":\"\",\"full_text\":\"\u266a 0%\",\"name\":\"volume\",\"instance\":\"Master\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"MEM 25.4G\",\"name\":\"memory\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"SWAP 0.0G\",\"name\":\"memory\",\"instance\":\"swap\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"HOME 158G\",\"short_text\":\"158G\",\"name\":\"disk\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"172.26.1.168\",\"short_text\":\"172.26.1.168\",\"color\":\"#00FF00\",\"name\":\"iface\",\"separator\":false,\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"CPU 12.80%\",\"short_text\":\"12.80%\",\"min_width\":\"CPU: 100.00%\",\"name\":\"cpu_usage\",\"separator_block_width\":15,\"markup\":\"none\"},{\"\":\"\",\"full_text\":\"2018-12-07 11:22:21\",\"name\":\"time\",\"separator_block_width\":15,\"markup\":\"none\"}]'\n2018-12-07 11:22:22 - [swaybar/i3bar.c:253] Rendering last received json\n[2]    21135 segmentation fault (core dumped)  XDG_DATA_DIRS='' build/swaybar/swaybar --bar_id bar-0 --debug\n139 arti@orav ~/code/sway_tray (git)-[tray] %\nIf I set  HAVE_GDK_PIXBUF to false in meson.build so that it falls back to cairo and rebuild then it loads the icon.\n\nThis is the icon that GDK_PIXBUF fails to load\n\n/usr/share/icons/hicolor/16x16/status/blueman-tray.png: PNG image data, 16 x 16, 16-bit/color RGBA, non-interlaced\nsha256sum 594792bf6ad8961f204e40d8a41dadbf1fa143b2f343976084d0a30e98113880\n. @ianyfan It works now without crashes or local hacks. Awesome!. KDE guys have a XEmbed proxy daemon https://github.com/KDE/plasma-workspace/tree/master/xembed-sni-proxy. ",
    "PyroLagus": "Just for information, https://github.com/i3/i3/issues/1879 concerns the same feature on i3.. Just for information, https://github.com/i3/i3/issues/1879 concerns the same feature on i3.. ",
    "TheChymera": "@emersion I have switched to that, however, the issue appears just the same.. That did not help, the only thing that can sort this out automatically is for me to append $(startx && killall X) before the command which starts sway.\nWhich I agree is a horrible thing to do.. @RedSoxFan my system with sway is currently not with me, I will certainly try your advice out as soon as we reunite :). ",
    "BetaRays": "@emersion https://ptpb.pw/GJ5K\nAs you can see there is a line about XDG_RUNTIME_DIR:\n\nerror: XDG_RUNTIME_DIR not set in the environment\n\nBut I can't see this line without redirecting the log elsewhere (and if it's a file you have to sync using sysrq) since it freezes my display before displaying it.. By the way, having a file instead of a directory in XDG_RUNTIME_DIR does the same thing.. Yes, it's less likely to pose problems, but the problem can still be triggered.. ",
    "normn": "I have run into something like this with sway somewhat regularly. I have to rmmod and modprobe the psmouse module to restore the mouse. Not sure if it's an upstream issue, wlroots, or sway.. I have this issue also. My output of libinput list-devices is below:\n```\nsudo libinput list-devices \nevent17 - Elan Touchpad: kernel bug: clickpad advertising right button\nDevice:           Power Button\nKernel:           /dev/input/event2\nGroup:            1\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Video Bus\nKernel:           /dev/input/event3\nGroup:            2\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Lid Switch\nKernel:           /dev/input/event1\nGroup:            3\nSeat:             seat0, default\nCapabilities:     switch\nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Sleep Button\nKernel:           /dev/input/event0\nGroup:            4\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Integrated IR Camera: Integrate\nKernel:           /dev/input/event15\nGroup:            5\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Integrated Camera: Integrated C\nKernel:           /dev/input/event16\nGroup:            6\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH Mic\nKernel:           /dev/input/event8\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH Headphone\nKernel:           /dev/input/event9\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH HDMI/DP,pcm=3\nKernel:           /dev/input/event10\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH HDMI/DP,pcm=7\nKernel:           /dev/input/event11\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH HDMI/DP,pcm=8\nKernel:           /dev/input/event12\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH HDMI/DP,pcm=9\nKernel:           /dev/input/event13\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           HDA Intel PCH HDMI/DP,pcm=10\nKernel:           /dev/input/event14\nGroup:            7\nSeat:             seat0, default\nCapabilities:   \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           Elan Touchpad\nKernel:           /dev/input/event17\nGroup:            8\nSeat:             seat0, default\nSize:             98x61mm\nCapabilities:     pointer gesture\nTap-to-click:     disabled\nTap-and-drag:     enabled\nTap drag lock:    disabled\nLeft-handed:      disabled\nNat.scrolling:    disabled\nMiddle emulation: disabled\nCalibration:      n/a\nScroll methods:   two-finger edge \nClick methods:    button-areas clickfinger \nDisable-w-typing: enabled\nAccel profiles:   none\nRotation:         n/a\nDevice:           Elan TrackPoint\nKernel:           /dev/input/event18\nGroup:            9\nSeat:             seat0, default\nCapabilities:     pointer \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      disabled\nNat.scrolling:    disabled\nMiddle emulation: disabled\nCalibration:      n/a\nScroll methods:   button\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   flat adaptive\nRotation:         n/a\nDevice:           AT Translated Set 2 keyboard\nKernel:           /dev/input/event4\nGroup:            10\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\nRotation:         n/a\nDevice:           ThinkPad Extra Buttons\nKernel:           /dev/input/event6\nGroup:            11\nSeat:             seat0, default\nCapabilities:     keyboard \nTap-to-click:     n/a\nTap-and-drag:     n/a\nTap drag lock:    n/a\nLeft-handed:      n/a\nNat.scrolling:    n/a\nMiddle emulation: n/a\nCalibration:      n/a\nScroll methods:   none\nClick methods:    none\nDisable-w-typing: n/a\nAccel profiles:   n/a\n```\nThe event17 - Elan Touchpad: kernel bug: clickpad advertising right button might be a clue. \nLet me know if I should report this upstream also. ",
    "iBurley": "So I went to try this and due to me misunderstanding how to set it up, I stumbled on an interesting bug. \nInstead of just adding gaps X on a new line inside the bar block, I decided to make a new block inside of it, the same way colors is done. So I added:\ngaps {\n    gaps X\n}\nIt spawned a second bar with the gaps. Probably not something a lot of people will screw up, but I got a chuckle out of it and figured you might want to idiot-proof it. . > In your example above, the first gaps is being parsed as the bar-id and the second gaps as the subcommand.\nAh, interesting. Working good then, and once I figured out my derp the gaps are working perfectly and make me very happy, I appreciate the addition. . ",
    "SibrenVasse": "https://gist.github.com/SibrenVasse/c2156704bed8c39d8f295d4a0cfd436b\n(gdb) p surface->popup\n$3 = (struct wlr_xdg_popup_v6 *) 0x0. Awesome, #3211 works for me!. ",
    "shioyama": "This btw works in i3 (i.e. urxvt terminal size is adjusted when font is resized).. This seems to still be the situation as of 1.0.rc3.. Maybe related to #3232 ...? That problem is also \"fixed\" by changing windows/reloading/etc.. ",
    "mdeff": "I can reproduce (on today's master). Here's a screenshot of what happens when I down-size the font in urxvt (ranger file manager). It also gets fixed when I change workspace, focus on the window again, go fullscreen, etc.\n. Debug log. I started sway with sway -d 2> ~/sway.log then ran swaymsg input 1386:236:Wacom_ISDv4_EC_Pen events disabled followed by swaymsg exit.. Any idea how I can track that further?. I got a build failure:\n/usr/bin/ld: sway/345c74e@@sway@exe/desktop_xdg_shell.c.o: in function `_close':\n/tmp/makepkg/sway-git/src/build/../sway/sway/desktop/xdg_shell.c:236: undefined reference to `wlr_xdg_toplevel_send_close'\n/usr/bin/ld: sway/345c74e@@sway@exe/desktop_xdg_shell.c.o: in function `close_popups_iterator':\n/tmp/makepkg/sway-git/src/build/../sway/sway/desktop/xdg_shell.c:246: undefined reference to `wlr_xdg_popup_destroy'. The issue seems to be (full debug log):\n[input-manager.c:202] input_manager_libinput_config_pointer(1386:236:Wacom_ISDv4_EC_Pen)\n[input-manager.c:276] libinput_config_pointer(1386:236:Wacom_ISDv4_EC_Pen) send_events_set_mode(1)\n[input-manager.c:281] Unsupported event mode 1\n[input-manager.c:284] Supported bitmask: 0\nThat's surprising as xinput --disable used to work. I guess sway should also report a failure?. There seems to be a special case for touch screens: it gets disabled when the laptop output is disabled, even without the map_to_output configuration.. So that's an xwayland bug. Do you know if it's gonna be fixed or if there's a workaround?. That works, but it kills all the open X windows. :(\nAnother workaround I found: add Xft.dpi: 96 to .Xresources, which gets loaded by exec xrdb -load ~/.Xresources in the sway config.. Indeed. Updating from r5581 to r5588 (current master) fixed it.. ",
    "ForTheReallys": "Woops I forgot about that.  How's this?. ",
    "ddorstijn": "That was fast enough. I had to add the current|all options  and select the direction of the gap. I didn't see it in the video but I should have taken a better look first.   . ",
    "jpsamaroo": "What USE flags do you have set? Is +filecaps enabled? Are you on systemd or openrc?. Maybe the wiki would be a better place for this script? It already has some distro-specific docs there (for Debian/Ubuntu), so I feel like putting init-specific scripts there would make sense.. ",
    "samchelini": "Below are my USE flags for sway and wlroots. Both have the filecaps USE flag. I am on openrc. \ndev-libs/sway-1.0_beta2 X filecaps pam swaybar swaybg swayidle swaylock swaymsg swaynag tray wallpapers\ndev-libs/wlroots-0.2 X filecaps. This log file might be more helpful. Before I had set \"chmod a+s /usr/bin/sway\" manually after install because sway would freeze my computer and I have to reboot in order to fix it. That might be why it's unable to drop root. This log shows some permission errors just before my computer freezes, without \"chmod a+s /usr/bin/sway\".\nsway.txt\n. Thanks SpeedJack, I emerged sway again and sure enough it said I need to be in the input group. Added myself to the input group and it worked. ",
    "SamHH": "I'm experiencing this issue as well.\nVersions: Sway: 1.0, Neovim: 0.3.4\nRepro: Open any new window (terminal, web browser, anything) as a split below or beside the terminal with Neovim active. Roughly half of the time it will clear the screen containing Neovim, displaying nothing but the cursor. It fixes itself within a few seconds, or you can force a fix by switching back to the broken window - sometimes at this stage you also need to move the cursor.\nTerminals: Alacritty, Termite\nEditors: Only Neovim; neither Vi nor Vim exhibit this behaviour.\n. ",
    "joshuarubin": "I think I'm having a similar issue. Using kitty term, but also tested under Alacritty. vim doesn't have the issue, but neovim does.\nWhenever I yank or cut a line, the whole term window briefly resizes (shrinks horizontally) and screws up my nvim splits.\nThis was not an issue with the pre 1.0 release I was using but happens all the time with 1.0.\nEdit: this does not happen when the terminal is a floating window.\nEdit 2: this only happens when neovim has set clipboard=unnamedplus,unnamed or set clipboard=unnamed\nEdit 3: this might be related to #926 . I've actually been able to reproduce this outside neovim now with:\nsh\necho foo | wl-copy --primary. This also only seems to be the case with stacking and split (either v or h) layouts. Tabbed layouts do not exhibit this issue.. arch linux packages\nsway 1.0-4 wl-clipboard 1.0.0-4. $ echo foo | wl-copy --primary\n[395209.596]  -> wl_display@1.get_registry(new id wl_registry@2)\n[395209.629]  -> wl_display@1.sync(new id wl_callback@3)\n[395209.720] wl_display@1.delete_id(3)\n[395209.732] wl_registry@2.global(1, \"wl_shm\", 1)\n[395209.752]  -> wl_registry@2.bind(1, \"wl_shm\", 1, new id [unknown]@4)\n[395209.785] wl_registry@2.global(2, \"zwp_linux_dmabuf_v1\", 3)\n[395209.804] wl_registry@2.global(3, \"wl_drm\", 2)\n[395209.820] wl_registry@2.global(4, \"wl_compositor\", 4)\n[395209.834]  -> wl_registry@2.bind(4, \"wl_compositor\", 3, new id [unknown]@5)\n[395209.866] wl_registry@2.global(5, \"wl_subcompositor\", 1)\n[395209.885] wl_registry@2.global(6, \"wl_data_device_manager\", 3)\n[395209.902]  -> wl_registry@2.bind(6, \"wl_data_device_manager\", 1, new id [unknown]@6)\n[395209.933] wl_registry@2.global(7, \"gamma_control_manager\", 1)\n[395209.952] wl_registry@2.global(8, \"zwlr_gamma_control_manager_v1\", 1)\n[395209.969] wl_registry@2.global(9, \"gtk_primary_selection_device_manager\", 1)\n[395209.987]  -> wl_registry@2.bind(9, \"gtk_primary_selection_device_manager\", 1, new id [unknown]@7)\n[395210.014] wl_registry@2.global(10, \"zxdg_output_manager_v1\", 2)\n[395210.043] wl_registry@2.global(11, \"org_kde_kwin_idle\", 1)\n[395210.060] wl_registry@2.global(12, \"zwp_idle_inhibit_manager_v1\", 1)\n[395210.081] wl_registry@2.global(13, \"zwlr_layer_shell_v1\", 1)\n[395210.102] wl_registry@2.global(14, \"zxdg_shell_v6\", 1)\n[395210.126] wl_registry@2.global(15, \"xdg_wm_base\", 2)\n[395210.149]  -> wl_registry@2.bind(15, \"xdg_wm_base\", 1, new id [unknown]@8)\n[395210.179] wl_registry@2.global(16, \"org_kde_kwin_server_decoration_manager\", 1)\n[395210.214] wl_registry@2.global(17, \"zxdg_decoration_manager_v1\", 1)\n[395210.227] wl_registry@2.global(18, \"zwp_relative_pointer_manager_v1\", 1)\n[395210.244] wl_registry@2.global(19, \"zwp_pointer_constraints_v1\", 1)\n[395210.266] wl_registry@2.global(20, \"wp_presentation\", 1)\n[395210.285] wl_registry@2.global(21, \"zwlr_export_dmabuf_manager_v1\", 1)\n[395210.302] wl_registry@2.global(22, \"zwlr_screencopy_manager_v1\", 1)\n[395210.320] wl_registry@2.global(23, \"zwlr_data_control_manager_v1\", 2)\n[395210.337] wl_registry@2.global(24, \"zwp_virtual_keyboard_manager_v1\", 1)\n[395210.367] wl_registry@2.global(25, \"zwlr_input_inhibit_manager_v1\", 1)\n[395210.383] wl_registry@2.global(26, \"wl_seat\", 6)\n[395210.403]  -> wl_registry@2.bind(26, \"wl_seat\", 1, new id [unknown]@9)\n[395210.428] wl_registry@2.global(27, \"wl_output\", 3)\n[395210.447] wl_registry@2.global(28, \"wl_output\", 3)\n[395210.467] wl_registry@2.global(29, \"wl_output\", 3)\n[395210.483] wl_callback@3.done(1744)\n[395210.491]  -> wl_data_device_manager@6.get_data_device(new id wl_data_device@3, wl_seat@9)\n[395210.522]  -> gtk_primary_selection_device_manager@7.get_device(new id gtk_primary_selection_device@10, wl_seat@9)\n[395236.067]  -> gtk_primary_selection_device_manager@7.create_source(new id gtk_primary_selection_source@11)\n[395236.113]  -> gtk_primary_selection_source@11.offer(\"text/plain\")\n[395236.118]  -> gtk_primary_selection_source@11.offer(\"text/plain;charset=utf-8\")\n[395236.121]  -> gtk_primary_selection_source@11.offer(\"TEXT\")\n[395236.125]  -> gtk_primary_selection_source@11.offer(\"STRING\")\n[395236.129]  -> gtk_primary_selection_source@11.offer(\"UTF8_STRING\")\n[395236.136]  -> wl_compositor@5.create_surface(new id wl_surface@12)\n[395236.147]  -> xdg_wm_base@8.get_xdg_surface(new id xdg_surface@13, wl_surface@12)\n[395236.169]  -> xdg_surface@13.get_toplevel(new id xdg_toplevel@14)\n[395236.179]  -> xdg_toplevel@14.set_title(\"wl-clipboard\")\n[395236.204]  -> wl_surface@12.commit()\n[395236.211]  -> wl_display@1.sync(new id wl_callback@15)\n[395236.329] wl_display@1.delete_id(15)                                                                                                                                                                                                                                                                                                                                                                                                   \n[395236.360] wl_seat@9.capabilities(3)\n[395236.370]  -> wl_seat@9.get_keyboard(new id wl_keyboard@16)\n[395236.382] xdg_wm_base@8.ping(1746)\n[395236.390]  -> xdg_wm_base@8.pong(1746)\n[395236.398] wl_callback@15.done(1746)\n[395236.407] xdg_toplevel@14.configure(0, 0, array)\n[395236.423] xdg_surface@13.configure(1745)\n[395236.432]  -> xdg_surface@13.ack_configure(1745)\n[395236.451]  -> wl_shm@4.create_pool(new id wl_shm_pool@15, fd 5, 4)\n[395236.474]  -> wl_shm_pool@15.create_buffer(new id wl_buffer@17, 0, 1, 1, 4, 0)\n[395236.502]  -> wl_surface@12.attach(wl_buffer@17, 0, 0)\n[395236.519]  -> wl_surface@12.commit()\n[395237.068] wl_keyboard@16.keymap(1, fd 5, 48475)\n[395237.119] wl_keyboard@16.enter(1750, wl_surface@12, array)\n[395237.135]  -> gtk_primary_selection_device@10.set_selection(gtk_primary_selection_source@11, 1750)\n[395237.158]  -> wl_display@1.sync(new id wl_callback@18)\n[395237.168] wl_keyboard@16.modifiers(1751, 0, 0, 0, 0)\n[395237.184] xdg_toplevel@14.configure(1916, 2103, array)\n[395237.192] xdg_surface@13.configure(1747)\n[395237.197]  -> xdg_surface@13.ack_configure(1747)\n[395237.263] wl_display@1.delete_id(18)\n[395237.270] wl_callback@18.done(1751)\n[395237.277]  -> xdg_toplevel@14.destroy()\n[395237.280]  -> xdg_surface@13.destroy()\n[395237.285]  -> wl_surface@12.destroy()\n[395237.528] wl_display@1.delete_id(14)\n[395237.536] wl_display@1.delete_id(13)\n[395237.541] wl_display@1.delete_id(12)\n[395237.547] wl_keyboard@16.leave(1753, nil)\n[398320.063] gtk_primary_selection_source@11.cancelled(). Thx!. If anyone else has this issue, upgrade wl-clipboard to > 1.0.0 (which right now is just the master branch). ",
    "varac": "\nI think they use the dbus menu, which has not been implemented yet.\n\nIs there any issue that tracks this ?. ",
    "hvenev": "Sure! https://git.venev.name/hristo/sway.git branch swaybar-rel.. Sure! https://git.venev.name/hristo/sway.git branch swaybar-rel.. ",
    "artiqknight": "Thank you for your comment. I agree that this is not the best solution.\nLists are created in a lot of places and I figured it's not my place to change all that code.\nAs it is right now however, there are a lot of places where null pointers would be derefenced, such as in the call to list_add() in swaynag/main.c line 35.\nIs it better to crash early in these cases or would it be better to check every call to create_list() and exit with a failure?. > For this reason I wouldn't bother trying to prevent OOM-related crashes in the secondary programs.\nLetting them just segfault feel dirty though. Swaynag already uses returns an exit code, null pointers could be checked and if there's no memory for a list Swaynag could return a failure.\n\nFor memory allocations within transaction code, that really needs to work in all situations, so I'm not sure how we'd get around that other than reserving some memory ahead of time.\n\nI took a look at transactions, but I started with a secondary program precisely because I'm not familiar with the inner workings of Sway. In transaction_create() the calloc for the struct itself is checked for a np, but the list for instructions is not. This could cause issues as well.\nI think allocating memory upfront and checking that would be a good idea yeah.\nBut that would mean the location of those allocations needs to be changed I think.\nRight now for example list_add() calls list_resize() which reallocs a larger block.\nlist_resize sets items to the realloc and doesn't check it, which means it could set items to a null pointer I think.\nlist->items is then used in list_add() which would then crash I think.\nThat means this loop transaction_commit_dirty() could crash because it calls list_add() in transaction_add_node() in a for loop:\nfor (int i = 0; i < server.dirty_nodes->length; ++i) {\n        struct sway_node *node = server.dirty_nodes->items[i];\n        transaction_add_node(transaction, node);\n        node->dirty = false;\n}\nAllocating memory upfront would probably mean moving the allocations out of the internal functions in loop etc. and passing pointers to memory to them.\nBut like I said I might be talking out of my ass here.\nEDIT: or somehow make the critical stuff non-dynamic.. ",
    "daenney": "~~@cg9999 I wonder if you've observed general stability issues too? For me since about 2 days Fx Nightly will just crash as I'm using the app. I've done it with all extensions disabled too, doesn't seem to make a difference whereas it works flawlessly without GDK_BACKEND=wayland~~ This appears to be covered in #3115 . ",
    "abyss7": "I have investigated furthermore and found that problem is not with negative position, but with the output scale.. Sorry, for losing touch.\nI tried and it works - not sure if it's intended and expected behavior.. ",
    "drbawb": "My apologies, I was using \"crash\" in the colloquial sense of \"I can't do anything else with my PC.\" -- Sway doesn't actually exit/return control. \"Sway freezes\" would probably have been more accurate, i.e: my keyboard stops accepting input, including num lock and caps lock, the cursor stops moving, etc. Would a backtrace still be useful in that instance?. My apologies, I was using \"crash\" in the colloquial sense of \"I can't do anything else with my PC.\" -- Sway doesn't actually exit/return control. \"Sway freezes\" would probably have been more accurate, i.e: my keyboard stops accepting input, including num lock and caps lock, the cursor stops moving, etc. Would a backtrace still be useful in that instance?. I'm on wlroots v0.2 (e75075dfa20250e80a41402ec91d648516087f39). I believe you're correct that this is a lower level than sway/wlroots. After some further investigation I'm pretty sure this is a kernel bug. I managed to get a kernel panic out of reproducing this crash a number of times -- which led me to this bug report: https://bugs.freedesktop.org/show_bug.cgi?id=105018  \nAfter disabling amdgpu.dc=1 I haven't been able to reproduce the issue.. I'm on wlroots v0.2 (e75075dfa20250e80a41402ec91d648516087f39). I believe you're correct that this is a lower level than sway/wlroots. After some further investigation I'm pretty sure this is a kernel bug. I managed to get a kernel panic out of reproducing this crash a number of times -- which led me to this bug report: https://bugs.freedesktop.org/show_bug.cgi?id=105018  \nAfter disabling amdgpu.dc=1 I haven't been able to reproduce the issue.. I am working w/ upstream on this, but I just wanted to add some details I've learned in the interim:\n\n\nI was able to reproduce this issue on rootston with the default config, however I cannot reproduce it on i3 w/ Xorg, nor with Weston. \n\n\nWeston does briefly hang in the same scenario, and the kernel message is still printed, but it seems like Weston eventually recovers after the pageflip fails the first time.\n\n\nBased on some sway debug logs I've captured It seems like wlroots just keeps retrying the page flip, which seems like it will never succeed given whatever configuration the driver is in.\n\n\nI've tried this both with & without WLR_DRM_NO_ATOMIC=1, the error messages in the log change slightly, but they both fail in roughly the same way.\n\n\nI will update this if I find out anything further from upstream, or if I can identify what Weston is doing that allows it to recover from this scenario.\n. I am working w/ upstream on this, but I just wanted to add some details I've learned in the interim:\n\n\nI was able to reproduce this issue on rootston with the default config, however I cannot reproduce it on i3 w/ Xorg, nor with Weston. \n\n\nWeston does briefly hang in the same scenario, and the kernel message is still printed, but it seems like Weston eventually recovers after the pageflip fails the first time.\n\n\nBased on some sway debug logs I've captured It seems like wlroots just keeps retrying the page flip, which seems like it will never succeed given whatever configuration the driver is in.\n\n\nI've tried this both with & without WLR_DRM_NO_ATOMIC=1, the error messages in the log change slightly, but they both fail in roughly the same way.\n\n\nI will update this if I find out anything further from upstream, or if I can identify what Weston is doing that allows it to recover from this scenario.\n. ",
    "mninja": "https://gist.github.com/mninja/0fcacf31a85491182468559377e2f206. I built 0.2 from git.. ",
    "PlusMinus0": "Thanks, so not out of the box.\n\nYou can split the wallpaper into two images and assign them separately to each output.\n\nThat\u2019s what I'm doing currently, was hoping to get around it.\n\nYou could also create a new wallpaper client replacing swaybg for this specific use-case.\n\nAlright, will look into it.. And if you are on sway 1.0 you could try a wildcard:\nExample for two different german layouts\ninput * {\n    xkb_layout de,de\n    xkb_variant neo,nodeadkeys\n    xkb_options grp:alt_shift_toggle\n}. And if you are on sway 1.0 you could try a wildcard:\nExample for two different german layouts\ninput * {\n    xkb_layout de,de\n    xkb_variant neo,nodeadkeys\n    xkb_options grp:alt_shift_toggle\n}. Can the x-pos be top or bottom?. Agreed, but the blur is an obvious symptom. \nMaybe: \u201c HiDPI isn't supported with Xwayland clients (rendering will be blurry).\u201d. ",
    "brzegorz": "\n\nGreat. Could you give me a link to the issue? I guess once it`s solved I have no more incentives to stick with X\n\n\nCare to elaborate why? Is it to much hassle for low priority feature? Or is it against the vision?\n\n\nBoth touch gestures and bindsyms seem helpful to my case. Thank you.\n. Ok. Thank you for the answers and the fix. Now I must take the time to replace my lxqt+i3 config :D.\nOn December 17, 2018 9:17:38 AM GMT+01:00, emersion notifications@github.com wrote:\n\n\nJust merged the fix: https://github.com/swaywm/sway/pull/3303\nI don't think buttons would fit nicely in sway's workflow, and I\nbelieve using button bindings as @RyanDwyer suggested is a reasonable\nworkaround. Also, the maintenance cost would be high, especially\nconsidering the rendering code is already pretty complex. Last, I don't\nthink a lot of sway users would like to enable this feature.\n\n-- \nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub:\nhttps://github.com/swaywm/sway/issues/3298#issuecomment-447758174\n\n-- \nSent from my Android device with K-9 Mail. Please excuse my brevity.. ",
    "gportay": "I have tested it and it worked.. I have tested it, it works fine with my setup. Thanks\n. ",
    "jeLee6gi": "\nPassing --disable-gpu-driver-bug-workarounds to Chromium fixes this issue for me.\n\nFor me too :+1: . I just tested on sway version 1.0-rc1-8-ga1a99421 (Feb  4 2019, branch 'master') and chromium 72.0.3626.81 and my drag icons still get stuck.. I'm not affected by this issue anymore on sway version 1.0-rc1-132-g6728db28 (Feb 28 2019, branch 'master') and chromium 72.0.3626.119. Thank you for the suggestions!. ",
    "HolyStephano": "I've done literally every iteration of stretch, fill, fit, center, and tile, and none of these have given me the effect i'm looking for, so i honestly don't know what you're telling me to look for?. I don't quite know. I have an image bigger than my resolution and no matter what i set it gets scaled and some parts get cut off.. I'm actually not sure to be honest. I would hinge my bets and say, no, which is why this is more of a feature request than anything in the long run.. See bars being built like this\nThey have a bindmode plugin, which currently show nothing in the bindmode until you cue a bindmode event.\nIt's a quality of life change, not needed but would be nice to have.. At initialization of sway, sure, but if the bar restarts while you're in a bindmode, it can't get that to display properly. ",
    "jeffa5": "I've had the same issue with this but also Firefox and Qutebrowser (so potentially X applications?) become unresponsive to mouse interactions when in tiling layout. They still accept key presses though. Moving the applications back to a display without negative positions makes them work again until moved to a display with negative pos.. ",
    "kennylevinsen": "Another gentle ping. Please do say if assistance is needed.. I would expect a vertical bar to either have rotated text or vertical writing, with the former being both easier and more aesthetically pleasing (with the exception being natively vertical scripts, as those @ddevault refers to).\nMy use-case is simple that a vertical bar wastes less space. With horizontal text and dynamic width bar, that would no longer be the case, as even just the current time would make the bar very, very wide to accommodate its content.\nThis is definitely a nice-to-have, but if the rotation transform and input handling isn't a lot of code (the patch from @mstoeckl definitely seems minimal, although it lacks the input part), I'd definitely vote for the enhancement with text simply rotating with the bar. Although, in that case, it might be nice to be able to pick which way it rotates separate from which side it attaches to. That setting could then maybe also be used for future support of counter-rotated text (vertical script or not).. This patch takes the work from @mstoeckl, and expands it to remap input correctly.\nvertical-swaybar.patch.txt\nHowever, it still lacks the ability to control the rotation. Right now, anchoring left/right results in a fixed 90 degree anticlockwise rotation. Maybe a separate \"flip\" parameter to control that?\nEDIT: Attach the patch. :|\nEDIT2: After far too long, I realized that the original patch from @mstoeckl was actually bottom-to-top, which while potentially what some people might want, definitely does not work out well as a sensible default.\nThe following patch inverts this to top-to-bottom:\nvertical-swaybar-top-to-bottom.patch.txt\nEDIT3: Patches available in the fork https://github.com/kennylevinsen/sway as \"dev/kl-vertical-swaybar\" and \"dev/kl-vertical-swaybar-counterrotated\". Also includes a tray-icon size fix.. Yeah, I have noticed two issues with the counter-rotated text:\n\nWide characters do not increase status bar width and are rendered as if two characters were present. Not entirely sure what to do here\u2014pango seems confused.\nText seems to have weird alignment. Pango is reponsible for positioning the characters, so I'm not entirely sure why a single string of text dances around so much. It also seems to be slightly system dependent, as I at least get perfectly centered workspace buttons.\n\nI don't like the counter-rotated version myself for latin scripts, but I'm not one to judge. However, if we don't want the feature for latin scripts, it should be possible to make pango either write latin scripts as rotated horizontal text, while vertical scripts are automatically counter-rotated. This would be done by removing the \"strong\" hint applied to the pango functions.\nI'm quite satisfied with the non-counter-rotated version, though. Saves space, not too hard to read, and seems to work.. Hmm, I just checked with some Chinese, and the wide character issue might just be a font-awesome problem (I observed it with font-awesome icons). Chinese writing at least renders at a correctly when vertical.\nI also added a branch (dev/kl-vertical-swaybar-counterrotate-cjk-only) where only vertical scripts are counter-rotated (as per pangos understanding of what scripts are natively vertical). This means for example that Chinese text will correctly render vertically, where latin scripts will simply render rotated.\nIf I get time, I'll try to set up a cairo/pango test application to debug the jumpy alignment of counter-rotated latin, just to see if I can get it fixed, just in case we also want to be able to force vertical rendering of latin text.. Okay, so I got a log. However, it seems like Sway tries to modeset DP-1 (the weird screen) to 4k initially, but gets a bad link. Once it comes back up, it only detects 1920x1080 as max mode.\nsway.log\nI'm starting to get suspicious of my hardware, even though both screen and dock works fine elsewhere...\nI'll poke around a bit, and close the ticket if I find a problem elsewhere. In the meanwhile, it appears that turning off the screen for 30 seconds fixes the issue.\n. ",
    "ljedrz": "Yep, that did the trick; I thought the default settings were hardcoded and custom config was building upon / overriding them. When I copied /etc/sway/config to ~/.config/sway/config and added volume control it worked as expected. Thanks!. Idiomatic, but colloquial (not unlike the aforementioned \"binarka\").. I wasn't too sure about this one myself; I found this term used in the docs for Mint and openSUSE. \"display managery\" sounds a bit too informal for my taste.. Good idea \ud83d\udc4d; please feel free to adjust it (otherwise I can do it soon).. Both seem equally rarely used if Google is to be trusted; I don't mind either.. Probably a tad informal for the docs, but I have no strong feelings about this.. ",
    "linusheinz": "I use the version 0.15 from the ach repos,  just wondered because i could enable tap this way. I'm going to compile it now , then i use the wildcard   :)  thanks for the fast response :+1: . ",
    "nameless3": "From the manpage: A view with an urgency hint. Note: This is not currently implemented.. ",
    "svirusxxx": "so how it work in Firefox or Chromium ?. Yes, I use .Xdefaults\nstill nothing happen with termite --display :0\nmy ~/.config/termite/config\n[options]\nurgent_on_bell = true\nmy .Xdefaults setings: \n```\nURxvt.scrollBar: false\nURxvt.scrollBar_right: false\nURxvt.scrollBar_floating: false\nURxvt.scrollstyle: rxvt\n!-- Perl extensions --\nURxvt.perl-ext-common: default,selection-to-clipboard,pasta,matcher,keyboard-select,font-size\nURxvt.keysym.M-u:     perl:url-select:select_next\nURxvt.url-launcher:   /usr/bin/chromium\nURxvt.underlineURLs:  True\nURxvt.matcher.button: 1\nURxvt.keysym.M-Escape:perl:keyboard-select:activate\nURxvt.keysym.Control-Shift-V:     perl:pasta:paste\n! Comment this if you dont want copy when text is selected\nURxvt.clipboard.autocopy: true\n!URxvt.background: #000000\n!URxvt.foreground: #ffffff\n!\n!Linux Colors:\n! Colors\nURxvtbackground: #000000\nURxvtforeground: #B2B2B2\n! black\nURxvtcolor0:  #000000\nURxvtcolor8:  #686868\n! red\nURxvtcolor1:  #B21818\nURxvtcolor9:  #FF5454\n! green\nURxvtcolor2:  #18B218\nURxvtcolor10: #54FF54\n! yellow\nURxvtcolor3:  #B26818\nURxvtcolor11: #FFFF54\n! blue\nURxvtcolor4:  #1818B2\nURxvtcolor12: #5454FF\n! purple\nURxvtcolor5:  #B218B2\nURxvtcolor13: #FF54FF\n! cyan\nURxvtcolor6:  #18B2B2\nURxvtcolor14: #54FFFF\n! white\nURxvtcolor7:  #B2B2B2\nURxvtcolor15: #FFFFFF\nURxvt.keysym.C-Up:     font-size:increase\nURxvt.keysym.C-Down:   font-size:decrease\nURxvt.keysym.C-S-Up:   font-size:incglobal\nURxvt.keysym.C-S-Down: font-size:decglobal\nURxvt.keysym.C-equal:  font-size:reset\nURxvt.keysym.C-slash:  font-size:show\nURxvt.font: xft:Inconsolata:size=8:antialias=false\nURxvt.font-size.step: 2\nURxvt.keysym.Control-Left:    \\033[1;5D\nURxvt.keysym.Control-Right:    \\033[1;5C\nurxvt*urgentOnBell:       true\nURxvt.urgentOnBell: true\n! URxvt.visualBell: true\nXTerm.bellIsUrgent: True\nXft.antialias:  true\nXft.hinting:    true\nXft.rgba:       rgb\nXft.hintstyle:  hintslight\nMozillaXft.antialias:  true\nFirefoxXft.antialias:  true\nmozillaXft.antialias:  true\nfirefoxXft.antialias:  true\n```. ",
    "Olie440": "Does Sway work with other Compositors? (ie. Serving just the roles of X11 server + X11 WM).\nI like Sways layout and ability to have config be ported from i3, but I also want to be able to have a fading effect and shadows.\nI imagine most users coming from i3 would feel the same. . Ok thank you for the information.. ",
    "rektide": "I was not aware of https://github.com/swaywm/swayidle which I guess implements this feature. That link helps me feel like this issue is indeed resolved.. ",
    "robertgzr": "wow that was quick :)\nThis does not address https://github.com/swaywm/sway/issues/3371#issuecomment-451318827 though, which sounds like a good idea as well. ~~I played around with the crashing a bit more... it turns out it happens across at least 2019.131.0 (latest) and 2019.122.1 (the second most recent build I have).~~\n~~Also if you spam the close keybind on startup of osu!, killing it very early on, there is no crash. At least I managed to reproduce that multiple times on both osu! verisons.~~. @RedSoxFan alright the crashing has gone away :+1: . I still see the pointer thing...\nNot sure if that's new or not but when I have the game fullscreen and use the mouse at first, as soon as I do the first tap with the pen the cursor becomes unusable. It's almost like the sensitivity becomes is suddenly really high and the tiniest movement will move it to the other edge of the screen (but gliding along the x-axis or y-axis\nI will get a full debug log and post it here in a minute. @RedSoxFan \n\n\n```\n2019-02-10 22:58:54 - [sway/main.c:152] Linux hibiki 4.20.3-108.current #1 SMP PREEMPT Tue Jan 22 00:34:33 UTC 2019 x86_64 GNU/Linux\n2019-02-10 22:58:54 - [sway/main.c:168] Contents of /etc/lsb-release:\n2019-02-10 22:58:54 - [sway/main.c:152] LSB_VERSION=1.4\n2019-02-10 22:58:54 - [sway/main.c:152] DISTRIB_ID=Solus\n2019-02-10 22:58:54 - [sway/main.c:152] DISTRIB_DESCRIPTION=\"Solus\"\n2019-02-10 22:58:54 - [sway/main.c:152] DISTRIB_RELEASE=3.9999\n2019-02-10 22:58:54 - [sway/main.c:152] DISTRIB_CODENAME=shannon\n2019-02-10 22:58:54 - [sway/main.c:168] Contents of /etc/os-release:\n2019-02-10 22:58:54 - [sway/main.c:152] NAME=\"Solus\"\n2019-02-10 22:58:54 - [sway/main.c:152] VERSION=\"3.9999\"\n2019-02-10 22:58:54 - [sway/main.c:152] ID=\"solus\"\n2019-02-10 22:58:54 - [sway/main.c:152] VERSION_ID=\"3.9999\"\n2019-02-10 22:58:54 - [sway/main.c:152] PRETTY_NAME=\"Solus 3.9999\"\n2019-02-10 22:58:54 - [sway/main.c:152] ANSI_COLOR=\"1;34\"\n2019-02-10 22:58:54 - [sway/main.c:152] HOME_URL=\"https://getsol.us\"\n2019-02-10 22:58:54 - [sway/main.c:152] SUPPORT_URL=\"https://getsol.us/articles/contributing/getting-involved/en/\"\n2019-02-10 22:58:54 - [sway/main.c:152] BUG_REPORT_URL=\"https://dev.getsol.us/\"\n2019-02-10 22:58:54 - [sway/main.c:140] LD_LIBRARY_PATH=(null)\n2019-02-10 22:58:54 - [sway/main.c:140] LD_PRELOAD=(null)\n2019-02-10 22:58:54 - [sway/main.c:140] PATH=/opt/bin:/home/robert/devel/go/bin:/bin:/usr/bin:/home/robert/.cargo/bin:/home/robert/.local/bin:/system/bin:/snap/bin\n2019-02-10 22:58:54 - [sway/main.c:140] SWAYSOCK=(null)\n2019-02-10 22:58:54 - [sway/server.c:39] Preparing Wayland server initialization\n2019-02-10 22:58:54 - [backend/wayland/backend.c:183] Creating wayland backend\n2019-02-10 22:58:54 - [backend/wayland/backend.c:199] Could not connect to remote display: No such file or directory\n2019-02-10 22:58:54 - [backend/session/logind.c:548] Successfully loaded logind session\n2019-02-10 22:58:54 - [backend/backend.c:157] Found 1 GPUs\n2019-02-10 22:58:54 - [backend/drm/backend.c:151] Initializing DRM backend for /dev/dri/card0 (i915)\n2019-02-10 22:58:54 - [backend/drm/drm.c:64] Using atomic DRM interface\n2019-02-10 22:58:54 - [backend/drm/drm.c:176] Found 3 DRM CRTCs\n2019-02-10 22:58:54 - [backend/drm/drm.c:88] Found 9 DRM planes\n2019-02-10 22:58:54 - [backend/drm/drm.c:149] (3 overlay, 3 primary, 3 cursor)\n2019-02-10 22:58:54 - [render/egl.c:149] Using EGL 1.4\n2019-02-10 22:58:54 - [render/egl.c:150] Supported EGL extensions: EGL_ANDROID_blob_cache EGL_ANDROID_native_fence_sync EGL_EXT_buffer_age EGL_EXT_create_context_robustness EGL_EXT_image_dma_buf_import EGL_EXT_image_dma_buf_import_modifiers EGL_IMG_context_priority EGL_KHR_config_attribs EGL_KHR_create_context EGL_KHR_create_context_no_error EGL_KHR_fence_sync EGL_KHR_get_all_proc_addresses EGL_KHR_gl_colorspace EGL_KHR_gl_renderbuffer_image EGL_KHR_gl_texture_2D_image EGL_KHR_gl_texture_3D_image EGL_KHR_gl_texture_cubemap_image EGL_KHR_image EGL_KHR_image_base EGL_KHR_image_pixmap EGL_KHR_no_config_context EGL_KHR_reusable_sync EGL_KHR_surfaceless_context EGL_EXT_pixel_format_float EGL_KHR_wait_sync EGL_MESA_configless_context EGL_MESA_drm_image EGL_MESA_image_dma_buf_export EGL_WL_bind_wayland_display \n2019-02-10 22:58:54 - [render/egl.c:151] EGL vendor: Mesa Project\n2019-02-10 22:58:54 - [render/egl.c:97] Supported dmabuf buffer formats: AR30 XR30 AB30 XB30 AR24 AB24 XR24 XB24 AR15 RG16 R8   R16  GR88 GR32 YUV9 YU11 YU12 YU16 YU24 YVU9 YV11 YV12 YV16 YV24 NV12 NV16 YUYV UYVY \n2019-02-10 22:58:54 - [render/egl.c:217] Failed to obtain a high priority context\n2019-02-10 22:58:54 - [render/gles2/renderer.c:553] Using OpenGL ES 3.2 Mesa 18.3.2\n2019-02-10 22:58:54 - [render/gles2/renderer.c:554] GL vendor: Intel Open Source Technology Center\n2019-02-10 22:58:54 - [render/gles2/renderer.c:555] Supported GLES2 extensions: GL_EXT_blend_minmax GL_EXT_multi_draw_arrays GL_EXT_texture_filter_anisotropic GL_EXT_texture_compression_s3tc GL_EXT_occlusion_query_boolean GL_EXT_texture_compression_dxt1 GL_EXT_texture_format_BGRA8888 GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth24 GL_OES_element_index_uint GL_OES_fbo_render_mipmap GL_OES_mapbuffer GL_OES_rgb8_rgba8 GL_OES_standard_derivatives GL_OES_stencil8 GL_OES_texture_3D GL_OES_texture_float GL_OES_texture_float_linear GL_OES_texture_half_float GL_OES_texture_half_float_linear GL_OES_texture_npot GL_OES_vertex_half_float GL_EXT_texture_sRGB_decode GL_OES_EGL_image GL_OES_depth_texture GL_OES_packed_depth_stencil GL_EXT_texture_type_2_10_10_10_REV GL_OES_get_program_binary GL_APPLE_texture_max_level GL_EXT_discard_framebuffer GL_EXT_read_format_bgra GL_EXT_frag_depth GL_NV_fbo_color_attachments GL_OES_EGL_image_external GL_OES_EGL_sync GL_OES_vertex_array_object GL_OES_viewport_array GL_ANGLE_texture_compression_dxt3 GL_ANGLE_texture_compression_dxt5 GL_EXT_robustness GL_EXT_texture_rg GL_EXT_unpack_subimage GL_NV_draw_buffers GL_NV_read_buffer GL_NV_read_depth GL_NV_read_depth_stencil GL_NV_read_stencil GL_EXT_draw_buffers GL_EXT_map_buffer_range GL_KHR_debug GL_KHR_robustness GL_KHR_texture_compression_astc_ldr GL_OES_depth_texture_cube_map GL_OES_required_internalformat GL_OES_surfaceless_context GL_EXT_color_buffer_float GL_EXT_separate_shader_objects GL_EXT_shader_framebuffer_fetch GL_EXT_shader_integer_mix GL_EXT_tessellation_point_size GL_EXT_tessellation_shader GL_INTEL_conservative_rasterization GL_INTEL_performance_query GL_ANDROID_extension_pack_es31a GL_EXT_base_instance GL_EXT_compressed_ETC1_RGB8_sub_texture GL_EXT_copy_image GL_EXT_draw_buffers_indexed GL_EXT_draw_elements_base_vertex GL_EXT_gpu_shader5 GL_EXT_polygon_offset_clamp GL_EXT_primitive_bounding_box GL_EXT_render_snorm GL_EXT_shader_io_blocks GL_EXT_texture_border_clamp GL_EXT_texture_buffer GL_EXT_texture_cube_map_array GL_EXT_texture_norm16 GL_KHR_blend_equation_advanced GL_KHR_blend_equation_advanced_coherent GL_KHR_context_flush_control GL_KHR_robust_buffer_access_behavior GL_NV_image_formats GL_OES_copy_image GL_OES_draw_buffers_indexed GL_OES_draw_elements_base_vertex GL_OES_gpu_shader5 GL_OES_primitive_bounding_box GL_OES_sample_shading GL_OES_sample_variables GL_OES_shader_io_blocks GL_OES_shader_multisample_interpolation GL_OES_tessellation_point_size GL_OES_tessellation_shader GL_OES_texture_border_clamp GL_OES_texture_buffer GL_OES_texture_cube_map_array GL_OES_texture_stencil8 GL_OES_texture_storage_multisample_2d_array GL_OES_texture_view GL_EXT_blend_func_extended GL_EXT_buffer_storage GL_EXT_geometry_point_size GL_EXT_geometry_shader GL_EXT_shader_samples_identical GL_KHR_no_error GL_KHR_texture_compression_astc_sliced_3d GL_NV_fragment_shader_interlock GL_OES_EGL_image_external_essl3 GL_OES_geometry_point_size GL_OES_geometry_shader GL_OES_shader_image_atomic GL_EXT_clip_cull_distance GL_EXT_disjoint_timer_query GL_MESA_shader_integer_functions GL_EXT_shader_framebuffer_fetch_non_coherent GL_MESA_framebuffer_flip_y \n2019-02-10 22:58:54 - [backend/noop/backend.c:51] Creating noop backend\n2019-02-10 22:58:54 - [sway/main.c:360] Starting sway version  (Feb 10 2019, branch '')\n2019-02-10 22:58:54 - [sway/server.c:53] Initializing Wayland server\n2019-02-10 22:58:54 - [types/wlr_idle.c:242] idle manager created\n2019-02-10 22:58:54 - [types/wlr_idle_inhibit_v1.c:191] idle_inhibit manager created\n2019-02-10 22:58:54 - [types/wlr_relative_pointer_v1.c:228] relative_pointer_v1 manager created\n2019-02-10 22:58:54 - [sway/config.c:350] Loading config from /home/robert/.config/sway/config\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 1: set $mod Mod4\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $mod Mod4\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $mod Mod4\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 2: set $left h\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $left h\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $left h\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 3: set $right l\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $right l\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $right l\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 4: set $up k\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $up k\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $up k\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 5: set $down j\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $down j\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $down j\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 6: set $term alacritty\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $term alacritty\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $term alacritty\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 7: set $_menu /opt/bin/rofi\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $_menu /opt/bin/rofi\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $_menu /opt/bin/rofi\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 8: set $menu $_menu -terminal $term -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: set $menu $_menu -terminal $term -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(set)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: set $menu /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 9: \n2019-02-10 22:58:54 - [sway/config.c:729] Read line 10: input \"1:1:AT_Translated_Set_2_keyboard\" {\n2019-02-10 22:58:54 - [sway/config.c:783] Entering block 'input \"1:1:AT_Translated_Set_2_keyboard\"'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 11:     xkb_layout us\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_layout us\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(input)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_layout us\n2019-02-10 22:58:54 - [sway/commands/input.c:48] entering input block: 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config/input.c:14] new_input_config(1:1:AT_Translated_Set_2_keyboard)\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_layout)\n2019-02-10 22:58:54 - [sway/commands.c:406] Subcommand: xkb_layout us\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_layout)\n2019-02-10 22:58:54 - [sway/commands/input/xkb_layout.c:20] set-xkb_layout for config: 1:1:AT_Translated_Set_2_keyboard layout: us\n2019-02-10 22:58:54 - [sway/config/input.c:160] Adding non-wildcard input config\n2019-02-10 22:58:54 - [sway/config/input.c:177] Config stored for input 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 12:     xkb_variant mac\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_variant mac\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(input)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_variant mac\n2019-02-10 22:58:54 - [sway/commands/input.c:48] entering input block: 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config/input.c:14] new_input_config(1:1:AT_Translated_Set_2_keyboard)\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_variant)\n2019-02-10 22:58:54 - [sway/commands.c:406] Subcommand: xkb_variant mac\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_variant)\n2019-02-10 22:58:54 - [sway/commands/input/xkb_variant.c:20] set-xkb_variant for config: 1:1:AT_Translated_Set_2_keyboard variant: mac\n2019-02-10 22:58:54 - [sway/config/input.c:154] Merging on top of existing input config\n2019-02-10 22:58:54 - [sway/config/input.c:177] Config stored for input 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 13:     xkb_options 'caps:hyper,shift:both_capslock_cancel,grp:alt_space_toggle,eurosign:5,lvl3:ralt_switch_multikey'\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_options 'caps:hyper,shift:both_capslock_cancel,grp:alt_space_toggle,eurosign:5,lvl3:ralt_switch_multikey'\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(input)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: input \"1:1:AT_Translated_Set_2_keyboard\" xkb_options 'caps:hyper,shift:both_capslock_cancel,grp:alt_space_toggle,eurosign:5,lvl3:ralt_switch_multikey'\n2019-02-10 22:58:54 - [sway/commands/input.c:48] entering input block: 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config/input.c:14] new_input_config(1:1:AT_Translated_Set_2_keyboard)\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_options)\n2019-02-10 22:58:54 - [sway/commands.c:406] Subcommand: xkb_options caps:hyper,shift:both_capslock_cancel,grp:alt_space_toggle,eurosign:5,lvl3:ralt_switch_multikey\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(xkb_options)\n2019-02-10 22:58:54 - [sway/commands/input/xkb_options.c:20] set-xkb_options for config: 1:1:AT_Translated_Set_2_keyboard options: caps:hyper,shift:both_capslock_cancel,grp:alt_space_toggle,eurosign:5,lvl3:ralt_switch_multikey\n2019-02-10 22:58:54 - [sway/config/input.c:154] Merging on top of existing input config\n2019-02-10 22:58:54 - [sway/config/input.c:177] Config stored for input 1:1:AT_Translated_Set_2_keyboard\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 14: }\n2019-02-10 22:58:54 - [sway/config.c:800] Exiting block 'input \"1:1:AT_Translated_Set_2_keyboard\"'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 15: \n2019-02-10 22:58:54 - [sway/config.c:729] Read line 16: bindsym $mod+Return exec $term\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Return exec $term\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Return exec alacritty\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Return to command `exec alacritty` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 17: bindsym $mod+Shift+q kill\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+q kill\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+q kill\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+q to command `kill` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 18: bindsym $mod+d exec $menu\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+d exec $menu\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+d exec /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+d to command `exec /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 19: bindsym $mod+Shift+c reload\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+c reload\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+c reload\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+c to command `reload` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 20: bindsym $mod+Shift+e exit\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+e exit\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+e exit\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+e to command `exit` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 21: bindsym $mod+$left focus left\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+$left focus left\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+h focus left\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+h to command `focus left` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 22: bindsym $mod+$down focus down\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+$down focus down\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+j focus down\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+j to command `focus down` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 23: bindsym $mod+$up focus up\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+$up focus up\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+k focus up\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+k to command `focus up` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 24: bindsym $mod+$right focus right\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+$right focus right\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+l focus right\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+l to command `focus right` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 25: bindsym $mod+Shift+$left move left\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+$left move left\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+h move left\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+h to command `move left` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 26: bindsym $mod+Shift+$down move down\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+$down move down\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+j move down\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+j to command `move down` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 27: bindsym $mod+Shift+$up move up\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+$up move up\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+k move up\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+k to command `move up` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 28: bindsym $mod+Shift+$right move right\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+Shift+$right move right\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+Shift+l move right\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+Shift+l to command `move right` for device '*'\n2019-02-10 22:58:54 - [sway/config.c:729] Read line 29: bindsym $mod+f fullscreen\n2019-02-10 22:58:54 - [sway/commands.c:357] Config command: bindsym $mod+f fullscreen\n2019-02-10 22:58:54 - [sway/commands.c:145] find_handler(bindsym)\n2019-02-10 22:58:54 - [sway/commands.c:377] After replacement: bindsym Mod4+f fullscreen\n2019-02-10 22:58:54 - [sway/commands/bind.c:315] bindsym - Bound Mod4+f to command `fullscreen` for device '*'\n2019-02-10 22:58:54 - [sway/server.c:175] Initializing Xwayland\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:242] Loaded cursor theme 'default', available cursors:\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 6407b0e94181790501fd1e167b474872 (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] no-drop (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 9d800788f1b08800ae810202380a0822 (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] whats_this (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] left_ptr_help (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] s-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] vertical-text (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] e29285e634086352946a0e7090d73106 (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] left_side (1 images) 32x32+4,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] ibeam (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] cell (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] alias (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] openhand (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] progress (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size-ver (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] pirate (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] wayland-cursor (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size_ver (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] left_ptr_watch (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] sb_h_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] split_v (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 00008160000006810000408080010102 (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 00000000000000020006000e7e9ffc3f (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] down-arrow (1 images) 32x32+16,28\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] context-menu (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] top_left_corner (1 images) 32x32+5,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] circle (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 03b6e0fcb3499374a867c041f52298f0 (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] top_left_arrow (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] text (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] closedhand (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] right_ptr (1 images) 32x32+28,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] copy (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] crossed_circle (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] right-arrow (1 images) 32x32+28,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] color-picker (1 images) 32x32+4,29\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] dnd-no-drop (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] bottom_side (1 images) 32x32+16,28\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] fleur (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 4498f0e0c1937ffe01fd06f973665830 (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] h_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] half-busy (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] hand2 (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] left-arrow (1 images) 32x32+4,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] right_side (1 images) 32x32+28,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] n-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size_fdiag (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] a2a266d0498c3104214a47bd64ab0fc8 (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] forbidden (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size_hor (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] bottom_right_corner (1 images) 32x32+26,26\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] move (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] wait (23 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] zoom-out (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] b66166c04f8c3109214a4fbd64a50fc8 (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] link (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] top_right_corner (1 images) 32x32+26,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] dnd-move (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] bottom_left_corner (1 images) 32x32+4,26\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size_bdiag (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] d9ce0ab605698f320427677b458ad60b (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] draft (1 images) 32x32+4,29\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] pointing_hand (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] col-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size_all (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size-fdiag (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] fcf21c00b30f7e3f83fe0dfd12e71cff (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 1081e37283d90000800003c07f3ef6bf (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] x-cursor (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] all-scroll (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] hand1 (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] plus (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size-hor (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] e-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] zoom-in (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] default (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] cross (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] row-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] size-bdiag (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] pointer (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] sb_v_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] left_ptr (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 3085a0e285430894940527032f8b26df (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 9081237383d90e509aa00f00170e968f (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] question_arrow (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] v_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] xterm (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] up-arrow (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 640fb0e74195791501fd1ed57b41487f (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 5c6cd98b3f3ebcb1f9c7f1c204630408 (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] crosshair (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] w-resize (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 3ecb610c1bf2410f44200f48c40d3599 (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] pencil (1 images) 32x32+4,29\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] split_h (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] watch (23 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] dnd-none (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] top_side (1 images) 32x32+16,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] help (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] dnd-copy (1 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] 08e8e1c95fe2fc01f976f1e063a24ccd (23 images) 32x32+4,4\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] not-allowed (1 images) 32x32+16,16\n2019-02-10 22:58:54 - [xcursor/wlr_xcursor.c:248] center_ptr (1 images) 32x32+20,4\n2019-02-10 22:58:54 - [sway/server.c:200] Starting backend on wayland display 'wayland-0'\n2019-02-10 22:58:54 - [backend/drm/drm.c:1073] Scanning DRM connectors\n2019-02-10 22:58:54 - [backend/drm/drm.c:1136] Found connector 'eDP-1'\n2019-02-10 22:58:54 - [backend/drm/drm.c:1172] 'eDP-1' connected\n2019-02-10 22:58:54 - [backend/drm/drm.c:1174] Current CRTC: 41\n2019-02-10 22:58:54 - [backend/drm/drm.c:1179] Physical size: 310x170\n2019-02-10 22:58:54 - [backend/drm/drm.c:1190] Detected modes:\n2019-02-10 22:58:54 - [backend/drm/drm.c:1211]   2560x1440@60012\n2019-02-10 22:58:54 - [backend/drm/drm.c:1136] Found connector 'DP-1'\n2019-02-10 22:58:54 - [backend/drm/drm.c:1136] Found connector 'HDMI-A-1'\n2019-02-10 22:58:54 - [backend/drm/drm.c:1136] Found connector 'DP-2'\n2019-02-10 22:58:54 - [backend/drm/drm.c:1136] Found connector 'HDMI-A-2'\n2019-02-10 22:58:54 - [backend/drm/drm.c:907] Reallocating CRTCs\n2019-02-10 22:58:54 - [backend/drm/drm.c:919] State before reallocation:\n2019-02-10 22:58:54 - [backend/drm/drm.c:929]   'eDP-1' crtc=0 state=1 desired_enabled=1\n2019-02-10 22:58:54 - [backend/drm/drm.c:929]   'DP-1' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:929]   'HDMI-A-1' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:929]   'DP-2' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:929]   'HDMI-A-2' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:990] State after reallocation:\n2019-02-10 22:58:54 - [backend/drm/drm.c:995]   'eDP-1' crtc=0 state=1 desired_enabled=1\n2019-02-10 22:58:54 - [backend/drm/drm.c:995]   'DP-1' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:995]   'HDMI-A-1' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:995]   'DP-2' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:995]   'HDMI-A-2' crtc=-1 state=0 desired_enabled=0\n2019-02-10 22:58:54 - [backend/drm/drm.c:468] Reallocating planes\n2019-02-10 22:58:54 - [backend/drm/drm.c:513] Assigning plane -1 -> 33 (type 0) to CRTC 41\n2019-02-10 22:58:54 - [backend/drm/drm.c:513] Assigning plane -1 -> 28 (type 1) to CRTC 41\n2019-02-10 22:58:54 - [backend/drm/drm.c:513] Assigning plane -1 -> 38 (type 2) to CRTC 41\n2019-02-10 22:58:54 - [backend/drm/drm.c:1286] Requesting modeset for 'eDP-1'\n2019-02-10 22:58:54 - [sway/desktop/output.c:592] New output 0x199a1c0: eDP-1\n2019-02-10 22:58:54 - [backend/drm/drm.c:548] Modesetting 'eDP-1' with '2560x1440@60012 mHz'\n2019-02-10 22:58:54 - [backend/drm/drm.c:377] Starting renderer on output 'eDP-1'\n2019-02-10 22:58:54 - [GLES2] FS SIMD8 shader: 5 inst, 0 loops, 24 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 80 to 48 bytes.\n2019-02-10 22:58:54 - [GLES2] FS SIMD16 shader: 5 inst, 0 loops, 34 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 80 to 48 bytes.\n2019-02-10 22:58:54 - [GLES2] VS SIMD8 shader: 28 inst, 0 loops, 116 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 448 to 336 bytes.\n2019-02-10 22:58:54 - [GLES2] FS SIMD16 shader: 2 inst, 0 loops, 0 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 32 to 32 bytes.\n2019-02-10 22:58:54 - [sway/tree/workspace.c:284] Workspace: Generating new workspace name for output eDP-1\n2019-02-10 22:58:54 - [sway/tree/output.c:116] Creating default workspace 1\n2019-02-10 22:58:54 - [sway/tree/workspace.c:73] Adding workspace 1 for output eDP-1\n2019-02-10 22:58:54 - [sway/desktop/layer_shell.c:177] Usable area changed, rearranging output\n2019-02-10 22:58:54 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2019-02-10 22:58:54 - [sway/tree/arrange.c:221] Arranging workspace '1' at 0.000000, 0.000000\n2019-02-10 22:58:54 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2019-02-10 22:58:54 - [sway/tree/arrange.c:221] Arranging workspace '1' at 0.000000, 0.000000\n2019-02-10 22:58:54 - [sway/desktop/transaction.c:420] Transaction 0x1ada170 committing with 2 instructions\n2019-02-10 22:58:54 - [sway/desktop/transaction.c:281] Applying transaction 0x1ada170\n2019-02-10 22:58:54 - [backend/libinput/backend.c:55] Initializing libinput\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added Power Button [0:1]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '0:1:Power_Button'\n2019-02-10 22:58:55 - [sway/input/input-manager.c:101] no fallback seat config - creating default\n2019-02-10 22:58:55 - [sway/config/seat.c:58] Adding non-wildcard seat config\n2019-02-10 22:58:55 - [sway/config/seat.c:75] Config stored for seat seat0\n2019-02-10 22:58:55 - [sway/input/input-manager.c:664] applying seat config for seat seat0\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 0:1:Power_Button to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added Video Bus [0:6]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '0:6:Video_Bus'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 0:6:Video_Bus to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added Lid Switch [0:5]\n2019-02-10 22:58:55 - [backend/libinput/switch.c:20] Created switch for device Lid Switch\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '0:5:Lid_Switch'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 0:5:Lid_Switch to seat seat0\n2019-02-10 22:58:55 - [sway/input/seat.c:570] TODO: configure switch device\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added Sleep Button [0:3]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '0:3:Sleep_Button'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 0:3:Sleep_Button to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added XP-PEN STAR G640 Mouse [10429:148]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '10429:148:XP-PEN_STAR_G640_Mouse'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 10429:148:XP-PEN_STAR_G640_Mouse to seat seat0\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:242] Loaded cursor theme 'default', available cursors:\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 6407b0e94181790501fd1e167b474872 (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] no-drop (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 9d800788f1b08800ae810202380a0822 (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] whats_this (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] left_ptr_help (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] s-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] vertical-text (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] e29285e634086352946a0e7090d73106 (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] left_side (1 images) 32x32+4,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] ibeam (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] cell (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] alias (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] openhand (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] progress (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size-ver (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] pirate (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] wayland-cursor (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size_ver (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] left_ptr_watch (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] sb_h_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] split_v (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 00008160000006810000408080010102 (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 00000000000000020006000e7e9ffc3f (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] down-arrow (1 images) 32x32+16,28\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] context-menu (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] top_left_corner (1 images) 32x32+5,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] circle (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 03b6e0fcb3499374a867c041f52298f0 (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] top_left_arrow (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] text (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] closedhand (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] right_ptr (1 images) 32x32+28,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] copy (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] crossed_circle (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] right-arrow (1 images) 32x32+28,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] color-picker (1 images) 32x32+4,29\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] dnd-no-drop (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] bottom_side (1 images) 32x32+16,28\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] fleur (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 4498f0e0c1937ffe01fd06f973665830 (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] h_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] half-busy (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] hand2 (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] left-arrow (1 images) 32x32+4,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] right_side (1 images) 32x32+28,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] n-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size_fdiag (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] a2a266d0498c3104214a47bd64ab0fc8 (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] forbidden (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size_hor (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] bottom_right_corner (1 images) 32x32+26,26\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] move (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] wait (23 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] zoom-out (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] b66166c04f8c3109214a4fbd64a50fc8 (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] link (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] top_right_corner (1 images) 32x32+26,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] dnd-move (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] bottom_left_corner (1 images) 32x32+4,26\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size_bdiag (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] d9ce0ab605698f320427677b458ad60b (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] draft (1 images) 32x32+4,29\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] pointing_hand (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] col-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size_all (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size-fdiag (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] fcf21c00b30f7e3f83fe0dfd12e71cff (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 1081e37283d90000800003c07f3ef6bf (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] x-cursor (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] all-scroll (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] hand1 (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] plus (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size-hor (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] e-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] zoom-in (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] default (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] cross (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] row-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] size-bdiag (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] pointer (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] sb_v_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] left_ptr (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 3085a0e285430894940527032f8b26df (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 9081237383d90e509aa00f00170e968f (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] question_arrow (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] v_double_arrow (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] xterm (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] up-arrow (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 640fb0e74195791501fd1ed57b41487f (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 5c6cd98b3f3ebcb1f9c7f1c204630408 (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] crosshair (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] w-resize (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 3ecb610c1bf2410f44200f48c40d3599 (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] pencil (1 images) 32x32+4,29\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] split_h (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] watch (23 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] dnd-none (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] top_side (1 images) 32x32+16,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] help (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] dnd-copy (1 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] 08e8e1c95fe2fc01f976f1e063a24ccd (23 images) 32x32+4,4\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] not-allowed (1 images) 32x32+16,16\n2019-02-10 22:58:55 - [xcursor/wlr_xcursor.c:248] center_ptr (1 images) 32x32+20,4\n2019-02-10 22:58:55 - [GLES2] FS SIMD8 shader: 14 inst, 0 loops, 308 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 224 to 160 bytes.\n2019-02-10 22:58:55 - [GLES2] FS SIMD16 shader: 14 inst, 0 loops, 322 cycles, 0:0 spills:fills, Promoted 0 constants, compacted 224 to 160 bytes.\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added XP-PEN STAR G640 Mouse [10429:148]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '10429:148:XP-PEN_STAR_G640_Mouse'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 10429:148:XP-PEN_STAR_G640_Mouse to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added XP-PEN STAR G640 Pen [10429:148]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '10429:148:XP-PEN_STAR_G640_Pen'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 10429:148:XP-PEN_STAR_G640_Pen to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added Integrated Camera: Integrated C [1266:46622]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '1266:46622:Integrated_Camera:_Integrated_C'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 1266:46622:Integrated_Camera:_Integrated_C to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH Mic [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH Headphone [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH HDMI/DP,pcm=3 [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH HDMI/DP,pcm=7 [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH HDMI/DP,pcm=8 [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH HDMI/DP,pcm=9 [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added HDA Intel PCH HDMI/DP,pcm=10 [0:0]\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added AT Translated Set 2 keyboard [1:1]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '1:1:AT_Translated_Set_2_keyboard'\n2019-02-10 22:58:55 - [sway/input/input-manager.c:129] input_manager_libinput_config_keyboard(1:1:AT_Translated_Set_2_keyboard)\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 1:1:AT_Translated_Set_2_keyboard to seat seat0\nxkbcommon: ERROR: Unrecognized RMLVO option \"lvl3:ralt_switch_multikey\" was ignored\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added SynPS/2 Synaptics TouchPad [2:7]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '2:7:SynPS/2_Synaptics_TouchPad'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 2:7:SynPS/2_Synaptics_TouchPad to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added TPPS/2 Elan TrackPoint [2:10]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '2:10:TPPS/2_Elan_TrackPoint'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 2:10:TPPS/2_Elan_TrackPoint to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/events.c:94] Added ThinkPad Extra Buttons [6058:20564]\n2019-02-10 22:58:55 - [sway/input/input-manager.c:467] adding device: '6058:20564:ThinkPad_Extra_Buttons'\n2019-02-10 22:58:55 - [sway/input/seat.c:620] adding device 6058:20564:ThinkPad_Extra_Buttons to seat seat0\n2019-02-10 22:58:55 - [backend/libinput/backend.c:101] libinput successfully initialized\n2019-02-10 22:58:55 - [sway/server.c:211] Running compositor on wayland display 'wayland-0'\n2019-02-10 22:58:59 - [sway/commands/bind.c:331] running command for binding: exec /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:59 - [sway/commands.c:253] Handling command 'exec /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun'\n2019-02-10 22:58:59 - [sway/commands.c:145] find_handler(exec)\n2019-02-10 22:58:59 - [sway/commands/exec_always.c:46] Executing /opt/bin/rofi -terminal alacritty -modi 'drun,run,ssh' -show drun\n2019-02-10 22:58:59 - [sway/commands/exec_always.c:87] Child process created with pid 1639\n2019-02-10 22:58:59 - [sway/tree/root.c:253] Recording workspace for process 1639\n+ exec /usr/bin/rofi -theme hibiki -font 'Iosevka 12' -drun-icon-theme Papirus -show-icons -terminal alacritty -modi drun,run,ssh -show drun\n2019-02-10 22:58:59 - [xwayland/xwayland.c:103] WAYLAND_SOCKET=20 Xwayland :1 -rootless -terminate -listen 18 -listen 19 -wm 57\nThe XKEYBOARD keymap compiler (xkbcomp) reports:\n> Warning:          Unsupported high keycode 372 for name  ignored\n>                   X11 cannot support keycodes above 255.\n>                   This warning only shows for the first high keycode.\nErrors from xkbcomp are not fatal to the X server\n2019-02-10 22:58:59 - [types/wlr_relative_pointer_v1.c:173] relative_pointer_v1 manager bound to client 0x1db6a10\n2019-02-10 22:58:59 - [types/wlr_surface.c:595] New wlr_surface 0x1da4510 (res 0x1d81c40)\n2019-02-10 22:58:59 - [xwayland/xwayland.c:352] sent SIGUSR1 to process 1635\n2019-02-10 22:58:59 - [xwayland/xwayland.c:243] Xserver is ready\n2019-02-10 22:58:59 - [xwayland/xwm.c:1483] xfixes version: 5.0\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (924)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (924)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (2097153)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (2097154)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (2097154)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (2097155)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (924)\n2019-02-10 22:58:59 - [sway/input/cursor.c:1132] denying request to set cursor from unfocused client\n2019-02-10 22:58:59 - [types/wlr_relative_pointer_v1.c:151] relative_pointer_v1 0x1d4bf60 created for client 0x1db6a10\nThe XKEYBOARD keymap compiler (xkbcomp) reports:\n> Warning:          Unsupported maximum keycode 374, clipping.\n>                   X11 cannot support keycodes above 255.\n> Warning:          Unsupported high keycode 372 for name  ignored\n>                   X11 cannot support keycodes above 255.\n>                   This warning only shows for the first high keycode.\n> Error:            Key  added to map for multiple modifiers\n>                   Using Lock, ignoring Shift.\nErrors from xkbcomp are not fatal to the X server\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:1249] unhandled X11 event: 34\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:1249] unhandled X11 event: 34\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (4194305)\n2019-02-10 22:58:59 - [sway/desktop/xwayland.c:583] New xwayland surface title='(null)' class='(null)'\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: rofi\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/xwm.c:368] XCB_ATOM_WM_CLASS: rofi Rofi\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/xwm.c:456] NET_WM_PID 1639\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194305)\n2019-02-10 22:58:59 - [xwayland/xwm.c:688] unhandled X11 property 36 (WM_CLIENT_MACHINE) for window 4194305\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:897] XCB_MAP_NOTIFY (4194305)\n2019-02-10 22:58:59 - [types/wlr_surface.c:595] New wlr_surface 0x1da6b10 (res 0x1d817c0)\n2019-02-10 22:58:59 - [xwayland/xwm.c:1331] New xwayland surface: 0x1da6b10\n2019-02-10 22:58:59 - [xwayland/selection/selection.c:118] not handling selection events: no seat assigned to xwayland\n2019-02-10 22:58:59 - [xwayland/xwm.c:1162] XCB_CLIENT_MESSAGE (4194305)\n2019-02-10 22:58:59 - [xwayland/xwm.c:368] XCB_ATOM_WM_CLASS: rofi Rofi\n2019-02-10 22:58:59 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: rofi\n2019-02-10 22:58:59 - [xwayland/xwm.c:456] NET_WM_PID 1639\n2019-02-10 22:59:00 - [xwayland/xwm.c:1249] unhandled X11 event: 34\n2019-02-10 22:59:00 - [xwayland/xwm.c:1249] unhandled X11 event: 34\n2019-02-10 22:59:04 - [xwayland/xwm.c:1249] unhandled X11 event: 10\n2019-02-10 22:59:04 - [xwayland/xwm.c:911] XCB_UNMAP_NOTIFY (4194305)\n2019-02-10 22:59:04 - [xwayland/xwm.c:806] XCB_DESTROY_NOTIFY (4194305)\n2019-02-10 22:59:04 - [xwayland/xwm.c:1231] xcb error: op 18:0, code 3, sequence 113, value 4194305\n2019-02-10 22:59:04 - [sway/desktop/transaction.c:420] Transaction 0x1d54600 committing with 2 instructions\n2019-02-10 22:59:04 - [sway/desktop/transaction.c:281] Applying transaction 0x1d54600\n2019-02-10 22:59:04 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (4194306)\n2019-02-10 22:59:04 - [sway/desktop/xwayland.c:583] New xwayland surface title='(null)' class='(null)'\n2019-02-10 22:59:04 - [xwayland/xwm.c:806] XCB_DESTROY_NOTIFY (4194306)\n2019-02-10 22:59:04 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (4194312)\n2019-02-10 22:59:04 - [sway/desktop/xwayland.c:583] New xwayland surface title='(null)' class='(null)'\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194312)\n2019-02-10 22:59:04 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: OpenGL test\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194312)\n2019-02-10 22:59:04 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: OpenGL test\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194312)\n2019-02-10 22:59:04 - [xwayland/xwm.c:688] unhandled X11 property 291 (XdndAware) for window 4194312\n2019-02-10 22:59:04 - [xwayland/xwm.c:806] XCB_DESTROY_NOTIFY (4194312)\n2019-02-10 22:59:04 - [types/wlr_surface.c:595] New wlr_surface 0x1d86680 (res 0x1d88640)\n2019-02-10 22:59:04 - [types/wlr_surface.c:595] New wlr_surface 0x1db3180 (res 0x1bfb330)\n2019-02-10 22:59:04 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (4194318)\n2019-02-10 22:59:04 - [sway/desktop/xwayland.c:583] New xwayland surface title='(null)' class='(null)'\n2019-02-10 22:59:04 - [xwayland/xwm.c:806] XCB_DESTROY_NOTIFY (4194318)\n2019-02-10 22:59:04 - [xwayland/xwm.c:792] XCB_CREATE_NOTIFY (4194324)\n2019-02-10 22:59:04 - [sway/desktop/xwayland.c:583] New xwayland surface title='(null)' class='(null)'\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:04 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: osuTK Game Window\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:04 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: osuTK Game Window\n2019-02-10 22:59:04 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:04 - [xwayland/xwm.c:688] unhandled X11 property 291 (XdndAware) for window 4194324\n2019-02-10 22:59:04 - [types/wlr_surface.c:595] New wlr_surface 0x1d9d130 (res 0x1d4bc50)\n2019-02-10 22:59:04 - [types/wlr_surface.c:595] New wlr_surface 0x1d9d450 (res 0x1d5c600)\n2019-02-10 22:59:05 - [xwayland/xwm.c:838] XCB_CONFIGURE_REQUEST (4194324) [2560x1389+597,336]\n2019-02-10 22:59:05 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:05 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:05 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: osu!framework (running \"osu\")\n2019-02-10 22:59:05 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:05 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:05 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: osu!lazer\n2019-02-10 22:59:07 - [xwayland/xwm.c:884] XCB_MAP_REQUEST (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:688] unhandled X11 property 271 (WM_STATE) for window 4194324\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:897] XCB_MAP_NOTIFY (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:1162] XCB_CLIENT_MESSAGE (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:1162] XCB_CLIENT_MESSAGE (4194324)\n2019-02-10 22:59:07 - [types/wlr_surface.c:595] New wlr_surface 0x1d9d770 (res 0x1d7bc80)\n2019-02-10 22:59:07 - [xwayland/xwm.c:1331] New xwayland surface: 0x1d9d770\n2019-02-10 22:59:07 - [xwayland/xwm.c:368] XCB_ATOM_WM_CLASS: osu! osu!\n2019-02-10 22:59:07 - [xwayland/xwm.c:502] WM_PROTOCOLS (3)\n2019-02-10 22:59:07 - [xwayland/xwm.c:532] WM_HINTS (9)\n2019-02-10 22:59:07 - [xwayland/xwm.c:572] WM_NORMAL_HINTS (18)\n2019-02-10 22:59:07 - [sway/tree/view.c:348] View 0x1db34a0 updated CSD to 0\n2019-02-10 22:59:07 - [xwayland/xwm.c:616] MOTIF_WM_HINTS (5)\n2019-02-10 22:59:07 - [xwayland/xwm.c:479] NET_WM_WINDOW_TYPE (1)\n2019-02-10 22:59:07 - [xwayland/xwm.c:418] XCB_ATOM_WM_NAME: osu!lazer\n2019-02-10 22:59:07 - [xwayland/xwm.c:456] NET_WM_PID 1664\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:07 - [sway/tree/root.c:209] Looking up workspace for pid 1664\n2019-02-10 22:59:07 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2019-02-10 22:59:07 - [sway/tree/arrange.c:221] Arranging workspace '1' at 0.000000, 0.000000\n2019-02-10 22:59:07 - [sway/desktop/transaction.c:420] Transaction 0x1dcba20 committing with 3 instructions\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:07 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (924)\n2019-02-10 22:59:07 - [xwayland/xwm.c:1249] unhandled X11 event: 10\n2019-02-10 22:59:07 - [types/wlr_pointer_constraints_v1.c:238] new confined_pointer 0x1dc3dd0 (res 0x1d7b800)\n2019-02-10 22:59:07 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1dc3dd0\n2019-02-10 22:59:07 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1dc3dd0\n2019-02-10 22:59:07 - [sway/desktop/transaction.c:501] Transaction 0x1dcba20 is ready\n2019-02-10 22:59:07 - [sway/desktop/transaction.c:281] Applying transaction 0x1dcba20\n2019-02-10 22:59:07 - [sway/tree/container.c:1058] Container 0x1d9f520 entered output 0x1aa9d00\n2019-02-10 22:59:19 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:19 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:19 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df15f0 (res 0x1df74d0)\n2019-02-10 22:59:19 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df15f0\n2019-02-10 22:59:26 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:26 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:26 - [sway/commands/bind.c:331] running command for binding: fullscreen\n2019-02-10 22:59:26 - [sway/commands.c:253] Handling command 'fullscreen'\n2019-02-10 22:59:26 - [sway/commands.c:145] find_handler(fullscreen)\n2019-02-10 22:59:26 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2019-02-10 22:59:26 - [sway/tree/arrange.c:221] Arranging workspace '1' at 0.000000, 0.000000\n2019-02-10 22:59:26 - [sway/tree/arrange.c:38] Arranging 0x7fff01e17670 horizontally\n2019-02-10 22:59:26 - [sway/desktop/transaction.c:420] Transaction 0x1dc4150 committing with 2 instructions\n2019-02-10 22:59:26 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:26 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df15f0\n2019-02-10 22:59:26 - [sway/desktop/transaction.c:501] Transaction 0x1dc4150 is ready\n2019-02-10 22:59:26 - [sway/desktop/transaction.c:281] Applying transaction 0x1dc4150\n2019-02-10 22:59:32 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:32 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:32 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df21b0 (res 0x1da02f0)\n2019-02-10 22:59:32 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df21b0\n2019-02-10 22:59:33 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df21b0\n2019-02-10 22:59:35 - [types/wlr_surface.c:595] New wlr_surface 0x1df11d0 (res 0x1d7d8a0)\n2019-02-10 22:59:35 - [types/wlr_surface.c:595] New wlr_surface 0x1dfd360 (res 0x1dfd680)\n2019-02-10 22:59:35 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:35 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:35 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df1710 (res 0x1d45140)\n2019-02-10 22:59:35 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df1710\n2019-02-10 22:59:35 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df1710\n2019-02-10 22:59:36 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:36 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:36 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df1710 (res 0x1dbc6b0)\n2019-02-10 22:59:36 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df1710\n2019-02-10 22:59:36 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df1710\n2019-02-10 22:59:37 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:37 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:37 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df1710 (res 0x1dbc6b0)\n2019-02-10 22:59:37 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df1710\n2019-02-10 22:59:37 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df1710\n2019-02-10 22:59:39 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:39 - [xwayland/xwm.c:688] unhandled X11 property 333 (_NET_WM_USER_TIME) for window 4194324\n2019-02-10 22:59:39 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df1710 (res 0x1acf700)\n2019-02-10 22:59:39 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df1710\n2019-02-10 22:59:39 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df1710\n2019-02-10 22:59:42 - [xwayland/xwm.c:1162] XCB_CLIENT_MESSAGE (4194324)\n2019-02-10 22:59:42 - [xwayland/xwm.c:1162] XCB_CLIENT_MESSAGE (4194324)\n2019-02-10 22:59:42 - [types/wlr_pointer_constraints_v1.c:238] new locked_pointer 0x1df1d60 (res 0x1d89a80)\n2019-02-10 22:59:42 - [types/wlr_pointer_constraints_v1.c:351] constrained 0x1df1d60\n2019-02-10 22:59:42 - [xwayland/xwm.c:911] XCB_UNMAP_NOTIFY (4194324)\n2019-02-10 22:59:42 - [sway/tree/arrange.c:190] Usable area for ws: 2560x1440@0,0\n2019-02-10 22:59:42 - [sway/tree/arrange.c:221] Arranging workspace '1' at 0.000000, 0.000000\n2019-02-10 22:59:42 - [types/wlr_pointer_constraints_v1.c:361] unconstrained 0x1df1d60\n2019-02-10 22:59:42 - [sway/desktop/transaction.c:420] Transaction 0x1d4d5c0 committing with 2 instructions\n2019-02-10 22:59:42 - [sway/desktop/transaction.c:281] Applying transaction 0x1d4d5c0\n2019-02-10 22:59:42 - [xwayland/xwm.c:1249] unhandled X11 event: 10\n2019-02-10 22:59:42 - [xwayland/xwm.c:911] XCB_UNMAP_NOTIFY (4194324)\n2019-02-10 22:59:42 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:42 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (4194324)\n2019-02-10 22:59:42 - [xwayland/xwm.c:806] XCB_DESTROY_NOTIFY (4194324)\n2019-02-10 22:59:42 - [xwayland/xwm.c:1231] xcb error: op 18:0, code 3, sequence 182, value 4194324\n2019-02-10 22:59:42 - [xwayland/xwm.c:1231] xcb error: op 18:0, code 3, sequence 183, value 4194324\n2019-02-10 22:59:42 - [xwayland/xwm.c:923] XCB_PROPERTY_NOTIFY (924)\n2019-02-10 22:59:42 - [types/wlr_pointer_constraints_v1.c:47] destroying constraint 0x1df1d60\n2019-02-10 22:59:42 - [sway/input/cursor.c:1132] denying request to set cursor from unfocused client\n2019-02-10 22:59:44 - [backend/libinput/events.c:208] Removing XP-PEN STAR G640 Mouse [10429:148]\n2019-02-10 22:59:44 - [sway/input/input-manager.c:437] removing device: '10429:148:XP-PEN_STAR_G640_Mouse'\n2019-02-10 22:59:44 - [sway/input/seat.c:640] removing device 10429:148:XP-PEN_STAR_G640_Mouse from seat seat0\n2019-02-10 22:59:44 - [backend/libinput/events.c:208] Removing XP-PEN STAR G640 Mouse [10429:148]\n2019-02-10 22:59:44 - [sway/input/input-manager.c:437] removing device: '10429:148:XP-PEN_STAR_G640_Mouse'\n2019-02-10 22:59:44 - [sway/input/seat.c:640] removing device 10429:148:XP-PEN_STAR_G640_Mouse from seat seat0\n2019-02-10 22:59:44 - [backend/libinput/events.c:208] Removing XP-PEN STAR G640 Pen [10429:148]\n2019-02-10 22:59:44 - [sway/input/input-manager.c:437] removing device: '10429:148:XP-PEN_STAR_G640_Pen'\n2019-02-10 22:59:44 - [sway/input/seat.c:640] removing device 10429:148:XP-PEN_STAR_G640_Pen from seat seat0\n2019-02-10 22:59:47 - [sway/commands/bind.c:331] running command for binding: exit\n2019-02-10 22:59:47 - [sway/commands.c:253] Handling command 'exit'\n2019-02-10 22:59:47 - [sway/commands.c:145] find_handler(exit)\n2019-02-10 22:59:47 - [sway/main.c:398] Shutting down sway\n2019-02-10 22:59:47 - [sway/tree/output.c:230] Disabling output 'eDP-1'\n2019-02-10 22:59:47 - [sway/tree/workspace.c:155] Destroying workspace '1'\n2019-02-10 22:59:47 - [sway/desktop/transaction.c:420] Transaction 0x1ada0e0 committing with 2 instructions\n2019-02-10 22:59:47 - [sway/desktop/transaction.c:281] Applying transaction 0x1ada0e0\n2019-02-10 22:59:47 - [sway/tree/output.c:255] Destroying output 'eDP-1'\n2019-02-10 22:59:47 - [sway/desktop/transaction.c:420] Transaction 0x17d0230 committing with 1 instructions\n2019-02-10 22:59:47 - [sway/desktop/transaction.c:281] Applying transaction 0x17d0230\n2019-02-10 22:59:47 - [backend/drm/drm.c:1436] Emitting destruction signal for 'eDP-1'\n2019-02-10 22:59:47 - [backend/drm/drm.c:877] De-allocating CRTC 0 for output 'eDP-1'\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '0:1:Power_Button'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 0:1:Power_Button from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '0:6:Video_Bus'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 0:6:Video_Bus from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '0:5:Lid_Switch'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 0:5:Lid_Switch from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '0:3:Sleep_Button'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 0:3:Sleep_Button from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '1266:46622:Integrated_Camera:_Integrated_C'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 1266:46622:Integrated_Camera:_Integrated_C from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '1:1:AT_Translated_Set_2_keyboard'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 1:1:AT_Translated_Set_2_keyboard from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '2:7:SynPS/2_Synaptics_TouchPad'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 2:7:SynPS/2_Synaptics_TouchPad from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '2:10:TPPS/2_Elan_TrackPoint'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 2:10:TPPS/2_Elan_TrackPoint from seat seat0\n2019-02-10 22:59:47 - [sway/input/input-manager.c:437] removing device: '6058:20564:ThinkPad_Extra_Buttons'\n2019-02-10 22:59:47 - [sway/input/seat.c:640] removing device 6058:20564:ThinkPad_Extra_Buttons from seat seat0\n\n```\n\n\n. ok so after some more looking around it seems to me that it's #3516 that's the culprit here like you said...\nI found that doing sway seat - pointer_constraints disable makes the tablet behave like it used to . ok I tried your patch. Seems like it fixes the random movement of the cursor but now the cursor flickers when I don't keep it perfectly still, it seems to jump to the edges of the screen in between frames which also leads to click events not registering properly most of the time.\nI don't know if it could have anything to do with it but in the patch you set cursor->previous.{x|y} in cursor_motion_absolute while they also get updated at the end of the function by cursor_send_pointer_motion\nIf it would help you I can try to get a screen recording of what I see (I have gotten wlstream to work before). It's hard to describe what I'm seeing, but it's worse in fullscreen vs windows (which might be on the client side).\nIf you watch at the end there is still some strange jumpiness to the cursor when you hold it down:\nhttps://streamable.com/4x2q1\n(I used the mouse to get to the main menu and to enable raw input). Hey sorry for taking a while to respond.\nI updated to 1.0-rc5 and applied your patch on top which seems to fix the jittering but still make the pen jump to a seemingly random spot on the output.\nRunning sway seat - pointer_constraint disable fixes the jumping and everything works as expected.\nI noticed something else while testing though... I should probably open another issue for it but are map_from_region commands not applied to tablet tools anymore?. ",
    "moretheard": "amdgpu - kernel 4.20.1\nsway 1.0-beta.2 \nkitty 0.13.2\nwayland and x backend are affected.\nAnother way to reproduce: resize: $mod+r and blank areas are filled with dead pixels.\nAnd another one same issue?\nIf i start a term (kitty) blank term. I have to start another instance and switch between them, then both show up.\nSomething is out of sync?!. ",
    "jnduli": "Thanks. I tried this and it worked. This is my configuration so far\noutput eDP-1 resolution 1920x1080 position 0,0\noutput HDMI-A-1 resolution 1280x1024 position 1920,0. ",
    "johnchen902": "https://github.com/swaywm/wlroots/blob/master/protocol/input-method-unstable-v2.xml\nIs this the v2 of the protocol?. My environment: Arch Linux, using the packages on AUR (aee99421 and swaywm/wlroots@41af8d84).\nBuilt packages: packages.zip\nCore dump: sway-21197.core.gz\nStack trace:\n#0  0x00007fcbf1941093 wl_list_insert (libwayland-server.so.0)\n#1  0x00007fcbf18fce2b wlr_signal_emit_safe (libwlroots.so.0)\n#2  0x00007fcbf18d612b wlr_data_source_destroy (libwlroots.so.0)\n#3  0x00007fcbf18d63a8 data_source_handle_resource_destroy (libwlroots.so.0)\n#4  0x00007fcbf193cc7f n/a (libwayland-server.so.0)\n#5  0x00007fcbf193ccef wl_resource_destroy (libwayland-server.so.0)\n#6  0x00007fcbf09a96d0 ffi_call_unix64 (libffi.so.6)\n#7  0x00007fcbf09a90a0 ffi_call (libffi.so.6)\n#8  0x00007fcbf19406ff n/a (libwayland-server.so.0)\n#9  0x00007fcbf193d0a3 n/a (libwayland-server.so.0)\n#10 0x00007fcbf193e702 wl_event_loop_dispatch (libwayland-server.so.0)\n#11 0x00007fcbf193d2ac wl_display_run (libwayland-server.so.0)\n#12 0x000055e4d42f6e6c server_run (sway)\n#13 0x000055e4d42f63b5 main (sway)\n#14 0x00007fcbf147d223 __libc_start_main (libc.so.6)\n#15 0x000055e4d42e8dce _start (sway)\n\nAnother run with valgrind; valgrind output: sway-valgrind-29787.log\nExcerpt:\n==29787== Invalid read of size 8\n==29787==    at 0x4EC0080: wl_list_insert (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4F2FE2A: wlr_signal_emit_safe (signal.c:19)\n==29787==    by 0x4F0912A: wlr_data_source_destroy (wlr_data_source.c:42)\n==29787==    by 0x4F0912A: wlr_data_source_destroy (wlr_data_source.c:37)\n==29787==    by 0x4F093A7: data_source_handle_resource_destroy (wlr_data_source.c:215)\n==29787==    by 0x4EBBC7E: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBBCEE: wl_resource_destroy (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x5E536CF: ffi_call_unix64 (in /usr/lib/libffi.so.6.0.4)\n==29787==    by 0x5E5309F: ffi_call (in /usr/lib/libffi.so.6.0.4)\n==29787==    by 0x4EBF6FE: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBC0A2: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBD701: wl_event_loop_dispatch (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBC2AB: wl_display_run (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==  Address 0x97b07d8 is 120 bytes inside a block of size 208 free'd\n==29787==    at 0x48389AB: free (vg_replace_malloc.c:530)\n==29787==    by 0x4EBA35C: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBA98B: wl_resource_queue_event (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBBD0E: wl_resource_destroy (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4F2AB31: wlr_surface_send_frame_done (wlr_surface.c:975)\n==29787==    by 0x126E79: send_frame_done_iterator (output.c:361)\n==29787==    by 0x126374: output_for_each_surface_iterator (output.c:124)\n==29787==    by 0x4F28F49: surface_for_each_surface (wlr_surface.c:981)\n==29787==    by 0x126424: output_surface_for_each_surface (output.c:142)\n==29787==    by 0x1267A7: output_unmanaged_for_each_surface (output.c:208)\n==29787==    by 0x126B2A: output_for_each_surface (output.c:292)\n==29787==    by 0x126EA3: send_frame_done (output.c:365)\n==29787==  Block was alloc'd at\n==29787==    at 0x483777F: malloc (vg_replace_malloc.c:299)\n==29787==    by 0x4EBE47A: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBEC60: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBA318: ??? (in /usr/lib/libwayland-server.so.0.1.0)\n==29787==    by 0x4EBA98B: wl_resource_queue_event (in /usr/lib/libwayland-server.so.0.1.0)\n(same stack trace as the free)...\n==29787== \n==29787== Invalid write of size 8\n==29787==    at 0x4EC008B: wl_list_insert (in /usr/lib/libwayland-server.so.0.1.0)\n(same address and stack trace as the read)...\n==29787== \n==29787== Invalid write of size 8\n==29787==    at 0x4EC0093: wl_list_insert (in /usr/lib/libwayland-server.so.0.1.0)\n(same stack trace as the read)...\n==29787==  Address 0x6e65722f3273656c is not stack'd, malloc'd or (recently) free'd\n==29787== \n==29787== \n==29787== Process terminating with default action of signal 11 (SIGSEGV): dumping core\n. I think I've found the culprit. The assertion in the following patch fails after two arbitrary drags. This means seat->drag_source_destroy is listening to two signals at a time and will lead to memory corruption when the wlr_data_sources are ultimately destroyed.\n```\n--- a/types/data_device/wlr_drag.c\n+++ b/types/data_device/wlr_drag.c\n@@ -490,6 +490,7 @@ bool seat_client_start_drag(struct wlr_seat_client *client,\n        seat->drag = drag; // TODO: unset this thing somewhere\n        seat->drag_serial = serial;\n\n\nassert(seat->drag_source == NULL);\n        seat->drag_source = source;\n        if (source != NULL) {\n                seat->drag_source_destroy.notify = seat_handle_drag_source_destroy;\n```. In case arbitrary drags do not works for you, here is a specific one that works for me:\n\n\nOpen Firefox 65 with GDK_BACKEND=wayland\n\nOpen a new tab\nDrag the tab at the right to the left\n\nDrag the tab at the right... (the assertion should fail as soon as you start dragging). And I can now reliably crash sway (without the assertion patch).\n\n\nOpen Firefox 65 with GDK_BACKEND=wayland\n\nOpen a new tab\nDrag the tab at the right to the left\nDrag the tab at the right to the left again\nClose Firefox. I'm now on 0952c9f9 and swaywm/wlroots@f24e1725 but still get this crash. Voting to reopen.\n\nBuilt packages: packages.zip\nCore dump: sway-32499.core.gz\nStack trace is unchanged.\n. xwm->seat_drag_source_destroy can listen to two signals at once, in a similar fashion.\nTo reproduce:\n1. Open Firefox 65 with GDK_BACKEND=wayland\n1. Open gvim\n1. Leave the gvim opened and go back to Firefox\n1. Open a new tab\n1. Drag the tab at the right to the left\n1. Drag the tab at the right to the left again\n1. Close Firefox\nNo need to reopen; pull request incoming.. > Can you guys try out swaywm/wlroots#1529 to make sure it also fixes this issue?\nThis fix works for me. I can no longer reproduce the crash.. cairo_create(NULL) returns a nil:\n\ncairo_t *\ncairo_create (cairo_surface_t *target)\n{\n    if (unlikely (target == NULL))\n  return _cairo_create_in_error (_cairo_error (CAIRO_STATUS_NULL_POINTER));\n\ncairo_set_font_options(nil) is a no-op and cairo_get_font_options(nil) returns default font options.\n\n```\nvoid\ncairo_set_font_options (cairo_t                    cr,\n          const cairo_font_options_t options)\n{\n    cairo_status_t status;\nif (unlikely (cr->status))\n\nreturn;\n```\n```\nvoid\ncairo_get_font_options (cairo_t              cr,\n          cairo_font_options_t options)\n{\n    / check that we aren't trying to overwrite the nil object /\n    if (cairo_font_options_status (options))\n  return;\nif (unlikely (cr->status)) {\n\n_cairo_font_options_init_default (options);\n  return;\n    }\n```\n\nTherefore, I think such behavior is by-design. I'll update the (in-code) comment.. ",
    "Moonlight-Angel": "Not sure, the issue you're referencing talks about persistent tooltips after switching workspace. I do get those too from time to time, but I'm talking more about the fact that Firefox still thinks the \"mouse pointer\" is hovering over one of its tabs, and triggers the tab tooltip even after the mouse has left the window.\nMaybe the underlying problem is the same in both cases ? Can't tell.. ",
    "sanga": "well yes, I assume the server crashed too as I was kicked out to gdm. This is the corresponding server stack if I did this correctly:\n``\nCore was generated bysway'.\nProgram terminated with signal SIGABRT, Aborted.\n0  __GI_raise (sig=) at ../sysdeps/unix/sysv/linux/raise.c:50\n50  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.\n[Current thread is 1 (Thread 0x7f5260503a80 (LWP 17025))]\n(gdb) bt full\n0  0x00007f5263630077 in __GI_raise (sig=) at ../sysdeps/unix/sysv/linux/raise.c:50\n    set = {__val = {512, 140721613892272, 320, 139991831767067, 2, 139991834230223, 93907878977816, 140721613892352, 93907878977912, 4294967296, 551061220111, 4294967296, 1547559741, 140721613892160, 180388626453, 64424509455}}\n    pid = <optimized out>\n    tid = <optimized out>\n\n1  0x00005568a1c43e55 in _sway_assert (condition=false, format=0x5568a1c4a178 \"[%s:%d] %s:cannot auto-assign output for layer\") at ../common/log.c:27\n    args = {{gp_offset = 40, fp_offset = 48, overflow_arg_area = 0x7ffc4dceebe0, reg_save_area = 0x7ffc4dceeb20}}\n\n2  0x00005568a1c066e7 in handle_layer_shell_surface (listener=0x5568a1c61e08 , data=0x5568a2bc3f70) at ../sway/desktop/layer_shell.c:382\n    output = 0x0\n    seat = 0x5568a2808350\n    layer_surface = 0x5568a2bc3f70\n    server = 0x5568a1c61da0 <server>\n    __func__ = \"handle_layer_shell_surface\"\n    sway_layer = 0x7ffc4dceed30\n    output = 0x7f52638cfef9 <_wlr_log+182>\n    old_state =\n      {anchor = 1670263664, exclusive_zone = 32594, margin = {top = 368, right = 3, bottom = 16, left = 48}, keyboard_interactive = 64, desired_width = 32764, desired_height = 1305406592, actual_width = 32764, actual_height = 2750749440}\n\n3  0x00007f52638d18e7 in wlr_signal_emit_safe (signal=0x5568a2807900, data=0x5568a2bc3f70) at ../util/signal.c:29\n    pos = 0x5568a1c61e08 <server+104>\n    l = 0x5568a1c61e08 <server+104>\n    cursor = {link = {prev = 0x5568a1c61e08 <server+104>, next = 0x7ffc4dceed00}, notify = 0x7f52638d1831 <handle_noop>}\n    end = {link = {prev = 0x7ffc4dceece0, next = 0x5568a2807900}, notify = 0x7f52638d1831 <handle_noop>}\n\n4  0x00007f52638bc626 in layer_surface_role_commit (wlr_surface=0x5568a2c0f980) at ../types/wlr_layer_shell_v1.c:293\n    surface = 0x5568a2bc3f70\n    __PRETTY_FUNCTION__ = \"layer_surface_role_commit\"\n\n5  0x00007f52638c8f9e in surface_commit_pending (surface=0x5568a2c0f980) at ../types/wlr_surface.c:372\n    invalid_buffer = false\n    subsurface = 0x5568a2c0fb68\n\n6  0x00007f52638c921c in surface_commit (client=0x5568a29eaf50, resource=0x5568a2c22e30) at ../types/wlr_surface.c:444\n    surface = 0x5568a2c0f980\n    subsurface = 0x0\n\n7  0x00007f526255fdae in ffi_call_unix64 () at /usr/lib/x86_64-linux-gnu/libffi.so.6\n8  0x00007f526255f71f in ffi_call () at /usr/lib/x86_64-linux-gnu/libffi.so.6\n9  0x00007f52639168fd in  () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n10 0x00007f5263913379 in  () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n11 0x00007f5263914942 in wl_event_loop_dispatch () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n12 0x00007f526391356a in wl_display_run () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n13 0x00005568a1c04a05 in server_run (server=0x5568a1c61da0 ) at ../sway/server.c:195\n14 0x00005568a1c0400e in main (argc=1, argv=0x7ffc4dcef4b8) at ../sway/main.c:402\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options =\n        {{name = 0x5568a1c49d04 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x5568a1c49d09 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x5568a1c49d10 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x5568a1c49d19 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x5568a1c49d1f \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x5568a1c49d27 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x5568a1c49d2f \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x5568a1c49d3e \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x5568a1c49d4e \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x5568a1c498c0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n```. Could be #3110 perhaps (sorry if this is a dupe). swaylock is at 37280a btw. \nversion info\nsway version 1.0-rc1-50-g98b40d31 (Feb 13 2019, branch 'master')\nwlroots=20d404a091fa92f56be4825bbaf89e4027fda154\n. happened on switching screens for me. I don't, I'm sorry. Just got this again. For me it always occurs when switching monitors. And it often (but not always) when I do that. I don't suppose there's a lot of point in this but FWIW here's the stack:\n```\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x0000565484f83cf1 in output_render (output=0x565486a62370, when=0x7ffc8cccd510, damage=0x7ffc8cccd520) at ../sway/desktop/render.c:1006\n1006            if (fullscreen_con->view) {\n[Current thread is 1 (Thread 0x7ffbec346a80 (LWP 9656))]\n0  0x0000565484f83cf1 in output_render (output=0x565486a62370, when=0x7ffc8cccd510, damage=0x7ffc8cccd520) at ../sway/desktop/render.c:1006\n    clear_color = {0, 0, 0, 1}\n    nrects = 1\n    rects = 0x7ffc8cccd520\n    wlr_output = 0x565486ae6cc0\n    renderer = 0x565486a426a0\n    __PRETTY_FUNCTION__ = \"output_render\"\n    workspace = 0x565486e34900\n    fullscreen_con = 0x18\n    seat = 0x1\n    focus = 0x7ffc00000002\n    width = -1932733328\n    height = 1\n    transform = 32764\n\n1  0x0000565484f80139 in damage_handle_frame (listener=0x565486a62500, data=0x565486a62550) at ../sway/desktop/output.c:386\n    output = 0x565486a62370\n    now = {tv_sec = 24351, tv_nsec = 330463037}\n    needs_swap = true\n    damage = {extents = {x1 = 0, y1 = 0, x2 = 2560, y2 = 1440}, data = 0x0}\n\n2  0x00007ffbef71abff in wlr_signal_emit_safe (signal=0x565486a625b0, data=0x565486a62550) at ../util/signal.c:29\n    pos = 0x565486a62500\n    l = 0x565486a62500\n    cursor = {link = {prev = 0x565486a62500, next = 0x7ffc8cccd590}, notify = 0x7ffbef71ab49 <handle_noop>}\n    end = {link = {prev = 0x7ffc8cccd570, next = 0x565486a625b0}, notify = 0x7ffbef71ab49 <handle_noop>}\n\n3  0x00007ffbef707426 in output_handle_frame (listener=0x565486a62648, data=0x565486ae6cc0) at ../types/wlr_output_damage.c:50\n    output_damage = 0x565486a62550\n\n4  0x00007ffbef71abff in wlr_signal_emit_safe (signal=0x565486ae6de0, data=0x565486ae6cc0) at ../util/signal.c:29\n    pos = 0x565486a62648\n    l = 0x565486a62648\n    cursor = {link = {prev = 0x565486a62648, next = 0x7ffc8cccd630}, notify = 0x7ffbef71ab49 <handle_noop>}\n    end = {link = {prev = 0x7ffc8cccd610, next = 0x565486ae6de0}, notify = 0x7ffbef71ab49 <handle_noop>}\n\n5  0x00007ffbef70a437 in wlr_output_send_frame (output=0x565486ae6cc0) at ../types/wlr_output.c:437\n6  0x00007ffbef6cb95d in page_flip_handler (fd=9, seq=36567, tv_sec=24351, tv_usec=280131, data=0x565486ae6cc0) at ../backend/drm/drm.c:1330\n    conn = 0x565486ae6cc0\n    drm = 0x5654868b2530\n    present_time = {tv_sec = 24351, tv_nsec = 280131000}\n    present_event = {output = 0x565486ae6cc0, when = 0x7ffc8cccd6b0, seq = 36567, refresh = 16663333, flags = 7}\n\n7  0x00007ffbede68b55 in drmHandleEvent () at /usr/lib/x86_64-linux-gnu/libdrm.so.2\n8  0x00007ffbef6cb9e2 in handle_drm_event (fd=9, mask=1, data=0x0) at ../backend/drm/drm.c:1340\n    event = {version = 2, vblank_handler = 0x0, page_flip_handler = 0x7ffbef6cb7f4 <page_flip_handler>, page_flip_handler2 = 0x0, sequence_handler = 0x0}\n\n9  0x00007ffbef760942 in wl_event_loop_dispatch () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n10 0x00007ffbef75f56a in wl_display_run () at /usr/lib/x86_64-linux-gnu/libwayland-server.so.0\n11 0x0000565484f7d037 in server_run (server=0x565484fdde40 ) at ../sway/server.c:212\n12 0x0000565484f7c580 in main (argc=1, argv=0x7ffc8cccdf08) at ../sway/main.c:403\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x565484fc4e80 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x565484fc4e85 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x565484fc4e8c \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x565484fc4e95 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x565484fc4e9b \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x565484fc4ea3 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x565484fc4eab \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x565484fc4eba \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x565484fc4eca \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x0\n    usage = 0x565484fc4948 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n    c = -1\n\n```\nversion info\nsway version 1.0-rc1-85-gc939453b (Feb 19 2019, branch 'master')\nwlroots=b455df3b9172286f7af137ffdc7b0b5735e9ddb3\n. I\u2019ll give it a crack. It\u2019ll be tomorrow before I\u2019m back at a multi monitor setup\nthough\nOn Wed, 20 Feb 2019 at 18.58, Brian Ashworth notifications@github.com\nwrote:\n\n@sanga https://github.com/sanga Since you seem to be able to reproduce\nthis to some degree, would you be willing to attempt running with ASAN and\nupload the debug log? You would need to build sway with the following: meson\nbuild -Ddb_sanitize=address. Note that this will still cause sway to\ncrash and may change the time in which it does, but may give some good\ninformation if it is a use-after-free or something similar.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/swaywm/sway/issues/3658#issuecomment-465665225, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAAIKBe8iEQzDa_Bb9EpwuD2-DK7hOCBks5vPX7HgaJpZM4a1ne8\n.\n. Your guess was correct. It's a use after free situation. \n\n```\n==19864==ERROR: AddressSanitizer: heap-use-after-free on address 0x61200016ac88 at pc 0x5623ce5bb0af bp 0x7ffea3197550 sp 0x7ffea3197540\nREAD of size 8 at 0x61200016ac88 thread T0\n    #0 0x5623ce5bb0ae in output_render ../sway/desktop/render.c:993\n    #1 0x5623ce5aeb32 in damage_handle_frame ../sway/desktop/output.c:386\n    #2 0x7f4650235c0f in wlr_signal_emit_safe ../util/signal.c:29\n    #3 0x7f4650222436 in output_handle_frame ../types/wlr_output_damage.c:50\n    #4 0x7f4650235c0f in wlr_signal_emit_safe ../util/signal.c:29\n    #5 0x7f4650225447 in wlr_output_send_frame ../types/wlr_output.c:437\n    #6 0x7f46501e695c in page_flip_handler ../backend/drm/drm.c:1330\n    #7 0x7f464e963b54 in drmHandleEvent (/usr/lib/x86_64-linux-gnu/libdrm.so.2+0xbb54)\n    #8 0x7f46501e69e1 in handle_drm_event ../backend/drm/drm.c:1340\n    #9 0x7f4650279941 in wl_event_loop_dispatch (/usr/lib/x86_64-linux-gnu/libwayland-server.so.0+0x9941)\n    #10 0x7f4650278569 in wl_display_run (/usr/lib/x86_64-linux-gnu/libwayland-server.so.0+0x8569)\n    #11 0x5623ce5a574b in server_run ../sway/server.c:212\n    #12 0x5623ce5a3cd7 in main ../sway/main.c:403\n    #13 0x7f464ff7109a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2409a)\n    #14 0x5623ce585f99 in _start (/usr/local/bin/sway+0x35f99)\n0x61200016ac88 is located 200 bytes inside of 280-byte region [0x61200016abc0,0x61200016acd8)\nfreed by thread T0 here:\n    #0 0x7f4650d8fb70 in free (/usr/lib/x86_64-linux-gnu/libasan.so.5+0xedb70)\n    #1 0x5623ce645b58 in workspace_destroy ../sway/tree/workspace.c:157\n    #2 0x5623ce5bc399 in transaction_destroy ../sway/desktop/transaction.c:70\n    #3 0x5623ce5bf225 in transaction_progress_queue ../sway/desktop/transaction.c:349\n    #4 0x5623ce5c081e in set_instruction_ready ../sway/desktop/transaction.c:499\n    #5 0x5623ce5c0a26 in transaction_notify_view_ready_by_size ../sway/desktop/transaction.c:517\n    #6 0x5623ce650246 in handle_commit ../sway/desktop/xwayland.c:329\n    #7 0x7f4650235c0f in wlr_signal_emit_safe ../util/signal.c:29\n    #8 0x7f465022cf98 in surface_commit_pending ../types/wlr_surface.c:375\n    #9 0x7f465022d1fc in surface_commit ../types/wlr_surface.c:444\n    #10 0x7f464ee9ddad in ffi_call_unix64 (/usr/lib/x86_64-linux-gnu/libffi.so.6+0x5dad)\npreviously allocated by thread T0 here:\n    #0 0x7f4650d90138 in calloc (/usr/lib/x86_64-linux-gnu/libasan.so.5+0xee138)\n    #1 0x5623ce645040 in workspace_create ../sway/tree/workspace.c:81\n    #2 0x5623ce64bd31 in output_enable ../sway/tree/output.c:116\n    #3 0x5623ce5b0d23 in handle_new_output ../sway/desktop/output.c:620\n    #4 0x7f4650235c0f in wlr_signal_emit_safe ../util/signal.c:29\n    #5 0x7f46501ee979 in new_output_reemit ../backend/multi/backend.c:143\n    #6 0x7f4650235c0f in wlr_signal_emit_safe ../util/signal.c:29\n    #7 0x7f46501e6787 in scan_drm_connectors ../backend/drm/drm.c:1283\n    #8 0x7f46501e15ea in backend_start ../backend/drm/backend.c:26\n    #9 0x7f46501dfc50 in wlr_backend_start ../backend/backend.c:36\n    #10 0x7f46501ee569 in multi_backend_start ../backend/multi/backend.c:31\n    #11 0x7f46501dfc50 in wlr_backend_start ../backend/backend.c:36\n    #12 0x5623ce5a55ef in server_start ../sway/server.c:201\n    #13 0x5623ce5a3bce in main ../sway/main.c:390\n    #14 0x7f464ff7109a in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x2409a)\nSUMMARY: AddressSanitizer: heap-use-after-free ../sway/desktop/render.c:993 in output_render\nShadow bytes around the buggy address:\n  0x0c2480025540: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\n  0x0c2480025550: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\n  0x0c2480025560: 00 00 00 00 00 00 00 00 00 00 fa fa fa fa fa fa\n  0x0c2480025570: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n  0x0c2480025580: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n=>0x0c2480025590: fd[fd]fd fd fd fd fd fd fd fd fd fa fa fa fa fa\n  0x0c24800255a0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n  0x0c24800255b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\n  0x0c24800255c0: fd fd fd fd fd fd fd fd fd fd fa fa fa fa fa fa\n  0x0c24800255d0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\n  0x0c24800255e0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd\nShadow byte legend (one shadow byte represents 8 application bytes):\n  Addressable:           00\n  Partially addressable: 01 02 03 04 05 06 07 \n  Heap left redzone:       fa\n  Freed heap region:       fd\n  Stack left redzone:      f1\n  Stack mid redzone:       f2\n  Stack right redzone:     f3\n  Stack after return:      f5\n  Stack use after scope:   f8\n  Global redzone:          f9\n  Global init order:       f6\n  Poisoned by user:        f7\n  Container overflow:      fc\n  Array cookie:            ac\n  Intra object redzone:    bb\n  ASan internal:           fe\n  Left alloca redzone:     ca\n  Right alloca redzone:    cb\n==19864==ABORTING\n2019-02-21 07:51:09 - [common/ipc-client.c:80] Unable to receive IPC response\n2019-02-21 07:51:09 - Gdk-Message: 07:51:09.625: Error reading events from display: Connection reset by peer\n[swaybg/main.c:295] Missing a required Wayland interface\n2019-02-21 07:51:09 - [common/ipc-client.c:80] Unable to receive IPC response\n(EE) failed to read Wayland events: Connection reset by peer\n```\nversion:\nsway version 1.0-rc1-92-gbe0588ef (Feb 20 2019, branch 'master')\nwlroots=fc9838b15e8d4f0d5a80749902b1d190978caf9f\nHere's the last 1000 lines of the log (sorry, I didn't want to vet the rest of it for personal data, hopefully that's enough)\nhttps://gist.github.com/sanga/97ac88e7ac2c834c3b8fce956b80c05c\nSeems like there is a few other leaks there too but nothing too dramatic.. I\u2019ll see if I can repro and get it. ",
    "anelam": "I have similar problems. My laptop is attached to a docking station. When I start sway from the tty, sometimes all screen stay black. When using the laptop without the attached displays (docking station) I have no problems. (I will provide logs later)\nAdditionally one of the two attached displays stay black after unlocking from swaylock with dpms management via swayidle. (log)\nI use the latest master versions.. ",
    "daanjderuiter": "When running sway from the command line inside i3 (no debug flag), the sway session stops in the described fashion with the message \"sway: symbol lookup error: sway: undefined symbol: wlr_xdg_surface_send_close\". These errors usually indicate to me that wlroots needs updating, but in this case both sway and wlroots are at their most recent versions as provided in the Arch User Repo, which directly source their respective GitHub-repos.. Purging any sway-related files and reinstalling fixed the issue. ",
    "mnd999": "Does temporarily commenting out your output lines fix it? I've had the same thing and that fixes it for me.\nI am able to add them back in once sway is up and running.. @emersion No, that patch doesn't help me either.\nMy backtrace:\n``\nReading symbols from /home/mark/dev/sway/build/sway/sway...done.\n[New LWP 2626]\n[New LWP 2632]\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/usr/lib/libthread_db.so.1\".\nCore was generated bydev/sway/build/sway/sway'.\nProgram terminated with signal SIGSEGV, Segmentation fault.\n0  0x000056339d1498ea in arrange_output (output=0x56339dd87100) at ../sway/tree/arrange.c:243\n243     output->lx = output_box->x;\n[Current thread is 1 (Thread 0x7eff316ef9c0 (LWP 2626))]\n(gdb) bt\n0  0x000056339d1498ea in arrange_output (output=0x56339dd87100) at ../sway/tree/arrange.c:243\n1  0x000056339d119fb4 in arrange_layers (output=0x56339dd87100) at ../sway/desktop/layer_shell.c:180\n2  0x000056339d11c41d in handle_transform (listener=0x56339dd87218, data=0x56339dc83190)\nat ../sway/desktop/output.c:530\n\n3  0x00007eff33cd307e in wlr_signal_emit_safe (signal=0x56339dc83320, data=0x56339dc83190)\nat ../util/signal.c:29\n\n4  0x000056339d13181d in apply_output_config (oc=0x56339dc78b80, output=0x56339dd87100)\nat ../sway/config/output.c:226\n\n5  0x000056339d15529a in output_enable (output=0x56339dd87100, oc=0x56339dc78b80) at ../sway/tree/output.c:81\n6  0x000056339d11c80b in handle_new_output (listener=0x56339d176c58 , data=0x56339dc83190)\nat ../sway/desktop/output.c:607\n\n7  0x00007eff33cd307e in wlr_signal_emit_safe (signal=0x56339db6c008, data=0x56339dc83190)\nat ../util/signal.c:29\n\n8  0x00007eff33cd307e in wlr_signal_emit_safe\n(signal=signal@entry=0x56339db721e8, data=data@entry=0x56339dc83190) at ../util/signal.c:29\n\n9  0x00007eff33c9c30d in scan_drm_connectors (drm=) at ../backend/drm/drm.c:1256\n10 0x00007eff33c99183 in backend_start (backend=) at ../backend/drm/backend.c:26\n11 0x00007eff33ca26d6 in multi_backend_start (wlr_backend=0x56339db6bfe0) at ../backend/multi/backend.c:31\n12 0x000056339d118b75 in server_start (server=0x56339d176c20 ) at ../sway/server.c:184\n13 0x000056339d1180a6 in main (argc=1, argv=0x7ffc6197bba8) at ../sway/main.c:378\n```. Same, thanks! :+1: . ",
    "m0rr1gan": "\nCan you try #3463?\n\nThis worked for me. Thanks!. Also works for me.\nFixes https://github.com/swaywm/sway/issues/3462. ",
    "kbrah": "I have the same problem\nThis is my debug log \nhttps://pastebin.com/6x8gBm0Z\n. actually turns out some icons work for me just not any one of those that I had with my i3. I suppose the icons are just incompatible.. ",
    "aerappa": "I'm having a similar issue. Want to swap caps and escape. I was trying to emulate the example in /etc/sway/config but I'm getting errors. I attached my config and log file as well as the output of swaymsg -t get_inputs\nget_inputs.log\nsway.log\nconfig.log\n Thanks in advance.. ",
    "gdamjan": "This is work-in-progress, comments welcome.. This is work-in-progress, comments welcome.. one example how systemd --user support would be used is, a waybar unit file:\n```\n[Unit]\nDescription=Highly customizable Wayland bar for Sway and Wlroots based compositors.\nDocumentation=https://github.com/Alexays/Waybar/wiki/\nPartOf=graphical-session.target\n[Service]\nType=simple\nExecStart=/usr/bin/waybar\n[Install]\nWantedBy=sway-session.target\n```\nwhen enabled, this unit would start waybar automatically when sway starts, and stop when graphical-session.target stops.\nSimilarly it could be used for swayidle, if it would support config files \u2026 as it is now, it would be weird to edit the unit file to change swayidle options. Alas, I have an example for that too.. one example how systemd --user support would be used is, a waybar unit file:\n```\n[Unit]\nDescription=Highly customizable Wayland bar for Sway and Wlroots based compositors.\nDocumentation=https://github.com/Alexays/Waybar/wiki/\nPartOf=graphical-session.target\n[Service]\nType=simple\nExecStart=/usr/bin/waybar\n[Install]\nWantedBy=sway-session.target\n```\nwhen enabled, this unit would start waybar automatically when sway starts, and stop when graphical-session.target stops.\nSimilarly it could be used for swayidle, if it would support config files \u2026 as it is now, it would be weird to edit the unit file to change swayidle options. Alas, I have an example for that too.. @ascent12 from my research it's not easy to start sway/weston as a --user service from a login manager, yet -- so you'd need to login via agetty (edit: if that even works), which is meh. Otherwise I agree, that would be a nicer approach.. @ascent12 from my research it's not easy to start sway/weston as a --user service from a login manager, yet -- so you'd need to login via agetty (edit: if that even works), which is meh. Otherwise I agree, that would be a nicer approach.. Let me just formally disagree with the decision here (before I go on with other things):\n\nthe support I added is optional, doesn't subtract from any other OS at all\nI don't know of other init systems that have a --user session management, and both Gnome and KDE (at least), are using and improving their systemd --user support. So it's not a preference for a init system, it's about using features that exist on a platform vs not using them\nlike it or not, systemd is a standard feature on Linux desktops including (Debian, Ubuntu, Arch, Fedora, RHEL and OpenSuse), but again this change doesn't subtract from any other OS.\nsending this same change to ALL distros is a huge effort, and promotes platform fragmentation. I'd claim that window managers supporting systemd linux distros should support graphical-session.target properly.\n\nWith that said, I'm off to fight other issues.. Let me just formally disagree with the decision here (before I go on with other things):\n\nthe support I added is optional, doesn't subtract from any other OS at all\nI don't know of other init systems that have a --user session management, and both Gnome and KDE (at least), are using and improving their systemd --user support. So it's not a preference for a init system, it's about using features that exist on a platform vs not using them\nlike it or not, systemd is a standard feature on Linux desktops including (Debian, Ubuntu, Arch, Fedora, RHEL and OpenSuse), but again this change doesn't subtract from any other OS.\nsending this same change to ALL distros is a huge effort, and promotes platform fragmentation. I'd claim that window managers supporting systemd linux distros should support graphical-session.target properly.\n\nWith that said, I'm off to fight other issues.. https://github.com/swaywm/sway/wiki/Systemd-integration. https://github.com/swaywm/sway/wiki/Systemd-integration. seems to happen to me too with sway-1.0 (wlroots 0.5.0 - both from [community] on Arch). \nI run firefox nightly in wayland mode (GDK_BACKEND=wayland), open Help -> About, and then when I try to move the popup window to the workspace 3 or 4, sway crashes.\nI have a rule  for firefox and the popup:\nfor_window [app_id=\"firefox\"] {\n  border normal 0\n  move container to workspace 1 web\n}\nfor_window [app_id=\"firefox\" title=\"^About Firefox Nightly$\"] {\n  border normal 1\n  floating enable\n}\n(interestingly enough, when I move the popup to workspace 2, where konsole is running, sway doesn't crash).. seems to happen to me too with sway-1.0 (wlroots 0.5.0 - both from [community] on Arch). \nI run firefox nightly in wayland mode (GDK_BACKEND=wayland), open Help -> About, and then when I try to move the popup window to the workspace 3 or 4, sway crashes.\nI have a rule  for firefox and the popup:\nfor_window [app_id=\"firefox\"] {\n  border normal 0\n  move container to workspace 1 web\n}\nfor_window [app_id=\"firefox\" title=\"^About Firefox Nightly$\"] {\n  border normal 1\n  floating enable\n}\n(interestingly enough, when I move the popup to workspace 2, where konsole is running, sway doesn't crash).. ",
    "rhajdacki": "As far as I can see this is not possible with xkeyboard-config. You can turn CapsLock into Hyper with caps:hyper in xkb_options. However for example making Hyper+H generate left cursor key press does not seem possible.\nThere is no command in Sway to generate \"virtual\" key presses so setting shortcut with bindsym also isn't an option. xdotool could be a solution but it is X specific.\nIs there anything I am missing here? \nDoes adding key automation command seem as good fit for Sway? \nEdit: I see there is #1779 which would solve this. Any other option meanwhile?\n. Isn't cursor command only about mouse control? Docs seem to suggest so:\nhttps://github.com/swaywm/sway/blob/master/sway/sway-input.5.scd#L157-L163\nWhat I am after is simulating keyboard cursors and possibly PageUp, PageDown, Home, End, Insert, Delete.\n. Yeap: https://en.wikipedia.org/wiki/Arrow_keys . Yes, great that you guys are open for such a functionality.\nMeanwhile I have just found https://github.com/ReimuNotMoe/ydotool .. I haven't tried ydotool yet. There are other tools out there that use /dev/uinput like for example https://github.com/myfreeweb/evscript . They don't seem mature though. \n. ",
    "nostdm": "Interesting coincidence, I was just doing the exact same thing, trying to map CapsLock to Hyper and use it as a modifier. I added xkb_options caps:hyper but realized there is currently no way to map one key to another in sway (good to see it's already being worked on). \nI will look into using ydotool but not sure why it pulls in custom libraries libevdevPlus and libinputPlus. @c-edw Yes, sorry meant XPS 9570. When you two-finger scroll in your browser slowly, is the scrolling smooth or does it jump with small increments regardless of how lightly you scroll?. I've used latest chromium and firefox with the same result, this also happens in other GUI programs like JetBrains IDEs and other editors. It's somewhat more smooth in firefox but if I compare against a macbook,  on mac I can easily scroll by just 1px if I move my fingers only slightly, but on sway regardless of how slightly I move my fingers it moves the view at least 20px. I'll try to investigate this a bit more and see if I can pinpoint where the issue is.. @c-edw If I may ask which version of chromium do you use and do you have a 4k screen?. Also, just noticed that the when using the touchscreen, It doesn't skip pixels, just scrolls normally with increments of 1px.. It seems that the issue is to do with XWayland based applications, I just installed firefox nightly with Wayland support and it scrolls normally. Someone mentioned in another thread that the XWayland application might be receiving both the touchpad scroll events as well as old style button-based scroll events hence it responds to both, but not sure if that's the case here.\nThis is the output of swaymsg -t get_inputs:\n```\n[\n   {\n     \"identifier\": \"2:7:SynPS\\/2_Synaptics_TouchPad\",\n     \"name\": \"SynPS\\/2 Synaptics TouchPad\",\n     \"vendor\": 2,\n     \"product\": 7,\n     \"type\": \"pointer\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"1:1:AT_Translated_Set_2_keyboard\",\n     \"name\": \"AT Translated Set 2 keyboard\",\n     \"vendor\": 1,\n     \"product\": 1,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US, euro on 5)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:0:Dell_WMI_hotkeys\",\n     \"name\": \"Dell WMI hotkeys\",\n     \"vendor\": 0,\n     \"product\": 0,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:0:Intel_HID_events\",\n     \"name\": \"Intel HID events\",\n     \"vendor\": 0,\n     \"product\": 0,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:0:Intel_HID_5_button_array\",\n     \"name\": \"Intel HID 5 button array\",\n     \"vendor\": 0,\n     \"product\": 0,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"1739:31251:SYNA2393:00_06CB:7A13_Touchpad\",\n     \"name\": \"SYNA2393:00 06CB:7A13 Touchpad\",\n     \"vendor\": 1739,\n     \"product\": 31251,\n     \"type\": \"pointer\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"1386:18574:Wacom_HID_488E_Finger\",\n     \"name\": \"Wacom HID 488E Finger\",\n     \"vendor\": 1386,\n     \"product\": 18574,\n     \"type\": \"touch\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"1386:18574:Wacom_HID_488E_Pen\",\n     \"name\": \"Wacom HID 488E Pen\",\n     \"vendor\": 1386,\n     \"product\": 18574,\n     \"type\": \"tablet_tool\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"3141:26397:Integrated_Webcam_HD:_Integrate\",\n     \"name\": \"Integrated_Webcam_HD: Integrate\",\n     \"vendor\": 3141,\n     \"product\": 26397,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:3:Sleep_Button\",\n     \"name\": \"Sleep Button\",\n     \"vendor\": 0,\n     \"product\": 3,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:5:Lid_Switch\",\n     \"name\": \"Lid Switch\",\n     \"vendor\": 0,\n     \"product\": 5,\n     \"type\": \"switch\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:1:Power_Button\",\n     \"name\": \"Power Button\",\n     \"vendor\": 0,\n     \"product\": 1,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:6:Video_Bus\",\n     \"name\": \"Video Bus\",\n     \"vendor\": 0,\n     \"product\": 6,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   },\n   {\n     \"identifier\": \"0:1:Power_Button\",\n     \"name\": \"Power Button\",\n     \"vendor\": 0,\n     \"product\": 1,\n     \"type\": \"keyboard\",\n     \"xkb_active_layout_name\": \"English (US)\",\n     \"libinput_send_events\": \"enabled\"\n   }\n ]\n``. Looking at the X11 events usingxev` It seems that indeed it's sending key presses as touchpad scroll events (not sure if that's always the case on X):\nSCROLL UP\n```\nButtonPress event, serial 34, synthetic NO, window 0xc00001,\n    root 0x39c, subw 0x0, time 3873096, (151,409), root:(1113,434),\n    state 0x0, button 5, same_screen YES\nButtonRelease event, serial 34, synthetic NO, window 0xc00001,\n    root 0x39c, subw 0x0, time 3873096, (151,409), root:(1113,434),\n    state 0x1000, button 5, same_screen YES\n```\nSCROLL DOWN\n```\nButtonPress event, serial 34, synthetic NO, window 0xc00001,\n    root 0x39c, subw 0x0, time 3873691, (151,409), root:(1113,434),\n    state 0x0, button 4, same_screen YES\nButtonRelease event, serial 34, synthetic NO, window 0xc00001,\n    root 0x39c, subw 0x0, time 3873691, (151,409), root:(1113,434),\n    state 0x800, button 4, same_screen YES\n```\nI have set GDK_BACKEND=wayland but it seems to break some applications that don't use wayland by default, e.g. running regular firefox from the stable branch:\n$ firefox\nError: cannot open display: :0\n. ",
    "manWithNoName1": "Addendum: went out for a walk after suspending the laptop with \n\"sudo systemctl suspend\"\nOn coming back and moving the mouse to unsuspend, the external display didnt work. Disconnecting and reconnecting the dp cable brought back the display. > Can you run echo 0xFF | sudo tee /sys/module/drm/parameters/debug, then trigger the bug, then echo 0x00 | sudo tee /sys/module/drm/parameters/debug, and finally upload your dmesg log? (Without WLR_DRM_NO_ATOMIC)\nDone. Gist updated with dmesg output and new sway debug log (after unsetting WLR_DRM_NO_ATOMIC and tee commands as specified above). ",
    "schickst": "I was able to reproduce the crash when using the beta.2 version you mentioned in combination with wlroots-0.2. \nHowever, with the current sway-rc1 and the corresponding wlroots-0.3 no crash occurred. \n@YaLTeR, can you confirm this?. I was able to reproduce the crash when using the beta.2 version you mentioned in combination with wlroots-0.2. \nHowever, with the current sway-rc1 and the corresponding wlroots-0.3 no crash occurred. \n@YaLTeR, can you confirm this?. Sorry, had a long day. I am sloppy. Please merge as is, if you don't mind. Next time I take more care.. Sorry, had a long day. I am sloppy. Please merge as is, if you don't mind. Next time I take more care.. ",
    "Lahvuun": "Segfaults on constraint destruction:\nhttps://github.com/swaywm/sway/blob/3d90f3364a60a6fe877b47192d76994ede1276b2/sway/input/cursor.c#L1383-L1385\nhttps://github.com/swaywm/sway/blob/3d90f3364a60a6fe877b47192d76994ede1276b2/sway/input/cursor.c#L1351-L1354\nMove it to the top maybe?\n```diff\ndiff --git b/sway/input/cursor.c a/sway/input/cursor.c\nindex 1bbc1942..54fbe858 100644\n--- b/sway/input/cursor.c\n+++ a/sway/input/cursor.c\n@@ -1397,13 +1397,13 @@ void handle_constraint_destroy(struct wl_listener listener, void data) {\n    wl_list_remove(&sway_constraint->destroy.link);\nif (cursor->active_constraint == constraint) {\n\n\nwarp_to_constraint_cursor_hint(cursor);\n+\n        if (cursor->constraint_commit.link.next != NULL) {\n            wl_list_remove(&cursor->constraint_commit.link);\n        }\n        wl_list_init(&cursor->constraint_commit.link);\n        cursor->active_constraint = NULL;\n-\n\nwarp_to_constraint_cursor_hint(cursor);\n    }\nfree(sway_constraint);\n```. \n\n",
    "absrd": "Played successfully a FPS games with this PR and relative pointer: https://github.com/absrd/sway/tree/relative-pointer\nOne possible issue: In a dual monitor setup in a game with a cursor, i.e. not FPS, if I put the cursor in game at the edge between monitors and click, it starts rendering sway's cursor. Though, constraints seems to work fine, i.e. the cursor doesn't leave the game or the monitor, which the cursor is in.. ",
    "norcalli": "Thanks for the speedy response, that did work. It would be a good idea to add a requirement on scdoc 1.8 to the AUR package then.. I tried to add emphasis to the warning, but it didn't render how I wanted, so is there a better way to highlight that sentence, or should I just leave it un-emphasized?\n\n. @RedSoxFan done. I wasn't familiar with these options, so I gleaned their general idea from the config.h \n and the code.\n. Rendered \n\n. @RedSoxFan donezo. @RedSoxFan done. Sorry, I forgot I auto configure my git based on hostname.. ",
    "rvi64": "trace\n```\n0  0x00007fd4369fcd7f in raise () at /usr/lib/libc.so.6\n1  0x000055ec7953ae50 in _sway_assert (condition=false, format=0x55ec79548d68 \"[%s:%d] %s:Expected con to have a workspace\") at ../sway/common/log.c:31\n    args = {{gp_offset = 40, fp_offset = 48, overflow_arg_area = 0x7ffdd34ce310, reg_save_area = 0x7ffdd34ce250}}\n\n2  0x000055ec7952f3e7 in container_handle_fullscreen_reparent (con=0x55ec7b6755a0) at ../sway/sway/tree/container.c:1184\n    __PRETTY_FUNCTION__ = \"container_handle_fullscreen_reparent\"\n\n3  0x000055ec7952f69b in container_add_child (parent=0x55ec7b6e7720, child=0x55ec7b6755a0) at ../sway/sway/tree/container.c:1240\n4  0x000055ec79536b06 in workspace_wrap_children (ws=0x55ec7b2e01b0) at ../sway/sway/tree/workspace.c:623\n    child = 0x55ec7b6755a0\n    fs = 0x0\n    middle = 0x55ec7b6e7720\n\n5  0x000055ec7951bb6c in workspace_rejigger (ws=0x55ec7b2e01b0, child=0x55ec7b2dfa30, move_dir=WLR_DIRECTION_RIGHT) at ../sway/sway/commands/move.c:262\n    new_parent = 0x400000008\n    index = 0\n\n6  0x000055ec7951befd in container_move_in_direction (container=0x55ec7b2dfa30, move_dir=WLR_DIRECTION_RIGHT) at ../sway/sway/commands/move.c:354\n    current = 0x0\n    offs = 1\n    ws = 0x55ec7b2e01b0\n    output = 0x7ffdd34ce4a0\n\n7  0x000055ec7951cf25 in cmd_move_in_direction (direction=WLR_DIRECTION_RIGHT, argc=1, argv=0x55ec7b6d6e18) at ../sway/sway/commands/move.c:692\n    move_amt = 10\n    container = 0x55ec7b2dfa30\n    old_ws = 0x55ec7b2e01b0\n    new_ws = 0x0\n\n8  0x000055ec7951d7e3 in cmd_move (argc=1, argv=0x55ec7b6d6e18) at ../sway/sway/commands/move.c:862\n    error = 0x0\n\n9  0x000055ec794ec66f in execute_command (_exec=0x55ec7b20ad00 \"move right\", seat=0x55ec7b2050e0, con=0x0) at ../sway/sway/commands.c:284\n    node = 0x55ec7b2dfa30\n    res = 0x55ec7b5026e0\n    argc = 2\n    argv = 0x55ec7b6d6e10\n    handler = 0x55ec795592a0 <command_handlers+128>\n    res_list = 0x55ec7b6d1340\n    exec = 0x55ec7b6de450 \"move right\"\n    head = 0x0\n    cmdlist = 0x0\n    cmd = 0x55ec7b6de450 \"move right\"\n    views = 0x0\n    __PRETTY_FUNCTION__ = \"execute_command\"\n\n10 0x000055ec795162c7 in seat_execute_command (seat=0x55ec7b2050e0, binding=0x55ec7b20b340) at ../sway/sway/commands/bind.c:333\n    res_list = 0x0\n    success = false\n\n11 0x000055ec79510d41 in handle_keyboard_key (listener=0x55ec7b5ec4d0, data=0x7ffdd34ce740) at ../sway/sway/input/keyboard.c:377\n    keyboard = 0x55ec7b5ec4c0\n    seat = 0x55ec7b2050e0\n    wlr_seat = 0x55ec7b205200\n    wlr_device = 0x55ec7b5643f0\n    device_identifier = 0x55ec7b6ae0d0 \"1:1:AT_Translated_Set_2_keyboard\"\n    event = 0x7ffdd34ce740\n    input_inhibited = false\n    keycode = 114\n    translated_keysyms = 0x55ec7b5f7d68\n    translated_modifiers = 65\n    translated_keysyms_len = 1\n    raw_keysyms = 0x55ec7b5f7d68\n    raw_modifiers = 65\n    raw_keysyms_len = 1\n    code_modifiers = 65\n    handled = false\n    binding_released = 0x0\n    binding = 0x55ec7b20b340\n\n12 0x00007fd436e6688e in wlr_signal_emit_safe (signal=signal@entry=0x55ec7b5e6d38, data=data@entry=0x7ffdd34ce740) at ../util/signal.c:29\n    pos = 0x55ec7b5ec4d0\n    l = 0x55ec7b5ec4d0\n    cursor = {link = {prev = 0x55ec7b5ec4d0, next = 0x7ffdd34ce6c0}, notify = 0x7fd436e66800 <handle_noop>}\n    end = {link = {prev = 0x7ffdd34ce6a0, next = 0x55ec7b5e6d38}, notify = 0x7fd436e66800 <handle_noop>}\n\n13 0x00007fd436e56ab6 in wlr_keyboard_notify_key (keyboard=0x55ec7b5e6c40, event=event@entry=0x7ffdd34ce740) at ../types/wlr_keyboard.c:103\n    updated = <optimized out>\n\n14 0x00007fd436e335f7 in handle_keyboard_key (event=, libinput_dev=) at ../backend/libinput/keyboard.c:82\n    wlr_dev = 0x55ec7b5643f0\n    kbevent = 0x55ec7b6f0540\n    wlr_event = {time_msec = 12011, keycode = 106, update_state = true, state = WLR_KEY_PRESSED}\n    state = <optimized out>\n\n15 0x00007fd436e3256c in handle_libinput_readable (fd=, mask=, _backend=0x55ec7af0a0d0) at ../backend/libinput/backend.c:41\n    backend = 0x55ec7af0a0d0\n    event = 0x55ec7b6f0540\n\n16 0x00007fd436ea7702 in wl_event_loop_dispatch () at /usr/lib/libwayland-server.so.0\n17 0x00007fd436ea62ac in wl_display_run () at /usr/lib/libwayland-server.so.0\n18 0x000055ec794f9d4b in server_run (server=0x55ec79559ca0 ) at ../sway/sway/server.c:201\n19 0x000055ec794f9300 in main (argc=3, argv=0x7ffdd34ceb28) at ../sway/sway/main.c:413\n    verbose = 0\n    debug = 0\n    validate = 0\n    allow_unsupported_gpu = 0\n    long_options = \n        {{name = 0x55ec79540d24 \"help\", has_arg = 0, flag = 0x0, val = 104}, {name = 0x55ec79540d29 \"config\", has_arg = 1, flag = 0x0, val = 99}, {name = 0x55ec79540d30 \"validate\", has_arg = 0, flag = 0x0, val = 67}, {name = 0x55ec79540d39 \"debug\", has_arg = 0, flag = 0x0, val = 100}, {name = 0x55ec79540d3f \"version\", has_arg = 0, flag = 0x0, val = 118}, {name = 0x55ec79540d47 \"verbose\", has_arg = 0, flag = 0x0, val = 86}, {name = 0x55ec79540d4f \"get-socketpath\", has_arg = 0, flag = 0x0, val = 112}, {name = 0x55ec79540d5e \"unsupported-gpu\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x55ec79540d6e \"my-next-gpu-wont-be-nvidia\", has_arg = 0, flag = 0x0, val = 117}, {name = 0x0, has_arg = 0, flag = 0x0, val = 0}}\n    config_path = 0x55ec7af03f00 \"\"\n    usage = 0x55ec795408e0 \"Usage: sway [options] [command]\\n\\n  -h, --help\", ' ' <repeats 13 times>, \"Show help message and quit.\\n  -c, --config <config>  Specify a config file.\\n  -C, --validate         Check the validity of the config file, th\"...\n\nc = -1\n```. ",
    "jpgrayson": "Thank you @emersion and apologies for not seeing this in the manuals--it was indeed right there!\nI will submit a PR that adds one line to sway-output.5.scd that talks about the cursor only being able to move between immediately adjacent outputs.. > Can you please change the ordering to retain alphabetical order in all locations\nDone. And in the process of putting the new option in lexical order, I noticed that the -m/--monitor option is missing from the fish and bash completions. So a win for keeping things in order.\nI'll submit a separate PR to correct those missing completions.. ",
    "rtyler": "@emersion I can do, but will need to be later today once I'm done working :smile_cat: . @JonnyMako For what it is worth, no reloading sway does not change anything.. Yeah, I was going to come in this weekend and suggest this should be closed. Since jumping to wlroots 0.3, and sway 1.0rc1, I have not seen this.\n. ",
    "Steverman": "Works for a while and somehow just stops working at some point. \nHappens with pcmanfm-gtk3 as well:\nhttps://gist.githubusercontent.com/Steverman/b34a26cc6c81a8672a0b99379df8620b/raw/fcba08fb02035a423cb3088794e8a6324603e962/pcmanfmgtk3.log\nRestarting makes it work again. . I also noticed that FN+XF86MonBrightness{Up,Down} triggers two events on a keypress (not on release) \nxev -event keyboard:\n```log\nMappingNotify event, serial 32, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\nMappingNotify event, serial 32, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\n```\nOther function buttons such as FN+Print does not generate anything at all but still functions correctly; even with other modifiers. \nUsing other modifiers does output the  expected event. This also applies to XF86MonBrightness{Up,Down}.\nNot sure if this helps.\nEdit: Did some more testing and found out that XF86MonBrightness{Up,Down} simply outright ignores any modifiers besides FN.. MappingNotify event occurs only when XF86MonBrightnessUp is pressed. On keypress:\n```\nKeyPress event, serial 25, synthetic NO, window 0xe00001,\n    root 0x39c, subw 0x0, time 365906, (345,533), root:(1305,562),\n    state 0x0, keycode 50 (keysym 0xffe1, Shift_L), same_screen YES,\n    XLookupString gives 0 bytes:\n    XmbLookupString gives 0 bytes:\n    XFilterEvent returns: False\nMappingNotify event, serial 28, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\nMappingNotify event, serial 28, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\nAnd when I release it:\nMappingNotify event, serial 30, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\nMappingNotify event, serial 30, synthetic NO, window 0x0,\n    request MappingKeyboard, first_keycode 8, count 248\nKeyRelease event, serial 30, synthetic NO, window 0xe00001,\n    root 0x39c, subw 0x0, time 367715, (345,533), root:(1305,562),\n    state 0x1, keycode 50 (keysym 0xffe1, Shift_L), same_screen YES,\n    XLookupString gives 0 bytes:\n    XFilterEvent returns: False\n``MappingNotify eventalways occur 4 times. Twice on keypress and twice on release. Holding the modifiers down and repeatedly pressingXF86MonBrightnessUp` won't generate additional events. \nEdit: Full log... because why not.\nhttps://gist.githubusercontent.com/Steverman/f2454869a3254c3a11c66042bab80d78/raw/00d72fd6ab470a6cc0e1f52d9199db423e039ea9/blah.log. ",
    "ammen99": "Also worthy to mention is that I have the same Wayfire/wlroots as @myfreeweb and it works for me, so most probably it truly is a wlroots thing or we have the same bug in Sway/Wayfire.. Also worthy to mention is that I have the same Wayfire/wlroots as @myfreeweb and it works for me, so most probably it truly is a wlroots thing or we have the same bug in Sway/Wayfire.. ",
    "jakubn551": "i have same isue but i fixed like this: install utility called evtest and xinput, via evtest found on what event andress is XF86Brightness generating output and add to /etc/X11/xorg.conf.d/ new file with this\n Section \"InputClass\"\n    Identifier \"event\"\n    Driver \"libinput\"\n    Option \"Device\"   \"dev/input/event*\"\nEndSection\nthen i restarted and keys started to work. ",
    "v44r": "D'oh. Reverting 1e65cc1e fixes it.. ",
    "capelito": "Hi,\nI also have problems installing sway-git from the Archlinux AUR:\nscdoc 1.8.1 is installed\n$ yay -S sway-git\n/usr/bin/sh -c '/usr/bin/scdoc < ../sway/sway/sway-bar.5scd > sway-bar.5'\nError at 23:0: Expected _ before starting new paragraph (began with _ at 21:75)\n. ",
    "CaptainBloodz": "Ok, Used to work.\nThks. Do you yave xwayland enabled?. I have no idea which terminal I could use but firefox is compiled with wayland, so maybe it will work as replacement, for test purpose only.. Works fine!. temporary fixed with:\nexport SWAYSOCK=$(ls /run/user//sway-ipc..sock | head -n 1)\nThks 4 ur attention. Ok, indeed 1.8.1 here. same here:\nninja -v -j3 -l3 -C /var/tmp/portage/gui-wm/sway-9999/work/sway-9999-build\nninja: Entering directory `/var/tmp/portage/gui-wm/sway-9999/work/sway-9999-build'\n[1/273] /bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway.1.scd > sway.1'\n[2/273] /bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway.5.scd > sway.5'\n[3/273] /bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway-bar.5.scd > sway-bar.5'\n[4/273] /bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway-input.5.scd > sway-input.5'\n[5/273] /bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway-ipc.7.scd > sway-ipc.7'\nFAILED: sway-ipc.7 \n/bin/sh -c '/usr/bin/scdoc < ../sway-9999/sway/sway-ipc.7.scd > sway-ipc.7'\nError at 268:3: Tables cannot be indented\n. swaymsg -t get_tree: sway-tree-4-spotify.log\nNB: Updated to match the session of the console debug log reported further down.. console debug  from start to exit:\nsway.log\nNB: The tree logged above belongs to this session.. I've trim down the sway/config for logging.\nThen put it back together with a few changes, e.g. the way and order to start jackdbus related stuff.\nNow spotify is properly assigned.\nWill come back here if something more consistent is to be reported.\nConfused  :((. Even more confused:\nBefore I got your reply, I've rebuilded sway with -ggdb CFLAGS, which seems the reason why Spotify assignment got to work all of a sudden!!!\nI understood that as I reverted sway build to normal, then restarted.. sway version 1.0-rc1-138-g43035951 (Mar  2 2019, branch 'HEAD')\n-\nAdditionally, log reports:\n2019-03-01 15:28:37 - [sway-9999/sway/commands.c:253] Handling command 'exec spotify'\n2019-03-01 15:28:37 - [sway-9999/sway/commands.c:145] find_handler(exec)\n2019-03-01 15:28:37 - [sway-9999/sway/commands/exec_always.c:46] Executing spotify\nFailed to connect to user bus: No such file or directory\n2019-03-01 15:28:37 - [sway-9999/sway/commands/exec_always.c:87] Child process created with pid 13356\n2019-03-01 15:28:37 - [sway-9999/sway/tree/root.c:253] Recording workspace for process 13356\nThks. Fine.\nThks . Trying to help:\nfirefox-65.0.2 + gtk+-2.24 & gtk+-3.24.1 here.\nleft clicking on module icon triggers:\n[wlroots-9999/types/wlr_surface.c:609] New wlr_surface 0x560315f3aa50 (res 0x560315ef5cb0)\nand nothing happens.\nApp main menu wise, navigating to bookmark menu (Alt+mouse left click select), then arrow down + CR pops Library (translated, maybe innacurate though) in a new windows, as expected.\n. Closing as it seems fixed, very likely due to environment changes.. Pressing a keyboard sequence in pcmanfm(gtk2 here) should open a text input box bottom right of the screen, which contents, i.e. the sequence, serves as an helper to find beginning matched file in the current displayed directory.\nMaybe the non existing window skostrigin refers to is an issue on the text input box management?\nNo such an issue here on pcmanfm+gtk2@gentoo, will update after trying with gtK3 version.. Yeah babe, TTY8 rocks.\nThks progandy, 4 ur attention, interest & support.. Initially seemed occuring for most apps.\nI daily update sway & wlroots.\nNow seems more like at random.\nIt will take a little while to ensure stable conditions, if any,  for the issue to raise.. sway.log\nEnv\na) Firefox [wayland] is opened at sway start, assigned to workspace 4 and has a plugin that reopens last session automagically.\nb) Github password is stored in firefox's 'keyring'.\n1) Open firefox\n2) Go to github/sway\n3) Sign in\n4) Display some open issues\n5) Close SWAY $mod+Shift+E\n6) Login back to SWAY\n7) goto workspace 4\nResult:\nFirefox github/swaywm/sway/issues page has been reopened.\nA second window on the right requests the password for keyring.\nN.B. I've just had to restart firefox/xwayland for attachment to work: password box was in the right place.. ",
    "jbeich": "I confirm on FreeBSD. Regressed by scdoc 1.8.0 -> 1.8.1 update.. DragonFly, NetBSD, Solaris (unlike FreeBSD, OpenBSD) don't hide SOCK_CLOEXEC. Unlike GNU libc those systems enable all features by default. A more portable way would be to replace _POSIX_C_SOURCE with _GNU_SOURCE unless compatibility with an old standard is important.\nSee also POSIX#411. This fix tries to keep consistency with wlroots.\n. Packages on FreeBSD are always built using the whole tree on the package cluster. Building starts every Tuesday, Thursday, Saturday/Sunday at 01:00 UTC and roughly takes ~2 days to complete. The build in question simply hasn't finished yet. Once finished it may take a few hours to sync packages to the mirrors.. @emersion, I've fixed pkg-config's file and updated to 1.9.1. Expect FreeBSD package to catch up around 2019-03-03 (details).. ",
    "athrungithub": "it swaybar?.\n for my it's ok. it's look problem with xwayland and wayland native apps.\nrun dmenu and open urxvt and dmenu have focus.. Yes, spanish is different in diverse countries. There wil never be a consensus.\nThanks  sway comunity!. i have problem with floating window now. I need check. i changed braces. i sorry, now delete () and update git. ",
    "dnkl": "Some other data points:\n\nThe events fire just fine if I also run a sway-bar\nAdding a second IPC client of mine does not help (so it's probably not an off-by-one error with the number of connected clients). This is probably established fact by now, but just wanted to let you know that https://github.com/swaywm/wlroots/pull/1537 (which I found through https://github.com/swaywm/wlroots/pull/1526) works for me too.. \n",
    "PhotonMike": "Thanks for the tip, it appears that the AUR packages are out of date. (even though they are git packages?) After I built and installed it manually, it finally launched.. I used yay.. ",
    "ainola": "Same issue here when using the latest sway-git and wlroots-git version on archlinux. In my case I had been playing Full Throttle Remastered under xwayland and the whole session blows up when I exit the game.\n```\n                Stack trace of thread 7189:\n                #0  0x0000558e97a5cba5 view_from_wlr_xwayland_surface (sway)\n                #1  0x0000558e97a57131 view_from_wlr_surface (sway)\n                #2  0x0000558e97a3292d warp_to_constraint_cursor_hint (sway)\n                #3  0x0000558e97a32a1c handle_constraint_destroy (sway)\n                #4  0x00007f7ab030b2ce wlr_signal_emit_safe (libwlroots.so.0)\n                #5  0x00007f7ab0300ac0 pointer_constraint_destroy (libwlroots.so.0)\n                #6  0x00007f7ab034bc7f n/a (libwayland-server.so.0)\n                #7  0x00007f7ab034bcef wl_resource_destroy (libwayland-server.so.0)\n                #8  0x00007f7aaf3b76d0 ffi_call_unix64 (libffi.so.6)\n                #9  0x00007f7aaf3b70a0 ffi_call (libffi.so.6)\n                #10 0x00007f7ab034f6ff n/a (libwayland-server.so.0)\n                #11 0x00007f7ab034c0a3 n/a (libwayland-server.so.0)\n                #12 0x00007f7ab034d702 wl_event_loop_dispatch (libwayland-server.so.0)\n                #13 0x00007f7ab034c2ac wl_display_run (libwayland-server.so.0)\n                #14 0x0000558e97a1bfb3 server_run (sway)\n                #15 0x0000558e97a1b4fc main (sway)\n                #16 0x00007f7aafe8b223 __libc_start_main (libc.so.6)\n                #17 0x0000558e97a0ddce _start (sway)\n            Stack trace of thread 7218:\n            #0  0x00007f7aafe53afc pthread_cond_wait@@GLIBC_2.3.2 (libpthread.so.0)\n            #1  0x00007f7aad4f3c84 n/a (i965_dri.so)\n            #2  0x00007f7aad4f39a8 n/a (i965_dri.so)\n            #3  0x00007f7aafe4da9d start_thread (libpthread.so.0)\n            #4  0x00007f7aaff62b23 __clone (libc.so.6)\n\n```. ",
    "uolot": "FYI I'm using yay and I had the same error in cursor.c. Doing a clean build of wlroots-git resolved the issue.. ",
    "hughwilliams94": "Yes #3488 does seem to have fixed it. Apologies, I was running the sway-git package but it had not been rebuilt recently enough!. ",
    "attente": "Yes, I got a big red error message from swaynag saying that there was an error in the configuration file.\nDoes it make sense to have the include there if sway doesn't actually distribute or install that directory?. I might be a bit overly pedantic at this point, but who is placing configuration files in @sysconfdir@/sway/config.d if not sway itself? If it's meant to be distro maintainers/packagers, then maybe it should be them adding that include instead.\nI also don't necessarily think making wildcards fail more gracefully would be a good thing since that error is actually helpful for people customizing their own configs in case they made a mistake. It's just this one case with the include in the current default config that is problematic for a new user installing sway from source.. ",
    "defau1t": "Just installed rc1 and no dice. Only difference is offset in dmesg is now 40000 vice 3b000\nEDIT: And just tried with git master, still segfaults.\nEDIT2: And here's the backtrace:\n```\n0  container_at_stacked (parent=0x558ee944e080, lx=100, ly=100, surface=0x7ffe54a840f0, sx=0x7ffe54a840f8, sy=0x7ffe54a84100) at ../sway/tree/container.c:256\n1  0x0000558ee8f87847 in tiling_container_at (parent=0x558ee944e080, lx=100, ly=100, surface=0x7ffe54a840f0, sx=0x7ffe54a840f8, sy=0x7ffe54a84100) at ../sway/tree/container.c:333\n2  0x0000558ee8f87a9f in container_at (workspace=0x558ee944e080, lx=100, ly=100, surface=0x7ffe54a840f0, sx=0x7ffe54a840f8, sy=0x7ffe54a84100) at ../sway/tree/container.c:396\n3  0x0000558ee8f66b1c in node_at_coords (seat=0x558ee9426a90, lx=100, ly=100, surface=0x7ffe54a840f0, sx=0x7ffe54a840f8, sy=0x7ffe54a84100) at ../sway/input/cursor.c:140\n4  0x0000558ee8f670ed in cursor_rebase (cursor=0x558ee9426ef0) at ../sway/input/cursor.c:281\n5  0x0000558ee8f5be9d in transaction_apply (transaction=0x558ee943fa30) at ../sway/desktop/transaction.c:321\n6  0x0000558ee8f5bfda in transaction_progress_queue () at ../sway/desktop/transaction.c:355\n7  0x0000558ee8f5c869 in transaction_commit_dirty () at ../sway/desktop/transaction.c:551\n8  0x0000558ee8f6bb18 in handle_keyboard_key (listener=0x558ee9439cf0, data=0x7ffe54a84350) at ../sway/input/keyboard.c:399\n9  0x00007f3224d0c99c in ?? () from /usr/lib64/libwlroots.so.0\n10 0x00007f3224cfd024 in wlr_keyboard_notify_key () from /usr/lib64/libwlroots.so.0\n11 0x00007f3224cdfd5c in ?? () from /usr/lib64/libwlroots.so.0\n12 0x00007f3222dd8425 in ?? () from /usr/lib64/libffi.so.7\n13 0x00007f3222dd7a7f in ?? () from /usr/lib64/libffi.so.7\n14 0x00007f32226fd0fd in ?? () from /usr/lib64/libwayland-client.so.0\n15 0x00007f32226f9ab9 in ?? () from /usr/lib64/libwayland-client.so.0\n16 0x00007f32226faf8c in wl_display_dispatch_queue_pending () from /usr/lib64/libwayland-client.so.0\n17 0x00007f32257c2bb2 in wl_event_loop_dispatch () from /usr/lib64/libwayland-server.so.0\n18 0x00007f32257c17da in wl_display_run () from /usr/lib64/libwayland-server.so.0\n19 0x0000558ee8f53f8f in server_run (server=0x558ee8fb4d00 ) at ../sway/server.c:212\n20 0x0000558ee8f534d8 in main (argc=1, argv=0x7ffe54a84aa8) at ../sway/main.c:395\n```. I had initially set the titlebar to zero pixels to remove the titlebar completely, until I found the default_border command and never set those values back to normal. Thanks for helping out! Changing it back to non-zero fixes the issue, and still keeps my titlebars out of the way!. ",
    "NexusAlpha": "I think by running it through gdb but it also freezes the system when run inside the debugger.. No \"core\" file is being created by ulimit. If I understand correctly I have to set the limit of the coredump by using ulimit and then run sway. But after the freeze and force reboot no file is being created.. I'm still unable to get the coredump, sorry. I've built sway beta2 with without swayidle and swaylock, the other USE-Flags are default. And yes those logs were taken at the same crash, don't know why they don't match. Both sway and wlroots were emerged with the filecaps flag and the caps are set correctly even though the error persists. I'm currently trying to install elogind without luck.. Little update: I managed to install elogind now and also upgraded to rc2. It still segfaults but now within a different stage and doesn't freeze the system anymore, so we're slowly getting there.. But I think the primary issue itself was solved by installing elogind. Soll I'll close this issue now.. ",
    "zeroeightysix": "I'm having this exact problem as well, but running normal osu! under wine.\nPen works fine when osu! is not fullscreen, and has another window accompanying it on the same workspace (e.g. a statusbar or terminal). Once it goes fullscreen or is the only window on the workspace, pen works fine until you tap it once, where it goes all sensitive and weird. I'll try out @RedSoxFan and get back with the results.\nEdit: Behaviour is exactly the same as @robertgzr describes. \"Sensitivity\" is fixed, but cursor jumps erratically to the edges.. I'm having this exact problem as well, but running normal osu! under wine.\nPen works fine when osu! is not fullscreen, and has another window accompanying it on the same workspace (e.g. a statusbar or terminal). Once it goes fullscreen or is the only window on the workspace, pen works fine until you tap it once, where it goes all sensitive and weird. I'll try out @RedSoxFan and get back with the results.\nEdit: Behaviour is exactly the same as @robertgzr describes. \"Sensitivity\" is fixed, but cursor jumps erratically to the edges.. ",
    "MayeulC": "All right, thanks a lot for the answer. I do not have these identifiers, but I guess it's due to my older sway version. Feel free to close this issue, unless you want to keep the part about configuration blocks :slightly_smiling_face: . ",
    "dg10a": "Is there currently a way achieve this effect?. Sort of:\nwhile true; do\n    pkill oguri\n    oguri <output> `find /path/to/wallpaper/folder/ | shuf -n 1` &\n    sleep 30\ndone\nNo more screen flickering, but stopping oguri shows the default background before the next image.. I think I'm only running oguri and not swaybg. Is oguri running/using swaybg? I don't see any independent swaybg processes running.. Confirmed that running swaybg manually doesn't cause the flicker.\nHere's a working solution with no pauses between images:\n```\n!/bin/sh\nswaybg  find /path/to/wallpaper/folder/ | shuf -n 1 fill &\nOLD_BG=$!\nwhile true; do\n    swaybg  find /path/to/wallpaper/folder/ | shuf -n 1 fill &\n    NEXT_BG=$!\n    sleep 30\n    kill $OLD_BG\n    OLD_BG=$NEXT_BG\ndone \n```. ",
    "harrisonthorne": "Update: Well, I can explain the cause of what I've described. Transparent text reveals the wallpaper, not the background of the status bar, which was unexpected for me. Is transparent text supposed to show through to the wallpaper, or should it show through only to the background of the status bar?. Solved!. ",
    "bschacht": "On 2/13/19 12:47 PM, emersion wrote:\n\n\nThis would let package maintainers override the version if there have been any changes.\n\nWhat's your use-case for this? I don't understand why you would need to patch up the version.\n\nFor example if there are backports of fixes, we can indicate the patch\nlevel in the version. Or right now i'd like to indicate that its -rc2,\nbut i'd have to patch meson.build.\n. ",
    "RX14": "@emersion it's not rc1, it's sway-git from AUR, it's just the version still shows rc1 and somehow the git hash is nonsense. I just built it again and now it shows\n$ sway -v\nsway version 1.0-rc1-177-gacdb4ed7 (Mar 14 2019, branch 'master'). Restarted sway and dragging inside firefox and between firefox windows is working now. This was a sway upgrade, but the previous build was on the 12th, so I suspect it was the restart itself which caused the fix, not the upgrade.\nIf I can get it to reproduce again, O'll restart sway and report if it fixes it.. ",
    "krotonic": "Ok, that's unfortunate. But thanks for the answer. I'm gonna stick with i3 then.. @ddevault Because there is one already: https://tracker.debian.org/pkg/json-c. But as Buster is currently in freeze it could take quite a while until it gets released into stable. \n@progandy thanks :) will give it a try. ",
    "nielsdg": "Just a heads up that the next GStreamer release will have support for XDG shell stable in at least glimagesink and vaapisink. Just a heads up that the next GStreamer release will have support for XDG shell stable in at least glimagesink and vaapisink. Annnd if this gets merged in time, GStreamer 1.16 will also have support for XDG shell in waylandsink. Annnd if this gets merged in time, GStreamer 1.16 will also have support for XDG shell in waylandsink. ",
    "yabirgb": "@ddevault The others READMEs (except the main one)  don't contain links to others READMEs. Aside the main one should I add anything to the others?. Sorry. All fixed now.. ",
    "krnl0138": "@RedSoxFan, here it is. https://pastebin.com/1wmhGKGV\nHad to mention that now \"layout\" and \"grp\" sections work properly. \nMaybe it was due to my inattention last boot.\nBut I see no changes in keyboard rate.. @RedSoxFan, thanks, I figured it out, kind of.\n\nEverything is working until I have input * in my config, that's great news.\nAlacritty inverts rate property, e.g. if I have 80 then alacritty types really slowly, but xterm and st are smooth and fast. However, if I nailed it to 10, alacritty starts to fly, but typing in chromium and other apps becomes slow as hell.\n\nI don't even know what to do with both issues now.. @RedSoxFan, works with input * but not with input 1:1... From my config.\ninput * {\n    repeat_delay 200\n    repeat_rate 10\n    xkb_layout us,ru\n    xkb_options grp:caps_toggle\n}. @emersion, I did quote, respectively, it doesn't apply nor alacritty nor xterm/st then.. @RedSoxFan, I thought that too, but after revision 1382:12290:HID_0566:3002 has worked for me.\nAlso I installed alacritty-git from AUR, still no changes, will wait until patch merged.\nAnyway, it seems to be closed now, thanks for help guys, you are awesome!. @RedSoxFan, it may be reasonable to add this hint with input * into the documentation / wiki for newcomers, because it is really confusing when some options work, but others don't all of a sudden.\nLike:\n\nKeyboard repeat delay and rate\ninput \\<identifier> {\n    repeat_delay 500\n    repeat_rate 5\n}\nIf you see no changes with your current identifier, you could try using * instead of \\<identifier> to apply those parameters to all identifiers at once. After this you can manually sort out the identifier you need by substitution.. \n",
    "bchallenor": "I'm using the US keyboard layout.\nI did wonder about that bug. But I could not reproduce using the above config file, replacing BackSpace with Space. Then I thought perhaps BackSpace is a problem with US and Space is a problem with other layouts... but I can't reproduce with Space and XKB_DEFAULT_LAYOUT=fr either.\n. I tried the s/BackSpace/Space/ config with the other problematic layout in that thread, i.e. XKB_DEFAULT_LAYOUT=de XKB_DEFAULT_VARIANT=adnw XKB_DEFAULT_MODEL=pc105, and I can reproduce with that layout. So I wouldn't be surprised if it is the same bug. (But probably people are more likely to hit the BackSpace/US variant here.). The problem seems to be this second call to get_active_binding that uses state_keysyms_translated: https://github.com/swaywm/sway/blob/23f075e71d985754effde5372f4242ddb09cbbc0/sway/input/keyboard.c#L355-L358\nI can think of several possible fixes:\n1) Remove this call\n2) Re-order this call to move it after the state_keysyms_raw call on the next line (this would essentially swap their relative priorities)\n3) Introduce a third namespace in the config for \"translated\" key bindings, in addition to bindsym and bindcode, e.g. bindtranslatedsym or bindsym --translated\nI have tested that (1) and (2) work. (3) would be more involved.\nI can't say which I prefer as I don't really understand the purpose of this second call with \"translation\". But note this issue does not occur in i3.. ",
    "Nikki1993": "I had this happen recently but it was apparently caused by intel-media-driver, at some point, it would segfault causing Chromium to lose any kind of hardware acceleration and only force reload would solve it but in the process, any kind of scrolling would be like watching a 10fps slideshow. \nSwitching to libva-intel-driver and purging intel-media-driver solved it for me. \n. I had this happen recently but it was apparently caused by intel-media-driver, at some point, it would segfault causing Chromium to lose any kind of hardware acceleration and only force reload would solve it but in the process, any kind of scrolling would be like watching a 10fps slideshow. \nSwitching to libva-intel-driver and purging intel-media-driver solved it for me. \n. What's the output of vainfo? also, are you using modesetting driver or xf86-intel? . What's the output of vainfo? also, are you using modesetting driver or xf86-intel? . I'd suggest using modesetting driver over xf86-intel. Just run $ pacman -Rns xf86-video-intel to make sure you don't have it installed and make sure you don't have any /etc/X11/xorg.conf.d/20-intel.conf (not sure does it even affect anything under Wayland but I reckon xwayland apps still would). \nSeems like you are all good on hardware acceleration front otherwise.\nYou can also try forcing GPU acceleration under chromium (make sure you are all up-to-date as usual $ pacman -Syu) by creating ~/.config/chromium-flags.conf and then putting the following inside as per arch wiki here https://wiki.archlinux.org/index.php/chromium \n--ignore-gpu-blacklist\n--enable-gpu-rasterization\n--enable-native-gpu-memory-buffers\n--enable-zero-copy\n--disable-gpu-driver-bug-workarounds\nthis will at least give you pretty much the same configuration as I have right now and I haven't experienced a single chromium crash that would result in choppy scrolling afterward due to acceleration dying for some reason. . I'd suggest using modesetting driver over xf86-intel. Just run $ pacman -Rns xf86-video-intel to make sure you don't have it installed and make sure you don't have any /etc/X11/xorg.conf.d/20-intel.conf (not sure does it even affect anything under Wayland but I reckon xwayland apps still would). \nSeems like you are all good on hardware acceleration front otherwise.\nYou can also try forcing GPU acceleration under chromium (make sure you are all up-to-date as usual $ pacman -Syu) by creating ~/.config/chromium-flags.conf and then putting the following inside as per arch wiki here https://wiki.archlinux.org/index.php/chromium \n--ignore-gpu-blacklist\n--enable-gpu-rasterization\n--enable-native-gpu-memory-buffers\n--enable-zero-copy\n--disable-gpu-driver-bug-workarounds\nthis will at least give you pretty much the same configuration as I have right now and I haven't experienced a single chromium crash that would result in choppy scrolling afterward due to acceleration dying for some reason. . @c-edw when I mentioned crash I meant the hardware acceleration library. Like for instance to determine if this is the same issue I had you can just open chrome, go to chrome://gpu make sure that says for most of the things hardware accelerated and then once the issue occurs with scrolling re-check chrome://gpu and if it suddenly says software acceleration for everything then it sure sounds like the same issue I had. \nP.S. quick googlin showed that Fedoro names that drive as smth like xorg-x11-drv-intel try looking for that and removing it if you have it. Modesetting driver in most of the instances is miles better. . @c-edw when I mentioned crash I meant the hardware acceleration library. Like for instance to determine if this is the same issue I had you can just open chrome, go to chrome://gpu make sure that says for most of the things hardware accelerated and then once the issue occurs with scrolling re-check chrome://gpu and if it suddenly says software acceleration for everything then it sure sounds like the same issue I had. \nP.S. quick googlin showed that Fedoro names that drive as smth like xorg-x11-drv-intel try looking for that and removing it if you have it. Modesetting driver in most of the instances is miles better. . ",
    "bendooru": "\nThe mpv window has a smaller size\n\nIf the option floating_maximum_size is unset it will default to 66% of your output's width and height, respectively, which may explain the initial wrong size and upper limit on manual resizing.\n\nmesses up the borders\n\nCan confirm, mpv seems to always render with the initial aspect ratio, so after resizing the image/video may spill out of the container.. Using this minimal config\nbindsym Mod4+e exit\nbindsym --release Print exec grim $(date +grim_%Y-%m-%d-%H%M%S%N.png)\nfor_window [app_id=\"mpv\"] floating enable\n\noutput \"*\" bg #ff0000 solid_color\n\nexec mpv --no-config --gpu-context=wayland -v --image-display-duration=inf /usr/share/backgrounds/sway/Sway_Wallpaper_Blue_1136x640.png > ~/mpv-resize.log\n\nproduces the following behaviour: First resizing vertically: If a video is playing, the transparent areas seen here may become corrupted.\n\nThen horizontally:\n\nLogs: \nsway-resize-debug.log\nmpv-resize.log\nNote: If using the X11 backend for mpv (e.g. --gpu-context=x11) no problems occur.. I think the description is backwards: output * dpms enabled will turn my screens on whereas output * dpms disabled will turn them off.. ",
    "AshtonSnapp": "Sadly Manjaro's latest version of scdoc is 1.6.1-1. Does scdoc have any source code I can download?. Thanks, I will get to work setting that up to the best of my ability, and see if that fixes it.. ",
    "GSF1200S": "I too like the idea of this, though i3 behaves the same way as Sway does now. I also wonder how difficult it would be to provide an option for the indicator to show when you mod+a select the parent where the indicator indicates where a new container will be opened relative to (the other windows in the parent container). \nAnyways, this is pretty low priority I imagine- plenty of important stuff for the 1.0 release that will need priority.. \nsway.log\nSorry for the delay- I was at work. \nThis issue occurs with all usage of the mouse. If I move the mouse around on the root of a workspace, high CPU usage occurs. If I move the mouse around over a window (say termite) where the cursor doesn't change, I get the same result. If I move it around where the cursor does change, the result is the same (and CPU usage doesn't seem any higher than with no cursor change). \nIm unsure exactly what video cards use a legacy interface, but I reason its likely my ancient geforce 9800GTX video card does. Its also worth noting (as you'll see in the debug log) I have dual screens, and that I have both screens driven off that one video card. I updated from git before taking this log just so everyone would know where I was at. If you need anything else, please let me know.\n. ",
    "0verse": "I,m having the same issue, sway freezes with a black screen before loading the background. I,ve tried rc4 realease but it still persists. It all began with commit 7baaa3a . . I did not see any errors or failed to start something in the log but I'll upload the log as soon as I am at home. Also, I don't use elogind or dbus or setuid to run sway. I have built a linux system from scratch and patched sway/main.c to allow root to run sway. I have no user account for the linux system either.. It is a philosophical choice.. Of course, thanks anyway!. ",
    "shumvgolove": "Weird. Debug log shows only XDG_RUNTIME_DIR is not set in the environment. Aborting. although in .bash_profile i had set it up:\nif test -z \"${XDG_RUNTIME_DIR}\"; then\n    export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir\n    if ! test -d \"${XDG_RUNTIME_DIR}\"; then\n        mkdir \"${XDG_RUNTIME_DIR}\"\n        chmod 0700 \"${XDG_RUNTIME_DIR}\"\n    fi\nfi\nEDIT: Sorry for my stupidity, I was running sway with sudo, because running sway without sudo just hangs my system and sway.log shows nothing. I thought I was doing something wrong here.. Weird. Debug log shows only XDG_RUNTIME_DIR is not set in the environment. Aborting. although in .bash_profile i had set it up:\nif test -z \"${XDG_RUNTIME_DIR}\"; then\n    export XDG_RUNTIME_DIR=/tmp/${UID}-runtime-dir\n    if ! test -d \"${XDG_RUNTIME_DIR}\"; then\n        mkdir \"${XDG_RUNTIME_DIR}\"\n        chmod 0700 \"${XDG_RUNTIME_DIR}\"\n    fi\nfi\nEDIT: Sorry for my stupidity, I was running sway with sudo, because running sway without sudo just hangs my system and sway.log shows nothing. I thought I was doing something wrong here.. Yep, my user in the video and input groups and as I said early sway-1.0-rc2 works fine.. Yep, my user in the video and input groups and as I said early sway-1.0-rc2 works fine.. Running sway from TTY immediately hangs my system and after a reboot there was nothing recorded in the logs.\nI have tried env  XDG_RUNTIME_DIR=/tmp sway -d 2>~/sway.log and then manually export XDG_RUNTIME_DIR=/tmp and sway 2>~/sway.log. Running sway from TTY immediately hangs my system and after a reboot there was nothing recorded in the logs.\nI have tried env  XDG_RUNTIME_DIR=/tmp sway -d 2>~/sway.log and then manually export XDG_RUNTIME_DIR=/tmp and sway 2>~/sway.log. Still hangs my system.. Still hangs my system.. No problems.\n. No problems.\n. After further testing, sudo setcap cap_sys_admin=eip /usr/local/bin/sway also leaves my system in unresponsive state.. After further testing, sudo setcap cap_sys_admin=eip /usr/local/bin/sway also leaves my system in unresponsive state.. Yes, I was able to retrieve logs via SSH, thanks for your help.\nsway.log. Yes, I was able to retrieve logs via SSH, thanks for your help.\nsway.log. Unless I am doing something wrong, I'll write down steps that I have completed.\n\ngit clone https://github.com/swaywm/sway\ngit clone https://github.com/swaywm/wlroots\nCompiled both of them.\nsudo chmod a+s /usr/local/bin/sway\necho \"kernel.core_pattern = /tmp/core_%e.%p\" | sudo tee /etc/sysctl.conf in order to change where core dumps will be saved.\nsudo sysctl -p to apply changes.\nsudo vim /etc/security/limits.conf and added line *my username* hard core unlimited\nRebooted.\nLauched sway.\nConnected via SSH.\n\nAnd there is nothing under /tmp folder. Only 1000-runtime-dir which is created by my .bash_profile\nCan anyone reproduce to confirm that issue is either from my side or not?\n. Unless I am doing something wrong, I'll write down steps that I have completed.\n\ngit clone https://github.com/swaywm/sway\ngit clone https://github.com/swaywm/wlroots\nCompiled both of them.\nsudo chmod a+s /usr/local/bin/sway\necho \"kernel.core_pattern = /tmp/core_%e.%p\" | sudo tee /etc/sysctl.conf in order to change where core dumps will be saved.\nsudo sysctl -p to apply changes.\nsudo vim /etc/security/limits.conf and added line *my username* hard core unlimited\nRebooted.\nLauched sway.\nConnected via SSH.\n\nAnd there is nothing under /tmp folder. Only 1000-runtime-dir which is created by my .bash_profile\nCan anyone reproduce to confirm that issue is either from my side or not?\n. Finally I've got something.\ndmesg.log. Finally I've got something.\ndmesg.log. I've got this while compiling sway:\nninja: Entering directory `build'\n[4/268] Generating sway-ipc.7 with a custom command.\nFAILED: sway-ipc.7\n/usr/bin/sh -c '/usr/bin/scdoc < ../sway/sway-ipc.7.scd > sway-ipc.7'\nError at 268:3: Tables cannot be indented\n[13/268] Generating 'protocols/8998617@@client_protos@sta/xdg-shell-protocol.c'.\nninja: build stopped: subcommand failed.\n. I've got this while compiling sway:\nninja: Entering directory `build'\n[4/268] Generating sway-ipc.7 with a custom command.\nFAILED: sway-ipc.7\n/usr/bin/sh -c '/usr/bin/scdoc < ../sway/sway-ipc.7.scd > sway-ipc.7'\nError at 268:3: Tables cannot be indented\n[13/268] Generating 'protocols/8998617@@client_protos@sta/xdg-shell-protocol.c'.\nninja: build stopped: subcommand failed.\n. Thanks.\nsway2.log. Thanks.\nsway2.log. After testing it seems that commenting out output * bg ~/.config/sway/background.jpg fill in config file solves the problem of crashing sway. Setting back output * bg ~/.config/sway/background.jpg fill or output HDMI-A-3 bg ~/.config/sway/background.jpg fill output VGA-1 bg ~/.config/sway/background.jpg fill crashes sway again.\nIs behaviour of swaybg changed since sway-1.0-rc2?. Yep, this fixes the issue. Thanks!. ",
    "julio641742": "Did you add your user to the video group?\nI use the same configuration and the system used to freeze until I added the XDG_RUNTIME_DIR env, sudo chmod a+s /usr/bin/sway the binary and added myself to the video group. Hope this helps.. ",
    "asegarra": "Did you try running with ConsoleKit and DBus ?. Perhaps you should take a step back, remove suid, don't use sudo and start sway with exec ck-launch-session dbus-launch --sh-syntax --exit-with-session sway -d 2> ~/sway.log\nEDIT: My bad, looks like you do need to suid if you don't have logind and I no longer see that there's a requirement for dbus, sorry it's been a while since I tried sway. Disregard.. ",
    "gg-rewrite": "sway.log\nHaving the same issue. \nsway and wlroots freshly built from git. wayland-protocols-git from AUR.  Attached is the result of launching sway with set up XDG_RUNTIME_DIR as per comment above\nI suspect the main culprit is the last line about an undefined symbol, which is also shown when sway is launched within X session.. > Update to latest wlroots, this was recently added and needs an up to date version. It is also advisable to remove already installed versions of wlroots (i.e. from repos or even the aur packages) and build it as subproject within sway. A stable sway experience on the master branch requires wlroots from its master branch as well.\nJust did. Same result.\nJust in case, here are my steps:\n\nClone sway master branch.\nIn the cloned directory, create a subdriectory subprojects.\nGo to subprojects/, clone wlroots master branch.\nBack in sway directory, do meson build / ninja -C build / sudo ninja -C build install. (as far as I see the command builds and installs wlroots too)\nenv XDG_RUNTIME_DIR=/tmp sway -d 2>sway.log\nSame output.. \n\n\nDo you have an old version of wlroots-git installed? Maybe a dependency of an earlier swayidle-git or swaylock-git package? Or maybe the wlroots package which is in community as an dependency of another package?\n\nIn fact I did and entirely forgot about it. After removing community package I recompiled everything and it's working now.\nThank you for your support and my apologies for misunderstanding.. ",
    "pixelherodev": "No problem, I needed my background too :). > Can you please update the commit message to also have a standalone description of the issue and fix?\n\nOtherwise, this LGTM\n\nThis good?. This good? I assume you meant only the ones in spawn_bg. ",
    "SwayUser": "It still happens for me with these branches.\nhttps://0x0.st/ziOH.log (gajim-wayland.log)\nhttps://0x0.st/ziOX.log (nautilus-wayland.log)\nhttps://0x0.st/ziO8.log (sway.log). This works, but it introduces a new bug for me. The bug is that the menubar in Nautilus and other programs doesn't work anymore. (The button in the image doesn't work anymore, for example.)\n. ",
    "Yamakuzure": "Not (e)logind, but systemd-login, which is fixed at a later point as we are at the moment.\nThank you very much for your feedback! :+1: . ",
    "sre": "Thanks!. ",
    "cjbassi": "Done!. ",
    "schauveau": "Thanks. That works and this is a lot more intuitive than my double $ trick.. No. \nPS: I am not a i3 user. I am experienced with Awesome (so a very flexible Lua configuration) and I am looking for a Wayland alternative.. Below is the script I am using to extract the geometry of the focused window. \nTo test it, I use\nbindsym Print sway-focused.py -G | grim -g - /dev/stdout | SDL_VIDEODRIVER=wayland imvr -\nRemark: the -G option always works if sway is patched as proposed above. For an unpatched sway, the -X option can be used instead but it does works correctly for stacked windows. In all cases, the -g option will provide the geometry with all decorations (so the 'rect' values) \n#### sway-focused.py\n```\n!/usr/bin/python3\nUse 'swaymsg -t get_tree' to obtain information about the focused window\nimport sys, getopt\nimport json\nimport subprocess\nmode=\"all\"\nfound=False\ndef is_window(elem):\n    return 'app_id' in elem\ndef find_focused(elem):\n    global mode\n    global found\n    if elem['focused'] :\n        return elem\nif 'nodes' in elem:\n    for child in elem['nodes']:\n        res = find_focused(child)\n        if res:\n            return res\n\nif 'floating_nodes' in elem:\n    for child in elem['floating_nodes']:\n        res = find_focused(child)\n        if res:\n            return res\n\ndef help():\n    print('sway-focused [-g|-G|-a]')      \n    print('Provide information about the focused window in Sway')\n    print('  -g     print geometry including decorations')\n    print('  -G     print geometry excluding decorations when possible (patched Sway)')\n    print('  -X     print geometry excluding decorations when possible (unpatched Sway)')\n    print('  -a     print all information (default)')    \ndef print_geometry(elem):\n    print(\"%d,%d %dx%d\" % ( elem['rect']['x'],\n                            elem['rect']['y'],\n                            elem['rect']['width'],\n                            elem['rect']['height'] ))\ndef print_inner_geometry_patched(elem):\n    if is_window(elem):\n        print(\"%d,%d %dx%d\" %\n              ( elem['rect']['x']+elem['window_rect']['x'],\n                elem['rect']['y']+elem['window_rect']['y'],\n                elem['window_rect']['width'],\n                elem['window_rect']['height']\n              ))\n    else:\n        print_geometry(elem)\ndef print_inner_geometry_unpatched(elem):\n    if is_window(elem):\n        print(\"%d,%d %dx%d\" %\n              ( elem['rect']['x']+elem['window_rect']['x'],\n                elem['rect']['y']+elem['window_rect']['y']+elem['deco_rect']['height'],\n                elem['window_rect']['width'],\n                elem['window_rect']['height']\n              ))\n    else:\n        print_geometry(elem)\ndef print_all(elem):          \n    if 'app_id' in elem and elem['app_id'] != None:\n        print(\"app_id     =\", elem['app_id'])\n    if 'id' in elem:\n        print(\"id         =\", elem['id'])\n    if 'name' in elem:\n        print(\"name       =\", elem['name'])\nprint(\"geometry   = %dx%d+%d+%d\" % ( elem['rect']['width'],\n                                     elem['rect']['height'],\n                                     elem['rect']['x'],\n                                     elem['rect']['y'] ))\nif 'pid' in elem:\n    print(\"pid     =\", elem['pid'])\n\n# The following are only set for xwayland windows\nif 'window_properties' in elem:\n    xprop = elem['window_properties']\n    if 'class' in xprop:\n        print(\"x-class    =\", xprop['class'])\n        if 'instance' in xprop:\n            print(\"x-instance =\", xprop['instance'])\n        if 'title' in xprop:\n            print(\"x-title    =\", xprop['title'])\n        if 'window_role' in xprop:\n            print(\"x-role     =\", xprop['window_role'])\n\ndef main(argv):\n    global mode\ntry:\n    opts, args = getopt.getopt(argv,\"hgGXa\",[])\nexcept getopt.GetoptError:\n    help()\n    sys.exit(2)\n\nfor opt, arg in opts:\n    if opt == '-h':\n        help()\n        sys.exit()\n    elif opt in (\"-g\"):\n        mode = \"geometry\"   \n    elif opt in (\"-G\"):\n        mode = \"inner-geometry\"\n    elif opt in (\"-X\"):\n        mode = \"inner-geometry-unpatched\"   \n    elif opt in (\"-a\"):\n        mode = \"all\"\n\n\nerr,output = subprocess.getstatusoutput(\"swaymsg -t get_tree\")\nif err!=0 :\n    sys.stderr.write(output)\n    sys.exit(1)\n\ntree = json.loads(output)\n\nelem = find_focused(tree)\n\nif elem: \n    if mode == \"geometry\":\n        print_geometry(elem)\n    elif mode == \"inner-geometry\":\n        print_inner_geometry_patched(elem)\n    elif mode == \"inner-geometry-unpatched\":\n        print_inner_geometry_unpatched(elem)\n    elif mode == \"all\":\n        print_all(elem)\n\nif name == \"main\":\n    main(sys.argv[1:])\n```. I disagree. I looked in i3 and I now understand the problem. In sway, the 'rect' box includes the decoration while it does not in 'i3'.\nFor instance, let's compare the json tree for a stack of 6 windows with a bar on top.\nMy screen resolution is 1920x1080. For convenience, I am naming the stacked container S and the 6 windows W1..W6 \nIn i3:\n{\n  \"name\":        \"S\",\n  \"layout\":      \"stacked\",\n  \"rect\":        { \"x\": 1472, \"y\": 19, \"width\": 448, \"height\": 1061  },\n  \"deco_rect\":   { \"x\":    0, \"y\":  0, \"width\":   0, \"height\":    0  },\n  \"window_rect\": { \"x\":    0, \"y\":  0, \"width\":   0, \"height\":    0  },\n  \"nodes\": [\n      {\n        \"name\":        \"W1\",\n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953 },\n        \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 448, \"height\":  18 },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951 },\n      },                                                   \n      {\n        \"name\":        \"W2\",      \n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953  },\n        \"deco_rect\":   { \"x\":    0, \"y\":  18, \"width\": 448, \"height\":  18  },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951  },\n      },                                                   \n      {                                                    \n        \"name\":        \"W3\",      \n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953  },\n        \"deco_rect\":   { \"x\":    0, \"y\":  36, \"width\": 448, \"height\":  18  },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951  },\n      },                                                   \n      {\n        \"name\":        \"W4\",      \n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953  },\n        \"deco_rect\":   { \"x\":    0, \"y\":  54, \"width\": 448, \"height\":  18  },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951  },\n      },                                                   \n      {                                                    \n        \"name\":        \"W5\",      \n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953  },\n        \"deco_rect\":   { \"x\":    0, \"y\":  72, \"width\": 448, \"height\":  18  },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951  },\n      },                                                   \n      {                                                    \n        \"name\":        \"W6\",      \n        \"rect\":        { \"x\": 1472, \"y\": 127, \"width\": 448, \"height\": 953  },\n        \"deco_rect\":   { \"x\":    0, \"y\":  90, \"width\": 448, \"height\":  18  },\n        \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 444, \"height\": 951  },\n      }\n  ],\n}\nThe height of the bar and of the decorations in i3 are respectively 19 and 18.\nThe rect boxes for each Wi does not contains the 6 decorations:\nWi.rect.height = screen.height - bar.height - 6*Wi.deco_rect.height\n                = 1080 - 19 - 6*18\n                = 953\n  Wi.rect.y      = bar.height + W.deco_rect.height\n                = 19 + 6*18\n                = 127\nThat also means that in i3\n  - Wi.rect is absolute and does not contain the decoration\n  - Wi.deco_rect is relative to S.rect which means that\n    the absolute coordinates for the Wi decorations can\n    be obtained with S.rect + Wi.deco_rect\n  - Wi.window_rect is relative to Wi.rect which means that\n    the absolute window coordinates excluding decoration and\n    borders can be obtaned with Wi.rect + Wi.window_rect\nNow in Sway:\n{\n  \"name\":   \"S\",\n  \"layout\": \"stacked\",\n  \"rect\":        { \"x\": 1280, \"y\": 29, \"width\": 640, \"height\": 1051 },\n  \"deco_rect\":   { \"x\":    0, \"y\":  0, \"width\":   0, \"height\":    0 },\n  \"window_rect\": { \"x\":    0, \"y\":  0, \"width\":   0, \"height\":    0 },\n   \"nodes\": [\n    {\n      \"name\":   \"W1\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    },\n    {\n      \"name\":   \"W2\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    },\n    {\n      \"name\":   \"W3\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    },\n    { \n      \"name\":   \"W4\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    },\n    {\n      \"name\":   \"W5\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    },\n    {\n      \"name\":   \"W6\",\n      \"rect\":        { \"x\": 1280, \"y\":  29, \"width\": 640, \"height\": 1051 },\n      \"deco_rect\":   { \"x\":    0, \"y\":   0, \"width\": 640, \"height\":  162 },\n      \"window_rect\": { \"x\":    2, \"y\":   0, \"width\": 636, \"height\":  887 },\n    }\n  ]\n}\nHere, the bar and decoration heights are respectively 28 and 27. The most obvious\ndifference with i3 is that Wi.rect is now equal to S.rect which means that Wi.rect\nnow includes all the decorations. \nConsequently Wi.window_rect is relative to neither W.rect nor S.rect and is pretty much useless in Sway. The solution is either to fix it as proposed in my first comment or to exclude the decorations from W.rect \n. I do not think that the problem is fixed. Sway does not follow the I3 behavior. See my new comment in https://github.com/swaywm/sway/issues/3785#issuecomment-468253587. I also noticed a few other differences that may affect the future implementation.\n- in i3 each floating window is described by 2 nodes (the actual window and its PARENT container) but in sway only one node is used (so no usable PARENT).\n- in i3 a window with a border of type none or pixel has a usable deco_rect when its parent layout is stack or tabbed. That makes sense since those containers are drawing a decoration for each of their elements. In Sway, the deco_rect is incorrectly filled with zeros.   . Thanks. This patch is now making window_rect useful for example to take screenshots of the current window. I tested a few windows and so far rect and window_rect are working as expected except in the case of a stacked container where the area described by rect still contains all the decorations except the first. Simply speaking, for a stacked parent container, the code at ipc-json.c:537 should consider the height of the decoration multiplied by the number of siblings. \nI did not test deco_rect yet.  . So far all my tests on deco_rect are successful including on floating windows.. There is a problem in fullscreen mode where a decoration is incorrectly reported.\nCurrent:  \n\"rect\":        { \"x\": 0, \"y\": 27, \"width\": 1920, \"height\": 1053 },\n  \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 1920, \"height\": 1080 },\n  \"deco_rect\":   { \"x\": -1280, \"y\": 0, \"width\": 1920, \"height\": 27 },\nExpected:\n\"rect\":        { \"x\": 0, \"y\": 0, \"width\": 1920, \"height\": 1080 },\n  \"window_rect\": { \"x\": 0, \"y\": 0, \"width\": 1920, \"height\": 1080 },\n  \"deco_rect\":   { \"x\": 0, \"y\": 0, \"width\": 0, \"height\": 0 },\n. I agree. Having a parent via floating_nodes instead of nodes is probably not a big deal for most use cases. As far as I can tell, everything is working as expected so I think that the whole issue can be closed. Thanks. I confirm that rect, deco_rect and window_rect are not working as expected for fullscreen windows. Thanks. I confirm that the rect, deco_rect and window_rect are now working as expected in stacked containers. Thanks. ",
    "lolzballs": "I'm looking into migrating to sway and I was looking for a way to do this type of configuration. This seems like something I can tackle in the next couple of days if no one else has started working on it.. ",
    "porrided": "I can confirm that telegram-desktop 1.5.11 and mumble 1.2.19 also cause this on sway 1.0-rc3.\nBy the way, the colours of telegram-desktop's tray icon are messed up as well (#3635).\napproximately 15 seconds of stracing swaybar with tdesktop's icon in the tray\n. ",
    "everdabling": "Similar problem with scdoc 1.9.1\nNinja gives\n[7/273] Generating sway-ipc.7 with a custom command.\nFAILED: sway-ipc.7 \n/bin/sh -c '/usr/local/bin/scdoc < ../sway/sway-ipc.7.scd > sway-ipc.7'\nError at 268:3: Tables cannot be indented\n[12/273] Generating 'protocols/protocols@@client_protos@sta/xdg-shell-protocol.c'.\nninja: build stopped: subcommand failed.\n. ",
    "vkobel": "Same here, looks like you really need scdoc ==1.9.0: https://git.sr.ht/~sircmpwn/scdoc/archive/1.9.0.tar.gz\nI managed to compile sway using this version.\n1.9.0 PKGBUILD: https://git.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/scdoc&id=a46e2500bfe54d01c15d2381b2f54c5ef34d6034. ",
    "Gigg1ty": "I had a somewhat similar issue, and my setup looks like yours. My primary screen is my TFT, and i have a TV connected to the left of my TFT:\noutput DP-1 mode 1920x1080@119.982002Hz pos 1920 0\noutput HDMI-A-2 mode 1920x1080@60Hz pos 0 0\nIf the screen to the left (pos 0,0) is disabled, Firefox (with wayland enabled) will no longer show any menus (eg. right click on links to open in a new tab, or when clicking on folders in the bookmarks toolbar).\nI believe some applications do not handle it very well, if the only active screen is not positioned at 0,0.\nI solved this through a script. My TV is initially disabled in sway's config (and the TFT is at position 0,0):\noutput DP-1 mode 1920x1080@119.982002Hz pos 0 0\noutput HDMI-A-2 disable\nThe script then enables HDMI-A-2 again, and moves DP-1 to 1920,0:\nswaymsg \"output HDMI-A-2 enable\"\nswaymsg \"output DP-1 mode 1920x1080@119.982002Hz pos 1920 0\"\nswaymsg \"output HDMI-A-2 mode 1920x1080@60Hz pos 0 0\". ",
    "hugbubby": "I'm a little confused on how to parse these error messages in the CI. What does \"Table could not be indented\" mean?. @emersion Done.. @emersion Done.. It does say that if it succeeds, it should return 0, at least in the man page. But I forgot about errno, I'll change it back.. I'm not very good at computer. ",
    "IComplainInComments": "Im also experiencing this issue using Vmware and Open-vm-tools. The mouse works, but no cursor wants to appear.\nI've tried basic troubleshooting and nothing is working. Including possible solutions for Wayland, Xwayland, and Xorg (that have/had this issue as well).. EDIT: Let me link it for you...\nEDIT 2: @emersion https://github.com/IComplainInComments/Output\n. Looks like adding WLR_NO_HARDWARE_CURSORS=1 fixes the issue.\nSo it looks like this problem is being caused due to a Rendering issue with Wayland and the Driver.. ",
    "theothermatt": "Output of drm_info:  https://gist.github.com/theothermatt/710cd42e559a5d361fe0890c5d239161. Also, I can confirm that using WLR_NO_HARDWARE_CURSORS=1 fixes the issue, albeit with a slightly laggy mouse, which is expected I guess.. ",
    "jnschulze": "There's a related discussion at https://www.virtualbox.org/ticket/18239#comment:14 . According to the latest post, vmsvga doesn't support hardware cursor planes yet.. ",
    "lapryx": "Thanks a lot, did not know this was an issue. now everything is installing.. ",
    "aspieln3r": "I'm using latest wlroots from AUR\naur/wlroots-git 0.4.1.r20.g30d34261-1 (+25 6.15%) (Installed: 0.4.1.r26.g2baad6eb-1). Thanks \nIssue is fixed. ",
    "lineaar": "Here is the log https://gist.github.com/lineaar/f9a4fa41ca067a5f87e3153c0753650f. The graphics card used in that machine is an ATI Radeon HD 4770.. Now, taking a screenshot with grim -c does not capture what is being observed.\n\nTaking a picture of the screen does however.\n\n. ",
    "Supded": "+1\nOnly one card - 4850 hd.\nDriver - radeon with firmware.. ",
    "alyssais": "sway-bar(5) says\n\nEach line of text printed to stdout from this command will be displayed in the status area of the bar.\n\nBut that\u2019s not what this is at all. This is \u201cThe first write to stdout from this command, up to the first newline, will be displayed in the status area of the bar\u201d.\nShould the manual be updated?\nI\u2019m also told that this is not what i3bar does.. Sorry, I mean \u201cthe first write that ends in a newline\u201d. Any write that doesn\u2019t end in a newline will be ignored.. > I compiled your program and used it as the status_command, and it displayed \"hello\" followed by \"world\" a second later as expected, so I am not sure what is going on.\nJust to confirm: it showed \"hello \", and then \"hello world\" all at once, but never \"world\"?\n. > And perhaps you should bring this up with the i3 team too if it hasn't already.\nAre you aware of any documentation for i3bar that says the output will be shown line at a time? I couldn't find any (or really anything about the non-JSON format at all).\n. ",
    "xPMo": "Confirmed: sway 1.0-rc1-149-g7f700e08 (Mar  7 2019, branch 'makepkg'). Also, confirmed that this does not match i3 behavior.\nFocus travels between floated windows, but the newly focused window is not raised. This occurs when:\n- floating \u21d2 floating (as in focus right/left/...)\n- tiling \u21d2 floating (as in focus floating or focus mode_toggle)\n- passing mouse over the lower window (with focus_follows_mouse)\nTo raise the window, it must be clicked. (button 1/2/3, scrolling does not raise)\nShould focused windows always be raised? I know some window managers choose to expose an option for this. (XFCE4, for example).. ",
    "ZakharEl": "I updated with the relevent info above. Even after reinstalling sway it still wouldn't load the background.. I installed it from the arch aur. It says it's version 1.0. yeah it's the community package. Thanks for your help.. ",
    "nifker": "@ddevault This does not even work with sway 1.0 and wlroots 5.0.. ",
    "AlessioDP": "@nifker With a manual compilation of wlroots it worked for me.. ",
    "cRaZy-bisCuiT": "Well, restarting the session did solve the problem. Thanks & closed.. ",
    "divoxx": "@RedSoxFan oops. I'll test that out later (not on the same computer right now) but I think that was just a mistake I did while trying different values for it. I've also tried grp:win_space_toggle and grp:ctrls_toggle.\nNone of the settings are being correctly applied. For example, the layouts/variants are not applied as well.. ",
    "SjonHortensius": "Sure, I just wanted to gauge the sentiment first. :). > Correct me if I'm wrong, but you've used a translation tool for this, yes?\nYes, and I've reverse-checked a few to confirm it wasn't total gibberish.\n\nI'm sure not what the procedure is supposed to be but most of the time I see people just updating the English README.md and then those changes eventually trickle down to the translated versions.\n\nI checked for any rules or guidance on this, but found none. I did find that the last change appeared to do mass-edits to all translated READMEs as well.\n\nA lot of the translations right now are outdated and might just lead to further confusion. Maybe we should discuss this.\n\nMaybe a related issue could be created to discuss how to do this in the future? It would make sense to have a list of contributors per language who would be responsible for updating their part of the docs once changes are made.. I've pushed another commit - but I'm pretty sure others have been updating a few readme's as well for languages they don't fully understand ;). Thanks - I actually mentioned dmenu here because it is included in the default configuration. I'll rewrite it. ",
    "stratosgear": "Sweet, that was it!\nI never before had to \"escape\" quote characters.  I guess they somehow have to travel through IPC to sway as is without bash consuming them. Makes sense.\nThanks!. ",
    "honza": "How can I verify these things? The \"s\" ins't in the output of of ls -l $(which sway).. Empty output. > Beats me then\nThanks for trying!. ",
    "ahilsend": "I have tried changing the screen positions, and found a setting that does not have this issue.\nIf the screens are lined up in one row in that order: eDP-1, DP-3, DP-4 then Firefox receives mous clicks.\nChanging to moving the screens above the laptop screen does not work, and changing the order within one row does not work either.. ",
    "bbigras": "This commit seems to fix the problem for me. Thanks!!. ",
    "oblique": "logs: swaybar.log\n. ",
    "DarkDeepBlue": "Removing the comments is fine with me.\nAfter the discussion on the IRC: Should I use getline() here or not?. Should I read it as: \"Do not mark unsigned integers explicitely\"?. I want to avoid isspace() being called with a negative integer.\nShould I check for 0 > str instead or do you want to get rid of the check entirely?. I write my functions with one single exit.\nShould I change that for your code base?. Yes, good point.. To be honest, the code is too complicated and too buggy. I see it the exact same way. The whole thing needs to be rewritten.. ",
    "lbonn": "Yes, I agree. I picked the existing style of the function.. ",
    "angvp": "typo here it's swaygrab. configuraci\u00f3n another typo. ",
    "themindfulcoder": "Why is this called twice?. ",
    "pvsr": "That does work, thanks!. ",
    "v-gu": "thanks, my fault. ",
    "NokiDev": "Done. Removed from commit.. Removed from commit as well.. Removed from commit.. Removed from commit.. removed from commit.. Done, by using json_object_new_int\n1 = fullscreen on\n0 = fullscreen off. Raaaah, I was pretty sure it was a tab... \nI'll fix that in a minute.. Done. ",
    "x8BitRain": "Replace komposer with compositor, there isn't an Indonesian word for Compositor and komposer isn't the right word to describe it so you'd default to the English word for it.. Untuk pertanyaan dan jawaban ikut IRCnya.. Kalau mau mendukung proyek ini, bikin kontribusi di Patreon [link]. Just say \"Signature Rilis\" as Tanda Tangan means hand written signature.. Semua rilis tertanda dengan B22DA89A dan menerbitkan [di github]. Sway tersedia untuk banyak distibusi Linux, coba di instal package \"sway\" untuk distibusi anda, kalau tidak tersedia untuk distibusi anda, coba baca [Wiki] untuk informasi menginstal di distibusi anda. . Jika anda mau membuat package untuk distribusi anda, kunjungi channel IRC. Compile dari Source. Instal dependency . Waktu Compile Dependancy. Mengetik command ini. Untuk sistem tanpa logind, pakai:. Jika anda sudah menggunakan i3, duplikatkan konfigurasi i3 anda ke ~/.config/sway/config dan sway akan langsung siap. . Jika anda belum menggunakan i3, duplikatkan contoh konfigurasi ke. ~/.config/sway/config. contoh konfigurasi bias ada di/etc/sway/config. Pakaiman 5 sway` untuk informasi mengenai konfigurasi.. ",
    "ha1zum": "Alternative: \"Dependensi Instalasi\". Kompilasi dari kode sumber . Better: Dependensi saat kompilasi. Alternative: \nMengetik perintah ini. Agree with @x8BitRain version, but there are grammatical errors. I think it should be:\nSway tersedia untuk banyak distribusi Linux, coba instal package \"sway\" untuk distribusi Anda, kalau tidak tersedia, coba baca [Wiki] untuk informasi instalasi di distribusi Anda.\nAlternatively, if \"Anda\" is too formal, just use \"kamu\". If you want to use \"Anda\", that word must be capitalized.. ",
    "VincentVanlaer": "Could you give an example of how this breaks confinement? My knowledge of the sway code is almost non-existent, so I might be missing something obvious.. At lines 444-445 dx and dy are updated with sx_confined,sy_confined. These are then passed to wlr_cursor_move and we pick those new coordinates up in the arguments of node_at_coords.. From what I can tell the purpose of that code is to get the coordinates of the pointer in the coordinates of the surface to which the constraint is associated. It does that by assuming that the previous position of the cursor is still over the constraining surface, and if not, it bails out. I'm not a fan of that really, I'd rather have it obtain the surface local coordinates in way that doesn't make these assumptions, but couldn't really find one since the constraint doesn't know where the surface is.. ",
    "maciejjo": "Sway is available on non-linux distros as well (e.g. FreeBSD), and original document doesn't specify Linux so I'd omit that here. s/wykna\u0107/wykona\u0107/. I'd suggest not using 'binarka' as it is rather colloquial word - \"plik binarny\" would be more appropriate.. ",
    "kreativka": "Maybe \"pliku wykonywalnym\" like an executable file?. ",
    "benutzer193": "Would following condition work?\nc\nif (abs(progress - prev_progress) > 10). ",
    "Nicholas2750": "Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Went with, ha1zum's suggestion. Also changed all \"anda\" to\"Anda\". Thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. Fixed, thanks!. ",
    "phue": "suggestion\n*sway*(5) *sway-bar*(5) *sway-input*(5) *sway-output*(5) *sway-ipc*(7). "
}