{
    "jarun": "This can be easily achieved with scripts. I would prefer scripts as I can add the tags manually.\nI have added elaborate examples on batch import and update. Please check the Examples section.\nDoes that solve your problem?\n. Thanks for confirming. I'll close the issue with your comment.\n. Update: Import/export options are available in Buku for a while now.\n. It would be quite processing intensive, something I don't think is a must for a simple bookmark manager. However, I am leaving the issue open for some more inputs from others.\n. Closing this bug as I didn't get a similar request from anyone else. Also, I think https://github.com/jarun/MarkIt/issues/2#issuecomment-155654058 is reasonable.\n. This was in my plans when I started. Later I thought one might not want to go through the pain of having to unlock the DB repeatedly. As you are looking for the feature, I will find some time to implement it :).\n. Thank you! Glad to know it helps.\nOn a side note, please consider donating a little if you find it useful.\n. Sorry for the delay. Too busy nowadays. Any taker to implement this is more than welcome! (@shaggytwodope, @narrat, @jeremija, @ibaaj)\nAs a workaround, you can write a wrapper script or use a utility to password protect the file and decrypt it. Options:\n- mcrypt\n- ccrypt\n- oneway\n. Guys, I am implementing it now. Thanks anyway!\n. Please do! A review is always welcome!\n. Fixed at https://github.com/jarun/Buku/commit/97ff185bb713ded5ae6f70290ba05de2838fd49c.\n. No plans as of now. What I do to keep the DB live is store the actual DB in Dropbox.\n~/.cache/markit/bookmarks.db is a link to that file. That way, it's updated whenever I make any changes to my bookmarks.\nHowever, if you want to enhance it for your needs, please feel free to do so. I will accept the patches if they look fine.\n. Will check this. Thanks!\n. I have added manual title update support in the latest dev branch (option -m for manul). Please test and confirm if it solves your problem.\nIf not, I'll reopen this issue.\n. Thanks for confirming!\n. Hi,\nWould it be possible for you to send a patch?\n. That's absolutely fine! Thanks for your help with this.\n. Reviewed. Don't forget to award Buku a star ;).\n. Reviewed and added some comments. Yep, I do it by hand.\nAlso, please raise the pull request after the next release (planned next weekend). There are changes in master already (expect some more) and you may need to rebase your code before raising the pull request.\n. The latest release is off the hooks now. You are good to go.\n. Thanks! No hurry!\n. Hi,\nAny update on this?\n. :+1: \n. I'm closing this. Feel free to raise a PR directly.\n. Closed at https://github.com/jarun/Buku/commit/7197aecbb589408f74fd33ce82ed59c3ac4f9f81.\n. @CaptainQuirk I'll implement bookmark description/comment support in a couple of days. You may want to update the Json output if you need it.\n. The original idea is to have to type less. Once the user gets used to it, this should not be a big issue. The only regular options are probably add (online) and search.\nAt the moment, I am not planning to have additional code around options so that we have less to maintain. However, new features are welcome.\n. > There is a simple way to avoid typing too much, it's defining aliases.\nTrue. And after the user sets an alias he doesn't need to remember the option anymore. It's a one-time activity.\n\nA subcommand name will always be easier to understand than command line switches\n\nI agree and I tried to keep the options initials, as far as possible. Like a for add, w or web fetch etc.\n\nI would add that there is currently a mix in the options between actions and flags\n\nIt's intentional and simply running:\n$ buku\nshows the usage. Manpage now has the examples from readme too.\nIn case this will help your utility as a wrapper, how about adding the long forms in your utility and calling buku options internally? That way your users won't have to deal with this.\n. As long as it works fine, I constantly try to keep the codebase as small as possible. Less to maintain...\nI can think of one way... moving to the argparse framework with both short and long options. The codebase will also become smaller and more readable with it.\nMy other utility googler already has an example implementation (no long options though ;D). Would you care to submit a patch using argparse with both short and long options? No hurry from my side.\n. I have broken options in help in two sections: general and power toys. This would hopefully help the users figure out the regular options easily.\nIf you still believe sub-commands would be more helpful, please feel free to submit a patch with the more modern argparse framework.\n. > Do you want to add long options? It would be trivial.\nI wasn't complaining :). The beauty of googler is it works the way your browser would if you just run googler at the prompt.\nHowever, @CaptainQuirk is looking for subcommands and optional commands in addition to long options. For example:\n// delete everything\n$ buku delete\n// delete entry 15\n$ buku delete 15\n. See you on Gitter ;)\n. I am open as long as I get a patch for buku.\n. Thanks for the suggestion.\n@zmwangx any notes on arghandler? Pros and cons-wise. I am not familiar with it.\n. I just checked, it is a wrapper over argparse and will create an additional dependency which doesn't come with base python. Please stick to argparse.\n. Hi,\nAny update on this?\n. No issues. I'll close this till someone willing to handle this picks it up OR I get some time myself to add the support. Thanks for bringing this up :+1: .\n. Added this to the contributions section for greater visibility.\n. @CaptainQuirk @zmwangx I have started working on moving to argparse. Check out https://github.com/jarun/Buku/tree/argparse.\nIt may take a while to finish this but I think it's for the good. I can see a lot of code reduction already.\n. Closed at https://github.com/jarun/Buku/commit/addeecff944a2e955ce95956bd03075e77e465eb.\n. Thank you!\n. Please document the new location in readme and manpage. We can omit the older path as we'll have the logic to move the DB file internally.\n. Thank you very much!\n. In case it interests you, please take a look at issue #8.\nOnly if you can spare some time. I don't mean to impose.\n. No problem! :)\n. Thanks! I'll review and merge this.\n. Merged. Thanks again!\n. @CaptainQuirk, I have removed 3 options (-P, -D and -w). This will reflect in next release. You may need to update your application to adapt to the same.\n. -R is gone too.\n. Thanks for the report! I will check this.\n. Fixed at fbc8d25a89f1acf9b65a034a6bf656896548f1a1.\n. The earlier fix had an issue. Fixed at https://github.com/jarun/Buku/commit/61ab23935157c6db7d2981db69acde8e17b86e57.\n. I know, but if I had wanted only to move to argparse I'ld have done that on master in 1/2 days. The reason of this new branch and prolonged effort is to improve the design in several areas too. Even the parameter name changes intend to add more clarity. Please let me know which areas you are finding difficult to understand and I'll explain.\nBut most importantly, if you can spare some time, I need help with testing this stuff. Manual would do, but the best thing at this point would be to set up travis to automate the testing. If you aren't familiar, I guess you can take a look at googler travis integration and probably consult @zmwangx.\n. It's oversimplified! :dancers: \n. Update: The exact word match feature is still up for grabs.\nThat's awesome! Thank you!\nFor the time being we can use a new option. We can think of ways to merge it to -s and -S later. Note that any or all apply to exact search also.\nRegarding the implementation, only removing the wildcards will not work because match would not match match. (note the . at the end). Check it out.\nThere are two options as per my understanding:\n- we use regexp in SQLite queries. tricky but elegant.\n- we fetch the results as per -S or -s first and run another pass on the results for exact match. Costly.\nMy personal preference would be the first approach.\nIn case you run into FTS3 and FTS4, those will be too strong solutions for buku, where we have only one table. I'ld rather prefer the second approach to those. But the regexp solution would be the best.\n. You can refer https://github.com/jarun/googler/pull/34#issuecomment-188994841 for a regexp sample.\n. But buku is not a note-taking program. However, there were requests on Hacker News to:\n1. integrate with Pinboard\n2. auto-tag based on other users' tags from Pinboard\nIf you would like to work on the Pinboard sync, I'm game. :)\n. > please take the following as constructive criticism\nNo probs. I know you'll talk about the code. I'm not so badass myself ;).\n\nFunction naming is all over the place\n\nI know. And we need good return vals instead of printing stuff within a func.\n\nI've refactored all methods related to database connections and cursors in one BukuDb object\n\nThank you so much!\n\nCI... it would make sense to add tests first\n\nThe list would be done before the next release. I want to push in some more changes first. Including yours. And I'm in no hurry for the next release. 2.0 is reasonably stable as I understand from the feedback.\n\ncrypto\n\nWe do show a message on first buku operation: DB file is being created. You may want to encrypt it later.\n. It's possible but the code is not yet ready for that. Mostly because I never had the app in mind when I started writing it. We need to refactor the APIs, return values etc. Please take a look at feature request #18.\nI'ld be more than happy if you contribute. We can start with the API refactoring keeping the functional logic same.\n. It was a conscious decision not to submit to PyPI at the moment. PyPi is more suited for libraries than standalones. However, if we re-format the code later so it can also be extended, we'll submit to PyPI. There's already a open bug on that at #18.\nAdded to the ToDo list.\n. > livestreamer, vprof are maybe library\nThat's the point. They can be extended easily by newer apps. At the moment buku is not ready for that. We'll get there, eventually.\nI've added this to the ToDo list as well.\n. We can have it. :+1: \n. Added in the ToDo list.\n. noninteractive usage is supported in v2.1.\n. -f N works for -S too. Please test v2.1. If I'm missing something please cite elaborate examples.\n. I see it now. The difference is because search results should show the index as well. In addition there's some optimization done for printing search results.\nCan you explain your use case? Why do you need this?\n. > I've just come across your project and I really like it\nGlad to know you like the effort. :)\n\nadding date field\n\nNo plans to include date as of now. I saw the field while implementing import, but I don't see why one needs to remember the date on which a bookmark was added.\nNote that the bookmarks are already sorted in the order they were added (other than the case where a bookmark is deleted).\n\nsorting by name\n\nYou probably mean title by name here. Once again, I don't see how it is relevant if you don't remember anything about a bookmark. Let's say you want to use Google, you search search (if you have a tag like that) or just google. You don't sort the bookmarks and find google from the list.\n\ntree structure\n\nTags do just that. The representation is different is all. But what's the different between showing all bookmarks under a directory important bookmarks and searching all bookmarks tagged important bookmarks?\nI would appreciate if you consider Buku as a distinct bookmark management utility with its own features, not a replacement of Firefox or Google Chrome way of storing bookmarks.\n. If you are interested in implementing export bookmarks (in html, date can be the date exported on), I am all ears. Added the task in the ToDo list.\n... Ignore. I am implementing export feature.\n. This is awesome! I will take a fresh look at the search output as well. But it will take same time.\nBTW, you can upload an image on imgur and link that ne from README. Will keep your repo size smaller. I used to store image in-repo earlier but the size increases considerably with each new image after GUI changes.\nAlso, if the rofi project has provisions, you may want to submit the Buku 'plugin' to the mainline project.\n. I see. In that case do let me know if you intend to merge this to Buku. You will need to modify the current Makefile to install the script though.\n. > git support\nNo please.\n1. what does a bookmark manager have to do with a version control system?\n2. git is not the only version control system around. why on earth would we pick git?\n. @carnager I've linked the rofi script from the readme. Hope that's fine with you. :)\n. Continued at #39.\n. I'll check this. Thank you for the report!\n. Hi,\nThis happens because of the way bash interprets !, even before buku is actually called.\nWith fish shell:\n```\n$ buku -a \"https://groups.google.com/forum/#!forums/iamthecavalry\" personal, security\nTitle: [Google Groups]\nAdded at index 329\n\nhttps://groups.google.com/forum/#!forums/iamthecavalry\n    Google Groups\n    [TAGS] personal,security\n```\n\nTry the following with bash:\n```\n$ buku -a \"https://groups.google.com/forum/#!forums/iamthecavalry\" personal, security\nTitle: [Google Groups]\nAdded at index 329\n\nhttps://groups.google.com/forum/#!forums/iamthecavalry\n    Google Groups\n    [TAGS] personal,security\n```\n\nNote the \\before !.\n. you are welcome!\n. Hi,\n\nimporting bookmarks\n\nI've been thinking of working on the import feature for a while. Other users have requested this feature too.\nIn the meantime, if you are interested in contributing back the import feature, please take a look at the custom parser in my other utility googler as a sample.\n\nComment field\n\nThis would warrant a DB schema change which also means I need to take care of backward compatibility. Might take a while but I'll implement.\n. On second thoughts, I think comment (description) field should be implemented first to support Firefox bookmark html import. Chromium doesn't support any though.\n. Raised issue #17 for comment support.\n. @cd2357 Thank you very much for the sample. This really helps. I'll take a look.\nMy real problem is the lack of time. I am already implementing other requested features and feedbacks from hacker News share, the comment field support from this one... Then a full-time job, a 2 yr old, you know the ordeal. :)\n. @cd2357 I took a look at the implementation today. I uses Jsoup. Instead of using BeautifulSoup I'ld probably write a small parser extending HTMLParser. In any case, it gives me a hint on the fields. Thanks! \n. Comparing BeautifulSoup and my custom parser:\n- I can still late import bs4 given the bookmarks import functionality is an ad-hoc function.\n- using bs4 reduces the amount of code I need to maintain.\nSo bs4 it is!\n. Implemented at https://github.com/jarun/Buku/commit/a769f716716ecaf74a15ea71135e1b97af1c1368.\n. Fixed at https://github.com/jarun/Buku/commit/c252981bd2dec479154bf952b376c7652136dc7c.\n. So in brief, you want a library out the current program. Interesting idea indeed, but it would need some refactoring. I would work on it when get some time.\nRight now, I have several enhancements that I'ld like to implement in buku.\nIf you can spare some time, please feel free to raise a pull request with stuff you are looking for. buku is quite modular with reasonable documentation. And I'ld be more than happy to explain.\n. Ongoing work: https://github.com/jarun/Buku/pull/21, https://github.com/jarun/Buku/pull/22, https://github.com/jarun/Buku/commit/41281943f5d7adef844fe5a7e04660737c39db5b, https://github.com/jarun/Buku/commit/27ef1c9df5b33f6dc88c16d38d2dcfc1a870f19f.\n. @toyg any update here?\n. > Sorry, been busy. Will try to get something done today.\nNo hurries! Also, please rebase before you start changing. I'd been pushing changes.\n. As long as buku handles piped input, have it your way. :)\n. Closing this with the activities already completed. Please raise PRs directly.\n. Will review and test by EoD.\n. I've made some changes around this (commits https://github.com/jarun/Buku/commit/e39e2621d5c61637c4465c894c6dadaaec847e52 and https://github.com/jarun/Buku/commit/687f15a325d8c97690b3bda0e96b7294e4c372d0). Please test the latest master code.\nIn addition to working with http://slashdot.org these commits will also handle the following URLs:\nhttp://my.lovelycharts.com/\nhttp://my.lovelycharts.com\nhttp://www.google.co.in\nhttp://www.google.co.in/\nAlso, I haven't added any new libraries, which is a general practice I follow as long as it's not absolutely necessary.\nClosing this PR with the above comment.\n. Will review and test by EoD. I'm in IST.\n. This is awesome!!! :+1: \nCan you please rebase to the latest on master?\nI'm really sorry you have to go through this, but your first PR prompted me to make the changes for URL handling. And I continued to fix the other issues uncovered during my tests.\n. Thank you very much!\n. > I'm breaking work in smaller chunks so they're easier to merge\nYes, please!\n. Thank you!\n. Please take a look at https://github.com/jarun/Buku/commit/8ca31e6ce8beec2b7cabb7e4985a229b97ea6f57, many \"blank\" lines have trailing spaces left. You might have to set your editor to trim trailing white spaces.\n. We'll stick to >=. I'll make the change. When we have continuous integration in place, we can expect things to be figured out before they break.\n. Thanks!\n. Thank you!\n. I'll check and merge.\nBTW, I'm thinking of moving print_bookmark() out of the BukuDb class. It's quite difficult to remove the global dependencies from it and if someone imports as module, he probably should have his own print mechanism. We can add another API instead which returns a single record/bookmark details, or all, based on the param passed.\n. Seems you've closed it. Are you going to raise a fresh PR?\n. Thank you!\n. > Somehow I can't squash the commits, sometimes github really baffles me...\nI'll take care of it. No issues at all! GitHub now provides an option to squash and merge. But I don't have any issues either way.\n. Thank you!\n. It's in the development version, master branch. We'll make a release soon, probably coming weekend, so updated the README already. Please hold on for a few days or try the master branch.\n. Added a note in the feature list to end the confusion.\n. :+1: \n. This is not in v2.0. Please wait for 1/2 days. We'll release v2.1 which will have it. Updated the readme as a preparation of that.\n. Added a note in the feature list to end the confusion.\n. Works fine for me:\n```\n$ buku -a https://medium.com/@Spurrya/20-pcb-tips-and-tricks-47b95a4ba706#.4ksvpq9hi\n336. https://medium.com/@Spurrya/20-pcb-tips-and-tricks-47b95a4ba706#.4ksvpq9hi\n\nFew PCB schematic tips \u2014 Medium\n```\n\nWhich version are you using? What's your terminal emulator?\n. Tested successfully with AltYo, Terminator, xfce4-terminal, xterm.\n. Thank you for confirming!\n. I'll take a look. Thanks for the report.\n. I understand that you are trying to use , within a single tag. As buku uses , as the delimiter, it wouldn't work. The tags are going to be treated separately. This is bound to happen with any delimiter I use.\nI've added a new logic to filter unique tags and then sort the tags. Which is why cats come first in the list of tags.\n. Anyway, you have uncovered a bug! :+1: \nFor what you want, just try:\n$ buku -a http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl hitler, cats, fun\n. Also, please refer the examples. The first example covers your case.\n. I need to add a note below the first example. Or maybe operational notes.\n. I'm thinking of replacing in-tag commas with some other character, probably space. What do you think? The idea is:\n\"hitler, cats, fun\"\nmakes as much sense as:\n\"hitler  cats  fun\"\nThis will be added in operational notes and the add operation would also show it in the output.\n. Fixed at https://github.com/jarun/Buku/commit/c6c4b8ea6ec83d429528e853173fbad7ce8aed4c.\n. I didn't understand. Both\nbuku -a http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl hitler, cats, fun\nbuku -a http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl hitler,cats,fun\nresult in\n```\n336. http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl\n\nCats That Look Like Hitler!\n   # cats,fun,hitler\n```\n\nwhere's the problem?\n. And when there's a quoted single tag hitler, cats, fun, it's treated as a single tag and the 2 commas within the tag are converted to spaces.\n. Checking.\n. So here's the problem:\n\"python,linux,github\" is a single token from the cmdline parsing and so is python,linux,github. So there's no way to determine the intention of the user, whether it's a single tag or 3 comma-separated tags without any spaces.\nI think I have to mandate - no in-tag commas to begin with.\n. Please test https://github.com/jarun/Buku/commit/f8c48d04154829b932cfae03b0ddb602352bc925 and let me know if this works fine. I simplified the logic now (more manageable).\nI have tested myself but a second round of tests would be great.\n. Awesome! Thank you for your efforts!\nClosing the bug.\n. Thank you!\n. Thank you!\n. > sooner or later\nYes, very much. Thank you!\n\nI'll try to write more tests before long.\n\nIt would really help if you can set the full test framework up using Travis.\n. > I've never been using Travis before.\nPlease refer to my other utility googler. Travis is up and running there. We also generate the deb package using Travis.\n. Thank you!\n. Travis CI repo link: https://travis-ci.org/jarun/Buku\n. Thank you!\n. Please raise a direct PR. I'll approve.\n. Merged.\n. Thank you!\n. I'll do the needful. Thank you!\n. Merged.\n. Hi @wheresmyjetpack,\nPlease take a look at the current test cases to get an idea. If you ask me, Buku does very complex tag management and susceptible to break with even minor changes. I guess you can add stronger test cases there.\n. Exact word match using regexp supported at https://github.com/jarun/Buku/commit/405b73a392bd5bb7a77dbf2b18b78f0f8e073e3a.\n. In my case if I search for a reasonably frequent keyword like computer, the list is a long one. I would need to scroll up/down and keep opening results.\nIf it's of any help, the prompt exits with a Ctrl-d if that can be simulated. However, if all of this becomes too cumbersome, leave it. The code seems stable as far as I have tested manually and we'll live with it. If someone finds a bug, we'll fix. :)\n. :+1: \n. I'll check this and get back.\n. Fixed this at commit d4ec9e8ed41a1afad5ebcd55eff0f7fbbb3365e4.\n. @Ovvovy thanks for the offer!\nThere are a few problems we'll face regarding Pypi:\n- I do not maintain any of the downstream packages on AUR, Debian Sid, Homebrew etc. In case of Pypi the package name gets tied to whoever submits it. I would gladly give you collaborator rights to this repo (though commits should come through PRs). Are you willing to maintain the Pypi packaging?\n- Travis automated builds will break when you change the name to buku.py. That would need some fixing. Or can it be done without changing the name to buku.py? I would love that because it wouldn't force a name change on mainline distros.\n. > I think it's possible to change the packages owner on Pypi.\nThanks! This is to keep prepared for a situation where a contributor moves on.\n\nI'll look into the naming thing.\n\nThank you!\n. I'll create an account and share it with you.\n. Please use the handle arunj.\n. Yes! I'm game if you would like to explore it in Buku.\n. Does the --json or --format option help?\n. If not, please feel free to contribute an unformatted output option. For example: --format 3. Should work with search results as well as -p.\n. You can make it generic instead of just --toolbar. Export specific tags (multiple) if --tag is used. If unused, export all. Feel free to raise a PR.\n. @Ovvovy any update on the Pypi packaging? You can use the handle arunj.\n. Nope, didn't get any noti But that's OK. Thanks for the update!\n. Yep, I'm there with you. :+1: \n. @heliocarbex \n- I haven't tested on Windows. Give it a try. No plans to write a GUI myself. The current integration works fine for me. However, PRs are welcome!\n- That personalization would be user specific. You'll have to write your own script I'm afraid. If you can share the script I can link to it.\n. Patch https://github.com/jarun/Buku/commit/b16f08db3827007318a367f15d2459d7469ee69e fixes basic issues on Windows. You'll need to use a terminal that understands ANSI color codes (e.g. ConEmu).\n. Hi @heliocarbex \n- One can add bookmarks directly to the Buku database any time with keyboard shortcuts. A daemon would be a stronger solution to a simpler problem and will make things more complex than required.\n- Buku doesn't allow duplicate entries by design.\nAre you interested in picking up any of the currently identified tasks?\n. Thanks for the suggestion! If you run buku -u it will refresh the titles and log (prominent) info if it fails to fetch any. There is no easy way to determine whether a link is really live or not. Sometimes there are temporary glitches, sometimes servers are down or are moved... That's the main reason Buku doesn't bother about the actual existence of a link in it's internal logic.\n. :+1:\n. @cpaulik Nice one! Thank you! Added to the list. Would you be interested in contributing the feature?\n. I know there are bookmark utilities (including FF bookmark manager) which track these data and store stats. We don't want to track users, collect data and intrude into user privacy. It's one of the guiding principles of buku.\nRegarding 'status' please check my earlier comment https://github.com/jarun/Buku/issues/39#issuecomment-255176477.\nWhat's the use case for an additional 'rating' field? Please note that users can have tags like 1 start, 2 star etc.\n. Rolled at #78.\n. Agreed! Will add the check, thanks for reporting the issue.\n. Wait a sec, you mean all the records were refreshed from web, right? They were not erased.\nOr, am I missing something here? What was the command you issued?\n. Thanks for the info. I'll look into it.\n\nIt would help to have the bookmark number (the [xx] on the right) highlighted.\n\nYes, I felt the same myself. It's a little difficult to figure out.\n. > It would help to have the bookmark number (the [xx] on the right) highlighted.\nFixed at commit ff3b6f8781d6653123f1404528a2b025644f241e.\n. Titles are not updated in case of a blank title fetch from web. So I'm not adding any change to buku -u case.\nFor buku -u -t new title I'm adding the check.\n. Removed the logic to full refresh (from web) title other than buku -u command.\nAdded confirmation before updating all records passed explicitly. Applies to tag and desc too.\n. Please test the change and let me know if you find any issues.\n. Thank you so much!\n. Added to TODO list at #39.\nPlease discuss new features in the rolling TODO list thread. That way a consistent record of new features is maintained.\n. Hey, no problem at all! Keeping an organized journal makes it easier to track the discussions.\n. Deletion of range OR list of indices implemented at https://github.com/jarun/Buku/commit/2abeffe4c56715b51eb359b645e08e79166e326c.\nNote that both don't work together... the major reasons being indexes may fall within a range and auto-compaction may delete non-intended indices.\nIt would be great if you can test the feature and provide feedback.\nNOTE: I may not implement delete all records based on a search result, seems to unconventional and probably a overkill with the different delete options provided now.\n. Got it! Would it be possible for you to contribute this feature?\n\nBy the way, currently, if you execute the above command, first it will want to delete the entire database, then to perform the search.\n\nTrue. -s and -d are treated separately and -d has higher priority. BTW, it does confirm before deleting everything now... thanks to your other issue.\n. > However deleting multipole ranges doesn't\nIntentional. buku -d 5-12 6-11 11-14 would be a lot of unnecessary pain. If you check man or help I did mention single range.\n. > Not too much spare time, but I'll look at it in the following days.\nThanks! It would be great if you can manage some time.\n\nI mean you delete the database (records), then search for something ?\n\nI see your point. Won't be much of a bother changing the order but just thinking if there's a better way to handle stuff. We can make stuff mutually exclusive (but how many?). I think, rather, if you get some time, define an order for the operations. We can discuss and finalize it.\nI can do the last one, but I won't see it from your perspective which is why I'm looking for a primary check from you first. The operations are all commented in main so you don't need to look at the code for this.\n. > regexp\nThis is currently the 3rd item in the TODO list.\n\nan idea would be to have an option to fetch the page content\n\nTo make this optimal is to write a Google Search Engine. No, please.\n. Regex search is implemented at 3ed68f01974a48ffa4512d7526e898023a04bc25.\n. I've thought about it earlier but this would take too much processing. If you really want it, please raise a PR directly.\n. Added to TODO list at #39.\n. Append tags implemented at https://github.com/jarun/Buku/commit/9c37d30da674cbe790633692229bff183e05e2e1.\n. A quick example please.\n. Did you try latest master? Here's what I see:\n```\n337. https://www.google.com\n\nGoogle\n   # old_tag\n\n~$ buku -r old_tag new_tag\nIndex 337 updated\n~$ buku -p 337\n337. https://www.google.com\n\nGoogle\n   # new_tag\n\n~$ buku -r new_tag\nIndex 337 updated\n~$ buku -p 337\n337. https://www.google.com\n\nGoogle\n\n~$\n```\nworks fine in both the cases.\n. Another example with multiple tags:\n```\n~$ buku -a https://www.google.com old_tag,new_tag\n337. https://www.google.com\n\nGoogle\n   # new_tag,old_tag\n\n~$ buku -a https://www.google.com/ old_tag,new_tag\n338. https://www.google.com/\n\nGoogle\n   # new_tag,old_tag\n\n~$ buku -r old_tag told_tag\nIndex 337 updated\nIndex 338 updated\n~$ buku -p 337\n337. https://www.google.com\n\nGoogle\n   # new_tag,told_tag\n\n~$ buku -p 338\n338. https://www.google.com/\n\nGoogle\n   # new_tag,told_tag\n\n~$ buku -r told_tag\nIndex 337 updated\nIndex 338 updated\n~$ buku -p 337\n337. https://www.google.com\n\nGoogle\n   # new_tag\n\n~$ buku -p 338\n338. https://www.google.com/\n\nGoogle\n   # new_tag\n\n~$\n```\nPlease share the exact case where you are facing issues.\n. I have pushed a one-line change in commit 550469b15f77391bab82a33585a07039c6e003dd which will filter and sort unique tags after a tag is replaced.\n. OK. The test cases are important. I am closing this PR. Please raise a new PR with the test cases.\n\nI totally misunderstood how tags are working here\n\nCan you explain what got you confused int he first place? We might have to simplify the docs if it seems too complex.\n. Thanks for confirming. Please raise a PR for the test cases.\n. Looks good. Can we have some more tests for parse_tags like the following?\nbuku -a http://www.google.com , ,tag 1 , , ,,, ,  ,new tag  , \"this    tag\" , \"   bank tag\", ,\nThe idea is to make sure the parse_tags function is robust.\nSimilar test cases should go for replace_tag. For example:\nbuku -r 'tag 1' , tag 2,,, ,  ,  ,  tag 3 , ,\"tag 4\"\nYes, one tag can be replaced by multiple tags and the resulting tags should be unique (no repetition of a tag) and sorted.\n. I think you can continue on a per function basis. This would give you a great overview of the code and make it easier to contribute new features.\n. :+1:\n. Thank you!\n. Thank you very much!\n. @poikjhn We are now using the logging framework instead of regular prints. After the commit, I found the ASSERT in tests/test_bukuDb.py +243 failing. Commented it out for the time being to move forward. Can you please take a look how we can have the ASSERT back in place?\n. Merged. :+1: \n. Will review. Thank you very much!\n. @dstuxo any update on this? Planning for a weekend release.\n. Also, please note there are conflicts to be resolved. Please rebase as well.\n. Done. :)\n. Reviewed. 3 minor changes and we are done.\n. OK. I'll make the last 3 changes.\n. Thank you!\n. Hi,\n$ buku -u n --tag\ndeletes the tag at index n. Does this PR do anything different?\n. Thanks! I'll review it in the weekend.\n. No problem!\n. @lucasmgrando any update on this? Planning for a weekend release.\n. Thank you!\n. Thank you so much!\n. @poikjhn would you like to work on the exact word match feature from ToDo list?\n. :+1: \n. Please refer to the discussion in #14 for more info on this.\n. @poikjhn I have implemented exact word match at https://github.com/jarun/Buku/commit/405b73a392bd5bb7a77dbf2b18b78f0f8e073e3a. Just FYI.\n. How about --import and --noprompt?\nDo you see similar issue for these 2 options?\n. Also, please check if manually modifying the line to:\n'(-m --merge)'{-m,--merge}'[merge another buku database]:buku db file'\nhelps.\n. Thanks for the details. I think I've found the problem. Will commit a patch shortly and update you.\n. Please check with the above commit. Hopefully the issue will be fixed.\n. :+1: \n. Merged. Thanks!\n. Thank you!\n. Thank you!\n. Thank you!\n. I am reverting this commit due to tons of input_function. Let's not carry around an extra param for all apis.\n. > But if you're opposed to public methods even having that default value, then I'll take another look at it.\nYes, let's try to do without this overhead.\n. As a thumb rule, do not make such huge changes in the source code. I might pull it in, but it's quite difficult for me at the time to verify each change closely.\n. Thanks! I guess once you spend some time you'll get familiar with the overall flow and then start making changes in the code. Just wanna make sure you have enough exposure to own those areas.\n. Yes, I see the problem. I'll look into it.\n. Steps to reproduce:\n```\n$ buku -d\n$ buku -a http://slashdot.org 'old,news' --title shashdot -c \"News for old nerds, stuff that doesn't matter\"\n$ buku -a http://www.za\u017c\u00f3\u0142\u0107g\u0119\u015bl\u0105ja\u017a\u0144.pl/ 'za\u017c\u00f3\u0142\u0107,g\u0119\u015bl\u0105,ja\u017a\u0144' --title something -c \"Testing UTF-8, za\u017c\u00f3\u0142\u0107 g\u0119\u015bl\u0105 ja\u017a\u0144.\"\n$ buku -a 'https://test.com:8080' 'test,tes,est,es' --title test -c \"a case for replace_tag test\"\n$ buku -p\n$ buku -u 0 --tag - ,old,ja\u017a\u0144,est,\n```\n. Awesome! Very innovative!\n. Thank you!\n. Awesome! :+1:  Thank you!\n. Found some regressions with the current code (with incremental changes). Please take a look at https://github.com/jarun/Buku/pull/63#issuecomment-244606711.\n. Hi,\nCan you please cite 2 examples to open array and range of search results? Just for a quick overview before I proceed to review this. Examples of the prompt entries would do.\n. Thank you!\n. I was testing this today. Several combinations of result indices fail:\n$ buku -s computer\n...\nResult number or range (x-y,(a)ll) to open: 5-6 8-9\nResult number or range (x-y,(a)ll) to open: 6 8-9\nIn brief, we cannot open individual indices mixed with multiple ranges. Would it be possible for you to fix this?\n. Hi,\nTravis is failing. Please check.\n. All good. Thank you!\n. Thank you very much! I'll review this tomorrow.\n. @wheresmyjetpack could you add a test case around this? You may need to skip opening the actual browser (how about setting $BROWSER to something non-existent?)\n. :+1: \n. @csllbr, there are some conflicts.\n. I've done a manual merge. Please review. Closing the PR.\n. Just awesome!!! Thank you so much!\n. Thank you!\n. Thank you!\n. Thank you!\n. As expected, Travis failed. I guess because there's no file 'buku' anymore. Please check.\n. Just to leave a note: I was exploring the possibility of changing the name frombuku.pytobuku` while packaging. But that would be a problem because I don't maintain downstream packages and the change has to propagate to AUR, Debian and the deb package we release.\nPlease check if it's at all possible to retain the name buku. That would be great.\n. Can we make use of a list in MANIFEST.in? Ref: https://tom-christie.github.io/articles/pypi/\n. > I'll do that. I first wanted to have a working package and go from there\nNo problem! I keep leaving notes as things come to my mind so that I don't forget ;). I'll complete this review by tomorrow.\n. Thank you!\n. @Ovvovy any new development on this?\n. @Ovvovy I can't leave the repo in an inconsistent state... the docs and guides are misleading right now. If I don't get any response by today, I'll have to revert this. I think I've already started to resent PyPi because of how inflexible it is.\n. Hey, no problem at all! We can defer it for now. PyPi is meant for libs and Buku is a good candidate which is why I was inclined towards it. However, it's still OK to retain it as a utility and interested people can still use it as a library.\nIn the meantime, would you be interested in https://github.com/jarun/Buku/issues/39#issuecomment-247135323 and the next comment?\n. I'm fine with that. But as I understood, the file buku has to be changed to buku.py. In addition to effects on test automation, PyPi changes would also lead to another issue: downstream packages need to change. Is my understanding correct?\n. It's only going to add unnecessary abstractions. Let's keep doing what we do and if someone approaches with a plan to use Buku as a library (or any other strong case) for a sizable project, we'll reconsider this. What do you say?\n. I have come up with another solution. What if we maintain a different branch as a PyPi library version? You can complete all the required modifications and at any point of time we can update it to the master branch using a single rebase?\n. If you are fine, I will create a new branch right away. You wouldn't have the burdens of handling the Travis issues or any packaging issues.\n. Buku.py. :) All PyPi style.\n. Here you go!!!\nhttps://github.com/jarun/Buku/tree/pypi-packaging\n. I am reverting the changes from this PR. Please raise a PR with the same changes on branch pypi-packaging.\n. OK. Your changes are intact in pypi-packaging. You can continue from where you were. :)\n. If a user installs using pip install buku on Linux, he still needs the manpage...\n. ;)\n. @Ovvovy the main branch is now ready for PyPi.\n. Thank you!\n. How about disabling Travis integration in this branch? Given we will rebase only mainline logic changes here?\n. Any progress here?\n. You are looking for a firefox extension which has to be a separate project.\nIt's not in the scope of the utility.\nWhile you can write a FF extension, the future of browser extensions is probably bleak due to several security issues.\n. Can you please elaborate on the use case? Currently Buku exports to the HTML format for browser compatibility. What's the use case for markdown?\n. The problem here is to maintain this going forward. This is a sizable change and I don't see a strong use case which too many users would need. There are several HTML to MD converters available online too. So I am closing this.\nHow about working on any of the ToDo list items?\n. :+1:  Thanks for your understanding.\n. @jpralves I gave it a thought. And I see a stronger case here which both of us missed earlier. Consider the following.\n- There's no standard (like Mozilla's for HTML) to store bookmarks in MD yet. How about having a new thread to standardize one and then implement importing/exporting to the same?\n- Modify this PR as only export to MD using the options --print and --format=4?\n. I received some more requests for markdown on forums. I'll pull this in and make some changes to it.\n@jpralves Thanks for your contribution!\n. Note:\nThe logic in this PR was importing descriptions but exporting titles!\n. I have mad some changes to it to remove regex usage (it was taking longer), and now we are literally using the format title... i.e. no importing as description.\n. Buku doesn't intend to be a cloud solution by itself. If a solution uses Buku as a library they are free to do so.\nFor personal usage, one could, however, store the database file in a mapped drive which is synced and create a softlink to it in the regular Buku db path. I store the actual file in my Dropbox directory, for example.\nI think I should document this though. Thanks for reminding!\n. @polo2ro buku -u for full DB refresh also shows the error info on failure. Recently I have added a new param for verbosity to some APIs. I think I can make changes to show the info only when there's a failure.\n. I get it now.\nI noticed that you check only for status 200. Does curl handle HTTP re-directions transiently? \nThere are also some status codes which indicate temporary failures. I think it would be great to make the script more verbose with the status code if it is not 200 and a verbose description. Note that buku -u already does that.\nInstead of an additional shell script, I think it would be great if you can add an API in Buku to do this.\nOf course it will need more checks. For example, it would need a better check for malformed URLs (refer to https://github.com/jarun/googler/commit/b53b638613fee5f4d2cf964a6b98b1c4a5b6a18e for a hint). Then the additional delay, verbose status codes and so on... I can add it as a task item if you wanna pick it up.\n. @polo2ro We'll soon move over to urllib3 which has retry in-built. I believe the above issue will be over with it.\n. I'll test the scenario with urllib3 and update.\n. I think this works fine with urllib3. Results with latest master (at the time of writing):\n```\n$ buku -p\n1. http://www.seloger.com\n\nPetites annonces immobili\u00e8res | 1er site immobilier fran\u00e7ais | Portail immo\n\n\n\nhttp://www.seloger.com/\n\nPetites annonces immobili\u00e8res | 1er site immobilier fran\u00e7ais | Portail immo\n\n\n\nhttp://www.seloger.com/annonces/achat/maison/saint-fort-sur-gironde-17/112444387.htm\n\nVente maison   Charente-Maritime (17) | Achat maisons   en  Charente-Maritime\n\n\n\nhttp://www.seloger.com/annonces/achat/maison/estang-32/107048765.htm\n\nVente maison 7 pi\u00e8ces Estang  - maison Maison ancienne F7/T7/7 pi\u00e8ces 211m\u00b2 105000\u20ac\n\n\n\n$ buku -u\nTitle: [Petites annonces immobili\u00e8res | 1er site immobilier fran\u00e7ais | Portail immo]\nIndex 1 updated\nTitle: [Petites annonces immobili\u00e8res | 1er site immobilier fran\u00e7ais | Portail immo]\nIndex 2 updated\nTitle: [Vente maison   Charente-Maritime (17) | Achat maisons   en  Charente-Maritime]\nIndex 3 updated\nTitle: [Vente maison 7 pi\u00e8ces Estang  - maison Maison ancienne F7/T7/7 pi\u00e8ces 211m\u00b2 105000\u20ac]\nIndex 4 updated\n```\n. In addition, now you can view only failed and skipped (due to mime) using:\n$ buku -u --tacit\n. > The retry functionality is not working in my case because seloger.com give me a 200OK with a error page\nThis doesn't seem standard behavior. Here's an example of correct behaviour:\n```\n$ ./buku.py -a http://tuxdiary.com/kdfgdfg\n[ERROR] [404] Not Found\nTitle: []\n\nhttp://tuxdiary.com/kdfgdfg\n```\n\nDon't think we can do much about it.\n. Thank you for the suggestion. Yes, Buku is available as a library and I know terminal based projects which are interested in using it. Personally, I do not have the time to spend in writing browser extensions though. There are several projects I maintain already.\n. Hi @DamianSiniakowicz thank you for your interest in the project. Please let me know any questions you have. I am available on Gitter.. @naaaargle thanks for your offer! there are lots of stuff not covered in tests yet. I can come up with a list for you.. @AndreiUlmeyda, I am open to the options as long as they remain simple. While the terminal is awesome, we'll have to keep the marriage less complicated for the benefit of healthy mortal children.. @naaaargle here are some test cases which popped up:\n\ntest with custom database file (this is not exposed, you can init BukuDb with a custom file)\nencrypt/decrypt buku with custom number of passes\ntest cases with empty database (print, delete, search)\nsome test cases for update_bm()\ntests for regex search\ntests for delete_resultset\ntests for replacetag\nif you are here you can find more test cases\n\nAlso, please let me know if you'd like to maintain the PyPi branch. You may need to spend some time on PyPi. The project structure is ready for it. But I'm quite blank about PyPi.. @AndreiUlmeyda :+1: Thank you! I'll check it out!. :+1: I am open to PRs. :) Added it in the task list.. @AndreiUlmeyda I was trying it. Works well. I have one request though... can you please change the name to something else?. > But ok, I will do that.\nThanks!. @AndreiUlmeyda I would like it to be a separate project that would be linked to Buku. As you would have seen, I linked Rasmus' Rofi frontend for Buku from my project. But with your new addition, it wouldnt suffice so I'ld have a distinct section that goes Porjects using Buku. That would add more emphasis and visibility.\nWhat do you say?. Here you go!. You should have discussed this first. We follow the ''' style. This also adds too many newlines to accommodate the function params. Also, I guess it would change the exported bookmarks.html format by some spaces. Let's skip this.\nCan you raise a new PR with just the variable renames (tag_manual etc.)?\nAlso, would it be possible for you to pick up something from the ToDo list?\n. I have taken care of the naming issues (whatever I could find) at commit 27fe55c32814909358adca3f7f21ec0fbee75383.\n. > I don't quite get why would anyone use a style different from PEP8\nWith reference to your new PR, can you please give a logical reason (other than PEP 8 compliance) why we have to rename newtags to new_tags and taglist to tag_list?\nWhat real value addition do we get with this other than processing some more _s? Is the code unreadable without the changes like these? Is there any improvement in speed?\n. I also mentioned that I have made some changes already. PEP 8 compliance is not the highest priority task right away.\nIf you really want to make some changes that matter at the moment please work on the markdown import. The contributor used regex which is awfully slow. It stalled thrice while processing a markdown file with only 344 bookmarks!!! Can you please make the necessary changes to use simple text processing? Something like just read each line, parse and import.\n. What I meant was - we don't nee to _ separate every variable. tagManual was a fit but newtags goes fine. That's my personal opinion though.\nI have worked on the MD glitch last night ;). It's better now. Please continue with the yaml stuff. :)\n. I have added some review comments on #81. Can you please finish those off and I will pull it in?\n. Technical restrictions:\n1. This would require folders like Recent Tags and Most Visited to be filtered out from stock Firefox export, which is more of a hack than a generic solution. Mozilla format uses the same tags for these as regular bookmarks.\n2. Stock Firefox mod on Ubuntu has the following directory:\n<DT><H3 ADD_DATE=\"1440206436\" LAST_MODIFIED=\"1467725517\">Ubuntu and Free Software links</H3>\nFor all practical reasons this is not a tag. As Buku does not support partial tag searches, it is quite difficult for users to search this specific tag (and others like it).\nDropping the idea due to the above reasons.\n. @cpaulik we have import folders as bookmarks at https://github.com/jarun/Buku/commit/f1a5cd4b883cf077c30069dfb1ba3507f291e5d8 :).. @fradeve can you please work on the review comments and get this ready?\n. my bad... I added those, never submitted. please check now.\n. are you able to see the review comments now?\n. OK! Thanks!\n. For this PR, I'm going to add the changes myself. I try not to keep PR's open for long and this one will reduce to much lesser changes. I guess it's easier for me to add those directly than you reverse-walking this.\n. Thanks for the PR. I considered some cases in #80 and marked this as wontfix sometime back. Before I start reviewing this, can you please comment on those cases and how your PR handles them?\nOr, did you close this after visiting #80?\n. Yep, I didn't want a hacky solution for this. Plus, strictly speaking, folders are not tags.\nBut thanks for your effort and time anyway. Please feel free to pick up something else.\n. @mohammadKhalifa I guess we have a heavy demand for this. I am pulling it in.. Please raise a new PR. The source tree has changed heavily.. Thank you so much!\nSorry about the lag. I had to know people need it though it may not be ideal stuff from a technical perspective.. If Buku is installed using a package manager, this option may trump the version provided by the package manager. Upgrading asynchronously may lead to inconsistencies and unforeseen consequences.\nAs an alternative, option --upstream is provided to check the latest version available upstream. The relevant commit is https://github.com/jarun/Buku/commit/1d1f7a94af9a28d883d7dacdf93e1fe7e005829b.\nUpgrading downstream packages to the latest upstream release takes a while due to diverse processes involved in package management. Generally it's a matter of a few days. While it's possible to download and use the latest version manually, we strongly suggest users to follow a single mechanism to install and upgrade a program.\nClosing the issue with the above information.\n. Buku never supported Python 2.x.\n. This is fixed downstream.\n. > I installed buck\nYou mean Buku, right?\nYou'll also need the cryptography library. We don't enforce it as cryptography is optional. Please refer to https://cryptography.io/en/latest/installation/.\n@asergi am I missing something here?\n. I don't own a Mac personally. Can you also check if you are able to import bookmarks HTML (from FF or Chrome)? That needs beautifulsoup4, once again, not enforced.\n. This is closed at https://github.com/Homebrew/homebrew-core/commit/d230781208d004af82eb7ed4d2f9d664c2de4e07.\nYou don't need to install the dependencies manually anymore.\n. Yes, this needs to go below operational notes. While you are at it, please document markdown as well. Same indent level as operational notes, over GUI Integration section.\nApplies to man page as well (below operation notes).\n. > but not using a proper YAML parser to parse YAML sounds like a decision we may regret in the future.\nNot if we stick to a custom format with the basics of YAML in place.\n. In case you have noticed, we are using the format [title](url), 1 per line for markdown though the correct format would be [desc](url \"title\"). There are other reasons behind doing that. But the point is: if an input doesn't conform to it, we don't support it.\nAlso, I am hoping your alternative to the library would be flexible, fields other than index and url should not be mandatory.\n. No problem, I'll keep it open. Feel free to complete it once you get some time.\n. Closing this PR as it's not updated in 10 days. Please feel free to raise a new PR if you come up with something without introducing additional dependencies.\n. Fixed at commit 8894e286108d7d17da1166893b39c414e121f542.\n. Yep, it should go to sys.stdout. Thanks for noticing this and the fix.\n. Some conflicts exist. I have pushed a few commits minutes back. Can you please check?\n. I have manually made the merge. Thanks!\n. @reorx, with this PR, Buku is quiet ready for PyPi, if you can spare some time.\n. Thank you!\n. The following URLs are different:\nhttps://joycemusic1.files.wordpress.com/2012/09/hello_-_adele.pdf\nhttps://joycemusic1.files.wordpress.com/2012/09/hello_-_adele.pdF\nWhile the first one exists at the time of writing, the second one throws 404.\nThe current behaviour is the intended behaviour.\n. There are two problems with this:\n1. Adding/updating shortened URLs in DB trumps --deep search rendering it useless.\n2. Makes it impossible to restore bookmarks if the service ever goes down.\n. 1. This would fail on fish shell.\n2. This doesn't help in the workflow of selecting a link in the browser and adding it with a shortcut. There's no way to add a comment/tag (and I don't plan to show a input window for it).\nThe one-liner is a simple example and I would leave it to the users to tweak their scripts anyway they want. :)\n. This has already been suppressed at f314a19e8b284f14afd8d6ab027e92515d49b48c. If debug is not enabled, we use: logging.disable(logging.WARNING).\nAnd this is what I see:\n```\n$ buku -a https://www.example.com\n350. https://www.example.com\n\nExample Domain\n```\n. In case this didn't work for you, I'm OK with the change. Please confirm.\n. > Would it be beneficial to verify the certificate or is it unnecessary?\n\nIt's always best to verify the certificate. However, in our case we are not transferring any sensitive data, no credentials... which is why the RoI isn't high. Adding the feature also means maintaining it.\n. I see that you forked the latest master. So I am expecting you noticed the issue on latest master. Hence, accepting the PR. Thank you!\n. We also need to document this in the ENVIRONMENT section of man page and somewhere in readme.\n. I will re-work on this.\n. I'm making some changes for that. Would it be possible for you to test it out? Many thanks in advance.\n. Commit https://github.com/jarun/Buku/commit/94bd49aa379cf561b066f9f9b2a71de276ef5e3f. Thanks! Note that we support https_proxy, format:\nhttp[s]://[username:password@]proxyhost:proxyport/\n. Can you please share the NTLM format?\n. Also, thanks for the test and sharing the results.\n. No problem. If possible, can you document how you made it work using cntlm?. Thanks for sharing.. Which index? Actual DB index or the order in which it's printed?\nPlease cite a case where the DB index would actually be useful. Asking this because the Json ouput format came from a contributor who needed it.\nIf you really need it, how about extending the --format option? The fields are defined by --format. Feel free to raise a PR.. Yes, we can include index in the generic Json output (-f=0 case).. My pleasure!. > and the second one has the threads share a single connection\nthis is what we need - a single connection to DB (we would use a lock to synchronize the DB writes) and a single network handle from PoolManager/ProxyManager.. Can you please update the PR accordingly? Then we'll proceed to the next round of problems.. Thanks for initiating this! I'm merging the current PR and I'll make the remaining changes for this. Check out the next few commits if interested.. Hi @naaaargle,\n\nThe submission is correct.\nYou can setup Travis locally. However, if you have the dependencies installed, running the test_file works too. Travis provides a contained environment.\n\nThere are some issues with the test case I guess. Travis integration is failing currently.. Any update here?. :+1: . @naaaargle I do not keep inactive PRs open over 7 days. Hence, closing this one. Please raise a new PR if you come up with something in the future.. @naaaargle could you find some time for this? :). Thank you!. To test locally on Ubuntu:\n$ sudo apt install python3-pytest python3-pytest-cov\n\n\nThen change the last line in ci-test-wrapper from:\nPATH=\"$repo_root:$PATH\" python -m pytest test_*.py --cov buku\n\nto\nPATH=\"$repo_root:$PATH\" python3 -m pytest test_*.py --cov buku\n\nFinally, run:\n./ci-test-wrapper --watch .travis.yml. Not at all! I do not have JDK on my system either.. Are you on Ubuntu? If yes, please share the output of:\n\nlsb_release -a. I believe `pip3 install` should also work.. Awesome!\n\nOn Jan 13, 2017 1:24 AM, \"Mary\" notifications@github.com wrote:\n\nSorry @jarun https://github.com/jarun, I am not on Ubuntu, I was trying\nthis on my OSX because I didn't realize Ubuntu is also an OS. I did some\nresearch/asking around though and I think I get it now. Going to try to\nspin up a Ubuntu VM for this and will report back!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/99#issuecomment-272265052, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AFrudm0mSAd3g10FqDJ_xvdbn4UmXEPyks5rRoTlgaJpZM4K-Gml\n.\n. Closed with #101.. Thank you!. The reason is --sany and --sall are limited at word boundaries using regex. So the trailing space is never matched. You have to use --deep too. For example, the following work:\n\nbuku --sany http://www.something.com/ --deep\nbuku --sall http://www.something.com/ --deep\nIf you search \"hello/\" (including the double quotes) in google you'ld notice the same behaviour. It searches hello. If you search for \"www.hellomagazine.com/\", the results would include the following:\nwww.hellomagazine.com/\nhttps://en.wikipedia.org/wiki/Hellomagazine.com\nSo google is ignoring the trailing slash altogether!\nI'ld have to trim the trailing slashes to make it work just like google. I can also document this more clearly in the operational notes section and leave it be.\nWhat do you say?. Another note:\n\"hello//// world\" returns the same results as hello world. So all trialing /s are removed from all tokens.\nMy fix will be along the same line.. Done! Thank you!!! I thought of mailing you once but held back lest I would\nbe imposing. :). No hurries. I'll add the pip installation procedure right away. Thanks again!. Hi, please read the project policy:\n\nno history, obsolete records, usage analytics or homing.. Thanks for your suggestion and understanding. BTW, if you wish to use Buku as your backend you can extend it in your project. I do that already for some columns. Also, would you be interested in the REST API task?. > Unfortunately I'm not a python developer so I'm out of my element with python+REST\n\nIn it's simplest form I think you'ld need to (de)serialize the input and return for each API.. @Qu4tro yes, item 2 in the list.. @dchang0 Thanks for the suggestion! Having a title or not due to HTTP errors becomes irrelevant because of the following options:\n\nset manual tags and mark immutable\noption to search blank titles using buku -S blank\nsilent full refresh showing error codes for all bookmarks using buku -u --tacit\n\nI'm afraid any additional options would be a feature bloat around titles.. Why is it important for a bookmark management utility to store the broken/temporarily broken status of pages?. All I am saying is these statuses are not permanent. They keep changing and if we were to track those properly (in real time) we should find some way to run buku -u with some frequency as a daemon in the background.\nLet's say a page is showing 404. We mark it in Buku accordingly. Later the page comes back online but the status is still 404 in Buku. Users should never RELY on the stored data and take a decision to remove or not to visit the page. The ONLY way to know for sure a page is down (at the moment) is to visit the page. Why should users care about the last time Buku checked the status?. > Presumably one would run the check just before running the mass deletion\nThat's what buku -u --tacit does for you. For all bookmarks at once, multi-threaded. Please run it once first.\n\nAnd there would always be the possibility of getting a false positive\n\nI don't want it coming from Buku. Not for stuff not under Buku's control.. Thanks for your understanding!. Buku is too busy to track you - no history, obsolete records, usage analytics or homing.\nHowever, if you are too eager to have this, please extend the flags column with a new bit for last_checked_status. 0 = OK (default), 1 = some HTTP failure.. > I'm curious as to why \"obsolete records\" would be considered \"tracking you.\"\nThe same way Google may mine your 2016 search history to know you. Anyway, I am not aligned to the datestamp stuff because it is a usage record.\nFrom your earlier comment:\n\nit's too much work to clean up my old database manually.\n\nIt's actually not, if that's what you want to do and by old database you mean a Buku (or importable) database. Run buku -u --tacit and redirect the output to a file. Parse (or manually check) the output file for failures and get the indices. Pass all the indices to buku -d.. @kishore-narendran please start with the REST APIs and @Qu4tro can contribute in. It is a long pending task item and I have come across people interested in this (to have Buku as a backend).\nREST would be our first target. We'll have a discussion around swagger in phase 2 and take a call. I'm not familiar with it so I'ld have to take a look to understand the pros and cons myself.. @kishore-narendran @Qu4tro I have added both of you as the owner of this task item. Please raise a bug and discuss the design issues, pros and cons, conflicts etc. there. I will pitch in wherever I can.. @dheerajkrishna90 unfortunately our test cases are much behind our implementation. Can you start with adding more test cases for new APIs/functionality?. You have to write the new cases for class BukuDb in in test_bukuDb.py, generic APIs in test_helpers.py.. @castellanprime can you team up with @dheerajkrishna90 and work on adding new test cases to strengthen our automated build process? We really need to beef it up with solid test cases that take care of corner cases etc. One of you can open an issue and discuss your plan there.. I would love to see test cases where the current logic fails.. @rachmadaniHaryono AFAIK, no one is right now. Please start right away.\nWe are far behind implementation in tests. I would love to see dozens fail.. Rolled at #135.. > is it possible to set the tags in the markdown-file?\nNot at the moment. Is there any markdown standard to represent tags?\n\nOr maybe with html?\n\nTags are imported in case of html.. > Is there any markdown standard to represent tags?\nI didn't find something that fits the bill. Closing the issue.. > the convention is that single letter options have 1 hyphen, and two letter options have 2 options\nThis.. Also, --st appears to work in latest versions because --st matches --stag without ambiguity... apparently argparse picks the closest unambiguous match!!!. We do not have the option --st anymore. Please refer to the latest master branch.. > but answers the question. \nI'm not the sharpest guy around. Please elaborate the problem with a simple import in plaintext.. So automation.\nComments:\n\nTo expand the usecase, can you please add the logic to append to an existing chormeprofile, if it exists?\nAs you are already having an additional option please use a separate API. Keep exportdb untouched.\nThe help is too long. Please make it short and sweet so that it goes along with other help lines. (check comment 4 below for another option)\nBuku has too many options. We document those in the man page. The help goes into the README too. You either add those OR completely hide the help for this option. If we see fresh requests we can expose it, otherwise we can keep it hidden like the --fixtags option.. BTW, personally I think it is a nice feature and adds value to Buku as a library. :). @thewisenerd any update here?. :+1: . PS #82 & #80.. The URL should be quoted (including the + characters) using %xx escape, while sending the request to shorten.\n\nFixed at bc65e1778223111e90f83ad005b0cc933207ffb9.. Thank you!. :+1: Simply awesome!!! I'll review and pull it in. Please allow me some time.\nQuestions (haven't seen the code yet):\n\nIs it possible to use a custom editor?\nWhat's the default editor.\nAre you willing to extend this feature to update as well?\nCan you please provide some more details on the implementation in the first comment?. Also, we need to document new options in man, README, add an example (this would go quite high because using an editor is very convenient).. > Default to vim\n\nWe support Windows too. We either need to (a) suppress this option on Windows (don't even show) or (b) fail saying editor not found (applies to all platforms). I prefer (b).\nWhat if both manual option and editor is specified? e.g.:\nbuku -a xyz.com --comment help help --editor\n\n\nPerhaps someone more familiar with the codebase can help.\n\nI will surely help you. Please let me know the questions. I think you can initially invoke the editor and pass the parsed data to update_rec() when options --update ID --editor are specified together.\n\nThe implementation is similar to\n\nThis really helps someone touching the code after a few months. I keep forgetting stuff myself. ;)\n\nI will put it in the man and README later today.\n\nThank you!\n\nDo you prefer a single squashed commit or okay with multiple commits ?\n\nA single commit would be great! Again because it helps anyone referring to the changes later.. > Another way is to disable this unless the user set the EDITOR env var\nHow about making --editor accept an optional arg:\n- if no args passed to --editor, look for $EDITOR (and fail if not defined)\n- else, try to execute the arg, fail if execution fails\n?\n\nFor a quick test, I ran:\n$ ./buku.py -a www.google.com --editor\n\nand got the following screen:\n\n\nCan we put the instructions above? e.g.\ninsert title **below** this line, in a single line\netc.?\nWe can use directives like\n# TITLE goes below this line (in a single line)\nthe CAPS make it easier to read.\nThe following should be 2 lines:\n# insert the tags above in a single line, comma separated# insert all the comments/descriptions below\nThe # ----- # should have a blank line above it, if this is the end marker.\n\n\nif you specified tags in the commandline args, it will also appear in the editor.\n\nIf the title is not specified and not added in editor, it should be fetched from the web. This is broken right now.. > Also, I have disable --editor by default unless $EDITOR is set in the env var.\nI think you pushed and I commented almost at the same time :). Please check my notes on --update in my last comment.\nFrom my comment:\n\nIf the title is not specified and not added in editor, it should be fetched from the web. This is broken right now.\n\nI missed the case where user doesn't even want to add a title. What if we instruct and treat just a - in the editor (for the comment) as the marker of truly blank title? If the line is just blank we fetch the title from the web as usual.\n\nIt will only work if you specify a single bookmark to update, and will fail otherwise.\n\nWe are good as long as it's documented in program help and main.\nOnce the workflow is finalized, we can add a subsection on $EDITOR under Operational notes in README and ENVIRONMENT in man page.\nNOTE: In case I am getting irritating, it's because I absolutely love the idea and want it to be working perfectly for users in next release without any need to revisit. :dancer: . > Will update the instructional messages to be more clearer.\nThank you!\n\nSo for title, empty line will means...\n\nExactly!\n\nsince passing --editor is a explicit intention.\n\nAgreed.\n\nWill update --editor to accept the editor name\n\nThanks!\n\ncan i hijack '-x' for single character param\n\nAbsolutely. Would -w (for write, writer) be more memorable?. Also, I think I can squash the commits together while merging. So you don't need to raise a new PR. We have all the relevant discussion here.. 1. I do not have any editor named heli ;). So:\n$ ./buku.py -a www.google.com/ --editor heli\nTraceback (most recent call last):\n  File \"./buku.py\", line 2838, in <module>\n    main()\n  File \"./buku.py\", line 2566, in main\n    result = open_editor(args.editor, url, title_in, tags, desc_in)\n  File \"./buku.py\", line 2208, in open_editor\n    subprocess.call([editor, temp.name])\n  File \"/usr/lib/python3.5/subprocess.py\", line 557, in call\n    with Popen(*popenargs, **kwargs) as p:\n  File \"/usr/lib/python3.5/subprocess.py\", line 947, in __init__\n    restore_signals, start_new_session)\n  File \"/usr/lib/python3.5/subprocess.py\", line 1551, in _execute_child\n    raise child_exception_type(errno_num, err_msg)\nFileNotFoundError: [Errno 2] No such file or directory: 'heli'\n\nIn editor:\n\n```\nwww.google.com/                                                                               \ninsert LINK above this line. (single line)\ninsert TITLE above this line, (single line) (empty line to auto fetch, \"-\" for empty title)\n,                                                                               \ninsert the TAGS above this line, comma separated. (single line)\nhello                                                                           \ninsert all COMMENTS above this line. (multiple lines)\n```\ncan we make this:\n```\nLINK goes below this line (single line).\nwww.google.com/                                                                               \nTITLE goes below this line (single line). Leave empty line to auto fetch, \"-\" for empty title.\nTAGS (comma-separated) go below this line (single line).\n,\nCOMMENTS go below this line (multiple lines).\nhello\n```. I've just completed the code review. Please address those as well. I'm hoping we can have this feature in in a few hours.. I've made several modifications on the base commit. Please review 961fde3457fc6ec84af7e2d29edb7ae9205285db.\nAlso, I tried the GUI editor mousepad and it failed. I couldn't update a record. It gets aborted. is there any way to handle output from GUI editors?. > There is one behaviour that is changed.\nFixed now. Thanks!\nI believe mousepad forks internally and returns 0 from parent. Can't be handled. We don't care.\n```\n\n\n\nimport subprocess\nsubprocess.check_call([\"mousepad\", \"hello\"])\n0\n```\n\n\nit will open up in the background\n\nOpening in the foreground or background is not the problem. Buku exits immediately after calling mousepad. Are you seeing the same with macvim?. How about:\nbuku -w 'macvim -f'\nDoes that work? Otherwise we can use the suggested patch.. I'll add it then. Thanks!. Fixed in issue #115.. The idea was fantastic, and buku -w by itself is a priceless contribution. I'm loving it myself now! ;) Thanks a ton!. > I think the subset of APIs you are looking it are the most pertinent ones.\nRight!. @kishore-narendran @Qu4tro any update here?. > You can expect a first version in a day.\nThis isn't happening.\nSo @Qu4tro are you OK to start with it alone or do I close this issue? I don't want an issue (with 2 probable contributors) lingering around without a single line of code for a fortnight.. Do we really need to add so many dependencies? I would love to keep them minimal or at least optional? Is it possible to add the bunch of REST APIs as a layer and if someone needs the functionality then he can install it post core Buku install?. > Let me try it.\nSure!. Gitter is good. But I can talk to you in the evening only. IST.. Will we see some new APIs this weekend?. :+1: . If the way this is going is any indication, we'll have a nightmare maintaining it when we get issue reports.. I am adding this myself. It's difficult to keep tracking small reviewed patches for more than 1 or 2 days.\nThanks anyway!. Travis auto-integration is failing. Please fix.. > Pressing Ctrl-C while buku is reading from input\nCan you please elaborate this scenario? How to reproduce it?. This is what I see:\n```\n~/G/Buku$ ./buku.py -s hello\n1. http://0xax.blogspot.in/2014/08/say-hello-to-x64-assembly-part-1.html [113]\n\nCode as Art: Say hello to x64 Assembly [part 1]\n   # assembly programming\n\n\nhttps://github.com/mewrev/dissection [305]\nGitHub - mewrev/dissection: The dissection of a simple \"hello world\" ELF binary.\n   # assembly programming,binary analysis,computer science,interview\n\n\n\nbuku (? for help) \nInterrupted.\n~/G/Buku$ ls\nauto-completion/  buku.1     ci-test-wrapper  MANIFEST.in       setup.py\ntests/            buku.py   LICENSE           README.md\ntools/            CHANGELOG  Makefile          requirements.txt\n~/G/Buku$\n```\nThings look good. However, I have seen this issue with Ctrl-C and abrupt terminations with other applications too. The prompt goes missing, pressed keys do not reflect etc. I think we can ignore this.. I'm thinking of another interesting feature though. If EDITOR is set and an index is passed to -w, how about updating the index? For example:\nbuku -w 50\nshould update index 50 if EDITOR is set.. > Let me know if you want me to submit the pull request\nPlease submit it and we'll see.. You missed the rest of the 2 review comments.. > These messages aren't really part of the changes. Do you still want me to change them ?\nYes, it's OK to change.. Thank you!. No problem!. @di48l069 \n\nHow does having all code in a single file make it more complex and difficult to read (as that seems to be your concern)?\nDid you find any non-trivial function that is not commented enough?\nWhy should I load multiple files from the disk all the time if loading 1 file is enough? I am assuming not everyone is using SSD yet.\nWhat are the benefits for users?. The answers to all the above questions lead to endless discussions based on personal preferences and biases. I like it this way.\n\nHence closing this issue.. I wasn't upset. The questions I had are the reasons why I use a single file in all of my Python projects.\n\nthe browser gets stuck and crashes\n\nThe file itself is less than 100 KB. You should blame it on weak JS scripting. I faced no issues with Chrome Browser on a reasonably cheap Lenovo A6000.. A6000 is my mobile. :) Decent specs.. Even I didn't know before i bought this one. ;). I think it's OK to use get_rec_all() and delete_rec_all(). I'm pulling this in. I'll rename the APIs back.. Hi,\nSeems like a problem with Opera trying to quote UTF-8 characters.\n\nDoes it work well with Google Chrome or Chromium browser?\nWhich version of Buku are you using?\nPlease share the outputs of:\nlocale\nbuku -s buku --deep. > Opera 43 is Chromium based, while Opera 12.16\n\nI'm talking about the latest Google Chrome browser here. Do you see the issue with it?\nAlso, can you share a screenshot when the issue occurs please?. I tested on Ubuntu with latest Firefox, Google Chrome, SRWare Iron and Opera 43. While FF, Google Chrome and iron work perfectly, Opera fails with the issue you mentioned and for all URLs!\nopenurl is not a Buku api. Maybe Python calls it internally.\nIn any case, this is in all likelihood a regression with Opera rather than Buku. You can try to report this to Opera.\nClosing the issue.. BTW, the following works with Opera:\nexport BROWSER=opera-browser\nbuku -o 452. Hi,\nI am using Ubuntu. I think export BROWSER=opera-browser was not solving the problem. I set Opera Browser as my preferred browser and that solved the problem. You'll have to find something like that on Arch. Here's a screenshot:\n. It's not available now. There is a task item for a browser plugin. Please feel free to pick it up if you are interested.\nClosing the issue.. The following APIs would help you:\n\nget_default_dbdir(): gets the Buku  database directory path. The DB file is bookmarks.db. It's documented here as well.\nTo add to Buku DB it would be best to use SQLite directly. Please refer to add_rec() API for the SQLite command.\n\nDesign notes:\n\nAs the DB file is just SQLite we can completely avoid Python and use direct queries\nIt would be great if the extension can work with both Firefox and Google Chrome\nWe can provide the following capabilities:\nEnable/disable: when enabled, bookmarks added to FF get added to Buku as well. If a tag is added/deleted, it gets added/deleted in Buku DB as well. URLs are unique in Buku DB, so you can query by URL.\nSync delete: to delete the bookmark from Buku when deleted from the browser.\nAdd existing: to add the already existing bookmarks to Buku.\n\n\n\nThis would be a great value addition. There are several users who have requested a browser extension.. Sure thing! If something else comes to my mind I'll update this thread. Re-opening the issue.\nCan't thank you guys enough! Contributors have a large role in where Buku is today.. Another capability we can add:\n\nImport Buku bookmarks under a folder Buku bookmarks.\n\nNote: we should sync tags and description when adding/updating.. Awesome! :+1: . Just noticed you've removed the WIP tag. Excited to try out the first release. :). That's really great news! Once the first release is out, i wanna link  it from the Buku README.. Hey, no problem! Great that you resolved it yourself.. @Qu4tro can you please review this too?. > That would require a small change in the bukuDB, instead of returning True or False, it would return cursor.lastrowid and -1\nWhich APIs?. :+1: from my side. Also if you need to change any return values in buku.py make the change. I will review.. > @jarun POST /bookmarks\nPlease explain. I didn't quite understand.. @Qu4tro do you want to fetch and show the details to the user after adding? Is that why you need the id as return value? What if we just show successfully added to the user?\nAlso, we do expose the ID to the user because we support update by ID. So it's OK to return the ID.. I think we can return the ID which indicates success, or 0 if it fails. We don't have any entry with ID 0. So it should be fine.. I have made changes in commit 013849d2323120a9ba1cabf5c5b51b0a0726fd56 to return last row ID on success and -1 on failure from add_rec().\n\nGetting all bookmarks, should also return their id's.\n\nWe do a return self.cur.fetchall() now, which has the IDs as well.. Thanks guys!. I'll take a look.. This is what I tried:\n```\n~$ cat test.py \n!/usr/bin/env python3\nimport subprocess\ncommand = ['buku', '--sreg', 'hello', '-j']\nproc = subprocess.Popen(command,\n                        stdout=subprocess.PIPE,\n                        stderr=subprocess.PIPE\n                       )\noutput, perr = proc.communicate()\noutput = output.decode()\nperr = perr.decode()\nprint(output)\n~$ ./test.py \n[\n    {\n        \"description\": \"\",\n        \"index\": 113,\n        \"tags\": \"assembly programming\",\n        \"title\": \"Code as Art: Say hello to x64 Assembly [part 1]\",\n        \"uri\": \"http://0xax.blogspot.in/2014/08/say-hello-to-x64-assembly-part-1.html\"\n    },\n    {\n        \"description\": \"\",\n        \"index\": 305,\n        \"tags\": \"assembly programming,binary analysis,computer science,interview\",\n        \"title\": \"GitHub - mewrev/dissection: The dissection of a simple \\\"hello world\\\" ELF binary.\",\n        \"uri\": \"https://github.com/mewrev/dissection\"\n    }\n]\n~$\n```\nAs you can see, I got the desired output (added a print at the end). What is albert command (I changed it to hello)? Should it be a string in quotes?. I don't have a lot of understanding in Qt either. However, I think strace might help you in further investigation.. You can also add/enable logs in buku to understand if it's actually called.. I think you should reduce the line and proceed... probably remove jq, then use something simpler like buku -h and so on...\nAnyway, as the same script you shared is running fine from the terminal I don't think we have an issue with buku functionality or return value or printed data here. Probably you need to dive deeper into the QProcess + Python integration. Write some simple Python scripts, try to call through QProcess etc.\nClosing the issue with the above comment.. We have a detailed investigation at https://github.com/qutebrowser/qutebrowser/issues/2491. As this is a very minor change (and not a bug fix) I might not accept the PR. I'll add it myself if you like.\nHowever, I have a new feature in mind which might sound interesting to you. Buku could have an option to upgrade to http bookmarks to https. For this, we should send a HEAD request to see if https is supported and update URL of the bookmark record in DB.\nThis also needs another change. Today we try http if scheme is missing in URL. We should use https instead. But we need to take care of the case where http is available but not https.\nWould you like to take it up?. Buku is not and doesn't intend to be Google Cache or archive.org. You can find what you really want here.. I wouldn't say I haven't thought about it in the early stages. But it would be re-writing the Google search engine because you don't want to cache pages but the tokens. Storing only the title was a conscious decision.. Web == full page; mini web == only page title ;). Cheers!. > if they lead to pages which doesn't exist anymore\nNo search engine actually saves full pages of websites, if that's what you are looking for. That's what caching websites are for.\n\nI rely on Scrapbook Firefox extension to save offline copies of some bookmarks\n\nThat's not the purpose of Buku.\n\nI also intend to use buku as a lightweight alternative to Zotero, being able to bookmark, tag, and search within interesting pages I stumble upon every day\n\nBuku does that, but not the entire content of any resource available on the internet.\nLooking at your arguments it seems like you are looking for a local utility to store data from the internet so that you can find it later. Buku doesn't do that.\nI am locking this conversation as it's difficult to answer the same question again and again when the project is not aimed at being a web resource cache.. oil does this already. Also, not working with spaces is a big drawback.. Thanks for your understanding! I don't see a lot of changes coming soon. And in any case you can always rebase! :+1: . I'm not quite sure. @Qu4tro, can you please confirm?. I understand this is going to be incremental. Please let us know if you need any API changes. Please remove the do-not-merge label when the PR is ready.. Hi,\nAny update here?. Congratulations! And thanks for the update!. If the way this is going is any indication, we'll have a nightmare maintaining it when we get issue reports.. Thank you for the excellent test cases!\n\nthere is some error on version before python3.5, which made me skip some test. to fix this i need to add tox, so developer can testing against several python version. opinion?\n\nAs long as it doesn't add a new requirement to the main program, I'm fine. Please push as a new PR.\n\nis the test test_refresh_db is that long? maybe mark it as long_test so dev can skip this for faster testing?\n\nIt's absolutely fine to have long tests in an automated environment. I don't mind waiting a bit to ensure my changes are correct.. Also, can you please merge test_helpers.py to test_buku.py and retire test_helpers.py? ;). Thank you!. I believe there are filthy issues around ranges (corner cases, boundaries, negatives) for APIs which accept them. I found one just now.\nCan you write test cases fir such APIs? For example, delete_rec().. Please use the label do-not-merge for WiP.\n\nbut the function itself is quite weird\n\nThat's exactly what I was talking about. The code and functions were added top-down, so the checks are in the above layer, which isn't right. I would love to see test cases those fail. There are more functions like those.\nYou should commit those tests and raise the bugs for those straight away and I should fix those by moving in top layer functionality to where it belongs.\nIf you have long term plans to keep working on Buku, I would be glad to add you as a collaborator.. > there is no check on input. is it as expected?\n```\n\n\n\nfor x in range(3, 6):\n...     print(x)\n... \n3\n4\n5\nfor x in range(3, 3):\n...     print(x)\n... \nfor x in range(3, 1):\n...     print(x)\n... \n```\n\n\n\nThe behavior should be the same.\n\nis there limit to index and high and low variable? what happen when it is over the limit?\n\nWhatever Python supports. In initdb() we use int, so it's limited by range of int (>0).\n\nwhat should happen when database is empty?\n\nPlease add a test case to figure it out. Probably a no matching index msg?\nAll I am saying is - stop playing nice with me and add cases those fail, add bugs which I should fix. ;)\n\nif delay_commit is True, does it mean the database isn't changed?\n\nThe API documentation already says: :param delay_commit: do not commit to DB, caller's responsibility. > But how should I make the test fail? In my mind the function should raise assertion error, when the input don't match the condition.\n:+1: \n\nImo somehow the different location of the can be disadvantages for future testing. \n\nTrue, please have it in the same location. Would be easier to track as well.\n\nI'm not quite sure how that work\n\nYou can have more control e.g. you can push directly for minor stuff, manage reviews, bugs etc. And I would have company. ;). Some example acid test values for range:\n0 - max\n-0 - max\n-0 - -0\n-5 - -2\n-2 - -5\n5 - 10\n10 - 5\n0 - 5\n5 - 0\n0 - -2\n-2 - 0\nThen:\n5-5\na-5\n4-b\nI believe you get the idea. I can't test all these cases every time I make changes in the relevant APIs. So please keep adding this kinda stuff.. Similarly there should be tests for compactdb (with 20 records, say):\nd 25-10\nd 15-18\nto make sure the records are ordered properly by compactdb() in the end.\nSimilarly, print more than available records by range, delete more than available records by range (including reverse order).. I have fixed the logic at 75109cec3e85eb403fc94dd057d54a42ca57ea0f.. Note that delete_rec() and print_rec() can handle 0. 0 is treated as ALL records.\n\nif is_range == True\nhigh variable have the limit of amount the record on database + 1. if not IndexError wil be raised\nlow variable have the limit of amount the record on database. if not indexError will be raised\nif high equal low database is not changed.\n\nNope. We operate only up to max record index in those cases. If both are equal, only that index is affected.\n\nalso the different between high variable and index when it have bigger value than given limit, where index is more forgiven than high\n\nIf is_range is True, index is not even checked... only high and low are checked. If False, only index is checked.. > so if db have 3 record these following lines should delete the third record?\nyep. For negative indices, we should actually return IndexError. But I'm wondering if it's OK not to raise an Exception but log an error and return False?. Please check 5dc131ad85759216bd8001a7d914c6a7dde09adb for what I mean.\nYes, I want to keep it relaxed because of the web APIs we are exposing. We should have strict checks but simpler returns... and 0 exceptions.. Why are my changes from https://github.com/jarun/Buku/commit/4153298a4254c4e47a42c6d9916f2b0afb5e4c3e showing in this PR?. I think you should commit your changes locally, update your master, then run git pull --rebase and finally push to your master.\nPlease refer to: https://github.com/contiki-os/contiki/wiki/Code-Contributions#how-to-contribute-code. commit() ensures the changes are reflected/flushed to disk, not memory. The DB changes reflect in memory immediately.\nThe following (and similar other) failure:\ntest_bukuDb.py::test_delete_rec_range_and_delay_commit[1-1-True] FAILED\n\nhappens because the row is deleted from memory immediately. So:\nassert len(bdb.get_rec_all()) == db_len\n\ncan never be true.\nIt would pass if you open another connection to DB and call bdb.get_rec_all(). That would pass because the changes were not committed to disk.. > so how to test the result of delay commit?\nIt would pass if you open another connection to DB and call bdb.get_rec_all(). That would pass because the changes were not committed to disk.. Yes, the output is correct.. All tests are passing now. Please remove the do-not-merge tag when you want to to merge the PR.. Please do not merge commits by yourself. I always want to do a final review and accept.\nYes, we can proceed with print_rec().. Can you please confirm all the following cases are covered by this commit?\n0 - max\n-0 - max\n-0 - -0\n-5 - -2\n-2 - -5\n5 - 10\n10 - 5\n0 - 5\n5 - 0\n0 - -2\n-2 - 0\n5-5\na-5\n4-b\ntests for compactdb (with 20 records, say):\nd 25-10\nd 15-18\nFor single index:\n-1\n0\n1\nmax\nnon-existent ID\nOtherwise, please add some manual tests for the missing cases.. - yes\n- No need then.\n- I think 10 would be a good count. Make sure the rest of the logic test fall in place (no hard-coding I mean) even if you increase the number of bookmarks. For example, you can use the length of the set to determine number of bookmarks. That would be great for maintenance.. > if is_range == True and high == max, is high equal to 3 or 4?\n3\n\nif is_range == False and index == max, then index equal to 3 right?\n\nyes\n\nis there any specification for bookmark data list?\n\nthe data type of each field defines it. Check the column types in initdb().\n\nis third item always have to use parse_tags func?\n\nwhich API?\n\npossibility for empty string, None, list or other datatype.on each item?\n\nI didn't understand the question.. Do I need to do anything here?. Answered. Please check https://travis-ci.org/jarun/Buku/jobs/213773882\nI think the API delete_rec() is not even called.. The query we are using is:\n'DELETE from bookmarks where id BETWEEN ? AND ?'\nSo it will delete both 2 and 3 when you pass 2, 3. It doesn't work exactly like range() in this case.. Travis failed. Can you please explain the test case:\ntest_bukuDb.py::test_delete_rec_negative[-1-0-max-True] FAILED\nWhat do you pass here? How many records in DB? What is max? What are you expecting as output?. Initially when I mentioned max I intended MAX_INT. I understand now we refer to max_id in DB as max. So what is the integer value of max in the test case? Is it 3 (as you have 3 records in the DB)?\nIf you pass: -1, 0, 3, True\nall the 3 records will be deleted and the API will return True.\nAre you expecting the same output?. So I guess you have to change max to len(records_in_DB) in the test cases, right? I think the ones with max are failing.. I believe the following test cases are sufficient to test delete_rec with non-int:\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-True] PASSED\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-False] PASSED\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-1-a-True] PASSED\nThe other test cases redundantly test the same paths and increase the time required to complete the tests.\nI think we should resort to intelligent manually built up test cases than going for matrix based brute-force test.\nFor another example, I see tons of test_print_single_rec. Why? I wouldn't even bother testing this API with so many test cases.. > this should be only on setup.py and travis can install with python setup.py develop.\nSure!. > please fix the loop for is_range==True\nWhat's the issue with that?. Why are you using int(MAX_SQLITE_INT + 1), specifically why are you adding 1?. Thanks for the investigation! Let's pass MAX_SQLITE_INT. I can add a check before range but I believe we may never hit this issue in reality.. Also, please reduce the number of tests for test_delete_rec_on_non_integer.\nI'm even thinking of removing the non-int case because we are clear we want integers. Feel free to take a call on this.. > i think this is finished, right?\nAs I mentioned earlier, we should reduce the test cases for delete_rec with non-int to just 3 cases:\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-True] PASSED\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-False] PASSED\ntest_bukuDb.py::test_delete_rec_on_non_interger[a-1-a-True] PASSED\nrest of the cases are redundant.. Thank you!. ```\nnext would be\nsimplify test_print_single_rec\ntest print_rec\ntox\n```\nyes, please proceed.. requests is in PPA. I tested it when I wrote the dependencies section.\n@shaggytwodope is right; if it's packaged, there shouldn't be any additional steps.. Are you on Python 2.7?\nJust run:\npython3\nand share the output. Buku needs Python 3.3 or above.\nYou can also try to upgrade the requests package:\npip install --upgrade  requests. What is the output of:\n/usr/bin/env python3. I am using Ubuntu 16.04 and my output is:\n$ which python\n/usr/bin/python\n$ which python3\n/usr/bin/python3\nI can think of 2 ways out of this:\n\nTy installing python 3 and dependencies using apt if they are available:\n$ sudo apt-get install python3\nsudo apt-get install python3-urllib3 python3-cryptography python3-bs4 python3-requests\nYou can also try creating a softlink to python3 executable as /usr/bin/python3 (if it doesn't exist).. Ahh... you should use pip3 install ...\n\nThe  makes a lot of difference.. Thanks for the confirmation! Enjoy Buku!. Do you need to do the same for beautifulsoup4 and cryptography libs as well? You can check easily in the following scenarios:\n\nbuku -l\nbuku -i bookmarks.html\n\nwhere bookmarks.html is the html export from FF/Chrome.. You need to use sudo, right?. Ahh sorry! I missed root@machine. Anyway, I think we have found the reason behind the issue - the default packages on Ubuntu 14.04 do not match the requirements, which is purely environmental.\nThanks for sharing the basic instructions!. Try the BROWSER environment variable:\nBROWSER=firefox buku -o 3. Not really a buku problem. A quick google search leads to http://stackoverflow.com/questions/25875093/how-to-set-browser-environmental-variable-for-python-webbrowser\nbut I don't pay and use windows ;). So can't try it out myself.. > The last time I had to pay for Windows was in 2001.\nLoL!!! :+1: \nThanks for the confirmation.. Done!. 1. It's not so simple because it's not a direct API call. The API searchdb() indeed returns number of results or None. I would suggest you write yourself a small wrapper that calls the API directly.\n\nDid you try buku -s hello --oa?. @drbraden from the Introduction:\n\nBuku is too busy to track you - no history, obsolete records, usage analytics or homing.\nPlease read it. It's there for a reason.. Very useful. Please add it under the As a library section in README.. > Is this too much for a bookmark manager?\nYes. You are asking for a local Google search engine. Search wouldn't remain a plaintext search anymore. The RoI isn't reasonable.. @absolutejam Issue https://github.com/jarun/Buku/issues/171 was the same request. Though I am a bit reluctant, I think it's time to enable it based on public demand. ;). > That way, you don't have to keep typing the list of tags every time.\nDid you notice that tags can be set using simple redirection at the prompt?\n\nThis is one of the main benefits of a folder-based bookmark manager.\n\nYes, but parsing/reading/writing to a filesystem numerous times is inherently slower than using a flat file. And listing tags would be scanning all those directories.\n\nAs a second idea, buku could suggest other tags based on your past bookmarks when you add a tag.\n\nWe can do this, suggest optionally. When a tag is added find other tags that go together and show the tag names + indices. User can use redirection at the prompt and add the tags.\nWould you be interested in contributing the feature?. > By redirection, do you mean the --tag flag? Would definitely like more clarity on this.\nNo, I meant the smart tag editing with >>, > or << symbols at prompt.\n\nThen, when searching, you could have a strict search for the tags assigned to the bookmark only and a fuzzy search, which also includes bookmarks matching to parent or children tags with the results.\n\nThe RoI isn't great.\n\nNot sure if I would be able to contribute the feature (pretty novice programmer, so probably unlikely), but can always try to take a look.\n\nYou should if you really want it. I am not sure if I can get back to this.\n\nCan comments from a bookmark or set of bookmarks be exported to a text file?\n\nYou have to add a new filter to do that. Check option -f.\n\nMost concerned about using the # sign for headings\nBuku could be pretty useful for taking more detailed notes on the webpage you have bookmarked while reading them.\n\nYou can add anything in a note. Try the -w option where you can edit it. You can edit a bookmark in your favourite editor.. @alex-bender are you familiar with the Firefox and Chrome bookmark sqlite schema? If yes, you can check the importdb() API which does all import stuff.. > I've checked Chrome bookmarks file. It's simple json. I don't know anything about FF, but let me check.\nAFAIK the JSON file is the latest backup. Is the data same as that in the bookmark SQLite file?\n\nAre Buku/.github guides the only guides which I should follow?\n\nYep!. > Oh no, sorry. Data are not the same. You are right.. Looking for the database..\nPlease confirm if the data are same or not. Consider this scenario: you added a new bookmark in Chrome but didn't close the browser. Do you see that latest bookmark in the json file?. Awesome!\nThen here's what we need to do - check the same with Firefox. If everything looks fine, add a new option to Buku to auto-import. We need to scan the usual locations (on Mac, Linux and Windows) for FF and Chrome. If any of them is not found, ask the user to specify the location of the file (for the specific browser) manually.. Great! Waiting for your PR! :+1: . @alex-bender thanks! I have reviewed.\n\nI'm not sure that using webbrowser module for this case is the best decision\n\nIf it gives you the installation location of the browser, go ahead. We already import it. Do you have anything else in mind?. @rachmadaniHaryono please feel free to make the necessary changes and refactor. i will review in the PR. Please ensure you test the following cases:\n\n<a> </a> in desc\n<a> some text </a> in desc\nMulti-line desc\nMulti-line desc followed by another BM data with text.\n\nPlease use the bookmark paste I linked in the issue.. > As far as I understand webbrowser don't give us location, only absence of browser.\nOK. I misunderstood earlier. Anyway, it would be local data so we have to check in default location ourselves.\n\nI have a question according to the naming: should we check browsers like chromium or only chrome?\n\nI guess google chrome is sufficient as long as we provide the option to specify manually (documentation would play a really significant role in this feature). Every Google, Opera and Yandex has a fork of Chromium nowadays.\n\nso should we ask user about desired profile or import bookmarks from all of them?\n\nDoes FF or GC show bookmarks from all profiles in the UI? If yes, we grab all!. Thanks! Here's what I think - if a user has 10 profiles all of the bookmarks belong to him. I think it's OK to import all the bookmarks. I think even when FF/GC is installed and it imports bookmarks from other browsers, it imports all profiles. Can you please verify this?. By user above I meant OS user, not GC profile/user.. You are saying they are using the same login but Chrome is customized for each to have different profiles? Sorry, I think the idea is very far fetched and a big privacy issue. It's like two people using a single diary to write their journals.\nAnyway, what happens in the install -> auto import scenario? We can follow that.. From this discussion thread it seems like they only import from the default profile. We can do the same.. No, I guess it's not absolute.. Yes, let's go default. We'll document this under operational notes. As there will be an option to specify manually I don't see a problem.. Please open a new issue for this. We can continue discussing there. I will roll this general discussion thread.. Rolled at #174. I restored the API directory. Can I merge this PR?. Please check why this is failing.. Can we have tox.ini inside tests directory please?. And it shows some conflicts as well.. In that case, we need to add it to .gitignore.\nUnfortunately it works only if the file is added to .gitignore when it is add the first time. Is it OK if I revert the earlier commit e2989b0dccd91aaaf00b34c4a0690c95c0c84414 and then you can re-add the tox.ini file again along with the entry in .gitignore?. The reversal would be strong.\nHow about doing a git rm on the tox.ini file first, the re-adding it back with the entry in .gitignore?\nWith collaborator rights, you can do this yourself.. > hi i just read that. should i do it? i thought that is only to fix conflict?\nLeave it. No issues!. Thank you!. Thanks!. Thank you @rachmadaniHaryono!\nCan we have some test cases for update_rec()? I strongly believe you'll break it left and right. ;). Thank you!. > but it opens all websites in the same tab\nAre you using buku -o?. You are facing this only when FF is not open, right?. I am able to reproduce this with FF (but not Google Chrome). I'll change the webbrowser.open() call, but this may not handle the first race condition case (no browser window open) discussed in the solution here. Let's face it, FF is a slow starter.. What happens with simple open? Without the fix? Same behaviour?. Well, this is beyond Buku and goes into the realm of Python webbrowser module's interaction with and/or behaviour on Windows. I've made the sanest change by the docs and don't have anything else up my sleeves right now.. Does the following patch work for you?\ndiff --git a/buku.py b/buku.py\nindex b2fa50a..bf07081 100755\n--- a/buku.py\n+++ b/buku.py\n@@ -2239,7 +2239,12 @@ def browse(url):\n     os.dup2(fd, 2)\n     os.dup2(fd, 1)\n     try:\n-        webbrowser.open(url, new=2)\n+        pid = os.fork()\n+        if pid:\n+            pass\n+        else:\n+            webbrowser.open(url, new=2)\n+            sys.exit(0)\n     except Exception as e:\n         logerr('browse(): %s', e)\n     finally:\nI don't see any difference on Ubuntu.. I'll pass. This would be a nasty hack with no clean resolution.\nNow coming to:\n\nActually it is intended (the module will literally just wait). Looks like the \"solution\" are threads.\n\nIntended or not, I believe the behaviour is very inconsistent/outright wrong and should be fixed in the right module so that a mere webbrowser.open() API user doesn't have to dig the internet and try forks and threads. I may look at some alternative way of handling this and throw webbrowser out of the window but can't spend more time on this now. You are more than welcome to investigate this further.\n@zmwangx we'll notice this problem in googler too.. > I'm not sure if having a broken core feature on most desktop systems\nNope. I see the only issue on Linux is - if FF isn't open already, multiple browser windows open (one for each URL). Which you mentioned is livable in https://github.com/jarun/Buku/issues/142#issuecomment-290998636.\nThe subsequent issues (https://github.com/jarun/Buku/issues/142#issuecomment-291023300) seem to be occurring on Windows only. At least I don't see those happening (with https://github.com/jarun/Buku/commit/b74cfa0a5fc0fddffd754c9c6306e80c45c86cbd in place) with Firefox or SRWare Iron (Google Chrome mod) on Ubuntu.\n\nI currently don't have a Unix system with a GUI ready. I might check it later.\n\nI am on Ubuntu and am not noticing the subsequent issues on it.. BTW, in FF do you have \"Open new windows in a new tab instead\" checked?. > Linux is not \"most desktop systems\".\n\n\"most desktop systems\" came from https://github.com/jarun/Buku/issues/142#issuecomment-291068567. I didn't realize I'll have to backtrack.\nclarification: I'm pretty sure you understand it should be read as \"most desktop systems\" belonging to users of Buku. And they are not Windows users. Buku is quite broken on Windows. I'm not seeking a mass GUI user exodus to buku either. This is probably the first issue report I'm getting from Windows.\n\nAs I mentioned, I don't have enough time to pursue this. If you have the time you can check it out.. Thanks for the PR and testing it out in various scenarios!\nEven if I had taken this up in a week or a month I wouldn't know what to do with it without having the OS to test any changes.. See #80.. @dertuxmalwieder we have import folders as bookmarks at https://github.com/jarun/Buku/commit/f1a5cd4b883cf077c30069dfb1ba3507f291e5d8 :).. Thanks, please add this info to the operational notes section in README and man page.. Please add the note on windows at the end (XDG, HOME, PWD...). Our Windows support is not that cool yet! ;). Thank you!. > I have a strong feeling that you intend to discourage me of contributions. ^^\nNo. Fire at will! :dagger: . Thank you!. @dertuxmalwieder we seem to have received a very valid comment on Reddit today.\nI referred to:\nhttps://www.nextofwindows.com/how-to-access-user-profiles-appdata-folder-the-easiest-way-in-windows-7\n(you probably know this already :))\nWould it be possible for you to kindly make the changes and raise a PR for this (whenever you have the time)?. ;). Thank you! I have some other items in the task list. Please let me know if you are interested.. BTW... there were several lints in the PR.\n~/G/Buku$ python3 -m flake8 buku.py\nbuku.py:1498:13: E303 too many blank lines (2)\nbuku.py:1499:27: E203 whitespace before ':'\nbuku.py:1501:62: E261 at least two spaces before inline comment\nbuku.py:1501:80: E501 line too long (90 > 79 characters)\nbuku.py:1502:67: E261 at least two spaces before inline comment\nbuku.py:1502:80: E501 line too long (104 > 79 characters)\nbuku.py:1504:80: E501 line too long (94 > 79 characters)\nbuku.py:1507:45: F821 undefined name 'DELIMITER'. How about the first one?\nOption to scan and import Firefox and Google Chrome bookmarks DB file (URL, title, tags, description fields) to Buku database.. I just go by google for defaults. Power users have regex searches. Try it and have fun.. And then we have --deep too! Come on!!!. I saw this earlier as well: http://stackoverflow.com/questions/1835148/why-doesnt-google-offer-partial-search-is-it-because-the-index-would-be-too-la\nin the line of @shaggytwodope. > No idea what Google and regex has to do with this though.\nDid you try the following options:\nbuku -r pattern\nbuku -s/S pattern --deep. And no, this won't be the default, for obvious reasons. If you need it as the default, please set an alias.. I am not sure if we really need to have `test_print_single_rec()`. Makes it very difficult to make any changes to the way we print. If I change the function, the test case changes but there is no generally agreed upon pattern to do the print. It would become even more difficult to maintain if we *ever* support custom colors. So I have taken a measured approach in this case.\n\nLet's leave the print functions alone. They keep changing. I'll leave it upto the dev to see and verify what he intends to print. A test case for a function cannot be the same function.. Great! Please remove the do-not-merge label when it's ready for a review.. Does it fix the latest build break on master? It's broken for around 3 days now. We need to turn it into green as soon as possible.. Thank you!. When did you install Buku the first time? There was a sample code to update older versions of the DB and I removed it in one of the latest releases. That may be the issue here.. Try running the version from https://github.com/jarun/Buku/blob/v2.8/buku.py or 2.7 (where flags were introduced). It should create the flags column and anything else missing when run the first time.. > But there is a way to make my DB compatible with the new version?\nNope, as I said I removed the logic in the latest code. You can download the single file, run it once and remove it. Keep using your pip installed version.. Please let me know if it works.. My pleasure! Please leave a star as your token of appreciation! :+1: . Note: While I could add it in, I didn't want to run a defensive code at every startup and add some minor delay. The workaround is pretty quick and onetime.. We do not add any special permissions for these files. Here's what I see on my system:\n$ umask\n0002\n...\ndrwxrwxr-x 2 vaio vaio    4096 Apr 10 20:29 buku/\n...\n-rw-rw-r-- 1 vaio vaio 94208 Apr 10 20:29 buku/bookmarks.db\nResults after changing the umask to 0027:\n$ umask\n0027\n...\ndrwxr-x--- 2 vaio vaio    4096 Apr 17 18:37 buku/\n...\n-rw-r----- 1 vaio vaio 3072 Apr 17 18:37 bookmarks.db\nThe perms are consistent with the umask in both the cases. On Linux there are ways to override umask (e.g. using ACLs). Please check if you have are seeing any of those cases.\nAs I mentioned, there is no tweaking of default permissions in the code.. Closing the issue with the above explanation.. I'll keep that in mind. Unfortunately, I find it extremely difficult to make sense out of a single feature pushed in 8 non-consecutive commits. I have to maintain at least 5 active projects at any time. My limitation, probably.. > what other people think is right\nwhat do you think? matters a lot to me!. > In my older pull request I tried to simulate the *ix behavior.\nYes, I kinda guessed that. And I did the same in the early days of Buku before the DB file was moved to ~/.local/....\nI think moving it to AppData would be philosophically equivalent. ;). Thank you so much!. Please remove the label when ready for review.. @rachmadaniHaryono we need to wrap this up please!. Thanks!. Thank you!. Thank you!. Thank you!. The way to do it is:\nbuku -u --tacit // will show only bookmarks those have issues with details\nbuku -d id ... // delete manually\nAs soon as I provide an option to delete stuff automatically, I'll get counter-issues saying this error code was acceptable, my bookmark got deleted. This is too subjective and personalized stuff. I wouldn't want to go down that line. Web pages come back, throw tons of errors. So please do the deletion manually. Buku supports multiple ids, ranges with delete. That's all the flexibility we can provide here.. > and if i have time, i may write write python script for the last point.\nyes, you can write a simple parser to parse the failed ids and delete them, but let's not do it in buku. we can add as an example though!. In the latest release you can literally manage tags with >>, >, << at the prompt.\nIf you are looking for auto-completion, please check the related projects section. There are nice utilities those use Buku and provide further flexibility.. Please remove the .bak files. We'll always know what has changed from the diff.. Thanks guys!. @shaggytwodope do we need an additional instruction to install bs4 via pip3?\n\ndo you know any example of people using buku with qutebrowser\n\nPeople tried, there were issues, they got fixed.. > folks just gotta be sure to read the whole thing\nI completely agree!. I wish you had read the manual first so you knew there's something such as Beautiful Soup. If we see more users making facing this we will consider it. But not right away.. Either that or https://github.com/jarun/Buku/issues/30.. Please use the auto-completion scripts in that case.. To be a little more elaborate, this is the first time I am seeing a request like this. Buku has 1000s of users and it's a bit late to introduce new options/aliases for the same functionality in the utility. In addition to the auto-completion scripts, I can also suggest another way to achieve this - use your own aliases in you shell's rc file.. The way it is now is Buku can search only one tag at a time. I haven't noticed anyone asking to expand it to even multiple tags yet which should be the logical first step. Sure we can make it much more complex than it needs to be (reason: Buku is much more personal. You already know and can identify your bookmarks quickly which is not the case with github) but I wouldn't attempt it as long as I don't see more users asking for this feature.\nI am adding both the features to the ToDo list and closing the defect. It'll remain live and If someone wants, (s)he'll pick it up.. @hao-lee this feature is implemented at https://github.com/jarun/Buku/commit/2b7f1422451bcef66df013c0237b42e76d644856.. And it goes to our latest member, @mosegontar! :). We are not using PAGER anywhere in Buku AFAIK. I'll check what went wrong. Maybe stdout changed to stderr? Will that affect you?. Thanks for confirming. Yes, I believe Rasmus kindly wrote this useful script at the very nascent stage of Buku when we didn't have the complete subprompt in place.\nClosing the issue accordingly.. Please use --np. Please refer to the latest help ;).. I meant to say there's already an As a library section. Please append to the existing section.. Thank you!. Please fix the integration break.\n@rachmadaniHaryono please review once the break is fixed.. Just wait till we hear from @rachmadaniHaryono.. Thank you!. @rachmadaniHaryono it's failing. I believe we can have this upstream in NixOS as @Infinisil mentioned and move on. The failure doesn't indicate anything wrong with the current test cases we have or Buku functionality.\nClosing this PR accordingly.. Sure thing!\n@rachmadaniHaryono please review when it's in and squash merge if everything looks good to you.. I think we are good to go. You can push this one directly to master as well.. I reopened it. Can you please update the PR now?. Please confirm if it's in now (I think it is).. Thanks guys!. We really tried once ;). Please refer to https://github.com/jarun/googler/pull/88 for a context on this. If the user needs to tinker with automated stuff (that doesn't work as he intends it to), he can as well do it manually himself.\nThe number of users googler or Buku has today confirms that people don't mind doing the tiny bit themselves. But I can suggest something else - a generic comment at the top of each script on the default location. It should be from the shell's official documentation. This would work as a pointer. If you are fine with that please raise a PR by all means.. You do that and then our smartest user would expect you to take the prefix into consideration too. The next thing you see - all of them outsmart us. Rule of the thumb - they are all smarter than we think ;).. I am fine with linking to the shell manuals.. :+1: you too!. We had a bug earlier on the security warning. Please refer to https://github.com/jarun/Buku/issues/94. I don't see it on my system. Are you you seeing this warning?. 1. There are some limits (?) based on 3.5 in test. Just grep 3.5 and confirm they are all fine.\n2. Also, I think we can generate the deb package from the 3.6 build.. I'll get back by the evening (IST).. In .travis.yml:\n30     # Upload from only one job (doesn't matter which one because we're packaging the same thing throughout the matrix)\n 31     python: \"3.5\"\nAlso, take a look at:\n$ grep -nr \"3\\.5\" *\nsetup.py:56:        'Programming Language :: Python :: 3.5',\ntests/test_bukuDb.py:43:only_python_3_5 = pytest.mark.skipif(sys.version_info < (3, 5), reason=\"requires python3.5\")\ntests/test_buku.py:13:only_python_3_5 = pytest.mark.skipif(sys.version_info < (3, 5), reason=\"requires python3.5\")\nBinary file tests/__pycache__/test_bukuDb.cpython-35-PYTEST.pyc matches\nBinary file tests/__pycache__/test_buku.cpython-35-PYTEST.pyc matches\ncase by case... if we need to add 3.6 anywhere etc.. Thanks! Please check the review comments.. Thank you!. Why not use a tag, say... professional? If you ever need you can export specific tags too.\nComing to the option of specifying the DB location:\nSwitching databases is prone to human errors. Buku is written as a library. If you really want it you can do it at an API level. Check the classes:\nclass BukuDb\nclass BukuCrypt\nI would like to keep Buku simple for the regular users.. I am re-opening this as I see more requests for this feature. You'll have it soon. :). I am adding an undocumented API --db which should meet your requirement.. Yes, we would like to keep it hidden from regular users. There's a high chance of mixing up if someone tries to use both.. What's Boku?\nYou can use the --db flag. It's available but not documented.. I'll check this.. @mohammadKhalifa the single line comment import is happening due to the following lines in importdb():\n1673                 if comment_tag:                                                  \n1674                     desc = comment_tag.text[0:comment_tag.text.find('\\n')]\nI could reproduce it by adding multiline description to one of my Firefox bookmarks and using the exported html. I have uploaded it here. Look for SearchPreview in the text.\nHowever, I can't find an immediate way around it because if I remove the .text[0:comment_tag.text.find('\\n')] part the text (Language Tools) from the next tag <DT> gets appended. Can you please take a look?\n@nick-s-b regarding the timestamp, it's intentional and mentioned in the readme:\nBuku is too busy to track you - no history, obsolete records, usage analytics or homing.. @nick-s-b can you please test and confirm if this issue is fixed on master?. Perfect! Thanks for confirming!. @nick-s-b sorry for bothering you again. I made some further changes for optimization. Can you please test the latest master?. Thanks a lot! I think we are good with import. :+1: . > not quite sure if apturl is correct, as it may also not contain double slash\n\nyou are right. Please fix it in the code as well. We should just check for apt:. Also, please update the documentation accordingly (if required).. Thank you!. I have to think about it. Whether we really want to integrate or want to go solo. ;). I was going through the Pinboard docs. They do support export/import to/from html. I think we can refrain from adding some service specific code to authenticate to pinboard, probably along with some auth token hanging around. Buku is a solution in itself, not an ad-hoc to any solution.\nNow, coming to the integration part with popular web services, why don't we just document the fact that Buku supports bookmarks.html? That should be enough to have all your bookmarks in from anywhere (that too, incrementally).\nYes, it's a manual procedure. But it's safer/smarter than accessing any random web service's data directly.. > I might write some separate small pinboard-to-buku script\nOf course!\n\nI could add a line in the Import section of the Operational Notes wiki\n\nYou are in the right place!. Additionally, in the Introduction, please make the following modification:\n\"For GUI integration (or to sync bookmarks with your favourite bookmark management service), refer to the wiki page on System integration.\". @alex-bender the colors support is alredy being worked on by @shv-q3 here. He hijacked this but he is almost done! ;) I changed the owner.\nEDIT: Now I remember he attempted to do this once before with colord. The current approach has been our preferred approach.. @mosegontar I have added the note on web service integration.. Now I see what has happened. I had the README change locally, forgot to push it and went to sleep. :) Pushed it now.. @alex-bender @mosegontar how is it going? Planning to make a release early next month, probably in the first week. Can we expect to have the features assigned to you in?. Thanks guys!. @mosegontar I can see it's going very well! :+1: . Simply awesome!. -f is the print format specifier. I believe what you want is search options should honor -f. @mosegontar would you like to try it out?. The trick would be to call print_rec() if -f is used, otherwise call print_single_rec() (as it is now). I would definitely love to call print_single_rec() [when -f is not used] because the overhead is much less. print_rec() queries the db again.\nAnother way would be to have an alternative API to print_single_rec() which does the filter check. In any case I would love to keep print_single_rec() as it is - straight logic without any condition check overhead.. @lukaszkarbownik please check #211.. For the second question, you can add another filter which just shows the url, say -f0 (or some other number if 0 is default). Do NOT change the current filters because people use them in their scripts already.. For the first question, print_single_rec() takes a record/row. You should use that (call in loop for all search result records) or add a similar function that honours filtering. I would prefer not to change print_rec or print_single_rec. Let's have print_single_rec_with_filter.\nNow, we should not be checking every time before printing a single record whether filter is enabled or not. Just check it once and use something like a function pointer in C to use the appropriate API is filtering is on.\nThis generic issue listing is not really for in-depth discussions on specific requests. Can you please open a defect or something where we can discuss these?. Several points:\n\nit's preferable to go with a static value than grabbing one from the web (per session at that)\nwe need one specifically for a text based browser\nwhile the project by itself is interesting, it's risky to depend on non-standard libraries\npersonally I am very much resistant to adding new library deps ;). @rachmadaniHaryono we have a user agent string of own at https://github.com/jarun/Buku/commit/848d9d79431be6ec7a668995ed282514374b9cab!. Please explain in more detail. I didn't quite understand. Currently it is threaded. Which approach are you proposing?. > short answer: it's more about the overhead of having a thread per connection. non-blocking io lets one avoid having a thread per connection.\n\nThe thread is more of a propaganda than having any real meat. Here's my take:\n\nWe are in the age of i7s and SSDs. The overhead of threading for fetching webpages is insignificant.\nWe have minimal data processing overhead and NO graphical overhead. We get the data and we are done.\nEven if we use asynchronous IO the program waits for the slowest thread (as defined by the timeout [currently 40 secs?]). We can't exit.\nFull refresh is a once-in-a-while operation.. > Or even batch import from the console?\n\nIt would be a very small script in ANY scripting language (shell/python/perl...). Please write it yourself.. @mosegontar @rachmadaniHaryono can you guys audit the add bookmark path and see if there's any way to optimize the performance anywhere? It can be reduction of condition checks, loops, less variables, anything... It's not that we are slow, but it's always great to be audited (other than IRS).. > html-export with template (already done, I can make a pull request if you want; helpful to create a static website with filtering possibilities in JS)\nThis is definitely a new plugin/project. Please create one and I'll add a mention to it.. > it would be cool to have some sort of plugins to update the database, for example if you have a github-repo bookmarked to automatically create tags based on the license and language. something to make it easier to grab more information to a url based on hints on the webpage, but with a plugin concept to be able to use different \"services\". (I can help with coding for this, but I dunno how to do a plugin-concept in python.\nany comments?\nAre you creating a plugin framework or a plugin in this case? The framework would be a part of Buku, the plugin will be a separate project.. I think it would be greatly useful. Please collaborate and go ahead. Please add an issue and a branch (plugin-fw) to work on this.\n@questor I am adding you as a collab. Please accept and work on the branch for plugin framework.. I have created the branch plugin-fw.\nGuys,\nI'll be away for a few days till next Sun and won't be active other than responding to mails (family time ;)). For the plugin fw branch please do peer code review, merge and work together.. I will need some time to think about it. At the same time, the plugins should be as detached as possible.. I think a plugin should have its own database for its own data. The foreign key should be the URL which is unique in Buku DB.\nAlso, for any changes to Buku database the plugin should use Buku APIs or request.. Let's say the user updates description through plugin. It should be in the desc field of Buku. For fields which are available both Buku and plugins work on the same field. That is, no data duplication.. @rachmadaniHaryono are there any test cases for shorten and expand? I believe for well-known services like google the shortened url is always the same. Can you please add the test case if not in place already? This we ensure we know if the tny.im service is active.. Sure! Please take your time.. @questor are you working on the plugin framework?. Also @questor, please raise a PR for the template stuff so we can review it.. If the requirement is to have a template from which a static webpage can be generated I don't think we would really need a plugin. Have the template and build it up by fetching data from the webpages separately. What one really needs is the links. Why would we need to store additional data for this requirement in the Buku database. If you want a cool page, you need to ave the thumbnails which would need page fetches anyway.. My idea is pretty straight for this plugin (set of plugins): get the urls from the DB and do whatever you want with your own data.. Rolled at #233.. The feature development is in progress.. > anything what match ~/.mozilla/firefox/XXXXXXX.default/\nI think it can be done with simple string manipulation without importing anything new. If you don't find the desired file with check if there's anything else matching. If not, show a message and move on.\n\nAlso, what about safari?\n\nLeave it. We don't wanna support every other browser.. BTW, I left you a message on gitter.im. Please check.. It's OK, I just wanted to know if you'll be interested in becoming a collaborator for Buku. :). Currently we have only 4 people as collabs. It's a small team. I'll add you up. We can have a brief chat of gitter whenever you have some time. I'm in IST.. OK then. Maybe around 20:00 your time. Leave a msg here in case I forget. I've sent you the invite.. No you can provide the complete path. Please check how the argument to --import or --export is handled.. You can import the immediate outer folder as tag, if user confirms. You should check for the unique tag. Check the latest importdb() code.. Sure! I got held up today. :). Latest FF bookmarks schema: https://wiki.mozilla.org/File:Places.sqlite.schema.pdf\nRegrading a single query:\nThere is a note (section Notes) on what happens when a tag is added: Tags result in two new entries...\nSeems like there is a foreign key to moz_places. You would probably need to dump the data with few bookmarks. Then see if this discussion thread helps.. Some more resources:\n\nhttps://stackoverflow.com/questions/464516/firefox-bookmarks-sqlite-structure\nhttps://github.com/websafe/ffbx/blob/master/ffbx.sh. > I know that it isn't so effective, but mine sql skills leave much to be desired.\n\nFor a one time stuff, it's absolutely fine.. I believe we should stick to sqlite as long as we can get the required fields in a couple of queries.. @alex-bender how is it going?. No problem. Please take your time. I am planning to make a release tomorrow. Just wanted to catch up with you.. > Should user specify exactly what type of bookmark is that or it's ours job?\nWe decide ourselves on the default one. Also, just go by hardcoded filename (for default). No need to verify file format and stuff.\n\nAlso could you please provide me with couple samples of FF bookmarks files?\n\nthe html export of the sqlite file?. > please review my latest commit.\nPlease raise the PR. I would take some time.. Question:\n\nCan we detect if Chrome or FF is installed (in default location)?\n\nMy understanding is we are using sqlite file for GC and json for FF. I think we can have the following flow:\n\nAsk whether to import chrome bookmarks. If yes, import. If failed, say not found.\nAsk whether to import FF bookmarks. If yes, import. If failed, say not found.. > Or should we disallow such ability?\n\nYes. The file must have the default extension otherwise we fail with file type unknown. Currently we do the same with html and md imports.\nWhile we can do a lot of things we would like to keep our workflows simple. Understanding file types is not necessarily the job of a bookmark manager. So lets not maintain that code.. That's fine. We can have some exceptions where they fit.. Thank you so much!. No, you can't just import any random library in Buku. Neither can we accept any feature implementation without a single line of documentation. Sorry!\nDid you take a look at googler? There are reasons we added a note to refer to googler for colours.. For feature implementations like this it's very important you discuss with others working on the project before making changes. Buku has an active gitter room or you can always ping us from the ToDo list. We have a small and extremely co-operative team here.\nBasic stuff -\n\nWe want to keep dependencies minimal\nDocumentation is a must (for users to use and for devs to understand the code)\ngoogler already does this, both the utils have the same license. One can \"borrow\" the code from there\n\nJust let us know your plans, we can discuss and you can kick off. Thank you for your efforts and your interest in Buku!. Thank you!. The behaviour depends on the OS. There has been a detailed investigation in https://github.com/jarun/Buku/issues/142. We settled with an attempt to open a new tab per URL. Unfortunately we don't have much control here.\nGlad to know you like the utility!. It's more of a hack than a real solution. Anything we try in this case would be. Which is why we would like to keep the behaviour as - \"attempt to open in a new tab\".\nMaybe you could try the New tab, New Window extension. It's mentioned in this discussion thread.. > I need some assistance here please.\nYou just need to rebase your code to the latest Buku/master. Some of the code has changed since you forked. Which is why you are seeing the conflicts.\nHere's a useful article. Add your upstream (if it's not added already). A more graphical representation here: https://help.github.com/articles/syncing-a-fork/.. Sequence of commands you should use:\ncd Buku/\ngit checkout master\ngit remote add upstream https://github.com/jarun/Buku\ngit fetch upstream\ngit merge upstream/master\ngit checkout import_browser_bookmarks\ngit rebase master\nYou'll see all the merge conflicts in buku.py now. Search for <<<<. The main reason behind thee conflicts is I and @rachmadaniHaryono changed importdb() a lot in the meantime. So the easiest way out of it is to have a new function as entry-point for yourself (say, auto_importdb()). Once the merge is done, we can reformat it again.. > So the easiest way out of it is to have a new function as entry-point for yourself\nSorry, I noticed now that you are doing it already. All you are missing is is_nongeneric_url(). Just follow the steps above and do a manual rebase.. Probably your local settings. The test case should pass on Travis.. I will review all of this in the evening (IST). I think it's in great shape now.\nIf you are interested, please check out the ToDo list for the item on custom color support.. @alex-bender we must rely on @rachmadaniHaryono for test cases. In my experience the dev writing test cases always miss corner cases. @rachmadaniHaryono found several issues in Buku from the original source (much of it mine :1st_place_medal:).. Check out the custom color support.. TDD: I know it's a thing but I believe smart devs know the things they need to cover even before they write their code. TDD or not, they'll miss things unforeseen. Say, some browser specific case wrt. Buku.\nFor test cases, it's enough to know what is covered. TDD starts from what will be covered and it's not always possible to know the roadblocks beforehand.\nTDD works when there is a deadline driven requirement. We are free birds :dancing_men:. I enjoy working with you guys in this humane environment :beer:.\nPlease go through @rachmadaniHaryono's comment above. Looks good to me. Feel free to add anything you want in.. > I'm gonna have vacation from the 12th until the end of month\n@alex-bender no need to hurry. Enjoy your vacation! Also, you will have reference code in googler already.. Thank you!. This PR closes #175.\nWe also discussed we will have provisions for --ib to take a file as input and handle only that. Are you planning on a new PR for that?. Also I missed in my review that there is no help or man page doc for this.\nWhen I run on m system (Ubuntu 16.04 amd64) I get:\n~/G/Buku$ ./buku.py --ib abc\n[ERROR] Could not detect `google-chrome' browser\n[ERROR] Could not detect `firefox' browser\n~/G/Buku$\nWhich OS did you test your changes on? I believe we have to modify this for other OSes.. > function which should detect what's the format of bookmark file\nI was planning to detect from the file extension... the way we differentiate html and md.\nDid you develop on Debian? If it works for you on Debian with default install, it will work everywhere. I will check the issue on Ubuntu. Will check ASAP (need a few days to get back to this).. As of now ignore --tacit. Once we have something we can build on top of that. Shouldn't be a big deal.. Take your time. You can do it after the vacation as well. :+1: . That's correct.. The function filters out bookmarks those start with place:, file://, apt:.. parse tag does it because when we accept the input from users they can be in the form:\ntag 1, tag2 which gives [tag, 1,, tag2] and should yield 2 tags: tag 1,tag2 and NOT 3 tags: tag,1,tag2.\nYou can't move it anywhere before you actually get the url.. Your input data is in a list. When user enters:\nbuku tag 1, tag2, some other\nyou get:\n[tag, 1,, tag2,, some, other] as args.. We save the bookmarks in the format:\n,tag 1,tag2,some other,\nseparated and wrapped by DELIM (check delim_wrap() as well).. ```\n~/G/Buku$ gd\ndiff --git a/buku.py b/buku.py\nindex 2167236..34f14f4 100755\n--- a/buku.py\n+++ b/buku.py\n@@ -3260,6 +3260,8 @@ POSITIONAL ARGUMENTS:\n     # Parse the arguments\n     args = argparser.parse_args()\n\nprint(args.tag)\n+\n     # Show help and exit if help requested\n     if args.help:\n         argparser.print_help(sys.stdout)\n~/G/Buku$ ./buku.py --tag buku tag 1, tag2, some other\n['buku', 'tag', '1,', 'tag2,', 'some', 'other']\n``. There can be an input like ['world,hello'] too. ;). It should be,hello,world,`. ;)\n\nThere are reasons I took my time to stabilize this painstaking function. :dagger: . > Sorry again.\nDon't be! Actually I am glad to find the second person to dive into it. If you can simplify it that would be great.. I left some questions for you in the PR. Take your time to make any other changes if needed. I will review tomorrow.\nAlso, once you are back we need to document this. Probably after the support for input file is in. Also, how about renaming -bi to -ai (for auto-import). Has a ring to it for sure. ;). Does GC support tags?\nAlso, did you ensure that original spaces within tags are maintained?. If there's a tag like hello world, it should remain hello world. Should not become hello,world.. I believe @rachmadaniHaryono is working on the unit test cases.. Don't worry about it. Simple cases are fine. @rachmadaniHaryono already has a list of complicated tags (in current tests) he would run against your function.. Thank you!. Alex, I think we can drop the idea of manual import from json or sqlite. We already have the support to import bookmarks.html. One way to do things is enough.\nSo the only optional things that remain would be: import parent folder as tag and add unique tag. I'll add an item and assign it to you.. Simply awesome!. I think now we can simply remove the PR directive on flake8.. OK.. Are you disabling everything and enabling only the no-member check? I would like to have flake8 and anything useful (like the no-member) stuff from pylint.. sure! Please update the line in the PR template as well.. Thank you very much!. Notes:\nSearch multiple tags\n\nsearch bookmarks having all of tag1, tag2, ..., tagn\nsearch bookmarks having any of tag1, tag2, ..., tagn\n\nI would suggest using operator &:\n// search any\nbuku -t tag1, tag2, tag3\n// search all\nbuku -t tag1 & tag2 & tag3\n// do NOT support a mix like the following\nbuku -t tag1, tag2 & tag3\nTag exclusion\nbuku -t tag1, tag2 - tag1, tag2\nmakes sense. anything after the - should be excluded.. > I think that's a good idea to support both 'any' and 'all' search\nYes, we have to keep up with -s and -S. + is cool.. Fixed at https://github.com/jarun/Buku/commit/2b7f1422451bcef66df013c0237b42e76d644856.. The core logic looks fine. Also, please update the man page with the option improvements and examples.. I guess we must document - should be space separated (+ doesn't need it):\n```\n~$ ./buku.py -t c program execution,interview-programming\n1. :: DeveloperIQ.in - Asia's #1 Software Technology magazine :: [102]\n\nhttp://developeriq.in/articles/2012/jan/06/understanding-the-execution-of-a-c-program/\n   # c program execution,interview,programming\n\n\nLinux x86 Program Start Up [103]\nhttp://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html\n   # c program execution,interview,programming\n\n\n\nbuku (? for help)\n```\nand\n~$ ./buku.py -t c program execution,interview - programming\n// many results having any of `c program execution` or `interview` tags but not `programming` (as expected)\nand\n~$ ./buku.py -t c program execution+interview - programming\n~$\nbut\n```\n~$ ./buku.py -t c program execution+interview+programming\n1. :: DeveloperIQ.in - Asia's #1 Software Technology magazine :: [102]\n\nhttp://developeriq.in/articles/2012/jan/06/understanding-the-execution-of-a-c-program/\n   # c program execution,interview,programming\n\n\nLinux x86 Program Start Up [103]\nhttp://dbp-consulting.com/tutorials/debugging/linuxProgramStartup.html\n   # c program execution,interview,programming\n\n\n\nbuku (? for help)\n```\nor should we enforce both + and - to be space-separated?. You mentioned you have updated the man page but it's missing in the changeset.. Yes, we should enforce space separation for both + and -. We do that for specific tag append, removal too. Let's keep these uniform and treat DELIM (comma) as a special case.. There's a build failure:\n4.09s$ python3 -m flake8\n./tests/test_bukuDb.py:412:21: E128 continuation line under-indented for visual indent\n./tests/test_bukuDb.py:417:21: E128 continuation line under-indented for visual indent\nThe command \"python3 -m flake8\" exited with 1.\nPlease fix.. @rachmadaniHaryono this is a sizable PR. Can you please review the changes as well? Thanks!. Thank you @mosegontar! I'll wait for @rachmadaniHaryono to complete the review.\nIn the meantime, if you are interested, please let me know if you would like to join the team as a collaborator.. Sure! I'll add you.\n@rachmadaniHaryono please let us know if we are good to go with the latest changes.. @mosegontar I've sent you the invite.. Thanks guys!. That's great! Yes, I guess I'll have to generate some more keys for the other projects but that's absolutely fine.\nPlease take your time. I'm in no hurry for a release.. @shaggytwodope fedora 26 support is in now. Let's have it! Dump fedora 25. ;). The changes are working fine for googler (adapted). Closing the issue.. That was fast! I have reviewed the changes. Please take a look.. Thank you!. Sure thing!. While we are at it, would it be possible for you to check all the API documentation? A lot has changed since we started using documentation and it may be out of place.\nIt would be great to have a nice documentation in Doxygen format. We will generate and publish it to make Buku more attractive as a library. We have a long-pending ToDo llist item. If you can spend the time, we can work on closing it.. I'll look it up. In case I don't get back in a while, please remind.. They should really have a way to set reminders here. ;). I think we should go the NumPy way. Here's the procedure to generate the API docs:\nhttps://github.com/numpy/numpy/blob/master/doc/HOWTO_BUILD_DOCS.rst.txt\nOnce done, I believe we should integrate API generation with Travis CI on every new release.. > So we will use Sphinx instead of Doxygen?\nYep! Closer to home ;).. Of course, in your own time.. It would be great if we can use readthedocs.io to share the documentation.. @rachmadaniHaryono see if you can share some part of the test framework for this. Somehow I like to avoid the dev writing the test cases for his/her code.. Ahh OK, got it! You suggested automated tests.. > BTW, if we're using numpy style docstrings, it sounds like we should use the numpydoc Sphinx extension\nPlease take your call. Just make sure we don't introduce too many extra chars for fancy stuff and increase the file size a lot. Even text processing takes time on slower systems. ;). The PR is reporting some conflicts in packagecore.yaml. Please check.. Thank you!. Buku supports importing/exporting the one universally understood format in the browser world - the Firefox standard. Wallabag should consider supporting it.\nWe do support JSON output, but there's no standard format to do that, remotely as massive as the html counterpart.\nProbably request the Wallabag team to handle bookmarks.html.. Thank you!. I think that's all there is to it. Closing the issue.. I think we can close this PR without merging. The README update is already in and I think we can skip the entry in operational notes as I added the note in Wiki as a part of system integration:\nhttps://github.com/jarun/Buku/wiki/System-integration#sync-bookmarks-with-a-web-service. Please go through my comments and make the changes accordingly. This is a VERY important feature. Anything odd in default colors can put off all the users and kill the utility.. @all I would love to keep the defaults similar to googler but am open to suggestions. I would like everyone to review this PR.. Also, flake8 check in Travis is failing due to some very long line. Please fix.. I'll take care of the rest of the changes. Thanks!. Thank you!. Thanks a lot for the painstaking work! Will review and merge this.. Also, how do we integrate this to readthedocs?. It's in the pipeline as @mosegontar mentioned. And I don't know much about that. The review request was more about checking if the params and signatures are intact and covered.. @mosegontar I have created the RTD account. When you generate the docs using sphinx, I can import the project there.. Thanks again for all the work done in this!. @mosegontar any progress on the sphinx front?. Looks great!!!\nFor the warning, please see:\nhttps://stackoverflow.com/questions/15249340/warning-document-isnt-included-in-any-toctree-for-included-file\nOK to ignore test cases.\nForget about the web APIs for now. We are not maintaining those, only for reference if anyone really needs to use Buku over the server.\nYes, feel free to add the opening paras.\nNote: Have as few as possible new files at root level. Hide configs under dirs if possible.. We would use RTD. I would really prefer if we can figure out a way to hide at least 1 file. If not at all possible, then we'll have it. But take a second look.. Simply awesome!. Thank you!. We have the doc here now: http://buku.readthedocs.io/en/latest/\nYes, the README is missing. We have to fix that. Takes away half the charm of it. ;). In addition, the code documentation is missing too.. Sorry, missed advanced setting.. Now I can see the code documentation for master (http://buku.readthedocs.io/en/latest/). Here are the final things I think we need:\n\nREADME doc. Once we have it we can remove the into at the top. The README has an introduction.\nstable build doc is not generated (http://buku.readthedocs.io/en/stable/). It would be great if we can have ONLY the last stable build doc.. OK. So only when I make a release it will be generated, right?\nI can move latest to private once that's done. \n\nTry generating from the .md and let's see how it goes. We do not use too many complex tags.. I have added you as a maintainer now. I tried the steps but it didn't work. Please check it out.. I tried to enable v3.2 as well: http://buku.readthedocs.io/en/v3.2/\nNo success.. I think that's the right behavior. Because we did NOT have any doc generation constructs till v3.2.\nstable will be built on the next release tag which will have the constructs.. Also, can you please enable the README?. Let''s wrap it up.\nThere has been many changes since last release and I would love to make a new one as soon as possible. #201 was blocking me but that's fixed now.. When you are done with the readme I can add a test tag and see how stable behaves.. thanks! i'll work on the FF parent folder as tag and try to finish that.. > I added recommonmark to requirements.txt\nThis is not a core Buku requirement. Can we add it in some other requirements.txt hidden somewhere?. Take your time. I will take some time to handle the FF folder as tag myself. ;)\nAlso you are added in RTD as a maintainer of Buku, you can tweak things yourself.\n\nIf you do put req.txt in docs or source, you just have to list the path in the RTD advanced settings\n\nI am not sure I understand this right now... I've been working the whole day on reworking the auto-import feature and I'm too tired to think about anything new. I am merging this, but here's my take:\nWHY should we add a dependency in requirements.txt if it's not required for buku to run? Why do people installing from PyPi have to install this on their systems if they don't need it?\nSo please move it somewhere else and make it work.\nWhen you tweak around you'll make changes. Raise the PRs and please approve yourself _for_this_feature. I may fall asleep anytime.. Awesome! :+1: \nThank you so much for the great work on this. ( I mean it.). Shouldn't the search page have something? http://buku.readthedocs.io/en/latest/search.html. :+1: . I think we are good for the next release on Monday morning IST.. Thank you very much!. browse() is a helper function. I believe you have two options here:\n- initialize the attribute in your module too as we are doing in main(). The attribute is added in the just-released version and is documented.\n- use your own function to invoke the webbrowser if the console browser case doesn't apply in your case.. > it does not mention that it should be initialized...\nI will add that right away. Thanks!. I have kept it enabled and a badge that links to it from our README. The reason it, it should not break on new patches. stable is the default.. Thank you!. There is nothing to make in case of Buku. You only need to run make install to install. Please follow the instructions:\nhttps://github.com/jarun/Buku#from-source. I'll check this.. LoL!!!\n$ sudo apt install gedit\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nThe following additional packages will be installed:\n  gedit-common gir1.2-gtksource-3.0 gir1.2-peas-1.0 gnome-user-guide libjavascriptcoregtk-4.0-18 libpeas-1.0-0 libpeas-1.0-0-python3loader libpeas-common libwebkit2gtk-4.0-37\n  libwebkit2gtk-4.0-37-gtk2 libyelp0 yelp yelp-xsl zenity\nSuggested packages:\n  gedit-plugins\nThe following NEW packages will be installed:\n  gedit gedit-common gir1.2-gtksource-3.0 gir1.2-peas-1.0 gnome-user-guide libjavascriptcoregtk-4.0-18 libpeas-1.0-0 libpeas-1.0-0-python3loader libpeas-common libwebkit2gtk-4.0-37\n  libwebkit2gtk-4.0-37-gtk2 libyelp0 yelp yelp-xsl zenity\n0 upgraded, 15 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 22.9 MB of archives.\nAfter this operation, 140 MB of additional disk space will be used.\nDo you want to continue? [Y/n]\nI remember I removed this bloatware on purpose.. Try any of the following:\nexport EDITOR='gedit -w'\nbuku -w\n\nor\nbuku -w 'gedit -w'. I am going to document this.. @lukaszkarbownik this is the correct behaviour. This is what we get: `<title>YouTube</title>`.\n\nEven in the browser (I checked with FF and GC) I could see Youtube first which gets updated (and replaced) later by the video title later which comes as:\ndocument.title = \"Some title - YouTube\";\n\nand shows as Some title - YouTube in the tab.\nComing to the UA string, fetching data from many websites fail without a true UA. It happened during my testing. We must to keep it.\nWhat we can do, however, is provide an option to disable the user agent and document this scenario with an example. This along with the --immutable option should be enough to handle situations like these.\nWould you interested in raising a PR?. Sample response: https://paste.ee/p/7qWaU. > Ideal solution would be either to replace current User-Agent value with one indicating a browser without JS engine, or add a flag that would trigger such behaviour.\nWe can add the user agent string of elinks (ELinks/0.12pre6 (textmode; Linux 4.4.0-43-Microsoft x86_64; 192x50-2)) as the optional user agent string. From my testing it seems it works. We can't make it permanent as it's difficult to predict definitively how every website treats a text mode browser.\n\nIt is likely that other websites may use the same mechanism so YouTube might not be the only website affected by this issue.\n\nPossible but may not be a frequent case given the age and user base of Buku (and the fact that this is the first report). Anyway, I believe the above arrangement will suffice.. I have tested with 350+ bookmarks and I didn't find any issue with using the user agent from elinks on Linux. So I am going ahead and making this change to use elinks user agent. This is somewhat driven by the fact I don't want to add an extra program option.. @shv-q3 on which platform is this happening?\n@alex-bender from the contents of profiles.ini it seems the default profile comes with a line Default=1. I think we should change get_firefox_profile_name() to return the full Path (from the line Path=6i3qgjrr.default where Default=1) and use it.. @shv-q3 can you please test the patch and confirm it works for you?\n@alex-bender I have pushed this interim patch because there was no timeline from you by when you'll be able to fix this critical issue.\nIf you are interested in implementing reading from the profiles.ini to get the default directory please let me know by when you'll be able to finish it.. Yes, I wasn't aware of the fact that the ini file says explicitly which is the default profile. As I see it's there, and is a good way to figure out the default profile.\nI am not sure when I will be available. Just leave your questions here.\nAlso, the platform may not be relevant. You can backup your .mozilla directory and make changes inside to match the scenario. As long as you don't run Firefox in between and replace back the original directory everything should be fine.. Raw parse. No extra deps.. Otherwise, is configparser module installed by default with python? In that case do a local import.. @shv-q3 Alex has raised a review already so I'm checking that. Please feel free to review the PR.. Please follow the PR guideline verbatim.. > According to your first comment, do you want me to add description?\nI want you to follow the PR guideline: https://github.com/jarun/Buku/wiki/PR-guidelines\nThe first section is PR comment. At the minimum, you have to add description, design notes and test cases you have run.. Test this PR without GC and FF installed as well. Cover as many negative test cases that comes to your mind and note them down.. @dertuxmalwieder if you have access to a Windows box, can you please test this change?. @alex-bender does it import the url https://docs.gitlab.com/ee/ci/quick_start/README.html or skips it? Please add a comment that mentions we are skipping sync_transaction_version.... Also, as I mentioned earlier, please update the main PR comment so anyone looking at it later understands what we are doing, the design, what we have tested etc.. Did you test this on OS X as well?. OK. Then testing on Windows is the only thing pending from my side.. I am assuming you have tested the cases without GC and FF installed as well.. Please note down all the test cases you have completed in the PR comment. tested this feature on Debian and Ubuntu doesn't tell what's actually tested.. > I've removed folders with bookmarks and tested\nThat includes the directory containing profiles.ini within, right?. I could not get hold of a Windows machine. We'll have to wait for @dertuxmalwieder's response.. Sure!. @mosegontar @rachmadaniHaryono @shaggytwodope @szlin can any of you test this auto-import patch (--ai) on a Windows box, preferably Win10? We need to check the following test cases:\n\nFF not installed\nFF installed but not started (so no default profile), otherwise just edit the profiles.ini\nFF installed but no bookmarks\nFF installed and has some bookmarks. @alex-bender please list the test cases you have run in the PR comment the way I have listed above. That makes life easier for everyone to figure out what else needs to be tested. I had a bad experience in the last release because I was lenient on the test coverage. Without the list, I am not merging this PR. I am completely fine with not having a problematic feature than make a release that falls flat on the face.. I have updated the PR intro with Windows 10 test cases.. Once the above log change and Ubuntu testing is complete, we are good to go! \ud83d\udc4d . @dertuxmalwieder hey no problem! I could grab a box from a friend for an hour :). Thanks anyway!. @alex-bender please update when you are done with the Ubuntu testing. Thanks a lot for your efforts!. @dertuxmalwieder there's something else I need your suggestion on. On Windows the color codes throw up and I had to use --nc to read stuff. How about setting --nc by default if the platform is Windows? We will show color only if there's --colors. What's your opinion?. @dertuxmalwieder Invoking an entire coloring subsystem would probably be a overkill. I suggested supporting --colors because there are Windows terminals (ConEmu for example) which can decipher POSIX color codes.. OK, we are both talking ConEmu. Yes, Windows users have to live with --colors for Buku. ;) Please check the option if you have some time.. Thanks for your contribution @alex-bender!. > One question is should we disallow the use of -p with the various search options?\n\nNope, if the user asks for it he knows what he wants. Leave it at that.\nI will have to go through this and review the code. Need some time. Remind in a day or two if I forget.. > However, it could make sense to use 10, 20, 30, 40 which would correspond to the same filters as 1, 2, 3, 4 but with the index omitted.\nYes, makes sense.. > Finally, a tangential issue\nThe condition checks should be first and the for loop within each condition as in https://github.com/mosegontar/Buku/blob/7dc61df6fc960e98e9503b54c95cfca6bcc7a270/buku.py#L1591-L1602.\nPlease make it uniform in both the places. I must have missed this earlier.\nReason: the for loop is constant. But you don't need to check 4 conditions in the worst case for each record. So first check the condition and then print within the for loop.\nAnd that's the reason calling print_single_rec_with_filter() for each row from a query is a bad idea. 4 checks for each row when we know ONLY 1 (the same) filter will be applied to all the rows!\nIf you really want to do that, break print_single_rec_with_filter() into 4/5 functions like print_single_rec_with_filter1(), print_single_rec_with_filter2() and so on... That way you can check the condition first at the top and call the right function for each filter in a loop.. Yes, this function should be fine.\nIs these a use case where you need to call print_single_rec() within print_rec_with_filter()? I thought if filter is 0 (default), we call print_single_rec() directly. As no filter is the most regular scenario, I would like to have a straight call to it instead of calling it within print_rec_with_filter().\nIn simple terms, we should have the regular cases working without too many branching and redirections (no roundabout calls).. No, I'm going back on my comment. Call print_single_rec within print_rec_with_filter. It's better to have only 1 API. Just ensure the default filter is 0 so print_single_rec remains the default case. That will take care of scenarios where no filter is involved. Please ensure you call print_rec_with_filter in ALL places where print_single_rec is called now.. Yes, leave it out.. I am attaching my bookmarks from FF and GC.\nbookmarks.zip\n. Thank you!. Please fix the Travis CI build issues.. I will test and merge this afternoon (IST). Thanks!. Thank you! This PR fixes #214.. No problem. I have reviewed the change. Please take a look.. Note: someone might come back someday asking to support another Windows terminal emulator like ConEmu. It would still work for them if ConemuDir is set as an env var.. We'll be done soon. I'm testing it.. Works fine in my testing on Ubuntu. Thank you!. Sure thing! Thank you so much for the change! I am extremely hesitant to make changes where I can't test. I think even @alex-bender doesn't have Windows.. less doesn't understand the ansi color codes and renders them raw. Run:\nbuku -p --nc | less\n\nI am unable to reproduce the exception with more or less. Did you wait for some time before pressing q. Please provide more details.. In addition to my last comment, how many bookmarks do you have?. In the meantime I tried with python 3.6 and still couldn't reproduce it.\nI think the number of bookmarks is the reason here. Would it be possible to share it (securely of course, not here)?. ~@mosegontar can you share your bookmarks db with me so I check the issue? ;)~. Leave it, I think we can handle the exception and exit gracefully. Clearly it's not an issue with print(), You quit without flushing the complete data to stdout, print() saw a broken pipe and reported it.. Please try the patch on master and let me know the results.. In the meantime, @hubitor when you have a 8000+ strong bookmarks set, would you be kind enough to run an auto update (have a copy of your original bookmark db) and confirm it works swell? The command is:\nbuku -u --tacit. try exiting once the broken pipe error is caught: sys.exit(1).... I have added it. Try latest master.. I think we can have it as long as we don't write anything to stdout and exit immediately.\n\nAlso, what happens with less?\nWhile you are it, can you please test if the same issue occurs if you apply a filter as well?. Please try latest master and confirm all the cases work.. > so that there's only one loop and print line.\nThis would need unlimited buffer. Can't do that.. I could reproduce the issue. The patch works fine.\n@rachmadaniHaryono to reproduce this I had to write a small script that generates bookmarks for Buku. I will add the script to the project this evening.\nI think it would be nice to make use of this script in Travis CI, generate hundreds of bookmarks (in any 1 python version) and run some tests like update, delete etc. Please take a look when the script is in and see if you can find some interesting test cases we can run every time in CI.. Thank you for testing the patch!. The error codes indicate that the URLs do not exist anymore or there is a server error. You have 8K URLs, there can be a substantial number of URLs which do not work anymore.\nWhen you say index 13 and 32 we wouldn't be able to make anything out of that. You have to at least share the URLs at those indices.. Also, the timeout for each URL is 40s after which Buku will stop trying to connect to it. And for 8K URLs, some amount of time is required to complete the refresh. As it is a silent refresh, it appears to be stuck but it's not. Buku refreshes in multiple threads and other threads would be running even if some are stuck.\nI think I was wrong in asking you to run buku -u --tacit. You should run:\nbuku -u. > How can I remove these URLs from buku?\n\nbuku -d _space_separated_ids_from_tacit_output_\n\nYou'll have to provide the IDs manually. Buku doesn't intelligently automate any operation that may lead to data loss.. > raise LocationParseError(url)\nThe problem is with about:newtab set as a URL. We will handle this.. Raised issue #220 to fix this.. We have identified the problem. Once we have a fix you can have that url as well. Thanks for sharing the details of the exception.. The exception should be caught in is_bad_url().. Sure! I can't be happier if collabs pick up issues.. @rachmadaniHaryono I don't think we need to do any special handling of these URLs. The reason is they are not really web URLs.\nI think we should add the following:\n\nadd about: to ignored_prefix in is_nongeneric_url()\nadd a call to is_nongeneric_url() in network_handler() [before the call to is_bad_url()] and return the tuple ('', 0, 1).\nhandle Exception in is_bad_url() and print 1. exact exception and 2. URL at logerr level.. Thank you!. Resolves #220.. @rachmadaniHaryono something is broken. Please check.. https://travis-ci.org/jarun/Buku/builds/287896964?utm_source=github_status&utm_medium=notification\n\nhttps://travis-ci.org/jarun/Buku/jobs/287896965. Seems fine. Also, we have several of test cases around parse_tags(). When you raise the PR those shall pass. ;). Including @rachmadaniHaryono. I have changed the title. Try to find as many optimizations as possible. We have been writing this for a long time. I am sure there are places where we could have done better.. @mosegontar are you working on this? If not, please raise the PR with changes you have already.. > Do you prefer that I raise small PRs as I find things?\nSure thing! I am closing this defect accordingly.. Thank you!. 1. You asked for the deletion of the bookmark at index 53 and it was deleted, How did you know you had to delete the bookmark at index 53 in the first place? And if you don't know that, why would you delete a random bookmark?\n2. If we wanted to do what you are asking for, we'll have to read the bookmark, which is an extra operation unrelated to delete.. What happens if you use sudo pip3 install buku?. I confirmed pip3works. Please use any of the documented mechanisms to install Buku.. Sorry, I can't allow a new dependency for this requirement. The same reason we had our custom code for markdown.. You need to have the dependencies installed. Please read the deps section in the project readme.. Indices are not tags. Even in the omniprompt switch g we use space-separation. Indices throughout buku are separated by spaces. Don't confuse it with anything else.. Thank you!. Thank you!. Are you interested in implementing the feature?. I'm afraid at this stage of the project we need a little more experienced hands. BTW, Buku doesn't store duplicate URLs. So the first URL and associated data would be stored, rest would be discarded. I've thought about merging earlier but then, as long as the URL is in (and the user thought at some point the entry is complete with the first set of data) I think we are reasonably safe.. That's great! Can you please share your AUR username so I can add you as a maintainer?. @putsan please contact the Solus OS team to add Buku to their repository. And probably some more of my utilities ;).. @jpdasma can you please share your AUR username?. @rachmadaniHaryono would it be possible for you to take care of the PyPi update? I am not expecting a next release of Buku soon.. @jpdasma that should be fine. There's one change in the last release of Buku you should be aware of - you can remove python-requests from the list of dependencies.\nI have added you as a co-maintainer on AUR. Welcome!. @rachmadaniHaryono we are not going to have a new release soon. The last release is not updated on PyPi yet.. @jpdasma that's awesome!. I have added you for the permission issues. Try once more. For the other part, do as you see fit.. No issues with loading here! \ud83d\udc4d \nWhere's the test.pypi file? Link please.. Ignore ;). As long as users can download the package we are good!. @mosegontar would you have the time to try the first item? I added it today.. Yes, your understanding is correct. \ud83d\udc4d \nAlso, we are using sqlite in Buku so research based on sqlite.. Please take your time.. I do not maintain any downstream packages. If you can maintin I have no issues.\nPlease ensure the changes in the codebase are minimal.\nGenerally I discourage snaps but Buku has a few deps so we can have it.. thanks @Aninstance and @rachmadaniHaryono!. @mosegontar would you have the time to work on the first item (paging support)?. @mosegontar Hey no problem!. Rolled at #251.. I don't think we can do this without changing the flow heavily. And we don't intend to do that at this stage of the project.\nYou are doing this manually. So, please run:\nbuku -w -1\n\nafter adding the bookmark to edit the last added bookmark.. Start with:\nbuku -w\n\nQuit without saving and the bookmark won't be added.. This is fixed on master. Thanks for reporting the issue.. This is added at 0d60a58adbd122e0112c52958213a79c22a5de42.. Thank you!. Don't we need sudo or something similar?. Thank you!. Oops! Wrong project. ;). Yes, we would need to write another google back-end which is beyond our capacity at current bandwidth.. > why this may be a bad idea\nBecause it defeats the purpose of Buku being a bookmarking utility and makes it a search engine. When the data becomes large we have to shift to better ways of processing large amount of data... sqlite may not remain the right tool anymore.\nWe have users who reported storing up to 40K bookmarks.\nThe main philosophy of Buku is to remain minimal.. > Import/export bookmarks from/to HTML or Markdown\n\nyou can export bookmarks from Buku to HTML or Markdown\nyou can import HTML or markdown formatted bookmarks to Buku\n\nThe method to import bookmarks from Buku to browsers ahs always been through Buku-exported HTML which browsers understand. Are you saying that doesn't work in FF 58?\nAlso, there's bukubrow.. You can export your bookmarks to HTML format first:\nbuku -e ~/bookmarks.html\n\nThen import the bookmarks from bookmarks.html using Firefox's bookmark import process:\n Ctrl-Shift-O -> Import and Backup -> Import Bookmarks from HTML...\n. You should never replace the bookmarks.html file manually.\n  . Thank you!. Thank you!. Works fine in my tests. Need to change double quotes to single in 2 places. I'll take care of that. Great work guys!. @mosegontar can you confirm if the following results match your expectation?\n```\n$ buku -s course\n1. NPTEL [179]\n\nhttp://nptel.ac.in/course.php\n   # computer science,interview\n\n\n\n50+ Free Online Course Torrents (Video Lectures) \u2013 Free Courses [185]\n\nhttp://freevideolectures.com/blog/2010/11/50-free-online-course-torrents-video-lectures/\n   # computer science,interview\n\n\n\nMost Visited Courses | MIT OpenCourseWare | Free Online Course Materials [341]\n\nhttps://ocw.mit.edu/courses/most-visited-courses/\n\n\n\nMost visited courses based on the site traffic of the previous month.\n   # computer science\n\n\nMachine Learning | Coursera [372]\n\nhttps://www.coursera.org/learn/machine-learning\n\n\n\nA Machine Learning course created by Stanford University.\n   # machine learning\n\n\nMachine Learning [375]\n\nhttps://www.edx.org/course/machine-learning-columbiax-csmm-102x-0\n\n\n\nMaster the essentials of machine learning and algorithms to help improve learning from data without human intervention.\n   # machine learning\n\n\nTeach Yourself Computer Science [407]\n\nhttps://teachyourselfcs.com/\n\n\nA well-designed Computer Science course.\n   # computer science\n\nbuku (? for help) S course\n1. NPTEL [179]\n\nhttp://nptel.ac.in/course.php\n   # computer science,interview\n\n\n\n50+ Free Online Course Torrents (Video Lectures) \u2013 Free Courses [185]\n\nhttp://freevideolectures.com/blog/2010/11/50-free-online-course-torrents-video-lectures/\n   # computer science,interview\n\n\n\nMost Visited Courses | MIT OpenCourseWare | Free Online Course Materials [341]\n\nhttps://ocw.mit.edu/courses/most-visited-courses/\n\n\n\nMost visited courses based on the site traffic of the previous month.\n   # computer science\n\n\nMachine Learning | Coursera [372]\n\nhttps://www.coursera.org/learn/machine-learning\n\n\n\nA Machine Learning course created by Stanford University.\n   # machine learning\n\n\nMachine Learning [375]\n\nhttps://www.edx.org/course/machine-learning-columbiax-csmm-102x-0\n\n\n\nMaster the essentials of machine learning and algorithms to help improve learning from data without human intervention.\n   # machine learning\n\n\nTeach Yourself Computer Science [407]\n\nhttps://teachyourselfcs.com/\n\n\nA well-designed Computer Science course.\n   # computer science\n\nbuku (? for help)\n```. Yes, it is correct. Can you please update the operational notes search section with the new behviour? Please be as precise as possible.. Don't worry, I will shorten if required. Thanks for the update.. See now. ;). Thank you very much!. First read the installation instructions. If none of the ways suit you then you should find your deal somewhere else.. Awesome! Thank you!\nIf you are a packager, please consider packaging some of my other utilities on Gentoo:\n\ngoogler\nddgr\nimgp\nbcal\npdd\n\nAll of these are accepted on Debian and Ubuntu families. The releases are stable.\n. Thank you!. > or if you want you could do it\nI can't... maintaining 7 packages with a full time job and a 4 year old is tricky enough already.. BTW, the Buku version on Gentoo is outdated. Please update.. 1. you typed buku -d\n2. you pressed y\n3. you pressed Enter\nand you claim it's accidental???\n...and you intentionally add No confirmation in the subject. :)\nI don't see any issue with the current behaviour.. If the earlier db exists, it won't be overwritten. On creation of a new DB, the user is notified.\nPlease share the correct workflow.. What is the name of the backup file?. There is a specific check to confirm if the file exists:\nhttps://github.com/jarun/Buku/blob/master/buku.py#L478\nIf it exists we don't even proceed with DB creation. Doesn't matter if it is the original file or the backup file. So I am not sure I clearly understand your issue.\nHow is it related to the issue you have raised? If the file /home/q/.local/share/buku/bookmarks.db exists, we don't try to overwrite it or ask any question to user. Where did you find Press y in this workflow?. In addition to my last comment,\n\nwhich version of Buku are you using? The latest is v3.6.\n\nwhich files are present at /home/q/.local/share/buku/?. Thanks for confirming!. @yigitemres it's really simple to achieve that without an extra option (there are many options already and -f is also taken). You can use a simple script.\n!/bin/bash\nrm bukulist.md\nbuku -e bukulist.md. v3.2 is too old. Please try the latest released v3.6. I couldn't reproduce the issue with v3.6.. Closing this as the issue is not reproducible with the latest version.. This is not available at the moment. You can either search all fields or only tags. Filtering is supported for tags-only (see examples 19-21).\n\n\nIt will be good to add this feature. I will add it to the ToDo list. If interested, please raise a PR.. I have added the changes needed to handle each search option with different sets of keywords at commit https://github.com/jarun/Buku/commit/912b147bfec8ee11f841cbac02375cf1c4fbb106. This had to be the first thing to be fixed in order to support your request.. No problem @alex-bender!. @BlackLotus this feature is implemented at https://github.com/jarun/Buku/commit/f804233ef966382346c66b7e654de378abe1ade6.. Awesome!!! We must have it in the main project :). Probably we can add a directory named buku_server and have the implementation there. Slowly you can add the functionality we have in core. I am pathetic with GUI stuff but I believe we will get contributors as we keep adding ToDo items.. buku_server would be fine.\nWhere do I run the command buku-api run --host 0.0.0.0 in your tree?. > buku_server would be fine.\nI meant we can rename api to buku_server.\n\nthe run the command\n\ncool!. How about bukuserver in both cases?. Sorry, Friday night is family movie time and I was off the terminal! :) We watched Paddington 2.\nI guess we need to document all the steps under a README.md under bukuserver directory and link to it from the main README.md. Not urgent, but eventually.. :+1: . Try\ngit remote add upstream ...\n\nOtherwise, wait till we merge this on Buku master branch and then you can test it out much easily.. We don't know at this moment. Please have patience.. Fine by me. Not a major issue.. @SaltyCatFish that would be awesome!. > So that bookmarks can be integrated with GTD.\nwhich service is GTD?. OK, I have an idea now. How about importing a .org file?\nAlso, would you raise a PR for this?. @SaltyCatFish can you please let us know how you are planning to implement paging? We can have a short review of the design and all of us can be on the same page as to what we expect. Please raise an issue for the discussion and add the details so we can review it.. \ud83d\udc4d . @SaltyCatFish any update on the paging task?. No problem! I know it's tricky. You can get some clues from ddgr interface and code.\nThanks for the update!. @SaltyCatFish any update on paging?. > if anyone else wants to tackle this request, feel free\nI don't think it's happening... even I have one pending task and I can't find time due to other things... but please try to spare some time on it.. The results should be paged:\nbuku -n 10 ...\n\nshould show 10 results per page and one should be able to navigate with the n and p keys at the prompt. Just run googler and ddgr for a feel of it.. We do not track usage data. If we want to have this feature (and it looks great) we should have it disabled by default and enable only if user wants it.\n\nplugin\n\nthere are issues around the DB desing as well\nshared DB: pugin may corrupt it\nseparate DB: plugin may get out of sync. > and the result is not saved anywhere\nThen how do you get the count? I am missing something here for sure.. If the server goes down, the data would be lost, right?. I think if we add this feature, users may want the data to be persistent. Hence, at some point we will have to work on making it persistent and add that option to enable it.. Rolled at #268.. Thanks for the PR!\nI believe this one implements the exclusion of specified tags. We would also need the intersection i.e. records matching the keywords and having the specified tags.\nCould you kindly add that? Please note that users can already use + and - in option -t to specify which tags to include and exclude. We might need some option to say we need the tag search matches filtered out or in.. ... or we can only have the intersection operation and let users specify in the -t option how to match the tags which would give us total matches intersection tag matches (according to user preference).. By intersection I meant -\nset 1 - results from the keyword search\nset 2 - results from the tag search\nintersection - whatever is common to both set1 and set2.\nWill the current subtraction operation on the 2 sets do that?. I think the following should work:\nlist(set(sany_results) & set(stag_results)). I think we can handle it by changing the current `-` to `&`.\n\nSo,\nbuku hello world -t tag1 + tag2\nand\nbuku hello world -t tag1 + tag2 - tag3\nwould both work because the tag filtering (in -t) takes care of excluding or including the relevant tags.. Travis CI is failing because of a minor lint issue from the PR.. There are other review comments which you might have missed. I will take care of those. mergig the PR. Thank you!. @mosegontar could you please take a look? It seems we need to tweak prep_tag_search to handle multiple tags separated by -. It should also work with the following patterns:\n+ - + -\nand\n- + - +. I think for simplification we should support just:\n\n+ tag4\ntag1 + tag2 - tag3 - tag4\n- tag4. OK, I see that exclusion list can be separated by , however the the check for both + and , comes before that and trumps it.. @rachmadaniHaryono we need test cases for the api prep_tag_search().. Thank you!. I will add the default values.. Awesome! Thanks for taking care of this!\nThere are a few lint issues why Travis CI is failing. Please fix.. Thank you!. I can't thank you enough for this PR. I will review it soon. :+1: . Would you be interested in becoming a collaborator to Buku? I would be glad to send out an invite.. Done!\nWould it be possible to achieve this in a single DB query like we do for tags? For example:\n--sall word1 + word2 + word2 - word4, word5\n\nsays that we want records matching all keywords word1, word2, word3 and without the keywords word4, word5.\nPlease take a look at search_by_tag() implementation. It's much better than the implementation we have in searchdb() IMO. I would love to have searchdb() working the same way.. :+1: . However, do keep the new option -w as + and - can be in deep searches and it's better to avoid them for our internal use.\nThat way you have two distinct lists and no need to parse through them as we do for tags.. >  It may be slightly faster to do in one query\nThere are Buku users who even have 40K bookmarks. That's the reason I would prefer not to run more than 2 queries. The workflow I am speaking of is:\n\n-s [list of keywords to include] -w [list of keywords to exclude]\ngenerate the query like in search_by_tag(). We don't need something like prep_tag_search() because we already receive two separate lists\nrun the query\nreturn resultset\nset(resultset) - set(tag_resultset)\n\nAre you suggesting this wouldn't work the same way tag search works using a - SELECT ... (SELECT *, CASE WHEN ..., AND ... NOT LIKE ... ORDER by SCORE DESC)?. > If the goal is to run no more than 2 queries, thats met with the current pull request.\nThis one along with tag filtering makes it 3.\nHowever, the PR meets the original requirements. Let's have this and if someone complains about performance, we can enhance it at that point.. Self note: need to update man, README, completion scripts.. Thank you!. @rachmadaniHaryono do you need any immediate help with this? If yes, can you please list the items?. @SaltyCatFish is there a way to run queries and retrieve results in batches rather than all at once? We need paging badly it seems.\nWhat I have in mind is like:\n\nrun query, limit results to n\nquery returns n results\nin the next iteration pass n and get the next n results\n\nis it possible to do that?. I am planning to make a release tomorrow. So this one + fetch n records at a time etc. would be for next release.\n@rachmadaniHaryono can you please add some quick test cases for commit 0997452315a755ddd6beca132e5a614540b64114 before the release? Just want to ensure things work as expected.. > i have seen that commit, other than main function there is nothing else to test. our main function is currently not tested due to how complex it i.\nI missed that. Thanks!. I would leave the server changes out of this release.. @tom-i there's no confusion here. The feature is a work in progress and of considerable volume. We do not push out unstable features. On the other hand, it would be great if you could assist @rachmadaniHaryono on the testing part where he needs help at the moment. As I understand, your initial setup problems are solved now.. Add a section: Run buku as a server\nand add the relevant instructions. Add something, we will review and update.. > better way on template\nfor now, what you have is fine.. @tom-i awesome! we can always do with some extra helping hands!. > Anyway, so installation steps should be in some documentation? Or should I make same steps as I did before?\nAdd a section in the README.md.\n\nSo in virtualenv install required packages and then run ./server.py run --host 0.0.0.0 from api directory right?\n\nYes, please mention the name of the required packages also.. OK. Please provide the commands is all I ask.. @rachmadaniHaryono is it OK to pull this in? Don't worry about the orgfile mess. I will take care of cleaning it up post merge.. Thank you!. It's a very minor change and openSUSE is a popular distro. Rejecting the PR.. The Fedora link and command came together.\nAlso, the reasons you are giving now should have come in the PR description (the python3-buku reason does make sense). You didn't even read the first few lines of the PR guideline.. Let's do one thing. Can you add the commands for the remaining distros and update the PR?. > I did.\nNo. Because it starts with:\nPR comment\n\nDescription\nPlease provide an elaborate description of the problem you are trying to solve.. > Why have it for some and not others? Why not be consistent here?\n\nYou are right. I have added the commands for all of them now.. I wanted to add this for my other packages and now I found another problem. Some of them are not available in the official repos yet. Some are in experimental status. I think that's the reason those were added without the commands earlier.\nIf you have some time, would you be interested in submitting some of them to openSUSE?\nAlso, if a package is in experimental status (e.g. https://software.opensuse.org/package/googler?search_term=googler) can it be installed with a single command (e.g. zypper in googler)?. > I can take a look. Generally I try to only maintain packages that I also use.\nThat would be great!\nThanks for the details! I'll check out.. Hi @jubalh is it possible to rename the opensuse package for buku to simply buku instead of python3-buku? It's the same thing our packager does for googler- https://software.opensuse.org/package/googler?search_term=googler.\nThe name looks very odd. How do users run it? python3-buku?. > I will contact the maintainer and ask what he thinks.\nThanks!. @luigino yes, it would be great if we can rename it to Buku.\n@jubalh can you please maintain it?. @jubalh waiting for your confirmation on this.. @jubalh Thanks for the update!\n@luigino would it be possible for you to rename it for now?. I will complete all the reviews in the coming weekend.. @tom-i please close this PR and submit the changes to https://github.com/jarun/Buku/blob/master/bukuserver/README.md. Add the changes to bukuserver/README.md.. Travis is failing due to lint issues. Please fix.. Please add notes on .org in program help, same goes to README and the manpage. Search for markdown and you will find the places to update. Also, please update the examples on import and export in readme and manpage.. I have reviewed the PR, a minor change is required.\nBTW, would you be interested in becoming a collaborator for Buku? I'll be glad to send out an invite.. Sent the invite. :+1: . Thank you for your contribution!. @tsaoyu any update on the test cases?. @rachmadaniHaryono I don't think we can keep waiting for devs to get back. I am reverting this PR (throwing it out of git history as well).. Please take a look at example 29 in the README.. Thank you!. This is now at f5dda19128c4cc30a597bd416132143e88080e6d.. Looks good! @rachmadaniHaryono if this is fine with you please merge.. @tom-i it's reviewed. Please make the changes so @rachmadaniHaryono can approve and merge it.. @tom-i any update on this?. Otherwise, @rachmadaniHaryono can you please merge this and change the section you commented on?. No need to make a new PR. @rachmadaniHaryono asked for some change with setup.py usage. Let's wait for him to get back on this.\nOther, @rachmadaniHaryono can you share the patch here so @tom-i can make the change and update the PR?. Thank you!. Please raise a PR so we can review.. Will be addressed in https://github.com/jarun/Buku/pull/266.. Also, please update the second point here: https://github.com/jarun/Buku/wiki/Operational-notes#tags. In the wiki we need to update that subfolders are also added as tags.\n\nWhat is the procedure for creating a new zip file to use for the tests?\n\nDownload the zip and import to firefox. Add bookmarks to subfolders so you can test this change and export the bookmarks again. Update the relevant test case.\nPlease share the zip with us here so @rachmadaniHaryono can re-upload it again.. > it is the pickled dictionaries that need to be adjusted\nit may sound strange but I am not a pythonsia. Can you please explain in regular terms what the problem is?. Also, please check why Travis CI build is failing.. > known as pickling\nAwesome, thanks for explaining. All this magic belongs to @rachmadaniHaryono and I think he has explained above. :). > I'll look into merging that in and adopting it as soon as work lets up a bit.\nAwesome! Thanks!. One more thing, the note on subfolders should go to operational notes (tags subsection, point 2) in the manpage as well.. @eikenb are you seeing any issue? I can handle the documentation if you would like.. I will take care of the wiki, doc changes.\nPlease rebase your code to latest master. The PR is showing too many diffs.. @rachmadaniHaryono can you please review this one?. Thanks guys!. We have another PR for bukuserver that we need to merge first.. Megalike! :+1: . Thank you!. I misunderstood the statistics proposal earlier. It's aswesome @rachmadaniHaryono!. It would be great if one can click on the circle and open the corresponding bookmarks.. > Maybe I can add that on next pr\nThat would be great!. I think model 2 without favicon and short netloc is model 1, right?\n\nif we add favicon do we have to fetch for every bookmark each time?\nonly configure each part of bookmark view should be fine. We should see if we really need to provide any configuration options. We should keep minimal.\nkeep netloc only, and show full link on mouse hover. Saves space.\nI think we can have a config to show or not show description OR we can limit the desc to 1 line by default and expand on click (I am not sure of the effort).\nsame sell and in model 1 or 2. If there are 2 many tags the vertical height would be too much.. - fetching favicon seems fine then\ndon't do anything. each browser show link (on chromium it is bottom left) when mouse over the link. (this one)\nthrough css. related https://stackoverflow.com/a/1318119/1766261 (this one would take care of variable page size too)\nfor expand on click maybe bootstrap's collapse https://getbootstrap.com/docs/3.3/javascript/#collapse (good and we don't need a config anymore)\nuse os env variable. this is similar to flask setting (this). @rachmadaniHaryono once these are done we can plan for the next release. The server seems to be in good shape. What do you think?. Cool!. > I don't think Bukubrow's Cargo.lock structure will work with *BSD OS\n\nPlease check with the Bukubrow project on this one. And to be frank I don't see the need for another browser plugin. You can add any bookmarks you want directly to buku from the browser oR import later OR export from Buku to the browser later.\n\nScrapbook function: Preserve page or site, index it as special BM with option to not refresh (immutable).\n\n@rachmadaniHaryono I believe he is requesting for this flag on the webpage. We already have immutable support at an API level.\n\nUser based authentication if needed, for multiple users from webapp interface. Probably difficult, as DB structure will need some modification, location of buku.sqlite becomes issue, and \"run-as user\" must be addressed?\n\nIs there a web-plugin with it's own database and can handle this? Otherwise, we can add this to the ToDo list for bukuserver. It makes the server operations truly private.\n\nPDF: Save single web page as pdf, then text search ability for saved/indexed pdfs.\n\nRe-iterating - we are not writing a private google search engine alternative. Use the notes field for additional text.\n\nNote taking: If working on a specific topic, you want to jot down notes and place urls relevant to topic inside the notes.\n\nPlease use the notes option and relevant tags.. Are duplicate tags parsed out and final tags ordered?\nIf you call parse_tags() all the duplicates will be removed and they will be ordered.\nYes, I think preserving all tags is a great idea.. Yes it does. Just wanted to ensure. Didn't look at the code. :). @kirakrishnan I guess the core library is already quite matured and stable. I was thinking of pagination but I guess the server with GUI already does it very well.\n@rachmadaniHaryono do you have anything in the server side... or need help with testing the features?. @kirakrishnan let us know if you are interested in the items @rachmadaniHaryono mentioned and more importantly, you think you can handle those. If not sure, feel free to ask.. @rachmadaniHaryono can you check if it's possible to create small tasks for the items?. @rachmadaniHaryono seeing that you have responded 4 days back without any reply yet, I believe @kirakrishnan has demonstrated his enthusiasm. Please work on the ideas yourself.\nPeople tend to love the idea they would write amazing code in amazing projects, only they never really find the time to start. ;). > will be late for this and not sure how long.\nno hurry! we just made a release.\n\nthis may affect that image/screenshot task for bukuserver.\n\nwe need the screenshot as soon as possible. people are visiting the page and don't know what to expect. not everyone would install a sever by looking at the description, they need something more attractive than that.. Updated the documentation at c1c43a006e0d646aeb3a7161cdfd96b989e6f632. Please review.\nMoved it to markdown as the main page is also in markdown.\nIs there a working alternative to imgur? I used another site earlier but it went down. imgur still lives. ;). OK!. Can you please add server-side identified tasks to the task list? In case someone wants to contribute.. I think you'll have to make the points more elaborate. For example:\n\ndesigning the additional database - which database, where does it help etc.\nadding more javascript capability - which capability\n\nlike that.. I saw that earlier but left untouched. Closed the issue.. I don't think they will remove the particular field from the specification. They will probably stop importing the description field.. I have added a new item in the ToDo list, thanks to your link. ;). @jpdasma please go ahead. That would be a great boost to user experience.. Sorry, at this stage of the project I wouldn't like someone to spend valuable bandwidth on interface. There are many features to be implemented.. Rolled at #343.. > out of topic, any plan to add netloc search @jarun?\nWhat's that? Please explain.. But how useful would it be?. OK. Then let's wait till someone asks for it.. Thank you!. OK :+1: . Hi,\nthe content is loaded through js and there no title tag. Here's the raw page:\n<!DOCTYPE html>\n<html lang=\"en\">\n<meta charset=\"utf-8\">\n<meta name=\"description\" content=\"Gerrit Code Review\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0\">\n<script>window.CLOSURE_NO_DEPS = true;window.VERSION_INFO = '488.0';</script>\n<link rel=\"icon\" type=\"image/x-icon\" href=\"/favicon.ico\">\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/RobotoMono-Regular.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/RobotoMono-Regular.woff\" as=\"font\" type=\"font/woff\" crossorigin>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/Roboto-Regular.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/Roboto-Regular.woff\" as=\"font\" type=\"font/woff\" crossorigin>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/Roboto-Medium.woff2\" as=\"font\" type=\"font/woff2\" crossorigin>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/fonts/Roboto-Medium.woff\" as=\"font\" type=\"font/woff\" crossorigin>\n<link rel=\"stylesheet\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/styles/fonts.css\">\n<link rel=\"stylesheet\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/styles/main.css\">\n<script src=\"https://cdn.googlesource.com/polygerrit_ui/488.0/bower_components/webcomponentsjs/webcomponents-lite.js\"></script>\n<link rel=\"preload\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/elements/gr-app.js\" as=\"script\" crossorigin=\"anonymous\">\n<link rel=\"import\" href=\"https://cdn.googlesource.com/polygerrit_ui/488.0/elements/gr-app.html\">\n<body unresolved>\n<gr-app id=\"app\"></gr-app>. Thank you!. I'm planning to make a release today. There's a lot we have done with bukuserver. So gear up to handle any issue reports. ;). @rachmadaniHaryono for our release CHANGELOG, can you please consolidate and note down what all changes are done in bukuserver?. This is fine. is this the complete list?\nNo need for a PR. This has to go to the release CHANGELIST file. Take a look into it.. @rachmadaniHaryono At every release, we list down the new features available to users in the CHANGELOG. I am looking for a list of such features.\nFor example, statistic page on bukuserver is a feature visible and usable by the users and will go to the changelist but requirement package is included on setup.py as extra is not.. Yes, this is fine. Would you like to add something else or this is the complete list?. :+1: . Thank you!. We'll have to wait for the release till a packagecore issue is fixed.\nhttps://github.com/BytePackager/packagecore/issues/144\nAlso the pypi package is yet to be update for packagecore so we can build for Fedora 28.\nI'ld also like to have the support for CentOS 7.1 in:\nhttps://github.com/BytePackager/packagecore/issues/143. Thank you!. @rachmadaniHaryono please check.. > just let @stkw0 clone the repo\nThis!\nThanks @rachmadaniHaryono!. Thanks!. Thank you!. We have an issue. I'll have to revert this and handle it in a different way. Never add images to a repo. We have imgur to host images and then we can link to that. ;)\nI will take care of it.. I think it's good time to convert to markdown as well.. Thank you!. @rachmadaniHaryono please take a look.. I will take care of it.. The screenshots will now be hosted on imgur and we won't have the directory.. No, it can't be customizable.. @rachmadaniHaryono any update on this?. OKK. I will merge now. No hurry!. @rachmadaniHaryono I have accidentally overwritten this PR. Can you please raise the PR again?\nAlso, would it be possible to reduce the size of the .js files or avoid them? It would be good to keep the size of the blob less.. > Or we can ignore debian gudeline. What do you think?\nWe can't. That's what we stand for. :)\nBut tell me something, is it possible to keep the directory archived (say zipped) and extract during deployment?. I guess it's better to maintain the current status because all the above options have limitations.. > I still haven't found, though, a way to add a bookmark with multiline comment from terminal. Is it possible to do that (possibly in a convenient, copy&paste-like way)?\nPlease check the first example: https://github.com/jarun/Buku#examples\nYou can use your favourite editor to do this (even GUI editors work).. Closing as the query is answered.. I will check it. Fun fact - I have a tag for C++ things... and it's cpp!!!. This is now fixed. Please test and confirm.. @rachmadaniHaryono can you please check this?. Thank you very much! \ud83d\udc4d . The changes look fine to me. Thanks a lot!. @rachmadaniHaryono I have assigned this to you. Please add urllib3 as a mandatory dependency in PyPI. Most things do not work without it.. I have added the other 2 deps as mandatory as well.. The build is breaking with the PR. Please check.\n\ndo you want to test with python3.7?\n\nHow about enabling it on Travis? ;). Thank you!. @zmwangx can you please check this?. Adding @ilovezfs as well if he can help with this.. Closing this as no response. Please feel free to reopen with more info.. Please cite an example. Does setting the locale correctly help?\nchardet is an external dependency that doesn't come with python. The build fails and we don't want to add external deps at random.. Please check if commit 9057d85d28f8c74f6a1c93d77fce5635a6d474cf helps. Otherwise, please share an example we can try.. Hold on guys.... Please try with 69281444fd74bc135c9fc763c49e5475e7c11e4b. it should work.\n@dkiyatkin I would like the following in the PR:\n\n\nBefore the content-type field, we should check if meta charset is present and use it if present. The first link you shared has it. This check makes our detection much more complete.\n\n\nuse \\s{2,} to catch doubled whitespaces\n\n\nCan you please update the PR accordingly?\nAnd many thanks for catching this issue!!!. I think we can ignore the charset meta detection. Google also seems to return it in the content-type field.. The link you have shared for double space has a newline in the title!!!\n<head>\n    <title>\n      html.css in webkit/trunk/Source/WebCore/css\n     \u2013 WebKit\n    </title>\n      <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n      <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" />\nI don't think we have to make do for poor choices of page titles. We can accept them as they are without any modification. If the site owners think double spaces and newlines are OK to be included in the titles, why do we bother?\n@rachmadaniHaryono can you please add a test case with the first link (http://4pda.ru/forum/index.php?showtopic=182463&st=1640#entry6044923) for charset detection?. The intention of the test case was probably:\n\npass None as title and fetch the title from the webpage\nmatch the title with Google\n\nHowever, I think fetching the subject fails. I have already tried with None. Not sure why the fetch fails... I can see the warning due to SSL but the fetch used to work earlier.\nI think we can remove this case.. Thank you!. I will look into it.. vim.org sends:\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=ISO-8859-1\">\n\nI think the space between text/html and charset=ISO-8859-1 makes it fail because the content-type string is returned as just text/html and the rest is missing.. printing resp.headers:\nHTTPHeaderDict({'Server': 'Apache/2.4.10 (Debian)', 'Date': 'Wed, 01 Aug 2018 10:21:09 GMT', 'Content-Language': 'ja', 'Transfer-Encoding': 'chunked', 'Content-Type': 'text/html'}). Fixed at 92c6e5c7c7ee8b7e00088ae5dfb5f9a76572d19f.. Will check, thanks for the defect report.. @in-in please consider submitting a new defect instead of appending to a closed. It becomes very difficult to remember where a comment was.. The first link has certificate related issues:\n\n```\nbuku -a https://www.debuggex.com/ -z\n[DEBUG] Version 3.8\n[DEBUG] netloc: www.debuggex.com\n[DEBUG] Starting new HTTPS connection (1): www.debuggex.com\n[DEBUG] Incremented Retry for (url='/'): Retry(total=2, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)'),)': /\n[DEBUG] Starting new HTTPS connection (2): www.debuggex.com\n[DEBUG] Incremented Retry for (url='/'): Retry(total=1, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)'),)': /\n[DEBUG] Starting new HTTPS connection (3): www.debuggex.com\n[DEBUG] Incremented Retry for (url='/'): Retry(total=0, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)'),)': /\n[DEBUG] Starting new HTTPS connection (4): www.debuggex.com\n[ERROR] network_handler(): HTTPSConnectionPool(host='www.debuggex.com', port=443): Max retries exceeded with url: / (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:645)'),))\n[DEBUG] Title: [None]\n417. Untitled\n\nhttps://www.debuggex.com/\n```\n\nThe second link works with https (on released v3.8):\n```\n$ ./buku.py -a https://wikemacs.org/wiki/Starter_Kits -z\n[DEBUG] Version 3.8\n[DEBUG] netloc: wikemacs.org\n[DEBUG] Starting new HTTPS connection (1): wikemacs.org\n/usr/local/lib/python3.5/dist-packages/urllib3/connectionpool.py:858: InsecureRequestWarning: Unverified HTTPS request is being made. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings\n  InsecureRequestWarning)\n[DEBUG] https://wikemacs.org:443 \"GET /wiki/Starter_Kits HTTP/1.1\" 200 5720\n[DEBUG] Title: [Starter Kits - WikEmacs]\n417. Starter Kits - WikEmacs\n\nhttps://wikemacs.org/wiki/Starter_Kits\n```. For the second link, with our latest on master:\n\n```\n$ ./buku.py -a https://wikemacs.org/wiki/Starter_Kits -z\n[DEBUG] Version 3.8\n[DEBUG] netloc: wikemacs.org\n[DEBUG] Starting new HTTPS connection (1): wikemacs.org\n[ERROR] Certificate did not match expected hostname: wikemacs.org. Certificate: {'subject': ((('organizationalUnitName', 'Domain Control Validated'),), (('organizationalUnitName', 'PositiveSSL Wildcard'),), (('commonName', '.web-hosting.com'),)), 'serialNumber': '0C1D689D8A914A7C5F4E361685799FE4', 'issuer': ((('countryName', 'GB'),), (('stateOrProvinceName', 'Greater Manchester'),), (('localityName', 'Salford'),), (('organizationName', 'COMODO CA Limited'),), (('commonName', 'COMODO RSA Domain Validation Secure Server CA'),)), 'subjectAltName': (('DNS', '.web-hosting.com'), ('DNS', 'web-hosting.com')), 'OCSP': ('http://ocsp.comodoca.com',), 'caIssuers': ('http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt',), 'crlDistributionPoints': ('http://crl.comodoca.com/COMODORSADomainValidationSecureServerCA.crl',), 'version': 3, 'notAfter': 'Apr  4 23:59:59 2020 GMT', 'notBefore': 'Feb  6 00:00:00 2018 GMT'}\n[DEBUG] Incremented Retry for (url='/wiki/Starter_Kits'): Retry(total=2, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(CertificateError(\"hostname 'wikemacs.org' doesn't match either of '.web-hosting.com', 'web-hosting.com'\",),)': /wiki/Starter_Kits\n[DEBUG] Starting new HTTPS connection (2): wikemacs.org\n[ERROR] Certificate did not match expected hostname: wikemacs.org. Certificate: {'subject': ((('organizationalUnitName', 'Domain Control Validated'),), (('organizationalUnitName', 'PositiveSSL Wildcard'),), (('commonName', '.web-hosting.com'),)), 'serialNumber': '0C1D689D8A914A7C5F4E361685799FE4', 'issuer': ((('countryName', 'GB'),), (('stateOrProvinceName', 'Greater Manchester'),), (('localityName', 'Salford'),), (('organizationName', 'COMODO CA Limited'),), (('commonName', 'COMODO RSA Domain Validation Secure Server CA'),)), 'subjectAltName': (('DNS', '.web-hosting.com'), ('DNS', 'web-hosting.com')), 'OCSP': ('http://ocsp.comodoca.com',), 'caIssuers': ('http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt',), 'crlDistributionPoints': ('http://crl.comodoca.com/COMODORSADomainValidationSecureServerCA.crl',), 'version': 3, 'notAfter': 'Apr  4 23:59:59 2020 GMT', 'notBefore': 'Feb  6 00:00:00 2018 GMT'}\n[DEBUG] Incremented Retry for (url='/wiki/Starter_Kits'): Retry(total=1, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(CertificateError(\"hostname 'wikemacs.org' doesn't match either of '.web-hosting.com', 'web-hosting.com'\",),)': /wiki/Starter_Kits\n[DEBUG] Starting new HTTPS connection (3): wikemacs.org\n[ERROR] Certificate did not match expected hostname: wikemacs.org. Certificate: {'subject': ((('organizationalUnitName', 'Domain Control Validated'),), (('organizationalUnitName', 'PositiveSSL Wildcard'),), (('commonName', '.web-hosting.com'),)), 'serialNumber': '0C1D689D8A914A7C5F4E361685799FE4', 'issuer': ((('countryName', 'GB'),), (('stateOrProvinceName', 'Greater Manchester'),), (('localityName', 'Salford'),), (('organizationName', 'COMODO CA Limited'),), (('commonName', 'COMODO RSA Domain Validation Secure Server CA'),)), 'subjectAltName': (('DNS', '.web-hosting.com'), ('DNS', 'web-hosting.com')), 'OCSP': ('http://ocsp.comodoca.com',), 'caIssuers': ('http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt',), 'crlDistributionPoints': ('http://crl.comodoca.com/COMODORSADomainValidationSecureServerCA.crl',), 'version': 3, 'notAfter': 'Apr  4 23:59:59 2020 GMT', 'notBefore': 'Feb  6 00:00:00 2018 GMT'}\n[DEBUG] Incremented Retry for (url='/wiki/Starter_Kits'): Retry(total=0, connect=None, read=None, redirect=None, status=None)\n[WARNING] Retrying (Retry(total=0, connect=None, read=None, redirect=None, status=None)) after connection broken by 'SSLError(CertificateError(\"hostname 'wikemacs.org' doesn't match either of '.web-hosting.com', 'web-hosting.com'\",),)': /wiki/Starter_Kits\n[DEBUG] Starting new HTTPS connection (4): wikemacs.org\n[ERROR] Certificate did not match expected hostname: wikemacs.org. Certificate: {'subject': ((('organizationalUnitName', 'Domain Control Validated'),), (('organizationalUnitName', 'PositiveSSL Wildcard'),), (('commonName', '.web-hosting.com'),)), 'serialNumber': '0C1D689D8A914A7C5F4E361685799FE4', 'issuer': ((('countryName', 'GB'),), (('stateOrProvinceName', 'Greater Manchester'),), (('localityName', 'Salford'),), (('organizationName', 'COMODO CA Limited'),), (('commonName', 'COMODO RSA Domain Validation Secure Server CA'),)), 'subjectAltName': (('DNS', '.web-hosting.com'), ('DNS', 'web-hosting.com')), 'OCSP': ('http://ocsp.comodoca.com',), 'caIssuers': ('http://crt.comodoca.com/COMODORSADomainValidationSecureServerCA.crt',), 'crlDistributionPoints': ('http://crl.comodoca.com/COMODORSADomainValidationSecureServerCA.crl',), 'version': 3, 'notAfter': 'Apr  4 23:59:59 2020 GMT', 'notBefore': 'Feb  6 00:00:00 2018 GMT'}\n[ERROR] network_handler(): HTTPSConnectionPool(host='wikemacs.org', port=443): Max retries exceeded with url: /wiki/Starter_Kits (Caused by SSLError(CertificateError(\"hostname 'wikemacs.org' doesn't match either of '.web-hosting.com', 'web-hosting.com'\",),))\n[DEBUG] Title: [None]\n417. Untitled\n\nhttps://wikemacs.org/wiki/Starter_Kits\n```. We have enabled strict SSL certificate verification on master. Sites with certificate issues would fail.. Makes sense. Please raise a PR from the same. use the method @rachmadaniHaryono suggested at https://github.com/jarun/Buku/pull/294#issuecomment-409401051.. Fixed at 4983209dfdf47fc55fb724688c391574c011ddae.. You'll have to rebase to latest master. Also, does the patch work with the following?\n\nhttp://www.vim.org/scripts/script.php?script_id=4641\nhttp://4pda.ru/forum/index.php?showtopic=182463&st=1640#entry6044923\n. OK. Please confirm.. build fails.... Thank you!. @rachmadaniHaryono if you are interested, can you please try out the first item in the ToDo list. We can remove the current parser and replace it with bs4. Very broadly, we would like to have something like this:\nsoup = BeautifulSoup(pagedata, 'html5lib')\nsoup.select('title')[0].getText().strip()\nsoup.select('meta[name=\"Description\"]')[0].get('content').strip()\nsoup.select('meta[name=\"Keywords\"]')[0].get('content').strip()\nIf user doesn't specify, the description goes into description field and keywords go as tags.. Noting down stuff we need to handle if we do this (to be done gradually, not in one PR):\n\nTrigger auto-fetch of tags and description only when the options are not provided in cmdline\nProvide options in editor to update description and tags from web\nExtend immutable to keep description and tags untouched\n~Limit auto-fetched tags to certain word count?~\nFlag immutable will now apply to title, desc and tags.. I believe we are good if we follow: https://www.w3schools.com/tags/tag_meta.asp. I am working on the primary stuff this weekend. Need a thorough review once it's done. ;). Thank you!. A general approach could be:\n\nFilter out tags which are more than 3 words and doesn't have a comma in between.\nLog a message with the fetched tag so the user knows.. Yes, the general way to store tags/keywords is to separate by commas. If we really have to store tags which are unusually long, we can still append them to the descriptions so we don't lose the data. We will still notify the user that we are appending the particular tag to description as it doesn't look a list of keywords. This will be documented in the operational notes.\nThis also solves our problem of being able to search the link with the keywords. All the descriptions are searchable. The problem with adding as tags is tags are not partially searchable the way we have designed Buku from the beginning.\nImplementing partial tag search would need bandwidth we probably can't spare and implementing it for this problem is adding a solution stronger than the problem itself.. I think it will be too difficult to refactor it, given it has to work with input title, tags, desc, url as well as search and update etc.. I don't think so. You can try refactoring it out. :+1: . :+1: Looks good!. Sure!. I chose the following filters to detect non-tag keywords:\n\nword to comma ratio is greater than 3. > The problem with adding as tags is tags are not partially searchable\n\nThis is wrong. We do search partial tags with -s.. \ud83d\udc4d . > imo this task should be added to todo list\nSure, please go ahead and add it.. Thanks for taking care of this!!!. @rachmadaniHaryono can you please wrap this up? It's time we make a release. We have 104 changes in the queue!!!. I will skip it. No problem!. Thank you!. From the readme:\nBuku is too busy to track you - no hidden history, obsolete records, usage analytics or homing.. It's optional. And easily removable. The intention was to identify the bookmarks imported in bulk.. Can you please share the bookmark file which work with 3.7 and does not work with 3.8? Please remove any sensitive data before sharing. We just want to reproduce the issue.. @rachmadaniHaryono would it be possible for you to check this one?. This works fine in my setup with latest master:\n```\n~/G/Buku$ git diff\ndiff --git a/buku.py b/buku.py\nindex d9b111c..5ca575b 100755\n--- a/buku.py\n+++ b/buku.py\n@@ -2185,7 +2185,7 @@ class BukuDb:\n         FF_BM_DB_PATH = None\n     if sys.platform.startswith(('linux', 'freebsd', 'openbsd')):\n\n\nGC_BM_DB_PATH = '~/.config/google-chrome/Default/Bookmarks'\nGC_BM_DB_PATH = '~/.config/vivaldi-snapshot/Default/Bookmarks'\n             CB_BM_DB_PATH = '~/.config/chromium/Default/Bookmarks'     DEFAULT_FF_FOLDER = os.path.expanduser('~/.mozilla/firefox')\n\n\n\n~/G/Buku$ ll ~/.config/vivaldi-snapshot/Default/Bookmarks \n-rw-rw-r-- 1 vaio vaio 3363339 Aug 15 09:47 /home/vaio/.config/vivaldi-snapshot/Default/Bookmarks\n~/G/Buku$ ./buku.py --ai\nAdd parent folder names as tags? (y/n): n\nImport bookmarks from google chrome? (y/n): y\n421. Clearcoat Question - Bike Forums\n\nhttp://www.bikeforums.net/bicycle-mechanics/185182-clearcoat-question.html\n   + Bicycle Mechanics - Clearcoat Question - A couple weeks ago I stripped down my beater frame, primed it, and painted it with Duplicolor Automobile\n   # 2018aug15\n\n\nBudget Bicycle Center - 1970s Sekine Medialle Road Bicycle 57cm\nhttps://budgetbicyclectr.com/1970s-sekine-medialle-road-bicycle-57cm.html\n\n\n\nClassic and rare Canadian road bike from the '70s! 1970s Sekine Medialles Road Bicycle 57cm\n   # 2018aug15\n\n\nsekine world's finest bicycle? - Page 8 - Bike Forums\n\nhttp://www.bikeforums.net/classic-vintage/72059-sekine-world-s-finest-bicycle-8.html\n\n\n\nClassic & Vintage - Sekine world's finest bicycle? - Mine rides great, if you get them on the cheap, its a great city cruiser, grocery getter etc.\n   # 2018aug15\n\n\nHow to Easily Remove Stuck Chainring Bolt with just a Wrench! - YouTube\n\nhttps://www.youtube.com/watch?v=E6SCwijgdyQ\n\n\nREMARKS: - I'm using a size 10 wrench for a 32t chainring in this video, you need to find the right wrench for different chainring size. - The jaw of the wre...\n   # 2018aug15\n\n^C\nInterrupted.\n~/G/Buku$\n~/G/Buku$ ./buku.py --ai\nAdd parent folder names as tags? (y/n): y\nImport bookmarks from google chrome? (y/n): y\n421. Clearcoat Question - Bike Forums\n\nhttp://www.bikeforums.net/bicycle-mechanics/185182-clearcoat-question.html\n   + Bicycle Mechanics - Clearcoat Question - A couple weeks ago I stripped down my beater frame, primed it, and painted it with Duplicolor Automobile\n   # 2018aug15,bikes,bookmarks\n\n\nBudget Bicycle Center - 1970s Sekine Medialle Road Bicycle 57cm\nhttps://budgetbicyclectr.com/1970s-sekine-medialle-road-bicycle-57cm.html\n\n\n\nClassic and rare Canadian road bike from the '70s! 1970s Sekine Medialles Road Bicycle 57cm\n   # 2018aug15,bikes,bookmarks\n\n\nsekine world's finest bicycle? - Page 8 - Bike Forums\n\nhttp://www.bikeforums.net/classic-vintage/72059-sekine-world-s-finest-bicycle-8.html\n\n\n\nClassic & Vintage - Sekine world's finest bicycle? - Mine rides great, if you get them on the cheap, its a great city cruiser, grocery getter etc.\n   # 2018aug15,bikes,bookmarks\n\n\nHow to Easily Remove Stuck Chainring Bolt with just a Wrench! - YouTube\n\nhttps://www.youtube.com/watch?v=E6SCwijgdyQ\n\n\n\nREMARKS: - I'm using a size 10 wrench for a 32t chainring in this video, you need to find the right wrench for different chainring size. - The jaw of the wre...\n   # 2018aug15,bikes,bookmarks\n\n\nAmazon.com: Timbuk2 Tandem Pannier, Black, One Size: Sports & Outdoors\n\nhttps://www.amazon.com/Timbuk2-Tandem-Pannier/dp/B00B3XWZD8/ref=pd_sbs_468_2?_encoding=UTF8&pd_rd_i=B00B3XWZD8&pd_rd_r=0C3BVP0GEJ78CW23JD2V&pd_rd_w=YdPfy&pd_rd_wg=etzx1&refRID=0C3BVP0GEJ78CW23JD2V\n\n\nAmazon.com : Timbuk2 Tandem Pannier : Sports & Outdoors\n   # 2018aug15,bikes,bookmarks\n\n^C\nInterrupted.\n~/G/Buku$\n```\nCan you please check if your environment settings match and try with latest master?. Try the following:\ngit clone https://github.com/jarun/Buku\n\nModify the buku.py file.\nRun ./buku.py --ai\nI did the same (put the file in the correct location before the test).. You can also download the zip archived snapshot of master if you do not have git installed.. No problem!. @szlin can you please take care of this?. Please raise the PR.. @szlin any update on this? I think it will be a good addition to the next release which we will make shortly.\nI think the OP is requesting the server files to be added to the generated packages as well. That would need changes to the Makefile.. @rachmadaniHaryono can you do the Makefile changes? I am at a loss how to handle this.. It would be great if we can have a different Makefile target for bukuserver. The idea is to generate a separate package. PackageCore guys confirmed it's possible to generate multiple packages using separate files.. Why do you think we need a separate project?\n- We can have distinct targets in Makefile for bukuserver\nIsn't it possible to generate 2 different packages with that?. This also says:\nThis isn't a hard requirement though.\n\nI can create an empty project if you guys would want to port the server to it. My knowledge in the web side is lacking and someone should create the Makefile, add packagecore.yaml deps etc. I can link it to travis.. @alasdairdc I believe that we do not have the bandwidth to work on this item for now. I have added in the last release notes that bukuserver needs to be installed from PyPi for now.\nWe need to proceed with the planned release. And this action item may take more time to stabilize things across distros and environments.\nI am closing this defect with the note and I will add an item in the ToDo list to handle the packaging of bukuserver. Would you like to take it up?. Sorry, we don't want to track the records and the changes to them. Buku works like a unique (perhaps latest) snapshot.. @rachmadaniHaryono please take a look.. I am adding an item in the ToDo list for this and closing the defect.. @rachmadaniHaryono would it be possible to expose the DB file encrypt and decrpy feature? That should block unauthorized access to the database till you can come up with a password-based locking mechanism.. I am fine with the easiest option as long as the security aspect remains the same.. @rachmadaniHaryono @ckolumbus could any of you pick this up?. Thanks!. Thanks Lin!. Thanks for the suggestion. My understanding from your explanation is the keyword is the shortcut to a url e.g. a search URL. So when you fire the keyword with a search pattern the pattern is appended to the URL.\nTo me it seems more relevant to a web search utility than a bookmarking one because not all URLs would be search URIs. Yes, it's also relevant to a browser where you can use it to fire a query in the address bar directly.\n\nUnfortunately my free time is limited\n\nThat goes for us too. We are only two devs working on this now. The work involved in adding a new field, making the upgrade seamless, modifying our import and export APIs etc. sounds overwhelming at this stage of the project. The best I can do is add this in the ToDo list.\n\n\u201csearch term\u201d or \u201csearch pattern\u201d\n\nI would prefer the word search term. Would you care to raise a PR for this?. I have added an item in the todo list for keyword. I will wait for a PR from you on the search term change.. It would be great if you can contribute this feature.. Thanks a ton! I will review it this weekend.. Found an issue while testing the changes. I have around 425 bookmarks in my DB.\n```\n$ buku -p 300-321 -n 5\n\nFree and Public DNS Server List (Valid August 2018) [300]\nhttps://www.lifewire.com/free-and-public-dns-servers-2626062\n\n\n\nA list of public and completely free DNS servers, plus instructions on how to change them. This DNS server list was last updated in August 2018.\n   # utilities network\n\n\nargparse \u2014 Command-Line Option and Argument Parsing \u2014 PyMOTW 3 [322]\n\nhttps://pymotw.com/3/argparse/\n   # python\n\n\n\nbuku (? for help) n\nNo more results\nbuku (? for help)\n```\nCan you please check? I think we need to tweak something in the new API. Please check.. Also,\n```\n$ buku -p 300-321 -n\n\nFree and Public DNS Server List (Valid August 2018) [300]\nhttps://www.lifewire.com/free-and-public-dns-servers-2626062\n\n\n\nA list of public and completely free DNS servers, plus instructions on how to change them. This DNS server list was last updated in August 2018.\n   # utilities network\n\n\nargparse \u2014 Command-Line Option and Argument Parsing \u2014 PyMOTW 3 [322]\n\nhttps://pymotw.com/3/argparse/\n   # python\n\n\n\nbuku (? for help) n\nNo more results\nbuku (? for help)\n```. You can use https://github.com/jarun/Buku/blob/master/tests/genbm.sh to generate bookmarks.. Thanks! I will test again.. The changes look good to me! Thank you!. BTW, I liked your use of chain from itertools. When you get some time next can you please audit the code and see where you can use it?. Python 3.7.0 is not tested yet. Do you see the issue on 3.6.x?\nIn the meantime I will see if I can grab 3.7.0 and try test this. Thanks!. I tried with python 3.7 and it works fine on Ubuntu 18.04 amd64:\n```\n$ python3.7 ./buku.py test -z\n[DEBUG] Version 3.9\n[DEBUG] args.keywords\n[DEBUG] query: \"SELECT id, url, metadata, tags, desc FROM (SELECT *, CASE WHEN (tags REGEXP ? OR URL REGEXP ? OR metadata REGEXP ? OR desc REGEXP ?)  THEN 1 ELSE 0 END AS score FROM bookmarks WHERE score > 0 ORDER BY score DESC)\", args: ['\\btest\\b', '\\btest\\b', '\\btest\\b', '\\btest\\b']\n\n5 alternatives to the Fizzbuzz test for hiring programmers - David Elbe [56]\nhttp://david.elbe.me/developers/hiring/2014/09/17/fizzbuzz-alternatives.html\n\n\n\nI compiled a list over the last 100 so-called programmers who came to me\nlooking for a job. 75 of them failed one or more of our three\nsimple programming tests. Let me emphase that; 75 out of 100 applicants to a\nprogramming job can not program. At all.\n   # interview,programming tricks\n\n\nRegViz: Visual Debugging of Regular Expressions [85]\n\nhttp://regviz.org/\n\n\n\nRegViz is a tool for debugging JavaScript regular expressions in a visual way. Advanced highlighting helps you to understand the structure and purpose of a regular expression and to detect bugs therein. You can test the regular expression on a sample text and formulate test cases. We tried to come up with a very user friendly tool.\n   # debugging,javascript,readability,regex,regular expression,testing,utilities,visualization\n\n\nFizz Buzz Test [101]\n\nhttp://c2.com/cgi/wiki?FizzBuzzTest\n   # interview,programming tricks\n\n\n\nDNS leak test [148]\n\nhttps://www.dnsleaktest.com/\n\n\n\nDNSleaktest.com offers a simple test to determine if you DNS requests are being leaked which may represent a critical privacy threat. The test takes only a few seconds and we show you how you can simply fix the problem.\n   # utilities network\n\n\nThe New C Standard: a free download [224]\n\nhttp://www.knosof.co.uk/cbook/cbook.html\n   # analysis of c,ansi c,british,c,c standard,code generator,coding guidelines,coding standard,compiler,conformance,embedded systems,empirical analysis,enforce,enforcement,england,error detection,iso c,lint,maintain,maintenance,misra c,pc-lint,portability,programming,properties of c,qa,quality,software engineering,standard c,test,testing,translator,uk,validation\n\n\n\nSSL Server Test (Powered by Qualys SSL Labs) [360]\n\nhttps://www.ssllabs.com/ssltest/index.html\n\n\n\nA comprehensive free SSL test for your public web servers.\n   # certificate,certificate check,cipher suite,encryption,fips compliance,pci compliance,ssl,ssl assessment,ssl check,ssl server check,ssl server test,ssl test,tls,tls assessment,utilities network,x509\n\n\ntravis: Add 2x cross-compile ARM builds \u00b7 linux-test-project/ltp@8197a46 \u00b7 GitHub [400]\n\nhttps://github.com/linux-test-project/ltp/commit/8197a46d800eb705e0aea3b7c3c2272f071f08e7\n\n\nLinux Test Project. Contribute to linux-test-project/ltp development by creating an account on GitHub.\n   # dev essentials\n\nbuku (? for help) q\n$ python3.7 ./buku.py -s test -z\n[DEBUG] Version 3.9\n[DEBUG] args.sany\n[DEBUG] query: \"SELECT id, url, metadata, tags, desc FROM (SELECT *, CASE WHEN (tags REGEXP ? OR URL REGEXP ? OR metadata REGEXP ? OR desc REGEXP ?)  THEN 1 ELSE 0 END AS score FROM bookmarks WHERE score > 0 ORDER BY score DESC)\", args: ['\\btest\\b', '\\btest\\b', '\\btest\\b', '\\btest\\b']\n\n5 alternatives to the Fizzbuzz test for hiring programmers - David Elbe [56]\nhttp://david.elbe.me/developers/hiring/2014/09/17/fizzbuzz-alternatives.html\n\n\n\nI compiled a list over the last 100 so-called programmers who came to me\nlooking for a job. 75 of them failed one or more of our three\nsimple programming tests. Let me emphase that; 75 out of 100 applicants to a\nprogramming job can not program. At all.\n   # interview,programming tricks\n\n\nRegViz: Visual Debugging of Regular Expressions [85]\n\nhttp://regviz.org/\n\n\n\nRegViz is a tool for debugging JavaScript regular expressions in a visual way. Advanced highlighting helps you to understand the structure and purpose of a regular expression and to detect bugs therein. You can test the regular expression on a sample text and formulate test cases. We tried to come up with a very user friendly tool.\n   # debugging,javascript,readability,regex,regular expression,testing,utilities,visualization\n\n\nFizz Buzz Test [101]\n\nhttp://c2.com/cgi/wiki?FizzBuzzTest\n   # interview,programming tricks\n\n\n\nDNS leak test [148]\n\nhttps://www.dnsleaktest.com/\n\n\n\nDNSleaktest.com offers a simple test to determine if you DNS requests are being leaked which may represent a critical privacy threat. The test takes only a few seconds and we show you how you can simply fix the problem.\n   # utilities network\n\n\nThe New C Standard: a free download [224]\n\nhttp://www.knosof.co.uk/cbook/cbook.html\n   # analysis of c,ansi c,british,c,c standard,code generator,coding guidelines,coding standard,compiler,conformance,embedded systems,empirical analysis,enforce,enforcement,england,error detection,iso c,lint,maintain,maintenance,misra c,pc-lint,portability,programming,properties of c,qa,quality,software engineering,standard c,test,testing,translator,uk,validation\n\n\n\nSSL Server Test (Powered by Qualys SSL Labs) [360]\n\nhttps://www.ssllabs.com/ssltest/index.html\n\n\n\nA comprehensive free SSL test for your public web servers.\n   # certificate,certificate check,cipher suite,encryption,fips compliance,pci compliance,ssl,ssl assessment,ssl check,ssl server check,ssl server test,ssl test,tls,tls assessment,utilities network,x509\n\n\ntravis: Add 2x cross-compile ARM builds \u00b7 linux-test-project/ltp@8197a46 \u00b7 GitHub [400]\n\nhttps://github.com/linux-test-project/ltp/commit/8197a46d800eb705e0aea3b7c3c2272f071f08e7\n\n\nLinux Test Project. Contribute to linux-test-project/ltp development by creating an account on GitHub.\n   # dev essentials\n\nbuku (? for help)\n```\nCan you share the command you are using to search?. In addition to my last question:\nI can see a difference in how the search term is quoted: '\\\\btest\\\\b' vs \\btest\\b (your case).\nWhich shell are you using?. I tried bash as well. No issues seen.\nCan you try the method explained in https://stackoverflow.com/questions/45824209/how-to-get-an-error-kind-from-sqlite-create-function to see what the actual error is?. Also, can you check if any particular record in your DB is causing the error?\nProbably take a backup, remove 50% of the records and search. if you see the error remove 50% again, else take the other 50% and remove 50%... basically a git bisect way of finding out if there's any such record quickly.. Can you please share the record details? I would try to add a graceful handling for it.. I have added a fix to skip the regex search. Please test with latest master and confirm.. Thanks for confirming!. Thanks for sharing the bookmark. Yes, it works fine.\nI have also verified the bookmark is returned when search terms refresh or orgid are used.. In a week or two... :+1: . @hubitor can you please\n\ngo through the thread to understand the problem we had earlier and\ntry to figure out which record causes the problem?\n\nWithout having any data or info we can't do anything about your issue.. Also it's pretty evident from the conversation the fix is in master and is not released yet. Did you try master?. Download https://github.com/jarun/Buku/archive/master.zip, extract and run the buku.py file within it with the same args.. This is a duplicate of #306.. Thank you!. Yes, this can be fixed upstream. Would it be possible for you to raise a PR? I think you need to use delim_wrap().. > I've no experience at all with Python.\nI will take a look myself.\n\nHaving a quick look through the codebase, is there any reason we (as far as I can see) aren't deserialising the tags into an array of strings, rather than having to work everywhere with a token string?\n\nPlease provide more detail on the issue you see with examples. I would try to explain.. Which APIs do you call to add and edit/update?\nI can see that add_rec() wraps the tags with delimiter.\nalso, the delimiter saved in the column helps in optimizing the search (and fetching exact tags) instead of having to handle the first and the last tags specially.. In addition, I am not sure if I understood your note regarding tags stored as array of strings correctly. sqlite stores only these: https://www.tutorialspoint.com/sqlite/sqlite_data_types.htm. > If there isn't an elegant alternative to that then it'd probably make the most sense for me to patch this on my end, I think?\nhttps://github.com/jarun/Buku/blob/master/buku.py#L581-L585\nadd_rec() already wraps... I am not sure why it's not working for you even if you send unwrapped tags. If it's not add_rec() please let me know which APIs you call.. ok, that makes sense. I assume you can't use python APIs. In that case you would have to delim_wrap() yourself.. Thank you!. We already add a date tag on import. Please refer to: https://github.com/jarun/Buku/wiki/Operational-notes#import\nAlso, the video tag may not be of interest to all users. You can always search and update (with new tag).. > If my change is wanted I'll remove video tag and add tests.\nI don't see how someone would remember the time of addition for each bookmark. I think we can live without it.. Thank you!. I think the problem is with installation of deps. Can you purge the deps from apt and install them using pip3?\nPlease refer to https://stackoverflow.com/questions/38447738/beautifulsoup-html5lib-module-object-has-no-attribute-base. I don't have any solution for local setup/environment issues I can't touch. Good luck!. Closed by PR.. > i can create another pr for that\nYes, please. Also it seems like auto-import is failing with Firefox 63. Can you please take a look?. Thank you!. Thank you!. @rachmadaniHaryono I reverted this. It contains a 10MB firefox.sqlite file. When I requested to check the FF issue I meant that there was some issue with importing from FF installed on the system.\nPlease raise the PR again without the Firefox related stuff.. On principle, do NOT add huge files to the repo without confirming first.. Thank you!. Closed at #326.. Thank you!. Thanks for the issue. As discussed, I am assigning it to you.. This is a 15-days old issue without any response from dev on the status. I have added it to the ToDO list.. Thank you!. Here are my steps (tried out just now with Dropbox, I don't have pCloud account):\n```\n~$ mv ~/.local/share/buku/bookmarks.db ~/\n0 files (200.0 KiB) moved in 0.0 seconds (  0.0 KiB/s).\n~$ buku\nDB file is being created at /home/vaio/.local/share/buku/bookmarks.db.\nYou should encrypt it.\n~$ rm ~/.local/share/buku/bookmarks.db\n~$ ln -s ~/Dropbox/Public/bookmarks.db /home/vaio/.local/share/buku/bookmarks.db\n~$ buku\n~$ buku -s hello\n\nWriting a Linux Kernel Module \u2014 Part 1: Introduction | derekmolloy.ie [28]\nhttp://derekmolloy.ie/writing-a-linux-kernel-module-part-1-introduction/\n\n\n\nGuide to writing loadable kernel modules (LKMs) for embedded Linux devices (e.g., BeagleBone). Part 1 builds a \"hello world\" code example with custom parameters\n   # arguments,beaglebone,custom driver,device driver,embedded,hello world,introduction,kernel,kernel programming,linux,lkm,makefile,module,parameters,tutorial\n\n\nSay hello to x64 Assembly [part 1] [113]\n\nhttp://0xax.blogspot.in/2014/08/say-hello-to-x64-assembly-part-1.html\n\n\n\nIntroduction There are many developers between us. We write a tons of code every day. Sometime, it is even not a bad code :) Every of us ...\n   # assembly programming\n\n\nGitHub - mewrev/dissection: The dissection of a simple \"hello world\" ELF binary. [305]\n\nhttps://github.com/mewrev/dissection\n\n\nThe dissection of a simple \"hello world\" ELF binary. - mewrev/dissection\n   # assembly programming,binary analysis,computer science,interview\n\nbuku (? for help) \nbuku (? for help) \n~$\n```\nWorks without any issues.\nAfter creating the symlink can you check that it actually exists? Because if the file exists, Buku wouldn't overwrite it to create the file again.\nIf nothing else works, use the undocumented --db option with which you can specify a db file location other than the default one.. I noticed you edited the wiki. Problem solved?. > Won't this command just read the entire database from Dropbox and then write it back to the same location?\nI have updated the line now. This is for the non-symlink manual sync case.\n\nWhy not document it?\n\nPeople are bound to mess up if they don't add an alias in the rc file. And the default works in 99% of the cases.. You are welcome!. Some explanation would make sense.. As I understand you want to search by netloc. We have a a deep search (option --deep) which can search the URLs too. That's the best we can do about it. There are too many existing ways to search already.. Thanks a lot @rachmadaniHaryono! Travis seems to be failing. Please check.. Thank you!. I am adding the lint fixes.. Do you have this file? ~/.local/share/buku/bookmarks.db\nIf not, copy the .db file you have to the above location and run buku -p to list the bookmarks.. Sorry, I may not be of much help here.. Sure! I would be glad to know.. BTW, to ensure this doesn't happen again, use the method explained here: https://github.com/jarun/Buku/wiki/System-integration#sync-database-across-systems. Even if it syncs once, you will have a backup you can restore.. Matching so many options would make add bookmark very slow so we go by exact string match. I hope you understand that there is no reasonable absolute solution to this.\nYou can do it manually though. With your example, search domain.tld with the option --deep which would also search URLs. Then you can delete the redundant ones.\nHope that helps.. No, it's not that easy to script a solution that will match http://domain.tld/en with https://en.domain.tld.\nI can think of one way.\nYou can dump all URLs along with DB index sorted by URL with -f=1. So try this:\n$ buku github.com -f 1 | sort -k 2\n466 github.com/rakshasa/rtorrent/wiki/User-Guide\n455 https://gist.github.com/Brainiarc7/aa43570f512906e882ad6cdd835efe57\n84  https://github.com/angrave/SystemProgramming/wiki\n143 https://github.com/contiki-os/contiki/pull/430\n385 https://github.com/crazedpsyc/python-duckduckgo/blob/master/duckduckgo.py\n118 https://github.com/devttys0/binwalk/wiki/Usage\n326 https://github.com/ginatrapani/todo.txt-android/wiki/Squash-All-Commits-Related-to-a-Single-Issue-into-a-Single-Commit\n8   https://github.com/ivandavidov/minimal\n290 https://github.com/jordansissel/fpm\n400 https://github.com/linux-test-project/ltp/commit/8197a46d800eb705e0aea3b7c3c2272f071f08e7\n394 https://github.com/mattn/gist-vim\n305 https://github.com/mewrev/dissection\n4   https://github.com/sharkdp/great-puzzles\n25  https://github.com/shiena/ansicolor/\n23  https://github.com/t3rm1n4l/kern-dev-tutorial/\nOr, for all bookmarks:\nbuku -p -f 1 | sort -k 2\n\nThen start picking from the first frequent domain. The DB indices are printed in the first column. You can add them as a space-separated list in a file and run:\nbuku -d `cat filename`\n\nI hope this gives you an idea of the script you need.. On a different note, when you say I'm a big fan consider awarding a star on GitHub to the project. ;). You can pipe the output of sort to another cmd which will remove the part till the first // (if i exists in the string).. It would be of great help to other users if you can share your final script.. Use the option -n to change that.. @rachmadaniHaryono please share your opinion on this.. Closed at #336.. Travis checks fail. Please fix those.. Thanks guys!\n@ckolumbus, while you are at it, would you be interested in picking up the Firefox json import task item from the ToDo list? It would help us a lot.. > I'll have a look. if this is one of the hot topics I could give it a try.\nThanks a lot! Yes, I am holding off the next release for this support to come in.\n\nNext thing for me would be Albert integration, so I can start my bookmarks as easily from my linux launcher as I can do already with Keypirinha on Windows :-).\n\nEven if it's scripted, we can add it in the Wiki!. Great news! Please notify me once merged. I will add a note in the docs somewhere.. Right! The work item needs to add the support for json.. Here's the schema doc: https://wiki.mozilla.org/File:Places.sqlite.schema.pdf\nWe already do the auto-import from places.sqlite. The json file we are discussing here is the one exported anytime from Firefox (Show all Bookmarks -> Import and backup -> Backup).. No problem. Please take your time.. Closed by https://github.com/jarun/Buku/pull/338.. Travis is failing. Please take a look.. Sure! Take your time.. Please remove the do-not-merge label when you are done.. I have removed the label.\n@rachmadaniHaryono can you please check the test case failure?. We need to complete the review.. I've completed my review. Minor modifications requested. The changes look good to me. Many thanks for the PR. I've been spending too much time on nnn and neglected Buku which has always remained my goto utility to find stuff I encountered on the web. :)\n@rachmadaniHaryono Please complete the review.\nMerry Christmas and a Very Happy New Year to you guys!!! I just returned from a long drive from Pondicherry with family.. @ckolumbus please check the review comments.. Thanks for this valuable contribution guys!. Yes, with all options. Use --db file_path.. @ckolumbus please check this.. Attaching sample bookmarks for you to test.\nsample_bookmarks.zip\n. For the tag /bookmarks menu/mozilla firefox, the actual tag is mozilla firefox, i.e., only the parent folder (not the whole tree separated by /).\nNo, the tag should be just Kids.\nI have attached something for your reference. There is a html file. Import that and you will see how the current behaviour is. json import should follow the same.. The current PR takes care of the error message. Please ensure the tag import behaviour remains the same.. Thanks! I will test it out.. Please check the comments on #344.. ~$ cp ~/.local/share/buku/bookmarks.db ~/bookmarks.db -rvf\n'/home/vaio/.local/share/buku/bookmarks.db' -> '/home/vaio/bookmarks.db'\n1 files (204.0 KiB) copied in 0.0 seconds ( 12.7 MiB/s).\n~$ buku -d\nRemove ALL bookmarks? (y/n): y\nAll bookmarks deleted\n~$ ll .local/share/buku/bookmarks.db \n-rw-rw-r-- 1 vaio vaio 207872 Jan  1 21:22 .local/share/buku/bookmarks.db\n~$ ll ~/bookmarks.db \n-rw-rw-r-- 1 vaio vaio 207872 Jan  1 21:22 /home/vaio/bookmarks.db\n~$ buku -p\n[ERROR] 0 records\n~$\nThe sqlite operation used is DROP TABLE.. There were records at first. I have around 477 bookmarks in my personal file.\nI think it would be a better option to just remove the file instead of dropping the table. That would be fast and reclaim the space. Added to the ToDo list.\nOr maybe use the same code from delete_rec_all().. reverse sort based on which criteria?. Buku doesn't store that information.. Please read the introduction: no hidden history, obsolete records, usage analytics or homing. > So would bookmark entry order falls under obsolete records?\nNo, the date added. It's possible to figure out patterns from that.\nGenerally speaking, we leave out any king of usage history.. You mentioned \"chronology\". If you are asking for just printing in reverse order, I think you can add a filter to do that while listing. If you really need it, please raise the PR.. Please feel free to add to the ToDo list.. I pinged you now. I didn't get the noti from gitter.. @ckolumbus the following issues need to be fixed as well:\n\nplease import only the last level of tags (e.g. bookmarks menu or mozilla firefox)\n/ prepended to tags\n/ in between multiple tags\n\nImported tags should not have any / in them. Only the last level folder should be marked as tag, not the whole tree separated by /.\nPlease import the .html I have attached in the defect to see how the tags are imported. It should be the same for .json as well.. For more clarity:\nif the tree is /bookmarks menu/mozilla firefox, the tag should be: mozilla firefox.. Thanks! This looks good! Notes:\nI see a difference between html and json import - html import ignores the bookmarks menu folder. I think it also ignores bookmarks toolbar and other bookmarks at the same level (see image below). Would it be possible to do that for json?\n\n~Also, please change the question: Add Bookmark folder name as tag?\nto Add parent folder names as tags?~ - I took care of this one.. I think you have to rebase once. I pulled in #345 which was approved this morning and it introduced some conflicts with your PR.\nWish you a Very Happy New Year!!! Have fun!. Output from json import:\n```\nAppend tags when bookmark exist? (y/n): y\nAdd parent folder names as tags? (y/n): y\n1. Ubuntu\n\nhttp://www.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nUbuntu Wiki (community-edited website)\n\nhttp://wiki.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nMake a Support Request to the Ubuntu Community\n\nhttps://answers.launchpad.net/ubuntu/+addquestion\n   # 2019jan02,ubuntu and free software links\n\n\n\nDebian (Ubuntu is based on Debian)\n\nhttp://www.debian.org/\n   # 2019jan02,ubuntu and free software links\n\n\n\nUbuntu One - The personal cloud that brings your digital life together\n\nhttps://one.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nHelp and Tutorials\n\nhttps://www.mozilla.org/en-US/firefox/help/\n   # 2019jan02,mozilla firefox\n\n\n\nCustomize Firefox\n\nhttps://www.mozilla.org/en-US/firefox/customize/\n   # 2019jan02,mozilla firefox\n\n\n\nGet Involved\n\nhttps://www.mozilla.org/en-US/contribute/\n   # 2019jan02,mozilla firefox\n\n\n\nAbout Us\n\nhttps://www.mozilla.org/en-US/about/\n   # 2019jan02,mozilla firefox\n\n\n\nACT - MyAccount\n\nhttp://portal.actcorp.in/group/blr/myaccount\n\n\n\nHeadquartered in Bangalore, ACT presently has a gratifying 1 million+ subscriber base using its Broadband, Digital, Analog& IPTV Services\n   # 2019jan02\n\n\nVoyager\n\nhttp://voyagerlive.org/\n   # 2019jan02\n\n\n\nAdblock Plus\n\nhttps://addons.mozilla.org/fr/firefox/addon/adblock-plus/\n   # 2019jan02,f+,language\n\n\n\nSearchPreview\n\nhttps://addons.mozilla.org/fr/firefox/addon/searchpreview/\n\n\n\nThis is a SearchPreview\nI don't know what it is.\nWhy is this here?\n   # 2019jan02,f+\n\n\nLanguage Tools\n\nhttps://addons.mozilla.org/fr/firefox/language-tools/\n   # 2019jan02,f+,hello,language\n\n\n\n42 Brilliant Buddha Quotes on Peace, Life & Happiness | Wealthy Gorilla\n\nhttps://wealthygorilla.com/buddha-quotes-on-peace-life-happiness/\n   # 2019jan02,quotes\n\n\n\nRadio Garden \u2013 Radio LetzGo\n\nhttp://radio.garden/live/kolkata/radio-letzgo/\n\n\n\nExplore live radio by rotating the globe.\n   # 2019jan02\n\n\nKerala Travel Essentials \u2013 Orange Wayfarer\n\nhttps://orangewayfarer.wordpress.com/2017/06/15/kerala-travel-essentials/\n   # 2019jan02\n\n\n\nAudials Live - Listen to all internet radio-stations worldwide\n\nhttp://live.audials.com/en#!radio\n\n\n\nAudials Live is the best portal site and web directory of all worldwide available internetradiostations, web-radios and online broadcasters, respectively. Find and listen to the best fitting radio-stations according to your location, your preferred genre and your favorite bands. Comes with apps for Android, iOS and Windows.\n   # 2019jan02\n\n\ntravis: Add 2x cross-compile ARM builds \u00b7 linux-test-project/ltp@8197a46\n\nhttps://github.com/linux-test-project/ltp/commit/8197a46d800eb705e0aea3b7c3c2272f071f08e7\n\n\n\nltp - Linux Test Project\n   # 2019jan02\n\n\nUsing the GNU Compiler Collection (GCC)\n\nhttps://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html\n\n\n\nUsing the GNU Compiler Collection (GCC)\n   # 2019jan02\n\n\nRainbow\n\nhttps://www.messenger.com/t/rainbowchildrenshospitals\n   # 2019jan02\n\n\n\nThis gist will show you how to tune your Intel-based Skylake, Kabylake and beyond Integrated Graphics Core for performance and reliability through GuC and HuC firmware usage on Linux.\n\nhttps://gist.github.com/Brainiarc7/aa43570f512906e882ad6cdd835efe57\n   # 2019jan02\n\n\n\nWelcome to WBSEDCL\n\nhttps://www.wbsedcl.in/irj/go/km/docs/internet/new_website/Pay_Registered_Consumer.html\n   # 2019jan02\n\n\n\nMindShare - Training, Books, eLearning, Software\n\nhttps://www.mindshare.com/company/?sectioncompany=My%20eLearning\n   # 2019jan02\n\n\n\nPersonal Banking, Online Banking Services - ICICI Bank\n\nhttps://www.icicibank.com/\n\n\n\nWelcome to ICICI Bank, Ideal destination for Personal Banking need! We offer a wide range of personal banking services including loans, credit cards, savings account, fixed deposits and insurance to meet your personal needs.\n   # 2019jan02\n\n\nInbox - arun-prakash.jana@broadcom.com - Broadcom Limited Mail\n\nhttps://mail.google.com/mail/u/1/#inbox\n\n\n\nGoogle's approach to email\n   # 2019jan02\n\n\nBest Broadband Service in Bangalore | Fastest Internet | ACT Fibernet\n\nhttps://www.actcorp.in/roi-campaigns/actfibernetbangalore2/?utm_source=Google&utm_medium=CPC&utm_campaign=208503597&utm_adgroup=11576967957&utm_term=%252Bact%2520%252Bplans&creative=254968739013&device=c&devicemodel=&matchtype=b&feeditemid=&targetid=kwd-80431951488&network=g&placement=&adposition=1t1&GA_loc_interest_ms=&GA_loc_physical_ms=1007768&gclid=EAIaIQobChMI1Niw7_vg2gIVjYBwCh3ouwPvEAAYASAAEgJIbfD_BwE\n\n\n\nACT Fibernet provides unlimited broadband plans with the highest internet speed at the lowest cost through fiber-to-the-home (FTTH) technology in Bangalore\n   # 2019jan02\n\n\nDomestic Term Deposits - SBI Corporate Website\n\nhttps://www.sbi.co.in/portal/web/interest-rates/domestic-term-deposits\n   # 2019jan02\n\n\n\nLater for Reddit\n\nhttps://dashboard.laterforreddit.com/analysis/\n\n\n\nLater for Reddit\n   # 2019jan02\n\n\nTelematics, Fleet Management System, Vehicle Tracking Applications, Employee Transportation Solutions | Sun Telematics\n\nhttp://www.suntelematics.org/\n   # 2019jan02\n\n\n\nState District Rate Portal\n\nhttp://hproroute.hpcl.co.in/StateDistrictMap_4/index.jsp\n   # 2019jan02\n\n\n\nRobert Browning Quotes (Author of My Last Duchess and Other Poems)\n\nhttps://www.goodreads.com/author/quotes/24391.Robert_Browning\n   # 2019jan02\n\n\n\nOnlineBillPay\n\nhttps://www.wbsedcl.in/webdynpro/dispatcher/local/QUARTERLYONLINEPAYMENT/OnlineBillPay\n   # 2019jan02\n\n\n\nKaagaz: A collaborative piece of paper on the cloud.\n\nhttps://www.kaagaz.io/b421b706\n   # 2019jan02\n\n\n\n\u09ac\u09be\u0982\u09b2\u09be - \u09ac\u09be\u0982\u09b2\u09be \u0985\u09a8\u09b2\u09be\u0987\u09a8 \u0985\u09ad\u09bf\u09a7\u09be\u09a8 | Bangla to Bangla (B2B) Online Dictionary\n\nhttp://www.english-bangla.com/bntobn\n   # 2019jan02\n\n\n\nAuto-generated tag: 2019Jan02\n```\nOutput from html import:\n```\nAppend tags when bookmark exist? (y/n): y\nAdd parent folder names as tags? (y/n): y\n1. Ubuntu\n\nhttp://www.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nUbuntu Wiki (community-edited website)\n\nhttp://wiki.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nMake a Support Request to the Ubuntu Community\n\nhttps://answers.launchpad.net/ubuntu/+addquestion\n   # 2019jan02,ubuntu and free software links\n\n\n\nDebian (Ubuntu is based on Debian)\n\nhttp://www.debian.org/\n   # 2019jan02,ubuntu and free software links\n\n\n\nUbuntu One - The personal cloud that brings your digital life together\n\nhttps://one.ubuntu.com/\n   # 2019jan02,ubuntu and free software links\n\n\n\nHelp and Tutorials\n\nhttps://www.mozilla.org/en-US/firefox/help/\n   # 2019jan02,mozilla firefox\n\n\n\nCustomize Firefox\n\nhttps://www.mozilla.org/en-US/firefox/customize/\n   # 2019jan02,mozilla firefox\n\n\n\nGet Involved\n\nhttps://www.mozilla.org/en-US/contribute/\n   # 2019jan02,mozilla firefox\n\n\n\nAbout Us\n\nhttps://www.mozilla.org/en-US/about/\n   # 2019jan02,mozilla firefox\n\n\n\nACT - MyAccount\n\nhttp://portal.actcorp.in/group/blr/myaccount\n\n\n\nHeadquartered in Bangalore, ACT presently has a gratifying 1 million+ subscriber base using its Broadband, Digital, Analog& IPTV Services\n   # 2019jan02\n\n\nVoyager\n\nhttp://voyagerlive.org/\n   # 2019jan02,bookmarks toolbar\n\n\n\nAdblock Plus\n\nhttps://addons.mozilla.org/fr/firefox/addon/adblock-plus/\n   # 2019jan02,f+,language\n\n\n\nSearchPreview\n\nhttps://addons.mozilla.org/fr/firefox/addon/searchpreview/\n\n\n\nThis is a SearchPreview\nI don't know what it is.\nWhy is this here?\n   # 2019jan02,f+\n\n\nLanguage Tools\n\nhttps://addons.mozilla.org/fr/firefox/language-tools/\n   # 2019jan02,f+,hello,language\n\n\n\n42 Brilliant Buddha Quotes on Peace, Life & Happiness | Wealthy Gorilla\n\nhttps://wealthygorilla.com/buddha-quotes-on-peace-life-happiness/\n   # 2019jan02,other bookmarks,quotes\n\n\n\nRadio Garden \u2013 Radio LetzGo\n\nhttp://radio.garden/live/kolkata/radio-letzgo/\n\n\n\nExplore live radio by rotating the globe.\n   # 2019jan02,other bookmarks\n\n\nKerala Travel Essentials \u2013 Orange Wayfarer\n\nhttps://orangewayfarer.wordpress.com/2017/06/15/kerala-travel-essentials/\n   # 2019jan02,other bookmarks\n\n\n\nAudials Live - Listen to all internet radio-stations worldwide\n\nhttp://live.audials.com/en#!radio\n\n\n\nAudials Live is the best portal site and web directory of all worldwide available internetradiostations, web-radios and online broadcasters, respectively. Find and listen to the best fitting radio-stations according to your location, your preferred genre and your favorite bands. Comes with apps for Android, iOS and Windows.\n   # 2019jan02,other bookmarks\n\n\ntravis: Add 2x cross-compile ARM builds \u00b7 linux-test-project/ltp@8197a46\n\nhttps://github.com/linux-test-project/ltp/commit/8197a46d800eb705e0aea3b7c3c2272f071f08e7\n\n\n\nltp - Linux Test Project\n   # 2019jan02,other bookmarks\n\n\nUsing the GNU Compiler Collection (GCC)\n\nhttps://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html\n\n\n\nUsing the GNU Compiler Collection (GCC)\n   # 2019jan02,other bookmarks\n\n\nRainbow\n\nhttps://www.messenger.com/t/rainbowchildrenshospitals\n   # 2019jan02,other bookmarks\n\n\n\nThis gist will show you how to tune your Intel-based Skylake, Kabylake and beyond Integrated Graphics Core for performance and reliability through GuC and HuC firmware usage on Linux.\n\nhttps://gist.github.com/Brainiarc7/aa43570f512906e882ad6cdd835efe57\n   # 2019jan02,other bookmarks\n\n\n\nWelcome to WBSEDCL\n\nhttps://www.wbsedcl.in/irj/go/km/docs/internet/new_website/Pay_Registered_Consumer.html\n   # 2019jan02,other bookmarks\n\n\n\nMindShare - Training, Books, eLearning, Software\n\nhttps://www.mindshare.com/company/?sectioncompany=My%20eLearning\n   # 2019jan02,other bookmarks\n\n\n\nPersonal Banking, Online Banking Services - ICICI Bank\n\nhttps://www.icicibank.com/\n\n\n\nWelcome to ICICI Bank, Ideal destination for Personal Banking need! We offer a wide range of personal banking services including loans, credit cards, savings account, fixed deposits and insurance to meet your personal needs.\n   # 2019jan02,other bookmarks\n\n\nInbox - arun-prakash.jana@broadcom.com - Broadcom Limited Mail\n\nhttps://mail.google.com/mail/u/1/#inbox\n\n\n\nGoogle's approach to email\n   # 2019jan02,other bookmarks\n\n\nBest Broadband Service in Bangalore | Fastest Internet | ACT Fibernet\n\nhttps://www.actcorp.in/roi-campaigns/actfibernetbangalore2/?utm_source=Google&utm_medium=CPC&utm_campaign=208503597&utm_adgroup=11576967957&utm_term=%252Bact%2520%252Bplans&creative=254968739013&device=c&devicemodel=&matchtype=b&feeditemid=&targetid=kwd-80431951488&network=g&placement=&adposition=1t1&GA_loc_interest_ms=&GA_loc_physical_ms=1007768&gclid=EAIaIQobChMI1Niw7_vg2gIVjYBwCh3ouwPvEAAYASAAEgJIbfD_BwE\n\n\n\nACT Fibernet provides unlimited broadband plans with the highest internet speed at the lowest cost through fiber-to-the-home (FTTH) technology in Bangalore\n   # 2019jan02,other bookmarks\n\n\nDomestic Term Deposits - SBI Corporate Website\n\nhttps://www.sbi.co.in/portal/web/interest-rates/domestic-term-deposits\n   # 2019jan02,other bookmarks\n\n\n\nLater for Reddit\n\nhttps://dashboard.laterforreddit.com/analysis/\n\n\n\nLater for Reddit\n   # 2019jan02,other bookmarks\n\n\nTelematics, Fleet Management System, Vehicle Tracking Applications, Employee Transportation Solutions | Sun Telematics\n\nhttp://www.suntelematics.org/\n   # 2019jan02,other bookmarks\n\n\n\nState District Rate Portal\n\nhttp://hproroute.hpcl.co.in/StateDistrictMap_4/index.jsp\n   # 2019jan02,other bookmarks\n\n\n\nRobert Browning Quotes (Author of My Last Duchess and Other Poems)\n\nhttps://www.goodreads.com/author/quotes/24391.Robert_Browning\n   # 2019jan02,other bookmarks\n\n\n\nOnlineBillPay\n\nhttps://www.wbsedcl.in/webdynpro/dispatcher/local/QUARTERLYONLINEPAYMENT/OnlineBillPay\n   # 2019jan02,other bookmarks\n\n\n\nKaagaz: A collaborative piece of paper on the cloud.\n\nhttps://www.kaagaz.io/b421b706\n   # 2019jan02,other bookmarks\n\n\n\n\u09ac\u09be\u0982\u09b2\u09be - \u09ac\u09be\u0982\u09b2\u09be \u0985\u09a8\u09b2\u09be\u0987\u09a8 \u0985\u09ad\u09bf\u09a7\u09be\u09a8 | Bangla to Bangla (B2B) Online Dictionary\n\nhttp://www.english-bangla.com/bntobn\n   # 2019jan02,other bookmarks\n\n\n\nAuto-generated tag: 2019Jan02\n```\nI see the tag \"other bookmarks\" missing from json import.\nPlease compare the outputs for the differences here: https://www.diffchecker.com. I realize the problem too. My understanding is - we should ignore bookmarks toolbar and other bookmarks along with bookmarks menu. So your implementation is correct. :+1: \nCan you check if we can do the same for html import also?. Cool! :+1: . > should be behaving exactly as html import now\nAwesome! I will test it and let you know. Thanks for your time and effort!. Both are exactly same! Thank you!. Please confirm if the changes are complete.. Thanks! Would it be possible for you to work on the first item in the ToDo list?\n@rachmadaniHaryono is the review complete?. Take your time! A Very Happy New Year to you and @rachmadaniHaryono too!. Thank you!. @sglavoie no problem at all! Academics come first. :+1: . Thank you!. run buku -u --tacit.. for batch delete grab o/p and script.. Thank you!. Can you also update: https://github.com/jarun/Buku/wiki/Operational-notes. @sglavoie I think it's time to re-factor the code. Maybe each class in a different file, main in one and open helper APIs in one.. Please let me know if you would be able to pick this up.. I think this is a good scheme. @rachmadaniHaryono what do you think?. we need to take care of Makefile, packaging etc. as well. so take your time. no need to hurry.. @sglavoie as there's no update on this so far I think you are busy right now. We have @jabagawee interested in picking it up. Can he proceed?. Thanks for confirming @sglavoie!\n@jabagawee it's all yours!. Thank you!. If there's a title already, it won't be overwritten. Buku doesn't write no title to file either. Empty titles are reported that way.. This should be fixed in master now. Check it out.. I think you referred to example 12. It's a mistake on our part. The latest version updates all the fields. The behaviour was updated here:\nhttps://github.com/jarun/Buku/wiki/Operational-notes#update\nBut not on example 12. I will update that.\nNote that we have a line item to disable update of individual fields.. Description fixed at commit 5df231947392475ced257a6ba5e4cec3c3fbb5a9.. > I cannot update the whole database without losing user-defined tags?\ntags are appended, older tags are not lost. > Tags appended from titles\nnot from title, they are from the page data.\nI mentioned that we have a line item to give more granular control. Please wait for that to come in or raise a PR if you need it right away.. OK. Thanks for explaining.. I have added a patch to master to disable updating tags from the page. Even the tags of my bookmarks have gone for a toss.\nPlease test and confirm. Thanks for the report!. Yes, the titles would be updated. However, you can mark a bookmark as immutable and in that case no field would be updated.\n\nWordpress returns the title of 'Wordpress.com' for any particluar blog's stats page, nothing else\n\nCan you please share an example link?. Can't access the stats page but I can see if I add the home page the title is fetched correctly:\n```\n$ buku -a jakbop.wordpress.com\n488. uNbound | A great WordPress.com site\n\njakbop.wordpress.com\n   + A great WordPress.com site\n```. @rachmadaniHaryono can you please review?. @endless22 can you please address the comment from @rachmadaniHaryono?. Closing this as there's no response in more than 2 weeks.. Awesome find!\n\n@rachmadaniHaryono can you please review?. @jabagawee can you please address the comments from @rachmadaniHaryono?. Thank you!. Thank you!. Thank you!. @jabagawee how is it going?. No problem! Just wanted to confirm we are at it. :+1: . Closing this as the plan is to have a single file.. @rachmadaniHaryono can you please take a look?. Awesome! Thanks a lot! . Thank you!. Closing this as we are going to have a single file.. Guys, I thought it over and I believe the package is in the best form as it is today. Buku is, generally speaking, feature complete and I don't see too many changes being added post this point. The best thing about its current form is, someone can just grab the single file and run it. Let's not lose the convenience.\n@jabagawee I have something for you. Not a major work but a significant one. Let me know if you are interested.. @jabagawee would it be possible for you to work on https://github.com/jarun/Buku/issues/327?. Sure thing! Closing the PR.\n@jabagawee please take a peek into the line item I mentioned above and let us know your thoughts.. > Will you be able to make the same change apply to --update and any other operation that sends out a request to the website? I think this also occurs when you first add a new bookmark.\n@rachmadaniHaryono are we making this change in this PR?. We can't read the DB if it's locked. So probably we should handle the exception, show a reasonable msg and exit gracefully. Can you please raise a PR?. I see graceful handling is already in place. Added this to the documentation.. Hmmm... I cannot reproduce this locally. Can you share your db file with the specific entries which are creating problem?. Here's the result after adding the first 2 sites and then exporting as html:\n```\n~/G/Buku$ buku -a https://zooqle.com/\n1. Start | Zooqle: Verified torrents\n\nhttps://zooqle.com/\n   + | Download torrents at Zooqle\n\n~/G/Buku$ buku -a http://www.downduck.com/\n2. Download Free Movies Games MP3 Albums and Softwares!\n\nhttp://www.downduck.com/\n   + Download Rapidshare Mediafire Letitbit Extabit Free Files\n\n~/G/Buku$ buku -e ~/bookmarks.html\n/home/vaio/bookmarks.html exists. Overwrite? (y/n): y\n2 exported\n~/G/Buku$ cat ~/bookmarks.html \n<!DOCTYPE NETSCAPE-Bookmark-file-1>\n\nBookmarks\nBookmarks\n\nBuku bookmarks\n\nStart | Zooqle: Verified torrents\n| Download torrents at Zooqle\n        Download Free Movies Games MP3 Albums and Softwares!\nDownload Rapidshare Mediafire Letitbit Extabit Free Files\n    \n\n\n```\n\nI don't see any issue. I think you have imported a malformed set of bookmarks.. https://github.com/jarun/Buku/blob/master/buku#L456-L462. To some extent you can do that using the option `--tacit`.. `-d` is completely destructive and the prompt was added based on an issue. It's much safer that way.\n\n`buku --tacit --ai` is a one-time command. I don't see the issue.. This is a great solution! I will add it to the wiki.. Added to the readme for other users. Thanks!. Hi,\n\nPlease bump the version to 1.9 and add a minor routine to move the existing bookmarks.db file if version is greater than 1.8. Otherwise we will break `buku` for people who are already using it.\n. Introduced in commits https://github.com/jarun/Buku/commit/ea02856bc108ea037dce6707fb0de8a323cdfc35 and https://github.com/jarun/Buku/commit/a56fa0381db566a49678f2d5c5f0940608987574.\n\nI can check and get back on the particular URL if you insist on diving further into it.\n. Please retain the brackets. It's a [valid practice](http://stackoverflow.com/questions/9752958/how-can-i-return-two-values-from-a-function-in-python).\n. As I explained in the earlier PR, this may not be required anymore.\n. Please retain the brackets. It's a [valid practice](http://stackoverflow.com/questions/9752958/how-can-i-return-two-values-from-a-function-in-python).\n. Otherwise, can we explicitly return `None`?\nIt's better to have it complete in the first shot.\n. We can do this using a single query instead of querying again and again. One query returns all matching indices. The while loop in 664 should go after line 674.\n. We need to delete the results in descending order by indices... a constraint added by auto-compaction. In case, it's tricky to order the indices from the first query, I am OK with a additional fresh query that fetches only the indices in descending order.\n\nThe query should be fired after the user confirmation.\n. This applies to the regular search case as well.\n. This applies to the regular search case as well.\n. The compaction logic is: bring the largest index to the deleted index, we don't move all records above the deleted index down.\n\nIn your example (with 201 records, for example):\n- 200 is deleted, 201 comes to 200\n- 199 is deleted, 200 comes to 199\n- 197 is deleted, 199 comes to 197\n\nSo 198 is not touched (or deleted).\n\nBut if this is done in the reverse order,\n- 197 is deleted, 201 comes to 197\n- 199 is deleted, 200 comes to 199 !!! but we wanted to delete 200\n- Attempt to delete 200 fails !!! There is no 200 now\n. No problem! ;)\n. For index == 0, instead of fetching all records, can you please fetch the records matching the tag? Please refer to `search_by_tag` method. This will be lighter and eliminate redundant error checks.\n. Lines from 489 to 497 can be reduced to fewer lines (and less processing) using the following logic:\n\n```\ntag_to_delete = DELIMITER + tag_to_delete + DELIMITER (if it's not enclosed already, just verify)\nreplace tag_to_delete with DELIMITER in tag string of each matching record.\n```\n. Please update the program help and man page (refer to append related sections).\n. Please add the check for `delete_tag` flag in line 561 (similar to the current `append_tag` check) to make sure we don't end up refreshing all titles.\n. Please keep a single func, prompt(). Pass the delete flag to it.\n. Please keep a single func, prompt(). Pass the delete flag to it.\n. If noninteractive and delete is True, don't ask the next question in line 1230 and delete straightaway.\n. Use:\n\n```\nif not delete:\n```\n. I guess this doesn't work with `--st` without any keyword, because that will simply list the tags. This needs to be re-worded. Also, this should also go in the **Operational notes** section of the readme.\n. You may want to return before this question if `count` is 0.\n. Just wondering... this works fine if results are always fetched in ascending order. I am not sure if the default search queries guarantee results in ascending order. Would it be wiser to explicitly force order by ID ASC in the DB queries?\n. In that case just don't return if it's noninteractive mode. Ask and delete if user confirms.\n. I would prefer a single function but how about **this**?\n\nInstead of touching several functions what if we provide a `d` keyword at prompt which would confirm and delete all the search results after sorting them by ID? I believe we show the prompt for search results only.\n. I guess the new approach would require much less code and would be much more modular.\n. :+1: \n. Agreed. Please check the new prompt `d` key idea.\n. We'll confirm before delete anyway, so the accidental touch wouldn't be a concern.\n. > Then, to say use '-s' for opening or deleting bookmarks doesn't look nice either.\n\n`s` and `d` remain distinct. We are adding a **prompt key** to delete search results is all.\n. It would be a regular search. No changes there.\n\nTake a look at the keys supported at omniprompt in [googler](https://github.com/jarun/googler#cmdline-options) (at the end of help section). For example, `f` jumps to the first page, `o` opens the current search in browser.\n\nI am suggesting, for `Buku` we provide a similar key `d` which will delete the search results, _IF_ the user presses `d`.\n. OK then! We'll drop the key idea. Please make the other changes as per the comments.\n. should be:\n\n```\nprompt(results, self.noninteractive, delete)\n```\n\nwe don't need to check the value of delete here with the new signature of `prompt`.\n. Just pass delete (as in earlier case).\n. Can delete bookmarks matching a search, when any of the search flags is combined with -d.\n. Why are we calling delete_all_bookmarks() twice? Why not just check for input_func?\n\nAlso, this leads to an issue:\n\n```\n$ buku -d\nALL bookmarks will be removed. Enter y to confirm: y\nTraceback (most recent call last):\n  File \"/usr/local/bin/buku\", line 1763, in \n    bdb.delete_bookmark(0)\n  File \"/usr/local/bin/buku\", line 762, in delete_bookmark\n    self.delete_all_bookmarks()\nTypeError: delete_all_bookmarks() missing 1 required positional argument: 'input_func'\n```\n. How about using `' '.join(mystring.split())`? It will take care of all whitespaces.\n. Please add a space between the args 0 and count.\n. Please use single quotes for strings (wherever possible).\n. Please leave the newline after function desc. We follow the convention in `Buku`.\n. Please leave the newline after function desc. We follow the convention in `Buku`.\n. We need to take care of all tags passed, not just the first one.  Use `parse_tags()` and then process.\n. 1. tags are comma separated. If `--tag hello world` is passed, `hello world` is the tag.\n   If `--tag hello world, this world` is passed, two tags are passed: `hello world` and `this world`\n\n**Please try to understand the existing code first.** `parse_tags()` is a good reference.\n1. Do not use double quotes if not absolutely necessary.\n. Please add the documentation on N=3 in man, help and readme.\n. :+1: \n. Please add `N=3: show only title` in the next line. Otherwise the line becomes too long.\n\nIn line with my earlier comment, you need to add this info in README #usage section, man page.\n. ???\n. ???\n. `tagstr` is fine.\n. Please maintain `tagstr` and `taglist`.\n. Make this `is_tag_valid`\n. Please maintain `resultset` everywhere.\n. Please maintain `dbfile`, `dbpath` and `encpath`.\n. Please maintain `newtags`.\n. Please leave the brackets for readability.\n. Please leave the brackets for readability.\n. Space after `'''` is not necessary. Please remove.\n. Please use\n\n```\nif not (markdown or yaml)\n```\n. Can this be handled without a new dependency? For example, the way we did in markdown without using any markdown library?\n. I think it can be handled easily without introducing a new lib and the parsing the input file line by line. Same goes for outfile as well.\n. Not so many checks please! And let's support only https proxies. I'm looking at something clean like [this](https://github.com/jarun/googler/pull/141/files).\n. Also, please add support for username and password authentication. Many https proxies would warrant that.\n. > Would you have any objections for using ProxyManager in place of PoolManager?\n\nWhat are the (dis)advantages?\n\n> And should I add a new parameter or just adapt to the environment variables?\n\nJust standard env variables. The [Arch way](https://wiki.archlinux.org/index.php/proxy_settings), please.\n. :+1: \n. Would it work without any proxy configured as well? By passing `None`, for example? Then we can use just one manager.\n\nI'm going to sleep now. Please leave your comments. I'll respond once I'm up.\n. Thank you!\n\nAnd thanks for bringing it up. In one of my other utilities we added support for https_proxy, then another user came up with authentication support request. For `Buku` I'ld like to have a clean one-time solution which we wouldn't need to touch frequently.\n. OK. That should be fine.\n. Here's an [example](http://stackoverflow.com/questions/31151615/how-to-handle-proxies-in-urllib3) on authentication.\n. > that scheme\n\nPlease elaborate. The example on the page is for urllib3. Unfortunately, I don't have a proxy to check it out quickly.\n. Also I'm gonna sleep now. I'll respond back tomorrow.\n. Only `https_proxy` please. Please remove HTTPS_PROXY, http_proxy and HTTP_PROXY.\n\nFrom our perspective, we support only `https_proxy`.\n. The example in [this page](http://stackoverflow.com/questions/31151615/how-to-handle-proxies-in-urllib3) shows how to create a header from username and password.\n\nThe following import works on my system too:\n\n```\nfrom urllib3 import make_headers\n```\n\nDid you try it?\n\n> Buku uses urllib3 for proxy support, but that library doesn't support authenticated proxies.\n\nIf the above works, please justify this statement.\n. Please remove the redundant whitespaces.. Please remove the redundant whitespaces.. Why don't we need this anymore?. Input DB file is read-only. We use threading only for refreshdb(). Why do we need this?. Input DB file is read-only. We use threading only for refreshdb(). Why do we need this?. If you mean the chatty print, yes.. Can't we commit once at the end instead of every time?. Please retain this newline.. Should be `check_same_thread=False` (no space). flake8 would throw warning otherwise.. resultset is a shared resource. The read access here should be locked. Same goes for the next line too.. This goes in the power tools group.\n\nCan we make the description short and sweet:\n\n`open all search results immediately`\n\nYou can mention works best with `--noprompt` in the man page.. We need to document this option in README and the man page as well.. This should be:\n\n```\n-w, --write [editor]          open editor to edit fields, works one\n                              bookmark at a time with -a, -u\n```\n\nShould be **same** in program help.. See below for the editor mode **entry** format.. We can remove this line.. **stripped**. Should be `-w --write` and should go below (alphabetically).\n\nThis should also go in fish and zsh completion scripts.. We should just pass the editor here, if resolved. The check for editors, $EDITOR should be done in main() and failed if editor is unresolved, without calling this api.. lines 2193-2201 belong to main(). No double quotes unless required. Use single quotes.. No double quotes (applies to all double quotes). Make sure lines are < 80 chars.. `# for some reason sometimes this don't get saved properly`\n\nI understand this came from the original source. Is there a solution yet?. I think this check should go first.. 'single quotes, single quotes, single all the way.'. please remove these source comments.. `--write`?. `--write`?. Check earlier comment on description.. `--write`?. Can we also ensure `buku --write` opens the editor (even if `-a` is not passed) and adds a bookmark if added from editor?. Probably we can have a separate API to check editor is available or not and call that from add and update option processing from inside main().. Limit the number of args using `nargs='?'` in addarg(). Not so deep down below.. OK. I'll add those.. Ahh OK. Then make sure the line is < 80 chars, otherwise move the comment above the line.. :+1: . Same way you do now:\n\n```\nif args.write is not None:` # it is actually passed\n    if args.write: # it is not an empty list\n        process args.write[0]\n    else\n        check $EDITOR\n``` . Oops!. `'-w', '--write', nargs='?', const=['no_args']`. And it should go in the completion scripts too.. Please make the name shorter, like `read_in()`. Some lines are crossing 80 chars.. `read_in('Append the tags to ALL bookmarks? (y/n): ')`. `read_in('Delete the tag(s) from ALL bookmarks? (y/n): ')`. `resp = read_in('Append specified tags to ALL bookmarks? (y/n): ')`\n\nplease change it to:\n\n`resp = read_in('Append the tags to ALL bookmarks? (y/n): ')`. `resp = read_in('Delete specified tag(s) from ALL bookmarks? (y/n): ')`\n\nplease change it to:\n\n`resp = read_in('Delete the tag(s) from ALL bookmarks? (y/n): ')`. Why not call `cleardb()`?. Please rename to `get_all_rec()`.\nJust to maintain the same pattern used in other APIs.. Why not just\n\n`return self.cur.fetchall()`?. Have the function. Just avoid the temp var `result_set`.. :+1: . The func name should be `delete_all_rec`.. Please add a blank line below this line.. getpass import was intentionally done here. Please keep it this way.\n\nI wanted on demand loading because once the DB file is decrypted it's left as a flat file for regular Buku operations. Didn't want to do an extra import all the time even when executing non-encryption stuff.\n\nGenerally either encrypt or decrypt is done in one instance. If you can import it (and other BukuCrypt dependencies) at a class level, I'm fine with it, but not outside the class.\n\nIf you need getpass in your test case implementation, please import separately outside.. getpass import was intentionally done here. Please keep it this way.. Would it be possible to place requirements-dev.txt file within the tests directory in some way? Something similar to what we are doing within the `api` directory.\n\nThere are too many open files at the top level already.. As I mentioned,\n- if is_range is True, we care only about low and high (index not even checked)\n- if is_range is False, we care only about index (low/high not even checked). As per the last discussion we are not raising an AssertionError here. Can you please modify the check accordingly?. Please make it:\n\n    N=4: URL, title and tag. Please make it\n\n    = 4, show URL, title and tags in a single line. Should be\n\n    N=4: URL, title and tag. \"requires minimal python3.5\"\n\nshould be \n\n    \"requires Python 3.5 or later\". \"requires minimal python3.5\"\n\nshould be \n\n    \"requires Python 3.5 or later\". Maybe just `import_md()` and `import_html()`... short and sweet!. Not related to your changes but please change `filepath` to `fp` everywhere.. Leave it as `filepath`. Otherwise this will lead to too many changes.. ~Why is this always set to 'y'?~. Can you please change this to:\n\n    add_parent_folder_as_tag = (resp == 'y')\n\n?. Please use till end of line (limit 80 chars). We follow that convention almost everywhere.. Please use till end of line (limit 80 chars). We follow that convention almost everywhere.. Please use till end of line (limit 80 chars). We follow that convention almost everywhere.. No need to to add return if you are not explicitly returning something or `None`.. Or at least show a reasonable error message and bail out gracefully.. Reduce `FF_BOOKMARK_DATABASE_PATH` to `FF_BM_DB_PATH`.. Reduce `GC_BOOKMARK_DATABASE_PATH` to `GC_BM_DB_PATH`.. No need of a newline between try and catch blocks.. Please add a newline before this line.. Please add this section reference to the Table of Contents (index).. Shouldn't this line be:\n\n`tags = parse_tags(formatted_tags)`?. Please update the third point, we are now allowing 139 chars.. > Exclude bookmarks matching certain tags from the results by using `+` followed by the tags.\n\nshould be\n\n> Exclude bookmarks matching certain tags from the results by using `-` followed by the tags.. `taglist`. Please change to\n\n> logerr(\"Cannot use both '+' and ',' in same search\"). Can we use Fedora 26? It's the latest release.. Please add the entry for CentOs too. Just keep it disabled.. I used `python-beautifulsoup4` io bytepackager (when it was up) and it worked there. Is this the problem on CentOS that you mentioned earlier?. OK. You mentioned some repo issues. Got it!. > I recently fractured a rib... Been mostly on the laptop in bed.\n\nJust take rest! Recover soon.. The options are in alphabetical order. Same for all the completion scripts.. Please use the following syntax like it's for other options in this man page:\n\n    .BI \\--colors \" COLORS\". This looks awful. See my comment on line 3306 for more details.. The color for ID+title reflects in `buku -p` but not for the search results. Please fix.. Please change. See my comment on line 3306 for more details.. I think you have not used ID_str. That's the problem.. Can we have something similar to googler?\nID - bold  cyan (`G`)\nTitle - bold bright green (`K`)\nDB Index (within []) - `\\x1b[2m` (keep it hardcoded to dim)\nURL - bright yellow (`l`)\ncomments/notes/desc - normal (`x`)\ntags - blue (`e`)\n\nTesting: Add a bookmark with url, title, tags and comment. Then\n1. print it\n2. search for it\n\nto ensure your changes are good.. It has to go in 2 places under features: README and man page.. Please change it to `ixejJ is not a valid color string`.. This takes an arg. Add `-r`.. Please change to:\n\n`'(--colors)--colors[set output colors]:color string'`. This should also go into the `opts_with_arg` group below.. Please remove `(see man page for details)`.. Please remove `(see man page for details)`.. Please remove `(see man page for details)`.. Please remove `(see man page for details)`.. For help, this was in the right position (just above `--nc`). My comment was only for the auto-complete scripts.\n\nAlso, please change it to:\n\n`--colors COLORS             set output colors`. `--colors COLORS     set output colors`\n\nand please move it back to just before `--nc`. Please change the name to `buku` i.e., starting with lowercase char.. Please change to:\n\ncomplete -c buku -l colors       -r --description 'set output colors'\n\nThe `-r` stands for required.. Please move it to the top point:\n\n`Lightweight, clean interface, custom colors`\n\nAnd add this in the man page too (we show the features in man page as well). Please move this to above `--nc`. The space after `.` is missing.. The DB ID is not showing in dim. In\n\n2.GitHub - mewrev/dissection: The dissection of a simple \"hello world\" ELF binary. [305]\n\nThe `[305]` at the end is the DB id. It is shown in search results. You have to use `\\x1b[0;2m`. Sure! Please take your time. This is a big PR, so nothing to hurry about.. `Lightweight, clean interface` is already at the top of the feature list. Please append custom colors to it instead of a new entry at the end.. Please check googler's help on `--colors` and copy it verbatim.. Should be the topmost line.. ???. OK. In that case just use whatever is there in googler.. @alex-bender I can see you are walking through the Chrome json file, But where are the bookmarks actually added? I don't see any `add_rec()` call for Chrome bookmarks.. I have fixed this in latest trunk. Also made the changes so that auto-import works like importdb().\n\nThe only thing that's remaining is:\n\nImport parent folder as tag **for Firefox**.. For Windows it will not work. The profiles.ini is above the Profiles directory. Please ensure you have tested on Debian, Ubuntu, Windows and OS X. If you don't have access to any of these OS -es let me know.. Please test the cases below:\n\n- profiles.ini is a blank file\n- profiles.ini is a directory. What if profile_path does not exist?\nWhat if it is not a dir?\n\nThis function should check both the cases and return None accordingly.. Add a blank line above this.. OK. I'll test it on Windows.. OK.. This works for the ini file. The actual profiles are within the `Profiles` directory.\n\n```\n- Firefox\n---- Profiles\n-------- ...default...\n-------- ...profile1...\n---- profiles.ini\n```. No, you have to add the check:\n\n```\nif not os.path.isfile(profile_path):\n    return None\n```. This will take care of both the cases.. ~OK. I'll test.~ Can't test. No access to Windows.. OK.. What is this change? Please add a comment.. Please make it\n\n    # Needed to skip 'sync_transaction_version' key from roots\nNote the quotes around sync_transaction_version. make the default field filter 0 and call `print_single_rec` within it when filter is 0.. Call `print_single_rec` within `print_rec_with_filter` and replace calls to `print_single_rec` everywhere else with `print_rec_with_filter`.\n\nMake the default field filter value 0 so you can omit the param when the intention is to call `print_single_rec` or filter is not relevant.. 1. Please change to `logdbg()`, we don't want to show this to users.\n2. Print `path` in the debug log, just `path` does not convey anything.. I think we can just make it:\n\n    logdbg('get_firefox_profile_name(): {} does not exist'.format(path)). use N0, e.g., 10, 20, 30.... Combine the rest 4 similar to the help text. No need to add each of 10, 20, 30, 40.... Change the help text here as well.. You missed `colorstr_env`. ;). I think we should support `colorstr_env` it in Windows as well. If someone is setting this env var he knows what he is doing.. Why not catch generic `Exception` here and print e? e will show what type it is.. Use 1 logerr... e + URL: %s .... I think it would be good to order these alphabetically.. Make it `if is_bad_url(url):`.\n\nWe should have both checks.. :+1: . If the defaults are same as that on Linux please add a simple:\n\n    if sys.platform.startswith('linux') or sys.platform.startswith('freebsd'):. Please keep the instruction within backquotes:\n\n    `pkg install www/py-buku`. similar to the instructions for NixOS and PyPi.. Please maintain the alphabetical order.. I think we can add a check for args.stags non None under args.sany and do this. Same goes for args.sall case and args.sreg case. As the priorities of sany, sall and sreg are greater than stag the code will never enter the `args.stag is not None` case in line 4341.. We must check for the length too because users may pass `t ''` (empty string) to trick the program.. Instead of a separate API we can do this under each case sany, sall and sreg if args.stag is not None and len(args.stag) > 0.. We should also pull args.keywords above args.tags and treat it the same way as args.sany. Please leave a blank line before the first line of code.. I think the order should be:\n\n1. search keywords\n2. 1 - search without keywords\n3. 2 - search tags. Now that each option has it's own keywords, please specify [...] after `sany`, `sall`, `sreg` and `without` (like we have after `--title`).. When we add a new option it goes to documentation as well (man, readme) but I will cover it in this case. We are already lagging in documentation in certain other areas.. How about using `-x` and `--exclude`?. It would eliminate any confusion between small and capital `w`.. With the current logic, if we apply:\n\n`--sany a b c --stag d e f --exclude g h i`\n\nthe `exclude` part will never execute.\n\nAt least we should make `if exclude_results` independent i.e. pull it out of the `tags_search` case.\n\nI will make the change.. ..., orgfile if the extension is '.org' or another....     - [Install server](#install-server). Add a newline before the section.\n\nSection name should be #### Install server. I think the rest of the content should go to the README within the `server` directory. Also please link to jarun/Buku as server is finally going to be merged to the main repo.. @rachmadaniHaryono when the review changes are done, can you please add a README within server and add the following contents there?. There are places where we need to change the words or sentences. I think I will do that myself when the complete PR with all changes are done.\n\n@tom-i I think a better approach would be to raise the PR against @rachmadaniHaryono's repo for now. Add the changes to the README within the server directory.. I am pushing the changes now.. Understood. Sorry about that!. @rachmadaniHaryono can you take a look on the Travis failure?. OK, please raise the PR and approve yourself ;).. Please link to `bukuserver/README.md` and add the details there. I think we can take all the details from tom's PR.. Please use single quotes.. Please use >= for pytest and beautifulsoup4. @Infinisil could you please consider submitting [pdd](https://github.com/jarun/pdd) to Nix?. Thank you!. :+1: . What is (env)?. Yes. We can omit this one. The idea is all options should be present in the completion scripts.. > view bookmark details. Removing the code makes the imports in line 6 and 16 of the file redundant. That's the reason behind build failure.. Please make it `DB_FILE`.. Please remove this newline.. Please remove this newline..",
    "emk2203": "Thank you. I looked deeper into the format of the Netscape bookmark file\n(de facto standard for browser export), and it shouldn't be too big a loss\nto reduce it to fit your examples. I was afraid of loosing too much\nadditional information from this file when I made the request.\nArun Prakash Jana notifications@github.com schrieb am Mi., 11. Nov. 2015\num 08:56 Uhr:\n\nI have added elaborate examples on batch import and update. Please check\nthe Examples section.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/jarun/MarkIt/issues/1#issuecomment-155697263.\n. \n",
    "AndreiUlmeyda": "Weelll, great flipping idea! Why not do something like\nopera $(buku -p -f 2 | awk '{print $2}' | peco)\nhoorray for pipes!\nGonna fiddle a bit and see if tags/titles/descriptions can be made to fit nicely in there as well. That one line will not be fully convenient yet as it will open the browser even when exiting without a selection.. Herroo!\nA few TODOs might possibly be solved by marrying buku and peco as preliminarily tested thereabout.\n Continuous search at prompt\n Delete all records based on a search result\nand maybe, since peco supports sticky selections,\n* batch tagging.\nI am thinking pucu? beco? I dunno! I bet those are naughty words in one language or another.\nIt would take the form of a little script mashing buku output into a line that looks acceptably pretty in peco and contains all or most of the searchable content (which might fail if preferred search targets contain more than one or two of the longer fields, url/description/tags, but we'll see) and parsing those same lines afterwards for everything from opening the url(s) to batch tagging/deleting (these might require the index).\nCheerio!\nUPDATE: try buku -p -j | jq '.[] | .title + \" | \" + .uri + \" | \" + .tags' | peco (depends on jq) for a glimpse of how it might look like. But do not worry! Things need to get ugly before they can start to get better. Then again, grandma has lied before.. Altrightythen, I've thrown the  idea inside a little script and I am pretty sure it classifies as simple, thanks to the inherent neatness of buku. I will try and get the suboptimal line structuring sorted out over the next few days and would greatly appreciate a bit of input from people who can imagine themselves using it. I will open an issue there later laying out where the problems lie and what information from users is needed to get it straight. If that isn't there yet just throw whatever thoughts you have at it in as many issues as you like.\nCheers. Aw man, that was the best part. But ok, I will do that. Thanks for checking it out. @jarun Okay, it is done. And I know climate change is an issue but please don't make me change it again. A little question now that the thing is sufficient for my own needs: Would you rather have it existing as a separate project, have it incorporated into buku, or none of the above? Either thing is fine with me. I was happy to be able to improve my bash a bit but in case some people find use for it and request more than one or two additional features I would just rewrite it in python anyway and have it require half the amount of code (or a third when incorporated into buku).\nCheers. @jarun Sparkles with me! Let's do that.. Neato. A pleasure doing business with you.. I think it is the DB index I meant. The thing that buku expects as argument for update operations :]. An the reason it might be needed is that, in case any program tried to act as some sort of frontend for buku it might need to call buku and provide the index argument for a particular operation on that bookmark. Such a frontend would probably choose the most generic and structured buku output available (especially since there is no formatting option that outputs all fields, title being seperate) which is json. Since I do not, as of yet, need it too badly, though, I will just wait and issue a PR then. Should I implement it my intuition would be to include the index at least in the json formatted output as this is the most likely to be used by other programs. Need to try and find out if it breaks stuff for persons already using it (indicating their not parsing too robustly :stuck_out_tongue: ), though.. Thanks a bunch, appears to work just dandy!. ",
    "ghost": "@jarun Thanks man cool app by the way\n. Cool cool\n. @jarun Had no intensions to upset you was just a question..\nIts just how i learned to structure my code and is readable haha had a instant headache browsing your code haha. Reason why i brought it up because i enjoy viewing new changes via my mobile device and the browser gets stuck and crashes i have tried on multiple devices and browsers.\nwas just an idea and question.... browser is fine on my pc, its the browser on my mobile device.\nBut its cool you answered my question have a great day.\n\nFrom: Arun Prakash Jana notifications@github.com\nSent: Thursday, February 16, 2017 4:15:23 AM\nTo: jarun/Buku\nCc: Nico Travassos; Mention\nSubject: Re: [jarun/Buku] File structure (#119)\nI wasn't upset. The questions I had are the reasons why I use a single file in all of my Python projects.\nthe browser gets stuck and crashes\nThe file itself is less than 100 KB. You should blame it on weak JS scripting. I faced no issues with Chrome Browser on a reasonably cheap Lenovo A6000.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/jarun/Buku/issues/119#issuecomment-280209027, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHbwWV-zRWJOfbidSF9kCgPygAl-M-kmks5rc7E7gaJpZM4MBzDz.\n. oh okay my apologies didnt know lenova makes phones i was having issues with Samsung s7 edge\n\nFrom: Arun Prakash Jana notifications@github.com\nSent: Thursday, February 16, 2017 8:12:44 AM\nTo: jarun/Buku\nCc: Nico Travassos; Mention\nSubject: Re: [jarun/Buku] File structure (#119)\nA6000http://www.fonearena.com/lenovo-a6000_6152.html is my mobile. :)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/jarun/Buku/issues/119#issuecomment-280241090, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHbwWUDYhX2-NwSvYp2O-dokyY8B6t6Iks5rc-jcgaJpZM4MBzDz.\n. hahaha\n\nFrom: Arun Prakash Jana notifications@github.com\nSent: Thursday, February 16, 2017 8:29:27 AM\nTo: jarun/Buku\nCc: Nico Travassos; Mention\nSubject: Re: [jarun/Buku] File structure (#119)\nEven I didn't know before i bought this one. ;)\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHubhttps://github.com/jarun/Buku/issues/119#issuecomment-280243593, or mute the threadhttps://github.com/notifications/unsubscribe-auth/AHbwWaPKvvk3mNDF0MrQS0vwsLYTmAG2ks5rc-zHgaJpZM4MBzDz.\n. No,  I'm saying that bookmarks.html isn't used if places.sqlite is in place.\nSo html export FROM buku TO firefox's bookmarks.html is of no immediate use.\nAt least, here, it's completely ignored.\nIt appears we need 'export' to places.sqlite ...\n. ",
    "ibaaj": "I will look how you do it ;)\n. ",
    "sharethewisdom": "thanks, seems to work fine! I tested with:\nsh\n$ myurl='http://www.youtube.com/watch?v=Dd7dQh8u4Hc'\n$ mytitle=$(wget -qO- ${myurl} | perl -l -0777 -ne 'print $1 if /<title.*?>\\s*(.*?)(?: - youtube)?\\s*<\\/title/si')\n$ ./buku -m ${mytitle} -a ${myurl} youtube\n   Added at index 1\n$ /buku -p 1\n   1. http://www.youtube.com/watch?v=Dd7dQh8u4Hc\n    Why Are Bad Words Bad?\n    [TAGS] youtube\n. ",
    "CaptainQuirk": "Hi,\nI'm on it. May last a bit since I don't know anything about python !\n. Hi,\nI started working on a topic branch. For the moment, I only handled the the buku -P case.\nWould you be so kind and have a look to tell me if the way I'm doing things is acceptable to you ?\nThanks in advance\n. I made some modifications on my last commit and made a forced update on the same branch. I applied the same method to the buku -p N and buku -s use cases.\nI'll still have to update the usage section and the man file (do you do it by hand, by the way ?)\n. Hi !\nToo much on my plate this week ! I'll get to it as soon as I can !\nCongrats for the release !\n. Hi,\nI'll try and have a look on this next week. \n. There is a simple way to avoid typing too much, it's defining aliases. I seldom type git checkout in the terminal but gc. I think it's reasonable to count on buku users to know of this mechanism and take appropriate measures to save keystrokes.\nA subcommand name will always be easier to understand than command line switches, especially if the subcommands are commonly used words for terminal cli project.\nI would add that there is currently a mix in the options between actions and flags: for example, -a is used to add and can be used along with -w which is a boolean switch.\nSubcommands would help to clarify this.\n. I see what you mean. Your kingdom, your rules !\n. There's also a package named  arghandler. It seems to handle subcommands specifically while argparse doesn't out of the box !\n. Hi,\nIt represents too much work for me for now given the amount of time I have and my relative ignorance of python.\n. Thanks for the heads up !\n. Hi !\nThanks for the work ; argparse seems to simplify things a lot\nI've started having a look at the changes your pull request introduces. It was a bit difficult because there were some changes that have nothing to do with argparse, at least to my knowledge.\nThis is no big deal in itself, but makes it more difficult to review. If you're interested, I can comment on them so you can put those commits aside for other pull requests.\nTell me what you think !\n. You've called your pull request \"Switch to argparse\" right ?\n. ",
    "zmwangx": "Happened to stumble upon this.\n\nMy other utility googler already has an example implementation (no long options though ;D).\n\nDo you want to add long options? It would be trivial.\n. My digression (see comment above) is continued at https://gitter.im/jarun/googler?at=56f6f80776b6f9de194b8333.\n. @jarun Check out my long-options feature branch if you care at all (see Gitter chat), or let me know otherwise (I don't feel strongly either way).\n\nHowever, the OP is looking for subcommands and optional commands in addition to long options.\n\nI know, and sometimes I like that (I'm probably in favor of subcommands in the case of Buku, if I actually use it). And that's the domain of argparse.\n. > argparse doesn't out of the box !\nNot true at all. PSL docs even include several examples of how to parse subcommands: https://docs.python.org/3/library/argparse.html#sub-commands. A real world parser can be directly modeled on the last example, and I've done it numerous times in the past with great success. Of course I would pick argparse over some random wrapper every time you ask me.\nBy the way, I looked at that arghandler thing's implementation. It saves hardly anything: sure, the subparsers.add_parser lines (and optionally, the set_defaults(func=foo) lines) are sort of collapsed into one, but it then requires you to write a separate parser for each subcommand and manually invoke it, which could be more work then the args.func(args) approach. The latter is also way more elegant if you ask me.\nEDIT: On second thought, it probably won't be more work \u2014 just basically the same. Still, I don't see any benefit. (Especially considering it's largely untested compared to PSL. Dependencies are points of failure beyond control, so no.)\n. Is this specific to Windows, or does it happen with FF and gang on nix too? And if it's the latter, does new=2 fix it on nix?\nTo troubleshoot, one should just go read https://github.com/python/cpython/blob/master/Lib/webbrowser.py, which is pretty straightforward.  If you can figure out the problem and cook up a patch, then great, submit a pr to python/cpython; if you can't, report it to http://bugs.python.org/.\n\nI may look at some alternative way of handling this and throw webbrowser out of the window\n\nI recommend not wasting time on cross-platform IPC.. Sorry, didn't see the previous ping.\nThe formula does not include \"its own python3\". When it is installed, Homebrew creates a venv with Homebrew's python3, then installs the dependencies inside. The dependencies are completely contained, isolated and reproducible (and hence guaranteed to work reproducibly), which is not possible with a generic shebang.\nIt sounds to me like you rolled back the Homebrew python37 upgrade on your own (which is not recommended; use, say, pyenv instead) and did not brew reinstall buku afterwards.. I should add that you probably rolled back the upgrade and removed the keg (i.e., /usr/local/Cellar/python/3.7.0) entirely, rendering the venv stranded. I believe if you simply switch to a previous 3.6.5 keg with brew switch python 3.6.5 and leave the 3.7.0 keg alone, buku should still work.. ",
    "AMDmi3": "Updated\n. Likewise! :)\n. Not really, sorry. Just seen post on reddit and wanted to do some drive-by commits.\n. ",
    "SagarBhuta": "Update: The exact word match feature is still up for grabs.\nHi @jarun ,\nI would like to work on the Exact word match feature. Is it possible for you to give an overview of what you have in mind for the same?\nFrom what I could infer, it would involve modifying the searchdb() function and formulating the query without the wildcard?  Would there be a separate flag in the command line invocation for this feature?\nLet me know. Thanks!\n. ",
    "manipuladordedados": "What you think about a sync option with Simplenote?\n. ",
    "toyg": "I've started looking at the code, and please take the following as constructive criticism :) nobody is born perfect and any code can get better (except Knuth's, maybe).\nThere is a bit of cleanup to do, which I'm happy to help with:\n- Function naming is all over the place (some are camelCase, some are snake_case, some are just alllowercase)\n- there are dangerous globals in various places. \n- if you find yourself passing the same type of variable in multiple places, then you should probably use an object and just hold references to those vars. For example, I've refactored all methods related to database connections and cursors in one BukuDb object (i have a big pull request coming up), and it's so much cleaner at the point of use.\n- CI alone tells you very little if you don't have tests. So I think it would make sense to add tests first.\n- The current approach, where it's all self-contained except for crypto support, is a bit middle-of-the-road and to be honest, nobody will realistically use the crypto stuff if they are not told at install time what they need (through a requirements.txt file).\n. Sorry, been busy. Will try to get something done today.\n. Hey, you've done a lot of cleanup yourself, great job :)\nThere is one real stumbling block left, which is the way you handle main, or rather how you execute everything after your block if __name__ == '__main__': in all cases. This means that it gets executed even when I try to import it as a module, which we don't want. Is there any strict requirement for the current behaviour, or can you simply indent everything once, so it will all fall inside the if __name__ block ?\n. Have a look at pull #21 \n. Completely agree.\n. i did smt stupid. will do it again\n. ",
    "kirill-krokodil": "hello, jarun! great app, thank you!\ni used to use delicious, but... so your app is good alternative.\nit would look much more interesting for me if it had web-interface.\ni would be very glad if it's not contradict to your vision of app evolution :)\nunfortunately my programming skills not so good, so i'm not sure, that could perform it, but it seems not very hard to mount flask to your app.\nthank you!\n. ",
    "xcombelle": "a nice to have would be a pypi packaging\n. @jarun pypi work well for distributing standalone programs, livestreamer, vprof are maybe library but I never used them as such and always as standalone program and they fit well in my ~/.local/bin\n. ",
    "carnager": "buku can add new bookmarks via xsel, which is great.\nBut buku cannot be used non-interactively for actual searches. \nI would love to see an option that simply dumps needed info to a terminal (maybe even allow custommizing the output format)\nThis way one could use the output in dmenu/rofi.\nexample:\nbuku -S --non-interactive --format '[%id%]\\t%url%\\t%tags%' foobar\n[ID] https://some_url/foobar.com   tag1, tag2, tag3\n[ID] https://some_other_url.co.uk  tag1, foobar_tag, tag3\nObviously the same logic applies for simply listing all available bookmarks\n. great. any chance for custom format too? or at least a hardcoded 1-line output if custom format is too much to ask? Something like -f N does for the -p option\n. I am on git master...\n```\ncarnager@caprica ~ > Buku/buku -S linux -f2 \n1. http://doodle.com/bk6wuq88qq6tmdcd#table [21]\n\nDoodle: #archlinux.de Sommergrillen [doodle.com]\n```\n\n```\ncarnager@caprica ~ > buku -f 2 --st hitler --noprompt \n1. http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl   [106]\n\nCats That Look Like Hitler!\n   # cats,fun,hitler\n```\n\nBy the way, I am working on this: https://fb.53280.de/jycvV\n. > Can you explain your use case? Why do you need this?\nhttps://github.com/carnager/buku_run\nI worked around the things I would have liked to see directly in buku (custom format of -p). works good for now :)\n. It's not a plugin at all. rofi has a dmenu mode, which acts as a simple stdin selection tool and dumps selection to stdout. It's a great tool for such scripts.\n. Another feature request: git support. If the bookmarks directory is a git repository, commit changes to db locally.\nAlso add an option to commit the changes to a remote git, if present in git config.\n. @jarun sure!\n. great. just made a checkout from master and all works as expected\n. no, I dont want , in my tags. I wanted to associate 3 separate tags with the entry. So I probably misunderstood the syntax. How is it done correctly?\n. ```\ncarnager@caprica ~ > /home/carnager/Buku/buku -a http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl hitler, cats, fun\n106. http://www.catsthatlooklikehitler.com/cgi-bin/seigmiaow.pl\n\nCats That Look Like Hitler!\n   # cats,fun,hitler\n```\n\nI actually tried this before, but the output confused me. I checked now with buku --st and this confirmed that it actually works. thanks.\n. the problem with that last commit is, that the actual representation differs from what buku expects the user to type.\nRepresentation: tag1,tag2,tag3\nExpectation:      tag1, tag2, tag3\n. I cannot confirm\ncarnager@caprica ~ > Buku/buku -a \"https://github.com/jarun/Buku\" python, linux, github\nresults in:\n```\n106. https://github.com/jarun/Buku\n\nGitHub - jarun/Buku: Powerful command-line bookmark manager. Your mini web!\n   # github,linux,python\n```\n\nAnd an example with unquoted tags without spaces:\ncarnager@caprica ~ > Buku/buku -a \"https://github.com/jarun/Buku\" python,linux,github\nresults in:\n```\n106. https://github.com/jarun/Buku\n\nGitHub - jarun/Buku: Powerful command-line bookmark manager. Your mini web!\n   # python linux github\n```\n. seems to work fine!\n. https://github.com/jarun/Buku/pull/37\n. hmm. \n\nbuku --st --noprompt\nusage: buku [OPTIONS] [KEYWORD [KEYWORD ...]]\nbuku: error: unrecognized arguments: --noprompt. or is there another way to list all tags that I am not aware of? :). ",
    "jomendoz": "Hi @jarun \nI've just come across your project and I really like it. I've been reading the issues, comments and source code so I have a little grasp of the current status.\nSomething that I really cared when I started using the bookmark system in Chromium and then Firefox was the tree hierarchy that gives you the folders and sorting by date or name.\nWhen I encountered the db schema in buku, I noticed you disregarded the tree structure of the bookmarks and every element only has the meta, the tags and description. I wonder if you have some thoughts about this topic and if you plan to extend your data model to include hierarchy.\nUseful information about the Chrome and Firefox bookmarks hierarchies can be found in [1] and [2].\nRegards.\n[1] chrome.bookmarks\n[2] firefox bookmarks\n. ",
    "bcooney": "@jarun works great, thanks for that! \n. ",
    "cd2357": "Hey @jarun, if you're thinking to add an importer, have a look here for a sample implementation https://github.com/cd2357/Moose/blob/master/src/main/java/moose/importer/Importer.java\nIt's something I wrote for a similar project. It includes\n- documentation of the bookmarks.html export file format (see links in header)\n- handles imports from Chrome / Firefox / Safari bookmarks.html exports\n- identifies and adds all parent folders of a bookmark as tags\n- to test it out, there are some bookmarks.html samples to play around with from different browsers (each with 4 bookmarks and 3 folders) : https://github.com/cd2357/Moose/tree/master/test-data/html-exports\n- and of course a short integration test based on that sample data : https://github.com/cd2357/Moose/blob/master/src/test/java/moose/importer/ImporterIntegrationTest.java\nIt's written in Java, but the logic can easily be adapted for Python.\nCheers.\n. Cool, glad I could help.\n. ",
    "alaroldai": "According to Homebrew, the installed version of Buku is version 2.0:\nbuku: stable 2.0 (bottled)\nCommand-line bookmark manager\nhttps://github.com/jarun/Buku\n/usr/local/Cellar/buku/2.0 (9 files, 108.7K) *\n  Poured from bottle on 2016-05-26 at 17:15:24\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/buku.rb\n. Ah, makes sense. Thanks!\n. ",
    "dstuxo": "It seems it was a locale issue.\nSetting locale to en_US.utf8 has fixed the problem\nThe result is now:\n297. https://medium.com/@Spurrya/20-pcb-tips-and-tricks-47b95a4ba706#.4ksvpq9hi [297]\n\nFew PCB schematic tips \ufffd\ufffd\ufffd Medium\n\nThanks\n. The problem appears when you try to update the title for a single record and forget to specify the index\nI mean I executed \n$ buku -u -t  \"new title\" \nwithout the record number - so all the records were updated with the new title.\nThat would not be a big issue if all the records would have been successfully added from the beginning (no auto title extraction errors ), but for some, I manually edited the title, so they're lost.\nThis fetches the info from the web, but only for some bookmarks.\n$ buku -u \n. Another suggestion..  It would help to have the bookmark number (the [xx] on the right) highlighted.\nWould be more easy on the eyes when looking for a specific record..\n. I confirm, it is fixed now.\n. Ok. I will do it like that in the future. Sorry\n. I confirm that deleting a range or a list of records works now.\nHowever deleting multipole ranges doesn't. I assume this is not implemented.\nAbout deleting based on a search result,  for me this would be very useful.\nIt will allow to cleanup the bookmarks database easily. For example: delete all records matching a tag, outdated subject.. etc\nIt is not straightforward to do this by searching and then delete specific records (by providing the indexes, or ranges).\nI would create a combined function (search & delete).\nEg. $ buku -s \"subject\" -d\nBy the way, currently, if you execute the above command, first it will want to delete the entire database, then to perform the search. ;)\nI would keep the operations separated.. while the combined function is not available.\n. > Got it! Would it be possible for you to contribute this feature?\nNot too much spare time, but I'll look at it in the following days.\n\nTrue. -s and -d are treated separately and -d has higher priority. \n\nYes, but I don't quite see the logic behind using both at the same time if the combined function is not available (yet).\nAnd in this particular case, when no argument is provided to \"-d\", they're mutually exclusive. \nI mean you delete the database (records), then search for something ?\n. Created pull request https://github.com/jarun/Buku/pull/49\nPlease review\nThanks\n. I was thinking on a simple search (no regexp in this case) just to identify the bookmark, and only for a subset of records (eg to filter the search results)\nI can imagine the overhead of searching the complete db.. :)\nAnyways..\n. Yes. Please see the changes.\n. > We need to delete the results in descending order by indices... a constraint added by auto-compaction\nThe current imlementation, when only the first record is deleted, may not be optimal, I agree, but deleting in reverse order doesn't quarantee no db copaction, as I see it.\nEx. when trying to delete records, 200,199,197...  since 198 is not deleted and 197 is, compaction is still required.\n. > The query should be fired after the user confirmation.\nActually, the first query is just to display the results, since the user needs to review first the bookmarks to be deleted..\nThen, if the confirmation is ok, query & delele in a loop takes place (with no confirmation)\nProbably I should have explained a little bit the logic..\nThe loop continues just for delete. For search-only, it's just one query\n. One query returns the matching indices, but since auto db compaction fires after each delete, the indices changes..\n. Ok. it makes sense now. I'll do the changes. Thanks\n. To delete blindly the search results is a dangerous approach.\nI suggest to disable noninteractive mode for deletion,\n. I thought on this. How you prefer.. It will overload the prompt function and I don't see it necesarly.\n. it will never get into the prompt if the search doesn't return anything.\nin searchdb() there is a check for the results len\n. not 100% sure either, but I doubt that the results would not be ordered by the id\n. I see. But delete is a different operation and one can pass one of the flags -S, -s, --st, then accidentally touch 'd' (delete) instead of 'o' (open)\n. Then, to say use '-s' for opening or deleting bookmarks doesn't look nice either.\n. Not sure I understand..\nSo it would be a regular search with one of the flags -s -S.. and the prompt will ask  to open a record or delete them all ?\n. --st without any keyword still lists the tags\n. If this is the case, I think it's confusing. I agree from the implementation pov it's cleaner, but it's not intuitive.\n. My only concern is the consistency of the cmd line flags.\nFrom the user point of view, he can delete individual records and even ranges by using \"-d\" flag, then if he wants to delete using different criteria he has to use only \"-s\" which would also allow deletion.. :)\n. Already made. Please see the last commit\n. ",
    "Chinggis6": "for archlinux it was localectl set-locale LANG=en_US.UTF-8, and a reboot after (sadly). Why do I get the error above when i run buku -p? Please help me with solving that. I install buku using pip on Arch Linux (but I also can use pacman or install it form AUR).. Thanks, setting the locale to UTF-8 solved the issue:\nexport LC_ALL=en_US.UTF-8\n\nI uncommented the right line in /etc/locale.gen and re-generated locale using locale-gen but it did not set the variables for some reason.\nSo, I had to set the environmen variable manually using export; I wonder why the previous attempt failed.. ",
    "KrzP": "I've never been using Travis before. Nevertheless, I'll take a look at it.\nIt looks quite handy.\n2016-06-01 6:44 GMT+02:00 Arun Prakash Jana notifications@github.com:\n\nsooner or later\nYes, very much. Thank you!\nI'll try to write more tests before long.\nIt would really help if you can set the full test framework up using\nTravis.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/34#issuecomment-222891307, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe/AG2_3MAoiKFAk-TICzRxFH-G8Ufn8Dajks5qHQ4zgaJpZM4IrIVg\n.\n. Currently invoking buku with buku -r old_tag new_tag doesn't replace tags.\nAlso: buku -r tag doesn't remove a tag.\n. OK, now I see it, I totally misunderstood how tags are working here. Should have asked before code, sorry for confusion. I think you can close this pull request, I'm going to rewrite test_replace_tag properly.\n. I was assuming they are space separated, not comma separated. Docs are right, my reading skills are wrong :)\n. OK, I'll do it.\n. OK, fixed in PR#52\n. OK, I can do it.\nJust to assure if I understand the case: if someone searches for a \"cat\" then \"catapult\" shouldn't be returned as a result, right?\n. Sure, sorry for lack of readability. Changed in next commit.\n. \n",
    "wheresmyjetpack": "Hi @jarun \nI'm interested in writing some tests for BukuDb. I'm working filling out the commented-out tests at the moment. Any suggestions for something to work on in particular?\n. For PR #65, is there a reason / necessity for the prompt staying up after a range of results has been opened? This is causing issues during testing. I'm able to patch input to simulate user input, returning a string of results to open (\"1-3\", for example), but I'm unable able to patch it again once the while loop in prompt has been entered. Because prompt requires you to hit enter twice to exit, the test hangs waiting on this action. Would it be acceptable to close the prompt (break out of the loop) after a range of results has been opened? \n. Found a way to handle this, should be opening a PR tonight!\n. Not sure if I'm misunderstanding the prompt for opening bookmarks from search results, but supplying \"a\" for opening (a)ll bookmarks doesn't seem to produce any of the desired behavior. Presuming this is supposed to be either a range or \"a\" for all bookmarks.\n. I'll see if I can clean it up some tonight. The second call to delete_all_bookmarks was a holdover for a previous commit that should have been removed. Passing in input_func was there to deal with many of the api's methods requiring some user-supplied input. A lot of these methods are also huge and have a considerable cost-to-change; Passing in that function allowed me to refactor a lot of these into smaller, more concise chunks that have a single purpose. The new methods here I would consider private (wouldn't call them outside of the class), and they required input_func be a positional arg, but the methods I was considering public would have that function default to the relevant prompt (which I also wanted to isolate). But if you're opposed to public methods even having that default value, then I'll take another look at it.\n. Yea sure thing! I'll just stick to the tests for now then. Next PR will be significantly smaller.\n. subTest not in 3.1, removed\n. @jarun definitely. Would be able to have something tomorrow if that works\n. @jarun The new test here is a holdover that I'd written prior to 441c4cd59da34d55ebb4a7e2cfba27d1562a212a, I will be working on tests for those new features as well!\n. ",
    "ovv": "Hello @jarun \nI can look into making a Pypi packages if you are interested.\n. I think it's possible to change the packages owner on Pypi.\nI'll look into the naming thing.\n. Here is the first step: https://pypi.python.org/pypi/buku/0.0.4 \nI had to move and create some files. I'm not sure it will be possible to do it without breaking Travis builds.\nNext step will be to create a command line entry point.\nIf you give me your Pypi username I can add you to the package\n. @jarun didn't really had the time to improve it, but i'll do it this weekend.\nI already added you as owner on Pypi. I thought they send an email but guess not.\n. Could you check by connecting to Pypi ?\n. I'll do that. I first wanted to have a working package and go from there\n. Helo @jarun \nWell I can't find a way to bundle it without restructuring a part of the package and breaking compatibility. Maybe someone with more experience than me could do it.\nI think it's easier to rely on other way of packaging.\nCheers\n. Buku is a good candidate but the project isn't structured following PyPI guidelines. For PyPI the packages must be like this:\n- README\n- LICENSE\n- ...\n- Buku\n  - auto-completion\n  - buku\n  - buku.1\n  - ...\nAll the necessary code files should be in a buku folder.\n. Not necessarily. We could create an init file importing the necessary class from buku with the same methods you use in the tests. It's not pretty but it should work.\n. Sounds great. The packages already provides an easy install.\n. Yeah we can do that.\nShould I use buku.py or buku ? Is buku necessary or is it just convenient for building the packages ?\n. Should I bundle the buku.1 file ?\n. Oh it's the man page. Didn't know that. thanks\n. Should be ok.\nBut I'm not sure it's possible to add the man page during a pip install. I'll have to look into that\n. Sorry about the newline, didn't pay attention.\nThis seems to work, but frankly I don't really understand how the tagging systems works.\n. ",
    "emilv": "Would automatic tag suggestions be interesting? Me and some friends did such a project for bookmarks in a university course and it worked wonders. We trained our model on already categorized bookmarks, then when you insert a new page we calculated a score for each category. In all our tests the highest scoring category was always the correct one! We used an approach very similar to word2vec.\n. ",
    "taziden": "Hi,\nI'd love to have an option to get rid of the color in the output (for instance, output of buku -p).\nSo that I don't need to use sed to remove color codes.\nThanks\n. Well, --format 1 is actually perfect for me. Sorry for the noise and thanks for the good work !\n. I was happy to discover this issue because that's exactly what was missing for me in Buku and then I found the rest of the conversation which made me quite sad.\nWhat is the purpose of having bookmarks if they lead to pages which doesn't exist anymore ? Giving the opportunity to have a local (and not at Google's :sigh:) copy is a killer feature and would make buku the ultimate bookmark manager for me. Currently, I rely on Scrapbook Firefox extension to save offline copies of some bookmarks but it's not handy at all.\nI also intend to use buku as a lightweight alternative to Zotero, being able to bookmark, tag, and search within interesting pages I stumble upon every day.\nVery often, for the web pages I bookmark, neither Google neither any cache, even Internet Archive have a copy of it when they disappear or when their url change. Plus, not having to depend on a third-party service but just on my personal computer is something quite important.\nI hope you will reconsider this issue. I'll try & see if I can hack buku to make it happen anyway.. ",
    "dgengtek": "What do you think about bookmark export filterted for toolbars? \nOnly entries with the tag  toolbar get exported into specific html header with the toolbar flagged instead of currently all bookmarks being exported into the personal toolbar folder.\n. ",
    "heliocarbex": "\nCan I use in Windows easily? Are you thinking to produce some UI?\nI have many accounts and browsers. One Firefox account for home, other for job (the same for Chrome) and I have Vivaldi too. You can think in a script to get information for all browsers and accounts and produce a big merge according the user preferences.\n. Other good ideas:\nCreate a daemon to watch changes in bookmarks folders of Firefox, Chrome, Vivaldi, IE, etc (the user can select the desired folder and/or file) and import automatically to the database of Buku. \nSolve problems of duplicated entries in the database (there is solutions in each browser, but it can be interesting have one in this big aggregator).\n. \n",
    "palagit": "Hi,\nI'm a new user of buku. There is a feature\u00b4-request i found nice to have. A switch to check if all bookmark are  still active and save this entry in the database (active, not available + last timestamp active). So inactive bookmark could be deletet.\nSorry for my english , i'm still learning.\n. Ok, I understand your problem. My idea were to check with buku -u all bookmarks, then if not reachable, mark in the database with timestamp, not reachable and a counter. On the next check with buku -u and not reachable, the counter will increased. If the counter reaches a level of 5 the flag bookmark filled with \"the site may be deleted\".\nI tried to write a script to solve my idea.\nThanks for the quick answer\n. ",
    "cpaulik": "It would be great if there would be an option during import to use the existing folder names from Chrome as tags in buku.\n. ",
    "amitkalani1": "Hi @jarun,\nthanks for Buku.\nWhat do you think about extending the database table with columns\n'date_added', 'date_visited', 'times_visited', 'status' (e.g. unreachable)\nand maybe 'rating'?\n. ",
    "lucasmgrando": "use:\n$ buku -u n --tag - [tags ...]\ncomma-separated tags to delete\n. Ok, thanks!\n. Hi, \nno, only this!\n. ",
    "nurbo": "Thanks @jarun for replying so quickly. I removed the elements from the args array that were resulting in the aforementioned error and managed to get the tab completion working. The lines that kept being reported were for options: merge, noprompt, tag, url. After removing lines 20, 21, 28 and 31 the tab completion works as intended. I have no idea why those specific options were causing trouble.\n. Thanks @jarun, everything seems to be working fine now. Keep up the good work!\n. ",
    "Fongshway": "Hello,\nAn example to open an array: Result number or range (x-y,(a)ll) to open: 1 2 4\nAn example to open a range: Result number or range (x-y,(a)ll) to open: 1-4\nWhen opening a range, I noticed that Result number or range (x-y,(a)ll) to open: 1-4 would only open 1, 2, and 3, so I updated the functionality to include 4 as well. \n. ",
    "csllbr": "please see my fix in #65: support for whitespace separated list of indices and ranges \n. :+1: great, thanks! \n. fair points - done!\n. done!\n. ",
    "jpralves": "I deal a lot with markdown files (.md) with links\nLike this one:\nsample.md:\n- Getting started with Arduino - Nordic NRF24L01 Radios\n- Making Radar Using Arduino, Ultrasonic sensor, and MATLAB\n- Simple Transistor Tester\n- Turning a Raspberry Pi into a portable streaming camera |\n  Opensource.com\nWith the code added I can import directly this type of files.\nIf I want to export to markdown it is also possible and the result is a\nusable markdown syntax that you can put in a .MD file (for use in github or\nsome other auto parser like static site generators)\nRegards,\nJo\u00e3o\nOn Thu, Oct 20, 2016 at 2:39 PM, Arun Prakash Jana <notifications@github.com\n\nwrote:\nCan you please elaborate on the use case? Currently Buku exports to the\nHTML format for browser compatibility. What's the use case for markdown?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/77#issuecomment-255108368, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAolSMSB8DQKRpJd-uzldY8aLcBk9ihHks5q128hgaJpZM4KcHCF\n.\n\n\nJoao Alves\n. Ok. I'll use my fork.\nOn Thu, Oct 20, 2016 at 3:39 PM, Arun Prakash Jana <notifications@github.com\n\nwrote:\nClosed #77 https://github.com/jarun/Buku/pull/77.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/77#event-830692185, or mute the\nthread\nhttps://github.com/notifications/unsubscribe-auth/AAolSEjLnCiVjSfSZ5ScwW0y50M24vFbks5q130KgaJpZM4KcHCF\n.\n\n\nJoao Alves\n. ok. Later I'll send a network patch to solve problem regarding use of\nproxy's.\nOn Sat, Oct 22, 2016 at 6:20 AM, Arun Prakash Jana <notifications@github.com\n\nwrote:\nI received some more requests for markdown on forums. I'll pull this in\nand make some changes to it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/77#issuecomment-255508449, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAolSIqAOhYNXJw7XPUMZGSmrjg2re98ks5q2Z0GgaJpZM4KcHCF\n.\n\n\nJoao Alves\n. 1. It is difficult to have a \"rich\" standard for storing that info.\n   Markdown is considered to be used as a simple formatting language. Its\n   bigger strengths are the simplicity of writing. For instance: a link to a\n   page in html:\n   the\n   page . From my point of view the second one is much more\n   simple and understadable.\n2. As I've said before the feature isn't that intrusive and solves a\n   problem I have in importing and exporting links using markdown.\nOn Fri, Oct 21, 2016 at 3:41 AM, Arun Prakash Jana <notifications@github.com\n\nwrote:\n@jpralves https://github.com/jpralves I gave it a thought. And I see a\nstronger case here which both of us missed earlier. Consider the following.\n- There's no standard (like Mozilla's for HTML) to store bookmarks in\n  MD yet. How about having a new thread to standardize one and then implement\n  importing/exporting to the same?\n- Modify this PR as only export to MD using the options --print and\n  --format?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/77#issuecomment-255280067, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAolSOdYioaj7nAZ0BHyLVcgkcm9OOTuks5q2CZXgaJpZM4KcHCF\n.\n\n\nJoao Alves\n. Thats right.\nOn Sat, Oct 22, 2016 at 11:10 PM, Arun Prakash Jana \nnotifications@github.com wrote:\n\nNote:\nThe logic in this PR was importing descriptions but exporting titles!\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/77#issuecomment-255557029, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAolSDS9S1yPiCKUtLYmVx0jQQrVh9s0ks5q2onkgaJpZM4KcHCF\n.\n\n\nJoao Alves\n. ",
    "sporgj": "How about a \"backup\" mode. Users could provide backends such as git, S3 where their bookmark database gets pushed to\n. ",
    "polo2ro": "Hi,\nThank you for this usefull tool!\nI use it a lot and found like other solutions that it is difficult to detect invalid url, because this is command line i can actually do that myself : https://github.com/polo2ro/buku-scripts\nThis can be a functionality to include in buku, to be nice to the new users and to be more cross-platform, or keep external but maybe as documentation.\n. yes i think that would do the trick; when using -u on all database i run into other problems because many of my bookmarks where on the same site and they probably have some policy to limit high number of page/seconds, that is why i used the sleep command. I my first try i almost deleted all the links from the same site because of that.\n. here are some examples url of my use case:\nhttp://www.seloger.com/annonces/achat/maison/estang-32/107048765.htm\nhttp://www.seloger.com/annonces/achat/maison/saint-fort-sur-gironde-17/112444387.htm\nthe first url give me a 200 OK, all good\nthe second give me a 301 Moved Permanently\nThe probleme is that the site give me a 301 instead of a 404 for a page that does not exists anymore, that is why i check the 200 Ok only.\nI am all for a pull request for that but for now i am not sure what to do, maybe a simple output of the http code can be sufficient to detect 404 or other unwanted codes\nfor example a capability to filter by http code can make possible to remove 404 links like this:\nbuku --http-code 404 -d\nor maybe using -u to set a tag:\nbuku -u --http-code 404 --tag expired\n. This is great! i will check this out with an update on my database and get back to you. Thank you\n. The retry functionality is not working in my case because seloger.com give me a 200OK with a error page, i don't know if this a common behavior. I am luky that the error page does not have a title.\nI uploaded by database https://1fichier.com/?9urj0c0p14\ni get the error message after 45 updates, i think nothing can be done about it because http codes are note used properly here.\nI am pretty sure this will work with apache mod_ratelimit\n. ",
    "drzraf": "Suggestion:\nMake Buku integrated to most modern browsers (would gain traction).\nIt means writing Firefox, Midori, ... extensions using Buku as a backend (storage/search/tags/...)\nThat would greatly help people switching from a browser to another.\n. ",
    "DamianSiniakowicz": "Hi Jarun \nI am new to open-source, and found your project on up-for-grabs.\nI want to make refreshdb faster using threads. \n. I got refreshdb to work by commenting out the close_quit on line 2561. \nit's strange because that close_quit executes after refreshdb is finished.\nI also removed the multi-connection refreshdb.. I was getting a 'cannot operate on a closed cursor error', and after I took that line out the error stopped.. ",
    "naaaargle": "Hi! Are there any tests in particular you would like to see? I am new to open source and think that would be a good way to get started. If you don't have anything specific in mind, I can jump in and try to find something not yet covered. Thanks!. Haven't had a chance to jump back in yet but fully plan on doing so! Thanks for the help - I'll try out Travis or see if I can get the dependencies installed.. @jarun yep! I'll get back into this soon.. Hi @jarun, I ran into this problem earlier, but when I run that first command from my OS, it's telling me I need to install the java developer kit. Before I go down that road, just want to confirm that's necessary to do this? Or is there another way to run tests locally?. I'm getting this error \n\nBut again, I'm running this directly from the Buku folder, so maybe I'm in the wrong place? Do I need to spin up a virtual machine or something and run it on that? Sorry for all the back and forth\n. Or is it that I should be using pip to install python3-pytest and python3-pytest-cov?. Sorry @jarun, I am not on Ubuntu, I was trying this on my OSX because I didn't realize Ubuntu is also an OS. I did some research/asking around though and I think I get it now. Going to try to spin up a Ubuntu VM for this and will report back!. ",
    "Qu4tro": "Any thoughs on a REST API, so that webapps could have a ready bookmark backend?. Maybe an API specification first?. I was thinking about implementing it. Made a small project recently to get the grasps, on Flask-Restful which seems to be a good choice for the problem in hand.\nThere is still a few things that it's still not clear to me, but I might just be overthinking it. I'm thinking about implementating a small, functional subset first. I have a list of the endpoints that I planned somewhere, that I can post here.\nPS: Also thinking about swagger support. Swagger is a great idea!. If you're already familiar I think you should go ahead and create the repository. I will contribute to it as well. \nI will post the list later when I get home. \nI might be wrong about swagger, but it's gives so much: web gui, other languages clients for API, etc... . Why not use the current BukuDB? I've seen it, and while it needs some refactoring it seems straightforward.. I still haven't seen all code yet, as I'm a little low on time as well.\nFrom what I've seen, it looks pretty straightforward and that's great. \nRight now I have this:\n * New bookmark  should return its id. That would require a small change in the bukuDB, instead of returning True or False, it would return cursor.lastrowid and -1, respectively.\n* Getting all bookmarks, should also return their id's.. @jarun POST /bookmarks. Whenever you insert a bookmark (POST /bookmarks method), it currently returns just the success status of the operation. I was arguing for also adding the id of the new bookmark.. Yes, that was my intent.. ",
    "fradeve": "Thanks for your comments and for the projects itself, it helps a lot.\nI don't quite get why would anyone use a style different from PEP8, but as long as you are happy with this, I am happy as well. I have raised another PR containing some very simple variable renaming.\nThanks\n. I see readability and standard-compliant code as a value in itself. And I am sure you see it as well, otherwise the changes you made in https://github.com/jarun/Buku/commit/27fe55c32814909358adca3f7f21ec0fbee75383 don't make any sense at all (which is not the case).\nWell, I may have a look to the MD glitch, but I am also thinking raising a PR to import bookmarks from YAML files, which is quite of a priority for me.\n. @jarun I would really like to, but I can't see any comment :(\n. Yes I can see them, I started modifying the branch, but I am also working on the YAML import branch (which is nearly finished). Will push both of them when I'll finish them :)\n. :+1: \n. Before merging this in, I think we need to document the structure of the YAML somewhere, not sure if the parser would accept any other structure or not. Not sure of where this should be documented, anyway. Any suggestion?\n. Thanks for your comments.\nI am generally not fond of introducing new dependencies, but not using a proper YAML parser to parse YAML sounds like a decision we may regret in the future.\nI will take care of all the other comments and fixes ASAP, including documentation.\n. Hi all,\nthanks for your comments. @jarun I appreciate you don't want to introduce a new dependency, but right now I don't have the time to look at this again. In the meantime, anyone is more than welcome to add commits to this PR.\n. ",
    "mohammadKhalifa": "My solution didn't handle those cases and it treated them as folders thus as tags. I could however create a list of names to ignore although I don't see it as a really elegant solution. What do you think?\n. Ok working on it.. you're welcome. I understand :). @jarun you should mark \"Option to add folder names as tags while importing HTML\" as done. @jarun I'm definitely interested. I'll see what I can do.. ",
    "shaggytwodope": "@tom-i Need to report the the packager that buku needs to run on python3, this looks like the shebang is somehow changed to python2. Which I'm fairly sure isnt supported at this time.\n. LGTM\nNote next release would add a new depend ruamel.yaml package named python3-ruamel.yaml on ubuntu. \n. @jarun I can do pypi, it's really easy for me to maintain for you. Just need access to the \"repo\". \nYou can do that here and add the user name shaggytwodope to the maintainer role.. @jarun No worries mate, started a new job tho so weekend releases might get delayed for me. But short of that I'll gladly update asap. It's now updated to the 2.7 release here. I've tested the install process and it appears to work wonderfully.\nFeel free to email or @ ping me anytime. I try to respond quickly. Also we/someone can add pip install buku instructions to readme at some stage now.. @jarun oh yeah, so the readme isn't pypi friendly at the moment, I'll look into this later on. I see it as a very low priority. Pypi site is in a transition stage for a new platform. Better markdown support may come. But for now I think it's ok to look a little off. Most likely tomorrow I'll see what options exist to clean it a bit.. @pierrediancourt This is a failure on my part, I'm fixing the depends for the ppa as we speak. Within the hour it should be updated accordingly. Any future issues feel free to contact me.. @rachmadaniHaryono while it is a solution, it's generally encouraged to install things via the users package manager. In this case it would be the package python3-requests. Things installed from pip must be manually updated, and provides a weak point for security updates should the user not be aware of any important fixes.. Previous install method made use of the makefile, this has never dawned on me to update based on previous work. I've now updated the package accordingly. You can see the commit here Please try this again after updating the package. Sorry for this.. Would assuming all queries a \"wildcard\" effect performance for larger collections of bookmarks?. @jarun no need, it's covered in the read me fully. Right under the line: To install package dependencies using pip3, run:.\nAs I see it nothing needs to change documentation wise in this regard, folks just gotta be sure to read the whole thing.. Should be worth noting all Arch Linux users of buku have never reported issues. (Prior to 3.1 release of course). Arch defaults to Python 3.6.1 for a rather long period now.. @jarun I believe I can structure the changes, and open a PR accordingly. It'll take a few to test before pushing to the repo. Good news is the secure key and the settings currently in place can be used with ease. As for other projects you may need to generate a secure key.. @jarun I forgot to mention that the tools/ directory can be removed once we settle on the use and config. I'm fairly confident that this is ready for production. But better safe then sorry with auto generation.. @jarun I'm going to open another PR soon. Fedora 26 not yet supported. And I can add a few other distros. I've made a repo to properly test this all. And will avoid any issues in the future.. @jarun Yeah it appears to be in default repo. So packagecore installs the generated package after compiling it in order to make sure it works and deps work correctly. Centos can't seem to find the package even after compiling successfully. I need to look into this at a later time. Not up to it this week. I recently fractured a rib... so not able to spend alot of time at my desk. Been mostly on the laptop in bed. . I'd make mention of this feature under the Features section as well.. Missing a ' on the chrome bit.. ",
    "selfsimilar": "Sorry, yes, meant 'buku' (aggressive autocorrect).\nI think I must have jumped straight to the 'Installing with a package manage' section and missed the very applicable global requirements section above. Apologies, and after installing via pip cryptography locking works as expected now.\n. ",
    "denisfalqueto": "Sorry for not responding before. I've got busy at work.\n. > The example in this page shows how to create a header from username and password.\n\nThe following import works on my system too:\nfrom urllib3 import make_headers\nDid you try it?\n    Buku uses urllib3 for proxy support, but that library doesn't support authenticated proxies.\nIf the above works, please justify this statement.\n\nurllib3 does not support the default patter for proxy configuration through variables, that is:\nhttp[s]://[username:password@]proxyhost:proxyport\nI've looked at the source code. urllib3 may work with header parameters for authentication, but that would require someone to parse the http_proxy variable and check to see if there is authentication information to pass through urllib3. That's why I've said that urllib doesn't support authenticated proxies through the default configuration patter for http_proxy. For example: https://www.cyberciti.biz/faq/linux-unix-set-proxy-environment-variable/\nI said all that because that's how I'm used to configure my environment. Some tools work like that, some don't. So, anyway, you must keep that in mind when you implement that.\n. Sure! If I can't test today, I'll do it on monday (I don't have a proxy at home, thanks godness...)\n. I tested it but there's a catch: our proxy here uses NTLM (an authentication protocol developed by MS) and I've never succeeded in using that format for proxy variables. I need to use a local proxy (cntlm) that does the authentication on my behalf. So, I tryed to use that format to test your patch and it didn't work, but that's a problem of our proxy here. I've changed my working copy to output the parsed username and password and they were correctly parsed. Our old proxy used to work correctly with that format.\nSo, unfortunately, I was not able to do a successful update with buku, when using authentication inside the https_proxy variable. But I was successfull in using my intermediary proxy (cntlm).\n. > Can you please share the NTLM format?\nIt doesn't work natively on Linux. I even have to use an intermediary local proxy to make the authentication. So it would only work if urllib3 had support for NTLM authentication, which I believe it hasn't.. It seems that this library could help: https://github.com/trustrachel/python-ntlm3. NTLM authentication support for Python3. I don't know whether or how it would work with urllb3, though.. > If possible, can you document how you made it work using cntlm?\nIt's very simple, indeed. I've installed cntlm, configured it according to its documentation and have it started with systemd. After that, I just set proxy variables (http_proxy, https_proxy, etc) to \"localhost:3128\" and cntlm does its job. It receives requests, authenticates with my work's proxy and passes any information back and forth. It's really easier than what my collegues are doing on their windows boxes, since they have to enter passwords all the time.. I was trying to be general, but it's alright. Would you have any objections for using ProxyManager in place of PoolManager? And should I add a new parameter or just adapt to the environment variables?\n. I'll search again in urllib3, but I believe it's not documented. Probably, it supports the common format username:password@proxy:port. I'll check in the soruce code.\n. > What are the (dis)advantages?\nI think that using ProxyManager is better because you define the proxy behaviour in one place and it will work anyware a new connection is made. It is usually the right thingk in a tool such as Buku, which executions will be short lived. So someone creating a new connection would not have to remember to configure it correctly with proxy options to make it work.\n. > And let's support only https proxies\nWould you mind to elaborate on the reason for only supporting https proxies? I believe that those variables are not meaning that the traffic between our host and the proxy is encrypted or not. They only enable an app to use differente proxy servers for different kinds of traffic.\nI agree that the checks are excessive, though.\n. > Would it work without any proxy configured as well?\nMy code is only configuring ProxyManager when needed. So it would still use PoolManager if there is no proxy variable defined.\n. Sure! That's the kind of code that we don't like to mess with. I'll add the documentation as you requested too, so it'll be easy for users to find it. Thanks for the feedback.\n. Unfortunately, urllib3 doesn't support that scheme for proxy authentication. What I can do is document it and suggest using some local intermediate proxy, such as cntlm, TyniProxy or Polipo.\n. ",
    "tenken": "@jarun what about storing additional metadata per bookmark such as date_added, date_updated and possibly track how many times a bookmark was opened from buku?\nthese 3 metadata details seem useful to me because while tags are useful they don't convey when I did something, nor can I trend tag usage over time (as a web developer I create bookmarks per development project). Similarly as tags get added it might be nice to be able to say \"I never went back to this bookmark, or opened this bookmark alot\". @jarun thank you for the clarification. I believe you value privacy above all else, and I salute you for that. I would argue that similar to an Email or a blog post -- knowing the date of something does not imply user tracking; but is a useful fact of the data. Data is only as useful as it is searchable, tags and text searching will take you only so far.\nRegardless, thank you for the prompt reply. I would kindly suggest that you provide a title to the last line of your Readme file with a heading of \"Project Policy\" or \"Project Goals\" as the single sentence doesn't express the depth of your passion on these ideals and may be easily overlooked by future users with similar wishes.. The suggestion of extending it sounds like a good idea for custom columns, I will try that.\nUnfortunately I'm not a python developer so I'm out of my element with python+REST :(. Best regards.. Maybe I'm wrong and the convention is that single letter options have 1 hyphen, and two letter options have 2 options?\nAt least to me, it appears that if the option supports a short and long form, the short form has 1 hyphen all of the time for all other options.. ",
    "dchang0": "Hi, jarun--\nHere's a feature idea: when buku attempts to pull down the title from the URL, if the server does not respond or produces other HTTP errors, add special tags to the broken entries. This, combined with the delete bookmark by search feature will allow users to cull obsolete/broken bookmarks from their database. It is even possible to use a series of numbered tags like: NoResponse1, NoResponse2, NoResponse3 to handle the possibility that a URL is only temporarily offline. (For each failure to connect, buku replaces the old tag NoResponsen with NoResponsen+1; users can search for NoResponse5 and delete all of them.)\nOther tags are HTTP404 for the pages that have been removed (users will probably want to purge those bookmarks or update them with new URLs), etc.. Thanks for the reply.\nPerhaps I should not have mentioned titles. My actual goal is to make it so that it is easy to automatically cull dead URLs in one or two or three passes. (The only reason for multiple passes is that some URLs might only be temporarily broken.)\nAnd there is not necessarily a need to use tags to store the state of broken URLs, either. If there were some other more elegant means of marking dead or alive URLs between passes, that would be fine by me too.\n\nOn Jan 30, 2017, at 18:42, Arun Prakash Jana notifications@github.com wrote:\n@dchang0 https://github.com/dchang0 Tanks for the suggestion! Having a title or not due to HTTP errors becomes irrelevant because of the following options:\nset manual tags and mark immutable\noption to search blank titles using buku -S blank\nsilent full refresh showing error codes for all bookmarks using buku -u --tacit\nI'm afraid any additional options would be a feature bloat around titles.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276258622, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePamikbARLRIg_gHZmwJPCfnnIWXYHks5rXp-DgaJpZM4LFk6G.\n\n\n. Well, that's not actually important. The final goal is the only important part: making it easy to clear out bad bookmarks quickly and without lots of manual labor.\nThe only reason to have to store a state is only because a server could be down temporarily. If we don't deal with this, it's not necessary to store the state, such as deleting the bad bookmarks immediately.\n\nOn Jan 30, 2017, at 18:57, Arun Prakash Jana notifications@github.com wrote:\nWhy is it important for a bookmark management utility to store the broken/temporarily broken status of pages?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276260674, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePalsvSaJV30QSgRm3UYstlF87I2dpks5rXqMSgaJpZM4LFk6G.\n\n\n. Presumably one would run the check just before running the mass deletion for the confirmation that the page is really down. And there would always be the possibility of getting a false positive (user thinks the site is permanently down but it was only temporarily down).\n\nOn Jan 30, 2017, at 19:17, Arun Prakash Jana notifications@github.com wrote:\nAll I am saying is these statuses are not permanent. They keep changing and if we were to track those properly (in real time) we should find some way to run buku -u with some frequency as a daemon in the background.\nLet's say a page is showing 404. We mark Buku in accordingly. Later the page comes back online but the status is still 404 in Buku. Users should never RELY on the stored data and take a decision to remove or not visit the page. The ONLY way to know for sure a page is down is to visit the page.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276263904, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePajwmf7qou1zB58SbkbAqfvti5Po9ks5rXqfNgaJpZM4LFk6G.\n\n\n. Understood. I'll have to store the state outside of buku. As it stands, it's too much work to clean up my old database manually.\n\nOn Jan 30, 2017, at 19:34, Arun Prakash Jana notifications@github.com wrote:\nPresumably one would run the check just before running the mass deletion\nThat's what buku -u --tacit does for you. For all bookmarks at once. Please run it once first.\nAnd there would always be the possibility of getting a false positive\nI don't want it coming from Buku.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276266094, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePahGdrWJzBaYOCNoN3fq2VVmbhYTVks5rXqvKgaJpZM4LFk6G.\n\n\n. How about this idea instead?\nHave buku store a \"Last seen on [datestamp]\" value for each bookmark.\nThis would never be false, as buku would only update the value if the URL is seen. Thus, it would never produce false positives.\nThen, if a user could run searches like this: \"show me all the bookmarks that have a Last seen on date older than 90 days\" and the user knows for sure that buku had been updated several times in those 90 days, they could safely choose to delete all those bookmarks found in this search.\nWhat do you think? buku would never lie nor produce a false positive. The false positives, if any, would be within the user's logic/assumptions.\n\nOn Jan 30, 2017, at 19:59, Dennis Chang dchang@silverlakecorp.com wrote:\nUnderstood. I'll have to store the state outside of buku. As it stands, it's too much work to clean up my old database manually.\n\nOn Jan 30, 2017, at 19:34, Arun Prakash Jana notifications@github.com> wrote:\nPresumably one would run the check just before running the mass deletion\nThat's what buku -u --tacit does for you. For all bookmarks at once. Please run it once first.\nAnd there would always be the possibility of getting a false positive\nI don't want it coming from Buku.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276266094, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePahGdrWJzBaYOCNoN3fq2VVmbhYTVks5rXqvKgaJpZM4LFk6G.\n\n\n. I'm curious as to why \"obsolete records\" would be considered \"tracking you.\" A record being obsolete does not reveal anything about the habits of the user to a spying third party. The others, I could understand could expose a user's behavior.\nThanks for the suggestion to extend the flags column. It would have to be a datestamp to be of use.\n\nOn Jan 31, 2017, at 05:32, Arun Prakash Jana notifications@github.com wrote:\nBuku is too busy to track you - no history, obsolete records, usage analytics or homing.\nHowever, if you are too eager to have this, please extend the flags column with a new bit for last_checked_status. 0 = OK (default), 1 = some HTTP failure.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276363604, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePatbUIBXjyh5KmPg5wz6mg3VNHk34ks5rXzgEgaJpZM4LFk6G.\n\n\n. Hmm. Well, it seems that we have different definitions for the term \"obsolete record,\" then.\nPlease allow me to illustrate:\nLet's say I bookmark sites A, B, C, and D. Assume no one other than me can see my bookmarks. If B were to go obsolete, that is not through any user action. It happened out of my control (server was shut down). Then, a third party could not deduce any user behavior from B going obsolete, because B going obsolete was not caused by any user action.\nI understand and agree with your \"I am not aligned to the datestamp stuff because it is a usage record.\"\nRe: \"Run buku -u --tacit and redirect the output to a file. Parse (or manually check) the output file for failures and get the indices. Pass all the indices to buku -d.\"  Understood.\n\nOn Jan 31, 2017, at 09:04, Arun Prakash Jana notifications@github.com wrote:\nI'm curious as to why \"obsolete records\" would be considered \"tracking you.\"\nThe same way Google may mine your 2016 search history to know you. Anyway, I am not aligned to the datestamp stuff because it is a usage record.\nFrom your earlier comment:\nit's too much work to clean up my old database manually.\nIt's actually not, if that's what you want to do and by old database you mean a Buku (or importable) database. Run buku -u --tacit and redirect the output to a file. Parse (or manually check) the output file for failures and get the indices. Pass all the indices to buku -d.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub https://github.com/jarun/Buku/issues/103#issuecomment-276425187, or mute the thread https://github.com/notifications/unsubscribe-auth/AIePaivD737QKS1eEOyz91EisMZpmLKnks5rX2mngaJpZM4LFk6G.\n\n\n. ",
    "kishore-narendran": "Is the REST API todo still open? Or is someone working on it?\n. @Qu4tro So you are going to work on it? Because, I am also familiar with building RESTful APIs with Flask, and was wondering if I could contribute. Yes it will be great if you can post the list of endpoints, I am curious. \nSwagger support might be a little bit overkill IMO. . @jarun @Qu4tro I think the subset of APIs you are looking it are the most pertinent ones. I still haven't completely figured out the codebase. I am available to work on it in a few more days, in the meanwhile I will update this issue with design, and code samples. \n. Yes, I've been sketching out stuff on an Independent module for the REST API. I am unfamiliar on how to use SQLite. Do you have any recommendations about that?\n. @Qu4tro I can do that, I did not have a clear look at the BukuDB API. I can use that directly, you are correct. You can expect a first version in a day. . @jarun I am sorry, I am a graduate student, I had a tough week. This is a WIP on this fork - https://github.com/kishore-narendran/Buku\nPlease just have a look and give it a little bit of time. @jarun The dependencies are things that Flask has introduced as a framework. Yes we can do that. I can make the entire REST API a module on its own which depends on Buku but is independent of Buku. I will need some help for that though. I am not extremely familiar with python. Let me try it.. @jarun Do you have any other communication channel? Slack perhaps? . @jarun: In two days. . @jarun @Qu4tro I will make a lot of changes to this PR over the weekend. Please let me know if there is anything you need me to know before I go on to do that. . @Qu4tro I actually believe the index field in the database should be internal to the application. All insert, delete, update operations must be done with respect to the URL, IMO. The id is the primary key and shouldn't actually be exposed as a part of the API at all. . @jarun I have a question. @Qu4tro, posted a few APIs on the Issue. \nFor the API - put     api/tags/:tag   # replace tag Is the goal to replace the tag in the URL parameter with one in the body?\n. @Qu4tro Understood. \n. @jarun I finally got done with finals and will be graduating this week. I will continue working on this and will finish this over the next two-three days. I would like some input from @Qu4tro on what has already been done. \n. It deletes the table and not all the records in the table?. Yes, one can do that, but I thought this could be a useful function to have. . Will do. . I'll refactor the function name.. ",
    "chkrishnadheeraj": "Hello jarun, I am new to open source world.I want to contribute to your project.I know Python. How can i help you?. yeah okay, @jarun should I add test cases to test_helpers.py or test_bukuDb.py?. Yeah got it. yeah @castellanprime  we will work together\n. ",
    "castellanprime": "Hi. I am a somewhat new contributor to open-source software. I have always wanted to contribute to a python project. Is there a task that I can do to be familiar with your codebase? Thanks.. @jarun Okay. ",
    "rachmadaniHaryono": "@jarun , @castellanprime , @dheerajkrishna90 is anyone working on test? can i also working on it? i will start with BukuHTMLParser class.. @jarun, i add pr for this #130.\nis it to your liking? if everything is correct i will add another test for class/func.. another change here.\n\ndrop requirements-dev.txt. now installing dev package should be using python python setup.py develop (maybe add contributing.md so other dev can read before testing/adding new feature?)\ntesting without change changing import is not always working. it is working with getpass and not with subprocess on edit_rec.\ni skip test some function which are too complex, or too simple (e.g. disable_sigint_handler and enable_sigint_handler which basically wrapper around signal).\ntest filename is little bit unregular. before this there is test_bukuDb.py, which testing BukuDb class. to avoid but i prefer using test_{class_filename} to change the character case and keep it consistent (but exclude test_buku.py, which test the rest of the function).\nthere is some error on version before python3.5, which made me skip some test. to fix this i need to add tox, so developer can testing against several python version. opinion?\nis the test test_refresh_db is that long? maybe mark it as long_test so dev can skip this for faster testing?. done #131. But how should I make the test fail? In my mind the function should raise assertion error, when the input don't match the condition. \n\nAlso can you answer the questions on the first post? It can help me put the scenario for testing. \nAlso I forgot to write about test writing location. As you can see in commit,  it splitted on two place.  first is  inside test class and second as function on test module. There is no guideline for this. I wrote Few additional method on test case, because it is simple and don't need pytest 's parametrize decorator. Imo somehow the different location of the can be disadvantages for future testing. Opinion? \n\nIf you have long term plans to keep working on Buku, I would be glad to add you as a collaborator.\n\nIn ok with that. I'm not quite sure how that work (even after reading github article), but let see about that . here is another commit. here are the rule based on what you wrote (note the high and low here is the normalized variable. if high input is lower than low, then swap them.)\n\nindex, low, and high should higher than 0. if not AssertionError will be raised.\nif is_range == True and low == 0 no check will be performed on high variable.\nif is_range == False, no check will be performed on high variable\nif is_range == True\nhigh variable have the limit of amount the record on database + 1. if not IndexError wil be raised\nlow variable have the limit of amount the record on database. if not indexError will be raised\nif high equal low database is not changed.\nother than above rule, the record with given range will be deleted. \nif is_range == False\nif index is over the limit of the amount of the record on database, database is not changed.\nif index under the limit of the amount of the record on database, record with that index is deleted and database changed.\n\nnote for this\n\nnot quite sure if the single function with pytest's parametrize is the good for this, because this will make the test take long to finish. another possibilities is change only the necessary variable for each scenario and use less permutation. may need to make another test file for specialized test.\nalso the different between high variable and index when it have bigger value than given limit, where index is more forgiven than high. \n\ne: and travis test hit timeout. i will rewrite it once again, but most of the logic is as written here.. >Nope. We operate only up to max record index in those cases. If both are equal, only that index is affected.\nso if db have 3 record these following lines should delete the third record?\ndb.delete_recs(is_range=True, low=3, high=3, delay_commit=False)\ndb.delete_recs(is_range=True, low=3, high=4, delay_commit=False)\n. >For negative indices, we should actually return IndexError. But I'm wondering if it's OK not to raise an Exception but log an error and return False?\nas of now, the function is quite relax and no explicit exception raised. so maybe keep it that way?\ne: also is the return value signify database change on delete_rec func?. the same note from last post\n\nthe high and low here are the normalized variable. if high input is lower than low, then swap them\n\n\nif is_range == True\nif any of the low or high is negative then res == False and no database changed.\nif low is 0 then res == True and database cleared.\nif low == high then:\nif low is still under the limit, then index at low will be deleted and res == True\nif low is over the limit, then  no database changed and res == False\n\n\nif  high is over the limit then index at low until the limit will be deleted and res == True\nif high and low over the limit, then res == False and no database changed.  \nother than above rule, the record with given range will be deleted and res == True\nif is_range == False\nif index is negative then res == False and no database changed.\nif index is 0 then res == True and database cleared.\nif index is over the limit then no database changed and res == False\nother than above rule, the record with given index will be deleted and res == True\n\nnote for this\n\ncheck once again with res and delay_commit, i may do something wrong there.\n~~the last big test with permutation will be deleted before merging~~.\nthe big test deleted because it somehow not skipped on travis and take too much time on python3.3 and python3.4\nthe empty database change come later, i haven't formulate it yet, or do you have any suggestion\n  for this.\n  as of now it should be tested on delay_commit and 0 value from index and range.\n\ne: fix typo and rule for low and high, which are over the limit.. like this?. empty database test. delay_commit should not affect the return value.. so how to test the result of delay commit?. ```python\nbdb1 = BukuDb()\nbdb2 = BukuDb()\nfill 3 bookmark on bdb1\ntestcase 1\nbdb1.delete_rec(1, delay_commit=True)\nlen(bdb1.get_rec_all()) == 2\nlen(bdb2.get_rec_all()) == 3\ntestcase 2\nbdb1.delete_rec(1, delay_commit=False)\nlen(bdb1.get_rec_all()) == 2\nlen(bdb2.get_rec_all()) == 2\n```\n. so after this print_rec?. - is max also valid input for low, high and index?\n- -0 is actually equal on 0, and it is on python specification. should i test it too?\n- the dataset for range is used with 3 bookmarks on  database, should i increase it too and how much?. >>- is max also valid input for low, high and index?\n\nyes\n\n\nin case of 3 bookmark, \nif is_range == True  and high == max, is high equal to 3 or 4?\nif is_range == False  and index == max, then index equal to 3 right?\n\nis there any specification for bookmark data list?\n  - what value is valid for each row?\n  - is third item always have to use parse_tags func?\n  - possibility for empty string, None, list or other datatype.on each item? . Maybe answer the question from 132,start fix with max keywords and set if the test separation is correct? . >I think the API delete_rec() is not even called\nYou are right, I will fix it in next commit . >>if is_range == True and high == max, is high equal to 3 or 4?\n\n3\n\ntry it once again, and imo it should be 4 instead of 3 e.g.\n```python\nbdb.delete_rec(is_range=True, low=2, high='max')\nshould be equal to\nbdb.delete_rec(is_range=True, low=2, high=4)\nas in range(2, 4) -> [2, 3]\n\nbut if high=3\nbdb.delete_rec(is_range=True, low=2, high=3)\nequal to range(2,3) -> [2]\n```. >What do you pass here? \nsetup = None, index = -1, low = 0, high = 'max', is_range = True\nhttps://travis-ci.org/jarun/Buku/jobs/214497928#L614\nit expect the database to be cleared. even when high == 'max'.\n\nWhat is max?\n\ni thought you expect max as acceptable input on delete_rec? from the last thread\n\n\nSome example acid test values for range:\n\n\n0 - max\n-0 - max\n...\ne:\n\nHow many records in DB?\n\nstill 3, maybe i will add after testing add_rec. >Initially when I mentioned max I intended MAX_INT. I understand now we refer to max_id in DB as max. So what is the integer value of max in the test case? Is it 3 (as you have 3 records in the DB)?\nit is my misunderstanding. i thought string max is valid input for low, high and index. the max on current test of  is only  string 'max'. i will change it to the value of max record on db on next commit\nand yes the actual value of max right now is 3.\n\nIf you pass: -1, 0, 3, True\nall the 3 records will be deleted and the API will return True.\nAre you expecting the same output?\n\nfor this\nsetup = None, index = -1, low = 0, high = 'max', is_range = True\nyes, just as you said.\n\nall the 3 records will be deleted and the API will return True.\n. > I think we should resort to intelligent manually built up test than going for matrix baed brute-force test.\n\ni have the same problem too. so today i actually look up for python-hypothesis and use it on test.\nwith this i found a bug regarding big integer with 2 situations\n\nwhen using it with index, it will raise OverflowError. max value of integer that sqlite3 3 can handle is 9223372036854775807 http://stackoverflow.com/questions/4448284/sqlite3-integer-max-value\nwhen using it with range (and normalized low value == 0), it will take a long time. it is caused by this loop  for index in range(low, high + 1):. i think this should be fixed.\n\n\nIn another example, I see tons of test_print_single_rec. Why? \n\ni will change the test with hypothesis and see if there is another bug.\nother things is about test package. the current test packages are put on two place, travis and setup.py. this should be only on setup.py and travis can install with python setup.py develop.. >Sure!\nok, i will do it. please fix the loop for is_range==True.\ne: i am wrong with python setup.py develop. it only used so installed package change everytime the current package change. \nto merge these travis and setup, i have to add extras in setup.py. developer can install it with pip install -e .[tests] (e flag is optional, but recommended).\nrelate so http://stackoverflow.com/a/18879288/1766261\nit is working on travis, but not on zsh(i will fiind out later)\ne2: for zsh the command is pip install -e .\\[extra\\] link: http://stackoverflow.com/a/30239714/1766261 (see the comment). >Why are you using int(MAX_SQLITE_INT + 1), specifically why are you adding 1?\ni am trying to recreate the same OverflowError issue with index. but it can't be tested because this part of the code\npython\nfor index in range(low, high + 1):\n    self.compactdb(index, delay_commit=True)\nwhen high value is unnecessarily  high enough this will take time and and cause the error on travis. travis will raise error when a test case don't respond after ~10m\nhere is similar sqlite issue which happen to django https://code.djangoproject.com/ticket/27397\n\nthe actual number of  MAX_SQLITE_INT is 2^63-1 instead of 2^47. it will be fixed on next commit. i did several skip, but unfortunately skip + parametrize isnt working on py3.3 and py3.4, possibly related to this https://github.com/pytest-dev/pytest/issues/1296\ni think this is finished, right?\nnext would be \n\nsimplify test_print_single_rec\ntest print_rec\ntox\n\ne:\n\nI can add a check before range but I believe we may never hit this issue in reality.\n\nimo it is better to fix this. \neven if the number will not met in reality, any high number input will make program take unnecessary time to process. If you can use pip, you can fix this by running pip install requests. @shaggytwodope I'm not aware request is in ppa, thanks for the info . Because there is no example of python script using buku, i write a simple script to print status code of saved url on buku. i'm not quite sure where to put it, so i put it here until there are more example\nscript use grequest from https://github.com/kennethreitz/grequests\n```python\nimport buku\nimport grequests\nbdb = buku.BukuDb()\nrecs = bdb.get_rec_all()\nrecs[0]\noutput: (1, 'example.com', 'example', 'tag1,tag2', 'page description', 0)\nRecords have following structure:\n- id,\n- url,\n- metadata,\n- tags,\n- description,\n- flags\nurls = [x[1] for x in recs]\nrs = (grequests.get(u) for u in urls)\ngr_results = grequests.map(rs)\nfor resp, url in zip(gr_results, urls):\n  stat_code = None if resp.status_code is None else resp.status_code\n  print('{}: {}'.format(stat_code, url))\noutput\n200: http://website1.com/\nNone: http://website2.com/\n200: http://website3.com/\n...\n```. @jarun, is there a plan to refactor parser on importdb function\nhttps://github.com/jarun/Buku/blob/730b80f7388fa6d837aaa3c6455ba3387f9c8c60/buku.py#L1648\ni want to test #172, but kinda hard with class method.. add another fix\n\nthe index log error is not the same with range on negative value. range will log Negative range boundary, meanwhile index will log No matching index.\nfix the tox based on new way to install test package\nthis isn't stated before but value bigger than valid sqlite integer will raise error overflowerror. it is not tested on this test. \npatch print is only working on py3.5 only.\n\nafter this maybe i will add coverage from codecov. >Can we have tox.ini inside tests directory please?\nno, because it stated on tox page that it have to be at the same folder as setup.py https://tox.readthedocs.io/en/latest/\n\nThen put basic information about your project and the test environments you want your project to run in into a tox.ini file residing right next to your setup.py file:. >How about doing a git rm on the tox.ini file first, the re-adding it back with the entry in .gitignore?\n\nhi i just read that. should i do it? i thought that is only to fix conflict?. About the print single rec:\nMaybe not testing to print function itself, but instead test the debug message to see if if-else working correctly. \nBecause this can change rapidly and the test can't keep with it, Im OK if this function isn't tested. But I will experiment with it for  a while and choose this if there is no other choice . try it once again with capsys, it work but it is not maintainable so i skip it as your suggestion. i add NOQA to indicate that this function is not tested\nnoqa note: http://stackoverflow.com/a/10506715/1766261\nfor browse function: i have seen the fix on that issue and how it use method from os module. while it is possible to test it, it will complicate the test. so i just add another simple test case to test webbrowser module on win32 platform. I think it is ok now for latest fix. You can merge it. . i also not quite sure if that is already requested, but one of the bug here implied one of the same thing (but require another feature for that completely)\n127\n\nI'd like to see buku check bookmarks to make sure they work,\n\nthis will need definition of work. webpage can return various error (e.g. 404 or 303) or redirected, only open for certain times, passworded, locked, ip-blocked, etc. catching everything is very hard feature for buku (and may need specialized module for that)\n\nif they cannot pull down the title from the web, mark as potentially bad\n\nthis one is possible, but not quite sure if the buku itself have to done it. a python script will do.\ni will leave judgement to @jarun, and if i have time, i may write write python script for the last point.. Hi @Chinggis6, it looks like you are using python2.7\nIf it is correct,  can you please reinstall it using pip3. fixed. may related to this https://github.com/HypothesisWorks/hypothesis-python/issues/691\ni will try to fix it by adding the requirement for pytest on @Infinisil pr and see if that work.\ne: https://travis-ci.org/rachmadaniHaryono/Buku/builds/248387505\n~~not quite sure why it take so long~~\nnot working. i have done some test for this and successfully and able to run it on travis.\n\nhttps://travis-ci.org/rachmadaniHaryono/Buku/jobs/248681529\nhttps://github.com/rachmadaniHaryono/Buku/tree/hypothesis-lower\n\ntldr. \n\nsetuptools-36.0.1,  \npip-9.0.1\nhypothesis>=3.7.0 \npytest>=3.1.2 \npy>=1.4.33\n\nshould i push to the pr from @Infinisil?. i will wait response from @Infinisil til tommorow 19.00 +8 gmt. \nif no response i will create another pr . i think this should be no problem. \ncmiiw the changelog didn't mention anything that we should notice \nthere is also this warning on all python version test\n/home/travis/virtualenv/python3.6.1/lib/python3.6/site-packages/urllib3/connectionpool.py:852: InsecureRequestWarning: \nUnverified HTTPS request is being made. \nAdding certificate verification is strongly advised. \nSee: https://urllib3.readthedocs.io/en/latest/advanced-usage.html#ssl-warnings\nbut i can assume it should not hinder the user for now\nrelated SO https://stackoverflow.com/questions/27981545/suppress-insecurerequestwarning-unverified-https-request-is-being-made-in-pytho. i'm using python3.5 and don't see it unlike in travis.\nso just keep this as note for future tester.\nnot quite sure if #94 is not effectively fix this or pytest add-on such as pytest-catchlog enable the warning again. but lets ignore it anyway.. >There are some limits (?) based on 3.5 in test. Just grep 3.5 and confirm they are all fine. \nother than that ssl warning the test itself show nothing wrong. \ncan you specify which limit? afaik there was some hypothesis related error which may occur between travis test, but is alredy fixed.\nit is hard to pinpoint until the error is specified.\n\nAlso, I think we can generate the deb package from the 3.6 build\n\ni haven't done this, can you show me how? using https://github.com/astraw/stdeb?. this part can be changed.\n30     # Upload from only one job (doesn't matter which one because we're packaging the same thing throughout the matrix)\n31     python: \"3.5\"\n\n$ grep -nr \"3\\.5\" *\nsetup.py:56:        'Programming Language :: Python :: 3.5',\ntests/test_bukuDb.py:43:only_python_3_5 = pytest.mark.skipif(sys.version_info < (3, 5), reason=\"requires python3.5\")\ntests/test_buku.py:13:only_python_3_5 = pytest.mark.skipif(sys.version_info < (3, 5), reason=\"requires python3.5\")\nthere are some test which fail on 3.4 and 3.3. most likely it is caused by mock package and builtin function. i skip this because there is no maintainable way to make it work on <python3.5. also the test is working on python3.6 imo no change needed.\ni can make the skip message better.\nBinary file tests/__pycache__/test_bukuDb.cpython-35-PYTEST.pyc matches\nBinary file tests/__pycache__/test_buku.cpython-35-PYTEST.pyc matches\nnot sure about this, but maybe just usual matching message for python compiled file. just recently read this\n\nUpdate user agent string in buku.py, if applicable\n\nis it possible to use this instead https://github.com/hellysmile/fake-useragent?. after reading the recent comment #219, is it possible and more advantageous to fetch the title asynchronously to speed up the process?. I'm thinking something with aiohttp to fetch page.\nReference https://stackoverflow.com/questions/8546273/is-non-blocking-i-o-really-faster-than-multi-threaded-blocking-i-o-how\nBut looking at the code,  not sure how feasible this is and if this is maintainable \nIt also only used when importing a lot of bookmark which is not essential. So I'm still not sure about this . See also http://yapsy.sourceforge.net\nI'm thinking the plugin workflow should be like this\n\nbuku have a default plugin folder or user can set that \nUser add plugin( python file)  to that folder\neach time user add bookmark, if the bookmarks match with given condition on plugin (regex or simple function), the e.g. Add additional tags or modify the url, etc\nthe plugin can be run for other actions such as\ncrud of tags, title and title\nsearching in buku, ie. If not found,  search in google and add it in buku\nautomatically download /archive url on certain condition\n\nBuku just have to provide a way to enable/disable plugin. \nSee project beet with their plugin system \n. @jarun sorry it may take some time as i focus on other things on these recent days. not quite sure if it is helpful but i run pwiz on firefox database and got this model\n```python\nclass MozBookmarks(BaseModel):\n    dateadded = IntegerField(db_column='dateAdded', null=True)\n    fk = IntegerField(null=True)\n    folder_type = TextField(null=True)\n    guid = TextField(null=True, unique=True)\n    keyword = IntegerField(db_column='keyword_id', null=True)\n    lastmodified = IntegerField(db_column='lastModified', null=True)\n    parent = IntegerField(null=True)\n    position = IntegerField(null=True)\n    syncchangecounter = IntegerField(db_column='syncChangeCounter')\n    syncstatus = IntegerField(db_column='syncStatus')\n    title = UnknownField(null=True)  # LONGVARCHAR\n    type = IntegerField(null=True)\nclass Meta:\n    db_table = 'moz_bookmarks'\n    indexes = (\n        (('fk', 'lastmodified'), False),\n        (('fk', 'type'), False),\n        (('parent', 'position'), False),\n    )\n\n```\nmaybe good alternative than using sql\n. @jarun how does actually normal html bookmark look like?\ndoes this enough?\nhtml\n<DT><A HREF=\"https://github.com/j\" ADD_DATE=\"1360951967\" PRIVATE=\"1\" TAGS=\"tag1,tag2\">GitHub</A>\n<DD>comment for the bookmark here. done with maximizing the line length on buku.\nthere is actually long text on test parameter, but cutting it will not make it easier to read. opinion @jarun?. also not quite sure if this better but i think walk method can be defined as normal function (and can easily tested) and loop the result load_chrome_database method\npython\ndef walk(root):\n    for element in root['children']:\n        # process other method\n        if element['type'] == 'url':\n            yield (url, title, None, None, 0, True)\n        else:\n            walk(element). @jarun i create #181 to document that test error . @alex-bender keep newline between function description and argument description also 2 newlines between function. @alex-bender\ni think there is several method which can be easily tested\n\nwalk func: input can be simple dict\nget_firefox_profile_name: just mock os.listdir\nload_chrome_database : seem simple enough. use pytest tmpdir and create mock json file.\n\nwhat can be skipped:\n\nimport_from_browser: way too complicated and not worth the effort. anything can be change so logging is helpful enough\nload_firefox_database: not quite sure if this have to be included, because it mean the database should also be included.\n\nlooking at load_chrome_database, it look like it can be declared outside the class for easier testing (it doesn't need self.)\nalso some newline is still deleted.. @alex-bender it is possible. but to test it it require the class to be initiated first.\n```python\nobj = BukuDb()\nthings can go wrong here\nobj.load_chrome_database()\n```\nif you want to keep it in class but don't want to initated it first, maybe use staticmethod or classmethod (imo staticmethod)\npython\nresult = BukuDb.load_chrome_database()\ne: i just found the newlines on files changed tab. there is no flake8 test planned yet.. maybe just let them know that there is automatic flake8 test and how they can do it locally. pylint rule equivalent\nini\n[MESSAGES CONTROL]\ndisable=\n  anomalous-backslash-in-string,\n  bad-continuation,\n  bad-whitespace,\n  bare-except,\n  broad-except,\n  dangerous-default-value,\n  expression-not-assigned,\n  fixme,\n  global-statement,\n  import-error,\n  invalid-name,\n  len-as-condition,\n  logging-format-interpolation,\n  lost-exception,\n  misplaced-comparison-constant,\n  missing-docstring,\n  missing-final-newline,\n  no-else-return,\n  #no-member,\n  no-self-use,\n  pointless-statement,\n  protected-access,\n  redefined-argument-from-local,\n  redefined-builtin,\n  redefined-outer-name,\n  superfluous-parens,\n  too-many-arguments,\n  too-many-boolean-expressions,\n  too-many-branches,\n  too-many-lines,\n  too-many-locals,\n  too-many-nested-blocks,\n  too-many-public-methods,\n  too-many-return-statements,\n  too-many-statements,\n  undefined-loop-variable,\n  ungrouped-imports,\n  unidiomatic-typecheck,\n  unnecessary-lambda,\n  unsupported-assignment-operation,\n  unused-argument,\n  unused-variable,\n  wrong-import-order,\n[FORMAT]\nmax-line-length=139\nnote: no-member rule also create an error but it should be enable for testing member usage on code\nsee https://github.com/jarun/Buku/commit/5d25deebf2baf535555c71614f5f0ad6a2376812\ncurrent error on that rule\n(Buku) \u279c  Buku git:(feature/pylint) \u2717 python -m pylint ./buku.py\n************* Module buku\nE:486,12: Module 'os' has no 'exit' member; maybe '_exit'? (no-member)\nE:1820,19: Instance of 'BukuDb' has no 'parse_tags' member (no-member)\n. yes, and \n\nI would like to have flake8 and anything useful (like the no-member) stuff from pylint.\n\nthat can be done. should i make another pr?\n~~the change should be similar to this~~\ne: i was wrong, the change similar to this but with added fix for this error.\nE:486,12: Module 'os' has no 'exit' member; maybe '_exit'? (no-member)\ne2: and it is actually correct,os only have _exit\nhttps://docs.python.org/3/library/os.html#os._exit. # @unittest.skip('skipping') that can be removed, unless it is necessary \ni am not very famliar with db command, and i haven't really checked if the method is correct, so please check the db query. maybe test debug message and give example for each case\nalso from single tag = delim_wrap(tag.strip(DELIM))to these lines 1089 - 1106 is quite hard to follow. move it into function and give test case will be helpful. I think the change on that test using pytest 's paramerize  is the last one.\n@jarun  If I didn't respond, you can merge the pr. also add test to sphinx docs\nhttps://coderwall.com/p/wws2uq/have-travis-ci-test-your-sphinx-docs. >see if you can share some part of the test framework for this\nCan you give example for this, because I'm not understand it? Do you mean how to test the code? \nI think dev can skip the testing part and leave it to tester  as long the change or new code keep the old behavior intact (and pass linting testing). . simple test would be helpful for is_colorstr would be helpful for maintenance.. This kinda hard to review directly from python file because it need the sphinx and its config to see if the generated doc is correct or not. . pickle result file:\nbookmarks_res.zip\n. i think that's it.\nit use pytest's fixture for data and it depend on 2 zip urls given in this thread.\nnote however there is no test which ensure that the zip fie downloaded only once per test session. the current test setting may download the zip file multiple time.\nthere may be setting/method somewhere on pytest fixture to keep the data or maybe it can be avoided using https://github.com/kevin1024/vcrpy. \nbut i let the current setting as it is for simple testing.. Related to this https://developer.mozilla.org/en-US/Firefox/The_about_protocol\nCan I do  It?\nE: related http://www.iana.org/assignments/uri-schemes/uri-schemes.xhtml. @flashus , @putsan\n\nHi, please read the project policy:\n\nno history, obsolete records, usage analytics or homing.\n\n\nsee also  #103. @jarun ,  i will try it on the next release. ping me when new release is finished. @jarun \n\nit seems i can't upload to pypi. \n\nUpload failed (403): The user 'rachmadaniHaryono' is not allowed to upload to project 'buku'. See https://pypi.org/help#project-name for more information.\nerror: Upload failed (403): The user 'rachmadaniHaryono' is not allowed to upload to project 'buku'. See https://pypi.org/help#project-name for more information.\nbased on error, i need to get permission to upload it\n\nso i look at the pypi page and trying to fix the page. \nfirst i use pypandoc to convert readme.md (https://stackoverflow.com/a/26737672/1766261)\nwrite the converted text to readme.rst and check it with rstcheck. i found out that:\nthese example 336. DuckDuckGo > https://ddg.gg and 336. DDG (L) > https://ddg.gg # privacy,search engine Note that URL must precede tags. are recognized as enumerated list by rst.\nbetween first and second example need newline.\n\n\nthose method above still didn't work, so as a test i remove the raw block.\n\nthe result https://test.pypi.org/project/buku/3.6.post8/\n- here come the new problem, how do we maintain it?\n  - remove the html part from readme.md. hopefully pypandoc can successfully convert it directly.\n  - maintain separate branch. this branch contain readme.rst which should be generated by pypandoc and applied the above [pypi page fix] manually\nfor the second method i hope it can successfully upload to pypi. on these test i have to rename the version multiple time. i added 'postn' suffix so i can upload it to test.pypi (based on this https://stackoverflow.com/a/13919964/1766261) . https://pypi.python.org/pypi/buku it is done\nmy browser load the page stop few seconds between these lines\nw [editor|id]          edit and add or update a bookmark\n        ?                      show this help\nmaybe rst need few time to process ?                      show this help  due to leading question mark\ne: and i have no idea why the test.pypi format the readme back to raw rst\ne2:https://github.com/rachmadaniHaryono/Buku/tree/feature/release-branch\ne3: guide for uploading to pypi\n\nregister to pypi and test.pypi\ncreate ~/.pypirc and fill it with your config (example below)\nremove readme.rst if exist\ngenerate readme.rst\napplied following fix:\n  5.1 check any text that maybe recognized as enumerated list\n  5.2 newline between example section\nupload first to test.pypi. command: python3 setup.py sdist upload -r pypitest\nif upload success but result is not as intended, change the version with postn-suffix format. fix the program and go to number 6.\nif upload sucsess and result is as intended:\n  7.1 check the program version. maybe rolled it back to original if possible\n  7.2 upload it to pypi. command: python3 setup.py sdist upload -r pypi \n\ncode to generate readme.rst, require pypandoc from pip and pandoc e.g. from ubuntu repo\n(note that everytime setup.py executed it will generate readme.rst if not exist)\npython\nimport pypandoc\nlong_description = pypandoc.convert_file('README.md', 'rst')\nwith open(\"README.rst\", \"w\") as f:\n    f.write(long_description)\nexample pypirc\n```ini\n[distutils]\nindex-servers =\n  pypi\n  pypitest\n[pypi]\nrepository=https://pypi.python.org/pypi\nusername=RachmadaniHaryono\npassword=\n[pypitest]\nrepository=https://test.pypi.org/legacy/\nusername=rachmadaniHaryono\npassword=\n```. add the doc see the 3th edit of my comment above \n\nWhere's the test.pypi file? Link please\n\nyou mean this ?\nhttps://test-files.pythonhosted.org/packages/c3/74/c4b3cedaf04e262d9a78bf1d291c08ddea0882d336c19baf5e2d78abe691/buku-3.6.post8.tar.gz\non this page https://test.pypi.org/project/buku/3.6.post8/#files\nit is basically this commit 83165e26c20ae461a4034e07b6bdf8aff578136f. @jarun i create https://github.com/jarun/Buku/wiki/Upload-to-pypi, so anyone who want to upload the program to pypi can look at that instead searching in todo list thread. related to idea on #255 \nexample: https://github.com/rachmadaniHaryono/Buku/tree/feature/server\nscreenshots\n\n\n\ncurrently only for view function on bookmark and tags. the style is taken from bootstrap starter template https://getbootstrap.com/docs/3.3/examples/starter-template/\nthere could be more advanced feature such whitelist/blacklist tag, so there will be + or - sign after the tag to do that . i haven't tried with other but you can put it on 0.0.0.0 so other device can reach it\nhttps://stackoverflow.com/questions/31904761/what-does-app-runhost-0-0-0-0-mean-in-flask\nso run the command like this\nshell\nbukuserver run --host 0.0.0.0\nsee also more run option with bukuserver run --help\ne: command is changed from buku-api to bukuserver. >Probably we can add a directory named buku_server and have the implementation there\nimo we can rename the api folder to buku_api or buku_server and change the setup for the new path. the name api is too common and may conflict with other package \ne: \n\nI am pathetic with GUI stuff but I believe we will get contributors as we keep adding ToDo items.\n\ni am also learning and most of this is done with less html and without javascript for now.\ne2: changed both folder and command to bukuserver. first just install it in your virtualenv\nshell\npip install -e .\npip install -e .[server]\nthe run the command. should the command be changed as well (from buku-api to buku-server)?. done, will edit recent comment to match new command. @tom-i \n- first make you are on this commit 250758b1aaf8c5a131bdba84416f552590d3407a (run git show)\n\ncheck if setup.py contain entrypoint like below\npython\n    entry_points={\n        'console_scripts': ['buku=buku:main', 'bukuserver=bukuserver.server:cli']\n    },\ncheck also if setup.py have extra server dependencies\npython\n    extras_require={\n        'HTTP': ['urllib3'],\n        'CRYPTO': ['cryptography'],\n        'HTML': ['beautifulsoup4'],\n        'tests': tests_require,\n        'server': server_require,\n    },\ncheck if templates file exist on bukuserver/templates/bukuserver folder. there should be 4 html files\ni also make it possible to run it directly on server.py like so python bukuserver/server.py but i don't recommend it, use bukuserver command instead.\n\nalso this is optional, but report if favicon is still showing error. For documentation I can only think of 2 points\n- additional installation package. See more below \n- running the server. Show how to run on user defined host & port. \nI just realize that on ubuntu installation it is recommended to install from ppa. I haven't check if required  server package  is on ppa so I recommend only to install from pip for now\n\nAlso maybe inform user that this feature is still on experimental stage. Try this to get server branch https://stackoverflow.com/questions/9153598/how-do-i-fetch-a-branch-on-someone-elses-fork-on-github\nE: you can also add other fork to your local git repo. See git remote add. You can checkout the branch git checkout rachmadaniHaryono/feature/server. git remote add rachmadaniHaryono https://github.com/rachmadaniHaryono/Buku.git\ngit checkout rachmadaniHaryono\ngit checkout -b rh-server rachmadaniHaryono/feature/server\nThat will create rh-server branch on you local repo\nCurrently I don't have my laptop until few hours later, so please check the command  again . note on doc conversion for pypi upload\n2 example from last time (#233) is already fixed directly by pypandoc\nnow it seems example 1 to 9 is not formatted correctly\nsee https://test.pypi.org/project/buku/3.7/\npypandoc seems merge some line on one of those example\nother than that removing raw html part should make generated rst file ready to upload. - http://blog.jonparrott.com/github-flavored-markdown-on-pypi/\n- https://dustingram.com/articles/2018/03/16/markdown-descriptions-on-pypi\nThis means release branch can be deleted and no  conversion needed for next release . \nhttps://github.com/rachmadaniHaryono/Buku/tree/feature/statistic\nno link yet to statistic page and user have to go directly e.g. 127.0.0.1:5000/statistic\nthe chart is using chartjs from http://chartjs.org/docs/latest/\nit can more expanded, e.g. \n- tag statistic \n- most common word on description, \n- domain to tag relationship\n- nlt for description\nFUN idea: Badge:\n- 0, 10, 100, 1k bookmark/tag\n- sfw/nsfw/category bookmark achieved (have x website bookmark with max or min number)\n- unique domain award (when unique domain is the most dominant)\n- website bookmark (only bookmark certain website or it is 80% of the bookmark)\n\nhere is kinda concept that i imagine for additional feature on bukuserver. user/developer/thirdparty can add plugin which can be shown on each page.\nthis is kinda tricky because\n- how plugin is managed\n- enable/disable plugin\n- plugin location\n- link to plugin\n- html/js/css?\n- position on main page. >We do not track usage data. If we want to have this feature (and it looks great) we should have it disabled by default and enable only if user wants it. \nNot quite sure if this is categorized as tracking usage data, because all data calculated each time per request and the result is not saved anywhere. Also no other database request other the first time getting all records. So Imo opinion it is similar to display number of your bookmarks\nOf course unless the flask bootstrap or the included chart.js is compromised, it will be different story\n\nshould have it disabled by default and enable only if user wants it.\n\nThere is several way I can think of to do this\n- soft confirmation : just yes/no confirmation either the first time or every time user enter statistic page \n- environment variables : user have to set BUKUSERVER_STATISTIC to enable the page\n\ndB \n\nI have no idea how to approach this. I imagine that the new side database never hold any buku index and buku dB is always prioritized (except some exceptional case). The disadvantage is more database request \nThe side database can hold url, tag, title and produce/process something about it. \nE.g.Url icon plugin (or something similar). first server get requested url after that looking for paired icon in side database \n\nBut still this is just some idea because I think it is already out of scope of what buku should be. \nIf people really want it may have to create another repo for this. Use python collection.Counter (?)\nE: this line https://github.com/rachmadaniHaryono/Buku/blob/feature/statistic/bukuserver/server.py#L432 . Yes, no result data recorded . For now just test it and see if there is any error.\nWhat I haven't decided Is how the url formatted \nAlso currently all bookmarks will be shown, which may take long time when user have 1m entries, so alternative \n- paging \n- Javascript loading\nE:it may take hours till I can continue on this and other issue . i have seen that commit, other than main function there is nothing else to test. our main function is currently not tested due to how complex it i.\nfor server i think i can manage to change flask-wtf and add some doc before tomorrow. i'm not quite sure with what i write on readme. \nsubcommand run is most important subcommand for now and bukuserver only have one option so far (BUKUSERVER_PER_PAGE). >Add something, we will review and update\nhttps://github.com/jarun/Buku/pull/257/commits/599f239d07fc4896f231818aebf4bad56a469a0f\ncurrently only that. @jarun can decide position and section title on readme.\ne: also i can't guarantee consistent style between pc and smartphone, so if someone understand more css/bootstrap can check/recommend/fix better way on template. >So in virtualenv install required packages and then run ./server.py run --host 0.0.0.0 from api directory right?\nwhile that is possible, i do recommend to install with pip/setup.py and run it with command bukuserver. put it here. try that commit 298346b\n. Currently you can't yet, but there should be another form on bookmark page to create one\nThis form will send POST to bookmark page and inform you if it successful or not. \nI think I will prioritize it on next commit. @tom-i https://github.com/jarun/Buku/pull/257/commits/2d5beda5ff50196c838ad5b5967650e7e0999b7b for creating bookmark\ne:comment: style for search and create form should be better (may or may not on this pr)\nthe url form should be made wider, but currently it is made so search and create bookmark form stand side by side. @tom-i try https://github.com/jarun/Buku/pull/257/commits/a5827cfd94b85d6ed9b79091681dacf0afe3d26e. note about replacing tag\n\nbased on this link it is impossible to use PUT as action of form, so i use POST method \nhttps://stackoverflow.com/questions/8054165/using-put-method-in-html-form\ncurrently only work for single tag replace. there should be a method for this and keyword search to add new form on click of a button. i am thinking of using this https://github.com/tristandenyer/Clone-section-of-form-using-jQuery\ne: there is error when new tags is empty, because buku will ask to user through read_in. maybe an alert when tags is empty. @jarun can you add new parameter to bypass this?\n\nalso unrelated to this commit, but on refreshdb method's doc threads parameter is default to 4, but actual parameter is a required parameter. Creating and editing bookmarkis already in pr, others features can be added on next pr\nI will rebase it first so no conflict on setup.py,\n~~Expect few hours from this comment~~\ne: done\ne2: maybe i can't do anythingj in next days, will be busy irl. >which part you mean? About installing additional dev packages?\nshell\n+(env) $ pip install appdirs\n+(env) $ pip install beautifulsoup4\n+(env) $ pip install buku\n+(env) $ pip install requests\n+(env) $ pip install cffi\n...\nthat part\n\nyes of course, but jaruns repo doesn't work with your changes right?\n\nwhile it correct for now, this pr is intended for main buku server. it feel redundant to me if the change have to be added later after merging server pr\ne: but i would be happy if someone like you who know nothing about python write this.\nin this case we can write guide even for non python dev. @tsaoyu can you also write some test for pr. . @jarun Got irl problem so it may take some days.\nBut @tom-i you can change your branch and upload it to your repo. The change will be displayed here and if it is ok, we can merge it . temp fix for now \n- download https://github.com/jarun/Buku/files/1321193/bookmarks_res.zip to see the files of the zip file\n- create the new pickle files based on new test for each condition (with or without parent tag.\n- zip the new pickle files in new tags and upload it. you can upload it to github comment and change the link to that (this line https://github.com/jarun/Buku/blame/master/tests/test_bukuDb.py#L1244)\nto create new pickle, comment these two lines and write method to dump new pickle result (simple pickle.dump is enough).\n- https://github.com/jarun/Buku/blame/master/tests/test_bukuDb.py#L1278\n- https://github.com/jarun/Buku/blame/master/tests/test_bukuDb.py#L1309\n~~note for todo: maybe change the test by include the data on tests folder. this doesn't seem maintainable at all. also maybe possibility to use json instead pickle for readable changes which can be tracked by git~~\ndone on eikenb repo pr      \ne: related \n- #215 \n- https://github.com/eikenb/Buku/pull/1. @eikenb @jarun anything i can help with this?. maybe last commit for this feature\nnow tag statistic is also on the page. \nthere is view all button which will open modal page showing table of the rank\ne: also enable and disable statistic page ignored for now and (maybe) will be added on future commit\n\nknown issue\n\nit seems the time indicator may not work, so it will only show created x ago indefinitely.\nbuku don't can't search bookmark, which don't have any netloc (something like javascript:....). so no link for (No Netloc) entry\ncolors and number of default item is constant\nloading for the first time, which may take some time\ncache (may) not work. There should be possible by setting something here http://www.chartjs.org/docs/latest/general/interactions/events.html\n\nRelated https://stackoverflow.com/questions/26257268/click-events-on-pie-charts-in-chart-js\nMaybe I can add that on next pr. model 1 is currently used template, either see #251 or master branch\nmodel 2\n\nmodel 3\n\n\ni'm playing on bookmark view and see if there is anything that can be changed\ni actually want to ask the user about the current view\n\ndoes it need favicon?\ndo they want to create their own view or only configure each part of bookmark view?\nhow do they want to view url? full, shortened, netloc only or None?\ndo they want to see description?\ndo they want to see the tag on the same cell (model 1, and model 2) or on different cell (model 3)?\n\n\nalso netloc only for url is inspired by reddit.\n\nthis can be expanded further by adding netloc filter\nwork really well only on entry with good title\ncould eliminate url entry\n\n\nalso i found bug where bukuserver can't find chart.js but can't reproduce it.. >if we add favicon do we have to fetch for every bookmark each time?\nkinda, basically it just  add filter to get netloc and add this line to html\nhtml\n<img src='http://www.google.com/s2/favicons?domain={netloc}' />\nrelated https://stackoverflow.com/questions/5119041/how-can-i-get-a-web-sites-favicon\n\nkeep netloc only, and show full link on mouse hover. Saves space.\n\nnetloc only is easy. to show link there is actually 2 option. \n\ndon't do anything. each browser show link (on chromium it is bottom left) when mouse over the link.\nuse bootstrap3 tooltip. example here https://getbootstrap.com/docs/3.3/javascript/#tooltips\n\n\n...we can limit the desc to 1 line by default and expand on click (I am not sure of the effort).\n\n\nthrough css. related https://stackoverflow.com/a/1318119/1766261\nlimit character\n\nfor expand on click maybe bootstrap's collapse https://getbootstrap.com/docs/3.3/javascript/#collapse\n\nonly configure each part of bookmark view should be fine. We should see if we really need to provide any configuration options. We should keep minimal.\nI think we can have a config to show or not show description OR we can limit the desc to 1 line by default and expand on click (I am not sure of the effort\n\n2 option for setting bukuserver\n\nuse os env variable. this is similar to  flask setting\nuse config file. load config file first time server started\n. OK hopefully this will be the last thing before next release . >http front end so as to access BM's from tablet/phone (example: searx/webapp.py). The Rest API probably does this but documentation is missing?\n\ncurrently working on that bukuserver.\n@tom-i mention he can run on on espresso server and can access that.\nto run it locally and make it accesible to device on same network, just host it on 0.0.0.0\n\nUser based authentication if needed, for multiple users from webapp interface. Probably difficult, as DB structure will need some modification, location of buku.sqlite becomes issue, and \"run-as user\" must be addressed?\n\nthis feature may or may not included on bukuserver goal. the actual reason there is development for it is just an accessible frontend through hosted server.\ncurrently bukuserver don't need additional database, and it may kept it that way for some time in the future.\nadding more feature is possible as long as it is simple one (see statistic page for example)\n\nScrapbook function: Preserve page or site, index it as special BM with option to not refresh (immutable).\nPDF: Save single web page as pdf, then text search ability for saved/indexed pdfs.\n\nnot quite sure i can talk much about this but there is similar project which more focused on archiving link see https://github.com/pirate/bookmark-archiver\nit have pdf, webarchive.org and html saving. \nthere is planned feature for search ability but look like it will not be merged\nhttps://github.com/pirate/bookmark-archiver/pull/24\ne: related maybe possible to create buku integration with this?\nhttps://www.gregmcleod.com/rip-xmarks-hello-syncmarx/. >Is there a web-plugin with it's own database and can handle this? Otherwise, we can add this to the ToDo list for bukuserver. It makes the server operations truly private.\nIf additional database is on the plan, I'm thinking about adding this https://pythonhosted.org/Flask-Security/quickstart.html\n\nIs it save to open that port to the Internet?\n\n\ncurrently no \nform is not  using csrf\neveryone can edit / view your saved bookmarks \nsecret keys on app is  using random number\nother security think I didn't know\n\n\nIs there any security issues for the front end? I mean if someone can hack the page and can easily access to my router.\n\nMain issue when open the port to internet is user access as mentioned above.\n\nIf there is new update (via git or so) for bukuserver / buku, should I install newer version via pip3 again? Or which steps I should follow? E.g. uninstall older version via pip3 and then git pull repository and then install new bukuserver?\n\nCmiiw on this\nUsing git + virtualenv will always get the latest file, which will  put on local main folder, so it is no problem\nI'm still doubt with pip installation, but it should also update bukuserver on user installation folder if it is installed correctly (not tested for installation using sudo pip but that is also discouraged) \n. As note there is this doc on how to deploy flask http://flask.pocoo.org/docs/1.0/deploying/  but I haven't try it yet (mostly due to my internet connection issue) . example of current markdown on pypi https://test.pypi.org/project/buku/3.7.post4/. https://github.com/rachmadaniHaryono/Buku/tree/feature/append-tag-on-import\ncurrent behaviour\n- import file\n- bookmark exist\n- nothing changed\nin my use case, i move the folder and expect it also reflected on buku tag.\nthere are actually two options, replace or append, but i choose append to prevent any undoable step and probability of missing tag. \ncurrently on branch only work on html import. >If you call parse_tags() all the duplicates will be removed and they will be ordered.\npython\ntags = row[1] + tags_in[1:]\ntags = parse_tags([tags])\ndoes that part on append_tag_at_index method didn't remove duplicate tag already? . can't think anything simple for server.\nimo the next step should be designing the additional database, adding more javascript capability, pluginize some parts. @jarun @kirakrishnan not quite sure how small it is, but here is some items that can be done:\n\najax call to edit/create bookmark\nexample urls for bookmark. will be late for this and not sure how long. this may affect that image/screenshot task for bukuserver. hope some irl problem will be resolved fast so i can get back to it.. create simple pr for that\n\n\nunrelated\n\nhttps://www.reddit.com/r/linux/comments/8lscnz/buku_v38_bookmark_manager_released_with/\nhttps://www.reddit.com/r/commandline/comments/8lscrt/buku_v38_bookmark_manager_released_with/. @jarun some reply here to not make it cluttered\n\n\nhttps://github.com/jarun/Buku/commit/a481e9c0558a435f6656a9e284f6783e2ed0046c\nname and description should be separated.\nnot quite sure why it have to be changed to md, but i will follow it.\nalso unrelated to this edit, but this part should be added \nhttps://github.com/jarun/Buku/issues/278\n\nhttps://github.com/jarun/Buku/commit/aea87cb2ae863bc81f9f2010867d75177cd7bd11\ni'm ok with moving it imgur.\n\nhttps://github.com/jarun/Buku/commit/88b046775f9495a1fcf125775fcd5234fc210e18\nok with that\n\nalso i will hopefully able to replace the included js file this week based on @szlin advice \n\ne: unrelated to this but imgur is blocked here in indonesia, but i don't know how much indonesian buku user affected here. . The update is ok\n\nMoved it to markdown as the main page is also in markdown\n\nOk that is fine\n\nIs there a working alternative to imgur? I used another site earlier but it went down. imgur still lives. ;)\n\nNothing as simple as imgur. Maybe keep imgur for now and add alternative when user ask. - designing the additional database,\n- adding more javascript capability, \n  - ajax call to edit/create bookmark\n  - example urls for bookmark\n- pluginize some parts\n- use non minified JavaScript\n- user buku library\n- login/permission\nThat is just copy paste from comments above.\n\nSome idea\n\nimage screenshot\nweb status (404, 200)\nGitHub Link details,( programming language, Stars,etc)\n\nSome crazy idea that I write, so I don't forget it next time (maybe idea for plugin)\n\nCan't specify too details because I'm on mobile right now. this is just guess, but buku installation on this virtualenv /home/nashome/programs/Buku/bukuserver/env/bin is not updated. try running pip install -e . once again on virtualenv after updating buku to latest version  to reinstall it.\nbased on your description, the upgrade should be\n- kill bukuserver running instance\n- activate virtualenv\n- git fetch && pip install -e . buku repo or just run pip install -U buku to get latest version\n-  restart\ne: \n\nis it possible that I have 2 different versions of bukuserver?\n\nhave 2 different virtualenv on each virtualenv install different version/commit you want\ni.e. using v3.7 and v.3.8\n\nmkvirtualenv venv1\nworkon venv1\ngit checkout v3.7\npip install -e .\ndeactivate\nmkvirtualenv venv2\nworkon venv2\ngit checkout v3.8\npip install -e .\ndeactivate\n\n(based on your description) the cron command would be \n@reboot cd /home/nashome/programs/Buku/bukuserver/venv1/bin && ./bukuserver run --host 0.0.0.0 --port 5000\n@reboot cd /home/nashome/programs/Buku/bukuserver/venv2/bin && ./bukuserver run --host 0.0.0.0 --port 5001\nnot sure about the correctness on last part because i use different virtualenv, but basically just put the correct virtualenv path based on your configuration.\nalso use different port or host. Random thought :\nThis part is not filled yet\nhttps://github.com/jarun/Buku/community\nAlso Imo #287 can be closed now . https://www.ghacks.net/2018/07/27/mozilla-plans-to-remove-bookmarks-descriptions. doc for new feature taken from #298\n```\nNoting down stuff we need to handle if we do this (to be done gradually, not in one PR):\n\nTrigger auto-fetch of tags and description only when the options are not provided in cmdline\nProvide options in editor to update description and tags from web\nExtend immutable to keep description and tags untouched\n~Limit auto-fetched tags to certain word count?~\nFlag immutable will now apply to title, desc and tags.\n```\n\ndoc:\n- https://www.w3schools.com/tags/tag_meta.asp\n- https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/The_head_metadata_in_HTML\n- https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta. doc on slow test \nbased on this rachmadaniHaryono@f6cbbe8 here are slow tests\n124.81s call     tests/test_bukuDb.py::test_delete_rec_range_and_delay_commit\n61.51s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_multiple_tags_search_all\n61.49s call     tests/test_bukuDb.py::TestBukuDb::test_add_rec\n61.41s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_multiple_tags_search_any\n61.38s call     tests/test_bukuDb.py::TestBukuDb::test_search_keywords_and_filter_by_tags\n61.36s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_tags_exclusion\n61.32s call     tests/test_bukuDb.py::TestBukuDb::test_get_rec_id\n61.25s call     tests/test_bukuDb.py::TestBukuDb::test_append_tag_at_index\n61.24s call     tests/test_bukuDb.py::TestBukuDb::test_searchdb\n61.24s call     tests/test_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-True]\n61.24s call     tests/test_bukuDb.py::TestBukuDb::test_suggest_tags\n61.23s call     tests/test_bukuDb.py::TestBukuDb::test_delete_tag_at_index\n61.23s call     tests/test_bukuDb.py::TestBukuDb::test_append_tag_at_all_indices\n61.22s call     tests/test_bukuDb.py::TestBukuDb::test_replace_tag\n61.22s call     tests/test_bukuDb.py::test_delete_rec_index_and_delay_commit\n61.21s call     tests/test_bukuDb.py::test_compactdb\n61.21s call     tests/test_bukuDb.py::TestBukuDb::test_get_rec_by_id\n61.20s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_tag\n61.20s call     tests/test_bukuDb.py::TestBukuDb::test_search_and_open_in_broswer_by_range\n61.19s call     tests/test_bukuDb.py::TestBukuDb::test_search_and_open_all_in_browser\n60.33s call     tests/test_bukuDb.py::test_print_rec_hypothesis\n14.83s call     tests/test_bukuDb.py::test_browse_by_index\nrelated pr\n- https://github.com/jarun/Buku/pull/301\nnotes:\n- maybe use vcrpy to cache\n- check if any sites used take too long to load. replace them or cache them\n- maybe split slow test and fast test\n- last fast test is https://travis-ci.org/jarun/Buku/builds/411723456\n- first slow test is https://travis-ci.org/jarun/Buku/builds/412647388. basically something like\npython\ndef get_recs_by_netlocs(self, netlocs):\n    all_records = self.get_rec_all()\n    for rec in all_records:\n        if urlparse(rec[1]).netloc in netlocs:\n            yield rec\nbut i'm still considering if this fit for terminal (new keyword? new flag?)\nanother alternative is i can add this directly to bukuserver but it will require more work on query. For now none and on Terminal (and bukuserver) will add complexity to query. i think i will not add description configuration and will change it to plugin system (maybe after release).. - api module is changed to bukuserver\n- bukuserver is runnable when buku is installed through setup.py\n- flask default cli interface is used instead custom one\n- requirement package is included on setup.py as extra\n- bukuserver handle not only api but also normal html request\n- statistic page on bukuserver\n- CRUD on bookmark in bukuserver\nlike that? should i create another pr for that?. like that https://github.com/rachmadaniHaryono/Buku/tree/feature/bukuserver-changelog ?. for bukuserver, no i think that's it. \ni will create pr for that. thank you @stkw0 , fix created on the pr.\ndo we create fix release or just let @stkw0 clone the repo @jarun?. no, it is not set on server.py.\ni am not familiar with docker but there is this doc where you can set up environment variable \nhttps://docs.docker.com/docker-cloud/getting-started/deploy-app/6_define_environment_variables/\nthere is this example line \nshell\n$ docker-cloud service set --env NAME=\"Friendly Users\" --redeploy web\nBUKUSERVER_PER_PAGE=100\nbased on that the flag would be --env BUKUSERVER_PER_PAGE=100. i'm actually planning to use something like vue js, but it take time. (e: not sure if it is applicable in short time)\nthis pr can actually be merged as no important change yet, after fixing that travis-ci error\ne2: pr fixed. >Also, would it be possible to reduce the size of the .js files or avoid them? It would be good to keep the size of the blob less.\nI can use the minified version but that mean bukuserver will not shipped for debian due to guidelines.\nOr we can ignore debian gudeline. What do you think?. not that i know of. my guess it can be achieved using script, but it would be harder because there is no standard for that\ni'm still exploring options now, but here are some option\n\nuse minified chart.js\nbukuserver not uploaded to debian\nless size than actual chart.js\nfeature available when offline \nuse link\nbukuserver uploaded to debian\nno js included\nfeature not available when offline \nuse flask bower https://github.com/lobeck/flask-bower\nbukuserver uploaded to debian\njs not included on package, but will be download by user himself\nfeature available when offline\nadditional install setup. >are there plans for porting Buku on Microsoft Windows anytime soon?\n\nAs long as you can install pip,it is no problem\nSee https://stackoverflow.com/questions/4750806/how-do-i-install-pip-on-windows\nOther option is to create windows compiled version as example using py2exe or similar tools http://www.py2exe.org. But we don't have maintainer for that (yet). >Should buku use an alternative library, or it's better to open an issue on flask-paginate asking for python3.6 support?\nI haven't check if there is another alternative for that library,but imo because current llibrary work and there is no hack/edit to be done for python 3.5 3.6 ,so we can keep using it\nIf user with that python version find problem with pagination, we will try to fix that it and if possible create pr for flask-paginate\nCc @lixxu. It is possible As Long there is no restrictions on library. Try pair last buku command with xargs?\nhttps://stackoverflow.com/questions/8296710/how-to-ignore-xargs-commands-if-stdin-input-is-empty. i remove the plan for python3.7 because there is no easy set up for it. \nthis doc mention that there is only python3.7-dev https://docs.travis-ci.com/user/languages/python/\nthere is also this which require more setup https://github.com/deadsnakes/travis-ci-python3.7-example. Can you make test case for that @dkiyatkin? If you can't, I will create it for you\nFor that double White space, imo it is better to use \\s{2,} to catch other doubled whitespace\nE: also can you rebase the pr. I will create test for it\nGoogle will return title based on your location, so there will be exceptions for this \n\nI don't think we have to make do for poor choices of page titles. We can accept them as they are without any modification. If the site owners think double spaces and newlines are OK to be included in the titles, why do we bother?\n\nOK I agree. \nCmiiw there will be no newline because It will be rendered as space by parser, so I expect no double / triple newline on result. But maybe there will be tab or space like unicode character . going to explore other possibility with this test.\n\nchange it to http://example.com/ . maybe more reliable from google\nthere is inconsistency with '?' as title as seen here\ntry it with/without title and empty case. or maybe use hypothesis to test all kinda test (if it take too long, just test some special input + normal text)\n\ne: done\nnot using hypothesis. the result is also as expected. before rebase it is work with those urls, but i have to check again after rebase. test added to fix travis.. I am interested but I don't know if I have time on next few weeks.\nIf I do, I will create wip pr for that. imo it is better to keep that tag.\nlink on last pr: https://www.w3schools.com/tags/tag_meta.asp\nthere is also this doc from mozilla which stated the same thing https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta\n\nkeywords which contains words relevant to the page's content separated by commas.\n\nactually there is also this specification which have tag-like data http://ogp.me/ (see video:tag, book:tag, article:tag etc)\n\n\nFilter out tags which are more than 3 words and doesn't have a comma in between.\n\nimo this solution is too ambiguous and may lead to positive false result. also not sure if this applicable to non alphabet tags\n\nother thing: maybe add feature to list tags, filter tags by regex, or other simple operation on tags (split/replace by regex, normal character, ) \n\ne:not yet discussed, but any plan to add author or other easy meta field as tag?\nit can be added like author:author1\nbut i haven't see other field other than author can be used . may unrelated to this, but is it possible to isolate update bookmark code on main function, so it can be properly tested? \nexample:\n```python\ndef update_record(args):\n    ...\ndef main():\n    ...\n    # Update record\n    if args.update is not None:\n        update_record(args)\n# Delete record\nif args.delete is not None:\n    ...\n\n```\n. so only variable scope? i haven't fully check it but, does that update section return something to be processed on other section?. mock up: https://github.com/rachmadaniHaryono/Buku/commit/d187fdea3f330ed28e97476e87c45b3ca33b146b  \nnothing changes on actual method, and variables are added as function parameters to pass from main function.\nthis way bdb can use mock obj and can be tested later.\ne: what is not on that commit are a way to check if that update section return something and a test to check if any side effect caused by it. i will create another pr for this alongside some test. it should be added after #301 merged. this only fix test, but not test the new feature extensively.\nnot sure what the cause but isn't the test take too long?\nbased on this https://github.com/rachmadaniHaryono/Buku/commit/f6cbbe85b44d519703522ea21c75ccf1ebc6d9c3 here are slow tests\n124.81s call     tests/test_bukuDb.py::test_delete_rec_range_and_delay_commit\n61.51s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_multiple_tags_search_all\n61.49s call     tests/test_bukuDb.py::TestBukuDb::test_add_rec\n61.41s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_multiple_tags_search_any\n61.38s call     tests/test_bukuDb.py::TestBukuDb::test_search_keywords_and_filter_by_tags\n61.36s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_tags_exclusion\n61.32s call     tests/test_bukuDb.py::TestBukuDb::test_get_rec_id\n61.25s call     tests/test_bukuDb.py::TestBukuDb::test_append_tag_at_index\n61.24s call     tests/test_bukuDb.py::TestBukuDb::test_searchdb\n61.24s call     tests/test_bukuDb.py::test_delete_rec_on_non_interger[a-a-1-True]\n61.24s call     tests/test_bukuDb.py::TestBukuDb::test_suggest_tags\n61.23s call     tests/test_bukuDb.py::TestBukuDb::test_delete_tag_at_index\n61.23s call     tests/test_bukuDb.py::TestBukuDb::test_append_tag_at_all_indices\n61.22s call     tests/test_bukuDb.py::TestBukuDb::test_replace_tag\n61.22s call     tests/test_bukuDb.py::test_delete_rec_index_and_delay_commit\n61.21s call     tests/test_bukuDb.py::test_compactdb\n61.21s call     tests/test_bukuDb.py::TestBukuDb::test_get_rec_by_id\n61.20s call     tests/test_bukuDb.py::TestBukuDb::test_search_by_tag\n61.20s call     tests/test_bukuDb.py::TestBukuDb::test_search_and_open_in_broswer_by_range\n61.19s call     tests/test_bukuDb.py::TestBukuDb::test_search_and_open_all_in_browser\n60.33s call     tests/test_bukuDb.py::test_print_rec_hypothesis\n14.83s call     tests/test_bukuDb.py::test_browse_by_index\ne: imo this task should be added to todo list\ne2: no update on changelog yet, because i haven't review all commits. i don't think i can make it to release. \nyou can skip this pr or i can close this pr until i have time to test it and make sure it is working.. similar error to this https://github.com/jupyter/notebook/issues/3840\nhttps://bugs.python.org/issue31014\n. there is plan to add login feature, but i am busy irl. so until it is implemented, it is recommended to run it on trusted local environment. 2 way to do this\n\nput an interface for user to input password on encrypted database\nput a password prompt every time user start with an encrypted database\n\n2 is the easiest with minimum change to html/routing etc\n1 need more planning. i assume there should be a way so user can decrypt once on a single session until the server shutdown or user log out. thanks for the report, related pr added fix for this. @jarun travis still error because flake8 check, do you working on that? if not, i can create another pr for that. sorry about that, \nnew pr created for this. i will add bookmark file to manifest. \n~~after the fix is merged into the repo you can test it and no pypi release yet, you can test it on empty virtual environment on empty folder and see if the test working~~ see message below for how to test it\ni will notify you when it is finished\ne: wrong instruction. @stkw0 PR created. you can check this when running python setup.py sdist and created package will alco include bookmark file. cmiiw this can be simplified like this?\npython\nif config.getboolean(name, 'default') or config.get(name, 'name').lower() == \"default\":\n. maybe new linter check. it is quite easy if @invl don't add it i will create another pr. i have seen https://github.com/ckolumbus/Buku/commit/ba79c13ef1cd8cc21b9361f308c8dad10933826e, and i think you can create pr for that and i will comment on that, so please ping  me when you made that.\nbasically thing you should change\n\ncreate new function to get buku db object. that way current_app.config will be written on that function only. this may useful later when we can get user feature later\nuse kwargs on statistic view, maybe there will be another for other args, kwargs\nalways check condition when no env var is given. it is from other test case. if @ckolumbus don't know how to fix it, just merge this pr and i will create another pr for the fix\n\ne: or i can pr direct to @ckolumbus branch. > Fix tests, which are taking long time to finish\nthis is finished. anyone ever have experience database with empty record but but not 0 filesize?\ni tried open it with db browser for sqlite but it also show no records. is that empty database at first or there is already records in that?\nconsole\n$ ll ~/.local/share/buku/bookmarks.db\n-rw-r--r-- 1 q q 10907648 Jan  2 00:03 /home/q/.local/share/buku/bookmarks.db\nthat is the file (10.4mb), yet no record either from buku or from sqlite db browser. while it could be done, it is better to put the effort into making new feature. can you check it once again if there is any exclude rule we can remove on tests/.pylintrc?. yeah it is. just remove those line so travis will check them on every pr.\nunrelated, next time you create pr use new branch so you don't have to force-push the commits. i'm okay with separating it to file, just put doc on somewhere about what goes where.\nbut this mean a really big change and may breaking a lot of thing, so be careful with it. the value on apache conf is fixed and it is not configurable on code above.\nalso just make sure it is optional, so maybe env variable flag to enable it.\ne: not sure about the additional env variable on that class (SCRIPT_NAME, PATH_INFO, HTTP_X_SCHEME, HTTP_X_FORWARDED_SERVER). my recommendation is to use config file\nso maybe BUKUSERVER_PROXY_CONFIG_FILE or something. i am little bit unsure about this.\ni'm still thinking on how buku should test the user interface.  we can either not test it at all or use basic test just like this pr and remove the hypothesis.\nif this pr accepted, remove the hypothesis part on that test, rename the function and simplify it\ne: the long request part actually can be solved using vcrpy, so test will not fetch anything after first request\ne2: other solution for long test duration is to reduce the range on the given number. can you put the output of pip3 freeze (especially certify and urllib3) @ranebrown   ?. i think i can work this week. thursday is holiday and i will ping if i start create pr for this. i actually doubt on moving buku to buku/__init__.py. mostly what i have seen on other project, init file only contain import of method/class/api which will be used on other program.. >The smoothest way to create this package would be to move everything into the init.py file as a temporary first step.\ni think i can agree for this.\nbut for future commit, will rest of the code stay on __init__ or will it be moved to other module? what i mean by rest of the code is the code that didn't match any group later\ne: does main function stay in __init__.py too?. hi, because the plan is changed now and there is no need to review the pr anymore, i remove myself from the review request\ni will follow jarun recommendation for now. if there is really need to split the code  in the future, we can use this pr as reference. can you run it from source?\nif yes, add print after the first edit\npython\nca_certs = os.getenv('BUKU_CA_CERTS', default=certifi.where())\nprint(ca_certs)\n. yes, i just need to find some time to work on other part. why this removed?. keep the space before variable definition. ~~i suggest using single dash of ib and maybe double dash from import-browser~~\njust read the message before it. so ignore this. raise error on else incase there is strange unrecognized OS. maybe keep in single logerr. if this function defined in outside class method, it can be tested. iirc in this case no because the program is not exit yet.\nthere is other catch exception with error message and maybe better to make it similar\nhttps://github.com/jarun/Buku/blob/master/buku.py#L522\npython\n        except Exception as e:\n            logerr('initdb(): %s', e)\n            sys.exit(1)\njust remove sys.exit, change the message and keep single loggerr call\ne: apply also to other exception catch. newline. newline. newline. remove this if not really needed. Use pytest paramerize here. at least minimal debug msg. mostly to avoid pylint check. any future error may need different method.. Does it need to be a function? It seems way too big for single line of code\nMaybe use lambda? . Currently there is an error on python 3.6 and pytest 3.5.0, so I choose the version before that.\n~~Maybe~~ it can be fixed by excluding pytest 3.5.0. Imo just put it up here (main repo) for review. \nif everything is done and feature is ready to be merged I can merge tom-i branch myself and we can close the pr on main repo . it mean virtual environment is activated.\nimo it should be removed and let the user decide their own virtual env. imo package should be installed from setup.py same as the next section (or maybe even merge it)\nif any package added or removed, the documentation will not be changed. start from here, i recommend create a function to replace a BukuDb.\nbasically something similar like this:\npython\ndef get_bukudb():\n    db_file = current_app.config.get('BUKUSERVER_DB_FILE', None)\n    if db_file is None:\n        return BukuDb()\n    return BukuDb(db_file)\nit may seem too much but if later `BukuDb changed positional argument or default argument, it will be easier too update.\nalso when the user feature come it will only changed on this place. this line should use above get_bukudb func. use kwargs for this\nso views.StatisticView('Statistic, endpoint='statistic, bukudb=bukudb)\ne: i have read your post once again, that you want it similar to other model view. But we can make exclusion because this is not model view.. with using kwargs method above, it will be self.bukudb = kwargs.pop('bukudb', None)\nand on index method use self.bukudb if self.bukudb else BukuDb(). ok. then everything look good to me. ",
    "thewisenerd": "I've been testing appimages lately, and it involves spawning dozens of \"fresh\" chromium installs. If I were to import my bookmarks, the only way was to export from Buku, go to chrome://bookmarks, and import the generated html.\nHowever, I saw that the user bookmarks were being saved in the user data directory under the filename Bookmarks. So, if Buku could generate json that I can directly copy to ${userProfileDirectory}/Bookmarks, that'd allow for automated bookmark imports.\nOf course, mine is a very wierd use case, but can be used when moving to a fresh system/install.. sorry about that, have been busy. will be working on this after a few days. in the meanwhile, about your comments,\n\nmerging into an existing chrome profile can be done. however, that'd be slightly complex. Let A be chromeprofile, and B be buku. when handling existing URLs; when merging, user should be given choice of which overrides what. Whether A overrides B, or vice-versa.\na patch should also involve the option to import an existing chrome profile. This is just parsing the json, and importing, but, again, which takes priority, A, or B.\ncan be done. but (comment 4).\nit'd be better to keep this away from general help and rather document this in the manpage. this option will only lead to confusion if its there in the general help.\noh, and tests.\n\ni'm closing this issue for now, will re-open when i'm (or someone else is) ready with patches.\np.s. there can be added support for firefox bookmarks import/export too. however, that involves a bit of SQLite, and if someone can patch it too, that'd be great.\nreference: chrome's firefox importer: https://cs.chromium.org/chromium/src/chrome/utility/importer/firefox_importer.cc. ",
    "ZwodahS": "\nThe editor that is used can be configured using the $EDITOR env var.\nDefault to vim\nWill definitely extend this to update, but I will need some time to find the best place to put it in. Perhaps someone more familiar with the codebase can help.\nThe implementation is similar to that in http://stackoverflow.com/questions/6309587/call-up-an-editor-vim-from-a-python-script. I have wrapped it around a function which can be used to open up the editor with existing values.\n\nI will put it in the man and README later today. Do you prefer a single squashed commit or okay with multiple commits ? \n. yeah.. windows would be tricky. Some users might have vim/emacs installed and they should be allowed to use this too. Another way is to disable this unless the user set the EDITOR env var, instead of defaulting to vim.\n\nbuku -a xyz.com --comment help help --editor\n\nIn this case, the editor will be shown with \"help help\" populated in the section for comment.\nSimilarly, if you specified tags in the commandline args, it will also appear in the editor.\n\nI will surely help you. Please let me know the questions. I think you can initially invoke the editor and pass the parsed data to update_rec() when options --update ID --editor are specified together.\n\nYeap this certainty seems like the way that i should do it. \nI will take a look and integrate the update first, then squashed them and submit another PR. Let me know how you feel about only enabling it for users with $EDITOR set.\n. I have added the --editor mode for updating existing bookmark. It will only work if you specify a single bookmark to update, and will fail otherwise.\nAlso, I have disable --editor by default unless $EDITOR is set in the env var. Let me know if you want this to be changed.\nI also updated the README and the help menu. \nLet me know if i missed anything. No worries, I also like the idea of getting it right without having to revisit it again.\n\nWill update the instructional messages to be more clearer.\n\n\nI missed the case where user doesn't even want to add a title. What if we instruct and treat just a - in the editor (for the comment) as the marker of truly blank title? If the line is just blank we fetch the title from the web as usual.\n\n\nSo for title, empty line will means to fetch from web, and a single '-' for empty title. I totally miss the part for fetching from web because I was working offline and didn't test that part.\n\n\nelse, try to execute the arg, fail if execution fails\n\n\n\nI would rather fail if the editor is not found, than to try resolving it as much as possible, since passing --editor is a explicit intention. \n\n\nWill update --editor to accept the editor name, and look into $EDITOR as a fallback, with no default.\n\n\nLastly, can i hijack '-x' for single character param ? Typing --editor is really long-winded . Fixed various stuffs mentioned above. will be using '-w' as suggested.. The above cleans up the code and README. Allowing to edit without specifying -a and -u will be in another commit.. It looks like you clean up the args parsing quite nicely. There is one behaviour that is changed.\nWhen the user specify '-w' without any args and no $EDITOR is set, there is no error message. Previously a error message is displayed informing the users that they need to set the EDITOR or pass the arg. If you are okay with this then is fine \ud83d\ude04 \n\n\nAs for GUI editor, I tried it with macvim. For macvim, when you run it in the command line, it will open up in the background.\nHowever by specifying '-f' it will changed it to opening macvim in foreground with our temp file.\nsubprocess.call([editor, '-f', temp.name])\nMy guess is that every editor have a flag like this. What we need is to allow the user to specify something like this in the commandline or EDITOR.\nA quick fix for this is to \ncommand = editor.split(' ')\ncommand.append(temp.name)\nsubprocess.call(command)\nThis will allow users to specify the 'arg' to be passed in as well. I will see if there are other ways tomorrow.. by default macvim opens in the background and exits immediately.\nHowever, specifying '-f' opens it and buku will wait for macvim to finish before continuing. . It will works with the code i pasted above that split editor arg into a\nlist.\nI think the sub process command don't work with arg with spaces\nOn Sun, 5 Feb 2017 at 2:26 PM, Arun Prakash Jana notifications@github.com\nwrote:\n\nHow about:\nbuku -w 'macvim -f'\nDoes that work?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/112#issuecomment-277500406, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AAMC-y_mtVokAivLNtZwsVejDsjIlxqGks5rZWubgaJpZM4L0Hzd\n.\n. haha thank you too. I was going to build something myself, specifically the -w part, but realized that it will be easier if i just add it in to existing one.\n\nCheers. I am not sure if this is the best solutions, but been using it for a while and seems to work. If there is a better solution please just close this PR =). Let me check the tests and get back to this.. might just happen for me. search something and when you are in the prompt mode, press ctrl-c to exit it. After that, whatever you type after that will not appear on the command line\n. I will close this first, will reopen once i found a better fix. we just need to disable our sig handler while we are reading input. If you don't think it is necessary to fix it, i will just keep it in my fork \ud83d\ude04 \nHmm another alternative is to find a way to parse args like buku -wu 50 which might be easier. Okay, fixed it by not overwriting the default input. Let me know if you want me to submit the pull request, else I will just keep it in my fork because I have the tendency to ctrl-c. These messages aren't really part of the changes. Do you still want me to change them ? . sure, then in that case i will just keep it in my own personal branch. Sorry, i think this wasn't clear.\nThe problem is that after you save your editors, sometimes the temp object doesn't get updated with the new content. The workaround I did here is to open the temp file again and read it, instead of using the temp object.. sounds like a good idea, let me add that. Hmm I am not sure If i should blindly add them in, since I can't really test them. \nwill update it with -w and --write for bash completion. This is tricky. How do know if -w is present ? . when i use nargs='?', args.write is both None for when i specify -w without argument and when I don't specify -w.. I am going to use '*', to allow us the flexibility to specify the editor in $EDITOR or -w [editor], will that do ? . Will do so. I know this is more or less personal preference, but making function name shorter in the name of 80 chars length doesn't make it more readable. Would recommend raymond hettinger \"Beyond PEP8\" talk that he gave during one of the Pycon. . An example is this line\nresp = read_in('Delete specified tag(s) from ALL bookmarks? (y/n): ')\n81 characters, not really sure how to break it.. ",
    "friedrichromstedt": "\nDoes it work well with Google Chrome or Chromium browser?\n\nOpera 43 is Chromium based, while Opera 12.16 is not Chromium based, but uses Presto.  Opening bookmarks does work with Opera 12.16, but it does not work with Opera 43.\nI am using Buku 2.8.\nHere are the logs you requested:\n```\n$ locale\nLANG=en_GB.utf8\nLC_CTYPE=\"en_GB.utf8\"\nLC_NUMERIC=\"en_GB.utf8\"\nLC_TIME=\"en_GB.utf8\"\nLC_COLLATE=\"en_GB.utf8\"\nLC_MONETARY=\"en_GB.utf8\"\nLC_MESSAGES=\"en_GB.utf8\"\nLC_PAPER=\"en_GB.utf8\"\nLC_NAME=\"en_GB.utf8\"\nLC_ADDRESS=\"en_GB.utf8\"\nLC_TELEPHONE=\"en_GB.utf8\"\nLC_MEASUREMENT=\"en_GB.utf8\"\nLC_IDENTIFICATION=\"en_GB.utf8\"\nLC_ALL=\n$ buku -s buku --deep\n1. https://aur.archlinux.org/packages/buku/ [450]\n\nAUR (en) - buku\n   + Buku cmdline bookmark manager\n   # zufaellige funde\n\n\nhttps://aur4.archlinux.org/packages/buku-git/ [451]\nAUR (en) - buku-git\n\n\n\nBuku cmdline bookmark manager\n   # zufaellige funde\n\n\nhttps://github.com/jarun/Buku [452]\n\nGitHub - jarun/Buku: Powerful command-line bookmark manager. Your mini web!\n\n\nBuku cmdline bookmark manager\n   # zufaellige funde\n```\n\nWhy are you requesting buku -s buku --deep?\nAnd about the unicode encoding: Isn't %28 just a plain ASCII (?\nAnother comment on the removal of the colon : in my original post: When Opera understands %28 as part of the hostname, the colon between openurl%28https and //github.com/jarun/Buku) turns into a port specification colon, and since there is no port given, the colon can safely be removed.\nHow is the request openurl([...]) sent to the browser?\nAnother remark: Why is only the first bracket replaced by %28, but the closing one remains verbatim?\nCorrigendum\nI noticed a mistake in my original post: In the address bar is displayed openurl%28https//github.com/jarun/Buku), not openurl%28https//github.com/jarun/Buku [notice the additional closing bracket in the corrigendum].. Dear Jarun,\nThanks for your investigation and verification.  I agree on that the problem might originate from Opera.\nI have the hope to find a work-around by reproducing your opera-browser approach.\nWhen trying to use export BROWSER=opera-browser, the respective URL is opening in Firefox on my side.  There is no opera-browser on my Arch Linux system.\nMaybe you could issue a $ type opera-browser on your Ubuntu Linux, and see how it is different from ordinary opera?\nYours,\nFriedrich. ",
    "SamHH": "Ah, I actually would be very interested in doing that. Sorry I missed it.\nI can handle the extension side of it quite easily, my only question is how would I go about interfacing with Buku? Some sort of API?. I suppose the first step is this one: https://developer.chrome.com/extensions/nativeMessaging\nCurious to see how browserpass did it: https://github.com/dannyvankooten/browserpass\nI'll look into this over the week. Let me know if you have any further insight.. Not very far along yet but I've started working on it. I've got a Go script (first time with Go, pretty fun) successfully pulling a list of bookmarks from the Buku database, and I've got the project setup how I think I want it. Let's see how this goes! https://github.com/SamHH/bukubrow. Yep! It's really basic right now, just grabs all of your bookmarks, displays them alphabetically, allows you to search through them and then either hit enter to select the first entry or click/scroll through them manually. It's got a shortcut preset to Shift+Alt+B, and the input is autofocused, so (if you'd prefer) if you hit the shortcut, then start typing, then hit enter, you can go right through to opening a bookmark without ever touching your mouse. It's quite a nice, speedy, Spotlight-esque flow.\nI haven't migrated many of my bookmarks to Buku yet and I've only tested locally, so there are certainly going to be some issues that need addressing going forward. FWIW though, it works perfectly for me for the few I have.\nI'll be making an initial release later today as soon as I've found a royalty free icon for it. \ud83d\udc4d . https://chrome.google.com/webstore/detail/bukubrow/ghniladkapjacfajiooekgkfopkjblpn\nFirefox will come as soon as it's approved on their addon store.\nClosing this issue now as any issues/suggestions can be added over at bukubrow repo. :-)\n\ud83c\udf89 \ud83c\udf89 \ud83c\udf89 . Great!\nI've no experience at all with Python. Having a quick look through the codebase, is there any reason we (as far as I can see) aren't deserialising the tags into an array of strings, rather than having to work everywhere with a token string? It strikes me in my inexperience that this may simplify matters.. Thanks for taking a look for me.\nRegarding the array of strings I meant within Python when you deserialise. That said, you're right, having the delimiter at each end does help with optimising the query given SQLite's lack of array support.\nIf there isn't an elegant alternative to that then it'd probably make the most sense for me to patch this on my end, I think?. I'm not calling any APIs, I'm directly accessing the database. I'd be happy to change that approach if there's a more idiomatic means.. Cool, will do. :+1: . ",
    "cinghiopinghio": "I also tried to write the plugin as a shell script (using bash) but it hangs when I call:\nshell\nOUTPUT=`buku -p -j`. Hi @jarun,\nindeed albert_query is just a string and changing it to hello is just fine.\nIn fact when I run my script (that can be found here) from the command line as:\nshell\n$ ALBERT_QUERY=\"bb \" ALBERT_OP=QUERY ./org.albert.extension.external.buku.py\nI get the expected output (just like your). The problem arise when the script is called as a QProcess (from the QT) then, it hangs forever.\nIn this shell script I did the same with bash instead of python (it requires jq btw). Also in this case the process hangs on this line only if called from QProcess.\nI'm not an expert (neither a newbie) in Qt to understand whats wrong (I have no error messages, the process just never terminates or return anything).. Thanks @shaggytwodope, it worked like a charm now.\nClosing. In fact I used the first solution.\nI found also the docus you are mentioning, anyway it does not mention that it should be initialized.... ",
    "qoshet": "Hello, this is my first time in open source on github, thank you. Hello @jarun, yes I can take up that task. ",
    "TjWallas": "@jarun Thanks for the link and clarifying the intent behind Boku. But personally, I think \"Your mini web!\" in the repo description is a bit mis-leading. The first thing that came in mind when I read this sentence was the functionality I described here :). ",
    "pierrediancourt": "Nice, thanks a lot, updating and upgrading did the job\nsudo apt-get update\nsudo apt-get upgrade buku\nroot@machine:~# buku\nNow returns the helper as expected so i close this issue =). Ok there's more errors related to dependencies.\nroot@machine:~# buku -V\nTraceback (most recent call last):\n  File \"/usr/bin/buku\", line 2945, in <module>\n    main()\n  File \"/usr/bin/buku\", line 2575, in main\n    urllib3.disable_warnings()\nAttributeError: 'module' object has no attribute 'disable_warnings'\nSame error dump for buku -w for example. ```\nroot@machine:~# python3\nPython 3.4.3 (default, Nov 17 2016, 01:08:31)\n[GCC 4.8.4] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n\n\n```\n\n\n\nSo my python version is okay.\npip wasn't installed. Just did :\nsudo apt-get install python-pip\n```\nroot@machine:~# pip install --upgrade requests\nDownloading/unpacking requests from https://pypi.python.org/packages/7e/ac/a80ed043485a3764053f59ca92f809cc8a18344692817152b0e8bd3ca891/requests-2.13.0-py2.py3-none-any.whl#md5=5e432dcf5bd1e3402ea1656700d99365\n  Downloading requests-2.13.0-py2.py3-none-any.whl (584kB): 584kB downloaded\nInstalling collected packages: requests\n  Found existing installation: requests 2.2.1\n    Not uninstalling requests at /usr/lib/python2.7/dist-packages, owned by OS\nSuccessfully installed requests\nCleaning up...\n```\nBut symtoms are still the same when doing buku -V for example\nEDIT : \nroot@machine:~# python -V\nPython 2.7.6\nSo my python version isn't okay finally. Seems that i have python 3.4 and 2.7 installed ?\n2.7 is the default one for ubuntu 14.4 apparently, and 3.4 might have been installed in the buku installation process, as a dependency. Nevertheless i never installed the 3.4  by myself, on purpose or for another project.\nShouldn't i pass the right python information as an environment variable to buku?. The one we want so i'm really not sure it's the root of the problem\n```\nroot@machine:~# /usr/bin/env python3\nPython 3.4.3 (default, Nov 17 2016, 01:08:31)\n[GCC 4.8.4] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n\n\n\n```\n2.7 and 3.4 comes from the base ubuntu install and coexists perfectly, nothing's weird about any tests i made on theses.. Ok i it's just pip that is using 2.7 to upgrade requests. I was just doing it :D\n\n\n\nroot@machine:~# apt-get install python3-pip\nroot@machine:~# pip --version\npip 1.5.4 from /usr/lib/python2.7/dist-packages (python 2.7)\nroot@machine:~# pip3 --version\npip 1.5.4 from /usr/lib/python3/dist-packages (python 3.4)\nroot@machine:~# pip3 install --upgrade requests\nDownloading/unpacking requests from https://pypi.python.org/packages/7e/ac/a80ed043485a3764053f59ca92f809cc8a18344692817152b0e8bd3ca891/requests-2.13.0-py2.py3-none-any.whl#md5=5e432dcf5bd1e3402ea1656700d99365\n  Downloading requests-2.13.0-py2.py3-none-any.whl (584kB): 584kB downloaded\nInstalling collected packages: requests\n  Found existing installation: requests 2.2.1\n    Not uninstalling requests at /usr/lib/python3/dist-packages, owned by OS\nSuccessfully installed requests\nCleaning up...\nStill having the same dump from buku -V or buku -w. Okay all is fixed now after\nroot@machine:~# pip3 install urllib3 --upgrade\nDownloading/unpacking urllib3 from https://pypi.python.org/packages/67/87/67be08389f8df83c9ba4c12e618a4ad93546e234a1e9530618735cd9b73d/urllib3-1.20-py2.py3-none-any.whl#md5=43fdf206d03cf3c20981b0f860452ea3\n  Downloading urllib3-1.20-py2.py3-none-any.whl (111kB): 111kB downloaded\nInstalling collected packages: urllib3\n  Found existing installation: urllib3 1.7.1\n    Not uninstalling urllib3 at /usr/lib/python3/dist-packages, owned by OS\nSuccessfully installed urllib3\nCleaning up.... Thanks ! :)\nFor documentation purpose here is the full installation process to make it work on WSL/ubuntu 14.04.5 LTS\nsudo add-apt-repository ppa:twodopeshaggy/jarun\nsudo apt-get update\nsudo apt-get install buku\nsudo apt-get install python3-pip\nsudo pip3 install --upgrade requests\nsudo pip3 install --upgrade urllib3. root@machine:~# buku -l\n[ERROR] cryptography lib(s) missing\nAnd the other command seems to work (spamming the terminal with some errors but only about duplicated entries in my .html file apparently.\nroot@machine:~# pip3 install --upgrade cryptography\nThat doesn't fix buku -l as it crashes in a dirty way when trying to install. See the debug log displayed on standard output and dumped in /root/.pip/pip.log here : http://pastebin.com/jghZUL1T. root@machine:~# pip3 install --upgrade beautifulsoup4\nDownloading/unpacking beautifulsoup4 from https://pypi.python.org/packages/af/a3/9e803f838b3eeb313d45d916d4387cda8572c92e1aafeb53fd43ddb5da2c/beautifulsoup4-4.5.3-py3-none-any.whl#md5=4bf9f7d3e6815a2b2f9c75b7136ec49a\n  Downloading beautifulsoup4-4.5.3-py3-none-any.whl (85kB): 85kB downloaded\nInstalling collected packages: beautifulsoup4\n  Found existing installation: beautifulsoup4 4.2.1\n    Not uninstalling beautifulsoup4 at /usr/lib/python3/dist-packages, owned by OS\nSuccessfully installed beautifulsoup4\nCleaning up...\nDid it even if i didn't find any errors reporting to this module yet.. Nope i'm running as root. ",
    "dertuxmalwieder": "\nAnything else which would add value (please discuss in this thread)\n\nMaybe make the web browser configurable? i.e. when you're on a system where your default browser is Firefox but you want to open bookmarks in Lynx because you're on a terminal anyway. Probably:\n\nAdd a --browser option with the binary as an argument.\nMove the webbrowser.open() into an else case and add an if case for whether --browser was passed and the argument is a valid binary.. Does not work on Windows.\n\nset BROWSER=\"C:\\Program Files\\Some Browser\\Browser.exe\" does neither.. The last time I had to pay for Windows was in 2001. Later versions came preinstalled (for free) or over MSDNAA (for free) or as a free update (for free).\nI can confirm that the SET BROWSER=Something not in quotes answer works for me indeed.. I can live with that. I have Firefox open all the time. Thank you!. a1c1092 does not fix the issue on Windows 10. Firefox is opened but buku --oa \"some tag\" does still open all 3 sites in the same tab, sequentially. :(. Not working with Vivaldi (Chrome-based) and qutebrowser either: Opens the first page, waits for me to exit the browser, opens the second page in a new instance, waits for me to exit the browser, opens the third page in a new instance.. Yes, the upstream Buku does the same thing.. Actually it is intended (the module will literally just wait). Looks like the \"solution\" are threads.. No, because Windows's os does not have fork().\nWhat \"works\" is:\ndiff --git a/buku.py b/buku.py\nindex 0fbce7a..d3fe5a3 100755\n--- a/buku.py\n+++ b/buku.py\n@@ -2245,7 +2245,16 @@ def browse(url):\n     os.dup2(fd, 2)\n     os.dup2(fd, 1)\n     try:\n-        webbrowser.open(url, new=2)\n+        if sys.platform != 'win32':\n+            pid = os.fork()\n+        else:\n+            pid = False\n+\n+        if pid:\n+            pass\n+        else:\n+            webbrowser.open(url, new=2)\n+            sys.exit(0)\n     except Exception as e:\n         logerr('browse(): %s', e)\n     finally:\n\nThat does not \"fail\" - but it has the major problem that it calls sys.exit(0) right after the first URL, making the --oa parameter almost useless on Windows.. I currently don't have a Unix system with a GUI ready. I might check it later.\n\nI recommend not wasting time on cross-platform IPC.\n\nI'm not sure if having a broken core feature on most desktop systems would not rectify that waste. It looks like threads or something with the multiprocessing module (which probably does the same thing on Windows) is the only real chance here. \n(Sorry, my daytime job prevented further investigations yesterday.) . Yes, I do.. > the only issue on Linux\nLinux is not \"most desktop systems\". ;->. OK. :-) I'll check if I can help you out. Some time this week... (I have a number of other projects too.). No problem. :-) Always glad to bring more Windows into the world. >:-)\nI haven't found other problems (except the \"one tab only\" problem) during regular use yet. I'll send more PRs if they appear.. Awesome, thanks! . Done. (I guess.). I have a strong feeling that you intend to discourage me of contributions. ^^. You're welcome!. Yay, I almost missed the new release. :-D. It depends.\nIn my older pull request I tried to simulate the ix behavior. %USERPROFILE% basically is the user's \"home directory\". There is no user-specific settings directory on ix.\nMy %USERPROFILE% is full of \"dot folders\" created by CPAN, pip and similar software. I accept that most applications have decided to use %APPDATA% instead. I, personally, find %APPDATA% to be unintuitive to use (especially since there are three \"AppData\" folders which all have slightly different purposes).\nIt's on you. :) . Uhm. Sorry, I found this too late (not really active this week). Anything left to do on Windows?. OK! :) . The \"problem\" with that is that Windows's cmd does not really support POSIX color codes. Not that they would be easy to understand anyway...\nThe Windows API suggests to use SetConsoleTextAttribute() (< shameless self-promotion), Buku probably has to call the system libraries to do this.. Additional opinion: On my Windows there was no problem with the colors, but I rarely use the default cmd without a wrapper. If you plan to implement a switch like I suggested, you might want to check for ConEmu or something as well (or live with compatibility issues for weirdos like me).\nI'll be on my ConEmu machine this evening, if you need more input.. It would only be invoked on affected machines though, and I'm sure that there are ways to check if Buku is currently running in a plain CMD.\nHmm, OK. As long as it is properly documented ... :-). I'd still recommend to - at least - check for ConEmu first, e.g. via the env. variables.. It should be trivial to support any \"working\" ConEmu-like thing (like console\u00b2 - someone should test that... ;-)) or non-cmd shells as long as they come with their own environment variables. I guess the only reason not to just add a whole bunch of supported cases would be the code size.. (note that I probably will be absent over Sunday). Hooray. You're welcome! Highlight me if you need some more Windows stuff. From Monday or so. :-) . Good catch, thank you. I got lost while trying what would work on both cmd and ConEmu. Sigh.... ",
    "lukaszkarbownik": "\nWhen using --np mode exit code should be different than 0 when search or action fails - this would allow for using Buku in custom scripts\nIt would be awesome if there was a way to perform a search and immediately open all found results. Currently it seems impossible to use -s and -o flags together.\nBuku <some query> -o opens a random bookmark.. Hi @jarun \n\nFirst, amazing work. I love using Buku.\nHave you considered adding support for -t --stag flags when using --print and -f<num>?\nCurrently using -t/--stag with these flags overrides the behaviour and runs app in interactive mode.\nMy goal is to combine buku with other tools in a way that would allow to pre-query bookmarks by providing a tag, i.e.:\nbuku -p -f3 -t $sometag | fzf ...\nI know there is a --np to disable interactive mode but it does not seem to support other output formats and parsing multiline output is not ideal.. Thank you.\nIt's so great to have a simple question met with such an enthusiasm.\nLet me know if there's anything I can do to help you with this one.\nAlso, not related but I think I might have just discovered a bug.\nFor some reason when updating youtube bookmarks using -u all bookmark titles got replaced with a simple 'Youtube' title.\nWhen fetching the same page with curl or wget the title tag contains full title, but when requesting the page with Buku the tag contains only Youtube.\nAfaik, curl does not process any js, so I'm not sure yet what is causing this behaviour.\nI will continue investigating and I will try to find some more useful information.\nEdit: It seems that the value of USER_AGENT is causing the problem. \nYouTube responds with \"this video is not available\" page instead of regular video page.\nRemoving user-agent value from headers returns correct behaviour.. @jarun \nI do not believe this is a correct behaviour.\nI suspect that YouTube does use user-agent value to determine if client has JavaScript capabilites and if it does, it is returning a simple <title>YouTube</title> tag and updates this value using JS after the page is completely loaded.\nWhen user-agent indicates a browser without JS capabilites full title is being returned on initial request.\nYou can verify this behaviour by running:\ncurl -sA 'Mozilla/5.0 (Nintendo 3DS; U; ; en) Version/1.7498.US' https://www.youtube.com/watch?v=1f3HHKl-ol4 | grep -o '<title>.*</title>'\nUser-agent in this example indicates a browser that does not support JS. YouTube returns a full title.\nas opposed to:\ncurl -sA 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.91 Safari/537.36' https://www.youtube.com/watch?v=1f3HHKl-ol4 | grep -o '<title>.*</title>'\nUser-agent indicates newest Chrome browser, which does have JS capabilites. Youtube returns short YouTube title.\nIdeal solution would be either to replace current User-Agent value with one indicating a browser without JS engine, or add a flag that would trigger such behaviour.\nIt is likely that other websites may use the same mechanism so YouTube might not be the only website affected by this issue.. Great! Thank you for a quick reaction and fix.. ",
    "drbraden": "It's be nice to have created_at and updated_at fields in the bookmarks table of the database to timestamp the records.  Then you could also search by date range, especially since records' index values don't provide old/new context once they've been moved to fill in holes from deleted records.\ncreated_at would only be set at the time the record is first created.  Upon creation, updated_at would mirror created_at but would be updated any time the record is modified (tag changes, updated comment, changed title, etc).\nThese fields could also be used to retrieve or provide timestamps when importing and exporting browser bookmark files.  The example file I was looking at had attributes for ADD_DATE and LAST_MODIFIED, but they were all the same (I assume the times represented correlate with the date/time the export created the file.. ",
    "tralston": "I love Buku. What would you think about adding a field to the sqlite3 db for the text of the page? The page's text could be extracted while fetching the title, and all the html tags could be stripped off. It would then be available for searching.\nExample: There are several pages that I bookmark to read later or have already read, but the keyword I'm searching for isn't always contained in the title. And sometimes I can't enumerate every possible tag. If I could include the page's text in my search, then I could find my pages faster and easier.\nIs this too much for a bookmark manager? I know it would increase the size of the DB.. ",
    "absolutejam": "Awesome work here! I'm starting up rely on this more and more, and I'm really amazed how feature rich this is already :thumbsup:\nOne thing I'd like to request, is a flag to specify the db location. I know that it looks in specific locations already - including local directory - but this would let me have multiple, completely separate sets of bookmarks (e.g. Work, personal, temporary/todo). I'm currently achieving this just fine with tags, but the option to logically separate them by file would be a great addition, especially for scripted scenarios.\nThanks again for the great work here!. ",
    "sahil48": "Suggested Feature. It would be really nice to have some way to a set of tags automatically assigned when one tag is assigned. Here are some example.\nI could tell buku that whenever I assign the tag \"django\", it should automatically assigns the tags \"python\" and \"programming language\"\nI could tell buku that whenever I assign the tag \"iPhone\" to an article, it automatically assigns the tags \"Apple\" and \"Tech Companies\" \nThat way, you don't have to keep typing the list of tags every time. This is one of the main benefits of a folder-based bookmark manager. When you assign a bookmark to a folder, the parent folders are automatically associated with the bookmark.\nAs a second idea, buku could suggest other tags based on your past bookmarks when you add a tag.. By redirection, do you mean the --tag flag? Would definitely like more clarity on this.\nI agree with point 2, which is why I do like tags better than folders. But a possible alternative is an single file with indented tags showing the  hierarchical relationship between tags (ex. Company:Apple:iPhone). Then, when searching, you could have a strict search for the tags assigned to the bookmark only and a fuzzy search, which also includes bookmarks matching to parent or children tags with the results.\nDo like the sound of 3. Not sure if I would be able to contribute the feature (pretty novice programmer, so probably unlikely), but can always try to take a look.\nTwo other questions: Can you add Markdown and URLs in comments field (Most concerned about using the # sign for headings)? Can comments from a bookmark or set of bookmarks be exported to a text file? Buku could be pretty useful for taking more detailed notes on the webpage you have bookmarked while reading them.. Okay. Thanks.. ",
    "alex-bender": "Hello!\nThanks for so good tool.\nI would like to implement importing Chrome bookmarks to Buku database but I'm new to Buku.\nCould you please advise where should I start from?. I've checked Chrome bookmarks file. It's simple json. I don't know anything about FF, but let me check.. @jarun Yeah, I found it. Are Buku/.github guides the only guides which I should follow?. Sorry but I can't find bookmark SQLite file for Chrome. But data in the Bookmark file are the same what I can see in my Bookmark Manager. Sorry for the mess. Here is what i've done:\n Exported bookmarks as html and calculated number of elements there\n Calculated number of elements in the Bookmarks json file\nThey are equal\nAlso, I've done what you asked, and result is positive: After adding a new bookmark it does appear in Bookmark file without closing the browser.. Yeah, FF also updated bookmarks db without closing browser.. @jarun hello, work is in progress, but you can comment anything you consider important here:\nhttps://github.com/alex-bender/Buku/commit/8102f84fb4a03117594bea076577a0421845eed1\nI'm not sure that using webbrowser module for this case is the best decision, but anyway.\nPlease advice.. @jarun Thanks for reviewing!\n\nIf it gives you the installation location of the browser\n\nAs far as I understand webbrowser doesn't give us location, only absence of browser.\n\nDo you have anything else in mind?\n\nI have a question according to the naming: should we check browsers like chromium or only chrome?\nAnd a question about profiles: there are could be many profiles in chrome and FF, so should we ask user about desired profile or import bookmarks from all of them?\nI'll implement rest (+tests, rebase\\squash, docs) and will make PR.. @jarun here is GC behavior: In my case two different profiles (chrome://settings/ People section) has different config folders ~/.config/google-chrome/Default and ~/.config/google-chrome/Profile 1.\nAdding bookmark to one of them -- does not affect another one.. But what if there are different profiles for different family members? In case when they are using single OS account (Like admin on windows)\nI suppose that we should ask user which of the profiles we should work with.. Ok, I'll check auto import scenario.. I see here 3 options:\n- Import only default\n- Import all what we've found\n- Ask user which accounts should be imported.\nOf course first one is the simplest one. We can stick with it and see what'll happen next.. Hi @jarun! Im going back from vacation right now so cant say for sure for now. I'll ping you in a few days.. @jarun Should I avoid importing anything new (even from stdlib)? I want to parse ini file. Of course I can do that without new import, but with configparser it'll be much easier. . Also, as a straightforward workaround it's could be importing glob  module and expand anything what match ~/.mozilla/firefox/XXXXXXX.default/. Also, what about safari? Should we import from it?. @jarun Please check this commit https://github.com/alex-bender/Buku/commit/e5b81db94dc0a01d66f908f00a81d79a5f30428e\nI will look at gitter.im tomorrow (But I didn't get any emails from the service). Oh, really.. It could be interesting... Thank you @jarun. It's pleasure of mine to be here and to do something helpful.\nWe could contact tomorrow, I'm in GMT+2. @jarun should we consider path to the bookmark as separated tags?\npath/to/the/folder/bookmark => bookmark with tags [path, to, the, folder]\n. No, I mean that for now if we will import this bookmarks they will be without tags at all.. Ok, I'll check. Let's chat later than. Invite me to the gitter, but use email from my commits please.\n. Ok, I got it.. Sorry for the slow reply. I had some health issues..\n\nThere is a note (section Notes) on what happens when a tag is added: Tags result in two new entries...\n\nYeah, I saw this note, but it isn't so helpful, because tags and bookmarks are placed in the same table, and I can't figure out how to join both of them with moz_places table. So i'm going to iterate over all tags and group links by tags. I know that it isn't so effective, but mine sql skills leave much to be desired.\n\nSome more resources:\n\nThanks for the resources. @rachmadaniHaryono thanks for sharing pwiz and for Models. I'll check it out little bit later. I'm going to look here:\nhttps://hg.mozilla.org/releases/mozilla-esr52/file/tip/toolkit/components/places/Bookmarks.jsm. @jarun hey, I've got a lot of work, will continue really soon. I've got some ideas how to implement better.\nSorry for delay. Ok, I got it. I'll be keep you updated. @jarun Hello, please review my latest commit. (https://github.com/alex-bender/Buku/commit/cab0a098cfc4d856046c4af55a1735622a249ce1)\nIt is not the most efficient way to import bookmarks, but let's consider it as the simplest  version for now.\nAlso I have question:\nShould user specify exactly what type of bookmark is that or it's ours job?\nhttps://github.com/alex-bender/Buku/blob/import_browser_bookmarks/buku.py#L1727-L1732. Also could you please provide me with couple samples of FF bookmarks files?\nI have some issues on my dev machine, so want to double check something.. I think it's a bit away from PR. Here is the misunderstanding. Sorry for not clear question.\nUser could run buku --ib path/to/bookmarks/file so which function should we invoke?\nFF one, or GC? I've created function detect_file_type, which essentially is\nif bookmark_file.startswith('SQLite format3'):\n    file_type = SQLite\nelif bookmark_data.startswith('{') and data.trim().endswith('}'):\n    file_type = JSON \nSo again: should user specify type of the bookmarks file or we will use this function?\nAlso, what about the tests. What cases do you want me to cover?. > Can we detect if Chrome or FF is installed (in default location)?\nYes, we are doing that by invoking webbrowser.open\nBut what should we do if user executes something like buku --ib ./some_bookmark_file_without_ext?\nOr should we disallow such ability?. Ok, I'm gonna remove it and prepare for PR review. Thanks!. There are errors due to bunch of tests. I cant say for sure, but probably it's my uncareful merge.\n@jarun, I need some assistance here please.. I'm back, sorry for delay. Lot of work. I'm going to resolve all the issues now.. @jarun I've ran tests locally by invoking tox and got errors due to TestBukuDb.test_get_default_dbdir:\n```\n\n  self.assertEqual(dbdir_local_expected, BukuDb.get_default_dbdir())\n\nE       AssertionError: '/home/alex/.local/share/buku' != '/home/alex/projects/buku'\nE       - /home/alex/.local/share/buku\nE       + /home/alex/projects/buku\n``\nIs it ok?. Got it. Going to update PR. @jarun what should be done next?. @rachmadaniHaryono Done\n@jarun I want to notice that there are no tests for this functions, so please, describe what do you want me to test and I will cover it.\nThanks for assistance guys!. @jarun If you don't mind, I would like to try TDD approach for the next issue. I think that practice is needed to become more proficient in test writings. Don't you think so?\nAnyway. Let's stick to the plan.. @rachmadaniHaryono Ok, I'll coverwalk,get_firefox_profile_nameandload_chrome_database`.\n\nAs about load_chrome_database -- seems that it'll be better to keep both of load_<browser>_database in the same scope, coz they are absolutely the same in ideological way in my opinion.\nAs about newlines -- my pep8 invokes doesn't show me anything but E501 line too long. Could you please point me out to the deleted lines?. @jarun I've got your point. Thanks.. @jarun You can assign colors issue to me, but I'm gonna have vacation from the 12th until the end of month, so I will not be available to work and probably chat.. @rachmadaniHaryono Oh, I was looking at my functions. Didn't notice these.\nFixed. @jarun Thanks! I've already looked at the code. Seems that it'll be straightforward.. @jarun As about --ib and file inputs: I thought that we rejected this option when we were discussing function which should detect what's the format of bookmark file.\nI'm on Debian 8. Could you please check if one of the following works?\nwebbrowser.get('google-chrome')\nwebbrowser.get('chrome')\nwebbrowser.get('chromium')\nwebbrowser.get('chromium-browser'). @jarun I develop on Debian, yeah.\nOk, I can write additional code for detecting file format and also, as far as I remember -- in this case we should check --tacit for suppressing all questions, right?. Ok. I'll try to finish it tomorrow morning. It's a last day for me before vacation. So to be clear: add ability to import from bookmarks file, also detect type of the bm file by it's extension, right?. @jarun what the purpose of the is_nongeneric_url function call here?. It's little bit strange that parse_tags function accepts one element list with a string formatted as 'first_tag,second_tag' just to split this string and didn't take into account that keywords argument could be list of tags already, so only DELIM.join(keywords) is actually needed.\nSo here are two possible variants:\n1. Fix function which loads firefox tags (already separated) or\n2. Fix the parse_tags to take into account that keywords could be already filtered tags.\nWhat do we prefer?. Also, maybe you've already checked, what if we move this function invocation from here to here?. Sorry, look 3 lines below:\nurl = res.fetchone()[0]. Sorry, seems that I din't get something, because I think that even in this case we can do this:\n```\n\n\ndata = ' tag 1,  tag2 , some other '\n[tag.strip() for tag in data.split(',')]\n<< ['tag 1', 'tag2', 'some other']\n. Seems that there are some cases which I don't know. If user enters\nIn [1]: data = 'buku tag 1, tag2, some other'\n\n\nIn [2]: [tag.strip() for tag in data.split(',')]\nOut[2]: ['buku tag 1', 'tag2', 'some other']\n``\nWith this line we can achieve the same what whole function does:DELIM+DELIM.join([tag.strip() for tag in data.split(',')])+DELIM. now I see. What about adding into parsing func one check likeif len(keywords) > 1` for cases when tags already separated?. @jarun oh, nevermind, I'm gonna fix invoking. It'll be easier. Sorry for distracting. please check this PR https://github.com/jarun/Buku/pull/183. > There are reasons..\nDefinitely sure! It looks confusing at the first glance, without deep context knowledge..\nSorry again. . I have some ideas. Let me check. Just want to be sure that i'm covering all usecases.\nDo we have complete unit test for this function?. Let's switch to the PR discussion. I don't mind renaming.. I'm clothing this due to PR https://github.com/jarun/Buku/pull/183\n. > Does GC support tags?\nTags for GC is folders where they are located. I'll add this feature later.\n\nAlso, did you ensure...\n\nWhat do you mean exactly?. Could you please describe all cases, off the top of your head? Like some wired cases..\nI can handle for now user input like this: --tag buku tag 1, tag2, some other, simple list as this one: [one, two].. but what could be else? regular string with DELIM separator?. I'm not planning to change anything more for now. I'll implement a new version of parse_tags after my vacation. My idea works, but need additional step to cover all current cases.\nDon't want to do it in a rush.  . I'm glad to help!. Thank you for the submitting report. I'll look at this issue. We decided only look for default file names, and I didn't expect that such format exists.. @jarun Hi! I would like to take it but I want to discuss it with you first. It was my initial idea to read \nprofiles.ini file, but we rejected it. Would you be available today for chat?\n\nshv-q3 on which platform is this happening?\nI did tests only on arch linux, dont know for other distros. So do you want me to just parse raw ini file or use configparser module?. @jarun yeah, it's default module.\n do a local import.\n\nOk. @shv-q3 lets wait jarun. Your comment looks a bit obscure for me.\nAlso, pay attention that there is a logerr function and use os.paht.join instead of iniprof = path + '/profiles.ini'.. According to your first comment, do you want me to add description?. Got it!. commit 156ccf1be3bfccc7c54dc91f5a0170469a6bd6e2 fixes issue which occurs when GC bookmarks file looks like this:\n{\n   \"checksum\": \"f547a2bc5bab7499d938fe6a2836ea3a\",\n   \"roots\": {\n      \"bookmark_bar\": {\n         \"children\": [  ],\n         \"date_added\": \"13107880274644908\",\n         \"date_modified\": \"13150396134053669\",\n         \"id\": \"1\",\n         \"name\": \"Bookmarks bar\",\n         \"type\": \"folder\"\n      },\n      \"other\": {\n         \"children\": [ {\n            \"date_added\": \"13144926250575143\",\n            \"id\": \"9\",\n            \"meta_info\": {\n               \"last_visited_desktop\": \"13145470562686225\"\n            },\n            \"name\": \"Getting started with GitLab CI - GitLab Documentation\",\n            \"sync_transaction_version\": \"17\",\n            \"type\": \"url\",\n            \"url\": \"https://docs.gitlab.com/ee/ci/quick_start/README.html\"\n         } ],\n         \"date_added\": \"13107880274644917\",\n         \"date_modified\": \"13150396129620519\",\n         \"id\": \"2\",\n         \"name\": \"Other bookmarks\",\n         \"type\": \"folder\"\n      },\n      \"sync_transaction_version\": \"21\",\n      \"synced\": {\n         \"children\": [  ],\n         \"date_added\": \"13107880274644923\",\n         \"date_modified\": \"0\",\n         \"id\": \"3\",\n         \"name\": \"Mobile bookmarks\",\n         \"type\": \"folder\"\n      }\n   },\n   \"version\": 1\n}\nIterating over roots will give us \"sync_transaction_version\": \"17\", so roots[entry]['children'] will be resolved to roots['sync_transaction_version']['children']\nand this will produce error: TypeError: string indices must be integers. @jarun link https://docs.gitlab.com/ee/ci/quick_start/README.html was imported. wait 10 minutes please. Yeah, it works. > I am assuming ..\nI've removed folders with bookmarks and tested. > Tested against empty profile.ini file, and when profiles.ini file is a directory.. sorry, cant continue now. have to go. will response in 12 hours or less. @jarun That's all from me. @jarun you're welcome! Please, let me know if there are anything to do more.. Hi @jarun, seems that it would take more time then I can dedicate for now, sorry.. - [x] done. - [x] done: raise NotImplementedError. @rachmadaniHaryono In such case it'll be impossible to check which block fails from e and second block will not complete. Correct me if i'm wrong.. - [x] Done: can't say for sure why I removed this. Bad merge should be the reason.... - [x] Done. - [x] Done: now it returns dict. - [x] Done\n Exit gracefully\nlogerr('Buku does not support {} yet'.format(sys.platform))\nself.close_quit(1)\n Rename variables:\nFF_BOOKMARK_DATABASE_PATH --> FF_BM_DB_PATH\nGC_BOOKMARK_DATABASE_PATH --> GC_BM_DB_PATH. - [x] Done: see previous comment: https://github.com/jarun/Buku/pull/180#discussion_r132121460. - [x] Done. - [x] Done. @rachmadaniHaryono sorry, seems here is the misunderstanding. I didn't noticed that here is two calls of logerr. sorry. You're right.. we'll get error message could not locate runnable browser so I'll just leave a single one:\nCould not detect `firefox\\' browser or Could not detect `google-chrome\\' browser. Shoudl!\n- [x] Fixed. hi @jarun ! I've changed this function to a generator, as rachmadaniHaryono proposed, but didn't change the function invocation -- that's my bad. I'll fix it as soon as possible.. Hope it'll be tomorrow -- coz i still didn't recover.. If profile path does not exists -- function returns None\nif os.path.exists(profile_path):\n. If profiles.ini blank:\n```\n./buku.py --ai\nAdd parent folder names as tags? (y/n): y\nImport bookmarks from google chrome? (y/n): y\nImport bookmarks from firefox? (y/n): y\nCould not import bookmarks from firefox\nAuto-generated tag: 2017Sep20\n. if `profiles.ini` is a dir -- output the same. I'm gonna check Debian, Ubuntu and OS X. Please check Windows... Done.\n. Works on Ubuntu.. Path variable in `profiles.ini` is `Profiles/profile.name.default` for windows.. If `profile_path` points to the folder -- config parser will not return any sections so\n`profiles_names = [section for section in config.sections() if section.startswith('Profile')]`  \n will be empty so\nif not profiles_names:\n    return None\n```\nwill finish function. Debian also tested.. see below please. Done.. Done.. ",
    "Hund": "Oh, --deep seems to be the flag that makes the search feature sane. Its feature should be built in with -s.. No idea what Google and regex has to do with this though.. ",
    "lsbernardes": "A couple months ago. Actually, now I remember I recently upgraded buku (pip).\nI'll try this, thanks. (But there is a way to make my DB compatible with the new version?). It works. Thanks, @jarun \nBTW, nice work! I'm glad I don't need to use Delicious anymore. ",
    "gilbertw1": "Done. No prob! Thanks for awesome bookmark manager :). ",
    "ralic": "Ok now.. ",
    "teto": "ok didn't realize it was imported only for the import feature. Even if ultimately the error is mine for n,ot looking the README, the error message could be improved because I was not sure if \"Beautiful soup\" was a bookmark it could not import or sthg else. That's only when looking at the source I got that.\nA message such as Beautiful Soup not found: 'python3 -mpip install -U --user beautifulsoup4'solve the pb  might help.. ",
    "hao-lee": "@jarun Awesome! Thanks!. ",
    "isaaclo123": "it seems that this problem can be resolved by just using the --noprompt argument.. ",
    "Infinisil": "@jarun Can't do that. Not able to reproduce it with my python-3.3/4 installation (I'm running NixOS, it's a completely different package set). In addition to that my python knowledge is pretty much non existent, the only thing I knew was that it builds with the latest version.\nI guess I can close this then, it doesn't matter much. I was adding the tests to the NixOS package, which expects to be able to use the latest version. I'll just add a patch to the package which does this change then.. Thanks a lot, @rachmadaniHaryono! I merged your changes into my branch, I'm not sure why they don't show up here (because it's closed maybe?). https://github.com/Infinisil/Buku/commits/hypothesis-lower. Yes the changes are in. Ah, I didn't know about that discussion, good points. Although it's hard to know exactly how everybody's installing it, without enforcing this structure from the beginning of the project I think it would be too confusing to change it now. On the other hand I'd think that people who use the command line to manage bookmarks shouldn't really be confused by this.\nWhat do you think about adding an optional installation target which maybe also asks for confirmation? Somehing along the lines of\n$ make install-zsh\nZsh completion will be installed to /share/zsh/site-functions, continue? [Y] n\n\nAnd maybe also link to the zsh manual for further instructions.. Fair enough\nWell, actually the manuals are pretty bad for that I just found out.. the only other thing I can think of is putting an example of sourcing the file in, but then we have replicated information here that could be looked up elsewhere.\nYou convinced me, it's probably best how it is for now :) Have a good day!. Please only use >= requirements, it makes no sense to require an exact version and makes packaging on Nix more cumbersome.. Thanks! I might have to patch it in nixpkgs though until the next version is released. @jarun https://github.com/NixOS/nixpkgs/pull/38395 :). ",
    "dmarcoux": "Is there a reason to not document the --db flag?. ",
    "ChristopherA": "I like to use Boku with Tails OS, however, though I can now make the app be persistently installed using their new persistent apps feature, the DB file is saved by default to /home/amnesia/.local/buku/bookmarks.db when I want it saved to /home/amnesia/Persistent/.local/buku/bookmarks.db so that the database is persistent as well. \nI can't recompile Boku to make this change \u2014\u00a0I have to use the scripted apt-get that Tails OS uses to make persistent apps function.. ",
    "nick-s-b": "@jarun thank you so much!. @jarun Just installed new version! Everything works great. Importer imported comments perfectly. I've also noticed that import was about 100x faster (not even kidding... it finished so fast, I thought it was an error! Amazing job! Thanks!. @jarun no bother at all! Just installed the latest version (noticed the new option for unique tags.. that should be useful) and I imported all the bookmarks. It took few seconds and it was done. Comments are imported correctly! Let me know if you want me to test anything else.. ",
    "mosegontar": "I saw there was some discussion last year of integrating with Pinboard. Is this still a desired feature? (I personally would like it).  If so, I can take it. Pinboard has a nice API with an endpoint for fetching all bookmarks and recent bookmarks (up to 100), so an import to Buku feature at least seems doable. . Gotcha, sounds good!. Yeah that's reasonable, especially given that we can't integrate with every service. Sounds like import via bookmarks.html format should satisfy most services. Didn't know about the html format being the standard for bookmarks, interesting. \n(I might write some separate small pinboard-to-buku script using https://user:password@api.pinboard.in/v1/posts/all?format=json endpoint to allow for a straight dump into buku)\nWhere are you thinking of documenting the support for bookmarks.html? I could add a line in the Import section of the Operational Notes wiki, just to be explicit about it. Should it go elsewhere too?\n. Ah thanks;  (funny timing, I was just about to do this). I've updated the man page (and I'll update the wiki), PR coming in a second. . @jarun sorry I've been a bit delayed. I'm moving this week and things have been hectic. \nI've updated about half of buku.py docstrings into NumPy style. I just pushed the current work, https://github.com/mosegontar/Buku/commit/626e4d95a4f80a6b8425dea07bfe53dadb9ff550, so please take a look and let me know your thoughts. If things look okay, I can certainly finish the rest by early next month.\nWith regard to generating the documentation with Sphinx, I experimented a bit with it last week. I should be able to do it, but I do expect there will be some finicky aspects. Also wrt autogenerating the docs, that's something I still need to look into. So this part might not be finished in time for the release.\n. Just an update, docstrings are updated up to the Editor Mode Functions, so about 80% complete. Hoping to be done by tomorrow or Tuesday!. Hi! @jarun yes, I'd definitely like to work on this; it's actually addressing a use case I've been thinking about myself. I'll take a closer look and let you know what questions come up.. I played around with this last night and was basically able to get this working (search options honor      \n-f). There's a couple points I'd like to clarify and consider before going further:\n\n\nRight now, --print can optionally take an argument of an integer or range of integers, indicating which records (by DB index) to print. If search options are included (e.g., -t or -s), it doesn't seem to make sense for the user to pass a DB index or range to --print, since we've already gathered search results based on, for example, some specific tag. Similarly, in the current behavior no argument to --print results in the output of every record with a DB index, which would also be undesirable.\nSo the question is what should an argument to --print correspond to when used with -t? The argument in this case could be used to narrow search_results even further, but this seems like it would require knowing the results in advance. Perhaps it's best to ignore the argument in this case and document that.\n\n\nWhen using -f the DB index is printed along with whichever fields were selected. For example, buku -p -f1 -t python will give you a result like\n...\n120   http://pypi.python.org`\n...\nThis makes sense and is useful when looking through the search results, but ultimately adds an additional field not selected by the user with -f1. If the goal is to pipe the output elsewhere, perhaps the inclusion of the DB index could be disabled with some flag? I'm primarily thinking of a situation in which the URL or title is passed to another program.. Sure \ud83d\udc4d  i'll take a look. Great. I think that's a good idea to support both 'any' and 'all' search. & is a good choice.  I'll get to work.. So one issue with &, bash and fish treat it as a conjunction of commands. How about '+' ?. great, thanks. Sorry that was confusion on my part with respect to the man page (apologies I'm pretty green)! It's updated now.. Regarding documenting that - should be space separated, I've gone ahead and done this in the program options, README, and man page. \n\n\nThanks for raising the concern about space separation of +. I'm inclined to enforce space separation of + in search_by_tag because current users may have tags with + in them.\nI do like the idea of treating + in the same manner as , (since their functions are similar in search_by_tag), so space separation would not be needed. But given the concern about current users, I think space separation is probably preferable and the least disruptive change.\nLet me know what you think. If you agree, I can make updates to search_by_tag and document accordingly. Thanks a lot!. I've updated search_by_tag to enforce space separation for +. Also updated README and man page with notes about this constraint. (Though I'm failing the build now, I'm not sure why).\nBut it did just occur to me that there might be a better/simpler way to handle this. We keep 'search any' the same as we have it now (buku --stag tag1, tag2). But to 'search all', we can require that a single + option be set immediately after --stag. So 'search all' would look like \nbuku --stag + tag1, tag2\nThis is along the same lines as how +/- are used with --tag to append or remove a tag from the tagset. Another benefit is that I think it's more natural to list out your tags with commas and it maintains uniformity with respect to how tags are listed. What do you think?. Ah, fixed under-indent causing the build failure.. @jarun oh thanks a lot. yes, I am interested! I'll write to you on gitter.. # @unittest.skip('skipping') is removed from the test functions that I added. I wasn't using it, but included it to match the other test methods in that class. I left the original one that was on test_search_by_tag, but can remove if desired.\nI've added a test to test_bukuDb.py to test the db query: test_search_by_tag_query. \nThe tag preparation in search_by_tag is now in a prep_tag_search helper function, and there is a corresponding  test_prep_tag_search test in test_buku.py.\n. Updated!. Yep, I can take this on. I'll need to read up on Doxygen, so it might take a bit. Are there any projects you have in mind that would serve as a good model?. Oh great, this is helpful. So we will use Sphinx instead of Doxygen? I would follow https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst.txt for updating our docs in that case.. Sounds good :) I'm a bit tied up for the next week, but should be able to get started on this next week.. Sphinx and readthedocs seem to play nicely with each other (http://docs.readthedocs.io/en/latest/getting_started.html); I'll work on it :) \nI'll start working on updating formatting docstrings etc in numpy style. I'll make an early PR, to make sure things are on track. BTW, if we're using numpy style docstrings, it sounds like we should use the numpydoc Sphinx extension:\n\nWhen using Sphinx <http://sphinx.pocoo.org/>__ in combination with the\n   numpy conventions, you should use the numpydoc extension so that your\n   docstrings will be handled correctly. For example, Sphinx will extract the\n   Parameters section from your docstring and convert it into a field\n   list.  Using numpydoc will also avoid the reStructuredText errors produced\n   by plain Sphinx when it encounters numpy docstring conventions like\n   section headers (e.g. -------------) that sphinx does not expect to\n   find in docstrings.\n. You can set the editor as an environment variable in your terminal shell. If you are using bash as your shell, to set your editor as Vim, you would enter export EDITOR=\"vim\".. If this language is okay, I'll update the wiki. But let me know if there should be changes made. Thanks!. Gotcha, sounds good :). I still need to work out the details, but basically, Sphinx will generate all the documentation in a docs/ directory. RTD is pointed to a git repository and will look for docs/ (and a conf.py file inside it), and generate the docs from there.\n\nWe will need a RTD account; you can add folks as maintainers. RTD can integrate with GitHub and automatically build docs when we push to master.\nThis seems like a good overview for more details, https://www.simonho.ca/blog/python-documentation-with-sphinx-autodoc-and-readthedocs/.\nWhen I was experimenting with Sphinx a couple weeks ago, I ran into some hiccups, so I will work on ironing those out next.. Great, sounds good! And no problem :). Hi @jarun! Yes a great deal actually. The basic setup is working, and Sphinx is successfully building the docs with the RTD theme from our docstrings. Here's the current progress https://github.com/mosegontar/Buku/tree/sphinx. If you run make html from the docs directory, it will generate the html files in docs/_build/html, and you can check out index.html to see the result.\nSome details below, but the tl;dr version is we should be good to go with the basic generation of our buku.py documentation.\nI've been stuck with some strange warning message when running make html: /Users/Alexander/codine/projects/buku/docs/source/modules.rst: WARNING: document isn't included in any toctree and I haven't figured out what's causing it. From what I gather though, it's not affecting anything so it's probably safe to ignore. Still it would be nice to solve it.\nA few other things:\n- I've purposely set it up to ignore our tests/ directory and setup.py. \n- I'm not sure what to do about our api/ directory. Do we want this included in the documentation? I haven't figured out how to make Sphinx aware of it but I'm sure it's possible. I'm not very familiar with what's going on in those files, but I see they don't have any docstrings at the moment.\n\nFinally, the generated documentation is fairly plain:\n\n\nFor comparison sake, take a look at http://docs.peewee-orm.com/en/latest/. \nThe Table of Contents for this page is generated from this docs/index.rst file https://raw.githubusercontent.com/coleifer/peewee/master/docs/index.rst, and the individual sections are here https://github.com/coleifer/peewee/tree/master/docs/peewee. From what I can tell, these are created by hand.\nIt could be nice to have some opening paragraphs on the main page, perhaps lifted from the README. Or have the sections of the wiki in .rst files so that they appear in the RTD documentation. \nAnyway, sorry for the long reply. Let me know what you think. I could make a PR now with the current state.\n. thanks @jarun. The modules.rst file is created by autodoc when invoking sphinx-apidoc to generate the doc sources. It doesn't seem necessary for buku as far as I can tell, and I was able to prevent its creation by rerunning sphinx-apidoc with the -T option (see https://media.readthedocs.org/pdf/sphinx/1.6.3/sphinx.pdf). Everything looks the same in the resulting documentation.\nI'll add a couple opening paragraphs and make the PR. Hopefully tonight.\nIs your comment concerning the root level files about the files here?\nhttps://github.com/mosegontar/Buku/tree/sphinx/docs. My understanding is these are needed to generate the documentation. I tried putting conf.py in source/ but then when running make html Sphinx couldn't find it and I haven't figured out how to tell it where it is (although I assume it's possible). I'm not sure if RTD actually calls the makefile though, so it might not be a problem if you would prefer conf.py to be in source, for example.\nBTW, I know that it's possible to use tox to build the html docs instead of using the Makefile. But I'm having a side issue with tox and flake8 that I haven't worked out, so I wasn't able to try this. But again if we're using RTD, I think we might not need either tox or make to build the files. \n. Okay I got it :)  conf.py and index.rst are now in docs/source/ (https://github.com/mosegontar/Buku/tree/sphinx/docs/). \nNo need for the Makefile. If you want to build the html locally, invoke \nsphinx-build -W -b html source/ _build/html/\nRTD works smoothly: http://buku-test.readthedocs.io/en/latest/. \nI'll make the PR later today!. To clarify, this PR is just for the version we already discussed and doesn't include the readme at that link.. According to this http://docs.readthedocs.io/en/latest/versions.html, stable will be built on a tagged release (\"consistent with http://semver.org/\"). I don't know if the \"latest\" version can be removed -- I haven't found how so far -- but it can be set to \"private\". You can set the default branch to stable I believe in advanced settings. \nThere's a \"single version\" option in advanced settings but this has \"only your \"latest\" version\". \nRegarding the README, I can push the version that includes it in RTD. Do you prefer to keep the README in markdown as opposed to rst? All of the Sphinx documentation is in rst. Keeping it in markdown is possible though it looks like http://blog.readthedocs.com/adding-markdown-support/.. Yes, that's right, I just tried it in my dummy RTD page and it works. But it did not automatically build the tagged version, I'm not sure why, I had to go to Admin > Versions and check off the version tag and then build it. It was then available at stable. Then when I pushed a second release tag it was updated automatically at stable. \n. That's odd, taking a look now. Oh, that makes sense. In that case, should it default to \"latest\" until the next release? . We can set default to \"latest\" and then on the next tagged version have it set to stable from then on. Okay, I'll do this today. Should be quick if the markdown format doesn't cause any problems for Sphinx or RTD.. My computer seems to have died for the day, not turning on :(\nTo answer your question, yes I think req.txt can be in docs or docs/source/. But I would first try skipping adding recommonmark to req.txt and omitting it from the field in RTD advanced settings. It might not be needed.\nI can try if I can boot up again, but if not I might be out of commission for a bit :(. If you do put req.txt in docs or source, you just have to list the path in the RTD advanced settings . Okay, I'm back up, phew. Sorry, I was suggesting a separate requirements.txt just for RTD -- if it's necessary. I am trying now in my test RTD account to see if works without it.\nI will get the actual RTD set up too. \n\nRaise the PRs and please approve yourself _for_this_feature.\n\nI want to double check, to be safe, you mean that it's okay for me to merge a new PR to finalize this feature. No problem, but just want to make sure I'm understanding correctly. . Okay it's up and working  and live at http://buku.readthedocs.io/en/latest/ !\nThere was no need to add anything to requirements.txt.. I'll make a PR to remove recommonmark from requirements.txt. I assume you're asleep :) The PR is tiny, simply to remove the line from requirements.txt, and I assume that you meant it's okay to merge, so I will go ahead.. Of course, no problem :) I learned a lot!\nRe: the search page, I thought so too, but I think that it is blank until there are search results on it.\nSee http://docs.peewee-orm.com/en/latest/search.html & http://requests-cache.readthedocs.io/en/latest/search.html for example, so I think it's normal.\n. Ah, got it! Many thanks for the explanation.\n\nAnd that's the reason calling print_single_rec_with_filter() for each row from a query is a bad idea. \n\nThis is in fact what I did here, so I will change it.\nI have no problem breaking it up into multiple functions as you mentioned, but I wonder if instead we could pass the records to the function (renamed to something more appropriate such as print_rec_with_filter). This function could then be called after both of the if not self.json lines in print_rec. I'd add the 10, 20, 30, 40 filters as conditions.\npython\ndef print_rec_with_filter(records, field_filter):\n    if field_filter == 0:\n        for row in records:\n            print_single_rec(row) \n    elif field_filter == 1:\n        for row in records:\n            print('%s\\t%s' % (row[0], row[1]))\n    elif field_filter == 2:\n        for row in records:\n            print('%s\\t%s\\t%s' % (row[0], row[1], row[3][1:-1]))\n    elif field_filter == 3:\n        for row in records:\n            print('%s\\t%s' % (row[0], row[2]))\n    elif field_filter == 4:\n        for row in records:\n            print('%s\\t%s\\t%s\\t%s' % (row[0], row[1], row[2], row[3][1:-1]))\nIf not, I'll do the multiple functions approach and make PR.. I included it to mirror the functionality here in print_rec https://github.com/jarun/Buku/blob/4a817e583ce4908aa61eafdb7eaffadb2522cc9a/buku.py#L1588-L1590\nThis is called when you pass a range to -p, e.g., buku -p 1-3.. But we can make print_rec_with_filter used only with filters > 0.. I think I might need some help fixing the Travis CI build issues. Python 3.5 and 3.6 are are passing but 3.3 and 3.4 are failing with AttributeError: <module 'buku' from '/home/travis/build/jarun/Buku/buku.py'> does not have the attribute 'print'. It's related to my mocking of print in test_print_rec_with_filter. I'll look into this more later today, but I'm a bit confused at the moment.. Nevermind, fixed the build issues. Just the remaining question about print_single_rec in the prompt function.. Updated help, man page, and readme.. less -R and more -R should fix the problem. (e.g., buku -p | less -R) \nEdit: this should fix the ESC[91m part of the output and allow ANSI colors in less and more. But the broken pipe error happens to me too when I pipe too many of my bookmarks and then quit too quickly.. Sounds good \ud83d\udc4d  I will try the patch tonight.. @jarun I tried the patch. Without the patch, there are two \"BrokenPipeErrors\" thrown (I have the same traceback as @hubitor).  The patch fixes the first BrokenPipeError, but not the second: \n```\n\npython buku.py -p | less -R\nException ignored in: <_io.TextIOWrapper name='' mode='w' encoding='UTF-8'>\nBrokenPipeError: [Errno 32] Broken pipe\n```\n\nIt seems to be related to this issue https://stackoverflow.com/a/18954489, but I'm not sure of the best way to handle it.. Same error occurs. \nI found a fix following https://stackoverflow.com/a/34299346 (combined with sys.exit(1)).\nIf I understand this opens a new stdout and assigns it as our current stdout. The link describes this as ugly; I don't know enough about it to know the details.\n...\nexcept BrokenPipeError:\n    sys.stdout = os.fdopen(1)\n    sys.exit(1)\n. less appears to work fine and exits as it normally would (without any errors/problems).\nWith filters we get the original issue again (2 BrokenPipeErrors). Wrapping that entire if/elif block in print_rec_with_filter with the try/except we used above would solve it here too, but I don't know how desirable that is. \nIf it's not and to avoid multiple try/excepts, I think the method could be rewritten so that there's only one loop and print line. (Using a dict with a lambda to get the appropriate string with formatting). > Please try latest master and confirm all the cases work.\nYep, everything works now. I ran python buku.py -p | less -R and then with all 8 filters. No errors and clean exit from less. edit: no issues with more either.\n. Ok, sounds good. @jarun Hi! Sorry, I've been tied up lately and haven't gone beyond what I did in PR #224. I will get back to it. Do you prefer that I raise small PRs as I find things? . Ah okay I see, got it . @jarun,hi!  thanks for pinging me. I'll have to do some research how to do this in SQL and modify the search queries, but I can take a crack at it this weekend, if that's okay.\nTo clarify the task:\nIf bookmarkA has the title \"title1\" and the tag \"tagA\", and bookmarkB has the title \"title2\" and tag \"tagA\", and we run buku -s tagA title2, both bookmarks should be returned in the results (current behavior) and bookmarkB should appear before bookmarkA in the results (new behavior).\nAnd this should apply to all searches with 'any' logic (but, I assume, not 'all' logic)?\n. @jarun, just an update. I finally figured out the query:\nSELECT id, url, metadata, tags, desc,\n    CASE\n        WHEN (tags REGEXP 'python' OR URL REGEXP 'python' OR metadata REGEXP 'python' OR desc REGEXP 'python')\n            THEN 1 ELSE 0 END\n        + CASE WHEN (tags REGEXP 'ruby' OR URL REGEXP 'ruby' OR metadata REGEXP 'ruby' OR desc REGEXP 'ruby')\n            THEN 1 ELSE 0 END\n        + CASE WHEN (tags REGEXP 'programming' OR URL REGEXP 'programming' OR metadata REGEXP 'programming' OR desc REGEXP 'programming')\n            THEN 1 ELSE 0\n    END score\nFROM bookmarks\nWHERE score > 0\nORDER BY\nscore DESC;\nWill hopefully be able to make a PR this week, but if you're in a hurry I am happy to hand it off too.. @jarun hi! my apologies for the delay. I'm pretty tied up lately, so I don't think I'd have time to work on it, but thanks for checking with me.. @jarun That's what I would expect -- ordered by id because there is only one keyword, so each record has a score of 1 (and so same results with both -s and -S). Is this inline with what you were thinking?. @jarun \ud83d\udc4dDone. Let me know what you think (perhaps it's too long?).. This should be all set.. All set.. All set.. \\buku\\fR should be \\fBBuku\\fR, I think. It currently displays as k.. Perhaps this should be a more explicit message? I'm not sure of the case that would trigger this, though. It seems like it might not be needed, since args.colorstr has a default value. . Additions to the examples in both the README and man page may be helpful as well.. If an invalid color string is set as the env variable (e.g., ixejJ), the raised error message is buku.py: error: argument --colors: ixejJ is not a valid color string. Maybe not a problem, but this might be confusing since --colors is not used in that case by the user.. Okay sounds good. There's one place where print_single_rec is called where I'm not sure if it should be called from print_rec_with_filter:\nhttps://github.com/jarun/Buku/blob/4a817e583ce4908aa61eafdb7eaffadb2522cc9a/buku.py#L3059-L3065. within the prompt, where it's passed an index.\nI could add another optional keyword argument to print_rec_with_filter that could then be passed to print_single_rec but this seems a bit roundabout. Please let me know.. \ud83d\udc4d makes sense. Updated accordingly.. ",
    "hubitor": "I had several URLs in my notepad and I couldn't find a way to import them directly into buku. The add option accepts only one URL. So first I add them with an add-on in firefox, then export all the bookmarks and finally import them into buku. The problem was that it took some time because not only the new bookmarks were imported but also some thousands bookmarks which were already in firefox.\nSo, what about importing from a text file which contains URLs separated by new lines or spaces or semicolons? Or even batch import from the console?. Thanks for the quick response!\nWith:\nbuku -p --nc | less\nthe bookmarks appear normally without color. I can scroll up & down normally. But I still get the error when I quit.\nWith:\n$ buku -p | more\nthe bookmarks appear normally with color. I can scroll down normally with enter.\nHow long should I wait before pressing q? I've waited for some sec.\nI have now around 8'300 bookmarks.. > Would it be possible to share it (securely of course, not here)?\nSorry, I prefer not to share my bookmarks.\n\nI think the number of bookmarks is the reason here.\n\nOr maybe the encoding? There are some bookmarks with wrong encoding like this one:\n\nhttp://www.ipa.go.jp/about/english/index.html\n   + s\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00cb\u0153\u00c3\u0192\u00c2\u00ba\u00c3\u0192\u00c2\u00b0\u00c3\u201a\u00c2\u00a7\u00c3\u0192\u00e2\u20ac\u00a6\u00c3\u201a\u00c2\u00a1\u00c3\u0192\u00c2\u00ac\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00bcu1r\u00c3\u201a\u00c2\u00bf\u00c3\u201a\u00c2\u00beuHuL\u00c3\u201a\u00c2\u00a7\u00c3\u0192\u00c2p\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00c5\u00a1p\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u0192\u00c2\u00a9\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00c6\u2019p\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u017ep\u00c3\u2026\u00c2\u00bd\u00c3\u201a\u00c2\u00bfs\u00c3\u201a\u00c2\u00c3\u0192\u00e2\u20ac\u201c\u00c3\u201a\u00c2\u00a6\u00c3\u0192\u00c2\u00af\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u201a\u00c2\u00b4\u00c3\u0192\u00c2\u00b8\u00c3\u0192\u00c2\u00b9\u00c3\u0192\u00c2\u00b8r\u00c3\u2026\u00c2\u00bd\u00c3\u201a\u00c2\u00b4p\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20acp\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u201cp\u00c3\u0192\u00c2\u00a5\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2026\u00c2\u00bd\u00c3\u201a\u00c2\u00b6u1\u00c3\u0192\u00c2\u00ab\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00af\u00c3\u0192\u00e2\u20ac\u0153u-\u00c3\u0192\u00c2\u00ae\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u0192\u00c2\u00b1\u00c3\u0192\u00e2\u20ac\u201duE\u00c3\u0192\u00c2\u00be\u00c3\u0192\u00c2\u00b8u:uR\u00c3\u201a\u00c2\u00a1\u00c3\u0192\u00e2\u20ac\u00a2r\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u0192\u00c2\u00b1\u00c3\u0192\u00e2\u20ac\u00b0u-p\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00c2p\u00c3\u0192\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u201a\u00c2\u00af\u00c3\u0192\u00e2\u20ac\u00c3\u2026\u00c2\u00bd\u00c3\u201a\u00c2\u00be\u00c3\u0192\u00c2\u00ae\u00c3\u0192\u00c5\u201cuE\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00b8s\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u201c&uRp\u00c3\u00a2\u00e2\u201a\u00ac\u00c2\u00a1\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00c5\u00bdp\u00c3\u2020\u00e2\u20ac\u2122\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u017ep\u00c3\u0192\u00c5\u00b8\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20acp\u00c3\u201a\u00c2\u00ab\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u0192\u00c2\u00ad\u00c3\u0192\u00e2\u20ac\u02dc\u00c3\u201a\u00c2\u00a8\u00c3\u0192\u00c2\u00af\u00c3\u2026\u00c2\u00bd\u00c3\u0192\u00e2\u20ac\u00a2\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00a3uGuTu}\u00c3\u0192\u00c2\u00b1\u00c3\u0192\u00c2\u00c3\u201a\u00c2\u00bf\u00c3\u0192\u00c2\u00bb\u00c3\u0192\u00c2\u00ab\u00c3\u0192\u00c2\u00af\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00b1u1\u00c3\u0192\u00c2\u00ae\u00c3\u0192\u00e2\u20ac\u00a0\u00c3\u0192\u00c2\u00b1\u00c3\u0192\u00e2\u20ac\u201duc\u00c3\u0192\u00c2\u00c3\u0192\u00c2\u00b6\u00c3\u0192\u00c2\u00ab\u00c3\u201a\u00c2\u00a3. with:\n$ buku -p | less -R\nI have colors and can scroll. Error appears when I quit.\n\nwith:\n$ buku -p | more -R\nI get:\nmore: unknown option -R\nplus the BrokenPipeError\nTo me it's fine like this. Thanks!. > In the meantime, @hubitor when you have a 8000+ strong bookmarks set, would you be kind enough to run an auto update (have a copy of your original bookmark db) and confirm it works swell? The command is:\n\nbuku -u --tacit\n\nI'm running now the above command with v.3.4 as well as with the latest patched version and both are stuck at some index for many hours (the first at index 13 and the second one at index 32). This is actually the second time it happens. The first time I did buku -u and stopped it with Ctrl+C when it got stuck. Besides that, I see [ERROR] for every index. Many kinds of errors like these:\n\n[ERROR] [500] Internal Server Error\n[ERROR] [404] Page not found\n[ERROR] network_handler(): HTTPConnectionPool\n[ERROR] [403] Forbidden\n[ERROR] [404] NOT FOUND. > The error codes indicate that the URLs do not exist anymore or there is a server error. You have 8K URLs, there can be a substantial number of URLs which do not work anymore.\n\nTrue. How can I remove these URLs from buku? I hope not manually.\n\nI think I was wrong in asking you to run buku -u --tacit. You should run:\n\nI should check before was tacit means. I didn't realize it was showing me only dead URLs.. > As it is a silent refresh, it appears to be stuck but it's not. Buku refreshes in multiple threads and other threads would be running even if some are stuck.\nI run the update again and redirected the output to a log file. It was writing the file normally and then stopped for over an hour. The last index was 80. I then updated the subset 1 to 80 without a problem. These are the last lines from the output in the terminal:\n```\n[ERROR] network_handler(): HTTPSConnectionPool(host='branchout.com', port=443): Max retries exceeded with url: / (Caused by ConnectTimeoutError(, 'Connection to branchout.com timed out. (connect timeout=40)'))\n[ERROR] [404] Not Found\nException in thread Thread-1:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.6/threading.py\", line 916, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.6/threading.py\", line 864, in run\n    self._target(self._args, *self._kwargs)\n  File \"/usr/lib/python3.6/site-packages/buku.py\", line 1102, in refresh\n    title, mime, bad = network_handler(row[1], row[2] & 1)\n  File \"/usr/lib/python3.6/site-packages/buku.py\", line 2769, in network_handler\n    if is_bad_url(url):\n  File \"/usr/lib/python3.6/site-packages/buku.py\", line 2613, in is_bad_url\n    netloc = parse_url(url).netloc\n  File \"/usr/lib/python3.6/site-packages/urllib3/util/url.py\", line 199, in parse_url\n    raise LocationParseError(url)\nurllib3.exceptions.LocationParseError: Failed to parse: about:newtab\n[ERROR] network_handler(): HTTPSConnectionPool(host='wikivs.com', port=443): Max retries exceeded with url: /wiki/Apache_vs_nginx (Caused by ConnectTimeoutError(, 'Connection to wikivs.com timed out. (connect timeout=40)'))\n[ERROR] network_handler(): HTTPConnectionPool(host='ccom.uprrp.edu', port=80): Max retries exceeded with url: /~jortiz/cpath/mapreduce.html (Caused by ConnectTimeoutError(, 'Connection to ccom.uprrp.edu timed out. (connect timeout=40)'))\n^C\nInterrupted.\n``. I can confirm that more and less work fine with the patched version: \nwith:$ buku -p | less -R\n`\nI have colors and can scroll up & down. No error when I quit.\nwith:\n$ buku -p | more\nI have colors and can scroll down. No error when I quit.. I have found and removed this URL with DB Browser for SQLite, it was at index 0. After that I initiated a new update. This time the update finished normally.. I get same error when I search:\n$ buku -zs paper\n[DEBUG] Version 3.9\n[DEBUG] args.sany\n[DEBUG] query: \"SELECT id, url, metadata, tags, desc FROM (SELECT *, CASE WHEN (tags REGEXP ? OR URL REGEXP ? OR metadata REGEXP ? OR desc REGEXP ?)  THEN 1 ELSE 0 END AS score FROM bookmarks WHERE score > 0 ORDER BY score DESC)\", args: ['\\\\bpaper\\\\b', '\\\\bpaper\\\\b', '\\\\bpaper\\\\b', '\\\\bpaper\\\\b']\n[ERROR] user-defined function raised exception\nbut\n$  buku -p\nlists all bookmarks normally.. > Also it's pretty evident from the conversation the fix is in master and is not released yet. Did you try master?\nYes, I've seen that but I don't know how to do it. I have installed buku from the AUR.. > Download https://github.com/jarun/Buku/archive/master.zip, extract and run the buku.py file within it with the same args.\nThanks! Indeed this works fine:\n$ python  buku.py -s paper. > @hubitor can you please\n\ngo through the thread to understand the problem we had earlier and\ntry to figure out which record causes the problem?\nWithout having any data or info we can't do anything about your issue.\n\nI had issues with records in the past. I've checked the database again and I couldn't find something weird except some encoding issues in the metadata column. But as far as I remember the search was working properly even I after I inserted a bunch of bookmarks via a bash script (Lately I'm saving the bookmarks in a .csv file and I'm importing them into buku once in a while). So, I think it was the latest version version of buku or another related package update that caused this issue but not my bookmarks.. ",
    "questor": "two suggestions: \n- html-export with template (already done, I can make a pull request if you want; helpful to create a static website with filtering possibilities in JS)\n- it would be cool to have some sort of plugins to update the database, for example if you have a github-repo bookmarked to automatically create tags based on the license and language. something to make it easier to grab more information to a url based on hints on the webpage, but with a plugin concept to be able to use different \"services\". (I can help with coding for this, but I dunno how to do a plugin-concept in python.\nany comments?\n[edit] found python plugin concept, will make an implementation as proposal. okay, to give you some more insights what I want to achieve and what workflow I have in mind some explanations:\n- I want to handle the plugins in the update function, an extra plugin-update-handling could also be possible (with selection which plugin to run?)\n- but if the user changed something the plugin should not overwrite user-content. this one is tricky because tags can be updated on a tag-basis (if it's not already set in the tag-list add it), but if the user decides to change the description and the plugin detects a different description on the webpage the user-content should not be overwritten (but if the content on the webpage changes and the user has not changed it the description should be updated). I'm not sure how this can be handled with the current db format, one way would be to allow extra tables for each plugin to store additional infos.\n- the filtering should be handled in the plugin itself; the plugin nows best what to do and how. here a special handling might be needed in the plugin (example: webpage downloading service where special handling for github-webpages is a good idea (to download the repo and not the webpage itself))\nI have already started with a very simple plugin system, but I need some help with the decisions where to store additional information from or in the plugin (external table or in the current table). But I agree, the plugin-framework has to be part of buku, but the plugins are separate projects.. btw: the template changes are really simple and does not interfere with the other options. the changes can be seen here: https://github.com/questor/Buku/commit/eb4b8c745f793eb631842e290a650d3a8259e6ff\n. I'm thinking through the stuff and the things I want to have (which of course might not necessarily is the same the rest want to have). my current idea is to have a template-output (already done, will make a PR later) with the possibility to have a static webpage with the output and some javascript code to make filtering in the page (something like filtrify).\nhere bringing plugins into play would mean (when I want to use additional infos in the html-export) that I have to make special handling of template export for plugins (which also would mean bigger changes needed) or I can somehow put the additional infos into the main database of buku and the export-plugin can use the \"normal\" database to do the export with the additional information from other plugins.\nI opted for the \"template-export\" orthogonal to \"plugin-concept\" approach simply because it's easier to code as I'm not a python-guru myself. but I can push what I have so far (but I have to admit it's not that much up to now). the more extensive option would be to make the template-export somehow aware of plugins and make the export query the plugins for more information (more work, but cleaner design).. okay, you are thinking about a datascraper-plugin and another export-plugin or something combined thinking about an export-plugin using the buku-db-url, downloading some more data and doing the export?\nhaving two separate plugins would allow to use custom data-scraping plugins also for normal database population, but having the additional data in an extra database would mean that using the special data in an export plugin creates an dependency hierarchy (export plugin X needs scrape-plugin A and B to be able to work correctly).\nmy approach would have been to make separate scrape-plugins (with the tables in the main-database) and an generic export-plugin where you can specify from where to take the data to insert into the page (and the possibility to specify multiple tables in one page).\nTo get things going I try to do an complete example to be able to transport my idea what I want to have and then you can decide if you want to go that way or another one.. travis-builds fail because mako is not installed on ci servers.. sure, not a problem!. ",
    "eyalev": "Suggestion:\n```python\nfrom subprocess import call\nurls = ['http://example.com', 'http://example1.com', 'http://google.com', 'http://github.com']\nargs = ['google-chrome', '--new-window'] + urls\ncall(args)\n```\npossibly executed only if the user have (e.g) environment variable BROWSER with value google-chrome, and he passed something like --new-window to buku.\nDo you think something like that can work?\n. ",
    "shv-q3": "there is only 1 issue I found with the colors, when u search with -t option and don't put any args it displays the amount  of bookmarks without color. @alex-bender @jarun \n I did manage to rewrite get_firefox_profile_name(path) and get it to work but still did not test other distros then linux can you please check it out link to change and let me know what you think. fixed. as well as all completion scripts.. removed. add to opts_with_arg. misunderstanding no problem. Corrected. Corrected. Corrected. Corrected. Corrected. Corrected. Corrected. ah :) did not sleep yes i guess ok np. corrected in both files. well googler's is:\n--colors COLORS       set output colors (see man page for details)\ndo you what to use this one?. ",
    "mikeedjohn": "Thanks, that fixes it.. ",
    "QiangF": "Since importing from different sources would inevitably introduce many duplications, a method of merging duplicated urls is crucial, I would suggest to pick the shortest title, and merge the tags.. Yes, I will try,  I have only very little knowledge of python and know nothing about sql.. 1. the user typed buku\n2. a new database is created\nThere should be a confirmation.. I just come across one overwritten. Fortunately I have a backup. If I move my backup to overwrite the database created, next time I reboot and type buku it will get overwritten again.. \"/home/q/.local/share/buku/bookmarks.db\". Update to the latest version seems to fix it. Thank you!. ",
    "flashus": "I think storing bookmark save date would be nice.. ",
    "putsan": "@flashus commented on 25 \u0441\u0456\u0447. 2018, 06:37 GMT+2:\n\nI think storing bookmark save date would be nice.\n\nSo I think it may be necessary for me too. Someone can make a package for Solus Os?. ",
    "jpdasma": "Hello, I saw your thread here.\nhttps://www.reddit.com/r/archlinux/comments/7tk50u/need_aur_maintainer/\nI could volunteer for maintaining the AUR package, I have some experience in creating Fedora and Debian package. I might also look at the code sometime and contribute (currently using Python for work). Hello, although I have experience in creating Fedora and Debian packages due to work related reasons, I have minimal experience in creating an AUR package (thus still no AUR username). Is it okay if I could still maintain it? I'll try creating an AUR account later today.. Hello, I have created an AUR account with usernamen jpdasma. I'm willing to be the maintainer for this if you are okay with a maintainer with little experience with regards to AUR :-). @jarun I'll take note of that\nI will also try publishing an update to the AUR later today.. I have some free time this weekend. I'll try to work on -n and -p if nobody is still doing it. :D. Okay, I just noticed -p can take range as input arguments. I'll have to rework this.. This currently does NOT support the following syntax for -p:    -5 (last 5 lines).\nEDIT: Managed to implement support for last N lines.. Ah I messed up during my refactor, should be fixed now.. Sure. ",
    "Aninstance": "@jarun I've created a snap package for this, for easy installation across my local Linux systems. It's very easy to maintain (when the snap is installed it pulls directly from your latest release, installs all the dependences etc).\nWould you be interested in publishing the snap in the Ubuntu snap store? It'd make installing over most popular Linux distros as easy as 'snap install buku'. If you'd like me to assist in publishing the snap, or even maintain the published snap on your behalf, please let me know.. @jarun Thank you for permitting your application to be snapped, much appreciated. The snap would build directly from your latest released version, so no changes to your codebase at all. I've got the ball rolling - it's now pushed to a buku repository in the Ubuntu snap store and should be published soon.. ",
    "stepnem": "\nStart with:\nbuku -w\n\nQuit without saving and the bookmark won't be added.\n\nThis works only if you don't supply other options, but what about e.g. the\n\"xsel | buku -w -a\" case (or just \"buku -w -a URL\")?\n. ",
    "randrej": "I was thinking of using a drop-in full text search solution for sqlite3, this one in particular:\nhttps://sqlite.org/fts3.html\nThe FTS3 (or 4) extension is easily accessible through the official python sqlite3 library:\nhttps://docs.python.org/3/library/sqlite3.html#sqlite3.Connection.enable_load_extension\nI wanted to try doing this myself, I'm not asking You to develop a (not so) niche feature that I'd like. I'm just asking for feedback on why this may be a bad idea before I sink any time into it.. ",
    "stkw0": "I usually try to create a package for utilities that I use (so I will probably detect any problem), for now I don't use those utilities, so I don't think I'm the right person. Anyway, Gentoo is very open, everybody can create a package and send it, and in general is not too complicated, so I suppose that in the future someone else may package them. or if you want you could do it, there are a project for helping new users (like me) https://wiki.gentoo.org/wiki/Project:Proxy_Maintainers\n. Thanks, I was aware of that. Gentoo merged the package that I sent on December and I didn't checked if there was a new version before the merge.\nBetween today and tomorrow I will sent the update. . Is it possible to import a python3.4 library from python3.6? Python3.4 is reaching EOL in 2019, anyway \n. If the library can work with python3.6 without troubles, isn't supposed that the library also add 3.6 to the list of supported versions?\nTo put a little bit of context, I was trying to create the package for the new version of buku and bukuserver. Gentoo tomorrow will make python3.6 the default (https://www.gentoo.org/support/news-items/2018-05-22-python3-6.html). In theory as buku supports 3.6 it's not a problem, but having dependencies without support for 3.6 is a problem.\nAs this seems more a problem of flask-paginate, I will open an issue there. ",
    "yigitemres": "@jarun Hi. Firstly, thank you and thank all contributors for such a good app. \ud83e\udd42 I'm starting to using right now and I wonder that, can we have force arg (at least for exporting, buku -ef bukulist.md)?. ",
    "BlackLotus": "Thanks jarun I will check it out. ",
    "tom-i": "Looks pretty awesome, @rachmadaniHaryono are you going to integrate function for having buku-server on some other network place (server) than localhost?. @rachmadaniHaryono \nWhat am I doing wrong? :-(\n(env) $ pip install -e .[server]\nObtaining file:///home/tomik/programs/buku/Buku\n  buku 3.6 does not provide the extra 'server'\nInstalling collected packages: buku\n  Found existing installation: buku 3.6\n    Uninstalling buku-3.6:\n      Successfully uninstalled buku-3.6\n  Running setup.py develop for buku\nSuccessfully installed buku\n(env) $ bukuserver run --host 0.0.0.0\nbash: bukuserver: command not found\nEDIT: Ok after some missing modules in virtualenv I finally can run:\n./server.py run\nUnfortunatelly there is 404 on page:\n(env) [api] $ ./server.py run\n * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n127.0.0.1 - - [23/Mar/2018 23:21:07] \"GET / HTTP/1.1\" 404 -\n127.0.0.1 - - [23/Mar/2018 23:21:07] \"GET /favicon.ico HTTP/1.1\" 404 -\n127.0.0.1 - - [23/Mar/2018 23:21:18] \"GET /bookmarks HTTP/1.1\" 404 -\n127.0.0.1 - - [23/Mar/2018 23:21:19] \"GET /favicon.ico HTTP/1.1\" 404 -. Hi @rachmadaniHaryono,\nI've looked to that git show and I had this one.. so not yours :-/\nI don't know, how is it possible\ncommit 474c403521f89798952ac1c5e4b7c09546411487 (HEAD -> master, origin/master, origin/HEAD)\nAuthor: rachmadani haryono <rachmadaniHaryono@users.noreply.github.com>\nDate:   Fri Mar 23 11:30:13 2018 +0800\nbut git pull shows me:\nAlready up to date\nalso entry_points have not that last part about 'bukuserver=bukuserver.server:cli'\nand extras_require there is missing 'server': server_require,\nSo it looks, that I'm using wrong commit or so :-/\nBecause I have there api folder and not bukuserver as you have it in your git repository :(\nBuku [ ls -l                                                                                                                               master * ] 10:55 AM\ntotal 296\n-rw-r--r-- 1 tomik tomik  14461 Mar 23 22:04 CHANGELOG\n-rw-r--r-- 1 tomik tomik  35142 Mar 23 22:04 LICENSE\n-rw-r--r-- 1 tomik tomik    125 Mar 23 22:04 MANIFEST.in\n-rw-r--r-- 1 tomik tomik    508 Mar 23 22:04 Makefile\n-rw-r--r-- 1 tomik tomik  22988 Mar 23 22:04 README.md\ndrwxr-xr-x 2 tomik tomik   4096 Mar 23 22:33 __pycache__\ndrwxr-xr-x 4 tomik tomik   4096 Mar 23 23:12 api\ndrwxr-xr-x 5 tomik tomik   4096 Mar 23 22:04 auto-completion\n-rw-r--r-- 1 tomik tomik  24529 Mar 23 22:04 buku.1\ndrwxr-xr-x 2 tomik tomik   4096 Mar 23 22:22 buku.egg-info\n-rwxr-xr-x 1 tomik tomik 145022 Mar 23 22:04 buku.py\ndrwxr-xr-x 3 tomik tomik   4096 Mar 23 22:04 docs\ndrwxr-xr-x 5 tomik tomik   4096 Mar 23 23:05 env\n-rw-r--r-- 1 tomik tomik   1531 Mar 23 22:04 packagecore.yaml\n-rw-r--r-- 1 tomik tomik     58 Mar 23 22:04 requirements.txt\n-rwxr-xr-x 1 tomik tomik   1877 Mar 23 22:22 setup.py\ndrwxr-xr-x 2 tomik tomik   4096 Mar 23 22:04 tests\n-rw-r--r-- 1 tomik tomik   1042 Mar 23 22:04 tox.ini\nEDIT: Aha.. I'm using @jarun git repository :-/\nBut it's strange I thought that I've used @rachmadaniHaryono :-/\nI'll try to repair it... buku/Buku [ git remote add rachmadaniHaryono https://github.com/rachmadaniHaryono/Buku.git\nbuku/Buku [ git fetch rachmadaniHaryono                                                                                                                 master ] 11:05 AM\nFrom https://github.com/rachmadaniHaryono/Buku\n * [new branch]      feature/codecov                    -> rachmadaniHaryono/feature/codecov\n * [new branch]      feature/exception-on-malformed-url -> rachmadaniHaryono/feature/exception-on-malformed-url\n * [new branch]      feature/fix-idx                    -> rachmadaniHaryono/feature/fix-idx\n * [new branch]      feature/fix-server                 -> rachmadaniHaryono/feature/fix-server\n * [new branch]      feature/release-branch             -> rachmadaniHaryono/feature/release-branch\n * [new branch]      feature/server                     -> rachmadaniHaryono/feature/server\n * [new branch]      master                             -> rachmadaniHaryono/master\nbuku/Buku [ git checkout -b rachmadaniHaryono/Buku                                                                                                      master ] 11:07 AM\nSwitched to a new branch 'rachmadaniHaryono/Buku'\n````\nbuku/Buku [ git pull rachmadaniHaryono/Buku                                                                                             rachmadaniHaryono/Buku ] 11:08 AM\nfatal: 'rachmadaniHaryono/Buku' does not appear to be a git repository\nfatal: Could not read from remote repository.\nPlease make sure you have the correct access rights\nand the repository exists.\nWhat should I put to `pull`?. @rachmadaniHaryono \nI'm noob with this, anyway how to pull your branch?\nbuku/Buku [ git pull                                                    rachmadaniHaryono/feature/server ] 6:11 PM\nThere is no tracking information for the current branch.\nPlease specify which branch you want to merge with.\nSee git-pull(1) for details.\ngit pull <remote> <branch>\n\nIf you wish to set tracking information for this branch you can do so with:\ngit branch --set-upstream-to=<remote>/<branch> rachmadaniHaryono/feature/server\n\nI'm using yours, but `git pull` or `git pull rachmadaniHaryono/feature/server` doesn't do anything :-/. Hmm doesn't help. How long that merge will take, please? A week?. @rachmadaniHaryono ha.. cool that helps ;)\nNow I see that page with my bookmarks ;)\nTomorrow, I'll try to install it on my EspressoBin server, to check if it's working with `--host 0.0.0.0` ;)\nThx man... @jarun - I can test it and help @rachmadaniHaryono  ;) I've solved some issue on my EspresssoBin, so today maybe I can try to install Buku there and try to setup / run server side. This is what I've missed on Buku sooo long ;)\nI hope it'll work :). @jarun I hope I'll have time and won't be tired after take care of two children :D\nIt would be glad to have some help from you guys ;)\nAnyway, so installation steps should be in some documentation? Or should I make same steps as I did before?\nSo in virtualenv install required packages and then run `./server.py run --host 0.0.0.0` from `api` directory right?. @rachmadaniHaryono - so I've installed `bukuserver` on my #EspressoBin so I can access it via my LAN network. Btw.I found some issue if I click to \"Bookmarks\" button on browser page.\nWhere should I make an issue about that? Here in main `Buku` project or to yours @rachmadaniHaryono ?. Click on both buttons. The database is clear, so no data there. Maybe this is the main reason. Anyway, tags are empty too but the page appears without error.\nSo stacktrace looks:\n[2018-03-28 20:16:23,427] ERROR in app: Exception on /bookmarks [GET]\nTraceback (most recent call last):\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functionsrule.endpoint\n  File \"/home/nashome/programs/Buku/bukuserver/server.py\", line 88, in bookmarks\n    result['bookmarks'] = bms[page-1]\nIndexError: list index out of range\n192.168.1.211 - - [28/Mar/2018 20:16:23] \"GET /bookmarks HTTP/1.1\" 500 -\n192.168.1.211 - - [28/Mar/2018 20:16:24] \"GET /favicon.ico HTTP/1.1\" 404 -\n192.168.1.211 - - [28/Mar/2018 20:16:28] \"GET / HTTP/1.1\" 200 -\n[2018-03-28 20:21:42,109] ERROR in app: Exception on /bookmarks [GET]\nTraceback (most recent call last):\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functionsrule.endpoint\n  File \"/home/nashome/programs/Buku/bukuserver/server.py\", line 88, in bookmarks\n    result['bookmarks'] = bms[page-1]\nIndexError: list index out of range\n``. @rachmadaniHaryono another one:\nSteps to repro:\n1. Check all 3 checkboxes on home page.\n2. Press \"Search\" button.\n3.Internall Server Errorpage appears.\n4. Go back\n5. Uncheck all checkboxes.\n6. Press \"Search\" button again.\n7.Internall Server Error` page appears again.\n[2018-03-28 20:42:47,158] ERROR in app: Exception on /bookmarks/search [GET]\nTraceback (most recent call last):\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/home/nashome/programs/Buku/bukuserver/server.py\", line 336, in search_bookmarks\n    result['bookmarks'] = bms[page-1]\nIndexError: list index out of range\n192.168.1.211 - - [28/Mar/2018 20:42:47] \"GET /bookmarks/search?keywords-0=&all_keywords=y&deep=y&regex=y HTTP/1.1\" 500 -\n192.168.1.211 - - [28/Mar/2018 20:42:47] \"GET /favicon.ico HTTP/1.1\" 404 -\n[2018-03-28 20:42:52,256] ERROR in app: Exception on /bookmarks/search [GET]\nTraceback (most recent call last):\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/home/nashome/programs/Buku/bukuserver/server.py\", line 336, in search_bookmarks\n    result['bookmarks'] = bms[page-1]\nIndexError: list index out of range\n192.168.1.211 - - [28/Mar/2018 20:42:52] \"GET /bookmarks/search?keywords-0= HTTP/1.1\" 500 -\n192.168.1.211 - - [28/Mar/2018 20:42:52] \"GET /favicon.ico HTTP/1.1\" 404 -. @rachmadaniHaryono - How can I save some bookmark to the server?\nShould be Buku installed on client aswell? Probably yes, but it should use database from server right? How to connect together? Or am I thinking about it wrongly?. @rachmadaniHaryono - maan.. I love you !!! :D That will be awesome ;). @rachmadaniHaryono - some issue here.\nSteps to repro:\n1. Go to bookmarks page\n2. Add new URL to bookmark.\n3. On same page search via some tag you've defined in added bookmark.\nBUG - Internal Server Error appears\n192.168.1.211 - - [31/Mar/2018 08:32:40] \"GET /bookmarks HTTP/1.1\" 200 -\n[2018-03-31 08:32:47,811] ERROR in app: Exception on /bookmarks/search [GET]\nTraceback (most recent call last):\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1982, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1614, in full_dispatch_request\n    rv = self.handle_user_exception(e)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1517, in handle_user_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/_compat.py\", line 33, in reraise\n    raise value\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1612, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/app.py\", line 1598, in dispatch_request\n    return self.view_functions[rule.endpoint](**req.view_args)\n  File \"/home/nashome/programs/Buku/bukuserver/server.py\", line 375, in search_bookmarks\n    search_bookmarks_form=search_bookmarks_form)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/templating.py\", line 134, in render_template\n    context, ctx.app)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask/templating.py\", line 116, in _render\n    rv = template.render(context)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/jinja2/asyncsupport.py\", line 76, in render\n    return original_render(self, *args, **kwargs)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/jinja2/environment.py\", line 1008, in render\n    return self.environment.handle_exception(exc_info, True)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/jinja2/environment.py\", line 780, in handle_exception\n    reraise(exc_type, exc_value, tb)\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/jinja2/_compat.py\", line 37, in reraise\n    raise value.with_traceback(tb)\n  File \"/home/nashome/programs/Buku/bukuserver/templates/bukuserver/bookmarks.html\", line 1, in top-level template code\n    {% extends \"bukuserver/base.html\" %}\n  File \"/home/nashome/programs/Buku/bukuserver/templates/bukuserver/base.html\", line 88, in top-level template code\n    <div class=\"form-group\"> {{search_bookmarks_form.regex()}} {{search_bookmarks_form.regex.label}} </div>\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask_bootstrap/templates/bootstrap/base.html\", line 1, in top-level template code\n    {% block doc -%}\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask_bootstrap/templates/bootstrap/base.html\", line 4, in block \"doc\"\n    {%- block html %}\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask_bootstrap/templates/bootstrap/base.html\", line 20, in block \"html\"\n    {% block body -%}\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/flask_bootstrap/templates/bootstrap/base.html\", line 23, in block \"body\"\n    {% block content -%}\n  File \"/home/nashome/programs/Buku/bukuserver/templates/bukuserver/bookmarks.html\", line 16, in block \"content\"\n    {{create_bookmarks_form.url.label(class_=\"control-label col-sm-3\")}}\n  File \"/home/nashome/programs/Buku/env/lib/python3.6/site-packages/jinja2/environment.py\", line 430, in getattr\n    return getattr(obj, attribute)\njinja2.exceptions.UndefinedError: 'create_bookmarks_form' is undefined\n192.168.1.211 - - [31/Mar/2018 08:32:47] \"GET /bookmarks/search?keywords-0=ufo HTTP/1.1\" 500 -\n192.168.1.211 - - [31/Mar/2018 08:32:48] \"GET /favicon.ico HTTP/1.1\" 404 -. @jarun wanted from my side steps how to do it. So I put there everything. \nIt's right that it'll be deprecated after you'll merged your branch to jaruns.\n- no idea that pipenv is existing :D I'm not a python developer.\n- which part you mean? About installing additional dev packages?\n- yes of course, but jaruns repo doesn't work with your changes right?. Closed, and submit changes, you mean whole Install server paragraph into bukuserver/README.md right? Just copy to it?. @jarun I would like to.. but I don't know how :D \nI have to study it how, but no free time this days :(. Hmm.. I have no write access to that repository, so I can't merge it to the master :-/\nThis branch has no conflicts with the base branch\nOnly those with write access to this repository can merge pull requests.. @rachmadaniHaryono ok done.. I've updated my repo to the latest from @jarun and then I've applied the patch-2 to my master branch. Should I make a new PR?. Bukuserver accessible from local network is awesome feature, but next level (from my side) would be, to open port (5001) on my router and access bukuserver page from Internet.\nSo I have questions:\n1. Is it save to open that port to the Internet?\n2. Is there any security issues for the front end? I mean if someone can hack the page and can easily access to my router.\n3. If there is new update (via git or so) for bukuserver / buku, should I install newer version via pip3 again? Or which steps I should follow? E.g. uninstall older version via pip3 and then git pull repository and then install new bukuserver?\n. Hello guys,\nis it possible that I have 2 different versions of bukuserver?\nI've updated bukuserver yesterday and today too, kill bukuserver from running processes and run bukuserver via:\nsource env/bin/activate\nbukuserver run --host 0.0.0.0 --port 5000\nI saw that there are some icons before URLs, so I realized, that it's some kind of new feature.\nThen I've restarted my NAS server and my bukuserver started via cron after reboot:\n@reboot cd /home/nashome/programs/Buku/bukuserver/env/bin && ./bukuserver run --host 0.0.0.0 --port 5000\nshowed me, that there is no icons of the webs before URLs in bookmarks page.\nSo can I have different versions there? Or how should I start bukuserver via cron correctly, please?\nThx guys\nEDIT:\nOk, so I've made some small shell script with \nsource env/bin/activate\nbukuserver run --host 0.0.0.0 --port 5000\ninside and I run it each reboot via cron now.\nBut question is still unanswered, why I've 2 versions there :).  So every notes I've made I should put to the README in server directory?\nYou've merged all the @rachmadaniHaryono changes? Because I would like to test it, if that changes works on normal repo.. So I've made some small changes, but guys.. there is a problem, because I don't know how to push to the main Buku repo :D \nI'm newbie in GIT. ",
    "SaltyCatFish": "@jarun FYI, not sure if anyone else is working on it yet, but I plan on having a PR for paging this weekend.. Will do.\nOn Fri, Mar 30, 2018, 9:37 AM Arun Prakash Jana notifications@github.com\nwrote:\n\n@SaltyCatFish https://github.com/SaltyCatFish can you please let us\nknow how you are planning to implement paging? We can have a short review\nof the design and all of us can be on the same page as to what we expect.\nPlease raise an issue for the discussion and add the details so we can\nreview it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/issues/251#issuecomment-377525749, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IH9GQZRt9b-6PeIhmrSuI6NsFZxWpks5tjjUYgaJpZM4St7lU\n.\n. Sorry, not yet.. Awesome, thanks!. No, I've bit off a bit more than I can chew with some other projects.  I\nstill hope to spend some quality time with the code base this week, but if\nanyone else wants to tackle this request, feel free.. @jarun How should this work?  Does the user type \"buku -paging-option 10 20\" to see rows 10 - 20, or do you want a something like unixs less/more?. Hello,\n\nI believe the functionality is already built into your methods.\nThe code take whatever is returned from the keyword search and removes\nanything returned from the tag search.  So, if the user can already specify\nwith or without these tags (the + and - )  wouldn't this already do that,\nespecially based on the user story that started this ticket.\nI could not be understanding your question.\nRyan LongSoftware Developer\nemail: RyanLong1004@gmail.com RyanLong1004@gmail.com\n[image: https://www.linkedin.com/profile/view?id=45665900&trk=spm_pic]\nhttps://www.linkedin.com/profile/view?id=45665900&trk=spm_pic[image:\nTwitter] http://www.twitter.com/RyanRLong[image: Bitbucket]\nhttps://bitbucket.org/SaltyCatfish[image: Github]\nhttps://github.com/SaltyCatFish\nOn Wed, Mar 21, 2018 at 11:31 PM, Arun Prakash Jana \nnotifications@github.com wrote:\n\nThanks for the PR!\nI believe this one implements the exclusion of specified tags. We would\nalso need the intersection i.e. records matching the keywords and having\nthe specified tags.\nCould you kindly add that? Please note that users can already use + and -\nin option -t to specify which tags to include and exclude. We might need\nsome option to say we need the tag search matches filtered out or in.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/252#issuecomment-375168338, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IH7oa1gExDVsvBTwLW-KUJ6wq6GURks5tgxsAgaJpZM4S2YkP\n.\n. I understand.  I'll have a look tonight and see what the best option is.\nMaybe adding another flag when -s and -t args are populated.\n\nRyan LongSoftware Developer\nemail: RyanLong1004@gmail.com RyanLong1004@gmail.com\n[image: https://www.linkedin.com/profile/view?id=45665900&trk=spm_pic]\nhttps://www.linkedin.com/profile/view?id=45665900&trk=spm_pic[image:\nTwitter] http://www.twitter.com/RyanRLong[image: Bitbucket]\nhttps://bitbucket.org/SaltyCatfish[image: Github]\nhttps://github.com/SaltyCatFish\nOn Thu, Mar 22, 2018 at 9:03 AM, Arun Prakash Jana <notifications@github.com\n\nwrote:\nI think the following should work:\nlist(set(sany_results) & set(stag_results))\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/252#issuecomment-375297179, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IH680SIYCVR7U8dXxf_dwNs5Hq68Uks5tg6EcgaJpZM4S2YkP\n.\n. Happy to help.\n\nOn Fri, Mar 23, 2018, 9:39 PM Arun Prakash Jana notifications@github.com\nwrote:\n\nI can't thank you enough for this PR. I will review it soon. \ud83d\udc4d\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/256#issuecomment-375837356, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IH8x4U-BnnNda8NGI64uRfHjtEa-6ks5thaO-gaJpZM4S5iNH\n.\n. Sure.\n\nOn Fri, Mar 23, 2018, 9:41 PM Arun Prakash Jana notifications@github.com\nwrote:\n\nWould you be interested in becoming a collaborator to Buku? I would be\nglad to send out an invite.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/256#issuecomment-375837489, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IH6RHaXz0xB_1VsyJUSurpQUEZRsxks5thaRRgaJpZM4S5iNH\n.\n. I have some ideas.  I'll put something together this weekend.. I think if we implement this feature using one db query and keeping the same feature for search as we would for without, we would make two separate queries, one for the inclusion, and one for the exclusion, and union them together, thereby removing duplicate rows and giving us our filtered list.\n\nTo keep the code DRY, we would refactor the searchdb method into two separate methods; one that generates the sql to execute, and one that executes it.\nOtherwise we'd be duplicating the same code in searchdb as we would for searchdb_keywords_without_keywords.\nI'm not fully on board with this idea because all of the methods of bukuDb execute their sql in their own scope, so having a few stray methods that only generate sql and a method that execute it, to me, is less than ideal without refactoring the rest of the methods to operate the same.\nHowever, if you think we'll be adding a lot more sql functionality, this would be ideal in the sense we could have smaller methods to generate the sql (ie, the way case statements are generted in searchdb should be a method by iteself), combining those smaller functions in larger ones, and sending the end result to a function to execute the sql and process the results.\nRefactoring in this way will make generating sql in the future much easier and efficient, but it does require a refactor of the other methods.\nRight now, I think the implementation is the cleanest possible.  It uses already proven methods and performs a native python method on them to get results.  It may be slightly faster to do in one query, but the only ways I can think of doing it all mean duplicating code and creating an much more complex method (now keeping track of all the params involved in a regular search twice).\nAny thoughts or ideas?. If the goal is to run no more than 2 queries, thats met with the current\npull request.  The original search (-s) is run as is, and if the \"-W\" flag\nis found, it runs the searchdb method on those arguments.  The workflow\nfollows you listed is covered nearly verbatim in the request, down to the\nsubtracting query_results_one from query_results_two.\nMy concern is that the searchdb method has a lot nested conditions as is.\nThis will add more nesting and more complexity.\nI'm not saying it can't be done. and if users have more than 40k in\nbookmarks then yes it should definitely be considered.  I just don't have a\nsolution in my mind that doesn't involve bolting more if/elif/else's to elif\nall_keywords and elif not all_keywords in the searchdb method.. I'll continue looking into lowering the number of queries.. Yes was thinking about this and it should be priority. I'll start looking\nat the page this week.\nShouldn't be to challenging.\nOn Mon, Mar 26, 2018, 3:00 AM Arun Prakash Jana notifications@github.com\nwrote:\n\n@SaltyCatFish https://github.com/SaltyCatFish is there a way to run\nqueries and retrieve results in batches rather than all at once? We need\npaging badly it seems.\nWhat I have in mind is like:\n\nrun query, limit results to n\nquery returns n results\nin the next iteration pass n and get the next n results\n\nis it possible to do that?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/pull/257#issuecomment-376065443, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AF5IHxd_aaO-o9Z-SJp7UzJ4PiebyNaxks5tiJIGgaJpZM4S5_zZ\n.\n. \n\nSee attached screenshot for confirmation.. Not sure I understand the why order change.  The way its written now, search_tags is exclusive, as is search_keywords.  If we change the order, the conditional would be if not tag_search: ..., but the execution of the queries would be the same regardless of the order.\n. Good idea.  Changing now.. Makes sense now, thanks.. ",
    "tsaoyu": "Any interests on orgmode markdown .org export? \nSo that bookmarks can be integrated with GTD. . @jarun GTD, stand for get things done, here it is not a service but a way to manage bookmarks within personal workflow. Suppose we come across GitHub.com and we want to read it in the future. It is easy to do so with orgmode by exporting .org list from buku.  See example here. Oops, now should be alright. . Thanks, documentation is also there.\n. Thank your reviewing.\nSure, glad to be a collaborator.\n. Cheers! \nWill write some test cases for this. \n. ",
    "jubalh": "You want to tell me Fedora is not a popular distro?\nWhy have it for some and not others? Why not be consistent here?\nAlso people might try zypper in buku but it's actually python3-buku don't you think that it wouldn't hurt to have that mentioned here?. > The Fedora link and command came together.\nSo  you care about the commit history? It's okay for a history to have a change like this ;)\n\nYou didn't even read the first few lines of the PR guideline.\n\nI did.\n\nCan you add the commands for the remaining distros and update the PR?\n\nUnfortunately I don't run any of the other distributions. So have no reliable information. Maybe you should have rather declined those pull requests because of missing information ;). Nice, thank you.. > If you have some time, would you be interested in submitting some of them to openSUSE?\nI can take a look. Generally I try to only maintain packages that I also use.\n\nAlso, if a package is in experimental status (e.g. https://software.opensuse.org/package/googler?search_term=googler) can it be installed with a single command (e.g. zypper in googler)?\n\nIt is up to the maintainer of a package to think it is useful or stable enough to make it into official repositories.\nIn OBS we have home repositories and devel repositories. So at least googler is in the network:utilities devel repo. Maybe the maintainer considers it not stable enough yet, or he doesn't have enough time to really put in the effort to maintain it reliable, thus he chose to submit it somewhere where users can find it but without the need to provide support.\nHere is the changes file, where you can see who made changes to the package, maybe you want to contact that person.. > is it possible to rename the opensuse package for buku to simply buku instead of python3-buku\nActually I started to package it as buku and when I wanted to submit it I realized that someone else packaged it as python-buku. I also don't really like this name..\n\nThe name looks very odd. How do users run it? python3-buku?\n\nNo it's just the name of the rpm. The installed program is still called like upstream.\nI will contact the maintainer and ask what he thinks. Ultimately it's the decision of the maintainer I think.. Well, quite busy with work recently. So I will decline for now.. ",
    "luigino": "@jubalh \nreplying here: as a matter of fact the package used to be named Buku. Had to rename it on account of the unified python syntax.\nBoth zypper and yast show the relevant package when searching for Buku though, so is this a significant problem?\n. But if @jarun feels like the package should be renamed and @jubalh wants to take over maintainership, I wouldn't have objections, since I don't personally use Buku.\n. @jarun I'd have to dig up things to see if it can be renamed AND keep the unified python syntax or just drop the latter and convince the distro maintainers to accept it. Sorry, but it's too much hassle for something I don't even use.\n. ",
    "eikenb": "Looking at the chrome/chromium related code it was really easy to add (see below). If there is general interest in this I'd be happy to submit a pull request for it. It could be automatic as part of the current parent tag adding, or an additional option. It looks like this wouldn't be to much work to add to firefox as well, but I don't have any bookmarks in firefox so I didn't bother  testing it. But I'll look into that if there is a desire to add this functionality.\nThanks.\ndiff --git a/buku.py b/buku.py\nindex 2a1b6c6..151b718 100755\n--- a/buku.py\n+++ b/buku.py\n@@ -2017,7 +2017,8 @@ class BukuDb:\n\n        for item in sublist:\n            if item['type'] == 'folder':\n-                for i in self.traverse_bm_folder(item['children'], unique_tag, item['name'], add_parent_folder_as_tag):\n+                _folder_name = folder_name + \",\" + item['name']\n+                for i in self.traverse_bm_folder(item['children'], unique_tag, _folder_name, add_parent_folder_as_tag):\n                    yield (i)\n            elif item['type'] == 'url':\n                try:\n\n(edited to fix bug in diff). Supports both Chrom{e,ium} and Firefox. Couldn't find any tests covering this, so no changes there. Didn't add another option as I prefer to keep things simple until decided otherwise.. Pushed a quick change to convert on use of a double quote into a single quote per the guidelines.. So it seems there  is a test on this code that I missed. Looking over the .travis file I think I have the tests running locally and I'll look into fixing that up ASAP.. Will do. Thanks for pointing that out. All my folders are already lowercase, so I missed that bit.. I checked and the tags are already all lower case. After being imported they are passed to parse_tags() which converts them all to lower case.\nLooking at the tests they appear to download a bookmarks.zip file and use the contents as the source for the test case of what the code should generate. That is it extracts a json file which it feeds to the importer and a pickled dict which has what it expects. I'm not sure how to work with this setup.  What is the procedure for creating a new zip file to use for the tests?\nThanks.. > In the wiki we need to update that subfolders are also added as tags.\nOh right. Mis-interpreted your request. I'll do that once the PR is in shape.. > Download the zip and import to firefox. Add bookmarks to subfolders so you can test this change and export the bookmarks again. Update the relevant test case.\nThe bookmark files aren't what needs adjusting, it is the pickled dictionaries that need to be adjusted (to modify the tags with the tags per folder). I didn't see a script/call anywhere to create those. Is it just a matter of eyeballing the output of the import tests and if they look right pickle those dicts?\n. > Also, please check why Travis CI build is failing.\nTravis is failing because 2 of the tests are failing. See below...\n\nit may sound strange but I am not a pythonsia. Can you please explain in regular terms what the problem is?\n\nThe tests that are failing take bookmark files for each browser and compares them to expected results (dictionaries). Both the bookmark files and expected results are stored in zip files. The bookmark files are in the format for each respective browser (sqlite for firefix, json for chrome). The expected results are python dictionaries stored in a binary format that python can save to and load from disk, known as pickling. It is these pickled dictionaries (saved in that zip file) that need updating.\n. @rachmadaniHaryono Thanks! I'll look into merging that in and adopting it as soon as work lets up a bit.. Guess I took to long. Once I'm ready, I'll open a new pull request. I hope to have it ready this weekend.. Realized this PR closed as I had switch the work into a branch. Merged it back into my re-based master and reopened this PR to better keep the context.\nThe wiki/documentation change will be separate as, at least as far as I can find out, there is no way to include or do a pull request against the wiki.. Great, Thanks! Any idea on when you'll cut the next release?. ",
    "Beeblebrox-BSD": "Hello, please consider the following issues/ideas.\n\nBrowser integration through add-on: I don't think Bukubrow's Cargo.lock structure will work with *BSD OS, but don't quote me on that. Rusqlite will have to be a separate port, plus there needs to be a list of Depends under \"Building\".\n\nWish list suggestions (by order of importance):\n http front end so as to access BM's from tablet/phone (example: searx/webapp.py). The Rest API probably does this but documentation is missing?\n Scrapbook function: Preserve page or site, index it as special BM with option to not refresh (immutable).\n* User based authentication if needed, for multiple users from webapp interface. Probably difficult, as DB structure will need some modification, location of buku.sqlite becomes issue, and \"run-as user\" must be addressed?\nThese probably don't belong here, but I'll mention them anyway:\n PDF: Save single web page as pdf, then text search ability for saved/indexed pdfs.\n Note taking: If working on a specific topic, you want to jot down notes and place urls relevant to topic inside the notes.\n. Hi and thanks for the input.\nRe my PDF/Notes comment: Was only hoping to get some input on how to solve this.\n@rachmadaniHaryono suggestion looks like the exact thing I was hoping for - much thanks!\n\nPlease use the notes option and relevant tags.\n\nThat would be the reverse of what I'm trying to figure out.\nAs mentioned, it was a shot in the dark to see if any idea would surface.\n\nYou can add any bookmarks you want directly to buku from the browser\n\nYou're talking about key-binding + shell script here as I understand?\nDirect-access to the sqlite db would be a personal preference at read/review stage. I'll take it up on Bukubrow issues.\nHTTP server-side (Flask-Security) would be a better choice IMHO, probably has better credential check integration and one could define custom db path for each user from there so that Buku its self will not need modification as multi-user.\n@tom-i: I would suggest structuring it differently and NOT exposing your servers directly to internet unless you have a specific reason for public instances.\n Install some VPN software on device facing the internet (or forward the traffic from router to VPN server).\n Create self-signed certificates and install client certs to your laptop/tablet.\n* Connect to your home LAN through VPN (also means traffic gets encrypted) and access bukuserver as if you were resident on your LAN.\nThanks again & regards. ",
    "kirakrishnan": "Hi Jarun, I am newbie to opensource. Please give me beginner tasks. . @jarun I am interested in the items. I am very comfortable with sql and I have some hands-on experience in javascript. Please tell me little more about the task.. ",
    "T4P4N": "using urwid for frontend? argument interface is good but sometimes it's painful to edit bookmarks. i think it should be in todo list. . ",
    "DooDip": "Thank you! It works when I add it to the Dockerfile instead of during the build.\nI added this to the Dockerfile\n\"ENV BUKUSERVER_PER_PAGE=100\"\n. ",
    "biocyberman": "Yeah I thought about using Cpp too, but then somehow I got adventurous and used C++ :full_moon_with_face: The search works perfectly now. Thanks. ",
    "benoliver999": "Probably not related... but dmenu exits with status 1 when escape is pressed. I have tried set -o pipefail in the script but it doesn't exit.. Yes! Thank you!. ",
    "piovac": "That is not exactly what I did. The python 3.7 had issues with my atom+hydrogen installation so I switched to and pinned python 3.6.5. Buku was installed after. I will try to reinstall everything and let you know how it goes.. ",
    "dkiyatkin": "Thanks for feedback =)\nExample urls:\nhttp://4pda.ru/forum/index.php?showtopic=182463&st=1640#entry6044923\nhttps://www.google.ru/search?newwindow=1&safe=off&q=xkbcomp+alt+gr&oq=xkbcomp+alt+gr&gs_l=serp.3..33i21.28976559.28977886.0.28978017.6.6.0.0.0.0.167.668.0j5.5.0....0...1c.1.64.serp..1.2.311.06cSKPTLo18\nWith this line parser.feed(resp.data.decode('utf-8')) buku print this output:\n$ ./buku.py -u 21\nIndex 21: No title\n...\n$ ./buku.py -u 382\nIndex 382: No title\n...\nAnd titles don't changed.\nWith this line parser.feed(resp.data.decode(errors='replace')) buku print this output:\n```\n$ ./buku.py -u 21\nTitle: [xkbcomp alt gr - \ufffd\ufffd\ufffd\ufffd\ufffd \ufffd Google]\nIndex 21: updated\n\nxkbcomp alt gr - \ufffd\ufffd\ufffd\ufffd\ufffd \ufffd Google\nhttps://www.google.ru/search?newwindow=1&safe=off&q=xkbcomp+alt+gr&oq=xkbcomp+alt+gr&gs_l=serp.3..33i21.28976559.28977886.0.28978017.6.6.0.0.0.0.167.668.0j5.5.0....0...1c.1.64.serp..1.2.311.06cSKPTLo18\n   # 2018jul30,keys,other bookmarks\n\n\n\n~/code/install/Buku chardet-for-title*\n$ ./buku.py -u 382\nTitle: [Samsung GT-I5800 Galaxy 580 - \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd - 4PDA]\nIndex 382: updated\n\nSamsung GT-I5800 Galaxy 580 - \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd - 4PDA\nhttp://4pda.ru/forum/index.php?showtopic=182463&st=1640#entry6044923\n   # 2018jul30,imported,other bookmarks\n```\n\n\n\nSo, with my PR this examples works fine.\nAnother thing i found with double whitespaces:\n```\n$ ./buku.py -u 375\nTitle: [html.css in webkit/trunk/Source/WebCore/css     \u2013 WebKit]\nIndex 375: updated\n\n\nhtml.css in webkit/trunk/Source/WebCore/css     \u2013 WebKit\n\nhttp://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css\n   # 2018jul30,imported,other bookmarks\n Browser default behavior is replace all doulbe spaces. That why i changed last line in get_page_title() `return re.sub(' +',' ',parser.parsed_title)`. So, reallife example, web developer may paste in html something like that:\n\n\n    ${param1}\n\n${param2}\n\n\n```\n\n\nAnd he expect that browser show title without any double whitespace characters.. #297. ",
    "in-in": "Both sites have a separate meta tag with the charset attribute (<meta charset=\"UTF-8\">), but the title not recognized\nhttps://www.debuggex.com/\nhttp://wikemacs.org/wiki/Starter_Kits\n```bash\n~|\u21d2 buku -u 494   \n[ERROR] network_handler(): HTTPConnectionPool(host='wikemacs.org', port=80): Max retries exceeded with url: /wiki/Starter_Kits (Caused by ReadTimeoutError(\"HTTPConnectionPool(host='wikemacs.org', port=80): Read timed out. (read timeout=40)\",))\nIndex 494: No title\n\nStarter Kits - WikEmacs\nhttp://wikemacs.org/wiki/Starter_Kits\n   # emacs\n```\n\n\n\n```bash\n~|\u21d2 buku -u 367\n[ERROR] network_handler(): HTTPSConnectionPool(host='www.debuggex.com', port=443): Max retries exceeded with url: / (Caused by SSLError(SSLError(1, '[SSL: CERTIFICATE_VERIFY_FAILED] certificate verify failed (_ssl.c:833)'),))\nIndex 367: No title\n\nDebuggex: Online visual regex tester. JavaScript, Python, and PCRE.\nhttps://www.debuggex.com/\n   # dev-tool\n```\n\n\n\nFirefox don't show any certificate problem for debuggex.com\n\nbash\n~|\u21d2 pip show buku \nName: buku\nVersion: 3.8\nSummary: Bookmark manager like a text-based mini-web.\nHome-page: https://github.com/jarun/Buku\nAuthor: Arun Prakash Jana\nAuthor-email: engineerarun@gmail.com\nLicense: GPLv3\nLocation: /home/mint/.local/lib/python3.6/site-packages\nRequires: \nRequired-by:. ",
    "dakka2": "Then why bother adding the date to the tag?. ",
    "vredesbyyrd": "No problem. I removed any folders / urls that could be considered sensitive, and tried to import again to make sure it was not a particular url I had removed. Issue persists. I am not sure if there is a better way to share the bookmark file...but here is a link to it in my onedrive, you should just be able to download it. Any issues getting the file let me know please. Thanks for the help. \nEDIT:\nlink removed. \n. I am using buku-git from the aur. I just rebuilt it to make double sure I am up to date.... package is on the latest commit so all good there. I made sure permissions were correct on the vivaldi bookmark flle. It still refuses to import. Something funky must be going on. I am going to take a closer look at my python environment in the morning....though I am a stickler when it comes to keeping everything tidy so I cant imagine anything is off there. Since you were able to import fine...there must be something wrong on my end. Ill post when I find out more. Thank you for help.\n. OMG, uhg....I am going to have to swallow any ego I may have and admit user error on this one. So at some point I typed:  \nbuku -ai \nrather than\nbuku --ai\nNote to self, take a closer look when using shell completion while tired. Sorry for wasting your time. Regardless, thank you for all your work on this great tool. Closing. . ",
    "japorized": "Looks like a fix has been issued (some time ago, apparently). I shall close this issue while we await the fix to be publicized.. ",
    "szlin": "@jarun As I mentioned before [1], the bukuserver is excluded in Debian package due to DFSG violation.\nI suggest to add original javascript into it. If you agree with it, I can squeeze my time to send the patch.\n[1] https://github.com/jarun/Buku/commit/b3437a4bfbbe87093aad9ae5edd0a42171355992#commitcomment-29123671. @jarun Sorry for the delay, I've sent PR as a short-term solution.\nFor a long-term solution, I suggest to \n1. separate bukuserver to another git repository which depends on buku.\n2. use chart.js as a dependent library instead of using hard copy one.\nJust F.Y.R.. ",
    "alasdairdc": "If my understanding is correct I think the separate git repo may be to comply with DFSG.\nFrom the https://wiki.debian.org/Javascript/Policy in the linked https://github.com/jarun/Buku/commit/b3437a4bfbbe87093aad9ae5edd0a42171355992#commitcomment-29123671 if my understanding is correct the separate git repos are to comply with the Debian suggestions where\n\nit's preferable if you name the repository after the source package name (i.e. foo.js.git for foo.js). This isn't a hard requirement though. \n\nimplying:\n\nbukuserver/static/bukuserver/js/Chart.min.js should be generated at build time for bukuserver.deb (or should that be libjs-bukuserver.deb  where bukuserver.deb depends on libjs-bukuserver.deb)\n\n@szlin Is more knowledgeable regarding the Debian guidelines so should be able to provide further information (or correct my interpretation if im wrong :) ). No problem, was only a suggestion and thought may make transferring between devices easier.. ",
    "benjyiw": "@alasdairdc version control was a deal breaker for me. I'm a fan of Buku, so I found a work around to utilize Git as my version control. I initialized git in the data store directory (~/.local/share/buku/). Using git with a binary file sucks, but by using steps from here I was able to view diffs from commits, caveat is it's SQL syntax but that isn't too bad. . @tdehaeze i had a simple approach that i came up with in just a couple minutes. I put this in my shell's rc file:\nbuku() {\n    command buku $@\n    sh -c 'cd ~/.local/share/buku; if git status -s | grep -q -E \"^\\s+M\\s\"; then git commit -a -m \"autocommit $(date)\" 1>/dev/null && echo \"committed change\"; fi'\n}\nI am not automatically pushing, as I have a passphrase on my key, but that could be added to a solution like that with an additional && git push. . ",
    "tdehaeze": "@benjyiw Could you share your dotfiles related to that setup? Are you using something like gitwatch to automatically push to some repo?\nThanks. > @tdehaeze i had a simple approach that i came up with in just a couple minutes. I put this in my shell's rc file:\n\nbuku() {\n    command buku $@\n    sh -c 'cd ~/.local/share/buku; if git status -s | grep -q -E \"^\\s+M\\s\"; then git commit -a -m \"autocommit $(date)\" 1>/dev/null && echo \"committed change\"; fi'\n}\nI am not automatically pushing, as I have a passphrase on my key, but that could be added to a solution like that with an additional && git push.\n\nThanks for the tip. ",
    "ckolumbus": "you might want to check out Shaarli for production ready solution for publicly hosted internet service.\nI actually have both services running, buku and Shaarli, for different usage scenarios. @rthorntn \n\nThanks Chris, could you help me out with the reasons for using both, can you share the bookmark data between Baku & Shaarli?\n\nRegarding sharing: you could, but it's not implementd on either side. and i'm not sure whether this is necessary, at least in my case(see reason below)\nRegarding my reasons for using both:\nShaarli has a very good integration with other systems: you have firefox add ins, an android app, it can integrate with wallabag, and much more. This is all very nice for my private needs where my bookmarks are hosted on an hosted linux and have global protected r/w access from anywhere.\nFor use within my professional environment I cannot store internal addresses on outside systems, but I also cannot host an internal service. So Buku helps me here to store company internal bookmarks in an efficient way with \"enough\"  integration. The biggest benefit: it's browser independent as I'm using 3-4 browsers regularly. \nI'm currently developing plugins for buku and Shaarli to call bookmarks directly from Keypirinha. Buku is already working, shaarli integration is givining me some troubles. This allows me to call up any bookmark quite quickly and efficiently. Together with BrowserSelect I can define how to open each of these bookmarks then.\nAt the end I do have all my bookmarks at my fingertips but can keep my company information isolated. \nMaybe you can get some ideas on how to improve your bookmarks workflow :-)\n. @jarun I'm quite busy at the moment but i'll try to get a little design proposal done for review so that the security aspects are considered appropriately . for a quick hack solution: \nhttps://github.com/ckolumbus/Buku/commit/ba79c13ef1cd8cc21b9361f308c8dad10933826e. Hi @rachmadaniHaryono \nthanks for your comments, I'll create a PR.\nHere's a rational for the implementation\n * the access via current_app.config was modeled after the way how BUKUSERVER_PER_PAGE and BUKUSERVER_URL_RENDER_MODE was used. But you're right, access function is cleaner\n * access to bukudb in StatisticsView was modeled after BookmarkModelView: there bukudb was referenced via positional argument, additional ones (page_size) was then accessed (and removed) via kwargs \n * if the env var is not set, getenv returns None, which, when used for the ctor of BukuDb as dbfile parameter, triggers the default behaviour. Therefore I did not add any checks. \nPlease let me know your thought within the PR, then I can adjust accordingly!\n. @jarun I'll have a look. if this is one of the hot topics I could give it a try.\nNext thing for me would be Albert integration, so I can start my bookmarks as easily from my linux launcher as I can do already with Keypirinha on Windows :-).\n. @jarun misusing this PR: hier is buku support for Keypirinha, PR is out.. so it's just reproducing the import behaviour for another file format, right?\n. Does anyone haave a link to a schema defintion of this json format? I'd like to understand the fields, but can't find anything (easily) :-(. Work started feature branch,  first version behaves weird, import so far disabled (only console prints).\nDesign to be rethought: due to FF json structure, import follows more the auto-import implementations than the import_{db,md,org} scheme. Need to find out what's the best solution. \nAny feedback is welcome!\nP.S: i have a working stand-alone script  that parses correctly. yes, I know. sorry for expressing this wrongly. Maye you can have a look at the implementation. I can parse the json file hierarchically. But as said there is some problem with the integrated functionin buku, standalone parsing works fine. Some stupid mistake... i'll look for it tomorrow.. > Travis is failing. Please take a look.\nI saw it, but didn't have time immediately to fix everything :-). update is on it's way.\nBUT I still want to improve test coverage... some aspects are still missing. So plz wait with merging the PR\n. test should be ok now, but network handler test fails with unicode replacement error. maybe you can have a look. Hm, seems I can't remove the dot-not-merge label.  Any help is appreciated, with the label and the broken CI. > e: or i can pr direct to @ckolumbus branch\nmerged @rachmadaniHaryono fix\n. @jarun some clarifications:\n\nwhat do you mean by \"only the last level of tags\"? \nI thought that the '/' handling is as you describe: at least the idea was to use the FF folder structure as tags, i.e. folder \"My Bookmarks - Videos - Kids\" would be translated to \"/My Bookmarsk/Videos/Kids\".\n\nFix is checked in.. it all should be fixed with #344 now. @jarun ignoring main folder names should be implemented. please check. @jarun OK, first I was hunting ghost (an issue with my installation at home), only now I understand the real problem. My implementation ignores the root folder node and all of it's children. This includes the \"Other Bookmarks\". How would you like to differentiate between e.g. \"Bookmarks Menu\" and \"Other Bookmarks\". The names are locale dependent so I have a tough time filtering out \"Bookmarks Menu\" and \"Bookmarks Toolbar\", but not \"Other Bookmarks\" independent of the language.\n. I think the ignore pattern is hardcoded in the html export of FF. I'm still investigating. I also have a solution for include \"Other Bookmarks\" but exclude the other two, locale independent. there is \"root\" tag within the json that has a locale independent identifier. I'm trying to use this, seems to be clean way to filter on root bookmarks anyway.\n. @jarun \nResult of my investigation :-). only special handing due to html export behavior is the \"Bookmark Menu\" folder, which becomes an <h1> heading, html import only treats <h3> headings as possible parent folders / tags. \nBookmarks Toolbar is also tagged in the html import:\n```\n[DEBUG] keywords: ['Bookmarks Toolbar,2019Jan02']\n[DEBUG] parsed tags: [,Bookmarks Toolbar,2019Jan02,]\n11. Voyager\n\nhttp://voyagerlive.org/\n   # 2019jan02,bookmarks toolbar\n\n``\nSo only special treatment would beBookmarks Menu. Would this be OK?. @jarun please check, should be behaving exactly as html import now. OK, but frankly i'd prefer similar usage patterns foradd_viewfor Model and non-Model views. now you have to know whether it's a model view (and havebukudbas positional parameter) or an other view (withbukudbas named parameter). This IMHO is counter intuitive. \nI'ts not the hill to die on for me, but for my code I'd rather avoid this different usage patterns.. It doesn' t seem too much, I was just staying close to the initial implementation. I'm happy to add this :-)\nBut I'd again not check forNoneasBukuDbhandles this already.. That doesn't work here, at this stage we're outside of the app context, socurrent_app.configdoesn't resolve. . see the remark above onargsvskwargs`. fixed with 315d9c475df70. fixed with 315d9c475df70. ",
    "rthorntn": "Thanks Chris, could you help me out with the reasons for using both, can\nyou share the bookmark data between Baku & Shaarli?\nOn Thu., 13 Dec. 2018, 23:05 Chris Drexler <notifications@github.com wrote:\n\nyou might want to check out Shaarli https://github.com/shaarli/Shaarli\nfor production ready solution for publicly hosted internet service.\nI actually have both services running, buku and Shaarli, for different\nusage scenarios\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/jarun/Buku/issues/309#issuecomment-447137387, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AMKvwd2hIA0OtrP0Z50oRPVR7yb3-o3Cks5u4s85gaJpZM4WFEkP\n.\n. \n",
    "arcticicestudio": "\nI would prefer the word search term. Would you care to raise a PR for this?\n\nI'll see if there is some time on weekends to do it. If anyone else would like to grab this task: Feel free to do it :smile:\nAdding the predefined \u201egood first issue\u201c, \u201ehelp wanted\u201c and next month starting \u201eHacktoberfest\u201c issue labels might draw attention to it.. ",
    "cezhunter": "I did a similar project for school (tagging web pages for bookmark organization/categorization) and I discovered that Aylien and Google provide services that work wonders (topic modeling and keyword extraction) for something like this.. ",
    "ktinkerer": "I haven't tried it on python 3.6, I'm using bash, I've just tried it again and I am getting '\\\\btest\\\\b' sorry it must have got lost copying it from the terminal! \nAnything else I can do to find out what is causing it?. I was using buku -s to search, I get the same with or without the  -s.. I've been doing some testing and I'm pretty sure it's a particular record causing the error, it seems that the regexp function at line 3985 is for being passed None as the item for one of the records causing the error. . That was it, I deleted the entry where it was failing and it works now. Thanks for your quick help!. I originally imported a html bookmark file, I've attached the offending entry, just tried reimporting this file and it causes the same error. (Renamed .txt as github won't let me attach .html!)\nfails.txt\n. OK I'll test it now. That's fixed it!. ",
    "Airgunster": "@jarun, Also got exactly the same issue (and got it fixed with latest fix from Master, thanks!). Do you plan to release a new version of buku which will include the fix?\nThanks a lot in advance!. ",
    "humCopper": "Fix by adding\n\nexport BROWSER=\"\"  \n\nto .zshrc or .bashrc. ",
    "buma": "Strange I didn't noticed that tag already exists. As far as I can see date tag is generated on import date. So all imported bookmarks have the same tag. My change adds date tags for when bookmark was added to chrome. So each bookmark has different date tag.\nIf my change is wanted I'll remove video tag and add tests.. ",
    "msalini": "Arun,\nI re-installed everything using APT, and the deb package, restarted the machine ... and things works now! Looks like this time my linux just needed a good old restart to put things back in order.\nSorry for disturbing ... I guess we can close this issue as resolved.\nM\n. ",
    "Krazybug": "Ok Thanks. I'll try to work on it on my free time and raise a PR.. ",
    "garfieldnate": "You are right. It works fine with Dropbox. pCloud has problems with symlinks.\nSince I was able to use the commands you sent immediately, I added them to the wiki page.\nI was not able to understand what is meant by this line in the wiki:\n\nIf you prefer to run it manually from time to time:\n\nbuku -e ~/Dropbox/Public/bookmarks.db\n\nThe documentation says that -e will export the database file. Won't this command just read the entire database from Dropbox and then write it back to the same location?\nAlso, the --db option is very helpful. Why not document it?. Thanks for your help! Great tool.. ",
    "Nevrage": "I understand your will to not bloat the tool and respect it.\nThe regex search can be coupled with the tag one, this will do for now, otherwise a trigger on the db is the next best option.\nThanks for considering it. Hey thanks for answering yeah, I tried. Buku says zero entries.\nI was wondering if there was a more sqlite way of doing it.\nLooking at different backup this confirms what I suspected a while ago: the timestamp are not correct . Thanks for looking into it!\nI'll share the solution if I ever find one, you can close the issue.. Thanks\nAs I mentioned my buku database doesn't get its timestamp updated all the time which makes syncing a bit harder.\nThis is a completely different issue though and it could be my system even if it happened on different machines and OS's.\nI'll make sure to write up a ticket once I have repro steps unless it isn't an issue. ",
    "invl": "@rachmadaniHaryono\nno, it cannot be simplified using OR clause because NoOptionError will be raised.. ",
    "1xPdd": "\nYou can do it manually though. With your example, search domain.tld with the option --deep which would also search URLs. Then you can delete the redundant ones.\n\nSorry if I wasn't clear: manual is fine. I wouldn't want Buku to slow down. But my problem is (at least I don't know how) to do this for 5000 bookmarks, at least 25% of which I'd guess are near duplicates. Is it possible to script a check for these somehow?\n. Cool, this helps, thanks.\n\nOr, for all bookmarks:\nbuku -p -f 1 | sort -k 2\nThen start picking from the first frequent domain.\n\nDo you have any idea how I might deal with the http/https redundancies?\n\nOn a different note, when you say I'm a big fan consider awarding a star on GitHub to the project. ;)\n\nDone!\n. > It would be of great help to other users if you can share your final script.\nWill do. Though no promises that it won't destroy computers. My scripting skills are all but negligible but I'll see if I can come up with something.. ",
    "rookiejet": "A \"-r\" reverse sort option for import (and export) could be useful to maintain chronology.. Date added.. Entry/record order could work as well (atleast it is enough for my use case). Pinboard export maintains chronology of entries in descending order of most recent, and when imported to buku it is reversed.. So would bookmark entry order falls under obsolete records? I don't follow. Buku already records and surfaces that. Sorry, I may have miscommunicated what I intended.. ",
    "jabagawee": "Thoughts on adding type hints?\n1: https://www.python.org/dev/peps/pep-0484/. What's the best way to chat? Seems like the gitter.im instance is inactive, and I'm not sure what way works best for you.. Test runtime used to hover around 16 minutes. With this change, it goes down to 11 minutes and 38 seconds.. I can make this cleaner. I have a good split in my own branch, but I wanted to find a good way to submit one PR at a time that was easily reviewable and understandable.. A lot of it comes down to the entanglement of code that would lead to circular dependencies, so there would be refactors that actually move methods in and out of classes. I might end up creating issues / PRs that explain each entanglement to see if they should be moved around.. Applies to #360 . From the Python 2 and [Python 3][2] docs (emphasis my own):\n\nThe __init__.py files are required to make Python treat the directories as containing packages; this is done to prevent directories with a common name, such as string, from unintentionally hiding valid modules that occur later on the module search path. In the simplest case, __init__.py can just be an empty file, but it can also execute initialization code for the package or set the __all__ variable, described later.\n\nIf we wish to split the buku script into multiple files that reference each other (as mentioned in #349), we need to place it in a package. There will also be follow-up PRs that split each class into its own code, but I did not want to make all of these changes, which would take up thousands of lines and a lot of complexity, all in one PR.\nThe smoothest way to create this package would be to move everything into the __init__.py file as a temporary first step. Command line users of the buku tool can still use it, as the setup.py file defines the entry point to be buku:main, which points to \"the main function exported by the buku import.\" The buku import in this case is the package, and the main function is exported by the new __init__.py. Programmatic users can still do import buku or from buku import ... with this change.\n[2]: https://docs.python.org/3/tutorial/modules.html#packages. The way I was using it, it could be helpful to use a util.py for miscellaneous functions or a main.py. The reason I am not splitting things up heavily yet is because of #363 . Sure sounds good.. ",
    "sglavoie": "@rachmadaniHaryono, here are the errors that are no longer found with pylint:\n\n\nno-member\n\nanomalous-backslash-in-string\nbad-continuation\nbad-whitespace\nbare-except\n~fixme~ \u2192 Not true (lines with TODO are present)\nmisplaced-comparison-constant\nmissing-final-newline\nno-else-return\nsuperfluous-parens\ntoo-many-boolean-expressions\nwrong-import-order\n\nNow, I must say there was one last place that generated a \"bad-continuation\" warning. The right curly brace on line 4111 in the main file buku needed to be aligned with the letter r on line 4105. I just pushed another version of my commit including that change, so this is a warning that's no longer present.\nI hope this is what you were referring to! Otherwise, please let me know and I will have another look.. Thank you for your feedback! I will make sure to use different branches next time!\nI had to modify a few more files to fix the errors in the previous build, but in the end the build passed and the following lines were successfully removed in .pylintrc:\n\nanomalous-backslash-in-string\nbad-continuation\nbad-whitespace\nbare-except\nmisplaced-comparison-constant\nmissing-final-newline\nno-else-return\n\nno-member\n\nsuperfluous-parens\ntoo-many-boolean-expressions\nwrong-import-order\n. @jarun: Yes, I did some changes a few minutes ago in additional files in order to be able to remove all the lines mentioned in .pylintrc, I won't be touching anything else for now.. Thank you for your trust and the opportunity! I haven't look at the code in depth up to know, but I will do so soon enough from January 2nd (I won't be there because of holidays...) and I will let you know if I feel confident to make the necessary changes.\n\nIf nobody starts working on that feature before I have a chance to do it, I will be pleased to give it a go, but I won't confirm anything right now since I won't be available for a couple of days.\nIn any case, I hope you are all having a good time! All the best to you and Buku for the coming year!. @jarun, Sorry to answer so late. Right now, I am studying for a degree in Computer Science and I found out rather quickly that it's going to be complicated for me to work diligently on Buku. I will keep watching the project and if you are open to receive other small incremental changes instead of sudden bursts of inspiration, that could be a good compromise for now. Let me know if that's OK with you! Hopefully I will get more experience with this degree and be able to contribute better to this project at a later point in time.. Done!. @jarun I will gladly have a look at it! Since the main file is getting quite huge (5385 lines at the moment), what do you think about splitting it into various other files? Like so \u2192\n\nLines 92 to 2784 in one file for classes.\nLines 2787 to 4358 in one file for helper functions.\nLines 4360 to 4634 in another one for editor mode functions.\nLines 4636 to the end would remain there as this is the main function.\n\nDo you reckon that would result in too many files or is this approach OK with you?\nEdit: If you believe this would be good, a solution could be to create those new files and separate them in a folder called helpers. How about that?. Thank you both for your trust. I will make sure to test everything on my end one little change at a time as to minimize the introduction of errors and will let you know when everything is done, which I hope will be soon enough!. Hi @jarun ! Yes of course, go ahead. I will gladly get more involved in the near future, but you are spot on: I can't participate much right now. Thank you for asking, by the way!. ",
    "lisinaner": "when use  command, like \"b -r \u7a0b\u5e8f\u5458\",it support to Chinese.. ",
    "plum": "I'm sorry, I mean redirecting  output  to a file, as suggested  - not writing to the database -  for subsequent parsing, as in:\nbuku -u --tacit >> buku_dbupdate.txt\nThat  is how I got the example given above. Output to console merely gave a list of 404's  without indices, whereas output  redirected to file gave a list of indices with 'No Title' but no indication of 404's.. OK, shall do. I'll  return to confirm success.  Good man.\nJohn. Ok, tested the update and all seems to work well on update and writing to file. Excellent.\nincidentally, I had to install the git version outside of the aur package repository system, becuase that one failed to compile.. With buku -u  --tacit  my user-defined tags were added to from the title. I have 5,000 urls in the DB. That gave me a list of tags almost as long as the indices!\nFrom my reading of the man page, this is not supposed to happen, as I understand it.\nHow could this have happened, and what could can I do about it? (it's OK I have a backup).\nI'll test again on a smaller set.\n. This is the orignal test scheme:\n$ buku -t\n     1. battery (19)\n     2. charger (19)\n     3. electronics (19)\nAnd following $buku -d tacit, \n$\n buku -t\n     1. 12v (1)\n     2. 6v (1)\n     3. android apps (1)\n     4. battery (19)\n     5. charger (19)\n     6. electronics (19)\n     7. free apps (1)\n     8. free games (1)\n     9. free software (1)\n    10. freeware software (1)\n    11. linux software (1)\n    12. motorbike battery charger (1)\n    13. online apps (1)\n    14. os x software (1)\n    15. scooter battery charger (1)\n    16. windows software (1)\n. Thanks.\nDoes that then mean that,\n1, I cannot update the whole database without losing user-defined tags?\n2. I can update a range of bookmarks and keep user-defined tags?. Also, can you give an example of how  I can query a user-defined tag and update that set, wihtout losing the tag? \n  - because without that facility, I cannot continue to usefully use buku, whereas otherwise it's brilliant.\nThanks, John. yes true, but as you can see from the results given above, with a large collection especially, the recorded tags are chaotic and --stag returns chaotic results; Tags appended from titles do not necessarily give meaning to the user. In the example above I get 'windows' software' , 'free sofware' etc, for what is in fact a simple electronics power board. Tghe tags multiply insanely, and  I cannot see to select my user-defined titles. The imposed tags are an obfuscation.\n`It really makes no sense because,   in any case titles remain as an option to search - so the update that way by default is useless, and chaotic.. Can you give an example of how I can query a user-defined tag and update that set, without losing the tag?\n. I tried:\nbuku -u  --stag electronics\nbut I get the same result with same extra tags appended.. OK. Thanks.. Checking out the line items, I found it as: Add option --preserve to ignore specific fields during auto-update [see API update_rec() and issue #327].\nI myself am not ably prepared to tackle this issue with a pull request - I think its out of my depth without significant advance preparation, it being outside my programming scope at this time.\nI can give you a further  idea of how, without it a user runs into significant trouble:\nupdating a subset of my urls, with 100 urls and 73 user-defined tags results in 5,020 additional tags form metadata! Many are over-generalised, meaningless, or rubbish. These render the tag list almost useless. \nIt may be born in mind, and It occurred to me that, within decent computer programming sites, metadata is entered carfeully and titles too. Words have to be very spcific to convey accurate meaning in programming. \nIn contrast, in  fields of social, cultural human interest,  politics and poetry enter the descptions, where words are politicised, meanings stretched etc.. Also,  webmasters endeavour to write in 'catchall'  words hoping to grab attention in search results. And so forth.\nPrivate or sole-use computers tend to combine computing interests with others in the more political-social fileds, and their bookmarks will reflect this. They need to retain purely user-defined tags.\nRegards,\nJohn. Thanks for kind consideration Jarun.  I ran the latest from git today with  success regarding keeping user-defined tags when updating selected url as follows\n$buku -u XXXX  \nThe command above updates the title but leaves the user-defined tags in place without any additions from the hosted web page.\nThe behaviour is particularly useful. You say the 'tags of my bookmarks have gone for a toss'; i guess you mean you have gone for this behaviour at the expense of any method to fetch tags from remote page in any way (at this time). That's a sacrifice,  know, but possibly the best way forward; a method could now be devised to run with specific option to add to tags form remote page, rather than by default.\nFurther Observation:\nAm I right in beleiving that titles cannot be made immune from updating, without re-entering a user-defind title? If so, that's not so bad, all in all, as opposed to the case with tags. Example: \nWordpress returns the title of 'Wordpress.com' for any particluar blog's  stats page,  nothing else. If desired as a help, a user may define the  blog name in the title, but that gets lost on update. However, it does remain in the url, so no real hardship there.\nTHanks,\nJOhn\n. Sure. Here:\nhttps://wordpress.com/stats/jakbop.wordpress.com \nYes, I can mark it as immutable.  I dont fully understand that though. During a 'web fetch' with the update option '-u' to 'refresh' , and with the immutable option '-N' for a particulalar url, rather than batch, what if anything gets 'updated'/'refreshed'. \n[NOTE: I am supposing 'auto-refresh' in the man pages under  '--immutable' EDIT OPTION refers to 'update fields'  mentioned in '--update' GENERAL OPTION]. Yes, that's true the home page when updated returns a nice, fully  descriptive title, in this case. That is, a page for public view. The admin stats page for the blog (useful for admins!) doesn't... and so this is just one example of how titles and their usefulness vary from one server impplementation to another.  It's a small point - an observation. \n~As I say, I think the tags behaviour mow, is much better for general buku usability, as per previous observations concerning tags.  Titles, and urls, fetched from web behave much better, are more useful as is.. ",
    "ranebrown": "Here you go:\nansicolor==0.2.6\ncertifi==2018.11.29\nchardet==3.0.4\ncycler==0.10.0\ndocopt==0.6.2\nenumerate-markdown==0.0.8\nidna==2.8\nisort==4.3.4\nJinja2==2.10\nkiwisolver==1.0.1\nMarkdown==3.0.1\nMarkupSafe==1.1.0\nmatplotlib==3.0.2\nnumpy==1.15.4\nPillow==5.4.1\nPygments==2.3.1\npyparsing==2.3.0\npython-dateutil==2.7.5\npytz==2018.5\nPyYAML==3.13\nranger-fm==1.9.2\nrequests==2.21.0\nsix==1.11.0\ntasklib==1.1.0\ntzlocal==1.5.1\nUnidecode==1.0.23\nurllib3==1.24.1\nvim-vint==0.3.19\nvimwiki-markdown==0.1.1. @rachmadaniHaryono any updates?. @rachmadaniHaryono I tested your changes and I'm still getting ssl errors. For reference I set the path to my ca cert for a few other tools like this:\nsh\nalias wget='wget --ca-certificate=\"<path_to_ca_cert>\"'\ngit config http.sslCAInfo \"<path_to_ca_cert>\" \nIs it possible the certifi.where() result needs appended to the custom certificate?. I think the issue is that the change you made only applies to the --shorten operation and not --update. I was previously only testing --update which is not working.\nI checked that --shorten works and adding the print line prints out the path to my certificate.\nWill you be able to make the same change apply to --update and any other operation that sends out a request to the website? I think this also occurs when you first add a new bookmark.\nThanks!. ",
    "aodj": "After quitting Firefox and rerunning it, the auto-import completed successfully.. ",
    "tikkol": "What should be the column name for the urls in the table of my db ?. ",
    "leongm": "Thank you for your answer. But still not the solution\nbuku --tacit -d prompts the user and buku --tacit --ai does not allow me to answer 'no' to chromium bookmark import and 'yes' to firefox bookmarks . about -d : yes it drops the database but it is no more destructive than usual commands such as rm. The latter defaults as an interactive command prompting the user to confirm the action ; but it has a --force flag allowing the user to bypass confirmation. buku -d could have the same behavior. Moreover, as buku imports bookmarks that are otherwise stored in various browser databases, bookmarks can still be recovered with buku --ai in case of unwanted buku -d --force\n\nbuku --tacit --ai is a one-time command. I don't see the issue\n\nAssume that I want to import only firefox boorkmarks (not chromium). How can I do this with buku --tacit --ai?\nAnyway, I managed to find a solution to my issue based on expect. I use the following script to first backup and then drop the current buku database and create and populate a new buku db with firefox bookmarks\nI excecute the following script \n```\n!/bin/sh\nBINDIR=$HOME/bin\ncp $HOME/.local/share/buku/bookmarks.db $HOME/.local/share/buku/bookmarks_$(date +%Y_%m_%d_%H_%M_%S).db\nrm -f $HOME/.local/share/buku/bookmarks.db\nexec $BINDIR/bukuexpect.sh\n``\nthat callsbukuexpect.sh`\n```\n!/usr/bin/expect -f\nbukuexpect.sh : automatic answers to buku --ai prompts\nspawn buku -d\nexpect \"Remove ALL bookmarks? (y/n):\"\nsend \"y\\r\"\nspawn buku --ai\nexpect \"Add parent folder names as tags? (y/n):\"\nsend \"y\\r\"\nexpect \"Import bookmarks from google chrome? (y/n):\"\nsend \"n\\r\"\nexpect \"Import bookmarks from chromium? (y/n):\"\nsend \"n\\r\"\nexpect \"Import bookmarks from Firefox? (y/n):\"\nsend \"y\\r\"\nexpect eof\n```\nThanks for your help. And again : buku is great :). "
}