{
    "venomous0x": "Not really a comprehensive port, it was just a quick poc. It's up to you guys to fork/port/extend.\n. Last time we checked with Windows Phone, it was the \"DeviceUniqueId\" property.\n. Are you sure about your username ? \nFor windows phone it will be reversed , then md5'ed  unqiue id obtained by DeviceExtendedProperties.GetValue(\"DeviceUniqueId\")\n. @ericblade, cheers :)\n. timestamp + dash + any number\nnote that number after dash will only be valid once , means either timestamp or number will be increased after sending\ni.e : 1338320323-1 .. 1338320323-2 .. 1338320323-3\n. One of the vital testing points was the ability to send in Arabic. We're sure it works.\n. Practically the same, although looks fancy ;)\n. @cdesjardins, we'd merge your version, proceed with a pull request. Then maybe we'll incorporate some modifications as well :)\n. We had this changed in a previous pull request (https://github.com/venomous0x/WhatsAPI/pull/30/files) because some users faced login issues. Before merging this request, is it working with everybody? just to confirm...\n. Added in the last merge, thanks @isseu for pointing put and @Phhere for issuing a pull-request.\n. ",
    "MHaendel": "This should be similar to the iPhones UDID. Neither IMEI is working there.\n. I know my Username is eg 4917600000000.\nI extracted the methods out of the Source to get the original behaviour:\nstring pass = MD5Core.GetHashString(Enumerable.ToArray(Enumerable.Reverse(Enumerable.Cast(StringToByteArray(textBox1.Text)))));\n. private String Authenticate(String Nonce)\n        {\n```\n        string NC = \"00000001\";\n        string CNonce = \"e129f27c-5103-5c5c-844b-cdf0a15e160d\";\n    MemoryStream memoryStream = new MemoryStream();\n    memoryStream.Write(this.Md5Digest(Encoding.UTF8.GetBytes(string.Concat(new string[]\n        {\n            Program.User,\n            \":\",\n            Program.Realm,\n            \":\",\n            Program.Password\n        }))), 0, this.Md5Digest(Encoding.UTF8.GetBytes(string.Concat(new string[]\n        {\n            Program.User,\n            \":\",\n            Program.Realm,\n            \":\",\n            Program.Password\n        }))).Length);\n    byte[] bytes = Encoding.UTF8.GetBytes(\":\" + Nonce + \":\" + CNonce);\n    memoryStream.Write(bytes, 0, bytes.Length);\n    string Digest_Uri = \"xmpp/\" + Program.Realm;\n    byte[] array = new byte[memoryStream.Length];\n    Array.Copy(memoryStream.GetBuffer(), array, (int)memoryStream.Length);\n    string A2 = \"AUTHENTICATE:\" + Digest_Uri;\n    string text5 = string.Concat(new string[]\n        {\n            this.BytesToHex(this.Md5Digest(array)),\n            \":\",\n            Nonce,\n            \":\",\n            NC,\n            \":\",\n            CNonce,\n            \":auth:\",\n            this.BytesToHex(this.Md5Digest(Encoding.UTF8.GetBytes(A2)))\n        });\n    string password = this.BytesToHex(this.Md5Digest(Encoding.UTF8.GetBytes(text5)));\n    StringBuilder stringBuilder = new StringBuilder();\n    stringBuilder.Append(\"response=\");\n    stringBuilder.Append(password);\n    stringBuilder.Append(\",cnonce=\\\"\");\n    stringBuilder.Append(CNonce);\n    stringBuilder.Append(\"\\\",username=\\\"\");\n    stringBuilder.Append(Program.User);\n    stringBuilder.Append(\"\\\"\");\n    Console.WriteLine(stringBuilder.ToString());\n    return stringBuilder.ToString();\n}\n\n```\nThis is the Method I use for building the response.\n. Seems the password generation in iOS is a bit different. Not sure what it could be though...\n. Check the PHP Version, I think i = time() - 1\n. This API uses an outdated protocol.\n. Seems the iphone password differs. \n\nbeeNetworks GmbH\nBrauerweg 10 / 26419 Schortens\nhttp://www.beeNetworks.net\nGesch\u00e4ftsf\u00fchrer: Sebastian Constapel\nhttp://sebastianconstapel.de\nTelefon: + 49 151 588 222 72\nSteuernummer: 70/200/46178\nUstID: DE265158811\nAmtsgericht Oldenburg HRB 203417\nAm 31.05.2012 um 09:55 schrieb \"xTraXx\" reply@reply.github.com:\n\nYea the PHP script is working! :D\n(just used usb webserver)\nrequire \"whatsapp.v2.php\";\n// DEMO OF USAGE\n$wa = new WhatsApp(\"your number\", \"pass\");\n$wa->Connect();\n$wa->Login();\n$wa->Message(time().\"-1\",\"phonenumber\", \"message\");\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/4#issuecomment-6029920\n. ```\npublic Bundle confirmCredentials(AccountAuthenticatorResponse paramAccountAuthenticatorResponse, Account                paramAccount, Bundle paramBundle)\n  {\n    q8.b(z[8]);\n    return null;\n  }\n\npublic Bundle getAuthToken(AccountAuthenticatorResponse paramAccountAuthenticatorResponse, Account     paramAccount, String paramString, Bundle paramBundle)\n    throws NetworkErrorException\n  {\n    q8.b(z[4]);\n    return null;\n  }\npublic String getAuthTokenLabel(String paramString)\n  {\n    q8.b(z[7]);\n    return null;\n  }\n```\nFor newest Android Version\n. ",
    "Fl0ri4n": "Login doesn't work for me, too.\nNot sure if the password is generated in a different way on iOS or if the python script isn't working properly on OSX, or if I'm missing something else...\nThat's what I do in whatsapi.py:\nJID = \"49172xxxxxxx\"\nwa_pass = wa_functions.encryptPassword(\"xxxxxxxxxxxxxxx\")\nstart(JID, wa_pass)\nsendMessage(\"1\", \"49xxxxxxxxxx\", \"Test!!\")\nAt the end of sendMessage() I just get \"Last read ===> ''\"\nHow can I tell if the login/password is wrong, or if its a different problem? There are no errors and \"s.recv(1024)\" doesn't give me anything...\n. ",
    "xTraXx": "Try the PHP script, python wasn't working for me too.\n. I did this and it's still not working:\nstart(\"Countrycode + my phone number\", \"md5hashed(reversed EMEI)\")\nsendMessage(str(int(time.time())) + \"-1\", \"Countrycode + receiver phone number\", \"Does it work?\")\nThe script output: Last read ===> '\\x00+\\xf8\\x08H8\\xfa\\xfc\\x0bPHONENUMBER\\x8aC\\x05\\xa2/\\xf8\\x01\\xf8\\x06/\\x1d\\xfc\\x03404\\xa2\\x18\\xf8\\x01\\xf8\\x03J\\xbd\\xa9'\nSo it does something, but I didn't receive the message. (Note that I got this output also with i = 1 or 2 instead of the timestamp)\n. Uhm the sending mechanism isn't working yet? Or am I doing something wrong?\n. Yea the PHP script is working! :D\n(just used usb webserver)\nrequire \"whatsapp.v2.php\";\n// DEMO OF USAGE\n$wa = new WhatsApp(\"your number\", \"pass\");\n$wa->Connect();\n$wa->Login();\n$wa->Message(time().\"-1\",\"phonenumber\", \"message\");\n. Yea, but try the php version, the python script doesn't work for me.\nUDID --> reverse ---> md5\nBTW can you send me a packet capture file (wireshark) of a login + send and receive message of whatsapp?(So just send an message to yourself). Because the packet structure of android seems to be different and this API is based on an iPhone.\nI'm also dutch btw ^^,\n. In principe moet dat kloppen, ik  heb alleen geen functie gebruikt, maar gewoon zelf de string omgedraaid en gehashed, maar dat zou niet uit moeten maken lijkt me.\n//\nThat should be right, but I didn't use any functions, I just reversed the string and then hashed it manually, but that shouldn't be the problem.\n. yea\n. The name is in this line:\n$next = \"\\x00\\x12\\xf8\\x05\\x74\\xa2\\xa3\\x61\\xfc\\x0a\\x41\\x68\\x6d\\x65\\x64\\x20\\x4d\\x6f\\x68\\x64\\x00\\x15\\xf8\\x06\\x48\\x43\\x05\\xa2\\x3a\\xf8\\x01\\xf8\\x04\\x7b\\xbd\\x4d\\xf8\\x01\\xf8\\x03\\x55\\x61\\x24\\x00\\x12\\xf8\\x08\\x48\\x43\\xfc\\x01\\x32\\xa2\\x3a\\xa0\\x8a\\xf8\\x01\\xf8\\x03\\x1f\\xbd\\xb1\";\nAhmed Mohd: \\x41\\x68\\x6d\\x65\\x64\\x20\\x4d\\x6f\\x68\\x64   (Hex-->String will give ahmed mohd)\n. You also have to send a ping, and when you get the \"delivered at client\" message you have to send a confirmation back. If you don't do that the server will send that message over and over when you relogin.\n. Don't know if there is something like wireshark for iPhone?\n. Are you sure this is correct? (I can't get it to work)\n. Oke, then I'll try again.\n. function MessageReceived($msg_length,$to_length,$to,$msgid_length,$msgid){\n        $content = \"\\x00$msg_length\";\n        $content .= \"\\xf8\\x08\\x5d\\xa0\\xfa\\xfc$to_length\";\n        $content .=$to;\n        $content .= \"x8a\\xa2\\x1b\\x43\\xfc$msgid_length\";\n        $content .= $msgid;\n        $content .= \"\\xf8\\x01\\xf8\\x03\\x7f\\xbd\\xad\";\n        $this->send($content);\n    }\nWhat am I doing wrong? (Normally I don't work with php, so maybe a dumb mistake?)\n. I just took the length which I receive. \n$msg = $this->parse_received_message($v);\n        echo json_encode($msg); // Do something with the message here ?\n$this->MessageReceived($msg['length'],$msg['from_number_length'],$msg['from_number'],$msg['message_id_length'],$msg['message_id']);\n. Thx, it's working now :D\n. Oh oke, I see hehe. \n. BTW, did you port this API to C# or do you use this API (PHP) with C#?\n. You can change iPhone-2.6.9-5222 to iPhone-2.8.2-5222.\n. PHP version is working fine. As for the password, reverse your IMEI and then get the md5 hash of it. (e.g. IMEI: 1234567890  --> 0987654321  --> md5(0987654321) = password\n. Change it to iPhone-2.8.2-5222\n. ",
    "onderweg": "Password should be MD5 of reversed UDID on the iphone, but i can't get it to work either.\n. I have the same issue. Can't login with iPhone credentials (password = md5 of reversed udid)\n. ",
    "mobilipia": "Can anyone help me with working code for iphone. I did as adviced reversed my udid and did an md5 hash for password but it returns nothing. It does not login.\n. Can we resolve this. It seems they fix the hole.\n. Anyone fixed it yet?\n. Thanks it works. I confirm its the first 2 bytes in Login function\n. You are the best  vkotovv. Thanks.\n. I think it was just a server upgrade.It affected mobile devices too. But seems all is back up.\n. @jean151515 Kindly Upload the entire packet capture. I want to compare with what have done on my droid.\n. @kerby82 Please send the packet capture to me. I can reverse engineer. Start the capture before whatsapp is started.\n. @Zanooda am sure that old nokia(N900) client wont work again.\n. Really guys i dont think they changed much. Its the magic bytes but am sure they changed more than 2 bytes this time around. Does anyone have packet sniff from another device(say iphone). I was able to discover some byte changes in my droid sniff but need another device to compare.\n. @beldar I think http://websapp.net/  is using an app on device.\n. @hijacker2k3 would be appreciated. Please upload to pastebin the sniffed packets.\n. @hijacker2k3 can u send more data. Try stopping whatsapp completely and start the sniffer before starting whatsapp. Possibly send a message or two.\n. they have changed authentication.\n. ",
    "ericblade": "Seems that there's still quite a bit of stuff missing.  I haven't used the official WhatsApp app yet (don't have any phones that will run it, and it doesn't seem to want to work on tablets), but it seems that the server is expecting some kind of response in regards to receiving a message, to notify it that you've received it, as well as needing to figure out how to parse all the bytes that we don't know what they are ...\n. https://github.com/ericblade/node-wa\nGood luck.\n. According to logging in on the Android app, only Windows Phone and iOS WA apps use that field.  But, yeah, I was going to try to figure out which byte that was.  Nice to leave your signature in, Ahmed, but it is visible to iOS and WP users :)\n. Yeah, I've done some figuring out of a lot of the stuff on the incoming side, coming to the conclusion that a few others have, that the comm is done via some kind of binary-coded-tokenized-XMPP.\nIt looks like 0xfc == 252, assuming incoming and outgoing use the same tokenization, 0xfc should be followed by an 8-bit length indicator, then a string.  \n0x74 = presence, 0xa2 = type, 0xa3 = unavailable, 0x61 = name, 0xfc = start-of-string-length-<-255, length-byte=0x0a, followed by the next ten bytes should decode to \"Ahmed Mohd\".  In xml, this would read something like\npresence type=\"unavailable\" name=\"Ahmed Mohd\" /\n. Messages are sending fine for me from a PHP based web server.\n. That's what I see if I use an incorrect login or password, it'll halt for several seconds, and then disconnect.\n. Looks like that did it, thank you.  Now to figure out why messages sometimes don't send at all, and other times I can send tons of them.\n. Looks like they've done something to the login process, node-wa is getting kicked out almost immediately after sending the first few commands.\n. My test accounts received a SMS message about 5 hours ago that simply said \"Whatsapp\", and then the accounts died. I get \"\" as a response to logging in.  Not sure what's going on.\n. that's \"not-authorized\" as a response\n. maybe we could keep -one- issue instead of opening a new one for every person who can't login, which is pretty much everyone? :)\nThe connection is being dropped, because the authentication system apparently has changed.\n. hmm. still getting back not-authorized, with a connection drop. have re-registered. :-S\n. register doesn't return OK if the password is valid or mismatch if the password is wrong, register -sets- your password.\nYou want \"exists\" to check if the phonenumber and udid are registered.\n. apparently, it changed from 0x01-0x00 to 0x00-0x04 and now to 0x01-0x01\n. You can't be connected to a single WA account more than one time.\n. Well, if both devices automatically reconnect, you're going to have lots of issues. :D\n. I believe that there is an official XMPP spec for attempting reconnection delays, or at least there's advice in there on it. \u00a0-- Sent from my HP TouchPadOn Sep 14, 2012 5:33 AM, spookyman notifications@github.com wrote: @celevra very good idea - having an definable auto reconnect (maybe with a defineable delay between the attempts).\nthe new version of the whatsapp.php (xml) reports the disconnection !!\n\u2014\n          Reply to this email directly or view it on GitHub.\n. Although it does look like device types are in the known dictionary entries, I haven't located any situation where they are used for anything .. Other than the lookups for the registration rest calls-- Sent from my HP TouchPadOn Sep 14, 2012 9:55 AM, kodemonk notifications@github.com wrote: Hi,\nDoes anyone know if there is anyway I can query Whatsapp for the device type (Android, Iphone, WM, BB etc...) given a telephone number? \nThanks very much in advance\nGreat job!\nBest Regards\nAlex\n\u2014\n          Reply to this email directly or view it on GitHub.\n. The token is the MD5 of: a static string (which is different in each client's implementation, apparently), combined with the SHA1 of the app executeable, combined with the phone number.  My guess is that they store the SHA1 of all of the released executeables in a table along with the static string, and then take the passed in registration phone number, and rebuild that MD5 on their end before responding to the request. If that matches something that is in their table, then it goes through, otherwise you get either a \"success\" response with no code ever sent, or you get a \"fail-too-many\" response.\n. What do you mean \"find a way to forward messages\"?  How would you like to forward them?\n. If you don't send the message received packet then it may try resending it when you login again. I think it only does this if you just connect, download messages, and disconnect, without sending any other commands, otherwise I think it assumes you got the messages-- Sent from my HP Pre3On Sep 18, 2012 6:58 AM, vnikiet notifications@github.com wrote: The problem is that the messages (i think) are working like POP server, when u download them from the whatsapp server they are deleted, and u cannot see the message again from the mobile if u have downloaded previously from pc.\nIt would be perfect to find a solution to fix that, I think the best solution is to avoid the server download notification once u have download the message, but im not sure if this would work.... any idea @cdesjardins  or @ericblade ?\n\u2014\n          Reply to this email directly or view it on GitHub.\n. Why spam the system? No need to bother testing reliability, whatsapps security is terrible, no doubt they have little reliability as well.-- Sent from my HP Pre3On Sep 22, 2012 10:49 PM, yairnet notifications@github.com wrote: I wanted to check the reliability of the system\nFor example, 50 messages sent only 47 were successfully\nblog brings not notice anything unusual was\nhave is a way to make it more reliable?\n\u2014\n          Reply to this email directly or view it on GitHub.\n. You did read the project leader has stopped because of the spamming.. No specific details though.-- Sent from my HP Pre3On Sep 23, 2012 12:12 AM, yairnet notifications@github.com wrote: thx :|\n\u2014\n          Reply to this email directly or view it on GitHub.\n. Well I don't know what the content or whatever of your messages might've been, but I'd caution against doing any automated testing or sending of quantities of anything, unless you want to be noticed. That's all I'm saying :)-- Sent from my HP Pre3On Sep 23, 2012 12:42 AM, yairnet notifications@github.com wrote: I do not send SPAM\nI send important messages to my number and important to me that everything will\n\u2014\n          Reply to this email directly or view it on GitHub.\n. There is a node.js emitter at https://github.com/ericblade/node-wa\n. ",
    "dsdsfga": "Try the android emulator from the SDK (dev.android.com) with an old version of WhatsApp for example the 2.6.7722. You need to google that it is a little hard to find.\n. Same problem here the message is not send. I can login and see that the message is send out in wireshark but then the server not react. If I guess right the codes hangs in the first read line after this line: $stream = $this->send($msg);\n. I'm comparing the bytes which are send by the android app in the emulator and modified that the output to be 1:1 exactly the same. The server does not react but I just see that the auth is a little other than in android.\nAndroid sends:\nrealm=\"s.whatsapp.net\",response=...,nonce=\"...\",digest-uri=\"xmpp/s.whatsapp.net\",cnonce=\"...\",                        qop=auth,username=\"...\",nc=00000001\nWhatsAPI sends:\nusername=\"...\",realm=\"...\",nonce=\"...\",cnonce=\"...\",nc=...,qop=...,digest-uri=\"...\",response=...,charset=utf-8\nThe order does not match but this is maybe not important but the \"charset=utf-8\" is missing in the android output. I'm checking that...\nI rewrote that auth code so that the charset part is missing.. and it works!\n. I'm curriently working to \"decompile\" the whole stuff which is transmitted. If I guess right than it is this here:\n<presence name=\"Nickname\" />\nIt seems that everything is transmitted in a kind of package which begins with a 0x00 folowed with the package sizeshort (2 bytes) which contains the package length. The next relevent part is the 0xfc which is some kind of identifier for a custom string which is not in the dictionary, however the next byte is the size of that string so this one also needs to be touched.\n. You are right WhatsAPI send out two bytes more which are the type and its value.\nDid you try to translate the message send bytes? There are two bytes which confuses me.\n<message to=\"[fa=250]xxxxx\" [8a=138=s.whatsapp.net] type=\"chat\"> 8a a2 1b\nRight before the numer is a byte 0xFA. I cannot figger out what this mean also after that there is a 0x8A which makes no sense IMHO. Do you have an idea?\nUpdate: I figgered that out. The 250 means here comes a jabber id so it can be translated to \"xxxxx@s.whatsapp.net\" so that makes sense. (Hint: xxxxx is a phonenumber)\n. Sure. You just need to modify the \"package size\" (first two bytes), the length of the nickname and the nickname itself.\n. As far I can see in Wireshark: Yes.\nBut I'm not able to send messages.\n. The example code does not work for me. The login works but the server does not react after the transmission of the nickname or any other messages.\n. Well I would agree with you if I would not get the account_info message with [status] => active and [kind] => free.\nI found the solution. The auth caused that bug while the login my observed android app sends:\nrealm=\"...\",response=...,nonce=\"...\",digest-uri=\"...\",cnonce=\"...\",qop=...,username=\"...\",nc=...\nWhile WhatsAPI sends:\nusername=\"...\",realm=\"...\",nonce=\"...\",cnonce=\"...\",nc=...,qop=...,digest-uri=\"...\",response=...,charset=utf-8\nThe order does not match but this is maybe not important but the \"charset=utf-8\" is missing in the android output. I rewrote that auth code so that the charset part is missing.. and it works!\nHere is my code which replaces lines 204-206 in whatsapp.v2.php:\n$authData=base64_encode($ResData);\n$authLen=strlen($authData);\n$wholeLen=$authLen+9;\n$wholeLen=chr($wholeLen>>8).chr($wholeLen&0xff);\n$authLen=chr($authLen>>8).chr($authLen&0xff);\n$Response = $wholeLen.\"\\xf8\\x04\\x86\\xbd\\xa7\\xfd\\x00\".$authLen.$authData;\n$this->send($Response);\nAnd this line needs to be changed:\n$Response = sprintf('username=\"%s\",realm=\"%s\",nonce=\"%s\",cnonce=\"%s\",nc=%s,qop=%s,digest-uri=\"%s\",response=%s,charset=utf-8',\nto this here:\n$Response = sprintf('username=\"%s\",realm=\"%s\",nonce=\"%s\",cnonce=\"%s\",nc=%s,qop=%s,digest-uri=\"%s\",response=%s',\n. Uh I'm don't know how github works. However my codes replaced lines 204-206 in whatsapp.v2.php.\nDoes I need to install any git software? I have only installed the good old SVN :-)\n. Do you get any output after the login? There should be something about account_info. If not you seems not able to log in.\n. Dublicate of #6. See also this comment: https://github.com/venomous0x/WhatsAPI/issues/6#issuecomment-6388479\n. I just don't know how to post that update on github.\n. ",
    "onny": "I'm having exactly the same issue. I'm getting an answer from the server, which I usually don't get if the login credentials aren't correct. But then the script stops/hangs, trying to receive an answer after sending a message. Unfortunately the recipient doesn't get the message.\n. Now I've received a really obvious answer from the server, lol:\nLast read (login) ===> '\\x00\\t\\xf8\\x07t8\\x8a\\x94+\\xbd\\xb6'\nLast read (msgsend) ===> '\\x01\\n\\xf8\\n]8\\xfa\\xfc\\x06Server\\x8aC\\xfc\\x0515490\\xa2\\x1b\\x9d\\xfc\\n1338390608\\xf8\\x01\\xf8\\x02\\x16\\xfc\\xdeNew version of WhatsApp Messenger is now available. Please visit http://www.whatsapp.com/appstore/ and upgrade to the latest version. Your upgrade will be free and will bring bug fixes and new features such as Group Icons!'\nLast read (msgsend) ===> '\\x00\\x10\\xf8\\x02\\x95\\xf8\\x02\\xf8\\x03 \\xbd\\xaa\\xf8\\x04\\xc7\\xbd\\xaa\\x82\\x00\\x03\\xf8\\x01\\x02'\n. yeah it's still not working\n. sinconexion, could you please explain what you entered into the example.php file and do you have a special apache-webserver setup?\n. ",
    "alexprovencio": "i tried yesterday the php version and it was working fine\n. i used my mobile phone number and imei reversed and then hashed as password, but it also works with the android emulator from the sdk (imei 000000000000000), of course you have to activate whatsapp before in the mobile or the android emulator for the number you are using to login, and add to that number and the one you are sending the messages the country codes (in my case 34 for spain)\ni didn't use a web server, just exec the script using php from the command line, i'm using Ubuntu 12.04 and php 5.3.10\n. ",
    "jonymusky": "I get the account_info but unfortunately the recipient doesn't get the message. \n. ",
    "johnhout": "I can't seems to find out how a iPhone password is defined, I understand its the UDID but does this also needs to be strrev and md5? or what is the format?\n. Hm ok\u00e9 so this should be the following: ( werkt bij mij niet ).\nphp\n$wa = new WhatsApp(\"31600000000\", md5(strrev('UDID')));\nVIVA H.....\n. heb jij toevallig google talk ofzo haha?\n. ",
    "lukasklein": "Same for me... The server does not respond with a single byte\n. If this works for you, could you please open a pull request?\nWhere exactly does your \"my code\" come in place? When I remove the charset from the response my script does nothing anymore...\n. Seems like nobody has figured out yet how the password on an iOS device is being generated, so I wrote a little Python script that helps you reset it to a custom value: http://lukasklein.com/blog/custom-ios-whatsapp-password/\n. Seems like nobody has figured out yet how the password on an iOS device is being generated, so I wrote a little Python script that helps you reset it to a custom value: http://lukasklein.com/blog/custom-ios-whatsapp-password/\n. ",
    "ozonostudio": "anyone can please tell me from where i download the \"whatsapp.v2.php\" file?\n. ",
    "ccchan27": "yeah! Where is whatsapp.v2.php?\nBesides, UDID on iPhone, how about Android? IMEI?\n. ",
    "vkotovv": "@ccchan27 You could use whatsapp.class.php instead, it works for me, at least for login and sending text messages\n. @assegaf Here is the content of my example.php:\n``` php\n<?php\nrequire \"whatsapp.class.php\";\n// DEMO OF USAGE\n$wa = new WhatsApp(\"7904xxxxxxxx\", \"3727305342fc1788f9e170a6bb8a47d4\");\n$wa->Connect();\n$wa->Login();\n// SEND A MESSAGE\n$str = \"Hello world!\";\n$wa->Message(time().\"-1\",\"7950xxxxxxxx\",$str);\n?>\n```\nBut password (encoded IMEI) was not generated by this php code, I could present my version..\n. @assegaf No, Android.\n. I've created a method for that in this pull request. Its working for me for the account registered on Android.\n. @thesang We have resolved this for php version, pull request will be available soon. There is a change only in 2 bytes.\n. Take a look at this pull request. Not sure it will be merged quickly, because there are several pending already.\n. Answer is here : http://talk.maemo.org/showpost.php?p=1167545&postcount=46. This is where wazapp come from. These bytes are different there.\n. Thanks @zstars. I hope there will be no more mysterious 2-byte changes. Could you please create a pull request with the fix?\n@cdesjardins A bit off-topic, but what is the status of your fork and original project? Why dont they accept your pull requests? I was thinking of switching to your version. It would be great for everyone if you could merge with the upstream..\n. I'm glad that these improvements were finally merged :) There is a community already around this project, so I hope it will continue to improve in the future.\n. Maybe we should use wiki pages extensively? This info could be added to the wiki, as well as protocol structure.\n. Can I take part in it? I could contribute to the wiki if I have an access.\n. Maybe some info from this project could help also\n. Maybe you should create an organization and add all interested contributors to it. Or just give me an access to wiki editing, if possible. No need to fork them.\n. Maybe you should close it now as these changes are already in the master\n. ",
    "assegaf": "@vkotovv \ncan you exactly explain to us how you did it, android/iphone whatsapp ?, modification at WhatsApi ? other different ?\nI can login, but sending is not, also login is too long,\nsometime get message outdated .. \n. looks like you are not modifying some codes,  and work out of box, mine still not working on sending. did you use iPhone for registration ?\n. hi @ChromeD2 \ndid you find any solution on Message not able to send the Message ?\n. oic, why I didnt think it first, looks like I will find out by sniffing too, my country code is 62.\n. so any log whats happening in background, I use android version of whatsapp when register.\nI see login is successfull, but after it cause long delay,\n352308622 -> account_info  account_info Array\n(\n    [status] => active\n    [kind] => free\n    [creation] => 1305220622\n    [expiration] => 1352308622\n)\nafter sending this command : end next ?t??a?\nAhmed Mohd?HC?:??{?M??Ua$HC?2?:??????\nand long delay is wait for read sock command.\nhow about you ?\n. thanks  cdesjardins , I see this last command  cause long delay\n$next = \"\\x00\\x12\\xf8\\x05\\x74\\xa2\\xa3\\x61\\xfc\\x0a\\x41\\x68\\x6d\\x65\\x64\\x20\\x4d\\x6f\\x68\\x64\\x00\\x15\\xf8\\x06\\x48\\x43\\x05\\xa2\\x3a\\xf8\\x01\\xf8\\x04\\x7b\\xbd\\x4d\\xf8\\x01\\xf8\\x03\\x55\\x61\\x24\\x00\\x12\\xf8\\x08\\x48\\x43\\xfc\\x01\\x32\\xa2\\x3a\\xa0\\x8a\\xf8\\x01\\xf8\\x03\\x1f\\xbd\\xb1\";\n$stream = $this->send($next);\n$this->read(); // LONG DELAY is this Command \nI dont know what is that command in hex used to ? any idea ?\n. dear cdesjardins, I see now your explanation, there is 2 read in a row means, when I remove one, looks like delay gone.\nWhen I remove thoose line, so last line in Login() method is :$rBuffer =$this->read();\nbut when I send msg $wa->Message(time().\"-1\",\"62214421XXXX\",\"test message\");\nI got \n\ufffdt8\ufffd\ufffd+\ufffd\ufffd\u0001\n]8\ufffd\ufffd\u0006Server\ufffdC\ufffd15567\ufffd\u001b\ufffd\n1345005817\ufffd\u0001\ufffd\u0016\ufffd\ufffdNew version of WhatsApp Messenger is now available. Please visit http://www.whatsapp.com/appstore/ and upgrade to the latest version. Your upgrade will be free and will bring bug fixes and new features such as Group Icons! \nat first read, I dont know, I tought its Android, why is appstore ?\n. ok I see when \"read\" thread that pulls data  (wait so long), I send message to that whatsapp account, they indeed receive data and print it as \"message\", which means receive message working. but I dont know how send work, I ve changed the \niPhone-2.6.9 to Android-2.34-5222 which has the same length string, \nI see this code messed up, maybe I want to port it to java socket programming, maybe if I have time.\n. finally, this solution from dsfgdsfg fix long delay at login. but still send message fail, I will find out why\n--- >\nWell I would agree with you if I would not get the account_info message with [status] => active and [kind] => free.\nHere is my code which replaces lines 204-206 in whatsapp.v2.php:\n$authData=base64_encode($ResData);\n$authLen=strlen($authData);\n$wholeLen=$authLen+9;\n$wholeLen=chr($wholeLen>>8).chr($wholeLen&0xff);\n$authLen=chr($authLen>>8).chr($authLen&0xff);\n$Response = $wholeLen.\"\\xf8\\x04\\x86\\xbd\\xa7\\xfd\\x00\".$authLen.$authData;\n$this->send($Response);\n. hi, looks like long login delay is fixed, see my other comment. but still cant send message, read can receive message.\nI closed this issue, message me if there is person also has this issue.\n. @atans can you confirm again, 2 month , lets say you have 2 number, the second  number also unblock exactly 2 month ?\n. hi @shirioko \nany update with checkCredentials($token) ? I see latest code dont need any $token on method checkCredentials\nI also checked up there @manufuentescr  said, its just work fine without token.\nany idea why would we need $token ? \n(changed the password just fine).\nalso its true on whatsapp realclient, after login we need to checkCredentials to reupdate the password at next login ?\n. I tough this suppose to ask, how to make WhatsApi work inside android. well, maybe we can install php-cli (+gd, +curl+openssl) Inside Android (off course rooted). Hmmm I bet Ubuntu (for smartphone) does the job , lets wait ubuntu.\n. answer : no prevent I think, we must use own counter to measure the timeout time, use onGetServerProperties event to get exact time. if exceed the time/timeout, then force to disconnect() and reconnect and relogin again. \nThanks for follow up\n. read more, \nthe newest api changed the method name.\n. Actually RefusedLogin is not block, just tried, it changed the password.\nits better to show here whats is exact debug log. \n. yes, for first time I use checkCredentials() everything works, but I didnot save/print the result back, then I relogin again, bang .. login failed. \ncheck checkCredentials again,this time save new pw .\n*) just figured out.\n. as far as I use the api, 2 thing can happen.\n(1). checkCredential used, (new password generated), but login using old password one, cause not-authorized not-authorized\n(2). Your account blocked (so far whatsapp inc using spam filter very advanced technologies, 10 spamming, bang .. blocked. )\n if you checkCredential after blocked, its said \"blocked\" .\n Register using whatsapp Apps : Your number is not allowed using this service.\n. yes, some weird things happen without logic or reason. if sending lot msg  (tried 100 more msg) to one number  (like normal human conversation) its not getting blocked, \nbut sending to 10 different msg to 10 different number, its getting blocked. (damn I was just testing...) , how it could be, user may have 10 contact or more to send. still humanly ..\n@blackmlm \nI have number unused, $ base account,\ncontact me I can give you, but test please with pay 1$ . see what happens.\n. ups, getting block without sending message today. \nso I was thinking every message send back to server by whatsapi, might be different than official client.\nI mean every message, not only chatmessage, also notification, profile image change, etc ..\nso its like whatsapp inc, digging a hole, and wait everybody else to fall .. :D \n@Dynogic no, its on 1 day, lets say 2 hour one message.\n. hi @Dynogic \nyes, using this too, samething. \nconst WHATSAPP_DEVICE = 'Android';\nconst WHATSAPP_VER = '2.10.750';            \nnot sure whats happen, but I think its the way we use the api and responding each message send by server  whatsapp. or whatsapp inc has employee reading all our message, and block by mouse click and a hand .. :D \n. Ok lets see whats happen. I hope u still saving those logs from login until\nblocked again from new paid account\nsent using android mobiles\nOn Jul 22, 2013 7:11 AM, \"blackmlm\" notifications@github.com wrote:\n\nI got a new account and Paid for it the $1...... I am using the same code\nas when they blocked me..... just to try..... lets see if they will respect\npaid accounts....\nwill post results later....\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/421#issuecomment-21319761\n.\n. wew, 2 message and block.\nthing are getting more serious ..\n\nso basically they (whatsapp people) laugh cause they close the hole based on what open source api do ..\nthe method blocking maybe simple : u register using new token, new whatsapp client token, version etc ..\nbut the way communicate too old, old ways, \n. I catch you saying only message type chat, send back SendMessageReceived.\nthe other just ignore them.\nwithout sniffing real whatapp smartphone what those client do , we dont know for sure.\nI hope this remove blocked issue. I will try like your suggestion for like 24 message a day. will post here the result.\n. not good, if we dont SendMessageReceived , any other tx send will fail, I already tested it,\nwhen relogin, the notification are resend again all of them by whatsapp server.\n. oh .. just noticed about missVenom, will try this weekend to find out exact behavior of android client. \n. here is the exact what happen,\nwe skipped the SendMessageReceived right except for chat right .\nthen notification of profile image change occurs, eg. \nrx [message from=\"628151XXXXXX@s.whatsapp.net\" id=\"1172606828\" type=\"notification\" t=\"1374144652\" ]\nrx [notify xmlns=\"urn:xmpp:whatsapp\" name=\"Nadia Makes\"][/notify]\nrx [request xmlns=\"urn:xmpp:receipts\"][/request]\nrx [notification type=\"picture\"]\nrx [set jid=\"628151XXXXXX@s.whatsapp.net\" id=\"1374144652\"][/set]\nrx [/notification]\nrx [/message]\nwe skip SendMessageReceived() for this.\nbut when \ntry to do tx , example sendActiveStatus()\nfailed, to write, got exception, \ntry to relogin.\nnotification occurs again :\nrx [message from=\"628151XXXXXX@s.whatsapp.net\" id=\"1172606828\" type=\"notification\" t=\"1374144652\" ]\nrx [notify xmlns=\"urn:xmpp:whatsapp\" name=\"Nadia Makes\"][/notify]\nrx [request xmlns=\"urn:xmpp:receipts\"][/request]\nrx [notification type=\"picture\"]\nrx [set jid=\"628151XXXXXX@s.whatsapp.net\" id=\"1374144652\"][/set]\nrx [/notification]\nrx [/message]\n. :D  ... \nI wonder what could possible goes wrong. lets try sniff mrvenom tommorow.\nI think we use the Android Token (nothing to do with WP8).\n. removed whatsup number\n. ok sent request, remove/edit your post now, :) \n. I closed this issues, cause this fix (which already did) seem not helping blocking issues,\ncurrent api working just fine with or without fix.\n. I see, after long try, sniff with wireshark, I notice something different, whatsapi vs real client android,\nat first beginning of doLogin() to get challenge string.\nwhatsapi receiving this : \nhexcoded [000005f8030141ab00000df802bbf802f8019cf803e4cb0c00001bf8041be8cffc14dda64d5863366f524fabe055bfde7d40c410a5a800]\nrx  [start from=\"s.whatsapp.net\"][/start]\nrx  [stream:features]\nrx    [receipt_acks][/receipt_acks]\nrx    [w:profile:picture type=\"all\"][/w:profile:picture]\nrx  [/stream:features]\nrx  [challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"]\u0766MXc6oRO??U??}@???[/challenge]\nso, its looks okay.\nI sniffed real clients,\n[000005f8030141ab00000df802bbf802f8019cf803e4cb0c80004a5abf70e6b9b3024a12209e1753fdeddee01a301a37d0a2c7b26555bab9d7fbe7d73a6ba8c9043e8ad72c9c8dab3d446bd590c57af8264f9b47408fe094a78ac117ab12b45d8720780604]\nrx  [start from=\"s.whatsapp.net\"][/start]\nrx  [stream:features]\nrx    [receipt_acks][/receipt_acks]\nrx    [w:profile:picture type=\"all\"][/w:profile:picture]\nrx  [/stream:features]\nquite different, missing the challenge node (never found challenge node), I could not decode this : 80004a5abf70e6b9b3024a12209e1753fdeddee01a301a37d0a2c7b26555bab9d7fbe7d73a6ba8c9043e8ad72c9c8dab3d446bd590c57af8264f9b47408fe094a78ac117ab12b45d8720780604\nneither,\nwe are not even get challenge string, not sure to decode further message not even make key to further as decoding chiper.\nFYI, @davidgfnet \n. managed to found ways to decrypt it,\nused php whatsapi to decrypt it (indeed rc4), main point it is, the whatsapp client seem save too the challenge string, so only when after register they send it.\nTX didnot have clue to decrypt it !,\nso far this is RX sequence after register.\n(1).\nrx  [start from=\"s.whatsapp.net\"][/start]\n(2).\nrx  [stream:features]\nrx    [receipt_acks][/receipt_acks]\nrx    [w:profile:picture type=\"all\"][/w:profile:picture]\nrx  [/stream:features]\n(3)\nrx  [challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"]\u010e]????+xoL?j??[/challenge]\n(4)\nrx  [success t=\"1374406602\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1373524843\" expiration=\"1405060843\"]?\u060b?y?w8+??,$??q?b[/success]\n(4). a (Missing, dont know what message is : 00c00200)\n(5).\nrx  [presence from=\"s.whatsapp.net\" status=\"dirty\" xmlns=\"w\"][/presence]\n(6).\nrx  [presence from=\"6221XXXXXXX@s.whatsapp.net\" type=\"available\"][/presence]\n(7) \nrx \u00a0[iq from=\"s.whatsapp.net\" id=\"4\" type=\"result\"]\nrx \u00a0 \u00a0[props version=\"1\"]\nrx \u00a0 \u00a0 \u00a0[prop name=\"timeout\" value=\"300\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"library\" value=\"0\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"audio\" value=\"0\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"checkmarks\" value=\"0\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"newmedia\" value=\"0\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"image_max_kbytes\" value=\"10240\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"image_quality\" value=\"75\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"image_max_edge\" value=\"800\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"media\" value=\"16\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"broadcast\" value=\"50\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"max_subject\" value=\"25\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"max_participants\" value=\"51\"][/prop]\nrx \u00a0 \u00a0 \u00a0[prop name=\"max_groups\" value=\"50\"][/prop]\nrx \u00a0 \u00a0[/props]\nrx \u00a0[/iq]\n(7)\nrx  [iq from=\"g.us\" id=\"3\" type=\"result\"][/iq]\n(8)\nrx  [iq from=\"6221XXXXXXX@s.whatsapp.net\" id=\"5\" type=\"error\"]\nrx    [error code=\"404\" type=\"cancel\"]\nrx      [item-not-found xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"][/item-not-found]\nrx    [/error]\nrx  [/iq]\n(9)\nrx  [iq from=\"6221XXXXXX@s.whatsapp.net\" id=\"1\" type=\"error\"]\nrx    [error code=\"404\" type=\"cancel\"]\nrx      [item-not-found xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"][/item-not-found]\nrx    [/error]\nrx  [/iq]\n(10)\nrx  [iq from=\"s.whatsapp.net\" id=\"2\" type=\"result\"]\nrx    [config xmlns=\"urn:xmpp:whatsapp:push\" platform=\"gcm\" id=\"APA91bHkf_tPGBb7AKRmp_ntdoPJB9rs2yG648Gvz7HeXpADOSz1Cj1sqhsihODwTvV5glIMcBkzAJO5aTjj0QlVUJSrAVwbuaeAVNS3rpNySe1hS2Bk6U7j8a5169JI1hZzN7CNvO7bKmoBA2ZN5N-XKZ8SGHRryw\"][/config]\nrx  [/iq]\n(11)\nrx  [iq from=\"s.whatsapp.net\" id=\"6\" type=\"result\"][/iq]\n(12)\nrx  [iq from=\"s.whatsapp.net\" id=\"7\" type=\"result\"][/iq]\nSuspect : No 10 .. what kind of RX is that, and what TX is sent before it.\n. 8, 9 yes. \n7 a. is new, never found on whatsapi\n[iq from=\"g.us\" id=\"3\" type=\"result\"][/iq]\nwho is is g.us ???? a robot ?\nanother point is, try to force stop the whatsapp , and re run.\nthe challenge string did not sent again. so its true, its saved on client.\ntried to use old challenge string, nope, wrong/fail. and now lost the decyption key, cannt decrypt again\nuntil sure  about what tx is, nothing we can do.\nstill saving the tx after register, 6 of tx.\nEdit: the id is using sequential, 1,2,3 ..etc not using time() like we used to use.\njust googled about , platform=\"gcm\" \nGoogle Cloud Messaging, \n. ok you are right, about  g.us\nI tried with whatsapi again,\ntx  [iq id=\"3\" type=\"get\" to=\"g.us\"]\ntx    [list xmlns=\"w:g\" type=\"participating\"][/list]\ntx  [/iq]\nrx  [iq from=\"g.us\" id=\"3\" type=\"result\"][/iq]\nabout : sendGetClientConfig(), not sure what this means, said 404\ntx  [iq id=\"2\" type=\"get\" to=\"s.whatsapp.net\"]\ntx    [config xmlns=\"urn:xmpp:whatsapp:push\"][/config]\ntx  [/iq]\nrx  [iq from=\"s.whatsapp.net\" id=\"2\" type=\"error\"]\nrx    [error code=\"404\" type=\"cancel\"]\nrx      [item-not-found xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"][/item-not-found]\nrx    [/error]\nrx    [config xmlns=\"urn:xmpp:whatsapp:push\"][/config]\nrx  [/iq]\nEdit :  my fault, its sendGetServerProperties(), it shows\n// also I didnot receive something like this below, even  I has do sendGetClientConfig() : \n@shirioko  mind to tell me , what this tx means, it gotta to do with push, and sound ??\ntx  [iq id=\"3\" type=\"set\" to=\"s.whatsapp.net\"]\ntx    [config xmlns=\"urn:xmpp:whatsapp:push\" sound=\"sound\"][/config]\ntx  [/iq]\nI got RX Reply :\nrx  [iq from=\"s.whatsapp.net\" id=\"3\" type=\"error\"]\nrx    [error code=\"500\" type=\"wait\"]\nrx      [internal-server-error xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"][/internal-server-error]\nrx    [/error]\nrx  [/iq]\n. this one from official, just managed to decrypt rx.\nEdit : this one from official client https://github.com/venomous0x/WhatsAPI/issues/422#issuecomment-21308924\nabove you is from whatsapi, to try output something like sendGetClientConfig, sendGetServerProperties()\n. its on whatsapi. I believe this is for wp7 only. \npublic function sendGetClientConfig()\n    {\n        $msgId = $this->createMsgId(\"sendconfig\");\n        $child = new ProtocolNode(\"config\", array(\"xmlns\" => \"urn:xmpp:whatsapp:push\", \"sound\" => 'sound'), null, null);\n        $node = new ProtocolNode(\"iq\", array(\n            \"id\" => $msgId,\n            \"type\" => \"set\",\n            \"to\" => static::WHATSAPP_SERVER\n                ), array($child), null);\n        $this->sendNode($node);\n        $this->waitForServer($msgId);\n    }\nI still curious why I got this rx from official client.\nrx [iq from=\"s.whatsapp.net\" id=\"2\" type=\"result\"]\nrx [config xmlns=\"urn:xmpp:whatsapp:push\" platform=\"gcm\" id=\"APA91bHkf_tPGBb7AKRmp_ntdoPJB9rs2yG648Gvz7HeXpADOSz1Cj1sqhsihODwTvV5glIMcBkzAJO5aTjj0QlVUJSrAVwbuaeAVNS3rpNySe1hS2Bk6U7j8a5169JI1hZzN7CNvO7bKmoBA2ZN5N-XKZ8SGHRryw\"][/config]\n. ok no problem, once I know how to  decrypt tx, I know exactly whats official client send. \n. oh miss venom has sniffer 5222 before ? yeah, one point is about challenge string, I dont know why its only sent once after registration, after that it changed, and lost somewhere, relogin its not sent back again challenge string.\n. I hope so, reusing with the same keystream from the start,\nbut at next login, it did not work, the chiper is completely wrong.\n\"pass through data with gibberish \", is that possible you completely in middle modifying packet sent back to android client. its mean miss venom not only sniffing also proxying.\n. I will try old miss venom with tcp, kinda tired copy paste one by one packet on wireshark. and run on php each line of hex.\necho \"#\".y.\" bin[\".$data.\"] \\n\";\n        $data = hextobin($data);\n        echo \"#\".y.\" hex[\".$data.\"] \\n\";\n```\n    $node = $reader->nextTree($data);\n$k = 0;\n\nwhile ($node != null) {\n\n    $k++;\n    echo \"%\".$k.\" ========= \\n\";\n    echo ($node->nodeString(\"rx \u00a0\") . \"\\n\");\n\n    // check if celleng\n    if (strcmp($node->tag, \"challenge\") == 0) {\n        $challengeData = $node->data;\n        echo \"Found ChallengeData [\".$challengeData.\"] \u00a0\\n\";\n        echo \"Found ChallengeData hex [\".bintohex($challengeData).\"] \u00a0\\n\";\n        $reader->resetKey();\n        $key = pbkdf2('sha1', base64_decode($password), $challengeData, 16, 20, true);\n        echo \"key [\".$key.\"] \u00a0\\n\";\n        echo \"key hex [\".bintohex($key).\"] \u00a0\\n\";\n        $inputKey = new KeyStream($key);\n        $reader->setKey($inputKey);\n    }\n\n    $node = $reader->nextTree();\n}\n\n```\nnot sure neither about saving keyStream.\n. hi @shirioko \nfinally I able to to decrypt (actually not decrypt, first tx not encrypted), first tx is sent, and found very noticeable different between whatsapi and official client (android).\nWhatsapi :\ntx  [stream:features]\ntx    [receipt_acks][/receipt_acks]\ntx    [w:profile:picture type=\"all\"][/w:profile:picture]\ntx  [/stream:features]\ntx  [auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"XXXXXXXXXXX\"][/auth]\nOfficial Client : \ntx  [start to=\"s.whatsapp.net\" resource=\"Android-2.10.222\"][/start]\ntx  [stream:features]\ntx    [receipt_acks][/receipt_acks]\ntx    [w:profile:picture type=\"all\"][/w:profile:picture]\ntx  [/stream:features]\ntx  [auth user=\"XXXXXXXXX\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\"]?Z`?Z??KY?+??;?{???Oh???????vm???f=?G\u0662?9??[/auth]\nsee on tag auth official client, data, its sending something. on whatsapi its blank.\nthats why on official client server didnot give challenge string, maybe client send it, \nany idea how to generate what to send at auth tag ?\nmaybe its what you said serialize keystream ?\n. I hope its true, unfortunately I use another account to sniff this, so didnot know its password, cannt make keystream.\nI will try with another account already saved password tonight to know what the heck is this [?Z`?Z??KY?+??;?{???Oh???????vm???f=?G\u0662?9??] exactly ..\nEdit : one more, its using port 443 I dont know why whatsapp client sometime using 5222 sometime 443, I think its up to client decide which port being used. maybe some isp have firewall port,\n. nope its not challenge key, try to make chiper with that, no lucks,   I dont know what is that, looks like its needed as key/challenge to decrypt next message. we are stuck at here ...\n. that was fast, I examined the tcp for 2 days.\nah I see, \nany idea how client generate this challenge string? \n. ahh Math again, \ntx [start to=\"s.whatsapp.net\" resource=\"Android-2.10.222\"][/start]\ntx [stream:features]\ntx [receipt_acks][/receipt_acks]\ntx [w:profile:picture type=\"all\"][/w:profile:picture]\ntx [/stream:features]\ntx [auth user=\"XXXXXXXXX\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\"]?Z`?Z??KY?+??;?{???Oh???????vm???f=?G\u0662?9??[/auth]\n?Z`?Z??KY?+??;?{???Oh???????vm???f=?G\u0662?9??\nyou are saying those line is made of F(UserAgent+MCC/MNC+Somethingelse)= ?Z`?Z??KY?+??;?{???Oh???????vm???f=?G\u0662?9??\n?\nso F() still mistery ..\n. is that (as far as my finding) :\nServer send a challenge first time after register, and login for first time.\nafter that client remembers it, and applies it (F() function as above ) for the i+1 (next) login.\nfirst time challenge can be used as keystream to decrypt rx AFAIK.\n. @Dynogic  any logs on tx decypted using official client ?\nI believe getServerProperties function on whatsapi tx already correct,\nbut getClientConfig not yet,\ncause still got error 404 or something.\n. oh God, how can my eyes miss it, I got it too but my eyes (four of them) didnot notice\nrx  [success t=\"1374406602\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1373524843\" expiration=\"1405060843\"]?\u060b?y?w8+??,$??q?b[/success]\nYeeeeahhh, ready to sniff again ...\nany idea on F() function ?\n. some how keyStream cannot be used to decrypt next rx \nafter found rx in hex[000000]\nnot sure what rx 000000 means\ntried to use next+1 challenge to make new KeyStream, didnot work neither.\nso from sniffing POV, we lost challenge string. \nI wonder from whatsapi POV (point of view).\n. Ok i will try to prepare sender for long test.\nI see you implemented F function successfully.\nI assume you will save next challenge on text file in binary or hexstring.\nsent using android mobiles\n. just managed to run using this new code.\nthis time I register using official android client, even different version that @shirioko wrote as USERAGENT at those new code.\ncatch after missvenom got password, then turn off the android fastly. pretty sure those not login yet.\nstill managed to login, and everything as good.\ncongrats ..\nI will check to act like normal people doing, sending message (different each), maybe every 30 minute.\nand sendActive inActive, like smartphone doing ..\nthe missing thing is maybe I skip sync contact, I see on sniff official doing like huge TCP tx and rx, looks like contact Sync. each tx rx +- 1k data, maybe like 30 times\n. USERAGENT:WhatsApp/2.10.768 Android/4.0.4 Device/samsung-GT-I9100\nREQUEST:  https://v.whatsapp.net/v2/exist?cc=XX&in=XXXXXXXX&lg=en&lc=GB&id=%15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef\n@shirioko  any idea those id=%15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef\nmeans ?\nits on missvenom, %15 string cannot be decoded as URLDecode. \n. you are right ..\neven php urldecode do the jobs :+1: \n$php test.php \nurlencode [%15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef] \nbin [??FY?-??m?~u8????-?] \nhex [ 159cb84659dc2d9fba6d877e7538fbc8c6cf2def ] \nok @Dynogic , will know for sure what is that,\nI think its an Function too, maybe based on IMEI or UniqueID from Android java .., Pretty sure this decide which one an existing account which one new to send new sms.\nups just got this error (on running whatsapi)\nrx  [stream:error]\nrx    [system-shutdown xmlns=\"urn:ietf:params:xml:ns:xmpp-streams\"][/system-shutdown]\nrx  [/stream:error]\nno weird tx sent to this, just came\nare they restarting server ? ... ...\nUpdate :  \nI got failed login after those, but tried to reregister, its said my number is NEW.\nso I got new SMS again,\nafter that. sniff again password, and relogin, everything good again.\nwill try and monitor again ..\nMore Update : \n4 hour passed, still good\n. after restarting the api / relogin (auth success, and got next challenge)\nI still got this\nrx  [iq from=\"g.us\" id=\"4\" type=\"result\"][/iq]\nrx  [stream:error]\nrx    [system-shutdown xmlns=\"urn:ietf:params:xml:ns:xmpp-streams\"][/system-shutdown]\nrx  [/stream:error]\nand seem looks like after that, everything else not working (tx/rx) , tx cause write error socket, pollMessage just looks like not resulting anything.\nif only me, I might missing something\nUpdate : \nafter that, exit, try to relogin, failed. Weird thing is, \n. @Dynogic  dont sure yet, its banned, if you codeRequest again, and said blocked, that means banned.\n. @Dynogic use checkCredential with the same id you codeRequest(),\nI see it generate new password, and next login its okay again ... (after auth-fail).\nUpdate : Forget it, this time after doing something, banned too .. I always love this number .. \nArray\n(\n\u00a0 \u00a0 [cc] => XX\n\u00a0 \u00a0 [in] => XXXXXXX\n\u00a0 \u00a0 [lg] => en\n\u00a0 \u00a0 [lc] => GB\n\u00a0 \u00a0 [id] => %15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef\n)\nstdClass Object\n(\n\u00a0 \u00a0 [status] => fail\n\u00a0 \u00a0 [reason] => blocked\n)\n. just noticed something  strange when we put parameter just as official client do (and 2.10.768)\n[auth user=\"622144212088\" passive=\"true\" ... ]\npassive=\"true\" true means, we dont get any rx, notificationClient, and Message In, must be new feature. not sure if using this mode, how to get some rx above.\n. Actually I run another number for days, with more even process. like sync more than 1000 contacts, send subcription each, get every profile picture changes, load the profile pic,\nsend random active/offline.\neverything just fine. conversation to myself (more than 100 message/day), just fine\nonce managed to send to different number (1000 contacts above),\nnot even touch 10 msg, blocked.\nlogin part, getConfig,  etc .. just fine.\nI believe more now, tx of sending message on official client is the most suspected part,\nor in the middle after login and before starting sending message, keystream must be changed. (the only prove is sniff it).\nI will try sniff again when got time.\n. @Dynogic still lucky ?\nI just noticed something that bothering me about how socket works.\nsendGetServerProperties said, to set timeout to 300,\nI believe its 5 minutes. When I tried to sniff it, off course not exactly 5 minute, but when there is data like 1 minute after, it will send socket data. and make new connection, wait timeout again 5 minute.\non whatsapi it set to 2 seconds, \nis that kinda like brute force for php to do socket connection to server ?\n. ah I see, so its true. just searched google: php dont support threading.\nso on java (or wp/iphone) it just open 1 socket, thread number (1) just listen forever, but other thread would just send tx freely when there is any event without waiting thread number (1) to finish 5 minute.\n. we have php. net and py. I am planning to make java version. php not again sufficient to  mimic phone client\n. any idea on reason \"self-send-jailbroken\" ??\nhttps://v.whatsapp.net/v2/code?cc=62&in=21XXXXXXX&id=abcdef0123456789&lg=en&lc=GB&mnc=000&mcc=000&method=sms&reason=self-send-jailbroken&token=4fcda632632947284b74ae9480a4cf94\nI got it sniffed yesterday using real whatsappclient on missvenom.\n. FYI, I am on jailbroken (root ) Tablet without IMEI/Gsm/Cdma .. just a wifi tablet.\n. Edit : Wrong copy paste\nyeah even I using whatsapp client newest, sending id=abcdef0123456789\nI believe miss venom/ssl proxy didnot change to that,\nyeah its impossible to get MNC/MCC on wifi only tablet right ?\nI put another phone number and put manually sms verification code.\n. sorry wrong copy paste, as this is : abcdef0123456789\nhttps://v.whatsapp.net/v2/code?cc=62&in=21XXXXXXX&id=abcdef0123456789&lg=en&lc=GB&mnc=000&mcc=000&method=sms&reason=self-send-jailbroken&token=4fcda632632947284b74ae9480a4cf94\n. once more, when you try to wipeall whatsapp data, and reregister.\nit didnot need sms code again. as miss venom said. I dont know where whatsapp did know I ever registered before.\nhttps://v.whatsapp.net/v2/exist?cc=62&in=21XXXXXXXX&lg=en&lc=GB&id=%15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef\nRESPONSE: {\"status\":\"ok\",\"login\":\"6221XXXXXXXX\",\"pw\":\"CENSORED=\",\"type\":\"existing\",\"expiration\":1405060843,\"kind\":\"free\",\"price\":\"Rp9500\",\"cost\":\"9500.00\",\"currency\":\"IDR\",\"price_expiration\":1377305297}\nso its like whatsapp checking before on the cloud, this number if ever registered before AND checking some id I dont know what, then whatsapp know \"Oh you are old member who has wiped all whatsapp data before, no need verify. just welcome\"\n. by you mean this id ? id=%15%9c%b8FY%dc%2d%9f%bam%87%7eu8%fb%c8%c6%cf%2d%ef\nremember I wiped all of whatsapp data, how whatsapp know/loading some id, from where ?\nif Mr X was somebody else, has new Phone, and know my number, whatsapp just give my password ? without reverify again my number by sms ? \nkinda weird.\nhas you explored rx tx ? \n. ok let me know when you start, I will follow closely.  just stuck \n. ah I see, must be using http://developer.android.com/reference/android/provider/Settings.Secure.html#ANDROID_ID\ncause there is no IMEI on wifi only tablet. so I understand now, know by combination of unique id and number.\nI wonder I borrow my friend phone, know his unique id or imei, and phone number , \"tralala.. I got your password\"\n. @devloic  its the same as official client sniffed using missvenom, when reregister already registered number.\ngreat.\n. hmm its getting more serious,\n@gowl did something happened exactly before you relogin again. please some logs maybe usefull for anybody.\nby my experience php will error on fwrite (sending tx).  whatsapp will never give rx anymore, if you restart the login you will know its blocked by auth-fail .\ncurrently I use some number and still now working, no blocking.\n. @gowl this is kinda weird question, I know whatsapi its just api, so its depend on us how we use it.\nbut did you just make the account just for doing sending message, and never doing pollMessage() ( acting as normal client do ) ?\nbut still dont think this method to avoid blocking too, I still got block too.\n. I think the same lot message is considered a spam, \n. I am curious with falbanny said is that even possible make robot to do\nsomething in android emulator.\nWell not phisical robot but software.\nsent using android mobiles\n. Good News,\nI tried robot things to check if block using official is Exist,\nand It do Exist : this is the screenshot\n\non whatsapi, we have the auth-fail,\nit say to verify, but on verify samething, your number is not allowed to use this service blah2 ..\nI will say this, \"whatsapp, you damn good system!\"\n. Yes. Thats weird. Why you keep connect and disxonnect all the time. Even\nofficial client not working that way. When screen off. It just send\nunavailable status.\nsent using android mobiles\nOn Aug 19, 2013 7:22 PM, \"Max Kovaljov\" notifications@github.com wrote:\n\nIs there a particular reason why you would reconnect every time rather\nthan keeping the same connection open and using a loop which calls\npollMessages()?\nwhile(true){\n    $w->pollMessages();\n    sleep(1);}\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/442#issuecomment-22867846\n.\n. @TruthEdge \nDont blame sirioko or any of this api.\n\nI ever make a bot running monkey scripting on emulator android to sync contact and send message tru whatsapp official client, \nblocked after about 11 messages.\ndo you understand what it means.\n. Repository Down.. hmmm\nOn 2/16/14, kareree226 notifications@github.com wrote:\n\n\u0628\u062a\u0627\u0631\u064a\u062e \u0660\u0667\u200f/\u0660\u0662\u200f/\u0662\u0660\u0661\u0664 \u0664:\u0665\u0669 \u0645\u060c \u062c\u0627\u0621 \u0645\u0646 \"OMendoza\" notifications@github.com:\n\n------------------- START: sendSetProfilePicture\ntx\ntx 12243 byte data\ntx 2621 byte data\ntx\nrx\nrx\nrx\nrx\nrx\n------------------- END: sendSetProfilePicture\nHave any idea? Thanks\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/612\n.\n\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/612#issuecomment-35193921\n\n\nS.Abidin\nGtalk : assegaf.din@gmail.com\nSkype : syeh.abidin\nGSM/Whatsapp : +628979993336\n. wait a minute, cant believe we use shits of horse all this time .. hmmmm \n. I think there is no prove of someone somewhere using this abusively like sending 11 msg to 11 different number in 1 minute and  safe, even shirioko cant guarantee its will safe.\neven I ever used simulator like Android Developer Simulator, and register there and sending <20 message different number and still blocked, so its whatsapp Rules. not this Api fault.\n. wrong\n. wrong\n. @foratech  is fake scammer, I have implemented WA20 protocol, which is based on Android Whatsapp 2.16.xxx, and 2.12.5xx version, everything is fine, if you are using user agent that version and still using WA16 protocol, not sure but random block even not doing abusing system even a little, \n. @mgp25 any instruction extracting pw wa on Nokia S40 device, its Java J2ME based apps. \n. @vigiman \nplease explain what you mean by \n\"asked for an id using wart\nasked for a password using yowsup\"\n. ",
    "schonhose": "Is there a solution for this issue? E.g. can it be easily changed into another (nick)name?\n. Wouldn't it just be easier to add a function to the class that generates the correct $next string, based upon for example on a given (nick)name?\nFrom what I understand, based upon the $next string given by xTraXx that I have to change the first two bytes (e.g.\\x00\\x12), the hex string itself (e.g. \\x41...\\x64) and some byte that handles the length as well. I'm in no way familiar with hex, nor the allowed possibilities so a function (or some more information) is appreciated. \n. I can't seem to get it to work, anyone have any clue how to change the (nick)name easily?\n. ",
    "aesedepece": "If you split our beloved $next chunk using \\x00 as delimiter you get these three strings:\n- \\x00\\x12\\xf8\\x05\\x74\\xa2\\xa3\\x61\\xfc\\x0a\\x41\\x68\\x6d\\x65\\x64\\x20\\x4d\\x6f\\x68\\x64\n- \\x00\\x15\\xf8\\x06\\x48\\x43\\x05\\xa2\\x3a\\xf8\\x01\\xf8\\x04\\x7b\\xbd\\x4d\\xf8\\x01\\xf8\\x03\\x55\\x61\\x24\n- \\x00\\x12\\xf8\\x08\\x48\\x43\\xfc\\x01\\x32\\xa2\\x3a\\xa0\\x8a\\xf8\\x01\\xf8\\x03\\x1f\\xbd\\xb1\nAs you can see, there is a format for it:\n\\x00[length]\\xf8[content]\nOf course, you can continue splitting each string. For example, first one:\n- \\x05\\x74\\xa2\\xa3\\x61\\xfc\n- \\x0a\\x41\\x68\\x6d\\x65\\x64\\x20\\x4d\\x6f\\x68\\x64\nThis last one contains the nickname preceded by its length (\\x0a = 10).\nMany of us have tried to change the nickname by replacing corresponding bytes and then changing nickname length and total length to suit the new one. Although completely logical, it simply does not work for unknown reasons.\nAnother unexplainable fact is found when splitting the third string above:\n- \\x08\\x48\\x43\\xfc\\x01\\x32\\xa2\\x3a\\xa0\\x8a\\xf8\n- \\x01\\xf8\n- \\x03\\x1f\\xbd\\xb1\nAs you may noticed, first string is said to have length 8 but it actually has 10 bytes :O\nI'll continue my research on this.\n. I have to retract from what I said previously:\nChanging the nickname by replacing corresponding bytes and then changing nickname length and total length to suit the new one DOES WORK.\n. Resetting my password with the method @lukashed and @mo-mughrabi mentioned worked for me:\n- I set my password to be my reversed and hashed IMEI. (This disabled my Android client).\n- Then I enabled my Android client by standard method \u2192 SMS confirmation code.\n- Eventually it worked with both API and Android.\nYou may find you are able to login using the API but not to send anything. As @hubail commented, \u00abin some cases you may need to flush the incoming messages buffer in order to send\u00bb. This can be achieved with read() twice or thrice in PHP or s.recv(1024) in Python.\n. Same issue happens to me. Login seems not to happen successfully despite of using md5(strrev(\"myimei\")) as password.\n. I confirm that UDID in Android is md5(strrev(\"myimeiwhateveritis\")).\nFinally got it to work but. I am able to get account info but not to send any message.\n. Fully working at the moment and having lots of fun.\nI've forked the project and soon I'll commit some tweaks and tools.\nGreat job!\n. @neds Resetting my password with the method @lukashed and @mo-mughrabi mentioned worked for me:\n- I set my password to be my reversed and hashed IMEI. (This disabled my Android client).\n- Then I enabled my Android client by standard method \u2192 SMS confirmation code.\n- Eventually it worked with both API and Android.\nYou may find you are able to login using the API but not to send anything. As @hubail commented, \u00abin some cases you may need to flush the incoming messages buffer in order to send\u00bb. This can be achieved with read() twice or thrice in PHP or: s.recv(1024) in Python.\n. Flushing the incoming buffer is just performing read() until there is no answer.\n. As @hubail commented, \u00abin some cases you may need to flush the incoming messages buffer in order to send\u00bb. This can be achieved with read() twice or thrice in PHP or s.recv(1024) in Python.\n. This is me chatting with myself xD\n\n\n. @hubail This file server.php makes all the magic \u2192 https://github.com/aesedepece/WhatsAPI/blob/master/php/server.php\nIt receives POST calls with two variables: $_POST['id'] and $_POST['action'].\nThe first one, id, contains user data in an associative array like in this example:\nphp\n$id = array(\n    \"cc\" => \"34\",\n    \"pn\" => \"663xxxxxx\",\n    \"imei\" => \"35471xxxxxxxxxx\"\n);\nSecond one, action, contains \"what to do\" in the same fashion. Example:\nphp\n$action = array(\n    \"method\" => \"Message\",\n    \"params\" => array(\"123456789-1\", \"677xxxxxx\", \"Hello world!\")\n);\nOf course I run a modified version of whatsapp.class.php which \"echoes\" json_encode() of the results instead of print_r them \u2192 https://github.com/aesedepece/WhatsAPI/blob/master/php/whatsapp.class.php\n. @michliu That's weird! Did you completely git clone my fork? :O\nPlease look for errors in your PHP log and tell me if any.\nI'm concerned about you not being able to send messages yet. I won't stop until you are able to do so! :)\nI guess you use WhatsApp in a iPhone. Don't you?\n. @michliu Could you post your code? (Whatever you have written to call the API in js or php)\nIf your code is OK then the problem is related to your WhatsApp account.\nNote that \"method\" is \"Message\" and not \"Message()\" as I posted at first.\n. That's all OK, but maybe the problem is more obvious than we thought:\nI've read WhatsApp for iPhone uses iPhone's udid as udid instead of md5(strrev($imei)). Find your udid (something like 2b6f0cc904d137be2e1730235f5664094b831186), use it as imei in $action and replace $this->_id['udid'] = md5(strrev($this->_id['imei'])); with $this->_id['udid'] = $this->_id['imei']; in server.php.\n. Ok, just pushed it so there's no way back: different project, different repository.\nHere you have: https://github.com/aesedepece/Guasa\nEnjoy! You should be able to login, view your account settings, import contacts from .vcf, get last seen date for each of them and send messages to any one.\nReceiving messages is on the go ;)\nPlease report any issues you'd find. Thanks!\n. For notifying issues related to Guasa, please use its own issue tracker:\nhttps://github.com/aesedepece/Guasa/issues\nAnnouncement: message receiving now works in Guasa :D\n. The WhatsApp server updates it automatically everytime you perform any operation such a $wa->Login() or $wa->read(); (or python equivalent).\n. You are right, it is not updated automatically as I thought. I'll continue investigating how to do so.\n. lastSeen returns the date the user was active for the last time.\nsubscribe adds a new contact to your known contacts list.\n. Please try with my forked version:\nhttps://github.com/aesedepece/WhatsAPI\nIf still can't send messages you may be facing the same issue @kirkchen does:\nhttps://github.com/aesedepece/Guasa/issues/12\n. ",
    "michliu": "@aesedepece I try to add read() , but still can't send any message , did you have any example for me ?\n. @aesedepece flush the incoming message buffer? did you have any example ?\n. @aesedepece Flushing , but still can't send ...\n[root@hv php]# php example.php \n \n \n \n account_info \nArray\n(\n    [status] => active\n    [kind] => free\n    [creation] => 1288493592\n    [expiration] => 1635562392\n)\n \n \n--start--\n--end--\n. Still can't send messages ... ?\n. @neds I can  successfully log in to server and get the info of my account , but i can't send message to other..... @@\n. @neds add some code to login ? I can success login to server and get the my account , but still can't send any message...\n========account info========\n(\n    [status] => active\n    [kind] => free\n    [creation] => 1288493592\n    [expiration] => 1635562392\n)\n. @aesedepece I got \"inactive\".... ?\nArray\n(\n    [status] => inactive\n    [kind] => paid\n    [creation] => \n    [expiration] => \n)\n. @aesedepece Yes, I completely your fork , and I use WhatsApp in iPhone.\n. @aesedepece But I have change my sim card to other android mobile.\n    [status] => inactive\n    [kind] => paid\n    [creation] => \n    [expiration] => \nERROR: INEXISTENT METHOD\n. @aesedepece I add $id and $action to server.php\n$id = array(\n    \"cc\" => \"886\",\n    \"pn\" => \"9x6xxxxx8\",\n    \"imei\" => \"x5xxxx20xxxx09xx\"\n);\n$action = array(\n    \"method\" => \"Message\",\n    \"params\" => array(\"123456789-1\", \"88691x3xxx0x\", \"Hello world!\")\n);\n//$api = new API($_POST['id'], $_POST['action']);\n$api = new API($id, $action);\n. @aesedepece Login fail ! If i use iPhone udid.\n. @aesedepece I have reset whatsapp password , then try again ...\n[root@hv php]# php server.php \nArray\n(\n    [status] => active\n    [kind] => free\n    [creation] => 1288493592\n    [expiration] => 1635562392\n)\nBut still can't send any message.. :(\n. @cartman need server.php ->https://github.com/aesedepece/WhatsAPI\n. ",
    "moritzhahn": "the solution of dsdsfga works for me\n. ",
    "boesing": "Would like to know what encoding I have to use to send german chars like \"\u00df\u00f6\u00e4\u00fc\". I tried out \"ISO-8859-1\", \"ISO-8859-15\" and \"UTF-8\". But no message appears. Without those chars everything works fine.\n. ",
    "aloncarmel": "also,\npython:\n\n\n\nwhatsapi.sendMessage(\"1\",\"NUMBER\",\"test\")\nTraceback (most recent call last):\n  File \"\", line 1, in \n  File \"whatsapi.py\", line 99, in sendMessage\n    s.send(msg)\nsocket.error: [Errno 32] Broken pipe\n. resetting the password like you suggest @lukashed doesnt help me. i want to still use my iPhone client too. Anyone? im no getting anything like @dsdsfga suggested about the account_info...\n. no update on iphone password?\n. @mo-mughrabi im not looking to disable my iphone client but building another client.\n. no word on iphone password / php login? or is it just the login problem that is preventing the php from working? \n. \n\n\n",
    "ismail": "On Android, for password shall we use DeviceID or IMEI? Those are not the same.\n. aesedepece, a working example for Python-Android would be most welcome!\n. aesedepece How are we supposed to set \"WhatsAPI URL\" ?\n. Ok when trying to login I get:\nUncaught SyntaxError: Unexpected token < guasa.class.js:48\nGuasa.login guasa.class.js:48\nlogin login.js:7\nonclick index.htm:255\nDebugging a bit more, I see:\n\"\nWarning:  Invalid argument supplied for foreach() in /home/ismail/public_html/WhatsAPI/php/server.php on line 27\n{\"status\":\"active\",\"kind\":\"paid\",\"creation\":\"1324842484\",\"expiration\":\"1387914484\"}\"\n. ",
    "hubail": "With Android, it's the IMEI. Just the plain IMEI.\n@lukashed  good one, but as you figured it'll break the original client's experience. That's why we went after retrieving the generated password. \n. Well, in some cases you may need to  flush the incoming messages buffer in order to send.\n. Sleek! I was about to ask you about the backend part of the app? since we're thinking about rewriting the source into more \"usable\" piece of code.\nAnd I'll leave the decision about the repo for you guys to vote.\n. It's like you need to send a \"heartbeat\", I'll assign this issue, we'll get back to it.\n. @cdesjardins thanks for confirmation.\n. @vkotovv definitely, I actually started writing some \"Getting Started\" doc yesterday.\n. Since Wiki pages aren't truly forkable, what do you suggest to collaborate? (not to replace the integrated Wiki)\n. Yup, thanks for your contribution though.\n. Thanks! Although we don't have iOS devices to test but the article clearly shows it's working.\n. I can see where this issue is coming from.\niOS is using this nickname property which is not the case with Android (which we base our tests on).\nSo we'd need a slightly-modified (conditional) send function to address that...\n. Hmmm initially the PHP codebase wasn't meant to be used in an Asynchronous way\n. I manually modified my local sources with your fix, but it didn't work.\nThis issue emerged sometime between recent merges I guess, because earlier versions supposed to support not only special Latin chars but also other languages (Arabic, in particular, tested from the beginning).\n. It was done manually for a reason, automatic merge wasn't available due to directory structure diff.\n. Yeah I'm aware of that but I can't recall doing something unusual, probably my git client messed the things up!\n. It's now merged with our master, thanks @cdesjardins.\n. I'm primarily working on WAMP with no issues.\nIn three simple steps:\n1- locate the script's directory\n2- Fire up the command line (on Windows Explorer, hold-shift + right click and choose \"Open command window here\")\n3- Issue the command php whatsapp.php\nThe result would be :\n\nUSAGE: whatsapp.php [-l] [-s  ] [-i ]\n       phone: full number including country code, without '+' or '00'\n       -s: send message\n       -l: listen for new messages\n       -i: interactive conversation with \n. If \n\nphp\necho extension_loaded(\"openssl\");\nsays zero (false), then :\nuncomment this line\n;extension=php_openssl.dll\nin your php.ini\n. php\nprint_r(stream_get_wrappers());\n?\n. Sending \"heartbeat\" packet would be ideal I guess...\n. You dynamically build the friend list everytime, by submitting a contact list to their server.\n. If the result of \nphp\n<?php\necho extension_loaded(\"sockets\");\nis anything other than \"1\" (true)\nplease recompile PHP with --enable-sockets config option.\n. Yup, please input MAC as-is.\n. As @cdesjardins said, it was an unofficial letter. Upon further conversation they said they will not just sue developers.\nSo yeah, as long as you don't abuse the protocol, guys...\n. The beauty of Git, ha :)\n. It's intentional for the time being. And surprisingly (not?), it went unnoticed ...\n. @developrch true, much like audio/video, the type is \"vcard\". \nHowever I don't remember what's the exact payload (Base64'd .vcf? I may get back to the issue later, I can confirm it's possible though) \n. Great, it's even plain.\n. @developrch, sure, we appreciate pull-requests.\n. FYI you can send an image regardless of the host.\n. Analyzing, guessing, emulating and late-night-coding.\n. ",
    "mo-mughrabi": "@aloncarmel , try this http://lukasklein.com/blog/custom-ios-whatsapp-password/ it will reset your password\n. ",
    "navid-rekabsaz": "@aesedepece could you plz tell me how did you solve your problem? I can also login but still not able to send any message.\n. It works... really great job! thanks  @dsdsfga I have not read that comment. I think it would be really nice if you try to update the main code for other people\n. @michliu as dsdsfga as has mentioned in his post https://github.com/venomous0x/WhatsAPI/issues/6#issuecomment-6388479  you should add some code to login() function\n. ",
    "codebird": "I think it is too late but...\nworks for me as an iphone user, with some changes to the code...\nIphone password to be able to login is:\ndouble the mac address:\nAA:BB:CC:DD:EE:FFAA:BB:CC:DD:EE:FF\nand in whatsprot.class.php \npublic function encryptPassword()\n    {\n        return md5(strrev($this->_imei));\n    }\nthis should be like this:\npublic function encryptPassword()\n    {\n        return md5($this->_imei);\n    }\n. ",
    "eleazan": "The \"last\" commit has another encryptPassword ().. that detect if you put a \"mac\", and twice it... else, is supposed that is a imei, and reversed\n. I i'm trying with a basic test\n``` php\n$udid = md5(strrev(IMEI));\n$xml = file_get_contents(\"https://r.whatsapp.net/v1/exist.php?cc=34&in=PHONE&udid=$udid\");\nprint(htmlentities($xml))\n```\nAnd works with my android phone, but with my BB 8900 data with OS5 login fail :(\n. Put the MAC with the : \n. https://github.com/venomous0x/WhatsAPI/issues/35\nNot IMEI and not MAC (and not pin xD) for me! ><\n. What BB u have? And what's your RIM OS? ><\n. 8900 / os v5.0.0.1036 and not is imei >_<\n. Maybe use a version modified of this: https://github.com/aesedepece/Guasa (A JS client for WhatsAPI)\n. It's your imei reversed.. and passed to md5...\nEx: if your imei is 12345 your pass is md5(54321) ;)\n. No... the code already reverse your imei and pass it to md5... xD\n. ",
    "gromeck": "Ok, I found out:\nInvite our account to be driven by WhatAPI into your group when WhatsAPI is in listen mode.\nYou will receive the join into the group where the JID of the group is - (example: 1234567890-987654321).\nTo post to that group, the method Message in src/php/whatsprot.class.php has to be patched like this:\nold:\n  $messageHash[\"to\"] = $to . \"@\" . $this->_whatsAppServer;\nnew:\n  if (!strpos($to,'-'))\n    $messageHash[\"to\"] = $to . \"@\" . $this->_whatsAppServer;\n  else\n    $messageHash[\"to\"] = $to . \"@g.us\";\nThis is a hack ... of course g.us should be defined as _whatsAppGroupDomain or similar in the class.\ngromeck\n. ",
    "paullou": "Can you explain more about how to retrieve my groups? and where to find the JID of the group ?\nThanks!\n. thanks both\n. ",
    "arthursc": "Add the user to the group, send a message and the from address is the JID of the group (concat of the owner id + groupid). Be sure to call the WhatsProt class with debug mode = 1.\nNot sure how to receive group memberships.\n. pull/105\n. Check \npull/77\nissues/76\n. No problems here.\nDon't forget to remove the @g.us from the to address (if you're using the from value from a received message in the group). \n. Tried to send a xmpp ping to the server (http://xmpp.org/extensions/xep-0199.html#c2s), but that feature is not implemented (it can still be used however to check the connection). \n<iq from=\"xxxxxxxxxx@s.whatsapp.net\" to=\"s.whatsapp.net\" id=\"1347809994-1\" type=\"get\">\n<ping xmlns=\"urn:xmpp:ping\"></ping>\n</iq>\nresponse:\n<iq from=\"s.whatsapp.net\" id=\"1347809994-1\" type=\"error\">\n<error code=\"501\" type=\"cancel\">\n<feature-not-implemented xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"></feature-not-implemented>\n</error>\n</iq>\nHowever I see incoming ping requests from the server:\n<iq from=\"s.whatsapp.net\" id=\"1347810416-ping\" type=\"get\">\n    <ping xmlns=\"urn:xmpp:ping\"></ping>\n</iq>\nSending back a response is working:\n<iq to=\"s.whatsapp.net\" id=\"1347810416-ping\" type=\"result\"></iq>\nThe connection stays open. I think this is the way to go, so I'll prepare a pull request.\n. See pull pull/66\n. more details in issues/64\n. I can reproduce this issue with an Iphone as client. To fix this a presence stanza must be send at the beginning of the session.\nThat one looks something like this:\n<presence name=\"Nickname\"></presence>\nAfter that the incoming Iphone notification will appear with the nickname instead of the phonenumber. I created pull/77 for the fix. To use it \n$wa->sendNickname(\"nicknameyouwanttouse\");\n. Android is using the address book as far as I know.\n. I've got a function for this, I will create a pull request.\n. ```\npublic function Location($msgid, $to, $thumb, $long, $lat)\n{\n    $whatsAppServer = $this->_whatsAppServer;\n    if(strpos($to, \"-\") !== false)\n    {\n        $whatsAppServer = $this->_whatsAppGroupServer;\n    }\n$mediaHash = array();\n$mediaHash['type'] = \"location\";\n$mediaHash['longitude'] = $long;\n$mediaHash['latitude'] = $lat;\n$mediaHash['xmlns'] = \"urn:xmpp:whatsapp:mms\";\n$mediaNode = new ProtocolNode(\"media\", $mediaHash, null, \"$thumb\");\n\n$messageHash = array();\n$messageHash[\"to\"] = $to . \"@\" . $whatsAppServer;\n$messageHash[\"type\"] = \"chat\";\n$messageHash[\"id\"] = $msgid;\n$messageHash[\"author\"] = $this->_phoneNumber . \"@\" . $this->_whatsAppServer;\n\n$messsageNode = new ProtocolNode(\"message\", $messageHash, array($mediaNode), \"\");\n$this->sendNode($messsageNode);\n\n}\n```\nleave thumb empty\n. See pull/104\n. ",
    "evivz": "how to send message to group ?\n. Thanks a lot let me try it out. Can you give the link to your repository ? so that i can have a look over there too.\n. ",
    "vibhoo": "$w->sendMessage(\"gjid\",\"MSG\");\n. That function doesn't work, it will give you the name of the sender & message (if you want) not the 'group name'\nI need 'group name' (group subject)\n. Yeah that function also but still I am not getting 'group name'. I think this function is never called up\nHere is what I am doing.Let me know what  I am doing wrong\n``` php\nfunction asunto($phone, $gId, $time, $author, $participant, $name, $subject)\n    {\n     echo \"Group name: \". $subject;\n    }\n$w = new WhatsProt($username, $token, $nickname, $debug);\n$w->eventManager()->bind(\"onGetGroupsSubject\",\"asunto\");\n$w->Connect();\n$w->loginWithPassword($password);\n$w->PollMessages();\n```\n. Yeah I also figured out the same thing, for message group I am able to send message & receive message \nWhat else you need \n. Getting NULL \nwhen trying this \nphp\n$w = new WhatsProt($username, $token, $nickname, false); // tried with true & false both getting same output\n$res = $w->eventManager()->bind(\"onGetGroupSubject\",\"asunto\");\nvar_dump($res);\nFor onGetGroupMessage function also I am getting NULL\nphp\n$res = $w->eventManager()->bind(\"onGetGroupMessage\",\"ongrpMessage\");\nvar_dump($res);\n. Then what's the proper way to you it ? I am new to this Just lemme know how should i proceed\n. php\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$res = $w->eventManager()->bind(\"onGetGroupMessage\",\"ongrpMessage\");\nvar_dump($w);\nobject(WhatsProt)#1 (25) { [\"accountInfo\":protected]=> NULL [\"challengeFilename\":protected]=> string(17) \"nextChallenge.dat\" [\"challengeData\":protected]=> NULL [\"debug\":protected]=> bool(true) [\"event\":protected]=> object(WhatsAppEvent)#4 (0) { } [\"groupList\":protected]=> array(0) { } [\"identity\":protected]=> string(52) \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\" [\"inputKey\":protected]=> NULL [\"outputKey\":protected]=> NULL [\"groupId\":protected]=> bool(false) [\"lastId\":protected]=> bool(false) [\"loginStatus\":protected]=> string(12) \"disconnected\" [\"mediaFileInfo\":protected]=> array(0) { } [\"mediaQueue\":protected]=> array(0) { } [\"messageCounter\":protected]=> int(1) [\"messageQueue\":protected]=> array(0) { } [\"name\":protected]=> string(8) \"xxxxxxx\" [\"newMsgBind\":protected]=> bool(false) [\"outQueue\":protected]=> array(0) { } [\"password\":protected]=> NULL [\"phoneNumber\":protected]=> string(12) \"91xxxxxxxxxxx\" [\"reader\"]=> object(BinTreeNodeReader)#3 (2) { [\"input\":\"BinTreeNodeReader\":private]=> NULL [\"key\":\"BinTreeNodeReader\":private]=> NULL } [\"serverReceivedId\":protected]=> NULL [\"socket\":protected]=> NULL [\"writer\":protected]=> object(BinTreeNodeWriter)#2 (2) { [\"output\":\"BinTreeNodeWriter\":private]=> NULL [\"key\":\"BinTreeNodeWriter\":private]=> NULL } } Sender name: xxxxx\\nGroup Message: Ghjj\n. Okay Thanks I have edited, Anyways that was a testing no. \nNow back to main question, How to get the Group Name(Group Subject) ? any clue or help from your side ?\n. @shirioko can you please tell me how to use it any example/snippet of code  will work for me as I am new to Php\n. php\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$res = $w->sendGetGroupsInfo($groupId);\nvar_dump($res);\nI am doing like this still no success getting exception 'Socket Error'\n. I tried those scripts I am able to Send & Receive Message to a Number & Even I am able to Receive Message of a group just what I want to do is to get the Group Name\n. No  Chance, even on Whatsapp client(Installed on mobile) you can't get it who viewed your profile\n. @recoverjp how can you be so sure about that? Because when we send messages form the mobile app(whatspp in mobile devices),the messages get delivered/sent and can be received within a fractions of seconds. So what's causing the delay? I don't think that connection to whatsapp server taking time\n. @recoverjp no I didn't figure out what's exact the problem is but I think loginWithPassword()is taking time, & how did you run a script to test connection with the whatsapp? can you please share your script ? so that I can also test it ?\n. Yeah to send Message we need to make the new connection, & if continue keeping the connection open then every time user will be shown as online ?\n. How to keep connection alive? can you guys help me ?any script or code will help as I am new to PHP\n. Any other way ? to speed up the things? or this is the only procedure by keeping the connection alive? & one more thing I nwould like to ask how to get the name of any group? \n. @recoverjp I have no problem If you can send, its upto you I have no problem in understanding the code\n. @ardianys I tried this, but not happening Infact I am able to get the groupId and Messages of that particular group but not the group 'Subject' and 'Participants', I created a group using whatsapp on mobile, and added that no. or user to the group , When I am running script getting the message and groupId not the subject\n. I checked it out but don't know why I am not getting the result? Surely when you implement just let me know\n. @shirioko  :+1: \n. @Peeramard  You need to at least know the basic of Php so that it will be easier for you to understand whats happening inside WhatAPI.\nIf you any other problem let me know\n. ",
    "Nadeem123": "@dsdsfga  and @neds i am new to whatsapp application but having good knowldage of PHP, please guide bit how can make a simple php based app to send messages on whatsapp ...mine email is here nadeem.qaisar@gmail.com\n. Hi I have this issue , can anybody help out.\n[10-Mar-2013 04:58:27] PHP Warning: socket_read() [function.socket-read]: unable to read from socket [107]: Transport endpoint is not connected in /home2/kwtechsc/public_html/expat/WhatsAPI-master/src/php/whatsprot.class.php on line 265 \n[10-Mar-2013 04:58:27] PHP Warning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in /home2/kwtechsc/public_html/expat/WhatsAPI-master/src/php/whatsprot.class.php on line 206 \n. ",
    "darkhat": "@aesedepece can you share your client code? \n. ",
    "totti0144": "nahhh my status have not updated since perform above function\n. ",
    "yyl": "Hey I am trying the same thing with python. I got problem of broken pipe. how do you find your password by the way? that thing seems to come from auto-generation or something transparent to customers.\n. Actually I got it working and get the output as follows:\nLast read ===> '\\x00 \\xf8\\x08H8\\x8aC\\xfc\\x0f1344312325-ping\\xa2:\\xf8\\x01\\xf8\\x03q\\xbd\\xac'\nI think the API is working, but the recipient does not receive the msg. Does this happen to you?\n. ",
    "expilu": "Hi.\nHaven't been testing this since I wrote this thread.\nThe password (in Android...) was the IMEI of the phone passed through md5 and then reversed.\nFor me it worked well and the recipient got messages without problems.\nBut only with php, couldn't make it work in python :(\n. ",
    "themrzmaster": "Hey bro,\nDo you know how can i get the password on iPhone?\nIts the IMEI?\n. getting the same error... already changed my whatsapp.class :/\n. also got after the warning:\nFatal error: Maximum execution time of 30 seconds exceeded in /Library/WebServer/Documents/wp/test/whatsprot.class.php on line 133\n. so its md5(reverser udid)?\n. me too\n. ",
    "newlog": "Hey people!\nIs the python version working? It seems to be outdated compared to the php version, isn't it?\nI obtain a response when connecting, but when sending the message I obtain the broken pipe error and the connection reset by peer. As password I've used the reversed imei passed through a md5 hash, and also the md5 imei reverserd. No succeed.\nDoes anybody know how to make it work?\nThanks in advance.\n. ",
    "hqt08": "Hi, \ndon't mean to open an old issue but am also wondering why there's no activity in the python version.\nBefore discovering there was a more mature yowsup implementation that you might want to try out, I could get the python version working to send a simple message by copying over most of the php functionality using this if anyone is still interested. This was just to add simple messaging and better integration in python in a django server.\nIt only works for v1 whatsapp currently, all the arguments in testprotocol.py have to be \"strings\" and you'll probably have to change to your own device and whatsAppVer in whatsapi.py.\n. ",
    "ChromeD2": "@aesedepece:\nSure seems like the same issue, tried both Win7 and Ubuntu 12.04 with a few different versions of php and all forks available from this project. Even tried python and proxying the connection just to be sure but I get the same result. Will try this from a fully different connection and computer tomorrow and see where it gets me, but it seems I'm stalled for the time being.\nThe official client does work on my Android using the same Wi-Fi network as this PC, so it's not my router's config either.\nOh well, I'll crack this down in due time. Until then I'll be open to suggestions!\nThanks for the speedy reply.\n. Confirmed that it doesn't work for me regardless of computer/os/connection used. I'll keep looking into it and post if I ever do find a solution. \nCheers!\n. Sad to say I didn't. I'll probably try sniffing some packets out with wireshark to see if it's country-related. Maybe there's something different in the way Whatsapp sends messages to different country codes and country code sizes (e.g. +44 vs +351). Just haven't found the time yet!\n. ",
    "ne0c0de": "Hi aesedepece,\nI clone your latest code from github and try to make some test.\nMy latest PHP code is:\nrequire \"whatsapp.class.php\";\n$wa = new WhatsApp(\"90544xxxxxxx\", md5(strrev(\"myimei\")), \"ne0c0de\");\necho \"Connecting\\n\";\necho $wa->Connect();\necho \"Login\\n\";\necho $wa->Login();\necho \"Sending message\\n\";\necho $wa->Message(time().\"-1\",\"90530yyyyyyy\",\"Just some testing\");\necho \"Finito\\n\";\nResult:\nConnecting\nLogin\nSending message\nFinito\nBut there's no message came to me.\nPS: I'm using latest Whatsapp app for iphone (4)\nI tried this code with my UDID bu result didn't change\nI'm able to connect whatsapp servers through 5222 with telnet.\nSo, what can i do know? :)\n(My operating system is Ubuntu)\n. ",
    "cdesjardins": "If someone could just make an unencrypted/decrypted capture of the client delivery report message from the recipient phone to the whatsapp server and send it to me then I will write the code myself. Or if someone knows a good way to capture the data myself, I will do my own captures as well. Unfortunately I have not figured out a way to sniff whatsup traffic from real phones or emulators.\nThanks!\n. I am using android and I have run TCPdump on my phone already, but all of the messages of interest are encrypted. \n. I finally figured it out, for the client delivery message, the format is as follows:\n0x00, [total msg length], 0xf8, 0x08, 0x5d, 0xa0, 0xfa, 0xfc, [Number Length], [UTF8 to number], 0x8a, 0xa2, 0x1b, 0x43, 0xfc, [id length], [UTF8 msg ID], 0xf8, 0x01, 0xf8, 0x03, 0x7f, 0xbd, 0xad,\nWhere the UTF8 to number is the phone number that you are responding to, and the UTF8 message ID is the same message ID that you are responding to. Unfortunately I do not have time to code this up right now, but I thought I would post this info along in case someone else wants to add it.\n. Yup, here is a full dump:\n0x00, 0x2c, 0xf8, 0x08, 0x5d, 0xa0, 0xfa, 0xfc, 0x0b, 0x31, 0x39, 0x31, 0x39, 0x31, 0x32, 0x33,   .,..]....1919123\n0x34, 0x35, 0x36, 0x37, 0x8a, 0xa2, 0x1b, 0x43, 0xfc, 0x0d, 0x31, 0x31, 0x31, 0x32, 0x32, 0x32,   4567...C..111222\n0x33, 0x33, 0x33, 0x33, 0x2d, 0x31, 0x30, 0xf8, 0x01, 0xf8, 0x03, 0x7f, 0xbd, 0xad,               3333-10....\u2302..\nWhere 19191234567 is the phone number that I want to send the ack to, and 1112223333-10 is the message ID from the message that person just sent me. I have a test project in c# that does this and I get the double check marks every time. I cannot post the code unfortunately. \n. I think you are doing the lengths wrong, for example the msg_length is typically computed like this:\n$msg_length = hex2str(_hex(strlen($content)));\nThere are also some places where they do this:\n$to_length = chr(mb_strlen($to,\"UTF-8\"));\nIt is not clear if you are doing that or not.\nHere is a function I wrote to debug this type of stuff:\npublic function printhexstr($data, $name)\n{\n    $len = strlen($data);\n    print(\"Len: $len - $name\\n\");\n    for ($i = 0; $i < $len; $i++)\n    {\n        print(\" \". dechex(ord($data[$i])));\n        if (($i % 16) == 15)\n        {\n            print(\"\\n\");\n        }\n    }\n    print(\"\\n\");\n}\nTo see what you are really sending just call:\nprinthexstr($context, \"message rx\");\n. OK, I just pushed the php up in my fork, feel free to merge it wherever. \n. Just for the record, the issues were:\nOn one line you didn't have x8a escaped.\nThe message length is supposed to be the message length of the message you are sending, not the one you are acking.\n. I have a BB and a few androids and all of those accounts worked with the php setup as an iPhone, they don't care about that. Also if you ran the php/protocol version of the code you should see all the details of what is sent and received in regular text. It seems as if WhatsApp is offline for us for now... \n. Good question, this code forces everything to UTF-8 which means other alphabets are not possible, but I bet it is a bug. I will look into this when I have time. \n. Actually I am not seeing this problem, I added:\nelse if($rcvd_type == 'msg'){\n                $msg = $this->parse_received_message($v);\n                printf(\"%s\\n\", $msg['body_txt']);\n                echo json_encode($msg); // Do something with the message here ?\n            }\nand It prints out any Arabic chars I send it. Furthermore if I call Message() with Arabic chars I get the correct chars on the receiving end as well. So I don't see the issue.\n. I put it on line 93 of whatsapp.class.php in my fork:\ngit clone git://github.com/cdesjardins/WhatsAPI.git\nand the only line I actually added was the printf();\n. This seems like a good way to ruin whatsapp for everyone. I recommend not doing this.\n. The issue is that the login code as is had areas with 2 reads in a row, they are just blindly reading from the socket, but there might not be any data on that socket (for example all of the data may have been read on the first read), and when that happens the socket blocks. I agree this area should be improved.\n. The reason it redirects you to the app store is because the php code logs in to WhatsApp as an iPhone-2.6.9. Furthermore be aware that just removing one of those reads might not always work either. This area of the code is not really well done... Typically this type of thing is done with a \"read\" thread that pulls data off the wire and queues it locally for the main thread to manipulate. In this case you would want to check the local queue for the expected responses, and if they do not arrive after some short but reasonable timeout then an error should be produced... But of course that is a big pain in the neck...\n. Some of us are wondering: what did you do to figure this out?\nhttps://github.com/cdesjardins/WhatsAPI/commit/800c90c502ae9a4407539c79841d9ca67b208350#-P0\n. Indeed it is the reversed hashed IMEI. One of my test phones is BB.\n. I have also fixed it in my php/protocol version:\nhttps://github.com/cdesjardins/WhatsAPI\n. Actually what I would like to do is move the php/protocol code down into the php directory, and get rid of the stuff currently in the php directory, then it would be nice if it could be pulled into the venomous0x master branch for everyone else to get... I don't know if venomous0x will accept it however... \n. I have had an outstanding pull request for a while now:\nhttps://github.com/venomous0x/WhatsAPI/pull/20\nI just put my latest code directly in the php directory, some things have changed, but it should be pretty obvious how it works, the example code is now in a file called testprotocol.php rather than example.php. Also note that there is now a --debug or -d flag that you can use to see all I/O in (almost?) human readable format.\n. For iOs you use the UDID\n. I just pushed a fix for this to my fork, I also issued a pull request... clone this until Venomous0x pulls it down to his stream: git://github.com/cdesjardins/WhatsAPI.git\n. Cool, can you close this issue? Thanks.\n. The reason it didn't work for you is because you only redid half of my fix. See function: writeBytes... this is why you should always do merges with git rather than by hand.\n. For future reference git can handle moving files around, and merging, and keeping the history when files move. I am not sure what you did, but the history of the files is gone, and obviously this merge didn't work... :(\n. Yes, get the latest code, this bug was fixed in this branch this morning.\n. I dont know anything about the python side... Never even opened one of those files.\n. See latest in git://github.com/cdesjardins/WhatsAPI.git for sending an Image...\n. Get the latest code and use it as is, this bug was just fixed in this branch this morning.\n. thanks for merging this one.\n. The XMPP spec specifies that there is a \"roster\" request message, we do not currently have it implemented, I am not 100% sure that WhatsApp supports it, but they probably do. Currently however you do get \"presence detect\" messages that tell you what contacts you have online.\n. Is the image size really 9999?\n. Cool, can you close this issue? Thanks.\n. There is a server delivery message, and a client delivery message, they both come back automatically when the message is delivered to the whatsapp servers and end client respectively. Look for those.\n. Yes, that is the one, and you can poll for it with this code in your client level (i.e. testprotocol.php)\n``` php\nwhile(1)\n{\n    $w->PollMessages();\n    $msgs = $w->GetMessages();\nforeach ($msgs as $m)\n{\n    if ((strcmp($m->_tag, \"message\") == 0) && ($m->getChild(\"received\") != null))\n    {\n        printf(\"Got delivery report from: %s\\n\", $m->getAttribute('from'));\n    }\n}\n\n}\n```\n. sendMessageRecieved function is the poorly named function to send the message Rx message back to whatsapp servers. In other words it is an ACK of an inbound message you receive, and it is what triggers the second check mark on your regular whatsapp client.\n. zstars is correct, WhatsApp will save your maessage if you do not ACK it, but only for a limited time. So if you don't ACK it then it is possible to get it in multiple places, but really only if you are lucky.\n. Turn your phone off.\n. This causes an infinite loop, as follows:\n1) You connect with WhatsAPI\n2) WhatsAPI causes your phone to disconnect\n3) Your phone reconnects\n4) Your phone causes WhatsAPI to disconnect\n5) goto 1\n. ok, if you want to try it out, then it should be quite easy if you just follow these simple steps:\n1) Use git to get the source code\n2) Modify code to reconnect whenever it disconnects\n3) Run the modified code and turn your phone on\n. We got a cease and desist letter from whatsapp, as such I will no longer be contributing to the project. It seems some people were using whatsapi for spamming...\n. I have all of the information you seek, but I will let the project founder publish the letter if he thinks it is appropriate. It seems that we got nailed by a disgusting lawyer trolling for lawsuits. Apparently WhatsApp claims they would not target devs like us, because it is just bad PR for them.\nThat being said the onus is on us not to take advantage of their network for spam and/or spoofing other peoples ID, it seems that if we fly under the radar, and respect their system, then they will leave us alone. \n. This one should do it:\nhttps://github.com/venomous0x/WhatsAPI/issues/71\n. It seems that the -1 is a number that is used to tie conversations together, so a conversation will start with a time that remains constant and the number after the dash increments with every message. This is a convention that we don't follow in whatsapi.\n. I can answer your questions:\n\n1) In the MessageImage method, (around line 276 in whatsprot.class.php) what purpose does the line: $mediaAttribs[\"file\"] = $file;\n\nthe mediaAttribs hash is passed into the ProtocolNode constructor and the key/value pairs in the hash are used as parameters in the generated xml. You should be able to see the key/values sent over whatsapp if you enable debugging. In this case the xml attribute is the name of the file, I don't know why it is required when the URL should be sufficient, but real whatsapp client puts it in there so I put in there as well.\n\n2)Why must we supply the image from a URL online, if an image exists on the server/computer we are sending from, why can we not use that? I have tried using a local file (not accessable via http request) and whilst the thumbnail worked perfectly I was unable to download the received message/image on the phone.\n\nIn order for the image to be available to the recipient then it must be accessible to the recipient, the protocol does not have any built in methods for sending the actual image to the recipient, it just sends a link, and the recipient can then download the image from that link. This of course could be automated if you have some storage space on the web, then you could donate it to this project and update the sources to take a local file and upload it to your web storage and then send a link to your web storage... but I doubt anyone will do that, so you are stuck manually uploading your images and then sending links to the manually uploaded image.\nThe thumbnail works because it is being base64 encoded and sent as part of the message, there appears to be size restrictions on the thumbnail however so sending a full HD style image is not possible with this method.\n\n3) I have no idea why there are so many edits in the src/php/whatsprot.class.php that seem to be related to removing blank lines and replacing them. If anyone can explain to this noob why that happened I'd be grateful.\n\nOK, I can't actually answer this question because I don't really know what you are talking about. :D \nhope this helps.\n. > Does WhatsAPP (company) itself have a storage space for user images sent via a normal mobile handset? How do they do this?\nYup, 100% if you send yourself an image from a real whatsapp client to whatsapi, and look at the message you get you will see that they in fact uploaded your image to their servers and then sent a link to their servers.\n. Actually if you just don't send bulk messages then you won't have a problem either. Think about that. \n. ",
    "eslamo": "Hello, \nCan u please provide us with the full php code to add into our file and get it working ..\n. i think the issue back again and whatsapp changed their plan again\n. We have Login issue back agaaaaaaaaain \n. I think they changed their login method again\n. @saschagehlich There is a missing point in the encryption key must be found\n. @saschagehlich  i don't think so that we can continue the proccess with  (( which is 20 bytes, so this might be a challenge or something )) this only\ni think we must capture the new buffer and read it again carefully i think there is a small part we missing here.\nbut anyway i'm glad that you have the syntax \" Success \" :+1: \n. @waninkoko if this works you are a herooo \n. I noticed that it worked only one time ... but it didn't work again after that ... can you make sure about that ??\nIt Do Login But Sending Message / RequestLastSeen Not working \n. any ideas here .. after the first successfully test i send the message with no errors but i can't receive it on the other side\n. No i dont mean that ... am using 2 different numbers here one for sending from php and the other  receiving from iphone .. any way i just found the solution as a temp to stop the throw expection then read the buffer for extra times then i can send again\u00a0\nSend from Samsung Mobileericcastro notifications@github.com wrote:if you have trouble receiving or getting an exception make sure you have either exited the app completely on your phone or set it to airplane mode before trying.\nthis is because WhatsApp becomes desconnected when PHP code becomes online, but shortly after, WhatsApp on your phone will automatically attempt to reconnect, messing up the PHP session.\n\u2014\nReply to this email directly or view it on GitHub.\n. @beldar can you send message more than 255 chars .. i tried to figure message attribute with encoding=\"raw\" but no way .. does anyone figured that ?\n. I also tried to ping s.whatsapp.net ... but it was unreachable via ping and nslookup\n. i tried to connect from different servers using many real ips .. and i also have this issue ... is the script working with you fine [ login / sending ] ??\nI can ping / trace / nslookup & telnet bin-short.whatsapp.net 5222\nIt connects successfully .. but after debugging the script using echo socket_strerror(socket_last_error());\ni found this error No connection could be made because the target machine actively refused it.\n. in this moment the server timeout ... can't connect at all .. i think it's a maintenance case in wup servers. \nA connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond\n. yes i think so because whatsapp can't connect from mobile too\nthey changed their system status to say that they have a problem right now\n. Service back t work again but it's unable to login .... is this general case or for me only ??\n. is it fully working ???\n. @waninkoko \nGreaaaat Work Man ......... :+1: \nI tested it ... woooooooooooork wooooooooooow Amazing\n. I noticed that it worked only one time ... but it didn't work again after that ... can you make sure about that ??\nIt Do Login But Sending Message / RequestLastSeen Not working \n. @Timvanelsloo I tried to do that but i still can send the message from PHP script but it don't deliver to the other side in IPhone \n. Also last seen request not working\nSend from Samsung MobileAndrea notifications@github.com wrote:There is a syntax error on line 488 of file protocol.class.php (return ret;)\nLogin works, message works, but sending image does not work.\nAnyone experiencing the same problem?\n\u2014\nReply to this email directly or view it on GitHub.\n. Yes This happen to me also .. i think there is a different way or something lost here like a parameter should be increase to allow the server to accept large data\nlike : long_msg or something else by binary\n. @Starsong ... is it working with you with big size messages ??\n. does anyone can figure the missing part in the code ??\n. i found that message must be at max 255 chars to be delivered ..  is this mean anything for anyone ??\ni think there is something must be written after 255 chars to accept all of the message and deliver it \n. @beldar did u test the same ( encoding=\"raw\" ) with chat attr ??\nis it increase the limit of chars ??\ni tried to add it to Chat attribute .. but i still can't send message more than 255 chars any ideas ??\n. Query:\nArray ( [cc] => 965 [in] => ** [lc] => KW [lg] => ar [mcc] => 000 [mnc] => 000 [method] => sms [id] => 6368618** [token] => f185c2ad3d7d53633ded0553c58aa153 [c] => cookie ) \nResponse:\nstdClass Object ( [status] => fail [reason] => bad_param [param] => id ) \n. I edited it in example.php\nAnd now am receiving the too_recent failure .. just waiting here\nThanks for your great aid .. ;)\n\nENG. Islam Shaban\n7elool Technology\nwww.7elool.com\n-------- Original message --------\nFrom: Max Kovaljov notifications@github.com \nDate:\nTo: venomous0x/WhatsAPI WhatsAPI@noreply.github.com \nCc: eslamo mr.eslamo@msn.com \nSubject: Re: [WhatsAPI] Problem in requestCode (#322) \n[id] in $query looks suspiciously like an IMEI code. Isn't it supposed to be a hash?\nmd5(strrev($imei));\n\u2014\nReply to this email directly or view it on GitHub.\n. I did it and you must also edit it in registerCode() and checkCredentials() functions\nNow i have a problem here that i can't send message ... i did login correctly and retrieved my account data\n[status] => ok\n        [login] => *****************\n        [pw] => rM7s*****************qL3nMm4=\n        [type] => existing\n        [expiration] => 1397762445\n        [kind] => free\n        [price] => US$0.99\n        [cost] => 0.99\n        [currency] => USD\n        [price_expiration] => 1369367311\nbut still can't send a message to any whatsapp numbers .. any ideas\n. Hello @shirioko\nThis is My page source / result\n``` xml\ntx  \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  3\u00f61\u00c2\u02dc\u017d\u00e3\u00d9i#B|>\u00ce\u00f9\u201d\u00b6en\u00e4\ntx  R,\u00c3\u0015\u00bb\u00e4w\u001a\u00d29bj\u2026\u00bc\u000f\u2122\u00cd \u00b6\u00f0\u00f8\u00baNt^_\u000b\u00d1v6802b\u2030br\u00e5\u00d6\u0012\u00b1\u0018\u00b7Q\u00b3\u001d\nrx  '\u00eb\u00e5\u00d8J\u001b\u00a3L\u2014\u0153`3\u00f6'pJg\u00cf\u00fa~\ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    This is an example!\ntx  \n```\n. Thanks man it worked :) :+1: \n. hi,\nfirst you must think about your issue here..\nyou have 200 numbers and you can only send for 20 each time.\nso first you must have an array of all your numbers then split it into 10 arrays and send to each array of them individually.\nyou can use a function like this to split the main array into small arrays\nphp\n/**\n* Array split - Split array in $pieces\n*\n* @param array\n* @param int - Number of pieces\n* @return array - Split array (multidimensional)\n*/\nfunction array_split($array, $pieces=2)\n{\n     // Less then 2 pieces?\n     if ($pieces < 2){\n         return array($array);\n     }\n    $newCount = ceil(count($array)/$pieces);\n    $a = array_slice($array, 0, $newCount);\n    $b = $this->array_split(array_slice($array, $newCount), $pieces-1);\n    return array_merge(array($a),$b);\n}\n. what about   sendGetServerProperties ??\nis there any solution for that ??\n. ",
    "grssnbchr": "Hey - I tried this as well and did as you specified. I am also using Android v.2.8.1504 as @ariaveta above, but as you say, that does not seem to matter. I analysed the network traffic in Wireshark and found that, as soon as $w->Message() gets executed and the request sent, I receive a [TCP ACKed Lost Segment] message: \n    3694    897.894890  173.192.219.156 10.0.2.15   TCP 60  [TCP ACKed lost segment] xmpp-client > 46793 [ACK] Seq=128 Ack=471 Win=65535 Len=0\nWhat happens afterwards, I don't know.. fact is that the message does not get sent. I have made sure that I entered everything correctly. \nDoes it work for you and what device account do you have? It might really be because your code, the code of venomous0x only works for iPhone?!\nThanks for the help \nWinston\n. ",
    "Osamahmad": "Thank you for reply.\nCan you give me any guide to solve this problem ? \nWaiting you \nThanks in Advance\n. thanks a lot I will try it now \nbut where to add this code? \nin the message function ?\n. It's still sending \ufffd for each character and it's print this in the Browser  \"\u00e5\u00e1\u00c7 \u00e6\u00c7\u00e1\u00e1\u00e5\" \n. maybe I must use parse function ? \nthis is example.php\n<?php\nrequire \"whatsapp.v2.php\";\n$wa = new WhatsApp(\"full number without + or 00\", \"password\");\n$wa->Connect();\n$wa->Login();\n$wa->Message(time().\"-1\",\"97366666666\",\"\u0645\u0631\u062d\u0628\u0627\");\n?>\nand the whatsapp.v2.php is the same like the zip file without any change\n. Finally I solve the problem \nI'm using Notepad++ only I change the encoding form then menu -> Encoding -> from \"Encode in ANSI\" to \"Encode in UTF-8\"\nThanks all for help \n. thank you for advice \n. ",
    "stvnwrgs": "I have the same Problem in the PHP Version with my Login. After 30 Seconds the limit is exceeded. Also removing UTF-8 from  the auth function is not working.\n. ",
    "cubiic": "Thanks for your welling to help @xTraXx , but are you sure it is working ? with any network ? I tried the example.php file , by running php example.php , and changed the msisdn and the password as you said , but still getting some sort of weird output something like : \n \n \n \n?8????~_????Xbm9uY2U9IjI5MTg4NzIwNTAxMyIscW9wPSJhdXRoIixjaGFyc2V0XV0Zi04LGFsZ29yaXRobT1tZDUtc2Vzcw== \n. can u share one simple example for demonstration ? like to share it with gist or anything , at the moment I tried ur techniques and still the example code is not working at least . \n. ",
    "juanjosezg": "I have the same problem :\nhttp://i.imgur.com/aVd7n.png\nI just got the account info, but messages are not delivered\n. ",
    "ralphmyw": "i wanna know too. And what is the video format supported? is it a must to be mp4?\n. Great, it works as a charm.\n. anyone has idea how to create a new group ?\n. Do you mean message like this?\n=== rx  < message from=\"XXXXXXXXXXXX@s.whatsapp.net\" id=\"0.23223300 1347889933-8\" type=\"chat\" t=\"1347889933\" >\n=== rx  < received xmlns=\"urn:xmpp:receipts\" >< /received >\n=== rx  < /message >\nIf so, is there any way to actively poll that from server? It seems now it's randomly come out when I try to login to whatsapp.\n. Hi yairnet,\nYou said \"For example, 50 messages sent only 47 were successfully ...\", would I know how you check if the message is delivered? Are you checking the message receipt?\nI am trying to check the receipt but it seems it come back in a random way and the response rate is quite low. (e.g. 10 msg but only 1 or 2 come back for my case). I am sure that all the 10 messages are being sent (as i am sending to my own account). Do you share how you check the msg delivery status?\nThanks,\nRalph\n. Hi yairnet, \necho the message is a number, do you mean something like this?\n\n$w->Connect();\n$w->Login();\n$w->Message(time() . \"-1\", \"*_\", \"msg1\");\n$w->Message(time() . \"-1\", \"*_*_\", \"msg2\");\n$w->Message(time() . \"-1\", \"_**\", \"msg3\");\n....\nSo you are checking the deliver status on the client phone rather than using the message receipt? \n. It would be a great feature!!!\n. works like a charm.... really great work arthursc \n. cool, thanks for your info. I tested and sending movie is working fine.\n. oo, really?? audio in which format? m4a ? caf? let me do some testing now\n. Just tested m4a,caf and mp3 all working. Great finding.\n. I think try add a sleep(3) at the end of your php will help a bit. Sometimes I found that the php process quit before the message is sent.\nmeanwhile, if you would send multiple message, maybe you could use $msgid = microtime().\"-1\";\n. Actually it is not necessary to use .\"-1\", you can use .\"-2\",.\"-3\"... I tried it up to \"-100\" and it still works. Just that I now usually use \"-1\" to \"-9\" as I never receive message receipt for those \"-1x\" or higher\nI added a sleep(3) at the end as I found my last message usually not sent... hope it helps.\n. You using iOS devices? you should use your wifi address rather than MAC?\nan example\nnew WhatsProt(\"12345678\", strrev(\"AA:BB:CC:DD:EE:FFAA:BB:CC:DD:EE:FF\"), \"your name\", $debug);\n. ya, same issue in here.\n. Same problem when activated some accounts with 2.8.9 version. \n. i unblocked a one number via emailing them. It takes me 2 week.\n. same problem here\n. ",
    "tlenss": "@vkotovv Could you share the two changed bytes?\n. Thanks man! Works like a charm...\n. ",
    "thesang": "It works!! thanks~\n. ",
    "gerswin": "yep is broken again\n.  cdesjardins commented on 800c90c a day ago\nOK, now I have more time to look at this, I just pushed some changes to the php/protocol version of whatsapi, here is what you should do:\n1) pull the latest from git://github.com/cdesjardins/WhatsAPI.git\n2) goto WhatsAPI/php/protocol\n3) edit testprotocol.php with your number/imei (not reversed or hashed, just the straight ID)\n4) in the call to $w->Message() change the **** to a target phone number\n5) run\ncheck this\n. ericblade good idea! \n. great! i will wait that post\n. works for me.\n. just that. no more, and it works \n. <?php\n$str = strrev (\"YOURIMEI\");\necho md5($str)\n?>\n. try BlueStacks maybe you are blocked \n. @Juliopp you only chage 0x04 by 0x01?\n. @adasmalakar I was wondering, what i need to change  whatsprot.class.php\n. @adasmalakar  try this download BlueStacks and install whatsapp and heywire for get a valid number and try\n. @Juliopp do you know how to get messages received?\n. i think u need to remove THE and put your code\n. examples? anyone?\n. your welcome!\n. The API is broken, u know that isn't it?\nSent from my iPhone\nOn 05/11/2012, at 15:32, fightback notifications@github.com wrote:\nnothing happens =(\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/57#issuecomment-10085472.\n. Wtf\nEnviado desde mi iPhone\nEl 30/09/2012, a las 11:56, montasir notifications@github.com escribi\u00f3:\n\u0645\u0631\u062d\u0628\u0627\u064b\u060c\n\u0644\u0642\u062f \u062d\u0645\u0644\u0651\u062a WhatsApp Messenger \u0639\u0644\u0649 \u062c\u0647\u0627\u0632 \u0623\u064a \u0641\u0648\u0646 \u0627\u0644\u062e\u0627\u0635 \u0628\u064a.\n\u0647\u0648 \u0643\u0646\u0627\u064a\u0629 \u0639\u0646 \u062a\u0637\u0628\u064a\u0642 \u0644\u0644\u0645\u0631\u0627\u0633\u0644\u0629 \u0627\u0644\u0641\u0648\u0631\u064a\u0629 \u0623\u0639\u062f \u0644\u0644\u0647\u0648\u0627\u062a\u0641 \u0627\u0644\u0630\u0643\u064a\u0629 \u0648\u0645\u0646 \u0634\u0623\u0646\u0647 \u0623\u0646 \u064a\u063a\u0646\u064a\u0643 \u0639\u0646\n\u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629. \u0643\u0645\u0627 \u064a\u062a\u064a\u062d \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0635\u0648\u0631 \u0648\u0627\u0644\u0641\u064a\u062f\u064a\u0648 \u0648\u063a\u064a\u0631\u0647\u0627 \u0645\u0646 \u0627\u0644\u0648\u0633\u0627\u0626\u0637!\n\u0625\u0646 \u062a\u0637\u0628\u064a\u0642 \u0648\u0627\u062a\u0633\u0627\u0628 \u0645\u062a\u0648\u0641\u0631 \u0644\u0644\u0623\u062c\u0647\u0632\u0629 \u0627\u0644\u062a\u0627\u0644\u064a\u0629: \u0623\u064a \u0641\u0648\u0646\u060c \u0623\u0646\u062f\u0631\u0648\u064a\u062f\u060c \u0646\u0648\u0643\u064a\u0627 \u0648\u0628\u0644\u0627\u0643 \u0628\u064a\u0631\u064a.\n\u0648\u0647\u0648 \u0644\u0627 \u064a\u062a\u0637\u0644\u0628 \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644 \u0623\u0648 \u062d\u0641\u0638 \u0627\u0633\u0645 \u0645\u0633\u062a\u062e\u062f\u0645 \u0648\u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631. \u0643\u0645\u0627 \u064a\u0639\u0645\u0644 \u062a\u0645\u0627\u0645\u0627\u064b \u0645\u062b\u0644\n\u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629 \u0648\u064a\u0633\u062a\u062e\u062f\u0645 \u062e\u0637\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a \u0644\u0644\u0645\u0631\u0627\u0633\u0644\u0629.\n\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0627\u0644\u0628\u0631\u0646\u0627\u0645\u062c \u0627\u0644\u0622\u0646 \u0645\u0646 \u0647\u0630\u0627 \u0627\u0644\u0631\u0627\u0628\u0637 http://www.whatsapp.com/download/ \u0648\u0642\u0644\n\u0648\u062f\u0627\u0639\u0627\u064b \u0644\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629.\n\u200f\u0645\u0646 \u062c\u0647\u0627\u0632 \u0627\u0644\u0640 iPhone \u0627\u0644\u062e\u0627\u0635 \u0628\u064a\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/78#issuecomment-9015102.\n. Check testprotocol file inside php scr\nEnviado desde mi iPhone\nEl 07/10/2012, a las 07:23, sixbeat notifications@github.com escribi\u00f3:\nHello\nI have no idea how to send an image.\nSending messages works fine with the terminal on mac.\nBut how do I send an image?\nSorry for the bad english :/\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/107.\n. It works for me\nEnviado desde mi iPhone\nEl 07/10/2012, a las 09:00, sixbeat notifications@github.com escribi\u00f3:\nHmm, It doesn't work for me, and I am pretty sure I am doing something\nwrong.\nSent from my iPhone\nOn 07.10.2012, at 14:42, gerswin notifications@github.com wrote:\n\nCheck testprotocol file inside php scr\nEnviado desde mi iPhone\nEl 07/10/2012, a las 07:23, sixbeat notifications@github.com escribi\u00f3:\nHello\nI have no idea how to send an image.\nSending messages works fine with the terminal on mac.\nBut how do I send an image?\nSorry for the bad english :/\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/107.\n\u2014\nReply to this email directly or view it on GitHub.\n\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/107#issuecomment-9208007.\n. Try with virtualbox and ubuntu. It work for me\nEnviado desde mi iPhone\nEl 09/10/2012, a las 16:49, kirthar notifications@github.com escribi\u00f3:\nTry Conecting and Login before you send the message, like this.\nrequire '../src/php/whatsprot.class.php';\n$sender =   'SENDER';\n$imei   =   'IMEI/MAC';\n$w = new WhatsProt($sender, $imei, null);\n$w->Connect();\n$w->Login();\n$w->Message('ID', 'NUMBER', 'TEXT');\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/108#issuecomment-9280090.\n. ",
    "AppsP": "guys,\nit's broken since last night ... and my phone number is blocked ?\nit happens to you ?\nhow can unblocked it and use whatsapp again from my mobile?\n. how can I get the password of an iphone device ??\n. whatsapp changed the plan ..\nthis API didnt work since last night.\nwe need to know the new plan..\n. Guys,\nit's working fine for me :)\nthank a lot!\ncan we send an image using this changes?\n. ",
    "jfuentesc": "Thanks adasmalakar.  Changing again the 2 bytes of the Login function works again for me.\n. This people (http://www.whatsapp-api.com/try-it.php)  of Hong Kong are able to send it!!!\nMaybe we can try to know how they do it!!\n. I've a theory...\nWhatsapp has created new rules to block accounts.  And since today at 12.00 GMT (aprox.) still has increased them.  F.Ex.  The broadcasting messages doesn't works in old clients (using Bluestack).\nIn this new stage they're blocking with a few message sents (3,5, 15) no limit by messages, (limit by time that one batch process it's executed).\nMy theory (and i've read other people that ask it), it's that every time that we make a login, or we make a send, new password it's returned, and should be updated).\nAlso i have a number where i've just sent more than 20 messages in less than 5 minutes (to 2 phones of myself), and i couldn't block it... That's very strange..\nMaybe we need to spy again the information transfered between new clients and whatsapi, to see if it sends something different.\nAnybody nows if this happens only with Whatsappi, or also with Yowsup?  Because if they do fine, we can compare the code with it...  It's easy to migrate from Python to asp or php.\n. Tomorrow i will give you one card and the password, and some numbers to send test without limit J\nThanks\nDe: Max Kovaljov [mailto:notifications@github.com] \nEnviado el: martes, 22 de enero de 2013 19:36\nPara: venomous0x/WhatsAPI\nCC: jfuentesc\nAsunto: Re: [WhatsAPI] Block Number Problem! New Update. Block number if send 19 msg (#251)\nEmail me your credentials and a list of target numbers and I'll test it for you using WhatsApiNet (I'm not willing to risk my own dev number)\n\u2014\nReply to this email directly or view it on GitHub https://github.com/venomous0x/WhatsAPI/issues/251#issuecomment-12558917 . \nhttps://github.com/notifications/beacon/Jshd8sI44GVrKZBvymxqKMh1RnoAnUDc0m4Gvilxh2Kgjgh2-tKdaRx4_zqFXcxg.gif \n. @shirioko -  Where i can send you a pair of test numbers when you can send all that you want?\nThanks\n. Dear Walter,\nThe algorithm of blocking SIMs are very dark, and improved to avoid Spam.   F.ex... With Bluestack we had a pure Whatsapp and it blocked SIMs each 2500 messages, 1250, 500 and at the end 300 messages.\nWith Whatsapi, i was be able to launch between 500-1000 messages, \nIn my latest test some days ago i had two types of responses\na)  It blocked 10 SIMs in 5-6 message\nb) I send 300 messages with other number without any kind of problem, and was not blocked..\nMy theory ,and also questions are:\na) There is some kind of check to determine if a message is spam or not to block the sim\nb) The number of the SIM can be a factor that determines the kind of checkings to do. \nc) Time of sending message is not a significative indicator... I've make sends each hour, with a maximum of 5 messages daily and they were blocked\nd) Number of logins is significative????    Should we made a login each time we send a message?\ne) In the line of Beldar,  Message have a correct composite?  And the detect with a batch process that are not ok?\nMaybe they send a token in the login, or each message, that should be used in the composite of message?\nf) Some kind of Black IPs?\nSorry, i can't help more, only explain my issues.\n. ",
    "Xairoo": "I have the same problem.\nI registered WhatsApp with an iPhone - also changed the iPhone and did the WhatsApp re-registration.\nBut... i don't see any accoutn_info output. Only if I use print_r($wa), I'll get some info. Looks like the paid account (app)\n:)\n. Thanks for the update, but now it takes very long and sometimes i get an internal server error 500.\nAlso i don't get any output.\n. ",
    "falomundo": "Hello,\nWith this version, i cant connect to the server:\nI get the following errormessages:\nWarning: socket_connect(): Host lookup failed [-10001]: Unknown host in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 200 \nWarning: socket_send(): unable to write to socket [32]: Broken pipe in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 118 \nWarning: socket_read(): unable to read from socket [107]: Transport endpoint is not connected in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 124 Notice: Undefined property: WhatsProt::$challengeArray in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 109 \nWarning: socket_send(): unable to write to socket [32]: Broken pipe in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 118 \nWarning: socket_read(): unable to read from socket [107]: Transport endpoint is not connected in /var/www/whatsapp/php/protocol/whatsprot.class.php on line 124 \n. Hello again,\nSo Whatsapp is back now and I tried it once more.\nI observe a slow login or i get a timeout after the max_timeout.(5 minutes).\nAnybody else observed a similar behaviour?\n. I had to edit the testprotocol.php to limit the endless loop. It killed th firefox all the time.\nIt looks like, that the login is working, but there are no signs of sending messages.\nJust the $this->read() in the Login() hung from time to time.\nLater I tested this with the Whatsapp.class.php. with the same result.\n. Ok, thank you for this information and the effort of everybody.\n. I downloaded the latest version  9cc22c9, edited the testprotoco.php and voila. It works!\n. ",
    "muslimsg": "@falomundo : how is it working? I downloaded the latest version and dont know which file to run ?\nplz help me\n. @developrch : Man can you show me php code you to use it.\nI tried below code but I get output as \"Array\" only\nfunction getStatus($number)\n    {\n        $country = substr($number, 0, 2);\n        $number = substr($number, 2);\n```\n    $status_url     = \"https://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=\".$country.\"&me=12345&u[]=\".$number;\n    $status_content = file_get_contents($status_url);\n    $status_xml     = simplexml_load_string($status_content);\nif(!$status_xml->array->dict) return null;\n\n$status            = array();\n$status['text']  = strip_tags($status_xml->array->dict->string[1]->asXML());\n$status['time']   = intval(strip_tags($status_xml->array->dict->integer->asXML()));\n\nreturn $status;\n\n}\n```\necho getStatus(\"COUNTRY-CODE_MOBILE_NUMBER\");\n. @developrch : man this is not working now...\nhttp://dev.developr.ch/whatsappstatus/index.php\ncan u suggest alternative?\n. guys atleast suggest something for php. I dont understand python\n. just one question..\nbefore we were able to verify without login... now does it require login for verification?\n. @nitam : Kindly reply what  g0g0l asked. Please let us know how to use RequestLastSeen function in php ? what exactly we have to mention to get the result?\n. @nitam : I don't see in your example above the mobile number of which we want to know Last Seen Time.\nCan you please explain where to use your code... in testprotocol.php ? \n. @g0g0l : with your code I get  \"Array ( )\" as print data \nhow to get the timestamp ?\n. @g0g0l : in the old version of this API there was this function\n$msg = $wa->RequestLastSeen(\"$country_code$mobile_number\");\n$wa->parse_last_seen($msg);\nand it was printing the last seen time.\nisnt there any function like this now?\n. @nitam :\nI am using below code but I am not getting last seen time. can you help me please.\nIt is sending  message but not showing last seen time\nphp\n\n<prequire \"whatsprot.class.php\";\n$wa = new WhatsProt(\"FROM_MOBILE_NO\", \"IMEI\", \"Nickname\");\n$wa->Connect();\n$wa->Login();\n$msgid = time()-1;\n$dst = TO_MOBILE_NO;\n$msg = \"Hello\";\n$wa->Message($msgid, $dst, $msg);\necho \"\\nLast seen $dst :\";\n$wa->RequestLastSeen( time() . \"-1\", $dst );\nwhile( TRUE ) {\n$wa->PollMessages();\n$buff = $wa->GetMessages();\nif( !empty( $buff ) ) {\nprint_r( $buff );\n}\nsleep(1);\n}\nexit(0);\n?>\n. plz help guys\n. yes its not working... from last one hour now...\n. question 1) - how to change the profile pic with yowsup?\nquestion 2) - I registered my number with yowsup. Now if I put the sim card into a mobile phone and login will the password change? If not can I set the profile pic via mobile phone?\n. any solution found?\n. guys need a solution for PHP. kindly help\n. whats alternative or solution for this link\nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=01&me=123456&u[0]=123456789 ?\nhow to check if someone using whatsapp or not using php ?\n. @ruriimasu : man can you tell me how to install dateutil... I am getting same error. I searched google but not getting exactly how to install dateutil\n. @shirioko : thanks... I run ez_setup.py and it installed something. but I am getting same error... plz help\n. ok I downloaded the file and now shud I move all the files in \"python-dateutil-1.5\" into c:/Python27 ?\n. man Please... I know how to use API... please help me to install this dateutil. I am new to python... I know only PHP\n. I ran it and got this error:\nwhat command to give?\n\n. I installed dateutil with following command\npython setup.py install\nnow when i run  python ./yowsup-cli -c config.example -d --requestcode sms\nI get error \"config file is invalid\"\nmy config.example is as below\ncc= #if not specified it will be autodetected\nphone= My Mobile number without country code\nd=\npassword=\nplease help guys\n. @ruriimasu : so in config.example I have to write following?\ncc= #if not specified it will be autodetected\nphone= My Mobile number WITH country code\nd=\npassword=\n. my config.example I have the following:\ncc= COUNTRY CODE\nphone= MY MOBILE NUMBER\nd=\npassword=\nI did this about still getting message config file invalid...\ncan anyone send me correct config file so that I can just change the values... Guys I am just one step away...\n. ",
    "kcsimbu": "that file also not work\n. how to send message through whatsapp using php\n. ",
    "zstars": "I don't really have a blackberry so I haven't been able to check properly, but yes, there might be some issue. A friend provided me with an IMEI and it didn't seem to work either.\n. The third and fourth bytes of the login packet (aka, the bytes that follow \"WA\") seem to change periodically, for some reason (anyone knows what those bytes are?)\nA combination that currently works is:  (0x01, 0x01), replacing the previous 0x00, 0x04.\nJust change them to that and it should work (does for me).\n. Yep @vkotovv, done.\n. @vnikiet Though I haven't really made all that many tests, for what I've seen when a message is not acknowledged the server, after a short time, tries to send it again. If the client still refuses to acknowledge it, this happens a few times and eventually the server seems to either give up on that specific message or to retry after a long and seemingly random time.\n. Seems to be working to some people such as @cdesjardins but not to others, such as myself (though I haven't been able to physically get a blackberry to test properly). \nMaybe it uses a different password depending on the model/version? \nIf anyone has some insight into the issue it would be welcome :)\nMeanwhile, I downloaded the cod file. In case anyone wants it, this is the direct link, so that you needn't mess with your user-agent: http://www.whatsapp.com/ota/build/RELEASE/5.0.0/OTA/WhatsApp-20.cod\nUnfortunately my knowledge about the blackberry is very limited, and I don't think I have the time/ability to disassemble it. Around the web there are mentions of a \"coddec\" blackberry decompiler, but I haven't been able to find links and it doesn't sound very usable. \n. Nice @fquinto! \nI've had a quick look at the code and I guess the password is being used, for instance, here:\n(On FunXMPP$Login's generateResponse method)\njava\n    aload_6  \n    invokevirtual java.lang.StringBuffer append( java.lang.StringBuffer, java.lang.String ) // pc=2\n    invokevirtual_short .toString // idx=2 pc=1\nThis IMHO suggests that generateResponse is receiving the password as its sixth argument. Unfortunately I have so far been unable to trace it back, because nothing seems to call generateResponse :(\nSomething kinda must be calling it, but maybe it's not been properly resolved by the decompiler and is referencing the  interface method by number or so.\nIt's also mildly interesting (and somewhat unrelated) that there is a DEBUG_PASSWORD constant defined:\njava\n    arrayinit [W, A, 4, B, B]\n    putstatic DEBUG_PASSWORD // Constants\nThough I guess that doesn't help us much.\n. Whatsapp messages are locally stored on an encrypted sqlite3 database, if backups are enabled on your whatsapp setting, and if you did not delete the messages or the backup. Depending on the platform, it uses a different encryption method. If I remember well, there used to be some thread on XDA Developers with some Android decryptors. For other platforms, such as Blackberry, decryption will probably be much harder.\nPulling past messages from the server itself is however most likely impossible, because they allegedly do not store them.\n. Messages are supposedly not saved server-side, so finding a way to retrieve all messages is very unlikely (even if they are lying and they are saved server-side for some shady reason, there would probably be no reason for them to provide access through their API). You can read, at most, not acknoledged messages that you receive, which will generally be recent ones.\n. Looks nice, you should indeed upload everything to github\n. According to certain \"research\", the magic bytes (which are two, let's call them i and j) do NOT seem to be in the range (i =   0..40; j = 0..40). It's a bad sign, because so far all magic-bytes (to my knowledge) have been rather low.\nMy information is not fully reliable though, someone might want to verify.\n. @spookyman No idea about those, have they ever changed?\n. Not exactly a MITM attack, but just an idea, if someone had a non-updated iPhone (with a version old enough so as not to encrypt packets), it might be easy to sniff traffic by setting up a public wifi network, and sniffing the packets through airmon-ng or similar.\n. Any chance of someone uploading the decompiled WP8 client? :)\n. @hermanho @saschagehlich @Starsong \nI think I've fixed (well, though through a very quick/bad kludge) one of the bugs with WhatsAPINet. Message decryption seems to be working well now, though the server is still kicking me out. Dunno why, I suspect that some message is not being sent properly, maybe the presence one.\n. Ok, added\n. ",
    "globz": "I just did some testing with the Blackberry and this is how it goes :\nget your IMEI\nreverse IMEI\ncreate MD5 hash from reverse IMEI\njust like @cdesjardins mentioned.\n. I got it to work on my blackberry, you can read more here http://kittybomber.com/blog/2012/whatsapp_blackberry/\n. Blackberry 9700 / os v5.0.0.862\n. okay, this is what I use for this test :\nAccount created on september 11 2012\nBlackberry 9700 / os v5.0.0.862\nWhatsapp v2.8.1914\n. Ok, I want a follow up on this issue, anyone else besides me and  cdesjardins got to make it work on a blackberry?\nPlease read this if you want to know how : http://kittybomber.com/blog/2012/whatsapp_blackberry/\nWhen you are done testing please post your result and what you are using for the test, in this format :\nAccount created on september 11 2012\nBlackberry 9700 / os v5.0.0.862\nWhatsapp v2.8.1914\n. ",
    "Juliopp": "Yep, I endorse that belief\n. As @zstars just said, this change does work. Now I can send, receive, and do everything without problems. For those who are still dealing with problems, here\u00b4s a copy of my folder, which is not more than the working copy of this project, over what I don\u00b4t have any right. I mean: It\u00b4s not my work, I\u00b4m just uploading it in case it may help anyone. :)\nhttp://www.comprarcerditos.com/hopeItWorks.zip\n. Finally got it working. I\u00b4ll post what I did in some minutes, hoping it will help someone else.\n. As @zstars said (link), this change does work. Now I can send, receive, and do everything without problems. For those who are still dealing with problems, here\u00b4s a copy of my folder, which is not more than the working copy of this project, over what I don\u00b4t have any right. I mean: It\u00b4s not my work, I\u00b4m just uploading it in case it may help anyone. :)\nhttp://www.comprarcerditos.com/hopeItWorks.zip\n. I\u00b4m glad that, at least, it worked for @gerswin. @adasmalakar what\u00b4s your exact error?\n@ericblade, could you use this method to check if the password is right? Mine was wrong :)\n. For easier use, replace\n$wa = new WhatsApp(\"CountryCodeWithout00+Number\", \"MD5OfReversedIMEI\", \"Nickname\");\nwith\n$wa = new WhatsApp(\"CountryCodeWithout00+Number\", md5(strrev (\"IMEI\")), \"Nickname\");\nPS: oh, i just discovered how to close issues\n. This is an authentication fail. Again, try using this method to check if the password is right? Mine was wrong :)\n. @gerswin I changed that, something more about utf-8 (idea by @dsdsfga here) and I think that something more. I cannot remember, I\u00b4ve been struggling with this for too much time... Sorry ^.^\n. @adasmalakar replied here.\nand, answering your question, what? I\u00b4m sorry, It\u00b4s 2 AM here and my brain thinks slowly :P\n. Well, that\u00b4s YES for 2 people, NO for other 2. :) That\u00b4s a draw.\nBut, yes, that\u00b4s the issue: we need to guess if WhatsApp is accepting your password.\n. @gerswin I think that\u00b4s done flushing the inbox by running read() (that\u00b4s $wa->read();) command a few times, as suggested by @hubail here :)\n. Sorry for bumping this, but almost every socket error get solved by executing the php from the command line in administrator mode.\n;)\n. https://r.whatsapp.net/v1/register.php?cc=COUNTRYCODE&in=PHONENUMBER&udid=PASSWORD&code=THE CODE THAT WAS SENT TO YOU BY SMS WHEN YOU ACTIVATED IT\nIt will return OK if the pasword is valid, or Mismatch if the password is wrong.\nPS: this is the source\n. Well, once it is set, register does verify if the password is correct.\nJust take a look :)\nWith the correct password: Result\nWith the wrong password: Result\n. Just browse to your local whatsapp.class.php or whatsapp.v2.php file and replace \n$Data = \"WA\".\"\\x00\\x04\\x00\\x19\\xf8\\x05\\x01\\xa0\\x8a\\x84\\xfc\nwith\n$Data = \"WA\".\"\\x01\\x01\\x00\\x19\\xf8\\x05\\x01\\xa0\\x8a\\x84\\xfc\nAs @zstars said here.\n;)\n. Also, if that doesn\u00b4t make it work, check this thread out.\n;)\nGood luck!\n. ",
    "mostashaar": "same thing happens here. anyone can fix that?\n. ",
    "brittson": "zstars can you send messages with this change?\n. Juliopp Yes please post bro ... I am waiting.\n. Juliopp still no luck , i used your file and MD5 of reversed IMEI of an android phone. but cant send anything, Please help.\n. gerswin thanks for response ? i need to change the fields in example.php file right?or i need to do something more?\n. Ok thanks and can you please tell me how to get the md5 of reversed IMEI(the password) i mean what function you are using?\n. still not working, dont know whats wrong with me :(\n. I am getting this from wa object \nWhatsApp Object ( [_server:WhatsApp:private] => s.whatsapp.net [_host:WhatsApp:private] => bin-short.whatsapp.net [_Digest_Uri:WhatsApp:private] => xmpp/s.whatsapp.net [_Realm:WhatsApp:private] => s.whatsapp.net [_Qop:WhatsApp:private] => auth [_contype:WhatsApp:private] => STREAM_CLIENT_PERSISTENT [_device:WhatsApp:private] => iPhone [_whatsAppVer:WhatsApp:private] => 2.8.2 [_port:WhatsApp:private] => 5222 [_timeout:WhatsApp:private] => Array ( [sec] => 2 [usec] => 0 ) [_accinfo:WhatsApp:private] => [_account_status:WhatsApp:private] => [_account_kind:WhatsApp:private] => [_account_creation:WhatsApp:private] => [_account_expiration:WhatsApp:private] => [_incomplete_message:WhatsApp:private] => [_number] => \"Number\" [_password] => \"password\" [_nickname] => \"nickname\" )\nPlease help\n. yes i tried and its returning ok and returning result =new\n. Juliopp can you modify the whatsprot.class.php, cause previously creating object of this class works just great.\n. i got this msg in response............ \"response status=\"missing\" login=\"num\" result=\"me=num code=THE\" .....i am getting this with my another registered windows phone\n. anyways this is not the issue ... but i dont know why the code from @Juliopp  is not working... is it working for everyone else?\n. @Juliopp  i think whatsapp is responding to different phone differently , like i previously show my android phone result, replacing that with a windows phone giving timeout errors. Any idea?\n. @gerswin i am trying.\n. @gerswin used bluestack & haywire , still not working\n. response status=\"missing\" login=\"num\" result=\"me=num code=THE\" i am getting this with my another registered windows phone\n. its not working.\n. @cdesjardins please tell me how to do this with python?thanks\n. how is wassapp working?\n. But I cant send msg with the software :(,Please help, it shows exception once i open the chat window \n. Whatsapp is sending some \"whatsapp code \" to registered numbers !!! what this means also whatsapp updated its android client today\n. whatsapp password method is changed\n. password method is changed ,so if your mobile is updated with new version of whatsapp,msgs wont go\n. No\nSent from my Samsung Galaxy SIII\nOn 6 Dec 2012 13:03, \"kingk110\" notifications@github.com wrote:\n\nis there a way to send a message for multiple numbers?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/208.\n. This method not working for large volume\n\nSent from my Samsung Galaxy SIII\nOn 6 Dec 2012 15:48, \"z0rax\" notifications@github.com wrote:\n\nyes.\n$dst = \"TargetNumber\";\n$wa->SendMessage($dst, \"Message\");\n$dst = \"2ndTargetNumber\"\n$wa->SendMessage($dst, \"Message\");\nor as a function\nfunction sendIT($number, $str) {\n$wa->SendMessage($number, $str);\n}\nusage:\nsendIT(\"TargetNumber\", \"Text Here\");\nsendIT(\"TargetNumber2\", \"Text here\");\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/208#issuecomment-11079138.\n. What changes are there?\n\nSent from my Samsung Galaxy SIII\nOn 7 Dec 2012 18:25, \"javitolin\" notifications@github.com wrote:\n\nI don't know, this version is pretty new...\nOn Dec 7, 2012 2:46 PM, \"jonnywilliamson\" notifications@github.com\nwrote:\n\nREALLY?\nNone of the other 20 threads/issues right underneath your topic\nhighlighted this issue before?\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/214#issuecomment-11128945>.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/214#issuecomment-11129149.\n. in yowsup when i used v2 with mobile no & imei , i got a sms , then when i am trying to send sms code with -R then i am not getting the hashcode or anything instead getting an error on python!! anyone facing the same issue?\n. @rodero95 hi thanks for responding, so if i use this hashed password instead of using hashalgo(imei) in whatsapi ,then you can connect and send messages ?\n. @rodero95 let me check \n. @rodero95  I checked its worked , when i am in listening mode (-l), then its receiving all the msgs sent to this number , but when in interactive mode , msgs are not going !!\n. @filandlam  I used yowsup yesterday , registration works even in listening mode ,i am getting msgs , but sending msg is not working..\n. if you update your wa in your mobile ,and try to connect it with the php then it will not work ,though if you are using an older version ,then its working, so we need to find the new password method ,as sooner or later every wa android and ios client will be updated\n. @fheft Yowsup is already reading the password(the JSON data we are talking about) , after whole registration , i can even connect with whatsapp server with my newly registered number , it is also receiving incoming messages , but the problem is when i am trying to send msgs from this number its not working.\n. @shirioko is this working for you?\n. but now if you want to register a new number with v1 , then also its not working. \n. @jonnywilliamson great. thanks man\n. @kingk110 yes its working on php\n. @fefantom this api not working\n. what is this?\n. yes this is not working anymore :( is there any solution available ?\n. @jonnywilliamson :+1: \n. @kingk110 what is the new limit ?\n. @shirioko @Kingkong1 why you guys are discussing on email vs whatsapp thing , please focus on the issue , i tried to send 17 msgs then reregister and get a new password and then again send 17 ,but then i saw its blocked , question is how they are finding the that we are sending msgs which are not from official client ??\n. seems like they are blocking for 5 msgs now :(\n. It will show every number is registered\nOn Apr 25, 2013 12:23 AM, \"Manu Fuentes\" notifications@github.com wrote:\nthere some method or address to check if a number is registered ???\nthe following address apparently does not work\nhttps://v.whatsapp.net/v2/exist?in=number&cc=codecountry\nI tested with a number without an account, and shows me that the number is\nregistered\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/328\n.\n. yes its working , sorry, my servers fault\n\nOn Thu, May 2, 2013 at 1:48 PM, Max Kovaljov notifications@github.comwrote:\n\nWorks.\nWhich code are you using?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/333#issuecomment-17325738\n.\n. But did you check with the php api?\nOn May 3, 2013 9:08 PM, \"Max Kovaljov\" notifications@github.com wrote:\nRequesting SMS code on Windows Phone works, voice call verification works\non Android as well.\nP.S.\nI used MissVenom to sniff out whatsapp traffic on my HTC One X (Android\n4.1) and this came up:\nREQUEST:  https://v.whatsapp.net/v2/exist?cc=31&in=647**&lg=nl&lc=NL&id=%0d%8d%7f%ba%3b%84%b4%27%99%ed%cc%9b%0a%16%b9%7f%22M%ca%e2\nRESPONSE: {\"status\":\"fail\",\"reason\":\"incorrect\",\"sms_length\":6,\"voice_length\":6}\nREQUEST:  https://v.whatsapp.net/v2/code?cc=31&in=647**&id=abcdef0123456789&lg=nl&lc=NL&mnc=004&mcc=204&method=self&reason=&token=ff5ba9ca05c29ee834b4b28bf54d2169\nRESPONSE: {\"status\":\"attached\",\"code\":\"g0n3kDV7WMWeJaGWure4hcaACfg=\",\"retry_after\":64}\nREQUEST:  https://v.whatsapp.net/v2/code?cc=31&in=647**&id=abcdef0123456789&lg=nl&lc=NL&mnc=004&mcc=204&method=voice&reason=server-send-request-too-recent&token=ff5ba9ca05c29ee834b4b28bf54d2169\nRESPONSE: {\"status\":\"sent\",\"length\":6,\"method\":\"voice\",\"retry_after\":1805}\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/335#issuecomment-17401195\n.\n. :+1: \n. Well that's very bad... Why they change this often ;)\nOn May 3, 2013 9:29 PM, \"Max Kovaljov\" notifications@github.com wrote:\nNope, haven't received anything yet. Seems like they borked this as well.\nOh well, I didn't have any plans for this weekend anyway :')\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/335#issuecomment-17402397\n.\n. Hi can you guys please explain me, how this custom password works\nOn May 12, 2013 12:00 AM, \"kingofcracking\" notifications@github.com wrote:\n[image: capture decran 2013-05-11 a 21 29 53]https://f.cloud.github.com/assets/2884258/491896/d4b7bdb8-ba68-11e2-8082-2ad29249fc2f.png\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/343#issuecomment-17764942\n.\n. Yowsup registration working?\nOn May 17, 2013 12:45 AM, \"kingofcracking\" notifications@github.com wrote:\npff i abandoned and used yowsup instead\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/343#issuecomment-18022804\n.\n. Waiting for solution :(\nOn May 17, 2013 1:01 AM, \"Max Kovaljov\" notifications@github.com wrote:\nNo.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/343#issuecomment-18023720\n.\n. Challenge Accepted :D @WebWhatsApp , @shirioko they think they are better than us ...\n. Max lol :D\nOn Jun 27, 2013 5:47 PM, \"Max Kovaljov\" notifications@github.com wrote:\nOf course it's stored somewhere on the phone.\nGood luck getting it out though\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/385#issuecomment-20114257\n.\n. I really don't like how people directly go to conclusion without a little\nresearch.\nOn Jul 10, 2013 2:05 AM, \"Max Kovaljov\" notifications@github.com wrote:\nThis API works perfectly fine, I've just sent myself a message.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/398#issuecomment-20703331\n.\n. By using reverse engineering techniques\nOn Jul 16, 2013 4:10 AM, \"mofakfree\" notifications@github.com wrote:\nconst WHATSAPP_TOKEN =\n'Od52pFozHNWF9XbTN5lrqDtnsiZGL2G3l9yw1GiQ21a31a2d9dbdc9a8ce324ef2df918064fd26e30a';\n// Token used in request/registration code.\nconst WHATSAPP_USER_AGENT = 'WhatsApp/2.9.4 WP7/7.10.8858\nDevice/HTC-HTC-H0002'; // User agent used in request/registration code.\nI think there is an update for TOKEN\nHow can I get TOKEN to other devices .......\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/415#issuecomment-21009098\n.\n. We don't help spamming\nOn Jul 24, 2013 11:19 AM, \"TruthEdge\" notifications@github.com wrote:\nHello,\nI'm not opening this post to have duplicate i already follow up and read\nall other posts .\nhere is what we tried so far which we already burned over 1,500 Numbers .\n1- ( 1 ) message per hour ( blocked )\n2- ( 5 messages / hour ) - ( 5 contacts only )\n3- pull inbox before sending\n4- contacts sync before sending\n5- filter if there is no last seen cancel the sending operation\n6- purchased new phones to make original requests to whatsapp after that\nwe register them normally , ( registration don't have any issue as if we\nhave any number we registered but we didn't send any transmission from it\nwill stay active )\n7- test if it is related to number of contacts you are sending to them\ntried fail also .\n8- tried crons jobs\nand more\nWe are using only php API all this changes has been made tested on our\nchannels get us block each time on different ( transmissions amount ) some\nwas able to get 24 some 128 some 5 .\nI had enough with this and i need to stop getting blocked from whatsapp ,\ni have active clients who sends daily and this is really killing me i'm\nloosing channels all the day now the providers start questioning me .\nI'm here to offer developer who are able to work on PHP API sets of\nChannels to do tests on them .\nplease put your skype usernames and i will add you .\nRegards\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/428\n.\n. Yes same here\nOn Jul 26, 2013 9:25 PM, \"Manu Fuentes\" notifications@github.com wrote:\nYesterday I register multiple accounts, but I'll use today and are blocked\nwithout having sent any message, in my opinion whatsapp can detect accounts\nthat are logged with the API\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/429\n.\n. Yes current one works but only 10 message then block\nOn Aug 8, 2013 9:07 PM, \"Max Kovaljov\" notifications@github.com wrote:\nThe current one works\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/434#issuecomment-22331979\n.\n. i am curious about how whatsapp encryption works and how these passwords get generated \n. By the way Happy Christmas to you @shirioko :)\n. thanks Max , you are awesome :)\n\nOn Wed, Dec 25, 2013 at 8:48 PM, Max Kovaljov notifications@github.comwrote:\n\nWhatsApp uses RC4 keystreams for encrypting and decrypting data:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/rc4.php\nThe RC4 keystream key (20 byte) is generated from your password and\nchallenge data:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1352\nRC4 works with states, so the keystream state (contents of the keystream)\nchanges after every byte you encrypt.\nWhen you encrypt a byte, the state is processed, updated, and the\nencrypten byte is returned.\nThe same goes for decrypting. You need two streams on both ends, one for\nencrypting and decrypting.\nDecrypting an encrypted message is as simple as pushing the encrpted bytes\ninto the keystream for decryption, and decrypted bytes will pop out on the\nother end :)\nBiggest advantage of a state encryption system is that sessions cannot be\nhijacked, since the state of the keystream cannot be reconstructed without\nhaving ALL the sent or received data. Hopping in a session with a wrong\nkeystream or keystream state means that your data cannot be decrypted by\nthe other endpoint.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/562#issuecomment-31200714\n.\n. Great\n\nSent from my Nexus 7\nOn 23 Jan 2014 16:29, \"Max Kovaljov\" notifications@github.com wrote:\n\nSssst I'm pullig a Tarek here... (i.e. staying off the grid for a while\nand then suddenly popping up with something amazing)\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33114415\n.\n. Yes max do it please, you really work hard\n\nSent from my Nexus 7\nOn 23 Jan 2014 16:39, \"TruthEdge\" notifications@github.com wrote:\n\nI love the surprise thing\nAnd Btw, I want to suggest something , could you please do a donation page\nvia Paypal , I understand you have real work in Life and also we don't want\nyou to delay the work here so we'd like to pay you a small fee of what you\nare doing .\nRegards\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33114988\n.\n. Cool please post the donation link when you are free\u00a0   \n\n---Sent from Boxer | http://getboxer.com\nOn 23 January 2014 5:18:17 pm IST, Max Kovaljov  wrote:ARGH I don't even have time for this right now, too much stuff going on at the office >.<GitTipPayPal I'll sort it out when I get home  \u2014Reply to this email directly or view it on GitHub.\n. Max please accept my donation, thanks\nSent from my Nexus 7\nOn 23 Jan 2014 17:25, \"Tarek\" notifications@github.com wrote:\n\nhttps://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=T3MF9LNQBSW5A\nhttps://www.gittip.com/shirioko/\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33117741\n.\n. I donate to the PayPal link tarek posted , thanks\u00a0   \n\n---Sent from Boxer | http://getboxer.com\nOn 23 January 2014 5:44:04 pm IST, hgc2002  wrote:Uffff !!! so fast! money is like that, and that helps! I'll check all links then I'll tell you what I did.  \u2014Reply to this email directly or view it on GitHub.\n. Cheers bro ;)\u00a0   \n---Sent from Boxer | http://getboxer.com\nOn 23 January 2014 6:32:51 pm IST, Max Kovaljov  wrote:@brittson omygod my first donation! :O thank you so much! I think I've just hit a new milestone in my internet career :D  \u2014Reply to this email directly or view it on GitHub.\n. Great news, superb work man\nSent from my Nexus 7\nOn 28 Jan 2014 16:11, \"Max Kovaljov\" notifications@github.com wrote:\n\nEncryption fixed, I derped so hard that I put the socket tree reader\nmethod in the wrong class and was staring at the broken code for days\nwondering why I got all these weird values >.<\nProgress can be followed in my commits for shirioko/WhatsApiNet. I have to\nupdate the inbound and outbound node syntax, they're using a new format.\nE.g.:\nMessage:\nRECVD: \nRECVD:   Huewhuehue\nRECVD: \nTyping/paused:\nRECVD: \nRECVD:   \nRECVD: \nRECVD: \nRECVD:   \nRECVD: \nAnd lots more\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33467472\n.\n. Hi. Max I tried the new. Net api but it's not working, no messages are\ngoing but login is successful\n\nSent from my Nexus 7\nOn 28 Jan 2014 18:46, \"TruthEdge\" notifications@github.com wrote:\n\nPerfect.\nWe are all waiting till you finish whatsappapi.net so you can put them in\nphp.\nKeep the good work.\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33476841\n.\n. Thanks\n\nSent from my Nexus 7\nOn 29 Jan 2014 14:11, \"Max Kovaljov\" notifications@github.com wrote:\n\n@brittson https://github.com/brittson sending text fixed in\nshirioko/WhatsAPINet@3606cf6https://github.com/shirioko/WhatsAPINet/commit/3606cf69c7ffebcb517c602027b68d9d99b7433c\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33565541\n.\n. Great, will check today\n\nSent from my Nexus 7\nOn 2 Feb 2014 15:24, \"Max Kovaljov\" notifications@github.com wrote:\n\nRemember that contact sync is not a \"library\" but functionality and that\nContactSyncV3 has already been sorted out (see WhatsApiNet)\nI need to port the KeyStream and TokenMap classes to PHP and then we're\ngood to go.\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-33896484\n.\n. Hi max may I know when wauth 2 will be available, thanks for your hardwork\n\nSent from my Nexus 7\nOn 27 Jan 2014 16:51, \"Max Kovaljov\" notifications@github.com wrote:\n\nAs an array\narray(\"31650568134\", \"31650568123\", etc.)\n2014-01-27, Matthijs Otterloo notifications@github.com:\n\nAn how do i enter more numbers? (\"31612345678 , 31623456789\")??\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/595#issuecomment-33359394\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/595#issuecomment-33359505\n.\n. Great news man\n\nSent from my Nexus 7\nOn 27 Jan 2014 20:11, \"Max Kovaljov\" notifications@github.com wrote:\n\nWAUTH-2 will be available soon. I'm currently trying to get it to work in\nWhatsApiNet, I might start pushing commits tonight.\nPorting the fix to PHP should be fairly easy.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/595#issuecomment-33372669\n.\n. I really appreciate your work also your views, by the way go for Irish\ncoffee much better than energy drinks ;)\n\nSent from my Nexus 7\nOn 27 Jan 2014 20:15, \"Max Kovaljov\" notifications@github.com wrote:\n\nI have two deadlines coming up for work this friday though, so I might get\ndesparate enough to fall back into my energy drink addiction...\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/595#issuecomment-33372965\n.\n. so what is the solution ?\n\nOn Thu, Feb 6, 2014 at 2:43 AM, Ahmad notifications@github.com wrote:\n\nTanx :D @shirioko https://github.com/shirioko\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/603#issuecomment-34246173\n.\n. Max lol\n\nSent from my Nexus 7\nOn 3 Feb 2014 19:02, \"Max Kovaljov\" notifications@github.com wrote:\n\nBecause I have more important shit to do.\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/604#issuecomment-33954099\n.\n. What this function do?\n\nSent from my Nexus 7\nOn 6 Feb 2014 19:12, \"lahmacuns\" notifications@github.com wrote:\n\n@shirioko https://github.com/shirioko php version ? not work!!!\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/607#issuecomment-34323485\n.\n. fixed\n. @shirioko if you know how it works , i think you could share with others , otherwise what is the point of having an Opensource API ? I really respect your hard work regarding the API and I am sure everyone does but sadly i cant agree with you on this.\n. @shirioko Well  i am not talking about commercial use also , i tried last update , i send 11 messages to 11 different numbers during 24 hours period ,and now my number is block , so i think 11 messages is no where close to any commercial services, you please try this , may be i am doing something wrong but a clear idea will of course help, i used .net api and the console program (program.cs) it comes with. \n. I am talking about 24 hours not 1 minute @assegaf \n. Also i am not talking about any fault of anything , i am just curious about how blocking works \n. so its dependent on tokens ?\n. but how they determine which is spam and which is not ? as in my case i used it like i use on my mobile ? so whats the difference \n. do i need to change the password/or save from .dat file everytime i login or i can use the same password everytime ?\n. also i found an issue , when i change wart's whatsapi.dll with whatsapi.dll from github its always says could not dissect and i am talking about both updated ones \n. actually its funny that websites like http://www.whatsbulk.com/ can spam to thousands people from same number ( they have claimed ) , its very unlikely that whatsapp have different set of rule to help these guys @CodersBrothers \n. may be some people making other fools by providing wrong information \n. i checked today , it does not matter whether you use them or not \n. I tried with several numbers freshly registered \n. \n",
    "isseu": "Whatsapp implement ssl now... The protocol maybe have change?\n. ",
    "c0dr": "@Juliopp Your version also don't work for me \n\"Warning: socket_connect(): unable to connect [110]: Connection timed out in xxx/whatsapp.class.php on line 75\nWarning: socket_send(): unable to write to socket [32]: Broken pipe in xxx/whatsapp.class.php on line 81\nWarning: socket_read(): unable to read from socket [107]: Transport endpoint is not connected in xxx/whatsapp.class.php on line 107\n\"\nAny solution?\n. Use\nhttps://r.whatsapp.net/v1/exist.php?cc=COUNTRY_CODE&in=TELEPHONE_NUMBER&udid=PASSWORD\nStatus says ok or fail. Should be self-explaining :)\n. ",
    "zxcvbnmasdfgh": "My friends, I do not know how a way to penetrate and Watts up I want the whole way or pulled down the program with explanations in order to understand and thank you\n. ",
    "fquinto": "Hello everyone! (me first post!) I think is good idea to do a wiki documentation page. If you need help I can help in a lot of areas. I have information about BlackBerry application environment (whatsapp source code), but I can't test. I only can test in Android device's.\n. Hello all!\nAll information about this: https://www.box.com/s/nwb5kix4wunjxrphqdqj\nMD5SUM: d00578c6a7a19a892bcdf57e614a0843  decompiled_disassembling_files.zip\nThis is from WhatsApp v.7 for BlackBerry.\nI can NOT test anything on BlackBerry I don't have one.\n. Decode array number table\nYou can see that inside the decompiled code, often presents numbered arrays [69, 83, ...]. These are texts. You need a table to translate this numbers to text.\nYou can see my table that I used to \"translate\" code\nIt's interesting translate all code to read easily. Are there any volunteers to do this?\nInside me last post on this thread you can see a file (inside link) called: WhatsApp-42\\cod\\com\\whatsapp\\client\\Constants.java\nand inside same path, a file called: Constants_ok.java -> this file was \"translated\" using the table indicated.\nIn another words: when you see: arrayinit [69, 83, 38, 80, 80] is arrayinit [W, A, 4, B, B]\n. Closing the source code does not stop people continue doing spam. If you want to stop spam WhatsApp they will have to implement more security. I think WhatsApp is wrong this time and all you will get is bad publicity. Every day there are new emerging messaging systems. Without an API, official or not, you are less open to the developers. These messaging companies will must evolve (doing security) or die (because they haven't an API).\nAnother question is that the core of developers get an agreement with WhatsApp to develop an official API or something like that...\nThank you all developers, not for spammers.\n. Anybody have more information or new information to us? Can you publish the letter, email or legal document from WhatsApp? Maybe this is interesting to developers or community. Thank you.\n. @cdesjardins, thanks for the information.\n. ",
    "filandlam": "Yes it works very well thanks!\n. Hope this project get online again the soonest\n. Awesome!\n. Still getting error...\n. Same problem here...\n. in my case:\nFatal error: Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 110' in C:\\xampp\\htdocs\\whatsapi\\src\\php\\protocol.class.php:269\nStack trace:\n0 C:\\xampp\\htdocs\\whatsapi\\src\\php\\protocol.class.php(214): BinTreeNodeReader->readListSize(110)\n1 C:\\xampp\\htdocs\\whatsapi\\src\\php\\protocol.class.php(133): BinTreeNodeReader->nextTreeInternal()\n2 C:\\xampp\\htdocs\\whatsapi\\src\\php\\whatsprot.class.php(150): BinTreeNodeReader->nextTree('??RXr???:\u2302c?/??...')\n3 C:\\xampp\\htdocs\\whatsapi\\src\\php\\whatsprot.class.php(226): WhatsProt->processInboundData('??RXr???:\u2302c?/??...')\n4 C:\\xampp\\htdocs\\whatsapi\\debug.php(69): WhatsProt->PollMessages()\n5 {main}\nthrown in C:\\xampp\\htdocs\\whatsapi\\src\\php\\protocol.class.php on line 269\n. Hi jonnywilliamson, any chance you can further describe the registration process please?\n. @rodero95 The v2 hash doesn't work for me, on this line ($wa->encryptPassword() removed) it gives \"Wong Password\":\n$url = \"https://r.whatsapp.net/v1/exist.php?cc=\".$countrycode.\"&in=\".$phonenumber.\"&udid=\".$imei;\nIf I bypass the above line, it gives:\nrx  <failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\nrx    <not-authorized>\nrx  </failure>\n. ",
    "DevNerd": "So.\nrx  <failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\nrx    <not-authorized></not-authorized>\nrx  </failure>\nMeans Wrong Password?\n. ",
    "medialabs": "You can use this URL:\nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=[cc]&me=[own]&u=[other]\n[cc] country code\n[own] any phone number (even if it's not a whatsapp user)\n[other] Phone number to check\nExample: \nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=34&me=600000000&u=600100100\nIf phone number 600100100 is a whatapp user you will get a populated plist like this:\n[plist version=\"1.0\"]\n[array]\n[dict]\n[key]P[/key]\n[string]600100100[/string]\n[key]T[/key]\n[integer]SECONDS_SINCE_LAST_STATUS_CHANGE[/integer]\n[key]S[/key]\n[string]STATUS_STRING[/string]\n[key]JID[/key]\n[string]34600100100[/string]\n[/dict]\n[/array]\n[/plist]\nIf not,it will be empty.\n. Yes, kodemok\nYou can pass an array of numbers in one URL with the parameter u[]\nExample:\nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=34&me=600000000&u[]=607111222&u[]=607222333\n. I just tried it and works.\n. ",
    "FernandoCalvo": "Thanks!! ;)\n. ",
    "kodemonk": "Hubail,\nExcellent, thanks for posting this.\nIs there any command to do a bulk check? I mean, can I set a phone array as parameter or do I have to loop through my entire agenda?\nThanks!\n. Thanks so much Medialabs!!!\n. ",
    "gwilgen": "What about knowing the device of the mobile? (android / iphone / etc...)\n. ",
    "samuelcyc": "Could I send Whatsapp message by the https string?\n. ",
    "nilesh83": "This is not working.... any one have solution.... @  medialabs  do update if you can give some solution\n. @  shirioko thanks for reply...I am not much tech. guy can some help with simple way to check number in bulk. say if i upload 1000 number query it gives result with how many are in whatsapp.... thanks in advance....\n. Sorry can you please show how... ??\n. You can use this URL:\nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=[cc]&me=[own]&u=[other]\n[cc] country code\n[own] any phone number (even if it's not a whatsapp user)\n[other] Phone number to check\nExample: \nhttps://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=34&me=600000000&u=600100100\nIf phone number 600100100 is a whatapp user you will get a populated plist like this:\n[plist version=\"1.0\"]\n[array]\n[dict]\n[key]P[/key]\n[string]600100100[/string]\n[key]T[/key]\n[integer]SECONDS_SINCE_LAST_STATUS_CHANGE[/integer]\n[key]S[/key]\n[string]STATUS_STRING[/string]\n[key]JID[/key]\n[string]34600100100[/string]\n[/dict]\n[/array]\n[/plist]\nIf not,it will be empty.\ni want something like this.....\n. http url based or something...\n. @ shirioko thanks.. for your help.... i didnt mean that.. but i am not tech guy thats why i was looking for that..... still thanks for update...\n. Thanks.... has any one tested... how many numbers i can check... any issue of blocking of number which has been used as whatsapp credential.....\n. Added new contact sync replacing https://sro.whatsapp.net/client/iphone/iq.php\nIs it working????\n. Can you guide a little...\n. ",
    "shirioko": "This has been replaced with Contact Sync, you have to send your credentials together with the request.. check yowsup for details.\n. Implemented in https://github.com/venomous0x/WhatsAPI/pull/315\n. e.g.\n$username = \"416xxxxxxxx\";\n$password = \"FgfdGDFGDFgfdgDFGDFGDFg==\";\n$contacts = \"+31629445256\";\n$wasync = new WhatsAppContactSync($username, $password, contacts);\n$wacontacts = $wasync->executeSync();\n. Well you can try asking WhatsApp to build something like that for you. We only implement existing functionality.\n. The iq.php page has been disabled by whatsapp for obvious security reasons. The new contact sync requires valid whatsapp credentials to sync your contacts.\nYou can build your own page which accepts the same query sting as iq.php and uses contacts.php to sync them if that is what you want.\n$contacts = $_GET[\"u\"];\n$cc = $_GET[\"cc\"];\n$me = $_GET[\"me\"];\n$password = \"gfgfgfhGHSHSghgs==\";\n$wasync = new WhatsAppContactSync($cc . $me, $password, $contacts);\n$wacontacts = $wasync->executeSync();\n. Not yet, I might download my Google contacts list to try syncing a large batch. I haven't heard any reports of blocked numbers from using this so far.\n. NO IT IS NOT THE SAME!!11\nThe URL has been replaced with the new contact sync for security reasons. The URL does not work. Contact sync does.\n. I think they already figured that out when they closed the issue 3 months ago...\n. You can always open a pull request to my repo, venomous0x is kind of AWOL... :)\n. First remove your credentials from your post. Second, you are probably using the newer version of whatsapp which has the new password mechanism which is incompatible with the old one. There are plenty of topics about that \n. Edit your .htaccess file to allow from all. \nThere already is a php webserver test file: src/php/testprotocol.php\nJust insert your phone number and password and make sure you send messages to full JIDs (\"phonenumber@s.whatsapp.net\" instead of just the phonenumber)\n. https://github.com/venomous0x/WhatsAPI/issues/289\n. Credentials check is borked at the moment anyway:\nhttps://github.com/venomous0x/WhatsAPI/issues/283#issuecomment-16417688\nUse \n$w->LoginWithPassword($password)\ninstead\n. Did you not read my post??\n. Do you have a WhatsApp password? If not you can get one using yowsup:\nhttps://github.com/venomous0x/WhatsAPI/issues/238\nthen replace \n$w->Login();\nwith\n$w->LoginWithPassword($password);\n. Warning: fopen(countries.csv): failed to open stream: No such file or directory\nAnd you are sure that the file is actually there and Apache has the right permissions to access it?\n. Set file permissions to full control\n. At what point are you using a request code?\n. Start by reading the other issues first.\n. You're not doing anything wrong, WhatsApp decided to drop support for the current version of requestCode that we're using. As I said, read the other issues first: https://github.com/venomous0x/WhatsAPI/issues/341 https://github.com/venomous0x/WhatsAPI/issues/337 https://github.com/venomous0x/WhatsAPI/issues/335\n. WhatsApp has no official API.\nAnd what code are you using to send messages? Are you opening and closing the connection for each individual message?\nYou can try opening a socket in the background and pushing your messages through that socket to WhatsApp while keeping it open. \nYou can see my example here: https://github.com/shirioko/WhatsAPI/tree/master/src/php/ajaxDemo\n. You can get the password either using registerCode or through one of my proxies (MissVenom or WhatSNiff)\nWhen using registerCode you need to get the SMS code through an official client (e.g. WP7 or iOS) and register it using WhatsApi. Both must use the same phone number.\nWhen trying to get it through one of my proxies you need a rooted Android device (adding a static host in WP7 is a pain, and I have no idea how to do it in iOS or any other platform). The steps required are in README.md\n. Works like a charm:\n$w->Connect\n$w->LoginWithPassword\n$w->sendComposing\n$w->Message\n$w->PollMessages\n. No of course not! You have to use registerCode only once to get the password, and then use that password to log in each time.\nI've sent a lot of crap with my dev phone number and I haven't had any problems so far:\n\n\nNot even after rapidly downloading ~100 contact pictures:\n\n(silently promoting my app mwihihihihi ^^)\n. This is hurting my brain.\nSo you ran the code twice, the first time you got the message and the second time you didn't?\n. Well all the code is on my github (WinApp.NET), I'll compile it and make an installer if there's enough interest in it. \n. $message->getAttribute(\"from\");\n. No.\nYou should at least be able to set up the enviroment to run PHP.\nPS add the install dir of PHP to your PATH enviroment variable.\n. Je ne parle Spanish\nReplaced by new connection means that your account is logged in from another place. Are you using your phone or another WhatsApp API at the same time?\n. Why don't you check my commit log???\n. \n. Format your code\n. Did you create the GetMessage function in your code or did you simply assume that it was there?\n. Then I don't see why you didn't read the documentation.\nThat page contains a list of function templates on how to create event handlers.\nLike so:\n- onGetMessage($mynumber, $from, $id, $type, $time, $name, $body)\n``` php\nfunction GetMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"GetMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->PollMessages();\n```\n. You need to call PollMessages more than once.\nphp\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\nAnd messages are only delivered once in WhatsApp\n. Or use the event manager as described in my wiki:\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n``` php\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nfor($i = 0; $i < 10; $i++)\n{\n    $w->PollMessages();\n}\n```\n. Messages are automatically acked by the API when they are received, which deletes them from the server.\nAnd polling 10 times means reading, processing and flushing the buffer 10 times, so it's not like you will still find data from the first poll during the 7th poll.\n. That is NOT how events work :')\nFor your solution you don't use the event manager. Just login, poll and use getMessages() once every 5 minutes to get all new messages.\n. Yes.\nphp\nforeach($messages as $message)\n{\n    $from = $message->getAttribute(\"from\");\n    $id = $message->getAttribute(\"id\");\n    if($message->getChild(\"body\"))\n    {\n        $messagebody = $message->getChild(\"body\")->getData();\n    }\n    etc.\n}\n. I would suggest to wait. I'm trying to get WhatsApiNet to be stable, then I might look into the new ContactSync protocol as described in yowsup.\n. Yes you have to send your credentials.\nhttps://github.com/tgalal/yowsup/issues/49#issuecomment-12079784\n. How? You can start by reading other issues, looking into exampleFunctional.php or offer some guy some money and hope for the best.\nFull tutorial is already in the second post:\nhttps://github.com/venomous0x/WhatsAPI/issues/108#issuecomment-9256407\nThat's all there is to it.\n. WhatsApi uses the MIT licence:\nhttp://en.wikipedia.org/wiki/MIT_License\nSo you are free to do whatever you want with it as long as you include a copy of the MIT Licence\ngoes off to quickly add one to his repositories\n. Wrong GitHub project?\nhttps://github.com/perezdidac/WhatsAPINet\n. Passwords are handed out by the server:\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApp-Registration-Flow\n. \n. 1) this is not an application, this is an API\n2) this has been asked and answered many times\n3) use my program WhatsApiNet-SyncUtil\n. Use MemoryStream\nc#\nbyte[] imageBytes = null;\nusing (MemoryStream ms = new MemoryStream())\n{\n    using (Bitmap b = new Bitmap(image))\n    {\n        b.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);\n    }\n    imageBytes = ms.ToArray();\n}\n. I'm deleting them because\n1) you're obnoxious\n2) this project has nothing to do with Viber\n. You're obnoxious because you come in here demanding source code for some Viber project and finish every sentence with ????? or !!!!!!!\nAnd the link you posted has absolutely zero to do with me, venomous0x or WhatsAPI, so I'm not sure how you made that connection.\n. ``` c#\nprotected static WhatsApp Instance;\nprivate static void Main(string[] args)\n{\n    ...\n    Instance = new WhatsApp(sender, password, nickname, true);\n    ...\n    Thread t = new Thread(new ThreadStart(KeepAlive));\n    t.IsBackground = true;\n    t.Start();\n}\nprotected static void KeepAlive()\n{\n    while (true)\n    {\n        Thread.Sleep(90000);\n        Instance.SendGetPrivacySettings();\n    }\n}\n```\n. The part that changes is your  challenge key which is randomly generated by WhatsApp during login.\nThe v1 exists.php page has been out of order for a while now, and v2 also for a good month now. Whatsapp has implemented a new contacts sync mechanism as described in yowsup. Shouldn't be too hard for you to port it to PHP, just a bunch of ProtocolTreeNodes.\nAnd I thought we already established that whatsapp no longer uses the md5(strrev($imei)) password but a autogenerated password from whatsapp instead?\n. There's nothing to decrypt except for the node names. The login data is binary. And so is the password you received from yowsup (it is only readable because it's base64 encoded)\nYou cannot sniff out the password as it is not sent to whatsapp. You use the challenge key as salt to hash your password. It is then verified against the password and challenge key known by whatsapp.\n. Yep, just add the method \npublic function DecryptMessages($data)\n{\n    $this->processInboundData($data); \n    //instead of $this->processInboundData($this->readData()) as used in PollMessages()\n}\nto whatsprot.class.php and use the data you captured in Wireshark to call it. It will decrypt the data and xml tags into messages, precence etc. Just not the login data.\nOh, and it has to be binary exact so you probably want to e.g. base64 encode it in wireshark and decode it in php.\nOnly problem you will encounter is that WhatsApi will try to connect, login and respond to message and challenge nodes, so you'll have to suppress that.\n. Yep, it should work.\n. 800018955F68CB7D28550D47E5E06E59C8355E7BF44EB3FF464246 is not binary data!\n. The input you're using is hex-encoded. You need the raw binary data. The raw data that is sent to you through the socket.\n. Get the latest code and try again, this was a year ago..\n. You can't. \n. Why don't you have a clue?\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L2218\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/func.php#L47\nAnd his proposal uses ImageMagic which is quite an exotic library. We're using Lib GD as fallback in case it's not installed.\nMost of this stuff is more than a year old, so can you do some research before kicking old issues?\n. Then you haven't looked around enough, this has already been discussed a few times.\nTo retrieve blocked contacts:\n``` php\nfunction onPrivacyList($mynumber, $list)\n{\n    foreach($list as $node)\n    {\n        echo $node->nodeString(\"privacy    \") . \"\";\n    }\n}\n$wa->eventManager()->bind(\"onGetPrivacyBlockedList\", \"onPrivacyList\");\n$wa->sendGetPrivacyList();\n$wa->pollMessages();\n```\nAnd to clear all blocked contacts use \nphp\nsendSetPrivacyBlockedList(array());\nwith an empty array as parameter.\n. Take a look at /src/php/testprotocol.php\nDid you implement a ProcessNode?\n$pn = new ProcessNode($w,$target);\n$w->setNewMessageBind($pn);\n. It's an object that you assign to your WhatsProt object, and which will be called when a message is received. There's an example in /src/php/testprot.php.\nYou need to copy the class ProcessNode to your own file and modify the process($node) method to your own needs.\nMy implementation:\nclass ProcessNode{\n    function __construct()\n    {\n    }\n    public function process($node)\n    {\n    $id = $node->getAttribute(\"id\");\n    if(!checkIfMessageExists($id))\n    {\n        $raw = mysql_real_escape_string(serialize($node));\n        $time = $node->getAttribute(\"t\");\n        $type = $node->getAttribute(\"type\");\n        $author = $node->getAttribute(\"author\");\n        $from = $node->getAttribute(\"from\");\n        if($author == \"\")\n        {\n        //PRIVATE CHAT\n        $number = $from;\n        $group_id = \"\";\n        }\n        else\n        {\n        //GROUP CHAT\n        $number = $author;\n        $group_id = $from;\n        }\n        $number = substr($number, 0, 11);\n```\n    $sendername = $node->getChild(\"notify\");\n    if($sendername != null)\n    $sendername = $sendername->getAttribute(\"name\");\n    else\n    $sendername = \"unknown\";\n$body = $node->getChild(\"body\");\nif($body != null)\n$body = $body->_data;\nelse\ncontinue;\n\n//check if contact exists:\n$contact = getContact($number);\nif(!$contact)\n$contact = createContact($number, $sendername, \"\");\n\ncreateMessage($id, $_GET['id'], $contact['id'], $time, $body, $type, $raw, $group_id);\n//echo \"<b>($sendername):</b><br />$body<br /><br />\";\n\n}\n}\n```\n}\n. My guess would be that they are also using the SMS verification code as salt for hashing, which is something they should have done from the start.\n. Isn't that DLL compiled for OMAP (and not for x86)? Thus it would only work on Windows Phone devices?\n. The problem with brute forcing the password is that you're doing it against a server and you'll most likely be locked out after 10-100 attempts\n. I'll upload my current website version to gihub when I get home, you can use it as an example, though sending messages does not work yet. Sending a message will create a new socket, invalidating the first one. I'll have to code a message queue which will be sent through the initial socket.\n. No, but I'll make it work before I upload it. You will still face the issue of the new password encryption, so I would suggest that you don't update your current whatsapp version, otherwise you won't be able to log in\n. I found an old whatsapp apk on my Dropbox (2.8. 1355) and tried to log in, hoping that it might downgrade my login method. I couldn't get  past the phone number screen though, it just told me that I had to update :/ if anyone is interested in the apk (maybe it does work for first time users) , just let me know and I'll make it public \n. I have a number of whatsapp accounts, some of which still work and some don't. I'd assume that it indeed has to do with updating whatsapp. My primary account doesn't work anymore. I also bought a 1-year whatsapp service extension a few months ago, but I don't think that it has anything to do with the issue.\n. If this works, it would at least be a breakthrough for people without smartphones or supported platforms. I'm very tempted to buy an extra sim card and try it out :') \n. Fake certificates cannot be verified by the CA, so it wil probably fail\n. support@whatsapp.com\n. I assume 10,000 messages a day (...ovah ninetausaaaand!..)\n. First off please change the title to be a bit more descriptive.\nSecond, this is not an issue, this is you not being able to start the script.\nDid you run it from command line or in a browser?\n. Try:\n$wa->Message($target, $message);\nsleep(1);\n. It is working for me on accounts who still use the v1 login method, especially when sending multiple messages at once. Haven't been able to try v2 accounts yet, I'll have to set u a MITM attack to grab the new password\n. Most likely through your login method (v1)\n. I did take a look at it. It describes the sms verified registration process, which will deauthenticate your current phone. Although it does work, it is probably not what we are looking for. \n. Depends, which WhatsApp version are you using on your smartphone? Everything > 2.8.1355 is using the new login hash\n. You need to do an upstream pull, your fork is 2 months behind. The problem has already been resolved.\ngit remote add upstream https://github.com/venomous0x/WhatsAPI.git\ngit pull upstream master\n. That is line 222, not 191\nhttps://github.com/tgalal/yowsup/blob/master/src/yowsup-cli\nperhaps you have accidentally deleted some lines? Try downloading it again.\n. You can call python from php and then parse the output. Just use both. \n. Go to yowsup's repository and verify that you have all the dependencies installed (python version, libraries etc.). It's in the readme file.\n. Well yes you have to open that port. I believe it's 5222.\nOn Jan 14, 2013 2:35 AM, \"Will.C\" notifications@github.com wrote:\n\nhmmm.. anyway to to bypass that firewall and connect outbound\nconnections? been cracking head for few days. Thanks.\n\u2014\nReply to this email directly or view it on GitHub.\n. It's in yowsup's readme file. Go read it. \n. Answer 1 & 2: this is not yowsup. Done. No more. Only questions related to\nthis project.\nOn Jan 19, 2013 10:50 AM, \"muslimsg\" notifications@github.com wrote:\nquestion 1) - how to change the profile pic with yowsup?\nquestion 2) - I registered my number with yowsup. Now if I put the sim\ncard into a mobile phone and login will the password change? If not can I\nset the profile pic via mobile phone?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/238#issuecomment-12452750.\n. And how is this related to WhatsAPI?\n. No hablo espagnol. \n\nAsking your questions in a different language won't make them less stupid. As said before, this is an issue tracker and not a tutorial. If you don't know the programming language you're screwed. \n. If only people would read...\n. We already know the output and we already know it's broken.\nIt's been broken for weeks if not months now, and if people would read the other issues we would not have comments about it each day.\n. Yes, as far as I know yowsup is the only project which uses the latest working registration method.\n. Are you going to try to port it from python? It's much much simpler to just call yowsup from command line and capture the output. The output is in JSON so it's easy to parse and retrieve the password.\n. Well if it's in .NET I suggest you move your questions here: https://github.com/perezdidac/WhatsAPINet/issues\nWe already had plenty of questions about python when people started using yowsup to obtain a password for PHP :)\n. Yeah sure why bother reading into existing issues before posting this?\nThe method you are using no longer works due to a new password mechanism in WhatsApp.\n. Try using\nsleep(1);\nafter sending the message.\n. You can try putting sleep after sending the message like this:\n$wa->Message($x, $y);\nsleep(1);\nsleep(1) will cause the program to wait 1 second before continuing. This might give it enough time to receive the proper response from whatsapp. This fixed it for me a few weeks back.\n. I did, and it didn't work. You should try using yowsup's method.\n. No I just use yowsup to get a password. I'm able to send messages throug WhatsApi after doing that.\n. Google it.\nPython 3.3 uses print as a function and not like echo.\nInstall 2.6 and you'll be fine\n. The password is generated by whatsapp servers and sent to you when you register. There is no way to forge a password at the moment (and probably not in the near future). \nThis is a very logical step since using static data like your phone number and imei as credentials is a giant security flaw. The least logical thing here is why it took them this long to fix it.\nYou can try using your password hash (the password you received using yowsup)\nmd5(base64_decode($password));\n. Ffs you don't need to understand python. Just download and run it. It will return a password and you can use that to continue playing around in php. I don't think anyone will waste their time trying to reinvent the wheel because you're too lazy to run a script. \nAnd the password is not language specific. I'm using mine in both php and c# and it works just fine.\n. Install python on your own machine, it runs on Windows as well. You don't need a server to run it.\n. You can request a new password for an existing account. Just keep in mind that you'll need to input an SMS verification code and that the old password will be invalidated, so the phone won't be able to send or receive messages until you re-register your phone, at which point your yowsup password will be invalidated and so on.\nAlso, inb4 other questions about running yowsup, this is a whole different project written in PHP so any questions or problems regarding yowsup should not be posted here.\n. Yes I understand, and the issue and solution are described here:\nhttps://github.com/tgalal/yowsup/issues/49\nI'll take a look at it when I get home, I don't have my whatsapp password right now\n. As I recall there was a limit of 80 users per request\nOn Jan 10, 2013 2:35 PM, \"lahmacuns\" notifications@github.com wrote:\n\nis there any whatsapp user scanning limit? would it be block the account\nif we scan a thousand of numbers?\nthere is nobody can make of its php version?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/244#issuecomment-12096758.\n. @kingk110  Just like I said in the WhatsApiNet issue, get a password from yowsup and modify the encryptPassword() method. Then use your password instead of your IMEI\n\noh and also change the version to 2.8.7 as mentioned in of of the issues here\n. The method should return a byte array and not a string, otherwise it will be encoded and mess up your hash:\npublic Byte[] encryptPassword()\n{\n    return System.Convert.FromBase64String(this.imei);\n}\nEdit: I checked the issue https://github.com/perezdidac/WhatsAPINet/issues/24 and the code I posted did return a byte array, I was starting to think I was being sloppy :')\nNo more questions regarding WhatsApiNet or yowsup in this project\n. Yes of course, you just need their password. And the only way to get it is to sniff out TLS traffic between their cellphone and whatsapp servers.\nRequirements:\n- Target must be on your WiFi network\n- You have to set up an SSL proxy to sniff out SSL traffic\n- You have to install a security root certificate on the phone so it will \n  not fail it's validation\n- You have to be listening when the user verifies their phone number\nAs you can see it's already quite complicated to do it on your own phone, let alone on someone else's without them noticing it. And if they don't care about their phone's security you might as well just read their messages on the phone itself :')\n. I have to agree with olpo. Your problem is with the implementation rather than functionality.\n. Go away. If you don't understand how this works you have nothing to contribute. This is an issue tracker and not a howto forum.\nNot to be hostile, but if you can't even figure out how to use this I really don't think this is something for you :)\nBesides, IMEI code won't get you anywhere anymore. They've changed the login method.\n. Yeah that would be great. WhatsApp is meant for personal use and not as a\nmarketing tool. It also has no spam filter. I can imagine a lot of people\nwill stop using whatsapp if they would get spam five times a day. The same\nreason why I stopped using MSN and Hotmail.\nOn Jan 16, 2013 1:37 AM, \"bjdudu\" notifications@github.com wrote:\n\n@kingk110 https://github.com/kingk110\ndo you have any IM? email is also ok, maybe we can discuss this issue and\nshare something in private.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/248#issuecomment-12298047.\n. No. Let's close this thread since this is NOT an issue related to this project.\n. There is no newer PHP API yet. You'll have to use yowsup for now.\n. Or you could just call the python script from command line (for personal use) or using php exec() (if you need to automate it)\n. You can run yowsup multiple times using exec(). One way to do it (my preferred way) is by running it in a separate apache thread (through a new tab in your browser). The other possibility is to use the nohup command to continue php execution after the python script is started.\n\nPHP does not support multithreading which makes it difficult to upscale the api for multiple users. This is the reason why I've moved my focus to WhatsApiNet to make a local standalone client in Windows (like Windows Live Messenger). The other complication is the number of sockets, you'll need 2 socket for each client: one socket to communicate with whatsapp servers and one for client requests and ajax calls. The first socket is kept alive all the time, so with 10 connected clients you have between 10 to 20 open sockets (which messed up my webhosting machines :') )\n. 2.8.7\n. did you use yowsup?\n. read this\nhttps://github.com/venomous0x/WhatsAPI/issues/238\nyou need to install Python 2.6 or 2.7\n. You need to install dateutil module.\nI'm not going to explain how. Google it.\n. here http://pypi.python.org/pypi/setuptools\n. http://labix.org/python-dateutil#head-2f49784d6b27bae60cde1cff6a535663cf87497b\n. This is an issue tracker and not a tutorial forum. If you can't figure out how to install a simple module I doubt you'll be able to use the API.\n. Download python-dateutil-1.5.tar.gz, extract it and run \"python setup.py\"\n. No your country code should go in cc\n. Why are people still asking questions about python? Go over to yowsup project page and ask there instead.\n. Of course you won't be banned after sending 19 messages. This is just another spammer who tries to send 10000 messages each day. I thought we were already done with this bullshit. \n. Try using \n sleep(1);\nAfter sending each message as I mentioned before. It will decrease your output but you might not be banned. \n. Maybe they finally have a spam filter?\n. 500 different numbers, 2000 messages to 2000 different numbers? Somebody stop this madness! \nFFS this in NOT an issue related to this project.\n. That's ridiculous, if your workers are using WhatsApp they also have internet access and you could simply email them. No issues, no complications, and text formatting (e.g. tables), something that the official WhatsApp client doesn't support.\n. First of all, WhatsApp is available for only a number of platforms like Android, Windows Phone and iOS. Email is available on any platform. So if your worker has an old pre-Symbian Nokia (which is able to send and receive email), or forgets to charge or loses his phone he's screwed. Email is accesible from any place on any platform, WhatsApp is limited to 1 device per 1 phonenumber.\nSecond, if you use a proper email client it will give you the proper push notifications like SMS. Email also lets you send vCal files which can be imported into the calendar.\nMy personal reason for using this API is to bring WhatsApp to unsupported platforms like Windows for people without a smartphone, or who just want to use it on their desktop. I'm currrently working on a .NET version, but I'm also looking into WhatsAPI for easy web access.\n. Probably because you are not following the proper protocol (sequence of nodes).\nAnd as I stated before, not being able to spam people through this API is NOT an issue :')\n. Email me your credentials and a list of target numbers and I'll test it for you using WhatsApiNet (I'm not willing to risk my own dev number)\n. @Akuka SSL is used in HTTPS connections, WhatsApp uses direct socket connections and I don't think they use TLS. However, the data is encoded with their own dictionary, you can use that to decode node names.\nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-12537677\n. You mean like, I don't know, email? Jeez..\nOp 20 mrt. 2013 08:21 schreef \"kingk110\" notifications@github.com het\nvolgende:\n\nGuys why don't we move on other free messaging applications maybe they'll\nhave a true payed service that you can send large number to your\nsubscribers. I heard about line. Can't we try it using sockets as if we\nhave done here or maybe viber!!!\nIf I was the developer of this api I would try to do another one but I\ndon't have the professional skills to do that.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/251#issuecomment-15161430\n.\n. Guess who didn't read the ToS?\n\nhttp://www.whatsapp.com/legal/ Section 3:\nC. You agree not to use or launch any automated system, including without limitation, \"robots,\" \"spiders,\" \"offline readers,\" etc. or \"load testers\" such as wget, apache bench, mswebstress, httpload, blitz, Xcode Automator, Android Monkey, etc., that accesses the Service in a manner that sends more request messages to the WhatsApp servers in a given period of time than a human can reasonably produce in the same period by using a WhatsApp application, and you are forbidden from ripping the content unless specifically allowed.\nBut then again..\n(iii) you will not attempt to reverse engineer, alter or modify any part of the Service;\nOh well.. :\")\n. Well breaking the terms of service can get you banned. For all we know they could have been sending spam messages all day like you.. \nThey should (and probably will) keep it non-commercial, it's one of the few services without ads. I think that's also one of the appealing things about it, as opposed to skype and facebook.\nAnd what the hell is wrong with you? You hope that regular users who comply with the terms of service will get problems with this great service just to make you think that you were right in some weird way? You've just lost all your credibility...\n. That would be as simple as\nphp\n$w = new WhatsProt($number, $imei, $nickname, true);\n$w->Connect();\n$w->LoginWithPassword($password);\nforeach($targets as $target)\n{\n    $w->Message($target, $message);\n    $w->PollMessages();\n}\nbut that also got people blocked.\n. https://github.com/venomous0x/WhatsAPI#note-july-30th-2013\nI don't do support for automated messages/spam/bulm messages/campaigns\nSync your contacts and make sure the contacts have you in their contact list\n. No, use yowsup to request your password and use that to log in. Password generated from your IMEI is no longer used.\n. No, it's already done in python.\n. Yes, just remove that section, it was only used to verify your username and password.\nInstead listen for nodes called \"success\" or \"failure\" after login.\n. Yes there is, no it's not PHP.\nhttps://github.com/tgalal/yowsup/issues/49#issuecomment-12079784\n. No.\n. SendGetGroups\n. This is not a PHP tutorial.\n. $node->NodeString()\n. Reversed IMEI has been disabled for a couple of months now.\n. Yes, download yowsup and get a new password. And no there is no way (yet) to retrieve/reconstruct the current password.\n. 1) depends, if you use the same IMEI as your phone it will automatically get a new password when you open the app. If you use a different IMEI you will have to enter an SMS verification code first.\n2) yes, but it involves installing a root certificate on your device and setting up an SSL proxy since the connection is encrypted. Most users don't go through all the troubles to sniff it and simply request a new one through yowsup\n. Come again?\n. Try using \nsleep(1);\nafter sending each message.\n. Are you using phonenumber or JID as target?\n. You mean you're still using the hashed imei code to login? Does that even work?\nThe target is the destination to where the message goes:\n$wa->Message($target, $message);\nDo you use a phone number of a full JID as your target?\n. Add \"@s.whatsapp.net\" to $receiver. This will make it into a full JID (Jabber ID). Without it your message will never be processed by whatsapp.\nAlso, the Message() method doesn't work like that. You are using it as:\nMessage($messageId, $receiver, $body);\nWhat it should be:\nMessage($receiver, $body);\nMessage ID's are automatically generated.\n. Then why don't you start by downloading the latest version of WhatsAPI? :')\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php\n. Download the latest version as a ZIP file from here:\nhttps://github.com/venomous0x/WhatsAPI/archive/master.zip\nor just copy/paste the code into your own project.\n. @kingk110 I'm unable to test sending bulk messages..\nI don't have a large list of existing whatsapp contacts, and I also don't want to risk getting my own phonenumber blocked by sending to non-existing numbers. \nBy the way I'm using a real cellphone number for testing instead of the virtual online ones that everyone here seems to use.\nI think the first thing we need to make sure of is that our contacts are always JIDs (phonenumber@s.whatsapp.net) and not just phonenumbers. Messages sent to phonenumbers will not be delivered, and I can imagine that after sending a number of faulty messages your number will be blocked.\n. @Letux If you try to re-register your number with the same IMEI code as you used before you won't have to do an SMS verification, you'll immediately get a new password instead.\n. Not yet implemented. But I pulled this from WhatsApiNet:\npublic void SendCreateGroupChat(string subject, Action<string> onSuccess, Action<int> onError)\n    {\n        string id = TicketCounter.MakeId(\"create_group_\");\n        var child = new ProtocolTreeNode(\"group\", new[] { new KeyValue(\"xmlns\", \"w:g\"), new KeyValue(\"action\", \"create\"), new KeyValue(\"subject\", subject) });\n        var node = new ProtocolTreeNode(\"iq\", new[] { new KeyValue(\"id\", id), new KeyValue(\"type\", \"set\"), new KeyValue(\"to\", \"g.us\") }, new ProtocolTreeNode[] {child});\n        this.whatsNetwork.SendData(this._binWriter.Write(node));\n    }\nYour node should look something like this:\n<iq id=\"create_group_$id\" type=\"set\" to=\"g.us\">\n    <group xmlns=\"w:g\" action=\"create\" subject=\"Your group name\">\n</iq>\n$id is the auto-generated id WhatsApi uses.\nTake a look here:\nhttps://github.com/perezdidac/WhatsAPINet/blob/master/WhatsAppApi/WhatsSendHandler.cs\nThe guys over at WhatsApiNet did a great job porting it from yowsup, and C# is a lot easier to translate to PHP that Python\nEDIT:\nAnd finally what you've all been waiting for... This is what the method should look like. Let me know if it works:\n```\npublic function SendCreateGroupChat($subject)\n{\n$id = time() . '-' . $this->_msgCounter;\n$this->_msgCounter++;\n$hash = array();\n$hash[\"xmlns\"] = \"w:g\";\n$hash[\"action\"] = \"create\";\n$hash[\"subject\"] = $subject;\n$group = new ProtocolNode(\"group\", $hash, null, \"\");\n$hash = array();\n$hash[\"id\"] = $id;\n$hash[\"type\"] = \"set\";\n$hash[\"to\"] = \"g.us\";\n$iqnode = new ProtocolNode(\"iq\", $hash, array($group), \"\");\n$this->sendNode($iqnode);\n}\n```\nAlthough it would be pretty useless if you don't add the other group methods like SendAddParticipants, SendGetParticipants and SendSetGroupSubject. But this should get you started ;)\n. Yes it seems like it\n. ```\npublic function SendAddParticipants($groupJID, $participants)\n{\n$id = \"add_group_participants_\" . time() . '-' . $this->_msgCounter;\n$this->_msgCounter++;\n$this->SendVerbParticipants($groupJID, $participants, $id, \"add\");\n}\nprotected function SendVerbParticipants($groupJID, $participants, $id, $innerTag)\n{\n$_participants = array();\nforeach($participants as $participant)\n{\n    $_participants[] = new ProtocolNode(\"participant\", array(\"jid\" => $participant), null, \"\");\n}\n$hash = array();\n$hash[\"xmlns\"] = \"w:g\";\n$child = new ProtocolNode($innerTag, $hash, $_participants, \"\");\n$hash = array();\n$hash[\"id\"] = $id;\n$hash[\"type\"] = \"set\";\n$hash[\"to\"] = $groupJID;\n$node = new ProtocolNode(\"iq\", $hash, $child, \"\");\n$this->sendNode($node);\n}\n```\n. My bad.\n$node = new ProtocolNode(\"iq\", $hash, $child, \"\");\nshould be:\n$node = new ProtocolNode(\"iq\", $hash, array($child), \"\");\n. Nice!\n. You need to request a password using yowsup. I believe it was also ported to WhatsApiNet recently.\n. It also works for numbers which are already registered, you will receive a new password. The old one won't work anymore though, so you won't be able to use it on 2 devices simultaneously.\n. Sorry, I've been sleeping under a rock lately\n. What part of JID did none of you seem to understand? When using the JID\nargument you are supposed to supply a valid JID and not a phone number.\nJID = phonenumber@s.whatsapp.net\nOp 20 feb. 2013 05:34 schreef \"Horace Ho\" notifications@github.com het\nvolgende:\n\nAssume group members are sender 85211111111 and receiver 85277777777.\nFirst, to create group:\ntx  \ntx    \ntx  \ngroup is created:\nrx  \nrx    \nrx  \nthen add participants:\ntx  \ntx    \ntx      \ntx      \ntx    \ntx  \nsend group message:\ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    2013-02-20 12:22:31 ^_^\ntx  \nHere are the responses:\nrx  \nrx  \nrx    \nrx      1361334152-1361334152-0001\nrx      \nrx    \nrx  \nThe result:\nThere is no group created in receiver 85277777777 Whatsapp client\nThere is no message delivered to receiver 85277777777\nWhat are missing?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/278.\n. Do you use phonenumbers or JIDs to send the messages? What is your interval between sending messages? Are all 100 numbers actually registered in whatsapp?\n. What do you mean JID is not working? Try using proper JIDs before reporting problems\n\n$w->Message(\"999999999999@s.whatsapp.net\", \"hi\");\n. Can you post the tx/rx nodes debug info when sending a message to a JID?\n. Try requestLastSeen()\n. In that case you'll have to use Contact Sync to check if they have WhatsApp accounts\n. It doesn't use protocol nodes, it's a HTTP page which returns JSON data like exists.php. You should take a look at yowsup's code\n. \n1: This is not an app but an API (hence the name). You'll have to build something around it to make it work.\n2: It's in PHP, which is a scripting language rather than a programming language. You'll have to install PHP on Android first.\n. So what are you trying to accomplish? \nLogging in using an account registered in symbian? Logging in using your imei doesn't work anymore. You will have to request a new password with sms verification. \n. Wazapp won't work on n80. His phone runs symbian, n9 runs maemo linux\n. The registration functionality is now also implemented in this project so you don't have to mess around in different languages. \nAnd this password error is not an \"issue\" but a change in whatsapp functionality. It won't be resolved. \n. I didn't want to mess with my registration, but I guess I'll look into it when I get home.. :/\n. I've set up Apache with a self-signed certificate, added it to my hosts file on my device and installed the certificate on my device. After that I was able to pull this from my access log:\n[16/Apr/2013:00:14:57 +0200] 192.168.2.3 TLSv1 RC4-SHA \"GET /v2/exist?cc=31&in=62*******&lg=nl&lc=NL&id=%a5f%b1%a7%e22Q%c6Kn%93%98%9c%8d%7e%7d%2b%d5%ffY HTTP/1.1\" 6\nLooks like url-encoded binary data.\nSo the challenge now is to reproduce the id string using my IMEI... :(\nAnd it's past midnight already x( FML\n. UPDATE\nI've setup my spare Android device to view requests from whatsapp so I can share the IMEI code I used:\n352666044830596\nWe all assumed that the identity is created from the IMEI code or MAC address. I've tried different phonenumbers with the same IMEI code just to be sure, and sure enough the hash changed!\nHere are 3 requests using the IMEI above. Each request has a different number:\n[16/Apr/2013:01:14:32 +0200] 192.168.2.5 TLSv1 RC4-SHA \"GET /v2/exist?cc=31&in=629445136&lg=nl&lc=NL&id=U%20%28LF%9c%21n%25t4%b6%b7%dcVj%dd%12%9c%99 HTTP/1.1\" 6\n[16/Apr/2013:01:16:16 +0200] 192.168.2.5 TLSv1 RC4-SHA \"GET /v2/exist?cc=31&in=629445135&lg=nl&lc=NL&id=%9ey%d0%93%13%85%0e%9d%f9E%25V%08%e1%15%40%09u5%1c HTTP/1.1\" 6\n[16/Apr/2013:01:16:55 +0200] 192.168.2.5 TLSv1 RC4-SHA \"GET /v2/exist?cc=31&in=650568134&lg=nl&lc=NL&id=%bc%fc%5f%e8%fc%d9R%bc4G%c3%9a%0a%bc%dex%83%cc%819 HTTP/1.1\" 6\nSo it appears they've changed the identity hashing algorithm. I've tested yowsup already, which is also broken at the moment.\nI'm gonna give it a quick shot and then go to bed to hopefully catch a few hours of proper sleep :(\nEDIT:\nWell no luck so far..\nFor those who care, this is where the magic happens:\n\n. No news yet, I was hoping that someone else might pick this up as well. I'm a bit stumped by this, trying to take a break from PHP by writing a little Android exploit app :/\n. News:\nhttps://github.com/shirioko/WhatSNiff\n:)\nThe app uses a new identity hash so /v2/exist won't work for numbers registered using the official app. You can still intercept the password by using my proxy though.\nFrom what I've been told by @manufuentescr numbers registered from this API (or similar like yowsup) still work with /v2/exist because they use the same identity hash.\n. They already use filters to check if identity is an MD5 hash. The new identity looks like url encoded MD5 hash (MD5 is normally hex encoded)\nThis shouldn't give any problems when they disable hex encoded MD5 hashes. Just change this line:\n$identity = md5(strrev($imei));\nto\n$identity = urlencode(md5(strrev($imei), true));\nBy the way, strrev($imei) was required to generate the same identity as the phone client. But since the new hashing mechanism is completely different it no longer has any use :) you can use\n$identity = md5($imei);\ninstead\n. Can you make the change I mentioned and test if requestCode() and checkCredentials() still work with urlencoded MD5 hash? :D\nIf so, you can update the code to always use the new identity hash.\n. Of course checkCredentials() doesn't work, your registered identity is still \nmd5(strrev($imei))\nYou'll have to use requestCode() first using the urlencoded identity ;)\nEDIT:\nYou don't get the error \"Bad param: id\" so WhatsApp does accept the new identity :)\nWhatsApp doesn't send our IMEI codes to the server, just the phonenumbers and identities generated from it. This means that they cannot recreate and validate our identity and that we can send just about any identity we want as long as the format is correct.\nSo checkCredentials will work as long as the number is registered using this API (as long as identity used for requestCode and checkCredentials is the same). \nIf we want checkCredentials to work with numbers registered using the mobile app we'll have to recreate their new hashing method..\n. Well that's one way to piss off a bunch of people ^^\nI think that we shouldn't change identity generation for now, but we should keep it in mind though in case WhatsApp decides to flip the switch :)\n. Anyone willing to give this a go? :)\nhttps://github.com/shirioko/MissVenom\nI've been playing around with SSL proxies recently to capture passwords and a couple of days ago I created WhatSNiff in PHP, pretty basic proof-of-concept stuff running in a regular webserver. Today I created a standalone SSL proxy in C# (.NET 4 or 4.5 required). Download and run the .exe, install certificate on device, add hosts entry on device and register WhatsApp on your device. Four simple steps.\ncheckCredentials() still works perfectly for numbers registered using the official app, the problem is the new identity which we cannot reproduce.\nMissVenom displays the request as well as the response so you'll have your password to log in as well as your new identity to request a new password if needed!\n\n. FYI :)\nhttps://github.com/shirioko/WhatsAPI/commit/5ed20d62e494677caa8a3591aff8776054f3e7a7\nLogin() now accepts a custom identity as argument. This allows it to use checkCredentials() to retrieve a new password using the new identity format (see my comment https://github.com/venomous0x/WhatsAPI/issues/283#issuecomment-16415346)\nWe can use the identity generated by the phone until we have cracked the new algorithm for generating the new identities. The identity can be intercepted using either MissVenom or WhatSNiff.\n. Sue them and try to get your money back\n. If you find problems this is the place to report them, and if you need bleeding-edge functionality you'll have to check out yowsup. I don't run into problems in WhatsAPI myself, but I also don't really use it that much anymore, I'm currently using WhatsAPINet for my Windows application\n. md5(MACMAC) and md5(strrev(IMEI)) have been disabled for a couple of months now. Now you need to request a password through registration. First time you will need to verify using SMS before you receive your password, and after that you will get the password immediately.\n. That seems to be a known issue that I wasn't able to reproduce myself yet. Kingk100 was passionately working on it\n. If I recall correctly I fixed this in my commit https://github.com/venomous0x/WhatsAPI/commit/194cd694ee5dfbf0fee8ed7abf3acbb7a201e296 by replacing the AND operator with the OR operator. This will prevent sending receipt for messages having a \"received\" child node.\nHere's the line I changed:\nhttps://github.com/venomous0x/WhatsAPI/commit/194cd694ee5dfbf0fee8ed7abf3acbb7a201e296#L0R354\nEDIT:\nI've pushed two months worth of commits last night, so you might want to re-download this ^_^\n. Change line 349 to\n@$node->_attributeHash['id'],\n. Already merged through my fork :)\n. Yes it sends messages.\nSend only to contacts you have synced using contactSync v2, and always use sendPresenceSubscription and sentComposing before sending a message.\n. Yes you do, it asks for it just after registration. You have to select your name and profile picture.\n. Try\n$userIdentity = md5('352264050503669');\ninstead. WhatsApp uses a filter to check for MD5 hash, so sending just an IMEI code won't work.\nAnd the exception is just generic. You need to do some debug prints (whatsprot.class.php line 1157):\n```\n$query = array(\n        'cc' => $phone['cc'],\n        'in' => $phone['phone'],\n        'lc' => $countryCode,\n        'lg' => $langCode,\n        'mcc' => '000',\n        'mnc' => '000',\n        'method' => $method,\n        'id' => $this->_identity,\n        'token' => $token,\n        'c' => 'cookie',\n    );\n$response = $this->getResponse($host, $query);\nprint_r($query);\nprint_r($response);\n```\n. added in https://github.com/venomous0x/WhatsAPI/commit/09eb2a84b7bae6c3f650841875180771535bbfbd\n. Check out the SetProfilePicture method I committed last night (3:00 AM,\nfml...). It sends the contents of the image file inside a protocol node.\nConverting it to send images to other users shouldn't take more than a few\ndifferent arguments ;)\nEDIT:\nTook a bit more than just a few arguments, about half a day.. :\")\n. Fixed! ^^\nhttps://github.com/shirioko/WhatsAPI/commit/2172cc1ceb137af01fe2de3f3fa99261deefa980\nNow just waiting for that pull...\nEDIT:\nMaybe a bit of explanation about the latest update..\nYou have to send an \"iq/media\" node to whatsapp containing the SHA-256 hash of the file you want to send.\nIf whatsapp recognizes the hash, it assumes that the same file has been uploaded before, and you will receive an \"iq/duplicate\" node containing the image details (url, size, hash etc.). You don't need to upload the file. \nIf the hash is unknown, you will receive an \"iq/media\" node containing a URL. You'll have to send the image file through a TCP socket to that URL (coded in /src/php/mediauploader.php). This will result in a JSON response containing the file details.\nAfter this is done you create a \"media\" node with the details you received and send it in a \"message\" node.\n. Excellent! Care to close this issue then? :)\n. That's true, I only focused on uploading local files :)\n. fixed in https://github.com/venomous0x/WhatsAPI/commit/630b599422dd35c4066d8768fb298e10ce66acf6\n. fixed in https://github.com/venomous0x/WhatsAPI/commit/6954eb3fc95c96411db45dc0fccc9e16c6aae7b9#L0R2009\n. Nope, encryption method has been changed for /v2/exist as described here https://github.com/venomous0x/WhatsAPI/issues/283#issuecomment-16417688\n. Nope. Using the phonenumber and IMEI code of my Android phone with registered whatsapp. Oh well.. I guess it will work if you register by SMS using \nmd5(strrev($imei));\nOne thing that bugs me though. You calculate the hash of your IMEI code in checkCredentials(). But since checkCredentials() can be called multiple times it will re-hash your identity each time you do so. It's more reliable to do this only in __construct() :)\n. I don't think so, REST seems to be built around HTTP, while WhatsApi uses raw sockets for communication. \n. I can give you even better:\nhttps://github.com/perezdidac/WhatsAPINet\nWhatsAPI ported to C# ;) I'm using this one for my own .NET application and it's working just fine\n. Thanks, fixed, waiting for pull.\nhttps://github.com/shirioko/WhatsAPI/commit/5359292533bd8b05c07c207621a10e9739f8b231\n. Of course it's working!!!!!!!!!!\n. No. It's all explained in the comments at the beginning of the file:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/contacts.php\n$wasync = new WhatsAppContactSync($username, $password, contacts);\n$wacontacts = $wasync->executeSync();\n. Hasn't been tested yet, I can't imagine anyone having 20k numbers on their phone :') \nBut yes you can supply an array of numbers to contacts.php \n. I can fix something up if you like. You still need to provide your own credentials in the URL though, I'm not willing to risk getting mine blocked.\n. REMOVED LINK\njust fill in your own phonenumber and password\nnumbers should be provided including country code as an array of u[] parameters\nI'm going to check this into my fork soon because I don't want to use my webserver as a public host, and also because I tend to shut down Apache quite often :') which will probably lead to many many issue reports haha\n. Done. This is all there is to it:\nhttps://github.com/shirioko/WhatsAPI/commit/2f4a4adb92b53b60852f845c8347d7b6899bd0a1\nJust install WAMP server, enable ssl and curl extensions for PHP and you're good to go!\n. How many were you sending? I've synced all of my Google contacts this way (~100) without any issue.\n. HAHAHAHAHAHAHA\nYou exceeded my Apache's request size limit (8190 bytes)\nTry doing batches of about 200-300 numbers each, that should work.\n. Well the request limit was reached after about 440 numbers. You need to realize that this is not some massive corporate scale sync mechanism, most people don't have more that 100-200 contacts in their phone.\n. The same way, just enable php_curl and php_openssl extensions and put contacts.php and contactsync.php in the webroot directory.\n. You can increase the request size limit in httpd.conf and try larger batches, but I'm not sure if WhatsApp will accept it.\n. You can try passing the data through $_POST instead of $_GET\n. Bro, do you even HTML? :')\nUse an HTML form with method=POST to submit the data to the page. Then use $_POST instead of $_GET to fetch the arguments.\nhtml\n<form method=\"post\" action=\"contactsync.php\">\n    Phone number: <input type=\"text\" name=\"phone\" />\n    <br />\n    Password: <input type=\"text\" name=\"pass\" />\n    <br />\n    etc\n</form>\nOr you can try reading the contacts from a file using \nphp\n$contacts = array();\n$fh = fopen(\"filename.txt\", \"r\");\nwhile($line = fgets($fh))//read line\n{\n    $contacts[] = \"+\" . $line;\n}\nexample file contents:\ntxt\n316**********\n345**********\n456**********\netc\n. Just use a textarea with \";\" separated numbers like \n316********;546********;434******;etc.\nhtml\n    <textarea name=\"contacts\"></textarea>\n</form>\nAnd then explode the data in PHP\nphp\n$contacts = @$_POST[\"contacts\"];//string of numbers 315*****;435****;456*****;etc.\n$contacts = explode(\";\", $contacts);//split into array [435*******, 435*******, 544********, etc.]\n. Uhm did you actually replace YourPhonenumber and YourBase64Password in the URL? :o\n. And are the username and password from an existing WhatsApp account?\n. Passwords are not generated, they are received from the WhatsApp server. Use MissVenom to grab yours and try again.\n. Try using the debug flag for ContactSync. Also make sure that the contact has a WhatsApp account. And make sure you have libcurl and openssl extensions enabled in PHP\n. use \nphp\nvar_dump($wacontacts);\ndoes it contain an empty array?\n. Only if you can receive text messages or voice calls. There's also a restriction on phonenumber types, e.g. I can't register my home phone (landline) even though it can receive voice calls for the verification code.\n. Also added SetProfilePicture and automatically downloading received images (media)\n. have you tried\nsleep(1);\nafter sending the message?\n. Yep, just tested it and I can confirm that you have to stay connected after sending the message for it to be delivered.\nI've played around with the idea of just adding sleep(1) to the Message() method, but in a real implementation you should use PollMessages() instead.\n. No it would be a bad idea to deliberately slow down the application. Use \n$w->Message($target, $body);\n$w->PollMessages();\ninstead.\n. \nTry this:\nhttps://github.com/shirioko/WhatsAPI/commit/9bd3d63239a50e9c321f7b9dbec2d58709d797f7\n. Yeah great! That's just the motivation I needed! :')\nWhich method are you using to set status? sendStatusUpdate() doesn't seem to work for me.\n. I've updated the status yesterday but it didn't show up on my Android device, checked it again today and it's finally updated :)\nRegarding your waitForServer() method:\nYou can add \nprotected $_pendingQueue = array();\nto hold all the message IDs which still need confirmation. Sending a message would add its ID to this queue. Receiving a confirmation node would remove it from the queue.\nThen you can make waitForServer() loop the PollMessages() method as long as there are still items in the pendingQueue.\npublic function waitForServer()\n{\n    while(count($this->_pendingQueue) > 0)\n    {\n        $this->PollMessages();\n    }\n}\nWhatsApp has excellent response time so in reality it would suffice just to call PollMessages() after sending a status or message (as implemented in my commits).\nOr I could be totally repeating what you've already made.. :') \nTime to do some commits? ;)\n. You forgot to call Login() the second time.\n. Fixed, hold on let me make the commit :)\nEDIT:\nThere we go!\nhttps://github.com/shirioko/WhatsAPI/commit/23e46afa4eafa608633479cde8569371c222ad4d\nProblem was that the writer object was not reinitialized on reconnect, so it wouldn't restart authentication properly.\nwhatsprot.class.php line 583, function doLogin():\n```\n    $data = $this->_writer->StartStream(WhatsProt::_whatsAppServer, $resource);\n    $feat = $this->addFeatures();\n    $auth = $this->addAuth();\n    $this->sendData($data);\n    $this->sendNode($feat);\n    $this->sendNode($auth);\n$this->processInboundData($this->readData());\n$data = $this->addAuthResponse();\n\n```\nStartStream initializes authentication flow using the provided key, in this case from the last connection, and addAuthResponse resets the keys in the reader and writer objects. As you can see StartStream is called before you receive the new key so it will use the old key instead.\nI've made a better fix by resetting the reader and writer keys on login:\nhttps://github.com/shirioko/WhatsAPI/commit/9072ba5f7ff51ebc64ee15ab5b3b28c93119e5b8\n. whatsprot.class.php line 1170:\n```\n$response = $this->getResponse($host, $query);\nif ($response->status != 'sent') {\n    $this->eventManager()->fire('onFailedRequestCode', array($this->_phoneNumber, $method, $response->reason, $response->reason == 'too_recent' ? $response->reason : $response->param));\n    throw new Exception('There was a problem trying to request the code.');\n}\n```\ncan you post a var_dump() of $query and $response?\n. [id] in $query looks suspiciously like an IMEI code. Isn't it supposed to be a hash?\nmd5(strrev($imei));\nEDIT:\nWell according to yowsup it is. So change line 1165 to:\n'id' => md5(strrev($this->_identity)),\n. And thank you for pointing this out :)\nI've added the fix to my repository https://github.com/shirioko/WhatsAPI/commit/1b32f024ac97ebcf9d0dc8da0578ec1ad1f7bb6d\nStill waiting for that pull request...\n. you need to call \n$w->PollMessages();\nafter sending a message to ensure delivery. See this: https://github.com/venomous0x/WhatsAPI/issues/320\n. No, it's only possible to intercept the password sent to your phone and not the other way around. We have no idea where it's stored on the device so you won't be able to set it manually.\n. Set up an SSL proxy to sniff the password, put the phone on your WiFi, use ARP poisoning to redirect traffic from phone to your proxy, uninstall and reinstall the app and finish WhatsApp's initial setup. The password will be in the response body from v.whatsapp.net\nDon't ask for a guide because this is in no way related to this project. This API uses the official number registration with SMS or voice verification to get the password.\nIf you have a jailbroken iPhone you may be in luck, check this out https://github.com/tgalal/yowsup/issues/71\nOr I might as well post a tutorial on how to do it, I like to surprise people >>\n_goes to set up SSL proxy**\nhttp://mitmproxy.org/\n. Well I just managed to sniff my own password using a simple proxy I wrote in PHP :)\nI'll add a new repository for it.\n. And here it is!\nhttps://github.com/shirioko/WhatSNiff\nAnyone wants to give it a try? A lot simpler than setting up SSL proxies, you just set up an Apache server, install root certificate and update hosts file on your Android device (that's the only one I could test ATM)\n. Pull request with broken code...\nShame on you! :)\n. How does one \"accidentally\" open a Pull Request? There seem to be an awful lot of those..\n. Show us the complete code you're using to send messages, from construction 'till the end of page, as well as the output. Make sure you use debug mode:\n$wa = new WhatsProt($username, $password, $nickname, true);\n. You need to put a  tag at the beginning of the file, you can't read protocol nodes like this\n. Have a look at testprotocol.php, that's a working example to use with a webserver.\nDo you already have a WhatsApp password or not? And is your number registered by one of the APIs or by using the official app?\nTry this code:\n```\n\n<?php\n$userPhone = \"316**\";\n$userIdentity = \"345678907654654\";\n$destinationPhone = '9665????????';\n$userName = \"Derp\";\n$w = new WhatsProt($userPhone, $userIdentity, $userName, true);\n$w->Connect();\nprint_r($w->checkCredentials());\n$w->Login();\n$w->Message($destinationPhone, \"Test message derp\");\nwhile (TRUE) {\n    $w->PollMessages(); \n    $msgs = $w->GetMessages(); \n    foreach ($msgs as $m) \n    {\n    print_r($m);\n    }\n}\n?>\n```\n. $userIdentity is your IMEI code. And do you have a password or not?\n. checkCredentials() is broken when using phone clients since the last WhatsApp update. You'll have to request a new password using WhatsApi or yowsup using SMS or voice call validation.\nI haven't tested requestCode() in WhatsApi yet and I'm currently running Microsoft IIS, I'll test it in a minute..\n. Great. Then copy that password to your file and use \n$password = \"KoeIpWdCcRNrdmjay5fe????????\";\n$wa->Connect();\n$wa->LoginWithPassword($password);\nto log in.\n. Only if you don't have a password yet.\n. Did you encode your imei?\n$imei = md5($imei);\n. You can use contact sync v2 to check if a number has WhatsApp. It does require valid credentials though..\n. Did you look into contacts.php? You need to add a leading \"+\" when using country code for contacts. So it's either 650568134 or +31650568135\n. Fixed in my latest commit :) \nIs it just me or is the site broken? Using the android app at the moment. \n. Where did you get this log? \n. So it does in fact work? :) I've added debug mode to contacts.php in case you run into trouble. \nLooks to me like that log is coming from your php rather than from the program. I've disabled verify ssl peer in the curl request in contacts.php so I have no clue why it tries to validate certificates.. \n. I see! Yours was probably set to 1 by default, I've never had this issue before. Thanks for pointing this out :)\nEDIT:\nHurrrr, just read back my code, my bad :') I'm setting it to 1 myself\n. Fixed in https://github.com/shirioko/WhatsAPI/commit/efcad7b742d1086a53ef88c3c33c892bfed3981c\n. https://github.com/perezdidac/WhatsAPINet/issues/31\n. Derp! I was porting Contact Sync V2 to WhatsApiNet and I remembered that you get user status in the sync result.\nOr are you looking for a nickname?\n. So far the only way to get the nickname is when you receive a message from that contact.\nI really need to write that RC4 sniffer for whatsapp, maybe then I'll be able to get something to work. \nArgh so many repositories yet so little time! #githubstruggles\n. Oh one more thing:\nYou can also get the user name by using the profilePictureSubscription\nphp\n$w->Login(true);\n//or\n$w->LoginWithPassword($password, true);\nby using pictureSubscription you will receive a message node when a contact changes his or her profile picture. This message node also contains their nickname.\nSee here:\nhttps://github.com/venomous0x/WhatsAPI/commit/11fa519b1734fc10f8140d5d247e875f24795ef3\n. https://github.com/venomous0x/WhatsAPI/issues/322#issuecomment-16507996\n. Just use your damn password instead\n$wa->LoginWithPassword($password);\n. can you do a var_dump of $b ?\n. Oh nevermind, if this is working you just have to save your password and use that each time you connect.\nSo do a var_dump of $b, copy your password into your code and enjoy.\n$password = \"fgdfgdfgTGADFgRETAGETG==\";\n$wa = new WhatsProt($phone, $imei, \"Derp\", true);\n$wa->LoginWithPassword($password);\n$wa->Message($target, \"Hurrrr\");\netc.\n. Your password gets reset each time you call Login(), registerCode() or checkCredentials(). Just use:\n$wa = new WhatsProt($phone, $imei, $name, true);\n$wa->Connect();\n$wa->LoginWithPassword($password);\ndo whatever\nare you using this number on your smartphone?\n. The password will survive as long as you don't call any of the three methods I mentioned\nThere is one exception though: https://github.com/tgalal/yowsup/issues/117#issuecomment-16712490\nApparently WhatsApp randomly changes your password after some time, this is not implemented yet.\nI'll look into this when I get to it, best way to go would be to add a \"onPasswordChanged\" event and let the surrounding application update the password in its own storage.\n. The keyword he used is \"like\" ;) I'll have to encounter one of these nodes in real life before I can actually identify them and add it to processInboudData()\nAnd yes, if you use your number on your phone client you're gonna have a bad time :')\nMmm guess it's time for a little investment, getting a \u20ac10 prepaid SIM card for testing tomorrow :/\nIn the meantime I'll show WhatsApiNet some love, apparently someone forked that repository yay!\n. Ohhhh I'm not sure if that's going to work, we've had a lot of issues with numbers being blocked from sending large quantities of messages.\nYour implementation to target specific users could work though, I've already played around with the idea of using WhatsApp to send confirmation codes e.g. when registering an account (instead of SMS)\nHowever, this would cause only one-way communication which would be suspicious. A better solution would be to ask for response e.g.\n$message = \"Please reply with '$code' to confirm your registration\";\n$wa->Message($client, $message);\nand complete their registration as soon as the code is received from that client\n. Sucks. Did you sync all 400 in a single request or did you use batches of e.g. 50 numbers each?\n. Can you try using this flow to send a message?\n$w = new WhatsProt($username, $imei, $name, true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->sendComposingMessage($target);//send status \"Typing...\"\n$w->PollMessages();\nsleep(1);\n$w->Message($target, $message);\n$w->sendPausedMessage($target);//end typing\n$w->PollMessages();//wait for confirm\n. You could try making the communication two-way like I mentioned above e.g. requiring your customers to reply to your message using the confirmation code you've just sent them.\ne.g.\n- you: Hello user xxxxxx please confirm your registration by replying '543456'\n- user: 543456\n- you (optional): Thank you for completing the registration!\nI can also imagine that this will generate a lot of traffic on a single phonenumber, so maybe you could use multiple numbers and cycle through them for each user e.g.\nuser1 -> phone 1 (assign phone to user so they won't receive messages from different numbers)\nuser2 -> phone 2\nuser3 -> phone 3\nuser4 -> phone 1\nuser5 -> phone 2\netc.\nTheir EULA states that you're not allowed to generate more traffic than a normal human user would, so you could circumvent this by distributing the load over multiple numbers.\n. \n. Yes it's in the latest commit. Go read some of the latest issues, I've explained it a million times already.\nhttps://github.com/venomous0x/WhatsAPI/pull/315\nhttps://github.com/venomous0x/WhatsAPI/issues/42\nhttps://github.com/venomous0x/WhatsAPI/issues/328\n. Posting just once is plenty ;)\n. Again, posting just once is plenty. Keep it up and FACE MY WRATH!!!\nhttps://github.com/venomous0x/WhatsAPI/pull/315#issuecomment-17872761\n. https://github.com/venomous0x/WhatsAPI/commit/2f4a4adb92b53b60852f845c8347d7b6899bd0a1\n. Works.\nWhich code are you using?\n. Tested on two numbers, I don't receive an SMS when requesting a code using WhatsAPI.\nNow just waiting 30 minutes to see if I receive an SMS code when registering on WhatsApp for Windows Phone :')\n. Requesting SMS code on Windows Phone works, voice call verification works on Android as well.\nP.S.\nI used MissVenom to sniff out whatsapp traffic on my HTC One X (Android 4.1) and this came up:\n```\nREQUEST:  https://v.whatsapp.net/v2/exist?cc=31&in=647**&lg=nl&lc=NL&id=%0d%8d%7f%ba%3b%84%b4%27%99%ed%cc%9b%0a%16%b9%7f%22M%ca%e2\nRESPONSE: {\"status\":\"fail\",\"reason\":\"incorrect\",\"sms_length\":6,\"voice_length\":6}\nREQUEST:  https://v.whatsapp.net/v2/code?cc=31&in=647**&id=abcdef0123456789&lg=nl&lc=NL&mnc=004&mcc=204&method=self&reason=&token=ff5ba9ca05c29ee834b4b28bf54d2169\nRESPONSE: {\"status\":\"attached\",\"code\":\"g0n3kDV7WMWeJaGWure4hcaACfg=\",\"retry_after\":64}\nREQUEST:  https://v.whatsapp.net/v2/code?cc=31&in=647**&id=abcdef0123456789&lg=nl&lc=NL&mnc=004&mcc=204&method=voice&reason=server-send-request-too-recent&token=ff5ba9ca05c29ee834b4b28bf54d2169\nRESPONSE: {\"status\":\"sent\",\"length\":6,\"method\":\"voice\",\"retry_after\":1805}\n```\n. Soon ;)\nstdClass Object\n(\n    [status] => fail\n    [reason] => too_recent\n    [retry_after] => 84\n)\n. Nope, haven't received anything yet. Seems like they borked this as well.\nOh well, I didn't have any plans for this weekend anyway :')\n. Obviously because of us :')\nI'll poke my WP7 device with MissVenom when I get home, Windows Phone still uses the simple SMS code verification while Android uses the \"self\" verification method. Let's see how that works out.\n. Just broke my HTC One X... Guess I won't be playing with registration codes this weekend after all :(\n. I've tried using the known user agent and token for Windows Phone but it returned old_version error. Increasing the version in user agent won't do any good because the newer version uses a different token.\nI pulled two interesting DLL files from my unlocked WP7 device which I'm looking into right now:\nhttps://dl.dropboxusercontent.com/u/68235039/WhatsAppDLL.zip\nAnyone wanting to give it a try can decompile them using ILSpy\nhttp://ilspy.net/\n. Nope not yet.\nI've found three DLLs on my WP7 device, two of which are managed and can be easily viewed using Reflector. The third one in an unmanaged native ARM DLL which contains the new hashing function for generating your identity as well as the new registration token or requestCode.\nI'm doing some freelance work at the moment but I'll try to decompiling the DLL when I get home. Let me know if anyone else want to give a shot at it so I can share the file.\nThe two managed DLLs have lots of useful functions in it e.g. preparing bulk messages, expecting many new features in WhatsApi and WhatsApiNet. Not sure if I should include it in my repositories or sell it to the spammers though :p\n. The two I posted are managed so you can view them using ILSpy or Reflector. The third one is unmanaged so it doesn't contain any useful information. It's also compiled for ARM so I won't be able to call it on my PC. I'll have to either decompile it ant attempt to read the assembly code or write a WP7 app which calls the DLL to retrieve the registration token. Not sure yet which is a bigger pain in the ass to do..\nI expect to be home in ~3-4 hours\n. P.S.\nThis has some priority but it's not critical to me since I already have valid credentials and other means of obtaining a password.\nIf you're really desperate you can always use a rooted Android device, unlocked WP7 device or jailbroken iOS device to register your number and use MissVenom or WhatSNiff to sniff out the password AND identity for requesting a new password using checkCredentials()\nHmm come to think of it, I should probably build something to do this with a regular mobile device. I just need to find a working ARP spoofer for windows and voila!\n. Setting up ANY device requires nothing more than editing the hosts file and installing a certificate as trusted, though the methods of doing so may vary per platform.\nI'm looking into adding a small DNS server to MissProxy, this will replace the need to edit the hosts file on the device (requiring root/jailbreak).\nMarketplace is offline at the moment, I'll have to wait before I can play around with WhatsApp on my WP7 device.. :(\n. https://github.com/venomous0x/WhatsAPI/commit/09499c8417765d92912bae072f5f2473d277f5df\n. Gee I wonder what that could possibly mean??\ntoo_recent => you've already requested a code\nretry_after => timeout in seconds, you can retry after that\nI've implemented this in my latest commit https://github.com/shirioko/WhatsAPI/commit/a82446813297e321720662f1efe23abc6acda7bc\n. Reason? Probably WhatsApp updating or ending S40 support.\n// User agent and token used in reques/registration code.\nconst _whatsAppUserAgent = 'WhatsApp/2.3.53 S40Version/14.26 Device/Nokia302';\nconst _whatsAppToken = 'PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1354754753509';\nUsing old WP7 user agent will result give the \"old_version\" error and using the old token will give an invalid token hash.\nWe need someone with an S40 who can confirm that the registration is still working on the official client and if possible also sniff the code request. I've updated MissVenom to include user agent in the output so we can verify that as well.\n. Does this actually work? Because you would expect that requestCode and registerCode need the same identity to work at all.\n. So this means that WhatsApp still uses \nmd5(strrev($imei))\nfor it's identity?\n. Well I'll be damned, it works! Identity is ignored, so it works as long as the phone number and SMS code are correct.\nThat's some pretty shitty security, something WhatsApp is well-known for :')\n. This would work anyway because the new generated identity uses both your phonenumber and imei code, so a different number on the same phone would generate a different identity.\nold situation:\n$identity = md5(strrev($imei));\nnew situation:\n$identity = urlencode(md5($phonenumber . $imei, true));//something like this, we still have no clue how this actually works...\nSee here: https://github.com/venomous0x/WhatsAPI/issues/283#issuecomment-16415346\n. http://mywapi.nl/whatsapi/share/\nThe token is in the native DLL which is compiled for ARMv7, so unless you have a WP7 device or your CPU supports virtualization you won't have much use for it.\n. Uhh it's kind of late now, I'll try to comprehend this big lump of information in the morning...\nIt's awesome to see someone who knows what they're doing!\nI've tried building a WP7 app which calls the DLLs as-is, so you wouldn't need to decompile/reverse-engineer them. I have a spare WP7 device lying around so I could use it as an interface to generate tokens from my desktop. Can't remember why I stopped working on it though...\nIf you need to register a number you can always request the code through an official client and use that code to register on WhatsApi, the identity is not matched, only number and sms code :)\n. Here you go:\nWhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\n. First check if generated identity is registered in WhatsApp:\nUSERAGENT:WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\nREQUEST:  https://v.whatsapp.net/v2/exist?cc=31&in=650568134&id=%b3%c5VT%c5%d8%89%e9~%e5X%911WW%9f%7c%b2I%d5&lc=NL&lg=nl\nRESPONSE: {\"status\":\"fail\",\"reason\":\"incorrect\",\"sms_length\":6,\"voice_length\":6}\nSecond request to send an SMS code:\nUSERAGENT:WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\nREQUEST:  https://v.whatsapp.net/v2/code?cc=31&in=650568134&to=31650568134&lg=nl&lc=NL&method=sms&mcc=204&mnc=004&token=5f795c7dbe10348b42d4be823fd16583&id=%b3%c5VT%c5%d8%89%e9~%e5X%911WW%9f%7c%b2I%d5\nRESPONSE: {\"status\":\"sent\",\"length\":6,\"method\":\"sms\",\"retry_after\":1805}\nThird request to verify SMS code (the number is fake so I had to enter something)\nUSERAGENT:WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\nREQUEST:  https://v.whatsapp.net/v2/register?cc=31&in=650568134&id=%b3%c5VT%c5%d8%89%e9~%e5X%911WW%9f%7c%b2I%d5&code=123456&lc=NL&lg=nl\nRESPONSE: {\"status\":\"fail\",\"reason\":\"mismatch\",\"retry_after\":2}\n. I've added the whole WP7 WhatsApp rar archive to my website, you can take a look at that if it's any help :)\nhttp://mywapi.nl/whatsapi/share/whatsappwp7.rar\n. I can provide you with the 2.8.2 DLLs if that's any help?\nThe hashes for that are in yowsup's source:\nhttps://github.com/tgalal/yowsup/blob/master/src/Yowsup/Common/Http/warequest.py#L38\npython\n(\"WhatsApp/2.8.2 WP7/7.10.8773.98 Device/NOKIA-Lumia_800-H112.1402.2.3\", \n                \"k7Iy3bWARdNeSL8gYgY6WveX12A1g4uTNXrRzt1H\"+\"889d4f44e479e6c38b4a834c6d8417815f999abe{phone}\"),\n. It's up!\nhttp://mywapi.nl/whatsapi/share/wapp_wp7_282.rar\nRegarding loading the DLL into memory and reading back it's contents, can you PM me on how to do this? :)\nEDIT\nOh damn it I just realized 2.8.2 doesn't have a native DLL :/ Bummer\n. I've decompiled both DLLs from 2.8.2 for you using ILSpy\nyou can download the complete package in ilspy.rar or look into specific files here:\nhttp://mywapi.nl/whatsapi/share/ilspy/whatsappcommon_dll/WhatsApp/\nEDIT:\nAs you can see the first part of the registration token can be found in Constants.cs\n. I would gladly run the app to decrypt the token on one of my WP7 devices, I'll look into it when I get home in a few hours\n. Android also uses SMS & voice registration, it's just that its Java code has been obfuscated making it next to impossible to work with.\n. I can get you remote desktop access to my windows 7 Ultimate home server with VS2012, .NET4.5, WP8 SDK and my WP7 device connected to it, guess that should give you some more stuff to play around with.\nLet me know if you'd like that, I'll set up the required software on the machine.\nI can't get this stupid native DLL to load in my WP7 app, hopefully you'll have more luck with it :)\n. I've tried to load the DLL into a homebrew WP7 app and even constructing the app from within another app\nc#\nWhatsApp.App app = new WhatsApp.App();\nBut I keep getting this error:\nNativeException was unhandled\nDLL registration, hr=0x800700c1\nStack trace:\nc#\n   at WhatsApp.NativeInterfaces.CheckHr(UInt32 hr, Func`1 msg)\n   at WhatsApp.NativeInterfaces.CheckHr(UInt32 hr, String msg)\n   at WhatsApp.NativeInterfaces.Initialize()\n   at WhatsApp.App..ctor()\n   at PhoneApp1.MainPage..ctor()\n   at System.Reflection.RuntimeConstructorInfo.InternalInvoke(RuntimeConstructorInfo rtci, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)\n   at System.Reflection.RuntimeConstructorInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)\n   at System.Activator.InternalCreateInstance(Type type, Boolean nonPublic, StackCrawlMark& stackMark)\n   at System.Activator.CreateInstance(Type type)\n   at System.Windows.Navigation.PageResourceContentLoader.BeginLoad_OnUIThread(AsyncCallback userCallback, PageResourceContentLoaderAsyncResult result)\n   at System.Windows.Navigation.PageResourceContentLoader.<>c__DisplayClass4.<BeginLoad>b__0(Object args)\n   at System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, Binder binder, Object parameters, CultureInfo culture, Boolean isBinderDefault, Assembly caller, Boolean verifyAccess, StackCrawlMark& stackMark)\n   at System.Reflection.RuntimeMethodInfo.InternalInvoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, StackCrawlMark& stackMark)\n   at System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters)\n   at System.Delegate.DynamicInvokeOne(Object[] args)\n   at System.MulticastDelegate.DynamicInvokeImpl(Object[] args)\n   at System.Delegate.DynamicInvoke(Object[] args)\n   at System.Windows.Threading.DispatcherOperation.Invoke()\n   at System.Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority)\n   at System.Windows.Threading.Dispatcher.OnInvoke(Object context)\n   at System.Windows.Hosting.CallbackCookie.Invoke(Object[] args)\n   at System.Windows.Hosting.DelegateWrapper.InternalInvoke(Object[] args)\n   at System.Windows.RuntimeHost.ManagedHost.InvokeDelegate(IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)\nany thoughts?\nEDIT:\nNativeInterfaces constructor:\nc#\npublic static void Initialize()\n{\n    lock (NativeInterfaces.initLock)\n    {\n        OEMPublicDirectory.Initialize();\n        string[] array = new string[]\n        {\n            \"9eb98dc6-afda-460c-9949-d17135c07612\",\n            \"c28a9cd1-963b-4660-929d-ea82e0baf4d7\",\n            \"7b947cca-f203-41cc-aa9b-96952eae168a\",\n            \"f990f7de-fd2c-46f1-ab07-50e20b9a1ebc\",\n            \"932540fe-c52e-47bd-9643-6b462648bca1\",\n            \"7263fc58-6ca4-4708-a047-17152fed7141\"\n        };\n        string[] array2 = array;\n        for (int i = 0; i < array2.Length; i++)\n        {\n            string text = array2[i];\n            uint hr = ComBridge.RegisterComDll(\"WhatsAppNative.dll\", new Guid(text));\n            NativeInterfaces.CheckHr(hr, \"DLL registration\");\n        }\n        NativeInterfaces.init = true;\n    }\n}\nAnd the CheckHR method:\nc#\npublic static void CheckHr(uint hr, Func<string> msg)\n{\n    if ((hr & 2147483648u) != 0u)\n    {\n        throw new NativeException(hr, string.Format(\"{0}, hr=0x{1}\", msg.Invoke() ?? \"Native function failed\", hr.ToString(\"x\")));\n    }\n}\n. Holy crap you were right, just ran this on my HD2 and it gave no errors :o\nc#\nWhatsApp.NativeInterfaces.Initialize();\nByteBuffer inp = new ByteBuffer();\nIByteBuffer res = WhatsApp.NativeInterfaces.Misc.GetToken(inp as IByteBuffer, inp as IByteBuffer);\nNow let's see what the next move would be..\n. Ooooooh I think we're getting somewhere... :D\nc#\nSettings.RecoveryToken\n{byte[20]}\n    [0]: 0\n    [1]: 191\n    [2]: 27\n    [3]: 131\n    [4]: 247\n    [5]: 234\n    [6]: 89\n    [7]: 254\n    [8]: 234\n    [9]: 63\n    [10]: 133\n    [11]: 228\n    [12]: 41\n    [13]: 67\n    [14]: 102\n    [15]: 236\n    [16]: 47\n    [17]: 22\n    [18]: 53\n    [19]: 80\nConvert.ToBase64String(Settings.RecoveryToken)\n\"AL8bg/fqWf7qP4XkKUNm7C8WNVA=\"\n@JayFoxRox  you sure you don't want to play around on Remote Desktop? ^^\n. c#\n            WhatsApp.NativeInterfaces.Initialize();\n            string number = \"650568134\";\n            string s4 = \"21a31a2d9dbdc9a8ce324ef2df918064fd26e30a\";\n            IByteBuffer inp = new ByteBuffer() as IByteBuffer;\n            inp.Put(System.Text.Encoding.UTF8.GetBytes(s4 + number));\n            IByteBuffer res = WhatsApp.NativeInterfaces.Misc.GetToken(null as IByteBuffer, inp as IByteBuffer);\n            byte[] output = res.Get();\n            string data = System.Text.Encoding.UTF8.GetString(output);\n            string data2 = Convert.ToBase64String(output);\noutput = {byte[16]}\n    [0]: 95\n    [1]: 121\n    [2]: 92\n    [3]: 125\n    [4]: 190\n    [5]: 16\n    [6]: 52\n    [7]: 139\n    [8]: 66\n    [9]: 212\n    [10]: 190\n    [11]: 130\n    [12]: 63\n    [13]: 209\n    [14]: 101\n    [15]: 131\ndata = _y}\ufffd\u00104\ufffdB\u053e\ufffd?\ufffde\ufffd\ndata2 = X3lcfb4QNItC1L6CP9Flgw==\nEDIT:\nThis seems to be the interesting part of the code (in Registration.RequestCode)\nc#\n    string buildHash = Registration.GetBuildHash();\n    IByteBuffer prefix = Registration.NewByteBuffer(null);\n    IByteBuffer fuzz = Registration.NewByteBuffer(Encoding.get_UTF8().GetBytes(buildHash + number));\n    IByteBuffer token = NativeInterfaces.Misc.GetToken(prefix, fuzz);\n    string text4 = token.Get().ToHexString().ToLower();\n. That's my old phone number which has been disconnected for years now ;)\nHmm I'm not sure if I'm able to read the memory directly though...\n. My server should always be online, are you getting a login prompt?\n. WE DID IT\n. BOOM https://github.com/shirioko/WhatsAPI/commit/09499c8417765d92912bae072f5f2473d277f5df\nWell that should leave a mark on our legacy haha :D\nEDIT:\nAlso added actual credits to my fork :)\nhttps://github.com/shirioko/WhatsAPI/blob/219d220f4d4e7bcd1693b1e6c5323b287f76f70c/README.md\n. Nope.\n. Yes they work but I don't think that my changes have been merged with venomous0x repository\nTry my fork instead https://github.com/shirioko/WhatsAPI\n. EVERYONE GO SPAM VENOMOUS0X TO MERGE MY PULL REQUEST! :D\n. Oh and here's the explanation on how the new upload works https://github.com/venomous0x/WhatsAPI/issues/308#issuecomment-16299659\n. Works fine on my end, can you try doing the following:\nadd\necho \"<textarea cols='170' rows='50'>\";\nat the top of your page. This way you can see the debug information properly.\nAnd use this code to test:\n$w = new WhatsProt($username, $imei, \"Derp\", true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->MessageImage($target, 'http://questgarden.com/84/77/7/090712062416/images/Purple%20Mountain%20Magesties.jpg');\n$w->PollMessages();\nI've already added PollMessages() to Message() but I don't think I did so for sending images. This should do the trick! ;)\nYour output should look like this:\n```\nrx  \nrx    \nrx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    /9j/4AAQSkZJRgABAQAAAQABAAD//gA+Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBkZWZhdWx0IHF1YWxpdHkK/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgASQBkAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A4xMDnPWnswzitdtMjDEKxPsBSnTN2OP0r6TmRgotmQoLHGcfjUot5CPvZ/GtqLRGIzs49TU6aSzdF/IVLqI1VO5z3kSL1phWRT0P5V1aaFLjPA9s0Nokx52k+w5pe3K9granKsrEclsflUJjPYfjmupbRLon/V7R7rUEujlB868/TFP2xHsEc43mYwX/AApoCj7wz+Na02mAdA34DNUXgVCRhs/SqVVMh0LdSPzsLgAD361E8hPUk/XipxAWHej7ISM7T+Io9oT7KxSL89qKsmJVOCcH3xRS5xciO/WbSopATNjJ6PGf1qwL/SyMeZGyjnjgflkVxFt4itUsQz2wm54bAyvsalXX7GRSUtVJ9yT+lZ8rf9IaXmdt/belhQBCrAd1bH8+aspqmiAhi5HqqjI/lXMwa1YmMxrYRKRgkOM/qc0i6pacyhUkCknZGMAAHB6Vxe3lKfKqb/A7lhFGHP7VfidlDqWnSEeSuQe54/nWhHPklRGqD+8zj9BXFxXou1jlRdq5yo2445A/Sp2uLl7dWXOVPfuK5qixU37tor7zeCwkF7zcmdS8VreuIg8m9fvhxwfp2pzaRYYHlhY2x1wD/OuOnvb020vlu8e3jcvOBVGTXJNPXddXjNJswI1zx+Hf8ayjhsWpX5y5VsK46L8Dd1OwVJ2UYnwMhhJtXpWFLc2CK4+zruQgN+9XOT7daxdQ8SSSQBI3VGIx7flXOm8PlstsuSxy0zdT9BXfTU4r95K5x1KsJfArG3reqwwIEhZUkVstg9vSuefW7yRSiMFHZiOapvEzPmRmY+1JtKLg4A7YolV7GWoxiZGLO+WPUtyaKCQp4GffNFZ8zCxXtL4q2c4PfPOa1bG5WO7SYMU552ntXLo/IJ4b2q7BLKGGwnGe9XTrOxi1Y7yDVYLgvuA7oWCDDDt+PvUMksdjDKlswIHJ4PP0z+FckZnwM4/4DUy3E5UhixXH8VbqoCZ1ml65ICNwPljjOefetb/hKkChArPIAMrjOT9R7154s7Bvl65p63DZbzHZeegOP6VDa7FczO2vfEciSFIdvnMck5DCsKeZ7iVpZXLyNwCByay1m2spUDnrh85qw91IjsI4wRgHg9azdQZI9sCcMxC5/wA/SnttIKL8vvVYXT7eYsHPTNRNeS5kHl9OmD1rOUmND5ETzTt78Emq8mN3JP40huW5PkHOPWqb3j70Bi6nnOazbHcmZueoH1oqm166sQLdz+X+FFLmQFOCPJ/qav2hV5wgBYd8Vq2nhmWezR7iRbdieEznj396tnwjJgfZbhWbPIOR+tdkIWVzK6uUooYoN245C5JUEHH+eajmkWeNzD0PHXOK0H8PXUJZWjZz34yMfhVeHS5pVaOKJ02/erKOKg3yvQ63hJqKkrP5kFlbscZxtPcjn/Oauf2a4+ZH+ZuxHGaiUvAEXnIHpT2u5ljUYyWpqtCWzIlQnHdENxaPG/mRIOvKL2qp9pKEjJBB5B71cku5UiY4PXqBk1TnjW5YuNySdwRQ5RfUhwa6Dfti5xnHNK1wRnceKpz2zIoJz9Krl3Rc53L6is5XQkXWnKtjdxULzEnriqXm859aQyZrO4FgykHqPyzRVUvRS5mB0EepXrSQRiZ3YZG0PsDe5xU9u/2O7EywtvYcgtnae2CaqWn/ACw+h/pWpef8gZfon/oQrvirxuZ3sy59tnaQbT+TcsfYd6Wa+nhY+akmM4BZTyaydP8A+QnB9T/6Ca6If6iT8P5irjFTG5yiZU7+a4ZoCrdQTxmiB0kJEgjGOmeD+VVNf/48rX/e/wAKqL9965q2Cozlqv0Omljq0FozoUt9u1ljkmRuCVTIH5U6SO3TaJEAJH3cc/8A1q1/DP8AyDh9TWNcf8hSb6t/Oso5RT5uZzdjplms1CygrlCe0t3c7CVUDgOD/Ss+4d4GEbQxeWegCZB/MVo3X3j9RVfUf+PcV3KjGnFxiebKrKo+aRz17FEcyRJs9V7fhVHNak/+rl+lZvYV51ZWloaRGZooorEZ/9k=\ntx  \nrx  \nrx    \nrx      1367824515-2\nrx      \nrx    \nrx  \n```\nOh and P.S.:\nYou can comment out line 4 & 5 in testprotocol.php, nobody uses it anymore. I'll do a cleanup of the code when I get to it, also removing the unused python code.\n. Well if you did as I suggested you would be able to see the actual nodes instead of just bodies. Since you view the output in a browser it will process the  as HTML tags so you won't see them unless you put them in a  element.\n. Can you try sending a local file instead of a URL?\n. You have to enable the php_fileinfo extension.\nI've added replacing mime_file_type with a homebrew function to my todo list\n. For now you can simply replace line 1214\n$this->_mediafileinfo['filemimetype'] = mime_content_type($filepath);\nwith\n$this->_mediafileinfo['filemimetype'] = \"image/jpeg\";\nthis won't work for audio and video files though.\n. Like this:\n```xml\n<derp />\n```\nxml\n<derp />\n. Uhm did you notice this line in your image message node?\n<message to=\"@s.whatsapp.net\" type=\"chat\" id=\"1367829792-2\" t=\"1367829792\">\nyour contact phone number is empty :')\n. Well here's something from the official WP7 client's DLL:\nc#\n// WhatsApp.MediaUpload\npublic static Message CreateMessageWithPicture(string jid, WriteableBitmap bitmap)\n{\n    if (bitmap == null)\n    {\n        return null;\n    }\n    int num = bitmap.get_PixelHeight() * bitmap.get_PixelWidth();\n    int num2 = 640000;\n    int num3 = bitmap.get_PixelWidth();\n    int num4 = bitmap.get_PixelHeight();\n    if (num > num2)\n    {\n        num4 = (int)Math.Sqrt((double)(num2 * bitmap.get_PixelHeight() / bitmap.get_PixelWidth()));\n        int num5 = num4 / bitmap.get_PixelHeight();\n        num3 = bitmap.get_PixelWidth() * num5;\n    }\n    MemoryStream memoryStream = new MemoryStream();\n    Extensions.SaveJpeg(bitmap, memoryStream, num3, num4, 0, 80);\n    double num6 = 100.0 / (double)Math.Max(bitmap.get_PixelWidth(), bitmap.get_PixelHeight());\n    MemoryStream memoryStream2 = new MemoryStream();\n    bitmap.SaveJpegWithMaxSize(memoryStream2, (int)((double)bitmap.get_PixelWidth() * num6), (int)((double)bitmap.get_PixelHeight() * num6), 0, 80, 48128);\n    memoryStream2.set_Position(0L);\n    MediaUpload.MediaDescriptor media;\n    media.extension = \"jpg\";\n    media.stream = memoryStream;\n    media.contentType = \"image/jpeg\";\n    media.data = memoryStream2.ToArray();\n    media.waType = FunXMPP.FMessage.Type.Image;\n    return MediaUpload.CreateMessageWithMedia(jid, media, null);\n}\napparently WhatsApp resizes the picture if it has more than 640k pixels :)\nAnd here's the video upload, no resizing or limitations here:\nc#\n// WhatsApp.MediaUpload\npublic static Message CreateMessageWithVideo(string jid, MemoryStream stream, WriteableBitmap thumbnail)\n{\n    MediaUpload.MediaDescriptor media;\n    media.extension = \"mp4\";\n    media.contentType = \"video/mp4\";\n    media.stream = stream;\n    media.data = null;\n    try\n    {\n        if (thumbnail != null)\n        {\n            MemoryStream memoryStream = new MemoryStream();\n            double num = 100.0 / (double)Math.Max(thumbnail.get_PixelHeight(), thumbnail.get_PixelWidth());\n            thumbnail.SaveJpegWithMaxSize(memoryStream, (int)((double)thumbnail.get_PixelWidth() * num), (int)((double)thumbnail.get_PixelHeight() * num), 0, 80, 48128);\n            memoryStream.set_Position(0L);\n            media.data = memoryStream.ToArray();\n        }\n    }\n    catch (Exception)\n    {\n    }\n    media.waType = FunXMPP.FMessage.Type.Video;\n    return MediaUpload.CreateMessageWithMedia(jid, media, null);\n}\nOh well, and audio as well for good measure:\nc#\npublic static Message CreateMessageWithAudio(string jid, MemoryStream stream, int durationInSeconds)\n{\n    MediaUpload.MediaDescriptor media;\n    media.extension = \"wav\";\n    media.contentType = \"audio/wav\";\n    media.stream = stream;\n    media.data = null;\n    media.waType = FunXMPP.FMessage.Type.Audio;\n    return MediaUpload.CreateMessageWithMedia(jid, media, delegate(Message msg)\n    {\n        msg.MediaDurationSeconds = durationInSeconds;\n    });\n}\n. I've only fixed image upload, I'll fix video and audio when I get home in a few hours.\n. Crap I forgot that Jonathan already fixed video and audio upload, too many projects going on in this madness filled brain of mine :')\nI also received a notification of received image on my WP7 device when I sent the video file.\nAnother bug is that we use getimagesize() on the video file which consequently results in some divide by zero errors.\nHA FOUND IT\nxml\n<message to=\"316********@s.whatsapp.net\" type=\"chat\" id=\"1367886159-2\" t=\"1367886159\">\n    <x xmlns=\"jabber:x:event\">\n      <server></server>\n    </x>\n    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Herp\"></notify>\n    <request xmlns=\"urn:xmpp:receipts\"></request>\n    <media xmlns=\"urn:xmpp:whatsapp:mms\" type=\"image\" url=\"https://mms922.whatsapp.net/d/AhzY5RNuBhkgtTT9MkFu1QVJCu8pGiz8asWt1p1SIfO_.mp4\" file=\"AhzY5RNuBhkgtTT9MkFu1QVJCu8pGiz8asWt1p1SIfO_.mp4\" size=\"7347284\">\npreview\n</media>\n</message>\nmedia type=image, should change this to type=video. Fixed in commit https://github.com/shirioko/WhatsAPI/commit/c7d7e761aa779dc54e0f12bf81dcbb760d3df291\n. Official WhatsApp client's maximum size is 16MB\n. http://forum.xda-developers.com/showthread.php?t=1624514\nIn addition you can increase upload media limit (stock limit is 16Mb) to send large music files or videos\n. No I haven't, but I think it's only for android. \n. https://github.com/venomous0x/WhatsAPI/commit/2172cc1ceb137af01fe2de3f3fa99261deefa980\n. Well someone has been sleeping under a rock...\nWhatsApp has started using server generated passwords about six months ago. Use one of my proxies to intercept your password and identity or register the number in PHP using SMS\n. Did you use an Android smartphone? This could be related to the method=self registration method where it sends a Base64 string instead of a code.\n. sigh\nAre you using my fork? If not, you need to call $wa->PollMessages() after sending a message for it to be sent properly:\n$wa->Message($target, $message);\n$wa->PollMessages();\n. Do you receive a  node after calling loginWithPassword?\nAnd does your message node contain a JID or a phonenumber as \"to\"?\ne.g.\nto=31650568134 (phone number)\nor\nto=31650568134@s.whatsapp.net (Jabber ID)\n. Not yet, what do you get when you send a message?\n. EDIT\nYes that's the correct output. You won't get a receipt until the other user actually receives the message.\n. https://github.com/venomous0x/WhatsAPI/commit/09499c8417765d92912bae072f5f2473d277f5df\n. WhatsApp doesn't keep a list of contacts per user. The synchronization is only used to check if a phone number is registered in WhatsApp.\n. php\n<?php\nrequire_once(\"whatsprot.class.php\");\n$number = \"your number\";\n$pass = \"your password\";\n$imei = md5(\"derp\");\necho \"<textarea>\";\n$w = new WhatsProt($number, $imei, \"WhatsApi\", true);\n$w->Connect();\n$w->LoginWithPassword($pass);\n$w->PollMessages();\n?>\nwhat do you get when you run this?\nEDIT:\nYou obviously get an error because you didn't include whatsprot.class.php :')\nfixed\n. Well it's working from what I can see.\nSince you're using venomous0x master and not my fork you need to call PollMessages after sending a message.\nThe custom password is a password you receive from WhatsApp when using checkCredentials or registerCode. You need it to log in to WhatsApp using LoginWithPassword.\n. Obvious error is obvious.\nYou're calling $wa->PollMessages() instead of $w->PollMessages()\n. And use testprotocol.php instead of whatsapp.php.\n. How dare you?? :o\nHaha the error you're getting is from a group JID, and given that you get 401 unauthorized error code I'm assuming you're not a participant of the group? \n. I can't seem to grasp the problem. You are still able to send and receive messages, right?\n. No, WhatsApi works fine. Get a fresh copy here:\nhttps://github.com/venomous0x/WhatsAPI/archive/master.zip\n. that's right.\n. Ok.\n. No.\n. AFAIK messages are deleted as soon as they are received, so WhatsApp only stores messages temporarily. There is no such thing as archived messages, message history is stored on the SD card of your device.\n. Yes it showed old messages because he swapped his SD card into the new phone ;)\n. Nope.\nI've dug up the code to send broadcast messages from the WhatsApp.dll I pulled from my WP7 device recently. This is what I could make out after a quick glimpse.\nThis is what a broadcast  text message looks like (broadcast also supports media):\nxml\n<message to=\"broadcast\" type=\"chat\" id=\"broadcast-1453546\">\n    <broadcast>\n        <to jid=\"3234234234@s.whatsapp.net\"></to>\n        <to jid=\"6576546567@s.whatsapp.net\"></to>\n        etc. (limit seems to be 25 recipients)\n    </broadcast>\n    <x xmlns=\"jabber:x:event\">\n        <server></server>\n    </x>\n    <body>derp</body>\n</message>\nI'm 90% sure that this is accurate, but I have some more important stuff to fix right now (a man's gotta eat ya know)\nI'll implement it when I get to it.\nSoon.\nOr you can do it if you want.\n. Oh god I will burn for this, all those spammers... D:\n. For those who care:\n``` c#\n// WhatsApp.FunXMPP.Connection\npublic void SendBroadcastMessage(FunXMPP.FMessage message, string[] recipients)\n{\n    if (message.media_wa_type != FunXMPP.FMessage.Type.Undefined)\n    {\n        this.SendMessageWithMedia(message, recipients);\n        return;\n    }\n    this.SendMessageWithBody(message, recipients);\n}\ninternal void SendMessageWithBody(FunXMPP.FMessage message, string[] recipients = null)\n{\n    FunXMPP.ProtocolTreeNode child = new FunXMPP.ProtocolTreeNode(\"body\", null, message.data);\n    this.Login.TreeNodeWriter.Write(FunXMPP.Connection.GetMessageNode(message, child, recipients), this.AsyncHandler);\n}\ninternal static FunXMPP.ProtocolTreeNode GetMessageNode(FunXMPP.FMessage message, FunXMPP.ProtocolTreeNode child, string[] recipients = null)\n{\n    FunXMPP.ProtocolTreeNode protocolTreeNode = (recipients == null) ? null : FunXMPP.Connection.CreateBroadcastNode(recipients);\n    FunXMPP.ProtocolTreeNode protocolTreeNode2 = new FunXMPP.ProtocolTreeNode(\"x\", new FunXMPP.KeyValue[]\n    {\n        new FunXMPP.KeyValue(\"xmlns\", \"jabber:x:event\")\n    }, new FunXMPP.ProtocolTreeNode(\"server\", null));\n    FunXMPP.ProtocolTreeNode[] array = Enumerable.ToArray(Enumerable.Where(new FunXMPP.ProtocolTreeNode[]\n    {\n        protocolTreeNode,\n        protocolTreeNode2,\n        child\n    }, (FunXMPP.ProtocolTreeNode n) => n != null));\n    return new FunXMPP.ProtocolTreeNode(\"message\", new FunXMPP.KeyValue[]\n    {\n        new FunXMPP.KeyValue(\"to\", message.key.remote_jid),\n        new FunXMPP.KeyValue(\"type\", \"chat\"),\n        new FunXMPP.KeyValue(\"id\", message.key.id)\n    }, (array.Length > 0) ? array : null);\n}\n```\n. I've shared the link to the DLL files before:\nhttps://dl.dropboxusercontent.com/u/68235039/WhatsAppDLL.zip\nYou can use Reflector or ILSpy to view the content.\nHow good is your C#? ;)\n. Here's the FunXMPP class which pretty much contains all the protocol nodes and communication with whatsapp\nhttps://dl.dropboxusercontent.com/u/68235039/funxmpp.cs.txt\nHave \"Fun\" ;)\n. I was going to say no, but okay..\n. Syncing...\nIt's up!\n. three broadcast messages and a regular message:\n\n. WhatsApp doesn't have a contact lit of any kind. I assume it's managed by the app (whether or not to send a receipt based on the local contacts list)\n. Hmm I hadn't thought about it like that. Interesting.\n. I've already synced it so go ahead.\n. Gee I don't know? To my phone? To GitHub?\nhttps://github.com/shirioko/WhatsAPI\n. Ooooookay this is turning into an FAQ. Not gonna happen.\nI don't spam people so I've been using the same number for almost half a year now without getting blocked.\nAnd if I needed to register a number, there are PLENTY of issues explaining how to do it right now.\nSomething about a phone and an SMS code.\n. No.\nIf you actually read the issues you wouldn't even have to ask.\n. https://github.com/venomous0x/WhatsAPI/issues/337\n. https://github.com/venomous0x/WhatsAPI/commit/09eb2a84b7bae6c3f650841875180771535bbfbd\n. Message broadcasts are limited to ~30 numbers, I haven't looked up the limit in a while now.\nYou can download the latest DLL in my WART project or compile it from source yourself, it doesn't use any external or NuGet libraries.\n. No, it just my EPIC FAIL.\nI still need to forward the User-Agent header to v.whatsapp.net, otherwise it won't be able to select the correct token for verification.\nHang on, let me fix it up for you.\n. BOOM FIXED\nhttps://github.com/shirioko/MissVenom/commit/f83639754a289996c524a7860726d46a5204fc8d\nDownload the new MissVenom.exe and try it again.\n. If not, you can replay the /v2/exist request you've captured in MissVenom to get a new password. The old one on your phone will no longer work though :)\n. What kind of machine are you using?\n. Did you run it as administrator? I've added a hook to run only as administrator in the alpha build but not in 1.1. I'll make sure to add it in 1.2\n. I've removed some experimental stuff (shit didn't work anyway) and made build 1.1.2.0\nIt always runs as administrator and is build for AnyCPU (1.1 was build for x86)\nCan you give it a try?\n. Oh and make sure you have the full .NET4 framework (or .NET4.5), .NET4 Client Profile won't cut it ;)\n. Crap, I just removed the alpha build from my repo. Oh well, putting it back online then... :')\n. https://github.com/venomous0x/WhatsAPI/commit/09499c8417765d92912bae072f5f2473d277f5df\n. Known issue.\n. https://github.com/venomous0x/WhatsAPI/commit/09499c8417765d92912bae072f5f2473d277f5df\n. their whole website is a fucking joke, like any of that will ever happen:\nQ: How many messages can I send?\nA: Feel free to use our service in a decent and normal way (fair use).\nQ: What happens if I abuse your service?\nA: We hold you responsable for anything that harms our business. So most likely you will meet one of our lawyers.\nQ: Can I use WebWhatsApp to automatically spam people?\nA: Don't do that! We do not promote spam, we love WhatsApp!\n. \n. Guns don't kill people, but it gets a lot easier to if you put a gun in someone's hand rather than having him find one.\n\"Closely monitored for abuse\" Yeah that's a good one. You don't have any form of user identification other than their IP addresses, and your message page is a simple POST form. So which one is easier to exploit?\n- An API where the user needs to provide his own WhatsApp credentials, his own server (revealing his IP to WhatsApp) and his own application to implement WhatsApi\n- Or an insecure HTML form which can easily and anonymously be exploited using a basic REST or CURL\n@brittson they are a long way from being better than us, with features like media sending, number checking and message broadcasts. They're mentioning that they have image sending capabilities, but I guess they removed it when it broke after the last WhatsApp update?\n. Just to be clear: I am not bashing on your company, I'm just concerned that the only thing between WhatsApp and a random user is your public HTTP form. If you required users to register an account and log in before sending a message you would have a far greater measure of control over it.\n. @WebWhatsApp  Thanks for clearing that up. Yep I know who that is :)\n. Could you close it then? :)\n. Use \nphp\n$w->LoginWithPassword($password);\ninstead of $w->Login();. This will not call checkCredentials.\n. it's\nphp\nmd5(strrev($imei));\n. No.\nPassword is the Base64 encoded string you receive from WhatsApp.\n. Yes, but you probably won't find it. The easiest way for now is to use my app MissVenom and sniff it, or do it the slightly harder way and use my project WhatSNiff\n. Because you're not using my fork. I've changed all sockets to file handles which use freads() and fwrite() instead of socket functions in whatsprot.class.php\n. sigh did you install the certificate on your phone?\nAnd as far as I can tell this is not MissVenom's issue tracker so I keep wondering why all the issues keep popping up in here.\nAlso not very helpful if you don't tell me which phone, OS and MissVenom build you are using.\n. Great :)\n. Download my fork of WhatsApi which contains our latest updates (venomous0x doesn't seem to be active anymore).\nAnd take a look at the ajaxDemo I included in /src/php/ajaxDemo.\n. Good to hear that :)\nSure, it's just an example. You'd still have to build some sort of contact manager and message store.\nto get the number use $node->getAttribute(\"from\")\n. Are the blocked numbers registered using the official client or WhatsApi? All the numbers I'm using were registered and used on an official client and I've never had any problems.\n. What? You don't.\n. Blocking is done by WhatsApp server-side, otherwise the block would only work one-way (you won't receive messages from that contact but he'll still be able to view your picture, last-seen time and status updates)\nYou could try leaving the number running in the official app for ~24 hours and also sending some messages to and from the new number before using it with WhatsApi.\n. Well actually you can, if I recall correctly you will receive an error node when requesting last seen time of someone who blocked you.\nEDIT\nAnd my dev number was blocked by one of my contacts, didn't give me any trouble though.\n. That's correct. Contact sync sends all your contacts to WhatsApp which returns all numbers which are registered (I've also added this to MissVenom sniffing)\nThis has been tested by a few members and it didn't seem to affect whether or not you'll get blocked though..\n. I think that I need to fix MissVenom to work properly, bitch be trippin' right now!\nThis will give us a lot more insight into WhatsApp's (updated) protocol.\nOne of the first things I saw is that the session start node now includes a profile picture child node and that the RC4 key is stored on the server and used across different sessions/connections without the need to create a new one on each new connection (which is a pain in the ass, I need that challenge key to forge the rc4 key and decrypt the traffic grrr)\n. https://github.com/venomous0x/WhatsAPI/issues/361\n. Yeah that was a total brainfart.\nI didn't need to reverse the algorithm, all it took was to use a copy of the key stream to decode the message. The encryption algorithm works by swapping bytes in the key stream and inverting the combination of the key and data.\nSo this is all it takes:\nKey = new keystream\nData = Key.cipher('derp')\nData contains encrypted data\nKey2 = new keystream\nData2 = Key2.cipher(Data)\nData2 will contain the text 'derp'\nThe trick is to synchronize the keystream. After each encrypted character the key stream will swap two bytes in it's array, so missing a single character will bring your stream out of sync and give errors.\n. Both.\n. Correct, as @jonnywilliamson also pointed out here:\nhttps://github.com/venomous0x/WhatsAPI/issues/348#issuecomment-17932440\n. Registering all numbers on a single handset should work fine.\nYou can also use WART to register your numbers to make things easier.\n. WhatsApp numbers are not registered to a device, they are registered to an ID which is generated using the device and phone number. So using a different number on the same device will generate a different unique ID\nEDIT:\nAnd this generated registration ID is an SHA1 hash, which means it cannot be reversed to check device information.\n. WhatsAPI and WART are both maintained by me and use the same device information. \nThe danger is when you register it on a different operating system e.g. register the number on an iPhone and log in using WhatsAPI. In that case the registration is done as iOS and message sending is done as Android, which is probably the reason why my number was blocked a while ago (registered using Windows Phone 7, then logged in as Android)\n. No I'm using a Lumia 1020\nGalaxy S3 is only used because it's an existing Android device. I think I've updated it to Galaxy S4 in one of the repositories.\n. By the way, that Galaxy S3 user agent is not define by your phone number but by WhatsAPI so it will show the same value regardless of your phone number.\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1559\n. If it's blocked you won't be able to log in\n. Hasn't this already been fixed? Download the latest version and if that doesn't work try shirioko/WhatsApi, we've added many fixes to my fork.\n. I was digging through the commit log and I finally found it:\nhttps://github.com/shirioko/WhatsAPI/commit/8c510cbafda073c3ea394ed44e3e2de94557e56c\nso just use my fork of WhatsApi instead, it contains our latest updates, add-ons and fixes since venomous0x hasn't been active for a while now :)\nI have no idea which version you are using right now, line 1340 is an empty line in venomous0x/WhatsApi whatsprot.class.php\nPS\nyou don't need to call sendNickname after logging in as it is already done during login ;)\n. Take a look at the code and you'll see for yourself:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1055\n1 file not saved to /tmp \n2 response contains different data \n3 try to get element from xml object without checking if it exists\n4 nullReference exception \n. you can either give the local path /home/user/blablabla.jpg\nor a remote address http://localhost/blablabla.jpg\nif you use the remote address the file will be saved locally to /tmp before uploading\n. Just stop messing around with combinations and use MissVenom instead. This will also reveal your phone identity so you can request new passwords in the future using the API.\n. PS for everyone: a random weird idea just popped into my head regarding MissVenom and it still needs some considerations, but I'm dusting off one of my old machines to use as a small public server, so you might be in for a treat in the next few weeks ;)\n. How did you try to import the certificate? Just open your iPhone browser and go to https://cert.whatsapp.net\nThis will return the certificate file (works on Android and WP7, though I don't have an iOS device to test it on)\nPassword is not necessary. Which build of MissVenom are you using?\nOh and what output did MissVenom generate when you got the error (check missvenom.log)? :)\n@jonnywilliamson you also used this on your iPhone, did you run into any trouble when installing the certificate from cert.whatsapp.net?\n. Alternatively you can simply follow this link on your device to download the certificate:\nhttps://github.com/shirioko/MissVenom/blob/master/MissVenom/all.whatsapp.net.pfx?raw=true\n. Hmm my guess is that you only have .NET Framework 4.0 Client Profile installed.\nMissVenom requires assemblies bundled with the full framework, so you need to install either .NET 4.0 Extended or .NET 4.5\n:)\nEDIT:\nOr I could bundle the required DLLs into MissVenom.exe so it will also work with .NET 4.0 Client Profile, might look into that when I get home\n. Why on earth are you calling requestCode() when the phone is already registered? Not to mention that code requesting is borked at the moment as clearly said in many many many issues around here...\nUsing MissVenom during phone registration should get you your Base64 encoded password. Then just use\nphp\n$w->Connect();\n$w->LoginWithPassword($password);//'pw' from Missvenom\nand you're good to go.\nEDIT:\nCheck missvenom.log to find the password\n. The Message() method in my repo already calls the PollMessages() method after sending the message, so WaitForReceipt() won't work for it.\n. I've inconspicuously snuck in a checkbox in the top left in 1.2.2.0 which you need to check in order to enable TCP traffic decoding :')\n. @HcDevel can you write the xml data like this:\nxml\nrx <node>\nxml\nrx <node>\n. Are the tx messages going to phone numbers or to JIDs? (316xxxxxxx@s.whatsapp.net)\nEDIT:\nThe failure message you are getting indicates that the password is incorrect. Can you try registering your phone through MissVenom once again?\n. *sigh* \nI've broken MissVenom for .NET4 Client Profile users in 1.2.2.0 by referencing System.Web.Extensions.dll for its JavaScriptSerializer class:\nhttps://github.com/shirioko/MissVenom/commit/bed43ca90f6e77739174fae9e8d714f0594faa96\nI'll build and upload v1.2.3.0 later today to fix this.\n. Enable php_sockets extension\n\n. Yep, remove the semicolon from this line:\n;extension=php_sockets.dll\n. My guess is that your php dir only has some basic extensions and php_sockets.dll is missing.\nI always use WAMP because it works out of the box without the need to set up and configure stuff. Maybe you should give it a try ;)\nDownload the 32-bit version, 64-bit version has issues with one of the extensions. Can't remember which one anymore, either openssl or libcurl\n. You may need to reboot before Path is updated\n. Did you delete the old php directory to make sure it uses the one from c:\\wamp?\n. You know what?\nJust use my fork instead, I replaced sockets with file handles:\nhttps://github.com/shirioko/WhatsAPI\n. Yes.\nCall \nphp\n$w->GetProfilePicture($target);\nto request a picture and add an event handler to capture it:\n``` php\nfunction onProfilePicture($from, $type, $data)\n{\n    if($type == \"preview\")\n    {\n        $filename = \"../pictures/preview_\" . $from . \".jpg\";\n    }\n    else\n    {\n        $filename = \"../pictures/\" . $from . \".jpg\";\n    }\n    $fp = @fopen($filename, \"w\");\n    if($fp)\n    {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n$w = new WhatsProt($number, $imei, $nickname, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind(\"onProfilePicture\", \"onProfilePicture\");\n$w->GetProfilePicture($target);\n$w->PollMessages();\n```\nTake a look at the ajaxDemo in my repository, it includes a working example ;)\n. https://github.com/shirioko/WhatsAPI\n. This issue is 11 months old. How did you even..?\nI've been updating the code  this whole time. Download latest code and call sendGetProfilePicture\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L755\n. Define \"old\" and \"new\"\nDive into the commit log and see for yourself\n. I think you're lost.\n. https://github.com/tgalal/yowsup\n. Use my fork and see if that helps.\n. EDIT:\nscratch that, @adlerweb was right and I need more coffee. \nhttps://github.com/adlerweb/WhatsAPI/commit/1f946094e3b5c76d869411073453b07d2e04f34f\nThe problem was using reset(explode())\nexplode() does not return a reference to its return value so this warning was raised by reset()\nreference:\nhttp://stackoverflow.com/questions/13117106/annoying-php-error-strict-standards-only-variables-should-be-passed-by-refere\n. @adlerweb actually can you update and push whatsprot.class.php since you are a collaborator of my repo? I'm kind of busy right now :)\n. Excellent\n. Requesting a code uses a different host and protocol (https://v.whatsapp.net).\nAre you using the original repository from here or my fork? Try mine, I've replaces all socket functions with file handles which should work a lot cleaner.\n. Maybe a firewall on your end blocking traffic on port 5222? Are you able to ping c.whatsapp.net?\nEDIT\nTheir ToS state that you're not allowed to generate more load/traffic than a regular user and that you're not allowed to reverse-engineer their protocol, and that's pretty much it. I don't think their proprietary FunXMPP protocol is licensed so you should be able to use that without getting in trouble.\n. I'm working on my own WhatsApp desktop client and there are a number of other projects on GitHub aiming for the same goal.\nI've had no trouble with blocking so far while spamming my test account, so I think that their blocking policy is not only based on a traffic limit but also on the accounts you are trying to contact.\nDon't tell anyone but I came across this:\nhttps://github.com/shirioko/WhatsAPI/commit/11fa519b1734fc10f8140d5d247e875f24795ef3\nwhich would mean that WhatsApp maintains a server-side address book per account. Syncing all of your contacts using contactSyncV2 before sending messages might get you out of the kill zone ;-)\n. Sure go ahead!\n. I already have the codes and the full size sprite image, just need a clone of myself to make some time to implement this..\n\nphp\n$emojis = array(\n                        \"\u203c\",\n                        \"\u2049\",\n                        \"\u2139\",\n                        \"\u2194\",\n                        \"\u2195\",\n                        \"\u21a9\",\n                        \"\u21aa\",\n                        \"\u231a\",\n                        \"\u231b\",\n                        ...\n                        \"\\ud83d\\udeb4\",\n                        \"\\ud83d\\udeb5\",\n                        \"\\ud83d\\udeb7\",\n                        \"\\ud83d\\udeb8\",\n                        \"\\ud83d\\udebf\",\n                        \"\\ud83d\\udec1\",\n                        \"\\ud83d\\udec2\",\n                        \"\\ud83d\\udec3\",\n                        \"\\ud83d\\udec4\",\n                        \"\\ud83d\\udec5\"\n}\n. I think so too, I remember having a lot more emojis on my Android device than on WP7 which I'm using right now.\n. Yes, call SendLeaveGroups\nI've pushed it to my repo a few seconds ago\n. You are the problem.\nRead the existing issues, trace back the code and you'll know soon enough that you'll need to use LoginWithPassword\n. Nice! Did you have to contact them or did they unblock it by themselves?\n. You need an actual WhatsApp password.\nmd5(strrev($imei)) has been replaced with server-generated passwords nearly a year ago.\n. Of course you're not receiving anything. How about you just read the other issues first before asking for step-by-step instructions?\nDownload my fork shirioko/WhatsApi and use that instead.\n. Didn't mean to be hostile, but everyone is using this outdated code and then wonder why it's not working.\nThe latest update here was my pull request more than 2 months ago, all the latest WhatsApi updates like updated media upload and new registration token (the reason why you're not getting an SMS code) are now pushed to my repository instead.\nI guess it's time for me to see if I can become a collaborator here :')\n. And guess who just joined team WhatsApi? ^_^\nI'll push all my commits later tonight\n. Cleanse it with fire! D:\n. Well I'm off to a good start here.. :') I knew I made a typo somewhere, thanks!\n. token = device identity set in the constructor. \nI've added the optional parameter to checkCredentials because back then we used md5(strrev($imei)) to programmatically create device identity in the constructor. \nThe password recovery token on your smartphone could be sniffed using MissVenom, and this parameter allowed you to override the generated identity with the one you captured.\nNo, the password is retrieved only once during registration by using either registerCode or checkCredentials\n. Can't confirm this, URLs I send to my WP7 device are clickable.\n. Oh god I'm such a derp. Almost wanted to post a new issue because I didn't  receive any messages sent from my smartphone. Until I finally realized that the number was added to my blocked list from when I was working on this:\nhttps://github.com/venomous0x/WhatsAPI/commit/86f3bb28f95cdadf280b0ed6fd6eb306b7d0f986#L0R1161\nTo answer your question:\nxml\nrx  <message from=\"31650568134@s.whatsapp.net\" id=\"130166375587970000-0\" type=\"chat\" t=\"1372163983\">\nrx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Max\"></notify>\nrx    <request xmlns=\"urn:xmpp:receipts\"></request>\nrx    <body>Http://github.com</body>\nrx    <offline></offline>\nrx  </message>\nthe message contains the URL as plain text, so the app will have to filter and convert the URLs from messages. \nYou can try sending a message to WhatsApi using Android to see if there's any difference.\n. Sounds plausible, can you inbox me your WhatsApi number so I can send you a URL?\n. Nice, I don't think that I could ever bring up the patience to clean up the whole class :)\nMy next step will be rewriting the event manager with default actions, more hooks in processInboundData and to be more user friendly. The current \"GetMessages()\" and \"If, Then, Else\" approach is not very efficient either.\n. I still use Komodo Edit at the moment. It's rock solid and I'm cheap :')\nNamespace seems a bit unnecessary to me as the repository is quite small, but it wouldn't hurt to add it anyway :)\nThe problem I have with standards is that I work with different languages, platforms and organizations each day so I easily mix them up.. \n. Which code do you use to log in?\nTry\nphp\necho \"<textarea>\";\n$w = new WhatsProt($number, $imei, $nickname, true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->PollMessages();\necho \"</textarea>\";\n. Then just use /src/php/testprotocol.php instead and be amazed\n. comment out $w->MessageImage() or enable PHP extention libGD\n. The password is returned on registerCode and not on requestCode. You received the password when you used \nphp\n$w->registerCode('501893');\n. Use\nphp\n$result = $w->registerCode(\"your code\");\nvar_dump($result[\"pw\"]);\nI'm afraid you've already used your sms code and will have to request a new one using requestcode though..\nPS are you setting the debug flag on WhatsApi?\nphp\n$w = new WhatsProt($username, $imei, $nick, true /*debug flag*/);\n. 'too_recent' means that you already requested a code recently\n'retry_after' is the number of seconds you'll have to wait until you can request a new SMS code\nSo you'll have to wait about 6 hours until you can request a new one\nBUT WAIT THERE'S MORE!\nSince you registered this number using WhatsApi you should be able to get a new password using your identity:\nphp\n$identity = \"a6ec2804d3f38c*************db173327862\";//id from your previous post\n...\n$w = new WhatsProt etc.\n...\n$result = $w->checkCredentials();\n$password = $result->pw;\nI was able to do this so go ahead and try :)\nPS you should remove your id, phone number and such from your posts so people won't be able to hack your account ;)\n. I'm trying to email you the correct code but I can't figure out which email address to use.. :')\n. I've changed your recovery token so that no one else can hijack your WhatsApp account (since you already posted your phone number and registered identity). \nI was able to acquire a password for your account by using the information you posted. This means that everyone else could have done this as well. So that's why.\nContact me on email so I can send you your new recovery token :)\n. Of course it's stored somewhere on the phone.\nGood luck getting it out though\n. Encryption is not a problem on WP7. \nThe password is stored encrypted in a binary file called 'settings'.\nIt uses the infamous RecToken class from WhatsAppNative.dll to decrypt it into a byte array.\nI can write a simple WP7 app to read the password and feed it to WhatsAppNative.dll to decrypt it but you'll need root acces to be able to do that.\n. Which part of \"Windows Phone 7\" did you miss in my previous comment?\n. Then why are you asking where to find the settings file?\n. In conclusion:\nYes the password is stored on the phone, no we don't have a usable/reliable way to retrieve it. There was someone who was able to dig up his password from his cache files on his iPhone, you'll have to look it up over at yowsup.\nRetrieving the password from the device would be superior to sniffing it during registration because the password can be updated by WhatsApp after registration, so it's definitely something worth looking into.\nFor now you can use my app MissVenom to sniff the password during registration.\n. Nope. The password is just randomly generated by the server, it has nothing\nto do with the imei or SMS code\nOp 29 jun. 2013 21:03 schreef \"Manuelm88\" notifications@github.com het\nvolgende:\n\nI think in Android, the password is in: /data/data/com.whatsapp/files/pw\nanyhow it has some encryption, don't know which so it is kind of hard to\ndecrypt. Also, it will be nice to know how that password is generated, I\nthink it very related with the md5 of the IMEI and maybe adding with the\nsms (which i think is kind of a random 4 digit number) or that number is\nthe salt or something...\nHope someone have found the way to break /data/data/com.whatsapp/files/pw\ncause I want to use the API... thanks!\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/385#issuecomment-20235248\n.\n. Nice\n. You don't \"get\" a password from your smartphone, you either sniff it during registration or you register your phone number using WhatsApi.\n. Why on earth would you want to run PHP on Android?\n. Easiest solution is not to use it on Android\nHarder solution is apparently to post the code you are trying to run so I don't have to guess what you were trying to do\nAnd WhatsApp doesn't use XMPP\nhttps://github.com/venomous0x/WhatsAPI#modified-xmpp\n. There are plenty of working examples included in this project. Basically:\n\nphp\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\n$w->do stuff\nWhatsApp uses a modified version of XMPP which they call FunXMPP\nIt uses message encoding to remove XML overhead and message encryption for security rather than TLS encryption so it will never work with standard XMPP\n. Why don't you try using the examples first?\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php\n. Password is not calculated but server-generated instead.\n. Try using SendPresenceSubscription\n. What exactly are you trying to find?\nRequestLastSeen will send you the amount of seconds since the target went offline.\nSendPresenceSubscription will notify you when a target comes online, goes offline etc.\nUsing SendPresenceSubscription when your target is already online will immediately send you a presence node:\nxml\nrx <presence from=\"3162*******@s.whatsapp.net\" type=\"available\"></presence>\n. I have no idea what you just posted\n. First of all put\nphp\necho \"<textarea>\";\nat the beginning of your PHP code. That way you can see the actual XML nodes. Your browser will try to interpret the XML nodes as HTML code.\nPresence nodes are not pushed into the message buffer (because they're not messages). You can add an event handler for \"onGetPresence\" or add a hook in processInboundData:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L504\n. Nope, that's not it. \nDerp. \nDisregard my last comment, the line and event I referenced was something different.\nHang on, let me fix it up and push my commits...\n. Ok ok I was wrong again :')\nThis was the correct line, however there was a small bug/typo in the code. It's fixed now.\nTry this:\n``` php\n//event handler:\nfunction onPresenceReceived($mynumber, $from, $type)\n{\n    echo \"\\n\\nReceived presence from $from. He/she is now $type\\n\\n\";\n}\n$w = new WhatsProt($username, $token, \"Derp\", false);\n//bind event:\n$w->eventManager()->bind(\"onGetPresence\", \"onPresenceReceived\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->PollMessages();\n$w->SendPresenceSubscription($target);\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\n```\n. Because the number doesn't exist in WhatsApp? Which number are you trying to sync?\n. What do you mean by host phone number? The number you use to log in or the number you send the message to? \n. I've added it not so long ago. Something like sendSetProvacyList\nOp 5 jul. 2013 15:37 schreef \"mofbar\" notifications@github.com het\nvolgende:\n\nPeople spamming on me. I'm not spamming people. :)\nHow can I blocked contacts using API?\nNo $w->BlockedContact($mobileNumber); ?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/389\n.\n. Sorry I was in a meeting so I couldn't respond properly.\n\nHere you go:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1151\nUse SendGetPrivacyList to get your list of blocked contacts from the server\nand\nSendSetPrivacyBlockedList($jids) to set your list of blocked numbers.\nYou can use either a single JID or an array of JIDs as argument. \nIf the argument is empty it will clear your blocked list.\n:)\n. What?? My commits, why would you... What is this?\nI'm confused :/\nI think that every question you have has already been explained many many times before. Take a look in the issues list.\nAnd don't misunderstand this project. This is not an application but an API, so you need some basic programming skills to build the application using the API yourself. And I believe you said something about not being a PHP developer..?\n. I've already reported this change three months ago:\nhttps://github.com/venomous0x/WhatsAPI/issues/283#issuecomment-16415346\nHow do you suppose I fix this then?\n. Nope. \nThe checkCredentials method works perfectly fine when you provide the correct identity. We are unable to reproduce phone identities at the moment though. \nYou can sniff your identity using Missvenom, you can register your phone number using whatsapi and provide your own identity, or you can set your custom identity for an existing account using SendSetRecoveryToken\n. Oh you're in a hurry aren't you? Not even waiting for the server to process the new recovery token before using it.\nTake a look here ;)\nhttps://github.com/venomous0x/WhatsAPI/commit/6954eb3fc95c96411db45dc0fccc9e16c6aae7b9#commitcomment-3478079\nI can definitely agree with you on that the code is a bit outdated, especially the example files. I'm only using testprotocol.php myself, but I can't remove the other example files because testprotocol.php can't be run from command line. \nIf only someone had the time to update the code... (@atans)\n. You can't do anything at all without a password so make sure you have one\n. No, it's not. You need to be connected to whatsapp in order to do anything\nat all. The old contact sync page which didn't require credentials has been\nreplaced a while back with a new one which requires you to log in.\nOp 7 jul. 2013 11:45 schreef \"FAlbanni\" notifications@github.com het\nvolgende:\n\nI would like to see the last timestamp of a user without having to be\nconnected is that possible ?\nThank you.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/392\n.\n. You can already easily do this using whatsapi. If you request the last seen\ntime of someone who blocked you it will return unauthorized error code.\n\nYou'll still need a password to log in though. So it can't be done the way\nyou described it.\nOp 7 jul. 2013 12:12 schreef \"FAlbanni\" notifications@github.com het\nvolgende:\n\ni am working on a whatsapp \"block detector\"\ni want to give a free online service where users input their numbers and\nthe numbers they believe that blocked them, then they will get a response\n\"User blocked you\" or \"User NOT blocked you\"\nsince there isn't anything like that online it will get a lot of traffic\nand backlinkings making it first results on g$$gle, if any of you want to\ndevelop the webpage with me just contact me\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/392#issuecomment-20568601\n.\n. Subscribe to the \"onGetGroupList\" event by adding an event handler\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L559\n\n``` php\nfunction onGroupList($mynumber, $groups)\n{\n    var_dump($groups);\n}\n$w = new WhatsProt($username, $token, \"Derp\", false);\n//bind event handler\n$w->eventManager()->bind(\"onGetGroupList\", \"onGroupList\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->SendGetGroups();\nfor($i = 0; $i <5; $i++)\n{\n    $w->PollMessages();\n}\n```\n. Use the event manager to subscribe to onMessageReceivedServer and onMessageReceivedClient\n``` php\n//event handlers\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\n{\n    echo \"Message $id to $from received by server\\n\";\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $time)\n{\n    echo \"Message $id to $from received by client\\n\";\n}\n$w = new WhatsProt($username, $token, \"Derp\", false);\n//bind events\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->Message($target, \"Hi!\");\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\n```\n. Then what about all these arguments you get??\nphp\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\nCreate a class with static arrays and push it in there I guess?\n``` php\nclass WhatsAppReceipts\n{\n    public static $clientReceipts = array();\n    public static $serverReceipts = array();\n}\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = array(\"mynumber\" => $mynumber, \"from\" => $from, \"id\" => $id, \"type\" => $type, \"time\" => $time);\n    WhatsAppReceipts::$serverReceipts[] = $data;\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = array(\"mynumber\" => $mynumber, \"from\" => $from, \"id\" => $id, \"type\" => $type, \"time\" => $time);\n    WhatsAppReceipts::$clientReceipts[] = $data;\n}\n$w = new WhatsProt($username, $token, \"Derp\", false);\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->Message($target, \"Hi!\");\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\nvar_dump(WhatsAppReceipts::$clientReceipts, WhatsAppReceipts::$serverReceipts);\n```\n. $token is the password recovery token, the same as $identity. \nI don't want there to be anymore confusion about using the IMEI code to request a password (which simply doesn't work unless you've registered your number through WhatsApi using the IMEI code).\n. It comes in one array, but the elements contain multiple variables so I had to put them in another array inside the first one.\nYou can create a Receipt class and put objects into the array instead of arrays?\n``` php\nclass WhatsAppReceipts\n{\n    public static $clientReceipts = array();\n    public static $serverReceipts = array();\n}\nclass Receipt\n{\n    public $mynumber;\n    public $from;\n    public $id;\n    public $type;\n    public $time;\npublic function __construct($mynumber, $from, $id, $type, $time)\n{\n    $this->mynumber = $mynumber;\n    $this->from = $from;\n    $this->id = $id;\n    $this->type = $type;\n    $this->time = $time;\n}\n\n}\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = new Receipt($mynumber, $from, $id, $type, $time);\n    WhatsAppReceipts::$serverReceipts[] = $data;\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = new Receipt($mynumber, $from, $id, $type, $time);\n    WhatsAppReceipts::$clientReceipts[] = $data;\n}\n```\n```\nArray\n(\n    [0] => Receipt Object\n        (\n            [mynumber] => 3526*49\n            [from] => 316***6@s.whatsapp.net\n            [id] => message-1373276475-1\n            [type] => chat\n            [time] => 1373276467\n        )\n)\n```\n. You get two receipts for one message. \nFirst the serverReceipt when the message is received by WhatsApp server, and then the clientReceipt when the message is received and read by the client.\n. You don't need to add the leading \"+\" sign to the numbers. Message broadcast works with JIDs, e.g.\n31650568134@s.whatsapp.net\nAnd message broadcasts also have a maximum number of targets, if I recall correctly according to the WP7 client it's max 20 targets per broadcast.\n. The reported numbers before block vary from 10 to 100, but I think that John has a good point here. Making sure that the recipients have your number in their contacts list may have a big influence on whether or not you get blocked.\n. Of course it's not.\nUse this:\nphp\nforeach($target as $_target)\n{\n    $w->SendPresenceSubscription($_target);\n    $w->sendComposing($_target);\n    sleep(1);\n    $w->Message($_target, \"Your message\");\n    $w->sendPaused($_target);\n    sleep(1);\n}\n. Change $target array values from integers to strings:\nphp\n//$target = array(919*******00, 919******23, 919********22);\n$target = array(\"919*******00\", \"919******23\", \"919********22\");\nand change \nphp\n$w->sendComposing($_target);\nto \nphp\n$w->sendComposingMessage($_target);\n. \n. change it to sendPausedMessage\n. This API works perfectly fine, I've just sent myself a message.\n. Why don't you visit https://cert.whatsapp.net from your phone as described in MissVenom?\nYou can find the password for the pfx file in MissVenom's source code in Form1.cs\nThis issue is also posted in the wrong project btw\n. Did you change your DNS address on your phone?\n. Then you don't know how to use your own device. This has been tested on Android, iOS and Windows Phone 7.8.\nWhich mobile OS are you using?\n. Set your IP settings to DHCP and write down the IP address, subnet mask and default gateway that you get.\nThen change your IP settings to static and enter this:\n- IP address: IP address you received when using DHCP (e.g. 192.168.0.103)\n- Subnet mask: subnet mask you received when using DHCP (e.g. 255.255.255.0)\n- Default gateway: gateway address you received when using DHCP (e.g. 192.168.0.1 or 192.168.0.254)\n- DNS: the IP address displayed in MissVenom\nThis should do the trick\n. And what output does Missvenom generate?\n@jonnywilliamson you used this on your iPhone, did you encounter this as well?\n. Can you install\nhttps://itunes.apple.com/nl/app/inettools-network-diagnose/id561659975?mt=8\nand see to which IP address cert.whatsapp.net resolves by using ping? Make sure you use static IP and set your DNS address to MissVenom's address.\n. It could be something as stupid as Safari rejecting MissVenom's SSL certificate. Can you install this on your iPhone:\nhttps://github.com/shirioko/MissVenom/blob/master/MissVenom/server.v2.crt?raw=true\nand then try going to \nhttps://v.whatsapp.net/v2/exist\nThis should show some output in Missvenom\n. It didn't work reliably so I removed it in 1.2.4.0\nYou can try an older version of you want. \n. Yeah I also came across error log uploading when sniffing WP7. I wasn't able to succesfully pass it through my MissVenom proxy though so I didn't bother with it.\nhow good is your C#? This is what's in the latest WhatsAppCommon.dll:\nc#\n// WhatsApp.Log\npublic static void SendCrashLog(string log, Action onCompleted)\n{\n    long totalBytes = 0L;\n    string arg_1F_0 = log;\n    if (AppState.IsBackgroundAgent)\n    {\n        Log.WriteLineDebug(log);\n        if (onCompleted != null)\n        {\n            onCompleted.Invoke();\n        }\n        return;\n    }\n    MemoryStream memoryStream = new MemoryStream();\n    GZipOutputStream compressOutput = new GZipOutputStream(memoryStream);\n    Log.DumpLog(delegate(byte[] buf, int nbytes)\n    {\n        compressOutput.Write(buf, 0, nbytes);\n        totalBytes += (long)nbytes;\n    });\n    if (log != null)\n    {\n        byte[] array = (log == null) ? null : Encoding.get_UTF8().GetBytes(log);\n        compressOutput.Write(array, 0, array.Length);\n        totalBytes += (long)array.Length;\n    }\n    if (totalBytes == 0L)\n    {\n        if (onCompleted != null)\n        {\n            onCompleted.Invoke();\n        }\n        return;\n    }\n    compressOutput.Finish();\n    memoryStream.set_Position(0L);\n    IObservable<MultiPartUploader.Args> observable = MultiPartUploader.Open(\"https://crashlog.whatsapp.net/upload.php\", new MultiPartUploader.FormData[]\n    {\n        new MultiPartUploader.FormDataString\n        {\n            Name = \"from\",\n            Content = Settings.CountryCode + Settings.PhoneNumber\n        },\n        new MultiPartUploader.FormDataFile\n        {\n            Name = \"file\",\n            Content = memoryStream,\n            Filename = \"log.gz\"\n        }\n    });\n    ObservableExtensions.Subscribe<MultiPartUploader.Args>(observable, delegate(MultiPartUploader.Args args)\n    {\n        if (args.Result != null)\n        {\n            args.Result.Dispose();\n            Log.ClearDebugLog();\n        }\n    }, delegate(Exception e)\n    {\n        Log.WriteLineDebug(string.Format(\"Crash log request raised exception: {0}: {1}\", e.GetType().get_Name(), e.get_Message() ?? \"\"));\n        Log.WriteLineDebug(log);\n    });\n}\n. But this is no longer WhatsAPI related. If you have more questions you can inbox me or start an issue on my MissVenom repository :)\n. We do have an interruption mechanism called eventManager. You can create your own callback functions and bind them to the eventManager.\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n(see the example at the end of the wiki page)\nAll you need to do is add an event handler for onGetMessage, bind it, and create a while loop:\nphp\nwhile(true)\n{\n    $w->PollMessages();\n    sleep(1);//you can remove this sleep but it might stress out your web server worker process\n}\nYou don't need to change your webserver settings, you can simply call\nphp\nset_time_limit(0);\nat the beginning of your script and it will keep running forever.\nYou can also take a look at /src/php/ajaxDemo/socket.php. This script also runs continuously in the background.\n. Of course\nYou don't need the old phone, you can use a new one. All you need to do is receive an SMS code in order to register your number.\nphp\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$w->requestCode();\nthis should get you an SMS code\nnow use\nphp\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->registerCode(\"6-digit SMS code you received\");\n$password = $result->pw;\necho \"Password is $password\";\nthis should return your password\nnow you can use\n``` php\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$password = \"password you received\";// e.g. \"SDFStsdgDFHDFGSDgfsd==\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$w->Connect();\n$w->LoginWithPassword($password);\nsend messages etc.\n```\n. That's right.\n. Update your code again\n. And make sure you use the example I posted here\nhttps://github.com/venomous0x/WhatsAPI/issues/402\nMD5 identity doesn't seem to work anymore for WP7 client details\nYou need to generate one using SHA as shown in my example code\n. Which identity did you use?\n. Strange\nTested it myself using voice:\n- using md5 identity the server returned no_route\n- using sha1 identity I get a phone call\n. Because it works on WP7 if you use a SHA identity\nAre you sure your version includes this commit?\nhttps://github.com/venomous0x/WhatsAPI/commit/74223c1633cc9d664e6bee7d34f419aa1073a6b5\nI've already reported seeing the new urlencoded SHA identity about 4 months ago. We can stick with MD5 identity (probably still working on Android for backwards compatibility) and wait for the inevitable to happen, or we can be ahead of the curve and use the latest formats and encoding.\n. Take a look here\nhttps://github.com/venomous0x/WhatsAPI/issues/402\nYou need to hash the identity using SHA now. And download the latest code.\nYou can't replicate your identity when your number is registered using a smartphone, it's constructed by your phone and we don't know how it works. Easiest way to get it is to use MissVenom\n. Of course not, as I said before we don't know how to reproduce a device's identity.\nYou can only sniff it out using MissVenom and then reuse it in WhatsApi, or create another valid identity using SHA hashing\n. Just use WART ffs\n. Then why did I bother creating a GUI?\nhttps://github.com/shirioko/WART\n. https://github.com/shirioko/WART\n. Try exampleFunctional.php first to see if your username and password are correct\n. ID is only relevant during registration. You don't need an identity if you already have a password.\nBut if you really really really want one, you can enter your phone number in WART and press the [Identity] button.\n. I think your keys are also stuck.\nYou need to uncomment lines 38-42 to enable debug output\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/ajaxDemo/index.php#L38\n. Idk, uncomment the debug lines and find out\nNo you won't be able to log in when your number is blocked, so no sending or receiving.\n. Debug info will appear after a minute of running:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/ajaxDemo/socket.php#L2\nSet the time limit to 10-30 seconds for more frequent debug output\n. Nope, you've got 99 problems but the cache ain't one.\n. Besides, cache is explicitly set to false in all AJAX calls\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/ajaxDemo/index.php#L94\n. Ha! Shun the non believers! :)\n. Register phone number on WhatsAPI or use MissVenom on your smartphone\n. By reading the other issues\nor look in exampleRegister.php\nhttps://github.com/venomous0x/WhatsAPI/issues/401#issuecomment-20753350\n. Not quite :)\nYou forgot this line in phase 2:\nphp\n$result = $w->codeRegister(\"your 6 digit SMS code\");\n. Are all the numbers you are trying to use land line numbers?\n. I find that hard to believe.\nThe S40 client details currently used by yowsup have stopped working a long time ago and the WP7 client details that Jannik and I recovered here https://github.com/tgalal/yowsup/pull/133 are the same as used by WhatsApi\n. @wiitohzjeh no probs :)\n@Debci no.\nEach phone number has one valid password for logging in, requesting a new password will invalidate the old one.\nLogging in will also replace all existing connections.\nThere is one exception though.\nWP7 uses an audio stream hack to push messages to the phone in background. It's buggy as hell, but it might not affect your existing connection. This might allow you to receive messages for one phone number from two different places at the same time.\n. try using these Android client details and see if it works:\nhttps://github.com/venomous0x/WhatsAPI/commit/b62464c7b43d9f6ece86c4c09ec22d4d589b382e\n. In that case you can manually specify the language code and location code\nphp\n$w->codeRequest(\"voice\", \"US\", \"en\");\n. Did this work before? I recall trying to register my home number a while back, which was actively refused by WhatsApp.\n. BTW I found the bug which identified your number as Anguilla, fixing it in a few minutes\n. Right, can you download the latest code and try it again without specifying the language or country code? It should be able to detect your numbers as U.S. now :)\n. > Fatal error: Call to undefined function curl_init()\nYou need to enable the php_curl extension\n. By using the event system\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n``` php\nfunction onGroupList($mynumber, $groupList)\n{\n    print_r($groupList);\n}\n$w = new WhatsProt($username, $identity, $nickname, false);\n$w->eventManager()->bind(\"onGetGroupList\", \"onGroupList\");\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendGetGroups();\nfor($i = 0; $i < 5; $i++) {\n    $w->pollMessages();\n}\n```\n. Change this line:\nphp\n$w->eventManager()->bind(\"onGetGroupList\", \"onGroupList\");\nto\nphp\n$w->eventManager()->bind(\"onGetGroups\", \"onGroupList\");\n. Then I guess you missed my commit https://github.com/venomous0x/WhatsAPI/issues/405#ref-commit-5989e19\nDownload the latest code and try again.\n. Here you go\nhttps://github.com/venomous0x/WhatsAPI/commit/11fa519b1734fc10f8140d5d247e875f24795ef3\n. Your PHP version is too old, you need at least 5.3\n. Are you using PHP 5.3?\nhttps://github.com/venomous0x/WhatsAPI/issues/407\n. You're the second one to report this in the past few days..\nMaybe we'll just need to add PHP 5.2 support :')\nReading the change log for 5.3 right now to see if it's worth it or not:\nhttp://php.net/releases/5_3_0.php\n. ^ What he said. \nThe new code is PSR2 compliant, so all method names and property names start with lower case now.\n. My guess would be that your key streams get out of sync. So this only happens when you send messages too fast?\n. Just tried this myself.\n$w->sendGroupsChatCreate(\"Derpchat\", array($target)); creates a group with two participants (as expected)\n$w->sendGroupsChatEnd() gives me this error though:\nxml\nrx  <iq from=\"3526********-1373792772@g.us\" id=\"endgroup-1373794668-1\" type=\"error\">\nrx    <error code=\"400\" type=\"modify\">\nrx      <bad-request xmlns=\"urn:ietf:params:xml:ns:xmpp-stanzas\"></bad-request>\nrx    </error>\nrx  </iq>\nstrange. Removing all other participants from the group first doesn't do any good either.\n. If you search very carefully you may stumble upon an Android registration token that I posted last week somewhere around here (or was it in yowsup..?)\nIt does look like WhatsApp has been updated for Windows Phone, latest version is 2.10.491\n. Changing the version number results in a bad_token error, pfff...\nIt's 02:45 here and I need my sleep, I'll pull the updated DLLs off my phone tomorrow\n@JayFoxRox could you help me again with this? :)\n. The new build hash is 'a56e1b9bc3fe8adf7c1bb4cc8559f150ba1ec06a'\nIt still gives me the bad_token error though, they probably also changed the token\n. Well the bad_token problem won't magically go away over time, I need Jannik to patch the new WhatsAppNative.dll so I can use it to get the new token. Which may take some time.\nI can't do it myself as I don't know anything about the assembly wizardry that he uses\n. https://github.com/venomous0x/WhatsAPI/commit/1995a68f0e5adad5624a720f2e5a0cd31014fcd3\n. Would be useful if you told which code you are using at the moment.\nI can ensure you that it works, just uploaded and sent an image to myself a few seconds ago.\n. Above code works for me. Do you have libcurl installed and enabled in PHP?\n. Oh are you using 64-bit WAMP server? It has known issues with libcurl. Download and install the 32-bit version instead, works just fine ;)\n. I'm not quite sure what to make of this..\nAre you actually trying to connect to WhatsApp using standard XMPP or are you guys just lost?\nhttps://github.com/davidgfnet/whatsapp-purple\n. WhatsApp doesn't use standard XMPP\nhttps://github.com/venomous0x/WhatsAPI#modified-xmpp\n. Clickable on Android on this end. \nIs the sender in your iPhone's contact list?\n. So, close then? :)\n. http://www.whatsapp.com/faq/en/iphone/23559013\nThe URL scheme uses address book ID as destination and not a number that you can manually input, so the number still must already be in your contact list before you can send anything.\nEDIT:\nBlog post referenced from AppStore:\nhttp://blog.whatsapp.com/?lang=nl&set=yes\n. The solution is to add the number to contacts\n. You know how to add a number on your phone.\n. Then he has to add your number.\n. Can both of you please be more specific? I haven't had any coffee yet..\n. How did you register this account?\n. Probably caused by using different user agents with the same identity. Consistently using Android user agent should prevent this.\n. Format your code, we can't read the response\n. That's correct, you will reset your password every time you call checkCredentials.\nAnd this is why you should always use the debug parameter:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L381\n. Did you get blocked or did your password simply change?\n. CURSES! My dev number got blocked. \nNow it's personal. >:(\n. Don't get your hopes up, paid accounts didn't do shit when people were being blocked for sending a lot of messages\n. Sync contacts\n. EDIT:\nthis one:\nhttp://www.wpcentral.com/whatsapp-windows-phone-gets-another-minor-update-today\n. This update popped up on my phone this morning. WhatsAppNative.dll seems to be the same as in the previous version. \nI'll do a diff when I get home from work. I've already uploaded the new files.\n. Interdesting...\n\n. @Dynogic it's on my server\nSo I only compared WhatsAppCommon.dll which is the functional part rather than WhatsApp.dll, which is the front end part.\nWhat the diffs showed so far:\n- Max broadcast recipients increased from 25 to 50\n- More try/catch and more checks for null values\n- More and more logging. Might want to look into how to get these logs off of my phone.\n- Native methods GUIDs have changed\nComparing WhatsApp.dll right now..\n. Differences in WhatsApp.dll 2.10.501.0:\n- changed emoji picker event bindings from Click to Tap (amazing right?)\n- More try/catch and more checks for null value\n- Skips searching Favourites and Chats if they don't exist (obviously)\n- Looks like some bug fixes in MediaSlideViewControl\nSo overall not that exciting, no wonder they didn't bother producing a changelog. Just cleaning up from the error logs they received. \n@Dynogic http://mywapi.nl/whatsapi/share/2.10.506/Install/WhatsAppCommon.dll\n. @assegaf whatsapp uses rc4 key stream encryption, that's why you can't decode it.\nI've seen this behaviour before, whatsapp can reuse key streams across socket connections. It doesn't need to reauthenticate on each connection like whatsapi does.\n. I'm pretty sure that 8 & 9 are profile picture responses (the contacts didn't have a profile picture set)\n10 could be triggered by sendGetClientConfig\n. g.us is the whatsapp groups server, probably a sendGetGroups response\n. Wait is this traffic from the official client? How did you decrypt this?\n. Hmm not sure, WP7 uses an audio stream hack to push messages in the background, could have something to do with that\n. The node you received on the official client does seem to be a response to sendGetClientConfig according to it's response handler on WP7:\nc#\nthis.AddIqHandler(text, new FunXMPP.IqResultHandler(delegate(FunXMPP.ProtocolTreeNode node, string from)\n    {\n        FunXMPP.ProtocolTreeNode child2 = node.GetChild(0);\n        FunXMPP.ProtocolTreeNode.Require(child2, \"config\");\n        string attributeValue = child2.GetAttributeValue(\"id\");\n        this.EventHandler.OnClientConfigReceived(attributeValue);\n    }, delegate(FunXMPP.ProtocolTreeNode node)\nThe one thing I'm not sure about is the \"to\" attribute in sendGetClientConfig:\nc#\n    FunXMPP.ProtocolTreeNode node2 = new FunXMPP.ProtocolTreeNode(\"iq\", new FunXMPP.KeyValue[]\n    {\n        new FunXMPP.KeyValue(\"id\", text),\n        new FunXMPP.KeyValue(\"type\", \"get\"),\n        new FunXMPP.KeyValue(\"to\", this.Login.Domain)\n    }, child);\nthis could be the reason we're getting 404 error\n. I was able to decrypt both key streams I captured from WhatsApi without any problem, but the official clients seem to cause a lot more trouble than I expected :/ \nMight be a good time to dust off MissVenom's source code and add back its TCP decryptor\n. Yep. Behold: https://github.com/shirioko/MissVenom/commit/55f503427673be5f6541a99a7eeb056a2eda3177\nhttps://github.com/shirioko/MissVenom/commits/master\n1.2.3.1 is the last version which had the TCP sniffer\nThe challenge string is only used for generating key streams, and I think that the official client reuses these streams. My workaround for this was to replace the pass through data with gibberish so the streams would get out of sync and the client would request a new challenge key on next connection.\n. Yep, MissVenom uses proxies for all of its functionality (HTTPS, DNS and TCP) which allows you to modify any data that is passed through.\nAre you resetting the key streams? Key streams change their state after each encrypted character, so you need to save it's state (e.g. serialize) after finishing decrypting the first connection and load it back (e.g. deserialize) when trying to decrypt a second connection.\n. http://xmpp.org/extensions/xep-0034.html\nWhatsApp uses it's own WAUTH-1 security mechanism, maybe it's the previously used challenge key?\n. So now the client sends the challenge node to the server? What has the world come to...\n. getClientConfig I'm not sure\ngetServerProperties returns the server properties:\nArray\n(\n    [timeout] => 300\n    [library] => 0\n    [audio] => 0\n    [checkmarks] => 0\n    [newmedia] => 0\n    [image_max_kbytes] => 10240\n    [image_quality] => 75\n    [image_max_edge] => 800\n    [media] => 16\n    [broadcast] => 50\n    [max_subject] => 25\n    [max_participants] => 51\n    [max_groups] => 50\n)\n. @Dynogic you were right about the ports and the challenge node, just found this in 523:\nc#\nlogin.LoggedIn += delegate(object sender, FunXMPP.Login.LoginEventArgs args)\n            {\n                byte[] nextChallenge = args.NextChallenge;\n                Log.WriteLineDebug(\"Logged in.\");\n                Settings.NextChallenge = nextChallenge;\n                Settings.LastGoodPortIndex = (int)((ulong)FunRunner.CurrentPort % (ulong)((long)FunRunner.Ports.Length));\n. EUREKA\nThe next challenge node is sent to you in the success node:\nxml\nrx  <success t=\"1374568789\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1367522924\" expiration=\"1399058924\">\u02c6\u00b8\u0019\u00e3\u00f3    3\u2022%\u201c\u2019\u00de\u008f\u00e6\u00de,\u00ca\u00b8l\u00b7</success>\nc#\nprivate void ParseSuccessNode(FunXMPP.ProtocolTreeNode node)\n                {\n                    ...\n                    bla bla bla\n                    ...\n                    if (this.LoggedIn != null)\n                    {\n                        this.LoggedIn.Invoke(this, new FunXMPP.Login.LoginEventArgs\n                        {\n                            NextChallenge = node.data\n                        });\n                    }\n                }\nEDIT\n@assegaf don't bother with getClientConfig, I've looked it up and it's never actually called by WhatsApp\nThere's also a SendClientConfig method which sends the platform, mcc and lc to the server, with an overload specifically  for WP7 which sends a crapload of additional lines like notifications push URI, group settings and image previews\n. POOF!\nF()\nbyte[] nonce is nextChallenge you received in \nc#\ninternal byte[] GetAuthBlob(byte[] nonce)\n{\n    byte[] key = FunXMPP.Login.KeyStream.KeyFromPasswordAndNonce(base.Password, nonce);\n    base.TreeNodeReader.SetInputKey(new FunXMPP.Login.KeyStream(key));\n    this.outputKey = new FunXMPP.Login.KeyStream(key);\n    List<byte> list = new List<byte>(1024);\n    for (int i = 0; i < 4; i++)\n    {\n        list.Add(0);\n    }\n    list.AddRange(Encoding.get_UTF8().GetBytes(Settings.ChatID));\n    list.AddRange(nonce);\n    list.AddRange(Encoding.get_UTF8().GetBytes(((long)(DateTime.get_UtcNow() - FunXMPP.UnixEpoch).get_TotalSeconds()).ToString()));\n    list.AddRange(Encoding.get_UTF8().GetBytes(AppState.GetUserAgent()));\n    try\n    {\n        CELL_INFO cellInfo = NativeInterfaces.Misc.GetCellInfo();\n        list.AddRange(Encoding.get_UTF8().GetBytes(string.Format(\" MccMnc/{0}{1}\", cellInfo.Mcc.ToString().PadLeft(3, '0'), cellInfo.Mnc.ToString().PadLeft(3, '0'))));\n    }\n    catch (Exception)\n    {\n    }\n    byte[] array = list.ToArray();\n    this.outputKey.EncodeMessage(array, 0, 4, array.Length - 4);\n    return array;\n}\nI'll see what I get from GetCellInfo() when I get home from work, I only have my HTC Titan on me which isn't developer unlocked :/\nEDIT\nCELL_INFO doesn't seem too exciting:\nc#\n    public struct CELL_INFO\n    {\n        public uint Mcc;\n        public uint Mnc;\n        public bool Is2G;\n        public bool Is3GPlus;\n        public bool Roaming;\n    }\nAdding this stuff to WhatsAPI right now...\n. No we didn't\n``` xml\ntx  \ntx    \ntx    \ntx  \ntx  \u2013\u00ba\u00b7\u00bd\u00db\u00c6\u007f\u0004\u201cB\u00f9?x\u000b\u00f1U#  C\u00d0e\u2026\u0161\u00ee\f\u00f0M\u00ac_\u017d\u00cb7~\u00a5\u0019\u00f2y\u0160\u00b6yb\u2013\u0011\u00c4\u0015\u00c5/\u00dc\u00e7G\u00a3\u00bb\u2019\u001fv\u008d~\u001e\u00adC@\u00b80\u0007a\u0019Vh\u00d5\u00d0\u000e\u00cb\u001a\u0019o^9\u001c\u00a9\u2020\u00ee\u00ac\u00e5I\u00cb~5\u0081\u0178-~\u00c2ea\u00ea\u00dfg\u00e1\u00fd\u201e\u000e3\u00b5\u0018\u00f4W\u0090O\nrx  \nrx  \nrx    \nrx  \nrx  \u00ce\u00a2\u00bc\u0160^\u00b9P\u00c7\u0018\u00dc\u00aajd\u00a4\u00d7\u00e0#b}\nrx  \n```\nI'll check it in when I've integrated it properly into WhatsProt class\n. https://github.com/shirioko/WhatsAPI/commit/cefc05ceda6c85fbf99dae867328ddf83d32a743\nI'll push it upstream when you guys confirm it's working\n. Surely it can be decoded into a byte. It's a URL encoded binary string which includes non readable characters\n. It's just a URL encoded SHA raw hash string of some device specific parameters and phone number. Sniffing it out on MissVenom is a lot easier than trying to reconstruct it by piecing all required device parameters together.\nYou can use any SHA hash for registration regardless of the input, there's no way for WhatsApp to validate it as you cannot decode a hash. Only thing they can do is check if it's 20 byte long.\n@Dynogic I was actually going to bed, it's past midnight here already..\n. No, it's because PHP doesn't use multithreading and your script would lock up for 5 minutes when calling socket_read\n. Sorry, I don't do python\nBut it's not rocket science. First:\n- do a normal challenge based login and wait for  node\n- extract nextChallenge from  node and save it for next use\nOn next connection:\n- generate auth blob (basically just build a string)\n- load nextChallenge, generate RC4 key\n- encrypt the auth blob with the RC4 key\n- assign RC4 key to reader\n- add auth blob to  node and send it\n- wait for  node\n- extract nextChallenge from  node and save it\n- assign RC4 key to writer\n- done! Connection is now set up.\nDid I miss anything? :)\n. No it's not?\nThe code you linked only contains standard handshake login.\n. 31650568134\u0014S\u0161fq\u00ad\u00aa#\u02dcZ:\u00ed\u00afv\u00cc<\u2122o2&1375966295WhatsApp/2.10.222 Android/4.2.2 Device/LGE-Nexus_4 MccMnc/204001\n. https://github.com/venomous0x/WhatsAPI/commit/cefc05ceda6c85fbf99dae867328ddf83d32a743\n. AFAIK @JayFoxRox is the only one around here with the skills to do this.\nHE IS THE CHOSEN ONE!\n. That's correct.\n. @JayFoxRox didn't have the time yet to patch the native dll, so in the meantime I've added a small service to my upcoming website  (http://mywapi.nl) to generate code request tokens for WP7 2.10.506.0\nhttps://mywapi.nl/?in={number without cc}\ne.g.\nhttps://mywapi.nl/?in=650568134\nI won't promise that it will stay up, it's not quite \"stable\" at the moment :')\nThe website is basically an online version of MissVenom (running MightyVenom, an extended version) which allows you to capture registration details. I still need to add a user backend to login and retrieve their password, as well as a number verification mechanism to verify the ownership of a number before getting the captured password.\n. What if I told you that I can generate tokens in airplane mode?\n\n. Yep\n. WhatsAppNative.dll appears to be using a new (proprietary?) hashing algorithm according to Jannik. So in the meantime you can either place your bets on Android credentials or use WP7 credentials and generate the WP7 code request token using my web service.\nI mean how often are you really going to need to request an SMS code?? :')\nThe service crashes quite a lot though so I need to keep a close eye on it. Hopefully I'll be able to fix this soon.\nPS I've encrypted the WP7 archives on my server, don't want any nosy people looking at the files I obtained by breaking WhatsApp's EULA haha\n. @Dynogic email sent, and https://github.com/JayFoxRox\n. Oh look another update for WhatsApp this morning.\n2.10.523.0\nLet's see what they changed this time.\n. It's funny how extremely capable people like Jake and Jannik just pop up out of nowhere without any back story :')\n. Isn't the build hash just the MD5 of classes.dex?\n. Meh.\n523 only addled datatype double to BinarySettings and some code cleanups.\nAnother update without a noteworthy changelog.\nOh and a new WhatsAppNative.dll\n. The unique identifier is a SHA hash string generated from device identifiers (e.g. IMEI code) and the phone number. So using the same phone number on the same device will generate the same identifier and you won't get an SMS code.\n. That's how it was back in the day, grab a friend's phone, make a quick pic of his IMEI (remove the battery or dial *# 06#) and poof! You've hacked his account\n:')\n@Dynogic I would be rather interested in knowing the new identity generation method on Android ;)\n. https://github.com/venomous0x/WhatsAPI/commit/1995a68f0e5adad5624a720f2e5a0cd31014fcd3\n. Did you run the script from your PC or from some hosting service?  Google raises the red flag when you try to login from a foreign IP address.\n. Try registering a number using the official client and use its password for logging in. Make sure WHATSAPP_DEVICE and WHATSAPP_VER match the one you used to register.\nJust installed and activated the latest WhatsApp 2.10.506 for Windows Phone 7 and used it's password to log in using \nWHATSAPP_DEVICE=\"WP7\",\nWHATSAPP_VER=\"2.10.506\" \nand WHATSAPP_USER_AGENT='WhatsApp/2.10.506 WP7/7.10.8858 Device/HTC-HTC-H0002'\nI can log in using the existing password and request a new one using checkCredentials without problems.\n. @atans I can generate the right token and client information but I don't have spare numbers to use it on\n. HA! You are now at the mercy of my WP7 token generator!\n. https://mywapi.nl/?in=650568158\nIt's still on 506, I will be updating it to 523 today so there will be some downtime.\nAnd the fckng app keeps crashing so I have to restart it every few hours. \nBut it works.\n. https://github.com/venomous0x/WhatsAPI/commit/1995a68f0e5adad5624a720f2e5a0cd31014fcd3\n. When you want to use WhatsAPI, please be aware that is is highly possible that your account will be blocked  if you don't sync contacts or abuse the service by spamming\n. Just sync your contacts, don't spam and you'll be fine\n. I use my number every day for testing for almost a year now and it's not blocked. I guess that means that I found an actual solution?\nThough I'm afraid that the \"solution\" you try to find is for a non-existing problem...\n. Email is far more cost effective and works right out of the box. That's why 99.9% of companies use it.\n. It's not a matter of existing numbers. My dev number was registered a year ago and was randomly blocked last week. My second number however was registered a few weeks ago and is still functioning.\nAlso there's no need to reverse engineer anything, the whole WhatsApp protocol is contained in a single managed DLL file which you can reference and call in .NET\nAnd try to act like fucking grown ups\nEDIT\n@FAlbanni reverse engineering the app and protocol is also against their EULA, never heard anyone mention it so far though.\n. I'll add sendClientConfig to WhatsAPI, see if that helps\n. Isn't this PHP?\n. No. That's spamming.\n. And I'm pretty sure there's a confirmation box for sharing content with a WhatsApp contact (assuming you're using their URI schema), so you can't do it programatically\n. Sure let me just rename the repository to WhatsAppHackerBot since you all forgot that this is the issue tracker for a PHP WhatsApp API project\n. Updated readme.md\n. You get blocked by sending large quantities of messages in a short period of time.\nYou will receive a \nxml\n<failure>\n    <blocked></blocked>\n</failure>\nnode when your channel has been blocked by WhatsApp.\nHaving you post the same message in two different threads sounds like your channels won't last very long\n. php\ndie(__LINE__);\n. This isn't w3schools\n. That's just the difference between the iPhone and Android client. WP7 shows the nickname in the toast notification but not in the chat list.\n. Weird, mine prints tx rx tx tx tx tx rx rx rx rx tx tx rx tx rx tx tx tx rx rx rx tx rx tx rx\nPost the actual XML output\n. The current one works\n. That is caused by user behavior and not by the registration token, otherwise it would be consistent across all users\n. Just tested and received mine within seconds. Maybe wait a bit longer?\nArray\n(\n    [cc] => 31\n    [in] => 6********\n    [to] => 316********\n    [lg] => nl\n    [lc] => NL\n    [method] => sms\n    [mcc] => 204\n    [mnc] => 001\n    [token] => f82e3019d214e42f698a8b0c5753b4e6\n    [id] => %3c%7c%05%90%a8%d2%b7%c5%25%95%0b%05y%bd%a8%19%89%99%02%7b\n)\nstdClass Object\n(\n    [status] => sent\n    [length] => 6\n    [method] => sms\n    [retry_after] => 172805\n)\n. mcc and mnc are the international cell network code and cell provider ID, I would get the correct ones just to be sure. That's probably how WhatsApp detects which number to use for sending SMS code. Google yours, it's on wikipedia.\nIs the script detecting the correct language code and country code for your number or did I mess up my latest commits in countries.csv?\n. Identity is just any SHA hash\nI always use\nphp\nstrtolower(urlencode(sha1($username, true)));\n. Download the new class whatsprot.class.php, you are missing some parameters in your query string\n. Ask @Dynogic, he reverse engineered it from the Android APK\n. Status is downloaded using contact sync, but I saw some status subscription argument in the features node if I recall correctly, much like the picture subscription argument which is already implemented. But I'm pretty sure the status only gets updated after contact sync :/\nPing handler is still in the node processor code, but I wasn't able to receive a ping node it for quite a while now. I'll look into the C# code again to see if something comes up.\n. Maybe some firewall you're using?\n. Fixed in https://github.com/venomous0x/WhatsAPI/commit/8b0a771cbc2065a0599f50163dc72eccb35a6e1a\n. Use testprotocol.php\n. You can try actually downloading the latest code before posting about old issues. Requesting verification code works fine.\n. I did check it out and it works fine.\nIf you can't use WhatsApi for registration try this instead:\nhttps://github.com/shirioko/WART\n. Use\nphp\n$res = $w->codeRegister(\"######\");\nvar_dump($res);\nif you succeed your password will be $res[\"pw\"]\n. https://github.com/shirioko/MissVenom/issues?state=open\n. Yep, nice work,\nI came across this a while ago, but never got around to implement it :)\n. Should have been fixed according to https://github.com/venomous0x/WhatsAPI/issues/321\nCan you post the XML output you get after reconnect?\nphp\necho \"<textarea>\";\n$w = new WhatsProt($username, $identity, $nickname, true);\n$w->connect();\n$w->loginWithPassword($password);\n$w->pollMessages();\n$w->disconnect();\n$w->connect();\n$w->loginWithPassword($password);\n$w->pollMessages();\n. Is there a particular reason why you would reconnect every time rather than keeping the same connection open and using a loop which calls pollMessages()?\nphp\nwhile(true)\n{\n    $w->pollMessages();\n    sleep(1);\n}\nEDIT\nJust tested it on my end, getting the proper response after reconnect:\nphp\n$w->connect();\n$w->loginWithPassword($password);\n$w->pollMessages();\n$w->disconnect();\n$w->connect();\n$w->loginWithPassword($password);\n$w->pollMessages();\n. Duplicate https://github.com/perezdidac/WhatsAPINet/issues/48\n. Well which version do you have installed?\nWhatsAPI has been optimized for PHP 5.3\n. And can you post the code around line 1694 in your whatsprot.class.php? I've tried using the current code and it's working fine.\nYou can also download and extract the code as a ZIP archive if git clone gives you trouble.\n. Right, turns out I wasn't using the latest code, I forgot to pull the latest code from upstream\nI've made some major changes in the code, let me know if the current version works for you :)\nhttps://github.com/venomous0x/WhatsAPI/compare/4dc5446cbe...24f3dbf79c\n. F*CK\nhttps://github.com/venomous0x/WhatsAPI/commit/4a984440e92dbc7d7b00a423f42608a20562779e\nOk try now :\")\nEDIT:\nFACEDESK\nLast attempt for today' let me know if this is it:\nhttps://github.com/venomous0x/WhatsAPI/commit/a31e9e4636f9664fd0df32dda7645554b33d4078\nI'm off to bed o_O\n. How much longer can I keep this fail streak up???\nhttps://github.com/venomous0x/WhatsAPI/commit/9a6f0882b91acbdf4251c53638c9a86bc2830133\nThis should fix it\nEDIT\n$^%$^#$26$^@\nOK this time for real, https://github.com/venomous0x/WhatsAPI/commit/0ce1087406203205013cfcadc848cf5268fa01c5\ntested it myself\n. WhatsApp.php is outdated and has old method names.\nUpdate method names (e.g. sendRequestLastSeen) or use testprotocol.php\ninstead\nOp 27 aug. 2013 01:57 schreef \"paketecuento\" notifications@github.com het\nvolgende:\n\ntested again... and fail :(\nrunning from linux console (/Whatsapi/tests):\n./whatsapp.php -s 34XXXXXXXXX adios\nusing proper $sender, $id and $password (previously checked with\nyowsup-cli)\ndebian:~/whatsapi/WhatsAPI/tests# ./whatsapp.php  -s 34XXXXXXXXX adios\n[] Logging in as 'test' (34XXXXXXXXX)\nPHP Warning:  fopen(countries.csv): failed to open stream: No such file or directory in /root/whatsapi/WhatsAPI/src/php/whatsprot.class.php on line 1422\ntx  stream:features\ntx    \ntx    \ntx  /stream:features\ntx  \ufffd\ufffdZ\ufffd\ufffd\ufffd#H\ufffd\ufffd\u9ea6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdl\ufffd,\ufffd\ufffd\ufffd-6\\\ufffd\ufffd-0\ufffd}\ufffd\"(C\ufffd\ufffd\ufffdq\ufffdQ\ufffd\ufffd\ufffd(\ufffd\ufffd/\ufffd\ufffdd,\ufffd\u0426\\\ufffdS\ufffd/m\ufffd\n                                                                                                                                                         \ufffd^L\ufffd\ufffdk\ufffdUxcN\ufffdG\ufffd\ufffd\ufffd}\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd;\ufffd4\ufffd\ufffd\ufffdR\nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \ufffd  x\ufffd\ufffd\ufffdH\ufffdH\ufffd[\ufffd@w\ufffd(\ufffd\nrx  \ntx  \ntx    \ntx  \nrx  \nrx    \nrx  \ntx  \n[] Request last seen 34XXXXXXXXX: PHP Fatal error:  Call to undefined method WhatsProt::RequestLastSeen() in /root/whatsapi/WhatsAPI/tests/whatsapp.php on line 99\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/448#issuecomment-23304313\n.\n. Now I only need @slobo42 to confirm that it's working again :)\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleRegister.php#L48\n. php\n$res = $w->codeRegister(\"123456\");\n$password = $res[\"pw\"];\n. Probably because you're not using PHP 5.3\n. Late static bindings were introduced in PHP 5.3, so either upgrade to 5.3 or replace all \"static::\" keywords with \"self::\"\n. do a var_dump of $res and see what's in there\n. FFS\n\nphp\n$w = new WhatsProt($phoneNumber, $identity, $nickName, true);\n$res = $w->codeRegister($code);\nvar_dump($res);\nYou can use a code only once, so you'll probably need to request a new one:\nphp\n$w = new WhatsProt($phoneNumber, $identity, $nickName, true);\n$res = $w->codeRequest();\nvar_dump($res);\nchances are that if you use the same identity as before you will receive your password upon using codeRequest\n. WHATSAPP_TOKEN constant is outdated, so code request is broken ATM\n. I'm working on it, but for now use this instead:\nhttps://github.com/shirioko/WART\n. You can just download the precompiled exe and run it\nmono WART-1.3.1.0.exe\n. Who is \"they\"?\n. It won't be fixed by updating the hashes if that's what you mean. As explained by Jake here:\nhttps://github.com/tgalal/yowsup/issues/158#issuecomment-23554926\nI'm working on a practical solution to get registration working again on WhatsApi, but for now I've only added this (experimental) method in WhatsApiNet. I will push my changes to WhatsApiNet as soon as I have a working solution.\n. Fixed in https://github.com/venomous0x/WhatsAPI/commit/1995a68f0e5adad5624a720f2e5a0cd31014fcd3\n@ulihecht did you get your Miranda plugin working again? :)\n. The current code is working perfectly fine.\nAlso, a token is version specific. So we can't give you the \"correct\" token if you don't specify a version number.\nEDIT:\nDerp. Didn't read back to see you meant working on the Miranda plugin. What language is it in? You can use the token generator from either WhatsAPI (PHP) or WhatsApiNet (C#) and port it to your own language\n:)\n. As said above, which user agent version are you using? Each version generates a different token. Use the one from WhatsApiNet:\nhttps://github.com/perezdidac/WhatsAPINet/blob/master/WhatsAppApi/Settings/WhatsConstants.cs#L60\nToken generator:\nhttps://github.com/perezdidac/WhatsAPINet/blob/master/WhatsAppApi/Register/WaToken.cs\nThe generated token for 712345678 using the above code is \nL7p6FgM904qeIYe6Sl+rlkVj23I=\nc#\nstring token = WhatsAppApi.Register.WhatsRegisterV2.GetToken(\"712345678\");\nEDIT\nI can give you Base64 encoded strings of the different variables throughout the token generation process so you can compare them with your own generator, if that's any help :)\n. Yes and no. The algorithm does not use the user agent, but each new whatsapp version has a new WaClassesMd5 string in WaToken.cs (which is the MD5 hash of classes.dex in the APK)\nSo each new version will generate a different token. \nIf your user agent does not match the strings used in the token generator the server won't be able to validate your token and give you a bad_token error.\n. Make sure your request string has all the parameters:\nhttps://github.com/perezdidac/WhatsAPINet/blob/master/WhatsAppApi/Register/WhatsRegisterV2.cs#L49\n. Oh god, hurry up and hex encode that ID!\n. My bad, I meant URL encode :)\nCan you download and try my tool WART 1.6.1.0 (on my GitHub) to see if you receive an SMS with established tools? \nIf you receive an SMS after using WART the problem is in your code. If not, the problem lies elsewhere.\n. \"Retry after\" is in seconds\nYou can always switch method to voice to check your request, as sms and voice use separate timeouts ;)\nI'll cook up a debug version of WART when I get home.\nYou could use Fiddler to sniff https traffic, though I've implemented the certificate signature check used by WhatsApp  (the dick-move-check\u2122 as I like to call it) which means that the certificate signature is checked using a hard-coded hash, so the certificate cannot be spoofed by Fiddler. Bleh.\nFor now you can try requesting an SMS code for my dev number 316 474 85 673\nI'll let you know if I get anything ;)\n. I've uploaded WART 1.6.2.0 which uses the latest User Agent and has debug output option for code request. Can you give it a try to see if that helps?\n. You're supposed to either run it from command line or remove $argc and $argv from the code\n. Synced 150 contacts without a problem:\nphp\n$contacts = range(31650568151, 31650568300);\n$wacs = new WhatsAppContactSync($username, $password, $contacts, true);\n$res = $wacs->executeSync();\ndie(var_dump($res));\n. Oh and inb4 people being blocked for data mining phone number ranges :')\n. It says so in the official client!!1! :O\nWhatsApp.ContactStore.ToPostData:\nc#\nKeyValuePair<string, string>[] array = new KeyValuePair<string, string>[]\n{\n    ContactStore.KeyValuePair(\"t\", \"c\"),\n    ContactStore.KeyValuePair(\"ut\", \"wa\")\n};\n. This one is from 2.10.523 files\nEDIT\nut=\"all\" was posted by @tgalal a while ago and I have no clue where he found it\n. Duplicate #450 \n. Duplicate #450 \n. Try to log in with your password using exampleFunctional.php\n. Sounds like you're behind a firewall\n. I think you are confused. This is an API and not an application. WhatsAPI does not handle user interaction and data storage.\nThis has already been answered:\nhttps://github.com/venomous0x/WhatsAPI/issues/459\nhttps://github.com/venomous0x/WhatsAPI/issues/389\n. Also, duplicate #459 \n. \nCan you format your code so we can actually see what it says :)\n. 404 not found means that the person doesn't have a profile picture\nTry another one :)\n. Sure, go ahead :)\nYou can check for a 404 response in processInboundData and fire another event like \"onProfilePictureError\"\n. D'oh!\nHow did I miss that? :/\nThanks! :)\n. @atans I'm afraid I don't have the time to add it right now as I have my hands full with this exploding monstrosity:\nhttps://plus.google.com/communities/114009566886187417546\nBut you can add it yourself. The only thing broken at the moment is token generation. You can translate this one to PHP:\nhttps://github.com/shirioko/WhatsAPINet/commit/588385d4871b6b3a3d3f465a7cfacd04d038708e\nJust a simple POST request :)\n. Received messages are automatically answered by processInboundData before firing the onMessage event\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1684\n. You're over-thinking it too much :)\nThe 5 just seems like a reasonable number. The socket timeout is set to 2 seconds so calling pollMessages 5 times will take no more than 10 seconds\n. @pastoso congratulations from Jake and me! :)\n. Are you sure about that? Can you run phpinfo() to check it? :)\n\"Fatal error: Cannot access private property ProtocolNode::$data in /.../src/php/exampleFunctional.php on line 103\"\nI recently made all ProtocolNode properties private and added getter methods  :)\nSee the commit I pushed\n. php\nurlencode(sha1(strrev($number . $salt), true));\n:)\n. The problem is that no one around here appears to know how to properly format code.\nffs\n. Sending to \"@g.us\" is group related.\ns.us is status server\n. Looks like the method is deprecated. You'll need to use contact sync to get user status.\n. Or just update to 5.3 like you're supposed to.\n. Oh jeez I totally forgot about this junk\n. @xX7 I just love to prove you wrong. RequestLastSeen returns the amount of seconds since the person went offline. So the last seen time is:\nphp\n$lastSeen = time() - $seconds;\nDate can be formatted using\nphp\ndate(\"Y-m-d\", $lastSeen);\n@mgp25 you're using the wrong event handler:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1938\nit has 3 arguments, so your code should be:\n``` php\nfunction onGetRequestLastSeen($mynumber, $msgid, $seconds)\n{\n}\n```\n. Can you run a couple of numbers using this event handler?\nphp\nfunction onGetRequestLastSeen($username, $msgid, $seconds)\n{\n    echo \"Received last seen seconds: '$seconds'\");\n    $now = time();\n    $lastSeen = $now - $seconds;\n    echo (date(\"h\", $lastSeen)) . \" hours \" . (date(\"i\", $lastSeen))  . \" minutes ago\"; \n}\n. You seem to confuse timespans and timestamps\nThe variable $seconds you receive is a timespan, which is relative, so it means \"last seen x seconds ago\".\nUsing\nphp\n$lastSeen = $now - $seconds;\ngives you a timestamp, which is absolute, so it means \"last seen on x:xx\"\n. Mistakes. Mistakes were made. And lots of them.\nWhere did you get the idea to use your IMEI to log in? That is a very very outdated mechanism which haunts us to this day. We must cleanse it with fire immediately!\nYour password is not the 6-digit sms code you received. You need a base64 encoded password which you get after registering that 6-digit number:\nphp\n$w = new WhatsProt($username, $identity, $nickname, true);\n$res = $w->codeRegister(\"123-456\");\nvar_dump($res);\nyour password should be in $res->pw. If not, you need to request a new SMS code. Or don't go through all this trouble and use my program WART instead. :)\nPS\nNice TZR :)\n. No.\nThe only time you receive someone's nickname is when they send you a message.\n. I'm a bit confused as to what\nphp\n$a = 0;\nwhile($a == 0)\nis supposed to do (rather than using while(true))\n. You can't get last seen time using contact sync\n. Status update\n. 'status' is the status that you posted, 'lastupdate' is the timestamp when you posted it\n. Download latest version and try again\n. ffs if I see one more  \"halp I get response tx tx tx rx rx tx rx\" post....\nJust use exampleFunctional.php:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php\n``` php\necho \"\";\nfunction onGetProfilePicture($from, $target, $type, $data)\n{\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n$username = \"your phone number\";\n$identity = \"unique ID generated by WhatsApp client\";\n$password = \"server generated whatsapp password\";\n$nickname = \"your nickname\";\n$target = \"contact's phone number\"; \n$w = new WhatsProt($username, $identity, $nickname, true);\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendGetProfilePicture($target, true);\nfor($i = 0; $i < 10; $i++)\n{\n    $w->pollMessages();\n}\n```\n. onSendMessageReceived is fired when you send a message receipt, so it has no use in this case.\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L2417\nYou can use either both onMessageReceivedServer and onMessageReceivedClient or just onMessageReceivedClient\nonMessageReceivedServer is fired after the message was sent to the server i.e. the first check mark in WhatsApp\nonMessageReceivedClient is fired after the message was received and read by the client i.e. the second check mark in WhatsApp\n. Also, your code implementation is wrong. Here's an example on how to do it:\n``` php\nfunction onServerReceived($mynumber, $from, $id, $type, $t)\n{\n    echo \"Message $id for $from delivered to server on $t\\n\";\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $t)\n{\n    echo \"Message $id read by $from on $t\\n\";\n}\n$w = new WhatsProt($username, $identity, $nickname, true);\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\n$w->connect();\n$w->loginWithPassword($password);\nwhile(true)\n{\n    $w->pollMessages();\n}\n```\n. Which ID are you talking about?\nThe ID in protocol nodes is just an attribute, so you can use $node->getAttribute(\"id\") to get it.\n. $node is not passed as an argument when the event is fired. \nYou can either add $node to the event fired in processInboundData or just use the provided argument $id.\n. Ah! Here's Johnny!! :D\n\nHurry up and do an upstream pull!\nThe problem with sending messages was that people would call sendMessage() and then end the script. The message would be pushed into the socket buffer but never flushed. That's why I added pollMEssages() at the end of sendMessage(), so that the buffer would be flushed before continuing the script.\n@Bashin @slobo42 so if I understand correctly, you'd like to have the ID of the message you've sent.\nI can do this by either:\n- making the sendMessage() function return the ID\n- adding a onSendMessage event which provides the message node and message ID when sending a message\nVoting starts now!\n. Make sure to check in your event handler if $to is an array if you plan on using broadcasts.\n. You can't do that. The message ID is set when the message is sent and cannot be changed, so the notifications for it also contain ID \"message-xxxxxxxxx-x\".\nTrimming the ID will break your system.\nIf you want to get rid of the prefixes you can change line 1389 in whatsprot.class.php from\n``` php\nprotected function createMsgId($prefix)\n    {\n        $msgid = \"$prefix-\" . time() . '-' . $this->messageCounter;\n        $this->messageCounter++;\n    return $msgid;\n}\n\n```\nto\n``` php\nprotected function createMsgId()\n    {\n        $msgid = time() . '-' . $this->messageCounter;\n        $this->messageCounter++;\n    return $msgid;\n}\n\n```\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1389\n. PS\njust using $node->getData() is a bad idea as it does not always contain a text message. This node may as well be a media node (e.g. when you send a picture or a sound clip)\nMake sure to check the node tag first:\nphp\nif($node->getTag() == \"body\")\n{\n    $text = $node->getData();\n    ...\n}\n. Are you using the onGetMessage event to send a new message?\n. ^ what he said\nYou can't use WhatsAPI and WhatsApp simultaneously.\n. @cnel y u no read comments???\nhttps://github.com/venomous0x/WhatsAPI/issues/486#issuecomment-25960740\n```\n^ what he said\nYou can't use WhatsAPI and WhatsApp simultaneously.\n```\n. Download latest version and try again. I pushed a bunch of commits this morning. This one should fix it:\nhttps://github.com/venomous0x/WhatsAPI/commit/8b0a771cbc2065a0599f50163dc72eccb35a6e1a\nProblem is probably caused by your IIS host's firewall\n. Wiki updated\n. Damn it John why didn't  I know of the EVENTS.md file?\nNow I have to update that one as well >:c\n. Decisions, decisions...\n. But.. but... I already updated this wiki with links to my pages today!\nhttps://github.com/venomous0x/WhatsAPI/wiki\n. No, the second login will deauthenticate the first one, so only one of them will be able to run\n. sendBroadcastImage\n. Uncomment line 38 to 42 in index.php and check the output you get after a while\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/ajaxDemo/index.php#L38\n. Add\nphp\nob_start();\nat the beginning and \nphp\nob_flush();\nat the end of socket.php\nHmm, just realized that socket.php has no PHP closing tag... late night coding struggles :/\n. Something messed up your PHP sessions. Do you have cookies enabled?\nWhat is your server setup?\n. oh ffs\nI see the problem\nLet me push a fix\n. @mgp25 can you confirm this fix? :)\n. Fixed profile picture as well.\n. Do you have the ../pictures folder and write permissions for it?\n. Profile picture works for me though. What's the debug output you get in your script?\nChange lines 38-42 to \nphp\nif(data)\n            {\n                var foo = $(\"#debug\").html();\n                $(\"#debug\").html(foo + data);\n            }\nto fix formatting\n. Works fine for me still\nphp\n$wcs = new WhatsAppContactSync($username, $password, \"3162944****\", true);\n$res = $wcs->executeSync();\ndie(var_dump($res));\narray (size=1)\n  0 => \n    array (size=3)\n      'phonenumber' => string '3162944****' (length=11)\n      'status' => string 'All work and no sleep\u00ee\u20ac\u0152' (length=24)\n      'lastupdate' => int 1379286049\n. No.\n. They use their own protocol FunXMPP which is in no way compatible with XMPP\n. Can you rephrase your first question?\nHow are you listening? Easiest way to do this is just run \nphp\nwhile(true)\n{\n    $w->pollMessages();\n}\n. increase timeout in index.php and set_time_limit in socket.php to 5 minutes\nEnable debug output in index.php by uncommeting lines 38-42 and check if the messages are received by socket.php\n. Yes those were meant to be used for contact nickname and presence, but I never got around to adding it to the demo.\nYou can use the event handler in socket.php to listen for presence updates just like it already does for profile pictures. Just make sure to unlock the session after writing e.g.\nphp\n    session_start();\n    $_SESSION[\"presence\"] = $presence;\n    session_write_close();\nor you'll break the website. You have two files (index.php and socket.php) accessing the session simultaneously. Locking the session in one of the scripts will make the other script wait for it to be unlocked, and since socket.php has a timeout of 5 minutes, it will break index.php\n. I don't know? Why haven't you turned on debug mode?\n. Update the whatsprot.class.php on your server to the latest version and try again\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L2316\nyes this in normal behaviour, at least as far as the current implementation is written\nwaitForServer is called first, which will return the server received node and fire the event\n. I think you might consider using the current implementation instead. If the message isn't received by the server then there's no reason to save it to database, unless you want to try sending it again later. :)\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L862\n. ``` php\nfunction onParticipants($mynumber, $groupId, $participants)\n{\n    echo \"Group $groupId has the following members:\\r\\n\";\n    var_dump($participants);\n}\n$w->eventManager()->bind(\"onGetGroupParticipants\", \"onParticipants\");\n$w->sendGetGroupsParticipants($gjid);\n$w->pollMessages();\n```\n$participants is a multidimensional array copied from node attributes, you'll need to figure out which attributes you want to use\n. Which code are you using?\nTry calling pollMessages a few times first:\nphp\nfor($i = 0; $i < 5; $i++)\n{\n    $w->pollMessages();\n}\nIf that doesn't help enable debug in the constructor and check the nodes you receive, they may contain an error message\n. I'm a little confused as to why your response message has the id \"message-xxxxxxxxx\". It should be \"getgroupparticipants-xxxxxxxxxx\". See here:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L645\nAre you using the latest version on WhatsApi?\n. My Windows 8.1 got screwed over so I had to do a clean install last weekend. I'll set up WAMP and WhatsApi when I get home later today and check if I have the same problem.\n. the following code works fine for me. The event is fired.\n``` php\n<?php\nset_time_limit(10);\nrequire_once 'whatsprot.class.php';\nrequire_once \"events/WhatsAppEventListenerBase.php\";\n// phone number, deviceIdentity, and name.\n$debug = true;\n$username = \"316**\";\n$identity = \"\";\n$password = \"K/1seuo+dhgdgdfgfdgdf87Q=\";\n$nickname = \"maks\";\nclass EventListener extends WhatsAppEventListenerBase\n{\n    public function onGetGroupParticipants($phone, $groupId, $groupList)\n    {\n        die(var_dump($phone, $groupId, $groupList));\n    }\n}\n$w = new WhatsProt($username, $identity, $nickname, true);\n$w->connect();\n$w->loginWithPassword($password);\n$gjid = \"316**-1371769367\";\n$w->eventManager()->addEventListener(new EventListener());\n$w->sendGetGroupsParticipants($gjid);\nwhile (true) {\n    $w->pollMessages();\n}\n```\n. PHP doesn't support async callbacks, so instead we read the socket with a short 2 seconds timeout. So it may take up to 2 seconds for you to receive a message in WhatsApi\n. Gee, what could that possibly mean?? I wonder..\n:')\n. You don't need your MAC address, you need a password which can only be obtained by registering your number using WhatsApi or WART.\n. inbox me the phone number which gives you problems.\n. Remove the dash in your code\nuse 123123\n. Removed some obnoxious question marks in the first post ^\nAlso, duplicate of #476 \nThe answer is out there ;)\n. 443 outbound\nUnknown Host sounds more like a DNS problem though\n. Have a look here #492 \n. >.<\n. No, messages are automatically acked.\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1697\n. Because that's how the script works when you send anything other than 5\n. Get used to it :')\n. ...what?\n. Did you sync your contacts and made sure that they have you in their contact list?\n. AFAIK the contact list is synced when your contact list is updated (i.e. new contact in phone book). The official client also has a button to sync the list manually, so there shouldn't be a tight limit on how often you can run it.\n. The connection has a 5 minute timeout, so the server closes the connection if nothing is sent or received for 5 minutes.\nYou can keep the connection alive by calling sendPresence after 4 minutes of inactivity.\nYou used to receive a ping node to keep the connection alive. This has been replaced on Android though, and the Android client will go into \"sleep mode\" and switch to GCM after closing the conection. :)\n. Wrong password.\n. sigh\nLet me guess, you got your password and then you activated the number again on your smartphone..?\n. @jesussales \n- connect\n- login\n- poll messages\n- send presence subscription\n- send typing\n- send message\n- poll messages\n  etc.\n@KSas use disconnect()\n. Which image are you trying to upload? And what's the file size?\n. Sounds like they've got a new spam filter. Great! :)\n. You forgot to mention that this only works if you have the attacker's number already added to your contact list, other wise the hyperlink will show up as plain text and nothing will happen.\nSo this is not some mass destruction exploit :)\n. not authorized still means you have the wrong password. No sense in blaming WhatsApp for mistakes you've made yourself.\n. MissVenom is just broken on Android, it still works on other platforms.\n@mgp25 update whatsprot.class.php, code request works fine.\n. yes\n. What does that even mean\n. Make sure you use international number format for sync\n. Can you try using WART 1.5.4.0 with your number so I can eliminate the possibility that I messed up the source code?\n. What the hell did you do to your computer?? :o\nCan you visit https://v.whatsapp.net/v2/code ?\n. Then it makes no sense that you get a 404 error\n. Which version of WART are you using? Download the latest one and  try again.\nI suspect you're using an old version of WART which uses a server-side generated registration token. I took that token page down a while ago, hence the 404 error.\n. Of course the debug doesn't show anything immediately. Your background listener runs for 60 seconds so you'll have to wait a minute before the page returns output.\n. Try running socket.php in your browser to see if you get any errors e.g. not-authorized\n. Enable error output in apache or run socket.php from command line to see the actual error.\n. ^ that's not a reply, that's the request. Post the response data.\n. Don't post the same thing in multiple issues.\nThis is WhatsAPI in PHP, questions about WhatsApiNet in C# should be asked in the proper project.\nAnd this question has already been answered in #418 \n. First off:\njust no.\nhttps://github.com/venomous0x/WhatsAPI#note-july-30th-2013\nSecond:\nThis is the C# project\nhttps://github.com/perezdidac/WhatsAPINet\nWhatsApp is one of the few platforms which are not infested with ads and spam. And I'd like to keep it that way.\nPS:\nLatest compiled WhatsApiNet DLL can be found in my project WART:\nhttps://github.com/shirioko/WART/blob/master/WART/Resources/WhatsAppApi.dll\nHave fun\n. No. You can request that feature in the WhatsApiNet project and I'll add it when I have some time to spare.\n. Wrong username. Remove the leading zeros\n. https://github.com/shirioko/WART\n. http://blog.whatsapp.com/index.php/2012/06/ pretty much explains why they don't allow companies and businesses to use their services for anything other than personal use.\nWhatsApp is intended to interact with your friends and family, end of story. It is NOT a platform for companies to circumvent email spam filters and avoid paying for SMS messages.\n. I love how every other comment mentions my name trying to justify their behavior :')\nWe have to think more open mindedly, SMS has been around for 25 years, it cannot be the best way to interact with people on a personal level with legitimate messages, its simply cannot.\nI disagree. Telephony has been around for 100+ years and speech for 4000+ years, so why would some new hype be \"the best way\" to do anything? \nThe best part about WhatsApp is that it is personal. There is always someone on the other side of the chat. You can see when they're online, you can see when they're typing, you can see when they've read your messages.\nHaving an automated script sending \"personalized messages\" (i.e. as personal as any random email message) defeats the whole purpose.\nIf you want to reach a customer just use email, and if you want to reach them immediately use SMS or call them. These are solid and proven platforms (been around for >25 years) which you can use and abuse as much as you want.\nAnd about the paid business plans:\nif WhatsApp was actually interested in money they would have sold their company to Facebook a long time ago, right now they don't even care if the users pay them or not..\n. Can you inbox me the picture so I can figure out what's wrong?\n. What is the response node you get from WhatsApp after you call sendSetProfilePicture?\nThe picture should be square and not more then 640x640, but that should be automatically handled by the code:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/func.php#L32\n. Download the latest code and try again. I can set your profile picture just fine.\n. sendClearDirty is an automatic response to a server message and not a manual user action. I'll have to make that method protected to avoid confusion.\n. Not possible, messages are sent instantly.\n. Use a loop with sleep\nphp\nforeach($members as $member)\n{\n    $w->sendMessage($member, $message);\n    sleep(60);\n}\n. Corn? You can use command line php or build it in C# which allows multi threading.\n. PHP was not designed to run time-consuming tasks. \nYour best bet is to schedule the messages into a database (target number, message body and when to send) and run a cronjob every minute to process and send scheduled messages from database.\n. Such implementations are beyond the scope of this api. It does not support delay so you'll have to write a timeout or interval triggered system (e.g. cronjob) around it to make it work.\n. Sounds more like we need a solution to keep the spammers/scripters away\nI guess the README isn't clear enough\nhttps://github.com/venomous0x/WhatsAPI#note-july-30th-2013\n. Wait, since when does GitHub allow creating a new project with an existing name..?\n. Hmm I was pretty sure project names were global and unique on GitHub\n. Nah, the name is not an issue, I just thought that it wasn't possible :)\n. Use the event manager, it has been answered many times before\n. You need to create the onGetImage function yourself so the event manager can call it\n. The code you posted works fine for me. Set debug to TRUE in the constructor to see if the server throws any errors.\nphp\nfunction onGetImage($mynumber, $from, $id, $type, $time, $name, $size, $url, $file, $mimetype, $filehash, $width, $height, $preview)\n{\n    echo \"url is: \" . $url;\n}\n$w = new WhatsProt( $number, $identity, $nick, true );\n$w->eventManager()->bind(\"onGetImage\", \"onGetImage\");\n$w->connect();\n$w->loginWithPassword( $password);\n$w->pollMessages();\n. Of course it gives \"incorrect\"\nEvery time you use login() or checkCredentials() a new password is generated, invalidating the old one.\nUse checkCredentials() to get your password and only use loginWithPassword() in the future\n. Did you re-register the number on your phone?\n. Are you still able to request a new password for a registered number in WART using the checkCredentials button?\n. https://github.com/shirioko/WhatsAPI/wiki/WhatsApp-Registration-Flow\nand \nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleRegister.php\nshouldn't be too hard.\nOr in case you feel really lazy\nhttps://github.com/shirioko/WART\n. IMEI is no longer used indeed.\n~1 year ago the login mechanism used your MD5 hashed IMEI code as password, which was ridiculously insecure.\nThen they changed it to a server generated password using your MD5 hashed IMEI code as identity for registering the number, which was also insecure.\nSo now they use a complex algorithm and SHA instead of MD5 for identity generation which we probably won't be able to reverse engineer, so we just stopped bothering and just register a number to any SHA hash instead.\nEDIT:\nYou can leave the IMEI field blank ($imei = \"\";)\n. Just use the event manager.\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n. Because $wa object is not available inside the scope of the function that you're calling.\n. FFS\n. You'll need to contact WhatsApp helpdesk to unblock your account.\nAnd \"some token error\" is not very helpful, you'll need to post the exact error message.\n. That fatal error is a null poiner exception which kills your application, which is why you can't do anything after that.\nYour function tries to call variable $wa which does not exist inside its scope. You need to either create a static instance wrapper which holds your WhatsProt object, make $wa a global variable, or pass $wa as an argument to the function.\nStatic instance class:\n``` php\npublic class WhatsInstance\n{\n    protected static $instance;\n    public static function setInstance($wa)\n    {\n        self::$instance = $wa;\n    }\n    public static function getInstance()\n    {\n        return self::$instance;\n    }\n}\n//program code\n$wa =  new WhatsProt(bla, bla, bla);\nWhatsInstance::setInstance($wa);\nWhatsInstance::getInstance()->connect();\nWhatsInstance::getInstance()->loginWithPassword($password);\netc.\nfunction onMessage(bla, bla, bla, etc)\n{\n    //do stuff\n    ...\nif(WhatsInstance::getInstance() != null)\n{\n    WhatsInstance::getInstance()->sendMessage($to, $message);\n}\n\n}\n```\n. Remove \"public\" in front of the class declaration.\nThat's what I get for working with multiple languages. PHP and C#... :')\n. Both should work about the same.\n. Nice idea, but from the looks of it so far you took all your information from the README file. You should take a look in our official wiki.\nAlso, no active dev team? I'd say I'm pretty active around here :')\nI don't really see how a forum would lead to better discussion and documentation. It would just spread the issues out across multiple websites so it would be harder to keep track of them.\nThere's not that much to discuss about WhatsAPI really, well except maybe for a few people (you know who you are) who are trying to use it for marketing/advertising/automation but get stuck on their accounts getting blocked.\n. Yeah I'll add some more examples on WhatsAPI methods and event handler examples when I have some time.\nRight now I have a big project at the office until February and also a lot of stuff to do for Disa.im\nAlso someone just emailed me about digging up my old dead project WinApp.NET and bringing it back to life :')\nSo blegh.\n. Asdsfsdfsdf >:(\n. Status updates may take up to 24 hours to show up on your friends' phones.\n. Are you running multiple WhatsProt objects in the same script? WhatsProt class has some static properties used for encryption which don't allow multiple instances of WhatsProt at the same time.\n. It's because your code is horribly outdated. Method names were changed like a year ago?\n. WhatsApp does not automatically change your password. You can request a new password using checkCredentials (also supported by WART).\nYour password will be changed when you use login() method. Use loginWithPassword() instead.\n. Are you using your number on your smartphone at the same time?\n. No, just call pollMessages() a few times.\n. Turn on debug\n. Can you start typing normal sentences without all the \"?!??!?!?!?!!!!?\" ?\nSamples are already included in the repository:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleRegister.php\n. \n. Wai u do dis\n. Which version are you using? The generated token I get for 79261234567 is \nYCkfxi0%2FPrlMAybJGivLGrbXZVM%3D\nand code request for 79261234566 works just fine.\nCan you pull the latest changes from the base repository?\ngit remote add upstream https://github.com/venomous0x/WhatsAPI.git\ngit pull upstream master\n. You can comment out line 18 to 27 in token.php as it is not used for token generation.\nSee my commit:\nhttps://github.com/shirioko/WhatsAPI/commit/6d05d10cd7cd79905c7fcf05cfe2ea6d445a8481\n. What's your WHATSAPP_USER_AGENT in whatsprot.class.php and $classesMd5 in token.php?\n. Can you download my latest version:\nhttps://github.com/shirioko/WhatsAPI\nand try using that?\nI've simplified the token generation process so less chance of something going wrong.\n. can you add $w->pollMessages() after the code above?\nAnd can you post the debug output you receive (xml nodes)?\n. No rx nodes?\n. Or just your firewall. Make sure you use port 443 for connection in whatsprot.class.php\n. Did you register WhatsApp on your Android phone after using WART? WhatsApp only allows a number to be registered to a single device at a time.\n. Are you using international format for your numbers (incl. country code)?\nCan you post the code you are using to send a message to any contact?\nI you are using message broadcast the message will not be delivered unless the contact has YOUR number in HIS contact list :)\n. Yes you can send messages using sendMessage(), though this only allows you to send one message to one contact at a time.\n. IIRC this is caused buy using a newer PHP version(5.4 and up). Downgrade to PHP 5.3 and try again.\n. @jonnywilliamson\n. What for?\n. WhatsApp uses RC4 keystreams for encrypting and decrypting data:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/rc4.php\nThe RC4 keystream key (20 byte) is generated from your password and challenge data:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1352\nRC4 works with states, so the keystream state (contents of the keystream) changes after every byte you encrypt.\nWhen you encrypt a byte, the state is processed, updated, and the encrypted byte is returned. \nThe same goes for decrypting. You need two streams on both ends, one for encrypting and one for decrypting.\nDecrypting an encrypted message is as simple as pushing the encrypted bytes into the keystream for decryption, and decrypted bytes will pop out on the other end :)\nBiggest advantage of a state encryption system is that sessions cannot be hijacked, since the state of the keystream cannot be reconstructed without having ALL the sent or received data. Hopping into a session with a wrong keystream or keystream state means that your data cannot be decrypted by the other endpoint.\n. Post your script.\n. That's quite a script. Why not use an event handler?\n. call $w->pollMessages() in a while loop.\n. Can you post your debug output when logging in, I think your login is failing.\n. No I'm talking about the debug output when running the script. You should get a  or  node when trying to log in.\n. Collect your address book phone numbers in international format\nphp\n$numbers = array(\n    \"31650568134\",\n    \"31650568143\"\n    ...\n}\nand execute contact sync\nphp\n$cs = new WhatsAppContactSync($username, $password, $numbers, true);\n$res = $cs->executeSync();\n. All of them.\n2014/1/6, maggnetz notifications@github.com:\n\nshould i send all of them , or only the new ones?\nOn Mon, Jan 6, 2014 at 11:48 AM, Max Kovaljov\nnotifications@github.comwrote:\n\nCollect your address book phone numbers in international format\n$numbers = array(\n    \"31650568134\",\n    \"31650568143\"\n    ...}\"and execute contact sync```php$cs = new\nWhatsAppContactSync($username, $password, $numbers, true);$res =\n$cs->executeSync();\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31637049\n.\n\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31639808\n. Any reasonable phone address book  size\n. No, users can always respond to messages. The best thing you can do is just ignore them and add a footer like \"Please don't respond to this message\"\n. WhatsApp has moved sync from webrequest to FunXMPP. I'm looking at it right now.\n. yes\n. Make WAUTH-2\nAnd stop spamming ffs.  There's a difference between reporting a known issue and kicking it like an impatient 12-year old.\n. There are no dumb questions... but there are questions which get asked so often that I'm going to start deleting comments.\n. I'm starting to lose hope in GitHub\n. \n. What does that even mean?\n. Sure let me just drop all the other (paid) work I'm doing and materialize this solution out of thin air.\nAs I said before, WAUTH-2 has already been reverse engineered and still has to be ported to WhatsAPI and WhatsApiNet, which takes time.\n\nAnd inb4 \"omg send me the reverse engineered code pl0x kthanks\":\nThat project is closed source so I can't just copy paste the code. I'll use it as reference to see what has to be changed, but it's still a lot of work which takes time. Time that I don't really have atm.\n. Sssst I'm pulling a Tarek here... (i.e. staying off the grid for a while and then suddenly popping up with something amazing)\n. :smile: \n. You guys... I'm a bit overwhelmed.\n. ARGH I don't even have time for this right now, too much stuff going on at the office >.<\nGitTip Donation Link\nPayPal Donation Link\nI'll sort it out when I get home\n. Didn't I already post the link? ^\nI need to figure out where to put the button and how the whole process works, the links above were the only things I could cough up this fast\n. @brittson omygod my first donation! :O thank you so much!\nI think I've just hit a new milestone in my internet career :D\n. Third one already D: ERMAHGERD! Thank you guys so much!\nI've been working on WAUTH-2 last night. Logging in seems to work, but I still receive random encryption errors so I'll need to fix that first.\n. Encryption fixed, I derped so hard that I put the socket tree reader method in the wrong class and was staring at the broken code for days wondering why I got all these weird values >.<\nProgress can be followed in my commits for shirioko/WhatsApiNet. I have to update the inbound and outbound node syntax, they're using a new format. E.g.:\nMessage:\nxml\nRECVD: <message from=\"316********@s.whatsapp.net\" id=\"130353783428798361-0\" type\n=\"text\" t=\"1390904800\" notify=\"Max\">\nRECVD:   <body>Huewhuehue</body>\nRECVD: </message>\nTyping/paused:\n``` xml\nRECVD: \nRECVD:   \nRECVD: \nRECVD: \nRECVD:   \nRECVD: \n```\nAnd lots more\n. @brittson sending text fixed in https://github.com/shirioko/WhatsAPINet/commit/3606cf69c7ffebcb517c602027b68d9d99b7433c\n. Remember that contact sync is not a \"library\" but functionality and that ContactSyncV3 has already been sorted out (see WhatsApiNet)\nI need to port the KeyStream and TokenMap classes to PHP and then we're good to go.\n. WAUTH2 is working now, I'm able to log in. Latest changes are on my fork. So the hard part is done.\nNow all that's left is to implement the new FunXMPP protocol nodes which have been overhauled by WhatsApp. So I'll need to update the methods for generating outbound nodes as well as processInboundData to process received messages.\n...\nAnd of course add the new contact sync.\n. Correct.\nApache user doesn't have write permission on nextChallenge.dat\n. Do you even PHP?\nGo read up on what a scope is and how it works.\n. Also I wouldn't recommend sending messages from event handlers as they are being called while the script is processing inbound data. Sending data at the same time may cause some anomalies :)\nJust push the messages into a global array and send them before calling the next pollMessages\n. If I look at the code in socket.php it should receive and display all messages already. There's no filtering on received messages.\n. Yes what is this ! you speak of?\n. which code are you using?\n. On line 62 you trim the first character of $body using substr($body, 1) to remove the ! character. Remove that substr call and also remove the if() on line 65\nThat should do it.\nSo this should work:\n``` php\n61:         global $w;\n62:         $parameters = explode(' ', /substr(/$body/, 1)/); //For use with multiple parameters (for example \"!kick Jack Spamming\")\n63:         $command = array_shift($parameters); //The actual command (for the switch)\n64:         $parameter = implode(' ', $parameters); //For use with one parameter (for example \"!echo My name is John\")\n65:         //if(substr($body, 0, 1) == \"!\") {\n66:                 switch(strtolower($command)) { //Must use strtolower to accept both !Commands and !commands.\n67:                         case \"help\":\n...\n173:                                 break;\n174:                 //}\n175:         }\n176: }\n```\n. Wrong project.\nAnd by syncing contacts and not sending large number of messages.\n. Increase the value in\nphp\nset_time_limit(10);\nin line 2.\ne.g.\nphp\nset_time_limit(300);//5 minutes\n. What does your debug output say?\n. sendPresence() won't keep you online.\n. I already addressed this issue in WhatsApiNet\n. No you can use sendGetPrivacyBlockedList instead\n. PHP can't use threading.\n. Just like how any processor does it, using interrupts based on timers\nphp\n$interval = 60;//seconds\n$start = time();\nwhile(true)\n{\n    $wa->pollMessage();\n    $now = time();\n    if($now > ($start + $interval))\n    {\n        //tick\n        $wa->sendGetPrivacyBlockedList();\n        $start = time();//reset timer\n    }\n}\nAlso, PHP < C#\n. Being Dutch is no excuse for poor language. You dishonor your famiry!\n\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1560\nReplace SendPresence() with SendOfflineStatus() so you will show up as offline when logged in.\nThen listen for messages and call SendPresence() when you receive one to go online.\nFor going back offline you can either set a timer for calling SendOfflineStatus() or simply let the connection time out and reconnect to WhatsApp using SendOfflineStatus()\n. Do you have the option to hide your last seen time enabled on your iPhone?\n. Only solution would be to use MissVenom to capture the password during registration and use that to log in. But you still won't be able to use the phone and WhatsAPI at the exact same time. Your WhatsAPI connection will be destroyed when your phone connects to WhatsApp and vice versa.\n. if(($child->getTag == \"media\") && ($child->getAttribute('type') == \"image\")){\n             $url = $child->getAttribute('url');\n        }\ngetTag is a method, so it should be getTag()\n2014/1/22, mindfuucker notifications@github.com:\n\nIm having difficulties trying to get the Image URL from the message without\nthe Eventmanager because I don't understand how to implement it.\nA part of the code that didn't work:\n```\n$wa = new WhatsProt($sender, $imei, $nickname, true);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->PollMessages();\n$msgs=$wa->getMessages(); //store all messages in $msgs\nforeach($msgs as $m){ \n  foreach ($m->getChildren() as $child) {\n      if(($child->getTag == \"media\") && ($child->getAttribute('type') ==\n\"image\")){\n           $url = $child->getAttribute('url');\n      }\n  }\n}\n```\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/588\n. The integer is just the index in the array of child nodes. I was too lazy to look up the node names so I just used indexes, getChild supports both node name and index. Though you should always use node names in getChild to prevent mistakes :)\n\nThe example you posted is for processing an incoming message node\nname: $node->getChild(0)->getAttribute('name')\nurl: $node->getChild(2)->getAttribute('url')\nWhich roughly looks like this:\nxml\n<message from=\"1234567890@s.whatsapp.net\" id=\"23413434-32\">\n    <notify name=\"derp\"></notify>\n    <receipt></receipt>\n    <media id=\"123124321\" size=\"12345\" url=\"http://sdasdsad/sgafsdgfdswerfdsfa.jpg\" name=\"sgafsdgfdswerfdsfa.jpg\"></media>\n</message>\nSo $node->getChild(0) would get the first child, which is the \"notify\" node, and $node->getChild(2) would grab the third child which is the \"media\" node.\nThe proper and clean way to actually do this using node names would be\nname: $node->getChild(\"notify\")->getAttribute('name')\nurl: $node->getChild(\"media\")->getAttribute('url')\n. Why not use a switch case?\nphp\nforeach ($m->getChildren() as $child) {\n    var_dump($child);\n    switch($child->getTag())\n    {\n        case \"body\":\n            $body = $child->getData();\n            break;\n        case \"notify\":\n            $name = $child->getAttribute(\"name\");\n            break;\n        case \"media\":\n            $body = $child->getAttribute(\"url\");\n            break;\n        default:\n            echo \"Unknown node with tag \" . $child->getTag() . \"\\r\\n\";\n    }\n}\n. So what is the question?\n. You are using method=self. Use method=sms to get a 6 digit code.\n. That's a bug with WhatsApp's SMS. Try voice instead.\n. Just Google it ffs\n. Use forward slashes if you're using Apache\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L554\n. As an array\narray(\"31650568134\", \"31650568123\", etc.)\n2014-01-27, Matthijs Otterloo notifications@github.com:\n\nAn how do i enter more numbers? (\"31612345678 , 31623456789\")??\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/595#issuecomment-33359394\n. WAUTH-2 will be available soon. I'm currently trying to get it to work in WhatsApiNet, I might start pushing commits tonight.\nPorting the fix to PHP should be fairly easy.\n. I have two deadlines coming up for work this friday though, so I might get desparate enough to fall back into my energy drink addiction...\n. I don't even...\n\nYou need to stop confusing the issue tracker with StackOverflow. The functions for sending a message and leaving a group are already there. All you need to do is use them.\n. Duplicate #571 \n. Are you on PHP 5.4?\n. Have fun\n. You must be new here\n571\n. Because I have more important shit to do.\n. Contact sync works.\n. Duplicate #328 and #118 \nAnd use the pretty search bar on top of the page next time\n. Duplicate #605 and #328\n. Yes I'm at work.\n. @aseif Why don't you read the other issues? #571 \nThat'll explain everything.\n. @lahmacuns I think you've missed the \"why don't you read\" part of my comment:\n\nNow all that's left is...\n...\nAnd of course add the new contact sync.\n\nhttps://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-34314768\n. Working.\n. Jesus, I leave you guys alone for a day and I see my name all over the place\n. I don't recall pushing the code to this repository? So why is this question here?\n. I already said that the new api is not yet finished, which is why the new code is still in my fork. Until then don't post any more issues about wauth2 problems, I'm well aware of them.\n. Working in current version.\n. You can't. Only thing you can do is filter out all received messages which are not from your target number.\n. Duplicate #571\nand this is your problem and not ours, so behave yourself if you want some help.\n. You need to check if it's actually a chat message\nphp\n$messages = $wa->getMessages();\nforeach($messages as $message)\n{\n    if($message->getAttribute(\"type\") == \"chat\")\n    {\n        if($message->getChild(\"notify\"))\n        {\n            $name = $message->getChild(\"notify\")->getAttribute(\"name\");\n            //voila\n        }\n    }\n}\n. @CodersBrothers you what? Can you rephrase that?\n. onMessage already parses the notify node and includes the sender's name\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1837\n. yes\n. Did you take a look at the events wiki on how to use it?\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n``` php\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"YEAH\";\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->PollMessages();\n```\n. To be more specific: you need to bind it before you receive the first message, which is after successful login.\n. sendClientConfig sends device capabilities (taken from WP client)\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L603\nand sendGetServerProperties gets the server properties (doh)\ne.g. max. group size, max file size, max image dimensions, socket timeout etc.\nThis is indeed a measure to try to prevent number blocking\nAnd please don't discuss here what I'm doing on my own fork, those are two separate projects until I push my changes to this repository. :)\n. I'm pretty sure that logo will get someone in trouble eventually :/\n. You can open an issue in the original repository instead:\nhttps://github.com/perezdidac/WhatsAPINet\n. Can you be more specific?\n. I fixed this yesterday in https://github.com/venomous0x/WhatsAPI/commit/3928845ccf9fc52849358c7a1db36bdba7f792c9\n. Did you look at the code?\nphp\n$username = $_GET[\"phone\"];\n$password = $_GET[\"pass\"];\n$u = $_GET[\"u\"];\n. Do you know what $_GET is?\n. Then how are you getting the undefined index error?\ncontactsync.php?phone=123455678&pass=SDGerafsdDFHD&u[]=34534532423&u[]=23455476535&u[]=235543635324\n. Are you url encoding your password? Passing a '=' character as argument will corrupt the query string.\nSo instead of \npass=ASDASfadfsdFASFAS==&u[]=4134321312\nuse\npass=ASDASfadfsdFASFAS%3D%3D&u[]=4134321312\nhttp://meyerweb.com/eric/tools/dencoder/\n. Or just hard code the phone number and password in contactsync.php instead of passing it in the query string:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/contactsync.php#L6\n. What script?\n. You mean the first screen you get when accessing whatsapp.php?\nwhatsapp.php line 427:\nreplace\nphp\nexit($this->showWebLoginForm());\nwith\nphp\nexit($this->showWebForm());\n. You're not making any sense.\nWhich error are you getting?\n. ProtocolNode class already contains the NodeString method which does a lot more formatting than just print_r\n. Damn it, gave it a shot last night but couldn't figure out how to deserialize Java objects in C# or even PHP >.<\nI'll have to either port the javaobj library to C# or use IKVM to embed Java's deserializer into a DLL, neither of which I'm looking forward to :')\n. Nice, thanks :)\nGot the deserialization to work in C#, data arrays seem to have constant length of 42 byte, now for the decryptor...\n. .NET doesnt support OFB mode for AEs >.< I'll give it a try using PHP tonight\nAs for parsing the files: you can get the stored data from \"pw\" and \".nomedia\" simply by reading the last 42 byte of the files :') the rest of it is just metadata\nphp\n$data = file_get_contents(\"pw\");\n$data = substr($data, strlen($data) - 42, 42);\n. Yes that did answer your question.\nYou can only send a broadcast message to up to 20 people at a time. So to reach 250 people you'll need to send 13 broadcasts.\n. No you can't send to 250 directly using the app on your device. WhatsApp supports up to 50 broadcast recipients (not 20, my bad):\n``` xml\ntx  \ntx    \ntx  \nrx  \nrx    \n        ...\nrx      \n        ...\nrx    \nrx  \n```\n. @jonnywilliamson can you show me what that list management looks like?\n. Looks to me like the app just sends the same message to multiple lists\n``` php\n$lists = array(\n    array(\"4324325423\", \"234234234234\"),\n    array(\"4634543\", \"453454543\", \"436354355\"),\n    etc.\n}\nforeach($lists as $list)\n{\n     $w->sendMessageBroadcast($list, $message);\n}\n```\n@jonnywilliamson thanks, got it!\n. Yes. Take a look at exampleFunctional.php\n. JID with @s.whatsapp.net are user addresses and @g.us are group addresses\n. @eslamo what about testing latest version before posting??\nBoth are fixed.\n. Come again?\n. Do you have a valid phone number and password?\n. And what about the password?\n. A Base64 string is not supposed to have percent signs in it. UrlDecode the password.\n. No, you just use PHP's built in url_decode():\nphp\n$password = url_decode(\"your password\");\n. Set $debug to true and be amazed.\n. Not authorized. Looks like your password is wrong. Can you request a new one using checkCredentials?\n. php\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$res = $w->checkCredentials();\nvar_dump($res);\n. checkCredentials returns a new password on success, use it to log in.\n. Nice.\n. Take a look in the Wiki:\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\nand add your SQL insert in the event handler.\n``` php\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    $query = \"insert query with vars\";\n    mysql_query($query);\n}\nmysql_connect($dbhost, $dbuser, $dbpass);\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\n```\n. You do know how PHP strings work right? :)\nphp\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO messages (phone, from, id, type, time, name, data) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\");\n}\n. Incoming messages are processed by pollMessage() and pollMessages() which automatically call the function for each message.\n. Can you send a message to your test number, set $debug=true and then run your script?\n. But the message is not inserted into database?\n. Try to import the global connection identifier:\nin your connect include script\nphp\n$conn = mysql_connect($foo, $bar, $baz);\nand in the event handler:\nphp\n{\n    ...\n    global $conn:\n    mysql_query($query, $conn) or die(mysql_error($conn));\n}\n. ...\nplease don't open SQL connections in the event handler :')\n. So you just need to fix your credentials for MySQL.\nAnd add an \"or die(mysql_error())\" after your mysql_connect() call in your include.\n. And what are the failures?\n. How about you just run a test script to see if you can actually insert stuff into your table before we continue guessing what the problem might be.\n. Probably. You can wrap your field names in special quotes (on the ~ key)\n`from`, `time` etc.\nAnd you have to either select database using mysql_select_db('databasename', $conn) or specify it in your query as 'database'.'table'\n. Works fine for me. Are you on the latest code?\n. Why are you creating two WhatsProt objects?\n``` php\n<?php\nrequire_once 'whatsprot.class.php';\n$cfg['MysqlLoc'] = \"localhost\"; //Lokatie van Database (Normaal: localhost)\n$cfg['MysqlUsr'] = \"user\"; //Gebruikersnaam\n$cfg['MysqlPas'] = \"pass\"; //Wachtwoord\n$cfg['MysqlDtb'] = \"db\"; //Database Naam\n$conn = mysql_connect($cfg['MysqlLoc'],$cfg['MysqlUsr'],$cfg['MysqlPas']) or die (\"Er is een fout opgetreden bij het connecten met het dbbeest. MySQL retouneerde: \".mysql_error());\nmysql_select_db($cfg['MysqlDtb'], $conn) or die (\"Er is een fout opgetreden bij het selecteren van het dbbeest. MySQL retouneerde: \".mysql_error());\n// phone number, deviceIdentity, and name.\n$options = getopt(\"d::\", array(\"debug::\"));\n$debug = (array_key_exists(\"debug\", $options) || array_key_exists(\"d\", $options)) ? true : true;\n$username = \"sender\"; // Telephone number including the country code without '+' or '00'.\n$identity = \"identity\"; // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$password = urldecode(\"password\"); // A server generated Password you received from WhatsApp. This can NOT be manually created\n$nickname = \"nickname\"; // This is the username (or nickname) displayed by WhatsApp clients.\n$target = \"receiver\"; // Destination telephone number including the country code without '+' or '00'.\n$token = \"token\";\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    global $conn;\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO berichten (nummer, van, id, soort, tijd, naam, bericht) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\", $conn) or die (mysql_error());\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->connect();\n$w->loginWithPassword($password);\nwhile($w->pollMessage());\n```\n. No, the intention for that is to use data sources like Google or CSV files.\n. Sure, as long as your MySQL connector class implements the Contacts interface and returns the numbers in the format described above.\n. Ha, suckers!\nI can login just fine ^^\n. You must be new here\nhttps://github.com/venomous0x/WhatsAPI#note-july-30th-2013\n. http://www.whatsapp.com/faq/nl/general/21009863\n. Are you still getting a succesful login?\n. Set $debug=true and look for a  or  node\n. It means that it doesn't accept your password. It's been reported before in #648 and #652 \n. Not as-is, you'll need to edit the code to retrieve the parameters from $_GET\n. By not sending bulk messages.\n. No one knows\n. How did this issue become a Q&A?\n. No.\n. Obviously not here.\n. WhatsApp uses two different receipts, server receipts and client receipts.\nServer receipt is received when the message arrives at the server.\nClient receipt is received after the message has been read by the recipient.\nServer receipts are received right after sending the message.\nClient receipts can take a while to be received, depends on how active the recipient is.\n. Yes, receipt IDs are the same as the message id.\n. sendMessage() returns its message id\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L969\nYou need to save that message ID and listen for client receipts. You'll know that the message is read after you receive a client receipt with that specific message id.\n. Just leave it blank if you don't know what it is or what it does.\n. Can you put this in funcs.php instead? Emojifying text using a stylesheet is not part of the protocol.\n. The function is good as it is, I just don't want it in whatsprot.class.php\n. WhatsApp doesn't support HTML formatting. URLs are automatically converted to  hyperlinks if the sender is in the recipient's contact list.\n. You can't generate passwords. Obtain them from the server.\n. http://www.imore.com/whatsapp-down-slow-or-inconsistent-you-youre-not-alone\n. Just use WART\n. https://github.com/shirioko/WART\n. You only need your phone number and password. ID is irrelevant.\n. try using host c2.whatsapp.net\n. Change the host in whatsprot.class.php\n. Fixed in WART 1.6.5.0\n. Go to GitHub -> shirioko -> WART -> WART-1.6.5.0.exe -> View RAW\n. No.\nalso, duplicate of #657 \n. sendMessageImage()\nsendMessageVideo()\n. Any file. You need to include whatsprot.class.php\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php#L48\n. No.\n. You're still using the old version.\ncontactsync.php expects only one argument in onSyncResult:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/contactsync.php#L28\n. Subscribe to onMessageReceivedClient\n. $wa->sendMessage returns the message ID. You need to save that ID and attach an event listener for onMessageReceivedClient. This event contains the message ID of the message received by the client (phone). If the sent message ID and event message ID are the same, you know the message is received.\n@escalanterj did you read this issue? He already gave you an example https://github.com/venomous0x/WhatsAPI/issues/680#issuecomment-40400033\n. Explanation on how to use the event listener is in the wiki\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\nyou just need to use the correct event\nphp\nfunction onClientReceipt($mynumber, $from, $id, $type, $time)\n{\n    die(var_dump($id));\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceipt\");\n. https://github.com/shirioko/WhatsAPI/wiki/WhatsApp-Registration-Flow\n. 1) No. http://www.whatsapp.com/faq/en/general/21009863\n2) Are you using whatsapp.php?\n. I don't think so.\n. https://github.com/venomous0x/WhatsAPI/commit/a16447319f5de54030e436191ff5e4ff75d40a5e\n. yes\n. Who told you that you can pass an array as argument for bind()?\nthe syntax is bind('eventName', 'functionName') and the function has to be global with no context i.e. a normal function or a public static method\n. Of course\n. You should always listen for inbound messages before ending the script, or else you won't get any response:\n``` php\n//--your code--\nwhile($wa->pollMessage());\n//end of script\n```\n. Yes.\nAnd to specify syntax highlighting you need to add the language code:\n```php\n*php code*\n. wtf is \"SendBulk()\"?\n. Does your password contain any special characters? E.g. \"asdFASDASFad==\"\nUnescaped special characters will break your query string.\n. That's quite an impressive amount of friends you have there\n. comment out this line\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1589\n. The mobile WhatsApp client uses GCM or some other type background push channel to push updates when the device is set to offline i.e. the app is not in foreground. So it makes no sense for the server to keep a connection open when the status is offline.\n. PHP doesn't support threading so probably not. All the code is synchronous so the best you can do is fetch all incoming data between sending messages:\nphp\n{\n    $w->sendMessage($to, $text);\n    while($w->pollMessage());\n}\n. No.\n. No.\nWhy did it fail?\n. Replaced by new connection means that you're using your WhatsApp account in two places at the same time\n. Wrong project.\n. Do you want me to spell it out for you?\nOpen WART related issues here:\nhttps://github.com/shirioko/WART\n. Speaking of WART, I've just pushed an updated version 1.6.6.0\nSo download and try that before you open another issue somewhere.\n. support@whatsapp.com\n. Merged in #834\n. Yes.\n. Hmm I'd swear I added it a long time ago...\n. I think you're lost, this isn't WhatsApiNet.\n. Because WhatsApp has some issues with reaching certain cell networks to send SMS messages.\n. Search around in the issues, I've already explained how to obtain the MD5 somewhere.\n. I told you to search, not to read.\nFirst query I entered already yields three results with the answer you're looking for:\nhttps://github.com/venomous0x/WhatsAPI/search?q=classes+md5&type=Issues\n. Gone.\n. I'll give you 1 hour to provide error details before I close it.\nThis is an issue tracker, not a chat box.\n. Already explained in https://github.com/shirioko/WhatsAPI/issues/23\n. php\n$w->sendVcard($target, $name=\"Test\", $vcard->show());\n. This is why\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/vCard.php#L124\n. There's nothing wrong, if you want to remove it you'll need to comment out that line in vcard.php\n. This one: https://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1601\nphp\n$this->sendAvailableForChat();\n. Explained in https://github.com/shirioko/WhatsAPI/issues/38#issuecomment-41449998\n. php\n$w->sendGroupsChatCreate(\"Derp\", array(\"31650568134\"));\n. Nope.\nhttps://github.com/venomous0x/WhatsAPI#note-july-30th-2013\nPS sure I may know a fair amount about how the blocking mechanism works, but you won't be reading about it here. For the same reason as explained in the readme.\nBut I of course have no way of stopping you from creating a guide on your own so go ahead :)\nIt might reduce the amount of \"hurr durr I'm blocked halp fix pls\" issues opened across my repositories.\nI'm just going to steer clear from this bulk messaging stuff.\n. @assegaf :laughing: \n@CodersBrothers WhatsApp is the first platform which doesn't message me about Hot Females In My Area, Best Smartphone Deals, RussianWebCamGirls or CandyCrushSaga. So in that way it's beautiful.\nInsecure? Maybe two years ago when they had no encryption and you had to log in using your IMEI code. I still hear some reports of exploits on Android, but I'm on Windows Phone so I don't care\nNo innovation? Don't mistake a trendsetter for something outdated. WhatsApp was the first modern generation messaging service, years before WeChat and Telegram even existed. WhatsApp was the first of them to implement phone numbers as usernames so you didn't spend weeks searching and adding your friends.\nIt's closed? Plenty of protocols are closed: BBM, Facebook chat (FB XMPP API is pretty much useless today), Steam Messenger, Kakao Talk, iMessage, SnapChat, Google Hangouts (again, their old XMPP API is useless and will probably be ditched during Google's spring cleanup)\nUnstable? Yes it has a few hours of downtime once in a few months. That's a problem you'll face when handling 700.000.000 photos and >10.000.000.000 messages per day for free.\nSo I wouldn't call it shit. It's still the most popular mobile chat service.\n@brittson I intended this API for personal use and not for commercial use\n. Alright, you want a hint? Revert this commit before registering your number\nhttps://github.com/venomous0x/WhatsAPI/commit/86e7e0c7596a3f22105775a2f7f4730b61135fff\nNewer versions (i.e. newer than in Play Store) from their website seem to be borked sometimes, I couldn't event get their latest version to send SMS or voice code last night.\n. Blocking thresholds may vary per version\n. Both numbers should be in each other's contact list\n. I'm laughing and crying at the same time.\nI thought my instructions were clear enough? Revert the commit and register number.\n. Because you're changing unrelated strings for no reason without understanding how the code works and then claim to have fixed something :+)\n. That document is >1 year old and not very accurate/useful anymore. It's still talking about using IMEI code to log in.\nPS\nI'd keep my eye on those suspicious looking varchars in https://github.com/venomous0x/WhatsAPI/issues/716#issuecomment-41664694, they may be up to something :o\n. Aw come on Google Translate, I know you can do better than that!\nI'm saying that you should take a look at how the registration works and when the token and all those \"suspicious looking varchars\" are actually used.\nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApp-Registration-Flow\n. split the text from the textbox\nphp\n$numbers = explode(\"\\n\", $_POST[\"textarea\"]);\nthis will give you the array of numbers which you can use to send messages\n. This is beyond newbie, I'm not going to explain PHP basics\nhttp://www.php.net/manual/en/reserved.variables.get.php\n. You don't\n. You don't have one\n. That's your offline queue, only thing you can do about that is have all messages automatically ACKed\n. No.\n. \\r\\n\n. Try using context=\"background\"\n. sendGetStatuses is an async method. You need to use the event manager to catch the server response.\n. Already answered in #708 \n. You shouldn't use SendPong for that. That method is deprecated and no longer used by WhatsApp.\nUse sendPresence() instead.\n. No.\nWhatsapp client  connects and authenticates when you open the app. Any message you send or receive goes through that socket connection.\nThe socket is closed when you exit the app on your phone. At that point the app subscribes to GCM, Apple cloud notifications or Microsoft push framework.\n. Yes. Sync your contacts beforehand.\n. Not in the same PHP instance. WhatsAPI uses static properties which would break multiple WhatsProt objects. You'll have to launch multiple instances of the same script.\n. If it's registered using yowsup you'll need to take a look at how yowsup generates it:\nhttps://github.com/tgalal/yowsup/blob/master/src/Yowsup/Common/utilities.py#L29\n. This is completely past the whole concept of an API (where the user is supposed to provide data store etc), but here goes:\n- Connect to database when constructing the WhatsProt object\n- Read messages from database and send them using SendMessage()\n- Save incoming messages from event handlers\n. Can you not?\n. You only need to call SendPresenceSubscription once.\nPresence subscription is an async function which automatically notifies you when a user's presence changes:\nphp\n$wa->SendPresenceSubscription($dst);\nwhile(true){\n    $wa->PollMessages();\n    sleep(60);\n}\n. You're missing a space in \nphp\necho \"The user is now\" . $type;\n. SendGetStatuses is to retriece the status updates of your contacts. To get delivery receipts you'll need to subscribe to the OnMessageReceivedServer and/or OnMessageReceivedClient events.\n. Bind the events before logging in.\n. Removed comments about @whatapp11\nThis is an issue tracker, not an advertising board\n. I don't know why you'd want that but here you go:\nhttps://github.com/perezdidac/WhatsAPINet/issues/88\n. You can use mode=\"delta\" and send them incrementally. If you use it too often it will return an error node with a \"backoff\" time.\n. From what I understand:\n- mode=\"full\"&context=\"registration\": runs after registration (duh)\n- mode=\"full\"&context=\"background\": scheduled nightly sync\n- mode=\"delta\"&context=\"background\": triggered by adding a contact with phone number to the phone\nI still owe you a complete answer for this, I'll check out the sources I have when I get home.\n. 1) This is the wrong repository https://github.com/shirioko/WART/issues\n2) WhatsApp was down for a while tonight, try again now\n. That's weird. Oh those crazy Mexicans...\n. Boop.\nhttps://github.com/shirioko/WhatsApiNet-SyncUtil\n. Ugh I don't care about football. Thanks to that match I won't be able to sleep with all the fucking fireworks and horns :')\nYou can make it run using Mono. You can fork my project WinApp.NET, I think it \"should\" be able to run in OS X? It uses standard WinForms components.\n. @Marcorele I don't think so, I don't know Python\n\n. Probably missing PHP extensions\n. You can have a look at the included AJAX demo. It uses javascript to repeatedly call the listener page.\n. \n. Already fixed, I'll push it when I get home\nSendSync doesn't return empty nodes anymore when you don't have any valid or invalid numbers\n. You can sync as many times as you want as long as you respect the BACKOFF timeout\n. Don't you receive a server receipt after sending the image?\n. No. Just no.\n1) those pages are meant for registration and not for messaging\n2) v1 has been discontinued by whatsapp a long long time ago\n. Don't use whatsapp.php for examples >.<\nUse exampleFunctional.php instead.\nwhatsapp.php is a bit too complex to be an example\n. You can't do that using any API. Last seen time is automatically updated when a user goes offline\n. Comment out this line:\nphp\n$this->sendAvailableForChat();\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L1625\n. I see what you did there, but SendSync() is never called so the event handler won't be fired. Also that die(); will stop the program from executing after receiving the sync result and before sending the messages.\n. Your best option would be to either put the $wa object in a static property to make it accessible from the event handler, and send the messages from inside the event handler\n``` php\nprotected static $wa;\nprotected static $message;\npublic static function event_onSyncResult($result)\n{\n    foreach($result->existing as $number)\n    {\n       $wa->sendMessage(self::$number, self::$message);\n    }\n}\n```\nor to put the sync result contacts in a static property and set it from the event handler:\n``` php\nprotected static $numbers = null;\npublic static function event_onSyncResult($result)\n{\n    self::$numbers = $result->existing;\n}\n//send sync\n$wa->SendSync($numbers);\n//wait for response\nwhile(!is_array(self::$numbers) && $wa->pollMessage());\n//send\nforeach(self::$numbers as $number)\n{\n    $wa->sendMessage($number, $message);\n}\n```\n. You don't have PHP added to your PATH\nEither add it to PATH or run it from its location which in your case should be C:\\wamp\\bin\\php\\php5.5.12\\php.exe\ninb4 HAW DO I ADD TO PATH PLS this is not StackOverflow or W3Schools, you can use Google just like everybody else\n. Make sure you URL encode your password when passing it through the URL\n&pass=adERSDFacacevrRFGS==&u[]=+43\nwill obviously break your query string because it has '=' in it\n. http://www.url-encode-decode.com/\n?phone=+91regedNumberHere&pass=axl03Is1nVvgfU*****h3mZdkZs%3D=&u[]=+91numberHere\nmake sure the '=' signs in the password are encoded into '%3D' so they won't confuse the server\n. Oh jeez I just realized that you're using the WhatsAppContactSync class. This sync method is deprecated by WhatsApp and can no longer be used.\nYou need to use the SendSync method in WhatsProt class instead.\n. https://github.com/venomous0x/WhatsAPI/archive/master.zip\n. Point 1 is that the server will tell you when to back off and for how long.\n. Exactly.\n. No you shouldn't receive an error for sending the same numbers twice based on the numbers. The backoff results from the quantity and interval of sync.\n. Yes people open pull requests, no I don't merge all of them\nhttps://github.com/venomous0x/WhatsAPI/pull/819\nhttps://github.com/venomous0x/WhatsAPI/pull/763\nhttps://github.com/venomous0x/WhatsAPI/pull/742\nThe example files are not updated because I never use them and thus don't encounter the issues when they become outdated from code changes. I'll fix it when I get home from work. Which is another reason why I don't have that much time to work on this project.\n. Don't think I won't notice those Spanish strings you're trying to sneak in there! Keep those to your whatsapp-spanish fork haha\nI'm not that big of a fan of adding additional example files. There's already enough confusion about which file the user is running when encountering the error.\nCan you move the code to exampleFunctional.php instead? :-)\n. You have to download, but you won't have to upload it.\nWhen you send a media message you need to present a SHA hash of the file you wish to send to the server.\nIf the file is new the server will return a URL which you use to upload the file.\nIf the file is already on the server (which it is if you already received it) the server will return a  node with the file URL in it. You can use that URL to send the media message.\n. Example code? You just $w->sendMessgeImage($to, \"file.jpg\") and if file.jpg is already on the server the API won't upload it before sending :')\n. I suppose it is. You can capture it using the event listener:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/events/WhatsAppEventListener.php#L143\n. It's pollMessages dammit, POLL!\nYes, you need to call pollMessage or pollMessages to receive and process incoming data. That's one of the limitations of PHP, no multithreading stuff.\n. Here you go\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/whatsprot.class.php#L2207\n. *sigh* yes you could use that legacy method\nOR\nyou can do it the intended way by utilizing the event manager\n. Yep.\nBoop https://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\n. Also as @sbalgas suggested I'd recommend using WhatsApiNet as a reference for Java instead of WhatsAPI\nPHP has some flaws/features which don't translate too well to a lower language e.g. loose typing and single threading\nAlso WhatsApiNet is better maintained by me than WhatsAPI :')\n. No.\n. Wrong project.\n. Unrelated to WhatsAPI\nbut to answer your question: you're working with a 2-dimensional array:\n[0]\n    [0]\n    [1]\n    [2]\n[1]\n    [0]\n    [1]\n    [2]\nso $result is an array with all the results from your query\n$result[$i] is another array containing the fields\nso you'll have to use something like \nphp\n$contacts[] = $result[$i]['jid'];//field name\n. Discuss WART issues in the appropriate project.\n. So?\n. Sounds to me like it maybe includes the wrong protocol.class.php, so it passes the required_once() call but is then unable to find the BinTreeNodeWriter class and construct $this->writer\nInclude it like this:\nphp\nrequire_once dirname(__FILE__) . '/protocol.class.php';\nEither way I can't help until I see your code.\n. Single quotes are literal strings in PHP, you need to use double quotes for it to be processed into a newline character\nphp\n\"\\n\"\n. Code?\n. Maximum execution time means you need to increase sleep timeout using \nphp\nset_time_limit(0);\n. Nope, haven't merged @mgp25's latest pull requests into my fork. I'll do it later today.\n. Line 2545? https://github.com/venomous0x/WhatsAPI/blob/master/src/whatsprot.class.php#L2545\nDownload latest code and try again.\n. Don't use $wa->login()\n. Please, the 6-digit confirmation code is not your WA password.\n. https://github.com/shirioko/WART\n. Probably.\n. Install FFMPEG\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/func.php#L120\n. Looks more like you messed up, your $w is apparently not a WhatsProt object.\nCan you post the code you're trying to use?\n. Set $autoReceipt to false in pollMessage or pollMessages\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/whatsprot.class.php#L481\n. It allows you to provide your own thumbnail instead of having WhatsAPI auto-generate it.\n. You need to call sendGetGroupInfo to trigger the onGetGroupSubject event\n. U WOT M8\n. Yes it's a very super duper secret kept for many generations.\nMake sure you're using the latest code.\n. Context=background allows you to sync up to 4 times per hour, Interactive & Registrations is limited to 50 times per hour. If you exceed those limits you will receive the back-off error\n. Remind me again why we're having python troubleshoot in a PHP repository?\n. Received media file URLs only have a limited lifetime so people won't use WhatsApp as an image upload service.\n. I'll try using progressive reading instead of buffered reading, that should make it more efficient\n. Older versions of WhatsApp don't work anymore as they are rejected by the server. Sniffing WhatsApp registration traffic is just not possible on Android anymore.\n. I'm pretty sure this is a duplicate, but I can't seem to find the old issue.\nAnyway, not possible.\n. Am I sure??!!??!\nYes!!!!!! \nI am very sure!?!?!\nThere is no way to query who added you to their contacts, just as there is no way to retrieve a list of your contacts from the server.\n. Maximum execution time exceeded has nothing to do with WhatsAPI, it's a time limit set by PHP. Use\nphp\nset_time_limit(0);\n. No. Fix your own script instead.\n. * poof *\nIt's gone\n. Looks like your outbound port 443 is blocked. Try 5222 instead\n. @mgp25 calm your tits.\n@niqash no.\n. No you can't get group chat history from server. You'll have to log all received messages and build your own conversation history.\n. You seem to be confused. An API only provides access to a service, which WhatsAPI does perfectly fine. Whatever the server/service does with your service access behavior is beyond the scope of this project and cannot be regulated/fixed by changing WhatsAPI code, only by either changing your sending behavior or changing server code.\n. Not possible.\n. API is working fine. Your account is not working.\n. I want to know how after all this time you still think this is a message board/forum\n. Only one way to find out\n. Use the media message event handlers to receive media messages.\n. https://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\nonGetImage, onGetVideo etc.\n. What the fuck is WRAT\nSent from my Windows Phone\n\nFrom: rajenpal033mailto:notifications@github.com\nSent: \u200e12-\u200e11-\u200e2014 07:51\nTo: venomous0x/WhatsAPImailto:WhatsAPI@noreply.github.com\nCc: Max Kovaljovmailto:maxkovaljov@outlook.com\nSubject: [WhatsAPI] Checking existence of WhatsApp Number not working properly (#1028)\nHello,\n@shirioko as you have developed WRAT so I'm asking you, I have been using both WhatsAPI and WRAT but in case of WhatsAPI for some numbers which is already in whatsapp are showing as incorrect status while checking for the existence on the other hand WRAT showing status ok and receiving the password from whatsapp. What's wrong?\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/1028\n. This line should actually be removed. It fetches the received messages without processing them so the messages will be lost.\n. ",
    "udnisap": "the url https://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=[cc]&me=[own]&u=[other] is the same? I check now and returned not found \n. ",
    "celevra": "i can confirm that it is working\n. No twice Wlan mac (en0)\nmd5(macmac)\nAm 12.09.2012 um 18:44 schrieb \"Zmaster\" notifications@github.com<mailto:notifications@github.com>:\nso its md5(reverser udid)?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/43#issuecomment-8501040.\n. yes but getting disconnect without a message is a problem too.\nIt would be possible to reconnect 3 times and giving up after that, but for that i must get a message...\n. ok i've change the code a little bit in my own version\ni've added \ncase \"/connect\":\n                                echo \"[] trying to reconnect: \\n\";\n                                $wa->Connect();\n                                $wa->Login();\n                                echo \"[] connected\\n\";\n                                break;\nto the switch-case in whatsapp.php\nto get only the disconnect message i've changed the processInboundData function in whatsprot.class.php\ndirect under the DebugPrint i removed the output from $node->NodeString and added this:\nlibxml_use_internal_errors(true);\n                try {\n                        $xml = simplexml_load_string($node->NodeString(\"\"));\n                        if ($xml->text == \"Replaced by new connection\")\n                        {\n                                echo \"[] logged out\\n\";\n                        }\n                } catch (Exception $e) {\n                        //do nothing\n                }\nso now i get a nice disconnected message and can manually reconnect\ni've also changed the incomming messages and added a switch to record names/number mappings, so i can start the interactiv mode and could send messages like '@roboter hi, how are you' and in the same window typ '@christina are you there tonight?' i thought about to share the code, but i thing its not high quality like this class... and it don't want to get negativ feedback how ugly my code is...\n. ",
    "rickyho1555": "Yes, I only can send ENGLISH\n. I found the reason, but still cannot be solved, because the image data with icon, and the icon is used base64_encode() method to encode, so cannot decode automatically and appear ERROR when run PollMessage().\nIs there a solution?\nSorry for the bad english......\n. ",
    "spookyman": "that explains alot :D \nso would be an automated reconnect be a solution for this (i'll not call it issue any longer) :D\n. @celevra very good idea - having an definable auto reconnect (maybe with a defineable delay between the attempts).\nthe new version of the whatsapp.php (xml) reports the disconnection !!\n. yep - i can ack that ! login brogen \ntx  \nPHP Notice:  Undefined property: WhatsProt::$challengeArray in /home/me/test/WhatsAPI/src/php/whatsprot.class.php on line 119\n. any idea on how to fix this issue ?\n. well maybe it's a algorythm depending on unixtimecode (another idea!?)\ncan someone give me the place in the php code where i find the magic byte setting ?\n. i didn't get an update the last days  and it still works on my mobile\n(using Android ICS)\n. the problem in \"sniffing\" will be the ssl protocol - so you just get encrypted packets ...\n. i guess if i root my android i'D be able to install fake certifikates, too (maybe an interesting thing - hu) and fake a https server on the other side - so you could get the first packets\n. nah, getting the same error @jb425 \n. src/php/protocol.class.php line #339\nbut it doesn't work @jean151515 \nit has to be the right magicbyte\n. what about the last both x00 and x19 ?\n. actually, i don't know - but why shouldn't they matter ?\n. if i set to x01 x01 x01 x19 \nill gett this error:\nrx  stream:error\nrx    \nrx  /stream:error\n. rx    xml-not-well-formed xmlns=\"urn:ietf:params:xml:ns:xmpp-streams\"></xml-not-well-formed\n. just to be sure:\nchanging the wa version in hatsprot.class.php doesn't help either.\n\nany idea fpr a mitm attack for the wa protocol ?\n@jean151515  suggestet to use an old nokia which asks to accept an insecure ssl cert. \nmaybe that could be the way - or maybe with an rootet android ?\n. another thought to the last magbic byte:\ni found the following in the \"php/decode.php\"\n$dic[19] = \"basee64\";\n$dic[41] = \"DIGEST-MD5\";\n$dic[42] = \"DIGEST-MD5-1\";\nno matter what nr. you are using - except for 19 you get the error \"xml-not-well-formed\"\nso i \"GUESS\" that 19 is still correct for the last part !\n. @kerby82  are you able to deliver me a full sniff (wireshark f.e.) of the iphone starting (incl. whatsapp starting) ?\n. im interested in what @Currito  says ... i didn't play around with the decoding yet ... so some more information would be great@ currito\n. as it looks like - the guys from http://www.wazapp.im/ fixxed the proto 1.2 yet ?\ncan anyone confirm ?\n. @waninkoko - if you send me your code, i can have a peek with my crdntls (android)\n. hey guys, found this on the yappari forum - maybe it's a help for some of the wiser guys here \nReading roster DB...\nRoster retrieved in 6 milliseconds.\nYappari 0.0.25 Build 2455\nYappari console test client start\nNetwork connection changed: Online\nCurrent active connection: a19c3549-87f0-4ce0-9c4d-5ee926adaee3\nRegistration started\nCountry code: US\nreg/req/exists/start\nIMEI: xxxxx\nRequest: https://r.whatsapp.net/v1/exist.php?cc=1&in=4847166080&udid=18a0775a7d6f056ae551af398e645cd&\nNetwork activated: a19c3549-87f0-4ce0-9c4d-5ee926adaee3\nNetwork activated: a19c3549-87f0-4ce0-9c4d-5ee926adaee3\nReply: <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n\n\nX-Powered-By: PHP/5.3.5\nContent-Type: text/xml\nConnection: close\nTransfer-Encoding: chunked\nDate: Thu, 01 Nov 2012 09:29:29 GMT\nServer: lighttpd/1.4.28\nreg/req/exists/fail: incorrect\nUser 1xxxxxxxxxx is not registered.\nreg/req/self/start\nIMEI: xxxx\nRequest: https://r.whatsapp.net/v1/code.php?cc=1&in=0000000000&to=10000000000&lg=en&lc=US&mcc=310&mnc=260&method=self&imsi=310260911209291&token=7ea8adc22f1f1afca09999b8046bb770&udid=18a0775a7d6f056ae551af398e645cd&\nNetwork activated: a19c3549-87f0-4ce0-9c4d-5ee926adaee3\nNetwork activated: a19c3549-87f0-4ce0-9c4d-5ee926adaee3\nReply: <?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n\n\nForum: http://talk.maemo.org/showthread.php?t=84605&page=213\n. @waninkoko  so is it working now for the login part ?\n. WA down 4 me at the moment ! (on my mobile !!)\n. seems to be up again - try your code once again m8s\n. @tribbolo  you got a working version ? could you send me please ? \nthe disconnect is completely okay, since whatsapp only allows one connection per user !\n. so someone getting connect and can read msgs already ?\n. yes, it's 1.1 \n. @saschagehlich  ... a few posts up @beldar  kicked the authentication i guess ... \n. and also get the note from @SikiFn  - he says  that all the traffic on the ssl must be encrypted\n. theres still an issue with receicing can (see other issues)\n. i can't receive messages  - it throws exception:\n(using whatsapp.php in test directory) \n- snip - \n  PHP Fatal error:  Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 191' in /dir/WhatsAPI/php/protocol.class.php:268\n  Stack trace:\n  #0 /dir/WhatsAPI/src/php/protocol.class.php(214): BinTreeNodeReader->readListSize(191)\n  #1 /dir/WhatsAPI/src/php/protocol.class.php(133): BinTreeNodeReader->nextTreeInternal()\n  #2 /dir/WhatsAPIsrc/php/whatsprot.class.php(150): BinTreeNodeReader->nextTree('??$?%?{g?????M-...')\n  #3 /dir/WhatsAPI/src/php/whatsprot.class.php(226): WhatsProt->processInboundData('??$?%?{g?????M-...')\n  #4 /dir/WhatsAPI/tests/whatsapp.php(106): WhatsProt->PollMessages()\n  #5 {main}\n  thrown in /dir/WhatsAPI/src/php/protocol.class.php on line 268\n- snip - \n. same problem here - \n. i can receive messages (sometimes) but the most time i got kicked out with the above error ... I don't really get, why it happens ... \n. see #142 and #126 - they changed protocol to version 1.2 so there are a lot of things to do - still - since 1.2 is implemented since yesterday evening \n. me 2 !! ;D\n. i guess there is still some major bug in the whatsapp.php (or the protocols) - even receiving messages is killing the php process (see the other issues !)\n. which line is it in which file ?\n. ",
    "felipemattos": "Running thru the same issue here.\nI've tried to use stream_context_set_default globally before any include/call/instantiate - my corp uses a basic bluecoat proxy without authentication\n\n$aContext = array(\n   'http' => array(\n   'proxy' => 'tcp://proxyhost.corp:3128',\n   'request_fulluri' => true,\n),\n);\nstream_context_set_default($aContext);\n\nBut it doesnt work, I am getting:\n\nWarning: fsockopen() [function.fsockopen]: unable to connect to c.whatsapp.net:443 (A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. ) in /development/no-app/www/projects/wpgtw/lib/src/whatsprot.class.php on line 377\nFatal error: Maximum execution time of 30 seconds exceeded in /development/no-app/www/projects/wpgtw/lib/src/whatsprot.class.php on line 377\n\nHas anyone got any lucking running the API thru a proxy?\n. hello guys, any luck on this? \nI am also looking for a way to not pull messages every time I send one out. \n. @mgp25 thank you. I am actually using this code, will migrate to WhatsAPI-Official then. \n. ",
    "Timespace7": "Thank you!\nIt works like a charm! :D\n. Here is my testing.\nFirst, I turn off the network of my phone which Whatsapp installed in and send several Whatsapp messages to my whatsapp number through WhatsAPI. I have tried PollMessages() once only. It seems to poll only the latest message stored in server. After that, I call this PollMessages() again but no messages comes in.\nCould you explain more about PollMessages()? It polls all the non-received messages or only the latest non-received messages from the server?\n. I'm afraid that this project is being cancelled....\n. Hope this project can be continued! This project is awesome!\n. I wonder how to use RequestLastSeen...\nDoes this function return the time of Last Seen? but How to receive the time? \n. After Whatsapp updates to 2.8.9108, whatsapi cannot work with number...\nAnyone figure out the new Password?\n. Does Whatsapp in iOS face this problem? (Updated to change the password method)\n. How many messages have you sent so that they blocked you?\n. 10,000 msgs per day? Or an account that sent 10,000 msgs will be blocked?\nHow do you know that your account is blocked? Whatsapp.Inc sends you a email?\n. A number will be blocked after sending 19 messages?\nSending messages in official WhatsApp client will block the number too?\n. @spnvcn 2000 different numers? Have you verify that the numbers you sent are registered as whatsapp user?\nAs different people show different limit (3 to 150), I guess an number will be blocked once it sends messages to a unregistered number.\n. ",
    "lnxa": "see WhatsAPI / src / php / testprotocol.php\nLine: 24 \n$w->MessageImage(time() . \"-1\", \"***********\", \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.jpg\", 55508, $icon);\n. @cdesjardins Is the image size really 9999? => No. \n``` php\n$iconfile = \"thumb.jpgb64\";\n$fp = fopen($iconfile, \"r\");\n$icon = fread($fp, filesize($iconfile));\nfclose($fp);\n$w->MessageImage(time() . \"-1\", \"*****\", \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.jpg\", 55508, $icon)\n```\nI tried default testprotocol.php and it was the same.\n. Resolved (use real file size).\n. ",
    "javitolin": "I can't make it work for hebrew characters? is there anything I need to change?\n. Hi! I reverse engineer the new version of whatsapp. Do you have a tip to\nhow I could find the new algorithm?\nThanks!\nOn 28 November 2012 08:20, MartinGraws notifications@github.com wrote:\n\nif you installed the last build (37716) logging method or password\ngeneration method CHANGED and you won't be able to connect anymore unless\nyou reverse engineer whatsapp to find out the new algorithm\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/191#issuecomment-10792091.\n. Could you give me a link to a tut or sthg about sniffing? I'm new to it..\n\nOn 30 November 2012 08:16, MartinGraws notifications@github.com wrote:\n\njavitolin; reverse engineer is not trivial, actually it requires lot of\ndedication and is a very complex process... What you can do is sniff the\npackets of your cellphone and then try to decode them and find out the new\npassword algorithm, that is a thousand times easier than try to reverse\nengineer Whatsapp.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/191#issuecomment-10879716.\n. Is there a problem with the servers and/or host of whatsapp when using the new version?\nAlso, the new password algorithm is the same as the old one, md5(reverstring(YOUR_IMEI))\nThanks!\n. Well the program isn't working any way, there is a problem with the\nserver/host setting of whatsapp in the php\nbut anyway the password is the md5 code of the reverse of your IMEI, if you\nare using android.\nif you are using iphone, then i'm sorry but I have no idea..\nyou can try it here:\nhttps://r.whatsapp.net/v1/exist.php?cc=&in=&udid=https://r.whatsapp.net/v1/exist.php?cc=972&in=546711843&udid=fa445c81e6a605e41ca8d657156c9b72the\npassword\nif you get:\n\n\nthen your are OK.\nif not, recheck.\nfor the md5 code:\nhttp://www.md5.cz/\ndont forget to reverse the IMEI\ngood luck!\nOn 29 November 2012 02:46, alsebawe9999 notifications@github.com wrote:\n\nPlease help\nPlease explain how to use the program\nI did not know how to access my account\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/195#issuecomment-10830289.\n. I don't know, this version is pretty new...\nOn Dec 7, 2012 2:46 PM, \"jonnywilliamson\" notifications@github.com wrote:\nREALLY?\nNone of the other 20 threads/issues right underneath your topic\nhighlighted this issue before?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/214#issuecomment-11128945.\n. \n",
    "patschi": "Won't work for me... Tried all combinations - The group didn't got any message...\n. Because the name will be read out from the contacts from the smartphone.\n. Did you sent the message to yourself?\n. Yes, I did it too and saw my own number. My friends (who got spammed from me :D) saw my name, which they saved in their contacts.\n. Are you still writing with them? Maybe you can find an agreement with them. Example you only give access to the source, who applies a short application before. If he spams (when whatsapp inc. says it to you) you can disable the access for this person. Just an idea... This API is very great, I'm using it on my homepage: When I get a PM there, I'll get an WhatsApp message too :) And I get an Whatsapp-message, when there's a new steam sale too :D\nThanks for all your good work! :)\n. Did you used the $w->setNickname() command? If yes, you should put it after Connect() and Login().\nI got such an error too, when I wrote the command before the two functions.\n. Reading will help...\nhttps://github.com/venomous0x/WhatsAPI/blob/master/README.md\n. Yes, that would be nice! :)\n. Could you post an example usage? Don't know what I have to enter as $msgid.\nThank you for this code! :)\n. Yes, a code-snippet to read all incoming messages would be really nice :)\nIt isn't very easy to parse it from all that many messages, which the API transfers :)\n. Just sniff the network to know what WhatsApp is sending to which IP. Like Wireshark for Windows.\n. I think you mean a function to read out the \"last seen\": RequestLastSeen($msgid, $to)\n. ",
    "yairnet": "need add the if  on  protected function SendMessageNode\nwork good :O\n. work :+1: \n. any can help me i cant downlod source\n2012/9/22 Hack0x notifications@github.com\n\nI do not use the command $w->setNickname() or I can not find it. What\nshould I do?\nSorry for my bad English.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792055.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n057-9009001 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d1\u05e4\u05d9\u05d9\u05e1\u05d1\u05d5\u05e7 http://www.facebook.com/muisrael\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. any can help me to setting/conig pages i can pay PayPal\nmy whatsapp number +972579009001\n2012/9/22 Hack0x notifications@github.com\n\nHere: http://forum.xda-developers.com/showthread.php?t=1891930\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792288.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. USAGE: [-l] [-s ] [-i ] phone: full number including country code, without\n'+' or '00' -s: send message -l: listen for new messages -i: interactive\nconversation with\nPage test give this...\n\u05d1\u05ea\u05d0\u05e8\u05d9\u05da 22 \u05d1\u05e1\u05e4\u05d8\u05de\u05d1\u05e8 2012 23:05, \u05de\u05d0\u05ea YairNet abcyair@gmail.com:\n\nany can help me to setting/conig pages i can pay PayPal\nmy whatsapp number +972579009001\n2012/9/22 Hack0x notifications@github.com\n\nHere: http://forum.xda-developers.com/showthread.php?t=1891930\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792288.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. I am getting Wrong Password\nI need to take the IMEI of my iphone?\n2012/9/22 YairNet abcyair@gmail.com\n\nUSAGE: [-l] [-s ] [-i ] phone: full number including country code,\nwithout '+' or '00' -s: send message -l: listen for new messages -i:\ninteractive conversation with\nPage test give this...\n\u05d1\u05ea\u05d0\u05e8\u05d9\u05da 22 \u05d1\u05e1\u05e4\u05d8\u05de\u05d1\u05e8 2012 23:05, \u05de\u05d0\u05ea YairNet abcyair@gmail.com:\n\nany can help me to setting/conig pages i can pay PayPal\nmy whatsapp number +972579009001\n2012/9/22 Hack0x notifications@github.com\n\nHere: http://forum.xda-developers.com/showthread.php?t=1891930\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792288.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. can run on linux or only windows XMPP\n2012/9/22 YairNet abcyair@gmail.com\n\nI am getting Wrong Password\nI need to take the IMEI of my iphone?\n2012/9/22 YairNet abcyair@gmail.com\n\nUSAGE: [-l] [-s ] [-i ] phone: full number including country code,\nwithout '+' or '00' -s: send message -l: listen for new messages -i:\ninteractive conversation with\nPage test give this...\n\u05d1\u05ea\u05d0\u05e8\u05d9\u05da 22 \u05d1\u05e1\u05e4\u05d8\u05de\u05d1\u05e8 2012 23:05, \u05de\u05d0\u05ea YairNet abcyair@gmail.com:\n\nany can help me to setting/conig pages i can pay PayPal\nmy whatsapp number +972579009001\n2012/9/22 Hack0x notifications@github.com\n\nHere: http://forum.xda-developers.com/showthread.php?t=1891930\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792288.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. Aplle Iphone i see IMEI from About I write and get Wonrg Password must\nconvert it to MD5?\n2012/9/22 Hack0x notifications@github.com\n\nHave you got a Android smartphone? If yes, then the keyboard give a * # 06\nand enter the IMEI number in the pre-script.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792597.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. i am use apache its not good?\n2012/9/22 Hack0x notifications@github.com\n\nXAMPP for Linux:\nhttp://www.apachefriends.org/download.php?xampp-linux-1.8.0.tar.gz\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792613.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. how i see my MAC ?\n2012/9/22 Hack0x notifications@github.com\n\nIf you have an iPhone, then enter the Mac adress in the pre-script.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792642.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. -> General -> About. Scroll down that screen and you\u2019ll see a setting\ncalled \u201cWi-Fi Address\u201d, that is your iPhone MAC address.\n2012/9/22 YairNet abcyair@gmail.com\n\nhow i see my MAC ?\n2012/9/22 Hack0x notifications@github.com\n\nIf you have an iPhone, then enter the Mac adress in the pre-script.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792642.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. nice i can send msg to my groups ?\n2012/9/22 Hack0x notifications@github.com\n\nthats wrong!\nWithout + like this:\n$nickname = \"WhatsAPI Test\";\n$sender = \"972579009001\"; // Mobile number with country code (but\nwithout + or 00)\n$imei = \"F0:CB:A1:6A:9D:9C\"; // MAC Address for iOS IMEI for other\nplatform (Android/etc)\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792728.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n.   will work forever or that Whatsapp block?\n2012/9/23 Hack0x notifications@github.com\n\nNo, you can only send message to one people like private chat not to\ngroups.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792749.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. you know how i send msg in hebrew lang?\n2012/9/23 Hack0x notifications@github.com\n\nOnce a Whatsapp account is hacked, this can not be blocked.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792807.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n.  [_data] => \ufffd\nno work hebrew way?\n2012/9/23 YairNet abcyair@gmail.com\n\nyou know how i send msg in hebrew lang?\n2012/9/23 Hack0x notifications@github.com\n\nOnce a Whatsapp account is hacked, this can not be blocked.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792807.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. yes\nhttp://en.wikipedia.org/wiki/Hebrew_language\n2012/9/23 Hack0x notifications@github.com\n\nhebrew?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792924.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. Have you seen anyone talking about this?\n2012/9/23 Hack0x notifications@github.com\n\nMhh... I don\u00b4t no.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792958.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. https://github.com/venomous0x/WhatsAPI/issues/52\n\u05d1\u05ea\u05d0\u05e8\u05d9\u05da 23 \u05d1\u05e1\u05e4\u05d8\u05de\u05d1\u05e8 2012 00:28, \u05de\u05d0\u05ea YairNet abcyair@gmail.com:\n\nHave you seen anyone talking about this?\n2012/9/23 Hack0x notifications@github.com\n\nMhh... I don\u00b4t no.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792958.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. its work!\ntank you all\n2012/9/23 YairNet abcyair@gmail.com\n\nhttps://github.com/venomous0x/WhatsAPI/issues/52\n\u05d1\u05ea\u05d0\u05e8\u05d9\u05da 23 \u05d1\u05e1\u05e4\u05d8\u05de\u05d1\u05e8 2012 00:28, \u05de\u05d0\u05ea YairNet abcyair@gmail.com:\n\nHave you seen anyone talking about this?\n2012/9/23 Hack0x notifications@github.com\n\nMhh... I don\u00b4t no.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/84#issuecomment-8792958.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. thx :|\n. I do not send SPAM\nI send important messages to my number and important to me that everything will\n.  yuvadm \nYou can answer in English simpler\ntank you\n. I made a script to send 50 messages echo the message is a number 1 .. 2 ..\n3 ... When a message has not come I did not get an error if this is what\nyou asked\n2012/9/24 ralphmyw notifications@github.com\n\nHi yairnet,\nYou said \"For example, 50 messages sent only 47 were successfully ...\",\nwould I know how you check if the message is delivered? Are you checking\nthe message receipt?\nI am trying to check the receipt but it seems it come back in a random way\nand the response rate is quite low. (e.g. 10 msg but only 1 or 2 come back\nfor my case). I am sure that all the 10 messages are being sent (as i am\nsending to my own account). Do you share how you check the msg delivery\nstatus?\nThanks,\nRalph\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/85#issuecomment-8806249.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n052-6779005 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. ralphmyw: Your example is only sending the first message - why?\n yuvadm:  This code is different?\n. I just turn a few times in succession PHP to send messages sometimes  certain messages do not reach the sights of PHP (connect to server whatsapp) returns no error\n. You have the option to give me this code?\n. i can pay\n. You use it code published here?\nThat through your site more quickly messages are sent\nInteresting\n2012/9/24 kurosch notifications@github.com\n\nyou ported the code to nodejs could you make that node public?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/89#issuecomment-8814010.\n\n\n\u05ea\u05d5\u05d3\u05d4 \u05de\u05e8\u05d0\u05e9 , YairNet\n\u05de\u05e0\u05d4\u05dc \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d5\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1-\u05e1\u05e8\u05d1 ,\n03-6195560 \u05de\u05e9\u05e8\u05d3\n057-9009001 \u05e0\u05d9\u05d9\u05d3\n\u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd:\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il\n\u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc \u05d1\u05e4\u05d9\u05d9\u05e1\u05d1\u05d5\u05e7 http://www.facebook.com/muisrael\n\u05e4\u05d5\u05e8\u05d5\u05dd \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.forum.muonline.co.il\n\u05de\u05db\u05ea\u05d1 \u05d6\u05d4\u05d1 \u05d0\u05de\u05d9\u05d5 \u05d9\u05e9\u05e8\u05d0\u05dc www.muonline.co.il/client/pop.html\n\u05dc\u05d9\u05e0\u05d5\u05e7\u05e1\u05e8\u05d1 www.linuxserv.co.il\n. can fix hebrew lang?\n. I think the only problem login server\nTemporary setback course\n. me same problem\n. same problem\n. send  working groups  in last update?\n. Send group work?\n. Send group work?\n. ???\n. I have tried\n. FIX = https://github.com/venomous0x/WhatsAPI/issues/238\nthx\n. When I run the MissVenom\nWhatsapp install new\nRegisters the phone number to receive a password / authentication\nThe device writes to me: Connection fails check you are connected to the Internet + device will reboot\nGalaxy 4\n. Thank you dear man!\ni need to wait Programmers have to   fix the bug?\n. MissVenom work on IPHONE?\n. Start BlueStacks work?\n. After I finished and I have a password\nHow do I get Imei never used this number smartphone\n. ",
    "shargon": "All Is working ;)\n. send me a private msg to: shargon@gmail.com\n. Protocol for registration its the same, but server, dont send anything... in two versions\n. need register with the api v2, not v1.....\nbut now I think the protocol has changed, so even then you will have registered an account you can`t use\n. The server dont send me anything and close the connection with valid user and password, and all working yesterday\n. The problem is the WhatsApp Api Net... is not work?? \nphp works fine now... but i re-register my phone\n. Im writing a .net api . In two days its done\nEl 02/01/2013 18:50, \"kingk110\" notifications@github.com escribi\u00f3:\n\n@shargon https://github.com/shargon did you find any solution to the\n.net api to make it work ??\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/239#issuecomment-11817054.\n. Jajaja yes... My english is jot very good ^.^...will be done in two days...\nOr less\nEl 02/01/2013 18:59, \"kingk110\" notifications@github.com escribi\u00f3:\nDo you mean it will be done after 2 days?? Because it seems that your\nEnglish is not good\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/239#issuecomment-11817356.\n. Yes. Im interesting. Send me a email to shargon@gmail.com\nEl 05/01/2013 09:01, \"ganySA\" notifications@github.com escribi\u00f3:\nI would be happy to pay for someone to write a nice API for .NET there\njust seem to be too many unsupported, half finished or just slapped\ntogether ones.\n@shargon https://github.com/shargon: maybe you are interested?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/239#issuecomment-11911399.\n. \n",
    "dominikwille": "you can start it in the php command-line ;)\n. well i found something out about the registration-process... but it doesn't work to me yet...\nhttp://talk.maemo.org/showthread.php?t=82384\n. And where did you get that from?\n. ",
    "ghostonwire": "use it like this: for sending\nStart -> CMD\nphp c:\\yourpath\\tests\\whatsapp.php -s 1112233123 \"Here is my Text\"\nThis was an example for sending a Message to 1112233123\n. try to put a sleep(1) between both send requests.\n. ",
    "ohh2ahh": "WOW! Thanks you for your quick help! I used Terminal.app on Mac OS X and it worked!\nThere's only one problem: It doesn't show the nickname on the push notification on my iPhone. Only my phone number.\nHow can I fix that?\n. @sixbeat Try editing whatsapp.php on line 3. I had the same error with relative paths.\nReplace\nphp\nrequire \"../src/php/whatsprot.class.php\";\nwith\nphp\nrequire \"/Users/joel/Downloads/venomous0x-WhatsAPI-256dfca/src/php/whatsprot.class.php\";\n. ",
    "joelfischerr": "Hmm. I'm getting an error:\nWarning: require(../src/php/whatsprot.class.php): failed to open stream: No such file or directory in /Users/joel/Downloads/venomous0x-WhatsAPI-256dfca/tests/whatsapp.php on line 3\nFatal error: require(): Failed opening required '../src/php/whatsprot.class.php' (include_path='.:') in /Users/joel/Downloads/venomous0x-WhatsAPI-256dfca/tests/whatsapp.php on line 3\njoels-imac:~ joel$ \nThanks for your help :)\n. Hey\nThe nickname is the name shown on the device, the sender is your mobile phone number with country code. For switzerland it would look like this 41791111111. The imei depends on what device your using for whatsapp.\nThen you need a local webserver like Wamp. You copy all the files into the \"server\". Them you type this into Terminal or command line \"php path/to/whatsapi.php -s 41791111111 \"Message\"\"\nI hope it works :)\nJoel\nSent from my iPad\nOn Oct 1, 2012, at 5:19 AM, sewan notifications@github.com wrote:\n\nI am not an expert programmer and download the API and I think to send a simple message to another cell. Should I use \"tests \\ whatsapp.php\"?\nShould I edit these lines?\n$ nickname = \"\";\n$ sender = \"\" / / Mobile number with country code (but without + or 00)\n$ imei = \"\" / / MAC Address for iOS IMEI for other platform (Android / etc)\nI tried the \"test\" with \"appserv\" and says:\n\"USAGE: [-l] [-s] [-i] phone: Including full number country code, without '+' or '00 '-s: send message-l: listen for new messages-i: interactive conversation with\"\nPS: I tried to send a message to myself\nWhat am I doing wrong?\n\u2014\nReply to this email directly or view it on GitHub.\n. Hmm, It doesn't work for me, and I am pretty sure I am doing something wrong.\n\nSent from my iPhone\nOn 07.10.2012, at 14:42, gerswin notifications@github.com wrote:\n\nCheck testprotocol file inside php scr \nEnviado desde mi iPhone \nEl 07/10/2012, a las 07:23, sixbeat notifications@github.com escribi\u00f3: \nHello \nI have no idea how to send an image. \nSending messages works fine with the terminal on mac. \nBut how do I send an image? \nSorry for the bad english :/ \n\u2014 \nReply to this email directly or view it on \nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/107.\n\u2014\nReply to this email directly or view it on GitHub.\n. Now I'm getting this error:\n\nWarning: socket_read(): unable to read from socket [54]: Connection reset by peer in /Users/joel/Mamp/src/php/whatsprot.class.php on line 140\n. ",
    "CharlieCorner": "@sixbeat I think it's something with the test class (whatsapp.php) not finding whatsprot.class.php, are you sure it's there? If it is, check if your working directory is relative to whatsapp.php since whatsprot.class.php is called like this:\n../src/php/whatsprot.class.php\nRoughly meaning: From this directory, access the parent directory, from there, access src/php/whatsprot.class.php.\n. That's one workaround, albeit a little ugly since you make it kind of \nstatic.\nInstead, change your cmd or terminal or whatever you are using to the \ndirectory where whatsapp.php is. Then run the php-cli interpreter \n(without changing the require line) and now the script should run \nrelative to that directory.\nWhat's the advantage of this approach? That no matter where you place \nyour WhatsAPI folder, it will always run, regardless if you have a \nwhatsprot.class.php under /Users/joel/Downloads/ or not.\nOn 15/09/12 12:43, ohh2ahh wrote:\n\n@sixbeat https://github.com/sixbeat Try editing whatsapp.php in line \n3. I had the same error with relative paths.\nReplace\nrequire  \"../src/php/whatsprot.class.php\";\nwith\nrequire  \"/Users/joel/Downloads/venomous0x-WhatsAPI-256dfca/src/php/whatsprot.class.php\";\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/57#issuecomment-8586896.\n. I've been debugging this whole morning this issue #60 and also noticed that. I'm not sure how to reproduce it, but I've noticed that while debugging, there's something that might be closing the socket when the first call to sendData() is made. I won't be able to check what's going on until later this afternoon. In the meantime it's possible that @venomous0x will log in and check the new Issues. Anybody having any of these issues as well? \n. \n",
    "fanus": "I really want to understand how to use this. I know php but I think my issue is the fact that I am using wamp. Can someone please give a step by step instruction on how to make this work with wamp? If using wamp is too complicated, can someone maybe give a step by step instruction on how to use WhatsAPI in the windows terminal and where to upload the repository files etc.\n. Thanks for the quick response. Exactly what I was looking for. But when I execute step I get a bunch of error messages  and most of them have something to do with the https wrapper. One example below:\nPHP Warning:  file_get_contents(): Unable to find the wrapper \"https\" - did you\nforget to enable it when you configured PHP? in C:\\wamp\\bin\\php\\php5.3.13\\whatsa\npp.php on line 45\nP.S. I put all my whatsapi php files into my wamp's php folder just to make the file locations in the php files simpler. Maybe this is where I made a mistake?\n. My php.ini extensions look like this:\n;extension=php_bz2.dll\n;extension=php_curl.dll\n;extension=php_dba.dll\nextension=php_mbstring.dll\n;extension=php_exif.dll\n;extension=php_fileinfo.dll\nextension=php_gd2.dll\n;extension=php_gettext.dll\n;extension=php_gmp.dll\n;extension=php_intl.dll\n;extension=php_imap.dll\n;extension=php_interbase.dll\n;extension=php_ldap.dll\n;extension=php_ming.dll\n;extension=php_mssql.dll\nextension=php_mysql.dll\nextension=php_mysqli.dll\n;extension=php_oci8.dll      \n;extension=php_oci8_11g.dll \nextension=php_openssl.dll\n;extension=php_pdo_firebird.dll\n;extension=php_pdo_mssql.dll\nextension=php_pdo_mysql.dll\n;extension=php_pdo_oci.dll\n;extension=php_pdo_odbc.dll\n;extension=php_pdo_pgsql.dll\nextension=php_pdo_sqlite.dll\n;extension=php_pgsql.dll\n;extension=php_phar.dll\n;extension=php_pspell.dll\n;extension=php_shmop.dll\n;extension=php_snmp.dll\n;extension=php_soap.dll\n;extension=php_sockets.dll\n;extension=php_sqlite.dll\n;extension=php_sqlite3.dll\n;extension=php_sybase_ct.dll\n;extension=php_tidy.dll\n;extension=php_xmlrpc.dll\n;extension=php_xsl.dll\n;extension=php_zip.dll\nAND\necho extension_loaded(\"openssl\");\nRETURNS 1\n. Output of that is:\nArray ( [0] => php [1] => file [2] => glob [3] => data [4] => http [5] => ftp [6] => zip [7] => compress.zlib [8] => https [9] => ftps [10] => phar )\nHope it was what you were looking for. :D\n. Any luck finding a solution for me guys? It is becoming more and more of an demand for me.\n. ",
    "nugasoft": "Can u help me for config the Login params, because I'm using the params:\n$nickname = \"WhatsAPI Test\";\n$sender =   \"52xxxxxxxxxx\"; // Mobile number with country code (but without + or 00)\n$imei =     3xxxxxxxxxxxxxx5\"; // MAC Address for iOS IMEI for other platform (Android/etc) \nbut say Wrong Passwd.\n. ",
    "luizping": "i didn't figured out how to setup my params.\nI insert my phone number into the $sender.\nWhich MAC Address should i use? I am running the PHP script in my Mac Terminal. Should i use my Mac Wifi MAC?\nGive me Wrong Password.\n. Yes. worked.\nnot good idea inlcude that to the method?\n. ",
    "woodisand": "any chance with the new WhatsApp Password mechanism ? \n. ",
    "alaamac": "The only solution now is yowsup \nhttps://github.com/tgalal/yowsup\ni register new number and sent message from this script \n. whatsapp change chat protocol from 1.1 to 1.2\nprotocol 1.2 is harder than protocol 1.1\n. ",
    "jigarsah": "I have setup WhatAPI php files on my WAMP server. But I am not sure how to call whatsapp.php file from browser by providing the required parameter? I am getting 403 Forbidden error while calling from browser. Can any one suggest whether it's possible to call whatsapp.php page from browser or it's mandatory to call it from command line?\nAny help would be much appreciated.\nNote: I am able to call the whatsapp.php using the command line successfully (except that I am getting wrong password error). But more interested to know how to call it from browser. \n. ",
    "ESZIM": "Hi,\nRunning latest code from Faucine:\nAm getting this response:\nroot@isla [/home/earthsta/public_html/wa]# php whatsapp.php -set \"Hey there! I am using WhatsApp\"\n[] Logging in as 'WhatsApp' (27724485924)\nWarning: socket_connect(): unable to connect [110]: Connection timed out in /home/earthsta/public_html/wa/src/php/whatsprot.class.php on line 519\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in /home/earthsta/public_html/wa/src/php/whatsprot.class.php:1265\nStack trace:\n0 /home/earthsta/public_html/wa/src/php/whatsprot.class.php(536): WhatsProt->checkCredentials()\n1 /home/earthsta/public_html/wa/whatsapp.php(41): WhatsProt->Login()\n2 {main}\nthrown in /home/earthsta/public_html/wa/src/php/whatsprot.class.php on line 1265\nroot@isla [/home/earthsta/public_html/wa]#\nAny ideas?\nThanks\nMike\n. ",
    "beatfreaker": "i am getting following error can anyone help me please .... \nWarning: fopen(countries.csv): failed to open stream: No such file or directory\nin C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php on line 1340\nFatal error: Uncaught exception 'Exception' with message 'The prived phone numbe\nr is not valid.' in C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php:1\n263\nStack trace:\n0 C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php(538): WhatsProt->c\nheckCredentials()\n1 C:\\xampp\\htdocs\\whatsapp\\tests\\whatsapp.php(44): WhatsProt->Login()\n2 {main}\nthrown in C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php on line 1\n263\n. Now i am getting following error can you please help me with this ....\nFatal error: Uncaught exception 'Exception' with message 'There was a problem tr\nying to request the code.' in C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.c\nlass.php:1280\nStack trace:\n0 C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php(538): WhatsProt->c\nheckCredentials()\n1 C:\\xampp\\htdocs\\whatsapp\\tests\\whatsapp.php(44): WhatsProt->Login()\n2 {main}\nthrown in C:\\xampp\\htdocs\\whatsapp\\tests\\src\\php\\whatsprot.class.php on line 1\n280\n. i read but i am novice to this so not getting it .... :( .... can u mail me you project(running script)??\n. ",
    "vincenzoflaminio": "I get this error :\nPHP Warning:  fopen(countries.csv): failed to open stream: No such file or directory in /host/Whatsapi/src/php/whatsprot.class.php on line 1340\nPHP Fatal error:  Uncaught exception 'Exception' with message 'The prived phone number is not valid.' in /host/Whatsapi/src/php/whatsprot.class.php:1263\nStack trace:\n0 /host/Whatsapi/src/php/whatsprot.class.php(538): WhatsProt->checkCredentials()\n1 /host/Whatsapi/tests/whatsapp.php(42): WhatsProt->Login()\n2 {main}\nthrown in /host/Whatsapi/src/php/whatsprot.class.php on line 1263\n. Shirioko how can i check if Apache has the right permission?\n. ",
    "draffe": "Hello good evening. my question is the following messages sent through this api but when sending between 20-30 I get error messages on the request code\nHola buenas noches. mi pregunta es la siguiente a enviado mensajes a traves de esta api pero cuando envio entre 20 a 30 mensajes me da error en el request code \n. buenos dias gracias por responder. \nYo solicito el codigo usando esta funcion $w->requestCode('sms', 'VE', 'es'); \nen cuanto me envia mi codigo yo comienzo a usar ese codigo asi.\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$b= $w->registerCode('185862');\n$w->Connect();\n$w->LoginWithPassword($b->pw);\n $w->Message($destinationPhone,$_GET[\"sms\"]);\n  $w->PollMessages();\n. can you please guide me I'm doing wrong?\nme puedes orientar por favor que estoy haciendo mal ? \n. I would like to ask two things.\n1 xq when you send some amount back asks you to authenticate??\n2 other messaging software has an api q are official?\n. Hi Thanks for reply and sorry that trouble.\nI know it's not official wasap my question was referring to if you know if you have any software that official api?\nand another question reviewing your code I see that your password is fixed where you get that password?\nI was receiving the password with registercode\n. and if I did. but I have the same problem when sending me messages over 20 blocks.\nwhich is the function that the connection Plese in whatsprot.class??\n. are you sure these is not going to lock after 20 posts? \n. another question I have to use $ w-> registerCode every time I send a message?\n. I did what you told me and send me the one message the second I did not send message\nlook what I made\n$ w-> Connect ();\n$ w-> LoginWithPassword (\"******\" );\n   $ w-> sendComposingMessage ($ destinationPhone);\n  $ w-> Message ($ destinationPhone, $ _GET [\"sms\"]);\n   $ w-> PollMessages ();\n. sorry :( \nForget it and get ...\n.  shirioko  Muchas Gracias... Thanks soo much\n. hi @shirioko  can you tell me how to get the number that sent the message\n $messages = $w->GetMessages();\n    if(count($messages) > 0)\n    {\n       // session_start();\n        $inbound = $_SESSION[\"inbound\"];\n        //$_SESSION[\"inbound\"] = array();//lock\n        foreach($messages as $message)\n        {\n```\n        $data = @$message->getChild(\"body\")->_data;\n    echo \"<br>\". $data.\"<br>\";\n    if($data != null && $data != '')\n    {\n        $inbound[] = $data;\n    }\n}\n\n```\nwhat is the name of the property?\n. Thanks... you rules\n. shirioko alguna ves te dio este error ????' \nstream:error\n     \nReplaced by new connection\n  /stream:error\n. No, just change the phone number\n. What is the function to send mass messages???\n. I went back to logging in to wasap and resolved. I ask as I send a massive message\n. As sent a diffusion?\n. Hola buenas tardes me gustaria saber si ya tienen alguna solucion para el problema \nque presenta la apis cuando envias entre 20 a 30 mensajes y te vuelve a solicitar \nel requestcode \nmuchas gracias saludos\n. hi i can't  open  https://cert.whatsapp.net\n. no ping to  https://cert.whatsapp.net\n. ",
    "murad1981": "@shirioko  ... (silently promoting my app mwihihihihi ^^) ... LOOL ... is that one available to us ? or could it be available to us ?\n. @shirioko we would love so .. but please leave a comment here after you compile it ...\n. I'm facing the same issue on iPhone, I've tried 3 numbers it gives: status => sent ... but I do not get any SMS !!!  @ shirioko did you manage to solve this big problem ?\n. you already posted two of them here:  https://dl.dropboxusercontent.com/u/68235039/WhatsAppDLL.zip , right ?\nI guess you have to send us the third (more important) one :) now so we could look at it with http://ilspy.net/ ... we may discover something useful ... \np.s. when will you get back home ?\n. I was really desperate not receving any registeration codes through sms until a cool guy posted a 4 steps solution here: https://github.com/venomous0x/WhatsAPI/issues/337 to get the registeration code using voice call method. \nhowever, your WhatSNiff  project does not explain how to set it up for a jailbroken iphone.\nwe do really appreciate your efforts about this problem, if you got something new, please inform us here.\n. that's ok .. take your time ..\n. the problem is that the whole thing of sending a registration code not working, it gives status => sent but i do not receive SMS messages, the issue here: https://github.com/venomous0x/WhatsAPI/issues/335 is still open and still no body could find what is the reason or how to solve the problem.\n. confirmed, the four steps above worked with the same identity ... \n. do not know what's that 'coz I didn't dig into the code ...\n. yes, exactly, you can use 30 sim card credentials with 1 phone ... \nI'm now using What's Api with my number which i'm currently using with what's app on my iPhone which I'm using its wifi address as the identity on what's api :D\n. @shirioko I've tried the code in your fork with this line:\n$w->MessageImage($destinationPhone, 'http://questgarden.com/84/77/7/090712062416/images/Purple%20Mountain%20Magesties.jpg'); in Examples.php\ngave me the same result: the browser keeps loading for about a minute and (on Safari) eventually displays a Request Time-out Error ...\nis there something missing should I add in order to get this thing working ?\np.s. your code works well with text messages.\np.p.s I've tried to call test protocol.php but it gives Call to undefined function getopt() error, because i do not have php 5.3 installed (which this function comes with :( \n. same problem even after adding $w->PollMessages(); right after $w->MessageImage, however, sending a text message with your fork gives this debug info:\n\n\nstart connect\ntx  \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  !Q\u0006\u00d8I%\u00f6a\u001b\u00c7\u00e41O\u007f\u00e2\u2021\u00ab\u00c8\u00ef\u00b8\ntx  \u00b2[\u00c0b\u00ff\nh\u00e0\u201c\u00cfJ\u00c84\u00b9\u00a9\u008f\u00fc[\u00deW,'\u00dd#\u00cd\u201c\\\u00fbs\"\u00e6X\u0006\u00a9+\u00c0.sy\b\u00caW\u001f\u00ea\u00a0\u00b1\nrx  \u00dcW\u00f4ki\u2021\u00a59\u00dd\u0001#:\n\u017dQ/\u201c\u00ff\u008d6\ntx  \nend connectStart loginEnd login\ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    this is a bbbbbb\ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx    \nrx      1367825359-1\nrx      \nrx    \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx  \n\n\np.s. i wonder why  tags do not appear after i insert the comment here, I've added pre & code tags to display but to no avail ...\n. image sending still does not work ... text messages works without problems ... :(\n\n\nWell if you did as I suggested you would be able to see the actual nodes instead of just bodies. Since you view the output in a browser it will process the  as HTML tags so you won't see them unless you put them in a  element.\n\nI can see the tags in my browser, but i meant that I'm trying to display these tags here in this comment editor.\n. yes, that's what im trying, this is the debug info for a local file:\n\nstart connect\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \nC\u0015\u00c2C\u017e.\u00c4\u00be\u201a\u00b7\u00c4\u00fb   Hv\u2030\u00d6\u00e1?\ntx  \u00aa\u2026\u2018\u00a1\u00ee\u00b9O\u20223\u00d6\u2019o\u201a\u00ee\u00ec\u00f7];\u00b0\u2030\u00d6]\u00e7}w\u00bb\u00fdo\u00c7\u000bN\u0081}\u00ea7\u00c8\u00cb\b\u017e\u00edIFt\u00b0\u00df\u008f\nrx  \u000f\u008f(l*\u00ae\u00e1\u00b7!(\u00a3\u00e8\u00b7h\u00d8\u0006h~bC\ntx  \nend connectStart loginEnd login\nFatal error: Call to undefined function mime_content_type() in C:\\Program Files\\Apache Software Foundation\\Apache2.2\\htdocs\\what2\\whatsprot.class.php on line 1214\n500 Internal Server ErrorInternal Server Error\n\nhow the hell can i display the whole tags in this s h i t editor !\nsounds there is something wrong with mime_content_type() function .. \n. unfortunately php_fileinfo extension is unavailable for php 5.2 (which is my installed version), i will update it and try to send a local file and post the result here ASAP.\n. would you tell me how to paste the debug info here with tags so you can see them all as you did above .. everytime i  paste the output and preview it, the editor shows only the bodies ...\n. here is a screenshot for the last two code blocks of the debug info after trying to send a local image:\n\n. here is the full debug info:\n``` xml\nstart connect\ntx  \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \u00beR&\u00c4K\fl\u2014\u00d2\u0081.m\u00e7BG\u00fdU\u00dc3\u0192\ntx  %\u00b3\u00e1v9\u00cb\u0160{\u00e3\u00b2`P\u0016\u2039\u00e4\u001e\u0011^'\u00b3\u00fe\u00a5\u00b2o\u00a1\u00efMMR\u00f8\u001c\u0160\u20ac0\u00fdJ7:#\u00f8<\u00c5\u00d2\u00c4vC\nrx  \u00fc\u00ce\u00bes\u00ba1\u0081\u0005\u001f@w\u00dc\u001e\u00c2\\\u00a2\u00ea'\u00b6=\ntx  \nend connectStart loginEnd login\ntx  \ntx    \ntx  \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    /9j/4AAQSkZJRgABAQAAAQABAAD//gA+Q1JFQVRPUjogZ2QtanBlZyB2MS4wICh1c2luZyBJSkcgSlBFRyB2NjIpLCBkZWZhdWx0IHF1YWxpdHkK/9sAQwAIBgYHBgUIBwcHCQkICgwUDQwLCwwZEhMPFB0aHx4dGhwcICQuJyAiLCMcHCg3KSwwMTQ0NB8nOT04MjwuMzQy/9sAQwEJCQkMCwwYDQ0YMiEcITIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIy/8AAEQgAXABkAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A+f6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAClr2rxl4M/tyz8KXs2raXpFmNEt4VmvZdvmS/MSoAyTwQc9K5bRvBviXw78U9O0W1urS21Rw0lrdsBLCyFGO4Ag5BAI5HWjrYOlzz2irF8siX9wszBpBKwdgMAnPJqvQDCiiigAooooAKKKKACiiigAooooA9I+LLsY/ByFjsHh+3IGeASWz/ACH5V3Vkc/FL4ZE8k6FHk/8AbF68M1PWtQ1j7L/aF08/2WBbeDcANka5wox9TVxPF+vR6jp+oLqUoutOhEFpLtXMUYBAUcehPWmv1/zDp8ihqv8AyGL3/ru//oRqnT5ZHmleSRtzuSzH1JplStENu7CiiimIKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/Z\ntx  \nrx  \nrx    \nrx      1367829792-2\nrx      \nrx    \nrx  \n```\nfrom the last block, there is some error I guess ...\n. ;) that's why I should sleep well at night ... \ni will update php to 5.3 or 5.4 and try videos as well ...\nthanks a million ...\n. I've tried to send an MP4 video (size 1.5 mb), I've placed it locally under demo folder, and when I call: \n$w->MessageVideo($destinationPhone, 'demo/test.mp4');\nthe debug info is:\n``` xml\nstart connect\ntx  \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \u0016\u00a7\u00ef\u001f\u00ba\u02dc\u00f4\u00a5{/\u2021J\u0015|\u00d2\u001a*\u00c1\u00cd)\ntx  \u201e@\u00c1d\u00e6\u0160\u02c6z\u001f#.\u001d\u00fes\u00c3\u0010\"k\u00b9*\u00af\"l\u00f3K|S\u00b86\u00d1\u0178\u00b5T\u00ecO\u008fO5\ufffdE\u00da<\u00c3$\u00d2\u000f\nrx  \ufffd\u00e1\u201a\u2013dJM0K\u00ce9x\u2030\u00c4\u2039&\u00bd^EV\ntx  \nend connectStart loginEnd login\nrx  \nrx  \nrx    \nrx  \nrx  \nrx  \n```\nI have used  shirioko's fork, and tried with/without pollMessages call but I didn't receive the video ... what's the problem ?\nand @shirioko I'm now on my other computer which runs php 5.3 with all required extensions (including php_fileinfo) and reverted back line 1214 to its original syntax like this:\nxml\n$this->_mediafileinfo['filemimetype'] = mime_content_type($filepath);\np.s. image sending works well now.\np.p.s. I have hide my phone number with ****\n. @jonnywilliamson nope look at the last note in my last comment above.\nI'm trying now your video and your modified line .. brb in seconds ..\n. @jonnywilliamson  cool ... I've tried the 1.5 mg video (remotely and locally) and worked perfectly ... but I have to change the size in the if statement each time i upload a video with a different size ...\nanother note, if you test it (for example) for iphone, and the iphone was on standby mode (i.e. the screen is off), then the push notification will tell you that you have received an image not a video and when you open what's app you will notice that it is a video ... this is weird ... but in general it works perfectly ...\n@shirioko if you managed to find a solution when you get back home without having to change the size in \nxml\n    public function MessageVideo($to, $filepath, $storeURLmedia = false)\n    {\n        if ($this->getMediaFile($filepath, 4194304) == true) {\nthat would be great ...\nsmall side question: what is other supported video formats ?\n. well, setting the size to 20 mg is a good idea ... \n. awesome ... I'm gonna grab the latest update ;) \n. I've increased the allowed video size in MessageVideo function to 30 MBs, and tried to send a 22 MBs video but it didn't get received, the output was:\n``` xml\nstart connect\ntx  \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \u2014e\u2039>|\u00a5\u0013\u0005t\u00de6~\u00b0N\u0081\u2014t\u00f3\f\u00f6\ntx  \u00e7d\u00fc^\u0153O\u001aj\u00a9M\u00bb\u00f5?C\u00bey\u00ab\u00d5z\u02dc\u00a6\u001f~\u0019\u00e6\u00a3\u0017\u00fa*/\u00ef\u017e\u00f5p\u00b4\u0013\u009d\u00bf\u00b1\u00de\u2014\u2026~\u00a1ph\nrx  \u2030\u0001\u0001C\u00ff\u0019\u00f9\u00e7)P\u00e31Dz\u00a8\u00ec\u00edW\"Q\ntx  \nend connectStart loginEnd login\ntx  \ntx    \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx  \nrx    \nrx  \n```\n@shirioko  do you have any clue for solving this problem ?\n. I have tried many times to send that 22 mb video file and finally it has been sent without any error, but I got shocked when I downloaded it on the destination phone (iphone device), what's app server reduced its size (and quality) to only 6 mb !!!!\n@shirioko did you ever try to use what's app+ ? if yes, do you advise me to remove the original what's app from my phone and start using what's app+ ?\np.s. it sounds it's not available in Apple App Store ..\n. @shirioko can you implement it today (when you get back home as usual :) ) ?\n. awesome ... then post your commit link here (after you do it)  if possible .. a million thanks to you ...\n. cool ... i will give it a try ...\n. and also, does anybody know how to unblock my account ?\n. ",
    "moe988": "please can any buddy help me i am running whatsapp 2.8.7  on iphone\nand whatsapi on php \nthe first thing that 'php' is not recognized as an internal or external command,\ncan i get help\n. ",
    "rohmanahmad": "i got this from respon in ubuntu terminal\nrohmanahmad@rohman-desktop:/var/www/wa2/wa/tests$ php whatsapp.php -s 6287780082010 \"kjahskjdhasd\"\n[] Logging in as 'WhatsAPI Test' (6287780082010)\ntx  stream:features\ntx    \ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx    /w:profile:picture\nrx  /stream:features\nrx  \ufffd\ufffd\ufffdi\ufffds\ufffdL\ufffd\ufffd`\ufffd,\ufffd\ufffd\ufffdvb\ufffd\ufffd\ntx  6h\ufffd@.\ufffdM\ufffd*+X0\ufffd\ufffd\ufffd\ufffd\ufffd\\5#P\ufffdzV\n\ufffdz\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd-Byh\u001f\nrx  \nrx    \nrx  \ntx  \n[] Request last seen 6287780082010: \ntx  \ntx    \ntx  \n[] Send message to 6287780082010: kjahskjdhasd \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    kjahskjdhasd \ntx  \n. how can i get full tutorials for this problem???\npliiissss\n. PHP Fatal error:  Call to undefined method WhatsProt::GetProfilePicture()\ncan you spesific your code... \n. how can i get registered code...\nhelp me\n. What is it mr...\nCan you give me some articles or tutorials\nPada 4 Feb 2014 09.11, \"Max Kovaljov\" notifications@github.com menulis:\n\nJust use WART ffs\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/401#issuecomment-34041720\n.\n. can you give me how to get username and password in whatsapp or getting\nregistered user....\ni new in android.\n\n2014-02-04 Max Kovaljov notifications@github.com:\n\nThen why did I bother creating a GUI?\nhttps://github.com/shirioko/WART\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/401#issuecomment-34041966\n.\n. on \n....\n$wa->loginWithPassword($password);\n....\nhow can i get password in this... by my phone number\n. i've got this sir\nWarning: fopen(countries.csv): failed to open stream: No such file or\ndirectory in /var/www/wa1/WhatsAPI/src/php/whatsprot.class.php on line\n1423\n\nFatal error: Uncaught exception 'Exception' with message 'The prived\nphone number is not valid.' in\n/var/www/wa1/WhatsAPI/src/php/whatsprot.class.php:188 Stack trace: #0\n/var/www/wa1/WhatsAPI/send.php(13): WhatsProt->codeRegister('212120') #1\n{main} thrown in /var/www/wa1/WhatsAPI/src/php/whatsprot.class.php on\nline 188\n2014-02-06 park23 notifications@github.com:\n\n$username = \"your number\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"nick name\", true);\n$result = $w->codeRegister(\"sms code\");\n$password = $result->pw;\necho \"Password is $password\";\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/552#issuecomment-34298788\n.\n. i got erros again sir\nthis my script :\n<?php\n require 'src/php/whatsprot.class.php';\n/\n    $sender =   '628778008...';\n    $imei   =   '356406050159770';\n    $nickname= 'ROHM4N';\n    $identity = urlencode(md5($sender . $imei, true));\n    $password= '';\n    $debug= true;/\n$username = \"628778008...\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"rohman\", true);\n$result = $w->codeRegister(\"212120\");\n$password = $result->pw;\necho \"Password is $password\";\n\n=============error in terminal============\nPHP Notice:  Undefined property: stdClass::$retry_after in\n/var/www/wa1/WhatsAPI/src/php/whatsprot.class.php on line 205\nArray\n(\n    [cc] => 62\n    [in] => 87780082010\n    [id] => %3b%a1%a7w%ad%bew%06%14%19i%aar%0f%04a%185p%03\n    [code] => 212120\n    [c] => cookie\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => stale\n)\nPHP Fatal error:  Uncaught exception 'Exception' with message 'An error\noccurred registering the registration code from WhatsApp.' in\n/var/www/wa1/WhatsAPI/src/php/whatsprot.class.php:210\nStack trace:\n0 /var/www/wa1/WhatsAPI/send.php(13): WhatsProt->codeRegister('212120')\n1 {main}\nthrown in /var/www/wa1/WhatsAPI/src/php/whatsprot.class.php on line 210\n2014-02-06 park23 notifications@github.com:\n\nfile countries not exists , check it\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/552#issuecomment-34300934\n.\n. can you give me sample ????\n\n2014-02-06 Max Kovaljov notifications@github.com:\n\nTurn on debug\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/552#issuecomment-34303400\n.\n. hello mr.\nhow can i get my friend profile picture???\n. Yes sir me too\nPada 22 Apr 2014 14.29, \"ghacproductions\" notifications@github.com\nmenulis:\nHey,\nI tried to update the ProfilePicture with latest version, but nothing\nhappens.\nIs this a known issue?\nGreets\nghac\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/698\n.\n. \n",
    "aelsawi": "Hi All, \nI start getting the below error few days ago and I am not able to be online since then.Knowing that I didn't change anything in the code. It was running perfectly. I tried to increase the Maximum excecution time but nothing happen. I appreciate your help\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in /home/facepnet/public_html/php1/utm.php on line 10\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in /home/facepnet/public_html/php1/utm.php on line 10\nFatal error: Maximum execution time of 10 seconds exceeded in /home/facepnet/public_html/php1/protocol.class.php on line 441\nRegards,\nSawi\n. ",
    "patelsagar": "Hi All Friends,\nHow to chanag Credentials \n1. Android version 4.4.4 not Working \n   Error Display:-login Error\ntx  stream:features\ntx    \ntx    \ntx    \ntx    \ntx  /stream:features\ntx  \nFatal error:  Uncaught exception 'Exception' with message 'Socket closed' in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php:3134\nStack trace:\n0 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(536): WhatsProt->readStanza()\n1 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(2000): WhatsProt->pollMessage()\n2 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(526): WhatsProt->doLogin()\n3 /opt/lampp/htdocs/WhatsAPI-Official-master/example.php(45): WhatsProt->loginWithPassword('gGha73KQT1l3G8A...')\n4 {main}\nthrown in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php on line 3134\n. Dear All Friends,\nWhatsapp Message Send using php Not Working\n$nickname = \"Bhavesh Lakum\"; // Your nickname\n        $sender = \"****************\"; // Number with country code\n        $imei = \"359301057212815\"; // Not used\n        $password = sha1(\"******\"); // Password you received from WhatsApp (Using WART, WhatsAPI...)\n        $dst = \"***************\"; // Number with country code (target to send a message)\n        $wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n        $wa->connect();\n        $wa->loginWithPassword($password);\n        $wa->sendMessage($dst, \"You have sent a message correctly, so you've connected to WhatsApp\");\nError Display :-\ntx  stream:features\ntx    \ntx    \ntx    \ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  on\u00a9\u203a\u00f4\u00f8\\\u00b5\u017e\u00b5\u00a2\u2019SUw\u00f7j\u000b23\ntx  \u2013\u201d\u00bd\u00bc\u00f1\u00b4\u2122?S\u00d6I(\u00c4\u00b1\u2122fMl\u00b7\u00adM\u2039\u00f4\u00e2\u00cdj\u02c6\u00ff='1\u00f0%\u001bq\nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php:2014 Stack trace: #0 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(526): WhatsProt->doLogin() #1 /opt/lampp/htdocs/WhatsAPI-Official-master/example.php(55): WhatsProt->loginWithPassword('7c5c7deef3e7ef1...') #2 {main} thrown in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php on line 2014\nPlz Solution Me\n. @OrangeTux\nThank You\n. @mgp25 \nPlz help Me\nNot number Block\nscript use :https://github.com/mgp25/WhatsAPI-Official\nLogin Failure Error Display\n. Plz help Me\nhow to use Whatsapp send message using php\nError Display :-\ntx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx   \u00fe\u201a\u00ff\u009d\u00a7\u00df\u00da\u00bd\u0007\" \u00e6\u00bc\u00e6\f\u00ac\u00d5l\ntx  9\u00ad-\u201aKd\u2013\u00c6\u00a9`\u00f8\u00e0$;T\u00d9\u00a2x\u0007\u00ef5\u0153\u0178\u00a7\u00fe\u00bc\"NC\u00f7\u00a6su\u00075A\nrx  \nrx    \nrx  \nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php:1641 Stack trace: #0 /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php(475): WhatsProt->doLogin() #1 /opt/lampp/htdocs/whatsapi/index.php(22): WhatsProt->loginWithPassword('D4E70E46076D9FD...') #2 {main} thrown in /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php on line 1641\n. @mgp25\nhow to use Whatsapp send message using php\nPlz help me\n$nickname = \"\";\n$sender =   \"\"; // Your number with country code\n$imei =     \"\"; // This is the id, but its not used, leave this variable like this\n$password =     \"\"; // Password you received from WhatsApp\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\nError Display:-\ntx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx   \u00fe\u201a\u00ff\u009d\u00a7\u00df\u00da\u00bd\u0007\" \u00e6\u00bc\u00e6\f\u00ac\u00d5l\ntx  9\u00ad-\u201aKd\u2013\u00c6\u00a9`\u00f8\u00e0$;T\u00d9\u00a2x\u0007\u00ef5\u0153\u0178\u00a7\u00fe\u00bc\"NC\u00f7\u00a6su\u00075A\nrx  \nrx    \nrx  \nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php:1641 Stack trace: #0 /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php(475): WhatsProt->doLogin() #1 /opt/lampp/htdocs/whatsapi/index.php(22): WhatsProt->loginWithPassword('D4E70E46076D9FD...') #2 {main} thrown in /opt/lampp/htdocs/whatsapi/src/whatsprot.class.php on line 1641\n. @mgp25 \nPlz help me\nStep By Step learn\n$config['YOURNAME'] = array(\n    'id' => 'e807f1fcf82d132f9bb018ca6738a19f',  // how to make your id\n    'fromNumber' => '441234567890', \n    'nick' => \"YOURNICKNAME\",\n    'waPassword' => \"EsdfsawS+/ffdskjsdhwebdgxbs=\",   //how to make your password\n    'email' => 'testemail@gmail.com',\n    'emailPassword' => 'gmailpassword'\n);\n. Whatsapp message send using php\n. @mgp25 \nHi All Friends,\nHow to chanag Credentials \n1. Android version 4.4.4 not Working (Old version not Woking)\n   Error Display:-login Error\ntx  stream:features\ntx    \ntx    \ntx    \ntx    \ntx  /stream:features\ntx  \nFatal error:  Uncaught exception 'Exception' with message 'Socket closed' in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php:3134\nStack trace:\n0 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(536): WhatsProt->readStanza()\n1 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(2000): WhatsProt->pollMessage()\n2 /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php(526): WhatsProt->doLogin()\n3 /opt/lampp/htdocs/WhatsAPI-Official-master/example.php(45): WhatsProt->loginWithPassword('gGha73KQT1l3G8A...')\n4 {main}\nthrown in /opt/lampp/htdocs/WhatsAPI-Official-master/src/whatsprot.class.php on line 3134\n. ",
    "sr2ds": "Hello,\nYou have also been blocked with frequency?\nI lost some numbers is week, not yet found a solution.\nI am using this sequence, and you?\n$ w = new WhatsProt ($ fromMobNumber, $ id, $ nick, true);\n$ s-> connect ();\n$ s-> loginWithPassword ($ id);\nw- $> checkCredentials ();\n$ s-> sendSync ($ numbers, $ mode = \"full\", $ context = \"registration\", $ index = 0, $ last = true);\n$ s-> sendAvailableForChat ($ nick);\n$ s-> sendPresence ($ type = \"active\");\nw- $> sendMessageComposing ($ toMobNumber);\nw- $> sendGetRequestLastSeen ($ toMobNumber);\n$ s-> sendMessage ($ toMobNumber, 'worked');\n. ",
    "koenk": "It can be done without a smartphone, but they now require a token based on the phone number somewhere in their registration process. As far as I know it is currently not known how that's generated. But you can use an Android emulator like BlueStacks to run the official WhatsApp app. Just fill in your own phone number, you will get a verification sms on that number (after about 10 minutes...).\nWith that verification code you can set your password (the android app sets it to the md'd reversed IMEI), but that step is also just a web request, not requiring that token. So you can then set it to any password you like, that has not changed from the link dominikwille gave. \n. It is indeed possible, you just send it with the plaintext contents of the vcard.\nAn example is somewhere in here:\nhttps://github.com/koenk/whatspoke/blob/master/doc/messages.md\n. Well you can upload media to the WhatsApp server rather easily, they don't have any security...\nJust do a https request to the url in the first post, and your filename should be some md5 hash.\nThis html page can upload any file, you should be able to implement that in PHP:\nhttps://github.com/koenk/whatspoke/blob/master/doc/file_upload.html\n. The emoji are actually part of the unicode standard, although most platforms only support a small selection of them (https://en.wikipedia.org/wiki/Emoji).\nYou can easily extract all .png files (48x48 px) from the WhatsApp apk, their filename corresponds to the character code (e.g. e537.png). The only problem is copyright stuff...\n. Encodings. Unicode is often represented as UTF-8. In plain old ascii, every byte was a character. However, to support more than 255 characters, UTF-8 was introduced which combines multiple bytes into a single character.\nIf you take a string (which is nothing more than a bunch of bytes) and apply the wrong encoding, such as any ASCII based encoding (latin-1, ISO-8859-1) instead of UTF-8, you'll see every byte as an individual character.\nThe 'pile of poo' emoji has the code e05a here (python interactive session for demonstration):\n\n>>> u\"\ue05a\"\nu'\\ue05a'\n>>> u\"\ue05a\".encode('utf-8')\n'\\xee\\x81\\x9a'\n>>> print \"\\xee\"\n\u00ee\n>>> print \"\\x81\"\n (note: this seems to be an invalid character)\n>>> print \"\\x9a\"\n\u0161\n\nAnd when I look up e05a.png (extracted from apk) it is the pile of poo as expected.\nAnyway, you should use the correct encoding, but I have absolutely no idea how PHP works with that. If you see those characters in your browser the page should be set to utf-8 too, I think... I tend to avoid PHP and webdev as much as possible ;)\n. ",
    "chandukrish": "Yeah we can create whatsapp account without smart phone.But we need laptop or tablet(without sim) and one normal phone ( not smart phone) is enough.We can create account.For more details see this..http://www.searchforsolutionsonline.com/2015/09/how-to-get-whatsapp-for-free-without.html\n. ",
    "lbehm": "Same problem here.\nLet me guess, when you insert in src/php/whatsprot.class.php after\nphp\n   protected function processInboundData($data)\n    {\n        try\n        {\n            $node = $this->_reader->nextTree($data);\na line like\nphp\nvar_dump($node);\nit will only flood your screen with NULL right?\nI'm not sure, but I think there isn't a connection to the whatsapp server... maybe a socket problem?\nBy the way, for testing you can try to send messages yourself. \n. ",
    "klbytec": "Anybody figured out anything yet?  \nI got the same problem even with the code I downloaded today:\nUndefined property: WhatsProt::$challengeArray\nIf it's a socket problem, then probably the same as the socket problem I got using the .Net source code: \"An established connection was aborted by the software in your host machine\".\nRelated?\n. Oh yeah I forgot to append &code=111 in the url but I did have it when I tried above.\nYes I got the code from using \nhttps://r.whatsapp.net/v1/code.php?cc=1&in=6461111111&to=6461111111&lc=EN&lg=en&mcc=000&mnc=000&imsi=00000000000000&method=sms\nHowever, I now think the problem with unable to register this number is because I have previously activated Whatsapp client on it, so I can't call register.php to change/reset it.  Security reason perhaps?  \nI did read somewhere that register.php is to SET password, but it doesn't seem to let me set it but rather trying to match it with something.\nWell, I can't get the IMEI of that phone number.  It's actually a Google Voice number. I used that number on an Android emulator to get Whatsapp on it and activated it.  I can see that number appear in my current phone's Whatsapp client's Favorites list too but completely useless.  So, there is no way I can do anything with that number again right?\n. Thanks, so there IS hope for me to set a new password for that number. I will keep trying, probably need to use a different MAC address.  Now I think because I was using the same MAC address that I registered with another phone number (which tested out successfully), I can't reuse that same MAC for another number, is that correct?  Phone number and MAC address is one to one?\nThe problem you are having in #112: \"Trying to send the request without a valid WhatsApp useragent returns a \"success-sent\" (without actually sending the code).\"  I was able to get the code via SMS on one of my two numbers, both are Google Voice numbers.  My second number got the same experience you described.  The difference is that the first number had downloaded Whatsapp client and activated, the second one hadn't.\n. @developrch  I was mistaken.  I said I have received Whatsapp code but it turned out it was from 8 months ago.   It was the last sms I received so I just assumed... I am not getting any new sms. Problem #112 is happening to me too.\n. Same here.  #89 didn't get any answers either.  Or do we need to pass a token now, mentioned in this forum?\n. Nice project, thanks!  \nSo how did you figure the user agent of your HTC and Nokia and in that format? Is it similar to something like this list for iPhones?\nIs the country code for U.S. just \"1\", one digit?\n. @developrch I was able to use the WhatsAPINet code to generate a token and receive new code via SMS.  That solved my problem.  \nHowever, unable to send messages yet using both code, something to do with the socket, connection aborted by host.  Looks related to #126.\n. I had that error too.  I waited a week to try again and worked.  Also at the same time, not sure if it's related, I added a referrer to httpwebrequest and assigned it with an empty string.\n. ",
    "oRGaZMo": "hiho guys,\nsame here...\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in C:\\xampp\\htdocs\\venomous0x\\src\\php\\testprotocol.php on line 7\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in C:\\xampp\\htdocs\\venomous0x\\src\\php\\testprotocol.php on line 7\nWarning: socket_read(): unable to read from socket [0]: Eine bestehende Verbindung wurde softwaregesteuert durch den Hostcomputer abgebrochen. in C:\\xampp\\htdocs\\venomous0x\\src\\php\\whatsprot.class.php on line 140\n. ",
    "redindian": "Same here, tried 4 different servers (Linux and Windows)\n. ",
    "roubynet": "hi did you make in progress in porting to vb\n. ",
    "kingk110": "I am interested in such thing or c# \n. is the WhatsAPINet still working??\nbecause i am getting \"fail-too-many\" error\n. i am using this api in a console application that send msgs can anyone help me plz\ni added all classes and source file that will be used and and write this main function:\nstatic void Main(string[] args)\n        {\n            if (!CheckLogin(\"phone num\", \"pass\"))\n            {\n                Console.WriteLine(\"Login failed\");\n            }\n            else\n                Console.WriteLine(\"login Successfull\");\n            WhatsApp ob = new WhatsApp(\"phone num\", \"password\", \"nickname\");\n            ob.Connect();\n            ob.Login();\n            ob.Message(\"961**\", \"test\");\n            Console.ReadLine();\n}\n. please any solution for the problem because need a solution urgently\n. http://whatsapp.filshmedia.net/ is not working\nis there any other solution?\n. keep going guys we should have a solution\nhope that i can help with the basic programming information i have but i need such an automated application\n. @beldar \nI am trying the try of the rc4 that @waninkoko said it is sending msgs but it didn't work\nat this time I just need to send and no need to receive because @waninkoko said that it working with him\ncan u help plz\n. thanks guys but i need just to send is there anyway to send ?\nbecause i tried it and didn't send!!\n. @hermanho \nit is still not sending any msgs and giving an unhandled exception can u help plz\nthanks at all\nthis is the detail of the exception:\nSee the end of this message for details on invoking \njust-in-time (JIT) debugging instead of this dialog box.\n**** Exception Text **\nSystem.ArgumentException: Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.\n   at System.Buffer.BlockCopy(Array src, Int32 srcOffset, Array dst, Int32 dstOffset, Int32 count)\n   at WhatsAppApi.Helper.BinTreeNodeWriter.flushBuffer(Boolean encrypt) in C:\\Users\\h.zeinelddine\\Downloads\\WhatsAPINet-Protocol_1.2 (1)\\WhatsAPINet-Protocol_1.2\\src\\WhatsAppApi\\Helper\\BinTreeNodeWriter.cs:line 123\n   at WhatsAppApi.Helper.BinTreeNodeWriter.Write(ProtocolTreeNode node, Boolean encrypt) in C:\\Users\\h.zeinelddine\\Downloads\\WhatsAPINet-Protocol_1.2 (1)\\WhatsAPINet-Protocol_1.2\\src\\WhatsAppApi\\Helper\\BinTreeNodeWriter.cs:line 97\n   at WhatsAppApi.WhatsSendHandler.SendComposing(String to) in C:\\Users\\h.zeinelddine\\Downloads\\WhatsAPINet-Protocol_1.2 (1)\\WhatsAPINet-Protocol_1.2\\src\\WhatsAppApi\\WhatsSendHandler.cs:line 159\n   at WhatsAppPort.frmUserChat.txtBxSentText_TextChanged(Object sender, EventArgs e) in C:\\Users\\h.zeinelddine\\Downloads\\WhatsAPINet-Protocol_1.2 (1)\\WhatsAPINet-Protocol_1.2\\src\\WhatsAppPort\\frmUserChat.cs:line 71\n   at System.Windows.Forms.Control.OnTextChanged(EventArgs e)\n   at System.Windows.Forms.TextBoxBase.OnTextChanged(EventArgs e)\n   at System.Windows.Forms.TextBoxBase.WmReflectCommand(Message& m)\n   at System.Windows.Forms.TextBoxBase.WndProc(Message& m)\n   at System.Windows.Forms.TextBox.WndProc(Message& m)\n   at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)\n   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)\n   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)\n**** Loaded Assemblies **\nmscorlib\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)\nCodeBase: file:///C:/Windows/Microsoft.NET/Framework/v2.0.50727/mscorlib.dll\nWhatsAppPort\n    Assembly Version: 1.0.0.0\n    Win32 Version: 1.0.0.0\nCodeBase: file:///C:/Users/h.zeinelddine/Downloads/WhatsAPINet-Protocol_1.2%20(1)/WhatsAPINet-Protocol_1.2/src/WhatsAppPort/bin/Debug/WhatsAppPort.exe\nSystem.Windows.Forms\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5460 (Win7SP1GDR.050727-5400)\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System.Windows.Forms/2.0.0.0__b77a5c561934e089/System.Windows.Forms.dll\nSystem\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5456 (Win7SP1GDR.050727-5400)\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System/2.0.0.0__b77a5c561934e089/System.dll\nSystem.Drawing\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5462 (Win7SP1GDR.050727-5400)\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System.Drawing/2.0.0.0__b03f5f7f11d50a3a/System.Drawing.dll\nSystem.Configuration\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System.Configuration/2.0.0.0__b03f5f7f11d50a3a/System.Configuration.dll\nSystem.Xml\n    Assembly Version: 2.0.0.0\n    Win32 Version: 2.0.50727.5420 (Win7SP1.050727-5400)\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System.Xml/2.0.0.0__b77a5c561934e089/System.Xml.dll\nWhatsAppApi\n    Assembly Version: 1.0.0.0\n    Win32 Version: 1.0.0.0\nCodeBase: file:///C:/Users/h.zeinelddine/Downloads/WhatsAPINet-Protocol_1.2%20(1)/WhatsAPINet-Protocol_1.2/src/WhatsAppPort/bin/Debug/WhatsAppApi.DLL\nSystem.Core\n    Assembly Version: 3.5.0.0\n    Win32 Version: 3.5.30729.5420 built by: Win7SP1\nCodeBase: file:///C:/windows/assembly/GAC_MSIL/System.Core/3.5.0.0__b77a5c561934e089/System.Core.dll\n**** JIT Debugging **\nTo enable just-in-time (JIT) debugging, the .config file for this\napplication or computer (machine.config) must have the\njitDebugging value set in the system.windows.forms section.\nThe application must also be compiled with debugging\nenabled.\nFor example:\n\n\n\nWhen JIT debugging is enabled, any unhandled exception\nwill be sent to the JIT debugger registered on the computer\nrather than be handled by this dialog box.\n. nice idea that what I was working for to get rid of blocking but each time i got a new password and try to login it gives me unauthorized I reopen my program and then send again !!!\nI think the encryption that is done is md5 for the reverse of the imei\nif you are good in .net we can find a solution for a big problem facing us PM if u want.\n. guys need a solution as fast as we can\n. what r u doin man?\n. guys  i need an answer can anyone help plz?\n. why did u close this issue man did u get an answer?\n. is this working??!\n. I sent them the problem from yesterday but till now I haven't got an answer\nThanks\n. I sent them the problem from yesterday but till now I haven't got an answer\nThanks\n. huge number man about 10,000 msgs or even more\n. no you will receive a status of blocked when u try to register or sign in\nyes as @shirioko said 10,000 messages a day and maybe more\n. no I didn't send them together\nmaybe it is not related to the number of message;it is related to the number of receipts \n. I was using the .net whatsapi posted by @perezdidac to register new numbers with my own password \nbut it is not working now(it said to me that the code has been sent and not receiving any code) and need it a lot can anybody help me to register an account with own password.\nI don't need to use the account from my phone and pc.\nI want to use it only from the pc\nIf you can help me i'll thank you a lot\n. @matamoscas How can I use this password in the .net api??\n. I used this comand : \npython yowsup-cli --requestcode sms -c config.example\nand get this error :\nTraceback (most recent call last):\n  File \"yowsup-cli\", line 189, in \n    password = identity or password if args[\"v1\"] else base64.b64decode(password)\n  File \"/usr/local/lib/python2.7/base64.py\", line 76, in b64decode\n    raise TypeError(msg)\nTypeError: Incorrect padding\nI don't know python well can u help?\nI was using a long password.when i replaced the password with 1234, it worked and gave me sent but how much should i wait to receive the message.\nis it using the same way the .net api uses? because it also says that message sent and i don't receive any message\n. Thanks I used the voice request it was faster than sms and it worked well and was able to send message.\ni used the same password with the c# .net api but it is giving me wrong password do you have any idea about how can i use the password in that api because i need to send message from a console application of mine and not from python\n. I am even trying to register by calling the function WhatsRegister.VerifyRegistration(countryCode, phoneNumber, tmpPassword, tmpCode); using the code sent by the python yowsup but the server is replying with \"failed-old-version\"\n. can you explain how it worked with you because I am using the password of the python with the .net and it says wrong password\n. same for the .net\nwe must find a solution but how ??\n. bigger problem!!!\nnow even the yowup is giving me \"fail OLD VERSION\" !!\n. whic api has been updated?\ndo u mean the .net api? or the yowsup ?\n. Ok thanks man\nbut i am using the decoded password in the .net api but still not working ?!\n. can u tell me how u solved the \"fail old version\" in the yowsup so i can try to do the same in the .net ?\n. I removed all encryption types of imei in the .net api and used the utf-8 encoded password of the yowsup but still getting  wrong password\ncan any .net developer help me plz what should i change to make it work ??\n. yes it is working @Sephiroth1979 \n@alibarrak are you talking about the registration using the .net api?\nI need to use this one to register so i can choose my own password and then i can send only from the pc and no need to send from phone.\n. I don't have any idea about registering on the phone because I am just registering to put a prof pic and status and then i use this method to register from phone and won't be able to send messages from phone.\n. @jonnywilliamson @adasmalakar \ndid u check that it is working ?\nbecause I am trying to do the same in the .net api but getting wrong password\n. I tried too much but always getting wrong answer @g0g0l \nwhat about the md5 encryption\nif u debug the .net you will notice that there is an md5 encryption while calling the function ExistsAndDelete!\nis there an md5 encryption of the decoded string in the php before using it as a token?\n. there is also rc4 encryption while using the login function do you have any idea about it @g0g0l ?\nI tired to skip the ExistsAndDelete and debug but my mind was lost while calling too many functions to encrypt data !!!\nI don't know why there is so many encryption while using a request ??\nIf you know .net and can help to solve it I'll thank you a lot because nobody is giving it any important in the .net repository \n. thanks for you guys \n. @shargon did you find any solution to the .net api to make it work ??\n. Do you mean it will be done after 2 days?? Because it seems that your English is not good\nif you are developing it you can refer to the recent api\nhttps://github.com/perezdidac/WhatsAPINet\nI was using it but now can't use the password generated from yowsup in it even if I remove the md5 encryption \n. @shargon\nok :)\nGood luck!!\nready for any help\n. did any one find a solution\n. @shirioko :\nyou mentioned : \" I'm using mine in both php and c# and it works just fine.\"\ncan you help me and tell how you made it work in c# because I tried a lot and no result!!\n. I had already tried it man and you mentioned this change in the whatsapinet :\npublic Byte[] encryptPassword()\n{\n    return Convert.FromBase64String(this.imei);\n}\nand the encrypt password in the mentioned file is public string I tried your change and tried also to return the decoded value as a string using these 2 lines : \npublic string encryptPassword()\n        {\n            //if (this.imei.Contains(\":\"))\n            //{\n            //    this.imei = this.imei.ToUpper();\n            //    return md5(this.imei + this.imei);\n            //}\n            //else\n            //{\n            //    return md5(new string(this.imei.Reverse().ToArray()));\n            //}\n            byte[] encodedDataAsBytes = System.Convert.FromBase64String(this.imei);\n            return System.Text.Encoding.Default.GetString(encodedDataAsBytes);\n        }\nI left the comments to show you that I am going right\nBut getting wrong password and even if I remove the WhatsRegister.ExistsAndDelete(countrycode, phonenumber, imei) and try to send message I got not authorized \nThanks for your help @shirioko \n. unbelievable !!!!\nI was sending more than 1000 a day and didn't got blocked.\nTill now can't know the criteria for blocking!!!\n. trusty I didn't count them but after i kept it sending about 10000 msg a day each 1 hour the next day was blocked and then by this way I had sent more than 25000 msg and then be blocked the next day.\nhope that any whatsapp employee can tell us the limit.\nI contacted the support they answered that you was noticed as spammer regarding the number of message and maybe my way of asking was not suitable because I talked about advertising in my ticket and they insure about no advertising in their terms. Try to ask the support for this limit maybe they will answer but maybe after 2 or 3 weeks.\n. i am in a trouble guys!!!!! :(:(:(\nI am 100% sure that v2 of watsapp has decreased the limit to the max.\n. that is incorrect @shirioko i was sending only to 500 different numbers and with a sleep of 1 sec but after I updated registeration to v2 the limit is different now\nhttps://github.com/tgalal/yowsup/issues/63\n. i think if you use an official client then it will send you the password each time you send a message or something like that\nso try to get a new password each time you want to  send a message. will it stay be blocked after sending to 19 different  numbers ? \n. @Akuka that what I wanted to meant in this comment : \nhttps://github.com/tgalal/yowsup/issues/63#issuecomment-12422970\n. no didn't try because i was blocked with 10 numbers !!!!\n. how are you unblocking the number that was blocked @lahmacuns \n. did anybody try with a registered version of whatsapp before I try and loose my registered account ?\n. it may be related to the composing state or some function that is not being used by the apis we are working on.\ncan anyone try to use the \"is typing message\" before sending any message and use the \"last seen request also\".\n. Hope that I had any tiny idea, but for alas no. if I'll have half a one I will share it here rapidly to f*** whatsapp. :(:(:(\n. Guys why don't we move on other free messaging applications maybe they'll have a true payed service that you can send large number to your subscribers. I heard about line. Can't we try it using sockets as if we have done here or maybe viber!!!\nIf I was the developer of this api I would try to do another one but I don't have the professional skills to do that.\n. @beldar did you tried the gtalk? can you provide me with a test or api?\n@shirioko as @beldar said gtalk, viber, tango maybe ...\n. guys read what whatsapp support answered when I asked for a paid service that let me send big number of messages for my friends:\n\"\nThanks for your message. We have received a large volume of complaints about your account. We cannot provide further information about these complaints as this would be a violation of user privacy. As we have reason to believe that your account activity has violated our Terms of Service (http://www.whatsapp.com/legal) we have exercised our right to ban your account.\nWe have no further comments at this time.\n\"\nwhat a fucking company !!! :@\n. Dear Guys,\nthe new policy that is being applied on us as spammers is also applied on real phones with real whatsapp!!!\nduring one month only 2 of my friends got blocked and got the same message that we are receiving when trying to re-register after gotting blocked \"You are no longer allowed to use our serice\".\nAnd if a normal user with a paid account try to contact whatsapp support they will say that you have violated our terms and we have the right to ban your account..!!!! :@:@\nWhat are your opinions guys??\nI suggest that whatsapp should make different paid services according to your use of their servers but they always say that we prevent any commercial use and bla bla bla :@:@:@\nHope that all normal accounts will have the same issue to see what whatsapp will do....\n. They don't send any spam messages guy!!!\n. @shirioko Did you find any criteria that let you send messages without being blocked ?\n. it is not also related to sending to real numbers because i was using the link to check if the number is registered or not and I have my own database that contains a good number of true whatsapp numbers. I used it in the v2 but it is also blocked.\nthe last try I did is to send to 20 contact with a password and change it and then send to other 20 it worked fine while trying to send and completed this until I reached about 1000 true messages.\nBut after about 3 hours my number was been blocked without any other tries to send.\nI think they are watching the user agent we are using and the version or buildhash or something like that.\n. yes tried and with no results\nbut how are u using the old imei numbers? I was using it and stopped so i changed the user agent and the version to make it work\n. hello @shirioko  again\ncan i have a try for this method??\n. where can i find it?\nI didn't understand what you meant by synced it ? to where ?\n. how are you registering a new number?\n. can you explain these plenty issues ?\n. @WebWhatsApp it's not working!!!\nand how i can download the zip file that contain the php files that you mentioned in ur website??\n. ",
    "mstoelzle": "Do I have to deactivate WhatsApp on my iPhone?\n. sorry found the right issue.\n. ",
    "fkaul": "Same for me. Please help!\n. Of course - when I open whatsapp the message is displayed unter the correct contact. But in whatsapp you can define your own username as well. This username is used for the message display at the homescreen or the lockscreen. Its kind of a message preview. I think this is what they mean by \"nickname\" in the whatsapp.php.\nNormally it would display something like\nKaul: Hallo there!\nBut it shows:\n4917296235269: Hallo there!\n. Yes I did.\n. I just tried sending it from another phone which makes no difference. Instead of the nickname the phone number is shown in the message preview at the homescreen.\n. ",
    "vnikiet": "Im trying to do the same, firstly i thought that the whatsapi send a received message to the whatsapp server when whatsapp processInboundData function was executed but i commented the sendMessageReceived function and nothing passed, I'm not sure whats the purpose of that function, any idea mates?\n. The problem is that the messages (i think) are working like POP server, when u download them from the whatsapp server they are deleted, and u cannot see the message again from the mobile if u have downloaded previously from pc.\nIt would be perfect to find a solution to fix that, I think the best solution is to avoid the server download notification once u have download the message, but im not sure if this would work.... any idea @cdesjardins  or @ericblade ?\n. ",
    "horsti111": "By \"forwarding\" I mean that I want to be able to see the messages on my mobile ALTOUGH i had already seen them on my PC before. (Pretty much exactly what @vnikiet  describes, thx). \n. While trying around, i got to save a message on my pc AND on the mobile. But i dont really know what the difference to the tries before was, and i cant reproduce this. But it MUST be possible !!\n. ",
    "tomwolfgang": "Maybe if you send an unavailable presence (?)\n. What happened? I see the sources are back?\n. Should be similar to MessageImage except media type is \"location\"\nand you add longitude and latitude values.\nThe expected thumbnail is probably something from google maps :)\n. @Zanooda any chance you have more info on: KeyFromPasswordAndNonce function.?\n. @tgalal what value do you pass as iteration to the PBKDF2? 160? does it even matter?\n. @dleivag the drop param is 256\n. @dleivag it should be an arbitrary buffer of 256 bytes long\n. @saschagehlich you need to change to the new dictionary - you don't even have WAUTH-1 in the old one...\nyou need to respond to the challenge with an encrypted response - which is what @waninkoko wrote: http://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n. @dleivag - @waninkoko knows what he is talking about.  please write the steps you are performing:\n1. get challenge key (what size are you getting?)\n2. create challenge response\n3. encrypt challenge response\n4. ....\n5. ....\n. shoot...\n. Looks like there is a server request to generate a password and this is stored on device\n. ",
    "kami83": "Okay thank you it is working now\n. ",
    "choongleong": "Hi, can we modify the code such that when we get a \"replace by a new connection\" error, we reconnect again?\n. Hi chris,\ni understand what you are saying.\nBut if I can accept the infinite loop, how can we code the WhatsAPI to\nconstantly reconnect back?\nPlease advice.\nThanks.\nRegards,\nOn Sat, Dec 22, 2012 at 7:50 PM, Chris Desjardins\nnotifications@github.comwrote:\n\nThis causes an infinite loop, as follows:\n1) You connect with WhatsAPI\n2) WhatsAPI causes your phone to disconnect\n3) Your phone reconnects\n4) Your phone causes WhatsAPI to disconnect\n5) goto 1\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/75#issuecomment-11636472.\n\n\nTan Choong Leong, Ph.D.\nchoongleong.tan@gmail.com\n. ",
    "ruriimasu": "how do i add nickname using the new codes in 1.2?\n. @developrch \nhow can i use your codes to check against a block of phone numbers and filter into 2 lists, 1 with whatsapp the other without whatsapp?\nJJ\n. i have an old iphone 3GS with me. if anyone can tell me how to sniff packets with this device, I can try to contribute some packet captures and see if it helps.\n. Has anyone successfully update these codes and got it working again? Kindly post and share what needs to be changed. Appreciate it a lot.\n. ok.. i think a lot of us are still left confused. for those persons who said they managed to login, get response, etc, did you have everything solved (ie send and/or receive messages)? if you do, kindly share your codes. some of us here are guessing and knocking blindly with the little bit of hints that are being thrown around. thanks in advance.\n. sending with apostrophe ' doesn't work as well.\n. @youta18 @lilezek \nhi.. so what needs to be done? not technical here. please explain and paste the portion that needs to be edited. thanks!\nJJ\n. @lilezek @ElJava \nhi.. can explain what needs to be done? I cant receive messages. thanks!\nJJ\n. not just for iphone, but android and wp7/8. thanks!\n. anyway to validate a block of numbers?\n. Hi,\nSeemed like the problem was this all along. I corrected mine and it now works -> https://github.com/venomous0x/WhatsAPI/pull/157/files\n. Yes. Mine is only text.\n. did u send all 10000 together? i only sent 2 blocks of 1000 and got blocked.\n. Did any of you guys ever get an error Old_version when input SMS code? But no problem if I re-register the phone number with latest whatsapp client.\nThe said phone number was used in an old version of Whatsapp and I'm trying to re-register in the new password format.\n. bjdudu and king.. let's get together and put together our sending patterns and try figure this out. lets add one another to skype.\n. thanks. not working for registration :(\n. No. No idea how to use it. Can you give me a dummy guide on how to set it up?\n. Thanks! I will try that :D\n. Hi shirioko,\ni encountered the following error, can you tell me what I did that went wrong? ->\nroot@ubuntu:/var/www/yowsup/src# python ./yowsup-cli -c config.example -d --requestcode voice\nTraceback (most recent call last):\n  File \"./yowsup-cli\", line 33, in \n    from Examples.CmdClient import WhatsappCmdClient\n  File \"/var/www/yowsup/src/Examples/CmdClient.py\", line 21, in \n    from Yowsup.connectionmanager import YowsupConnectionManager\n  File \"/var/www/yowsup/src/Yowsup/connectionmanager.py\", line 28, in \n    from Common.watime import WATime\n  File \"/var/www/yowsup/src/Yowsup/Common/watime.py\", line 23, in \n    from dateutil import tz\nImportError: No module named dateutil\n. It works. Thanks!\n. muslimsg\nCan't offer you any help as I installed it in a linux box with no clue how to use python or php. I only followed instructions and was lucky to have been successful so far.\n. phone number requires country code though.\n. can anyone share a live web link of this contact verifier? i need to verify some numbers but have no idea how to setup these codes or use these codes :(\n. Hi shirioko.. it will be great if you can help. I can provide my own credentials. Thanks in advance! =D\n... and i will keep this in one thread =D\n. Hi shirioko,\nthanks for sharing your server link. while using it, i encountered:\nRequest-URI Too Large\nThe requested URL's length exceeds the capacity limit for this server.\nwhat is the maximum number of contacts i can verify at one time?\n. @ shirioko \nHi shirioko,\nI was trying to verify 500 numbers at once. Lowered the number and all seems ok.\nBy the way, I have a linux machine with LAMP installed. How do I put in your codes to make it work? Googled and found out WAMP seems only for Windows.\n@jonnywilliamson \nHi jonnywilliamson..\nWill try it out and update this thread.\n. @shirioko \nI see. Will try that out.\nBtw, I have over 2000 business contacts in my phone.. Don't ask me what I do.. haha..\n. i got it working in my linux now. Thanks a lot! =D\n. seems like the size limit is URI length. nothing much i can do about it.\n. how do i do that? what's $_POST and what's $_GET? haha.. i setup my linux with lots of googling.\n. @shirioko \ni only know basic static html. haha.. what is the code to add to you html for array of numbers? =D\n. @shirioko \nHi shirioko.\nI didnt try your codes since after i filtered the numbers and tried sending.. my account got blocked somewhere before 120 messages. getting all verified numbers dont work.\n. Hi Max,\nI saw your WART to register WhatsApp accounts. May I know how do I use it? I tried to get code with both SMS and voice using your program but nothing came through.\nIt maybe the part where you said WhatsAPINET is needed. I downloaded that as well, but how do I use both together? I\u2019m using a Windows 7 PC. Thanks!\nJJ\nFrom: Max Kovaljov \nSent: Wednesday, May 15, 2013 12:43 AM\nTo: venomous0x/WhatsAPI \nCc: ruriimasu \nSubject: Re: [WhatsAPI] Added contact sync v2 (#315)\nJust use a textarea with \";\" separated numbers like \n316*_;546*_*_;434*_;etc.\n    \n\nAnd then explode the data in PHP\n$contacts = @$POST[\"contacts\"];//string of numbers 315*_;435*__;456_*;etc.\n$contacts = explode(\";\", $contacts);//split into array [435_, 435*_*, 544_*, etc.]\n\u2014\nReply to this email directly or view it on GitHub.\n. can anyone share a live web link of this contact verifier? i need to verify some numbers but have no idea how to setup these codes or use these codes :(\n. Does this API use broadcast or individual send? I noticed broadcasting from phone doesnt seem to work after some heavy broadcastings.. but if send/receive through an existing chat window, everything works fine.\n. I realised on a whatsapp phone client, if you broadcast to a number, recepient has to have your number in its contact in order to receive.\n. Is it possible to write a script for mobile phone that calls up original whatsapp mobile client and sends out same message by cycling through the whole address book?\n. ",
    "jesussales": "Hello, yesterday i download the package, everything ok, it's great!!, but i have a problem when i want to send a nickname, i try with sendNickname($nickname) after the Login(), but no send messages, What's the problem?\nSorry for my english, i am spanish\nthank's\n. Descarga wart y hazlo a trav\u00e9s de ella es el m\u00e9todo m\u00e1s f\u00e1cil y m\u00e1s estable\nEl 29/07/2014 21:10, \"fredilopez\" notifications@github.com escribi\u00f3:\n\nnecesito ayuda para generar el registro para poder usar las api\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-50523494.\n. Hello! Then, how is the easy way to register a number????\n\nWhere can i read the information???\nSaludos Jes\u00fas Sales\nEl 19/04/2013, a las 17:42, Max Kovaljov notifications@github.com escribi\u00f3:\n\nWell that's one way to piss off a bunch of people ^^\nI think that we shouldn't change identity generation for now, but we should keep it in mind though in case WhatsApp decides to flip the switch :)\n\u2014\nReply to this email directly or view it on GitHub.\n. Ok, mirare como se hace, gracias por responder en espa\u00f1ol...\n\nOk, thanks a lot, now i'll comming to look up about is The method\nSaludos Jes\u00fas Sales\nEl 19/04/2013, a las 18:05, manufuentescr notifications@github.com escribi\u00f3:\n\nHola jesus la manera mas facil para mi es registrar los numeros con el API.\nHi jesus the easiest way for me is register the numbers with the API.\n\u2014\nReply to this email directly or view it on GitHub.\n. that problem normaly is a firewall reject or drop the socket's conections,\nare you try from your computer or webserver?\n\n2013/11/8 tha619 notifications@github.com\n\nI can\u00b4t send and receive messages. I don\u00b4t know where the Problem is.\nSomeone could help me?\n[] Logging in as 'WhatsAPI Test' (4917***)\nWarning: fsockopen(): php_network_getaddresses: getaddrinfo failed: Der\nangegebe\nne Host ist unbekannt. in\nC:\\xampp\\htdocs\\WhatsAPI-master\\WhatsAPI-master\\src\\p\nhp\\whatsprot.class.php on line 331\nWarning: fsockopen(): unable to connect to c.whatsapp.net:443(php_network_getad\ndresses: getaddrinfo failed: Der angegebene Host ist unbekannt. ) in\nC:\\xampp\\ht\ndocs\\WhatsAPI-master\\WhatsAPI-master\\src\\php\\whatsprot.class.php on line\n331\nFiring onConnectError\ntx stream:features\ntx\ntx\ntx /stream:features\ntx\n{\u2566vG\u252c\u266b?\u00bfI\u00dd\u00f7\u2554\u00d3D\u00bc:params:xml:ns:xmpp-sasl\">d\u2666{\u00b2\u2584\u25acM:\ntx\n[] Request last seen 4917*_: tx =\"get\" id=\"lastseen-1383896004-1\"\nfrom=\"4917_**@s.whatsapp.net\">\ntx\ntx\n[] Send message to 4917*:\ntx\ntx\ntx\ntx\ntx\ntx\ntx\ntx\nC:\\xampp\\php>\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/509\n.\n. hi!, the sockets problem is the same that i had a time ago, about 32 bits\napplication, i think the problem is that you want execute //name.php and\nyou need to write the /location/of /bin /php  /application.php for example:\n\nin linux             php index.php (from the location of your script)\nin windows       php.exe index.php (from the location of your script)\nnormally thats execute.\nGood luck!\n2013/11/8 tha619 notifications@github.com\n\nI did both. So you mean it\u00b4s a firewall problem? It could be, because I\u00b4m\nin company.\nBut now i get from the webserver sehll the answer: is not an allowed 32\nBit application.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/509#issuecomment-28044168\n.\n. the problem isn\u00b4t the port, is the sockets connections... the firewall not\nallow conections from another server intbound...\n\n2013/11/8 tha619 notifications@github.com\n\nI will test it, an give feedback on monday. thank you guys very much!\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/509#issuecomment-28056971\n.\n. Hi! i have a new number for 3 days ago and i haven't any problem to send\nmessages, can you put here the your code??\n\n2013/11/14 Max Kovaljov notifications@github.com\n\nDid you sync your contacts and made sure that they have you in their\ncontact list?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/515#issuecomment-28481167\n.\n. No, identity just  not needed\n\nSaludos Jes\u00fas Sales\nEl 14/11/2013, a las 15:58, mofakfree notifications@github.com escribi\u00f3:\n\n@jesussales \ndo you use this \n$identity = 'e807f1fcf82d132f9bb018ca6738a19f';\nor \n$identity = urlencode(sha1(strrev($username . $salt), true));\n\u2014\nReply to this email directly or view it on GitHub.\n. The pass is good, o think is blocked because The messages is sending by a internet server and whatssap check ip address and return if has Dns Name, if is true block\n\nOnly think that... Because The number of messages that i have send is minimal, o ver 15 in two days\nSaludos Jes\u00fas Sales\nEl 15/11/2013, a las 12:56, Max Kovaljov notifications@github.com escribi\u00f3:\n\nClosed #516.\n\u2014\nReply to this email directly or view it on GitHub.\n. If The problem is lookup of dns from conected ip, is possible make a proxy revolver that the api connect  to whatssap around this proxy.\n\nWhat do you think?\nSaludos Jes\u00fas Sales\nEl 15/11/2013, a las 12:56, Max Kovaljov notifications@github.com escribi\u00f3:\n\nClosed #516.\n\u2014\nReply to this email directly or view it on GitHub.\n. no, is a virtual number of fonyou, only used for a application in a web server, i'll go to test anythings and i'll have any idea of the problem will put here\n\nthanks\n. a question, when you try to send a message, the logical use is\nConcect\nloging\nsend\nlogout\nsome worng?? something to fix?\n. Hi Manu, it's possible you have a error in yout code, For example, set_limit can you writte here your code???\nSaludos Jes\u00fas Sales\nEl 18/11/2013, a las 18:51, Manu Fuentes notifications@github.com escribi\u00f3:\n\nIt actually works unstably, I have multiple accounts.\nI use an account and synchronize a contact, I get that contact have an account in WhatsApp.\nThen I use a different account and synchronize the same contact, but this time I get that contact has no account in WhatsApp.\nSomeone has any idea why this happens?\nThank you!\n\u2014\nReply to this email directly or view it on GitHub.\n. Para mi que el problema esta en que la cuenta con la que no te da el contacto es porque esta bloqueada o le pasa algo, inicia sesi\u00f3n con ella con el debut y mira a ver si te pone que no esta autoriZado o algo\n\nI think the problem is in the number with no obtain any data of the contact\nTry to connect with debug in true with the number that's not obtain data for the contact, look for a line with not authorized or similar\nSaludos Jes\u00fas Sales\nEl 18/11/2013, a las 19:37, Manu Fuentes notifications@github.com escribi\u00f3:\n\nHi Jesus, this is my code\n<?php\nrequire_once \"contacts.php\";\n$username = 'xxxxxxxxx';\n$password = 'xxxxxxxxxxxxxxxxxxxx=';\n$contacts = array();\n$contacts[0] = \"xxxxxxxxxx\";\n$debug = true;\n$sync = new WhatsAppContactSync($username, $password, $contacts, $debug);\n$res = $sync->executeSync();\n?>\nI run the same script with a different account and the same contact, but with an account I get that contact has WhatsApp account with the other account get that contact does not have WhatsApp.\nThe code works the problem is that I get different answers\nEjecuto el mismo script con otra cuenta y el mismo contacto, pero con una cuenta obtengo que el contacto tiene WhatsApp, con la otra cuenta obtengo que el contacto no tiene WhatsApp. El codigo funciona el problema es que obtengo respuestas diferentes\n\u2014\nReply to this email directly or view it on GitHub.\n. Is very strangle,  How many account have you test the \"invisible\" target??? \n\nIs a stupid test, but try\ndie(print_r($array_cintacts)); \nbefore the sync with the account that not capture the data of the target, and verify that the \"invisible\" target is there....\nIf the invisble is in array try print_r of the response \nSaludos Jes\u00fas Sales\nEl 18/11/2013, a las 20:51, Manu Fuentes notifications@github.com escribi\u00f3:\n\nHi @shirioko !! Yes I use the international number format .\n@jesussales Yo creo que la cuenta esta activa , ademas puedo enviar mensajes normalmente.\nI think that the account is active because I get this when I make the login\ntx stream:features\ntx \ntx \ntx /stream:features\n(\u00a3\u00cf6\u00f2\u00cf\u00cc\u00beyK]/;ns=\u00c6OF\u00d5e\u00e3IkVc\u00b1\u00e2n\u00bdns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"xxxxxxxxxxx\">\u00f3\u00bf\u00e8qVO\u00f5q\u00d0\u00c9\u00b6TW\u00f6\u00b4\u00aetlY\u00cdj$\u00ec\u00f6\u00fe\u00a7\u00bfz\u00f8\u00ac\u00d9\u00c0\u00f3 \u00ecG\nZ\u00fb\u00bcG\u00c6\u00cfD\u00dcHy[\u00e6\nrx\nrx stream:features\nrx \nrx /w:profile:picture\nrx /stream:features\nrx \u00cf7\u00bd\u00b4 _\u00e6\u00f6\u00de\u00aa\u00fbM)\u00bdY\u00cd\u00a9\nd\n7\u00fdN 8e\u00a8\u00fa4v&D,`(\n4\u00a9w.\u00f4'Cg\n\u00ff\nrx }\u00aa\u00eb\u00f40(f\u00bf\u00e2{l\u00b8\u00e0\u00a1\u00b8\ntx\n\u2014\nReply to this email directly or view it on GitHub.\n. Hi!! If you want speak Spanish, you can do it in\nhttps://github.com/mgp25/WhatsAPI-Spanish\n\nI'll go to retrieve the problem that you say and ask you \nSaludos Jes\u00fas Sales\nEl 18/11/2013, a las 22:49, RFKDOT notifications@github.com escribi\u00f3:\n\nWhen I use event onGetMessage this returns 6 vars ($mynumber, $from, $id, $type, $time, $name, $body)\nOnly if i are in a group the $from always return the group ID , example (99999999999-8888888888@g.us)\n99999999999 => Phone of group CREATOR\n8888888888 => Group ID\n\u00bfHow I known the number of a person that send ever message?\nSorry for my bad english\n\u2014\nReply to this email directly or view it on GitHub.\n. Hi! Is not possible block a response, I think that you only can put on finish of the message a text similar to \"please no respond, this response not go to anywhere\"\n\nSaludos Jes\u00fas Sales\nEl 07/01/2014, a las 17:52, luislora-es notifications@github.com escribi\u00f3:\n\nHi,\nI have developed a Vet program and it sends a SMS to the clients to remember the next appoiments. I tried to send a message from WhatsAPI and runs OK (thanks for the API) but my client wants that their clients can't respond to the message. Is it possible?\nThanks and sorry for my bad english.\n\u2014\nReply to this email directly or view it on GitHub.\n. @shirioko hace you a solution for contact sync????\n. @shiroko how resolve The problem???\n\nSaludos Jes\u00fas Sales\nEl 13/01/2014, a las 17:44, Max Kovaljov notifications@github.com escribi\u00f3:\n\nyes\n\u2014\nReply to this email directly or view it on GitHub.\n. Where i can see how make that?\n\nSaludos Jes\u00fas Sales\nEl 13/01/2014, a las 20:32, Max Kovaljov notifications@github.com escribi\u00f3:\n\nMake WAUTH-2\n\u2014\nReply to this email directly or view it on GitHub.\n. i'm sorry...\n. Sorry @shirioko, if you say me the issue, i try to resolve my problem...\n. ok, i think that i bad translate your response, you are working in wauth-2... sorry for my english...\n. @shirioko if not working contact sync, it's possible that the phones that send messages will be bloked because not sync the contact list, NO?\n. There aren't a exactly number of messages to block, you must send messages as normally make a person, only a persons that you have in your address book, and the target must have you in him contacts\n\nSaludos Jes\u00fas Sales\nEl 16/01/2014, a las 19:47, faisalcse notifications@github.com escribi\u00f3:\n\nHow many message can be sent by one username and will be safe?\n\u2014\nReply to this email directly or view it on GitHub.\n. At the moment there are a problem with that function, @shirioko is working in that\n\nSaludos Jes\u00fas Sales\nEl 16/01/2014, a las 20:25, faisalcse notifications@github.com escribi\u00f3:\n\nhow can I sync contacts?\n\u2014\nReply to this email directly or view it on GitHub.\n. Hello! I think is better that you connect, collect messages, logout every x minutes, you can programming a cron task for this work\n\nSaludos Jes\u00fas Sales\nEl 16/01/2014, a las 19:25, Matthijs Otterloo notifications@github.com escribi\u00f3:\n\nHi,\nI've a problem. The bot keeps online for max 1 hour. After this hour the bot goes offline and doesn't come back online. It only goes offline if i reload the script. How can i fix this?\nGrtz,\nMatthijs\n\u2014\nReply to this email directly or view it on GitHub.\n. 24h per day over 7 days\n\nSaludos Jes\u00fas Sales\nEl 19/01/2014, a las 22:54, Matthijs Otterloo notifications@github.com escribi\u00f3:\n\n@shirioko what if i want the bot 24/7 online?\n\u2014\nReply to this email directly or view it on GitHub.\n. I test the get profiles with and without my number in the remote contact, I think that the problem have a relations with the wauth2\n\nSaludos Jes\u00fas Sales\n\nEl 07/02/2014, a las 14:48, park23 notifications@github.com escribi\u00f3:\n@mayankgupta thank you! now work))\n\u2014\nReply to this email directly or view it on GitHub.\n. I catch in some case without the remote hasn't my number\n\nSaludos Jes\u00fas Sales\n\nEl 07/02/2014, a las 15:03, marknick notifications@github.com escribi\u00f3:\nThat was my initial hunch too. If this is the case then shirioko's recent work in his fork might fix the issue.\nBut the problem here is, the with your number in remote contact's list you should be able to get the profile picture just fine?\n\u2014\nReply to this email directly or view it on GitHub.\n. Sorry, but you don't know that everyone think in god where the things isn't good....\n\nHere is the same, everyone think in shirioko when we have a problems, you are the god of the API\n;)\nSaludos Jes\u00fas Sales\n\nEl 07/02/2014, a las 18:18, Max Kovaljov notifications@github.com escribi\u00f3:\nJesus, I leave you guys alone for a day and I see my name all over the place\n\u2014\nReply to this email directly or view it on GitHub.\n. @shirioko For president... \n. Normal you can not see the image or new status at the time, in iOS you need close the Whatssap and enter, then your will can see the newest.\n\nThe Whatssap client not update the status and profiles pictures every time, it update after x minutes \nSaludos Jes\u00fas Sales\n\nEl 16/02/2014, a las 15:04, park23 notifications@github.com escribi\u00f3:\nwtf ? \n2014-02-16 16:59 GMT+06:00 kareree226 notifications@github.com: \n\n\u0628\u062a\u0627\u0631\u064a\u062e \u0660\u0667\u200f/\u0660\u0662\u200f/\u0662\u0660\u0661\u0664 \u0664:\u0665\u0669 \u0645\u060c \u062c\u0627\u0621 \u0645\u0646 \"OMendoza\" notifications@github.com: \n\n------------------- START: sendSetProfilePicture \ntx \ntx 12243 byte data \ntx 2621 byte data \ntx \nrx \nrx \nrx \nrx \nrx \n------------------- END: sendSetProfilePicture \nHave any idea? Thanks \n\u2014 \nReply to this email directly or view it on GitHub< \nhttps://github.com/venomous0x/WhatsAPI/issues/612> \n. \n\n\u2014 \nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/612#issuecomment-35193921 \n. \n\u2014\nReply to this email directly or view it on GitHub.\n. Hi, you only need put the connection to the db into the function fired for the event get messages and make the apropate insert...\n\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 12:34, MJ1994 notifications@github.com escribi\u00f3:\nHi,\nIs there a snippet, to receive incoming messages? And how can I that put in the SQL database?\n\u2014\nReply to this email directly or view it on GitHub.\n. In the function must be the connection mysql_connect(.....) if not write into the function is possible that not connect and not make the insert\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 13:19, MJ1994 notifications@github.com escribi\u00f3:\nI try to get it worked, but do not get it working..\nI have now this:\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\necho \"Message from $name:\\n$body\\n\\n\";\nmysql_query(\"INSERT INTO messages (phone, from, id, type, time, name, data) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\") or die (mysql_error());\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\nOr must the token, also be via urldecode?\n\u2014\nReply to this email directly or view it on GitHub.\n. Well, In many times I have a problem with the connections into a functions, then I make a function where make a connections with globals variables and into a new function I call the connection function, try this... But what is the problem that you have at now???\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 14:04, MJ1994 notifications@github.com escribi\u00f3:\nYes I know, I have another file with the details to make SQL connection, and have that included in the page where I have placed the above mentioned code, but it doesnt work..\n\u2014\nReply to this email directly or view it on GitHub.\n. Try to include the connection just over of insert, into the function and writte mysql_query(....) or die(mysql_error());\n\nIf not insert,  the error will be written\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 14:48, MJ1994 notifications@github.com escribi\u00f3:\nNope :-( I have checked all the columns in the database and that is correct, and (mysql_error()); doesn't give failures..\n\u2014\nReply to this email directly or view it on GitHub.\n. The same that I mentioned before... I'm sure that the problem is there\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 14:53, Max Kovaljov notifications@github.com escribi\u00f3:\nTry to import the global connection identifier:\nin your connect include script\n$conn = mysql_connect($foo, $bar, $baz);\nand in the event handler:\n{\n    ...\n    global $conn:\n    mysql_query($query, $conn) or die(mysql_error($conn));\n}\n\u2014\nReply to this email directly or view it on GitHub.\n. Pufff!!! The error is because you need to connect to database from the function, when you call a function nothing that not exist into the function exist, a function is another world into other, please into the function make a connection to database and later make a query...\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 15:11, MJ1994 notifications@github.com escribi\u00f3:\nDone, but no text with failures\n\u2014\nReply to this email directly or view it on GitHub.\n. Me too\n\nSaludos Jes\u00fas Sales\n\nEl 28/03/2014, a las 16:56, Max Kovaljov notifications@github.com escribi\u00f3:\nHa, suckers!\nI can login just fine ^^\n\u2014\nReply to this email directly or view it on GitHub.\n. try to put debug mode and paste the code here, but is possible a block...\n\n2014-03-30 13:19 GMT+02:00 MJ1994 notifications@github.com:\n\nI receive a text with at the bottom of the text:\nrx\nrx\nrx\nThat means that there is no connection? Can it be that WhatsAPI have a\nsession-system or something else? Because I have not reload the\nexampleRegister.php..\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/654#issuecomment-39023091\n.\n. my lines works ok\n\n2014-03-30 13:31 GMT+02:00 Jesus Sales jesussales@gmail.com:\n\ntry to put debug mode and paste the code here, but is possible a block...\n2014-03-30 13:19 GMT+02:00 MJ1994 notifications@github.com:\nI receive a text with at the bottom of the text:\n\nrx\nrx\nrx\nThat means that there is no connection? Can it be that WhatsAPI have a\nsession-system or something else? Because I have not reload the\nexampleRegister.php..\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/654#issuecomment-39023091\n.\n. only that?? normaly debug is biger, look for a line that say  or\n in debug print\n\n\n2014-03-30 13:33 GMT+02:00 MJ1994 notifications@github.com:\n\ntx ]\u2039F'31627308530.\u00c0\u00bc\u00e3\u00b5+N {\u00fdz37\u00e9]\u00c9lU1396178291WhatsApp/2.11.151\nAndroid/4.3 Device/GalaxyS3 MccMnc/204001\nrx\nrx stream:features/stream:features\nrx \u201az\u00c2\u00ae\u00ab\u00c9\u00f4Y\u00f6M\u02dcV\u00b4\u00ff\u00b4\u00c3\u00e5\u00be\ntx \u00e6\u00dd\u00f5Q\u0153\u00f6\u00b2\u00da\u00bdo\u00b1Q\u00d7\u00dc\u00fc\u0161i\u00d10\u00b9\u00ab\u02dc,Y\u00bc\u00fdn#.\u00bb\u201a\u0153i\ntx\ntx\ntx\ntx\ntx\ntx\ntx\ntx test\ntx\nrx\nrx\nrx\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/654#issuecomment-39023297\n.\n. Non autorize, can be temporally or block, @shirioko, are there a method to know why is non autorize no???\n\nSaludos Jes\u00fas Sales\n\nEl 30/03/2014, a las 13:36, MJ1994 notifications@github.com escribi\u00f3:\ntx  ]\u2039F'31627308530.\u00c0\u00bc\u00e3\u00b5+N\u0090{\u00fdz37\u00e9]\u00c9lU1396178291WhatsApp/2.11.151 Android/4.3 Device/GalaxyS3 MccMnc/204001\nrx  \nrx  stream:features/stream:features\nrx  \u201az\u00c2\u00ae\u00ab\u00c9\u00f4Y\u00f6M\u02dcV\u00b4\u00ff\u00b4\u00c3\u00e5\u00be\ntx  \u00e6\u00dd\u00f5Q\u0153\u00f6\u00b2\u00da\u00bdo\u00b1Q\u00d7\u00dc\u00fc\u0161i\u00d10\u00b9\u00ab\u02dc,Y\u00bc\u00fdn#.\u00bb\u201a\u0153i\ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    test\ntx  \nrx  \nrx    \nrx  \n\n\u2014\nReply to this email directly or view it on GitHub.\n. Your number is blocked by Whatssap, I don't know any method to re register again... You must reguster another phone number and will be more careful with that number.\n\nSaludos Jes\u00fas Sales\n\nEl 30/03/2014, a las 14:04, MJ1994 notifications@github.com escribi\u00f3:\nWhen I try to register the number again, i receive:\nArray ( [cc] => 31 [in] => SENDER [id] => ID [code] => CODE [c] => cookie ) stdClass Object ( [status] => fail [reason] => blocked )\n\u2014\nReply to this email directly or view it on GitHub.\n. You can try with wart\n\nSaludos Jes\u00fas Sales\n\nEl 06/04/2014, a las 09:52, faisalcse notifications@github.com escribi\u00f3:\nI try to register 25 numbers but after 20. it stop.\n\u2014\nReply to this email directly or view it on GitHub.\n. https://github.com/shirioko/WART\n\nWart is an application GUI with you can register a number to use in Whatssap.\nTry with this, for me is the best mode to register\nSaludos Jes\u00fas Sales\n\nEl 06/04/2014, a las 12:57, faisalcse notifications@github.com escribi\u00f3:\nwart mean? how can we do that?\n\u2014\nReply to this email directly or view it on GitHub.\n. No??? Everytime for me is good... Is the first time that I know over a problem with wart... Now I'm not in my home and I can't see anything, this afternoon when I will arrive to my home I would can try to test your problem... If you can wait... But wart is a develop of @shirioko, if he read this issue, maybe can do something or can say where is the problem.\n\nSaludos Jes\u00fas Sales\n\nEl 06/04/2014, a las 13:20, faisalcse notifications@github.com escribi\u00f3:\nI face some problem like sometimes SMS not come, some times voice not come. will WART help in this case?\n\u2014\nReply to this email directly or view it on GitHub.\n. Sorry, can you send me your phone number to jeaussales@gmail.com ? and I try to register the number.\n\nSaludos Jes\u00fas Sales\n\nEl 08/04/2014, a las 07:35, faisalcse notifications@github.com escribi\u00f3:\nI am facing problem with WART. It is giving error:\n\"Could not request verification code. The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\"\n\u2014\nReply to this email directly or view it on GitHub.\n. Sorry jesussales@gmail.com\n\nShirioko say that is fixed, can you say me if is ok for you? Or dpi you need help??\nSaludos Jes\u00fas Sales\n\nEl 08/04/2014, a las 09:19, Max Kovaljov notifications@github.com escribi\u00f3:\nFixed in WART 1.6.5.0\n\u2014\nReply to this email directly or view it on GitHub.\n. Try with a relative direction of image, not absolute...\n\nSaludos Jes\u00fas Sales\n\nEl 25/05/2014, a las 18:07, blackhackereg notifications@github.com escribi\u00f3:\ni am trying to change my profile picture but no result this is my code\n$w = new WhatsProt($userPhone, $userIdentity, $name, true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->sendSetProfilePicture(\"http://www.expresswapp.net/Whatsapp.jpg\");\nany idea !!\n\u2014\nReply to this email directly or view it on GitHub.\n. Today I change my picture and status ok... Try with exampleFunctional.php mode\n\nSaludos Jes\u00fas Sales\n\nEl 28/05/2014, a las 22:06, mgp25 notifications@github.com escribi\u00f3:\n@blackhackereg Did you try exampleFunctional.php? It should replace your actual profile picture by x3.jpg that is placed in the folder demo.\nIt works to me\n\u2014\nReply to this email directly or view it on GitHub.\n. I think that the problem is inside into a while, because you make a sleep, the problem is in there...\n\nI think is better try while (true){ limit(60);\n}\nThis method no make a pause in script... Or you can make a Ajax call from other page with interval that you want...\nSaludos Jes\u00fas Sales\n\nEl 27/05/2014, a las 14:24, mgp25 notifications@github.com escribi\u00f3:\n@shirioko Right, but if i use:\necho \"Test\";\ninstead, still not work. Maybe the while interfere to display the text?\n\u2014\nReply to this email directly or view it on GitHub.\n. Is spam\nEl 07/11/2014 21:10, \"mrssam\" notifications@github.com escribi\u00f3:\nis any way to send 1000 whatsapp message in 5 mins i have contacts in\nmysql database ?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62204529.\n. i think that function on whatssap not is ok.... now i test the phone number\nof my grandmother and say created is not true...\n\n2014-11-10 17:24 GMT+01:00 nikfariz notifications@github.com:\n\nTo check on whether your students have whatsapp in their phone, do this:\nhttps://v.whatsapp.net/v2/exist?in=&cc=\nfor example, enter the following in your browser :\nhttps://v.whatsapp.net/v2/exist?in=012XXXXXXX&cc=XX\n(replace X with the appropriate numbers, where \"in\" is the phone number\nwithout the country code and \"cc\" is the country code)\nof course, to do this for all students, you'd have to loop this code in an\nSSL CURL\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62409689.\n. And lo gin? ?????\nEl 21/09/2014 12:36, \"Anas Abu Sall\" notifications@github.com escribi\u00f3:\nrequire_once 'whatsprot.class.php';\nrequire_once 'vCard.php';\n$target = \"970598266402\";\n$username = \"13153148115\";\n$password = \"zMyT9VHAP8MyQj5ZHLB40Tr25bA\";\n$w = new WhatsProt($username, 0, \"Anas\", true);\n//send picture\n$w->sendMessageImage($target, \"demo/x3.jpg\");\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/970#issuecomment-56295091.\n. @mgp25 if i want generate a pw file??? The extractor read a pw file and\nmake proccess to extract The pass but if i have a pass. .. do you know how\ncreate The file? Or how edit pw to inject the pass??\nEl 12/02/2015 15:08, \"mgp25\" notifications@github.com escribi\u00f3:\n@Killer1337 https://github.com/Killer1337 it doesnt do the same, one\nthing is register the number, the other is extract the password. You should\ngo here: https://github.com/mgp25/WhatsAPI-Official its more updated and\nhave all the documentation about the API.\nRegards\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-74075657.\n. Only want to Know.... can you say me how create it?\nEl 12/02/2015 22:21, \"mgp25\" notifications@github.com escribi\u00f3:\n@jesussales https://github.com/jesussales Yes, its possible to generate\nthe password but why? Use WhatsAPI Official instead of this repo.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-74155178.\n. Wart is working ??\nEl 19/11/2014 10:07, \"Gowri Sankar\" notifications@github.com escribi\u00f3:\n@mgp25 https://github.com/mgp25 Thanq very much... It's working perfect.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1033#issuecomment-63610333\n.\n. What's That????\nEl 23/12/2014 13:30, \"mmmaaammm\" notifications@github.com escribi\u00f3:\n\u0627\u0646\u0627 \u062c\u062f\u064a\u062f \u0645\u0627 \u0627\u0639\u0631\u0641 \u064a\u0627 \u062e\u0648\u0643 \u0644\u0648 \u0627\u0639\u0631\u0641 \u0627\u0628\u0634\u0631 \u0628\u0627\u0644\u062e\u064a\u0631 \u0628\u0633 \u0627\u0644\u0631\u0628\u0639 \u0645\u0627 \u064a\u0642\u0635\u0631\u0648\u0646 \u064a\u0636\u0628\u0637\u0648\u0646\u0643\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1060#issuecomment-67946492\n.\n. Please in english. ...\nEl 23/12/2014 15:50, \"ahmdoooh\" notifications@github.com escribi\u00f3:\n\u0645\u0627\u0639\u0631\u0641 \u0627\u062d\u062f \u064a\u0627\u0644\u063a\u0644\u064a \u062f\u0644\u0646\u064a \u0639\u0644\u0649 \u0627\u062d\u062f \u064a\u0639\u0631\u0641\nDate: Tue, 23 Dec 2014 06:29:15 -0800\nFrom: notifications@github.com\nTo: WhatsAPI@noreply.github.com\nCC: a777c@hotmail.com\nSubject: Re: [WhatsAPI] \u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645 (#1060)\nWhat's That????\nEl 23/12/2014 13:30, \"mmmaaammm\" notifications@github.com escribi\u00f3:\n\n\u0627\u0646\u0627 \u062c\u062f\u064a\u062f \u0645\u0627 \u0627\u0639\u0631\u0641 \u064a\u0627 \u062e\u0648\u0643 \u0644\u0648 \u0627\u0639\u0631\u0641 \u0627\u0628\u0634\u0631 \u0628\u0627\u0644\u062e\u064a\u0631 \u0628\u0633 \u0627\u0644\u0631\u0628\u0639 \u0645\u0627 \u064a\u0642\u0635\u0631\u0648\u0646 \u064a\u0636\u0628\u0637\u0648\u0646\u0643\n\u2014\nReply to this email directly or view it on GitHub\n<\nhttps://github.com/venomous0x/WhatsAPI/issues/1060#issuecomment-67946492>\n.\n\n\u2014\nReply to this email directly or view it on GitHub.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1060#issuecomment-67957929\n.\n. That is a PHP configuration max_execution_time... you can change in php.ini\nor con init_set ('max_execution_time', seconds)\n\nEl 7 dic. 2017 14:58, \"carlositos\" notifications@github.com escribi\u00f3:\nHi!\nI have the same issue. Does anyone fix this?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1221#issuecomment-349974102,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ACrGGN5Hc1TDF7rdiPDg8p6BwPjIRmJPks5s9-7ogaJpZM4PG61q\n.\n. ",
    "burpy": "I put it now after the logon but it doesn't solve the problem. :-( No message on my phone with this line ($wa->sendNickname(\"Test\");) active\n. Yes. Great job the nickname at the locked display on an iPhone works now! But why do I need \n$wa->sendNickname(\"myName\"); in addition to $wa = new WhatsProt($sender, $imei, \"myName\", false); ?\n. worked for me after this changes.\n. ",
    "montasir1": "Iam not understand ur question?\nliana medical company ltd.co\nGad Greeb Building \nFirst floor \nNorth Al Fardous Hotel \nP.O. Box 13511\nsudan - khartoum \nTel: +  249 155 109673 \nFax: + 249 183 793072\nskype liana_company\n\nFrom: Andr\u00e9s notifications@github.com\nTo: venomous0x/WhatsAPI WhatsAPI@noreply.github.com \nSent: Wednesday, September 26, 2012 5:24 PM\nSubject: Re: [WhatsAPI] Blackberry seems to not use IMEI as password (#78)\nWhat BB u have? And what's your RIM OS? >_< \n\u2014\nReply to this email directly or view it on GitHub.\n. \u0645\u0631\u062d\u0628\u0627\u064b\u060c \n\u0644\u0642\u062f \u062d\u0645\u0644\u0651\u062a WhatsApp Messenger \u0639\u0644\u0649 \u062c\u0647\u0627\u0632 \u0623\u064a \u0641\u0648\u0646 \u0627\u0644\u062e\u0627\u0635 \u0628\u064a.\n\u0647\u0648 \u0643\u0646\u0627\u064a\u0629 \u0639\u0646 \u062a\u0637\u0628\u064a\u0642 \u0644\u0644\u0645\u0631\u0627\u0633\u0644\u0629 \u0627\u0644\u0641\u0648\u0631\u064a\u0629 \u0623\u0639\u062f \u0644\u0644\u0647\u0648\u0627\u062a\u0641 \u0627\u0644\u0630\u0643\u064a\u0629 \u0648\u0645\u0646 \u0634\u0623\u0646\u0647 \u0623\u0646 \u064a\u063a\u0646\u064a\u0643 \u0639\u0646 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629. \u0643\u0645\u0627 \u064a\u062a\u064a\u062d \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0635\u0648\u0631 \u0648\u0627\u0644\u0641\u064a\u062f\u064a\u0648 \u0648\u063a\u064a\u0631\u0647\u0627 \u0645\u0646 \u0627\u0644\u0648\u0633\u0627\u0626\u0637! \n\u0625\u0646 \u062a\u0637\u0628\u064a\u0642 \u0648\u0627\u062a\u0633\u0627\u0628 \u0645\u062a\u0648\u0641\u0631 \u0644\u0644\u0623\u062c\u0647\u0632\u0629 \u0627\u0644\u062a\u0627\u0644\u064a\u0629: \u0623\u064a \u0641\u0648\u0646\u060c \u0623\u0646\u062f\u0631\u0648\u064a\u062f\u060c \u0646\u0648\u0643\u064a\u0627 \u0648\u0628\u0644\u0627\u0643 \u0628\u064a\u0631\u064a. \u0648\u0647\u0648 \u0644\u0627 \u064a\u062a\u0637\u0644\u0628 \u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644 \u0623\u0648 \u062d\u0641\u0638 \u0627\u0633\u0645 \u0645\u0633\u062a\u062e\u062f\u0645 \u0648\u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631. \u0643\u0645\u0627 \u064a\u0639\u0645\u0644 \u062a\u0645\u0627\u0645\u0627\u064b \u0645\u062b\u0644 \u0627\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629 \u0648\u064a\u0633\u062a\u062e\u062f\u0645 \u062e\u0637\u0629 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a \u0644\u0644\u0645\u0631\u0627\u0633\u0644\u0629. \n\u0627\u062d\u0635\u0644 \u0639\u0644\u0649 \u0627\u0644\u0628\u0631\u0646\u0627\u0645\u062c \u0627\u0644\u0622\u0646 \u0645\u0646 \u0647\u0630\u0627 \u0627\u0644\u0631\u0627\u0628\u0637 http://www.whatsapp.com/download/ \u0648\u0642\u0644 \u0648\u062f\u0627\u0639\u0627\u064b \u0644\u0644\u0631\u0633\u0627\u0626\u0644 \u0627\u0644\u0646\u0635\u064a\u0629.\n\u200f\u0645\u0646 \u062c\u0647\u0627\u0632 \u0627\u0644\u0640 iPhone \u0627\u0644\u062e\u0627\u0635 \u0628\u064a\n. How I can do that I have whatsapp share\n. Give me more informations I am not familair with yet.\n\u00a0\nliana medical company ltd.co\nGad Greeb Building \nFirst floor \nNorth Al Fardous Hotel \nP.O. Box 13511\nsudan - khartoum \nTel: +  249 155 109673 \nFax: + 249 183 793072\nskype liana_company\n\nFrom: yairnet notifications@github.com\nTo: venomous0x/WhatsAPI WhatsAPI@noreply.github.com \nSent: Wednesday, September 26, 2012 10:09 PM\nSubject: Re: [WhatsAPI]  check the reliability of the system (#85)\nYour example is only sending the first message - why? \n\u2014\nReply to this email directly or view it on GitHub.\n. what is dst = \"34**\";\n i tried to fix the process but I failled\n. the errorr Fatal error: Class 'WhatsProt' not found in C:\\xampp\\htdocs\\w.php on line 13\n. Iam sharing whatsapp but how I can do\n. I enter google GPRS but how can I send\n. What u get\n. What is on\n. ",
    "jandrito80": "I want to save in my database, the answer to my message sent\n. On this website 'http://websapp.net/main.html' you can send messages to any number, and receive messages and photos. \nCan this be done?\nAnd How I can know the status of the sent message? If delivered or not.\nThanks\n. I already installed this version, but it didn't work. I do not understand the requirements of this version and I have not found any manual. when I open the page index.com, the links \"LOG IN\" and \"Please, sign me in \"don't work\n. Hello. Now I can get the name of the group with this function:\n\n\n\nBut I'm trying many codes and I can not get the image of the group or contact\nDoes anyone know how to do it?\n. Hi, again, \nAnyone know how to get a picture of a contact?\nI'm trying but I did not succeed...\nthxs\n. I can extract code from yowsup (python)\nI have found 2 functions:\ndef sendGetPictureIds\ndef sendGetPicture\nWhen I send this extructure (sendGetPictureIds) by php:\n\n\n\n\n\n\nI received this:\n\n\n\n\n\n\nThe \"id\" received is unix time (when picture was updated).\nWhen i send this extructure (sendGetPicture):\n\n\n\n\nI received nothin. I'm lost. Please help me. Do I must to use the picture id somehow?\n. My question is if i can send contact from php-api to whatsapp-phone.\nis it possible?\n. hi, you are doing a great job..... I have read all issues and i will try to help.\n! \nI have can to verify that www.websapp.net works!!\nThen I think that this project it possible.\n. @waninkoko It's great. It works perfectly. I can send and receive messages.\nThank you very much.\nBut I have a small query.\nWhen I receive a picture, the thumbnail appears to be encrypted. How can decrypted?\nAgain, thank you very much\n. @beldar I only add this code:\n            echo '';\n            print_r($node);\n            echo '';\nin protected function processInboundData($data), between $node = $this->reader->nextTree($data); and while ($node != null) to show the structure of the nodes received.\nAbout thumbnail received, it is not in base64, it is not encoded and not encrypted.\nI only add:\n$thumbn=$node->_children[2]->_data;\n$fp2= fopen(\"demo/img\".time().\".jpg\", \"w\");\nfwrite($fp2, $thumbn);\nAnd image is create with thumbnail.\nI have tried send thumbnail in the same way, but it does not work. Thumb is not sent.\nAny suggestions to send the thumb?\n. sorry, how can i write code in php here?\n. READ\nProtocolNode Object\n(\n    [_tag] => message\n    [_attributeHash] => Array\n        (\n            [from] => 34699XXXXXX@s.whatsapp.net\n            [id] => 1352290043-146\n            [type] => chat\n            [t] => 1352391240\n        )\n```\n[_children] => Array\n    (\n        [0] => ProtocolNode Object\n            (\n                [_tag] => notify\n                [_attributeHash] => Array\n                    (\n                        [xmlns] => urn:xmpp:whatsapp\n                        [name] => Alejandro\n                    )\n            [_children] => \n            [_data] => \n        )\n\n    [1] => ProtocolNode Object\n        (\n            [_tag] => request\n            [_attributeHash] => Array\n                (\n                    [xmlns] => urn:xmpp:receipts\n                )\n\n            [_children] => \n            [_data] => \n        )\n\n    [2] => ProtocolNode Object\n        (\n            [_tag] => media\n            [_attributeHash] => Array\n                (\n                    [xmlns] => urn:xmpp:whatsapp:mms\n                    [type] => image\n                    [encoding] => raw\n                    [url] => https://mms816.whatsapp.net/d/CcmT-D-ZItt5jmdmjePiqTWaf5g/AtIzWvxcPpIuJi9ytMaDMaFL8GlYp4L-na8jFNVHIhQf.jpg\n                    [file] => AtIzWvxcPpIuJi9ytMaDMaFL8GlYp4L-na8jFNVHIhQf.jpg\n                    [size] => 40863\n                    [mimetype] => image/jpeg\n                    [filehash] => M9Z0KvA1U3I9mt1LU94iGT0PyZ3k5BL6LbD//40zkt8=\n                    [width] => 800\n                    [height] => 600\n                )\n\n            [_children] => \n            [_data] => \u00ff\u00d8\u00ff\u00e0\u0010JFIF\u0001\u0001\u0001\u0001\u00ff\u00dbC\u0006\u0004\u0005\u0006\u0005\u0004\u0006\u0006\u0005\u0006\u0007\u0007\u0006\b\n\n```\n\u0010\n\u0014\u000e\u000f\f\u0010\u0017\u0014\u0018\u0018\u0017\u0014\u0016\u0016\u001a\u001d%\u001f\u001a\u001b#\u001c\u0016\u0016 , #&')*)\u0019\u001f-0-(0%()(\u00ff\u00dbC\u0001\u0007\u0007\u0007\n\b\n\u0013\n\u0013(\u001a\u0016\u001a((((((((((((((((((((((((((((((((((((((((((((((((((\u00ff\u00c0\u0011\bKd\u0001\"\u0011\u0001\u0011\u0001\u00ff\u00c4\u001f\u0001\u0005\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0004\u0005\u0006\u0007\b\n\u000b\u00ff\u00c4\u00b5\u0010\u0001\u0004\u0005\u0005\u0004\u0004\u0001}\u0001\u0004\u0011\u0005\u0012!1A\u0006\u0013Qa\u0007\"q\u00142\u0081\u2018\u00a1\b#B\u00b1\u00c1\u0015R\u00d1\u00f0$3br\u201a \n\u0016\u0017\u0018\u0019\u001a%&'()456789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u00a2\u00a3\u00a4\u00a5\u00a6\u00a7\u00a8\u00a9\u00aa\u00b2\u00b3\u00b4\u00b5\u00b6\u00b7\u00b8\u00b9\u00ba\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00e1\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00f1\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00ff\u00c4\u001f\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0001\u0004\u0005\u0006\u0007\b\n\u000b\u00ff\u00c4\u00b5\u0011\u0001\u0004\u0004\u0004\u0007\u0005\u0004\u0004\u0001w\u0001\u0011\u0004\u0005!1\u0006\u0012AQ\u0007aq\u0013\"2\u0081\b\u0014B\u2018\u00a1\u00b1\u00c1  #3R\u00f0\u0015br\u00d1\n\u0016$4\u00e1%\u00f1\u0017\u0018\u0019\u001a&'()_56789:CDEFGHIJSTUVWXYZcdefghijstuvwxyz\u201a\u0192\u201e\u2026\u2020\u2021\u02c6\u2030\u0160\u2019\u201c\u201d\u2022\u2013\u2014\u02dc\u2122\u0161\u00a2\u00a3\u00a4\u00a5\u00a6\u00a7\u00a8\u00a9\u00aa\u00b2\u00b3\u00b4\u00b5\u00b6\u00b7\u00b8\u00b9\u00ba\u00c2\u00c3\u00c4\u00c5\u00c6\u00c7\u00c8\u00c9\u00ca\u00d2\u00d3\u00d4\u00d5\u00d6\u00d7\u00d8\u00d9\u00da\u00e2\u00e3\u00e4\u00e5\u00e6\u00e7\u00e8\u00e9\u00ea\u00f2\u00f3\u00f4\u00f5\u00f6\u00f7\u00f8\u00f9\u00fa\u00ff\u00da\f\u0001\u0011\u0011?\u00e9\u00a4\u00b0\u017d\u00e5\u0011\u00e2\u2122\u00e3\u0004\u00ac\u00ab\u00b0\u00f2\u00a4\u0090\u000f\u00a1\u0006\u00adMqug\u00b9d\n$#\u008f5@\u00c8\u00ffx\u000f\u00e6?!\\\u00e7\u2021\u00e6\u00cc\u0016{Y\u2022d\u20ac\u00ee\u0019\u00e3p\u0153v\u00ef]Ls\u20149\u00ed\u00c1\u00cf\u00e1XF\u00ab\u2020\u2026\u00ce\u201ef\u00b5:\u0178\u2020\u00ba\u0153f\u00ebQ\u00f3\u00a6]\u008d\u001cL\u00a4\u017e\u000e\u000b\u00f7\u00fcEv\u00b7\u0161\u008d\u02dc\u00b7\u2018\u001e\u00e21\u00b9H\u001c\u00fa\u0160\u00f9\u00dfQ\u00f1V\u2018a\u00ab\u00cd\u001d\u00bc\u00b7\u0011\u00dc+\u0014\u01618\u00a3\u00e1\u00bf\u00fa\u00f9\u00ee(\u007f\u001b\u00dbK\u00f7-\u00f59N1\u00c4_\u00fdz\u00d5\u00a9M\u00dd!B\u0010\u201a\u00b4\u2122\u00efvz\u00ed\u01520C\u001d\u00c5\u00c4h\u00c9\u0018V9\u00cf#\u0160\u00e1>;j\u00d6\u0017\u00bf\u000f\u00ee#\u00b7\u00b8Y%I\u00e3>\u00bf\u00e0k\u00ce\u00cf\u0152\u0004\u2039\u00fb\u009d+U\u2018\u00b1\u201aB\u001f\u00f1\u00ac\u000f\u0015\u00f8\u017d]CE\u017e\u00dd\u00b4\u00ab\u00d8\u0011\u0160\u201c<\u00b9\u00da\u00b8#\u00af\u00e5W\bM=\u2021'M\u00ad\u0019\u00e7W$\u2030H9\u0007\u00de\u00b2.\u00cf\u00ef[\u00eb[\u00b6\u00da~\u00a3\u00acO<\u00ba}\u2022\u00c5\u00d1\n\u00b9\u00fc\u00a4-\u00b79\u00eaGN\u00f5+\u00f8+\u00c4s1#H\u00b9\u0019\u00f5\u0018\u00feu\u00d0\u00d3z\u0153\u00fc\u00c9is\u017d\u203a\u00a9\u00aa\u00ce+\u00bb_\u2021>'\u2014\u00a6\u2122\u008f\u00f7\u00a5A\u00ff\u00b3V\u0017\u2030|7\u007f\u00e1\u00eb\u02dc \u00d4\u20135y\u0017x\b\u00db\u00b8\u00a8\u00e5\u0005$\u00cel\u0160iZ\u00b8c\u00f6\u00a6\u00f9F\u017dVQH\u00af\u00b5\u0015o\u00ca\u00faQG \\\u00fa\n\u001f\u2020\u00e9\u0018_\u00f8\u203a\u00de\u2026\u0018\u00e8\u00f8\u00fa\u00d5\u0178\u00f8W\u00ca\u0192'Y\u00bf\u00ff\u00be\u00eb\u00d2L\u007f\u00bbn;TG2D  \u00c0\u00cdc\u00ed\u0019\u00bf\u00b3G\u2020\u00f8B'\u00b4\u00f1\u00e4\u00b0<\u008d!\u2020g\u008d\u009d\u008f,2W'\u00f3\u00afz\u00b7\u00b1\u201e\u0001;}2\u007f\u00a5x\u0006\u00b1\u00fe\u0192\u00f1J^p\u0005\u00dcr~\u0007k\u007fZ\u00fa\u001a\u00d9\u017d\u00c8\u00cbeG9\u00ab\u00a8\u00dd\u201c9%\u00a3h\u00b9\n\u0153\u0018\u001b\u2018[\u0015\u00e1\u007f\u001b\u00fcUow|\u00ba.\u02dc\u00c3\u00c8\u00b6bge\u00e8\u00f2z~\u001f\u00ce\u00bb\u00cf\u0160~4O\f\u00e8\u008d\u0005\u00ac\u00bf\u00f13\u00baR\u00b1I1\u00afB\u00ff\u00e1\u00ef\u00f4\u00af\u02dc\u00ee.\u000b\u00bb31,NI\u00a2\u009d\u00f7a\b\u00f5>\u00a1\u00f85 \u00c3c\u00e0\u00ab[\u2013P\u00d3\u00de\u201c;\u00b7\u00b6p\u00a3\u00f2\u0019\u00fcMw_f\u2030Fv \u001fJ\u00f8\u00fbK\u00f1\u00c7\u02c6t\u00ebx\u00ad\u00ac\u00b5\u203a\u00c8m\u00e3\u001bR1!\u00da\u00a3\u00d8S5\u001f\u0017\u00eb\u001a\u02c6e\u00bd\u00d4\u00ef.Cu\u00f3e$~8\u00148\u00dd\u0192\u00a6\u00efs\u00ec\u0019!\u0152\u000e\u0015\u007f\u00f1\u00af\u2030Z\u0014\u001a\u00ff\u00c4}\u0017O\u00b8,\"\u2013\u00d9\u00c9\u00db\u00c1\u00e3q\u00fe\u2022\u00f6y\u00bf\u00b8\u2122\u00f5+y\u00ef\u00d5\u00a1\u00da\u00a6;f\u2014,\b<\u00b2\u00aex\u001c\u00f2~\u2022\u00d2k\u0081W\u00e3\u0017\u2021\u2030\u00e8me\u00eb\u00fe\u00eb\u00d3\u00a2\u00adQ&JVv2\u00cf\u00c2\u000f\u00db\u00a2\u00b4\u2018\u00cf)\u00f42\u0011\u0161\u00b9o\u00f0\u00ff\u00c3\u00ca\u00a7\u001a\u017e?\u02c6\u0192\u00fc\u00da\u00bd0$R\u001e\u00a7\u00db\u008f\u00fe\u00b5J\"OJ\u00f5y\u00d7cU\u0013\u00cdS\u00c0:\b.\u2021\u0006=\u00f9\u00a2\u00bd\u001d\u20190y\u00feTQ\u00edXr#4\u0005#\u017ej\u0019\u2018'h\u00a8\n\u00ca $\u00b0w&\u00b3/|M\u00a3Z\u201a.\u00b5[(\u00c8\u00ec\u00d3(?\u2013s^\u0019\u00d9s\u00c7>&\u00ff\u00a3|D\u00de\u00bcy\u2030\u001b\u008f\u00cbo\u00f4\u00afd\u00d6|]\u00a6\u00f8\u007fC\u0160\u00ea\u00fe\u00e0+\u00b4y\u017d\u0015?<\u017e\u00c0\u007fZ\u00f1\u001f\u0160\u00da\u00be\u009d\u00a8\u00f8\u201a\u00d2\u00ffN\u00b9Y\u00a3\u017d\u0010\u2021h#s\u0006c\u00df\u00b7=k\u0081\u00d4\u00b5;\u2039\u00fb\u2020\u0161\u00eaV\u2018\u00cf\u00b1\u00ce\u00e8\u0005l\u00ed(\u00a4\u00fa\u001cr\u00a7y\u00b7\u00d0\u00d8\u00f1w\u02c6\u00ee|E\u00ad\\\u00ea7g\n!\u00f9P\u001e\u0011GE\u0015\u00ce\u00bc\u0153\u00d4f_z\u2026\u00df\u0161.ZV%2s\u00d6\u0178\u001c\u017e\u00b5Ow\u00bd9\u001c\u008fJi\u2026\u008fi\u00fd\u017e\u00acm\u00ee|K=\u00e3]\u201d\u00b8\u00b4\u2030\u0160\u00db\u2026\u00fb\u00e1\u00beR\u00c4\u00fa\f\u00f4\u00f7\u0015\u00e8Z\u00d9\u00dd\u00f1\u201c\u00c3#?z\u00deo\u00fd\u0001\u00eb\u00c2\u00fc\n\u00e3\u00bf\u00f8D\u00a2\u2022\u00act\u00c8e\u00bd\u2022v\u00bd\u00c4\u2019\u001c\u00ed\u00ceB\u0081\u00d8p>\u00b5n\u00f3\u00e2v\u00a9u\u00e2{\nm \u00b6K\u2039%d\u008dT6\u00d2\u0018\u0010s\u00cf\u00b9\u00aa\u00a7\u00f1\u00dd\u00ecb\u00d3\u00e6\u00b9\u00f5\u00b1\u2030\u2020\u0006G\u00d4 \u00a7\u02c6\u00cf_\u00dd\u00e7\u00e9_7G\u00f1\u00c7^\u2022r\u00bau\u00b3l\u001c\u201d\u00f38\u001e\u00fc\u0161p\u00f8\u00ed\u00aaw\u00d3\u00e0\u00ff\u00bf\u00ad]\u00d7\u008fr\u00d4\u008f\u00a2\u00d9\u001b?y?#E|\u00ec>;\u00ea\u0007\u00ae\u009d\u0017\u00e1)\u00ff\n(\u00bc{\u008f\u02dc\u00f2\u00eb\u2122\u00ef.\u00bek\u00cb\u00c9e>\u00ae\u00e5\u00ff\u009dB\u00e8\u0090\u00f2\u009d\u00c3\u0019U\u00f5\u00fa\u00fbT\u00f7\u0161\u0160\u00a8g\u00f2\u00d5\u001d\u008f\n;}k\n{\u2021\u2022\u20393\u0012My\u00d7(\u017e{\u2013\u2022\u00f2M@\\\u00d4[\u00a9\u0001\u00e2\u0090\u00c97Q\u00c9\u00e83W\u00act\u00d9&\u0152Hp\u0014\u00f4\u00cd[\u2014N\u00f2\u00a2\u00de\u00d2\u20acG\u00f0\u00e3\u00adK\u0161\u0015\u2022\u2014\u0019\u001dj3\u0153u\u00ad \u00bc\u02c6\u00b1F]\u00d8\u2026\u00db\u0178Z\u00b5{\u00a2]G\u0011w\u00b4Q\u0081\u2019|\u00c5\u00e0~t\u00d4\u201e\u00cc\u0004~H\u00ce>\u00b4\u00e5|\u0153\u0006\u00a7\u00dd\u00a1\u017dO/j\u00af\u0019'9\u00aa\u203a\u20ac\u00e9\u00d6\u00adh+\u0017\u20acy\u00cf\u00e1M2|\u00c4H\u00ecO\u0015\u0006N>\u00f2\u00d2\u0010\u00c0\u00e0\u00e3\u017ej\u00d3v\u0011c\u00cc\u00f5\u00cd\u0015\u0007\u2013\u00de\u201dS\u00b3I%.I9\u00a8\u00f7Rz\u00d2V\u0005\u000e\u0006\u00a7\u00b6P\u00f3.\u00ef\u00b9\u00d5\u00b1\u00e9U\u00e9\u00fb\u00da8\u00f2\u2021\u0004\u017eh@v\u0016\u00f6\u0160\u00f1\u00a9\u2020G\bzm\u00e9M\u00b8\u00b4XT\u00ca\u00ee\u00d8\u001ds\u00cdgh$\u00bd\u017d\u0018\u2019\u000b\u0013\u00cf\u00e1Z\u0006\u0018\u00b3\u00fe\u00ad?_\u21224\u00b4C\u0160\u00b9ZG\u00df\f\u00ace\u0152\u008d\u00b8O\u0178\u0004\u000f\u00a5dH\u00d2_\u00e3\u00cer}\u0081\u00ad\u00f2\u00e0\u0007\u00d2 \u2018W\u017e\u0005(\u00ca\u00ca\u00c3j\u00ee\u00e6\u001cWk\u0006\u00f3,fFn0\u00dc\n\u00cf\u2022\u0192;\u0015P \u00f4Ps\u0160\u00e9$\u008d\n\u0090T\u0011\u00f4\u00ac\u00bb\u00d8cU%P\u00edU\u0019\\\u2013\u0152\u00bc\u00d2\u2021'\u201azP\u00e0i\u00a2\u00ac\u2019U\u2022\u00d4aX\u0081E>\b\u00d5\u201c$d\u00d1Z\u00aekh\u00c4\u007f\u00ff\u00d9\n                )\n```\n        [3] => ProtocolNode Object\n            (\n                [_tag] => offline\n                [_attributeHash] => Array\n                    (\n                    )\n            [_children] => \n            [_data] => \n        )\n\n)\n\n[_data] => \n```\n)\n. @beldar you should not show your phone number ;)\nAre you Spanish?\n. I can send big thumbnail; 22K. But sometimes only.\nI do not know why sometimes it works and sometimes it does not work...\n. Thank you very much, @zjorzzzey :\nhttps://github.com/venomous0x/WhatsAPI/pull/152\n. Is it possible to migrate yowsup from python to php?\nI use php to send and receive messages, and would like to register a new number from php.\nI can't understand python code.  Is there any way to register a new number with php code?\nThank you\n. The script works fine on my computer (I have python 2.7.2), but the server does not work online.\nI've tried a basic script:\ntest.py\nprint \"Hello World\"\nand php\nexec (\"python test.py\", $ output);\nThis works correctly.\nbut\nexec (\"python yowsup/yowsup-cli -c config.example -d --requestcode voice\", $ output);\nnot work.\nDo I have to do some extra configuration?\nDo I have to open a special port?\n. Not Registration!!\nI registrated my account with Whatsapp 2.8.7326 on Bluestack (2 or 3 month ago).\nThis worked perfectly until yesterday, but today is not registered.\nI have tested the password \"md5(strrev(imei))\" on https://r.whatsapp.net/v1/exist.php?cc=34&in=634**&udid=f2***f2 and the response is \"OK\", but when i try conect i received \"challenge\", i send response and then i received failure, not-authorized.\nDoes anyone know why this happens?\n. thank you @lauhungshing \nI have only changed version from 2.8.4 to 2.8.7 and it works.\nChange from\nprotected $_whatsAppVer = \"2.8.4\";\nto \nprotected $_whatsAppVer = \"2.8.7\";\n. Sorry, how this can be done in php?\nI do not understand python\n. txs @shirioko. I have valid password (by yowsup) but i want run contacts.py in php. That is to say, to know if a phone number has whatsapp as is done with \"https://sro.whatsapp.net/client/iphone/iq.php\" but in PHP (using valid password returned by yowsup).\nI send and received messages by php, and i want to know if a phone number has whatsapp before to send message.\nSorry for my english, can you understand me?\n. ",
    "Hack0x": "Yes, you can also use it on iOS. You have to instead of the IMEI, enter the MAC address ;)\n. I do not use the command $w->setNickname()  or I can not find it. What should I do?\nSorry for my bad English. I'm German ;)\n. @yairnet \nHere: http://forum.xda-developers.com/showthread.php?t=1891930\n@Patschi\nCan you help me? Do you have an idea?\n. Have you got a Android smartphone? If yes, then the keyboard give a * # 06 # and enter the IMEI number in the pre-script.\n. XAMPP for Linux: http://www.apachefriends.org/download.php?xampp-linux-1.8.0.tar.gz\n. If you have an iPhone, then enter the Mac adress in the pre-script.\n. thats wrong!\nWithout + like this:\n$nickname = \"WhatsAPI Test\";\n$sender =       \"972579009001\"; // Mobile number with country code (but\nwithout + or 00)\n$imei =         \"F0:CB:A1:6A:9D:9C\"; // MAC Address for iOS IMEI for other\nplatform (Android/etc)\n. No, you can only send message to one people like private chat not to groups.\n. Once a Whatsapp account is hacked, this can not be blocked.\n. hebrew?\n. Mhh... I don\u00b4t no.\n. ",
    "yuvadm": "Pathetic response by WhatsApp, sending the lawyers over instead of securing their protocol.\nIn any case it's nice of you to have kept the source history and not rebased it. I've forked the repo at https://github.com/yuvadm/WhatsAPI and reverted the tree back to before the legal takedown request.\n. I'm maintaining a fork that has all teh codez https://github.com/yuvadm/WhatsAPI\n. You're probably doing sockets wrong. The sockets usage in the current API is very basic and brittle. Use a more reliable transport.\n. Nope, I've never done socket programming on PHP, sorry.\n. ",
    "ghost": "^ PREACH! I don't understand what they are waiting for! With a massive user base, its about damn time they release an API. Shutting down this one won't stop spammers. Look at this site http://www.whatsapp-api.com/ The best thing for WhatsApp to do is to put out an official API.\n. http://www.whatsapp-api.com/ don't work\n. It worked for me though.\n. I used the following PHP code for WhatsAppStatus:\n``` php\n    function getStatus($number)\n    {\n        $country = substr($number, 0, 2);\n        $number = substr($number, 2);\n    $status_url     = \"https://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=\".$country.\"&me=12345&u[]=\".$number;\n    $status_content = file_get_contents($status_url);\n    $status_xml     = simplexml_load_string($status_content);\n\n    if(!$status_xml->array->dict) return null;\n\n    $status            = array();\n    $status['text']  = strip_tags($status_xml->array->dict->string[1]->asXML());\n    $status['time']   = intval(strip_tags($status_xml->array->dict->integer->asXML()));\n\n    return $status;\n}\n\n```\nIt will return null, if the entered number does not exist in the WhatsApp database.\nFeel free to use http://dev.developr.ch/whatsappstatus/index.php?number=NUMBER to check, if successful it will return a json-encoded String containing the current status, the time in seconds since it was changed, and a formated time string as seen on the GUI version.\n. I am still searching for some kind of documentation of these functions, but didn't find any yet.\nIt's all scattered and most of the time posted months ago and unfunctional :/\nI am working on a full-featured Web-Version right now, so I am still looking for some parts.. But just create a new issue if you need anything and I will post what I got ;)\n. No problem, if this is solved please close the issue ;)\n. @muslimsg\nI am sorry but they changed their server stuff and I do not have time to update this atm.\nCheck the other issues and see if you can find something else ;)\n. Then just wait. You don't even need to understand python to implement the functionality in PHP or anything else..\n. You should be able to send movies just like you are sending images, just change the media type to video.\nI successfully tested .mov, .m4v and .mp4 files.\n. It will also work with audio btw.\n. I only sent an mp3 file, but it might work with other formats :)\n. moin\n. I am not sure what your question is supposed to mean, could you explain?\n. I think it would be similar to sending images, audio, video and location, but I do not have the ability to find out what exactly has to be sent. Hopefully someone else will post the required data.\n. @hubail Btw. will you update the WhatsAPI source? (adding features like this etc.)\n. https://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php#L48\n. ``` php\n    require '../src/php/whatsprot.class.php';\n$sender =   'SENDER';\n$imei   =   'IMEI/MAC';\n\n$w = new WhatsProt($sender, $imei, null);\n$w->Connect();\n$w->Login();\n$w->Message('ID', 'NUMBER', 'TEXT');\n\n``\n- SENDER:   Your WhatsApp-registered number including country code, but without leading 0 or +\n- IMEI/MAC: IMEI if you are using WhatsApp on Android, MAC if you are using it on iOS\n- ID:           A unique ID e.g.time().'-1'- NUMBER:   The number you are sending the message to\n- TEXT:     The content of the message\n. You just puttime().'-1'` there, it should be unique enough.\nAnd yes you can send a message to yourself.\n. Better take your UDID out there.. But it worked for me using your details.\nWhat does happen if you try to send the message?\n. Sent you some Pakistan Location\n. No you should not have to open any ports. I am not sure what your problem might be :(\nIs there any error message or something? Could you try running it using CMD / Terminal?\n. Could you first navigate to the folder test using cd?\nThen just run php whatsapp.php\nI am sorry but I can not use Teamviewer or something like it at the moment.\n. Could you try adding a sleep()at the end? I think sleep(3) should be enough.\nThis should ensure, that the message is completely sent.\n. I am using xampp for local testing.\n. Damn forgot that Login and Connect stuff, because it is all in my own wrapper :/ Sorry man!\n. I believe this is not a duplicate of #103, due to it looking like the author would like to accomplish it using the WhatsApp protocol, whereas I'd prefer a pure PHP solution.\n. php\n    /**\n     * Get profile picture of specified user\n     *\n     * @param string $number\n     *  Number or JID of user\n     *\n     * @param bool $large\n     *  Request large picture\n     */\n    public function sendGetProfilePicture($number, $large = false)\n. php\n    /**\n     * Update the user status.\n     *\n     * @param string $txt\n     *   The text of the message status to send.\n     */\n    public function sendStatusUpdate($txt)\n. Not possible, because the contacts are not stored with WhatsApp.\nIt's using the local contacts on the phone.\n. That has nothing to do with getting the Contact List. It's not possible.\n. That function is actually used when you first start using WhatsApp on a new phone.\nIt will send your whole contact list to the WhatsApp servers (?friend1=somenumber&friend2=someothernumber etc.), which will then return their Whatsapp statuses. I used this for WhatsAppStatus\nThe cc and me parameter do not need to be valid, just use a phone number >= 5 characters.\n. I know that, but I'd prefer to have the ability to upload them to the WhatsApp servers. :)\n. Okay well that's what I tried, but I'll see if I can get it to work. Thank you :)\n\nGot it to work now - here's the PHP code\n``` php\n        public function uploadImage($file)\n        {\n            $data['file'] = \"@\".$file;\n            $ch = curl_init();\n            curl_setopt($ch, CURLOPT_HEADER, 0);\n            curl_setopt($ch, CURLOPT_HTTPHEADER, array( 'Expect:' ) );\n            curl_setopt($ch, CURLOPT_URL, 'https://mms.whatsapp.net/client/iphone/upload.php');\n            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\n            curl_setopt($ch, CURLOPT_POST, true);\n            curl_setopt($ch, CURLOPT_POSTFIELDS, $data); \n            $response = curl_exec($ch);\n            curl_close($ch);\n        $xml = simplexml_load_string($response);\n        $url = strip_tags($xml->dict->string[3]->asXML());\n        return $url;\n    }\n\n```\nUpload a file from the server to WhatsApp\n. My function returns the url.\n. Exactly\n. Well I just send the file using POST to that URL, and then grab the generated file url from the returned XML.\nYou could just try, and post again if you get an unexpected result.\n. I only used obj-c for a very short time, so I don't think I can analyze this code :P\nDo you get anything returned with your request? Could you post it?\nIt is used to prevent a 417 Expectation Failed Error.\n. I am sorry, but I can't help you any further right now :/\nMaybe you will find the answer somewhere else..\n. You should include the 3 digit code using &code=123\nBtw. how did you get WhatsApp to send the 3 digit code? #112\n. Well I used a very similar URL in #112, but got the error-code I posted.\nYou can deactivate WhatsApp if you still have the emulator, otherwise you can e-mail WhatsApp, but it may take over a month for them to deactivate the number.\nregister.php actually IS for setting a password, I did successfully change mine just yesterday.\n. I will try to get it to send me the code again, but I have used WhatsApp on my number before.. Thanks\nI don't think that the MAC address has to be unique, that wouldn't make any sense.\nCould you post the full response you get?\n. You know that the MAC actually IS the WiFi address, right? Android uses IMEIs.\nAlso for iOS it's not reversed.\n. That sucks.. @hubail Do you know anything about this? I need this functionality :/\n. @hoppler What do we have to use for the token?\n. php\n    /**\n     * Create a group chat.\n     *\n     * @param string $subject\n     *   The group Subject\n     * @param array $participants\n     *   An array with the participants numbers.\n     *\n     * @return string\n     *   The group ID.\n     */\n    public function sendGroupsChatCreate($subject, $participants = array())\nand \nphp\n/**\n     * Add participant(s) to a group.\n     *\n     * @param string $groupId\n     *   The group ID.\n     * @param array $participants\n     *   An array with the participants numbers to add\n     */\n    public function sendGroupsParticipantsAdd($groupId, $participants)\n. What? I thought the WhatsApp application encrypts the jabber traffic? o.O\nOr did you found a way to break the encryption?\n. The included function to create a thumbnail first resizes the image to \n100x100, so it should work if you do that.\n. @saschegehlich: http://bugmenot.com/view/4shared.com\n. @waninkoko can you share your code, I will also test it from my side and try to fix it.\n. no need to clean it, I can understand c# code as well. Currently, I have my own implementation of previous protocol in c#. I believe my code needs a few tweaks to get it working again.\n. This is the RC4 class used by whatsapp\n```\npublic class RC4\n{\n    private int i = 0;\n    private int j;\n    private int[] s = new int[0x100];\npublic RC4(byte[] key, int drop)\n{\n    while (this.i < this.s.Length)\n    {\n        this.s[this.i] = this.i;\n        this.i++;\n    }\n    this.j = 0;\n    this.i = 0;\n    while (this.i < this.s.Length)\n    {\n        this.j = (byte) ((this.j + this.s[this.i]) + key[this.i % key.Length]);\n        Swap<int>(this.s, this.i, this.j);\n        this.i++;\n    }\n    this.i = this.j = 0;\n    this.Cipher(new byte[drop]);\n}\n\npublic void Cipher(byte[] data)\n{\n    this.Cipher(data, 0, data.Length);\n}\n\npublic void Cipher(byte[] data, int offset, int length)\n{\n    while (length-- != 0)\n    {\n        this.i = (this.i + 1) % 0x100;\n        this.j = (this.j + this.s[this.i]) % 0x100;\n        int num = this.s[this.i];\n        this.s[this.i] = this.s[this.j];\n        this.s[this.j] = num;\n        data[offset++] = (byte) (data[offset++] ^ ((byte) this.s[(this.s[this.i] + this.s[this.j]) % 0x100]));\n    }\n}\n\nprivate static void Swap<T>(T[] a, int i, int j)\n{\n    T local = a[i];\n    a[i] = a[j];\n    a[j] = local;\n}\n\n}\n. @jb425 from WP7 version. Let me know the status or if you need any other help.\n. hallo\n. Why isn't this in yet?\n. Sry, it's just that there isn't any Overview at all. Pull requests which are already done in anyway should be already closed. So not my fault.\n. php\n    /\n     * Set your profile picture\n     \n     * @param  string $path URL/URI of image\n     /\n    public function sendSetProfilePicture($path)\n. php\n    /\n     * Update the user status.\n     \n     * @param string $txt\n     *   The text of the message status to send.\n     /\n    public function sendStatusUpdate($txt)\n```\nand\nphp\n    /**\n     * Set your profile picture\n     *\n     * @param  string $path URL/URI of image\n     */\n    public function sendSetProfilePicture($path)\n. php\n    /**\n     * Send a request to get a list of people you have currently blocked\n     */\n    public function sendGetPrivacyBlockedList()\nand \nphp\n    /**\n     * Set the list of numbers you wish to block receiving from.\n     *\n     * @param array $blockedJids Array of numbers to block messages from.\n     */\n    public function sendSetPrivacyBlockedList($blockedJids = array())\n. I think he did, but this issue is about a year ago. Just went trough the opened issues list and tried to help the ones which aren't answered yet (For people which might search the issues list with the same question)\n. No, i don't think the IP addresses and Port were changed because i'm still able to change my status successfully, the only issue seems to be with the receiving and sending of messages. They must've changed their encryption protocol or something.\n. I did not check out the listening mode. I wrote my own code looking at the example. \nIn my code the message function is already modified. So it's fine. Something else seems to be going wrong :(\n. https://github.com/venomous0x/WhatsAPI/issues/491\n. @josh112 \nNo it doesnt!\nTake a look at the tests folder / scripts.\nAlso you won't be able to use both devices at the same time without problems.\n. Doesn't really work or is already outdated again...\nPHP Notice:  Undefined property: ProtocolNode::$_attributeHash in ...\nPHP Notice:  Undefined property: ProtocolNode::$_children in ...\nPHP Notice:  Trying to get property of non-object in...\ncontact:  ()PHP Notice:  Undefined property: ProtocolNode::$_children in ...\n. @shargon It will be an open project?\n. Yeah, I know .. but would have to use the project in python, right?\n. Yeah, I did several searches .. tested before the project in php .. but now there is this detail ... it's time to improve my knowledge in python\n. That's the idea, but think about doing in .Net\n. Yes, just commented here\n. The password is changed, it's not md5 of IMIE's reverse anymore.\nIt's generated from server side.\n. @alejandro-anv yes. \n. Someone will update this project to be able to register? Equal to what is done in python?\n. Okay\n. 'There was a problem trying to request the code.' - Sorry for the stupid question, but isn't the password anymore md5(MACMAC) ? What else is it now? Read that I need to receive a new password via yoswup but how to do that? \n. He's currently working on that: https://github.com/venomous0x/WhatsAPI/issues/571#issuecomment-32118978\n. https://github.com/venomous0x/WhatsAPI/issues/456\n. It's now possible to decrypt the password file /data/data/com.whatsapp/files/pw on Android.\nPlease checkout my new app https://play.google.com/store/apps/details?id=com.smorra.passwordextractor\n. All supposed solutions e.g. urlencode(md5(strrev($this->_identity), true)) or md5($imei) don't work.\nWell if you can't fix it you should remove checkCredentials()-function from the code.\n. The comment in EXAMPLES.php is plain wrong:\n$userIdentity = '00:00:00:00:00:00'; # This is tipically the IMEI number.\n                                                    # If you are using an iOS device you should input your WLAN MAC address.\n. SendSetRecoveryToken() doesn't work either:\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\nprint_r($w->Connect());\nprint_r($w->SendSetRecoveryToken($userIdentity));\nprint_r($w->checkCredentials());\n. this snippet requires the password which i dont have\n. How can i get my identity?\n. I had this problem with sending message to quickly, if you send message to quickly it'll get async and crashs ( I guess )\nI fixed that via queueing the messages, for better control when how much messages are sent.\n. php\n/**\n     * Parse the message text for emojis\n     *\n     * This will look for special strings in the message text\n     * that need to be replaced with a unicode character to show\n     * the corresponding emoji.\n     *\n     * Emojis should be entered in the message text either as the\n     * correct unicode character directly, or if this isn't possible,\n     * by putting a placeholder of ##unicodeNumber## in the message text.\n     * Include the surrounding ##\n     * eg:\n     * ##1f604## this will show the smiling face\n     * ##1f1ec_1f1e7## this will show the UK flag.\n     *\n     * Notice that if 2 unicode characters are required they should be joined\n     * with an underscore.\n     *\n     *\n     * @param string $txt\n     * The message to be parsed for emoji code.\n     *\n     * @return string\n     */\nUse the second one, also I found this useful websites to determine which code is which emoticon: www.typografie.info/3/page/artikel.htm/_/wissen/apple-emoji-natur\n. Same here, the documentation in whatsprot doesn't tell anything about that.\nphp\n    /**\n     * Clears the \"dirty\" status on your account\n     *\n     * @param  array $categories\n     */\n. Perfect, thx. Found that one yesterday later on too.\n. Again me, tried the eventmanager and the Client Message recieve and Client Message Server seems to be bugged for me?\nTried to hook these events:\nphp\n$wa->eventManager()->bind('onMessageReceivedClient', 'onClientMessage_Recieved');\n$wa->eventManager()->bind('onMessageReceivedServer', 'onClientMessage_Server');\n$wa->eventManager()->bind('onMessagePaused', 'onClientMessage_Paused');\n$wa->eventManager()->bind('onMessageComposing', 'onClientMessage_Composing');\n~~Paused and composing seem to work, the other 2 not.~~\nHooked the wrong event, the event is named \"onGetMessage\". Got that wrong.\nBut I have a different question, why can't I call member functions of WhatsProt?\nphp\nPHP Notice:  Undefined variable: wa in /bot.php on line 71\nPHP Fatal error:  Call to a member function sendMessage() on a non-object in bot.php on line 71\nCode:\nphp\nfunction onGetGroupMessage($myphone, $from_group_jid, $from_user_jid, $id, $type, $time, $name, $body) {\n    $msgsender = explode(\"-\",$from_group_jid);\n    echo \"[DEBUG | onGetGroupMessage] $myphone, $from_group_jid -> \".$msgsender[0].\", $id, $type, $time, $name, $body\\n\";\n    if(!empty($body)) {\n        $firstChar = substr($body,0,1);\n        if($firstChar=='/') {\n            if(strtolower($body)=='/hi') {\n                echo \"[DEBUG] Command /hi von \".$name.\" eingegangen\\n\";\n                $wa->sendMessage($msgsender, 'Hey du:)');\n            }\n        } \n    }\n}\n. Created a new issue for my current problem -> https://github.com/venomous0x/WhatsAPI/issues/546\n. I tried the idea with the class setup and didn't worked well for me.\nNever worked before class orieanted in php, so yeah...\nTried to create a test.class.php with following content:\nphp\n<?php\npublic class WhatsInstance\n{\n    protected static $instance;\n    public static function setInstance($wa)\n    {\n        self::$instance = $wa;\n    }\n    public static function getInstance()\n    {\n        return self::$instance;\n    }\n}\n?>\nAnd the following in my code:\nphp\nrequire_once 'test.class.php';\n//----------other code...\n$wa = new WhatsProt(WA_SENDER, WA_IMEI, WA_NICKNAME, FALSE);\nWhatsInstance::setInstance($wa);\n//Events binden\nWhatsInstance::getInstance()->eventManager()->bind('onGetMessage', 'onGetMessage');\nWhatsInstance::getInstance()->Connect();\nWhatsInstance::getInstance()->LoginWithPassword(WA_PASSWORD);\nI got that error:\n``` php\nPHP Parse error:  syntax error, unexpected T_PUBLIC in test.class.php on line 2\n```\n. Already managed to do that via \"$GLOBALS[\"wa\"]->Connect();\" etc. \nMy question now is, whats the difference between using global variables and the class thing? Is it better to work with the class example you commented?\n. Maybe a Wiki would be a good start?\nI already started documenting some stuff, but need to get along with MediaWiki.\nFilling the wiki alone would be hard, so are there any volunteers?\nHeres what I got so far: http://whatsapi.de/Wiki/index.php?title=Main_Page\n. Jeah, I don't really know much about WhatsAPI, thats why I had to take all the informations from the README file. I had to put some informations in place to test if everything works as it should.\nSo is there a need for a Wiki? I didn't knew about the official wiki, where can I find the link to that one?\nIf you mean that one: https://github.com/venomous0x/WhatsAPI/wiki \nHow about functions, explaining them, with examples? Would be nice :D\n. My fault, debugged everything and found out that I always generated the wrong group-id. I thought it was \"my-phonenumber\"-\"groupid\", but the groupid was \"groupowners-phonenumber\"-\"groupid\", also I was able to directly use the group-jid (with @g.us?)\n*Closed\n. Thats weird, cause If my friends update their status I am able to see the new status immediately.\n. https://github.com/venomous0x/WhatsAPI/issues/456\n. Why not? Its a nice improvement to the EventHandler and might fix some current problems (The invalid token fatal error?..)\n. I also recomeend to take a look at the test files https://github.com/venomous0x/WhatsAPI/blob/master/tests/whatsapp.php\n. Maybe you give us your code so we'll be able to help you out.\n. By syncing the number with contact sync to your contact list, read the wiki and the contactsync.php file for more informations to that:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/contactsync.php\n. @shirioko Thats the problem of almost every 'community', I guess people just want to know the solution, and as always they can't wait.\nAlso I guess he means people wouldn't ask anymore if you would just update the repo with the solution / fix for it\n. @shirioko \nReally understandable, please take your time!\nAlso don't care about people here, its your time and you decide on what you are going to spend that time.\n. The ! make's it possible to let WhatsAPI now that you're gonna give a command like !hello\nBut now i would like to make a command without that !, is this possible?\n. This is my code: http://pastebin.com/ZGyBDD0Z\n123 is a placeholder\u2026..\n. @zephyern No, that doesn't solve the problem\u2026..\n. Fixed! Thnx\n. Okay, so i have to make a cron job to restart the script every few seconds?\n. This is my code: http://pastebin.com/ZGyBDD0Z 123 are placeholders..... What do i have to change in my code to fix this?\n. @shirioko what if i want the bot 24/7 online?\n. Nope, changing the set_time_limit(10); to set_time_limit(300); doesn't work\u2026.\nAny other ideas?\n. Can you give me an example code?\n. No, this isn't possible. If you register your iPhone the WhatsAPI is deregistered\u2026.. Sorry\n. I don't know.... The script quites but i can't see any thing in the command line....\n. Okay, i'm gonna check the php settings.... Sometimes it's 1hr and sometimes it's 30 minutes....\nI'm gonna try it today\n. Fixed my php settings but still not works\u2026.. Any other ideas? At this moment i'm using the screen module in the command line\u2026. i uses php bot.php to run the script\u2026..\n. Example code?\nVerstuurd vanaf mijn iPhone 5c\n\nOp 9 feb. 2014 om 14:37 heeft eduardochp notifications@github.com het volgende geschreven:\nWhy don't use a cronjob for exec the listener file? Every 5 min for example.\n\u2014\nReply to this email directly or view it on GitHub.\n. I have my own linux server\n\nVerstuurd vanaf mijn iPhone 5c\n\nOp 9 feb. 2014 om 14:42 heeft eduardochp notifications@github.com het volgende geschreven:\nAre you using DreamHost? Is a internal application. Probably it will be in others external servers. Isn't a code is a option in the website.\n\u2014\nReply to this email directly or view it on GitHub.\n. An how do i enter more numbers? (\"31612345678 , 31623456789\")??\n. I know but my question is how?! I've founded the functions.\n. Guck dir die mitgelieferten Beispiele mal an, genau das kannst du mit WhatsAPI n\u00e4mlich.\n. WART giving this error:\n\"Could not request verification code. The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\"\nPlease help.\n. Handshake type, what is that?\n\nNever realized how slow the php version is\n. $w->sendPong(time()); works fine\n. @mrssam You should consider contacting WhatsApp, email them with your number and explain what you'd like to do.\nsupport@whatsapp.com\n. You'r obviously trying to bulk send messages, we don't support Spam so just stop fucking asking how to do it.\n. sadarshannaiynar have you tried https://play.google.com/store/apps/details?id=com.smorra.passwordextractor ?\nWhat is you device?\nWhat is your processor?\n. np\n. Crashed instantly on 5.0.x.\n. Is there any way to get WhatsApp passsword without root access?\n. can someone send me apk.. i cant access it  on  website\n. I took WhatsAPI to understand how it works. But libwajava was coded from zero. Also libwajava is nonblocking compared to WhatsAPI.\n. No, it means calls to libwajava doesn't block your current thread. As of this, you don't need to care of threads. you can do all with callbacks on your UI thread.\n. Sorry, please close this I used the wrong password. lolz\n. Maybe try using the updated version / the actually repo at https://github.com/mgp25/WhatsAPI-Official\n. 1. Use the updated repo of WhatsAPI at https://github.com/mgp25/WhatsAPI-Official\n2. Try to simulate a real WhatsApp Client\n3. Only send to synced contacts / people who added your number\n4. Provide us the regarding code / snippets\n. ",
    "driverdan": "WhatsApp has absolutely no legal basis for demanding you take this project down, especially if you're not under their jurisdiction. Do not cave to their baseless claims.\n. ",
    "m0veax": "The german IT Webpage Heise has some articles about whatsapp and the\njurisdiction.\nhttp://www.heise.de/newsticker/meldung/WhatsApp-droht-API-Entwicklern-mit-rechtlichen-Schritten-1716546.html\n2012/9/25 Dan DeFelippi notifications@github.com\n\nWhatsApp has absolutely no legal basis for demanding you take this project\ndown, especially if you're not under their jurisdiction. Do not cave to\ntheir baseless claims.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/83#issuecomment-8859739.\n. \n",
    "eitrnel": "YaY! you are the man !\nnow i got \"<response status=\"ok\"\"\nso, in the php code i also need to input my reverse imei?\n. damn.....so why i still get 'wrong password' ? :(\n. that's the error message i get:\n[] Logging in as 'NICKNAME' (PHONE_NUMBER)\nPHP Warning:  file_get_contents(): Unable to find the wrapper \"https\" - did you\nforget to enable it when you configured PHP? in C:\\Program Files\\wamp\\bin\\php\\ph\np5.3.13\\whatsapp.php on line 43\nPHP Stack trace:\nPHP   1. {main}() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.php:0\nPHP   2. file_get_contents() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.ph\np:43\nWarning: file_get_contents(): Unable to find the wrapper \"https\" - did you forge\nt to enable it when you configured PHP? in C:\\Program Files\\wamp\\bin\\php\\php5.3.\n13\\whatsapp.php on line 43\nCall Stack:\n    0.0015     360664   1. {main}() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\what\nsapp.php:0\n    0.0576     843928   2. file_get_contents() C:\\Program Files\\wamp\\bin\\php\\php\n5.3.13\\whatsapp.php:43\nPHP Warning:  file_get_contents(https://r.whatsapp.net/v1/exist.php?cc=56&in=phone_number&udid=udiudnumber): failed to open stream: Bad file\ndescriptor in C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.php on line 43\nPHP Stack trace:\nPHP   1. {main}() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.php:0\nPHP   2. file_get_contents() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.ph\np:43\nWarning: file_get_contents(hhttps://r.whatsapp.net/v1/exist.php?cc=56&in=phone_number&udid=udiudnumber): failed to open stream: Bad file descr\niptor in C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\whatsapp.php on line 43\nCall Stack:\n    0.0015     360664   1. {main}() C:\\Program Files\\wamp\\bin\\php\\php5.3.13\\what\nsapp.php:0\n    0.0576     843928   2. file_get_contents() C:\\Program Files\\wamp\\bin\\php\\php\n5.3.13\\whatsapp.php:43\n. ",
    "kurosch": "you ported the code to nodejs could you make that node public?\n. doesn't yappari still work, at least in their forums they do not seem to be bothered about it plus the comment up there that they are on 1.2 . Couldn't we get their code for it/ or a patch?\nsorry for the wrong thought before.\n. ",
    "2opremio": "Thanks for this! I would like to use it as a mobile app replacement (it sucks to type on the phone) but ... as you can imagine I am not comfortable writing my personal data on your web (no offense intented). Any chances of getting the sourcecode? Or does node.js (I am not familiar with it) run completely locally?\n. For iOS devices the key is probably stored in the keychain. Can somebody with a jailbroken iOS 5 device try running ptoomey's keychain dumper? \nhttps://github.com/ptoomey3/Keychain-Dumper\nIt worked on iOS 5 the last time I tried (when the key for iOS was the MAC but still unbroken) but unfortunately my iphone is now upgraded to iOS 6, so I cannot run it myself.\nThe instructions are really clear, so it should be straightforward to use.\n. ",
    "saschagehlich": "I didn't publish the source code yet due to legal issues (see README of this repository). I will put it online as soon as the PHP-API is back online as well.\n. Here's the source code: https://github.com/saschagehlich/node-whatsapp\n. Can you upload it somewhere else? I don't want to sign up for a simple download \n. @beldar But it gives you a login challenge?\n. @beldar Are you encrypting the challenge request?\n. Well, I get a valid response for my challenge request already. I'll work on getting the login to work later today.\nThis hint might be helpful: I didn't change the dictionary to the new one, yet. Maybe you should replace it with the old one.\n. Maybe try to not base64_encode it?\n. Got 1.2 to work with my node.js port now as well... but still my authentication is broken. Here's how I do it - any hints?\n``` coffeescript\nauthenticate: (challenge, callback) ->\n    # Encrypt password and challenge using pbkdf2\n    crypto.pbkdf2 @encryptPassword(), challenge.toString(), 16, challenge.length, (ex, buf) =>\n      buffer = @phoneNumber + challenge + Math.round(new Date() / 1000)\n  # Encrypt the buffer using RC4 (use pbkdf2 encoded password as salt?)\n  buffer = crypto.createCipher('rc4', buf).update(buffer)\n\n  # Hash is the first 4 bytes of the encoded data\n  hash = crypto.createHmac('sha1', buf).update(buffer).digest('hex')\n  callback hash[0...4] + buffer\n\n```\n. BTW: My response is sent unencrypted (as @waninkoko said: Everything is encrypted except the login) - the full response (via debug output) looks like this:\ntx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">6bbf\u00a3\u00b6\u00bb\u00bcE\u00d3X\u00a1\u00a6\n                                                                \u00a1(\u008aX\u009fo\u00ac\u00d1}\u00afR\u008d\u0097\u00e1\u00a9\u008e?`\u00ec\u0088FW\u00e1Iq!</response>\n. @hermanho The phone number is string, the unix timestamp is int? So this one here might be right?\n\n(first 13 bytes = phone number as string, last 10 bytes unix timestamp as integer?)\n. Wooops, github removed my code...\nBuffer 34 39 31 35 31 34 31 39 30 32 37 36 35 a1 cf a4 21 32 e7 ea bf 94 76 ca 13 fe c2 60 40 50 e0 6e d6 01 03 05 02 03 00 06 03 08 02\n. Well then the first 4 bytes of your SHA1 encrypted hash at the very beginning are missing?\n. Pretty much the same implementation like mine... do we have a challenge request / response sniff dump?\n. Well if @waninkoko's explanation is right, we should see 4 readable characters followed by 41 or 42 crypted characters, right?\n. Okay, current progress: I don't really know what I did, but it looks like I get an encrypted response from the server (so that means 'success' i guess? implementing decryption now to verify...)\n. @beldar I switched the SHA1 encryption from hex digest to binary, grabbing the first 4 bytes from the buffer, store it to an array and concatenate it with the RC4 encrypted hash... \nhttps://github.com/saschagehlich/node-whatsapp/commit/918772887d4f0023461ae4f550ba872d86a16241#L1R83\n. @hermanho Right now I'm stuck at comparing the serverhash and my own hash...  they don't match, although I'm using the same encryption key :( \nSometimes it looks like there's some kind of wrong offset, like this:\nBuffer c2 9d 05 4b compared to Buffer 9d 05 4b 76\nAnd sometimes it's some totally different data:\nBuffer c3 98 6f c2 compared to Buffer d8 6f ad ff\n. Okay, I'm able to decrypt the success message, but it has some weird content...\nrx  <success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" status=\"active\" kind=\"paid\" creation=\"1281601615\" expiration=\"1597134415\">\ufffd4\ufffd\ufffd\ufffd\ufffdo\ufffd\u073a8\ufffd@\"\ufffd\ufffd</success>\nAnd shortly after I received that and sent my username, I get disconnected...\n. Nah i got disconnected because the presence message i sent was unencrypted. FunXMPP automatically kicked me out then.\n. It looks like the success message contains another challenge - it's some encrypted 20 bytes long data. I'll try to use that for decryption on the next message.\n. Weird - I can only decrypt the first response I get (success) - all other responses can't be decrypted with the encryption key I generated while logging in. Generating a new encryption key from the data inside the success node (which is 20 bytes, so this might be a challenge or something) doesn't work either...\n. @eslamo I don't understand?\n. I have the following problem: After reading the success message and finishing the node, there is still some data in the input:\nf3 9e 4e 88 b4 03 fb cf 49 8a e7 f1 96 e1 aa 06\nThen, as soon as another message comes in, it appends the new data to this input and tries to parse everything and fails horribly, since this is not a tree or something. Any ideas what that \"rest\" data could be?\n. Can you still authenticate using WhatsAPI? Then I guess they set random passwords for users that use the new client. (Like me)\n. exist.php still returns \"incorrect\" for both the encrypted IMEI as well as for the unencrypted IMEI. When exactly is the exist.php called by the app? I tried to sniff the traffic yesterday but I was unable to find a exist.php http call.\n. ",
    "RustamUz": "good job!\n. I have same problem with it.\ncan anybody help me with this problem?\n. It's working now\n. ",
    "mkyung": "works like a charm!\n. Now the PHP API is back online, can't wait to see the source :D\n. ",
    "leader80": "nice job!\n. it's working for me\n. I'm using Android, but I'm able to send to IOS too... \n. the option is \"-s\"\n. There is already the code implemented in the Whatapi.php...\nThe problem is more related to the fact that you cannot have multiple listeners at the same time...\nWhich basically means that you should disable the phone client to listen to the messages.\nBut this is just my experience.\nBtw, is whatsapp effectively polling for messages and not working on push?\n. if ($_SERVER['argv'][1] == \"-l\") {\necho \"\\n[] Listen mode:\\n\";\nwhile (TRUE) {\n$wa->PollMessages();\n$data = $wa->GetMessages();\nif(!empty($data)) print_r($data);\nsleep(1);\n}\nexit(0);\n}\n. ... if you could check if the message arrived then whatsapp has to be installed.... \n. ",
    "janderklander": "Hi leader80, are you using Android or iOS? ... I am using Android and the example above does not work at all for me. The message is sent but never received in my phone. The same example with text message works ok.\n. montasir1, the dst = \"34**\"; \nis the number of the destination phone.  \nObviously ** must be replaced by the real phone number.\n. I'm using Android and I'am able to send to IOS and Android ... but only text messages... when sending images the log is ok but the message never is received :/  ... Does anyone have any idea what's wrong?\n. Roberto, thanks for your answer. \nWith paramenter set to \"\" the image is received (as whatsapp's standard icon).\nDoes not work for me with the contents of the base 64 image on the link of blog.flexexamples.com :( \n$b64thumb = \"/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2MBERISGBUYLxoaL2NCOEJjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY//AABEIADIAMgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AJ9Z1G8i1e5SO6mRFbAVXIA4oAqDVL//AJ/J/wDvs0AI2qX/APz+z/8Afw0ARNq2of8AP7cf9/DQBE2sakOl/cf9/DQBC2s6mP8AmIXP/f00Aen27FreMkkkqCfyoA4HXjjW7v8A3/6CgBdK0q41QS/Z3jXy8Z3kjrn0B9KALsnhS/WNmMtudoJwGbP/AKDQBzrGgCFzQBA5oA9etv8Aj1h/3B/KgDz7xA2Ndu/9/wDoKANrwSS0V+BycJ/7NQBkTaNq0MLyyW7qiKWY7xwB170ATW+j219oEt5aySm6hB3xkgjjk44z06UAQXuk29joEN3cySi7n5jiBAAHXJ4z0/mKAOdc0wPYbX/j1h/3F/lSA858RtjX7z/f/oKANvwM37nUSOoCfyagDAl1vUZY2jkvJWRgQyluCD2oA2PCG+zgvdTncpaIm0j++Rzx9On40AJ43geZbXU4XMlq6BR6LnkH8f6UAca7UwPZbX/j1h/3F/lSA8z8TNjxDej/AG/6CmBBYaveaasq2k3liXAf5Qc4zjqPc0AUi9AFqXV7yTTlsGmH2VMEIFUe/JAyaAE/tu/XTTp/ng2pBGxkU989SM9aQGU70Ae12v8Ax6w/7i/yoA8w8UK//CR3uEYjf2HsKYGXtk/55v8AkaAArJ/zzb8jQAwrJ/zzf8jQBGySn/lm/wD3yaQDfJlP/LN/++TQB7Zag/ZYeP4F/lQA9o0LElFJ9xQAvlR/880/75FAB5Uf/PNP++RQAeVH/wA80/75FAB5Uf8AzzT/AL5FMA8qP/nmn/fIoAcBxSA//9k=\";\n$wa->MessageImage(time().\"-1\", $dst, \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.JPG\", 55508, $b64thumb);\n. Thanks Roberto, after many tests It works but it's strange... only works if I set the file size of the thumbnail ... \n$iconfile = \"testimage.b64\";\n$fp = fopen($iconfile, \"r\");\n$icon = fread($fp, filesize($iconfile));\nfclose($fp);\n$wa->MessageImage(time() . \"-1\", $dst, \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.JPG\", 1616, $icon);\n. ",
    "robertoibarra": "I think there is something wrong with the base64 encoded icon. If you remove the $b64thumb and set the parameter to empty \"\" then the message with the picture is received but you won't be able to see the thumbnail, you get like a standard icon from whatsapp but when you click on it you are able to see the image.\nI used a sample icon I found on:\nhttp://blog.flexexamples.com/2008/03/17/displaying-an-image-saved-as-a-base64-encoded-string-in-flex-3/\nIf you set the $b64thumb to the contents of the base 64 image on the link above, it works :P\nHaven't figured out what the solution is but this seems to be the problem. Maybe someone can figure out the exact way the thumbnail needs to be encoded for the image to be sent.\n. Try to copy and paste the b64 image from the website I shared into a file. This is my working code:\n$iconfile = \"testimage.b64\";\n$fp = fopen($iconfile, \"r\");\n$icon = fread($fp, filesize($iconfile));\nfclose($fp);\n$w->MessageImage(time() . \"-1\", \"put_your_cell_here\", \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.jpg\", 23668, $icon);\n. ",
    "Stonie": "ROFL. Note that with a bit of clicking n00bs and lawyers can  use the web based history here within github....\nWhy not flick it over to a private repo? just a couple of clicks to toggle it... downstream remotes can stay as is in the short term. \n. ",
    "Mahamoti": "Does somebody has an example of the message format?\nI dont know howto decrypt the message in wireshark.\n. Arthursc, can you mail me an example or post it here?\n. I've created a website for this function \nhttps://whatsapp.romke.nl/\nReally cool te fake you're location!\nSome friends believed that i won a world trip :)\nAnd others where looking in there street, to find me :p\n. ",
    "sewan": "Ok but when i use CMD php C:\\appserv\\www\\WA\\tests\\whatsapp.php -569xxxxxxx \"Hello\"\nshows an error \"php_mbstring missing\"\n. yep my bad in the comment but i put the -s 569xxxxxxxx ...\nphp_mbstring missing\ni checked the folder /Appserv/php5/ext/php_mbstring.dll and exist\nand in php.ini i checked too and\nextension=php_mbstring.dll is uncomment\nI only want send messages,\nautenticate -> connect -> send message only text\nFrom mozilla i execute whatsapp.php and i only see this:\nand in the cmd this:\nhe program can't start because php_mbstring.dll is missing from your computer\nhttp://i.imgur.com/41Enc.jpg\nWhat is the variable number you send the message?\nthese lines are my personal mobile, no?\n$nickname = \"Sewan\";\n$sender =   \"569xxxxxxxx\";\n$imei =     \"xxxxxxxxxxxxxxxxxxxxxxx\";\n$msj=\"\"; // is the message?\n$dst=$_SERVER['argv'][2];  // is the recipient number?\n. thank you so much but i have a little problem lol ...\n $w->Message('ID', 'NUMBER', 'TEXT');\nID: A unique ID e.g. time().'-1' hmm i can't understand this ... sorry :/\nis the timezone??\nand, can i send messages to myself to test?\n. i'm trying now and i can't u.u\nphp  \n    require '../src/php/whatsprot.class.php';\n\n<p```\n$sender =   'xxxxxxxxxxx';\n$imei   =   'xxxxxxxxxxxx';\n$w = new WhatsProt($sender, $imei, null);\n$w->Message(time().'-1', 'xxxxxxxxxx', 'hi');\n```\n\n\n<pI'm running in firefox appserv localhost/wa/test/whatsapp.php\n. hmmm can u send me a message with these code? for try please?\n. works! but not in my laptop :( I need to have an open port? I have router\n. well ... in firefox by appserv ... says nothing\nand in CMD is \nphp C:\\appserv\\www\\wa\\test\\whatsapp.php\nno?\nand in cmd says \"php_mbstring is missing\" and check and if there\nyou know \"teamviewer\"? You can access my laptop through this program please. is very important to me\nmight be my version of appserv with php5?\n. yes i can navigate to the folder using cd and i try php whatsapp.php and says an error  \"php_mbstring.dll is missing\"\nand in the console say: \n\"PHP warning: php startup: Unable to load dynamic library 'C:/appserv\\php5\\ext\\php_exif.dll'\nand in php.ini i have uncomment php_mbstring and php_exif :S\n. problem solved with CMD error, look at a website and said you had to change the order of call in the php.ini.\njust now running but still not send the message.\n. nothing ... I think I have bad luck, I will try to reinstall or install \"php6\" thank you very much anyway.\none last question, you use appserv, wampp, xampp?\n. look i install xamp in other PC and the code is\nphp\n    require '../src/php/whatsprot.class.php';\n\n<p```\n$sender =   'xxxxxxxx';\n$imei   =   'xxxxxxxxxxxxxxxx';\n$w = new WhatsProt($sender, $imei, null);\n$w->Message(time().'-1', '5xxxxxxxxx', 'hola');\n```\n?>\nand say: \"Warning: socket_send() expects parameter 1 to be resource, null given in C:\\xampp\\htdocs\\WA\\src\\php\\whatsprot.class.php on line 128\"\nand the line 126 - 128 in whatsprot.class.php is\nprotected function sendData($data)\n{\n    socket_send( $this->_socket, $data, strlen($data), 0 );\n}\n. @developrch @gerswin @kirthar Thank you so mucho guys! now works...\ninstall \"Xampp\" and tried the new code they gave me and it worked perfectly!\nI thought if you install linux not working with \"xampp\" but it was not necessary, but apparently does not work with \"AppServ.\"\nthank you very much, saved me! problem solved!\n. The last question...\nI can send more than one person the message? and can i send special characters... \u00e1\u00e9\u00ed\u00f3\u00fa??\nhow?\n. @kirthar thank you that was what I needed.\n@developrch no problem and thank you very much also because you lost your time to help me\n. ",
    "beserious": "did you find the solution? I am getting same error... but I am not hosting script on local host... I have hosted on my shared server,....could that be the issue?\n. I am getting the same error...and I am using fresh number... receiving code via sms so got the password in WART... bit still getting Error: There was an error with the AJAX request. The request timed out.... I tried to receive code via VOICE in WART but never received call from whatsapp... \nMy Config is as below\n$config['abcd'] = array(\n    'id' => 'ea6e5e31akb080xxxxxxxxxxxxxxxxxxxxxxxxx',\n    'fromNumber' => '9194092xxxxx',\n    'nick' => \"abcd\",\n    'waPassword' => \"3LslFaHQfXpVxZlaCyf9GMxxxxxx\",\nM I doing anything wrong? Please advice...\n. getting this error via exampleFunctional.php\nFiring onConnectError\n. ",
    "g0g0l": "Can u please help with the code? I used PollMessages() and then GetMessages() but it didn't work, even if the device is switched off. What do u mean by \"disable\", switching off is not working\n. thank you very much\n. I found it, The code for receiving the message is like this, but you need to decode\n$w->PollMessages();\n        $msgs = $w->GetMessages();\n        foreach ($msgs as $m) {\n            var_dump($m);\n        }\nIn older API, it was different, but after the updates, the woks is simplified\n. @beldar are you saying id has to be increased to 0,1,2... like this? I had same problem before. sleep(1) did not work, but sleep(5) worked for me\n. thankx @beldar your method works...:-)\n. I saved -1. time() in a separate variable $msgid, and used both in Message() and RequestLastSeen() method. But the RequestLastSeen() method has no return value? Did you just echo the RequestLastSeen() or used another method to get it's value?\n. @nitam : you cannot just print_r($buff) to get it's value as it is a local variable in whatsprot class. I tried the code below and this works:\n$msgid = time().\"-1\";\necho \"\\n[] Send message to $dst: $msg\\n\";\n$wa->Message($msgid, $dst , $msg);\necho \"\";\n$wa->RequestLastSeen($msgid, $dst);\nsleep(1);\n$wa->PollMessages();\n$data = $wa->GetMessages();\nUnder pre tag:\nprint_r($data);\nend of pre tag\nHowever there is no element that shows time, only the useful thing it shows is whether the last message is received\n. As I wrote, there is no element that shows time, but refresh the page, u will get message id, recipient's number and delivery report (if it is delivered at all)\n. I myself could not achieve this, maybe u should try what @nitam says\n. @beldar : you were right, after much effort, my problem is solved now\n. I have succeeded to register new number and send sms from python. But when the number and hash used in php, in this very api, login fails (I removed the md5(strrev($imei)) part from encryptPassword, just used the hash). So does the php need an update?\n. I just followed the instruction given here: https://github.com/tgalal/yowsup/wiki/yowsup-cli. But the password generated here is not supported in php (most probably it won't work in .net too)\n. decode base64 to what? ISO/UTF-8/UTF-16/ASCII? I think @kingk110 is facing an issue with that target format\n. I never tried with .net API, A very crude solution could be embed your python function in .net\n. @kingk110 you need to do something like this in .net\npublic static string base64Decode(string imei)\n{\n    byte[] binary_hash = Convert.FromBaseString(imei);\n    return Encoding.Default.GetString(binary_hash);\n}\nIt is done in php using base64_decode() function. The method given here is really helpful, thanks @jonnywilliamson \n. The md5(reversed imei) was the password in older protocol, I don't think md5 encryption is required any longer, at least it is not required in php\n. @cluber22 the phone,hash combination gets deactivated when you try to use same number in phone, because the rule of WhatsApp is: \"You can only register one number in only one device\". When you register a number using yowsup, WhatsApp considers it as a device and same number cannot be used in phone or tablet.\n. Yes, I do understand that, but what is that id generated when checkCredentials() is called? The id thing is still unclear to me\n. oh, I see, thank u\n. @shirioko I need your help in another case man, I have used both this api and yours. When I try to send multiple messages I get a broken pipe error: Warning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in......\nCan you explain me why this is happening? and what may the possible solution?\n. I have seen 'em all, but all attempts went into vein. So just trying to get some idea\n. I never spam, a have 4 GSM numbers all of them were registered in whatsapp.. I use them seldom. Even I didn't use them for a month and they got blocked\n. Anyways, i am attached to this whatsapp thing a for a very long time and i figured out that there is no actual solution\n. Well guys i have a piece of information here. I have saw some sites are allowing people to send hundreds and thousands of messages from one number. Quite by chance, a few days ago I came to know one of those sites uses venomous API. That very site has a limitation of 40 messages from one channel per hour (per hour? that's weird) and they told me their channels are not getting blocked before at least 1000 messages (if not so, they could not run the business). Here i am getting blocked after 12 messages @shirioko don't tell me i am spamming, 12 messages are not spam and also i sent to my friend circle only none of whom flagged it \"block\". Anybody got any idea how are they doing it?\n. @TruthEdge  i cannot publicly say the name as the site owner is my friend. He told his business secret because of our friendship. you can email me if you want to make some research on this site\n@ganySA i agree with you on the 4th point because i saw when a channel gets replies, it stays a little longer\nI don't know about the rest, but is there really anything to do about that above points?\n. error message was this: [8] fwrite(): send of 71 bytes failed with errno=32 Broken pipe\nI will run with debug true to see what comes\n. ",
    "calverstine": "hi leader80, let say if u use a php normal web script to run the while loop, it would be forever listening right? my set time limit is 30 second, so I would be always time out ? anyway I can improve to read the message that could be efficient to be run on a web script ?\n. meaning after send I need to use the pollMessage to read if it is successful or not right?\n. Hey,\nI just tried to send a message to some person who use an ordinary nokia 3310 model without any wa account n turns out the xml: \n< message from=\"**_@s.whatsapp.net\" id=\"***_\" type=\"chat\" t=\"1349247817\" >\n    < x xmlns=\"jabber: x :event\" >\n      < id >******< / id >\n      < server >< / server >\n    < /x >\n  < /message >\nso this mean the person does not have any wa account right? any faster way without sending the message to the guy we can know if he has an wa account ?\nwa: whatsapp\n. hi developrch, were they any place I can get all the documented uses of sro.whatsapp.net ? um..meaning how you found out this features :)\n. thanks a lot developrch :), u rock ~\n. closing sorry new here n seldom use github :) \n. ",
    "seovend": ":-1: \nThis is also not working -\nGetMessage($mynumber, $from, $id, $type, $time, $name, $body)\n. Hi,\nIt is in your documentation \nhttps://github.com/shirioko/WhatsAPI/wiki/WhatsApi-events\nBut i also tried this -\n$w->Message($userPhone, $body);\n. <?php\nrequire_once('whatsprot.class.php');\n$userPhone        = '918***'; \n$userIdentity     = '35:89*****';\n$userName = 'momttty';\n$destinationPhone ='15****';\n$password         = 'tFm***W1EklM='; \n$debug = TRUE;\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n}\n$w = new WhatsProt($userPhone, $userIdentity, $userName, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->PollMessages();\n. Whats wrong is here ......... I am getting blank page... No array... nthing.\n:-1: \n. Hi, When i try to Sync one contact number then it sync but no response come in return.\nOnly blank page come after proces, please see my approach -\nphp\n\n<prequire_once \"contacts.php\";\nrequire_once('whatsprot.class.php');\n$username ='91*_'; \n$password ='dasfjhklahfkjhsdkuash=';\n$contacts='91856_***';\n$wasync = new WhatsAppContactSync($username, $password, $contacts);\n$wacontacts = $wasync->executeSync();\n. Now i used flag Sync but got same result. :-1: \nSee code -\nphp\n\n<prequire_once \"contacts.php\";\nrequire_once('whatsprot.class.php');\n$username ='91*_';\n$password ='dasfjhklahfkjhsdkuash=';\n$contacts='91856_***';\n$debug = TRUE;\n$wasync = new WhatsAppContactSync($username, $password, $contacts, $debug);\n$wacontacts = $wasync->executeSync();\n. No \n. Ok, Thanks \nIt is coming in form of array. Thanks Shirioko.\n. Hi, Please help me\nI have registered and got this response -\nArray ( [cc] => 91 [in] => 90** [lc] => IN [lg] => hi [mcc] => 000 [mnc] => 000 [method] => sms [id] => a6ec280****_2 [token] => 22bbe0c_***b829826d [c] => cookie ) stdClass Object ( [status] => sent [length] => 6 [method] => sms [retry_after] => 25205 ) \n(Where is password in this array ?)\nThen i got code via msg on my mobile is 501893\nthen i registered my number by this -  $w->registerCode('501893');\nthen i try to send message like this -\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->Message($destinationPhone, 'Hey Harshu, How are you ?');\nSo i got this response -\ntx tx tx tx rx rx rx rx rx \u00ab\u00c5\u201d\u203a\u00d1hh\u00d5\u0161G \u2013G\u00a9\u00f8\u0011\u00cc;\u00f6\u00ef tx \u00cc%\u009d\u00f7\u00dd\u0017\u0019T\u00e9\u00fe\u00b1S\u00c1\u001c9\u00c6@k/KM\b \u0081\u00c7\u2026\u000e\u0152\u00e2,\u00c9J\u000e\u000b\u0018\u001fu\u0192s \u00e0o\u00c7 rx rx rx tx tx tx tx tx tx tx tx Hey Harshu, How are you ? tx \nWHAT MISTAKE I DID IN THIS PROCESS, PLEASE TELL ME. I AM IN BIG PROBLEM.\nEdit by shirioko:\nremoved account details\n. Thanks for reply shirioko\nI have not received password on  $w->registerCode('501893');\n:-(\n. Thanks,\nI am testing these technique.\n. Hi,\nI have try other number and now please tell me where i found password. Only 6 digit code come on sms. \nThese array come in return -\nArray ( [cc] => 91 [in] => 8_4*_ [lc] => IN [lg] => hi [mcc] => 000 [mnc] => 000 [method] => sms [id] => 9666249de5***_c [token] => db8cc8*_***_1 [c] => cookie ) stdClass Object ( [status] => sent [length] => 6 [method] => sms [retry_after] => 1805 ) Array ( [cc] => 91 [in] => 882*_** [id] => 9666249de5d***1bc [c] => cookie ) stdClass Object ( [status] => fail [reason] => incorrect [sms_length] => 6 [voice_length] => 6 ) \nEdit by shirioko:\nremoved account details\n.  shirioko, please help me.\n. my email is harshaljha@gmail.com\n-Thanks\n. Please mail me password.\n. Hi, I am getting these response after successful send message. \ntx tx tx tx rx rx rx rx rx <\u00be\u2039v\u00dfe \u00a2E\u00b0\u00c00 L\u00c0\u00a8(%s tx c'H\u00fc\u2020|\u00aa \u00c9 \u00b4\u0192\u00c3N\u00fb\u203a \u00f9\u00d9 ^\u00bb+\u00f99X . \u00b7\u00f8[\u00d7[\u201ank qMu \u0192# rx \u00afnA\u00ca\u00ca\u00c4L'j\u00a4!\u00da\u00fd9gY\u2014g\u00de0 tx tx tx tx tx tx tx tx yupp tx rx tx tx tx rx rx rx rx rx rx rx message-1373041980-1 rx rx rx rx rx rx rx tx tx tx rx \nHow can i get proper response ?\n-Thanks\n. tx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  QPf\u0018b\u00a3t\f\n'\u2021\u00b9\u000bz\u00dd\u00e7\u00f9\u00e2\u00b5\u00f7\ntx  \u00ffZ\u0015\u0153--$\u00c9L4\u0012@L\u0011\u2122\u00db\u00fa\u001b\u00ae\u00ed\u00aej\u000fFy\u00d3\u201aP\u00ef?*\u00c4Ic\u2030\u00b7\u00aa\u00c2{\u0011\u00ad\u02dc\u00ca1\u0001\nrx  \u000e\u00c8#~\u008dF\u201a}=\n3$\u00c36\u00e8\"\u00fc\u00c7g\ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    Hey buddy\ntx  \nrx  \ntx  \ntx    \ntx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx    \nrx      message-1373106403-1\nrx      \nrx    \nrx  \nrx  \n. I got the above response and what i want that when a message successfully send then i got only response - SENT \nFor every message. \nCan you help me ? \n. My page is blank \nSee my codes \nphp\n require_once('whatsprot.class.php');\n $userPhone='91**********_';\n $userIdentity='35:89:48:14:2**_****_';\n $userName='momy';\n$destinationPhone='91**_******_';\n $password='E**_****_l9WmoU**_*******HU=';\n $debug=TRUE;\n $w=new WhatsProt($userPhone,$userIdentity,$userName,$debug);\n function onPresenceReceived($mynumber,$from,$type){echo\"\\n\\nReceived presence from $from. He/she is now $type\\n\\n\";}$w=new WhatsProt($userPhone,$userIdentity,\"Derp\",false);\n $w-eventManager()->bind(\"onGetPresence\",\"onPresenceReceived\");\n $w->Connect();$w->LoginWithPassword($password);\n $w->Message($destinationPhone,'Hey yaaa');\n $w->SendPresenceSubscription($destinationPhone);\n for($i=0;$i<5;$i++){$w->PollMessages();}\n. It return blank page after process complete ..... why it is so ?\n\n:-1: \n. I am not syncing, I am using these codes to get proper response when i send message. \nResponse that i got from whatsapp server is not readable by codes .... Please see above rx tx etc are coming.\nI need response in array or in a variable. I only need SEND response\n. Sorry i post this issue in wrong topic.\n. Yes, I am completely agree with you. But i am facing this problem cause this api have no documentation. \nBut anyways, You did great work.\n. Response is coming in these format -\nMessage message-1373273916-1 to 9193*_23@s.whatsapp.net received by server Message message-1373273916-1 to 919*_**323@s.whatsapp.net received by client\nAnd one error also - Notice: Undefined variable: token in D:\\wamp\\www\\Whats-App\\EXAMPLES.php on line 44\nThis is not array :-1: \n. And what is $token in this ?\nOne very big problem in these script is that, you provide different variable name in answare but in api have different. \nLike -\n$username (You) = $userPhone (API)\nLike this, please do solve this problem ...... I have also downloaded your folder from your repository but have same problem.\n. Ok, Thanks Man\nIt is working perfectly, Please do update variable name in API or in your local codes. Cause only you are here, who always help people.\nCheer for your work.\n-Thanks\nShirioko\n. Hi,\nResponse is coming in these format -\narray (size=0)\n  empty\narray (size=1)\n  0 => \n    array (size=5)\n      'mynumber' => string '918**_3' (length=12)\n      'from' => string '919_23@s.whatsapp.net' (length=27)\n      'id' => string 'message-1373860-1' (length=20)\n      'type' => string 'chat' (length=4)\n      'time' => string '137*4859' (length=10)\nWhy not coming in one array ?\n. Its working fine.... Thanks a lot\n. Then how can i send message to multiple number, if they dont save my number ?\n. Ok, Thanks John and Shirioko\nBut can you please write a loop for me so that i try to send message to all my friends. I am new in Php.\n. Ok thanks John\nI will try but it is a suggestion that these feature should also be in this API to send message for multiple number.\n. I am using this \n$target = array(919*_3, 919_*_23, 919*_*0);    \nforeach ($target as &$value) {\n    $value = $value * 2;\n}\nunset($value);   \nAnd got this response -\narray (size=0)\n  empty\narray (size=1)\n  0 => \n    array (size=5)\n      'mynumber' => string '91**53' (length=12)\n      'from' => string 'Array@s.whatsapp.net' (length=20)\n      'id' => string 'message-1373276065-1' (length=20)\n      'type' => string 'chat' (length=4)\n      'time' => string '1373276064' (length=10)\n. And message not going :-1: \n. Hi shirioko,\nThis is my code and i am doing any big mistake here, Please solve this im in trouble.\nphp\n\n<prequire_once('whatsprot.class.php');\n$userPhone        = '91882**3';  \n$userIdentity     = '35:8***11';\n$userName         = 'momy';        \n$target = array(919**_00, 919_23, 919*22); \n$password         = 'RRWd******=';\n$debug = TRUE;\nclass WhatsAppReceipts\n{\n    public static $clientReceipts = array();\n    public static $serverReceipts = array();\n}\nclass Receipt\n{\n    public $mynumber;\n    public $from;\n    public $id;\n    public $type;\n    public $time;\npublic function __construct($mynumber, $from, $id, $type, $time)\n{\n    $this->mynumber = $mynumber;\n    $this->from = $from;\n    $this->id = $id;\n    $this->type = $type;\n    $this->time = $time;\n}\n}\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = new Receipt($mynumber, $from, $id, $type, $time);\n    WhatsAppReceipts::$serverReceipts[] = $data;\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $time)\n{\n    $data = new Receipt($mynumber, $from, $id, $type, $time);\n    WhatsAppReceipts::$clientReceipts[] = $data;\n}\n$w = new WhatsProt($userPhone, $token, \"Derp\", false);\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\n$w->Connect();\n$w->LoginWithPassword($password);\n//$w->Message($target, \"Hey sexy\");\nforeach($target as $_target)\n{\n    $w->SendPresenceSubscription($_target);\n    $w->sendComposing($_target);\n    sleep(1);\n    $w->Message($_target, \"Your message is MOMY\");\n    $w->sendPaused($_target);\n    sleep(1);\n}\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\nvar_dump(WhatsAppReceipts::$clientReceipts, WhatsAppReceipts::$serverReceipts);\n\nAnd i am also getting this error's -\nNotice: Undefined variable: token in D:\\wamp\\www\\Whats-App\\mass-message.php on line 58\nFatal error: Call to undefined method WhatsProt::sendComposing() in D:\\wamp\\www\\Whats-App\\mass-message.php on line 70\nI dont have token and also dont know how i got it again.\n. No success. :(\nError -\nCall to undefined method WhatsProt::sendPaused()\nMy code -\nphp\n\n<prequire_once('whatsprot.class.php');\n$userPhone        = '91***'; \n$userIdentity     = '35:89**';\n$userName = 'momy';\n$target = array(\"919**_00\", \"9193*_3\", \"919*****2\");\n$password         = 'R****dFk=';\n$debug = TRUE;\nclass WhatsAppReceipts\n{\npublic static $clientReceipts = array();\npublic static $serverReceipts = array();\n}\nclass Receipt\n{\npublic $mynumber;\npublic $from;\npublic $id;\npublic $type;\npublic $time;\npublic function __construct($mynumber, $from, $id, $type, $time)\n{\n    $this->mynumber = $mynumber;\n    $this->from = $from;\n    $this->id = $id;\n    $this->type = $type;\n    $this->time = $time;\n}\n}\nfunction onServerReceived($mynumber, $from, $id, $type, $time)\n{\n$data = new Receipt($mynumber, $from, $id, $type, $time);\nWhatsAppReceipts::$serverReceipts[] = $data;\n}\nfunction onClientReceived($mynumber, $from, $id, $type, $time)\n{\n$data = new Receipt($mynumber, $from, $id, $type, $time);\nWhatsAppReceipts::$clientReceipts[] = $data;\n}\n$w = new WhatsProt($userPhone, $userIdentity, \"Derp\", false);\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\n$w->Connect();\n$w->LoginWithPassword($password);\nforeach($target as $_target)\n{\n$w->SendPresenceSubscription($_target);\n$w->sendComposingMessage($_target);\nsleep(1);\n$w->Message($_target, \"Your message is MOMY\");\n$w->sendPaused($_target);\nsleep(1);\n}\nfor($i = 0; $i < 5; $i++)\n{\n    $w->PollMessages();\n}\nvar_dump(WhatsAppReceipts::$clientReceipts, WhatsAppReceipts::$serverReceipts);\n. What to do ?\n. ha ha ha ha\nOk buddy.... I got your message.\n. Thanks, Its working. \nThanks a lot\n. Really not working.\nI also try to register a new number......... i dont know what is problem. But i try everything.\n. Ohh.... Thank god .... now its working .......before Whats App server was not replying. \nNow i am happy ...... Its working......... i use this api so may time in a day so that i was so much worried. \nThanks you all .\n. ",
    "mindfuucker": "Opening an old post here, I still think I have a valid question/contribution to the code of shirioko:\nIf you poll for messages 10 times and messages are only delivered once in WhatsApp, won't you get nothing because you are overwriting the other 9 times?\npost the answer here or mail me :smile: at: Roy@appelneger.nl\n. So if I want to echo the name I have to use the onMessage event and create a function to execute when the event is triggered? \nMy next question is: When will the onMessage event be triggered? \nMy goal is to execute once in 5 minutes a code that triggers the onMessage event and store all the message data in a database. \n. Sorry for making you cry :sob: , I was thinking about interrupts in C as event. Thank you for your swift respond. excuses for my ignorance. \nAfter I use getMessages, how do I isolate the variables i want to use? With a foreach loop?\n. In a group message the number of the author is just [author].\nin a group message the name of the author is the same as normal: [name] it's in the notify tag.\nHow I got the $: [It is possible with event but for me this was sufficient]\n$msgs=$wa->getMessages(); //store all messages in $msgs\nforeach($msgs as $m){\n      $attri = $m->getAttributes();\n      $author = $attri[author];\n       foreach (($m->getChildren()) as $child) {\n               if (($child->getTag()) == \"body\") {\n                   $body = $child->getData();\n               }\n               else if (($child->getTag()) == \"notify\") {\n                   $name = $child->getAttribute('name');\n               }\n}\n. In a group message the number of the author is [author].\nin a group message the name of the author is the same as normal: [name]\nIn a personal message the number is: [from]\nIn a personal message the name is: [name]\nIf you want to use the number/groupnumber I suggest you cut of the last part beginning with the @. Use Code below to do that:\nphp\n$from = str_replace(\"@s.whatsapp.net\", \"\", $from); //remove @.swhatsapp.net\n$from = str_replace(\"@g.us\",\"\",$from); //remove @g.us\n. Thats quite a rookie mistake, thanks  :smile: \nstill, it won't recieve anything. I've looked into the whatsprot.class.php and found a difference between the ['name'] attribute and the ['url'] attribute. That difference is:\nname: $node->getChild(0)->getAttribute('name'),\nurl:      $node->getChild(2)->getAttribute('url'),\nWhat does the integer in the getChild function do? Is that the reason my code isn't working?\n['name'] attribute is working with just this: $name = ucfirst($child->getAttribute('name'));\nso I assumed that ['url'] attribute should also be this: $url = $child->getAttribute('url');\n. Great :+1: Only my code still isn't finding the url. It looks like it never goes to the media-child. Would you take a look at it?\n$wa = new WhatsProt($sender, $imei, $nickname, true); //basic login, use your one\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->PollMessages();  \nusleep(40000);\n$msgs=$wa->getMessages(); //store all messages in $msgs\nforeach($msgs as $m){       \n        $attri = $m->getAttributes();\n        $time = date('Y-m-d H:i:s',$attri[t]);\n        $result = $db->prepare(\"SELECT timestamp FROM whatsapp Where timestamp=?\");\n        $result->bind_param(\"s\", $time);\n        $result->execute();\n        $result->bind_result($findetime);\n        $result->fetch();\n        $result->close();\n        if ($findetime !== NULL) {\n        echo \"staat al in database<br>\";\n        } \n        else {\n            if(isset($attri[author]) == true){  //if there is an author\n                $from = $attri[author];                     //save author as from\n                $groupnumber = $attri[from];\n                $groupnumber = str_replace(\"@g.us\",\"\",$groupnumber);\n                $groupname = convertnumber($groupnumber); //custom function t\n            }\n            else{   //else you have a personal message\n                $from = $attri[from];\n                $groupname = \"\";\n                $groupnumber = \"\";\n            }\n            $from = str_replace(\"@s.whatsapp.net\", \"\", $from); //remove @.swhatsapp.net\n            $from = str_replace(\"@g.us\",\"\",$from); //remove @g.us\n            $telnummer = $from; \n            $from = convertnumber($from); //see if number is in numberlist,  return name\n            $name = \"(unknown)\";\n            $body = \"\";\n            foreach (($m->getChildren()) as $child) {\n                var_dump($child);\n                if (($child->getTag()) == \"body\") {\n                    $body = $child->getData();\n                }\n                else if (($child->getTag()) == \"notify\") {\n                    $name = ucfirst($child->getAttribute('name'));\n                }\n                else if($child->getTag() == \"media\"){\n                    $body = $child->getAttribute('url');\n                }\n            }\n        }\n}\n. Yeah, I will try that. Thanks for the tip.\nIt still doesn't explain why I don't receive any messages. I've tried a var_dump($msgs) but in the pile of data no images show up. Audio-files do get polled and added to the database with my above code. Only Images don't. \n. I've found out what was wrong: My permissions were failing so only messages were being received and images not. \n. Hello Heiko,\nIt is weird, It seems me getting pictures was a fluke. After that message I only recieved one more (from the +100 send). The issue is still alive it seems. I am not using the event-manager and I've tried with var_dump to see the img-url I am missing, I still can't find it. Sound is working like a charm, So it's not that my code can't vind Media URL's. \nI had another Issue #572, that was because I was stupid enough to not set the permission of nextChallenge.dat right. (777). After I fixted that I recieved one picture and wrongly assumed that it was responsible for fixing this issue. \n. ",
    "saurabhnagar": "How i get all incoming  message of any whatsapp number through whatsapp api.\n$userPhone        = 'xxxxxxxxx'; \n$userIdentity     = strtolower(urlencode(sha1($userPhone, true)));;\n$userName         = 'admin'; \n$password         = 'xxxxxxxxxxx'; \n$debug            = true;\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->pollMessage());\n$pn = new ProcessNode($w, $userPhone);\n$w->setNewMessageBind($pn);\nwhile (true) {\n     $w->pollMessage();\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n        # process inbound messages\n        print($m->NodeString(\"\") . \"\\n\");\n    }\nThis code show whatsapp message which receive instant but some time after approx 1 minute it not show any message. so please tell me is this possible that i got all incoming message of any number on any time. guide me\nThanks.\nSaurabh\n. why you give me this link. I have already this link.This code(which i paste) related to this api but This code show whatsapp message which receive instant but some time after approx 1 minute it not show any message. so please tell me is this possible that i got all incoming message of any number on any time. for example after 1 hour.\n. Hello,\nHope you are well,\nOk thanks for your help on this issue. i face one more problem\ni am working on whatsapp api and when i register any number through api and\nwatch me android phone then i unregister my whatsapp account. then i\nregister my account via phone and i use api then i need register again in\napi.\nfor get the password.\nSo i want that if some one register already on mobile then i get password\ndirectly via api and not register in api. and if i register via api then i\nnot register in phone again.\nThanks\nOn Wed, Dec 17, 2014 at 8:58 PM, mgp25 notifications@github.com wrote:\n\n@saurabhnagar https://github.com/saurabhnagar Here -->\nhttps://github.com/mgp25/WhatsAPI-Official\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/95#issuecomment-67338216.\n. Ok Thanks\n\nOn Fri, Feb 13, 2015 at 6:14 PM, mgp25 notifications@github.com wrote:\n\nGo to WhatsAPI Official and its explained in the wiki\nRegards\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/95#issuecomment-74248179.\n. From this code you can read whatsapp message from \n\n\n\n<prequire_once '../src/whatsprot.class.php';\n$userPhone        = 'xxxxxxxxxx'; \n$userIdentity     = strtolower(urlencode(sha1($userPhone, true)));;\n$userName         = 'admin'; \n$password         = 'xxxxxxxxxx'; \n$debug            = true;\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);\necho \"last seen\";\n     $w->sendGetRequestLastSeen($userPhone);\nwhile (true) {\n     $w->pollMessage();\n     $msgs = $w->getMessages();\nforeach ($msgs as $m) {\n    # process inbound messages\n    echo \"printing\";\n    print($m->NodeString(\"\") . \"\\n\");\n  }\n}\n?>\n. How we send arabic language text message through api.\nlike this : \u0647\u0630\u0627 \u0647\u0648 \u0628\u0639\u062b \u0628\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 .\nI make a script which send english message but when i send arabic language then it show \"????????\" in receiver end.\nPlease tell me this is urgent.\n. Hello ashutosh\nThanks for you help. it runs after converting UTf8_bin\nThank you\nSaurabh\n. ",
    "mgp25": "@saurabhnagar Here --> https://github.com/mgp25/WhatsAPI-Official\n. Go to WhatsAPI Official and its explained in the wiki \nRegards\n. Instead of commeting in the wrong repo, use the correct repo: https://github.com/mgp25/Chat-API\nAnd read the wiki, where everything is explained\nRegards\n. @kadnan everything is in issues and wiki and as @LuisNeighbur said, if you have installed those extensions, just add them in php.ini\n. @kadnan make sure is the correct version oh php, i mean, you can have multiple php versions and each has its own php.ini. \nAlso check if in debug log, message is being decrypted, if the message is not decrypted the event wont fire, and if the message is not decrypted means there is an issue with the extensions.\nIf you have any other doubt/issue, feel free to open it in Chat API repo\nRegards\n. @hpatel4u be careful :/ , most of the people are spammers, and we dont like to help spammers\n. @hpatel4u dont worry :) just saying, i like to help people but we have the responsability to refuse and reject support for people using this for spam and other marketing activities\n. @fredilopez te recomiendo echar un ojo a la API y generarlo desde ahi, si lo que quieres es ir aprendiendo y eso... Sino como bien dice @jesussales descarga WART de @shirioko. Tambien si no te aclaras bien con el ingles, tengo una repo en mi perfil con soporte y dudas, todo actualizado y con muchas herramientas para el aprendizaje\n. @shirioko <3\n. @pareta2 This has been already answered, anyway if you need further support, contact me via email you can find it in my profile page.\n. Use the search bar at the top of the page. My mail its on my profile page in github, just click on my username.\n. You can use an easy script i made to register numbers. We are giving support and updating the API here:\nhttps://github.com/mgp25/WhatsAPI-Official\nYou will find the register tool in the /examples folder, the file is called \"registerTool.php\". Everything is explained in the wiki too.\nRegards\n. @amanssit if you send messages to semi-random users without respecting terms, WhatsApp blocks your number\nFor more doubts: https://github.com/mgp25/WhatsAPI-Official\n. This repo is only PHP not c#. We are giving support in https://girhub.com/mgp25/WhatsAPI-Official (php)\nWe have a wiki with full documentation there. \nRegards.\n. @Chitrakant-Sahu https://github.com/WHAnonymous/Chat-API\n. @sagar551993 your number have been blocked, try resetting password if not working you will need a new number. As i said you before in this repository is no longer being supported. We are giving support + latest updates here: https://github.com/mgp25/WhatsAPI-Official\n. What script are you using? If its one of your own post the code here, if its any example, send link, be sure to ask the future doubts in the new repository.\nIf you are using latest code from WhatsAPI Official then your number is blocked, resetting your password with WART or WhatsAPI depends what did you use to register the number\n. There is information enough in this issue tracker, use the search bar. As you said, is your work... search, research, learn and do it yourself...\n. @pmuralikrishna111 whoa sorry. Im going to try it now, and post the example code.\n. @pmuralikrishna111 did you have the latest version of the api? just to know\n. @pmuralikrishna111 \nphp\n$w->sendGroupsChatCreate(\"My new Group chat\", $participants);\n$w->sendGetGroups();\noutput:\nrx  <iq from=\"g.us\" id=\"creategroup-1405367897-4\" type=\"result\">\nrx    <group id=\"MyNumber-1405367897\"></group>\nrx  </iq>\nUse the event to capture the id in the child tag.\nThen use:\nphp\n$w->sendMessage($gId, $msg);\ntx  <message to=\"MyNumber-1405367856@g.us\" type=\"text\" id=\"message-1405368235-4\" t=\"1405368235\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Nickname\"></notify>\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\ntx    <body>Test</body>\ntx  </message>\n. @ruriimasu Hi, well, this is not the best place to ask that, anyway. Try exampleRegister.php, you will find it in the 'src' folder of WhatsAPI\n. @Davit21 Use WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official\nWiki: https://github.com/mgp25/WhatsAPI-Official/wiki\n. This is WhatsAPI repo, not WART repo. Check the my mail in my profile page and i introduce you to the whole project and where you will find everything.\nRegards\n. This is fixed here: https://github.com/mgp25/WhatsAPI-Official\n. Its because the time limit, if you want to use without restriction, use the script in terminal/shell\n. @Davit21 this repo is inactive, ask and use in WhatsAPI Official repo\nWhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @transonly use https://github.com/WHAnonymous/Chat-API\n. Hi, the WhatsAPI project is being supported here: https://github.com/mgp25/WhatsAPI-Official\nWhat's the debug output?\nAlso, make sure you use the same identity you used to register the number.\n. php\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->checkCredentials();\n$password = $result->pw;\necho \"Password is $password\";\n. You registered the number using WART, WhatsAPI has different identity generation, you must use the same identity in order to use checkCredentials\n. It seems you are not using the same identity you used when you registered the number, or you never registered that number.\n. Then you have a problem with the identity, try registering again.\n. Please, there is a beautiful search bar above, use it!\n\nphp\n$w->sendMessageImage($target, $image);\n$w->pollMessages();\n. @d3ivys use https://github.com/WHAnonymous/Chat-API instead\nIt's updated, and there is a wiki with all the documentation\nRegards\n. That is when you put a wrong code, if you receive xxx-xxx\nYou should do it:\nphp\n$w->codeRegister('xxxxxx');\n. Then  the identity or the number is different. When you are doing codeRequest you have data and in codeRegister you have a different data.\nThat's why the mismatch error.\nAlso, make sure you are typing the right code.\n. If you want, contact me via mail. And ill see whats happening, right?\n. Latest .dll is in here: https://github.com/mgp25/WART/tree/master/WART/Resources\n. @ciph3rIT Your config should look like this:\n$nickname = \"Test\";\n$sender =   \"3469664_\"; // Mobile number with country code (but without + or 00)\n$imei =     \"\"; // Not necessary\n$password =     \"ACBUf3Dhzvc4xf1h*_**=\"; // Password you received from WhatsApp\nAs @xX7 said, you cant use WhatsApp in two different devices at the same time. If you register WhatsApp for example using WART and then you login to WhatsApp in your device, the password you got in WART is invalidated.\nIf for some reason the password you got via SMS with WART does not work, you can request a new one if you put your personal password in WART without SMS, with voice.\n. @ciph3rIT :)\n. Yep, here you have it: \nIn issue #389 is your answer :)\n. @NulByte hi, i want to ask you something. Can you contact with me? (my mail is in my profile page).\nThank you.\n. mgp25$ php -i\nphpinfo()\nPHP Version => 5.3.15\nYep, i run phpinfo() i just copied and pasted the PHP version :P \nAnyway, now it works perfect with the update\nthanks :)\n. It also happens to me, i tried this:\nhttp://pastebin.com/DpXwBhWp\nSo... i dont know exactly where is the problem, it seems like we are writing a wrong JID :/\n[edited]\n. @xX7 yep, thats another way to do it :) \n. @xX7 @shirioko im still having one problem. The time seems to be static, it always shows the same last seen time. Yes, i tried with different contacts and the go online and then offline and still showing the same time. What am i doing wrong?\nI did this:\n``` php\n$username; // my number\n$msgid=time().\"-1\";\nfunction onGetRequestLastSeen($username, $msgid, $seconds)\n{\n$lastSeen = time() - $seconds;\necho (date(\"h\", $lastSeen)) . \" hours \" . (date(\"i\", $lastSeen))  . \" minutes ago\"; \n}\n// bind event\nw->sendGetRequestLastSeen($target);\n```\n. i get this: \nReceived last seen seconds: '1020'02 hours 59 minutes ago\nReceived last seen seconds: '68312'08 hours 18 minutes ago \nAs you can see, seconds are shown right, but when we try to format with date, something happens\n. Yup, everything right now\nThanks :)\n. Check your PHP version using phpinfo() you should be in version 5.3.x, just update it.\nIf you dont know how to update, just change ALL static const to be like this\nBefore:\nphp\n$this->loginStatus = Static::DISCONNECTED_STATUS;\nAfter:\nphp\n$this->loginStatus = WhatsProt::DISCONNECTED_STATUS;\nHope i solve your problem :)\nReference: #471 \n. The file whatsapp.php was done to be executed in terminal, and get the information with the arguments.\nFor example:\nphp path_to_file_whatsapp.php -s number \"message\"\nthat comand will send to a number a message, running in the terminal.\nIf you want the script to run on a web server you need to modify the script to enter the information by GET or POST (or just leave all the information in the script if you want to test it) and then call the function to send the message.\nSorry for my bad English ;p\n. User identity is no longer needed, just with your number with cc and your password it works. If you want go to my profile page on github and send me an email and i explain you how it works.\nYou can close this issue :)\n. Oks! thank you :)\n. Hi, with the following method you get the SMS with the code to activate WhatsApp account in the format XXX-XXX \nphp\n$w->requestCode(); // This retrieve a 6 digit code to activate WhatsApp (XXX-XXX)\nIf you use WART https://github.com/shirioko/WART by Shirioko you'll be able to register your number and get the password of your account.\nphp\n$w->LoginWithPassword('PASSWD OBTAINED WITH WART');\nthen you use the password you obtained from WART to login...\nphp\n$username = \"your phone number including country code\";\n// $identity; no longer needed\n$nickname = \"Nickname\";\n$password = \"password you received\";// e.g. \"SDFStsdgDFHDFGSDgfsd==\";\n$w = new WhatsProt($username, $idenitity, $nickname, true);\n$w->Connect();\n$w->LoginWithPassword($password);\nReference: #401 \n:)\n[edited]\n. @jesuGMZ you are welcome :)\n. You can keep your session open, edit the socket.php file. And I recommend you if you play with WhatsAPI to use a virtual phone number :P\n. You are welcome :) if you need something more just tell\n. I think it could be like this: a file where we are showing the information (status, last seen, profile picture\u2026) while on the other file (script php) is working all the time, so we never close the session.\n``` php\n$wa = new WhatsProt($sender, $imei, $nickname, false);\n$wa->connect();\n$wa->loginWithPassword($password);\n//you could do a loop or whatever you want so you are always checking the 'last seen'\n$wa->sendGetRequestLastSeen($dst);\n```\nYou cant call that function if you are not logged in :/\n. i have made a test, it worked fine:\nloop.php\nphp\n<?php\n// Just an example\u2026\nrequire '/loop2.php';\n?>\nloop2.php\n``` php\n$wa = new WhatsProt($sender, $imei, $nickname, true);\n$wa->connect();\n$wa->loginWithPassword($password);\n$a=0;\nwhile($a == 0){\necho \"\\n[] Request last seen $dst: \";\n$wa->sendGetRequestLastSeen($dst);\nsleep(5);\n}\n```\nYou can use contactsync, with that you get the status, target and last seen. The value obtained in last seen is in seconds\n. My fault, true, you cant get 'last seen' time using contact sync. @shirioko is right\nUse this instead:\n``` php\n $msgid = time().\"-1\";\nfunction onGetRequestLastSeen($username, $msgid, $seconds)\n{\n// function. You can format the timestamp or create a function that converts seconds to-> x days, y hours, z min\necho $seconds;\n}\n$w->eventManager()->bind('onGetRequestLastSeen', 'onGetRequestLastSeen');\n$w->sendGetRequestLastSeen($target);\n```\n. @ciph3rIT get my mail from my profile page on githug, send me something and then i will explain you how i have it\n. You can also use WART (WhatsApp Registration Tool) by Shirioko. \nhttps://github.com/shirioko/WART\n. You can use:\nphp\n$w->eventManager()>bind(\"onGetProfilePicture\",\"onGetProfilePicture\");\n$w->sendGetProfilePicture($target, true);\nYou need to bind the event, and now you have to code onGetProfilePicture function to do what you want to do.\nI recommend you to see exampleFunctional.php there is a good example in it.\n. You cant use your WhatsApp client in your phone if you are using WhatsAPI.\nWhy? Becouse you have created a different password and your WhatsApp client cant login so it asks you to register it again and make password the client knows.\nDont use your own phone number, create a virtual phone number and use it for WhatsAPI, keep yours for personal use\n. @cnel nope, thats why you need another number to work with. There are many services to create a virtual phone number\n. @shirioko ty!, now its returning this error. Related with:\nphp\nsession_start();\n<b>Warning</b>: session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started at /whatsprot.class.php:1404) in <b>ajaxDemo/socket.php</b> on line <b>37</b><br /> <br />\n<b>Warning</b>: session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cache limiter - headers already sent (output started at whatsprot.class.php:1404) in <b>ajaxDemo/socket.php</b> on line <b>37</b><br />\n. No errors now, although incoming messages are not being displayed yet.\nwith\nphp\n$debug = true;\nrx <message from=\"34***@s.whatsapp.net\" id=\"message-1381618532-1\" type=\"chat\" t=\"1381618532\"> rx <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Test :D\"></notify> rx <request xmlns=\"urn:xmpp:receipts\"></request> rx <body>hola</body> rx </message>\nNot displayed but received.\n. Yup, i have cookies enabled.\nPHP version => PHP Version 5.3.27\nsession.use_cookies On  On\nsession.use_only_cookies    On  On\n. @shirioko :D \nFully working! Profile picture is not displayed but i think i can figure it out.\nThx ;)\n\n. @shirioko i tried the latest fix, profile picture is not displayed. We may have overlooked something.\n. Yup.  777\nphp\n    $filename = \"../\".WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\nI have another script and its working. I dont know what could be happening with ajaxDemo :/\n``` php\nfunction onGetProfilePicture($from, $target, $type, $data)\n{\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\n$fp = @fopen($filename, \"w\");\nif ($fp) {\n    fwrite($fp, $data);\n    fclose($fp);\n\n}\n\necho '<a href=\"'.$filename.'\"><center><img src=\"'.$filename.'\" height=\"250\" width=\"250\"></center></a><br><br>';\n\n}\n```\nphp\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture($target, true);\n. @shirioko did you found what happened? Also there is a vuln using ajaxDemo\u2026 PoC on image:\nThis is easily fixed, so we dont have to be worried at all :p \n\n. @shirioko omg\u2026 my fault, never mind. Its working 100%\n. @shirioko just one more thing. \nphp\n$w->SendPresenceSubscription($target);\nIt suppossed to print if target is online, offline or either typing right? because it doesnt, i need to code something?\nhtml\n            <span id=\"contactname\"></span>\n            <br />\n            <span id=\"contactstatus\"></span>\nIf i want for example to print last seen time using ajax:\nsocket.php\n``` php\nfunction onGetRequestLastSeen($username, $msgid, $seconds)\n{\n// function\n// ...\nsession_start();\n$_SESSION[\"lastseen\"] = $lastseen;\nsession_write_close();\n\n}\n```\nphp\n$w->eventManager()->bind('onGetRequestLastSeen', 'onGetRequestLastSeen');\n$w->sendGetRequestLastSeen($target);\non index.php should i only do this?\nphp\n   <span id=\"contactstatus\"></span>\nI know... i have to get in touch with this languages\n. Im using ajaxDemo for testing. From the targets client i send 5 messages simultaneously for example, sometimes i dont receive all the messages :/\nAnd how could i keep listening without connecting and disconnecting all the tima (in ajaxDemo)\n. Working :) Thx\n. @shirioko im making a script running on a webserver. \nwith debug turned on:\nArray ( [cc] => 34 [in] => ********* [to] => 34********* [lg] => es [lc] => ES [method] => sms [mcc] => 214 [mnc] => 001 [token] => 78f95e9f5a73679a8c5720e1025ef065 [id] => %da9%a3%ee%5ekk%0d2u%bf%ef%95%60%18%90%af%d8%07%09 ) stdClass Object ( [status] => fail [reason] => old_version )\nStill giving me the same error.\n. @shirioko argh im making huge mistakes over and over again. Thx, working perfectly.\n. @dungphanquoc hi, could you contact with me?\n. @dungphanquoc you can find my email on my profile page in Github :) \n. @dungphanquoc it is because i want to ask you something \n. Update your WhatsAPI. Imei is no longer need it\n. You can leave $imei = \"\";\nAs you see, WhatsAPI is working ! You are listening for incoming messages\n. @d1sasterpiece dont add '+'  to the number and be sure to put in password you get registering your number with WART or whatsapi as @shirioko said\n. @d1sasterpiece i didnt see the not authorize, sorry :p \nExample:\n'''php\n$username= \"34123456789;  // number with cc\n$nickname = \"My nick\";\n$password=\"Abchfykfhuffhjfdhjbddy=\" ; // exsmple of password you get with wart/whatsapi\n'''\nYou have it like that?\n. @jesussales hi, if you are running in terminal, the could should be\n``` php\n<?php\nrequire 'whatsprot.class.php';\n$nickname = \"Test :D\";\n$sender =   \"34***\"; // Mobile number with country code (but without + or 00)\n$imei =     \"\"; // no need it\n$password =     \"\"; // Password you received from WhatsApp\n$dst = \"\"; //number with cc of target\necho \"[] Logging in as '$nickname' ($sender)\\n\";\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\necho \"[] Request last seen $contact: \";\n$wa->sendGetRequestLastSeen($dst);\n?>\n```\nIf you are running on a webserver you need to bind the event to a function you need to code.\nim also native spanish, so if you need help, you can contact with me, with my email, you can find it in my profile page in GitHub.\n. @ExAn1mus is right\nY U NO see the code? Did you try to send '5' without '\n:)\nexampleFunctional.php\nphp\nif ($text && ($text == \"5\" || trim($text) == \"5\")) {\n            $iconfile = \"../../tests/Gift.jpgb64\";\n            $fp = fopen($iconfile, \"r\");\n            $icon = fread($fp, filesize($iconfile));\n            fclose($fp);\n            $this->wp->sendMessageImage($this->target, \"https://mms604.whatsapp.net/d11/26/09/8/5/85a13e7812a5e7ad1f8071319d9d1b43.jpg\", \"hero.jpg\", 84712, $icon);\n            $this->wp->sendMessage($this->target, \"Congratulations you guessed the right number!\");\n        } else {\n            $this->wp->sendMessage($this->target, \"I'm sorry, try again!\");\n        }\n. OMG!\nin exampleFunctional you have to guess a number and if you see the code, is 5, when you send 5. The following text is send:\"Congratulations you guessed the right number!\"\nphp\n$text == \"5\" // <--- If the message you send is 5 then\nphp\n$this->wp->sendMessageImage($this->target, \"https://mms604.whatsapp.net/d11/26/09/8/5/85a13e7812a5e7ad1f8071319d9d1b43.jpg\", \"hero.jpg\", 84712, $icon); // this send an image\n            $this->wp->sendMessage($this->target, \"Congratulations you guessed the right number!\");\n. @zhazhago did you modify the code? In a first sight, it seems you added a loop\n. WhatsApp does not block any IP, they block only numbers. You have to sync and dont abuse the system with spam. If not working probably the password is wrong. If the password is right, then post further details. (debug..)\n. MissVenom does not work anymore (i think), use WART (WhatsApp Registration Tool) or WhatsAPI (try exampleRegister.php) to register phone. Anyway, i think WhatsAPI needs an update. \n@shirioko i post you here debug of registering a phone. Many people who try registering new phone number since WhatsApp update their system are getting errors\n```\nArray\n(\n    [cc] => 34\n    [in] => 668830658\n    [to] => 34668830658\n    [lg] => es\n    [lc] => ES\n    [method] => sms\n    [mcc] => 214\n    [mnc] => 001\n    [token] => be2d1f45a45f2dc8fdde1ad5be5ebe37\n    [id] => %da9%a3%ee%5ekk%0d2u%bf%ef%95%60%18%90%af%d8%07%09\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => old_version\n)\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in /WhatsAPI-master-1/src/php/whatsprot.class.php:317\nStack trace:\n0 /WhatsAPI-master-1/src/php/exampleRegister.php(48): WhatsProt->codeRequest('sms')\n1 {main}\nthrown in WhatsAPI-master-1/src/php/whatsprot.class.php on line 317\n```\n. @shirioko oks! just a question, the phone i tried to register its not mine, its from other user experiencing errors. Mine works all perfectly, so, WhatsApp could block it right? Maybe they're not using WhatsAPI properly with it\nthx ;)\n. Maybe your config is not right, if your config is right, then post debug so we can see what is happening\n. in the index.php\nchange this line with the target (the number you want to chat with)\nphp\n$target = \"***********\"; //conversation target number/JID\nIn socket.php change this:\nphp\n$username = \"************\";\n$password = \"******************************\";\n$nickname = \"WhatsAPI Test\";\n$w = new WhatsProt($username, 0, $nickname, true);\nIt should work\n. @Jakmaster199 are you Spanish (i see the cc)? if you want, you can contact with me by email and give further details so we can help you.\nI have done this script with ajaxDemo, i only change the design if you want to give it a try, it should work http://www.whatsappea.me/inicio.php\nAjaxDemo code works perfect to me\n. Take a look at the code https://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleRegister.php\nOnce you have the sms code, simply use:\nphp\n$w->codeRegister('SMS CODE'); //sms code you received, if you receive for example 123-345, use it without '-' like this: 123456\n. sigh\nChange your config, and try this scripts...\nwith this you request the sms code\n``` php\n<?php\nrequire_once('whatsprot.class.php');\n$username = '34666554433';                      // Telephone number including the country code without '+' or '00'.\n$nickname = 'John Doe';                         // This is the username displayed by WhatsApp clients.\n$w = new WhatsProt($username, $identity, $nickname, TRUE);\n$w->codeRequest('sms');\n?>\n```\nWith this you register with the code you received\n``` php\n<?php\nrequire_once('whatsprot.class.php');\n$username = '34666554433';                      // Telephone number including the country code without '+' or '00'.\n$nickname = 'John Doe';                         // This is the username displayed by WhatsApp clients.\n$w = new WhatsProt($username, $identity, $nickname, TRUE);\n$w->codeRegister('123456');\n?>\n```\n. I run the script, sms is already sent to you, just register the code with the second script. If you dont know, use WART instead\n. SCAM, DO NOT USE IT\n. and sendPresence so it doesnt close socket\n. whatsprot.class for more info\nphp\n$w->sendPresence();\n. Why dont you search it in WhatsApiNet repo instead of asking here?\n. @8DigitalStaging Find it in WhatsApiNet repo, the information is in there, why dont you search there?\n. I know, but people needs to start searching for themselfes\n. You dont know how to search... here\nThere are workarounds, but you can code it the way you want\n. PHP != C#\n. This repo its inactive use https://github.com/mgp25/WhatsAPI-Official instead\nRegards\n. @sire42 \nphp\n$w->sendGetProfilePicture($number);\nphp\n$w->sendSetProfilePicture($path);\n. @bongbongjin this is WhatsAPI (php), not yowsup (python), go to the proper repository.\nRegards\n. Hi, check latest code and official updates here: https://github.com/mgp25/WhatsAPI-Official\n. ```\nArray (\n [method] => sms \n[in] => 4326143583 \n[cc] => 1 \n[id] => %83%ED%AF%BB%41%72%77%29%48%22%E8%A9%69%1F%DA%2F \n[lg] => en \n[lc] => en \n[token] => rY3X9yDtLxEZ3dCSLwYn6sUqwy4%3D \n[sim_mcc] => 000 \n[sim_mnc] => 000 ) \nstdClass Object ( \n[status] => fail \n[reason] => too_recent \n[retry_after] => 3551 )\nFatal error: Uncaught exception 'Exception' with message 'Code already sent. Retry after 59 minutes.' in /home/whatscom/public_html/include/classes/Whatsapp/whatsprot.class.php:381 Stack trace: #0 /home/whatscom/public_html/include/classes/Whatsapp/sendcode.php(7): WhatsProt->codeRequest() #1 {main} thrown in /home/whatscom/public_html/include/classes/Whatsapp/whatsprot.class.php on line 381\n```\nOutput: Code already sent. Retry after 59 minutes.\n. @kareem289 Output: There was a problem trying to request the code\nFor most of the people is working. The 'no_routes' error its because you need to provide sim_mnc and sim_data, if you check WhatsAPI Official wiki, in the registration flow, in the https request there is a useful link to get that data.\nIf it shows 'sent' and you don't receive the sms just wait, is a problem of the mobile network not whatsapp :)\n. Use WhatsAPI Official code\nhttps://github.com/mgp25/WhatsAPI-Official\nThere is also a wiki with all the documentation\nRegards\n. @Davit21 use WhatsAPI Official code https://github.com/mgp25/WhatsAPI-Official\nThere is also a wiki with all the documentation: https://github.com/mgp25/WhatsAPI-Official/wiki\nThe identity its generated automatically just set identity as $identity = 'myId'; a file called myId.datwill ge generated, use the code i mention.\ntoo_recent appears when you already tried before, you need to wait that seconds that appear you.\nRegards\n. @dp3rez try using WART some services does not work with whatsapp. \n. @dp3rez WART is working fine. In the phone number field, you have to put your phone number with the country code. Set the debug to true (check it) and post the debug here.\nSome virtual phone number services does not work, just fyi\n. @amjd In exampleRegister is not required at first time:\nCheck this:\nRegistration Flow\nOnce you see that, go to whatsprot.class.php and search for $identity. \n. @blackhackereg Well, try this:\n``` php\n$path= /path/toYourImage.jpg; // here you can setup the path where the image is located.\nif ($_SERVER['argv'][1] == \"-photo\") {\n    $path = $_SERVER['argv'][3];\n    echo \"\\n[] Cambiando foto de perfil...\\n\";\n    $wa->sendSetProfilePicture($path);\n    exit(0);\n}\n```\nThis is part of a console script in php, i recommend you to place your photo in the same folder as the script you are running. For example:\nMyFolder:\n-        myScript.php\n-        myImage.jpg\nSo in the path you only need to set as $path = \"myImage.jpg\";\nTonight i will post a script for you in case it still not working for you ;)\n. @blackhackereg Did you try exampleFunctional.php? It should replace your actual profile picture by x3.jpg that is placed in the demo folder.\nIt works to me\n. @Marcorele is better to you to ask in yowsup repo. I see you already asked there.\nHere is the documentation Yowsup Library Documentation you have everything there :)\n. @Marcorele i answered you in the yowsup repo, i dont python as well as php. So if you want more support you could try with WhatsAPI.\n. @shirioko Yeah, i know, but it doesnt do anything, I tried that already :/ But it never notice me when the user goes online and that...\n``` php\nfunction onPresenceReceived($username, $from, $type)\n{\n    echo \"The user is now\" . $type;\n}\n...\n$wa->eventManager()->bind(\"onGetPresence\", \"onPresenceReceived\");\n    $wa->SendPresenceSubscription($dst);\nwhile(true){\n    sleep(60);\n    }\n```\n. @shirioko Right, but if i use:\nphp\necho \"Test\";\ninstead, still not work. Maybe the while interfere to display the text?\n. @shirioko :+1: You are right :)\n. @ param  string[] $jids The users' JIDs\nJids: ccNumber@s.whatsapp.net\nFor example:\n34 is the country code followed by the phone number.\n34123456789@s.whatsapp.net\nphp\n$wa->sendGetStatuses($jids)\n. @eliasjnior It works perfectly for me. Test http://watools.es is a project based on WhatsAPI, and it sends messages instantly.\n. @eliasjnior but the page itself (images, scripts...), but the message is sent at the moment, try a simple script, it will work :)\n. @eliasjnior did you try to run the script on the terminal? \nphp script.php\nYes, its because of my page (slow server, images, javascripts...)\n. @eliasjnior i login in, and it takes me about a second.\nAnyway, i dont support people who want to send massive messages:\nHave a look to this EULA\n. @eliasjnior if you are using it for wordpress as a plugin then 7 seconds of delay is not a problem (just like a push notification).\nMaybe you internet connection isnt fast enought and that why your slowness logging in\n. @eliasjnior I test the script with\nphp\nmicrotime(true);\nFor being the most accurate with the time.\nIt takes me 3.6283469200134 seconds. Its not a big delay, is not a problem though.\n. @cwone can we get in touch? Because im trying the way to detect when an user is online. My mail is on my profile page. Lets see if we can finally make a workaround!\n. Problem fixed by @cwone \nNeed to change this on whatsprot.class.php. Later ill make a pull request\nphp\n        if (strcmp($node->getTag(), \"presence\") == 0\n            && strncmp($node->getAttribute('from'), $this->phoneNumber, strlen($this->phoneNumber)) != 0\n            && strpos($node->getAttribute('from'), \"-\") == false) {\n            $presence = array();\n            if($node->getAttribute('type') == null){\n            $this->eventManager()->firePresence(\n                $this->phoneNumber,\n                $node->getAttribute('from'),\n                $presence['type'] = \"available\"\n            );\n            }\n            else{\n            $this->eventManager()->firePresence(\n                $this->phoneNumber,\n                $node->getAttribute('from'),\n                $presence['type'] = \"unavailable\"\n            );\n            }\n        }\n. @amrdesign OMG, first of all, edit your comment and put it in the correct format...\nYou are having problems with the Login, try this simple script:\n- This script will send a message from your number to $dst (another number). \n_Note:_ You can`t use WhatsAPI and your WhatsApp in your phone with the same number at the same time. Every timy you do that, you will need to generate a new password.\n``` php\n<?php\nrequire '../src/php/whatsprot.class.php';\n$nickname = \"\"; // Your nickname\n$sender =   \"\"; // Number with country code\n$imei =     \"\"; // Not used\n$password =     \"\"; // Password you received from WhatsApp (Using WART, WhatsAPI...)\n$dst = \"\"; // Number with country code (target to send a message)\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->sendMessage($dst, \"You have sent a message correctly, so you've connected to WhatsApp\");\n?>\n```\n. @mkhuder dont put your password here. The way to use WhatsAPI:\n``` php\n$nickname = \"\";\n$sender =   \"\"; // Your number with country code\n$imei =     \"\"; // This is the id, but its not used, leave this variable like this\n$password =     \"\"; // Password you received from WhatsApp\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\n```\nAnd there you go, you can go now and try WhatsAPI.\n. @mkhuder Yes, is correct.\n. @sagar551993 it seems your number is blocked. We are giving support and with the latest updates here:\nhttps://github.com/mgp25/WhatsAPI-Official\nRegards.\n. @sagar551993 what are you trying to do? give more details, scripts, code... as i said in the other comment: https://github.com/mgp25/WhatsAPI-Official\n. Do you read the comments? Use WhatsAPI Official\n. @dipen3492 go to WhatsAPI Official\n. @dipen3492 you are not even setting a password!! go to WhatsAPI Official and read the wiki.\n. @andrh87 WhatsApp uses a customized XMPP server. Every user has its own jid. \n```\nnumber_with _country_code@s.whatsapp.net\nExample of WhatsApp JID:\n34***@s.whatsapp.net\n```\nUsing WhatsAPI for sending messages to a single number:\n``` php\n$dst = \"\"; // number you want to send the message to (with country code)\n$msg = \"\"; // Message you want to send\n$wa->sendMessage($dst, $msg);\n```\nSender and target should have each other added to contact list or synced to prevent WhatsApp Blocking your number.\nThere are events and functions that allows you to obtain the status and the presence of any user.\nYou have in this repo all the info you need. Most of the questions, are answered in the issues section.\n. Still not a solution for WhatsApp blocking phone numbers, the problem is the user for doing wrong things with the API, and abusing the system.\n. @NandoRosado here in spain: fonyou\nJust search in google, virtual phone number services.\n@amregbaly Is not the amount of messages sent, because today i was testing a script with myself and i sent over 1 thousand messages in about 2 minutes. The API is working perfectly @shirioko has done a nice work with this API, also is the way you use the API. \nRemember that if you use WhatsAPI you cant use it at the same time in you mobile phone.\nAlso, if you are not using the latest WhatsAPI, download the new one, and try the tests files. If any error, post the debug here, i we will try to solve your problem.\n. @blueslmj First of all i send that amount of messages to myself, that means that i have already the number saved in the address book, both contacts are synced.\nWhatsApp can determine if you are using their service improperly , for example by sending only one message to different contacts that you do not have and they neither. Is just an example. Anyway if you have problems, post your script and debug here, so we will see where is the problem and how could be solved.\nSo, if you are doing it right, in the tests folder, you can find how to do that. There are many examples.\n. @amregbaly First of all, dont show us your password and identity... edit your comment please.\nYou didnt get what i told before. I sent 2000 messages to myself, not to different numbers, when you are sending messages to many people is considered spam.\nTry with one number and one message.\nHere is quote from WhatsApp FAQ:\n\"\"\"\nHowever, specific actions such as the following may eventually result in your account becoming deactivated.\n- Sending ads or any other form of commercial solicitation.\n- Sending spam or unsolicited messages.\n- Submitting content (in the status, profile pictures or messages) that is in violation of our Terms of Service such as unlawful, obscene, threatening, harassing, hateful, racially or ethnically offensive or any other inappropriate material.\n- Being annoying to other users.\n- Being a repeat infringer.\n- Using an automated system or an unauthorized / unofficial client application to send messages through WhatsApp.\n\"\"\"\n. @CodersBrothers If you want to not get blocked, send messages to people that have added you into their contact list, and use the API the way the real mobile client works, then you wont get blocked. Its really simple.\nis there other way to avoid being blocked by whatsapp, maybe, but you have to know how whatsapp (client-server) works and everything in general\n. @CodersBrothers #800\n. @manet800 #800 \n. @mrssam We dont support that kind of activity, it goes against the EULA. We dont support spamming.\nhttps://github.com/mgp25/WhatsAPI-Official\n. @creolyte @hpatel4u or maybe using an outdated API because this one is outdated, use Chat-API instead\n. Working every nice on my side.\nBy the way, im not answering anymore in the repository as its outdated an inactive\nRegards\n. Do NOT trust @foratech is a scammer. FAKE\nCheck only trusted sources:https://github.com/WHAnonymous/Chat-API\n. @g0g0l post the debug here and we will tell you.\n[```]\nhere the debug you get\n// without the brackets\n[```]\n. @blueslmj little deeper than that, but already know how it works :) Thank you anyway :+1: \n. @dp3rez dont repeat the messages, we read them, i answered you in the other issue.\n. Start script, sync contacts and then send messages. You can sync contacts in background, you can set the type of sync you want\n. @faisalcse Its working perfectly, post output/script or error description\n. @shirioko as @McBacker asked, what exactly this synchronization process does? What triggers synchronization in the official client?\nthanks\n. The backoff time is something server side, it wont allow you to sendSync multiple times. No fix.\n. sendSync is just a function to import your contacts from Adress Book (contact list) to WhatsApp contact list. So only the ones who has WhatsApp appear in your WhatsApp contact list. You should sendSync only at the start of the App or when adding a new contact. There isnt required to sendSync multiple times, just makes no sense. Also sometimes when you have WhatsApp running at background it sendSync to check if is there any contact to add to WhatsApp contact list.\nIf you send messages to random / semi random users or just send messages (spam) you will be blocked and there is no way to avoid that. It's easy.\n. @frannze man... why you share your data with us. facepalm\n. @marwanin could you post the script you are using? Without your data (phone number, identity and password). Also post the debug.\n. @marwanin Oks, you are using whatsapp.php. Please edit your comment and delete your password.\nTry this:\nphp whatsapp.php -s targetNumber Message\nTarget number with country code. If it doesnt work, post the output from the terminal/shell (debug) so we can see where is the problem.\n. @marwanin when i get home i will explain you everything and a basic guide.\nIf you want to do something until i get home, install php in your computer if you want to use with the command line, of course you can run scripts in webserver too. Later i will tell you\n. Problem solved. @marwanin  was talking about whatsapp.php file of the /src folder. When you try to access, it asks you for a password (not WhatsApp Password).\n\nIn the line 36 of whatsapp.php, you will find the password to access, you can change it.\nphp\n$config['webpassword'] = 'MakeUpPassword';\n. @blueslmj \nas the error said:\nFatal error: Call to a member function getTag() on a non-object\nPost here your script, or if you are using a file from WhatsAPI, like contactsync.php. Tell us the way you are using it.\n. #762\n. @cybersyx This usually happens when you write to a socket fully closed. This might be happening when a client program doesn't wait till all the data from the server is received and simply closes a socket.\n. Yes it is. Thats means you have 100 private chats, you have to listen the conversations and sort the conversation by number, then you can answer them one by one. You will have to code.\n. @rgdixit Yes it is, but then you have prepare in the script for every number a different message to be sent.\n. @faisalcse Its working perfectly. Post the debug/output or script and error description\n. @faisalcse post your script here and the way you are using it.\n762\n. @faisalcse You have to run the script this way..\ncontactsync.php?phone=YOURPHONE&pass=YOURPASSWORD&u[]=NUMBER1&u[]=NUMBER2  ...\n. @faisalcse Its working for me:\nhttps://************/contactsync.php?phone=34*******&pass=*************************&u[]=34***********\nOutput:\n34*********@s.whatsapp.net exists\n. @faisalcse i dont know the maximum numbers you can send. But if you over sync numbers, probably stanza will throw an error.\n. @birdman2005 Did you generate the password? Once you get the sms from WhatsApp you have verify the code WhatsApp have sent to you.\nMexico's cc: 52.\nSo your number shoud be like this: 52***\nIf you are having the same issue, post the debug here.\n. @gbmrocks in the wiki You can find all the events. For example, the ones you need...:\n- onMessageReceivedServer($mynumber, $from, $id, $type)\n- onMessageReceivedClient($mynumber, $from, $id, $type, $time)\nsendMessage() returns its message id\n. @gbmrocks How are you using it? Give for details, post the debug/output. Which errors and part of the script is not working?\n. @gbmrocks you have to bind both events. And you will get the client receipt when the user reads the message/received the message it depends on how actively is the user\n. @gbmrocks if you are using bulk.php. Thats right. Is there any problem showing the Received Client receipt?\n. @gbmrocks Just a question, the number you are sending the message has read/recieved the message? because if the user dont do that you wont receive a receipt\n. @gbmrocks i'll check it later tonight\n. @gbmrocks i fixed the issue. I did a pull request, meanwhile you can download whatsprot.class.php from my repo.\n[UPDATE]: WhatsAPI updated fixing fireMessageReceivedClient.\n. @Marcorele The loading speed  of ContactSync depends exclusively on the number of contacts to sync. The more external methods you use the slower the script goes.\nIf your question its about yowsup, better in the yowsup repo. I try contactsync and almost instantly I have the result\n. @Marcorele modify contactsync.php to run on terminal for example.\nphp contactsync.php\nYou can also use arguments for the numbers you want to sync\nphp contactsync.php 34123456789 34987654321 ...\nOn webserver it also works and pretty fast, less than a second\n. @Marcorele Do you know that you have to put the url this way? ...\n?phone=123456&pass=xxxx&u[]=123456\nSample script...\n``` php\n<?php\nrequire_once(\"whatsprot.class.php\");\n$contacts = array(\"\");\n$nickname = \"SYNC\"; \n$username =     \"\";\n$identity =     \"\";\n$password =     \"\";\n$wa = new WhatsProt($username, $identity, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->sendSync($contacts);\necho \"Synced \" . count($contacts) . \" contacts\";\n?>\n```\n. @Marcorele Run the script on your terminal/cmd/shell and test it from there.\nLess than a second, tomorrow i'll post here an image with the time, really fast\n. @Marcorele tomorrow ill post some details here.\n. @Shirioko nice! :) thinking to port whatsapp to os x :p\nBtw good game (football)\n. @Shirioko me neither :p xDDD \nYes, it should work with mono. Hope this stops million of issues like \"heeelp contactsync\"\nBest regards\n. @mrinsane you have set a null password as you can see in here...:\nMost os the errors could be solved by reading them\nline 48\n/home/xxxxx/public_html/xxxxx/whats/contactsync.php(48): WhatsProt->loginWithPassword(NULL)\n. @akpremkumar not working? You need to have php >=5.3 on your web server. And if you have that version and its not working, you are doing something wrong.\nMore help? More detais\n. @Waishon At first sight, it seems that WhatsApp banned you. Set debug to TRUE and if you see not authorized, means that WA banned you.\n. @Waishon if you get something like this:\nrx  <failure>\nrx    <not-authorized></not-authorized>\nrx  </failure>\nYou are banned. If you are not getting that, maybe your password is wrong. There is no way to unban.\n. @Waishon thats all the debug you got? Be sure your password is right..\n. @Waishon you will always get blocked if you send  massive messages to unkown and unsynced numbers.\nThe best thing you could do, is to simulate and do the same things WhatsApp mobile client do.\n. @Waishon \nNo need to worry then. If both are synced and saved in their contact list.\nAll the information about functions and events are in the wiki.\nphp\n$w->sendGetGroups();\n. @amregbaly \nphp\n$w->sendPresence()\n. @heruan Events are firing except onMessageComposing/onMessagePaused, looking for it right now, ill make a fix for it.\n. @heruan i made a pull request with the fix. Once its pushed to master it will work :)\n787\n. @heruan ill fix it now, try it and tell if its working if not @shirioko will kill me xD \nnah, joking, i tested it, and works fine, ill fix the typo.\n. @blueslmj are you using exampleRegister.php? If you are, first use this:\n``` php\n<?php\nrequire_once('whatsprot.class.php');\n$debug = true;\n$username = '34666554433'; \n$identity = ''; \n$nickname = 'John Doe'; \n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\n//$w->codeRegister('123456');\n?>\n```\nThen you will have an output like this:\nArray\n(\n    [cc] => cc\n    [in] => number\n    [to] => number with cc\n    [lg] => es\n    [lc] => Es\n    [method] => voice\n    [mcc] => 310\n    [mnc] => 001\n    [token] => MY TOKEN\n    [id] => MY ID\n)\nstdClass Object\n(\n    [status] => sent\n    [length] => 6\n    [method] => sms\n    [retry_after] => 1805\n)\nIf you are getting this instead:\nArray\n(\n    [cc] => cc\n    [in] => number\n    [to] => number with cc\n    [lg] => ed\n    [lc] => ES\n    [method] => voice\n    [mcc] => 310\n    [mnc] => 001\n    [token] => MY TOKEN\n    [id] => MY ID\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => too_recent\n    [retry_after] => 1805\n)\nAs you can see, this happens when you have already requested an sms code. And you have to wait\n[retry_after] => 1805\nseconds for doing it again, also you can change this in the exampleRegister.php:\nphp\n$w->codeRequest('voice');\nA bot will call you and say to you the code (in english). Once you get the code, uncomment the line codeRegister with the code you have, copy the identity you got, and set it in the script and run it. And there you go. In the output you get the pw (password).\nIf you are still having problems with this, then I advise you to use WART (WhatsApp Registration Tool).\n. @blueslmj facing right now that issue too xD dkw\n[UPDATE]: Problem was mine, is working fine.\n. @Blueslmj yup, its working 100%\n. @blueslmj maybe its the number you are working with, some mobile phones if you are using virtual numbers and dont have correcty configured push notifications doesnt work. I suggest you to use codeRequest with voice. Also WART is working. As you sais if the [status]-> Sent. Means that the WhatsApp server sends you an sms/call.\n. @200dvd Could you post the output of the script or give more details? \n. @manufuentescr as you can read bad-request. Which type of file are you trying to send, and which size it has? It needs to be an square size, maximun 640x640. Post the line with the file you want to send.\nphp\n$this->wp->sendMessageImage($dst, $imagePath);\n. This will work for you. And @alshahad try to edit your comment with good format.\nSends the presence status (active) to stay alive.\nphp\n$w->sendPresence();\nphp\nwhile(1){\n    ...\n    $w->pollMessages();\n    $w->sendPresence();\n    $msgs = $w->getMessages();\n    flush();\n    sleep(10);\n}\n. @alshahad did you try without that line?\nTry without this line\nphp\nsleep(10);\n. @alshahad i dont understand exactly what you want. Once you connect, it goes through the while loop and it checks for incomming messages, if you receive a message it will compare the body (text message) \"5\" and then send a message with the result. (auto responde is sendMessage function once it has compared the string)\n. @alshahad \nphp\nwhile (1) {\n    $w->pollMessages();\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n    }\n}\nphp\nwhile (1) {\n    $w->sendMessage($dst, $message);\n    $w->pollMessages();\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n    }\n}\n. @OMendozaG What did you tried to do? More info.\n. @xvilo \nIdentity: A unique hash generated by your device. If using WART or the API, it is a SHA1 string generated using a combination of your mobile number and specified \"password\" as a salt.\nWhen logging in you can do this:\nSo \nphp\n$identity\nis not required.\nphp\n$w = new WhatsProt($username, null, $nickname, $debug);\nThe problem I see is that your password has not been generated by the server WhatsApp. Did you registered you number with the API or WART?  If it is registered right, then you have an invalid password, try requesting a new one.\n. @xvilo error. Dont put the phone number with '+'\nPut it like this:\nphp\n $userPhone = '316123456789';\n. @xvilo Your password is wrong or WhatsApp has blocked your number. Did you tried to register your number again? Try it using WART and try logging in with the new password.\nLogin Failure-> When not authorized means (the credentials arent right or blocked)\nrx  <failure>\nrx    <not-authorized></not-authorized>\nrx  </failure>\n. @xvilo If you are trying to use the same number with WhatsAPI and your mobile client, it wont work. If you logging in in your mobile device, the password you got from WART is useless, if you want to use it with WhatsAPI its fine, but once you use it in your mobile device, the password you got wont work and you will need to request a new one.\n. @xvilo there is a test folder in WhatsAPI, inside there is a file called whatsapp.php, you can use that to see the basic functions.\nphp\n$w->sendMessage($dst, $msg);\n. @xvilo dont use the '+'. Can you post your script or are you using whatsapp.php? \n. @xvilo close issue.\n. @lossurdo It is considered spam (unless they have added your number in their contact list). WhatsApp will ban your number if you spam\n. @faisalcse \n``` php\n$url = \"http://example.com/image.jpg\";\n$w->sendMessageImage($target, $url);\n```\n. @faisalcse you will always need whatsprot.class.php\nphp\n require_once 'whatsprot.class.php';\n. @faisalcse do you know php? Have you read the API code? ...\nCreate a php file, e.g: test.php\nThis is an example of a script for sending an image\n``` php\n<?php\n require_once 'whatsprot.class.php';\n$username =  \"\";\n $password = \"\";\n $debug = false;\n $identity = \"\";\n$nickname = \"\";\n$target \"\";\n$url = \"\";                    \n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendMessageImage($target, $url);\n?>\n```\nYes, you can also use exampleFunctional for testing.\n. @faisalcse the bulk.php is for sending massive messages / broadcast messages. If you want to send an image only, the simplest script is the one i posted above.\n. @faisalcse Yes you can.\n``` php\n$url = \"\";\n$contacts = array(\"num1\",\"num2\",\"num3\",\"num4\",\"num5\",\"num6\",\"num7\",\"num8\");\n foreach ($contacts as $contact) \n{ \n    $w->sendMessageImage($contact, $url);\n    $w->pollMessages();\n }\n```\n. @faisalcse if you have registered a number correctly, for logging in, $identity is not required you can do it this way:\nphp\n$w = new WhatsProt($username, null, $nickname, $debug);\n. @faisalcse You can do something like this... Most of the logic you can use can be found searching on google if you have any doubts...\nphp\n$j=0;\nfor($i=0; $i<count($contacts); $i++){\n    $w->sendMessageImage($contacts[$i], $url);\n    if($j == 4){\n        $w->pollMessages();\n        $j=0;\n    }\n    $j++;\n}\n. @faisalcse i really dont know what you want to do. You have the code and you have everything you need to send the image. You can send the image to the targets you want, there is no problem.\n. @faisalcse omg.... did you saw the code?\nthis will only send one image because you code it that way, pollMessages does not affect to send messages, just look the for loop, the problem is there, not pollMessages.\nphp\n$j=0;\nfor($i=0; $i $w->sendMessageImage($contacts[$i], $url);\nif($j == 8){\n$w->pollMessages();\n$j=0;\n}\n$j++;\n}\npollMessages only pull from the socket, and place incoming messages in the message queue. You can call pollMessages the times you want.\nYou should check this: PHP for\n. @faisalcse I recommend you to take a look at whatsprot.class.php, in that file you will find all the functions, which params. uses and what returns.\nsendMessage only need two params: target and the text message.\nphp\n$w->sendMessage($target, $message);\nphp\necho time(); // this is a function in php\nThis -> PHP: time\nSo the text message you are sending is: Sent from WhatsApi at (seconds returned by time()). Just try it and you will see that is working that way.\nI seriously recommend you to read the whole API and understand it. I also advise you to check all the php function you dont know that in the php manual or search them in google. That way you will learn better and faster.\n. @faisalcse If you have your other issue solved, make sure to close it.\nDo you mean the way to check if the user we have, has been blocked by WhatsApp or still active, right?\n. @faisalcse its pretty simple. You can see it by 2 different ways:\n- If you try to register that number again, it will throw an Exception, and the reason will be [Blocked].\n- If you are trying to use WhatsApp service, when logging in (and have set debug to TRUE), you will see this tags when blocked or wrong password.\n<failure>\n<not-authorized></not-authorized>\n<failure>\n. @blueslmj #476 \nSeriously, most of the question people ask, are already solved. There is a search tab above.\n\nAlso, i recommend you to take a look at whatsprot.class.php file, you will find all the functions WhatsAPI uses, and how they work.\n. @faisalcse Seriously, most of the question people ask, are already solved. There is a search tab above.\n \n761\n757\n. @faisalcse did you really read it?, the solution is in there:\n1. Login\n2. Sync contacts\n3. Send Presence Suscription\n4. Send Typing\n5. Send Paused\n6. Send Message\n7. Pool Messages\nChat with people that have added you into their contact list. And do not send big ammount of messages, thats it.\n. @faisalcse You sync the contacts you are going to chat with.\nphp\n$contacts = array(\"num1\",\"num2\",\"num3\");\n$w->sendSync($contacts);\n. @codeBrothers if you are using the same WhatsApp session, then yes\n. @CodersBrothers try it. #762 \n. @CodersBrothers @faisalcse the list i posted above is updated, that is the correct way you should do it.\n@faisalcse you need to get used to look at the API and see their functions before asking.\nAll function as i said before are in the whatsprot.class.php...\nphp\n$w->sendMessagePaused($dst);\n$w->sendMessageComposing($dst);\nReally, not joking, take a look to this --> whatsprot.class.php\n. @CodersBrothers sync contacts and sendPresenceSuscription.\n@faisalcse there is no limit if you are doing it right. Once you get blocked you wont be able to send messages anymore. Tip: Use the API the way the real mobile cleint works and everything will work fine.\n@eliasjnior If you do that, you will be blocked by WhatsApp servers soon. That is not a solution. Also the \"rand(0,1000)\" is not a workaround. If you read the code and now how WhatsApp works (in general) you will know what to do :)\nThis is the correct way, follow this steps:\n- Login\n- Sync contacts\n- Send Presence Suscription\n- Send Typing\n- Send Paused\n- Send Message\n- Pool Messages\n[UPDATE]: Be sure the contact have added you to their contact list and you too.\n. @sandro-salles just port sync to yowsup, last week i synced successfully with yowsup ;)\nWhatsAPI its very powerful and you can do everything you want to do (if you know how to do it).\n@sandro-salles @eliasjnior The problem here is that people does not read and understand the code and protocol (how whatsapp works...), if you understand then it wont be more issues about sync or getting blocked.\nIf you are thinking of a web application go for it, WhatsAPI is what you need to use. And you can do customer service tool, yeah, you can do everything you want to do, but eh, first think how WhatsApp works. It took a time for me to understood most of the protocol and how it works.\n@sandro-salles Web Application = WhatsAPI, also i use WhatsAPI for desktop (terminal, shell...)\nRegards, have a good night :)\n. @CodersBrothers i use sendPresenceSubscription once for every user i interact in the same session, if you logout and login again, then you need to sendPresenceSubscription again\n. @CodersBrothers is not neccesary, just if you logout. Logout is when you need to reconnect to WhatsApp Service\n. If you want to simulate as closely as possible to the mobile client, yes.\n. @Marcorele i have to code it again, i did it when i was at the university. But i remember was seeing how WhatsAPI do it and change a few lines in yowsup, i tried a couple of times before it started working\n. Reference\nAll about being blocked is already answered. Read all this issue and the previous related issues, also there is a search bar above.\n. Then you are doing something wrong because WhatsApp does not block for no reason. Spamming or abusing the service is one of the reasons to get banned. Inappropriate use, etc. If things are done correctly there is no problem. \n. Y U NOT write in the same comment? sigh i wont give support to people trying to send massive messages or stuff like that.\n. omg....\nIt is considered spam: sending massive messages (unspecified amount, could be 5 or 1 or whatever) or unwanted messages, sending messages to many people who are not synchronized by both users (sender- and the user is receiving the message), annoying users, etc etc. So yeah, you can use WhatsApp to do normal things like talk with friends/family.. blah blah blah. \n. We dont support that kind of activity, it goes against the EULA. We dont support spamming.\nhttps://github.com/mgp25/WhatsAPI-Official\n. @mrssam NO, there is no way to do that and we wont support that kind of activity / behaviour. Yes, you can use mail to contact your students.\n. @mrssam We are good people but we have agreed with WhatsApp EULA and we DONT SPAM. \nI have the repository with the latest WhatsApp features and latest code and give support, but we don't support spamming and that kind of behaviour. \nHere i have the latest WhatsApp code and features: https://github.com/mgp25/WhatsAPI-Official\nAnd as @DurtyFree said, if you dont agreed with that then: \nYou should consider contacting WhatsApp, email them with your number and explain what you'd like to do.\nsupport@whatsapp.com\nRegards.\n. @mrssam in university all students have mail related to its university... If you want spam support, this is the wrong place, your numbers will be blocked anyway :)\n. @mrssam You want to learn fishing? Okay, your fishing can is google, it will help you in everything. This is Github, an issue tracker for fixing code and improve it. If you don't know how to code or understand, read the code or search in Google.\n@nikfariz @faisalcse That is wrong. The exist is only used in checkCredentials() and it return a new password. If you want to check if a number exist then use sync.\nAs i said many times before... We provide a good wiki and support in here: https://github.com/mgp25/WhatsAPI-Official\n. @galmeida Check WhatsAPI Official. We have latest updates and all the documentation.\nhttps://github.com/mgp25/WhatsAPI-Official\n. No support for spammers.\n. @Github-Janomine all the info its in WhatsAPI-Official Already answered\nhttps://github.com/mgp25/WhatsAPI-Official\n. php\n$user = $node->getAttribute(\"notify\");\n. @blueslmj remember to close issue if its solved\n. @xvilo when you run whatsapp.php on your browser:\nFirst you have to enter this password or the one you have set.\nphp\n$config['webpassword'] = 'MakeUpPassword'; // in this case, the password is MakeUpPassword\nIf you did it right, then, did you config your account data here?\nline 67\nphp\n    'email' => 'testemail@gmail.com',\n    'emailPassword' => 'gmailpassword'\n. @xvilo ill check it, if i find any problem, ill fix it\n. Sync its working fine.\n. So whats your problem? Sync its working, try to give full details when posting an issue...\n. @faisalcse ill check it later\n. @faisalcse you can send messages to numbers that doesnt existe. Check contactsync.php and see if its happening the same, it should say that one of the numbers is not registered.\n. @faisalcse add this to bulk.php if you want...\nphp\nfunction onSyncResult($result)\n{\n    foreach($result->existing as $number)\n    {\n        echo \"$number exists<br />\";\n    }\n    foreach($result->nonExisting as $number)\n    {\n        echo \"$number does not exist<br />\";\n    }\n    die();//to break out of the while(true) loop\n}\n$wa->eventManager()->bind('onGetSyncResult', 'onSyncResult');\n. @blueslmj you cant retrieve and image from terminal or browser by just entering that url, you have to bind the event if you want. Try sending another image :p \nphp\n$w->sendMessageImage($dst, $imagePath);\n. @blueslmj Yes it working for me, try it yourself here. Try to use an url to send the image.\n. @blueslmj is the image in the same folder your script is? Its good\n. @blueslmj my fault, let me c\n. ```\ntx  \ntx    \ntx  \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx     12024 byte data\ntx  \nrx  < from=\"toNumber@s.whatsapp.net\" id=\"message-1403787740-3\" class=\"message\">\n```\nWorking for me.\nphp\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendMessageImage($to, $path);\n$w->pollMessages();\n. @cheetah1337 identity is only relevant during registration, once you are registered, you no longer need the identity. The password is what you use to authenticate and connect to WhatsApp with your username.\nYou can see de basic steps in /test/whatsapp.php\n. @cheetah1337 is just a problem the server sends to client and when its resolved send it to the server.\n. @rgdixit when an user has blocked you, you cant see the 'last seen', profile picture updates, and when you send a message only you get one tick (the server receipt) never the second\n. @rgdixit there is no way with the API to see if a contact have added you. Dont send broadcast messages until you know the users have added you. How to know? Just ask them.\n[Update]: Love the labels xDD\n. sigh just do this:\n``` php\n$subject = \"My group chat\";\n$participants = array(\"num1\",\"num2\",\"num3\");\n$w->sendGroupsChatCreate($subject, $participants);\n```\nSet the debug to true to see it.\n. facepalm when you do that you create the chat, you can see the id and all if you set debug to true or bind the event.\n```\ntx  \ntx    \ntx  \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx      \ntx    \ntx  \nrx  \nrx    \nrx  \ntx  \nrx  \nrx    \nrx  \nrx  \nrx    \nrx  \ntx  \n```\n. @faifai0429 do you have the latest WhatsAPI?\nDid you do it like this?\n``` php\n$subject = \"My group chat\";\n$participants = array(\"num1\",\"num2\",\"num3\");\n$w->sendGroupsChatCreate($subject, $participants);\n```\n. nah, the procedure is:\nphp\n$wa = new WhatsProt($username, $identity, $nickname, $debug);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->checkCredentials();\nNote that the password change if you call that function\n. Then use contactsync.php, it will tell you if the user has whatsapp or not\n. @abdulla2013 \n```\ncontactsync.php?phone=YOURPHONE&pass=YOURPASSWORD&u[]=NUMBER1&u[]=NUMBER2  ...\n```\nReal numbers.\n. Seems that you are not logging in\n. Yes, it's possible. read this: php.net/manual/es/reserved.variables.post.php\n. @oieesah yes you can, but as @shirioko said the url you are using is for register a whatsapp account only and v1 is no longer used.\nIf you want to register a number use WART or the API. \nYou can sen messages using:\nphp\n$w->sendMesssage($to,$msg);\nUse the /test/whatsapp.php for introducing you to this API\n. sigh you get this:\ntx  <presence type=\"subscribe\" to=\"number@s.whatsapp.net\"></presence>\nthe getTag() == \"presence\" its fine because as you can see in the debug, the tag is called presence...\nYou have to code the function 'onPresence' in your script as you are binding the event.\n. Now when the user (you have subscribed to) goes 'available' or 'unavailable' it will fire your function. Just do an echo $type if you want to test it first. Set debug to true, to see whats happening, you will understand better.\n. Do you have the latest version of the API? Because its working. As i send you above, it send a tag \n. Reference #814\n. Ill try it later, but you can sync the contacts you want always that you respect the backoff time (1 hour)\n. If you use it too often it will return an error node with a \"backoff\" time. That backoff time means that you have to wait that time to send sync\n. I don understand what you want, you mean to be active but show as offline?\nphp\n$w->sendOfflineStatus();\n. Mm thats a good question, i think that is possible, ill look at it\n. True, ill check that later \n. Fixed\n. The whatsapp.php file in test folder was made to run on terminal, shell. As you are un windows, go to cmd and type:\ncd /path/where/you/have/the/whatsapp/script\nphp whatsapp.php\n. mm try it like this:\nC:\\PHP5\\php.exe -f \"C:\\wamp\\www\\whatsapp.php\"\n[ More info ]\n. You can sync the numbers you want but respecting the backoff time, if you dont it will appear an error node.\nand when does whatsapp block a number? #800 \n. Legend has it that there was a search bar you could find the answers to your questions because these have already been answered.\nLong live to the search bar. Dont let it die, use it!\n\n. @hiuryoliveira Your error is not about sync. Your WhatsApp credentials are wrong or you are blocked. If you want to know if you are blocked, you can try this\n. @paxter try this:\nphp\n$msg = \"This is a test message\nline 1\nline 2\";\n. I know isnt the best solution, but if it works xD did you try \"\\n\"? \n. Why? :___(\n. Can you post your error? (exactly from the console,debug please). Are you setting a square image?  e.g 200x200. Maximum size is 640x640\n. You can sync incrementally no need to do it at once, or sync the contacts as you interact with them. You can sync the numbers you want but if you do it many times you will get an error, backoff time, about 1 hour.\nWhen you sync you have a contacts array, so there is no need to do a while loop. Use mode=\"delta\" to send them incrementally\n. 1) When you try to send sync many times it throw you an error node, it is to prevent to sync all the time, thats why. \n2) Try to think like a real user/mobile application would work. Do you think syncing 100k numbers at once its a good idea? And i dont know  how many contacts you can sync at once but try to be discreet\n. \nuse it, and nope\n. #762 \nuse the search bar\n. You can modify doLogin() function if you want and adapt it to your needs. But honestly, I do not think is a problem that take 5 seconds to log in.\n. I already told you, modify the doLogin() function, if you do not want to delete nothing just comment it //\n. Shiroko see most of the issues and see all the pull request (and he also puts labels on the issues :P), but he only accept the pull request if there is an enhancement, solved an issue/bug... If there is something not necessary wont merge it.\n. I've been using this API for a long time, and it works. You can not expect one person do all the work. I am researching to help developing and improving the API. And the API is working really fine to me :) i did a really nice applications for myself.\n. Is this really necessary? I dont see improvements :/\n. Sure, ill fix first the sync in bulk :p\n. #833 \n. You need to download and send it again.\n. You have to download the image in order to get the hash, as @shirioko said if that file with that hash exists in the server it will return the url of that image and send it to the contact you want.\n. This API is not the WhatsApp app. Maybe because it stores in the database the media hashes, so is not required to download in the whatsapp app. Maybe we could implement this, but i dont promise anything\n. Oks, ill test it first and send a pull request with other minor fixes ;)\n. Well, i dont think you can use the whole code as an eclipse project. There are dev programs for php coding, you can search them in google. I use Atom, just a text editor for coding and the terminal.\nYou will find all the functions in whatsprot class\nphp\n    /**\n     * Request to retrieve the last online time of specific user.\n     *\n     * @param string $to\n     *  Number or JID of user\n     */\n    public function sendGetRequestLastSeen($to)\nphp\n$w->sendGetRequestLastSeen($number);\n. @JonZarate im still going to write in english in case someone has the same problem :p  \nThe first step is to obtain your password, you can obtain it with WART or with the API using the exampleRegister.php file.\nThe registration procedure is simple. The client sends the number and identity, the server will respond if you know or not. If unknown, the client sends its number and token associated with that number. The server verifies the token. Now the client send its number, identity and sms code. The server finally return the password.\nThe RC4 keys are for client-server communications,  2 for client and 2 for the server.\nLast Seen example\n``` php\n<?php\nrequire_once 'whatsprot.class.php';\n////////////////CONFIGURATION///////////////////////\n////////////////////////////////////////////////////\n$username = \"\";      // your number with cc        \n$password = \"\";      // password obtained with WART or API\n$identity = \"\";         // not required, only important during registration (as i explained above)\n$nickname = \"\"; \n$debug = true;                      \n/////////////////////////////////////////////////////\n$target = \"\" ; // Number with cc (to test lastseen)\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendClientConfig();\n$w->sendGetServerProperties();\n$w->sendGetRequestLastSeen($target);\n// You can bind the event and use your own function\n?>\n```\n. pollMessages pull from the socket, and place incoming messages in the message queue.\n. Use WhatsAPI Official, this repo is inactive. Read the wiki, everything its explained there: https://github.com/mgp25/WhatsAPI-Official/wiki\n. @Amirjan updated\n. @Amirjan\nYou just need to get the participant jid :)\nUpdate: I dont know if there is an event for this or is implemented. I'll check that later\nrx  <message from=\"1405084260@broadcast\" id=\"1405083880-349\" participant=\"number@s.whatsapp.net\" type=\"text\" t=\"1405084310\" notify=\"mgp25\">\nrx    <body>Test</body>\nrx  </message>\n. We dont support spamming. 50 limit for broadcast\n. Experience tells me I'm right.\nWtf, who is alive or who is death? Newspaper, telephone. Not a cold a message like: \"Derrp is dead\"\nI dont know where are you living, but here the bank only sends an SMS when you take money.\nBroadcast message is limited to 50 person per list. And if they have you synced, they will receive your message, if not, they wont\n. It isn't unlimited in WhatsApp app. Just get server properties and you will see.\n<prop name=\"broadcast\" value=\"50\"></prop>\n. php\n$w->sendGroupsParticipantsAdd($groupId, $participants)\n. @savinpaul are you using your own mobile number? Because it works perfectly\n. Try WART instead, maybe it could work for you.\n. \n. @skpress is your number.. from US? If you tell me in which country are you now and from where is your number, maybe i could help you ;)\n. @skpress thanks for the info. Yes, i know, im working on that. Maybe fix come soon. I dont promise anything\n. The code was updated few days ago, it should work now.\nRegards.\n. Make sure the number you set is with the country code, without '00' or '+'. If you have it right, then your number is blocked\n. @Davit21 use WhatsAPI Official https://github.com/mgp25/WhatsAPI-Official\n. What about not spamming? Thanks\n. It may be some error while coding. Node encrypting and send data works fine\n. Yeah, the gift package it is shown because it doesn't creare a image thumbnail of it.\nWhen uploading a file:\nphp\n$mediaNode = new ProtocolNode(\"media\", $hash, null, null);\nand i think it should be like \nphp\n$mediaNode = new ProtocolNode(\"media\", $hash, null, $icon);\nI dont know, i have to test it first.\n.  1: We don't support spam or stuff related to that.\n2: Sync is working perfectly.\n3: If you don't want to get blocked, send messages to people who have added you to their contact list.\n4:Your error is because the script took more than 300 seconds, because it has a time limit, in this case 300 seconds = 5 min\n. When you bind the event to a function and it can`t for example get a message you can do that function.\nI recommend you to read this: WhatsAPI-Events\n. Make sure you are using the latest WhatsAPI version. Also make sure the number you have used its right.\nWhen type=deny means the user has enabled his privacy so people can see his last seen time. The more you know\n. Put the debug inside ``` it will look like this:\n`-``\nYour debug here. (delete   -)\n`-``\nIf you are requesting the 'last seen' time continuously maybe occurs that errors, try to put\nphp\n$w->pollMessages();\nRight after you request the last seen. That would work. Check this and this. As you will see, it works always except if the user has enabled his privacy \n. Recently we update the function to send media messages, so once you have uploaded the video to WhatsApp servers, bind the event to capture the video size and hash, and you don't have to re-upload it:\nphp\n$w->sendMessageVideo($to, $filepath, false, $fsize, $fhash);\n. You have to use this to capture that:\nphp\nfunction onMediaMessageSent(\n    $phone, // The user phone number including the country code.\n    $to,\n    $id,\n    $filetype,\n    $url,\n    $filename,\n    $filesize,\n    $filehash,\n    $icon        \n);\nso...\n``` php\nfunction onMediaMessageSent( $phone, $to, $id, $filetype, $url, $filename, $filesize, $filehash, $icon){\necho \"File size is: $filesize \\n\\n File hash is: $filehash\";\n}   \n$w->eventManager()->bind(\"onMediaMessageSent\", \"onMediaMessageSent\");\n```\nOnce you have the size and the hash, you can do this:\n``` php\n$myVideoSize = \"\"; // here the size you get\n$myVideoHash = \"\"; // here the hash you get\n$w->sendMessageVideo($to, $filepath, false, $myVideoSize, $myVideoHash);\n```\n. Yes, it is updated, you can get the latest code and use it.\n. You are using @shirioko 's fork. Use this https://github.com/venomous0x/WhatsAPI\n. Take the whole code from https://github.com/venomous0x/WhatsAPI Many files have been updated\n. 0.0 i already told you above. Send the video only once. Capture the file size and file hash binding the event with the function i post it above. Once you have that values, send a video message using that values. \nOks, let do a thing, create a file named video.php and put the following code inside:\n``` php\n<?php\nrequire_once 'whatsprot.class.php';\n////////////////CONFIGURATION///////////////////////\n////////////////////////////////////////////////////\n$username = \"\";  // Your number                    \n$password = \"\"; // Your password\n$nickname = \"Nick\"; // Your nickname \n$debug = false;                      \n$target = \"\"; // the number you are going to send the media message (the video in this case) \n$path = \"\"; // Path to the video  \n/////////////////////////////////////////////////////\n$w = new WhatsProt($username, null, $nickname, $debug);\nfunction onMediaMessageSent( $phone, $to, $id, $filetype, $url, $filename, $filesize, $filehash, $icon){\necho \"File size is: $filesize \\n\\n File hash is: $filehash\";\n}   \n$w->eventManager()->bind(\"onMediaMessageSent\", \"onMediaMessageSent\");\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendMessageVideo($target, $path);\n$w->pollMessages();\n$w->disconnect();\n?>\n```\nAnd run that script (set your data first), and then post the output and ill guide you.\nThe output should be similar to this:\n```\nFile size: 45221\nFile hash is: hbdkfjjeodnde=\n```\n. Now use this:\n``` php\n$myVideoSize = \"\"; // here the size you get\n$myVideoHash = \"\"; // here the hash you get\n$w->sendMessageVideo($to, $filepath, false, $myVideoSize, $myVideoHash);\n```\nAnd it will send the video without re-uploading it to wa servers :)\n. Yes\n. Yes, and audio too\n. It only sends without re-uploading it to wa servers when you set the size and the file hash, if you dont set that, it will send it normally.\n. Did you set a google account or something? If you have developer tools in your browser it would be nice to see which json response did you receive\n. php\n$w->sendMessageImage($to, $filepath);\n. Post debug\n. The target number without '+'\n. If you have any doubt look exampleFunctional.php\n. Man, are you sure you are using the lastest code?\n. @blueslmj can you post the code you are using? As @shirioko put the label 'TODO' maybe he saw something to do. I'll try to fix it\n. @blueslmj i see where is the problem. Use this instead, and ill try to fix that.\nIs the contactsync.php you can find in this repo, remember the password is another parameter you have to put in the url\n``` php\n<?php\nset_time_limit(30);\nrequire_once(\"../src/whatsprot.class.php\");\n$username = $_GET[\"phone\"];\n$password = $_GET[\"pass\"];\n$u = $_GET[\"u\"];\nif(!is_array($u))\n{\n    $u = array($u);\n}\n$numbers = array();\nforeach($u as $number)\n{\n    if(substr($number, 0, 1) !=  \"+\")\n    {\n        //add leading +\n        $number = \"+$number\";\n    }\n    $numbers[] = $number;\n}\n//event handler\n/*\n * @param $result SyncResult\n /\nfunction onSyncResult($result)\n{\n    foreach($result->existing as $number)\n    {\n        echo \"$number exists\";\n    }\n    foreach($result->nonExisting as $number)\n    {\n        echo \"$number does not exist\";\n    }\n    die();//to break out of the while(true) loop\n}\n$wa = new WhatsProt($username, \"\", \"WhatsApp\", false);\n//bind event handler\n$wa->eventManager()->bind('onGetSyncResult', 'onSyncResult');\n$wa->connect();\n$wa->loginWithPassword($password);\n//send dataset to server\n$wa->sendSync($numbers);\n//wait for response\nwhile(true)\n{\n    $wa->pollMessages();\n}\n```\n. Yes, you have to set the identity, but that method generate a new password each time...\n. i think login() seems the one used by WhatsApp but i don't really know, that a question that only @shirioko can answer you\n. @kharchenkodenis use https://github.com/WHAnonymous/Chat-API\n. It is a connection problem, no an API issue\n. Try to explain everything in english, so people with the same issue can solve it. Also i suggest to use the search tab, you can find it in it in the top of the page, there are many similar questions. And try to be more explicit in the issue title, 'Problem' does not give an idea of what the problem is related to.\nAs you can read in the error: Socket closed.\nIf you want the connection to be up you should send a presence so it doesn't close.\n. Use sendPresence to keep the connection up\n. every 15 seconds more or less\n. Are you using the latest code? Take a look to exampleFunctional.php\n. In exampleFunctional.php that is inside of an infinite loop, so everytime it starts, it always poll messages.\n. [Updated]: @hschoene I misunderstood your problem. You have to bind the event to a function, if not your are not going to see anything. Set debug to true and you will see all the incoming messages.\n. Dont send messages to semi-random users and you wont get blocked. The broadcast messages only are received by users that have added you into their contact list\n. Yes, if the contact knows you. If not, is considered spam\n. You will need to bind the events, message received client and server to get the receipt (the first tick for the server and the double tick for the client are the receipt in wa app).\nFor manage error you could do a try - catch block\n. This are the events: \n- onMessageReceivedServer($mynumber, $from, $id, $type)\n- onMessageReceivedClient($mynumber, $from, $id, $type, $time)\nHave a look to the wiki in this repo, you will find all the information about events and how to bind them\n. the login function contains pollmessages so it works correctly whatsapp. \n. Make pollMessages function to:\nphp\n$autoReceipt = false\nAlso in processInboundDataNode\n. Fixed. Just change this:\nLine 1784\nphp\n    protected function processInboundData($data, $autoReceipt)\nLine 1888\nphp\nprotected function processInboundDataNode(ProtocolNode $node, $autoReceipt)\nAnd you set if you want the autoreceipt here:\nLine 496\nphp\n    public function pollMessage($autoReceipt = true)\nLine 481\nphp\n public function pollMessages($autoReceipt = true)\nIf it works, tell me and ill make a pull request\n. But..., did you change both processInboundDataNode and processInboundData?\nIf not is not working, ill check it tonight and make a fix ;)\n. @felipemattos check WhatsAPI Official, this repo is inactive: https://github.com/mgp25/WhatsAPI-Official\n. Use the latest code, its working, or use WART instead\n. Did you try to put it like this in the doLogin function?\nphp\n$this->pollMessages(false);\n. There is a tweak that makes that exactly that and its not necessary to re-connect. I\u00b4ll look a better way to do that. \n. php\nfunction onGetGroupMessage($phone, $from, $author, $msgid, $type, $time, $name, $message)\n{\n       echo \"Group name: \" . $name;\n}\n. This one for example...? Please take time to read the API code, read the wiki too, you will find useful information.\nphp\nfunction onGetGroupsSubject($phone, $gId, $time, $author, $participant, $name, $subject){\n     echo \"Group name: \". $subject;\n}\n. It's because of this:\nphp\n            if ($node->getAttribute('type') == \"subject\") {\n                print_r($node);\n                $reset_from = explode('@', $node->getAttribute('from'));\n                $reset_author = explode('@',$node->getAttribute('author'));\n                $this->eventManager()->fireGetGroupsSubject(\n                    $this->phoneNumber,\n                    reset($reset_from),\n                    $node->getAttribute('t'),\n                    reset($reset_author),\n                    reset($reset_author),\n                    $node->getChild(0)->getAttribute('name'),\n                    $node->getChild(2)->getData()\n                );\n            }\nI did not try it. When get a message with the attribute subject, it will fire the event. Let's do a thing, post here a sample debug of a message group and ill try to see if its fire or not\n. I need to see the debug output when you receive group messages.\n. Why you do that? Its not the way you supose to use it\n. Edit your comment, you shared your number and identity with us\n. Yes, i have how is the message node, once i see how it is, i can see if its working or not, if not ill make a fix, i haven't had time to work on this yet.\n. $gjid is the group jid\nphp\n$w->sendGetGroupsInfo($gjid)\n. @vibhoo can you try and practice with /test/whatsapp.php and /examples/exapleFunctional.php before trying to do your own scripts...\n. --> here\nOnce you call that function, it will fire the event. You only need the group jid. Also how to obtain the group jid has already been answered, so you can search in the issue tracker :)\n. No.\n. so...? Which is the problem. If you do that it should be ok.\n. Maybe ill answer this, i understood the procedure and why/how its works.\n. The one explained above or a backoff time..?\n. @prasenjeetp here are now updating and giving support here: https://github.com/mgp25/WhatsAPI-Official\nRegistration Sync is made when you just registered your number with WhatsApp all your contacts are going to be synced. It will check if there is any contact to sync (background) and interactive when you add a contact using WhatsApp it automatically send Sync to that contact.\n. It is because you need to install paramiko module in python, you can install it doing this:\nsudo pip install paramiko\n. You need to install OpenSSH in cydia.\nUsername is root\nPassword is alpine\nHost is the device ip\n. In the Cache.db is stored more information. If you havent restored/updated your iOS version you can open Cache.db and look for your password and identity (Cache.db should be in the same path you have the extractPW.py as it downloads to your computer). If you have restored/updated your iOS, do this:\nDelete Cache.db, Cache.db-shm and Cache.db-wal and delete pw.dat file too (in your device)\nOpen whatsapp, it will ask you to verificate your number, do it. Once is verificated, close WhatsApp app and close the process too. And now if you run the extractPW.py script, it should appear all data in your screen\n. Is just a tool/guide for extracting the pw, ill try to do the same script in php. \n. Try to login few times and keep open the process, it will take a while it writes the data in Cache.db\n. The error its because the app didnt write there any info yet. Use the app normally and you can check this files using iFile:\n- Cache.db-wal: open it using iFile as text, check if the data is there\n- Cache.db: you can open it in iFile with SQLite3 and check if there is.\nIt will take a time to the app to write cache data in there, so keep trying ;) \nIm also trying to decrypt pw.dat so its easiest to get the password, meanwhile this is workaround i figure it out. Also, in a few days, im releasing a patched apk (whatsapp) so once you verificate your number, it will show the password in screen/log\n. [Updated code]: It will show identity and password directly :)\nIf password or identity doesn't show, just delete pw.dat, verify your number and once you have your number working again in your device. Run the script in your computer.\n- Note: I added path module if you want to install it\nsudo pip install forked-path\n``` python\n-- coding: utf-8 --\nfrom path import path\nimport paramiko\nimport os, sys, time\ndef find_between( s, first, last ):\n    try:\n        start = s.index( first ) + len( first )\n        end = s.index( last, start )\n        return s[start:end]\n    except ValueError:\n        return \"\"\ndef getPath(username, host, password):\n    dssh = paramiko.SSHClient()\n    dssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    dssh.connect(host, username=username, password=password)\n    cmd1 = \"find /var/mobile/Applications -iname WhatsApp.app\"\n    print \"> \"+cmd1\n    stdin, stdout, stderr = dssh.exec_command(cmd1)\n    res = stdout.read()\n    res = res.split(\"\\n\")\n    print res[0]\n    dssh.close()\n    return res[0]\ndef getDB(WAPath, username, host, password):\n    localPath = \"Cache.db-wal\"\n    remotePath = WAPath+\"/Library/Caches/net.whatsapp.WhatsApp/Cache.db-wal\"\n    pwFile = WAPath+\"/Library/pw.dat\"\n    transport = paramiko.Transport((host, 22))\n    transport.connect(username = username, password = password)\n    sftp = paramiko.SFTPClient.from_transport(transport)\n    sftp.get(remotePath, localPath)\n    sftp.get(pwFile, 'pw.dat')\n    sftp.close()\n    transport.close()\n    print \"\\n\\n- Cache.db-wal downloaded!\"\n    print \"- pw.dat downloaded!\"\ndef getData():\n    s = path(\"Cache.db-wal\").bytes()\n    pw = find_between( s, \"pw\\\":\\\"\", \"\\\",\\\"\" )\n    id = find_between( s, \"id=\", \"&lg\" )\n    print \"pw: \"+pw\n    print \"id: \"+id\nprint '''\n\n\nWA Password and Identity Extractor\nfor iPhone\n\n\nAuthor: @_mgp25 - github.com/mgp25 - mgp25.com\n''' \nif len(sys.argv) < 4:\n    sys.exit(\"Usage: python extractPW.py   \\n\")\ntime.sleep(2)\nusername = sys.argv[1]\nhost = sys.argv[2]\npassword = sys.argv[3]\nWAPath = getPath(username, host, password)\nWAPath = WAPath[0:61]\ngetDB(WAPath, username, host, password)\nprint \"\\n- Extracting data...\\n\"\ngetData()\n```\n. Now you can use this c# project utility to extract password and identity faster: WA Password and Identity extractor\n. Why do you want to do that? You can upload the file without sending the media file. Check the API code. Follow what sendMessageImage does for example\n. If you have the file hash and size you dont need to set the path to the file.\nWhatsApp media cant be open in browser (computer) try sending that to you\n. Didnt know that media url could be opened. The device app instead of taking the size and hash takes a hash value and the url, stores that data in a .db.\nNope.\nI'll try to upload some examples using this lately\n. That is a server side function. I think they dont delete anything, and if they find any file duplicate doesnt upload it. I was able to send a file i uploaded +3 month ago :p \n. Maybe. You can try sending the media file using the url, and if you receive the media file, thats it :)\n. Let me explain you. When you use WhatsApp in your device, you got a password when you activate via SMS/voice. When you want to use it with the API, you activate again, so it generates a new password. That password isnt in the device so you cant use it in your mobile phone.\nThe only way to use it in your mobile phone and in the API, is extracting the password from your device.\nIf you are an android user, you need your phone to be rooted. There is an idsue if you search 'extract android password' and there is everything explained.\nAlso, if you are an iphone user, i recently explained how to extract all the data\n. Let me explain you. When you use WhatsApp in your device, you got a password when you activate via SMS/voice. When you want to use it with the API, you activate again, so it generates a new password. That password isnt in the device so you cant use it in your mobile phone.\nThe only way to use it in your mobile phone and in the API, is extracting the password from your device.\nIf you are an android user, you need your phone to be rooted. There is an idsue if you search 'extract android password' and there is everything explained.\nAlso, if you are an iphone user, i recently explained how to extract all the data\n. Try the example scripts in the test and examples folder. And check if takes the same time to send/receive. It takes 1 sec for me sending message using php\n. @ardianys i found a way i can see how the message nodes, iq ... are. Im also trying to complete the code when i have info enought ill send to you.\nAnd yes. Keep it alive so it goed faster, also what i did is a tweak that uses apple push notification to connect my script (im using the same wa passwd i have in my phone).\nThe WhatsAPI code needs to be improved and maybe speeded up we will work on that, meanwhile yowsup and WhatsApiNet are faster if you want to try with them..\n. Nope, you dont own the messages you receive, so its not going to happen.\n. You can see how missvenom worked to see what you need. I found a way to extract that traffic in iphone...\n. There is no way to check if they have added you. The only way is to ask them\n. Its a way to do it.. But not 100%  accurate as the message is received by the server isnt it (receipt)? It wont get the second receipt\n. Please, search first and use the exampleFunctional.php, you can find it in the /examples folder\n. I remember adding that to audio too.. Did you capture the file size and hash right? \n. I'll try it tomorrow, i have to see the code and try it. Check whatsprot.class snd search for sendMessageAudio\n. Fixed. #937\n. This is something we are working on. Fix may come soon. \n. Full number with country code in 'fromNumber'?\n. yes, without '00' or '+'. Just a question,  that error is when you enter to whatsapp.php (there is a password to access) is that password?\n. :+1: \n. See /example folder, there is an example of usage..\n. It because there is a time set limit, you can expand that time. Also you can capture the responde with an event and print in screen \"The user has hidden his/her profile picture\". I think this question has already been answered in other issue.\n. this error:\nFatal error: Maximum execution time of 30 seconds exceeded\nIts because of the time limit. @shirioko has answered you. When you try to get profile picture and has enabled privacy, you get a \"deny\" attribute or something like that. See the output when the debug mode is true, and try to think a solution for that, anyway, this have been answered many times in other issues, i recommend you to do a little research and understand how the API works :) Also you will learn PHP\n. 1- Register number, get wa password. (Get wart or use exampleregister from example folder)\n2- use test scripts and see /example folder for more scripts\n3- Search issues, there is many information in there.\n. Not necessarily. You can use it in Terminal/shell if you have php installed.\n. http://php.net/downloads.php use google.\n. @CODeRUS example: +34 123456789\nI don't remember if it takes '+34' or '34' in newer versions. I will upload some sample code i extracted from latest versions, might be helpful.\n. As this is an outdated version i have to update the modded apk to .378. Maybe doing it this weekend or when i have free time. But its explained anyway above :)\n@Lawgrin you can decrypt also your password using the link (python code) i mention above too. Or the java code.\n. @Lawgrin Then you have to wait to the new apk, in this weekend probably ill update it. Too much stuff to be done.\n. @Lawgrin yes, i will need some testers before posting it here. Send mail with your contact and we'll keep in touch for update this.\n. @CircleCurve contact me via mail.\n. @peliculap try this #983 \n. @CODeRUS Yup, it was recently changed.\n. Fake, dont download what @kingcraig have posted\n. First of all, we dont support bulk sending!! Seriously!\nAnd your number got blocked! Why dont you read the stacktrace error?\n. You mean WhatsAPI...\nFirst of all, i recommend you to learn PHP basics before starting with the API. Once you know that, you can start using example and test scripts, it are in /examples and /test folder.\nYou can run scripts in cmd/terminal if you have installed php (you need to learn php basics...).\n. Yes. Yes, Yes, Yes.\nSearch in the issues for more information. We dont support spam.\n. I dont know if your project is for spamming or not. And if you want better system for clients than whatsapp, use SMS. That bulk sending will block your number..\n. WTF? You should be banned forever in WhatsApp and github. We do NOT support SPAM. We are NOT going to help you.\nPlease. Read this. Seriously: http://www.whatsapp.com/legal/\n. Would you like tons of spam messages on your WhatsApp? I get angry because of this. WhatsApp is a platform ad-free, without spamming. I like this API, because i like playing with it as a challenge.\nAnd adding that. When you send messages to random, semi-random users, you will get blocked as soon WhatsApp servers notices it. There is no way to send such amount of messages safely. If you want to earn some money, better find something easier. WhatsApp is unpredictable and always changing.\n@shirioko tits calmed\n. What the heck are you trying to do with the code you have posted?\nFirst Thing: Do not post your public information (numbers, password...).\nThe code was updated, you can use it without having problems.\nRemove this line from your code:\nphp\n$w->codeRequest(\"sms\");\nIf you get the 'not-authorized' error its because your number was blocked. Try resenting your number's password using:\nphp\n$w->checkCredentials();\nIf you still get that error, you need to register a new number.\nRegards.\n. No, you need to send the images one by one.\n. Is a simple http request check out codeRequest in whatsprot\n. Update whatsprot.class , and you dont need to put pollMessage right after loginWithPassword\n. It depends on more things. If you have WhatsApp in your device, you can send messages to numbers you dont have in contact list. And also, you can receive messages without problem\n. That is unpredictable. As you are using the API, WA servers now detected you as a Suspicious_Number. Why? Easy, while registering we send specific data, and server side they check how that data was built.\nI bypassed that doing a trick. Maybe porting to the API when i have more info.\n. I have a bot 24 hours online that my friends and i use. They have added in their contact list, they send the commands and there isnt any problem. I have my bot running on a raspberry pi. I dont know what type of commands do you have, but maybe if have re-sending option as you send messages through it, it could get banned.\n. Chat history is database encrypted and stored in the device. You can extract that, decrypt it, and read the chat history.\nIf you are using the API and want to save all chat history, create a database and save it there. From this, is easy what you want to do.\n. Then just bind the function to the event.\n. That example files are for using in Terminal/shell/cmd not in web server\n. ContactSync is a method WhatsApp has to verify which of the contacts you have in your contact list are WhatsApp users, if they are, they will be added to your contact list in WhatsApp.\nOkay. You want the secret? Here you have: super secret\nWe dont supprt spamming. I like helping people, but not for this. Spam goes against WhatsApp EULA, and also its a privacy attack.\n. For me its spaming. Yes\n. Spam... wtf people. Read EULA. You will get blocked. Thats it. Do you know how whatsapp filtrate messages? It detects you are using API. Omg..\nAnd that is false, someone has lied to you\n. There is a function..\nphp\n $w->sendGetRequestLastSeen($contact);\nYou can take a look to ajaxDemo and implement it in your project.\n. There is a duplicate issue, search for it. Once you find it (its easy), the database part is easier :p\n. Sendpong is a deprecated function, wa servers no longer use that. There is a issue in WhatsApiNet where @shirioko explained a way to keep online, and then use while(true) (for example) to pollMessages. As you are in php repo remember that pho doesnt support multi threading. But there are other ways to do it.\n. @alesantosp If you get my email, i can send you useful code, but i think that has already been answered in other issue (you can send it in spanish if you want)\n. For example this:\nphp\n$t=0;\nwhile (1) {\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n        # process inbound messages\n        //print($m->NodeString(\"\") . \"\\n\");\n    }\n    if( ($t == 15)){\n        $w->sendPresence();\n        $t=0;\n    }       \n    $t++;\n}\nThis worked for me to keep bot online 24 hours 2 months ago, i dont know if still working. There are better ways.\nYou also can have a look to ajaxDemo.\n. Use a loop polling messages, if you have latest whatsprot.class just do pollMessage instead of pollMessages. It will work ;) Check whatsapp.php file from /tests folder\n. @alesantosp check this\n. Its because of sometimes the messages are stuck in the queue thats why you need to see how to implement it right way\n. You can change token values. I leave this here if you want the token for actual or previous WhatsApp releases: WA Tokens\nEdit token.php classesMD5 value\nEdit whatsprot.class user agent and version\n. Use this function:\n``` php\nfunction onGetRequestLastSeen($username, $from, $msgid, $seconds)\n{\n    //echo \"Received last seen seconds: '$seconds'\";\n    //$now = time();\n    //$lastSeen = $now - $seconds;\n$secondsInAMinute = 60;\n$secondsInAnHour  = 60 * $secondsInAMinute;\n$secondsInADay    = 24 * $secondsInAnHour;\n\n// extract days\n$days = floor($seconds / $secondsInADay);\n\n// extract hours\n$hourSeconds = $seconds % $secondsInADay;\n$hours = floor($hourSeconds / $secondsInAnHour);\n\n// extract minutes\n$minuteSeconds = $hourSeconds % $secondsInAnHour;\n$minutes = floor($minuteSeconds / $secondsInAMinute);\n\n// extract the remaining seconds\n$remainingSeconds = $minuteSeconds % $secondsInAMinute;\n$seconds = ceil($remainingSeconds);\n\n// return the value\n    echo \"- Last seen: \" . $days . \" days \" . $hours . \" hours \" . $minutes . \" minutes ago\\n\";\n\n}\n```\nAlso you can use this simplified function:\nphp\nfunction onGetRequestLastSeen($username, $from, $msgid, $seconds) {\n    $dtF = new DateTime(\"@0\");\n    $dtT = new DateTime(\"@$seconds\");\n    return $dtF->diff($dtT)->format('- Last seen: %a days, %h hours, %i minutes and %s seconds ago');\n}\nRemember to add localtime if you havent that configured. \nFor example:\nphp\n<?\ndate_default_timezone_set('Europe/Madrid');\n....\nbind the event.\nphp\n$w->eventManager()->bind('onGetRequestLastSeen', 'onGetRequestLastSeen');\nCall function:\nphp\n$w->sendGetRequestLastSeen($target);\n. It seems you doesn't know too much about programming. If you want the function to return the value, use  something like this:\nphp\nreturn \"- Last seen: \" . $days . \" days \" . $hours . \" hours \" . $minutes . \" minutes ago\\n\";\n. Amm, this repository is about WA API, not viber, i dont know if that exist, but this is not the place to search/ask it, use google instead.\n. Password is random bytes generated by server and then encoded into a file called pw or pw.dat depends on the platform you are using. The methods provided below decrypt that file to show your real password.\nThis is for android users:\nMethod 1: Modded APK #895 \nMethod 2: Python script\nFor iPhone users:\nUnique method right now: Script #871\nThere is explained how to do all the stuff.\n. It should work fine, i can suggest to delete the sleep(1). And you forget to put \"; after nickname.\nYou also need to keep the connection alive.\nRegards.\n. Yes, it should work. That is not a problem :)\n. Yes your number is blocked\n. That usually happen when you send messages to semi-random/random users. Aka spam\n. I dont know what you did, anyway, Not-Authorized means = blocked. Update to latest data and register a new number.\n. @Gitstepn once you updated the data, register using the API (WhatsAPI). If it says blocked, then you need to register new numbers, but for now its working perfectly.\n. Check exampleRegister.php in /examples folders.\nPlease, before asking, make sure to find if your question is already answered.\n. Update token, get the latest version of WhatsAPI.\n. php\n$w->codeRegister('xxxxxx');\n. Check this: https://github.com/venomous0x/WhatsAPI/blob/master/examples/exampleRegister.php\n. It seems your number is blocked.\n. Please, search before asking.\nhttps://github.com/venomous0x/WhatsAPI/blob/master/examples/bulk.php\n. Why instead of doing multiple comments, edit your first comment and update it....?\nThe 'no_routes' problem will be fixed 'soon', when i understand i few things.\n. @webmediaexperts this\nAnd, is already answered in other issues.\n. It has relationship but nothing to do with your problem and the way it suppossed to generate the token.\n. It has relationship but nothing to do with your problem and the way it suppossed to generate the token.\n. There is solution for that. I managed to fix that. Im working on that to bring it here\n. Nope\n. Im working on this... i dont know when im porting this to the API.\n. The fix will be soon, i will need people who has the \"no_routes\" error to test. \n@riyazahamed you can set up a proxy when connecting to WhatsApp, anyway, you will find useful information in google\n. @birdman2005 check my mail in my profile page. i will need a number that has that error to test\n. @birdman2005 check my mail, and send me skype id. Probably fixing this today.\n. Yes, its fixed. But there are few things i need to understand before release\n. @Lawgrin https://github.com/shirioko/WhatsAPINet\n. #960 \n. Yes, but encryption hasnt almost changed.\nHere you have how the token is generated: https://github.com/venomous0x/WhatsAPI/blob/master/src/token.php\nThis is only available for Android.\n. I have a track of the classesMD5 data (is not the token, just part of it): here\nJust change that classesMD5 data, user agent, and version data...\n. You can use this utility i made: here\nIf you want further information you will need to reverse engineer android app.\nLa verdad que s\u00ed, somos pocos xD\n. I'll check it. Maybe tomorrow\n. receipt, check events in wiki.\nclientreceived and serverreceived\n. Update token, user agent and version, search in issues. Already answered.\n. You are blocked or login in with wrong data.\n. Instead of multiple comments, edit the first one and update it. Your number is blocked.\n. I know where the problem is. By now you cant access the service. Will update soon (its happening for all of us)\n. If you take my latest pull request, will work. You will need to generate a new password or register a new number, but it will work.\nRegards.\n. If you have identity and number, request code. You will get a new password\n. Identity its a string like this: %19%40%17%9ed%cdv..... associated to your number when registering the number.\nIf you set this:\n``` php\n<?php\nrequire_once('../src/whatsprot.class.php');\n$debug = true;\n$username = '';  // Your number with country code\n$identity = '%f6%3c%da%.....'; // Your identity\n$nickname = 'WhatsAPI';  // This is the username displayed by WhatsApp clients.\n// Create a instance of WhastPort.\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\n```\nOutput will be a new password for your number.\nRegards.\n. @domingopa read whole issue, answer is here\n. @domingopa use latest token, user agent and version from the latest pull request i made or in my website here Once you have the latest data, try generating a new password using identity (thats why you need the latest token). If that doesnt work you will need another number to register and now it will work fine for you.\n@dennobaby lets say WhatsApp supports for example 10 versions, when i new one comes out, the oldest become outdated and no longer supported. So if someone is using and unsupported version it will be blocked. Thats what i think at this moment. Anyway seems that now its working fine.\n. @Osmanbakri im not using nokia or iphone releases. Im using android ones the one showing in Play Store..\nDid you updated WART with the latest data? Also you need to update your whatsprot.class when you want to login, changing version and user agent. If you spam or send bulk messages you will get blocked anyway. Im not going to tell how to avoid blocking, the main reason is i dont want people to spam. If people doesnt send spam they dont get blocked. I am using a number from last year and still running, so no. \nIn the WhatsAPINet repo, check the buildIdentity or generateIdentity function, from there you can make a utility or something.\n. @domingopa if you use the latest pull request i made, it should work fine for you. Spam is considered when sending messages to random/semi random users, also is considered spam sending huge amount of messages in a short period of time. You can send 10000 messages to yourself and whatsapp will block you, is not spam but you are abusing the system.\nAnyway, with the latest data everything is working fine.\nRegards.\n. Thats shouldn`t be a problem, make sure you have the same source in both server, it should work the same.\n. Blocks are usually temporal, maybe hours, days, weeks, or months. So you can try requesting Code with your identity and if it retrieve a password then is unblocked. Unfortunately you will have to wait. You can try with other numbers (not blocked) will work fine.\n. In theory shouldnt be any problem, maybe the \"no_routes\" problem, fix is coming soon. Try to register other numbers as the one you try is already blocked.\n. Its because it was already blocked, try with new numbers using latest token. Yes, blocks are temporal\n. Maybe your number was already blocked. With latest is working fine. Block is temporal\n. @Osmanbakri people were blocked because of the spam and outdated versions. Also ip are been blocked\n@Gitstepn thats because of the token generation and the way api do it. I have a fix. Ill do some request via skype i can send code request without problems. Not sharing the method because of many spammers in this repo. If you need to register a number i can send you a code request for you (sms or voice) both works. You can contact with me via mail\n. @Davit21 ask it in WhatsAPI Official\nRegards\n. @Davit21 and remember to post debug log\n. Please, read issues and wiki.\n``` php\nfunction onGetProfilePicture($from, $target, $type, $data)\n{\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\n$fp = @fopen($filename, \"w\");\nif ($fp) {\n    fwrite($fp, $data);\n    fclose($fp);\n\n}\n\necho '<a href=\"'.$filename.'\"><center><img src=\"'.$filename.'\" height=\"250\" width=\"250\"></center></a><br><br>';\n\n}\n//Create the whatsapp object and setup a connection.\n//Retrieve large profile picture. Output is in /src/php/pictures/ (you need to bind a function\n//to the event onProfilePicture so the script knows what to do.\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture($target, true);\n```\n. the code i posted is to save the profile picture\n. update your comment, dont create multiple comments. And instead of asking first, try searching please.\nHere #931 \nAnd here #930\n. u.u\n. id = identity.\n. Use WART in command line abd there is a command to retrieve id\n. No\n. Read previous issues i explain all there\nRegards\n. WhatsApp blocks IP, so if you are using multiple senders under the same IP, all the numbers you will try under that IP will be blocked.\nAlso be sure to have a non outdated version. I recommend .370 user agent, version and classesmd5.\nWith that should work fine.\n. Yes, its logic. This was told many times... According to WhatsApp EULA, people please go and check it, you will see this things are not allowed. Thats why they might block that. There are reasons.\n. Maybe the way you are requesting it, its not the same, maybe the data you send via GET its a little different...\nIm giving clues. \nThe real apk fakes that there is an error\n. @juanmasn i already posted it :)\n. In the /examples folder check exampleFunctional.php\n. This repo is only PHP, there is other WhatsApiNet\n. This is not the repo you should ask. Go to WhatsApiNet Repo\n. Maybe this could help you... https://github.com/mgp25/WhatsApp-Web-Client\n. It doesn't matter if you sync the contact if the other user haven't synced you.\nhttp://www.whatsapp.com/faq/en/general/28030003\nAlso the provided link by @alesantosp will the useful to keep in mind this platform is not for spammers!\n. You only send sync when starting up the app and when adding a new contact\n. @thiagosantos if you do it that way its fine\n@ramapunk No, only sync once when starting the script or adding new contact but not every 21 minutes.\nThe sync method is just to see which of your contacts in your address list have whatsapp, then added automatically to the WhatsApp contacts.\n. @ramapunk if you never sync you probably get blocked. You can chat without syncing if the other part is participating in the conversation. Then instead of addind one by one, when you reach X numbers of new contacts you can schedule a sync, almost at startup.\nAlso the timing between messages dont need to be random values, just a time a human can write messages. For example. I can't send 10 messages to different persons in 2 seconds, thats is considered abusing the system and you will get instant block. So you have to take care of your script behavior.\n@rodrigofaillace WhatsApp support support@whatsapp.com\n@thiagosantos composing and paused status are optional.\n. First of all. If you are asking for a WhatsApiNet problem ask in the proper repository, not here. WhatsAPI is only PHP. Not .NET. Anyway....\nChange user agent and version to .378\nVersion: 2.11.378\nUser Agent: WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3 \n. Here is the classesMD5: oCtjlSonS+4H16h9HW6nNA==\n. Raw MD5 from classes.dex and then base64 encoded\n. @ahy95 you can find an utility in my github\n. @hgc2002 Important: This need .372 or above. Not .339\n@Lawgrin Make sure you are using .378 data\n. @Lawgrin if you want some testing you can get me in skype, im now online and we can test.\n. Contact me via mail for more support\n. You can try different locations, thats not a problem. But this will work for everyone :) I'll be updating more cool things 'soon'\n. Other stuff, more methods whatsapp uses, etc etc etc...\n. @manufuentescr send me an email and i can give you support.\n. We are giving support and latest updates here: https://github.com/mgp25/WhatsAPI-Official\n. @maznos i dont understand what you mean\n. If you can login means the password you have is valid, if not you can use checkCredentials() you reset it and generate a new one. Make sure when using checkCredentials() that the provided identity id the one you got when registering the number, alternatively you can register the number again.\n. There is a file called token.php there you can see how the token is generated.\n. @Catanp use this https://github.com/WHAnonymous/Chat-API\n. Check exampleFunctional.php file.\nExplained:\n``` php\n$target = \"34123456789\";\n$pathToVideo = \"\"; // This could be url or path to video.\n$w->sendMessageVideo($target, $pathToVideo);\n// If you have already the video size and hash, you can send it without re-uploading it to whatsapp servers\n$w->sendMessageVideo($to, $filepath, false, $fsize, $fhash);\n// This also works with:\n// $w->sendMessageAudio and $w->sendMessageImage\n```\n. Please check WhatsAPI-Official https://github.com/mgp25/WhatsAPI-Official we have fixed many issues and give support to people\n. Yes, also you could do a pollMessage as alternative. We are giving support in WhatsAPI Official repo.\nRegards\n. @ajasmoon post here the code when sending image, to see what is wrong.\n. @ajasmoon Please edit your comment, and delete your number and password...\nPlease, check this file: https://github.com/venomous0x/WhatsAPI/blob/master/examples/exampleFunctional.php\nSee examples...\n``` php\n<?php\nrequire_once 'whatsprot.class.php';\n$username = \"your phone number\";       \n$password = \"server generated whatsapp password\";\n$identity = \"unique ID generated by WhatsApp client\"\n$nickname = \"your nickname\";\n$target = \"contact's phone number\";\n$debug = false;                                      \n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\n//send picture\n$w->sendMessageImage($target, \"demo/x3.jpg\");\n//send video\n//$w->sendMessageVideo($target, 'http://techslides.com/demos/sample-videos/small.mp4');\n//send Audio\n//$w->sendMessageAudio($target, 'http://www.kozco.com/tech/piano2.wav');\n//send Location\n//$w->sendLocation($target, '4.948568', '52.352957');\n// Implemented out queue messages and auto msgid\n$w->sendMessage($target, \"Guess the number :)\");\n$w->sendMessage($target, \"Sent from WhatsApi at \" . date('H:i'));\n?>\n```\n. @Amirjan some extension are not allowed server side due security reasons\n. loginStatus? You mean wether the user is online or not? Yes, that events exist. Check wifi for further information\n. When login you send presence = available, you can track that. Also what you could do, is to capture the event when the socket closes and then make a variable to capture that.\n. There isnt any method to know if the user has added you into their contact list.\n. I answered you #902 \n. Please, try example files and try with that...\n. If you do spam, WA block your ip\n. Something seems wrong in that output.\nThat is what the script gives you in debug = true?\n. Miss Venom no longer works. Sorry.\n. No longger works, read comment above. Extract password or register number using API.\n. Yes, its possible, but we need to find the request the device make to wa servers first. Im working on it.\n. Guys, we have moved here: https://github.com/mgp25/WhatsAPI-Official\n. @ludufre Yes, iPhone must be jailbroken and then install OpenSSH via Cydia ;)\n. Please this is a issue tracker, not a forum. Only for doubts, bugs, errors and support.\n. Download this: https://mgp25.com/wa/wapw2.apk\nThat should work. Also for latest API updates check this: https://github.com/mgp25/WhatsAPI-Official\n. Just open the apk and click extract password.......\n. Contact me via maill\n. Ask in its repository, not here.\n. This is WhatsAPI, ask in its proper repository.\n. @waiferv Follow guide from WhatsAPI-Official https://github.com/mgp25/WhatsAPI-Official/wiki/Extracting-password-from-device\nRegards\n. @waiferv give WhatsApp root privileges and then try again. Remember to use WhatsAPI Official repo, this one is inactive\n. @cooler-farmer @w00000w5 Use the apk from WhatsAPI Official repo: https://github.com/mgp25/WhatsAPI-Official\nhttps://github.com/mgp25/WhatsAPI-Official/wiki/Extracting-password-from-device\nThat should work\nRegards\n. @Killer1337 it doesnt do the same, one thing is register the number, the other is extract the password. You should go here: https://github.com/mgp25/WhatsAPI-Official its more updated and have all the documentation about the API.\nRegards\n. @jesussales Yes, its possible to generate the password but why? Use WhatsAPI Official instead of this repo.\n. https://github.com/WHAnonymous/Chat-API/wiki/Extracting-password-from-device\nFrom now on, use this repo: https://github.com/WHAnonymous/Chat-API\n. Take a look to /test folder, whatsapp.php\n. If you request code using WART and try to register the code using the API, you will get the mismatch error, as identity generated in WART is different to the identity generated using the API. \n. Identity is a raw sha1 urlencoded string.\nRegister method has changed and probably soon its going to give you problems :)\n. use exampleFunctional.php or /test/whatsapp.php\ncheck them out\n. @Pinazinho use watools.es instead. Updated code of whatsappea.me its on my github, the one uploaded to the website is outdated.\n. Use https://github.com/mgp25/WhatsAPI-Official\n. Yup, there are some changes. Maybe ill push fix next week, i need to test them first :)\n. codeRegister is working fine, anyway, in future fix, some changes may apply. I am able to register all kind of numbers without problem.\nAnd no. You dont need to md5 the username or that weird stuff.\n. I already wrote a wiki:\n- Wiki (events, basic functions...)\n- Advanced WA stuff\n- Useful WA web tools\nI know the things are in Spanish, meanwhile i translate it to English you can use google translator. Most of the things about the API are explained in the above links.\nRegards.\n. Yes, actually some people are only interested in doing spam with this API, and im done with that.\nIm posting updates in my private repository (not public releases, only honest people). Hope that stop spammers\n. I'll keep with the updates for my own. Maybe if circunstances changes i'll push here some update eventually, but not more help/support to spammers\n. @eliasjnior I'm going to continue this project. Doing patches, updating it, making better, but not for spammers. Im going to open right know the private repository.\n. The people who want to collaborate send me an email. I have to know who im letting in, their purposes,.... \n. @amirjan contact me :)\n. @ExpressArab \n- 1\u00ba: This is not my API, is an API created by the users for the user, whole community.\n- 2\u00ba: If we are not releasing more updates it is not because i dont want to. I really want to share all the updates, fixes to you people, but i dont want you to use it wrong, to spam people and make WhatsApp platform only for commercial.\n- 3\u00ba: Oks, go ahead. xD\n. @mohamedayed Read above.\n1\u00ba: This is not my API, is an API created by the users for the user, whole community.\n2\u00ba: If we are not releasing more updates it is not because i dont want to. I really want to share all the updates, fixes to you people, but i dont want you to use it wrong, to spam people and make WhatsApp platform only for commercial.\nMost of the people here use this for spamming, thats why Shirioko and other users dont post updates anymore. I like Open Source, i would share everything i know with all of you, i like sharing knowledge but not for spamming. I'll be updating things 'eventually'. \nHope you can make a great cryptanalysis and figure out how everything works.\nGood luck :)\n. Yes, im including them to my private repository :)\n. I'll be supporting people in my public repository, as i said before , i'll be updating things eventually.\nBut im not going to answer how to send messages or my number is blocked. Only productive things. In my private repo im going to update the BIG things, and when i consider ill push it here to the public. I'll help WhatsApp to track spammers and avoid this situation.\n. New repo with official updates https://github.com/mgp25/WhatsAPI-Official\n. MissVenom no longer works, there is a workaround, search in github\n. @msaudicse You can get your password using registerTool.php from WhatsAPI Official. https://github.com/mgp25/WhatsAPI-Official\nMore tools coming soon.\nRegards\n. Hi @GitsUp, i'll send you the latest updates of this.\n. Check what you are actually sending xmlns to server, maybe you could find something interesting...\n. Be aware of soon updates in protocol maybe 1.4 to 1.x ;)\n. multi thread.\n. NO, missvenom no longer works, use password extractor. Check #983 or in my profile page in github password extractor\nregards\n. Check this tool: https://github.com/mgp25/WhatsApp-Tracker\n. Its usage can be found in the Readme (main page) of WhatsApp Tracker repository..\n. Then run in on your desktop..\n. Check https://github.com/mgp25/WhatsAPI-Official\nFor updates\n. Yes. If not working then your password is wrong or your account is blocked\nhttps://github.com/mgp25/WhatsAPI-Official for more updates.\n. We'll look into that. If we find something we'll update the API. Dont worry about that.\nWe are now supporting this API and latest official updates here: https://github.com/mgp25/WhatsAPI-Official\n. We are now here: https://github.com/mgp25/WhatsAPI-Official\nYou can find documentation and tools for register numbers.\n. Duplicate, already answered in #401\n. @NakulSharmaIt contact me via mail for explanation. Regards\n. @ferminolaiz we have moved to https://github.com/mgp25/WhatsAPI-Official\n. I think our code is working fine. But we have moved there, we are updating and making documentation about the api\n. We are giving support here: https://github.com/mgp25/WhatsAPI-Official with latest updates and news.\n. We have already added that feature in: https://github.com/mgp25/WhatsAPI-Official\nWe give support and have the latest code.\nRegards\n. @rajenpal033 we are giving support and updated code here: https://github.com/mgp25/WhatsAPI-Official\n. This issue is fixed here: https://github.com/mgp25/WhatsAPI-Official\n. @McBacker go to https://github.com/mgp25/WhatsAPI-Official we have the code fixed there\n. Use https://github.com/mgp25/WhatsAPI-Official\nIt auto-updates itself. 100% working\n. We are giving updates and support here: https://github.com/mgp25/WhatsAPI-Official\nThere is info about it in the wiki of WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official/wiki/WhatsApp-incoming-updates\nAnd this: https://github.com/mgp25/WhatsAPI-Official/issues/109\nWe tracked this before it was published\n. There is in WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official/blob/master/src/whatsprot.class.php#L1761\nsendRemoveProfilePicture()\n. It should work, but i recommend to migrate to WhatsAPI Official, we have the latest features and updates in there.\n. sendSetProfilePicture. Check WhatsAPI Official documentation: https://github.com/mgp25/WhatsAPI-Official/wiki\n. Hi, we have moved to https://github.com/mgp25/WhatsAPI-Official\nWiki: https://github.com/mgp25/WhatsAPI-Official/wiki\nRegards\n. Its a temporal block, if you try later it will work. For support and updates check http://github.com/mgp25/WhatsAPI-Official\nRegards.\n. Check WhatsAPI Official code: https://github.com/mgp25/WhatsAPI-Official\nWe give latest updates and support there.\n. sendSetProfilePicture($path) I recommend you to read WhatsAPI Official wiki and code.\nRegards\n. This is a PHP API not c# you are in the wrong repository\n. Use WhatsAPI Official code: https://github.com/mgp25/WhatsAPI-Official\n. Use https://github.com/mgp25/WhatsAPI-Official code\n. Use https://github.com/mgp25/WhatsAPI-Official there is documentation and updates about it\n. @birdman2005 About encryption / Decryption? Yes, but we are working on a solution, but there are many upates and enhacements in WhatsAPI Official\n. Please go to https://github.com/mgp25/WhatsAPI-Official for support and updates.\nRegards\n. @dahansi https://github.com/mgp25/WhatsAPI-Official\n. @dahansi there is a wiki with examples there...\n. @dahansi Send broadcast messages only works with synced contacts\n. Not you, the other contacts must have synced your number\n. @Sydcul Use WhatsAPI Official repo instead: https://github.com/mgp25/WhatsAPI-Official\nWiki available\n. @Sydcul yes\n. @Sydcul Use WhatsAPI Official repo instead: https://github.com/mgp25/WhatsAPI-Official\n. @kmpslm  use https://github.com/mgp25/WhatsAPI-Official we have that feature.\nIt's explained here: https://github.com/mgp25/WhatsAPI-Official/wiki/WhatsAPI-Documentation#sending-messages\nRegards\n. @ryadhh use https://github.com/mgp25/WhatsAPI-Official we have that fixed\n. Use https://github.com/mgp25/WhatsAPI-Official. Use registerTool.php found in /examples folder.\nRegards\n. @DhirManish Use https://github.com/mgp25/WhatsAPI-Official and read the wiki, there is a full guide.\nRegards\n. @masasron Use WhatsAPI Official code. https://github.com/mgp25/WhatsAPI-Official\nRegards\n. I recommend using this repo as i have the API updated: https://github.com/mgp25/WhatsAPI-Official\nAlso you can find a wiki where all its explained, including how to extract password: https://github.com/mgp25/WhatsAPI-Official/wiki\nRegards\nUse this (Working on iOS 8)\n``` python\n-- coding: utf-8 --\nimport sqlite3\nimport paramiko\nimport os, sys, time\ndef find_between( s, first, last ):\n    try:\n        start = s.index( first ) + len( first )\n        end = s.index( last, start )\n        return s[start:end]\n    except ValueError:\n        return \"\"\ndef getPath(username, host, password):\n    dssh = paramiko.SSHClient()\n    dssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    dssh.connect(host, username=username, password=password)\n    cmd1 = \"find /var/mobile/Containers -iname pw.dat\"\n    print \"> \"+cmd1\n    stdin, stdout, stderr = dssh.exec_command(cmd1)\n    res = stdout.read()\n    res = res.split(\"\\n\")\n    print res[0]\n    dssh.close()\n    return res[0]\ndef getDB(username, host, password):\n    remotePath = \"/var/mobile/Containers/Data/Application/\" + WAPath[6] + \"/Library/Caches/net.whatsapp.WhatsApp/Cache.db\"\n    pwFile = \"/var/mobile/Containers/Data/Application/\" + WAPath[6] + \"/Library/pw.dat\"\n    transport = paramiko.Transport((host, 22))\n    transport.connect(username = username, password = password)\n    sftp = paramiko.SFTPClient.from_transport(transport)\n    sftp.get(remotePath, 'Cache.db')\n    sftp.get(pwFile, 'pw.dat')\n    sftp.close()\n    transport.close()\n    print \"\\n\\n- Cache.db downloaded!\"\n    print \"- pw.dat downloaded!\"\ndef getData():\n    conn = sqlite3.connect('Cache.db')\ncursor = conn.cursor()\n\ncursor.execute(\"SELECT request_key FROM cfurl_cache_response\")\nrequest_key = cursor.fetchall()\nrequest_key = request_key[0]\n\ncc = find_between(request_key[0], \"cc=\", \"&\")\npn = find_between(request_key[0], \"in=\", \"&\")\nid = find_between(request_key[0], \"id=\", \"&\")\nlg = find_between(request_key[0], \"lg=\", \"&\")\nlc = find_between(request_key[0]+\".\", \"lc=\", \".\")\n\nprint \"cc: \"+cc\nprint \"pn: \"+pn\nprint \"id: \"+id\nprint \"lg: \"+lg\nprint \"lc: \"+lc\nprint \"\\nRequest url: \"+request_key[0]\n\ncursor.execute(\"SELECT receiver_data FROM cfurl_cache_receiver_data\")\nreceiver_data = cursor.fetchall()\nreceiver_data = receiver_data[0]\nstatus = find_between(str(receiver_data[0]), \"status\\\":\\\"\", \"\\\"\")\nlogin = find_between(str(receiver_data[0]), \"login\\\":\\\"\", \"\\\"\")\npw = find_between(str(receiver_data[0]), \"pw\\\":\\\"\", \"\\\"\")\ntype = find_between(str(receiver_data[0]), \"type\\\":\\\"\", \"\\\"\")\nexpiration = find_between(str(receiver_data[0]), \"expiration\\\":\", \",\")\nkind = find_between(str(receiver_data[0]), \"kind\\\":\\\"\", \"\\\"\")\n\nprint \"\\nstatus: \"+status\nprint \"login: \"+login\nprint \"pw: \"+pw\nprint \"type: \"+type\nprint \"expiration: \"+expiration\nprint \"kind: \"+kind\n\nprint '''\n\n\nWA Password and Identity Extractor\nfor iPhone\n\n\nAuthor: @_mgp25 - github.com/mgp25 - mgp25.com\n''' \nif len(sys.argv) < 4:\n    sys.exit(\"Usage: python extractPW.py   \\n\")\ntime.sleep(2)\nusername = sys.argv[1]\nhost = sys.argv[2]\npassword = sys.argv[3]\nWAPath = getPath(username, host, password)\nWAPath = WAPath.split(\"/\")\nGet Whatsapp cache ID\nprint WAPath[6]\ngetDB(username, host, password)\nprint \"\\n- Extracting data...\\n\"\ngetData()\n```\n. @moosaviamir Go to WhatsAPI-Official repo is the active one: https://github.com/mgp25/WhatsAPI-Official\n@vigiman contact me via mail and i explain you the solution/fix for that.\nRegards\n. Better use the open source tools...: https://github.com/mgp25/WhatsAPI-Official\nOr WART (Working): https://github.com/mgp25/WART\nOr: http://watools.es\n. @vigiman yes, dont spam. Use WhatsAPI Official instead\n. Post code and debug log in whatsapi official describimg your issue, and we will find out the issue\nRegards\n. @Pudins check WhatsAPI Official repo, this one is inactive and not updated.\nhttps://github.com/mgp25/WhatsAPI-Official\n. This repo is inactive, go to https://github.com/mgp25/WhatsAPI-Official instead\nIn the wiki is an example and you can use the event to store it\nRegards\n. @dackor this repository is inactive. Post your issue in WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official\nAlso post your debug log. $debug = true;\nRegards\n. @jessereitsma you shouldnt give support people that is going to spam. It goes againt WhatsApp EULA.\nLook path... C:\\xampp\\htdocs\\WhatsAppBulk...\n. Dont SPAM. There are fully free open source tool in https://github.com/mgp25/WhatsAPI-Official\n. WART is working: https://github.com/mgp25/WART\nYou also have registerTool.php: https://github.com/mgp25/WhatsAPI-Official/blob/master/examples/registerTool.php\nboth working perfectly\n. @jacoboliveira this is PHP repo not WhatsAPINet\n. @anymediasolutions use WhatsAPI Official code. https://github.com/mgp25/WhatsAPI-Official\n. @bubaigcect This is WhatsAPI. Search in google, not here.\n. @techcare2u this repo is inactive, Use this one instead: https://github.com/mgp25/WhatsAPI-Official\nThere is a wiki too: https://github.com/mgp25/WhatsAPI-Official/wiki\nAnd many examples: https://github.com/mgp25/WhatsAPI-Official/tree/master/examples\nRegards\n. @jacoboliveira this is an inactive repository use this instead:  https://github.com/mgp25/WhatsAPI-Official\nIts not required to pay WhatsApp as it is free for one year, then there are functions to expand time.\nEverything its explained in WhatsAPI Official wiki\nRegards\n. This repo is inactive use https://github.com/mgp25/WhatsAPI-Official\n. @rayidi This is an inactive repo. Use WhatsAPI-Official: https://github.com/mgp25/WhatsAPI-Official\nAnd check the wiki, all is explained there.\nRegards\n. @vivekanandhanonline this repo is inactive, use WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official\nEverything its explained in the wiki: https://github.com/mgp25/WhatsAPI-Official/wiki\nRegards\n. This repo is inactive, use WhatsAPI Official instead: https://github.com/mgp25/WhatsAPI-Official\nRegards\n. Ask it in WhatsAPI Official, this repo is inactive.\nRegards\n. This repo is outdated! Use WhatsAPI Official instead: https://github.com/mgp25/WhatsAPI-Official\nRegards\n. You are using WhatsAPI code not WhatsAPI Official one! You should look there, that function you are using is deprecated.\nRegards\n. Why you dont read the wiki? Its explained there, search for send get groupv2 info.\nSearch for that in the code, and you will find the function\n. Update the whole code not only whatsprot.class.php and ask better in WhatsAPI Official issues\n. @yanelev this repo is inactive, use WhatsAPI Official https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @DavidBE1 this repo is inactive, use WhatsAPI Official instead: https://github.com/mgp25/WhatsAPI-Official\nAnd full documentation in the wiki: https://github.com/mgp25/WhatsAPI-Official/wiki\nRegards\n. @DavidBE1 Yes, but both are inactive, use shirioko one, take the token we are using in WhatsAPI Official and use it in the .NET API\n. @sant527 use WhatsAPI-Official instead\nRegards\n. @ankurextreme this repo is inactive. Ask it in WhatsAPI Official repo: https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @luciano22 yes its possible. Use WhatsAPI Official code. https://github.com/mgp25/WhatsAPI-Official\nAll its explained in the wiki\nRegards\n. @atfo90 this repo is inactive, use WhatsAPI Official instead. https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @cfathoni WhatsApp only blocks spammers and people who abuse their system.\nThis repo is inactive, use this instead: https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @vishvodhay you are using an outdated code, use https://github.com/mgp25/WhatsAPI-Official\nRegards\n. This repo is inactive, use WhatsAPI Official instead https://github.com/mgp25/WhatsAPI-Official\n. @joerecra you are using an outdated code, use WhatsAPI Official instead; https://github.com/mgp25/WhatsAPI-Official\nRegards\n. @kailash74 This is PHP repo not .NET, go to the proper repo\n. Use WhatsAPI Official: https://github.com/mgp25/WhatsAPI-Official\nAll info here: https://github.com/mgp25/WhatsAPI-Official/wiki\n. @kokoalawi its everything explained there, including the tools: https://github.com/mgp25/WhatsAPI-Official/wiki\n. @abhayendra use WhatsAPI Official... https://github.com/mgp25/WhatsAPI-Official\n. Not this one, go to WhatsAPI Official repo -> https://github.com/mgp25/WhatsAPI-Official\n. @abhayendra i recommend you openning issues in WhatsAPI Official, not here please.\nUse blockChecker.php to check if your number its blocked\n. @Wuuuz go to WhatsAPI Official https://github.com/mgp25/WhatsAPI-Official\n. How bad is the envy, the source code its public, you can check it and if you know a little of programming, you will see everything its clearly done.\nYou need to learn more\nBest regards\n. All my stuff its public, not like the business you own.\nThe whatsapi.dll is just the fucking whatsapinet compiled. And if you are curious enough use a fucking decompiler and check the fucking source code\n. @Thiagosantos why dont you check the source code and proof yourselve that its a false positive. \nCheck it\n. @kokoalawi use https://github.com/mgp25/Chat-API the code its updated and there is a wiki with all the documentation\nRegards\n. @mfehmer https://github.com/mgp25/Chat-API\n. Please use this instead: http://github.com/mgp25/Chat-API\nRegards\n. @tilcampo \nhttps://github.com/mgp25/Chat-API\nAnd wiki: https://github.com/mgp25/Chat-API/wiki\n. @tilcampo everything is explained in the wiki\n. registrations still works, and this issue makes really no sense.\nYou are opening a issue in an inactive repository, and then you havent realized that the problem is that you havent updated your code to latest version or even WhatsApp have blocked your server\nProof:\nArray\n(\n    [in] => number\n    [cc] => 34\nw|?????] => ???kb\\?\n    [lg] => es\n    [lc] => ES\n    [sim_mcc] => 214\n    [sim_mnc] => 000\n    [method] => sms\n    [token] => 1289f***c80c1***3350416***53a***\n)\nstdClass Object\n(\n    [status] => sent\n    [length] => 6\n    [method] => sms\n    [retry_after] => 1805\n)\nBiggest facepalm ever!\n. https://github.com/WHAnonymous/Chat-API\n. @herokiller if you activate it in your phone, the password changes, what you can do, is extract the password, use this and read the wiki: https://github.com/WHAnonymous/Chat-API\nRegards\n. https://github.com/mgp25/Chat-API-NET\n. @vlnsnewton open a new issue in chat api, post debug log and all the script code\n. Open issue here --> https://github.com/WHAnonymous/Chat-API\nANd provide script code too\nRegards\n. Use: https://github.com/WHAnonymous/Chat-API\nIt's explained in the wiki\nRegards\n. @adams99 is not possible\n. https://github.com/WHAnonymous/Chat-API\n. https://github.com/mgp25/Chat-API\n. ",
    "Davit21": "How can i use listeners for any events\n. please  help \nThere was a problem trying to request the code\n. I have an error\nCall to undefined method WhatsProt::requestCode()\nwho can help me\n. Hi,i want send broadcast message\nthis code does not show error but message was not sent\n$targets = array(\"number\",'number');\n$w->sendBroadcastMessage($targets, $message);\n$w->pollMessage();\n. who can help me \ni have an error \nThere was a problem trying to request the code\n. please @marimuthum17  http://joxi.ru/n2YY47yf55Kp26\n. @mgp25  thanks  for  help\nI try this but now it say me too recent\nerror is http://joxi.ru/nAyej3aiQQ6aAZ\n. @mgp25  How can i  get my right user identity \n. @mgp25 and @marimuthum17 thanks for help\n. @mgp25 i have  already have  6 digits code and when i am trying this $w->code Request\nit  returns  my  new password but when i am trying to login with this password throw login failure\nplease help \n. @mgp25  I am use WhatsAPI-Official  and have that problem how to fix it\n. Hi guys,\nI am using whatsapp app oficial\nI used it one week everything was going good but today  when i try to log in it is only connected  but the login failur \nplease explain the raeson  and how can i  solve this problem\n. I WROTE TO YOU\nhttps://github.com/mgp25/WhatsAPI-Official/issues/398\n. ",
    "doriwal": "I wanted to know if this api will allow me to forward incoming whatsapp message from my device to my email ? \nThanks \n. ",
    "LuisNeighbur": "In new version you need Protobuf an curve25519 php extension to work propertly\n. Use the fork from mgp25. to receive the message you need handle event onGetMessage \n. Are you using the event manager?\n. Probe using events/MyEvents.php uncomment the method onGetMessage in array activeEvents yn declare onGetMessage here.\n. Are you initialize MyEvents before call connect?\nShow This\n$events = new MyEvents($wp);\n$events->setEventsToListenFor($events->activeEvents);\n$wp->connect();\n$wp->loginWithPassword($p);\n$wp is the WhatsProt instance\n. You are installed a loaded curve and protobuf? \nPut here your dump php -m\n. No de proto files isn't required,\nPut a var_dump in src/handlers/MessageHandler.php on method Process to verify.\nIn line 59 fire onGetMessage\n. I had the same problem, and it was because they were not loaded curve and protobuf because if they are not the event is triggered onGetMessage\n. @alishan305 to decrypt the messages is necessary to use the event handler.\nWhether vla myEvents class or individual binding events\n. @mgp25 Sorry mate and Thanks for your work. \n@kadnan var_dump(extension_loaded('curve25519') && extension_loaded('protobuf'));\n. @kadnan \nHello. To receive message you need bind onGetMessage and call pollMessage in a loop\nwhile (1) {\n    $w->pollMessage();\n}\n. If you don't use a infinite loop, put a condition \n. When decrypt fail the event wont fire\n. encrypted messages always come what fails is decryption. I have not managed to replicate the fault present . when I have something I will post\n. @kadnan The location messages trigger other event , check AllEvents.php\n. @kadnan \nhttp://prntscr.com/asnzag\nfunction onGetLocation($mynumber, $from, $id, $type, $time, $name, $author, $longitude, $latitude, $url, $preview){\n    echo sprintf(\"----------------------------------------------------------------------------\\r\\n\");\n    echo sprintf(\"Message with location from %s: [%s,%s]\\r\\n\",$from,$longitude,$latitude);\n    echo sprintf(\"Author: [%s]\\r\\n\",$author);\n    echo sprintf(\"Name: [%s]\\r\\n\",$name);\n    echo sprintf(\"Url: [%s]\\r\\n\",$url);\n    echo sprintf(\"Type: [%s]\\r\\n\",$type);\n    echo sprintf(\"Time: [%s]\\r\\n\",$time);\n    echo sprintf(\"----------------------------------------------------------------------------\\r\\n\");\n    file_put_contents(sprintf(\"/media/%s.jpg\",$from), $preview);\n}\n$w->eventManager()->bind('onGetLocation','onGetLocation');\n. ",
    "alishan305": "Dear Luis,\nI have setup Protobuf and curve25519 php extension, but i am receiving encrypted messages still, do i need to use any function..?\nMy Out put is.\nArray ( [0] => ProtocolNode Object ( [tag:ProtocolNode:private] => message [attributeHash:ProtocolNode:private] => Array ( [from] => 96894025419@s.whatsapp.net [type] => text [id] => C050C0114745287331A186DF263502 [offline] => 3 [t] => 1458453142 [notify] => ali shan ) [children:ProtocolNode:private] => Array ( [0] => ProtocolNode Object ( [tag:ProtocolNode:private] => enc [attributeHash:ProtocolNode:private] => Array ( [v] => 2 [type] => pkmsg ) [children:ProtocolNode:private] => [data:ProtocolNode:private] => 3\u0012!\u0005\u00beh\u00fd\u00a9\u00b9\u0090\u0011  k\u0007BB>\u0090\u00cf\u00aa<\u00f0\u00c6\u001f\u00a4\u00fd\u000f1\u00ef; N\u2013\u0006\u001a!\u0005\u0016l\u0013\u00cfH\u201a\u00adT\u00a2;(\u00eb\u00bf\u00aa\u00b6dq\u00b1\u00d4\u2019\u00ff\u2030 a\u000f\u00c0b?)2\"R3 !\u0005\u0006\u00f7\u00e0U=mkA\u00ef\u2019\u00ef\u201eP#S0\u00c4 \u20300d\u201cA2\\\u0081\u00dbB\u0153\u00c2UO\u0010\b\u0018\" Q\u00b2\u0013\u00baJ\u00fa=(\u0015J\u2122\u00e3m. \u0090\u00a2&&\u0012\u00bd\u00f5\u00a7\u2019\u00ac7A\u00af\u0005\u2014\u00efG\u00d6\u201a\u00a9\u001d^\u00d3_\u00f1(\u00bc\u00d5\u0090$0\u02dc\u00b7\u00a5 ) ) [data:ProtocolNode:private] => ) ) Array ( [0] => ProtocolNode Object ( [tag:ProtocolNode:private] => message [attributeHash:ProtocolNode:private] => Array ( [from] => 96894025419@s.whatsapp.net [type] => text [id] => 01E29D1C37579FA5126278A16D5913 [offline] => 3 [t] => 1458453143 [notify] => ali shan ) [children:ProtocolNode:private] => Array ( [0] => ProtocolNode Object ( [tag:ProtocolNode:private] => enc [attributeHash:ProtocolNode:private] => Array ( [v] => 2 [type] => pkmsg ) [children:ProtocolNode:private] => [data:ProtocolNode:private] => 3\u0012!\u0005\u00beh\u00fd\u00a9\u00b9\u0090\u0011   k\u0007BB>\u0090\u00cf\u00aa<\u00f0\u00c6\u001f\u00a4\u00fd\u000f1\u00ef; N\u2013\u0006\u001a!\u0005\u0016l\u0013\u00cfH\u201a\u00adT\u00a2;(\u00eb\u00bf\u00aa\u00b6dq\u00b1\u00d4\u2019\u00ff\u2030 a\u000f\u00c0b?)2\"\u2019\u00013 !\u0005\u0006\u00f7\u00e0U=mkA\u00ef\u2019\u00ef\u201eP#S0\u00c4 \u20300d\u201cA2\\\u0081\u00dbB\u0153\u00c2UO\u0010  \u0018\"`\u2018b\u00f6e Ra\u00cbx\u017d\u00aaE\u008d\u00da\u00ea\u00c2\u2022\u00c5\u0015\u02dc\u0010\u00f0\u00d6FA\u00df\u00ab\u00b1w\u0016+}z\u0081\u00e1\u00e5\u00b8P\u00a9\u00e7\u00edv80\u00f0\u00b5\u017dEj\u0007<\u00b0M\u00dc\u00c7\u00cf\u00bce\u00a8k\u00d1\u00b1\u017dB4L\u00f9\u0160\u00bb\\\u00bd\u2020\u008d\u00aeF\u00b0\u00e5\u0081\u0010\u00ae46\u0161jh\u00e9+\u00dd6\u0018\u00c5\u00a4c\u00cedaU\u00dc}\u201aO5{E(\u00bc\u00d5\u0090$0\u02dc\u00b7\u00a5 ) ) [data:ProtocolNode:private] => ) ) \n. When is am using below code:\nwhile($w->pollMessage());\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n         //process inbound messages\nprint_r($m->NodeString(\"\") . \"\\n\");\n}\nOutput is this:\nmessage from=\"9**@s.whatsapp.net\" type=\"text\" id=\"C050C0114745287331A186DF263502\" offline=\"3\" t=\"1458453142\" notify=\"ali shan\">\n  33122105be006802fda9b99011096b0742423e90cfaa3cf0c61fa4fd0f31ef3b204e96061a2105166c13cf4882ad54a23b28ebbfaab66471b1d492ff890d610f00c062033f29322252330a210506f7e0553d6d6b41ef92ef8450235330c4a08930649341325c81db429cc2554f10081800222051b213ba4afa3d28154a99e36d2e2090a2262612bdf5a792ac3741af0597ef47d682a91d5ed35ff128bcd590243098b7a502\n\n\n33122105be006802fda9b99011096b0742423e90cfaa3cf0c61fa4fd0f31ef3b204e96061a2105166c13cf4882ad54a23b28ebbfaab66471b1d492ff890d610f00c062033f2932229201330a210506f7e0553d6d6b41ef92ef8450235330c4a08930649341325c81db429cc2554f1009180022609162f6650d5261cb788eaa458ddaeac295c5159810f0d64641dfabb177162b7d7a81e1e5b850a9e7ed763830f0b58e456a073cb04ddcc7cfbc65a86bd1b18e42344cf98abb5cbd868dae46b0e58110ae34369a6a68e92bdd3618c5a463ce646155dc7d824f357b4528bcd590243098b7a502\n\n. @kadnan  i already setup both extension on my PHP WAMP but still i am getting encrypted? Do i need to use any function to decrypted the messages? Can you share your full your operating system PHP version and CHAT  API version.\n. Dear @kadnan \ni already installed the curve25519 and protobuf but only one loaded (protobuf), Do you have curve25519 extension URL for PHP 5.6. Please provide me.\n_My Environment _\nPHP : 5.6\nWAMP 64 bit.\nOperating System : windows 8\nThanks\n. Would it possible to compile it on windows? If you have way can you provide me to compile the curve25519 lib on windows wamp64 environment.\n. @kadnan  No i did not get any reply.\n. Dear @mgp25 \nCan you please check what i am doing wrong, any configuration problem or what.\n. ",
    "kadnan": "\nn new version you need Protobuf an curve25519 php extension to work propertly\n@LuisNeighbur and how can I figure it out? I am also getting encrypted message.\n. Chat API: 3.2\nPHP 5.6\n\nAll extensions are installed. I have .proto files but not a generated files against them\n. @LuisNeighbur  I am using the latest 3.2.x installed via composer. I am getting message but encrypted.\n. Yes\n. public function onGetMessage( $mynumber, $from, $id, $type, $time, $name, $body )\n    {\n        echo \"<br>Message Got from $name:\\n$body\\n\\n<br>\";\n    }\nThe event is not being fired.\nAlso, the sender and receiver are same number\n. @LuisNeighbur I put an exit in Event method and seems that event was not triggered at all. I already have enabled required method in event array.\n. Yes mate because other events are being fired:\n```\necho \"[] Logging in as '$nickname' ($username)\\n\";\n//Create the whatsapp object and setup a connection.\n$w = new WhatsProt($username, $nickname, $debug,true,DIR.'/wadata/');\n$events = new MyEvents($w);\n$events->setEventsToListenFor($events->activeEvents);\n$w->connect();\n// Now loginWithPassword function sends Nickname and (Available) Presence\n$w->loginWithPassword($password);\n$w->sendMessage($target, 'Let me know when you get free!!');\necho \"Message Sent to $target\";\necho \"Getting message\";\n$w->pollMessage();\n$msgs = $w->GetMessages();\nforeach ($msgs as $m) {\n    var_dump($m);\n}\n.\n[PHP Modules]\nbcmath\nbz2\ncalendar\nCore\nctype\ncurl\ncurve25519\ndate\ndom\nereg\nexif\nfileinfo\nfilter\nftp\ngd\ngettext\nhash\niconv\nimap\nintl\njson\nldap\nlibxml\nmbstring\nmcrypt\nmysql\nmysqli\nmysqlnd\nopenssl\npcre\nPDO\npdo_mysql\npdo_pgsql\npdo_sqlite\npgsql\nPhar\nposix\nprotobuf\nreadline\nReflection\nsession\nSimpleXML\nsoap\nsockets\nSPL\nsqlite3\nstandard\ntokenizer\nwddx\nxml\nxmlreader\nxmlwriter\nxsl\nyaz\nzip\nzlib\n[Zend Modules]\n``\n. One thing I want to know. I find example.protofiles. Do I need to generate php files against them?\n. @LuisNeighbur Sorry, what should I send you now?\n. @mgp25  Only if I find some section to deal with this issue, I'd happily refer it. So far could not find anything other than going thruissues`.\nI'd open issue in other repo.\n. I have those extensions installed as well as loaded. I am going thru issues again :/\n. @mgp25  I can't create issue on Chat-API repo? I created such a log post but comment button is disabled.\nSeems I have been blocked :/ \nMay I create issue here? I am so desperate to sort this out\n. Since I am not allowed to lodge issue in related repo, I made a post on Stackoverflow\nhttp://stackoverflow.com/questions/36567005/php-whatsapp-client-unable-to-get-messages\n@mgp25 @LuisNeighbur \n. @LuisNeighbur OK I'd try but, should not that be for being in listening mode? I mean, at least he should get it once!!\nRight now even an event is not being fired. \nIf you check the debug log on SO site, it says some encryption key problem.\n. Guys I finally sorted out. It sees the API does not let you send from same numbers. I arranged another number and worked like charm. @LuisNeighbur  event loop worked. \nRight now I am getting only text messages. When I sent the LOCATION, nothing showed up\n. I compiled one locally from source for my OSX 10.10 machine.\n. I don't use Windows but if you google you might find DLL fo it\n. @alishan305  Did you get the answer?\n. I finally sorted it out. Turns out that the Library was getting lost if send and receive both re same number. I arranged another number and worked like Charm\n. ",
    "amec1234": "@mgp25 here you say that the events won`t fire, if the message is received encrypted. But yesterday you told me that  \"everything is received encrypted use events to obtain decrypted data\". Now i m confused. \n. @LuisNeighbur but i have all dependencies installed already checked on php -m. Why do I still receive encrypted messages.\n. Are the messages marked as read? \n. ",
    "kafinetetaha": "how whatsapp number filter ?\nhelp me plz.....\n. use whatsapinet?\nby c#?\n. thank you ...\nbut no replay for my question ?\nhelp me plz......\n. int index value?\nstring sid?\nDictionary existingUsers?\ni think exiting user get any number not just whatsapp user !\n. yes i tierd above code , but any add any number!\nclass cyncContact not exit?\n. i think use this class but show error!\n public class ContactSync\n    {\n        const string RequestURL = \"https://sro.whatsapp.net/v2/sync/a\";\n        const string ExecureURL = \"https://sro.whatsapp.net/v2/sync/q\";\n        protected string username;\n        protected string password;\n        protected HttpWebRequest request;\n```\n    public ContactSync(string username, string password)\n    {\n        this.username = username;\n        this.password = password;\n    }\npublic ContactSyncResult[] Sync(string[] contacts)\n{\n    string nonce = this._getSyncNonce();\n    string res = this._executeSync(nonce, contacts);\n\n    JavaScriptSerializer jss = new JavaScriptSerializer();\n    ContactSyncResultContainer c = jss.Deserialize<ContactSyncResultContainer>(res);\n\n    return c.c;\n}\n\nprotected string _getPostfields(string[] contacts)\n{\n    string fields = \"ut=all&t=c\";\n    foreach (string contact in contacts)\n    {\n        string con = contact;\n        if (!con.Contains('+'))\n        {\n            con = \"%2B\" + con;\n        }\n        fields += \"&u[]=\" + con;\n    }\n    return fields;\n}\n\nprotected string _executeSync(string cnonce, string[] contacts)\n{\n    this.request = WebRequest.Create(ExecureURL) as HttpWebRequest;\n    string postfields = this._getPostfields(contacts);\n    request.Method = \"POST\";\n    this._setHeaders(cnonce, postfields.Length);\n    using (var writer = new StreamWriter(request.GetRequestStream()))\n    {\n        writer.Write(postfields);\n    }\n    try\n    {\n        HttpWebResponse response = this.request.GetResponse() as HttpWebResponse;\n        StreamReader reader = new StreamReader(response.GetResponseStream());\n        return reader.ReadToEnd();\n    }\n    catch (Exception e)\n    {\n        return null;\n    }\n}\n\nprotected string _getSyncNonce()\n{\n    this.request = WebRequest.Create(RequestURL) as HttpWebRequest;\n    this._setHeaders(\"0\", 0);\n    HttpWebResponse response = this.request.GetResponse() as HttpWebResponse;\n    string cnonce = this._getCnonce(response.Headers.Get(\"WWW-Authenticate\"));\n    return cnonce;\n}\n\nprotected string _getCnonce(string header)\n{\n    string[] parts = header.Split(',');\n    parts = parts.Last().Replace('\\\\', '\\0').Split('\"');\n    return parts[1];\n}\n\nprotected static string _getCnonce()\n{\n    string foo = _hash(DateTime.Now.Ticks.ToString()).Substring(0, 10);//random\n    return _hash(foo);\n}\n\nprotected static string _hash(string data)\n{\n    return _hash(data, false);\n}\n\nprotected static string _hash(string data, bool raw)\n{\n    byte[] bytes = Encoding.GetEncoding(\"ISO-8859-1\").GetBytes(data);\n    MD5 md5 = MD5.Create();\n    md5.ComputeHash(bytes);\n    if (!raw)\n    {\n        return _hexEncode(md5.Hash);\n    }\n    else\n    {\n        return Encoding.GetEncoding(\"ISO-8859-1\").GetString(md5.Hash);\n    }\n}\n\nprotected static string _hexEncode(byte[] data)\n{\n    StringBuilder sb = new StringBuilder();\n    for (int i = 0; i < data.Length; i++)\n    {\n        sb.Append(data[i].ToString(\"X2\"));\n    }\n    return sb.ToString().ToLower();\n}\n\nprotected void _setHeaders(string nonce, long contentlength)\n{\n    this.request.Headers.Clear();\n    this.request.UserAgent = WhatsAppApi.Settings.WhatsConstants.UserAgent;\n    this.request.Accept = \"text/json\";\n    this.request.ContentType = \"application/x-www-form-urlencoded\";\n    string foo = this._generateAuth(nonce);\n    this.request.Headers.Add(\"Authorization\", foo);\n    this.request.Headers.Add(\"Accept-Encoding\", \"identity\");\n    this.request.ContentLength = contentlength;\n}\n\nprotected string _generateAuth(string nonce)\n{\n    string cnonce = _getCnonce();\n    string nc = \"00000001\";\n    string digestUri = \"WAWA/s.whatsapp.net\";\n    string credentials = this.username + \":s.whatsapp.net:\";\n    credentials += Encoding.GetEncoding(\"ISO-8859-1\").GetString(Convert.FromBase64String(this.password));\n    string response = _hash(_hash(_hash(credentials, true) + \":\" + nonce + \":\" + cnonce) + \":\" + nonce + \":\" + nc + \":\" + cnonce + \":auth:\" + _hash(\"AUTHENTICATE:\" + digestUri));\n    return \"X-WAWA:username=\\\"\" + this.username + \"\\\",realm=\\\"s.whatsapp.net\\\",nonce=\\\"\" + nonce + \"\\\",cnonce=\\\"\" + cnonce + \"\\\",nc=\\\"\" + nc + \"\\\",qop=\\\"auth\\\",digest-uri=\\\"\" + digestUri + \"\\\",response=\\\"\" + response + \"\\\",charset=\\\"utf-8\\\"\";\n}\n\n}\npublic class ContactSyncResult\n{\n    public string p { get; set; }\n    public string n { get; set; }\n    public string s { get; set; }\n    public long t { get; set; }\n    public int w { get; set; }\n}\npublic class ContactSyncResultContainer\n{\n    public ContactSyncResult[] c { get; set; }\n}\n```\n. plz help me ...\nabove code not work \n. i am no spammers , i like to learn resolve this problams ;\nhow use your code?\n. very very very thank you\n. contact sync v2 not exit for c#?\n. ",
    "hpatel4u": "@kafinetetaha use SendSyn Method and you will auto get response in onGetSyncResult( $result ) event with valid and invalid numbers.\nfor more details --> https://github.com/WHAnonymous/Chat-API/wiki/Sync\n. @kafinetetaha you can download the https://github.com/hpatel4u/Chat-API-NET and try to implement using the same method i show you in last post.\n. @kafinetetaha check this\nAdd this where other events you have registered.\nwa.OnGetSyncResult += wa_OnGetSyncResult;\nprivate void wa_OnGetSyncResult(int index, string sid, Dictionary existingUsers, string[] failedNumbers)\n        {\n            try\n            {\n                string nums = string.Empty;\n                foreach (KeyValuePair item in existingUsers)\n                {\n                        nums += item.Key.Substring(1) + \"\\r\\n\";\n                }\n            }\n            catch (Exception ex)\n            {\n                throw ex;\n            }\n        }\n. @kafinetetaha Have you tried the above code? \n. @kafinetetaha the url which you are using is not available or not responding and thats the error as of now i guess..\nhttps://sro.whatsapp.net/v2/sync/a \nhttps://sro.whatsapp.net/v2/sync/q\nuse the code which i post...\n. @mgp25 point noted..\n. https://github.com/mgp25/Chat-API-NET/issues/6#issuecomment-101116621 \n. no you can visit --> https://github.com/hpatel4u/Chat-API-NET\n. @mohammad3n hope you register the OnGetMessage, OnDeliverByClient, OnDeliverByServer event before login. Try console test application provided by @mgp25, its working fine.\n@amanssit have you try with https://github.com/mgp25/WART \n. @mohammad3n Yes correct it was my mistake.\nDid you get the result?\nOn Jun 6, 2015 4:38 PM, \"mohammad3n\" notifications@github.com wrote:\n\n@hpatel4u https://github.com/hpatel4u Thanks a lot. By the way the name\nof OnDeliveryByClient is changed to OnGetMessageReceivedClient and\nOnDeliveryByServer is changed to OnGetMessageReceivedServer.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-109565125\n.\n. @erarijit you can use OnGetMessage() Event, whatever message received on your logged in number will received on it. you can write it in chat window or save it in xml or in text file..\n\n:+1: \n. Hi,\nRegister  wa.OnGetMessage += wa_OnGetMessage; event and try below method.      \nstatic void wa_OnGetMessage(ProtocolTreeNode node, string from, string id, string name, string message, bool receipt_sent)\n        {\n            Console.WriteLine(\"Message from {0} {1}: {2}\", name, from, message);\n        }\n. Hi,\nYou have not registered  wa.OnGetMessage += wa_OnGetMessage; event.\nstatic void wa_OnGetMessage(ProtocolTreeNode node, string from, string id, string name, string message, bool receipt_sent)\n    {\n        Console.WriteLine(\"Message from {0} {1}: {2}\", name, from, message);\n    }\nEnjoy!\n. You can not use the same number in mobile and in API at the same time, your number may be blocked by whatsapp. share your API log which helps to know exact status.\n. Yes your number blocked by Whatsapp.\nOn Jun 3, 2015 5:59 PM, \"creolyte\" notifications@github.com wrote:\n\nThank you for your reply hpatel4u. Where can I find my logs? Do you mean\nthe error returned by the codes? By the way, I got this error below earlier:\nfailure\nnot-authorized>\nfailure\nand I read the FAQ section that you are permanently blocked if I get this.\nBy the way, how to switch back to mobile Whatsapp (without getting blocked\nagain) because I need to check my messages. Or the best option is get a new\nnumber for development purposes? Thanks.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/757#issuecomment-108365164\n.\n. @creolyte you can not logged in to two different place at the same time and do not try to request code more then two or three time in a day. Whatsapp tracing this also very well.\n\n@mgp25 I am using the API which was working fine before 10days and now the blockage ration is very high. if you want i can share you the code you can review on your time and suggest at your time.\nFYI, i just changed the token, version etc from Chat-API but there is no success.\n. You can use synchronized contacts method.\nOn May 17, 2015 6:58 PM, \"tilcampo\" notifications@github.com wrote:\n\nI tried to phone but takes a long time, there is a script to help me with\nit? thanks :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1143.\n. Hi\n\ncheck this link https://github.com/mgp25/Chat-API-NET/issues/6#issuecomment-101253744\nEnjoy\n. ",
    "ckarea": "is there a way i can check it without using my own whatsapp number? too many number got banned, I only have to check if the number have whatsapp, not sending message\n. ",
    "sezerphp": "How do I know that WhatsApp t been registered number will be sent ?\n. ",
    "mosaw": "hi @hpatel4u  can u send me ur gmali or any social media account ? . i solved it. ",
    "Toverbal": "It seems that when I send a message before the MessageImage, the message is being received, but the image is not. I have checked the base64 encoded data and that is in fact a valid jpg thumbnail (about 2KiB) and the url the image points to is valid too.\n. Some more thoughts: When I do the following:\n$wa->Message(uniqid(\"prefix\", true), $receiver, \"test 1\");\n$wa->Message(uniqid(\"prefix\", true), $receiver, \"test 2\");\n$wa->Message(uniqid(\"prefix\", true), $receiver, \"test 3\");\n$wa->Message(uniqid(\"prefix\", true), $receiver, \"test 4\");\nThe receiver will receive only test 1 and test 2, when I do a sleep in between the messages, the receiver will receive all messages. In neither cases the $wa->MessageImage( is working, I also changed the time() . \"-1\" to 'uniqid' to be sure the id is really unique.\n. Interesting, are you saying that $wa->Message() and $wa->MessageImage() are running asynchronous (as in a separate thread)? I'll try this and let you know what the outcome is.\n. Yes, it seems that that is the problem. One more thing though, why are the id's always time() . \"-1\" and then especially the -1 part? It seems that uniqid(\"prefix\", true) does the job too.\n. Yes, it's working with the delay as you suggested, but I still don't understand why you are adding some number (being -1, -9 or -100 doesn't matter) to the end of the id? It seems to be working just fine without the suffix...?\n. Could be that the solution of ths is similar to issue #102 : just put a sleep(3) at the end of the PHP, it might be that the image was not fully sent yet, since it (seemingly) is executed asynchronous.\n. ",
    "ericblade-owo": "The official clients increment a counter every time an id is generated, and use that in addition to whatever the base of the id is (either time() + \"-\" + counter, or \"ping-\" + counter, or something like that)\n. ",
    "Kareth33": "I am trying to find out about how to get profile pictures too, but nothing successful yet. If anyone has any clue, would be appreciated. Thanks.\n. ",
    "kirthar": "Try Conecting and Login before you send the message, like this.\n\n    require '../src/php/whatsprot.class.php';\n```\n$sender =   'SENDER';\n$imei   =   'IMEI/MAC';\n$w = new WhatsProt($sender, $imei, null);\n$w->Connect();\n$w->Login(); \n$w->Message('ID', 'NUMBER', 'TEXT');\n```\n\n. Do you mean the same message to more than 1 person or a group message to many person?\nOn the first case you just need to use the $w->Message( x, y, z ); many times changing the number.\nOn the second scenario look here https://github.com/venomous0x/WhatsAPI/pull/55 or here https://github.com/venomous0x/WhatsAPI/issues/10 \nI had no problems with special characters.\n. This seems to be for group chats, not for getting the contact list.\nLike developrch say, if Whatsapp didn't store that list will be imposible to retrieve it :-/\nThis issue can be closed until that change.\n. ",
    "xxxazxxx": "+1\n. superb updates. I would also want to get the last seen and status of a particular user. could you code that?\nalso is there any alternative for https://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=91&me=9800000000&u[]=9800000000?\n. ",
    "evilqubit": "I read this quickly I think it can be done https://sro.whatsapp.net/client/iphone/iq.php?cd=1&cc=$countrycode&me=$yournumber&u[]=$friend1&u[]=$friend2&u[]=$friend3&u[]=$friend4\nCheck this \nFrom: developrch [mailto:notifications@github.com] \nSent: Tuesday, October 09, 2012 2:20 PM\nTo: venomous0x/WhatsAPI\nSubject: Re: [WhatsAPI] Get Contact List (#111)\nNot possible, because the contacts are not stored with WhatsApp.\nIt's using the local contacts on the phone.\n\u2014\nReply to this email directly or view it on GitHub https://github.com/venomous0x/WhatsAPI/issues/111#issuecomment-9257127 . \nhttps://github.com/notifications/beacon/J6T91GIPIyhU-8ti4GCGP7yvea5Il8z0V60I-6PS_yEGEdQDjS98fHoyU7FjAU16.gif \n. Dare To Imagine (startup weekend Byblos) (http://startupweekend.us6.list-manage.com/track/click?u=520fa5a7df88635e5ba2843b8&id=5ffd886c25&e=f4f67196aa)\nView this email in your browser (http://us6.campaign-archive1.com/?u=520fa5a7df88635e5ba2843b8&id=6aace1565f&e=f4f67196aa)\nhttp://startupweekend.us6.list-manage1.com/track/click?u=520fa5a7df88635e5ba2843b8&id=09119881b1&e=f4f67196aa\n** Dare To Hack\n** Web Security workshop at startup weekend byblos (http://startupweekend.us6.list-manage.com/track/click?u=520fa5a7df88635e5ba2843b8&id=457a06ae5c&e=f4f67196aa)\nFriday March 1st\nTime : \"1:30 pm - 6:30pm\"\nEnter the world of anonymous .\nFor registration  : http://startupweekend.us6.list-manage.com/track/click?u=520fa5a7df88635e5ba2843b8&id=cfd240aaab&e=f4f67196aa\n\n* unsubscribe from this list (http://startupweekend.us6.list-manage1.com/unsubscribe?u=520fa5a7df88635e5ba2843b8&id=42fd1c0bb0&e=f4f67196aa&c=6aace1565f)\n* update subscription preferences (http://startupweekend.us6.list-manage.com/profile?u=520fa5a7df88635e5ba2843b8&id=42fd1c0bb0&e=f4f67196aa)\n. ",
    "kerby82": "Hi,\nhow can i find the name associate to file uploaded?\nI noticed that when i upload an image through whatsapp app the information about the file uploaded are the following:\n              [_attributeHash] => Array\n                                (\n                                    [xmlns] => urn:xmpp:whatsapp:mms\n                                    [file] => ea5f0189a4502d2a085ce1b1c75ad168.jpg\n                                    [url] => https://mms803.whatsapp.net/d/_kvBJYxihAxb9KCeupEVQc1Q7SY/AXBA-znVQ-dn9B0-9PmgdQUsfsVDnnUnSU4-Sx07dzUt.jpg\n                                    [type] => image\n                                    [size] => 67143\n                                    [mimetype] => image/jpeg\n                                    [filehash] => MBUdV2Cg925qQVRjTEpBd38c1IwA9I4yaFHMzMcNcG0=\n                                    [width] => 470\n                                    [height] => 581\n                                )\n[_children] => \n                        [_data] => /9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCABTAGMDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE                        )\nSo how can I get programmatically the url? in this case: https://mms803.whatsapp.net/d/_kvBJYxihAxb9KCeupEVQc1Q7SY/AXBA-znVQ-dn9B0-9PmgdQUsfsVDnnUnSU4-Sx07dzUt.jpg\nI want to use whatsapp server for storaging images sent through the php whatsapi.\n. Thanks,\ncan I understand how the filnename is build? How do you get it? by analyzing the returned xml?\n. I would like to understand the HTTP statement that you use for upload in order to use in other languages such as objective-c\n. I use this code on obj-c:\nurl=@\"https://mms.whatsapp.net/client/iphone/upload.php\";\n    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];\n    [request setURL:[NSURL URLWithString:url]];\n    [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];\n    [request setHTTPShouldHandleCookies:NO];\n    [request setTimeoutInterval:30];\n    [request setHTTPMethod:@\"POST\"];\n```\n// set Content-Type in HTTP header\nNSString boundary = @\"0xKhTmLbOuNdArY\";\nNSString contentType = [NSString stringWithFormat:@\"multipart/form-data; boundary=%@\", boundary];\n[request setValue:contentType forHTTPHeaderField: @\"Content-Type\"];\nNSMutableData *body = [NSMutableData data];\n//---------- FIRST IMG\nUIImage imgLittle = [realImgButton imageForState:UIControlStateNormal];//thumImg.image;\nNSData imageData = UIImageJPEGRepresentation(imgLittle, 1.0);\nif (imageData) {\n    [body appendData:[[NSString stringWithFormat:@\"--%@\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n    [body appendData:[[NSString stringWithFormat:@\"Content-Disposition: form-data; name=\\\"image\\\"; filename=\\\"img.jpg\\\"\\r\\n\"] dataUsingEncoding:NSUTF8StringEncoding]];\n    [body appendData:[[NSString stringWithString:@\"Content-Type: image/jpeg\\r\\n\\r\\n\"] dataUsingEncoding:NSUTF8StringEncoding]];\n    [body appendData:imageData];\n    [body appendData:[[NSString stringWithFormat:@\"\\r\\n\"] dataUsingEncoding:NSUTF8StringEncoding]];\n}\n[body appendData:[[NSString stringWithFormat:@\"--%@--\\r\\n\", boundary] dataUsingEncoding:NSUTF8StringEncoding]];\n[request setHTTPBody:body];\n```\nand it does not work, maybe is due to some option inserted into the http post...\nfor example in your script what does \"Expect: \" mean?\n. Here the error:\nxml version=\"1.0\" encoding=\"UTF-8\"?\nplist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\n\n\nerror\nError Uploading File\n\n\n. My question was not about obj-c was about whatsapp protocol. From your code this is the http post for a file: \nPOST / HTTP/1.1\nHost: localhost:8080\nAccept: _/_\nContent-Length: 212\nContent-Type: multipart/form-data; boundary=----------------------------b23f64acafe2\n\n------------------------------b23f64acafe2\nContent-Disposition: form-data; name=\"file\"; filename=\"/tmp/file.vuoto\"\nContent-Type: application/octet-stream\nciao\n------------------------------b23f64acafe2--\nIn my case the post is (so was wondering if the problem is in the header of the post):\nPOST / HTTP/1.1\nHost: 192.168.1.5:8080\nAccept: /\nAccept-Encoding: \nAccept-Language: en-us\nContent-Type: multipart/form-data;boundary=------------------------------xYzZY\nConnection: keep-alive\nContent-Length: 39854\nUser-Agent: \n------------------------------xYzZY\nContent-Disposition: form-data; name=\"image\"; filename=\"img.jpg\"\nContent-Type: application/octet-stream\nciao\n------------------------------xYzZY--\n. Anyone know how to calculate programatically the hash of the file? it seems to not be neither sha1 nor md5....\n. Ok,\nbut the size depends on the image quality also, so I was just wondering if\nthe thumbnails must be created considering to not exceed a certain size\nthreshold.\nOn Monday, October 29, 2012, developrch notifications@github.com wrote:\n\nThe included function to create a thumbnail first resizes the image to\n100x100, so it should work if you do that.\n\u2014\nReply to this email directly or view it on GitHub.\n\n\nAndrea Cirulli\n. Yes, I had the same problem.\nAnd the resize is not solution, since the quality affects the dimension of the base64 encoding. And remember that encoding in base64 provide a 30% larger file.\nI would like to know the threshold\n. A not updated whatsapp on my ancient iphone 3g is still working so I guess they did not change protocol. Is that possible that they are checking the user agent variable in the HTTP request?\n. You were right i sniffed the protocol and it's TLS. Anyway I don't know if it's a coincidence but whatsapp it's not working anymore from today on iphone 3g. \n. I will try at home to use a proxy to break the SSL. Anyway know if the client verify the SSL server certificate or it just use it to encrypt the channel?\n. Do you already know how the 1.2 Protocol work?\n. Sorry, but I would want to ask if we can sum up the issue resolution. I did not get if a resolution was find and we are working on it. I can give all the help needed. Thanks!\n. What do you mean? you can build a script that deliver the message to all of your recipients.. no?\n. We can close this issue the problem is related to #126 the whatsapp authentication protocol is changed.\n. Is kind of your problem, nslookup resolution is working. From an http protocol it's impossible to understand if the request comes from a script. So even if the problem would exist it's not related to the script. \n. There is a syntax error on line 488  of file protocol.class.php (return ret;)\nLogin works, message works, but sending image does not work.\nAnyone experiencing the same problem?\n. Definitely agree, the problem with the size was present also in the earlier implementation (protocol 1.1)\nBut now even if the size is in the accepted range no message received on the client.\nIf you need any further information I can provide it.\n. @beldar can you please give me the base64 of the icon. I just wanna try with your image. If it's not considered confidential data...:-)\n. @beldar do you know some implementation in which send Image works properly? I want to have a look at that an try to port it in php....\n. @arne-e Ok, can you send me the snippet of the code you use to send the image and the base64 of the image. I'm not able of sending image only the black square that is very few bytes of base64\n. @arne-e you are using the latest version of the whatsapi php library? i tried with the same data as yours and it did not work. Are your sure is working properly?\n. It seems that that the server reply to the client and if the client close the connection as long as sending the image without waiting for a reply it does not work....\n. But we have to check if the connection with the server it's closed exiting from the sendImage function or exiting from the php script\n. And this can explain why sending few bytes works. Theorizing we can think that in that case the node after sending the image is received.\n. This is what is happening after sending an image:\nhttp://pastebin.com/FnDLtCHk\nThe id is the one used for sending the Image. So it seems that the server replies something related with the message. We can think about the iphone app, we have like a progressing bar that when the message is sent disappear. If the client does not accomplish all the process cause the server to not deliver the message.\nDoes it make sense?\n. I guess i got it the reason.\nI put a sleep of 20000 second for understanding what is happening.\nWhen you launch the script there is an established connection to whatsapp:\ntcp4     336      0  192.168.1.3.63054      50.22.231.56.5222      ESTABLISHED\nWhen you quit the script the established connection is reset.\nSo if you send the image and then you quit as long as the function return you are resetting the connection and the node sent you back by the server cannot be delivered by the server itself, this cause the server to not deliver the message.\nIt's just a theory but can make sense.\nIt's not about pulling the message it's about closing the connection too early...\n. @arne-e unfortunately this is not the solution. I would expect to implement the correct way to check if everything is delivered in the right way. Sleep 1 second is not a solution an can work bad in certain condition, especially considering the network issue you can have.\nAnd remember that even if you don't use pollmessaged and get messages along the connection the server replied to the client. So the node is sent back to the client while sending the message.\nI guess we have to implement the check upon the right node received from the server. We can bind the node to the message by the id. And this can also work for every kind of message sent.\n. @beldar  so you figured out how to send image? can you provide the php code?\n. Since the filehash is about the file uploaded i dont think it's checked in the sending of the message. I guess it's checked when you click the show button on the thumbnails. There must be another reason about the problem of the size....\n. @jandrito80 can you provide the code that are you using and the thumbnail want to check. This issue is very important to me..I'm trying to fix it.\n. ",
    "chin2007": "Well, i have some other concerns. Is there anyway to download any media file by the media url stated above. Like:\nhttps://mms123.whatsapp.net/d/kdnfso123854gdjfghudgUmpvvorpjOp5cBuDX_Kv0PtOXSziug.jpg\n.. Wud really appreciate if u can help\n. ",
    "karan19901990": "u can use img tag before the url in html then this image priview automatically anywhere without downloading from whatsapp server otherwise if u want to download it from whats app server then w_get is function to auto download\n. unable to recieve sms code through whatsapi, youwsup and wart please help\n. even by this code i donot recieve sms msg..\nOn Thu, Nov 13, 2014 at 6:37 AM, mgp25 notifications@github.com wrote:\n\nThis is fixed here: https://github.com/mgp25/WhatsAPI-Official\n\u2014\nReply to this email directly or view it on GitHub.\n\n\nK@r@!!\n. not receiveing sms code on mobile... please help me\n. i have also a same mismatch problem\n. i also used wart but unable to rec ieve sms code via wart. same problem\noccurs in youwsup, and whatsapi\nOn Sun, Nov 9, 2014 at 12:09 AM, karteek10600 notifications@github.com\nwrote:\n\nthis mismatch thing is due to the token,i think whatsapp has changed it,so\nbetter use WART where u can directly sniff the password...\nhttps://github.com/shirioko/WART\nOn Sat, Nov 8, 2014 at 12:11 PM, karan19901990 notifications@github.com\nwrote:\n\ni have also a same mismatch problem\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/450#issuecomment-62248100.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/450#issuecomment-62270251.\n\n\nK@r@!!\n. can you please tell me new method i have same problem i used yousup as well as whatsapi\n. ",
    "hoppler": "Hi,\nwithout setting a whatsapp UserAgend it wont be recognized as valid request. Is your countrycode right?\nA valid useragend can be: WhatsApp/2.8.4 WP7/2.3.7 Device/HTC-HERO-H1.0\nFor creating a new account you need a token with url:\nhttps://r.whatsapp.net/v1/code.php?cc={0}&in={1}&to={2}&lg={3}&lc={4}&method={5}&mcc=000&mnc=000&token={6}\n. Hi,\nthe c# project in issue #120 deals with the token and after testing it works.. so just use the implementation for generating the token.\n. Hi,\nthe HTC useragent was generated by myself as i knew the format of whatsapp useragent by sniffing. the other useragend was copied from the wazapp project for nokia n9 https://github.com/tgalal/wazapp/tree/dev\nthe countrycode for us seems to be just 1, but can also be 11.. try yourself.\n. Hi,\nthats because WhatsappPort, which is the Frontend of the App, isnt fully done. If you wanna test texting you should use the WhatsTest proj and you need programming skills to make it work. In the current edition special characters like \u00f6\u00e4\u00fc dont work and are sent int the wrong encoding.\nAfter testing im seein the error.. gonna debug n look for a solution\nEDIT: Fixed the problem, but cant commit as im not authorized.\nEDIT2: Commited the fix and pulled a request\n. Well its just a copy paste of the decompiled whatsapp from window phone. so anyone who wants to get it fixed just look at the current code and youll find the answer\n. ",
    "nosolopau": "Same issue here\n. ",
    "dcale": "same here...\n. ",
    "yingyeung575": "cool! but how to analyze??\n. @mobilipia How do they linked with an app on device and make it work on web?\n. ",
    "fritz-net": "I tried sniffing using Wireshark, because i want to find out how (in)blocking works, but all traffic to 173.194.70.147 (i think this is the whatsapp-server) is encrypted. Am I right?\n. ",
    "nitam": "Hi, I haven't tried whatsapi yet but based on your error message, it seems something else, try this way: \nphp whatsapp.php -s 5697XXXXXXX \"Tes message!\" | grep \"Send\"\nWith regard to the Undefined variable, you can simply edit whatsprot.class.php, go to line 359, get the variable and define it prior to its first use.\n. The RequestLastSeen method works just fine to me. All I did was provide: time() - \"1\" as first argument and voila.\n. Guys, all you have to do is change the current call to that method by this one: $wa->RequestLastSeen(time().\"-1\", $dst);\nThe message ID is formed by a timestamp concatenated to -1, the server will keep the timestamp and increase the other number (1), request by request. -1 seems to be the start point of your very first request, and moves forward from there.\nThe result comes just like any other request, print_r( $buff ) and you will see it. However, the last seen info it's not coming in any format, is just the amount of seconds since the last user action: \nTo get this info well formatted, try this out:\n$lastseen = $data[0]->getChild('query')->getAttribute('seconds');\necho date( 'H:i:s', strtotime('now ' - $lastseen . ' seconds' ) ) . \"\\n\";\n. No, in whatsapp.php, -i and/or -s, both calls of the RequestLastSeen() method. The mobile number is part of the required arguments to run whether the interactive mode or simply send a message to the given number.\nI thought it could be obvious, but it seems it's not.\nphp whatsapp.php -i ,\nWhile into the interactive mode (and after the necessary change) type: /lastseen  and that command will provide you the last seen info of the number you are interacting with.\n. Then you guys are not playing with the latest code. With the example I've provided earlier, you should get the last seen info as it is. Is how I'm seeing it.\nThe interactive mode enters into a loop that runs both, $wa->PollMessages() and $wa->GetMessages(); and the last one returns the response that is stored in $buff.\nAnother simple way to get that info is:\necho \"\\nLast seen $dst :\";\n$wa->RequestLastSeen( time() . \"-1\", $dst );\nwhile( TRUE ) {\n    $wa->PollMessages();\n    $buff = $wa->GetMessages();\n    if( !empty( $buff ) ) {\n        print_r( $buff );\n    }\n    sleep(1);\n}\nexit(0);\nRemember, the last seen info is presented in seconds since the last user action, ie: 300 (5 minutes), you may use the two lines I posted earlier to get the real date/time data.\n. ",
    "rdroguett": "Hi i try but\n[root@pbx tests]# php whatsapp.php -s 5697XXXXXXX \"Tes message!\" | grep \"Send\"\nPHP Warning:  Missing argument 2 for WhatsProt::RequestLastSeen(), called in /var/www/html/api/tests/whatsapp.php on line 105 and defined in /var/www/html/api/src/php/whatsprot.class.php on line 349\nPHP Notice:  Undefined variable: to in /var/www/html/api/src/php/whatsprot.class.php on line 359\n[] Send message to 5697XXXXXXX : Tes message!\n[root@pbx tests]#\n. Yeah it's true!!\n[root@pbx tests]# php whatsapp.php -s 5697XXXXXX \"Demo de envio\" | grep \"Send\"\n[] Send message to 5697XXXXXX : Demo de envio\n[root@pbx tests]#\nThe syntax errors was fixed. But i don't receive any message :(\n. ",
    "ChaosMarc": "what worked for me (no error but success message) was changing line 104 (tests/whatsapp.php) from\n$wa->RequestLastSeen($dst);\nto\n$wa->RequestLastSeen($dst, $argc[2]); \n(msg sending now works :) \"-l\" and \"-i\" still get me errors :( )\n. ",
    "hermanho": "Dear whatsUser,\nI suggest you can create a new repositories at github for your source and maintence easily\n. @waninkoko I receive the failure node when I send the response challenge. Should I encrypt the data when response challenge ?\n. @dleivag, no respond means you have sent out incorrect data. please check the start stream\n. https://github.com/hermanho/WhatsAPINet/tree/Protocol_1.2\nEnjoy :)\n. I have tested the login but I am not sure it can send a message. So just keep it until the testing is finished. may be someone can help to test the other functions.\n. @Dawnation, I just update it again because the old one show 'unknown' as committer.\nThe branch is still 'Protocol_1.2'\n. @beldar , please check the start stream\n. @Dawnation , could you please post the call stack? thanks\n. @beldar \nW A 0x01 0x02 _ _ _  ddddddddddddd\n_ = 3 bytes length\nddddd =data\nAlso, ver 1.2 dictionary is required\n. @beldar , could you please post the code \"flushbuffer\" ?\n. The size will append at the end . It should write in front of the bytes data.\n. I don't know how to explain it. You can refer my code  @ Line 241\nhttps://github.com/hermanho/WhatsAPINet/blob/Protocol_1.2/src/WhatsAppApi/WhatsApp.cs\n. 1. It must be ascii or utf8 encoding instead of base64\n2. There are several RC4 code when I am googling. I don't know why but only one version is work.\n3. Challenge is salt and the output of Rfc2898DeriveBytes is the session key\n4. Unix epoch is integer , not double or float\n. @beldar I am processing in byte array/list datatype in the api. You can check the length of '$buffer' before encryption. It should around 45/46 bytes\n@Starsong The part of login is ok and I am testing on sending a message.\n. @beldar What encoding is applied on sending/receiving from socket?\n. @saschagehlich \n@beldar\nHere is my example:\nLet say my country code has 3 digits and tel is 8 digits\nThe length of cHallenge is 20\n'1352306629' is my Unix epoch\nCCCTTTTTTTTHHHHHHHHHHHHHHHHHHHH1352306629\nI am processing in byte array. The length of this byte[] is 41.\n. @beldar I think you can just send out with string type\n. @beldar Have you disable the encryption when sending the auth response? If you have set the sessionK to writer, the data may be encrypted in writer.\n. @saschagehlich If you cannot find a plain-text failure node,  it seem correct.\n. @Starsong I increase the timeout value and it can be reduced the frequency.\n. @saschagehlich  I also don't know the reason.... but it seems it can be decoded completely.\nhttps://github.com/hermanho/WhatsAPINet/blob/Protocol_1.2/src/WhatsAppApi/Helper/BinTreeNodeReader.cs#L113\n. @zstars Thanks :+1: \n. @waninkoko  :+1: \n. @waninkoko, could you share the files of whatsapp WP version?\n. http://www.skypost.hk/%E6%B8%AF%E8%81%9E/%E8%A6%81%E8%81%9E/20130730/001/35%E5%88%86%E9%90%98%E6%8E%A0%E5%8F%961.2%E8%90%AC%E5%80%8B%E4%BA%BA%E7%A7%81%E9%9A%B1/103856\ntranslate by Google:\nhttp://translate.google.com/translate?hl=zh-TW&sl=zh-CN&tl=en&u=http%3A%2F%2Fwww.skypost.hk%2F%E6%B8%AF%E8%81%9E%2F%E8%A6%81%E8%81%9E%2F20130730%2F001%2F35%E5%88%86%E9%90%98%E6%8E%A0%E5%8F%961.2%E8%90%AC%E5%80%8B%E4%BA%BA%E7%A7%81%E9%9A%B1%2F103856\nThis person also do the same thing but he reported to Whatsapp......\n. ",
    "perezdidac": "I have created one in https://github.com/perezdidac/WhatsAPINet\nI will upload everything during this weekend and you will be invited to contribute and help improving the project that whatsUser started.\n. Dear all,\nThe C# API is available for downloading at: https://github.com/perezdidac/WhatsAPINet/\n. Dear waninkoko, \nIf you have implemented the code in C#, please could you push it into the C# repository? If you prefer, send me the code and I can update it by myself.\nhttp://github.com/perezdidac/WhatsAPINet/\nRegards,\n. Hi waninkoko, of course  is yours, I suposed that! :-) or are you telling me that you have implemented another C# WhatsApp API?\n. Dear all,\nPlease, I'd like to know how to capture packets in my router since\nwireshark is only available to capture my computer...\nBest regards,\n\nD\u00eddac P\u00e9rez\n2012/11/6 walter-white notifications@github.com\n\nI'm on the same situation, I send the authentication node but the server\ndoesn't response.\nMy code is pretty similar to the original one, just changing the magic\nbytes, and using writeInt24 for the flush buffer, but I don't receive any\ndata from the server after send the StartStream, should I receive any?\nHere my code:\npublic function Login()\n{\n    $resource = \"$this->_device-$this->_whatsAppVer-$this->_port\";\n    $data = $this->_writer->StartStream($this->_whatsAppServer, $resource);\n    $feat = $this->addFeatures();\n    $auth = $this->addAuth();\n    $this->sendData($data);\n    $this->sendNode($feat);\n    $this->sendNode($auth);\n$this->processInboundData($this->readData()); //I don't receive any data here, so I can not generate the AuthResponse\n$data = $this->addAuthResponse();\n$this->sendNode($data);\n$cnt = 0;\ndo\n{\n    $this->processInboundData($this->readData());\n} while (($cnt++ < 100) && (strcmp($this->_loginStatus, $this->_disconnectedStatus) == 0));\n}\nAny idea of what happens?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10104456.\n. hermanho,\n\nThanks for your contribution! I really appreaciate your work. Please I invite you to request a pull to the master branch of WhatsAPINet at https://github.com/perezdidac/WhatsAPINet\nRegards,\n. Great, I will also test it tonight :)\nRegards,\n\nD\u00eddac P\u00e9rez\n2012/11/7 hermanho notifications@github.com\n\nI have tested the login but I am not sure it can send a message. So just\nkeep hold it until the testing is finished. may be someone can help to test\nthe other function.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10140773.\n. \n",
    "sasham5": "When I run WhatsAppPort proj,  I can log in and send messages fine, but I am getting \"Nullable object must have a value\" in \npublic FMessage.Key Key()\n            {\n                return new FMessage.Key(this.remote_jid, this.from_me.Value, this.id);\n            }\ncalled from \nWhatsAppApi.Response.MessageRecvResponse.TypeChat()\nwhen it is receiving a message sent to it.\nAny ideas?\nThanks.\n. ",
    "saptanhsgu": "Hi,\nI am planning to do some integration with WhatsApp in my one of of the application.\nCan i take some part of you codes and use them as a start up.\nIs there any legal issue.\n. ",
    "eitangot": "Hi,\nReally great project.\nI am trying to run the \"WhatsTest\" project and i fail the \"wa.Connect();\"\nany idea how I can fix this?\n. thanks\n. ",
    "rnieves": "I would like to use and integrate this solution, unfortunately I can not find the form for password loguearme who can provide me?\nstring password = \"K / 1 **** yeix87Q =\" ;/ / password v2\nMy gratitude and I hope to help with the development of this library\n. Thnks.\n. I have problems with this nickname where I get it because \"WhatsApiNet\" gives me UNAUTHORIZED\n. ",
    "fredilopez": "necesito ayuda para generar el registro para poder usar las api\n. ",
    "pareta2": "Hello Can any one help me \nHow can i verify a number is on whatsapp or not using this Application. \nSuppose if i enter dummy number and then a real number. \nActually I do have list of thousands of number and i want to extract whatsapp numbers..Please tell me how can i  do that.\n. whats your email id mine is shubhampareta@hotmail.com\nPlease share me the link where it has been answered..I cannot find it.\n. please drop me an email on shubhampareta@hotmail.com\n. Is this code still works??? After takeover of facebook on whatsapp??\nOn Sun, Jun 7, 2015 at 1:29 PM, mohammad3n notifications@github.com wrote:\n\n@hpatel4u https://github.com/hpatel4u Do you know how to create a group\nand send a message to a group?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-109715276\n.\n\n\nShubham Pareta\n       (INDIA)\n. I tried the same code when facebook just bought whatsapp. It was not\nallowing me to login after that i did not tried. Now i will try once again.\nOn Mon, Jun 8, 2015 at 1:56 PM, mohammad3n notifications@github.com wrote:\n\nYes. It works for me.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-109905377\n.\n\n\nShubham Pareta\n       (INDIA)\n. ",
    "zainsheikh": "Hi,\nI am facing a problem when sending an image using the method WhatSocket.Instance.SendMessageImage(GroupID, Bytearray, WhatsAppApi.ApiBase.ImageType.PNG)\nImage used is attached.\nI am using the following code to convert the image to bytes array \npublic static byte[] ImageToByteArray(string imagefilePath)\n        {\n            try\n            {\n                System.Drawing.Image image = System.Drawing.Image.FromFile(imagefilePath);\n                byte[] imageByte = ImageToByteArraybyImageConverter(image);\n                return imageByte;\n            }\n            catch (Exception e)\n            {\n                return null;\n            }\n        }\nprivate static byte[] ImageToByteArraybyImageConverter(System.Drawing.Image image)\n    {\n        try\n        {\n            ImageConverter imageConverter = new ImageConverter();\n            byte[] imageByte = (byte[])imageConverter.ConvertTo(image, typeof(byte[]));\n            return imageByte;\n        }\n        catch (Exception e)\n        {\n            return null;\n        }\n    }\nAn exception is returned when the line WhatSocket.Instance.PollMessages() is executed in ProcessMessages() method.\nException returned is\nBinTreeNodeReader->readListSize: Invalid token 19\n   at WhatsAppApi.WhatsSendBase.processInboundData(Byte[] msgdata, Boolean autoReceipt)\n   at WhatsAppApi.WhatsSendBase.pollMessage(Boolean autoReceipt)\n   at WhatsAppApi.WhatsSendBase.PollMessages(Boolean autoReceipt)\n   at WhatsAppMessenger.WhatsAppClient.ProcessMessages(Object sender, DoWorkEventArgs args) in \"process messages\"\nAlso whatsapp gets disconnected after sendmessageimage is called.\nI have also tried using .jpg image but the image is still not sent successfully.\n\n. Hi shirioko\nThank u for such a quick reply. I really appreciate that.\nI am still not able to send message successfully. This time the code gets stuck on this.pollmessage() in the UploadFile() method. It took  almost 7 mins to get a return value from this method. The problem is that whatsapp client gets disconnected after 5 mins when there is no activity done. So when it tries to send a message after the file has been uploaded, it cant send it as the client has already been disconnected.\nIs there a method by which I can increase the timeout of the whatsapp client so it does not get disconnected after the timeout? \nAlso I know that I would be asking for much more than I should but it would be great if u include the method of sendmessageimage() in your existing test application so that I can see how it is done perfectly.\n. Hi shirioko\nCan i please have a feedback on the above posted query?\n. Hi bekeer020,\nThe code written in the last comment of shirioko helped me in solving this problem. Create a method to keep a background thread running which keeps calling an event of whatsapp and keeps it alive. Make sure that u have the Thread.Sleep(not more than 240000).\nAlso make sure that u subscribe to the ondisconnect event of whatsapp. Once this event is fired, call the checklogin function again and create new instance of whatsapp socket followed by connect and login And finally dont forget to resubcribe to all the events of whatsapp again.\nHopefully this will help u solve ur problems \n. zainahmed@my.web.pk\n. ",
    "mohsenfathi": "why my post do not show or deleting ????\n. are you sure ????\nsee this page : http://info.netsc.ir/viber/\nthey write this application .. !!!!\nand why i am obnoxious ???\n. i can't speak English well .\nso i can't understanding what are you say exactly .\n\u061f\u061f\u061f\u061f\u061f\u061f OR !!!!!!! is my habit . excuse .\nOK ... Bye \n. ",
    "bekeer020": "Dear shirioko I download your project \nhttps://github.com/shirioko/WhatsAPINet\nbut after login successfully show me in whatsup in my mobile  the status is connected\nbut after around 4 or 5 minutes its disappear that means disconnect\nhow i can let the program always connected\ncan you help me Plz?\n. Dear zainsheikh\ncan you give me your email please?\n. ",
    "beljk": "Sir ... how to register .. i can't login \n. WART app doesn't work ... only one register and when try with another number doesn't work ..... and when login can't to login >> whats is problem .. my friend give me number with password and login oki but when using WART app to register .. i can't only Error message\n. I'm didn't work with php .. i'm .Net developer .\n. i have the same issue in my asp web app that hosted on Goddady vps server .. can you tell me whats wrong @thiagupct\n. ",
    "amanssit": "hello friends i am facing problem when i am sending message \non localhost its working fine but after uploading my asp.net website on godaddy server messaging not working even on sever its not login my whatsapp \nplz help me friends \nthanks in advance friends plz n (amanssit@gmail.com)\n. Hello\nAfter sending 10 message to diffent numbers , my number got block ,can u\nhelp me how to solve this problem\n. hello sir\nthank you sir for replying me , how can i solve this problem please help\nme out sir\nOn Wed, Oct 29, 2014 at 4:58 AM, mohammedkarman notifications@github.com\nwrote:\n\nhello all,\nhow can i get my whatsupp users from contact book using c#?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-60849862.\n. hi friends i want to get whatsapp password ,can any one help , i try with wart but its showing old version\n. can any one reply me , how to get whatsapp password\n\nOn Sat, Jun 6, 2015 at 4:38 PM, mohammad3n notifications@github.com wrote:\n\n@hpatel4u https://github.com/hpatel4u Thanks a lot. By the way the name\nof OnDeliveryByClient is changed to OnGetMessageReceivedClient and\nOnDeliveryByServer is changed to OnGetMessageReceivedServer.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-109565125\n.\n. \n",
    "mohammedkarman": "hello all,\nhow can i get my whatsupp users from contact book using c#?\n. ",
    "arkanoz": "pleas \nI'am want send get photo profile to whatsapp .net\n. pleas \nI'am want send get photo profile to whatsapp .net\n. how?\nfahmawi \nI'am knows how check ,but at get photo not rescive\nthe result is \"get_photo_0\"\n. ",
    "fahmawi": "Dirs,,,\nAny one knows how to check if receiver number exists and if he receiver the message ????\n. ",
    "ryadhh": "Hi @shirioko \nplease how can i send image ??? every time i try i have error ?\n. @mgp25  I'm working with c# .can you  help  me please.\n. ",
    "ithinkunome": "I used wart to generate the passowrd, but when I try to login with that password it says login failed.\nI tried to input my mobile number is differnet format but it didn't work. please help\nThanks\n. ",
    "ackid32": "Hi\nI struck with Login Failed - not authorised. Any help.\nHere is my code (in VB)\n```\n        Dim originalText = \"91999xxxxxx1\"\n        Dim binaryData = Encoding.ASCII.GetBytes(originalText)\n        Dim base64String = Convert.ToBase64String(binaryData)\n    Dim originalText1 = \"123456789444751\"\n    Dim binaryData1 = Encoding.ASCII.GetBytes(originalText1)\n    Dim base64String1 = Convert.ToBase64String(binaryData1)\n\n\n    Dim originalText3 = \"kPhone\"\n    Dim nickname As String = originalText3\n    Dim lsender As String = base64String\n    Dim password As String = base64String1\n\n    Dim wa As New WhatsApp(lsender, password, nickname, True)\n    AddHandler wa.OnLoginFailed, AddressOf wa_OnLoginFailed\n    wa.Connect()\n    wa.Login() ' here i got  the error\n\n```\nWhat is the mistake i commit?\n. ",
    "ngonlinh": "I have a website http://yeudongho.net/, i want when user booking after it will send to sms to Viber or Skype. How do you do it?\n. ",
    "kailash74": "SENT: \nSENT:   \nSENT: \nSystem.Exception: MAC mismatch on index 0! 12 != 214\n   at WhatsAppApi.Helper.KeyStream.DecodeMessage(Byte[] buffer, Int32 macOffset,\n Int32 offset, Int32 length) \nunable to sent images\n. hi vibhuti\nwould really appreciate if u can share the code\nas sending images and video was an issue for me\nOn Oct 27, 2015 10:13 PM, \"Vibhuti Singh\" notifications@github.com wrote:\n\nHow to send group message from c# api, i am able to send text, imaga,\nvideo, vCard to individual no.\nbut i want to create group it is not working..\nAny idea what i missed, i just called method SendGrouoChat and passed\nsubject\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/120#issuecomment-151563591\n.\n. using with .net api\n. Any known person to get the issue closed\n. @blueslmj  whats the version in ur device .. i think related to the version of android there is an issue\n. @mgp25  i am not able to sent and receive from console , i need to take to a webservice and get the phone numbers from the data .. to attach a specific report to the selected number ..is this possible..??\n. sorrry i am able to sent and receive pls ignore..it was a typo\n. can somebody suggest what would be wrong .. PLS.\n. OK FINE..\nTKS\n. \n",
    "erarijit": "Hi, Is the thread is still active?\n. @hpatel4u & @mohammad3n \nCan we see the msgs received in the chat window itself or in debug mode or save them in xml something?\n. @singhvibhuti\nCan you please share the code for i am able to send text, imaga, video, vCard to individual no.\n. Can you share your code?\n. ",
    "mohammad3n": "@hpatel4u\nThis code works fine. But I cant receive messages and when I send a message It does not give the delivery. Is there a way to fix these?\n. @hpatel4u Thanks a lot. By the way the name of OnDeliveryByClient is changed to OnGetMessageReceivedClient and OnDeliveryByServer is changed to OnGetMessageReceivedServer.\n. @hpatel4u Yes. The sample that you mentioned is working fine. \n@amanssit Download the source code from this link. https://github.com/hpatel4u/Chat-API-NET.\nOpen it in visual studio. Set the Windows Forms project as startup project. Run the application. In the first form click the Register button and follow the process.\n. @hpatel4u Do you know how to create a group and send a message to a group?\n. Yes. It works for me.\n. ",
    "greycells2008": "Hi, I am trying to read whatsapp messages using whatsapp API for .net. I have used pollMessages() and then trying to count the messages received, but I am not getting any messages. The whatsapp app from which I am sending the messages is showing the messages as delivered, but I can't seem to catch them in my application. Please tell me where I am going wrong. Here is my code:\n```\n        WhatsApp msg = new WhatsApp(number, password, nick);\n        msg.OnConnectSuccess += () =>\n        {\n        msg.OnLoginSuccess += (phoneNumber, data) =>\n        {\n            Console.WriteLine(\"Connection success!\");                                    \n        };\n        msg.OnLoginFailed += (data) =>\n        {\n            Console.WriteLine(\"Login failed: {0}\", data);\n        };\n        msg.Login();\n    };\n    msg.OnConnectFailed += (ex) =>\n    {\n        Console.WriteLine(\"Connect failed: {0}\", ex.StackTrace);\n        Console.WriteLine(\"Error: \", ex.Message);\n    };\n    msg.Connect();\n    Console.WriteLine(msg.ConnectionStatus.ToString());\n    for (int i = 0; i < 5; i++)\n    {\n        msg.PollMessages();\n    }\n    var hasmsg = msg.GetAllMessages();\n    Console.WriteLine(\"Number of messages: \" + hasmsg.Count());\n    msg.Disconnect();\n    Console.WriteLine(\"END\");\n    Console.ReadLine();\n\n```\n. Thanks a ton, it worked like a charm :) I knew I was missing something important!\n. Hi, I am trying to read messages using whatsapp API. The phone from which I am sending the message shows message delivered, but the app doesn't show any messages on pollMessages(). Please help me figure out where i am going wrong. Here's my code:\nWhatsApp msg = new WhatsApp(number, password, nick);\n            msg.OnConnectSuccess += () =>\n            {\n                Console.WriteLine(\"Connected\");\n                msg.OnLoginSuccess += (phoneNumber, data) =>\n                {\n                    Console.WriteLine(\"Connection success!\");\n};\n            msg.OnLoginFailed += (data) =>\n            {\n                Console.WriteLine(\"Login failed: {0}\", data);\n            };\n            msg.Login();\n        };\n        msg.OnConnectFailed += (ex) =>\n        {\n            Console.WriteLine(\"Connect failed: {0}\", ex.StackTrace);\n            Console.WriteLine(\"Error: \", ex.Message);\n        };\n        msg.Connect();\n        Console.WriteLine(msg.ConnectionStatus.ToString());\n        for (int i = 0; i < 5; i++)\n        {\n            msg.PollMessages();\n        }\n        var hasmsg = msg.GetAllMessages();\n. ",
    "Chitrakant-Sahu": "Please  anyone give me valid link for  downloading WhatsApp Api because above  given link doesn't  work when i click on link then page not found  error shown \nplease  give me valid  link \n. I want to implement  WhatsApp  with .net c# so please  give me a valid WhatsApp Api download link. It's urgent.\n. ",
    "EjRodrigo": "Hi Can you pls help me with my problem , i can't receive message from my application but its running . this is my code . This is so very important to me .. plssss help me .\nprotected void btnSend_Click(object sender, EventArgs e)\n        {\n            string from = \"+639061714515\";\n            string to = txtTo.Text;\n            string msg = txtMessage.Text;\n```\n        WhatsApp wa = new WhatsApp(from, \"EXWzzq2kmx6OTM10IBULrZ57/xg=\", \"Ej\", false, false);\n    wa.OnConnectSuccess += () =>\n    {\n        MessageBox(\"Connected to whatsapp...\");\n\n        wa.OnLoginSuccess += (phoneNumber, data) =>\n        {\n            wa.SendMessage(to, msg);\n            MessageBox(\"Message Sent...\");\n        };\n        wa.OnLoginFailed += (data) =>\n        {\n            MessageBox(\"Login Failed:\");\n        };\n        wa.Login();\n\n    };\n    wa.OnConnectFailed += (ex) =>\n    {\n        MessageBox(\"Connection Failed...\");\n    };\n    wa.Connect();\n}\npublic void MessageBox(string MessageBox) {\n    Page.ClientScript.RegisterStartupScript(Page.GetType(), \"Message Box\", \"<script language='javascript'>alert('\" + MessageBox + \"')</script>\");\n}\n\n}\n```\n}\n. what i supposed to do with that sir ? \nThis is my code sir . can you help me sir ?\nprotected void btnSend_Click(object sender, EventArgs e)\n        {\n            string from = \"+639061714515\";\n            string to = txtTo.Text;\n            string msg = txtMessage.Text;\n```\n        WhatsApp wa = new WhatsApp(from, \"EXWzzq2kmx6OTM10IBULrZ57/xg=\", \"Ej\", false, false);\n    wa.OnConnectSuccess += () =>\n    {\n        MessageBox(\"Connected to whatsapp...\");\n\n        wa.OnLoginSuccess += (phoneNumber, data) =>\n        {\n            wa.SendMessage(to, msg);\n            MessageBox(\"Message Sent...\");\n        };\n        wa.OnLoginFailed += (data) =>\n        {\n            MessageBox(\"Login Failed:\");\n        };\n        wa.Login();\n\n    };\n    wa.OnConnectFailed += (ex) =>\n    {\n        MessageBox(\"Connection Failed...\");\n    };\n    wa.Connect();\n}\npublic void MessageBox(string MessageBox) {\n    Page.ClientScript.RegisterStartupScript(Page.GetType(), \"Message Box\", \"<script language='javascript'>alert('\" + MessageBox + \"')</script>\");\n}\n\n}\n```\n}\n. ",
    "Mystpot": "I understand that no-one is really tracking this version of the API anymore as the PHP one is far more documented, however, I am relatively new to programming and I'd like to be able to use the .net version for a Windows Form. I see thats WhatsAppPort isn't fully completed, as I can send a message to a number but I cannot receive one. Is it better to work on the WhatsAppPort further, or should I try my hand at converting the WhatsTest console code to a Windows Form application?\n. ",
    "WHAnonymous": "@Mystpot use this https://github.com/mgp25/Chat-API-NET\n. Better use this: https://www.mgp25.com/downloads/pw.apk\n@rezanadimi72 Better use original sources\n. @janke184 everything is explained here: https://github.com/WHAnonymous/Chat-API\n. https://github.com/WHAnonymous/Chat-API\n. https://github.com/WHAnonymous/Chat-API\n. https://github.com/WHAnonymous/Chat-API\n. Sure! HERE is explained everything \nBtw, we don't support spammers\n. @shvburade use this instead: https://github.com/WHAnonymous/Chat-API\n. @shvburade use this repo to ask: https://github.com/WHAnonymous/Chat-API\n. use this instead: https://github.com/WHAnonymous/Chat-API\n. ",
    "ppiyushjv": "Hi,\nI am facing a problem when sending an image. \nI try to convert image to byte \n1.  byte[] img = File.ReadAllBytes(\"d:\\1.jpg\");\n2.  byte[] imageBytes = null;\n           using (MemoryStream ms = new MemoryStream())\n           {\n               using (Bitmap b = new Bitmap(\"d:\\1.jpg\"))\n               {\n                   b.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);\n               }\n               imageBytes = ms.ToArray();\n           }\nso please tell me how to send image by message\n. ",
    "nasiraftab": "Hi , I am looking for whatsApp Sender Working Exe / Source . \nAnyone have this and can let me know wow to get this ?\naftarizw1@gmail.com\nthanks . . \n. ",
    "munavvarhusein": "unable to sent images\nMAC mismatch on index 0! 224 != 9\nPlease Help.\n. ",
    "singhvibhuti": "How to send group message from c# api, i am able to send text, imaga, video, vCard to individual no.\nbut i want to create group it is not working..\nAny idea what i missed, i just called method SendGrouoChat and passed subject\n. Issue is with recipients, try to convert it in jid format..\nnumbar@s.whatsapp.net it will work.\nIf u face any other issue let me know.. \nAlso reply if it work\n.  plz help to create group, i am able to send message to group by getting group id. But when we create group pragmatically it is not returning group id.\n. I am also able to send text, image, audio, video n vCard to individual as well as group.\nIssue is with creating group pragmatically\n. ",
    "cexarmonroy": "Help with sending images please\n. ",
    "justplaystudios": "Hello,\nI work with C#, Visual Studios and Xamarin\nCan anybody tell me how I can connect to whatsapp\nI don't realy need the API, because i want my aplication to be similar with web.whatsapp,\nDo not need to create a new account, i want to connect to the existing account\nWhat I need is when i receive any message on whatsapp, to be forworded to my app, an i what to be able to rebly from my app. \nAll of this need the Original Whatsapp to be installed (to depend of it)\nThank you\n. ",
    "karaledhiraj": "hi,\n  I want to see what's app profile picture of existent contact in c#\n. ",
    "bastianonm": "@karaledhiraj me too!\nIs it still working?\n. ",
    "pacome22": "For me the same problem, but I neither can read. I login ok, but then 2 minutes later I get this:\nWarning: socket_read(): unable to read from socket [107]: Transport endpoint is not connected.....\n. My fault... In other computer works fine, sending and all. It was a conection problem.\n. ",
    "myebay18": "Can you describe it a little more?\nMy messages i'm sending still dont't come to the recipient.\n. ",
    "beldar": "146\n. Anyone else sniffed some traffic?\n. Tested with this dictionary and no luck, I think the magic bytes are still kicking...\n. @Zanooda they were using RC4 before, for more info: http://pastebin.com/g9UPuviz (line 45+)\n. Yeah, this looks nasty:\nTimeSpan utcNow = DateTime.UtcNow - FunXMPP.UnixEpoch;\nlong totalSeconds = (long)utcNow.TotalSeconds;\nnums.AddRange(Encoding.UTF8.GetBytes(totalSeconds.ToString()));\nAlso I think this new WAUTH-1 may be a Whatsapp AUTHentification v1.0 invented just for messing around, possibly the same as before but some timestamp to mess it up.\n. I now it's possible, check this out: http://websapp.net/ no clue on how they do it.\n. I just see some minor changes\nhttps://github.com/tgalal/wazapp/commit/189d755577588c31dee863de9f2b56a5e33dbf60\nChanges on version and user agent and a 1 for a 0...\nI thought they said there were major changes..\nEnviat des del meu iPhone\nEl 01/11/2012, a les 17:26, kurosch notifications@github.com va escriure:\nyou guys know that tgalal's wazapp got the patches from yappari/scorpius\nincluded so we could actually just revise their code to fix this.\nhttps://github.com/tgalal/wazapp\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9986182.\n. Try using the md5 of the double MAC adress, maybe they unified. Or maybe is\nexpecting that since the user agent is an iPhone\nEnviat des del meu iPhone\nEl 02/11/2012, a les 13:13, Waninkoko notifications@github.com va\nescriure:\nI'm working in the implementation of the protocol 1.2, and it's going good\nso far, but I'm having issues with the login authentification.\nFeatures are sent ok, auth request looks ok too, but when I reply to the\nchallenge I always get a 'non-authorized' as response.\nI'm using the phone number (with country code, without zeroes) as \"user\",\n\"iPhone-2.84\" as user agent, and the MD5 of the reversed IMEI as password\nto generate, along with the challenge data, the RC4 key to encode the\nchallenge response.\nI don't know what is missing in my implementation, I checked everything\ndozens of times and no idea.\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10012434.\n. I think the main question here is what are the differences between v1 and v1.2 protocol, if you care to expose.\nThanks.\n. That's brillian @waninkoko , as soon as I can i'll start hacking.\nThanks!\nOn Fri, Nov 2, 2012 at 9:26 PM, Waninkoko notifications@github.com wrote:\n\nHere is a quick explanation I wrote:\nhttp://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10029066.\n\n\nMart\u00ed\n. @waninkoko I've just finished reading, the only question that comes to mind is about the connection, what are finally the 2 'magic-bytes'  that have been jumping so much?\n. You think it's safe to assume they won't be changing the protocol again any\ntime soon?\nEnviat des del meu iPhone\nEl 02/11/2012, a les 22:16, Waninkoko notifications@github.com va\nescriure:\nMagic bytes are 0x01, 0x02\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10030557.\n. @jb425 you said you manage to get working the login part, can you fork/push your code?\nI'm trying here, but the server doesn't event respond to my 'auth' node... :(\n. Here's the RC4 I'm using BTW, as seen on the .net version, initialize with key, then cipher whenever you want.\n``` PHP\n<?php\n/\n * Port of WhatsApp's RC4 algorithm class\n \n * @author Mart\u00ed Planellas\n /\nclass RC4\n{\n    private $i = 0;\n    private $j;\n    private static $s = array();\npublic function RC4($key, $drop)\n{\n    $this->s = range(0,255);\n    $slength = count($this->s);\n    while ($this->i < $slength)\n    {\n        $this->s[$this->i] = $this->i;\n        $this->i++;\n    }\n    $this->j = 0;\n    $this->i = 0;\n    $klength = strlen($key);\n    while ($this->i < $slength)\n    {\n        $this->j = (($this->j + $this->s[$this->i]) + ord($key[$this->i % $klength])) % 256;\n        $this->Swap($this->s, $this->i, $this->j);\n        $this->i++;\n    }\n    $this->i = $this->j = 0;\n    $this->Cipher($drop,0,256);\n}\n\npublic function Cipher($data, $offset=0, $length=false)\n{\n    $ct = '';\n    if(!$length) $length = (strlen($data)|count($data));\n    while ($length-- != 0)\n    {\n        $this->i = ($this->i + 1) % 256;\n        $this->j = ($this->j + $this->s[$this->i]) % 256;\n        $this->Swap($this->s,$this->i, $this->j);\n        $ct .= $data[$offset++] ^ chr($this->s[($this->s[$this->i] + $this->s[$this->j]) % 256]);\n    }\n    return $ct;\n}\n\nprivate function Swap(&$a, $i, $j)\n{\n    $local = $a[$i];\n    $a[$i] = $a[$j];\n    $a[$j] = $local;\n}\n\n}\n?>\n```\n. I think it's just dummy data to initialize\n. @tribbolo share your code man!! MIT License!\n. @Dawnation no, I'm like @walter-white the server doesn't respond to me...\n. @saschagehlich no, it doesn't respond at all\n. @saschagehlich no, @waninkoko said the login handshake goes unencrypted.\n. I found out why i wasn't getting response, on the StartStream I got\nphp\n$this->_output = \"WA\";\n$this->_output .= \"\\x01\\x02\\x00\\x00\";\nAnd it must be\nphp\n$this->_output = \"WA\";\n$this->_output .= \"\\x01\\x02\";\n. The code is not up to date, but yeah that error es normal since it doesn't\nget the challenge.\nOn Tue, Nov 6, 2012 at 3:09 PM, walter-white notifications@github.comwrote:\n\n@beldar https://github.com/beldar I have downloaded your code and I\nhave changed the line $this->_output .= \"\\x01\\x02\\x00\\x00\"; for\n$this->_output .= \"\\x01\\x02\"; and is also not working. pretty weird...\nIn the other hand, I'm receiving now an Undefined offset: 1 in the\nchallenge array, and also an unknown \"nonce\" parameter on the challenge\narray. I guess I have to read it with the new structure of header.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10111625.\n\n\nMart\u00ed\n. @hermanho I'm trying to implement your code in PHP but when I began the connection I recieve a stream:error, like this:\n```\ntx WA\u022b\u2592\u2592iPhone-2.8.4-5222\ntx  \ntx    \ntx  \ntx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"346\nrx  \nrx  \n```\nDid you encountered this error? You know how to solve it?\n. @hermanho my StartStream:\n``` php\npublic function StartStream($domain, $resource)\n    {\n        $attributes = array();\n        $this->_output = \"WA\";\n        $this->_output .= \"\\x01\\x02\";\n    $attributes[\"to\"] = $domain;\n    $attributes[\"resource\"] = $resource;\n    $this->writeListStart(count($attributes) * 2 + 1);\n\n    $this->_output .= \"\\x01\";\n    $this->writeAttributes($attributes);\n    $ret = $this->_output;\n    $this->_output = \"\";\n    return $ret;\n}\n\n```\nI noticed in your code there's a flushBuffer, with the encryption enabled, so I tried also:\n``` php\npublic function StartStream($domain, $resource)\n    {\n        $attributes = array();\n        //$this->_output = \"WA\";\n        //$this->_output .= \"\\x01\\x02\";\n    $attributes[\"to\"] = $domain;\n    $attributes[\"resource\"] = $resource;\n    $this->writeListStart(count($attributes) * 2 + 1);\n\n    $this->_output .= \"\\x01\";\n    $this->writeAttributes($attributes);\n    $ret = $this->flushBuffer();\n    $ret = \"WA\\x01\\x02\".$ret;\n    $this->_output = \"\";\n    return $ret;\n}\n\n```\nBut with the same result stream:error/stream:error\n. @hermanho  nevermind I found the bug, but now the server doesn't respond -__-\nResponds only with a 0x0a ...\n. @hermanho yes, the second version does that, since the flushBuffer does a writeInt24, but it doesn't work either.\n. I'm sending this (pasting just the first part):\n```\n00000000  0a 57 41 01 02 f8 05 01  c8 ab a5 fc 11 69 50 68  |.WA..........iPh|\n00000010  6f 6e 65 2d 32 2e 38 2e  32 2d 35 32 32 32 00 00  |one-2.8.2-5222..|\n```\nIt's not correct?\n. My flushBuffer:\nphp\nprotected function flushBuffer($enc=true)\n    {\n        $size = strlen($this->_output);\n        if($enc && $this->_rc4){\n            echo \"Encrypting out\\n\";\n            $crypt = $this->_rc4->Cipher($this->_output,3,$size-3);\n            $hash = substr(hash_hmac(\"sha1\",$crypt,$this->_sessionK,true),0,4);\n            $this->_output = $hash.$crypt;\n            $this->writeInt24($size); //Header\n            $this->_output |= 0x8; //Encrypt flag\n        }else{\n            $this->writeInt24($size);\n        }\n        $ret = $this->_output;\n        $this->_output = \"\";\n        //file_put_contents(\"log_buffer\", $ret,FILE_APPEND);\n        return $ret;\n    }\nOn the StartStream case would fall on the else case, since the rc4 is not initialized.\n. @hermanho  Yeah that must be it. Thanks!\n. @hermanho I realize now that I'm not reading correctly, I compared with your code and the only main difference is the substitution of readString for readBytes.\nCan you explain why and how it works?\n. Ok, the bug was because long time ago I messed with isListTag, now I'm reading wohoo! But I get a non-authorized failure.\nNow the next issue is figuring out if the authResponse is correct here's my code:\n``` php\nprotected function addAuthResponse()\n    {\n        echo \"Trying to add Auth Response\\n\";\n        while(!$this->_challenge){\n            $this->PollMessages();\n            sleep(500);\n        }\n        $this->_sessionK = pbkdf2(\"sha1\", $this->EncryptPassword(), $this->_challenge, 16, 20,true);\n        //Init RC4\n        $drop = range(0,255);\n        $this->RC4 = new RC4($this->_sessionK, $drop);\n    $buffer = $this->_phoneNumber.$this->_challenge.time();\n    $crypt = $this->RC4->Cipher($buffer,0,strlen($buffer));\n    $this->_writer->addRC4($this->RC4);\n    $this->_reader->addRC4($this->RC4);\n    $hash = substr(hash_hmac(\"sha1\",$crypt,$this->_sessionK,true),0,4);\n    $resp = $hash.$crypt;\n    $respHash = array();\n    $respHash[\"xmlns\"] = \"urn:ietf:params:xml:ns:xmpp-sasl\";\n    $node = new ProtocolNode(\"response\", $respHash, NULL, base64_encode($resp));\n    return $node;\n}\n\n```\n. I tried that too\nThe problem is that i don't have anyway to notice if the whole encryption stuff it's working properly or not.\n. @GabrielBinato this is protocol 1.1\n. @tgalal I'm pretty sure it will help\n@spookyman I can connect the server but after I send the authRespons i get a not-authorized failure.\n@hermanho \n1. They're hex bytes do they even have an encoding?\n2. I ended up using this one: http://code.google.com/p/rc4crypt/ since after a lot of testing it's the only one that encrypts and decrypts correctly, although it doesn't have offset, length, but on the bright side they  pack the password in hex.\n3. I used this one: https://defuse.ca/php-pbkdf2.htm I have no idea if it works right.\n4. http://www.php.net/manual/en/function.time.php\n. I tried to pass the response through utf8_encode but still no luck...\n. As I read from here: http://stackoverflow.com/questions/1305254/howto-set-php-socket-write-and-socket-read-character-encoding\nThese functions transmit the string unconverted (i.e. byte by byte), so you cannot set a character encoding. But this means as well, that you don't have to. You'll have the exact same string on the other side with the exact same encoding.\nSo no encoding, at least in PHP.\n. I'm sending this after all cyphers and encryptions and shit:\n``` sh\n[root@marchine php] echo \"271b0\u2592MR?\u2592\u2592\u2592\u2592s\u2592\u2592\u2592| \u2592jT\u2592O\u2592%\u2592i\u2592G]&Mm\u2592PM\u2592\u2592\" | hexdump -C\n00000000  32 37 31 62 30 e2 96 92  4d 52 3f e2 96 92 e2 96  |271b0...MR?.....|\n00000010  92 e2 96 92 e2 96 92 73  e2 96 92 e2 96 92 e2 96  |.......s........|\n00000020  92 7c 20 e2 96 92 6a 54  e2 96 92 4f e2 96 92 25  |.| ...jT...O...%|\n00000030  e2 96 92 69 e2 96 92 47  5d 26 4d 6d e2 96 92 50  |...i...G]&Mm...P|\n00000040  4d e2 96 92 e2 96 92 0a                           |M.......|\n00000048\n```\n. I just realized I didn't pass the encryption key to the hmac hash, so the real output it's like this (46 bytes):\n00000000  0a 1c 6f 91 24 90 ef 59  ad 01 13 fa cc ad 12 e7  |..o.$..Y........|\n00000010  6a 30 d1 b6 04 54 8c 6d  89 4d cb a4 04 cd 04 f0  |j0...T.m.M......|\n00000020  ec f5 bc 99 46 92 92 8b  23 0a 69 8a 05 f1        |....F...#.i...|\n0000002e\nBut still not-authorized..... -____-\n. This isthe current state of my function:\nphp\nprotected function addAuthResponse()\n    {\n        echo \"Trying to add Auth Response\\n\";\n        while(!$this->_challenge){\n            $this->PollMessages();\n            sleep(500);\n        }\n        $this->_sessionK = pbkdf2($this->EncryptPassword(), $this->_challenge, 16, 20,\"sha1\");\n        $buffer = $this->_phoneNumber.$this->_challenge.time();\n        $crypt = rc4crypt::encrypt($this->_sessionK,$buffer,1);\n        $this->_writer->setKey($this->_sessionK);\n        $this->_reader->setKey($this->_sessionK);\n        $hash = substr(hash_hmac(\"sha1\",$crypt,$this->_sessionK,true),0,4);\n        $resp = $hash.$crypt;\n        file_put_contents(\"challenge\", $resp,FILE_APPEND);\n        $respHash = array();\n        $respHash[\"xmlns\"] = \"urn:ietf:params:xml:ns:xmpp-sasl\";\n        $node = new ProtocolNode(\"response\", $respHash, NULL, $resp);\n        return $node;\n    }\nBut still not working...\n. I dump it on a file and then print it with hexdump -C , but since the challenge and password would be different I don't see the point on comparing.\n. @saschagehlich why would they be readable if they've been hashed in sha1?\nI guess it depends on the last parametter of the hash_hmac function if you define true raw_output you'll have unformated bytes (the one I'm using last) if you set it to false you'll have readable hex digits.\n. No, I pass the false parameter to the writer, so it doesn't get encrypted:\nphp\n$data = $this->addAuthResponse();\n$this->processOutboundData($data,false);\n. @hermanho you can take a look with all context if you want: https://github.com/beldar/WhatsAPI/blob/master/src/php/whatsprot.class.php#L75\n. @saschagehlich what did you change to make it (apparently) work?\n. @saschagehlich I believe you have to use a password to hash with sha1 (http://php.net/manual/es/function.hash-hmac.php) and that password is the session/encryption key.\nWaninkoko mentions it on the explanation:\n\"This is the key used to encrypt and decrypt nodes during the entire session (it is also used for the HMACSHA1 algorithm),\"\nBut doesn't reflect it on the pseudocode examples, but I believe you need to hash with a password I'm not used to this code notation but I think you don't.\n. I put my phone in \"airplane mode\" and It works like a charm!!\n@waninkoko great work and great code! It looks so easy, damn!\n. I think thats stuff for another issue, we burn this one pretty good ;)\nEl 07/11/2012, a les 22:00, eslamo notifications@github.com va escriure:\nany ideas here .. after the first successfully test i send the message with\nno errors but i can't receive it on the other side\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10164826.\n. @jandrito80 could you paste de xml node from receiving an image?\nEl 08/11/2012, a les 13:14, jandrito80 notifications@github.com va\nescriure:\n@waninkoko https://github.com/waninkoko It's great. It works perfectly. I\ncan send and receive messages.\nThank you very much.\nBut I have a small query.\nWhen I receive a picture, the thumbnail appears to be encrypted. How can\ndecrypted?\nAgain, thank you very much\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10185880.\n. @jandrito80 I'm asking you to put the xml code from the node received by the server it should look something like this:\nrx  <message to=\"****@s.whatsapp.net\" type=\"chat\" id=\"*****19-1\">\nrx    <x xmlns=\"jabber:x:event\">\nrx      <server></server>\nrx    </x>\nrx    <media xmlns=\"urn:xmpp:whatsapp:mms\" type=\"image\" url=\"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\" file=\"DSC02471.jpg\" size=\"55508\"></media>\nrx  </message>\n(I just made this one up) Do you have a real one (rx, not tx).\n. @jandrito80 yeah, I edited it, I forgot! And yes I am spanish.\n. @alejandro-anv download the latest fix\n. @alejandro-anv https://github.com/venomous0x/WhatsAPI/commit/64f3b253a2846cbc4bb7a300cb8758b3addf110d 7 hours ago\n. What's with people pushing their phone number and password...\n. I noticed this too, maybe they changed the way you send mms... maybe @waninkoko can give some light since he desciphered the protocol...\n. #146\n. @dawnation @waninkoko @kerby82 \nI don't think it's about the size now, since I created a very very low quality thumnbnail which the base64 weights like 2kb and the server responded me with the received message:\n``` sh\ntx  \ntx    \ntx      \ntx    \ntx    base64 data\ntx  \nrx  \nrx  \nrx    \nrx  \n```\nBut the phone never received, I think they changed the node format for media, maybe the thumbnail is a url now instead of raw data, the image without the thumbnail sends fine tho.\nMaybe someone could sniff actual whatsapp traffic, send an Image and try to decode it.\n. @kerby82 I succefully managed to send an image with a 40x40 gif thumnail that only weights 80bytes but I believe this works only for support to the old protocol.\nThe problem is that pollingMessages (and receiving them) fails for me, but the think I want to see is an image node received by WhatsAPI then we could see the format.\n. @kerby82 shure, it's just a black 40x40 square :P\nR0lGODlhKAAoAIAAAAAAAP///yH5BAAAAAAALAAAAAAoACgAQAInhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6ziMFADs=\n. @arne-e I'm sending images but the phone is not receiving them... did you received the image in your phone with working thumb?\n. @arne-e can you paste the xml node the code sent? Like this https://github.com/venomous0x/WhatsAPI/issues/140#issuecomment-10187890\n. And the node...? Maybe you have to pass the debug=true to the WhatsProt Class:\nphp\n$w = new WhatsProt(\"***********\", \"***************\", \"John Doe\", true);\n. I don't get it, I send the exact same node and can't receive it...\nEl 09/11/2012, a les 15:34, arne-e notifications@github.com va escriure:\nive got the node, but when pasting here it looks shitty :D\nwait...\nhttp://pastebin.com/ZAN73MDp\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/140#issuecomment-10228168.\n. @arne-e you were right it was this all along I just couldn't see there was a $ missing\n. Maybe it's about the received node, the server always sends to the client.\nMaybe you must wait for the received node before sending another message.\n. @arne-e maybe the sleep works because while the script sleeps, the received node is received.\nAnd in the last case the second message doesn't send 'cause the received node wasn't received yet.\nI'm just theorizing, but I would take a look to this: https://github.com/koenk/whatspoke/blob/master/doc/messages.md it's old protocol but the dynamic i think is the same.\nIf you want to go more deep: https://github.com/koenk/whatspoke/blob/master/doc/funxmpp.txt\n. It's not if you pull it more if you send something before the server can send it\n. I'm implementing a WaitforReceipt() function\nEl 10/11/2012, a les 15:32, Andrea notifications@github.com va escriure:\n@arne-e https://github.com/arne-e unfortunately this is not the solution.\nI would expect to implement the correct way to check if everything is\ndelivered in the right way. Sleep 1 second is not a solution an can work\nbad in certain condition, especially considering the network issue you can\nhave\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/140#issuecomment-10255647.\n. Maybe this is why the MessageImage feature doesn't work?\n. @Starsong I already did, it's the same way as WhatsAPI.\n. @eslamo @Dawnation I figured it out, well at least how to send more data, looking at this trace https://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10193915\nYou have to add to the media node the attribute encoding=\"raw\" then you can send more bytes, but I think in order to work the image sending you have to provide some kind of hash no clue on how is generated its not md5,crc,sha1 or else, maybe it's rehashed.\n. I just managed to do it in 2 ways\n1. Sending the image without the thumbnail, hence empty node. In which case\non the phone appears a blank thumbnail but a correct full size image.\n2. Sending a thumbnail of < 320 byted which was a back 40x40 pixels square\nbut I dont think you can make a proper thumbnail that way.\nSo no desired solution\nEl 08/11/2012, a les 21:55, Andrea notifications@github.com va escriure:\n@beldar https://github.com/beldar so you figured out how to send image?\ncan you provide the php code?\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/146#issuecomment-10204510.\n. It was this all along... https://github.com/venomous0x/WhatsAPI/pull/157/files\n. I think this is related to #147 and #102 and maybe others.\nI've been able to solve this by digging a little bit into the protocol, I realized that what was wrong was the message id, until now we create the msgid with time().'-1' , now the '-1' part can't be always the same must be incremental.\nIt's something (among others) I implemented within the code, you can take a look here: https://github.com/beldar/WhatsAPI/commit/ca4be92b37044e028bb01e349734d5fc33233fc3\n. @g0g0l  You don't have to sleep if you increment the id :)\n. Have you tried the last version of WhatsAPI? Maybe with the outQueue which waits until the message is received by the server to send the next one you won't face this problem.\n. @jonnywilliamson Thank you for making my life easy.\n. @serweb ves a mirar el archivo testprotocol.php ah\u00ed hay ejemplos, pero te\nrecomiendo que cojas el codigo de mi fork de WhatsAPI, ya que la version de\naqui no esta preparada para el nuevo sistema de passwords.\nEl dijous 7 de mar\u00e7 de 2013, serweb ha escrit:\n\nExiste algun peque\u00f1o instructivo para ejecutar el whatsapi en php? o py?\nuna vez descubierto el password de una cuenta como se prosigue?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/238#issuecomment-14543858\n.\n\n\nMart\u00ed\n. Hi there,\nThis happened to me too, after sending 4 messages to myself, there're some new rules and limitations we're not aware of, and I don't think it's about the number of messages, but the way they're sent.\nSince there wasn't any WhatsApp update recently, the control must be on the strictness of the protocol, I think there may be 2 key factors:\n1) The time lapsed between messages.\n2) The composing state before a message is sent.\nI can test this theory tho, since my dev number has been blocked :(\n. I already tried Line, they use a custom proprietary protocol and no API, i\nthink the only ones with something you can call an API are those based on\nXMPP such as Facebook Messenger, Gtalk, etc\nEl dimecres 20 de mar\u00e7 de 2013, kingk110 ha escrit:\n\nGuys why don't we move on other free messaging applications maybe they'll\nhave a true payed service that you can send large number to your\nsubscribers. I heard about line. Can't we try it using sockets as if we\nhave done here or maybe viber!!!\nIf I was the developer of this api I would try to do another one but I\ndon't have the professional skills to do that.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/251#issuecomment-15161430\n.\n\n\nMart\u00ed\n. Looks like you deserve it...\nOn Wed, Mar 20, 2013 at 6:22 PM, kingk110 notifications@github.com wrote:\n\nguys read what whatsapp support answered when I asked for a paid service\nthat let me send big number of messages for my friends:\n\"\nThanks for your message. We have received a large volume of complaints\nabout your account. We cannot provide further information about these\ncomplaints as this would be a violation of user privacy. As we have reason\nto believe that your account activity has violated our Terms of Service (\nhttp://www.whatsapp.com/legal) we have exercised our right to ban your\naccount.\nWe have no further comments at this time.\n\"\nwhat a fucking company !!! :@\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/251#issuecomment-15190250\n.\n\n\nMart\u00ed\n. ",
    "Pkaisers": "Yes, login seems to be broken once again.\n. ",
    "dd12345772": "Yup, getting the same - the last successful login I had was about 11 hours ago. (22:00 CAT 30 Oct)\n. I've looked at issue 36 (https://github.com/venomous0x/WhatsAPI/issues/36) which seemed to be a similar issue, but not sure if it is exactly the same. I've tried to see if there is something there to help with the current issue, but can't seem to make any progress. \nAnybody else have any ideas?\n. The bytes are in protocol.class.php line 349 \u2013 think that is the place\nFrom: spookyman [mailto:notifications@github.com] \nSent: 31 October 2012 11:29 AM\nTo: venomous0x/WhatsAPI\nCc: dd12345772\nSubject: Re: [WhatsAPI] Login broken (#126)\nwell maybe it's a algorythm depending on unixtimecode (another idea!?)\ncan someone give me the place in the php code where i find the magic byte setting ?\n\u2014\nReply to this email directly or view it on GitHub https://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9938007 . \nhttps://github.com/notifications/beacon/XhXHY7t7kGQDcUWgKV66hvRh19RFqluPFZYdaVfVyfTFAHXWo7iPW6qkp7TCjIuN.gif \n. Great @Tarek! Are you making any progress? If you need any help, just post what you have that is working and maybe a few more could help get to the bottom of this! Thanks!\nFrom: Tarek [mailto:notifications@github.com] \nSent: 01 November 2012 09:17 AM\nTo: venomous0x/WhatsAPI\nCc: dd12345772\nSubject: Re: [WhatsAPI] Login broken (#126)\nI successfully logged in, now working on encrypt/decrypt streams\n\u2014\nReply to this email directly or view it on GitHub https://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9972619 . \nhttps://github.com/notifications/beacon/J6T91GIPIyhU-8ti4GCGP8_UJGsS86Amn52vTLC09Scnt9_KpRmIlzsr-iUxLW5L.gif \n. ",
    "GabrielBinato": "I have a same problem =[\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \ntx  dXNlcm5hbWU9IjU1MTg5NjMxNTk2NiIscmVhbG09InMud2hhdHNhcHAubmV0Iixub25jZT0iIixjbm9uY2U9ImRmZDViMDI5LTEwYTAtNDE5Zi1hN2UxLWFmOWU3MzU4ZWE0MSIsbmM9MDAwMDAwMDEscW9wPWF1dGgsZGlnZXN0LXVyaT0ieG1wcC9zLndoYXRzYXBwLm5ldCIscmVzcG9uc2U9N2ZjMWI0ZGMyNDlhYTUzYTc2YWE5ZGRmNjgyYWExMGQsY2hhcnNldD11dGYtOA==\n. This site not work to http://whatsapp.filshmedia.net \n. I Decrypt Whatsapp android apk last version and post for 4shared, Please help me analyse the source, in file exist editor, simple descompact  open jd-gui.exe and choice whatsapp.jar \nhttp://www.4shared.com/rar/7YaDyMF9/Whats_Decrypt.html?\nTks\n. You need create a free account in 4shared,\n. https://rapidshare.com/files/3629114277/Whats_Decrypt.rar \n. look this https://github.com/amoralico/mojowhatsup/blob/master/plugin-c%2B%2B/src/WALogin.cpp\n. std::string WALogin::getResponse(const std::string& challenge) {\n    unsigned char md5_buffer[MD5_DIGEST_SIZE];\n```\nsize_t i = challenge.find(WALogin::NONCE_KEY);\ni += WALogin::NONCE_KEY.length();\nsize_t j = challenge.find('\"', i);\nstd::string nonce = challenge.substr(i,j-i);\nstd::string cnonce = str(absLong(randLong()), 36);\n_LOGDATA(\"cnonce = %s\", cnonce.c_str());\nstd::string nc = \"00000001\";\nstd::string cinfo(this->connection->user + \":\" + this->connection->domain + \":\" + this->connection->password);\n_LOGDATA(\"cinfo = %s\", cinfo.c_str());\nByteArrayOutputStream bos;\n_LOGDATA((char) md5digest((unsigned char) cinfo.data(), cinfo.length(), md5_buffer), MD5_DIGEST_SIZE);\nbos.write(md5digest((unsigned char*) cinfo.data(), cinfo.length(), md5_buffer), MD5_DIGEST_SIZE);\nbos.write(58);\nbos.write(nonce);\nbos.write(58);\nbos.write(cnonce);\n// bos.print();\nstd::string digest_uri = \"xmpp/\" + this->connection->domain;\nstd::vector A1 = bos.toByteArray();\nstd::string A2 = \"AUTHENTICATE:\" + digest_uri;\nstd::string KD((char) bytesToHex(md5digest(&A1->front(), A1->size(), md5_buffer), MD5_DIGEST_SIZE), MD5_DIGEST_SIZE * 2);\nKD += + \":\" + nonce + \":\" + nc + \":\" + cnonce + \":auth:\" + std::string((char) bytesToHex(md5digest((unsigned char) A2.data(), A2.size(), md5_buffer), MD5_DIGEST_SIZE), MD5_DIGEST_SIZE*2);\n_LOGDATA(\"KD = %s\", KD.c_str());\nstd::string response((char) bytesToHex(md5digest((unsigned char) KD.data(), KD.size(), md5_buffer), MD5_DIGEST_SIZE), MD5_DIGEST_SIZE*2);\n_LOGDATA(\"response = %s\", response.c_str());\nstd::string bigger_response;\nbigger_response.append(\"realm=\\\"\");\nbigger_response.append(this->connection->domain);\nbigger_response.append(\"\\\",response=\");\nbigger_response.append(response);\nbigger_response.append(\",nonce=\\\"\");\nbigger_response.append(nonce);\nbigger_response.append(\"\\\",digest-uri=\\\"\");\nbigger_response.append(digest_uri);\nbigger_response.append(\"\\\",cnonce=\\\"\");\nbigger_response.append(cnonce);\nbigger_response.append(\"\\\",qop=auth\");\nbigger_response.append(\",username=\\\"\");\nbigger_response.append(this->connection->user);\nbigger_response.append(\"\\\",nc=\");\nbigger_response.append(nc);\n_LOGDATA(\"biggerresponse = %s\", bigger_response.c_str());\ndelete A1;\nreturn bigger_response;\n```\n}\n. changes http://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n. Poll Message Try receive message error\nFatal error: Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 59' in /var/www/whatsapp/protocol.class.php:268\nStack trace:\n0 /var/www/whatsapp/protocol.class.php(214): BinTreeNodeReader->readListSize(59)\n1 /var/www/whatsapp/protocol.class.php(133): BinTreeNodeReader->nextTreeInternal()\n2 /var/www/whatsapp/whatsprot.class.php(150): BinTreeNodeReader->nextTree('??6?Z???G1?5{??...')\n3 /var/www/whatsapp/whatsprot.class.php(226): WhatsProt->processInboundData('??6?Z???G1?5{??...')\n4 /var/www/whatsapp/demo/whatsapp2.php(55): WhatsProt->PollMessages()\n5 {main}\nthrown in /var/www/whatsapp/protocol.class.php on line 268\n. Problem occurs when there are messages offline, if you get them on the phone and then open the pollmessage he receives all messages, but if you answer a message on the next it starts giving the error again. Apparently something with the time it takes to answer the message and if there messages offline.\nWhen this occurs the error message does not appear\nrx  ib from=\"s.whatsapp.net\"\nrx    offline count=\"0\"/offline\nrx  /ib\n. ",
    "wreh": "same error here as well, I was using it perfectly till yesterday...\n. ",
    "dleivag": "If the issue is like that,  the solution should be just  find the new \ntwo misterious bytes, but, it has to be any way to do it automaticaly \nbecause smartphone clients are still working normaly.. maybe whassup \nservers send the new two bytes in the login response ?\nI'm just thinking....\nEl 31/10/12 10:13, dd12345772 escribi\u00f3:\n\nI've looked at issue 36 (venomous0x/WhatsAPI#36 \nhttps://github.com/venomous0x/WhatsAPI/issues/36) which seemed to be \na similar issue, but not sure if it is exactly the same. I've tried to \nsee if there is something there to help with the current issue, but \ncan't seem to make any progress.\nAnybody else have any ideas?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9937534.\n. Bad news.  A friend has told me that two days ago he had to update \nwhatsup client to make it works because a message was shown telling that \n\"Whatsup needs to be update\", and he had to update it to use it.\nThis would mean that maybe there are significant changes in the protocol...\n\nEl 31/10/12 10:29, spookyman escribi\u00f3:\n\nwell maybe it's a algorythm depending on unixtimecode (another idea!?)\ncan someone give me the place in the php code where i find the magic \nbyte setting ?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9938007.\n. that's great, he had scary me.\n\nEl 31/10/12 10:35, spookyman escribi\u00f3:\n\ni didn't get an update the last days and it still works on my mobile\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9938171.\n. I can't do it now (at work too) .  But, maybe we could try a bruteforce, \nchanging the magincbyte.\nThat way we can know if it is a magicbyte problem or not.\n\nEl 31/10/12 11:15, spookyman escribi\u00f3:\n\nsrc/php/protocol.class.php line #339\nbut it doesn't work @jean151515 https://github.com/jean151515\nit has to be the right magicbyte\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-9939328.\n. at the end.. I've got the login response.. but is not well formed..\nI continue testing...\n\n\nstream:error\n\n/stream:error\n. same.\nEl 05/11/12 17:39, spookyman escribi\u00f3:\n\nWA down 4 me at the moment ! (on my mobile !!)\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10077469. \n. About the rc4 algothitm..\nWhat is drop param ?\n\nI still get no response in the login message.. :(\nEl 05/11/12 18:32, spookyman escribi\u00f3:\n\nseems to be up again - try your code once again m8s\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10079688. \n. nothing...  server does not respond .. I do not receive the challenge \ndata neither.\nI've change, header, user parameter  in login node... i dont know what \nelse...  server does not respond...\nAny ideas?\n. I'm using same startsream, just changing the magic bytes to \\x01\\x02\\x00\\x00\n\nis that correct ?\nEl 06/11/12 10:09, hermanho escribi\u00f3:\n\n@dleivag https://github.com/dleivag, no respond means you have sent \nout incorrect data. please check the start stream\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10103608. \n. As far as i know, This is a new version 1.2 of the protocol. The \nencription has been enabled, so there are a lot of changes in the sorce \ncode, solution is not simple, but there is a guide about how the things \nshould go...\nI dont know if anyone solved the entire problem...  I cant logging \nproperly, other people can send but not receive.. etc etc..  I guess we \nare all working on it.\n\nEl 06/11/12 10:26, Ahmad AlTwaijiry escribi\u00f3:\n\nI have been monitoring this issue since 6 days but frankly I couldn't \nunderstand the issue is it login only or also all the protocol has \nbeen changed?\nany one can tell if some permanent solution has been found?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10103972. \n. It shoud be great that people who got login handshake done, share the trick.\n\nEl 06/11/12 11:21, Beldar escribi\u00f3:\n\n@saschagehlich https://github.com/saschagehlich no, @waninkoko \nhttps://github.com/waninkoko said the login handshake goes unencrypted.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10105422. \n. neither do I.\nI restored the old dictionary, and still not working. Even change the \nold source code for the login and not response...\n\nEl 06/11/12 12:41, walter-white escribi\u00f3:\n\n@saschagehlich https://github.com/saschagehlich so are you working \nwith the old code, and are you receiving a valid response for the \nchallenge? Can you please explain what have you change? Because the \nold code is not working for me neither..\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10107515. \n. I've followed all the steps posted by @waninkoko \nhttps://github.com/waninkoko , but server does not respond.\nI can't get the challenge response.. it is driving me crazy, I have \nchecked lot of time  all the steps written by @waninkoko.\n\nIt has to be something hidden that nobody want to tell.\nPeople who says that it is working dont give any track..  really working?\nEl 06/11/12 22:19, tomwolfgang escribi\u00f3:\n\n@saschagehlich https://github.com/saschagehlich you need to change \nto the new dictionary - you don't even have WAUTH-1 in the old one...\nyou need to respond to the challenge with an encrypted response - \nwhich is what @waninkoko https://github.com/waninkoko wrote: \nhttp://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10128136. \n. is the application wazaap working ? It turns out it is working .\nI've checked its source code and it seems to be using protocol 1.1.\nWith digest auth.. but it has the new dictionary..\n\nI'm totaly crazy ..\nEl 06/11/12 22:19, tomwolfgang escribi\u00f3:\n\n@saschagehlich https://github.com/saschagehlich you need to change \nto the new dictionary - you don't even have WAUTH-1 in the old one...\nyou need to respond to the challenge with an encrypted response - \nwhich is what @waninkoko https://github.com/waninkoko wrote: \nhttp://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10128136. \n. doing that change i receive xml-not-well formed... so, i think it is not \ncorrect.\n\nEl 13/11/12 20:08, ElJava escribi\u00f3:\n\nThe size of the Whatsapp's node is send in this way:\n- The first 4 bits of the first byte are flags\n- The last 4 bits of the first byte and the two bytes consecutives\n  are the size.\nThe problem is that now WhatsAPI lost the first 4 bits of the size. \nYou haven't got problems because the size of the nodes are smaller \nthan 2^8. If the node would be like this:\n0000 0010 xxxx xxxx xxxx xxxx\n0000 would be flags\n0010 xxxx xxxx xxxx xxxx would be the size and whatsAPI only would \ntake xxxx xxxx xxxx xxxx.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/158#issuecomment-10338582. \n. I've got some questions about the protocol.\n\nWhat does this mean ?\n\n\n\nI realize when i send a message, allways receive a received node, and \nthey are acumulating... count 5.. count 6...\nonce I connect with the iphone client, they disapear and count = 0.\nIt is necesary to create any response after send a message ? why is this \nhappen?\nAnother question is that, people see me always offline, even I am \nreceiving messages.  is posible to notify the online and offline status \nindependent of connection ?\nthanks..\nEl 14/11/12 16:48, jonnywilliamson escribi\u00f3:\n\nTake a look at this link to my code I changed in whatsprot.class.php \n(around line 260-280) and funcs.php (end).\njonnywilliamson@ca647ff \nhttps://github.com/jonnywilliamson/WhatsAPI/commit/ca647ff3bd0d4e5a316ea5573d6cc0cd5ae78faa\nHopefully that explains it for you, if you edit your files to match \nthat, you'll get thumbnails automatically.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/pull/159#issuecomment-10370921.\n. Wrong pass on iphone too.\nTried Android, Symbian and IOS. Only Android is working as of now.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/175#issuecomment-10700946. \n. Probably you should keep some time between messages.\nmaybe 1 or 2 seconds..\ncould you share with us the results ?\n\nEl 06/12/12 11:20, Aveek Dasmalakar escribi\u00f3:\n\nThis method not working for large volume\nSent from my Samsung Galaxy SIII\nOn 6 Dec 2012 15:48, \"z0rax\" notifications@github.com wrote:\n\nyes.\n$dst = \"TargetNumber\";\n$wa->SendMessage($dst, \"Message\");\n$dst = \"2ndTargetNumber\"\n$wa->SendMessage($dst, \"Message\");\nor as a function\nfunction sendIT($number, $str) {\n$wa->SendMessage($number, $str);\n}\nusage:\nsendIT(\"TargetNumber\", \"Text Here\");\nsendIT(\"TargetNumber2\", \"Text here\");\n\u2014\nReply to this email directly or view it on \nGitHubhttps://github.com/venomous0x/WhatsAPI/issues/208#issuecomment-11079138.\n\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/208#issuecomment-11079201. \n. \n",
    "jean151515": "With the last update on my iPhone the protocol seems to be changed. It made me think that the old protocol will be someday deprecated, is it possible ?\n. The protocol had changed more then a month ago but the old one was still working till yesterday. \nThe strange part is that i dont seem to get any bytes from the server\n. KingKong1 is it still working on your device?\n. @mobilipia i am not able to do that right now because am at work and i dont have the proper tools. i'll upload them when i get home.\n. @spookyman the old protocol was plain text, there was no need to decrypt it. \nJust for the record: the trick i found to decrypt the ssl packets (for registration process and contact checker) was to evasdrop a whatsapp installed on my old Nokia. The Symbian OS asks the user if you accept a unverified certificate wich made things easier. The iPhone just blocks it without notice.\n. where did u add it ?\n. if needed, i have some old versions of Whatsapp for Android. For those who would like to investigate it\nWhatsApp_Messenger_2.7.2334.apk\nWhatsApp_Messenger_2.7.2635.apk\nWhatsApp_Messenger_2.7.5561.apk\nWhatsApp_Messenger_2.7.6004.apk\nWhatsApp_Messenger_2.7.6230.apk\nWhatsApp_Messenger_2.7.6847.apk\nWhatsApp_Messenger_2.7.7811.apk\nWhatsApp_Messenger_2.7.8402.apk\nWhatsApp_Messenger_2.7.9033.apk\nWhatsApp_Messenger_2.8.988.apk\nI remember that some have the old protocol that was working the last time i tested it, but when starting it indicates that it was an old version and need to be updated\n. @Zanooda the http://whatsapp.filshmedia.net guy had converted the PHP code into javascript in order to make it work.\n. @waninkoko man your my saver :) i will test it now. if it works i would like to buy you a cup of coffee or tea for your cold :))\n. Guys have anyone been able to code the set nickname function ?\non the old protocol i've already made it with the following function\npublic function setNewNickname($Nick) {\n    $RawData = \"\\x00\" . chr((strlen($Nick) + 8)) . \"\\xf8\\x05\\x74\\xa2\\x11\\x61\\xfc\" . chr(strlen($Nickname)) . $Nick;\n    $this->sendData($RawData);\n}\n. @alejandro-anv i wanted to but the had changed the protocol. if i managed to get it working i'll post the code\n. Guys this is a duplicate issue, check for the issue 126, we have a authentication problem.\n. ",
    "NEKOTOCI": "http://imgur.com/9QnHu\nMaybe someone can use this. I just sniff whatsapp in youwave\n. I confirm sending about 21 same msgs to 21 different numbers, account will be block. Tried sleep() as well.\nbut you can send many to one numbers is okay\n. But using phone whatsapp copy paste many ppl quick no block?\n. Shirioko we need to know what he use before we say his action is madness. For me I used to email then send text messages (500 sms) per day to 500 workers to announce their schedule. Then now I found this api that I could use it to do that for my company.\n. shirioko if according to what you saying that's mean this api is ridiculous too. what is your standard of using this api? for fun?. whatsapp is easier than email.  You might find it funny some people in this world don't know how to use email at all but that is real. We used to email but just cant continue and we switch to SMS were it just popup on their phone. 80% of our worker ( waiter in restaurant) did not finish primary school & know very simple english words and we have to manually set whatsapp on their nokia symbian phone.\n. ",
    "jb425": "$this->_output .= \"\\x01\\x02\\x00\\x00\";\nbut then there is another error\n. Hmm @mrahmadt is right - the 2.8.2 client on my old iPhone is still connecting. How could that be?\n. @beldar I think those are simply the protocol version - 1.2.0.0 in this case\n. @waninkoko Ok I see. Makes sense - 2.8.2 isn't even that old as I thought it to be...\n. @waninkoko Big thanks for sharing the details btw!\n. @waninkoko What is the PBKDF2 key length?\n. Do outgoing nodes that are not encrypted (during login) get the hash appended as well?\n. err stupid question - how would they without a session key...\n. For some reason I do not manage to get ANY response from server at all. Probably I messed the node construction somehow.\nIsn this correct for magic bytes:\npublic function StartStream($domain, $resource)\n    {\n        $attributes = array();\n        $this->_output = \"WA\";\n        $this->_output .= \"\\x01\\x02\\x00\\x00\";\n```\n    $attributes[\"to\"] = $domain;\n    $attributes[\"resource\"] = $resource;\n    $this->writeListStart(count($attributes) * 2 + 1);\n$this->_output .= \"\\x01\";\n$this->writeAttributes($attributes);\n$ret = $this->_output;\n$this->_output = \"\";\nreturn $ret;\n\n}\n```\n. @waninkoko my flushBuffer() looks like this:\nprotected function flushBuffer()\n    {\n        $size = strlen($this->_output);\n```\n    echo \"should write: \".$this->_output.\" of size \".$size.\"\\n\";\n$header = \"\";\n$header .= chr(($size & 0xFF0000) >> 16);\n$header .= chr(($size & 0xFF00) >> 8);\n$header .= chr($size & 0xFF);\n\nif(strlen($this->_sessionKey) > 0)\n{\n    echo \"write node encrypted\\n\";\n\n    $header[0] = chr(ord($header[0]) | (1 << 4)); // set encrypted flag\n\n    $rc4Output = rc4($this->_sessionKey,$this->_output);            \n    $hash = hash_hmac(\"sha1\",$rc4Output,$this->_sessionKey,false);\n\n    $ret = $header.$rc4Output.$hash;            \n}\nelse\n    $ret = $header.$this->_output;\n\n$this->_output = \"\";\n\necho \"writing node: \".$ret.\"\\n\";\n\nreturn $ret;\n\n}\n```\n. @waninkoko basically I implemented all changes according to your post but the problem is that readData() always fails with \"Resource temporarily unavailable\" - seems like the server is just not responding.\nSo I changed the magic bytes to \"\\x01\\x02\\x00\\x00\" and the flushBuffer() to send the new header format. Shouldn't the server respond?\nEDIT: I also changed the dictionary of course.\nEDIT2: StartStream() is still the same otherwise?\n. Getting \"not-authorized\" error - what could be wrong with my challenge response?\n```\nprotected function authenticate($challenge)\n{\n    $this->_sessionKey = pbkdf2(\"sha1\",$this->EncryptPassword(),$challenge,16,20,true);\n$responseArray = $this->_phoneNumber.$challenge.time();\n\n$rc4Response = rc4($this->_sessionKey,$responseArray);\n\n$hash = substr(hash_hmac(\"sha1\",$rc4Response,$this->_sessionKey,true),0,4);\n\n$response = $hash.$rc4Response;\n\nreturn $response;\n\n}\n```\n. My current problem is that the rc4 algos found on google do not give the same result as the one used by the Whatsapp app. Debugging the iPhone client shows a difference.\nWhat is it about 256 drop? Do I have to replicate that?\n. @waninkoko thanks for replying! What means empty? 0 bytes? Is this rc4 function fine:\nfunction rc4($key, $data)\n{\n    // Store the vectors \"S\" has calculated\n    static $SC;\n    // Function to swaps values of the vector \"S\"\n    $swap = create_function('&$v1, &$v2', '\n        $v1 = $v1 ^ $v2;\n        $v2 = $v1 ^ $v2;\n        $v1 = $v1 ^ $v2;\n    ');\n    $ikey = crc32($key);\n    if (!isset($SC[$ikey])) {\n        // Make the vector \"S\", basead in the key\n        $S    = range(0, 255);\n        $j    = 0;\n        $n    = strlen($key);\n        for ($i = 0; $i < 255; $i++) {\n            $char  = ord($key{$i % $n});\n            $j     = ($j + $S[$i] + $char) % 256;\n            $swap($S[$i], $S[$j]);\n        }\n        $SC[$ikey] = $S;\n    } else {\n        $S = $SC[$ikey];\n    }\n    // Crypt/decrypt the data\n    $n    = strlen($data);\n    $data = str_split($data, 1);\n    $i    = $j = 0;\n    for ($m = 0; $m < $n; $m++) {\n        $i        = ($i + 1) % 256;\n        $j        = ($j + $S[$i]) % 256;\n        $swap($S[$i], $S[$j]);\n        $char     = ord($data[$m]);\n        $char     = $S[($S[$i] + $S[$j]) % 256] ^ $char;\n        $data[$m] = chr($char);\n    }\n    return implode('', $data);\n}\n. @waninkoko Thanks :) I actually tried that after reversing the iPhone app - I did\n$drop = str_repeat('0',256);\n$this->rc4($this->_sessionKey,$drop);\nBut with the above rc4 function the output for the response cipher didn't even change...\n. $data = str_split($data, 1);\nstatic $i = $j = 0;\nlike that?\n. @waninkoko To be honest I can't figure it out...\nIf you could help me with the php code or post your rc4 function I would really appreciate it.\nbeing awake for 28 hours now -.-\nHmm the message receive error is not good - maybe due to another client connecting as well?\n. @waninkoko I see - would you share it?\n. @phpKing AWESOME! THANKS! Where did you get it from?\n. @phpKing I ported your code to php but I am still getting a different result than on the iPhone. It is weird!\nI have the same key and the same input but still the result is different. Even now with the correct drop...\n. @waninkoko could you post me a testcase for the rc4 encryption? Like some key, input, output with your code?\n. @waninkoko Do you use the same RC4 class instance for receiving and sending? Or 2 different ones?\nI managed to get the login working but currently it seems to fail to decrypt incoming nodes - readListSize() fails.\n. ",
    "Zanooda": "Well, maybe this helps:\nAfter decompiling WhatsApp for Windows Phone 7 I found a place in code where it sends WAUTH-1 instead of DIGEST-MD5-1 as authentication method to the server.\n. Extracted dictionary from WP7-app:\nstrArrays[5] = \"account\";\n        strArrays[6] = \"ack\";\n        strArrays[7] = \"action\";\n        strArrays[8] = \"active\";\n        strArrays[9] = \"add\";\n        strArrays[10] = \"after\";\n        strArrays[11] = \"ib\";\n        strArrays[12] = \"all\";\n        strArrays[13] = \"allow\";\n        strArrays[14] = \"apple\";\n        strArrays[15] = \"audio\";\n        strArrays[16] = \"auth\";\n        strArrays[17] = \"author\";\n        strArrays[18] = \"available\";\n        strArrays[19] = \"bad-protocol\";\n        strArrays[20] = \"bad-request\";\n        strArrays[21] = \"before\";\n        strArrays[22] = \"Bell.caf\";\n        strArrays[23] = \"body\";\n        strArrays[24] = \"Boing.caf\";\n        strArrays[25] = \"cancel\";\n        strArrays[26] = \"category\";\n        strArrays[27] = \"challenge\";\n        strArrays[28] = \"chat\";\n        strArrays[29] = \"clean\";\n        strArrays[30] = \"code\";\n        strArrays[31] = \"composing\";\n        strArrays[32] = \"config\";\n        strArrays[33] = \"conflict\";\n        strArrays[34] = \"contacts\";\n        strArrays[35] = \"count\";\n        strArrays[36] = \"create\";\n        strArrays[37] = \"creation\";\n        strArrays[38] = \"default\";\n        strArrays[39] = \"delay\";\n        strArrays[40] = \"delete\";\n        strArrays[41] = \"delivered\";\n        strArrays[42] = \"deny\";\n        strArrays[43] = \"digest\";\n        strArrays[44] = \"DIGEST-MD5-1\";\n        strArrays[45] = \"DIGEST-MD5-2\";\n        strArrays[46] = \"dirty\";\n        strArrays[47] = \"elapsed\";\n        strArrays[48] = \"broadcast\";\n        strArrays[49] = \"enable\";\n        strArrays[50] = \"encoding\";\n        strArrays[51] = \"duplicate\";\n        strArrays[52] = \"error\";\n        strArrays[53] = \"event\";\n        strArrays[54] = \"expiration\";\n        strArrays[55] = \"expired\";\n        strArrays[56] = \"fail\";\n        strArrays[57] = \"failure\";\n        strArrays[58] = \"false\";\n        strArrays[59] = \"favorites\";\n        strArrays[60] = \"feature\";\n        strArrays[61] = \"features\";\n        strArrays[62] = \"field\";\n        strArrays[63] = \"first\";\n        strArrays[64] = \"free\";\n        strArrays[65] = \"from\";\n        strArrays[66] = \"g.us\";\n        strArrays[67] = \"get\";\n        strArrays[68] = \"Glass.caf\";\n        strArrays[69] = \"google\";\n        strArrays[70] = \"group\";\n        strArrays[71] = \"groups\";\n        strArrays[72] = \"g_notify\";\n        strArrays[73] = \"g_sound\";\n        strArrays[74] = \"Harp.caf\";\n        strArrays[75] = \"http://etherx.jabber.org/streams\";\n        strArrays[76] = \"http://jabber.org/protocol/chatstates\";\n        strArrays[77] = \"id\";\n        strArrays[78] = \"image\";\n        strArrays[79] = \"img\";\n        strArrays[80] = \"inactive\";\n        strArrays[81] = \"index\";\n        strArrays[82] = \"internal-server-error\";\n        strArrays[83] = \"invalid-mechanism\";\n        strArrays[84] = \"ip\";\n        strArrays[85] = \"iq\";\n        strArrays[86] = \"item\";\n        strArrays[87] = \"item-not-found\";\n        strArrays[88] = \"user-not-found\";\n        strArrays[89] = \"jabber:iq:last\";\n        strArrays[90] = \"jabber:iq:privacy\";\n        strArrays[91] = \"jabber:x:delay\";\n        strArrays[92] = \"jabber:x:event\";\n        strArrays[93] = \"jid\";\n        strArrays[94] = \"jid-malformed\";\n        strArrays[95] = \"kind\";\n        strArrays[96] = \"last\";\n        strArrays[97] = \"latitude\";\n        strArrays[98] = \"lc\";\n        strArrays[99] = \"leave\";\n        strArrays[100] = \"leave-all\";\n        strArrays[101] = \"lg\";\n        strArrays[102] = \"list\";\n        strArrays[103] = \"location\";\n        strArrays[104] = \"longitude\";\n        strArrays[105] = \"max\";\n        strArrays[106] = \"max_groups\";\n        strArrays[107] = \"max_participants\";\n        strArrays[108] = \"max_subject\";\n        strArrays[109] = \"mechanism\";\n        strArrays[110] = \"media\";\n        strArrays[111] = \"message\";\n        strArrays[112] = \"message_acks\";\n        strArrays[113] = \"method\";\n        strArrays[114] = \"microsoft\";\n        strArrays[115] = \"missing\";\n        strArrays[116] = \"modify\";\n        strArrays[117] = \"mute\";\n        strArrays[118] = \"name\";\n        strArrays[119] = \"nokia\";\n        strArrays[120] = \"none\";\n        strArrays[121] = \"not-acceptable\";\n        strArrays[122] = \"not-allowed\";\n        strArrays[123] = \"not-authorized\";\n        strArrays[124] = \"notification\";\n        strArrays[125] = \"notify\";\n        strArrays[126] = \"off\";\n        strArrays[127] = \"offline\";\n        strArrays[128] = \"order\";\n        strArrays[129] = \"owner\";\n        strArrays[130] = \"owning\";\n        strArrays[131] = \"paid\";\n        strArrays[132] = \"participant\";\n        strArrays[133] = \"participants\";\n        strArrays[134] = \"participating\";\n        strArrays[135] = \"password\";\n        strArrays[136] = \"paused\";\n        strArrays[137] = \"picture\";\n        strArrays[138] = \"pin\";\n        strArrays[139] = \"ping\";\n        strArrays[140] = \"platform\";\n        strArrays[141] = \"pop_mean_time\";\n        strArrays[142] = \"pop_plus_minus\";\n        strArrays[143] = \"port\";\n        strArrays[144] = \"presence\";\n        strArrays[145] = \"preview\";\n        strArrays[146] = \"probe\";\n        strArrays[147] = \"proceed\";\n        strArrays[148] = \"prop\";\n        strArrays[149] = \"props\";\n        strArrays[150] = \"p_o\";\n        strArrays[151] = \"p_t\";\n        strArrays[152] = \"query\";\n        strArrays[153] = \"raw\";\n        strArrays[154] = \"reason\";\n        strArrays[155] = \"receipt\";\n        strArrays[156] = \"receipt_acks\";\n        strArrays[157] = \"received\";\n        strArrays[158] = \"registration\";\n        strArrays[159] = \"relay\";\n        strArrays[160] = \"remote-server-timeout\";\n        strArrays[161] = \"remove\";\n        strArrays[162] = \"Replaced by new connection\";\n        strArrays[163] = \"request\";\n        strArrays[164] = \"required\";\n        strArrays[165] = \"resource\";\n        strArrays[166] = \"resource-constraint\";\n        strArrays[167] = \"response\";\n        strArrays[168] = \"result\";\n        strArrays[169] = \"retry\";\n        strArrays[170] = \"rim\";\n        strArrays[171] = \"s.whatsapp.net\";\n        strArrays[172] = \"s.us\";\n        strArrays[173] = \"seconds\";\n        strArrays[174] = \"server\";\n        strArrays[175] = \"server-error\";\n        strArrays[176] = \"service-unavailable\";\n        strArrays[177] = \"set\";\n        strArrays[178] = \"show\";\n        strArrays[179] = \"sid\";\n        strArrays[180] = \"silent\";\n        strArrays[181] = \"sound\";\n        strArrays[182] = \"stamp\";\n        strArrays[183] = \"unsubscribe\";\n        strArrays[184] = \"stat\";\n        strArrays[185] = \"status\";\n        strArrays[186] = \"stream:error\";\n        strArrays[187] = \"stream:features\";\n        strArrays[188] = \"subject\";\n        strArrays[189] = \"subscribe\";\n        strArrays[190] = \"success\";\n        strArrays[191] = \"sync\";\n        strArrays[192] = \"system-shutdown\";\n        strArrays[193] = \"s_o\";\n        strArrays[194] = \"s_t\";\n        strArrays[195] = \"t\";\n        strArrays[196] = \"text\";\n        strArrays[197] = \"timeout\";\n        strArrays[198] = \"TimePassing.caf\";\n        strArrays[199] = \"timestamp\";\n        strArrays[200] = \"to\";\n        strArrays[201] = \"Tri-tone.caf\";\n        strArrays[202] = \"true\";\n        strArrays[203] = \"type\";\n        strArrays[204] = \"unavailable\";\n        strArrays[205] = \"uri\";\n        strArrays[206] = \"url\";\n        strArrays[207] = \"urn:ietf:params:xml:ns:xmpp-sasl\";\n        strArrays[208] = \"urn:ietf:params:xml:ns:xmpp-stanzas\";\n        strArrays[209] = \"urn:ietf:params:xml:ns:xmpp-streams\";\n        strArrays[210] = \"urn:xmpp:delay\";\n        strArrays[211] = \"urn:xmpp:ping\";\n        strArrays[212] = \"urn:xmpp:receipts\";\n        strArrays[213] = \"urn:xmpp:whatsapp\";\n        strArrays[214] = \"urn:xmpp:whatsapp:account\";\n        strArrays[215] = \"urn:xmpp:whatsapp:dirty\";\n        strArrays[216] = \"urn:xmpp:whatsapp:mms\";\n        strArrays[217] = \"urn:xmpp:whatsapp:push\";\n        strArrays[218] = \"user\";\n        strArrays[219] = \"username\";\n        strArrays[220] = \"value\";\n        strArrays[221] = \"vcard\";\n        strArrays[222] = \"version\";\n        strArrays[223] = \"video\";\n        strArrays[224] = \"w\";\n        strArrays[225] = \"w:g\";\n        strArrays[226] = \"w:p\";\n        strArrays[227] = \"w:p:r\";\n        strArrays[228] = \"w:profile:picture\";\n        strArrays[229] = \"wait\";\n        strArrays[230] = \"x\";\n        strArrays[231] = \"xml-not-well-formed\";\n        strArrays[232] = \"xmlns\";\n        strArrays[233] = \"xmlns:stream\";\n        strArrays[234] = \"Xylophone.caf\";\n        strArrays[235] = \"1\";\n        strArrays[236] = \"WAUTH-1\";\n. After reading the decompiled WP7-app I found some references to RC4-encryption. I think it was not using this form of encryption before.\nIt is also now using WAUTH-1 as \"mechanism\"-type and an auth-blob when logging in. This auth-blob is generated from nonce + a UNIX-timestamp, afterwards it gets encoded via RC4.\nSo I guess we cannot use static magic bytes anymore and have to read them from the stream coming from server.\nI don't want to post decompiled source here because I am afraid of possible legal trouble with authorities (wasn't decompiling illegal?), but I can give you a hint where to find those places in source.\n. @beldar Okay, you got me.\nLook at these parts, especially line 29+: http://pastebin.com/ZDKcJSRt\n. Yep. But it is still possible to code an own client, see this link: http://talk.maemo.org/showpost.php?p=1282181&postcount=1912\nIt is an unofficial WhatsApp-client for Nokia N900.\n. @mobilipia The linked post was created on 10-18-2012. And in the changelog it says:\n- Implemented WhatsApp protocol 1.2 with RC4 encryption and WAUTH-1 authentication.\nI guess this is what we need here.\n. @beldar Wouldn't trust it. Better go use http://whatsapp.filshmedia.net/ - it is open source.\nI know, it is broken at the moment. The guy is following this thread and will update his web client ASAP.\n. @kerby82 I am not sure it uses SSL/TLS at all. Yeah, it uses ports common used by TLS-encrypted connections. But everything I saw in decompiled source before was referencing to RC4 only.\n. @jean151515 Yeah, I know. It is 1:1 PHP <> CoffeeScript. The guy is a friend of mine ;)\n@zstars Search for \"Telerik JustDecompile\" and get the WP7 - WhatsApp - xap.\n. ",
    "Currito": "That's what I've found: The dictionary has changed: \n- the position 132 ('resource' tag) is now in the position 165 (+33 new tags from 0)\n- the position 138 ('s.whatsapp.net' tag) is now in the position 171 (+0 new tags from 132)\n- the position 160 ('to' tag) is now in the position 200. (+7 new tags from 138)\n. @Beldar, what's the first 0x0a byte? I don't send it, althought mine isn't\nworking neither...\n2012/11/7 Beldar notifications@github.com\n\nI'm sending this:\n00000000  0a 57 41 01 02 f8 05 01  c8 ab a5 fc 11 69 50 68  |.WA..........iPh|\n00000010  6f 6e 65 2d 32 2e 38 2e  32 2d 35 32 32 32 00 00  |one-2.8.2-5222..|\nIt's not correct?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10145555.\n. I'm trying to write this php code in java and I'm getting always a\n\"failure\", \"not-authorized\" message. Could somebody gime me some \"test\nvectors\" for the function encode from KeyStream. I mean, a would need 2\nbyte arrays which if you call the encode function with the first byte array\nyou obtain the second one.\nThis way I can know if my error is in the encryptation process. Thanks all!\n\n2012/11/8 jandrito80 notifications@github.com\n\n@waninkoko https://github.com/waninkoko It's great. It works perfectly.\nI can send and receive messages.\nThank you very much.\nBut I have a small query.\nWhen I receive a picture, the thumbnail appears to be encrypted. How can\ndecrypted?\nAgain, thank you very much\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10185880.\n. @jonnywilliamson Great work!\n. \n",
    "aleejaved": "Wazapp and WhatsAPI use WhatsApp protocol 1.1 and that has been blocked for good.\nThey have to implement WhatsApp protocol 1.2 with a new dictionary, RC4 encryption and WAUTH mechanism.\nWe knew that was gonna happen that's why we gave priority to the new protocol so Yappari would never stop working.\nUnfortunately it's just not changing some bytes. You have to rewrite a big piece of code... \nhttp://talk.maemo.org/showpost.php?p=1288193&postcount=2091\n. i suppose you can get desire code from his app.\n. ",
    "tgalal": "nope, still on it\n. This is challengeData if a previous one exists. You can safely ignore that I guess.\n. I successfully logged in, now working on encrypt/decrypt streams\n. 16 iterations, like the winphone client\n. @beldar  This is an old patch which is broken now, I'm still working on the new one\n. @graypanda 20 bytes\n. Hey guys, I'm going to release Yowsup's source code tonight. I hope it helps.\n. And Yowsup source is out. Just in case anyone still needs it: https://github.com/tgalal/yowsup\n. @kingk110  https://github.com/tgalal/yowsup/wiki/yowsup-cli\n. @kingk110 update and try now, it's has just been fixed. \nabout Yowsup password, the password which the server returns is base64 encoded. To use it you must decode it first. \n. yowsup, I just updated it to fix \"fail old version\" issue\n. I don't know about that .net api I never tried it..\n. You need to update the user agent it uses\n. :P \n. @shirioko I'm using yowsup and contact sync is not working :P \n. lol\n. @ebrahimelsawy no one is upset and no one is hiding the fix from you. When it's ready you'll find it. Just be patient\n. Since he is doing it the \"Tarek\" way, then Tarek should also get some donation :P\n. https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=T3MF9LNQBSW5A\nhttps://www.gittip.com/shirioko/\n. ",
    "kindhack": "I am a bit stuck on the first part of the login sequence. I have seen that this bytes are sent:\n    5741010200XXXXXXXX01c8aba5fc10416eXXXXXXXX642d322XXXXe35373332XXXXXXXX02bbf803f8019cfXXXXXXXXcf801b900XXXXXXXX10dafc0bXXXXXXXXXXXXXXXXXXXXXXe8cfXXXXfc2d \neb288925e45cbdb39be5c81XXXXXX5564c1984bf11a5a66f664XXXXXXa580f6c90cfda19134db662d33b45f8d0\nWhere the first 2 lines of bytes are allways equal. There you can find the text WA (as in 1.1 proto), followed by the proto num (0x01 0x02) and some extra info (Android-2.8.) the phone number and some other bytes.\nThe bit that I dont get is the last 45 bytes:\n            eb28892XXXXXXdb39be5c81XXXXXX5564c1984bf11a5a66f664XXXXXXa580f6c90cfda19134db66XXXXXX5f8d0\nThis is different on each connection. Any thoughts?\nNote: I have replaced some bits by X to avoid disclosing data about the account I am using\n. Yes please, that would help everyone a lot :). Let us know if you finally upload it. Cheers!\n. ",
    "hijacker2k3": "Today its a bank holiday in germany so i could get some time in our network lab if anyone still need some sniffed network traffic?\nBut i only have an iphone 4s with the latest whatsapp version\n. http://pastebin.com/x8ExLQBR\nits an fake whatsapp acoount so i didnt delete the phonenumber or so\nif you need more or other format let me know\n. i would be more easier to post the whole whatsapp wireshark file\nedit\ni startet the caputure first then whatsapp \nhttp://www.tbe.server3.tibit.de/whatsapp_start_only_ip\n. anyone who needs some sniffed whatsapp trafic with message sending?\n. same 4 me\n. but the old version on my 4S still works\n. it still works\n. on next weekend (first free time in our networklab) i will upgrade whatsapp and sniff the whole network traffic maybe i can see what happens during the first connection to the server.\ni will post the captured datapakets\n. ",
    "graypanda": "@tgalal what about the key length for pbkdf2? 32 bytes?\n. @waninkoko when I sniffed by whatsapp traffic, i noticed that there are 20 bytes of data sent with the initial WAHTU-1 request. do you have any idea what these 20 bytes represent?\n. ",
    "youta18": "hello everybody, I want help to solve the problem, do you have any idea about where start? At the moment the API don't work =(\n. @waninkoko I agree with @beldar , the main question is what is the difference between v1 and v1.2?? \n. Hey guys, the wazzap application is working now! the author says:\n\"So Wazapp has not been working for the past 2 days basically because Whatsapp has done a not-so-small upgrade to the protocol that I had to catch up with. I finally worked it out yesterday and will send out an update today. When this happens, you will get an update notification once you launch Wazapp.\"\n. @lilezek, thanks for your reply but I don't understand why you says that this is not an issue from whatsapi. I downloaded the zip file that contain the WhatsApi code and after I run the php code.\nIf you see the first comment, I run the following command in linux:\nroot# php whatsapp.php - \"number\" \"message\"\nThe whatsapp.php file is included in WhatsApi code, please help me to solve my problem.\nThanks.\n. ",
    "waninkoko": "I'm working in the implementation of the protocol 1.2, and it's going good so far, but I'm having issues with the login authentification.\nFeatures are sent ok, auth request looks ok too, but when I reply to the challenge I always get a 'non-authorized' as response.\nI'm using the phone number (with country code, without zeroes) as \"user\", \"iPhone-2.84\" as user agent, and the MD5 of the reversed IMEI as password to generate, along with the challenge data, the RC4 key to encode the challenge response.\nI don't know what is missing in my implementation, I checked everything dozens of times and no idea.\n. @spookyman I'll have to clean up my code a little, it's a mess right now.\n@beldar I don't think that will work. When logging in, WhatsApp server just expects the password that was generated when the account was registered. If I use iPhone user agent, it doesn't expect the MAC address nor anything else, it just wants the password used during the registration (theoretically you can use any password for a WhatsApp account, if you register it 'manually').\n. I checked my password and it's correct. The RC4 algorithm looks correct too. HMACSHA1 is ok too.\n. Ok, it was my mistake. I wasn't reading the challenge data properly.\n. Now I receive a 'invalid-mechanism' response and I'm using WAUTH-1\n. I can share my implementation when I have the code cleaned, but it's written in C# not PHP.\n. @perezdidac My implementation is 100% mine, it's not based in WhatsAPINet.\nAnyway, again my mistake. When a login is succesful, the response is encrypted and I forgot to decrypt it.\n. @perezdidac That's what I meant :P I started developing it (with a friend) 3 months ago, but we never wanted to make it public for precaution. Maybe now it's time to change that.\n. I can confirm that my implementation of protocol 1.2 is working. I won't upload the code today but you can ask me any questions.\n. Do not worry guys. I'll prepare a little post about protocol 1.2 implementation. Just be patient! ;)\n. Here is a quick explanation I wrote: http://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\n. Old versions already had the new protocol implemented.\n. Magic bytes are 0x01, 0x02\n. I don't think they will change the protocol for a long time. \nThe key lenght is 20 bytes (like the challenge data).\n. Nope\n. @jb425 Check my post, specifically where I talk about the node header. You need to update flushBuffer().\nCurrently flushBuffer() does the following:\n$ret = $this->writeInt16($size);\n$ret .= $this->_output;\nIt writes a 2 bytes header that contains the node size, and then writes the node. This is protocol 1.1\nIn protocol 1.2 the header is 3 bytes and it contains: the node size (20 bits) and the node flags (4 bits).\nA workaround to receive data during login is to replace \"writeInt16\" with \"writeInt24\". But as soon as you need to send encrypted nodes that workaround won't work.\n. @jb425 When you get the encryption key you need to initialize RC4 ciphering an empty buffer of 256 bytes.\nI forgot to explain that detail, so much stuff and so many hours coding... :/\n. I'll take a look and reply in 5mins. With an empty buffer I really meant a buffer with any data :P\n. @jb425 You need to save the values of $i and $j. In your case, make them static.\n. @jb425 Not exactly. After you initialize the vector S you need to set $i and $j as 0 and never reset them anymore. I would put that under \"$SC[$ikey] = $S;\"\nNow I'm facing a problem... I can login, send messages, but I can't receive them. All I get is a \"message\" node with no children and the following attributes:\n\"from\": \"ib\"\n\"duplicate\": \"error\"\n\"expiration\": \"duplicate\"\nAnd sometimes it comes with an extra attribute \"broadcast\": \"error\" (or something like that).\n. My rc4 code is a class. The cipher is initialized in the class constructor. I'll be back after watching F1.\n. @jb425 I can't right now, but I can confirm the rc4 posted before is correct.\n. No, different instances.\n. @graypanda That's an already existing challenge data. It can be ignored.\nI have WhatsApi almost working with protocol 1.2. I can login but I cannot send messages yet (probably small mistake in the encryption code).\n. I have a gift for you guys :)\nhttps://github.com/lowlevel-studios/WhatsAPI\nProtocol 1.2 fully implemented and some improvements. It took me a bit longer because I have a cold.\nEnjoy!\n. @zjorzzzey The flags differ between received and sent nodes.\nIn sent nodes the encryption flag is the 4th bit (0001 0000), but in received nodes it is the first bit (1000 0000).\n. They updated Android client to use the new registration api. Now the password is generated in the server and stored in the phone encrypted in a file called \"pw\".\nThe absolute path is \"/data/data/com.whatsapp/files/pw\".\nI tried to find the encryption algorithm in the WP version but all the related code is inside a DLL file called \"WhatsAppNative.dll\" that I cannot decompile (it was probably written in C++) and IDA doesn't give me too much info.\n. ",
    "mrahmadt": "I have one important question I don't see people asked it\nIf whatsapp upgraded the protocol , why old whatsapp versions are working? For example I have my iPhone with whatsapp 2.8.4 and a blackberry with version 2.8.5 (upgraded 2 weeks back)\nSo again why they are working!! \n. I have been monitoring this issue since 6 days but frankly I couldn't understand the issue is it login only or also all the protocol has been changed?\nany one can tell if some permanent solution has been found?\n. https://github.com/venomous0x/WhatsAPI/issues/179\n. ",
    "stanleytamta": "Dear Mr bader,\nhi i try the php command with below information but fail to send with below error\nDo i did anything wrong ? wrong imei???\nI am using the updated version\nStanley\u00a0\n//code update in\u00a0/tests/whatsapp.php\n$nickname = \"Stanley\";\n$sender = \"85292199101\"; // Mobile number with country code (but without + or 00)\n$imei = \"35379059686xxx\"; // MAC Address for iOS IMEI for other platform (Android/etc)\u00a0\n$countrycode = substr($sender, 0, 3);\n$phonenumber=substr($sender, 3);\n// Command test\u00a0\nphp whatsapp.php -l \u00a0-s 85293034758 stanley -i 85293034758\n[] Logging in as 'Stanley' (85292199101)\nhttps://r.whatsapp.net/v1/exist.php?cc=852&in=92199101&udid=abbbaa211243f00f0853ad23cf703e95\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n\n\n\n\u5bc4\u4ef6\u4eba\ufe30 phpKing notifications@github.com\n\u6536\u4ef6\u4eba\ufe30 venomous0x/WhatsAPI WhatsAPI@noreply.github.com \n\u50b3\u9001\u65e5\u671f\ufe30 2012\u5e7411\u67084\u65e5 (\u9031\u65e5) 12:07 AM\n\u4e3b\u984c\ufe30 Re: [WhatsAPI] Login broken (#126)\n@jb425 Let's talk privately until we get something useful to the community. mr.bader at gmail\n\u2014\nReply to this email directly or view it on GitHub.\n. hi i try the php command with below information but fail to send with below error\nDo i did anything wrong ?  wrong imei???\nI am using the updated version\n\nphp whatsapp.php -l  -s 85293030000 Stanley -i 85293030000\n[] Logging in as 'Stanley' (852xxxxxxxxxx)\nhttps://r.whatsapp.net/v1/exist.php?cc=852&in=xxxxxxxxxx&udid=abbbaa211243f00f0853ad23cf703e95\n\n< ?xml version=\"1.0\" encoding=\"UTF-8\"?>\n< exist>\n< response status=\"fail\" result=\"incorrect\"/>\n< /exist >\n. WhatsApp no longer sends plain text\nhttp://www.h-online.com/security/news/item/WhatsApp-no-longer-sends-plain-text-1674723.html\nhttps://whatsapp.zendesk.com/entries/21864047-are-my-messages-secure\n. ",
    "lahmacuns": "When will you share your code on WhatsApi poject? How can a see a list of changes?\n. Can you please send me the Login and Message codes? I could not find which one is the working one. I'll be glad if you can assist.\n@waninkoko @jb425 @zstars \n. @beldar  Can you please send me the Login and Message codes? I could not find which one is the working one. I'll be glad if you can assist.\n. What is this Problem ?\npython ./yowsup-cli -c config.example -d --requestcode voice\n  File \"./yowsup-cli\", line 191\n    password = identity or password if args[\"v1\"] else base64.b64decode(password)\n                                     ^\nSyntaxError: invalid syntax\n. I have a problem. Connection is successful. Status code says the message is sent. But the messages are not actually sent. It's been happening since last night. Anybody having the same issue?\n. @shirioko does whatsapp api work with you smoothly? I can send the messages, but cant get it. what about yours? are they delivering?\nI didnt understand where the sleep(1) code is. I could not find the sleep(1) code in whatsprot.class.php \nif you are talking about pending, the system is awaits a second for each message, then gets the second one.\n. I am using regular whatsapp api system, not YOWSUP. you think the messages are not delivering because of I was not registered with \"register v2\"? It was working fine 2 days ago, why it does not work now, I didnt get it. should I make the account through YOWSUP?\n. I've got pendind mode. awaits 2 secs between each message. are you using the new login system? the one that at the bottom or logging in with Phone or IMEI code?\nI do not login with this code. I am using register V1 system.\nphp\n    require \"whatsprot.class.php\";\n    $fromMobNumber = \"12225556666\"; //ENTER YOUR GOOGLEVOICENUMBER HERE\n    $toMobNumber = \"09876543210\"; //ENTER YOUR OWN NUMBER HERE\n    $id = \"<YOUR NEW PASSWORD\";  //ENTER THE PASSWORD YOU COPIED EARLIER HERE\n    $nick = \"YourNick\";\n\n$w = new WhatsProt($fromMobNumber, $id, $nick);\n$w->Connect();\n$w->Login();\n$w->sendNickname($nick);\n$w->Message($toMobNumber , \"Testing123\");\nsleep (2);\n?>\n. @shirioko I have sent you an email, can you please try to log in via this system and send messages. Check that either you get the message or not.\n. @shirioko did you get the emails I've sent you?\n. you have made changes on whatsapp API for yowsup, right? Or you are sending the messages over yowsup?\n. thanks for your help.\n. It does not work here either since yesterday. Anyone found a solution?\n. is there any whatsapp user scanning limit? would it be block the account if we scan  a thousand of numbers?\nthere is nobody can make of its php version?\n. @alist3r how many scans you've made? any ban caused? within the old system we were able to make unlimited scans.\n. the first number I have tried was not registered with yowsup. was an old one 2 months aged. first I thought the issue relies on that and I have tested the 2 numbers I've got with yowsp. It has banned within 19th message again. message content is completely changing in random for each message. I have put 2 seconds space between each message and the result is still the same. I believe this is a new update.\n. @shirioko, you have no contribution other than distracting the thread. I dont use whatsapp api for spamming purpose, dont know others.\nCan you send more than 19 messages on your system? If you try so, you'll see that you cannot. Whatsapp take a new security measurements. before you type here, you can see it with trying.\n. @kingk110 you also get blocked after 17 messages?\n. is there anyone got a solution for this problem? I am still being banned after 17th message. I'll be very glad if anycone have the solution.\n. @abbas224252  Send unlimited messages?\n. @kingk110 I have tried the IMEI system a month ago, but I dont have any account which works with IMEI, now. how many messages you cand with the new system?\n. @shirioko is there any bulk scanning or we should do it one by one? I could not find any information for it. also is there any banning the phone numbers? I'd like to scan 20k numbers.\n. @shirioko is there any bulk scanning or we should do it one by one? I could not find any information for it. also is there any banning the phone numbers? I'd like to scan 20k numbers.\n. Yes, iPhone. No Android. \n. @shirioko In order to URLS to be clickable, the senders number should have been registered already. Once the sender number added to the contact list, the URL turns to be clickable.\n. No. It says \"Url scheme support for thirdparty apps\" in Whatsapp update. There must be a way to send message to those who are not in Contact. But I can't find it. @shirioko \n. @shirioko please help \n. Yes synced phonebook... New Problem.\n. I think the system has changed. I guess there is a new update today, after 3-9 messages the number gets being banned. \n. Not work :( Received error: internal error\n. @shirioko thank you ;)\n. @shirioko Did you solve the problem?\n. Work ?\n. @shirioko php version ? not work!!!\n. Exactly! 16 message send block!\n. ",
    "tribbolo": "hello i see wassap released yesterday that work with new 1.2 login so maybe will be done the porting here soon\n.  stanleytamta : if you take fail maybe you wrong the imei that must be reversed and on md5 function passtrought\n. yes kerby82 you right, will necessary make a point of situation and see what need to reach the goal\n. @waninkoko i m trying wassap login successfully read the message but cant add people. and a thing strange when i connect from whatsup on my phone, on the software wassap i receive a disconnection. do you think only 1 connection can be allow from client side?\n. yes\n. strange i dont receive this error. check if you can resolve dns from your machine that you launch the script\n. yes do the same from 50 minutes for me too, i think the new login autentication its required and the server drop the connection if the login fail\n. yes its right changed autentication  we wait for new summit\n. ",
    "abhishekdelta": "Anyone planning to create a pull-request with the updated version of this API ? If not, can you please send the code to me for those who got it working. I'm working on a linux desktop-client for this. Thanks. \n. ",
    "ericcastro": "yep whatsapp allows only one logged in session at a time\n. websapp.net could easily be just using one or multiple cellphone session and redirect every message through a custom built app from there. So that's not really proof of them actually implementing the protocol.\nI say this because I have developed myself an autoresponder that injects into whatsapp app in iOS via MobileSubstrate and well, you can do pretty much everything without actually implementing the protocol that way.\n. if you have trouble receiving or getting an exception make sure you have either exited the app completely on your phone or set it to airplane mode before trying.\nthis is because WhatsApp becomes desconnected when PHP code becomes online, but shortly after, WhatsApp on your phone will automatically attempt to reconnect, messing up the PHP session.\n. ",
    "Dawnation": "@waninkoko could you upload your amended whatsapi login code?\nIm working based on your:\nhttp://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\nbut your code will save everyone alot of time to fix the api\n. @waninkoko provided an extremely helpful guide here:\nhttp://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation\nbut I'm not managed to fix it since Im not really a coder :(\n. @beldar you managed to login yet?\n. \"Description: Wazapp allows you to communicate with your friends who use Whatsapp on their phones.\n Wazapp is powered by Yowsup, the Whatsapp client library\"\nYowsup is in .pyc which means you need to decompile it, and Im peeking at wauth.pyc...\ncould it be the clue?\n. wassapp is using the Yowsup library.\nthey are using the new protocol.\n. @hermanho\ngreat job!\nnow.. we need a php version of this. LOL\n. @hermanho \nhttps://github.com/hermanho/WhatsAPINet/tree/Protocol_1.2\nis not there now??\nor you made a mistake, the 1.2 branch is same as the old code?\n. @hermanho\nthanks! It just fleak me out. LOL \n. testing the APINet 1.2: WhatsAppPort\ngot this error after login:\nBinTreeNodeReader->readListSize: Invalid token $token\nin following function:\nprotected int readListSize(int token)\n        {\n            int size = 0;\n            if (token == 0xf8)\n            {\n                size = this.readInt8();\n            }\n            else if (token == 0xf9)\n            {\n                size = this.readInt16();\n            }\n            else\n            {\n                throw new Exception(\"BinTreeNodeReader->readListSize: Invalid token $token\");\n            }\n            return size;\n        }\n. >   WhatsAppApi.dll!WhatsAppApi.Helper.BinTreeNodeReader.readListSize(int token) Line 302   C#\n\nWhatsAppApi.dll!WhatsAppApi.Helper.BinTreeNodeReader.nextTreeInternal() Line 240 + 0xb bytes    C#\nWhatsAppApi.dll!WhatsAppApi.Helper.BinTreeNodeReader.nextTree(byte[] pInput) Line 111 + 0x8 bytes   C#\nWhatsAppApi.dll!WhatsAppApi.WhatsApp.processInboundData(byte[] data) Line 391 + 0x10 bytes  C#\nWhatsAppApi.dll!WhatsAppApi.WhatsApp.PollMessages() Line 172 + 0x21 bytes   C#\nWhatsAppPort.exe!WhatsAppPort.frmForm.ProcessMessages(object sender, System.ComponentModel.DoWorkEventArgs args) Line 84 + 0x10 bytes   C#\n\n. tried whatsapptest and encountered:\n\nerror: Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.\nprotected byte[] flushBuffer(bool encrypt = true)\n {\n            byte[] data = this.buffer.ToArray();\n            byte[] ret = new byte[data.Length + 3];\n            //byte[] ret = new byte[256];\n            byte[] size = this.GetInt24(data.Length);\n            Buffer.BlockCopy(size, 0, ret, 0, 3);\n            if (encrypt && this.Encryptionkey != null)\n            {\n                data = Encryption.WhatsappEncrypt(Encryptionkey, data, true);\n                size[0] |= 0x8;\n            }\n            Buffer.BlockCopy(data, 0, ret,3, data.Length);  <== ERROR HERE\n            this.buffer = new List();\n            return ret;\n}\nCall Stack:\n\nWhatsAppApi.dll!WhatsAppApi.Helper.BinTreeNodeWriter.flushBuffer(bool encrypt) Line 123 C#\n    WhatsAppApi.dll!WhatsAppApi.Helper.BinTreeNodeWriter.Write(WhatsAppApi.Helper.ProtocolTreeNode node, bool encrypt) Line 97 + 0xc bytes  C#\n    WhatsAppApi.dll!WhatsAppApi.WhatsSendHandler.SendAvailableForChat(string nickName) Line 63 + 0x21 bytes C#\n    WhatsAppApi.dll!WhatsAppApi.WhatsApp.sendNickname(string nickname) Line 199 + 0x25 bytes    C#\n    WhatsTest.exe!WhatsTest.Program.Main(string[] args) Line 41 + 0x10 bytes    C#\n. This is code from Yowsup (working lib of wazaap), does it help?\n\n```\ndef processBuffer(self):\n    buf = self.out.getBuffer()\n    prep = [\n        0,\n        0,\n        0]\n    prep.extend(buf)\n    length1 = len(self.out.buf)\n    num = 0\n    if self.outputKey is not None:\n        num = 1\n        prep.extend([\n            0,\n            0,\n            0,\n            0])\n        length1 += 4\n        prep = bytearray(prep)\n        res = self.outputKey.encodeMessage(prep, len(prep) - 4, 3, len(prep) - 4 - 3)\n        res[0] = (num << 4 | (length1 & 16711680) >> 16) % 256\n        res[1] = ((length1 & 65280) >> 8) % 256\n        res[2] = (length1 & 255) % 256\n        self.out.buf = res\n        return None\n    prep[0] = (num << 4 | (length1 & 16711680) >> 16) % 256\n    prep[1] = ((length1 & 65280) >> 8) % 256\n    prep[2] = (length1 & 255) % 256\n    self.out.buf = prep\ndef flushBuffer(self, flushNetwork):\n    self.processBuffer()\n    size = len(self.out.getBuffer())\n    if size & 1048575 != size:\n        raise Exception('Buffer too large: ' + str(size))\n    size & 1048575 != size\n    self.realOut.write(self.out.getBuffer())\n    self.out.reset()\n    if flushNetwork:\n        self.realOut.flush()\n```\n. @adasmalakar Can you tell us in more detail?\n. ye I did that change but still not working for me. I am talking about pure text message, without image. Are you the same case?\n. ",
    "walter-white": "I'm on the same situation, I send the authentication node but the server doesn't response. \nMy code is pretty similar to the original one, just changing the magic bytes, and using writeInt24 for the flush buffer, but I don't receive any data from the server after send the StartStream, should I receive any?\nHere my code:\n```\npublic function Login()\n{\n    $resource = \"$this->_device-$this->_whatsAppVer-$this->_port\";\n    $data = $this->_writer->StartStream($this->_whatsAppServer, $resource); \n    $feat = $this->addFeatures();\n    $auth = $this->addAuth();\n    $this->sendData($data);\n    $this->sendNode($feat);\n    $this->sendNode($auth);\n$this->processInboundData($this->readData()); //I don't receive any data here, so I can not generate the AuthResponse \n$data = $this->addAuthResponse();\n$this->sendNode($data);\n$cnt = 0;\ndo\n{\n    $this->processInboundData($this->readData());\n} while (($cnt++ < 100) && (strcmp($this->_loginStatus, $this->_disconnectedStatus) == 0));\n\n}\n```\nAny idea of what happens?\n. @saschagehlich so are you working with the old code, and are you receiving a valid response for the challenge? Can you please explain what have you change? Because the old code is not working for me neither.. \n. Well, now i'm receiving answer form the server. :D\nI just modified this two lines of the current version and I'm receiving response for my challenge request.\n$authHash[\"mechanism\"] = \"WAUTH-1\";\n    $authHash[\"user\"] = $this->_phoneNumber;\nDon't change the dictionary and magic bytes and this should work.\n. @beldar I have downloaded your code and I have changed the line $this->_output .= \"\\x01\\x02\\x00\\x00\"; for $this->_output .= \"\\x01\\x02\"; and is also not working. pretty weird...\nIn the other hand, I'm receiving now an Undefined offset: 1 in the challenge array, and also an unknown \"nonce\" parameter on the challenge array. I guess I have to read it with the new structure of header. \n. @beldar So, if you are getting the response for the challenge array, could you update your code as soon as possible? thx\n. I'm having the same problem, @waninkoko , any idea on this?\nI have downloaded your wassap application and is working perfectly on received messages so I assume you are no having this problems. Any clue will be very appreciated. \nThanks in advance\n. Hi there,\nI'm being blocked also on so many whatsapp accounts. The last one has been blocked after one day and a half of intensive use, sending 790 messages to 374 contacts. The phone has made the process of Login 44 times, and then has been blocked. I will try to spread the use between different mobiles. \nWhat about the message typing, somebody has it implemented. \nSome new ideas?\n@kingk110 have you got any idea of why are we getting blocked?\n. @Akuka I have read that you have implemented a method to check if is the number is registered in whatsapp, like the one of yowsup but in php. Do you mind to share it with me/us ? \nThanks\n. ",
    "crondaemon": "The best way I found to sniff whatsapp sessions is:\nwifi ad hoc network between phone and pc\nwired connection between pc and out link (router in your case)\nforwarding enabled on pc\nmasquerading enabled on pc or adhoc subnet routing enabled on router\nwireshark on wifi or ethernet interface of pc\nHope it helps.\nOn Tue, Nov 6, 2012 at 10:51 AM, D\u00eddac notifications@github.com wrote:\n\nDear all,\nPlease, I'd like to know how to capture packets in my router since\nwireshark is only available to capture my computer...\nBest regards,\n\nD\u00eddac P\u00e9rez\n2012/11/6 walter-white notifications@github.com\n\nI'm on the same situation, I send the authentication node but the server\ndoesn't response.\nMy code is pretty similar to the original one, just changing the magic\nbytes, and using writeInt24 for the flush buffer, but I don't receive\nany\ndata from the server after send the StartStream, should I receive any?\nHere my code:\npublic function Login()\n{\n$resource = \"$this->_device-$this->_whatsAppVer-$this->_port\";\n$data = $this->_writer->StartStream($this->_whatsAppServer, $resource);\n$feat = $this->addFeatures();\n$auth = $this->addAuth();\n$this->sendData($data);\n$this->sendNode($feat);\n$this->sendNode($auth);\n$this->processInboundData($this->readData()); //I don't receive any data\nhere, so I can not generate the AuthResponse\n$data = $this->addAuthResponse();\n$this->sendNode($data);\n$cnt = 0;\ndo\n{\n$this->processInboundData($this->readData());\n} while (($cnt++ < 100) && (strcmp($this->_loginStatus,\n$this->_disconnectedStatus) == 0));\n}\nAny idea of what happens?\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10104456>.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10104562.\n\n\nQuando hai fretta, l'unica cosa sensata da fare e' rallentare.\n. Good to know. Do you think that a single project would be preferred? In the\ncurrent one, there are python and php implementation. Maybe the ruby one\ncould be added instead of having 2 different projects.\nOn Wed, Nov 7, 2012 at 8:17 PM, Julio Napur\u00ed notifications@github.comwrote:\n\nhttps://github.com/daniele-m/ruby-whatsapp\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/137#issuecomment-10161011.\n\n\nQuando hai fretta, l'unica cosa sensata da fare e' rallentare.\n. ",
    "ayuens": "@hermanho\nappreciate :+1: \n. same problem here ..\n. However, login is still working\nOnly the exist.php is broken :(\n. ",
    "SikiFn": "The Reason For Why You Aren't Getting Any Response From The Server \"I GUESS\" Is Because WhatsApp Servers Aren't Responding To Unencrypted SSL Connections Anymore.\nWhatsApp Uses SSLSocketFactory Class (For Android) In It's Code.\nWhen I Edited That And Made The Connections Unencrypted (Suppressed SSLSocketFactory And Used Sockets Directly), The Original WhatsApp Client Wasn't Able To Get Any Responses Anymore.\n. Maybe you got disconnected because the FunXMPP (WhatsApp) protocol only holds one session per time.\nSo, your phone reconnected and your script got disconnected.\n----- Reply message -----\n\u0645\u0646: \"Sascha Gehlich\" notifications@github.com\n\u0625\u0644\u0649: \"venomous0x/WhatsAPI\" WhatsAPI@noreply.github.com\n\u0646\u0633\u062e\u0629: \"SikiFn\" siki.zfn@gmail.com\n\u0627\u0644\u0645\u0648\u0636\u0648\u0639: [WhatsAPI] Login broken (#126)\n\u0627\u0644\u062a\u0627\u0631\u064a\u062e: \u0623\u0631\u0628\u0639\u0627\u0621, \u0646\u0648\u0641\u0645\u0628\u0631 7, 2012 8:58 \u0645\nOkay, I'm able to decrypt the success message, but it has some weird content...\nrx  <success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" status=\"active\" kind=\"paid\" creation=\"1281601615\" expiration=\"1597134415\">\ufffd4\ufffd\ufffd\ufffd\ufffdo\ufffd\u073a8\ufffd@\"\ufffd\ufffd</success>\nAnd shortly after I received that and sent my username, I get disconnected...\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/126#issuecomment-10160398\n. I fixed it by pollMessages() instead of sleeping..\n. Issue Fixed Here: https://github.com/SikiFn/WhatsAPI/commit/692a8cd9aa4e7915740ba482de6e7b26caf8eb77\nWaiting Merging :+1: \n. Just explained there :+1: \n. $v = new vCard();\n$v->set('data', array(\n    'first_name' => 'Some Contact',\n    'last_name' => '',\n    'cell_tel' => 'THE NUMBER',\n));\n$w->sendVcard('TARGET', 'Some Contact', $v->show());\nThis code is working :100: %\n. As I explained above:\n- WhatsApp saves your broadcast list in the database as [Current Timestamp]@broadcast (e.g: 1408570072@broadcast). The [Current Timestamp] is the timestamp when the broadcast list is created.\n- When you change your phone and re-register to WhatsApp, the broadcast lists you already created will be synced to the new phone and they will be saved with the [New Current Timestamp], not the same as the time stamp when the group is created. For this reason, I don't think that the name of the broadcast list is saved on WhatsApp server, but the contacts in the broadcast list itself are saved there with some unique identifier, maybe..\n. Download the latest script and use while($w->pollMessage()); instead of pollMessages()\n. ",
    "Starsong": "@hermanho is your code working now?\nI changed computer and need to re-install .Net to test your code again, may need a couple of hours or so.\n@tgalal This is great news! If you could help a bit on the PHP debug which will be superb!\n. @hermanho\nrebuild your latest API and using the whastest for testing. Sometimes the login is successful, but sometime keep getting socket time out, should I test using whatsappport?\n. Just finished testing @waninkoko 's source.\nIts fully functional sending messages! GREAT WORK!\n. ye, sending working fine.\nafter it poll 3 of the previously undelivered messages it throw error.\n. Time to look up the related code in Yowsup\nhttps://github.com/tgalal/yowsup\n. @eslamo No. Not working for me too.\n. this code fixed my problem, thanks!\n. ",
    "arne-e": "sending with waninkokos fork just works fine... but pollmessages crashes :(\nthe token is always a different number\nphp -f testprotocol.php\nPHP Fatal error:  Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 79' in /root/whatsappnew/WhatsAPI/src/php/protocol.class.php:268\nStack trace:\n0 /root/whatsappnew/WhatsAPI/src/php/protocol.class.php(214): BinTreeNodeReader->readListSize(79)\n1 /root/whatsappnew/WhatsAPI/src/php/protocol.class.php(133): BinTreeNodeReader->nextTreeInternal()\n2 /root/whatsappnew/WhatsAPI/src/php/whatsprot.class.php(150): BinTreeNodeReader->nextTree('??Ta??Z??9m3\"??...')\n3 /root/whatsappnew/WhatsAPI/src/php/whatsprot.class.php(226): WhatsProt->processInboundData('??Ta??Z??9m3\"??...')\n4 /root/whatsappnew/WhatsAPI/src/php/testprotocol.php(28): WhatsProt->PollMessages()\n5 {main}\nthrown in /root/whatsappnew/WhatsAPI/src/php/protocol.class.php on line 268\nEDIT: received status messages and x:event messages get polled, but a real message send to this number doesnt\n. with the latest version image sending works fine for me...\nthere is just one problem in protocol.class.php\nline 477 - 482\nprotected function writeInt16($v)\n{\n    $ret = chr(($v & 0xff00) >> 8);\n    $ret .= chr(($v & 0x00ff) >> 0);\n    return ret;\n}\nit must me return $ret;\nthen everything works like a charm!! even with a real picture as thumb not just a black square :P\n. im using the included example in testprotocol.php\n$iconfile = \"../../tests/thumb.jpgb64\";\n$fp = fopen($iconfile, \"r\");\n$icon = fread($fp, filesize($iconfile));\nfclose($fp);\n$w->MessageImage(time() . \"-1\", \"49**\", \"https://lh3.googleusercontent.com/-vT0wjhrlTaQ/T_bwd4_PUYI/AAAAAAAABog/oKPZ6ssJqC0/s673/DSC02471.JPG\", \"DSC02471.jpg\", 55508, $icon);\nworks perfect! also created a new icon with the included createIcon() function. the resulting thumb also works perfect! :)\n. yes i received them... the example thumb and also my own thumbs! :) im using an iphone4 as receiver :)\n. how do i paste code? :/ it looks destroyed when i just paste it here :/\n. ive got the node, but when pasting here it looks shitty :D \nwait...\nhttp://pastebin.com/ZAN73MDp\n. works like before protocol 1.2 was implented, the only difference that i see is that when receiving an image the thumbnail is already base64 decoded... the node contains allready the raw image. but when sending it has to be base64 encoded.\n. yep... im sure... tried it with dozen of images now... always worked perfect... is it possible here to make a private conversation? maybe i can help, but then we wouldnt spam this thread^^\n. @beldar kerby82 and i are just trying around to find out whats the problem...\nwe found that when using just the MessageImage() command, it doesnt work! when using another MessageImage commands directly after the first, the first image arrives but the second doesnt. when using \n$w->PollMessages();\n$msgs = $w->GetMessages();\nafter the messageImage() command it also works!\n(also works for kerby82, so this seems to be the problem)\nseems like messageimage doesnt close the node correctly or something :/ there must be a following node or something that it works...\nim new to the protocol and stuff so i dont know what could be the problem, but maybe you have a idea now?\nEDIT: sleep(1) after MessageImage() also does the trick... :/\n. :) great!\nbut do you know why there must be a sleep after the last command, otherwise it would be recognized by the server?\n. but sleep() doesnt pull any answers from the server?\n. yeah, but as i said, a sleep() does the trick allready. and sleep() is just well that the script sleeps...\n$w->MessageImage(...);\n?>\ndoesnt work, but\n$w->MessageImage(...);\nsleep(1);\n?>\ndoes...\nalso \n$w->MessageImage(...);\n$w->MessageImage(...);\n?>\nbut here the second messageimage command is not working (image gets not delivered to rcpt) but the first is working...\nthats strange :/\n. @beldar you mean this \"Our message was received by server: S>C\" ?\nbut i dont understand why this should be the point. is WhatAPI responding to this message? its atleast not said in messages.md... for me it looks more like just an info message. in the real client it would be the first green tick (received by server) and the second for received by opponent.\nbut why should the server not deliver the message when i dont pull the received message.\nand i still dont understand why while sleeping something is received? when the script is sleeping the script doesnt do anything i think? :/\n. but when using sleep() you dont pull this message from the server...?!\n. so always end the script when using whatsapi with\nsleep(1);\n?>\nand youre on the safe side :P\n. theres a bug in like 477 - 482:\nprotected function writeInt16($v)\n{\n    $ret = chr(($v & 0xff00) >> 8);\n    $ret .= chr(($v & 0x00ff) >> 0);\n    return ret;\n}\nmust be return $ret;\nthen everything works like a charm! also sending images with thumbs etc. no errors and crashes anymore! :)\n. ",
    "luizart": "Hi, i tested the code and login worked fine, but the second time in the loop to read data, gave a message : \nPHP Warnig: socket_read(): unable to read from socket[10060]\n. This happened after i got: \n< ib from=\"s.whasapp.net\">\n < offline count=\"0\"> < /offline>\n< /ib>\n. ",
    "Fidelity88": "I got the same problem. Weird thing is when I disconnect and send 2 offline messages, then I reconnect, I receive the oldest message before receiving above error.\n. @mgp25 can you post it here for others to see/learn or on pastebin? Tnx!\n. +1 for this, a forum would be great and would lead to better documentation as you can make different sticky topics etc.\n. No the eventmanager is called oustide of the while loop.\n```\n[...]\n$w = new WhatsProt($username, 0, \"xxxxxx\", false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->eventManager()->bind(\"onGetImage\", \"onImage\");\n$w->connect();\n$w->loginWithPassword($password);\n$time=1;\nwhile($time <= 40)\n{\n    if ($time <= 5) {\n        $w->pollMessages();\n    } else {\n[...]\n```\nSince sending and receiving can't be done simultaneously, I always look for new messages the first 5 seconds. Then I process outgoing messages if there are any. When that is done I look for new messages again until the time run == 40 seconds :)\n. So nobody actually knows what this error is causing is my conclusion now... I'm getting this error even when not receiving or sending out messages, so it would have nothing to do with the content or the time between messages.\n. It does work! But I keep getting errors. I can just ignore the errors, but rather fix it :)\n. Nope, only 1. So kinda weird I still get errors\n. ",
    "dsclemente": "Hello @ericcastro,\nWere you telling about sending whatsapp messages over a device (iPhone) ?\nmight you tell me what is the send method and the arguments you have passed to the application ?\nMany thx !\n. ",
    "alejandro-anv": "jandrito80: how did you do for receiving messages? I am using waninkoko's code but I am having the same problem that GabrielBinato: I can send messages but received packets can't be processed I suppose there is a problem un unencryption of the message (an exception error)\n. @beldar: what fix? I yesterday downloaded the code from https://github.com/lowlevel-studios/WhatsAPI \nEDIT: oh!, sorry. I dident see that there is a new commit here. It works now, thank you.\n. Question about PollMessages() or GetMessages()... Is there a way for detecting if it is returning nothing because there is nothing to read or because the connection was colsed (in order to reconnect if needed)?\n. @jean151515 I think you should check the old dictionary for the meaning of \\x74, \\xa2, \\x11, \\x61 and \\xfc and cerate a node with the words instead of the numbers. Then it will be correctly encoded with the new dictionary. By the way, you could post the code for adding it to the library.\n. @beldar The correct way for checking if a message was delivered is to mantain the program running forever waiting for notifications from the server. There may be needed to wait various minutes sometimes, and in case of problems, it may never arrive.\nThe best way to manage this is to create a daemon. When you want to send a message, you send it to the daemon or stores it in an output queue. The daemon should check this output queue and send all the unsent messages. Be adviced that you should not send many messages without reading server response between them. In this responses tehere will be notifications of server acceptance of your message (first check) and user received (the second check). There is no need for \"sleep(1)\" because   PollMessages waits one second for socket input if there is no data to read.The daemon should mark the messages in the output queue and it may retry sending if it lasted a few minutes without server acceptance.... or send it throug sms... \nBy the way: the server has the \"habit\" of closing the connection without advise, then the daemon should re-login if needed.\n.  styl3R: what php api should I use?\n. Hummm... but yowsup is for python and my app is written in php... May be I will need to port it to python... or wait for the php api to be updated...\n. @shirioko: the problem is that my app is doing more than just sending messages. It sends the message, records the sending/reception time; if the messages was not received in a few minutes it sends it via SMS. If it is replied it processes the answer and redirects it to someone else's phone or if the sender is authorized it accepts commands, etc. etc. \nThen, the whatsapp client must be running all the time in order to receive messages, but in this case, you cannot send messages via command-line (because it does not accept more than one client connected at a time)...\n. @phpKing So... the api will need to do all the registration process... Will it be possible?\n. Is anybody working on get this api working again or it was deprecated? (I could try but I don't want to duplicate efforts)\n. For the record: this are the detailed instructions: https://github.com/venomous0x/WhatsAPI/issues/238\nAnd one extra info: if you use an already registered IMEI, you will receive the password without needing to receive and sms and register.\n. ",
    "tommyrach": "I tried to use the following url:\n- https://r.whatsapp.net/v1/exis...\n- https://r.whatsapp.net/v1/exist.php?cc=$countrycode&in=$phonenumber&udid=$password\nit seems doesn\u2019t function!!!, And this is a first problem....\nInstead, about whatsapp packets, analyzing the traffic with wireshark, i see the first packet sent from the client to the server is divided in two parts, the first (FIXED) containt the model of the phone and the telephone number, the second is a \u201cVARIABLE\u201d part that maybe work for the encryption of the session.\nWhat i have seen is that this second part (variable), change every time a new session from the client to the server START.\nAny idea about the encryption?\n. Ok.... what about ...\"The part that changes is your challenge key which is randomly generated by WhatsApp during login.\" \nIn particular while sniffing traffic what i have seen the following things:\nCLIENT  <-------------------------------> SERVER\nPKT 1    |            -------------------------------->  | (Len about 120/130 Byte)  In this packet thre is the model of the phone and the phone number\nPKT 2    |           <--------------------------------   | (Len 88 bytes) ????\nPKT 3    |            <--------------------------------  | (Len 16 bytes) ????\nPKT 4    |            <--------------------------------  | (Len 21 bytes) ????\n......\n.....\nPKT N\nWhat about these first packets??? Can (and how) i use them for decrypt whatsapp traffic?\n. Ok the data is binary but not in clear.\nThere is a way for read their content (messages, info....)? \n. So, if i understood, i can extract sniffed packets from wireshark (whatsapp paylod data) and use \"DecryptMessages\" from decrypt the content?\n. I have tried to decrypt packets, and it seems doesn't function, what i've done is the seguent:\n- i've modified whatsprot.class.php, as you said with function DecryptMessages ....\n- Also i've modified whatsapp.php as seguent (removed all access to whatsapp) and calling the function DecryptMessages with the byte sequence captured with wireshark :\n  <?php\n  require \"../src/php/whatsprot.class.php\";\nfunction fgets_u($pStdn) {\n    $pArr = array($pStdn);\nif (false === ($num_changed_streams = stream_select($pArr, $write = NULL, $except = NULL, 0))) {\n    print(\"\\$ 001 Socket Error : UNABLE TO WATCH STDIN.\\n\");\n    return FALSE;\n} elseif ($num_changed_streams > 0) {\n    return trim(fgets($pStdn, 1024));\n}\n\n}\n$nickname = \"MY NICKNAME\";\n$sender =   \"MY PHONE NUMBER\";\n$imei =     \"MY IMEI\"; \n$countrycode = substr($sender, 0, 2);\n$phonenumber=substr($sender, 2);\necho \"[] Logging in as '$nickname' ($sender)\\n\";\n$wa = new WhatsProt($sender, $imei, $nickname, true);\n$wa->DecryptMessages('800018955F68CB7D28550D47E5E06E59C8355E7BF44EB3FF464246');\n?>\n. ???\n. Sorry shirioko, but i get packets from offline wireshark files... so how do i pass the payload data of whatsapp to \n$wa->DecryptMessages...???\n. Any suggestion? THANKS!!!!\n. ",
    "avdeshkataria": "Hi,\nI'm developing the .net application to send mesages using Whatsapp api (version 15.4.29(https://www.nuget.org/packages/WhatsAppAPI/)).\nI generate the password of sender using WART.\n2 months back, the code was working and able to send messages. but suddenly its stopped working. Now i'm getting \"Not - Authorized\" error while log in.\nCode :\n\nWhatsApp wa = new WhatsApp(sender1, password, \"ajcfday\", true);\n                // wa.Login();\n                wa.OnConnectSuccess += () =>\n                {\n                    wa.OnLoginSuccess += (phoneNumber, data) =>\n                    {\n                        wa.SendMessage(rcvr/* Number */, mainMessage);\n                        result = result + Environment.NewLine + \"Sender: \" + sender1 + \"--- Message Sent\";\n                    };\nwa.OnLoginFailed +=\n                    (data) =>\n                    {\n                        result = result + Environment.NewLine + \"Sender: \" + sender1 + \"--- Result ----> \"+ data;\n//\"Not - Authorized\" Error is Coming here   <--------------------------------------\n                           // MessageBox.Show(data);\n                        };\n                    wa.Login();\n                };\n                string sender2 = sender1;\n                wa.OnConnectFailed += (ex) =>\n                {\n                   // MessageBox.Show(ex.Message);\n                    result = result + Environment.NewLine + \"Sender: \" + sender2 + \"--- Exception occur ----> \" + ex.Message;\n                };\n                wa.Connect(); \n\nPlease help................... \n. Hi,\nI'm Whatsapp api version 15.4.29(https://www.nuget.org/packages/WhatsAppAPI/).\nI generate the password of sender using WART.\n2 months back, the code was working and able to send messages. but suddenly its stopped working. Now i'm getting \"Not - Authorized\" error while log in.\nCode :\n\nWhatsApp wa = new WhatsApp(sender1, password, \"ajcfday\", true);\n                // wa.Login();\n                wa.OnConnectSuccess += () =>\n                {\n                    wa.OnLoginSuccess += (phoneNumber, data) =>\n                    {\n                        wa.SendMessage(rcvr/* Number */, mainMessage);\n                        result = result + Environment.NewLine + \"Sender: \" + sender1 + \"--- Message Sent\";\n                    };\nwa.OnLoginFailed +=\n                    (data) =>\n                    {\n                        result = result + Environment.NewLine + \"Sender: \" + sender1 + \"--- Result ----> \"+ data;\n//\"Not - Authorized\" Error is Coming here   <--------------------------------------\n                           // MessageBox.Show(data);\n                        };\n                    wa.Login();\n                };\n                string sender2 = sender1;\n                wa.OnConnectFailed += (ex) =>\n                {\n                   // MessageBox.Show(ex.Message);\n                    result = result + Environment.NewLine + \"Sender: \" + sender2 + \"--- Exception occur ----> \" + ex.Message;\n                };\n                wa.Connect(); \n\nPlease help................... \nMy email is is : avdeshkataria@gmail.com\n. ",
    "gmonte": "login 'not-authorized' exception. why??\nWhats.OnLoginSuccess += (phoneNumber, data) =>\n                        {\n                            Whats.SendMessage(to, msg);\n                            Console.WriteLine(\"Enviando mensagem...\");\n                        };\n                        Whats.OnLoginFailed += (data) =>\n                        {\n                            MessageBox.Show(\"login falhou: \" + data);\n                        };\n                        try\n                        {\n                            Whats.Login();\n                        }\n                        catch (Exception er)\n                        {\n                            MessageBox.Show(\"login falhou: \" + er.ToString());\n                        }\n. ",
    "usiboy": "The same to me!!! yesterday it is ok, but today it can't receive any message, although server response success message, but my mobile can't wait for any message. OMG.\n. Thanks spookyman, Hoping and Waiting for your latest version\n. ",
    "luca98": "How do I use the php file?\n. ",
    "namorha": "Hi!\nI want to create an alert system and to send registered users an whatsapp.\nBut when I create a loop to just send it to two users. This loop is good because now emailed.\nWith this loop only let me send it to two users.\nThanks and regards\n. ",
    "vish74": "yeah @kerby82  you are right...so any idea...how to get new authentication protocol...means that encryption function??...read somewhere that some are doing using wireshark...if you know & can help\nThanks..\n. ",
    "davidste": "They have overload on their servers\n\u05e0\u05e9\u05dc\u05d7 \u05de\u05d4-iPhone \u05e9\u05dc\u05d9\n\u05d1-4 \u05d1\u05e0\u05d5\u05d1 2012, \u05d1\u05e9\u05e2\u05d4 22:14, eslamo notifications@github.com \u05db\u05ea\u05d1/\u05d4:\n\nin this moment the server timeout ... can't connect at all .. i think it's a maintenance case in wup servers.\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "narasimha6666": "Hi... \nI am getting \"An established connection was aborted by the software in your host machine\", please let me know how to solve this issue.. ",
    "elslooo": "I can confirm that it's fully working. Amazing work @waninkoko!\n. The only thing that's not working is receiving messages that were sent while the client was offline. That's what causes the client to crash when you try to run it after a message has been sent that was not already received when the client was still online.\nFix for now is to run the native client with the same credentials, so that \"offline received\" messages are sent there, instead of the unofficial client.\n. ",
    "zjorzzzey": "@waninkoko: \ngood job!\ni have one question: in the message header, which bit exactly is the encryption flag? If I understand correctly, http://lowlevel-studios.com/whatsapp-protocol-1-2-a-brief-explanation explains the first four bits of the message header are used to store some flags. The first bit of this nibble would be the encryption flag (e.g. 1000b in binary). Is this correct? If my bitwise math is correct, it looks like you set the flag at the fourth bit of the first byte (e.g. 0001 0000b) in flushBuffer():\n$ret  = $this->writeInt8(isset($this->_key) ? (1 << 4) : 0);\n(protocol.class.php line 437)\nis this intentional, or is any value in the first four bits interpreted as encrypted=true?\n. Ok, thanks for clarification. It does feel a bit strange (imagine how confusing it gets when they need to use all four flags somewhere in the future) but hey, it works!\n. I have come up with a solution that works for me: see #152\n. ",
    "veno": "Thanks @waninkoko, we'll update the related files later.\n. Yup, the other files are still not updated to reflect 1.2 changes ...\n. ",
    "manufuentescr": "excellent work congratulations geniuses\n. I managed to send a picture of 1162 bytes, but the same problem occurs to me, in the sending process does not fail but does not reach to your destination. Sometimes it reaches the recipient and sometimes not\n. @beldar , I corrected the variable $ ret but the same happens to me intermittently sends images but sometimes the message reaches its destination and sometimes not\n. I think that the error is given by the method Request Last Seen. Try commenting out the line that invokes it, I did and now sends the messages perfectly.\n. the file tests/whatsapp.php  on line 104 \n. works perfectly\n. Maybe your account is locked\n. but only changed the method in iPhone, or also in android??\n. I confirm that Android still works, I tested 29/11/2012 at 8:16 today, register the account from the official app version 2.8.7326\n. No se si para BlackBerry ya hicieron la actualizacion yo estuve averiguando y parece que la actualizacion del metodo del password lo implementaron en iphone pero para android todavia no la han implementado(claro es cuestion de tiempo) yo registr\u00e9 mi numero con el app oficial desde android puedes hacerlo con un emulador de android como BlueStacks\n. marcas en el telefono *#06# y lo utilizas asi como te lo despliega, para utilizarlo en la url tienes que darle vuelta y hacerle un md5 ejemplo si tu ime es 1234 tienes que darle vuelta a 4321 y a eso hacerle un md5 este script de php te puede ayudar a hacer eso:\nphp\n\n<pecho md5(strrev(\"tu_imei\"));\n?>\nEspero que te sirva!!!\n. I have the same problems, you found the solution?\n. My url is as follows\nhttp://img856.imageshack.us/img856/3269/gruvis.jpg\nAs should be the url??\nI have to upload your image to whatsapp server?\n. Exactly, the problem is that it smells like a new version, probably very soon they will not accept the registered numbers from this API, hopefully this will not happen XD\n. I changed my function encryptIMEI()\npublic function encryptIMEI()\n{\nreturn urlencode(md5(strrev($this->_identity), true));\n}.\nI've tried so\n$userPhone        = '8888888888888';       # Telephone number including the country code without '+' or '00'.\n$userIdentity     = '00000000';\n$userName         = 'manufuentescr';  \n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->checkCredentials();\nbut unfortunately it does not work to my, get the following\nstdClass Object\n(\n    [status] => fail\n    [reason] => incorrect\n    [sms_length] => 6\n    [voice_length] => 6\n)\nthe numbers that I use for the test were registered with this API\n. it works, but first you must use requestCode (), you're right, the problem is that I would have to  register the numbers again, these work with md5 (strrev ($ imei))\n. Hola jesus la manera mas facil para mi es registrar los numeros con el API.\nHi jesus the easiest way for me is register the numbers with the API.\n. Yes @shirioko  we have to take in mind for a future update! great find ^^\n. Thank you, works perfectly !\n. I also do not work before, then I changed and now it's working, change the _whatsAppUserAgent and _whatsAppToken\nI try to make an update to the project\n. changes #311 \n. you have to encrypt $this->_identity\nThis is the method:\npublic function encryptIMEI()\n{\n        if(stripos($this->_identity, \":\") !== false)\n        {\n            $this->_identity = strtoupper($this->_identity);\n            return md5($this->_identity.$this->_identity);\n        }\n        else\n       {\n            return md5(strrev($this->_identity));\n        }\n}\n. I have done the tests,checkCredentials works, with the following steps \n1  change _whatsAppUserAgent to  :\nconst _whatsAppUserAgent = 'WhatsApp/2.4.7 S40Version/14.26 Device/Nokia302';\n2 change  _whatsAppToken to : \nconst _whatsAppToken = 'PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1359594496554';\n3 change  checkCredentials to : \n```\n public function checkCredentials()\n{\n    if (!$phone = $this->dissectPhone()) {\n        throw new Exception('The prived phone number is not valid.');\n        return FALSE;\n    }\n// Build the url.\n$this->_identity = $this->encryptIMEI();\n//echo $this->_identity.'\\n \\n';\n$host = 'https://' . WhatsProt::_whatsAppCheHost;\n$query = array(\n    'cc' => $phone['cc'],\n    'in' => $phone['phone'],\n    'id' => $this->_identity,\n\n);\n\n$response = $this->getResponse($host, $query);\nprint_r($response);\nif ($response->status != 'ok') {\n $this->eventManager()->fire('onBadCredentials', array($this->_phoneNumber, $response->status,       $response->reason));\nthrow new Exception('There was a problem trying to request the code.');\n} else {\n    $this->eventManager()->fire('onGoodCredentials', array(\n        $this->_phoneNumber,\n        $response->login,\n        $response->pw,\n        $response->type,\n        $response->expiration,\n        $response->kind,\n        $response->price,\n        $response->cost,\n        $response->currency,\n        $response->price_expiration,\n$response->status\n    ));\n}\nreturn $response;\n\n} \n```\n4   add the following function :  \npublic function encryptIMEI()\n{\n    if(stripos($this->_identity, \":\") !== false){\n        $this->_identity = strtoupper($this->_identity);\n        return md5($this->_identity.$this->_identity);\n    }\n    else {\n        return md5(strrev($this->_identity));\n    }\n}\n5   TEST :  \n$userPhone        = '8888888888';       # Telephone number including the country code without '+' or '00'.\n$userIdentity     = '00000000'; # This is tipically the IMEI number. \n$userName         = 'user';          # This is the username displayed by WhatsApp clients.\n$destinationPhone = '888888888';    # Destination telephone number including the country code without '+' or '00'.\n$debug = TRUE;\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->checkCredentials();\nI hope it works for you !!\n. I register the phone numbers with voice and it works.\nI'm still tweaking the code thanks for the suggestion !\n. thank you @shirioko  , you could give me an example of how to use contact sync v2 \nI've tried so  \u2193\u2193\u2193\u2193\n$wasync = new WhatsAppContactSync($this->_phoneNumber,$this->_password, $contacto);\n $wacontacts = $wasync->executeSync();\n print_r($wacontacts);\nbut does not work.\n. @shirioko   I try it with your last commit, but does not work  :( \nThe message I get is the following\n- About to connect () to sro.whatsapp.net port 443 (# 0)\n- Trying 173 192 219 105 ...\n- Connected\n- Connected to sro.whatsapp.net (173,192,219,105) port 443 (# 0)\n- Verify certificate in September successfully locations:\n- CAfile: none\n  CApath: / etc / ssl / certs\n- SSL connection using RC4-SHA\n- Server certificate:\n- Subject: O = . Whatsapp.net, OU = Domain Control Validated, CN = . Whatsapp.net\n- Start date: 2012-12\n- Expire date: 2015-12\n- SubjectAltName: sro.whatsapp.net matched\n- Issuer: C = U.S., S\n- Verify SSL certificate ok.\n\nPOST / HTTP/1.1 v2/sync/a\nHost: sro.whatsapp.net\nUser-Agent: WhatsApp/2.4.7 S40Version/14.26 Device/Nokia302\nAccept: text / json\nContent-Type: application / x-www-form-urlencoded\nAuthorization:\nAccept-Encoding: identity\nContent-Length: 0\nExpect: 100-continue\n- Additional stuff not fine transfer.c: 1037: 0 0\n- HTTP 1.1 or Later with persistent connection, pipelining supported\n  <HTTP/1.1 100 Continue\n  <Server: Yaws 1.94\n  <Allow: GET, POST, OPTIONS, HEAD\n  <Content-Length: 0\n- Additional stuff not fine transfer.c: 1037: 0 0\n- HTTP 1.1 or Later with persistent connection, pipelining supported\n  <HTTP/1.1 200 OK\n  <Server: Yaws 1.94\n  <Date: Thu, 25 April 2013 19:44:59 GMT\n  <Allow: GET, POST, OPTIONS, HEAD\n  <Content-Length: 24\n  <Content-Type: text / json; charset = utf-8\n  <WWW-Authenticate: X-WAWA realm = \"s.whatsapp.net\", qop = \"auth\", nonce = \"c7263f0e50a63680b5067ab2d8ff7e6d\"\n  <\n- Connection # 0 to host left intact sro.whatsapp.net\n- Closing connection # 0\n- About to connect () to sro.whatsapp.net port 443 (# 0)\n- Trying 173 192 219 105 ...\n- Connected\n- Connected to sro.whatsapp.net (173,192,219,105) port 443 (# 0)\n- Verify certificate in September successfully locations:\n- CAfile: none\n  CApath: / etc / ssl / certs\n- SSL connection using RC4-SHA\n- Server certificate:\n- Subject: O = . Whatsapp.net, OU = Domain Control Validated, CN = . Whatsapp.net\n- Start date: 2012-12\n- Expire date: 2015-12\n- SubjectAltName: sro.whatsapp.net matched\n- Issuer: C = U.S., S\n- Verify SSL certificate ok.\nPOST / HTTP/1.1 v2/sync/q\nHost: sro.whatsapp.net\nUser-Agent: WhatsApp/2.4.7 S40Version/14.26 Device/Nokia302\nAccept: text / json\nContent-Type: application / x-www-form-urlencoded\nAuthorization:\nAccept-Encoding: identity\nContent-Length: 29\n- Upload completely sent off: 29 out of 29 bytes\n- Additional stuff not fine transfer.c: 1037: 0 0\n- HTTP 1.1 or Later with persistent connection, pipelining supported\n  <HTTP/1.1 401 Unauthorized\n  <Server: Yaws 1.94\n  <Date: Thu, 25 April 2013 19:44:59 GMT\n  <Content-Length: 42\n  <Content-Type: text / json; charset = utf-8\n  <\n- Connection # 0 to host left intact sro.whatsapp.net\n- Closing connection # 0\n. I add the following method to the class whatsprot.class.php\n\npublic function contacts ($ contact)\n {\n     $ wasync = new WhatsAppContactSync ($ this-> _phoneNumber, $ this-> _password, $ contact);\n     $ wacontacts = $ wasync-> executeSync ();\n     print_r ($ wacontacts);\n  }\nEXAMPLE script following\n$ w = new WhatsProt ($ userPhone, $ UserIdentity, $ userName, $ debug);\n$ w-> Connect ();\n$ w-> Login ();\n$ w-> contacts ('+ xxxxxxxx');\nThis works but it shows me the log and then the array with the registered contact, I have no idea why this log shows!\n. Fixed, in contacts.php in the method _curlRequest  should be changed CURLOPT_VERBOSE parameter to 0\nprotected function _curlRequest ($ url, $ headers, $ postfields = false)\n {\n     / / execute curl request\n     $ ch = curl_init ();\n     curl_setopt ($ ch, CURLOPT_URL, $ url);\n     curl_setopt ($ ch, CURLOPT_SSL_VERIFYPEER, false);\n     curl_setopt ($ ch, CURLOPT_POST, 1);\n     curl_setopt ($ ch, CURLOPT_RETURNTRANSFER, 1);\n   / / curl_setopt ($ ch, CURLOPT_VERBOSE, 1), / * <------ Change to 0 * /\n     curl_setopt ($ ch, CURLOPT_VERBOSE, 0);\n     curl_setopt ($ ch, CURLOPT_HTTPHEADER, $ headers);\n     curl_setopt ($ ch, CURLOPT_HEADER, 1);\n     if ($ postfields)\n     {\n         curl_setopt ($ ch, CURLOPT_POSTFIELDS, $ postfields);\n     }\n     $ result = curl_exec ($ ch);\n     curl_close ($ ch);\n     return $ result;\n }\nWith this change no longer shows the log :-)\n. thank you very much to you, sorry if I wasted your time :/, Iam going to close the issue\n. I just realized that I can get status, with contact v2 sync. but it would be interesting to get the nickname\n. thank you very much, I'll try\n. I did several tests and discovered that the error occurs, but sends the message correctly.\n. It works perfectly\nI Use\n$ userPhone = 'xxxxxxxxxxx';\n$ UserIdentity = 'xxxxxxxxxxxxxxx';\n$ userName = 'John Doe';\n$ destinationPhone = 'xxxxxxxxxxxx';\n$ password = 'xxxxxxxxxxxxxxxxxxxxxxxxx';\n$ debug = TRUE;\n$ w = new WhatsProt ($userPhone, $UserIdentity, $userName, $debug);\n$ w->Connect ();\n$accountInfo = (array) $w->checkCredentials();\nAnd get the new data\nprint_r ($accountInfo);\nThen start session with the new password and it works perfectly\n$newpassword = $accountinfo['pw'];\n$w->LoginWithPassword($newpassword);\nThank you very much. Great contribution.\n. I try this:\n$ username = \"xxxxxxxxxxx\";\n$ identity = \"xxxxxxxxxxxxxxx\";\n$ password = \"4abb8d7c241b65001a2e4d5xxxxxxxxx\";\n$ nickname = \"nickname\";\n$ target = \"xxxxxxxxxxx\";\n$ w = new WhatsProt ($ username, $ identity, $ nickname, $ debug);\n$ w-> connect ();\n$ w-> loginWithPassword ($ password);\nI just registered the account with the API, it is assumed that the password is valid and I have not sent any message.\nBut I always get blocked\nstdClass Object\n(\n     [status] => fail\n     [reason] => blocked\n)\nAlso I have tried this\n$ username = \"xxxxxxxxxxx\";\n$ identity = \"xxxxxxxxxxxxxxx\";\n$ password = \"4abb8d7c241b65001a2e4d5xxxxxxxxx\";\n$ nickname = \"nickname\";\n$ target = \"xxxxxxxxxxx\";\n$ w = new WhatsProt ($ username, $ identity, $ nickname, $ debug);\n$ w-> connect ();\n$ w-> checkCredentials ();\nBut I also locks the account.\n. $w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->requestCode('voice', 'ES', 'es');\nthen get the code when they call \n$response = registerCode($codigo);\nget the password that comes in the response\nprint_r($response);\n. I have a multiple accounts, I tested with various some get blocked and some not !!\n. the same here  #419 \n. Just activate an account with the latest version of the official client 2.11.2, I will do more tests.\ndevice = 'Android'\nwhatsAppVer = '2 .11.2 ';\nwhatsAppUserAgent = 'WhatsApp/2.10.750 Android/4.2.1 Device/GalaxyS3';\nI get the code with the official client from BlueStacks and registry using the API\nAfter activated , I use checkCredentials() and it works perfectly.\nSend messages perfectly, for now.\n. I think not, I activated more accounts and are still active.\n. @shirioko  When I try to get the activation code I get sent , but does not give me the sms. :(\n. 10 minutes and nothing: (\nmcc and mnc are needed or I can make it 000  ?\n. I was trying with a previous version of the api, I will try with your current version\n. I try and get the following\nCan not use identity e807f1fcf82d132f9bb018ca6738a19f for registration. It does not Appear to be a valid SHA hash (length = 32) Array\n(\n     [cc] => 506\n     [in] => 70085XXX\n     [id] => e807f1fcf82d132f9bb018ca6738a19f\n     [code] => 123456\n     [c] => cookie\n)\nstdClass Object\n(\n     [status] => fail\n     [reason] => mismatch\n     [retry_after] => 62\n)\nwhere I get the identity?\n. works perfectly, thank you very much  @shirioko !\nI wanted to ask where they get the whatsAppUserAgent and whatsAppToken reverse engineering?\nI ask because I'm interested in the project, I would like to help.\n. ok thanks\n. #438 \n. Hi Jesus, this is my code\n\n<?php\nrequire_once \"contacts.php\";\n$username = 'xxxxxxxxx';\n$password = 'xxxxxxxxxxxxxxxxxxxx=';\n$contacts = array();\n$contacts[0] = \"xxxxxxxxxx\";\n$debug = true;\n$sync = new WhatsAppContactSync($username, $password, $contacts, $debug);\n$res = $sync->executeSync();\n?>\n\nI run the same script with a different account and the same contact, but with an account I get that contact has WhatsApp account with the other account get that contact does not have WhatsApp.\nThe code works the problem is that I get different answers\nEjecuto el mismo script  con otra cuenta y el mismo contacto, pero con una cuenta  obtengo que el contacto  tiene   WhatsApp, con la otra cuenta obtengo que el contacto no tiene WhatsApp. El codigo funciona el problema es que obtengo respuestas diferentes\n. Hi @shirioko !! Yes I use the international number format .\n@jesussales Yo creo que la cuenta esta activa , ademas puedo enviar mensajes normalmente.\nI think that the account is active because I get this when I make the login \nsuccess t=\"1384803859\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1383081470\" expiration=\"1414617470\">}\u00aa\u00eb\u00f40(f\u00bf\u00e2{l\u00b8\u00e0\u00a1\u00b8 /success\n. same here , i can\u00b4t login \n. I tried it and now I can Login, apparently this happens sometimes\nI have two accounts, one account I can sign in and the other I can not enter \nI try checkCredentials () and it works, I get the password, but the login does not work\n. I have 18 active accounts, I try to send a message to each of the accounts, but the tenth account I get the following debug.\n``` XML\nstdClass Object\n(\n    [status] => ok\n    [login] => xxxxxxxxxxx\n    [pw] => oOFsAz5bxAjKX0pxpdSa3ucwSCk=\n    [type] => existing\n    [expiration] => 1423159888\n    [kind] => free\n    [price] => US$0.99\n    [cost] => 0.99\n    [currency] => USD\n    [price_expiration] => 1399253306\n)\nPassword --->oOFsAz5bxAjKX0pxpdSa3ucwSCk=\n identity --->%26s%92%dc%27%82w%86d%cc%9dv%c8%e3%cd%9xxxxxxxxxxx \n\ntx   \u00fd\u00d77\u00d9xxxxxxxxxxx\u00ed\u00b0     \u00b3\u00be0J\u00fanw\u00a0\u00f9Pw1396538100WhatsApp/2.11.205 Android/4.3 Device/GalaxyS3 MccMnc/658001\nrx  \nProtocolNode Object\n(\n    [tag] => start\n    [attributeHash] => Array\n        (\n            [from] => s.whatsapp.net\n        )\n[children] =>\n[data] =>\n\n)\nrx  \nProtocolNode Object\n(\n    [tag] => stream:features\n    [attributeHash] => Array\n        (\n        )\n[children] =>\n[data] =>\n\n)\nrx  (s\u00cb$\u00aa\u00fe\u00ffN\u00d5\u00cb\u00eb=,\u00bd\u00f2\u00e9\nProtocolNode Object\n(\n    [tag] => challenge\n    [attributeHash] => Array\n        (\n        )\n[children] =>\n[data] => (s\u00cb$\u00aa\u00fe\u00ffN\u00d5\u00cb\u00eb=,\u00bd\u00f2\u00e9                                                                           b:,(</response>\n\n)                    \nb:,(tx  .\u00e8E`\u00a8\u00b1\u00efWdyje\u00ccp\u00earXW\u00c9/\u00a9\u00f0O\nrx  p\u00earXW\u00c9/\u00a9\u00f0O\nrx    \nrx  \nProtocolNode Object\n(\n    [tag] => failure\n    [attributeHash] => Array\n        (\n        )\n[children] => Array\n    (\n        [0] => ProtocolNode Object\n            (\n                [tag] => not-authorized\n                [attributeHash] => Array\n                    (\n                    )\n\n                [children] =>\n                [data] =>\n            )\n\n    )\n\n[data] =>\n\n)\n```\nAfter that I get not-authorized on all accounts. \nI wait around 2 hours, I try again and the login works but also to the tenth account login stops working\n. the problem was that the path of the image was wrong, thanks.\n. I tried, but not working\n``` php\nconst WHATSAPP_VER = '2.11.378';                // The WhatsApp version.\n const WHATSAPP_USER_AGENT = 'WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3';// User agent used in request/registration code.\n$debug = true;\n$username = '506xxxxxx';                      // Telephone number including the country code without '+' or '00'.\n$identity = 'e807f1fcf82xxxxf9bb018ca6738a19f'; // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$nickname = 'xxx'; \n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\nArray\n(\n    [method] => sms\n    [in] => xxxxxxxx\n    [cc] => 506\n    [id] => %b1%02%ce%1d%5e%eb%ac%2bmt%bd%a8%c8%7cg%a0p%c8%04%91\n    [lg] => es\n    [lc] => CR\n    [token] => c1ICNqU3Ph3qELekl80G4lj0xwc%3D\n    [sim_mcc] => 000\n    [sim_mnc] => 000\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => no_routes\n    [retry_after] => 3600\n)\n```\nmy location is in Costa Rica, some numbers work properly, others do not work\n. #983 \n. There are various ways. You can try these\nhttps://github.com/mgp25/WA-password-extractor.git  [iPhone only] by @mgp25 \nhttps://github.com/shirioko/WART.git   by @shirioko \n. ",
    "kanma1012": "According to  @arne-e, the code is  correct,\nBut I found the same problem in function writeInt24().\nprotected function writeInt24($v)\n{\n    $ret = chr(($v & 0xff0000) >> 16);\n    $ret .= chr(($v & 0x00ff00) >> 8);\n    $ret .= chr(($v & 0x0000ff) >> 0);\n    return ret;\n}\nThen, I changed (return ret;) to (return $ret;).\nI can receive the real picture and thumb on my phone perfectly.\n. ",
    "khillobaz": "what about long message still no solution ?\n. you fix them ? \n. ",
    "wanker": "I am also seeing intermittent delivery. Sending the same message sometimes works but often does not get delivered. Can someone let me know what's up? Also, I was only able to get it to work with this:\n//$wa->RequestLastSeen($dst); \n$wa->RequestLastSeen($dst, $argc[2]); // replaced with this\nBut again, it's intermittent. Input welcome.\n. I got your script to work but realized that you are simply skipping the last three arguments. I have no answers to your questions (as I'm wondering myself) but think a workaround would be to create the thumbnail locally via imagemagick. You supply it with the URL of your image and then it creates a temporary thumbnail where your script can see it. Alternatively just use a default thumbnail every time.\n. Hey Jonny - really sorry about being so thick. I just realized that I could access your branch from one of the tabs. So now I know what you really did - makes a lot more sense. I folded it into my code and will test it as soon as I get Imagick enabled on my server. Will let you know.\n. About the uploading of images to the whatsapp server. Yes, that's what I assumed it was doing. It was probably difficult for them to send an image directly to the other node. Maybe the three-node transfer makes it more reliable if one of the nodes gets disconnected. People log on/off all the time. So if I send you an image and you log off in mid-transfer it won't get there. By buffering the image in between they guarantee delivery next time the recipient logs on.\n. Hi Jonny - I just edited my dumba$$ comment to reflect that I just caught on. Sorry again for wasting your time. I'll get this running in no time - good work!\n. It's working perfectly. Kick a$$ :-)\n. @alsebawe9999 - dude, read up on the tutorial and the information provided here. You can't expect people to spoon feed you information you are too lazy to gather yourself.\n. @shirioko - Dude, stop imposing your views and interests on everyone here who is interested in this API. This whole thing is completely useless if I we are unable to send more than 20 messages out in one swoop. I have an Internet business and want to notify my subscribers (i.e. hundreds) several times a day. That's a very legitimate use and I don't need you polluting this thread on when and why this API should be used. Spammers will use it as well - yes - nothing we can do about that.\nAnd don't tell me to use email. By the way - 1990 called - it wants its hat back.\n. ",
    "jayay": "Hint: I found this page: http://pastebin.com/npbwcj1s showing the original WhatsAPP code which encrypts the IMEI. Could someone please translate it into PHP? I cannot understand Java :(\n. I encrypted my password using the java code posted above, then I have put the encrypted version into $imei. Then I've changed line 74 in whatsprot.class.php from\nphp\nreturn md5(strrev($this->_imei));\ninto\nphp\nreturn $this->_imei;\nWorks.\n. did you...\n- put your IMEI into the variable?\n- compile the program?\n- comment out the php function which encrypts the password in WhatsAPI?\n. Did you register your whatsapp with another phone number and changed then? In this case you have to log in with your old phone number.\n. I tried it using the original URL to the API:\nhttps://r.whatsapp.net/v1/exist.php?cc=49&in=15123456&udid=xxx\nwhere \"cc\" is the international country's prefix (49 for Germany), \"in\" is the rest of the phone number and udid is the generated password hash.\nWhich version of WhatsApp for S40 are you running?\n. yup. Type *#06# into your phone, this will show you the IMEI. the encrypted IMEI is the password.\n. Maybe #153 could help you.\n. er will bestimmt jemanden reinlegen...\nI guess he wants to anger somebody...\n. ",
    "in00b": "encrypted my password using the java code posted above... But Still it doesn't work.\n. ```\nput your IMEI into the variable? - Line 8 : String imei = \"1234\"; - edited ..\ncompile the program? - successfully returns some hash code.\ncomment out the php function which encrypts the password in WhatsAPI? -\npublic function encryptPassword()  {return $this->_imei;}\n```\nAll done but the api says wrong password.\n. I tried with 3 different accounts of my friends...\nEven below Api Give Wrong Password Error...\nhttps://github.com/perezdidac/WhatsAPINet\n. I already tried that doesnot work for some acc but it did worked for 1 acc ..... now is there any way to find my own password?\n. ",
    "BlackV88": "Hello,\nI would to use Whatsapi for a Nokia N80;\nI tried normal Whatsapi procedure but it doesn't work;\nHow can i use whatsapi for my Nokia N80?\nThank you.\n(I'm sorry for my low level english)\n. I know that it isn't an app for smartphone :), I tried it on Android succesfully, but reading many topics i saw that there are many problems with error \"Wrong password\" about Symbian; so I asked if there is a solution to this problem that able me to use whatsapi also with Symbian smartphone :)\n. I would to control a Whatsapp account of an N80, but I read that, 3 month ago (last topic about Whatsapi), it was impossibile because there was an error with password ( https://github.com/venomous0x/WhatsAPI/issues/153). So, after 3 months, I am asking you if it's possible to resolve that problem....I know that my english is a little incomprehensible, I'm sorry :)\nMainly, I don't know how to use java tool to obtain encrypted IMEI/ password, I don't know anything about java.\nP.S.:\nI obviously have IMEI of smartphone that i would to control...\n. ",
    "lilezek": "Well, file whatsapp.php seems to have an error on line 104. It should give that method another argument containing a messageid.\n. @youta18 I've fixed my message. Sorry. \n. Just add a messageid to that function.\n. ",
    "ElJava": "Moreover, in the lines 438 and 439 when flush the buffer if the data is encrypted saves it in the 4 bit of the first byte:\n        $ret = $this->writeInt8(isset($this->_key) ? (1 << 4) : 0);\n        $ret .= $this->writeInt16($size);\nSaves: (00000001) << 4 = 00010000 when according to the link must be 10000000\nAnd the size is saved in 2 bytes and don't modify the last 4 bits of the first byte.\nThe code must be something like this:\n        $ret = $this->writeInt24(((isset($this->_key) ? (0x80) : 0) << 20) | $size);\n. The size of the Whatsapp's node is send in this way:\n- The first 4 bits of the first byte are flags\n- The last 4 bits of the first byte and the two bytes consecutives are the size.\nThe problem is that now WhatsAPI lost the first 4 bits of the size. You haven't got problems because the size of the nodes are smaller than 2^8. If the node would be like this:\n0000 0010  xxxx xxxx  xxxx xxxx \n0000 would be flags\n0010  xxxx xxxx  xxxx xxxx would be the size and whatsAPI only would take  xxxx xxxx  xxxx xxxx.\n. Yeah...i tried it too. But the lowlevelstudios' link say that.\n. ",
    "wiseman1364": "Welcome\nI do not have prior experience in penetration., I want the simplest ways to penetrate the Android operating system. Then penetrate program whatsapp>\n. ",
    "jonnywilliamson": "No I don't think you've looked at the code.\nThe last 3 variables are not required to be passed to the MessageImage method any more because the method now:\nGets the image and puts the image contents into a variable\nCalculates the filesize\nResizes the image to create a thumbnail (100x100)\nWorks out the filename\nThat covers $file, $size, $icon\nIt's all automatic - its doing exactly what you suggested: \"to create the thumbnail locally via imagemagick. You supply it with the URL of your image and then it creates a temporary thumbnail\"\nIt doesn't even need to write the thumbnail to disk so it's very clean.\nWhat I did omit to say is that there is a second modification to the whatsprot.class.php file to implement a sendnick method so that it appears on iphones. https://github.com/venomous0x/WhatsAPI/pull/77\nHope you get/see it working too.\n. > 1) In the MessageImage method, (around line 276 in whatsprot.class.php) what purpose does the line: $mediaAttribs[\"file\"] = $file;\n\ndebugging. In this case the xml attribute is the name of the file, I don't know why it is required when the URL should >be sufficient, but real whatsapp client puts it in there so I put in there as well.\n\nOK, that's all I wanted to know, that is fine with me, if WhatsApp wants to see a file name I have no problems supplying it!\n\n2)Why must we supply the image from a URL online, if an image exists on the server/computer we are sending from, why can we not use that?\nIn order for the image to be available to the recipient then it must be accessible to the recipient, the protocol does not have any built in methods for sending the actual image to the recipient, it just sends a link, and the recipient can then download the image from that link.\n\nOk, on initial read that seems fair enough. But then I started thinking, when I use my iPhone, and I take a picture and then attach it to a message, it doesn't exist on an webserver at that moment of time.\nDoes WhatsAPP (company) itself have a storage space for user images sent via a normal mobile handset? How do they do this?\nThis isn't a critical feature, more a nice to have.\n\nThe thumbnail works because it is being base64 encoded and sent as part of the message, there appears to be size restrictions on the thumbnail however so sending a full HD style image is not possible with this method.\n\nYes I thought as much. Perhaps I should include code to ensure any thumbnail is within a certain filesize...\n\n3) I have no idea why there are so many edits in the src/php/whatsprot.class.php that seem to be related to removing blank lines and replacing them. If anyone can explain to this noob why that happened I'd be grateful.\nOK, I can't actually answer this question because I don't really know what you are talking about. :D\n\nI think it might have been an issue with netbeans, my IDE, when saving the file, it looked like it edited many of the blank lines in the original file giving the illusion of more file edits than were actually needed.\nI have no idea why!\n\nhope this helps.\n\nYes it did, thank you for the reply.\n. > Yup, 100% if you send yourself an image from a real whatsapp client to whatsapi, and look at the message you get you will see that they in fact uploaded your image to their servers and then sent a link to their servers.\nOooh. That's interesting. I might look into that to see if we can piggy back on that process!\n. Take a look at this link to my code I changed in whatsprot.class.php (around line 260-280) and funcs.php (end).\nhttps://github.com/jonnywilliamson/WhatsAPI/commit/ca647ff3bd0d4e5a316ea5573d6cc0cd5ae78faa\nHopefully that explains it for you, if you edit your files to match that, you'll get thumbnails automatically.\n. @dleivag - sorry you'll have to ask in a new issue because I don't have answers for your questions.\n. Just for information and clarity for those who might be able to help us with this issue.\nI have two iPhones in the house, when I found this project they were both running WA 2.8.4. I could use the MAC address of both phones to use WhatsAPI script without issues.\nI updated one phone to WA2.8.6, the other has not been updated yet.\nAfter using the updated WA2.8.6 on the iPhone, any attempt to use the WhatsAPI script has failed, each time with a password error. The other iPhone with WA2.8.4 continues to work both on the phone and via the script.\n. Another person with login problems now.\nUpdated iPhone to 2.8.6 and now no amount of attempts to log in via whatsAPI work. All password wrong responses.\nSomething has changed on those accounts that have upgraded...most likely a new password.\n. @hijacker2k3  Thanks for that. Did you manage to capture any packets assuming you meant the weekend that has just passed?\n. Yowsup has this working again, but I had to use the script to re-register with whatsapp server for my mobile number to get a password. I had to save this password into the config file.\nWhilst I was then able to send messages from a web script again, when I tried to access whatsapp on my iphone I was informed I had to re-verify on that too! Meaning that when my iphone got the new password/re-verified, the script would stop working!\nStill, it's a start\nhttps://github.com/tgalal/yowsup/commit/9cd2bd2de35775af47d8ffc49b143e613bfdb097\n. Nope. I've tried :(\n. @beldar - wonderful update. Your work is much appreciated. (Yes I know I could have DIY but thanks for that tweak).\nNow if only I could get this iPhone password issue fixed I could make best use of all this again. :(\nWell done sir!\n. I hate to say it but finally! Now that everyone is in the same boat, there'll be more effort to work out how to capture the new password for our devices to allow us to use this script again!\n. Yes but doesnt it seem that the android version is the only one so far without this new password scheme built in - so therefore they didn't have to do anything different.\nHad they been iOS or BB users etc, they would have had issues when they upgraded to the latest software for their phone.\n. Yowsup has this working again, but I had to use the script to re-register with whatsapp server for my mobile number to get a password. I had to save this password into the config file.\nWhilst I was then able to send messages from a web script again, when I tried to access whatsapp on my iphone I was informed I had to re-verify on that too! Meaning that when my iphone got the new password/re-verified, the script would stop working!\nStill, it's a start\nhttps://github.com/tgalal/yowsup/commit/9cd2bd2de35775af47d8ffc49b143e613bfdb097\n. REALLY?\nNone of the other 20 threads/issues right underneath your topic highlighted this issue before?\n. @fheft - Finally someone else who's been as amazed as me for how this isn't affecting 90%+ of people! Hopefully as the next couple of weeks go on, we get the tipping point where everyone comes looking for a solution...and we find one.\nOn another note.\nIf you install yowsup from https://github.com/tgalal/yowsup\nIts a python implementation of whatsapp. However, you can use it to register your mobile phone number with the whatsapp servers.\nIt'll send your phone the 6 digit verification code, you then add this to the script. The script sends the request off to whatsapp and whatsapp returns the password.\nYou then know:\n1) Your mobile\n2) Your mac/imei\n3) The 6 digit registration code\n4) Your password.\nI have done this, but I cannot tell what type of hash it is, it looks too short to be md5 etc. Nor do I wish to post my details online here. Sorry!\nHOWEVER, this will now have DE-REGISTERED your actual mobile phone, so don't try and send any messages using the official app on your phone.\nIf you do, the phone will send off for another registration code and deactivate the password you just got to work with the yowsup script.\nAlso you can't reactivate your phone for approx 1hour due to restrictions from the whatsapp servers.\nI hope that might help someone get started on fixing this.\nThanks.\n. Don't waste your time. If you bother to take a look at the source code you'll see that the password generated is exactly the same as the way we have generating it in whatsapi\n. Could someone explain to me WHY we still think that the password must be a hash/generated from information on or about the mobile device being used?\nWhat is stopping them (whatsapp) doing the following:\n1) User installs new whatsapp version on phone.\n2) Launches app and app contacts server with its details, ie. Hello I'm mobile +15553431234\n3) Whatapps says, ok let me send you a PIN just to check.\n4) You get your PIN and type in it. Your phone sends that back to the servers.\n5) Whatsapp says, \"Brilliant thanks for that, here's a RANDOM PASSWORD we have just created. From nothing related to your device. Please save this in your device, encrypted in a file.\"\n6) Phone says, ok thanks. I'll use that the next time I connect to you. Bye!\nWhat we all really need, is a way to just copy/see what the password is on our device so we can add that to the whatsapi script and stop worrying about HOW the password was generated. I don't think it is being generated like that anymore.\nHOW we find out the password saved on our devices is the problem. As far as I can see, only a MITM attack with fake security certificates etc is likely to reveal it :(\nThat's a problem....\n. ***EDIT I wrote this before I read the second paragraph of the comment directly above this one by fheft\n@fheft \nJust so I'm clear.\nThe device registers with the whatapp server. Only sends phone number and ID.\nIn return it gets sent a password (in a JSON response).\nI'm only trying to get this clear in my head. Why do you think the password MUST be using some of the phone data to be created? Why could a random password not be assigned?\n. @fheft \nActually, you could help us all out here. Would you be able to give a rough outline on how you set up your MITM attack? For those of us who are capable, we would also be able then to see our passwords and at least be able to get back to using whatapi again as we continue to work out the best way to fix this issue.\nI know exactly what I should be doing for a MITM attack, but I have no experience of doing it so there's no point me redoing all that work if you have got a workable solution!\nWould you mind?\n. Super!\nI am now away for 3 days, but I'm going to give this a go when I return. Thanks @fheft \n. For those of you who have your password but are having difficultly sending messages, have you ensure you've updated the version number of whatapp that the script is sending to the whatsapp's server?\nIn whatsprot.class.php around line 17, change\nphp\n    protected $_whatsAppVer = \"2.8.6\";\nto\nphp\n    protected $_whatsAppVer = \"2.8.7\";\nIt's interesting to see that yowsup, uses a useragent from a windows phone rather than iphone to send it's messages. Perhaps we need to find the proper useragent for an iphone client too..\nIn src/Yowsup/Common/Http/warequest.py\n\"WhatsApp/2.8.2 WP7/7.10.8773.98 Device/NOKIA-Lumia_800-H112.1402.2.3\", 31  +       k7Iy3bWARdNeSL8gYgY6WveX12A1g4uTNXrRzt1H\"+\"889d4f44e479e6c38b4a834c6d8417815f999abe{phone}\"),\n. Oh course I checked it was working @kingk110 - do you think I'd type all that out just to pass an hour in the afternoon?\n. @guidomgs Thanks. I missed that when copying and pasting. Added to original post.\n. @cluber22  As per my post:\nA lot of you will want to use the SAME account as your phone (in my case iphone), THIS IS NOT POSSIBLE USING MY SOLUTION AT THE MOMENT.\n. @kingk110 I'm sorry but you are obviously completely out of your depth. You are mistaking what we are doing here, using WHATSAPI with a new password, with the actual code needed in behind the scenes to make a signed/encrypted request with the whatsapp servers. Not only that but your problems are related to code in another language to what is being discussed here!\nI appreciate you just want help, but you're in the wrong place.\nPlease start a new topic with your issues and stop using this one.\n. Your remote host has a firewall blocking your outbound connections.\n. Well I haven't had to register anything but I'm sending messages using my method as posted in #238 today without any issues.\nI'm pretty sure the protocol hasn't changed and people are just too quick to post and not quick enough to read.\n. Assuming most of you are spammers, this is loads of fun watching your business model collapse in front of your eyes. Woohoo!\n. @kingk110 Yeah you sock it to them!\nScrew whatsapp, I mean why shouldn't you be allowed to send THOUSANDS of messages using THEIR servers for YOUR spam...err I mean \"business\" for a one off fee of 89 cent**\nWhat pricks that company is. You should ring them up and get your money back. I've got my fingers crossed for you.***\n** Convert to local currency.\n*** To sod off.\n. Well today the world just got a little brighter.\n\n. Oh WOW.\nAway all this week, but I'll be looking at this definitely @shirioko - great idea/job!!\n. I see that yowsup has this now fixed. It looks like they no longer send the image to a URL but include it in a node instead.\nI will look at this and see if I can import this into whatsapp but I'm not sure I'm capable of it! So if someone else with more skill can take a look, it might be a better idea.\nHere's the relevant commit in yowsup \nhttps://github.com/tgalal/yowsup/commit/f586ead9ebec89b841ec736f0dc330b06a7f8917\n. This is excellent! That's way more complicated than the old method but I can understand why they did this.\nI have another small update in the pipeline to your code to add the ability to provide a URL to an image instead of requiring the original image to be on your server. The functions like filesize() etc do not work on URL's so I had to change a few things to accommodate both types.\n. @ruriimasu Will you let us know at what number of contacts you get your account blocked. Thanks...\n. @shirioko I was being slightly tongue-in-cheek. I just enjoy watching all these people using whatsapp for \"business\" applications and getting upset when their accounts get blocked. \n. Just wanted to pipe up here that I am working on this very issue.\nI have always been confused as to how the rest of you managed to deal with this problem. VERY frequently when I try to implement some the new (and old features) on whatsapi - say sending message/getlastonline time etc, I see that my output/requests get to the whatsapp server then my connection instantly drops so I never get to see what the server returns back to me.\nInitially I tried the sleep (1) trick, but it felt like a dirty hack, so I started to look for an alternative.\nSo far I've managed to create a waitForServer() function that uses pollmessages() to look for a reply with the correct ID from the server before continuing. So far this has been working very well by using it in the code after the sendNode() function has been called. I'm just trying some more testing of it before I send a pull request.\nUnless of course the mighty @shirioko beats me to it again!! (Thanks mate for all the work you're putting into this at the moment, I am finding it VERY helpful). \n. Lol!\nFine, your coding sucksss...\n. Haven't used that function in a long time, I don't tend to set my status that often. When I get home this evening I'll take a look to see.\n. Hi @shirioko \nThere's nothing wrong with the function - (again I have a waitForServer() in there just to make sure that I get the response back).\nTwo things might be happening to you:\n1) On iPhone/Android the updated status does NOT show up instantly on other people's phones unless they refresh.\neg. Say I set status on Account A. I open whatsapp on the other phone, (say it's iphone) and goto favorites. The old status of account A will still be shown. If I pull down to refresh I'll get the new update then.\nHere's some info on that: http://www.whatsapp.com/faq/en/general/20951541 \n[quote]\nPlease note that it may take some time for your newly updated status message to display on your friends' phones. If your friends refresh their Favorites list (Select contact list on Android), they will see the status update much more quickly.\n[/quote]\n2) Not waiting to hear back from the server?\nI've checked this twice now and the current code (+ waitforserver) is working fine.\n. Oooh, that's very similar to what I was doing!\nYes. I'll try to get some commits done later today. I can only get to this when I'm not at work and today is my day off! ;)\n. @shirioko should be able to give you the UserAgent String. I tried his Miss Venom earlier and saw my own iphone one in the logs.\nFor info, the iphone is: USERAGENT:WhatsApp/2.8.7 iPhone_OS/6.1.3 Device/iPhone_4S\n. As someone who understands what you are doing when you explain it, but can't provide any help - this is fascinating watching the \"hunt\" for the solution! \n:)\n. Well if that doesn't look like a Whatsapp password I'll eat my hat!\n. Please note that in whatsprot.class.php:\nLine 1131    has:    \nphp\nprotected function getMediaFile($filepath, $maxsizebytes = 1048576)\nNote that by default all videos/images/audio are limited to 1meg. You will have to supply a new value for this if you wish to send something bigger.....but I have no idea what size whatsapp servers allow.\nUse at your own risk!\n. Does this limit us to only: jpg, mp4, wav ?\nI know I've tested other formats (png, avi, 3gp) and they seem to work. Is this a WP7 limitation only I wonder?\nThere's definately a video size limit. I'm sure I've seen it on the official iphone client when I tried to send a large video one day to a friend....must go and look at that again,\n. find\nphp\n    public function MessageVideo($to, $filepath, $storeURLmedia = false)\n    {\n        if ($this->getMediaFile($filepath) == true) {\nChange to:\nphp\n    public function MessageVideo($to, $filepath, $storeURLmedia = false)\n    {\n        if ($this->getMediaFile($filepath, 4194304) == true) {\nAnd see if it works. I used this:\nhttp://download.wavetlan.com/SVV/Media/HTTP/H264/Talkinghead_Media/H264_test1_Talkinghead_mp4_480x360.mp4\nAnd it worked perfectly. That's a 1.5MB mp4 video. \n4194304 is just 4MB\n1024_1024_4\n. Wait? Hold on are you still using this modified line?\nphp\n$this->_mediafileinfo['filemimetype'] = \"image/jpeg\"\nThe video/audio will never work until you find a way to replace the original mime_content_type() function with something that works on your system.\nYou're currently sending a video to whatsapp but telling them it's a jpeg. That will bork it.\n. Just tested a 7.5meg video:  http://download.wavetlan.com/SVV/Media/HTTP/MP4/ConvertedFiles/MediaCoder/MediaCoder_test3_1m10s_MPEG4SP_VBR_516kbps_320x240_25fps_MPEG1Layer3_CBR_320kbps_Stereo_44100Hz.mp4\n(change the maxfile size to 9 megs first) And it worked perfectly.\n. The idea behind the size variable was that at the time I wrote that code I didn't know how big a file size whatsapp servers would allow.\nI therefore set it low to 1meg as a precaution.\nWhy don't you just set it to 20megs 20_1024_1024 and then you'll never have to change it again? 20megs seems fairly big to me....\nAs for the pic instead of video, I'll look into that. Hadn't noticed it on my phone.\n. I'd go with the idea that your video is too big. You're probably abusing the whatsapp servers. DO you really need to send 22Megs of video via a messaging system?\n. Where did you dig that info from @shirioko?\nDo you have the limits for audio and images too handy?\n. @shirioko great work.\nAny chance you can dump the rest of the DLL when you get a moment (...after dinner ;) )\n. Hahah. Ok, I've bitten off more than I can chew.\n. Am I missing something here.\nFrom the Docs on Whatsapp: http://www.whatsapp.com/faq/android/23130793\nLooks like the RECIPIENT must have the SENDERS phone number in their contacts otherwise the RECIPIENT will not get the broadcast message.\nThis is good news. It means this is not very useful for spammers....\nOr did I miss something?\n. Yes, but that still shows that your code won't do as much damage as I first thought. If a spammer tries to send me a broadcast message, because I won't have his number in my local contacts - I shouldn't technically see the message.\n. @shirioko Grrrr. Why do the few always spoil it.\nThink your decision is the right way to go for next while.\n. @kingofcracking \nAny chance you could put all your lines into one comment next time please. No need to reply just to say yes.\n. @kingofcracking Stop being an idiot.\n@WebWhatsApp Welcome. It's good to see a \"human\" behind the website. Do you not feel that as it stands your site is fairly open to abuse? It's good to know that you have at least stated that you're monitoring it. More than some of the other idiots who have been on this project over the past while.\nHave you any interest, or could you be persuaded to add anything to this project that doesn't run directly as a competitor to your own \"business\".\n. @kingofcracking \n\"The difference between stupidity and genius is that genius has its limits.\"\nAlbert Einstein\n. @shirioko Did you get that decipher method done? I see it's removed from the comments here...\n. Looks like you probably dont have write permissions on the /tmp folder for the username that is running the script.\n. @januslinhc wait are you using the version from https://github.com/venomous0x/WhatsAPI  or @shirioko's much better and improved fork https://github.com/shirioko/WhatsAPI ? \n. Oooh. \nVery excited ;)\n. @shirioko The certificate was fine to install. Didn't get to see any data pass through though. Going to update Miss Venom and try again.\n\n. I'm on my phone at the moment so I can't tell correctly but is that the full emoji sprite you're using @shirioko?\nIf so I think you're missing loads of them. Check out my last commits to get another sprite. Hope that helps. \n. Oh at last!!\nThat should drop the support requests by 99% !!\nPlease remove all references to the blasted old password routines!\n. @robefernandez Nice write up, but now that the code has changed (it is generated from Whatsapp servers now) perhaps you'd like to look at the code again to see if there are other things you can determine?\n. It is!\nhttp://www.w3schools.com/php/php_arrays_multi.asp\nhttp://webcheatsheet.com/PHP/multidimensional_arrays.php\nDude I think you need a little bit more time to absorb programming basics before trying a \"big\" project like this?\n. AND the person you are sending to WILL NOT get your message if the number they receive the message from is not in their contacts.\nAll the spammers must hate that!\n. You don't.\nThe broadcast feature is NOT some sort of MASS MESSAGING system. It's a quick way to send the same message to around 20 of your friends without including them all in a group.\nIt's not a marketeering tool.\n. If you need to send to multiple people you'll just have to do a loop through your list and send each one individually. Of course depending on how many you send, you run the risk of having your number blocked.\nI do not know how many you can send before you get blocked.\n. @harshaljha Coding is a lot of fun. Try to have a bash at it yourself, it feels good when you solve a problem!\nTry reading these first too:\nhttp://www.w3schools.com/php/php_looping_for.asp\nhttp://php.net/manual/en/control-structures.for.php\nhttp://php.net/manual/en/control-structures.foreach.php\nThen show us some code and we'll help!\n. I feel dizzy.\n. Well...it's attempting to be more PSR2 compliant ;)\n. You send the group ID in the sendGroupsChatEnd()?\nphp\npublic function sendGroupsChatEnd($gjid)\n. Have this fixed.\nCommit to come shortly.\n. Fixed in 72893fe0e3a0c157ea865594337a37e6e187a66f\n. !!!\n. Maybe you could fix the WP7 token?\n. @JayFoxRox - We miss you! (Or at least your assembly knowledge!)  ;)\n. @shahidkarimi  More interesting is why you posted here, on a closed issue, over 2 1/2 years old, on a github repo that has been deleted!\n. Let me post the readme again so that you can read the relevant parts:\nphp\n/**\n * Gmail Users:\n * If you have a GOOGLE email account AND you have *added mobile phone numbers* to your\n * gmail contacts this script can access those contacts and add them to the dropdown list\n * for you to select easily when you want to text someone.\n *\n * Numbers should be marked as MOBILE and should be in INTERNATIONAL format.\n *\n * Just to ABSOLUTELY CLEAR - by having gmail contacts listed in this script, does not imply that\n * that person has whatsapp installed. You need to know if they can accept whatsapp messages before\n * you try sending them messages.\n *\n * Most of my friends have whatsapp so I know I can select almost anyone from my google contacts.\n *\n * If you don't wish to have this feature, then do not add the email and email password line to your\n * config.\n */\nWhatsapp does not send you your contacts. I added the feature to allow people an easy way of using their google contacts as an address book.\nBut google contacts DOES NOT EQUAL whatsapp contacts.\n. There is a chance that google is requiring a captcha code to be entered if it detects an unusual connection to your google account from an unknown server.\nSo say you normally connect to google from India (at home), but you have a Brazilian web server, it might be throwing an issue because that is unusual.\nThe code is basic and does not use the full OAuth2 authentication process.\n. For the Ajax issue, use chrome/firefox and look at the developer tools/firebug.\nOpen the network tab and then run the script again. You'll see the POST request being sent when you try and get google contacts. You can then click the \"Response\" tab and see what the server sent back and why it was \"Bad XML/Json\"\n. By coincidence today I stumbled across another project that has this information about connecting to google's API's via ClientLogin (which is what the script in this project is doing)\nIf you choose to use the ClientLogin instead, please be aware that often when using the ClientLogin for the first time Google will issue a CAPTCHA challenge.\nIf a CAPTCHA challenge is issued gClient throws an Exception. Currently you must go to your browser, login as that account, accepting the CAPTCHA.\nOnce you have passed the CAPTCHA (externally) your application will connect.\nThe same advice will most likely be the same for whatsapi.\n. @paxter - Interesting. I missed that bug. But I've fixed it now https://github.com/shirioko/WhatsAPI/commit/83b22c67fc224276ba033cf9e3dd301de6ba3b41\nIt's only in @shirioko fork at the moment. I'm sure he'll update Venomous's code soon.\n. Your secret alter ego @shirioko ....\n. Dick-move-check (tm)\nFTFY.\n:smile: \nEDIT shirioko:\nFixed :wink: \n. Yeah I'm going to work on this.\n. @taikano Here's a start towards this.\nI needed to move the callengeData file to a directory that apache had write access to. This seems to be working well for me at the moment.\nhttps://github.com/jonnywilliamson/WhatsAPI/commit/0f3c31ac93b14b1cc3743a7559a6ab4f327b674c\n. @Bashin \nI'm interested to know what type of system you are using the API on.\nOn my linux box, if waitForServer is not added to the sendMessageNode method, then the server connects to the whatsapp server and sends the message node so fast that the whatsapp server doesn't have time to receive/respond at all.\nThis meant that 9 out of 10 messages never got sent properly. Waiting for the the whatsapp servers to reply with a node that contained the messageID (which is what waitForServer method does) meant all messages/nodes were process or received correctly.\nDo I assume you're using a windows box? Perhaps the connections are slightly slower -- giving the whatsapp servers a chance to process the request properly.\n. @shirioko \nFor consistency you should NOT return it from sendMessage() as none of the other sendmessage functions have return values.\nThat't NOT to say I think we shouldn't have return values in general....its just that until we do it for all the functions, we should make exceptions. (It's my OCD at me again)\nonSendMessage Event is much better idea.\n. Nice.\nDon't forget to update the documentation too!! Lets other people know what is being passed with this event:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/EVENTS.md\n. Cool.\nTime to make a decision. Which one do we keep? Having both is silly.\n. I quite like your WIKI one....apart from the fact I didn't know it was there until today (!)\nYou didn't remember about the events.md. So both of us failed badly! Mmmmm.\nHow about delete the events.md one, BUT put a link in the README pointing to the wiki list?\n. Would all your recipients have the number that is sending the message stored on their phone?\nDo they know they will be receiving the messages?\n. First of all this stinks of spamming however it doesn't matter.\nIf the people you are sending the message to - do not have the phone number of the sender SAVED in their phone book, those people will NEVER see a broadcast message. Whatsapp will not show a broadcast message from an unknown number to the device.\nPlus there's a limit to how many people you can send a broadcasts message to in one go. It's fairly low so your thousands of messages would be a problem.\nAll in all, Whatsapp is not set up or intended for \"marketing campaigns.\"\n. You realise that this is a PHP project? DLL's aren't all that useful unless you're trying to replicate the functionality from another project...\nBesides the broadcast code is already in the API if you had taken a look. Would you report back to us when you find it and start using it. I'll be interested to see how many messages you get out before your number is likely blocked.\n. @ganySA I think you have an interesting story. I enjoyed reading that and I think it sounds like a very good use case for the use of whatsapi.\nI have some of my own ideas on what might be happening but I do have a feeling that the overall solution to this problem really lies with our ability to contact and negotiate some sort of compromise with WhatsApp owners/developers.\nUnless we can come to some sort of agreement with WhatsApp and have some mechanism where by we abide by their non-phone connection rules to send messages but in return our numbers will not be blocked - we will continue this cat and mouse game for months to come.\nI've already tried to make contact with the developers a couple of months before - but alas I've not had a response to my initial query.\nI myself have been lucky in that none of my numbers have been blocked - but then again these numbers only send to a very few other numbers and not in any type of bulk so perhaps I'm still under the radar.\nOnly time will tell....\n. @TruthEdge - I'd like to know:\nWhat if you were to buy a sim card (not just get a number) and pop it into a phone, purchase whatsapp via an app store and use it for a few messages THEN remove the sim card get your password using WART and continue sending messages from whatsAPI.\nHow long til blocking then....so for me it's been no blocks at all.\n. There's a bad smell starting to emulate from this thread....\n. $wa->sendMessage();\nsleep(60);\n$wa->sendMessage():\n;)\n. @thomasvargiu - That is an idea that has been close to my heart since I saw this project.\nI have only attempted the very first beginnings of what you are suggesting and some of them have already been incorporated.\nIndeed I have started a new branch in my repository fork ( https://github.com/jonnywilliamson/WhatsAPI/tree/laravel ) called laravel that you can actually install via composer and works like other Laravel commands well\neg:\nWA::sendMessage(); etc etc\nI have this up on packagist (https://packagist.org/packages/venomous0x/whatsapi) but because I am involved with a large project in work at the moment I will not be able to devote any regular time to this until April/May.\nI fully support it though\n. @shirioko - I assume since the name is \"thomasvargiu/whatsapi\" and not \"venomous0x/WhatsAPI\" that it's fine.\n@thomasvargiu - Ooh. very nice, loving the fact that there are tests etc. Will look into this, well done.\n. @thomasvargiu I've had a look at the project. Very very nice. (I haven't executed it yet as not at home) but it looks excellent and clean.\nI have submitted a few thoughts on your repo.\n. Hello Thomas,\nThanks very much for your email. This is great timing as I've just started a new rewrite on my own personal project that needs to use what's app for creating notifications to myself and my wife so I'll be very keen to test this.\nHowever I'm currently on holiday at the moment and will be back in a two weeks and will check this out\nThanks very much!\n. @thomasvargiu \nOk I've started on this and I'm building some optional Laravel syntax \"sugar\" to build around your code.\nThis would allow some nice clean code like this\n``` php\n$message = 'Hello';\nif( $user->allowTextMessage) \n{\n  WA::sendMessage($user->mobile, $message)\n}else {\n //send email instead.\n}\n```\nBut I have a few questions. Would you be interested in dropping me an email. \nIt's my username here at github, with AT gmail.com\nGreat job on the code BTW!\n. I think that sounds like a good idea.\n. @wingwdiscuss Currently away over the Christmas period so I can't help til I get back.\nYou should look with Chrome or Firefox (inspect element when you right click the webpage) and take a look at what exact response is being returned when the request is sent(under the network tab). That will be a help starting to solve your problem.\n. When https://github.com/venomous0x/WhatsAPI/pull/565 gets merged, it should fix this problem.\n. Yeah come on @shirioko hurry up and fix this! ;)\n. Only one device can be registered at one time for a number. If you try to register another one, the first one will UNregister.\n. Why not remove the logo and pop it up on github? People can always take it from there! \nThanks!\n. @park23 Nice job! Thanks for sharing!\n. @shirioko \nActually on my iphone it shows the ability of up to 50 Broadcast LISTS, and in each list, 256 people can be added.\nIphone/Android/windows phone difference?\n. Sure. Will email to save me hidding private info in screen shots....\n. 165\n. ",
    "alsoos": "hello,\nyou can check here\nhttps://github.com/venomous0x/WhatsAPI/issues/97\n. ",
    "prajeshmadhavi": "yes you can do it using contactsync.php.\n. you can, first login by first sender send first message, then login by second sender and then send second. OR you can hold diffrent object for diffrent sender and iterate through sender with certail delay. Is that what you need? \n. how many numbers you want to sync? if possible try to sync it in batches of 1500.\n. I sync 1500 contancts at a time. it works smoothly.\nRegards,Prajesh Madhavi\nSoftware Solution Architect\n Custom Software Development | Website Development | IT Consulting\nwww.noesistech.com http://www.noesisinfotech.com | Mob: +91 9920755058\nOn Wed, Dec 24, 2014 at 9:47 PM, boxim notifications@github.com wrote:\n\nOk thanks..\nbut how many contacts can I have linked to my phone number on whatsapp\nserver? What happens if I link another 1500?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1062#issuecomment-68061510\n.\n. \n",
    "tehspede": "Don't know if my error is because of this but I have the new update and try to log in with my MAC address and it fails.\nTried with my other phone which is an android and separate phone number and the IMEI login works.\n. https://github.com/venomous0x/WhatsAPI/issues/171#issuecomment-10479357\n. ",
    "pjorquera": "I'm having the same error. Maybe WA service is using another password instead MAC repeated twice because MD5(MACMAC) also fails when using the following request for simple log-in process:\nhxxps://r.whatsapp.net/v1/exist.php?cc=COUNTRY_CODE&in=TELEPHONE_NUMBER&udid=MD5(MACMAC)\n. ",
    "depl0y": "I tried sniffing the traffic of WhatsApp, but even with HTTPS traffic decryption, you cannot see what is being sent. According to Fiddler WA uses a tunnel to send data. \n. Same problem here on an account also using the iOS WhatsApp client v2.8.6\n. ",
    "Sputuks3": "Anyone have the .ipa for iPhone 2.8.6 (latest is 2.8.7, updated Dec 7) and have not updated yet ? If so, please let me know. Thanks.\n\nFrom: tomwolfgang notifications@github.com\nTo: venomous0x/WhatsAPI WhatsAPI@noreply.github.com \nSent: Sunday, 18 November 2012 3:13 PM\nSubject: Re: [WhatsAPI] new iPhone 2.8.6 (#171)\nshoot...\n\u2014\nReply to this email directly or view it on GitHub.\n. If you want to reverse the android version, I suggest using DJ and Androchef in addition to JD-GUI. It'll be much easier to get a hang on the flow control. Might have to rewrite certain methods though. PM me for the other 2 tools.\n. Actually got a point. We may not be able to extract password, but can't we not recover our current password by sniffing traffic between phone and server, instead of creating new account?\n. Like to have one for Viber too. Share it on Github when you guys start to figure out :)\n. Texting only.\n. What's wrong with engaging developers to do custom programming with WhatsAPI? Think professional campaigners for head of office in government. If you have the resources, you may always hire. @cyberp1983, do try on other job seeker sites too.\n. ",
    "Netpolice": "Update the line 108 as following\nif ($_SERVER['argv'][1] == \"-i\") {\n    echo \"\\n[] Request last seen $dst: \";\n    $wa->RequestLastSeen(time().\"-1\",\"$dst\");\n}\n. There was some bugs on iOS 4.0. Cannot download any media files, so they updated it, but is there any other update, do not know.\n. OH! I found it out, the password can login the whatsapp successfully. \nThe URL \"\"https://r.whatsapp.net/v1/exist.php\" is useless now, right?\n. thanks!\nI was trying to fix it for a whole day. too bad.........\n. ",
    "guidomgs": "that still not working for me...\n. that still not working for me :S\n. if i use your code, the output is like this:\ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    549XXXXXX\ntx  \nwhere the fist line instead using the number is using the message id\n. message to=\"1354845605-1@s.whatsapp.net\" type=\"chat\" id=\"1354845605-1\" t=\"1354845605\"\n. fixed! \nafter the sendmessage function call is good to add sleep(1); to let the script send the message\n. I checked on my iphone, and i found some interesting information that could helps to find out how whatsapp manage the passwords, on the following path /var/mobile/Applications/APP-CO-DE/Library/Preferences/ there is a file, net.whatsapp.WhatsApp.plist where is hashed by some way the pass, and also i can see some others sections like \"Challenge\" and \"Token\". There is also our own mobile number and country code (hashed too).\nThis uncripting is out of my scope, but maybe this point could be helpful to know how is working.\n. I m using iFile, my phone is jailbreaked...\n. Nice!!! thanks that is really good!\nI added one more line on the code to get a confirmation message:\n!/usr/bin/php\n<?php\n    require \"../src/php/whatsprot.class.php\";\n```\n$fromMobNumber = \"YOWSUPNUMBER\"; //ENTER YOUR GOOGLEVOICENUMBER HERE\n$toMobNumber = \"DEST\"; //ENTER YOUR OWN NUMBER HERE\n$id = \"YOWSUPPASS\";  //ENTER THE PASSWORD YOU COPIED EARLIER HERE\n$nick = \"nickname\";\n$w = new WhatsProt($fromMobNumber, $id, $nick);\n$w->Connect();\n$w->Login();\n$w->sendNickname($nick);\n$w->Message($toMobNumber , \"hello\");  //<----This is the message line :)\nsleep (1);\nexit(0);\n```\n?>\n. Is not google voice exclusive, I registered with yowsup a spear sim card, also you can register with yowsup a land line phone.\n. Hi its me again! I was working fine with this method, but now its failing at login time. Some one else was having the same issue?\non yowsup is working fine (but i dont like so much that one)\n. ",
    "davidcsi": "Hello,\nSame problem here... I'm trying with both iOS and BBOS\nThanks!\nDavid\n. hola manufuentescr,\nYo estoy usando Blackberry. Me explicas por favor c\u00f3mo lo has hecho? \nYo utilizando el IMEI con y sin los puntos:\nhttps://r.whatsapp.net/v1/exist.php?cc=34&in=MY_NUMBER_NO_CC&udid=md5(strrev($imei))\ny no va\ngracias\n. S\u00ed, el de iphone no va ni pa\u00b4tr\u00e1s... md5(mac+mac)... (tengo iphone y bb)\nPero me dices c\u00f3mo usaste el imei? con o sin puntos?\ngracias!\n. Me parece que s\u00f3lo funciona con android, voy a probarlo ahora... con bb desde luego no va...\ngracias!\n. Efectivamente va bien (al menos el \"exists\") s\u00f3lo con Android... pero de momento no he logrado mandar un mensaje... estoy con eso ahora.\nGuys, it seems it only works with Android!\nGracias!\n. Hello guys.\nI've tried using my imei without and without the dots like so:\non the line $imei =\"\" \n351503.05.078579.7 and 351503050785797\nand my phone number on $sender.\nand executing:\nphp whatsapp.php -s [Destination cc plus number (no +)] hello\nalways \"Wrong password\"...\nany help is greatly appreciated..\nDavid\n. ",
    "uglybunny": "Uninstalled and re-registered using latest versions on Android, Symbian and IOS\nOnly Android is working as of now.\n. ",
    "scotchies": "I have two Smartphones (Symbian) and therefore two WA-Accounts. One account works with Whatsapi - the other one doesn't... Wonder why??? Any hints?\n. I can confirm what MartinGraws says. After the WA upgrade on my Symbian phone to Version 2.8.22 the WhatApp Api doesnt work any more... The response status is \"fail\" result=\"incorrect\". Before the upgrade it worked fine...\n. http://www.heise.de/security/meldung/Erneut-Account-Klau-bei-WhatsApp-moeglich-1756224.html\nhow did they do that???\n. ",
    "FAlbanni": "hey jonnywilliamson can't you decrypt your password to know how is made ? the password generation algorithm is obviously changed\n. Yes, watshapp changed the password method, we need to do some some reverse engineering with IDA to find out how to log in again \n. if you installed the last build (37716) logging method or password generation method CHANGED and you won't be able to connect anymore unless you reverse engineer whatsapp to find out the new algorithm\n. javitolin; reverse engineer is not trivial, actually it requires lot of dedication and is a very complex process... What you can do is sniff the packets of your cellphone and then try to decode them and find out the new password algorithm, that is a thousand times easier than try to reverse engineer Whatsapp.\n. it was changed for all devices\n. The password method changes when you update to the lastest whatsapp, you can try it, download the very last whatsapp build, then try to log in again and you will get\nresponse status=\"fail\" result=\"incorrect\"\n. I am on Nokia symbian maybe for android the method of reverse IMEI to md5 still works, but not for nokia, i know because the Whatsapi worked flawlessly before and after upgrading the password method changed, i am trying to reverse engineer whatapp.exe with IDA Pro, but my skills are limited, maybe i will try to arp poison my cellphone and sniff every packet to get a clue\n. Yes password hashing method changed with the last whatsapp update\nWhat we have to do is live reverse engineer with IDA Pro or sniff every packet and decode it, i am trying the second way, sniffing all the packets ... hope to have some luck \n. I tried to reverse the android \"java\" code but is obfuscated as fuck\nWhatsapp uses a class called q8 (obfuscated name) to create the password hashing algorithm\nHere is the java code decompiled with JD-GUI, as you can see is HEAVILY obfuscated\nq8 = http://pastebin.com/0cyH04sn\nHere is the smali code\nq8 = http://pastebin.com/8eYH6Zdd\nThis is NOT an easy job, well at least for me, however i will keep trying\n. https://github.com/venomous0x/WhatsAPI/issues/192\n. Technically you can invoke \"WhatsAppNative.dll\" from java code using native and generating the right password file.\n. sniffing will not help since packets are SSL encoded :(\n. @shirioko PLEASE stop replying nonsenses you clearly don't have a clue about a thing here, go away retard !\n. wrong password\n. i am working on a whatsapp \"block detector\"\ni want to give a free online service where users input their numbers and the numbers they believe that blocked them, then they will get a response \"User  blocked you\" or \"User  NOT blocked you\"\nsince there isn't anything like that online it will get a lot of traffic and backlinkings making it first results on g$$gle, if any of you want to develop the webpage with me just contact me\n. rage\nAnyway, as i see you have three options here\nFirst Option (EASY, cheap, perfect for you, very durable)\nMake/Buy an app to program a bot\nThe bot will be like a robot pressing keys, up down enter etc\npress contact, write message, send, exit, wait, press next contact... should work perfectly\nSecond Option (hard, not durable, probably end up blocked/banned):\nUse some tool like wireshark to sniff your conn <-> whatsapp server\nThen do the same with your PHP program or whatever you have\nUse a custom SSL cert\nFind the differences, fix them. Make the program behave EXACTLY as the phone.\nThird Option (EXTREMELY HARD but smart and very durable):\nReverse engineer whatsapp (be aware ! the code is heavily obfuscated)\nadd an option to bulk send messages\n\nAs a side note if you are really interested i can recommend you a guy who is an expert at reverse engineering, but is not cheap, be prepared to spend $$$\n. TruthEdge, this guy can reverse engineer and alter the whatsapp client to bulk send a message or do virtually whatever you want\nYes, is against whatsapp EULA, beware\n. ",
    "iballack": "Soo far any updates Guys? \n. ",
    "shadzik": "Comment out the Request Last Seen function call at line 109:\n$wa->RequestLastSeen($dst);\nor fix it by replacing it with:\n$wa->RequestLastSeen(time().\"-1\",\"$dst\");\n. Well, it truly works for me. Even using this API in a custom script like this one works:\nphp\nrequire \"WhatsAPI/src/php/whatsprot.class.php\";\n\n<p$nickname = \"\";\n$sender =   \"\"; // Mobile number with country code (but without + or 00)\n$imei =     \"\"; // MAC Address for iOS, IMEI for other platform (Android/etc) \n$countrycode = substr($sender, 0, 2);\n$phonenumber=substr($sender, 2);\n$dst=$_SERVER['argv'][1];\n$user=$_SERVER['argv'][2];\n$msg = \"Hello $user\";\n$wa = new WhatsProt($sender, $imei, $nickname, false);\n$wa->Connect();\n$wa->Login();\n$wa->Message(time().\"-1\", $dst , $msg);\n?>\nAs you can see, I don't bother using RequestLastSeen(). Works like a charm.\nI guess it won't work when you register your device with WA 2.8.6 for iPhone. This version uses a different password generation algorithm than 2.8.4 and older. AFAIK 2.8.6 is not backwards compatible with older versions, so if you registered using this version, you won't be able to use WhatsAPI. I used an older device to register with 2.8.4 and since then am using this account with WhatsAPI.\nCheers.\n. ",
    "currodev": "LOL\n. ",
    "skgsergio": "I think this issue is related to #185 :(\n. ",
    "varundave": "This login method still works. I get an \"ok\" response from the server...\nhttps://github.com/venomous0x/WhatsAPI/issues/192#issuecomment-10834642\n. It is not changed. I still get an \"ok\" response for the md5 (reverse imei)\nhttps://r.whatsapp.net/v1/exist.php?cc=\".$countrycode.\"&in=\".$phonenumber.\"&udid=md5(reverse imei)\nThe Login method works fine for Android...Not sure about other devices.\n. I have 2.8.7326 updated a couple of days ago(just chekced and there are no updates available right now)....i still get \"ok\" response...\n. Also, If you might be doing wrong, the \"in\" parameter should have the phone number without the country code...\n. https://github.com/venomous0x/WhatsAPI/issues/192#issuecomment-10834642\n. ",
    "john-dev": "keep it english.. so the hashing method changed, and someone has to find the new method.. lets be pateient..\n. Me too, as i am using iOs i tried every normal and reverse md5 hashing's.. looks like the algorithm has been changed.. lets be patient..\n. ",
    "alsebawe9999": "I'm trying to understand the idea of the program\nI ask you to help me\nHow do I download the interface and how to access it please help me, I do not mastered English well\n. Please help\nPlease explain how to use the program\nI did not know how to access my account\n. I own md5 but I do not know how to use it because it is the first time I Hla you explain to me exactly where you enter the code\n. I have entered md5\nAnd showed me a sign Aoki\nAnd confirmed that my account is true\nWhat exactly do now to enter into my account and I see him\n. ",
    "fheft": "Today the new version for Android was released and WhatsAPI auth stopped working for users who installed the new WhatsApp version as well\u2026\n. I'm rather surprised that this issue only seems to bother a handful of people\u2026 when WhatsApp protocol changed to 1.2 the corresponding issue for the new auth method easily had over 300 comments. Did most of the people just don't update their WhatsApp so they can still use it? \n. Would it be possible to sniff the auth sequence of the app, extract the password and use that to login via WhatsAPI (without knowing how it's calculated/hashed)? \nOf course that's not a suitable way for the future but at least people who use WhatsAPI only for their own account could get it to work again (without deactivating WhatsApp on their phone)\u2026\n. @rodero95: I guess you're refering to jonnywilliamson's posting. But I think with that method (aquiring a NEW password via yowsup) will make WhatsApp stop working on your phone (because the password is specific to a device or randomly generated upon registration). But if you'd sniff the phone's password instead of re-registering with WhatsApp you might keep them both running (of course with the known limitations and disconnects, but at least without re-registration).\n. I tried sniffing with Burp Suite, Proxy Droid and a custom CA cert in Android (4.2, rooted) but somehow WhatsApp seems to bypass the Burp proxy (?)\u2026 will keep trying\n. According to @waninkoko it's not that easy: https://github.com/venomous0x/WhatsAPI/issues/216#issuecomment-11187271\n. Well @jonnywilliamson: if you do a MITM attack while registering the device, you'll find that the device sends a request with the phone number and an ID and gets a response containing JSON data like that:\n{\"status\":\"ok\",\"login\":\"{PHONE#}\",\"pw\":\"L6ghSp{\u2026}8iS7nx+Q=\",\"type\":\"existing\",\"expiration\":1358070043,\"kind\":\"free\",\"price\":\"0,89 \\u20ac\",\"cost\":\"0.89\",\"currency\":\"EUR\",\"price_expiration\":1358590956}\nIf you base64 decode that \"pw\" string and use it in whatsprot.class.php's authenticate method instead of $this->encryptPassword() you can successfully login. So you might be right about the password being generated on the server side.\n. I'm sorry if I was ambiguous, didn't mean to contradict you \u2013 I think you are right with what you said (even though that ID might be based on some phone specific data \u2013 I didn't think of that until now)!\nFor the MITM attack I did the following:\n1. install Burp Suite on my computer\n2. add the Burp SSL certificate on my Android device (4.0+)\n3. used ProxyDroid to redirect all traffic to Burp (needs root)\n4. deleted WhatsApp data and went through the registration process\nIt wasn't working that good for me, WhatsApp showed errors about bad internet connection all the time but after a few retries it worked. At some point it sent a GET /v2/exist?cc=49&in={\u2026} request to v.whatsapp.net:443 and received the above mentioned JSON.\nIf you have any further questions feel free to ask!\n. Now I received that message via WhatsAPI: \"New version of WhatsApp Messenger is now available. Please visit http://www.whatsapp.com/appstore/ and upgrade to the latest version. Your upgrade will be free and will bring larger group chats and new features such as Profile Photos!\"\u2026 how does it determine the version? \n. ",
    "alanwo": "we don't have to care what q8 does, as long as we can contruct q8 function in php or c# and apply q8 on mac/imei, authentication pass will. any idea to convert decompiled q8 to a c# function? \n. Yes, I agreed with you on password changed and now we got \"wrong password\" when using ExistsAndDelete, message cannot be sent just a few days ago. Anyone know the new encryption? \n. ",
    "ge0rg": "German heise news reports that the new algorithm is not any more secure than the old one, still relying on IMEI and phone number. Unfortunately, they do not give source ;-)\n. ",
    "z0rax": "I believe WhatsApp crew did some changes. Try doing\nphp whatsapp.php -l\nShould be giving you a timeout error (socket_read()) as of the latest version of this script source. My guess is they changed their network configs, such as IPs, and possibly port, which is why we can't grab any data when trying to listen or send messages.\nThis is what I get when I do\nphp whatsapp.php -s MyNumberHere \"Text Here\"\n\nphp whatsapp.php -s MyNumberGere \"Text Here\"\n[] Logging in as 'WhatsAPI Test' (TargetNumber)\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\n\u00a6!\u00fa\u00c5!\u00c7\u00abG\u00e0\u0192\u00cb\u00fd\u00c5:ietf:params:xml:ns:xmpp-sasl\">        \u263cL\u2514P\u00bc\ntx  \u00c1\u00f5#[\u00fb+\u2534O\nn\u2660l\u255d\u00a5A\u00a7\u2500\u00b6\u00b0\u00f2\u21a8\u00b7\u00a2A\u00fb \u00fb\u2502\u21a8\u00a0\u00e2\u25bc\u2591[Q\u266b,L\u00d6\u00f4\u00c2\u00de\u00a7f\n\nrx  T\u00ed\u00b3G:\u25541\u00fd\u00c3\u2551\u00ba\u00f1\u00edX\u00c2\u00c7Q=\ntx  \ntx  \n[] Request last seen MyNumberHere:\ntx  \ntx    \ntx  \n[] Send message to MyNumberHere: Text Here\ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    MyNumberHere\ntx  \nAnd no messages ever get sent to my phone. My guess is the configs are wrong in the current version of this script.\n. Then what about listening mode ? Unable to read and/or write with the sockets....\nBut yeah, looks like protocol.\n. I started using\n$wa->Message( target, \"text\")\ninstead of\n$wa->Message( time() . \"-1\", target, \"text\")\nand it works sometimes. Need to refresh the php document a few times sometimes but it does work, for now.\n. A few days ago the $wa->Message( target, \"text\"); was working properly (Removing the time(). \"-1\", part). Now, it just displays the message as a notification on your phone, but does not actually send a message to the target. It just displays the notification.\nSeems like to me the protocol is just going worse and worse..\n. Changing the target's status works. WhatsApp changed their protocol again and there has been no source-updates since then (for this project), but I worked it out temporarily by removing the \"time() . \"-1\", parameter (Leaving there to be only two parameters) of both the Status Sending function and the Message sending function.\n. yes.\n$dst = \"TargetNumber\";\n$wa->SendMessage($dst, \"Message\");\n$dst = \"2ndTargetNumber\"\n$wa->SendMessage($dst, \"Message\");\nor as a function\nfunction sendIT($number, $str) {\n$wa->SendMessage($number, $str);\n}\nusage:\nsendIT(\"TargetNumber\", \"Text Here\");\nsendIT(\"TargetNumber2\", \"Text here\");\n. You could just add a timer to the function.\nfunction sendIT($dst, $str, $time) {\n$i = 0;\nwhile( $i < $time) {\n$i = $i + 1;\n}\nif ($i == $time) {\n$wa->SendMessage($dst, $str);\n}\n}\nsendIT(\"number\", \"message here\", 1000);\nsendIT(\"number2\", \"message here\", 1000);\nSomething like that should work I guess.\n. As long as the password is still hashing by using IMEI we should technically be capable of still using this regardless of password saving locally on the phone, except they've just changed the way IMEI's being hashed, am I right?\n. If it is in fact using IMEI + the Verification Code sent through SMS, then it still wouldn't be all that hard to Bruteforce such a password, WHEN we know the new Hashing method.\nLet's say that it's, just as an example, something like md5(strrev($imei . $verificationcode));\nThat could easily be used as \n$vcode = 100;\n$vcodemax = 1000;\nwhile ($vcode < $vcodemax) {\n$pass = md5(sttrev($imei . $vcode));\n$content = file_get_contents($url);\nif(stristr($content,'status=\"ok\"') === false){\n$vcode = $vcode + 1;\n} else {\necho 'Password: ' . $pass;\n}\n}\nThat would bruteforce every possible three-digit Verification Code.\nThis is just an example, all we need is the actual new hashing method. Verification code might not even be in the new hashing, but if it is, it's not that hard to bypass.\n. But we have no clue what the new hashing method is :/\n. We don't know for certain yet if it needs bruteforcing or not. There has been no confirmation whether or not the WhatsApp confirmation Code, sent by text message, is used in the password hashing or not. The hashing did change, since the previous one results in an incorrect password, but they may just have changed the hashing into binary or something of the like. I've tried about 10 * 3 different hashing methods and all result with failure. We need to know the new hashing before jumping into conclusions.\n. I've already decompiled the Application both for Android and iOS, but have had no luck finding the pinpointed-source of the files where the hashing method is being declared.\n. ",
    "hohotho": "same problem as yours, cannot receive any message\n. Sorry, would you mind telling me more how to implement a ProcessNode? Thanks!\n. same as mck1212, the sending seems working, but cannot receive the message\n. ",
    "akubeejays": "I don't want to change the target status. I just want to know if a message i sent was successfully received by the server or not (rejected for whatever reason)\nI don't want to know if a message was received on the phone (at this moment) . i assume you need to be on listening mode for this to work\n. ",
    "mck1212": "hi, listening to my whatsapp working but when i trying send message this seems to be working but on my friend iphone's he dont get any message\nhttp://i48.tinypic.com/34pdoqh.jpg\nI censor the phone numbers so this is the details:\nrequest last: destination number\niq to: destination number\nfrom:my number\nsend message to:destination number\nbody: dest number\n. ",
    "japserboy": "thanks! I will take a look, but how can i access the plist? I haven't got a jailbreak or so...\n. okay thank you! \n. ",
    "sriharishine": "Hello, \nI am facing problem of WRONG PASSWORD, Can you please me to fix this and continue to use this scriptt to send message ? \n. Oh,Any solution. \nI want my PHP script to send Free Whatsapp message ? Can you help me to create such script?\n. Ok thanks for that. So with your current version, I will be able to send the message right?\n. Ok I understood, Then we need to find a solution for this Password issue as soon as possible. \n. An open offer of $50, If anyone can find a solution of Whatsapp system password technique. Which enables us to send unlimited messages out. \nLooking for positive reply to sriharishine@gmail.com\n. ",
    "netvortex": "This is easy!\nGET\n{'Accept': 'text/json', 'User-Agent': 'WhatsApp/2.8.2 WP7/7.10.8773.98 Device/NOKIA-Lumia_800-H112.1402.2.3'}\ncc=34&in=660330901&id=95818ddc74b3f8bd80b1549fab1dc8a0\nOpening connection to v.whatsapp.net\nRequesting /v2/exist?cc=34&in=602330XXX&id=95818dcc94b3f9bd80b1549fab1dc8a0\nUsing the V2-exist check it actually GENERATES you the new password on EVERY successfull attempt. So when you got the right hash (IMEI or MAC) you can login!\n. The exist check does not USE the password - therefore you only need to know how to generate the hash!\n. ",
    "QUIETMONEYDON": "So basically... it wont be possible to use whatsapp from 2 diff devices at the same time like we used to, right ?\n. what about the iOS version ?\n. ",
    "echammas": "I ported the current code to java. I needed to release a specific plugin for whatsapp on Android... Now if the authentication procedure really needs bruteforce to get the right password, this will mean that I'm unable to do what I was planning for. The plugin used to compute the password in milliseconds from the imei... but now it needs to brute force the password on the device so it will be taking a long time and therefore it is not feasible anymore from a user experience perspective...\n. You just do man-in-the-middle with faked ssl certificate...\n. You add your CA to cacerts.bks in android...\n. ",
    "rodero95": "I'm also one of the affected by this issue. WhatsAPI doesn't work for me anymore since I used it with the new Whatsapp version. But I'm thinking of another thing, What if we remove our accounts from the server with the new version and try to registrate with old one? It should use the old register api instead of the new one, should it? \nI'm gonna try in a moment and report back. \n. No luck. I've just tried deleting the account from the new version and then tried re-registering with the old version and it shows me the message to update the app. \nAlso, I've tried with a phone number that has never been connected with the new app and it hasn't worked either, so I think Whatsapp is not accepting registers with the new api anymore. \nThen the only chance we have is to guess how the new password is hashed. \n. There's no need to do that, someone has explained before that https://github.com/tgalal/yowsup should be able to get your hashed password, then replace that in WhatsAPI and it should work again. \n. I've just tried WhatsAPI with a phone number and an imei that hasn't updated to the new version and it has worked like a charm. \nSo definitely, if you don't update your whatsapp app it should keep working. \n. @fheft: Ah, you're right. I didn't take that into account as I use a different phone number just for WhatsAPI. \n. I'm revising Yowsup's source code and I've observed it has an option in help that says:\nDebug tools:\n  --generatepassword input\n                        Generate password from given string in same way\n                        Whatsapp generates it from a given IMEI or MAC Address\nIs that the V1 password or the V2 password? I suppose is the V1 one, gonna try and report back. \n. Yes, definitely is the V1 password. Nothing to do here. \n. Which error are you facing? Take into account that you should have python-dateutil installed. \nAnyway, the answer should be something like this: \n[david@raspberrypi src]$ python yowsup-cli -c config.txt -R 579-494\nstatus: ok\nkind: free\npw: hashed password\nprice: 0,89 \u20ac\nprice_expiration: 1358502193\ncurrency: EUR\ncost: 0.89\nexpiration: 1359728847\nlogin: country code + phone number\ntype: existing\n. Yes, it should work. I don't know if there have been any more changes in the protocol. \n. ",
    "agustinsrb": "I have the new password, but it still does not work logging. Modify the script to work with this new hash, nothing .... I checked with md5, nothing ... Interestingly, when i reinstalled whatsapp changed this password: ur[Txp_JLnr<M8K-,k. ,132 to this: ur[Txp_#F'9QV6h-p@O  , the same 6 or 7 digits .... any help?\n. ",
    "josh112": "Hi guys,\nI'd like to use WhatsApp both on my Android phone and on my PC (with WhatsAPI).\nBasically, I think this requires decrypting the 'pw' file from my phone - and use the resulting password on my PC (accessing the file is a bit tricky - but backing up WhatsApp works even on unrooted device).\nHas anyone tried to decode the password file?\n. ",
    "Bamaan": "Where did you get this information? On the WhatsApp website i can't find it.\nIf it's true it would be a good thing to put all outgoing messages is a DB and count those with timestamp > now-24h\n. Sorry, it was me.\nIt seems that while    require_once \"./whatsprot.class.php\"  works fine when you run from apache, it won't accept it when run from command line. Then you need  require_once \"whatsprot.class.php\" \n. ",
    "kaosdynamics": "+1 @jonnywilliamson \n. I didn't looked into yowsup, but I was manually trying those requests and if you send this one\n    https://v.whatsapp.net/v2/exist?cc=34&in=[phone number]&id=[IMEI (im android)]\nit returns \n    {\"status\":\"fail\",\"reason\":\"bad_param\",\"param\":\"id\"}\ninstead of \n   {\"status\":\"created\",\"id\":\"e5YxSOdQYN6GxWCTLKl7LUgyfbQ=\",\"sms_length\":6,\"voice_length\":6}\nthat you get by sending this \n    https://v.whatsapp.net/v2/exist?cc=34&in=[phone number]&UDid=[IMEI (im android)]\n. ",
    "int21ve": "Hi Folk, take a look of this code, maybe the solution is right here\nhttps://github.com/philklc/yowsup \n. read: http://www.h-online.com/security/news/item/Account-theft-still-possible-with-latest-WhatsApp-1760639.html\n. please search for post history, before open a new subject\n. ",
    "matamoscas": "Hi,\nWe are using mitmproxy to get the https trafic for whatsapp. Proxydroid in the mobile with the mitmproxy certificate.\nWe are sure, that whatsapp use a call to a webservice for get the password when the user is registered. For example, if you reinstall whatsapp, you don't receive any sms, or call, only have calls to whatsapps servers.\nOur problem is that the calls are encrypted and don't see the real url. Some advice for see this traffic? If we access to another https connection we see all conections.\nRegards\n. They have users registered with a old whatsapp version.\n. Really yowsup don't generate the passwords(except old whatsapp versions). When you verify your sms code, whatsapp servers send the password you need use.\n.  @Sephiroth1979 I have try this. But it seems that if you do asecond autentication whatsapp use xmpp encrypted to get the password. Don't calls any webservice. If you use the first registration with the sms or call like yowsapp you can get the password without problems, but only use in one device.pc, mobile\nThe most interesting is have the possibility to have a lot of devices using the same account. Probably this xmpp trafic have the solution\n@Stoyicker the big problem is get this password whitout root permisions.\n. @kingk110  i'm don't know .net but I think thah you need delete the process encriptation and replace for a base64 encode of this password.\n. @davidgfnet Hi can you do the same but deleting the data application in the emulator, but once you've done the above steps? I explain\n- register your account (you receive the sms or call)\n- delete data from setting - applications - whatsapp\n- back to register\n  And get all the urls\nRegards\n. @davidgfnet Hi, please could you attach- me what tools are you using for viewing the url mentioned in your post? We are using mitmproxy but we are not able to view any information from whataspp app.\n. ",
    "Sephiroth1979": "Hello guys, yesterday I tried for the first Time WhatsAPI.\nI think that I did all correctly but WhatsAPI is always telling me \"wrong password\". Is this issue related to the problem you're speaking about here?\n. @shirioko I tryed with two different accounts, one of them has been surely updated to the latest revision, maybe the other too. Both of them are not working with WhatsAPI.\nThere is  another way to read someone's else Whatsapp messagges? I need to read my half whatsapp chats as I think she's cheating on me. She's usino whatsapp (assume latest) on a Nokia E71i, we're on the same network. Any idea?\n. What about installing WhatsApp on a pc using one of the available Android emulator? Maybe it will be simpler to undestand the flux between client and server. As far as I know there are two emulators YouWave (which is not free) and Bluestacks App play (wich is instead free).\nMoreover there is a tutorial on the web which explains how to install WhatsAPP on one of the two emulators above, there is a registration process by phone and not by sms, the problem is that WhatsApp will be uninstalled on the target phone as it can run only on one devide.\n. I was messing around with BlueStacks app player installed on my W8 pc. I have downloaded and installed Whatsapp on Bluestacks emulator, I started the application and he asked me for the phone number. I wrote the phone number of the iphone on which I have installed Whatsapp, after a while has started an \"automatic sms verification method\" and after 3 or 4 minutes I got an sms from Whatsapp on my Iphone with the WhatsApp code. I don't know if this can be usefull or not.\n. It seems like yowsup can generate working passwords also for new whatsapp accounts, anyone con confirm?\n. @int21ve This article is dated 01/12/12, i Thank that the latest version of whatsapp has been dispatched later than that.\n. @matamoscas Ok. However if you use an Android Emulator and you register a new account he will starts waiting for sms verification. If sms verification fails after a few moments you have the option to get a call back from WhatsAPP in which you will be given the sms code. If you insert this sms code in Whatsapp running on Android emulator on pc you will get the password on the pc and maybe we can try to sniff it.\n. @Stoyicker I agree with you, i Think that is much easier to find a password on a pc rather than on an IPhone..l\n. @matamoscas What i really need is to listen to messages of another account without being noticed. As far as I know there's no way actually isn't it. \nIt would be also ok if the account on the smartphone freezes for some time while I am listening..\n. @davidgfnet I think you did a great job. I can try if you want, but I don't have the necessary knowledge to do it. I have whatsapp installed on my Iphone and Bluestacks emulator on my pc with Whatsapp installed in. On my pc I have the same Whatsapp account that I have on the Iphone, but i can't use it at the same time.. incoming messages are only received by my pc.\n. Is the password working also in new whatsapp accounts?\n. Ok, thank you guys.. I am not actually on the same network of the target phone, so nothing to do! Let's wait for a new solution.\n. ",
    "stoyicker": "And, instead sniffing, why don't we simply look for the password in the emulator file system? Because I guess once the application receives the password, it should store it somewhere so it can use it later to login, so it has to be there, somewhere.\n. @matamoscas Well I don't have a smartphone yet so I don't really know how hard it can be, but I don't think getting root permissions is a real challenge for anyone who knows how to use this API.\n. Most likely, the device in which you use WhatsApp has the app updated to, at least, v2.8.8889, meaning that it uses the v2 login method, which is being a considerable headache for the users of this API since its release, because it changes the method in which the password is generated/obtained, and therefore you receive 'Wrong password' error whenever you try to login by using the v1 login method (the one you're trying to use), but it can be too that you don't have WhatsApp credentials (meaning you're using a phone number + country code combination which is not associated to any phones with WhatsApp in the whole world).\n. Thank you very much. This was not valid for me, since I live in Spain where Google Voice isn't supported. However the method has anyway worked. I've used the sms verification and, for the phone, just my country code and my mobile phone number, e. g., 34123456789, where 123456789 is my phone number, registered in Spain (country code 34). I've received the SMS within seconds.\nThank you very much again @jonnywilliamson \n. ",
    "davidgfnet": "Hi,\nI confirm that the password is sent by the server to the app (this doesn't imply that the server calculates it nor that the password cannot be calculated by the app). Using fheft's idea I sniffed the SSL traffic using a proxy and I found my password. Also using the base64-decoded pw as password for the session key derivation it generates a valid RC4 key. The sequence is more or less:\n/v2/exist?cc=34&in=64XXXXX06&lg=en&lc=US&id=528404XXXXXX...XXXX62\n(Returns error, immediatly continues)\n/v2/code?cc=34&in=64XXXXX06&id=abcdef0123456789&lg=en&lc=US&mnc=260&mcc=310&method=self&reason=&token=3da4f4f02255XXXX...XXXb3\nVery curious the ID, right? This returns a large code, no idea. After some minutes checking (no SMS; emulator) it issues another request:\n/v2/code?cc=34&in=64XXXXX06&id=abcdef0123456789&lg=en&lc=US&mnc=260&mcc=310&method=sms&reason=self-send-timeout&token=3da4f4f02255XXXXXX...XXXXb3\nThis causes an SMS to be sent with the code  238-821\n/v2/register?cc=34&in=64XXXXX06&lg=en&lc=US&id=%01%c3%91%dbP%ebs%22Z%3d%c05z8m%2cX%28%f5d&code=238821\nAgain a very weird ID is sent. Now the server responds with the PW as well as details about the app and account.\nI was thinking.... Maybe we can't (or it's convoluted) isolate the pw generator algorithm, but we could just mimic this sequence we could manage to get a fresh new PW right?\nAnyone wants to try? I have my PW and I don't wanna lose it again, installing the root CA in the emulator took me hours... android crap....\n. Hi again.\nI'm using BurpSuite as a proxy. As I'm running it in the emulator environment I'm exporting the environment variable http_proxy to force the connection to go through it. I had to add a Root certificate to the android ROM in order to bypass the certificate errors due to the fake SSL certificate, this point was specially difficult, as the ROM memory is not writeable within the emulator.\nHope this helps!\n. Hey shirioko, is v2 contact sync still working for you? I'm afraid I'm having a 404 for https://sro.whatsapp.net/v2/sync/q and https://sro.whatsapp.net/v2/sync/a\n. ",
    "otto5050": "wo muss ich die seriennummer angeben damit ich auf einem whatsapp erlangen kann bzw sehen kann was der jenige geschrieben hat bzw selbst schicken kann?\n. ",
    "TheMattBan": "@otto5050 - the security hole you are referring to is not present anymore. Every WA user now has a dedicated logon password which is sent to him on registering.\n. Hi!\nJust in case anyone is interested, I seem to have found a workaround for me.\nIn whatsprot.class.php, protected function processInboundData($data) I have changed from\nphp\n$this->sendMessageReceived($node);\nto\nphp\nif ((reset(explode('@',$node->_attributeHash['from']))==$this->_phoneNumber) && ($node->getChild('received') != NULL)){         \n} else {\n    $this->sendMessageReceived($node);\n}\nThis way my own messages won't be acknowledged anymore and the server sets it to read after some time.\nNow I still can send test messages to myself and still get a \nxml\n    <ib from=\"s.whatsapp.net\">\n      <offline count=\"0\"></offline>\n    </ib>\nafter logon.\nHTH\nTheMattBan\n. ",
    "alibarrak": "few days ago I used old version of whatsapp to register a new account, it works\n. @kingk110 i meant manually via whatsapp on android --sorry\n. @amiyo yes it's a shared server I guess that is the reason. \n. ",
    "amiyo": "Okay..If it is a shared server you have to check whether you are able to bind socket connection from that server, if not you have to tell them to open port 5222 and try again. \nAnd it seems Whatsapp blocking messages(not delivering) if you are pumping a lot of messages in a day. how many messages you are trying to push in a day.\n. It seems there is a problem in the connection in Whatsapp binding...even tried yowsup also...it is responding \"WAuth:   Login Status: failure\" in old version and new version.\nif any one is able to login please update.\n. @shargon, you are right, I have an old account and a new account, but both are not woking from today morning. so that they have changed the protocol. but still the old app in iPhone are able to send/receive. \n. @jonnywilliamson for sure something is going on in whatsapp server....Now I am able to send using WhatsAPI but not using yowsup...see the below log, it is responding for exist check but not able to log in..\nhttp://pastebin.com/yFfQEW1r\n. ",
    "qwerty108": "Hi, sorry I know this isn\u00b4t the best place to put it here, but im trying to implement Whatsapp in j2me and I having the same exact issue. Im almost sure that my response is being formed good. Now Im not sure if my code is bad or whatsapp changed something... \n. ",
    "cluber22": "Am I right in saying that with this method, when you go back onto your phone you need to re-register and verify on your phone.\n. @jonnywilliamson I did read that but was looking for some clarification regarding the reverifying. Thanks.\n. ",
    "horaceho": "\uff20jonnywilliamson Thanks for the great information and detail instructions. It works like a charm.\n. I have a question about the create_group_$id. Can I just pick any number? \nFor example, if I crated a group (with id 1361267945) by:\ntx  <iq to=\"g.us\" type=\"set\" id=\"create_group_1361267945\">\ntx    <group xmlns=\"w:g\" action=\"create\" subject=\"HELLO\"></group>\ntx  </iq>\nThere is a response (group id=\"85255551234-1361267946\"):\n```\nrx  \nrx    \nrx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx    \nrx  \nrx  \n```\nDoes it mean the newly created group id is 1361267946 (instead of 1361267945)?\n. @shirioko thanks very much!\nHow the participant node should be defined, for adding participants into a group?\n. Got an error: PHP Fatal error:  Call to a member function NodeString() on a non-object in WhatsAPI/src/php/protocol.class.php on line 51\nwhere the $note in $this->sendNode($node); is:\n```\nProtocolNode Object\n(\n    [_tag] => iq\n    [_attributeHash] => Array\n        (\n            [id] => add_group_participants_1361273361-1\n            [type] => set\n            [to] => 85250002000-1361273361\n        )\n[_children] => ProtocolNode Object\n    (\n        [_tag] => add\n        [_attributeHash] => Array\n            (\n                [xmlns] => w:g\n            )\n\n        [_children] => Array\n            (\n                [0] => ProtocolNode Object\n                    (\n                        [_tag] => participant\n                        [_attributeHash] => Array\n                            (\n                                [jid] => 85250003000\n                            )\n\n                        [_children] => \n                        [_data] => \n                    )\n\n            )\n\n        [_data] => \n    )\n\n[_data] =>\n\n)\n```\n. Thanks @shirioko @facine !\n. Thanks @shirioko It works well after set the JID properly.\n. @shirioko if a user disables Message Timestamp, it seems to me requestLastSeen() returns nothing.\n. @shirioko thanks for the tip! any info about how to build ProtocolNodes for contact sync to work?\n. thank you!\n. email: support@whatsapp.com\n. https://v.whatsapp.net/v2/exist?in=NUMBER&cc=COUNTRY\n. ",
    "olpo": "stop telling this spammer how to do it . everyone who is not dumb as fuck already figured it out.\n. No. Go away\n. can you read? this is no issue.\n. f..ing spammers\n. stfu . if you are not able to get this workin maybe you are not supposed to do wa-spamming. \n. very easy: stop spamming\n. ",
    "gotoalberto": "@Stoyicker try fonyou.com for get a virtual number, it's free.\n. Hi, i'm trying:\n```\n<?php\n    require \"whatsprot.class.php\";\n$fromMobNumber = \"34668******\"; //ENTER YOUR GOOGLEVOICENUMBER HERE\n$toMobNumber = \"34622******\"; //ENTER YOUR OWN NUMBER HERE\n$id = \"RG+AtFm0LwD1pdX8LT**********\";  //ENTER THE PASSWORD YOU COPIED EARLIER HERE\n$nick = \"YourNick\";\n\n$w = new WhatsProt($fromMobNumber, $id, $nick);\n$w->Connect();\n$w->Login();\n$w->sendNickname($nick);\n$w->Message($toMobNumber , \"Hello!\");\n\n?>\n```\nBut it's not working. Anyone could say me what's wrong here?\nThanks in advance.\n. ",
    "willyue": "hi @jonnywilliamson ,\nI have tried your methods and it works in my localhost but somehow I cant make it work in my hosting server.\nThis error produced:-\nWarning: socket_connect() [function.socket-connect]: unable to connect [110]: Connection timed out in whatsprot.class.php on line 233\nWarning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in whatsprot.class.php on line 106\nWarning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in whatsprot.class.php on line 106\nWarning: socket_send() [function.socket-send]: unable to write to socket [32]: Broken pipe in whatsprot.class.php on line 106\nWarning: socket_read() [function.socket-read]: unable to read from socket [107]: Transport endpoint is not connected in whatsprot.class.php on line 118\nPlease guide me. Thanks a lot :)\n. hmmm.. anyway to to bypass that firewall and connect outbound connections? been cracking head for few days. Thanks.\n. this happens to video / audio also.\nDo you guys found any solutions?\n. ",
    "codename12": "@jonnywilliamson I extracted my password, the same one my phone is using, of course its not the best way but, its a start... I downloaded charles proxy on my laptop, I set the iphone to use a proxy (which is my laptop) and spoofed the registration process of my whatsapp account.. \nThe next step is to know how this password I got, get encrypteds to the pw.dat file saved in the iphone!\np.s: I havent tried yet to sign in using the password i got, I just had it..\n. ",
    "rayxelloss": "which version of python shall i use for this ?\n. thanks for the previous question. I installed all the Requirements in read me, when i tried to run the python by command (python ./yowsup-cli -c config.example -d --requestcode voice), i got \"ImportError: No module named 'ConnectionIO' \"\n. ",
    "OrangeTux": "Thanks for the code and for this tutorial.\n. @sagar551993 Maybe you should remove phone numbers and and password.\n. ",
    "serweb": "Existe algun peque\u00f1o instructivo para ejecutar el whatsapi en php? o py? una vez descubierto el password de una cuenta como se prosigue?\n. Perdon necesito un empujon, como arranco? donde pongo ese archivo y como lo ejecuto? o sea una breve explicacion desde cero y luego me la rebusco, pero necesito arrancar. Conozco un poco de shell scripts en linux pero php nunca lo utilice.\n. ",
    "krish-kapadia": "I tried getting the registration code via voice and sms but I got none of them. It said sent but I didn't get code via SMS or voice. Does it stop working???\n. # Here is the output\nD:\\Python33>python ./yowsup-cli -c config.example -d --requestcode sms\nGET\n{'User-Agent': 'WhatsApp/2.4.22 S40Version/14.26 Device/Nokia302', 'Accept': 'te\nxt/json'}\ncc=91&in=9978843611&lc=IN&lg=en&mcc=000&mnc=000&method=sms&id=19de191ef2f16489d8\n0f011828b4026f&token=c21475793368afbec851f087c8986da0\nOpening connection to v.whatsapp.net\nRequesting /v2/code?cc=91&in=9978843611&lc=IN&lg=en&mcc=000&mnc=000&method=sms&i\nd=19de191ef2f16489d80f011828b4026f&token=c21475793368afbec851f087c8986da0\nWACodeRequest:  b'{\"status\":\"sent\",\"length\":6,\"method\":\"sms\",\"retry_after\":25205\n}\\n'\nretry_after: 25205\nlength: 6\nstatus: sent\nmethod: sms\nConfig File\ncc=91\nphone=919978843611\nid=358904045415131\npassword=\nPlz tell me if I'm doing something wrong...Still I didn't get the SMS.\n. ",
    "morethanequal": "@mgp25 \nHi mgp25 can you please help me...\ni'm using https://github.com/mgp25/WhatsAPI-Official repository\n& following code\nrequire_once 'whatsprot.class.php';\necho \"ok\";\n$username = \"49xxxxxxxxxxxxxxxx\"; //Mobile Phone prefixed with country code so for india it will be 91xxxxxxxx\n$password = \"xxxxxxxxxxxxxxxxxxxxxx\";\n$debug = false;\n$nickname = \"xxxxx\";\n$w = new WhatsProt($username, $identity, $nickname, false);\n$w->connect();\n$w->loginWithPassword($password);\n$target = '49xxxxxxxxxxxxx'; //Target Phone,reciever phone\n$message = 'Test Message';\n$w->SendPresenceSubscription($target); //Let us first send presence to user\n$w->sendMessage($target,$message ); // Send Message\ni'm not getting any error message or anything...\nI generated new password using WART.. never ever used that number anywhere else\n. ",
    "lauhungshing": "You can try to change the version number from 2.8.4 to 2.8.7. This works for me.\n. ",
    "ganySA": "I would be happy to pay for someone to write a nice API for .NET there just seem to be too many unsupported, half finished or just slapped together ones.\n@shargon: maybe you are interested?\n. Is this now solved? it looks like the thread just died?\n. I must admit, i am experiencing a problem now with blocking as well. I have read a lot on the forums. I had no problems since March this year, and i sent over 10 000 messages. \nThe message are all legitimate and not spam (they are appointment reminders for patients) and i offer this as a free service to doctors. The message content is also quite simple:\n\"Please remember your appointment with Dr xxx xxxxxx tomorrow at Date + Time.\"\nIt was incredibly strange how i got blocked the first time round. At 2pm i normally send off the messages, last Thursday at 2:05pm the first number was blocked. The following day at around 7:15am the second number was blocked and at 7:30am the third number was blocked.\nWhat is strange is that at 7:15 and 7:30 i dont even think those numbers were sending anything!\nToday i bought a new number and again processed the reminders for tomorrow. 77 messages and within 1 minute blocked. \nIts very bizarre how this blocking is working.\n. I would just like to add some of my own assumptions to this post in case they are helpful to people in their search:\n1) i have run my own custom API it is very old, at least 10 months old and it has worked properly without any problems. The only thing i have used this and the .net port for is registration because those processes changed. This makes me wonder about some of the assumptions being made around \"extra\" packets that are causing the block - if this was the cause i think i would have been blocked a long time ago as my API is definitely the simplest form from 10 months ago before any whatsapp updates.\n2) I have never made use of ANY of the other functions except for sending messages. No contact synch, or anything like that which i see mentioned. Again if this was a \"check\" i would have failed this months ago.\n3) I have sent 10k messages to approximately 7.5k different numbers over a period of 10 months, at a frequency as follows: \na) When someone makes an appointment with a doctor, it sends them a message confirming that their appointment time and date is correct (people get confused on the phone). This happens as the administrator captures the appointment so possibly 1 message every 5 minutes.\nb) The day before their appointment it sends them a reminder - this is a batch mode update so its starts sending around 2pm in the afternoon, and currently it would send between 50-200 messages. These messages were load spread over 3 numbers.\nMy theory:  Banning by other users raises a red flag on a number. Doctor administrators do sometimes make mistakes and hence will send a message erroneously to someone, i did receive one or two complaints and address it with the doctors, but i think this is where MY problem started - some users will start \"banning\" a specific number. In my case if out of the 10 000 messages lets say 30 different numbers banned my number. Once the ban count for a specific number reaches a certain count think the number is 'flagged' as a possible abuse number. This makes logical sense because, if you are a spammer, quite a few people will block you hence the ban count would rise and raise the red flag.\nThis is where all the couple of things start happening:\na) some sort of analysis is done on the messages sent by that number\nb) a message mask is created for the types of messages sent by that number\nc) they look at messages from other numbers probably using some sort of clever filtering by country/ip or something and identify other numbers that have sent messages that meet that message mask they then systematically start banning the numbers that have in the past sent messages which match that mask as well as the frequency - possibly even look at a clever algorithm that checks what % of the messages sent by a user match message mask. If you were automated it would be 99% if you are a normal user it might be a few 1-2% anyone over the threshold in a certain period of time is banned.\nThe think using a combination of IP, Message Count per second, specific Message Mask or a numbers ban count these variables are used to kill \"other\" numbers that match the criteria. \nIm going to go buy 20-30 sims tomorrow and do some testing. \nThe reason why i dont believe this has anything to do with the version of whatsapp OR the API or anything like that is because i live in Africa, here the majority of the people using whatsapp have pretty old phones which might have some version of whatsapp but who never update it. If they were sending \"hidden\" packets they would be killing like thousands of subscribers erroneously.\n. @jonnywilliamson thanks, i fully agree i also tried contacting them they replied saying they do not provide such a service. This was over a year go. I really  think they should open up a 'business' division and people should apply with a template of what the message are they will be sending with a strict terms of service, i know many people would be happy to pay 0.2-0.5c (US) per message thats revenue to them instead of the stupid 1 dollar per year nonsense. It would be great competition for SMS, and the pre-arranged message format would ensure there is no spam.\n@jonnywilliamson  - i buy sim cards although i have not registered the numbers with their official tool, i am not sure it makes a difference.. but something i can try this week.\n@TruthEdge  - i sent to over 7500 different numbers (every patient has a different number)\nThe more i think about it the more i am certain, that initially to find someone sending is difficult, but once they identify a person, they aggressively monitor the IP / Message format in a geography to block numbers.\nMaybe i should give one of you guys an SA number and you can try see if you have better luck.\n. @shirioko i think you have misunderstood my intentions vs what that article describes\nThe article describes why you dont want spam. There is a huge difference between a message that is RELEVANT (personal) to you as an individual and SPAM (unsolicited, completely unpersonal). Think about my simple reminder app for doctors. \nHow often do you think people forget their appointments? do you not think they would want a reminder?\nOr maybe they simply forgot what time their appointment... is it 2 or 3pm.... \nYou should see how often people asked my whatsapp number for directions or the contact number for a specific doctor.\nI am not spamming \"hey you just won a million dollars\" or \"hey do you know you can get a new BMW for 3% less\" there are certain messages that will always add \"value\" to you as a person, specifically where its a personal message to you an individual and not you  \" the consumer\". Like for example when your car is ready to be collect from repairs, or maybe that your international parcel from DHL is now in the country, or maybe that the gym where you train doesnt have electricity or hot water due to renovations - the list is pretty much endless. SMS is an archaic delivery platform, even more so on a global scale where prices just go up for international sms' not to mention the ridiculous local costs for 160 characters of text.\nPeople and companies like whatsapp need to start thinking bigger. Sure they need to get rid of the idiots who spam ads but personalised relevant messaging, its a market that is yet to explode and its really where Whatsapp or other companies can legitimately make some money without having the backlash of being SPAM.\nThis whole thing could be done in a controlled legitimate manner. Where a company submits a template of what their messages would look like as an approved template and then simple variables in the template would be allowed to change as messages are submitted. That way whatsapp have complete control over what is being sent from \"business\" customers, and most of all if done right can generate a lot of revenue for them in a great way.\nA yearly API fee of 100 dollars, 0.5c (USD) per message whatever..... Think about the revenue possibilities... and if they really are worried about people who are fretting for their privacy or SPAM , build in a simple On/Off switch that prevents notification messages from being sent to you or just tell people to block the number, 99.9% of the people will be grateful to get the messages 0.0x% wont.\nFinally in situation where there is so much growing competition they need to get corporates onboard, not only from a financial point of view but a complete buy in point of view. If people know that more and more legitimate \"services\" will notify you of relevant messages on whatsapp than on any other platform, people will buy into whatsapp even more seriously.\nWe have to think more open mindedly, SMS has been around for 25 years, it cannot be the best way to interact with people on a personal level with legitimate messages, its simply cannot.\n. @g0g0l i am almost certain that there is a method by which they \"flagg\" someone don't know how they identify you initially for the flagged list. But it makes sense because they cannot possibly monitor everything.\nOnce a phone number gets flagged i think they do something like the following:\n1) They check the original IP + then look at all other 'channels' that used that IP\n2) They create a \"message\" template based how your message looks like and use that as a means to filter other messages on other IPs\n3) They flag all 'channels' from that IP and detect the message send rate to pick up further abuse\n4) Finally i think they look at a channel and do an analysis of how many messages are sent vs messages received if you are only sending to a large number of recipients then you are also blocked.\nBut as i said in my first sentence, this only happens once you are identified. Some people are and do still get away with sending many many many messages.\nI just found out the cellphone companies here are selling sims here on promotion during december (500 sims for 1 dollar). So i am happy to provide people with some sims tomorrow for testing if you would like.\n. @jonnywilliamson why!!!?? \ni bought 20 more sims to do some testing i have stripped absolutely everything except the most basic message, there is no reference to anything in the messages and i will see how it goes tomorrow.\nIm not a spammer i wanna smell good :D\n. @shirioko its pointless arguing about this. But if i were to bet, i'd put money on the fact that SMS in the next 10-20 years will have an indescribably small user base. Its plain text, limited in size, has no ability to really attach any media of value or geographical data. Provides no means for real time two way communication. Its archaic. \nMorse code was around for years and years, i guess we should have stuck with that too, might have made a cool techno sound if we all got together to have a conversation.\n. After a week of testing. I have about 6-7 numbers that are working with stability. I think the biggest trick is regarding message content. If you have any reference to a static item... such as a website/business name or anything like that i believe you will be blocked very quickly. The more generic and normal your messages look with no form of advertising then i believe you will be fine.\n. ",
    "leeyunfan": "Hi! Please someone can suggest me how read whatsapp conversation?\nI have only understand that I need mobile number and imei..but how?\nIt's very important..thanks!\n. ",
    "zephyern": "Try downloading whatsapp in the App Store. It let's you read any conversation pretty much so that should suit your needs.\n. I don't think that's used anymore. You can put any number there as long as it's in the right format. \n. Hi, this is likely my fault due to a recent change. Can you specify the callback function by variable rather than by name for now? ( for example, $callback instead of \"callback\" where $callback = function callback {}) I'll propose a fix to get this working again. \nThe alternative is to use the new WhatsAppEventListener class to handle these events.\nIf that doesn't work, can you let us know the code you are using which is causing this error?\n. Can you try the proposed change and let me know if it fixes your issue?\nIn this file: src/php/events/WhatsAppEventListenerLegacyAdapter.php\nOn line 26\nChange this: \nfunction __construct($eventName, callable $callback)\nTo this: (without the callable text)\nfunction __construct($eventName, $callback)\n. It may be due to an old php version- do any events work? I'm not sure if I tested audio specifically but pictures and videos should work ok. \n. This API will not change how whatsapp works. This means that if you'd be blocked by doing that on your phone you will also be blocked using this api. The reverse is true also. I think you should direct these questions to whatsapp support rather than this forum as your question is not specific to this API but rather how whatsapp works in general. \n. What happens when you do the same thing without using this api? Again, I don't think the api has any effect here. To whatsapp, they can't even tell that you're using whatsapi or a phone. any blocking that is happening here is the result of how you're using whatsapp and has nothing to do with this api. \nWhat exactly are you looking for as a response here? We don't know why whatsapp decides to block certain numbers, but we know it's not solely due to using this api. You'll probably need to ask your question to whatsapp support as they are the only ones who can really tell you why your number was blocked in each case. \n. It's fair enough to ask what other people's experiences are with whatsapp, but just want to make it clear that banning is very unlikely solely due to whatsapi. \n. If I was designing a messaging server to detect spam, I'd probably take the following points into account:\n- does this account typically send to people who have this account in their contacts?\n- does this account typically received messages from people in its contacts?\n- does this account only receive messages?\n- does this account only send messages?\nI would think that whatsapp may do something similar. \nI would guess that most people who use whatsapp typically send and receive message from their contacts. Receiving a message from someone not in your contacts is a flag for both users, especially if it happens a lot. Also, only (or mainly) sending or receiving messages seems suspicious too. How many people have whatsapp but never send any messages?\n. What do you think ! does, exactly?\n. On line 65, you're checking for a !. Change that to another character or just remove it altogether and I think it'll do what you're asking.\n. I'm able to stay logged in for days without disconnecting. How often are you polling? Are you responding to the ping messages?\n. Why does your script disconnect? Is the socket closing or do you get an exception?\n. If the script exits, then maybe nothing to do with whatsapi but maybe with the way you're running php? Php has a max_execution_time and set_time_limit which will stop your script after a given amount of time. Neither has a default value of 1hr, but if your script always stops after exactly 1hr it doesn't sound related to whatsapi.\nhttp://www.php.net/manual/en/info.configuration.php#ini.max-execution-time\n. This is an \"unofficial api\" if that's what you're asking. You'll have to check with whatsapp directly to answer any legal questions. I wouldn't write anything using this api for commercial purposes though.\n. I think that will only work if they add you as a contact. Otherwise your number will likely get blocked if only you add a lot of people to your contacts. Either way, the api will let you try it.\n. No, this can also happen when use the whatsapp app (happens commonly when sending a picture followed by text). Even adding a half a second delay would probably be unnoticeable by the recipient and help to try I get the message to be delivered in order. \n. Have you considered using the event listeners? An interface is provided to ensure that your functions are defined correctly.\n. ",
    "fefantom": "where api is work ?\nis this exploit closed?\n. Help please\n. ",
    "tommart": "Hi Shirioko\nYou have earlier told me that I could install Phyon on windows and then use Yowsup to get the password so WhatsAPI works again. I have sucsesfully installed python33 and also Yowsup and yowsup-cli, but when I start the yowsup-cli I get a error for all print commands in yowsup-cli, any sugestions. Sadly I'm not familiar white python programming.\nMy test is the following yowsup-cli.py c config.ini --requestcode sms, and I get an error on line 96, print \"starting\" and if I delete taht row i get an error on next print at line 221 print CONFIG_HELP\nHopfully you can help me.\nbest regards Tom\n. Thanks Shirioko, now everything is working just fine :-)\n. I have the same issues regarding sending messages after the login procedure changed, but I do not have a server to run the python script on, is there any tips on getting the pssword from whatsapp for a iphone or andoid whitout creating a google voice account and then run the python ?\n. ok, thanks for the info. Is it possible to get the password for an excisting whatsapp account, ore do I need to create a new account thru google voice?\n. Thanks shirioko for your respons. I will test and se if I can get whatsapp to work again, are using it in a online ordering system for a cab company :-)\n. ",
    "atans": "@adasmalakar \nThe url is check number exists in WhatsApp or not\n. I found  a solution from Yowsup\nSee https://github.com/tgalal/yowsup/blob/master/src/Yowsup/Contacts/contacts.py\n. @manufuentescr \nWhat's your image url?\n. I think block number when your have used third-party image url.\n. @facine\n. @horaceho \nThis account does not send any messages.\nWhat happened about this situation?\n. @shirioko It's cool\n. Unblock after 2 months\n. No. I had not contact WhatsApp\n. I use Note 2 and got this problem\n. IOS is clickable (iPhone Tested)\n. I had try and the received message  is the same as yours.\nI will try again tomorrow.\nThanks  for shirioko.\n. ``` xml\nrx  \nrx    \nrx    \nrx    http://abc.com\nrx    \nrx  \n```\n@shirioko Same as yours!\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/whatsprot.class.php#L19\nphp\n    // The device name.\n    const _device = 'iPhone';\nWhat is the android device name should I change to?\n. I found the problem: Android WhatsApp version 2.10.722 has this problem\n2.10.222 is OK \n. @shirioko: I think an unknown number send a link to you (Android device), the link will be unclickable!!\n. Thanks @shirioko, I have some number for test.\n. I suggest:\n1. Change to  PSR-X  standard module  https://github.com/php-fig/fig-standards\n2. Use php namesapce http://www.php.net/manual/en/language.namespaces.rationale.php\n. @shirioko, I suggest you try to use PhpShorm. ha...\n. WhatsProt::processInboundData() is too big right now\nI have an idea to improve the code.\n``` php\n// Example : Inbound parse\nparserFactory->parse($tag = 'iq', ProtocolNode $node) {\n   $class = sprintf('\\WhatsAPI\\Parser\\%s', ucfirst($tag)); // \\WhatsAPI\\Parser\\Iq.php\n    if (class_exists($class)) {\n        if (!isset($this->parsers[$tag])) {\n            $this->parsers[$tag] = new $class($this->whatsPort);\n        }\n\n        return call_user_func_array(array($this->parsers[$tag], 'parse'), array($node));\n    }\n\n}\n// \\WhatsAPI\\Parser\\Iq.php\nclass Iq extends AbstractParser\n{\n   protected $whatsProt;\npublic __construct(WhatsProt $whatsProt) {\n    $this->whatsProt = $whatsProt;\n  }\npublic function parse(ProtocolNode $node) {\n     // Parse iq tag now\n     if (strcmp($node->_tag, \"iq\") == 0 && strcmp($node->_attributeHash['type'], \"result\") == 0) {\n        // Do something\n        // Or add event\n        // Or use $whatsProt instance\n```\n. @Dynogic fighting...\n. @Dynogic  I can give you some account for test! Orz....\n. @Dynogic  Sent.\n. Good job! @Dynogic, Love YOU.\n. @Dynogic \nIs this token right?\n(Amazing, It's very simple in php)\n``` php\nclass Token\n{\n   const DEHASH = \"8ac295a1bc5c0df1147db1ad2172b776\";\n   const LONGHASH = \"30820332308202f0a00302010202044c2536a4300b06072a8648ce3804030500307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e301e170d3130303632353233303731365a170d3434303231353233303731365a307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e308201b83082012c06072a8648ce3804013082011f02818100fd7f53811d75122952df4a9c2eece4e7f611b7523cef4400c31e3f80b6512669455d402251fb593d8d58fabfc5f5ba30f6cb9b556cd7813b801d346ff26660b76b9950a5a49f9fe8047b1022c24fbba9d7feb7c61bf83b57e7c6a8a6150f04fb83f6d3c51ec3023554135a169132f675f3ae2b61d72aeff22203199dd14801c70215009760508f15230bccb292b982a2eb840bf0581cf502818100f7e1a085d69b3ddecbbcab5c36b857b97994afbbfa3aea82f9574c0b3d0782675159578ebad4594fe67107108180b449167123e84c281613b7cf09328cc8a6e13c167a8b547c8d28e0a3ae1e2bb3a675916ea37f0bfa213562f1fb627a01243bcca4f1bea8519089a883dfe15ae59f06928b665e807b552564014c3bfecf492a0381850002818100d1198b4b81687bcf246d41a8a725f0a989a51bce326e84c828e1f556648bd71da487054d6de70fff4b49432b6862aa48fc2a93161b2c15a2ff5e671672dfb576e9d12aaff7369b9a99d04fb29d2bbbb2a503ee41b1ff37887064f41fe2805609063500a8e547349282d15981cdb58a08bede51dd7e9867295b3dfb45ffc6b259300b06072a8648ce3804030500032f00302c021400a602a7477acf841077237be090df436582ca2f0214350ce0268d07e71e55774ab4eacd4d071cd1efad\";\npublic static function generate($number)\n{\n    //return md5(utf8_encode(self::LONGHASH . self::DEHASH . $number));\n    return md5(self::LONGHASH . self::DEHASH . $number);\n}\n\n}\necho Token::generate(12345679);\n// ead69804b4b5da4c7455d1d20c8f0dc0\n``\n.  @Dynogic  @devloic\nI  was test two real number\nGot {\"status\":\"sent\",\"length\":6,\"method\":\"sms\",\"retry_after\":1805}\nand failed to receive sms code too\n. @Dynogic  Could you give a US's mcc and mnc example for me ?\nUS's mcc310and mnc000`, right ?\nChina's mcc 460, mnc 000 is not working for me\nhttps://v.whatsapp.net/v2/code?cc=86&in=13650101233&lc=cn&lg=en&mcc=460&mnc=000&method=sms&reason=self-send-jailbroken&id=01fb96b840b9e83a30f28e4db581f7de&token=eba8822ee1a5ec6146da7e1aac9d910e\n. @Dynogic \nIs the id atrribute  must beabcdef0123456789 ? \nI have no number for test now. Orz...(number 13650101233 is an example )\nThanks Dynogic \n. @Dynogic\n I had use the  ID (md5 imei) to receive a voice call, but can't receive a code\n. Is it dangerous if whatsapp block the id abeabcdef0123456789?\n. @Dynogic \nHow to randomize  those ID digits?\nLike this abeabcdef215489458 ?\n. @Dynogic, Thanks.\n. @Dynogic\nI lost sim cards of those numbers, so I can not get the sms and I had test all my numbers before I knew the id attribte is wrong.\nI feel so down because I have no number to test this amazing code\n. @shirioko \nCan you register a new account using WhatsApp/2.10.506 WP7/7.10.8858 Device/HTC-HTC-H0002'\n. I had try to use https://github.com/karolsarnacki/whatsapp/blob/master/lib/whatsapp/request/base.rb#L20 token, but it's still not working for register a new number.\n. @Dynogic I was test galaxys3 token and  work fine yesterday night,\nBut it was not working when I test it today\n. @shirioko What's your WP7 token generator?\n. 500 contacts, Try to run it five times. OK?\n. @xX7 You can generate 500 numbers for test.\nphp\n$numbers = range(100000000, 100000500);\n. @shirioko Is the code request  work again? \n. ``` php\n$username = '1012345678';                 \n$identity = urlencode(sha1(strrev('12345678' . $salt), true)); \n$nickname = 'test';  \n$debug = true;\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$response = (array) $w->checkCredentials();\n$w->connect();\n$w->loginWithPassword($response['pw']);\n```\n```\ntx  \ntx    \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  \ufffdMV\ufffdcdO\ufffdL\ufffd\ufffdd\\\ufffd\ufffd&\ufffd?#\ufffd\ntx  }q   lLv\u001c\ufffd\ufffd\ufffdx\ufffdcF\ufffd\u0016\ufffd\ufffdZ-\ufffd\ufffd\ufffds\ufffd\"mZ\u0254\u001074\uf1f0\ufffd\ufffd\ufffd\ufffdIP\ufffd\u0016\ufffd\nrx  \nrx    \nrx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    Hello\ntx  \n```\n@shirioko \nWhy I still get not-authorized and can't send text message ?\nThanks !\n. @shirioko \nIs WhatsApp can detect client that who use this api\nOR\nSome node missing?\n. @Waishon  Try to change the IP\n. Right.\n. ",
    "AlisterAmo": "Y use php in a web that uses yowsup, and Its no matter to me executing a program and parsing the standard output,,,\n. man, I have exactly the same question, but, instead asking, I will test the answer.\nwhy dont you do th same? this modification is less than 24 h old... we DO NOT have all the answers yet!\nplease, collaborate finding out...\n. @jonnywilliamson too risky assumption; maybe you will be right with a fraction of the raeders... who knows... but anyways, not \"must of you\", as you unfoundedly assert ;)\n. I comment my work in tarek galal's repo, since i use yowsup ;)\n. I repeat my experience:\nstress test did not revealed mass harvesting throtling\n. probably the file named \"config\" has some garbage on it, or bad values for phone numer etc, but you have make a mistake showing us the file name config.example instead, so we cannot help you\nanyway, this is not the correct place to ask for yowsup support, dude. see 4 posts up, its written with very big sized font...\n. oh, I see, I just have been mislead because you have the two files open in your editor. my fault.\nin order not to annoy the people at whatsapi project, go to tarek galal's repo and open a new suport request there, we will troubleshoot there.\nhttp://github.com/tgalal/yowsup\n. if you try to communicate directy with this url, neither whatsapi nor yowsup people could provide you much support!\nif you try to use whatsappi to check if a number exists, please use the correct programming interfaces provided by the api and in case of error, ask here again.\nif you try to use yowsup to check if a number exists, please use the correct programming interfaces provided by the api and in case of error, move on to tarek's repo here: http://github.com/tgalal/yowsup\nand please, don't mix up support requests together! in a few posts you talked about registering, checking, using yowsup, communicating directly with the whatsapp server... we try to stay organized in order to be helpful and avoid messing up information :)\n. ",
    "bjdudu": "It seems that the new solution need authentication using your username and password, and it should have a request number limit. That is, someone cannot scan huge amount of phone numbers which installed whatsapp now.\n. @kingk110 \ncan you tell me a more exact number of how many messages you sent perday?\n. @kingk110 \ndo you have any IM? email is also ok, maybe we can discuss this issue and share something in private.\n. @ruriimasu , @kingk110 \nYou can send me email\n@shirioko \nok, I close this topic now.\n. ",
    "abbas224252": "How to register new number for sending whatsapp msg\n. In python i get this error . Please check attach file\n\n. but i am using config not config.example\n. thank for replaying \n. https://v.whatsapp.net/v2/exist?in=5**&cc= this url is to check block number \n. Sorry \n. This way we can register number in whatsapp.\n. If i pay 1 $ whatsapp not block my number . \n. In php how can we generate\nmd5 checksum code \n. Every two massage my number become block how  can i stop this \n. how to stop spamming\n. i have use this sleep(3); t\n. For register i am using Hash code and number . \n. ```\nif((($i++)%5) == 0)\n{\n    $rand_key = array_rand($sen);\n    $sen_part = explode(\",\", $sen[$rand_key]);\n    unset($wa);\n    $wa = new WhatsProt(trim($sen_part[1]), trim($sen_part[0]), $name, true);\n    $wa->Connect();\n    $wa->Login();\n}\n/echo \"Sending to: \" . '965'.$receiver . \" from: \" . $sen_part[1];\nexit;/\n$msgid = time().\"-\".rand();\n$wa->Message($msgid, trim('965'.$receiver) , $body);\nsleep(1);\n$wa->RequestLastSeen($msgid, $receiver);\n```\nI am using this way \n. <?php\nrequire \"protocol.class.php\";\nrequire \"func.php\";\nrequire \"rc4.php\";\nclass WhatsProt \n{\n    protected $_phoneNumber;\n    protected $_imei;\n    protected $_name;\n```\nprotected $_whatsAppHost = \"c.whatsapp.net\";\nprotected $_whatsAppServer = \"s.whatsapp.net\";\nprotected $_whatsAppRealm = \"s.whatsapp.net\";\nprotected $_whatsAppDigest = \"xmpp/s.whatsapp.net\";\nprotected $_device = \"iPhone\";\nprotected $_whatsAppVer = \"2.8.4\";\nprotected $_port = 5222;\nprotected $_timeout = array(\"sec\" => 2, \"usec\" => 0);\nprotected $_incomplete_message = \"\";\nprotected $_disconnectedStatus = \"disconnected\";\nprotected $_connectedStatus = \"connected\";\nprotected $_loginStatus;\nprotected $_accountinfo;\nprotected $_messageQueue = array();\nprotected $_socket;\nprotected $_writer;\nprotected $_reader;\nprotected $_inputKey;\nprotected $_outputKey;\nprotected $_debug;\nfunction __construct($Number, $imei, $Nickname, $debug = false)\n{\n    $this->_debug = $debug;\n    $dict = getDictionary();\n    $this->_writer = new BinTreeNodeWriter($dict);\n    $this->_reader = new BinTreeNodeReader($dict);\n    $this->_phoneNumber = $Number;\n    $this->_imei = $imei;\n    $this->_name = $Nickname;\n    $this->_loginStatus = $this->_disconnectedStatus;\n}\nprotected function addFeatures()\n{\n    $child = new ProtocolNode(\"receipt_acks\", NULL, NULL, \"\");\n    $parent = new ProtocolNode(\"stream:features\", NULL, array($child), \"\");\n    return $parent;\n}\nprotected function addAuth()\n{\n    $authHash = array();\n    $authHash[\"xmlns\"] = \"urn:ietf:params:xml:ns:xmpp-sasl\";\n    $authHash[\"mechanism\"] = \"WAUTH-1\";\n    $authHash[\"user\"] = $this->_phoneNumber;\n    $node = new ProtocolNode(\"auth\", $authHash, NULL, \"\");\n    return $node;\n}\npublic function encryptPassword()\n{\n    if(stripos($this->_imei, \":\") !== false){\n        $this->_imei = strtoupper($this->_imei);\n        return md5($this->_imei.$this->_imei);\n    }\n    else {\n        return md5(strrev($this->_imei));\n    }\n}\nprotected function authenticate()\n{\n    $key = pbkdf2(\"sha1\", $this->encryptPassword(), $this->challengeData, 16, 20, true);\n    $this->_inputKey = new KeyStream($key);\n    $this->_outputKey = new KeyStream($key);\n    $array = $this->_phoneNumber.$this->challengeData.time();\n    $response = $this->_outputKey->encode($array, 0, strlen($array), false);\n    return $response;\n}\nprotected function addAuthResponse()\n{\n    $resp = $this->authenticate();\n    $respHash = array();\n    $respHash[\"xmlns\"] = \"urn:ietf:params:xml:ns:xmpp-sasl\";\n    $node = new ProtocolNode(\"response\", $respHash, NULL, $resp);\n    return $node;\n}\nprotected function sendData($data)\n{\n    socket_send( $this->_socket, $data, strlen($data), 0 );\n}   \nprotected function sendNode($node)\n{\n    $this->DebugPrint($node->NodeString(\"tx  \") . \"\\n\");\n    $this->sendData($this->_writer->write($node));\n}\nprotected function readData()\n{\n    $buff = \"\";\n    $ret = socket_read( $this->_socket, 1024 );\nif ($ret)\n{\n    $buff = $this->_incomplete_message . $ret;\n    $this->_incomplete_message = \"\";\n}\n\nreturn $buff;\n\n}\nprotected function processChallenge($node)\n{\n    $this->challengeData = $node->_data;\n}\nprotected function sendMessageReceived($msg)\n{\n    $requestNode = $msg->getChild(\"request\");\n    if ($requestNode != null)\n    {\n        $xmlnsAttrib = $requestNode->getAttribute(\"xmlns\");\n        if (strcmp($xmlnsAttrib, \"urn:xmpp:receipts\") == 0)\n        {\n            $recievedHash = array();\n            $recievedHash[\"xmlns\"] = \"urn:xmpp:receipts\";\n            $receivedNode = new ProtocolNode(\"received\", $recievedHash, null, \"\");\n        $messageHash = array();\n        $messageHash[\"to\"] = $msg->getAttribute(\"from\");\n        $messageHash[\"type\"] = \"chat\";\n        $messageHash[\"id\"] = $msg->getAttribute(\"id\");\n        $messageNode = new ProtocolNode(\"message\", $messageHash, array($receivedNode), \"\");\n        $this->sendNode($messageNode);\n    }\n}\n\n}\nprotected function processInboundData($data)\n{\n    try\n    {\n        $node = $this->_reader->nextTree($data);\n        while ($node != null)\n        {\n            $this->DebugPrint($node->NodeString(\"rx  \") . \"\\n\");\n            if (strcmp($node->_tag, \"challenge\") == 0)\n            {\n                $this->processChallenge($node);\n            }\n            else if (strcmp($node->_tag, \"success\") == 0)\n            {\n                $this->_loginStatus = $this->_connectedStatus;\n                $this->_accountinfo = array('status'=>$node->getAttribute('status'),'kind'=>$node->getAttribute('kind'),'creation'=>$node->getAttribute('creation'),'expiration'=>$node->getAttribute('expiration'));\n            }\n            if (strcmp($node->_tag, \"message\") == 0)\n            {\n                array_push($this->_messageQueue, $node);\n                $this->sendMessageReceived($node);\n            }\n            if (strcmp($node->_tag, \"iq\") == 0 AND strcmp($node->_attributeHash['type'], \"get\") == 0 AND strcmp($node->_children[0]->_tag, \"ping\") == 0)\n            {\n                $this->Pong($node->_attributeHash['id']);\n            }\n            if (strcmp($node->_tag, \"iq\") == 0 AND strcmp($node->_attributeHash['type'], \"result\") == 0 AND strcmp($node->_children[0]->_tag, \"query\") == 0)\n            {\n                array_push($this->_messageQueue, $node);\n            }\n            $node = $this->_reader->nextTree();\n        }\n    }\n    catch (IncompleteMessageException $e)\n    {\n        $this->_incomplete_message = $e->getInput();\n    }\n}\npublic function accountInfo(){\n    if(is_array($this->_accountinfo)){\n        print_r($this->_accountinfo);\n    }\n    else{\n        echo \"No information available\";\n    }\n}\npublic function Connect(){ \n    $Socket = socket_create( AF_INET, SOCK_STREAM, SOL_TCP );\n    socket_connect( $Socket, $this->_whatsAppHost, $this->_port );\n    $this->_socket = $Socket;\n    socket_set_option($this->_socket, SOL_SOCKET, SO_RCVTIMEO, $this->_timeout);\n}\npublic function Login()\n{\n    $resource = \"$this->_device-$this->_whatsAppVer-$this->_port\";\n    $data = $this->_writer->StartStream($this->_whatsAppServer, $resource);\n    $feat = $this->addFeatures();\n    $auth = $this->addAuth();\n    $this->sendData($data);\n    $this->sendNode($feat);\n    $this->sendNode($auth);\n$this->processInboundData($this->readData());\n$data = $this->addAuthResponse();\n$this->sendNode($data);\n$this->_reader->setKey($this->_inputKey);\n$this->_writer->setKey($this->_outputKey);\n$cnt = 0;\ndo\n{\n    $this->processInboundData($this->readData());\n} while (($cnt++ < 100) && (strcmp($this->_loginStatus, $this->_disconnectedStatus) == 0));\n\n}\nPull from the socket, and place incoming messages in the message queue\npublic function PollMessages()\n{\n    $this->processInboundData($this->readData());\n}\nDrain the message queue for application processing\npublic function GetMessages()\n{\n    $ret = $this->_messageQueue;\n    $this->_messageQueue = array();\n    return $ret;\n}\nprotected function SendMessageNode($msgid, $to, $node)\n{\n    $serverNode = new ProtocolNode(\"server\", null, null, \"\");\n$xHash = array();\n$xHash[\"xmlns\"] = \"jabber:x:event\";\n$xNode = new ProtocolNode(\"x\", $xHash, array($serverNode), \"\");\n\n$messageHash = array();\n$messageHash[\"to\"] = $to . \"@\" . $this->_whatsAppServer;\n$messageHash[\"type\"] = \"chat\";\n$messageHash[\"id\"] = $msgid;\n$messsageNode = new ProtocolNode(\"message\", $messageHash, array($xNode, $node), \"\");\n$this->sendNode($messsageNode);\n\n}\npublic function Message($msgid, $to, $txt)\n{\n    $bodyNode = new ProtocolNode(\"body\", null, null, $txt);\n    $this->SendMessageNode($msgid, $to, $bodyNode);\n}\npublic function MessageImage($msgid, $to, $url, $file, $size, $icon)\n{\n    $mediaAttribs = array();\n    $mediaAttribs[\"xmlns\"] = \"urn:xmpp:whatsapp:mms\";\n    $mediaAttribs[\"type\"] = \"image\";\n    $mediaAttribs[\"url\"] = $url;\n    $mediaAttribs[\"file\"] = $file;\n    $mediaAttribs[\"size\"] = $size;\n$mediaNode = new ProtocolNode(\"media\", $mediaAttribs, null, $icon);\n$this->SendMessageNode($msgid, $to, $mediaNode);\n\n}\npublic function Location($msgid, $to, $long, $lat)\n{\n    $whatsAppServer = $this->_whatsAppServer;\n$mediaHash = array();\n$mediaHash['type'] = \"location\";\n$mediaHash['longitude'] = $long;\n$mediaHash['latitude'] = $lat;\n$mediaHash['xmlns'] = \"urn:xmpp:whatsapp:mms\";\n$mediaNode = new ProtocolNode(\"media\", $mediaHash, null, null);\n\n$messageHash = array();\n$messageHash[\"to\"] = $to . \"@\" . $whatsAppServer;\n$messageHash[\"type\"] = \"chat\";\n$messageHash[\"id\"] = $msgid;\n$messageHash[\"author\"] = $this->_phoneNumber . \"@\" . $this->_whatsAppServer;\n\n$messsageNode = new ProtocolNode(\"message\", $messageHash, array($mediaNode), \"\");\n$this->sendNode($messsageNode);\n\n}\npublic function sendStatusUpdate($msgid, $txt)\n{\n    $bodyNode = new ProtocolNode(\"body\", null, null, $txt);\n    $serverNode = new ProtocolNode(\"server\", null, null, \"\");\n    $xHash = array();\n    $xHash[\"xmlns\"] = \"jabber:x:event\";\n    $xNode = new ProtocolNode(\"x\", $xHash, array($serverNode), \"\");\n    $messageHash = array();\n    $messageHash[\"to\"] = 's.us';\n    $messageHash[\"type\"] = \"chat\";\n    $messageHash[\"id\"] = $msgid;\n    $messsageNode = new ProtocolNode(\"message\", $messageHash, array($xNode, $bodyNode), \"\");\n    $this->sendNode($messsageNode);\n}\npublic function Pong($msgid)\n{\n    $whatsAppServer = $this->_whatsAppServer;\n$messageHash = array();\n$messageHash[\"to\"] = $whatsAppServer;\n$messageHash[\"id\"] = $msgid;\n$messageHash[\"type\"] = \"result\";\n\n$messsageNode = new ProtocolNode(\"iq\", $messageHash, null, \"\");\n$this->sendNode($messsageNode);\n\n}\npublic function sendNickname($nickname)\n{\n    $messageHash = array();\n    $messageHash[\"name\"] = $nickname;\n    $messsageNode = new ProtocolNode(\"presence\", $messageHash, null, \"\");\n    $this->sendNode($messsageNode);\n}\nprotected function DebugPrint($debugMsg)\n{\n    if ($this->_debug)\n    {\n        print($debugMsg);\n    }\n}\npublic function RequestLastSeen($msgid, $to)\n{\n$whatsAppServer = $this->_whatsAppServer;\n\n$queryHash = array();\n$queryHash['xmlns'] = \"jabber:iq:last\";\n$queryNode = new ProtocolNode(\"query\", $queryHash, null, null);\n\n$messageHash = array();\n$messageHash[\"to\"] = $to . \"@\" . $whatsAppServer;\n$messageHash[\"type\"] = \"get\";\n$messageHash[\"id\"] = $msgid;\n$messageHash[\"from\"] = $this->_phoneNumber . \"@\" . $this->_whatsAppServer;\n\n$messsageNode = new ProtocolNode(\"iq\", $messageHash, array($queryNode), \"\");\n$this->sendNode($messsageNode);\n\n}\n```\n}\nIn this class for this $wa->Message($msgid, trim('965'.$receiver) , $body); i have pass this much of parameter \n. how to download this code \n. Thanks brother ........ \n. yes we know my skype id is gulameabbas.bandibar \n. ",
    "curious33": "Hello. I really need your help. i have the phone number and the IMEI of the phone, how i can enter the whatsapp address and read the messages without being noticed? how do i log in? with my phone or laptop? sorry for all this questions, i don\u00b4t understand how it works, that\u00b4s wha i need your help. thanks :-)\n. ok, i am sorry.\n\n-------- Original-Nachricht --------\n\u00a0Datum: Fri, 25 Jan 2013 13:21:26 -0800\n\u00a0Von: Max Kovaljov notifications@github.com\n\u00a0An: venomous0x/WhatsAPI WhatsAPI@noreply.github.com\n\u00a0CC: curious33 iil@gmx.at\n\u00a0Betreff: Re: [WhatsAPI] Any hope to start listening again someone else\\'s Whatsapp messages? (#245)\n\u00a0&#xA\n. \n",
    "eksato": "Only message wrong password. The old accounts are working normally.\n. ",
    "mofakfree": "up\n.   const WHATSAPP_TOKEN = 'Od52pFozHNWF9XbTN5lrqDtnsiZGL2G3l9yw1GiQ21a31a2d9dbdc9a8ce324ef2df918064fd26e30a'; // Token used in request/registration code.\n    const WHATSAPP_USER_AGENT = 'WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002'; // User agent used in request/registration code.\nI think there is an update for TOKEN \nHow can I get TOKEN  to other devices .......\n. i change WHATSAPP_VER and WHATSAPP_USER_AGENT  To  2.10.491 \nand return  this error \n [status] => fail\n    [reason] => bad_token\n. @alpha14789632\nIT'S WORKING NOW. THANK YOU (;\n. @shirioko  \nI used  Device/GalaxyS3 token  .. it's ok \nbut Device/WP  It still gives me the bad_token error \n. @pastoso  thank you very much \nbut new function not work \nAlso The error appears\n \"  [status] => fail\n    [reason] => bad_token\"\n. @pastoso I try with this number 966550883606 \n Also you edit a previous amendment   \"  'token' => urlencode($token), \" \nbut  Still the same error appears . \n[reason] => bad_token)\nCan you send the message from you ? for test \n. iT'S OK NOW (;\nThe problem was for a few minutes  in WhatsApp server \n. send about 10 MSG only   (: \nThen it becomes  Block\n. @jesussales \ndo you use  this \n$identity = 'e807f1fcf82d132f9bb018ca6738a19f';\nor \n$identity = urlencode(sha1(strrev($username . $salt), true));\n. @ExAn1mus \nWhat is the token and WHATSAPP_agent  you are using  when send msg?\ni  Try  registering new number use WART\nbut sent 10 or 20 msg only .....\n. @faisalcse \nwelcome faisal \ntry this \n$msgs = $this->wa->GetMessages();\n```\n    foreach ($msgs as $m) {\n        if ($m->getTag() == \"message\") {\n            $myString= $m->getAttribute('from');\n        $num = explode(\"@\", $myString);\n        $ret_value.= ':::'.$num[0].':::';\n        $ret_value.=  $m->getAttribute('notify').':::';\n\n        $aa =$m->getChildren();\n\n        foreach ($aa as $c) {\n            if ($c->getTag() == \"body\")\n            {\n                $ret_value.= $c->getData().'@@@';\n            }\n        }\n    }\n}\necho $ret_value;\n\n```\n. i use handshake type  now \nit's ok now\n.  // Send a pong to the whatsapp server. I'm alive! \nuse sendPong() function \n. ",
    "rrmotta": "Hi everybody!\nDoes anyone know a number that is more precise than those in this thread?\nI am working on my graduation and this information is very important to me!\nPlease help me!\n. ",
    "styl3R": "this api is old and deprecated @david1988 , you musst use this api and yowsup to create and auth a account :)\n. ",
    "picaporte": "It's the same with me.\nBlock number in the last three days :(\n. ",
    "CODeRUS": "maybe try to use message_typing?\n. @shirioko @Dynogic can you check Yowsup code?\nhttps://github.com/CODeRUS/yowsup/blob/master/src/Yowsup/Auth/mechanisms/wauth.py\ni see nextChallenge already implemented here.\n. well. seems exact same code already implemented in Yowsup long time ago :)\n. okay i see now, this is added functionality:\nhttps://github.com/venomous0x/WhatsAPI/blob/cefc05ceda6c85fbf99dae867328ddf83d32a743/src/php/whatsprot.class.php#L1304\n. @shirioko can you show sample of $array ?\n. UA, DEHASH and LONGHASH are assigned by WhatsApp?\n. data from https://github.com/venomous0x/WhatsAPI/issues/423#issuecomment-21319982 valid?\nmy current Yowsup build using\nUA: \"WhatsApp/2.10.750 Android/4.2.1 Device/GalaxyS3\"\nLONGHASH: \"30820332308202f0a00302010202044c2536a4300b06072a8648ce3804030500307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e301e170d3130303632353233303731365a170d3434303231353233303731365a307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e308201b83082012c06072a8648ce3804013082011f02818100fd7f53811d75122952df4a9c2eece4e7f611b7523cef4400c31e3f80b6512669455d402251fb593d8d58fabfc5f5ba30f6cb9b556cd7813b801d346ff26660b76b9950a5a49f9fe8047b1022c24fbba9d7feb7c61bf83b57e7c6a8a6150f04fb83f6d3c51ec3023554135a169132f675f3ae2b61d72aeff22203199dd14801c70215009760508f15230bccb292b982a2eb840bf0581cf502818100f7e1a085d69b3ddecbbcab5c36b857b97994afbbfa3aea82f9574c0b3d0782675159578ebad4594fe67107108180b449167123e84c281613b7cf09328cc8a6e13c167a8b547c8d28e0a3ae1e2bb3a675916ea37f0bfa213562f1fb627a01243bcca4f1bea8519089a883dfe15ae59f06928b665e807b552564014c3bfecf492a0381850002818100d1198b4b81687bcf246d41a8a725f0a989a51bce326e84c828e1f556648bd71da487054d6de70fff4b49432b6862aa48fc2a93161b2c15a2ff5e671672dfb576e9d12aaff7369b9a99d04fb29d2bbbb2a503ee41b1ff37887064f41fe2805609063500a8e547349282d15981cdb58a08bede51dd7e9867295b3dfb45ffc6b259300b06072a8648ce3804030500032f00302c021400a602a7477acf841077237be090df436582ca2f0214350ce0268d07e71e55774ab4eacd4d071cd1efad\"\nDEXHASH: \"022e923a364bfacff3a80de3f950b1e0\"\nand it seems to work for some users, and not work for some others.\n. i have success\nand i have no logs from others =)\n. @Dynogic okay\ncan you show me code  for v.whatsapp.net/v2/register ?\nsome users getting code, but failed on activation account.\n. @Dynogic exactly. =)\n. btw, random identity in regrequest? not same constant?\n. shouldn't we use same identity for coderequest and regrequest??\n. btw, @Dynogic any luck in creating clean code avoiding blocking?\n. @Dynogic can i see your researches? i will try to implement it to Yowsup and test. Mail me please at coderusinbox@gmail.com\n. @mgp25 can you explain $country format in identity code?\n. ah. means it actually just cc + phone, thanks.\nwill test this algo in C++ soon (just for fun yet)\n. @mgp25 in your https://mgp25.com/wa/http_requests.txt there is sim_mcc and sim_mnc, but it was just mnc and mcc params for ages. was it changed?\n. @mgp25 i sent you email about no_routes issue, please check it asap.\n. lolwhat, mwahahahaha!\n. ",
    "spnvcn": "Today I try to send 2000 messages to 2000 diferents numers whit sleep(2) and whatsapp block my number when i send 150 messages. I will try to continue sending with another number. Somepeople know how can I capture The error in real time?\n. @Timespace7 I don't verify if all numbers are users of whatsapp. In The next test i Will verify\n. ",
    "Akuka": "I have a hypothesis why this happens,\nI did not check it, but if you think about it there is some sense ...\nwhatsapp have access to the contact list on the mobile device on which the client is installed.\nThey know how many people you have contact list.\nOnce we use this API, we do not consider it, as it were our contacts list is empty - is suspicious. How it makes sense to send so many messages and we do not have any contact list?\nI do not know how to verify this, but if anyone can, check it.\n. @jfuentesc its happens with yowsup too.. (https://github.com/tgalal/yowsup/issues/63)\nsomeone now how its possible to sniff or spy on the information transfered between new clients and whatsapi?\ni think all the data transfered with ssl... so how its possible to listen it?\n. Apparently no one has managed to find a solution...\nOr... Someone found a solution and shares with us??\nI really need this problem solved ... I am willing to contribute phone numbers for whatsapp account to check..  if anyone thinks it will help him\n. i got the whatsapp client source code from the apk file..\nBut it's a bit messy and hard to read ... (Probably run something mess up the code ..)\nIf anyone thinks it might help him find the solution, I can send him the source ...\n. ",
    "pliao": "@kingk110 you made some progress?\n. @Letux I try it .\nsend 10 messages\nsleep(600) \n re-register (with WhatsAPI or yowsup?)\nsend 10 messages\nbut my number is still blocked !!!\nyou made some progress?\n. I call login the second time.\nbut the second message still cannot send.\nWarning: socket_read() [function.socket-read]: unable to read from socket [10060]: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. in \\PHP\\WhatsAPI-master\\src\\php\\whatsprot.class.php on line 265\n. thank you ,i test it and working now~\n. The new MissVenom is working now?\nthrow:\nSet your DNS address on your phone to 192.168.1.xxx (Settings->WiFi->Static IP->DNS)\nAn attempt was made to load a program with an incorrect format. (Exception from HRESULT: 0x8007000B)\nStarted DNS proxy...\n. PC:win7 64bit\nphone:sangxing i9220\n. MissVenom-alpha.exe is working now,\nI try to compile as x86 version and run, but I got the same exception.\nAnyway , I can use your alpha version to get password, thank you for your help .\nWe are look forward to your version 1.2\n. ",
    "Chicooz": "I think the problem is because the system connects, sends one message, disconnects then again does the same thing until it get blocked, if there is a method we can have queue of messages and numbers and they are sent in 1 connection like in interactive mode i think block will be avoided \n. ",
    "waldekwg": "I tested it yesterday and today using a loop with different sleep settings (30-600s) and also with typing status and I was blocked in both cases after 8 messages. The text was same in each message\n. ",
    "0xA7291": "ehm, the checksum is handled very simple: hash of mobile number+abc.\nexample:\nnumber = \"49123456789\";\nmd5 checksum = (number + \"abc\");\nso\nhttp://www.whatsapp.com/payments/cksum_pay.php?phone=49123456789&cksum=254c93800636d400c83c39614a5052f7\nhope it helps you.\n. @abbas224252 i don't get it :p \nThis way you can purchase one year of WhatsApp service for 1$ not register your number.\n. ",
    "hakermoll": "how can i generate a md5 checksum for a specific mobile number so as to get its payment url\n. ",
    "facine": "$wa->Message([phone number]-[group id], \"message\");\n. I have implemented it here: https://github.com/facine/WhatsAPI/commit/268af777975817c21660f73f0ca135153bf14388\nRegards\n. WhatsAPI have full support for new registration system: https://github.com/venomous0x/WhatsAPI/pull/267\n. https://github.com/venomous0x/WhatsAPI/issues/281#issuecomment-13897402\n. I dont know if this help you: https://github.com/tgalal/wazapp\nIs for N9...\n. What is the problem?\nIs the same that in yowsup!\nhttps://github.com/tgalal/yowsup/blob/master/src/Yowsup/Registration/v2/existsrequest.py#L32\nRegards\n. ",
    "enraiser": "how to get group ID.\n. ",
    "pmuralikrishna111": "tx  <chatstate to=\"919XXXXXXXXX-XXXXXXXXXX@g.us\">\ntx    <composing></composing>\ntx  </chatstate>\ntx  <chatstate to=\"919XXXXXXXXX-XXXXXXXXXX@g.us\">\ntx    <paused></paused>\ntx  </chatstate>\ntx  <message to=\"919XXXXXXXXX-XXXXXXXXXX@g.us\" type=\"text\" id=\"message-1405232016-2\" t=\"1405232016\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"murali\"></notify>\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\ntx    <body>Hello</body>\ntx  </message>\nrx  < from=\"919XXXXXXXXX-XXXXXXXXXX@g.us\" id=\"message-1405232016-2\" class=\"message\" error=\"401\"></>\nError : 401\nI used $w->sendMessage(\"919XXXXXXXXX-XXXXXXXXXX\",\"Hello\");\n. I have masked the numbers\n. :P I have forgot to hide that too :)\nI am planning to send a message to group.\n$w->sendMessage(\"mynumber-groupid\",\"Hello\");\nIs this correct??? if not how would i send a message to group. I have posted the debug log.\n. How will it identify whether it's group id or mobile number? \n. Failed just by giving groupid\n. sendMessage() is sending type=\"text\" in #278 it showed as \"chat\"\nBecause of this is it not sending?\n. Yes i am having the latest one.\n. Now its working. Automatically it started working. Thanks for help :)\n. I have question, sorry if it was already answered in any of issue.\nDo we need to sync contacts everytime when we connect to WhatApp. or only once is fine?\nI have saw a comment mentioned as before sending message send a sync request? is it a good idea to sync everytime when sending a message?\n. I understood sync once and do it as incremental with mode delta. I am correct?\n. Thank you \n. May I know which one should be enhanced..\n. ",
    "AoX04": "trying to debug i used \necho $w->accountInfo(); \nafter the login, and got the message:\nNo information available. now im 100% sure the problem is in the login. \n. ",
    "mofbar": "Wohoo.. Thank you.\n. #394 \n. Thank your very much. \n. And again. Thank you very much\n. Listen Mode : \n```\nif ($_SERVER['argv'][1] == \"-l\") {\n    echo \"\\n[] Listen mode:\\n\";\n    while (TRUE) {\n        $wa->PollMessages();\n        $data = $wa->GetMessages();\n    foreach ($data as $m)\n    {\n        $content = $m->NodeString(\"\");\n\n        $newstr = preg_replace('/[^a-z0-9\\<\\>\\\"\\=\\ \\n\\-\\.\\:\\!\\@\\#\\?\\/]/i', '', $content);\n        $newstr1 = preg_replace('/(<media[^>]*>)(.*?)(<\\/media>)/is','$1w$3',$newstr);\n        $strfix = preg_replace_callback('@\\<body(.*?)\\>(.*?)\\<\\/body\\>@mis','_handle_match', $newstr1);\n        $strfix1 = preg_replace_callback('@\\<offline(.*?)\\>(.*?)\\<\\/offline\\>@mis','_handle_match_offline', $strfix);\n        $strfix_last = preg_replace_callback('@\\<notify xmlns=\"urn:xmpp:whatsapp\" name=\"(.*?)\\/notify\\>@mis','_handle_match_nick', $strfix1);\n\n        $xml = new SimpleXMLElement($strfix_last);          \n        $msgid = $xml->attributes()->id;\n        $author = $xml->attributes()->author;           \n        $msgtext = $xml->body;\n        $msgtype = $xml->attributes()->type;\n        $group = $xml->attributes()->from;\n        $requesttype = $xml->media;\n        $x_id = $xml->x->id;\n        $is_offline = $xml->offline;\n\n        if (!empty($msgid) && !empty($msgtext) && !empty($group) && $msgtype = 'chat' && $requesttype != \"w\" && empty($is_offline)) {               \n            $receivename = $xml->notify->attributes()->name;\n\n            $file = 'blacklist.txt';\n            $searchfor = substr($author,0,-15);\n\n            $contents = file_get_contents($file);\n            $pattern = preg_quote($searchfor, '/');\n            $pattern = \"/^.*$pattern.*\\$/m\";\n            if(preg_match_all($pattern, $contents, $matches)){\n               //do nothing\n            }\n            else {\n                $thelink1 = \"http://192.168.1.111/whatsoos/groupchat/starter.php?msgid=\" . $msgid . \"&phone=\" . substr($author,0,-15)  . \"&message=\" . urlencode($msgtext) . \"&groupid=\" . urlencode($group) . \"&name=\" . urlencode($receivename);\n\n                // Get cURL resource\n                $curl = curl_init();\n                // Set some options - we are passing in a useragent too here\n                curl_setopt_array($curl, array(\n                    CURLOPT_RETURNTRANSFER => 1,\n                    CURLOPT_URL => $thelink1,\n                    CURLOPT_USERAGENT => 'WhatsApp_GW'\n                ));\n                // Send the request & save response to $resp\n                $resp = curl_exec($curl);\n                // Close request to clear up some resources\n                curl_close($curl);\n\n                $xml_setting = GetSettings($group);\n\n                $array = explode(\"|\", $xml_setting);\n                $active = $array[0];\n                $timer = $array[1];\n                $question = $array[2];\n                $answer = $array[3];\n                $issend = $array[4];\n                $restart = $array[5];\n                $loopf = $array[6];\n                $blindsend = $array[7];\n                $bonustime = $array[8];\n                $nowsendit = $array[9];\n                $forcesend = $array[10];\n\n                if (!empty($resp) && strpos($group,'-') && empty($nowsendit) || $forcesend == '1') {\n                    $wa->sendMessage($group, $resp);\n\n                    $msgtoprint = \"** Sending ID : \" . $msgid . \" -> From : \" . substr($author,0,-15) . \" -> Group : \" . $group . \" -> Message : [\" . $resp . \"]\";\n                    sleep(1);                       \n                }\n            }\n        } else if (!empty($msgid) && !empty($group) && $msgtype = 'chat' && !empty($x_id) && strpos($group,'-')) {          \n            // receive notification\n            if (trim($msgid) == trim($x_id)) {\n                WriteXML($group, \"nowsendit\", \"\");\n            }\n        }\n    } // End Foreach <----------------\n\n    $thelink2 = \"http://192.168.1.111/whatsoos/groupchat/looper.php\";\n\n    $curl2 = curl_init();\n    curl_setopt_array($curl2, array(\n        CURLOPT_RETURNTRANSFER => 1,\n        CURLOPT_URL => $thelink2,\n        CURLOPT_USERAGENT => 'WhatsApp_GW'\n    ));\n    $resp2 = curl_exec($curl2);\n    curl_close($curl2);\n\n    if (!empty($resp2)) {\n        echo \"\\n\".date(\"d/m/Y h:i:s a\", time()).\" -> ENTER ---> \".$resp2.\"\\n\";\n        if (substr($resp2,0,11) == \"leave_group\") {\n            $array = explode(\"|\", $resp2);\n            $thecountsum = count($array);\n            if ($thecountsum >= 1) {\n                $wa->SendEndGroupChat($array[1]);\n                $wa->SendLeaveGroups($array[1]);\n                echo \"\\nLeaving Group : \" . $array[1] . \"\\n\";\n            }\n        } else if (substr($resp2,0,14) == \"get_group_user\") {\n            $array = explode(\"|\", $resp2);\n            $thecountsum = count($array);\n            if ($thecountsum >= 1) {\n                $wa->eventManager()->bind(\"onGetGroupParticipant\", \"onGroupParticipant\");\n                $wa->SendGetParticipants($array[1]);\n                echo \"\\nGet Group Participant : \" . $array[1] . \"\\n\";\n            }\n        } else if (substr($resp2,0,14) == \"get_group_list\") {\n            $array = explode(\"|\", $resp2);\n            $thecountsum = count($array);\n            if ($thecountsum >= 1) {\n                $wa->eventManager()->bind(\"onGetGroupList\", \"onGroupList\");\n                $wa->SendGetGroups();\n                echo \"\\nGet Listing Group Now!!\\n\";\n            }\n        } else {\n            $array = explode(\"|\", $resp2);              \n            $thecountsum = intval(count($array) / 2);\n\n            if ($thecountsum >= 1) {\n                $i = 0;\n                do {                \n                    $group_glo = $array[$i + $i];\n                    $returnTxt1 = $array[($i + $i) + 1];\n                    $returnTxt1 = trim($returnTxt1);\n                    if (!empty($group_glo) && !empty($returnTxt1) && strpos($group_glo,'-') && strpos($group_glo,'g.us')) {\n                        $xml_setting = GetSettings($group_glo);\n                        $array = explode(\"|\", $xml_setting);\n                        $active = $array[0];\n                        $timer = $array[1];\n                        $question = $array[2];\n                        $answer = $array[3];\n                        $issend = $array[4];\n                        $restart = $array[5];\n                        $loopf = $array[6];\n                        $blindsend = $array[7];\n                        $bonustime = $array[8];\n                        $nowsendit = $array[9];\n                        $forcesend = $array[10];\n\n                        if (empty($nowsendit) && strpos($group_glo,'-') || $forcesend == '1') {\n                            $wa->sendMessage($group_glo, $returnTxt1);\n\n                            $msgtoprint = \"** Sending to Group : \" . $group_glo . \" -> Message : [\" . $returnTxt1 . \"]\";\n\n                            WriteXML($group_glo, \"nowsendit\", \"1\");\n                            WriteXML($group_glo, \"forcesend\", \"\");\n                            sleep(1);\n                        }                           \n                    }\n                    ++$i;\n                } while ($i < $thecountsum);\n            }\n        }\n    }\n\n    sleep(3);\n}\nexit(0);\n\n}\n```\n. When adding to 'number' group, this error occurs.\n-- DEBUG --\nrx  <notification from=\"601258xxxxx-1405874734@g.us\" id=\"759298336\" participant=\"601258xxxxx@s.whatsapp.net\" type=\"subject\" t=\"1405874734\" notify=\"myNickname\">\nrx    <body event=\"add\">Test Group</body>\nrx  </notification>\n. ",
    "lukas14231": "oh ok, is there any other way to get into an android whatsapp account?\nis it still possible to get into iphone whatsapp accounts?\n. ",
    "Buxxx": "@shirioko Sorry for these 2 stupid questions, but I'd like to undertand a bit more before starting to test.\n1) If i ask for a new password with yowsup, it's logical that my phone's account will be blocked until new registration, right?\n2) If I connect my phone to my WIFI LAN, is possibile to retrieve my password looking at the packet sent/received by the phone... whatsapp has to authenticate (so to send password) in some ways to its server.\nThanks in advance\nNick\n. ",
    "Letux": "@kingk110 May be you must sending with sleep(10) to not be seen by spam-filter? (I'm not saying that you are a spammer).\n1000 messages for 1 hour looks suspicious for their spamdetector systems.\nHow did you change your password? \n. @shirioko do you mean:\n1. get password by yowsup.\n2. send 20 messages\n3. re-register (with WhatsAPI or yowsup?)\n4. send 20 messages?\n. ",
    "yiplappang": "Thanks Shirioko,\nTo request a password using yowsup, yowsup looks like simulate a registering process and receive a SMS with password.\ndoes it need to be a new number or also work for existing whatsapp user? \nThanks.\n. ",
    "emyjawad": "Hi, I'm using phone numbers, full JID is not working, and the interval is 3 seconds. yes, all of them valid phone numbers with whatsapp account.\n$w = new WhatsProt(\"99999999999\",\"dfsdfsdfsdfsdfdsfsdfsdfdsfdsfsdf=\", \"emyWhatsapp\", true);\n    $w->Connect();\n    # Now Login function sends Nickname and (Available) Presence\n    $w->Login();\n    # Implemented out queue messages and auto msgid\n$w->Message(\"999999999999\", \"hi\");\nsleep(3);\n. this is working for test messages\n$w->Message(\"999999999999\", \"hi\");\nthis is not working!!\n$w->Message(\"999999999999@s.whatsapp.net\", \"hi\");\n. and WhatsAPI already fix the JID for you!! so for sure it will not work if I add the @s.whatsapp.net, because it will be duplcated\n$messageHash[\"to\"] = $to . \"@\" . $this->_whatsAppServer;\n. this when send to phone number\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  ?\u000fA??\u2020P\u0006??\u00eb????P\u0019=&#\ntx  ?\u0007?w?6\u0016\u0019?D?P{?1a-M$?`\u00aeY\u00e9lM??E?y\u0017???h?\u0006*???R-\nrx  \\?l??\u0017\b???1?^K\u2020\u00e7 ??\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    10\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  ???\u00a4?&\u201c\u00b5@es??\u00019??\u00e2W?\ntx  s\u201e?\u001az\u2122\u00ac\u2022\u0001G\u00e7}t?3??\\?\u2013??#?\u201c?c\u00f7EE\\\u00a4-?K6[\u0017???}Q9\nrx  ?t\u00eb\u00bbr}X????\u00eb?E=1?\u00f7+J\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    11\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u00d7?E]\u00acMO??A?y\u000fO\u00ac\u00d7?\u000f#?\ntx  ?C\u2013?\u0007\u00b5Suo[\u2014?\u2026W\\???O??GH\\\u201a?\u0010\u000e\u00a7??E47?\u000b?-\u0006JO_M?r\nrx  XWcX\u0013?f??J\u007fr??>I?8<#\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    12\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u00bb??)n+w?\u2026\u00a9]??\u00a7?jW?\u00e7\u0017\ntx  ?&?%N\u00a7?O\u0015->?/ J~??R|b??Z\u001b?\u0007\u00a7]???U\u2039s?\nCPw?\u2021?%?\nrx  87\u00f4\u00e2\u203a\u00a6\fr\u00b5x?OO\u007fH\u0014j??\u00fc\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    13\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  W\u0018\u0001\u2018clh?ER?\u001bt??E\u00a4\u00e9??\ntx  X???\u2013\u203a\u00b7G??F\u20ac?78???\u00fc??S/W\u0011?\u00a6?0?r???\u2021F?fw\u00b0?\u00b4?\u0017?\nrx  6\u00f7^\u00b1s\u00bb\u00bbv??*\u2026?9]\u0014??\u00ab\u00ad\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    14\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  .?E{V6(__W=Q?}Z??\u2019\u00ee?\ntx  ?|\u00abK?\u00ac\u2018-{-\u00e7?\u2020\u0019r?\u2020jd??\u00f4??\u000f$?\u00e7\u00a4Y,?\u2018\u00f4\u2026/?f3?\u00d7M\u000f\u00ab\nrx  ?l?\u000bD?A?C\u2026z?\u00b6\u0014x\u00eb?P\u00183\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    15\ntx  \nand this when send to JID\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u0017?\u00b0?E\"?c0Eg?lU\u00b5\u00a2??C&\ntx  \u0152\u2020@?($(?\u00d7?\u00ebJb\u00bc\u00b3?\u0015C?j?\u00ef\u0014\u001aA:]\u00e7\u20acQ\u2030\u00a3\u00b0??\u00bb\u00ea+x\u2021\u2020\u0192\u001e?O\nrx  \f????,?gc-??\u00f77G\u00a6Y\u201e\u0006\u0019\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    10\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u00e8\" v\u00ebrE\u0013\u00b0\u00ee\u007fd7\u001f'\u00ac\u2019??\u201c\ntx  \u00e0\nHE\u0013A?\u20ac??\u00a6G!Y~:\u201d??Jde\u0013c?!E?\u00b9\u00af\u2030?\u00b66?m\u00a4?\u201cI-?a\u0018\nrx  \u00fbP\u00ae\u00eb\u20ac\u00e0[z???USJ\u2122S<\u00d7\u00e2\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    11\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  R'\nXX?\u0014?\u00f9?)_\u201e\u0015\u00fcg!??\ntx  T\u0012?\u2026k\u00188@1\u00fb?S\u0005?\u203a\u2013FA\u2018\u001bA?\f??\u0019\u00b5\u000e(?\u2026\u00afg\u00bd\n?\u00eb??\u2022H4\u2014O\nrx  ?\b[Y?$?\\\u0018<\u2020\u00ea192oA??\u001f\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    12\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  ?\u00a2\u0152\u00e8\b?\n\\ F\u2030?E\u00b3/&F\u00bd=J\ntx  \u00a5GQT??V?\u00b7?k3-q1[\u201eg\u2013E\u2021 ?C\u2020EA \u201e \u00f9?!}\u0010?C0??\u000f?\u007f\nrx  DUc\u2022\u001a?[p?\u00d7\u001fA?SE\u2122\u00ea!A=\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    13\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u2021o\u00aeIh??\u00b6??,N\u00e9?\u2019JG_\u00bd \ntx  Qi8E \u00ee\u2013??Qs\u0012?\u201c\u0010x\u0192)\u201c?\u0019\u0019\u00b6?\u201aE?9\u0153A?}c\u00a2? \u00fc\u2014   +\u00e9E\u00afC\u00be\nrx  OV\nnp\u00fb \nI??IL?kH\u00106?-\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    14\ntx  \ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  \u00e8\u0012C\u0153\u00a8?\u007fU\u2019Z?\u00bbT`\bb\u007f??\u00ab\ntx  CjyQ?&?4\u000e    6 \u00b2M\u00e2\u00e0?c\u000b?\u00a4\u20266\u0012\u00b0MA\u007f?{%\u203a\u00069\u001d??\u00d7??\u00a3s@)!\nrx  7I\u201dY+\u00e8GvG\u00f4x\u0012?b\u2020\u00eaH}6?\ntx  \ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    15\ntx  \n. Thank you\n. ",
    "BearTi": "How do I have to use this function? \nDo I need to login first or  can I just send this request without my real whatzapp account/number?\n. ",
    "kingofcracking": "you can do a chroot of ubuntu in ur android and then install php in the arm ubuntu and run whatsapi from there ;)\n. miss venom is better\n. haha\n. \n. using ur fork:\n. \n. #!/usr/bin/php\n<?php\nrequire '../src/php/whatsprot.class.php';\nfunction fgets_u($pStdn)\n{\n    $pArr = array($pStdn);\n```\nif (false === ($num_changed_streams = stream_select($pArr, $write = NULL, $except = NULL, 0))) {\n    print(\"\\$ 001 Socket Error : UNABLE TO WATCH STDIN.\\n\");\nreturn FALSE;\n\n} elseif ($num_changed_streams > 0) {\n    return trim(fgets($pStdn, 1024));\n}\n```\n}\n$number = \"9613203620\";\n$pass = \"mypass\";\n$imei = md5(\"derp\");\nif ($argc < 2) {\n    echo \"USAGE: \".$_SERVER['argv'][0].\" [-l] [-s  ] [-i ] [-set ]\\n\";\n    echo \"\\tphone: full number including country code, without '+' or '00'\\n\";\n    echo \"\\t-s: send message\\n\";\n    echo \"\\t-l: listen for new messages\\n\";\n    echo \"\\t-i: interactive conversation with \\n\";\n    echo \"\\t-set: Set Status to \\n\";\n    exit(1);\n}\n$dst=$_SERVER['argv'][2];\n$msg = \"\";\nfor ($i=3; $i<$argc; $i++) {\n    $msg .= $_SERVER['argv'][$i].\" \";\n}\n$w = new WhatsProt($number, $imei, \"WhatsApi\", true);\n$w->Connect();\n$w->LoginWithPassword($pass);\nif ($_SERVER['argv'][1] == \"-i\") {\n    echo \"\\n[] Interactive conversation with $dst:\\n\";\n    stream_set_timeout(STDIN,1);\n    while (TRUE) {\n        $wa->PollMessages();\n        $buff = $wa->GetMessages();\n        if (!empty($buff)) {\n            print_r($buff);\n        }\n        $line = fgets_u(STDIN);\n        if ($line != \"\") {\n            if (strrchr($line, \" \")) {\n                // needs PHP >= 5.3.0\n                $command = trim(strstr($line, ' ', TRUE));\n            } else {\n                $command = $line;\n            }\n            switch ($command) {\n                case \"/query\":\n                    $dst = trim(strstr($line, ' ', FALSE));\n                    echo \"[] Interactive conversation with $dst:\\n\";\n                    break;\n                case \"/accountinfo\":\n                    echo \"[] Account Info: \";\n                    $wa->accountInfo();\n                    break;\n                case \"/lastseen\":\n                    echo \"[] Request last seen $dst: \";\n                    $wa->RequestLastSeen(time().\"-1\", \"$dst\");\n                    break;\n                default:\n                    echo \"[] Send message to $dst: $line\\n\";\n                    $wa->Message(time().\"-1\", $dst , $line);\n                    break;\n            }\n        }\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-l\") {\n    echo \"\\n[] Listen mode:\\n\";\n    while (TRUE) {\n        $wa->PollMessages();\n        $data = $wa->GetMessages();\n        if(!empty($data)) print_r($data);\n        sleep(1);\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-set\") {\n    echo \"\\n[] Setting status:\\n\";\n    $wa->sendStatusUpdate(1,$_SERVER['argv'][2]);\n    exit(0);\n}\necho \"\\n[] Request last seen $dst: \";\n$wa->RequestLastSeen(time().\"-1\", $dst);\necho \"\\n[] Send message to $dst: $msg\\n\";\n$wa->Message(time().\"-1\", $dst , $msg);\necho \"\\n\";\n?>\n. and this is whatsapp.php file\n. pff sry i am really not into it this time:P\n. why?\n. I am logging in but then I am getting A LOT of errors!\nThe files i am using:\nkhallas.php\nwhatsprot.class.php (from ur fork, shirioko)\n. khallas.php\n!/usr/bin/php\n<?php\nrequire 'whatsprot.class.php';\nfunction fgets_u($pStdn)\n{\n    $pArr = array($pStdn);\n```\nif (false === ($num_changed_streams = stream_select($pArr, $write = NULL, $except = NULL, 0))) {\n    print(\"\\$ 001 Socket Error : UNABLE TO WATCH STDIN.\\n\");\nreturn FALSE;\n\n} elseif ($num_changed_streams > 0) {\n    return trim(fgets($pStdn, 1024));\n}\n```\n}\n$nickname=\"Test\";\n$number = \"9613203620\";\n$pass = \"thepass\";\n$imei = md5(\"derp\");\nif ($argc < 2) {\n    echo \"USAGE: \".$_SERVER['argv'][0].\" [-l] [-s  ] [-i ] [-set ]\\n\";\n    echo \"\\tphone: full number including country code, without '+' or '00'\\n\";\n    echo \"\\t-s: send message\\n\";\n    echo \"\\t-l: listen for new messages\\n\";\n    echo \"\\t-i: interactive conversation with \\n\";\n    echo \"\\t-set: Set Status to \\n\";\n    exit(1);\n}\n$dst=$_SERVER['argv'][2];\n$msg = \"\";\nfor ($i=3; $i<$argc; $i++) {\n    $msg .= $_SERVER['argv'][$i].\" \";\n}\necho \"[] Logging in as '$nickname' ($number)\\n\";\n$wa = new WhatsProt($number, $imei, $nickname, TRUE);\n$wa->Connect();\n$wa->LoginWithPassword($pass);\nif ($_SERVER['argv'][1] == \"-i\") {\n    echo \"\\n[] Interactive conversation with $dst:\\n\";\n    stream_set_timeout(STDIN,1);\n    while (TRUE) {\n        $wa->PollMessages();\n        $buff = $wa->GetMessages();\n        if (!empty($buff)) {\n            print_r($buff);\n        }\n        $line = fgets_u(STDIN);\n        if ($line != \"\") {\n            if (strrchr($line, \" \")) {\n                // needs PHP >= 5.3.0\n                $command = trim(strstr($line, ' ', TRUE));\n            } else {\n                $command = $line;\n            }\n            switch ($command) {\n                case \"/query\":\n                    $dst = trim(strstr($line, ' ', FALSE));\n                    echo \"[] Interactive conversation with $dst:\\n\";\n                    break;\n                case \"/accountinfo\":\n                    echo \"[] Account Info: \";\n                    $wa->accountInfo();\n                    break;\n                case \"/lastseen\":\n                    echo \"[] Request last seen $dst: \";\n                    $wa->RequestLastSeen(time().\"-1\", \"$dst\");\n                    break;\n                default:\n                    echo \"[] Send message to $dst: $line\\n\";\n                    $wa->Message(time().\"-1\", $dst , $line);\n                    break;\n            }\n        }\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-l\") {\n    echo \"\\n[] Listen mode:\\n\";\n    while (TRUE) {\n        $wa->PollMessages();\n        $data = $wa->GetMessages();\n        if(!empty($data)) print_r($data);\n        sleep(1);\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-set\") {\n    echo \"\\n[] Setting status:\\n\";\n    $wa->sendStatusUpdate(1,$_SERVER['argv'][2]);\n    exit(0);\n}\necho \"\\n[] Request last seen $dst: \";\n$wa->RequestLastSeen(time().\"-1\", $dst);\necho \"\\n[] Send message to $dst: $msg\\n\";\n$wa->Message(time().\"-1\", $dst , $msg);\necho \"\\n\";\n?>\n. Terminal:\nLast login: Sun May 12 12:47:03 on ttys000\napple-2:~ Apple$ cd /Users/Apple/Desktop/WhatsAPI-master/src/php\napple-2:php Apple$ php khallas.php\nUSAGE: khallas.php [-l] [-s  ] [-i ] [-set ]\n    phone: full number including country code, without '+' or '00'\n    -s: send message\n    -l: listen for new messages\n    -i: interactive conversation with \n    -set: Set Status to \napple-2:php Apple$ php khallas.php -i 96171613321\n[] Logging in as 'Test' (9613203620)\ntx  stream:features\ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx  /stream:features\nrx  ????z???Rn?o?????\ntx  t0NubQ)??*?JLJ?i\u05a8\u0506???#3?~4??F????2?j?B?K?\nrx  ?}FK?>??N?A~??@?)\ntx  \n[] Interactive conversation with 96171613321:\nrx  \nrx  \nrx    \nrx  \nrx  \nrx    \nrx    \nrx    Wai man\nrx    \nrx  \ntx  \ntx    \ntx  \nArray\n(\n    [0] => ProtocolNode Object\n        (\n            [_tag] => message\n            [_attributeHash] => Array\n                (\n                    [from] => 9613203620@s.whatsapp.net\n                    [id] => 1368350976-4\n                    [type] => chat\n                    [t] => 1368351756\n                    [retry] => 2\n                )\n```\n        [_children] => Array\n            (\n                [0] => ProtocolNode Object\n                    (\n                        [_tag] => received\n                        [_attributeHash] => Array\n                            (\n                                [xmlns] => urn:xmpp:receipts\n                            )\n                    [_children] => \n                    [_data] => \n                )\n\n        )\n\n    [_data] => \n)\n\n[1] => ProtocolNode Object\n    (\n        [_tag] => message\n        [_attributeHash] => Array\n            (\n                [from] => 96170171027@s.whatsapp.net\n                [id] => 1367487143-301\n                [type] => chat\n                [t] => 1368352127\n            )\n    [_children] => Array\n        (\n            [0] => ProtocolNode Object\n                (\n                    [_tag] => notify\n                    [_attributeHash] => Array\n                        (\n                            [xmlns] => urn:xmpp:whatsapp\n                            [name] => Kevin C\n                        )\n\n                    [_children] => \n                    [_data] => \n                )\n\n            [1] => ProtocolNode Object\n                (\n                    [_tag] => request\n                    [_attributeHash] => Array\n                        (\n                            [xmlns] => urn:xmpp:receipts\n                        )\n\n                    [_children] => \n                    [_data] => \n                )\n\n            [2] => ProtocolNode Object\n                (\n                    [_tag] => body\n                    [_attributeHash] => Array\n                        (\n                        )\n\n                    [_children] => \n                    [_data] => Wai man\n                )\n\n            [3] => ProtocolNode Object\n                (\n                    [_tag] => offline\n                    [_attributeHash] => Array\n                        (\n                        )\n\n                    [_children] => \n                    [_data] => \n                )\n\n        )\n\n    [_data] => \n)\n\n```\n)\nrx  \nrx    \nrx  \nrx  \nhello bro\n[] Send message to 96171613321: hello bro\ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    96171613321\ntx  \nrx  \nrx    \nrx      1368352238-1\nrx      \nrx    \nrx  \nrx  \nrx    \nrx      \nrx    \nrx  \nArray\n(\n    [0] => ProtocolNode Object\n        (\n            [_tag] => message\n            [_attributeHash] => Array\n                (\n                    [from] => 1368352238-1@g.us\n                    [id] => 1368352238-1\n                    [type] => chat\n                    [t] => 1368352238\n                )\n```\n        [_children] => Array\n            (\n                [0] => ProtocolNode Object\n                    (\n                        [_tag] => x\n                        [_attributeHash] => Array\n                            (\n                                [xmlns] => jabber:x:event\n                                [count] => 0\n                            )\n                    [_children] => Array\n                        (\n                            [0] => ProtocolNode Object\n                                (\n                                    [_tag] => id\n                                    [_attributeHash] => Array\n                                        (\n                                        )\n\n                                    [_children] => \n                                    [_data] => 1368352238-1\n                                )\n\n                            [1] => ProtocolNode Object\n                                (\n                                    [_tag] => server\n                                    [_attributeHash] => Array\n                                        (\n                                        )\n\n                                    [_children] => \n                                    [_data] => \n                                )\n\n                        )\n\n                    [_data] => \n                )\n\n        )\n\n    [_data] => \n)\n\n[1] => ProtocolNode Object\n    (\n        [_tag] => message\n        [_attributeHash] => Array\n            (\n                [from] => 1368352238-1@g.us\n                [id] => 1368352238-1\n                [type] => error\n                [t] => 1368352238\n            )\n    [_children] => Array\n        (\n            [0] => ProtocolNode Object\n                (\n                    [_tag] => error\n                    [_attributeHash] => Array\n                        (\n                            [code] => 401\n                            [type] => auth\n                        )\n\n                    [_children] => Array\n                        (\n                            [0] => ProtocolNode Object\n                                (\n                                    [_tag] => not-authorized\n                                    [_attributeHash] => Array\n                                        (\n                                            [xmlns] => urn:ietf:params:xml:ns:xmpp-stanzas\n                                        )\n\n                                    [_children] => \n                                    [_data] => \n                                )\n\n                        )\n\n                    [_data] => \n                )\n\n        )\n\n    [_data] => \n)\n\n```\n)\npff I am getting bored of that! I think the error is there:\n[from] => 1368352238-1@g.us\n                    [id] => 1368352238-1\n                    [type] => error\n                    [t] => 1368352238\nhow to finally solve this problem?\nDear shirioko, can you send me a new khallas.php?!\n. Or is the error i  whatsprot.class.php (yours!)\n. The command I wrote is:\napple-2:php Apple$ php khallas.php -i 96171613321\nAnd 96171613321 is a number not a grp jid\nAnd I sware i dont know from where this jid come: 1368352238-1@g.us (i only belong to one grp and its jid is  smthg else!)\nHelp please!\n. please answer shirioko\n. In whatsapp yes; in whatsapi no... i think the problem is a bug in the node function or in message function... can u send me by email a fresh whatsapi with custom password compatibility? \n. Okay and with whatsapi the only thing I change is calling loginwithpassword($password) instead of login?\n. Using whatsapi i downloaded from the link, and only changing Login to LoginWithPassword($pass), with the command : php whatsapp.php -i 96171613321 (my friend)\ni am getting the same error:\n[from] => 1368352238-1@g.us\n[id] => 1368352238-1\n[type] => error\n[t] => 1368352238\nWTF\n. even when setting status:\n. \n. pff i abandoned and used yowsup instead\n. DOS attack NOW !!!!!!!!!!!\n. hahah no joking but what they are doing is really unfair and I'm sure they used one of github's api! \n. best website for spammers... fu**\n. but u have to admit that the website features are nice :p \n. Hahahah \"We love Whatsapp!\" it seems u don't\n. Ok sry bro :p\n. \n. LOL \n. i have a question to @WebWhatsApp :P... how did u find this issue? ;)\n. \n\nhahahha joking\n. @jonnywilliamson who told joking was stupid?:p \"A joke is a very serious thing\"(Churchill)\n@WebWhatsApp If i want to be serious I liked ur service and if u need help I can join ur project ...\nBtw shirioko is right u should do a login system\n@shirioko I understand ur point of view but anw u can block webwhatsapp number so it isnt valuable for spammers...\n. Ok lets stop this comment war that you started :p \n. ",
    "arontunzi": "If it can help, when I hard code something like that i get $responce->status = \"created\".\n$response = $this->getResponse('https://v.whatsapp.net/v2/exist?cc=41&in=79xxxxxx&udid=35xxxxxxxxxx');\n. ",
    "sricoder": "JSON Response contains id as one of the attributes. Could it be replacement for pw attribute?\n. ",
    "gkrishnan": "@sricoder no, \nid does refer to pw, but in the above example stated by @arontunzi it is only udid, which is like imei for iPhone\n. ",
    "EcoEcoEco": "Hi All, please @arontunzi  did you find the solution, if yes please share it with us.\nThanks.\n. ",
    "CarlosCondor": "same for here. \nnews?\n. ",
    "NeoGeneration": "I've successfully sent a message by using commenting some lines and harcoding the password:\n```\n    / $this->_accountinfo = (array) $this->checkCredentials();\n    if ($this->_accountinfo['status'] == 'ok') {\n        $this->_password = $this->_accountinfo['pw'];\n    } /\n$this->_password = 'xxxxxxxxxxxx';\n\n```\nSo theres something wrong i guess in the check credentials?\n. Is this API actually working 100%? I'm finding problems everywhere... :S\n. Hahaha is not about being like that, I'm just curious, I'm making some tests and things fails, just because of that... whats the actual status? I saw you commenting practically everywhere..\n. ",
    "IreneLing": "@shirioko Sorry I'm new here and have a question...I used $w->requestCode to get a code for my number,then I received a sms,and I registered it.I send message to my brother and friends but after about 20 messages,then I unable to send anymore,and require to request for a code again.So I repeat the steps again...after 20 messages...again..but sometimes I will not receive any sms from whatsapp and unable to register,and have to wait for several hours to request for a new code again. Is there any different to request a password from yowsup and request a code through whatsappAPI? Both need to request new code after send several messages?\nThanks.\n. @shirioko Known issue?Sounds like it's the way should be,in this case I will have to deal with it.Just curious if I miss anything related to registration before this.Thank you so much.\n. ",
    "adlerweb": "First: This did not stick to PHPs strict standards and was altered in shiriokos repo - see #371 \nThere is still a problem with this code: The API sends an receive-ack not only for messages but also for all other receive-acks. This does not happen only when you send messages to yourself (causing your loop) but also in \"normal\" chats:\nxml\ntx  <message to=\"###123@s.whatsapp.net\" type=\"chat\" id=\"##713-2\" t=\"1371634713\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"###\"></notify>\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\ntx    <body>test</body>\ntx  </message>\n[...]\nrx  <message from=\"###123@s.whatsapp.net\" id=\"##713-2\" type=\"chat\" t=\"1371634719\">\nrx    <received xmlns=\"urn:xmpp:receipts\"></received>\nrx  </message>\ntx  <message to=\"###123@s.whatsapp.net\" type=\"chat\" id=\"##713-2\" t=\"1371634720\">\ntx    <received xmlns=\"urn:xmpp:receipts\"></received>\ntx  </message>\nI dont think this is how these blocks are supposed to be used. So for the todo-list: Write a patch so we dont answer received-messages with received-messages.\n. It does not:\n\nPHP Strict standards:  Only variables should be passed by reference in /home/whatsapi/WhatsAPI/src/php/whatsprot.class.php on line 355\nPHP Stack trace:\nPHP   1. {main}() /home/whatsapi/WhatsAPI/src/php/mailproxy/proxy.php:0\nPHP   2. WhatsProt->PollMessages() /home/whatsapi/WhatsAPI/src/php/mailproxy/proxy.php:51\nPHP   3. WhatsProt->processInboundData() /home/whatsapi/WhatsAPI/src/php/whatsprot.class.php:650\n\nAnyhow, just a thing for general code-cleanup, this has no impact on functionality\n. on it, just testing this time before uploading broken code...\n. ",
    "ardianys": "same here\n. Previously it's generate error like this : \nPHP Fatal error:  Call to a member function getTag() on a non-object in ~/whatsapp/php/src/whatsprot.class.php on line 2171\n. same with here https://github.com/venomous0x/WhatsAPI/pull/700\n. although my patch same with https://github.com/venomous0x/WhatsAPI/pull/700 \nbut my patch using recent code\n. I guest you also include connection and authentication time,\nI'm using whatsapi and I send / get messages just in seconds.\nYou should keep connection to whatsapp server live.\n. I pull message from wa server one by one. And give some delay (2 seconds) after pollMessage(). I have run this on my prod server for some days. And everything is ok.\n. @vibhoo yes, the account status will be set to 'online'\n. just simple loop like this\n``` php\n            $wa = new WhatsProt($sender, $imei, $nickname, $debug);\n        $wa->connect();\n        $wa->loginWithPassword($password);\n    while (TRUE) {\n      $wa->pollMessage();\n      echo '.';\n      sleep(2);\n    }\n\n```\n. You should not sending image to user in script that they execute, ( in function that handle form request)\nBut You can put this image request in queue. Than you can modify the script : \n``` php\nwhile (TRUE) {\n          $wa->pollMessage();\n          echo '.';\n          $queue = get one from queues\n          $wa->sendMessageImage($queue->to, $queue->filepath)\n      sleep(2);\n    }\n\n```\nYou should keep it live, You also make server busy if every 10 / 20 s you continuously sign in. You can stop it, make it offline, for example after some hours if there are no activities.\nYou also should give it some delay.\n. To get group name, you should listen when you added to group participants.\nCurrently I'm working to complete this line \nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/whatsprot.class.php#L2363\nphp\n                case \"subject\":\n                    // rx  <notification from=\"6285643077444-1407815451@g.us\" id=\"894086480\" participant=\"6285643077444@s.whatsapp.net\" type=\"subject\" t=\"1407815452\" notify=\"Admin display name\">\n                    // rx    <body>group name</body>\n                    // rx  </notification>\n                    //TODO\n                    break;\n. Of course, the source code is not yet finished. You should complete it first.\n. Actually whatsapi already have function to get group subject,\nBut whatsapp change their format\nPreviously the code to fire this event is like this\nphp\n            if ($node->getAttribute('type') == \"subject\") {\n                print_r($node);\n                $reset_from = explode('@', $node->getAttribute('from'));\n                $reset_author = explode('@',$node->getAttribute('author'));\n                $this->eventManager()->fireGetGroupsSubject(\n                    $this->phoneNumber,\n                    reset($reset_from),\n                    $node->getAttribute('t'),\n                    reset($reset_author),\n                    reset($reset_author),\n                    $node->getChild(0)->getAttribute('name'),\n                    $node->getChild(2)->getData()\n                );\n            }\nI'll try to move it on new place to make it work.\nI'm sure @shirioko already made a lot of work on this.\n. You can see the diff from my pull https://github.com/venomous0x/WhatsAPI/pull/879\nAnd you can listen when the group name change with \nphp\n  function onGetGroupsSubject($phone, $gId, $time, $author, $participant, $name, $subject){\n    echo $phone.', '.$gId.', '.$time.', '.$author.', '.$participant.', '.$name.', '.$subject;\n  }\n. You just have to enable debugging in WhatsProt constructor. I just modifiying what already exist here. I'm not an expert.\nMaybe it's because php itself, compared with python and .net\nPreviously I tried yowsup, but they are using old auth that don't have contact sync feature.\n. :+1:\n. No, it's not. I also give reply message to my user if they send images to me. My web has ran some days.\n. @shirioko what do you think about this ? I use this feature on my project. Would be nice if my solution merged. thanks.\n. if you want to use it on your PC, it'll need internet connection\n. ok\n. you have to define this code inside Class definition. also you have to initialize it in some variable\n. please provide full code\n. and the code you're using this class\n. I think you can use it like this\nphp\n$variable->onMessage($mynumber, $from, $id, $type, $time, $name, $body);\n. ",
    "wdevpromo": "i also! have you solved?\n. I've tried with your user agent and token, but the response is the same... (status: created)\n. ",
    "m7mdcc": "same problem here , also i make the change on file same problem ..\n. ",
    "KristerMD": "I cant run too after changes to run the api with an existing account, after changes i get :\n{\"status\":\"fail\",\"reason\":\"incorrect\",\"sms_length\":6,\"voice_length\":6}\n. ",
    "snowdev": "Hi, thank's for your answer! Yeah i found out something similar. I started programming a Client in C#, but now i stack on the login. I already implemented a Dialog, which let's WhatsApp send a SMS code and then complete the authentication by sending this code back and then receiving a password.\nNow i've got all needed data to connect to the WhatsApp service. I then start a new connection to s.whatsapp.net (port: 5222). But now i have no clue what i need to send in order to login. Maybe you can give me a hint?\n. Hehe :) Thank's for the link! I want to make it from ground up, so i don't want to copy & paste everything from there, but it helps me a lot, to understand the different progresses (login, auth,...)\nThanks!\n. ",
    "bugnix": "@shirioko \nI have a working XAMPP Version (with curl and openssl enabled) installed on windows.\nWhen i call \"http://localhost/WhatsAPI-master/src/php/contactsync.php?phone=YourPhonenumber&pass=YourBase64Password&u[]=number1&u[]=number2 etc.\" in my browser, i get\nthe following error:\nError: Received unknown response: HTTP/1.1 100 Continue Server: Yaws 1.94 Allow: GET, POST, OPTIONS, HEAD Content-Length: 0 HTTP/1.1 401 Unauthorized Server: Yaws 1.94 Date: Thu, 06 Jun 2013 18:15:08 GMT Allow: GET, POST, OPTIONS, HEAD Content-Length: 37 Content-Type: text/json ; charset=utf-8 : {\"message\":\"missing_password_record\"}\nCan you please tell me whats wrong?\n. Sure :D\n. The username is from my own account on android, the password is generated with php code \"base64_encode(md5(strrev('Android IMEI')))\".\n. Think thats the problem :D\nThanks for your very fast help :+1: \n. ",
    "Jagral": "Hii,\nI am Zakaria Jagral,\nI want to make 1 Window Application in C# and in that I want to Fetch Data from Social Networking Websites(Facebook, Twitter) on Number search.But our requirement is that after Putting Number in Textbox and if I click on search button on My Form  I want Facebook Login should open in Background and required Data should be fetched in Winform\nCan anyone help Plz?\n. ",
    "ammmmm": "how I can use it\n. ",
    "mohtaqi1": "http://r.whatsapp.net/v1/exist.php?cc=966&in=504823907&udid=588daa668c7a5f488268582c3f4f9bd6\n. ",
    "ahmadabudawod": "Thanks for your response below is the code & result of execution.\nphp\n\n<p/*\n- @file\n- Show the use of different types of messaging.\n  /\nRequire the class.\nrequire_once('whatsprot.class.php');\n/*\n- Config data.\n- WhatsApp now changes your password everytime you use this.\n- Do not worry, WhatsAPI saves it for you every time.\n  /\n  $userPhone        = '962?????????';       # Telephone number including the country code without '+' or '00'.\n  $userIdentity     = '??:??:??:??:??:??'; # This is tipically the IMEI number.\n                                       # If you are using an iOS device you should input your WLAN MAC address.\n  $userName         = 'Ahmad Abudawod';          # This is the username displayed by WhatsApp clients.\n$destinationPhone = '9665????????';       # Destination telephone number including the country code without '+' or '00'.\n                                         # For groups: [phone number]-[group id].\n$debug = TRUE;\nCreate a instance of WhastPort.\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\nHow to create an account ONLY if you do not have a associated to our phone number.\nYou can test your credentials with: $w->checkCredentials();\nprint_R($w->checkCredentials());\n/\n- First request a registration code from WhatsApp.\n  \n- @param $method\n-   Accepts only 'sms' or 'voice' as a value.\n- @param $countryCody\n-   ISO Country Code, 2 Digit.\n- @param $langCode\n-   ISO 639-1 Language Code: two-letter codes.\n  \n- @return object\n-   An object with server response.\n-   - status: Status of the request (sent/fail).\n-   - reason: Reason of the status (e.g. too_recent/missing_param/bad_param).\n-   - length: Registration code lenght.\n-   - method: Used method.\n-   - retry_after: Waiting time before requesting a new code.\n  */\n  //$w->requestCode('sms', 'SA', 'en');\n/\n- Second register account on WhatsApp using the provided code with $w->requestCode('sms', 'ES', 'es');.\n  \n- @param integer $code\n-   Numeric code value provided on requestCode().\n  \n- @return object\n-   An object with server response.\n-   - status: Account status.\n-   - login: Phone number with country code.\n-   - pw: Account password.\n-   - type: Type of account.\n-   - expiration: Expiration date in UNIX TimeStamp.\n-   - kind: Kind of account.\n-   - price: Formated price of account.\n-   - cost: Decimal amount of account.\n-   - currency: Currency price of account.\n-   - price_expiration: Price expiration in UNIX TimeStamp.\n  */\n  //$w->registerCode('100184');\nConnect to WhatsApp servers.\necho 'start connect';\n$w->Connect();\necho 'end connect';\necho 'Start login';\nNow Login function sends Nickname and (Available) Presence.\n$w->Login();\necho 'End login';\nSend messages:\n/\n- Send a text message to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $txt\n-   The text message.\n  /\n  $w->Message($destinationPhone, 'Ahmad hi!');\n/\n- Send a image to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $file\n-   The url/uri to the image.\n  /\n  //$w->MessageImage($destinationPhone, 'http://example.com/photo.jpg');\n/\n- Send a video to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $file\n-   The url/uri to the MP4 video.\n  /\n  //$w->MessageVideo($destinationPhone, 'http://example.com/video.mp4');\n/\n- Send a audio to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $file\n-   The url/uri to the 3GP audio.\n  /\n  //$w->MessageAudio($destinationPhone, 'http://example.com/audio.3gp');\n/*\n- Send a vCard to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $name\n-   The contact name.\n- @param $vCard\n-   The contact vCard to send.\n  /\n  /\n  require 'vCard.php';\n$v = new vCard();\n$image = file_get_contents('http://example.com/photo.jpg');\n$v->set('data', array(\n    'first_name' => 'John',\n    'last_name' => 'Doe',\n    'cell_tel' => '34666554433',\n    'photo' => base64_encode($image),\n));\n$w->vCard($destinationPhone, 'John Doe', $v->show());\n/\n/\n- Send a location to the user/group.\n  \n- @param $to\n-   The reciepient to send.\n- @param $long\n-   The logitude to send.\n- @param $lat\n-   The latitude to send.\n  */\n  //$w->Location($destinationPhone, '4.948568', '52.352957');\n/*\n- Wait for message delivery notification.\n  /\n  $w->WaitforReceipt();\n/*\n- Or get all incoming messages and process it.\n  /\n  /\n  while (TRUE) {\n  $w->PollMessages();\n  $msgs = $w->GetMessages();\n  foreach ($msgs as $m) {\n      # process inbound messages\n  }\n  }\n  /\nAnd This is the result :-1: \nWarning: WhatsAppEvent::fire(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/WhatsAppEvent.php on line 65\nStrict Standards: Accessing static property WhatsAppEvent::$event_callbacks as non static in /usr/local/zend/apache2/htdocs/whatsapp/WhatsAppEvent.php on line 65\nArray ( [cc] => 962 [in] => ????????? [udid] => ??:??:??:??:??:?? [c] => cookie )\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1289\nNotice: Undefined property: stdClass::$login in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1289\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1290\nNotice: Undefined property: stdClass::$pw in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1290\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1291\nNotice: Undefined property: stdClass::$type in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1291\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1292\nNotice: Undefined property: stdClass::$expiration in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1292\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1293\nNotice: Undefined property: stdClass::$kind in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1293\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1294\nNotice: Undefined property: stdClass::$price in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1294\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1295\nNotice: Undefined property: stdClass::$cost in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1295\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1296\nNotice: Undefined property: stdClass::$currency in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1296\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1297\nNotice: Undefined property: stdClass::$price_expiration in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1297\nstdClass Object ( [status] => created [id] => aFqwV0x+0a51Zh1tbQnwUwxFeuk= [sms_length] => 6 [voice_length] => 6 )\nstart connect\nend connect\nStart login\nArray ( [cc] => 962 [in] => ????????? [udid] =>??:??:??:??:??:?? [c] => cookie )\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1289\nNotice: Undefined property: stdClass::$login in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1289\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1290\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1291\nNotice: Undefined property: stdClass::$type in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1291\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1292\nNotice: Undefined property: stdClass::$expiration in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1292\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1293\nNotice: Undefined property: stdClass::$kind in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1293\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1294\nNotice: Undefined property: stdClass::$price in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1294\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1295\nNotice: Undefined property: stdClass::$cost in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1295\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1296\nNotice: Undefined property: stdClass::$currency in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1296\nWarning: WhatsProt::checkCredentials(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1297\nNotice: Undefined property: stdClass::$price_expiration in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 1297\ntx tx tx tx rx rx rx rx rx \u042e,\u0409$\u0413\u253c\u0411[\u044ep\u0440&\u0435\u0452\ba]\u0437\u2514 tx \u044dx2\u2560\u0019iqpWA\u041c\u00ab;\u042eX\u0010Z\u2584K\u044eJQ_M\u042f\u2550)OFJ\u0423~\u041b9\u0423w+~\u0442\u0443\u001a#\u0401\u0405\u0445 rx rx rx tx\nEnd login\nPrint message hashArray ( [to] => 966????????@s.whatsapp.net [type] => chat [id] => 1366649165-1 [t] => 1366649165 ) tx tx tx tx tx tx tx Abudawod hi! tx\nWarning: socket_read(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 266\nWarning: socket_read(): unable to read from socket [54]: Connection reset by peer in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 266\nWarning: socket_read(): It is not safe to rely on the system's timezone settings. You are required to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected the timezone 'UTC' for now, but please set date.timezone to select your timezone. in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 266\nFatal error: Maximum execution time of 30 seconds exceeded in /usr/local/zend/apache2/htdocs/whatsapp/whatsprot.class.php on line 266\n. Please ,where specifically in EXAMPLES.php or whatsprot.class.php ?? .I follow the example instructions could you determine the line code?\n. I have tested it give me the same problem max execution timeout.\n Why $userIdentity = \"345678907654654\"; isn't like this format for iOS ??:??:??:??:??:??\n. Yes i have used my whatsapp in my iPhone and i print the retured value from login method as below :-\n [status] => created [id] => GW10dja2QPNmGkdQRayxhIzYIbY= [sms_length] => 6 [voice_length] => 6 ) \n. When i uncomment request code send me SMS to my mobile with 6 number and also returned password when i print the value from API\n[status] => ok [login] => 966???????? [pw] => KoeIpWdCcRNrdmjay5fe???????? [type] => existing [expiration] => 4444444444 [kind] => paid [price] => 3.69 SR [cost] => 3.69 [currency] => SAR [price_expiration] => 1369447691\n. Is there any need to call the below methods?\n1- checkCredentials\n2- requestCode\n3-registerCode\n. Many ,Many ,Many thanks for your efforts .It is working \n. I have get a work around for this problem , if you want to solve it please follow the below steps:-\n1- Download WhatsApp for new Mobile number in your iPhone or any smart device.\n2- Request code from your mobile number may be it will get you message  that SMS message will take 20 hour ,therefore you can use Voice call and may be it will take 5 minutes.\n3. After you get this registration code , you should set this value in your code for RegistrationCode method without need to call for RequestCode and print the response which include the password .\n4.Now you can send messages through this API\n. ",
    "wendlandfernando": "Where can I found the contact sync v2 files? Is there any example of how to use it?. ",
    "ramonv": "So how do i get the pw, right now i do (and this is working)\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$b=$w->registerCode('123456');  //code which i got when registering\n$w->Connect();\n$w->LoginWithPassword($b->pw);\n$w->Message($destinationPhone, 'bla bla bla');\n$w->PollMessages();\n. the thing is.. the password is changing everytime, so when i first get $b->pw and hardcode it in my code, like \n$wa->LoginWithPassword('DptDFhoXBP5pYZRL2dnTFZddU9M=');\ni get (when sending message):\nrx  <failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\nrx    <not-authorized></not-authorized>\nrx  </failure>\nSo how do i get the pw (besides activating it everytime with registerCode)?\n. ah now i see, i was still calling registerCode all the time... :) ( so the pw kept changing)\nAny thoughts how long this pw will survive? (cause in the source i read ' WhatsApp now changes your password everytime you use this' )\nand this is a dedicated number and simcard, in a very old nokia c1 just to receive the activation sms.\n. if i understand it correctly:\nWe 'think' the pw shouldn't change if you have a dedicated number (not used on a phone), because you're not updating any app or phone.\nIf not, i'll guess i have to log alle the xml and see if there's any w:pw:set there and act upon it:)\n. We are planning to use your php in production (sending customers their orderconfirmation.. maybe with an image attached.. still trying to debug that, but somehow my test recipient numbers do not receive anymore messages today, lets find out tomorrow).\nSo we'll be logging a lot of messages, so lets see if we find something 'like' pwreset.. ;)\n. yep. after about 400 numbers:\n{ [\"status\"]=> string(4) \"fail\" [\"reason\"]=> string(7) \"blocked\" } \n. We used a blank number / whatsapp account. And tested with clients ordering at our website. We've sent each client 1 plain message and 1 image , after 12 hours we noticed the block.\nTime between the requests vary from 1-5 seconds to a few hours. (we've sent the messages realtime when payment was processed)\nJust to keep it clear, we're not sending spam, but are trying to find different ways of reaching our clients.\n. Nice one \u263a\nI need to get a new test number and let you know.\nWe also try to see what happens with the block on our current number in a few days. Maybe they\u2019ll release the block\u2026\n. confirmed, tried three different simcards.. no luck.... \n. lol, so let's say we have 1 old smartphone and 30 simcards.. \nyou'll say its just a thing of replace SIMcard, get activation code, add activationcode to php class... \nreplace simcard, etc.. \ndoes this really work? on the same IMEI?\nSo this would mean IMEI isn't used until you'll register it with the received activationcode?\nSo we still can 'make' IMEI's ourself in the phpclass.\n. nice work guys!!! followed it the last few days..\nNext stop: reverse engineer the algorithm so we can keep updating useragents ;) \nAnyhow, really nice job done!\n. see: https://github.com/venomous0x/WhatsAPI/issues/337\n. website and the service is around for a while, we tried to contact them a few weeks ago to see what kinda api they use and if we could buy it. But haven't heard a thing. \n. ",
    "yah0o2010": ".gitignore\n. ",
    "atulrungta": "WhatsApp is a f**k.... It blocked my number while I was sending same messages to my whatsapp contacts from my phone.. I sent max 23 times nd got blocked..\nusing my phone..\n. I was sending message from my phone using official whatsapp client.. but i got blocked.. I was sending message regularly max 4-5 sec interval..\njust using forwarding functionality in whatsapp client..\n. Hello Abhimanyu.. Did you get any solution for same?\n. ",
    "RodrigoRVieira": "What was the delay between them?\n. Official client got banned? That's new for me...\n. How exactly are you sending the messages? What is the delay between them? Are you syncing the contacts?\n. Sadly nobody knows for sure how to avoid being blocked... You could try what was suggested a few times:\n1. Login\n2. Sync contacts\n3. Send Typing\n4. Send Paused\n5. Send Message\n6. Pool Messages\n. Got it! Thank you\nTwo more questions... what exactly this synchronization process does? What triggers synchronization in the official client?\n. Thank you\n. mgp25,\nIt's not working my friend...\n. ",
    "PrimalPowder": "seems not related to platform? i tried iPhone no luck as well.\nSo iphone, wp7 and HTC one X are all failed...\n. ",
    "aissayaine": "Hello I need a solution to the program wart\nIt does not work\nIs there a solution\n. So Wright\nAnd I think you found the solution\nBut I do not understand how the application\nI ask you to explain\nOr send me a program that worksplease \nLe Mardi 11 novembre 2014 16h45, mgp25 <notifications@github.com> a \u00e9crit :\nThis is WhatsAPI repo, not WART repo. Check the my mail in my profile page and i introduce you to the whole project and where you will find everything.Regards\u2014\nReply to this email directly or view it on GitHub. \n. ",
    "JayFoxRox": "I don't have any smartphone but would like to have a look at the most recent WP7 WhatsApp DLLs.\nCould you reupload them please? - Including the native one?\n. I haven't worked with WP7 native DLLs yet. I'm new to Dis# because I can't remember what I used back in 2011 to disassemble the WP client.\nHowever, it's confusing because the IMisc interface from the native DLL does not seem to match the function order from the .NET dll.\nStarting at .data:0007A284 are seven function pointers (followed by the GUID for IMisc: \"53a4a6b2-424d-4198-887b-9e8d68fca9c2\"). I believe them to be this:\n1.      sub_15AB0\n2.      sub_15158\n3.      sub_155D0\n4.      sub_1531C\n5.      000151D4 IMisc_GetString_\n6.      sub_15268\n7.      000151C4 IMisc_Exit_\nThe first row is rank, sorted by actual function address. Shown order is order in function pointer table.\nDisassembled using Dis#:\n[Guid(\"53a4a6b2-424d-4198-887b-9e8d68fca9c2\")]\n[ComVisible(true)]\npublic interface IMisc {\n    string DumpLog();\n    void Exit(uint code);\n    CELL_INFO GetCellInfo();\n    uint GetHr([MarshalAs(UnmanagedType.Interface)] object hackObj);\n    void GetPowerStatus([MarshalAs(UnmanagedType.Struct)] ref CEPowerStatus out, bool bypassCache);\n    string GetString(int idx);\n    IByteBuffer GetToken(IByteBuffer prefix, IByteBuffer fuzz);\n}\nAs you can see, Exit and GetString are not at the expected positions in the interface (not by address, not by order, not by type - I can't find any system. It seems as if Dis# just sorts the interface alphabeticly [which would be wrong..])\nHowever, I should at least have Exit identified correctly because all the native DLL does is a call to TerminateProcess(0x42, code).\nGetString at 000151D4 is also likely because it accepts values from 0 to 4 as argument and returns a copy from a string-pointer-table string (which, however, seems to contain garbage, *(0x7B59C + idx * 4) would be the actual string pointer I believe).\nsub_1505C is a warning / error print function which passes the string to sub_14F30 which allocates buffers, does printf and then calls OutputDebugStringW.\nIf it was easier to figure out which function is actually GetToken this would be a lot easier.\nIdeas / Thoughts? Who else had a look at the DLLs yet?\nI need this so I can actually create a new account..\n//Edit: Did not know that IDA had support for .NET.\nI matched the functions now:\nGetPowerStatus = 15AB0\nGetHr = 15158\nGetToken = 155D0\nGetCellInfo = 1531C\nGetString = 151D4\nDumpLog = 15268\nExit = 000151C4 \nThis order (which IDA suggests) would confirm my findings for Exit and GetString. So I will continue work on 155D0.\nTo me, it appears that the new token is just a simple hash (using the windows crypto functions) of the phone number.\n. Unfortunaly I don't have any WhatsApp device. I used android-x86 back in November of 2011 when I completed my first WhatsApp hack/client [Back then you were able to send broadcast to the server and only v1 existed, so most of this security is new to me]. In December 2011 / January 2012 WhatsApp then stopped working on android-x86.\nIt appears (to me) the following happens:\nWhatsapp.verify.Registration.RequestCode will combine \"GetBuildHash + number\" (without cc). Then it passes that into GetToken.\nGetToken seems to be a rather thin wrapper around MD5 using PROV_RSA_FULL with CryptAcquireContext function. So far I was able to isolate most crypto imports and now I try to figure out what it actually hashes.\nOnce the token is returned from the native part the .NET part will turn it into a lowercase hexstring - so everything normal.\nIt would be great if anyone could provide me with the BuildHash for the DLL shirioko posted. Also the User-Agent string for a current WP7 WhatsApp would be great. At the moment I use one which I made up: \"WhatsApp/2.9.4 WP7/7.10.8773.98 Device/NOKIA-Lumia_800-H112.1402.2.3\"\n. Thanks :)\n0x1332C seems to be were all the magic happens.\nI was wrong before. This functions seems to return function pointers only. So it should work like this:\ngetPointers(&pArrayFunc1,&pArrayFunc2); wip..\nBefore that GetToken creates the crypto context, afterwards it already passes the data to be hashed to the crypto functions. Then checks the hashlength, allocates memory for the hashvalue, then requests the hashvalue, probably just converts it back to a string, then frees the memory for the hashvalue and returns it.\n(I still need the BuildHash - even if I can generate it myself I would need someone who can confirm it)\n. Thanks, but that doesn't really help - the token is just an MD5 and can't be reversed. I need the BuildHash of the DLL which is some kind of checksum over the PE sections.\nI just extracted the BuildHash function and spend some time looking into Mono. I came up with this:\nExpected BuildHash for WhatsApp.dll (2.9.4.0): 21a31a2d9dbdc9a8ce324ef2df918064fd26e30a\nExpected BuildHash for WhatsAppCommon.dll (2.9.4.0): b32a995213f1dd6006e15818c672b715d5d24828\nYou can find my code to generate these here: http://pastebin.com/hk5F8xsp\nIt's mostly straight from the decompiler. But it had some problems so it might be flawed. Also it's not clean - just gets the job done..\nWhich file was the source for the BuildHash in the past?\n. byte[] unk = {\n      0xBF,0xAB,0x64,0x89,0x7C,0xF6,0xD9,0x12,0xEC,0xED,\n      0xFE,0x72,0x58,9,0xD0,0xF9,0xEE,0x20,0xB1,0x4A,\n      0x39,0x51,0x98,0xC9,0x7F,0x14,0x1B,0xDC,0,0x6D,\n      0xB,0xD1,0x66,0x5D,0x53,0xEB,0xC6,0x86,0x4B,0xA3\n};  // .WAobs:00085B48\nI believe this has to do with the token generation.\nHere is my understanding of the GetToken function so far:\n1. .text:00015640 Aquire a Crypto Context with PROV_RSA_FULL\n2. .text:00015688 CryptCreateHash(provider,CALG_MD5, ...);\n3. .text:000159E4 R1 = Pointer to the array I posted above, R2 = 0x28 (40, probably length of array in bytes, note that the old token prefixes were also 40 bytes [but ASCII / Base64]!)\n4. .text:00015770 CryptHashData the array above\n5. .text:000157F0 CryptHashData what I assume to be BuildHash + number\n6. Token must be complete by now!\n7. .text:00015A30 CryptGetHashParam(hHash, HP_HASHSIZE, ...);\n8. .text:00015844 Allocate necessary memory for the hash\n9. .text:00015890 CryptGetHashParam(hHash, HP_HASHVAL, ...);\n10. Now probably just moves back the data to the .NET arrays\n11. .text:000159B0 releaseCryptoContext and free of hash\n//Edit: My code still does not work though.. Won't do anything unless someone confirms (or atleast tells me I'm wrong) my BuildHash. - I need to know which BuildHash is used in RequestCode.\n. I checked the disassembled code about a hundred times now.\nI'm very sure that what I previously posted is correct. The token above is the new token.\nBut it still doesn't work for me. So I guess either IDA is screwing up, my http request is bad or the BuildHash is not correct..\n[Or WhatsAppNative.dll is buggy because encoding differences in the DLLs - but that is highly unlikely]\n//Edit: Maybe .WAobs is encrypted?! .text:00013970 is called from DllEntryPoint and references the first and last byte from .WAobs =Looks like we are doomed! If you want to figure out the token I'd recommend loading the DLL yourself, then reading it's memory at .WAobs:00085B48 which hopefully is a base64 string at that point.\n. Yes, that would be helpful as I can verify my BuildHash code probably :)\nBut by now I'm pretty sure that .WAobs and maybe some other sections are encrypted or scrambled. They are read+write which is unlikely and even pointers which probably should be strings seem to end up in random data. Also the entire section is full of data with almost no 0xFF or 0x00 bytes.\nIf you have a windows phone you can test this easily though by loading the DLL and reading back its contents in memory.\n. Thanks for helping!\nI don't have .NET 4.0 in my VM, so no ilspy. Dis# fails to disassemble either WhatsApp.dll (WhatsAppCommon.dll works fine) so I can't have a look at the decompiled 2.8.2.0 BuildHash.Create() as it was still in WhatsApp.dll at that point (it's in WhatsAppCommond.dll now [2.9.4.0]).\nI only checked the disassembly with DILE and it looks to be exactly the same in 2.8.2 and 2.9.4.\nJust a SHA1 of the \".rsrc\" section.\nHowever, I'm not able to generate the same hash which is in yowsup using my own tool. One thing I noticed is that mono and windows HashFinal() return different things after calling it multiple times. Calling it more than once will result in different output than calling it the first time [why is that?], but even worse, it's different the second time on each platform too.\nThe first returned value is a proper SHA1 though [tested with known plaintext / hash], so I trust my tool.\nI'm not sure why my BuildHash shouldn't work as I pulled it out of the decompiled code + it executes and parses the PE fine.\n- Maybe the 2.8.2 in yowsup is not 2.8.2.0 but another build?\nI would have loved to throw my own 2.8.2 buildhash at the whatsapp code request but that only checks the user agent and earlys-out with \"old_version\" so it won't verify my token / buildhash.\nTo load the DLL yourself you can have a look at WhatsAppCommon.dll -> WhatsApp.NativeInterfaces which is the DLL loader. It will use RegisterComDll(\"WhatsAppNative.dll\", GUIDs) to register all the interfaces the DLL provides.\nYou should be able to copy the decompiled code if your decompiler is any good.\nIf you want to do any calls you will need the proper IMisc interface etc. though. That can be found at WhatsAppCommon.dll -> WhatsAppNative\nHowever, make sure your decompiler doesn't sort these imports by alphabetical order but by their order which they have in the file. Check one of my previous posts for the proper order of IMisc.\nYou should then be able to call GetToken already. Signature of GetToken is:\nIByteBuffer GetToken(IByteBuffer tokenPrefix, IByteBuffer buildHashNumber)\nI'm not sure how easy it is to debug on a windows phone. But if you have a proper debugger you can probably set a breakpoint in GetToken and jump to the .WAobs section of the WhatsAppNative.dll to check if the token was decrypted. Additionally you can also create a breakpoint at .text:00014C44 which is CryptHashData. At that point R1 is a pointer to bytes which will be hashed, R2 the number of bytes to be hashed.\nCryptHashData will be called twice from GetToken:\n- First time:\n  a) R1 = Pointer to tokenPrefix. R2 = Length of tokenPrefix\n  OR\n  b) If tokenPrefix is null (which WhatsApp currently uses): R1 = Pointer to Array I posted above (or maybe a decrypted form of it, same pointer though), R2 = 0x28 / 40 Bytes (Length of the array above)\n- Second time: R1 = Pointer to buildHashNumber. R2 = Length of buildHashNumber\n. Yeah I noticed that token already in WhatsAppCommon.dll which Dis# had no problems with.\nI also compared the BuildHash functions. There is one subtle difference - a bug in fact..\n- 2.8.2: result.Length = (long)((ulong)BuildHash.Read32(array, 16));\n- 2.9.4: sectionHeader.Length = Math.Min(Read32(bArr, 16), Read32(bArr, 8));\nDecompiler differences aside, what happens is this (Header described at http://msdn.microsoft.com/en-us/library/ms809762.aspx ):\n- 2.8.2: Get SizeOfRawData [Offset 16]\n- 2.9.4: Get  SizeOfRawData [Offset 16] or use VirtualSize [Offset 8] if it is smaller (Meaning not the entire section content will be loaded from file to memory)\nThis explains why my BuildHash tool was not able to get the same hash for 2.8.2\nThis is what my new tool spits out (for the 2.8.2 WhatsApp.dll):\nBuildHash (2.9.4 Algorithm) is 835e38484a0060bdf99eceb38c53d435de6df5a8\nBuildHash (2.8.2 Algorithm) is 889d4f44e479e6c38b4a834c6d8417815f999abe\nThis is what my new tool spits out (for the 2.9.4 WhatsApp.dll):\nBuildHash (2.9.4 Algorithm) is 21a31a2d9dbdc9a8ce324ef2df918064fd26e30a\nBuildHash (2.8.2 Algorithm) is a0338e1d716a8cb4a52835698a3258c8eff9eef9\nIt's kinda safe to assume that 21a31a2d9dbdc9a8ce324ef2df918064fd26e30a is the new BuildHash.\nThe problem is probably still the token prefix from the native dll which might be encrypted.\nI attempted this token in yowsup but it still did not work:\n(\"WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\", \n    \"\\xBF\\xAB\\x64\\x89\\x7C\\xF6\\xD9\\x12\\xEC\\xED\\xFE\\x72\\x58\\x09\\xD0\\xF9\\xEE\\x20\\xB1\\x4A\\x39\\x51\\x98\\xC9\\x7F\\x14\\x1B\\xDC\\x00\\x6D\\x0B\\xD1\\x66\\x5D\\x53\\xEB\\xC6\\x86\\x4B\\xA3\"+\"21a31a2d9dbdc9a8ce324ef2df918064fd26e30a{phone}\"),\nWhat we need is probably the first part / token array - but decrypted.\nIf I had a proper ARM decompiler I would probably work on that - but with desquirr you get a lot of crap for ARM. It was okay for the GetToken function but it won't be enough for the huge function which I assume to be the decryption / descrambler code.\nSimply executing the decryption on a windows phone and reading back the token is way easier.\n//Edit: I looked at the decryption function again - if I have some free time tonight I will try rewriting it in C using some emulation framework I worked on in the past.. That might work here because the function is platform independent\n. Mostly. Yes.\n- S40 probably has a newer version or really doesn't work anymore but server still returns sent for some reason.\n- Right, 2.8.2 WP is known but won't work anymore\n- Right, the token is generated using MD5(tokenPrefix + buildhash + number). TokenPrefix is usually 40 bytes of random data. BuildHash is a checksum of the WhatsApp client (or at least parts of it) and number is just the phonenumber you try to register. The tokenPrefix is known, BuildHash is known and the number is obviously known too. So in theory it should all work.. - but it doesn't.\n  BuildHash was generated using the actual WhatsApp code and verified by recalculating the known 2.8.2 BuildHash. So let's assume that BuildHash and number are known and correct.\n  That only leaves tokenPrefix to be faulty. Upon further inspection of the source while reverse engineering you will find out that the data around tokenPrefix looks like garbage too. Hence the assumption that tokenPrefix is actuallyin an encrypted memory area.\n  I also found a function which looks like it decrypts tokenPrefix. I now wrote a tool to emulate that specific function.\n  It does something (changes it) with the tokenPrefix but it is still wrong. Probably a bug in my (selfmade) emulator.\n- Android was reverse engineered so often in the past that WhatsApp took countermeasures which make the code almost unreadable and harder to decompile. It's easier to work with the WP now.\n- Using an S40 emulator could work - give it a shot? But at the end of the day you still can't say wether it didn't work because of WhatsApp or the faulty emulator if you don't get an SMS / Call..\n. I can't figure out what's wrong.. I know.. it's a mess - but it's just a dirty hack, so don't judge the code please:\nhttp://www.jannikvogel.de/scratchpad/WhatsApp/2.9.4-Token/TokenPrefix/\n- decrypt.c is disassembly from IDA but translated to C code (Took me a couple of hours and I might have screwed up somewhere)\n- arm.h is a tiny emulation layer for flag calculation and memory access\n- WhatsApp_* are the sections from WhatsAppNative.dll where * is the VirtualAddress in hex [loaded by the emulator]\nhttp://www.jannikvogel.de/scratchpad/WhatsApp/2.9.4-Token/BuildHash/\n- hash.cs is just a wrapper around decompiled BuildHash from 2.8.2 and 2.9.4\n- hash.exe also works in mono. Start it with the DLL as argument (\"mono ./hash.exe WhatsApp.dll\"). It will also dump all sections to files called WhatsApp_* for the emulator.\nhttp://www.jannikvogel.de/scratchpad/WhatsApp/2.9.4-Token/\n- code.java is the 2.9.4 RequestCode ported to java. Personally, I use yowsup to test at the moment though as both do exactly the same (unless my one is buggy ;) ).\nIf you want to help you can try checking if my flags in arm.h are generated properly. Also, you can try comparing decrypted.c to disassembly and look for differences or logic flaws / missunderstanding of instructions in my emulation.\nIf you REALLY want to help, run this on an actual device and set a breakpoint at .text:00013CAC. Then tell me what you read back at 0x85B48 (40 bytes) and 0x854B0 (String or DWORD, so a couple of bytes - at least 4).\n. I just noticed this:\n.text:00014E2C sub_14E2C                               ; CODE XREF: DllEntryPoint+20\u0018p\n.text:00014E2C                 MOV     R3, 0xFFFFCFFF\n.text:00014E30                 LDR     R2, [R3,#-0x7AB]\nMaybe IDA also fails to relocate the file properly?\nI highly doubt that this would work on an actual device.\nThe code would do something like this:\nunsigned int r2 = (unsigned int)(-0x37AC);\nAs negative memory addresses don't exist (on ARM), this is probably wrong..\n//Edit: Tried disassembling with different ARM instructions sets now and checked the file headers. No relocation or different instruction at that address. Mysterious.. - I don't get it\n. Are you sure you have the DLL in your app path? Are you allowed to use InteropServices [Manifest exists etc.]?\nAlso, are you running this on an actual phone? 0x800700C1 seems to be BadImageFormatException - this would happen when trying to run ARM code on an x86 system.\nThe code looks fine to me.\n. You are using it wrong. Try this:\nWhatsApp.NativeInterfaces.Initialize();\n  string number = \"*YourNumber*\";\n  string s4 = \"21a31a2d9dbdc9a8ce324ef2df918064fd26e30a\"; \n  ByteBuffer inp = new ByteBuffer();\n  inp.put(Encoding.UTF8.GetBytes(s4 + number));\n  IByteBuffer res = WhatsApp.NativeInterfaces.Misc.GetToken(null as IByteBuffer, inp as IByteBuffer);\n  // Now convert res back to a hex-string or output all bytes\nIt should be the same code whatsapp calculates. Try setting your debugger to native and read back the memory at the address I mentioned above. Then we should be able to register new clients too :)\n. Which array is that? That looks like the token-hash send to WhatsApp. Still not the one we need to calculate it (what I refer to as TokenPrefix).\nI would like to test on your server - but your domain was not reachable for the last days. I thought you were still working on it.\n//Edit: That base64 string appears wrong - the one in memory (tokenPrefix, the array we look for) will already be one - no need to encode that. What you get back from GetToken() is actually the token for your number + buildhash + tokenPrefix (first argument or the one we want to read from the dll - currently ALWAYS the one from the dll as first argument is always null)\n. Used it wrong again ;) You need a hexstring and compare that token to one you get from a phone registration using your actual phone / whatsapp. That verifies that the used function and logic works.\nThis is how you format the output: http://codepad.org/Os7y0dyN\nAs you can see, this token is correct as it matches one in your previous posts.\nSo the native DLL works fine. Time to dump the token from the binary now by setting a breakpoint at the address I mentioned above or reading back the memory directly.\n//Edit-1: This also confirms that my buildHash is correct!\n2.9.4.0 BuildHash is verified to be: \"21a31a2d9dbdc9a8ce324ef2df918064fd26e30a\"\n//Edit-2: The code you just edit-ed in is pretty much the one which I posted before - which you just ran to get the token above your edit ;)\nPS: Might not be too smart to post your phone number online.\n. If the debugger won't do it, I'd probably write my own function to dump the token by modifying the DLL.\nHowever, if your debugger / phone supports debugging native code you can read back the memory.\nI can also do it if your server is online (still offline for me - maybe DNS outdated?).\n. \"EUREKA\"\nI used Yowsup to verify but it should work with most other tools too: Add this in /Common/Http/warequest.py and set the self.uaIndex to this entry:\n(\"WhatsApp/2.9.4 WP7/7.10.8858 Device/HTC-HTC-H0002\",\n\"Od52pFozHNWF9XbTN5lrqDtnsiZGL2G3l9yw1GiQ\"+\"21a31a2d9dbdc9a8ce324ef2df918064fd26e30a{phone}\"),\nI just received my WhatsApp code - Finally!\nCredit where credit is due:\n- Thanks to shirioko who was willing to run my hacked (and private) DLL so we were able to obtain the key!\n  He also wrote the tool to call my hacked DLL which does the actual dumping and provided me with necessary files and information\n- If you commit this to your project please credit me in the commit describtion (best by calling me Jannik Vogel) and shirioko (if he doesn't want this or wants to add anything specific he shall request it now)\n  [If you don't know what we actually did: \"We reverse engineered the BuildHash and Token for WhatsApp 2.9.4.0 for Windows Phones\"]\n\nFor those who are interested in the technical bits of the DLL (Original SHA1: 949e271646ec4d04707d52a3599521b398a82be6):\nChanged code:\n0x4d3c to 28 20 a0 e3 (Set GetToken to always return 40 bytes)\n0x4d44 to 60 11 9f e5 (Set GetToken to always return the tokenPrefix)\nChanged checksum:\n0xd8 to 2B 16 08 00\n. Depends, give me access to the files and I might have a look again\n. I said they probably use a new hash algo. Not entirely sure though.\nThe algorithm is not too complicated either but we would have to dump the constants.\nHere are my findings (Figured out these without Dynogics post above, so partial confirmation about his findings):\n.text:000187D4: IMisc_GetToken\n.text:00014078 getIByteBufferDataPointer_ \n.text:00017B54 printError\n.text:0001B3B4 The new algo which I assume to be a new hash, parameters: getTokenParameter, getTokenParameterLength, outputPointer, outputLengthPointer\n.text:00014354 createIByteBuffer_\n.text:00014040 setIByteBufferDataPointers \nI don't have time to work on WhatsApp at the moment. I'll be back when things get more serious (the other token not working) or in a couple of weeks maybe.\nAt a first glance I didn't see any function imports - so the hash algo is completly made of simple logic. I first assumed it was a cloneByteBuffer.\n. ",
    "ulihecht": "I'm still not sure if I understood what's going on here, so I try to summarize:\n- requesting registration code with S40's user agent and token is currently not possible for unknown reasons. WhatsApp server just answers with \"sent\". Noone confirmed yet, whether it's also not working anymore on a real S40 device (could an S40 emulator help here?)\n- you only know the token for an outdated Windows Phone version of WhatsApp. You cannot register using it, since WhatsApp server will return \"old_version\"\n- now you try to find out the token for the current Windows Phone version of WhatsApp by reverse engineering it\n- Android is no help at all, as it uses a new registration method called \"self\". You don't know anything about that method.\nIs this correct?\n. But everything else is correct?\nWhat do think about the idea to use an S40 emulator?\n. Thanks, JayFoxRox. That clearified everything ;)\n. Congratulations :D Great!!!\nEDIT:\nDo we need to change constant \"resource\" in Yowsup\\Common\\constants.py from \"S40-2.3.53\" to something like \"WP7-2.9.4\"?\n. How could it be possible, that WART is working, but WhatsAPI is not? Do they have any information which you have not?\n. Okay I see - WART is your project, shirioko. I'm sorry. There are lots of issues / forum posts, so I actually don't know, what the current state is - Is registration working or not? In this issue, I see, that WhatsAPI does not work, whereas WART works which confuses me. I'm asking, because lots of people are asking for a registration fix in my Miranda-plugin and I'm trying to fix it as soon as possible :)\n. I'm working on it. I need to check my request-code algorithm. For a number +712345678 it produces \"/MddBpqPfZFANsG0FLdH8MuMy94=\", which is wrong (server returns bad_param/token). Can you tell me the correct token for this imaginary phone number? Then I can test, if my algorithm works correctly without having to send code-requests again and again.\n. Yes, I ported it to C++, and I want to test it. That's why I asked you, what's the expected output of generateRequestToken('Kazakhstan', '712345678');. My output is \"/MddBpqPfZFANsG0FLdH8MuMy94=\" which is wrong according WhatsApp servers's response, and therefore I must have done something wrong in my port. If you can give me another phone-number together with generateRequestToken's return value it would also be sufficient. I just want to fix my C++-version of your generateRequestToken()\n. The algorithm doesn't depend on the user agent, or did I understand something wrong? Thank you!\nEDIT:\numm.. https://github.com/venomous0x/WhatsAPI/commit/1995a68f0e5adad5624a720f2e5a0cd31014fcd3 this is, what I ported, but WaToken.cs seems to have different signature and prefix !? Is the revision which closed this issue not up-to-date anymore?\n. Thank you. My algorithm works correctly now. Now I receive \nstatus: sent, length: 6, method: sms, retry_after: 1805\nbut no SMS. User Agent: WhatsApp/2.11.139 Android/4.2.1 Device/GalaxyS3\n. https://v.whatsapp.net/v2/code?lc=KZ&lg=kk&mcc=401&mnc=008&method=sms&to=712345678&token=QQb0lujFo1ICkCroWT0iJDA+c+w=&cc=7&in=12345678&id={\u00cc\u00f4\u00d3\u0011\u203ap\u00a6\u007f\u0007\u00cb=\u0004$>\u017d\nIs that okay? Of course I replaced the number with an imaginary one...\n. https://v.whatsapp.net/v2/code?lc=KZ&lg=kk&mcc=401&mnc=008&method=sms&to=712345678&token=QQb0lujFo1ICkCroWT0iJDA+c+w=&cc=7&in=12345678&id=d5a11fe204590c01d2b9e5598f58bdf\nstill doesn't work...\n. In your version, the token is url-encoded, and the id is a sha1 hex-string of the reversed number. So this should work:\nhttps://v.whatsapp.net/v2/code?lc=KZ&lg=kk&mcc=401&mnc=008&method=sms&to=712345678&token=QQb0lujFo1ICkCroWT0iJDA%2Bc%2Bw%3D&cc=7&in=12345678&id=a7d579ba76398070eae654c30ff153a4c273272a\nthe problem is, that I cannot test anymore as I have to wait for hours (retry_after - whatever unit that is, seconds? minutes?) and each time I'm doing it wrong again, they multiply retry_after by factor 10 :(\nwhat is the expected server response? Maybe you can tell me the URL WART generates. They should be equal (except order of get-params), as token and id generating algorithms are equal. Since https is used, I cannot use WireShark to intercept WART's http request.\nEDIT: \"What is the expected server response\" is the most important question here ;)\n. Thank you :)\n!!!! EDIT: \"What is the expected server response\" is the most important question here ;) !!!\nEDIT:\nMy URI seems to be correct. I debugged WART and the parameteres are equal. But WART has the same problem. Probably they changed something again :/\n. ",
    "darshanadhia1": "this doesnot work even by changing differnet user agents\nis this api still working?\n. ",
    "anthonymcg22": "What is the most up to date useragent and token?. ",
    "Subhajit321": "WART is not working\n\nPlease help me. not working. shows bad token. please help\n\n. WART is not working. showing OLD Version issue\n\n. WART is not working. OLD Version issue\n\n. \nPlease Help. ",
    "serialboy": "Fatal error:  Maximum execution time of 10 seconds exceeded in C:\\xampp\\htdocs\\WhatsAPI-shirioko\\WhatsAPI-master\\src\\php\\whatsprot.class.php on line 1721.\nwhen i am trying to send video or image it gives me this error!!any help plz\n. ok done thx alot.\n. ",
    "bernabegh": "Hi @shirioko \nIm getting some problems when i try to send an image.\nThis is the debug result and the errors from PHP.\ndo u know some solution ?\n\n. ",
    "Pietertje007": "yes, seen happening even within hours.\n. I did see #337 but have no solution yet...\nWhile playing around, I have a very oldm non-smartphone, phone for receiving SMS and also an old smartphone. I was switchign sim cards when I found an interesting thing. My phone (very old, not a smartphone at all), suddenly received an SMS from my own number. It reads:\nWhatsApp\nJfh65aXoBLABALBLAgKy WhatsApp internal use - safe to discard\nHope that this piece of information helps others....\nNow I am going to have my smartphone send an sms to my old phone and then I will try to register it with the RegosterCode function, skipping the RequestCode function... hope that will work...\n-> then I receive the same SMS (same code also)... looks like WhatsApp has encrypted the pincode that you receive via sms...\n-> adding this code to RegisterCode results in bad_param... so it's probably encrypted. So not be too difficult to break because the codes used to be 6 digits with '-' in the middle. Anyone has an idea about the encryption type they use?\n-> now 10 minutes has passed and my smartphone was still on the whatsapp register screen. So it retried... guess what? Now it sends the pincode in plain tekst.\n. Yes, I use Android. But that magic code does not look like base64 to me.\nAnyhow, after 10 mins. I received the plain text code. So I could call RegisterCode and that worked. HOWEVER... sent messages are not received somehow. I see no failures in my debug. \n. @shirioko, that was the first thing I already had looked at... That should be fine.\nHowever I noticed some new things in my log:\nrx  [ib from=\"s.whatsapp.net\"]\nrx    [offline count=\"0\"][/offline]\nrx  [/ib]\nI don't remeber seeing that before...\n. PollMessages() returns NULL (with var_dump).\nThis is my debug log:\ns.whatsapp.net[br]iPhone-2.8.7-5222\ntx  [stream:features]\ntx    [receipt_acks][/receipt_acks]\ntx  [/stream:features]\ntx  [auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"MYNUMBER\"][/auth]\nrx  [start from=\"s.whatsapp.net\"][/start]\nrx  [stream:features]\nrx    [receipt_acks][/receipt_acks]\nrx  [/stream:features]\nrx  [challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"]XXXXXXXXXXXXXX[/challenge]\ntx  [response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"]YYYYYYYYY[/response]\nrx  [success xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1368025246\" expiration=\"1399561246\"]ZZZZZZZZZZZZZZZZZZZ[/success]\ntx  [presence type=\"available\" name=\"WebWhatsApp.com\"][/presence]\ntx  [message to=\"TONUMBER@s.whatsapp.net\" type=\"chat\" id=\"1368028806-1\" t=\"1368028806\"]\ntx    [x xmlns=\"jabber: x :event\"]\ntx      [server][/server]\ntx    [/x]\ntx    [notify xmlns=\"urn:xmpp:whatsapp\" name=\"WebWhatsApp.com\"][/notify]\ntx    [request xmlns=\"urn:xmpp:receipts\"][/request]\ntx    [body]take some beers from me[/body]\ntx  [/message]\nrx  [presence from=\"s.whatsapp.net\" status=\"dirty\" xmlns=\"w\"][/presence]\nrx  [ib from=\"s.whatsapp.net\"]\nrx    [offline count=\"0\"][/offline]\nrx  [/ib]\nrx  [presence from=\"MYNUMBER@s.whatsapp.net\" type=\"available\"][/presence]\nI replaced all the crazy characters with XXXX, YYYY and ZZZZ stuf and masked my phonenumber. I see nothing strange. Do you?\n. Note the update, I updated my post above with a SendMessage() included in the log.\n. Yes, but the other user does not receive it....\nHowever, it's now about 5 hours later and it works... so somehow it did not work at once. Old messages never received.\nHopefully, this session helps others. Lots of tips now to get it working.\nAnd.... it stopped working again (12 hours later) but with failure \"unauthorized\"... pfff... reason: blocked. again... and so fast... how to prevend blocking?\n. Two methods:\n1) make some php code that sequentially sends all messages to a number\n2) add all numbers to a group and send one message to that group (note the group limit).\nat least, as long as broadcasting has not been added to the source....\n. Yes, now it's working. THANKS\nNow let's see if I now get it working with the new password...\n. Eh, lesson learned was that the user agent was important. So replaying in a browser wont work I assume.\nAnyhow, login seems to work. No errors and everything looks normal in the log. But I do not receive my test message... funny... all seems okay. I will give it some time. At least I do not get 'blocked', lol.... \n. I use my phone and missvenom to activate. Copy the PW and then clear/remove whatsapp from the phone. So its an official client. But registration is not the problem, blocking after several hours is though...\nIt seems totally random to me....\nWhat happens when a receiver blocks a number? Is that blocking fully on the client side or is that sent to whatsapp and something that is handled on whatsapp servers?\n. Wondering if blocking by receivers is causing blocked numbers....  I gave some friends access and they had some fun I believe... I bet some people just blocked it.\nThere is no way that I can detect that someone blocked my number, right? Only the received notification will not get in, but that can have multiple reasons. Right?\n. Interesting..\nProbably you need several people to block you in a limited time period... at least that is how I would implement something like that,\nAnother idea that I had is that sending to numbers that do not have whatsapp causes blocking. Normally you can only send to numbers that have whatsapp. (not sure how this works exactly but probably you send your whole addressbook to whatsapp and get the list of numbers that have whatsapp in return). So for whatsapp it will be easy to check if there are several messages sent to non-whatsapp numbers. You normally cannot do that with an official client. What do you think?\n. Good to know that it has been tested that sending to non-whatsapp numbers does not cause blocking. One possibility less... Leaves me with blocking from receivers (more then one at least). Could it be that whatsapp people are manually checking the messages that where sent before a user blocks it? Maybe we can prove that.... would be interesting news item if whatsapp is reading with you.\ndifferent subject:\nHow can I help with the updated protocol? \n. ",
    "waiting4christmas": "uhm okay... a friend told me when he switched phones that whatsapp automatically showed old messages... but btw, maybe he got confused and its not true... dont know. my intention was to proof this practically.but I believe you :-)\n. ",
    "csinghgithub": "Hi shirioko,\nI have requirement to send message on whatsapp to multiple recipients may be in thousands. \nPlease ans. my following questions?\n1. Can i send text message to multiple recipients? or i have to broadcast that message to multiple recipients as you have written above code snippet of SendBroadcastMessage?\n1. If i have to broadcast a message then is there is any limit in broadcasting message to multiple recipients like 25 0r 30? because we have recipients list in thousands.\n2. I have tried your above code of SendBroadcastMessage but didn't find classes/DLLs at following links:\n   https://dl.dropboxusercontent.com/u/68235039/WhatsAppDLL.zip\n   https://dl.dropboxusercontent.com/u/68235039/funxmpp.cs.txt\n3. Can you provide me latest code and helper DLLs to broadcast message?\nThanks & Regards\nCharanjot Singh\n. May be or may not be. I mean recipient might saved our no. from which we are sending text message. \nNo, he will not be aware of this thing that i am going to send him/her text message.\nActually, what my requirement is: Suppose a user \"XYZ\" has 1000 contacts and he recently create a new campaign and want to share with 1000 contacts. He want to send campaign link with some test message via whatapp, then whatz the procedure to send text message to multiple recipients and is it feasible to send text message to this much contacts using whatapp API?\nWe are able to send message to single user but our requirement is to send message to more than one user may in thousands.\n. Ok i got this that my no. should be saved with the recipient, so that he/she will get my broadcast message.\nAnd if there is limit of broadcasting message then its again ok with me. I will put limit before distributing my campaign that you have to distribute campaign within the limit for whatzapp.\nNow i want code and DDLs of broadcasting code. So that i will implement this functionality. Please share if you have code snippet?\n. HI  shirioko,\nThanks for your reply and help. \nI am already using your existing code which you have referred at this link:  https://github.com/perezdidac/WhatsAPINet\nBut i didn't find any function with this name \"SendBroadcastMessage\" , which is used to send broadcast message?\nAlso, just tell me is it possible to send broadcast message with link \"\" code or not?\nI knew whatsapp has limit to send max to 25 users, but i wana know can i broadcast message to 25 user or not with this link code \"https://github.com/perezdidac/WhatsAPINet\". If yes then which function i have to call becoz i didn't find any broadcast function? or you reamed it?\n. ",
    "kaank": "Hi,\nPlease change this class in whatsappapi.dll \nclass WaToken {\n        public static string GenerateToken(string number) {\n            string s = \"PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1430860548912\" + number;\n            byte[] bytes = Encoding.ASCII.GetBytes(s);\n            byte[] value = MD5.Create().ComputeHash(bytes);\n            return BitConverter.ToString(value).Replace(\"-\", string.Empty).ToLower();\n        }\n        private static List GetFilledList(byte item, int length) {\n            List list = new List();\n            for (int i = 0; i < length; i++) {\n                list.Add(item);\n            }\n            return list;\n        }\n    }\nKaan Karata\u00e7\n. Hi,\nPlease change this class in whatsappapi.dll \nclass WaToken {\n        public static string GenerateToken(string number) {\n            string s = \"PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1430860548912\" + number;\n            byte[] bytes = Encoding.ASCII.GetBytes(s);\n            byte[] value = MD5.Create().ComputeHash(bytes);\n            return BitConverter.ToString(value).Replace(\"-\", string.Empty).ToLower();\n        }\n        private static List GetFilledList(byte item, int length) {\n            List list = new List();\n            for (int i = 0; i < length; i++) {\n                list.Add(item);\n            }\n            return list;\n        }\n    }\nKaan Karata\u00e7\n. Hi,\nPlease change this class in whatsappapi.dll \nclass WaToken {\n        public static string GenerateToken(string number) {\n            string s = \"PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1430860548912\" + number;\n            byte[] bytes = Encoding.ASCII.GetBytes(s);\n            byte[] value = MD5.Create().ComputeHash(bytes);\n            return BitConverter.ToString(value).Replace(\"-\", string.Empty).ToLower();\n        }\n        private static List GetFilledList(byte item, int length) {\n            List list = new List();\n            for (int i = 0; i < length; i++) {\n                list.Add(item);\n            }\n            return list;\n        }\n    }\nKaan Karata\u00e7\n. Hi,\nPlease change this class in whatsappapi.dll \nclass WaToken {\n        public static string GenerateToken(string number) {\n            string s = \"PdA2DJyKoUrwLw1Bg6EIhzh502dF9noR9uFCllGk1430860548912\" + number;\n            byte[] bytes = Encoding.ASCII.GetBytes(s);\n            byte[] value = MD5.Create().ComputeHash(bytes);\n            return BitConverter.ToString(value).Replace(\"-\", string.Empty).ToLower();\n        }\n        private static List GetFilledList(byte item, int length) {\n            List list = new List();\n            for (int i = 0; i < length; i++) {\n                list.Add(item);\n            }\n            return list;\n        }\n    }\nKaan Karata\u00e7\n. Hi,\nDownload latest whatsapp dll , This dll is working on my project.\nhttps://www.dropbox.com/s/5ua1x0gfianweqw/WhatsAppApi.dll?dl=0\nKaan Karata\u00e7\n. ",
    "WebWhatsApp": "Interesting dicussion...\nWho is really helping spammers?\n1) The people distributing source code, so that anyone who is able to write a for loop can do a spamrun.\n2) WebWhatsApp.com that offers a service to people that is closely monitored for spam abuse\nWebWhatsApp code is for at least 80% on preventing abuse from spammers. How about this website? How does WhatsApi prevent their code being used by spammers? Everything needed is already posted and documented. No need to add anything anymore.\nI personally think that spam is not caused by any kind of service (neither WhatsApi, nor WebWhatsApp) but by people. Like: \"Guns don't kill people\".\nAnyhow, WebWhatsApp services costs money, depending on the volume. So spammers are not interested at all. It's a hell of a lott cheaper to spam by e-mail.\nWebWhatsApp was build on own code. Good to know that! Do you really think that what you guys are doing, nobody else can do? Because WhatsApi may become a competitor to WebWhatsApp in the future (when you guys get it all working perfectly), we are monitoring these channels. So far we are happy that it is not working very well, and hey, you maybe better stop posting updates indeed. \nFinal thing: It's extremely easy for a WhatsApp receiver to ban a number. So spamming on WhatsApp is not an issue untill soneone finds a way to spoof phonenumbers from the sender.\n. Great amount of reactions and very quick. It seems to be a hot topic.\nI am not going to contribute to a flamewar on who is better and why. I don't see it as a competition either. I respond merely because it was said that WebWhatsApp promotes spam. The truth is that we fight spam and put a lott of time in that.\nIf 'easiest to abuse' is a subject then we first need to agree on the skills of a spammer.... A really do not agree with shirioko's arguments. In my opinion spammers know how to php. IP adres known to WhatsApp or known to WebWhatsApp makes no difference. User credentials?? I guess you are all using unregistred sim cards, right? Also login accounts with fake names and disposable email adresses to not make much of a diference.\nI think we can agree that in both cases, a potential spammer needs some technical skills. okay?\nTo compare it with the 'availability of guns'. We are selling guns with a license that we can withdraw at any moment whereas WhatsApi is giving the guns away to anybody without any registration.... But even real guns nowadays can be printed at home... \nWe don't believe in security on the client side. So a simple POST form is good enough. Anything else is security by obscurity. Any kind of security on the client side can be exploited. I am not going to talk about details on our system. A captcha is still a debate but so far it is working fairly good without.\nI think its important to understand that we are focussing on (decent) companies that want customer interaction through whatsapp. The anonymous web interface is just a demonstrator. We can turn it off at any moment if we want to.\n@kingofcracking, we are monitoring several projects, just to see what is available to the general public.\n@jonnywilliamson, I have been thinking about that. Maybe in the future. It depends on some things. I see both risks as opportunities in it.\nTo conclude with a one liner:\nWe all seem to have the same hobby.... ;-)\n. ",
    "blackmlm": "I forgot to include the call stack here it goes again...\nPHP Fatal error:  Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 60' in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\n\\php\\protocol.class.php:271\nStack trace:\n0 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php(225): BinTreeNodeReader->readListSize(60)\n1 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php(159): BinTreeNodeReader->nextTreeInternal()\n2 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php(1486): BinTreeNodeReader->nextTree('?????Tr='`0U%??...')\n3 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php(386): WhatsProt->processInboundData('?????Tr='`0U%??...')\n4 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php(1165): WhatsProt->pollMessages()\n5 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php(2015): WhatsProt->waitForServer('message-1373823...')\n6 C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php(735): WhatsProt->sendMessageNode('19564002055', Object(ProtocolNode))\n7 C:\\wamp\\www\\whatsapp\\getMessages.php(49): WhatsProt->sendMessage( in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php on line 271\nFatal error: Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 60' in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\\nprotocol.class.php on line 271\nException: BinTreeNodeReader->readListSize: Invalid token 60 in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php on line 271\nCall Stack:\n    0.0005     340040   1. {main}() C:\\wamp\\www\\whatsapp\\getMessages.php:0\n    0.3750    1653176   2. WhatsProt->pollMessages() C:\\wamp\\www\\whatsapp\\getMessages.php:73\n    0.3776    1653384   3. WhatsProt->processInboundData() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:386\n    0.3838    1657752   4. WhatsAppEvent->fire() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:1528\n    0.3838    1657784   5. call_user_func_array() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\WhatsAppEvent.php:66\n    0.3838    1658280   6. onMessage() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\WhatsAppEvent.php:66\n    0.3863    1658488   7. WhatsProt->sendMessage() C:\\wamp\\www\\whatsapp\\getMessages.php:49\n    0.3867    1658960   8. WhatsProt->sendMessageNode() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:735\n    0.3902    1663136   9. WhatsProt->waitForServer() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:2015\n    0.3903    1663200  10. WhatsProt->pollMessages() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:1165\n    0.3903    1663264  11. WhatsProt->processInboundData() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:386\n    0.3903    1663264  12. BinTreeNodeReader->nextTree() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:1486\n    0.3908    1663304  13. BinTreeNodeReader->nextTreeInternal() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php:159\n    0.3908    1663336  14. BinTreeNodeReader->readListSize() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\protocol.class.php:225\nif I receive a message while the listener is not running and I run the script it crash like this.....  if I receive three messages, my script will crash 3 times...... I guess the buffer need to be empty...... any ideas of how I can fix this?\n. Thanks.... I checked and the have PHP Version 5.2.17..... I will ask them to upgrade to 5.3...\n. I have the following  :\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body){\n    global $w;\n    $from_striped = str_replace(\"@s.whatsapp.net\",\"\",$from);\n    echo \"$body\\n\";\n    $w->SendMessage($from_striped, \"OK\" );\n    }\nand it crash at -->$w->SendMessage($from_striped, \"OK\" );  ---> with Invalid token\n. it only happens if I type a message too fast, or if there are more than 1 message waiting to be deliver when I start the listener....\n. I found the issue..... I was running SendMessage() inside the event onGetMessage.....  \nI was trying to create an autoresponse system and I was using sendMessage within the event onMessage. \nTo fix it, I removed the sendMessage() from onMessage() event and added a Message Queue  which then is process in Main-loop.\nis working now....\nThanks a lot for your support.... this is a great API development...\n. This is What I am trying.....\nphp\nrequire_once('WhatsAPI/src/php/whatsprot.class.php');\n//$destinationPhone = \"xxxxxxxxxxxxxx\";//Cesar\n$destinationPhone = \"xxxxxxxxxxxxxxxxxxx\";//Jose\n$username = \"xxxxxxxxxxxxxxxxxxx\";\n$token = md5($username);\n$nickname = \"xxxxxxxxxxxxx\";\n$password = \"xxxxxxxxxxxxxxxxxx\";// e.g. \"SDFStsdgDFHDFGSDgfsd==\";\n//$filepath = \"images/NealAdamsBatman.JPG\";\n$filepath = \"http://images2.wikia.nocookie.net/__cb20110112054333/batman/images/a/a3/NealAdamsBatman.jpg\";\n\n<p$w = new WhatsProt($username, $token, $nickname,true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->SendMessageImage($destinationPhone, $filepath );\n?>\n. Yes CURL is enabled..... this info comes from phpinfo():\ncurl\ncURL support    enabled\ncURL Information    7.24.0\nAge     3\nFeatures\nAsynchDNS   Yes\nDebug   No\nGSS-Negotiate   Yes\nIDN     No\nIPv6    Yes\nLargefile   Yes\nNTLM    Yes\nSPNEGO  No\nSSL     Yes\nSSPI    Yes\nkrb4    No\nlibz    Yes\nCharConv    No\nProtocols   dict, file, ftp, ftps, gopher, http, https, imap, imaps, ldap, pop3, pop3s, rtsp, scp, sftp, smtp, smtps, telnet, tftp\nHost    i386-pc-win32\nSSL Version     OpenSSL/0.9.8u\nZLib Version    1.2.5\nlibSSH Version  libssh2/1.3.0 \nThe following info is the error I get when run the code..\nPHP Fatal error:  Call to undefined function curl_init() in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php on line 1369\nPHP Stack trace:\nPHP   1. {main}() C:\\wamp\\www\\whatsapp\\send.php:0\nPHP   2. WhatsProt->sendMessageImage() C:\\wamp\\www\\whatsapp\\send.php:15\nPHP   3. WhatsProt->getMediaFile() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:803\nFatal error: Call to undefined function curl_init() in C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php on line 1369\nCall Stack:\n    0.0004     327344   1. {main}() C:\\wamp\\www\\whatsapp\\send.php:0\n    0.9041    1639464   2. WhatsProt->sendMessageImage() C:\\wamp\\www\\whatsapp\\send.php:15\n    0.9041    1639528   3. WhatsProt->getMediaFile() C:\\wamp\\www\\whatsapp\\WhatsAPI\\src\\php\\whatsprot.class.php:803\nJust as extra info, I am using curl for some other scripts without problems......\n. its running OK with my hosting server with php 5.3.27.....  in my local computer I have php 5.3.13.... do you think this is causing the problem on my local machine?\n. it works OK my server.......  I will have to upgrade my local machine... \nThanks :+1: \n. Yes I am using WAMP v2.2 in 32Bit .....I will try to upgrade to v2.4(32bit.)\n. Same here.... my account got blocked yesterday too... and I was not sending messages to more than two numbers.....\nand I did not used the checkCredentials......\n. What r u planning to do?\n. I can pay $10 bucks to get a new number..... but I am afraid I will be trashing those $10 Dlls.....  :(\n. I was thinking on paying the $1 on a new number..... to see if it get block.....\n$1 for a registered paid whatsapp account.... and paid my cell company 10 to get new number...\n. Also, I was not adding the incoming numbers to my address book and sync it.... that might help to.....\n. I got a new account and Paid for it the $1...... I am using the same code as when they blocked me..... just to try..... lets see if they will respect paid accounts....\nwill post results later....\n. Confirmed..... They did not care..... they closed the account...... I sent only 2 messages...........\n. I know how to get free phone accounts for testing and development.... I think this will help, but I just don't want to post it here, I know they are reading all of the comments and laughing out loud. If any of you needs this info, email me blackmlm at g mail dot com with reference of who you are from the github....\n. I registered using a cell phone and paid for it like a regular user using their android client. I got the password using MissVenom, then I moved account to a whatsapi client.  Bang, closed within few hours (only 2 messages sent)\n. ",
    "Dynogic": "lmao\n. Awesome! I didn't know that someone wrote a tool for this. =)\nI have plenty of time off - so I'll be using this tool in the next few days and follow-up for you. I'm working on a re-implementation of WhatsAPI using the sources Yowsup and WhatsAPINet (an absolute awful port) - a small sliver of a large project I have been slaving away on.\n. Yuck. I got blocked yesterday too. I wonder why.... looks like WhatsAPI is tripping something on the servers over there. Now I'm on my second phone's account.\nAny ideas, @shirioko ?\nAlso, Contacts Sync's authentication is somewhat reliant on the main authentication. That is, I'm calling contact sync prior to logging into to the service... and just now (for the first time ever in a month) Contact Sync was returning Unauthorized. The problem is resolved after starting the service (which successfully logged in)... then Contact Sync worked. Weird.\n. Ooo... fast reply!\nI wonder if the official client sets cut off times (where it will refuse to connect after a certain period), and then they just mass block everyone who's still accessing the service based on an expired build string.\n. Use the Android constants. I hope I don't get banned soon on these >.< Otherwise, I'll have to start sniffing the official client.\n. Contact WhatsApp. See if they'll unban you.\n. @assegaf, how frequent are you sending those messages?\nIf you're sending 10 messages to 10 different contacts within a second, I have every reason to believe you getting blocked. :smile: \n. @assegaf, did you make another account today, and did it block again?\nDo you have this commit\nhttps://github.com/venomous0x/WhatsAPI/commit/b62464c7b43d9f6ece86c4c09ec22d4d589b382e\nSince yesterday (when my account was blocked), I changed my constants around. I haven't been blocked yet on my second account.\n. @assegaf, I doubt all the messages would be changed around.\n. @assegaf\nAlright. If I'm banned again.. I'll launch a sniffer and investigate.\n. Ahhh....\n``` c#\n            else if (ProtocolTreeNode.TagEquals(node, \"message\"))\n            {\n                var notification = node.GetChild(\"notification\");\n                if (notification != null)\n                {\n                    var picture = notification.GetAttribute(\"type\");\n                if (picture != null && picture == \"picture\")\n                {\n                    UpdateBubbleGroups();\n                    return null;\n                }\n            }\n\n            var from = node.GetAttribute(\"from\");\n            var time = node.GetAttribute(\"t\");\n\n            var typing = node.GetChild(\"composing\");\n            if (typing != null)\n            {\n                var tb = new TypingBubble(long.Parse(time), Bubble.BubbleDirection.Incoming,\n                                          @from, null, false, this, true); \n                return tb;\n            }\n            var paused = node.GetChild(\"paused\");\n            if (paused != null)\n            {\n                var tb = new TypingBubble(long.Parse(time), Bubble.BubbleDirection.Incoming,\n                                          @from, null, false, this, false); \n                return tb;\n            }\n\n            if (node.GetChild(\"received\") == null && node.GetAttribute(\"type\") == \"chat\" \n                && !from.Contains(WhatsConstants.WhatsAppGroupServer))\n                SendMessageReceived(node);\n\n....\n```\nThat's the start of my message branch. Typing [and not typing] seem to be weirdly grouped up in message nodes in WhatsApp. You also get profile picture updated notifications in there.\nThose are the two exceptions I've found so far. \nI took your advise and added\nc#\n&& node.GetAttribute(\"type\") == \"chat\" \n                    && !from.Contains(WhatsConstants.WhatsAppGroupServer))\nto my SendMessageReceived condition.Therefore, if it isn't type of \"chat\", it shouldn't send. Moreover, their is no received checkmark in the official WhatsApp client for groups. So I've added that in there as well.\nMaybe this fixes this weird blocked issue?\n. I haven't been banned yet ;)\nOnce my second ban happens, I'll throw the towel in and start the sniffer up.\nBut, you can always do it yourself! https://github.com/shirioko/MissVenom\n^^ You just modify your router's DNS and MissVenom acts as a reverse proxy.\n. \"not good, if we dont SendMessageReceived , any other tx send will fail, I already tested it,\nwhen relogin, the notification and resend again all of them by whatsapp server.\"\n^^ You have to rephrase that. I don't understand. >.<\n. ...and... second account banned. >.<\n. @shirioko what does that mean? subtle update ... hmm....\n@assegaf mind my ignorance above =) looking at https://github.com/tgalal/yowsup/blob/master/src/Yowsup/connectionmanager.py it can be seen the various message receipts sent in parseMessage. Perhaps this is why we're getting blocked... I don't think anyone has been blocked from using Wazzap =)\n@shirioko @assegaf  could you test Code Request for me on the new token (Android) mentioned on here 2-3 days ago? i'm trying to do a request now... it states it's been sent, but I'm getting no SMS. worked yesterday just fine >.<\n. @assegaf, could we speak outside of GitHub? Perhaps over Skype text?\n. @ removed skype info.\n. @shirioko hmmm.. mind sending 506?\n. @shirioko, link me? :P\n. @shirioko , I think @assegaf was right originally about them detecting bans from ACKs not being sent back correctly. I'm going to experiment more after I finish reimplementing this code request system.\n. @assegaf challenges are reused. Time to examine this code...\n. @assegaf @shirioko \nAuthBlob has changed ... working on fixes. Challenges are now generated after auth success, which then becomes the challenge for the i+1 auth connection. So what @assegaf sees there is infact a challenge.\n. @assegaf  \nI'm examining the source. And if I still can't figure it out, then I'll interpose the Java WA client to dump the ProtocolNodes.\nYes, I have already implemented it. I'm am now dropping my CodeRequest code in so I can get my password. xD\n. Also... regarding the ports. It does a rotation between 433 and 5222. 433 is a fail over (i guess some carriers block non HTTP/S ports).\n. @assegaf , Okay. I have updated authentication.\nAuthentication blob sends UserAgent and MCC/MNC now too.\nChallenge for i+1 is now saved, and reloaded when the connection is reestablished.\nLet's see if I don't get banned soon crosses fingers\n. @shirioko Server sends a challenge after login, then the client remembers it and applies it for the i+1 login. This obviously chains.\n@assegaf, yes. May or may not have UserAgent/MMC+MNC ... WP client ideally tries to send both.\n. @assegaf , yes, something on the lines of that.\nI will try logging in tomorrow again... and crosses fingers my account isn't banned. xD\nI fucked up the challenge on my primary phone today.. now I have to wait like 200min or something before I can send another SMS.\n^^ I hope this solves our problem. I'm getting sick of these bans.\n. @assegaf , I've also rewrote the majority of ProcessNextTree to better reflect the behaviour of the modern client. A lot of testing and a few extra IQ handlers still need to be implemented.\n. @shirioko , what is GetClientConfig and ServerConfig exactly for?!\n. @shirioko ... looks right. That's exactly what I've implemented yesterday. =)\nWhatsAPI needs a rewritten ProcessNextTree ... to support all those weird ACK replies. I'm busy rewriting it... and will send you the code on completion.\n. @shirioko , day two with this new implementation and still not banned. hopefully this goes well =)\n. @assegaf , I can look tonight for you in my Java deobfuscated version to figure out exactly how ID is composed. I don't really care about it though, as you never have to use exist request.\n. @shirioko , wanna go on Google Talk? :P\n. Gee... this is interesting:\nSendNormalizePhoneNumber(string cc, string phone)\nLooks like WhatsApp is using libphonenumber on their servers.\n. @assegaf , banned again.\nThis is very weird. It might be because I'm requesting photos to frequently. I have disabled this... and now I'm yet on another account. When are we going to figure this out. >.<\n. And... there goes another account. I don't get it >.<\n. Hey @assegaf ,\nOkay... looks like a few things changed with the protocol of how messages are sent (very slightly). so I've updated these.\nI have made two accounts. I simply logged in with the one account, and pulled the connection. On the other account, I logged in... sent several messages (with composing/paused), received a few... and then logged off. Both these connections DID send presence and subscription updates.\nSo, I'll relogin tomorrow... and crosses fingers hopefully both aren't banned.\n. @assegaf , @shirioko : both of those accounts I tested last night still work\n\n\n:\n. @assegaf , been doing a major revamp of my codebase to more closely reflect how the official client operates.\nI'm having great luck so far ... zero bans.\n. @assegaf depends on how the network stack is written on an OS.\nAll modern OS's allow you to listen in on the TCP connection on one thread, and write on the same TCP connection on another. Since PHP doesn't support multi-threading, you can't do this. PHP should more be used as a duct-tape language than anything else these days imho.\n. I hate Java >.< Used the language for way to long => it's ugly in comparison to C#. And it's an absolute pain to do async programming with Java -.-\nPython is really nice... but I've never really found a need to use it. Hmmm...\n. @shirioko,\nAs I recall from reading previous issues, the token must be extracted from WhatsAppNative.dll?\n. Mind uploading the latest unencrypted XAP?\n. @shirioko, had a look at WhatsAppNative...\nGUID's are now in the WAobs segment (everything is) (GUID's use to be in the data section). That mean's they're obfuscated ... IByteBuffer's GUID in WhatsApp.dll is != to what it was on a dll-dump on the previous version.\n.WAobs:0008F3E8 IByBufGUIDOb    DCB 0x47 ; G            ; DATA XREF: .data:OffIByBufGUIDOb\u0018o\n.WAobs:0008F3E9                 DCB 0x45 ; E\n.WAobs:0008F3EA                 DCB 0xA4 ; \u00f1\n.WAobs:0008F3EB                 DCB 0x55 ; U\n.WAobs:0008F3EC                 DCB 0xC1 ; -\n.WAobs:0008F3ED                 DCB 0x51 ; Q\n.WAobs:0008F3EE                 DCB 0xF1 ; \u00b1\n.WAobs:0008F3EF                 DCB 0x1C\n.WAobs:0008F3F0                 DCB 0xE1 ; \u00df\n.WAobs:0008F3F1                 DCB 0xF3 ; =\n.WAobs:0008F3F2                 DCB 0xDF ; \u00af\n.WAobs:0008F3F3                 DCB 0x61 ; a\n.WAobs:0008F3F4                 DCB 0x92 ; \u00c6\n.WAobs:0008F3F5                 DCB 0xFD ; \u00b2\n.WAobs:0008F3F6                 DCB  0xD\n.WAobs:0008F3F7                 DCB 0xD8 ; +\n``` c#\n        public static void Main (string[] args)\n        {\n            var guidBytes = \"47 45 A4 55 C1 51 F1 1C  E1 F3 DF 61 92 FD 0D D8\";\n        var guidBytesParts = guidBytes.Split (' ');\n\n        List<byte> bytes = new List<byte>();\n        foreach (var guidBytePart in guidBytesParts)\n        {\n            if (string.IsNullOrWhiteSpace(guidBytePart))\n                continue;\n\n            var @byte = byte.Parse(guidBytePart, NumberStyles.HexNumber, CultureInfo.InvariantCulture);\n            bytes.Add(@byte);\n        }\n\n        Console.WriteLine (new Guid(bytes.ToArray()));\n    }\n\n```\nNot equal.\nAlso, interesting enough... a bunch of Function calls are not in WAOb too... Lol\nI assume they're using a commercial ob'er. Not really familiar with ARM Ob'ers... but there's no VTable hook to change these GUIDs around spontaneously (fuck - that's what I would of done). Consequently, the VTable refers to to the GUID in WAobs directly. Therefore, there must be something at DLL load that converts all obbed data into real data. Haven't located this yet... but let's pray to the Lords that it calls Win32's cryptography functions (then it'll be easy to reverse engineer). Otherwise I'll have to rewrite in C/Assembly and gcc on a Raspberry Pi or Emulator...\nAlso, GetToken in this version doesn't rely on Win32's cryptography functions,\nNewBuild:\n\nOldBuild that Jay patched & you ran:\n\n... 10 minutes later after a washroom break ...\nGetToken is sub_187D4 ... after snooping around it more. I looked at it for a few minutes, and it looks to be using this structure: http://msdn.microsoft.com/en-us/library/windows/desktop/ms737530(v=vs.85).aspx\nSo... I'm pretty positive GetToken is connecting to the internet...\nI'll figure out how to de-ob the WaOb strings tomorrow. I see there's xref's between them and GetToken ... so one of them must be a host... then it should be smooth sailing.\nWhich means, your patching of returning the token may not work anymore (as the token sits on the server (further explains why there's no encryption in GetToken)). Unless, of course, Jay did already and I seem to be wrong!\nThat is all! Thank God for that Logic Design class I took last semester.\nEdit: if all else fails... we're hacking the Java version! Attaching a debugger or modifying the SMALI code should work. I use to do a lot of BCEL/ASM work... so it shouldn't be too tough. xD\n. Oooooooooo :P\nStill probing the DLL with a patched DLL ? How does GetToken in WhatsAppNative exactly work then ? \nI'll see if I can extract that algo.\n. @shirioko does the probing still work if you reload the app? i.e, rebooting your phone in airplane mode?\n. @shirioko  ahh, I see... my structures were wrong, \nhttp://msdn.microsoft.com/en-us/library/windows/desktop/aa365740(v=vs.85).aspx\n... it must open a file.\n\"Still probing the DLL with a patched DLL ? How does GetToken in WhatsAppNative exactly work then ?\"\n. ^^ send me the encryption key?\ndynogic@gmail.com\nWhat is Jannik's Github name?\n. @shirioko, Still working on a reverse :') I'll brainstorm with @JayFoxRox .. the prefix still seems to be located in WAObs... just a matter of decrypting WAObs I think, then we can just do an entire segment dump. And we now have GUIDs as a regression test.\n. @shirioko , thanks!\n. @shirioko , it'll be nice if you can look at the reply I sent you over email =)\n. @JayFoxRox \nOkay... My encryption findings:\nDllImport calls .text:00017B54 , which looks as if it decrypts the WAObs. This, in turn calls a Cipher function, .text:00017B54. This Cipher function seems to be used for A LOT (including multiple times in GetToken - i'll get to that). To an xref on it - the tree is massive. So, I believe WAObs are all decrypted here - which explains why GUID's are still able to resolve at runtime.\nNow, the GetToken function is more difficult than it looks at first glance. I started documenting on a piece of paper, and I ended up just loosing track. xD\nFirstly, GetToken get's passed in an unencrypted byte buffer (I can see this from the managed code). GetByteBufferPointer is then called that writes out to\n```\n0x2C+var_1C\n0x2C+var_18\n0x2C+var_24\n```\nIn GetByteBufferPointer, an obbed constant array, a constant 0x80070057 (i think it's a cipher/decipher control), an unobbed constant array are loaded in, and the pointer to GetIBufferBytes - then the Cipher is called. Same Cipher that's in DLLImport. \nControl flow REALLY get's ridiculous in the Cipher... just outside the Cipher routine, LR is set to a pointer (dword_95008) that points to something that gets changed dynamically (check the ref count on this - it's written to just before every call to Cipher - including in DLLImport). As soon as cipher is finished, you get this weird stack unravel:\nLDMFD   SP!, {R3,LR}\nADD     SP, SP, #0x10\nWhich then throws control flow to =dword_95008.\n... then weird stuff happens and I am clueless without a debugger. But I would guess it does something (set variables on the stack - in GetTokens case: var_1c, var_18, var_24) and then just jumps back into its parent routine (GetToken in this case).\nOnce we're back in GetToken... yet another encryption method runs on the data :\n.text:0001B3B4 sub_1B3B4\nThis one has several nested routines just like Cipher too.\nThen after that, everything get's wrapped by Cipher yet AGAIN (using the obbed prefix constant array, an unobbed constant array, and a constant). You can verify the prefix from the weird offset calculations it does. Same length as what we're use to.\nAlso, to note, there's a stack offset (44bytes) in GetToken. This looks to be used by the Cipher. But I haven't closely examined everything else the Cipher uses. Maybe it's used by whatever =dword_95008 points too.\nSo... that's it. I give up :( This thing has been seriously obfuscated.\nI'm just going to hook the Java code and call it at my disposal. That's a lot easier. :D:D:D\n. @AmirGolan85 , I'm working on it... hooking the Java client as we speak. Will be done by tomorrow. It's extremely easy. I'm refactoring Java decompiled code like a mad dog with BCEL/ASM.\n. @shirioko :D:DD:D:D\n. @AmirGolan85 , I'll try to make it a web service... as I'm just going to bootstrap the Java bytecode that dex2jar converted for me.\n. @shirioko I change my username on such a frequent basis ;) I've been sued before :'(\n. Lawl. I like how JD just bombs on the BuildHash\n```\nprivate static byte[] a(File paramFile)\n  {\n    // Byte code:\n    //   0: aload_0\n    //   1: invokevirtual 434   java/io/File:exists ()Z\n    //   4: ifeq +82 -> 86\n    //   7: aload_0\n    //   8: invokevirtual 438   java/io/File:length ()J\n    //   11: lconst_0\n    //   12: lcmp\n    //   13: ifle +73 -> 86\n    //   16: new 440    java/io/ObjectInputStream\n    //   19: dup\n    //   20: new 442    java/io/FileInputStream\n    //   23: dup\n    //   24: aload_0\n    //   25: invokespecial 443  java/io/FileInputStream:  (Ljava/io/File;)V\n    //   28: invokespecial 446  java/io/ObjectInputStream:    (Ljava/io/InputStream;)V\n    //   31: astore_1\n    //   32: aload_1\n    //   33: invokevirtual 450  java/io/ObjectInputStream:readObject    ()Ljava/lang/Object;\n    //   36: checkcast 382  [B\n    //   39: checkcast 382  [B\n    //   42: astore 6\n    //   44: aload_1\n    //   45: ifnull +7 -> 52\n    //   48: aload_1\n    //   49: invokevirtual 451  java/io/ObjectInputStream:close ()V\n    //   52: aload 6\n    //   54: areturn\n    //   55: astore 7\n    //   57: aload 7\n    //   59: invokestatic 453   com/whatsapp/pbb:d  (Ljava/lang/Throwable;)V\n    //   62: aload 6\n    //   64: areturn\n    //   65: astore_2\n    //   66: aconst_null\n    //   67: astore_1\n    //   68: getstatic 209  com/whatsapp/ik:z   [Ljava/lang/String;\n    //   71: bipush 15\n    //   73: aaload\n    //   74: aload_2\n    //   75: invokestatic 406   com/whatsapp/pbb:b  (Ljava/lang/String;Ljava/lang/Throwable;)V\n    //   78: aload_1\n    //   79: ifnull +7 -> 86\n    //   82: aload_1\n    //   83: invokevirtual 451  java/io/ObjectInputStream:close ()V\n    //   86: aconst_null\n    //   87: areturn\n    //   88: astore 5\n    //   90: aload 5\n    //   92: invokestatic 453   com/whatsapp/pbb:d  (Ljava/lang/Throwable;)V\n    //   95: goto -9 -> 86\n    //   98: astore_3\n    //   99: aconst_null\n    //   100: astore_1\n    //   101: aload_1\n    //   102: ifnull +7 -> 109\n    //   105: aload_1\n    //   106: invokevirtual 451 java/io/ObjectInputStream:close ()V\n    //   109: aload_3\n    //   110: athrow\n    //   111: astore 4\n    //   113: aload 4\n    //   115: invokestatic 453  com/whatsapp/pbb:d  (Ljava/lang/Throwable;)V\n    //   118: goto -9 -> 109\n    //   121: astore_3\n    //   122: goto -21 -> 101\n    //   125: astore_2\n    //   126: goto -58 -> 68\n    //\n    // Exception table:\n    //   from   to  target  type\n    //   48 52  55  java/io/IOException\n    //   16 32  65  java/lang/Exception\n    //   82 86  88  java/io/IOException\n    //   16 32  98  finally\n    //   105    109 111 java/io/IOException\n    //   32 44  121 finally\n    //   68 78  121 finally\n    //   32 44  125 java/lang/Exception\n  }\n```\n. Yep. But I have an old version of JD-Gui. I quit Java about a year ago :dancers: I see a new version is out, but the download server is down for it. =( JD-Gui crashed half-way through on me on source export... so half my files are missing. xD\nik.java contains on WA2.10.222 contains the cryptography functions.\n```\nprivate static byte[] a(File paramFile, String paramString)\n  {\n    byte[] arrayOfByte1 = a(paramFile);\n    if (arrayOfByte1 != null)\n    {\n      try\n      {\n        if (arrayOfByte1.length < 20 + (16 + (4 + b)))\n          throw new InvalidParameterException(paramFile.toString() + z[80]);\n      }\n      catch (Exception localException)\n      {\n        paramFile.delete();\n        throw new RuntimeException(localException);\n      }\n      byte[] arrayOfByte2 = new byte[b];\n      System.arraycopy(arrayOfByte1, 0, arrayOfByte2, 0, b);\n      int m = 0 + b;\n      if ((arrayOfByte2[0] != 0) || (arrayOfByte2[1] != 1))\n        throw new InvalidParameterException(paramFile.toString() + z[78]);\n      byte[] arrayOfByte3 = new byte[4];\n      System.arraycopy(arrayOfByte1, m, arrayOfByte3, 0, 4);\n      int n = m + 4;\n      byte[] arrayOfByte4 = new byte[16];\n      System.arraycopy(arrayOfByte1, n, arrayOfByte4, 0, 16);\n      int i1 = n + 16;\n      SecretKeySpec localSecretKeySpec = new SecretKeySpec(a(paramString, arrayOfByte3), z[79]);\n      Cipher localCipher = Cipher.getInstance(z[79]);\n      localCipher.init(2, localSecretKeySpec, new IvParameterSpec(arrayOfByte4));\n      byte[] arrayOfByte5 = localCipher.doFinal(arrayOfByte1, i1, arrayOfByte1.length - i1);\n      return arrayOfByte5;\n    }\n    return null;\n  }\nprivate static byte[] a(String paramString, byte[] paramArrayOfByte)\n    throws NoSuchAlgorithmException\n  {\n    return new SecretKeySpec(a(paramString.getBytes(), paramArrayOfByte, 16, 128), z[2]).getEncoded();\n  }\nprivate static byte[] a(byte[] paramArrayOfByte1, byte[] paramArrayOfByte2, int paramInt1, int paramInt2)\n  {\n    tb localtb = new tb();\n    localtb.a(paramArrayOfByte1, paramArrayOfByte2, paramInt1);\n    return ((rb)localtb.a(paramInt2)).a();\n  }\npublic static byte[] a(byte[] paramArrayOfByte, byte[][] paramArrayOfByte1)\n  {\n    boolean bool = DialogToastActivity.f;\n    try\n    {\n      Mac localMac = Mac.getInstance(z[76]);\n      localMac.init(new SecretKeySpec(paramArrayOfByte, z[76]));\n      int m = paramArrayOfByte1.length;\n      int n = 0;\n      do\n      {\n        if (n >= m)\n          break;\n        localMac.update(paramArrayOfByte1[n]);\n        n++;\n      }\n      while (!bool);\n      byte[] arrayOfByte = localMac.doFinal();\n      return arrayOfByte;\n    }\n    catch (GeneralSecurityException localGeneralSecurityException)\n    {\n    }\n    throw new RuntimeException(localGeneralSecurityException);\n  }\n```\nAnd there's a few more... but that should be the meat of it. \nIn verifynumber.class, \nstatic bu a(String paramString1, String paramString2, Locale paramLocale, String paramString3, String paramString4)\n    throws IOException, HttpException, JSONException, Exception\n  {\n    String str1 = z[6];\n    Object localObject = z[6];\n    String str2 = App.fb.getNetworkOperator();\n    String str3 = ik.a(paramString2);\n    Matcher localMatcher;\n    if (str2 != null)\n    {\n      localMatcher = Pattern.compile(z[8]).matcher(str2);\n      if (localMatcher.find())\n        str1 = localMatcher.group(1);\n    }\n    while (true)\n    {\n      try\n      {\n        Locale localLocale = Locale.US;\n        String str5 = z[9];\n        Object[] arrayOfObject = new Object[1];\n        arrayOfObject[0] = Integer.valueOf(localMatcher.group(2));\n        String str6 = String.format(localLocale, str5, arrayOfObject);\n        localObject = str6;\n        str4 = str1;\n        return zt.a(paramString1, paramString1 + paramString2, paramString2, (String)localObject, str4, paramString3, paramString4, str3);\n      }\n      catch (NumberFormatException localNumberFormatException)\n      {\n        pbb.d(z[7] + localNumberFormatException.toString());\n        if (!DialogToastActivity.f)\n          break label216;\n      }\n      pbb.b(z[10] + str2);\n      label216: String str4 = str1;\n    }\n  }\nLOL at the non-obbed name... that's where the request is made ... zt contains all the WebRequest code (like WARequest.py).\nThe return value bu, has a member of type vh... which lists everything that can go wrong. including the infamous... you are blocked. (honestly, fuck these guys).\nAlso, these guys have a full list of rom-names (you get a warning for using a custom rom). I loled when I saw those strings being injected.\n. @shirioko .. check your emailz!\n. Alright. I should have a proof of concept pretty quickly up. WhatsApp uses a pathetic Java obber.... things are already clear as snow. =)\n. ^^ And maybe, I'll write an updater too... =)\n. @atans more like... sleeping zzzz\n. Tomorrow... when I can send one to my second phone :P \nI'll implement the Java hooks now. My brain is fried after all that ARM research.\ndynogic@gmail.com\nMessage me =)\n. @atans \n. @shirioko @JayFoxRox @atans et al:\nCracked. It was quite trivial after I got all the obbed code mapped out. If anyone is curious on how it was done, reply here and I'll be happy to explain. I just don't feel like typing up a report as on now. :/\nTested against my phone for SMS and Voice... working. Also testing some bullshit number, and it said \"sent\". I''m not sure if it works completely for new registrations though.\nMNC and MCC it does send (contrary to the WP version). So be careful of that. ID is also some static value... is this secure? Or no? It also sends a reason=self-send-jailbroken. Even though my phone isn't jailbroken. LOL\nToken is still wrapped up the same way. I rebuilt a small part of the WA's Dalvik bytecode to make sure. One interesting thing to note:\nThere seems to be two longHashes (you'll know what the longHash is when you look at the code below). There's a flag (e)\nif (App.e == 3)\n    {\n      return mfb.q;\n    }\n    else\n    {\n    return mfb.r;\n    }\nWhere if e is is 3, then a different longHash is used to calculate the token. This is only triggered though if some exception occurs on App creation. Haven't explored it much... so I don't really know.\nCredit me if used. Regards.\nRegisterRequest should work as usual.\nCode:\n``` c#\nusing System;\nusing System.Security.Cryptography;\nusing System.Text;\nusing System.IO;\nnamespace CodeRequest\n{\n    class MainClass\n    {\n        static string _dexHash = \"8ac295a1bc5c0df1147db1ad2172b776\";\n        static string _longHash = \"30820332308202f0a00302010202044c2536a4300b06072a8648\" + \n            \"ce3804030500307c310b3009060355040613025553311330110603550408130a43616\" + \n                \"c69666f726e6961311430120603550407130b53616e746120436c617261311630\" + \n                \"14060355040a130d576861747341707020496e632e31143012060355040b130b4\" + \n                \"56e67696e656572696e67311430120603550403130b427269616e204163746f6e\" + \n                \"301e170d3130303632353233303731365a170d3434303231353233303731365a3\" + \n                \"07c310b3009060355040613025553311330110603550408130a43616c69666f72\" + \n                \"6e6961311430120603550407130b53616e746120436c617261311630140603550\" + \n                \"40a130d576861747341707020496e632e31143012060355040b130b456e67696e\" + \n                \"656572696e67311430120603550403130b427269616e204163746f6e308201b83\" + \n                \"082012c06072a8648ce3804013082011f02818100fd7f53811d75122952df4a9c\" + \n                \"2eece4e7f611b7523cef4400c31e3f80b6512669455d402251fb593d8d58fabfc\" + \n                \"5f5ba30f6cb9b556cd7813b801d346ff26660b76b9950a5a49f9fe8047b1022c2\" + \n                \"4fbba9d7feb7c61bf83b57e7c6a8a6150f04fb83f6d3c51ec3023554135a16913\" + \n                \"2f675f3ae2b61d72aeff22203199dd14801c70215009760508f15230bccb292b9\" + \n                \"82a2eb840bf0581cf502818100f7e1a085d69b3ddecbbcab5c36b857b97994afb\" + \n                \"bfa3aea82f9574c0b3d0782675159578ebad4594fe67107108180b449167123e8\" + \n                \"4c281613b7cf09328cc8a6e13c167a8b547c8d28e0a3ae1e2bb3a675916ea37f0\" + \n                \"bfa213562f1fb627a01243bcca4f1bea8519089a883dfe15ae59f06928b665e80\" +\n                \"7b552564014c3bfecf492a0381850002818100d1198b4b81687bcf246d41a8a72\" +\n                \"5f0a989a51bce326e84c828e1f556648bd71da487054d6de70fff4b49432b6862\" +\n                \"aa48fc2a93161b2c15a2ff5e671672dfb576e9d12aaff7369b9a99d04fb29d2bb\" +\n                \"bb2a503ee41b1ff37887064f41fe2805609063500a8e547349282d15981cdb58a\" +\n                \"08bede51dd7e9867295b3dfb45ffc6b259300b06072a8648ce3804030500032f0\" +\n                \"0302c021400a602a7477acf841077237be090df436582ca2f0214350ce0268d07\" +\n                \"e71e55774ab4eacd4d071cd1efad\";\n    public static void Main(string[] args)\n    {\n        var countryCode = \"1\"; //country code\n        var number = \"\"; //number without cc\n        var mnc = \"\"; //mnc ... check wikipedia or phone (three digits - if less, zero-pad in front until length is of 3)\n        var mcc = \"\"; //mcc ... \"\n        var useSMS = true; //true for sms or false for voice.\n        var token = CalculateMD5Hash(\n            System.Text.Encoding.UTF8.GetBytes(_longHash + _dexHash + number));\n\n        var codeRequest = new Disa.Framework.WhatsApp.HTTP.CodeRequest(countryCode, number, mnc, mcc, useSMS, token);\n        Console.WriteLine(codeRequest.Send());\n    }\n\n    public static string CalculateMD5Hash(byte[] bytes)\n    {\n        var md5 = System.Security.Cryptography.MD5.Create();\n        var hash = md5.ComputeHash(bytes);\n\n        var sb = new StringBuilder();\n        for (int i = 0; i < hash.Length; i++)\n        {\n            sb.Append(hash[i].ToString(\"x2\"));\n        }\n        return sb.ToString();\n    }\n}\n\n}\n```\n``` c#\nusing System;\nnamespace Disa.Framework.WhatsApp.HTTP\n{\n    public class CodeRequest : WaRequest\n    {\n        public CodeRequest(string countryCode, string phoneNumber, string mnc, \n                           string mcc, bool useSms, string token) \n            : base(\"https://v.whatsapp.net/v2/code\", RequestType.Get, \n                   \"WhatsApp/2.10.222 Android/4.2.2 Device/LGE-Nexus_4\")\n        {\n            Attributes.Add(new Attribute(\"cc\", countryCode));\n            Attributes.Add(new Attribute(\"in\", phoneNumber));\n            Attributes.Add(new Attribute(\"id\", \"abcdef0123456789\"));\n            Attributes.Add(new Attribute(\"lg\", \"en\"));\n            Attributes.Add(new Attribute(\"lc\", \"US\"));\n            Attributes.Add(new Attribute(\"mnc\", mnc));\n            Attributes.Add(new Attribute(\"mcc\", mcc));\n            Attributes.Add(new Attribute(\"method\", useSms ? \"sms\" : \"voice\"));\n            Attributes.Add(new Attribute(\"reason\", \"self-send-jailbroken\"));\n            Attributes.Add(new Attribute(\"token\", token));\n        }\n    }\n}\n```\n``` c#\nusing System;\nusing System.Collections.Generic;\nusing System.Net;\nusing System.Text;\nusing System.IO;\nnamespace Disa.Framework.WhatsApp.HTTP\n{\n    public class WaRequest\n    {\n        public enum RequestType { Get, Post };\n    readonly bool _useAttributes;\n    string _url;\n    string _rawData = \"\";\n    readonly RequestType _requestType = RequestType.Get;\n    readonly List<Attribute> _attributes = new List<Attribute>();\n    readonly List<HeaderItem> _headerItems = new List<HeaderItem>();\n    WebResponse _response;\n    private string _userAgent { get; set; }\n\n    public WaRequest(string url, RequestType requestType, string userAgent, bool useAttributes = true)\n    {\n        _url = url;\n        _requestType = requestType;\n        _useAttributes = useAttributes;\n        _userAgent = userAgent;\n        //Ignore any SSL errors.\n        ServicePointManager.ServerCertificateValidationCallback = delegate { return true; };\n    }\n\n    public string Url\n    {\n        get\n        {\n            return _url;\n        }\n        set\n        {\n            _url = value;\n        }\n    }\n\n    public WebResponse Response\n    {\n        get\n        {\n            return _response;\n        }\n        set\n        {\n            _response = value;\n        }\n    }\n\n    public List<Attribute> Attributes\n    {\n        get\n        {\n            return _attributes;\n        }\n    }\n\n    public void AddAttribute(Attribute a)\n    {\n        _attributes.Add(a);\n    }\n\n    public string RawData\n    {\n        get\n        {\n            return _rawData;\n        }\n        set\n        {\n            _rawData = value;\n        }\n    }\n\n    public string Send()\n    {\n        return _requestType == RequestType.Get ? GetRequest() : PostRequest();\n    }\n\n    public string GetRequest()\n    {\n        string sendData;\n        if (_useAttributes)\n        {\n            var data = new StringBuilder();\n            foreach (var a in _attributes)\n            {\n                data.Append(String.Format(\"{0}={1}&\", a.Key, a.Token));\n            }\n            sendData = data.ToString();\n        }\n        else\n        {\n            sendData = _rawData;\n        }\n\n        var request = (HttpWebRequest)WebRequest.Create(_url + \"?\" + sendData);\n        request.Timeout = 10000;\n        request.Proxy = null;\n        request.UserAgent = _userAgent;\n\n        using (_response = request.GetResponse())\n        {\n            return new StreamReader(_response.GetResponseStream()).ReadToEnd();\n        }\n    }\n\n    public void AddHeaders(params HeaderItem[] items)\n    {\n        _headerItems.AddRange(items);\n    }\n\n    public void ClearHeaders()\n    {\n        _headerItems.Clear();\n    }\n\n    public string PostRequest()\n    {\n        var httpWReq = (HttpWebRequest)WebRequest.Create(_url);\n        httpWReq.Proxy = null;\n        httpWReq.Timeout = 10000;\n\n        byte[] dataBytes;\n        if (_useAttributes)\n        {\n            var data = new StringBuilder();\n            foreach (var a in _attributes)\n            {\n                data.Append(String.Format(\"{0}={1}&\", a.Key, a.Token));\n            }\n            dataBytes = Encoding.Default.GetBytes(data.ToString());\n        }\n        else\n        {\n            dataBytes = Encoding.Default.GetBytes(_rawData);\n        }\n\n        httpWReq.Method = \"POST\";\n        httpWReq.UserAgent = _userAgent;\n        foreach (var item in _headerItems)\n        {\n            switch (item.Name)\n            {\n                case \"Accept\":\n                    httpWReq.Accept = item.Value;\n                    break;\n                case \"Content-Type\":\n                    httpWReq.ContentType = item.Value;\n                    break;\n                case \"Content-Length\":\n                    httpWReq.ContentLength = dataBytes.Length;\n                    break;\n                default:\n                    httpWReq.Headers.Add(item.Name, item.Value);\n                    break;\n            }\n        }\n\n        if (dataBytes.Length != 0)\n        {\n            using (var stream = httpWReq.GetRequestStream())\n            {\n                stream.Write(dataBytes, 0, dataBytes.Length);\n            }\n        }\n\n        using (_response = httpWReq.GetResponse())\n        {\n            using (var sr = new StreamReader(_response.GetResponseStream()))\n            {\n                return sr.ReadToEnd();\n            }\n        }\n    }\n\n    public class HeaderItem\n    {\n        public string Name {get; private set;}\n        public string Value {get; private set;}\n\n        public HeaderItem(string name, string value)\n        {\n            Name = name;\n            Value = value;\n        }\n    }\n\n    public class Attribute\n    {\n        public Attribute(string key, string token)\n        {\n            Key = key;\n            Token = token;\n        }\n\n        public string Key { get; set; }\n\n        public string Token { get; set; }\n    }\n}\n\n}\n```\n. @atans, its working for @devloic and me. why aren't you getting a code? \nthis is incredibly weird =(\n. @atans, look at the second code piece. make sure your PHP implementation is sending all those attributes.\n. @atans your ID is bullshit on that link.... I told you, follow these attributes closely:\nc#\n            Attributes.Add(new Attribute(\"cc\", countryCode));\n            Attributes.Add(new Attribute(\"in\", phoneNumber));\n            Attributes.Add(new Attribute(\"id\", \"abcdef0123456789\"));\n            Attributes.Add(new Attribute(\"lg\", \"en\"));\n            Attributes.Add(new Attribute(\"lc\", \"US\"));\n            Attributes.Add(new Attribute(\"mnc\", mnc));\n            Attributes.Add(new Attribute(\"mcc\", mcc));\n            Attributes.Add(new Attribute(\"method\", useSms ? \"sms\" : \"voice\"));\n            Attributes.Add(new Attribute(\"reason\", \"self-send-jailbroken\"));\n            Attributes.Add(new Attribute(\"token\", token));\nhas Code Request ever works for you?\nI have send the number in the link above an SMS:\n{\"status\":\"sent\",\"length\":6,\"method\":\"sms\",\"retry_after\":1805}\nTell me if you got it.\n. Thats what the Android client is sending, yes @atans \n@assegaf , nope. maybe it's a bug in the client ? im not on a jailbroken phone, and that's what it sent. hmmm....\n. @atans, no idea then. Send me a test number to my email, and I'll send it from my end.\n@assegaf weird... maybe I did jailbreak my phone, but I can't remember xD Did you side-load Whatsapp on your device? That would explain the 000 MNC/MCC.\n@atans, I'm pretty sure you can just randomize those ID digits.\n. @atans, just put those letters in a random order..\nI've sent two SMS to those two phone numbers you sent me yesterday.\n. @assegaf , so latest is using abeabcdef0123456789 .... did I copy the ID wrong? xD\nWhy is mine missing the 'abe' at the front? lol\n. @assegaf \nI thought I copied it right ;)\nThe ID is static now with the build number.\n. so @atans, you don't need to randomize the ID. Just keep it as you see it. It's the same for everyone running on the that User Agent.\n. @atans, did you get the SMS's?\n@assegaf , yes... the ID matters on the call to exist request. If it's correct, then it will give you the password directly without needing to send a Code Request. I haven't explored this much...\n. @assegaf , some unique identifier from your phone... @shirioko  can tell you more about it. I know nothing about it. xD I don't use it, and I'm not going to bother implementing ... just use Code Request.\nno, I will start that tomorrow... =)\n@atans, okay.\n. @devloic thanks a lot for clearing things up =)\n. @CODeRUS make sure your identity is a constant too. Otherwise it'll say sent, but you'll never get it\n. @yunsiong refer to this: https://github.com/venomous0x/WhatsAPI/issues/423#issuecomment-21319982\n^^ the ID attribute is now a constant (instead of some made up one as in the past).\njust use my code instead of yours. it will work.\n@CODeRUS \n^^ did you get SMS code? now you're trying to to register it?\n. @CODeRUS , if you log in you'll be banned: https://github.com/venomous0x/WhatsAPI/issues/422\nWe're trying to figure it out.\nBut, here you go:\n``` c#\nusing System;\nusing System.Globalization;\nusing System.Security.Cryptography;\nusing System.Text;\nnamespace Disa.Framework.WhatsApp.HTTP\n{\n    public class RegisterRequest : WaRequest\n    {\n        public RegisterRequest(string countryCode, string phoneNumber, string nonHyphenatedCode) \n            : base(\"https://v.whatsapp.net/v2/register\", RequestType.Get, WhatsConstants.UserAgent)\n        {\n            Attributes.Add(new Attribute(\"cc\", countryCode));\n            Attributes.Add(new Attribute(\"in\", phoneNumber));\n            Attributes.Add(new Attribute(\"id\", GetRandomIdentity()));\n            Attributes.Add(new Attribute(\"code\", nonHyphenatedCode));\n        }\n    public static string GetRandomIdentity()\n    {\n        return\n            CalculateMd5Hash(\n                Encoding.UTF8.GetBytes(\n                    DisaFunctions.GetNowUnixTimestamp().ToString(CultureInfo.InvariantCulture).Substring(0, 10)));\n    }\n\n    public static string CalculateMd5Hash(byte[] bytes)\n    {\n        var md5 = MD5.Create();\n        var hash = md5.ComputeHash(bytes);\n\n        var sb = new StringBuilder();\n        for (var i = 0; i < hash.Length; i++)\n        {\n            sb.Append(hash[i].ToString(\"x2\"));\n        }\n        return sb.ToString();\n    }\n}\n\n}\n```\nBuild it with https://github.com/venomous0x/WhatsAPI/issues/423#issuecomment-21319982\n. use CodeRequest's USERAGENT.\n. and, GetNowUnixTimestamp() is just UNIX epoch time. http://www.epochconverter.com/\n. @CODeRUS , CodeRequest => constant, RegRequest => Random.\n. @CODeRUS  no.\n. @yunsiong \nTimeSpan timeSpan = DateTime.UtcNow - new DateTime(1970,1,1,0,0,0);\ndouble unixVersion = timeSpan.TotalSeconds;\nwhere \nunixVersion == DisaFunctions.GetNowUnixTimestamp()\n. @CODeRUS , yes. still will be a few days before I'm 100% positive though.\n. @manufuentescr \nIn issue #422 , we've established that acks (what the client sends back to the server - like a message received) aren't being done correctly. Perhaps this may play a role in their ban detection algorithms? I'm currently under amnesia from my sedation, so I'm not in the best mood to start analyzing this now. I will very soon though. =)\nWazzap handles acks a lot better:\n```\nmessage_ack\nnotification_ack\ndelivered_ack\nvisible_ack\nsubject_ack\nnotification_ack:\n    notification_groupPictureUpdated\n    notification_contactProfilePictureUpdated\n    notification_groupPictureRemoved\n    notification_contactProfilePictureRemoved\n    notification_groupParticipantAdded\n    notification_groupParticipantRemoved\nmessage_ack:\n    group_messageReceived\n    message_received\n    group_subjectReceived\n    group_imageReceived\n    image_received\n    group_videoReceived\n    video_received\n    group_audioReceived\n    audio_received\n    group_locationReceived\n    location_received\n    group_vcardReceived\n    vcard_received\ndelivered_ack:\n    profile_setStatusSuccess\n    receipt_messageDelivered\n    receipt_visible \nnone:\n    contact_typing\n    contact_paused\n    receipt_messageSent\n    receipt_broadcastSent\n```\nThose are all the events fired in parse incoming message in Wazzap, with their respective acks. 'None' implies that no ack is fired on those events.\nWazzap declares visible_ack and subject_ack, but it doesn't ever use them. \nTake a look at the equivalent WhatsAPI implementation of ack handling, and you can see it is severely incompetent. It sends a message_ack for a notification, for example.\nOnce this is fixed, and I'm still getting banned (thank God for prepaid cellphone accounts), I'll look into WhatsApp.dll and it's reference dll's that @shirioko gave me =) and see if there's any peculiar protocol changes.\n. @atans , nope. WhatsApp has made it impossible to crack. There was Android constants posted here a few days ago... but alas, it died within a day when we all got banned. xD\nCheck my progress at https://github.com/venomous0x/WhatsAPI/issues/423\nReversing the native code for WhatsApp on Windows Phone is way to difficult. So now I'm looking at the Java code. It's a lot easier to reverse. >.< I don't know why I chose the ARM route.\n. @atans That's the one I just referenced above there. It's broken... that's why I stopped everything I was doing to try and fix the issue. :)\nNot having WhatsApp on my phone really sucks >.<\n. \nI remember this from like... 2005. Nostalgia.\n. As I recall, in their implementation, those events looked only to be fired when you make a status update, and only you. That will explain the ... please wait progress dialog on Android when you make the status update.\nAlrighty.\n. @antonella18 , the official clients disconnects and reconnects very frequently (the server will stop responding after five minutes of receiving packet inactivity). The heartbeat system (ping, pong) doesn't exist anymore. It's been dead for almost a month now. It's now the client's duty to keep the connection well and active =)\n. @antonella18 yes, because you're constantly sending messages to the servers.\nthe server stops replying to you after 5 minutes of receiving inactivity. So, if you send an inactive presence, after 5 minutes of not receiving anything, the server will stop caring about your messages being sent and you will receive absolutely nothing in return (the server won't immediately disconnect you though), and you'll be forced to reauth.\nalso, please consider not using this if it's a spam script. =) Honestly.\n. I have a php script which sends and receives messages in a endless while loop.\nThat part gave me the impression ;)\n. So, if you request more than 100 contacts, than it will return \"not registered\"? This makes no sense.\n. @shirioko , wtf is this commit you made? :O\n. Fuck me. This must have been pre 2.10 that they made this change.\n. Okay. g2 Hangouts. kthanks\n. ",
    "marshall84": "I'm trying to test whatsapp.php too but I can't send a message.\nUsing LoginWithPassword($password) which value of $password I need to use?\nIs this right?\n\n$foo = md5(strrev($imei));\n$w->LoginWithPassword($foo);\n\nPS: how can I post code? Which tags?\n. Ok thank you.\nWhere I can find it? Is stored in my phone?\n. ",
    "douglas218hk": "I have used MissVenom app and want to sniff the password, however, there is no luck on me.\nThis is my steps:\n1. I set the DNS on my phone wifi settings to the computer running MissVenom Proxy.\n2. Go through the Whatsapp register procedure normally.\n3. Whatsapp says I don't have any connection to the internet.\n4. when I fall back the wifi setting to DHCP, the registration success. Of course I failed to get the password then.\nDoes Whatsapp check my Wifi config? If it is manually edited, it will not connect?\nAnyone can help?\n. @shirioko Yes, you are right. I forgot install the server certificate provided in the package. I am sorry, please forgive me. And now, it works perfectly. Thank you very much~!\n. ",
    "clasqui": "@shirioko Have the same problem, so I tried using $w->LoginWithPassword(); instead of $w->Login(); and searching the password with MissVenom, but it doesn't work for me.  I use Whatsapp in an iPhone 4 iOS 6.1.2.  Actually, I can't download the Certificate from cert.whatsapp.net, it gives me a DNS error. So I think MissVenom doesn'n say anything because I don't have the certificate.  What can I do?\n. ",
    "sijie123": "You know what Shirioko, I used your script, keyed in my username and pass, and hey presto, it worked like a charm!\nCurrently I would like to adapt your script for my personal use, would that be fine with you? :)\nThanks!\n. I forgot something, can I retrieve the phone number that sent me the message? I don't really know how to do it though.\n. alright, thanks so much!\n. ",
    "Hamlet007": "Cool\n. ",
    "jay2011": "How do u active an whats app account on git.hub.\nOn 25 May 2013 15:20, \"Pietertje007\" notifications@github.com wrote:\n\nWhat do we know about when a number is blocked by whatsapp?\nI just had a number that was blocked within 2h30m and I only send/received\n38 messages in total. So it's not the message count...\nOn 2 other cards, I thought it happened after trying to send html tags to\nmy phone. But that does not seem correctly. Last one blocked, no html tag\nwas sent. Also other cards have not been blocked and did sent tags with\nthem.\nAn other interesting thing is that blocking seems te happen when you\nlogin. My last blocked number, I succesfully sent a message and when I\nlogged in again, 2 minutes later, it was blocked.\nAmount of logins is also not the case. I have a number that I use a lott\nand it is never blocked. The last one blocked, I logged in, just about 4\ntimes.\nSo basically it seems totally random for me....\nAnyone here to add some ideas about when numbers are blocked?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/358\n.\n. No\nOn 25 May 2013 19:28, \"Max Kovaljov\" notifications@github.com wrote:\nWhat? You don't.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/358#issuecomment-18451783\n.\n. So what is it\nOn 25 May 2013 19:30, \"ANDRE NAIRNE\" andrenairne@googlemail.com wrote:\nNo\nOn 25 May 2013 19:28, \"Max Kovaljov\" notifications@github.com wrote:\n\nWhat? You don't.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/358#issuecomment-18451783\n.\n. \n\n",
    "tstanbur": "Hi all,\nJust started using this and so far, so good - great work to all involved in the dev!\nI'm intending to use this as an SMS replacement for users of my site as it will save a lot in SMS costs so I'm not using it for spamming purposes.\nAs a lot of messages could get sent (3-5 thousand per day) I'm concerned about my account getting blocked so am happy to register 10 + new WhatsApp accounts/numbers to send from using a \"round robin\" approach e.g. send 1 message from each number every minute.\nWould I be OK to register all these new SIM cards/numbers on the same handset first and then use with WhatsAPI ? or would it be better to register all the SIMs on different handsets? is there any detection for this by the WhatsApp servers?\nThanks,\nTom\n. Thanks a lot for the reply @shirioko, I've used WART already so will try that.\nSIM cards are very cheap (in the UK) so I can do some testing to see which approach works best for me.\nIf you don't register using a handset first then what device is associated with the account? the debug information I get back when sending test messages has the name of the phone handset I first registered with.\n. I get this debug info when I send a message\ntx  \u00ea A\u00daxxxxxxxxxxxx\u001eR\u001d\u00e9\u201e\u008d\u00bf\u00ba\u0160\u008fV\u00a7w\u0018\u00c3d\u00c2~\u00c8 1397651451WhatsApp/2.11.209 Android/4.3 Device/GalaxyS3 MccMnc/234001\nWhat would be there if I had used WART and not registered on the handset first ?\n. Ah so the Galaxy S3 is your device?! I'm using one too so assumed it had logged my device!\n. I get it now, the same is shown to everyone - I just registered another number using WART and it shows the same. It confused me as I have the same handset !\nThanks for all your help.\n. OK I get that now, a lot to learn but I'm slowly getting there! thanks!\nHow can I check whether an account/number is active or blocked (before attempting to send a message)?\n. But what response will I get? Is there a way of programmatically checking whether a login is successful? \n\nOn 16 Apr 2014, at 21:11, Max Kovaljov notifications@github.com wrote:\nIf it's blocked you won't be able to log in\n\u2014\nReply to this email directly or view it on GitHub.\n. Hi @ganySA  are your numbers still working ok?\n\nIf so, how did you register them ? on a handset first? and if so the same handset for each SIM ? did you send/receive messages on the native handset WhatsApp before using WhatsAPI?\nSorry for all the questions, I have a very similar setup/purpose to you and want to avoid getting blocked.\nAny advice appreciated.\nThanks,\nTom\n. Hi, thanks for the reply but I don't think this will work as the numbers I am sending to are not in my contacts. \nI want to use this for alerts related to a web application which has 100,000 users and will be sending messages to (up to) 20 users at a time. \nIdeally I want to query using their phone number to see if they have a what's app account or used it?\n\nOn 15 Apr 2014, at 21:59, dacripo notifications@github.com wrote:\nTry to you use the code sync contacts code use to get which contacts have whatsapp. After sync with Google to get contacts you will find the code you need. Good luck!\n*You should know, if you send a wa message to someone who doesn't have wa number registered yet, he will receive it the girst time he register his number installing WhatsApp.\n\u2014\nReply to this email directly or view it on GitHub.\n. thanks to both of you - have just used contactsync.php and it works as I want!\n\nI thought it would only work with contacts for the account I'm logging in with but it works for checking any number.\n. I am just going to check one number at a time. Check the number using contactSync and if exists then send a message to that number. \n\nOn 17 Apr 2014, at 22:09, thed3v1l notifications@github.com wrote:\nHi,\nCan you post the code/function here how you were able to check.\nUsing contactsync for 10,000 would definatelty block you. You can use multiple instances to get out of this.\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "blueslmj": "It's a interesting thing. I also test this. As I know, a message / 30 mins will not be blocked.\n. Hi @shirioko , must I login with password before get the Last Seen time?\n. use contactsync.php\n. you will be blocked if you are checking more than 10k numbers use this sync method.\n. Using contactsync you can check more than 500 numbers at a time, in one login thread.\n. thanks all the same\n. do u use 'contactsync.php' ?\n. i tested it, worked.\n. I found that the whatsapp banned my server's IP for a while.\n. mark\n. it's a random event, retry will be ok.\n. @mgp25 Hi, could you tell us how to send over 1 thousand messages in about 2 minutes without blocked?  thanks a lot!\n. i have the same problem, but it seems like a random issue, try again will be ok\n. the identity in WhatsAPI is generated like this:\n$identity = strtolower(urlencode(sha1($username, false)));\nand the identity is using to request a new password,it is a key that save in whatsapp's server.\nbut in device the identity is generated in other way, so i think it's the reason.\n. @shirioko is there any methods to make the php API faster?  thank you\n. @mgp25 thanks for your replay, you are a kind man:)\nI got the result \"[status] => sent\" but still do not receive the code,  it worked before.\nAnd I try WART, it doesn't work too, i doubt if whatsapp has change something.\n. @mgp25 WART works? \n. @mgp25 it still not work here ... \n. @mgp25 it works now, but sometimes dont work. i think it is some problems in whatsapp's server.\n. i have the same problem, random occurrence. most of time it is OK.\n. @mgp25 It works, thanks man!\n. @mgp25 thanks buddy\n. @mgp25 I send another image, also failed.. is that work for you ?\n. @mgp25 yeah, your's is fine.  my php is : \nphp\n    $msg_of_img = \"clip_image007.jpg\";\n    $identity = strtolower(urlencode(sha1($username, true)));\n    $wa = new WhatsProt($username, $identity, $username, true);\n    $wa->connect();\n    try {\n        $wa->login();\n    } catch (Exception $e){\n        echo \"Login Failure!\";\n        die();\n    }\n    $wa->sendGetRequestLastSeen($phone);\n    $wa->sendGetStatuses($phone);\n    $wa->sendGetProfilePicture($phone);\n    $wa->sendPresenceSubscription($phone);\n    $wa->sendMessageComposing($phone);\n    $wa->sendMessagePaused($phone);\n    $wa->pollMessages();        \n    $wa->sendMessageImage($phone, $msg_of_img);\n    echo \"Messages sent successfully!\\n\";\ndo I miss something?\n. @mgp25 yes, the log seems that the image has been uploaded:\ntx  <iq id=\"upload-1403785860-2\" to=\"s.whatsapp.net\" type=\"set\" xmlns=\"w:m\">\ntx    <media hash=\"Fa+AeZ5EKHk/tF6KgAq7zrsJ9j74YKQWasrors9JTr4=\" type=\"image\" size=\"3786\"></media>\ntx  </iq>\n. @mgp25 @shirioko thanks! I add the following code then it works:\n$wa->waitForMessageReceipt();\nbut, it is too slow... it takes more than 10 seconds to receive :(\n. use checkCredentials() to check numbers\n. checkCredentials() just use to get informations from whatsapp's server, does not affect anything\n. @shirioko now is line 2643 ...\n. @mgp25 Thanks! \nCan I use \"$wa->login();\" instead of \"$wa->loginWithPassword($password);\" ?\n. @mgp25 Which method is mostly like a real phone? \n. @shirioko Got it, thanks!\n. does \"no_routes\" means that your IP is blocked?\n. @mgp25 so how to solve this problem ? I have this problem too.\n. @mgp25 Great to hear that!\n. Thanks! I'll try tonight\n. @mgp25 @Lawgrin  Hi, I use this code, but still return 'no_routes'. I use WhatsAPINet\n. I have the same problem.\n. ",
    "ayushbhat": "same is happening with me and now I am so much annoyed with it\n. ",
    "januslinhc": "@shirioko Succeed, thank you very much! \n. How about Notice: Trying to get property of non-object in \\whatsprot.class.php on line 1055\nNotice: Trying to get property of non-object in whatsprot.class.php on line 1055\nFatal error: Call to a member function asXML() on a non-object in whatsprot.class.php on line 1055\n. @shirioko Ummmmm,,,, If the file is located in the localhost, it need to save in to temp?\n. succeed thank you =)\n. ",
    "RobinMeis": "Thanks for the answer. I tried MissVenom, but when I wanted to import the certificate I got a 500 - Array cannot be null error. Could it be because I didn't enter a password? I was unsure what I had to enter.\n. I'm using Version 1.2.2.0. I've imported and than I got a big error message before, after that this small. Of course I wanted to add them here, so I sent them myself via Email, but I didn't receive anything yet.\n. Ok, that seemed to work. I'll try after I'm back home. By the time, I received the emails with the full error messages.\nThe first contained the following text:\n500 - Could not load file or assembly 'System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Invalid pointer (Exception from HRESULT: 0x80004003 (E_POINTER))\nSystem.IO.FileLoadException: Could not load file or assembly 'System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Invalid pointer (Exception from HRESULT: 0x80004003 (E_POINTER))\nFile name: 'System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' ---> System.ArgumentNullException: Array cannot be null.\n   at System.Reflection.RuntimeAssembly.nLoadImage(Byte[] rawAssembly, Byte[] rawSymbolStore, Evidence evidence, StackCrawlMark& stackMark, Boolean fIntrospection, SecurityContextSource securityContextSource)\n   at System.Reflection.Assembly.Load(Byte[] rawAssembly)\n   at MissVenom.Context.CurrentDomain_AssemblyResolve(Object sender, ResolveEventArgs args)\n   at System.AppDomain.OnAssemblyResolveEvent(RuntimeAssembly assembly, String assemblyFullName)\n   at MissVenom.Form1.onHttpsRequest(Object sender, RequestEventArgs e)\n   at System.EventHandler`1.Invoke(Object sender, TEventArgs e)\n   at HttpServer.HttpListener.OnRequest(Object sender, RequestEventArgs e)\nThe second, and after that always shown containes the following:\n500 - Array cannot be null.\nSystem.ArgumentNullException: Array cannot be null.\n   at MissVenom.Form1.onHttpsRequest(Object sender, RequestEventArgs e)\n   at System.EventHandler`1.Invoke(Object sender, TEventArgs e)\n   at HttpServer.HttpListener.OnRequest(Object sender, RequestEventArgs e)\n. Okay, after installing .NET 4.5 I got all the required information but I still have some trouble with sending messages. My request is succesfully verified by whatsapp, so I can see paid, cost, etc. But sending a message seams to make some problems and I acutally don't know why because I already the information on top.\nI get the following error:\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in whatsprot.class.php:1633 Stack trace: #0 EXAMPLES-iphone.php(50): WhatsProt->requestCode('sms', 'ZZ', 'de') #1 {main} thrown in /var/web/internal/testebene/htdocs/whatsapp/new-by-shirioko/whatsprot.class.php on line 1633 \nI also thought that it could be caused the country code, but this was also used by MissVenom and I could succesfully use the given URL. After changing the useragent, I saw that there is also a constant for token. Is it possible that I'm using the wrong token, and if yes, how to generate?\n. Thank you for your patience with me ;). I used the example so I thought that there is only the one solution. But I have still one (last) problem. Trying to send a message with $w->Message($destinationPhone, 'This is an example!'); has no succes. Of course I already read that I have to check this with $w->WaitforReceipt(); but then I get a timeout by php and also don't receive anything:\ntx tx tx tx tx rx rx rx rx rx rx \u001e\u00a3\u00ccK\u2021\u00ee\u00ad\u00fb \u0007\u00a7\fd\u00d8\u02c6\u00dc\u00d0\u2122\u017eG tx \u017d7\u0081,\u00ac\u00d3\u2022\u00f9\u00b6B\u00dfn\u00eeL\u00dc9\u00ebt%< \u0153\u00f2\u00de\u00d7\u00cd\u00f3\u001f\u00f0p\u00e1\u00bbVn^?\u00b5\u2122\u00ca\u00b4\u00a6\u00f68\u00f7\u00c7; rx rx rx tx tx tx tx tx tx tx tx This is an example! tx Fatal error: Maximum execution time of 30 seconds exceeded in /var/web/internal/testebene/htdocs/whatsapp/new-by-shirioko/whatsprot.class.php on line 769 \n. Ok, but with or without I do not receive anything from the script. I get the following output:\ntx tx tx tx tx rx rx rx rx rx rx K\u00c2!H\u00d3\u00d1\u00da\u00f6'\u00d3\u00f2{\u00ec\u008d\u00c2F6n\u00c0 tx H\u0192\u001c>\u2022\u00d3\u00db\u00a2\u00e2[\u00c1\u00e2\u00ea\u00f5\u00b20x|\u201aV/\u00dd\u00ea;\u00c0-\u00b4\u00fc\u201etI\u2039\u00c1\u000b\u0090)\u00ad\u00a3\u00bd\u00b7\u00b7\u007f\u00d9\u0192\u0192 rx rx rx tx tx tx tx tx tx tx tx This is a Test! tx\nEdit: This is my script:\n$userPhone        = '49xxxxxxxxxx';       # Telephone number including the country code without '+' or '00'.\n$password = \"from MissVenom\"; # This is tipically the IMEI number.\n                                            # If you are using an iOS device you should input your WLAN MAC address.\n$userIdentity = \"Mac Adress twice (xx:xx:xx:xx:xx:xxxx:xx:xx:xx:xx:xx)\";\n$userName         = 'My Name';          # This is the username displayed by WhatsApp clients.\n$destinationPhone = '49xxxxxxxxxx';       # Destination telephone number including the country code without '+' or '00'.\n                                         # For groups: [phone number]-[group id].\n$debug = TRUE;\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);//'pw' from Missvenom\n$w->Message($destinationPhone, 'This is a Test!');\n$w->PollMessages();\nEdit2: I also changed the useagent to WhatsApp/2.8.7 iPhone_OS/6.1.3 Device/iPhone_4 and the password to the string given by MissVenom\nEdit3: Using PHP-Cli I detected that there is one more authentication error. I foundthe following part:\nxml\nrx  <failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\nrx    <not-authorized></not-authorized>\nrx  </failure>\nBut not sure if this is a real error because the  area is empty.\n. Ok, I formated the xml. I'll try the checkbox now\n. It seemes to work! The solution was just a tiny checkbox argggrr. Maybe it would be easier in the future if there would be a popup toolbox on hovering the checkbox or something which contains this information.\nWhen a few of my friends would be awake I could try but at the moment, when I send it to myself the php script receives the message and it isn't send to my iphone. I will reply later.\n. Okay. Thanks for your replies. Now it works. I promise to write an English and a German tutorial in the next weeks. For noobs like me ;)\n. \\n\n. Thank you, that works. But now I'm looking for a way to get the group participants. I found the function sendGetGroupsParticipants put I don't know how to use it.\n. That is exactly what I tried but it doesn't work. As group id I used the same id that also worked for add a participant. It semes that the callback is never fired.\n. That also doesn't work. In debugging mode I receive the amount of members but not the phone numbers or names:\n<message from=\"my-phone-number\"-\"my-group-id\"@g.us\" id=\"message-1382607922-2\" type=\"chat\" t=\"1382607923\">\n  <x xmlns=\"jabber:x:event\" count=\"3\">\n    <id>message-1382607922-2</id>\n    <server></server>\n  </x>\n</message>\nThe value behind count changes definitely by adding or removing members.\n. I downloaded it yesterday, so I think yes.\n. Hey shirioko,\nwere you able to reproduce my problem?\n. ",
    "discodivega": "i don't use wamps.. i have installed php in a folder\nshould i modify php.ini file? thank you\n. i have lots of errors ... http://s12.postimg.org/sw98360tp/Cattura.png\nshould i have to install wamps? thankyou! :+1: \n. ok intalled but now windows doesn't recognize the php of wamp\nhttp://postimg.org/image/n2m5vo81p/\ni have added this\nhttp://postimg.org/image/9m5aiqaab/  but still doesn't work\nhow can i use wamp's php?\n. i didn't delete \"php\" in the path now i'm going to restart the pc!\n. oh my god same error:\nhttp://postimg.org/image/a0ux1sjwx/\nbut i have do what you say:\nhttp://postimg.org/image/c73yrt1vr/\nthank you for the patience\n. yes, done it now but same results.. :-1: \n. sorry for the delay\ni downloaded your fork and now i have a new type of error:\nhttp://postimg.org/image/v40xupig9/\n. ",
    "aborche": "where ? :)\n. oooops :) sorry \n. ",
    "Mittchel": "@shirioko  I actually forked yours mate. The .NET version doesn't work for me either.. By the way if you're creating an iOS app which integrates WhatsApp functionality is this considered illegal? \n. @shirioko I'm currently at work, so I've to hold you on the ping question. \nAbout the amount of traffic.. is it possible to create a serious messenger app for WhatsApp or do you think the amount of load/traffic you are eligible to is too low to create such an app? \nAre you limited in the amount of messages per minute or how is the load controlled?\n. Sounds great. @shirioko thanks for the help and heads up.. appreciate your help and fast responses. I might have an idea which I would like to address you with. Would you mind if I send you a e-mail so you can give your opinion on the idea? \n. Done! Sent the e-mail in dutch though.\n. ",
    "Terrorhawk": "i think its per device.\nhttp://i.imgur.com/2fDqO.jpg\nHere is a link to the emoji of ios6\n. what i dont get is:\ni recieve this (well it printen in the shell) \u00ee\u0081\u0161\nthis sould be the pile of poo emoji (1F4A9) \nBut how to get from those 2 chart to that Unified code ?\n. Ok going to test it tomorrow.\nThnx.\n. getting is not the problem. but its encrypted some how,\n. ",
    "enricop": "@atans Hi. I've also been blocked for sending messages to too many contacts. Could you confirm you got unblocked automatically after two months? In these two months have you retried logging in again? Thank you\n. ",
    "adiie9": "And how do I get that? checkCredentials() returned id??\n. For new number registration I did this..\n$userPhone        = '92#########';       # Telephone number including the country code without '+' or '00'.\n$userIdentity     = md5(strrev($imei)); # This is tipically the IMEI number.\n                                        # If you are using an iOS device you should input your WLAN MAC address.\n$userName         = 'TEST';          # This is the username displayed by WhatsApp clients.\n$destinationPhone = '92##########';       # Destination telephone number including the country code without '+' or '00'.\n                                         # For groups: [phone number]-[group id].\n$debug = TRUE;\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->requestCode('sms', 'PK', 'en');\nand dumped response...\n{\"status\":\"sent\",\"length\":6,\"method\":\"sms\",\"retry_after\":10805}\nBut I am not receiving any SMS from whatsApp --\n. lol okay boss ;) thanks.. I will try this one now _thumbsup\n. I agree.. I read most of the issues and trying everything since last 12hours and I had a doubt that files are quite old that is why I posted this issue.\nJust downloaded your repo and will test it out in a while.\nThanks by the way. I might PING you again if I will stuck :p \n. @shirioko Woot Woot xD Working ;) thanks alot \n. lol :p \n. ",
    "shermund": "sorry if i didnt make myself clear, its the first time i try to work on this api.\ni used the code received from the sms, which is a 6 digits code.\ni am running the tests/whatsapp.php as well. \nthe $w variable seemed to be in the examples.php which sorta sent in a request for code over and over again.\ni also tried to work on the /src/php/whatsapp.php but editing the $config which is a dead end for me as well.\ni really have no idea what i am doing at the moment.\n. Sorry Shirioko, i have tried it multiple times for the past 5 hours\nI kept getting this error using both cmd and browser.\nPHP Warning:  array_key_exists() expects parameter 2 to be array, boolean given in C:\\inetpub\\wwwroot\\WhatsAPI\\src\\php\\testprotocol.php on line 5\nPHP Warning:  array_key_exists() expects parameter 2 to be array, boolean given in C:\\inetpub\\wwwroot\\WhatsAPI\\src\\php\\testprotocol.php on line 5\nPHP Fatal error:  Call to undefined function imagecreatefromjpeg() in C:\\inetpub\\wwwroot\\WhatsAPI\\src\\php\\func.php on line 44\ni am not sure where went wrong.\n. ",
    "elperla": "I have root acces to my phone it's not a problem, I normally use superSU. where is located this \"settings\" file?\n. I use android. not wp7\n. I'm noob, I just start read and looking for info about your project. But I was thinking the better way to get the password is looking inside the phone. That's why I start this threat. Now I know tha WP7 is windows phone 7.\n. Ok thanks a lot. please be patient with me.\n. ",
    "Manuelm88": "I think in Android, the password is in: /data/data/com.whatsapp/files/pw anyhow it has some encryption, don't know which so it is kind of hard to decrypt. Also, it will be nice to know how that password is generated, I think it very related with the md5 of the IMEI and maybe adding with the sms (which i think is kind of a random 4 digit number) or that number is the salt or something...\nHope someone have found the way to break /data/data/com.whatsapp/files/pw cause I want to use the API... thanks!\n. ",
    "robefernandez": "I hope it would be helpful for you: blog-robefernandez.blogspot.com.es/2012/11/know-your-whatsapp-password-on-windows.html\n. @jonnywilliamson Yes, I know it. I'll try to get time and look the current version 2.10.523\n. Thank you both! \nSo it's too early to know for sure what happens. \n. This issue is currently discussing in other threads. It is better not to create new threads for the same topic.\nhttps://github.com/venomous0x/WhatsAPI/issues/421\nhttps://github.com/venomous0x/WhatsAPI/issues/422\nhttps://github.com/venomous0x/WhatsAPI/issues/425\n. ",
    "VivekBansal": "I tried it on android & first two steps works for me(code requesting & registration).\nBut now i am stuck on making connection with whatsapp through XMPP.\nPlease give any solution.\n. Below is my code for android to connect with WhatsApp through XMPP after getting password successfully :-\nConnectionConfiguration connConfig = new ConnectionConfiguration(\"c.whatsapp.net\", 5222, \"Android-2.10.750-5222\");\nconnConfig.setTruststoreType(\"BKS\");\nString path = System.getProperty(\"javax.net.ssl.trustStore\");\nif (path == null)\n         path = System.getProperty(\"java.home\") + File.separator + \"etc\" + File.separator + \"security\" + File.separator  + \"cacerts.bks\";\nconnConfig.setTruststorePath(path);\nXMPPConnection connection = new XMPPConnection(connConfig);\nconnection.connect();\n. I am also getting the same response....if anyone has the solution,then please tell suggest us.\n. Yes I am trying to connect to WhatsApp using standard XMPP.\nCan you tell me, where i am going wrong ?\nsorry for bad english\n. ",
    "Denyse": "Hello someone can explain to me how I can use WhatsApp Web Client? After finding the password calculating it by applying the algorithm md5 Hash code imei and the phone number, I would like to know which are the following passages? someone can tell me if you can see messages to the output and the responses to them? thanks\n. ",
    "CuBiC3D": "php\n...\n$wa->SendPresenceSubscription($target);\n$wa->PollMessages();\n$buff = $wa->GetMessages();\nif (!empty($buff)) {\n    print_r($buff);\n}\n...\nI get no answer from the server. Is this the right usage method?\n. > Using SendPresenceSubscription when your target is already online will immediately send you a presence node:\n\nrx <presence from=\"3162*******@s.whatsapp.net\" type=\"available\"></presence>\n\nThis is exactly what I want to receive. But after sending SendPresenceSubscription to an available target number, I can't get any answer using PollMessages and GetMessages. The receive buffer is empty. With debug set to true, i just get tx rx\n. Thank you shirioko, works now.\n. ",
    "casparbanis": "I mean the number I use to login. I think whatsapp needs a phone number and password to login. I am not sure in which file I have to put them to get the ajaxDemo working. When I open de index.php file my messages are not delivered nor do I reseive messages\n.\n. Okay found it. In the socket.php file a username and password can be entered. I mixed up the username with the nickname. So now I just filled in my phone number for the username and done! Working like a charm!\n. Thanks for the quick response! I will not use my official number.\n. ",
    "elwin0214": "I can not  access the link https://cert.whatsapp.net after starting  MissVenom.exe,so i choose another way.\n. When i change the DNS address of the static IP ,it seem that it does  not work,the address  will be reset as blank space.\nSo i change the DNS address of DHCP directly for this ,and i can not access the link.\n. IOS\n. Thank you!\nIt  still does not work.The process is very slow and prompt \"could not open the page\".\nAnd the DNS address of DHCP will become same as that of static.\nI attach 2 pictures.\n\n\nThe IP address got by MissVenom is 10.249.244.182,and i can access other websites.\n. Started DNS proxy...\nSSL proxy started\nListening...\nSet your DNS address on your phone to 10.249.244.182 (Settings->WiFi->Static IP->DNS) and go to https://cert.whatsapp.net in your phone's browser to install the root certificate\nI think there is something wrong in accessing the DNS proxy,so it does not work.\n. If I clear away the DNS IP,it prompt \"invalid host name or IP address.\"  when using ping.\nIf i add the DNS IP,it access 10.249.244.182.It can access the DNS proxy successfully.\n. I have done this work at our company before.\nI did this work at home right now,a different network,I could send message suesfully.\nThank u very much.\nI will continue to do this to resovle the problem at company tommrow .\n. Ok,I can access the link( https://cert.whatsapp.net )successfully today.\n. I want to sniff the TCP data by the guide(https://github.com/shirioko/MissVenom)\nLaunch MissVenom.exe\nEnter the device password, click the checkbox on the left and press Start\nFor the step 2,i am not clear about how to do the operation,because there are not the corresponding input&check box in the MissVenom.\n. I get some encoded logs(e.g.\"gABWX5VzikFJ/iUEghhevGxviJhoIVrQTRRr/xA2eWxwnecrkDjiWfKTP1xGzi8UiTItCV2m6MpzS6KLYXmYfTCpHhtQ2MQLTBfzr3nOVxgtmaMLPBP80kU=\").\nIt can be decoded by BASE64,but the result is not readable.Is the  data package encrypted?\n. @shirioko  I had a try to send SMS code in this issue by this.\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$w->requestCode();\nBut i did not receive the code regardless whether the phone number was registered.\nBTW,I can reset the password by visiting the link (https://v.whatsapp.net/v2/exist?cc=xx&in=xx&id=xx&lg=xx&lc=xx),but i do not know how to generate the parameter \"id\".\n. @shirioko  Yes ,i had a try,and i can get the password by the code and the password is valid.\nBut i have a question.the param \"id\" got by the code is not the same as sinffed  by  MissVenom before.\nThe log of code getting password\uff1a\n [cc] => 86\n [in] => xxx\n [to] => 86xxx\n [lg] => en\n [lc] => CN\n [method] => sms\n [mcc] => 460\n [mnc] => 001\n [token] => 799cac66d677bc5490bad38f007d82d9\n [id] => %3bf%a7%fb%07g%c8%b3y%83%0e%9a%aa0+u%7e%df%2a%e1\nThe log of MissVenom(sinff before)\uff1a\nhttps://v.whatsapp.net/v2/exist?cc=86&in=xx&id=%18%D3%34%B5%6F%61%40%B5%93%D4%42%19%6F%B5%33%01&lg=zh&lc=CN\n. I see,Your expression is so strict.\nThanks very much.\n. ",
    "yoavavram": "hey,im trying to use missvenom but its sends a \"socket error\"..(im using windows,nexsus 4 android 4.4.4 kitkat),can you plese help me?\n. ",
    "fjrmaulana": "am i late getting whatsappApi. ",
    "nachourpi": "Oh nice seems like you guys already though in everything! good job!\nWell now i was just wondering if I neccesary had to call the PollMessages function in order to get the callback functions called whenever an event occurs.\nThanks!\n. ",
    "8DigitalStaging": "the AjaxDemo does not send out messages. Even if I set the time_limit to 10 so that session lock doesnt interfere. I am still baffled how to SAFELY keep the script online forever without logging you out or script stopping execution.... \n. Well? What is the best way to stop it from stopping, and have the bot running forever?  set_time_limit(0) and change php max_execution time to 0?\n. How do you set up sendPresence? I havent come across that function yet...\n. Thanks. So would I need to run the function every so often? I am guessing that this function needs to keep being called every now and again....\n. @cahrlesokwuagwu before you gallop off into the sunset....could you share where you \"seen\" it. Thanks!\n. I am but a link to the exact one would be so much quicker.....\n. for all those who come here searching\nhttps://github.com/perezdidac/WhatsAPINet/issues/116\n. But still all that code is .net Is there no simple solution in PHP? keepAlive() function or something? This is the last peice to my puzzle and is vital for my project to work. \n. Thanks. The .net version is calling SendGetPrivacySettings() which does not exist in the PHP version. I am assuming I can use any sendget function desired just to keep server communication open?\n. Thanks. Testing the threading I have extended processnode function with thread and now it throws an error on the class saying class not found.  Fatal error: Class 'ProcessNode' not found\n. Can this class not be extended to use threading?\n. trying to use pthread\n. How else could you do it without using threading?\nYour example in .net uses threads\n. Thanks for all your help. Much appreciated! Now I get this error\n notice: fwrite(): send of 12 bytes failed with errno=32\nAnd the script stops. Could it be my php max exec time timing out? Not sure why this is. I have tried using sendPresence to get rid of the stream:error error, tried to use sendPong but still its stopping with the notice above.\nAny Ideas?\n. Never mind. Figured it out. Sorted. Thanks.\n. ",
    "transonly": "Well, i'm having great difficulty to keep the script running. In my situation the script listens for $_POST that it receives through an ajax-call like so:\n<?php\nset_time_limit(0); \n$destinationPhone = $_POST['target'];\n$message =  $_POST['message'];\ndate_default_timezone_set('Europe/Amsterdam');\n$w = new WhatsProt($userPhone, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetImage\", \"GetImage\");\n$w->connect();\n$w->LoginWithPassword($password);\nif(isset($destinationPhone)) {\n$w->sendSetProfilePicture(\"ToWa.jpg\");\n$w->sendMessage($destinationPhone, $message);\n}\nwhile (true) {\n    while($w->pollMessage());\n $w->getMessages();\n}\nfunction GetImage($mynumber, $from, $id, $type, $time, $name, $size, $url, $file, $mimetype, $filehash, $width, $height, $preview){\n//some imageprocessing\n}\n?>\nThe script responds well to the ajaxcall but eventually it does NOT respond anymore to the onGetImage function when someone sends a photo.\nCan you help me with that?\n. Allredy solved it by sending dummy message every minute via nodejs server i've running.\n. ",
    "doadam2": "yeah I already managed to do that on my original iPhone. thanks anyway!\nSo just to clear up things, the $token is simply a constant identifier for your phone? (which has nothing to do with your IMEI or you MAC Address)\n. Hey,\nI updated to the latest code. However, when I try to get a code to my phone (iPhone 4) I don't receive any.\nI also tried the voice method, it said something about routing (no route, or something like that) and when trying the old phone\\landline number I also don't get any call\\sms.\non my iPhone 4 it said that the code has been sent but I didn't receive it...\nI'm using the original code from EXAMPLE.php.\nEDIT: tested on another phone, it says that the SMS has been sent but nothing's received. when trying the voice method this is what I get:\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in /*****_/whatsprot.class.php:296\nStack trace:\n0 /_**/src/php/EXAMPLES.php(62): WhatsProt->codeRequest('voice')\n. tested on another 3 phones. SMS is not received, then when I try the voice request I get \nstdClass Object\n(\n    [status] => fail\n    [reason] => no_routes\n    [retry_after] => 3600\n)\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in /**/WhatsAPI/src/php/whatsprot.class.php:296\nEDIT: now tested on another phone, when trying voice without trying sms before, it does call me. but I don't receive any SMS from WhatsApp. and now on another phone (The fifth one!), and again received the \"no routes\" and voice failed.\n. $identity = strtolower(urlencode(sha1($username, true)));\n. it worked 1 of out 6 times for me. try it on another phone..\nby the way, if it doesn't work properly on WP7, why don't you switch back to Android?\n. I tested on couple of more phones. SMS is received but other than I myself, no one of my friends received a phone call (but some of them did receive SMS text).\n[code]\nAdams-Mac-mini:WhatsAPI adam$ git show\ncommit 74223c1633cc9d664e6bee7d34f419aa1073a6b5\nAuthor: Max Kovaljov shirioko@gmail.com\nDate:   Thu Jul 11 11:21:21 2013 +0200\n```\nMoved back to WP7 client details\nAlso modified code request to match query string sent by WP7 client\nI WILL MAKE THIS WORK!!1! D:<\n```\ndiff --git a/src/php/whatsprot.class.php b/src/php/whatsprot.class.php\nindex 8d16c86..a8fc8f9 100644\n--- a/src/php/whatsprot.class.php\n+++ b/src/php/whatsprot.class.php\n@@ -22,10 +22,10 @@ class WhatsProt\n     const WHATSAPP_REQUEST_HOST = 'v.whatsapp.net/v2/code';      // The request\n     const WHATSAPP_SERVER = 's.whatsapp.net';               // The hostname use\n     const WHATSAPP_UPLOAD_HOST = 'https://mms.whatsapp.net/client/iphone/upload\n-    const WHATSAPP_DEVICE = 'Android';                      // The device name.\n-    const WHATSAPP_VER = '2.10.750';                        // The WhatsApp ver\n-    const WHATSAPP_TOKEN = '30820332308202f0a00302010202044c2536a4300b06072a864\n-    const WHATSAPP_USER_AGENT = 'WhatsApp/2.10.750 Android/4.2.1 Device/GalaxyS\n-    const WHATSAPP_DEVICE = 'WP7';                      // The device name.\n-    const WHATSAPP_VER = '2.9.4';                        // The WhatsApp versio\n[/code]\n. ",
    "divyanshunegi": "I am trying to use the API today , after whatsapp new updates and i cant figure out how to get the password , as Whatsapp has blocked all there previous methods\n. Thanks , I have gone through it , I am using MAC OS and its a .exe file \n. I tried in a Window machine , I got the password , but when i am trying to open whatsapp.php and trying to connect it says Password is wrong\n. ",
    "Tonwatai": "Hi, I have the password using WART, how do we get the ID? Thanks\n. ",
    "tomtoxxx": "Hi Shirioko. Great job with this api buddy. Quick question I have my password but as you say id is not important, I have a defaut value there. and my call is $w = new WhatsProt($username, 123456789, \"WhatsHapnin\", true);\nProblem: I can receivee mmesssages to the  ajaxDemo from mmy phone, but I cannot sen messages .....WTF!!!!???? Wha does that mean?\nI have set default to true but I am not gettin any debug info in my browser(firefox).....\nWhat am I mising???? Been stuck here for days now. Please help!!!!!\n. Yeah Im using a wireless keyboard and baterryrunning out. Thanks for that\nSo why does it refuse to send when I am receiving? Can I receive if I am blocked?\n. I just did and refresh on ajaxDemo but its still not showing debug info on the  page\n. I am at an absolute loss as to what is happening :(\n. Okay I changed it to 30 secs anndI am now receivng mmesssages and senddign! But still no dbug inffo :(\n. But doesnt a shorter time limit prompt quick blocking from whatsapp server?\n. Perhaps the no send problem problem is a caching problem?\n. Ok Thanks. Soo why does it send better when the time limit is reduced?\n. What are the problems with setting a low time limit?\n. ",
    "malmalakh": "@shirioko ... many thanks for the good efforts ... I am trying to test refreshing the password using the following code ... but without any success ... kindly; please check:\n$username = \"your phone number including country code\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->checkCredentials();\n$password = $result->accountInfo['pw'];\necho \"Password is $password\";\n. Hi ...\nThanks for the reply.  Actually, there is no output at all, I just want the correct php code\nRegards.\nOn Oct 16, 2014 1:22 AM, mgp25 notifications@github.com wrote:\nHi, the WhatsAPI project is being supported here: https://github.com/mgp25/WhatsAPI-Official\nWhat's the debug output?\nAlso, make sure you use the same identity you used to register the number.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/401#issuecomment-59286490\n. @mgp25 ...please check my last comment\n. @mgp25 ... thank you ... but it did not show the new password ... only \"Password is\" ... while when I check using WART then the result is successful\n. @mgp25  ... this is the error I am getting ...\nArray ( [cc] => 1 [in] => phone# [id] => %d3%cd%3f%2c%f5%01%0d%85k%2bae%1a%d3w%ec%fb+%e2q [c] => cookie ) stdClass Object ( [status] => fail [reason] => incorrect [sms_length] => 6 [voice_length] => 6 )\nAny advice ?\nused code:\n\ufeff<?php\nrequire_once('./src/whatsprot.class.php');\n$username = \"phone#\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->checkCredentials();\n$password = $result->pw;\necho \"Password is $password\";\n?>\n. @mgp25  ... I did .. I changed the identity to the same generated one, and still the same problem\n. @mgp25 ... yes ... I found it ... thank you.  the problem with in the md5($username) ... I am sure there is a way to change the md5($username)  to something matching WART.\n. hello every one ... i just want to make sure the following is correct since message marked as sent but not received on mobile target ... please advice:\n$w = new WhatsProt($phone, $identity, $nickname, true);\n$result = $w->checkCredentials();\n$password = $result->pw;\n$w = new WhatsProt($phone, $identity, $nickname, false);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->sendPresenceSubscription($target);\n$w->pollMessages();\n$w->sendMessageComposing(trim($target);\n$w->pollMessages();\n$w->sendMessagePaused(trim($target);\n$w->sendMessage($target, $msg);\n. I believe the new WART has a problem ... it does not generate a new password.\n. @mgp25 ... thank you ... but it did not show the new password ... only \"Password is\" ... while when I check using WART then the result is successful\n. @eliasjnior ... I have fixed the error, but now I am facing another challange, how to check if the target has a valid number or not before sending the message.  they call this spam while the message I am sending is for a number that is in my contact list\n. @eliasjnior  ... no sir ... I am building a website (video sharing) and I am giving the option to send the video link through WhatsApp, while the visitor want to share the link, I have first to check if the target number is valid or not.  and not to lose the sending number and get blocked.\nThank you in advance. :)\n. @eliasjnior ... appreciated.  Many thanks.\n. ",
    "NakulSharmaIt": "Hi... All,\nI am not able to receive request code.\nAnd in exampleRequest.php, I am using following code:\n$username = \"918010201735\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"HDINT\", true);\n$w->codeRequest();\n--------------------------exampleRequest.php ends here and should send a message to my number-----------\nExecution Result display: \nArray\n(\n    [method] => sms\n    [in] => 8010201735\n    [cc] => 91\n    [id] => %d3%a6%5c3r%b1%e2%ee%1f%db%cb%17%c3rs%b0%1c%bc%11%d5\n    [lg] => hi\n    [lc] => IN\n    [token] => wa8F5qkL8bdGtxuuagmLDxf%2Bo2Y%3D\n    [sim_mcc] => 000\n    [sim_mnc] => 000\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => old_version\n)\n\nNo Message i got.\nPlease help me friends as i have been searching on this from 2 days.\n. Dear All...\nIs it necessary to put sim inside the mobile phone while registering/requesting for code via sms/call because while requesting for code it is showing :\nBy Wart:\nSMS: {status:fail, reason: no_routes, retry_after: 3600}\nVoice: {status:fail, reason: no_routes, retry_after: 3600}\n& By exampleRegister.php\nArray\n(\n[in] => 8010202508\n[cc] => 91\n[id] => %93%c6%7f%38%a5%c2%4b%02%a0%d8%9e%54%c8%e0%6f%5a\n[lg] => hi\n[lc] => IN\n[mcc] => 000\n[mnc] => 000\n[sim_mcc] => 404\n[sim_mnc] => 000\n[method] => sms\n[reason] => self-send-jailbroken\n[token] => elT4fXmNLXnunctHOv%2BZdkVWI4o%3D\n[network_radio_type] => 1\n)\nstdClass Object\n(\n[status] => fail\n[reason] => no_routes\n[retry_after] => 3600\n)\nSo i have to change sim every time & it is very tough to put sim inside phone every time.\nSo help me in both case:\n1. no_routes\n2. Sim in side mobile or not\n. Dear @shirioko,\nWhile i am registering my number using exampleRegister.php\nIt is showing \nArray ( [method] => sms [in] => 8010201735 [cc] => 91 [id] => %d3%a6%5c3r%b1%e2%ee%1f%db%cb%17%c3rs%b0%1c%bc%11%d5 [lg] => hi [lc] => IN [token] => wa8F5qkL8bdGtxuuagmLDxf%2Bo2Y%3D [sim_mcc] => 000 [sim_mnc] => 000 ) stdClass Object ( [status] => fail [reason] => old_version )\nAnd i didn't get any code to my mobile.\nPlease help me.\n. @jessereitsma thanks.\nI got new api and that is working fine for me.\nBut while registering a number it depends on the mobile network because at one day i did register my number successfully but on next day i am not able to do so and it consistently showing no_routes.\n. Dear All...\nIs it necessary to put sim inside the mobile phone while registering/requesting for code via sms/call because while requesting for code it is showing :\nBy Wart:\nSMS: {status:fail, reason: no_routes, retry_after: 3600}\nVoice: {status:fail, reason: no_routes, retry_after: 3600}\n& By exampleRegister.php\nArray\n(\n[in] => 8010202508\n[cc] => 91\n[id] => %93%c6%7f%38%a5%c2%4b%02%a0%d8%9e%54%c8%e0%6f%5a\n[lg] => hi\n[lc] => IN\n[mcc] => 000\n[mnc] => 000\n[sim_mcc] => 404\n[sim_mnc] => 000\n[method] => sms\n[reason] => self-send-jailbroken\n[token] => elT4fXmNLXnunctHOv%2BZdkVWI4o%3D\n[network_radio_type] => 1\n)\nstdClass Object\n(\n[status] => fail\n[reason] => no_routes\n[retry_after] => 3600\n)\nSo i have to change sim every time & it is very tough to put sim inside phone every time.\nSo help me in both case:\n1. no_routes\n2. Sim in side mobile or not\n. Hi... All,\nI am not able to receive request code.\nAnd in exampleRequest.php, I am using following code:\n$username = \"918010201735\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"HDINT\", true);\n$w->codeRequest();\n--------------------------exampleRequest.php ends here and should send a message to my number-----------\nExecution Result display: \nArray\n(\n    [method] => sms\n    [in] => 8010201735\n    [cc] => 91\n    [id] => %d3%a6%5c3r%b1%e2%ee%1f%db%cb%17%c3rs%b0%1c%bc%11%d5\n    [lg] => hi\n    [lc] => IN\n    [token] => wa8F5qkL8bdGtxuuagmLDxf%2Bo2Y%3D\n    [sim_mcc] => 000\n    [sim_mnc] => 000\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => old_version\n)\n\nNo Message i got.\nPlease help me friends as i have been searching on this from 2 days.\n. Dear MGP25,\nFirstly thanks for helping me.\nNow i am using https://github.com/mgp25/WhatsAPI-Official\nAnd I have done following change in exampleRegister.php\n$debug = true;\n$nickname = 'NEWTON';\n$username = '918010201340'; \n$identity = strtolower(urlencode(sha1($username, true)));\necho \"\";\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\n//$w->codeRegister('123456');   // commented\nAnd I didn't get any message.\noutput i got is:\nArray\n(\n    [in] => 8010201340\n    [cc] => 91\n    [id] => %6b%af%9e%29%a9%4a%7d%ba%d9%e6%7a%cb%7d%22%d8%5b\n    [lg] => hi\n    [lc] => IN\n    [mcc] => 000\n    [mnc] => 000\n    [sim_mcc] => 404\n    [sim_mnc] => 000\n    [method] => sms\n    [reason] => self-send-jailbroken\n    [token] => EQdPYwC1me2y2bOMVpvu7vV1IRo%3D\n    [network_radio_type] => 1\n)\nstdClass Object\n(\n    [status] => sent\n    [length] => 6\n    [method] => sms\n    [retry_after] => 25205\n)\nPlease help me.\n. Dear All...\nIs it necessary to put sim inside the mobile phone while registering/requesting for code via sms/call because while requesting for code it is showing : \nBy Wart:\nSMS: {status:fail, reason: no_routes, retry_after: 3600}\nVoice: {status:fail, reason: no_routes, retry_after: 3600}\n& By exampleRegister.php\nArray\n(\n    [in] => 8010202508\n    [cc] => 91\n    [id] => %93%c6%7f%38%a5%c2%4b%02%a0%d8%9e%54%c8%e0%6f%5a\n    [lg] => hi\n    [lc] => IN\n    [mcc] => 000\n    [mnc] => 000\n    [sim_mcc] => 404\n    [sim_mnc] => 000\n    [method] => sms\n    [reason] => self-send-jailbroken\n    [token] => elT4fXmNLXnunctHOv%2BZdkVWI4o%3D\n    [network_radio_type] => 1\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => no_routes\n    [retry_after] => 3600\n)\nSo i have to change sim every time & it is very tough to put sim inside phone every time.\nSo help me in both case:\n1. no_routes\n2. Sim in side mobile or not\n. Dear All...\nIs it necessary to put sim inside the mobile phone while registering/requesting for code via sms/call because while requesting for code it is showing :\nBy Wart:\nSMS: {status:fail, reason: no_routes, retry_after: 3600}\nVoice: {status:fail, reason: no_routes, retry_after: 3600}\n& By exampleRegister.php\nArray\n(\n[in] => 8010202508\n[cc] => 91\n[id] => %93%c6%7f%38%a5%c2%4b%02%a0%d8%9e%54%c8%e0%6f%5a\n[lg] => hi\n[lc] => IN\n[mcc] => 000\n[mnc] => 000\n[sim_mcc] => 404\n[sim_mnc] => 000\n[method] => sms\n[reason] => self-send-jailbroken\n[token] => elT4fXmNLXnunctHOv%2BZdkVWI4o%3D\n[network_radio_type] => 1\n)\nstdClass Object\n(\n[status] => fail\n[reason] => no_routes\n[retry_after] => 3600\n)\nSo i have to change sim every time & it is very tough to put sim inside phone every time.\nSo help me in both case:\n1. no_routes\n2. Sim in side mobile or not\n. Dear MGP25 \nI have sent a email to you at \nme@mgp25.com\nplease revert me back..\n. ",
    "ayuvahcl": "i tried registering but showing no_routes.............Please help\n. ",
    "grifter-yo": "Hi\nI am new to all kinds of coding and trying to learn through examples.\nI want to make a software where I can send Whatsapp messages through a user interface\n(so all those things like a textbox to write the messages, creating lists of contacts etc.)\nIs there a way I can achieve that using this API and its php code?\nAny help or advice would be appreciated, since I am at zero.\nThanks. Hi\nI am new to all kinds of coding and trying to learn through examples.\nI want to make a software where I can send Whatsapp messages through a user interface\n(so all those things like a textbox to write the messages, creating lists of contacts etc.)\nIs there a way I can achieve that using this API and its php code?\nAny help or advice would be appreciated, since I am at zero.\nThanks. ",
    "rox85": "It works properly. Thank's\n. The function are changed from the #401 . \nThe new working code that I tried few minutes ago searching by the other recent posts is the following:\nPhase 1: request code\n$username = \"phone number with international  prefix but without + and 00\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"Dani\", true);\n$w->codeRequest();\nPhase 2: retrieve password\n$username = \"phone number with international  prefix but without + and 00\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"Dani\", true);\n$password = $result->pw;\necho \"Password is $password\";\nPhase 3: send message\n$username = \"phone number with international prefix but without + and 00\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"Dani\", true);\n$password = 'VoxXYMWJfLgp+Pl6GF9Al48LFcY=';\n$w->Connect();\n$w->LoginWithPassword($password);\n$dst = 'destination number with international prefix but without + and 00';\n$msg = 'mymessage text';\n$w->sendMessage($dst , $msg);\n$w->disconnect();\nThank you shirioko for the great work!!\n. ",
    "andonidiaz": "And... how to register a number using the API? :p\n. Thanks! I've do it!\nNow I have a little doubt... Is it possible to spoof the headers (android model, whatsapp client version...) to steal an user without getting unautentificated from the first device?\n. ",
    "wiitohzjeh": "\"no_routes\", all the time.. with so many numbers (>10), in Bluestacks for example works fine but trying with WhatsAPI (last rev) return that error..\n``` php\n$username = \"1206456xxxx\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"CCC\", true);\n$w->codeRequest(\"voice\");\n```\n. @shirioko: IPKall numbers. But in Yowsup can register without problems.\nPS: Obvious, is a SIP destination number so, only voice calls are allowed.\n. @shirioko: i try again with the Yowsup. you'r right, didnt work. sorry, my fault.\n. @shirioko: the example:\nphp\nc:\\>c:/php/php.exe -q test.php\nArray\n(\n    [cc] => 1\n    [in] => 2064561511\n    [to] => 12064561511\n    [lg] => en\n    [lc] => AI\n    [method] => voice\n    [mcc] => 204\n    [mnc] => 008\n    [token] => 3fe9a483d90af7940569ed969c3309c7\n    [id] => m%ad%1f%22%3f%5e%e0%84%93%29%2c%2b%234%92%13v%0d%dd%5c\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => no_routes\n    [retry_after] => 3600\n)\n. @shirioko: see\nphp\n[lc] => AI\nand in countries.csv\ncsv\n\"Anguilla\",1,365,\"AI\",\"en\"\nThis is a Washington number, http://www.areacodehelp.com/where/area_code_206.shtml. Maybe for that the \"no_routes\"?\n. @shirioko: nothing, :(\nphp\nArray ( [cc] => 1 [in] => 4256063303 [to] => 14256063303 [lg] => EN [lc] => US [method] => voice [mcc] => 204 [mnc] => 008 [token] => 973a642c588fa9b3553726a63cae2899 [id] => %21%131%86%94%b5%0fr%2c%9apyw%18%03%3b%08g%86%19 ) stdClass Object ( [status] => fail [reason] => no_routes [retry_after] => 3600 )\n. @shirioko now works! thanks :)\n. ",
    "vikrantchoudhary": "Looks like many things has been changed in git code itself & whatapp is also upgraded. Does this still works.\nC:\\SourceCode\\WhatsAPI\\src\\php>php -q testMessage.php\nArray\n(\n    [cc] => 91\n    [in] => 99xxxxxxxx\n    [to] => 9199xxxxxxxx \n    [lg] => en\n    [lc] => 91\n    [method] => 867471\n    [mcc] => 404\n    [mnc] => 001\n    [token] => tI%2B5QWOMfPgnFtKFWJnGG3t4LwQ%3D\n    [id] => %fa%5c%ad%23%0d%16%c5%df%cf%f13%c7%bc%88%8d%11%c4%ae%99%95\n)\nPHP Fatal error:  Call to undefined function curl_init() in C:\\SourceCode\\WhatsAPI\\src\\php\\whatsprot.class.php on line 1765\nPHP Stack trace:\nPHP   1. {main}() C:\\SourceCode\\WhatsAPI\\src\\php\\testMessage.php:0\nPHP   2. WhatsProt->codeRequest() C:\\SourceCode\\WhatsAPI\\src\\php\\testMe\nssage.php:16\nPHP   3. WhatsProt->getResponse() C:\\SourceCode\\WhatsAPI\\src\\php\\whatsp\nrot.class.php:317\nFatal error: Call to undefined function curl_init() in C:\\SourceCode\\Wh\natsAPI\\src\\php\\whatsprot.class.php on line 1765\nCall Stack:\n    0.0003     127152   1. {main}() C:\\SourceCode\\WhatsAPI\\src\\php\\test\nMessage.php:0\n    0.0176    1255088   2. WhatsProt->codeRequest() C:\\SourceCode\\Whats\nAPI\\src\\php\\testMessage.php:16\n    0.0247    1258032   3. WhatsProt->getResponse() C:\\SourceCode\\Whats\nAPI\\src\\php\\whatsprot.class.php:317\n. Even i am experiencing the same. \n. ",
    "jessereitsma": "@NakulSharmaIt It's given a reason: 'old_version' so just grab the latest version of the code (update whatsapp version and user agent) \nThat should work.\n. That's a whole different issue, take a look at closed issues because you're not the only one ;)\n\u2014\nSent from Mailbox\nOn Fri, Jan 9, 2015 at 11:09 AM, Mohammad Amin Jahany ( OnlyMAJ )\nnotifications@github.com wrote:\n\ni still get no_route , whats the problem ?\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/403#issuecomment-69315506\n. Yes, I have found a workaround on iPhone, which probably also work on Android.If I have time today i'll post a little tutorial\n\n\u2014\nSent from Mailbox\nOn Fri, Jan 9, 2015 at 1:40 PM, Mohammad Amin Jahany ( OnlyMAJ )\nnotifications@github.com wrote:\n\n@jessereitsma i have checked for 3 days the wikies and had headache . i dunno what to do .  can you help me on that ?\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/403#issuecomment-69329343\n. The error says: 'status: fail, reason: old_version'\nWhy do you ask it works? You post your own answer.\nNo, it don't work, reason: you have an old version. Use the latest code from the original repo:\nhttps://github.com/mgp25/WhatsAPI-Official\n. old_version is a check on version number and user agent in the whatsprot class.\nhttps://github.com/mgp25/WhatsAPI-Official/blob/master/src/whatsprot.class.php#L50-L51\n. Nope, the code is valid once\n. @grifter-yo It's possible, yes.\nHowever, I would recommend start learning basic HTML / Javascript en after that the basics of PHP before you dive into this.. Hey\n\nWith the python script my return is:\n```\n- Cache.db-wal downloaded!\n- pw.dat downloaded!\n\nExtracting data...\n\nTraceback (most recent call last):\n  File \"whatsapp.py\", line 103, in \n    getData()\n  File \"whatsapp.py\", line 45, in getData\n    cursor.execute(\"SELECT request_key FROM cfurl_cache_response\")\nsqlite3.DatabaseError: file is encrypted or is not a database\n```\nI'm not really into python, so I don't know how to fix. \nAnyone does know? :) \n. https://github.com/mgp25/WhatsAPI-Official/issues/273\n. https://github.com/mgp25/WhatsAPI-Official/issues/273\n. Same problem here \n. I've deleted my comment, because it doesn't work after all.I have a dutch number and I used a french server (with french IP) en whatsapp doesn't gave any response.\nWith a dutch IP I do get a response, but again the no_routes error.\u00a0\nSo I don't know anymore :(\n\u2014\nSent from Mailbox\nOn Mon, Jan 5, 2015 at 7:42 AM, yanelev notifications@github.com wrote:\n\nThanks for you reply, can you please state which IP and where to change.\nCheers\n\nOn 5 \u05d1\u05d9\u05e0\u05d5 2015, at 01:52, Jesse notifications@github.com wrote:\nTry a different IP, that's how I get rid of the fail / no_routes object.\nOnly, I'm still not getting a text message or call with a code :(\n\u2014\nReply to this email directly or view it on GitHub.\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/1074#issuecomment-68673483\n. My solution was to register my phone number via the official WhatsApp mobile client (app) and find the password on my iPhone and use that. (pw.dat file, that's the file where your password is stored (encrypted))\n. If I have time left today i'll take a look to write a quick and simple 'tutorial' thing hoe you can easily grab your whatsapp password on iPhone (note: I have an iPhone so I don't know how this works on Android but I think more or less the same)\n- Jesse\n\n\n\u2014\nSent from Mailbox\nOn Fri, Jan 9, 2015 at 7:44 AM, bitbitbit notifications@github.com\nwrote:\n\nI got the same issue! would like to get the pw for wtsapp too!! thanks!!\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/1074#issuecomment-69299447\n. What you already can do is jailbreak your iPhone.On Google can you find how, even for iOS 8.2.1 (latest)\n\n\u2014\nSent from Mailbox\nOn Fri, Jan 9, 2015 at 12:57 PM, yanelev notifications@github.com wrote:\n\nThat will be super for me and for sure many others, iPhone is perfectly fine. \nThanks\n\nOn 9 \u05d1\u05d9\u05e0\u05d5 2015, at 13:36, Jesse notifications@github.com wrote:\nIf I have time left today i'll take a look to write a quick and simple 'tutorial' thing hoe you can easily grab your whatsapp password on iPhone (note: I have an iPhone so I don't know how this works on Android but I think more or less the same) \n- Jesse \n\u2014 \nSent from Mailbox \nOn Fri, Jan 9, 2015 at 7:44 AM, bitbitbit notifications@github.com \nwrote: \n\nI got the same issue! would like to get the pw for wtsapp too!! thanks!!\nReply to this email directly or view it on GitHub: \nhttps://github.com/venomous0x/WhatsAPI/issues/1074#issuecomment-69299447\n\u2014\nReply to this email directly or view it on GitHub.\n\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/1074#issuecomment-69325622\n. @mgp25 I used Cache.db-wal, which contains requests with your identity. That can be used to request a new password.\n. @yanelev @bitbitbit @ayswaryaprsd @mgp25 https://github.com/mgp25/WhatsAPI-Official/issues/273\nI've created a little 'tutorial' to show you how I did it.\nI hope it works out for you :)\n. stdClass Object ( [status] => fail [reason] => no_routes [retry_after] => 3600 ) \nThat's all I get\n. fork the repo, add your changed and commit + open a pull request I guess\n. Links are only clickable if you have the sender as contact.\nLet the receiver add your number to their contact list and the links will be clickable (also the links already sent)\n. afaik not\n. //not helping spammers.\n. Ah I see now, didn't notice it. \n. \n\n",
    "onlymaj": "i still get no_route , whats the problem ?\n. @jessereitsma i have checked for 3 days the wikies and had headache . i dunno what to do .  can you help me on that ?\n. @jessereitsma Thanks , i'll wait for your magics :+1: )\n. ",
    "TimoSmido": "Please  i need help \ni have been traying to get the code whatsapp in my site php but i just have this result \n[status] => fail [reason] => no_routes [retry_after] => 3600\nneed help \n. ",
    "developez": "Do this works?\n$username = '34XXXXXXXXX';                                  \n$identity = strtolower(urlencode(sha1($username, true)));   \n$nickname = \"FOO\";\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\nI get this:\nArray\n(\n    [method] => sms\n    [in] => XXXXXXXXX\n    [cc] => 34\n    [id] => %fb%a2dt%24%c5%08%e3%7fm%c2x%e5%0b%5cc%e8%ae%21%9d\n    [lg] => es\n    [lc] => ES\n    [token] => ioYXf48jFKbZ4bjc6I%2FqtXne9t0%3D\n    [sim_mcc] => 000\n    [sim_mnc] => 000\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => old_version\n)\n. I obtained the last code from this repo today. I don't know if the issue is that I use this:\n$identity = strtolower(urlencode(sha1($username, true)));\nOr that is not used in the code request and only for password request?\nNow I am going to download the code from the mgp25's repo.\n. Thank you, I wonder if I can re-use the code received in my smarthphone 3 months ago? I have got the code saved in my sms inbox.\n. ",
    "DMido": "i have a problem when checking if number is existed or not and get password hash\nwhen i use \n$identity = strtolower(urlencode(sha1($username, true))); \nthe response invalid parameter id\ni get identity from WART and put it in .dat file and it worked fine and get the hash but it doesn't work\ni want to know how the system create the identity sent to whatsapp \n. ",
    "jojoba2010": "I am .net one!\ncan give me sample\n. ",
    "abdulbasitnawab": "Awesome, it is working example,\n. ",
    "play2winclub": "any one can share latest method how to get the whatapps password ?. ",
    "Rhanzato": "HI play2winclub , after included 'chat-API-master' directory in your project, you need 2 steps to obtain password:\n1st:  include 'src/requestCode.php'; use only this code\n2nd: so delete code and replace with   include 'src/getPassword.php'; \nCheer. ",
    "CanD62": "Array ( [cc] => 62 [in] => 8529xxxxxx [lg] => id [lc] => ID [id] => \ufffd\ufffdf\ufffd\ufffd!wq\ufffdlo8u\ufffd\ufffd\u0005\ufffd\ufffd\f\ufffd [token] => 4X1dGhSYOl0p+Kgcyh8Cb4ZGimo= [mistyped] => 6 [network_radio_type] => 1 [simnum] => 1 [s] => [copiedrc] => 1 [hasinrc] => 1 [rcmatch] => 1 [pid] => 5827 [rchash] => acd3ea1562881e5c6302cdfd7ddd2a79e9667e6ec04206eb5b043b2e2e3cb057 [anhash] => 31f35e74305af723a3e0ba3ca4b3429e [extexist] => 1 [extstate] => 1 [mcc] => 510 [mnc] => 000 [sim_mcc] => 510 [sim_mnc] => 000 [method] => sms ) stdClass Object ( [login] => 628529xxxxx [status] => fail [reason] => old_version ) \nwhat old_version now ?. ",
    "jfarissi": "I use WART Ver: 1.8.2.2 and i receive this message {status:fail,reason:old_version}\nany idea ?. ",
    "aneari77": "Can you guys try JEAJAMHACKER@GMAIL.COM. this guy is the talk of the town, he hacks into any form of Technical problem you have especially when it comes to phone hack. Well I just hired this hacker today to hack into my spouse phone and right now I love what am seeing. After the hack JEAJAMHACKER@GMAIL.COM diverted all my spouse applications, text messages and deleted text messages he uses to chat right in my own phone  I have full access to my spouse phone without making use of my spouse phone\u2026 mehn this hacker is the best. I LOVE YOU JEAJAMHACKER@GMAIL.COM .. ",
    "kleinandreas021": "SPYEXPERT0@GMAIL.COM  is an expert when it comes to hacking, my wife has always thought she was smart, but I proofed her wrong . My woman has been sleeping with her boss at the office where she works. She never text or call her boss with her phone when ever they get an appointment on meeting. but when I came in contact with this hacker i saw that my wife has been communicating with her boss through her email. they where to smart but SPYEXPERT0 is the smartest  that was how I knew my wife was cheating on me. A very big thank you to SPYEXPERT0@GMAIL.COM \n. ",
    "wanwanchui0": "I feel honoured by JEAJAMHACKER@GMAIL.COM  Have been longing for this hacker services since last year, when I contacted this hacker last year I told him I was gonna mail him back in other to get started  since January 2018 till date I never mailed him back but I needed his services so bad then I contacted  him yesterday about hacking my girl friend cell phone. Then the necessary things where done, behold I was at sleep and heard my phone making some silent sound then i woke up and checked I found out that all my girl friend chats, text messages, whatsapp, facebook, all call recorded and many more was on my phone. Am so happy for the Job well done by this great hacker with a perfect price.  Now I have full access to my girl friend phone right in my own phone without touching her cell phone. And  also this hack is not traceable, I appreciate you JEAJAMHACKER@GMAIL.COM thanks.\n. ",
    "nicowong91": "Am Nico from Hong Kong, well I never knew this hacking of cell phones was real, until i and my friend came in contact with this hacker named SPYEXPERT0@GMAIL.COM in less than 24 hours we got results. \n. ",
    "sharongift77": "I don\u2019t know why guys can\u2019t stop cheating on some one that really love them but they go outside and spend there Money on cheap holes, I just caught my Boyfriend cheating on me with the help of JEAJAMHACKER@GMAIL.COM I was able to read his text messages and also the calls that he received and I saw they were all females and also went through his whatsapp and I saw a lot of female naked pic and many more. I wanted to confront him and ask him but I decided to show his mom first. Thanks to JEAJAMHACKER@GMAIL.COM. VERY RELIABLE AND CHEAP. \n. ",
    "marcwy4": "I just want to say thank you to JEAJAMHACKER@GMAIL.COM for the help and all he did for me, this hacker deserve more, I never knew my girl friend I was about getting married too was a slot not until a close friend of mine told me about this hacker, how he normally contact this hacker when ever he feels his girl friend is cheating on him or not that\u2019s was how I got access to my girlfriend phone without touching her phone. I want to say thank you to JEAJAMHACKER@GMAIL.COM this hacker really saved me. \n. ",
    "Juliaballmann12": "I used the help of this hacker some time last week and I got results of my spouse phone right on my phone I follow up all his chat with people, today I was at office he has been on a call he never knew that all his calls are been recorded and am hearing all that he was telling the girl so they concluded on seeing. right on his text he sent the girl our house address and he never knew I was seeing all of that, when she got to the house she called him telling him she was at the address he provided  I left them for like 30min then I went home on reaching my house I saw my husband on the bed with this girl in particular having sex on our matrimonial bed I left the house back to the office. It hurts when you Love some one but all you get in return is cheats, SPYEXPERT0@GMAIL.COM is the boss, this is the hacker that helped me with the hack that\u2019s why I want to use this time to say thank you. You are the best, big love \n. ",
    "amrnofal594": "There is nothing you can do to please women. I just got a Benz for my girl friend last week but presently she cheats on me I caught her with the help of JEAJAMHACKER@GMAIL.COM by hacking into her cell phone. Guys before entering into any relationship or marriage contact this hacker to know who your spouse really is, so you won\u2019t get heart break at the end contact this hacker to know if the person you want to spend the rest of your life worth it and again thanks to this hacker for helping me out. \n. There is nothing you can do to please women. I just got a Benz for my girl friend last week but presently she cheats on me I caught her with the help of JEAJAMHACKER@GMAIL.COM by hacking into her cell phone. Guys before entering into any relationship or marriage contact this hacker to know who your spouse really is, so you won\u2019t get heart break at the end contact this hacker to know if the person you want to spend the rest of your life worth it and again thanks to this hacker for helping me out. \n. ",
    "vanipavlovic07": "Just last month I lost a relationship, cause I caught him severally cheating on me with the help of SPYEXPERT0@GMAIL.COM  but ever since I enter this new relationship this hacker has been the one working for me, SPYEXPERT0@GMAIL.COM  hacked into his phone and after getting results I got the chance to monitor his phone for 1 whole year and also have been monitoring his device right in my phone and up till now there has been no signs of cheating but I still keep an eye on him\u2026.. I just want to Thank this hacker for all the help he rendered to me. I have been using this hacker for 2 years now and he has never disappointed me. More blessings SPYEXPERT0@GMAIL.COM \n. ",
    "schneidercosima5": "My GOD I can\u2019t  believe I just caught my man cheating on me and we are supposed to be getting married on Saturday but I can\u2019t  live with a cheater thanks to JEAJAMHACKER@GMAIL.COM  if not I would have not known my boy friend is a big cheat. \n. ",
    "tatjanamalek3": "Honestly I find it so hard trusting men. just in 2 months I went through 3 relationships and non worked out well cause I was always catching them cheating on me and it really hurts, I was able to find out about all of this with the help of an EXPERT hacker called  SPYEXPERT0@GMAIL.COM  now I can move on with my life and thanks to this Wonderfull hacker. I also hired him from this site and he delivered to me well. Thanks buddy\u2026. MY ADVICE TO WOMEN WHO THERE SPOUSE CHEATS ON THEM IS\u201d STOP CRYING JUST CONTACT THIS HACKER SPYEXPERT0@GMAIL.COM AND THE PROBLEM IS OVER ENOUGH PROOF WILL BE GIVEN TO YOU. \n. ",
    "higauravbhai": "I tried above code and it doesn't work for me. Then I tried to enable debug by having $w = new WhatsProt($username, $identity, $nickname, true); then I can see from debug messages that actually group list is being received. I don't understand then why it is not coming to my onGroupList call back?\n. I tried your suggestion but it is still not working for me. Following is my code. \nfunction onGroupList($mynumber,$grouplist)\n{\n        echo \"Message from Group\\n\";\n        var_dump($mynumber);\n        var_dump($grouplist);\n        return;\n}\n$username = \"xxxxxxxxxxx\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$dbg = false;\n$w = new WhatsProt($username, $identity, \"Cosmic\", $dbg);\n$password =  'xxxxxxxxxxxxxxx';\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind(\"onGetGroups\",\"onGroupList\");\n$w->sendGetGroups();\nfor($i=0; $i<5; $i++)\n{\n        $w->pollMessages();\n}\n. Yes, after downloading latest code, it works fine. Thanks lot\n. Hi \nThis issue has been resolved. Problem was that I was not having jpeg library installed in my machine. After installing this, it works fine. \n. I also want to discuss one more point here. What are the chances of being blocked if I don't send any message at all and use just to receive messages? I appreciate comments from the experience users\n. I have two phones. On one phone, I can see profile picture which I have set while on another phone, I cannot see profile picture. Both are having same Whatsapp version. I am still not able to figure out what is going on here. I am still not sure that contact sync will really solve this problem completely. \n. I am getting error saying that  \"error code=\"501\" text=\"feature-not-implemented\" backoff=\"3600\"\n. yes, I am using contactsync.php\n. Yes, it is working. Basically if you sync many numbers then we have to wait for some time before we sync another set of numbers.\n. I have noticed that once you try to call this function, you cannot call it immediately. You have to wait for couple of hours and then after when you call then you will get result. \n. ",
    "s22l1g11": "My hoster uses PHP 5.2.17\nConstants by php.net\n. ",
    "fhieronymus": "With the constants in green, it works.\nhttps://github.com/venomous0x/WhatsAPI/commit/b62464c7b43d9f6ece86c4c09ec22d4d589b382e\n. ",
    "satay": "Hi BlackMLM,\nAs per your post I am using this code. But unable to send image on whatsapp user.\nI am getting following xml on using this code.\n\ntx    \ntx     4560 byte data\ntx  \nPlease help on this.\nWith Best Regards,\nSatay\n. ",
    "ob1kenobi": "I found the solution: change the resource name to S40-2.11.1 and will work. I dont know why \n. ",
    "badteam": "im facing same issue any solution ?\n. how to do that?\n. yeah but if i send it to some one else ?\n. ",
    "AmirGolan85": "ok, i was trying to use checkCredential and got blocked..\nThanks..\n. Nope, i got blocked..\nalso tried on smartphone and got \"Your number is not allowed using this service.\"\n. Hey, the server gives me this message back for voice and for sms:\nstdClass Object\n(\n    [status] => sent\n    [length] => 6\n    [method] => voice\n    [retry_after] => 1805\n)\nBut i cant get any voice call or sms from the servers.. (Using the android token)\nany idea why?\n. @Dynogic can you please explain how you managed to get the hash?\n. ",
    "fa-deve": "i have same problem \ni used this api   https://github.com/mgp25/Chat-API-NET\nand not-authorized when trying to login \n ???\n. ",
    "Floy2000": "i have same problem too\nPlease help)\nadmin@kgti.ru\n. ",
    "VivekSingh573": "Any one can send the WhatsAppAPI.dll   new version, \nbecause i have API problem, i sent the image , audio and video from my C# code . but today (04/Dec/2015) morning its not orking\n. WART IS NOT WORKING\nOn 16-Apr-2016 10:51 PM, \"renatoprogramer\" notifications@github.com wrote:\n\napril / 2016 working ?\n\u2014\nYou are receiving this because you commented.\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/421#issuecomment-210861177\n. \n",
    "rameshrdev": "How to fix these\nwhen login  'LoginFailureException' not-authorized \nHow to register using exampleRegister.php or registerTool.php\nBefore register code required or after it.\nThis api currently working or not\n. ",
    "srburton": "april / 2016  working ? \n. ",
    "devloic": "Well done . You are fast. Once you have enjoyed a fully deserved rest I think we would all be glad to know more about how you made it so for the next update we can put our hands in the dirt too.\n. @atans  token is \"ead69804b4b5da4c7455d1d20c8f0dc0\" too using yowsup-cli with number (1)12345679\n@Dynogic  looks good with yowsup-cli , no more bad_token nor old_version ( got retry_after: 3543 ) on code request... let's try again in one hour or so\n. I forgot to set \"id\" to \"abcdef0123456789\" so I was always getting retry_after with both sms and voice with yowsup-cli . Setting the id made it work for 2 of my numbers. Got something like : \nDetected cc: 1\nstatus: ok\nkind: free\npw: blablabla\nprice: US$0.99\nprice_expiration: 1377476593\ncurrency: USD\ncost: 0.99\nexpiration: 1398971095\nlogin: blablabla\ntype: existing\n. @CODeRUS  UA, DEHASH and LONGHASH are constants (found in the the android client source code by Dynogic). As usual they might change in a future whatsapp android client update.\n. What response do you get ? code in  https://github.com/venomous0x/WhatsAPI/issues/423#issuecomment-21319982 uses \"WhatsApp/2.10.222 Android/4.2.2 Device/LGE-Nexus_4\" for the UA not  \"WhatsApp/2.10.750 Android/4.2.1 Device/GalaxyS3\"\n. ",
    "yunsiong": "What you mean \"your identity is a constant too\"? @Dynogic \nIts show status send but i didn't get any sms. \n. @Dynogic \ni am using .net. hopefully you understand the coding.\n        public static bool RequestCode(string countryCode, string phoneNumber, string method = \"sms\")\n        {\n            try\n            {\n                string language, locale;\n                CultureInfo.CurrentCulture.GetLanguageAndLocale(out language, out locale);\n                string id = phoneNumber.Reverse().ToMD5String();\n                string token = string.Concat(WhatsConstants.WhatsBuildHash, phoneNumber).ToMD5String();\n                string uri = string.Format(\"https://v.whatsapp.net/v2/code?cc={0}&in={1}&to={0}{1}&lg={2}&lc={3}&mcc=000&mnc=000&method={4}&id={5}&token={6}\", countryCode, phoneNumber, language, locale, method, id, token);\n                return (GetResponse(uri).GetJsonValue(\"status\") == \"sent\");\n            }\n            catch\n            {\n                return false;\n            }\n        }\nthe variable value i put here:\nWhatsConstants.WhatsBuildHash = \"30820332308202f0a00302010202044c2536a4300b06072a8648ce3804030500307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e301e170d3130303632353233303731365a170d3434303231353233303731365a307c310b3009060355040613025553311330110603550408130a43616c69666f726e6961311430120603550407130b53616e746120436c61726131163014060355040a130d576861747341707020496e632e31143012060355040b130b456e67696e656572696e67311430120603550403130b427269616e204163746f6e308201b83082012c06072a8648ce3804013082011f02818100fd7f53811d75122952df4a9c2eece4e7f611b7523cef4400c31e3f80b6512669455d402251fb593d8d58fabfc5f5ba30f6cb9b556cd7813b801d346ff26660b76b9950a5a49f9fe8047b1022c24fbba9d7feb7c61bf83b57e7c6a8a6150f04fb83f6d3c51ec3023554135a169132f675f3ae2b61d72aeff22203199dd14801c70215009760508f15230bccb292b982a2eb840bf0581cf502818100f7e1a085d69b3ddecbbcab5c36b857b97994afbbfa3aea82f9574c0b3d0782675159578ebad4594fe67107108180b449167123e84c281613b7cf09328cc8a6e13c167a8b547c8d28e0a3ae1e2bb3a675916ea37f0bfa213562f1fb627a01243bcca4f1bea8519089a883dfe15ae59f06928b665e807b552564014c3bfecf492a0381850002818100d1198b4b81687bcf246d41a8a725f0a989a51bce326e84c828e1f556648bd71da487054d6de70fff4b49432b6862aa48fc2a93161b2c15a2ff5e671672dfb576e9d12aaff7369b9a99d04fb29d2bbbb2a503ee41b1ff37887064f41fe2805609063500a8e547349282d15981cdb58a08bede51dd7e9867295b3dfb45ffc6b259300b06072a8648ce3804030500032f00302c021400a602a7477acf841077237be090df436582ca2f0214350ce0268d07e71e55774ab4eacd4d071cd1efad\" + \"022e923a364bfacff3a80de3f950b1e0\";\nlanguage = \"en\";\nlocale = \"MY\";\n. hi @Dynogic ,\nthank for your help and sorry for reply late. now i able to request the code but i fail to register and get block. i try to use your code at https://github.com/venomous0x/WhatsAPI/issues/423#issuecomment-21466433 and it cant compile because DisaFunctions is missing in current context. Can you show the DisaFunctions coding? Or i can just use DateTime.Now.ToString(CultureInfo.InvariantCulture).Substring(0, 10)?\n. I face the same problem too. Spoil my several number. Broadcast message only deliver to someone added your phone number. Its doesn't matter you sync contact or not. Just detect you send 8 messages to whom not added your phone number then get banned. Is there any solution?\n. ",
    "shahidkarimi": "Why I am getting this response:\nArray ( [cc] => 92 [in] => 3129912287 [id] => gwo\u2122\u0081\u00159}\u001d\u00ba\u001dw\u00a1a+\u001d\u00b5\u00f0 [lg] => en [lc] => PK ) stdClass Object ( [status] => fail [reason] => old_version ) \n. Why I am geeting this response please help:\nArray ( [in] => 3129912287 [cc] => 92 [id] => gwo\u2122\u0081\u00159}\u001d\u00ba\u001dw\u00a1a+\u001d\u00b5\u00f0 [lg] => en [lc] => PK [sim_mcc] => 410 [sim_mnc] => 000 [method] => sms [token] => 3099b0c548c3145e1b67eb4149cf5cf7 ) stdClass Object ( [status] => fail [reason] => old_version ) \n. How to update tocken, user agent and version?\n. ",
    "paxter": "I understand this. But the thing is the script doesn't receive any contacts from google and display the error above. The script can't access my google contacts although password/email was correct entered. After my try i received an email from google with information that a potential hacker tried to access my account. Maybe there are some requirements for this feature.\n. Yes, living in germany and tried about my server in Luxembourg to login. Than this was my fault. I tried also on my home pc, but there i receive every time the \"Error: There was an error with the AJAX request. XML/Json format is bad.\" error (using xampp). So i switched to my server, where the google error come.\n. Ok. Thanks to both of you for your help.\nSorry if i'm bothered you.\nbest regards\npaxter\n. Yes, after doing this it works now.\nWorks now on my local installation too. The curl extension was missing.\nThe only thing which is curious, i've five contacts in my gmail account with mobile number in international format. But the whatsapp-api receive only one number (every time the same). I don't know why, because all contacts are identically except the number.\n. Thanks! With that change it works perfectly. :)\n. Thanks for the fast reply. Works on iOS, Android I'll test later. But it isn't a very good solution related to the PHP Coding standard isn't it?\nEdit:// Also one new line in my php script produces two new lines in whatsapp. Not the best solution.\n. Yeah, looks like \"\\n\" is working. Thanks for your help. :)\n. ",
    "gowi": "Same for me. I registered my account with the official Android-client and used Miss Vernom to get the identity and password. I've changed WHATSAPP_DEVICE, WHATSAPP_VER, WHATSAPP_USER_AGENT and WHATSAPP_TOKEN to the values which my phone has sent. Afterwards I've used WhatsApi to send exactly one message. After some hours my account was blocked.\n. This is the log of the last two successfull message:\n```\n            [] Logging in as 'Alarm' (49177xxxxxx)\n        tx  <stream:features>\n        tx    <receipt_acks></receipt_acks>\n        tx  </stream:features>\n\n        tx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"49177xxxxxx\"></auth>\n\n        rx  <start from=\"s.whatsapp.net\"></start>\n\n        rx  <stream:features>\n        rx    <receipt_acks></receipt_acks>\n        rx  </stream:features>\n\n        rx  <challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">Z\u00d8A\u00cbz\u00ca\u00b2\u2122)\u00d7r\u00cb?\u2122E\u000fij\u00c6U</challenge>\n\n        tx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">J\u20201\u00ed\u00b8\u00b7?\u00d6(Q\u00e4p\u00ef\u00ea\u0001\u00aa/W\u00e8\u00b3\u00b72\u0017k\u00a2k\u00bbe\u0017ck|\u001e\u201a\u2122\u00d6h\u017dy)\n        _\u00c6 _b</response>\n\n        rx  <success t=\"137xxxxxx\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1374161673\" expiration=\"1405697673\">\u001bc> \u00d9V\u0081\u0011B\u001dU-\u00c6?SV\u008fQ\n        %</success>\n\n        tx  <presence type=\"available\" name=\"Alarm\"></presence>\n\n        [] Send message to 49160xxxxxx-xxx: xxxx\n\n        tx  <message to=\"49160xxxxxx-xxx@g.us\" type=\"chat\" id=\"message-137xxxx-1\" t=\"13741xxxx\">\n        tx    <x xmlns=\"jabber:x:event\">\n        tx      <server></server>\n        tx    </x>\n        tx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Alarm\"></notify>\n        tx    <request xmlns=\"urn:xmpp:receipts\"></request>\n        tx    <body>xxxx</body>\n        tx  </message>\n\n        rx  <presence from=\"s.whatsapp.net\" status=\"dirty\" xmlns=\"w\"></presence>\n\n        tx  <iq id=\"cleardirty-1374xxxxx-2\" type=\"set\" to=\"s.whatsapp.net\">\n        tx    <clean xmlns=\"urn:xmpp:whatsapp:dirty\"></clean>\n        tx  </iq>\n\n        rx  <ib from=\"s.whatsapp.net\">\n        rx    <offline count=\"9\"></offline>\n        rx  </ib>\n\n        rx  <message from=\"49160xxxxxx-xxx@g.us\" id=\"message-137xxxx-1\" type=\"chat\" t=\"1374168663\">\n        rx    <x xmlns=\"jabber:x:event\" count=\"13\">\n        rx      <id>message-137xxxx-1</id>\n        rx      <server></server>\n        rx    </x>\n        rx  </message>\n\n        rx  <iq from=\"s.whatsapp.net\" id=\"cleardirty-137xxxx-2\" type=\"result\"></iq>\n\n[] Logging in as 'xxx' (49177xxxxxx)\ntx  <stream:features>\ntx    <receipt_acks></receipt_acks>\ntx  </stream:features>\n\ntx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"49177xxxxxx\"></auth>\n\nrx  <start from=\"s.whatsapp.net\"></start>\n\nrx  <stream:features>\nrx    <receipt_acks></receipt_acks>\nrx  </stream:features>\n\nrx  <challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">D\u00b8*\u00e9\u00bc\u00a1#k\\ \n\u00fc\u0004`\f+\u00dd\u0081\u00c9E</challenge>\n\ntx  <response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\u20130\u00ff\u00a3\u00de8\u2022\u2020\u00c9@k\b@d\u001e\u20131[6#\u00dd\u00cce+\u00c0\u0081\u00a5\u2039\u00ee\u00c6b\u00ff\u00a5\u0081\u00b4\u2022$\u00a2\u00ecX\f\u00d0\u00f7\u00b4\u00bd\u007f</response>\n\nrx  <success t=\"13741xxxxxx\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1374xxxxxx\" expiration=\"1405xxxxxx\">\u00c21R\u00d2_\u00ea\ns\u0011\u0011\u00e1/#\u00d0\u00c3o\u001e\u00e9\u00cd\u000b</success>\n\ntx  <presence type=\"available\" name=\"Alarm\"></presence>\n\n[] Send message to 49160xxxxxx-xxxxxx: xxx\n\ntx  <message to=\"49160xxxxxx-xxx@g.us\" type=\"chat\" id=\"message-137xxxxxx-1\" t=\"137xxxxxx\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Alarm\"></notify>\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\ntx    <body>xxxx</body>\ntx  </message>\n\nrx  <presence from=\"s.whatsapp.net\" status=\"dirty\" xmlns=\"w\"></presence>\n\ntx  <iq id=\"cleardirty-137xxxxxx-2\" type=\"set\" to=\"s.whatsapp.net\">\ntx    <clean xmlns=\"urn:xmpp:whatsapp:dirty\"></clean>\ntx  </iq>\n\nrx  <ib from=\"s.whatsapp.net\">\nrx    <offline count=\"0\"></offline>\nrx  </ib>\n\nrx  <presence from=\"49177xxxxxx@s.whatsapp.net\" type=\"available\"></presence>\n\nrx  <message from=\"49160xxxxxx-xxx@g.us\" id=\"message-137xxxxxx-1\" type=\"chat\" t=\"xxxxxx\">\nrx    <x xmlns=\"jabber:x:event\" count=\"14\">\nrx      <id>message-137xxxxxx-1</id>\nrx      <server></server>\nrx    </x>\nrx  </message>\n\n```\n. ",
    "Alekos86": "Hi all, any body can tell me the user agent value for Galaxy Ace2, I want to set WhatsAPI for my phone:\nWhatsApp        2.11.23\nAndroid 2.3.6 gingerbread\nSamsung Galaxy Ace2\nBut I am receiving failure for old_version. Many thanks, my email is markmm82@gmail.com for your replys.\n. ",
    "TruthEdge": "I'm not spamming\nThose numbers we have are for active clients and we use them to sent offers, notifications , renewal of service ... etc.\nThe API is connected with some of our software we are using it to minimize SMS costs .\n. Yes we use Email + SMS \nBut we recently integrated whatsapp also and it was going great until recent changes from whatsapp servers .\nwe do SMS verifications for payments also.\nAnyway, i've been into all the topics and i'd like to help solving this issue my team has already tried allot of things but nothing really worked as they eventually get blocked by whatsapp servers even if 1-2 transmissions are out .\nI'd like to help you guys and provide the developer with some test channels as i notice that mostly all the developers are facing issue regarding to get new channels and some don't want to pay for it .\nyou for example, have a great background in this and i'm happy to support you with test lines to figure a solution and make it public .\nRegards\n. Guys\ni tried also\n- random sending times i  sent 1 message each 1 hour and it get blocked \n- i gave the channel some time to sleep about 6 hours also blocked\n- i tried changing IMEI but it's not the issue and also blocked \n- i tried registering from mobile phone and block\n- i tried sending to limited number for example CH 1 send to only ( 5 ) numbers even if the group have more than that so it's like linking the Channel to receiver also blocked .\n- i have multi IP's i can work around but it's not issue from IP as imagine your ISP or your mobile carrier IP will have millions of accounts under it .\nI can work with any of you guys to find a solution \ni have a completely ready custom made API we did it and i have channels if anybody want to get into it please add me on Skype Khaled.Mohaissen\nAnd the solution shall be made for public if we found it .\nRegards\n. Also new tests has been made \nnew channel => send out 1 single message at 11:17 PM => at 11:55 channel was blocked .\nwe have tried all logic to send to whatsapp but all lead to block \nwhat I believe is \nDuring the sending of message whatsapp server send something hidden and expect a reply from it's official client , you know whatsapp lunched 2 updates this week to there clients, we need to sniff an original client to get the exact TX/RX from it and verify it with what we have so far . \nRegards\n. New Update\nI have been monitoring and sniffing my iPhone \nThis is what i've been to \nWhen you open whatsapp ( it make send/receive ) and get 2 packets \nIf you open a message it get you 1 Packet\nNow what is important is when it comes to send message out \nI have 3 packets \n1st packet\n161589  50.22.231.50-static.reverse.softlayer.com   MY IP HIDDEN    SSL 93  https   61787   Continuation Data\n2nd packet\n167773  50.22.231.50-static.reverse.softlayer.com   MY IP HIDDEN SSL    151 https   61787   Continuation Data\n3rd packet\n167780  50.22.231.50-static.reverse.softlayer.com   MY IP HIDDEN TCP    66  https   61787   https > 61787 [ACK] Seq=3229 Ack=2665 Win=514 Len=0 TSval=4221687426 TSecr=916440720\nIf lets say 1st Packet for opening channel / 2nd for sending message , than why is there 3rd packet ?\nAnd also \n1st and 2nd packet are came from SSL port to 61787 while the 3rd message are over TCP port and same port \nAlso, if i kept my whatsapp running i got strange thing \ni got this packet \nusing SSLv2 Port \n170046 50.22.231.50-static.reverse.softlayer.com MY IP HIDDEN SSLv2 1410 https 61787 Encrypted Data, Encrypted Data\nAfter this packet is sent the SSLv2 \nthere is no more SSL ports , but still each sending message take 3 packets but now it's over TCP ports\nGuys, all what we need is to successfully decode those packets \nIt seems that whatsapp is using a pre-authorization even before sending message , if we can only get what is send and what should be received i can let my team do it in PHP in no time.\nRegards\n. rage\nRegarding to making a program, yes i'm already searching for somebody who is able to  do a windows based application to run exactly as original app.\nAnd i'm already using wireshark, that is how i got to sniff the current iPhone application .\nDo you know anybody for third option :D\n.  pythman,\nso is it a matter of existing numbers, i don't think so .. \ni can get an 1 year line and test it , i'll test it today and get back to you .\n. shirioko, lol.\nYea, i agree , we are all here trying to find a way to solve the blocking thing from whatsapp.\nfor the moment I have tried almost everything logic comes to my mind but still getting channels blocked after sometime, there is something we are missing and it's in the packets .\nI was able to sniff whatsapp on iPhone today, but i really didn't understand the packet system how's it's working if there is somebody who can understand it i'm even ready to pay him for a solution.\nRegards\n. pythman, you mean you are sending to existing contact with whatsapp.\nwell, it's not the issue , because i sent manually to my 5 test numbers ( 3 ) times and after couple hours channel get blocked .\nSo that isn't the issue \ni even replied and check the inbox in my API to receive the msg's .\n. shirioko, I tried it on my PHP app.\nI made it to cancel send message if number don't have last seen and if last seen is more than 48 hours .\nBut still getting blocked, I'm not using your app i'm using PHP .\nRegards\n. I guess i didn't explain well.\nI'll send you my whatsapp class i made via mail.\n. FA, \nDear regarding to the EULA, I know it's illegal i have been there, But\n1) I'm not in a country which accept any USA TOS/EULA \n2) I'm not going to spam whatsapp servers as i made my script to send 1 message / per 1 minute, I'm not looking to overload there servers or any kind of that i just have already active clients for this service and i can't cancel it .\n3)Whatsapp said it won't allow spam , and the numbers i'm sending to are not spam they are registered in our softwares .\n. @assegaf \nThanks for sharing this information, that is the same what i thought when i saw 3 transmission when sending 1 message . \nNow the trick is to decode what whatsapp is sending and what is expected to be sent back so it will be added in the API and fool whatsapp system . \nI'm not good in that, we need somebody to decode it :(\n. @Saeger , not it's not like that because we are sending different messages with pre-saved number on receiver side .\nThe max i could get was 21 message before channel get blocked. \nMaking sure we are sending a message per 20+ minutes , we are syncing contact before sending around 1 hour+ we are requesting lastseen & display pic + our channel are having display picture + status + name .....\nI am not at all flooding any system so basic my channel is sending less than 5 messages in a hour :(\nAny thoughts ?\nRegards\n. It's not a blame, I've been in this script and i'm trying to run it as much as human it can be .\nwe are doing all human steps sending less than 5 messages in an hour \nThere is some functions in the script for example \n1- Clean dirty, i notice it's working 1st run when the server issue a dirty command to a channel the channel will auto response with cleandirty.\n2- The pong request, i'm not sure it's functioning as with all the debug i made to the channels never had a ping/pong request .\nI do save some of the outputs for debuging if somebody want to help . \nRegards\n. @ganySA , How many numbers are you trying to send to ?\nMy self a new number --> Added + Synced on receiver mobiles = Blocked on message no.8 while sending message each 5+ minutes .\nRegards :D\n. @jonnywilliamson , I have get 3 numbers , registered now on Mobiles and chatting with my self lol .\nI'll keep it till tomorrow and switch them into channels to check what will happen .\nRegards\n. @g0g0l , Bibaswan \nMay i ask what is the site you are referring to ?\nRegards\n. @g0g0l , Bibaswan i have you on skype , please come on .\nRegards\n. @jonnywilliamson , I advice you to close your nose lol :)\nWhat bad smell are you talking about ?\n. First find a solution for the blocking channels before going for v2.0\nRegards\n. @Shiriko , please read my first post here .\nhttps://github.com/venomous0x/WhatsAPI/issues/533\nAnd yes, I agree to found a solution for spammers .\nBut, for who isn't spamming and getting block after couple messages even though we have sender number SAVED in contact list for receipts so it's clearly not spamming :100: \nRegards \n. LoL\n@shirioko , I guess if you issue the Source update, that would stop opening new threads for same issue without even  searching for it .\nBest Regards\n. I love the surprise thing \nAnd Btw, I want to suggest something , could you please do a donation page via Paypal , I understand you have real work in Life and also we don't want you to delay the work here so we'd like to pay you a small fee of what you are doing . \nRegards\n. Haha \n2 Votes for Paypal  .... \nLet us give him something back.\n. @crynobone , Bounty are for one issue at a time \nBut if @shirioko made a donation page, i guess anybody can donate when he would like to use this API and that would give @shirioko something to work and spare time for this script , don't you think so ?\n. Go for paypal \nmuch easier and more popular .\nWaiting the Link \n. 4th Sent :)\nHope you find a solution for the encryption soon.\n. Perfect.\nWe are all waiting till you finish whatsappapi.net so you can put them in php.\nKeep the good work.\n. @faisalcse No, Please wait the update from @shirioko :)\n. Thanks for updating us with the status of solving this issue, waiting the next release . \nRegards\n. @thiagosantos everybody is abusing this ... \nDammit whatsapp start blocking Ranges of IP's just due to high abuse it came from there. \n. Thanks @mgp25  for all the support you did :)\n. @ExpressArab , So you don't need the API , what the fuck you are doing here, and why you are upset when mgp said he's not going to support spammers like you ?\n. ",
    "raytkl": "My channels are also locked for several hundred amount.. Have anyone tried to change ip every 5-10 message sending and randomly sleep to prevent from timer killing and switching channel evey 5 message sent using huge amount of channel for sending and unique IMEI for each channel....I am also using whatsapp for notification for my client...it fail for whatsapp sending...it always blocked.. Does anyone know whatsapp blocking logic???\n. TruthEdge, could you post some reference code? I want to help to do perfect antiblocking system....I think we must solve it....\n. Any more random behaviour like a human behaviour. eg ...random sleep time, changing ip, unique IMEI,switching channel logic.\n. ",
    "pythman": "thank you TruthEdge for your efforts i want to mention that i have old numbers registered from more than 4 monthes\nyesterday i sent about 20000 message from them to a different numbers and  until now they are working\ni  registered new us numbers they get blocked as soon as i sent few messages from them\n. no they are all existing numbers i filtered them before i start sending by this link\n v.whatsapp.net/v2/exist\n. i wonder why these numbers precisely not blocked until now although i sent huge messages from them yesterday\nand another numbers sent few messages get blocked immediately\n. ",
    "balunadella": "HI \nIam New to whats app api ,\nI want to know about when chanel get blocked and .\nhow can we recognise blocked chanels ?\nAny body help  . .!\n. @shirioko \nHi Shirako ,\nThanks for your prompt reply .\ncan you please give me any latest version url or working example files . .\niam using v3 . . when i try to use waitforresponse() . it is taking long time it is rotating continously . .\n. @shirioko \nCould you please tell me how to send request for get channel status . . .\ni want to know which channel is working and which channel is not working . . every day . .\n. ",
    "arielbrizi": "anyone knows which is the maximum daily message? there must be a pattern \nother questions? How long block me?\nthanks!!!\n. ",
    "xX7": "Well, I created one single account with the API last week and it's still valid and active. I'm sure they'll detect, if you create an unnormal amount of accounts from the same IP address ..\n. @antonella18 SendPresence\n. @antonella18 haven't received any ping yet, it's like Dynogic says.\nbtw: Sounds like a spam script ?.\n. I dont have 100 contacts, otherwise I would test it.. The only thing is that you can only sync contacts once in a short amount of time.\n. If you use this API with a phonenumber, where whatsapp is already registered to ( if you installed whatsapp on your device ) , you force to retreive a new password, so you have to reverify whatsapp on your device. SO you are not able to use whatsapp with this API and on your device at the same time.\n. @slobo42 yes thats correct. You dont have to execute \"SendMessageReceived\" manually. I dont know how exactly your whole php script works, but maybe due to this reloading of the page, the socket does not get filled with new data and processes the old data over and over again.\nTry putting \"PollMessages\" into a loop, and make sure, that you dont always reconnect to the whatsapp server.\n. jid = contrycode + phonenumber (without 0 at the begining ) + @s.whatsapp.net\nexample:\ncountrycode: 49 (Germany)\nPhonenuber: 01578 1231231\njid: 4915781231231@s.whatsapp.net\n. @mgp25 sending to \"s.us\" is group related..\n. Yes right, sorry just saw the \".us\" and thought of group server.. :P\n. try to use \"self::DISCONNECTED_STATUS;\" or make it \"public\".\n. the time returned from LastSeen, is a unix timestamp, just google a method to translate unixtime to hh:mm:ss.\nthe value you are taking about is just the message id, you need to work with the time attribute....\nEdit:\nsimply looking up what \"time()\" does, would have given u the answer anyways.... do you have a clue what you are doing ? :D\n. ",
    "daannet": "Owh i doesn't see issue #403 \n. Into a message?\n. Do you entered the good phone number? \n. ",
    "ramlok1": "yes, i enter the correct number, but why when i run the code for retrieve the password always is diferent\n. ",
    "kevinhagenaars": "does the receiver have Whatsapp?\n. ",
    "ycruzb": "Is actually this api working ??? I have copied all the files to a server then I have made the appropiate configuration and finally I'm running exampleRegister.php but it is still giving to me this error\n[status] => fail [reason] => old_version\nany help please ???\n. @shirioko, I have downloaded the latest code and it still gives me the same, please check it out ! I can't register a number with this api\n. Oooh thanks very much @shirioko for your support, I will try again.\n. Hi again @shirioko, you are right !!! the registration works fine and I have finally a code in ###-### format (with '-' in the middle) but when I try to register this code with:\n$w->codeRegister('###-###')\nit shows me:\n[status] => fail [reason] => bad_param [param] => code\nand the error\nFatal error: Uncaught exception 'Exception' with message 'An error occurred registering the registration code from WhatsApp.' in .../whatsprot.class.php:206 Stack trace: #0 .../wapi/exampleRegister.php(76): WhatsProt->codeRegister('###-###') #1 {main} thrown in .../wapi/whatsprot.class.php on line 206\nif I try without the '-' character then nothing is shown\ncould you help me please ??\n. God bless you @shirioko !! finally I got a password, now I have only one more question, what about the $identity variable in exampleFunctional.php ? I let the same value or I need to put some value that the process give me ???\n. Forget the previous post, the api is working 100%, thanks a lot.\n. I think the same, you need to download the latest version of the api, I have had the same issue and I have resolved in that way. \nRegards\n. ",
    "sumitraghav": "I have faced same problem too. I think its a outdated version. I spent almost 2 hr to search proper API but no result. I think there is no API.\n. ",
    "ganesh002": "hello there\nI am also try to integrating whats up in php \nand i had try this to download .exe file but it says 404 error \nhttps://github.com/shirioko/WART\nhelp me please thanks.\n. ",
    "antonella18": "This is my XML Output:\n```\ntx  \ntx    \ntx    \ntx  \n\u2592\u2592o\u2592B.T\u2592(\u2592\u2592VQ\u2592\u2592~\u2592\u2592J_\u2592:xmpp-sasl\">.\u2592]\u2592.c`\u25928\\\u2592'\u2592g\ntx  \u2592E\u2592{}\u2592o\ntx  \n```\n. The idea was to make the whatsapp server think I was a \"real\" smartphone which is switched off for a short time every two or three days - to avoid being blocked one day...\n@shirioko I also get a proper response after reconnect - but actually I am offline and can't send or receive messages\n@assegaf So, how do I send an unvailable status?\n. Hm, what assegaf and Dynogic are saying is quite contradicting... \nActually I still see ping-pongs from the script which seem to be working. \nTo understand what I am doing: I have a php script which sends and receives messages in a endless while loop.\nAs long as I dont't disconnect and reconnect in the script, it seems to be running forever without a problem.\nSo now I let the script end after 2 days (after disconnect) and then restart it after 30 seconds - this is working.\n. What on earth gave you the impression I am running a spam script? This is really paranoid. \nMy script is sending messages - if there is a message to be sent - and receiving messages - if there is a message to be received. Any problem with that?\n@Dynogic I'm not constantly sending messages, there are often several hours between one message and the next.\nThank you all for your help though. \n. @Dynogic Well, maybe I'm too naive about what people are using WhatsAPI for...\n. ",
    "pastoso": "Wops, wrong copy/paste. I'll send an updated one\n. @mofakfree can you tell me the phone number you are using for registering? I can try to figure out what's going wrong. Thanks!\n. @mofakfree can you try with the last commit? I though that curl was doing the urlencoding itself of the params, but it looks like when the base64 token had \"/\" it was failing\n. Ok, the id matching the token given by the new algorithm is the value on $aes_secret in generateRequestToken. So, finally, it was there for something :)\n. The id used on the check \"v.whatsapp.net/v2/exist\", and it is the AES encrypted data. So yes, currently login in WhatsAPI is broken because we need to use the AES encrypted data as id.\n. The code is a two minutes thing. The problem is to test the login with what we suppose should be the id for the new token received. There is a risk of being banned and I cannot find my firefox OS phone used for testing :(\n. Get my branch \"new_id\"\nNotice that the id generation assumes that whatsapp, during registration, splits your number (without country code) like: \nNNN XX YY ZZ\nif that is not the case for you country, you should probably change the offset in generateId()\n. Wops, on my branch I changed the WA version, so you should use also the old md5 for classes.dex \"L4xgDRtdSXruKt9nKruHtw==\"\n. Also the official client is sending id \"abcdef0123456789\" for requesting token, so I have put that on the code request function. Anyway we should check if we send another id when requesting the code that id can be used for login or not.\n. Ok, it looks like the login using device \"Android\" and version \"WhatsApp/2.11.23\" is broken for password got with the latest registration mechanism. However it is sill working it you claims to be an old S40 client. Try this:\nconst WHATSAPP_DEVICE = 'S40';                      // The device name.\n const WHATSAPP_VER = '2.11.1';                // The WhatsApp version.\nand you should be able to login with the password you got while.\n. So, to summarize:\n- Identity is irrelevant when requesting the code, only for registration\n- Looks like the official client is using the the AES crypted bits as identity for registration. This is really funny because with the old imei based identity you at least needed to know an user IMEI to request the password with the v2/exist, now you can do it just knowing the phone number and the algorithm.\n- Login method has been changed somehow for latest android versions but using the S40 / 2.11.1 bits still works\n. Actually the only problem was using the full WhatsApp/2.XX.YY string. \nThis should fix login:\nhttps://github.com/venomous0x/WhatsAPI/pull/469\n. ",
    "slobo42": "/usr/bin/php -v\nreturns\n\"PHP 5.3.10-1ubuntu3.7\", i read in other issues that 5.3 must be installed.\nedit: tried to install it on an other server, have the same error message.\nTIA :)\n. Inside: protected function processInboundData($data)\nCode: \n          if (strcmp(explode('@', $node->attributeHash['from'])[1], \"s.us\") == 0 && $node->getChild('body') != null) {\n            $this->eventManager()->fire('onGetStatus', array(\n                                                             $this->phoneNumber,\n                                                             $node->attributeHash['from'],\n                                                             $node->attributeHash['type'],\n                                                             $node->attributeHash['id'],\n                                                             $node->attributeHash['t'],\n                                                             $node->children[1]->data\n                                                             ));\n          }\nSeems it doesn't like the \"[1]\" position.\nI will try right now the zip archive.\nedit: I have the same error with the zip archive. You said that the current version is working fine with you, might it be possible that WhatsAPI depends on something else that php5.3+? (i just have read the given exemples, not the core). Thank you.\nedit2: I try to change the if condition by that:\n$thatVar = explode('@', $node->attributeHash['from']);\n                    if (strcmp($thatVar[1], \"s.us\") == 0 && $node->getChild('body') != null)\nStill trying to run exemples, will try again.\n. Thank you @paketecuento for giving the correct methods name you saved me some time :).\nSo I ran whatsapp.php and it seems to work fine, my user received the message.\nThank you @shirioko for your time for this project and answering our questions :). Btw your project WART was very usefull too.\n. Excuse me I'm not sure I understand, are you saying that on each message received the core of WhatsAPI calls sendMessageReceived() ?\n(edit: I have some trouble describing my problem in english; I opened this issue to understand more how WhatsAPI works because when I call my php page, let's say 4 times, I will have the same received message written 4 times. So that's why I wanted to know if I needed a method to tell whatsapp I've received the message or if I must manage this oterwise. Sorry for the bad synthax, I can rewrite it if you want^^)\n. @xX7 thank you for the information, now I know the issue is not because I forget a method. I will look more \nthoroughly my script to see if I have made to many Connect() but I think I will try first putting PollMessages in a loop like you said. I've seen some people doing: for($i = 0; $i < 5; $i++) { w->PollMessages(); }  I don't know why 5, maybe it's to avoid writing sleep(1) to not stress out the server. (Will close the issue if this solved it) :)\n. I ran some tests with this loop on PollMessages and it worked like a charm, the page is not that slow to load so it's good news. You are right, I was over-thinking it but in reality it is quite simple. \nSo, thanks again for giving this helpful information :).\n. Such a fast answer, thank you for the information. I'll try to make this work in my current project (will close issue if works). Best regards.\n. I think almost everything works fine now, just need to get the \"serverReceivedId\" when I sendMessage() and it would be complete. \nMaybe I misread the class and the events file  but it could be usefull to have a getter for the id (as it is protected). \n. Well, my bad, I have anywhere a $node (and I can receive, send text and video). I guess I missed something important ><.\n. It would be nice if you can add an onSendMessage event. We are already familiar with the implementation and usage of the events in WhatsAPI so I'll prefer that over make the function return a value or an object. I bet the \"event\" would win the vote ^^.\n. Looks like the event work, maybe I could have a minor suggestion: when we use events for received messages, the $id is formated like '1381*_-1' and when we use the new event on sent messages the $id is like 'message-1381_***-1' (but it is not a real issue, the event works like a charm, no worry).\nA little reminder for other users, to have the body of the sent message, you can retrieve it like that:\n$msg = $node->getData();\nEdit:\nDon't know how to make annotation to the source code in github, the request is near line 2318:\n$messageHash[\"id\"],\n=>\nltrim($messageHash[\"id\"], 'message-'),\nEdit2:\nWhat I've written about retrieving the id is totally wrong, please see https://github.com/venomous0x/WhatsAPI/issues/484#issuecomment-26148204\nBest regards ^^\n. My bad, it was a wrong and terrible idea. I manage my messages that way, forgot that it was not the normal behaviour of WhatsAPI. I'll blame the fact that it's the end of the week. \nHave a nice week end :). \n. Indeed, I haven't test what I said. Feel guilty to have given wrong advice >_<. Thank you for your time and comprehension.\n. $w = new WhatsProt($sender, $imei, $nickname, FALSE);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->eventManager()->bind(\"onSendMessage\", \"onMessageSent\");\n$w->eventManager()->bind(\"onMessageReceivedServer\", \"onServerReceived\");\n$w->eventManager()->bind(\"onMessageReceivedClient\", \"onClientReceived\");\nWhen I send a message after that, onServerreceived is always executed before onMessageSent, so, is this the normal behaviour or did I missed something? \n. Thank you so much for your answer! I was not looking in the right place. I test a quick fix by moving the fired eventManager() before the waitForServer (need to read more thoroughly whatsprot.class if it is a good idea). \nIf maybe you ask yourself why I needed that behavior, when I am in the onSendMessage event I insert into my database the information on the message (phone, message and the most important, the msg-id that we requested several days ago) and on the onMessageReceivedServer/Client I update a flag to know where is the message currently. (I don't know if it is relevant, but when working with a database I guess it's not that bad that the event onSendMessage is exectued before the two others quoted). Best regards.\n. ",
    "paketecuento": "same problem here :(\nPHP Parse error:  syntax error, unexpected '[' in WhatsAPI/src/php/whatsprot.class.php on line 1695\n. sorry, bad luck :(\ntx  <stream:features>\ntx    <receipt_acks></receipt_acks>\ntx    <status></status>\ntx  </stream:features>\nPHP Fatal error:  Cannot access private property ProtocolNode::$attributeHash in /root/whatsapi/WhatsAPI/src/php/protocol.class.php on line 474\n. tested again... and fail :(\nrunning from linux console (/Whatsapi/tests):\n./whatsapp.php  -s 34XXXXXXXXX adios\nusing proper $sender, $id and $password (previously checked with yowsup-cli)\n```\ndebian:~/whatsapi/WhatsAPI/tests# ./whatsapp.php  -s 34XXXXXXXXX adios\n[] Logging in as 'test' (34XXXXXXXXX)\nPHP Warning:  fopen(countries.csv): failed to open stream: No such file or directory in /root/whatsapi/WhatsAPI/src/php/whatsprot.class.php on line 1422\ntx  \ntx    \ntx    \ntx  \ntx  \ufffd\ufffdZ\ufffd\ufffd\ufffd#H\ufffd\ufffd\u9ea6\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdl\ufffd,\ufffd\ufffd\ufffd-6\\\ufffd\ufffd-0\ufffd}\ufffd\"(C\ufffd\ufffd\ufffdq\ufffdQ\ufffd\ufffd\ufffd(\ufffd\ufffd/\ufffd\ufffdd,\ufffd\u0426\\\ufffdS\ufffd/m\ufffd\n                                                                                                                                                         \ufffd^L\ufffd\ufffdk\ufffdUxcN\ufffdG\ufffd\ufffd\ufffd}\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd;\ufffd4\ufffd\ufffd\ufffdR\nrx  \nrx  \nrx    \nrx  \nrx  \ufffd  x\ufffd\ufffd\ufffdH\ufffdH\ufffd[\ufffd@w\ufffd(\ufffd\nrx  \ntx  \ntx    \ntx  \nrx  \nrx    \nrx  \ntx  \n[] Request last seen 34XXXXXXXXX: PHP Fatal error:  Call to undefined method WhatsProt::RequestLastSeen() in /root/whatsapi/WhatsAPI/tests/whatsapp.php on line 99\n```\n. ok, updated code in whatsapp.php and everything working..\nline 69 --> sendGetRequestLastSeen (RequestLastSeen)\nline 73 --> sendMessage(Message)\nline 99 --> sendGetRequestLastSeen (RequestLastSeen)\nline 102 --> sendMessage(Message)\n. ",
    "d3ivys": "Hi Guys!!.. \nI am a new user and wanted to use WhatsAPI. I'm having some issues configuring the API. I can send messages, I can see the status of my contacts.. But I can't receive any messages. In the log file I get this error: Call to undefined method WhatsProt::pollMessages() in /var/www/testw/Chat-API-master/examples/ajaxDemo/socket.php on line 113.\nIn the ajax response I get this data and I think is an encrypted message:\ntx  \ufffd\ufffdd/50764182855\ufffd\ufffd\ufffdZ'\ufffd*\ufffd\u007f\ufffd\ufffd)\u001e0eIaL2\ufffd1442266328\nrx  \nrx  stream:features/stream:features\nrx   \ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd`\ufffdQ\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdY\ufffd\ntx  `n\ub504\ufffd#\u007f\ufffd\u0006 h\u0004\ufffd\ufffd\ufffd\ufffd\u007ftcF#\ufffd\ufffdb\ufffd\ufffd\ufffda}s\ufffd\ufffd\nrx   \ufffd\u0006!\ufffd\ufffd\ufffdi\ufffd\u0004x\ufffd\ufffdY 5s\ufffd\ufffd\ufffd\ntx  \ntx  \nrx  \ntx  \nrx  \nrx    \nrx  \nrx  \nrx  \nrx  \nrx  \nrx    \nrx  \nrx  \nrx    3 !\u0005\u001a\ufffd[\u0794\u0014\ufffdB\ufffd\ufffdj\ufffd\ufffd\ufffd \b\ufffd\ufffd:\ufffd\ufffdF,B3_\ufffdWt\u0018E`\u0010h\u0018\u0001\"\u0010l\ufffd M\b\ufffd\u0006ni\ufffd]}\"\ufffd\ufffdGe\ufffd_\ufffdq\u0014\nrx  \ntx  \nrx  \nThanks a lot.\n. @mgp25 Thank you for your response!!..\nI did downloaded the last update, but I still have the same issues. ='( Can you provide me the link to download? Thank you.\nNote: I'm using the ajaxDemo at the example folder. \nI apologize for my english. \n. ",
    "iceherosubzero": "Hello, \nI too was trying to use ChatAPI for sending messages to whatsapp from php, but I had some errors when I uploaded and ran my php scripts on php version 5.3.3 on my server.\nThe first error was \"Unexpected '[' in whatsprot.class.php on line 43\" and when I uploaded to a later version of php 5.4.45 or later I got this output \ntx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  ef26f0d79aa125f61303e290e4371da078af5854\ntx  359f18fdea7af3396aadcffa49d7db7b6c23e19ba3b52f29332bc4d929ee6547382d43ee9e078d3778310c66ff49b5058fdc79ae2b46b93ef958db776e986d9b395365c65ba8da6f94ddf3e04005\nrx  \nrx    \nrx  \nbut I can't understand what this means. and my server logs had log errors as below (Image attached)\n\nCan anybody please help me understand what does this mean and how to fix this errors.\nBelow is the php code I used for sending msg to my friend on whatsapp.\n<?php\nrequire_once ('src/whatsprot.class.php');\n$username = \"xxxxxxxxxxxx\"; //Mobile Phone prefixed with country code so for india it will be 91xxxxxxxx\n$password = \"my password\";\n$w = new WhatsProt($username, 0, \"msg title\", true); //Name your application by replacing \u201cWhatsApp Messaging\u201d\n$w->connect();\n$w->loginWithPassword($password);\n$target = 'receiver number'; //Target Phone,reciever phone\n$message = 'Hello User !! This is a Tutorial for sending messages via php to WhatsApp Account';\n$w->SendPresenceSubscription($target); //Let us first send presence to user\n$w->sendMessage($target,$message ); // Send Message\necho \"Message Sent Successfully\";\n?>\nThanks,\niceheros\n. ",
    "l3l4c7-h4t": "tnx.\nso when i Send $w->codeRegister('123456'); Where password is displayed or Saved ?\n. pls check this link: http://rap.garenahack.ir/wap/src/php/exampleRegister.php\ni have a error in \nParse error: syntax error, unexpected T_STATIC in /home3/getdotai/rap/wap/src/php/whatsprot.class.php on line 89\nwhy ?\n. Im Using: \n    PHP version: 5.2.17\n    cURL version: 7.24.0\n. Sir, I Update Php to 5.3 and every thing is ok ,\nbut im adding this code in exampleRegister.php don't show Password:|\n$res = $w->codeRegister(\"myrecivecode\");\n$password = $res[\"pw\"];\necho  $password;\nwhat is wrong ?\ni thing above code i adding in other page :-?\n. how ?\ncan u show me simple code ?\n. Im Wating ...\n. Tanx :D @shirioko \n. It's not Solution .... just Kiding ...\nbut im wating yet .... :-s\nhow can i by pass block whatsapp ? :-s\nany idea ? :-/\n@brittson \n. ",
    "MaSydJun": "I have the same problem, when trying to do codeRequest().\nI tried to modify the WhatsApp version in the WHATSAPP_USER_AGENT constant:\n    const WHATSAPP_USER_AGENT = 'WhatsApp/2.11.23 Android/4.2.1 Device/GalaxyS3';\nbut then i get:\nstdClass Object\n(\n    [status] => fail\n    [reason] => bad_token\n)\nbut i dont know if thats the WHATSAPP_TOKEN constant or the $identity that i pass to the constructor of the WhatsPort class...\n. The README says i can use Mono. I use GNU/Linux so this is the only option.\nBut how do i Build the binary, cause there is no Makefile or something like that.\nAlso there is a 'WhatsAppApi.dll' file within the Resources folder, i bet this one only works with windows, right?\nEDIT: Ok, i managed to build it with xbuild. Too easy. Anyway, thank you!\n. Well, thats cool. Didn't know that this works on my Linux machine.\nUnfortunately, i always get \"Could not request verification code\".\nI tried to debug the program but i can't debug into the API, since it's provided by the dll file\n. ",
    "maaximal": "First request a code with this script:\nphp\n$username = \"your phone number including country code without + or 0\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$w->requestCode();\nThen paste the code in this script and let it run:\nphp\n$username = \"your phone number including country code without + or 0\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->codeRegister(\"ENTER SMS CODE YOU RECEIVED HERE\");\n$password = $result->pw;\necho \"Password is $password\";\n. First request a code with this script:\nphp\n$username = \"your phone number including country code without + or 0\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$w->requestCode();\nThen paste the code in this script and let it run:\nphp\n$username = \"your phone number including country code without + or 0\";\n$token = md5($username);\n$nickname = \"Derp\";\n$w = new WhatsProt($username, $token, $nickname, true);\n$result = $w->codeRegister(\"ENTER SMS CODE YOU RECEIVED HERE\");\n$password = $result->pw;\necho \"Password is $password\";\n. Yes i am using it.\n. You can not use the number on two devicws at the same time. When a devic logs in while the other is logged in, the logged in gets kicked. I recommwnd using a number from a free sim card\n. ",
    "karteek10600": "hi, im working on this whatsapi from the past one month. its working good for my mobile number.but recently when im trying to register a new number with this api im getting an error registration message like this:\nArray\n(\n    [cc] => 91\n    [in] => 9703636721\n    [id] => %ea%03-%fe%fdp%98%be%a1%7b%27m%c0%2c9%18%27ef%e0\n    [code] => **\n    [c] => cookie\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => mismatch\n    [retry_after] => 2\n)\nPHP Fatal error:  Uncaught exception 'Exception' with message 'An error occurred registering the registration code from WhatsApp.' in /var/www/whatsapp1/WhatsAPI/src/php/whatsprot.class.php:233\nStack trace:\n0 /var/www/whatsapp1/WhatsAPI/tests/listen.php(9): WhatsProt->codeRegister('**')\n1 {main}\nthrown in /var/www/whatsapp1/WhatsAPI/src/php/whatsprot.class.php on line 233\ni have recently updated the USER_AGENT_TOKEN, and WHATSAPP_VER also,eventhough im getting the same error message. can anyone please help me with this?\n. this mismatch thing is due to the token,i think whatsapp has changed it,so\nbetter use WART where u can directly sniff the password...\nhttps://github.com/shirioko/WART\nOn Sat, Nov 8, 2014 at 12:11 PM, karan19901990 notifications@github.com\nwrote:\n\ni have also a same mismatch problem\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/450#issuecomment-62248100.\n. \n",
    "douma": "[reason] => mismatch\nSame issue here. \n. Wow really? Ehm no. The code I entered is correct, entered it without the hypen. \n. Btw if you leave the hypen in it you receive a different error:\n[reason] => bad_param [param] => code ) \n. Unfortunately no... The code always worked fine for me... \n. ",
    "AnanasPie": "Hi all,\nI am testing Kaank code, and i get the following error: bad_token;\nAnyone can suggest what is the issue?\n. ",
    "ramesh4321": "i got the error login failed:not authorized how to slove these error \n. ",
    "MarcoStuurman": "Fatal error: Uncaught exception 'Exception' with message 'BinTreeNodeReader->readListSize: Invalid token 242' in ......./protocol.class.php:334\nStack trace:\n0 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/protocol.class.php(288): BinTreeNodeReader->readListSize(242)\n1 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/protocol.class.php(222): BinTreeNodeReader->nextTreeInternal()\n2 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/whatsprot.class.php(1676): BinTreeNodeReader->nextTree('??d????+?????P?...')\n3 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/whatsprot.class.php(428): WhatsProt->processInboundData('??d????+?????P?...')\n4 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/whatsprot.class.php(1289): WhatsProt->pollMessages()\n5 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/whatsprot.class.php(2382): WhatsProt->waitForServer('message-dfsdf...')\n6 /ssd/www/vhosts/whatsapp.vi/overige/newdeps/whatsprot.class.php(898): WhatsProt->sendMessageNode('123123123123@s.w...', Object(ProtocolNode))\n7 /ssd/www in /ssd/www/vhosts/whatsapp.vi/overige/newdeps/protocol.class.php on line 334\nSame issue, (cellphonenumber and path are removed)\nI think it hase something todo with this: \"??d????+?????P?...\" (#2/#3)\n. Does anyone have an idea why this is happening?\n. ",
    "ciph3rIT": "@xX7 tried with a different number on which I have never used Whatsapp. Still the same error.\n\"Error: There was an error with the AJAX request. The request timed out.\"\n. @mgp25 Awesome. Thank you. It's working now.\nThanks again.\n. Would this work for multiple connections if I just want to query the last seen time?\nCurrently, I am only concerned about querying the last seen time for contact by \n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->sendGetRequestLastSeen($dst);\nBut this creates a new connection everytime the php file is refreshed.\nIs it possible that another file keeps connection open in the background and the input in accepted by a file which only calls  sendGetRequestLastSeen($dst) without having to create an object and login?\nThanks...\n. Thanks @mgp25 \nTried it...doesn't work in my case. What I did was to use just one file, the first time it would get into a loop, the second time it will not. I am getting the error \"Object dooes not exist\" or timeout in protocol.class.php\nThe issue is I have to POST target numbers to the script at run time and not have it defined in a file or script before hand.\n//file name which will be created later\n$my_file = '123321' . '.txt';\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n//It would not jump the first time but second time will, without logging in.\nif (file_exists($my_file)) goto abc;\n//logs in first time\n$wa->loginWithPassword($password);\n//creates file the first time\n$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file); //implicitly creates file\n//infinite loop to keep the session active. The method looks up the last seen time but does not print or echo it\n:looped\n$wa->looping($dst);\ngoto looped;\n//Jumps here second time without logging in\n:abc\n$wa->sendGetRequestLastSeen($dst);\n:\n. Thanks for your help @mgp25 I am running some tests...getting somewhere now :+1: Will update you soon...\n. yes sir,  same thing...\nI was trying to dissect contactsync and contacts...it doesn't need to login to fetch the status and last seen. Is that true? Does it get it by just creating a new object of WhatsAppContactSync and then calling executeSync?\nIf that is the case, then I don't really need to use\n$wa = new WhatsProt($sender, $imei, $nickname, false);\n$wa->connect();\n$wa->loginWithPassword($password);\nand cause multiple logins....\n. You are right. Then what is $contact['lastupdate'] in the array?\n. Isn't that $contact['status'] ? \n. @shirioko okay thanks...got it.\n@mgp25 still can't get around the multiple login problem...I don't know how you are making it work for multiple POST to PHP without multiple login's. Could you please paste your full code? Thanks..\n. ",
    "Medanaresh": "hi, i am getting an error when i select the send message option i.e is   \"Error: There was an error with the AJAX request. The request timed out.\",  can you help me\n. ",
    "NulByte": "@shirioko \noh sorry :) in a moment. fixed\n. @atans  use WART\nhttps://github.com/shirioko/WART\n. you right... \nbut, I might missing something. I created an event as followed: \n\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture(\"TargetPhoneNumber\\0\");\n$w->PollMessages();\n\nand created method onGetProfilePicture:\n\nfunction onGetProfilePicture($from, $type, $data)\n{\n    print \"Saving \\n\";\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $from . \".jpg\";\n    } else {\n        $filename = $from . \".jpg\";\n    }\n    print $filename;\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\".$filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n\nbut the $from variable is assigned with my number instead of the target.\nand the picture is not valid. \nso the file creating is \"MyPhoneNumber\".jpg\nand is not valid.\njust mentioning the data of the picture that is created is the string \"preview\"\nby the way, sorry for creating issue for this. but there should be a check for 404 . may I add a check and commit?\n. I'll do it. but do you know what is the problem? with that \"preview\" string inside the picture.\nI am having trouble following the code without IDE I guess it's something with the variable data that is not properly assigned. \n. I found the error. ill upload a fix in a second\n. Before: \nfunction onGetProfilePicture($from, $type, $data)\n{\n    print \"Saving \\n\";\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    print $filename;\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\".$filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n\nAfter:\n\nfunction onGetProfilePicture($from,$target, $type, $data)\n{\n    print \"Saving \\n\";\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    print $filename;\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\".$filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n\n. ",
    "c0nstructor": "Great. @shirioko I was having the same issue with ajaxdemo. socket.php needs to be updated too.\nThanks.\n. ",
    "Bashin": "Same here..\nRegistered with WART or manually via PHP and always got successfull status my id back and a new pass. Tried it with 2 different numbers, with or without countrycode, with or without salt, always the same result.\nGot no problems with registration process or even logging in and sending messages on yowsup so numbers can't be blocked.\nATM i'm registered and able to send messages via yowsup, so the pass must be ok. Left the id field blank during yowsup registration process and didn't need to enter an id to send messages. So what is my ID ???\nThanks!\n. I don't get it. Skimmed through all functions using the id, none of them is used during login process. So i assume the id is used during registration and unnecessary for later use? Why can I login and send messages in yowsup? Is the login broken in whatsapi?\n. Ok, last question: is it hard to fix?\nThanks for patience :)\n. Just post the changes here I got a number for testing..\n. My code:\n```\nrequire('src/whatsprot.class.php');\necho '';\ntry {\n    $w = new WhatsProt('myphonenumberwithcc', 'empty', 'mynickname', true);\n    $w->connect();\n    $w->loginWithPassword('myworkingpwfromyowsup');\n} catch (Exception $e) {\n    echo $e->getMessage();\n}\necho '';\n```\nWith the latest build I get:\n```\ntx  \ntx    \ntx    \ntx  \ntx  \nrx  \nrx  \nrx    \nrx  \nrx  challengedata\ntx  responsedata\nrx  \nrx    \nrx  \ntx  \n```\n. > Login method has been changed somehow for latest android versions but using the S40 / 2.11.1 bits still works\nConfirmed\n. My fault.. just close and ignore\n. Same problem as slobo42.. I can't see a way to get the message id at the moment I call sendMessage without changing api code.\nI need the id to check whether the message was received by server and client so sendMessage should return the id and everything is fine.\nWhat is the use of waitForServer at this point? Do we really need it? You can check whether your message was received manually so why do it automatically everytime you send a message?\n. @jonnywilliamson yes I use Windows. I tried sending 10 messages without waitForServer and all messages were received by both client and server and the connection was still ok. But yes Windows might be just a little slower ;-)\nOk there might be a need for this function, but why does the sendMessage method not return the ID? Is there something I just don't get?\nJust change line 898 to:\nreturn $this->sendMessageNode($to, $bodyNode);\nAnd add line 2418:\nreturn $messageHash[\"id\"];\nWorks for me..\n. Please tell me how I could assign the id to the message because the event does not know to which message the id belongs. Then I'd prefer the event.\nOtherwise just add a return to all the functions sending messages :-)\n. ",
    "jeky--": "I had the same feeling, the data retrived from this method are wrong in most of case!\n. May be it was a temporary problem. Thanks\n. ",
    "cappi10": "Got it working! Thanks!\nYes i did not know how to login because i could not find any recent documentation.\n. ",
    "7aduta": "thanks this did the trick :)\nbut now i get this \nUSAGE: [-l] [-s ] [-i ] [-set ] phone: full number including country code, without '+' or '00' -s: send message -l: listen for new messages -i: interactive conversation with -set: Set Status to \nand i did enter the number with out any + or 00 \n. thanks too much for your support \nbut i checked this tutorial and i found that i must get\nhttp://blog.philippheckel.com/2013/07/07/send-whatsapp-messages-via-php-script-using-whatsapi/\nuser Identity\nwhat about it !!!?\n. the wart return me with error message could not request verification code the remote server returned an error : (404) Not Found :(\n. nothing !!\n{\"status\":\"fail\",\"reason\":\"missing_param\",\"param\":\"mcc\"}\nthe message of the link \n. then what is the problem !!\n. i did used 1.5.4.0 and get error :(\n. the error with the media file in the token.php\nsolve it :)\n. if i have to members in the site and i wanna send first message to first want and delay the second one for 1 minute\nis that possible ?\n. but i have to be in the page when the loop is sending \nif i want to do it and close the page\ni must use corn ?\n. i want to send to users without open the page\ni want to send and close the page and its still sending \nthen stop after he finish the members \nany help on that ?\n. @Saeger !!! why?  i'm develop a plugin for wordpress that send whats app messages to roles and groups\nif you saw that as spam it's up to you man :)\n. can you provide an example of it please :)\n. could you provide my with such example or tutorial because i searched for a good tutorial and didt't get it right !! \n. $username = '000000';\n$identity = ''; \n$nickname = 'John Doe';\n$debug = true;\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->codeRequest('sms');\nuse this code\n. there are two files for examples you can start there :)\n. ",
    "rajshardel": "I can send the message from linux terminal and also from browser yowsup php file using terminal code in the following url.\nhttp://xxx.com/yowsup-master/src/sendmsg.php\ngot sent receipt \nBut when I send message using php script as in whatsapp_updated folder whatsapp_whatsapi_send.php using following url\nhttp://xxx.com/whatsapp_updated/whatsapp_whatsapi_send.php\n I get following failuretx error: How to remove failuretx and send messages using php script \nfailuretx  stream:features/stream:features\ntx  h^[917503722722\ufffd\u0019H\ufffd\ufffd\u001b\ufffd\u001b\ufffd\u001f&\ufffd&l\ufffd\ufffdh\ufffdY1400499574WhatsApp/2.11.209 Android/4.3 Device/GalaxyS3 MccMnc/404001\nrx  \nrx  stream:features/stream:features\nrx  \ufffd\ufffdOOd\ufffdk\ufffdt3\u0001\ufffdjYRW\ufffd\ufffd\u0004\ntx  '*/\u0014\ufffd\f\ufffdF(\ufffd-(\u001f\u0018\ufffd\ufffd\u001f \ufffdi\u001b we\u000b\ufffd!\ufffd\ufffdp\ufffd\ufffd\ufffd\ufffd\nrx  E\ufffd\ufffd\u0012\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdh\ufffd\ufffd\ufffdc)\nrx  \n. full failuretx error message is as follows \nfailuretx  stream:features/stream:features\ntx  \ufffdR\ufffd\ufffd917503722722E\ufffd\ufffd\u0012\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdh\ufffd\ufffd\ufffdc)1400500634WhatsApp/2.11.209 Android/4.3 Device/GalaxyS3 MccMnc/404001\nrx  \nrx  stream:features/stream:features\nrx  \ufffdc\u0010\ufffd|v;\ufffd\ufffdq\ufffd\ufffd\f\u054dl5\ufffd\ufffd\ufffd\ntx  \ufffd\u001b\ufffdq\u0012B\ufffd\ufffd\ufffd\ufffd\ufffd\ufffd|\ufffd}\ufffd\ufffd\b \u0016+u\ufffdC%\u0006o\ufffd\ufffd;\u0001\ufffd\u02cf\"m\nrx  \u0012\u0010\u0001\ufffd1D\ufffd\ufffd\ufffd-QUF\ufffdMxP+_\nrx  \n. ",
    "jesugmz": "Wow!! Thanks a lot, its work. Thanks for your time ;)\n. ",
    "marwanzak": "how about to use long polling with handling messages in database?\n. $w->eventManager()->bind(\"onGetImage\", \"onGetImage\");\ndidn't get the image\n. php\nfunction onGetImage($mynumber, $from, $id, $type, $time, $name, $size, $url, $file, $mimetype, $filehash, $width, $height, $preview)\n    {\n        echo \"url is: \" . $url;\n    }\n        $w = new WhatsProt ( $number, $identity, $nick, false );\n        $w->eventManager()->bind(\"onGetImage\", \"onGetImage\");\n        $w->connect ();\n        $w->loginWithPassword ( $password);\n        $w->pollMessages ();\nI did use the function.\nI tried to use onGetMessage, it worked for voice message and text message.\nBut onGetImage and onGetVideo didn't.\nWhen I login and poll messages, the messages appear in the mobile app that received.\nBut the video and image message didn't.\nThanks for help.\n. No errors. It shows that image received.\nIt works now.\nI don't know why it didn't work before.\nThanks.\n. any help?\n. It's ok, checkCredentials must gives me a new password with status \"ok\" if I use the same identity. but it gives me status \"incorrect\" not \"ok\".\n. No, only using the api. I registered the number one time on this api, after that, I tried to checkCredentials and it gave status incorrect.\nIn addition, I tried WART on another number. Regisered the number on WART and get the password. But when I tried to check the same number, it gave me the same problem.\nI saw this problem only on new registered numbers. The old registered numbers give ok status.\nSorry about my English :).\n. Now I can. maybe it was temporarily from the server or something.\nRegards,\n. ",
    "cnel-xx": "I download from here https://github.com/venomous0x/WhatsAPI\nand getting same error.\n. i need script must be in php that's why i can't use WART\n. thanks i get the password can you tell me how get we profile picture .\n. Hello i get some row format response : tx tx tx tx tx \u00f6\u00cc[ \u00a9\u2014\u000e\u00d6\u0015!s\u00eb\u0005\u00c0u\u02c6F\u00f3\u001ef\u0007\u2019\"e\u00a96:X\u00c9\u008dWa\u001a&\u00c1;d\u001bD\u017e\u00e5|3\u00fb\u001by7\u00c0c\u00ce\u00c3c\u201ad\u00d2\u00e1\u017dR6r\u00deO\u2030\u0016Z-9d\u0004\u0007\u00bb>\u008d\u00fc\u00d1\u00c1\u001ci\u00fbg\u007f\u00a9\u00ea2\u00c0\u00b8 \u00cc\u00d2\f\u2039a[\u00fdj\u0011\u00aa\u00cc$\u00fc\u001f\u0016\u2039\u0001 rx rx rx rx rx rx \u00c3'\u001dY\u00b0` \u02c6J{\u00f2\u00a7\u017d\u00b9\u0014\u00ff\u00d4\u00be rx rx rx tx tx tx tx rx rx rx 55531 byte data rx \n. hello thank you so much i have got it .\nand api is working.\nI recommend all of user to use this api\nThank you so much and a big huge for you.\n. is it possible to use whatsup api and whats up simultaneously?\n. ",
    "PepperNg": "Works perfectly now, thanks!\n. ",
    "rami-dabain": "ok cool :) thanks bro\nOn 10 Oct 2013 18:35, \"Max Kovaljov\" notifications@github.com wrote:\n\nNo, the second login will deauthenticate the first one, so only one of\nthem will be able to run\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/489#issuecomment-26064292\n.\n. \n",
    "Pronin": "Thank you man!\n. ",
    "iamajeesh": "so whatsapp is not using xmpp ?\n. okay thanks :)\n. ",
    "rahulchipad06": "I tried this code to get participants of groups but it is not working.i am not getting any error or resultset of participants.\nset_time_limit(10);\nrequire 'whatsprot.class.php';\n$debug = true;\n/* get group participants /\nfunction onParticipants($phone, $groupId, $groupList)\n{\n   var_dump($phone, $groupId, $groupList);\n}\n$number = '91*_87';\n$w = new WhatsProt($number, 'e807**_a19f', 'rahul', false);\n$w->eventManager()->bind(\"onGetGroupParticipants\", \"onParticipants\");\n$w->connect();\n$w->loginWithPassword('2j***_VT/A=');\n$w->sendGetGroupsParticipants('91*_-141**68'); //group id\nfor($i = 0; $i < 5; $i++) {\n    $w->pollMessage();\n}\n. ",
    "ExAn1mus": "Hi, i'm new here and just messing with this wonderful project.\nDon't take my code too seriously, but try this...\nBEFORE your\nphp\nwhile (true)\n{\n$w->PollMessages();\n$msgs = $w->GetMessages();\n....\ndefine this function\nphp\nfunction onGetMessage($phone, $from, $msgid, $type, $time, $name, $message)\n{\n    echo \"Message phone: \\t $phone \\n\";\n    echo \"Message from: \\t $from \\n\";\n    echo \"Message msgid: \\t $msgid \\n\";\n    echo \"Message type: \\t $type \\n\";\n    echo \"Message time: \\t \".date(\"d/m/Y  H:i:s\",$time).\" \\n\";\n    echo \"Message name: \\t $name \\n\";\n    echo \"Message message: \\t $message \\n\"; \n}\n...then, add the listener...\nphp\n$w->eventManager()->bind('onGetMessage', 'onGetMessage');\nand finally, modify your while loop like this...\n``` php\n    while (TRUE) {\n   $w->pollMessages();\n    $data = $w->getMessages();\n\n    sleep(10);\n}\n\n```\nWhen you receive a message, an event is fired, and a function is called to handle the data.\nFeel free to comment / bash on my code.... still trying to figure out how it all works :)\nPS: Just out of curiosity, why are you using mysql over sqlite3 ? \n. Are you sure the message comes from WhatsApp and not from this line of code ?\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/exampleFunctional.php#L112\nAnd you are getting stormed with that message because you fail to acknowledge it, so it gets sent over and over ?\n. @zhazhago are you sending messages to yourself ? if so, read : https://github.com/venomous0x/WhatsAPI/issues/502\n. @sexyhoney hmmm so you are pulling an update inserting your personal details (phone # and mac ? ).\nDon't think that was intentional... check that out.\n. @shirioko how often is it safe to sync the phonebook (a.k.a, how often is it synced with the real WA client)? once a session / day / week / ... ?\nIs it also required that the recipient has you in his phonebook ?\n. @mofakfree if you are having problems registering new number (that's where the $identity token comes from..) use WART ( https://github.com/shirioko/WART ) , I actually used this for registering and it gave me everything I needed to config everything correctly.\nBTW, $identity = 'e807f1fcf82d132f9bb018ca6738a19f' = md5('1234567890')\n. WHATSAPP_USER_AGENT = 'WhatsApp/2.11.69 Android/4.3 Device/GalaxyS3';\nand I have $identity generated by WART in the form of '%3c%de%43g%56%f7%d0k%ef4%dd......................'\nIt's been a while since I sent last message (10+ days ago) I used to send like 20-30 messages and photos to myself to figure out how it works, now I'm just looping to get my friends online/offline state. I run the script for hours and hours, it's stable though sometimes it disconnects.\n. @jesussales have you tried sending the messages from your pc then, instead of using a webserver, and see if you get same error ?\n. Have you synced phonebook yet at least once with the numbers you are sending messages to ?\nDo the recipients have you in their phonebook ?\n. @shirioko sounds they patched yet another security bug... http://foosec.com/docs/whatsapp.html  :)\n. ",
    "dungphanquoc": "@ExAn1mus: Thank you for your reply. I tried with that way before but it have same problem.\n. @mgp25: Thanks. How can i contact with you? My Y!M id is lookingforback. Sorry, i am new bie on this site.\n. @mgp25 :+1: \nThank you very much. I found where is problem. I think flush(); ob_flush();   is reason of the problem. I changed it to insert a record to database and it is ok.\n. ",
    "radonthetyrant": "Hi\nI did that.\nI got the code per SMS, I used my phone number with +49 country code. Do I need to leave the $imei field blank?\nI try to use the tests/whatsapp.php with cmdline\nphp whatsapp.php -l -s {my phone number} \"Hello test\"\nhere is what is printed:\n[] Logging in as 'WhatsAPI Test' (+49157xxxxxxxxxx)\ntx  stream:features\ntx    \ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features\nrx    \nrx    /w:profile:picture\nrx  /stream:features\nrx  \u2592q\u2592\uf21a_x\u2592\u2592`\u2592\u2592+\ntx  \u2592\u2592G\u2592I\u2592+\u2592G/\u2592\u2592An\u2592\u2592Z\u2592@Wp\\\u2592\u2592\u2592:I\u2592\u2592g\u2592\u2592\u2592g\u2592Z\u070b\u2592+\u2592\u2592\nrx  \nrx    \nrx  \ntx  \n[] Listen mode:\nSeems like it doesn't work. Same problem if i leave the $imei blank.\n. Really? Altough there is something like \"not-authorized\" in the response xml?\nI really need a second sim card to test this..\n. ",
    "KSas": "I have the same problem with all original classes and files.\n. How do u logout from whatsapp? There's no way in the api!\n. ",
    "tha619": "I did both. So you mean it\u00b4s a firewall problem? It could be, because I\u00b4m in company.\nBut now i get from the webserver sehll the answer: is not an allowed 32 Bit application.\n. ok, so i will test if my ports are open? is it 443? then i will test it at home.\nto here thank you very much :)\n. I will test it, an give feedback on monday. thank you guys very much!\n. ",
    "Laurens0619": "I exactly have the same problem\nMy onGetImage event is not being raised by every picture sending to my whatsapp account. I've tested this with several images and strangely enough some pictures never can be received by the api and some messages can always be received by the API. \nedit: I've enabled the debug option and there is no media message passing by in the data source. \nI've tried the same image using the YowSup library and this api is showing every image being passed to the sample application. Does anyone else has this problem? I'm doubting my own code now in php...\n. ",
    "zhazhago": "```\n$pn = new ProcessNode($w, $target);\n$w->setNewMessageBind($pn);\nwhile (1) {\n    $w->pollMessages();\n    $msgs = $w->getMessages();\nforeach ($msgs as $m) {\n    # process inbound messages\n    print($m->NodeString(\"\") . \"\\n\");\n\n    //var_dump($m);\n}\n\n}\n```\nWhere shall I add msg ack?\nand ack should be \n$this->$w->sendMessageReceived($pn)\nright  ?\n. Then, why got stormed?\n. should not each non 5 msg triggers one \"I'm sorry, try again!\" only?!\n. @shirioko @ExAn1mus I did not send msg to myself. Yes, I was wrong by not replying 5 and i understand each non 5 reply will result in a \"I'm sorry, try again!\". \nThank @mgp25 for pointing out the cause of this issue. \nBut there is still one thing I dont quite understand. Look at the screenshot, The number of \"I'm sorry, try again!\" is more than the number of message I have sent. Why?\n. @mgp25 \nNo, I did not touch the sample code\n. ",
    "cmunk": "rx  failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"\nrx    not-authorized /not-authorized\nrx  /failure\n. I tried a new php host and a new number .. after registering I still get this:\ntx  stream:features\ntx    receipt_acks/receipt_acks\ntx    status/status\ntx  /stream:features\ntx  auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"16137776XXX\"/auth\nrx  start from=\"s.whatsapp.net\"/start\nrx  stream:features\nrx    receipt_acks/receipt_acks\nrx    w:profile:picture type=\"all\"/w:profile:picture\nrx  /stream:features\nrx  challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"n\u2014\u00a9\u00dc\u00ca \u00d5]O\u00d9\u00c5\u0007\u00a3A\u001c1X\u00faj\u0001/challenge\ntx  response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"` MW\u00a1^\u00bc\u00c4\u203a\u008d\u00c4\u00c1\u00f8\u00f8\u00b2(\u00d5\u00e0\u00edOb\u00abu\u00bdM\u00d9#J\u00dd\u0014|-..z!\u02dc9\u00ec\u00b3\u001f (\u00fe/response\nrx  failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\"\nrx    not-authorized/not-authorized\nrx  /failure\ntx  presence type=\"available\" name=\"Snuggles\"/presence\ntx  iq id=\"getgroups-1384632814-1\" type=\"get\" to=\"g.us\"\ntx    list xmlns=\"w:g\" type=\"participating\"/list\ntx  /iq\n. I run the register script:\n$w->codeRegister('772310');\nArray ( [cc] => 1 [in] => 9292276509 [to] => 19292276XXX [lg] => en [lc] => US [method] => sms [mcc] => 310 [mnc] => 001 [token] => PPFlVNBHyWtArk2y%2FcngjIRauzEXXX [id] => %da9%a3%ee%5ekk%0d2u%bf%ef%95%60%18%90%af%d8%07XXX ) stdClass Object ( [status] => ok [login] => 19292276XXX [pw] => Ich8MNIyqqbWp92g2gu7n6/KRXXX [type] => existing [expiration] => 1416155928 [kind] => free [price] => $0.99 [cost] => 0.99 [currency] => USD [price_expiration] => 1387714825 ) \nThen put those into script:\n$username = \"19292276XXX\";\n$identity = \"%da9%a3%ee%5ekk%0d2u%bf%ef%95%60%18%90%af%d8%07XXX\"; \n$password = \"Ich8MNIyqqbWp92g2gu7n6/KRXXX\";\n$w = new WhatsProt($username, $identity, $nickname,$debug);\n$w->connect();\n$w->loginWithPassword($password);\nThat gives the above error msg with 'not auth'ed' ... I don't understand what's wrong\n. Sorry, I figured it out. I was calling the $w->codeRegister('772310'); line when i shouldnt.\n. ",
    "muhammadhassan107207": "sir i have error in examoleregistration.php\n. ",
    "Jakmaster199": "How can i set debug mode on? i have deleted the comments on \"Listen\" function... so it's now as this:\n``` javascript\n    function Listen(initial)\n    {\n        $.ajax({\n            url: \"socket.php\",\n            cache: false,\n            dataType: \"html\",\n            timeout: 70000,\n            method: \"POST\",\n            data: {\n                initial: initial,\n                target: target\n            }\n        }).done(function(data) {\n            if(data)\n            {\n                var foo = $(\"#debug\").text();\n                $(\"#debug\").text(foo + data);\n            };\n            setTimeout(function() {\n                Listen(false)\n            }, 1000);\n        });\n}\n\n```\nAnd it doesn't show nothing :S\n. @mgp25 \nFile index.php points to 3464401;\nand socket.php points like:\n``` php\n$username = \"346688*3\";\n$password = \"jTJ9+ixxl*Ly7bvmTs=\";\n$w = new WhatsProt($username, 0, \"HomeBot\", true);\n$w->connect();\n$w->loginWithPassword($password);\n```\n@shirioko I'm trying to wait... and nothings appears...\n. Hi @shirioko \nI have run it and it gives me the next output:\n``` xml\ntx  \ntx    \ntx    \ntx  \ntx  S\u00f7\u00d3\u00del\u00f4&!\u201a\u00de\u00bb\u201c\u00c9(l\u00ad\u201e\u00dc\"7%0\u00a1 Kc\u00a1\u000e\u00af\u00f2\u00be\u0153\u00a8~\u00a55\u0011W&s\u00e5\u00f2\u00cb[Vmj2\u00bd2\u009d\u00e4U\u0001\u00fb\u001b\u00f6\u017d\u00b3\u20ac\u00f4\u02dcH\u00b8Pa\u00b1\u00bd\u0013\u00fe\u00ff\u02c6_\u00f7&\u00a5Q\u00ac\u00dfO\u017d\u2022\u00de$\u00f8\u00a7\u001cz h\nrx  \nrx  \nrx    \nrx    \nrx  \nrx  \u017d\u00aa\u00d7\u00d9y\u0001Te\u001c\u201a\f0\u2019\u00e4\u201e\u00a8\u0007-\u001b\nrx  \nrx    \nrx  \ntx  \ntx    \ntx  \ntx  \ntx  \nrx  \nrx    \nrx  \n```\nAnd after a few seconds it changes to:\n``` html\nInternal Server Error\nThe server encountered an internal error or misconfiguration and was unable to complete your request.\nPlease contact the server administrator to inform of the time the error occurred and of anything you might have done that may have caused the error.\nMore information about this error may be available in the server error log.\n```\n. ",
    "alaanasreng": "How can i get the response data, y can see this link:\nhttp://smartech-it.com/Whatsapp/src/php/exampleRegister.php\n. i am really use it with this data\n$username = \"201025053800\";\n$identity = strtolower(urlencode(sha1($username, true))); // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$nickname = 'Eng Alaa Nasr';\n. mgp25\nI really use this:\nphp\n\n<prequire_once('whatsprot.class.php');\n$username = '20102505300';                      // Telephone number including the country code without '+' or '00'.\n$nickname = 'Eng Alaa Nasr';                         // This is the username displayed by WhatsApp clients.\n$w = new WhatsProt($username, $identity, $nickname, TRUE);\n$w->codeRequest('sms');\n?>\nand when i call this link: http://smartech-it.com/Whatsapp/src/php/exampleRegister.php \nprint:\nArray ( [cc] => 20 [in] => 1025053800 [to] => 201025053800 [lg] => ar [lc] => EG [method] => sms [mcc] => 602 [mnc] => 001 [token] => j%2FGZFmni4ryhqNE0uIeMaBh7GFs%3D [id] => %da9%a3%ee%5ekk%0d2u%bf%ef%95%60%18%90%af%d8%07%09 )\nand the SMS code does't send. Any Help please\n. when i use bulk.php to send message, and pass 50 number to target array the number has been blocked. is there any solve?\n. @shirioko  i am very thanks sir, may be i make error. i try the new and work fine\n. @shirioko  i try WART, but not send the activation code also\n. @shirioko thanks sir, the problem has been solved, and i get the code.\n. ",
    "vishnupatellive": "Is there any alternative of 25 users contact limit????\n. ",
    "patelchandresh": "WHAT'S UP SMS SOFTWARE VIA DESKTOP APPLICATION\nhttps://drive.google.com/file/d/0B5zWD5aoDdVNRHp2czZuVTU1aXM/view?ts=568cf5c7\nmob : 917359668270\npass : IQlNXscLKEO6bKONDoIGZM4keiI=\nnickname : test\n. ",
    "dvlopbiz": "what is this soft http://up402.siz.co.il/up1/quyztwkzjznm.png for get my password? where i can download it?\n. ",
    "Saeger": "@ganySA Just change the pattern of the message. Its obivously that they put a pattern for message like yours from \"new numbers\" or something like that.\nJust put something like: \"Dear Patient: You are scheduled with Dr XXXXXX tomorrow at 09:00pm\"\n(if its tomorrow, you dont need to put the tomorrow`s date, try doing some logic like that).\nGL.\n. @7aduta spammer\n. ",
    "NandoRosado": "I think the trick is to change the hash to the message, if you change the contents of the message for each send, WhatsApp will not ban you.\nEDIT: Not working.\n. Me too!\n. @mgp25 tell me one free service please\n. ",
    "wickedguy": "What about YOUR number sending to hundreds of numbers and not ONE of them respond back? Could this be a possible filter?\n. ",
    "dkasipovic-zz": "Inbox the picture that I am trying to set?\nIf it helps, same picture is successfuly sent over WhatsApp, it just wont\nset it as profile.\nOn Monday, December 2, 2013, Max Kovaljov wrote:\n\nCan you inbox me the picture so I can figure out what's wrong?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/534#issuecomment-29605600\n.\n\n\n\nDamir Kasipovi\u0107\nemail: dkasipovic@gmail.comhttps://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&to=dkasipovic@gmail.com\nmob: +387 (0)65 979 949\ndkasipovic\n. The smaller version gets created automatically, and it works ok. It also\nreturns  tag, but the image does not get set.\nFile is attached (this is the file created by script, but I think it is the\nrelevant one because thats the one sent to server).\nEDIT: I should have realised that I cannot attach it here. I am sending it to you right now.\nOn Monday, December 2, 2013, Max Kovaljov wrote:\n\nWhat is the response node you get from WhatsApp after you call\nsendSetProfilePicture?\nThe picture should be square and not more then 640x640, but that should be\nhandled by the code:\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/func.php#L32\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/534#issuecomment-29607754\n.\n\n\n\nDamir Kasipovi\u0107\nemail: dkasipovic@gmail.comhttps://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1&to=dkasipovic@gmail.com\nmob: +387 (0)65 979 949\ndkasipovic\n. Thank you,\nIt works as it should. Best regards.\n. ",
    "teleavtomatika": "does any body know which size must be a small logo?\n. I experiance same on many valid accounts: all of my accounts are used on different servers and different client are blocked about exactly 4 hours ago. I have received this error from whats app servers:\n19:37:34, SENT: stream:features>/stream:features>\n19:37:34, SENT: auth passive=\"false\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" m\nechanism=\"WAUTH-2\" user=\"==i removed my number==\">/auth>\n19:37:35, RECVD: start from=\"s.whatsapp.net\">/start>\n19:37:36, RECVD: stream:features>/stream:features\n19:37:36, RECVD:challenge>\"6K?\u2193(5??F??\"7a\u266b)?\n19:37:37, SENT: response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">?\\????Dj+\u2192?\\?\n?/response>I??8h\n19:37:38, RECVD: failure>\n19:37:38, RECVD:   not-authorized>/not-authorized>\n19:37:38, RECVD: /failure>\nAny ideas? \n. I have 3 unused numbers that can't be blocked (cos i don't use them about 3 month), i tried to connect them and they are failed too. I tried chage ip addr and nothing changes.\n. Oughhh, you really encourage me. :)\n. Ok. I'll make same chages to my code and test it after few hour's. I reviewd your pull request it's version and token changes only. Thank you for your great work. \n. Any body know how to regenerate password for new version knowing password for old version? How original app doing this?\n. What you mean \"identity\"? Pin code that sent to me by sms?\n. Ok. I have tried to register new number - all is ok. Now i'm trying to generate new passwords for old accounts. Please, tell me what you mean \"identity\"?\n. Thank you for your answer. I'll try to do this for my old numbers.\n. @domingopa obtain new password and work with a new one.\n. ",
    "A35G": "you develop a page in php, with a\nphp\nini_set (\"max_execution_time\", 3000);\nand sending timed AJAX with parameters that serve to you\n. ",
    "bjornpost": "@thomasvargiu I noticed you have a branch on your fork https://github.com/thomasvargiu/WhatsAPI/tree/2.0 which contains a cleaned up version of WhatsAPI which looks promising. Are you still working on this? What's on your TODO list?\n/cc: @jorisleker\n. Related: #538 \n. ",
    "park23": "nice idea \n. $username = \"your number\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"nick name\", true);\n$result = $w->codeRegister(\"sms code\");\n$password = $result->pw;\necho \"Password is $password\";\n. file countries not exists , check it\n. i already give it\n. get profile avatar not work\nthis is log:\nrx  presence from=\"9xxxxxxxxxxxxxx@s.whatsapp.net\" type=\"available\" /presence\nrx  iq from=\"9xxxxxxxxxxxx@s.whatsapp.net\" id=\"getpicture-1391621241-1\" type=\"result\"\nrx    picture xmlns=\"w:profile:picture\" id=\"1379867838\" type=\"image\" 58111 byte data /picture\nrx  /iq\nthis code:\n      function onGetProfilePicture($from, $type, $data)\n{                    echo 123;\n    if($type == \"preview\")\n    {\n        $filename = $from . \".jpg\";\n    }\n    else\n    {\n        $filename = $from . \".jpg\";\n    }\n    $fp = @fopen($filename, \"w\");\n    if($fp)\n    {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n$username = \"xxxxxxxxxxxxxxxxxxx\";\n$identity = strtolower(urlencode(sha1($username, true)));\n$w = new WhatsProt($username, $identity, \"xxxx\", true);\n$password = 'xxxxxxxxxxxxxxxxxxxxxxxxxxx=';\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture('9xxxxxxxxxxxxx',true);\n$w->PollMessages();\nin the file xxxxxxxxxxxxx.jpg is one word 'image' \nwtf ?\n. this user was in my contacts\n. i know it ,my number have in her/he contacts)  and in my log you can see \"id=\"1379867838\" type=\"image\" 58111 byte data /picture\"  58111 byte , i get the data ,but can't create image from it (\n. @mayankgupta  thank you! now work))\n. wtf ?\n2014-02-16 16:59 GMT+06:00 kareree226 notifications@github.com:\n\n\u0628\u062a\u0627\u0631\u064a\u062e \u0660\u0667\u200f/\u0660\u0662\u200f/\u0662\u0660\u0661\u0664 \u0664:\u0665\u0669 \u0645\u060c \u062c\u0627\u0621 \u0645\u0646 \"OMendoza\" notifications@github.com:\n\n------------------- START: sendSetProfilePicture\ntx\ntx 12243 byte data\ntx 2621 byte data\ntx\nrx\nrx\nrx\nrx\nrx\n------------------- END: sendSetProfilePicture\nHave any idea? Thanks\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/612>\n.\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/612#issuecomment-35193921\n.\n. I'm sorry I did not quite understand the question\n\n2014-02-16 20:09 GMT+06:00 jesussales notifications@github.com:\n\nNormal you can not see the image or new status at the time, in iOS you\nneed close the Whatssap and enter, then your will can see the newest.\nThe Whatssap client not update the status and profiles pictures every\ntime, it update after x minutes\nSaludos Jes\u00fas Sales\n\nEl 16/02/2014, a las 15:04, park23 notifications@github.com escribi\u00f3:\nwtf ?\n2014-02-16 16:59 GMT+06:00 kareree226 notifications@github.com:\n\n\u0628\u062a\u0627\u0631\u064a\u062e \u0660\u0667\u200f/\u0660\u0662\u200f/\u0662\u0660\u0661\u0664 \u0664:\u0665\u0669 \u0645\u060c \u062c\u0627\u0621 \u0645\u0646 \"OMendoza\" \nnotifications@github.com:\n\n------------------- START: sendSetProfilePicture\ntx\ntx 12243 byte data\ntx 2621 byte data\ntx\nrx\nrx\nrx\nrx\nrx\n------------------- END: sendSetProfilePicture\nHave any idea? Thanks\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/612>\n.\n\n\u2014\nReply to this email directly or view it on GitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/612#issuecomment-35193921>\n.\n\u2014\nReply to this email directly or view it on GitHub.\n\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/612#issuecomment-35197537\n.\n. all is work \n\n. it's just a localhost , it can be changed\n. ok i done https://github.com/park23/whatsappGUI\n. @CodersBrothers Not yet, but you can add contacts manually\n. thanks guys )\n. \n",
    "m-derevyanko": "I'm sorry for my eng guys!\n@thomasvargiu What do i think?\nAbsolutely same script with modern-style-coding. Absolutely same problems and core-code methods.\nThis is very nice start, with the same code.\nI think u and first api-project shud pay more attention to work with sockets at all.\nYour scripts are just seems like single-run-test-bot, with bad quality of network organization.\nBecause all this rude socket scenaries shud die in agony:\n```\n$this->sendNode($auth);\n$this->pollMessages();// lol what?\n$this->pollMessages();// lol what2?\n$this->pollMessages();// lol what3?\n```\nIn that way if u set set_socket_bloking(..., false) or TIMEOUT_SEC = 0 (with TIMEOUT_USEC = 500) your scripts will die. Cuz they do work only with 2 sec timeouts, when the whatsapp server shud have time to respond, or the scenario of auth work will fail. It shud be more  multipurpose, to give interesting decisions to developers.\nThere shud be event-trafic reader, wich cud know what to do with one ore another node at login method, without any rude schema.\nonClose event at readStanza do not work at the first api, and here too. Cuz script always returns \nif (strlen($header) == 0) {\n                //no data received\n                return '';\n            }\nAnd there is same shit with write methods. Why don't u trigger onClose when fwrite to socket returns false? Closing of sockets shud be determined with boths cases.\nAt venomous0x/WhatsAPI eventManager is shit at least because of static $event_listeners parameter and without any static add/remove methods.\nSituation: I started two whatsProt bots, both have eventsManager class by default (at whatsProt class) and both by logic shud have their own eventListeners added. This is two different trees of objects. But by now, after adding two different eventm by one listener to each bot, will result at 2 eventListeners in each bot class, cuz they will accumulate at static eventManager parameter.\nSo, its just pfff...\nI hope that u take your steps in development of new project to solve all tehnic issues, and socmetic nice-style-coding will be just cool addition at global progress. Or there is no any sence to do that at all.\nThanx!\n. @thomasvargiu with pleasure\n. ```\npublic function onGroupsParticipantsAdd($phone, $gid, $participant){\n        wBot::getInstance()->debugMsg('#SMN_WAS_ADDED_TO_GROUP# ' . $phone . ' > ' . $gid . ' > ' . $participant);\n    //oops, bot was added somewhere\n    if(wBot::getInstance()->sender == strstr($participant, '@', true)){\n        wBot::getInstance()->api->sendGroupsLeave($gid);\n    }\n}\n\n```\n. I do have the same problem. No idea how to avoid it.\nSome login sessions are ok - mesages arrives. Some broken - messages will not arrive all the session (need reconnect). I still see composing and pause statuses from users, but only them.\nI have no idea how to check this out with script itself, to decide when i do need reconnect.\nAny suggestions?\n. Dudes, why u so nervious? He is not developer of this api. He just made few simple bugfixes long time ago, and just sitting around and reply to stupid topics like \"how to keep bot online??!?!?!?111\". He has no idea what to do, if the whatsapp changes their proto. \nHe stops to update this repo? Fine. But.. Lol what?\nGo to your private repo and just del this ugly topic.\n. ",
    "mohmedmostafa": "channels for whatsapp for sale begin with .$.26\nWhastapprocket.com\nwhatsapprocket@gmail.com\nskype id: eng.mohamedmos\n. ",
    "RFKDOT": "Post some code.\n\u00bfYou use \"$w->eventManager()->bind(???,???) into a while?\n. This is mi script very reduced to only receipt msgs y have test:\n``` PHP\n<?php\ndefine('PATH', '/home/admon/WB');\nrequire PATH.'/src/WhatsAPI/src/php/whatsprot.class.php';\nrequire PATH.'/config.php';\n$w = new WhatsProt(SEND, IMEI, NICK, DEBUG);\n$w->Connect();\n$w->LoginWithPassword(PASS);\n$w->eventManager()->bind(\"onGetMessage\", \"GetMessage\");\nfunction GetMessage($mynumber, $from, $id, $type, $time, $name, $body){\n       echo $mynumber.'|'.$from.'|'.$id.'|'.$type.'|'.$time.'|'.$name.'|'.$body.\"\\n\";\n       //process de msg\n}\nwhile(TRUE){\n  $w->PollMessages();\n  sleep(1);\n\n}\n?>\n```\n. I don't understand, but my script are online 3 months and always works perfectly.\nReceive messages, video and images from 7 groups with 6-30 participants simultaneously.\nSorry for my English\n. The problem is not in my code, the problem is that SUBJECT method is not implemented in WhatAPI.\n((My)) solution is add this:\nphp\n                case \"subject\":\n                        $this->eventManager()->fireGetGroupMessage(\n                            $this->phoneNumber,\n                            $node->getAttribute('from'),\n                            \"subject\",\n                            $node->getAttribute('id'),\n                            $node->getAttribute('type'),\n                            $node->getAttribute('t'),\n                            $node->getAttribute(\"notify\"),\n                            $node->getChild(\"body\")->getData());\n                    break;\nto whatsprot.class.php at line 2241, (for expamle between \"status\" and \"picture\")\nThanks\n. ",
    "scramatte": "Same issue here. I'm using  ProcessNode  class  and method \"setNewMessageBind\"\nIf you send messages too quickly , I catch following exceptions messages.\n2014-01-25T13:32:19+01:00 INFO (6): BinTreeNodeReader->readListSize: Invalid token 154\n2014-01-25T13:32:20+01:00 INFO (6): BinTreeNodeReader->readListSize: Invalid token 5\n2014-01-25T13:32:21+01:00 INFO (6): BinTreeNodeReader->readListSize: Invalid token 31\n2014-01-25T13:32:22+01:00 INFO (6): BinTreeNodeReader->readListSize: Invalid token 79\n2014-01-25T13:32:23+01:00 INFO (6): BinTreeNodeReader->readListSize: Invalid token 180\n. Can you post example code ? \n. Just this ? ... I've just add it above  pollMessage.  I'm must wait now to see if it works or not. Thank you\n. ",
    "escalanterj": "Hello, does somebody know why do I get this?\nPHP Fatal error:  Call to undefined method WhatsProt::Message() in /var/whatsapp/whatsapp_whatsapi_send.php on line 14\n. Hello,\nI'd like to be able to know when the client received the message in Whatsapp. Could anybody tell me?\nmaybe an example?\n thanks!!\nRegards\n. yes Shirioko, I can imagine that you can compare it, but can you give an example implemented? I've no idea where to start...\nthanks!\n. Hi Shirioko,\nCould you explain it a bit better? thanks!!\nBR\n. I got the message ID like this, is it correct? could you please give me a clue on how to use the event listener? \n$msgid = time()-1;\necho \"\\n[] This is the message ID $msgid \\n\";\nThanks!\nBR\n. ",
    "bhejosms": "I am using loginWithPassword method only my code looks like\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\n$wa->sendGetRequestLastSeen($dst);\n\nInitially it gives success with following response \ntx\u00a0\u00a0<stream:features>tx\u00a0\u00a0\u00a0\u00a0<receipt_acks></receipt_acks>tx\u00a0\u00a0\u00a0\u00a0<status></status>tx\u00a0\u00a0</stream:features>\ntx\u00a0\u00a0<auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"918421358339\"></auth>\nrx\u00a0\u00a0<start from=\"s.whatsapp.net\"></start>\nrx\u00a0\u00a0<stream:features>rx\u00a0\u00a0\u00a0\u00a0<receipt_acks></receipt_acks>rx\u00a0\u00a0\u00a0\u00a0<w:profile:picture type=\"all\"></w:profile:picture>rx\u00a0\u00a0</stream:features>\nrx\u00a0\u00a0<challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">I^\u00c4+\u2039qm\u00b9s\u0152\u008d\u00c6\u2039\u00be\u0178\u00c4\u00c9\u00b9\u00bfh</challenge>\ntx\u00a0\u00a0<response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">;G\u0019\u009d/.\u201c\u00042\u00feC6Eq\u00d0{\u00e0uK$\u00d0\u00bc\u00e4\u00car0\u00bc\u00ea\u0152\u00e6\u00e4\u017d\u00f4p\u0081I</response>\nrx\u00a0\u00a0<success t=\"1387280102\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" kind=\"free\" status=\"active\" creation=\"1386926973\" expiration=\"1418462973\">\u00be\u00f7\u000f\u00b6\f\u00d1\u00df@0%?(\u00e5\u0019\u201dM\u00af:Cb</success>\ntx\u00a0\u00a0<presence type=\"available\" name=\"WhatsAPI Test\"></presence>\ntx\u00a0\u00a0<iq to=\"918860070342@s.whatsapp.net\" type=\"get\" id=\"lastseen-1387280310-1\" from=\"918421358339@s.whatsapp.net\">tx\u00a0\u00a0\u00a0\u00a0<query xmlns=\"jabber:iq:last\"></query>tx\u00a0\u00a0</iq>\nrx\u00a0\u00a0<message from=\"919426740105@s.whatsapp.net\" id=\"message-1387272922-1\" type=\"chat\" t=\"1387280103\">rx\u00a0\u00a0\u00a0\u00a0<received xmlns=\"urn:xmpp:receipts\"></received>rx\u00a0\u00a0</message>\ntx\u00a0\u00a0<message to=\"919426740105@s.whatsapp.net\" type=\"chat\" id=\"message-1387272922-1\" t=\"1387280310\">tx\u00a0\u00a0\u00a0\u00a0<ack xmlns=\"urn:xmpp:receipts\"></ack>tx\u00a0\u00a0</message>\nrx\u00a0\u00a0<ib from=\"s.whatsapp.net\">rx\u00a0\u00a0\u00a0\u00a0<offline count=\"1\"></offline>rx\u00a0\u00a0</ib>\nrx\u00a0\u00a0<presence from=\"918421358339@s.whatsapp.net\" type=\"available\"></presence>\nrx\u00a0\u00a0<iq from=\"918860070342@s.whatsapp.net\" id=\"lastseen-1387280310-1\" type=\"error\">rx\u00a0\u00a0\u00a0\u00a0<error code=\"404\" text=\"item-not-found\"></error>rx\u00a0\u00a0</iq>\n/>rx\u00a0\u00a0</iq>\n\nAfter some time for same number with same password it gives\n** 918421358339 LS**\ntx\u00a0\u00a0<stream:features>tx\u00a0\u00a0\u00a0\u00a0<receipt_acks></receipt_acks>tx\u00a0\u00a0\u00a0\u00a0<status></status>tx\u00a0\u00a0</stream:features>\ntx\u00a0\u00a0<auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-1\" user=\"918421358339\">G\u00bc\u00d3\u00c7\u0081\u00f5R\u00f1\u00c1\u00c5\u00b3\u0153\u00c8\u00ec]\u017d\u00a6\u00b0\u00aeGQc\u001d~</auth>\nrx\u00a0\u00a0<start from=\"s.whatsapp.net\"></start>\nrx\u00a0\u00a0<stream:features>rx\u00a0\u00a0\u00a0\u00a0<receipt_acks></receipt_acks>rx\u00a0\u00a0\u00a0\u00a0<w:profile:picture type=\"all\"></w:profile:picture>rx\u00a0\u00a0</stream:features>\nrx\u00a0\u00a0<challenge xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">\u0004\u00c5\u2014\u00ec\u20aca4\u00e7\u00c8</challenge>\ntx\u00a0\u00a0<response xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">O\u00fe\u00c5\u00a3\u00a9P\u00b7\u00e7Hh<+\u0017nP\u00d8p\u0153@\u00d8S\u0014\u00d6\u00b3m\u00ac@V\u00fa4l\u0014\u00c8s\u201e\u00bb\u00b2\u00c2\u00e2Y\u0005\u00d5g0\u00df\u007f</response>\nrx\u00a0\u00a0<failure xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\">rx\u00a0\u00a0\u00a0\u00a0<not-authorized></not-authorized>rx\u00a0\u00a0</failure>\ntx\u00a0\u00a0<presence type=\"available\" name=\"WhatsAPI Test\"></presence>\ntx\u00a0\u00a0<iq to=\"919540524846@s.whatsapp.net\" type=\"get\" id=\"lastseen-1387287276-1\" from=\"918421358339@s.whatsapp.net\">tx\u00a0\u00a0\u00a0\u00a0<query xmlns=\"jabber:iq:last\"></query>tx\u00a0\u00a0</iq>\n. No. I am not.\nAlso we are not sending more than 5 sms per hour.\nDoes it depends on how much hits are given from same IP? Because same web application is used by other users as well.\n. Furthermore, I just use to check status and send sms.\nDo I need to getMessages as well? Will that help?\n. ",
    "altafhussain10": "I fetched the password using WART and when i try to send a message i got auth error. \nI posted in here also https://github.com/venomous0x/WhatsAPI/issues/558 , but i think whatsapp is not authenticating me.  Can anyone please help me in this regard.\nThank you\n. Ok now i tried with IPhone and a different number and everything is working fine.\n. The issue i was having with my number. After that i tried with another number on IPhone and it is working fine now. Also i discovered the number should be used only on a single place? either phone or by whatsapi. At the moment i am trying to sync contacts. If you can answer my question: \nI have a contact which are not added to my phone and hence whatsapp. As whatsapp allows messages only to contacts on your phone, then how i can send messages to that number which is not on phone contact list? I tried to use the contactsync.php, and it shows me the status of that number which can tell us that the number is using whatsapp, but when i send a message to that number, it is not delivered. If you can help me out that is it possible to add new numbers which are not on my contact list yet, so i can send messages to them? \nThank you for your response. \n. Yes i am using international number format attaching country code without 00 or +. \nBelow is the code.\ndestinationPhone = array('123123123@s.whatsapp.net', '147854@s.whatsapp.net');\n$nickname = \"Altaf Hussain\";\n$sender =   \"987654\"; // Mobile number with country code (but without + or 00)\n$imei =     \"imei\"; // MAC Address for iOS IMEI for other platform (Android/etc)\n$password =     \"password i fetched using WART\"; // Password you received from WhatsApp\n$w = new WhatsProt($sender, $imei, $nickname, true);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->sendBroadcastMessage($destinationPhone, \"This is a test broadcast message\");\nYes i am using broadcast messaging. Yes my number may be not in his/her contact list :P , then is there any possibility ? Is it possible to send individual message using sendMessage in my case ?\nThanks \n. Thank you for your quick responses. I will try with sendMessage. \n. ",
    "nellurichaitanya": "how to display the received messages in a console \n. ",
    "lunixxx": "$req=$w->codeRequest('sms');\nresult:\n \n. CODE:\n\n$username = \"79261248126\";\n$identity = \"fa348e44ec4ba605857b654e1e8672c5\";\n$nickname = \"Jon\";\n$w = new WhatsProt($username, $identity, $nickname, true);\n$req=$w->codeRequest('sms');\n\n\nRESULT:\nWarning: mcrypt_generic_init() [function.mcrypt-generic-init]: Iv size incorrect; supplied length: 24, needed: 16 in Z:\\home\\alota7.lan\\www\\test\\token.php on line 25\nArray ( [cc] => 7 [in] => 9261248126 [to] => 79261248126 [lg] => kk [lc] => KZ [method] => sms [mcc] => 401 [mnc] => 001 [token] => Z8lurh3xG8Rv9hDPg6IftYzYqZI%3D [id] => %f8d%cabc%dbi%f9%e4%16%3b4qu%40%1fc%a6km ) stdClass Object ( [status] => fail [reason] => bad_token ) \nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in Z:\\home**.lan\\www\\test\\whatsprot.class.php:317 Stack trace: #0 Z:\\home*.lan\\www\\test\\index.php(26): WhatsProt->codeRequest('sms') #1 {main} thrown in Z:\\home***.lan\\www\\test\\whatsprot.class.php on line 317\n\nsource latest \"Download ZIP\"\nThe first phone number I wrote as an example.\nUse UTF-8\n. ok, commented out, still getting:\nArray ( [cc] => 7 [in] => 9261248126 [to] => 79261248126 [lg] => kk [lc] => KZ [method] => sms [mcc] => 401 [mnc] => 001 [token] => Z8lurh3xG8Rv9hDPg6IftYzYqZI%3D [id] => %f8d%cabc%dbi%f9%e4%16%3b4qu%40%1fc%a6km ) stdClass Object ( [status] => fail [reason] => bad_token ) \nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to request the code.' in Z:\\home\\*****.lan\\www\\test\\whatsprot.class.php:317 Stack trace: #0 Z:\\home\\****.lan\\www\\test\\index.php(26): WhatsProt->codeRequest('sms') #1 {main} thrown in Z:\\home\\*****.lan\\www\\test\\whatsprot.class.php on line 317\n. $classesMd5 = \"R5bEU+cZUseb0nsx7MNpPA==\";\nconst WHATSAPP_VER = '2.11.149';\nconst WHATSAPP_USER_AGENT = 'WhatsApp/2.11.149 Android/4.3 Device/GalaxyS3';\n%-)\n. Thank you very much for your help. Case headway. I am very happy, but can not be sent message..\n1) $w->codeRequest('sms'); - OK\n2) $str=$w->codeRegister('*_'); - OK\nresult array=stdClass Object\n(\n    [status] => ok\n    [login] => 79261248126\n    [pw] => _***\n    [type] => existing\n    [expiration] => 1419151435\n    [kind] => free\n    [price] => 33,00 \u0421\u0402\u0421\u0453\u0420\u00b1.\n    [cost] => 33.00\n    [currency] => RUB\n    [price_expiration] => 1390730741\n)\n3) contactsync.php?phone=79261248126&pass=***_=&u[]=7902480_\nresult: array(3) { [\"phonenumber\"]=> string(11) \"7902480*\" [\"status\"]=> string(13) \"Bla-Bla\" [\"lastupdate\"]=> int(1362064659) }\n4) Sent message:\n$username = \"79261248126\";\n$identity = \"e807f1fcf82d132f9bb018ca6738a19f\";\n$password = \"****************************\";\n$nickname = \"John Doe\";\n$target = \"7902480****\";\n$w = new WhatsProt($username, $identity, $nickname, true);\n$w->connect();\n$req=$w->loginWithPassword($password);\n$req=$w->sendMessage($target, \"Sent from WhatsApi at \" . time());\nresult: message-1387888936-1\nBut the message has not arrived. I feel that is close. The second account, the number is in your address book ..\nWe need your help ...\n. Added $w->pollMessages(), no effect...\nDebug:\n\n. Yes...\nNAT? Grey IP?\n. ",
    "hafriz": "hi zephyern, i'm quite new with WhatsAPI. somehow i try to understand what callback function can you give step by step and which file i need to change? \ni'm not changing anything i'm downloading the latest from git and then change the config with my whatsapp password and it's not working tho.\nWhen check in firebug it show that error. same as if i'm using ajaxDemo and when open socket.php it also show that error.\nThanks \n. hi, sorry for late reply. the issue was fixed as per proposed changes. \nThanks a lot\n. ",
    "jawwadrafi": "Dear zephyern,\nParse error: syntax error, unexpected T_FUNCTION in C:\\Inetpub\\vhosts...\\httpdocs....\\wh\\src\\php\\WhatsAppEvent.php on line 107\nError in followling line,\n $callbackEvent = function(WhatsAppEventListener $listener) use ($phone, $from, $msgid, $type, $time, $name, $size, $url, $file, $mimetype, $filehash, $duration, $acodec) { \n            $listener->onGetAudio($phone, $from, $msgid, $type, $time, $name, $size, $url, $file, $mimetype, $filehash, $duration, $acodec);\n        };\nMay be i have old php version. can you tell me because this error i have in many places in WhatsAppEvent\n. ",
    "likenew": "@jonnywilliamson \nHello i have same error \n\"response\"\n{\"success\":true,\"type\":\"contacts\",\"data\":[],\"messages\":null}\nWarning:  fclose() expects parameter 1 to be resource, null given in /home/xxxxx/public_html/n/whatsprot.class.php on line 347\n. ",
    "DarkLoard": "i am also having same problem \"Error: There was an error with the AJAX request. XML/Json format is bad.\" please help .\n. ",
    "maggnetz": "Not sure that it got the same behavior like the phone one. \nI'm running with ~100 clients in a beta , and until now couldn't found any reason for the random blocks.\ni got clients that worked with more then 5000 users with out blocks (Again not a spam,responding only for income messages) and on the other side got a number that less then one week 150 users and was blocked. (Had a number with 2 days block)\n. do you think WA tracking the messages content?\nor can other users block the service? \n. yap you are right and the system i design is following this roles.meaning\n1) Only 'normal' users can start the conversation .\n2) the bot only answer for messages.and even that only with max 2 messages.\n3) bot can get messages & photos.\n4) i event added that bot will not answer simultaneously for two numbers , it must have 5 sec delay between answers.\nthe only thing im not doing is adding the user to the bot contact list (bot as i got 99 other bot that dont have this number)\nI replace this bot number for the third time , and each block is happening in Thursday around 8:00-9:00 PST :-)\nthis is why i'm wondering what the trigger for that.\n. should i send all of them , or only the new ones?\nOn Mon, Jan 6, 2014 at 11:48 AM, Max Kovaljov notifications@github.comwrote:\n\nCollect your address book phone numbers in international format\n$numbers = array(\n    \"31650568134\",\n    \"31650568143\"\n    ...}\"and execute contact sync```php$cs = new WhatsAppContactSync($username, $password, $numbers, true);$res = $cs->executeSync();\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31637049\n.\n. any limits?\n\nOn Mon, Jan 6, 2014 at 12:43 PM, Max Kovaljov notifications@github.comwrote:\n\nAll of them.\n2014/1/6, maggnetz notifications@github.com:\n\nshould i send all of them , or only the new ones?\nOn Mon, Jan 6, 2014 at 11:48 AM, Max Kovaljov\nnotifications@github.comwrote:\n\nCollect your address book phone numbers in international format\n$numbers = array(\n\"31650568134\",\n\"31650568143\"\n...}\"and execute contact sync```php$cs = new\nWhatsAppContactSync($username, $password, $numbers, true);$res =\n$cs->executeSync();\n\u2014\nReply to this email directly or view it on\nGitHub<\nhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31637049>\n.\n\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31639808\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/568#issuecomment-31639829\n.\n. NO  ,i hate spammers!!!  i'm providing a cloud service for real stores that want to  getting messages\ndirectly to their stores dashboard from their customers.\n\nI only answer with \"Got your ...\" message only after a user send a message\nto the WA phone.\nAnd i even block my customers (the stores) from sending messages other of\nthat!!!! (if they want they can get sms service)\nSo please dont call me spammer :-)\n. ",
    "enzolarosa": "I've already tried ... just as soon as I start from only the last message sent .. and if by chance they do not send other shows! .. : (\n. I'm using this code to receive messages\nThis is the link where you can see his behavior \n``` php\n<?php\nsession_start();\nset_time_limit(100);\ndate_default_timezone_set('Europe/Rome');\ninclude 'err.php';\nrequire_once 'php/whatsprot.class.php';\nrequire_once 'php/contacts.php';\n$debug = true;\n$username = \"MY_NUMBER\";\n$identity = \"MY_IDENTITY\";\n$password = \"MY__PASSWORD\";\n$nickname = \"MY_NICK\";\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body){   \necho \"Messaggio da <b>$name</b> - (from $from - id $id - type $type - time $time ) :\\n$body\\n\\n <br />\";\n\n}\n$host=\"localhost\";\n$pass=\"pD4uba3xVny1Uc\";\n$db=\"c1_whatsapp\";\nfunction running($time){\n    session_start();  \n    $running = $_SESSION[\"running\"];\n    if ($running != $time) {\n        die();\n    }\n    session_write_close();\n    return true;\n}\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\n$time = $_SESSION[\"running\"];\nwhile (running($time)) {\n    $w->pollMessages();\n    running($time); \n$messages = $w->getMessages();\nif (count($messages) > 0) {\n    //session_start();\n    //$inbound = $_SESSION[\"inbound\"];\n    //$_SESSION[\"inbound\"] = array(); //lock\n    foreach ($messages as $message) {\n        $data = @$message->getChild(\"body\")->getData();\n        if ($data != null && $data != '') {\n            //$inbound[] = $data;\n            print_r($data);\n            echo \"-123123123-<br />\";\n        }\n    }\n    //$_SESSION[\"inbound\"] = $inbound;\n   // session_write_close();\n}\n\n}\n```\nhttp://www.lrweb.it/progetti/WHATSAPP/receiver.php\n(I have debugging enabled)\n. I modified a bit the code now is as follows\nstatic.php\n``` php\n<?php\n/STATIC FILE/\n//session_start();\nset_time_limit(100);\ndate_default_timezone_set('Europe/Rome');\ninclude 'err.php';\nrequire_once 'php/whatsprot.class.php';\nrequire_once 'php/contacts.php';\n$debug = true;\n$username = \"393421659721\";\n$identity = \"MY_ID\";\n$password = \"MY_PASS\";\n$nickname = \"LRWeb\";\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body){   \n    echo \"Messaggio da $name - (from $from - id $id - type $type - time $time ) :\\n$body\\n\\n \";\n}\n$host=\"localhost\";\n$pass=\"MY_PASS\";\n$db=\"MY_DB\";\n/\nfunction running($time){\n    session_start();  \n    $running = $_SESSION[\"running\"];\n    if ($running != $time) {\n        die();\n    }\n    session_write_close();\n    return true;\n}\n/\n?>\n```\nreceiver.php\n``` php\nphp\ninclude 'static.php';\n\n<p$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile (TRUE) {\n    $w->pollMessages();\n    $messages = $w->getMessages();\n    if (count($messages) > 0) {\n        foreach ($messages as $message) {\n            $data = @$message->getChild(\"body\")->getData();\n            if ($data != null && $data != '') {\n                print_r($data);\n                echo \"-123123123-\";\n            }\n        }\n    }\n    die; //to block everything out and see what the outcome\n}\n```\nthe result that I get from\n``` xml\ntx  \ntx    \ntx    \ntx  \ntx  \ufffd\ufffd\"\u000fy\ufffdHM\ufffd\ufffd)m--\ufffd\ufffd\ufffd\ufffd\ufffdP\u001bB\ufffd\ufffdk\ufffd\ufffd\ufffd&P\ufffd\u0016\ufffd\ufffda\ufffd\ufffd\ufffd\u0001\ufffd\ufffd\ufffd]ij\ufffd&\b\ufffd\ufffd-\ufffd?\ufffd\u0011\ufffdAe\ufffd\ufffd\ufffd\ufffda,\ufffdR\ufffd?\ufffd\ufffd/\u0011\ufffd\u07c7\ufffd\ufffde\ufffd\ufffd\ufffd\u0017E\u0011\ufffd\ufffd\ufffd\u0010\ufffd\ufffd\ufffd%n\ufffd\ufffd\ufffd\ufffd0?!DGs8\nrx  \nrx  \nrx    \nrx    \nrx  \nrx  8ggz|\ufffd\u0001\u001f\ufffd\ufffd\u0785\ufffd\u0005\\\ufffd\ufffd^\ufffd    \nrx  \nrx    \nrx  \ntx  \nrx  \n```\nAnother small problem as I can receive voice messages, or messages with images or video using the same code? .. so I do a cron job on the server every X seconds and goes to read the new messages and stores them in the database\n. If you click on the link you see it immediately github if not well taken http://www.lrweb.it/progetti/WHATSAPP/receiver.php\n. I too have had the same problem and I came to the solution, whatsapp blocked the ip of the server that I use to do all of my experiments and consequently from that message. I bought another hosting plan, and for the moment everything is back to work properly\n. ",
    "luislora-es": "OK. Thank you very much, i'll do that.\n. ",
    "PetraWitteman": "Seems to work now in WhatsAPI! Not in Yowsup but that's ok.\nToo bad contact sync is failing now, but apparently I'm not the only one with that issue.\n. ",
    "hgc2002": "same to me\n. ok, we all have our \"real\" (paid) work to do, understandable. \nI used to spend hours of my sleep time on programming, as everybody.\n@shiroko just take it for fun and feel yourself like a rock star!\n. by the way, do you need help? here we are! (not jocking). one of the best things of github is that you can share your work to do, and add point of view that can sound interesting.\n. my God!\n. Uhm, is there  any news?\n. @shirioko any info about the fix? or something to let us make our humble little version of the fix? we all want to play!\n. surprises? well, they are nice, but it's hard when you know the surprise is coming: you can't wait for it!\n. I go for the paypal idea.\n. nice way to really know who cares. money has more than a single value after all...\n. I've seen the https://www.bountysource.com/issues/1383579 link, but it's the first time I see something like that. I don't know what to say. @shirioko do you approve that?\n. Uffff !!! so fast! money is like that, and that helps! I'll check all links then I'll tell you what I did.\n. Uffff again!!! @shirioko take your time (again this too!) and choose the way you want. Too many links and paths here. Let's concentrate in one. This is the only way it will be a lot soon, instead of everything spread everywhere.\n. Ok, donation done. I wish I had put more. Next time. Merry Christmas and Happy New Year!\n. i saw the main wa class update (thanks!) but it looks to have nothing to do with contact sync.\nadding new contacts keeps being an issue.\n. remember that the contact sync library is not original part of WhatsAPI but from yowsup (https://github.com/tgalal/yowsup), so perhaps we should wait also for @tgalal \n. well guys, while the solution comes, you must avoid sending messages to new contacts. period. just use existing contacts in your existing accounts. we are sill out of the solution to sync new contacts. the risk doing something else is to block your account, and then start crying to heaven, because blocked accounts are lost forever. just that. and please stop reporting all the time the same issue. thanks.\n. same here too. no other solution than waiting, or disconnecting before retry.\n. but send a pong with what id?\n. We should close this case. The answer is 100% correct.\n. blocked is blocked. you have to email wa and explain them you are using this API. hope you luck!\n. Yes, absolutely\n. False. Multiple senders with the same IP can be, as example, in the same building (in the same company, using the corporate proxy to link with the wa server). This has been this way since the web is what it is. Multiple senders can be in the same home (father, mother, etc.) using the house router to NAT, etc.\nThe truth here is that the whole public IP set (huge!) assigned to AWS has been banned by wa. Just that. You can check very easy if an IP is from AWS just using any NSLOOKUP service available on Internet.\n. Ok, good to know that AWS is not fully banned, but I prefer to be out of there.\nAnyway, thanks for the info and yes, my \"false\" is false. You are right on this.\n. I think we should close this issue.\n. Fixed with https://github.com/venomous0x/WhatsAPI/pull/960\n. profile pictures must be square, JPG and at least 350 x 350 pixels.\n. Better close this issue. It's not really an issue for this repository, unfortunately.\n. Good luck. Lot of things you need to read here. And you'll do the app number X to chat with wa. Do you really need to create the wheel again?\n. Ok, it works with .378 (great!)\nI could use it 3 times. Then it started to fail again. I'll try tomorrow again.\n. You need to save the id of the sent message.\nThen check it with the notifications that may come later (immediately, minutes after, hours or days).\nThere is no other way.\n. ",
    "songyong": "thank you ;)\n. ",
    "birdman2005": "thank you too\n. But, with the same phone number, it works well on android cell phones.\n. Additional, it works well with Official whatsapp apk\n. Done, it woks!\nThe country code should like this in Mexico  521\n. Solved, preview must be 96_96, full sizef must be no larger than 640_640\n. Uploading jpg files sometimes failed using gprs, it seems disconnect by server\n. tks\n. It returns {\"status\":\"fail\",\"reason\":\"no_routes\",\"retry_after\":3600}, but it do works well before.\n. Are there different versions of apk in different countries?\n. VPN to South Africa or India, and there comes \"no_routes\" even use phone number  from China\n. I'm sorry that i did not see the edit button. Is it whatsapp's problem? And when will it be resolved? Can you give me some tips?\n. We solved this by a proxy, but unfortunately, the proxy's ip is blocked by Whatsapp today.\n. @mgp25 I think there are some relationship between classMd5 and apk version and agent, can you tell me how to calculate classmD5?\n. @mgp25 You mean there no solution with \"no_routes\"? \n. @mgp25 Hi, i'm working on this these days, and i can test!\n. @mgp25 Using a number of South Africa,  vpn to South Africa, it reports 'no_routes', but it works ok when vpn to china. Using a number of China, it works ok when vpn to China while returns 'no_routes' vpn to South Africa. It seems there is something wrong with the networks.\n. @mgp25 i sent you my skypeid\n. Its still in researching\uff1f\n. Thanks for your hard work\n. ",
    "faisalcse": "Hi Guys,\nhave you a solution for contact sync?\n. Yes of course please.\n. Sync is it working?\n. Plz tell how can I sync contact? Is there any solution?\n. How many message can be sent by one username and will be safe?\n. how can I sync contacts?\n. We appreciate your approach. Please can you post your solution?\n. Some phone number cannot synchronise. It gives error:\nUndefined index phone in contactsync.php; undefined index pass in contactsync.php; undefined index u[] in contactsync.php.\nPlease advice.\n. Yes I have seen  the code. I am using this code. Shall I give you an username and password to check? Because for some phone number it is giving error.\n. the value is coming from query string.\n. I don't know also. I passed in this way exactly. But for some username and password (phone and pass) it gives that error.\n. Is there any relation with the activation of the number(phone and pass) ?\n. Its working now. Thanks a lot.\n. OK. I see there are maximum 25 target we can send at one time. How can we avoid blocking the login username and password?\n. What is the safe amount of message per day from one username and password?\n. How to keep a username always login instead of each time login?\n. Sorry\n. wart mean? how can we do that?\n. I will do now and feedback to you. Thanks.\n. I face some problem like sometimes SMS not come, some times voice not come. will WART help in this case?\n. No, I am not saying for WART. I am telling regardgin to WhatsAPINET make sometimes problem, SMS not come and some times voice not come. I will try now and back to you. Thanks.\n. I am facing problem with WART. It is giving error:\n\"Could not request verification code. The underlying connection was closed: Could not establish trust relationship for the SSL/TLS secure channel.\"\n. I send now 2 emails to you.\n. It is giving error for your email. is it correct?\n. How can I get this version? From where I can get?\n. I will do the test now and feedback to you.\n. Yes boss. it is working now. Thanks.\n. WART not work after 20 registration. The message come:\n\"This number is blocked\". But from WhatsAPINet, registration done at same time.\n. There is a problem using WART. SMS is not coming.\n. Which php file I can use for sending picture and video?\n. If you have any sample it will be better plz.\n. Shall we need this functions?\neventManager()\nsendGetProfilePicture()\nsendSetProfilePicture()\n. For testing, I have put only 2 contacts and it gives this error.\nIf you can tell where is my mistake?\nI also didn't find the contact.php file.\n. wtf means?\n. I pass the phonenumber using u[]=XXXXXXXX&u[]=XXXXXX\nIs it correct?\n. I  comment this line:\n$wbs->SyncContacts($contacts);\nThen I call this page bulk.php by passing username and password and number in query string as like this:\nbulk.php?phone=xxxxxx&pass=xxxxxxx&u[]=xxxxxxx&u[]=xxxxxxx\nI put 2 numbers but I receive 1.\n. Yes I make URL Encode. It send one number only. I put my number 2 times. I receive one time.\n. sorry boss. I will test now the new version 1.6.6.0 and feedback to you.\n. I post feedback to \nhttps://github.com/shirioko/WART/issues/13\nStill SMS code not come.\n. Contact Synch not working\n. I am not getting any error. It keeps waiting and waiting but nothing come result. \n. what limit?\n. OK. what is the maximum # number of contacts I can synchronize with same username and password?\nAnother question, is there any days limit like with 24 hours I can synchronize maximum # number of contacts?\n. I am using contactsync.php script. Before synchronize, I checked the sender id is active or blocked. It is showing active. After that I try to synchronize, it keep processing and processing, nothing result come.\n. I have done this below code. Yes, I have used in the same way as you mentioned above.\nphp\nset_time_limit(30);\n\n<prequire_once(\"whatsprot.class.php\");\n$username = $_GET[\"phone\"];\n$password =$_GET[\"pass\"];\n//$my_array= (array($_GET[\"u\"]));\n$u =$_GET[\"u\"];\nif(!is_array($u))\n{\n    $u = array($u);\n}\n$numbers = array();\nforeach($u as $number)\n{\n    if(substr($number, 0, 1) !=  \"+\")\n    {\n        //add leading +\n        $number = \"+$number\";\n}\n$numbers[] = $number;\n}\n//event handler\n/*\n- @param $result SyncResult\n  /\n  function onSyncResult($result)\n  {\n  foreach($result->existing as $number)\n  {\n      echo \"$number exists\";\n  }\n  foreach($result->nonExisting as $number)\n  {\n      echo \"$number does not exist\";\n  }\n  die();//to break out of the while(true) loop\n  }\n$wa = new WhatsProt($username, \"\", \"WhatsApp\", false);\n//bind event handler\n$wa->eventManager()->bind('onGetSyncResult', 'onSyncResult');\n$wa->connect();\n$wa->loginWithPassword($password);\n//send dataset to server\n$wa->sendSync($numbers);\n//wait for response\nwhile(true)\n{\n    $wa->pollMessages();\n}\n. Let me check now. Onething, how many number I can synchronize at one time?\n. Which php file will use?\n. But which pho file I will use for sending image?\n. To send image I am using this way:\nphp\nset_time_limit(10);\nrequire_once 'whatsprot.class.php';\n\n<p// phone number, deviceIdentity, and name.\n$options = getopt(\"d::\", array(\"debug::\"));\n$debug = (array_key_exists(\"debug\", $options) || array_key_exists(\"d\", $options)) ? true : false;\n$username = \"your phone number\"; // Telephone number including the country code without '+' or '00'.\n$identity = \"unique ID generated by WhatsApp client\"; // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$password = \"server generated whatsapp password\"; // A server generated Password you received from WhatsApp. This can NOT be manually created\n$nickname = \"your nickname\"; // This is the username (or nickname) displayed by WhatsApp clients.\n$target = \"contact's phone number\"; // Destination telephone number including the country code without '+' or '00'.\n//This function only needed to show how eventmanager works.\nfunction onGetProfilePicture($from, $target, $type, $data)\n{\n    if ($type == \"preview\") {\n        $filename = \"preview_\" . $target . \".jpg\";\n    } else {\n        $filename = $target . \".jpg\";\n    }\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n//Create the whatsapp object and setup a connection.\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n// Now loginWithPassword function sends Nickname and (Available) Presence\n$w->loginWithPassword($password);\n//Retrieve large profile picture. Output is in /src/php/pictures/ (you need to bind a function\n//to the event onProfilePicture so the script knows what to do.\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture($target, true);\n//send picture\n$w->sendMessageImage($target, \"demo/x3.jpg\");\nwhile (1) {\n    $w->pollMessages();\n    $msgs = $w->getMessages();\n    foreach ($msgs as $m) {\n        # process inbound messages\n        //print($m->NodeString(\"\") . \"\\n\");\n    }\n}\n. I was also trying to send image using Bulk.php because it was using one connection to send  but I see it takes time in this line:\nwhile(static::$sendLock)\n            {\n                //wait for server receipt\n                sleep(1);\n            }\nBecause there is an event bind:\n$this->wa->eventManager()->bind(\"onMessageReceivedServer\", \"WaBulkSender::event_onMessageReceivedServer\");\nPlease advise.\n. OK. Can I send to 8 contacts with one connection? Because I will send only image.\n. In the above code you posted, what is $identity?\n. Sometimes, $w->pollMessages(); takes more time. What is the reason and is any way to overcome?\n. If I do the connect and how long it will be connected because while sending it might be disconnect?\n$w->connect();\n$w->loginWithPassword($password);\n. One more thing, using the above code\nphp\n$j=0;\nfor($i=0; $i<count($contacts); $i++){\n    $w->sendMessageImage($contacts[$i], $url);\n    if($j == 4){\n        $w->pollMessages();\n        $j=0;\n    }\n    $j++;\n}\nIf I send 4, I receive only 1. If I do like this:\n``` php\n$j=0;\nfor($i=0; $isendMessageImage($contacts[$i], $url);\n    $w->pollMessages();\n}\n\n}\n```\nthen it comes 4.\n. I follow the whole code that you send. I try to send image to 8 contacts. When I write this below code:\n$j=0;\nfor($i=0; $isendMessageImage($contacts[$i], $url);\n    if($j == 8){\n        $w->pollMessages();\n        $j=0;\n    }\n    $j++;\n}\nI receive 1 image.\n When I change it to :\n$j=0;\nfor($i=0; $isendMessageImage($contacts[$i], $url);\n        $w->pollMessages();\n    }\n}\n Then I receive 8.\nMy question is: \nShall I have to call $w->pollMessages(); after each send?\n. Yes. Now it is clear. I thought PollMessage() make problem. \nThanks for your great advise and help.\n. To Send Text I see there is time, we need this time?\n$w->sendMessage($target, \"Sent from WhatsApi at \" . time());\n. I know some of the functions but to confirm is there any relation from internally in any methods. That's why.\nI really grateful to your for your great help.\nThank you so much.\n. Yes. by sender username and password.\n[I closed the resolved the issue]\n. Thanks.\n. I have read out the articles and the conversation, but cannot came to know how to avoid. Please I would like to request you to help in this regard.\n. The username I used for login, is it mendatory to synchronise with that username? \nOr if I synchronise contacts with one username and I will login another username to send?\n. in the above you mentioned, \n1. Send Typing\n2. Send Paused\nhow can we do this?\n. I was not joking. I follow your instruction. there are some terms, sometime didn't get that's why I get in touch with you. you are the experts.\nI will prepare the code and back to you according to your given steps above.\n. Is there any time limit like within 24 hours I cannot send again with the same id?\n. No. I want to send a message to 10 different contacts. Shall I have to send another 10 contacts with same id within 24 hours?\n. I see each time it sync 30 contacts and per day 2 times with same sender id.\n. After I send 8 essage, sender id becomes blocked.\nIs there any update for sending message because I am using the script of before 4 months.\nPlease advise.\n. in the for each loop shall i write this code to send:\nforeach ($targets as $target) {\n            $this->wa->sendPresenceSubscription($target);\n            $this->wa->pollMessage();\n            $this->wa->sendMessageComposing($target);\n            sleep(1);\n            $this->wa->pollMessage();\n            $this->wa->sendMessagePaused($target);\n            static::$sendLock = true;\n            echo \"Sending message from \" . $this->username . \" to $target... \";\n            $this->wa->sendMessage($target, $message);\n            while (static::$sendLock) {\n                //wait for server receipt\n                sleep(1);\n            }\n        }\n. https://v.whatsapp.net/v2/exist?in=012XXXXXXX&cc=XX\nIs it working perfectly? Because I tried with my number and I have whatsapp. But it gives error:\n{\"status\":\"fail\",\"reason\":\"incorrect\",\"sms_length\":6,\"voice_length\":6}\n. Yesterday I put a landline phone number and it says whatsapp exists and also send message to that number. [showing in output text].\n. Yesterday I sent one message using bulk.php to my 2 mobile contacts and 1 is landphone telephone. Landphone telephone doesn't have whatsapp and should not send to that number. But the in the result, it showed- Landphone number whatsapp exists and it sends.\nThat's why I need for your advise.\n. ok\n. If I run separately contactsync.php, yes it is telling the number is not registered but in bulk.php, it is tellling, the number exists whatsapp.\n. I didnt get the backoff time (1 hour)? Please can you explain.\n. what is $fsize and $fhash? What are the value we have to pass?\n. Is it updated in the code so that I can take the updates?\n. I was using the whatsapi code from:\nhttps://github.com/shirioko/WhatsAPI/blob/master/src/php/whatsprot.class.php\nbut I see in this code not updated.\n. But I see in the code not updated.\n. If I copy -> whatsprot.class.php from https://github.com/venomous0x/WhatsAPI and replace in \nhttps://github.com/shirioko/WhatsAPI,\nWill it be ok?\n. How can I get the value of $myVideoSize and $myVideoHash?\n. OK let me do it\n. I Execute the file and output:\nFile size is: 2164835 \nFile hash is: CGbuo/jRmcmmy0U6h0TrsMB9f4vOm/ZM/JMYwclZRQc=\n. Can I use this method in bulk.php?\n. Image will be the same way?\n. Shall I need to make Encode the Hash Value because I am passing using POST method?\n. How can we know it send by hashvalue?\n. Shall I need to remove pollmessage() ?\nIs there any update for sending message because I send only 8 message and blocked.\nPlease advise.\n. Actually I am not getting which files I have to use?\nHow can I test?\nI was using from venomous0x/WhatsAPI\nPlease advise.\n. I have seen, beside of some files it is written:\n\"Initial format of most files to new PSR-1/PSR-2 standard. Strictly formatting only changes, no other code changes implemented.\"\nWhat does it mean?\n. There is written also,\n\"no other code changes implemented\" - what does it mean?\n. Does it mean updated code not implemented in this file?\nLike: this file\nWhatsAPI-Official / src / vCard.php\n. Still WART not working\n. Sms is not coming via registerTool.php.\nPlease help.\n. @mgp25 I tried with WART and registertool.php but it is the same problem. Not working. I send you an email. Please advise.\n. ",
    "ebrahimelsawy": "if solved can any one explain , i still have the same error \"internal error\"\nthx\n. i am sorry @shirioko if you upset from my comment \n. @shirioko can you explain why you upset plz\n. thx @tgalal for response \ni know that no one hiding the fix \ni just try to be courteous with @shirioko i feel he is upset may be from my comment \nso i am asking him just to stop comments :)\n. @shirioko, hey man take it easy, as i see we all know that you spent time to do this work and we appreciate your efforts as @hgc2002 said \"feel yourself like a rock star!\" because you are\nthanks a lot \n. hey any news about the next release?\n. good luck\n. ",
    "ravidsrk": "@shirioko If you need any help in solving this, We are glad to help you. \n. ",
    "webmediaexperts": "Can we have something soon... , is there anyone who can help\n. ",
    "crynobone": "You guys should just start the bounty here https://www.bountysource.com/issues/1383579\n. > Bounty are for one issue at a time \nIf you guys prefer a donation page for the author, consider https://www.gittip.com/, An example would be https://www.gittip.com/taylorotwell/ \n. ",
    "kmpslm": "Hi ,\n  I m trying contasync i getting this error \"The remote server returned an error: (404) Not Found.\" when i over _executeSync method . Even i have changed WAUTH-1 to WAUTH-2..\nI need Help ...\n. ok fine ..i got another solution ....thanks for behave..bye :)\n. thank you @mgp25\n. ",
    "hadilab": "Hi\nIs there any description on how to use the SendSync method and how to interpret the result.\nOne thing I realized is that international numbers should be passed with International zeros (00) at the beginning of the number.\nI also did not find any way in the result stanza that describes if the number exists, last seen, ...\nAm I missing something ?\n. Ok, I tested the SendSync method and it looks like its working and sycing contacts\nI tried to syc existing and non-existing contacts. The returned results had the correct contacts in <in></in> tags and the incorrect in the <out>/out> tag\n. ",
    "akhbarshow": "Great news! :) I'm new here and you guys are really awesome!\n. when can we use it, can you please let me know? thanks :)\n. ",
    "amitnovosol": "Where can we get the SendSync method\n. ",
    "Sydcul": "I think your problem has to do with PHP/webserver not having UNIX permission to access the nextChallenge.dat file.\n. Thanks, I figured it out, but I also program in VB, C#, PAWN and much more sometimes things can get a bit complicated.\nThe solution is to add global $w; to the function the var is used in (before it is used, of course). That way, it will try to access the $w used globally (=outside of any functions).\n. Already tried that, #574 \n. Solved it by adding a 1sec interval before processing each message in the queue. This is kind of a tricky thing, tho. 0,5sec does not work, for example.\nEDIT: Well still not solved. I'm kinda unstatisfied with putting the PHP in a bash while-true loop which restarts it when it fails.\n. Ok, thanks! And for a direct chat?\nOn Jan 15, 2014 1:17 PM, \"mindfuucker\" notifications@github.com wrote:\n\nIn a group message he is called the [author], please check for that name.\n$attri = $m->getAttributes();\n$author = $attri[author];\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/577#issuecomment-32356636\n.\n. Maybe your VPS host is blocked in some way. Do you have access to another VPS host?\n. This isn't even the WART repo...\n. @mgp25 Is this one dead?\n. \n",
    "CharlesOkwuagwu": "@shirioko  @mgp25 \nThis seems to be a common request/question. \"How do we stay connected\", i.e Keep the connection or \"BOT\" from going offline.\nCan we please get a definitive answer.\nThanks.\nEDIT:\n in my tests, sendPresence() with no other activity, sent once every 60secs will keep you online for 10 mins MAX\n. i use WhatsApiNet, i am having the same issue, can you please point to the write usage?\nthanks.\n. seen.\nthanks.\n. ",
    "simonthx": "Hi,\nfirst of all, sorry for pulling out this old post!\nLike the thread starter i'm trying to poll messages without being online. Unfortunately the link you provided is dead and i can't find the functions SendPresence() or SendOfflineStatus() being called anywhere in the official whatsprot.class.php :/\nIs it still possible to acheive what you described by replacing these functions somewhere in the code? Or is there another possible way of doing it?\nThanks for your help :)\n\u00b0|~ Simon\n. ",
    "aaronkychu": "It turns out that onGetRequestLastSeen($username,  $from, $msgid, $seconds) instead of 3 parameters\nAfter that, I got the correct TIME !!\n. However, when I test whether I could receive the WhatsApp message sent from my iPhone, after correcting the last seen status, it is NOT shown up.\nAfter I comment out \"$w->sendGetRequestLastSeen($target);\" \nIt show up AGAIN...\nWhat's wrong?\n. ",
    "lbar83": "And I suppose that there is no workaround on that. Right?\nIn my mind appear that the only possible way could be install an android simulator, and then buy a whatsapp there and complete a gsm activation of a brand new sms-receive-only number bought on internet...and use them on my WhatsAPI interface....could be plausible for you?\n. ",
    "hschoene": "Hi mindfuucker,\nhave the same problem, I didnt receive any media-url. Can successful upload an image with \n$w->sendMessageImage($destinationPhone, 'sample.jpg'); and see the url in the debug-lines. The url is accessible with firefox.\nBut in the receive-array I can't see anything like an media-url.\nSame with Eventmanager, only a message-event is triggered, no onGetImage-event. Seems like i didnt have any \"media-message\".\nWhat you mean with \"... My permissions were failing so only messages were being received and images not....\"\nThanks \nHeiko\n. Hi,\nok, but I use the php-scripts on the commandline as user \"root\" and as a cron-job. Cannot be a permissions problem with  nextChallenge.dat. Any other problem. Have read but I don't find the blog entry again, that \"yowsup\" get the image url and whatsapi not. Have to search for it. Don't know, if its right.\nLatest test shows that images/videos sent from a regular WhatsAPP-Handy I can receive it without problems. But if i send pics from with whatsapi to myself(for tests)...sometimes it works, most times not. \nI use Whatsapi to send messages to an email account and from the email account back to whatsapp. The email account has an active-sync-connect to my handy. Images/Videos I receive as a Url,\nWorking fine.\n. Found it, https://github.com/venomous0x/WhatsAPI/issues/510 (Laurens0619)\n. problem resolved. I had overlapping cronjobs to get the messages. It works now fine. \n. ",
    "mehaks2": "my question is how we convert this  Of7V24QP9eKK7g30GZ27dcfQPGI= into the original code.. means six digit code. when we register the whatapi.\n. i use this method=sms but in some phone we didn't get the sms code..\n. What our client demand the sms code... thats why we use the sms method.. if you help.. \n. ",
    "eduardochp": "Why don't use a cronjob for exec the listener file? Every 5 min for example.\n. Are you using DreamHost? Is a internal application. Probably it will be in others external servers. Isn't a code is a option in the website.\n. Shirioko I added to my facebook for solve another question did you see?\n. I use this code to get from number:\nrequire 'whatsprot.class.php';\n$wa = new WhatsProt('*_', '*_*_', '__');\n$wa->Connect();\n$wa->loginWithPassword('*_**');\n$msgs = $wa->GetMessages();\nforeach($msgs as $message)\n{\n$from = $message->getAttribute(\"from\");\necho $from;\n}\nBut I try to use for get the user name and nothing...why? how i can solve it? thanks:\n$name = $message->getAttribute(\"name\")\n. Max gives me this code:\n$message->getChild(\"notify\")->getAttribute(\"name\")\nbut you should check if it exists to prevent null pointer exceptions\nif($message->getChild(\"notify\"))\n{\n$name = $message->getChild(\"notify\")->getAttribute(\"name\");\n}\n. Sorry I didn't know how do it ;)\n. It is a credit to Max is not mine :)\n. I confused Im out home and I could't test it. My last conde was wrong?\n. ",
    "daleattree": "Try:\n$w->sendMessageImage($to, $filepath);\n. ",
    "amrdesign": "i use that\nfunction event_onGetReceipt($from,$id,$offline,$retry){\n    $wa->sendPong($id);\n}\n$wa->eventManager()->bind(\"onGetReceipt\", \"event_onGetReceipt\");\n. thanks @shirioko  work for new update\n. # i change function onSyncResult to\nfunction onSyncResult($index)\n{\n```\n$index = (array )$index;\n//print_r2($index);\n$existing = $index['existing'];\n$nonExisting = $index['nonExisting'];\nforeach ($existing as $item) {\n    $item = explode('@', $item);\n    echo $item['0'] . \"  exist\";\n}\nforeach ($nonExisting as $item) {\n    $item = explode('@', $item);\n    echo $item['0'] . \" does not exist\";\n}\ndie(); //to break out of the while(true) loop\n```\n}\n\nits work with that\n. thanks @shirioko \n. send it with www it will view as a link but user must be add your number in contact list \n. ",
    "dennobaby": "What means this offline count? I see this after login with different values. Does it mean the number of contacts which are offline or something like that?\n. Yes, how i said, the file-size and filehash are correct. Are the same like in the messageString. For example:\nMessage: \n\n\n\nthan:\n$size = \"4161\"\n$hash= \"3SJiZ5dZqrXfvGGxYEjzKKhSQQenjhZ2SnZy3Sg4Na4=\"\n. forwarding with sendMessageAudio is still not implemented here. Any plans to do so? \n. Thanks a lot!\n. I am running WhatsAPI with a Number which was activated with official WhatsApp-Client 2months before. Is it the time?\n. Why i am not affected? My Client works like a charm :) but for caution i have updated the two files with the new strings...\n. same here...that's annoying\n. @Osmanbakri: do you have access to an iphone? do you can verfiy that this happens also if you use the original broadcast-function from the original whatsapp-client?\n. can confirm that. Think Whatsapp changed something in the protocol with last update regarding broadcast-messages. one interesting point is, that other clients like android and windows-phone are not affected.\n. Nice! Will test it today! Thanks to that. I commented on this commit, could you explain what you did and why?\n. Maybe it would be good to sniff how the real client do this? I does not think it would be so great to simply add some random numbers? \n. \"more cool things\"? Regarding this \"no_routes\"-Error (which i am not affected) or other things? \n. What do you mean? After outgoing message? Do you use the latest commit? Here is everything okay...\n. could you write down here the code you're using? And maybe the debug-output also? \n. Thats all? \n. +1 for this\n. Thanks, i will test it this evening!\n. damn it...on my centos-box utf8mb4 is not available, just utf8_unicode :/\n. I mean the ability to check if i myself am online, not other users. I would to display somewhere if i am connected or not. \n. I think it's possible just by creating 5 seperate whatsapi-instances, like:\n$w1 = new WhatsProt($username1, $identity1, $nickname1, $debug);\n  $w2 = new WhatsProt($username2, $identity2, $nickname2, $debug);\n  $w3 = new WhatsProt($username3, $identity3, $nickname3, $debug);\n  ...\n  $w1->connect();\n  $w1->loginWithPassword($password1);\n  $w2->connect();\n  $w2->loginWithPassword($password1);\n  ...\nmaybe something like that?\n. If i unterstood it right, you will see if a contact have you NOT in his contact-list if:\n- you get not presence from this user\n- you get not lastseen from this user \n- you get not a broadcast-reciept\nI does not think that you could solve this by getting events if vCard is opened, because this says nothing about the user have you in his contactlist or not. And i think there is no such event. \nFor audio-messages (not the simple audiomessage/sending a sound-file), there have to be some third \"reciept\", it is triggered if the target listens to it, but i dont know if its implemented in WhatsAPI yet...\n. @ludufre: No, as far as i know, numbers are not blocked forever. Just for a while (maybe max. 6 months). You have to think economically. A number changes his owners. If a sim-card is not used for like 6-12 months (from provider to provider other values), it will be deactivated and after some time it will be free for a new user. If the number is still blocked from whatsapp, they will maybe loose a customer...\n. SendPresence and pollMessage in a while-loop.\nMy daemon runs for days without problems...\nVon Samsung Mobile gesendet\n.    $t=0;\n   while (1) {\n      $w->pollMessage();\n      $msgs = $w->getMessages();\n      foreach ($msgs as $m) {\n          //do something\n      }\nif( ($t == 15)){\n      $w->sendPresence();\n      $t=0;\n  }       \n  $t++;\n}\n. Sad to hear that you stop to support this wonderful project. But I understand your intentions and reasons. Can i write you per Mail? \n. @mgp25 how i said in the email i send you, i think it would be difficult to distinguish between spammers and \"normal\" users...\n. already done :) however, \"thanks\" to all people who driven shirioko and you to these steps :/\n. do a loop in a loop...you have to get an array like bcLists[x]=stringOfNumbers\nthen you could do another loop for sending...\n. ",
    "netics": "Hi.\nThere is a thread about this here -> https://github.com/venomous0x/WhatsAPI/issues/571\n. ",
    "raulbcs": "Not sure if this project have dependencies that could be installed with composer, yet\n. ",
    "rafa-as": "https://github.com/rafitaFCB/WhatsAPI\nEnjoy!\n. I confirm, both functions returned \"feature-not-implemented\".\nThanks!\n. If you look the commits list, you can view the previous commit with the sendGetServerProperties function fixed but not linked to this issue.\nCommits -> https://github.com/venomous0x/WhatsAPI/commits/master\nCommit with fixed sendGetServerProperties -> https://github.com/venomous0x/WhatsAPI/commit/23563703ffa50528ffa32c6a898f77e06afa4a3b\n. ",
    "CodersBrothers": "Looooool, yes, im new. Sorry xD\nWhy not create a guide more extended that explains how the code works in detail, not only how use your systems that depends of your work? Write your knowhow about this to teach other developers of whatsapp. Thus among all we could solve the problem, there are many people who need fast resolve things.\n. ;) do shit and eat it\n. Ok, from now, if the other person not have you, you can't get the profile picture xD\n. wait, @shirioko its doing shit...\nWe can use our personal whatsapp to try this, if you can't see the picture of all yours sexy contact girls... Welcome to reality! Theys can't get you, but you can confirm my theory ;)\n. i have the same problem :(\n. I found this code in core :)\nphp\n$this->pollMessages();\n            $msgs = $this->getMessages();\n            foreach ($msgs as $m) {\n                // Process inbound messages.\n                if ($m->getTag() == \"message\") {\n                    if ($m->getChild('received') != null && $m->getAttribute('retry') != null) {\n                        $received = true;\n                    } elseif ($m->getChild('received') != null && $m->getAttribute('retry') != null) {\n                        throw new Exception('There was a problem trying to send the message, please retry.');\n                    }\n                }\n            }\n. uooo god @shirioko is here?\ncheck this code that i writte now, but @shirioko @eduardochp are good.\n``` php\n// Obtenemos las novedades\n        $w->pollMessages();\n        $msgs = $w->getMessages();\n        foreach ($msgs as $m) {\n        // Mensajes entrantes\n        if ($m->getTag() == \"message\" && $m->getChild('notify')) {\n\n            $from = split('@', $m->getAttribute('from'));\n            $message = $m->getChild(\"body\")->getData();\n            $name = $m->getChild('notify')->getAttribute('name');\n            $date = $m->getAttribute('t');\n\n            echo \"[] MENSAJE PENDIENTE\\n\";\n            echo \"[] tel\u00e9fono emisor: \".$from[0].\"\\n\";\n            echo \"[] nombre emisor: \".$name.\"\\n\";\n            echo \"[] fecha: \".date('l jS \\of F Y h:i:s A', $date).\"\\n\";\n            echo \"[] mensaje: \".$message.\"\\n\\n\";\n\n        }\n\n    }\n\n```\n@eduardochp please, put your code as code:\n[```php]\n    yourcode\n    [```] \n    (Without brackets)\n. The problem of my last code is when you send a message and if you have event for onGetMessage, because you will get message with event as new, and the infinite while will return as notify... \nFor resolve this you will need order your code :)\n. My last message? I think that will be cool a event for notify message, to get each pending inbound message, or the same event for new messaget, the onGetMessage event, but with a \"notify\" type or something like that.\n. :O @shirioko are you sure that if my bot is offline (the script php not its running), when i start the bot and pollMessages getting the notify messages this event catch each message???  \nphp\nfunction onGetMessage(\n        $phone, // The user phone number including the country code.\n        $from, // The sender JID.\n        $msgid, // The message id.\n        $type, // The message type.\n        $time, // The unix time when send message notification.\n        $name, // The sender name.\n        $message // The message.\n    );\n. so my code not fire this, i need make a getMessages and manage this in other part.\n``` php\n        $w->pollMessages();\n        $msgs = $w->getMessages();\n        foreach ($msgs as $m) {\n        if ($m->getTag() == \"message\" && $m->getChild('notify')) {\n            notifyMessage($m);\n        }\n\n    }\n\n```\n. @shirioko i think that something its wrong..\nphp\nfunction fireGetMessage(\n        $phone,\n        $from,\n        $msgid,\n        $type,\n        $time,\n        $name,\n        $message\n    ) {\n        $callbackEvent = function(WhatsAppEventListener $listener) use ($phone, $from, $msgid, $type, $time, $name, $message) {\n            $listener->onGetMessage($phone, $from, $msgid, $type, $time, $name, $message);\n            echo 'YEAH';\n        };\n        $this->fireCallback($callbackEvent);    \n    }\nif are a pending message never make 'YEAH' echo in WhatsAppEvent file.\n. LOOOL, i saw the event but i forgot that php not its like javascript and nodejs, that you need bind before connect and login, not after. NOW WORKS! muahahaaha\n. this bind ok:\n``` php\n$w = new WhatsProt($phone, $identity, $nickname, true);\n$w->eventManager()->bind(\"onGetMessage\", \"onGetMessage\");\n$w->eventManager()->bind(\"onConnect\", \"onConnect\");\n$w->eventManager()->bind(\"onDisconnect\", \"onDisconnect\");\n$w->eventManager()->bind(\"onGetError\", \"onGetError\");\n$w->eventManager()->bind(\"onClose\", \"onClose\");\n$w->eventManager()->bind(\"onLogin\", \"onLogin\");\n$w->eventManager()->bind(\"onGetStatus\", \"onGetStatus\");\n$w->eventManager()->bind(\"onPing\", \"onPing\");\n$w->eventManager()->bind(\"onPresence\", \"onPresence\");\n$w->connect();\n$w->loginWithPassword($password);\n```\nThis not bind correctly:\n``` php\n$w = new WhatsProt($phone, $identity, $nickname, true);\n$w->connect();\n$w->loginWithPassword($password);\n$w->eventManager()->bind(\"onGetMessage\", \"onGetMessage\");\n$w->eventManager()->bind(\"onConnect\", \"onConnect\");\n$w->eventManager()->bind(\"onDisconnect\", \"onDisconnect\");\n$w->eventManager()->bind(\"onGetError\", \"onGetError\");\n$w->eventManager()->bind(\"onClose\", \"onClose\");\n$w->eventManager()->bind(\"onLogin\", \"onLogin\");\n$w->eventManager()->bind(\"onGetStatus\", \"onGetStatus\");\n$w->eventManager()->bind(\"onPing\", \"onPing\");\n$w->eventManager()->bind(\"onPresence\", \"onPresence\");\n```\nIt's necesary use bind before connect function\n. ok, so i will add to my code. Im trying have a 24/7 connected bot. By the moment its 30 hours online\nSorry for comment this here :P \nThanks.\n. wooow!!  So cool! Later in home i will study this code. \nHave contact sync integrated? \n. Yes i saw. You add to database and later you can use, but the problem its that now fuckApp need add contact in whatsapp, because the other person cant see the picture of your profile if you don't have that person.\n. But its normal, this feature not is in the API, Thanks for share! ;)\n. @shirioko seems cool the example, all parts separated, i think that will be great put a link or folder with this in the repo. \nI saw that the logo was removed xD, good work, whatsapp are loosing a lot of users with Telegram, I sincerely glad with this, whatsapp its very closed, we need think if someone will have problems with a fucking logo. Telegram! <3 :)\n. Line 2: require_once(\"contacts.php\"); \nNot exists...\nLine 103: $wacs = new WhatsAppContactSync($this->username, $this->password, $contacts, true);\n\u00bf?\u00bf?\nRead your code...\n. Whatsapp know when contact are new? he know because its the first message to you or have some address book that native platform manage sending details to server?\n. First: We dont want send SPAM. \nSecond: No ramdom users\nThird: Any person say that the guide will need create you.\nLast: Whatsapp not its beautiful, its horrible, its like a a ton of horse shit, and he dont provide a API.\nA lot of people make this because not know how use, this API: For example, i connect this service with a birthday calendar service that I build,  im trying use whatsapi to inform all contacts that its the birthday of person. As whatsapp its a shit, we need test how inform my contacts. We want build a guide for constructive applications.\n. Ok, one minute: whatsapp its insecure, not innovation (its the same at bigbang), its closed, its unestable,... infinitte, its a shit. \nBut we dont stay here for criticize, we are here for build applications with whatsapp. \nNow: how we can use correctly? This its the topic.\n. @shirioko whatsapp secure? today?? LOL, few days ago... http://nakedsecurity.sophos.com/2014/04/19/dont-share-your-location-with-your-friends-on-whatsapp/ And there are a loooot of more problems.\nOk, we are agree that its unestable and closed.\nThe problem is when people like @brittson or me or others and others users not use bad the service and account its blocked. Maybe the code not works like native whatsapp and detect. If your accounts not are blocked you will can say how you make, or you can criticize users.\n. Both numbers should be in each other's contact list?? But how we can add the contact from whatsapi?\nI go to try change the version to 2.8.4\nSo, we can use the first version of whatsapp to use a low thresholds? xD\n. So, the problem its here? this varchars are very suspicious:\ntoken.php \n``` php\nfunction generateRequestToken($country, $phone) {\n    $signature = \"MIIDMjCCAvCgAwIBAgIETCU2pDALBgcqhkjOOAQDBQAwfDELMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFDASBgNVBAcTC1NhbnRhIENsYXJhMRYwFAYDVQQKEw1XaGF0c0FwcCBJbmMuMRQwEgYDVQQLEwtFbmdpbmVlcmluZzEUMBIGA1UEAxMLQnJpYW4gQWN0b24wHhcNMTAwNjI1MjMwNzE2WhcNNDQwMjE1MjMwNzE2WjB8MQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEUMBIGA1UEBxMLU2FudGEgQ2xhcmExFjAUBgNVBAoTDVdoYXRzQXBwIEluYy4xFDASBgNVBAsTC0VuZ2luZWVyaW5nMRQwEgYDVQQDEwtCcmlhbiBBY3RvbjCCAbgwggEsBgcqhkjOOAQBMIIBHwKBgQD9f1OBHXUSKVLfSpwu7OTn9hG3UjzvRADDHj+AtlEmaUVdQCJR+1k9jVj6v8X1ujD2y5tVbNeBO4AdNG/yZmC3a5lQpaSfn+gEexAiwk+7qdf+t8Yb+DtX58aophUPBPuD9tPFHsMCNVQTWhaRMvZ1864rYdcq7/IiAxmd0UgBxwIVAJdgUI8VIwvMspK5gqLrhAvwWBz1AoGBAPfhoIXWmz3ey7yrXDa4V7l5lK+7+jrqgvlXTAs9B4JnUVlXjrrUWU/mcQcQgYC0SRZxI+hMKBYTt88JMozIpuE8FnqLVHyNKOCjrh4rs6Z1kW6jfwv6ITVi8ftiegEkO8yk8b6oUZCJqIPf4VrlnwaSi2ZegHtVJWQBTDv+z0kqA4GFAAKBgQDRGYtLgWh7zyRtQainJfCpiaUbzjJuhMgo4fVWZIvXHaSHBU1t5w//S0lDK2hiqkj8KpMWGywVov9eZxZy37V26dEqr/c2m5qZ0E+ynSu7sqUD7kGx/zeIcGT0H+KAVgkGNQCo5Uc0koLRWYHNtYoIvt5R3X6YZylbPftF/8ayWTALBgcqhkjOOAQDBQADLwAwLAIUAKYCp0d6z4QQdyN74JDfQ2WCyi8CFDUM4CaNB+ceVXdKtOrNTQcc0e+t\";\n    $classesMd5 = \"+XW/7rCZDX9T7YrGQqTmcg==\";\n$key2 = base64_decode(\"/UIGKU1FVQa+ATM2A0za7G2KI9S/CwPYjgAbc67v7ep42eO/WeTLx1lb1cHwxpsEgF4+PmYpLd2YpGUdX/A2JQitsHzDwgcdBpUf7psX1BU=\");\n$data = base64_decode($signature) . base64_decode($classesMd5) . $phone;\n\n$opad = str_repeat(chr(0x5C), 64);\n$ipad = str_repeat(chr(0x36), 64);\nfor ($i = 0; $i < 64; $i++) {\n    $opad[$i] = $opad[$i] ^ $key2[$i];\n    $ipad[$i] = $ipad[$i] ^ $key2[$i];\n}\n\n$output = hash(\"sha1\", $opad . hash(\"sha1\", $ipad . $data, true), true);\n\nreturn base64_encode($output);\n\n}\n```\nOr in the version?:\nwhatsprot.class.php\nphp\nconst WHATSAPP_VER = '2.11.209';                // The WhatsApp version.\n    const WHATSAPP_USER_AGENT = 'WhatsApp/2.11.209 Android/4.3 Device/GalaxyS3';// User agent used in request/registration code.\n. Ok, both have a union, if i change the to \"2.8.4\" version my account return not-authorized when i connect (I not request a new password, i dont create account, i used a created account)\nI think that i need $signature string or $classesMD5 string for this version if i want use this version.\nThere are a file that have a history of this strings by version?\n$signature seems always the same string.\n\"The piano has been drinking\" xD\n. My new signature and classesMd5 xD\nphp\n$signature = \"mega\";\n$classesMd5 = \"LOOOL\";\nResult? Works! whatsapi connect correctly... whats happends? this its needed?\n. why? ok, this is only for when we want get the password i think\n. no, i claim the same of all users here, understand your code, but we cant understand the logic behind if no there are some documentantation or details in each parts, or links to study. We can only try/error.\nWe only want understand, maybe contribute, but always create. Sorry if you dont like or make laugh.\n. For spanish language people, some others details of whatsapp protocol http://www.uv.es/~montanan/redes/trabajos/WhatsApp.pdf\n. what are you saying? that this codes are the key when we generate the passwords? I think that this not its the problem. That the problem is why whatsapp think that we are sending spam to regulate.\n. I tested this. I have a group in my personal account with 50 friends. I send a message saying that please add my new test whatsapp and say me something. When each contact say something my script response with a \":D\". Only this, 2 chars, only one time each contact. If the contacts quantity arrived per minute its low, nothing happens... but its is high the account was blocked.\nIf this its true and not its needed that the other person response, this method could be remove others users account like a attack?? some estrange... i go to make other test without response of the script (I have 2000 phone sims of my work to make tests :D)\n. @mgp25 \"Using an automated system or an unauthorized / unofficial client application to send messages through WhatsApp.\" LOL!\nIf your whatsapp accounts speak only with one number and send 1 millon messages in one day of spam, nothings happens, if you speak with 20 and sends 10 messages of some good text, will be block.\n. I only speak with users that added me.\nI speak sending always a link (Its a service to recover password). Waiting like a writting, pause... and send.\nAnd always blocks me.\n. What is and make $index = 0, $last = true in \npublic function sendSync(array $numbers, $mode = \"full\", $context = \"registration\", $index = 0, $last = true)\n. If you use a other script only for sync, and other for speak... its Good? Im using 2 differents scripts.\n. whatsapp session? Same login config? (identity, password, phone) or same *.dat file?\n. while i have a \"while\" making poll, i have this other function for send message:\nphp\nfunction sendMessage($target, $id, $message){\n    global $w;\n    $w->sendMessageComposing($target);\n    sleep(1);\n    $w->sendMessagePaused($target);\n    $w->sendMessage($target, $message);\n    return true;\n}\nThis works with 10, but not for 100 diferents phones that i are added in theirs address book.\n. @mgp25 its necesary make sendPresenceSubscription all times that you need send a message?\n. Whats happens if you sync 100 contacts and later you sync 5 and later you sync 100 other time?\nHow many times you can sync at day? infinite?\n. Logout its like close app in mobile device? Its necesary make sometimes logout?\n. when you need to reconnect? or when you DONT need to reconnect? For example i close my script doing simply exit() in php. But at some minutes i can want connect other time.\nAnd if i dont make logout, i need use sendPresenceSuscription each time? I dont understand how works this.\n. Its nececesary send this?\n$this->wa->sendClientConfig();\n$this->wa->sendGetServerProperties();\n. xD, i know the FAQ...\nBut i think that never resolve this, and never accepts the pull requests\n. And for this there are things like the file of functional example have:\nphp\npublic function process($node)\n    {\n        // Example of process function, you have to guess a number (psss it's 5)\n        // If you guess it right you get a gift\n        $text = $node->getChild('body');\n        $text = $text->getData();\n        if ($text && ($text == \"5\" || trim($text) == \"5\")) {\n            $iconfile = \"../../tests/Gift.jpgb64\";\n            $fp = fopen($iconfile, \"r\");\n            $icon = fread($fp, filesize($iconfile));\n            fclose($fp);\n            $this->wp->sendMessageImage($this->target, \"https://mms604.whatsapp.net/d11/26/09/8/5/85a13e7812a5e7ad1f8071319d9d1b43.jpg\", \"hero.jpg\", 84712, $icon);\n            $this->wp->sendMessage($this->target, \"Congratulations you guessed the right number!\");\n        } else {\n            $this->wp->sendMessage($this->target, \"I'm sorry, try again!\");\n        }\n    }\nxDDDD, how many time have this? are you see this? \nphp\n$this->wp->sendMessageImage($this->target, \"https://mms604.whatsapp.net/d11/26/09/8/5/85a13e7812a5e7ad1f8071319d9d1b43.jpg\", \"hero.jpg\", 84712, $icon);\nThis problems of not updated code make more difficult that people can use this. Not ordered, not updated, not patterns... and he say: my code works.\n. I dont spect this, and people make pull requests.\n. No problem, i can make pull requests of this and other parts.\n. Not its necesary put order? ok, so will can delete \"refactor\" concept in languages. There are one improvement. It is important even the name of a variable. And yes, order its important.\n. ",
    "marknick": "I am getting the same error. Is it true that WhatsApp is no longer allowing \"unknown\" contacts to get profile picture of a user?\nOr is it some sort of error? possible update?\n@shirioko could you please confirm?\nKeep up the great work!\nThanks!\n. @park23: The user whose profile picture you want to fetch should have your contact number in his/her contact list. That is what I am suspecting. \nIf shirioko could confirm this?\n. @park23: My initial comment was a reply for @CodersBrothers's comment. \nInitially Whatsapp used to allow unknown contacts to view profile picture and status message, but recently I am getting the 401 error. \nWanted to confirm from shirioko if it is because Whatsapp has changed this or it is because of something else.\n. That was my initial hunch too. If this is the case then shirioko's recent work in his fork might fix the issue.\nBut the problem here is, the with your number in remote contact's list you should be able to get the profile picture just fine?\n. @kmpslm: If you don't mind, can you post your solution?\n. ",
    "mayankgupta": "@park23: the function definition of onGetProfilePicture of your code is incorrect.\nYou can use the following (picture file name can be something else) - \nphp\nfunction onGetProfilePicture($from, $target, $type, $data) {\n    $pictureof = explode(\"@\", $target);\n    $pictureof = $pictureof[0];\n    $time = time();\n    $filename = $pictureof . \"_@_\" . $time . \".jpg\";\n    $filename = WhatsProt::PICTURES_FOLDER.\"/\" . $filename;\n    $fp = @fopen($filename, \"w\");\n    if ($fp) {\n        fwrite($fp, $data);\n        fclose($fp);\n    }\n}\n. Refer: https://github.com/venomous0x/WhatsAPI/issues/608#issuecomment-34436914\n. Please do not post the same thing everywhere.\nI see you have already posted it here - https://github.com/venomous0x/WhatsAPI/issues/571, you should probably read the previous comments on the issue before trying to spam!\n. ",
    "royest": "i have an idea about an application that record last seen of a user .. but i think they will point at me saying it's a privacy violation .. that's why i am asking\n. ",
    "totoroh": "Even one second delay sometimes is not enough to send messages in-order - which sucks.\n. ",
    "basst85": "I have the same issue. I cannot update the profile picture and status.\n. I don't want to see others profile pictures, but i want to change my own profile picture with \"sendSetProfilePicture\" :)\n. ",
    "OMendozaG": "I know what happens. \nWhatsapp has changed its privacy policy and now only can  see profile pic. numbers we have in the contact list.\nI think need to get an action over target phone for server we interpret have it on contact list.\n. I solved. I using old rc4 file. Thanks and sorry\n. ",
    "kareree226": "\u0628\u062a\u0627\u0631\u064a\u062e \u0660\u0667\u200f/\u0660\u0662\u200f/\u0662\u0660\u0661\u0664 \u0664:\u0665\u0669 \u0645\u060c \u062c\u0627\u0621 \u0645\u0646 \"OMendoza\" notifications@github.com:\n\n------------------- START: sendSetProfilePicture\ntx\ntx 12243 byte data\ntx 2621 byte data\ntx\nrx\nrx\nrx\nrx\nrx\n------------------- END: sendSetProfilePicture\nHave any idea? Thanks\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/612\n.\n. \n",
    "NanoDevEU": "Thx\nSomeone should update the wiki.\nIs there a dokumentation ?\n. I used the code from the github wiki: onProfilePicture($from, $type, $data)\nbut it works with the code @mayankgupta Refered...\n. ",
    "EinfachObli": "I guess this is due to the recent update. Just those who are in your contact list can see your profile picture. The part of providing WhatsApp your contact list still needs to be implemented if I'm correct.\n. ",
    "NickyHeuperman": "Sorry wrote this while quite tired, the client doesn't seem to be acknowledging the delivery of the message making the whatsapp server try to deliver the message each time a login is performed\n. ",
    "monismalik": "means login part ,which ask to enter password before sending the msg\n. Sir\ni am having a html form which input text field are, ' To Send ',\nWAPassword'\nhow can i use these values on wascript after clicking on submit button.\ni simple recieve $wapass=$_POST['WAPASSWORD'];  but it is showing error.\nOn Mon, Mar 17, 2014 at 7:05 PM, Max Kovaljov notifications@github.comwrote:\n\nWhat script?\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/629#issuecomment-37815250\n.\n\n\nS.A.Malik\nAssistant  Professor\nComputer Science and Engineering\nContact no 9457706168\nUttranchal Institute of Technology\nDehradun\n. Please review Below Code\ni want to use waPassword and fromnumber values as variable\n$contact = $_POST['contactfrom'];            //  contact from html form\n$password = $_POST['whatsapppass'];     // whatsapp password from html form\n$config['Jonathan'] = array(\n   'id' => 'e807f1fcf82d132f9bb018ca6738a19f',\n    'fromNumber' =>* $contact_,                                     //\nconsider this\n    'nick' => \"Jonathan's iPhone\",\n    'waPassword' => *$contact_,                                      //\nalso this\n    'email' => 'testemail@gmail.com',\n    'emailPassword' => 'gmailpassword'\n);\nOn Wed, Mar 26, 2014 at 11:36 PM, monis malik malik.monis@gmail.com wrote:\n\nSir\ni am having a html form which input text field are, ' To Send ',\nWAPassword'\nhow can i use these values on wascript after clicking on submit button.\ni simple recieve $wapass=$_POST['WAPASSWORD'];  but it is showing error.\nOn Mon, Mar 17, 2014 at 7:05 PM, Max Kovaljov notifications@github.comwrote:\n\nWhat script?\n\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/629#issuecomment-37815250\n.\n\n\nS.A.Malik\nAssistant  Professor\nComputer Science and Engineering\nContact no 9457706168\nUttranchal Institute of Technology\nDehradun\n\n\nS.A.Malik\nAssistant  Professor\nComputer Science and Engineering\nContact no 9457706168\nUttranchal Institute of Technology\nDehradun\n. ",
    "johnstern": "You don't need full Java serialization - just enough to deserialize a couple of files.\nFrom the Python code (and looking at https://code.google.com/p/python-javaobj), it seems you only need to deserialize an array object (or a string?).\nAnyway - just follow the Python deserializer and see how to decode these files - no need for something generic.\nI think you should see 0x75 somewhere around the start to indicate what follows is an array. 0x74 if it's encoded as a string.\nDon't have an Android myself so can't check...\n. from the funny looking line:\npw_file_content = \"\".join([chr(c) if c>=0 else chr(c+256) for c in pw])\nI think this is a byte array (Java bytes are signed)\n. Here's a documentation of Java serialization:\nhttp://www.public.iastate.edu/~java/docs/guide/serialization/protocol.doc.html\n. So, does this actually work?\n. That's easy...\nAs for OFB: implementing it shouldn't be a problem if you have AES in ECB mode (i.e. encrypt each block separately) - especially since it seems you only need to encrypt 20 bytes (2 blocks), although it seems .NET knows about OFB mode: http://msdn.microsoft.com/en-us/library/system.security.cryptography.ciphermode%28v=vs.110%29.aspx\npseudo code for OFB mode on 2 blocks is something like:\n```\naes_ofb(key, iv, data) {\n    //  iv is 16 bytes, data is less than 32\n   crypt[0 .. 15]   = aes(key, iv)  // encrypt iv using the key\n   crypt[16 .. 32] = aes(key, crypt[0 .. 15]) // encrypt the result of the previous block using the same key\n// now all we need to do is xor the crypt with data. something like:\n   for i in 0..size(data) {\n      res = data[i] ^ crypt[i]\n   }\n   return res\n}\n```\nSee also https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Output_feedback_.28OFB.29\n. also, note that according to https://en.wikipedia.org/wiki/PBKDF2, PBKDF2 takes MAC and hash function as inputs.\nI think this is the module used in the python code: https://github.com/dlitz/python-pbkdf2. If so, the defaults seem to be HMAC & SHA1.\n. ",
    "nk19": "thanks for this answer, but this is not what answer my question...\ni wanted to know if someone can give access to send broadcast messages the same way you sand from the phone. up to 250 persons at the time and not up to 20;\ncan someone did it, or know how to and can do it..??\ni think that this is the only thing that missing in this butifule api///\nthanks :+1: \n. so why when you send from the device it anable you to send directly to 250 ?\ni closed this by mistake...\ncan i reopen this issue..?\n. i have friends that sending broadcasts to more then 200 people at once\ntry to add to a broadcast list on your phone users and you will see that the limit is about 256+-\nso how it work for them..?\nand can you see if there is any way to sand like from the device..?\n. this is what i said. \nso how we can bring it to work with php..?\n. thanks for all the help and time!!!\n. so the app on the mobile phone is also limited to 50 but it split the 256 selected numbers to 6 arrays?\nif that was the case why not limit to 250..\ni think that they do give the option to send directly to 250 but just need to find how\n. ",
    "sire42": "Based on yowsup and following discussion there [ https://github.com/tgalal/yowsup/issues/296 ],\ni (hopefully) adopted accordingly referring to latest WhatsAPI version. But i get the feature not implemented error (code=501). (With the latest version of yowsup i get code=406, not acceptable btw.) \ndef sendSetProfile ...\n```\n        picture = ProtocolTreeNode(\"picture\", None, None, imageData)\n    icon = self.createIconGD(imagePath,96,True) # create thumbnail of the image \n    thumb = ProtocolTreeNode(\"picture\", {\"type\":\"preview\"}, None, icon)\n\n    iqNode = ProtocolTreeNode(\"iq\",{\"id\":idx,\"to\":jid,\"type\":\"set\",\"xmlns\":\"w:profile:picture\"},{picture, thumb},None)\n\n    ##### originalpart\n    #listNode = ProtocolTreeNode(\"picture\",{\"xmlns\":\"w:profile:picture\",\"type\":\"image\"}, None, imageData)\n\n    #iqNode = ProtocolTreeNode(\"iq\",{\"id\":idx,\"to\":jid,\"type\":\"set\"},[listNode])\n\n```\nAny reassurance, that latest WhatsAPI way is still in line with Whatsapp protocol?\nRegards\n. Well, WhatsAPI indeed works :) And it just took me 10 Minutes from nothing to set my picture.\nThanks for pointing it out.\ntx  <iq id=\"setphoto-xxxxxxxxxx-2\" to=\"xxxxxxxxxxxx@s.whatsapp.net\" type=\"set\" xmlns=\"w:profile:picture\">\ntx    <picture> 105xx byte data</picture>\ntx    <picture type=\"preview\"> 36xx byte data</picture>\ntx  </iq>\nI am considering switching... but all my Python code... :(\n. ",
    "sbalgas": "Whatsapp, mass messages detected as spam.\nHave you tried using the following function?\nsendBroadcastMessage($targets_Array, $message)\nWhatsapp, detecta los mensajes masivos como spam.\nProb\u00f3 usando la siguiente funci\u00f3n?\nsendBroadcastMessage($targets_Array, $message)\nSaludos\n. To do that, is WHATSAPI. ._.\n. Hi, the error is caused by the time it takes to upload the file, in this case, exceeds 20 seconds.\ntry a shorter video. and with respect to upload the same file, we have to see how you are preparing your code.\nHola, el error es causado por el exeso de tiempo al subir el archivo, en este caso, excede los 20 segundos. Intenta con otro video. Y con respecto a la subida del mismo archivo, tendriamos que ver como est\u00e1s preparando tu c\u00f3digo...\nSaludos\n. thanks\ngracias ;)\n. Pod\u00e9s mostrarnos un poco tu c\u00f3digo?\n. My idea was that the function can be executed at any time.\nexample: \n$state = $w->ParseMessageInboundForEmojis($state, false);\n$chat = $w->ParseMessageInboundForEmojis($chat, false);\n$namefrom= $w->ParseMessageInboundForEmojis($namefrom, false);\nYou say to put the function in the file \"funcs.php\" to convert each response from the whatsapp server? and disable the span parameter?\nsorry to ask, but translators are terrible and I want confirmation.\n\nMi idea era que la funci\u00f3n se ejecute en cualquier momento, desde un archivo externo.\nCito el primer ejemplo del mensaje....\nTu dices que ponga la funci\u00f3n en el archivo funcs.php, para convertir cada respuesta del servidor whatsapp?. y deshabilitar el par\u00e1metro span?\nPerdona que pregunte, pero los traductores son p\u00e9simos y requiero una confirmaci\u00f3n...\nSaludos\n. haha ok , but this function depends on the private function \" unichr \" . I copy function \"Unichr\" on file \"func.php\"?\njaja ok, pero esta funci\u00f3n depende de la funci\u00f3n privada \"unichr\". La copio a func.php?\n. https://github.com/venomous0x/WhatsAPI/pull/668\n. Read the FAQ.\nhttps://github.com/venomous0x/WhatsAPI#faq\n. Like I said by email. I'm also trying to pass it to Java. But I want to know where you want to run this application. I mean, what kind of device. Computer, Mobile, Nuclear Reactor? \nIn my case, J2ME, and as a base I'm using version. WhatsAPI NET. Since everything is more orderly. \nI could help, but the project must be public and community Github, can contribute. \nregards\n\nComo te dije por email. Yo tambi\u00e9n estoy intentando pasarlo a Java. Pero, me gustar\u00eda saber en donde pensas correr esa aplicaci\u00f3n. Osea, en que tipo de dispositivo. Computadora, Movil, Reactor nuclear?\nEn mi caso, es para J2ME, y como base estoy usando la versi\u00f3n .NET del WhatsAPI. Ya que est\u00e1 todo mas ordenado.\nYo podr\u00eda contribuir, pero el proyecto debe ser p\u00fablico y que la comunidad de GITHUB, pueda contribuir.\nSaludos\n. sendGetRequestLastSeen, no es una funci\u00f3n. Sino, un procedimiento. que env\u00eda una solicitud a whatsapp pidiendo la ultima actividad de X usuario.\nLuego lo que retorna desde Whatsapp, se cuela desde la recepci\u00f3n de los mensajes. Pero en WhatsAPI hay eventos que ejecutan Procedimientos o Funciones enviandoles par\u00e1metros.\n\nsendGetRequestLastSeen is not a function. Otherwise, a procedure. sending a request asking whatsapp last activity X user. \nAfter returning from the Whatsapp, strain from receiving messages. But WhatsAPI has events them running procedures or functions with parameters.\n. ",
    "niklasbollmer": "Hi,\nput  \" set_time_limit(0); \" in top of your php file.\n- Niklas\n. ",
    "rajenpal033": "Sorry for my bad English, look this is my custom function or just a modification of your method to check auth of a number\n``` php\npublic function checkCredentialsCustom(){\n        if (!$phone = $this->dissectPhone()) {\n            throw new Exception('The prived phone number is not valid.');\n        }\n    // Build the url.\n    $host = 'https://' . static::WHATSAPP_CHECK_HOST;\n    $query = array(\n        'cc' => $phone['cc'],\n        'in' => $phone['phone'],\n        'id' => $this->identity,\n        'c' => 'cookie',\n    );\n\n    $response = $this->getResponse($host, $query);\n\n    return $response;\n}\n\n```\nThe response I am getting for a number registered in WhatsApp is status=ok and some other information now If I do the same for a number registered to WhatsApp and have subscription period over one year ( i.e. my own number, what I am using through my mobile WhatsApp app ), then the response is status=failed and and reason = incorrect, no other information. While it is showing correct result for a block and non-existing number.\n. @shirioko sorry to disturb you, but could you find out any solution for the mentioned issue?\n. @shirioko thanks for your valuable suggestion. But If I save the message ID and then look for the status again later by that ID. is it possible?\nThanks. \n. Thanks @shirioko are you saying If I save the message IDs and later when the incoming messages will be retrieved by getMessages() method, I need to compare the saved message id to incoming message id. If it matched then looking for the status of this right?\nThanks\n. Ok thanks very much @shirioko . will ask for your help if stuck some where.\n. Ok thank you @shirioko  sir for the information. but Is there any way to change the Group Name?\n. please some one help me with my problem\n. @shirioko is it possible?\n. can you please give me the way to do it? Thanks\n. thanks @shirioko \n. @shirioko thanks, please can you mention the name of the particular function?\n. Thanks @shirioko \n. @shirioko sorry it should be WART, https://github.com/shirioko/WART.\n. @McBacker but why, is there any kind of whatsapp parameter that we are missing or unable to send on the registration process?\n. @mgp25 thanks, if I copy this function and paste in whatsprot.class.php of venomous0x/WhatsAPI will it work?\n. ok thanks @mgp25 \n. ",
    "MJ1994": "Yes, for example it +31612345678 a valid phonenumber of the Netherlands, +31 is the countrycode. \nI have put in the example \"31612345678\" as username and also such example as target (receiver)\n. The password, I have received via exampleRegister.php, I receive this code:\nArray ( [cc] => 31 [in] => NUMBERWHITOUTCOUNTRYCODE [to] => NUMBERWITHCOUNTRYCODE [lg] => nl [lc] => NL [method] => sms [mcc] => 204 [mnc] => 001 [token] => HERETHETOKEN [id] => HERETHEID ) stdClass Object ( [status] => ok [login] => NUMBERWITHCOUNTRYCODE [pw] => HERETHEPASSWORD [type] => existing [expiration] => 1427476326 [kind] => free [price] => \u00e2\u201a\u00ac 0,89 [cost] => 0.89 [currency] => EUR [price_expiration] => 1398817731 )\nI have done nothing with the token, is that correct?\nThe password was a long password, with a = at the end and contains percents. \n. How to decode, put \"require_once 'decode.php';\" in the head of the page and change the row of the password:\n$password = \"my password\"; // A server generated Password you received from WhatsApp. This can NOT be manually created\nin:\n$password = decode(\"my password\"); // A server generated Password you received from WhatsApp. This can NOT be manually created\n?\n. I have editted the code and have reloaded the testpage, but I receive no message at my WhatsApp.\nIs there a option to check the connection / message is sent, for the confirming that the connection works?\n. Receive the following, when I have debug on true and reload the page;\ntx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  \u001d\u00a4\u00bd\u00b2\u201a\u00a6\u00d3\u001eR\u00dc\u00a3\u203a\u2026\u0012\u00f8\u00b6%\u00a9\u00b6W\ntx  \b\u00c4\u00be\b\u00f7a\u00ac\u00fd?\u017e\u2019\u00a1v\u0017\u00a3\u001c\u0006[0\u2030\u00f0\u001c :\u00d1\u00e6 \u0005.\u00dba<\u00a7{\u00d0\ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    Hi, this is a testmessage\ntx  \nrx  \nrx    \nrx  \n. This: \n\n. And how to check that with using checkCredentials? :-) (Sorry, i'm noob with the WhatsAPI, it takes a while before I got the hang of it, so it was with the API of Twitter and Facebook))\n. Receive this:\nobject(stdClass)#2 (10) { [\"status\"]=> string(2) \"ok\" [\"login\"]=> string(11) \"SENDER_NUMBER\" [\"pw\"]=> string(28) \"PASSWORD\" [\"type\"]=> string(8) \"existing\" [\"expiration\"]=> int(1427476326) [\"kind\"]=> string(4) \"free\" [\"price\"]=> string(8) \"\u00e2\u201a\u00ac 0,89\" [\"cost\"]=> string(4) \"0.89\" [\"currency\"]=> string(3) \"EUR\" [\"price_expiration\"]=> int(1398871788) }\nI think the connection is working, when the status = \"ok\"?\n. Yes, it works :O amazing!!\n. Like this?\n``` php\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO messages (phone, from, id, type, time, name, data) VALUES ('\".$mynumber.\"', '\".$from.\"', '\".$id.\"', '\".$type.\"', '\".$time.\"', '\".$name.\"', '\".$body.\"')\");\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\n```\n. Haha, a little bit :)\nAnd how to call the function, when I load the page?\n. I try to get it worked, but do not get it working..\nI have now this:\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO messages (phone, from, id, type, time, name, data) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\") or die (mysql_error());\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\nOr must the token, also be via urldecode?\n. Yes I know, I have another file with the details to make SQL connection, and have that included in the page where I have placed the above mentioned code, but it doesnt work..\n. I have now put the connection-rules into the head-file, code:\nphp\nrequire_once 'whatsprot.class.php';\n\n<p$cfg['MysqlLoc'] = \"localhost\"; //Lokatie van Database (Normaal: localhost)\n$cfg['MysqlUsr'] = \"user\"; //Gebruikersnaam\n$cfg['MysqlPas'] = \"pass\"; //Wachtwoord\n$cfg['MysqlDtb'] = \"dbname\"; //Database Naam\nmysql_connect($cfg['MysqlLoc'],$cfg['MysqlUsr'],$cfg['MysqlPas']) or die (\"Er is een fout opgetreden bij het connecten met het dbbeest. MySQL retouneerde: \".mysql_error());\nmysql_select_db($cfg['MysqlDtb']) or die (\"Er is een fout opgetreden bij het selecteren van het dbbeest. MySQL retouneerde: \".mysql_error());\n// phone number, deviceIdentity, and name.\n$options = getopt(\"d::\", array(\"debug::\"));\n$debug = (array_key_exists(\"debug\", $options) || array_key_exists(\"d\", $options)) ? true : true;\n$username = \"username\";                       // Telephone number including the country code without '+' or '00'.\n$identity = \"identity\";  // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$password = urldecode(\"pass\");      // A server generated Password you received from WhatsApp. This can NOT be manually created\n$nickname = \"nickname\";                           // This is the username (or nickname) displayed by WhatsApp clients.\n$target = \"receiver\";                    // Destination telephone number including the country code without '+' or '00'.\n$token = \"token\";\n//Create the whatsapp object and setup a connection.\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO messages (phone, from, id, type, time, name, data) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\") or die (mysql_error());\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\n?>\n. Done, message is received and this is the text on the page:\n\n. Nope :-( I have checked all the columns in the database and that is correct, and (mysql_error()); doesn't give failures.. \n. @jesussales when I open the sql connections in the event handler, I receive:\nWarning: mysql_query() [function.mysql-query]: Access denied for user 'nobody'@'localhost' (using password: NO) in /exampleFunctional.php on line 29\nWarning: mysql_query() [function.mysql-query]: A link to the server could not be established in /exampleFunctional.php on line 29\nAccess denied for user 'nobody'@'localhost' (using password: NO)\n@shirioko Done, but no results..\n. Done, but no text with failures\n. No failures.. Haha. No text with failures.. :P But no entries in database..\n. @shirioko Yes I try. \nBy the way, in the rule '$conn = mysql_connect($foo, $bar, $baz);', where does he select the db?\n. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from, id, type, time, name, data) VALUES ('SENDER', 'RECEIVER', 'ID984', ' at line 1\nCan it be that one of 'from, id, type, time, name, data' is a reserved keyword in SQL?\n. I have editted the name of the columns and run the other script, for testing.\nThe error \"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from, id, type, time, name, data) VALUES ('SENDER', 'RECEIVER', 'ID984', ' at line 1\" is now gone, its fixed.\nAlso have editted the names in the other script, for save incoming messages, but no results..\n. By the way, when I run the script, I see nowhere the output of echo \"Message from $name:\\n$body\\n\\n\";\n. I have now tried this code, but no results in database;\nphp\nrequire_once 'whatsprot.class.php';\n\n<p$cfg['MysqlLoc'] = \"localhost\"; //Lokatie van Database (Normaal: localhost)\n$cfg['MysqlUsr'] = \"user\"; //Gebruikersnaam\n$cfg['MysqlPas'] = \"pass\"; //Wachtwoord\n$cfg['MysqlDtb'] = \"db\"; //Database Naam\nmysql_connect($cfg['MysqlLoc'],$cfg['MysqlUsr'],$cfg['MysqlPas']) or die (\"Er is een fout opgetreden bij het connecten met het dbbeest. MySQL retouneerde: \".mysql_error());\nmysql_select_db($cfg['MysqlDtb']) or die (\"Er is een fout opgetreden bij het selecteren van het dbbeest. MySQL retouneerde: \".mysql_error());\n// phone number, deviceIdentity, and name.\n$options = getopt(\"d::\", array(\"debug::\"));\n$debug = (array_key_exists(\"debug\", $options) || array_key_exists(\"d\", $options)) ? true : true;\n$username = \"sender\";                       // Telephone number including the country code without '+' or '00'.\n$identity = \"identity\";  // Obtained during registration with this API or using MissVenom (https://github.com/shirioko/MissVenom) to sniff from your phone.\n$password = urldecode(\"password\");      // A server generated Password you received from WhatsApp. This can NOT be manually created\n$nickname = \"nickname\";                           // This is the username (or nickname) displayed by WhatsApp clients.\n$target = \"receiver\";                    // Destination telephone number including the country code without '+' or '00'.\n$token = \"token\";\n//Create the whatsapp object and setup a connection.\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\nfunction onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo \"Message from $name:\\n$body\\n\\n\";\n    mysql_query(\"INSERT INTO berichten (nummer, van, id, soort, tijd, naam, bericht) VALUES ('$mynumber', '$from', '$id', '$type', '$time', '$name', '$body')\") or die (mysql_error());\n}\n$w = new WhatsProt($username, $token, $nickname, false);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->Connect();\n$w->LoginWithPassword($password);\nwhile($w->PollMessage());\n?>\n. I thought one for the send message and one for the receiving messages, but one is sufficient?\nIt works now, huray!\nI have another question: At the whatsapp.php, when I open it you can search for a number/group. I saw this in the file:\n/\n\n- NOTHING ELSE TO EDIT BELOW THIS LINE.\n  \n  */\n  require 'whatsprot.class.php';\n/\n- For the future, other ways of getting contacts from various sources\n- can be used by implementing the Contacts Interface.\n  \n\n- Data must be returned in an array that looks like follows:\n  \n- Array\n  \n- (\n-   [0] => Array\n-       (\n-           [name] => PersonName\n-           [id] => 1234567890\n-       )\n  \n-   [1] => Array\n-       (\n-           [name] => PersonName2\n-           [id] => 0987654321\n-       )\n- )\n  /\nIt is then the intention that I do that arrays in that same file? Of for example, I must be making a contacts.php and including that into that file?\n. Aha okay. I am making a online alert-system for my region, and I want to make that users can insert their number in the system. But its not possible that the script is searching a sql table for numbers, when I search at 'Choose a person/group..' ?\n. I try it with 2 different numbers: 1 for the WhatsAPI and 1 for the WhatsApp on my iPhone.\nYesterday, it works to sent messages from WhatsAPI to my iPhone, and now, no results when I send a message..\n. What was the code to check a succesful login? Reload the exampleRegister.php?\n. I receive a text with at the bottom of the text 'not authorized'\nThat means that there is no connection? Can it be that WhatsAPI have a session-system or something else? Because I have not reload the exampleRegister.php..\n. How to post that here, with what tags? When I paste it here, I see weird charactars\n. ``` xml\ntx  ]\u2039F'31627308530.\u000b\u00c0\u00bc\u001e\u00e3\u00b5+N\u0090{\u00fdz37\u00e9]\u00c9lU1396178291WhatsApp/2.11.151 Android/4.3 Device/GalaxyS3 MccMnc/204001\nrx  \nrx  \nrx  \u201az\u00c2\u0017\u00ae\u00ab\u00c9\u00f4\bY\u00f6M\u02dcV\u00b4\u00ff\u00b4\u00c3\u00e5\u00be\ntx  \u00e6\u00dd\u00f5Q\u0153\u00f6\u00b2\u00da\u00bdo\u00b1Q\u00d7\u00dc\u00fc\u0161i\u0013\u00d10\u00b9\u00ab\u02dc,Y\u00bc\u00fdn#.\u0019\u00bb\u201a\u0153i\ntx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx    test\ntx  \nrx  \nrx    \nrx  \n```\n. So I have to register the number again? And I get the error message again tomorrow?\n. When I try to register the number again, i receive:\nArray ( [cc] => 31 [in] => SENDER [id] => ID [code] => CODE [c] => cookie ) stdClass Object ( [status] => fail [reason] => blocked )\n. Wow, weird.. Have already sent a mail to the customer service of WhatsApp.. When I need to register a new number every time is an expensive idea. (\u20ac 7.50 per number)\n. ",
    "views0nic": "Shirioko, thank you very much for the examples and help...I have been have similar issues and thanks to your examples all is working fine. Can you please tell me what the easiest way would be to insert received image url into mysql db using your above examples for text messages?\n. ",
    "khaled-omar": "the same here i can't login , did anyone find solution ?\n. ",
    "syahidin": "is that so expensive to register new number ? contact me to get low cost per number.\n. ",
    "gbmrocks": "how to recieve client receipt after saving message it ?\n. it gives error\nOn 6/13/14, mgp25 notifications@github.com wrote:\n\n@gbmrocks in the\nwiki You can\nfind all the events. For example, the ones you need...:\n- onMessageReceivedServer($mynumber, $from, $id, $type, $time)\n- onMessageReceivedClient($mynumber, $from, $id, $type, $time)\nsendMessage() returns its message id\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/venomous0x/WhatsAPI/issues/777#issuecomment-45998456\n\n\nGaurang B. Mody\n-A critical factor in its success was that the X developers were\nwilling to give the sources away for free in accordance with the\nhacker ethic, and able to distribute them over the Internet.\n. i am using like this.\ni am getting server receipt.\nbut i want to know how to get client receipt after saving messege id\nphp\npublic static function event_onMessageReceivedServer($mynumber, $from, $id, $type)\n    {\n       echo \"$type message $id from $mynumber to $from received by server on.<br />\";     \n    }\n       public static function event_onMessageReceivedClient($mynumber, $from, $id, $type,$time)\n    {\n        echo \"$type message $id from $mynumber to $from received by client on. $time<br />\";\n    }\n. $this->wa->eventManager()->bind(\"onMessageReceivedServer\", \"WaBulkSender::event_onMessageReceivedServer\");\n    $this->wa->eventManager()->bind(\"onMessageReceivedClient\", \"WaBulkSender::event_onMessageReceivedClient\");\n. client receipt giving no data.\nsuppose i want to get receipt for particular message id what can i do ?\nplease tell me proper code.\nso i am not getting it.\nthank you\n. suppose my message id is : message-1402671633-1 \nhow to retrieve receipt.\nServer receipt i am getting but no success in client\n. yes receieved\n. ok thank you\n. ",
    "Incher25": "The same question, what exactly should I do to receive  Client receipt by saved message id?\n. ",
    "shadiAlotati": "what you mean ?\n. i read document to get ID and Passowrd from MissVenom but how i dont understand \nfrom where can i get it ??\n. what you mean WART? \n. are you mean https://github.com/shirioko/WART ?\ni try and get this id \n%f7%c7%ef%3e%bf%0fb%95n%1d%ea%8a%19%3c%93v%ba%29%a5%10\nits true or false ??\n. i thank now the error is from whatsapp host \nits show me this error\nError: There was an error with the AJAX request. The request timed out.\n. i try to show what is error type by see the error in firebug and it show me this error \nFiring onConnectError\n{\"success\":true,\"type\":\"contacts\",\"data\":[],\"messages\":null}\nfunction is :-  \npublic function connect()\n{\n    $Socket = fsockopen($this->WHATSAPP_HOST, $this->PORT);\n    if ($Socket !== false) {\n        stream_set_timeout($Socket, $this->TIMEOUT_SEC, $this->TIMEOUT_USEC);\n        $this->socket = $Socket;\n        $this->eventManager()->fire('onConnect', array($this->phoneNumber, $this->socket));\n    } else {\n       echo \"Firing onConnectError\\n\";\n        $this->eventManager()->fire('onConnectError', array($this->phoneNumber, $this->socket));\n    }\n}\nand the $this->WHATSAPP_HOST, $this->PORT like this :-  \nconst PORT = 443;   \nconst WHATSAPP_HOST = 'c.whatsapp.net';\nwhere are the problem\n. good but ist some time show me this error and not send message  :-  \nError: There was an error with the AJAX request. The request timed out.\nand some time not show me and send message\nhow can i change this host by good host to don't show me any error \n. @shirioko any help ?\n. @shirioko ok but I bought server and put it in whatsprot.class.php and send message, its show me this error :-  \nError: There was an error with the AJAX request. The request timed out.\nWhat are the possibilities of your server to send messages\n. ",
    "nasurinhakimu": "Identical problem. Please help!\n. ",
    "ahmtel": "please support. ",
    "caiomarruda": "How to implement this function?\n. update the version of android to 2.11.209.\n. I'm with the same problem...\n. how to use @shirioko ?\n. ",
    "JonZarate": "Thank you @shirioko  !!\nI used WART and got my Identity and Password. I edited whatsapp.php and succesfully logged in.\nQuestions : \n1 - Can't I use WhatsAPI and WhatsApp at same time ? WhatsApp stopped working until I requested a new code, and then, WhatsAPI stopped.\n2 - I haven't been able to send messages. When I pushed \"Send\" it doesn't sent them, when clicking, I just receive the messages I have been sent. \nBy the way, you made an amazing work on WhatsAPI. Keep it up !\n. @shirioko Yes. When I push Send, all messages people sent me appear, but it doesn't send mine. \nAnyway, I will try it again later and tell you about it. \n. @shirioko I tried it again and now it worked. I sent it to a group but I guess it will also work for individuals. Thanks.\n. I added the following lines : \ncase 'requestLast':\n    echo \"Last Seen selected\";\n    $this->connectToWhatsApp();\n    $this->wa->sendGetRequestLastSeen();\n    break;\nRequest last seen time.\nprivate function showLastSeen($mynumber, $from, $id, $to)\n{\n    ?>\n    (Javascript alert)\n    <?php\n}\nShows an alert when any last seen time is received.\n$this->wa->eventManager()->bind('onRequestLastSeen', array($this, 'showLastSeen'));\nAdds the listener. \nI studied JAVA at college, but I find PHP a little difficult yet. Thanks for advanced.\n. @shirioko I just copied the structure of previous lines : \n$this->wa = new WhatsProt($this->number, $this->id, $this->nick, false);\n                        $this->wa->eventManager()->bind('onGetMessage', array($this, 'processReceivedMessage'));\n                        $this->wa->eventManager()->bind('onConnect', array($this, 'connected'));\n                        $this->wa->eventManager()->bind('onGetGroups', array($this, 'processGroupArray'));\nSo I added : \n$this->wa->eventManager()->bind('onRequestLastSeen', array($this, 'showLastSeen'));\nshowLastSeen is my function that will launch the JavaScript alert just to know if it has been received.\nprivate function showLastSeen($mynumber, $from, $id, $to)\n{\n?>\n(Javascript alert)\n<?php\n}\nFinally, I added the option to ask for the last seen time on the menu :\n< option value = \"requestLast\" > Request Last Seen  < / option >\nAnd implemented it on the switch-case:\ncase 'requestLast':\necho \"Last Seen selected\";\n$this->connectToWhatsApp();\n$this->wa->sendGetRequestLastSeen();\nbreak;\nWhat does it look like ?\n. @shirioko Do you mean this piece of code ?\nphp\ncase 'requestLast':\necho \"Last Seen selected\";\n$this->connectToWhatsApp();\n$this->wa->sendGetRequestLastSeen();\nwhile($wa->pollMessage());\nbreak;\nBy the way, how did you change font colors ?\n. If anyone needs it, the same problem has been resolved here.\n. @mgp25 @sbalgas Resulta que ambos hablais castellano as\u00ed que lo pondre en ambos idiomas.\n\nQuiero crear una aplicaci\u00f3n Java para ordenadores.\nYa intent\u00e9 editar el c\u00f3digo de examples/whatsapp.php y usar la funci\u00f3n sendGetRequestLastSeen sin \u00e9xito. Necesito saber que pasos tengo que llevar a cabo para poder usar esa funci\u00f3n. Supongo que primero habr\u00e1 que conectarse, conseguir la contrase\u00f1a para descifrar RC4 etc. para despu\u00e9s poder ejecutar esa funci\u00f3n, \u00bf cierto ? \u00bf Qu\u00e9 pasos son ? \nAparte, despu\u00e9s de usar esa funci\u00f3n, \u00bf a donde va la informaci\u00f3n que he solicitado ? No hay return ni nada similar, entonces, \u00bf de donde leo la respuesta ?\n\nI want to create a Java app for computers.\nI tryied to edit the code of examples/whatsapp.php and use the sendGetRequestLastSeen function unsuccessfully. I need to know what steps I have to follow in order to use that function. First of all, I suppose I need to connect to the servers, get the password to decrypt RC4 etc. so that I can execute the function, right ? \u00bf What steps are they ?\nApart from that, after using that func, where is the info I requested ? There is no return so where do I read the data ?\n. @sbalgas @mgp25 I completly understand how WART works, I even used WhastsApp with examples/whatsapp.php. These are the steps I was refering to :  \nphp\n$w->connect();\n$w->loginWithPassword($password);\n$w->sendClientConfig();\n$w->sendGetServerProperties();\nNow, I can execute any procedure I want. For example, sendgetRequestLastSeen($target):\nphp\n$w->sendGetRequestLastSeen($target);\nFinally, where do I read the data from ? Do I have to poolMessages() or something ?\n. @mgp25 @shirioko It's great to read you again. Thank you, to both of you for answering that quickly, I was about to change to pollMessages as I have just read it :smile: \nSo, where is that message queue ? \nphp\n    public function pollMessage($autoReceipt = true)\n    {\n        $stanza = $this->readStanza();\n        if($stanza)\n        {\n            $this->processInboundData($stanza, $autoReceipt);\n            return true;\n        }\n        return false;\n    }\nI am reading processInboundDataNode ( callled from processInboundData ) but I cannot see what is being done with the information of last seen. Where is it ? Thank you !\n. Wow, that iq tag really fooled me. I guess messageQueue is the variable I should check, right ?\n. php\n    function fireGetRequestLastSeen(\n        $phone,\n        $from,\n        $msgid,\n        $sec\n    ) {\n        $callbackEvent = function(WhatsAppEventListener $listener) use ($phone, $from, $msgid, $sec) {\n            $listener->onGetRequestLastSeen($phone, $from, $msgid, $sec);\n        };\n        $this->fireCallback($callbackEvent);          \n    }\nYou mean by adding a listener, right ?\n. @shirioko Okey, I'll gve it a try. Could you change the title of the thread to \"How to get last seen\" ? It could be useful for other users.\n. ",
    "hs4859": "can anyone plz tell me how to log in on whatsapp server\n. ",
    "AnandMamar": "@shirioko @JonZarate please provide me source code for getting password from WART because now its not working.\n. ",
    "bongbongjin": "hi sir.,\nI am gonna to get last seen from many user.\nHow should i do?\nI have aleady tried.. but it is not working fine now....\n  string[] numbers;\n                List phonesublist = mValidlist.GetRange(i, step_cnt);\n                numbers = phonesublist.Cast().ToArray();\n                wa.SendGetStatuses(numbers);\n                for (int j = 0; j < step_cnt; j++)\n                {\n                    wa.SendPresenceSubscriptionRequest(numbers[j]);\nwa.SendGetServerProperties();\n                wa.SendQueryLastOnline(numbers[j]);\n                Thread.Sleep(10);\n            }\nThis is my code.\nAt first it is working and after some minutesi would recieve error code \n\nRECVD:   \nRECVD: \nWhat s up?\nCould you explain to help me?\nthanks.\n. Hi sir.\nhow many could i get get last seen informationg at once?\nI have tested about that.\nAt the beginning it has been working fine.\nBut after i got hundreds informations, i had got only .\nWhat s up?!\nI had got only  continuesly.\nSo i had tested again after some mins.\nThen i could got correct last seen information again. and after mins, same error are occured.\nPlease help me.\n. Adding comment.\nI am trying to get so much last seen informations.\nHow could i do?!!\n. thanks for your reply.\nif i d like to get last seens informaion for so much phone number. \nhow should i do?Thanks.\nbong\n5/5/2015 3:39 AM mhamzas (notifications@github.com) \n@JonZarate \n  can you please elaborate how you make it work ?\n  \u2014Reply \n  to this email directly or view \n  it on GitHub.\n. Thanks\nBut how many number could i check ?\ni have already tried using this way.\nBut after checking hundreds numbers , and last seen would not be recieved \nfor a while.\nthanks.5/5/2015 3:31 PM mhamzas (notifications@github.com) \nyou can add lines with different targets\n  $w->sendGetRequestLastSeen($dst1);$w->sendGetRequestLastSeen($dst2);$w->sendGetRequestLastSeen($dst3);\n  \u2014Reply \n  to this email directly or view \n  it on GitHub.\n. ",
    "dacripo": "Sync contacts may takes enough time if there too many contacts to sync. You should set time limit over than 30 seconds in your php file, using setTimeout(-1) method to an unlimited time response by the server.Otherwise if you try to sync contacts with Google using php code placed in a virtual server or on a server far from you eg. in another country, Google will intercept it like someone strange stolen your password and is trying to access your account now. Therefore Google will block the access. Google notify you it in your gmail account, and there you will be able to give your code full access.\nSorry, my English is quite bad. Its only my experience with sync code. Good luck! \n. Try to you use the code sync contacts code use to get which contacts have whatsapp. After sync with Google to get contacts you will find the code you need. Good luck! \n*You should know, if you send a wa message to someone who doesn't have wa number registered yet, he will receive it the girst time he register his number installing WhatsApp.\n. Hi guys, I do the same what you write above, but when contact arrives, it contains class' CODE! I don't know why. Thanks.\n\n. Ok, but whats wrong ? I would like to send a contact without that. Thanks.\nEl 28/04/2014 18:42, \"Max Kovaljov\" notifications@github.com escribi\u00f3:\n\nThis is why\nhttps://github.com/venomous0x/WhatsAPI/blob/master/src/php/vCard.php#L124\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/708#issuecomment-41581878\n.\n. Okk, thank you boss\nEl 28/04/2014 18:59, \"Max Kovaljov\" notifications@github.com escribi\u00f3:\nThere's nothing wrong, if you want to remove it you'll need to comment out\nthat line in vcard.php\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/venomous0x/WhatsAPI/issues/708#issuecomment-41584058\n.\n. Try to verify if google didn't block you. For example if you have your\nserver running in another country. Because they might think someone stole\nyour account and run it from abroad.\nEl 24/06/2014 20:57, \"sem schilder\" notifications@github.com escribi\u00f3:\nmy code:\n$config['webpassword'] = 'V*s';\n$config['Twillio'] = array(\n    'id' => null,\n    'fromNumber' => '316__81',\n    'nick' => \"Bottttt\",\n    'waPassword' => \"81_*_SQo=\",\n    'email' => 's_*_r@gmail.com',\n    'emailPassword' => 'm****n');\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/803#issuecomment-47015255.\n. \n",
    "thed3v1l": "Hi,\nCan you post the code/function here how you were able to check. \nUsing contactsync for 10,000 would definatelty block you. You can use multiple instances to get out of this.\n. Hi,\nWhen the socket opens to send and at the same time someone replies, how do we manage that?\nRegards\n. ",
    "abhisheksanghvi8": "Our smart software can filter which numbers have whatsApp and which do not. If you want to buy this software or us to this for you,\nCall me on +91-9160157358 or email to abhishek.sanghvi8@gmail.com\n. Our website is www.bulksmsglobal.in \n. Thanks in advance\n. ",
    "yazeed44": "https://github.com/yazeed44/Whatsapp-SyncUtil-java\n. ",
    "chemburkar": "brilliant! :) thanx\nworks like a charm.. \nSo I can now receive messages without showing up as online. But I had assumed when I send a message, I will forcefully been shown as online, which is not the case.\nSo to mimic what happens on a whatsapp mobile client, when a message is sent, I do the following:\nphp\n$w->sendAvailableForChat();\n//$w->pollMessages();\n$w->sendPresenceSubscription($from);\n//$w->pollMessages();\n$w->sendMessageComposing($from);\nsleep(1);\n//$w->pollMessages();\n$w->sendMessagePaused($from);\n//$w->pollMessages();\n$w->sendMessage($from, $body);\n$w->pollMessages();\n( I'm not sure if it is necessary to uncomment all the commented $w->pollMessages(); )\nTo go offline after 15 seconds of inactivity , I set a timer and call:\nphp\n$w->sendOfflineStatus();\nIf there is no activity for more than 60 seconds, whatsapp server stops communicating with the code.\nThere are two approaches to counter this, that I have found.\n1. Call $w->sendPong(time()); within 60 seconds of inactivity (I call it within 30 seconds)\n2. Connect, PollMessages, Disconnect...(in a Loop)\nCould you please shed some light as to how a mobile whatsapp client does it. Does it use any of the above or some other way?\n. That makes a lot of sense, i'm guessing andoid,ios,windows phone and bb will have push notifications from their respective providers. I'll have to look up older platforms eg. symbian to see how the mobile client works there.\nThanks, your replies have been very helpful and quick.\n. ",
    "ExpressArab": "1 msg per 1 channel\n. @technocode  You Spammer\n. ",
    "mega1550": "Update whatsapp class \n. ",
    "engHusseinMansour": "download last version of wart ,i had the same problem when i used (wart v.1.6.3.0)\nit's work on the new version of wart (v.1.6.6.0)\ndowload from \nhttps://github.com/shirioko/WART\n. $w = new WhatsProt($sender, $imei, $nickname, false);\n$w->Connect();\n$w->LoginWithPassword($password);\nrequire 'vCard.php';\n$data = array(\n    \"display_name\" => \"Hussein Mansour\",\n    \"work_city\" => \"Lebanon\",\n    \"office_tel\" => \"111111\",\n    \"cell_tel\" => \"22222\"\n);\n$vcard = new vCard();\n$vcard->set(\"data\", $data);\n$vcard->build();\n$w->sendVcard($target, $name=\"Test\", $vcard);                   \n//it's not open on whatsapp (unable to view this contact.) !!!\n. thank you very much , you are the best :)\n. //Worked 100%\n//You can enter your data in \"\" \nrequire 'vCard.php';    \n```\n            $data = array(\n                    \"display_name\"          => \"\",\n                    \"first_name\"            => \"\",\n                    \"last_name\"             => \"\",\n                    \"additional_name\"       => \"\",\n                    \"name_prefix\"           => \"\",\n                    \"name_suffix\"           => \"\", \n                    \"nickname\"              => \"\",\n                    \"title\"                 => \"\",\n                    \"role\"                  => \"\",\n                    \"department\"            => \"\",\n                    \"company\"               => \"\",\n                    \"work_po_box\"           => \"\", \n                    \"work_extended_address\" => \"\", \n                    \"work_address\"          => \"\", \n                    \"work_city\"             => \"\", \n                    \"work_state\"            => \"\", \n                    \"work_postal_code\"      => \"\", \n                    \"work_country\"          => \"\", \n                    \"home_po_box\"           => \"\", \n                    \"home_extended_address\" => \"\", \n                    \"home_address\"          => \"\", \n                    \"home_city\"             => \"\", \n                    \"home_state\"            => \"\", \n                    \"home_postal_code\"      => \"\", \n                    \"home_country\"          => \"\", \n                    \"office_tel\"            => \"\", \n                    \"home_tel\"              => \"\", \n                    \"cell_tel\"              => \"\", \n                    \"fax_tel\"               => \"\", \n                    \"pager_tel\"             => \"\", \n                    \"email1\"                => \"\", \n                    \"email2\"                => \"\", \n                    \"url\"                   => \"\", \n                    \"photo\"                 => \"\", \n                    \"birthday\"              => \"\", \n                    \"timezone\"              => \"\", \n                    \"sort_string\"           => \"\", \n                    \"note\"                  => \"\" \n                );\n        $vcard = new vCard();                                                       \n        $vcard->set(\"data\", $data);                                                 \n        $vcard->build();                                                            \n        //$vcard->download();\n\n        $w->sendVcard($target, $name=\"Contact\", $vcard->show());\n\n```\n. 100%\nYou are a special person \nAll thanks to you\n. ",
    "juanmasn": "I have tried with Wart v.1.6.6.0 and v.1.6.7.0 without success. If I use WhatsApp apk from Google Play version 2.11.186 the registration works.\n. I have downloaded WhatsApp apk 2.11.234 from WhatsApp homepage and it is telling to wait 1 hour = 3600 seconds. It is strange that it is telling me to wait 1 hour in version 2.11.234 but not in version 2.11.186. So I suppose that the error is the MD5 generateRequestToken from version > 2.11.186.\nIs there some possibility to get 2.11.186 MD5 string in order to test if this is the problem?\nThanks!\n. I have already read more than 100 issues but I cannot find it... any tip?\n. Many thanks. I appreciate your help. But it is not working with 2.11.186 either :-(\nmaybe it is time to investigate with method=self \n. Hello I have the same problem with Indian phone numbers.\nAnybody have a clue?\n. ",
    "kareem289": "it's not worked with me , if there is any solution please ! \n. same proplem , check this \nhttp://965whats.com/include/classes/Whatsapp/sendcode.php?phone=14326143583&send=send\n. please try change the number with any other number \nreplace \n14326143583\ninto any thing other like \n14326143582\n. i got a news server in usa , and try to register a us number \nbut it still give me no_routes \ncan i send the data of the website for you at email \nhttp://bbwhats.com/test/sendcode.php\n. ",
    "marimuthum17": "Hi, \nWhen i am using registerTool.php getting below is my output can anyone tell me whats wrong?.\nArray ( [in] => *******\n            [cc] => 91 \n            [id] => %0b%c4%5f%13%28%54%50%c4%d0%2e%9f%2d%55%00%0d%3f \n            [lg] => hi \n            [lc] => IN \n            [mcc] => 000 \n            [mnc] => 000 \n            [sim_mcc] => 404\n            [sim_mnc] => 049 \n            [method] => sms \n            [reason] => self-send-jailbroken \n            [token] => WoyDFPqus9BcGbiDaW2mF6OlGkI%3D [network_radio_type] => 1 ) \nstdClass Object (\n         [status] => fail \n        [reason] => no_routes \n        [retry_after] => 3600 ) \n       There was a problem trying to request the code.\n       Fatal error: Uncaught exception 'Exception' with message 'There was a problem trying to    \n       request the code.' in src\\whatsprot.class.php:436 Stack \n       trace: #0  examples\\exampleRegister.php(48): \n       WhatsProt->codeRequest('sms') #1 {main} thrown in  src\\whatsprot.class.php on line 436\nCan anyone help me?\n. @mgp25 \nHi,\nIn my registerTool.php i am using the below details,\nplease tell me what is wrong in this?\nrequire_once('../src/whatsprot.class.php');\n$debug = true;\n$username = '9197906*';\n$identity = \"identity\";\n$nickname = 'Myname';\n$carrier = 'AirTel';\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$option = 'sms';\ntry\n{\n$w->codeRequest(trim($option), $carrier);\n}\ncatch(Exception $e)\n{\necho $e->getMessage();\nexit(0);\n}\necho \"\\n\\nEnter the received code: \";\n$code = fgets(STDIN);\ntry\n{\n$result = $w->codeRegister(trim($code));\necho \"\\nYour password is: \".$result->pw.\"\\n\";\n}\ncatch(Exception $e)\n{\necho $e->getMessage();\nexit(0);\n}\n. May i know what is the error you are getting @Davit21 ?\n. Dear sir,\nI am using registerTool.php file.\nMy param's are \n$username = '91****';\n$identity = \"Marimuthu\";\n$nickname = 'Marimuthu M';\n$carrier = 'AirTel';\n$option = 'sms';\nAnd my output is \nArray\n(\n    [in] => ****\n    [cc] => 91\n    [id] => %0b%c4%5f%13%28%54%50%c4%d0%2e%9f%2d%55%00%0d%3f\n    [lg] => hi\n    [lc] => IN\n    [mcc] => 000\n    [mnc] => 000\n    [sim_mcc] => 404\n    [sim_mnc] => 049\n    [method] => sms\n    [reason] => self-send-jailbroken\n    [token] => h%2BEyRntJmyEO%2BOigj1nKsWcOZ68%3D\n    [network_radio_type] => 1\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => no_routes\n    [retry_after] => 3600\n)\nPlease help me. \n. I din't get you. Please make it little more clear and provide a valuable solution for this.!!!!\n. I have checked with the link which you have provided to me, thanks for that. problem is  I am using the same Api and updated registerTool.php file despite facing the same problem. Now i need to know weather I am using correct following parameters ???\n$username = '91****';\n$identity = \"Marimuthu\";\n$nickname = 'Marimuthu M';\n$carrier = 'AirTel';\n$option = 'sms';\nCan you please check this parameter and report to me please?.\nand another questions to you, you have used \" $username = trim(fgets(STDIN)); \" I used the mentioned above , in case if I want to use parameters like you were should I use that ? because if i give that (fgets(STDIN)) it showing the phone number is not valid. please need your help !!!\n. Could you please help me to get whatsapp password?. I tried with WART and\nregisterTool but I i dint work it.\nKindly advice me!.\nOn Sat, Jan 3, 2015 at 8:08 PM, Elias J\u00fanior notifications@github.com\nwrote:\n\nThis is to run in CMD. you are trying to run this in Web what was made to\nrun in CMD. In this link that I sent you can take a look in wiki and have\nsomething about number register. It shows how to register a number in Web\n(not it CMD). Fgets is a function to get an file content, and STDIN is the\n\"file input\", that is the keyboard.\nIt's invalid because you are trying to run this STDIN in web, that is\nreally invalid.\nEm 03/01/2015 08:47, \"Marimuthu\" notifications@github.com escreveu:\n\nI have checked with the link which you have provided to me, thanks for\nthat. problem is I am using the same Api and updated registerTool.php\nfile\ndespite facing the same problem. Now i need to know weather I am using\ncorrect following parameters ???\n$username = '91****';\n$identity = \"Marimuthu\";\n$nickname = 'Marimuthu M';\n$carrier = 'AirTel';\n$option = 'sms';\nCan you please check this parameter and report to me please?.\nand another questions to you, you have used \" $username =\ntrim(fgets(STDIN)); \" I used the mentioned above , in case if I want to\nuse\nparameters like you were should I use that ? because if i give that\n(fgets(STDIN)) it showing the phone number is not valid. please need\nyour\nhelp !!!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-68592398.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-68596776.\n\n\nRegards,\nMarimuthu M.\n. ",
    "dovfrank": "I'm getting the same issue described by marimuthum17.\nGetting the following:\nstdClass Object (\n         [status] => fail \n        [reason] => no_routes \n        [retry_after] => 3600 )\nFatal error: Uncaught exception 'Exception' with message 'There was a problem trying to\n       request the code.' in src\\whatsprot.class.php:436\n. ",
    "designercv": "hOW TO GET PASSWORD FOR PHP API\n. ",
    "widplay": "LOL!\nI like! Lets GO!! \nI think that the problem is when you speak so fast with a lot of people. For example if you speak with only one number in a new account, you can send links, text, images so so so speed, days without stop. When you speak with more than X users whatsapp block account.\n. ",
    "dp3rez": "Hello, y'all...Nice work!\nI been having problems registering new Whatsapp numbers. My whatsapp keeps saying 'An sms was not sent' and then 'You were not called, try again'\nAnother thing (I don't know if that's the reason) is that the number I am trying to register is a virtual USA Google Voice number. Any help will be welcomed. dperez0109@gmaiil.com\n. I tried using WART. Didn't work.\n. Hello, y'all...Nice work!\nI been having problems registering new Whatsapp numbers. My whatsapp keeps saying 'An sms was not sent' and then 'You were not called, try again'\nAnother thing (I don't know if that's the reason) is that the number I am trying to register is a virtual USA Google Voice number. Any help will be welcomed. dperez0109@gmaiil.com\n. ",
    "kirbson": "CodersBrothers how can i contact you ?? Thanks...\n. ",
    "ramibta": "i did split the text from the text box but it would only read the first number but if i enter another number on the second line of the textbox it wont read any line and will only read from the add-on selection number... \n. ",
    "TheMasterRoot": "rsss and how can i clean my message inbox ?\n. but when i try to send a msg all income messages apear on the screen. many times it take more than 30 seconds do show all msg\n. do you know a good policy to send messages to whatsapp and not get the sim blocked ?\nactualy i have a group im my work that all workers need to recive the secret code in whatsapp to use in lunch and dinner i need to send at maximum 60 messages each day.\na message like that\nMARIO:20140507:78358\neach worker will recive a diferent message but im getting blocked rsss\n. tank you for support\n. ",
    "hianbattiston": "Man, I'm having the same problem, someone?\n. What happens is that the first time a call it, it works perfectly, but when I try again, it fails. Like you said, I have to wait a couple of hours to get it working again.\n. ",
    "juancrescente": "thanks\n. ",
    "kruegge82": "but how to test if the message sent? to retry?\n. ",
    "cybersyx": "Work Great thanks a lot :)\n. i'm using this $w->sendPong(time());\n. ok, same problem :( \nphp\n$contatore = 0;\nwhile (true) {\n    $connessione->PollMessages();\n    $messaggio = $connessione->GetMessages();\n    // Se il contatore \u00e8 30, quindi se sono passati 30 cicli, quindi\n    // se sono passati 30 secondi, allora mando il pong e resetto il contatore\n    if ($contatore > 30) {\n        $connessione -> sendPong(time());\n        $contatore = 0;\n    }\nxml\nrx  <stream:error>\nrx    <></>\nrx  </stream:error>\n. PHP Notice:  fwrite(): send of 21 bytes failed with errno=32 Broken pipe in /root/BOT/include/WhatsAPI/src/php/whatsprot.class.php on line 2663\ntx  \n. Ok, how fix it? Thanks a lot\n. Resolve with\nif ($contatore > 10) {\n        $connessione -> sendPresence('inactive');\n        $contatore = 0;\n    }\nThanks :+1: \n. ",
    "rgdixit": "hi, i tried sendPresence() as well but it doesn't seem to work. i am still getting the streamer messages. any help may be?\n. exactly... and sorry that dint post it earlier bt sendPong() has done the trick for me  too and that too  without  any id whatsoever. \n. see if i start answering them one by one and say my send command takes 2 second .my 100th fend will have to wait for 200 seconds right?? is it possible that i  call send function separately every time so that even my 100th friend receives it 2 seconds or so. \n. i do know that. the point here is if i am sending a message from my whatsapi client to some random number, i don't know if the second person has me in his contact or not. so now,  how do i know if that guy actually has me in his contact or not. \n. that's what i thought at first but thought there might be some way :P . thanks btw\n. ",
    "adamjakab": "I am using sendPresence()  every 30seconds and it seems to be working fine\n. ",
    "viskp": "thaks 4 ur reply..but eventually i'hv just implemented Whatsapi successfully...\n. ",
    "amjd": "Well, to be honest I can't figure out how it is being generated in Yowsup. For instance, the function is taking an argument 'identifier' to generate the identifier. Now, how do I know what's the identifier that's being passed to the function?\nCan you briefly tell me the procedure to register afresh using WhatsAPI? (Using same or different number.)\n. Hey,\nThanks for the reply, but my question is about how to find out the identity string used in WhatsAPI (which is represented by $userIdentity in your example). Either that, or I'd like to know the procedure to register afresh using WhatsAPI, when all I know is just my number.\n. Thanks for the answer! And that was a typo, I just edited the post to fix it.\nAnother question that I have is, what happens if two messages are received at the same or nearly the same time? Will both be handled as expected?\n. Okay, thanks. :)\n. Answering my own question after studying the source of the event class. Apparently, the signature given in the wiki isn't quite right.\nAccording to this part of the code [1], there's a missing parameter called $place_name between $name and $longitude. So, the variable that I took for latitude was actually for longitude and the one for data was for latitude. It must have been an oversight on the part of the wiki author.\nI'd appreciate it if someone can confirm if my findings are correct.\n[1] https://github.com/venomous0x/WhatsAPI/blob/master/src/WhatsAppEvent.php#L349-366\n. ",
    "eliasjnior": "My script is very simple, just to test:\n``` php\n// whatsapp_whatsapi_send.php\nrequire_once('whatsapp_whatsapi_config.php');\n$destinationPhone = '55xxxxxxxxxxx';\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->Message($destinationPhone, 'mensagem teste');\n```\nAnd the config:\n``` php\n// whatsapp_whatsapi_config.php\nrequire_once('whatsapi/lib/whatsprot.class.php');\n$userPhone        = '55xxxxxxxxxx60'; \n$userIdentity     = '3359xxxxxxxxx295';\n$userName         = 'Your Name'; \n$password         = 'EEZI0xxxxxxxxxxxxxxxxxxxxxx='; \n$debug            = true;\n```\nJust that. I open the whatsapp_whatsapi_send.php and the page open in about 7 seconds. As I'm finishing some jobs today, tomorrow I'll try in the CMD and another things.\nAnd yes, I tried differents numbers.\n. After I send in your page, it loads in about 5s too.\n. But what is making this slow? Even after you have sent the message? Is something on your page or on the API? Here I realized the same thing: the message is sent, but then the page takes a while to load.\n. I'll try to do it later. Hope it works normal, because I was almost creating my program in Python (I gotta learn First) because PHP was slow. I'll test on a more powerful server from the command line.\n. Here's what i got:\nPHP: http://pastebin.com/9b4mkyTz\nScreenshot: https://www.diigo.com/item/p/peccscezcbpqbqecszbeaaedpe\nTerminal: https://www.diigo.com/item/p/peccscezcbpqbqqprzbeaaedrc\nSo, the PHP in the page: 7s. PHP in terminal: 8s (rounded). The script is simple. Is that right?\n. So, I think that the login is taking this time. I placed this code 44x:\nphp\n$wa->sendMessage('557399722520','Testing:  '.rand(0,1000));\nI got:\nStart: 1402933198 \nFinish: 1402933213 \nTotal: 15\nSo, when I send this 44 messages, it takes about 7s, 0.16s each message. It's about 7s to login and 0,16s each message.\nIs there any way to reduce this login time?\n. No problem. I don't want send multiple messages. I'm just testing the API because I want use it in WordPress. So, will be possible answer comments with WhatsApp, receive messages when someone comment publish... and other things. The bulk message that I tried right now was just to see what was causing the \"slowness\", and I found that was login.\n. This is just the login: http://pastebin.com/dKvYD9pi\nStart: 1402937031 Finish: 1402937040 Total: 9\nMy connection? I don't really think that is the problem: http://www.speedtest.net/my-result/3567031089\nCan you test and look if this script takes the same time? If not, I will try with some hosting. \nEdit: and yes, to my WP Plugin, no problem this 7s. But, if I can solve this, it will be better.\nEdit 2: the same script running:\nhttp://site9.com.br/w/tests/whatsapp-test.php\nEdit 3: So, I found what is taking so long here: function pollMessage. About 2-3s each call. I saw that in the doLogin it's called 2 or 3 times. Is that necessary, as I'm doing just login? Isn't better for me use this function in getMessages?\n. Undestood. So, it's not a problem here. Thanks.\n. If you're sending 100 messages, so, you are looking for bulk message, and we don't support this.\n. I sent 100 messages for 5 different contacts only connecting and while loop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just connected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is my numbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\n. @mgp25 I'm just \"playing\" with this API. Right now, I don't want use it, just testing. This \"bulk test\" was about 2 weeks ago, and I'm not blocked.\nBut, as @mgp25 said, \"Use the API the way the real mobile cleint works and everything will work fine\". Don't try to use to wrong things. If you try spam, will get block sometime... And if you don't like receive spams, don't do the same!\n. I think the best choice for you is the Yowsup. It's faster then WhatsAPI and you can develop a simple desktop application. If you use in the correctly way, it will work perfectly and you won't get blocked.\nThe same with WhatsAPI... But, it's better if you don't know Python (like me =D)\n. Man, shut up! You are spamming. We don't support it.\nEm 07/11/2014 18:08, \"mrssam\" notifications@github.com escreveu:\n\nis any way to send 1000 whatsapp message in 5 mins i have contacts in\nmysql database please help me?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62204211.\n. Didn't you see that nobody will help you with that?\nEm 07/11/2014 18:33, \"mrssam\" notifications@github.com escreveu:\neven 100 message in 10 mins is this possible please ?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62207555.\n. That's why you shouldn't spam. \n. Probably they know that I'm not spammer and you...\nEm 08/11/2014 10:23, \"mrssam\" notifications@github.com escreveu:\neliasjnior say this:\nI sent 100 messages for 5 different contacts only connecting and while\nloop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just\nconnected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is my\nnumbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\nplease tell us how ,\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62255900.\n. You can see the examples folder.\nEm 08/11/2014 11:12, \"mrssam\" notifications@github.com escreveu:\nthanks eliasjnior am not spammer also I swear , please give me more info\nhow you do that\n2014-11-08 16:01 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nProbably they know that I'm not spammer and you...\nEm 08/11/2014 10:23, \"mrssam\" notifications@github.com escreveu:\n\neliasjnior say this:\nI sent 100 messages for 5 different contacts only connecting and while\nloop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just\nconnected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is\nmy\nnumbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\nplease tell us how ,\n\u2014\nReply to this email directly or view it on GitHub\n<\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62255900>.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62256939.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62257233.\n. Man, go see some tutorials about PHP, because it's a simple PHP code. Do loops (while, foreach, for...) and than see the exemples folders. Be patient and you'll learn. Everybody that know now did it, why can't you?\n. The function is only:\n\nForeach ( $students as $student)\nSend message(...)\nJust that.\nEm 08/11/2014 11:41, \"mrssam\" notifications@github.com escreveu:\n\ntell me the function name the i can use it in loop please\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62258031.\n. Loop PHP: http://goo.gl/hUYsfA\nSSL Curl: http://goo.gl/Zg4Q9q\nWhat if you search a little more some PHP programming? Don't you think that you'd get answers fast?\nAnd you said that can't use email... Don't you think that everybody have email account? It's necessary when you are studing. It's the simplest way to keep fast comunication with the school and students.\n. Not wanting to be boring, but being ... This will help you. What have we\nlearned so we do not forget. If we give you the code ready, you will not have\nlearned anything.\n. So, finishing what @mgp25 said... @mrssam, you can close this now :)\n. No, @mohamedayed. I tested with other numbers, it's not blocked. Actually, I tried get the code in WhatsApp on my phone, and worked.\n\nI tried user anothers events: \nRequest: onFailedRequestCodeTooRecent, onFailedRequestCode, onRequestCode\nRegister: onFailedRegisterCode, onFailedRegisterCode\nLogin: onBadCredentials, onGoodCredentials\nAny of this events worked for me. What I did wrong? Remember that I used anothers phone numbers to keep sure that I wasn't blocked (some numbers were fake, because I just have 3 sim cards and 1 of my real whatsapp, so, won't use this one).\n. It's working. I saw the code, I interpreted differently.\nonCodeRegisterFailed, for exemple, worked for me :)\n. I think you can keep this function as a function. and who wants use can create an event:\nonGetMessage($mynumber, $from, $id, $type, $time, $name, $body)\n... and in the function run:\n$body = parseMessageFromEmojis( $body );\nAfter I solve my problem with event manager, I will try that :)\nBut, in the WhatsProt class, you have protected $messageQueue. You can add another function to this class, like convertEmojis and before use $w->getMessages() you can call $w->covertEmojis(), so, this messages will be converted and when getMessages, will be all right.\nI'm not sure about everything I told, but, you can try that :+1: \n. I'm tring to register today, but never got the message or voice call :/\nA long time ago I did that.\n. I don't know. Wait someone comment to see if it works. I bought another SIM to test, but didin't receive. I'm waiting the \"retry_after\" to test again.\n. Well guys, today I find the problem. Please, read the exempleFunctional.php. Follow this guide to get the SMS from WhatsApp, but rembemer: UNINSTALL WHATSAPP FROM YOUR PHONE. I just can get the SMS without WhatsApp app in my phone.\nEdit: exempleRegister\n. Sorry, was exempleRegister :P\n. Oh, you were almost correctly.\nIf you see, this codeRegister returns an object. There's a variable called pw. You can do that:\nphp\n$codeRegister = $w->codeRegister( '123456' );\nvar_dump( $codeRegister );\nYou will see all the object, and there will be your password. Exemple:\nphp\nobject(stdClass)[9]\n  public 'status' => string 'ok' (length=2)\n  public 'login' => string '55xxxxxxxxx070' (length=13)\n  public 'pw' => string '0lvxxxxxxxxxxxxxxxxxxxx1E=' (length=28)\n  public 'type' => string 'existing' (length=8)\n  public 'expiration' => int 1443256747\n  public 'kind' => string 'free' (length=4)\n  public 'price' => string 'US$0.99' (length=7)\n  public 'cost' => string '0.99' (length=4)\n  public 'currency' => string 'USD' (length=3)\n  public 'price_expiration' => int 1414897682\nNow that you have your password, you can do whatever you want in the API. Just configure the settings. Oh, and remember that identity you can keep empty.\n. First of all, I suggest you to read this: https://github.com/mgp25/WhatsAPI-Official/wiki/WhatsApp-Registration-Flow\nAfter, you can read, in the Wiki again, the Number Registration: https://github.com/mgp25/WhatsAPI-Official/wiki/WhatsAPI-Documentation#number-registration\nYou don't have to urlencode, sha1, and others things with your identity. If I'm right, the identity is being saved in some folder. I always put the same as the username, as it's unique.\n. Oh god. Please let, search a little more. I am kind of sleeping hahaha.\nHere's Brazilian festivals, so, please, look about that because\nThat is a little more thing about registering, first nitrous /because this\nisn't the official whatsapi.\nEm 03/01/2015 08:09, \"Marimuthu\" notifications@github.com escreveu:\n\nDear sir,\nI am using registerTool.php file.\nMy param's are\n$username = '91****';\n$identity = \"Marimuthu\";\n$nickname = 'Marimuthu M';\n$carrier = 'AirTel';\n$option = 'sms';\nAnd my output is\nArray\n(\n[in] => ****\n[cc] => 91\n[id] => %0b%c4%5f%13%28%54%50%c4%d0%2e%9f%2d%55%00%0d%3f\n[lg] => hi\n[lc] => IN\n[mcc] => 000\n[mnc] => 000\n[sim_mcc] => 404\n[sim_mnc] => 049\n[method] => sms\n[reason] => self-send-jailbroken\n[token] => h%2BEyRntJmyEO%2BOigj1nKsWcOZ68%3D\n[network_radio_type] => 1\n)\nstdClass Object\n(\n[status] => fail\n[reason] => no_routes\n[retry_after] => 3600\n)\nPlease help me.\n\u2014\nReply to this email directly or view it on GitHub.\n. Okay. I'll try be more clear. I'm letter drunk dirt now. Here's the link:\nhttps://github.com/mgp25/WhatsAPI-Official\nThat's the right api library and updated. Plead, provide a feedback if it's\nall right.\nEm 03/01/2015 08:21, \"Marimuthu\" notifications@github.com escreveu:\nI din't get you. Please make it little more clear and provide a valuable\nsolution for this.!!!!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-68591597.\n. This is to run in CMD. you are trying to run this in Web what was made to\nrun in CMD. In this link that I sent you can take a look in wiki and have\nsomething about number register. It shows how to register a number in Web\n(not it CMD). Fgets is a function to get an file content, and STDIN is the\n\"file input\", that is the keyboard.\n\nIt's invalid because you are trying to run this STDIN in web, that is\nreally invalid.\nEm 03/01/2015 08:47, \"Marimuthu\" notifications@github.com escreveu:\n\nI have checked with the link which you have provided to me, thanks for\nthat. problem is I am using the same Api and updated registerTool.php file\ndespite facing the same problem. Now i need to know weather I am using\ncorrect following parameters ???\n$username = '91****';\n$identity = \"Marimuthu\";\n$nickname = 'Marimuthu M';\n$carrier = 'AirTel';\n$option = 'sms';\nCan you please check this parameter and report to me please?.\nand another questions to you, you have used \" $username =\ntrim(fgets(STDIN)); \" I used the mentioned above , in case if I want to use\nparameters like you were should I use that ? because if i give that\n(fgets(STDIN)) it showing the phone number is not valid. please need your\nhelp !!!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-68592398.\n. I Thought about trying to fix it, but as you've already done, just need to test, I'll wait.\nThanks for the answer :)\n\nIf you need something, just tell me :P\n. Just another thing, @mgp25. Is the codeRegister working, or something change? Because I'm tring since yesterday, and never receive call or sms. But I got:\nphp\nobject(stdClass)[5]\n  public 'status' => string 'sent' (length=4)\n  public 'length' => int 6\n  public 'method' => string 'sms' (length=3)\n  public 'retry_after' => int 1805\nI already tried another phone, bought a new SIM... And I saw some other issues, someone with WP7 that had the same problem, and did another things with the token/id, with sha1. Actually, I tried with md5 my username.\nMay be is that?\n. Ok. Thanks :)\nI will try again later.\nTake a look in the topic that I opened saying about the event list: #989\n. WOW, why I didin't see it before :P\nI had to read all the code, but at least I learned!\nI'm brazilian, so, I can almost read that... I will translate to portuguese after. Thanks.\n. Oh, no @mgp25 :/\nBut I undestand you too. Right now that I'm starting to really learn this API  I would try to create a multiplataform app to use simultaneously in smartphones, desktop (W8) and web.\nIf you add me to your repository, I would be grateful, but if not, thanks for what you did.\n. Well, if you need help, I can contribute to the private, as it's $7/month, @mgp25 \n. @crashforce, why \"congrats\"? :P\n. Spammers won't get support here.\nInfelizmente a maioria das pessoas que vejo querendo praticar spans s\u00e3o brasileiros. Isso me deixa triste, mas, o que posso fazer?\n. Yes, I do. And I do know too that broadcast is usually used to send spams.\nI will keep thinking it until you make think the inverse.\nEm 01/10/2014 16:07, \"Osmanbakri\" notifications@github.com escreveu:\n\nSpam ???! Do you have any clue how broadcasts work ???!!\nI don't think so .\nOn Wednesday, October 1, 2014, Elias J\u00fanior notifications@github.com\nwrote:\n\nSpammers won't get support here.\nInfelizmente a maioria das pessoas que vejo querendo praticar spans s\u00e3o\nbrasileiros. Isso me deixa triste, mas, o que posso fazer?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/995#issuecomment-57516819.\n\n\n\nEng. Osman\nMobile : +971501360436\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/995#issuecomment-57518421.\n. So, I didn't know that. Thank you. \nSo, I had this problem, it's because somewhere your script is running twice. \n\nI got that when I was sending message. \n. Did you get this API in PHP and adapted to Android or you just undestood the way that WhatsApp works and created from zero?\nIt's because I want create/adapt to Node.js, just for learning, and I don't know where I can start :P\nOf course, after I learn Node.js, hahaha.\n. Well, as soon as I learn Java too I will take a look in your script :P\nNice job.\n. Look some videos about node.js that will explain about this non blocking.\nOr even Google for non blocking applications that you will see :)\nEm 02/10/2014 13:28, \"rodrigofaillace\" notifications@github.com escreveu:\n\n@GitsUp https://github.com/GitsUp , I got it now. Thanks!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/996#issuecomment-57656751.\n. With a little reasearch, you could find that that about timeout it's because the set_time_limit.\n\nYou can see @mgp25 Wiki and take a look in the event list. There's a little code exemple in the end of the page.\n. Thinking better, that is no problem using try and catch :P\n. No.\n. @ludufre, but pollMessage() is already sent when you login. Why I should do it again?\n. Well, I already tried path too, @ludufre. But, when I get the WA response, the url isn't valid. Look:\nhttps://mmi214.whatsapp.net/d/ApzpdPM4KZM6fSfMprD_-R9dkRUErGgSPD8iHXX6gffp.jpg\nI do get all the messages (text) without problems. The only problem is images. Some images arrive, another don't. It's messing me up!\n. The same thing :/\nThe first time the image arrived. The second, I'm still waiting :P. I think I will try again another time.\n. Well, that's not. I didin't try, but, I edited the exempleFunctional.php and added 3 images to send:\n1) relative path\n2) full path\n3) uri\nGuess what? The image arrived everytime I tested (about 10 times).\nSo, that's probably something in my code. I will try to follow the exempleFunctional and see if works.\nThat's not \"sendSync\" in this script.\n. Get your password using WART. Use the same identity generated.\nBut, why you have this foreach?\n. So, use password extractor in some Android device.\n2014-10-19 14:28 GMT-02:00 Guilherme Brier notifications@github.com:\n\nWART not work for me,\ni'm using this foreach just to show the response\n\u2014\nReply to this email directly or view it on GitHub.\n. It's your coding error, not API.\n\nPlease, var_dump the result and you'll see.\n. It's not possible.\nAnd yes, looks like you're spamming. We do not support spammers and you'll\nget blocked doing this.\n2014-10-19 14:13 GMT-02:00 malmalakh notifications@github.com:\n\n@eliasjnior https://github.com/eliasjnior ... I have fixed the error,\nbut now I am facing another challange, how to check if the target has a\nvalid number or not before sending the message. they call this spam while\nthe message I am sending is for a number that is in my contact list\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1012#issuecomment-59654738\n.\n. I think it's just possible when you try to check last seen. But remember\nthat you link won't be clickable if the receiver don't have you in the\ncontact list.\n\n2014-10-19 14:18 GMT-02:00 malmalakh notifications@github.com:\n\n@eliasjnior https://github.com/eliasjnior ... no sir ... I am building\na website (video sharing) and I am giving the option to send the video link\nthrough WhatsApp, while the visitor want to share the link, I have first to\ncheck if the target number is valid or not. and not to lose the sending\nnumber and get blocked.\nThank you in advance. :)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1012#issuecomment-59654910\n.\n. Send pollMessage after send this image.\nNow \"we\" are here: https://github.com/mgp25/WhatsAPI-Official/\n. You cant use both. May be if you get the password from your phone and try to use, but, I'm not sure if this work.\n\nNow \"we\" are here: https://github.com/mgp25/WhatsAPI-Official/\n. It's because in 300 seconds, or 3 minutes, I don't know, the server close connection. It's better if you convert your image first, don't you think? Use php-gd.\n. I think you should read some more. Go to Wiki and see: https://github.com/mgp25/WhatsAPI-Official/wiki/Sync\n. And I think that you published in the wrong place, because you clicked in \"New issue\" button, not in \"New question\" :+1: \n. ",
    "Tsunami7272": "ok\n. ",
    "blackhackereg": "i tried with both :(\n. not work for me :(\n. ",
    "Marcorele": "Somene know how sendSetProfilePicture method works with Yowsup?\n. Ok thank you, but something is wrong on the library, cause the method invoking don't work with profile_setPicture(str filePath)\n. @faisalcse You have reach the limit...\n. You can't sync unlimited contacts with same username and password.\nWhen you reach the limit, it keeps waiting without any result...\n. @mgp25 Thanks for your quick repond.\nNo, i use WhatsAPI to make contactsync (Yowsup can't)\nAs you can see on my code, i just sync 1 contact...and need about 5sec to have the result.\nInstantly?How you call contactsync?\n. @mgp25 I already tried both solution. Less than a second? No entiendo...\n. http://marcorele.alwaysdata.net/wapi/contactsync.php?phone=\"123456\"&pass=\"xxxx\"&u=\"123456\"\nNeed more than 5sec to have result..i tried with differents servers, always same delay\n. @mgp25 Script and sync work fine, URL is good, but very slow\nHave a try with my server and you will see what i mean\n. Same delay from terminal :(\n. Thank you for the help!!\n. @shirioko Thank you! WhatsApiNet-SyncUtil is very fast! Do you think make some work on sync method in Yowsup?\n. @mgp25 can you share your sync method with yowsup please?\n. @mgp25 can you share your sync method with yowsup please?\n. ",
    "cwone": "I am facing exactly the same issue...\nMy current workaround is to execute the script via crontab every 5min or so to check the status of a user.\n. Thank you\nI tried binding the events before logon but it still does not seem to work.\nCan you please let me know if I am binding the events correctly or if I need any additional function?\n. Fixed issue in collaboration with @mgp25 https://github.com/venomous0x/WhatsAPI/issues/750\n. ",
    "mkhuder": "Hello;\nthe same problem here!\nany help please ?\n. Hello,\nI tried the simple script , but the same result, is it correct to put the id and password like this ?\n'id' => '%b1%02%ce%1d%5e%eb%ac%2bmt%bd%a8%c8%7cg%a0p%c8%04%91',\n    'waPassword' => \"ERMAHGERD PERSSWERD!!1!\",\n//EDIT @shirioko\nRemoved password\n. OK,\nBut can you please confirm if puting it that way is correct ? I mean without decoding or anything else ?\nThank you\n. it worked for me now with your simple script, gonna try the original script now :)\nThank you, \n. ",
    "dipen3492": "tx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  \u00e5\u0011!\u0016\u00fbj\u00e2\u00c5\u0012\u00e7L\u009d\u017d\u00e2\u00cb@\u00ec\u0015|!\ntx  \u00ba\u001b*\u00bc\\\u00db\u00d5\u00b8A\u00e8\u20ac^\u000b\u00a9\u00c7%w\u00b1\b\u00e1m\u00eeM\u00a2h\u00eb\u00a3\u00a7\u2020sE\u00c6x\u00a4\u00f4\n( ! ) Fatal error: Uncaught exception 'Exception' with message 'Login Failure' in D:\\wamp\\www\\wp\\WhatsAPI-master\\src\\whatsprot.class.php on line 1640\n( ! ) Exception: Login Failure in D:\\wamp\\www\\wp\\WhatsAPI-master\\src\\whatsprot.class.php on line 1640\nCall Stack\nTime    Memory  Function    Location\n1   0.0000  142984  {main}( )   ..\\test.php:0\n2   0.0310  1644968 WhatsProt->loginWithPassword( ) ..\\test.php:14\n3   0.0310  1645744 WhatsProt->doLogin( )   ..\\whatsprot.class.php:474\nplease help us to find perticular solution..\n. plese dont make us fooll... we do whatever you were tell us but we all get same error so plese help us or give us right scripts..\n. plz send full code my id and perfectlly work in my pc...\n. this not work proper\n. same error is up\n. i  am paaword and id use to wart exe software \n. There was an error with the AJAX request. XML/Json format is bad.\nthis error create\nplzzz solve this error\n. what's happen? please ans me...\n. @mgp25  I found\"Error: There was an error with the AJAX request. XML/Json format is bad.\"...so help me to slove it...\n. ",
    "realreef": "thx with this forum,  it`s work\n. ",
    "andrh87": "hi @mgp25 , thanks for your explaination! After going deeper into the code now i found the most things i was looking for :)\n. ",
    "amregbaly": "@mgp25 do you consider 10 messages is spam and abusing the system iam sure there is problem in api\n@whatapp11 check you email please\n. @mgp25 i belive @shirioko  made great work but without any support .. check here you will find many ppl have same issue without any help \nthats my code\ni put 50 number just 50 and whatapp blocked me after 14 message ! is 50 is spam number !! you said you sent 2000 !\n```\nphp\nheader('Content-Type: text/html; charset=utf-8');\nrequire 'whatsprot.class.php';\n\n<p$config = array(\n    'id' => 'kBjIWhwbuFvX5gFSACLzdP11yTs=',\n    'fromNumber' => '95555555555',\n    'nick' => \"955555555555\",\n    'waPassword' => \"WDdZ0YmX3n35FE4OsIY7ioEEkvs=\"\n);\n$startTime = time();\n$numbers = array(\n   '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n  '0000000000',\n);\n$wa = new WhatsProt($config['fromNumber'], $config['fromNumber'], $config['nick'], false);\n$wa->connect();\n$wa->loginWithPassword($config['waPassword']);\n$wa->sendActiveStatus();\n\nforeach($numbers as $key => $val)\n{\n    if((( $key + 1 ) % 5) == 0)\n    {\n        if ((time() - $startTime) < 60)\n        {\n            echo \"\\n------------------------------------- {$key} msg sent ---------------------------------------------\\n\";\n            sleep(60 - (time() - $startTime));\n            $startTime = time();\n        }\n    }\n$wa->sendActiveStatus();\n$wa->sendMessage($val, \"test message\" . time());\n$wa->pollMessage();\n$wa->sendActiveStatus();\n\n}\n```\n. @mgp25 so what i need to send messages to different ppls ?\nno spam no ads \nis there any solution other mr @whatapp11 solution ?\n. @McBacker \nSync contacts with every message !?\n. @mrssam \nhttps://github.com/mgp25/WhatsAPI-Official/blob/master/examples/contactsync.php\n. thanks @mgp25 \n. ",
    "manet800": "Hey! \nWe did exactly what is listed here and still after 14 messages blocked sim \nIs there an update on the subject?\n. Hello I done exactly what is written here and I'm still blocked, maybe somebody please make sense of how to send a message not to be blocked or no one could get in this situation? \nI would like an answer please it is very important to me \nThanks\n. But I can not Read the total and it can not have possibly distracted Skype conference with my programmer.?\n. We did exactly what you said row line \n. Must not send the same message several times?\n. What is the law of spam? How do they identify?\n. OK I will try to send a message with the question of what the law of the sending messages Is there a limit to the amount of sending or of the same message? I would like to help please!\n. ",
    "mrssam": "is any way to send 1000 in 5 mins i have contacts in mysql database please any one can help \n. how to Sync contact please ?\n. is any way to send 1000 whatsapp message in 5 mins i have contacts in mysql database please help me?\n. is any way to send 1000 whatsapp message in 5 mins i have contacts in mysql database ?\n. i see please i have university student contacts database how i can send them message using php any one can help ? \n. thanks, \n. even 100 message in 10 mins is this possible please ?\n. i will stay ask to get help There are many good people\n. sorry , what about this code when i use it i tell me this after sending more than 13 message \nthis is the error :Fatal error: Maximum execution time of 60 seconds exceeded in C:\\xampp\\htdocs\\whatsads\\sendbig.php on line 81\nhtml\nphp\n\n<prequire 'src/whatsprot.class.php';\nrequire_once('src/whatsprot.class.php');\n$config = array(\n    'id' => 'my whats id',\n    'fromNumber' => 'her my number',\n    'nick' => \"my name \",\n    'waPassword' => \"my wahts password\"\n);\n$startTime = time();\n//NOTE i use my number not 0000000 as the next lins\n$numbers = array(\n   '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n  '96700000000',\n);\n$wa = new WhatsProt($config['fromNumber'], $config['fromNumber'], $config['nick'], false);\n$wa->connect();\n$wa->loginWithPassword($config['waPassword']);\n$wa->sendActiveStatus();\nforeach($numbers as $key => $val)\n{\n    if((( $key + 1 ) % 5) == 0)\n    {\n        if ((time() - $startTime) < 60)\n        {\n            echo \"\\n------------------------------------- {$key} msg sent ---------------------------------------------\\n\";\n            sleep(60 - (time() - $startTime));\n            $startTime = time();\n        }\n    }\n$wa->sendActiveStatus();\n$wa->sendMessage($val, \"test message\" . time());\n$wa->pollMessage();\n$wa->sendActiveStatus();\n}\n. eliasjnior help me please i know you have answer you are smart , why you don't need to help me i can pay to get help please \n. thanks i will try\n. any one can help me how i can Sync contacts and Send Presence Suscription? please send me code \n.  eliasjnior  say this: \nI sent 100 messages for 5 different contacts only connecting and while loop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just connected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is my numbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\nplease tell us how , \n. thanks eliasjnior am not spammer also I swear , please give me more info\nhow you do that\n2014-11-08 16:01 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nProbably they know that I'm not spammer and you...\nEm 08/11/2014 10:23, \"mrssam\" notifications@github.com escreveu:\n\neliasjnior say this:\nI sent 100 messages for 5 different contacts only connecting and while\nloop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just\nconnected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is my\nnumbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\nplease tell us how ,\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62255900.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62256939.\n. who you mean by they , did you mean Whatsapp team\n\n2014-11-08 16:12 GMT+03:00 Mohammed Rassam eng.rassam199@gmail.com:\n\nthanks eliasjnior am not spammer also I swear , please give me more info\nhow you do that\n2014-11-08 16:01 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nProbably they know that I'm not spammer and you...\nEm 08/11/2014 10:23, \"mrssam\" notifications@github.com escreveu:\n\neliasjnior say this:\nI sent 100 messages for 5 different contacts only connecting and while\nloop (using the same session).\nI didn't have the contacts in my list, didn't sync, nothing, just\nconnected and send.\nOnce I sent 1000 in 3 minutes to another number (all of the tests is my\nnumbers).\nI always have \"rand(0,1000)\" in the end of the messages.\nSo, I don't now what u can do :/\nplease tell us how ,\n\u2014\nReply to this email directly or view it on GitHub\n<\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62255900>.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62256939\n.\n. thanks eliasjnior , i know examples folder i find bulk.php and whatsapp.php by  whatsapp.php i can send only one message at time and by sendBroadcast the limit is 25 as i see in bulk.php , please which one you use to do that you see,i hope your help a send you Facebook you can chat with me for 5 min only \nbest Regards\n. Thanks Elias J\u00fanior,  i know examples folder i find bulk.php and\nwhatsapp.php by  whatsapp.php i can send only one message at time and by\nsendBroadcast the limit is 25 as i see in bulk.php , please which one you\nuse to do that you see,i hope to get your help  please\nbest Regards\n\n\n2014-11-08 16:23 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nMan, go see some tutorials about PHP, because it's a simple PHP code. Do\nloops (while, foreach, for...) and than see the exemples folders. Be\npatient and you'll learn. Everybody that know now did it, why can\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62257541.\n.  i know php good but the problem i get locked when i try with loop to send\n50 message go 50 students contacts from my database\n\n2014-11-08 16:34 GMT+03:00 Mohammed Rassam eng.rassam199@gmail.com:\n\nThanks Elias J\u00fanior,  i know examples folder i find bulk.php and\nwhatsapp.php by  whatsapp.php i can send only one message at time and by\nsendBroadcast the limit is 25 as i see in bulk.php , please which one you\nuse to do that you see,i hope to get your help  please\nbest Regards\n2014-11-08 16:23 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nMan, go see some tutorials about PHP, because it's a simple PHP code. Do\nloops (while, foreach, for...) and than see the exemples folders. Be\npatient and you'll learn. Everybody that know now did it, why can\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62257541\n.\n. tell me the function name the i can use it in loop please \n. sorry DurtyFree, i need this web app for university as our students ask us  To provide this service \n I swear , i will don't use it in Spamming or marketing \n. sorry DurtyFree, i need this web app for university as our students ask us  To provide this service \n I swear , i will don't use it in Spamming or marketing \nand thanks for faisalcse, but check this me code is it right , is i need any thing else ,help me please\n\n\n$conn = new mysqli($servername1, $username1, $password1, $dbname);\n// Check connection\nif ($conn->connect_error) {\n    die(\"Connection failed: \" . $conn->connect_error);\n} \n$sql = \"SELECT CPHONE FROM mydatabase.PHONE  LIMIT  50\";\n$result = $conn->query($sql);\nif ($result->num_rows > 0) {\n    // output data of each row\n    $tems=\"\";\n    while($row = $result->fetch_assoc()) {\n       $terms3= \"&apos\";\n      $terms2=\"967\".$row[\"CPHONE\"].\",\";\n        $tems=$tems.$terms2;\n}\n$targets=array($tems);\n} else {\n    echo \"0 results\";\n}\n$conn->close();\nforeach ($targets as $target) {\n$this->wa->sendPresenceSubscription($target);\n$this->wa->pollMessage();\n$this->wa->sendMessageComposing($target);\nsleep(1);\n$this->wa->pollMessage();\n$this->wa->sendMessagePaused($target);\nstatic::$sendLock = true;\necho \"Sending message from \" . $this->username . \" to $target... \";\n$this->wa->sendMessage($target, $message);\nwhile (static::$sendLock) {\n//wait for server receipt\nsleep(1);\n}\n}\n. using email some student's don't accept that , and sms i very expensive in\nour country\n. am so sorry for that , anyone can send me help by email please\n2014-11-08 17:43 GMT+03:00 Balwant K notifications@github.com:\n\n@mrssam https://github.com/mrssam if you keep asking like this, it's\njust going to make people really annoyed.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62260057.\n. thanks faisalcse i do as you say in the code but i have this error  ,Fatal\nerror: Using $this when not in object context in /here my\npath/sendstudent.php on line 51\nand this is my code:\n\n$wa = new WhatsProt($config['fromNumber'], $config['id'],\n$config['nick'], false);\n    $wa->connect();\n    $wa->loginWithPassword($config['waPassword']);\n$message=\"hi ,how are you \";\nforeach ($targets as $target) {\n$this->wa->sendPresenceSubscription($target);\n$this->wa->pollMessage();\n$this->wa->sendMessageComposing($target);\nsleep(1);\n$this->wa->pollMessage();\n$this->wa->sendMessagePaused($target);\nstatic::$sendLock = true;\necho \"Sending message from \" . $this->username . \" to $target... \";\n$this->wa->sendMessage($target, $message);\nwhile (static::$sendLock) {\n//wait for server receipt\nsleep(1);\n}\n}\n?>\n2014-11-08 17:14 GMT+03:00 faisalcse notifications@github.com:\n\nin the for each loop shall i write this code to send:\nforeach ($targets as $target) {\n$this->wa->sendPresenceSubscription($target);\n$this->wa->pollMessage();\n$this->wa->sendMessageComposing($target);\nsleep(1);\n$this->wa->pollMessage();\n$this->wa->sendMessagePaused($target);\nstatic::$sendLock = true;\necho \"Sending message from \" . $this->username . \" to $target... \";\n$this->wa->sendMessage($target, $message);\nwhile (static::$sendLock) {\n//wait for server receipt\nsleep(1);\n}\n}\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62258986.\n. i will try to use another way thanks,\n. i contact whatsapp support team and  i discuss what our university need , i say to him we need to send more than 5000 message daily  for our students , they are accept and tell me to tell him the phone number which i will use wit whatsapp API this is the message form whatsapp support \nHi,\nThanks for contacting WhatsApp.\n We are working on answering everyone's\n question as soon as possible. In the meantime,\n please look at our FAQ to see if your question is answered there.\nFAQ page: http://www.whatsapp.com/faq/\nIf you have not done so, please provide the following:\n1) Your phone number in this format: + Country Code Phone Number\n2) Your device model\nplease any one tell me the true way to setting the php page i have meantime some of them above\n.  Your device model? what i can the them i will use university website \n. thanks for any one help me\n. yes, i has try to make php page in our university website to sending message by loop to students , but the problem is i have big database of students contacts but some of them don't have whatsapp account, and my loop send to all is this reason for blocked , is any way to check if this students have whatsapp accounts before sending , any one help please \n. okay i will tell them thanks,\n. okay thanks nikfariz\n\n2014-11-10 19:13 GMT+03:00 nikfariz notifications@github.com:\n\nHi mrssam,\nPlease tell whatsapp that you're using the following device (as contained\nin whatsapi Constants declaration)\nconst WHATSAPP_USER_AGENT = 'WhatsApp/2.11.339 Android/4.0.4\nDevice/GalaxyS3';\nIn short, just tell them you're using Samsung Galaxy S3 with Android 4.0.4\nPlease let us know their response. Maybe if they accept your request, we\ncan follow suit.\nOtherwise, just be prepared to be banned due to violating their Terms of\nService... sigh!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62407753.\n. thanks so much nikfariz this good to check students numbers but , when you say:  you'd have to loop this code in an SSL CURL.\nam not smart in this thing can you send me code please or any link to give me more details \nbest regards \n. so sorry and thanks , i will try to learn myself\n\n2014-11-10 21:33 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nLoop PHP: http://goo.gl/hUYsfA\nSSL Curl: http://goo.gl/Zg4Q9q\nWhat if you search a little more some PHP programming? Don't you think\nthat you'd get answers fast?\nAnd you said that can't use email... Don't you think that everybody have\nemail account? It's necessary when you are studing. It's the simplest way\nto keep fast comunication with the school and students.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62430839.\n. Yes, this the best way to learn as they say don't give me a fish, but\ntaught me Fishing\n\n2014-11-10 21:42 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nNot wanting to be boring, but being ... This will help you. What have we\nlearned so we do not forget. Surrender the code ready, you will not have\nlearned anything.\n2014-11-10 16:39 GMT-02:00 mrssam notifications@github.com:\n\nso sorry and thanks , i will try to learn myself\n2014-11-10 21:33 GMT+03:00 Elias J\u00fanior notifications@github.com:\n\nLoop PHP: http://goo.gl/hUYsfA\nSSL Curl: http://goo.gl/Zg4Q9q\nWhat if you search a little more some PHP programming? Don't you think\nthat you'd get answers fast?\nAnd you said that can't use email... Don't you think that everybody\nhave\nemail account? It's necessary when you are studing. It's the simplest\nway\nto keep fast comunication with the school and students.\n\u2014\nReply to this email directly or view it on GitHub\n<\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62430839>.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62431792.\n\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-62432228.\n. Hi, you ask about Can this sync cause number block?\nNo if you doing sync in correct way , and if you try to sync a lot of Numbers ,it will blocked if you send\nsync more than times , if you looking for spamming this big mistake , this api is good , so take care ,\nand if you make code to do sync let us know it , to see if this code is correct or no ,\n. yes but it take long time for get response ,i ask them about that and this what whatsapp send me :\nHi,\n\nThanks for contacting WhatsApp. We are working on answering everyone's question as soon as possible. In the meantime, please look at our FAQ to see if your question is answered there.\nFAQ page: http://www.whatsapp.com/faq/\nIf you have not done so, please provide the following:\n1) Your phone number in this format: + Country Code Phone Number\n2) Your device model\nBelow are the answers to some commonly asked questions:\n1. What are WhatsApp's subscription fees?\n   http://www.whatsapp.com/faq/en/general/23014681\n2. Why can't I connect to WhatsApp?\n   http://www.whatsapp.com/faq/en/general/21092998\n3. Can I recover deleted messages?\n   http://www.whatsapp.com/faq/en/general/21197296\nIf you submitted a suggestion, thank you very much for sharing your feedback. Please note that we cannot comment specifically about plans and developments, but we value your feedback and have taken note of your suggestion.\nTo add any updates to your request, please respond to this email. We are here to help!\nThanks!\nWhatsApp Support Team\nInterested in translating for us? Please visit our website.\nTake a look at our FAQ.\nthen i have send my number and device model \n. i have same problem\n. hi mgp25 , i thanks for you help, but if any one need to use contactsync.php with POST method not withe $_GET is this possible if , yes please tell us how we use it please and can i use and what's the correct format of u[] can you tell us example please \nbest regards \n. maybe No , but if you use it multiple times for those people , it will blocked when you try to send more than 10 message , and it's will be spamming \n. try to use wa->sendMessageImage($dst, $img_url);\n. anyone can help please \n. i think your app has overloading the memory of pc, it happen with me , try to make the execution time shortly\n. okay if i have message IDs in array how i can check receipt of the message\nanyone help please \n. try to remove if(!function_exists('mime_content_type')) { \n,,,,,,\n}\nand but the other code inside : class WhatsProt after setChallengeName function \n. ",
    "momenimohammad23": "@mgp25  hi\nI need to a document to use this API :(\nmay you help me plz\n. @SikiFn  @juanmas07 \nHi \n I have same problem use while pollMessage and pollmessages ! Both of them not work ! \nHelp me please ...\nthanks\n. Hi @mgp25 \nI Create an App with this API \nIf I replace your dll file with this version of dll it crashed ? whats defferent between this and your API ?\n. @mgp25  Hi\nwhats different between this link (https://github.com/venomous0x/WhatsAPI) and your link ?!\n. 99 + you = 100\n. Ok , if you dosent use , you go offline\n. Ur Block !\n. ",
    "creolyte": "P/S: I do not know that when using WhatsAPI you could not use in your phone.\nHence, when I was testing the WhatsAPI , then I went to open my mobile Whasapp and it prompt me to re-verify my existence and I did, to check my messages. After that I went to the API to try send 1 message again but my connection appeared to be blocked!!!\nIs this a permanent block of using WhatsAPI? I need to use other number to try now?? zzz\nPlease help...\n. Thank you for your reply hpatel4u. Where can I find my logs? Do you mean the error returned by the codes? By the way, I got this error below earlier:\nfailure\nnot-authorized>\nfailure\nand I read the FAQ section that you are permanently blocked if I get this. By the way, how to switch back to mobile Whatsapp (without getting blocked again) because I need to check my messages. Or the best option is get a new number for development purposes? Thanks.\n. Means game over? I need get a new sim card with a new number for development again everytime got blocked?\n. Hi guys, thanks for the replies. Yup I'm using Chat-API. All I did was:\n1) Request code and successfully got the password\n2) Then I register ($w->codeRegister( $code );)\n3) I went back to my mobile to check my whatsapp chat and it prompt me to re-verify and I did.\n4) After checking my personal message, I went back to development trying to do anything but was blocked.\n5) Tried re-verify by getting new code and password from API still can't work (still blocked).\nHope this help future people after reading this. \n1) Is there any way to unblock?\n2) Once connected to API means I can't check my personal message on mobile phone? (Because once I did that and I instantly got blocked lol?)\n. @hpatel4u There is no logout function from the mobile whatsapp :(\nBut thanks I'll keep in mind and try update any new findings here for future developers benefits.\n. Yes you can and you will able to access to whatsapp from your mobile again. But what happened to me is that after that i went back to connect to whatsapi again, it blocked me. Maybe is because i request too many times in a day? All the best.\n-------- Original message --------\nFrom: AndantioKorah notifications@github.com \nDate: 08/06/2015  5:34 pm  (GMT+08:00) \nTo: venomous0x/WhatsAPI WhatsAPI@noreply.github.com \nCc: creolyte creolyte@gmail.com \nSubject: Re: [WhatsAPI] whatapp block me after 10 message ! (#757) \nso if i use phone number A (example) for whatsapi, then, i must dont use phone number A in my phone?. So how about when i got my CodeRequest and Password from WART and then whatsapp request for verify my account in phone. I should verify it or not?\nplease help me, i'm beginner at this thing.\n\u2014\nReply to this email directly or view it on GitHub.\n. P/S: I do not know that when using WhatsAPI you could not use in your phone.\nHence, when I was testing the WhatsAPI , then I went to open my mobile Whasapp and it prompt me to re-verify my existence and I did, to check my messages. After that I went to the API to try send 1 message again but my connection appeared to be blocked!!!\nI got this message means I am permanent blocked?? \nfailure\nnot-authorized>\nfailure\nBut I did not do anything to spam, to be exact I did not even send 1 message out.\nWhat should I do now, need advice please..\n. ",
    "AndantioKorah": "so if i use phone number A (example) for whatsapi, then, i must dont use phone number A in my phone?. So how about when i got my CodeRequest and Password from WART and then whatsapp request for verify my account in phone. I should verify it or not?\nplease help me, i'm beginner at this thing.\n. done, i made it. I try send to my phone and work and again send to my friend's whatsapp and it work again. But when i try again send message to my number, it doesn't work anymore . Anybody know why? How about if i delete my whatsapp app in phone, it will work?\n. how about to send file attachment? can i send it or not? please answer ASAP. please\n. ",
    "foratech": "I found a solution for one whatsapp number to be able to send out to multiple recipient to avoid being blocked!! email me to know the answer.. azizi@foratechsolution.com, I wont post the answer here..\n. lol.. I'm using the same API, I'm not scamming.. I'm using the same API but applying different algo to avoid the number being block that all... depends if you believe me or not.. anyone can email me to see the demo website I made.. using that API. one number will be able to send out to 100 different recipient without being blocked.. \n. ",
    "Harshaddarji": "From Last four days my bumber getting blocked over Whatsapp.\nIs Any one facing sam issue recently  ? \nany update? \n. ",
    "janemarisca": "i want to try it, where can i find the code? thank you \n. ",
    "baakdaa": "my number getting blocked every time in just 5 hours. thats y i think so.\n. I am sending image message one by one in loop.. With the delay of 10 sec between each message. I am not syncing contacts.. But I have all the numbers which has whatsapp ..\n.  plz suggest me a Good method?\n. It takes too much of time .\n. its really not working...i just send one message and my number got blocked..\n. change the server .. my website is hosted on godaddy. i just change the complete hosting provider and now it s working with new ipaddress. :) @morgan88 \n. hi @cibb  we all know that whatsapp not providing api. but we are here to post our problem . which we are getting. \n. ",
    "suraj-mahajan": "how to Sync contact ?\n. ",
    "ranvli": "I'm very surprised whatsapp banned our number, we hate spam, we don't spam, we use Keywords that the users send and our system answer their requests using all the recommended steps (ie. sync,sendpresence,typing,pause(based on text lenght), stoptyping, etc..) and whatsapp banned our number, we have no idea why? Anyone please could help us to find out what happened? We also never send the same text as we insert a different greeting and goodbye to break patterns. We are a FM radio with around 5000 subscribers and we never send messages to them at least they send a keyword.. obviously they have us added in their contact lists.. please help...\n. I'm very surprised whatsapp banned our number, we hate spam, we don't spam, we use Keywords that the users send and our system answer their requests using all the recommended steps (ie. sync,sendpresence,typing,pause(based on text lenght), stoptyping, etc..) and whatsapp banned our number, we have no idea why? Anyone please could help us to find out what happened? We also never send the same text as we insert a different greeting and goodbye to break patterns. We are a FM radio with around 5000 subscribers and we never send messages to them at least they send a keyword.. obviously they have us added in their contact lists.. please help...\n. ",
    "erickc55": "I had the same problem... I work for a radio station too and just reply messages, like you did.\nAnd I for block 5 days ago, I sent a email to whatsapp team but they didn't answer yet...\nI guess that i sent much more messages than usual, and the time with one message and other is not compat\u00edvel with human text.\nDid you send email to whatsapp team?\n. @glenn1001 ,\nFortunately yes, they reactivated my account one week after I wrote a e-mail to them.\nThey said that I was not using a official app and they asked for a screen shot of offcial whatsapp app... \n2 days after that I sent screen shot, they unlocked my account. \nI think is an automatic answer, like a robot that count your replys and make the steps to answer, because they never reply my e-mails according my questions.\nAnd they said if I used again a not autorized app, my account will be banned forever.\nIn fact I think that all accounts will be unlocked automatically 2 months after block. \nBecause I have 40 sim cards that they blocked 3 months ago and I never asked for them unblock and now they were unlocked automatically, and last week I tried to register again requesting a sms code and I got sucess like a new sim card\nThe process to unblock will take about one week (ten days), until they reply your email and ask for a screen shot...\nGood lucky\n. ",
    "glenn1001": "@ranvli and @erickc55 \nhave one of you found a solution for this issue? I have the same problem and don't know how to continue or if it's better to stop with the project\n. I just had the same problem, the phone number is blocked at the moment.\nIs there a way to unblock the phone number? Will it be unblocked after some time or will this phone number be blocked forever?\n. @Github-Janomine thanks for the fast response, it looks like the user isn't blocked permanently\n. @mgp25 I'm not using the API to send (unwanted) spam to unkown users\nhere a brief resume of the application I'm building\nusers can subscribe themselves to a \"newsletter\" by sending a message (like \"{company name} on\") to the phone of my client (over whatsapp)\nfrom that moment on they are followers and are subscribed to the \"newsletter\" and will recieve messages send by my client (text, images, links, video, ect)\nthey can send the message \"{company name} off\" when they don't want to recieve the \"newsletter\" anymore (also over whatsapp)\nmy client can also view different kind of statistics and directly chat to a follower (besides sending a \"newsletter\")\nmy question for you is, can I use the WhatsAPI for an service/application like this?\nif I can use it for an application like this, then I know I'm just using the wrong methods to send these messages and have to change the code, otherwise I will just know it isn't allowed to use the WhatsAPI this way\n. ",
    "mpbanna": "Hi everyone,\ni have found a new problem that sendSync method allows only one synchronize per hour, means backoff time is set 60 minute after one try of sendSync method .\nAnd i have also tried with all 3 arguments that are\nmode=\"full\"&context=\"registration\"\nmode=\"full\"&context=\"background\"\nmode=\"delta\"&context=\"background\"\nbut it allow only one time per hour , and i surprised that i changed mode=\"abc\"&context=\"abc\" , than it also allow me synchronize one time per hour.\nplease help me\nThanks\n. But according to @shirioko,  context=\"background\" allows 4 times per hour and context=\"registration\" allows 50 times per hour ,than what does it mean and according to @mgp25 ,before sending each message we have to use sendSync method to stop blocking ,than how it is possible if sendSync not allows multiple time  ???\nplease give me proper solution to this problem.\n. ",
    "ankurextreme": "please explain a bit.\nwhile using sendSync(array (a,b)) say contacts a &b , so does it mean only a,b contacts are in address book ?\nif we do next time sendSync(array (c,d)) does it mean contact a & b is deleted from my phone?\nis it possible to get all contacts with are LINKED to my account ? or is it that only the contacts i sync are every time only that are linked, in this case only c,d and not a,b ? \ni have a small site which sends welcome message on customer registration.\nso when a new customer arrives, do i have to sync only his contact or ALL the contact to which i sent message before ?\nafter sync wen i call onSyncResult($result) like in example in your repo if it exist then i send a message.\nwhat is the best solution to my problem ?\nsite flow required for = registration -> check if available on whatsapp by sync(this particular number ) -> if onSyncResult($result) and $result->existing then send a welcome message.\n. ",
    "marwanin": "@mgp25 thank you very much for helping.. this is the script:\n!/usr/bin/php\n<?php\nrequire '../src/php/whatsprot.class.php';\nfunction fgets_u($pStdn)\n{\n    $pArr = array($pStdn);\n```\nif (false === ($num_changed_streams = stream_select($pArr, $write = NULL, $except = NULL, 0))) {\n    print(\"\\$ 001 Socket Error : UNABLE TO WATCH STDIN.\\n\");\nreturn FALSE;\n\n} elseif ($num_changed_streams > 0) {\n    return trim(fgets($pStdn, 1024));\n}\nreturn null;\n```\n}\n$nickname = \"WhatsAPI Guuruu\";\n$sender =   \"00000000\"; // Mobile number with country code (but without + or 00)\n$imei =     \"00000000\"; // MAC Address for iOS IMEI for other platform (Android/etc)\n$password =     \"a9jOSjbbdbgxxUYx4TJSo3COw3e8=\"; // Password you received from WhatsApp\nif ($argc < 2) {\n    echo \"USAGE: \".$_SERVER['argv'][0].\" [-l] [-s  ] [-i ] [-set ]\\n\";\n    echo \"\\tphone: full number including country code, without '+' or '00'\\n\";\n    echo \"\\t-s: send message\\n\";\n    echo \"\\t-l: listen for new messages\\n\";\n    echo \"\\t-i: interactive conversation with \\n\";\n    echo \"\\t-set: Set Status to \\n\";\n    exit(1);\n}\n$dst=$_SERVER['argv'][2];\n$msg = \"\";\nfor ($i=3; $i<$argc; $i++) {\n    $msg .= $_SERVER['argv'][$i].\" \";\n}\necho \"[] Logging in as '$nickname' ($sender)\\n\";\n$wa = new WhatsProt($sender, $imei, $nickname, TRUE);\n$wa->connect();\n$wa->loginWithPassword($password);\nif ($_SERVER['argv'][1] == \"-i\") {\n    echo \"\\n[] Interactive conversation with $dst:\\n\";\n    stream_set_timeout(STDIN,1);\n    while (TRUE) {\n        $wa->pollMessages();\n        $buff = $wa->getMessages();\n        if (!empty($buff)) {\n            print_r($buff);\n        }\n        $line = fgets_u(STDIN);\n        if ($line != \"\") {\n            if (strrchr($line, \" \")) {\n                // needs PHP >= 5.3.0\n                $command = trim(strstr($line, ' ', TRUE));\n            } else {\n                $command = $line;\n            }\n            switch ($command) {\n                case \"/query\":\n                    $dst = trim(strstr($line, ' ', FALSE));\n                    echo \"[] Interactive conversation with $dst:\\n\";\n                    break;\n                case \"/lastseen\":\n                    echo \"[] Request last seen $dst: \";\n                    $wa->sendGetRequestLastSeen($dst);\n                    break;\n                default:\n                    echo \"[] Send message to $dst: $line\\n\";\n                    $wa->sendMessage($dst , $line);\n                    break;\n            }\n        }\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-l\") {\n    echo \"\\n[] Listen mode:\\n\";\n    while (TRUE) {\n        $wa->pollMessages();\n        $data = $wa->getMessages();\n        if(!empty($data)) print_r($data);\n        sleep(1);\n    }\n    exit(0);\n}\nif ($_SERVER['argv'][1] == \"-set\") {\n    echo \"\\n[] Setting status:\\n\";\n    $wa->sendStatusUpdate($_SERVER['argv'][2]);\n    exit(0);\n}\necho \"\\n[] Request last seen $dst: \";\n$wa->sendGetRequestLastSeen($dst);\necho \"\\n[] Send message to $dst: $msg\\n\";\n$wa->sendMessage($dst , $msg);\necho \"\\n\";\n?>\n. @mgp25 I did php whatsapp.php -s XXXXXXXXXXXXX Message\nand hit enter, and Putty just closed.. nothing appeared\n. @mgp25 thank you so much, please add me on skype when you get home:\nskype id: marwanin\n. ",
    "mrinsane": "ohh sorry, the parameter password was pass not password\nThx mate \n. Thx mate :+1: \n. ",
    "akpremkumar": "@mgp25 The php script once called  is running for 30 seconds and after that it is automatically terminated by the hosting server probably because of php.ini timeout configuration which i can't change. But because the call is blocked in whatsapp.prot i cannot write code to restart the script just before it is being terminated. Is there any way to repeatedly execute the script ?\n. ",
    "recoverjp": "make sure that port 443 is open. most shared servers do not release this port.\n. Thanks!\n. Amirjan, did not work.\nWhen it connects, it reads the messages.\n. It worked, but now when I step on pollMessages(true) function, it does not read.\n. It did not work. If I pass true as parameter ($w->pollMessages(true)), it is not marking as read (two ticks, just one).\n. Yes, I made all the changes you suggested.\nIf you get a result at night, let me know.\n. Hmmmmm ... I'm sorry, but I did not understand how to use it.\n. What is this $icon?\nAnd whatsapp provides thumbnail for images and videos?\n. Hmmmmm, very good! THX\n. And how can I make upload without use sendMessageImage function?\n. I need do upload an image and catch filepath, filehash and filesize.\n. I want to do this for when the user requests an image, I take forward and not upload.\n. When I send an image using sendMessageImage(), it does not return me a valid url for the picture which I sent. But when I get a picture using the getMessages(), it returns me a valid url for the image. Can anyone help me?\n. Amirjan, but... $this->sendRequestFileUpload($fhash, 'image', $fsize, $filepath, $to);\nAnd public function sendMessageImage($to, $filepath, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\nI need to send the $filepath, no?\n. How long a file is stored in the whatsapp server? For example, I uploaded some files that are no longer working: https://mms890.whatsapp.net/d/tow7dxB9q4CCbkdCL7lVlQHa9igABP_tXdjUMQ/AvZFt377o39nPUgrDKhuu7o3vMcUhWD3kzRu4zJfTMQ_.jpg\n. mgp25, can be opened yes, look here https://mmi233.whatsapp.net/d/gRHgZg9NwOzHTw-ZTP4OEW2NNYkABQAiGr2ePg/AgR0SehAFz1hRAsVnqcSH5H4qgbKOcN1z1Ce__JeII7L.jpg\n. Ops... here: https://mmi130.whatsapp.net/d/5NcLeFcYt2vWm0DrvLnmboThLUQABQAiLtydvg/Ass5BrtiC_hYbAmMf7qhCzBSFeVD09FnkV5QkfAKbsiV.jpg\n. Amirjan, yeah. It worked. Thank so much. My problem now became the files as giving \"Media object not found\". It is some protection from Whatsapp?\n. mgp25, when I receive a file using the api, I can grab the full url and access it via the web. But after a few moments the image is no longer accessible.\n. I developed a website to provide several files that send through whatsapp. For example, audios, videos, pictures. And I need to send these files to the whatsapp server, so that when the user requests this file, it is forwarded. (because it is faster) The problem is that the files are no longer accessible after some time. This is a protection against access via web?\n. Someone let me know how long a file is stored in the whatsapp servers? For example, I have the hash and size of a file. For how long can I forward this file?\n. mgp25, but why i can't access this file?\nhttps://mmi233.whatsapp.net/d/gRHgZg9NwOzHTw-ZTP4OEW2NNYkABQAiGr2ePg/AgR0SehAFz1hRAsVnqcSH5H4qgbKOcN1z1Ce__JeII7L.jpg\nI sent this file 3 days ago\nIs it because I accessed it via web?\n. hmmmmm ... makes sense\n. The delay is the connection with the server whatsapp, not the sending.\n. Because if I run a script with only the connection with whatsapp, it takes on average 10 seconds. If I run a script with the connection and sending a message, it takes on average 10 or 11 seconds. But if the problem is not that and you find out, please share with me, because here also delay.\n. If the connection is kept alive, sending and receiving is instantaneous. But I'm considering it need make a new connection to send something.\n. It is not harmful to the server leave a running script 24 hours?\n. @ardianys, can you explain for us how you do it? I developed a site that users can request images. To send these images, each submission will be a new connection. And each connection takes around 10 seconds.\n. But it can run on a server 24 hours? Does not weigh to the server? And how to stop this script after it started?\n. @vibhoo I do not send to you my code because I'm using it in a framework, cakephp, then it gets tricky. But I did not change the shape of the api. I think this time connecting with whatsapp is equal for all. The @mgp25 said that it is fast because it must keep the connection alive as @ardianys is talking.\n. ",
    "SoerenBusse": "Yes I have set Debug to TRUE but I get only this Exception.\nBut why ban Whatsapp people and can I unban me?\n. @mgp25 \nSo here is the Debug:\ntx  stream:features/stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  c\u0019\u00f5A,ey6\u0007H\u009da',\u00a2n\u00dc\u00bf\u0019t\ntx  |\u00ee\u0019au\u001f@\u001dr\u201dZ\u203a\u00c9\u00b0\u00c2k\u0153\u00afJ.P\u00ddm\u00e2\u0015\u017e\u00b1\u00b8\u2122`\u00c8q\u00059RG\nI think I\u00b4m not banned, but why changed the password at once?\n. Yes the password is right and this is all of debug + the Login Failed Exception.\nI will request a news Password with WART, but I must find my Sim Card :D\nIt works yesterday evening but suddenly not any more\n. Now I get this, but few minutes ago not.\nrx  \nrx    \nrx  \nSo i must buy a new Sim Card, right? But how can I send about 50 Messages at once?\nEDIT://Now i doesn\u00b4t get it :) Its very strange and after a few minutes i get it again\nEDIT2://  [status] => fail [reason] => blocked... ;(\n. If I use the broadcast function, get i also blocked?\n. @Waishon\nThis are about 50 Messages. If i said them,they should import this number in their Contact List, did it work then?\n. Or can I create a group and send the Message to the group? But how can I get the JID of the Group?\n. ",
    "sanjaypradhan": "Hello,\ni am trying to send message via whatsapp using php. I am getting this following error.\ntx  stream:features/stream:features\ntx  \nNotice: Undefined variable: loginStatus in /opt/lampp/htdocs/WhatsAPI/src/whatsprot.class.php on line 1637\nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /opt/lampp/htdocs/WhatsAPI/src/whatsprot.class.php:1640 Stack trace: #0 /opt/lampp/htdocs/WhatsAPI/src/whatsprot.class.php(474): WhatsProt->doLogin() #1 /opt/lampp/htdocs/WhatsAPI/tests/whatsapp_whatsapi_send.php(8): WhatsProt->loginWithPassword('3TfR1FS5WtdMBos...') #2 {main} thrown in /opt/lampp/htdocs/WhatsAPI/src/whatsprot.class.php on line 1640\nMy Code\n1.sendMessage.php\n<?php\nrequire_once('whatsapp_whatsapi_config.php');\n$destinationPhone = '91XXXXXX';\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->Message($destinationPhone, $argv[1]);\n?>\nusing Imei No as  userIdentity.\nSo please give me solution as soon as possible. \n. ",
    "heruan": "Awesome, thank you! (Typo on line 2125, \"compsing\")\n. ",
    "tigrom": "@heruan can you please share the whole project with onMessageComposing event listener?\n. ",
    "abdulla2013": "Hi,\nThank you for your answering, I do a sleep for 10 seconds for sending a message, but I see it is also applied to auto response message, can I exclude the auto response from this delay and make it live?\nThanks again @mgp25 \nHave  a nice day.\n. @mgp25 If I delete it. The send function will be send directly with no wait. I only want the auto response to be with no wait or sleep; but the send message I want it to be with sleep 10 seconds\nThank you for your response\n. @mgp25 Thanks for fast response. What do I mean it is in while there is one auto response and one to check any rows in mysql to send message both in one while as if we cannot login two time in two files. so send message and auto respnse in same while. Hope you understand me. I will check the online issue right now.\nThank you @mgp25 \n. Hello,\nI do not want to run it via a number after authentication using checkCredentials() , because I have seen multiple of issues blocking numbers after they run checkCredentials()  even they did not send any messages, so the way that I used not asking for any authentication  or numbers.\nIs I am right @blueslmj \n-Abdulla\n. @blueslmj  Can you give me the code that can be used to?\nfor example we just need to write: checkCredentials($number)  where $number is the mobile number?\n-Abdulla\n. @mgp25  Thank you, but this is for checking my number I think!!\nWhat I need is to check if this number is correct, whatever it has whatsapp or not!\nSo, for example, if the user send his number I can see it is wrong format or not,\nUsing this link for example: https://v.whatsapp.net/v2/exist?in=**&cc=\nHope you got my point!\n. Hi, @mgp25 getting white page, I do not know why. the link that I used:\ncontactsync.php?phone=*_&pass=*_**&u[]=999999999999999\nBut it is loading for few seconds then white page. is there any issue with this file, you think?\n. Still getting white page, when I turn the debug; it is showing:  in the last\nOnly!\n. @mgp25  Thank you for your response, but can I  ask you where is the spamming exactly?\nFirst we are group (friends, and family members) second, they will give me their number, and they will save my number, so they will be able to receive the news who is birth, and who is death...etc.\nAnd they will receive these under their request to me!!! and they can contact me to remove the number!!!!\nNot everything above some numbers is spamming....  @mgp25 \nwhen your bank send to their clients (more than 200k) message about something happens.. is it spamming?\nAnyway, about the limit, in my phone it is open without any limit..\nBe note, that if they did not save my number, they will not be able to get my message!!\n. Hi, @mgp25 about alive, death drama, no, when you have a big family that is connected socially, there is an exception.\nBanks here sending their news, this branch is closed, this lab lab lab, even government send their news by SMS and other channels from time to another! There is no issue with that as long as the receiver want that!\nAnyway @mgp25  do you know why it is unlimited in WhatsApp interface? and in WhatsAPI only limited to 50 number?\n. up.\n. thanks @dennobaby  Can you help me in writing that, or explain more how to do that.. as I am still starter in the programming (first month)\n. @dennobaby \n. ",
    "xvilo": "Well, i have registered the nummer on my device, used the altert APK from Maxters.com to retreive the password, so i'll try doing it without the ident then\nVerstuurd vanaf mijn iPhone\n\nOp 21 jun. 2014 om 00:38 heeft mgp25 notifications@github.com het volgende geschreven:\n@xvilo \nIdentity: A unique hash generated by your device. If using WART or the API, it is a SHA1 string generated using a combination of your mobile number and specified \"password\" as a salt.\nWhen logging in you can do this:\nSo $identity is not required.\n$w = new WhatsProt($username, null, $nickname, $debug);\nThe problem I see is that your password has not been generated by the server WhatsApp. Did you registered you number with the API or WART?\n\u2014\nReply to this email directly or view it on GitHub.\n. i tried using null als identity, but still i get the not-authorized message....\n\n```\ntx  \ntx  \nrx  \nrx  \nrx  n??????!?;?&\u0c89)\ntx  &\u0178??o\"????(?|?7??j??X??B?H?\"\nrx  \nrx    \nrx  \nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in      /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php:1618\nStack trace:\n0 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(465): WhatsProt->doLogin()\n1 /Volumes/ORCHID/Users/xvilo/whatsapp/whatsapp_whatsapi_send.php(13): WhatsProt->loginWithPassword('aab0c39d826955f...')\n2 {main}\nthrown in /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php on line 1618\n```\nfrom terminal\nMy code:\n$userPhone        = '+316123456789'; \n    $userIdentity       =  null;\n    $userName         = 'Pois0n'; \n    $password          = 'aab0c39d826955ff36845a558e01faffd10d1af4'; \n    $debug                = true;\n. Mhh... Still not working correctly... and what it returns doesnt make sense at all hahaha\n```\ntx  \ntx  \nrx  \nrx  \nrx  ???\u07fa%:?`?? |?}?L\ntx  [,m\u06a9T?,????]??i??~Q?R?tx????\nrx  \nrx    \nrx  \nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php:1618\nStack trace:\n0 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(465): WhatsProt->doLogin()\n1 /Volumes/ORCHID/Users/xvilo/whatsapp/whatsapp_whatsapi_send.php(13): WhatsProt->loginWithPassword('aab0c39d826955f...')\n2 {main}\nthrown in /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php on line 1618\n```\n. The number isn't blocked because i can use it on my other phone, i'll try to run WART on my mac hahaha\n. i do understand that! does this mean it worked:\nFatal error: Call to undefined method WhatsProt::Message() in /Volumes/ORCHID/Users/xvilo/whatsapp/whatsapp_whatsapi_send.php on line 14\nBut that de funtion name isn't good?\n. Got it working! The password was the problem hahaha but then i use whatsapp.php i get this error message:\n```\n php whatsapp.php -s +3164**381 dit\n[] Logging in as 'Sem' (1336****183)\ntx  \ntx  ???13363**83?62`???h\u0627_??\u036f9U****2495WhatsApp/2.11.209 Android/4.3 Device/GalaxyS3 MccMnc/310001\nrx  \nrx  \nrx  ?~???I?\u0498=&jT?c?\ntx  ????X???p?w?JU??R??0??q???k`?\nrx  ?\n                                                                                                       F??  ??????? ??\nrx  \nrx    Mont Ventouxers!!!! \uf636\nrx  \nFatal error: Uncaught exception 'Exception' with message 'Method subject not implemented' in /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php:2307\nStack trace:\n0 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(1841): WhatsProt->processInboundDataNode(Object(ProtocolNode), true)\n1 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(476): WhatsProt->processInboundData('??????=??????m?...', true)\n2 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(1612): WhatsProt->pollMessages()\n3 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php(465): WhatsProt->doLogin()\n4 /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/tests/whatsapp.php(46): WhatsProt->loginWithPassword('81Ptcl1EZJBLxB8...')\n5 {main}\nthrown in /Volumes/ORCHID/Users/xvilo/whatsapp/WhatsAPI/src/php/whatsprot.class.php on line 2307\n```\n. MGP25 you are a hero! it was all so simple\nhow to change the status to solved?\n. my code:\n``` php\n$config['webpassword'] = 'V**s';\n$config['Twillio'] = array(\n    'id' => null,\n    'fromNumber' => '316**81',\n    'nick' => \"Bottttt\",\n    'waPassword' => \"81**SQo=\",\n    'email' => 's*r@gmail.com',\n    'emailPassword' => 'm**n'\n);\n```\n. ",
    "karlmendes": "Hi there, i follow the steps and can send any messages with 'test' but before a little time, the whatts appear block my connections:\n[] Logging in as 'Karl' (55xxxxxxxx)\ntx  stream:features/stream:features\ntx  \ufffd\ufffd@R55xxxxxxxxxx,\ufffd\ufffd%mq%\ufffdQ\ufffdKQq\ufffd\ufffd3\ufffd\ufffd.\ufffd1426125977WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3 MccMnc/724001\nPHP Fatal error:  Uncaught exception 'Exception' with message 'Login Failure' in /Projetos/Exemplos_net/whatsprot.class.php:1640\nStack trace:\n0 /Projetos/Exemplos_net/whatsprot.class.php(474): WhatsProt->doLogin()\n1 /Projetos/Exemplos_net/whatsapp.php(46): WhatsProt->loginWithPassword('Kzfv6L3VSwkxw33...')\n2 {main}\nthrown in /Projetos/Exemplos_net/whatsprot.class.php on line 1640\nAnyone can help me ?\n. I think this too, after a more little time, the command sending again\n. Hopefully never hahahahhaa\nthx a lot !!\n. Hi all again, anyone know a method to configure the whatts in cel and in whatsAPI conf  ?\n. ",
    "Pituky": "It seems you are blocked. Nothing to do\n. Yes in general the blocks seems to be temporary, not sure if they blocks accounts permanently.\n. ",
    "lossurdo": "Thank you so much for the information.\n. ",
    "sandro-salles": "Guys,\nI'm wondering if it is possible to use the API for building a kind of customer service tool. Whatspp would be a great tool to keep in touch with customer who need assistance for solving simple questions and doubts etc.\nThe whatsapp oficial client interface is perfect for the final user, but the person who is on the other side, lets say, an hypothetical customer service professional, would need a better UI, preferably a desktop web application with features like copy/paste and automatic shortcut texts (eg for sending protocol numbers) and so on.\nI totally agree with you guys about the need to keep the service away from spammers, but i think using it the way i described here is very legit. Still i don't know if it would be possible due to the risk of service blocking... imagine lots of people using this channel for communicating with a company... how to handle the responses to everyone without being banned?\n. I'm already using yowsup (python lover here hehe)... but it seems that some features like contact syncing are not working properly and no planned updates for it. Anyway, i'll try to code something and maybe send a PR when i get there!\n. @mgp25 probably stick to yowsup as i'm using Django for this project. But certainly i'll take a close look at WhatsAPI to port what is eventually missing on yowsup.  \nThanks for your reply!\n. ",
    "balwantk": "Use email or SMS or something like Telegram.\n. @mrssam you really need to try to make that work for yourself. This is an issue tracker, not a help forum or tutoring center.\n. @mrssam if you keep asking like this, it's just going to make people really annoyed.\n. @faisalcse this is not a support area. \nYou have to clone the repo, read the documentation and go through the older issues.\nThere's no alternative to doing the homework and figuring out stuff by yourself.\n. @faisalcse I think you can google that to find out: https://www.google.co.in/search?q=PSR-1%2FPSR-2+standard&ie=utf-8\n. It's self explanatory I think.\n. ",
    "nikfariz": "Reading the WhatsApp FAQ, can we conclude that using WhatsApi constitutes violation of Terms of Service? Please see item 6 below:\nWhy am I seeing the message \"Your number is no longer allowed to use our service\"?\nIf you are unable to use WhatsApp and you are receiving the following message: \u201cYour number ... is no longer allowed to use our service\u201d this means that your WhatsApp account has been banned.\nWe ban accounts if we believe the account activity is in violation of our Terms of Service. Please review our Terms of Service to learn more about the appropriate uses of WhatsApp.\nBe aware that the following actions are in violation of our Terms of Service:\n1. Sending ads or any other form of commercial solicitation.\n2. Sending spam or unsolicited messages.\n3. Submitting content (in the status, profile pictures or messages) that is unlawful, obscene, threatening, harassing, hateful, racially or ethnically offensive or otherwise inappropriate.\n4. Being annoying to other users.\n5. Being a repeat infringer.\n6. Using an automated system or an unauthorized / unofficial client application to send messages through WhatsApp.\nWe may not issue a warning before banning your account. If you think your account was banned by mistake you can email us and we will look into your case.\n72 hours after your account has been been banned, your friends will no longer be able to see you in their Favorites / Select contact lists.\nPlease note that WhatsApp reserves the right to refuse service for any reason without prior notice, at our sole discretion.\nIf you see the message \"You\u2019re temporarily banned from WhatsApp\", please read this article.\nCheers, \nWhatsApp Support Team\n. Hi mrssam,\nPlease tell whatsapp that you're using the following device (as contained in whatsapi Constants declaration)\nconst WHATSAPP_USER_AGENT = 'WhatsApp/2.11.339 Android/4.0.4 Device/GalaxyS3';\nIn short, just tell them you're using Samsung Galaxy S3 with Android 4.0.4\nPlease let us know their response. Maybe if they accept your request, we can follow suit.\nOtherwise, just be prepared to be banned due to violating their Terms of Service... sigh!\n. To check on whether your students have whatsapp in their phone, do this:\nhttps://v.whatsapp.net/v2/exist?in=&cc=\nfor example, enter the following in your browser : \nhttps://v.whatsapp.net/v2/exist?in=012XXXXXXX&cc=XX \n(replace X with the appropriate numbers, where \"in\" is the phone number without the country code and \"cc\" is the country code)\nof course, to do this for all students, you'd have to loop this code in an SSL CURL\n. @mrssam have u contacted whatsapp regarding your request to send to 5000 students? have they responded?\n. ",
    "newuser10": "Ok, I have read all the issues here regarding number block. I followed this process to send a message, \nLogin\nsendClientConfig\nsendGetServerProperties\nSync Contacts\nReceive Messages\nSend Typing\nSend Message\nPool Messages\nI have set sleep(1) after both Send Typing and Send Message. I have my script as such that it sends a message to the contact only when it receives a message from them. It was working fine for over 3 months now but yesterday the number suddenly got blocked. I checked the logs, incoming messages and outgoing messages are almost same in number. I have not sent broadcasts too. Can you please give me an insight on what might have gone wrong?\nI sync all contacts in my list once per session, and then follow the typing - sleep - send message - sleep - poll message process. There are over 500 contacts in my list currently. Can this sync cause number block?\n. ",
    "galmeida": "@mgp25 at https://github.com/venomous0x/WhatsAPI/issues/800#issuecomment-47036262 you said \"people does not read and understand the code and protocol (how whatsapp works...)\", I'm trying to find docs about how protocol works without success, apparently they were all taken down.\nCould you, or anyone else, point me to theses docs, please?\n. @mgp25 awesome! thank you.\n. ",
    "waichoi": "I think we all got the same block issue, what my code using for is, when a customer come and make a payment to us, we will whatsapp the receipt to customer immediately (Cutomer are members, so they want a green environment instead of cutting trees ).\n  So, sending to 100 phone number in 5 minutes with the same message are not my scenario.  My content will be different per customer as there are customer name and $price in it and 5 minutes interval in between per message for sure. \n     Well, I cannot enforce customer install a email/Line/wechat client in there mobile phone.  and the customer do need view the receipt immediately.\nBelow is my code.\n$w = new WhatsProt($username, $identity, $nickname, $debug);\n$w->connect();\n$w->loginWithPassword($password);\n$arrayPhone = array($phone);\n$w->sendSync($arrayPhone);\n$w->sendPresenceSubscription($phone);\n$w->sendMessageComposing($phone);\n$w->sendMessagePaused($phone);\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->sendGetProfilePicture($phone, true);\n$w->sendSetProfilePicture(\"demo/logo.jpg\");\n$w->sendMessage($phone, $messages);\n$w->pollMessage();\nbut still got block at 10th number.  Any help?\nThanks for protecting the environment if this script success.\n. 1.) The number I got block, was auto-unblock by whatsapp after 24 hours.\n2.) [UPDATE]: Be sure the contact have added you to their contact list and you too.\nI have try that, and I have bought few SIm card+ My wife, friends.  Same result.\nI only send 1 message to them.  There are 30 seconds in between.  Still got block.\n3.)  Even Whatsapp Plus , the professional 3rd party whatsapp provider, got block as well.\nhttps://nakedsecurity.sophos.com/2015/01/21/whatsapp-issues-24-hour-ban-for-whatsapp-plus-users/\nSo, I can't find the way to avoid block once it over 10 contacts. \n. @mgp25, this is a memebership system.  Therefore, memebers can receive the Recipt & Catelog when they ask.  The memeber already add us into contact list since that the info they want.\neach message we send, gurantee has 5 mintues interval in between.\n. so funny, mgp25 seems like call everyone spammer before reading that person message.  The official WART is not working.  and can't login with the password, try the WART and you know. \n. Yes, I have the same issue, I just download and use the latest WART-1.7.3.0 exe version.\nThe previous 1.7.2.0 version is working too 5 days ago.   Mean I am sure my procedure are correct base on my 6 days ago experience. \n. ",
    "HaroldoMaiolino": "Can someone show me a person to recover thousands of virtual channels blocked the whatsapp. I'm a supplier of virtual channels of the USA and Sim Cards in Brazil. skype- pantanartes1 \nemail -  pantanartes@hotmail.com - \n. ",
    "JanSchuerlein": "Enable the debug mode and look at the response\nif \nfailure\nnot-authorized>\nfailure\nwill respond, youre banned permantly\nIf you have any questions about banning / blocking shit, contact me in skype: skype.janomine\nI've done lot of experiments in this annoying shi*t. \n. We need some insider information, about their system handling, working on it.\n. ",
    "archergod": "@glenn1001  WhatsAPI can be used for your requirement, however it doesn't mean WhatsAPP is happy with it. If all your User have your number in their address book and yours, and then you are sending to them, it won't be a problem. But you need to find a fine balance between spamming (over sending is spamming as well) and over sending. \n. ",
    "johnng815": ":( ... blocked ... \n. ",
    "catch2patch": "Every time you re-verify you phone number on the other device (either phone or API) the previous password becomes invalid. So if you re-verified your phone number via app, you should re-register it with API or WART to retreive new password for your scripts.\n. Same here, but getting password with bash works perfectly.\n. Hey :) And what about http://v.whatsapp.net/v4/ http://v.whatsapp.net/v5/\nhttp://v.whatsapp.net/v6/ etc? )\n2015-05-25 8:46 GMT+03:00 sadiqhirani notifications@github.com:\n\nhey all\ntoday this fine morning when i started to test the code which i developed\nwith the help of whatsapi/chat-api\ni found that v2 stopped registrations and new devices\nand then i manually checked v.whatsapp.net/v3/ url... and i found that\nnew ver of api is being applied (means v2 not fully stopped but some\nfeatures of v2 are stopped)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1145.\n. I mean if you open v2, v3 and also v4, v5 in the browser, it will show a page and ask to download the app.\nHow did you check if v3 really works?\nDid it stop throwing \"old_version\" with v3?\n. \n",
    "VivekMoyal28": "I want to know that particular no is having whatsapp or not i use this\nhttps://v.whatsapp.net/v2/exist?in=xxxxxxxx&cc=91\n{\"status\":\"fail\",\"reason\":\"old_version\"}\nBut i am using the latest version. Same info is also showed at non whatsapp no.\n. ",
    "cheetah1337": "So from what I gathered, I would just need to open a socket to connect with whatsapp, start a stream with whatsapp, send the features and authentication through the protocolnode which hashes it. Read the response from whatsapp to see if I logged in correctly, then send a message.\nI was looking at this repo https://github.com/jhbruhn/WhatsUp and it seems to have a lot of ground work in place which I would like to use, but I think the authentication has changed since then since I haven't been able to get it to work.\nAnother question:\nIn the whatsprot.class.php -> loginwithpassword($password), what is challenge data? There is no comment for it in the property declarations.\n. ",
    "faifai0429": "I have tried once, but the problem is that, the $groupId variable is always false\n. tx  < iq id=\"creategroup-1403978858-1\" type=\"set\" xmlns=\"w:g\" to=\"g.us\" >\ntx    < group action=\"create\" subject=\"My group\"></group >\ntx  < /iq >\nrx  <presence from=\"85256499219@s.whatsapp.net\"></presence >\nrx  <iq from=\"g.us\" id=\"creategroup-1403978858-1\" type=\"error\">\nrx    <error code=\"500\" text=\"resource-constraint\"></error>\nrx  </iq>\ntx  <iq id=\"participants-1403978859-2\" type=\"set\" xmlns=\"w:g\" to=\"@s.whatsapp.net\">\ntx    <add>\ntx      <participant jid=\"85268555908@s.whatsapp.net\"></participant>\ntx    </add>\ntx  </iq>\nrx  <iq from=\"error.us\" id=\"participants-1403978859-2\" type=\"error\">\nrx    <error code=\"501\" text=\"feature-not-implemented\"></error>\nrx  </iq>\n. But this is what I got..\n. ",
    "souhailimnher": "i tis work now or no ?. ",
    "oieesah": "So there is no way we can make a web-app that can send or receive whatsapp messages?\n. ",
    "yusufgungor": "Thanks for your reply.\nI did exactly what you say, but it does not seems working.\nLook my code:\n\nfunction onPresence(\n                $phone, // The user phone number including the country code.\n                $from, // The sender JID.\n                $type // The presence type.\n        ){\n                               file_put_contents(\"presence_occured.txt\", \"bonjour\");\n        }\n$wtp = new WhatsProt($number, $id, $nick, true);\n$wtp->eventManager()->bind('onPresence', \"onPresence\");\n$wtp->connect();\n$wtp->loginWithPassword($password);\n$wtp->sendPresenceSubscription($number_which_i_want_to_subscribe_his_presence);\nwhile(isset($_SESSION['logged_in']) ){ \n     $wtp->pollMessages();\n}\n\nWhy, i can't see a file which mean that onPresence() function run.\n. I tried, but does not working :(\nThe server never returns a node which tagged \"presence\" so the \"onPresence\" function never getting fired.\nI can send presence subscription to a number and can see it on the debug.\nFor debugging more closer, i deactivated the all fire codes on the whatsprot.class.php about presence subscription.\nOnly added lines below :\nif ($node->getTag() == \"presence\"){\n            file_put_contents(\"test.txt\", \"Server sent presence tag\");\n}\nBut it seems that, server never send \"presence\" tag to me. (I subscribed to the a number, i can see it in the debug with a prefix \"tx\")\n. I'll download the latest version and gonna test it again. Thanks for your reply. \n. Thanks too much, latest version solve the problem.\nAlso, i commented $this->sendAvailableForChat(); line at whatsprot.class.php\nBecause of commenting this line, onMessageComposing() and onMessagePaused() can not firing.\nBut onPresence() function still firing. (if you subscribed to a number) \nThis caused to lose too much time for me. I am writing here to help others.\n. After commenting this line, onMessageComposing() and onMessagePaused() can not firing.\nBut onPresence() function still firing. (if you subscribed to a number) \nThis caused to lose too much time for me. I am writing here to help others.\n. ",
    "parthiban-arthanari": "sry for the confusion, actually I need to customize the last seen status. I read it in one of your previous issues, last seen time stamp is automatically updated by watsapp server when user logged in.\ncan I set my custom value to last seen status?\n. k thanks, looking forward for your solution.\n. I knew, can I block that automatic update?\n. ",
    "shaheed0": "this is what I get\nhttp://prntscr.com/3xlihj\n. when I execute Whatsapp.php in 'test' folder this is the result\nhttp://prntscr.com/3zvwnx\nbut when I make a copy of 'src' in 'test' folder and change the path in Whatsapp.php this is the output -I think it's work now-\nhttp://prntscr.com/3zvwsi\nbut this is not the case with the other 'test' files\n. ",
    "jammy666": "im actually using the same password im using in config[] array of whatsapp.php file\ndo i need to encode it or some other thing? im not getting it clearly :( i also tried with + sign before country code. but it always shows me same error.\nthis is my actual password \naxl03Is1nVvgfU*h3mZdkZs=\ndo i need to decode this password?\n?phone=+91regedNumberHere&pass=axl03Is1nVvgfU*h3mZdkZs=&u[]=+91numberHere\nand the script is using this URL https://sro.whatsapp.net/v2/sync/a\nis it a working URL?\nEDIT: obfustaced password\n. i did it the same this time like you wrote = was encoded to %3D but still it give same error :(\ni tried with these two params but same error ( yes ***** were converted to actual password )\n?phone=+91regedNumberHere&pass=axl03Is1nVvgfU*h3mZdkZs%3D=&u[]=+91numberHere\n?phone=+91regedNumberHere&pass=axl03Is1nVvgfU*h3mZdkZs%3D&u[]=+91numberHere\n. this script actually shows me this error\nFatal error: Maximum execution time of 30 seconds exceeded in C:\\Program Files\\EasyPHP-5.3.9\\www\\whatsapp\\WhatsAPI-9e00d118e5e61298efa1340d4880d68d07a30b7e\\src\\php\\contacts.php on line 93\nso i have to use the following code to let the script execute\nini_set('memory_limit', '-1');\nini_set('max_execution_time', -1);\nand when execution is finished then i get this error\nError: Received unknown response: \n. i dont have SendSync method in whatsprot.class.php \ncan you please give me the URL to another latest download link for whatsApp API? this is first time im working on it. \n. thank you very very much with the new download. I tested with it and it is working correctly and checking numbers correctly...\nNow i have a small question.\nCan you please tell me how many numbers i can check if exists or not?\ni read somewhere whatsApp has 10K limit for checking numbers. If it is like this then how can i check more than 10K numbers?\nand when does whatsapp block a number?\n. Can you please guide me the way for checking 100k number?\nIs it ok if i do with cron job?\nAnd what exactly the backoff time?\n. Sure i will\nthanks alot\n. thanks for the answer.\nim actually having these doubts.\n1) what exactly is backoff time, 1 hour? ( when it is required? )\n2) how many contact i can have in an array?\nwhat should be the criteria if i check 100K numbers?\n. im sorry my friend but im not getting clear with 1st point :(\n2) i did not mean, i want to sync 100K numbers at once. I just asked what should be the logic with backoff time 1 hour to sync 100K numbers so it go smooth and return no error.\nfor example\n100 numbers at once in an array\nthen another 100 numbers ( OR the Array LIMIT )\nbut the problem is, Im not getting clearly first poin. Or im not able to understand :-|\n. okay, \nSo you mean. once i reach to the backoff time limit then server will return an error with the time ( ex : 60 minutes ) \nso my account will be able to sync contact after 60 minutes. \nis it?\n. One stupid question.\nis it possible for server to return the error if i try same number in a loop just to check error? \nbecause i dont have too much numbers to sync \n. i think then i should increment number by 1 in a loop and sync. Then i think it will return error :)\n. ",
    "hiuryoliveira": "Hello guys i have a big problem, I tried several times to do what you and this forum also others, but the error is that I entered is the one below. Please help!!!\nFatal error: Uncaught exception \u2018Exception\u2019 with message \u2018Login Failure\u2019 in /var/www/html/WhatsAPI/src/whatsprot.class.php:1655 Stack trace: #0 /var/www/html/WhatsAPI/src/whatsprot.class.php(475): WhatsProt->doLogin() #1 /var/www/html/whatsapp_whatsapi_send.php(8): WhatsProt->loginWithPassword(\u2018ZXNn7dEAd8hS0T3\u2026\u2019) #2 {main} thrown in /var/www/html/WhatsAPI/src/whatsprot.class.php on line 1655\n. ",
    "amol9supe": "hello sir,\nplease check image.\n\n. ",
    "icarrascal": "So it lasts this time to every body? The main issue is that in older version was much quicker, So I thought thas maybe was something i was doing bad or i had to change anything.\nAt the end the \"full process\" login + check for messages or reveived messages lasts almost 10 seconds. It would be great to do it quicker, but in any case THANKS for this great API.\nIf anyone knows somethig I could do in order to \"accelerate\" this process, please, let me know\n. ",
    "Amirjan": "Thanks, but WhatsApp Application does'nt download and send it!.\nAre you sure!?\n. Thanks a lot shirioko,\nPlease implement a sample code, If possible.\n. I know, but with Whatsapp Application, There is no need to download any media, just with tap on (select) received media (without download it) i can forward it to another!\n. All right, it's good idea.\nThanks a lot.\n. Is this not the same:\n$node->getChild(\"media\")->getAttribute('filehash')\nin processInboundDataNode()\n. It's well done:\nReal Sample:\n$w->sendMessageVideo($to,\"tmp.mp4\",false,473039,\n\"ek8xzT7iG+VXJOwqFSlo15hHhXuR+kGsufD7MwIBU8w=\");\n```\npublic function sendMessageVideo($to, $filepath, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n   if ($fsize==0 || $fhash == \"\")\n    {\n    $allowedExtensions = array('3gp', 'mp4', 'mov', 'avi');\n    $size = 20 * 1024 * 1024; // Easy way to set maximum file size for this media type.\n    return $this->sendCheckAndSendMedia($filepath, $size, $to, 'video', $allowedExtensions, $storeURLmedia);\n    }\n   else \n    {\n    $this->sendRequestFileUpload($fhash, 'video', $fsize, $filepath, $to);\n    return true; \n    }\n}\npublic function sendMessageImage($to, $filepath, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n   if ($fsize==0 || $fhash == \"\")\n    {\n    $allowedExtensions = array('jpg', 'jpeg', 'gif', 'png');\n    $size = 5 * 1024 * 1024; // Easy way to set maximum file size for this media type.\n    return $this->sendCheckAndSendMedia($filepath, $size, $to, 'image', $allowedExtensions, $storeURLmedia);\n    }\n   else \n    {\n    $this->sendRequestFileUpload($fhash, 'image', $fsize, $filepath, $to);\n    return true; \n    }\n}\npublic function sendMessageAudio($to, $filepath, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n   if ($fsize==0 || $fhash == \"\")\n    {\n    $allowedExtensions = array('3gp', 'caf', 'wav', 'mp3', 'wma', 'ogg', 'aif', 'aac', 'm4a');\n    $size = 10 * 1024 * 1024; // Easy way to set maximum file size for this media type.\n    return $this->sendCheckAndSendMedia($filepath, $size, $to, 'audio', $allowedExtensions, $storeURLmedia);\n    }\n   else \n    {\n    $this->sendRequestFileUpload($fhash, 'audio', $fsize, $filepath, $to);\n    return true; \n    }\n}\n```\n. Hi again,\nPlease change, in order to user can save filehash:\n...\n   $filehash = $duplicate->getAttribute(\"filehash\");        \n    ...\n   $filehash = $json->filehash;\n    ...\n    $mediaAttribs[\"hash\"] = $filehash;\n    ...\n    $this->eventManager()->fireMediaMessageSent(\n        $this->phoneNumber,\n        $to,\n        $id,\n        $filetype,\n        $url,\n        $filename,\n        $filesize,\n        $filehash,  \n        $icon\n    );\nand change on WhatsAppEventListenerProxy.php:\npublic function onMediaMessageSent(\n    $phone, \n    $to, \n    $id, \n    $filetype, \n    $url, \n    $filename, \n    $filesize,\n    $filehash,\n    $icon\n) {\n    $this->handleEvent(__FUNCTION__, func_get_args());\n}\nand change on WhatsAppEvent.php:\nfunction fireMediaMessageSent(\n    $phone, \n    $to,\n    $id,\n    $filetype,\n    $url,\n    $filename,\n    $filesize,\n    $filehash,\n    $icon        \n) {\n    $callbackEvent = function(WhatsAppEventListener $listener) use ($phone, $to, $id, $filetype, $url, $filename, $filesize, $filehash, $icon) { \n        $listener->onMediaMessageSent($phone, $to, $id, $filetype, $url, $filename, $filesize, $filehash, $icon);\n    };\n    $this->fireCallback($callbackEvent);          \n}\nand change on WhatsAppEventListener.php:\nfunction onMediaMessageSent(\n    $phone, // The user phone number including the country code.\n    $to,\n    $id,\n    $filetype,\n    $url,\n    $filename,\n    $filesize,\n    $filehash,\n    $icon        \n);\n. Hi Dear,\nPlease change:\n```\npublic function sendBroadcastVideo($targets, $path, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n    if (!is_array($targets)) {\n        $targets = array($targets);\n    }\n    $this->sendMessageVideo($targets, $path, $storeURLmedia, $fsize, $fhash);\n}\npublic function sendBroadcastAudio($targets, $path, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n    if (!is_array($targets)) {\n        $targets = array($targets);\n    }\n    $this->sendMessageAudio($targets, $path, $storeURLmedia, $fsize, $fhash);\n}\npublic function sendBroadcastImage($targets, $path, $storeURLmedia = false, $fsize = 0, $fhash = \"\")\n{\n    if (!is_array($targets)) {\n        $targets = array($targets);\n    }\n    $this->sendMessageImage($targets, $path, $storeURLmedia, $fsize, $fhash);\n}\n```\n. This is a received broadcast message! \nBut i mean when send a broadcast message returned id is like broadcast-1405084260-1 and onMessageReceivedClient we receive for example 5 recipient with same id=broadcast-1405084260-1 but $from  is 'broadcast'.\nPlease check it.\nI dont know which target has received my broadcast message...\n. https://github.com/venomous0x/WhatsAPI/issues/826 and https://github.com/venomous0x/WhatsAPI/issues/847\n. I think dont use pollMessages() when send a message!\n. Users must save thumbnails of media messages on (onGetVideo , onGetImage) into dbase to do this.\nUsage (for example):\nif ($row->thumbnail) $icon=file_get_contents('media/thumbnails/'.$row->thumbnail);\nif($row->mtype=='Video')\n$w->sendMessageVideo($to, $row->fname, false, $row->fsize, $row->fhash,$icon);\nif($row->mtype=='Audio')\n$w->sendMessageAudio($to, $row->fname, false, $row->fsize, $row->fhash);\nif($row->mtype=='Image')\n$w->sendMessageImage($to, $row->fname, false, $row->fsize, $row->fhash,$icon);\n. This is a hash file function:\n$filehash = base64_encode(hash_file(\"sha256\", $filepath, true));\nbut only usable when has been saved in whatsapp server.\nIt's possible with upload.\n. File name does not matter, you need only file hash and file size to forward media message.\n. $w->sendMessageImage($to, 'any.jpg', false,147792, '6h3qcEQw+O+F7gUa5gSqv+yZ1aZ6x32172HvTPBXkSo=');\n. https://github.com/venomous0x/WhatsAPI/pull/864\n. You should retrieve whatsapp password on android device and use it in whatsappAPI...\n. sendRequestFileUpload\nand\nin protected function processUploadResponse($node)\ndefine a new notify function here:\n        $duplicate = $node->getChild(\"duplicate\");\n        if ($duplicate != null) {...}\n. Hmmm, It could be a simple query for whatsapp server as sync query!!!\nExcuse me, Are you sure no any way or query!?\n. I had to do it with broadcast!\n. Unfortunately, yes.\n. while(1){\n...\n}\nor cron jobs\n. I only work with this API, but i want to know if i answer 10 received messages simultaneously , no problem will not happened. I dont know who has my phone in his contact list!!!\n. while(1)\n{\n$w->sendActiveStatus();\n$w->pollMessage();\nsleep(1);\n}\n. Thanks a lot @mgp25\n. API is working fine.\n. not needed:\nif($w->loginStatus == \"connected\")\n. https://github.com/venomous0x/WhatsAPI/issues/942\n. Change whatsprot.class.php:\n<?php\nrequire_once 'protocol.class.php';\nrequire_once 'WhatsAppEvent.php';\nrequire_once 'func.php';\nrequire_once 'token.php';\nrequire_once 'rc4.php';\nrequire_once 'mediauploader.php';\nrequire_once 'keystream.class.php';\nrequire_once 'tokenmap.class.php';\nif(!function_exists('mime_content_type')) {\n```\nfunction mime_content_type($filename) {\n$mime_types = array(\n\n    'txt' => 'text/plain',\n    'htm' => 'text/html',\n    'html' => 'text/html',\n    'php' => 'text/html',\n    'css' => 'text/css',\n    'js' => 'application/javascript',\n    'json' => 'application/json',\n    'xml' => 'application/xml',\n    'swf' => 'application/x-shockwave-flash',\n    'flv' => 'video/x-flv',\n\n    // images\n    'png' => 'image/png',\n    'jpe' => 'image/jpeg',\n    'jpeg' => 'image/jpeg',\n    'jpg' => 'image/jpeg',\n    'gif' => 'image/gif',\n    'bmp' => 'image/bmp',\n    'ico' => 'image/vnd.microsoft.icon',\n    'tiff' => 'image/tiff',\n    'tif' => 'image/tiff',\n    'svg' => 'image/svg+xml',\n    'svgz' => 'image/svg+xml',\n\n    // archives\n    'zip' => 'application/zip',\n    'rar' => 'application/x-rar-compressed',\n    'exe' => 'application/x-msdownload',\n    'msi' => 'application/x-msdownload',\n    'cab' => 'application/vnd.ms-cab-compressed',\n\n    // audio/video\n    'mp3' => 'audio/mpeg',\n    'qt' => 'video/quicktime',\n    'mov' => 'video/quicktime',\n\n    // adobe\n    'pdf' => 'application/pdf',\n    'psd' => 'image/vnd.adobe.photoshop',\n    'ai' => 'application/postscript',\n    'eps' => 'application/postscript',\n    'ps' => 'application/postscript',\n\n    // ms office\n    'doc' => 'application/msword',\n    'rtf' => 'application/rtf',\n    'xls' => 'application/vnd.ms-excel',\n    'ppt' => 'application/vnd.ms-powerpoint',\n\n    // open office\n    'odt' => 'application/vnd.oasis.opendocument.text',\n    'ods' => 'application/vnd.oasis.opendocument.spreadsheet',\n);\n\n$ext = strtolower(array_pop(explode('.',$filename)));\nif (array_key_exists($ext, $mime_types)) {\n    return $mime_types[$ext];\n}\nelseif (function_exists('finfo_open')) {\n    $finfo = finfo_open(FILEINFO_MIME);\n    $mimetype = finfo_file($finfo, $filename);\n    finfo_close($finfo);\n    return $mimetype;\n}\nelse {\n    return 'application/octet-stream';\n}\n\n}\n```\n}\n. You should only set collation to utf8mb4_unicode_ci.\nEmojis are only unicode characters.\n. Use UCS2 or utf16 or utf32\n. Thanks a lot @mgp25 for your supporting.\n. Is it possible using WhatsAPI and WhatsApp on mobile phone on the same time? NO, You will be block\n. ",
    "mhamzas": "@JonZarate can you please elaborate how you make it work ?\n. you can add lines with different targets\n$w->sendGetRequestLastSeen($dst1);\n$w->sendGetRequestLastSeen($dst2);\n$w->sendGetRequestLastSeen($dst3);\n. I don't know about it. I think there would be something. try using sleep()\nmethod\nOn Tue, May 5, 2015 at 12:40 PM, bongbongjin notifications@github.com\nwrote:\n\nThanks\nBut how many number could i check ?\ni have already tried using this way.\nBut after checking hundreds numbers , and last seen would not be recieved\nfor a while.\nthanks.5/5/2015 3:31 PM mhamzas (notifications@github.com)\nyou can add lines with different targets\n$w->sendGetRequestLastSeen($dst1);$w->sendGetRequestLastSeen($dst2);$w->sendGetRequestLastSeen($dst3);\n\u2014Reply\nto this email directly or view\nit on GitHub.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/827#issuecomment-98983972.\n. \n",
    "asoliman1984": "u can send messages to the contacts if they add you exist in their contact list, it's easy ^_^\n. ",
    "savinpaul": "Hi, \n@mgp25 Thanks for the reply. Yes, I am using my own number. I tried this in other 4 numbers also, got same result. :(\n. ",
    "skpress": "hi @mgp25 \nI am trying to register through WART,i get the code by sms but when i try it to get through voice even the WART info shoes that code sent by voice to my mobile number.Could i get some help on it? i am using version 1.7.00\n. @shirioko i have asked it there https://github.com/shirioko/WART/issues/44 opened 15 hours ago.\n.  you said to Discuss WART issues in the appropriate project. just telling you that waiting for someone revert there and will be very thankful if you you help me on it.\n. @mgp25 My number is from India,and am also from India.the thing is when i request voice code from Whatsapp i get it but when i try it with WART i don't get not even from the Api.\n. hi @mgp25 any update on the issue?\n. thanks a lot @mgp25  i will test this and let you know.\n. ",
    "AppleStuff": "What do you mean by that?\nEBen if I wait some seconds before sending the next message it crashes.\n. ",
    "carriopablo": "PD: I think that sending video twice is caused because i'm using a while loop\nwhile(true){}\n. php\nwhile(true){\n    $w->PollMessages();\n    $msgs = $w->GetMessages();\n    foreach($msgs as $message)\n    {\n        $from = $message->getAttribute(\"from\");\n        $time = date(\"m/d/Y H:i\",$message->getAttribute(\"t\"));\n        $sender=$message->getAttribute(\"participant\");\n        $from=explode('@',$from);\n        $sender=explode('@',$sender);\n        if($message->getAttribute(\"type\")=='media'){\n            $url=$message->getChild(\"media\")->getAttribute(\"url\");\n            if($message->getChild(\"media\")->getAttribute(\"type\")=='video'){\n                $w->sendMessageVideo($from[0],$url);\n            }\n        }\n    }\n}\nPD:I've resolved the twice send problem\n. ",
    "datatraders": "i used my own number and the current whatsapp api code available here.\nsometimes, it works, mostly not...\nhere the debug output\ntx  <iq to=\"49160XXXXXXX@s.whatsapp.net\" type=\"get\" id=\"lastseen-1406103451-1\" xmlns=\"jabber:iq:last\">\ntx    <query></query>\ntx  </iq>\nrx  <iq from=\"49160XXXXXXX@s.whatsapp.net\" id=\"lastseen-1406103451-1\" type=\"result\">\nrx    <query seconds=\"1520\"></query>\nrx  </iq>\n...\ntx  <iq to=\"s.whatsapp.net\" id=\"1406103471\" type=\"result\"></iq>\n...\ntx  <iq to=\"49160XXXXXXX@s.whatsapp.net\" type=\"get\" id=\"lastseen-1406103515-8\" xmlns=\"jabber:iq:last\">\ntx    <query></query>\ntx  </iq>\nrx  <iq from=\"49160XXXXXXX@s.whatsapp.net\" id=\"lastseen-1406103515-8\" type=\"error\">\nrx    <error code=\"404\" text=\"item-not-found\"></error>\nrx  </iq>\ncould it be, that the whatsapp server block these queries after a while\n. thanks for your help. it works.\n. ",
    "osbamail": "Hi @mgp25 , No I've commented the Gmail credentials lines though It won't explain why in other times it is working fine (or even after so many retry when the error is showing). As for the json response will try to capture and share once it happens again. Thanks!\n. Its my bad, Sorry . As it seems I am getting this error because I am using a DB insertion command for each message received inside processReceivedMessage() function, whenever i am getting a special char in the message string (a single quote in my case), MySQL is giving the error back. and since the error code isn't defined i believe it went for the Json Response error.\nAppreciate the help @mgp25 .\n. ",
    "mastermunj": "Hi @darw1b, I am facing similar problem. Did you find any solution?\n. I am doing exactly same thing. Re-checked file path to be accurate and image is being read as well.\n. ```\nrx  \nrx    \nrx  \ntx  \ntx  \ntx    \ntx  \nrx  \nrx  \nrx    \nrx  \ntx  \ntx    \ntx      \ntx    \ntx    \ntx    \ntx     3216 byte data\ntx  \n```\n. I tried it with both the ways, but it does not go. :(\nIs there anything I am missing or doing wrong?\nBelow is code.\nphp\n$wp = $this->getWhatsProt();\n$wp->sendPresenceSubscription($to);\n$wp->sendMessageComposing($to);\n$wp->sendMessagePaused($to);\n$wp->pollMessages();\n$wp->sendMessageImage($to, __DIR__ . '/gettingstarted.jpg');\n. Apparently I added $wp->pollMessages() at the end and it went through. @mgp25 Thank you. :)\n. ",
    "dheeraj85": "Hi,\nI have downloaded the code \nand my config setting is bleow\n$config['Dheeraj'] = array(\n    'id' => '%b1%02%ce%1d%5e%eb%ac%2bmt%bd%a8%c8%7cg%a0p%c8%04%91',\n    'fromNumber' => '919993215776',\n    'nick' => \"Dheeraj\",\n    'waPassword' => \"_-_\", ///i recevied 6 digit whatsapp code is this password\n    'email' => '',\n    'emailPassword' => ''\n);\nafter that when i run this i see login window logged in then next window to send message  when i select from(sender) it showing me \"Error: Login Failure\". \nWhat's i m doing wrong.\nPlease suggest.\nThanks\n. @shirioko  please suggest how can i get WA password or any tutorial for that.\n. ",
    "best-tech": "Fatal error:  Uncaught exception 'ConnectionException' with message 'Tree length did not match received length (buff = 22 & treeLength = 25)' in /var/www/ph136678/data/www/w.all1c.pro/src/whatsprot.class.php:3716\nhow can i fix it?\n. it error from there \n. ",
    "domingopa": "Thank you very much, write in English .. I'll look for information about: Socket closed.\n. :)\n. I'm having the same problem \ntx  stream:features/stream:features\ntx  ??u?34609177947?=?F???a\u01f4??9?]%1410012367WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3 MccMnc/214001\nrx  \nrx  stream:features/stream:features\nrx  2?)&?:5Pck0?T?l?qa\ntx  $\u059b?\u05c2?8\\J,`+?Bt\n                                                                   ?C{q?On??(\u008e\nrx  \nrx    \nrx  \nmy number is blocked? \nnot used to span has only responded when receiving a message, and only about 20 times. \nThank you for your help.\n. @teleavtomatika I followed the steps above. using wart tells me blocked. Not to do. Thank you for your help\n. @mgp25 What you consider spam? To send a message only to the numbers that we have in your contacts and only after receiving a message from them is considered spam? \nThanks for your work\n. @mgp25 Thank you very much for your answer. Never sending messages randomly, only numbers from which I received a message (straight from the box). The message number was 20 for 1 hour. And the number was updated and the last update. I have 4 other numbers working ok with enterior version without problems. \ngreetings\n. better: $w->sendSync($newContactNumber,\"delta\",\"background\");\n. @mgp25 Thank you for your dedication\n. tests have over 25,000 numbers without blocking problems \nregards\n. ",
    "rootshell-do": "How often are you sending presence to keep the connection up?\n. ",
    "YoussefUSF": "thank you, i success made @mgp25 in exampleFunction.php i think its wrong, i found that the image sending should be followed up by poll\nthis is how it worked for me \n$w->sendPresenceSubscription($target);\n            $w->sendMessageComposing($target);\n            $w->sendMessagePaused($target);\n            $w->sendMessageImage($target, $imagePath);\n            $w->pollMessages();\n. @shirioko i just gave a piece of code not the full code :D  think and im sure that sendMessageImage function need to be followed by pollMessages();\n. @mgp25 oh, ok :+1: Thx for the info\n. @mgp25 can you show me a sample of the code ? \n```\nrequire_once 'src/whatsprot.class.php';\n$w = new WhatsProt($username, 0, \"Whats App Message\", false);\n$w->connect();\n$w->loginWithPassword($password);\n$w->SendPresenceSubscription($target); //Let us first send presence to user\n$w->sendMessage($target,$message ); // Send Message\n////////////////\nif(?????){\necho \"Message Sent Success\";\n}\n///////////////\n```\nWhat should i put in the ???? if \n. I will look into that, Thank you @mgp25 \n. ",
    "Rimander": "Is there a way to send messages to random people?\n. ",
    "Gragx": "Wow, thanks for that fast response\nIf I got it right this makes whatsprot skip sendMessageReceived() and is the clean way of doing what I tried.\nI'll test if messages still \"disappear\" after a while like they did with my first attempt. Hopefully they don't\n. The issue still exists. Calling \"loginWithPassword()\"  calls \"pollMessages()\" without the $autoReceipt = false parameter. Am I missing something and this could be skipped?\n. I disabled \"sendMessageReceived()\" again.\nWith this I was able to get the same message 4 times over a 1min period. After that it didn't show up anymore. In a second test I attempted to call for new messages more often (1sec delay after each call), wich resulted in 2 successfull calls and afterwards the message was gone.\nSo even if sendMessageReceived() isn't called, Whatsapp somehow stops sending the message (maybe due to repeated login calls?).\n. I tried this:\nprotected function sendMessageReceived($msg, $type = null) {\n    return;\n    ....\nMy script is called asynchroneous with javascript. Everytime it's loaded it creates a WhatsProt Object, connects and logs in. My current guess is, that repeated logging in instead of keeping an active connection causes Whatsapp to mark the messages as read.\n. ",
    "mayankgpt1": "dera Friends,\nIs there any way to Post the message to the WhatsApp group using API?\n. ",
    "deonio": "It is impossible to do?\nOn the Internet there are offers.\nFor example, WhatsApp - Who Viewed Me? 1.0.0\n. I get it. Thanks for the replies.\n. I want to receive only one message to the target number\n. I had to modify the responses of this function to get a single message.\n. Help with your script.\nI plugged the iPhone via cable to the pc(ubuntu 14_04 OS).\nIn the iPone file manager iFile I can see the file Cache.db\nI copied your script into a file and call it extractPW.py and place it in the home directory in my PC.\nIn the terminal, I entered the command:\nxxx@linux:~$ python extractPW.py\nThe display I saw the following message:\nTraceback (most recent call last):\n   File \"extractPW.py\", line 3, in \n     import paramiko\nImportError: No module named paramiko\nIn the home directory there are three files: paramiko, sqlite3, time.\nWhat am I doing wrong?\nI have no experience in dealing with the iphone and pyton scripts.\nCan write detailed instructions, how to use your script?\nHelp me, please.\n. I installed paramiko.\nIn the terminal, I entered the command:\npython extractPW.py root 192.168.0.253 xxx\nThe display I saw the following message:\nTraceback (most recent call last):\n  File \"extractPW.py\", line 98, in \n    WAPath = getPath(username, host, password)\n  File \"extractPW.py\", line 18, in getPath\n    dssh.connect(host, username=username, password=password)\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/client.py\", line 236, in connect\n    retry_on_signal(lambda: sock.connect(addr))\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/util.py\", line 278, in retry_on_signal\n    return function()\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/client.py\", line 236, in \n    retry_on_signal(lambda: sock.connect(addr))\n  File \"/usr/lib/python2.7/socket.py\", line 224, in meth\n    return getattr(self._sock,name)(*args)\nsocket.error: [Errno 111] Connection refused\nExplain to me the parameters:\nusername - root. Is that correct?\nhost  - I use the ip address of the iphone in my home network (192.168.0.253). Is that correct?\npassword - xxx. (my root password in Ubuntu). Is that correct?\nI ran the command with different parameters, username and password, but the same result!\nMaybe in iPhone change the settings?\n. I found in iFile Web Server function.\nI used port 80.\nI asked a username and password.\nStart the server.\nIn my web browser at 192.168.0.253 I entered I created a password(xxx) and user(xxx).\nAnd I saw the entire file system iPhone.\nIn the terminal, I entered the command:\npython extractPW.py xxx 192.168.0.253 xxx\nThe display I saw the following message:\nTraceback (most recent call last):\n  File \"extractPW.py\", line 98, in \n    WAPath = getPath(username, host, password)\n  File \"extractPW.py\", line 18, in getPath\n    dssh.connect(host, username=username, password=password)\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/client.py\", line 236, in connect\n    retry_on_signal(lambda: sock.connect(addr))\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/util.py\", line 278, in retry_on_signal\n    return function()\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/client.py\", line 236, in \n    retry_on_signal(lambda: sock.connect(addr))\n  File \"/usr/lib/python2.7/socket.py\", line 224, in meth\n    return getattr(self._sock,name)(*args)\nsocket.error: [Errno 111] Connection refused\nIn the terminal, I entered the command:\npython extractPW.py xxx 192.168.0.253:80 xxx\nError output has changed\nThe display I saw the following message:\nTraceback (most recent call last):\n  File \"extractPW.py\", line 98, in \n    WAPath = getPath(username, host, password)\n  File \"extractPW.py\", line 18, in getPath\n    dssh.connect(host, username=username, password=password)\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko/client.py\", line 222, in connect\n    for (family, socktype, proto, canonname, sockaddr) in socket.getaddrinfo(hostname, port, socket.AF_UNSPEC, socket.SOCK_STREAM):\nsocket.gaierror: [Errno -2] Name or service not known\nWhat should I do?\nHelp me, please.\n. I install OpenSSH\nIn the terminal, I entered the command:\npython extractPW.py root 192.168.0.253 alpine\nThe display I saw the following message:\n\nfind /var/mobile/Applications -iname WhatsApp.app\n/var/mobile/Applications/xxxxxxx/WhatsApp.app\n- Cache.db downloaded!\n- pw.dat downloaded!\n- Extracting data...\n\ncc: \npn: \nid: \nlg: \nlc: \nRequest url: https://ma.twimg.com/twitter-mobile/xxxxxxx/assets/m5_defer.css\nstatus: fail\nlogin: \npw: \ntype: \nexpiration: \nkind: \nWhat am I doing wrong?\n. python troubleshoot - I did not have paramiko module in python\n. I delete Cache.db, Cache.db-shm and Cache.db-wal and delete pw.dat file too.\nOpen WhatsApp verificate my number. Once is verificated, close WhatsApp app and close the process too.\nIn the terminal, I entered the command:\npython extractPW.py root 192.168.0.253 alpine\nThe display I saw the following message:\n\nfind /var/mobile/Applications -iname WhatsApp.app\n/var/mobile/Applications/xxxxx/WhatsApp.app\n- Cache.db downloaded!\n- pw.dat downloaded!\n- Extracting data...\n\nTraceback (most recent call last):\n  File \"extractPW.py\", line 102, in \n    getData()\n  File \"extractPW.py\", line 47, in getData\n    cursor.execute(\"SELECT request_key FROM cfurl_cache_response\")\nsqlite3.OperationalError: no such table: cfurl_cache_response\n. Can be deleted WhatsApp?\nthen re-install?\n. I did it.\nThe same result.\nI uninstalled and reinstalled WhatsApp.\nThe same result.\nAgain I delete Cache.db, Cache.db-shm and Cache.db-wal and delete pw.dat file too\nThe same result.\nI'm getting one the same mistakes\n\nfind /var/mobile/Applications -iname WhatsApp.app\n/var/mobile/Applications/xxxx/WhatsApp.app\n- Cache.db downloaded!\n- pw.dat downloaded!\n- Extracting data...\n\nTraceback (most recent call last):\n  File \"extractPW.py\", line 102, in \n    getData()\n  File \"extractPW.py\", line 47, in getData\n    cursor.execute(\"SELECT request_key FROM cfurl_cache_response\")\nsqlite3.OperationalError: no such table: cfurl_cache_response\n:-(\n. On the android device in WhatsApp is no field for entering a password, only a phone number. Where to enter the password, I do not understand?\n. Thank you, I get it.\nNeed to extract the password from my android device.\n. I do not have iPhone.\nFor my android phone no solution?\nNow this situation at all or only at me?\nMaybe need to look for an older version of WhatsApp?\n. I figured out how to get this status.\nMy code:\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->eventManager()->bind('onGetProfilePicture', 'onGetProfilePicture');\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind('onGetStatus', 'onGetStatus');\n$w->sendGetStatuses($target.'@s.whatsapp.net');\n$w->pollMessages();\nfunction onGetStatus($phone, $from, $type, $id, $t, $status){\n    echo $status;\n}\nIt works.\nBut only for the status containing the text.\nIf the status of the picture.\nStatus displays, like this \ud83d\udcab\nHow can I get a picture?\n. This displays the picture, and I have strange symbols.\nWhat's the problem?\n. Using your code, I did not get the status.\nI used php-emoji (https://github.com/iamcal/php-emoji).\nMy full code:\nrequire_once('/var/www/whatsapp/src/whatsprot.class.php');\nrequire_once('/var/www/emoji/emoji.php');\n$userName = 'aaa';\n$debug = false;\n$target = 'xxx';\n$userPhone = 'bbb';\n$password  = 'vvv';\n$userIdentity = 'jjj';\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->eventManager()->bind('onGetProfilePicture', 'onGetProfilePicture');\n$w->Connect();\n$w->LoginWithPassword($password);\n$w->eventManager()->bind('onGetStatus', 'onGetStatus');\n$w->sendGetStatuses($xxx.'@s.whatsapp.net');\n$w->pollMessages();\nfunction onGetStatus($phone, $from, $type, $id, $t, $status){\n    echo emoji_unified_to_html($status);\n}\n?>\nin html link to emoji.css\nWoks good!\nThanks for the help.\n. ",
    "CashCode": "mgp25, It'd be awesome.\nYou can mail me personally as well.\n. I guess author made something like script-kiddie protection for sync function, this function even doesn't have documentation, by default it sends sync in registration mode. Nobody wants to tell about it.\n. Sat, 09 Aug 2014 11:40:49 -0700 \u043e\u0442 mgp25 notifications@github.com:\n\nThe one explained above or a backoff time..?\n\u2014\nReply to this email directly or  view it on GitHub .\nBackoff time means the time between syncs.\nI dont know what type and when they do it, but they can send messages avoiding ban.\n\u0001\n. \n",
    "taiws89": "Hi guys, thanks for replies. Actually I'd tried to run the script again after several hours and it worked again until I run the script for several times, around 100 times continuously, the issue occurred again. Can someone explain what's the error code means?\n. ",
    "prasenjeetp": "@shirioko : can you please explain what the Context is about. How is Background different from Interactive from Registrations. How many numbers can we sync in each context type per call.\n. ",
    "ktry": "Try downloading all the Cache.db* files or at least the Cache.db and Cache.db-wal\n. ",
    "AbdullahDiaa": "iOS 8 has changed caching system here's the updated code for iOS 8\n``` python\n-- coding: utf-8 --\nimport sqlite3\nimport paramiko\nimport os, sys, time\ndef find_between( s, first, last ):\n    try:\n        start = s.index( first ) + len( first )\n        end = s.index( last, start )\n        return s[start:end]\n    except ValueError:\n        return \"\"\ndef getPath(username, host, password):\n    dssh = paramiko.SSHClient()\n    dssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n    dssh.connect(host, username=username, password=password)\n    cmd1 = \"find /var/mobile/Containers -iname pw.dat\"\n    print \"> \"+cmd1\n    stdin, stdout, stderr = dssh.exec_command(cmd1)\n    res = stdout.read()\n    res = res.split(\"\\n\")\n    print res[0]\n    dssh.close()\n    return res[0]\ndef getDB(username, host, password):\n    remotePath = \"/var/mobile/Containers/Data/Application/\" + WAPath[6] + \"/Library/Caches/net.whatsapp.WhatsApp/Cache.db\"\n    pwFile = \"/var/mobile/Containers/Data/Application/\" + WAPath[6] + \"/Library/pw.dat\"\n    transport = paramiko.Transport((host, 22))\n    transport.connect(username = username, password = password)\n    sftp = paramiko.SFTPClient.from_transport(transport)\n    sftp.get(remotePath, 'Cache.db')\n    sftp.get(pwFile, 'pw.dat')\n    sftp.close()\n    transport.close()\n    print \"\\n\\n- Cache.db downloaded!\"\n    print \"- pw.dat downloaded!\"\ndef getData():\n    conn = sqlite3.connect('Cache.db')\ncursor = conn.cursor()\n\ncursor.execute(\"SELECT request_key FROM cfurl_cache_response\")\nrequest_key = cursor.fetchall()\nrequest_key = request_key[0]\n\ncc = find_between(request_key[0], \"cc=\", \"&\")\npn = find_between(request_key[0], \"in=\", \"&\")\nid = find_between(request_key[0], \"id=\", \"&\")\nlg = find_between(request_key[0], \"lg=\", \"&\")\nlc = find_between(request_key[0]+\".\", \"lc=\", \".\")\n\nprint \"cc: \"+cc\nprint \"pn: \"+pn\nprint \"id: \"+id\nprint \"lg: \"+lg\nprint \"lc: \"+lc\nprint \"\\nRequest url: \"+request_key[0]\n\ncursor.execute(\"SELECT receiver_data FROM cfurl_cache_receiver_data\")\nreceiver_data = cursor.fetchall()\nreceiver_data = receiver_data[0]\nstatus = find_between(str(receiver_data[0]), \"status\\\":\\\"\", \"\\\"\")\nlogin = find_between(str(receiver_data[0]), \"login\\\":\\\"\", \"\\\"\")\npw = find_between(str(receiver_data[0]), \"pw\\\":\\\"\", \"\\\"\")\ntype = find_between(str(receiver_data[0]), \"type\\\":\\\"\", \"\\\"\")\nexpiration = find_between(str(receiver_data[0]), \"expiration\\\":\", \",\")\nkind = find_between(str(receiver_data[0]), \"kind\\\":\\\"\", \"\\\"\")\n\nprint \"\\nstatus: \"+status\nprint \"login: \"+login\nprint \"pw: \"+pw\nprint \"type: \"+type\nprint \"expiration: \"+expiration\nprint \"kind: \"+kind\n\nprint '''\n\n\nWA Password and Identity Extractor\nfor iPhone\n\n\nAuthor: @_mgp25 - github.com/mgp25 - mgp25.com\n''' \nif len(sys.argv) < 4:\n    sys.exit(\"Usage: python extractPW.py   \\n\")\ntime.sleep(2)\nusername = sys.argv[1]\nhost = sys.argv[2]\npassword = sys.argv[3]\nWAPath = getPath(username, host, password)\nWAPath = WAPath.split(\"/\")\nGet Whatsapp cache ID\nprint WAPath[6]\ngetDB(username, host, password)\nprint \"\\n- Extracting data...\\n\"\ngetData()\n```\n. ",
    "refaei": "there is no pw.dat in iPhone files WhatsApp app folder where can I find it. ",
    "dynamicplus": "i think this should be marked as BUG\nas it doesnt recongnise local path / remote path correctly\nand try to incorrectly copy image to images folder even if is already local...\n. ",
    "usefksa": "Thanks guys\n. ",
    "jmoral": "Once in a while I get boken pipe notices. My vote for this enhancement.\n. With latest pull requests from mpg25, I request a new code with \n$w->codeRequest('sms') \nand get \n    [status] => fail\n    [reason] => blocked\n\nI suppose the reason why my number is blocked is the whatsapp version update.\nSince all my users have already register that number, is it possible to unblock the number? \n. ",
    "guidox96": "I think so... My prefix(italian) is \"39\", without \"00\" or \"+\", right?\n. When I select my account in \"from\", after a load, this is displayed:\nhttp://giochiphp.altervista.org/uploader/file/errorefailure.png\n. ",
    "pedrobr": "Hi, I have the same issue. I've browsed so many forums and yet cant find a solution. @mgp25 Do you have any insight? Please help me.\nBy using the Wart method, I get a working password which I know works because I can get it working with Pidgin whatsapp messenger, but not on WhatsAPI.\nI get the same exact Error: Login Failre that @guidox96 gets as can be seen on his image file above.\nI am on Windows 8.1, and have Wamp running. I execute the code on chrome (also tried IE).\nI use (minus the hidden for web) on whatsapp.php:\n$config['Pedro'] = array(\n    'id' => '%c5(hidden for web)7%08',\n    'fromNumber' => '55119(hidden for web)',\n    'nick' => \"YOURNICKNAME\",\n    'waPassword' => \"S+RUB(hidden for web)/4o=\",\n    'email' => '',\n    'emailPassword' => ''\nThank you in advance.\n. ok, sorry for double post, found the problem. I was using the code from this API but its outdated. the updated code is in: https://github.com/mgp25/WhatsAPI-Official  \nI guess I was a bit confused with the similar names.\nThanks!!\n. ",
    "moosaviamir": "Thank you mgp25.\n. Thank you mgp25, but how can i make an event to handle such thing. I googled it allot but it seems php try catch block can not get this error and i don't know how to write an event handler to handle it.\n. Dear shirioko\nI don't want to increase time limit, i want to know if it is invisible to me or not. Then i pass to another user and leave it the way it is. is there any way to understand that?\n. OK. Thank you.\n. Related post already answered found!\nhttps://github.com/venomous0x/WhatsAPI/issues/747\nchecking it out....\n. Thank you\n. Same problem here!\nIs this project still active or not?\n. @mgp25 thank you! i've just sent too! please forward solution for me. I also did open an issue on Official one.\n. Thank you but not working for me!:(\ndid you try voice via WART App?\nOn Mon, Jan 12, 2015 at 9:38 AM, bitbitbit notifications@github.com wrote:\n\nthanks @vigiman https://github.com/vigiman !!\nOne note, I succeed in getting the 6 digits code with voice rather than\nsms~ :-)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1079#issuecomment-69532608\n.\n. @vigiman I am still trying to use yowsup. I don't know anything about python and i have problem with running code. with python3.4 when i try \"pipe install yowsup2\" it says invalid syntax. before that i tried python 2.7 it said command\"c:\\MinGW\\bin\\gcc.exe\" failed. I'm Totally Confused. in yowsup installation instrunction says Install Zlib and i dont know how to install it on windows and documentation is not enough for me!:(( please help me. \n. Thank you. I'm on it...\n\nOn Tue, Jan 13, 2015 at 12:04 AM, vigiman notifications@github.com wrote:\n\n@moosaviamir https://github.com/moosaviamir i am not a python expert\nmyself, if you really cant get it to work after learning basic syntax and\nfollowing the docs email me\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1079#issuecomment-69640672\n.\n. It seems there was a firewall or something like that witch blocks traffic. Its fine now.\n. I don't Think so! I just downloaded whatsapi several days ago. \nSo you say my Whatsprot.php is out dated?\n\nRegards\n. mpg25\nThanks but the official one says :\nFatal error: Call to undefined method WhatsProt::sendGetGroupsParticipants() in C:\\xampp\\htdocs\\WAO\\src\\t2.php on line 18\nRegards\n. Ok sorry to bother you! :) I'll figure it out.\nI'll close Issue as soon as I found the solution.\nThank you\n. Dear mpg25\nNow I get this debug on send get groupv2:\n```\ntx  \ntx    \ntx  \nFatal error: Uncaught exception 'ConnectionException' with message 'Connection Closed!' in C:\\xampp\\htdocs\\WAO\\src\\whatsprot.class.php:617 Stack trace: #0 C:\\xampp\\htdocs\\WAO\\src\\t2.php(21): WhatsProt->pollMessage() #1 {main} thrown in C:\\xampp\\htdocs\\WAO\\src\\whatsprot.class.php on line 617\n```\n. Ok.\nThank you!\n. ",
    "maxnathaniel": "hi mgp25, \nthanks for your reply.\n1. i got that done\n2. sure, will do\n3. will do that too\njust one final question - does it mean i have to upload the php files onto a server in order to use it?\n. thanks guys. \nis it something like this - http://phpshell.sourceforge.net/?\n. thank you, will try it!\n. ",
    "Lawgrin": "@mgp25 Hi man, i've tried this now and i dont seem to get the password out\nI backed up the folder on the device called \"\\Phone\\WhatsApp\" looked like the data to me.\ni then uninstalled the app and installed your apk. then replaced  the \"\\Phone\\WhatsApp\"folder and then launched you app with it logcat running (in eclipse - verbose) and nothing\n. @mgp25 I have tried the python code (was my first time looking at python) and i got an output that does not make exact sense. i saw that there were changes required and TBCH i got lost in the discussion with all the different tangents that went off.\nAlso I'm not to keen on rooting the device to get the pw and me files out >.<\n. @mgp25 I'm kwl to wait. You are doing some Kick ass work here. Thanks man. Shout if you need testing, can only really do it when im at work gmt+2. You have my skypeID\n. @mgp25 Hi i sent you my skypeID, I am more then willing to help\n. @mgp25 Any update on this?\n. @mgp25 Awesome to hear that. Hope you come right soon.\nJust off the beaten track. Are you in any way tied into the WatsAPINet project?\nEdit: I am new to gitHub so im sorry if there is an identifier that is clear as day regarding your link to the project\n. Please see\nhttps://github.com/perezdidac/WhatsAPINet/issues/201#issuecomment-55584524\nThe md5 also needs to be changed. Once again please Post these questions there\n. I attempted to migrate your changes for the WhatsAPINet. Didn't work there - I know this is a temp fix for WhatsAPI not WhatsAPINet\n. @mgp25 As far as i can tell i am using .378 data\n. @mgp25 Thanx for the help\nFor everyone else\nThe changes do work for WhatsAPINet\nJust make sure you change the following:\n1. WhatsAppApi.Settings.WhatsConstants.cs\nstring WhatsAppVer = \"2.11.378\"\nstring UserAgent = \"WhatsApp/2.11.378 Android/4.0.4 Device/GalaxyS3\"\n1. WhatsAppApi.Register.WaToken.cs\n   string WaClassesMd5 = \"oCtjlSonS+4H16h9HW6nNA==\"\n2. WhatsAppApi.Register.WhatsRegisterV2.cs\n   request = String.Format(\"https://v.whatsapp.net/v2/code?method={0}&in={1}&cc={2}&id={3}&lg={4}&lc={5}&token={6}&sim_mcc={7}&sim_mnc={8}\", method, pn.Number, pn.CC, id, pn.ISO639, pn.ISO3166, token, \"000\", \"000\");\njust copy and paste into the respective locations and it will work\n. @blueslmj @mgp25 OK so after some playing around the only way to get it to work was to set up a service outside of my country and then call that location with the parameters and have it call WhatsApp and then pass back the details. For obvious reasons i cant make that location publicly accessable.\nI needed to do this for both the RegisterCode and RequestCode function\nSorry guys\n. @infoquestsolutions As far as I recall the server is in Switzerland\n. ",
    "karim090": "@mgp25 yo puedo testear tambien, estoy usando la api para un conmutador de whatsapp para mis clientes, asi pueden comenzar a comunicarse por whatsapp con mi peque\u00f1o emprendimiento\n. ",
    "CircleCurve": "When I used modded apk today , I cannot get the Whatsapp PW at alogcat .  I have already backuped the original  whatsapp of using  Titanium Backup \u2605 root  . The Whatsapp'version is  2.11.378 .   i hesitated that different version's conflict with 3.3.3   so  I download a modded apk from website which is 3.3.3  .  It's a pity that don't show any whatsapp ps  even if i change the version :(   \nSorry for my bad english :(\n. @mgp25  contacted :)\n. thanks bro It's very useful\n. ",
    "peliculap": "Hi, guys. You all right?\nI was following everything until now, but I could not to extract the password, too... the same thing that CircleCurve tried, with the same results...\nCan I help some way? I really need my password... :-(\nThanks...\n. Woooowww... Thank you, MGP25!  +1!  You're really great!! :+1: \n. Wwwwooooowwww... Man... Thank you, very, very much!!\nObs: Sou carioca, rapaziada... ;-)\nPS: I'm from Rio de Janeiro, guys... ;-)\n. ",
    "r30r30": "Thank you, MGP25\n. ",
    "yankee42": "Thanks, MGP25. That worked perfectly. I flattered you for that. Claim it if you want to: https://flattr.com/thing/3766845\n. ",
    "losuper": "Hi everyone, \ni'm trying to decrypt the pw file using the java method to decode written upside but i don't know how to acces to the PKBF2.foo1(t, b1, 16, 16); method.\nAnyone knows how?\nThank you\n. ",
    "shishirtanwar": "I am also going for JAVA method since others are not working for me.\nBut I can't access the class 'PKBF2' for this PKBF2.foo1(t, b1, 16, 16); \nI would be great help if someone could provide the source code for this class.\nThanks in Advance!\n. Got it to install.....turns out if you have smorra's app installed it doesn't let wawp2 to get installed and vice-versa.\nAnyway, on clicking extract button it says - \"Can't access WA files. Are you root?\"\nBut it is rooted and I already gave it SuperUser Access.\nAll other rooted apps are working fine.\n. ",
    "AzizYosofi": "Can not access the  PKBF2.foo1(t, b1, 16, 16) any way to do that\n. ",
    "rezanadimi72": "first first first your mobile should be rooted\njust use from password extactor!!!!\nfirst whatspp login.\nopen password extratctor and click extract.\nfinish!!\napk download from http://www.mediafire.com/download/i25i4p6fbw34kkp/Password_Extractor.apk\n. ",
    "janke184": "Hi!\nWhere is Class PKBF2 and foo1 method? \nRegards\n. ",
    "davivenan": "My friends first of all you are very good at programming, but I do not know anything, sorry. but I'm really in need of help from you, I create whatsapp channels for company campaigns here in Brazil. but I do this manually with sincard, could anyone help me to create whatsapp numbers without sms code? another detail, someone knows how to create whatsapp channels and how to get away from whatsapp server ip tracking? skype: davivenan1. ",
    "Niggggggo": "This is actually in a class, I guess I just forgot to copy the class definition when I posted this here.\nAlso, isn't initializing it in the constructor enough?\n. class Classname\n{\n    private $param1;\n    private $param2;\n```\npublic function __construct($para1, $para2)\n{\n    require_once \"config.inc.php\";\n$this->param1 = $para1;\n$this->param2 = $para2;\n\n$this->w = new WhatsProt($userPhone, $userIdentity, $userName, false);\n$this->w->eventManager()->bind(\"onGetMessage\", get_class().\"::onMessage\");\n$this->w->connect();\n$this->w->loginWithPassword($password);\n\nwhile (true) {\n    $this->w->pollMessage();\n}\n\n}\npublic function onMessage($mynumber, $from, $id, $type, $time, $name, $body)\n{\n    echo $this->param1;\n    //PHP Fatal error:  Using $this when not in object context\n}\n```\n}\nNot sure why the markdown failed though.\n. $variable = new Classname(\"somestuff\", \"someotherstuff\");\n. Yeah that would've worked but wasn't my problem exactly.\nI figured out eventually that apparently I was calling a non-static method statically, so I changed \n$callbackEvent = function(WhatsAppEventListener $listener) use ($phone, $from, $msgid, $type, $time, $name, $message) {\n            $listener->onGetMessage($phone, $from, $msgid, $type, $time, $name, $message);\n        };\n        $this->fireCallback($callbackEvent); \nin WhatsAppEvent.php to\nglobal $variable;\n call_user_func_array(array($variable, \"onMessage\"), array($phone, $from, $msgid, $type, $time, $name, $message));\nand then suddenly it worked! Thanks for your effort anyway.\n. ",
    "jeffersontm": "Thank you very SHIRIOKO really the door was locked. Problem solved.\n. ",
    "marcoas": "(Translated by Google)\nMy project is not for SPAM \nAnd as I said .... \"All my clients have my phone number in their contact list\"\n. ",
    "niqash": "i am new in whatsapp api\ni want send a msg to multiple recipients 1+ millions at a time, can i send through whatsapp api i am using it in web app, and can i insert contacts from external .csv file .\nis it possible ?\n. ok thx to clear it ...\nbut can i send msg in group of my sim card as option in broadcasting  it shows msg that broadcast message sent but not rcieving to recipients ?\ncan u help me for this?\n. and sorry @mgp25 you should answer gently ,,,,thanks\n. ",
    "mohamedayed": "hey there ive notauthorized and kicked out every time i send message from 2 months ago it works fine for me but in these days i dont know what`s happining in the kitchen :)\n$username = \"*****\";\n$password = \"**_OVwZUbvLSxXRk5uYRs=\";\n$target=\"*_***\";\n$w = new WhatsProt($username, 0, \"test\", true);\n$w->eventManager()->bind(\"onGetImage\", \"onGetImage\");\n$w->eventManager()->bind(\"onGetProfilePicture\", \"onGetProfilePicture\");\n$w->connect();\n$w->loginWithPassword($password);\n$w->codeRequest(\"sms\");\n$w->sendSync($target);\n$w->sendMessage(\"201068768045\", \"dadsada\");\n$w->pollMessages();\ncheck it for me valid number and valid imei so whats the problem ill appreciate your quickly response\n. Login Failure exception fired up whatsprot.class.php on line 1582\n. Array ( [cc] => 1 [in] => 3257540523 [id] => %b6x%9f%c6%ab%0d%c8%2c%f1+%99%d1%c2%d4%0a%b9%94%e8a%0c [c] => cookie ) stdClass Object ( [status] => fail [reason] => blocked ) \nits still bloked me even i used another sim card with wart so i think they detect my server ips and blocked it or what ? \n. spam mean send a punsh of data to multible numbers it`s only one number form my number to another one as usual whatsapp user does\n. i fix it out thanks for your response marcos :)\n. replace this last line of code to check if this number was blocked or not by this line \n$w->checkCredintial(); if u work with latest api as it might return an array with the statue key check that first i think its not about the eventmanager.\nanother notice where the password u optain from whatsapp using wart or what ever $password=\"\";\nthis variable might not be empty\nregards\n. also appears on the phone @cBevilaqua \n. @mgp25 all of us are made that API be stable and help ourselves to solve problems and errors dont tell that if u wanna make your own its up to u but we still work together to upgrade that api to a higher level we think in the new school way (Open source) if u dont like this school go and do what u r believe  in\nregards \n. @mgp25  goog luck too \nwell u have the rights to do that for spammers but what about those  wanna learn and share knowledge did u think about them \n. so go on @mgp25 \n. blocking is the way most of programming language used to do .. send alot of requests stop the application and wait till the last response  then resume to work,\non the other hand non blocking is line by line response send line and get response send another and get response so it much more faster than blocking. Like @eliasjnior  said Nodejs is  made the best practice\nto non blocking i hope u check it so u will learn more and more \nregards,\n. ",
    "cBevilaqua": "Hello, \nIs there some way to get the password using the node js API?\nThanks!\n. ",
    "isaacqc": "I am using Laravel, and I used cron job (Dispatcher) to keep the whatsapp connection open. Here is the code that I implemented:\n```\npublic function fire()\n{\n// set command to run for a limited period\nset_time_limit(($this->online_minutes * 60 + 20));\n\n// set new time to cache\n$expiresAt = Carbon::now()->addMinutes($this->online_minutes + 10);\n$current_fire_time = time();\nLog::debug('WhatsappCommand start. current_fire_time['. date(\"Y-m-d h:i:s\",$current_fire_time).']');\nCache::tags('whatsapp')->put('new_fire_time', $current_fire_time, $expiresAt);\n\n// resolve singleton Whatsapp object which is connected and logged in\n$whatsapp = App::make('whatsapp');\n\n// register event listener\n$listener = new DoulaEasyWhatsAppListener();\n$whatsapp->eventManager()->addEventListener($listener);\n\n// ************** while loop START **************\n$loop_counter = 0;\nwhile ($this->shouldRun($current_fire_time)) {\n\n    // poll any real-time incoming messages\n    // and let event manager handles them\n    $whatsapp->pollMessages();\n    echo '.';\n\n    // send active status every thirty loops\n    if ($loop_counter > 10) {\n        $whatsapp->sendActiveStatus();\n        $loop_counter = 0;\n    }\n\n    // check again if timestamp has been updated\n    $this->shouldRun($current_fire_time);\n\n    // check for outbound messages to send:\n        // check in Redis queue for any outgoing messages\n        while (LRedis::llen('whatsapp_outgoing_message') > 0) {\n            $outgoing_message = json_decode(LRedis::lpop('whatsapp_outgoing_message'));\n\n            // send the message\n            $whatsapp->pollMessages();\n            $whatsapp->sendMessage($outgoing_message->target, $outgoing_message->message);\n        }\n\n    // delay next execution for some time\n    sleep(2);\n\n    $loop_counter++;\n}\n// ************** while loop END **************\n\n}\nprivate function shouldRun($current_fire_time) {\n$new_fire_time = Cache::tags('whatsapp')->get('new_fire_time');\n\nif ($current_fire_time != $new_fire_time) {\n    Log::debug('WhatsappCommand die. current_fire_time['. date(\"Y-m-d h:i:s\",$current_fire_time).'] '.\n                 'new_fire_time['. date(\"Y-m-d h:i:s\",$new_fire_time).']');\n    die();\n}\nreturn true; //continue running\n\n}\n```\n. I found that if I pollMessages right after loginWithPassword and before doing any other actions, the occurrence of the problem is greatly reduced\n. x2\n. ",
    "cryomi": "Hi folks, i also have a WA bot built by this API. It has ussd command list, so any person who have number can write to my bot and send ussd commands to get any text data/pictures/videos. Every 70-100 user ussd requests bot becomes banned (i verify it by registering its number again - it outputs \"blocked\"). So as i see there is no way for such apps not being blocked?\n. I see, seems the issue is in availability of bot in opponent contact list. \nMy bot has next commands:\ncv - sends a text message with CV as response\nphotos - sends 2-3 images as response\nsuggest smth - emulate interactive Contact US\nno resending messages!\nBut mostly all users that write to this bot will not save its number to their contact list,\nnow i have added to bot sync of all contacts that wrote him every several hours (including new users). Will see how it will work, i have about 10 sim blocked while experimenting ) No re-registration of blocked sim seems is supported by WA servers. I am a little bit frustrated, koz as i see i didn't broke any WA EULA rules. \n. The problem is that i am not testing bot with other bots, i test it on real people, who sends sentence garbage to my bot for fun. OK, i will try with contact-sync.\n. ",
    "thiagosantos": "i think your numbers were blocked because it's seems they are sending spam to your bot.\nin a natural way to talk to someone on Whatsapp you should add this number to your cellphone contact list, and therefore WhatsApp will syncronize the cellphone contact with the user list. and than be able to talk on Whatsapp.\nso if you created a bot, and are testing this bot with other \"bot\" you centanly will be blocked, if the message exchange look like spam.\nyou should always sync the contacts you send/receive message.\ntry to create a cellphone behavior, and to not think Whatsapp  engineers are noobies.\nyou can not broke any rule on what you did, but broke a cellphone behavior and WhatsApp knows that. :)\n. You did not implement the right way your code!\nYou MUST allways sinc your new contacts, and try to simulate a human\nbehavior with message stats (random composing, writing, pause ... ).\nWhat was your approach about this?\nBest regards,\nThiago Santos\nhttp://thiagosantos.com\nOn Mon, Sep 15, 2014 at 4:17 PM, alesantosp notifications@github.com\nwrote:\n\n@ramapunk https://github.com/ramapunk please see\nhttp://www.whatsapp.com/faq/en/general/23154266. In special iten 6. This\napi is an unofficial client and maybe for this you was blocked.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/958#issuecomment-55643364.\n. In my mind and in my implementation, every time someone contact me i should\ni sync this new number .\nThis is what happens  in the phone-to-phone WhatsApp workflow.\n\nSomeone add you to his contact list, and then you add he back to your own\ncontact list (with sync).\nAbout human behavior you should send random stats before sending the\nmessage itself. like two composing, one pause, composing and then send.\nbest regards,\nThiago Santos\nhttp://thiagosantos.com\nOn Mon, Sep 15, 2014 at 9:17 PM, ramapunk notifications@github.com wrote:\n\n@mgp25 https://github.com/mgp25 because new people start talking to the\napp all the time, and those new contacts must be added. I added now the\nsync every 21 mins but i dont know if too short period or it's ok!\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/958#issuecomment-55678832.\n. @ramapunk i should do something like this, with not expected composing status.\n\nforeach ($responseQueue as $number => $message ){\n$wa->sendActiveStatus();\nfor($i=0; $i< rand(1,5); $i++) {\n$wa->sendMessageComposing($number); \nusleep(rand(500,5000));\n$wa->sendMessagePause($number);\n}\n$wa->sendMessage($number,$message);\nunset($responseQueue[$number]);\n}\n. @mgp25 they can be, but when i say to simulate the behavior I say to be\nfull,  like a true cellphone app do. to do that you must use this optional\nstatus.\nbest regards,\nThiago Santos\nhttp://thiagosantos.com\nOn Tue, Sep 16, 2014 at 7:30 PM, mgp25 notifications@github.com wrote:\n\n@ramapunk https://github.com/ramapunk if you never sync you probably\nget blocked. You can chat without syncing if the other part is\nparticipating in the conversation. Then instead of addind one by one, when\nyou reach X numbers of new contacts you can schedule a sync, almost at\nstartup.\nAlso the timing between messages dont need to be random values, just a\ntime a human can write messages. For example. I can't send 10 messages to\ndifferent persons in 2 seconds, thats is considered abusing the system and\nyou will get instant block. So you have to take care of your script\nbehavior.\n@rodrigofaillace https://github.com/rodrigofaillace WhatsApp support\nsupport@whatsapp.com\n@thiagosantos https://github.com/thiagosantos composing and paused\nstatus are optional.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/958#issuecomment-55823777.\n. Soon or later this should happen, some people just think on make easy money.\n\nHow did you discovery this abuse?\nThiago Santos\nhttp://thiagosantos.com\nOn Fri, Sep 26, 2014 at 12:50 PM, dennobaby notifications@github.com\nwrote:\n\nSad to hear that you stop to support this wonderful project. But I\nunderstand your intentions and reasons. Can i write you per Mail?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-56980135.\n. @TruthEdge Certainly!\nI was not thinking about abuse for this blocked ranges.\n\nWhatApp already blocked the number if you send more than X messages for non double-side synced contacts.\nTo delivery mass spam you should have no less than a thousand of fresh numbers, and to be \"more\" effectively you also should a thounsand of IPs.\nI dont know if there are someone with a real interesting on doing this, is to much work.\n. great!\nThiago Santos\nhttp://thiagosantos.com\nOn Sun, Oct 5, 2014 at 5:29 PM, mgp25 notifications@github.com wrote:\n\nNew repo with official updates https://github.com/mgp25/WhatsAPI-Official\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-57951040.\n. This is true, the WhatsAppApi.dll is already compiled and it source's code it's not available in this repo.\n\n@AhmedRaffat What kind of virus warning did you receive?\n. @mgp25 This is sad but, apparently true, I've checked all WART-1....exe. The lasts two versions, on Avast, (WART-1.8..0.exe) throws me a warning. This can also be a false-positive as this one https://forum.avast.com/index.php?topic=147249.0 .\nDetails\nURL: https://raw.githubusercontent.com/mgp25/WART/master/Old/WART-1.8.0.0.exe\nInfec\u00e7\u00e3o: FileRepMetagen [Malware]\nURL: https://raw.githubusercontent.com/mgp25/WART/master/WART-1.8.1.0.exe\nInfec\u00e7\u00e3o: Win32:Malware-gen\nHope be useful.\n@AhmedRaffat anyway you can try to compile the DLL  and WART by yourself. Good look.\n. ",
    "Artem22": "iI also need help with this! Has anyone experience of using PROXI\n. ",
    "ioesandeep": "@mgp25 \nwell i dont think adding numbers to contact is spamming or any type of privacy attack. I am only trying to understand how to add numbers to my contacts using WhatsApi.\nAnd the second question i asked, i wanted to ask, if somehow i cannot add any number to my contacts using whatsapi, then, is there any provision to send messages to contacts which exist on my phone.\nBut As you said,If i understand, ContactSync is method where WhatsApp verifies which of the \nnumbers are whatsapi or not, and if they are, they will be added to my contact list automatically. I got my answer that i can add numbers to my contact using whatsapi.\nI too dont support spamming, i just want to simulate whatsapp on my browser rather than using on my phone. Sending same message to numbers which exist in my contact list is not spamming, is it?\n@shirioko I don't think i support any type of spamming in my question. I don't know what you understood?\nThanks, @mgp25\n. Everything your api can not do, you declare it spam, it is that simple I guess! Dont go advertising that you have a whatsapp api then, you should be telling people that you have a whatsapi that is no good for nothing. That might make you popular.\n. ",
    "lostlian": "@mgp25 Sending Bulk messages doesnt necessary mean Spamming. If the user provide necessary permission its not spamming.\nIn fact, there is a bulk.php file right?\n. ",
    "alesantosp": "Thanks @mgp25 , i'll find this issui in WhatsApiNet, but do you have any suggestion to do that in PHP?\n. @Amirjan i'm already did that, but after some time (1 hour, 2 hour... it's variable) i received \nrx  < stream:error >\nrx    < >< / >\nrx  < /stream:error >\nWith this return were not generated any exceptions on whatsprot.class.php or fired any event... \nBasically i have:\nwhile ( 1 ) {\nlist ( $usec, $sec ) = explode ( ' ', microtime () );\n$script_start = ( float ) $sec + ( float ) $usec;\n$this->processaComandos(); //get image profile if i have one to do this\n$this->processaMsgsSaida(); //send msg the operator typed\n$this->processaMsgsEntrada(); //receive new msgs\n$script_end = ( float ) $sec + ( float ) $usec;\n$this->tempoTotal += ($script_end - $script_start);\nif ($this->tempoTotal > rand( 47,56 ) ) {\n$this->tempoTotal = 0;\n$this->sendGetGroups(); // @mgp25 told about 'There is a issue in WhatsApiNet where @shirioko explained a way to keep online' and i'm trying do this every 60 seconds\n//$this->sendPong(); //my old code\nif ( $this->online ){ \n    $this->sendOfflineStatus();\n}\n}\nprocessaMsgsSaida basically has\n$this->sendActiveStatus();\n$this->online = true;\n$this->sendPresenceSubscription ( $destino );\n$this->sendMessageComposing( $destino );\n$this->poolMessage();\nsleep( 1 );\n$this->sendMessagePaused( $destino );\n$ret = $this->sendMessage ( $destino, utf8_encode ( $val ['dsc_msg'] ) );\n. @mgp25 thanks, i sent you an e-mail\n. @mgp25 thanks, i'll try this again (had trying something like that) and i'll be check ajaxDemo again. But my problemn isn't to stay online, it's receive msgs all the time. I don't know why sometimes i still connected, i can send messages but i can't get the answers. On mobile phone they stay with 1 ticket (they were not delivered to the whats number). When this happens if i kill my php script and execute it again all of messages will delivered to my script.\n. @mgp25 thanks again, i'll be check. But today i use a loop pooling messages and sometimes the pooling doesn't get messages... the most stranger is when this occurs all of commands/messages i sent still working.because of this I have to disconnect at times and connect again, but i think this is not the correct way and i need to find a way to avoid this.\n. @mgp25 i will, thanks.\n. @mgp25 I had the same problem using whatsapp.php. I downloaded the latest version and put my data and started the script. Sometimes it worked normally, other times I sent the message the phone and it \ndid not come. To try to understand where the problem occurred, measure the time the method pollMessage and saw that it usually takes 2 seconds, but when I can not download the messages it does not take even a second to process. When this occurs, I need to disconnect and connect again for messages to be downloaded.\nIn ajaxDemo.php there is a method w- $> pollMessages (); at line 113, when possible please update the code.\n. @mgp25 sorry but I understood what you meant. If I start the script in listener mode and it can not fetch messages, how can we have a correct mode if the only thing that was done was call the poolMessage?\nIf I monitor with debug, I see only composing, chatpause coming from the phone, but the message does not arrive.\ntempo: 2.02512 - 15.894909381866 -- 15.894909381866\nreadStanza: 01/09/2014 16:26:30\nstring(3) \"\u00c7\\000\u2191\"\nrx  <presence from=\"5534XXXXXXXX@s.whatsapp.net\"></presence>\ntempo: 1.25507 - 17.149981498718 -- 17.149981498718\nreadStanza: 01/09/2014 16:26:31\nstring(3) \"\u00c7\\000\u2194\"\nrx  <chatstate from=\"5534XXXXXXXX@s.whatsapp.net\">\nrx    <composing></composing>\nrx  </chatstate>\ntempo: 0.53103 - 17.68101143837 -- 17.68101143837\nreadStanza: 01/09/2014 16:26:32\nstring(0) \"\"\ntempo: 2.02612 - 19.707127332687 -- 19.707127332687\nreadStanza: 01/09/2014 16:26:34\nstring(3) \"\u00c7\\000\u2194\"\nrx  <chatstate from=\"5534XXXXXXXX@s.whatsapp.net\">\nrx    <paused></paused>\nrx  </chatstate>\ntempo: 0.77904 - 20.486172199249 -- 20.486172199249\nreadStanza: 01/09/2014 16:26:35\nstring(0) \"\"\ntempo: 2.02412 - 22.510288238525 -- 22.510288238525\nreadStanza: 01/09/2014 16:26:37\nstring(3) \"\u00c7\\000\u2194\"\nrx  <chatstate from=\"5534XXXXXXXX@s.whatsapp.net\">\nrx    <paused></paused>\nrx  </chatstate>\ntempo: 0.74804 - 23.258330345154 -- 23.258330345154\nreadStanza: 01/09/2014 16:26:37\nstring(0) \"\"\ntempo: 2.02612 - 25.28444647789 -- 25.28444647789\nreadStanza: 01/09/2014 16:26:39\nstring(0) \"\n. @ramapunk please see http://www.whatsapp.com/faq/en/general/23154266. In special iten 6. This api is an unofficial client and maybe for this you was blocked.\n. @ramapunk check #762 about types of sync.\n. ",
    "darw1b": "the same problem, trying to make different ver in whatsprot.class, but it doesn't work\n. ",
    "acekun": "thank you. that's a really neat code\nbut it still doesn't fix my problem. in your code can i save the days, hours and mins in an array and use it somewhere else?\nlike\n// return the value\n        //echo \"- Last seen: \" . $days . \" days \" . $hours . \" hours \" . $minutes . \" minutes ago\\n\";\n        return array($days,$hours,$minutes);\n}\nand use it like\n$my_time_array = $w->sendGetRequestLastSeen($target);\nbecause that didn't work with me.\nthank you again.\n. ",
    "jnoliver2": "Im experiencing the same problem as @baakdaa. My account stopped working yesterday reason being 'Older client version', So i downloaded the latest code and started getting login failures. On trying to re register the account, I get [status] => fail [reason] => blocked. So i bought a new sim card and it was blocked on the first message. \n. ",
    "cibb": "Guys, Whatsapp does not provide an API that do not want the service to be used by robots. It is normal if they detected an extraordinary number of mensges (5 in 10 seconds, for example) from one line Whatsapp going to block it. In addition to blocking the IP and all lines connecting from it. USE WhatsAPI but don't ABUSE...\n. Hi gain @baakdaa!\nIt is true what you say and I do not want to create problems. But @shirioko himself said on his website (http://www.shirioko.nl/2014/04/whatsapp-bulk-bullshit/) if we use the WhatsAPI to send bulk, we are all going to hurt.\nThe problem you're describing is the typical problem caused for builk sender servers. I published the post  on your subject, but it's nothing personal, it's an warning in genral.\nI apologize to you if my post bothered but it is a reality, and it would be a shame to harm us for people who use the API to bad ends.\n. @TomiMc you are con shared Hosting?\n. Hi mgp25! Thanks for your answer! In each version you change the $classesMd5 var. I ask about this change. How can we update this var in future updates?\nDont put the idiot label to the topic please :P\n. Nice! Is it very difficult to get those values\u200b\u200b manually (Without resorting to your list)?\nPD- Es muy gratificante encontrar a un hispanohablante por este proyecto =)\n. You are the best :p\nThanks! (Now if you want put the idiot label to my post Haha)\n. ",
    "guikolt": "I was being blocked just by logging in. Didn't send a single message to anyone, did not subscribe to anyone... registered my SIM, logged in once, when I tried to log in again, SIM was blocked.\nMy friend that also runs an IRC eggdrop that relays message between our #channel and our whatsapp group also got blocked at the same time.\nThe only common thing between us is that we share the same IDC (OVH) and we use WhatsApi.\n. same thing here, tested on two totally different ip blocks from amazon (but yes, still amazon), and both new fresh sim cards were blocked as soon as I logged in. did not even send a single message or anything, just logged in.\nso yes, it seems that they are blocking datacenters: Amazon and OVH so far.\n. so you think the problem is during the register process ?\nI'll try it later and I'll let you know, thanks.\n. ",
    "mmalbergier": "I see... is there something I can do? Or I will never be able to use this number?\n. With this number I can register in the Android App\n. I've just got a new number, and again it gets unauthorized!\n. ",
    "TomiMc": "same here, and i only was sending 1 message per day, all new number i register are being blocked only  in the login.\n. is not shared, is a dedicated server. Even i just try in a virtual machine with another ip and a new number and again blocked sending a message. Using Sync / Type / Pause /Type / Send...\n. No Spam. Only was sending a message about server status in a group with 5 users. No commands, nothing else, no spam. The server is hosted in hetzner Germany.\n. @Gitstepn . No i cant resolve it. I just try with a new numbers and blocked again. So i will move my scripts to telegram. if you know something new, pls tell me :).\nI dont know if wa its blocking numbers per ip. \n. ",
    "Gitstepn": "@mgp25  Even I am getting the same issue. \nUsed latest token & whatsaprot. Used New Server. Used new numbers(got from wart ).\nTried Sending. But it doesnt send and gets blocked immediately. When i check the number again it shows blocked.\nRead through previous issues. But yet Unable to figure out the source of issue.  Please help.\n@TomiMc Did your issue resolve and how?\n. @mgp25  Today I am not getting the codes when registering, using the 2.11.378 token & useragent version in whatsapi\n. ",
    "Adelabdelaziz": "i am check it but i don't found my answer please tell how get it and already changed my\n$w->codeRegister('281158'); but when make a new request  for get my password\nObject ( [status] => fail [reason] => old_version ) \n. already up to date \n. How get my password after received whatsApp Code ?? \n. now is done i put my code  in $w->codeRegister('xxxxxx'); and make new request and send to me sms again with code from telnet\n. [] Logging in as 'whatsapp' (966536354478) \nFatal error: Uncaught exception 'Exception' with message 'Login Failure' in /home/whatsapp/public_html/Test/src/whatsprot.class.php:1641 Stack trace: #0 /home/whatsapp/public_html/Test/src/whatsprot.class.php(475): WhatsProt->doLogin() #1 /home/whatsapp/public_html/Test/examples/exampleFunctional.php(70): WhatsProt->loginWithPassword('Wjkuxuf9wrJkleG...') #2 {main} thrown in /home/whatsapp/public_html/Test/src/whatsprot.class.php on line 1641\n. OK i am change this number but i am using the token number in parameter password this is right ???\n. Now i am test with new number and give me seems Error i think My problem Password \n. When i open bug \ntx  \nrx  \nrx  stream:features/stream:features\nrx  sK\u0017-\u00d0H2\u00a5\u0006\u001cU\u00be\u00cf\u00c3\u00e90 B\u00c81\ntx  \u2122\u2022^\u00f6\u00ea\u00bf\u00fd\u00c4\u00c2\u00e5\u2039\u009d\u00f0^\u001c:3\n. this not all output yes i make debug = true\nif make debug = false this is my output\nLogging in as 'newzain' (966598679473) \n[*] Connected to WhatsApp\n. ",
    "EgyDeveloper": "wait for you bro ...\n. i use proxy with USA IP server it work fine and the registration code sent successfully and i got the code\n. @mgp25 wait for your update ^^) appreciated\n. Thanks @mgp25 , sounds good :+1: \ni am now at saudi arabia and work good.\ni use ip from the country number and now can got my registration code normally . \nArray\n(\n    [status] => sent\n    [lenght] => 6\n    [method] => sms\n    [retry_after] => 1805\n)\nand code has already received .\ntry more numbers and tell you whats happend tomorrow :+1: \n. ",
    "riyazahamedr": "May I know where you modified in the code to add proxy IP\n@EgyDeveloper \n. ",
    "Osmanbakri": "Hi @mgp25  i have one question and one remark that might require attention,\nRemark : Latest Whatsapp version from their website while downloading shows build : WhatsApp/2.11.609 for nokia and WhatsApp/2.11.8 for iphone.\nQuestion:  I tried your new pull modifications (build .378) registering a new number (WART) But got blocked after sending the first message as the users above, and giving that my client is still working well using the old configuration and version (Also was registered through WART so i don't have ID to request a new password) , what should be the steps i should do now to avoid getting the number blocked?\nThanks & Appreciated,\n. Hi @mgp25 , Android version in whatsapp website is : Version 2.11.380\nwhat will happen if we updated the code and version with the latest pull , but didn't re-register the number . will it work fine?\n. my number is not blocked , the version is updated in the store, from reading the issues i can see others getting blocked after updating the version. my concerns are below:\n1) what will happen if i didn't update the version and kept sending?\n2) if update is required , changing to recent pull modifications, is re-registering required?\n. how can i get the identity ? i registered using WART and no id was given .. the API is working fine without setting the id variable.\n. Hi @dennobaby yes in the iphone i am receiving other broadcasts normally , only from the api they are getting in the \"unknown group\". maybe @mgp25 or @shirioko can think of something...\nUPDATE: the created \"Unknown Group\" disappears and you lose the received message , although you get the notification.\n. Perfect , Works like a charm . thanks alot @SikiFn . yes it would be great if you can explain the fix.\n. pleaseee count me in , everyday i visit the repo to check the issues and get to learn some more about the api and handling events , hopefully one day i would do something my own. your thread took a piece out of my heart :') . how can i join?\n. yup , @mgp25 you were right . no support any more :(\n. Spam ???! Do you have any clue how broadcasts work ???!!\nI don't think so .\n. I won't but whatsapp will .....\nhttp://www.whatsapp.com/faq/en/iphone/23782313\nNote: Only contacts who have added you to their contacts will receive your Broadcast Message. If your recipient is not getting your broadcasts, check to make sure they have added your number to their phone book. \n. ",
    "gmbrier": "I have the same problem but only when I use the linux server, on windows server it doesn't happens.\nWhy ?\n. It's the same source but the linux server is on EUA, and windows is on BRASIL.\nit can be a problem ?\n. WART not work for me,\ni'm using this foreach just to show the response\n. ",
    "sabry2010": "@brittson  i have same issue did you find any solution?\n. @gmbrier\ni have same issue block my numbers when try send any message \ndid you find solution for this issue?\n. ",
    "joaomarcelobsb": "@mgp25 thank you so much... I got it...\nRegards\n. ",
    "rodrigofaillace": "Try registering your brand new sim on your smartphone first. Secondly, log in AWS. Please, let me know if youreach success.\n. I am not 100% sure. But I believe so. \n*do not forget to download the latest files (the token ones - released about one month ago)\n. Hello, @hgc2002 . I didn\u00b4t understand what your \"False\" sentence refers, \nI agree with you @mgp25  and @hgc2002 . It is very easy to know if it is a AWS server. \nBut I cannot say that AWS is 100% blocked cause I am using it right now. I just needed to change my way of register a brand new SIM card (now I need first to register using it\u00b4s original WhatsApp App before registering in PC).\nAll other readers:\nDon\u00b4t consider what I did as a rule or a right way to do things. I am just sharing what is working for me. Till today. ;)\n. Congrats @ramapunk for your contest idea. Do you have any link to that? \nJust letting you know, I have tried to reach Whatsapp Inc at bd@whatsapp.com , but no answer  has been received. Did you get any?\n. @mgp25 thanks. I am trying to reach them.\n. @mgp25, you\u00b4re right. \nAbout this #983, Is it right to understand that:\nIf I register using your solution, the original WhatsApp App will keep on working in my mobile and I will be able to use it on my computer?\n. @GitsUp , first of all, congrats! \nSecondly, what do you mean about \"libwajava is nonblocking\"? Is it that you won\u00b4t get your number blocked??\n. @GitsUp , I got it now. Thanks!\n. ",
    "dinbrca": "yes it isn't needed but I still have the problem :(\n. I don't know why but in my code adding a:\nsleep(1);\nafter:\n$w->sendVcard($destinationPhone, $name=\"Contact\", $vcard->show());\nsleeping after sending either -image, video ,vcard, location - seems to help..\n. ",
    "kaitou1412": "@dinbrca Do you still have the problem?\nI have the problem, too.\nI've double checked everything on @SikiFn code.\n``` php\n!/usr/bin/php\n<?php\nrequire_once('config.php');\n$destinationPhone = '64122423424';\n$w = new WhatsProt($userPhone, $userIdentity, $userName, $debug);\n$w->Connect();\n$w->loginWithPassword($password);\n$v = new vCard();\n$v->set(\"data\",array(\n    \"first_name\" => \"Some Contact\",\n    \"last_name\" => \"\",\n    \"cell_tel\" => \"65796447200\",\n));\n$w->sendPresenceSubscription($destinationPhone);\n$w->sendVcard($destinationPhone, $name=\"Contact\", $vcard->show());\n```\nIt shows: \ntx  <stream:features></stream:features>\ntx  <auth xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" mechanism=\"WAUTH-2\" user=\"6464646464\">\u00c7\u00da6464646464\u00fe\u00e0/5\u00c3_\u00f2T\u00d1\u00d9N    \u00adU\u00d8|1420010741WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3 MccMnc/510001</auth>\nrx  <start from=\"s.whatsapp.net\"></start>\nrx  <stream:features></stream:features>\nrx  <challenge>\u00fb\u00c5\u00e8\u00e1\u00f9J\u00e1!%\u00bff\u00eck\u00c5b\u00ec\u00c1</challenge>\n^\u00fd\u00b7\u00dd_Lm\u00d0\u00ee\u00ee\u00d9\u00a6q\u00d7\u00f5Y^\u00dc\u00d8x7\u00f0W\u00ac\u00ab\u00c2</response>rams:xml:ns:xmpp-sasl\">\nrx  <success t=\"1420010742\" props=\"4\" kind=\"free\" status=\"active\" creation=\"151968                                                                           0068\" expiration=\"1551216068\">\u00fbF'\u00da\u00ac\u00d3\u00af_\u00a0\u00a8#\u00c4pJ\u00ba</success>\ntx  <presence name=\"Anton\"></presence>\ntx  <presence type=\"subscribe\" to=\"6464646464@s.whatsapp.net\"></presence>\ntx  <message to=\"6464646464@s.whatsapp.net\" type=\"media\" id=\"message-1520010742-                                                                           1\" t=\"1520010742\">\ntx    <x xmlns=\"jabber:x:event\">\ntx      <server></server>\ntx    </x>\ntx    <notify xmlns=\"urn:xmpp:whatsapp\" name=\"Mentari Net\"></notify>\ntx    <request xmlns=\"urn:xmpp:receipts\"></request>\ntx    <media type=\"vcard\">\ntx      <vcard name=\"Contact\">BEGIN:VCARD\nVERSION:3.0\nFN:ASD\nN:ASD;ASD;;;\nTEL;type=CELL,voice:65656565\nTZ:+0800\nEND:VCARD\n</vcard>\ntx    </media>\ntx  </message>\nWhat's wrong? Can anyone confirm that sending vCard still works?\nBecause i don't get the vcf on whatsapp.\nBut sending simple message is working OK by this code:\nphp\n$w->sendMessage($destinationPhone,\"Hello?\");\nThanks in advance\n. Here's my config.php\n``` php\n<?php\nrequire_once('src/whatsprot.class.php');\nrequire \"src/vCard.php\";\n$userPhone        = '64646464';\n$userIdentity     = 'e747f1fcf87d452f9bb018ca6738a19f';\n$userName         = 'Anton';\n$password         = '33it1m0h4Goii4uCofxxoDfLT/Y=';\n$debug            = true;\n?>\n```\n. Great! It works!\nThanks very much @dinbrca !\n. ",
    "AnkitPtel": "hey i m doing in windows application(.net)\n so can u tell me in windows application how to do ...\n. i m using a WinAppNet download from here only i mean in github so u have any idea about this?\n. ",
    "ramapunk": "@thiagosantos  I figured that not important the sync because the user need add us in their contacts list to send us a message. Now we are implementing the sync process like the example code. Reading in the issues i noticed that i can do it just only a few times per hour.\nI dont understand why i have to send all the contacts list to sync every time, it not possible send only the new ones?\n@alesantosp thanks, we are trying to contact to whatsapp inc to check it out! \n@mgp25 we do not make spam. We wait for user actions and react about this. Never we send  unsolicited messages.\n. @mgp25 because new people start talking to the app all the time, and those new contacts must be added.  I added now the sync every 21 mins but i dont know if too short period or it's ok!\n. @mgp25 if i never do a sync whats happends? \nSync a new contact when they say hello for first time is tricky to me because the flow of new contacts can be one to hundreds per hour depending the scenario. Can i do this?\n//in a function who detect the message comes from a new contact\n//maybe a dozen of new contacts in minutes\nif (user_exists($number)){\n    //some code when user are interacting...\n}else{\n   //first time,  Sync \n   $wa->sendSync($newContactNumber,\"delta\");  //in this case is better delta?\n   //some code welcome message\n}\nand in the main loop should be scheduled a full sync over 24 hours. \n//the script runs 24/7 sends presence and reconnect periodically.\n//should add a full sync every 24 hours\n$last_day=time();\nwhile(true){\n    if((time()-$last_day)>=86400){\n        $wa->sendSync(getNumbers());\n        $last_day=time();\n    }\n}\n@thiagosantos the human behavior can be fast and random using usleep instead sleep?\nforeach ($responseQueue as $number => $message ){\n    $wa->sendMessageComposing($number);\n    usleep(rand(10000,350000));\n    $wa->sendMessagePause($number);\n    usleep(rand(23300,155600));\n    $wa->sendMessage($number,$message);\n    unset($responseQueue[$number]);\n}\n@alesantosp thanks for the delta mode! \n. ",
    "innovativevijay": "Thanks for this.\nIts helped me out but one more problem raised. I hope you will help me?\nError : \n\"{\\\"status\\\":\\\"fail\\\",\\\"reason\\\":\\\"bad_token\\\"}\"\n. thanks\n. How to set profile picture?\n. ",
    "ahy95": "@mgp25 when i change user agent and version to .378 my error change and show below error:\nstdClass Object ( [status] => fail [reason] => bad_token ) \nand when i check with WART-1.7.1.0 show error old_version again :(\n. Can you explain how to generate classesMd5?\n. @mgp25 i raw MD5 from classes.dex that is:e669731feedda5173af6650539ca965d\nand my base64 encoded is:ZTY2OTczMWZlZWRkYTUxNzNhZjY2NTA1MzljYTk2NWQ= \nwhy my base64 encoded is different with you?\n. you can find your answer in exampleFunctional.php file\n. ",
    "adelsjunior": "I managed to install and ate message sending , but even without using the messaging the next day I 'm blocked , can anyone help me ???\n. (\n    [cc] => 55\n    [in] => 4198917530\n    [to] => 554198917530\n    [lg] => pt\n    [lc] => BR\n    [method] => sms\n    [mcc] => 724\n    [mnc] => 001\n    [token] => GD91DvxcAZ%2FharmljiPSU0tDI0o%3D\n    [id] => %b9n%a2l%a8%0d%9b%188q%3f%a5%d8%96%5b%ac%14%ad%e1%b1\n)\nstdClass Object\n(\n    [status] => fail\n    [reason] => bad_token\n)\nCan help me ?\n. The sync should always be done or just once ?\n. ",
    "daniellubos": "Hi there, Im having the same \"old_version\" issue. Changed the version number to a new one like 2.17.63. This has changed the error message to \"bad token\". The $classesmd5 is documented\n$classesMd5 = '14w/wF67XBf2vTc+qALwKQ=='; // 2.16.148\nSo, I am pretty sure that's why the registration fails.\nEven though you explain how to get the $classesMd5 and generate the token, I have difficulty to understand how to do it and I'd be really happy I you could give some more details.\nUsing the suggested tool classesmd5-64, I wonder how to generate the classes.dex.\nFor usage it is mentioned: classes.exe file.apk. So I guess:\n\nclasses.exe file.apk\nHowever, file.apk is the WhatsApp App? How to download it without installing. (I'm using Mac OSX)\n\nTo make it working quickly, I'd be glad if you could help me with a new $classesMd5. Indeed, I'd would also like to be able to generate the tokens myself.\nLooking forward to your reply.. ",
    "infoquestsolutions": "@Lawgrin `can you tell me location that worked for you ?\n. ",
    "luidiva": "Same here. Did you figured out?\n. It's like a timeout. After some time idle I stop receiving and sending messages, not effect on changing status, composing, etc. No errors occurs, these actions only doesn't work.\nEven when connection status is loggedin or connected. Btw, what's the difference?\n. ",
    "maznos": "@luidiva \nI am sorry, I didn't figure out the solution, thats why I asked here\n. @dennobaby \nYes I am using the latest commit but still same issue\nrequest new password -> send 1 msg -> not authorized \n. @dennobaby \nI used the example to send regular msg\nhere is the debug output:\ntx  stream:features/stream:features\ntx  9{d\ufffdxxxxxxxxxxxx\u001d \ufffd\\\u0005\ufffd\u0532\ufffd[<\u0160^\ufffd/< \ufffd!1411048098WhatsApp/2.11.378 Android/4.3 Device/GalaxyS3 MccMnc/421001\nrx  \nrx  stream:features/stream:features\nrx  =\ufffd\ufffd\ufffdI\ufffd\u0017 \ufffd[^\ufffd;+\ufffd\ufffd9\ufffd\ufffd\ntx  \ufffd\ufffd\u0006\ufffdL\\\ufffd\u0206>\\\ufffd(&\ufffd\b\ufffda\u000fmm\ufffd3t(\ufffdkM'\ufffd\ufffd\u0007G\n. @dennobaby\nYes!\n. I guess I need a code to get only the new password whenever it is needed\nwhen I request via WART it just return the new password\ncan anyone give me a code to use, please :)\n. @mgp25\nI mean: what is the php code used to check for new password if it is changed from the server?\n. @mgp25 \nOK\nthanks\n. ",
    "fraxxx1": "Ok, I've saved the id of the message in the form of message-xxxxxxxxx-x. What is not clear to me is how to query the server to see if it has delivered or not.\nI do not understand why the script that I'm using only works immediately after sending my message and not, for example, after 30 seconds.\nI'm doing something wrong in the script? Or use the id of the message that is not correct?\nCan anyone give me an example of working code that can solve my problem?\nThank you for your attention\n. ",
    "Catanp": "i have the same problem anyone help please\n. ",
    "crashforce": "MGP25 friend, \nTested the \"exampleFunctional.php\" and I'm crazy trying to send pictures and videos. \nI can send some pictures but others will not. \nWhat should I do? \nSince I am using this script as part of my work for completion of course university have a deadline to deliver and I'm already at the limit, unfortunately I'm not good in PHP and then it becomes hard for me. \nCould you help me about it? \nThanks in advance.\n. Elias can you mail me ?\n2014-09-25 12:07 GMT-03:00 Elias J\u00fanior notifications@github.com:\n\nI think you can keep this function as a function. and who wants use can\ncreate an event:\nonGetMessage($mynumber, $from, $id, $type, $time, $name, $body)\n... and in the function run:\n$body = parseMessageFromEmojis( $body );\nAfter I solve my problem with event manager, I will try that :)\nBut, in the WhatsProt class, you have protected $messageQueue. You can\nadd another function to this class, like convertEmojis and before use\n$w->getMessages() you can call $w->covertEmojis(), so, this messages will\nbe converted and when getMessages, will be all right.\nI'm not sure about everything I told, but, you can try that [image: :+1:]\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/981#issuecomment-56832668.\n. Luan vc \u00e9 brasileiro ??\n\n2014-09-24 23:46 GMT-03:00 CircleCurve notifications@github.com:\n\nthanks bro It's very useful\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-56767356.\n. Cara, vc conseguiu fazer o whatsapp.php enviar imagens e videos ?\n\n2014-09-24 23:58 GMT-03:00 Luan Freitas notifications@github.com:\n\n@crashforce https://github.com/crashforce sou sim.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-56767975.\n. @peliculap mande-me um email pra trocarmos uma ideia.\n\n2014-09-25 1:12 GMT-03:00 peliculap notifications@github.com:\n\nWwwwooooowwww... Man... Thank you, very, very much!!\nObs: Sou carioca, rapaziada... ;-)\nPS: I'm from Rio de Janeiro, guys... ;-)\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-56771761.\n. Congrats @eliasjnior https://github.com/eliasjnior\n\n2014-09-26 19:59 GMT-03:00 mgp25 notifications@github.com:\n\n@eliasjnior https://github.com/eliasjnior I'm going to continue this\nproject. Doing patches, updating it, making better, but not for spammers.\nIm going to open right know the private repository.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-57031116.\n. The continuation of the project\n\n2014-09-26 20:02 GMT-03:00 Elias J\u00fanior notifications@github.com:\n\n@crashforce https://github.com/crashforce, why \"congrats\"? :P\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-57031396.\n.  @eliasjnior https://github.com/eliasjnior talk to me in google talk now\nplz.\n\n2014-09-26 20:05 GMT-03:00 Israel Duarte crashforce@gmail.com:\n\nThe continuation of the project\n2014-09-26 20:02 GMT-03:00 Elias J\u00fanior notifications@github.com:\n\n@crashforce https://github.com/crashforce, why \"congrats\"? :P\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-57031396\n.\n. People I have a problem when trying to send pictures:\n\n\nI can send some images and not others ..\nThere is a pattern of images that have to follow to be able to send ?\n2014-09-27 21:17 GMT-03:00 TruthEdge notifications@github.com:\n\n@ExpressArab https://github.com/ExpressArab , So you don't need the API\n, what the fuck you are doing here, and why you are upset when mgp said\nhe's not going to support spammers like you ?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/991#issuecomment-57070168.\n. \n",
    "raghavendra89": "Hi @crashforce \nAre you able to send images and videos?\n. @mgp25 \nThanks. I will look into that. \nFor now I am able to send images. The images were getting uploaded but they were not delivered.\nI added this line to fix the issue(as discussed in issue-805):\n$w->waitForMessageReceipt();\n. Hi @eliasjnior,\nI am facing the same problem, images are not getting delivered. Here is the debug report:\n```\n \n rx      filehash=\"r70XWlyUoWuauTWva++e9VmHJvfkIeF/TH/BUdw2mnE=\" type=\"image\" width=\"500\" \n  height=\"366\">\n  rx  \ntx   t=\"1413867821\">\n tx    \n tx      \n tx    \n tx    \n tx    \n tx     2960 byte data\n```\nAny idea whats wrong here?\n. ",
    "ajasmoon": "require_once 'whatsprot.class.php';\nrequire_once 'vCard.php';\n$target = \"*_\";\n$username = \"*_*_\";\n$password = \"*_**\";\n$w = new WhatsProt($username, 0, \"Anas\", true);\n //send picture\n$w->sendMessageImage($target, \"demo/x3.jpg\");\n. sorry i've changed it.\nI've tried also exampleFunctional.php file with my account (i'm sure it's not blocked) but i get the following result:\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in C:\\xampp\\htdocs\\whats\\examples\\exampleFunctional.php on line 10\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in C:\\xampp\\htdocs\\whats\\examples\\exampleFunctional.php on line 10\n[] Logging in as 'nicky' (**) [] Connected to WhatsApp - Profile picture saved in /pictures \nFatal error: Call to undefined function mime_content_type() in C:\\xampp\\htdocs\\whats\\src\\whatsprot.class.php on line 1794\n. ",
    "talr": "I got \n'Fatal error: Call to undefined function mime_content_type() in D:\\Hosting\\3081642\\html\\Includes\\WhatsAPI\\src\\whatsprot.class.php on line 1793'\nWarning: array_key_exists() expects parameter 2 to be array, boolean given in D:\\Hosting\\3081642\\html\\Includes\\WhatsAPI\\examples\\exampleFunctional.php on line 92\nWhy not to implement the changes in the repository code?\n. Is it true MissVenom is not working anymore? \nIf it is not working, what solution is working to send WhatsApp messages?\nif it is working, I downloaded the certificate and it is asking for password-I didn't find the file Form1.cs. What is the password for the certificate?\n. ",
    "abdouz": "If I am right, Contact list is actually maintained by the app. and nothing stored on server, so as @mgp25 said nothing like that!\n. @mgp25 I never commented here before but I use WhatsAPI and find it fun and challenging, spammers will always be there man, doing for fun or community is not in private repos., however it's your decision.\nBest :) \n. ",
    "ludufre": "No. But using incorrectly you can get the number blocked forever.\n. I do not consider risky, provided it is used correctly. But anyway, use another number for testing, not yours.\n. Did not think so. Anyway he Will not can use yours number if blocked even if temporary \n. @eliasjnior Yes, I made something like that.\n. Great work bro. About iPhone method: Need to be jailbroken?\n. @mgp25 Roger that. \n. @crashforce sou sim.\n. @crashforce Cara, consegui sim. Te mandei um e-mail aew, vamos falar em portugu\u00eas aqui n\u00e3o. Abs.\n. Sorry to intrude. @rodrigofaillace you will be disconnected when connected with another device. In other words: when connect with this API you will be disconnected from phone and vice-versa\n. @dennobaby, My bot works perfect. Can handle a lot of conversations during the day and for days. My doubt is, what the correct frequency of send of these commands? Today I sent pollMessage() every second and the sendPresence every ten seconds. It's okay, or need to be more slowly? It's only estetic, already works as is.\n. @scramatte Well, I imaginated you already have a working code and have a main while as well, then you need to put the $w->sendPresence(); on this loop.\n. @eliasjnior Good hint. But only applies to Android.\n. @mgp25 Oh man, don't do that. Just please ignore those people.\n. @mgp25 Sent you a letter, take a look. ##2600##\n. @mgp25 Thanks man. \n. Same issues here.\n. Compared the tokenmap of the PHP, .NET and Python version of this API.\nhttps://github.com/shirioko/WhatsAPI/blob/master/src/tokenmap.class.php\nhttps://github.com/shirioko/WhatsAPINet/blob/master/WhatsAppApi/Helper/TokenMap.cs\nhttps://github.com/tgalal/yowsup/blob/master/src/Yowsup/Common/constants.py\nThe only difference is in Python. This version is outdated?\n. @GitsUp  I think not. The only times I saw the nickname was when received in the script text-message, image, audio, video and location. \nIncidentally, the application itself does not use this information. Only when you receive a message with a locked screen (iPhone at least), I believe.\n. @eliasjnior You need to send $w->pollMessage().\nI prefer to send before and after every submission.\nDo not forget to sync your number.\n. @eliasjnior  Not sure dude. The only way I was able to receive all messages without problems. I simply used this function within a loop.\nExample:\n``` PHP\n<?php\n$username = '--Don\\'t show your data--';\n$password = '+a0ebPjaQ----eLBxIQBYBzddiDo=';\n$identity = '';\n$nickname = 'Elias J\u00fanior';\n$w = new WhatsProt($username, $identity, $nickname, false);\n$w->connect();\n$w->loginWithPassword($password);\n$msgs = array(\n    array('5---------415', 'http://localhost/whatsapi/wp-content/uploads/2014/09/ComputerDesktopWallpapersCollection718_009-1024x640.jpg'),\n    array('5---------415', 'http://anotherimage.jpg')\n);\nwhile(1){\n    $w->pollMessage();\n    for($i = 0; $i <= sizeof($msgs); $i++){ //I use database queue system. Then here I actually don't use this array.\n        $w->sendMessageImage($msgs[$i][0], $msgs[$i][1]);\n        unset($msgs[$i]);\n        $w->pollMessage();\n    }\n    sleep(1);\n}\n```\nAnd again... Don't forget to sync your number.\n. @eliasjnior One more thing. Not sure, but I think the problem is the fact that you are using a local full patch image (localhost). Try to use the local path or host the image online.\n. @eliasjnior Try send this: http://wallpaper.ultradownloads.com.br/114690_Papel-de-Parede-Paisagem-de-primavera_1600x1200.jpg\n----- EDITED\nSaved the image of link above on localhost server then tryed \"http://localhost/114690_Papel-de-Parede-Paisagem-de-primavera_1600x1200.jpg\" and gave the same error of your.\n. I'm starting to think it's because you have not synced your number.\nSend this command only once. Put it in your script runs once, after that you remove.\nPHP\n$w->sendSync(array('5521900000000'), 'full', 'background');\nChange the 5521900000000 to the number you are trying to send the image.\nMake sure that the number used in your script is on your cellphone contact-list.\n. ",
    "matteocontrini": "Right, I haven't thought about that. Too risky actually...\n. LOL\n. ",
    "Azhturion": "It works! Thanks. Also, you can use Pidgin and the whatsapp plugin for chat on your PC.\n\n. ",
    "sadarshannaiynar": "App is crashing in 4.4.4 android! :(\n. The apk from the link doesnt work! :(\n. Here is the link to logcat output\nhttp://pastebin.com/GQ9nJjpp\n. The app opens and crashes back before displaying anything....\n. GitsUp your link worked thanks! :+1: :D\n. ",
    "NazarAbbas": "Hello Mr. Stefan Smorra,\nI am using libwajava  library in my project according to your code.\nYOUR_NUMBER_WITHOUT_PLUS=MY NUMBER\nPASSWORD_IN_BASE64= PASSWORD (TmF6YXI=(BASE64))\nDISPLAY NAME=MT NAME\nSOME_NUMBER= MY FRIEND'S NUMBER\nfinal WAClient client = new WAClient(\"YOUR_NUMBER_WITHOUT_PLUS\", \"PASSWORD_IN_BASE64\", \"DISPLAY NAME\");\nclient.connect(new WAConnectCallback()\n{\n@Override\n    public void onConnectSuccess()\n    {\n        try\n        {\n            System.out.println(\"Connected :-)\");\n            client.sendMessage(\"SOME_NUMBER\", \"Hey there from libwajava!\");\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n    }\n@Override\npublic void onConnectFailure(Reason reason)\n{\n    System.out.println(\"Couldn't conenct :-(\");\n}\n});\nBut I'm getting error (SOCKET_ERROR) onConnectFailure override method.\nWhat am I doing wrong?\nplease help me.\nthanks in advance.\nNazar\n. can you provide a link of android_libwajava proper repository?\nthanks\nOn Sat, Oct 18, 2014 at 4:34 PM, mgp25 notifications@github.com wrote:\n\nThis is WhatsAPI, ask in its proper repository.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/983#issuecomment-59607644.\n. \n",
    "LukiLeu": "Hi \nI used your apk to extract the password. But when i try to use it in \"Wassapp\", it always mentions that my password is incorrect. Do I have to decode the retrieved password or something similar?\nthanks\n. ",
    "waiferv": "I click on the Extract button but then I only get:\n\"Can't access WA files. Are you root?\"\nDevice is rooted!!!\n. Still \n\"Can't access WA files. Are you root?\" \nwith apk from that guide :(\n. ",
    "cooler-farmer": "Doesn't work android 5.0.2 for me :(\n. @mgp25 it shows \"couldn't read whatsapp files\". \nI granted it root permissions :(\nUsing android 5.0.2\n. ",
    "w00000w5": "thanks mgp25\n. diable wa.PollMessages();\n.  StringBuilder sb = new StringBuilder();\n        sb.Append(\"BEGIN:VCARD\");\n        sb.Append(\"\\n\");\n        sb.Append(\"VERSION:3.0\");\n        sb.Append(\"\\n\");\n```\n    sb.Append(\"TEL;type=WORK;type=pref:0120 6XXXXXX\");\n    sb.Append(\"\\n\");\n    sb.Append(\"item3.URL;type=pref:http://www.google.com\");\n    sb.Append(\"\\n\");\n    sb.Append(\"CATEGORIES:Work, INTERNET\");\n    sb.Append(\"\\n\");\n    sb.Append(\"END:VCARD\");\n  //  return sb.ToString();\nwa.SendMessageVcard(\"99999999\", \"TestUser\", sb.ToString());\n\n. I've the same problem\n.\n   byte[] imgData = File.ReadAllBytes(@\"c:\\1.jpg\");\n    wa.SendMessageImage(\"#########@s.whatsapp.net\", imgData, ApiBase.ImageType.JPEG);\n```\n. ",
    "vlnsnewton": "Dear All.\nI have extracted whatsapp password but from where can i extract identity??\nand can i use these whatsapp password and identity credentials in https://github.com/mgp25/WhatsAPI-Official\nhelp me in this case in am using bluestack \n. Hello All\n@mgp25 i am using 9180102017** number \nfirstly i am using this number with some password it is showing \nnot-authorized \nnode then i use blockchecker.php and it shows number is not blocked and show some password \nand now when i am using this password and typing to send message it is showing following nodes \nchallenge\nresponse\nseccuss\npresence \nnodes i am not able to find where is problem i am having 3 numbers and all numbers having same issue of not sending messages.\nThanx\nyour kind revert expected..\n. ",
    "1337sup3rh4x0r": "on android 5.0.2 I also get \"couldn't read whatsapp files\"\nIs there a solution to this?\n. here is a windows tool that does the same: https://github.com/shirioko/WART\n. ",
    "jharihar": "Hi i am trying to get the password from emulator, it is giving error as cant access wp data. are you root. \nplease help me.. i have the pw file from abd. could u pls extract the password\n. ",
    "freesrc": "\"Extract identity ( I'm on the way people :p )\"\nDo you mean that you are still struggling on getting wa identity?\n. ",
    "francwalter": "Obviously this version, and neither the newer version \"Password Extractor (3)\" doesn't work anymore.\nOn CM12.1 (jfltexx) I get with this and the newer apk, the same error as the others above:\n\nCouldn't read WhatsApp files. Are you\nroot?\n\nYes, clear that I am root.\nAnd I can get the \"pw\" file with adb though.\nBut I wont start to compile the tools because I am afraid this will result in the same.\nIs there now an actual working way?\nThanks. frank\n. What do you mean exactly with:\n\ngetting the password with bash\n\ndo you mean compiling the tools? \n. Yes, but where can I ask about issues with that?\nThis is a wiki not an issue tracker :(\nI read the Extracting password from device and don't understand what is ment with this part (a bash-script):\n```\n!/bin/bash\nTELNUM='99123456789'\nif ! [ -r pw ]; then exit 1; fi\ndd if=pw of=pw_salt bs=1 skip=29 count=4\nhexdump -e '2/1 \"%02x\"' pw_salt\ndd if=pw of=pw_iv bs=1 skip=33 count=16\ndd if=pw of=pw_ekey bs=1 skip=49 count=20\necho -n 'c2991ec29b1d0cc2b8c3b7556458c298c29203c28b45c2973e78c386c395' | xxd -r -p > pbkdf2_pass.bin\necho -n $TELNUM | hexdump -e '2/1 \"%02x\"' | xxd -r -p >> pbkdf2_pass.bin\n```\nIt is not explained in the code, what this does or how it is used. I see that there is a variable TELNUM but I don' understand the \"c2991ec29b1d0cc2b8c3b7556458c298c29203c28b45c2973e78c386c395\" \nWhat is that? Do I need to change it? What do I put there?\nQuestions that I cannot post there.\nEDiT: OK, I understand. I have put an issue #1076 into that wiki about this.\nI ran all these compiling and commands, but I doubt that it works with that unchanged hex. Will try anyway.\nOK this works, nothing to change beside the TELNUM\n. Thank you by the way for this great code!!!\n. Yes. Without root you wont be able to pull:\n/data/data/com.whatsapp/files/pw \nSo witihout root, no password extraction.\n. Strange. I had used whatsapp with the plugin in pidgin, it worked on mobile as well.\nI had extracted the password with this password extractor, which doesn't work anymore on Android 5.1.1\nWith the password and the plugin I could use whatsapp in Pidgin. Only drawback was that the history was not saved in both.\nBut now, after resetting whatsapp (what a mistake, I thought I could get rid of some errors with media player in the log cat) this is gone.\nPassword no more possible to extract\n. ",
    "LavanyaLea": "@francwalter and @mgp25 I can't use the apk including the one I downloaded from https://github.com/WHAnonymous/Chat-API/wiki/Extracting-password-from-device.\nit says \"Couldn't read WhatsApp files. Are you root?\" - same problem that other users have mentioned.\nI am running on Bluestack on Mac.\nTried to use bash, however struggled straight away on this:\n- Once the file has been copied to the SD card, use ADB again to copy it to your computer.\n$ adb pull /sdcard/pw\nit says pw is read only.\n(bash looks terribly complicated to me who's inexperienced. Did anyone manage to get the apk working?)\nthanks!\n. ",
    "Pinazinho": "When I put\n$w->codeRegister('577332');\nObject ( [status] => fail [reason] => mismatch [retry_after] => 122 \n. That means it doesn't function?\n. Could you explain what do you mean?\nexampleFunctional.php is not a guide, it's a php file to show how to \nsend whatsapp messages.\nWe need:\n$username = \"**your phone number**\"; // Telephone number including\nthe country code without '+' or '00'.\nit's clear.\n$password = \"**server generated whatsapp password**\"; // A server\ngenerated Password you received from WhatsApp. This can NOT be manually \ncreated\nwhat's this? the 6-numbers code received by SMS?\n$identity = \"**unique ID generated by WhatsApp client**\"; //\nObtained during registration with this API or using MissVenom \n(https://github.com/shirioko/MissVenom) to sniff from your phone.\nIf I couldn't register, I couldn't obtain this identity. Am I right?\n$nickname = \"**your nickname**\"; // This is the username (or\nnickname) displayed by WhatsApp clients.\nit's clear.\n$target = \"contact's phone number\"; // Destination telephone number \nincluding the country code without '+' or '00'.\nit's clear\n$debug = false; // Set this to true, to see debug mode.\nit's clear\nEl 26/09/2014 16:32, Elias J\u00fanior escribi\u00f3:\n\nWell guys, today I find the problem. Please, read the \nexempleFunctional.php \nhttps://github.com/venomous0x/WhatsAPI/blob/master/examples/exampleFunctional.php. \nFollow this guide to get the SMS from WhatsApp, but rembemer: \nUNINSTALL WHATSAPP FROM YOUR PHONE. I just can get the SMS without \nWhatsApp app in my phone.\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-56969127.\n. Yes, I was trying to register with that file.\nFirst I execute\n$w->codeRequest('sms');\nand I receive an SMS or a Call (I've tried 2 methods) on my phone\n\nbut after, when I put my code (for example 333-333) on codeRegister\n$w->codeRegister('333333');\nand execute the PHP, the page turns blank and nothing happens.\nI don't see any message.\nI'm trying to register a number that has never had whatsapp. May be a \nproblem?\nEl 26/09/2014 17:04, Elias J\u00fanior escribi\u00f3:\n\nSorry, was exempleRegister :P\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/venomous0x/WhatsAPI/issues/986#issuecomment-56973801.\n. Thanks a lot @eliasjnior !\nI've could register and obtained the password. Now I'm configuring these data on exampleFunctional.php\n\n\n\n$username = \"34691______\";                      // Just registered phone\n$password = \"EsKBjFMbRJK________________\";     // Password returned on exampleRegister.php\n$identity = \"\"; // I've registered with empty identity and I keep it empty\n$nickname = \"C____\";                          // Registered username\n$target = \"34658______\";                   // Destination telephone number where I want to receive whatsapp test message\n$debug = true;                                           // I wanna know what's going wrong\n\n\nWhen I execute it, the page doesn't load. It says \"conection reset by server\".\nHave you succeed in sending a test message with this class?\n. Hola @mgp25 , tambi\u00e9n estoy probando http://www.whatsappea.me pero no me env\u00eda los mensajes.\nEst\u00e1 funcionando?\nEst\u00e1 basado en tu WhatsApp-Web-Client, verdad?\nHi @mgp25 , I'm trying http://www.whatsappea.me too but it doesn't send my messages. Is it working?\nIs it based on your WhatsApp-Web-Client, isn't it?\n. I've just achieved it! I'm sending and receiving messages by whatsapp. Now I'm going to try your WhatsApp-Web-Client.\nPlease, could you tell me what do you mean when you say:\n\"Register method has changed and probably soon its going to give you problems :)\"\nYou mean that WhatsAPI isn't going to work soon?\n. ",
    "natsu90": "me neither, tried to register but didnt get any sms. tried using https://coderus.openrepos.net/whitesoft/whatsapp_sms, and got the sms, but got mismatch error.\nedit: sorry, i mean to post this in yowsup. seems WhatsAPI also got the same problem.\n. thanks @eliasjnior it's working. one more question, where do i get identity value?\ni got this when requesting code,\nArray ( \n    [method] => sms \n    [in] => 11*********36 \n    [cc] => 60 \n    [id] => %b1%02%*****************************************c8%04%91 \n    [lg] => en \n    [lc] => MY \n    [token] => tg8d***********************************%3D \n    [sim_mcc] => 000 \n    [sim_mnc] => 000 \n)\nis the id is the identity value?\nedit: added return values\n. alright. thanks a lot @mgp25 :)\n. ",
    "manet80": "I'm the same issue ... will be a solution?\n. \n. Will repair the issue ?\n. Which link the code of this ?\n. me to\n. ",
    "RautNikita": "if I click on request code I get bad token\nCould not request code using either sms or voice.\nSMS: {\"status\":\"fail\",\"reason\":\"bad_token\"}\nVoice: {\"status\":\"fail\",\"reason\":\"bad_token\"}\nplease give a solution\n. ",
    "darrenbehnke": "Have the same issues for registering.\nCould not request code using either sms or voice.\nSMS: {\"status\":\"fail\",\"reason\":\"bad_token\"}\nVoice: {\"status\":\"fail\",\"reason\":\"bad_token\"}\nAre you able to investigate and find a solution please.\nThanks\n. ",
    "shabrej15": "i also got same error \nstdClass Object\n(\n[status] => fail\n[reason] => bad_token\n)\ncan anyone please help me out ?. ",
    "thinkpossible1": "Have the same issues for registering.\nCould not request code using either sms or voice.\n. ",
    "pankajkrpandey": "Subhajit321, I also receive the same error message while register user with WART. Did you find any solution, please let me know.. ",
    "rodrigofsantos": "\nHave the same issues for registering.\nCould not request code using either sms or voice.\n\nyou solve this ?. ",
    "msaudicse": "@mgp25  what's the work around?\n. ",
    "shalintripathi": "How to Get password from registerTool.php all I can see is #################### # # # WA Register Tool # # # #################### Username (country code + number without + or 00): Type sms or voice: The provided phone number is not valid.\nPlease suggest. \nThanks\n. ",
    "leonelrc31": "@shalintripathi It has to be run from the command line: \"php registerTool.php\".\n. ",
    "abhijitsurve": "My Code is but it take too much time to send image on WhatsApp SmartPhone\nImage img = Image.FromFile(@\"E:\\SmartConnectLogo.gif\");\nbyte[] byteImageData;\n        byteImageData = ReadImage(@\"E:\\New folder\\images\\icon1.gif\", new string[] { \".gif\", \".jpg\", \".bmp\" });\n        wa.SendMessageImage(txtPhoneNumber.Text + \"@s.whatsapp.net\", byteImageData, ApiBase.ImageType.GIF);\n. ",
    "fkurkowski": "I've had some trouble registering via API late at night (GMT), not sure if related. Notice that you have to respect the back-off time before sending another request. Usually waiting a few hours before trying again did the trick for me, on a very limited sample.\n. ",
    "denislins": "Yeah, apparently you can only send one request per hour per number. Answering your questions, I did respect that time (once I figured out that this time existed, of course), and I also tried another numbers, so it's a little weird. I sent the requests about 12 hours ago, and they still didn't arrive :( \n. I've seen that, but I don't have an android available. But I wonder: is this tool really the only way? For what I've been reading, the registration via API should work just fine. @fkurkowski and many others were able to register and get the password the \"normal\" way. Why can't I?\n. ",
    "edenalon": "Important: I found a way to get the \"Last Seen\", but it is only updated when the user disconnects from whatsapp. \nI am looking for a way to get the moment it connects, or check whether it is online now.\nThank you!\n. Hi , I tried this script , but I run it on my server without ssh . and I dont know how use it .. installed here : \nhttp://megaupload.co.il/Whatsapp/status/watracker.php\ncan you help me pls ?\nThanks !\n. Also , the output is : \nwithout any \"$presence\" = \"available\" .. you can check it here: \nhttp://megaupload.co.il/Whatsapp/src1/new.php\nThanks\n. I know but I run it on browser with server . I cant use this CLI \n. I cant , I will use it via web and get/post .. you can help me to do it ?\n I can pay you for support me if you wanne - we can talk in email .\n. Maybe a problem on whatsapp servers??\n. ",
    "echoashu": "I think your best bet will be to save that message first as utf8 charset\nand then send it.\nI did this with hindi text earlier.\nMy Approach:\nSave the $msg = $_POST['message']; to database.\n// dont forget to set charset utf8 for that column\nNow request the data from db and send this variable.\nIt might work :-)\nOn Wed, Dec 10, 2014 at 1:55 PM, saurabhnagar notifications@github.com\nwrote:\n\nHow we send arabic language text message through api.\nlike this : \u0647\u0630\u0627 \u0647\u0648 \u0628\u0639\u062b \u0628\u0631\u0633\u0627\u0644\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 .\nI make a script which send english message but when i send arabic language\nthen it show \"????????\" in receiver end.\nPlease tell me this is urgent.\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1008#issuecomment-66418355\n.\n\n\nAshutosh Bhardwaj\nLead - Web & Mobile App Dev\n\nThis e-mail message is strictly confidential. It is intended solely for the\nperson or organization to whom it is addressed and contains confidential or\nprivileged information. If you have received it in error, please notify\ninfo@ardortech.com immediately and destroy this e-mail and any attachments.\nYou must not disclose, copy, distribute or take any action in reliance on\nthis e-mail or any attachments. Views or opinions presented in this e-mail\nare solely those of the author and do not necessarily represent those of\nArdor Tech Ventures.\nArdor Tech Ventures does not accept liability for any data corruption,\ninterception, unauthorized amendment, viruses and delays or the\nconsequences thereof relating to this or any other email. Any e-mail or\nattachment is opened at your own risk.\n. I think yes. the second answer @prajeshmadhavi gave is what i wud need i guess.\nAny way to automate the login process and select the sender and contact based on certain POST or GET input from another web application ? \ni mean in a scenario, when user logins to a web application, it would send him login notification. \nSo it will submit user's registered phone number, message content, and a sender number to be used with that to whatsapi, and i wud be able to grab that and process the message.\n. If i'm not mistaken, this is ur thread right? \nhttps://github.com/venomous0x/WhatsAPI/issues/800 \n. No not with contact sync without number and password, since it emulates the real device behavior as in try to log in, and sync the contact with whatsapp like you do in real device.  :-)\n. you can refer to this issue \nhttps://github.com/mgp25/WhatsAPI-Official/issues/192#issuecomment-66620444\n. Does this apply in ur case ?\nhttps://github.com/mgp25/WhatsAPI-Official#update-october-7th-2014\nOr This \nhttps://github.com/venomous0x/WhatsAPI#note-july-30th-2013 ?\n. This has nothing to do with api i guess.. \nuse utf8_unicode_ci  collation in message column of ur db.  :-)\nYou can refer to this also http://dev.mysql.com/doc/refman/5.0/en/charset-mysql.html\n. I had synced around 500 contacts once. I had no issues :)\nAlthough few of them were not on whatsapp.\nAnd you can sync the array of numbers all at once, or each time you have new numbers .. anyway you want\nbut $number is of array format.\n. ",
    "thiagupct": "Possible reasons: \nYour IP Address should be blocked at Whatsapp servers\n    -Try with another IP \nYou mistook some error as My number is blocked\n    -Post your error code, so we can resolve\n. https://play.google.com/store/apps/details?id=com.smorra.passwordextractor \nAnother way of extracting password was to use above link. All you need is a rooted Android. \njavascript\nconnected to WA server\nLogged in to WA server\n91*********@s.whatsapp.net-available\n91*********@s.whatsapp.net-available\n91*********@s.whatsapp.net-composing\n91*********@s.whatsapp.net-paused\n91*********@s.whatsapp.net-composing\n91*********@s.whatsapp.net-paused\n. ",
    "fermino": "@mgp25 Do I send this pull request in that repository?\n. ",
    "morfie4pc": "thanx :)\n. ",
    "ayswaryaprsd": "Ok thank you.. :) \n. any solution?\n. ",
    "sankar-nyros": "@mgp25  Thanq very much... It's working perfect.\n. ",
    "mustaqim313": "@abdulla2013 They won't teach you how to code the scripts here!!\n. ",
    "technocode": "running around 150 numbers? you are spammer!\n. ",
    "alijundi": "@mgp25 can you please direct me to the correct link for my exact problem. Thanks\n. @mgp25 I am using the C# version and I already tried to call the function correctly as described with no success. any insights?\n. ",
    "vivekanandan31": "dear friends,\ni am getting success while sending messages from the source WhatsApp a/c to any other accounts.\nwhile receiving messages from other users who send via client app, i am getting two types of response\n1. message from=\"*_@s.whatsapp.net\" id=\"1418718067-465\" offline=\"0\" type=\"text\" t=\"1418783950\" notify=\"Vivekanandan K\">\u00a0\u00a0body>Yeah /body> /message>\n2. message from=\"_*@s.whatsapp.net\" id=\"1418654969-87\" type=\"text\" t=\"1418784058\" notify=\"kumarm885\">\u00a0\u00a0enc v=\"1\" type=\"pkmsg\" av=\"Android/2.11.476\">3\b\u031c\u0507\u0012!\u0005\u0019p\u04ca    \u03dbu3\u0096\u0124b6\u02e0\u010e\u03da\u031e.d\ufffd\ufffdV\u0004\u001a!\u0005:\u0439\u02be\u03a8\u0244\udafe\udf24!\u0212K\u0202#|\u0097e_\u0740\u02a8P\"B3\n!\u0005\ud97d\udd8c=?b\n8]ku\b\u043c9\"\u07f6\u0362$fJdy\u0004\u0821\ufffd\ufffd\u0018 \"\u0010\u0016\u06440\u001a\u0572\u0303\u016e8Ow\ufffd\ufffd\ud9e1\udec0\f(\ud91a\udf730 /enc> /message>\nRegarding #1, i am using that a/c for testing from the beginning and i am getting proper messages\nMeanwhile #2 is a new and getting encrypted messages\ni am using the latest source code from this repository\nplease advice\n. ",
    "rohantk": "Any solutions on how to decrypt messages from Android Devices? I am using WhatsAPINet.\n-Regards,\n. ",
    "dahansi": "Great, thanks! That's working now :)\nI tried setting up a little broadcast with my friends (4 numbers only), because if I use the normal sendMessage it takes too long until the last one gets it (~ 1 Minute).\nTo send a broadcast I do  this:\n1. Login\n2. sendClientConfig\n3. sendGetServerProperties\n4. while(pollMessages)\n5. sendSync\n6. sendBroadcastMessage\n7. while(pollMessage)\nOne of my friends is receiving the message, the other 3 (and me) are not getting anything.\nsendSync says, that the number exists. I dont get any error.\nI call it like:\n$msgs = \"Hello\";\n$nrs = array(\"49123456789\",\"49123456987\",\"49123456788\",\"49123456777\");\n$this->w->sendBroadcastMessage($nrs,$msgs);\nCan you help me again, please?\nThanks!!\n. @mgp25  I'm using your API. The error occurs there.\nDo you want me to start a new issue at yours?\n. @mgp25 Yes, I know, I read it and I did it the same way. But I dont get any messages. \nIf I call onBroadcastLists($nr,$lists),  I get every broadcast I started. \nBut I never received any message :(\n. @mgp25 \nI do sync it (https://github.com/venomous0x/WhatsAPI/issues/1050#issuecomment-67169577):\n$nrs = array(\"49xxx\",\"49yyy\");\n$this->w->sendSync($nrs);\n$this->w->sendBroadcastMessage($nrs,$msgs);\nI tried creating a group and that worked and sending a message there worked, too ($this->w->sendMessage(\"xxx-xxx\",$msgs);)\nI just cant get the broadcast to work -.-\nThank you so much for all your help!!\n. The contacts have me saved in their contact list.\nThey tried sending a Broadcast to my number and that worked. \nSo I think they are synced?\nHow else can I sync a number on the smartphone?\n. ",
    "new-user1": "Or you may email me at andy_wong151@hotmail.com\n. May i know anyone can help to solve the problem of being blocked due to \" old version \"  ??\n. http://2014.apps.mobioo.com/getwhatsappcode/login_user.php\nDont register here, they will steal your data and resell to others for spamming purposes. \n. ",
    "hemantganjure": "I also faced the same problem\n. I used the api and till I  does not get sms or call. \n. ",
    "mmmaaammm": "\u0627\u0646\u0627 \u062c\u062f\u064a\u062f \u0645\u0627 \u0627\u0639\u0631\u0641 \u064a\u0627 \u062e\u0648\u0643 \u0644\u0648 \u0627\u0639\u0631\u0641 \u0627\u0628\u0634\u0631 \u0628\u0627\u0644\u062e\u064a\u0631 \u0628\u0633 \u0627\u0644\u0631\u0628\u0639 \u0645\u0627 \u064a\u0642\u0635\u0631\u0648\u0646 \u064a\u0636\u0628\u0637\u0648\u0646\u0643\n. ",
    "ahmdoooh": "\u0645\u0627\u0639\u0631\u0641 \u0627\u062d\u062f \u064a\u0627\u0644\u063a\u0644\u064a \u062f\u0644\u0646\u064a \u0639\u0644\u0649 \u0627\u062d\u062f \u064a\u0639\u0631\u0641 \nDate: Tue, 23 Dec 2014 06:29:15 -0800\nFrom: notifications@github.com\nTo: WhatsAPI@noreply.github.com\nCC: a777c@hotmail.com\nSubject: Re: [WhatsAPI] \u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645  (#1060)\nWhat's That????\nEl 23/12/2014 13:30, \"mmmaaammm\" notifications@github.com escribi\u00f3:\n\n\u0627\u0646\u0627 \u062c\u062f\u064a\u062f \u0645\u0627 \u0627\u0639\u0631\u0641 \u064a\u0627 \u062e\u0648\u0643 \u0644\u0648 \u0627\u0639\u0631\u0641 \u0627\u0628\u0634\u0631 \u0628\u0627\u0644\u062e\u064a\u0631 \u0628\u0633 \u0627\u0644\u0631\u0628\u0639 \u0645\u0627 \u064a\u0642\u0635\u0631\u0648\u0646 \u064a\u0636\u0628\u0637\u0648\u0646\u0643\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1060#issuecomment-67946492\n.\n\n\u2014\nReply to this email directly or view it on GitHub.\n. Please break this code\nb64ad021e24e531a11755fdb822ca841WaUlti\n. ",
    "sewerside": "hmm.. I have found the solution myself, thanks for the tips. Yes indeed it was issue with PHP side, not WhatsAPI side. My bad.\nMay close this, thanks!\n. ",
    "boxim": "Ok thanks..\nbut how many contacts can I have linked to my phone number on whatsapp server? What happens if I link another 1500?\n. I answered it myself in here:\nhttps://github.com/mgp25/WhatsAPI-Official/wiki/WhatsAPI-Documentation#reply-nodes\n. Hi everyone,\nI have found a solution to the problem:\nhttp://2014.apps.mobioo.com/getwhatsappcode/login_user.php\nThis website allows you to register multiple phones after registration..\n. ",
    "MohammadAhmed": "me too\n. @tabetramy  I need this API too. added you ramy :)\n. ",
    "pardovimes": "i'm experiencing the same problems :(\n. i'm experiencing the same problems :(\n. ",
    "karam89": "any suggested solution?\n. listen to onGetError\n. me too\n. ",
    "yanelev": "Thanks for you reply, can you please state which IP and where to change.\nCheers\n\nOn 5 \u05d1\u05d9\u05e0\u05d5 2015, at 01:52, Jesse notifications@github.com wrote:\nTry a different IP, that's how I get rid of the fail / no_routes object.\nOnly, I'm still not getting a text message or call with a code :(\n\u2014\nReply to this email directly or view it on GitHub.\n. Is it possible for you maybe to share how you decrypted the pw.bat file?\nA short procedure will be nice. \nThanks\nOn 8 \u05d1\u05d9\u05e0\u05d5 2015, at 21:09, Jesse notifications@github.com wrote:\nMy solution was to register my phone number via the official WhatsApp mobile client (app) and find the password on my iPhone and use that. (pw.dat file, that's the file where your password is stored (encrypted))\n\u2014\nReply to this email directly or view it on GitHub.\n. That will be super for me and for sure many others, iPhone is perfectly fine. \n\nThanks\n\nOn 9 \u05d1\u05d9\u05e0\u05d5 2015, at 13:36, Jesse notifications@github.com wrote:\nIf I have time left today i'll take a look to write a quick and simple 'tutorial' thing hoe you can easily grab your whatsapp password on iPhone (note: I have an iPhone so I don't know how this works on Android but I think more or less the same) \n- Jesse \n\u2014 \nSent from Mailbox \nOn Fri, Jan 9, 2015 at 7:44 AM, bitbitbit notifications@github.com \nwrote: \n\nI got the same issue! would like to get the pw for wtsapp too!! thanks!!\nReply to this email directly or view it on GitHub: \nhttps://github.com/venomous0x/WhatsAPI/issues/1074#issuecomment-69299447\n\u2014\nReply to this email directly or view it on GitHub.\n. cool. thx\n. \n\n",
    "bitbitbit": "I got the same issue! would like to get the pw for wtsapp too!! thanks!!\n. thanks @vigiman !!\nOne note, I succeed in getting the 6 digits code with voice rather than sms~ :-)\n. I used yowsup to get the password, WART not working for me. I guess perhaps the MNC and MMC code are missing in the registration in WART, causing the problem :-0\n. ",
    "nephilim1973": "It is not necessary to extract password...\nJust use YowSup for registration.\nhttps://github.com/tgalal/yowsup\nWorks like charm.\n. ",
    "gersonfaf61": "Thanks a lot, Jesse!!! Greetings from Brazil!\n. ",
    "nayaenndu": "Without having in contact list, is there any solution to make the url clickable ? \n. ",
    "vigiman": "everything is active if your number is already registered, but there is a problem to register new numbers in the last couple of days.\nunfortunately my developer number got blocked while testing large amount of messages (of course not for abusing purposes - but to connect with large amount of user requests at once) \npersonally i have yet not found any solution but iv'e been told to try:\nregister trough:\nhttps://github.com/tgalal/yowsup\ni can see the registration files was updated 7 days ago\nuse an i-phone to workaround like explained 2 days ago:\nhttps://github.com/mgp25/WhatsAPI-Official/issues/273\nit seems like same logic should work on android, but someone with better understanding of that area should explain how \nplease, if anyone succeed with one of the above (or differently) please let me know exactly how you did it, i'm also trying to figure things and will write here any update \n.  @mgp25 thank you, i've sent an email to the address shown at your profile\n. my solution - worked:\nasked for an id using wart\nasked for a password using yowsup\nput both in the whatsapi class i use\nworked :+1: \n. i guess it can work with different tools other than wart but that worked out for me as simple as possible:\nhttps://github.com/shirioko/WART/blob/master/WART-1.7.2.0.exe using the latest wart (which should be updated again since it didn't fulfil it whole purpose) \ni typed the phone number with country code\nand pressed on the ID button\ngot an id\nsaved it and erased the %'s from it\nhttps://github.com/tgalal/yowsup\nthen i've installed yowsup (python library) and executed:\nyowsup-cli registration -m MCC -n NMC -p CCCXXXXXX --cc CCC -r sms\nXXXXXXXXX = your phone number\nCCC= your country code\nmcc= mobile country code\nnmc= network mobile code\nyou should know the first two, the other two can be taken from \nhttp://en.wikipedia.org/wiki/Mobile_country_code\nthen you get an sms with a 6 digits code we call  it **\nexecute:\nyowsup-cli registration -m MCC -n NMC -p CCCXXXXXX --cc CCC -R ****\nthen you should get something like this:\nINFO:yowsup.common.http.warequest:{\"status\":\"ok\",\"login\":\"CCCXXXXX\",\"pw\":\"YOUR PASSWORD\",.........\"\nnow use the pw from yowsup and the ID from wart in your scripts as shown for example in the demo:\nhttps://github.com/mgp25/WhatsAPI-Official/blob/master/examples/exampleFunctional.php\n$username = \"your phone number\"; \n$password = \"server generated whatsapp password\";     //  pw\n$identity = \"unique ID generated by WhatsApp client\"; // ID (without %)\n$nickname = \"your nickname\";                         \nhope it will work for you too\nenjoy \n. @bitbitbit  you welcome =]\n@moosaviamir have you tried using yowsup registration with voice? some have local issues with sms.\n. @moosaviamir i am not a python expert myself, if you really cant get it to work after learning basic syntax and following the docs email me \n. dont really need to sign up or log in trhu database , login leads to -\nhttp://2014.apps.mobioo.com/getwhatsappcode/insert_phone.php\ndont know if it works but it seems like this site also uses yowsup\nhttp://2014.apps.mobioo.com/getwhatsappcode/\n. more urgent - after whatsapp offical web client realse it seems like every number that being logged thru the api is bein blocked, even after wart registration got fixed\nanyone know whats happening??\n. ok thanks ill try comparing the code i use and the recent whatsapi official (i am not talking about registration but about sending messages after whatsapp changes that was made today)\nyour tool watools.es still aint working btw, but wart is good now\n. you were right\nthis is my last message in this issue\nEVERYONE MOVE TO WHATSAP API OFFICIAL\n. ",
    "diegodalbosco": "I have the same problem\n. I migrated to https://github.com/mgp25/WhatsAPI-Official and I have the same problem. Is there a solution?\n. ",
    "Pudins": "Is difficult the solution\n. @mgp25 My problem is precisely {\"status\": \"fail\", \"reason\": \"no_routes\", \"retry_after\": 3600}, there is already a solution?\n. First I'm sorry for the delay! Now yes this all working perfectly. Grateful for your help @mgp25 \n. Now yes this all working perfectly. Grateful for your help @mgp25 \n. ",
    "Cool76": "trace error on whatsprot.class.php on line 480\nbut i have comment on google email login . \nthanks for help\n. ",
    "memarius": "How did you solve this problem?\n. ",
    "gabrielmartix": "If you dont want use contact lists, as a workaround, comment lines 1036 - 1038.\n. You will get your number banned for spamming in less than one day.\nYou must use broadcast feature and the destination need to have your number on contacts to receive the msg\n. ",
    "pwnkmrsh": "Hi, I got this Error: There was an error with the AJAX request. XML/Json format is bad.\n . ",
    "jacoboliveira": "ok\n. Ok thanks\n. guys could already solve was an error in the version of whatsapp. Version whatsapp. \n. ok thanks!!!\n. ",
    "rcetrangolo": "That feature should be very useful.\nWe can add others to our contact list by sync function, right? but if could check if other has our phone number as a contact we can prevent blocking.\nThanks\n. ",
    "tabetramy": "add me on skype tabet.ramy i can help \n. ",
    "nirmalmedicare": "Is this API available?\n. ",
    "techcare2u": "Thank you :)\n. ",
    "DavidBE1": "Thanks,\nThat is a php project, is there no .net project any more ?\nThanks\nDavid\n. ",
    "hablas": "you can send the text as a caption\nsearch for \" caption \" in the wiki\n. ",
    "atfo90": "@mgp25 tyvm. Its working now.\n. ",
    "vishvodhay": "Is commenting out the relevant print_r and echo the only solution as I didn't find any other way to do it?\n. Loops like I opened the issue on a wrong forum. Moved it to the right one\n. ",
    "skywinder": "Oops, it's not works, since there is no version tags in you repository. Sorry.\nBut if you add tags for yours releases, you can automate change log generation with easy.\n. ",
    "vaibhavvpatil": "i got this error while using contactsync.php on wamp\n. ",
    "AhrimanSefid": "PHP Fatal error:  Cannot redeclare ExtractNumber() (previously declared in C:\\Inetpub\\vhosts\\yekia.ir\\app.yekia.ir\\src\\func.php:29) in C:\\Inetpub\\vhosts\\yekia.ir\\app.yekia.ir\\func.php on line 32\n. Plz Help Fixed.\n. ",
    "kokoalawi": "I need video or something like that ....... because when i request code i get nothing ............, can i get the software is completed .... \n. Thanks a lot , i found it ..\n. ",
    "abhayendra": "hi \nuse this code but not work show error \nError: There was an error with the AJAX request. XML/Json format is bad.\nand  on request response return \nNotice: Undefined index: id in E:\\www\\htdocs\\api\\examples\\whatsapp.php on line 321\n{\"success\":false,\"type\":\"contacts\",\"errormsg\":\"\"}\n. use this repo but also show this error \ntx  stream:features\ntx    \ntx    \ntx    \ntx    \ntx  /stream:features\ntx  \nrx  \nrx  stream:features/stream:features\nrx  c\u0161\\\u00c2\u00c3\u00cb\u0160\u00c1o\u00d06\u00bbjt\u00ab\u00ae\u2013\u0012$\u0090\ntx  \u00dd`g\u00f1\u0081kw\u00be\u00cc\u00a3\u00f0\u00f51\u00f1\u00b1\u000b\u00e3\u00eb$\u00a8\u00a7\u00f2/\u00ac \u00cc \u00e0\u00c6X1\u00f0\u00c8B7)\nrx  \nrx    \nrx  \nFatal error: Uncaught exception 'LoginFailureException' in E:\\www\\htdocs\\api\\src\\whatsprot.class.php:2304 Stack trace: #0 E:\\www\\htdocs\\api\\src\\whatsprot.class.php(562): WhatsProt->doLogin() #1 E:\\www\\htdocs\\api\\index.php(8): WhatsProt->loginWithPassword('wQv94uokWkMwKB8...') #2 {main} thrown in E:\\www\\htdocs\\api\\src\\whatsprot.class.php on line 2304\n. ",
    "Wuuuz": "Can it be, that there is a problem with the registration? I registrated my number, status ok, but i can work on my mobile phone any more. \nSo is there a registraion problem?\n. Here some more details:\nWhen I request a code, this is sent:\nArray ( [in] => 157527xxxx [cc] => 49 [id] => | \u00ba\u2021a\u00d8;#s\u00cb9,>\u00d34|\u0090\b,\u008f [lg] => de [lc] => DE [sim_mcc] => 262 [sim_mnc] => 000 [method] => voice [token] => e7b86212dbbd6802a300d1a5612a83ae ) stdClass Object ( [status] => sent [length] => 6 [method] => voice [retry_after] => 82805 ) \nWhen I register a code, I get a blank website.\nNow when i open my codeRequest.php, i get this:\nArray ( [in] => 157527xxxx [cc] => 49 [id] => | \u00ba\u2021a\u00d8;#s\u00cb9,>\u00d34|\u0090\b,\u008f [lg] => de [lc] => DE [sim_mcc] => 262 [sim_mnc] => 000 [method] => voice [token] => e7b86212dbbd6802a300d1a5612a83ae ) stdClass Object ( [status] => ok [login] => 491575xxxxx [pw] => OmmAcKjEvxxxxx [type] => existing [expiration] => 1461094518 [kind] => free [price] => 0,89 \u00e2\u201a\u00ac [cost] => 0.89 [currency] => EUR [price_expiration] => 1432720295 ) \nWhen i now want to send a message, I get a blank site, too :(\n. ",
    "AhmedRaffat": "no no no source code is not public and you know that you only add .exe file without source code (WhatsAppApi.dll) is missing and old version you only add .exe file without update source code\nYou need to learn more\nBest regards\n. @thiagosantos Trojan.Win32.Generic! - Win32: Malware-gen \nplease see this link : https://www.virustotal.com/ru/file/78378d686853cf1a089bada07966483ab470c3fb840b6e53035fca0fd3c1882c/analysis/\n@mgp25 play with us and block me\n. i need to ask all developer use @mgp25 API have you ever thought what @mgp25 winning from this business\nLOL Very soon all we will be known\nBest regards\n. @mgp25 please be cool \n. ",
    "khaledway": "@mgp25  I try to download the source code and i cant , can you help me and provide direct link to the source code ?\n. ",
    "tilcampo": "i  trying but the password is wrong :/ another method or example ?\n. ",
    "sadiqhirani": "i didn't checked that but while i was testing v2 i got error in registering number i got response\n{\"status\" : \"fail\" , \"reason\" : \"old_version\"}\ni used both methods sms as well as voice\n. i just mean to say that v2 will be no more (very soon)\n. ok thanks bro...\nby the way there are much resps which are distributing same and same stuffs so i got a bit wired but thanks now i will update my resp.\n. ",
    "abhimanyu1310": "No. But I will be happy to hear if someone have.\nRegards : Abhimanyu Sharma\nSARV\u2122\nGlobal Phone: +44 141 4166 6666\nUSA/Canada TollFree: 1-888 987 2698\nIndia TollFree: 1-800 102 7278\nw: www.sarv.com\nOn Sun, Aug 16, 2015 at 2:36 PM, atulrungta notifications@github.com\nwrote:\n\nHello Abhimanyu.. Did you get any solution for same?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1146#issuecomment-131505268\n.\n. \n",
    "gremlin1970": "show your code!\n. ",
    "biru121": "hello..\nplz give me only \"API\" and you have any script in php , so plz give me..\ni have found this API\nhttps://v.whatsapp.net/v2/exist?in=9560965937&cc=+91\nbut this API is not working.\n. ",
    "leopr33t": "My GF cheat me pls help to check her whatsapp history plsssss\n. ",
    "rafaelfoster": "@leopr33t this page is not a hacking whatsApp page. It's (was) hosting the API Code to implement WhatsApp as you wish.\nIf you don't know whats is an API, or even a Code, you're in the wrong place.\n. ",
    "vanchonngo": "Me too. Any body help.\n. ",
    "abu-sraag": "me to -_-\n. ",
    "RullyLukita": "thanks MGP25...\n. ",
    "FarVision": "hahaha.. :+1: \n. ",
    "shivaburade": "if i have defined onGetMessage event, so will it be called automatically when when i use pollMessage because poll message returns all the new message \nfunction Message($mynumber, $from, $id, $type, $time, $name, $body)\n{\necho \"Message from $name:\\n$body\\n\\n\";\n}\n$w = new WhatsProt($username, 0, \"WhatsApp Messaging\", true); //Name your application by replacing \"WhatsApp Messaging\"\n$events = new MyEvents($w);\n$w->eventManager()->bind(\"onGetMessage\", \"Message\");\n$w->connect();\n$w->loginWithPassword($password);\nwhile($w->pollMessage());\n. in documentation i found one event called OngetMessage and one function getMessages()?\nif i use getMessages() will it call the ongetMessage or not?\npollmessage() and getmessages() which one is used to bind ongetMessage event?\ni think pollmessage() returns only one new message whereas getmessages() returns the array of all new message?\n. ",
    "kirilydk": "You just need to send a ping to whatsapp. It\u00b4s servers log you off after a timeout of 300 seconds.\nJust initialize a new thread that sends a ping every random number between 100 and 300 seconds.\n//Declaring thread\n   private Thread threadPing;\n   private volatile bool pingIsRunning = true;\n//Method that sends ping\n   private void ThreadPing()\n   {\n      while(pingIsRunning)\n      {\n           Random random = new Random();\n           Thread.Sleep(random.Next(100000, 300000));\n           WhatSocket.Instance.SendPing();\n        }\n   }\nThen start the thread when you logg in\nthis.threadPing = new Thread(new ThreadStart(ThreadPing));\n. WhatSocket.Instance.OnGetMessage += OnGetMessage;\n. You can sync up an array with around 10.000 contacts, when you go beyond 15.000 in one sync it failed getting all the numbers. With those 10.000 contacts it takes around 30-40 seconds to process.\nAnyways, there are different modes of SendSync:\nFirst Sync (Registration) - First time you sync\n$myContacts = array('123456789', '987654321');\n$w->sendSync($myContacts, null, 0);\nDelta Sync (Addind contacts) - Next times you sync (it adds users incrementally)\n$newContact = '123456789';\n$w->sendSync($newContact);\n. https://github.com/mgp25/Chat-API-NET\nHere\u00b4s where I got to learn how it works to develop my app. There\u00b4s only code for registering, and for sending messages, to receive messages or contacts sync you must:\nWhatSocket.Instance.OnGetMessage += OnGetMessage;\n            WhatSocket.Instance.OnGetSyncResult += SyncResult;\nFirst one gets messages, second adds number to your contact list. Also as you will see in the example, you must have running .PollMessages(); in a background thread.\nI hope it helps you.\n. ",
    "ivanlewis": "Ok Thank you so much.\nMy second question is Why there is need to use\n                    while (wa != null)\n                    {\n                        wa.PollMessages();\n                        Thread.Sleep(100);\n                        continue;\n                    }\n. ",
    "adams99": "Thank to replay. But I cant find any thing like this issue un the wiki.may be you didnt uderstand me. I want to detect if account whatsapp with number  user subscription added my sender number to list contacts. \n. Thanks. \n. ",
    "rewq112233": "966559994890\n. 0559994890\n. ",
    "urfrndsandy": "@chandukKK did you get it working buddy?\n. ",
    "anitg": "Started working all by itself again !\n. ",
    "K66K99F": "This is my code, please make sure everything is correct, I wrote?\n php\nrequire_once 'src / whatsprot.class.php';\n$ id = \"...\"; // my id\n$ username = \"...\"; //My phone number\n$ nickname = 'Kurban'; // My nickname\n$ password = '...'; //password\n$ debug = True;\n$ log = true; //\n\n<prequire '/src/events/MyEvents.php';\n\u00a0\n$ w = new WhatsProt ($ username, $ nickname, $ debug, $ log); // Name your application by replacing \"WhatsApp Messaging\"\n$ events = new MyEvents ($ w);\n$ events -> setEventsToListenFor ($ events -> activeEvents);\n$ w -> Connect ();\n$ w -> loginWithPassword ($ password);\n\u00a0\n// Create an instance of the class registration\n$ r = new Registration ($ username, $ debug);\n$ r -> codeRequest ('sms');\n$ target = '...'; // Trust telephone, receiving\n$ message = 'Your message comes here'; // message\n\u00a0\n$ w -> sendPresenceSubscription ($ target); // Please send user presence\n$ w -> SendMessage ($ target, $ message); // Send a message\n?>\n. ",
    "douweyntema": "Same issue to me.\nIn other forums people say PHP version must be >= 5.3  Mine is 5.3.29\n. ",
    "ghufaili": "Dear kirilydk, \nCould you please provide me with the API of WhatsApp ?\nPlease send it to me at haya.alghufaili@outlook.com\nMany thanks\n. ",
    "fares-coder": "I am also have same issue .\nI cannot get msg !\nI knows some one use this api . But it's working very well !!\nAnd when I send to him by android it showen 2 ticks .\nWhat is the problem ?\nCan you help us about this ?\nBest regards \n. @shirioko @mgp25 \n. ",
    "erhan-": "I understand that this is for spam campaigns. It sounds so easy, why not just do it yourself?\n. ",
    "cyberp1983": "I don't have enough knowledge. It is better to entrust it to the professionals\n. ",
    "s4mpl3d": "What's the problem here?\nOn Feb 20, 2016 4:50 PM, \"matramlee\" notifications@github.com wrote:\n\n<?php\nrequire_once 'src/whatsprot.class.php';\nrequire_once 'src/events/MyEvents.php';\n//require_once 'src/Registration.php';\n$username = '60123456789'; // Your number with country code, ie:\n34123456789\n$nickname = 'Unknown'; // Your nickname, it will appear in push\nnotifications\n$debug = true; // Shows debug log, this is set to false if not specified\n$log = true; // Enables log file, this is set to false if not specified\n$password = \"12312312312312312312312\";\n$w = new WhatsProt($username, $nickname, $debug, $log);\n$events = new MyEvents($w);\n$events->setEventsToListenFor($events->activeEvents);\n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->connect();\n$w->loginWithPassword($password);\nwhile ($bulian){\n$w->pollMessage();\nif ($message_received==\"hello\") {\n$target = $message_received_number;\n$message = 'Hello to you too';\n$w->sendMessage($target_group , $message);\n}\n}\n?>\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1198.\n. \n",
    "derN3rd": "You are trying to bind an event \"onGetMessage\" to a function called \"onMessage\" but you did not define the function.\nThe onGetMessage event is defined like this:\nonGetMessage( $mynumber, $from, $id, $type, $time, $name, $body )\nYour code should look like:\n```\n<?php\nrequire_once 'src/whatsprot.class.php';\nrequire_once 'src/events/MyEvents.php';\n//require_once 'src/Registration.php';\n$username = '60123456789'; // Your number with country code, ie: 34123456789\n$nickname = 'Unknown'; // Your nickname, it will appear in push notifications\n$debug = true; // Shows debug log, this is set to false if not specified\n$log = true; // Enables log file, this is set to false if not specified\n$password = \"12312312312312312312312\";\n$w = new WhatsProt($username, $nickname, $debug, $log);\n$events = new MyEvents($w);\n$events->setEventsToListenFor($events->activeEvents); \n$w->eventManager()->bind(\"onGetMessage\", \"onMessage\");\n$w->connect(); \n$w->loginWithPassword($password);\nonMessage( $mynumber, $from, $id, $type, $time, $name, $body ){\n  $message = 'Hello to you too';\n  if ($body==\"hello\") $w->sendMessage($from , $message);\n}\nwhile (true){\n$w->pollMessage();\n}\n?>\n```\nAnyway you should have a look here: https://github.com/mgp25/Chat-API/wiki/WhatsAPI-Documentation\n. ",
    "ciclanoio": "Solved. Thanks.  SMS delay only.\n. ",
    "mfadzil": "Im sory, i cant..im not the expert, just newbies..\nOn Apr 11, 2016 5:46 PM, \"Adnan Siddiqi\" notifications@github.com wrote:\n\n@alishan305 https://github.com/alishan305 Did you get the answer?\n\u2014\nYou are receiving this because you are subscribed to this thread.\nReply to this email directly or view it on GitHub\nhttps://github.com/venomous0x/WhatsAPI/issues/1202#issuecomment-208259808\n. Im sory, i dont really understand what is ur question, i have no idea what is that, i am newbie only, im also looking for an answer how we can check someone chatting trough whassap log, i only see inside log a link to whatsapp.net and last seen but i dont know what is the function log, im really appreciate if someone can teach how to secret spy my wife trough whatsapp log\n. \n",
    "lnx05": "Same. \nBut on the phone works !! That is not in a SIM-number problem!\n. ",
    "jordynegen11": "Same problem here.\n. ",
    "henkvalk": "WhatsApp has launched an update for end-to-end encryption\n. ",
    "or416": "Hey @adnan2211 did you fix it? aprreciate a little help here :)\n. ",
    "Sinnercito": "Hi, I 'm having the same problem, I read the wiki but not if they are actually the numbers of my country . Someone is working for you ?\nEDIT: I read the wiki and I think the problem was trying to send a essage without sync contacts ... can someone dicir me if this is so ?\nPD: perdon pero no puedo escribie bien en ingles... si leerlo SRY!!! \n. ",
    "pumamammal": "Hello, arkmar99!. I need the API too. can i get it from you. It has been removed from this Git. my mail address pumamammal@gmail.com. Thanks\n. ",
    "mikif30": "The snapshot is kind of image...\n. ",
    "hazemmatouk": "the problem is there is a domain (s.whastapp.net) has been stopped by WhatsApp, so you need to alternative domain to login through to WhatsApp. if got this domain, kindly shard with us\n. the response of tracert s.whatsapp.net: Unable to resolve target system name s.whatsapp.net, but there is a response of tracert e2.whatsapp.net.\n. ",
    "lexs2kari": "I have the same problem.\nI looked for yowsup lib for python and it works. It still use the domain \"s.whastapp.net\" also have some endpoints.\nENDPOINTS     = (\n        (\"e1.whatsapp.net\", 443),\n        (\"e2.whatsapp.net\", 443),\n        (\"e3.whatsapp.net\", 443),\n        (\"e4.whatsapp.net\", 443),\n        (\"e5.whatsapp.net\", 443),\n        (\"e6.whatsapp.net\", 443),\n        (\"e7.whatsapp.net\", 443),\n        (\"e8.whatsapp.net\", 443),\n        (\"e9.whatsapp.net\", 443),\n        (\"e10.whatsapp.net\", 443),\n        (\"e11.whatsapp.net\", 443),\n        (\"e12.whatsapp.net\", 443),\n        (\"e13.whatsapp.net\", 443),\n        (\"e14.whatsapp.net\", 443),\n        (\"e15.whatsapp.net\", 443),\n        (\"e16.whatsapp.net\", 443),\n        )\nI don't know how to use this on the chat-api code.\n. ",
    "desrajk": "Hi \nAnyone please help. i can't loginWithPassword. its continue loading..\nI don't know . what happening there.. ",
    "MonteCristo125": "############## # # # WA Register Tool # # # #################### Array ( [cc] => 79 [in] => 854641543 [lg] => ru [lc] => RU [id] => \ufffd\ufffd4\ufffdf&\ufffd\ufffd\ufffd\ufffd\ufffdl?\ufffd\b\ufffd\ufffd`\ufffd\ufffd [token] => 8tOVyls7c3QYNzE5hYJetLStHlI= [mistyped] => 6 [network_radio_type] => 1 [simnum] => 1 [s] => [copiedrc] => 1 [hasinrc] => 1 [rcmatch] => 1 [pid] => 4760 [rchash] => 2a9db28b995a704c09414d5dc6fd3327a0b9955f75c6ffedcfd7b89487bc0e42 [anhash] => 5847b0b2887b6d8f6bebd8dc993e60ed [extexist] => 1 [extstate] => 1 [mcc] => 250 [mnc] => 000 [sim_mcc] => 250 [sim_mnc] => 000 [method] => sms ) stdClass Object ( [login] => 79854641543 [status] => fail [reason] => bad_token ) There was a problem trying to request the code..",
    "tomasdev": "lol... seriously. ",
    "yeka": "I would like this PR to be merged. ",
    "carlositos": "Hi! \nI have the same issue. Does anyone fix this?. ",
    "alissonpelizaro": "Just put the following sentence at the top of the your code:\nset_time_limit(600);\nIt's changes the time-out to 10 minutes...\n. ",
    "ametkiy": "I have the same problem. Tell me how to get the password!. ",
    "Shana6": "it's dead and not coming back im pretty sure \ud83e\udd14 \ud83e\udd14 \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  \ud83e\udd14  simply by reading the readme it tells me easily that you can't.. ",
    "christiaan": "This changes the Public API of the onGetSyncResult event. It would be better to add the phone number to the SyncResult class instead.\n. Maybe you still want to change this?\n. "
}