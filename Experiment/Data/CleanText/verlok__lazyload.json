{
    "verlok": "Not today. But it will be there tomorrow. Stay tuned. \n. Hi @naranjamecanica,\nthe destroy() method is now live :)\nSee demo_destroy.html to check it out!\n. Hi @naranjamecanica,\nthank you for contributing! \nAbout the public method to refresh the status, I've already provided the update() method if you pull the latest version of lazyLoad\nAbout throttle, see my next comment. :)\n. About the throttle, it's a good idea and I think that underscore.js implementation is quite good, because the idea that I had in mind works more like undersocre debounce and it's not good when scrolling fast on a Mac (which fires a lot of scroll events per second).\nCan you do a separate pull request that contains only the throttle feature, and passes the throttling time as a setting?\n. One more thing, the _loopThroughElements can't be directly throttled like you did, because it must be executed instantly when called from the update public method. We should find another way to throttle... I'm working at it now, if you wait I can push an implementation. \n. Ok @naranjamecanica,\nI took something from your version and release 0.9.13 which does exactly the same you wanted.\nPlease note that now the default settings are changed and throttle is set to 50.\nThank you very much!\n. Hi, I'm afraid I can't understand what you wrote... can you please be more specific?\n. A public instance function that wraps a private instance function, you say. We could just rename the _loopThroughElements functions, but then you will have to replicate the throttle behavior. Maybe we should expose the _scrollHandler function. Let me sleep on it one night :) I'll tell you tomorrow. \nThank you!\n. Hi @naranjamecanica,\nwith the latest update you have a new public method which is a throttled function to do what you asked. \nYou find the details in the readme. \nCheck it out!\nThank you!\n. Thank you for your report. I'll fix this ASAP.\n. Fixed! Please update to v1.2.1. Thanks again.\n. Thank you very much for your help. Right now I'm at the nursery with my baby who just born... I'll check your pull request soon. Please wait some days :)\n. Done!\n. I'm gonna check this today. Hold on!\n. The bug is caused by a code refactoring that we did and we released in v1.5.0. Please download v1.4.2 from here if you need an immediate solution. We're going to fix this soon and release 1.5.1.\n. I noticed that, hold on, the fix is coming!\n. Fixed! See https://github.com/verlok/lazyload/releases/tag/v1.5.1\n. Fixed again. Please check and close issue if you agree. https://github.com/verlok/lazyload/releases/tag/v1.5.3\n. @peritpatrio waiting for your approval :)\n. Hello. It's not on schedule... but you can create a fork and then submit a pull request if you like... In that case we can think about taking it on board. \n. Thank you for letting us know! \n. Now supported natively in version 2.0.0\n. @ibitwebsolutions it is plenty of recipes and demos, please read the README file or browse the demos folder. . The script listens to a generic scroll event on scrollable areas, both horizontal and vertical scroll should be covered. Can you share the code on gist or codepen / jsbin?\n. It's an error on your side. You just didn't specify the container of the scroll. \nYou can fix it like that:\njavascript\nvar myLazyLoad = new LazyLoad({\n    data_src: 'src',\n    container: document.getElementById('container')\n});\nSee the fork of your example, fixed.\nCheers!\n. Hi @hagcin,\nsometimes the Chrome inspector shows a double download if the cache is not disabled. Have you disabled Chrome's cache from its inspector first?\nOtherwise, can you post a jsfiddle, jsbin, codepen example of what you are doing, so I can take a look at it?\nThank you\n. No reply.\n. Thank you, @williambout.\nCan you post a jsfiddle, jsbin, codepen example of what you are doing, so I can take a look at it?\nThank you\n. Good. So it's not a problem of the script I guess. Could you figure out why?\n. Hi @vuongdothanhhuy and thanks for reporting this issue.\nI took a look at your example, what is the code that you are executing when clicking the \"Check\" red button?\nCan I see how you are instancing lazyload? Did you instance it passing the modal scrolling container in the \"container\" option?\n. No reply.\n. I definitely should to that. \nWhere can I get information of that license to choose and why, and where can I copy a template of the file you're suggesting to add?\n. Great! Thanks for featuring my work. \nThe reason why I'm not recommending using a pixel gif is that when you use LazyLoad with the progressive JPEG image format - to allow users see the images while loading using the show_while_loading option - if a pixel image is in the src attribute, when LazyLoad replaces its value with the proper one, the browser will just wait the full load event of the image without showing the progressive rendering. \nWhat do you think?\n. Cool,\nI'll do this. \nThank you for the hint. \nAre you going to implement it on pixabay?\n. Great! :)\n. Hi @peritpatrio, I must have lost this issue notification. Sorry about that.\nTo lazy load images inside a scrollable container, you must pass the scrollable container element in the container option of lazyload.\nSee the demos and the code here.\n. Thank you for the compliments, much appreciated. \nBut wait there, to do something like Netflix or iTunes, if you have many horizontally scrollable containers, in each container it should just work like in the demo you linked above, doesn't it? \nOh I see what you want to do. Doing that the user would download \"only\" the first 3 images for each horizontal container, but if you have many, you still load many images. \nSo you want lazyload to act horizontally in each horizontal scrollable container, and the ability to \"activate\" lazyload... lazily, so when they enter the viewport. \nI'm pretty sure you can to this using my script without too many modifications, but I have to do some tests (and now I'm on holidays until Monday 25th July). The idea would be to use lazyload on each scrolling container and listening to some event it launches to activate a new Lazyload on the container itself. \n. Could you open a new issue titled \"lazily load lazyload\" with what you described here?\n. Yes, the \"container\" should be used only if the scrolling container is different than the main document. For example, if you have 2 scrolling regions in your page. Sorry for the delay. \n. Can you give me more information about this? Does Safari for iOS have the same issue? What about Chrome without lazy load?\n. That's what I was trying to understand with my previous questions. How big are the images in size and weight? I suggest you to optimize them and if they already are, unload them as they exit the viewport. If the pagination of your images is not applicable \n. Try making them responsive then. You can use the srcset and sizes attributes and still lazy load the images with my (awesome) script. Yay! ^_^\nHere's a repo of mine which explains exactly how to do it.\nHappy coding.\nAndrea\n. Are you talking about images inside and iframe? Or about making iframes to gain their source attributes as they enter the viewport?\n. Thank you for the suggestion. \nI'll take a look at the code to see if supporting iframes is easy enough to keep the code as fast and simple as it's now. I'll let you know. \n. Hi @yanni4night,\nI did some test and I found out that my script actually already supports iframe loading :)\nTo do so, you have to initialize an instance of LazyLoad using the following code.\nIn the HTML:\nhtml\n<iframe data-original=\"iframes/i01.html\" frameborder=\"0\"></iframe>\n<iframe data-original=\"iframes/i02.html\" frameborder=\"0\"></iframe>\n<iframe data-original=\"iframes/i03.html\" frameborder=\"0\"></iframe>\nAnd in Javascript:\njavascript\nnew LazyLoad({\n    elements_selector: \"iframe\",\n    show_while_loading: true // a workaround to avoid LazyLoad use a placeholder src\n});\nI just committed a demo inside this repo.\n. Now supported natively in version 2.0.0\n. And now the show_while_loading option defaults to true. Check out the demo files in the demos folder or read the readme.md\n. Hello @botako,\nIf you have little (a few) images inside the frame, you can just lazy load the whole iframe.\nIf you have many images inside the iframe, and you have control for the iframe\u2019s code, you can try instantiating a lazy load inside the iframe, but I never tried that. \n. By the way this issue is closed already, please open a new one. . Thank you for your pull request!\nI might accept it if you:\n- rename _initialize to _isInitialized\n- change the version name (add 0.0.1)\n- run the grunt task to generate the minified file\nThank you again for the fix!\n. Uhm... I didn't expect that. But the correct name of this package on bower and npm is vanilla-lazyload because lazyload was already taken. We can keep vanilla-lazyload in the package.json\n. Thank you. Please check that everything is working in the /demo files. :+1:\n. Thank you guys. I've been travelling a lot in the past days and I couldn't look at your comments and PRs. Will do it soon.. Thank you. It's not what this script is meant for, but I'm open to pull requests. \nIf you don't feel like coding, please note that I read in other \"issues\" that some users were able to tweak the usage of this plugin to add support to background images without changing it. \n. Also, you can use lazyload's events to determine when an image enters the viewport and use the callback to do pretty much what you want. \n. Now supported natively in version 2.0.0\n. Thank you @greenie!\n. Great. I'm on the beach right now :) Can you bump the version in the package.json file by 0.0.1?\n. @greenie published!\n- vanilla-lazyload@1.5.9\n. Thank you!\n. Great! I knew you could sort it out yourself! :)\n. See issues #6 and #21\n. Now supported natively in version 2.0.0\n. Great. Would you like to update the readme file with a pull request?\n. Thank you \n. @cnanders any updates?\n. Beautiful. I'm gonna leave this issue open because I want to do this test one day. \n. @lopugit still haven't try... :(. I've started to work on this here\nI'll let you know where it goes. Interesting. I don't see why you don't use the update method on the LazyLoad instances, but maybe working on it I'll find out. . I think you misunderstood what I wrote. \nWhat I was suggesting is to use the update method like that:\njs\nvar myLazyLoad = new LazyLoad(/* options */);\n// after you did things like removing hidden classes after filtering\nmyLazyLoad.update();\nDoes it make sense?\nThis is what I do in the \"dynamic content\" demo. See the demo folder. Or the readme file where there's just your case explained. . That already works in the demo. The problem that @cnanders has is that the first images on the left in each horizontally scrolling container are loaded even if the container is outside the viewport. \nI replicated the issue and I'll solve it in the future making sure that LazyLoad consider them outside of the viewport. \nTo close this issue, though, I have a fix in mind, which is to lazily load lazy load. That's what I'm doing in the branch. I'll notify you when I'm done.. The demo I'm working on is this one. Solved. \nThat demo now works and it's very elegant.\nF**k yeah.\nStill... it should not be that complicated to use LazyLoad. I'll see if there's a better to check whether the image is visible or not, unregarding the multiple scrolling containers that might exist.. Merged into master. Demo is now in the demo folder. Specifically here.. Can you detail what is your HTML and JS code like? If you don't, I can't debug my script. \n. Great!\n. Please detail what your case is and what are you trying to do\n. Hi, thank you for your question. \nYou should ask the author os imgcache I guess :)\n@chrisben what do you think?\n. What do you mean by \"synchronous order\"? The order in which they are in the DOM? I think you can START loading them in that order (it should already work like that) but of course you can't control when the load event will happen, because it depends on many factors (image weight, network conditions, etc). \n. I'm afraid you can't control which images load first.\n. You can do it either in JS only or JS + CSS for the transition, passing a function to the callback_load setting.\n. Let me know if we can close this issue.\n. @eladcandroid I've added a fade-in demo without using callbacks, which only uses the CSS classes set by default by LazyLoad. View source || See it in action. (I've update the links above, I had them misspelled). Hello @dreamyguy, I decided not to add any extension to LazyLoad, because it's good as is its. Further development will imply support to the picture tag and eventually a conversion to ES2015.\nThe good news it that you can already lazy load iframes if you need to (like embedded codepens, vimeos, etc.). #perfmatters \ud83d\udc4d\ud83c\udffc. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Not a known issue. \nIt could depend on many reasons, if you could link a page where this is developed and visitable, I can take a look at that and give you some advice. If you can't, please post some of your html, css and js code here.\n. Hi @baszero. For what I could see on your website, the problem is not due to LazyLoad but to the layout of the website. Try to avoid using HTML tables to layout the images, because it seems very CPU-consuming when a repaint occurs. \nI also notices that the Chrome/Opera inspector hangs/crashes when I tried to inspect an image. This must be due to a CPU issue. Try to use the \"profile\" tab in the inspector to find out where your problem is.\n. Good to know. I'll definitely check this out. . Can you please make your test environment available again? . Ok then, I've worked on it, used the profiler and found some performance issues, which I addressed and resolved in the latest version of LazyLoad, the recently released 4.0.2.\nI also created a demo with 320 images to test it and make sure that the performance issues are gone.\nPlease @baszero test it on your website and let me know if this can be closed again.\nImportant note: since version 4.0.0 the script only supports IE 10+.. Hi, I'm using GitHub's semantic versioning, so you can choose the version in the releases page.\nYou're right, IE10+ can be a storng restriction in terms of backward compatibility, but it's now a standard not to support IE older than that. See browser stats for november / december 2016 for desktop computers.. Can I close this @baszero?. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Hi @dientuki,\nI thought about doing it, but I'm afraid that the ES5 code written by Babel could be heavier than the one I can write directly.\nAnyway I should think migrating to ES6, as browsers are starting to support it natively.\nThank you for asking.\nIf you want to help me doing this, I'm open to pull requests :+1: \n. I'm working on this on the branch feature/es2015.\nAny help / pull request is welcome.\n/cc @dientuki @ricardobrandao @benago. Oi @ricardobrandao,\nobrigado por estar trabalhando com meu script :)\nI was thinking about using very simple ES6/ES2015 features, so to the script wouldn't need to be transpiled to ES5 for the most recent browsers (Chrome, Opera), but I'm ready to change my mind if you can convince me.\nTo answer your final question, imho it's not a problem if the default settings are not accessible from outside.. @ricardobrandao veeery good job! I think we can merge the branch feature/es2015 in the development branch now. Then I'll get everything ready to release it to the world soon (including to cdnjs.com). Merged in.. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Hello! Yes, I'm pretty sure it works, the thing is that browsers tend to use the image they have already downloaded (and stored in cache) instead of using a new one, so please repeat your test making sure you manually empty your browser cache :) Cheers\n. PS: let me know if this solves\n. Ok, it can depend also on the Retina display emulation of the browser. \nThe point is: do you know what happens if lazy load is removed and the srcset is applied directly on the img tag? The answer is: exactly the same. So the problem is not in the lazy load. It depends on what purpose the demo is coded for. \nAlso, please remember that srcset and sizes are useful to suggest image dimensions to the browser, and its up tu it to choose what format to use, so the can be a difference between a browser and another. \nI'll close this issue since it's not related to my script.\n. Ok, that attribute is perfectly acceptable if your images are always displayed at 220 css pixel wide.\nIn my example I just want the browser to select between the 220 wide image or the bigger one based on the display density (retina or not). \n. Confused? I invite you to read this guide\n. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Good! Have you tested it, I mean does the error throw in some cases?\n. Done! Thank you. I'll  do some more testing, and release a new version on bower and npm very soon. \n. How did you trigger the error?\n. Sure! You're welcome. The latest version is much better in many aspects!. Hello! thank you for the suggestion. I thought about this in the beginning but having to support IE<11 was a problem. \nNow, as the picture element is widely supported, I think it would be easier to to. I'll think about it. \n. If you want to support me, you're welcome. I was thinking about finding img elements parents and check out if they are picture elements. But for performance reasons I think it's not a good idea to change each source element individually. I'm thinking on a best performing solution. \nDonations are also welcome via PayPal me. \n. I've just created a proof of concept of how it could work here on Codepen. How about that? \nI just need to have more time to do proper performance testing.\n. Can you make an example? Oh, I guess you mean the following:\nhtml\n<picture>\n    <!--[if IE 9]><video style=\"display: none\"><![endif]-->\n    <source data-srcset=\"500.jpg\" media=\"(max-width: 500px)\" />\n    <source data-srcset=\"1024.jpg\" media=\"(max-width: 1024px)\" />\n    <source data-srcset=\"1200.jpg\" />\n    <!--[if IE 9]></video><![endif]-->\n    <img src=\"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==\" data-src=\"1024.jpg\" class=\"lazyload\" alt=\"image with artdirection\" />\n</picture>\nI'll try what happens.\n. It seems to be still working, on Chrome, Opera and Safari.\nCan you please test IE?\n. What version of IE?\n. And what error does it throw?\n. IE versions less than 11 are dead, though :)\n. Sorry for the delay, I've updated the codepen code and tested in IE11, now it works.\nhttp://codepen.io/verlok/pen/bwROkV\nSounds good?\n. I will implement it, just I don't know when since I'm kinda full of other stuff to do. I accept pull requests though :)\n. Hey @cbieser,\ncheck the version of the script I've just added in the picture-supportbranch!\nIt actually works in the demos/with_picture.html demo.\nDoes it work for you?\nPlease let me know!\nCheers!. Hello @cbieser, can you test it on your website/app?\nYou can find the picture supporting version of LazyLoad here . Done! Version 3.0.0 is now out.. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Hi @mturnwall,\nfirst of all, this script is only to detect elements that scrolls into the window, not elements that moves in given a non-scrolling viewport. So it listenes to the browser's scroll event to check if elements are inside or not, which is not your case. \nSecondly, I did a quick research to find out whether or not is possible to detect when an element moved with the translateY() 2D transform enters the viewport, but I didn't find anything. I'd suggest you to ask this question to stackoverflow. \n. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). LazyLoad's job is to check whether images are inside the viewport, then load them automatically. \nFor what I understand, you need something to load some images when your menu is shown. So in the code that manages your menu, you want to do something like new LazyLoad('.megaMenuImage', {immediateLoad: true}), right?. Good,\nthen you don't need LazyLoad for the menu. \nLazyLoad'a main job is to check whether or not images are in the viewport, or close to it, then load it in the positive case. \nWhat you need to do is just to copy the data-src attribute value to the src attribute and eventually the data-srcset attribute value to the srcset one. \nThis can be easily done with a couple of lines of code that you can put in your menu component / manager / handler. . @Niresh12495 can we close this issue?. Look, I don't know megamenu but you need to write some code to do what I wrote some comments before. Not necessarily editing megamenu's code, but Listening to the events it fires maybe. . Hello and thank you very much for your work.\nI'm not that into using classes for what is behaviour, so instead of class=\"volatile\" I would prefer data-volatile or data-volatile=\"true\". In this way we could also remove the _hasClass function.\nAnyway I can't understand what you're trying to achieve here. You wrote:\nI added a \"volatile\" class to the image declaration that prevents the image from being purged from the LazyLoad. This allows it to be updated after it has been loaded the first time.\nWhy do you need LazyLoad to update the image after it's been loaded the first time? Why can't you get the image and directly update its src and/or srcset attributes?\n. Thanks for your explanation. So you need to update your \"camera\" image only if it's on screen. This is a good idea! Anyway I think you are putting your code in the wrong place... I mean you're putting some logic that is only required by your application inside LazyLoad. \nWhat I would recommend is to do everything in your application, and just call LazyLoad's _isInsideViewport() function to check whether your image is inside viewport or not.\n. What do you think?\n. Closing because of no reply. Hi there,\nthanks for publishing my script.\nYes, all that is inside the dist folder is good.\nNow I cleaned it up :)\n. Closed issue by mistake.\nFell free to close it when you're done :)\nThanks\n. Thank you!. So the problem is that the class doesn't change from loading to loaded? Can you give me the URL of your website?. Thank you,\nI'm gonna take a look at the link you provided.\nBut where did you read that my LazyLoad only supports JPG files? It supports everything it's loadable by the img tag, actually.. I took a look. Are you talking about this single background image?\nhtml\n<header class=\"bg_preloaded landing-page-image single-page\" data-original=\"http://uat.lusitanialights.com/wp-content/uploads/2016/09/music-page-bg.jpg\">\nSince this is a background image, there is no way to listen to the \"load\" event for the image, so the loaded class cannot be added programmatically.\nI cannot see any other images with the a data-* attribute.. Ok, but I can't see any images in the page. I checked the source and there isn't any img tag with the data-* attribute set. And the images you mentioned aren't visible on the page. Something is missing, but I don't know why. . > Do you see a \"loading\" class on the img tags?\nOk, taking a look at the DOM through the inspector, I see them. But looking at the html source of the page (cmd + alt + U on Chrome), I can see that the URL of the images are placed directly in the src attribute, and not via data-something...\nhtml\n<img class=\"stream-i-img\" src=\"http://uat.lusitanialights.com/wp-content/themes/lusitanialights/images/lusitania-icons-07.png\" />\n...so LazyLoad doesn't have anything to load, because this way the images are not lazily loaded, but are loaded directly by the browser when parsing the HTML of the page. What do you expect LazyLoad to do in this case?\n\nDo you know how to add the \"data-original\" attribute in the image tag without going into the text editor?\n\nNo I don't know, I'm sorry.\nBy the way I'm closing this issue because it's not a real issue.\n. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Muito obrigado Ricardo!\nIl take a look at your code as soon as I can.\nDid you fork version 3.0.0 already?. Desculpe Ricardo,\nI didn't merge because you said you were to \"take another look at this because there are still some things to improve\".\nNow this branch has conflict. Can you do the pull request towards a new branch?. Good to know, thank you. . Thank you . @ricardobrandao I just realized that I merged everything inside the master branch, but I was willing to take a better look at in on a local branch here. I branched your edits on a \"es2015\" branch, how can I revert things in the master branch (keeping the further changes that I made)?. @sensorario I really need to start using some branching strategy here! :). Hi, I just wanted to better review what we have in the main JavaScript file, because I saw in the transpiled file that we are creating global variables now...\nUsing different branches shouldn't be a big problem, git manages them and the merge very well, if you use a proper branching strategy. See git-flow. . I also wanted to export both the transpiled an the non transpiled version of the script, to give users the ability to import directly the ES2015 version,  which already works in some browsers.  . 1. we should fix the exported globals, since they can conflict with another script.\n2. yes please, I'd be grateful if you did that.\nPlease work on the ES2015 branch I've created and published. In the master branch, I'd like to restore the latest stable and tested version.. I did it. I reverted your changes in the master branch, but now they exist on the es2015 branch. You can continue to work there. Don't worry about the merge, I'll handle it. I'm becoming an expert \ud83e\udd23 . Actually I think it's better to re-branch es2015 off from the development branch, so we won't have issues later.\nI'll develop all future releases and bugfixes starting a new branch off the development branch, and the migration to es2015 is a new release, so it must be branched off development. When it will be completed, we'll merge it back on the development branch, test it, document it, then release everything on the master branch.\n@ricardobrandao Are you in?. It looks like an untrustworthy URL to me. And your user looks fake too. Sorry, closing this issue. If you're human please prove it. . @Niresh12495 sorry about that, the URL wasn't the one you're reporting now, it was https://yerl.org/4qPMBIuUDnRpPoR1ojLwlN so very hard to trust. And I'm sorry, but your profile with 5 numbers and 4 forks looks like bot-generated too. Anyway your reply proved you're human to me. \ud83d\udc4d . @marichelle thank you very much for your description, now I get what the problem is.\nI will fix this in the script itself, but if you need a quick fix, just call LazyLoad's handleScroll function. For example, say you're initializing LazyLoad on document ready and assigning it to the myLazyLoad variable...\njs\ndocument.addEventListener(\"DOMContentLoaded\", function() { \n  var myLazyLoad = new LazyLoad({ /* options */ });\n  myLazyLoad.handleScroll(); //this does the trick, calling LazyLoad's scroll handler without an actual scroll\n});. I'm testing it now on the demo pages on Chrome 55 and I still can't see the problem. It probably occurs just when called using a JS module pattern, as @marichelle wrote above. I'll try and fix this too.. @marichelle can you please repost the HTML and JS code you're using, so that I can do a better analysis? Thanks. @Niresh12495 I visited your page using Chrome 55 but I didn't see the problem. Maybe you replaced my script with something else. Do you see the problem on the demo pages?. Is this still an issue?. @sdthornton I was never able to reproduce this issue and I can\u2019t figure out how to do that. \nAre you able to reproduce the problem in any of the demo pages (see the demos folder)?\n@marichelle, @Niresh12495 are you still experiencing this?. Few changes with version 11.0.0 just released.\nhandleScroll() doesn't exist anymore.\nIf you still need help, please reproduce the issue on codepen and I will be able to help you.\nThanks. Sorry about that. \nPsst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Thanks @irejwanul, I can't see the problem on any of the demo pages I created.\nCan you please post the HTML and JS code you're using?. And maybe the version of the script you're using, if this is still an issue.. Thanks @Niresh12495 \nJust released 4.0.4 (version not found \ud83e\udd23). Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Duplicate of #35. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Hi @anchev and thanks for choosing my LazyLoad.\nIf I understood correctly, the images you want to load lazily are inside the modal you are opening via javascript, and the modal has a scrolling panel inside it.\nIf so, you need to initialize a new LazyLoad when the modal is shown, and pass the scrolling container in the container option.\nSomething like:\njs\n$('.modal').on('shown.bs.modal', function () {\n    var lazyLoad = new LazyLoad({\n         container: $(this) /// <--- not sure if this works here, read below\n    });\n});\nIn the container you need to pass the element that scrolls (so the one that has the overflow property set to scroll or auto).\nYou could also call lazyLoad.destroy() when the modal is closed, in order to save memory and do everything properly.\nI hope this helps. If you want help I can give it to you, but you'll need to share more of your HTML, CSS and JS code so I can understand where exactly the problem is.. Yess!!! That's correct. Congratulations. . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Uhm... This script is just to lazy load images, so make sure the images are loaded as they enter the viewport. It supports the picture tag and the IMG tag with the srcset and sizes attribute. This should do in the majority of cases. \nYour case is very singular, if I understood correctly. Do you have a link I can look at?. Hello @Cyriltra, I suggest you to find a different script to do the trick you're looking for.\nTry @aFarkas's LazySizes, for example.. I confirm it won't work on videos. The script only considers source tags that are siblings of an img tag inside a picture.. Thanks @banago.\nI'm closing this.. Hey @si14, thanks for your suggestions\nIntersection observer is still a draft, but passive event listeners are a thing on most browsers... I'll give it a try and if it degrades gracefully I'll implement it.. @si14 all examples that I've found about passive event listeners talk about passive listening the touchStart event. Even searching more specifically, I didn't found anything about passive listening neither the scroll event nor the resize events, which are the only ones my script listens to.\nDid you find anything more specific?. Fixed in version 4.0.4. Yes of course . Can you report HTML, CSS and JS code that you're using on your website? Maybe I can help you. But yes, LazyLoad it's used in production on many websites, I'm pretty sure it works on all devices. Thanks for the suggestion @anchev, \nbut putting the src and srcset in the img tag triggers the immediate download of the linked image. There's no way of lazily loading images that way.. But @anchev, this is what you author should do. It's not up to the editor of the script to manage your HTML or downscale your images. \nYou could do:\nhtml\n<img src=\"/your/downscaled/image1.jpg\" data-original=\"/your/image1.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/downscaled/image2.jpg\" data-original=\"/your/image2.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/downscaled/image3.jpg\" data-original=\"/your/image3.jpg\" width=\"100\" height=\"172\">\n...or simply use a placeholder on all your images...\nhtml\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image1.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image2.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image3.jpg\" width=\"100\" height=\"172\">. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Thanks for pointing it out @anchev, but putting the src and srcset in the img tag triggers the immediate download of the linked image. There's no way of lazily loading images that way.\nAnyway it's up to you what to put in your HTML. You're not forced to omit the src attribute.\nYou could do:\nhtml\n<img src=\"/your/downscaled/image1.jpg\" data-original=\"/your/image1.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/downscaled/image2.jpg\" data-original=\"/your/image2.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/downscaled/image3.jpg\" data-original=\"/your/image3.jpg\" width=\"100\" height=\"172\">\n...or simply use a placeholder on all your images...\nhtml\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image1.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image2.jpg\" width=\"100\" height=\"172\">\n<img src=\"/your/placeholder.gif\" data-original=\"/your/image3.jpg\" width=\"100\" height=\"172\">\n. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). @Niresh12495 what do you exactly mean with Async loading?. I still fail to understand how would it work with the code you posted above. If you instantiate new LazyLoad() before declaring the LazyLoad function, wouldn't it generate an error in any case?. Ok what you wrote in your latest message is not 100% correct, but I see what you mean. \nYour final goal would be to set your LazyLoad options anywhere (just like adsbygoogle) and then load LazyLoad asynchronously, without having to wait for it to initialize it.\nThat's definetly a good idea. \nWhat about this?\n```html\n images markup \n\n LazyLoad configuration \n\nwindow.lazyLoadOptions = {\n    data_src: \"lazysrc\",\n    data_srcset: \"lazyset\"\n}\n\n LazyLoad async download and auto-execution \n\n```\nIt currently wouldn't work like that, but it wouldn't be a great deal for me to update it for it to work like that.\nWhat do you think?. Hey @Niresh12495, I've worked on it right now, and I've released the fix to make it work like I wrote above.\nCheck out the edit on the feature/asyncInit branch. I've added a demo under the demos folder, named async.html, and a note on the README.md file.\nLet me know if it works for you.. @Niresh12495 \nThat's why you put the options after the script. The options need to be before the script, in case it loads very fast (from the browser cache, for example).\nCodepen test here\nHere's what you should have in the Async Lazy Test.html\n```html\n\n\n    window.asyncLazyLoadOptions = { \n        throttle: 150,\n        skip_invisible: false,\n        threshold: 150,\n        data_src: 'lazysrc',\n        data_srcset: 'lazyset'\n    };\n    \n\n\n\n\n\n```\nI just tested it, and it worked.. Now I'm thinking about adding the ability to have more than one asynchronously loaded LazyLoad.\nMaybe with something like:\njavascript\nwindow.asyncLazyLoadOptions = [{\n    throttle: 150,\n    skip_invisible: false,\n    threshold: 150,\n    data_src: 'lazysrc',\n    data_srcset: 'lazyset'\n}, {\n    container: '#aScrollingDiv',\n    threshold: 150, \n    data_src: 'lazysrc',\n    data_srcset: 'lazyset'\n}];\nI think it would be a great idea to preserve the ability to have multiple LazyLoad on page, yet load the script asynchronously.. I think you don't understand what async means exactly, Niresh.\nThe order of the script tags is important even if a script is loaded asynchronously, because async means that you cannot know when the script is executed, which could also be \"very soon\" if the script is dowloaded and executed very fast (i.g. from cache), that's why the configuration variable needs to have a value before (before in time, not before in html order) loading the script.\nIn the example you reported above, the script is loaded when the user clicks the button, which can only happen later in time, when the adsbygoogle\u00a0variable already has a value. Here's the demo of thedev.blog/AsyncTest.html loading LazyLoad upon click, same thing.\nTo answer your question: yes, my script works if loaded on click, so it's purely async :). I don't want to force the users to attach lazyload on the window.load event, so I won't add your change, also because the version of my script under the feature/async branch already works with or without async.\nI will continue to implement this feature allowing users to pass an array of options.\nThank you for your inputs.. Jeez, you're impossible :)\nIt doesn't work there because you didn't put the async attribute in the script.\nhtml\n<!-- WRONG async usage -->\n<script src=\"https://rawgit.com/verlok/lazyload/feature/asyncInit/src/lazyload.js\"></script>\n<!-- CORRECT async usage -->\n<script src=\"https://rawgit.com/verlok/lazyload/feature/asyncInit/src/lazyload.js\" async></script>\nBy the way, you can serve the main version of my script also from cdnjs.. It would work without async either, if you just put the global options object before the script, as I told you some comments ago. This issue is about supporting async loading, which I found a good option to add, but now you're asking to make it sync again?!. In addition, to make LazyLoad listen to the window's load event would be a very bad practice for my script, because it's users might want control on its exact execution time, maybe because they need to integrate it with others scripts. \nIn fact, the examples you reported (Google analytics etc) are script that don't have any influence on the web page / web app execution, they just do additional things of their own. . Released version 6.2 which now supports async loading and auto initialitazion.. @Niresh12495 please read the async loading note on my README.md, including the note about DOM readiness. Thanks.. Hi @redL,\nThank you for your suggestion.  Unfortunately it's not possible to do what you suggest, because I can't distinguish which images are inside the viewport initially and which ones are outside. \nIn fact, the script runs independently when the user scrolls or resizes the window or at the first load of the page. . Anyway, I'm thinking about the way to do it in the script that manages your page. Would you like me to suggest you how to do it? . Thank you, you were absolutely clear. The point is there's no such thing as the \"first run\". Take a look at the code and you will understand.. Good idea, you can do it in a fork if you want, but I'm not keen to integrate this change in LazyLoad. \nThe reason is that you should NOT use Javascript to load the first N images - N depending on the layout of your website in the widest viewport - and to lazily load only from the Nth+1 image on. \nSo you should put the first images srcs and srcsets directly in the image tag, then start putting them in the data-* attributes.\nAn example:\nhtml\n<img alt=\"...\" src=\"image1.jpg\" srcset=\"image1.jpg 1x, image1@2x.jpg 2x\">\n<!-- ...and so on until Nth image, then... -->\n<img alt=\"...\" class=\"lazy\" data-src=\"imageN.jpg\" data-srcset=\"imageN.jpg 1x, imageN@2x.jpg 2x\">\njs\nvar ll = new LazyLoad({\n    elements_selector: \"img.lazy\",\n});. You don't have to detect wich images should be displayed based on current viewport, also because you can't do it on the server side. Just set a number fixed to 10 or 12 and write the first HTML for the first 10 or 12 images, then the lazy load HTML for the 13th image on. It's a best practice. We use it in production in multiple e-commerce websites - in the category page - and it works!. Uhm, you're right, there is too much difference between the mobile viewport and the large desktop viewport in your case. Don't do what I said for 60 images. But please do it for the first 6, your mobile users will have a performance boost since the browser will start downloading the images even before downloading the first bit of JavaScript.. I'll see what I can do with your suggestion. I'm a little bit busy these days. If you make the change in your fork I might accept a pull request. Thanks . @zedL I'm working on this issue. New release coming soon.. @zedL done. You can find the edit in the branch feature/initialViewportClass. Try it out and tell me if it works for you. If it is, I'll merge it in. Thanks.. Hi @zedL, sorry for the delay. \nI did it! Just released version 6.3.x with the feature you requested.\nThank you for the suggestion.. @zedL I released another version (6.3.1) with the class name being initial like you suggested.. There's also a demo in the demos folder. It fades in all the images except the first batch. . Glad to hear that ;). Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Hi @xmesox,\nthe script only watches for scroll and resize, for everything else you must call the public .update() method yourself after filtering / moving the images. \nEasy. \nLet me know if you need more information. . Sure. \nThe following is the code you pasted above, but beautified.\nI added the lazyLoad.update(); call where it should be called, but you have to make sure that the lazyLoad variable is in scope there.\njs\n$(document).ready(function() {\n    $.each($('[data-filter-role=\"input\"]'), function(key, search_box) {\n        $(search_box).on(\"keyup\", function(event) {\n            $.each($('[data-filter-key=\"' + $(search_box).data(\"filter-key\") + '\"][data-filter-role=\"item\"]'), function(item_key, item) {\n                var item_value = $(item).data(\"filter-value\").toLowerCase();\n                var search_str = $(search_box).val().toLowerCase();\n                if (item_value.indexOf(search_str) == 0 || search_str.indexOf(item_value) == 0 || item_value.indexOf(\" \" + search_str) > -1) {\n                    $(item).show();\n                    var myElements = document.querySelectorAll(\".dzfilteritem\");\n                    for (var i = 0; i < myElements.length; i++) {\n                        myElements[i].style.margin = \"4px\";\n                    }\n                } else {\n                    $(item).hide();\n                }\n                lazyLoad.update();\n            });\n        });\n    });\n});. By the way, if you want, here's an optimization of the same code.\nThe optimization consists in less calls to jQuery, caching its generated vars.\njs\n$(document).ready(function() {\n    $.each($('[data-filter-role=\"input\"]'), function(key, search_box) {\n        var $search_box = $(search_box);\n        $search_box.on(\"keyup\", function(event) {\n            $.each($('[data-filter-key=\"' + $search_box.data(\"filter-key\") + '\"][data-filter-role=\"item\"]'), function(item_key, item) {\n                var $item = $(item);\n                var item_value = $item.data(\"filter-value\").toLowerCase();\n                var search_str = $search_box.val().toLowerCase();\n                if (item_value.indexOf(search_str) == 0 || search_str.indexOf(item_value) == 0 || item_value.indexOf(\" \" + search_str) > -1) {\n                    $item.show();\n                    var myElements = document.querySelectorAll(\".dzfilteritem\");\n                    for (var i = 0; i < myElements.length; i++) {\n                        myElements[i].style.margin = \"4px\";\n                    }\n                } else {\n                    $item.hide();\n                }\n                lazyLoad.update();\n            });\n        });\n    });\n});. Yes, it can't work like you did because you're creating a new instance of LazyLoad but you're not assigning it to a variable :)\nThe following should work:\n```html\n\n\n    var lazyLoad = new LazyLoad(); // **please note the first lowercase L!**\n\n\n    $(document).ready(function() {\n        $.each($('[data-filter-role=\"input\"]'), function(key, search_box) {\n            var $search_box = $(search_box);\n            $search_box.on(\"keyup\", function(event) {\n                $.each($('[data-filter-key=\"' + $search_box.data(\"filter-key\") + '\"][data-filter-role=\"item\"]'), function(item_key, item) {\n                    var $item = $(item);\n                    var item_value = $item.data(\"filter-value\").toLowerCase();\n                    var search_str = $search_box.val().toLowerCase();\n                    if (item_value.indexOf(search_str) == 0 || search_str.indexOf(item_value) == 0 || item_value.indexOf(\" \" + search_str) > -1) {\n                        $item.show();\n                        var myElements = document.querySelectorAll(\".dzfilteritem\");\n                        for (var i = 0; i < myElements.length; i++) {\n                            myElements[i].style.margin = \"4px\";\n                        }\n                    } else {\n                        $item.hide();\n                    }\n                    lazyLoad.update();\n                });\n            });\n        });\n    });\n\n```\nYou can safely replace my edited script to improve performance on calls to jQuery\nhtml\n<script>\n    $(document).ready(function() {\n        $.each($('[data-filter-role=\"input\"]'), function(key, search_box) {\n            var $search_box = $(search_box);\n            $search_box.on(\"keyup\", function(event) {\n                $.each($('[data-filter-key=\"' + $search_box.data(\"filter-key\") + '\"][data-filter-role=\"item\"]'), function(item_key, item) {\n                    var $item = $(item);\n                    var item_value = $item.data(\"filter-value\").toLowerCase();\n                    var search_str = $search_box.val().toLowerCase();\n                    if (item_value.indexOf(search_str) == 0 || search_str.indexOf(item_value) == 0 || item_value.indexOf(\" \" + search_str) > -1) {\n                        $item.show();\n                        var myElements = document.querySelectorAll(\".dzfilteritem\");\n                        for (var i = 0; i < myElements.length; i++) {\n                            myElements[i].style.margin = \"4px\";\n                        }\n                    } else {\n                        $item.hide();\n                    }\n                    lazyLoad.update();\n                });\n            });\n        });\n    });\n</script>. Call me coder on paper! :)\nClosing the issue. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). I was hoping that you reverted your initial commits and did it again like I asked. I'm not sure what to do now: I have 6 commits, some create the spaces and the required code, some others removes the spaces... isn't it a mess? I think I will re-do the changes in my master branch. . Hi @SamuelBourdon,\nwhat you're trying to do is correct, since LazyLoad is not a polyfill, Picturefill must be used to have picture supported on IE. \nIf you post some code you're using maybe I can help. . Sorry guys I've been very busy with my actual job and beyond that preparing the talk for CSS Day 2017. I look forward to be back starting next Monday.. > Maybe we just need another event on source change\nThe event on source change is the one that you're using, callback_set \nI'm closing this, if you need further help please reopen. . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Kudos for self solving this! \nYes the script needs to be at the bottom OR to be executed ad DOM ready, because otherwise it won't find anything in your DOM when searching for it. \nThis is also a best practice for performance optimization, so keep it that way!. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). More or less. Only on the solved ones ;). Hi there,\nwhat you're doing now is correct, you could have multiple instances of lazyload in the page so you gotta define each one with new LazyLoad() and eventually pass some options in or assign it to a local variable. . I took a look on the page you linked, which uses v1.0.1 of LazyLoad (released 18 Nov 2014), and I could reproduce the bug on Safari. That version is not maintained anymore, but I tried tweaking the show_while_loading option to false (since you're hiding the images while loading) and it solved the problem.\nPlease note that current version is 5.0.0. Several bug fixes and improvements have been released since then. See all releases.\nOn the latest version of LazyLoad, the bug doesn't occur. Try with Safari on the demos.. I've created a specific demo where you can see that all the callbacks are working correctly. See it in action || view source. \nI tried that on Safari 10.0.3 on Mac and everything is working, let me know if it works for you too.. Thank you . Also, this change is not necessary since everything is working on latest version. See the \"callbacks.html\" and \"fade_in\" demos. . You would be right if the complete check would be after the src is set, but the point you're willing to edit is before then. \nFurthermore, if the user sets a \"loading\" image in the src and the lazy image in the data-src attribute, the complete property would be true even before the lazy load had started. . Thanks, I'll take a look at that, as in the issue opened by @lucavolta. Great job! Muito obrigado @ricardobrandao . Hi @lopugit, two questions:\n1. which version of my script are you using?\n2. why don't you use slick's native lazy load feature?\n. About slick lazy, see the demos here\nhttp://kenwheeler.github.io/slick/\n. If you have the \"only shows images when scrolling 1px\" problem on other images, please let me know. \nThe script is now under automated test and I know that the update function is called upon initialization, but maybe there's something else that goes wrong. . PS: you might find other scripts that do the same, obviously. Mine is a lightweight and very fast one, continuously evolving along with browsers technologies, but you're free to choose something else. After all, this is github (and te web). . Hey @ricardobrandao and @si14!\nI've just opened a new feature branch supporting IntersectionObserver.\nAnd it works! \ud83d\udc4d \nThe only thing that I can't figure out for now is how to manage the fallback for browsers where IntersectionObserver is not supported. I didn't want to include the whole IntersectionObserver polyfill, because it's huge!\nAt the moment, if the new observer_fallback option is set to 1 (default value), LazyLoad loads all the images at once. But I realize it's not a best practice...\nMaybe I should code a fallback based on the current version of LazyLoad (listen to scroll and check if the elements are inside the viewport). But it's a shame, because trimming all that code out made the script weigh 1.5kb less (from 5 to 3.5).\nAny advice?\n/cc @G100g :). As a reference: https://github.com/GoogleChrome/sample-media-pwa/blob/master/src/client/scripts/helpers/lazy-load-images.js. Done. Cool, I hope you enjoyed Italy!\nI just wrote a blog post about the work I've done, find it here, and you're mentioned with a link!\nShare it on Twitter / whatever if you like ;). <3. Here we might find the answer (I'm pretty sure we will). Solved. Hi @MDSilvu,\nsince Google executes JavaScript, the images should be indexed by Google correctly.\nWe use it production on many of our websites nowadays. \nAnyway I have a small change in my backlog that will make SEO even better. Stay tuned ;). @MDSilviu version 6.1.0 is out, and it's 100% SEO friendly :). Browsers don't have the technology to understand a srcset in a background image yet. \nThere's a working draft named image-set but it's currently just a draft. Here's the caniuse support.. That wouldn't be a lazy load, but a totally different thing. My script has only the purpose to load images (or iframes) as they enter the viewport. Maybe you should look for something else. . What are you waiting for? Add it with a pull request :). Just joking... will add it soon. Hi @fspeckmaier,\nI've released a new version of the script, which has the fix in the transpiled version of the file.\nIt's tagged as 6.1.2 and you can find it here or on npm.\nThank you for reporting this.. Done by version 7.2.0. Then check the minified weight compared to the one in the development folder. Done in version 7.0.0. * highlight technology. Hi @imfelipe,\nthank you for asking here.\nWhat happens is expected, because LazyLoad marks the images that have already been processed and it never looks back to them again. I did it this way in order to boost LazyLoad's performance.\nWhat I suggest you to do is: when you need to update your images, check before if they have a src already  set. \nIf the src attribute was already set, to update the image you should set the src attribute directly.\nIf the src attribute is still null - meaning the image hasn't been processed yet - you can set the data-original attribute as you're currently doing.\nSomething like:\njs\nfunction setNewSrc (imgEl, newSrc) {\n    var attributeToSet = imgEl.getAttribute('src') ? 'src' : 'data-original';\n    img.setAttribute(attributeToSet, newSrc);\n}\nThis should do the trick.\nLet me know how it goes!. @imfelipe I updated the previous comment with some example code. I hope it helps! \nLet me know so we can eventually close this issue.. Ok so in the latest version I'm using datasets to mark the element as processed (see code here), so you could mark the element as NOT processed after setting the image source in the data-original element.\nLong story short, I suggest you to do the following:\n```js\nfunction setNewSrc (imgEl, newSrc) {\n    var imgElData = imgEl.dataset;\n    imgElData.original = newSrc;\n    imgElData.wasProcessed = false;\n    // optionally, if you want to avoid seeing the old image when the user scrolls back...\n    imgEl.setAttribute('src', null);\n}\n// and when you're finished updating the image source\nmyLazyLoad.update();\n```\nWhat do you think?. Seems good to me. Great!. Hi @trompx,\nfirst of all: Which version of LazyLoad are you using, 10.3.3 or 8.2.1? The recommended version for browser compatibility reasons is 8.2.1, but the most modern one in terms of image detection is 10.3.3 because it uses IntersectionObserver.\nSecond question: do the inserted img tags have a min-height set? If it did, you would obtain a better performance since less images would be in the viewport when the src is not set and loaded.\n\nAs the image has no dataset flag / loaded class, it should still be checked each time I myLazyload.update() (which is called on each scroll) no?\n\nYes, the update method re-selects all the elements with the selector specified in settings.elements_selector (the default value is 'img'), minus the elements that have the was-processed data.\nAnyway, beware in calling the update method on each scroll! It's very CPU consuming. You should call this method only each time you add new images to the DOM.\nI hope you find my indications useful.\nIf you didn't manage to solve this issue, feel free to post some HTML and JS code here or to create a new Pen on Codepen and share it here. . Hi @trompx,\nsome notes about what you wrote.\n\nThe option name is threshold, not thresold, make sure you spelled it correctly.\nI can't see why the data-src attribute would disappear at some point, since LazyLoad doesn't remove it anywhere (I checked).\nIt's correct that calling update() it doesn't show the images, it's only useful to check if newer elements matching the same selector (default: img) were added to the DOM.\n\nOne way that I use to debug my websites is to check if the bug occurs also isolating the code on Codepen. Try that, then maybe post the Pen's URL in a comment, otherwise I can't be of much help if I can't see the code and the bug reproduces.\nUltimately, please consider updating to v8.6.0 after reading the CHANGELOG. This won't fix your issues, but you'll have a more modern version and some bugs fixed.. Hello @vonPiernik,\nthank you for reporting this issue. \nIn order to be able to resolve this, I need more information in order to reproduce the bug.\n\nWhich version of LazyLoad are you using?\nIn which browser and browser version are you experiencing the problem?\nCould you provide the HTML, CSS and JS code you use for your images?\nWhat are the steps to reproduce the problem?\n\nPlease answer these questions, it'll really help me understand what's happening.\nThanks. @vonPiernik you there? Are you still experiencing this issue?. Thanks @niresh12495, but this is not the recommended solution. The skip_invisible option is there for another reason. I want to investigate and understand why this happens. Is that because the images are initially invisible?. Sorry for the delay. I'll check. . @vonPiernik you reported only the HTML code in your previous comment. Can you also give me the JavaScript code that you're using, and more information about how you load the script (in the header, in the footer, with or without the async attribute)?\nBy the way, have you read the new recipes and guide I've created on the new LazyLoad website?. @vonPiernik I'm closing it , if you still experience the issue please provide more information. The answer is to use a callback, the callback_processed callback, which passes the element as an argument. Thanks @toddmilliken,\nthis must be due to the recent switch to the use of datasets. \nToday is a holiday here and I'm far away from any coding device :) but I'll merge your PR in if you make it today. \nPlease use a branch named hotfix/sources to code the fix in, and remember to create the dist folder files and bump the version by 0.0.1 . Wait, what is the problem to be solved exactly? Why can't the final user already put the option in camel case instead of having the script to convert it?. Thanks,\nI understood what is happening, but isn't enough to change the default data_srcset option to originalSet?. Yes,\nthat's exactly what I'm suggesting.\nIt's because the dataset JavaScript API works exactly like that: if you have a data-my-data-src in your HTML, it would be accessible by JavaScript by element.dataset.myDataSrc. \nSo changing the default option to originalSrc would do the trick. For developers wanting to use a hyphenated data attribute, we could add a case in the README. . Hi @toddmilliken,\n\nIt seems a little odd that if a developer wants to override it, that they are forced to have an invalid HTML5 document using a camelcase data attribute on their source tags like <source data-myDataSrc>\n\nIt isn't forced to do that. The HTML would still be: \nhtml\n<picture>\n<source data-my-data-src=\"...\">\n<img data-src=\"...\"\n</picture>\nAnd the js in that case would be:\njs\nnew LazyLoad({ data_srcset = \"myDataSrc\" });\nThat's because JS natively does the conversion of any \"data-*\" attribute to camelcase inside the element.dataset property.\nCheck it out on this pen.\n\nAny specific reason why we shouldn't use the helper function? It will naturally fix all of the above scenarios without devs having to dig through the readME or being forced to have invalid HTML\n\nBecause it would be replicating what the browser already does. :). PS: I'm trying the fix  but I'm also having problems with uglify... :|\nThis must be the reason: https://github.com/webpack/webpack/issues/2972. I think the best thing is to create a new PR.\nAbout the uglifier, I'm almost sure it worked on my Mac, and I don't understand why it's not working on this Windows machine.... @toddmilliken I'll create a PR myself, then we can discuss it together.. Sorry @toddmilliken I was using a git-flow plugin which automatically pushed the fix on Github. \nThis issue is then fixed in version 7.2.2. This PR is not necessary, see discussion on #87.. Isn't the img invalid also because it lacks of the src attribute?. @fspeckmaier can you report where you took the information from? I coudn't find it online.\nHere the MDN states the following:\n\nThe selected source size affects the intrinsic size of the image (the image\u2019s display size if no CSS styling is applied). If the srcset attribute is absent, or contains no values with a width (w) descriptor, then the sizes attribute has no effect.\n\nSo I guessed we could leave the sizes in the HTML and when the srcset is not present, it is just ignored.. I also looked in the entirety of the W3C document, but I didn't find anything about what you reported.\n. It could be, but I think that the HTML should be validated against the W3C in its final state, meaning after JavaScript manipulated it, instead of before. What is the purpose of analyzing HTML code that won\u2019t be used as is it?. Because of course implementing it in the script would mean less speed in downloading, parsing and executing it. So every modification should be evaluated carfully.  . Customers will break the internet! \ud83d\ude43\nI see your point of view. I could  implement this as soon as I\u2019ll be back from my annual leave, which means not before mid July. \nIf you feel like collaborating, you could fork my repo, code the change, then open a pull request. This is open source, after all. \nThanks. . This to fix a W3C validator warning? I mean, it\u2019s not even an error\u2026. OK, now it's an error. Will fix.. Versions 10.9.0 and 8.10.0 added the ability to lazily set the sizes attribute via a data-sizes attribute. See the README file for more information.. Hi @Niresh12495,\ncan you report the Javascript and HTML code you're using?\nOtherwise it's very hard for me to help you.. Oh, I can see the problem now. \nIn Javascript, there aren't \"loaded\" events fired wen setting background images. Therefore, LazyLoad can't neither call the callback_load nor remove the loading class.\nSince you're using background images instead of regular images, there's no way to fix this. I'd suggest to use the good old img tag instead.\nPlease note that this has always been like that, it's not a regression bug, it's simply a Javascript limitation.. It's OK to me to include it in the main code, but I fail to see why. \nIf srcset is not supported, why care if it goes in the img's srcset attribute?. The script does the right thing setting the srcset before the src so if srcset is not supported it will be ignored, whereas where it's supported it will be considered. \nThe browser bugs you mentioned are browser bugs, related to a very old version of Chrome and to a polyfill. They are not my script bugs.\nSo I won't change anything. . queryOriginNode is not used anymore by the script.. Thanks for the video, but in order to understand what's happening I need to see your HTML, JS and CSS code. \nCan you provide it in a Codepen or a Codepen project?\nOtherwise I can't help you. . Hi @Niresh12495,\nI'd be very happy to solve this issue, if I only could replicate it. It would be very use you could replicate the problem in an isolated environment such as Codepen. \nI did some tests, using v7.2.2 and it all worked fine. See the following:\n\nBackground images lazy loading --> https://codepen.io/verlok/pen/NjMgBX\nRegular Images lazy loading --> https://codepen.io/verlok/pen/qmYjgd\n\nYou can fork my pens to reproduce your errors if you want.. Because in the links you provided all seems to be working.... ...and if you can't replicate it in an isolated environment, it's not a LazyLoad bug. . getAttribute was used in the old version of LazyLoad. The newer uses dataset, which is widely supported in every current browser version and previous version too. Check here.\nI tested my previous pens on Safari on MacOS Sierra and everything is working perfectly.. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Yes. There is a demo and a recipe. Just read the readme file or the website. You can find the demo under the demos folder. . Sorry I just realized there's no recipe and no link to the demos folder in the README file. \nHere you go: https://github.com/verlok/lazyload/blob/master/demos/fade_in.html\nThe fade in here is delegated to CSS so it's much faster than a JS animation (which is what Mika's jQuery LazyLoad does). \nYou could change the fade-in to anything else just changing the CSS. :) . You're welcome \ud83d\ude0a . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Duplicate of #89 . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Because in the way you did it, codepen injects the LazyLoad script before you declare the options for it. The correct way to do it on codepen is this: https://codepen.io/verlok/pen/GmGgJE. It's complex to use it async and with multiple instances. You need to save the instances as they are created using the event listener of the event LazyLoad::Initialized. Each time the event is fired, it passes an instance of LazyLoad in its callback (e.detail.instance in the codepen example). You then need to distinguish between the instances and know when to use which.\nFor a simpler use case, I'd suggest using the synchronous multiple instances creation, like in the demo here https://github.com/verlok/lazyload/blob/master/demos/multiple_container.html . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Why did you close this?. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Thanks for letting me know. \nIE less then 11 are not supported, though. \nDoes this fix only make the script compatible for IE9? I didn't know that.. You're right. I'll add it.\nPsst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Sorry about the delay. \nYes, the solution you found is correct!\nThe update method is meant to be used right for that purpose. . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). This is a clever solution to add classes to elements with background images!\nBut what if the image works in the img tag and fails in the background-image element or vice-versa, maybe because of a network problem? It could add the wrong class, don't you think it's risky?. Sorry for my late replies, it's too hot here to code outside business hours :) I will consider this though, I promise. I'm still alive and thinking this is a good idea, even if I need to think this through. \nSorry I was busy with the creation of version 9 and the TDD restoration :). Hi @FreshRob,\nI took a closer look to your PR and I think that the line:\njs\nonLoadCallback = function(){ setSources(element, settings.data_srcset, settings.data_src); };\nWould make the visual loading of the websites slower, because the background-image is assigned only when the image is completely loaded. I'm thinking about very slow connections: if the image source would immediately be set in the background-image, the users will start seeing the image as soon as the image format allows it (Progressive JPEG is especially good for this).\nIsn't it another way to listen to the loaded event but without preventing the image source to be immediately set in the background-image?.  @FreshRob any thoughts?. Hi, \nSorry about that. Those versions of Safari are not supported by my script.\nYou could try replacing const with var to solve this specific issue. . Wait there @FEDuser,\nare you using the non transpiled version of LazyLoad?\nYou should be using the file lazyload.transpiled.min.js!\nI'm gonna update the readme file about this, since I didn't make that clear.\nThanks for letting me know.\n. Hi @FEDuser,\nI recently released version 8. If you use this version, just include lazyload.min.js as you're probably already doing.\nThanks. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Then you can use an older version of the script. Like 3.x, find it here\nSame functionality, more or less, legacy browsers supported. . Done!\nThanks for letting me know. @aggreggator please note that I've just released version 8.0.0. Version 8.0.0 is the same as 7.2.2 but with renamed dist files. The main transpiled file to include is now dist/lazyload.min.js as you would expect, and no longer dist/lazyload.transpiled.min.js. . Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). Thanks! It's 1001 stars now! :). Hi @Princu7,\nI took a look at the pen you linked, and the expected behaviour seems to me already the right one.\nHave you managed to solve this by yourself, using the skip_invisible option set to false?\nIf yes, please close this issue.. What I would do in your place, instead of loading invisible images (which results in bad performance and wasting your users bandwidth), is to make the images load only as they appear on screen. \nIn this example, which is a fork of yours's*, whenever a collapsible is expanded, the LazyLoad update method is called, making the magic happen.\nI hope this helps!\n* Bootstrap JS and CSS + LazyLoad external script were placed in the related Codepen settings.. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;). I'm closing this issue now, if you still have questions do not hesitate to open it again. I hope you solved it! Let me know in the case.. I'm closing this issue now, if you still have questions do not hesitate to open it again. I hope you solved it! Let me know in the case.. Hey. It can't, because for the invisible images it's impossible to determine their position in the scrolling pane. \nI advice to re-think your concept of performance: if the connection speed is slow, loading ALL the images whether the user shows them or not is NOT a best practice, because it would hog their bandwidth, and in some cases pay money for getting nothing. \nDo the best thing imho would be do what I suggested, and maybe save the images in the progressive JPEG format if you can (google it).\nIf you really hate your users, :P I have an idea to do something like you suggested using LazyLoad + some custom lines of code. But again, I wouldn't recommend it. . Please let me know if we can consider this issue closed. . And didn't you consider using a CDN to reduce images latency and loading time?\nWe use Akamai at our company and I strongly advice using it. They also have a service to optimize images automatically.\nAlternatively, you could use other CDNs, or use Cloudinary which is a service that scales and optimize your images, and it integrates Akamai's CDN.. I'd suggest NOT to download all images after the window load event since users browsing from mobile will have a paid connection / limited bandwidth and it's really NOT NICE to them sucking them traffic even if they aren't interested in the whole page content / they clicked a link as a mistake. \nPS: Not a problem, I know about LazySizes from @aFarkas :). If you want to achieve best performance my suggestion is to eagerly load the first N (4? 8?) images of the page, then lazily load the rest. \nThis is because the browser will start to download the first N images as soon as the page is parsed, then the lazy ones when JavaScript (LazyLoad) is parsed and executed. \nTo avoid having the \"image is loading\" effect on page you could play with the threshold option of my lazyload script that tells it how many pixels outside the viewport to load the images in advance . I don't, but if you tell me what you'd like to achieve, maybe I can help.. Thanks. Uhm, the link didn't help, I only see a 3x2 grid with 6 images in it.\nAnyway, the first thing that comes in my mind, if you move around the grid elements like in the packery demo, you'll need to call LazyLoad's update method after, or during, the rearrangement. See the API section in the README.. Psst: have you already starred this repo? All you need to do is to press the Star \u2605 button on the top right corner of the website. ;) . I'm closing this issue now, if you still have questions do not hesitate to open it again. I hope you solved it! Let me know in the case. . No, my code works only on the native scroll events, even if you could set the scroll value manually, the methods always read the position properties from the elements themselves, so it wouldn't work. \nI think you should develop your own lazy load, maybe you can reuse some of the code in my project to do that.. Hello, thank you for reporting this.\nAnyway I can't find the word webkiturl in the code of my project, neither in the transpired files nor in the es2015 ones. What did you get this notification?\nBy the way if you like my project, please star it if you didn't already;). Sorry I didn't understand what's happening. The images start loading but they stop loading, meaning they load partially? \nIf an image is loading, my script's work is finished, because it just sets the images source then they enter the viewport. . Oh,  I think I see you what's happening there. It looks like you have different scrolling containers, so you need multiple instances of LazyLoad, one for each scrolling container, like it's described in the documentation recipes. Take a look there and let me know!. Can you show me your HTML code too?\nAnd what happens when it doesn't work? It doesn't load the images?. It's very hard for me to debug from text only, without knowing what are the scrolling containers. \nCould you put HTML, CSS and JS in a new Pen on codepen.io so I can debug and fork it?\nThanks. Still interested?\nIf yes, reopen and post the code on codepen.\nThanks. Hi there, the \"container\" option must be a scrolling container, like window or any other DOM element with overflow: scroll. \nBut wait a minute, what do you mean with \"break it\"? Does it throw some error? Or it just doesn't load the images?\nThank you \n. @hdon do you still have an issue?. Closing. If you still have this issue, please re-open.. You could use a noscript tag containing the img as you would use it if you didn't have JavaScript. That's the only way to support JavaScript disabled browsers and not impacting performance for the vast majority that have JavaScript enabled. Interesting question, nobody asked about webp before. \nFirst of all, sorry but I have to ask, are you testing this in Chrome, right? :)\nSecondly, did you know that there are services that makes you free from generating more images versions per dimensions and formats? One of these is Cloudinary.com - take a look! \nFinally, I have to test this on my own Chrome to unterstand what is happening. And this must wait until Monday, sorry! . I'm checking now. I'll let you know soon.. Hi @dalvaradotey,\nI've created this pen in order to reproduce the bug, but I couldn't reproduce it.\nChrome is downloading the webp both on the eagerly loaded image and on the lazily loaded image, whereas Firefox is downloading the jpg in both images.\nIf you could please fork my codepen and put there your html and js (and css?) code maybe I can help you understand what's going on.\nThanks. Have you tried playing with the throttle option?\nIts default is 150 and it means \"if another scroll event is fired within 150 milliseconds, wait another 150 milliseconds\".\nTry diminish the value to 50 and see what happens.\nLet me know if you solved or not.. Sorry, I just figured out a bug on the throttling function, and released version 8.0.2 which fixes it.\nCan you update to 8.0.2 and check again?. Otherwise, can you put your HTML, CSS and JS code on a Pen and send me the link, so I can check?. Could you make a pull request towards a new branch named hotfix/8.0.3?\nAlternatively, to commit to master you should bump the version in the package.json to 8.0.3 and run grunt in order to build the dist files.. It didn't break, the part where it says the following means that it worked.\n```\nRunning \"uglify:dist\" (uglify) task\n\n\n1 file created 13.44 kB \u2192 5.15 kB\n```\n\n\nDo you want to keep trying or can I do it myself?. Ok good. I'll let you know when it's done.. Done. Released 8.0.3 and put your name in the changelog. I also fixed the warnings emerging from grunt.. Hi @sebastianbarfuth and thanks for your input. \nHave you checked the callbacks that you can pass in as options to LazyLoad?\nYou can use the callback_loaded, which is called exactly when the loaded class is set by LazyLoad, to set the class to whatever element you want up in the DOM tree. \nThere's actually no difference, in terms of performance, between you making it in your JavaScript, and my script doing it. Except that I cannot do it in my script because I simply don't know what there's up in the DOM tree, since it could be executed on any image (a banner, a product, a menu item...). Now they are, from version 9.0.0.. Hi @servocoder,\nthanks for the PR! This is a very good idea. \n2 notes:\n- you edited the file inside the dist folder instead of editing the files in the src folder. You should edit the latter ones, and build the dist files using grunt. Be sure to install dev dependencies first running npm install. \n- the way your edit is implemented, it prefers jQuery implementation over native one. Can you do the opposite?\nThanks . We could, but... support IE9 and IE10, really? Nobody uses them anymore... IE11 has swept them away.  . You're right . @servocoder @gsouf I'm supporting IE9+ now in version 10.3.0. Coming soon in version 8.x. Ok, this code is more complex than I was expecting. \nFor what it looks, you have more than one scrolling containers (.js-item), each scrolling container has more than one image (.js-lazyload) and you want that when each one is loaded, the image source is set in the parent's background. Correct?. I have some objections here: \n1) did you know that LazyLoad also works with div and tags different than img? In case you instantiate a LazyLoad with elements_selector pointing to those elements, it will load the images as background images, automatically \n2) you are reading the src attribute of an image, but you seem to set only the srcset. I would need to see the HTML code too. \nAnyway, this is complex to explain by writing in this conversation. Could you create a Pen on CodePen so I can see both HTML, CSS and JS code, and also fork it to fix the problem?\n. Or at least report the HTML code of the pictures and their containers. Sorry about the delay, I'll check as soon as possible.. Ok so first things first: your picture markup has some errors, since in the data-source attribute you need to put the source without the width descriptor (w). The correct code would be the following. DEMO here\nhtml\n<picture>\n    <source media=\"(min-width: 1280px)\" srcset=\"https://unsplash.it/427\">\n    <source media=\"(min-width: 1024px)\" srcset=\"https://unsplash.it/341\">\n    <source media=\"(min-width: 992px)\" srcset=\"https://unsplash.it/331\">\n    <source media=\"(min-width: 768px)\" srcset=\"https://unsplash.it/256\">\n    <source media=\"(min-width: 568px)\" srcset=\"https://unsplash.it/667\">\n    <source media=\"(min-width: 320px)\" srcset=\"https://unsplash.it/375\">\n    <source srcset=\"https://unsplash.it/320\">\n    <img class=\"js-lazyload\" src=\"https://unsplash.it/9999\">\n</picture>. Secondly, if I understand correctly, you're trying to use a hidden picture tag in order to lazily load a responsive image, then when the load callback is fired, read which image was loaded, and place it in the background-image of the parent .js-inspiration-image element. Right?\nThe main problem I see here is in the following line, since the src attribute of the img doesn't change when the image is loaded, it remains the one in the markup. DEMO here (open browser console).\njs\n$bgContainer.css({'background-image':'url('+img.getAttribute('src')+')'});. ...BUT you could change that line of code like the following, and it would work on browser supporting the currentSrc property (meaning that it won't work on IE 11).\njs\n$bgContainer.css({'background-image':'url('+img.currentSrc+')'});\nIt should work, I'd just feel very dirty if I did the thing your trying to do. :)\nCan I ask why aren't you using the img in position: absolute with a lower z-index instead of using background-image?. Also please note that the javascript code you reported in the first post is very long and complex even for what you're trying to do, you're instantiating multiple LazyLoads when you really need only one.. Closing this because it's not a bug, but let's continue the discussion if you like. Hi, thank you for your service. \nI could merge this in, but can you explain better why can't you restrict the re-initialization using the elements_selector option and leaving container to your scrolling container?.  What if we made a modification to allow passing the elements directly to the LazyLoad object, like a setElements method? Would this solve?. Still, looking at the code you wrote,  it seems that you just need to change the queryOriginNode...  and I still don't understand why it cannot be the original container . Great! It's clearer now. \nI think that if you use version 9 of LazyLoad that I released just a couple of days ago, you can now use the container option itself, since it's not used anymore to listen to the scroll event (version 9 uses the Intersection Observer API). \nCan you check this?. To be clearer, the container option is now used only as origin for the querySelectorAll method. . Never mind, I took a closer look to the code and I saw that it's also used as root element for the IntersectionObserver, so what I wrote before is not quite true. . I think that the best thing you can do is to create one instance of LazyLoad for each one of your modules. \njs\nvar lazyLoadModuleN = new LazyLoad({\n  elements_selector = \"#moduleN .lazyElement\"\n});\nThen when your module updates, you just do:\njs\nlazyLoadModuleN.update();\nThis would ensure the best module separation. Right?\n. I'm afraid that the users find the 2 options confusing, meaning container and elements_comtainer. . I mean, even if the options were called scrolling_container and elements_container it would be confusing. Why would the two be different? They are necessarily the same. \nThat's why I asked you what you wanted to do and why couldn't you do it with the current options, and you answered \"because elements_selector is a string (etc)\". Thus, my logical solution is to make that option accept a set or dom elements. \nIs it clear now?. Thanks! . Thanks for letting me know, I'll check what happened. I can't see what's triggering the error there. Can you explain?\nBy the way, have you checked the callbacks demo? It shows that the callbacks are called and the classes are set.\nDemo: http://www.andreaverlicchi.eu/lazyload/demos/callbacks.html\nCode: https://github.com/verlok/lazyload/blob/master/demos/callbacks.html\nPlease note that this is using version 9 which doesn't have the class_initial class and the callback_processed callback.. And this is with the exact version (8.0.3) you were using on jsfiddle.\nIt looks all good to me. . @Hackintosh I managed to understand what's happening with your jsfiddle:\n\ncallback: the option you are passing is callback_procesed, whereas the correct name of the option to pass is callback_processed (2 \"s\")\nclass: the moment in which you print the className or your element is at page landing, not when the image loads, so you get the initial class names and not the changed one.\n\n@bitfella:\n- I'd need to see your HTML code too, to understand what you're doing. The best thing would be to have both HTML and JS code in a Pen on Codepen so I could see what's happening.\n- please note that the code in the lazyload.js and lazyload.min.js files is already ES5 code, so no need to transpile it with Babel.. Here I created another demo to show that the script is calling the callback and setting the classes as expected.\nI'm closing the issue - since it's not a bug - but don't worry, I'm still willing to help you (another message is coming right away).. Hey, you're cheating! :) In the codepen you linked you're doing a very different thing from the one you were describing above: you're now using LazyLoad to set background images directly!\nThe answer to the fact that LazyLoad neither fires the callbacks nor sets the classes in this case is that it's impossible to do, since no event is fired by the browser when a background image has finished loading.. @bitfella sorry, my mistake, I'm confusing the threads (it's late here and I'm out of coffee) with #120. You're not a cheater \ud83d\udc4d \nAnyway my previous reply already answered your problem. It's just impossible to do with background images.. @bitfella anyway, for the next time I suggest you to understand better what was the discussion before to state \"I have the same problem\", because @Hackintosh wasn't using background images.. Yes I could do that, but I like to enforce  the new keyword because it makes explicit that the result is an object, an actual instance you can use.. Hi @WeAreUnique,\nyou didn't explain your problem properly. \nIn the link you provided me, you have only one scrolling container, the page / document.\nAll images are displaying correctly.\nSo what issue are you having?\n.  Please note that selecting all images and divs on the page leads to very bad performance...  can't you select only the images with some class?.  What exactly is not working? \nCan you post the HTML code top please? \nThe ideal would be to create a new pen on codepen.io so I can see what's wrong with your code . Thanks for reporting this issue. \nCan you report the JavaScript code you're using?\n. I got the problem: you are using version 9.0.1 instead of 10.0.1, and you're using the default options from version 10. \nJust use the newest version and it will work. . When you solved, please close this issue. @SassNinja I did it, but I think now it's tricky to use when the content changes.\nSee the example in the demos/dynamic_content_nodeset.html file. \nIt works at the first usage but when you add content dynamically and call the update() method, it doesn't work because it relies on the elements_selector option to select the newly updated children.\nI think that the solution might be to pass the NodeList object with the elements to the update method itself. . @SassNinja I changed it like that --> https://github.com/verlok/lazyload/releases/tag/10.2.0\nI tested it in the demos/dynamic_content_nodeset.html demo and it works correctly.\nNo need to change any of the script options, but you need to pass a NodeList object to the constructor and to the update method.. Thank you for reporting this.\nThe problem is that version 10 uses Intersection Observer, which is not yet supported in Safari.\nAs a fallback, LazyLoad version 10 loads all the images at once, which is not nice when you have a lot of images to deal with.\nYou can solve this easily using the latest version less than 9 of my script, which is version 8.1.0.\nLet me know if this can be closed.\nThanks!. I'm considering this closed. If it isn't, feel free to open it again. . Well, I never tested it on a slider because version until 8 worked listening to the container's scroll event, which is not triggered by a slider. But I guess that this could work from version 9 up. \nJust set the threshold option to the amount of pixels beyond the slider that you want to start loading the images at. \nIn your case, if the slider is horizontal and the images are 300px wide, set the threshold option to 301 and you will have the next images loaded. \nLet me know if it worked :). I'm considering this closed. If it's not, feel free to open it again. . Of course. ASAP. . Done in version 10. Now I need to do it on version 9.. Absolutely yes, I'm maintaining both versions: 10 and 8 for the reason you mentioned. I'll evaluate and eventually merge this PR as soon as possible. . Closing this, as I'm maintaining v 8.x as well. Done in version version 10.3.0\nTo do in version 8.x\n. Done in version 8.2.0. If you need to support older versions of Chrome, I recommend to use version 8.2.0 of LazyLoad which doesn't use the Intersection Observer API, which is quite new.\nYou can read more about it in the readme file.\nPS: Removing that line of code would make the images load all at once, so it's like not having any lazy load at all.. LOL. Yes, you saw right. I added that ugly code just yesterday. If you have some better solution to remove a class without classList, you're welcome to edit it. It's supposed to work, but I can't tell tell you for sure now, since I'm away from my Windows machine until the 26th. Is it working in other browsers?. Could you report any error you receive in the browser console (F12 to open it on Edge)?\nIs version 8 working on Edge? You could stick to that until I fix version 10 :). Thanks for the report.\nIf neither 10 nor 8 work on Edge, maybe the problem is related to the HTML errors that I see in your browser console?\nIt says that you're using a self closing tag and it can't be, that you should close it. Which tags is it referring to?\nPlease report your HTML and JS code here, that could help me to help you. :). @chrisjansky, what @liepumartin wrote is correct because the default options object changed between version 8 and 10. Find the docs in the README file of release 8 downloading the zip file here. I cannot debug on Edge 15 because my network administrator doesn't allow the update yet, and on at home a use a Mac. I think it's time to install a VM :D\nCould you explain better why the condition in the if statement, meaning (!entry.isIntersecting) is not working on Edge? If the problem is that entry.isIntersecting is null as you explained, shouldn't it work anyway, since !null evaluates as true?\nThanks\n/cc @aliasltb @npdung . I found the bug documentation: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12156111/ - I will replace it with entry.intersectionRatio > 0. Released 10.3.1. @aliasltb @npdung let me know if version 10.3.1 works on MS Edge 15 please. Thanks. You shouldn't lazy load images in carousels except using the native features of the carousels itself, for example, I know that slick slider (slick.js) has a feature too lazy load images outside the visible ones. \nThe solution that @npdung provided is working only because it immediately loads all the images on some browsers\u2026 but that's not lazy loading. . @adriandmitroca which version of LazyLoad are you using? The recommended (8.2.1) or the latest (10.3.3)? And what problem are you experiencing?. Thanks. With \"none worked\" you are not helping me to help you. What kind of problem were you experiencing? Did you get any javascript errors? Could you post the HTML and JS code you used? Thanks. Hi @adriandmitroca,\nyou should definitely stick with version 8.x and use data-original instead of data-src. \nIn fact, the API was different in 8.2.x as stated in the m documentation provided in the README.md for that version (download the zip for version 8.x then read README.md). \nLet me know if this solves. \nThanks!. Sorry, the option name is still data_src but the default option value is original so the HTML attribute it\u2019s looking for is data-original. \nHere the documentation: https://github.com/verlok/lazyload/blob/master/README_v8.md#api\nEDIT FROM JANUARY 2018 - NOW BOTH VERSIONS 8 AND 10 SHARE THE SAME API\nLong story short, if you want to keep data-src in your HTML you just need to do:\njs\nnew LazyLoad({data_src: \"src\"});. Thank you @stefan-kern for the analysis, I'll try and fix this as soon as possible. Thanks.. Latest comments by @stefan-kern are a duplicate of #165. Closing this.. That\u2019s because it\u2019s not possible to implement, since background images don\u2019t fire a loaded event. . Hello. The lazy source must be in a data- attribute, but you\u2019re not forced to use data-src, you can use anything else, for example data-whatever and pass it to the options of LazyLoad with data_src. See the docs on the readme file. . Hey there, I appreciate that you solved some of the issues by yourself. \nThe issue you\u2019re having now is due to a wrong option you\u2019re passing. To read data from the data-hire attribute you need to pass only hire to the data_src option. . In other words, you need to do:\njs\nwindow.lazyLoadOptions = {\n    data_src: \"hire\"\n};. Thanks for sharing. \nI\u2019m not an expert in Ionic nor Angular so you will need to do some debugging to see what\u2019s going wrong there. \nHere\u2019s some advices:\n- use the unminified version of LazyLoad instead of the minified one. If you're including it as an external file, just remove the .min part of the name of the script you're including.\n- open Chrome web inspector, go to the scripts panel, locate the LazyLoad file and set a debug breakpoint in the update method\nThere, you can see how many images got selected and stored in the _elements property. If they are zero, you can check the options you passed, how many you have in the DOM at that time, etc. \nMy guess is that when LazyLoad gets instantiated and executed the first time, the DOM elements you're willing to load lazily are not there yet. In this case, save the LazyLoad instance in some variable, then call its update() method later, when you're sure your DOM elements are there already.\nLet me know how it goes!. @alkahtani I updated my latest message with more information. @alkahtani let me know if we can close this. @alkahtani can we close this?. Yes @alkahtani please try this on a clean project and let me know.\nClosing the issue in the meantime.\nThanks. Right, the doc describes version 10, but if you use version 8 the default value is different. I will update it. Thanks. Fixed that - added an IMPORTANT section at the beginning of the doc with the link to the older documentation which is now in a separate file.. Hi @tom10271,\ncould you tell me what is it that you didn\u2019t find easy to understand?. Bonjour R\u00e9my,\nthanks for asking and congratulations for your website, awesome web typography and content. \nActually you\u2019re not the first asking this, I got the same question on Twitter. Here\u2019s what I think:\n\nIn terms of loading performance, since the polyfill script is quite heavy compared to LazyLoad 8, downloading LazyLoad 10 + the polyfill would be worse, so if you want to go down this road, be sure to load the polyfill conditionally, only on the browsers where it\u2019s really needed (currently Safari and IE)\nIn terms of CPU performance you would have an improvement using LazyLoad 10 where IntersectionObserver is supported since it is native and faster, but I didn\u2019t measure CPU performance of LazyLoad 10 + the polyfill on older browser, in comparison with LazyLoad 8 only\n\nMy advice is:\n\nIf you need the IO polyfill to make other scripts work too, I\u2019d go for the polyfill, loading it conditionally only where it\u2019s needed, and LazyLoad 10. \nIf you don\u2019t need the IO polyfill for scripts other than LazyLoad, and you have the ability to selectively load scripts depending on the browser, you could load LazyLoad 10 or LazyLoad 8 conditionally, depending on browser support of IO. \n\nThe simplest and performant way to load LazyLoad is of course to only load version 8, which works everywhere. It\u2019s not that fast and modern as LazyLoad 10, but it\u2019s still fast and it does the job exactly as it did it for the latest 5 years :)\nIf you need more information, please ask. \nCheers!\nAndrea . I\u2019m glad you appreciated it. \nCheers!. Hi there. I didn\u2019t understand your question. Can you be clearer? Thanks. PS: eu falo portugu\u00eas, se quiser pode escrever no seu idioma :). Muito obrigado pela explica\u00e7\u00e3o. \nTudo funciona como voc\u00ea descreveu. Quando o LazyLoad vai carregar as imagens porque entraram no viewport, o browser vai carregar as imagens d\u00e1 cache invez que d\u00e1 internet. Agora entendi melhor o que voc\u00ea queria fazer. \nInfelizmente n\u00e3o \u00e9 possivel fazer isso porque a cache do browser n\u00e3o \u00e9 exposta por nenhuma API.. Thank you @jr-cologne, well done explanation! :). Hi @donsue,\nthank you for getting back to us. \n\nThey suggested that you might want to add a few lines of code to your script that tells the script to not start until everything else is loaded.  They said that would prevent other goofus's like me from having issues.\n\nI didn\u2019t do that because I want to give the script users the freedom to decide when and how to execute the script. \nThe only thing that I changed upon a user\u2019s request was to add the ability to execute the script asynchronously. \nI took a look to your page and I noticed that the images can be shown overlapped sometimes. I think this must be because the images don\u2019t have a size until loaded, and some js could use the size to position the images. I suggest to set a size in CSS even before the images load (at least set a min-height, which also avoids all images to load at once), or to execute any eventual graphically arranging JavaScript after the images were loaded. You can use the callback_loaded option. Hi there, not exactly. You can use the callback_loaded option  to execute some JavaScript code (a callback function) whenever an image finishes loading, in case you\u2019re using some JavaScript to rearrange the images in the layout. \nTo use LazyLoad with responsive images  you just need to use the src and the srcset options as described in the README file, along with the sizes attribute or the picture tag depending on the result you\u2019re looking for.  And of course you should already know how responsive images work in advance.. Current version of chrome is 61, so Chrome 54 is quite old. Version 10 of LazyLoad is made only for modern browsers. \nHave you tried version 8 of LazyLoad, which is the recommended version?\n. Good to know!\nThanks . Please repoet the error that you are getting or the unexpected behavior and more importantly the version of LazyLoad that you are using. The recommended version is 8.2.x. @warudin, please let me know if the comment from @yekowele helped . LOL. Yes, switch back to version 8.2 to make it work correctly on Safari. Until Safari won\u2019t update and support IntersectionObserver . I brought @Spone's fix to both versions 10.3 and 8.2. See CHANGELOG.md. Thanks!. Thank you!. Hi @jquimera,\nyou could use the callback_load callback provided by the LazyLoad script in the options so you could execute code every time an image is fully loaded. \nFor example, you could check if there are still images with the loading class in the container, then add or remove classes in the container itself accordingly. . Yes, that is the callback_load.\nProbably the code you\u2019re writing inside the callback function is wrong :). Yeah, you\u2019re right. I need to organize it better. Maybe I should keep only one readme with all the examples and the demos for both versions. It would be clearer, wouldn\u2019t it?. Released 8.5.0 with the same API as version 10. Solved \ud83d\ude04 . You can hide imges while they\u2019re loading using CSS already, but I advice not to hide them since your users won\u2019t be seeing nothing until loading is complete, and for the best practices about performance the sooner you show something, the better. Also, your SpeedIndex will improve and so your SEO. . Yes, if new images are added dynamically, you can use the update method in order to make LazyLoad consider them. \nThere\u2019s a demo for this feature inside the demos folder.\nLet me know if this solves. . Hi @xpander001,\nthank you for writing this.\nThe reason why my script doesn't do anything when a background image is loaded is because there is no way to know when a background image is loaded in Javascript. Browsers simply won't fire any event or call any callback when a background image is loaded, and they don't because background images are meant for decorative purposes only, they could be removed from the page and nobody would care.\nAnd this closes the issue (there are other similar issues already closed, I guess).\nBut from the way you are putting it, it looks like the images you're loading lazily are not just decorative images, but they are meaningful content instead. If they are meaningful content, you should really think again and use the img tag instead. If you used it, you could:\n\nknow when the images are loaded (and having the \"loading\" class removed by the script)\nbenefit from SEO since crawlers would index your images and your alt text content\nhelp visually impaired users read your images through assistive technology \n\nSo I'd strongly advice to use real images with the img tag instead of background images, if your images are meaningful content.. Hi and thank you for your reply. \nThe only drawback I see is a performance one. Users on slow connections, like on mobile or slow networks, will only see the image once loaded instead of while loading. \nBut hey, IE9, really? Are you sure that you have more than 0.5% of users coming to your website using that browser/version? Have you checked on Google Analytics? . @leon: sure, will do. Thank you! I didn\u2019t know that. Also, having a min-height in your images will prevent LazyLoad to detect ALL images inside the viewport at page landing, so I\u2019d recommend to use a min-width that is really the minimum height of an image, not only just 1 pixel. \n@mercuryyy: this is not possible, Safari still doesn\u2019t support IntersectionObserver. Please hold on and stick with the recommended version which is 8.2.1. They will update Safari, one day. . Because the two versions of LazyLoad  are very different one from each other, 8.x has code that listens to the scroll and resize events, whereas 10.x used IO and has totally different code. \nImplementing any internal switch would result in a much heavier script with both versions\u2019 code, and we all want our scripts to be lightweight, don\u2019t we?\nInstead, you could do a check on whether IntersectionObserver is supported or not, then load 8.x or 10.x conditionally. The script has the ability to initialize one or more LazyLoad automatically so it would be even easier to make this happen. . Hey @mercuryyy,\nthank you for the inspiration!\nHere's the code you could use to download LazyLoad 8.x or 10.x conditionally, and auto-instantiate it on the page. So you would have a modern script where IntersectionObserver is supported, and a fallback for where it isn't.\njs\n(function(){\n    var head = document.getElementsByTagName('body')[0];\n    var lazyLoadScript = document.createElement(\"script\");\n    var lazyLoadVersion = !(\"IntersectionObserver\" in window) ? \"8.2.1\" : \"10.3.3\";\n    lazyLoadScript.src = \"https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/\" + lazyLoadVersion + \"/lazyload.min.js\";\n    window.lazyLoadOptions = {data_src: \"src\", data_srcset: \"srcset\"};\n    head.appendChild(lazyLoadScript);\n}());\nThis code was tested and it works. I've created a new demo in the demos folder, named conditional_load.html, check it out if you want to try it or play around with it.\nCheers!. @mercuryyy we're gone way off topic here, anyway I just tested it on Safari and it behaves correctly. Can you open another issue and be more specific? Thanks. @leon done! Could you specify the version of MS Edge you encountered the problem on?. > Has this issue changed since 2017?\nYou tell us. What happens if you don't set a min-height on MS Edge?\nDid you need to use the \"css hack\"?\nFrom the demos you can find in the demos folder, everything seems to work perfectly.. I\u2019ve tested my script on the demo page and it works good. So you\u2019ll need to share the HTML code and the JS code you\u2019re using for the images. \nI won\u2019t go debugging on your website, sorry. Just post the code here so everyone can benefit. \nThanks. Don\u2019t take it that bad, I just wanted you to post the HTML code you\u2019re using for one of your images, and the JS code you\u2019re using to initialize LazyLoad. \nCan you do that? . @mercuryyy did you solve the problem?. Hey @clementduncan,\nI've just tested it on this demo page which is one of the LazyLoad's demos that conditionally loads version 8 or 10 depending on the browser support to IntersectionObserver. \nIt's loading version 8.11.0 and I can't see any double image loading. I'm testing on Safari 11.1.2.\nCould you please check too? \nThanks. Interesting... It seems that Safari downloads a new image every time that LazyLoad makes a single edit to the DOM. If it is so, it must be an internal rendering thing and I'm afraid it will continue to do so even when Safari will implement IntersectionObserver. I will continue investigating on this to find a solution. Thanks for you help.. @clementduncan, @mercuryyy I think this is a hard issue to fix on the script's side, for the reason I mentioned in the previous comment. \nTo speak by examples: if an image is initially marked up like the following: \nhtml\n<img data-src=\"img1.jpg\" data-srcset=\"img1_1.jpg 1x, img1_2.jpg 2x\">\nLazyload currently copies the data-srcset value into srcset first, then the data-src value into src. Making it like that:\nhtml\n<img src=\"img1.jpg\" srcset=\"img1_1.jpg 1x, img1_2.jpg 2x\" data-src=\"...\" data-srcset=\"...\">\nThe src value should be ignored by browsers that understand the srcset attribute, but it seems that Safari re-evaluates the img tag entirely.\nThe only way to fix this would be to create a new img tag with all the attributes set, then replace it with the lazy one, but this would be an ugly, bad, breaking change. \nI'll do some more verifications but I think we'll need to consider this as a Safari \"bug\". \nAnyway it wouldn't be a big deal if the 2nd network request is identical to the 1st one, because the image would be loaded from the browser's memory cache.\nStay tuned for updates.. Hello @clementduncan,\nI'm not able to reproduce the bug on  Safari 11.1.2.\nOn this branch I modified the demos you pointed out downloading v. 8.11.0 from CDNJS.. Good to know. \nI\u2019ll close this for now, if you find the reason feel free to reopen. . I'm not able to reproduce the problem.\nChrome and Safari are loading the same amount of images and the same amount of times.\n\n\n. I\u2019m on the same Safari version as you guys. \nMaybe it\u2019s depending on the fact you are using responsive images (srcset + sizes on img, or picture tag) and you resized the browser window? This could have triggered a weird behavior of Safari. . Hi,\nin order to get help please describe the issue, the code you are using (html and js) and the version of LazyLoad you\u2019re getting the issue on. . Thanks. \nEverything should be working fine. \nAre the script placed AFTER your HTML (so to be sure the DOM is ready when the JS is executed)?\nWhat is the issue you are having?. By the way, I see you didn\u2019t use the img tag, but I took it for a copy/paste error, or markdown trying to use it as an image. But you did use the tag, right?. You should really use responsive images in order to make mobile phones use a smaller version of the image. \nGoogle \u201cresponsive images\u201d to find out more. \nMy LazyLoad script supports responsive images so you will have best results on mobile too.. Hi there, \ncould you tell me in what browser and version you get the error?\nAlso, could you post the HTML code of the img's container? It's kinda strange that your img tags don't have a parent element, right? It should be body, ad least. . I tried different cases but never found one where an img's parentElement could be null.\nThe only case would be when you create an img but you don't attach it to the DOM (see here). \nBut in this case, I can't see how LazyLoad could be useful.. I've replaced parentElement with parentNode, which behaves better.\nCan you try with the latest versions of LazyLoad, 10.3.5 and 8.5.2?\nThanks\n. @delideha did you solve?. Yes please, the parts of HTML and JS related to LazyLoad (your images and the LazyLoad initialization). \nThanks. @tabrisrp, you there?. Thanks. HI @dhunink,\nthanks for reporting this. \nYou\u2019re using the latest version/s of LazyLoad, right? I guess so.\nThis error might be caused by Wordpress removing some DOM from the page. My script then reads the property tagName from the image element and its parent, but the element became null for some reason. \nWe can fix the script checking that the image is still existing (not null), but I would like to understand the reason of the bug first. \nDid you already do some debugging on your webpage code?. I'd advice you to AVOID using LazyLoad on the images in the slider, because LazyLoad only works in actual scroll containers, and it doesn't affect sliders since they don't do actual scrolling but they move objects (typically images) instead.\nYou should use Revolution Slider's LazyLoad option.\nThat said, I will integrate your fix that checks parent, which would solve the javascript error, but it wouldn't make sliders to load images lazily.. I've checked and I saw that the current version of WP Rocket does NOT use my LazyLoad. See the LazyLoad page of WP Rocked documentation\nAre you sure that the problem is with my script?. I've added the check in 10.5.2 so your problem should be solved.. Hi @AndrewCraswell,\nsure, if you already use LazyLoad to load your images, you could instantiate a second LazyLoad and make it load only those images. For example, if you already do:\njs\nvar yourMainLazyLoad = new LazyLoad { elements_selector: 'img.lazy' };\nYou could instantiate ANOTHER lazyload for the deferred images only at window.onload. So:\n```javascript\nfunction init() {\n  var yourOtherLazyLoad = new LazyLoad { elements_selector: 'img.defer' };\n}\nwindow.onload = init;\n```\nThis would load the img.defer images (that are inside the viewport), at the window load time.\nThe markup for the deferred images could be the same as the lazy images, with the only difference that the first ones have the lazy class, and the second ones have the defer class.\nYou could also use any other kind of CSS selectors for the elements_selector option, but I think the class is easier to read, and you could use data-src and data-srcset in both the lazy and the deferred images.\nAlso please note that loading images after the window load event could determine a browser reflow and repaint, which is a slow operation, unless you reserve space for the images before they load.\nCheers!. PS: I saw you starred a lot of lazyload scripts, but not mine. I'm a little bit jealous now. ;) Will you star mine too?. Awesome. Thanks! :). Also, I didn't understand what you're trying to achieve here. Maybe if you ask me, I have the solution already.. I think you were rrying to achieve what I then released in version 10.4.1 and 8.6.0. \nThe LazyLoad can now be used to just know when a simple div entered the viewport, in order to LazyLoad pretty much everything, aka the Disqus comment section in a blog page.\nI\u2019m gonna close the PR then. If you remember what you were trying to achieve and it\u2019s not what I already did, feel free to reopen. . Hi @alvarotrigo,\nthank you for the suggestion, this is a very good idea and a very small code change is required.\nI'd introduce a new callback called callback_enter that would be called when the element enters the viewport (considering \"threshold\").\nWhat do you think?. I did it. And released it under the version tag 10.4.0.\nWhen it will be on CDNJS, this fork of your fiddle shoud work https://jsfiddle.net/cqwjL3ku/\nLet me know if we're good :). You\u2019re right, I did it all in a hurry yesterday night and I forgot to update the dist folder, and to run npm publish. Will fix it soon. \nVersion 8.x is still not updated. I wanted to be sure that this was working as you expected on version 10 beforehand. \nI\u2019ll let you know. \nThanks for your patience. . Just released the fix as 10.4.1. Also on npm.\nYou can use it like that:\njs\nll = new LazyLoad({\n    callback_enter: function (element) {\n        logElementEvent(\"ENTERED\", element);\n    }\n});\nLet me know!. Hi @alvarotrigo,\nthe fix is now available in both versions 10.4.1 and in 8.6.0.\n\\o/ yay! I'm closing the issue now.\n\nBy the way, how can I install both version with npm to make use of the conditional loading? (without using the CDN)\n\nWe were figuring out today and I think that you can't, meaning you must use the CDN.\nIf you figure something out to do that, please let me know.. Hi @Tabrisrp,\nall that you wrote is correct: the script is currently unable to detect new elements, so you'll have to call update() on the LazyLoad instance when new content gets added to the page. \nWe have a couple of demos for using LazyLoad with dynamic content, here passing a selector and here, passing a NodeSet object to it.. Ah, if you add LazyLoad asynchronously, you can still assign the automatically created instance of LazyLoad to a variable. The code for this is here and there's also a \"recipe\" in the readme file, under the heading \"Auto init + store the instance in a variable\". There's a way, though, to make LazyLoad auto-update when new content gets added to the page. \nIt can be done using the MutationObserver API either in the hosting website's script or in the LazyLoad script itself. \nThe only constraint is that MutationObserver only works starting from IE11, and some LazyLoad users want to use support older browsers too. Anyway the support would be quite widespread already.. Great! Just yesterday I was playing around with MutationObserver too. I\u2019d like to integrate it in the script, but I need to better understand how it works in the depths of the DOM chain. \nCould you please copy and paste the MutationObserver-related part of your code here?\nThat would help. . Hey @Tabrisrp,\nI think that it has to be an external script to call LazyLoad's update() method when the DOM is updated. \nOne way to do it is right the way you implemented it. Another one would be to call update() after injecting new DOM.\nI don't think this DOM change management should be in charge of LazyLoad.\nAnyway, thank you for your collaboration!. The setTimeout function is used only to throttle the calls to the scroll / resize handler function. It's used only on version 8 since the IntersectionObserver doesn't need to. . Yes it would, I didn't do it until now because I didn't focus on improving performance in version 8.\nI just looked up whether or not it's possible to use requestAnimationFrame to debounce scroll handlers.\nIt seems that it's possible.\n. Hi @alvarotrigo,\nI've read this article thoroughly, and not I've got an answer to your question.\nThe answer is no, requestAnimationFrame wouldn't be a performance improvement. \nThe reason is that the throttle function used internally by LazyLoad makes sure that the scroll event is executed not faster than every 150 ms (by default, but this is an option). Using requestAnimationFrame would execute it every 16 ms, and this is unnecessary.\nThe usage of requestAnimationFrame is highly recommended in scripts generating animations, like drawing on the screen, changing the layout of DOM elements, to guarantee the render at 60 fps. I think that this is not the case of LazyLoad.\nLet me know if you had something else in mind, otherwise I'll close this issue.\nMerry Christmas!. Hi @ikanedo,\nyou\u2019re right. Could you do a pull request to fix this?\nThanks. Verified the bug in the jsfiddle. @ikanedo would you be able to fix this with a pull request?. Hi again @ikanedo.\nI transported your example to a Pen on Codepen and applied some CSS fixes to it.\nThe scrolling container needed to have a height, and the lazy images needed to have a min-height at least, in order to avoid being loaded all at once. \nOnce fixed those issues, the script works as expected. Am I missing something?. Did you change anything? I can't see changes here.\nThis shouldn't be a pull request, but an issue. Could you open this as issue?\nThanks. Hi @liborvanek,\nthat's a good question.\nLet me think... so you want to block parallel loading of all the images in order to reduce the TTFMP (time to first meaningful paint), giving control to Javascript instead of the browser to download the images in series instead of in parallel.\nI can't see how this could perform better, since parallel loading fills the gaps of network round trips that would occur while downloading one single image. Are you sure of what you're asking? Have you tried and measured that?\nI don't think I will develop this feature inside the LazyLoad, since it's a very singular request and it would add code which is unused by most... but maybe we can think of a workaround which uses the callbacks provided by LazyLoad to do so. \nHere's what I suggest: \n\nyou demonstrate that serial loading is better than parallel loading in order to reduce TTFMP\nwe work together to a workaround which uses LazyLoad's callbacks to achieve that.\n\nWhat do you think?. Hi @liborvanek,\nI'm still not convinced that serial mode can be faster than parallel, because if you go serial there will be a network idle time between one image load and the next image start loading, whereas parrallel loading minimizes that.\nYou would need to do a demo A) in which 50 images load in parallel, and another B) in which they load in series. I'm convinced that A) would be faster.\nAnyway the best pratice on pages is to eagerly load the first N images (N being the number of images \"above the fold\"), then start lazily loading from the N+1 on.\nSee this repo of best practices to read more and see the code.. Hi @broguinn,\nthanks for submitting the issue and for the analysis. I\u2019ll check everything and fix it as soon as possible. . Released 10.4.2 which fixes this.. It\u2019s a good idea. Also, it shouldn\u2019t be that hard to do. I\u2019ll dedicate some time to this feature, as soon as I can. Thanks for the idea!. Sorry about being so late, I\u2019ve been very busy at work and tired at nights :) I will try and implement this feature at some point, but I just don\u2019t know when, and if it\u2019s possible to do this with a few lines of code. If it\u2019s not feasible with a few lines of code, I\u2019d probably skip it, since the vast majority of users want to do the opposite: load images before they enter the viewport to avoid their users see the loading time, but I get your point.. Hey guys! I've just released version 10.16 beta with the new feature, so you can give it a try! \nLet me know how it goes and if I can promote it to stable!\n(I gave it a try in the demos folder and it works perfectly, but since it's a big change in the revealing algorithm, I want your approval too!)\nRelease notes:\nAdded new option load_delay to skip loading when fast scrolling occurs, as requested in issues #235 and #166. \nPass in a number of milliseconds, and each image will be loaded after it stayed inside that viewport for that time.\nRecipe (from README.md)\n\n\ud83d\udca1 Use case: you want the images to stay inside the viewport for some time before to start loading them, e.g. to skip loading some images them if the user scrolled fast after them.\n\nHTML\nhtml\n<img class=\"lazy\" alt=\"...\" \n     data-src=\"../img/44721746JJ_15_a.jpg\"\n     width=\"220\" height=\"280\">\nJavascript\njs\nvar myLazyLoad = new LazyLoad({\n    elements_selector: \".lazy\",\n    load_delay: 300 //adjust according to use case\n});\nDEMO | SOURCE | API. I forgot to say it's also on NPM! \nterminal\nnpm install vanilla-lazyload@10.16.0-beta\nI don't know if it will released on cdnjs anytime soon. I'll check.. @tfrere I\u2019m waiting for your feedback :). Ok, closing this.. I mean, have you tested the script after your edits in the single_container and multiple_containers demos? . Ok, I'll wait for your new PR. \nThanks for helping the project. Of course,\ncould you make a pull request to fix it?. Thanks @oli-sanders!. Hi @marcantons,\nto which problems with Safari are your referring to?\nThe latest version which is compatible with ALL the browsers, including Safari, is 8.6.0.\nYou can find it here: https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/8.6.0/lazyload.min.js\n. Hi @weplan9,\nthanks for reaching out and filing this issue.\nI'm not quite sure I understood what you're trying to do here, but I forked your Codepen here, created N LazyLoad instances (one for each scrolling container), and the threshold option is working as expected.\nThe only side effect is that, creating all the LazyLoad instances right away, all the images on the left are loaded at landing time. \nWhat you could do to solve this problem is to lazily instantiate LazyLoad instances... using LazyLoad to detect when the new scrolling containers enter the viewport.\nYou could read issue #29 where we discussed this technique, and eventually check this demo.\nLet me know if you need more help.. Hello, \nI see some problems to help you solve this issue:\n- there is no such version of LazyLoad \n- you didn\u2019t report the html you\u2019re using\n- can this bug be reproduced in the MIUI web browser?. Hello? Still there?. Hi @0dp,\nThank you for the very detailed report. \nWhat @aggreggator replied is correct, if that is really the HTML code you\u2019re using. \nCan you confirm it is so? If not, can you put the real HTML you\u2019re using?. Hi @podrivo,\nhave you checked the value of the threshold option? Its default value is like 300, so the images are considered \u201cinside the viewport\u201d 300px before they actually enter it. \nIf you want the behavior your describing, please pass the threshold option set to 0. \nFor example:\nJS\nnew LazyLoad({\n  threshold: 0\n}); . Please let me know if this solved. . Just to recap.  \nYou\u2019re suggesting to use threshold only to determine \u201chow far\u201d from the viewport start loading the images, but make sure that the callback_enter function is called only when the image actually enters the viewport, as if the threshold was zero. \nThat makes totally sense. But it\u2019s going to take some time because it requires quite a change in the code. \nJust to let you and the followers know: now there is only one viewport management and the threshold option virtually expands the viewport. The callback_enter is then fired when the image enters the virtually expanded viewport and the image starts loading. To make this change we\u2019re gonna need to rethink the viewport management. \nThe first idea that comes to my mind is to manage 2 viewports:\n- one virtually expanded by the threshold option, to determine when the images should start loading\n- one vith the actual viewport size, only to determine when to call the callback_enter callback\nWhat do you think?. Ok I'll start to implement it in version 10, the latest one, where it's easier to do, then I'll implement it in version 8.x if it's possible without making the script huge. . @podrivo it\u2019s actually worse than I thought, I need to duplicate a lot of code actually, and I\u2019d need to do it in both version 10 and version 8 which use two very different ways to check viewport entering. That\u2019s why I didn\u2019t still release the fix. The best thing you could do if you need it quick is to implement your own \u201cviewport entering\u201d using IntersectionObserver. . @driskell you\u2019re right, this would be a breaking change. Anyway the callback_enter and the callback_set functions are called at almost the same time, respectively just before and just after setting the src in the image. So if your behavior is not strictly related to the src being set or not, you could use the callback_set and be safer. . Hi @podrivo, I'm assuming you solved as I was suggesting in the comments. If it isn't so, feel free to reopen the issue. Thanks. Hi @zvaehn,\nThank you for the suggestion!\nTo better understand your request, could you post here the snippet of HTML code you would use?\nThanks. That would make sense, but I never saw an SVG used like that. Are you sure it works?\nI tried it on this Pen, both with the src and the data set, but I can't see the image displayed.\nhtml\n<object type=\"image/svg+xml\" src=\"http://simpleicon.com/wp-content/uploads/mail-5.svg\"></object>\nOn the other hand, the svg file as source of an img tag works. Like:\nhtml\n<img src=\"http://simpleicon.com/wp-content/uploads/mail-5.svg\" alt=\"mail\"></img>\nSo why don't use the img tag to lazily load SVGs too?. It probably was a mixed-content issue, due to the fact that codepen is on https and the image was your . ...was on http. Thanks for fixing that.\nI\u2019ll take a look to the code to see how easy is to change the destination attribute to data. It shouldn\u2019t be a big deal. . Still here. \nSorry for taking that long, bad time. \nWill work on this ASAP. \nMany thanks for your patience.. Hi @zvaehn, I'm not quite sure this is in-scope for the LazyLoad project. Adding another meta data attribute would add too much code just to handle a small percentage of the use cases. Maybe try doing a pull request if you have an idea. Thank you for your patience.. Hi @podrivo,\nI've tried the Pen you provided on Chrome 64 on Mac, and I didn't notice any particular problem.\nI suggest you to add a minimum height to the images, otherwise they would be 0 pixel and be shown all at the same time. I did it on this fork of your Pen setting a min-height on the images, but the best way to do it would be the one I described in the section occupy vertical space and maintain ratio of the readme. If you don't feel like using the padding trick, you could also use a combination of CSS grid and SVG.\nLet me know if this solves.\nThanks. Duplicate of #176 . Hi there. The only way to do that is to place an img tag with the correct src value inside a noscript tag. All of this in addition to the lazy image tag. . Yes it should be OK for SEO because LazyLoad detects Search Engine Spiders and automatically sets the source in the images. . Thanks @peritpatrio!. Hi @tom10271,\nthreshold should work also horizontally, what might not work is if you use a slider or something different from the \"natural\" browser scroll, meaning either the browser window or a container with the overflow property set to scroll or auto.\nAre you using a slider perhaps?\nIf you're using a slider, I'd suggest you to use slick slider that also has the \"lazy loading\" feature out of the box.. Interesting. I would give the possibility to pass an array of 2 elements, x and y, on the threshold option. What do you think?. Yes you\u2019re right, I\u2019d go for that. \nIf you\u2019d like to do it your self and open a pull request, the file is src/lazyload.js and the point is where you find the following. \nJS\nthis._observer = new IntersectionObserver(onIntersection, {\n            root: settings.container === document ? null : settings.container,\n            rootMargin: settings.threshold + \"px\"\n        });. Of course. The fix would need to be implemented in both major versions. . Hey @tom10271,\nI implemented the differentiable threshold here (the code is already working) but then, when I was about to create a demo for it, I realized that I can hardly imagine a scenario where you need to set a different threshold for both directions.\nI mean, the scrolling direction is usually only one in each container, right? A container is hardly scrollable in both directions and, even it it was, why would someone set two different values for the threshold?\nYou started this issue describing your problem with the following sentence:\n\nI have a lot of images placed vertically and some images inside gallery. I set the threshold to 800px and it is working fine vertically but I want to set a threshold horizontally with 2000px. I cannot achieve it by what supported now.\n\nSo it seems to me that you have a main vertical scrolling container, the browser window perhaps, and some other horizontally scrolling containers. Did I understand correctly? \nIf this was the case, you would need to create multiple instances of LazyLoad: one for the main window, and one for each scrolling container. You could pass different options to each instance: the main LazyLoad would have threshold: 800, and the horizontally scrolling containers could have threshold: 2000.\nExample:\n```js\nvar mainLazyLoad = new LazyLoad({\n  threshold: 800 // this threshold works vertically since the browser window is scrolling vertically\n});\nvar horizontalContainers = document.getElementsByClassName(\"horizontal\");\nfor (hContainer of horizontalContainers) {\n  new LazyLoad({\n    container: hContainer,\n    threshold: 2000 // this threshold works horizontally since the container is scrolling horizontally\n  }) \n}\n```\nDid I get it right?. Also I think your issue is very similar to #172 that was opened in January.\nPlease read the resolution comment, take a look at this pen and let me know if this is your case.. Hi @tom10271,\nthank you for sharing the website.\nI can see you're using a gallery library (Flickity) on your website.\nThe fact is that when you use a gallery library, you don't have to deal with the LazyLoad options, because LazyLoad only manages scroll and the gallery libraries don't use scroll, they move the object in the page.  \nI did a quick research and I've found how to lazily load the images using Flickity: you must use Flickity's lazyLoad option. More info here: https://flickity.metafizzy.co/options.html\nThis would solve the horizontal loading, making the invisible images load only when the user requests it. \nBut this has nothing to do with my LazyLoad script, so I'm going to close this issue.\nLet me know if you have more questions.. Hi again,\nforking the project and try to fix it yourself won\u2019t work for the reason I tried to explain to you above: scroll events and carousels are two very different things. \nIf you want to fix it yourself, you would need to fork Flickity. \nGood luck, anyway. \nIf you have any questions, I\u2019m here. . The update method is only useful when you want to check the scrolling container for new images to manage, it doesn\u2019t do anything else. I didn\u2019t understand if this is your case. \nBut can I ask you the reason why you\u2019re using the picture tag? I\u2019m asking because if you want to do responsive images, most of the times you can do it simply with the img tag, using the srcset and the sizes attributes. And this would solve your issues with Flickity LazyLoad. . I still don\u2019t understand why you\u2019re using the picture tag. You probably might find this post useful. . And this article maybe. . I understand the problem you\u2019re having, but you can\u2019t fix it with this LazyLoad script for the reasons I mentioned above. \nI think you still didn\u2019t try the ultimate carousel. It\u2019s named Slick slider and I\u2019ve been using it for years. It\u2019s open source here and it\u2019s made by @kenwheeler. \nIt supports lazy loading of responsive images through the srcset in the data-lazy attribute. \nThe final solution would be a mix of my LazyLoad and Slick slider: \n\nuse my LazyLoad to instantiate a new Slick when it\u2019s close to vertically appear in the viewport\nSlick will take care of lazy loading the images horizontally. \n\nI can totally set up a demo on Codepen if you need help. . Hi there. \nYou\u2019re welcome :)\nNo, unfortunately there\u2019s no way to always point to the latest version, and I kinda would not advise to do so, especially in production, because you wouldn\u2019t have a stable environment. \nWill update the version in the readme, though. Thanks\n. Done :) Thanks. Hi there,\nThank you for reporting che issue and the solution. \nYes, IE11 needs a polyfill for the srcset attribute and the polyfill have problems in some cases. \nBut I have a question for you now. Why don\u2019t you take out the polyfill and just use the src attribute through data-src? \nIn the end, IE11 users are windows users with large screens so you probably won\u2019t need to serve responsive images to it. Also considering the small amount of users that are still on IE11. \n. Correct. My script then sets the srcset and the src in this exact order so modern browsers read the srcset and ignore the src. . See code here https://github.com/verlok/lazyload/blob/master/src/lazyload.setSources.js. Because a polyfill would make the script much heavier, and if every other script you use did that, you would have multiple polyfills imported in the page. Which is a shame. \nThat\u2019s why I\u2019m maintaining 2 versions of LazyLoad: \n\nversion 8 which works on every browser but it\u2019s slower, \nversion 10 which works only in modern browsers and it\u2019s faster. \n\nSo you have 2 options here: \n\nyou include a polyfill of the IntersectionObserver and use only version 10 (not sure if this works)\nyou load version 10 or version 8 conditionally, detecting the support for IntersectionObserver \n\nThere is a guide on how to do so in the readme. Just read it. :) . Hi @grsmto,\nthanks for asking. \nThat\u2019s because the check should be done BEFORE downloading the library, in order to know which version of the library to download. You\u2019re probably using version 10. Use version 8 to make it work correctly on iOS safari, or loading the versions conditionally using require.js. \nRead the readme for more information. . Here's what happens at the browser window's resize event:\n\nversion 8 of LazyLoad calls the _loopThroughElements() method which loops over all the lazy images to check whether or not they are inside the viewport, then if the answer is yes it calls the _ _reveal() method.\nversion 10 of LazyLoad does nothing, but the browser resize impacts on the IntersectionObserver, which triggers the revealIntersectingElements() and eventually calls the revealElement() function.\n\nI hope this helps you understand what's going wrong with your usage of this script.. @spinninghamster did you have any luck solving this issue?. Good to know. Thank you. . You\u2019re right, but I never tried it with any library yet.\nDid anyone try it already?. Please do. I would report the documentation in the main Readme file. It would be really useful to all the React community. . @sapkra did you make it?. Thank you very much. \nMe and all the react community are looking forward to reading your feedback. . I'm asking for the support of the community here. I've never tried this on React.\n@sapkra any news on your side?. Very good job @sapkra! \nAnd thank you very much for helping out!. @xuya227939 I'm investingating on this on issue #230.\nVersions 10.12.0 and 8.12.0 should work correctly. Please use those until I fix that.. Hey there, I'm reopening this because I need more information. How are you building your resources? It seems @xuya227939 you're using WebPack and UglifyJS. Is there any project / scaffolding from where I can copy your infrastructure to rapidly test LazyLoad in it?. You're right. \nSince 8.13.0 and 10.13.0 I changed the module formats (AMD, UMD, ES2015 and IIFE) in the dist folder.\nThis thread is now not anymore related to React usage, but to WebPack bundling.\nI'm investigating this in #230 see details there.. Duplicate of #230 . Hi everyone, \n@sapkra, @luisherranz, I created a new example of usage here on Sandbox.\nThis implementation takes the same props that you would normally pass to the img tag.\nFeel free to fork and improve!\nHave a nice week-end,\nAndrea. You\u2019re welcome guys! :). Hey @klarstrup,\nthank you for taking the time to do the fix. \nDo you have the chance to create the pull request towards a feature branch of my repo, or are you only able to pull request toward master?. Never mind, I\u2019ve just found how to proceed here https://help.github.com/articles/checking-out-pull-requests-locally/. Done!. Do you need this in version 8.x too?. Thanks! We open-source projects maintainers need kudos to keep up! \ud83d\ude04 . Hi @webserviceXXL, I'm assuming you solved after months of inactivity. Feel free to reopen the issue if you still need help. Thanks. Hi Patric,\nthank you for reporting this. \nIt just sounds strange to me because LazyLoad doesn\u2019t save the data-src nor data-srcset anywhere, so if it changes before it\u2019s applied to the image, the new value should be considered. \nIf the image has already entered the viewport, though, the image just stops being considered by LazyLoad, since its job has been done already. \nWhat I advice you to do is the following: when Vue is about to change the value of the data attributes, if the data-was-processesed on the image is set to true, write the value in the real src/srcset attributes instead.\nDoes this sound feasible using Vue?\nIf it isn\u2019t, you might consider using a MutationObserver like the LazySizes plugin you mentioned does. \nAlternatively, I could make the update attribute re-mark all the images as \u201cnot processed\u201c, or add a new public method to do that. \nLet me know what you think. \nThanks. Hi @patric-eberle,\nsorry for my delay in the reply, it's been turbo days.\nI was thinking about a possible better solution now, which is: when Vue changes the value of the data-src/data-srcset attributes, also set the data-was-processed attribute to false or remove the attibute altogether, then call LazyLoad's update() method.\nThis will make LazyLoad re-consider the image you changed, and it will re-set the image src lazily.\nDoes this sound feasible?. I checked it and it works as expected.\nSee this pen and also this one which uses a function to DRY the first one.. Hi @patric-eberle, \nI'm assuming you solved in the past months of inactivity. Feel free to reopen the issue if you still need help.. Sorry @nnagewad, I'm failing to understand what you're asking here.\nMaybe you can ask a more specific question? . @nnagewad, I'm assuming you solved after months of inactivity. Feel free to reopen the issue if you still need help.. I was just about to take a look on your issue. Good to know you\u2019ve solved it yourself. :). Hi @umesh-velir,\nthank you for this request. Could you clearify two of your sentences?\n\nI could not use aspect ratio approach\n\nAre you referring to the tip&trick I wrote in the tips and tricks section, about occupying vertical space? If yes, can I ask you why can't you use that?\nThe \"load all images\" feature shouldn't be hard to implement in the script, it's just a loop and a function call, but I fail to imagine a case where this could be useful to anybody. In other words... you need to convince me :). Hi @gyoungbe,\nLazyLoad shouldn\u2019t be used in carousels,  since carousels don\u2019t use scroll events but they move the elements in their own way. \nIf you want to lazy load images in a carousel,  you should find a carousel with the lazy load feature included, like Slick.js. \nPlease let me know if you have any more questions. \nThanks . Yes, you can just select all lazy loaded images via jQuery or document.querySelectorAll, cycle them in a loop and copy the attribute from the data-src to the src, and to the same with the srcset. Do you know how to do that or you need a hint?. Of course I can develop a public method on LazyLoad which immediately loads all the images. It would be simpler to you, wouldn\u2019t it. . @umesh-velir, you're served.. You now have a method called loadAll which you can use to force download all the images.\nPlease find the code and the demo in the demos/load_all.html demo.. You got them!. Hi @james-ig-phillips thank you for asking,\ncan I see the generated HTML what you can see in the browser showing the source?. Hi @james-ig-phillips, I'm assuming you solved in the past inactive months. If you didn't, feel free to reopen the issue. Thanks. Hey @akbarsaputrait,\nthanks for asking, but you really need to be more specific if you want us to understand your problem.\nCan you better describe what's happening?. Hi @akbarsaputrait,\nthank you for sharing the code. \nCan you better describe what's happening? The sentence \"When I use lazyload with fancybox, the image does not appear, but when I click its link, the new image will be uploaded.\" doesn't sound very clear to me.. It looks like you're trying and getting some screenshots using an AJAX call, then you cycle through all the resulting data and append the images inside the element #ss_yesterday, as lazy loading images. \nMy question is: why are you loading those images lazily? In my opinion, you can just load them \"eagerly\", putting the image's URL in the src instead of the data-src. You shouldn't have performance issues since the images are already loaded after the AJAX call is complete.. Hi @akbarsaputrait,\nI've just released a demo in the demos folder of version 10.6.0 which shows you how LazyLoad should be used with a popup layer.\nI didn't find the API to do so using FancyBox, so I used Magnific Popup which is much more configurable and programmable.\nIf you have any other questions, feel free to ask.. Hi @a7medm7med,\nsee #136 and #151, there is no way to know when a background image has been loaded in Javascript.\nSorry!. Duplicate of #198, #151, #136.. Hey there everyone,\nthank you for the questions and the ideas. \nSince you\u2019re not the first asking about adding/removing classes or triggering events when a background image is loaded, I might think about adding the feature you\u2019re suggesting inside my script. \nBut I have a question to ask beforehand.\nWhy do you use background images instead of proper imgs for your content images? Isn\u2019t the img best for usability (users can click and save images) and accessibility (screen readers can treat the images like images, and real the alt content instead)?. @richgcook that\u2019s right! \nThere isn\u2019t a real motivation to use a background image for content images in 2018. \nAnd real background images can be loaded lazily, but rarely you need to check when they\u2019re loaded. \nAnyway I\u2019m thinking about developing an example of how to use LazyLoad\u2019s callbacks to control the loading of the background images. . > Anyway I\u2019m thinking about developing an example of how to use LazyLoad\u2019s callbacks to control the loading of the background images.\nDid it! I've updated this demo, now it uses LazyLoad's callback_enter callback to create a DOM fragment containing a real image, then attaches the load event listener to it, in order to know then the image is loaded. It also adds and removes the loading class from the DOM element addressed by the background images.\nHere's the code:\njs\nfunction logElementEvent(eventName, element) {\n    console.log(new Date().getTime(), eventName, element.getAttribute('data-src'));\n}\nfunction logEvent(eventName, elementsLeft) {\n    console.log(new Date().getTime(), eventName, elementsLeft + \" images left\");\n}\nfunction createImageFragment(srcUrl) {\n    var imageFragment = document.createElement('img');\n    imageFragment.setAttribute('src', srcUrl);\n    return imageFragment;\n}\nll = new LazyLoad({\n    elements_selector: \"a\",\n    callback_enter: function (element) {\n        function callback_load(event) {\n            element.classList.remove('loading');\n            logElementEvent(\"LOADED\", element);\n            imageFragment.removeEventListener('load', callback_load);\n        }\n        var imageFragment = createImageFragment(element.getAttribute('data-src'));\n        imageFragment.addEventListener('load', callback_load);\n        element.classList.add('loading');\n        logElementEvent(\"ENTERED\", element);\n    },\n    callback_set: function (element) {\n        logElementEvent(\"SET\", element);\n    },\n    callback_error: function(element) {\n        logElementEvent(\"ERROR\", element);\n        element.src = \"https://placeholdit.imgix.net/~text?txtsize=21&txt=Fallback%20image&w=220&h=280\";\n    }\n});. @Danetag because it can\u2019t. The browser doesn\u2019t throw any event when a background image is loaded. . @Danetag the question is: why would you need to know when a background image is loaded, if it's only a background image so it's not meaningful to the users? And if it's meaningful to the users, shouldn't it be a proper img?. Also, LazyLoad doesn't create any DOM fragment images to understand when images are loaded, it only listens for the loaded events of the original DOM elements. \nThis is because:\n- LazyLoad also works for <iframe>, <video> and <audio> tags\n- Background images could be more than one, for example if you need many images to be placed using background-position\nIf you want, you can create your own workaround, as shown on this comment.. > The promise of lazy loading is to preload an image visible in the user's viewport, whatever it's a background-image or an image... No? A background-image, even not meaningful, has still a file size to consider and could be worth preloading.\nCorrect! And Lazy Load does it, it just cannot notify you developer when it has finished doing it if the image is a background image. And the workaround is in the link I provided you. PS: Technically, lazy loading is the exact opposite of preloading, but I get what you mean.\n\nIt seems to be more like a dev philosophy (listening only to events of the original DOM elements), which I could totally understand!\n\nIt is, and it's not for the other 2 reasons I put in the bullet list.\n\nIf you're open to it, I could work on a PR to propose a solution :)\n\nI'm always open to PRs, but keep in mind that LazyLoad must work also with other tags and with multiple background images. It won't be easy to make it work for all the cases keeping the script lean and small.\nThank you!. Hey,\nthat\u2019s actually a good idea!\nThe IntersectionObserver is an instance variable named _observer so it\u2019s accessible through your variable name. \nFor example:\njs\nvar myLazyLoad = new LazyLoad();\nmyLazyLoad._observer // do whatever you want with it. Now that I checked, you can\u2019t do it that way, because the IntersectionObserver\u2019s RootMargin property is Read Only. \nWhat you would need to do is create a first LazyLoad, .destroy() it after the page landing, then create another LazyLoad with a smaller threshold. \nThat would make it.  \n. Hi @axlright,\nthank you for your question. \nWe\u2019ve been there before and we found that\u2019s not possible to install 2 different versions of any npm package. \nThat\u2019s why I\u2019m providing the script to conditionally load the 2 versions from cdnjs. It can be any other CDN if you prefer to use your own. \nYou can download any other version of LazyLoad from both cdnjs, npm and GitHub itself (see Releases). \nLet me know if I can be of any other help. . Hi @axlright,\nI fail to understand why would you want to do such thing. \nPut all the code in the app.js file would mean to always have some code that is downloaded, but never executed. \nIf I\u2019m allowed to give you an advice, I think you should think about \u201cconditional load\u201d, not \u201cconditional execute\u201d of the code. \nLet me know if that makes sense to you. . To the off-topic sub-thread opened by @MEmanuelsson, I opened #202 and replied there. To @axlright I'm replying to you now. Hold on.. @axlright wrote:\n\nFor some reason, I have a tendency to favor locally hosted scripts as opposed to external ones loaded via CDN.\n\nYou say \"locally hosted scripts\" as if you were embedding your script inside the HTML of your application. If you don't do that, you're still hosting your script remotely. And remotely means that the network can fail, and it WILL fail. Using a CDN to host your scripts is much safer, since there are multiple copies of the script and if the best host fails for some reason, the network request is served by another.\nThis was just about to make you think about what's the meaning of \"locally hosted\" to you, but I got the sense of your sentence. You want all the scripts to be served by the same source, so if it fails, it fails all along the way. It's an interesting idea, but still I hope you're using a CDN to do that otherwise... you have a SPOF (single point of failure)!\nA really good thing you could do is to have all your code in one place, use conditional loading to load LazyLoad from CDNJS, and detect the script load failure with a try-catch block. In the catch, query all the lazy images in the application copy the data-srcset and data-src attibutes to the respective srcset and src. . Ok sorry, I was taking for granted that you were not serving your static files (css, js and images) from the same place from where you serve your application, and that you used a CDN for that. My fault. When you scale up to thousands hundreds of users per day, maybe consider using a CDN \ud83d\ude04 . @MEmanuelsson any reply?. > I just noticed the skip-invisible parameter in a post of yours in #105 \nFixed it in #105\n\nMoreover, I didn't find the same parameters in current 10.x version: is it intended to be added?\n\nCurrently it is not. What would you need it for?. > On the site I'm working on there is a tool containing a stack of images in the same position, and I can choose to switch from (e.g.) the first to the fourth, hence all of them must be loaded at once. In order to lower the rendering effort of the page, the hidden images have display:none.\nI see some different ways to do this, but none of them involves the LazyLoad script:\n\nwhen the user clicks to change the image, you can change the src/srcset attributes of a single img element\nyou use different img elements, but you populate their src/srcset options when the user clicks to change the image\nyou use a slideshow script which supports lazy loading, e.g. Slick Slider, without applying any transition effect \n\nMy LazyLoad is only meant to load images when they enter the viewport upon a window scroll or resize event. All other cases should be managed in your scripts.. (for the record)\nOriginal title\n\nLazy loading seems not to work with HTML5 picture element and WebP images?\n\nOriginal text\n\nI'm using your (great) code here: https://www.wonderweddings.com/weddingshop\nHowever, I'm using webp images and it seems lazy loading then no longer works.\nCould you add a fix for this?\n\nHey @flo-rider,\nI saw it working a few moments ago, in production on your website. \nI'm glad it's solved now. \nWas it a mistake on your code?. Sometimes, explaining your problem to someone else (ore something else, see Rubber Duck Debugging on Wikipedia) helps to find the cause of the problem. \nThanks for opening and closing this. . Hi @weavermedia. I\u2019m not in the condition to check your code on code pen right now (and your debug view expired). \nQuestion: have you set the scrolling container in the container option of the LazyLoad instance?. Could you please copy and paste the code in a comment here?\nYou can use the triple to format the code blocks. . Thanks for that. \nCould you post here the working URL of the codepen you had created?. Thanks. Working on that right now. . The reason for your code is not working properly is that theuploadcare` layer is shown AFTER the LazyLoad instance is created. So when it loops through elements to show, it doesn't find any.\nFirst, very ugly solution that came to my mind and works: instantiate the LazyLoad after the uploadcare execution stack has finished. You can use a setTimeout function with 1 ms delay to do so.\njs\nsetTimeout(function() {\n    var myLazyLoad = new LazyLoad({\n      container: container[0]\n    });\n    console.log(myLazyLoad);\n  }, 1);\nCodepen here https://codepen.io/verlok/pen/xzKyKo?editors=1010. The more honest, cleaner way to do it would be to use the uploadcare Javascript API to create the LazyLoad object once the dialog is open and visible. But sincerly I've spent the last half an hour reading the uploadcare's dialog panel documentation and still didn't find a solution.\nI'm sure it's there somewhere though. Maybe you know this better than me.. And this is how you do it properly using uploadcare's API\nhttps://codepen.io/verlok/pen/NzWNvy?editors=1010\nSo long and thank you for all the fish.. Hi @gvenm,\nare you able to replicate the problem in a Pen on CodePen?. Hey there. Thanks for your reply. Could you open another issue for the video support?. @gvenm I mean, please add a new issue as a request. The lazy loading of video is not currently supported, but I think it would be possible to support it with a very few lines of code.. Hi @webkitstudio,\nthank you for opening this.\nI'm not sure I understood what you're trying to explain here. Can you demonstrate this on a Codepen, or record a quick video of the incident you're encountering?\nSecondly, why don't you fork the repo and fix it yourself, then open a pull request to integrate the fix in the official version of the script?\nMany thanks. I understood what you mean now, sorry I wasn't reading thoroughly.\nI'll take a closer look to this issue in the next hours.. I tried to replicate the issue you're reporting in this codepen https://codepen.io/verlok/pen/dKvZNv?editors=1010 but I wasn't able to replicate the error handler to fire multiple times. Could you please check?. @webkitstudio any updates? Can I close this?. Closed. Feel free to open anytime if you encounter this problem again.. That shouldn't be a big deal to implement. Will check.. @gvenm I started working on it today, I confirm it should be quite easy to do. I'll keep you updated.. @gvenm you can see the few changes I did in this commit and this commit. It's still on a feature branch, need to add some tests on it, then merge it to master.. Done and released 10.7.0.\nNot yet released in 8.x version.. Done! https://twitter.com/vanillaLazyload/status/1010404143662497793. Hi @jgarite,\nI removed the placeholder option to allow the images to show while they are loading, improving the perceived performance. \nIn fact, if you use a placeholder image while loading, the lazy image will show only when fully loaded, whereas a baseline jpeg or a progressive jpeg are showed while they load. \nCan I suggest to convert your images to progressive jpeg? I think it would achieve a similar effect, but improving the perceived performance a lot. \nIf you really want to use a placeholder image, you can put the placeholder in the img tag using the src attribute. This will show that image until the lazy one is fully loaded. \nWhat do you think?. > I understand the benefits of progressive jpeg, but it's not always possible to re-compile images as different types. \nHave you ever considered a cloud based image converter like Cloudinary? It works in different ways, with auto-uploading, with API, with fetch, etc. It rocks!\n\nUsing the src attribute works, but I lose the ability to have the images fade in. It would be nice to have that. \n\nSorry I just realized there's no recipe and no link to the demos folder in the README file. Will add that.\nHere you go: https://github.com/verlok/lazyload/blob/master/demos/fade_in.html\n. I've created a LazyLoad with Fade-in effect demo on Codepen so you can take inspiration from that. If you need a placeholder image, you can put it in the background of the .image div. \nI didn't put the placeholder image in the src as advised here in order to have best perceived performance. . @jgarite what do you think?. Hard to tell which would be better for the user experience without seeing it, I can tell you that for the SpeedIndex KPI, the one that Google uses to measure your page speed, the lesser changes there are in the viewport the better.\nFor this reason I also suggest you (all) to lazy load not all the images, but only from the first one that you estimate will be out of the viewport with a good probability. \nFor example, in an commerce category page you fa out the first 6-8 images in the src/srcset directly, and from the 7th/9th on use the data- attributes to lazy load the images. \nThis will result in much better performance because the first images will be loaded even before javascript is downloaded and executed, so as soon as the browser finds them in the HTML markup.  . I mean to not include src. \nIf you include any src, the lazy image will be shown only when it\u2019s completely downloaded. \nIf you include an empty src or a placeholder image, the lazy image will be shown while it\u2019s downloading. \nThis is especially effective if your images are saved in the progressive jpeg image format, but also if they aren\u2019t. See the difference. \nLet me know if you need more information. . You\u2019re welcome, guys!\n. Hello!\nThis is not an issue I can solve in my script, if you want W3C valid HTML markup before JavaScript is executes, you can place a placeholder src in your HTML markup. \nAnyway if you don\u2019t do that, you'll still have W3C valid HTML after JavaScript is executed. . Please read the new section of the README, Do NOT use placeholder images until the end of the section.. Hi @gerdneuman,\nthank you for opening this issue, I see you are very prepared on this matter. \nThe reason I\u2019m not advising to use a transparent pixel as a placeholder in the readme is that, if you do that, the browser only shows the lazily loaded image to the users when they are COMPLETELY loaded; and if you care about performance, including perceived performance - which is measured by google through the SpeedIndex - you want the images to be shown as soon as they start loading, especially if they are in the Progressive JPEG format, but also in their baseline version. \nIs that clearer now?. Hey,\nyes, I'm sure of what I told you. I tested it a while ago, but it's like I told you. To recap:\n\nIf you don't put anything in the src, when LazyLoad copies the data-src in the src, the image is shown while loading by the browser\nIf you put something in the src, when LazyLoad copies the data-src in the src, the browser waits until the new image is loaded, then replaces the image\n\nIs that any clearer now?. Hi again @gerdneuman, about:\n\nIf there was a guidline for this by LazyLoad then at least rocket-lazyload (which I use in the end) could be updated. \n\nthis is a social coding community, why don't you fork my repo, do the change you would like to see in the README.md file, then open a pull request to integrate the change in this repo?. As a proof of what I stated in my previous comment, I've created this code on CodePen: LazyLoad, progressive JPG and placeholder images. You can view the difference setting a slower connection speed (I used \"fast 3G\") and disabling the cache.\nI also recorded a video of the result, which I published on Youtube as LazyLoad and placeholder gif loading time - a comparison.. Hi again @Niresh12495,\nthrottle was an option that one should use to make LazyLoad execute with a lower frequency the function that watches on the position of every single image. It is not an option to set time between revealing image.\nThe throttle option doesn't make sense on version 10.x anymore, because that function was replaced by the IntersectionObserver API. On version 8.x the throttle option still exists, but it's not in the documentation, anyway nobody was changing the value of that option and keeping the default one.. Uhm, interesting. Investigating right now. I'll let you know. Thanks for opening this. And sorry for the delay.. Hey @gerdneuman,\nI discovered that version 10 had an issue with SEO. The bit of code that recognized a bot and loaded all the images right away wasn't there anymore, but it was still present on version 8.\nI released version 10.11.0 with the fix.. Hey @gerdneuman,\nI'm closing this, this issue should be fixed now on version 10.11.0.\nFeel free to re-open it if you still notice the problem.. Ok I\u2019ll take a look into that. . Just released versions 10.12.0 and 8.12.0 with the fix. See changelog.. Hi @dijkermans,\nthank you for reporting this, but I\u2019m afraid I don\u2019t understand why would the images be shown outside the viewport, given that the viewport is the only visible portion of the page. \nCould you please explain?\nThanks. Thanks for the clarification.\nDid the problem come with v. 8.8.0 or was it present also in 8.7.1?. Hey @dijkermans,\nI've created this test on Codepen, which uses background images and runs on LazyLoad v.8.8.0.\nI tested it both on my Mac and on iOS 11.4 on my iPhone 5s, and I didn't found any issues.\nPlease post your HTML, CSS and JS code here if you need any more help.. Duplicate of #215. Hello @moon-lover,\nI\u2019m still investigating on how lazy loading affects SEO, after they opened #215. . You\u2019re right guys, I forgot to npm publish a couple of times. Will do as soon as I come back from holidays. . Done! . That is the expected behavior since the default value for the elements_selector is img as you can read in the API section of the documentation (readme file). \nYou can have a single LazyLoad instance passing .lazy as value and using the lazy class on the images too. . Thank you for reporting this issue. I will check and fix ASAP. \nIn the meantime, for your specific usage, you can use version 10 since on browsers where IntersectionObserver is not supported, it immediately download all the images\u2026 like you would do with the loadAll method. . Hi @bessey,\nI've updated the conditional load demo in order to store the LazyLoad instance in the window.lazyLoadInstance variable.\nThen I checked both on Chrome where version 10.x is loaded, and on Safari where version 8.11.0 is loaded. \nIn both browsers, when executing window.lazyLoadInstance.loadAll() from the browser console, all the remaining images are loaded.\nIt seems all correct to me.\nAm I missing something?. Hey @bessey,\nI'm closing this, but feel free to open it if you have any news.. Hello. This has been reported by others but it\u2019s not a bug. \nYou can find your answer reading on the closed issues reporting the same problem. . Duplicate of #199. Hi @elliottmangham,\nthanks for asking this.\nThe problem you're highlighting is because in Javascript there is no way to tell when a background image has been loaded, so we can't add the loaded class to the image and we can't fire the loaded callback (callback_load).\nFirst of all I would ask you why are are you using background images if you are loading content images. This is not a best practice imho, for more than one reason.\nIf you are willing to continue doing this, there is a workaround you can develop to make it happen. Please read #199 as you might find the solution there.\nLet me know if it helps.. Thanks @elliottmangham!\nKudos are always welcome \ud83d\ude04 . Hi @makaroni4,\nthank you for reporting this and suggesting the fix.\nI can't quite understand why would this._observer exist and not this._observer.observe, since the observer has observe in its method (see docs). \nI'm afraid that applying the fix you suggested, we would eliminate the symptoms but not the cause. \nI'll do an in-depth research of the cause, then I'll come back to you.\nIf you could provide the HTML and especially the JS code you're using, even in a private way at andrea.verlicchi gmail, that would help. \nThanks anyway. Hey @makaroni4, I've checked the code and opened this branch to support this PR. \nI didn't find any case in any browser in which there can be this._observer but not this._observer.observe. If I could see your JS code maybe I can do a better analysis and give you more information.\nThanks. Hi @makaroni4,\nthanks for sending the explanation over. \nI've seen the code on your website, and my first concern is: why do you select elements with [data-src], [data-srcset]? If it's to load lazily the source tags inside the picture tag, there's no use to do it. You can select the img inside the picture and LazyLoad does the \"if parent is picture\" detection automatically, and sets the srcset in the source tags out of the box.. As of my tests, selecting with [data-src], [data-srcset] doesn't cause any errors, it just makes the scroll down much slower. Anyway I'd suggest to use a lazy class in the images, iframes or videos you wish to load lazily, then selecting them with {elements_selector: \".lazy\"}. Hi @makaroni4,\nin version 10.11.0 I changed right that portion of code you suggested to change.\nCan you try with this latest version and tell me how it goes?\nThanks. Let's say 10.11.1. 10.11.0 had a nasty bug.. @makaroni4 please let me know how it goes with the newest versions, then feel free to reopen in case.. Hi @Pionell,\nthank you for opening this.\nCan you replicate the problem copying your code on a new Pen on Codepen?\nAlternatively, can you post your HTML code, including the lazy images, here?\nThat would really help me to help you.\nThanks. That was odd, in fact. \nIf I can be useful with anything please reopen this issue. . @berkovich-pavel which version of lazyload are you using?. @berkovich-pavel that's why. You should load version 8.x on Safari.\nPlease read the documentation (README.md) for more information.. Thanks @Tabrisrp,\nI must have been very tired when releasing that version.\nI'm already on it.. Solved this. \nThe boolean condition assigned to isBot was completely reversed. I must have pressed a keyboard combo in VS Code which inverted the condition, then I didn't double check before releasing it.\nThanks again for letting me know.. Hi Ankur,\nyou are mixing the asynchronous loading and execution of LazyLoad and the synchronous one. \nYou can remove your new LazyLoad() and pass the option literal object where you see the comment \u201cyour options here\u201d. . We open source developers? All we need is love!\nThank you . This is a great idea actually.\nHow would you imagine it?\n\nseparate data-src-webp and data-srcset-webp attributes to be used when the browser supports WebP\nautomatic replacement of the .jpg|.png extension with .webp in the usual attributes \nsimply based on the file extension\nusing a provided RegExp\n\nDid you have something else in mind?. Ciao @massic80,\nyes you\u2019re right, if you use the picture element. But using it implies having a lot more code than using the img element. . It could be developed as a plugin, actually.\nAnd the plugin would modify the behaviour of the script only when it's included in the page.\nI guess it would replace the file extensions in the data-src and data-srcset attributes from jpg to webp through a RegEx. \nWhat do you think @jakubkaderavek?. I think it\u2019s too verbose markup. \nYou could just specify the jpg source and LazyLoad could change it to Webp if supported. \nThis way the script would also execute faster without having to parse anything inside the srcset, as it is today. . Guys, @elliottmangham,\nthere\u2019s no need to put the lazy class on source tags. It\u2019s bad for performance. source tags inside the picture tags are already managed thanks to the lazy image inside it.  . > maybe, but what in case if some images not have webp format - only jpg\n@jakubkaderavek you\u2019re right, even if I think that most people use a service like Cloudinary to convert images to webp so it should be on every image. \nWell you could use a class \u201chas-webp\u201d on the images that have the webp alternative, then you can:\n```js\nvar lazyLoadForWebp = new LazyLoad({\n    elements_selector = \"img.has-webp\",\n    to_webp = true\n});\nvar lazyLoadRegular = new LazyLoad({\n    elements_selector = \"img:not(.has-webp)\"\n})\n``. @jakubkaderavek you have it in version 10.14 released today. You also have 2 brand new demos,webp_allandwebp_some`. The latter is the one that covers your case, I guess. \nComing soon in version 8.14 too. :). Thanks @shoesforindustry for pointing that out.\nI've been working for at least 3 years with images and image resizing, both on premise (in-house made algorithms) and with cloud-based SAAS such as Cloudinary, Akamai Image Manager and others. \nFrom my experience I can tell you that the quality and the weight of the images depends very much on the image content, other than the algorithms and the settings. \nTo do the comparison, I created a tool to left-right compare the images, and to switch their positions so you can focus on a particular detail without moving your eye. Me and our photography team used this tool to test the image quality.\nIt's very important to take quality into consideration if you're doing e-commerce or working with high-end clients. We found that webp might have some quality issues at medium-high quality levels in very specific cases, noticeable only with particular screens (that regular users don't own so they wouldn't ever notice), so we've stopped automatic webp conversion on some of the websites we manage, on the client request. \nConsidered that, I think that for most cases WebP is very good and efficient, but everyone should consider it and test it on a mixed set of their own images.. You're welcome \ud83d\ude07 . All done in versions 8.14 and 10.14.. Hi,\nwhat you said is correct. \nTo have lazy images in slick, you need to use Slick\u2019s lazy load feature. \nSee Slick demo page. . Unfortunately Slick is taking the DOM elements out of their natural position so LazyLoad is unable to detect them. \nHave you tried also LazyLoad 10? It uses IntersectionObserver to detect elements so maybe it works with Slick too. \nLet me know!. Thanks for the update. So we'll stick to what I wrote before: you need Slick's lazy load feature. \nHappy refactoring! :). BTW congrats for using Opera, it's my favorite browser too! \nI use it since the earlier versions with Dragonfly developer tools, but now that it has the same features of Chrome it's even better.. @ValentinCreative, @FlaviuRadulescu, if you read the API documentation, the update() method only checks if newer lazy images have been added to the DOM after LazyLoad was instantiated, so there shoudn't be necessary to call that method each time a slider sled. Probably just call the method after you initialized Slick.. Guys, @elliottmangham,\nthere\u2019s no need to put the lazy class on source tags. It\u2019s bad for performance. source tags inside the picture tags are already managed thanks to the lazy img inside it.\nTry without the lazy-img class on the source tags. If it doesn\u2019t solve, please share a link to the website or a Codepen so I can take a look. Hey @elliottmangham,\nI just copy-pasted your code in a new codepen, and:\n\nI don't get any console error\nIt works, and it loads the webp version on Chrome and Opera\n\nhttps://codepen.io/verlok/pen/VBBqjq\nPlease tell me if I can be of any other help.. @elliottmangham what LazyLoad does is to simply copy the value of data-srcset into srcset, and data-src into src. LazyLoad doesn't parse or elaborate the values of the attributes, so if your CMS writes it wrong it cannot trip lazyload up, it can just produce wrong HTML. . Hi @elliottmangham,\nI took a look at the website you sent over. I saw the error in the browser developer tools. The message is Failed parsing 'srcset' attribute value since it has an unknown descriptor, which means that you put a wrong descriptor in the images' srcset attribute.\nI went in debug mode and I found the following srcset being set\njs\nsrcset;\n\" http://.../wp-content/uploads/2018/07/18214414/london-office.png x1, http://.../wp-content/uploads/2018/07/18214414/london-office.png x2\"\nThe descriptors are wrong. You have x1 and x2 while the correct descriptors are 1x and 2x.\nI hope this helps.\nCheers!. PS: It seems you are serving the exact same image both to retina displays and non retina displays. The image descripted by 2x should be twice the height and twice the width of the 1x. If you can't have two dimensions, just take away the srcset and leave the src.. You're welcome! I accept coffee. \nJust sayin' \ud83d\ude07 . Hey guys, thank you for reporting this.\nI'm afraid I need more information to help you. \nPlease tell me how you include LazyLoad (npm install? CDN script?) and how you use it. \nShow me the code and I will be able to understand what happens.. Just to let you know, in version 8.13 and 10.13 I changed the content of the es2015.js file. \nIt used to be wrapped in UMD (Universal Module Definition), whereas now it's just a regular ES module.. Hey @fakership,\nthanks for reporting it. I'll definitely check and get back to you. . Hey @fakership,\nI've created this GitHub test repo in which I call LazyLoad as an ES2015 module, and everything works as expected.\nSo I think the problem might be related to something else you are using to bundle or minify your code.\nWhat are you using? WebPack 4? Rollup.js? Babel is included in the mix?\nPlease share more information so I can investigate more.\nThanks. I was able to reproduce the bug using WebPack to bundle LazyLoad in this test repo.\nhttps://github.com/verlok/lazyload-es2015-webpack-test\nNow I'm going to fix it. I'm sure it's just a matter of webpack configuration..  I found the issue. It was a mistake in my package.json . Just released 8.15.0 and 10.15.0 on npm.\nThe issue should be fixed now. Let me know!. I've tested it in this repo and checked that now it works correctly.\nThank you @fakership and @massic80 and @l3aconator for reporting your issues!. Hey @gaetan-puleo, thank you for pointing that out.\nYou're totally right, I changed my mind during the publication process so the documentation wasn't updated.\nThis is the correct table of filenames and versions, which I fixed also in the changelog and in the release notes on GitHub. \n| Filename               | Module Type                                    | Advantages                                                         |\n| ---------------------- | ---------------------------------------------- | ------------------------------------------------------------------ |\n| lazyload.min.js      | UMD (Universal Module Definition)              | Works pretty much everywhere, even in common-js contexts           |\n| lazyload.iife.min.js | IIFE (Immediately Invoked Function Expression) | Works as in-page <script src=\"\">, ~0.5kb smaller minified        |\n| lazyload.amd.min.js  | AMD (Asynchronous Module Definition)           | Works with the require.js module loader, ~0.5kb smaller minified |\n| lazyload.es2015.js   | ES Module type                                 | Exports LazyLoad so you can import it in your project            |\n. Ciao Pietro,\nthanks for reporting this. \nIt looks like you have a scrolling container which is not the document element but the #wrapper.\n```css\nwrapper {\nbackground: #ffffff;\nbottom: 2vw;\nleft: 2vw;\noverflow-y: scroll;\n-webkit-overflow-scrolling: touch;\nposition: fixed;\nright: 2vw;\ntop: 2vw;\nz-index: 2;\n\n}\n```\nTake a look at the single container demo. You should pass the scrolling container in LazyLoad's options.\nSomething like:\njs\nvar wrapper = document.getElementById(\"wrapper\");\nnew LazyLoad({\n    container: wrapper, \n    elements_selector: \".lazy\"\n    /* more options? */\n});. You're welcome! I accept coffee. \nJust sayin' \ud83d\ude07 . Glad to see you made it! :). Hi @bezysoftware,\nThank you for asking. \nIn my opinion didn\u2019t provide enough  information to help us help you. \nCan you report a portion of your html and JS code so the community can understand and help?\nThanks. I consider this solved since you didn\u2019t reply in the latest months. Feel free to reopen if you still need help. . Hey Mark,\nI think this is very similar or the same to what they asked me in #166. \nWhat do you think?. That\u2019s a good idea. \nIt\u2019s the way I was thinking of to implement it. I still am out of time currently but I\u2019m open to pull requests if you want :)\nDo you need it on version 8, version 10 or both?. Duplicate of #166. Hi @mntilbury, \nI'm currently developing it and I have a working draft in the feature/loadDelay branch (see here).\nI was wondering if you need this in version 8.x too or only in version 10.x, because the way to do it in the different version is very different (so it's double work).\nOf course you need it on version 8.x, it's the recommended and best one, right? \ud83d\ude04 . You're right. Thanks for the reply. . Hey guys! I've just released version 10.16 beta with the new feature, so you can give it a try! \nLet me know how it goes and if I can promote it to stable!\n(I gave it a try in the demos folder and it works perfectly, but since it's a big change in the revealing algorithm, I want your approval too!)\nRelease notes:\nAdded new option load_delay to skip loading when fast scrolling occurs, as requested in issues #235 and #166. \nPass in a number of milliseconds, and each image will be loaded after it stayed inside that viewport for that time.\nRecipe (from README.md)\n\n\ud83d\udca1 Use case: you want the images to stay inside the viewport for some time before to start loading them, e.g. to skip loading some images them if the user scrolled fast after them.\n\nHTML\nhtml\n<img class=\"lazy\" alt=\"...\" \n     data-src=\"../img/44721746JJ_15_a.jpg\"\n     width=\"220\" height=\"280\">\nJavascript\njs\nvar myLazyLoad = new LazyLoad({\n    elements_selector: \".lazy\",\n    load_delay: 300 //adjust according to use case\n});\nDEMO | SOURCE | API. I forgot to say it's also on NPM! \nterminal\nnpm install vanilla-lazyload@10.16.0-beta\nI don't know if it will released on cdnjs anytime soon. I'll check.. @mntilbury could you try 10.16.0-beta and tell me if it works as you expected?\nIt's working perfectly in the demos, I just wanted your confirmation. \nThanks in advance. Closing now. Fixed in 10.16.0.. Hey, Lewis,\nit seems to me that your secont project has installed a version before 10.15, which fixed the \u201cnot a constructor\u201d problem. \nCan you do a check for me? Look inside the node_modules/vanilla-lazyload. ...and open the package.json file inside that folder. What is there inside the version field? . In case you have two different versions installed, run npm install --save vanilla-lazyload@10.15.0. This should solve it all. . Hi @lewishowles,\nsince version 10.15 LazyLoad exports itself as a ES6 module, so you can now import it both:\n\nfrom the HTML as <script type=\"module\"> --> see repo lazyload-es2015-test for reference\nusing the ES6 module syntax import LazyLoad from \"vanilla-lazyload\" then bundle with WebPack --> see repo lazyload-es2015-webpack-test for reference\n\nI don't know exactly what require('module').default does, but from what I read on StackOverflow this might be the solution if you import the script using require.\nDoes it work for you?\nAnd if yes... do you know why? \ud83d\ude04 . Maybe it's just the way Laravel Mix configures webpack in one project and in the other.\nES6 module syntax is best, I think, but the script should work with CommonJS too. \nI'll keep investigating.\nYou're welcome! \nIf you feel like buying me a coffee, I'm open to it \ud83d\ude04\ud83d\ude07 . Hey @lewishowles,\nI was able to reproduce the problem. \n\nIt's caused by the way LazyLoad is built and the files exposed in its package.json. WebPack does the rest.\nI'm working on a fix right now.\nIn the meantime, if you can, just import LazyLoad using the es6 syntax.\njs\nimport LazyLoad from \"path/to/lazyload.es2015.js\"\nThis is cool for webpack and it doesn't break the output.\nI'll be back soon with a fix for the CommonJS (require) version.\nThanks for not. I can't find a way to tell WebPack to use the UMD version of LazyLoad instead of the ES6 modules version.\nWhat's in LazyLoad's package.json file is:\njson\n{\n    \"name\": \"vanilla-lazyload\",\n    \"version\": \"10.15.0\",\n    \"main\": \"dist/lazyload.min.js\",\n    \"module\": \"dist/lazyload.es2015.js\"\n}\nI also tried with browser instead of module as stated in the package.json documentation.\nmain points to the UMD version (also tried with a pure commonJS version), whereas module points to the ES6 module version. \nBut I got the same result: when bundling with webpack, it uses the ES6 version instead of the UMD/CommonJS one.\nI'm officially asking the GitHub community help here! \ud83d\ude04 \nHow can I make WebPack use the file in the main field instead of the one in the module/browser field?. Hi @lewishowles,\nI found out what to do to solve your issue with WebPack and LazyLoad.\nThe best solution which would work without touching the WebPack configuration would be to use the ES6 module syntax (aka ESM), and import LazyLoad like the following:\njs\nimport LazyLoad from \"vanilla-lazyload\"\nIf using the ESM syntax isn't possible for you, or for some reason you wish to continue using the CJS require syntax like you already do (window.LazyLoad = require('vanilla-lazyload')), you should configure WebPack to load the scripts from the package.json's main fields instead. See configure webpack to resolve main fields.\nLong story short, you should edit your webpack.config.js file and add/edit the resolve.mainFields setting to [\"main\", \"browser\", \"module\"]:\njs\nmodule.exports = {\n    // other configuration fields here\n    resolve: {\n        mainFields: [\"main\", \"browser\", \"module\"]\n    }\n};\nThis tells WebPack to resolve your requires to the packages main field, which must contain contains the UMD version of the installed modules. More info here.\nThis solved the issue for me. See the commonJS branch on my repo lazyload-es2015-webpack-test.\nPlease let me know if this solves for you too.\nThanks. Closing this after 1 week. \nIf you need any more information, feel free to ask.\nThanks. Hi @ariona,\nI took a look at your code and I think the problem is that you put the source of the images in the src attribute instead of in the data-src attribute.\nTake a look at the long list of examples in the readme file or in the demos folder to get inspiration. \nLet me know how it goes. . Yes, it's normal, since Javascript doesn't fire any event on background image load.\nAs author of the script I assume that a background image is not content so it's not important to know whether it has been loaded or not. If it's content, you should use the real img tag (and put a value in the alt attribute if it's relevant).\nSee #221, #199, #198, #151, #136 etc. \ud83d\ude05 . Need to listen to the loadeddata event.. Note to self: possibly add audio to the lazy-loadable HTML elements.. Must release the fix on version 8.x too.. Solved in both versions 8.15.2 and 10.16.2. Fixed in v.10, not yet in v.8. Fixed in v.8 too. Looks good! Thanks @maeligg!. Hi @orballo,\nthank you for this PR. \nYes I\u2019m concerned about retro-compatibility with version 8, but I also think that we can do some progressive enhancement / graceful degradation here :)\nSo I think I will merge your PR in and specify in the docs that the value can either be a string or a number, but it must be a number in version 8. \nIs there any better, more elegant way to do it? \nI can\u2019t figure out any at this moment. . Hi again @orballo,\nI've temporarily moved your code in the feature/stringThreshold branch because I have some doubts about it.\nI've tried passing \"100vh\" to the threshold option but I got an error on Chrome when creating the new IntersectionObserver. The error message says:\nUncaught DOMException: Failed to construct 'IntersectionObserver': rootMargin must be specified in pixels or percent.\nSo LazyLoad is now forcing the unit to be px, but if the only other option is % I'd add another option, e.g. threshold_unit, defaulting to px and changeable to %.\nWhat do you think?\nWhat is your use case?. \n. Now I've changed the code in that branch adding the threshold_unit option as I wrote before.\nThe usage would be:\njs\nvar ll1 = new LazyLoad({\n    elements_selector: \".lazy\",\n    threshold: 100,\n    threshold_unit: \"%\"\n});\n@orballo, does this solve your use case?. Uhm this wouldn't solve the case where you want to pass different values to horizontal and vertical rootMargin.\nIt could accept an array of values in both threshold and threshold_unit, but it would be overcomplicated to use (and also to code). \n(use case, to obtain {rootMargin: \"5px 5% 5px 5%\"} you'd need to pass {threshold: [50, 100], threshold_unit: [\"%\", \"px\"]}\n\nSo maybe the best solution is:\n- if the option is a string, use it \"as is\"\n- otherwise, add \"px\" at the end of it. It's very similar to what you did, but I think isNan is scary because it returns false on empty string and spaces \ud83d\ude13 . Thank you very much @orballo for the other PR, but I'm not sure I want to repeat the validation in my script since it's natively in browsers' implementation. \n\nMaybe another solution could be to validate the string and throw a custom error from lazyload specifying that the string passed to threshold is invalid. This would avoid users getting an error from IntersectionObserver related to rootMargin (a setting that users might not know what it is).\n\nI'm not very concerned about this, because:\n\nif users will stick to the documentation, they won't get any errors\nif users would get any error, they will read the documentation\n\nIs that recursion? Not really. But it's equally funny \ud83d\ude04 \nI decided to create a new option and call it thresholds, in the end. I think it was less confusing, even if it is, a little, because it must be a string while threshold must be a number. \nReleased on 10.17 and already in the master branch.. Please take a look to the API doc in the README and tell me if you think it\u2019s clear enough. . Sorry for the delay, I thought I answered 2 days ago but my message wasn't actually sent.\nIf you really can't change the HTML markup, there's nothing you can do.. Thank you very much @orballo for the PR, but I'm not sure I want to repeat the validation in my script since it's natively in browsers' implementation. \n\nMaybe another solution could be to validate the string and throw a custom error from lazyload specifying that the string passed to threshold is invalid. This would avoid users getting an error from IntersectionObserver related to rootMargin (a setting that users might not know what it is).\n\nI'm not very concerned about this, because:\n\nif users will stick to the documentation, they won't get any errors\nif users would get any error, they will read the documentation\n\nIs that recursion? Not really. But it's equally funny \ud83d\ude04 . Thanks man!. Hi @somethingideally,\ncould you please copy and paste the error details so that I can know on which const it throws the error?\nI\u2019m on vacation now and I can\u2019t check myself. \nThanks in advance. Thank you. \nI\u2019m afraid those logs won\u2019t be of much help though, since it seems your code has been minified. \nDo you have the chance to execute unminified code and get the logs from there?. It looks like it\u2019s webpack configuration fault. \nTo avoid any, could you check if the error occurs also in this very simple repo which leverages webpack to bundle LazyLoad?\nhttps://github.com/verlok/lazyload-es2015-webpack-test\nLet me know what happens. \nThanks. @Somethingideally could you answer my question? Thanks. @wuxiuran, thank you for letting me know. \nCould you check if the error occurs also in this very simple repo which leverages webpack to bundle LazyLoad?\nLet me know what happens.\nThanks. I've just tried the es2015 version using this repo which loads LazyLoad as ES6 module (8.15.2) and it doesn't throw any errors.\nSo I really need your help @Somethingideally and @wuxiuran to know what goes wrong in your cases. . @wuxiuran, @Somethingideally, \nI've just check if the error occurs in the repo which leverages webpack to bundle LazyLoad.\nI've tried:\n LazyLoad version 8.15.2 build in development mode\n LazyLoad version 8.15.2 build in production mode\n LazyLoad version 10.18.0 build in development mode\n LazyLoad version 10.18.0 build in production mode\nI wasn't able to reproduce the error.\nMaybe you can find the solution to your specific problem in that repo?\n\nIf not, I need your help to know what goes wrong in your cases.\nIf yes, please share the solution here to others which might have the same problem.\n\nThanks. I'm still waiting for an answer to this question I've asked before.\nI've just checked if the error occurs in the repo which leverages webpack to bundle LazyLoad.\nI've tried the following:\n\nLazyLoad version 8.15.2 build in development mode\nLazyLoad version 8.15.2 build in production mode\nLazyLoad version 10.18.0 build in development mode\nLazyLoad version 10.18.0 build in production mode\n\nBut I wasn't able to reproduce the error.\nWhy do you think that WebPack build works?\nPlease let me know, thanks\n@adriandmitroca, @grund3g, @wuxiuran, @Somethingideally. Also could you post the version of WebPack and Babel you're using, and your babel and webpack configuration file? Thanks\n@adriandmitroca, @grund3g, @wuxiuran, @Somethingideally . The problem seems to reside inside UglifyJS in my opinion, given that with WebPack 4 everything works fine (see this repo). \nAnyone is having the same problem on WebPack 4?. Can I ask you why do you need all of those polyfills?\nLazyload already works with IE9+ so you don\u2019t really need to download and executes more JavaScript, if it\u2019s just for it. . @cbieser do you have an answer to my question?. Hi @vigoren,\nthank you for your kind request. \nThat wouldn\u2019t be possible at the moment. \nWhat would you need this feature for?. Yeah this is interesting. \nThe data-srcset attribute is currently unused for background images, maybe we can do something with it. Let me think. . What do you think about this solution:\n\nYou put whatever you\u2019d put in the background-image CSS property inside the data-srcset HTML attribute, like this: \n\nhtml\n<div class=\u201clazyBg\u201d data-srcset=\"url(https://images.com/bg1), url(https://images.com/bg2), url(https://images.com/bg3)\">\nThe script then copies whatever it finds in the data-srcset inside the element\u2019s style using background-Image.\nIt\u2019s different from what the data-src does. The script doesn\u2019t just copy the  data-src  content to the style background, it also wraps the image url inside a url() CSS directive. The data-srcset would be copied as is. \nI like it because:\n\nThe script wouldn\u2019t have to parse the data-srcset\nYou could also use a gradient background image together with the real images\nWe would use a pre-existing option\n\nI don\u2019t like it because:\n\nYou would have to put CSS code in the HTML attribute which should be mapped to the srcset attribute. Not this mapping wouldn\u2019t be strict anymore. \n\nProbably this \u201cdislike\u201c could be solved creating a new data-bg option, then maybe deprecate the usage of data-src to set background images. .  Actually it can\u2019t. When the users start to use it, you can\u2019t change the API without changing the version by a major. \nIt\u2019s better to start directly using data-bg. It\u2019s no big deal to have a new option. \nThank you for your reply and your issue. \nI\u2019m vacationing now, as soon as I get my hands on a computer again, I\u2019ll develop it. \nOr if you prefer, you can fork and pull request this :) . In case you want to fork and PR, you just need to edit the files:\n\nlazyload.defaults.js to add the new data_bg option,\nlazyload.setSources.js limited to the setSourcesBg function. \n\nOnce you\u2019re done, you can build the minified files using gulp and test it using the files in the demos folder.  \nWhen everything is working, open a Pull Request towards the development branch. \nThanks!. Great! Thank you very much. Thank you very much.\nThe feature is in under the final checks in the development branch, waiting to be released!. Just released in version 10.18.0\nStill need to release it in version 8.x. Now released also in version 8.16.0.\nClosing this.. Hi @cfxd\nwhich version of lazyload you use on Safari?. Sorry I tried but I couldn\u2019t spot the version used in the fiddle from my mobile (I\u2019m on vacations!).\nSo version 10.x on Safari immediately loads all images instead of loading them lazily, are you sure you want to keep using that version for all browsers?\nThe best way to do it would be to do a conditional loading like recommended in the readme. \nAbout the problem you\u2019re having, that you solved removing the data-was-processed attribute, we can discuss later. . About lazy load of images inside a carousel slider like Swiper, Slick and others, since they don\u2019t always actually scroll but the are moved by the sliders using CSS, you should definitely use the API provided by those scripts and avoid using lazyload there.\nSee how to do it for Swiper here. \nLet me know if this solves. . Also, about using the IntersectionObserver polyfill, are you using the polyfill only because of LazyLoad? It would be better to use LazyLoad 8.x in this case, for a number of reasons resulting in better performance. . @cfxd ?. Assuming is solved for not receiving replies. \nFeel free to reopen. . Thank you @cfxd!. By the way @cfxd, since LazyLoad v. 10.x and v. 8.x share the same API, and v. 10 is much better for performance, you should seriously think about conditionally loading v. 8 or v. 10 depending on the browser support of IntersectionObserver. \nFind how to do this in the docs (README.md file).. @VineetKumarKushwaha I think the solution to this issue has been found already. Please read the discussion, particularly the latest 5-6 comments. . I'll try and reformulate a final version of that discussion here. \nThe solution would be:\n\nYou put whatever you\u2019d put in the background-image CSS property inside the data-srcset HTML attribute, like this: \n\nhtml\n<div class=\u201clazyBg\u201d data-bg=\"url(https://images.com/bg1), url(https://images.com/bg2), url(https://images.com/bg3)\">\n\nThe script then copies whatever it finds in the data-bg inside the element\u2019s style using background-image.\n\nIt\u2019s different from what the data-src does. The script doesn\u2019t just copy the  data-src  content to the style background, it also wraps the image url inside a url() CSS directive. The data-srcset would be copied as is. \nI like it because:\n\nThe script wouldn\u2019t have to parse the data-srcset (@vigoren you're parsing it now, using split)\nYou could also use a gradient background-image together with the real images (@vigoren how would you use a gradient background-image given that you add url() to the images' url?). Here's how I would code the setSourcesBgImage function:\n\n```js\nexport const setSourcesBgImage = (element, settings) => {\n    const toWebpFlag = supportsWebp && settings.to_webp;\n    const srcDataValue = getData(element, settings.data_src);\n    const bgDataValue = getData(element, settings.data_bg);\nif (srcDataValue) {\n    let setValue = replaceExtToWebp(srcDataValue, toWebpFlag);\n    element.style.backgroundImage = `url(\"${setValue}\")`;\n}\n\nif (bgDataValue) {\n    element.style.backgroundImage = `url(\"${bgDataValue}\")`;\n}\n\n};\n```\nEasy peasy, isn't it?\nWhat do you think?. Thanks for the change.\nHere's some answers:\n\nMy only concern/thought was with multiple background images you then loose the ability to use the toWebpFlag (since we are not parsing the individual URL's) which may cause some confusion.\n\nYes, you're right, we should at least pass the value through the changeExtToWebP function.\nWhat do you think about this?\njs\n// Inside the setSourcesBgImage function\nif (bgDataValue) {\n    let setValue = replaceExtToWebp(bgDataValue, toWebpFlag);\n    element.style.backgroundImage = setValue;\n}\n\nI may have misunderstood this but I thought data-src was being deprecated for background URL's in general and they should be set using the new data-bg field. \n\nCorrect. But I would prefer the deprecation notice to be written in the documentation and not in the code. For now.\n\nIf not and both are present which one should take priority?\n\ndata-bg would have the priority.\nThanks again!. Merged! Thank you @vigoren for your help!. I can see that your website scrolls but maybe the images you want to lazyload are fixed in the viewport. So they don't actually scroll. So they don't enter/exit the viewport. This could be the reason because it doesn't work, but I can't be sure because I don't know what you did in your code. \nIf you could share a simplified version on a new pen in https://codepen.io, that could help me understand and help you back.. @kwaimind ?. Closing for no reply. Feel free to reopen.. Interesting issue. I think this might be a browser bug or a React bug. \nOn what browsers are you getting this issue?. Also, @zhilianghuang if you could please copy-paste some JSX code or HTML code here, I could do some tests around your HTML. Unfortunately I'm not able to type those characters. Thanks. Hi @weslley-campos,\nthat might be because in the HTML code you posted, I didn't use the data-src nor data-srcset attributes in the first images.\nThis is not a bug, this is a feature. It's to make browsers load the first N images faster, see this repo readme for more information.. I\u2019m sorry, but I fail to understand what you\u2019re trying to explain here. \nCould you please create a new pen on Codepen so I can see what the problem is?\nThanks. @weslley-campos ?. Hey @weslley-campos,\nI can see the problem in your fiddle. \nYou didn't put any CSS code to give your images or list items a min-height, so when you create the lazyload instance all the images are inside the viewport.\nThat's why they are all loaded simultaneously.\nRead more about this in the documentation (README.md file), tips & tricks section, \"occupy vertical space and maintain ratio\" (here). @ricardobrandao I get you're interested in the ticket! I need your name, surname and e-mail, the rest of the information can be filled by yourself in the registration form. \nTo contact me privately find my contact details on https://www.andreaverlicchi.eu. @ricardobrandao are you still interested? . @ricardobrandao I didn\u2019t get your email though. Sure you\u2019ve sent it to the correct email address? It\u2019s {{name}}.{{surname}} at gmail . So @bodanus7 if an image doesn't have an alt attribute, it doesn't load, not even lazily?\nWhat happens in your code when the alt is empty? Does it render an empty alt attribute (alt=\"\") or the alt attribute is not rendered at all? Just asking because the alt attribute is required.. @bodanus7 Could you please create a Pen on Codepen.io so that I can check with my Firefox and initiate a debug session?. Hey @markusweb, this is a very interesting issue.\nWhat you did using loadAll() is correct, I'd probably add some more Javascript to wait for all the images to be loaded.\nTo do this, you should wait for a number of loaded events equals to the number of images yet to be loaded.\nThe number of images yet to be loaded can be found inside wLazyLoad._elements.length, and you could listen to the loaded event in your images container, e.g. the page body tag.. Yes of course, the loading is asynchronous . We could modify the LazyLoad script so that it notifies when all the images we\u2019re loaded. But it is not something that I can do in a short time. . > would it be possible to have an option for loadAll to disable the asynchronous call?\n@markusweb I don't think so, because the loaded event emitted by the images is not a Promise.\nBut I'm making some experiment on how to handle that, hang on!. I've just added a new demos/print.html file that show you how to do that.\n```js\n// You have your global instance of LazyLoad in wLazyLoad\nvar wLazyLoad = new LazyLoad({ elements_selector: '.lazy' });\n// You need to create a function that returns a promise\n// that runs loadAll() and resolves only when there are \n// no more images managed by LazyLoad \n// (which means it loaded them all)\nvar loadAllImages = () => new Promise(function (resolve, reject) {\n    wLazyLoad.loadAll();\n    var intervalId = setInterval(() => {\n        if (!wLazyLoad._elements.length) {\n            clearInterval(intervalId);\n            resolve();\n        }\n    }, 100);\n});\n// The onbeforeprint function must then be defined as async function\n// and inside it awaits for the loadAllImages() function's promise is solved\nwindow.onbeforeprint = async () => {\n    // Maybe show a message to the user telling him \n    // that the print is being prepared...\n    await loadAllImages();\n    // ...and hide the message here\n};\n```\n/cc @markusweb . Turns out that the code above doesn't work on Safari because Safari doesn't support onbeforeprint.  \nSo the full code we'd need to add to our page would be:\n```js\n// We have our global instance of LazyLoad in wLazyLoad\nvar wLazyLoad = new LazyLoad({ elements_selector: '.lazy' });\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n/ We need to create a function that returns a Promise\n   that executes the loadAll() method and resolves only when \n   there are no more images managed by LazyLoad,\n   which means it already loaded them all /\nvar loadAllImages = () => new Promise(function (resolve, reject) {\n    wLazyLoad.loadAll();\n    var intervalId = setInterval(() => {\n        if (!wLazyLoad._elements.length) {\n            clearInterval(intervalId);\n            resolve();\n        }\n    }, 500);\n});\nloadAllAsync = async () => {\n    // NOTE: Maybe it's a best practice to show HERE a message to the user\n    // telling him that the print is being prepared...\n    await loadAllImages();\n    // ...then hide the above shown message HERE\n};\nif (isSafari) {\n    / The following code allows us to solve this on Safari too\n       since Safari doesn't support the onbeforeprint event /\n    var mediaQueryList = window.matchMedia('print');\n    mediaQueryList.addListener(function (mql) {\n        if (mql.matches) {\n            loadAllAsync();\n        }\n    });\n}\nelse {\n    / The onbeforeprint function must then be defined as async\n       to allow await-ing for loadAllImages()'s promise to be resolved /\n    window.onbeforeprint = loadAllAsync;\n}\n```\nThis code works with the current version of LazyLoad, no need to change anything in the script.\nBut it's messy, isn't it?\nSo probably is a good idea to have a LazyLoad loadAllAsync method to await for.\nI'm on it, on the feature/loadPromises branch.\n/cc @markusweb . Actually I'm trying simulating a slower connection and I've just realized that the onbeforeprint doesn't prevent the browser to open the print dialog with partial results. The assigned function can be async but the browser's print dialog opens before its full execution anyway.\nSo the best solution would be to provide a custom print button on your page which first downloads all the images, then launches the print. The above code using onbeforeprint and its Safari equivalent  be left to provide a patch to the users printing using the browser's print command, if you want.\nThis would be the full code. See it working in the feature/loadPromises branch, demos/print.html file.\n```js\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n// We have our global instance of LazyLoad in wLazyLoad\nvar wLazyLoad = new LazyLoad({\n    elements_selector: '.lazy',\n    callback_load: (el) => {\n        console.log(\"Loaded\", el.src);\n    }\n});\n/ The best way to print it is to provide a custom button which \n    first download all the remaining images, then open the print dialog /\ndocument.querySelector(\".print\").addEventListener(\"click\", async (ev) => {\n    var button = ev.target;\n    const oldContent = button.innerHTML;\n    button.innerHTML = \"Preparing...\";\n    button.disabled = true;\n    await wLazyLoad.loadAll();\n    button.innerHTML = oldContent;\n    button.disabled = false;\n    window.print();\n});\n/ The following code tries to patch the user printing using the browser's\n    print command... but this works only partially since onbeforeprint can't block\n    the browser's print dialog, which appears almost immediately /\nif (isSafari) {\n    / The following code allows us to solve this on Safari too\n        since Safari doesn't support the onbeforeprint event /\n    var mediaQueryList = window.matchMedia('print');\n    mediaQueryList.addListener(async function (mql) {\n        if (mql.matches) {\n            await wLazyLoad.loadAll();\n        }\n    });\n}\nelse {\n    / The onbeforeprint function must then be defined as async\n        to allow await-ing for loadAllImages()'s promise to be resolved /\n    window.onbeforeprint = async function () {\n        await wLazyLoad.loadAll();\n    };\n}\n``. Suddenly I realized that Promises are not supported in Internet Explorer, and given thatwindow.onbeforeprintcan't be async anyway, it's better to rollback the code based on Promises to a callback system like everywhere else.. So now in themasterbranch you have a workingdemos/print.html` file, which works in all browsers including IE11. \nWhat it does is using callbacks to keep track of how many images are currently loading. It then provides a print button which runs the loadAll() method and waits until the number of loading images is 0 before opening the print dialog.\nHere's the code for your convenience.\n```js\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nvar loadingImages = 0;\n// We have our global instance of LazyLoad in wLazyLoad\nvar wLazyLoad = new LazyLoad({\n    elements_selector: '.lazy',\n    callback_load: (el) => {\n        loadingImages -= 1;\n        console.log(\"Finished loading. Currently loading \" + loadingImages);\n    },\n    callback_set: (el) => {\n        loadingImages += 1;\n        console.log(\"Started loading. Currently loading \" + loadingImages);\n    }\n});\nfunction disableButtonAndGetContent(button) {\n    var oldContent = button.innerHTML;\n    button.innerHTML = \"Preparing...\";\n    button.disabled = true;\n    return oldContent;\n};\nfunction enableButtonAndSetContent(button, content) {\n    button.innerHTML = content;\n    button.disabled = false;\n};\nfunction printButtonHandler(event) {\n    var button = event.target;\n    var oldContent = disableButtonAndGetContent(button);\n    // Start counting how many images were loaded from now\n    wLazyLoad.loadAll();\n    var intervalId = setInterval(function () {\n        // WAITING FOR ALL THE IMAGES TO BE LOADED\n        console.log(\"::Check:: Currently loading \" + loadingImages);\n        if (loadingImages <= 0) {\n            clearInterval(intervalId);\n            enableButtonAndSetContent(button, oldContent);\n            window.print();\n        }\n    }, 500);\n}\n/ The best way to print it is to provide a custom button which \n    first download all the remaining images, then open the print dialog /\ndocument.querySelector(\".print\").addEventListener(\"click\", printButtonHandler);\n/ The following code tries to patch the user printing using the browser's\n    print command, but it works only partially. /\nif (isSafari) {\n    / The following code allows us to solve this on Safari too\n        since Safari doesn't support the onbeforeprint event /\n    var mediaQueryList = window.matchMedia('print');\n    mediaQueryList.addListener(function (mql) {\n        if (mql.matches) {\n            wLazyLoad.loadAll();\n        }\n    });\n}\n/ Tries to dowload all images before printing, but even using async/await \n    this can't block some browsers' print dialog /\nelse {\n    window.onbeforeprint = function () {\n        wLazyLoad.loadAll();\n    };\n}\n```\nI tried to put the code to keep track of how many images are loading inside the LazyLoad script, but it would require quite a refactoring. But I'll keep thinking about it.. Hey @markusweb,\nI've moved the count of number of elements still to be loaded inside the script, in version 10.19.0 (still didn't do it on v. 8.x).\nNow you have a new callback_finish options so you no longer need to fiddle with setInterval.\nHere's the final code of demos/print.html:\n```js\n/*\nCUSTOM PRINT BUTTON MANAGEMENT \n\nThe best way to print it is to provide a custom button which \nfirst download all the remaining images, then open the print dialog */\nvar printRequested = false;\nvar allLoaded = false;\nfunction printButtonHandler(event) {\n    printButton.innerHTML = \"Preparing...\";\n    printButton.disabled = true;\n    if (allLoaded) {\n        openPrintDialog();\n    }\n    else {\n        printRequested = true;\n        wLazyLoad.loadAll();\n    }\n}\nfunction openPrintDialog() {\n    printButton.innerHTML = printButtonContent;\n    printButton.disabled = false;\n    window.print();\n}\nfunction finishLoadHandler() {\n    allLoaded = true;\n    if (printRequested) {\n        openPrintDialog();\n    }\n}\nvar printButton = document.querySelector(\".print\");\nprintButtonContent = printButton.innerHTML;\nprintButton.addEventListener(\"click\", printButtonHandler);\n/*\nLAZYLOAD DEFINITION\n\nGlobal instance of LazyLoad in wLazyLoad,\nused to call the loadAll method in different points */\nvar wLazyLoad = new LazyLoad({\n    elements_selector: '.lazy',\n    callback_finish: finishLoadHandler\n});\n/* \nBROWSER'S NATIVE PRINT EVENTS LISTENERS\n\nIn order to make browsers load all the images before printing\neven if the user doesn't press the custom print button. \nNOTE that this works only partially in some browsers! */\nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nif (!isSafari) {\n    window.onbeforeprint = function () {\n        wLazyLoad.loadAll();\n    };\n}\nelse {\n    // Safari doesn't support the onbeforeprint event\n    var mediaQueryList = window.matchMedia('print');\n    mediaQueryList.addListener(function (mql) {\n        if (mql.matches) {\n            wLazyLoad.loadAll();\n        }\n    });\n}\n```\nLet me know what you think!. I still need to replicate the feature on version 8.x, which is the recommended version for Safari and IE. This will make it work with Safari with the print button. \n. Also released in 8.17.0 (for Safari and IE)\nhttps://github.com/verlok/lazyload/releases/tag/8.17.0\n@markusweb . Reopened for: in-depth cross-browser testing. That\u2019s right Markus. \nDid you try implementing the custom print page button?. Tested cross browser using this repo and live demo. I think this can be closed now. \ud83d\udc4d . Hey @bodanus7,\nthis is happening on Safari and Internet Explorer because you're using LazyLoad v. 10 instead of doing conditional loading.\nIt's all explained in the readme.md file, \"versions information\" section.\nhttps://github.com/verlok/lazyload#versions-information. I tried it on Chrome 5 minutes ago and it wasn\u2019t happening. The images were loading only when scrolling down. . It seems a problem derived from the threshold option.\nIf you still need help, please reproduce the issue on codepen and I will be able to help you. (I see you're using another script in your website now). Duplicate of #247 ?. I think the error is because uglify is trying to minify the dist/lazyload.es2015.js file which is written in ES6 and not transpiled to ES5. UglifyJS cannot minify ES6.\nYou could either:\n\ntry babel/minify \nmake your webpack configuration to point at the dist/lazyload.js\nuse the already minified file dist/lazyload.min.js\n\nLet me know what solves for you.. @wezzou1 any luck with one of my suggestions? Let us know here, it might be of help for others.. Hey @bridgeport,\nthanks for reporting this issue.\nI've reported the issue to the CDNJS GitHub repo.\nIt seems that they're having some problems at this moment.\nI'll change the version reported in my readme.md for now.\nThanks. You can temporarily download any version of LazyLoad from the JSDELIVR CDN:\n\nWith github as origin\n  https://cdn.jsdelivr.net/gh/verlok/lazyload@10.18.0/dist/lazyload.min.js\nWith npm as origin\n  https://cdn.jsdelivr.net/npm/vanilla-lazyload@10.18.0/lazyload.min.js\n\nThe two ways are almost equal, but sometimes I can't publish on npm right away so they are available on the github url first.\nBoth are working so you can choose whatever you prefer :)\nI will update the README as soon as possible.\n/cc @bridgeport . cdnjs still doesn't respond and doesn't answer via GitHub nor Twitter. \nI'm opening another issue to myself to remember switching cdnjs to jsdelivr in the docs.. @bridgeport fixed doc in README.md file. Thanks!. Done. . Hi,\nI need much more information in order to assess this potential bug. \nYou didn\u2019t answer any of the questions in the issue template. \nPlease do it and reopen the issue. \nThank you . Thanks @rbrlortie,\nI'm investigating on this. Probably it's just a matter of adding some ' quotes.. Well, I took a look at the code and it's doing everything correctly.\n\nIf you pass the background image using data-bg you need to wrap your image URL in a url(\"...\"), because it's just copied into the element.background.style (so you can use multiple backgrounds).\nIf you pass the background image using data-src you don't need to wrap it, and LazyLoad's code wraps it in url(\"...\") before copying it into the element.background.style.\n\nThat's probably why the code reported by @rbrlortie doesn't work. And to be precise, neither one of the two options would work.\nFeel free to reopen if the problem still occurs.. Hi and thank you for your suggestion. \nLazyLoad\u2019s mission is to offload the loading of below-the-fold content images which can also be responsive images. \nLazyLoad also supports background images as a list of URLs, but I think this is the limit of what it will do for background images.\n. Think of background images as images that can be removed in the printed version of the page (which is what browsers do), and content images as images that the user would like to print. \nWhat kind of images are you developing for?\nIf the images you\u2019re loading are meaningful to the user and not just \u201cbackground\u201d, you should definitely use responsive images through the img tag instead of using background images.\nSee \u201cresponsive images\u201d on google.\nLazyLoad supports both simple img with srcset and sizes attributes, and the img surrounded by the picture tag. \nSee the demos folder for examples. . Hi @psion,\nit probably doesn't work because the modal is a separate container from the main scrolling container which is the page body (document element).\nIf you want to make it work, you should create a separate lazyload specifying a different container in the option, corresponding to the scrolling container in the modal.\nBut before doing that, could you explain to me why would you need to lazyload images in a modal? I mean why don't you use the real src attribute for that image so that the images is loaded natively by the browser when the modal appears?. @psion are you still there?. Hey! Good question. \nThe answer is there isn\u2019t one. It depends on many factors, for example: what devices are you developing for? How big/heavy are the images? How fast are your users likely to scroll. Etc.\nIf you\u2019re developing for smartphones you\u2019d probably go for something like the average viewport height.. That could do the trick!\n. Hey \ud83d\udc4b\ud83c\udffc \nLazyLoad is not meant to work along with sliders. \nMany sliders already have the feature to lazy load their elements. See your slider library docs. \nAlso see other closed issues on this repo. \nThanks. LazyLoad 8, the one you\u2019re probably loading on Safari, only watches over the scroll and resize events. \nSince a slider usually moves items in space using CSS transform or position, it isn\u2019t triggered by any slider. \nYou could try making lazyLoad re-check if the elements are inside the visible portion of the slider manually calling one of its private methods, but I can\u2019t guarantee on this operation. \nWhy don\u2019t you check on Slick slider or Swiper JS?. LazyLoad\u2018s update method just updates the elements watched by the instance of LazyLoad when you add new ones. \nIf you want to force re-check if the elements are inside the viewport you must use handleScroll which is a throttled function so you can call it every time your slider moves by 1 tick, or you can call the virtually private method _loopThroughElements upon  slide finish. . _loopThroughElements is the function that checks each single watched image for its visibility. . Hi,\nIf you want help, please provide your HTML, CSS and JS code, here or on a Codepen or JsBin. \nOtherwise is very hard to understand what\u2019s happening. . Hi @salespageshark,\nI just saw it online and I was able to replicate it on my Safari, but I still need your help. Can you post here the javascript code used to initialize LazyLoad on that page?. Hi again, \nI've tried to replicate your code here but I wasn't quite able to reproduce all that complexity: you have 4 position: relative, 2 position: absolute elements and your avatar image is opacity: 0 and visiblity: hidden.\nIf you can, please isolate the code in a Codepen for me so that I can debug it. \nAlternatively, please load the unminified LazyLoad code on this page.\nI can't still figure out why your images are opacity: 0 but visible in the browser. Anyway another thing you could try is to pass the skip_invisible: false option to LazyLoad. I wanted to debug the code to see if that option was the problem.\nThat's all I can do for you know.. Hi @salespageshark,\nI see an issue with the code you're using to initialize LazyLoad: you're passing a string (\"400\") instead of an integer (400) in the threshold option. \nYou should pass an integer, like that:\njs\nw.lazyLoadOptions = {\n  elements_selector: \"img, iframe\",\n  threshold: 400\n};\nSo the full code would be:\njs\n(function(w, d){\n  var b = d.getElementsByTagName('body')[0];\n  var s = d.createElement(\"script\");\n  var v = !(\"IntersectionObserver\" in w) ? \"8.17.0\" : \"10.19.0\";\n  s.async = true; // This includes the script as async. See the \"recipes\" section for more information about async loading of LazyLoad.\n  s.src = \"https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/\" + v + \"/lazyload.min.js\";\n  w.lazyLoadOptions = {\n    elements_selector: \"img, iframe\",\n    threshold: 400\n  };\n  b.appendChild(s);\n}(window, document));\nI think this could solve your problem. \nLet me know!. I've just tried instantiating a new LazyLoad() on your website passing the correct options (the ones I wrote posted before), and it immediately loaded the images. \nSo it was just a problem of type, as you passed a string to the threshold option which expects a number, the value couldn't be used and probably broke the calculations inside the script.. Thank you @Tabrisrp!\nI think this settles it. . Hi @jakubkaderavek,\nthanks for reporting this, but I think this is not a bug.\nVersion 8.x of LazyLoad shouldn't be used to lazy load images in sliders, it's to be used only with images that enter the viewport upon a scroll or resize event, like the user scrolling or resizing the window.\nI assume that version 10 can do the trick because it uses IntersectionObserver, but I'm not absolutely sure (it depends on the slider you're using).\nThe proper way to lazily load images inside Swiper is to use Swiper APIs. See Lazy loading with swiper.\nThank you.. There are a number of other similar issues on this repo, you can find them here.. I can\u2019t see anything on the pages you linked. Totally white. \nAnyway I read that you\u2019re using a slider bottom with CSS. Did you initialize LazyLoad passing the scrolling container in the container option?\nPS: If you have 2 different scrolling containers, the window and a CSS scrolling containers, you need 2 instances of LazyLoad . Ok so @jakubkaderavek it seems this is a Chrome bug. Did they already solve it?. I verified this. The minified version is missing the managedTags const for some reason. I'll fix it ASAP. Thanks for reporting.. Solved this in later versions.. What are you doing to include the file on your project after installing it via NPM? Are you creating a bundle using webpack or gulp or grunt, and if yes, are you using a subtool using rollup or any other?\nOr are you including the file directly using a script tag?. Hi guys,\nI'm sorry that I'm so late in replying but I've been very busy in the latest days.\nThank you for reporting this issue.\nThe solution is the one @Kurzdor mentioned:\njs\nimport LazyLoad from 'vanilla-lazyload/dist/lazyload.js';\nThis imports the lazyload.js file that's been already transpiled to ES5 so it works in every browser.\nI'll add some notes in the documentation to make this clearer. \nThanks guys. Hi guys,\nsince version 8.x will soon cease to be supported in favor of v.11 + the IntersectionObserver polyfill, could you try if version 11 works as expected with you webpack configuration?\nThanks. @128keaton I\u2019ve tested it on IE and it worked perfectly with and without polyfill. I invite you to open a new issue and add a few details. It\u2019s hard to understand what\u2019s happening if you don\u2019t add any. Thank you. . Hey @jonathanstegall, what you can do is to place some DOM element in the page, for example the future container of the ad, create a custom instance of LazyLoad, then inject che script/dom element using one of LazyLoad's callbacks.\nhtml\n<div id=\"some_ad\">\n  <!-- your ad will appear here -->\n</div>\n```css\nsome_ad {\nmin-height: 1px;\n}\n```\n```js\nfunction load_ad() {\n  // put here the code to load your ads\n}\nnew LazyLoad({\n  elements_selector: \"#some_ad\",\n  callback_enter: load_ad\n});\n```. Hi @UisgeBeatha436 ,\nit the error is:\n\nuncaught exception: TagError: adsbygoogle.push() error: Only one 'enable_page_level_ads' allowed per page.\n\nthen you should call the callback just once. Like this:\n```html\n\n  var pushedGoogleAds = false;\n  var myLazyLoad = new LazyLoad({\n      elements_selector: \".lazy\"\n  });</p>\n<p>// lazyload used in the Bootstrap carousel\n  $(function() {\n    return $(\".carousel.lazy\").on(\"slide.bs.carousel\", function(ev) {\n      var lazy;\n      lazy = $(ev.relatedTarget).find(\"img[data-src]\");\n      lazy.attr(\"src\", lazy.data('src'));\n      lazy.removeAttr(\"data-src\");\n    });\n  });</p>\n<p>function load_ad() {\n    if (pushedGoogleAds) return;\n    (adsbygoogle = window.adsbygoogle || []).push({\n        google_ad_client: \"ca-pub-3514636835854223\",\n        enable_page_level_ads: true\n    });\n    pushedGoogleAds = true;\n  }</p>\n<p>new LazyLoad({\n    elements_selector: \"#google_ad\",\n    callback_enter: load_ad\n  });\n\n```. Happy to help, as always. . @vcoppolecchia did you manage to understand why you were getting the error? \nAnd in what browser did you get it?\nIf you still need help, please reproduce the issue on codepen and I will be able to help you.\n. Hi @MrUltimate,\nI'm sorry that I'm so late in replying but I've been very busy in the latest days.\nGlad you solved it, ultimately.\nI'm closing this.. Hi @AdelDima,\nI'm sorry that I'm so late in replying but I've been very busy in the latest days.\nThat's a good question, I think that LazyLoad doesn't work very well with Isotope because Isotope tries to read the image size before they're loaded. \n\nThe .update() method won't work because it just tells LazyLoad to check for more images that might have been added to the page in case of pagination, dynamic content, etc.\nThe loadAll() loads all the images, but is in a asynchronous operation so it would take time, and anyway if you loaded all the images, why bothering using LazyLoad?\n\nIf the image sizes are known before loading, have you tried specifying the image sizes in-line via CSS of HTML?. Hi @DimLeon,\nI'm sorry that I'm so late in replying but I've been very busy in the latest days.\nThat's a good point, and a good question, thank you for asking it.\nI didn't get what is the \"normal img demo\" that is correctly working, but I'll do some tests myself using puppeteer too. I'll keep you updated.\n. Hey @DimLeon,\nI don't understand why, I did the following to test the \"simple\" demo...\nnode lazyimages_without_scroll_events.js -h --url https://www.andreaverlicchi.eu/lazyload/demos/simple.html\n...and the results from puppeteer, which FAILED, says:\n\"If there are more images in the screenshot below, the page is using scroll events to lazy load images. Instead, consider using another approach like IntersectionObserver.\"\nMy objections:\n- the version of LazyLoad used on that page already uses IntersectionObserver\n- to check if the browser is a bot, I check the user agent for \"googlebot\" or \"bingbot\" which work in the real world but won't work using puppeteer\nI copied the way of detecting a bot from LazySizes, which is the first script that the Google Developers page advices. :)\nSo help me out here, I don't understand what to do next to fix this issue.. Would you try with version 11.0.0?. Yes, DOM needs to be ready. \nTo be sure of that, you can put the script that create the instance of lazyLoad at the end of the <body> tag, just before it\u2019s closing tag. \nFrom the recently updated README (that I invite you to read and give feedback, especially the \u201cGetting started\u201d section):\n\nBe sure that DOM is ready when you instantiate LazyLoad. If you can't be sure, or other content may arrive in a later time via AJAX, you'll need to call lazyLoadInstance.update(); to make LazyLoad check the DOM again.\n\nHope this helps!. Moreover, is there any chance that JS might be disabled in the Chrome run by Puppeteer?. Thank you @dan-ding for your explanation, but that\u2019s not the case because the LazyLoad script reads the user agent string and, if found to be a Bot like Google Bot or Bing Bot or others, triggers the loadAll() method immediately. So when a browser is visiting the page behaves differently from when it\u2019s a search engine crawler. . > I'm not a fan of the ua sniffing\nMe neither, but I didn\u2019t find another way to do that. \nIf anyone have any suggestions, you\u2019re welcome. . \n. This is the code LazyLoad uses to detect whether or not the browser is a bot. \n```js\nexport const runningOnBrowser = typeof window !== \"undefined\";\nexport const isBot =\n    (runningOnBrowser && !(\"onscroll\" in window)) ||\n    (typeof navigator !== \"undefined\" &&\n        /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\n```\nFirst of all, it checks if we're running on a browser, then if the browser has the onscroll function in the window object, and at last it tries to do \"ua sniffing\" to check if it's a crawler.\nIn my previous comment, I tested that code in the browser console and as you can see, if window.onscroll is falsy, isBot becomes true\nAlso other lazyload libraries use this same technique, so I guess this is working, but:\n1) I cannot test this using Puppeteer\n2) I'm not sure Puppeteer has the window.onscroll function empty, or if its user agent contains the google bot user agent.\nCan you help me out with this?. Thank you \ud83d\ude4f\ud83c\udffc . Hey @waqasy,\ngood question! The answer was in the readme.md file, find it here\nhttps://github.com/verlok/lazyload#auto-init--store-the-instance-in-a-variable\nIs that clear, or does it need clarification?. Apparently, rocket loader interferes with the javascript code on your website. If you know what you're doing, just turn it off.\nA suggestion, don't instantiate a new LazyLoad() because using w.lazyLoadOptions automatically instantiates one.\n```js\n(function(w, d){\n    var b = d.getElementsByTagName('body')[0];\n    var s = d.createElement(\"script\");\n    var v = !(\"IntersectionObserver\" in w) ? \"8.17.0\" : \"10.19.0\";\n    s.async = true; \n    s.src = \"https://cdn.jsdelivr.net/npm/vanilla-lazyload@\" + v + \"/dist/lazyload.min.js\";\n    w.lazyLoadOptions = {elements_selector: \".lazy\"}; // <= \n        // This global variable makes LazyLoad to self-create an instance of \n        // itself when loaded\n    b.appendChild(s);\n}(window, document));\nvar myLazyLoad = new LazyLoad({\n    elements_selector: \".lazy\" // <= This creates ANOTHER instance\n        // of LazyLoad, but it will initially throw an error \n        // since there won't be any global LazyLoad when these lines \n        // are executed (since the script is injected \n        // before and it takes some time to arrive)\n});\n```\nIs that clear?. That makes perfectly sense\u2019\nWould you please open a pull request to implement this feature?. @ipernet thanks for your suggestion, but if we go for the data-srcset-webp solution the markup of the image would almost double in size.\nThink about this image:\nhtml\n<img\n    alt=\"Sneakers &amp; Tennis shoes basse\"\n    data-src=\"../img/44738717AM_15_a.jpg\"\n    data-srcset=\"../img/44738717AM_15_a.jpg 220w, ../img/44738717AM_11_a.jpg 330w\"\n    data-sizes=\"220px\"\n/>\nIt would become:\nhtml\n<img\n    alt=\"Sneakers &amp; Tennis shoes basse\"\n    data-src=\"../img/44738717AM_15_a.jpg\"\n    data-srcset=\"../img/44738717AM_15_a.jpg 220w, ../img/44738717AM_11_a.jpg 330w\"\n    data-srcset-webp=\"../img/44738717AM_15_a.webp 220w, ../img/44738717AM_11_a.webp 330w\"\n    data-sizes=\"220px\"\n/>\nAnd this does have only two URLs in the srcset list. Guess when there are 5 or 10 available.. I like @michalrusina's solution best. Will try and implement it as soon as possible.. You\u2019re right that developers should worry about safe urls, but this discussion goes beyond this issue and it\u2019s OOT here. But hey, the picture tag would still be usable with LazyLoad if I did this change, I don\u2019t want to force anyone using the img tag. \nThat said, there are many differences between the two: one of them is thatpicture is much more declarative and imperative on the browser, whereas img with srcset and sizes is just a strong hint to the browser. You can can find more googling around.\nThe only missing feature of the img is the possibility to use WebP conditionally, and given that here JavaScript is already used to LazyLoad the images, replacing the URL before assigning it to the image seems a good solution to me. . Hello everyone,\nI\u2019m closing this issue because of #288. Read the discussion there please. \n@schellenbergk @michalrusina the solution to your specific problem is here https://github.com/verlok/lazyload/issues/288#issuecomment-465239290 . In the Javascript code you posted I see some errors: the \"new lazyload()\" instruction is commented out, and the \"src\" attribute of the first script is not closed. Maybe that was the problem?. Sorry I can't help you out here because I didn't understand the question. Could you clearify what floatbox is and why do you need to put all the image attributes inside the a tag?. Thanks @muturgan . Thanks again for the kudos! \ud83d\udc4d . Hi @pkjoshi,\nno, the descriptors are not required in the srcset attribute, as you can see in the MDN documentation. @pkjoshi have you checked what's in the source tags DOM after the images entered the viewport? The data-srcset attributes should have been copied to the srcset attributes both in the img and in the source tags. If that happened, it's not a problem of the LazyLoad script. If it didn't happen, it is.\nI'm pretty sure my script is working because I'm testing it right now in the demos/with_picture.html demo. Check this out online here.\nLet me know.. I\u2019ve reviewed the README documentation and updated the demos under the demos folder. Please take a look there. If you still need help, feel free to reopen. . The callback_finish should be called when all the images managed by LazyLoad were loaded, so that LazyLoad doesn't need to watch for images entering the viewport anymore. Was this clear before this reply? If it was, I'm confused. In order to have the callback_finish fired, all your images in the carousel should be loaded. Are you sure this is something you want?. You can easily check what\u2019s going wrong inspecting the elements still in the LazyLoad\u2019s observer, something like this in the console of your browser\u2019s dev tools. \njs\nlazyLoadInstance._elements\nWhat are the elements still there?. I\u2019ve made some changes in version 11.x that might have solved this issue. Feel free to reopen if you still need help. . @vcoppolecchia did @dverbovyi's answer solve the issue for you?. Good one, thanks @AlexCSR!\nAnd Merry Christmas (I saw your commit was made day December 25th).. Hi and thank you for opening this. \nThe to_webp option in fact is used by many, since the picture tag is the most verbous one when you need to do responsive images and all your image variants have the width/height ratio. \nFor brevity, and for performance optimization, it is much better to use the srcset and sized attributes of the img tag. \nIf you wanted to have responsive images using the picture tag you are, of course, free to do it, but please consider the length of the HTML portion which will be required to just render a single image. . If you want to see use cases of to_webp please take a look at the demos folder. Try and get the same result using the picture tag and see the difference. . @equinusocio thanks for your reply.\nI think your HTML example is very short since you have only 2 images: one webp and one jpg. \nConsider the following html:\nhtml\n<img\n    alt=\"Sneakers &amp; Tennis shoes basse\"\n    data-src=\"img/image_220.jpg\"\n    data-srcset=\"img/image_220.jpg 220w, img/image_330.jpg 330w, img/image_440.jpg 440w, img/image_550.jpg 550w, img/image_660.jpg 660w\"\n    data-sizes=\"(min-width: 768px) 330px, (min-width: 1024px) 220px, 440px\"\n/>\nThis provides 5 images URLs in the srcset that the browser could choose to download depending on the match between the sizes attribute and the width resolved by the browser matching viewport width and the screen density.\nTo obtain the same result using the picture tag, and supporting the webp format, you would need to do write tons of lines of source tags. . I figured out the picture tag would need to be something like this:\nhtml\n<picture>\n    <source type=\"image/jpeg\" media=\"\" data-srcset=\"img/image_440.jpg 1x, img/image_660.jpg 2x\">\n    <source type=\"image/jpeg\" media=\"(min-width: 768px)\" data-srcset=\"img/image_330.jpg 1x, img/image_660.jpg 2x\">\n    <source type=\"image/jpeg\" media=\"(min-width: 1024px)\" data-srcset=\"img/image_220.jpg 1x, img/image_440.jpg 2x\">\n    <source type=\"image/webp\" media=\"\" data-srcset=\"img/image_440.jpg 1x, img/image_660.jpg 2x\">\n    <source type=\"image/webp\" media=\"(min-width: 768px)\" data-srcset=\"img/image_330.jpg 1x, img/image_660.jpg 2x\">\n    <source type=\"image/webp\" media=\"(min-width: 1024px)\" data-srcset=\"img/image_220.jpg 1x, img/image_440.jpg 2x\">\n    <img alt=\"Sneakers &amp; Tennis shoes basse\" data-src=\"img/image_220.jpg\">\n</picture>\nAnd this only for one image serving 3 media queries and 5 image sizes. \nThe weight of the HTML would become much heavier the more media queries and image sizes you want to serve.\nImagine this multiplied for all the images in a product listing page.. > Btw your (complex) example can be reduced to something like this:\nhtml\n  <source type=\"image/webp\" srcset=\"image_440.webp 1x, image_660.webp 2x\" sizes=\"(min-width: 768px) 330px, (min-width: 1024px) 220px, 440px\" >\nOh my god, I didn't know that sizes attribute could be used in the source tag too. I'll definitely take a look into that. If it solves, lets be declarative in the HTML and leave lazyload out of this.\nThe thing you got wrong, though, is that you used the x descriptor in the srcset, in conjunction with the sizes attribute. Check this guide. \nIt should be like this:\nhtml\n  <source type=\"image/webp\" srcset=\"img/image_220.jpg 220w, img/image_330.jpg 330w, img/image_440.jpg 440w, img/image_550.jpg 550w, img/image_660.jpg 660w\" sizes=\"(min-width: 768px) 330px, (min-width: 1024px) 220px, 440px\" >\nBut I got your point.\nThanks for now.. I agree with you though, this goes beyond the purpose of lazyloading.\nI'm gonna try if this works. \n```html\n\n  <source \n    type=\"image/webp\"\n    srcset=\"img/image_220.webp 220w, \n      img/image_330.webp 330w, \n      img/image_440.webp 440w, \n      img/image_550.webp 550w, \n      img/image_660.webp 660w\"\n    sizes=\"(min-width: 768px) 330px, (min-width: 1024px) 220px, 440px\"\n\n\n\n\n```\n\nIf it does, I might consider deprecating the to_webp option.. Hey! I've tried the following HTML document in different browser (not on Safari yet), and it works great on every browser. Opera, Chrome and Firefox download the fake webp files, MS Edge the jpeg files, IE the fallback one.\nhtml\n<html>\n    <head>\n        <title>Picture!</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <style>\n            img {\n                width: 440px;\n                height: auto;\n            }\n            @media (min-width: 768px) {\n                img {\n                    width: 330px;\n                }\n            }\n            @media (min-width: 1024px) {\n                img {\n                    width: 220px;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        <picture>\n            <source\n                type=\"image/webp\"\n                srcset=\"\n                    https://placehold.it/220?text=220.webp 220w,\n                    https://placehold.it/330?text=330.webp 330w,\n                    https://placehold.it/440?text=440.webp 440w,\n                    https://placehold.it/660?text=660.webp 660w,\n                    https://placehold.it/880?text=880.webp 880w\n                \"\n                sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n            />\n            <source\n                type=\"image/jpeg\"\n                srcset=\"\n                    https://placehold.it/220?text=220.jpg 220w,\n                    https://placehold.it/330?text=330.jpg 330w,\n                    https://placehold.it/440?text=440.jpg 440w,\n                    https://placehold.it/660?text=660.jpg 660w,\n                    https://placehold.it/880?text=880.jpg 880w\n                \"\n                sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n            />\n            <img\n                src=\"https://placehold.it/440?text=440.jpg\"\n                alt=\"Sneakers &amp; Tennis shoes\"\n            />\n        </picture>\n    </body>\n</html>. The only strange thing is that my version of MS Edge (which is quite old) downloads the wrong size (660w) of the image, but the others do good.\n. I'm wondering if one could put everything inside the img tag except the webp version, which could go in the source tag.\nSo long story short, this:\nhtml\n<html>\n    <head>\n        <title>Picture!</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <style>\n            img {\n                width: 440px;\n                height: auto;\n            }\n            @media (min-width: 768px) {\n                img {\n                    width: 330px;\n                }\n            }\n            @media (min-width: 1024px) {\n                img {\n                    width: 220px;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        <picture>\n            <source\n                type=\"image/webp\"\n                srcset=\"\n                    https://placehold.it/220?text=220.webp 220w,\n                    https://placehold.it/330?text=330.webp 330w,\n                    https://placehold.it/440?text=440.webp 440w,\n                    https://placehold.it/660?text=660.webp 660w,\n                    https://placehold.it/880?text=880.webp 880w\n                \"\n                sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n            />\n            <img\n                src=\"https://placehold.it/440?text=440.jpg\"\n                srcset=\"\n                    https://placehold.it/220?text=220.jpg 220w,\n                    https://placehold.it/330?text=330.jpg 330w,\n                    https://placehold.it/440?text=440.jpg 440w,\n                    https://placehold.it/660?text=660.jpg 660w,\n                    https://placehold.it/880?text=880.jpg 880w\n                \"\n                sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n                alt=\"Sneakers &amp; Tennis shoes\"\n            />\n        </picture>\n    </body>\n</html>. Yes! It still works. It's the shortest version of the markup if one needs to have responsive images.\nI think I'll drop the to_webp option then. Let me sleep over it. Update tomorrow (GMT+1).. It also already works with lazyload, no need to do anything else.\nhtml\n<html>\n    <head>\n        <title>Picture!</title>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <style>\n            img {\n                width: 440px;\n                min-height: 220px;\n                height: auto;\n            }\n            @media (min-width: 768px) {\n                img {\n                    width: 330px;\n                }\n            }\n            @media (min-width: 1024px) {\n                img {\n                    width: 220px;\n                }\n            }\n        </style>\n    </head>\n    <body>\n        <picture>\n            <source\n                type=\"image/webp\"\n                data-srcset=\"\n                    https://placehold.it/220?text=220.webp 220w,\n                    https://placehold.it/330?text=330.webp 330w,\n                    https://placehold.it/440?text=440.webp 440w,\n                    https://placehold.it/660?text=660.webp 660w,\n                    https://placehold.it/880?text=880.webp 880w\n                \"\n                sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n            />\n            <img\n                data-src=\"https://placehold.it/440?text=440.jpg\"\n                data-srcset=\"\n                    https://placehold.it/220?text=220.jpg 220w,\n                    https://placehold.it/330?text=330.jpg 330w,\n                    https://placehold.it/440?text=440.jpg 440w,\n                    https://placehold.it/660?text=660.jpg 660w,\n                    https://placehold.it/880?text=880.jpg 880w\n                \"\n                data-sizes=\"(min-width: 1024px) 220px, (min-width: 768px) 330px, 440px\"\n                alt=\"Sneakers &amp; Tennis shoes\"\n            />\n        </picture>\n        <script src=\"https://cdn.jsdelivr.net/npm/vanilla-lazyload@10.20.0/dist/lazyload.min.js\"></script>\n        <script>\n            var ll = new LazyLoad();\n        </script>\n    </body>\n</html>. I'm going to pick the code in my picture gist and place it in a new demo in the demos folder. \nI already released version 10.20.1 which fixed a bug with the previous code (data-sizes -> sizes in the source tag), so now it's working properly and to_webp became quite useless indeed.\nCheers.. @ipernet Sounds good. Could be. way to clean up and drop the support to version 8.x at once (see #306). I've just noticed in the MDN documentation for the source tag that the sizes and srcset attributes are experimental and should not be used in production. Even if in my demo, everything works fine in every browser.\nI guess that I cannot ask LazyLoad users to use the above discussed markup to serve WebP images only where supported. So maybe for now the to_webp option still makes sense? \n@equinusocio . The W3C spec for the source tag doesn't mention anything about those attributes being experimental, though. \ud83e\udd14 . See demos/webp_native.html for HTML, live demo here https://www.andreaverlicchi.eu/lazyload/demos/webp_native.html. Great! Thanks. Will proceed as @ipernet suggested then. . #310 closes this I guess.. Hi @jstoebel,\nThe \"too much recursion\" error is possibly a require.js loop of dependencies.\nDid you manage to solve this since 9 January? (sorry for being late, very busy month!). Ok then. \nDid you notice that LazyLoad is also distributed in AMD in the dist folder?\nYou can make it work requiring the AMD LazyLoad from a CDN as a dependency of your AMD module, instead of importing the standard module version of LazyLoad.\nI know that for sure because we do that in our setup. \nI hope this make you reconsider using my (very lean and lightweight and fast and flexible) script. . True, entry.isIntersecting is affected by the bug and it needs fallback because it's null on some versions of MS Edge, but entry.intersectionRatio alone is not enough because it could be 0 on some intersecting elements.\nIf it's a Chrome bug and it will be fixed, I can't see the reason to insert a workaround here in the master code. If your case is the one affected by the bug, isn't it better to fork the repo and remove the isIntersecting condition from your copy?. @dverbovyi I don't remember what is the specific case, I would need to test it again on the most recent versions of MS Edge. Will do.. Fixed in version 11.0.2. Thank you for your test @davejamesmiller\nI guess now that Chrome 72 is out we can switch it back to isIntersecting || intersectionRatio > 0 as it was before. \nI also noticed that in some cases the ratio was 0 while the Boolean was true. \nThat doesn\u2019t make any sense to me, but I feel safer to use both values. . @davejamesmiller would you please do a pull request against my development branch? . @davejamesmiller don't bother, I'm on it.. Closed, again, with version 11.0.3.. Hi @dverbovyi thanks for this PR and Issue.\nI need to test it cross browser before merging it into the master branch.\nCould you do the PR towards the development branch instead?. I still see \"wants to merge to master\"\ndverbovyi changed the base branch from master  to development  42 minutes ago\n  dverbovyi changed the base branch from development  to master  . I see this comment I had left some times ago, on the code you're trying to change.\njs\n/* entry.isIntersecting needs fallback because is null on some versions of MS Edge, and export const isIntersecting = entry => entry.intersectionRatio > 0;\n   entry.intersectionRatio is not enough alone because it could be 0 on some intersecting elements */\nSo maybe is not a good idea to remove isIntersecting.\nFurthermore, if it's a Chrome bug and it will be fixed, I can't see the reason to insert a workaround here in the master code. If your case is the one affected by the bug, isn't it better to fork the repo and remove the isIntersecting condition from your copy?. I'd need more information than the title in order to understand what's happening.\nCould you be more specific?. Sorry, I should see some HTML, CSS and JS code in order to help you.. After not receiving feedback for 2 weeks, I'm assuming the problem was solved.. Hi  @01011010,\nthanks for opening this. \nMay I also see your HTML and CSS code?. Everythings looks good to me, I can't tell why this shouldn't work on Chrome 52. It's maybe a bug related to that specific version of Chrome.\nMy instinct says that you could try a couple of things:\n\ntransform that sizes attribute to a data-sizes attribute\nremove the img:not([src]) part from the CSS\n\nJust to test if it works on Chrome 52.\nLet me know!.  @01011010 any feedback?. @01011010 I\u2019m going to close this issue. It looks like it\u2019s about very old versions of Chrome, and Chrome is an auto-updating browser. If you still need help, feel free to reopen it. . Thanks @ipernet,\nyou're right, I need to change that. And I will soon.. Hey @ipernet,\nI'm wondering whether or not to use the solution you proposed since the following line of code would break IE support, since IE doesn't support fetch.\njs\nreturn self.fetch(webpData).then(function(r) {\nI'm googling around right now.. Shortened that a little\n```js\nexport const detectWebp = callback => {\n    var webpData =\n        \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\";\nif (!supportsCreateImageBitmap || !supportsFetch) {\n    return callback(false);\n}\n\nreturn fetch(webpData).\n    then(function(response) {\n        if (!response || typeof response.blob === \"undefined\") {\n            return callback(false);\n        }\n\n        return response.blob();\n    }).\n    then(function(blob) {\n        if (window.createImageBitmap(blob)) {\n            return callback(true);\n        }\n\n        return callback(false);\n    });\n\n};\n```\nTested in every browser except Safari.\nWhat do you think?. > It appears the update() doesn't refresh background images?\nNo, it doesn't, and it isn't supposed to. If you read the API docs, it says the update method only checks if new images arrived in the scrolling container.\n\nAlso the 'loaded' class is not being appended to lazy loaded background images.\n\nNo, it doesn't, and it isn't supposed to. There's no way to check if a background image is loaded in javascript. The real question is: if it really is a background image, why do you need to be notified for its loading? If it is a content image, you should use real images with the img tag.\nThere are tons of closes issues about this topic. Please check the closed issues containing the \"background\" word.. Guess this is solved by now. \nThank you @Jones-S for the updates and @vcoppolecchia \nOr do I still need to fix anything?. First of all, why do you use LazyLoad if you load all the images as soon the library gets initialized?\nAnyway, what you're doing should be already working, since the file extension is replaced to .webp in before copying the image source from the data- attributes to the actual ones, and this doesn't depend on whether this operation is triggered by a load() call, a loadAll() call, or an image entering the viewport.\nSo I'm going to need more information from your side in order to understand what's going wrong with your implementation.. Hi @cfx1,\nthanks for reporting this.\nI'm planning to dismiss the development of version 8.x in favor of maintaining only version 10.x which could work with the IntersectionObserver polyfill by w3c. \nThe reason of this is that \n- the IntersectionObserver is soon to be supported in Safari, which was the only modern browser missing this support, \n- Microsoft stated users should stop using IE to browse the web, so IE users would be the ones using and downloading the polyfill\nWhat do you think?. Referenced in #306. Hi @gregh3269 \ncould you add some context please? There was a list of questions in the issue template, but you didn't answer any.\nSpecifically, I miss the following information:\n\nCould you provide the HTML, CSS and JS code you use for your images?\nWhat are the steps to reproduce the problem?\n\nThanks\n. Thanks @gregh3269,\nit sounds like a good patch, I will try this on my plugin later today and tell you whether or not I noticed regressions on other browsers. It shouldn't.\nIf you could kindly post here the entire patched lazyload.viewport.js file you can find on the support/8.x branch it would make this easier for me (I recently became a father for the 2nd time and I have less time for this open source project).\nThanks!. Hi again,\nI'm reading the documentation for pageYOffset and scrollTop and I'm afraid that the patch you're suggesting might cause bugs on corner cases, like a document containing different scrolling areas or different iframes.\nI prefer not to touch such a sensitive aspect version 8.x of LazyLoad because it's quite stable and it's been for years. Furthermore, as Safari is going to support IntersectionObserver very soon, I'm going to deprecate the usage of this version in favor of version 10 only + a the official IntersectionObserver polyfill where needed (on IE and older Safari versions). \nSee #306 for more information.\n. By the way @gregh3269 are you sure your images are inside the main document and not in a scrolling container e.g. overflow: scroll element?\nEdit: pretty obviously the answer is that you're sure, I'm just asking.. Hi @gregh3269,\nthe reason it loaded all the images at once in that case is that you placed the polyfill after LazyLoad, whereas you should place it before it. \nThe order is very important in this case because when LazyLoad v.10 is executed, it checks whether or not IntersectionObserver is present, and if it isn\u2019t it loads all the images at once (as a fallback). \nIf you switched the order of the scripts, it should working a champ.\nLet me know . Hey @gregh3269,\nif you have an environment where I can test it, or you could replicate the issue on codepen, I can take a look and help you.. Ok. Glad you solved in some way. . Hi all,\nthanks for taking the time to comment. \nIn my opinion, the deprecation of version 8.x could start the exact day Safari will start supporting IntersectionObserver, because:\n\nThe suggested solution would be to use the IntersectionObserver polyfill, which will grant compatibility with older Safari versions still around. \nVersion 8.x would continue to be available forever, only it won\u2019t be maintained anymore, so it would still be available for those who don\u2019t want to upgrade their code \n\n. It's done already. The README file no longer mentions conditional loading and version differences.. Hello @kelenakamura,\ndid you pass in the container option to LazyLoad? \nIf the scrolling container is not the main document but an overflow: scroll element, that element must be passed to LazyLoad in the container option so version 8.x can understand what to watch.\nLet me know if this solves.. Well, the script injection like you did can be useful if you have a very simple website. If your website is more complex, you probably need to go for a different approach.  . Probably, the best way to go is to conditionally load the IntersectionObserver polyfill and subsequently always load LazyLoad version 10.x. \nSince version 10 doesn\u2019t need to watch on the scroll event of the scrolling container (like version 8.x does), this solution would spare you the need of specifying a container to make it work on other scrolling containers. \nNote that this will soon be the recommended solution on the README, see #306. . I didn\u2019t understand what\u2019s happening exactly in your latest message. \nCould you replicate this in a codepen so that I can take a look?. I totally redesigned the README file of this repo. Maybe you can find there something that didn\u2019t catch your eye before. . Hi @RChrisE ,\nI've never tried Salvattore, but I guess that with your code, just adding the script to your page like documented in the README.md, and instantiating a new LazyLoad on the page should work. \njs\nnew LazyLoad();\nWhy the question? Did you have any problems?\nJust pay attention that you didn't put the alt attributes on the main content image. This is required and it's for accessibility.. I need your help in order to help you out here.\nCould you please create a new Pen on codepen.io and replicate the issue there?\nIn this way I could see what\u2019s going wrong, and if the error is in Salvattore\u2019s code, in LazyLoad\u2019s code, or in your specific implementation. . @RChrisE do you still need help or did you solve?. I\u2019m closing it then, since I don\u2019t have enough information to help you. Feel free to reopen if you can add information. Cheers!. Thanks @Baukaalm . Hey @0000marcell, have you tried version 11.0.2?. Also, if you could specify better what is happening, what are you trying to achieve, how you configured your files, it would very helpful.. I\u2019m glad that worked. \nVersion 10 was instale because I released version 11 one week ago, I guess. \nClosing this. \n. Done. I must admit that I didn\u2019t understand what you\u2019re trying to do here and how. \nCould you please specify \n\nwhy your images uses the regular src attribute instead of the data- ones\nwhy did you put the lazy class in the outer div instead of in the img\nwhere did you put the script tag for the LazyLoad and how\nwhere did you put the new LazyLoad code and with which options \n\nUltimately, did you read the README file and took a look at the demos in the demos folder (there is a demo of a popup layer, which is a \u201cmodal\u201d)?\n. That\u2019s probably because you initially didn\u2019t wrap your code inside the triple backtick. Try that again.  . Hey @jakeman1031,\ndo you still need help or you did find the information you needed in the README or in the demos?. I guess you're speaking about #50 and specifically to this comment\n\nI think I figured it out:\n```js\nvar globalLazyLoad = new LazyLoad();\nvar modalLazyLoad;\n$('.modal')\n        .bind('shown.bs.modal', function () {\n            modalLazyLoad = new LazyLoad({\n                container: this\n            });\n        })\n        .bind('hidden.bs.modal', function () {\n            modalLazyLoad.destroy();\n        });\n```\nIt seems to work. Could you please confirm if this is the right way to do it?\n\nThe destroy does not unload images, it just destroys the LazyLoad instance so you don't have any IntersectionObserver or other pending event listeners. \nI still don't understand what you're trying to do and what doesn't work in your case.. > Yes. So is there no way to unload an image?\nWhat do you mean by \u201cunload\u201d? \n\nset its source to another source \nset its source to an empty string\nremove the image from the DOM\n\nLazyLoad doesn\u2019t do any of those, but you can do it yourself in your javascript code.. Here\u2019s how to remove an element from the DOM\nhttps://developer.mozilla.org/en-US/docs/Web/API/ChildNode/remove\nI\u2019m closing this issue now, if you have any question related to LazyLoad feel free to reopen. Otherwise it\u2019s plenty of answers on Stackoverflow, MDN, Google etc. . Hi Vincenzo,\nThank you for opening the issue. \nFirst question: what do you mean by hidden?\n\ndisplay: none\nvisibility: hidden\nopacity: 0\nothers \n\nAnd secondly, LazyLoad uses the browser\u2019s IntersectionObserver API so it depends on how it works internally. \nHave you tried and checked what actually happens before asking here?. I've just created a demo under the demos folder, named image_hidden.html.\nYou can see it in your browser at this link.\nI created it to make sure of how the IntersectionObserver works, since it's at the base of the LazyLoad script.\nThe images are not revealed and loaded if they are, or its parents are display: none.\nIn all other cases, visibility: hidden or opacity: 0, in the image or its parent nodes, the images are revealed.. So @VincenzoMartino I guess that if you use display: none to hide your images that you don't want to load solves it. Or do you need to use opacity or visibility for specific reasons?. If you're trying to do something like \"load the images only at mouse over\" or \"when a specific event happens\", you can call the load() method. \nCheckout the load.html demo in the demos folder. Live here.\nThe whole idea is to instantiate LazyLoad selecting only on the visible images using the elements_selector option, then call the load(element) method on any image which has the data- attributes set. . Does one of these satisfy your requirements?. So to recap, you have two options to avoid LazyLoad loading hidden images:\n\nHide your images using display: none on the image or its parents \nHide your images using opacity or visibility, but initialize LazyLoad selectively only on the images that are supposed to be loaded (as they enter the viewport), using elements_selector, then load the hidden images using the load() method. \n\nDoes this make sense?. I\u2019m glad we solved it. \nCheers \ud83c\udf7b . Hey there,\nthanks for reporting. The error is in my package.json, specifically in the main property. It's pointing to \"dist/lazyload.cjs.min.js\" which not exists, instead of pointing to \"dist/lazyload.min.js\".\nWill fix ASAP.\nThanks. Fixed in 11.0.4. You\u2019re welcome!\nI hope you find this useful like many others did.\nIf you have any doubt I hope you can find this useful. \n\u2192\nhttp://www.andreaverlicchi.eu/lazy-load-responsive-images-in-2019-srcset-sizes-more/\nI wrote it just a couple of days ago. \nCheers!. I\u2019m glad to hear that. \nThanks for choosing vanilla-lazyload  out of many alternatives! \nI\u2019m curious about the heavy usage of srcset and picture you\u2019ll do. Can you reveal the website(s) you\u2019re gonna use it on?\nAnd if you like it, please share the love on Twitter :)\n. Yes please open a pull request to point to the non minified version. \nJust remember to bump the version number to 11.0.5. \nThanks . Hey @MarciD,\nI found 5 minutes to do that on the train and I fixed it.\nThank you for reporting!\nverlok. Hey @khalyomede ,\nthank you for asking. I think you can already do something like that.\nWhen the connection comes back:\n\nselect all the images with the error class set\ncycle them and remove their data-processed attribute and the error class\ncall .update() on the LazyLoad instance\n\nThis will make LazyLoad re-consider all the images should do already.. I'm verifying that on a new demo. Not easy as I said, apparently.\nUPDATE: Yes, easy as that, I just forgot the was- in the data attribute.. Here's the code you need:\njs\n/* Retry error-ed images when the connection come back */\nwindow.addEventListener(\"online\", function() {\n    var errorElements = document.querySelectorAll(\".lazy.error\");\n    errorElements.forEach(el => {\n        el.classList.remove(\"error\");\n        el.removeAttribute(\"data-was-processed\");\n    });\n    ll.update();\n});\nI'm putting a demo online right ASAP.. Actually I think I will integrate this feature in LazyLoad, so I won't add a new demo for that.\nBut here's a Gist for you:\nhttps://gist.github.com/verlok/8d8a454bc40cadd3dc62de3b5d8e78d3. Did that on the branch feature/retryWhenOnline\nhttps://github.com/verlok/lazyload/tree/feature/retryWhenOnline\nIf you want to try it: you don't need to pass any options, it just works out of the box.\nJust make sure to run gulp to generate the dist files before you try.\nCheers. It\u2019s only in version 10. Version 11 has removed that functionality. \nSo to opt out, just update to version 11. \nCheers! . Oh jeez. \nDidn\u2019t notice it was still in the dist folder. \nI didn\u2019t cleaned it up and it was still there from version 10. \nI\u2019ve deleted it now. \nThank you for pointing out. . Hello,\nyou need to provide some more context if you want help. \nCan you put your sample code on Codepen or similar?. https://codepen.io/verlok/pen/WmzBob?editors=1000. The codepen above works, but I've put the default data attributes, which are data-src and data-sizes.\nSince you used data-lazy-src and data-lazy-sizes you should create your instance of LazyLoad like that.\njs\nvar myLazyLoad = new LazyLoad({ data_sizes: \"lazy-sizes\", data_src: \"lazy-src\" });\nHope this helps!. @db-conception here's the Pen for your HTML case, eventually. \nhttps://codepen.io/verlok/pen/eXMayR?editors=1000. Hi again @peterdarthur,\nI can't reproduce this issue.\nI'm testing this on the demos in the demos folder. Live demo here.\nWhat I did:\n\nScrolled down until image 7\nReloaded the page\n\nResult: images 7, 8, 9 and also 6 were loaded (6 is entirely above the viewport).\nScreenshot:\n\nCould you please provide a Codepen example so I can check what's happening?\nThanks\n. PS: 300 is the default value of the threshold option, so it already does that without passing any option. Did you pass any different option?. Also find all the demos with their description, code and live example here:\nhttps://github.com/verlok/lazyload#-demos. Hey @peterdarthur,\nthank you for opening this with such precision.\nThis is why IE and Safari don't support IntersectionObserver, and you didn't load the polyfill before LazyLoad.\nCurrently, you will need to load the polyfill but in a couple of weeks it won't be that necessary anymore, since Safari is going to support IntersectionObserver in the very next version, so only IE stays out of the game (but they will see all the images anyway, don't they?).\nPlease read the Getting Started - Script section of the README file for more information.\nAre you satisfied with the answer?. Avoid adding features and reformatting in the same commit. Please use the same var statement declared on the previous lines. Please avoid re-formating and adding features in the same commit . What is this useful for?. See first comment. I like better with the space than without, but don't reformat and add features in the same commit. Thanks. Again, what is this callback useful for?. Good!. the _isFirstLoop variable cannot be a local variable shared with all instances of lazyload, it must be an instance variable instead. So it should be initialized with this._isFirstLoop in the constructor (LazyLoad function, rows 178 - 191).. the _isFirstLoop variable cannot be a local variable shared with all instances of lazyload, it must be an instance variable instead. So it should be referenced as this._isFirstLoop here.. the _isFirstLoop variable cannot be a local variable shared with all instances of lazyload, it must be an instance variable instead. So it should be referenced as this._isFirstLoop here.. This line would cause an error when the element is an IFRAME. I can't understand how can (!src) be ever true, here, since that variable is not declared anywhere.. ",
    "naranjamecanica": "Thanks, I'll update and test to your version tomorrow. The reason why I needed the refresh function, is because I only want to test the visibility of current items, not search for new ones and purge old ones, the content wasn't changed only scrolled.\nWhat do you think?\n. Yes, after a scroll in iScroll I want to force a check for lazy-loading the visible items, because iScroll does not fire a scroll event. So I need to do a manual call of _loopThroughElements();\nThe update function also does a search for new elements, which I don't need, no new items where added to the DOM.\nthis.update = function () {\n    this._elements = _convertToArray(this._queryOriginNode.querySelectorAll(this._settings.elements_selector));\n    this._purgeElements();\n    this._loopThroughElements();\n};\nSo my proposal is to add a check function, which only checks for visibility:\nthis.check = function () {\n  this._loopThroughElements();\n};\n. Congrats and enjoy the bambino! :baby: :smiley: \n. ",
    "peritpatrio": "Thanks @verlok for the fast response!\n. I might be wrong, but it does not seem to be working in 1.4.2 either:\n\n. If it helps, I'm using both data-original and data-original-set in the images.\n. I'm afraid that I'm still having problems:\n\nThese errors come up with when opening and scrolling /demos/with_srcset.html in the latest release.\n. Seems to be working now. Thank you @verlok!\n. Thanks for the clarification!\n. ",
    "herrbischoff": "Hey, sorry for necro-posting. Just wanted to add a possible way I hacked together just now. Behold, ugly CoffeeScript ahead:\ncoffeescript\n  myLazyLoad = new LazyLoad\n    threshold: 500\n    elements_selector: \"div.item\"\n    throttle: 30\n    data_src: \"original\"\n    callback_set: (element) ->\n      # Set the background image\n      currentStyle = element.getAttribute \"style\"\n      element.setAttribute \"style\", \"background-image: url(\" + element.getAttribute(\"src\") + \"); \" + currentStyle\n      # Clean up after ourselves\n      element.removeAttribute \"src\"\n      element.removeAttribute \"data-original\"\nIt's not exactly pretty but the most succinct and to-the-point solution I could come up with.\nRemember, you will need to set the dimensions of the div elsewhere, for example with the always useful padding-bottom: n% (n = integer) technique.\n. Thank you for this script \u2014 and especially for making it Vanilla JS. jQuery is just so 2006... :sunglasses: \n. ",
    "ibitwebsolutions": "How to apply this using the plugin? the back ground image?. ",
    "mendelk": "Thanks for responding @verlok \nHere's an example: http://codepen.io/mendel/pen/wamYyO\nAt least when I test, it stops loading images after the first couple.\nThanks!\n. ",
    "williambout": "Same issue. Happening only in Chrome with cache disabled.\n. After some tests, I find out the problem disappear on pre-production server, but persist on local server.\n. I think it's a bug in Chrome since I had no issue in Safari/Firefox.\nIt could be related to srcset : https://code.google.com/p/chromium/issues/detail?id=526630\n. ",
    "frankrausch": "I\u2019m no expert, but you specified the ISC license in package.json. If you did not specify it by accident, here\u2019s a template:\nhttps://en.wikipedia.org/wiki/ISC_license\nMany people on GitHub seem to use the MIT license:\nhttps://en.wikipedia.org/wiki/MIT_License\njQuery uses MIT, for example:\nhttps://github.com/jquery/jquery/blob/master/LICENSE.txt\n. \ud83d\udc4d\n. ",
    "SimonSteinberger": "I see. I guess it would be best to just mention the potential pitfall and leave the decision up to the user. As main developer of Pixabay.com, a site for free images an videos, I wouldn't implement an empty src attribute, because I'd worry too much about the unnecessary server requests. I'd prefer this over progressive JPEG loading.\n. Possibly in the future, yes. Although we'd probably strip down the code to the minimum what we actually would use to keep file size small and the plugin as efficient as possible. Or maybe we'd base parts of our code on your plugin :)\n. Just to let you know: In the meantime, we do make use of your code base in Pixabay  :+1: Although, we included the blank pixel solution and added srcset support. Just minor changes - but they were necessary for our needs. Thanks a lot for your great and simple solution!\n. ",
    "cnanders": "First off: great work on this.  I just swapped out from Tuupola version and you are right - noticeable performance boost.\nIs there a way to do lazyloading in two dimensions?  For example on this page, http://verlok.github.io/lazyload/demos/multiple_container.html the second \"scrollable container\" is below the fold, so it would be great to not have to load the images in the viewable part of this container until the y scroll pixel reaches it.  And then only load the images in the x dimension when the user scrolls horizontally to them.\nFor my application, I'm building a Netflix / iTunes style browse page where I have horizontally scrollable lists of images (that have overflow-x: scroll) but then there are many of these as you scroll down the main page.  I'd like to have the lazyload work in both dimensions.  How much effort would this be? \n. Thank you, @verlok! I posted the the new issue as you requested.\n. fwiw, lazy-load-xt does this out of the box.  It uses jQuery, however, so I'm not sure it will have the same performance as this codebase.  I'm testing now.\n. Never did any actual testing, however I'm using it (lazy-load-xt) in production and it works beautifully.  You'll see on that linked page that it works in the x direction (overflow-x divs) as well as in the vertical direction (divs below the fold).  You'll need to scroll down a bit to get to the lazily loaded images.\n. ",
    "anteksiler": "@verlok Hi Andrea, I would appreciate your input on this.\n. I removed the \"container\" attribute and this was fixed.\n. ",
    "artursudnik": "Just tested that this is not related to the plugin but to the number of images on page. Chrome crashes also after removing lazyload script and initialization code.\n. I've exactly figured out what you suggest - there are too many nonresponsive images on this page that is too big for this small device. It crashes even with no lazyload solution.\n. ",
    "yanni4night": "Just think about https://vvo.github.io/lazyload/ ,which supports iframe lazyloading but with obscure API\n. I see that I have to set show_while_loading to true,or it will not work,thanks.\n. Wonderful\uff01\n. ",
    "botako": "Hey @verlok  how about images inside an iframe, how can you do that?. ",
    "ignatiusreza": "updated as requested! \n\nchange the version name (add 0.0.1)\n\nI assumed that you're referring to version in package.json?\n\nrun the grunt task to generate the minified file\n\nhttps://github.com/verlok/lazyload/pull/11 change package name to vanilla-lazyload, so I have to rename it back to lazyload before running grunt.. is that expected?\n. Thank you. Everything looks ok to me. :+1: \n. @Spone we updated lazyload in our app yesterday, and got the same error.. was just about to submit a PR to fix it when I noticed your comment.. since you've found the solution, maybe you would like to submit it as a PR?. Wow! Thanks for the offer @verlok! Very nice of you, unfortunately I can't make the trip.. . ",
    "Spone": "Hi, I have a similar issue. I'm including lazyload to my application.js bundle (with the Asset Pipeline, I'm on Ruby on Rails). When the JS is interpreted, the body is not yet ready, and I get the following error in my console:\nTypeError: document.body is null\n\nI'm using version 10.3.1 of the vanilla-lazyload NPM package. I seems that the fix made by @ignatiusreza is no longer present in the newest version?\nCan you help?. I noticed that document.body is used to detect the classList support.\n@verlok Can you use this code instead? This fixes the issue for me.\nvar supportsClassList = 'classList' in document.createElement('p');. Here is my PR :).\n",
    "stalinkay": "Ok. Cool.\n. Understood.\n\nOn 14 May 2016, at 11:20 PM, Andrea Verlicchi notifications@github.com wrote:\nAlso, you can use lazyload's events to determine when an image enters the viewport and use the callback to do pretty much what you want.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub https://github.com/verlok/lazyload/issues/21#issuecomment-219254747\n. \n",
    "greenie": "@verlok You're welcome! If you could publish a new version to npm that'd be much appreciated \ud83d\udc4c\n. All done in #23. Enjoy the \ud83c\udfd6\n. ",
    "magglomag": "Ah, I think I solved it by calling the function again when clicking on the link that changes the aria-hidden attribute from true to false. \n. ",
    "AlgyTaylor": "Done :)\n. ",
    "lopugit": "@verlok How'd it go? . @verlok I use this little hack to make sure lazy images load when doing things like removing hidden classes when filtering products that have lazy load images which don't load because the window isn't scrolled.\nwindow.scrollTo(window.scrollX, window.scrollY-1);\nwindow.scrollTo(window.scrollX, window.scrollY+1);\nI'm very curious to see what you come up with to listen to images coming into the viewport from your end, I guess it is up to you to support that functionality? I'll keep an eye on it :P. @verlok oh are you serious. That would be because I'm retarded. So to get this straight you're working on a way to detect if the image is in the viewport? Not just activated by scrolling but just, what, are you gonna poll or somehow detect all image elements coordinates?. I know I know but I'm now talking about how you're going to implement lazyloading for images that come from outside the viewport horizontally like in the OP's question? . When does the callback fire?. I did not know it had one :') \nIs it the lazyLoad: 'ondemand' or 'progressive' option they feature? I thought that was a tie in to your script. I'm using 5.1.1 of your script :) \nThanks @verlok for the reply, you're a beautiful dev <3 \nps. And I think yours would be the only option to support multiple resolutions for mobile/tablet/desktop src image sizes right?\n. ",
    "akroii": "my fault, you need to move the options to end of </body>\n. hmm Cannot read property 'querySelectorAll' of null\nin line 421:\nthis._elements = _convertToArray(this._queryOriginNode.querySelectorAll(this._settings.elements_selector));\nUpdate:\nsolved by myself: be carefull of your elements_selector and container options\n. ",
    "ghost": "Sorry, it seems to work now, maybe my cache was not refreshed :smile: \n. In fact I notice that the last few images in the modal often don't show unless the window is resized, moved or the view is zoomed in/out using Ctrl and +/-\nI hope you can help.. Thanks for the reply. However it seems to me I didn't explain correctly.\nI want to have lazy load both on the main page, as well as in the modals. So as far as I understand the lazyLoad object must be created initially (right?) Then the question is how to make it work also for the modal.\nI hope that clarifies what I am looking for.. I think I figured it out:\n```\nvar globalLazyLoad = new LazyLoad();\nvar modalLazyLoad;\n$('.modal')\n        .bind('shown.bs.modal', function () {\n            modalLazyLoad = new LazyLoad({\n                container: this\n            });\n        })\n        .bind('hidden.bs.modal', function () {\n            modalLazyLoad.destroy();\n        });\n```\nIt seems to work. Could you please confirm if this is the right way to do it?. Thank you!. Unfortunately I can't report that because I removed lazyload from the site completely after finding out that it is necessary to use invalid HTML (img without src as reported in the other issue). Logically we can't expect any browser to be able to render invalid HTML long term although it may theoretically work, so I don't want to risk the sites I am working on to have content which users may not be able to see. I have tested at least 5 different lazy load solutions and all seem to use this trick to move the img url to another attribute but it doesn't seem correct. I hope you can find a better, browser-, seo- and valid-html- friendly solution.. You can probably use a placeholder gif pixel which will be replaced with the actual image. Or even better: a downsized version of the image - then search engines will be able to index it without duplicate content issues.. Sure. I just didn't see src in the demos so I thought it must not be there at all in order your script to work properly. But if it can be there, that's great.. ",
    "an-rahulpandey": "Thanks, I have opened the issue here - \nhttps://github.com/chrisben/imgcache.js/issues/173\nAlso was wondering if we can load the image in synchronous order?\n. Yes, by synchronous I mean the order in which they are listed in DOM. sometimes images at the bottom of page view load first, then the top images. Or sometimes first two images get loaded and then bottom images, and then middle page images.\n. ",
    "eladcandroid": "Great. Thanks! :+1:  I'll close it.. :)\n. ",
    "dreamyguy": "No worries @verlok, we ended up using your script anyway, and have noticed a significant improvement on performance. The throttle feature is a must and improved the experience on mobile browsers dramatically, especially on Android, where the \"jumpy lag\" was so obvious.\nJust that one improvement over Lazy Load XT was enough for us to stick to LazyLoad for good. \ud83d\udc4d . ",
    "baszero": "OK, I made our test environment public, but in order to see the effect, you have to login on the top right with stackoverflow / stackoverflow (un / pw).\nWhen logged in, open this page which has about 130 lazy loaded thumbnail images.\nIf you scroll down, you will notice the stuttering.\nhttp://test.zwischengas.com:8380/de/VC/veranstaltungsberichte/Grossglockner-Grand-Prix-2013-auf-den-Spuren-der-alten-Helden.html?gallery=on\nThanks for any advice.\n. Any updates on this? I have to close the test environment otherwise soon again. Thanks for a quick note.\n. Thanks for that quick analysis. I will change the layout. But if the performance issues are still there, I'll get back to you :) I will replace the table by left-aligned floating divs.\n. Hi Verlok, you might want to look into this again, \nbut I did use the PROFILE now and I see that lazyload is causing the delays!\nSee screenshot:\n\n. Ok, I will test it. However the IE10+ restriction is a big impact for us, have to decide whether we can use it.\nWhere do I see the version? In the dist folder there aren't any versions... Would be great to see version directories in the dist folder (e.g. v3.8, v3.9, v4.0 etc). Question: I will use the latest version in the dist folder, is that the latest too? Have they been updated with 4.0.2?. ",
    "ricardobrandao": "Hi @verlok\nHi have some work on that branch. I'll create a PR tomorrow. However I am using static properties - stage 2 - which are not supported by the uglifier and therefore we can't uglify the original source code. Should we move the default settings to a variable inside the constructor (i.e. not accessible outside)?. Great. On a related note, we might want to take a look at this (source here) example from Paul Irish as soon as intersection observers are in a stable state.. De nada Verlok :)\nYes, this is after the current HEAD of your master.\nI'm going to take another look at this because there are still some things to improve.. Btw, we can also distribute the minified version of the original (i.e. ES2015) source file which will work on modern browsers.. Ciao Andrea,\nI'll take a look at this over the weekend, thanks :). Ciao Andrea,\nI've fixed the conflicts. I've noticed that you exposed the private functions because of the tests. In ES2015 we can do that differently by exporting multiple modules (e.g. classes, functions) from one js file with the export statement.. @verlok you can either revert the merge or rewrite the history. However, it is not advisable to rewrite history! \nI can help you with that if you are willing to follow that road but may I ask why you want to revert those changes and move them to a different branch? From my experience, maintaining both branches will become cumbersome.. 1. I meant that, in this case, it would be kinda cumbersome to maintain both branches because we have all in one file and things where moved from their original place. Because of that, any change to the master branch will create conflicts that are annoying to resolve. About the globals: using the ES2015 syntax all is contained within the file and only Lazyload is exported. In the transpiled version, _now() and defaultSettings are also in the global context but we can fix that easily.\n\nI agree with you and that was my original thought but I've kept things simple. Do you want me to do that?. @verlok sorry for that. Because of the rebase I didn't push some lines. All green now. @verlok sorry for the late reply but I was abroad on vacations (actually I've visited your country for the first time :)). Thanks for supporting IntersectionObserver!! I'll take a look to what you've done.. It was awesome, thanks :)\n\nNice article, I've shared it on twitter.. Sorry for the late reply but yesterday I had a busy day. Glad you've figured it out. I remember fixing this earlier but we've lost it in the meantime.. Wow, that's great! I hope you can come and enjoy the city! I'm interested in that second ticket and I'll happily buy you a big lunch :). Sorry for the late reply but I have been busy the last few days. I've sent you an email with my personal details. Once again, thank you for your offer!. ",
    "jd440": "thanks @verlok to have take time to reply to me\nso I tried again with clear cache\nit's ok w/ chrome\nBut on ff 44/wind\u00e8ws,  49/windows,  48/linux  it still loading the ../img/[\u2026]_15_a.jpg\nI also tried to add a meta viewport but it doesn't change anything\n. After testing I found.\nthe problem come from the size attribut\nsizes=\"220px\"\n. ",
    "RomeroMsk": "Sure, just tried it in my project with both cases for show_while_loading.\n. Great, thanks!\n. Just put an incorrect URL into data-original (unexisting file).\n. ",
    "jvanasco": "Thank you so much for this. \nI was about to fork so I could generate a PR an identical feature, and realized I missed a few updates.  This saved me!. ",
    "cbieser": "That would be great. If you need support or donation, let me know.\n. It seems to work, but there could be conditional comments between the picture and the source-tags (IE).\n. No, it is not running in IE.\n\n. It's an IE11. No error message but also no src for the image as you can see in the screenshot.\n. Sounds good.\nHow does this come together with the existing implementation of vanilla-lazyload?\n. ",
    "Niresh12495": "Yes :). Hi, sorry for very late reply so do you want me to add a code to the code that manages megamenu? that is not possible in most cases, is there anything that i can do with lazyload js options itself. How do you say this http://www.hackintosh.computer/190/enable-trim-on-macos/\nurl isn't trustworthy? closing the issue and tellin some one prove wtf?. Well i think Im experiencing the same issue\nscript is adding style=\"background-image: url(\"null\"); inline style to all div & a tags \nHere is an example page \nGuest Blog\nHow to be happy\nPages are cached. Fixed: This is the small change made\nif (elementSrc) element.style.backgroundImage = \"url(\" + elementSrc + \")\";\n:). This issue was related the following issue\nhttps://github.com/verlok/lazyload/issues/48\nMake sure to check if data-original-src set has a value . You can close this issue\n add this code to src\nif (elementSrc) element.style.backgroundImage = \"url(\" + elementSrc + \")\";\nhttps://github.com/verlok/lazyload/issues/48\n. In all your examples, lazyload js library is loaded before the options but will it work\nin the following case because with async loading, images can render later when ever the lazyload  js has been loaded \nIn the example below im using different data_src and data_srcset because you can't check if async loading working with default values\n<img alt=\"Sneakers &amp; Tennis shoes basse\" \n                    data-lazysrc=\"../img/44738717AM_15_a.jpg\" \n                    data-lazyset=\"../img/44738717AM_15_a.jpg 1x, ../img/44738717AM_11_a.jpg 2x\">\n<script>var myLazyLoad = new LazyLoad({\n    data_src: \"lazysrc\",\n    data_srcset: \"lazyset\"\n});\n</script>\n<script src=/path/to/lazyload.js\"></script>\nso will lazyload work in this case you have to check yourself. When you execute something synchronously, you wait for it to finish before moving on to another task. When you execute something asynchronously, you can move on to another task before it finishes.\nIf lazy load is async it can be loaded anytime or loaded with condition. <!-- leaderboard -->\n<ins class=\"adsbygoogle\"\n    style=\"display:inline-block;width:728px;height:90px\"\n    data-ad-client=\"ca-pub-xxxxxxxxxxxxxxxx\"\n    data-ad-slot=\"1234567890\"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n<script async src=\"//pagead2.googlesyndication.com/\npagead/js/adsbygoogle.js\"></script>\nJust look at this adsense code, whenever the adsbygoogle.js gets loaded, it executes (adsbygoogle = window.adsbygoogle || []).push({});  and then ads gets loaded\nthat is how the async works, adsbygoogle.js can be loaded any time (after page render) or anywhere  (at footer)\nScript can be called with or without async tag, async can be replaced with defer too if JS is async. You understood what i meant \ud83d\ude04  Cool\nbut i have tried your new script is working but im so confused because when i add async attribute it works else it doesnt works why?\nAsync Lazy Test.zip\nCorrect me if I'm wrong\nThanks.... Code Pen Test Here\nWhen i remove the async attribute it stops working. That's why you put the options after the script. The options need to be before the script, in case it loads very fast (from the browser cache, for example).\nIn async the script can be loaded any where in the document footer, header, after, before it doesn't matter\nHere is an example, just make sure to pause your adblock before clicking \nhttps://www.thedev.blog/AsyncTest.html\nSo will your script work if it is called onclick?\nIf you make it work onclick then it is purely async. > If you aren't dynamically loading scripts or marking them as defer or async, then scripts are loaded in the order encountered in the page. It doesn't matter whether it's an external script or an inline script - they are executed in the order they are encountered in the page. Inline scripts that come after external scripts have are held until all external scripts that came before them have loaded and run.\n\nAsync scripts (regardless of how they are specified as async) load and run in an unpredictable order. The browser loads them in parallel and it is free to run them in whatever order it wants.\n\nThis is an answer from \nStack overflow\nIf your script works with async and doesnt work without async then it is a bug\nPlease read the above link\nThis is the bug\nThanks. Ok i have made a small change in your lazyload.js : now it works with or without the async tag\nlazyload.js.zip\n\nNow I'm thinking about adding the ability to have more than one asynchronously loaded LazyLoad.\n\nThis is something which i really need because\ni use the following data_src values: for <img tags i use data-lazysrc and  for background images i use data-background\nThanks \ud83d\ude04 . So why it doesn't work here\nBug. Google analytics works with or without async attribute,\nGoogle Adsense works with or without async attribute,\nTwitter's widget.js works with or without  async attribute\ni still wonder why your lazyload doesn't work with async attribute?\n```\n WRONG async usage \n\n``\nI know this is wrong async usage, but an async script should work with or without async attribute, something is wrong think about it..skip_invisible : false` will solve the issue.. Ok i found out that http://azaliowe.pl this is your website, i have checked few image elements all the image are referenced to src not data-src\nYou are using lazyload wrong\nHere is a website where you can check lazyloading of verlok\nhttps://www.guest.blog/2427/benefits-of-drinking-alcohol/. Any how i found out a method in which i could execute it, im closing this myself .. This issue is related to \nhttps://github.com/verlok/lazyload/issues/90\nI have tested 7.1.0 version of verlok lazyload it is working perfectly but now \n7.2.0 == 7.2.1 && 7.2.2 the issue exist in these versions\nwith element.getAttribute it was working good but now with element.dataset causing the issue check out the video listed below\nhttps://www.youtube.com/watch?v=PsoYIJm6Z9I. After digging around i found out what was the issue\nclass=\"animated fadeIn imageloading\" These are the classes assigned to the image listed above\nclass_loading: 'imageloading', This is the class loading, it is not being unset after image load\ni have added a style\n<style>.imageloading  {visibility: hidden}</style>\n to hide images until fully loaded\nIn some pages it is working, in some pages it is not checkout Home page & few pages\nhttps://www.guest.blog/\ndata-was-processed=\"true\" is being set to all elements why ?\n. Update, Some images are loading in some instances but some times not even loading\nhttps://www.guest.blog/5871/15-amazing-life-quotes/\nAuthor Box images are not loading too\nEverything cleared browser cache, cloudflare cache, wordpress cache everything\nHoping to get a quick answer. This is the HTML after loading the page\nclass_loading: 'imageloading', is not being removed\nTry to view few pages of this website to check the issue yourself\nhttps://www.guest.blog/5671/10-inspirational-robin-williams-quotes/\n<div class=\"container initial\" data-was-processed=\"true\">\n                    <div id=\"site-branding\" class=\"site-branding initial\" data-was-processed=\"true\">\n    <h2 id=\"site-title\" class=\"logo img-logo\">\n    <a href=\"https://www.guest.blog/\" itemprop=\"url\" rel=\"home\" class=\"initial\" data-was-processed=\"true\">\n                    <img id=\"site-logo\" data-lazysrc=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" alt=\"Guest Blog\" data-bsrjs=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo@2x.png\" class=\"animated fadeIn imageloading\" src=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" data-was-processed=\"true\">\n                </a>\n</h2>\n</div><!-- .site-branding -->\n                </div>\nThis is the option im using\n```\n var myLazyLoad = new LazyLoad({\n        throttle: 0,\n        threshold: '0',\n        //threshold: lazyloadviewportheight,\n        data_src: 'lazysrc',\n        data_srcset: 'lazyset',\n        class_initial: 'animated',\n        class_loading: 'imageloading',\n        class_loaded: 'fadeIn',\n        //callback_load: removeclasslazyloading(),\n        skip_invisible: false\n    });\nvar myLazyLoadx = new LazyLoad({\n    skip_invisible: false,\n    throttle: 0,\n    threshold: lazyloadviewportheight,\n    data_src: 'lazybackground',\n    //  class_loading: 'lazyloading',\n    //  callback_load: removeclasslazyloading(),\n    elements_selector: \"a\"\n});\n\nvar myLazyLoady = new LazyLoad({\n    skip_invisible: false,\n    throttle: 0,\n    threshold: lazyloadviewportheight,\n    data_src: 'lazybackground',\n    //  class_loading: 'lazyloading',\n    //  callback_load: removeclasslazyloading(),\n    elements_selector: \"div\"\n});\n\n```\ni tried combining div and a tag into single  elements_selector: \"a div\" it doesn't work that way, this is another bug in lazyload. <img id=\"site-logo\" data-lazysrc=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" alt=\"Guest Blog\" data-bsrjs=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo@2x.png\" class=\"animated fadeIn imageloading\" src=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" data-was-processed=\"true\">\nDoes it looks like background image? my header logo is having problem and it worked perfectly with 6.3.2. This the exact problem im having just view the video\nhttps://www.youtube.com/watch?v=PsoYIJm6Z9I. In some instances browser will ignore and load src instead of srcset,\nbut when src is not defined srcset will be forced to load, that is why im asking you to include above code.\nHere are some related issues\nhttp://stackoverflow.com/questions/29715791/browser-is-loading-two-images-one-for-srcset-one-for-src-chrome-41-et-al. So did you made any decision ?. \nThis is the JS code being used\nvar lazyloadviewportheight = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    var myLazyLoad = new LazyLoad({\n        throttle: '0',\n        threshold: '0',\n        //threshold: lazyloadviewportheight,\n        data_src: 'lazysrc',\n        data_srcset: 'lazyset',\n        class_initial: 'animated',\n        class_loading: 'imageloading',\n        class_loaded: 'fadeIn',\n        skip_invisible: false,\ncallback_set: function (el) {\n//console.log(el.currentSrc);\n}\n    });\nHTML is normal\nHere is an example \nExample 1: Data SRC issue\n<img id=\"site-logo\" data-lazysrc=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" alt=\"Guest Blog\" data-bsrjs=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo@2x.png\" class=\"animated fadeIn imageloading\" src=\"https://cdn.guest.blog/wp-content/uploads/2017/02/guest-blog-logo.png\" data-was-processed=\"true\">\nThis html is processed but image class imageloading is not remove \nbecause of the CSS .imageloading {visibility: hidden} image is hidden\nExample 2: Background Image issue\nIn another instance for background image, they are not being added into style\n<a alt=\"Dangerous Animals\" title=\"Top 10 Most Dangerous Killer Animals In The World\" data-lazybackground=\"https://cdn.guest.blog/wp-content/uploads/2017/04/Dangerous-Animals-750x430.jpg\" style=\"\" class=\"img-cont initial\" href=\"https://www.guest.blog/9267/top-10-dangerous-killer-animals/\" data-was-processed=\"true\"></a>\nThis is the JS being used for background images\nvar myLazyLoadx = new LazyLoad({\n        skip_invisible: false,\n        throttle: '0',\n        threshold: lazyloadviewportheight,\n        data_src: 'lazybackground',\n        //  class_loading: 'lazyloading',\n        //  callback_load: removeclasslazyloading(),\n        elements_selector: \"a\"\n    });\nNote: Im using Safari macOS Sierra. I cant replicate it \ni just dont understand why cant you just check the website link i have given above?\nI have given you a live website where there an issue and still you can't fix it like wow. Ok im sorry, I'm little hot tempered\nas you said safari webkit element.getAttribute is not playing good\nbut you have to consider this because most of the users have iPhone and all iPhone browsers are using safari webkit [iPhone, iPad, iPod & Macs]. Im using the following JS to set threshold value, do you have any better suggestion?\nMath.max(document.documentElement.clientHeight*3/4, window.innerHeight*3/4 || 0);. ",
    "NathanMOlson": "OK, I've changed from using a class to using data-volatile.\nLet me explain a little about my use case.\nI have an embedded web server with two cameras, and a webpage that desplays the most recent image from the camera.  This image is updated about once a second.  I have been doing this by using javascript to change the src attribute.  However, this results in unnecessary network traffic if the image is off-screen.  I want to use lazyload to avoid unnecessary network traffic, but as of v 2.1.1 each image is loaded only once and then purged from the list of images.  I've added the data-volatile attribute to mark images that may be updated after they are loaded and may also be off-screen and not require immediate updating.\n. I added a check to see if a volatile image is already up-to-date before updating it.  This should improve performance.\n. ",
    "mxaviers": "Yes, only when it refreshes though. I did manage to find a workaround through jQuery which is probably not the best solution but it works for me. However, I did take it out for your inspection. The link is uat.lusitanialights.com/music. \nBut I've also noticed that this plugin only recognizes JPG files, does it not do PNG?\nOn Dec 6, 2016, at 8:05 AM, Andrea Verlicchi notifications@github.com wrote:\n\nSo the problem is that the class doesn't change from loading to loaded? Can you give me the URL of your website?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. Sorry, it was just an assumption about the PNG since the most of images that weren't being loaded were PNG. \n\nAnd actually, the header's background image is fine, it's the images in the content area, such as itunes and spotify icons in the right hand side and the album cover on the left.. Do you see a \"loading\" class on the img tags?\nBecause the images are going through the WordPress editor, do you know how to add the \"data-original\" attribute in the image tag without going into the text editor?\n. ",
    "marichelle": "@verlok I also experienced this issue, but it happens to me in both Chrome v55 and Firefox v47 (I didn't test Safari). Note: I tested the plugin in a vanilla environment and that worked fine, but when I tried to run it in a more complex environment (JS using a module pattern), the Above The Fold images wouldn't show on page load, but upon the slightest scroll, the lazy load would trigger as expected.. @verlok Thanks for your response, but unfortunately handleScroll() didn't work for me.. ",
    "sdthornton": "Just a heads up, it is still an issue as of 10/3/18. Seems like it's any above-the-fold images on first load in Chrome only. . Also, doesn't seem to be an issue when running dev server.. ",
    "krepky": "Similar problem. The console does not report any failures (i can only say that Date.now () refuses to see the first image).\nhandleScroll() didn't work for me too. I found out that the picture is loaded if you assign a width to it, so this small trick somehow solves the problem:\n$('.stills').eq(0).css('width','1px');\nfunction loadfirstimg(){$('.stills').eq(0).css('width','auto');}setTimeout(loadfirstimg, 10);\nThis bug lives in Chrome only. I also use webp image add-on (\"to_webp: true\"), content is loaded using ajax.. ",
    "JackDandy": "Nevermind, I figured a workaround, and the \"features\" are ones that only a few will observe.. ",
    "jakeman1031": "I'm working on getting this modal to work the same way. Cant seem to get it working with the same code. Can I re-open this?. It limited what i could upload for code. Sorry I haven\u2019t responded sooner. I my modal working. However, the destroy\nportion I cannot. My modal is similar to the one on that agency template.\nHowever, my minified js is difficult to read. Does the destroy take the\nimage and unload it again?. Yes. So is there no way to unload an image?. Ok so whats the best way to write that?\nRemove it from the dom seems to be right. ",
    "Cyriltra": "The trick seems to use a calculated padding-bottom as explained here: \nhttp://andyshora.com/css-image-container-padding-hack.html\nhttps://www.smashingmagazine.com/2013/09/responsive-images-performance-problem-case-study/\n\nPadding Bottom = (Image Height / Image Width) * 100%\n\nI think it would be great if your plugin can already reserve the space needed for the image when no dimensions are specified.\nThanks. ",
    "banago": "This script is perfect for what it does and I suggest you keep it that way. . ",
    "zedL": "Hey,\nwell you currently doing this with the loading class. But you remove this class and add loaded when the images loading is finished.\nI only need this behavior the first run and instead of loading use a different class like first-lazy-load.\nYou currently doing what I need, but you do it again and again on each cycle. I need it only the first time.\nWhen I use lazy load and my page starts the first time, the scripts identify the images to load. It would be nice if you could add a class 'first-lazy-load' to those images.\nHope that clarify a bit what I mean. If you have a different solution I would be happy to hear about.\n. Hey, \nI could take a look at the code and I have following suggestion.\n1. add a variable on top _isFirstLoop = true;\n2. in the _loopThroughElements method you can add a class to each identified element\nif (_isInsideViewport(element, settings.container, settings.threshold)) {\n       if (_isFirstLoop) {\n          console.log('this element was detected in first loop', element);\n          element.classList.add(\"first-lazy-load\");\n        }\n}\n3. at the end of the _loopThroughElements method set _isFirstLoop to false\nif (_isFirstLoop) {\n      _isFirstLoop = false;\n      console.log('this was the first loop of _loopThroughElements')\n// add\n    }. Well when I have to detect wich images should be displayed based on current viewport I would have two pieces of code that do the same thing in my view. \nIf you dont want to improve your lib in this way... it is ok. In my eyes your arguments are strange.. This suggestion isnt a good advise.\nI display thumbnails in responsive designed views. From little mobile views to large desktop views.\nThe range of visible images is from 6 on mobile to 60 on desktop.\nI wanted to find a solution for loading and fading in only images that are not on the initialized loaded view.\nA fixed count let pop in the first images and the rest fade in, that looks very ugly on larger views. And I would load more data as I need on mobile when I would increase the fixed count to 60 in my case.\n\"I always pass on good advice. It is the only thing to do with it. It is never of any use to oneself. \"\nOscar Wilde\nI found a solution for my problem. You can close this one here.. ok, you have a new PR. Hello @verlok,\nthanks a lot, I will try.\n. Thats nice, thanks a lot. I will use it in my project.. Ok, I'll create a new one.. ",
    "xmesox": "Thanks @verlok for your comment. To be honest I'm a bit development challenged when it comes to Javascript. Could you perhaps run me through how I would achieve calling the update method with my filtering. \n<script type=\"text/javascript\">\n    $(document).ready(function(){\n      $.each( $('[data-filter-role=\"input\"]'), function( key, search_box){\n        $(search_box).on(\"keyup\", function(event){\n            $.each( $( '[data-filter-key=\"'+$(search_box).data(\"filter-key\")+'\"][data-filter-role=\"item\"]' ), function( item_key, item){\n                var item_value = $(item).data(\"filter-value\").toLowerCase();\n                var search_str = $(search_box).val().toLowerCase();\n                if( item_value.indexOf( search_str ) == 0 || search_str.indexOf( item_value ) == 0 || item_value.indexOf( \" \" + search_str ) > -1 ){\n                 $(item).show();\n                  var myElements = document.querySelectorAll(\".dzfilteritem\");\n                  for (var i = 0; i < myElements.length; i++) {\n                  myElements[i].style.margin=\"4px\";\n                 }\n                }\n                else{\n                  $(item).hide();\n                }\n            });\n        });\n      });\n    });\n</script>\nThis is the filter script we're using :)\nThanks for your assistance.. Thanks a ton for your assistance, unfortunately I am still having problems, though due to my own ignorance of js. I'm currently filling in for our developer on a project and my knowledge of js is well below par.\nYou mention that the variable will need to be within scope, contained within our footer is the following:\n```javascript\n\n\n    new LazyLoad();\n\n\n  $(document).ready(function() {\n    $.each($('[data-filter-role=\"input\"]'), function(key, search_box) {\n        $(search_box).on(\"keyup\", function(event) {\n            $.each($('[data-filter-key=\"' + $(search_box).data(\"filter-key\") + '\"][data-filter-role=\"item\"]'), function(item_key, item) {\n                var item_value = $(item).data(\"filter-value\").toLowerCase();\n                var search_str = $(search_box).val().toLowerCase();\n                if (item_value.indexOf(search_str) == 0 || search_str.indexOf(item_value) == 0 || item_value.indexOf(\" \" + search_str) > -1) {\n                    $(item).show();\n                    var myElements = document.querySelectorAll(\".dzfilteritem\");\n                    for (var i = 0; i < myElements.length; i++) {\n                        myElements[i].style.margin = \"4px\";\n                    }\n                } else {\n                    $(item).hide();\n                }\n                lazyLoad.update();\n            });\n        });\n    });\n});\n\n```\nWhen attempting to use the script like this, our filtering system no longer works. I'm assuming my problem is me not knowing the correct place for the lazyload variable to go, in order to be within the correct scope. :/\nThanks again for your help. . Thanks so much for your help! That did the trick! :D. ",
    "SamuelBourdon": "Here is an example on codePen http://codepen.io/samuelbourdon/pen/rywLQW\nIt works for pictures loaded on page load but not for the lazyloaded ones.\nI think I need to callback picturefill() before the image is loaded, callback_set seems to be the right solution but I do not know how to use it.. @dxit-gg \nI updated my pen with a nearly working example using callback_set method. It seems to be ok on IE on page load but image swap failed sometimes when resizing\n(function() {\n    var myLazyload = new LazyLoad({\n        callback_set: function () {\n            picturefill({ reevaluate: true });\n        }\n    });\n}());\nMaybe we just need another event on source change. ",
    "bigretromike": "OK first. \nI needed to move script to bottom.\nSecond when I added \n<script>\n    (function() {\n        new LazyLoad({\n            elements_selector: \".lazy\"\n        });\n    }());\n</script>\nAnd changed class to 'lazy' it started to working;\nKudos for js !. hahaha. So you type that on each issue. I did star it - thanks for nagging . ",
    "G100g": "Hi @pranaysonisoft ,\n did you try using paths config option to setup lazyload\n```js\nrequire.config({\n    paths: {\n        'backbone' : 'lib/backbone-1.1.2.min',\n        'lazyload':'lib/plugin/lazyload/lazyload.min'\n   }\n});\n```\nI created a working codepen as example\nhttps://codepen.io/G100g/pen/gmowqd. Split legacy code and load only if necessary could be a solution\nBut mean a complicated setup by the user.\nThis will left the weight low.\nWe hope to see soon the \nhtml\n<script type=\"module\">\nIn all browsers. Unfortunately I can't! Thx @verlok . ",
    "pranaysonisoft": "thank you for replying me @verlok \nthank you @G100g . thank you for codepen example . my problem is solve.. ",
    "hitmands": "The complete property doesn't exist in the HTMLIframeElement but this will not cause any error, the HTMLIframeElement inherits from Object and any undefined object property is interpreted as a falsy value in javascript (which means \"the behaviour when element instanceof HTMLIframeElement unchanges).\nThe change should be considered because represents a performance improvement since it checks if the image is already loaded and then fires the loadCallback without any delay.\nThe bug is also verifiable in any webkit implementation:  https://bugs.chromium.org/p/chromium/issues/detail?id=7731. Ok, the change should take care about the placeholder image too, \nbut, the point is: when the image is already cached the loadCallback won't be fired in some webkit implementations. We attached many relatives resourced. We think that should be considered. I'm going to close the pr.. ",
    "MDSilviu": "I was referring at a feature that will allow a similar functionality, for example setting multiple images (srcset like) and depending on screen size (width or height) lazy loading the one that fits the best.. ",
    "fnzr": "hmm this won't help, because if all images in the screen were loaded, when I update the src= I would make a bunch of requests, and I wouldn't be lazyloading.\nIt makes sense optimization wise, though, and what I want to do is kinda awkward. It's all right. Thanks!. Oh, I think I got it!\nSetting wasProcessed to false breaks the lazy-loading in all my tests. So we just apply drastic measures and brutally remove it. Solved!\nI was making a fiddle to show I wanted to do, and got it working, check this out: https://fiddle.jshell.net/imfelipe/nctzz5gv/1/\njavascript\nvar img = document.getElementById(id)\nimg.removeAttribute('src') \nimg.classList.remove('loaded') //Not necessary, but no harm.\nimg.setAttribute('data-original',new_img_src)\nimg.removeAttribute('data-was-processed') //The catch\n//...\nlazyload.update(). ",
    "trompx": "Hello @verlok,\nI don't know if this is the same issue, but I built a multiple column infinite scroller. When the user scrolls really fast, sometimes the element is added a bit late to the DOM and I guess it must be added when the lazyload thresold has been already passed. I am not sure though, no data-processed or loaded/dataset attribute is added to the elements, the data-src is still present and no src is set so I assume it is what happens.\nI had set the thresold to half screen height, as it is approximatly when the new DOM elements are appended so the image is already visible they enter the viewport. I would like them to start downloading as soon as they are appended if they are within the thresold.\nI tried thresold = 0, it is better but I still sometimes have image not loaded, I guess because they are appended when already in the viewport.\nAs the image has no dataset flag / loaded class, it should still be checked each time I myLazyload.update() (which is called on each scroll) no?\nAny hack welcome :)\nThank you for the great package anyway!. Hello @verlok,\nThanks a lot for trying to help, I really appreciate.\nIn fact I use version 8.2.1 because I need mainly mobile compatibility.\nI layout my multi columns in js so every element has a height calculated according to the image dimensions stored in db so every new appended image already fully occupies the space.\nMy bad, when I said I was using updateon each scroll, I meant that on each scroll I check if new nodes have to be appended and if there are any, then I trigger an update. So with what you say, images that have not been processed should have their data-src converted to src even if they are already in the viewport, so I guess there is something going wrong at one point on my side..\nAs I have full control of what is appended to the DOM, maybe the update function is overkill for me (despite the fact I did not notice any slowdown, probably due to the fact that I limit the number of elements in the DOM so the update have to loop just a few elements), I am thinking about not using lazyloading, in fact in this case, I control the amount of element displayed on screen so loading the X image I append down the screen may be alright.\nIf I manage to figure it out, I'll let you know as it is an interesting use case.\nCheers!. Hello @verlok,\nI investigated a bit more as I still had images that were not displaying and managed to slim down the issue. I am using thresold = 0.\nI found out that when they are not displayed, they don't have the data-src parameter anymore but they still don't have the src set. To be able to display them, I have to scroll past them then make them enter viewport again, at which point the src tag is added.\nBesides, manually triggering the update while they are visible on screen without the data-src and the src doesn't do anything.\nI don't know if this is the excpected behaviour. The site is still not online so I cannot provide you a test case but maybe with that you could figure out something.. ",
    "vonPiernik": "Hi, sorry for the delay. I'm using skip_invisible because I have tabs with images, so this is only way to make this tabs working, aye?\nMy version of lazy is the latest version I think, downloaded maybe a week ago. Chrome 57.0.2987.133 (64-bit).\nMy code here: https://pastebin.com/wh6qn4G6\nI know it's mess, combination of wordpress gallery and data tables and lightbox plugin ;D But it's a messy site. It's hard to reproduce the problem I think, now I know that my website could be a problem, but It's complicated :p. I'm a bit stupid ;D This website must working so lazy is currently disabled and I give you code from living website, sorry for that. When I tried to use lazy the data-src was set up and it worked fine except when i refreshed without scrolling.. ",
    "toddmilliken": "I think the fix is that we need to camelCase the data attribute before running it thru pictureChild.dataset[srcsetDataAttribute] on lazyload.setSources.js line 9.\nSee https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/dataset#Name_conversion\nI'll try and submit a pull request today or tomorrow.. Ok no problem. \nI was thinking of adding a helper function to lazyload.setSources that will take a data attribute input and return the camelcase version. I'm able to get it working but am stuck on building the es6 minified version in the grunt uglify task. \nWhen I run grunt it seems to choke on uglifying the ES6 code on line 73 of lazyload.js. Is there a special work around you have to get this to work? https://github.com/gruntjs/grunt-contrib-uglify/issues/367. The issue is that the default attribute data-original-set is being using like this on lazyload.setSources.js on line 9:\npictureChild.dataset['original-set'] \nThis is invalid because dataset accesses the attributes in camelcase form. It needs to be rewritten as:\npictureChild.dataset['originalSet'] \nIt looks like there is an option ( data_srcset ) for users to customize the data attribute on source tags to be whatever they want it to be - so we need to make sure there is a way to retrieve that attribute dynamically in its camelcase form. \nThe pull request fixes the plugin out of the box by converting orginal-set to originalSet; and it also fixes use-cases where the developer has overwritten the data attribute using the option data_srcset to be something else. This is why I felt the need to add a helper function that will take a string and return it in camelcase form.\nThis article does a much better job of explaining than I can: \nhttps://www.sitepoint.com/managing-custom-data-html5-dataset-api/\nHope that makes sense. . If I understand correctly, you're asking if changing the default attributes in lazyload.defaults.js from:\ndata_srcset: \"original-set\"\nto\ndata_srcset: \"originalSet\"\nIs that correct? If that is the case, yes -- it would resolve partially but would have two side effects:\n1) HTML5 data attributes are case sensitive and cannot contain capital letters as noted by w3c https://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes . \n2) This would only work using the default data_srcset option set to originalSet.\nIf a developer passed in their own data_srcset parameter that was a multi-word phrase such as my-data-src, the script would read literally pictureChild.dataset[\"my-data-src\"] which will not work in Chrome / Firefox and brings us back to the same issue. \nI'm not sure I can think of another way to solve this issue other than using the helper function to take whatever option is passed to data_srcset and return the camelcase version. I'm open to suggestions though. . Ok I think I understand. \nIt seems a little odd that if a developer wants to override it, that they are forced to have an invalid HTML5 document using a camelcase data attribute on their source tags like  <source data-myDataSrc>\nIt is possible this issue may come up for devs not intimate with the plugin; although it seems like an edge-case. \nAny specific reason why we shouldn't use the helper function? It will naturally fix all of the above scenarios without devs having to dig through the readME or being forced to have invalid HTML. Ah, ok i see what you mean. Devs just need to pass in their custom data attribute already in camelcase form for it to work; it's up to them to enter it in hyphenated lowercase form in their own HTML. \nThanks for explaining that. Let me know if you want me to revise the pull request per your earlier instructions. \nRegarding uglify - I googled \"online es6 minifier\" and found this to minify lazyload.js to lazyload.min.js:\nhttp://prettydiff.com/\nSeems to work ok.. ",
    "rflmyk": "I have been a same problem, how I get version 7.2.2? I'm using npm but this version don't over there? \nCan help me?\nFor now I go back to version 7.1.0 how @Niresh12495 said above.. ",
    "florianmatz": "Well yes. I supplied a src anyway as a fallback using a base64 transparent\npng ... So when the lazyload script runs, it replaces it with the correct\nsrc. So for the validator it would be just a normal img.\n... But maybe this a bit to specific or more kind of an edge case, because\nI need to have the site completely valid.\n2017-04-28 15:07 GMT+02:00 Andrea Verlicchi notifications@github.com:\n\nIsn't the img invalid also because it lacks of the src attribute?\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/verlok/lazyload/issues/89#issuecomment-297992888, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AEih-NdAjkmHZ9miTiq9P6ELWScUZVjKks5r0eSNgaJpZM4NLJTU\n.\n. \n",
    "Tabrisrp": "Hi,\nIn fact the W3C validator will trigger a warning The sizes attribute may be specified only if the srcset attribute is also present. if sizes is set but srcset is not.\nI think ideally, we could set a data-lazy-sizes attributes, that would be used to set sizes when the image loading is triggered by the script.\nThat would not change any behaviour of the script, but would prevent the validator warning.. @verlok do you think what I stated in my previous comment could be implemented?. While I agree with the idea and understand the impact, when you pass an URL to the w3c validator, it's not the final state that is tested, but the initial one, thus returning the error related to sizes and srcset.\nCustomers don't know about the difference between initial and final states when testing for the validation.. Thank you for your answer and advices, makes choosing easier with your input! \ud83d\udc4d . I seem to still have this error showing on some websites, with 10.3.5, but only on Chrome.\nIt doesn't seem to prevent the script from working either, since I can see the src correctly set and the class lazyloaded added.\nI'm reporting it but I have no idea with it's triggering. I could give you the HTML if you'd like to have a look.. Sorry I was on holidays.\nThis is only happening on one specific page of this customer WordPress website, so I'm pretty sure it's some kind of conflict with another plugin or his theme, it's not really worth the time.\nYou can re-close this \ud83d\udc4d \n. Thank you very much for your answers, I was able to make the auto-update with MutationObserver, seems to be working perfectly!\nSupport of old browsers is not really an issue for me, so it's all good!. It's pretty straight-forward, I'm not that much versed in JS so there might be a better way to do this\n```\n// Listen to the Initialized event\nwindow.addEventListener(\\'LazyLoad::Initialized\\', function (e) {\n    // Get the instance and puts it in the lazyLoadInstance variable\n    var lazyLoadInstance = e.detail.instance;\nvar observer = new MutationObserver(function(mutations) {\n    mutations.forEach(function(mutation) {\n        lazyLoadInstance.update();\n    } );\n} );\n\nvar b      = document.getElementsByTagName(\"body\")[0];\nvar config = { childList: true, subtree: true };\n\nobserver.observe(b, config);\n\n}, false);\n```. You can check this plugin that is using this very script for the lazyload: https://wordpress.org/plugins/rocket-lazy-load/. ",
    "StefansArya": "Actually I also have this issue a few hours ago and found that \"there's no way to fix this\"?\nSo I came up to share the solution with jQuery:\n```js \nvar lazyload = new LazyLoad({\n    elements_selector: \".lazy\"\n});\nlazyload2('.lazy');\nfunction lazyload2(selector){\n    $(selector).each(function(){\n        var ref = $(this);\n        var src = ref.attr('data-src');\n        if(!src) return;\n        ref.addClass('loading');\n    $('<img/>').attr('src', src).on('load', function(){\n        $(this).remove();\n        ref.removeClass('loading');\n        ref.addClass('loaded');\n    });\n});\n\n}\n```. ",
    "briwg": "Great! Works well. Many thanks.. ",
    "perfilev": "Is it possible to fade background image in?. ",
    "cfxd": "Just for the heck of it I created a pen out of the fade in demo: https://codepen.io/cfxd/pen/Germma. I was able to get this working by updating my LazyLoad instance using Swiper's init param (see https://jsfiddle.net/silb3r/oxb2ztu5/19/). Actually this is still an issue on desktop Safari and iOS devices running Safari.\nOther images load just fine (in Safari) with v10. I'm using an IntersectionObserver polyfill (https://github.com/w3c/IntersectionObserver)\nIf anyone has some feedback it would be much appreciated!. Turns out that if I add this to Swiper's init param before I update LazyLoad then all is well on Safari:\n$(this.$el).find('img').removeAttr('data-was-processed');\nSee here: https://jsfiddle.net/silb3r/oxb2ztu5/37/ (JS line 18)\nShould I be doing that?. v10.17.0, the same version that the fiddle uses \ud83d\udc4d\ud83c\udffb. @verlok Yes, I switched to v8 and removed the polyfill because it probably was overkill just for your script. All seems to be working well and I'm using Swiper's native lazy loading params. Thank you for your help!. Yes I've been looking into that. Not sure it will be easy with my current gulp config but I'll see what I can come up with.. ",
    "nina514": "The features I want work fine.\nThere's nothing wrong with delay loading the div.\nLet's test it to see if it works with other features.\nThanks for making a good plugin.. ",
    "davthu": "\nIE less then 11 are not supported, though.\n\nI can't see that browser support is mentioned anywhere in the documentation.. Seems to work with version 8.2.0 \ud83d\udc4d . ",
    "FreshRob": "@verlok If it fails in the img it will treat it as a failure and not set the background img. \nWhen testing there was not another network request for the background image as it pulls it straight from the browser cache so there should not be a network problem.\n. ",
    "ArmanGrewal": "Thank you. But I need to support very old browsers. I am not using this library for now.. ",
    "aggreggator": "\u2605ed!. You don't use use any data attributes in your img-tag. \nNothing gets lazyloaded and is proccessed through lazyload. \nIt's just an standard image tag.. ",
    "Princu7": "@verlok Thanks for the reply. Sorry, I wasn't properly able to explain the problem. I have made some changes on the codepen and the buttons for collapsible elements are far away from each other. Maybe a couple of them are within the viewport and rest of them are outside the viewport. The threshold is set to a very minimum to not load images that are further ahead in the viewport.\nNow, when I fully refresh the page, all the different images ( 3 of them ) which are used on the page seem to be fetched from the network. What I would have wanted was that only the images which are within the viewport should be fetched and the rest of the images would be fetched as we scroll further down the page. But instead of it,  all the images, no matter where they are located on the page, when they are present in a display: none container, load up all at once. This is not what I want.\nI hope, I was able to explain it a bit better. Thanks for your time. Please take a look into it. Have a nice day!!. Maybe this problem is occurring because the images are contained inside a div which has a property of display: none. I read somewhere that when an element has display: none as one of its property, its position is not computable? Maybe because of it, we are not able to get the position of images properly and hence they load up all at once? Please clarify!!. @verlok Hey. Really sorry for not being able to follow up immediately. Yes, that works :smile: But on the networks with high latency, lazy fetching it when the user presses the button means that the photo is not loaded at least for a little duration. This is the issue. I  don't want the user to know that lazy loading is going on. If we can lazy fetch the images (viewport + little extra threshold), even when they are not visible, the user will not see the process of fetching the image (as it would be happening in the background) and images would instantly be visible when the divs are uncollapsed.\nCan something like this be done? Thanks for being so helping. You rock :metal:. I don't see a button to reopen this issue. . @verlok Okay, Yes. Thanks for explaining. I totally understand what you are saying and agree with it. I think I will go with the option you suggested :+1: Actually, I was referring to those networks which have good downloading speed but high latency. But, it doesn't seem to be worth to be changing the library code for this use case. Thanks again for your help. I will ping you if I have some more questions. Have a nice day.. Closing the issue :). @liitfr Thanks! Yes. I have read about service workers and they are great to reduce the loading time of the page on subsequent loading. The problem which I am facing is on the initial load of the page when the images either load up all at once (without lazy load which takes up quite some time) or when the div is collapsed on user click (done with lazy load). But due to high latency, the time taken to fetch the image from the network is a bit high which creates a delay in loading the image which doesn't look very great. So, it's kind of a compromise. Thanks for helping. Would love to hear more of your ideas! Have a nice day!. ",
    "liitfr": "@Princu7 did you consider using service workers ? Your requirement looks like a common use case.\nMaybe worth have a look :eyes: \nGood luck, Mathias\n. Ho I see ! \nCustom lazy Load solutions like this one suggested by David Walsh could fit.\nAs a last resort there's another package that has an option that particulary adresses your need : https://github.com/aFarkas/lazysizes#js-api---options \n\nlazySizesConfig.preloadAfterLoad (default: false): Whether lazysizes should load all elements after the window onload event. Note: lazySizes will then still download those not-in-view images inside of a lazy queue, so that other downloads after onload are not blocked.)\n\nI apologize in advance if this last suggestion is inappropriate here ...\nMathias. ",
    "regenrek": "hi\ni try to achieve something like rearrange after images are loaded. i implemented it here with lazy load but its kinda buggy http://www.wexltrails.at/trails/\n. ",
    "WeAreUnique": "@verlok  sorry about my english.\nPlease check attach image\n\n. @verlok wow. It's working. \nAwesome. Thank you so much for your support \ud83d\udc4d . @verlok Oops, still not working.\nI have multiple section (auto genarete from php code).\nvar ds = $('section.home-sec');\nfor (var i = 0; i < ds.length; i++) {\n    console.log(\"ID: \"+ds[i].id);\n    new LazyLoad({\n        container: document.getElementById(ds[i].id),\n        elements_selector: \"div, img, iframe\",\n        data_src: \"src\",\n        skip_invisible: false,\n        data_srcset: \"srcset\",\n        // callback_load: function (element) {\n        //     logElementEvent(\"LOADED\", element);\n        // },\n        // callback_set: function (element) {\n        //     logElementEvent(\"SET\", element);\n        // },\n        // callback_processed: function(elementsLeft) {\n        //     logEvent(\"PROCESSED\", elementsLeft);\n        // }\n    });\n}\nSometimes it's working, sometimes not.\nI don't know why.. @verlok Here is some generate HTML Code\n<div class=\"main-ct\">\n  <section id=\"ngam\" class=\"home-sec ngam image-layout \" style=\"background-color: #fff;\">\n    <div class=\"container\">\n      <div class=\"header\">\n        <a href=\"http://bbland.local/ngam\" class=\"title\">NG\u1eaaM</a>\n        <a href=\"http://bbland.local/ngam\" class=\"see-more pull-right\">[ xem th\u00eam ]</a>\n      </div>\n      <div class=\"contents\">\n        <div class=\"columns is-gapless is-mobile is-multiline\">\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-1548\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-14\" data-original-title=\"<a href='http://bbland.local/vinh-hang/'><span class='title'>V\u0129nh h\u1eb1ng</span></a><span class='postex'>Th\u1eddi gian, l\u00e0 do n\u1ed9i t\u00e2m con ng\u01b0\u1eddi ta quy\u1ebft \u0111\u1ecbnh. N\u1ebfu th\u1ebf, cho d\u00f9 m\u1ed9t gi\u00e2y, c\u0169ng c\u00f3 th\u1ec3 coi nh\u01b0 v\u0129nh h\u1eb1ng l\u00e0 c\u00e2u n\u00f3i c\u1ee7a ....</span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/vinh-hang/\" title=\"V\u0129nh h\u1eb1ng\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"V\u0129nh h\u1eb1ng\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/vinh-hang_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/vinh-hang_thumb-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-1491\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-15\" data-original-title=\"<a href='http://bbland.local/tinh-yeu-dich-thuc/'><span class='title'>T\u00ecnh Y\u00eau \u0110\u00edch Th\u1ef1c!</span></a><span class='postex'>T\u00ecnh Y\u00eau \u0110\u00edch Th\u1ef1c l\u00e0 th\u1ee9 kh\u00f4ng d\u1ec5 d\u00e0ng b\u1ecb thay th\u1ebf. Li\u1ec7u c\u00e2u n\u00e0y c\u00f3 \u0111\u00fang kh\u00f4ng? B\u1ea1n \u0111\u00e3 t\u00ecm \u0111\u01b0\u1ee3c t\u00ecnh y\u00eau \u0111\u00edch th\u1ef1c c\u1ee7a m\u00ecnh ch\u01b0a?</span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/tinh-yeu-dich-thuc/\" title=\"T\u00ecnh Y\u00eau \u0110\u00edch Th\u1ef1c!\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"T\u00ecnh Y\u00eau \u0110\u00edch Th\u1ef1c!\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/tinh-yeu-dich-thuc_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/tinh-yeu-dich-thuc_thumb-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-1309\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-16\" data-original-title=\"<a href='http://bbland.local/hay-thay-doi/'><span class='title'>H\u00e3y thay \u0111\u1ed5i\u2026</span></a><span class='postex'>H\u00e3y thay \u0111\u1ed5i nh\u1eefng g\u00ec c\u00f3 th\u1ec3 thay \u0111\u1ed5i, ch\u1ea5p nh\u1eadn nh\u1eefng g\u00ec kh\u00f4ng th\u1ec3 thay \u0111\u1ed5i v\u00e0 t\u1eeb b\u1ecf nh\u1eefng g\u00ec kh\u00f4ng th\u1ec3 ch\u1ea5p nh\u1eadn. C\u00f9ng ng\u1eabm ....</span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/hay-thay-doi/\" title=\"H\u00e3y thay \u0111\u1ed5i\u2026\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"H\u00e3y thay \u0111\u1ed5i\u2026\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/hay-thay-doi_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/hay-thay-doi_thumb-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-1109\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-17\" data-original-title=\"<a href='http://bbland.local/tuoi-tre-can/'><span class='title'>Tu\u1ed5i tr\u1ebb c\u1ea7n!</span></a><span class='postex'>Tu\u1ed5i tr\u1ebb c\u1ea7n! Kh\u00f4ng quan t\u00e2m t\u1edbi ng\u01b0\u1eddi kh\u00e1c ngh\u0129 g\u00ec v\u1ec1 m\u00ecnh, t\u1eadp trung s\u1ed1ng cu\u1ed9c s\u1ed1ng theo c\u00e1ch tr\u1ecdn v\u1eb9n nh\u1ea5t. \u0110\u00f3 l\u00e0 \u0111i\u1ec1u m\u00e0 tu\u1ed5i tr\u1ebb c\u1ea7n h\u1ecdc h\u1ecfi ... </span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/tuoi-tre-can/\" title=\"Tu\u1ed5i tr\u1ebb c\u1ea7n!\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"Tu\u1ed5i tr\u1ebb c\u1ea7n!\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/tuoitre-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/tuoitre-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-775\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-18\" data-original-title=\"<a href='http://bbland.local/hanh-phuc-la-hanh-trinh-chung-ta-di-moi-ngay/'><span class='title'>H\u1ea1nh ph\u00fac l\u00e0 h\u00e0nh tr\u00ecnh ch\u00fang ta \u0111i m\u1ed7i ng\u00e0y</span></a><span class='postex'>H\u1ea1nh ph\u00fac l\u00e0 h\u00e0nh tr\u00ecnh ch\u00fang ta \u0111i m\u1ed7i ng\u00e0y, theo b\u1ea1n \u0111i\u1ec1u n\u00e0y l\u00e0 \u0111\u00fang hay sai, c\u00f9ng th\u1ea3o lu\u1eadn m\u1ed9t ch\u00fat v\u1ec1 v\u1ea5n \u0111\u1ec1 n\u00e0y \u0111\u1ec3 hi\u1ec3u h\u01a1n cu\u1ed9c s\u1ed1ng nh\u00e9 ...</span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/hanh-phuc-la-hanh-trinh-chung-ta-di-moi-ngay/\" title=\"H\u1ea1nh ph\u00fac l\u00e0 h\u00e0nh tr\u00ecnh ch\u00fang ta \u0111i m\u1ed7i ng\u00e0y\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"H\u1ea1nh ph\u00fac l\u00e0 h\u00e0nh tr\u00ecnh ch\u00fang ta \u0111i m\u1ed7i ng\u00e0y\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/hanhphuc_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/hanhphuc_thumb-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n          <div class=\"column is-half-mobile is-one-third-tablet\">\n            <article id=\"post-661\" class=\"bvhome chu_thich\" style=\"\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-19\" data-original-title=\"<a href='http://bbland.local/ai-cung-co-1-tuoi-tre/'><span class='title'>Ai c\u0169ng c\u00f3 1 tu\u1ed5i tr\u1ebb</span></a><span class='postex'>Tu\u1ed5i tr\u1ebb n\u00e0y. M\u00ecnh ph\u1ea3i s\u1ed1ng nh\u01b0 m\u1ed9t \u0111o\u00e1 h\u01b0\u1edbng d\u01b0\u01a1ng. D\u00f9 c\u00f3 \u0111au bu\u1ed3n, t\u1ed5n th\u01b0\u01a1ng. V\u1eabn m\u00e3i h\u01b0\u1edbng v\u1ec1 ph\u00eda c\u00f3 \u00e1nh m\u1eb7t tr\u1eddi ...</span>\">\n              <div class=\"post-thumb\">\n                <a href=\"http://bbland.local/ai-cung-co-1-tuoi-tre/\" title=\"Ai c\u0169ng c\u00f3 1 tu\u1ed5i tr\u1ebb\">\n                  <img class=\"lazy post-thumbnail loaded\" alt=\"Ai c\u0169ng c\u00f3 1 tu\u1ed5i tr\u1ebb\" data-src=\"http://bbland.local/wp-content/uploads/2017/03/ai-cung-co-1-tuoi-tre_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/03/ai-cung-co-1-tuoi-tre_thumb-690x388.jpg\" data-was-processed=\"true\">\n                </a>\n              </div>\n            </article>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n  <section id=\"chia-se\" class=\"home-sec chia-se box-layout sameheight\" style=\"background-color: #e3edfc;\">\n    <div class=\"container\">\n      <div class=\"layoutwrap\">\n        <div class=\"header\">\n          <a href=\"http://bbland.local/chia-se\" class=\"title\">CHIA S\u1eba</a>\n          <a href=\"http://bbland.local/chia-se\" class=\"see-more pull-right\">[ xem th\u00eam ]</a>\n        </div>\n        <div class=\"contents\">\n          <div class=\"columns is-gapless is-mobile is-multiline\">\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3729\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-20\" data-original-title=\"<a href='http://bbland.local/lam-dep-review-set-son-vali-mini-ink-peripera/'><span class='title'>[L\u00e0m \u0111\u1eb9p] Review set son vali mini INK PERIPERA</span></a><span class='postex'>Set son vali mini c\u1ee7a INK PERIPERA \u0111ang l\u00e0m m\u01b0a l\u00e0m gi\u00f3 ph\u1ea3i kh\u00f4ng c\u00e1c b\u1ea1n, v\u1edbi h\u00ecnh th\u1ee9c b\u00ean ngo\u00e0i kh\u00e1 xinh x\u1eafn, \u0111\u00e1ng y\u00eau, gi\u00e1 c\u1ea3 h\u1ee3p l\u00ed, c\u00f9ng xem ...</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/lam-dep-review-set-son-vali-mini-ink-peripera/\" title=\"[L\u00e0m \u0111\u1eb9p] Review set son vali mini INK PERIPERA\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"[L\u00e0m \u0111\u1eb9p] Review set son vali mini INK PERIPERA\" data-src=\"http://bbland.local/wp-content/uploads/2017/06/lam-dep-review-set-son-vali-mini-ink-peripera_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/06/lam-dep-review-set-son-vali-mini-ink-peripera_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/lam-dep-review-set-son-vali-mini-ink-peripera/\" class=\"title\">[L\u00e0m \u0111\u1eb9p] Review set son vali mini INK PERIPERA</a>\n              </article>\n            </div>\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3725\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-21\" data-original-title=\"<a href='http://bbland.local/cach-lam-cac-loai-thit-kho-sieu-ngon/'><span class='title'>C\u00e1ch l\u00e0m c\u00e1c lo\u1ea1i th\u1ecbt kh\u00f4 si\u00eau ngon</span></a><span class='postex'>C\u00e1ch l\u00e0m c\u00e1c lo\u1ea1i th\u1ecbt kh\u00f4 si\u00eau ngon bao g\u1ed3m lo\u1ea1i th\u1ecbt \u0111\u01b0\u1ee3c ch\u1ebf bi\u1ebfn th\u00e0nh th\u1ecbt kh\u00f4 t\u1ea9m \u01b0\u1edbp gia v\u1ecb v\u00e0 \u0111\u1ec3 lai rai d\u1ea7n d\u1ea7n \u0111\u00e2y c\u00e1c ch\u1ebf \u01a1i, ra ch\u1ee3 mua \u0111\u1ed3 ...</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/cach-lam-cac-loai-thit-kho-sieu-ngon/\" title=\"C\u00e1ch l\u00e0m c\u00e1c lo\u1ea1i th\u1ecbt kh\u00f4 si\u00eau ngon\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"C\u00e1ch l\u00e0m c\u00e1c lo\u1ea1i th\u1ecbt kh\u00f4 si\u00eau ngon\" data-src=\"http://bbland.local/wp-content/uploads/2017/06/cach-lam-cac-loai-thit-kho-sieu-ngon_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/06/cach-lam-cac-loai-thit-kho-sieu-ngon_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/cach-lam-cac-loai-thit-kho-sieu-ngon/\" class=\"title\">C\u00e1ch l\u00e0m c\u00e1c lo\u1ea1i th\u1ecbt kh\u00f4 si\u00eau ngon</a>\n              </article>\n            </div>\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3723\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-22\" data-original-title=\"<a href='http://bbland.local/cach-lam-3-loai-milk-foam-voi-tra-sua/'><span class='title'>C\u00e1ch l\u00e0m 3 lo\u1ea1i Milk Foam v\u1edbi tr\u00e0 s\u1eefa</span></a><span class='postex'>C\u00e1ch l\u00e0m 3 lo\u1ea1i Milk Foam v\u1edbi tr\u00e0 s\u1eefa - \u00f9ng nhau th\u1eed t\u00e0i l\u00e0m c\u00e1c m\u00f3n tr\u00e0 s\u1eefa th\u01a1m ngon t\u1ea1i gia nh\u00e9, nh\u00ecn h\u1ea5p d\u1eabn qu\u00e1 \u0111i m\u00e0 \u0111\u01a1n gi\u1ea3n n\u1eefa ...</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/cach-lam-3-loai-milk-foam-voi-tra-sua/\" title=\"C\u00e1ch l\u00e0m 3 lo\u1ea1i Milk Foam v\u1edbi tr\u00e0 s\u1eefa\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"C\u00e1ch l\u00e0m 3 lo\u1ea1i Milk Foam v\u1edbi tr\u00e0 s\u1eefa\" data-src=\"http://bbland.local/wp-content/uploads/2017/06/cach-lam-3-loai-milk-foam-voi-tra-sua_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/06/cach-lam-3-loai-milk-foam-voi-tra-sua_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/cach-lam-3-loai-milk-foam-voi-tra-sua/\" class=\"title\">C\u00e1ch l\u00e0m 3 lo\u1ea1i Milk Foam v\u1edbi tr\u00e0 s\u1eefa</a>\n              </article>\n            </div>\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3694\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-23\" data-original-title=\"<a href='http://bbland.local/lam-dep-swatch-son-innisfree-real-fit-velvet-lipstick/'><span class='title'>[L\u00e0m \u0111\u1eb9p] Swatch son Innisfree Real Fit Velvet Lipstick</span></a><span class='postex'>C\u00f9ng xem ch\u1ebf An Ph\u01b0\u01a1ng review 10 th\u1ecfi son Innisfree Real Fit Velvet Lipstick nh\u00e9 m\u1ecdi ng\u01b0\u1eddi, nh\u00ecn 10 th\u1ecfi son n\u00e0y m\u00ea gh\u00ea lun \u00e1, gi\u00e1 c\u0169ng kh\u00e1 \u1ed5n cho 1 th\u1ecfi ...</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/lam-dep-swatch-son-innisfree-real-fit-velvet-lipstick/\" title=\"[L\u00e0m \u0111\u1eb9p] Swatch son Innisfree Real Fit Velvet Lipstick\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"[L\u00e0m \u0111\u1eb9p] Swatch son Innisfree Real Fit Velvet Lipstick\" data-src=\"http://bbland.local/wp-content/uploads/2017/05/lam-dep-swatch-son-innisfree-real-fit-velvet-lipstick_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/05/lam-dep-swatch-son-innisfree-real-fit-velvet-lipstick_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/lam-dep-swatch-son-innisfree-real-fit-velvet-lipstick/\" class=\"title\">[L\u00e0m \u0111\u1eb9p] Swatch son Innisfree Real Fit Velvet Lipstick</a>\n              </article>\n            </div>\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3406\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-24\" data-original-title=\"<a href='http://bbland.local/cac-kieu-toc-dep-danh-cho-ban-gai/'><span class='title'>C\u00e1c ki\u1ec3u t\u00f3c \u0111\u1eb9p d\u00e0nh cho b\u1ea1n g\u00e1i</span></a><span class='postex'>T\u00f3c \u0111\u01b0\u1ee3c t\u1ebft ho\u1eb7c l\u00e0m ki\u1ec3u th\u1eadt lung linh, nh\u1eb9 nh\u00e0ng s\u1ebd khi\u1ebfn cho c\u00e1c b\u1ea1n g\u00e1i lu\u00f4n t\u1ef1 tin v\u00e0o b\u1ea3n th\u00e2n. C\u00f9ng xem C\u00e1c ki\u1ec3u t\u00f3c \u0111\u1eb9p d\u00e0nh cho b\u1ea1n g\u00e1i \u0111\u1ec3 c\u00f9ng..</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/cac-kieu-toc-dep-danh-cho-ban-gai/\" title=\"C\u00e1c ki\u1ec3u t\u00f3c \u0111\u1eb9p d\u00e0nh cho b\u1ea1n g\u00e1i\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"C\u00e1c ki\u1ec3u t\u00f3c \u0111\u1eb9p d\u00e0nh cho b\u1ea1n g\u00e1i\" data-src=\"http://bbland.local/wp-content/uploads/2017/05/cac-kieu-toc-dep-danh-cho-ban-gai_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/05/cac-kieu-toc-dep-danh-cho-ban-gai_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/cac-kieu-toc-dep-danh-cho-ban-gai/\" class=\"title\">C\u00e1c ki\u1ec3u t\u00f3c \u0111\u1eb9p d\u00e0nh cho b\u1ea1n g\u00e1i</a>\n              </article>\n            </div>\n            <div class=\"column is-half-mobile is-one-third-tablet\">\n              <article id=\"post-3242\" class=\"bvhome chu_thich\" style=\"background-color:#ffffff; border-radius: 5px;\" data-arrow=\"true\" data-position=\"bottom\" data-theme=\"light\" data-interactive=\"true\" data-tooltipped=\"\" aria-describedby=\"tippy-tooltip-25\" data-original-title=\"<a href='http://bbland.local/tat-tan-tat-ve-co-va-eyeshadow/'><span class='title'>T\u1ea5t t\u1ea7n t\u1eadt v\u1ec1 c\u1ecd v\u00e0 Eyeshadow</span></a><span class='postex'>\u0110\u00e2y l\u00e0 1 video h\u01b0\u1edbng d\u1eabn t\u00ecm hi\u1ec3u T\u1ea5t t\u1ea7n t\u1eadt v\u1ec1 c\u1ecd v\u00e0 Eyeshadow. C\u00f9ng nhau xem v\u00e0 h\u1ecdc c\u00e1ch l\u00e0m \u0111\u1eb9p \u0111\u1ec3 ho\u00e0n thi\u1ec7n b\u1ea3n th\u00e2n h\u01a1n nh\u00e9 ...</span>\">\n                <div class=\"post-thumb\">\n                  <a href=\"http://bbland.local/tat-tan-tat-ve-co-va-eyeshadow/\" title=\"T\u1ea5t t\u1ea7n t\u1eadt v\u1ec1 c\u1ecd v\u00e0 Eyeshadow\">\n                    <img class=\"lazy post-thumbnail loaded\" alt=\"T\u1ea5t t\u1ea7n t\u1eadt v\u1ec1 c\u1ecd v\u00e0 Eyeshadow\" data-src=\"http://bbland.local/wp-content/uploads/2017/05/tat-tan-tat-ve-co-va-eyeshadow_thumb-690x388.jpg\" src=\"http://bbland.local/wp-content/uploads/2017/05/tat-tan-tat-ve-co-va-eyeshadow_thumb-690x388.jpg\" data-was-processed=\"true\">\n                  </a>\n                </div>\n                <a href=\"http://bbland.local/tat-tan-tat-ve-co-va-eyeshadow/\" class=\"title\">T\u1ea5t t\u1ea7n t\u1eadt v\u1ec1 c\u1ecd v\u00e0 Eyeshadow</a>\n              </article>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</div>\nImages doesn't load, (just show data-src). @verlok I added \"lazy\" class in every div, img. But still not work.. ",
    "dalvaradotey": "@verlok, yep ... testing in Chrome with original code and work fine.\n<picture>\n  <source srcset=\"path/to/image.webp\" type=\"image/webp\">\n  <source srcset=\"path/to/image.jpg\" type=\"image/jpeg\">\n  <img src=\"path/to/image.jpg\">\n</picture>\nI know about cloudinary... and tried google pagespeed module with nginx, but i think i can make some optimizations by my own.\nThanks for checking. @verlok,\nOk, I'm testing the pen file making some modifications, the problem was on 7.2.0 version. I'm upgrading to 8.0.1 and now work fine :) Sorry, I used cdn script in the README example .\nThanks again for this great script.. ",
    "brokleen": "Same with throttle set at 50.\nI have this issue on chrome for mac os, on windows everything works well\n. I found the issue.\nI have a conflict between lazyload and Pikaday\nWhen Pikaday is initialize, the images keep the pending states in the network inspector during the scroll. . ",
    "vseva": "Don't see branch hotfix/8.0.3. Are you forget to create it?\ngrunt failed due rollup warning Warning: bundle.generate(...) now returns a Promise instead of a { code, map } object\nWith --force have some strange issue, dist forlder didn't update:\n```\n$ grunt eslint && grunt rollup --force && grunt babel && grunt uglify\nRunning \"eslint:src\" (eslint) task\n/lazyload/src/lazyload.core.js\n   68:44  warning  No magic number: 0                no-magic-numbers\n   73:18  warning  No magic number: 0                no-magic-numbers\n   92:42  warning  No magic number: 0                no-magic-numbers\n   93:53  warning  No magic number: 1                no-magic-numbers\n   98:32  warning  No magic number: 0                no-magic-numbers\n  113:18  warning  No magic number: 0                no-magic-numbers\n  121:41  warning  No magic number: 0                no-magic-numbers\n  122:52  warning  No magic number: 1                no-magic-numbers\n  147:26  warning  No magic number: 0                no-magic-numbers\n  148:35  warning  use Number(new Date()) instead  no-implicit-coercion\n  151:34  warning  No magic number: 0                no-magic-numbers\n\u2716 11 problems (0 errors, 11 warnings)\nDone.\nRunning \"rollup:files\" (rollup) task\nWarning: bundle.generate(...) now returns a Promise instead of a { code, map } object Used --force, continuing.\nRunning \"babel:dist\" (babel) task\nDone.\nRunning \"uglify:dist\" (uglify) task\n\n\n1 file created 13.44 kB \u2192 5.15 kB\n\n\nDone.\n$ git status\nOn branch bg-qoutes\nYour branch is up-to-date with 'origin/bg-qoutes'.\nChanges not staged for commit:\n  (use \"git add ...\" to update what will be committed)\n  (use \"git checkout -- ...\" to discard changes in working directory)\n    modified:   package.json\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")\n```. Yes, all looks fine, but dist files doesn't contain my fix. You can do it yourself.. ",
    "sebastianbarfurth": "I'll see about it, it was just a thought I had while working with the script.. ",
    "gsouf": "Can't we simply replace element.dataset.wasProcessed with element.getAttribute('wasProcessed') ?. @verlok  IE9 is still used by some people. Ok, you are right that's really minor but in my case I work in ecommerce and we try to keep as much compatibility as possible with IE9 because we still have some orders in a month on IE9.  (well.... I even spotted courageous customers that use IE8, but that's an other story!). Brillant,  thanks!. Tested and confirmed, works like a charm, thanks for your time!. ",
    "mateutek": "Here is Html code.\nI knew that when using it on div you can set the background, but will it work with <picture>?\nI have n-number of this containers with only 1 image inside\nThey are positioned by the Muuri grid https://github.com/haltu/muuri\nhtml\n<div class=\"item js-item item--medium\">\n    <div class=\"item-content\">\n        <div class=\"inspiration\">\n            <div class=\"inspiration__content\">\n                <ul class=\"inspiration__tags\">\n                    <li class=\"tag\">tag-01</li>\n                    <li class=\"tag\">tag-02</li>\n                </ul>\n                <div class=\"inspiration__title\">inspiration-04</div>\n            </div>\n            <div class=\"inspiration__image js-inspiration-image\">\n                <picture>\n                    <source media=\"(min-width: 1280px)\" data-source=\"https://unsplash.it/427 427w\">\n                    <source media=\"(min-width: 1024px)\" data-source=\"https://unsplash.it/341 341w\">\n                    <source media=\"(min-width: 992px)\" data-source=\"https://unsplash.it/331 331w\">\n                    <source media=\"(min-width: 768px)\" data-source=\"https://unsplash.it/256 256w\">\n                    <source media=\"(min-width: 568px)\" data-source=\"https://unsplash.it/667 667w\">\n                    <source media=\"(min-width: 320px)\" data-source=\"https://unsplash.it/375 375w\">\n                    <source data-source=\"https://unsplash.it/320\">\n                    <img class=\"js-lazyload\" data-original=\"https://unsplash.it/427\"> \n                </picture>\n            </div>\n        </div>\n    </div>\n</div>. ",
    "SassNinja": "@verlok I can't just use the elements_selector because it requires a string.\nMy reinitialization is node based (precisely jQuery objects). Thus I can't provide a selector string to the lazyload plugin.\nmy code looks similar to this\njavascript\nwindow.reInit($container);\nwhat reinitializes many different plugins in the target container. The way for me to do this is piping through the container to the lazyload plugin without affecting the container (window).. > What if we made a modification to allow passing the elements directly to the LazyLoad object, like a setElements method? Would this solve?\nIt would be an improvement as well if the selector option also accepts elements but unfortunately this won't help me. I need an option to pass a container element in which the plugin is supposed to look for lazyload images and initializes them.\n\nStill, looking at the code you wrote, it seems that you just need to change the queryOriginNode... and I still don't understand why it cannot be the original container\n\nRight I only need to change the queryOriginNode. Let me explain a bit more detailed why:\nI'm working quite a lot with ajax on some pages and thus I need to reinitialize all the containers that I replace.\nSince there are many plugins included (not only lazyload) I've created an abstract module where all reinits modules are bundled. To make things as easy as possible I've added a param to pipe though the element that got replaced. Then all registered modules look for the selectors (they internally use) within that element and initialize them.\nThus I would like to avoid getting away from my abstract setup and just need an option to tell lazyload to use a specific container instead of the whole document.\nThe current container option doesn't work because it's also used to determine when a lazyload image comes in. As said I only want to adjust the search scope.\nHope it's now clear why I need this option and why I've built it this way \ud83d\ude09 \n. As you already spotted version 9 can't be used since it has the same limitation:\nno option that only affects the search for elements\n\nI think that the best thing you can do is to create one instance of LazyLoad for each one of your modules.\n\nI spent some time (before my PR) thinking about how to use the existing options to keep my modular reInit setup.\nI also thought about the way you've suggested.\nBut the problem is I don't have a selector when the reInit is done.\nNot all of the container that get reinitialzed have an id or only one class. So I can't provide a selector string if my whole setup is element based.\nThe bottom line is that there's simply an option missing that let's me pass in elements instead of a string.\nYour previous suggestion to adjust the elements_selector option to accept elements as well is the only alternative to the PR imo.\nBut to be honest I don't understand what argues against my additional option.\nIt's just one additional option, a small condition at the top of the core code and provides 100% backwards compatibility.\nWhat argues against it in your eyes?\n. I indeed considered renaming container into scrolling_container because that option isn't described detailed enough in the docs (at the beginning I used it wrongly to adjust the queryOriginNode).\nBut I agree to you: even if the option gets renamed (what would break backwards compatibility) it might still be confusing.\nSo the best solution really seems to be extending the elements_selector option so it also supports elements.\nAs soon as I have some time I'll make another PR for this.\n. ",
    "Hackintosh": "Class error is also not being added in this case\nLink updated. I have no idea, but this is a bug. ",
    "bitfella": "Same here.\nCss classes are not added, load callback is not triggered (but the script is working fine).\nI am using latest npm package available (8.1.0), but I've tested 8.0.3 with the same result.\n```\nimport LazyLoad from 'vanilla-lazyload';\nconst initLazyLoad = new LazyLoad({\n  elements_selector: '.js-ll',\n  class_loading: 'll-loading',\n  class_loaded: 'll-loaded',\n  class_error: 'll-error',\n  callback_load: function (element) {\n    console.log('image loaded');\n  }\n});\n```\nES6 transpiled via Babbel, tested on Chrome 60.0.3112.90, Opera 47.0.2631.55, Safari 10.1 on Mac OS 10.11.6.\nAny advice?. Hello again,\nI wrote 'ES6 transpiled via Babbel' just to point out that I am not embedding lazyload as a script in a page, but I am using it as an ES6 import in a Webpack bundle (transpiled with Babbel). I was guessing that maybe that was the problem.\nAnyway, I just made a codepen to show you the issue and it does not seem to work as well. \nIs there perhaps something I can't understand about how these features should work? Am I using the script in the wrong manner? In my intent it should append an 'll-loaded' class on each lazyloaded element, when the image has loaded fine. \nThanks for your support!. I am sorry, I knew I was doing something wrong :)\nMoreover I forgot to point out that I was using the script to load background images in my first comment. If i may give you and advice, I suggest to clearly declare this browser restriction (for background loading mode) in the docs (if it is not already there).\nThanks again. ",
    "matthew-dean": "Oh never mind, this is because I missed the \"new\" keyword. You could do a factory pattern that allows the lib to work with or without new.. ",
    "vanloc0301": "I follow at #Responsive images - srcset and sizes from Readme.md:\nFull code (Laravel blade template include CSS and JS file):\n```\n\n\n                img:not([src]):not([srcset]) {\n            visibility: hidden;\n        }\n    \n\n\n@foreach($products as $product) \n        \n\n@endforeach\n\n\n        var myLazyLoad = new LazyLoad();\n\n\n```\nI think lazyload is working because it auto generate: class=\"loading\" and data-was-processed=\"true\" when I run my project.\nI tested on master\\demos\\with_srcset_sizes.html. When running this file, it auto generates element has src attribute have URL to image same with data-src. In my project don't have this attribute and don't show any image.. From the description on LazyLoad:\n\nLazyLoad is a fast, lightweight and flexible script to allow you enhance performance on your website by loading images only as they enter (or are about to enter) the viewport or a scrollable area, with best support to the img srcset attribute and to the progressive JPEG image format.\n\nMy image is .png file. Is that the problem?. @verlok sorry, I'm not online about 1 weeks. It's working. Thank you very much.. ",
    "jrtderonde": "\nThe plugin not work on my mobile Chrome 54.0,\nbut if I comment this code\nhttp://clip2net.com/s/3NJZi2r\nit works amesome.\n\nURL is missing. ",
    "andreiglingeanu": "Oh, sorry. I just saw #118 and the fact that you need to support IE9. I'm gonna close the pull request. Sorry, again.. ",
    "chrisjansky": "Hello Andrea,\nyes, it is working OK in Chrome and Safari. The funny thing is I don't seem to be getting any errors with 10.3.0:\n\nI'll try version 8 again, but I didn't have any luck with that before either.. Happy to confirm reverting to 8.2.0 and setting data_src: 'src' does the trick! I tried 8.2.0 before, but the data_src is apparently the critical part.\nThanks @liepumartins for the tip!. ",
    "liepumartins": "I can confirm, that 10.3.0 did not work in Edge for me as well. No errors in console shown.\nNow using 8.2.0, after setting {data_src: 'src'} it works.\nThank you!. ",
    "npdung": "I replace \njavascript\nvar onIntersection = function onIntersection(entries) {\n    entries.forEach(function (entry) {\n        if (!entry.isIntersecting) {\n            return;\n        }\n        var element = entry.target;\n        revealElement(element, settings);\n        _this._observer.unobserve(element);\n    });\n    _this._elements = purgeElements(_this._elements);\n};\nby \njavascript\nvar onIntersection = function onIntersection(entries) {\n    entries.forEach(function (entry) {\n        if (entry.isIntersecting !== null && entry.isIntersecting === false) {\n            return;\n        }\n        var element = entry.target;\n        revealElement(element, settings);\n        _this._observer.unobserve(element);\n    });\n    _this._elements = purgeElements(_this._elements);\n};\nbecause when i debug on MS Edge \"entry.isIntersecting\" is null not boolean. @verlok thank for your update and bug documentation, it working.. @aliasltb  version 10.3.1 is work with owl carousel, on Chrome 61, MS Edge 15.\nmy product: https://tacavet.familala.com/. ",
    "aliasltb": "Coincidentially I had the same issue, but on Chrome 56 and lower and was searching for a solution right now. I tried the fix of npdung and this works! This is the correct answer on this issue.. @verlok  I updated your plugin to 10.3.1, but for me the loading behaviour is strange. I used this on Chrome 57 and all images do load as expected. But when I use lazyload in an owl carousel, the upcoming slides don't load the images - at least not immediately. With the solution of @npdung I works perfectly everywhere.. ",
    "adriandmitroca": "Still not working on latest version of MS Edge.. I have tried basically all available versions - latest builds for 8, 9 and 10. None worked.. Sorry @verlok, I didn't mean it. I was referring to previous comments.\nWhat I did was pretty much basic setup with just data-src attributes on img and initialization new LazyLoad().\nIt worked great on all browsers, including IE9 except Edge, where images do not load at all.. If that helps, this issue is not present on 10.4.2. I've just discovered it after making an upgrade.. I was running Laravel Mix with default configuration, you can find specific versions of all dependencies here: https://github.com/JeffreyWay/laravel-mix/blob/master/package.json\nIn short - Webpack 3.11 and Babel 6.24.. ",
    "stefan-kern": "on chrome version 65.0.3298.3 while scrolling through a page, lazyload elements can have both \nentry.intersectionRatio: 0 and isIntersecting: true. this appears seemingly at random, i could not reproduce it consistently, other than reloading the page and scrolling until it happens.\ndue to the recent change (edge fix) to if (entry.intersectionRatio > 0) this can lead to the case where images do not get loaded on chrome. i had to revert to the old version if (entry.isIntersecting), although i did not check if the current version of edge (16) is affected still. either way, it could be worked around with an additional if (entry.isIntersecting === null).. After some further tests, edge version 15.15063 and higher did work with the old entry.isIntersecting, so it might be a good idea to revert the change? . In case you also want to do some testing, here is a collection of various edge vms: https://github.com/magnetikonline/linuxmicrosoftievirtualmachines. ",
    "alkahtani": "Thank you verlok for your reply , here is what i have done so far but before i would like to give you quick brief about what i want to do , i am developing an app using ionic 1 , this app is to downloading 100 of stored images in firebase storage , i came into performance issue , now , i have stored lazyload.js from your repo , add it to my index page , initialize lzyloadoptions in my controller , i haven't add it  to any event  , i got the below error  \"ncaught TypeError: Cannot read property 'classList' of null\" specifically at line 106 ,6 and 7 \n(typeof exports === 'undefined' ? 'undefined' : _typeof(exports)) === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : global.LazyLoad = factory();\n})(this, function () {\nvar supportsClassList = !!document.body.classList; \ni would appreciate if you can direct me or helping me to solve this issue , i have been stuck for a couple of days looking to solve this performance issue using lazy load technique . update ...\ni have moved lazyload.js file from the index page to the page having issue with and it seems the ncaught error disappeared  ,now , i want to pass the lazy load options i have don the following : \n1.added my tag as below \n <img  data-hire=\"{{assetCollection[$index].URL}}\"  class=\"photo_library>\n2. window.lazyLoadOptions = {\n              threshold: 50,\n              data_src: \"data-hire\"\n          };\n, i dont know if this is the right way , please help how to do it , appreciate your patience  . UPDATE #2\nhere is my console and snapshot of my app grid ,the images shown like white boxes ,  please note i haven't added any css \n\n\n. I have changed as per recommended above but i got the same result , here is my code to give more insight \n<div class=\"row\" ng-repeat=\"brick in assetCollection | limitTo:numberOfImagesToDisplay \n               track by $index \" ng-if=\"$index % 3 === 0\">\n                <div class=\"col col-33\" ng-if=\"$index < assetCollection.length\"  ng-click=PassSelectedimg({{$index}}) >\n                    <img  data-hire=\"{{assetCollection[$index].URL}}\"  class=\"photo_library\"  />\n                </div>\n                <div class=\"col col-33 \" ng-if=\"$index + 1 < assetCollection.length\" ng-click=\"PassSelectedimg({{$index+1}})\">\n                    <img  data-hire=\"{{assetCollection[$index + 1].URL}}\"  class=\"photo_library\"   />\n                </div>\n                <div class=\"col col-33  \" ng-if=\"$index + 2 < assetCollection.length\" ng-click=\"PassSelectedimg({{$index+2}})\">\n                    <img  data-hire=\"{{assetCollection[$index + 2].URL}} \" class=\"photo_library\"   />\n                </div>\n          </div>\n<script>\n            window.lazyLoadOptions = {\n              threshold: 50,\n              data_src:\"hire\"\n            };\n            window.addEventListener('LazyLoad::Initialized', function (e) {\n              console.log(e.detail.instance);\n              console.log(\"Hello Lazy\")\n            }, false);\n          </script>\n          <script type=\"text/javascript \" src=\"js/lazyload.js\"> </script>\n, i know i am not following ionic best practices by adding the js file to my index page but i thought adding it here will solve the issue, i feel i doing something wrong .\n. many thanks @verlok , sorry for being late to reply, i have been out of time last days , i will do a test and update you soon . . I will update you ... so sorry it is out of my hand. @verlok i couldn't get it work , i tried my best with no luck , if you feel you need to close this issue and re-open it again when both of us have time to do more work it is fine . i would like to appreciate every time you spend to reply and check or followup this issue. i promise to do more test on clean project if it is working i  will email you . this is my email \"al-kahtani@hotmail.com\". ",
    "tom10271": "I am not sure whether the important section is obvious enough or not as I realize what is going on until I read the source code. The problem is I actually still unable to find the important notes. I think most people will only read the README.md in https://github.com/verlok/lazyload. It hints me to install v8, I do so and follow whatever in README.md and it is not working.. I know it is working for X and Y axis but I want to set 800 for Y and 2000 For X. I am using picture tag which many plugins are not natively supported. The reason why I want to set Y to 800 but not 2000 is because when offset for Y is 2000 it is more or less the same as no lazy load, there will be a lot of images got selected. I think is better as it is clearer\njs\n{\n     threshold: {\n          x: 2000,\n          y: 800\n     }\n}. Oh I am using 8.6.0. We need to support major browsers. My case is not the same as the one you show and the one in #172. \nImages inside gallery are large and listed horizontally. Yes I can define a lazyload instance for gallery with high threshold but it makes browser start to load images much earlier than it should. So to deal with this issue I need a small vertical but high horizontal threshold even it is specifically for my gallery only.\nHere is one of the example page that even I set for example 2000 as threshold, the situation is still not ideal:\nhttps://hypebeast.com/zh/2018/1/hypebeast-interview-be-a-model-kol-kiwi-egghead. Flickity do not suport picture tag. Never mind I will fork your project and\nfix it myself in 8.6.0\nThanks\n2018-03-03 4:41 GMT+08:00 Andrea Verlicchi notifications@github.com:\n\nHi @tom10271 https://github.com/tom10271,\nthank you for sharing the website.\nI can see you're using a gallery library (Flickity) on your website.\nThe fact is that when you use a gallery library, you don't have to deal\nwith the LazyLoad options, because LazyLoad only manages scroll and the\ngallery libraries don't use scroll, they move the object in the page.\nI did a quick research and I've found how to lazily load the images using\nFlickity: you must use Flickity's lazyLoad option. More info here:\nhttps://flickity.metafizzy.co/options.html\nThis would solve the horizontal loading, making the invisible images load\nonly when the user requests it.\nBut this has nothing to do with my LazyLoad script, so I'm going to close\nthis issue.\nLet me know if you have more questions.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/verlok/lazyload/issues/182#issuecomment-370046377,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AE2pXUmKnogNhr3AR29LHn9fNY_t5lKmks5taa5-gaJpZM4SNXSE\n.\n. The nature of Flickity is it layouts all images in the direction you want but not injecting images on the fly. Flickity supports lazyload but only for img tag only. Yes my web page only scroll vertically but images are layout horizontally, when I set threshold to 800 with my picture tag used Flickity gallery it is not updating quick enough when user switch gallery pages.\n\nAnyway, you are the most responsive open source developer I have ever met. I really appreciate. Thank you again. Currently I will call lazyloadInstance.udpate() when user switch to next images to archive lazy load for picture tag images. CEO complains it flicks, obviously the lazy load threshold is not enough. . We use picture tag as images inside gallery are larger and we can have\nmultiple galleries on one page. Images on the same page cannot load as\nbandwidth are low for most users. We also need to support infinity scroll\nlately which only make the problem even severe. Picture tag gallery with\nlazy load is the perfect solution. A single image can be as big as ~700 KB,\nsometimes the size of a post can go up to 22MB.\n. https://github.com/metafizzy/flickity/issues/172\nI think picture tag or img tag with srcset are not the core problem. I can use img tag with srcset too but Flickity is not supporting lazy load with srcset too. We have tried flexslider 2, swipebox, photoswipe and flickity already, they are all imperfect solution but Flickity is working to best so far. We do not want to give a try to another gallery. We are still seeking for solution to solve image lazy load in Flickity gallery. ",
    "nunoguerra": ":)\nRefiro-me \u00e0s imagens que ficam na cache do browser ou seja depois de carregarmos uma p\u00e1gina essas imagens ficam em cache internamente no browser, se fizermos um soft refresh ou se voltarmos a visitar a mesma p\u00e1gina o browser vai usar a cache para oferecer um carregamento mais r\u00e1pido e neste caso o layzload plugin deveria apresentar logo as imagens sem ter de as carregar novamente.\n. Eu entendo que o LazyLoad faz isso. A minha quest\u00e3o \u00e9 se ser\u00e1 poss\u00edvel o LazyLaod apresentar directamente as imagens da cache no browser independentemente delas estarem no viewport ou n\u00e3o. Eu estou usando um placeholder para as imagens que ainda n\u00e3o est\u00e3o carregadas e quando visito uma p\u00e1gina que j\u00e1 visitei anteriormente essa p\u00e1gina j\u00e1 tem as imagens na cache e em vez de aparecer o placeholder deveriam aparecer as imagens e n\u00e3o s\u00f3 quando elas entram no viewport.\nN\u00e3o sei se me estou a fazer entender, isto \u00e9 apenas um pequeno detalhe de melhoria, contudo agrade\u00e7o o \u00f3timo plugin que desenvolveste.. ",
    "jr-cologne": "Since you are using version 8.2, you have to use data-original instead of data-src for the source of the image that should be loaded.\nFurthermore, you need to use this JS code:\njs\nvar myLazyLoad = new LazyLoad();\nIn case you want to use data-src, you can use this:\njs\nvar myLazyLoad = new LazyLoad({\n    data_src: \"src\"\n});\nIf you need more information, you can read through the documentation of version 8 here.. ",
    "donsue": "Hi JR,\n\nI hired somebody to help me figure out the issue.  It turns out that the js script call has to be at the bottom of the page (rather than at the top where I had it).  They suggested that you might want to add a few lines of code to your script that tells the script to not start until everything else is loaded.  They said that would prevent other goofus's like me from having issues.\nNow that I have one image working, I tried adding it to the rest of the images on the page.  And it randomly works, and randomly doesn't work for my images.  Any idea what could be causing that?  http://www.donohueconsulting.com/marys/prom/index.html\nI have added lazyload to the second line of images and all the ones below that.\nThank you.\nSue\n\nFrom: JR Cologne notifications@github.com\nDate: September 29, 2017 at 2:32:25 PM EDT\nTo: verlok/lazyload lazyload@noreply.github.com\nCc: donsue freshlyshaken2@yahoo.com,  Author author@noreply.github.com\nSubject: Re: [verlok/lazyload] Having console errors getting this implemented in a bootstrap website (#141)\nReply-To: verlok/lazyload reply@reply.github.com\nSince you are using version 8.2, you have to use data-original instead of data-src for the source of the image that should be loaded.\nFurthermore, you need to use this JS code:\nvar myLazyLoad = new LazyLoad();\nIn case you want to use data-src, you can use this:\nvar myLazyLoad = new LazyLoad({\n    data_src: \"src\"\n});\nIf you need more information, you can read through the documentation of version 8 here.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n. I was hoping to add your responsive option but hadn\u2019t got to it yet.  Is that the callback loaded option?\n\n\nSusan Donohue\n202-256-6121\n\nOn Oct 9, 2017, at 10:51 PM, Andrea Verlicchi notifications@github.com wrote:\nHi @donsue,\nthank you for getting back to us.\nThey suggested that you might want to add a few lines of code to your script that tells the script to not start until everything else is loaded.  They said that would prevent other goofus's like me from having issues.\nI didn\u2019t do that because I want to give the script users the freedom to decide when and how to execute the script.\nThe only thing that I changed upon a user\u2019s request was to add the ability to execute the script asynchronously.\nI took a look to your page and I noticed that the images can be shown overlapped sometimes. I think this must be because the images don\u2019t have a size until loaded, and some js could use the size to position the images. I suggest to set a size in CSS even before the images load (at least set a min-height, which also avoids all images to load at once), or to execute any eventual graphically arranging JavaScript after the images were loaded. You can use the callback_loaded option\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub, or mute the thread.\n. \n",
    "yekowele": "@verlok I apologize for not specifying the version. I was using V 10.3,  it's my fault. \nAny way solved using version 8.2.x\nThank you for helping.. @warudin i think the cause of the problem another js error.\nYou can read the android remote device error messages using the method specified this link : https://developers.google.com/web/tools/chrome-devtools/remote-debugging/\n. ",
    "warudin": "I'm having this problem as well, but in my case after updating to 8.2.x the problem wasn't solved. \nI don't know how to get error messages or debug the Internet-browser on Android. I'm seeing no image, while a fallback in the  tag is provided. The site where this happens can be viewed here: agro-chemie.nl\nHere's a screenshot of what happens:\n. Thank you very much for the tip, @yekowele! I've found out the problem was related to a lack of height and width in a parent div.. ",
    "maksimize": "Ignore that , I just read the md file . ",
    "jquimera": "@verlok Was it something like this? I tested it here but it did not work.\ncallback_load: function (element) {\n    logElementEvent(\"LOADED\", element);\n    $(\"body\").addClass(\"images-is-loading\");\n    $(\".post-thumbnail\").addClass(\"post-images-is-loading\");\n},. @verlok thanks. ",
    "KrzychuJedi": "I think keeping it separately is good option (if links would be fixed ;) Putting this in one readme may be better but I don't know the API much.  It there possibility that describing differents for each version would make it hard for read?. ",
    "paambaati": "@lukehatfield Did you try initializing the library (new LazyLoad();) on your event trigger? That should do the trick.. ",
    "lukehatfield": "@paambaati There are other lazy images on the page I don't want to load though. And unfortunately I've been taken off this task as the client is using a work-around. Thanks for your help anyway!. ",
    "xpander001": "Hi @verlok .\nThank you for your response. My reason to use background images instead of img tags if because I need to maintain the aspect ratio with cover in browsers as old as IE9 (So cannot use object fit).\nI added a small workaround (terribly dirty, I know) is your library, that goes like this:\nif (elementSrc) {\n  var img = new Image();\n  img.onload = function() {\n    element.style.backgroundImage = 'url(\"' + elementSrc + '\")';\n    addClass(element, settings.class_loaded);\n  }\n  img.src = elementSrc;\n}\nBut at least for the moment is doing the job. What are the main drawbacks you see to this approach?\nAnd thank you for your response again!. ",
    "mercuryyy": "Leon thanks for this. \nAre you able to find a work around for safari browsers? . @verlok yes thats what i did but why not add to the 10.3.3 a safari fallback something like \nvar isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\nSo run the IntersectionObserver on chrome/ie/ff and fallback to 8.2.1 on safari ? . Thank you!\n. @verlok  solution is working but in 8.2.1 when running in safari some of the same images are being downloaded 3-5 times for no reason, cant seem to figure out why.. im not sure what there is to post? the code is implemented correctly images are rendering on safari but get called multiple times while scrolling.  perhaps there is something else that is causing the liseners to reload the images multiple times, i know my way around js, i tried debuging but not familiar with your script i'd have to add console logs to each step to start debuging i thought maybe you'd be able to spot it. \nI guess i'll disable safari for now until they decide to update their stuff.\nThanks again great script very helpfull for jquery hatters. . ",
    "tristanbes": "Has this issue changed since 2017 ?\nWhat are the recommended solution ? Because the css \"hack\" stated on the documentation breaks our legacy themes (and we have a lot so we can't afford to fix them one by one).\nThanks.. ",
    "clementduncan": "I've had the same problem since upgrading my macOS/OSX to High Sierra 10.13.6.\nIt occurs on Safari 11.1.2 and the most recent Safari Technology Preview 12.0 (Release 61).\nIt can easily be recreated with the demo files, just replace the lazyload.js to v8.10.0.\nI can confirm Chrome 67, FireFox 61.0.1, Opera 54.0 work fine.\nVideo preview - http://sendvid.com/bfghr40h. Hi @verlok,\nThe conditional load demo works fine.\nI haven't vigorously tested this, but it appears to happen with the following:\n\n\nIf the image is setup as srcset demo, regardless of how many images are in the srcset, it always loads the required image twice.\n\n\nIf image is setup as picture demo, the required image will load to the frequency of <source> and <img> tags. In the demo, this results in three requests for the required image.\n\n\nAgain, the demos lazyload.js must be modified to v8 for it to work, I tested it with 8.11.0.. Hello @verlok,\nThanks for getting back to me. I've tested it on another Mac that matches the macOS and Safari, but I'm also unable to replicate the bug.\nI'll look into it next week and see if I find a reason why it's not working on my computer.. Same problem with image duplication on the test site.\nI've only ever had this problem on Safari, and if I remember correctly, only Safari on macOS 10.13.\nFF, Chrome, Opera always seem to work correctly for me.. ",
    "shoesforindustry": "Did anybody find out what this was and how to fix it? We are now having the same problem with Safari Version 11.1.2 (13605.3.8) on Mac.\nOnly seems to happen on images yet to be downloaded.\nWe have a test site page up here: \nhttps://aap.netlify.com/food\nI've moved the loading JS into the page so you can see more easily.\n'lazyload-old.js' is 8.14.0 and 'lazyload-observer.js' is 10.15.0.\nAnyone any ideas?\n. Thanks for Looking Andrea, I could reproduce this this morning, but then I could not. I think it maybe something odd either in the Apple Inspector, or me not using the inspector correctly as I usually use Firefox/Chrome inspector. Maybe it is a bit different? I say this because right after when I did it again, no problem, see images below. Apologies for what appears to be a fake problem.\nFirst thing this morning same problem:\n\nNow mysteriously gone...\n\n. Interesting, maybe not just me, I'm on 10.13.6 (17G65). It does not do it on any other browser I have tried. . Yes Andrea, I'd close this for now and if I can find a way to duplicate how or why it happens, I will post here. Many thanks for all your help.. As an aside: When we did some test compressing with mozjpeg at q60 (just about good enough for us), which produces ordinary jpgs, they were sometimes smaller or within a few bytes of webp, so we went with that. Maybe worth investigating?. Hi @verlok, I have never said thank you for the lazyload software, it is really great, so thank you! You obviously have much more experience at this than me, but our tests, in some ways, had the same outcome as yours. We were looking at large photos for a photographers website, so wanted the best quality/size/weight we could acheive. Always a juggling act, but in this instance mozjpeg seemed to produce the best results.. +1 With Erulezz comments. All in favour of this move, but it has to be after Safari 12.1 has been out for some time, it just makes sense?. ",
    "phuongleduy": "This is version and my script\n\"src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEX6+vqsEtnpAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==\"\n                        data-original=\"path/image\"\n                        class=\"img-catalog lazyLoad\"/>\"\n\n\n    new LazyLoad({threshold: 50,elements_selector: 'img.lazyLoad'});\n\nThanks a lot.. @verlok thanks you, i solved the issue, but image load on mobile so slow. Thanks a lot.. ",
    "delideha": "Yeapp, it seems working fine. Thanks \ud83d\ude0a.. ",
    "dhunink": "Hi!\nJust stumbled upon the exact same issue. It is indeed a WordPress website. It's an issue that's only related to Chrome.\nHere's an example page where the error pops-up: https://ghana-car-rentals.com/country-info/.\nBut: just by the looks of it, the error only appears once every two or three times the page is loaded. Could this be a matter of timing, where parts of the DOM have not rendered in full yet? \nIn addition: although not actually fixing the source of the issue, would it make sense to included the suggested code update to be included in a next release? It does make sense to me to check if an element's attribute actually exists before trying to read it.. Hi,\nsorry voor the delayed response.\nI think I've nailed the issue down to using a Revolution Slider, which is a common used plugin/script for image sliders and such in WordPress. After disabling sliders on a page I can't get the error to pop-up, even after reloading 20 times. With the plugin enabled the error showed up 9 out of 20 refreshes.\nThe plugin itself also offers a LazyLoad option, but I've disabled that upon testing. No luck there. Playing around with some other options doesn't resolve this either.\nSo this is where we stand: when combing LazyLoad with Revolution Slider an error is thrown\nThe exact cause is yet unknown. Perhaps you could make more sense of it when looking at the specific Revolution Slider source html?\n. @verlok I totally understand way LazyLoad should not be used on a slider, as the way a slider works is different from the way LazyLoad is intended to respond to images slipping into the viewport. Using Revolution Slider's own LazyLoad function is indeed something I try to use whenever I can. \nHowever, that doesn't fix the error thrown by this LazyLoad script. Isn't there a way to somehow find out if an image is actually visible to the user (instead or combined with using the parent fix) to avoid falsely applied LazyLoad? \nPersonally I'm not including LazyLoad myself, but I'm using the WP Rocket caching plugin, in which your LazyLoad script is incorporated. So I don't have any control over wether or not Lazyload is applied on certain images. I can think of many scenario's where users would benefit from a solution in which the LazyLoad script performs a simple check on an element to see if it is actually a image and has attributes as expected. Does that make any sense to you as well?. ",
    "AndrewCraswell": "Done, and done! Thanks so much! :). ",
    "RodyRafa": "\ud83e\udd26\u200d\u2642\ufe0f Sorry, I forgot!\n. ",
    "alvarotrigo": "Awesome! \nI'm not quite sure what's inside the dist folder. Is it version 8 or version 10? Should I assume it's 8?\nDidn't see any comment credits or property within the lazyLoad object with its version number.\nUsing npm install it seems I get version 8.5.2, but then the latest release is 10.4.x.\nHow does this work? \nDid you update it in version 8 too? . Yeap! Thanks for that! Working as expected!\nLet me know when it's available in version 8. \nBy the way, how can I install both version with npm to make use of the conditional loading? (without using the CDN :) ). Thanks for that!! ;) . Wouldn't it be a performance improvement to use requestAnimationFrame in version 8 at the moment? \nBrowsers like IE 11 or Safari don't seem to support Intersectionobserver but they do support requestanimationframe. And for older browsers there's a polyfill.\n. Yeap, totally clear now :) Make sense. . ",
    "liborvanek": "Hi verlok,\nthanks for a quick reply!\nMy idea actually came came from performance measurements, but I didn't give it that much time. It's based on a simple assumption, that downloading one image would be significantely faster than downloading two at the same time.\nI'll try to measure more and build proof of case using current callbacks.\n. So I made a quick demo:\nParallel mode\nhttps://5a552a19a6188f73127302a6--mlnjrs.netlify.com\nSerial mode\nhttps://5a5529a84c4b935a77cf0779--mlnjrs.netlify.com\nI ran couple of tests using Performance tab in Chrome with network throttled to \"Fast 3G\".\nAfter averaging the results, it took approximately 3,6 seconds from First Paint to first callback_load that triggers the first animation in Parallel mode. In Serial mode, it took about 2,6 seconds. That looks like reasonable gain to me.\nThe site is depolyed on Netlify with HTTP/2 available.\nSerial mode callback:\nconst lazy1 = new LazyLoad({\n  elements_selector: '.load-first',\n  threshold: 50,\n  callback_enter: (el) => {\n    console.log(Date.now())\n  },\n  callback_load: (el) => {\n    GsapTimeline1.play()\n    const lazy2 = new LazyLoad({\n      elements_selector: '.load-second',\n      threshold: 50,\n      callback_enter: (el) => {\n        console.log(Date.now())\n      },\n      callback_load: (el) => {\n        GsapTimeline2.play()\n      }\n    })\n  }\n})\nAny ideas about this?\n  . ",
    "broguinn": "Unfortunately, modifying the ratio check means that all images are loaded immediately on the initialization of the IntersectionObserver instance -- I'm still trying to figure out how to get it to not activate initially.. This is gross and probably not ideal, but I got it working by adding state to the constructor so that the first time the IntsectionObserver calls onIntersection (when it ends up called for all target entries) it breaks:\nhttps://gist.github.com/broguinn/b77e3d89456894ef7a719ef3bcbb47f1\n  . One more update: to get entries to load their images that are initially visible on page load, I changed the check line to:\nif (entry.intersectionRatio > 0 || _this._initialized) {. Thanks so much!!. ",
    "tfrere": "Ho yeah, nice to hear that,\nyou saved my day :D\nI am not confident enough in javascript to write an elegant solution, that's why i didn't came with a solution in the first place :)\n. ",
    "tjnet": "sorry, I found bugs .  so I ll resubmit.. \ud83d\ude47 . ",
    "marcantons": "Where to download lazyload vers 8.1 to solve problems with safari. ",
    "0dp": "Hi Guys,\nAhh I see, I've added data-src and it seems to work correctly.\nFunny how it still attempts, and partially succeed lazyloading.\n. ",
    "951759534": "oh  i forget to see demo    this is support. oh thanks  I will user version 10 to try it. ",
    "podrivo": "Hmm, but I also need the images to preload and if I set the threshold: 0, images will only be loaded after been inside the viewport.\nMaybe remove threshold from callback_enter, as the documentation says: \nThe distance out of the viewport, expressed in pixel, before which to start loading the images.. I think this is a great idea!\nThis way you'll be able to control what happens when a content jumps in the user viewport and won't mess with the preload.\nThis will also add a great opportunity to create some \"entering\" effects with CSS.. This is such great news, @verlok!\nCan't wait to use it.. Hey @verlok, I'm aware of the minimum height to occupy vertical space, but the problem for me, is that the callbacks are ignoring the threshold.\nI've made this video, to better illustrate my side: https://d2ffutrenqvap3.cloudfront.net/items/072O3N3L1v0y0Z273L1J/threshold.mp4\nSame thing happens in the pen you forked.\n. Hey @verlok , this is not the same issue as https://github.com/verlok/lazyload/issues/176...\nThey're both regarding the use of callbacks and threshold, but they are separate issues.. ",
    "driskell": "@verlok I actually use the callback to lazyload some associated content so would prefer it stays tied to the lazyload behaviour. Any change would impact my usage which I thought was correct.\nMaybe this is best as a new callback? Or a new threshold option specific to callback enter that by default copies the threshold value?. ",
    "zvaehn": "html\n<object type=\"image/svg+xml\" data=\"image.svg\"></object>\ndata has to be set and the value could be provided over the already existing data_src.\nThe type could vary in different use-cases, but this should not be relevant, is it?. I think there is an issue with the svg you are using.\nI forked your pen and it just works fine :)\nThe object-tag is more flexible than the img-tag.\nFor example: I am using a custom font inside the svg\n\nIf you are using the img-tag, the font cannot be loaded.. ",
    "dnjstlr555": "I'm having same problem. . ",
    "parkersweb": "Thanks to this website I've found the solution to this problem. The answer is to re-fire picturefill on the callback_set event:\nvar myLazyLoad =  new LazyLoad({\n    callback_set: function (img) {\n        picturefill({\n            elements: [img]\n        });\n    }\n});\nJust in case it helps anyone else :-). That sounds perfect - so presumably you set data-src and data-srcset and older browsers will just use the src as fallback?\nI'll give it a go - thanks!. Works perfectly - and seems more reliable than firing picturefill - thanks!. @rgfx you can check my solution here: https://trymetail.com - I used <picture> for the top banner, just <img> for the product images. For the picture element you can see the img tag inside uses data-src to provide the IE fallback without a polyfill - more modern browsers use the data-srcset elements instead.. ",
    "rgfx": "@parkersweb @verlok \nI am not sure what you guys mean, are you still using <picture>? I tried change the largest image to just src and the <img> to just src. It makes  sense just to load the largest image in IE, but its not working for me. \nhttps://codepen.io/rgfx/pen/yKXoQo <-working pen, doesn't have src changes. \nLozad has a good way with dealing with IE, add data-iesrc=\"\n. https://github.com/ApoorvSaxena/lozad.js/blob/master/dist/lozad.js. \n<picture> is a really good solution for responsive images. hope it can be used without the polyfill. I think the solution that's mentioned is what am looking for, just do not know how to implement it.\nThanks. @parkersweb. @verlok \nCool site, I see how its done. The opacity on the image was messing things up for me too.\nI noticed a few issues. \ndata-was-processed=true is not being fired in IE, that was my problem.  I wonder if its CodePen or did I initialize something wrong? I noticed it was being fired on your site. What are you doing different?\nAlso if you look at the network in console the <img> is loading and so is the main picturefill image. Is this my setup aswell?\nhttps://codepen.io/rgfx/pen/yKXoQo \nLet me know, thanks. ",
    "Grsmto": "Out of curiosity, why the check is not done in the library code? Is it to save kb?\nThanks. ",
    "spinninghamster": "Nope, I tried both version 8 and 10. Strangely even testing the PhoneGap application in the browser it doesn't work until I resize the browser window just 1 pixel. Then the images load.. ",
    "adrianxadamn": "Confirming that using  still doesn't reveal images inside viewport on Safari. Nevermind. It does work. I had to use lazyload options. I guess it's picky for Safari but Chrome doesn't need it. \nnew LazyLoad({\n      elements_selector: \".lazy\",\n      threshold: 0,\n      callback_enter: function(element){\n          $(element).addClass('loaded');\n      }});. ",
    "sapkra": "I'm trying it at the moment with React. I will finish my implementation next week. If I still have time I can report how I implemented it.. Sorry for my late answer but I had to pause my work because of priority reasons. We continued   to work on it this week.\nI did it but I didn't had the time to post my results. I will set it on my todo list. . I wrote it some time ago. Maybe there is potential for improvements. Please feel free to comment.\n```javascript\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport LazyLoad from 'vanilla-lazyload';\nimport lazyloadConfig from 'config/lazyload';\n// Only initialize it one time for the entire application\nif (!document.lazyLoadInstance) {\n    document.lazyLoadInstance = new LazyLoad(lazyloadConfig);\n}\nexport class Image extends React.Component {\n// Update lazyLoad after first rendering of every image\n    componentDidMount () {\n        document.lazyLoadInstance.update();\n    }\n// Update lazyLoad after rerendering of every image\n    componentDidUpdate () {\n        document.lazyLoadInstance.update();\n    }\n// Just render the image with data-src\n    render () {\n        const {\n            altText,\n            source,\n        } = this.props;\n    return (\n        <img\n            alt={altText}\n            className=\"rd__img\"\n            data-src={source}\n        />\n    );\n}\n\n}\nexport default Image;\n```. ",
    "MicroBenz": "Any updates?. ",
    "xuya227939": "Do you have a document on the use of React?. Thank you very much. \n\nWhen I tried to run the code, I returned an empty object. . Hey\uff0cThe 8.12.0 version is good\uff0cI'm using the local database, so I'm sorry I can't provide the project.. ",
    "luisherranz": "Thanks @verlok!. ",
    "klarstrup": "Good stuff man, keep up the great work!. Cool initiative @verlok! I'm good tho. ",
    "patric-eberle": "For lazysizes there is a plugin which handles this case: https://github.com/aFarkas/lazysizes/tree/gh-pages/plugins/attrchange. Hi @verlok \nThank you for the response. The solution you mention with assigning the value directly to src / srcset would definitely work. We did this on the last project. But I think it's not the best solution, because to be able to check this, we hat do add conditions for the assignment and check if the component was rendered before.\nResetting the data-was-processed sounds a bit cleaner to me.\nAllowing to update() all processed images would be the easiest to use, but probably not the most performant one I guess... Maybe an element could be given to update, and to force a \"re-initialisation\" of this element?. ",
    "addedlovely": "Ah, I had missed the data- from srcset, e.g. data-srcset\n. ",
    "umesh-velir": "I have it working for my case. The request is to keep the vertical spacing intact. I could not use aspect ratio approach and could not have fixed height. So I had to force download images on click event. \nHowever, having some sort of forceDownload method  as jQuery lazyload have within the plugin would be great.\nAwesome plugin thought! Cheers!. ",
    "gyoungbe": "Hi @verlok! What if you're trying to force download all images in a carousel. Lazy load the initial image and then when the user triggers the carousel (using keyboard or a carousel nav button) it loads the rest of the images within the carousel?. ",
    "rmngrc": "In my case I would like to load them all for our visual diff test suite. Would there by any way to do that programmatically @verlok ?. That would be great! Massive thanks!. Thanks @verlok! \ud83d\udc4f \nCan you also publish the new versions to npm? . Pleasee \ud83d\udc4d . ",
    "akbarsaputrait": "\n\nThat's my code.\nBefore : \n\nAfter : \n\nThanks for your answer :)\n. @verlok Thank you so much, for your answer. I glad to know about that! :smile:. ",
    "MrTamagotchi": "Unfortunately there is no way of detecting if an image has been loaded if it's a background-image, and I believe this is why lazyload works in the way it does in cases like this.\nI faced a similar problem and wrote a workaround. My solution involves placing an img as a direct child of the element I want the background-image on, making the img visually hidden and listening for it to enter viewport, then setting the background-image and a --loaded modifier class on the parent.\nThe code is much simpler than the explanation, haha:\nhtml\n<div class=\"lazy-image\">\n    <img class=\"lazy-image__trigger lazyload\" data-src=\"path/to/image\" />\n</div>\njavascript\nconst lazyImages = new LazyLoad({\n    elements_selector: '.lazyload',\n    class_loaded: '--loaded',\n    callback_load: function(el) {\n        const imgArea = el.parentNode\n        const imgSrc = el.getAttribute('data-src')      \n        imgArea.style.backgroundImage = `url('${imgSrc}')`\n        imgArea.classList.add('--loaded')\n    }\n})\nPretty easy to modify this concept to fit your needs. Hope it helps!. Ah! Cool! :)\nHijacking thread to discuss possible implementations of this straight into lazyload:\nCheck if the selected element lacks src/srcset support, then create an img and use that as the trigger. Maybe include some init option to use this method instead of the defaut one. \nAny thoughts @verlok?. ",
    "pooledge": "Hey and thank you for the response! This is a cool workaround I'm aware of, thank you!\nI've switched to LazyLoad from this one: https://github.com/eisbehr-/jquery.lazy\nLooks like Eisbehr figured it out without using an <img> as a middleman.\nWell since shipping is today, I'll have to implement this solution. @verlok please keep us updated on this in case you come there one day! Oh and maybe give us a hint in docs :). Thus, a simple lookalike to jquery-lazyload would be smth like that:\n```js\nfunction createImageFragment(srcUrl) {\n    var imageFragment = document.createElement('img');\n    imageFragment.setAttribute('src', srcUrl);\n    return imageFragment;\n}\nfunction modifyClassUponLoad(element) {\n    element.classList.add('is-lazy-loaded');\n}\nnew LazyLoad({\n    elements_selector: '.is-lazy',\n    callback_load: function(element) {\n        if (element.tagName === 'IMG') {\n            modifyClassUponLoad(element);\n        }\n    },\n    callback_enter: function(element) {\n        if (element.tagName !== 'IMG') {\n            function callback_load(event) {\n                imageFragment.removeEventListener('load', callback_load);\n                modifyClassUponLoad(element);\n            }\n            var imageFragment = createImageFragment(element.getAttribute('data-src'));\n            imageFragment.addEventListener('load', callback_load);\n        }\n    }\n});\n```\nThank you @verlok for your time on this!. For anyone experiencing this just be sure you initialize new LazyLoad({}) by Vue component's mounted() at its earliest:\n...\nimport lazyload from 'lazyload.js';\nconst app = new Vue({\n    el: '#app',\n    data: {},\n    mounted() {\n        lazyload.init();\n    }\n});\nand in lazyload.js:\n```\nimport LazyLoad from 'vanilla-lazyload';\nlet lazyload = {\n    init() {\n        const myLazyLoad = new LazyLoad({\n           ...\n        });\n    }\n};\nexport default lazyload;\n```\nHope it makes sense.. ",
    "doghim": "Hi.\nI've been worried about the same problem.\nAnd I modified the 8.7.1 version myself.\nThis is the modified part of the source.\nFirst, the _reveal function\nif (element.tagName === \"IMG\" || element.tagName === \"IFRAME\" || getData(element, settings.data_src)) {\n    element.addEventListener(\"load\", loadCallback);\n    element.addEventListener(\"error\", errorCallback);\n    addClass(element, settings.class_loading);\n}\nAnd, setSources function\nif (elementSrc) {\n    var image = new Image();\n    image.onload = function() {\n        element.style.backgroundImage = 'url(\"' + image.src + '\")';\n        element.dispatchEvent(new Event('load'));\n    }\n    image.onerror = function() {\n        element.dispatchEvent(new Event('error'));\n    }\n    image.src = elementSrc;\n}\nIt is a modified file.\nvanilla-lazyload-8.7.1.txt. @verlok sure,\nUsing 'background image + new Image ()' I see that there are issues with performance and accessibility.\nBut I think.\nThe background image has the advantage of being easier to create using 'CSS background-size'.\nYou can also include IR (image replacement) text for SEO and accessibility.\n@pooledge I tried that jquery lazy.\nThere are many features. It is very good.\nHowever, the more DOM elements, the worse the performance will be.\nUse it well.\n@MrTamagotchi It's a very good idea.. ",
    "richgcook": "@verlok Thanks for this! I think it would be a great addition. Images are always preferably but in certain circumstances background images definitely need to be used and would be super nice to lazyload them in and apply a loaded class for aesthetic purposes.. Although thinking about it... an img tag with object-fit:cover is probably just as supported where necessary these days (https://caniuse.com/#feat=object-fit) especially since IE11 came out 2013 and now Edge is preferred.. @Danetag Just use img with object-fit. The support is pretty great https://caniuse.com/#feat=object-fit. > Why do you use background images instead of proper imgs for your content images? Isn\u2019t the img best for usability (users can click and save images) and accessibility (screen readers can treat the images like images, and real the alt content instead)?\nAs @verlok said earlier... I think img is always more optimal. @Danetag And because of such it doesn't throw an event so we can't tell if it's loaded.. > But if you load the image using a new Image(), and at the end inject the background-image property... What would be the issue? (I don't know how you actually preload an image)\nWhat image? There is no <img />... it's a background-image.. ",
    "Danetag": "Re-opening this one. Any update on why the loaded class is not added when a background-image has been loaded? Thank you!. @verlok I didn't look into the code to see exactly how an image gets loaded, but how do you handle the background-image loading exactly? I seems weird that no events would be triggered after an image is loaded...?\n@richgcook  Regarding the object-fit property, it's a working solution but it looks more like a workaround, it is not the optimal one in terms of semantic. I would like to avoid using an<img> tag when it's not supposed to be one.\nThank you again guys for your amazing work! :). That's exactly for this reason the background-image property exists. A background-image excludes the image from the rest of the DOM -- Don't get me wrong, I'm pro accessibility. \nBy design, a background-image is used because the image doesn't represent anything semantically, the image would generate noise in the DOM and for the screen readers. \nFrom https://stackoverflow.com/questions/25773047/what-will-be-indexed-better-in-search-engines-img-tags-or-background-images-wit\n```\nWhen to use CSS background-image\n\nImages Purely Used to Design.\nNo Relation With Content.\nSmall Images which we can play with CSS3.\nRepeating Images ( In blog author icon , date icon will be repeated for each article etc.,).\n``. But if you load the image using anew Image()`, and at the end inject the background-image property... What would be the issue? (I don't know how you actually preload an image). @verlok The promise of lazy loading is to preload an image visible in the user's viewport, whatever it's a background-image or an image... No? A background-image, even not meaningful, has still a file size to consider and could be worth preloading.\nIt seems to be more like a dev philosophy (listening only to events of the original DOM elements), which I could totally understand!\n\nThank you for your note and comment (it basically preloads an image using an new Image() instance by leveraging the Intersection Observer callbacks... Which is why I was asking why not having this approach baked in for the background-image.  If you're open to it, I could work on a PR to propose a solution :) )\nThank you for you awesome work \ud83d\udcaf . Thank you for taking the time to reply! \ud83d\udc4d . ",
    "axlright": "@verlok Thanks - totally understood. Your suggested / included script for conditionally loading works perfectly. \nMy next step is to figure out a way to include both in the website's single app.js and load the correct parts based on whether IntersectionObserver exists.\nI'll close this issue - thanks!. @verlok You're right and I appreciate the advice. Conditional load is way smarter than conditional execute. Sometimes I think of things then catch myself halfway through doing them and realize - \"this is not the right approach\"\nFor some reason, I have a tendency to favor locally hosted scripts as opposed to external ones loaded via CDN. I can still easily load them locally using the conditional load script you have adapted just to locally hosting the two scripts in two directories named after the version numbers as you have set up through Cloudflare. Thanks again for your input.\n@MEmanuelsson - that sounds pretty interesting. Am interested in hearing more about how it work out.. @verlok Sure thing but if my server fails, then the website has failed and no one is seeing anything anyways \ud83d\udc4e\nIt's a point of personal preference. If we place the scripts on our host along with our css, js, fonts, images, video files and the like, then I know where they are and it's not up to someone else's service. \nBut I hear your point.\nThanks for such a great project. Initial page load went from 47 resources and 1.1MB (already pretty low) to 16 resources and 0.3MB - pretty awesome! Using this in conjunction with Critical CSS and finely tuned responsive images to get page load way down.. Thanks! We have a CDN. It's just ours. Using someone else's CDN address for files means that we're reliant on them keeping the code there and not changing anything including version numbers or url structure. If we keep it all in house, we can rely on our CDN and know where the files are. Same thing for fonts, etc.. ",
    "MEmanuelsson": "Just thought I'd add a question somewhat related to this issue. We've decided to go for version 10.5.2 in combination with the polyfill available for IntersectionObserver (in our case loaded from https://cdn.polyfill.io/v2/polyfill.min.js?features=IntersectionObserver) instead of the conditional load of 8.7.1, is this maybe a bad idea for some reason? Works fine as far as we've seen (except for the additional polyfill load for browsers that don't know of IntersectionObserver). Any input would be helpful.. @axlright For us this has worked out just fine, as far as we know at least :-) We still have about 10-12% customers (and employees) using IE11 and lazyloading works just as good there as in Chrome and Firefox for instance.  . @axlright  Just found this issue (https://github.com/verlok/lazyload/issues/185) where @verlok mentions this as a potential solution for browsers not supporting IntersectionObserver with the comment \"not sure if this works\". As far as I know this works just fine but please give it a try you to and let us know how it works out. . ",
    "massic80": "Hi, thanks for the answer!\nOn the site I'm working on there is a tool containing a stack of images in the same position, and I can choose to switch from (e.g.) the first to the fourth, hence all of them must be loaded at once. In order to lower the rendering effort of the page, the hidden images have display:none.\nAnother example may be a full-width slideshow where the previous and next image should be preloaded, in order to have a seamless transition. Since the right and left images are out of the viewport (I'm ignoring the threshold parameter) they won't be loaded if not forced.\nThere are workarounds for these cases, but there are others where bypassing visibility test may be needed.. Sorry @verlok , I just noticed that skip_invisible is just for \"display:none\" objects. The viewports limits are considered three lines later, so my second use cases don't apply.\nI'd add a force_load parameter which sets isBot to true.. Eh, ma cos\u00ec facendo, per non forzare un true, mi fai riprodurre a mano una funzionalit\u00e0 che hai gi\u00e0  ;). I don't get the point: shouldn't the browser choose the type of the source element, regardless to the script being used? https://developer.mozilla.org/en-US/docs/Web/HTML/Element/picture#The_media_attribute. I agree... but I chose your script for my projects (IntersectionObserver apart ;)) cause it's pure, modern and as-close-to-pure-html-as-possible, and this forcing would make it less pure :)\nPhilosophy apart, I think that nowadays  just a few sites (or single cases within the sites) have the possibility to ignore the picture element.... Thanks!\nI just found the trouble in my project, and the latest working release was the 8.12.\nLooking forward for the 8.15 ;). ",
    "flo-rider": "@verlok: yes it was my bad :-), I missed the \"data-srcset\" option for the picture element. ",
    "weavermedia": "Yep, I set the container in options. It's working when I scroll the container, just not when it first loads.\nHTML:\n```\n\n\n\nCSS:\n.uploadcare--tab_name_robots {\n  overflow: scroll;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n}\nJS:\nUPLOADCARE_PUBLIC_KEY = \"demopublickey\";\nUPLOADCARE_TABS = 'robots';\nvar robo_url, img_tag;\nfunction robots(container, button, dialogApi, settings) {\n  button[0].title = \"Robots\";\n  var count = 500;\n  while (count--) {\n    robo_url = https://robohash.org/${count}.png;\n    img_tag = <img width=200 height=200 data-src='${robo_url}'>;\n    container.append(img_tag);\n  };\nvar myLazyLoad = new LazyLoad({\n    container: container[0]\n  });\n  console.log(myLazyLoad); // shows the correct container and elements\n  // myLazyLoad.update(); // tried this but seems to have no effect\n}\nuploadcare.registerTab('robots', robots);\n```. https://codepen.io/weavermedia/pen/eraYGK \ud83d\udc4d . Fantastic! Thanks for the updated pen. Working great now \ud83c\udf89 . ",
    "givsta": "So if I scroll all the way down on the page and refresh this works perfectly when scrolling up it works the way it should, however not working from the top and scrolling down . Hi @verlok \nThank you for your response.\nI managed to get this working, it seemed to be an issue with Handlebars and its #each statement in the HTML.\nQuick question while I'm here, is there support for video by any chance?. Awesome, thank you! \ud83d\ude00 . This is brilliant! Appreciate this @verlok . ",
    "jgarite": "I understand the benefits of progressive jpeg, but it's not always possible to re-compile images as different types. For example, a site may have thousands of images and no way to change their format in an automated fashion. I've used the background style to place an image on the img container but will try using the srctag and see how that compares. That may be exactly what I need, thanks for pointing that out.. @verlok Using the src attribute works, but I lose the ability to have the images fade in. It would be nice to have that. Thanks again for the help.. Thanks @verlok . What I ended up doing was apply fade to .lazyload.loaded. it's not as perfect as i'd like because the moment the image is loaded, the blurred image is removed so the image fades from white (background color) to opacity:1 which makes it more obvious that something is happening. It'll do for now, but it would be great if in the future there was a way to keep the blur up image, fade in the fullsize image and fadeout the blurred image. this would make it less obvious to the user that something is happening. or, maybe its better that the user see something so they know its not blurry anymore...not sure. either way, thank you for your help, the src attribute was the solution for me.. @verlok Excellent point about the images in the viewport on load, I hadn't considered that. When I get a chance, I'll put my code in a pen and share it with you.. @nishanttotla I didn't and this fell off my radar. I'll try to share it today or tomorrow.. ",
    "chelssi": "@verlok one question please,\nWhen you say not to put any value in the src nor srcset attributes for better perceived performance, what do you mean? include src=\"\" or not include src?\nThank you,\nCarlos . ",
    "nishanttotla": "@jgarite did you ever get a chance to share your code? I'd love to understand your solution also.. @jgarite thanks! I went ahead and set the src attribute to put in a stock blurry image as background for every image. This in itself improves the experience a lot. Thanks a lot to @verlok for writing this library and making it so easy!. ",
    "imarks-saisudhakar": "Got it,Thank you for your Quick response.. ",
    "gerdneuman": "@verlok thanks for answereing :) \nI totally agree with you that for perceived performance, which is important, images should be shown asap.\n\nThe reason I\u2019m not advising to use a transparent pixel as a placeholder in the readme is that, if you do that, the browser only shows the lazily loaded image to the users when they are COMPLETELY loaded\n\nHow is this is the case? I thought that LazyLoad would replace the src (being the transparent gif) with the real src (within the threshold). And then the browser would do all the rest, that is, start fetching the jpeg. Hence, I thought that progressive jpeg would be shown as soon as the browser starts fetching and not when loading has finished.\nWhat you say sounds like: browser fetches image and only then (after fetch is completed) the src is replaced by LazyLoad.\nSo I am confused :)\nOther than that, might it be a solution using something like to show the real image immediatly as soon as loading begins:\n```\n/ transparent gif placeholder /\nimg[data-lazy-src] {\n  opacity: 0;\n}\n/ real image /\nimg.lazyloading,\nimg.lazyloaded {\n  opacity: 1;\n}\n```\n. Hey @verlok \nstill confused on how it works, but maybe you could then add a recommendation to https://github.com/verlok/lazyload#show-the-images-while-they-load that transparent placeholder GIFs should not be used. Well, that LazyLoad does not recommend this because of xyz.\nMaybe I am looking at it from the wrong side because rocket-lazyload (based on your LazyLoad) recommends using a placeholder GIF. And so does the other lazyloading js library.\nIf there was a guidline for this by LazyLoad then at least rocket-lazyload (which I use in the end) could be updated. Right now I feel like optimizing something (using placeholder gif) which might (still not understanding) have the inverse effect :). @verlok  Much clearer now, thanks so much :)\nI added #214. Hope what I wrote in there is correct. These were my concern and I think that I was wrong and it would be helpful to other users as well.. Thanks so much on clarifying this. Today I learnt something :) FWIW, as a Firefox user I tested using the Firefox network throttle feature and for slower connection speeds like \"Regular 2G\" the perceived performance is way better without a placeholder.  :). Uh, sorry, just noticed that Fetch as Google also shows the un-lazy-loaded source: https://www.google.com/webmasters/tools/googlebot-fetch \nCould should you maybe shed some light on how the SEO-friendliness of LazyLoad works? Could not find much about it in the README.. @verlok Thanks \u2764\ufe0f \nOne question though: The test is /glebot/.test(navigator.userAgent) as far as I see in \nhttps://github.com/verlok/lazyload/blob/010dbf7248f77f0388ee4f0a664c55696861a36e/src/lazyload.environment.js#L2\nHowever, this will only match Google Bot, but not other bots like the Bing Bot (hence the title of this bug): See https://www.bing.com/webmaster/help/which-crawlers-does-bing-use-8c184ec0 for the bingbot user agents.\nAs said Bing has by far not the same market share like Google, but still a few million users. Also in other regions other search engines are also popular (e.g. Yandex in Russia).\nPS https://www.keycdn.com/blog/web-crawlers/ has a pretty good guide on the most common bots (Yandex, Yahoo, DuckDuckGo), all these sites also have documentation on their crawlers user agent.\nWould be nice if these could be added so it works for all of them and not only Googlebot.. ",
    "dijkermans": "Hi,\nIn mean \"below the fold\". So when I visit the page I see images, but when I'm scrolling I don't see the \"new\" images. It's a blank gap.\nRegards.. ",
    "Moon-Lover": "Thanks for the answer verlok!. ",
    "tmsf": "\ud83d\udc4d . ",
    "jdconley": "Thanks! Using the git url pointing to a release tag in my package.json just feels wrong. \ud83d\udc4d . ",
    "giventofly": "i understood that later, i keep the impression that it would parse all the data-src, and change accordingly to the element wrapper.\nBut you are right, using the class is the better option. thanks for the feedback.. ",
    "bessey": "Strange, I really did observe a difference in behaviour, thank you for\nattempting to reproduce and sorry to have wasted your time. It was far from\na minimal production, so I'm guessing I just have another issue going on,\nthat intersection observers handle better.\nI'm ok with just supporting newer browsers so happy for this to be closed.\nIf the powers that be asked for further back support, I'll reinvestigate\nOn Wed, 25 Jul 2018, 22:04 Andrea Verlicchi, notifications@github.com\nwrote:\n\nClosed #220 https://github.com/verlok/lazyload/issues/220.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/verlok/lazyload/issues/220#event-1753610222, or mute\nthe thread\nhttps://github.com/notifications/unsubscribe-auth/AArOaJbLr6iBLDnzgv0ReJIzwqSUDDTnks5uKN1pgaJpZM4VUdBP\n.\n. \n",
    "elliottmangham": "Hi @verlok, thanks for your speedy response.\nI am using a combination of img and elements with background images. Image elements are purely content, whereas background images are reserved for theme related images that are customisable in the CMS.\nI am, however, exploring the use of object-fit now that it is wider supported - so this may change!\nI'll read #199 now.\nThanks again. Keep up the great work!. Update: I misunderstood your question!\n\nTry something like\n<picture>\n      <source class=\"lazy\" data-srcset=\"WEBM-URL\" type=\"image/webp\" alt=\"DESCRIPTION\" />\n      <img class=\"lazy\" data-src=\"JPEG-URL\" alt=\"DESCRIPTION\" />\n</picture>. Hi @verlok, thank you. I have shared a demo link with you via email.\nI will go through my site and remove the lazy class from source tags as you recommend.. @verlok I've found it is related to data-srcset.\nStill investigating but I noticed my CMS was outputting the same values for srcset 1x and 2x, which might be tripping lazyload up.\n<img\nclass=\"lazy-img\"\ndata-src=\"...\"\ndata-srcset=\"... 1x, ... 2x\"\nalt=\"\">. Hi @verlok,\nThank you so much for spotting! It seems the CMS wasn't generating x2 images as it was expected to.\nI appreciate your time and support.. ",
    "Pionell": "I was trying to replicate the issue yesterday on a simple html template, I think it's an issue with the pagespeed apache module because the html template seemed to work fine on firefox. . I started using the slider lazylaod option when I saw this being an issue, but there are 10+ sliders in one site, and each is loaded as different elements which are optimised differently and need remaking.. I hoped there is another way of solving this. Thanks anyway. \ud83d\udc4d . I do use the version-autoload function, And the newest opera browser(which uses v8), so it should be verion 10.x but the issues seems to still be there.. I will deffenetily have fun! \ud83d\ude06 \nI love opera because of it's messanger, snapshot, live currency translation, In-built VPN and a few other features. It's really great, and you can use chrome plugins in it (for the most part). What I miss though is the chrome's in-built translation tool... ",
    "berkovich-pavel": "Hello! I have the same problem. The script does not work on iPhone, but on the desktop version everything works good. \n<script>\n    (function () {\n        var ll = new LazyLoad({\n            load_delay: 300\n        });\n    }());\n</script>\nand i'm using preloaders\n<img class=\"lazy responsive-img\" src=\"/data/img/loading.svg\" data-src=\"/data/img/img.jpg\">. And the same problem in demos eg delay.html. When I open the delay.html on the iPhone - all images are loaded immediately without delay.... 10.17.0. Thank a lot! It's my fault - I did't carefully study the instruction). ",
    "ankurdhamija83": "Thanks a lot Andrea!!\nLazyload.js is one of the best lazy loading JS library I have used.. ",
    "jakubkaderavek": "@verlok I think, that there is a next solution with srcset - first source as webp (if is supported) a second in jpg - srcset=\"small_600.webp 600w, small_600.jpg 600w,  medium_1024.webp 1024w,  medium_1024.jpg 1024w\" what do you thing?. @verlok maybe, but what in case if some images not have webp format - only jpg. I think we can use attr data-format=\"webp\" or something like this, what do you thing?. @verlok thanks a lot, i thing, that this is great solution :-). Hi @verlok,\nthank for the fast reply!\nAfter detail checking our code I found a bug in another place - there are two similar pages:\nhttps://wpjakub.cz/lazyload.html\nhttps://wpjakub.cz/lazyload-opacity.html\nIts white space 1500 px height with slider bottom (only CSS without any JS). \nWhen I load first, then is everything ok.\nSecond load some hidden images after page load with no scrolling.\nlazyload-opacity version have only this CSS moreover:\n.lazyload {\n  opacity: 0;\n}\n.lazyload.loaded {\n  opacity: 1;\n}\nThank you for your help. @verlok \nthere is blank div before slider - I prepare you two videos explain where the problem is:\nhttps://www.wpjakub.cz/lazyload.mov\nhttps://www.wpjakub.cz/lazyload-opacity.mov\nIn the second you see, that images are loaded right after reloading page - as I said, the only difference is in CSS with opacity which is very strange. In first video is everything ok. @verlok I found, that this bug is only in Chrome so i report it. In Firefox and Safari is everything ok.. Hi @verlok , I test it in new Chrome and everything looks ok. ",
    "FlaviuRadulescu": "I have the same problem, and unfortunately slick lazy load doesn't support srcset. So I need to make lazyload work with slick. Is anyone here who could help us?. I have been able to make it to work. You can see a working version here https://lumminary.com     \njs\n $('.slide-element').on('beforeChange', function(event, slick, currentSlide, nextSlide){\n            LazyLoad.update();\n        });. ",
    "ValentinCreative": "Hi, I don't know Slick but I assume you can reload your LazyLoad instance on your slick change. \nSomething like this perhaps ? \n```javascript\nconst lazyLoad = new LazyLoad({\n    elements_selector: 'img.lazy'\n})\n$('.slider').on('afterChange', e => {\n  lazyLoad.update()\n});\n```. ",
    "ahmadalfy": "@ValentinCreative what you are proposing doesn't work sadly. The callback is fired yet the images arer still not updated. ",
    "fakership": "when i take it back to 8.7.0, it will work!. I include LazyLoad by (npm install):\njs\nimport LazyLoad from 'vanilla-lazyload';\nThis is the usage:\njs\nnew LazyLoad({})\nThe lazyload.min.js will report a error;. yes, I bundle LazyLoad by webpack4.. ",
    "l3aconator": "I am getting this on the latest version too, works when the code isn't run through minifier. ",
    "pietrogregorini": "Yasss, now it works perfectly.\nI had to mix it with DOM Ready function, since I was using the Async method, but it works like a charm now.\nGrazie Andrea! <3\n```js\nvar domReady = function(fn) {\n    if (typeof fn !== 'function') return;\n    if (document.readyState === 'complete') { return fn(); }\n    document.addEventListener('DOMContentLoaded', fn, false);\n};\n(function(w, d){\n    var b = d.getElementsByTagName('body')[0];\n    var s = d.createElement(\"script\"); s.async = true;\n    var v = !(\"IntersectionObserver\" in w) ? \"8.13.0\" : \"10.14.0\";\n    s.src = \"https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/\" + v + \"/lazyload.min.js\";\n    b.appendChild(s);\n}(window, document));\ndomReady(function(){\n    var wrapper = document.getElementById(\"wrapper\");\n    new LazyLoad({\n        container: wrapper, \n        elements_selector: \".lazy\"\n    });\n});\n```. ",
    "econavi": "I understand now.\nI needed to set the width and height.\nExcuse me! . ",
    "mntilbury": "Should add - I'm using inside of a container around 300px tall - so there's a lot of images being scrolled past which don't need lazy loading yet :). Yes - that does look like the same request - a +1 from me on this when you have time, then :) Perhaps doing something like setTimeout on the images which come into view, and at the end of the timeout checking if still in view before updating the src to the value of data-src?\nMark\n. @verlok Brilliant - thanks for finding the time to implement this feature. I think as long as there is a graceful degrade to 8.x (which I think I read about on the readme.md), 10.x only should be OK - most of the users of this are going to be in Chrome on Mac, so will be able to use 10.x :). ",
    "lewishowles": "Hi, thanks for the suggestion.\nWebsite 1 is actually showing 10.11, while website 2 (the one with the constructor error) is 10.15 in its package.json, so that's odd.\nI wiped my node_modules on website 1, reinstalled and LazyLoad is now showing 10.15.0 in its package.json, but it's now saying LazyLoad is not a constructor.\nIs require('vanilla-lazyload').default how I should address it now?. It does work by using require('module').default on one project - I don't know why though, I just inspected what was returned when using require and noticed that the .default function of the object was the same as the main LazyLoad function!\nI use Laravel Mix which uses webpack by default (I think), so your ES6 module syntax example also works.\nI notice that another of my projects doesn't work with .default - but both are definitely using the same version. So I'm not really sure what's going on.\nAt least they're both working now, just with slightly different syntax!\nThanks for the great plugin by the way.. ",
    "ariona": "How can i missed that \ud83d\ude06, thanks for the head up,\nWhat about the background-image, should i get loaded class or not?\nhtml\n<div class=\"slogan__bg mm-lazyload-bg\" data-src=\"http://unsplash.it/300\"></div> <!-- .slogan__bg -->\njs\nvar lazyloadBg = new LazyLoad({\n    elements_selector: \".mm-lazyload-bg\",\n})\nAnd here is the result, i only get initial class and sometimes not getting any class update. But the -data-was-processed=\"true\" is there.\nhtml\n<div class=\"slogan__bg mm-lazyload-bg initial\" data-src=\"http://unsplash.it/300\" data-was-processed=\"true\" style=\"background-image: url(&quot;http://unsplash.it/300&quot;);\"></div>. ",
    "orballo": "Hey! Thanks for the quickly response! \ud83d\ude04 \nYeah, what I thought with the solution was that the string should pass as it is and the user be responsible for the correct value in it (after this one being specified in the docs). So in case it was a number or a string that could be parsed to a number (that's why isNaN works here), it would use the number and append the px after it, as it was doing before, and in case the user wanted to specify the string as it's allowed in IntersectionObserver it should be defined in a proper way or just let it throw an error. I didn't think the library should be responsible for validating that string, that's why I didn't worry about isNaN returning false for an empty string.\nI find your solution perfectly valid, but I think you are extending the library API needlessly, and adding a new concept rootMargin that the users don't know. They even can find confusing the difference between threshold and rootMargin as they are used for the same purpose.\nMaybe another solution could be to validate the string and throw a custom error from lazyload specifying that the string passed to threshold is invalid. This would avoid:\n- User getting an error from IntersectionObserver related to rootMargin (a setting that users might not know what it is).\n- Extending the library with two settings threshold and rootMarginwith a common purpose.\nI hope you find this helpful!\nThanks again for all the work you put in this library! \ud83d\ude04 . Hi @verlok!\nYes, it makes sense to avoid another validation, and yes, I think the new name and docs are less confusing than the previous one \ud83d\ude04 \nThank you very much!. ",
    "Somethingideally": "8.15 version is well in production and dev mode. lazyload.es2015.js:238 Uncaught TypeError: Assignment to constant variable.\n    at B (lazyload.es2015.js:238)\n    at H (lazyload.es2015.js:307)\n    at q (lazyload.es2015.js:275)\n    at W._manageIntersection (lazyload.es2015.js:339)\n    at Array.forEach ()\n    at W._onIntersection (lazyload.es2015.js:351)\nthere are logs of error. With unminified code \u2014 all is ok.\nBut when i run it with webpack it not working =(. And its only in 10. versions, in 8. all is fine. ",
    "wuxiuran": "Hello, I have the same problem.The environment is normal, but the production environment will throw errors.\n\n. ",
    "grund3g": "I have the same error with the production build (v. 10.19.0):\n\n\n. ",
    "nowyTR": "Same problem here:\n-  vanilla-lazyload@10.19.0\n- \"webpack\": \"3.10.0\",\n- \"babel-loader\": \"8.0.0-beta.0\",\n- \"@babel/core\": \"7.0.0-beta.34\"\nugflifyjs config:\nnew UglifyJsPlugin({\n      parallel: 4,\n      sourceMap: true,\n      uglifyOptions: {\n        ie8: false,\n        safari10: true,\n        compress: {\n          drop_console: false\n        }\n      }\n    }),. ",
    "doup": "Your guess was correct. Here is the related UglifyJS issue: https://github.com/mishoo/UglifyJS2/issues/2842 (it's an ongoing issue). There is a workaround, you just need to disable inlining in UglifyJS.\nSo, in webpack we need to provide the UglifyJS options to the plugin via uglifyOptions like this: new UglifyJsPlugin({ uglifyOptions: { compress: { inline: false } } }). This fixes the issue in our case.. ",
    "cympak01": "Adding those lines resolved my issue:\nmix.options({\n    uglify: {\n        uglifyOptions: {\n            compress: { inline: false }\n        }\n    }\n});. ",
    "vigoren": "On our site we have large feature images. Sometimes the designers that create these features will use multiple images to stitch together a background that looks the same, or similar, across different screen sizes (mobile to desktop).\nIdeally each image could be loaded lazily so that the pages content is loaded without waiting for these images to finish loading.\nAgain this isn't something critical in my opinion just more me wondering if it was supported at all.\nThanks. That sounds like a good solution to me. I share your dislike with putting CSS in the attribute but like you said could be solved with a custom attribute.  Though that does take away the like of using a pre existing option. \nI think to start using data-srcset would be great. Then can always look at transitioning to a different attribute later. \nThanks again. Sounds good, I have something put together just need to test it a bit more then I will make the pull request.. I can change it to be like that. \nMy only concern/thought was with multiple background images you then loose the ability to use the toWebpFlag (since we are not parsing the individual URL's) which may cause some confusion.\nI may have misunderstood this but I thought data-src was being deprecated for background URL's in general and they should be set using the new data-bg field. If not and both are present which one should take priority?. Sounds good to me.\nAdded support to change the background images to webp should the toWebpFlag be set.. ",
    "ligne13": "Hey guys,  \nI'm also interested in this new feature !\nHope you will find something soon.\nGood work !. ",
    "salespageshark": "Looking forward for this feature also! LazyLoad is great! :)\nAlso would be great if it would support responsive bg images. I use different bg images for sm, md, lg and 1440px screen widths within a bootstrap framework. I don't know how it could be developed but could be a nice feature \ud83d\udc4d . I don't think it's an issue of these position relative/absolute combined together. Opacity 0 can be due using of AOS that makes the image invisible at first before initializing the animation on scroll.\nMaybe this image example would be easier, it just uses position absolute\nhttp://prntscr.com/l6mljm\nscreen width 559px not showing up\nhttp://prntscr.com/l6mm9d\n660px screen width showing up\nI use this code to initialize LazyLoad:\njs\n(function(w, d){\n  var b = d.getElementsByTagName('body')[0];\n  var s = d.createElement(\"script\");\n  var v = !(\"IntersectionObserver\" in w) ? \"8.17.0\" : \"10.19.0\";\n  s.async = true; // This includes the script as async. See the \"recipes\" section for more information about async loading of LazyLoad.\n  s.src = \"https://cdnjs.cloudflare.com/ajax/libs/vanilla-lazyload/\" + v + \"/lazyload.min.js\";\n  w.lazyLoadOptions = {\n    elements_selector: \"img, iframe\",\n    threshold: \"400\"\n  };\n  b.appendChild(s);\n}(window, document));\nThe problem still persists when I add skip_invisible: false. ",
    "VineetKumarKushwaha": "I am using swiper js with lazy loading and loop.\nLast clonned slide does not change its data-src to src even when it is in view. Can you please suggest . ",
    "zhilianghuang": "I have solved it. reactjs render data list , Use the key to use the duplicate question. \nSolution\uff1a\nI take the loop key and get the data back to the primary key. \nThanks. ",
    "weslley-campos": "Hi, I'm sorry for not having passed the problem correctly, but I changed by putting it by data-src and data-srcset and this problem occurred. in case this code I showed you does not happen, but if you replace it loads all.. \n\nusing lazy in all elements happens this, all the images were downloaded, but there was no scrolling on the screen, I tried to simulate it on the code pen, however, I got it because I do not have this monitoring to see if the images were downloaded, but take a look at the scroll bar, you will get that it is too small, indicating that all the images have been downloaded.\nhttps://codepen.io/weslley-campos/pen/rZgYJQ\nhowever it is working on the site I am working on, I was only bothered by this behavior. Thanks for listening.\n. Thanks!. ",
    "brunoscopelliti": "Thanks @verlok to have thought at me too, but it's unlikely that I can make it.. ",
    "bodanus7": "Thank you for your reply.\nIt is happening when there is a lack of alt attribute or alt attribute is empty. \nWhen I'm adding &nbsp; into alt (alt=\"&nbsp;\") all work out.\nAlt attribute is required but  not everyone knows about it.. Thanks @verlok \nThis is happening  on Chrome and FF too. . Hm.. it's weird... have a look at the attached screenshot:\n\nThere are three big pictures and all of them are loading at once.. ",
    "markusweb": "good to hear. i will have a look on it too.\none question for understanding: when i call loadAll() will it return immediatly and then load the images in background? this would explain the behaviour. my webserver will log the loading of the images but maybe the browser has not yet changed all the images-tags?. ok,\ni have did a simple test:\nwindow.onbeforeprint = function () {\n    console.log(1);\n    ll.loadAll();\n    console.log(2);\n};\nthis will be the result, so a few images are loaded, loadAll returns before all the images are loaded:\ni used the load_all.html from demo-dir\n1 load_all.html:278:5\n1538126427901 SET ../img/44738719VN_15_a.jpg load_all.html:261:5\n1538126427902 SET ../img/44739938WK_15_a.jpg load_all.html:261:5\n1538126427902 SET ../img/44736534FQ_15_a.jpg load_all.html:261:5\n1538126427904 SET ../img/44735388UI_15_a.jpg load_all.html:261:5\n1538126427905 SET ../img/44739165EV_15_a.jpg load_all.html:261:5\n1538126427906 SET ../img/44739454HF_15_a.jpg load_all.html:261:5\n1538126427906 SET ../img/44719480KM_15_a.jpg load_all.html:261:5\n1538126427907 SET ../img/44719687TD_15_a.jpg load_all.html:261:5\n1538126427908 SET ../img/44721899NG_15_a.jpg load_all.html:261:5\n1538126427909 SET ../img/44721744SL_15_a.jpg load_all.html:261:5\n1538126427910 SET ../img/44716730KR_15_a.jpg load_all.html:261:5\n1538126427910 SET ../img/44718734XL_15_a.jpg load_all.html:261:5\n1538126427912 SET ../img/44721796UK_15_a.jpg load_all.html:261:5\n1538126427912 SET ../img/44717679MJ_15_a.jpg load_all.html:261:5\n1538126427914 SET ../img/44724594VU_15_a.jpg load_all.html:261:5\n1538126427914 SET ../img/44726148AQ_15_a.jpg load_all.html:261:5\n1538126427915 SET ../img/44719629NT_15_a.jpg load_all.html:261:5\n1538126427916 SET ../img/44725329KQ_15_a.jpg load_all.html:261:5\n1538126427916 SET ../img/44724026QS_15_a.jpg load_all.html:261:5\n1538126427917 SET ../img/44720256GW_15_a.jpg load_all.html:261:5\n1538126427918 SET ../img/44722062ID_15_a.jpg load_all.html:261:5\n1538126427919 SET ../img/44722402RH_15_a.jpg load_all.html:261:5\n1538126427920 SET ../img/44726296VU_15_a.jpg load_all.html:261:5\n1538126427921 SET ../img/44725755CT_15_a.jpg load_all.html:261:5\n1538126427921 SET ../img/44725348NV_15_a.jpg load_all.html:261:5\n1538126427923 SET ../img/44721879XX_15_a.jpg load_all.html:261:5\n1538126427923 SET ../img/44729472IQ_15_a.jpg load_all.html:261:5\n1538126427924 SET ../img/44725388JV_15_a.jpg load_all.html:261:5\n1538126427925 SET ../img/44721854CE_15_a.jpg load_all.html:261:5\n1538126427926 SET ../img/44727690JP_15_a.jpg load_all.html:261:5\n1538126427927 SET ../img/44727501HH_15_a.jpg load_all.html:261:5\n1538126427927 SET ../img/44727038AQ_15_a.jpg load_all.html:261:5\n1538126427928 SET ../img/44704882BQ_15_a.jpg load_all.html:261:5\n1538126427929 SET ../img/44734002VC_15_a.jpg load_all.html:261:5\n2 load_all.html:280:5\n1538126427944 LOADED ../img/44738719VN_15_a.jpg load_all.html:261:5\n1538126427946 LOADED ../img/44739938WK_15_a.jpg load_all.html:261:5\n1538126427946 LOADED ../img/44736534FQ_15_a.jpg load_all.html:261:5\n1538126427946 LOADED ../img/44735388UI_15_a.jpg load_all.html:261:5\n1538126427947 LOADED ../img/44739165EV_15_a.jpg load_all.html:261:5\n1538126427947 LOADED ../img/44739454HF_15_a.jpg load_all.html:261:5\n1538126427947 LOADED ../img/44719480KM_15_a.jpg\n. would it be possible to have an option for loadAll to disable the asynchronous call? so that it waits until all the images are loaded, somehing like loadAll(deferr), maybe that's easier that the notification?\nin my case i had to somehow trigger the notification, but i just want to leave the onbeforeprint Events when everything is done.... hi,\nyes, having a dedicated print button will make things much easier. with the print button it will work in firefox. \nWithout the print button and just using the browsers print function it will not work.\n\nfirefox will not work\nchrome will work\nsafari will load all images on page display, as the branch 10.x will not work with safari. when doing print it will hang saying \"preparing print...\" \n\nI just googled a bit. the print subject is a problem to all of the lazyload scripts out there... \nseems no one is printing any webpage (ok, it will not always be useful to print a long page but....)\n. yesterday we have decided that the layzload function for screen and browsing is more important and helpful than the print function. so we will life with the print problem (although it would be cool if there is a solution)\nmarkus. OK, i just googled a bit and found: https://stackoverflow.com/questions/43707762/how-to-lazy-load-images-and-make-them-available-for-print#4376846 so it seems that image loading is asynchron and you cannot wait or stall the printing of the browser. the print will also \"come up\" before the page is finished. so i think lazyloading and printing is something which will not work. so we have to live with a flaw that not all images are shown while printing. maybe we can tweak it with some CSS and show some nicer placeholder...\nMarkus. ",
    "wezzou1": "I'm also tried to install vanilla-lazyload@8.15.2 then I got\nERROR in app.bundle.js from UglifyJs\nUnexpected token: punc ()) [../node_modules/vanilla-lazyload/dist/lazyload.es2015.js:1,0][app.bundle.js:105,26]. @verlok Gonna test now, will return!. @verlok Yes, it's working! I changed import Lazyload from 'vanilla-lazyload' to import LazyLoad from 'vanilla-lazyload/dist/lazyload' Thanks again for an awesome plugin!. ",
    "rbrlortie": "data-bg=\"/images/my image.jpg\" fails\ndata-bg=\"/images/my-image.jpg\" works. ",
    "ChrisButterworth": "it's one I built myself hoping to utilise LazyLoad to handle loading images when the slide changes.. The slider doesn't use transform, its a simple fade effect using update to show the image after the slide has changed; it's that function that is causing erratic behaviour (i can understand it hasn't been designed to be used with sliders but surely it could)\nYes it uses v8.16.0\nNot trying to be annoying but that last statement is like saying \"why use a scalpel when you can use a meat cleaver\" not using jQuery elsewhere on the website so loading a huge library and slider for something I can do myself and can concentrate on performance with it too.. ",
    "MartyD23": "Thanks guys, i'm testing out that plugin and so far so good!. ",
    "nick2017": "some screenshots\nhttps://screenpresso.com/=K1Lcf  -> lazy loaded class added\nhttps://screenpresso.com/=2ciKe  -> lazy loading class during the loading was not added\n. ",
    "arjenblokzijl": "I can confirm the hard coding of 8.7.1 works for me as wel.. ",
    "MAHolzbach": "After NPM install (it was in the package.json as \"vanilla-lazyload\": \"^8.7.1\",) I am importing it into our Webpack entry point file as import myLazyLoad from \"vanilla-lazyload\";, then instantiating it as new myLazyLoad();.. ",
    "Kurzdor": "I have got the same problem with IE11.\nGot this issue when import lazyload like this\nimport LazyLoad from 'vanilla-lazyload';\nAt first, IE11 dropped an error with arrow functions.\nI solved this with this setting in babel-loader for webpack\nexclude: /node_modules\\/(?!(some-modules|vanilla-lazyload)\\/).*/\nbut after that IE started throwing another error with Object.assign.\nThe solution was that I needed to import lazyload umd version like this: \nimport LazyLoad from 'vanilla-lazyload/dist/lazyload.js';\nSo, i would mention in documentation that this ES2015 version supports only modern browsers or needs some polyfills to make it work in IE11.. ",
    "VasekPurchart": "I am experiencing this as well, using Webpack (but we do not run any loaders on code from node_modules, so only modules and minification can come into play probably).\nI tracked the syntax error to version 8.15, but it throws a different error (Object doesn't support this action) already in 8.13 where the different distribution files appeared for the first time. So maybe there is something wrong in the build process (producing code IE11 is not able to parse?).\nI am not able to pinpoint precisely where IE stops understanding the code, but it's highlighting gets messed up here:\ne.style.backgroundImage=`url(\"${t}\")`}if(s){let t=h(s,n);e.style.backgroundImage=t}})(e,n)},\n                                  ^\nAnyway I think the last vorking version for IE for now is 8.12.. @verlok Hello, I see this released as 10.20, are you planning to release this also in the 8.x series pls?. ",
    "unchai": "I workarounded with webpack alias config.\njs\nmodule.exports = {\n  ...\n  alias: {\n    'vanilla-lazyload': require.resolve('vanilla-lazyload/dist/lazyload.js'),\n  },\n  ...\n};. ",
    "128keaton": "@verlok  I cannot get 11.x working on IE11 sadly, even with the polyfill.. ",
    "UisgeBeatha436": "Thanks for this suggestion. After applying this to my site it leaves me with an error:\n\nuncaught exception: TagError: adsbygoogle.push() error: Only one 'enable_page_level_ads' allowed per page.\n\nJust above the body-tag, I have:\n```\n\n  var myLazyLoad = new LazyLoad({\n      elements_selector: \".lazy\"\n  });</p>\n<p>// lazyload used in the Bootstrap carousel\n  $(function() {\n    return $(\".carousel.lazy\").on(\"slide.bs.carousel\", function(ev) {\n      var lazy;\n      lazy = $(ev.relatedTarget).find(\"img[data-src]\");\n      lazy.attr(\"src\", lazy.data('src'));\n      lazy.removeAttr(\"data-src\");\n    });\n  });</p>\n<p>function load_ad() {\n    // put here the code to load your ads\n    (adsbygoogle = window.adsbygoogle || []).push({\n        google_ad_client: \"ca-pub-3514636835854223\",\n        enable_page_level_ads: true\n    });\n  }</p>\n<p>new LazyLoad({\n    elements_selector: \"#google_ad\",\n    callback_enter: load_ad\n  });\n\nI added the proposed css and in the webpage itself I have:```\nMy best guess is that the js-code is in conflict with the html-code. Any thoughts?. Anyone?\nSolved the issue on the enable_page_level_ads, however using the code @verlok provided doesn't show any ads. The Firefox Developer log doesn't show any errors.. @verlok  Thank you for explaining. This did do the track :). Thanks for your replies. \nBy changing the a-element and split it into a separate img-tag and a a-tag I managed to get lazyload to work.. ",
    "DMCK96": "Issue was caused by container expecting an element as the variable rather than a string (confusion due to how elements_selector works). \nSo replace '.lazy-container' with document.getElementById('lazy-container')\nIn my use case due to having numerous containers I have an array of elements looking for lazy-container and then wrap the constructor in a foreach loop.. ",
    "vcoppolecchia": "My context\nI inserted lazyload script the async way and with this recipe (spoiler: \"conditional load\").\nWhat is happening\nI get the same error as @DMCK96. Essentially my page loads lazy images the right way, but in the console I get this:\n\nWhich version of LazyLoad I'm using\nI'm conditionally loading based on browser capabilities, just like is suggested in the recipe \"conditional load\".\nHTML, CSS and JS code I'm using\nThe recipe has only a single difference from the standard one in the documentation: I'm passing to window object an array of lazyLoadOptions options. The only reason I'm doing so is because I am lazy loading also other images in the page (other than those in the HTML markup below).\nScript and options\nhtml\n<script>\n  (function(w, d) {\n    var b = d.getElementsByTagName('body')[0];\n    var s = d.createElement('script'); \n    var v = !('IntersectionObserver' in w) ? '8.17.0' : '10.19.0';\n    s.async = true;\n    s.src = 'https://cdn.jsdelivr.net/npm/vanilla-lazyload@' + v + '/dist/lazyload.min.js';\n    w.lazyLoadOptions = [{\n      elements_selector: '.lazy-img'\n    }, {\n      elements_selector: '.lazy-img',\n      container: document.querySelectorAll('.scrollable-small-only')\n    }];\n    b.appendChild(s);\n  }(window, document));\n</script>\nThe HTML\n```html\n\n...\n\n...\n\n```\nAny help will be of great benefit, thanks.. Yes, this solved my issue. Thank you guys! \ud83d\ude09. Hi @Jones-S, maybe I can be of some help here because I've got a live example which is 99% similar to what you need and, most importantly of all, is working (we recently brought it on the live servers). \nHere's the code:\njavascript\n(function(w, d) {\n    var b = d.getElementsByTagName('body')[0];\n    var s = d.createElement('script'); \n    var v = !('IntersectionObserver' in w) ? '8.17.0' : '10.19.0';\n    s.async = true;\n    s.src = 'https://cdn.jsdelivr.net/npm/vanilla-lazyload@' + v + '/dist/lazyload.min.js';\n    w.lazyLoadOptions = {\n        elements_selector: '.lazy-img',\n        callback_load: function(lazyImage) {\n        lazyImage.parentElement.className += ' bgc-transparent';\n        }\n    };\n    b.appendChild(s);\n}(window, document));\nLet me break it down for you (the way I would've liked someone to explain me at the beginning \ud83d\ude02): following the recipes you alredy know I loaded a different version based on the value of the v variable inside the IIFE function (meaning based on IntersectionObserver support). I've also mixed this recipe with another one listed on the plugin page to be able to lazy load the images again and have an instance with a callback available so I can fire the plugin again after the load event (we have products filters on the site linked above that load additional content via ajax when clicked/touched).\nHope this clarifies and helps you and anybody coming across this. Bye. \ud83d\ude09. ",
    "AdelDima": "In order to fix this issue, I hade to reupdate isotope layout after I called isotope, and here is the code if someone needs a solution:\n```js\nlet $imgs = $container.find(\"img.js-lazy-image\");\n$container.imagesLoaded(() => {\n  $container.isotope(params);\n  if (pxdm_js.is_lazy_image) {\n    $imgs.load(function () {\n      $container.isotope('layout');\n    });\n  }\n});\n```. ",
    "DimLeon": "Thanks for the reply @verlok. Also thank you for this plugin.\nBy \"normal img demo\" i meant the \"simple\" lazyload demo, my bad \ud83d\ude42.\nI tried running the script shown in this page: https://github.com/GoogleChromeLabs/puppeteer-examples/blob/master/lazyimages_without_scroll_events.js. \nI once again attempted to test all demo urls found on the lazyload \"Recipes\" section.\nthe only demos that 'passed' where the \"dynamic content\", the \"Lazy Lazyload\" and the \"Iframes\".\nThe result i get in the failed ones is:\n\nLazy images loaded correctly: Failed\nFound 1971192 pixels differences.\nDimension image A: 250x2874\nDimension image B: 250x2874\n\nThe result in the \"passed\" demos is:\n\nLazy images loaded correctly: Passed\nFound 0 pixels differences.\nDimension image A: 250x500\nDimension image B: 250x500\n\nDoesn' t really make sense to me. I don't know how to help, since there is no scroll events in your code and Intersection Observer is used instead.\nPlease let me know if you figure anything out.\nI' will try to use the Googlebot Images crawler as indicated here: https://support.google.com/webmasters/answer/6066468?hl=en\nand see the results \nCheers!. Hello @pkjoshi. Try to include a width descriptor (or a pixel ratio descriptor) in each of your data-srcsets.\nFor example: data-srcset=\"wysiwyg/panel/Categ_01_320.webp 320w\" \n(or data-srcset=\"wysiwyg/panel/Categ_01_320.webp 1x\").\nI remember having some similar issue as well with picture and lazyload and for some reason it worked by using a width descriptor.\nAlso, try to change the media attribute \"(max-width: 480px)\" into:\n\"(min-width: 321px) and (max-width: 480px)\",\nin order to be more explicit for the browser's pick.\nI hope this will work for you. ",
    "AzamatRasulov": "I'm experiencing the same issues. I have ordinary img with data-src and elements with data-bg. Page doesn't pass Puppeteer tests.\ni've tried:\n- v8.17.0 (it won't pass of course, but I tried)\n- v10.19.1\n- v8.17.0 / v10.19.1 conditional load\n- v10.19.1 with a polyfill suggested at Puppeteer output page.\nIt never passes\ud83e\udd37\u200d\u2642\ufe0f\nOn the first image (Page without being scrolled) there are no images, on the last (Page after scrolling) \u2013 some of them.\nEDIT: In my case this is caused by first screen being 100vh. After removing that rule, Puppeteer output screenshots are the same. \nTest says \"FAILED\", but it's due to me using some parallax, so when two screenshots compared, images are misaligned after scroll.. ",
    "dan-ding": "Setting small dimensions (400 x 300) in that puppeteer script, I have yet to find a lazyload example (this or other libraries/script) that passes. \nMedium articles pass -- however Medium articles also appear fine with javascript disabled entirely...\ntesting:\nhttps://rawgit.com/GoogleChromeLabs/puppeteer-examples/master/html/lazyload.html\nfails with the small viewport\nwhich makes me wonder if the script is a good example;\npuppeteer is creating a page and taking a screenshot of it in it's entirety - that function appears to not be  firing intersectionObserver (https://github.com/GoogleChromeLabs/puppeteer-examples/blob/59355609ecb3c2e396a289b28f34d5116fc89b8e/lazyimages_without_scroll_events.js#L131) ???\nI think using a placeholder - actually having a src - is key to making everyone happy.\nbesides, not having a src isn't great for accessibility\n. It runs @verlok as far i can see -- with the exception of when a screenshot is taken.\nit's easy to replicate with chrome dev tools.\n\nget a page with images loaded late (the puppeteer example works)\nopen dev tools\nchange the device to something small, like mobile\nensure caching is disabled and reload the page\nwithout scrolling, print the page\n\nthe print preview is missing all the images which haven't been scrolled to; they don't show as they don't have a src set;\n. Ya -- just trying to help(?) some understand what the puppet is doing.\nI'm not a fan of the ua sniffing, however i'm not raising an issue with it.\n. @verlok i wanted to avoid the question of the UA as I understand why you put it in. It wasn't meant to be a complaint.\nI have only one possible idea, but haven't tested it yet, so it may be useless...\nAlso -- the example puppeteer script does not set the UA to googlebot without modification.\nI'll write up some better tests (since that example doesn't use the lazyload we care about ;) and get back to you. ",
    "otterslide": "\nWould you try with version 11.0.0?\n\nI just tried this version and I fetched as Google my site. Only the first image shows, the rest don't load.. but additionally Google ends up failing to even run masonry, so it's as if it runs into some error.\nI'm also using srcset.  If I take out the data-src and data-srcset from my images, fetch as google loads fine and masonry runs ok.\nI'm not sure what could be the issue. Does the LazyLoad() have to be run after document.ready() ? Or can it be called anywhere? I called it in right after loading the script.. \nI tried with data-src only, and no srcset, and still same problem. On my end it loads fine however, but it seems Google runs into some issue.. ",
    "waqasy": "Got it, thanks. . Your images are loading. \nYou don't have to use elements_selector: \".lazy\" twice.\n. ",
    "kylescousin": "They are not. Just a few are, when you scroll down most of them are stuck\nwith the loading icon.\nOp di 4 dec. 2018 08:59 schreef waqas <notifications@github.com:\n\nYour images are loading.\nYou don't have to use elements_selector: \".lazy\" twice.\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/verlok/lazyload/issues/279#issuecomment-444005988,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AFhRPlp2exPj2Tqk7gtwrI0hEBQK0Nemks5u1itmgaJpZM4Y_Eut\n.\n. When I 'pauze' Cloudflare, they do load.\n\nI don't understand how Cloudflare has anything to do with this.. Found the problem, it's this: https://blog.cloudflare.com/we-have-lift-off-rocket-loader-ga-is-mobile/\n\nWhen turning off 'rocket loader' on Cloudflare, it works.\nIs this something that can be solved on your part?. ",
    "ipernet": "That is maybe not enought because it would not solve the use case of safe urls where a server-side token is generated specific to the URL parameters used. Client-side string manipulation of parameters is not the right approach here.\nBest would be to use a data-srcset-webp attribute when to_webp is set to true that will be used as the webp url source.\nOr go with the more verbose <picture>\nEdit: something as simple as this as a starter.. @verlok indeed, but it's a choice of not supporting safe urls or URLs that can only be generated server-side, due to possible heavy html markup on the client side. However I have the feeling that repeated things (like parts of same URLs here) in the markup tends to compress quite good, because most of the time html is served with gzip. \nIs it more about possible DOM performances issue?. Should we clean everything related to webp  (webp detection support, to_webp) to clean up a bit then bump the version number to a major one?. At the same time, a new setting for Lazyload to let it know that webp is supported could be added. In fact, Chrome and Firefox both add a request header Accept: image/webp, so it makes it easy to pass this info on the plugin initialization, from the server-side rendering.. Async, client-side webp detection:\n```javascript\nvar detectWebpSupport = function(cb) {\n    var webpString = 'image/webp';\n    var canvas = document.createElement('canvas');\nif (canvas.getContext && canvas.getContext('2d')) {\n    var webpSupportFromCanvas = canvas.toDataURL(webpString).indexOf('data:' + webpString) === 0;\n\n    if (webpSupportFromCanvas) {\n        return cb(true);\n    }\n}\n\nif (!self || typeof self.createImageBitmap === 'undefined' || typeof self.fetch === 'undefined') {\n    return cb(false);\n}\n\nvar webpData = 'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=';\n\nreturn self.fetch(webpData).then(function(r) {\n    if (!r || typeof r.blob === 'undefined') {\n        return cb(false);\n    }\n\n    return r.blob();\n}).then(function(bloby) {\n    if (self.createImageBitmap(bloby)) {\n        return cb(true);\n    }\n\n    return cb(false);\n});\n\n}\ndetectWebpSupport(function(webpSupported) {\n   // webpSupported =  true || false\n   // lazyload initialisation\n});\n```. @verlok This should be handle a few lines before with the different checks, including:\njavascript\ntypeof self.fetch === 'undefined'\n. @verlok Thanks for the merge. I had a quick look, but the webp detection method is async and is used in a synchronous way when imported from lazyload.environment.js. This causes wrong detection of webp support.\nVerified on Firefox 65, webp detection is randomly true or false here:\n\nThe createInstance method should for instance be only called when the environment is \"ready\" :)\nthanks!. See for instance: https://github.com/verlok/lazyload/compare/master...ipernet:async-env?expand=1. Wrong repo, sorry!. ",
    "schellenbergk": "data-srcset-webp would solve my issue too where my build process versions my files eg:\nimg/imageA-01b1d17269.webp\nimg/imageA-ef29f43990.png\njust swapping the file extension does not help here.. ",
    "equinusocio": "@verlok Floatbox is a lightbox legacy effect: https://floatboxjs.com/ I think they are just not compatible... Sorry @verlok i don't get the point. Since i can add both media and srcset to the source elements, why not just preload the <picture> or the img inside it? By this way i just need to declare my semantic html with the resources i need.\nhtml\n<picture>\n  <source type=\"image/webp\" media=\"(min-width: 650px)\"  srcset=\"flower.webp\">\n  <source type=\"image/jpeg\" media=\"(min-width: 465px)\" srcset=\"flower.jpg\">\n  <img src=\"fallback.jpg\">\n</picture>\nI just think that to_webp is something outside the scope of this library that should only allow you to preload images, not manipulating them. Also this option disable the native fallback functionality provided by the html (above snippet). Yes html is prolix, but, you know, you can't just try to \"simulate\" their functionalities with js.. I get your point, i just don't like the to_webp api because i think it's a bit out of the lazyloading scope. Btw your (complex) example can be reduced to something like this:\n```html\n\n\n\n\n\n```\nWhere (extension free):\n- Load image_440 on 1x or load image_660 on 2x\n- If (min-width: 768px) show the image at 330px (intrinsic size)\n- if (min-width: 1024px) show the image 220px (intrinsic size)\n- By default show the image at 440px (intrinsic size)\nCombining these rules the browser will load the bigger file based on the screen density, but it will change the intrisic size (rendered sizes) of the image based on the media queries.\n\nWhy not considering the Lazysizes approach where it simply support the native picture (so to_web is a meh)?\n```html\n\n\n\n\n\n\n``\nMy suggestion here is to keep this lib as \"standard\" as possibile removing \"misleading\" functionalities. I might be wrong so it's your decision :) Thanks for the replies.\n. > The thing you got wrong, though, is that you used thexdescriptor in thesrcset, in conjunction with thesizes` attribute. \n~Nope :) srcset can contains w or x descriptors. From the spec~\n\n~Zero or one of the following:~\n~- A width descriptor, consisting of: ASCII whitespace, a valid non-negative integer giving a number greater than zero representing the width descriptor value, and a U+0077 LATIN SMALL LETTER W character.~\n~- A pixel density descriptor, consisting of: ASCII whitespace, a valid floating-point number giving a number greater than zero representing the pixel density descriptor value, and a U+0078 LATIN SMALL LETTER X character.~\n\nEDIT: You're right. I missed this line:\n\nIf an element has a sizes attribute present, all image candidate strings for that element must have the width descriptor specified.. @verlok Nice! :). The source tag and relative attributes are part of the living standard. They are not experimental anymore. Many MDN pages need to be updated (anyone can do it easily)\n\nhttps://html.spec.whatwg.org/multipage/embedded-content.html#the-source-element\nI will update the mdn page.\nEDIT:\n@verlok Done. The experimental flags are gone from the page content. We need to wait the PR approvation for the browsers compatibility table. Here the PR https://github.com/mdn/browser-compat-data/pull/3479. ",
    "muturgan": "welcome. glad to help an excellent project. ",
    "pkjoshi": "Hi @DimLeon - Thanks for your suggestion, but without adding width descriptor or pixel ratio it's working fine, like correct image version is served depending on the browser or media width. There is no issue whatsoever.\nI face the issue only when I am using lazyload. \nso do you think that adding pixel ratio will help in resolving this?. ",
    "dverbovyi": "same for me. @vcoppolecchia looks like container should be only 1 node, not an array or list of elements returned by querySelectorAll\nUse querySelector() or getElementById. @verlok could you provide me a case when \"entry.intersectionRatio alone is not enough because it could be 0 on some intersecting elements.\"\nWhat kind of elements? I did a lot of testing cases and check entry.intersectionRatio > 0 works perfectly\n. > \"So maybe is not a good idea to remove isIntersecting.\"\nI think it's a good idea because it's causing an issue and lazy-loading doesn't work properly in Chrome. and isn't supported in IE.\n I know you told me that's Chrome issue, but and It would be better to not rely on this property at all since intersectionRatio > 0 is covering all cases.\nclosing this thus I created PR to development https://github.com/verlok/lazyload/pull/299. ",
    "goranefbl": "same here, is this going into production? . ",
    "jstoebel": "@verlok Thanks for getting back to me! I switched to a different library that seems to work with our setup. . ",
    "davejamesmiller": "I just found a case where entry.intersectionRatio = 0 while entry.isIntersecting = true. I'm not sure how to reproduce it, but it's on a large gallery of images and happens to every image on a particular row, causing that row to not load. The images are sized in percentages, so they have a fractional height (231.047px), in case that matters, but there are also a number of absolutely & relatively positioned elements (the layout is generated by a JS plugin) that may also contribute to it being 0.\nI added this console.log:\njs\n  var isIntersecting = function isIntersecting(entry) {\n    console.log(entry.intersectionRatio, entry.isIntersecting);\n    return entry.intersectionRatio > 0;\n  };\nAnd got this output (note: there are 4 images per row):\n// Initial page load:\n0 false\n1 true\n0.7310053110122681 true\n0.7324966788291931 true\n0.7332969307899475 true\n0.7310053110122681 true\n0.730560302734375 true\n0.7320507168769836 true\n0.7328505516052246 true\n0.730560302734375 true\n0.7301152944564819 true\n0.7316048741340637 true\n0.7324041724205017 true\n0.7301152944564819 true\n0.08727166801691055 true\n0.08744971454143524 true\n0.08754526078701019 true\n0.08727166801691055 true\n296 times: 0 false\n// On scroll:\n4 times: 0.09810027480125427 true\n4 times: 0.08227764815092087 true\n4 times: 0.012658100575208664 true\n4 times: 0.09810027480125427 true\n4 times: 0.003164525143802166 true\n4 times: 0.009493575431406498 true\n4 times: 0.012658100575208664 true\n4 times: 0.015822624787688255 true\n12 times: 0.006329050287604332 true\n4 times: 0 true\n4 times: 0.003164525143802166 true\nI'm not sure what's the best fix generally, but I have switched it to entry.isIntersecting || entry.intersectionRatio > 0 for now to make it work correctly (in Chrome 72 at least).. Great, thanks!\nOn Mon, 4 Mar 2019, 7:44 am Andrea Verlicchi, notifications@github.com\nwrote:\n\n@davejamesmiller https://github.com/davejamesmiller don't bother, I'm\non it.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/verlok/lazyload/issues/293#issuecomment-469150221,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AAOcSKS9s-R5SOH1d8S8Y7RR7bd9YT7oks5vTM76gaJpZM4aIPki\n.\n. \n",
    "mikemorton": "I see this as well on safari and IE. ",
    "01011010": "Hi Verlok, \nThanks for the response.\nSure, here is the raw balde template file section for the image:\nhtml\n<img \n  data-src=\"{{$image->generate()->url()}}\"\n  data-srcset=\"{{low.jpg}} 320w,\n               {{medium.jpg}} 480w,\n               {{high.jpg}} 800w\"\n  sizes=\"(max-width: 480px) 100vw,\n         (max-width: 900px) 33vw,\n          233px\"\n  alt=\"\" class=\"img-responsive lazy\" itemprop=\"image\">\nThis is the rendered page, and the CSS code to go with that section, plus the divs it sits in:\nhtml\n<div class=\"container\">\n  <div class=\"row\">\n    <div itemscope=\"itemscope\" itemtype=\"http://schema.org/Product\" class=\"col-md-3\">\n      <div class=\"panel panel-default\">\n        <div class=\"panel-heading\">\n          <a aria-label=\"View product\" itemprop=\"url\" href=\"https://\" alt=\"\" data-gtm-product=\"{}\" data-gtm-click=\"\">\n            <img data-src=\"https://domain/image.jpg\" data-srcset=\"https://domain/image_low.jpg 320w,\n              https://domain/image_medium.jpg 480w,\n              https://domain/image_high.jpg 800w\" sizes=\"(max-width: 480px) 100vw,\n                   (max-width: 900px) 33vw,\n                  233px\" alt=\"\" itemprop=\"image\" class=\"img-responsive lazy loaded\" \n              srcset=\"https://domain/image_low.jpg 320w,\n              https://domain/image_medium.jpg 480w,\n              https://domain/image_high.jpg 800w\" \n              src=\"https://domain/image.jpg\" data-was-processed=\"true\">\n          </a>\n        </div>\n        <div class=\"panel-body\">\n          <a itemprop=\"url\" aria-labelledby=\"\" href=\"https://domain\"><h3 id=\"\" itemprop=\"name\" class=\"panel-title\">Title</h3></a>\n        </div> \n        <div class=\"panel-footer\"></div>\n      </div>\n    </div>\n    ...\n  </div>\n</div>\ncss\n/* Prevents img without src to appear */\nimg:not([src]) {\n    visibility: hidden;\n}\n/* For the image itself */\n.img-responsive{\n    display: block;\n    margin-left: auto;\n    margin-right: auto;\n    max-width: 100%;\n    height: auto;\n    vertical-align: middle;\n    border: 0;\n}\n...\nDo let me know if you need any other info. Many thanks in advance (and btw, great script!). Have tested it tonight, and unfortunately none of those changes (alone or combined) made a difference. \nI still had to call lazyLoadInstance.loadAll() in order to make the images appear.\njavascript\nlazyLoadInstance.loadAll() <-- all images appear\nundefined\n. Started digging into it, and here are my findings using various versions of Chrome.\n60 doesn't care about data-sizes or css. It just works as per the initial setup in my first comment.\n58 works if you change sizes to data-sizes (css doesn't matter)\n57 works if you change sizes to data-sizes (css doesn't matter)\n56 works if you change sizes to data-sizes (css doesn't matter)\nDoesn't matter if you make the changes, it just doesn't work (without loadAll()) in the following versions:\n55\n54\n53\n52\nWill see if I can find anything in the change logs in the coming days.... ",
    "bmargevicius": "1) Fair.. \n2a) I wouldn't expect it to check if it actually loaded. In my mind if the swap from data-src to src happened the loaded class would apply. It's 50/50 here. \n2b) If there is a background image loading in an infinite scrolling loading scenario. The background image was used on a svg, where background-position: contain. Applying the loaded class here (as in the code above) prevents reloading.\n. ",
    "Jones-S": "Solution:\nWell I found a solution: I transpile the node_module in my webpack config from ES6 to something readable by IE11.\nI now get an image.\nI hope this is all good for now.. No I think it's all good. For my case I like to not load the script in separately but rather include it into my minified js to have only one request. \nMaybe it would be nice to mention that the npm package is not IE ready and it needs to go through some conversion to make it browser compatible in your readme, but other than that no fixes required. Thank you. ",
    "gregh3269": "Hello,\nFor version 8.x on safari (<10) I get window.pageYOffset = 0 so the scroll down does initialise the images.  The initial viewport works OK and shows the images.\nA simple modification would be to replace window.pageYOffset with getPageYOffset() below :\nvar getPageYOffset = function getTopOffset(element) {\nreturn window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n};\nThink this is a known workaround, where it checks the know variations for the scroll/screen position.\nCheers Greg. OK, sorry.\n8.x (8.17.0) works great, this is for older phone support webkit/safari.\nWhen I load the page (on the phone) it renders the images within the threshold/screen, but when I scroll down it does not initialise the rest of the images.\nI am using the code from the conditional conditional_load.html on 8.17.0.\nIt is an older phone webkit/safari maybe v6/7?  (Later then IE9)\n\nOn debugging, it does not fire any of the class_loading, class_loaded etc methods, which I traced back to window.pageYOffset always returning 0 in function isBelowViewport(..) (others also)\njs\nvar isBelowViewport = function isBelowViewport(element, container, threshold) {\n        var fold = container === window ? window.innerHeight + window.pageYOffset : getTopOffset(container) + container.offsetHeight;\n        return fold <= getTopOffset(element) - threshold;\n    };\nThe suggested patch still uses the original window.pageYOffset, but if it returns 0, then checks other know methods of calculating the y position.\nI have tried quite a few loaders, but none wanting to support older devices.  I have patched this locally but it would be great if I could use jsdelivr.\nCheers Greg\n. .. typo on patch :(\njs\nvar getPageYOffset = function getPageYOffset() {\n        return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n    };. It does seem a can of worms. \nWith code below, it loads and shows the images, but I think its loading all the images as a default as I cannot see the delay being applied when I scroll up.\nhtml\n<script type=\"text/javascript\" src=\"mysite/vanilla-lazyload/10.20.0/lazyload.js\"></script>\n<script src=\"http://polyfill.io/v2/polyfill.min.js?features=es5,IntersectionObserver,getComputedStyle\"></script>\nvar myLazyLoad = new LazyLoad({\n      elements_selector: \".lazyload\",load_delay: 500\n});\nThe methods I ended up applying the change to were isBelowViewport(..) and isAboveViewport(..).  For some reason in getTopOffset(..) it breaks it.\nCheers Greg. OK, I have managed to get the poly fill working v3 (not v2) in the url.  But it still loads all the images at the start.  I have added a trace to callback_set\njs\nvar myLazyLoad = new LazyLoad({\n          elements_selector: \".lazyload\",load_delay: 500,\n          callback_set: function(el) {\n            $(\"#test\").append(\" callback_set \");\n            console.log(\"callback_set\");\n          }\n });\nI get callback_set for the number of images at load.  So there is no delay.\nfrom the lazyload.js:\nsupportsIntersectionObserver = true and  runningOnBrowser = true;\nI will try and debug more, but any pointers would be a help.\nCheers Greg\n. OK, giving up, poly fill seems not to be able to calculate intersections and always return true on phone.   :(\nCheers Greg . Thanks, but since polyfill.io  supports >= Safari  9 (2016), which I would have to mod to make it work with the phone, its simpler to roll my own version of 8 which works well.\nCheers\n. ",
    "Erulezz": "+1\nDropping support and updates is a good idea when Safari 12.1 has been released (coming somewhere in March probably with iOS 12.2 and macOS 10.14.4). Keeping the docs online for v8 (as it is now, but with a deprecation warning) until the majority of users are on Safari 12.1 is also a good idea. It always take a while before the majority of users are upgraded.. ",
    "kelenakamura": "with the conditional approach above how do we handle multiple different scrollable containers on a page?. oh actually i see you can send multiple config objects to lazyLoadOptions (so can we send 1 for main body, and 1 each for any specific containers that may exist on the page?) so we need a custom config object for each type of page on our site?\nwindow.lazyLoadOptions = [{\n    /* your instance 1 options */\n}, {\n    /* your instance 2 options */\n}];. ah okay maybe that does make more sense, we'll try that method. . okay that worked for the scrollable containers but seems for an off canvas modal, it still only loads in when you have the modal visible and you scroll the main window.\n<script src=\"https://polyfill.io/v2/polyfill.min.js?features=IntersectionObserver\"></script>\n  <script src=\"https://cdn.jsdelivr.net/npm/vanilla-lazyload@10.20.1/dist/lazyload.min.js\"></script>\n  <script type='text/javascript'>\n  var myLazyLoad = new LazyLoad({\n    elements_selector: \".lazy\"\n  });\n  </script>. yes i think we're going to look into how we're loading in the modal on mobile. so i think its fine, the polyfill method is much better than the conditional method for sure. thanks!. ",
    "RChrisE": "Hi Andrea,\nI followed your advice, but the problems persists. I thinks this is due to Salvattore's way of loading pictures. They are all above the fold while loading as they don't have a height yet.. Sorry I couldn't solve it and I had no time to post a Pen. We are quite busy with an update of our shop.. ",
    "0000marcell": "hi @verlok i'm gonna try version 11.0.2 if it doesn't work i'm gonna try to make a build as simple as possible that has the problem. version 11.0.2 worked great, thanks verlok, i dont know why version 10 was installed instead. ",
    "VincenzoMartino": "Hi verlok,\nYes, I mean all cases when the images are in the html but not visible (display none, visibility hidden, opacity 0 exc.).\n\nHave you tried and checked what actually happens before asking here?\n\nYes with standard plugin hidden images are loaded (loaded images are listed in the debugger network tab) and obviously not displayed.\nThere is a method to avoid this?. Hi Verlok,\nthanks so much for your accurate answer, and sorry if I write only now.\n\nIn all other cases, visibility: hidden or opacity: 0, in the image or its parent nodes, the images are revealed.\n\nMy problem was exactly this!\nNow I'm operating on css rules updating on display: none and where isn't possible I'll operate with elements_selector.\nThanks so much for hint.\nVincenzo. ",
    "ctowler157": "Thanks! I was looking at a bunch of different lazy load libraries and this one looked like the best for my use case, so I was bummed when it didn't work. Thanks for hopping on it so quick, looking forward to using this!!. Yeah, I actually picked this library specifically because we're already using srcSet and <picture> pretty heavily and this seemed to be the only lazyload with support for those out of the box. ",
    "khalyomede": "Thank you @verlok for the quick answer, I will try it out. I let you manage whether you should close this issue as you provided a workaround or if you think it could be worth keeping this as a feature request. Cheers.. You sir are really kind with me! Such fast answer with ready-to-use code, just what I needed to make my PWA perfect! Thank you so much for the time spent. Looking forward for this feature to come!!. ",
    "aaarichter": "closing . I just discovered that this functionality exists only in the 2015 bundle. . \ud83d\udc4d \nmaybe the 2015 bundle should be removed from the dist folder to avoid having two versions available at the same time. ",
    "peterdarthur": "If it makes any difference, it's loading SVG files for me, with domain-relative paths (\"/path/to/image.svg\"). I haven't tried full paths.. ",
    "db-conception": "Ok thank's. I resolved my problem.. "
}