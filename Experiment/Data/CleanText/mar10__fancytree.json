{
    "zdazzy": "any progress on this one?\n. Still doesn't work properly.\n. Isn't  the line that causes trouble?\n. ",
    "mar10": "you're right, the patch only seemed to fix it on chrome/safari\n. It's required when we use TAB to enter the tree control for the first time. I will look into it, when I am back at my Windows box the next time...\n. This seems fixed, at leas I cannot reproduce it.\nCould you confirm?\n. nice! i am going to look into it shortly\nthanks\n. that may be related to #2 ...\n. GitHub wasn't able to auto-merge, so I had to do it manually;\nbut somehow I seem to have messed it up, so your name is not maintained in the commit history log - sorry :-/\n. I will add a new option to hide icons (I don't understand the second part of your request, please open a new issue and explain a bit more ;-)\n. I think everything should be possible similar to DynaTree. \nPersistence was moved into an extension, and loadKeyPath may be used to re-load nested structures...\nhttp://wwwendt.de/tech/fancytree/demo/sample-ext-persist.html\n. nope, sorry\n. Are you talking about the addExpandedKeyList option for initAjax that was available in Dynatree?\n(This required the server to evaluate this info and return expanded nodes.)\n. see also #6\n. seems that my main comment (just before 'see also') got lost, maybe because I edited the issue title at the same time.\nWhat I said was: \"\nI could only quick-fix the sample by removing the lazy nodes ;-)\nThe recommended way in DynaTree was to pass a list of expanded node keys with the initAjax request, so the server can send the tree including expanded children (which may be a pretty efficient approach by the way).\nFancytree may offer a better solution some day, but it is not even specified yet.\nI changed the title of this issue, so we can pick it up when time allows.\n. This feature is now discussed here: #11 \n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. @wgaber Thanks for contributing!\nyou mean expand animation? This will be addressed in #730. @244958898 sorry, but I do not understand your question. @mafar Good suggestion. \nWould you like to open a separate issue for this feature?\n(this one is for general extension discussion) \nThanks!. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. thanks!\np.s. \nsee above:\n\nClosing RFC issues, because they should not appear as Open Issue.This thread is still open for discussion!\n. Currently 'partsel: true' means: 'at least on child is selected', so maybe 'hasSubSel' would have been a better name. 'selected: true' takes precedence, The logic is\n\njs\nif( node.selected ) {\n    // selected\n} else if( node.partsel } {\n    // partially selected\n} else {\n    // unselected\n}\n. @brumsel: basically it is node.unselectable = true; followed by node.renderStatus(), but you may open an issue for the feature request.\n. renderStatus() should only be required, after a node.ATTRIBUTE was set directly using JavaScript.\nIf passed with JSON, it should not be required. If you found a bug there, pleas open an issue for this.\n. Questions should be directed to Stackoverflow or https://groups.google.com/forum/#!forum/fancytree\n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. Hi,\nThere is already a tree.aria option and some specification with open questions.\nAre you able to help or contribute by testing with different clients or proposing markup enhancements?\n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. you could run your post processing in tie init event, which is called after all nodes are loaded.\n. This can be achieved using standard functionality and this simple pattern:\njs\nloadChildren: function(event, data) {\n    data.node.visit(function(subNode){\n        if( subNode.isUndefined() && subNode.isExpanded() ) {\n            subNode.load();\n        }\n    });\n}\n. dblclick\n. confirmed\n. Since this requires re-rendering of the markup, the 'force' flag should be set:\njs\nnode.hideCheckbox = true;\nnode.render(true);\n. See #804 . I will adjust bower.json, and think a bit about AMD support.\nNot sure what is the right way. For example\n- Should all extensions be separate AMD modules? (seems not even jQuery UI does this)\n- Should fancytree depend on jquery (and jquery-ui - only a small fraction is required)?\n- Should fancytree depend on jquery.cookie? (It's only required for ext-persist)\n- ...\n- And is it really neccessary to have the fancytree module exported to use like this:\nfunction($, jqueryui, contextmenu, fancytree, dnd, edit, gridnav, table) {\n//my code goes here - create tree etc....\n}\nFancytree exports everything in $.ui.fancytree after all...\nI did not use AMD, UMD, etc. so far. What's the downside of using the shim approach?\n. A forum lives here\nhttps://groups.google.com/forum/#!forum/dynatree\nbut it's also ok to discuss issue in the comments...\n. We now have a /dist folder, that is installed by bower.\n. This will be reconsidered with a next major release. Are you talking about the blue asterisks [*] that show up before a node instead of the [+] ?\nThis is still part of the XP theme. There are simply no special icons for it in the other themes, but you could easily added to the gif.\n. Expand all is shown here:\nhttp://wwwendt.de/tech/fancytree/demo/sample-api.html\nLazy nodes are implemented here:\nhttp://wwwendt.de/tech/fancytree/demo/sample-source.html\nHere's a demo that implements most of the available events:\nhttp://wwwendt.de/tech/fancytree/demo/sample-events.html\n. It was renamed to selected: true, so the sample is currently wrong.\nBut I am not sure, if I will rename it to the the verb form (as 'activate' and 'expand') for consistency.\n. this is hopefully fixed with #35\n. Pending code review:\nhttp://codereview.stackexchange.com/questions/27439/elegant-way-to-use-jquery-ui-position-in-a-backwards-compatible-way\n. How would we know, what branch is the parent?\nMaybe you can implement a sample function that solves your problem by sending an ajax request to the server and then uses what we have (tree. loadKeyPath(), .tree. applyPatch(), ...).\nThen we can see if and how we can generalize it to add it to the core. I.e. what events should be triggered, what options should be available, etc.\n. could you verify that the fix is working for you?\n. great :-)\n. try\n$.ui.fancytree.debugLevel = 1; // 0:quiet, 1:info, 2:debug\n. yes, this would be a good thing\n. what output do you see? And when (on start up)? Did you clear the browser cache?\n. Ok, this is from a global debug call ($.ui.fancytree.debug(...)), I will removed this line later.\nIn general, those global calls cannot be controlled using a tree option. You have to use\n$.ui.fancytree.debugLevel = 1; // 0:quiet, 1:info, 2:debug\ninstead.\n. @djangosdk This is a warning and cannot be silenced.\nIf you feel that there are valid scenarios causing it, please open a seperate issue.\n. @TimNZ This is probably not compatible with the debugLevel property of distinct fancytree instances? (We can discuss this, but please make sure not to mix such modifications with unrelated PRs). I think (hope) this could be achieved by using the simple multi-select mode (2) and calling setSelected for parents in the select event.\nIf you want this as a native option, please specify more detailed, how this should behave when a parent is selected, persistence mode is on, or when lazy nodes with selected: true are read (see https://github.com/mar10/fancytree/wiki/SpecSelect).\n. there is already this option:\nstrings: {\n        loading: \"Loading&#8230;\",\n        loadError: \"Load error!\"\n    },\nare you looking for more?\n. This has been fixed in IE 8 or later:\nhttp://msdn.microsoft.com/en-us/library/dd361842(VS.85).aspx\n. yes, I guess that's better. \nWould you apply to all styles?\n. hmm, i am not so sure about the float-one... Some trees (Eclipse outline, Finder, ...) seem to accept clicks that are ouside the node text, if the click is inside the same row.\nOr did I misunderstand the goa you are trying to achieve?\nAnyway, I acceot the current patch as is.\n. The selction state can now be fixed in the init event:\ninit: function(event, ctx) {\n            ctx.tree.rootNode.fixSelection3FromEndNodes();\n        },\nThis still has to be automated!\nThis can also be called in the loadchildren  event after a lazy node was loaded.\nHowever I am not sure, if this should be automated since in that case It may be better to apply the selection status from the parent to the newly loaded children.\n. hmm, can you send a the JSON that you used for the source that is not selected correctly?\nThis is the test file I used\nhttps://gist.github.com/mar10/5969551\n(drop in /test/triage)\n. 75e7996ad686e2b78538697aac09101970db9d82  automatically fixup selected nodes in selectMode 3\n. Close by 957e3f5 \n. we must only call this (expensive) function in selectMode 3\n. I'd suggest to have only one function selectKey that accepts a key string or an array of such.\nAlso, the select or flag parameter should allow to deselect instead.\n(and please add a test case to the unit test, if you can)\n. nodeLoadChildren call the postProcess callback, which allows to modify the ajax response before applying it.\nThis is a very generic approach. Do you see any problems with this, or have suggestions to improve this?\n. > But it's not called for root nodes. So it's very inconsistent and doesn't solve the problem. \npostProcess is called for all ajax responses, including tree init (otherwise please submit a bug).\n\nI read all the docs and couldn't find a way...\n\nwhat is missing here?:\nhttps://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-handle-custom-data-formats\n. Please give more details and re-open if you are still facing a problem.\n. What exactly is meant by 'after the process is complete'?\nDynatree set a phase variable while loading or initializing, that could be query by tree.isInitializing() or tree.isUserEvent().\nBut that was not robust, since there may be multiple lazy loads pending while the user selects a checkbox, ...\nWould it help that the event parameter is pass to all handlers?\nThis should allow to test wether the callback was triggered by a mouse click or a visit() thus allowing to ignore it.\n. The callbacks already receive an event parameter, so you could check event.originalEvent to find out.\nCan you try that?\n. css has been refactored to LESS, so we need a new start here ...\n. seems fixed\n. see #29\n. There is node.li for example, but only if the node was already rendered (and not in the table-tree mode).\nJust curious: what do you need it for?\ndata-something=\"bar\" should be accesible as node.data.something\n. correct, that's how it works: data must be added to <li>\nThe only attrs taken from <a> are href and target, in order to make it more easy to build a non-JS fallback.\nAlso, you should not set classes to the elements directly: change the model (node.folder) and call node.render() instead.\n. Thanks for bringing this up, I did not expect the jQueryUI widget _trigger \nmethod to be that slow.\nPerformance is always an important issue, and there are already some benchmarks \nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html\nI added a test case for _trigger:\n10000 createNode DOM events (widget._trigger()) took 294 milliseconds, 34,014 items/sec\n10000 createNode callback events (options.createNode() defined) took 5 milliseconds, 2,000,000 items/sec\n10000 createNode callback events (options.createNode() undefined) took 4 milliseconds, 2,500,000 items/sec\nI think I will replace the _trigger call with a direct function call options.createNode,\nas the execution time becomes neglectable.\nThe drawback is, that no additional DOM event is fired that a user can bind(\"fancytreecreatenode\") to.\nAs to your other remarks:\nThe render function should add the elements to the DOM in one final step, hence the comment\njs\n// Finally add the whole structure to the DOM, so the browser can render\nat least that was the plan. I will check again.\nThe table extension\nalready uses createDocumentFragment. Maybe that will also help to improve performance for the standard renderer.\n. Generally I don't think that a tree is the best view to display 10k entries. A grid with paging support may be more adequate and provide better usability.\nAnyway that doesn't mean that we should not improve here.\nA possible approach could be to render the nodes in smaller chunks, e.g. 500 nodes at a time using setTimeout.\nThat would yield control to the browser and would be worth a try.\n. I meant that we still render 10k nodes, but yield to the browser every now and then to prevent blocking.\nPaging / virtual is a topic on it's own and much more involved. I don't think it will go into the core code in the near future (but may be a great extension module...)\n. Currently these states are set by adding special class names:\njs\n    //Boolean attributes that can be set with equivalent class names in the LI tags\n    CLASS_ATTRS = \"active expanded focus folder lazy selected unselectable\".split(\" \"),\nso try:\njs\n<li class=\"selected\">\ninstead.\nUsing data-selected=\"true\" will result in node.data.selected = true (which will not select).\nIn order to select we would need node.selected = true instead.\nI'll modify this issue's title in order to reflect this.\n. I tried jQuery UI 1.10.3, jQuery 2.0.3 and it seemed to work.\nWhat problems did you face?\n. I don't thin that your algorithm guarantees that key are globalle unique (especiall when the tree allowed reordering using drag'n'drop).\nAlso there is no test if the user already provided a key (which is pretty common if the data is generated from a database).\nThe automtically genrated keys (\"_1\", \"_123\", ...) should be unique however, \nWhat do you mean by\n\n'_1', which I was unable to target programmatically.\n\n? What exactly was the problem?\n(Btw. your pull request didn't pass the travis test suite)\n. You can override\njs\n        onDragEnter: function(node, sourceNode) {\n          /** sourceNode may be null for non-fancytree droppables.\n           *  Return false to disallow dropping on node. In this case\n           *  onDragOver and onDragLeave are not called.\n           *  Return 'over', 'before, or 'after' to force a hitMode.\n           *  Return ['before', 'after'] to restrict available hitModes.\n           *  Any other return value will calc the hitMode from the cursor position.\n           */\n          // Prevent dropping a parent below another parent (only sort\n          // nodes under the same parent)\n/*           if(node.parent !== sourceNode.parent){\n            return false;\n          }\n          // Don't allow dropping *over* a node (would create a child)\n          return [\"before\", \"after\"];\n*/\n           return true;\n        },\n. can you give some more details how to reproduce? And maybe a sample html or jsFiddle...\n. this is hopefully fixed with #151;\ncan you reproduce with latest source?\n. thanks\n. could not reproduce here\n. see here\nhttps://github.com/mar10/fancytree/wiki/ExtFilter\n. I tried with native IE 8 and the current code (as refdreenced in you JS Bin sample, and it seemed to work for me.\nCould you confirm that the issue can be closed for you?\n. thanks for the feedback!\n. I think the 'Fancytree-way' would be to leave the lazy nodes completely empty until expanded.\nSo on init you could load the tree with top-level folders and articles\n- 1 - Drinks (not lazy)\n    + 11 - Plastic Cups (folder, lazy, empty)\n    + 12 - Cardboard Cups (folder, lazy, empty)\n      ABC123 - General drink cup (document)\n      ABC124 - Another general drink cup (document)\nthen, when 11 is expanded, Fancytree will trigger lazyloading, and the server delivers all the articles and lazy sub-folders of that node:\n- 1 - Drinks (not lazy)\n    - 11 - Plastic Cups (folder, lazy, not-empty)\n        + 111 - Automatic drink machine cups (folder, lazy, empty)\n          PC101 - Plastic cup 1 (document)\n          PC102 - Plastic cup 2 (document)\n    + 12 - Cardboard Cups (folder, lazy, empty)\n      ABC123 - General drink cup (document)\n      ABC124 - Another general drink cup (document)\n. In this case Lazyload may not be apropriate indeed, and you could implement this behavior with custom expand handlers.\nYou can access node.children directly if you are concerned about efficiency.\nYou could also introduce a new property node.cupsLoaded = true, to prevent duplicate Ajax requests.\n. http://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree.html#getNodeByKey\nbut looping over node.children and checking node.children[i].key will be faster (mostly because you only need to check the direct children anyway, if I understand correctly)\n. does tree.reload(source) help? http://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree.html#reload\n. Is this still an issue, i.e. did you find an elegant solution to this?\nOtherwise we could allow to set 'data.result = false' in the  lazyLoad event\n. this is how I would do it.\n. Hi,\nhelp is always very much appreciated ;-) If you like, you could start a branch / a pull request.\nI don't think I will find time to handle this in the very near future.\nSome nice to haves\n- I would prefer a html-compliant solution (are multiple <tbody> tags valid?).\n- It should not break tabbable=true mode.\n- it should work, if the nodes contain tabbable elemts (like <a> or <input>)\nThese alternatives come to my mind:\n- add a dummy element with a tabindex (your proposal)\n- make tree.hasFocus() smarter, i.e. record if the tree is focused in tabbable=false mode. Then we could return false in the keyboard handler for inactive trees, which should solve the issue.\n- improve 'tabbable=true' behavior (why do one want to disable it)?\nWhat do you think? Other ideas?\np.s.\n(I fixed the 'tabbable' issue for tables)\n. > Yes, multiple tbodies are valid. And div or span inside table aren't valid.\nI see now that multiple <tbody> are allowed, but - if I read the spec correctly - must have at least one <tr>. \nAnyway: no big deal, if it works on all supported browsers.\n\nI tried to insert <input> elements into the tree - neither backspace nor arrows don't work for them now (even when tabbable = true). I think we should handle keyup or keypress instead of keydown event.\n\nAt least we should try with inserted  <a>  tags also.\nBtw, Older implementations of Dynatree used <a> tags for the nodes, which can get focus by default, so key handling was easy. But they led to some problems (e.g. IE scrolls them into view when clicked sometimes, ...)\n\nI don't think It's a good idea. A browser already has own focus, it's enough. And as I wrote earlier, binding to the document element has a great performance overhead. Binding to the concrete $container will work faster.\n\nI havn't seen a great performance overhead so far when binding to document, at least nothing a user would notice. \nMake tree.hasFocus() smarter only means that $.ui.fancytree.focusTree must be set correctly to a tree instance or 'null', so I still think it might be a valid alternative.\n\nSome comments: ...\n\nWhat I meant is: If we have a solution that always works nicely, we might as well remove the 'tabbable' option at all.\nThe 'tabbable: \"nodes\"' option sounds interesting too. When I experimented with WAI-ARIA support, I saw that this might be a better approach, but did not try yet;\nhttps://github.com/mar10/fancytree/wiki/SpecAria\nI think we can give your approach a try, \nIt would be great if we have a working example that handles two tree instances with surrounding and embedded input controls.\nIf we need to make big changes, then I would like to be able to switch between both versions for a while.\nWe could start a feature branch for it (or even implement it as an extension)?\n. keyboard: true should be used to control if standard keyboard navigation is enabled. \nThis assumes that the tree can be made 'keyboard-active' in some way, in case you have other trees or controls on the page. (Not necessarily the browsers system ':focus'. Maybe by adding a 'focus' class to the container or maintaining a global 'focusTree' variable).\nThe tabbable: true option was added to control the behavior when the tree is part of a web form.\nIf you TAB through a form with a tree and other controls, the tree should behave like a listbox, i.e.\n- be entered / exited using TAB, i.e. be part of the tab index chain\n- set focus to the active node when entered using TAB\n- activate first node when entered using TAB and no node was active\n- gray our active node when exited\nIf we have an implementation for keyboard: true that also satisfies these requirements (and makes all users happy), we can remove the tabbable option.\nWe should also consider that later we want to support\n- WAI-ARIA compliance\n- embedded HTML elements in the nodes like <a> and <input>\n- the table extension (nice to have)\n. I did not say that I want to avoid to set the system focus. I wanted to express that I don't care how it is done, as long as the solution works for the users ;-)\nI will start a Wiki page for discussion, requirements and specification of different aproaches this weekend, ok?\n. Ok, I started a q'n'd Wiki Page here: \nhttps://github.com/mar10/fancytree/wiki/SpecKeyboard\nIt's only a first draft and everything is open. Should be public editable, so feel free to add or improve.\n. Looks good, so far! (Although there is sometimes a system focus frame around whole expanded LI tags, at least on Safari).\nCurrently I am not even sure how the Interface should work. I think we should describe and discuss the interface from a users perspective in the Wiki, so we have something to test against. Could you add your ideas there?\nI am currently working on styles an markup for the table extension, so maybe there will be some changes soon.\n(I need a to implement a hierarchical checkbox grid-like for a project, so I guess I will get some feedback from the team too.)\n. FYI I just merged latest changes from master. Hope everything is still working.\nI think the only thing that might affect your implementation is that I renamed the container class fancytree-focused to fancytree-treefocus (on the container only). Other changes include CSS and ext-table markup.\n. i have created another branch (gridnav) for some testing...\n. The gridnav branch now implements the ext-gridnav extension and a sample that includes a table (Tweaks > Keyboard nag.). \nIt's a combination of the tubbable branch and a new gridnav extension (When everything works we might drop the extensions and merge everything into core / ext-table).\nI'd be interested in your thoughts...\n. Ich merged our changes back to master. Let me know if you have improvements or suggestions...\n. Thanks for your feedback and contribution to that topic. I added a new issue, so I can close this bug for now\n. I thought about it, and think it works as designed ;-)\nIf a node has the lazy flag set, this means 'Trigger a lazyload event, when expanded for the first time'.\nInitially node.chiildren has a value of null (or undefined), so expanding will trigger a reload request and add the children. \nAfter that, node.children contains an array.(which might be an empty array [], meaning this is a leaf node).\nSo if a lazy node contains a childnode array, it is considered 'loaded'.\nThis also happens, if you add children manually with API functrions likenode.addNode().\nYou could instead expand the node first, and then add your additional node:\nnode.setExpanded().done(function(){\n    node.addNode(...);\n});\n. You can use tree.visit() or tree.toDict() to collect the required information.\n. thanks!\n. You are using old dynatree syntax. It's also invalid Json, because you have to use Quotes for the keys\nTry \"folder\":  true instead\n. this file was deleted in the old googlecode repository, but Google still return it in the search results :-/\n. I suggest that we move the development of this feature to the new branch 'tabbable' that I just created.\nCan you create a pull request there (not sure if / how this works though)?\n. there is now built-in support for this.\nYou may add classes to nodes or container in the dragStart event however and add some custom CSS maybe.\n. Closing RFC issues, because they should not appear as Open Issue.\nThis thread is still open for discussion!\n. Hi,\nFancytree uses the widget factory that uses this conventions.\nSee \nhttp://api.jqueryui.com/progressbar/#event-change\nor 'Events' here:\nhttp://api.jqueryui.com/jQuery.widget/\nAdditional namespace is appended to distinguish different tree instances.\n. Selectmode 3 is pretty involved already (see https://github.com/mar10/fancytree/wiki/SpecSelect).\nI think combining this with the filter extension would add another dimension of complexity -  and any solution  probably would be perfect for other users 'except for one little difference'... ;-)\nFor example, if you have hidden children and click the checkbox, the box would still only be partly selected, probably not what a user would expect (?)\nAnyway, you could try to implement it using select mode 2 and some custom event handling, I guess.\nOr you could even try to create a copy of the filter extensions that handles this.\n. sure. Please also add a small sample file with a fake error.\n. tree.reload uses the initial source by default, which often means that the original ajax request is issued again\nThis feature was added to deal with it, but the spec is not yet finalized (comments welcome).\nhttps://github.com/mar10/fancytree/wiki/SpecPersistence\n. could you test?\n. I think \"\" + var is a shortcut to typecast anything to a string. Are you aware of any potential problems here?\n. thanks! I'll look into it over the weekend.\n(Could you please separate refactorings from the core change next time - that makes it easier for me to focus when reviewing...)\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. related #94 \n. should be closed by the last checkin (nodeRenderStatus is part of nodeRenderTitle)\n. Thanks, I'll add the missing docstring.\n. Can you reproduce this on the demo site?\nhttp://wwwendt.de/tech/fancytree/demo/sample-ext-dnd.html\nIf not, please give some details, what is different (versions, html markup, ...) or send a sample page that we can use to reproduce.\n. In order to fix it I'd prefer a setup where I can debug and modify css, html and js.\nMaybe you can strip down your scenario to one html file?\n. ?\n. thanks.\n. I refactored the API a bit:\n    https://github.com/mar10/fancytree/wiki/TutorialExtDnd\nThe samples are updated to the new syntax.\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. does [Expand All] work for you on the sample page?\n    http://wwwendt.de/tech/fancytree/demo/sample-api.html\nCould you send a sample that reproduces the problem?\n. I could reproduce this.\n. no, but the collpase loop has a problem, whe a node was not yet rendered.\nas a workaround, you could try to skip collapsed nodes \nsomething like (not tested):\n$(\"#tree\").fancytree(\"getRootNode\").visit(function(node){\n    if( !node.isExpanded() ) {\n        return false;\n    }\n    node.setExpanded(false);\n});\n. This issue was fixed 3 years ago.\nPlease open a new one, describing the exact problem and give a sample how it can be reproduced.. loadKeyPath passes test-core.js, so it seems to basically work. Can you send an example that reproduces the problem?\n. Thanks for reporting this.\nI fixed lin 47, but I need some way to reproduce the problem before I can apply the patch for line 150.\nWhat exactly happens? Anything on the console?\nBest would be to have a html sample file that shows the problem.\n. ext-persist never loaded lazy nodes so far. The next beta will add an option to enable this.\n. simple:\n``` js\n  $(\"#tree\").fancytree({\n    source: $.ajax({\n      url: \"/myWebService\",\n      dataType: \"json\"\n    }),\n    lazyload: function(e, data){\n      data.result = $.getJSON(\"ajax-sub2.json\");\n    },\n    [...]\n  });\n```\n. It should be possible to add custom markup (like the droip-down arrow) to the title and add a menu to it, but that's outside the scope of fancytree core.\nMight be a cool extension, however, so if you implement it as such, other may use it.\n. You could either try to call stopProagation() in your dropdown click handler or check for originalEvent in the trees clickhandler (and return false if it's not the title span)?\n. Hi,\nI accidentally deleted the API docs when I synched from my Windows box (which isn't able to generate jsdoc).\nIt's back now - hope it saved your christmas eve ;-)\nThanks for reporting this\nbest\nMartin\n. The loadError callback now allows to return false, to prevent the error display. (You could call node.setStatus(\"ok\") to remove the loading icon)\n. seems to be fixed by adding\ncss\n    #tree .fancytree-container {\n        position: relative;\n    }\n(but it is possible to scroll down endlessly).\n. I am not sure if this CSS may break other scenarios, so for now I only added this to the Wiki:\nhttps://github.com/mar10/fancytree/wiki/ExtDnd\n. seems that ext-dnd works, bit the node.move() methods is not compatible with the table extension. I will look into it...\n. nolink prevented the use of <a> tags in the  generation markup, and is obsolete now.\nYou can still use href and target when defining the tree data, however:\nhttp://wwwendt.de/tech/fancytree/demo/sample-iframe.html\n. That would be an easy change.\nHave you checked compatibility on non-xhtml and different browsers?\n. Original:\ncss\nspan.fancytree-node {\n    display: inline-block;\n}\nThis fixed it, but breaks indentation of ext-table nodes:\ncss\nspan.fancytree-node {\n    display: inherit;\n}\nso the solution was to remove it altogether.\n. arghh... seems that now the skin-win8 is broken:\nthe select bar no longer has width 100%\n. This seems to work:\n1. no whitespace between lines in XHTML docstyles\n2. 100% wide selection bar in skin-win8\n3. proper indentation for table tree\ncss\nspan.fancytree-node {\n    display: inherit; /* resolves to 'display: list-item;' for standard trees */\n    width: 100%;\n}\ntable.fancytree-container span.fancytree-node {\n    display: inline-block; /* 'inherit' would result in table-cell, which doesn't indent */\n}\n. Should be fixed in current version / master (can you confirm?)\n. This link should work:\nhttp://www.wwwendt.de/tech/fancytree/doc/jsdoc/\nCurrently I am experimenting with different doc templates, so it might have been offline yesterday.\nCan you access now?\n. The Classes top-level menu contains all the info.\n. Thanks! I see the problem, but would feel better if we check how this affects performance before landing this patch\nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html.\n(Binding to node.span could be avoided by using delegation mots of the times and instead of $().data() one could use node.data.xxx = ...)\n. We could evaluate that. Maybe add the callback to one of the nodeRemove... hooks.\nI'd suggest to use a direct call (not widget._trigger) for performance reasons, but benchmarks may refute me ;-).\n. Thanks!\n. Just a note, that a cleanup feature could be implemented by #419, which introduces a modifyChild event, that is triggered for remove operations, for example.\n. This seems to be a bug that happens only if the drop happens before the target auto-expands.\nThanks for reporting it.\n\nIn addition to the above, DND onto a ajax folder does not work. The item that is dragged will appear in that folder but it stops the node from performing the ajax request.\n\nThis is 'works as designed'. If you add a node to a lazy folder (as you seem to to in the drop event), that target node is no longer empty, which means it is not lazy-loaded a second time.\nYou could expand the node before adding the drop-node instead:\non drop:\njs\nnode.setExpanded(true).done(function(){\n    add the child...\n});\n. blocked on PR #124\n. The changes seem to break the Travis build ( https://travis-ci.org/mar10/fancytree/builds/17458469 ) could you fix that?\nPlease note that I don't actibvely maintain this sample extension, so I will merge this without further testing...\n. any progress here?\n. Great; thanks for contributing!\n. In this sample it already seems to work when I expand all sub nodes of 'Folder 1', (after expanding all subsides before):\nhttp://wwwendt.de/tech/fancytree/demo/sample-scroll.html#\nCould you describe the wrong behavior that you observed?\nThanks for contributing!\n. You're right, that's a bug, should have noticed this.\nSince you don't know me either: I don't need much text to be convinced, but it's important to have some reproduction code, so I can see a bug come and go. Triage is not the fun part of an Open Source project ;-)\nChanging the behavior to include the 'last visible descendant' (instead of last visible child) could be a separate feature request.\n. Thanks for contributing!\nSome thoughts (though I have not built a sample and tested it yet ;-):\n- since you collapse the root first, autoScroll should not do anything (since we only expand invisible nodes after that)? So may be there lies a deeper root cause for the problem?\n- a similar case would be the expansion animation, that sometimes also should be disabled.\n  So another approach could be a new optional options argument to setExpanded(flag, opts) to control this? E.g. opts = {noAnimation: true, noScroll: true}\n. Cool, thank you!\nI will try to fix #128 and #129 until next weekend, so we can test with your sample. \nAlso going to look into the filter navigation problem; feel free to open a new issue.\n(Can be reproduced with the existing filter sample, when filtering 'x' and move DOWN)\n. could you try, if this new option can solve the issue that you reported?\njs\ntree.visit(function(node){\n    node.setExpanded(true, {noAnimation: true});\n});\n. will do, thanks!\n. How do you activate the node?\n- clicking should already set the focus\n- using tab should already set the focus\n- using node.setActive() does not automatically focus, since it is not always desired, but you could call node.setFocus()\nWould the latter work for you?\n. A node may be active, but unfocused. Think of a file explorer with an active folder in the tree on the left. The keyboard focus may still be on the file list at the right, so F2 is applied to the list and not to the tree.\nClicking on a node however should set both 'active' and 'focused' to that node.  And if a node has the focus, it should react to F2.\nIf not, this would be a bug.\nIf I click a node here and press F2 the node is edited:\nhttp://wwwendt.de/tech/fancytree/demo/sample-ext-edit.html\nCould you describe how your issue can be reproduced?\n. Long wait - no answer.\n. Thanks for contributing!\n. I hope my fix in the core code achieves the same as your patch. Could you please verify that in your scenario?\n. can you post the exact JSON that you return?\n. Long wait - no answer.\n. You did not speciy the lazyLoad callback. After that it seems to work.\njs\n    $(\"#tree\").fancytree({\n        checkbox: true,\n        source: [\n            {title: \"Node 1\"},\n            {title: \"Node 2\", key: \"id2\", lazy: true},\n            {title: \"Folder 3\", folder: true, children: [\n                {title: \"Node 3.1\"},\n                {title: \"Node 3.2\"}\n            ]},\n            {title: \"Folder 2\", folder: true}\n        ],\n        lazyLoad: function(event, data){\n            data.result = [];\n        },\n        activate: function(event, data){\n            $(\"#statusLine\").text(\"Active node: \" + data.node);\n        }\n    });\n. > how do I specify a folder which is lazy loading, but does not use the lazy load event?\nyou can't\n\nIs there any advantage /disadvantage to using expand instead of lazyload to trigger the loading of more children?\n\nlazyLoad is only triggered on the first expand. After that collapsing and re-expanding will simply present the loaded children.\n. How could a user specify such a flag?\nYou could do a node.resetLazy() on the collapse event instead. This will cleanup ressource as soon as possible and reload again later.\n. > Folder,lazy are decadent and depraved.\n\nDefining item behavior in server-side controller is outright broken design.\n\nWell, I try to design Fancytree in a non-dogmatic fashion, but a goal is to make it easy to integrate into any (opinionated) scenarios and frameworks.\nSupporting MVC / MVVM can certainly be improved, so I appreciate feedback, use cases and suggestions for API changes.\n\nImagine we have http://example.com/contract/17. Should the controller return it as \"folder,lazy\" or as only \"key,title\" ? This can be only determined by JS application. ...\n\nNot sure if I understand this: do you mean that you want the server to always generate JSON for the complete contract data, and then discard 90% percent of it in the postProcess handler?\nI think 'This can be only determined by JS application' could also mean to add this filter/type information to the ajax request.\n\nAdd method to get the type/key path of node\n\nThere is already http://wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#getKeyPath . Would this work for you?\nAlso, if you add \"type\": \"foo\"to your JSON response, it will be available as node.data.type.\nIf you need to handle rendering or post processing based on that type, you could already do this using \njs\nswich(node.data.type){\n    case \"foo\":\nor define a dispatch map like \njs\nvar dm = {\n    foo: function(){..},\n     ...\n};\n// call the specific handler\ndm[node.data.type] ();\nCan you give some source code example how you would solve your use case with the current API and how you would like to implement it with an improved API?\nThanks for contributing!\nMartin\n. > Array ? getNodePath(), so i can make my own keyPath with type etc ?\nsee node.getPathList()\n\nOne more thought. Maybe, send not just dict for item, but \"data\" and \"meta\", where data is DB record as-is to be passed to view and/or re-saved without filtering off anything, and metadata is type or anything else not to be processed in common-sence model pipeline.\n\nI also have thought about this (it's already possible to pass additional tree.data with the source option).\nYour code is already pretty concise. While it would be easy to move the post process handling to core options, I am not sure about the lazy load code (which references the current node, so a simple options dict won't do).\nAnyway we could work on a spec here:\nhttps://github.com/mar10/fancytree/wiki/SpecTypeSupport\n. are planning to cooperate on this issue? (I would close it for now otherwise)\n. no problem, same time issue here.\nI am sure the topic will pop-up some time later again.\n. Did you have a look at this Glyph-Sample?\n    http://wwwendt.de/tech/fancytree/demo/sample-ext-awesome.html\nand the styling demo\n    http://wwwendt.de/tech/fancytree/demo/sample-theming.html\nThere are is also the renderNode callback http://wwwendt.de/tech/fancytree/doc/jsdoc/global.html#FancytreeEvents\nIf you have a nice sample of a bootstrap-style tree, we might add it to the example browser.\nLet me know, if you have suggestions how the API could be improved to make this easy.\n. I am not planning to integrate a single templating engine, since people may already use another one in their project. (Also, performance when rendering thousands of nodes may be a concern.)\nBut I would like to make it easy to use a templating engine if a user wishes so. How about implementing your custom renderTitle event that way?\n. any thoughts?\n. see #136\n. this is still open, but should be a separate issue\n\nscrollIntoView() currently only scrolls nodes that are scrolled outside the tree $container, i.e. if the $container has a scrollbar.\nIt does not work if the container is larger than the screen, i.e. if the body has the scrollbar.\n. Can you open a new issue and describe what exactly is not working? Best would be a jsFiddle or sample HTML file\nThanks\n. You can attach it here, or (better) fork this repo and create a branch there, that we can use to work on it.\n. This doesn't include a startable, debuggable html file? And why / how did yyou modify the core files?\n(You can attach it here by the way.)\n. Ok, it should not be necessary to modify the original libs, just implement the desired behavior in the event handlers like dragDrop(), .... Also please understand that I don't have the resources to debug patched code.\nSince you already forked the project I'd suggest that you create a branch there ('issue140'), copy and rename /test/triage/test-issue-NNN-description.html, and modify it until the bug can be reproduced there (please describe how).\n. did you read my last comment?\n. I could not reproduce it here:\nmodified \n    http://wwwendt.de/tech/fancytree/demo/sample-ext-bootstrap.html \nto use\n\njs\nsource: {url: \"ajax-empty.json\", debugDelay: 1000},\nand I get an empty container after 1 sec.\nAnything on your browser console?\n. That looks ok.\nCan you send a sample file that reproduces the issue? Maybe a modified sample-ext-bootstrap.html or a stripped-down version of the code you are using...\n. found another solution\n. did you close this issue intentionally?\n. It seems to work here \n    http://wwwendt.de/tech/fancytree/demo/sample-form.html\n    http://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html\ntested  on IE 11 in 7/8 mode. Can you confirm that it only happens with original IE 8 browsers?\nI currently have FF 3.5 available. Can you give some more information such as Console output, etc.\n. I meant: can you confirm that it does not happen on IE 10 or 11, when you enable 8-mode there?\nAn do yoe see anything on the console?\n. Maybe related to #65 ?\n. Ok, thanks for checking this; I will handle this in the first issue #65\n. I tried with native IE 8 and the current code seemed to work.\nCan you reproduce with the current code from master (i.e. 2.0.0-7 pre)?\nBest would be a step-by-step explanation (fopr oine of the sample pages in the example browser, if possible)\n. The OP of #65 just reported this 'closed', can you confirm?\n. Have you tested with 2.0.0-7?\n. thanks a lot for contributing !\n. confirmed closed in #65\n. This is no official 'feature' yet, but you could already call tree.getSelectedNodes() in the drop handler and then move, copy, or whatever these nodes to the target, I guess.\nThe dragging helper image would still show a single node though.\n. @djangosdk no, it hasn't yet.\nI am currently experimenting wit the issue tracker. Don't like the 'someday maybe' issues to clutter the todo list, so I tagged planned features 'backlog',moved them to the respective milestone and closed them to get them out of sight. \nBut I will probably re-open them again soon...\n. There is no built-in 'multiDnd' option, because the potential use cases are too diverse. \nBut I started a demo implementation here: \nhttp://wwwendt.de/tech/fancytree/demo/#sample-multi-dnd.html\n. Sure, the sample just looks at the 'selected' state, which can be set using node.setSelected() \n. Hi,\nI would recommend against modifiying the plugin code.\n\nNow I can only drag inside folders (hooray!). Currently trying to figure out how to get that little indicator (drop vs non-drop) to cooperate\n\nUse the API instead:\njs\ndragStart: function(node, data) {\n    // This function MUST be defined to enable dragging for the tree.\n    // Return false to cancel dragging of node.\n    return node.isFolder();\n},\nBasically you can control drag/drop completely by implementing the dragXxx callcacks. See here for details:\nhttps://github.com/mar10/fancytree/wiki/ExtDnd\n(sample-multi-dnd.html only demos how to tweak the helper image, and use all selected nodes instead of the currently active one.)\n. I think you are looking for the save callback:\nhttps://github.com/mar10/fancytree/wiki/ExtEdit\n. I use the save event in production code, and there it works. Can you post some of your code?\n(The last point might be worth opening a separate issue)\n. I didn't step through all of the code, but maybe this helps.\nWhen save is called, node.title has still the old value:\njs\n    save: function(event, data){\n      // data.node.title still contains the original value.\n      // Return false to keep editor open, or\n      // save data.input.val() to your backend and return true (node.title will \n      // be updated then).\n      alert(\"save \" + data.input.val());\n    }\n. > It seems similar to modifying an array from within a for loop, which produces unpredictable results. \nexactly. You could try to return the string \"skip\" after remove, but this might fail as well.\nI'd reccommend to collect the nodes first, and then remove in a 2nd loop\n. It may be even more efficient to call .getSelectedNodes(true).\nThis will 'stopOnParents', so you only get the topmost nodes and don't have to care about child nodes.. This is already implemented, but has to be enabled like so\njs\n    persist: {\n        expandLazy: true\n    },\n. I could only reproduce this when trying to drag the coulmn header. Will look into it\n. Strange.\nStarting with 2.0.0-7, lazyload is deprecated (emits a warning on the console, but still works).\nlazyLoad with capital 'L' is the new syntax.\nDid you try to clear the browser cache?\n. that's cool: it felt like a bug, so an issue was appropriate.\nThanks for contributing.\n. This behavior  is a bit complicated and not yet finally specified:\nhttps://github.com/mar10/fancytree/wiki/SpecSelect\n(I modified the issue title to reflect this) Comments welcome.\n. Thanks for contributing! Maybe you can add a concrete use-case / story for this expectation?\nOne usecase might be: We want to insert a dummy node that acts as a sub-title. So we set 'uselectable' and 'checkbox: false'.\nAnother usecase might be: We have a tree of options, that a user can edit, but some of them are readonly (some forced to selected, some unselected). The user would like to easily set or reset all editable settings, for example by clicking the parent checkbox.\nI agree that it is not consistent yet, but some decisions that I am not sure about:\n- 'unselectable' could mean 'can never be selected' or 'can never be (de)selected by user interaction'.\n- A selected parent could mean 'all children selected' or 'all children that a user can select are selected'\n- How should we handle a node that is 'unselectable' but has the selected flag set in the source data?\n. I am closing this in favor of a general refactoring: #626\nbut some thoughts:\n\nI think the wording 'unselectable' is a litte bit missleading .... and there is big need for a second option like 'unchangeable' or even better 'disabled'.\n\nYes 'unselectable' is misleading, but 'disabled' as well IMO, because I would assume that such a node cannot be made active, i.e. cannot be clicked on.\n\nBut when I implement the tree table I found that in selectMode 3 (multi-hier) when I change the status of one parent node, the disabled node are also changed, which is not the expected behavior.\n\nHaven't tested, but the behavior should be consistent with plain trees. This would be a bug and should be reported separately\n. There are no plans to add a new selectMode, but you can implement this in the select event of the node that was clicked, using the standard Fancytree API.\nThere are also some special tool functions that may help: node.fixSelection3AfterClick() and fixSelection3FromEndNodes().\n. or \njs\n $(\"#tree\").fancytree(\"option\", \"selectMode\", 1});\nThere's also a helper fixSelection3FromEndNodes() that you may want to call on the root node after switching to mode 3.\n. You could try $(...).fancytree(\"option\", \"selectMode\", 1);. $(...).fancytree({selectMode: 1}); will re-create the whole tree, with the given options.\nYou need to pass every option that should not be default.\nOn the other hand $(...).fancytree(\"option\", \"selectMode\", 1); will leave the current tree intact and only changes the specified option.. @arvindabz The Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions, because then it is more likely that other users benefit as well. Thanks. This is valid JavaScript syntax, but not valid JSON.\nJSON requires keys and values to be enclosed in double quotes:\n{\"title\": \"Node 1\", \"key\": \"1\"}, ...\n. Hi,\nIf you think you found a bug, please open a new issue with details and a sample (e.g. jsFiddle, ...) how this can be reproduced \n. I don't think that setting expanded = true would be better, becaus then adding nodes would always result in rendering them, which is slow.\nSo we can leave it unchanged.(the function is called removChildren() and not removeChildrenAndCollapse() after all).\nBut in this case node.resetLazy() should also set expanded = false, because it currently depends on this behavior. \nWould you add this (and maybe think about and/or test if there are implications when dealing with lazy node scenarios).\n. I tried with iPad 2, and it didn't work at all.\nSeems that touch-punch is not actively maintained, as furf explains here (nice talk by the way):\nhttp://youtu.be/jutl36xdNbM\n(ative touch support is on the roadmap for jQuery-UI 1.13)\nI currently don't have the resource to debug this, sorry. But I would apply fixes, if someone provides a patch.\n. this is an open issue: see here #21 \nHoping to implement it in the near future... \nSince I am not used to using AMD, requires.js and the like, you could help with providing a some more detauils on how you wish to use it (like you explained above, just a few more details)\n. please see #21 for a reply\n. The optional opts object is only there to control the behavior of setAction. It is not passed to the event handler.\nThe only value currently supported is {noEvents: false}, which can be set to true to prevent triggering beforeActivate, activate, and  deactivate events.\n(Note that I just implemented it after you opened the request.)\n. It will be in the release 2.0.0-8, but you can get the latest code here\nhttps://github.com/mar10/fancytree/archive/master.zip\n. Thanks, I will keep this on my list\n. Couldn't reproduce it. Probably fixed during the last two years...\n. Yes I know, I am currently working on the build process, AMD and bower... #21 \nThe 404 is an issue of its own.\n. > some themes directly included from the src directory are looking for image resources in the same directory but they are not there.\nthis has been fixed (hopefully) by removing references to 'loading.gif' from the glyph theme. Please let me know, what issue you still see.\n\nThe solution is to remove the src from ignorance in bower.json, \n\nThe source folder does contain the last development snapshot. I would like to publish only stable releases via bower (to get the snapshots you could use git checkout or download the zip).\nThis means that the /dist folder is published, with all CSS and concatenated, original and minified sources.\nThe next release will also contain jquery.fancytree-custom.min.js with an AMD wrapped minified core + extensions. It will be easy to delete the unwanted extensions from that file.\nI am not sure, if we should also add all separate extensions (uncompressed and/or uncompressed or even separately AMD wrapped).\n. +1 for adding tests!!\nThe reason for bottom up implementation was to avoid multiple parallel expand animations.\nOnly the top node UL will be expanded slowly this way. (I believe ref #126)\nThis does not make sense for ext-table, since there are no hierarchical tags or animations, and\nobviously it also wasn't tested well.\nI think, we should find a way to retain this behavior for standard trees (but maybe by passing the noAnimations option).\nOr we can fix the ext-table bug by simply setting the expanded flag on the parent list and then call render() on the top node?\n. Overriding makeVisible would require another hook nodeMakeVisible(), and i 'd like to keep the number of hooks small. It would also only solve this use case, not generally rendering sub-sub-nodes.\nI tried another patch: does that work for you?\nIn any way I would like to merge the new tests. Could you add this to the test-table-ext.js, so it passes jshint:\n``` js\n/globals expect,module,ok,QUnit,start,stop,test /\nvar //TEST_DATA, TESTDATA_NODES, TESTDATA_TOPNODES, TESTDATA_VISIBLENODES,\n    $ = jQuery,\n    EVENT_SEQUENCE = [];\n``\n. hope it's working now(?)\n. The ext-menu is (currently) deprecated, but you could try this:  \nhttp://wwwendt.de/tech/fancytree/demo/sample-3rd-ui-contextmenu.html\n. did you trynode.setActive(false)? (alsosetFocus()` is available for node and for tree.)\n. Fancytree is not yet made for flat lists of that size. Maybe you want to have a look at some of the existing grid plugins.\nWe could start a paging extension, but as you pointed out, that may include supporting  special cases sorting, filtering, ext-table, ext-comlumnview, ext-dnd, ....\nSo it is not on my top priority list.\nBut you might try to implement the core functionality using the standard events, e.g. only load 50 nodes in lazyLoad, and append a special node like \"more...\" that will trigger another appending request.\nSee also #54\n. Yes, why not.\nYou could fork this repository, create a new branch (e.g. 'paging') and start a new extension.\nSee here for some details:\nhttps://github.com/mar10/fancytree/wiki/TutorialExtensions\nhttp://wwwendt.de/tech/fancytree/doc/annotated-src/jquery.fancytree.childcounter.html\n. Added a specification document\n. Fancytree registers itself as a jQuery draggable/droppable.\nIf you have a nice sample for a new theme, or suggestions how to make that plugin work: please let me know.\n(See also #160)\n. I would consider html markup inside a node title a feature, not a bug ;-)\nWhat are your concerns?\n(Is there some text missing in your message?):\n\nFor now if I have title of my node looking something like this: \nthen I will \n. Would a new method node.setTitleSafe() help, or are you concerned about an untrusted Ajax source? Then an option {allowHtmlTitles: true} could be a solution.\n\nWhat scenario are you thinking about, and can you give some references what danger you see?\nI still think it's an important feature to allow HTML markup in the titles, and I am not planning to disallow this altogether.\n. I would agree with @markbernard: The programmer is responsible to escape the HTML, before setting it as title. Closing this for now.\n. Due to multiple requests, going to re-consider this\n. node.span is not defined for table trees:\njs\n        if(node.parent){\n            span = $(\"span.fancytree-expander\", node.span).get(0);\n        }else{\n            span = $(\"span.fancytree-statusnode-wait, span.fancytree-statusnode-error\", node.span).find(\"span.fancytree-expander\").get(0);\n        }\nI will fix this, thanks\n. please let me know if this works for you.\n. I don't think it's easy to fix, since every node is a single TR tag. So we would have to animate them separately, which doesn't look good with large numbers.\n(In a standard tree, only the outer UL is animated, which looks smooth.)\n. While a <li> may contain multiple <ul> tags (and others) in general, the semantic for Fancytree is that a <li> represents a node, and a node has one (or no) list of children.\nSo i'd say it's ok to expect this markup:\nhtml\n<div id=\"tree\">\n   <UL id=\"browser\" class=\"filetree\">\n      <LI class=\"folder\">\n         Folder 1\n         <UL>\n            <LI>Nested Folder 1\n               <UL>\n                  <LI>Subitem1</LI>\n                  <LI>Subitem2</LI>\n               </UL>\n            </LI>\n            <LI>Nested Folder 2\n               <UL>\n                  <LI>Subitem1</LI>\n                  <LI>Subitem2</LI>\n               </UL>\n            </LI>\n        </UL>\n      </LI>\n   </UL>\n</div>\n. could not reproduce that.\nWhat kind of data are you loading? ajax? what version do you use?\nBest would be a jsFiddle sample.\n. Could you please close issues, when you find a solution and describe it? This may help others and avoids unneccasry work\nthanks.\n. No sure if I understand what you are describing, but you can implement this \njs\ndragDrop: function(node, data) {\n      node.data.status = \"x\";\n}\nSee here https://github.com/mar10/fancytree/wiki/ExtDnd\n. I merged and modified a bit; could you test if the new version works for you?\n. 'click' is the basic event, that by default generates 'activate', 'deactivate, 'expand', 'select', ... events.\nSo typically you don't need to implement 'click'.\nIf you you really want to handle click directly, you can access 'data.targetType' to find out about the clicked region (and return false to prevent default handling).\n. Could you set up a jsFiddle for this?\n. simply make you CSS more specific:\ncss`\nspan.fancytree-node.errorNode .fancytree-title{\n    color: #ff0000;\n    font-weight: bold;\n}\n``\n. Sure, for example you could add a recipe here: https://github.com/mar10/fancytree/wiki/TutorialTheming\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. Hi,\nI tried it and adding this seemed to work:\n``` html\n\n\n...\n\n.sticky-wrap {\n    overflow-x: auto;\n    overflow-y: hidden;\n    position: relative;\n    margin: 3em 0;\n    width: 100%;\n}\n.sticky-wrap .sticky-thead,\n.sticky-wrap .sticky-col,\n.sticky-wrap .sticky-intersect {\n    opacity: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: all .125s ease-in-out;\n    z-index: 50;\n    width: auto; /* Prevent table from stretching to full size */\n}\n.sticky-wrap .sticky-thead {\n    box-shadow: 0 0.25em 0.1em -0.1em rgba(0,0,0,.125);\n    z-index: 100;\n    width: 100%; /* Force stretch */\n    background-color: seashell;\n}\n.sticky-wrap .sticky-intersect {\n    opacity: 1;\n    z-index: 150;\n\n}\n.sticky-wrap .sticky-intersect th {\n    background-color: #666;\n    color: #eee;\n}\n.sticky-wrap td,\n.sticky-wrap th {\n    box-sizing: border-box;\n}\n\n``\n. You could either try thedataFilteroption of $.ajax, or thepostProcess`callback of Fancytree.\n. The Wiki is WIP, so here is a sample:\njs\n            postProcess: function(event, data) {\n                logEvent(event, data);\n                // either modify the ajax response directly\n                data.response[0].title += \" - hello from postProcess\";\n                // or setup and return a new response object\n//              data.result = [{title: \"set by postProcess\"}];\n            },\n. does $.ui.fancytree.getNode(event) help?\n. The _trigger implementation of the standard Widget framework is pretty slow, so I decided to expose this as callback only. This lead to a considerable performance gain for large trees.\nIf you really need late binding, you could generate a custom event in that callback, and bind on that?\n. Removed height: 100% and added min-height: 0%for container.\n. Thanks for contributing!\n. Did you try with {map:{noExpander:\"\"}}?\nThis might work, since the extensions of the (empty) span are set to 1em.\nIf you confirm that this works for you, please add noExpander: \"\" to the default map, and I will merge.\n. thanks for contributing. I merged locally and lost your commit history; sorry.\n. Well this is not really a Fancytree topic, but you could resize the Fancytree container (i.e. the <div id='tree'> element in the resize event of the window, for example\n. I will look into this (beeing offline for some days now).\nNot so sure about 999 however, I think it should be configurable (as well as the other options like scrollSensitivity, ...)\n. Does calling node.resetLazy() or node.load(true) when a node is collapsed work for you?\n. You could set the 'expanded' property in the node definitions when initializing.\n. Can you please give some exact details how the error can be reproduced?\n. Please give some details, how the bug can be reproduced, so we can check the results.\n. Thanks for sharing this idea.\nI'd prefer a solution that is implemented in the ext-childcounter though, e.g.\njs\n    nodeRenderTitle: function(ctx, title) {\n        var node = ctx.node,\n            extOpts = ctx.options.childcounter,\n            count = (node.data.childCounter == null) ? node.countChildren(extOpts.deep) : node.data.childCounter;\nCould you check if this works for you and let me know (or create a pull request, if you like to get the credits ;-)\n. Thanks for contributing!\nSorry, but I will not accept this change as is for these reasons:\n- build breaks CI (travis checks failed)\n- ext-menu is deprecated; i recommend using standalone plugins instead (e.g. https://github.com/mar10/jquery-ui-contextmenu or others)\n- passing an array instead of a plain object for menu is non-standard for Fancytree extensions.\n  it will also break existing uses.\nCheers\nMartin\n. It seems to work here:\nhttp://wwwendt.de/tech/fancytree/demo/sample-theming.html\nCould you please give details, what you tried, and how you would improve the documentation?\n. Thanks for sharing your ideas!\n\nWouldn't it be better if filter accepted a function which gets a node and returns true/false depending on whether a node matches or not?\n\nthis is already implemented. It should be easy to implement reg.exp. this way or filter by custom properties this way.\n@markbernard: this was obviously not obvious ;-) So maybe you want to help improving the docs and/or sample?\n. Thanks!\n(I will modify a bit, to retain the original text argument version, since I think it still covers 80% of the use cases...)\n. Basically it should be enough to set/remove the 'loading' class on the nodes span element\n(I have never tried, but the internal function tree.nodeSetStatus(ctx, \"loading\") might also work)\n. This is not enough information but I would guess you forgot to include the required libraries.\n. I have not yet done this, sorry. I'd guess we need \n- Core (Core, Widget, Mouse, Position)\n- Draggable, Droppable for [ext-dnd]\n- (Maybe core effects, but I don't think so)\nPkease let me know what you find out, so we can add it to the docs...\n. Thanks for your feedback\n. does the overrideSource option help?\n(could you open a separate issue for the feature request)\nThanks\nMartin\n. Since there was no answer, I assume that the 'does not work' issue was reiolved (please open a newissue and give more details, if not).\nI renamed this issue to reflect the feature request instead.\n. I don't quite understand; can you reproduce it here?\n    http://wwwendt.de/tech/fancytree/demo/sample-ext-filter.html\n. ok, I understand, but there are no sub nodes that match 'folder' - so they are hidden.\nMaybe you expected another behavior as described in #64 ?\n. I'd say it works as designed. See also #64.\n. You could use visit(), check for node.subMatch and call node.setExpanded(true) accordingly.\nOr check for node.match and call node.makeVisible()\nSee also #394\n. ext-edit only handles editing of the title.\nIf you want to make other columns editable, you could set a custom flag (e.g. 'node.data.edit = true') call node.renderTitle(), and render <input> controls instead of text in the renderColumns event.\n. See https://github.com/mar10/fancytree/wiki/ExtTable#howto-make-a-table-scrollable\n. Using grunt-yabs\n. I couldn't reproduce this (both fiddles don't seem to wirk here).\nPlease post some code that helps to reproduce this (see /test/triage for templates)\n. ext-childcpunter is currently not compatible with the 'icon' option. This is because this creates an IMG tag instead of a SPAN. The counter badge is added inside the icon - but IMG is not allowed to have child elements.\nI was not able to reproduce the problem with ext-edit.\nHow did you enable custom icons? (please post some sample code, thanks)\n. Ok, I can reproduce that.\nA workaround could be to use CSS instead, which is more performant anyway:\ncss\n    span.fancytree-custom-icon.abc {\n        background-image: url(\"abc.png\");\n        background-position: 0 0;\n        width: 16px;\n        height: 16px;\n    }\njson\n[{\"title\": \"node1\", \"iconclass\": \"abc\", ...}]\n. Thanks for contributing and fixing errors, but this issue was already answered here: #203\n. The 'source' option accepts the standard jQuery.ajax options.\nIf you feel this is deficient, please open an issue at the jQuery project.\n. Have a look at ext-filter (see also #64). It is also possible to modify the server response in the postProcess callback.\n. It's probably a plain Table/CSS issue, not directly related to Fancytree.\nScreenshots are not enough, we need the css and html markup to see what you have tried. Why not post another triage sample?\n. I tried this (on Safari):\n\nhtml\n<!DOCTYPE html>\n<html>\n<head>\n... \n<style type=\"text/css\">\n.fancytree-container tbody tr td{\n    max-width: 300px;\n}\nspan.fancytree-node{\n    white-space: nowrap;\n    -o-text-overflow: ellipsis;\n    -ms-text-overflow: ellipsis;\n    text-overflow: ellipsis;\n    overflow: hidden;\n}\nspan.fancytree-title{\n    display: inline;\n}\n</style>\n</head>\n<body>\n<div>\n <table id=\"treetable\">\n    <colgroup> \n        <col></col>\n    </colgroup>\n    <thead>\n      <tr>\n        <th>Checking Width</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr>\n        <td></td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<script>\n    $(function () {\n      var tree = $(\"#treetable\").fancytree({\n        selectmode: 1,\n        extensions: [\"table\" ],\n        source: {url: \"../../demo/ajax-tree-plain.json\"} \n      });\n    });\n</script>\n</body>\n</html>\n. Looks good to me. If I understand correctly, you are using the table mode only to have wide selection bars. Maybe we can create theme that handles this with the basic tree...\n. I copied it and could see ypur problem, thanks. Will update #222 when I find a solution\n. Try to verify this assumption by adding logging or setting a breakpoint. \n Is the tree still loading when you submit your form?\nWhat happens, if you remove the assert?\n. Can you provide something debuggable? Best would be a triage file (look at /test/triage for samples) or a jsFiddle. Thanks...\n. Calling again would reset the whole tree plugin. An alternative might be tree.reload(). Ad 1.\nthats's because you have to wait for the nodes to be loaded, before you can visit() them.\nSee #18 \nAd 2.\nIntegers should work with the latest code. If not, could you please provide a sample that fails?\n. Started a branch for this: wide2\nEDIT:  wide3\n. Thanks, I could reproduce it and will also look into it.\n. It obviously works here: http://wwwendt.de/tech/fancytree/demo/sample-ext-filter.html, so please post a sample what is different in your application.\n. You should not need to set enableFilter directly, just call tree.applyFilter() (in the v2.0 release) or  tree.filterNodes(), tree.filterBranches() (since v2.1) and tree.clearFilter(). See here https://github.com/mar10/fancytree/wiki/ExtFilter.\nI think this demo shows everything: http://wwwendt.de/tech/fancytree/demo/sample-ext-filter.html\nOtherwise: What do you enter in the demo and what exactly do you expect to see instead?\n. Thanks for reporting \n. Does this help: ?\nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-allow-scrolling-inside-the-tree-container-while-dragging\n. Any feedback here?\n. Seems to be a known problem (solution scheduled for jQuery UI 1.11):\n- http://stackoverflow.com/a/5795852/19166\n- http://bugs.jqueryui.com/ticket/9315\n. Thanks, but this still fails the tests. See here for a guide how to use grunt to test locally, before pushing:\nhttps://github.com/mar10/fancytree/wiki/HowtoContribute#contribute-source-code\n. no problem, I will look into this the next days...\nThanks for contributing!\n. I see the issue kept nagging you, good ;-)\nI have already looked into it and came up wit this solution (did not push yet, because I have other pending changes).\nNote the last 'else' was added:\njs\n    getEventTarget: function(event){\n        var tcn = event && event.target ? event.target.className : \"\",\n            res = {node: this.getNode(event.target), type: undefined};\n        // We use a fast version of $(res.node).hasClass()\n        // See http://jsperf.com/test-for-classname/2\n        if( /\\bfancytree-title\\b/.test(tcn) ){\n            res.type = \"title\";\n        }else if( /\\bfancytree-expander\\b/.test(tcn) ){\n            res.type = (res.node.hasChildren() === false ? \"prefix\" : \"expander\");\n        }else if( /\\bfancytree-checkbox\\b/.test(tcn) || /\\bfancytree-radio\\b/.test(tcn) ){\n            res.type = \"checkbox\";\n        }else if( /\\bfancytree-icon\\b/.test(tcn) ){\n            res.type = \"icon\";\n        }else if( /\\bfancytree-node\\b/.test(tcn) ){\n            // Somewhere near the title\n            res.type = \"title\";\n        }else if( event && event.target && $(event.target).closest(\".fancytree-title\").length ) {\n            // #228: clicking an embedded element inside a title\n            res.type = \"title\";\n        }\n        return res;\n    },\nBtw. I am not so sure about this on every browser / every tree skin:\n\nThe browser event is always generated from the SPAN not the LI\n\nThe change may lead to a new behavior when nodes contain <input> tags, but a first test seems to work. Let me know what you think\nCheers\nMartin\n. Ok, if you revert the changes to fancytree.js, I can merge the test fix so you get listed as contributor.\nThanks again...\n. @ruud-altenburg the fix landed in the development version and will be release with 2.1 Changelog\n. @markbernard: the current PR seems to still include changes to fancytree.js:   https://github.com/mar10/fancytree/pull/234/files\nI meant that I would pull your changes to the test code only:\nhttps://github.com/markbernard/fancytree/commit/ddcc2a09b65a3503c2229a8d100a1f8110ddfc9b\nClosing this issue now, but feel free to re-open it if you can provide a PR\n. I guess clicking the title instead of the node is more common, so the change would make sense.\nJust wanted to give you the credits by letting you create a pull request, which would add you as a contributor - if you want to take that effort. Otherwise i simply patch it...\n. I will look into this, thanks\n. Related to #112 and can be reproduced on FF and IE (seems to work on Chrome and Safari though).\nI will add position: relative to the common CSS and see what happens...\n. @aparticka thanks for reporting this. Best would be if you could post the html sample that generates the problem for you. I would like to come up with a solution that works in all scenarios, ...\n. no problem, though rawgit.com may be more up-to-date\n. I added some explanation here: https://github.com/mar10/fancytree/wiki/ExtDnd#howto-control-scrolling-inside-the-tree-container-while-dragging\nDoes this answer/solve your issue?\n. Yes, keys are expected to be strings. The implicit expection was always so, and some code - like loadKeyPath() - did not work as expoected when keys where integers.\nThats why they are explicitly converted to strings in the constructor now - sorry if that breaks your code.\nI guess you can call parseInt before passing that to breeze queries?\n. Can you please post a debuggable sample or jsFiddle that reproduces the issue?\n. Sorry, but I need some feedback\n. I tried with 1.11.1 and the tests passed.\nCould you please give mor details...\n. This is not enough information, please post a debuggable example or jsFiddle...\n. We depracated some API Functions during the pre-release phase:\nhttps://github.com/mar10/fancytree/blob/master/CHANGELOG.md#200-5--2013-12-23\nSee here for the docs:\nhttps://github.com/mar10/fancytree/wiki/ExtDnd\n. hmm... tried with Chrome, IE and FF on Windows, seemed to Work\nhttp://wwwendt.de/tech/fancytree/demo/\nCan you try to clear the caches?\n. Yes, browsers are very proud of their caches :-/ \nIE asks you, then let's press press you a non-default button and displays a 'succesfully deleted' banner, which you have to confirm - ridiculous.\n. Thanks for sharing this.\nI am not sure how this would affect non-php servers, so I asked here: http://stackoverflow.com/questions/24043234/should-i-append-to-multiple-html-checkboxes\nto find out if we should make this configurable.\n. Thanks!\nCould you post a screenshot of the effect (the gaps)?\n(If you create a pull request for this, I will merge.)\n. Yes, I will use @lefunque 's fix, but currently I have another branch that refactores the CSS. I would like to merge this first, to prevent conflicts.\n. This feature is not finally specified and still under discussion: #12 \nFeel free to add your thoughts...\nBut you can easily workaround this with this method in the loadChildren event: http://wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#fixSelection3AfterClick\njs\n    lazyLoad: function(event, ctx) {\n        ctx.result = {url: \"ajax-sub2.json\"};\n    },\n    loadChildren: function(event, ctx) {\n        ctx.node.fixSelection3AfterClick();\n    },\n. > First of all it seems it doesn't care about the actual name/id of the tree but instead uses fk_ no matter what. \ntree.generateInput() appends a <div> tag after the tree that contains checkboxes for all selected nodes\nhtml\n<div id=\"tree\" name=\"selNodes\">\n    <ul class=\"ui-fancytree fancytree-container\" tabindex=\"0\">\n    </ul>\n    <div id=\"fancytree_result_1\" style=\"display: none;\">\n        <input type=\"radio\" name=\"ft_1_active\" value=\"node2.1\" checked=\"checked\">\n        <input type=\"checkbox\" name=\"ft_1\" value=\"node2.2\" checked=\"checked\">\n        ...\n    </div>\n</div>\nThe name is always \"ft_\" plus the tree's ID, so you should receive an array of selected (top) nodes with this name.\n\nAlso, if you have select mode 3 and use lazy loading for branches I most often get nothing at all. Sometimes if I click around in the tree and select/unselect, select again etc. I might get one of the parents actually generated. But the selected children or childrens children are never generated.\n\nIn selectMode 3, this feature uses tree.getSelectedNodes(true), so it only returns the selected top level nodes. Assuming that in this mode all child nodes are implicitly known to be selected as well (and saving bandwidth).\nThere also is a known problem, when PHP is used as a server: #245. We will fix that soon.\nThat being said: if you observe buggy behavior other than that, please post some details, so I can reproduce.\n. Wouldn't we achieve the same this way: ?\njs\n$(\"#tree\").fancytree({\n    ...\n}).on(\"mouseenter, mouseleave\", \".fancytree-title\", function(event){\n    // Add a hover handler to all node titles (using event delegation)\n    var node = $.ui.fancytree.getNode(event);\n    node.info(event.type);\n});\n. The sample binds to the container and uses delegation, so it should work for lazy nodes as well.\nI am closing this now, but please let me know, if it does not solve your problem.\n. > I owe you a beer, thank you!\nA bit early, but - mission completed :-) Thank you and cheers\n\n. If you modify child nodes using the API in selectMode 3, you should call some fix-up methods as well.\nFor example\njs\ntree.getRootNode().fixSelection3FromEndNodes();\nI added some samples here at the bottom:\nhttps://github.com/mar10/fancytree/wiki/SpecSelect\nThe selection logic is a bit of a can of worms, when combined with selectMode 3, lazy loading and persistence. If you have some ideas, feel free to add comments here: #12\nClosing this, but please let me know if it does not work for you.\n. I noticed that your change affects the skins:\n\nIt used to look like this:\n\nCan you post a sample file that reproduces the filtering problem? maybe we find a solution that doesn't break the skin paddings...\n. Ok, maybe the missing padding can be compensated by adding 1 to the node's top margin.\nI will look into this when I merge the wide2 branch, which will cause some changes to CSS anyway\n. Closed with 81fc9575b6b6036521d723a1c7b623ac50101213, sorry I could not merge you PR, because feature branch had diverged too far.\n. did you try with the latest version?\n. If '$(...)' is undefined, you probably did not include jQuery\n. node.data is a plain object that may be used to store custom data, so yes it is safe to access it directly if you have a reference of an existing node.\n. > According to standard convention of api`s, most of servers use following json structure.\nCan you give some references for this statement, please?\n. I agree that these formats make sense. They are all similar but different. Picking the data from a configurable property-name would be easy but insufficient, since the hard part is to react on the different error signals.\nI'll add a way to do that, so postProcess should become flexible enough to handle all use cases, for example:\njs\npostProcess: function(event, data) {\n  var orgResponse = data.response;\n  if( orgResponse.status === \"ok\" ) {\n    data.result = orgResponse.result;\n  } else {\n    // Signal error condition to tree loader\n    data.result = {\n      error: \"ERROR #\" + orgResponse.faultCode + \": \" + orgResponse.faultMsg\n    }\n  }\n}\n. Can you reproduce it here? If not, could please post a sample or jsFiddle, thanks\n. It's fixed in the current development code (in the /src folder) and will be released with v2.3.\nYour fiddle references the latest release (/dist folder) v2.2\n. Thanks! I currently don't maintain this extension, that was provided by 3rd party.\n(I would apply patches though, if someone sends them).\nI also think that a context menu should be not part of the tree's core, since typically you would like to have the menu functionality available on non-tree elements on the same page as well.\nInstead I would suggest to simply use any jQuery context menu plugin that supports event delegation.\n(e.g. http://plugins.jquery.com/tag/context-menu/ )\nExample here: http://wwwendt.de/tech/fancytree/demo/sample-3rd-ui-contextmenu.html\n. I tried this:\njs\nvar SOURCE = [\n    {title: \"Item 1 <a href='#'> with link</a>.\", key: \"node1\"},\n        ...\n...\n    $(\"#tree\").fancytree({\n                ...\n        source: SOURCE,\n        click: function(event, data) {\n            data.tree.debug(\"click\", event, data);\n        }\n    });\n    $(\"a\").click(function(event){\n        var node = $.ui.fancytree.getNode(event);\n        alert(\"click\" + node)\n    });\nAnd that seems to work. Can you give more details?\n. Assume solved\n. Please post questions on the new Q&A forum: https://groups.google.com/forum/#!forum/fancytree\n. Please post questions on the new Q&A forum: https://groups.google.com/forum/#!forum/fancytree\n. Please post questions on the new Q&A forum: https://groups.google.com/forum/#!forum/fancytree\n. Please post questions on the new Q&A forum: https://groups.google.com/forum/#!forum/fancytree\n. You can call tree.getNodeByKey() and node.setActive(), once you have the key.\n(General jQuery questions are better posted on the fancytree forum or stackoverflow.)\n. Currently this is not done by default, buzt easily implemented like so: \nhttps://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-recursively-load-lazy-data\n. Similar issues have been fixed with #257 and #194.\nCould you check with the latest code?\n. The issue tracker is for bus and feature requests. Please use the forum.\n. Probably related to this:\nhttp://stackoverflow.com/questions/16916711/why-does-clicking-a-drag-handle-not-steal-away-text-focus\n. I thought about modifying ext-dnd by adding a mousedown handler and set focus to the container if dragging is enabled.\nHow did you solve it?\n. Addressed by daf11c2\n. (#300 is about another problem, introduced between jQuery UI 1.10.4 and 1.11.1)\nThe reason for #270 is that jQuery UI draggable cancels its mousedown event\n[jQuery UI 1.11 - Draggable]\n``` js\nvar mouse = $.widget(\"ui.mouse\", {\n  ...\n  _mouseDown: function(event) {\n    ...\n    this.document\n      .bind( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\n      .bind( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\nevent.preventDefault();\n\nmouseHandled = true;\nreturn true;\n\n},\n```\n. I will apply the sugegsted patch, let's see what happens...\n. Can you reproduce it here?\nhttp://wwwendt.de/tech/fancytree/demo/sample-ext-filter.html\n. Does this work: http://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree.html#reload ?\n. try this:\njs\nvar tree = $(\"#tree\").fancytree(\"getTree\");\ntree.reload({\n  url: ...\n}).done(function(){\n  alert(\"reloaded\");\n});\n. getSelectedNodes() has an additoinal option to control that.\n(partial selected nodes are not 'selected', so they are not returned. But you can simply collect them with a visit() call...)\n. Yes, we should find a solution here, thanks for reporting this!\nI updated the sample: http://www.wwwendt.de/tech/fancytree/demo/sample-multiline.html and tried this CSS, which looks good in IE, FF, and Chrome except that the title is too wide::\ncss\n    span.ws-wrap span.fancytree-title {\n        white-space: normal;\n    }\n\nThis variant looks perfect on Firefox, but is not indented on IE & Chrome:\ncss\n    span.fancytree-node {\n        -moz-display: flex;\n        -webkit-display: flex;\n        -ms-display: flex;\n        display: flex;\n    }\n    span.ws-wrap span.fancytree-title {\n        white-space: normal;\n    }\n\nFinally, this variant breaks on all 3 browsers:\ncss\n    span.ws-wrap span.fancytree-title {\n        white-space: normal;\n        -moz-display: flex;\n        -webkit-display: flex;\n        -ms-display: flex;\n        display: flex;\n    }\n\nany thoughts?\n. cool :-)\n. Hi, \nthanks for your efforts!\nRequiring a <p> element for wrapped text is a good idea. \nI tried your CSS in the sample (http://www.wwwendt.de/tech/fancytree/demo/sample-multiline.html), but I did not get the expected results (currently only tested on Mac/Safari).\nThis may be because I recently changed the css a bit, in order to implement the ext-wide extension.\nThe former skin-win8 was modified, so that only the title span is highlighted (instead of the whole node span). This is required, because ext-wide stretches the title tag to get 100% width.\nThe former skin was renamed to skin-win8-n\nCould you post the CSS that works for you in sample-multiline.html?\n. thanks for sharing this.\nYour suggestion is similar to the current ext-wide implementation. I will look into it once again, when I find time...\n. thanks. Yes, that is possible. Simply set the node attributes and redraw:\njs\nvar tree = $(\"#tree\").fancytree(\"getTree\"),\n    node = tree.getNodeByKey(\"node_4.1\");\nnode.extraClasses = \"custom1\";\nnode.renderTitle();\nnode = tree.getNodeByKey(\"node_4.2\");\nnode.data.icon = \"customDoc1.gif\";\nnode.renderTitle();\n. Seems you are using old Dynatree method names. \nSee http://www.wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#toggleExpanded\n. The next release will have node,setStatus(),but  why would you use a synchronous ajax request, in the first place?\ngetChildrenSuccessHandler() should return a $.promise instead.\nAd 2:\nThere is an 'unselectable' option, but I think you are  talking about 'un-activatable'\nIm order to achieve this, simply return false in the activate event (and maybe add some CSS)\n. Which link exactly?\n. > Is anyone currently working on such?\nNot that I'm aware of, but I would certainly support such effort...\n. I am currently offline and don't know enough about the implications to decide yet.\nMaybe we should start with the easiest Solution First, but if you want to propose a branch with a distinct build step that's ok too.\nI hope I can look into it later this week\nCheers\nMartin\n. Hi, any progress so far?\n. No problem, thanks anyway.\nMay I ask for your main reasons to switch?\n. I don't understand this statement;\n\nAs far as I see, the unlink function is not implemented and the dropped node got attached to the wrong folder(level below, parent level mismatch, return FALSE)\n\nAnd why do you consider it a bug if 'local' can be dropped on 'bin'?\n. In this case you can simply return [\"before\", \"after\"] in the dragEnter event.\nSee here: https://github.com/mar10/fancytree/wiki/ExtDnd\n. Late response, I know ;-)\nCurrently we generate\n- jquery.fancytree.js\n  Latest released core library (i.e. without any extensions)\n  Extensions can be included from dist/src/...\n- jquery.fancytree.min.js\n  Same as above, minified,\n- jquery.fancytree-all.js\n  Latest released library with most extensions (uncompressed)\n- jquery.fancytree-custom.min.js\n  Latest released library with most extensions, minified and with AMD support.\n  This is what you would use for production, (maybe removing unwanted extensions)\n(I think this will change a bit some time later, e.g. single extensions will become available for AMD)\nI will update the docs...\n. Could you please verify if this is answered here: #268?\n. If you want two themes, you could add a custom class to the container and copy/modify one of standard skin CSS files to only apply only inside elements with that class. \n\nCan you explain ROW 1 and ROW 2 and possibly all rows ? \n\nsure: https://github.com/mar10/fancytree/blob/master/doc/icons_layout.ods\n\nTutorial on writing a theme from scratch will be helpful\n\nSimply modify one of the existing 'ui.fancytree.less' and 'icons.gif' files from a skin folder.\nThis should be pretty straight forward. I am not planning to write a tutorial (unless someone volunteers)\n\nAdding Custom Icon based on information defined in json response\n\nI would rather add extraClasses and add custom css to override the icons. See http://wwwendt.de/tech/fancytree/demo/sample-theming.html\nfor some examples.\n. thanks, I reproduced the problem with the error icon and fixed it (will be merged with the wide2 branch).\nBut I was not able to reproduce a problem with loading.gif; could you give some details here?\n. Thanks for reporting. The ext-wide is currently maintained in a separate branch, but I will check there when I merge.\n. Just checked with the wide2 branch: seems to work there. If you like, you could verify after I merged (probably during next 2 weeks)\n. You have to include from the wide2 branch (unreleased)\nhttps://github.com/mar10/fancytree/tree/wide2/src\n. jquery.fancytree.wide2.js is not nedded (only a backup of an old approach that will be removed)\n. Here is an example:\nhttp://wwwendt.de/tech/fancytree/test/test-ext-dnd.html\nSee also here:\nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-allow-scrolling-inside-the-tree-container-while-dragging\n. I updated the docs: \nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-control-scrolling-inside-the-tree-container-while-dragging\nI hope it is clearer now.\n. @djangosdk I don't understand your problem :-/ node.key can be any unique string that you pass with your JSON response. Fancytree does not care if you call this an ID or Key.\nIt's up to you to pass anything meaningful that is unique and stable in the backend.\nIn addition, you can pass any other field with JSON, wich then is available as node.data.foo. If you want to search for those values however, you may have to use tree.findFirst() to lookup then node first.\n@markbernard thanks for stepping in here (and in other issues)!\n. Do you get a node.click(event, data) event? \nWhat is the value of data.targetType then?\nHave a look here: https://github.com/mar10/fancytree/wiki/TutorialEvents#howto-find-out-source-and-the-clicked-region-in-a-click-handler , maybe this helps.\n. We should then also have emptyDblclick, ... \nCurrently this seems a bit of too much effort, since you can already achieve this with standard jQuery as well:\nhttp://jsfiddle.net/77drrqsm/7/\nClosing this for now, unless there are more requests for this in the future.\n. can you give details for\n\nI hope support in fancytree for unselection If you have so inclined.\n. @markbernard thanks!\n. The desired behavior for minExpandLevel > 1 is (for nodes with level <= minExpandLevel):\n- the node should always be expanded\n- expand/collapse on dblclick is disabled\n- the expander icon should be removed (top level nodes only)\n\nDynatree behaves like this:http://wwwendt.de/tech/dynatree/doc/sample-minexpand.html\nIn Fancytree currently only the expander is removed.\n(One workaround is to explicilty set 'expanded' on toplevel nodes)\n. Thats right comlumnview is still alpha.Can you reproduce it with a standard tree?\n. Hopefully fixed with dd8c546856a7d1ae7e416ec9824475da7954fcf9; could you verify (and close, if Ok)?\n. Probably #246\n. Maybe add an extra class to the expander of nodes that have children, but all of them are hidden, so CSS can be added to hide or lock.\n(Similar class colud be added to nodes that are uncollapsibel due to minExpandLevel)\n. The issue tracker is for bugs or feature requests. Please us SO or the forum for questions, thanks ;-)\n. I added a new method and updated the wiki. Hope this helps...\nhttps://github.com/mar10/fancytree/wiki/ExtEdit\n. This should be opened in a new issue \nPlease also add the (simplified) event code there. Thanks for reporting (and debugging), I will look into this.\n. Related #270, daf11c2c35270a51f29ffd58d85bda46e146b944\n. Could reproduce with jQuery UI 1.11.1 (but seems to work with 1.10.4)\n. Note that save cannot return true or false depending on the response of an Ajax write request, because this request is asynchronous!\nI will update the docs with some explanation and samples, when I find some time (handled with #299)\n. Sorry for the late reply. (I am currently refactoring a bit to make it possible to cancel saving.)\nIn my use case this was not necessary, because I typically implement a slightly different behavior:\n1. User edits title and presses enter\n2. I start t the ajax request, add a class pending to the node, and have some CSS that makes it italic and appends '...'.\n   I optimistically assume that this succeeds, so save does not return false.\n3. The input is removed and title is set to the user input (italic...)\n   (This works with ext-table, if the class is overridden by this rendering, try setting it in the close event)\n4. Ajax returns and the response callback will remove the pending class. (Normally I get the real title in the response, and setTitle() to this value in case the backend modified it).\n   In case of an error, I revert the title and issue a warning.\n. I handle this with #299\n. Thanks for contributing! I like the idea to make this configurable, but I think data.type is to general to be reserved as a class name field\nI am thinking of this alternative: #306. Would this sove your problem?\n. I don't have any information on this (and you don't give enough hints to analyze), sorry.\nIf it is critical, send me a device and I'll see what I can do ;-)\n. Did you enable debugging on the device? Any additional info you could give?\n. Maybe I can extend the syntax, so that the 'selected' argument accepts \"all\" as well...\nAs workaround, you could set tree.options.selectMode to 1 before calling this function (and reset to 3 afterwards\n. Try $('#tree').fancytree(\"option\", \"selectMode\", 1);\n. The ID is only incremented she a tree is (re)initialized. Do you really have 16 trees on your page?\nIf not, could you simply re-load a tree (tree.load()') instead of initializing it again?\n. If possible, try to avoid re-initlaizing:$(\"#tree\").fancytree({...});` will generate a new instance with tree._id incremented.\nInstead try to reload the source:\njs\nvar tree =  $(\"#tree\").fancytree(\"getTree\");\ntree.reload(newSource);\n. Ok, I see that this line\njs\n$('.inner .wrapper', this.$panel).html('').load(href, function()\nwill indeed remove the tree container (discarding the widget) and load a new container, \nSo you will have to initialize the widget again - which increments the tree._id.\nI don't know, if you really have to replace the <div id=\"tree\"> every time, but anyways I think I will add a new option 'id' to the Fancytree widget, so you can set a constant value there\n. I just noticed that generateFormElements already accepts strings as arguments, so you could pass the desired prefix here. (forgot myself ;-)\n. See here: https://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-handle-lazy-loading-in-selectmode-3\n(and here https://github.com/mar10/fancytree/wiki/SpecSelect)\nThis would solve the problem:\njs\nloadChildren: function(event, data) {\n        data.node.fixSelection3AfterClick();\n    },\n. > I've updated the project with what you showed. \nthere was a duplicate loadChildren entry below, which has to be removed.\n. I try to look into it the next days...\n. Your code didn't work as expected, because you rely on the 'select' event to be fired, which is not always the case for subnodes in select mode 3.\n(I also noticed that you are using the same key cat_33 multiple times, which is not allowed and may lead to other problems.)\nI added a new method node.visitAndLoad() that might help you. It is called like \n``` js\n, selectMode: 3\n, loadChildren: function (event, data) {\n    data.node.fixSelection3AfterClick();\n}\n, select: function (event, data) {\nvar node = data.node;\nnode.debug(\"select\");\n\nnode.debug(\"Tree.visitAndLoad...\");\nnode.visitAndLoad(function(childNode) {\n    node.debug(\"Tree.visitAndLoad... \" + childNode);\n}).done(function(){\n    node.debug(\"Tree.visitAndLoad... done.\");\n\n//        data.node.fixSelection3AfterClick();\n    var sel = data.tree.getSelectedNodes();\n    sel = $.map(sel, function(o){ return o.key; });\n    $(\"#output\").text(\"Selected: \" + sel.join(\", \"));\n});\n\n}\n```\nBut I think it would be even more efficient to let the backend return the marker list instead of reloading the whole branch. Something like\njs\n, select: function (event, data) {\n    // Get the list of selected keys (stopOnParents = true)\n    var sel = data.tree.getSelectedNodes(true);\n    sel = $.map(sel, function(o){ return o.key; });\n    // Pass list of node keys to request handler.\n    // We only need the top-nodes, since the backend can traverse all children anyway.\n    // (I'd think that 80% of the code is already there, since you already do this for child nodes)\n    $.ajax({\n        url: \"getMarkers\",\n        data:  (key list)... \n    }).done(function(response){\n        // response contains the marker data (not Fancytree nodes)\n        // update map\n    });\n}\n. Note: HTML in the title attribute is invalid!\nStill we do not escape the tooltip text before writing it to the <span title=\"TEXT\"> attribute, so it is up to the sender to make sure this is escaped, if he wants the markup to be valid HTML.\nNote that the browsers default popups do not support HTML markup anyways: tags will be escaped.\njQuery UI Tooltip also stopped supporting it starting with release 1.10. See here for a workaround:\njson\n[ {title: \"node 1.1\", \"tooltip\": \"A <b>bold</b> tooltip's text\"}, \n  ... ]\njs\n$(\"#tree\").tooltip({\n    content: function () {\n        return $(this).attr(\"title\");\n    }\n});\nA compliant way to implement HTML formatted tooltips would be to pass the content in a custom field and let the tooltip use it:\njson\n[ {title: \"node 1.1\", \"hoverInfo\": \"A <b>bold</b> tooltip's text\"}, \n  ... ]\njs\n$(\"#tree\").tooltip({\n    items: \"span.fancytree-title\",\n    content: function () {\n        var node = $.ui.fancytree.getNode(this);\n        return node.data.hoverInfo;\n    }\n});\n. Thanks. Fancytree does not really need all of jQuery UI, but anyway...\n. These are 2 issues (unrelated to the original title). Could you please separate and rename?\n. There currently is no sample for that, but it should be possible.\nIf you pass a custom class name for those types, you could simply define CSS that mimics the icons of standard skins.\njs\n        $(\"#tree\").fancytree({\n            extensions: [\"glyph\"],\n            glyph: {\n                map: {\n                    doc: \"foobar\",\n                    docOpen: \"foobar\",\n                    checkbox: \"glyphicon glyphicon-unchecked\",\n. Could not reproduce here. Can you post a fiddle or a debuggable sample?\n. There is no option for this currently. Wouldn't be very efficient to send the 'alt' text for every node of a large tree, since typically it would be the same text mostly (assuming you have thousands of nodes, but only a handful of types)\nWhat you can do is, to set this attribute in the renderNode event, depending on the node type.\n. Thanks. Have you tested your solution in a scenario with embedded grid controls: http://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html ?\n. > Are they the ability to do things like UP / DOWN / LEFT / RIGHT, TAB, Shift+TAB to navigate tree grid, but within inputs, you have normal text/highlight modifier actions?\nYes, that is what I meant\n. I you simply include gridnav and remove your fix, the problem is solved?\n. Closing it, because we have a workaround. Gridnav will probably merged into the table extension some time later anyways.\n. Answered here http://stackoverflow.com/a/25920967/19166\n. Thanks, this is a regression of #316\n. You probably have not included jQuery, jQuery UI, and/or Fancytree correctly.\n(This is not a bug report or feature request. Stackoverflow or the four are better suited for this kind of question)\n. Have a look at the examples in the demo browser.... If you get $(...).fancytree is not a function, then probably jquery.fancytree-all.min.js is not included, or it is dynamically included, but you call $(...).fancytree() before it was loaded.. You can check data.targetType \n``` js\n        click: function(event, data) {\n            if( data.targetType === \"title\" ){ ... } \n        },\n\n```\n. Would you volunteer to provide the icons? Otherwise we could fall back to some transparency\n. This is not a bug or feature request, so please use Stackoverflow or the forum.\nHint:\n\nSo, I have to search first child and add node before it\n\nexactly: use the \"before\"mode instead of \"child\" and have a look at node.getFirstChild()\n. This would be an error: reload() should discard the old data.\nPlease give more details and some sample code or jsFiddle that reproduces the problem\n. This code is used:\njs\n        if ( icon && typeof icon === \"string\" ) {\n            imageSrc = (icon.charAt(0) === \"/\") ? icon : ((opts.imagePath || \"\") + icon);\n            ares.push(\"<img src='\" + imageSrc + \"' class='fancytree-icon' alt='' />\");\nso it should be prepended if the icon name does not start with '/'\n. Please provide a sample / jsFiddle that helps to reproduce the problem.\n. Does this help?\nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-control-scrolling-inside-the-tree-container-while-dragging\n. This is the expected behvior:\njs\nvar tree = $(\":ui-fancytree\").fancytree(\"getTree\");\ntree.rootNode.getLevel() // == 0 (invisble system root)\ntree.rootNode.getFirstChild().getLevel() // == 1 (visible top level node)\nYou can drop before or over (i.a. as child of) another node. (You never get the root node as target, since you don't see it).\nIf you log node.title, node.hitMode, and node.getLevel() things may become clear...\nIf you still feel it's a bug, let me know.\n. I don't see an error.\n\nIf you drag to a any level other than root it reports correctly. \n\nFor example drop on 'Cameras' -> node = \"Cameras\", hitMode=\"over\"\n\nIf you drag to the root it reports the first folder that is level 1.\n\ndrop above 'Cameras' -> node = \"Cameras\", hitMode=\"before\"\nSo level 1 is correct.\n(You will never see node \"SystemRoor\", hitMode=\"over\")\n. The expander span could be completely transparent for leaves, but is required for alignment.\nDid you mark the leaves 'lazy'?\n. It would be easy to wrap  $(node.li).show() as node.show(), but as soon as we do this, we have to make sure that this works with ext-table, ext-filter, ext-persist, ext-counter, selectMode: 3, key navigation, and so on. This will also require some test cases. \nAlso some specification has to be done. What if you call node.hide() on the active node? Can hidden nodes be selected? And so on....\nSo I am open to this, but will put to backlog for now.\n. It probably makes sense to also support a node.hidden option and enhance the ext-filter extension.\nThis use case should be considered: #524, #522 \n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. This not a bug report or feature request, so please ask this on the forum or Stackoverflow.\nAnd maybe you should add some more context to the code sample of what you have tried so far...\n. BTW: The navigation of the demo page (http://wwwendt.de/tech/fancytree/demo/) supports this too, but without rendering <a> tags:\n``` js\n        $(\"#tree\").fancytree({\n            focus: function(event, data) {\n                var node = data.node;\n                // Auto-activate focused node after 1 second\n                if(node.data.href){\n                    node.scheduleAction(\"activate\", 1000);\n                }\n            },\n            blur: function(event, data) {\n                data.node.scheduleAction(\"cancel\");\n            },\n            activate: function(event, data){\n                var node = data.node,\n                    orgEvent = data.originalEvent;\n            if(node.data.href){\n                window.open(node.data.href, (orgEvent.ctrlKey || orgEvent.metaKey) ? \"_blank\" : node.data.target);\n            }\n        },\n        click: function(event, data){ // allow re-loads\n            var node = data.node,\n                orgEvent = data.originalEvent;\n\n            if(node.isActive() && node.data.href){\n                window.open(node.data.href, (orgEvent.ctrlKey || orgEvent.metaKey) ? \"_blank\" : node.data.target);\n            }\n        }\n    });\n\n```\n. I think this one has become obsolete now.\n. This is outside the current scope. But it should be possible to apply other jQuery UI plugins to sort, resize, or make the table header non-scrolling.\n. You can use promises in very general ways, I think. Simply resolve when the data arrives.\nBut maybe I misunderstood your request, since I am not familiar with Angular. \nIs $http async?\nCan you give some code samples?\n. I will update the wiki.\n. The next release will allow to pass this as option\njs\n$(\"#tree\").fancytree({\n  dnd: {\n    draggable: {\n      appendTo: \"body\"\n    },\n...\n})\n. Cool, thanks!\n. I missed that sorry. Thanks for contributing...\n. See #345 \n. (The 'type' attribute defaults to 'text', so it is valid to omit it, but anyways... )\n. Did you also include jquery UI?\n. You're right, the end extension uses global logging which can be controlled by\n    $.ui.fancytree.debugLevel = 1;\nMaybe I can switch to tree logging...\n. Did you close this intentionally?\n. there's node.setActive()\n(please use the forum or stack overflow to ask questions, thanks)\n. Currently I feel that this is a bit out of scope for fancytree, since 'source' accept many other formats, not just xhr. Also it can not reliably be cancelled (http://stackoverflow.com/a/4551178/19166):\n\nIf the request has already been sent to the server then the server will process the request even if we abort the request but the client will not wait for/handle the response.\n\nI think that there may be other tools to prevent this beforehand, e.g. Debounce (http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/)\n. Thanks! Could you help to set up a test scenario (a sample file or s.th.)?\n. I noticed poor performance on IE, but I couldn't reproduce the crash.\nPlease let me know, if the patch fixes it for you.\n. You probably forgot to include jQuery (UI)\n. I think he is propising an extension to the RTL sample http://wwwendt.de/tech/fancytree/demo/#sample-rtl.html\n. There is already a feature branch for this. See #227\n. This should already work. Did you try to add this to the source: {url: ..., global: false, ...} options?\n. Could you explain, which paths are wrong, and why you need to compile at all?\nOr do you have a custom skin and need to include skin-common.less?\n. Thanks for contributing, and sorry for the late response.\nI understand, that this solves your concrete problem, but the whole selection thing has many aspects, and I am a bit hesitant to implement quick-fixes.\nSee here for some thoughts on the topic: https://github.com/mar10/fancytree/wiki/SpecSelect\nI would think that simply skipping the 'update parents' part, may leave the three in an invalid state, e.g. showing the parent as 'partsel' while all children are selected (which would not be compliant with the current spec for selectMode 3).\nChanges in these algorithms should go with some discussion and explanations in the spec, samples, and test cases.\nI am closing this PR, but i am still open for improvements or suggestions on this topic.\nMaybe another selectMode, or factoring out to a separate extension.\n. Thanks, but you should tell them ;-)\n(I don't think they would consider this, however.)\n. debugLevel 0 mutes info and debug messages only. Warnings and errors are always displayed.\nThe warning is raised, becaus some yet unexpected condition was detected. If we understand, why this occurs, we may either fix it or remove the warning.\nCan you describe. how the warning may be reproduced?\n. Have you tried to set the focusOnClick option? (https://github.com/mar10/fancytree/wiki/ExtDnd#howto-prevent-ext-dnd-to-suppress-mouse-clicks). Which lib versions (jQuery, jQuery UI, and Fancytree) are you using? Could you provide a sample (jsFiddle or other)?\n. You could try something like for this\njs\n$(\"#tree\").fancytree({\n  extensions: [\"dnd\"],\n  dnd: {\n  ...\n    dragEnter: function(node, data) {\n      // Prevent dropping a node from a foreign tree\n      if(node.tree !== data.otherNode.tree){\n        return false;\n      }\n      return true;\n    },\n    ...\n  }\n});\n. Thanks for contributing!\n\nI was getting a message that targetParent was null in jquery.fancetree-all.js at line 1116.\n\nHow can the error message be reproduced?\n. Ok, I was able to reproduce it here: http://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html\nSimply use Ctrl+RIGHT to indent \"node 1.1\".\nI consider this not a bug, rather my sloppy implementation of this demo code, for example:\n``` js\n  }).on(\"nodeCommand\", function(event, data){\n    // Custom event handler that is triggered by keydown-handler and\n    // context menu:\n    var refNode, moveMode,\n      tree = $(this).fancytree(\"getTree\"),\n      node = tree.getActiveNode();\nswitch( data.cmd ) {\n...\ncase \"indent\":\n  refNode = node.getPrevSibling();\n  node.moveTo(refNode, \"child\");\n  refNode.setExpanded();\n  node.setActive();\n  break;\n\n```\n\"node 1.1.\" does not have a previous sibling, so null is returned. It is not allowed to pass null as first argument to moveTo(), so the code should be fixed like\njs\n    case \"indent\":\n      refNode = node.getPrevSibling();\n      if( refNode ) {\n        node.moveTo(refNode, \"child\");\n        refNode.setExpanded();\n        node.setActive();\n      }\n      break;\n. This is a third party lib, just included as demo and not related to Fancytree. Please direct your suggestions there: \nhttp://medialize.github.com/jQuery-contextMenu/\n. The jsdoc dependencies have been updated with 65ad7bd506df6a9607a776326463bd2a6631d99e. > Currently the way I generate some tree elements server side requires children not to be orphaned.\nShouldn't this be solved server-side (can you give some details, why this would lead to unreasonable efforts)? Closing this for now, but I am open for discussion.\n. Since there was another request: \nI am not yet convinced that an option is needed, but the question already contains the solution :)\nSimply write a custom function that does it:\njs\nfunction getSelectedNodesWithParents(tree, stopOnParents) {\n    var nodeList = [];\n    tree.visit(function(node){\n        if( node.selected ) {\n            nodeList.push(node);\n            if( stopOnParents === true ){\n                return \"skip\"; // stop processing this branch\n            }\n            // Returns parent ids as well\n            if ( node.parent.partsel && node.parent.getLevel() > 0 ) {\n                nodeList.push(node.parent);\n            }\n        }\n    });\n    return nodeList;\n}\n. Actually, persistence is based on cookies or localStorage or sessionStorage.\nIt is also possible to have server-based support, but this requires to transfer the current state to the server. This example may give an idea (but uses cookies to transport the state info): https://github.com/mar10/fancytree/wiki/ExtPersist#2-let-the-server-evaluate-the-list-of-expanded-nodes.\n. https://github.com/mar10/fancytree/releases\n. Do you mean all children have been loaded? What problem do you try to solve?\n. I am not familiar with angular, so I could use some details. Maybe you can post some code (or pseudocode) when and how you initialize Fancytree, and how you \"wrap fancytree as angular JS directive\" and \"expose the selectedNodes\".\nGenerally I would say Fancytree widget is initialized as soon as the $(selector)fancytree({...}) returns.\nThere may be an asynchronous  delay, if source was passed a URL however. Maybe you can simply pass []instead? After that, you can always call tree.reload(...)\n. I never tested that, ... will look into it.\n. Could you post a complete sample or jsFiddle that reproduces it?\n. The ext-menu extension is deprecated (was added by a contributor, but never officially supported), sorry.\nSee here http://wwwendt.de/tech/fancytree/demo/index.html#sample-ext-menu.html and here \nhttp://wwwendt.de/tech/fancytree/demo/index.html#sample-3rd-ui-contextmenu.html\n. which version of fancytree are you using?\n. see #340\n. did you close this intentionally?\nHere is a sampl: http://wwwendt.de/tech/fancytree/demo/#sample-multiline.html\nbut I think it is not perfect yet. Let me know if you have suggestions for improvements\n. Hi,\nI was going to suggest that (passing data object directly) ;-)\nThe rationale behind storing a filtered set was\n- Special properties like title have a meaning as node.title. Storing a copy as node.data.title would be distracting and wasteful \n- Allowing functions prevents plain conversion to/from JSON\nHowever, if you have a convincing use case, we could think about relaxing the $.isFunction(obj[name]) condition.\n. There's no screenshot, but I assume \ncss\n.ui-fancytree.fancytree-container { \n    border: none;\n}\n. I guess this one is closed?\n. The demos seem to work:\nhttp://wwwendt.de/tech/fancytree/demo/#sample-ext-table.html\nSure that you cleared your browser's cache?\nPlease provide some more details and/or a jsFiddle that reproduces the bug.\nThanks\n. @veron-33: thanks for reporting this.\nGonna close this, since OP did not answer yet\n. Summarizing the discussion from PR #395 \nIf we have a large tree, and slowly type a common character this may be equivalent to expand all, with no way back. So we should make it optional, or even have a separate function like expandMatches(flag) - for example using an option dict.\nWe should make it easy to support different use cases:\n- while typing in a text box the filter is applied. Either ( Depending on a checkbox?)\n  - the matches are made visible (expanded), or\n  - folders with matching folders are highlighted (not expanded), or even\n  - only counters (badge with count of matching child nodes) are displayed\n- when backspace is clicked or the search text is modified the counters and expansion state should adjust\n- ESC should reset the filter and restore the original expansion state (?)\n- all this should be possible with filterBranches and filterNodes\n- later we might extend this to support lazy trees with Ajax requests\nNot everything is required in a first implementation, but it should be possible later without breaking the API.\nAdding {expand: true} as second parameter might be a good start\n. Thanks for contributing.\nIf we have a large tree, and slowly type a common character this may be equivalent to expand all, with no way back.\nSo we should make it optional, or even have a separate function like expandMatches(flag) - what do you think?\n. I would like to make it easy to support different use cases\n- while typing in a text box the filter is applied. Either ( Depending on a checkbox?)\n  - the matches are made visible (expanded), or\n  - folders with matching folders are highlighted (not expanded), or even\n  - only counters (badge with count of matching child nodes) are displayed\n- when backspace is clicked or the search text is modified the counters and expansion state should adjust\n- ESC should reset the filter and restore the original expansion state (?)\n- all this should be possible with filterBranches and filterNodes\n- later we might extend this to support lazy trees with Ajax requests\nNot everything is required in a first implementation, but it should be possible later without breaking the API.\nAdding {expand: true} as second parameter might be a good start\n. This implementaion is too specific: closing it.\nBut #394 with a more general solution is still open.\n. I tested with the current Fancytree, and this seems to work:\nhtml\n    <link rel=\"stylesheet\" href=\"//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css\">\n    <link href=\"../src/skin-awesome/ui.fancytree.css\" rel=\"stylesheet\" type=\"text/css\">\n    <script src=\"../src/jquery.fancytree.js\" type=\"text/javascript\"></script>\n    <script src=\"../src/jquery.fancytree.glyph.js\" type=\"text/javascript\"></script>\njs\n$(\"#tree\").fancytree({\n    extensions: [\"glyph\"],\n    checkbox: true,\n    selectMode: 3,\n    glyph: {\n        map: {\n            doc: \"fa fa-file-o\",\n            docOpen: \"fa fa-file-o\",\n            checkbox: \"fa fa-square-o\",\n            checkboxSelected: \"fa fa-check-square-o\",\n            checkboxUnknown: \"fa fa-square\",\n            error: \"fa fa-warning\",\n            expanderClosed: \"fa fa-caret-right\",\n            expanderLazy: \"fa fa-angle-right\",\n            expanderOpen: \"fa fa-caret-down\",\n            folder: \"fa fa-folder-o\",\n            folderOpen: \"fa fa-folder-open-o\",\n            loading: \"fa fa-spinner fa-pulse\"\n        }\n    },\n        ...\n});\n. This is not enough information to analyze the problem, since we don't know what you are doing in the context menu and why. (The exception is raised inside jQuery.) Maybe you can set up a jsFiddle to reproduce...\n. thanks\n. You could try async: true instead. Asynchronous loading is the whole point of lazy nodes (and Ajax, by the way ;-)\n. Hello,\next-menu is no longer supported, I suggest to use this one directly:\nhttp://wwwendt.de/tech/fancytree/demo/index.html#sample-3rd-ui-contextmenu.html\nThe project site has a demo, that shows how to delay the beforeOpen event using a promise:\nhttps://github.com/mar10/jquery-ui-contextmenu#howto-modify-the-menu-using-an-asynchronous-request\n. I am sure that it's possible to implement this using the current API, which already allows to append new Nodes (http://wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#appendSibling).\nYou can also add html markup (e.g. a button) to a node title.\nAnyway, I have no plans yet to implement it as standard, see also #169.\n(I you are going to work on it, I would suggest to create a new Fancytree extension, for example ext-paging.)\n. >  but the select one does not load \nI don't understand this, sorry... there is no extension named 'select'\n. Nope, it is commented (now part of the core)\n. @pmishev , this call\njs\ntree.generateFormElements(\"cust_sel\", \"cust_act\");\nwill generate markup like this:\nhtml\n<div id=\"fancytree_result_1\" style=\"display: none;\">\n    <input type=\"checkbox\" name=\"cust_sel\" value=\"10\" checked=\"checked\">\n    <input type=\"checkbox\" name=\"cust_sel\" value=\"10_1\" checked=\"checked\">\n    <input type=\"checkbox\" name=\"cust_sel\" value=\"10_1_1\" checked=\"checked\">\n    <input type=\"checkbox\" name=\"cust_sel\" value=\"10_1_2\" checked=\"checked\">\n    <input type=\"radio\" name=\"cust_act\" value=\"10_1\" checked=\"checked\">\n</div>\nI don't think there is a need to have separate names for it, since the checkboxes are identified by the value attributes.\n. Thanks. (The first fix #402 is not yet released.)\n. Passing {... , \"icon\": ... } should be equivalent to setting data-icon in the markup.\nAn alternative would be to set {..., \"addClass\": \"custom1\", ...} and s.th. like this:\ncss\nspan.fancytree-node.custom1 > span.fancytree-icon {\n  background-image: url(\"skin-custom/customDoc2.gif\");\n  background-position: 0 0;\n}\nSee here for some examples:\nhttp://wwwendt.de/tech/fancytree/demo/#sample-theming.html\nWould this work for you?\n. I think it is mentioned here, but maybe not clear or obvious enough:\nhttps://github.com/mar10/fancytree/wiki/TutorialLoadData\n. You are probably looking for the 'save' event.\nSee here for some information:\nhttps://github.com/mar10/fancytree/wiki/ExtEdit\n. I think loading.gif is only missing from the awesome and bootstrap skin folders.\n'ltError.gif' is not referencerd at all (except for a comment)\nCan you confirm that?\n. i consider this closed(?)\n. @offtopic: i received a notification; did you remove that comment?. Ahh, thanks. GH should display a hint about deleted comments, when the link is clicked from a notification mail.... Can you debug this a bit more and give details or set aup a jsFiddle?\n. You could try the iconClass option:\nSee #306\n. I couldn't reproduce this, the setTitle() call should remove the additional class:\njs\n    if( eventData.save ) {\n        node.setTitle( escapeHtml(newVal) );\n        // $(node.span).removeClass(\"fancytree-edit-new\");\n        node.setFocus();\nDoes this still happen with the latest code? What settings are you using, could you give some sample code or jsFiddle?\n. I suggest you habe a look ath the loadKeyPath()method, which was added to solve such problems\n. See #171: I consider html in node titles a feature, not a bug. The programmer is responsible to escape the HTML, before setting it as title if it comes from an untrusted/external source. \n. > If you click anywhere on the node's row, the entire node is then collapsed, whether you pressed the Expander or simply clicked somewhere on the node's row.\nThis is strange. Can you set up a sample (e.g. jsFiddle) that reproduces this?\n. It seems to be a recursive load, i.e. loading nodes while the same node has a pending load request.\nreload.done() is triggered after the tree data was loaded, so it is valid to trigger loadKeyPath there. \nHowever you already call the async loadKeyPath in the \u00ecnit event (which is fired on init and on tree-reload).\nMaybe you can avoid one of both calls?\n. Could you suggest a pull request?\n. That would be a nice feature.\nCurrently all events are at tree-level, so I could only think of s.th. like a 'modify' event, that receives additional info like node, type (create, update, delete), and maybe additional data like a dict of modified field values.\nAlso, it would only catch changes that are generated by API functions like node.setTitle(), node.moveTo(), remove(), addChildren, etc.\nA node.title = \"x\"; node.render(); would go unnoticed.\nThere would be potentially a lot of events, when the tree is initialised, or a lazy load requests returns, which could impact performance.\nCan you provide some concrete use cases for your request?\n. Thanks.\n(Btw: i would advise against binding to separate elements. UC1 and UC2 could be solved better using event delegation.)\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. As a first step we could implement a modifyChild event, which passes\n- operation (remove, add, order, rename, data, ...)\n- parent node (may be the invisible system root)\n- modified node (only for rename and single node 'add' etc., but not always available)\n- optional extra data (for example previous title?)\nSince some operations (order, load) do not have one single meaningful context node, the event is fired for the parent nodes.\nFancytree could trigger this on \n- node.addChildren() and related methods\n- node.fromDict()\n- node.load()\n- node.moveTo() (either 'remove'+'add' or 'move', depending if parent node is identical)\n- node.remove() and related methods\n- node.setTitle()\n- node.sortChildren() ?? only if order was really changed\n- 'ext-edit' on save\n- tree.applyPatch()\n- tree.clear()\n- tree.reload()\nAlso a method parentNode.triggerModify(operation, [node], [extra]) will allow to trigger this event if Fancytree is not aware of it, e.g. when node.data properties have been changed directly.\n- Performance is an issue. We should not fire lots of events on load, for example\n- The current event removeNode should be removed and replaced by modifyChild('remove')\n- modify handler is a good place to call parentNode.sortChildren(), but this may fire modify('sort', ...)?\n. I haven't tested, but looking at the code I would think that deleting a single node should pass the childNode, but when all children of a parent are deleted, null is passed (instead of calling this method once for each child).\nWhat operation is triggering the \"remove\" event in your scenario?. No problem :) The reasoning was, that removing a nested branch might cause hundredths or thousands of single node removal events, wich would be a performance concern, especially if no one is listening. If there is an important use case that I am missing, let me know. Maybe this could be solved in another way.. Thanks!\n. Note that this is open source.\nYou could invest even a bit more of your precious time and contribute the corrections as a pull request if you find errors;-)\n. Reporting issues is a kind of contribution, so thank you for that!\nIn my comment I was referring to \n\nThis turned out to cost me quite a bit of time. I hope there aren't other documentation errors like this.\n\nSome people invested quite a bit of time in this project, and I assume you are using it because it saves you some time as well? \n<not snarky> You may hope that there are no more errors, or you may help to find and fix them.\nThat's what Open Source is about.\n. You are right: currently, the overrideSource option only considers nodes that have been selected by the user and thus are persisted in the cookie.\nIn this case, a node will be selected in the reloaded tree, even if the Ajax response contains selected: false.\nIt will not work as you expect, if the user deselects a previously selected node, because this fact is not stored in the cookie: the deselected keys are simply removed from the cookie, and cannot be distinguisehd from nodes that where initially deselected.\nPersistence for selection will work best, if the Ajax data does not contain preselected nodes.\nI will update the docs accordingly.\n. Cookies are simply headers that can be set server-side, so I'd say it is possible.\nMake sure to set the 'store' option to \"cookie\"\n. Sorry, but this is not enough information to investigate, at least for me, since I don't use backbone.\nMaybe this helps: http://stackoverflow.com/questions/26016054/fancytree-and-backbone\n. Thanks. Could you please check with the recent development code (see #405)\n. See #116 \n. Thanks for reporting. I just added the note as a reference for myself when I find time to look into it.\n. Could you give some details (configuration, browser, and steps) to reproduce the problem?\n. Thanks. I did try with safari, which is WebKit-based like chrome. This might explain why I did not see the error. I go and debug it on a windows box the next days.\n. Seems to be some kind of race condition (also affected by the presence of an alert box).\nI don't think that simply removing the blur-handler will solve it, because then editEnd would not be called when the user uses TAB to finish editing. Probably need to set some guard flag...\n. Thanks for your suggestion, but I don't think this will get implemented, since there already is an easy way to achieve this using CSS:\ncs\n.fancytree-container {\n    height: 100%;\n    width: 100%;\n    border: none;\n    ...\n}\nFollowing The Zen of Python:\n\nThere should be one-- and preferably only one --obvious way to do it.\n. cool thanks!\n. Please use stackoverflow to ask questions \nThis tracker is for bugs and feature requests \nThank you \n. Have a look at the filer extension. You could check for \"node.isSelected()' in the filter callback.\n. Interesting question, I will look into it. Could you post this on Stackoverflow (and leave a link here), which will make it more accessible to other developers.\nThanks\n. cool. I also played around a bit and came up with this:\nthe recommended way to tweak input is postProcess. See also the docs\n\nNote that this callback only fires for ajax requests, not if plain objects are passed to source, so it won't work in your fiddle.\nThis sample also assumes that sub-tasks appear after their parents.\n``` js\nfunction convertData(childList) {\n    var parent,\n          nodeMap = {};\nif( childList.kind === \"tasks#tasks\" ) {\n    childList = childList.items;\n}\nreturn $.map(childList, function(c){\n    c.key = c.id;\n    delete c.id;\n    nodeMap[c.key] = c;\n    // Check if c is a child node\n    if( c.parent ) {\n        // add c to `children`array of parent node\n        parent = nodeMap[c.parent];\n        if( parent.children ) {\n            parent.children.push(c);\n        } else {\n            parent.children = [c];\n        }\n        // remove c from childList\n        return null;\n    }\n    // keep top-level nodes\n    return c;\n});\n\n}\n// Initialize Fancytree\n$(\"#tree\").fancytree({\n    source: {url: \"test-issue-431-googleapi.json\"},\n    postProcess: function(event, data){\n        data.result = convertData(data.response);\n    }\n});\n```\n. Then you simply could collect all node references before you traverse the hierarchy. Also sort all child lists as a last step:\n``` js\nfunction convertData(childList) {\n    var parent,\n        nodeMap = {};\nif( childList.kind === \"tasks#tasks\" ) {\n    childList = childList.items;\n}\n// Pass 1: store all tasks in reference map\n$.each(childList, function(i, c){\n    nodeMap[c.id] = c;\n});\n// Pass 2: adjust fields and fix child structure\nchildList = $.map(childList, function(c){\n    // Rename 'key' to 'id'\n    c.key = c.id;\n    delete c.id;\n    // Set checkbox for completed tasks\n    c.selected = (c.status === \"completed\");\n    // Check if c is a child node\n    if( c.parent ) {\n        // add c to `children`array of parent node\n        parent = nodeMap[c.parent];\n        if( parent.children ) {\n            parent.children.push(c);\n        } else {\n            parent.children = [c];\n        }\n        // remove c from childList\n        return null;\n    }\n    // keep top-level nodes\n    return c;\n});\n// Pass 3: sort chldren by 'position'\n$.each(childList, function(i, c){\n    if( c.children && c.children.length > 1 ) {\n        c.children.sort(function(a, b){\n            return ((a.position < b.position) ? -1 : ((a.position > b.position) ? 1 : 0));\n        });\n    }\n});\nreturn childList;\n\n}\n// Initialize Fancytree\n$(\"#tree\").fancytree({\n    checkbox: true,\n    source: {url: \"test-issue-431-googleapi.json\"},\n    postProcess: function(event, data){\n        data.result = convertData(data.response);\n    }\n});\n```\n. Please use stackoverflow for questions. The issue tracker is for bug and feature requests. \nThanks\n. see #436\n. Thanks, I will consider this.\nSome remarks though:\nI don't think that hidden headers should result in missing body columns:\nyou may want to render data in invisible body columns and make them visible on demand.\nAlso, the init code could be optimized by checking if the column count has changed. (And should share code with the init method.)\n. The init code has changed a bit since may 2015:\nThe row template (tree.rowFragment) is now derived from <tbody><tr> if present (<thead><tr> is only used as a fallback).\nThis allows to add static html content to the template, such as <input> elements or class attributes, which may improve rendering performance.\nSee also ExtTable for details.\nSo now you can handle table layout changes like this \n``` js\n// For example append a header column\n$(\"#tree thead tr\").append(\"New\");\n// Update the row template accordingly (available as tree.rowFragment)\n$(\">tr\", tree.rowFragment).append(\"\");\n// Redraw all\ntree.render(true);\n```\n(Note: tree.render(true) had an issue #647 that was fixed in version 2.20 )\n. Duplicate keys are not allowed for different reasons, consider using the ext-clones extension.\n. No, that's not to be expected (except for '+' or LEFT keys)\nPlease create a jsFiddle or similar if you think you found a bug\nThanks\n. Maybe this helps: https://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-handle-lazy-loading-in-selectmode-3\n(see also https://github.com/mar10/fancytree/wiki/SpecSelect for details)\n. Could you make this available as jsFiddle or similar?\n. QUnit 2.0 dropped support for IE6-8 so I revert the updated QUnit libs to the latest 1.x for now.\nThe refactoring to the current assert paradigm should make it easy however, to update to 2.x later again.\nAnother blocker was that the composite plugin is not yet officially available, although th PR seemed to work: JamesMGreene/qunit-composite#22 \n. Closing this, since the test suite is compatible with QUnit 2.0 now, so we could replace the library any time. But there is no benefit in dropping IE 6-8 compatibility right now\n. Thanks, this was fixed with #445\n. See here for the spec: https://github.com/mar10/fancytree/wiki/SpecSelect\nIf you feel that you found a bug, please set up a jsFiddle that helps us debuggin it.\n. It would probably be better to rename the node option to node.data.iconClass, especially because there is a tree callback option iconClass (uppercase C).\nBut that might break existing installations. AFAIK, this would also require additional effort, to make <span data-iconclass=\"...\"> work, since data attributes are always lowercase.\nSo for now, I will only update the documentation. \n. This seems not to be related to ext-glyph, but also happens with the Win-XP theme.\nRemoving the last child leaves the expanded flag unchanged, which is then (correctly) displayed with the associated icon/glyph.\nSo a better approach would probably be to reset the expanded status, when the last node is removed.\nI edit the issue title accordingly.\nStill I am currently not 100% sure, that there might be use cases where we want to treat 'expandable' independently from 'currently having children', i.e. it may be desirably to expand/collapse empty folders(?)\n. Interesting site to discuss those questions, btw. Here my 2ct.\nI think in general Fancytree should make different scenarios possible. \nIt is already possible to call setExpanded(false) manually, when the last node is removed.\nAuto-collapsing, when the last child is removed would introduce some 'magic' that is also unbalanced (would you expect to auto-expand when the first node is added?)\nAnyway,the current implementation already adds/removes the expander icon as most users would expect, so I tend to add auto-collapsing as well. And maybe add some optional configuration later.\n. > that maintains the folder icon\nThe folder icon remains unchanged, independently of the number of children. In default mode it depends on the folder status, but can be customized using the icon option. In many cases (like Windows File Explorer) this is a good visual clue for users, so they now they can drop files there.\nDid you mean 'that maintains the expander icon' ? No, there is currently no such option. (You may open a new issue for this, and let's see how community feedback is.)\n. Is this reproducible on the example pages? If not, it might be related to the function-source. Could you create a sample, e.g. jsFiddle, that helps to debug it?\n. Does it depend on tabbable, titlesTabbable option? Or on the dnd plugin being enabled (or its focusOnClick option)?\n. sorry, what I meant is: does the problem depend on these settings, i.e. does the problem disappear if you change them?\n. No there isn'T, but you could do $(node.span).has(\"i.fa\") or something like that.\n. Yes, alas I see it does not seem to work, probably because of the mouse event handling that Fancytree applies.\nThe official way to edit node titles is to use the edit extension, would that work for you?\n(Maybe sometime later this the ext-edit extension could get an option to use contenteditable instead of <input> elements.)\n. Even if contenteditable would work in your fiddle, there still should be some support for input validation and saving changes to the server, I guess.\nSo if you must get it to work, you might copy the ext-edit plugin into a new one ext-contentedittable and modify it to use that attribute instead of <input>. If it works well, we might add it to the project.\n. If you really want to do it client-side, this may give an idea: https://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-load-data-from-a-flat-parent-referencing-list\nBut I would suggest to do the conversion on the server (similar algorithm) and send Fancytree compatible JSON to the browser.\nThis is rather a general programming question, so you could try stack overflow if you are stuck.\n. See here https://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-recursively-load-lazy-data\n. The childcounter extension is only meant as a demo for making extensions in general:\n    http://wwwendt.de/tech/fancytree/doc/annotated-src/jquery.fancytree.childcounter.html\nbut should be easy to modify, for example by using node.visit() to count only nodes with special properties, e.g. !node.isFolder().\n. You found a bug. I will fixt that, thanks.\nBut it may provide better usability if you are hiding the expander Icon (i.e. not set lazy to true) for nodes that do not have lazy children.\n. thanks, I'll give it a try...\n. Have you tried to return an empty list: [] ?\n. Btw.: if I understand correctly, you get this error when you try to expand a node that has no children.\nFrom a usability point of view, it might be better if those nodes don't even have the lazy flag set. This will prevent users from clicking the lazy expander just to find out it's empty...\n. You have autoCollapse set to true, which collapses all siblings, when a folder expands. Setting it to false should fix your problem.\n. Dropping a node between two siblings like this seems to work:\n\nDropping it directly above itself is considered a void operation, and simply discarded.\nIn this case, it seems that there is a small gap / nowhere land between two adjacent siblings:\n\n. The codepen sample seems to be gone, and I am not able to repdouce it with a current Chrome browser on Windows 10.\nCan you confirm this is solved?. Thanks for the feedback!. The tree.render(true, true) method should create markup even for hidden nodes, but seems to have a bug. Will try to fix...\n. You are right, this is currently missing.\nI am reworking the bootstrap css at the moment in a separate branch.\nAs a workaround, you can add your fixing CSS after the Fancytree bootstrap theme (don't modify the Fancytree css files!)\n(If you can offer some nice css, I could integrate it into the standard code)\n. There might be related changes like #18 or #293.\nI am not sure what you mean by \n\nit now automatically lazy loads the root node if there is only one\n\nbut an empty node with lazy and expanded flags set, should now load its chldren automatically.\n. There was a change in 2.0.0-8. Thanks for the follow-up\n. beforeExpand is also sent before nodes are collapsed. Use data.node.isExpanded() to distinguish and return false to prevent.\n. please be (much) more specific:\nhttps://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues\n. Basically you can add any html tags, for example <br>, to format you node titles.\nSome examples here: http://wwwendt.de/tech/fancytree/demo/#sample-multiline.html\nThe rest is css...\n. Yes, Fancytree operates aynchrounously by default\n. A select all Command can easily be implemented using the node.visit() method, combined with calls to node.setSelected()\n. (see also #419)\n. The contextmenu extension (you are using this) is deprecated in favor of 3rd-party plugins such as https://github.com/mar10/jquery-ui-contextmenu\n. focus() only works for elements that are tabbable, e.g. the container, or the title spans (if titlesTabbable option is set), or embedded input controls.\nAnyway, refNode.setFocus() should work.\nCan you set up a jsFiddle or something more debuggable?\n. cool, thanks for reporting the fix.\n. You can traverse the tree using tree.visit(...) and test each node using node.hasChildren(), for example (and then add matching nodes to a list...).\n. These functiios are part of ext-clones: https://github.com/mar10/fancytree/wiki/ExtClones\n. Does it solve your problem, when you use the appendTo option instead of position: inherit?\njs\n$(\"#tree\").fancytree({\n  extensions: [\"dnd\", \"glyph\", \"wide\"],\n  dnd: {\n    draggable: {\n      appendTo: \"body\", // Helper parent (defaults to tree.$container)\n      ...\n. Does this still occur with the (yet unreleased) changes to the CSS from 2015-07-31?\n. Assume fixed\n. This is a general Javascript / Browser problem. \nThe Fancytree click and dblclick events are simply generated when the browser generates them. \nSearch the web for workarounds, for example http://stackoverflow.com/questions/6330431/jquery-bind-double-click-and-single-click-separately/7845282#7845282\n. A more performant (and working) way would be to call node.renderTitle() instead.\n(Also node.parent.render(true) or even tree.render(true) would work, but that would be overkill.)\nAnyway the current behavior for node.render() seems to be buggy - thanks for reporting.\n. I couldn't see a buggy behavior in your demo. Which nodes exactly do you select, what do you expect to see as result, and what do you get?\n. This works as designed:\nthe true flag returns top level nodes only, if all children are selected:\nthis is because in select mode 3, if a node is selected, you can assume that all sub nodes are selected as well, so there is no need to transfer them.\nTry selecting all children of 'images5' to see what I mean.\n. I am not aware of a bug related to the bootstrap theme.\nHowever a know quirk is related to the dnd extension:\nThe jQuery draggable feature (which is used by Fancytree) 'eats' mousedown events (#270).\nSo maybe the focusOnClick: true option of the dnd extension solves your problem?\nSee also https://github.com/mar10/fancytree/wiki/ExtDnd#howto-prevent-ext-dnd-to-suppress-mouse-clicks\n. Issue #449 introduced this patch: https://github.com/mar10/fancytree/commit/8f8d22216f8237ed6380d125e0f95b5e5092a38f\nso the parent should already be collapsed, when the last child is removed.\nMaybe removeChildren or resetLazy help.\nWhat version are you using? Could you set up a jsFiddle?\n. When you remove \"node 1.1\" and \"node 1.2\"  in this example using the context menu:\nhttp://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html\nthe expander icon is removed from \"node 1\".\nWhat is different in your case?\n. Still not able to reproduce it.\nCould you send a debuggable sample code or set up a jsFiddle?\n. Maybe related to #605 \n. Thanks!\n. Generally, Fancytree can handle thousands of nodes:\nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html\nBut browsers slow down when those nodes are rendered, i.e. nodes are expanded and visible, so that many DOM elements are created.\nIt is also possible, that the renderColumns callback causes the problem (how does performance change if that callback does nothing?)\nIf you set up a jsFiddle I could take a look.\n. Ok.\nYou should never really need synchronous Ajax requests, since that will ruin performance almost always.\nI don't think you need async Ajax requests either: simply pass the additional data (value and type of the input fields) with the JSON data of your main load request, and then access it in your renderColumn event...\n. No problem. Your description and fiddle helped to fix it. Thanks for contributing!\n. This is explained here:\nhttp://wwwendt.de/tech/fancytree/doc/jsdoc/global.html#FancytreeEvents\nAnd https://github.com/mar10/fancytree/wiki/TutorialEvents\n. Have a look at the 'iconClass' event\n\nAllows to override the class names added to the data.node icon markup to define custom icons or glyphs (separate with space, e.g. \"ui-icon ui-icon-heart\").\n. If a node is marked 'lazy', its status is considered 'not-yet-loaded' as long as the children property is null or undefined. Pass an empty array ([]) to mark the node as leaf. \n(Or - for improved usablilty - don't mark nodes lazy in the first place, if they don't have children.)\n. Could you set up something debuggable, like a jsFiddle?\n. > However, in my case(little different from fiddle) after lazy load, I don't add the result of ajax in data.result. Instead, I use addChildren(ajaxResult) to add nodes on the lazy node. This is particularly done for a use case.\n\nLazy load expects the data.result approach, so addChildren is not officially supported. What 'use case' do you think makes it neccesary?\nAlso: Could you tweak the fiddle, so that the problem appears? (and strip down the number of nodes a bit)\nLooking at your fiddle, I found two issues that are probably unrelated:\n- You include two themes, so one connector is missing\n\n  this is not supported, but if you suggest a smart change to css, i might include it\n- You initialize nodes with lazy: true and children: [].\n  If a node is lazy, you should pass null for the children or omit that proprty entirely.\n  The next patch of Fancytree will consider lazy nodes with a zero-length child list as 'loaded leaf nodes'\n. Hmm... I can confirm this effect for IE 11. It simply doesn't trigger the click event handler. I was not able yet to reproduce it with a simplified HTML markup though,\n. http://plnkr.co/edit/ycWFvD?p=preview\nhttp://plnkr.co/edit/AKCNQpMKD5mNiSVACvdw?p=preview\n. Reason seems to be that mousedown triggers ext-filter nodeRenderStatus() if \n\nthe tree was not focused before (i.e. mousedown generates a focusin event)\nand a filter is active\n\nThis will replace the node markup, which confuses the browser, so the following mouseup will not generate a click event.\nSeems to be a regression of #789 . You can pass false with the icon option of those child nodes.\n(Please use Stackoverflow for questions in the future).\n. Issue tracker is for bug reports and feature requests, could you please use Stack Overflow for questions.\n. For the same reason that I have the 'invalid' label: for classification ;-)\nSeriously: SO is a much better platform for asking and answering questions that might be relevant for other users.\n. Another option would be this:\njs\nvar node = $(\"#tree\").fancytree(\"getActiveNode\");\nnode.editCreateNode(\"after\", {\n    title: \"Node title\",\n    folder: true\n});\n. Please use Stackoverflow for questions, since this is a much better platform for Q&A \n. Seems to work here: http://plnkr.co/edit/v8e1PN?p=preview\n(I did not add CSS for the badges)\nOf course, the counter cannot be displayed for lazy folders, before the children have been loaded, but you did not expect that, did you?\n. Ok, I see.\nA workaround is to redraw the branch in this case:\njs\n      loadChildren: function(event, data) {\n        var node = data.node;\n        // Update counter badges for current branch\n        if( data.options.childcounter.deep && !node.isRoot() && !node.isTopLevel() ) {\n          node.getParentList()[0].render(true);\n        }\n      }\n(I updated the Plunk.)\n. You can now update the counters after new nodes have been loaded like so:\njs\n    loadChildren: function(event, data) {\n        // Update node and parent counters after lazy loading\n        data.node.updateCounters();\n    }\n. As you suggest, sending the selected child nodes with the original root response is far more efficient than flooding the server with additional requests, so I would not see it as a workaround only ;-) This is typically straight forward to implement using a plain recursion, since the code to get children is already there.\nAnyway, an alternative might be to collect the keys in your visit loop, then send them as ajax request and add the resulting list of child-lists when the response arrives.\nThis is not yet implemented, but you could have a look at applyPatch and  http://www.wwwendt.de/tech/fancytree/doc/jsdoc/global.html#NodePatch to get an idea.\n. There is no event loop and how could Fancytree determine which node your application considers to 'need to be updated'?\nAnyway, I guess it is easy to implement your specific requirements using the existing API as I suggested above.\n. The left navigation pane of the example browser shows how this could be done.\nIn this case we don't have an ajax request, but we open a URL in the neighbor frame.\nBut you will get the idea, basically:\n``` js\n$(\"#tree\").fancytree({\n    autoActivate: false, // we use scheduleAction()\n    focus: function(event, data) {\n        var node = data.node;\n        // Auto-activate focused node after 1 second\n        if(node.data.href){\n            node.scheduleAction(\"activate\", 1000);\n        }\n    },\n    blur: function(event, data) {\n        data.node.scheduleAction(\"cancel\");\n    },\n    activate: function(event, data){\n        var node = data.node,\n            orgEvent = data.originalEvent || {};\n    if(node.data.href){\n        window.open(node.data.href, (orgEvent.ctrlKey || orgEvent.metaKey) ? \"_blank\" : node.data.target);\n    }\n},\nclick: function(event, data){ // allow re-loads\n    var node = data.node,\n        orgEvent = data.originalEvent;\n\n    if(node.isActive() && node.data.href){\n        window.open(node.data.href, (orgEvent.ctrlKey || orgEvent.metaKey) ? \"_blank\" : node.data.target);\n    }\n}\n\n});\n``\n. It adds an ID attribute to the` element, as expected:\nhtml\n<li id=\"pre-_6\" class=\"\">\n  <span class=\"fancytree-node fancytree-exp-n fancytree-ico-c\">\n    <span class=\"fancytree-expander \"></span>\n    <span class=\"fancytree-custom-icon gi gi-file cat-glyph-size ft-file\"></span>\n    <span class=\"fancytree-title\">Subnode 2.1</span>\n  </span>\n</li>\n. Seems to work here: http://plnkr.co/edit/0B1oeA?p=preview\n. The test and benchmark scripts contain something like this, but I don't plan to add this as an official function. It is simply outside the scope of this project, sorry.\n. thanks!\n. Sorry guys, I did not find the time to look into this so far.\n\nI've set a subnode to active:true and focus:true. In the options of the FancyTree init I've set activeVisible:true. \n\nI think users can expect that this 'simply works', so I will reopen this issue\n. A node marked 'active' should now be made visible on init, if 'activeVisible' option is enabled.\n(Focus is not set however, so this still would require custom code in the init event.)\n. Fancytree does not modify the table css directly, so I'd say this is a general CSS quersion, unrelated to this plugin.\nStackoverflow may be a better place to ask this (for a general table, not Fancytree)\n. Thanks for reporting this.\nI'd say the default filter matcher is not compatible with HTML-formatted titles.\nThis would require some HTML parsing, and could be solved by passing a custom callback to the filterNode() method.\nIf you - or someone else - come up with a general example, we can add it to the recipes: https://github.com/mar10/fancytree/wiki/ExtFilter\n(or if it appears to be really robust, eventually add it to the core).\nIf we have a solution there, we might also extend the highlight option to accept a custom callback as well, since simply wrapping this in <mark> tags will result in invalid markup: \n<<mark>b</mark>>html</b>\n. cool if it works for you ;-)\nFor a general solution I'd say we would need an approach that will prevent matching the markup parts.\nThat means that the matcher function does not simply parse the node.title string, but ignores HTML tags like <span> or </b>. This means that we need a more sophisticated regular expression instead of the current simple substring matching. Or we store a plain node title (i.e. with all tags removed) version, that is used for matching.\nThis will be even more difficult, if combined with the fuzzy option.\nFor applying the highlight option, the matched regions must be merged into the original titles (i.e. the titles with tags).\nThis might be possible, but I don't think it is high priority now.\nWill close this issue, until someone provides a general solution.\n. That looks promising, thanks!\nThere is already  $.ui.fancytree.unescapeHtml(), and I think we should call it only once.\n(also need to test performance impact...)\nIt might also still lead to unexpected behavior, if <input> or similar markup is contained.\nSo maybe it should be an opt-in option.\n. Does the strip() function that luk156 proposed work better?\n. Thanks!\n. The error message indicates, that are returning an object (instead of a child list). Is that correct?\nIn that case, that response object must contain a children property with all top level nodes (All other properties are added to tree.data.)\nHowever, that does not explain why $.ajax would behave otherwise than passing the request options, and I cannot reproduce that behavior here.\nCould you give some more information please:\nwhat jQuery version are you using?\nwhat browser version?\nwhat exactly is your request returning?\nwhat is the content of the childrenresponse, if you set a breakpoint there:\n``` js\n        return $.when(source).done(function(children){\n            var metaData;\n        if( $.isPlainObject(children) ){\n\n``\n. It seems that you are returning invalid data in the$.ajaxresponse.\nIt must either be an array of node objects as [described here](https://github.com/mar10/fancytree/wiki/TutorialLoadData), or an object that contains achildrenproperty that is formatted as such a valid list.\nSincepostProcessis not called in this syntax, you should send valid data, or try to convert in thedataFiltercallback of$.ajax.\n. Thanks, that may be useful. Is there a concrete use-case? Should we add a way to control what kind of status (select, expand, active) is / is not restored?\n. Probably the same time zone (I am located near Hamburg) but definitely not the same climate zone (had some snow today...)\nI think I am going to merge your PR, after I finished the current refactorings.\nThanks for contributing.\n. See also #457 for a related issue.\nI assume you are using the table extension? I cannot reproduce it here; which version are you using? Can you set up  a jsFiddle; Plunker or other sample?\n. I add your use case to issue #335\n. Could you give more details or set up an example (https://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues)?\n. Thanks for your feedback \n. did you try with the lastest version of Fancytree?. Does theleavesOnly` option work for you? \n(see https://github.com/mar10/fancytree/wiki/ExtFilter)\n. > The folders (with the mode \"hidden\") are actually \"dimm\" when there is a filter which is applied (this would be more natural that the color remains the same).\nThis is by design, but if you prefer other colors simply add some custom CSS like\ncss\n.fancytree-ext-filter-hide span.fancytree-node.fancytree-submatch span.fancytree-title {\n    color: #000;\n}\n\nThe counter is colliding with another extension, childCounter. Even when saying counter: false, the css is overwriting the color. Also the counter of Ext-Filter is not counting properly, or at least behaving differently than childCounter: sub folders are ignored for ext-filter, while childCounter is counting sub folders. \n\next-filter should count all matched subnodes, while ext-childcounter counts all descendants.\n(It's also possible set node.data.childCounter = 7; to display a different value.)\nIf you like to propose a new feature or behavior, please open a separate issue, and explain detailed what use case you have in mind (https://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues).\n. Sorry, but this is not enough information, please see here:\nhttps://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues\n. Works as designed: the child nodes are hidden, because they don't match the \"Fold\" pattern.\nYou probably want to use tree.filterBranches() instead of tree.filterNodes()\n(Try the [Filter active branch] button in the above demo)\n. What code are you using to define the custom icon?\n(Note: The next release v2.14 will have a slightly different syntax but you may try with that version as well)\n. Closing for now (let me know if the problem still occurs)\n. Could you please give some details, when this problem occurs, i.e. what is the tree structure when you expand?\n(I would like to reproduce the error before I apply a fix.)\nThanks!\n. The html is not correct: the nested ul should be inside the li tag.\n. You are right, the documentation already describes v2.14 which will be released shortly.\nUntil 2.13 you should use icons and iconclass options (see also https://github.com/mar10/fancytree/wiki/TutorialTheming )\nSorry for the confusion.\n. Having a return; as last line of the callback has no effect at all.\nRemoving the original return has probably the effect, that the node is created immediately, and again after parent was expanded.\nIn order to understand your problem, we need an example (please see https://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues)\n. There is a test case for basic usage like setting and updating properties or replacing all children of a node (https://github.com/mar10/fancytree/blob/master/test/unit/test-core.js), so this should work.\nAdvanced features like adding, inserting ore removing distinct child nodes is not yet implemented, so the api might need to be changed.\nIf you are only modifying title and icon, and you don't need a deferred to be resolved (i.e. a done() method), you could simply have a loop with getNodeByKey, then set the attribute(s) and call node.renderTitle(), setTitle() and/or node.renderStatus()\n. You Might also try to add the 'clones' extension, as this could speed up the lookups by key\n. Hi,\nthe contextmenu plugin is deprecated (see http://wwwendt.de/tech/fancytree/demo/#sample-ext-menu.html). \nIt's recommended to use a 3rd party tool like https://github.com/mar10/jquery-ui-contextmenu.\nSee here for an example: http://wwwendt.de/tech/fancytree/demo/index.html#sample-3rd-ui-contextmenu.html\nHowever, this contextmenu is just a wrapper for the standard jQuery Menu Plugin, so you should direct your  question there: http://jqueryui.com/menu/\n. I don't have one yet, sorry to \n. There is nothing special about the table that is generated by Fancytree + 'table'-extension, so you can use existing plugins, for fixed table headers, etc. Simply google it. Those plugins seem to clone the fixed parts and try to keep them in sync.\nThere are also techniques that use CSS-only, but form my experiments I'd say they don't work very good in some scenarios.\n(The best way, of course, would be to create a new Fancytree extension, that handles this)\n. Hi,\nthe issue tracker is for bugs and feature requests only. Please ask questions on Stackoverflow, since this is better suited.\n. ext-fixed is there (still early alpha though). This should be possible by setting the types option to \"expanded selected\".\nSee https://github.com/mar10/fancytree/wiki/ExtPersist\n. D'n'd between trees is possible (http://wwwendt.de/tech/fancytree/demo/#../test/test-ext-dnd.html).\nEach tree has it's own data model, but you can implement any logic you need in the callback; see https://github.com/mar10/fancytree/wiki/ExtDnd\n. Will do, thanks.\n. Sure. Use the postProcess callback. Example here https://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-load-data-from-a-flat-parent-referencing-list\n. Sorry, I don''t know enough about angular, maybe you have more luck one Stackoverflow...\n. Please use Stackoverflow for questions, as it is better suited for this; thanks.\n. This looks good:\n$(\"#tree\").fancytree(\"getRootNode\").render(true,true);\nBut normally it should not be necessary to call it explicitly in the first place \n. Normally those classes are maintained by Fancyree. Setting colors and other styles for nodes depending on status could be controlled by adding CSS rules for existing classes like fancytree-active, ...\nWhat is the use-case, can you set up an example? \nDo you explicitly add classes to the <li> tags?\n. Instead of adding class names to the markup directly, you could define node.extraClasses.\nThis will allow Fancytree to handle it.\n. Note that 2.17 add a new methods to add/remove/toggleClass().\nThese functions set the class on the node's span (or tr) and on the node.extraClasses, so it will be persistent\n. Have a look at the autoScroll option:\nhttp://www.wwwendt.de/tech/fancytree/doc/jsdoc/global.html#FancytreeOptions\nand\nhttp://wwwendt.de/tech/fancytree/demo/sample-scroll.html\n. You cannot drop over the root node, since it is invisible\nInstead, evaluate node and data.hitMode. See \nhttps://github.com/mar10/fancytree/wiki/ExtDnd\n. 'icon' may be a callback, and you could check for data.node.isExpanded() there.\nBut I would recommend to simply set your custom class and have two css rules (one checking for the fancytree-expanded).\nSee https://github.com/mar10/fancytree/wiki/TutorialTheming\n. You are right, I missed that icon is not called on expand, so you would have to call data.node.renderTitle() in the expand and collapse events.\nI would recommend a pure css approach anyway, since it is more performant.\nFor example\njs\nicon: function(event, data) {\n    if( data.node.isFolder() ) { return \"custom-1\"; }\n},\nWith this css (note that height and width will not be required in upcoming releases)\ncss\nspan.fancytree-custom-icon.custom-1 {\n  height: 16px;\n  width: 16px;\n  background-image: url(\"customFolder1.gif\");\n}\nspan.fancytree-expanded > span.fancytree-custom-icon.custom-1 {\n  background-image: url(\"customFolder1_expanded.gif\");\n}\n. I am open to and would support this, but I don't know enough about Angular yet to do it myself. Haven't used it so far...\n. Automatic highlighting only works for string arguments, because fancytree cannot figure out what part caused a match in custom callbacks.\nBut you can set 'node.titleWithHighlight' inside your callback to a string that contains <mark> tags, for example.\n. Let's call it a start ;-)\n. Thanks, I will look into it if I find some time.\nAnyway it would be good to have tests for it (benchmarks) so we can compare different approaches.\nDynatree had something like tree.enableUpdate(enable) that returned the previous state, which makes it easier to restore in nested calls. It also forced a redraw on enableUpdate(true).\nSee http://wwwendt.de/tech/dynatree/doc/dynatree-doc.html\nInstead (or additionally) to suppress rendering, we should also benchmark performance, when the tree root element is detached while adding nodes (see https://api.jquery.com/detach/)\n. Closing in favor of a general feature request - #607\nthanks!\n. @u-874 could you explain a bit, what operations were slow?\nDid you use the table table extension or some other plugins?\nHow did you add nodes, ~~and how many~~?\n. Thanks a lot, I will try to remember to reference this, when PHP questions arise.\n. See #527 \n. Select a folder, then click on the [Filter active branch] button.\n(click on the ''Show source\" link near that button to see the implementation)\n. Upgrading is a good idea. See here for some hints (you are invited to improve the page, it's editable):\nhttps://github.com/mar10/fancytree/wiki/WhatsNew\nThe JSON format has slightly changed, so you should modify the server side formatting (not a big deal from my experience). If that's not an option, implement the postPrcess callback.\nI have only tested with bootstrap 3.x, but I guess 2.x should work as well.\n. Multiple identical IDs are not allowed in HTML. Simply use different ones and initialize like this\n$(\"#tree1,#tree2\").fancytree({});, or assign a common class attribute in addition to the unique IDs and initialize like this $(\".myFancyClass\").fancytree({});\n. You could generate those keys on the server and add them to the data, or override the defaultKey callback option.\nNote that if you enable generateIds: true, this will lead to duplicate HTML ids, which is not allowed, so you have to choose different values for the idPrefix option.\n. This could be based on a concept of modification events (see also #419 )\nFor this special purpose however a childrenModified event would suffice, and we even only would have to listen for adding nodes, since deletions would not affect sort order.\n. Since sorting may be based not only on the title, but also on custom data properties, I think offering a new modify event is a more flexible and general approach. This would allow a simple pattern like \njs\nmodify: function(event, data) {\n    if( data.operation === \"add\" ) {\n        data.node.sortChildren(...);\n    }\n}\nSo closing this in favor of #419 \n. How deep exactly?\n. Do you really mean 9600 nodes/levels deep? I don't think that we need to support this....\nHowever, if you have those problems with a large, but rather flat, tree, please post the code that you call inside the visit callback.\n. I understand, that users may create such deep structures by dropping such structures over each other repeatedly if we do not prevent that. But do valid systems exist with that depth?\n\nOf course no one would dive into this branch till the end\n\nThat would be my expectation as well, so why would we allow to create unusable structures?\nOne exception I could think of, are recursive structures or graph mappings, but those would have infinite depth, which cannot be visited completely anyway. \nIn the past, I handled those cases by displaying 'Link' nodes, that make this more transparent to the users.\n(Have a look at the 'clones' extension, how to support multiple instances of identical objects).\nAnyway, I am open to a better implementation of visit, as long as it does not affect the standard use cases.\n. The span.fancytree-node element extends past its containing <td> if a padding-left was applied.\nThis may block hover events, etc.\n\nThis can be solved by adding box-sizing: border-box\n. Reopened, because the current change caused a regression: #570 \n. It would be nice to have an option to display expanders for empty nodes (and even expand them):\nhttp://ux.stackexchange.com/a/80120/54826\nSee also #490 , #605 \n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n. I don't now much about angular, but the whole initialization code must be executed after page load finished.\nNormally something like this (but maybe angular uses another pattern):\njs\n$(document).ready(function() {\n    ...\n});\nA timeout may work sometimes, but is not robust.\nWhat exactly does this do:\n\nthe page gets reloaded via an AngularJS route change\n\nIf the above proposal does not help, please provide something debuggable or more detailed information.\n. There seem to be to competing load request for the tree (or one subnode), and the older one is discarded. This is not really a problem in itself.\nBut this is hard to debug without a running example.\nHow do you update the tree? Do you discard and reload the HTML of page2? In this case the tree plugin must be re-initialized, I assume there is a 'pageloaded' event in angular where you do that?\nAnyway, if you want to update the tree content based on a query, I would recommend to use tree.reload(), with the JSON search result, instead of reloading the whole plugin. \nThe interactive search in this example is built this way: http://wwwendt.de/tech/fancytree/demo/taxonomy-browser/\n(Note that the result list is a flat Fancytree)\n. I you add some logging, you will notice that the tree is only initialized once:\njs\n$(function(){\n    console.log(\"document.ready\");\n    $(\"#myTree\").fancytree({\n        source: [\n            ...\n        ],\n        init: function(event, data) {\n            console.log(\"tree init\")\n        }\n    });\n});\nThis is because document.ready is only fired for page loads, but not for partial replacements.\nI googled a bit, and it seems that something like using 'directives' is a recommended solution:\nhttp://stackoverflow.com/q/17945333/19166\nAt least you should find another event, that is fired every time a view is updated.\nTo me it seems that discarding and re-initializing the whole tree plugin on every change of the search term is a bit inefficient.\nMaybe there is a way to keep the <div id=\"myTree\"></div> and call $.ui.fancytree.getTree().reload(..new source..) instead.\nThis would also allow the tree to display a spinner, and maybe avoid some flickering.\n. Cool, thanks for contributing\n. Thanks, I will add this to ext-snd and see what happens...\n. Thanks for reporting!\nThis seems to be a regression introduced by 1326914d359398a4517baefc60c6085a49037fc8\n- Can reproduce with IE 11 (on Windows 10)\n- FF, Chrome, Safari, Edge seem to be Ok\n. This is what seems to happen:\n- #563 introduced a new behavior:\n  If node.setFocus() is called, and the node itself is not tabbable (i.e. .titlesTabbable option is false), we call .focus() on the container.\n  This is done to allow the tree to catch and handle UP, DOWN, etc. keyboard events.\n- If focus() is called on an element, IE tries to make as much of it visible to the user as possible.\n  For example. if the container <div>'s bottom is below the visible window, IE scrolls down until it is.\n  If the element height is larger than the window, then IE scrolls down until the element's top is at the top of the window.\n- Other browser do the same, but only if the element was focused using a TAB key.\n  If a mouse click was used, no scrolling occurs.\n  This makes sense, because if the user can click an element, it is obviously already visible.\nCan you confirm, that this would explain your problems?\n. @mgwalm I updated the demo page, could you check if the problem is resolved for you?\n. Not yet\n. The issue is still open. Any suggestions how to fix it?\n. http://stackoverflow.com/questions/22581701/how-to-sort-fancytree-nodes-with-folders-at-the-top\n. Allowing to add input controls, images or other markup in the title is considered a benefit.\nThis is discussed in #171, please add your thoughts there.\n. 2.16.0 is just released, and I could not reproduce it.\nBut worse: the latest release completely removes the status nodes icons, because of a inconsistency with the bootstrap themes.\n. The gif should be back again, this was a regression bug. Could you test it?\nConcerning translation: you can use the stringsoption: \njs\n        strings: {\n            loading: \"Loading&#8230;\",\n            loadError: \"Load error!\",\n            moreData: \"More&#8230;\",\n            noData: \"No data.\"\n        },\n. Thanks for the patch and sorry, for the delay - I will apply the fix soon...\n. Refactoring e016c711e5e50c7c20d42e4e66362d90467b3826 : \nThis should address the root cause (passing wrong parent), so getNodeByKey() should not be necessary. Also\n- Allow other path segments than node.key\n- support deferred.progress(). Did you set the dnd.focusOnClick option (#270), and if so, what happens if you pass false there?\n. It seems to be a combination of tabindex=\"0\" and using jQuery UI draggable, that causes this.\nSee this example (that does not use Fancytree at all):\nhttps://plnkr.co/edit/xD4sEUAM6rr6whUEF8B1?p=preview\n. Yes, tabindex is currently added, so the container behaves like a control and can receive keyboard focus.\nI opened a ticket: https://bugs.jqueryui.com/ticket/14940\n. The jQuery team closed the ticket as notabug, so there is not much we can do.\nHowever, if you remove the tabindex attribute from the container in the init event, does this solve your problem?\n. The next release will have an option tree.opts.tabindex=\"...\" that allows to set this attribute. (tree.opts.tabbable will be deprecated.)\nThis settings\njs\n$(\"#ree\").fancytree({\n    ...\n    tabindex: \"\",\n    titlesTabbable: false\n});\nshould fix your issue, but I assume it will break keyboard navigation.\n. Also related: #570 \n. This is standard browser behavior, Fancytree does not do anything special about the click events.\nYou could try to implement the Fancytree click() event to check if the target is the checkbox icon and return false to prevent selection. Instead start a timer, that will call node.setSelected() later.\nIf you receive a dblclick, cancel that timer.\nHowever: from jQuery help (http://api.jquery.com/dblclick/):\n\nIt is inadvisable to bind handlers to both the click and dblclick events for the same element. The sequence of events triggered varies from browser to browser, with some receiving two click events before the dblclick and others only one. Double-click sensitivity (maximum time between clicks that is detected as a double click) can vary by operating system and browser, and is often user-configurable.\n. (See also #485)\n. You should not rely on the auto-generated keys to be reproducible. If you need that, set node.key in your source data to defined values.\n. Thanks for contributing. I will look into it, if I find some time.\nYou may also want too look at, or comment on https://github.com/mar10/fancytree/wiki/SpecSelect\n. Thanks for the feedback. Would someone volunteer to append the solution code snippet as new [Howto] ... in this wiki entry?\n. Due to low priority and current lack of resources, this issue was tentatively put aside.\nSee also info about deferred issues.\n\nHierarchical selection needs more clarification, before we can pick up and hopefully implement a more flexible solution:\nsee also (and comment on) https://github.com/mar10/fancytree/wiki/SpecSelect\nUntil that, it is possible to implement specific use cases using the available API and methods (e.g. as described above.)\n. There is no built-in option for this, but it is only CSS, so it is easily possible.\nSee here for an example\nhttps://github.com/mar10/fancytree/wiki/TutorialTheming#howto-customize-node-style-depending-on-extraclasses\n. This should work (of course only, if the title is not re-rendered, so you could move this code to the render event).\nThis topic was brought up before, so I will reconsider a general solution.\nSee #171\n. Closed by eea49ddde69641dd3e59f7d2796af38cac3615cc\n. Some function were added with v2.15, that allow this.\nSee #169 and https://github.com/mar10/fancytree/wiki/SpecPaging.\n. js\n$tree = $('#treeObj').fancytree(source); // a jQuery object\ntree = $('#treeObj').fancytree(\"getTree\"); // an Fancytree object\n. There is no select extension. \nAre you referring to this code? It only contains an obsolete comment (I removed that now).\njs\n$(\"#tree1\").fancytree({\n// extensions: [\"select\"],\n    checkbox: true,\nIf you really see an error, please reopen this issue.\n. Hard to say, please provide more information and add a jsFiddle or Plunker:\n    jsFiddle or \n    Plunker\n. Thanks for the update \n. Thanks for reporting!\n. I don't know. Please use Stackoverflow for questions\n. generateFormElements() already has an optsargument. We could add an additional option (e.g. otps.filter) that accepts a callback function.\nIf specified, tree.generateFormElements() would use visit()instead of getSelectedNodes(), call filter(node), and serializes all nodes that we return true for?\n. (see also #310)\n. Couldn't reproduce, please provide more information\n. Sorry, I didn't find the time yet, to get this running.\nDo you have an online example available, that could be used for reproduction?\n. yes sir\n. click is triggered for any region of the node, including the checkbox.\nSo you should check data.targetType and either return false when a checkbox was clicked to prevent double action, or don't call .toggleSelected() in that case\nhttps://github.com/mar10/fancytree/wiki/TutorialEvents\n(Please use Stackoverflow for questions in the future, thanks)\n. try \njs\n    tree.reload([\n      {title: \"New Node 1\"}\n    ]).done(function() {\n      alert(\"reloaded\");\n    });\n. Cool, thank you.\nHow much faster is this? I googled a bit and found using .find()  could be slightly faster than passing an additional context.\nBut if node.span being undefined is the root cause of the performance issue, wouldn't it be better to add this check, and skip calls to .text(), .html(), and .enhanceTitle() in that case?\n. node.span is only available for nodes that are rendered, i.e. are visible or had been visible at least once.\nChild nodes of collapsed parents are not rendered by default.\nSo your solution solves the performance problem indirectly, but .enhanceTitle is still called without need.\nFrom what I read, the filter() might be ~10% faster than the original code, so I would keep it. But still add an ifclause\n. Yes, if you like\n. You could return false in the dragEnter callback if node.tree !== data.otherNode.tree\n(Please use Stackoverflow for questions in the future,, thanks)\n. Thanks, I am open to improvements here.\nWill this be backwards compatible, and if not, are you aware of patterns that are?\n. It seems that jQuery UI 1.12 has changed the widget layout. Any suggestions anyone?\nSince i am not using those loaders myself, it would be cool if someone could help with testing or even submit a PR...\n. @djangosdk  Thanks for giving an example. \n(#694 is now an open issue, which - once implemented - should make this more easy.). See https://github.com/mar10/fancytree/wiki#embed-fancytree-on-your-web-page for new module support. Sorry, but I don't think I understand the problem (and Stackoverflow is a better place to ask questions anyway)\nThe Dropdown change event seems to work and the tree is reset in that case.\n(Using tree.reload() may be a better option though.)\nI noticed, that you are not passing a keyproperty with you data, so you should not expect the [Toggle item2] button to work.\n. Thanks.\nI think someday we should Support empty nodes with an Expander (see #564 ), but for now your patch is more consistent\n. thanks\n. Waiting for @u-874 's response to #553\n. Poor performance can be observed if we are adding many child nodes to a node that is already expanded (currently empty nodes cannot be expanded, so at least one child must already exist).\nThis means\n1. FASTEST: add nodes to a collapsed parent and keep collapsed\n2. FAST: Add nodes to a collapsed parent, then expand\n3. Equally FAST: Add nodes to an expanded parent, but wrap it inside enableUpdate(false/true)\n4. REALLY SLOW: Add nodes to an expanded parent\nSome benchmarks for a tree table:\n\n. https://github.com/mar10/fancytree/wiki/ExtensionIndex\n. This should be fixed when the enableUpdate branch is merged\n. You don't have to send it as separate key. You could generate it on the fly in the render callback instead, or add it in the postProcess callback.\nThis could be automated by a new tree option (e.g. .tooltip: \"auto\" or similar).\nNote: If you are using a tooltip plugin (like jQuery UI tooltip), it might have an option to configure a callback, that you can use the node title on the fly. This would prevent storing duplicate data)\n. will merge, thanks. Let's see what happens...\n. I assume this only happens while the Cursor is between two nodes, i.e. technically is hovering over the parent <ul> named 'OptionSetList'?\n. Thanks for this workaround. I would not know how to prevent it otherwise (unless removing the margin between nodes) \n. This is because the example page is in a different directory than other example.\nThis 3rd-party extension is no longer maintained anyway, so I won't fix it.\n. Thanks for reporting and sorry for the delay...\nThe effect is probably caused by the fact that the default filter sets a field named node.titleWithHighlight to mark the matching regions.\nHaven't tested this, but you could try to remove it after edit:\njs\ndel node.titleWithHighlight;\nnode.render();\nIn this case you should still see the node with the new title, even if it doesn't match anymore.\nAnother option would be to reapply the filter by simply calling tree.filterNodes() or tree.filterBranches() again.\n. Would it be possible to add a margin instead or wrap the tree inside another div?\n. That would certainly help, since I am a bit busy right now.\nBefore fixing it, can you post a jsFiddle, Plunkr, or another live example that we can look into, and discuss possible aprocaches?. @toykan how is this related to this issue and the wide extension ?\nPlease provide more information on how to reproduce the problem  - preferably in a new issue . Please read may last comment and open a new issue with a detailed explanation. There is no 'pic2' btw.. What version is your jQuery UI? I had the same issue with jQuery UI 1.11.4 and jquery 3.0. After installing jQuery UI 1.12.0-rc.2, the problem was fixed.\n. Answered here http://stackoverflow.com/a/38472872/19166\nSee also #431 \n. Thanks, but I could not reproduce it. \nAre you using the glyph extension? Could you give som details or set up a sample or jsFiddle to help?\n. Thanks for contributing.\nNot sure if I fully understand the request: you would like to include <br> or &#13; in the title attribute to generate multi-line tooltips?\nThe assumption was that html tags inside an title attribute are invalid html, so escaping should be ok.\nBut it seems that &#13; should be allowed (http://stackoverflow.com/a/13585406/19166), which is prevented by escaping as well.\nAre you initializing the tree via JSON and did you try to pass \\n (i.e. the newline byte 0x0D) instead?\n. See also #610\n. Currently editing ends, when we get ESC, ENTER, blur, or outer mousedown events.\n(The triggerCanceloption  was never used: I will remove it.)\nApps may want to stop editing depending on the current input, mouse button, or even mouse pointer position. \nAlso the decision whether to save or discard may depend on various conditions.\nIt would be more flexible to pass the source event to the beforeClose callback and let the programmer handle it.\n(This will be available with v2.19)\njs\n$(\"#tree\").fancytree({\n  extensions: [\"edit\"],\n  ...\n  edit: {\n    beforeClose: function(event, data) {\n      if( data.originalEvent.type === \"mousedown\" ) {\n        // We could prevent the mouse click from generating a blur event\n        // (which would then again close the editor) and return `false` to keep\n        // the editor open:\n//      data.originalEvent.preventDefault();\n//      return false;\n        // Or go on with closing the editor, but discard any changes:\n        data.save = false;\n      }\n    },\n    ...\n  },\n  ...\n});\n. Probably sometime this week...\n. ~~I can't see any difference, did you forget to paste your changes?~~\nedit:: sorry, I found it :-)\nThis issue tracker is for bug reports and feature requests.\nModifying the source code is discouraged, since it will become a nightmare for users to maintain, if they update Fancytree to a new version. But maybe you can describe your suggestions and requirements, so it may become a feature request here.\nI think, you change is a bit too special for a common feature, since it does not cover the case that users may want to have different icons for label an title, etc..\nThe suggested way to tweak the html markup is using a callback, for example enhanceCalback().\nOtherwise: Questions or hints can be posted in the forum.\n. Not sure if I understood your question, but In the click handler yo may check for the target type:\n``` js\nclick: function(event, data) {\n    var node = data.node,\n        // Only for click and dblclick events:\n        // 'title' | 'prefix' | 'expander' | 'checkbox' | 'icon'\n        targetType = data.targetType;\n// we could return false to prevent default handling, i.e. generating\n// activate, expand, or select events\n\n},\n```\nSee here:\nhttps://github.com/mar10/fancytree/wiki/TutorialEvents#howto-find-out-source-and-the-clicked-region-in-a-click-handler\np.s.\nplease use stack overflow for questions \n. I think you might simply use selectMode: 2, which does not implement any additional logic on its own.\nThen implement the click event and use data.node.visit()  to modify the selection state of child nodes:\nif data.targetType === \"expander\", return false to prevent default processing, i.e. (de)selecting.\nIf data.node is marked unselectable, do nothing. Otherwise call data.node.visit() to (de)select the children (skipping unselectable children)\n. ext-contextmenu is deprecated and no longer supported.\nI suggest that you use the context menu plugin directly:\nhttps://github.com/mar10/jquery-ui-contextmenu\nTransition is pretty easy, example:\nhttp://wwwendt.de/tech/fancytree/demo/index.html#sample-3rd-ui-contextmenu.html\n. It might be fixed in the latest release, could you try that?\n. Seems to work here: https://plnkr.co/edit/ute2De?p=preview\nCould you give some more details?\n. Thank you for the feedback and closing this.\nBtw., if you have sample code that reproduces the recursive calls and the following problem, I might look into it and see if we can make Fancytree more robust\np.s.\nI see you have a decent project that uses FT? Maybe you like to add it to the new Gallery\n. > I would love to put my project on your gallery. It's still in alpha and we are working on it daily, but I would welcome any testers or pull requests on it whatsoever.\nGo ahead, the wiki page is editable...\n. My guess is that the source request returns s.th. invalid. Can you post the ajax response?\n. Not sure what you are trying to achieve exactly, but in selectMode: 3 the checkboxes are tristate.\n. The fiddle doesn't work for me, could you check?\n. I see the problem now. Will look into it, when I find some time\n. No sorry, I am not aware of a fix yet. (Of course you can check for he client type and set tabindexaccordingly).\n. Thanks!\nI think a general approach should be discussed here: #603 \n. See https://github.com/mar10/fancytree/wiki#embed-fancytree-on-your-web-page for new module support. The PR breaks the travis checks.\nAlso, I don't think that AMD headers should be applied during the build process and not be part of the core code. I am open to a general, flexible, and compatible approach though (see #603)\n. Basically, the core code calls 'hook' functions to perform important operations.\nPlugins override those hooks in order to add or modify the behavior.\nSome explaining documentation would definitely be good to have, hope I find some time to do that.\nUntil then, maybe these links help:\n- https://github.com/mar10/fancytree/wiki/TutorialExtensions\n- http://wwwendt.de/tech/fancytree/doc/annotated-src/jquery.fancytree.childcounter.html\n- http://www.wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree_Hooks.html\nAnyway, if you are trying to hide specific nodes, couldn't you simply use the existing filter extension and pass a csustom filter callback to filterNodes() as described here?\n. At a first glance I see that bootstrap seems to define its own rules for <mark> elements.\nAlso the counter badge height could be increased. \nBoth can be fixed by appending additional CSS styles to your page. If you find some improvements, you may like to share it here, so I can add it to the standard.\n. This is one possible solution:\ncss\nspan.fancytree-childcounter {\n  min-height: 14px;\n  width: 14px;\n}\n. This could be implemented either\n1. by adding an option to tree.reload() -  this would require that the core tree has knowledge about an extension, which seems a bit anti-pattern\n2. by adding a new method to ext-persist: tree.applyPersistedState()\n. Ok, I should have been looking into the code before commenting ;)\nPersistence is applied on the init event, which is also fired by tree.reload().\nThe problem you are describing comes from the fact that you probably did not pass node.key values with the source data, which is a requirement for ext-persist. \n. Exactly: the node argument is the target node, that received a drop event, so node.tree is the target tree.\ndata.otherNode is the source node if available. \nHowever, since any draggable may be dropped, this may also be null. In this case data.draggable.element is set.\n. (Note that there is no different handling for folders and non-folders.)\n\nDuring DnD when a node is hovering over the empty folder, the console shows this message: \nUncaught Error: Fancytree assertion failed: expected array of children\n\nAre you sure that this message is generated during hovering? I suspect this is rather a problem with your drop-code, i.e. calling move or add. Can you post the code or set up a jsFiddle?\nCan the described behavior be reproduced with the standard examples in the example browser? If not: how is your code different?\n. This behavior is by design: The ext-edit extension (and other extensions or\nevents) may trigger a redraw of nodes in certain situations.\nWhen ext-table is active, this will eventually result in a call to renderColumns \nfor that node. The samples that you mention simply replace the <td> contents\nwith empty <input> elements, so the input is erased.\nA real-world implementation would either leave the <td> unmodified if it already \ncontains an input, or set the current input value accordingly.\nAnother alternative would be to render the HTML markup in createNode event,\ninstead of renderColumns or use row templates.\nI updated the wiki page to make this more clear.\n. have a look at the source code of the sample:\n``` js\n      beforeOpen: function(event, ui) {\n        var node = $.ui.fancytree.getNode(ui.target);\n        // Modify menu entries depending on node status\n        $(\"#tree\").contextmenu(\"enableEntry\", \"paste\", node.isFolder());\n        // Show/hide single entries\n//            $(\"#tree\").contextmenu(\"showEntry\", \"cut\", false);\n    // Activate node on right-click\n    // node.setActive();\n  },\n\n```\nyou can check node for node.isTopNode() or any other condition to decide how to modify the menu.\nbtw: please use stackoverflow for questions in the future, thanks()\n. Thanks!\n. This is probably the same issue as #641\n. I looked into it: It is not a bug, but a problem with the sample data (I will improve this).\next-core expects the node data to contain node.refKey (and optional node.key) attributes.\nIf s.th. is missing, it tries to generat reproducible key values, but this may lead to duplicate entries, if refKeys are missing\n. > The problem occurs when otherNode is a folder. The above function that sets the key of the new node is called for each of the nodes in the folder. Is this behaviour correct?\nSure, the callback allows to modify the complete source structure, in order to allow to prevent duplicate keys, change the titles, etc..\n\nIf a node in the copied folder is by itself a subfolder, the function doesn't get called for the subfolder's nodes. Is this how it should be?\n\nI don't understand this. The callback should be called for all child nodes. One line before you said that this was the case?\nIf it is not called for all children and descendants, you may have found bug. (Please provide a sample or jsFiddle then.)\n. copyTo calls the map callback for all descendants (unless you return false or \"skip\"). I just tried it, and it seems to work, e.g.:\njs\nnode2.copyTo(node, data.hitMode, function(n){\n    delete n.key;\n    n.title = \"Copy of \" + n.title;\n});\n. Tab is already implemented. Home, End, and * could easily be added.\nThe behavior of Enter may also be changed, not sure yet if in general or only when options.ariais active.\nI am not convinced that dblclick is a W3C requirement though, since it is targeted for\n\nto users with disabilities, especially screen reader users and users who cannot use a mouse or other pointing device. \n\nIf you really need that, you can handle the dblclick event however. \n. Thinking a bit more about it, I don't even think that those keyboard shortcuts are a requirement, but just reccomendations:\n\nThe following keyboard shortcuts are implemented for this example (based on recommended shortcuts specified by the DHTML Style Guide Working Group.)\n\nSo the current behavior of Enter does not break aria compliance (please let me know if you have references that could clarify that)\nI think that real compliance is rather about using the right ARIA markup in a way that screen readers handle it nicely.  Here we could probably improve, but some help is welcome. See https://github.com/mar10/fancytree/wiki/SpecAria\n. Yes, thats seems to be the problem, we have different client behavior. I experimented a bit a while ago, but did not find a final answer. Let me know what you find out. (I also asked this question at the a11y gitter channel)\n. From the gitter discussion I would think that the behavior of enter and dblclick is ok as is.\nI will add the remaining keys.\nWe should also review the markup, and check with different ATs. \nThanks for your support!\nI started a new branch for it: \n    https://github.com/mar10/fancytree/tree/aria\nso we can explore and finalize without affecting working code.\nAlso created this issue #656 (also #655, but that is more involved)\nClosing this in favor of #656 \n. @powrsurg did you have the time to look at the current markup or have any suggestions how to improve the behavior on different screen readers?\n. I modified the branch to update aria-activedescendant on the container.\nAlso looked at two online examples (Parciello, Open Ajax Aliance) which use different approaches. \nFor example one attaches the attributes to <li> the other to the embedded <span>:\nhttps://github.com/mar10/fancytree/wiki/SpecAria\nBoth don't seem to work perfectly on VoiceOver, which I primarily have access to, but maybe you can recommend the best tradeoff, when using different ATs.\n. I don't see anything obvious, except for a missing ; after the nodes declaration, but I admit that I haven't used react yet.\n\nOn a side note, I found this port of FancyTree to React, but couldn't get it to display the icons, as well as other errors\n\nwhich port?\n. I don't think I am able to repair and add  it, since I currently don't know enough about react, sorry.\nMaybe you can propose s.th. like ext-react as a pull request, or author some wiki document?\nI will reopen this issue (or create a new one) if there is a chance of realizing this.\n. >  tree must be destroyed and recreated when a new set of nodes are passed async\ngenerally not: a tree.reload(source)should suffice to reload all\napplyPatch() could be used to add o, remove or modify.\nBut I cannot say how all this integreates with react...\n. I am not sure if i understand this question, but you may look at the node.render(), node.renderTitle(), node.renderStatus() methods.\n. We consider the ext-table as a 'tree with tabbed titles', not a 'Tree Grid' in the WAI-ARIA sense.\nSo we currently do not distinguish between Navigation- and Actionable Mode.\nBut navigation should yet be intuitive and usable with screen readers:\nhttp://wwwendt.de/tech/fancytree/demo/sample-aria-treegrid.html\n. ### Open questions:\n- Should role='treeitem' be set to <li> or to <span class='fancytree-title'>?\n  -> using <span>now\n- aria-multiselectable is currently always true. Could be removed for selectMode: 1\n  -> done\nSee also handling of treegrid / ext-table #655  \n. No, I don't think so. What is your use case or concern, that would make this desirable?. yes that should be possible. Thanks for the feedback!\n\naria-selected attribute is not updated as per the state of the node changes (I am not using checkbox, aria-selected gets updated only with checkbox)\n\nHow do you select the nodes if you have no checkboxes (and are you are aware that 'selected' and 'active' are independent statuses)? \nThe latest implementation is found here:\nhttp://wwwendt.de/tech/fancytree/demo/sample-aria-treegrid.html\n(see also #709 for some discussion)\nWhich tries to follow the current proposal for WAI Tree Drid 1.1:\nhttps://github.com/w3c/aria-practices/issues/132\nhttps://rawgit.com/w3c/aria-practices/treegrid/examples/treegrid/treegrid-1.html\n(As far as I know, this has not been accepted yet.). See here: http://wwwendt.de/tech/fancytree/demo/sample-aria.html\nThe active item is marked by the aria-aria-activedescendant attribute. aria-selected is also maintained per node.\n\nI checked that jquery.fancytree.js includes the login to add necessary attributes.\n\nI don't understand what you mean by login. Did you mean logic?\nThe current implementation (see my link above) should give good results in different screen readers.\nIt seems not be so important to use all available attributes, but select the right ones. And it always seems to be a compromise in the end.\nHowever if you have a concrete example, how attributes should be changed to improve the user experience (without breaking other screen readers) please let us know.. I think aria-level, -setsize, and -posinset may not be required, because screen readers can easily derive this from the UL/LI structure. (They cannot do this however from the flat TR structure of a tree grid)\nMy question is: why do you think it is required? Do you have a concrete(!) example where screen readers produce better results with additional attributes set?. dfd is the result from the ajax call, thus a promise. So postProcess should get called (unless the ajax request failed).\n. I just tried it, and it seems to work.\nIt is not called if the response is invalid json, but then you should see s.th. on the browser console.\nHere's my code:\njs\n    $(\"#tree\").fancytree({\n        // source: {url: \"sample_parse_error.json\"},\n        source: { url: \"sample2.json\" },\n        postProcess: function(event, data) {\n            alert(\"postProcess\");\n            // data.result = [ ... ];\n            data.response[0].title += \" modified\";\n        }\n    });\nCould you send a debuggable sample or set up a jsFiddle for further investigation?\n. Will reopen, when we have some more information\n. > I would like the \"modification date\" and \"length\" column to auto-adjust as well the node name.\nI assume you are using ext-table? What do you mean by auto-adjust? Fancytree does not do much about the table markup except for adding <tr>s and rendering into the <td>s, so you probably can define your column layout using plain css.\n\nMost importantly, when someone selects a leaf-node, I would like to show the preview of the file right underneath it and potentially a form to edit/save the content as well. \n\nProbably the easiest way would be to use jQuery to append html to the node's span in the activate, renderColumns, or enhanceTitle event\n. You could try s.th. like this (untested):\njs\npostProcess: function(event, data) {\n    // Convert the original response\n    data.result = $.map(data.response, function(c){\n        // Rename 'key' to 'id'\n        c.key = c.id;\n        delete c.id;\n        // ...\n        return c;\n    });\n}\nSee here for details.\nBut the attribute parentId suggests that you have a a flat, parent-referencing list?\nThis would require some extra work.. Hi,\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. The 'Files changed' view does not show any changes.\nDid you commit/push the latest edits?. Hi,\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. I hope this is explained here #638 \nIf the problem yet exists, please create a jsFiddle or similar, so I can debug it, \nthanks!. Seems to be ok on Safari, I need to test this one a Windows box.. @Surfrat: the strange behavior (duplicated tags) was already fixed (your plunkr used an old Fancytree version: 2.12)\nBut the main problem is:\nThe automatic highlight option does not handle embedded html elements.\nEither\n  - disable it (set highlight: false) and optionally set node.titleWithHighlight yourself in the filter calback: https://github.com/mar10/fancytree/wiki/ExtFilter#howto-highlight-matches-for-custom-filters\n  - use the enhanceTitle callback to add custom markup\n  - remove the embedded link altogether and make the whole title clickable, using @SPNexus approach. Thanks for the PR.\nThis is a facette of o long standing issue (#626), that still needs a comprehensive approach.\nI hope to find some time soon to provide a general solution, that will address most use cases and maybe even keep backwards compatibility, so I am going to close this PR, but add a reference to the main Issue.\nThanks again!. I couldn't reproduce this; what version and theme are yo using?\nCan you set up a jsFiddle or alike?. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Thanks for the suggestion!\nAnother implication might be that if you select a parent with filtered descendants, that parent would not receive a checkmark, but would only be partially selected - not what users would expect(?)\nAnyways, I think you could implement this already by switching to select mode 2, implementing the click handler, and call node.visit() there?\nSelection behavior is a refactoring candidate ( #626 ), so you could add suggestions there or here . This only happens if node is the first sibling. The automatic highlight option does not handle embedded html elements.\nEither disable it (and optionally set node.titleWithHighlight yourself), or use the enhanceTitle callback to add custom markup (like the % image). Maybe you can a set up a Plunkr, similar to this one #670 ?. The image is not visible before filtering either, so there is s.th. wrong with the plunkr?\nAlso this produces invalid html:\njs\n{ title: \"Subnode 1.1 </table><ul><li><table><tr><td><div><span style='color: black; background-color: #ccc; font-size: 14px; font-family: Courier New; font-weight: bold; text-align:center;   margin-right: 7px; '>0201 10 0000</span><span class='tnvedtitle'>Test good position</span></div> </td><td><td><a   href='note.php?show=220&showpercent=220' data-fancybox-type='iframe' class='fancybox'><img style='margin-bottom:8px;'  src='percent.png'  alt='Description'></a></td> </td></tr></table>\"},\nThe unclickable link was already reported on #670, so closing this one.. I think this should be considered by the refactoring #626 \nthanks!. The parent is the (invisible) system node, that contains all visible top level nodes.. Maybe I misunderstood, your problem, but node is the target node, and data.otherNode is the node you are dragging.\njs\n    dragDrop: function(node, data) {\n      data.otherNode.moveTo(node, data.hitMode);\n    }\nWhat do you mean by 'parent'?\nPlease set up a jsFiddle or alike and give some more details, if you still think there is abug.. If you do this, you get node: Node 1, data.hitMode: before, which is Ok.. In the context of \"target is 'before Node 1'\" it makes sense (to me at least).\nThe term parentNode would be misleading of course.. Thanks!. Thanks.\nThe missing information in #531 was, that it only happens if lazy: true is passed as well:\njs\n{title: \"Sub-item 2.2\", key: \"node2.2\", lazy: true, children: [] }. Thanks for contributing!\nWhat is the reason / use case for special handling of missing icon class names?\nDid you test different scenarios (i.e table/plain, lazy loading, load errors)?\n. Could you share the snippet or a sample/fiddle that does the custom theming? I would like to understand why and when the current implementation overrides the customization. \nThe current pattern for icons works with default icons that can be overridden by custom icon callbacks.\nMaybe this can be applied to status and checkbox icons as well. Or this may be a concept that is useful for non-glyph trees as well?. Thanks for taking the time for this explanations! Right now time is a bit tight, but i will look into this later.. Intersting, I wasn't aware of this: https://jsperf.com/apply-arguments-vs-call/1\nA benefit of _superApply(arguments) would be that it is safe and easy to copy and paste, and will work even when method signature changes, but we should definitely replace it for critical callbacks!\nAnd then check what happens here: http://wwwendt.de/tech/fancytree/demo/#../test/unit/test-bench.html. I will merge when the jshint issue is fixed, thanks. This would break compatibility with IE 7 and before: http://caniuse.com/#feat=json\nAny replacement would fall back to $.parseJSON anyway, so I think we can wait with this change until a jQuery version is released that actually removes jQuery.parseJSON.\n(Not that supporting IE 7 is really important, but there is currently no real need to drop it.). yes I just updated my comment...\n. When a tree is loaded (or re-loaded) all nodes are collapsed by default, unless expand is explicitly set.\next-persist only stores the keys of nodes that are manually expanded by the user afterwards.\nThose keys are then expanded after a tree is (re)loaded. \nThus a node that is expanded in the JSON data, can not be collapsed by ext-persist, for example.\nSo persistence works best with source data that is initially collapsed.\nDoes this explain the behavior you're describing? Otherwise, please set up a jsfiddle, so we can analyze the details.. I tried on the demo page\n    http://wwwendt.de/tech/fancytree/demo/sample-ext-persist.html\nwhen nodes are expanded, the local session storage shows expanded keys, e.g. \"10~10_1\".\nWhen I trigger reload from the console ($.ui.fancytree.getTree().reload()), the tree maintains expansion.\nSo could you set up a jsFiddle, Plunkr, ... or another example that reproduces the problem, so we can investigate further?\n. No problem :-)\nYou need to include jQuery UI as well, e.g. \"https://code.jquery.com/ui/1.12.1/jquery-ui.min.js\".\nThe issue seems to be, that you did set \"\" as key for the top level node. so it cannot reliably be persisted.\nSee https://jsfiddle.net/vt8mrLt0/1/. Editing a title will replace the title completely with the (escaped) new value, because Fancytree cannot tell wich custom parts should be retained.\nYou could either implement the enhanceTitle callback to re-apply the <span> markup wrapper.\nOr maybe instead of adding a span tag, simply add extraClasses and use some custom CSS to generate the desired appearance?. > The <span> is being removed BEFORE I edit the title. Somewhere between the ajax response and the click event.\nThis would still be interesting to investigate. Any other callback that you implemented, or other plugins you have enabled?. Thanks for taking the time!. Generally I prefer a callback approach, since this often offers the most flexibility.\nThe dnd.initHelper or dnd.updateHelper callbacks were added with similar use cases in mind. Do you think you could use them in your scenario as well?\nThere is also this option: https://github.com/mar10/fancytree/wiki/ExtDnd#howto-modify-the-draggable-helper-helper-parent-and-others. no problem. Filtering 1000 nodes should only take a fraction of a second.\nRendering HTML markup takes significantly longer, but still less than 1 or 2 seconds:\nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html\nMaybe you can set up a demo/jsFiddle to see what is different in your case.. hi,\nI just tried \njs\nnode.removeChildren();\nnode.addChildren({title: \"new 1\"});\nand it seemed to work. Please set up a sample, plunkr, or jsFiddle if you still think it is a bug.. removeChildren collapses the node. This interferes with the expand event, which is just in the process of expanding the node.\nA better aproach would be to mark the node as lazy and use the lazy loading functionality.. What happens if you remove the fixSelection3AfterClick() line?. I'd say this works as designed: selected is the property that should be passed in the JSON file.\nfixSelection3AfterClick() overrides all child node's status:\n\nFix selection status, after this node was (de)selected in multi-hier mode. This includes (de)selecting all children.\n\nIf you want to calculate partial selection status of a branch from the child node statuses, call fixSelection3FromEndNodes():\n\nFix selection status for multi-hier mode. Only end-nodes are considered to update the descendants branch and parents.\nShould be called after this node has loaded new children or after children have been modified using the API.\n\nIf you still feel there is a bug, pleas open a new issue and add jsFiddle or similar.\nThanks!. I am thinking about this for a while. Adding a jquery-independent dnd extension variant was a first step towards this.. The external dependency on jQuery UI was removed v2.23.0.\nA new library jquery.fancytree-all-deps.min.js is now added to the\ndistribution. It includes all dependencies on jQuery UI, so the only\nremaining external dependency is jQuery.\nContinue to use jquery.fancytree-all.min.js if jQuery UI is already\nincluded anyway.. Would it work for you if you moved the jQuery UI (lines 12-18) to the top above line 1?. Would you please open a new issue for this, so we can track this problem there?. Thanks!. Could you test if this header would work for you:\njs\n(function( factory ) {\n    if ( typeof define === \"function\" && define.amd ) {\n        define( [\n            \"jquery\",\n            \"jquery-ui/ui/widgets/mouse\",\n            \"jquery-ui/ui/widgets/draggable\",\n            \"jquery-ui/ui/widgets/droppable\",\n            \"jquery-ui/ui/effects/effect-blind\",\n            \"jquery-ui/ui/data\",\n            \"jquery-ui/ui/effect\",\n            \"jquery-ui/ui/focusable\",\n            \"jquery-ui/ui/keycode\",\n            \"jquery-ui/ui/position\",\n            \"jquery-ui/ui/scroll-parent\",\n            \"jquery-ui/ui/tabbable\",\n            \"jquery-ui/ui/unique-id\",\n            \"jquery-ui/ui/widget\"\n        ], factory );\n    } else {\n        factory( jQuery );\n    }\n}(function( $ ) {\n(See also related #694 for use cases where jQuery UI is required for Fancytree only.). You could try this\n http://www.wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#getIndex. Any updates here?. Thanks!. Thanks for reporting this. \nIt seems you found a more general problem, regarding the getNode() helper. \nI changed the title accordingly.. @TheMightyPope yes it should have been fixed in march.\nSeems to run here http://wwwendt.de/tech/fancytree/demo/index.html#sample-3rd-jQuery-contextMenu.html, at least in safari.\nCan you give more information?\n. Did you set autoScroll: true?\nI could not reproduce it here otherwise. \nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Ah, this type of scrolling. This is a known problem, see #633 \nNot sure how this can be fixed. Please let us know if you find a solution.. > When we select parent node, parent should be partially selected as we have unselectables and they are not selected earlier.\nNot necessarily: there are different use cases, and a final spec is still missing. See #626  for a discussion.\n\nThe node.isActive() might be working but node.isSelected() is not working on unselectables.\nplease see the attachment for more details and let us know the resolution.\n\nI don't see any attachments?. I will follow-up this request together with #626, may be we can come up with a more flexible implementation.. Sure. Would you like to submit a PR?. Thanks!. No there is no such option. How exactly would you implement it (when and how exactly would the scrolling happen)?. Cool, thanks for the feedback!\nI am always very interested in performance improvements and I will try this.\nThere already is a benchmark suite, in case you didn't notice:\nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html\nBtw. if you are adding entries in bursts, you could try to temporarily disable updates using tree. enableUpdate().\nWould be interesting to see a live demo of your tool.\nSince you are talking about using Fancytree for logging: how many nodes (visible and total) are you expect to have max.?\nBeyond any optimizations, in my experience browser performance degrades drastically for large tables (event if Fancytree is not involved).\np.s.\nSince you seem to be an ARIA expert: if you have suggestions to improve the markup, let me know. I tried to follow the guidelines, but I am not really sure if the current implementation offers the best user experience (on different browsers or screen readers).\n. Thanks, I will look into it.\nIt would be good to have a benchmark to compare optimization results.\nI tried to create 500x500 nodes (500 nodes top-level, 250k overall), the top-level nodes being collapsed.\nI measured ~2-3 seconds. Adding another top-level node took ~20ms.\nEven if I did not yet apply your patch, that seems to be faster than the effect you are describing?\nI assume, timings may be inacurate, because the JS code is done, but the browser still has not finished rendering. I am going to experiment a bit more.... I added a benchmark to the suite the seems to better simulate the case.\nDon't know if this matches your timings better...\nIt makes a difference, if the nodes are collapsed/unrendered, collapsed/rendered, or expanded. Your optimization seems to work best in the latter case.\njs\n    for( var i=0; i<20; i++ ) {\n    //  node.children[i].render(true, true);\n        node.children[i].setExpanded(true);\n    }\nbench_issue_708.pdf\nWould you like to make a PR?\nAnother thing you might try is to remove markup when nodes are collapsed, and see if it makes a difference, when your is used for a while:\njs\n    $(\"#tree\").fancytree({\n        collapse: function(event, data) {\n            data.node.discardMarkup();\n        },. I don't think that the test suite covers all use cases, but anyway: looks good to me.\nI merged your changes, thanks! Let's see, what happens.\nConcerning the \n\nnode.render() must be called on the parent.\n\ncomment: I believe that was also related to cases where the children list was modified directly. The render() method also takes care to keep the <li> order order in sync with the model's node list, for example.. PR was merged. Thanks for taking the time!\nAnother aproach is described in #655. If I understand correctly, this is a recommended for WAI treegrids, \nbut I was hesitant to implement this, since it seemed too far away from the current behavior.\n(It may be aded as separate extension, however.)\nThe pragmatic aproach you are describing seems reasonable to me.\nThe discussion result could be documented in a wiki document, like this (outdated).\nEven if I may not be able to implement all of it immediately: I consider the ARIA feature very important, and really apreciate your input.. Great!. @aleventhal nice work!\nI haven't yet tried it with a screen reader, but some unstructured thoughts: \n\nif a row with an collapsed node is active, I cannot enter cell mode directly, \n    because RIGHT will expand. Only the next RIGHT will mark the cell.\n    Expanding may not be what I want, since it can create lots of new rows.\nTabbing out of the last column will leave the whole widget.\n    Users might expect to focus the next item in the following row?\n\nI am not sure if this assumption always holds:\n\ntreegrids don't have that many columns\n\n(But maybe if they have, they may be hard to make accessible :-/)\nAnyway, the specification and demo should include concrete guidelines how to handle\ninput controls.\nSo a scenario like in the 'gridnav' demo should be possible:\nhttp://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html\nI am not saying that gridnav is the 'best' approach, of course. It just was handy in \nthe case of a grid that consisted of mainly checkboxes and some dropdowns:\n\nWhile a grid of checkboxes can be freely navigated in all directions using cursor keys.\n    For text-inputs LEFT/RIGHT will stay in that control and only UP/DOWN will change the row.\n    For dropdowns, UP/DOWN will select from the list, while LEFT/RIGHT changes the columns. \nThe title column is tabable. (Looking at the sample, I realize, that the \n    Fanctree checkbox in the leftmost column should probably be tabable as well...).\nOnly if the title column has focus, LEFT/RIGHT will expand / collapse\nSPACE is also aware of the active column, since it modifies an edit control, \n    selects a checkbox, or toggles the fancytree row selection respectively.\nTAB will move to the next tabbable element (which may me the first element in the next row).\n\nAgain, I don't propose that this for the specification, just add it as a \npotential use case.\nSome unstructrued questions for discussion:\n\nShould a treegrid feel like Excel concerning cursor keys,\n    i.e. should every cell be reachable using UP/DOWN/LEFT/RIGHT?\nHow should merged or empty cells be handled (i.e. focusable?)\nShould disabled checkboxes be skipped?\nShould TAB navigation include all rows or only the active row?\nShould keystrokes like 'a', '*', '+', SPACE modfy active, interactive cells,\n    or be ignored (or handled as tree commands, like 'expand all' or 'select row')?\nShould UP/DOWN change an active dropdown selection immediately, or should \n    the user enter an edit mode with F2 for example?\n    Similar: should an ascii key stroke edit the current text control?\nWhat happens if one cell contains multiple html input controls?\n\nAn alternative approach that we could investigate is to have a separate 'edit-mode'\nthat can be activated. \nFor example F2 could switch from a row-based read-only mode to a cell based\nedit mode.\nIn row mode\n  * LEFT/RIGHT expands\n  * UP/DOWN changes row\n  * SPACE (de)selects a row\n  * TAB leaves the treegrid\nIn edit mode\n  * LEFT/DOWN/RIGHT/UP navigates cells\n  * SPACE selects a checkbox if in current cell\n  * TAB moves to next input (even if in next row)\n  * Special keys like '+'/'-' are required to expand / collapse\n    May also depend on the currently active cell\n  * Ascii enters text input or selects dropdown\n  * F2 focuses dropdown or text input, so that cursor keys are handled by the\n    controls.\n    It can also put a node title into rename mode\n  * ESC ends edit mode of the grid (or cancels 'rename')\nIf often used a large treegrid with lots of controls as main component of a page.\nEditing of the structure was the main purpose, so it should be possible to\ndefine the edit mode as 'always on'?\nSo I am not convinced myself that this would be a perfect solution.\n. > Are we at all close to finding a common solution? :)\nThere's only one way to find out ;)\nI can draft a protoype extension that follows your spec during the next days, so we can play with it in addition to your example implementation.. Thats great news.\nI started a branch with a new protoype extension for Fancytree, (ext-ariagrid) and it is basically working already.\nI will implement your latest changes to the spec, and we can have an option to toggle the mode as well.\nThere are still some problems with focus behavior when cells contain embedded checboxes or text inputs in combination with cursor keys, tab key and/or clicking. Hope to fix this this until next weekend, so we have another prototype evaluate. I think I can simply add this to the trunk and put it online, since hardly any changes were needed in the core code.. btw. one idea I experimented with was to allow ESC to switch from cell mode back to row mode. What do you think?\n(and maybe ENTER to switch from row- to cell-mode, but I am not so sure here). I merged the ext-ariagrid extension to master (example here, code here).\nI have not yet implemented all of your recommendations above, so it is a bit too early for review - I'll let you know.\nJust to make sure: you proposed to remove aria-labelledby even from the plain tree?\nShould we add aria-posinset, -setsize, and -level to the tree as well, or are the readers smart enough to figure out ?\nBTW. I agree that aria should be enabled by default, when the spec has settled and performance is not affected too much, so the extension may become part of ext-table later.\n. I see, thanks.\n\nHave you seen any performance issues caused by ARIA usage before?\n\nI observed that small changes to the rendering logic sometimes had unexpected (by me) impact. \nHavn't measured aria so far, just mentioned it, because performance with a high number of nodes is one important requirement. We can simply benchmark and/or optimize, once the spec is implemented.. Also usability for huge grids with embedded cells is an important use case for Fancytree.\nI hope you don't mind if I brainstorm some more...\nI am still a bit concerned about having to expand (potentially a lot of) nodes, just to switch to cell mode.\nS.th. like enter/esc seemed natural to me.\nSame with having to cursor to the boundaries just to switch back to row-mode, because I want to expand or collapse now.\nWould it be valid for Fancytree to support + / -even if it is not defined in the spec?\n(Maybe having a strict and relaxed aria mode)\n\nEnter key should continue to perform the default action on the cell. If there is no other default action on the cell and it contains an expander, then Enter should toggle expansion.\n\nAgreed, but in row-mode? Your current implementation defines alert column 3 as default action.\nCould Fancytree simply define  enter cell mode as default action on rows? \n\nEscape is not the best idea for focusing the row, because screen readers unfortunately use that to exit forms mode. Yuck.\n\nToo bad, I wasn't even aware of a forms mode. \nI noticed in grid example 2 that ENTER/ESC is used to enter/exit edit mode on embedded inputs and dropdowns.\nSo rows could be handled as another layer of edibility, so that \"cell-mode\" means \"edit-row\"-mode  and it seems to have a nice symmetry:\nrow-mode  =ENTER=>  cell-mode  =ENTER=>    edit-input\n          <=ESC=               <=Esc/Enter\nAny hope that Esccan be handled by screen readers this way, if W3C specifies so?\nThis would also help with the problem in my current implementation, where you can get stuck in a text-input when you move around with cursor keys. Then only Tab can get you out.\nIf however Enter was required to edit a cell input, you can simply run over it with cursor keys.\n(Unlike in the grid example, I would allow to start editing by typing alphanumeric keys as well. Maybe in relaxed mode only)\nAs you can see, I am a complete greenhorn concerning screen reader behavior, so hopefully some of the above makes sense :). Thanks for taking the time to answering and sharing some background. I ping you when I have s.th. testable (please allow some time for me to implement). . Hey @aleventhal ,\nI finally found some time to work on the prototype. There are still some problems when navigating in the different modes with Cursor-Keys, Tab-Keys, and mouse clicks, but if you like, you could give some early feedback.\nhttp://wwwendt.de/tech/fancytree/demo/sample-aria-treegrid.html\nI added the cellMode option and a new extendedMode option, so we can play with some additional ideas in the same code base.\nThere is also a newdefaultCellAction callback.\np.s.\n(could you point me to the latest specs, some of the rawgit  links are broken for me.). Thanks for looking into it!\n\nThe aria-activedescendant must point to the row when a row has focus, and point to a gridcell when a cell has focus. This is critical.\n\nDo we need to render IDs on all rows and cells or can we simply use a constant ID aria-activedescendant=X and then move the id=X attribute around? This would be easy, but I have a feeling it would violate some specs?\nConcerning the 'button' and 'img' roles, I did not know what I was doing there, probably seen it somewhere else. We should change as you suggested.\n\nWould you like me to help with the code? I'd be happy to.\n\nsure, very welcome!. @aleventhal fyi, I fixed and uploaded your first two suggestions.... I released as patch, since still unofficial and I want to merge another branch into the next feature release. Let me know how it works out :). I probably broke that recently, but I think before active-descendant was pointing to <span class=\"fancytree-title\", not <span class=\"fancytree-node. Will the readers understand that the node's title is in a sub-element, even if active-descendant points to the parent?. Did it, and moved aria-selected, and aria-expanded from the <li> to the node span as well.\nAlso modified 'button' and 'img' roles as suggested.\nYou can view here and here, before I release a new patch.. I released the current state as patch (I will be mostly offline next week). Thank you Aaron, and sorry for the delayed response!\nad A.1.\nI tried your /src patch locally, but it does not seem to handle lazy nodes correctly (see my review comments). I did not test your changes to the /dist branch however, which seems to be different, but will be overridden by the build step.\nCould you check that please?\n(Testing for hasChildren() !== false should work, since it returns undefined for lazy nodes, and we want to treat lazy nodes as if they had children.)\nad A.2.\nI admit that the 'expanded' flag in the data model is a bit confusing. It may be set on empty nodes as well, because (in OS X Finder for example) even empty folders may be expanded. I wanted to make this behavior possible some time, even if the current implementation will hide the expanded icon in that case. \nFor now the aria-expanded attribute should match the visible status of the expander icon, i guess (expanded, collapsed, absent)? So if your patch works, it's fine.\nad B.\nI realized that in ChromeVox the rows got reported as \"N of M\", but the M was the total number of rows, not the sibling count. I never know, what I can expect from the reader software. Great, if your patch fixes that.\n\nMy apologies if I led you down the wrong path on that before.\n\nNo problem; we should go as many rounds as it takes to find the optimum :). @aleventhal merged, thanks.. It seems that jQuery addClass() already tries to avoid setting unmodified classes:\nhttps://github.com/jquery/jquery/blob/master/src/attributes/classes.js#L43. There is no official roadmap, but probably during the next two weeks... There are still some issues pending.. Thanks, I merged. In the past, I found the focus handling a bit tricky, so let's see what happens ;). No, sorry there is currently no option (or even specification) to enable this per node.\nI probably refactor this feature a bit in the future (see also #626), if you have a concrete proposal for a specification, please let me know.\nNote that you may be able to implement your own flavor of selectMode 3, by using selectMode 2 and implement some custom event handlers.. This is caused by a different behavior of the jQuery UI 'blind' effect implementation.\njQuery UI 1.11 wrapped the the element inside a <div class='div.ui-effects-wrapper'> wrapper, while the animation is running.\njQuery UI 1.12 does not create this wrapper, so the existing corrective CSS rule do not apply.. See also #716\nThis is caused by a different behavior of the jQuery UI 'blind' effect implementation.\njQuery UI 1.11 wrapped the<ul> element inside a <div class='div.ui-effects-wrapper'> wrapper, while the animation is running.\njQuery UI 1.12 does not create this wrapper. Instead another element is appended after the <ul>\n<ul class='ui-effects-placeholder'>.\nSolution:\nWhile an animation is running, we add a class fancytree-animating  to the parent <li>.\nAlso a CSS rule is added:\ncss\nli.fancytree-animating {\n    position: relative;\n}\n(we also add this class to the node's <ul> directly for #716). I am not sure if understand the problem.\nYou are calling node.setSelected(true) on every node of the tree, so you should get an event for every node (unless it was selected already).\nException:\nIn selectMode: 3 however, selecting a node is propagated down to all descendants (without generating events for them). So when the visit iterator reaches the descendants, they are already selected and thus generate an event.\nSo you will only see events for the top nodes.. Adding an inline style while animation is running seems to solve it:\njs\n$(node.ul).parent().css(\"position\", \"relative\");\n. Turned out that renderStatus resetted the fancytree-animating class. Thanks for contributing.\n\nFancytree requires that node.key values be unique throughout the whole tree. FancyTree clones allows multiple nodes to share they same refKey. \n\nYes, that is the essence.\n\nThis refKey should be a small integer. It is an index into an array. Each cell in the array is the list of nodes that share that refKey. \n\nNo, it can be any string, for example a product-number, a GUID, ...\nDon't be mislead: in JavaScript Arrays and Objects are virtually the same.\nWe can 'index' properties on an object like so: myMap[\"attrName\"]\n\nSo if you modify a node's refKey, you have to do it through the api, so that it can update the arrays.\n\nExactly.. Hi,\nthanks for contributing!\nthe wiki was not accurate: it mentioned a feature that is currently under development in a different branch: https://github.com/mar10/fancytree/tree/ext-select.\nI am currently planning to merge this for releases 2.23. It would be great, if you would look into it then, and maybe give feedback, or adjust the PR then, if still required.. @aleventhal Aaron, I don't think that I will be able to look into this in a short term, so unless you have some time I would undo the #708 optimization patch for a quick fix... (already re-opened it, so we can take care of it later). http://plnkr.co/edit/e1D1kJsSjmF1GliEV3mp?p=preview. I think this was fixed with this patch #722 \nCan you confirm it's ok with the latest release (2.22.1)?. Sorry, the documetation leaked too early. \nThis will feature will be added with the next minor release (probably 2.23). The Wiki is a bit ahead of time. This feature is only available when the branch is merged, probably with 2.23.\nSorry for the confusion.... npm install jquery.fancytree seems to be ok, and you did not give much information to help..\nI think Stackoverflow may be a better spot to ask specific questions anyway.. @marczi , @aleventhal \nI committed a patch, can you confirm that it fixes your issues (bug and performance improvement)?. nodeRender needs to take care about any potential changes to a node and its descendants' data model, including synchronizing the order of <li> markup.\nhttps://github.com/mar10/fancytree/blob/master/src/jquery.fancytree.js#L3464\nThe code has grown over the years, so there may be room for optimizations as well.... You can use the dnd5 extension (instead of dnd).\nThis depends on HTML5 standards and does not require jQuery UI draggable/droppable. Could not reproduce with 2.23.0 - may be fixed in v2.22 with #699 ?\nPlease re-open otherwise. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Answered here. It's not built-in so far, right. (Partly because an universal solution would need to define if and when selection ranges should be possible across different node branches.)\nThe click (and some other events) pass data.originalEvent that you can use.\nSome pointers: \nhttps://github.com/mar10/fancytree/wiki/TutorialEvents\nhttp://wwwendt.de/tech/fancytree/doc/jsdoc/global.html#EventData\nhttp://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree_Static.html#eventToString. Yes, i would suggest to add some custom css that overrides the standards, for example\ncss\nspan.fancytree-node span.fancytree-active span.fancytree-title,\nspan.fancytree-node span.fancytree-selected span.fancytree-title\nspan.fancytree-node:hover span.fancytree-title\netc.. Simply  pass a filter callback, instead of a string. You'll find an example in the docs:\nhttps://github.com/mar10/fancytree/wiki/ExtFilter. escapeHtml() must be called on the node.title for display.\nHowever we must not apply the highlight matcher on the escaped text, since we don't want to highlight a \"u\" character in the &quot; entity for example.\nSo a better approach would be\n\nsplit node.title at match - boundaries\nhtml-escape the single parts\njoin the escaped parts with <mark> tags. Passing an empty string (\"\") as filter option should result in a call to tree.clearFilter(). Could you try with the latest releases?. Thanks for contributing.\nI must admit that I did not yet use webpack, so I do not fully understand the problem.\nIs it related to this: webpack-contrib/less-loader#79 ?\nWhy is our build script able to compile the css files from less, but webpack is not?\n\nBtw.:\nno need to patch the dist/... files, they are built by scripts. It only makes the diff harder to read ;-). Hi @abedi-ir \nI recently found some time to play with webpack. Fancytree 2.25 contains some changes that make it easier to import Fancytree core and modules directly.\nI also noticed the problem you are trying to solve: \nIt seems that webpack resolves paths using /skin-common.less as root, while the grunt build process uses /src/skin-win8/ui.fancytree.less as root.\nI applied your changes pretty much 1:1, but needed to fix the grunt-less builds by prepending a '..' as rootpath.\nSince the dist layout and code has changed a bit, I was not able to merge your PR easily.\nI hope you don't mind; Kudos are on you ;-)\nMaybe you want to test, if the latest version (2.26) will work in your scenario as well, as soon as it is released.. There seems to be s.th. like this https://www.npmjs.com/package/angular-fancytree , but I don't know if and how it works, or if it is still maintained.\nMay be you could let us know if you find out more, or have a running sample.... Hi,\nhave a look at the docs, here for example:\nhttps://github.com/mar10/fancytree/wiki/TutorialLoadData#howto-reload-tree-data\np.s.\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\n. This can b econ trolled using the unselectableStatus andunselectableIgnore options.\nSee https://github.com/mar10/fancytree/wiki#selection-and-checkboxes. I have never tried this, but maybe you can try s.th. like this\nhttps://stackoverflow.com/questions/13331193/multiple-versions-of-jquery-on-the-same-page\nand modifiy the the source of you project or fancytree.\nBut frankly I don't think that this will be easy (if doable at all).\nIf possible I would reccommend to upgrade your project to  1.9 or higher.. js\njq19(\"#tree_container\").fancytree(\"getTree\").setFocus();\nshould do the trick. Since clikcing a button will set the focus to the button in the first place, you may have to call this from within a setTimeout however...\nps\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. You are right, the API is working as expected, but I broke the sample code.. In order to apply a second theme in parallel I guess one would have to \n\nadd some additional class to the tree container\ncreate a new less/css file that specifies this class as additional selector to most of the rules\n\nI am not currently planning to write such an example, but if you create one, we could linkt to it in the docs. Could be related to #748 / #713.... Answered here\nhttps://stackoverflow.com/a/45510352/19166. Hi,\nfalse should be a valid value for unselectableStatus. These should be defined on the child nodes as shown here:\nhttp://wwwendt.de/tech/fancytree/demo/#sample-select.html\nI am not sure, if I understand the problem you are describing.\nCan you please set up a complete example (jsFiddle, Plunkr, or similar) that shows your problem?. You can use\n$(\"#tree\").fancytree(\"option\", \"selectMode\", 3);\n\nSee https://github.com/mar10/fancytree/wiki#configure-options. As the message (... did you forget to include it?) suggests: I assume you did not include the JS files.\nSee the source code here for an example:\nhttp://wwwendt.de/tech/fancytree/3rd-party/extensions/contextmenu/contextmenu.html. This can be fixed using CSS: \nfor example, you could add overflow to the container (or another parent element like so:\ncss\nul.fancytree-container {\n  overflow: auto;\n}. Thanks, the exception is a bug.\n\nIt seems there is no way to drag nodes from one tree and drop onto another tree that has no nodes anyway \n\nCurrently true. For this, the container area could accept drop events and delegate them to the invisible root node.\nIf you open am issue for this feature request,I can look into it some time. I can't promise a fast solution though.. That's great news.\n\nOnce it's solid, I'll logic to place marker before top node or after last node depending on pointer entering from top or bottom.\n\nMaybe this is not even required, since above would mean that we already had a node there at the top, that then would already handle the drag events?\nSo any drop on the free container space would be at the top if the the container was empty or below the last top-level node otherwise?. I am closing this bug issue since it should be fixed now - would you open a new one for the feature request?. Yes, contextMenu is not an official part of fancytree and should be added manually.\n(Which previous version where you using that contained it?). Could this be a duplicate of #748 ? If so, it was introduced with 2.22 (you could try if the problem is gone with 2.21.0). I already have started a branch to find an alternative solution.... @TimNZ I merged a change that should change the behavior. Could you try this?. This seems to be yet another regression that was introduced with #713.\nIt should be fixed with #748. Clicks on <a> tags seem to (sometimes) generate focusout events on nodes and containers.\nNo idea, why how this is related to the ext-filter extension. (It seemed to depend on the browser version as well.)\nHope this is fixed now by ignoring 'focusout' on embedded <a>s. Seems to be a tricky one - I'll re-open. Update #712\nClose #748 \nClose #755 \nClose #764 . Thanks.\nThe problem was that focusin was handled eagerly. This will be fixed with the next patch.. That's true, we should check if a node has a checkbox enabled, instead of relying on the global tree setting.. Thank for contributing.\nGenerally I agree that declaration and assignment should be joined.\nHowever, In this particular case, I'd like to keep the locality between the assignment and the subsequent increments. i = 0 could rather be moved after the _setCell() function for that purpose.. I tried to reproduce it with the ext-glyph and these includes\nhtml\n<link href=\"//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\" >\n<link href=\"skin-bootstrap/ui.fancytree.css\" rel=\"stylesheet\">\nand this config\njs\n$(\"#tree\").fancytree({\n  extensions: [\"glyph\"],\n  source: SOURCE,\n  glyph: {\n    preset: \"awesome4\",\n    map: {\n      // Override distinct default icons here\n      doc: \"fa fa-cog fa-spin\"\n    }\n},\non Safari the cog icon was wobbling as you describe.\nI was able to fix it by adding the fa-fw class:\njs\n      doc: \"fa fa-cog fa-spin fa-fw\",\nIf this works in your scenario, we could simply add the fa-fw class to the default presets.... @jeevasusej were you able to try this out?. Assuming ok, for now. Hi,\nI only see this problem on FF (not Chrome, IE 11, Safari, Edge)\nSeems to be a known problem:\nhttps://github.com/FortAwesome/Font-Awesome/issues/11651\nI don't know how to fix this, if even Font-Awesome does does not seem to have a simple solution.\nI am open to suggestions though.. The PR was rejected since we don't want generally complicate the markup just because Font Awesome 4 doesn't get spinning animations right for Firefox.\nThis can be fixed more specific like so (expand the 'more...' node):\nhttps://codepen.io/mar10/pen/yvrWzP\n(Font Awesome 5 doesn't seem to require this: https://codepen.io/mar10/pen/PQvPjK). See #770. @jcrosetto could you try your proposed solution, i.e. remove the jQuery UI wrapper, and let us know if it works?. jQuery UI is included from this here during the build process: https://github.com/mar10/fancytree/tree/master/src/jquery-ui-dependencies\nMaybe it is possible to patch these files to make it work.... @jcrosetto thanks for contributing!\nI was working on a branch in parallel, not noticing your PR, sorry.\nWill merge, so you get listed as contributor.\nHowever the 'mapfiles' branch also addresses \n  * generate source map file for jquery.fancytree-all-deps.js\n  * import dist/jquery.fancytree-all-deps.min.js by default\n  * 'npm install jquery.fancytree` no longer installs unnecessary files (only dist/ folder)\n  * support for Node/CommonJS\nCould you try if this also works for you as well:\nbash\n$ npm install git://github.com/mar10/fancytree.git#mapfiles. It would help to test for sure. If it helps: the dist/ folder of the branch already contains a recent build.\n. Thanks for taking the time! I will merge the branch and release with 2.25. @allavoie did you post this text 3 in three different issues? \nI think we should handle it with #796 . Cool, thank you!\nI started a tutorial page for this: \nhttps://github.com/mar10/fancytree/wiki/TutorialIntegration#howto-run-fancytree-with-angular-4\nFeel free to edit it there to your likings.. Thanks @jvasi \nare those definitions current? The comment says Fancytree 2.7.0...\nWho maintains that definitions?. Currently the selection code in the Fancytree core does not know about the filter status, but it is probably easy to roll your own in selectMode 2, by implementing a click or select handler that checks for the node.match attribute.\nHowever, if you are talking about selectMode 3, it get's more complicated.\nFor example, in your scenario would the parent checkbox be selected or part-selected, when you checked it, but some child nodes are hidden?. This certainly should be fixed, but closing this for now, since the plugin is still 'experimental'.. Thanks for reporting this. (Please keep in mind that this plugin is still experimental and not yet ready for production ). This certainly should be fixed, but closing this for now, since the plugin is still 'experimental'.. I started a branch recently to restructure all-deps and generate map files. There I also added a new main entry to package.json.\nDoes this work for you?\n$ npm install git://github.com/mar10/fancytree.git#mapfiles\n\n. Thanks for your feedback!. ext-wide creates CSS rules in the html header on the fly, taking into account the value of the checkbox: false option.\nThis is currently done in the treeCreate phase.\nA possible solution would be to pull this code into an exported method, so it can be called by developers.\nIt could then also be called automatically after the checkbox option was modified.. Ah sorry, the comment was not directed at you specifically, but just an analysis how to fix it (I classified this as bug). It will probably be fixed in the next release.. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Thanks. I just answered your question here, hope it helps\nhttps://groups.google.com/d/msg/fancytree/CKe-_VLGxWM/145L2q9dAgAJ. Thanks. Maybe you found a bug. Until it is fixed you may inspect data.originalEvent to find out what was clicked.. Thanks for the feedback!\nFeel free to open a new issue with the webspack error message and .config.. Thanks for contributing!\n1.\nCan you please explain what exactly the problem is that you are trying to solve,\ni.e. what do you mean by 'able to cancel few operations if the server is unable to process'?\n2.\nIf I understand correctly, the 'folder' extension is unrelated to the above change, \nat least node.addChildren is not used by your plugin.\nHave you tried to implement this behavior using the modifyChild event?\nI like new plugins being implemented, but I am hesitant to add this to the standard dist, when they can be easily implemented using core API, so I'd like to check that first.\n(But of course you could publish it an own repo, I would happily link to it)\nAnyway we should separate topics as separate PRs.. Thanks for explaining.\nad 2.\nMaybe you want to create and maintain that plugin in a separate repo. \nYou could name it 'fancytree-contrib-folders' for example, and we could link to it. That might be a good naming conventions for 3rd party extensions?\nWe should not handle it with this PR anyway.\nad 1.\nThat's an interesting use case. \nIn such scenarios, I typically do it like this (for example adding a node):\n\nUser requests adding a node (via context menu, shortcut, ...)\nA node is optimistically created, with a class 'pending' that applies some visual clue like italics\nAjax request is also issued explicitly by the developer\na) Ajax returns ok: remove 'pending' class\n      b) Ajax returns error: undo the operation, i.e. remove the temporary node\n\nThe same pattern can be used for removing and renaming.\nI also have a reactive implementation that uses Firebase as backend. The pattern there is a bit different:\n\nUser requests adding a node\nThe value is sent to the database via Ajax\nThe app has subscribed to the database, and get's an update notification\nThe new state is rendered, i.e. converted to an addChild call\n\nI understand your approach like this\n\nUser requests adding a node (via context menu, shortcut, ...)\nnode.addChild() is called\nnode.addChild() sends an Ajax request and returns immediately\na) Ajax returns ok: now _super.apply is called\n      b) Ajax returns error: no node is added; optional user message\n\nI am not sure what happens when super.apply is called a few seconds later from am asynchronous callback:\nthe _super property is only injected temporarily while the original method is executed, so it probably explodes!\nCompared with the first pattern, this also provides no feedback to the user while the operation is pending.\nSince you are asking for hooks, I assume you are creating a separate (maybe closed source) extension for this?\nI am not against providing nodeAddChildren, but it may be worth discussing a general pattern that would allow to implement your requirement, or make it easier to implement the first pattern. . Instead of\nrequire('jquery.fancytree/dist/jquery.fancytree-all-deps.js');\n\nyou could use s.th. like this instead:\nconst fancytree = require('jquery.fancytree');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.edit');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.filter');\n\nSee https://github.com/mar10/fancytree/wiki#use-a-module-loader\nDoes this help?. jquery.fancytree includes jquery as dependency.\nAnd jquery.fancytree.glyph includes jquery.fancytree as a dependency.\nSo in your scenario it should be enough to include only jquery.fancytree.glyph. Although I think it is more explicit as you did.\nI did not work with typescript yet; what is treecomponents.ts?. Did you include the Fancytree CSS corectly?\nCould you please set up a jsFiddle, Plunkr, Codepen or alike to help debugging this?. Very cool indeed, I think I should add this as a demo ;-)\nThanks!. @iAmShorty I added this as demo here: http://wwwendt.de/tech/fancytree/demo/#sample-3rd-confirm.html. I assume this is a duplicate of #796 . Yes, a demo would help.\nBtw. if you are using require or import, did you try to load the modules directly, like\n```js\nconst fancytree = require('jquery.fancytree');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.edit');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.filter');\n```. With 2.26 you should not need to explicitly include jQuery UI anymore. Also jquery.fancytree-all-deps.min is not needed (which also already contains the needed jQuery UI components)\nInstead use the single modules directly from the dist/modules folder, e.g.\njs\nconst fancytree = require('jquery.fancytree');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.edit');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.filter');\n(The core module jquery.fancytree/dist/modules/jquery.fancytree is defined as main, so we can include it like require('jquery.fancytree');)\nSee also https://github.com/mar10/fancytree/wiki#use-a-module-loader\nThat's the idea anyway. I am curious to hear if it works for you.\n. Thanks a lot for preparing this excellent reproduction support!\nThere was still a bug in Fancytree 2.26 concerning the UMD requirements (Node/CommonJS mode).\nThe core module 'jquery.fancytree' depends on the support module 'jquery.fancytree.ui-deps', which could not be resolved. This fix will be released with 2.27 (maybe you can apply this patch manually until it's available):\n\n. Hi @allavoie if you want to update and it still doesn't run please let me know. I could set up a demo based on your sample and try to get it to work.. @PeterAJansen I am interested in that too. Do you have a non-working sample that you could share?. Starting with the electron sample, I added this changes, that seem to work.\npackage.json: \n(by invoking npm install jquery.fancytree --save)\njson\n  \"dependencies\": {\n    \"jquery.fancytree\": \"^2.30.0\"\n  }\nrenderer.js:\n```js\nconst fancytree = require('jquery.fancytree')\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.filter')\nconst tree = fancytree.createTree('#tree', {\n  extensions: ['filter'],\n  source: [\n      {title: 'node1'},\n      {title: 'node2', folder: true, children: [\n          {title: 'sub1'},\n      ]},\n    ],\n});\ntree.expandAll()\ntree.applyFilter(\"1\")\n```\nindex.html:\n```html\n<!DOCTYPE html>\n\n\n\nHello World!\n\n\n\nHello World!\n<div id='tree'></div>\n\n<script>\n  // You can also require other files to run in this process\n  require('./renderer.js')\n</script>\n\n\n\n```. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. As understand it, think this is question not related to Fancytree, but generally on HTML tables and CSS.\nI would suggest that you create a jsFiddle, Plunkr, Codepen or alike and ask this on Stackovwerflow\n(Feel free to comment here if you think this is especially related to Fancytree however.). Sorry, but I don't understand the problem from your explanations. Please read this:\nhttps://github.com/mar10/fancytree/wiki/HowtoContribute#report-issues\n, add live demos and/or screenshots to make it more clear.\n. This has nothing to do with Fancytree. Table scrolling is a general CSS/HTML topic, for example https://stackoverflow.com/a/4457287/19166. Thanks!. (please use Stackoverflow for questions in the future)\nIf you never render those nodes, you could consider to remove them from the tree altogether.\nIf you simply want to hide them sometimes, have a look at the filter extension. You could pass a custom filter callback that uses node.getLevel() for example. Could you please explain in some more detail what use case you are trying to fix?. Thanks for contributing!\nIn selectMode 3, only end nodes can be selected. \nParent node's checkboxes are just an easy way for users to do a 'select all'/'deselect all'.\nSo I think the current behavior is Ok and changing this paradigm could break existing apps.\nNote that I am not saying that your use case does not make sense as well. But if you want to select distinct parent nodes, you probably have to go with selectMode 2 and implement selection propagation yourself in the select handlers.. findFirst(string) returns the first match using 'contains insensitive'\nyou should pass a match callback instead of a string if you want custom (i.e. exact) matching. I tried with js-cookie 2.2.0 and it seemed to work.\njs\nif( typeof Cookies === \"function\" ) {\n    // Assume https://github.com/js-cookie/js-cookie\n    cookieSetter = Cookies.set;\n    cookieGetter = Cookies.get;\n    cookieRemover = Cookies.remove;\n} else {\n    // Fall back to https://github.com/carhartl/jquery-cookie\n    cookieSetter = cookieGetter = $.cookie;\n    cookieRemover = $.removeCookie;\n}\n...\n  _assert((instOpts.store !== \"auto\" && instOpts.store !== \"cookie\") || cookieGetter,\n    \"Missing required plugin for 'persist' extension: js.cookie.js or jquery.cookie.js\");\nWe test for cookieGetter. Is it defined in your case? Maybe js.cookie is not loaded before Fancytree?\n(Fancytree tests for it, but does not require it per UMD as dependency since we can go without if store is set to localStorage/sessionStorage)\n. How did you include Fancytree?. Thanks for reporting this. The module support is new with 2.25 and there are still use cases that need to be fixed.\njquery.fancytree.ui-deps.js is in fact the original jQuery UI custom build.\nDoes one of this work for you:\n\n\nAdd another alias\nWe use an alias in webpack.config to make sure the same global $ instance is used. (see here).\nMaybe it is possible to add another alias for your case?\nSomething like this, if that makes any sense:\njs\nresolve: {\n    ...\n    alias: {\n      // NOTE: Required to load jQuery Plugins into the *global* jQuery instance:\n      'jquery': require.resolve('jquery'),\n      'jquery.fancytree.ui-deps': require.resolve('jquery-ui')\n    }\n  },\n\n\nSimply return if $.ui exists\n\n\nMaybe it's even simpler if that works, by modifying jquery.fancytree.ui-deps.js:\n```js\n...\n}(function( $ ) {\nif( $.ui ) {\n    return;\n}\n$.ui = $.ui || {};\n```\n. > but why would we load two instances of jQueryUI, if we already have everything FancyTree needs? This will increase the assets size with no reason, as I see it.\nI was thinking that the alias simply assures that jquery-ui is used instead of jquery.fancytree.ui-deps.js. That's how it worked with the jquery alias at least.\nHavn't tried it though, have you?\n\nSecond solution will break your code, as you can not be sure, that existing jQueryUI has everything FancyTree needs, right?\n\ntrue\n\nSo, ideally, every definition in jquery.fancytree.ui-deps.js should first check, if such item already exists, and define itself only if it does not.\n\nI was trying to avoid to patching the original source, since it would be error prone on updates.\nBut given that jQuery UI development is rather lame recently that might not be a problem anymore.\n. I couldn't reproduce it, sorry.\nCould you set a a jsFiddle or plunk please?\n(hideCheckbox = true is deprecated. Use checkbox: false instead). Could you set a a jsFiddle or plunk please?. Hi,\nthis project's language is English, please translate...\n. Thanks, but this is no bug. The sample prints the result of tree.getNodesByRef() as string and the string representation of nodes is currently \n<FancytreeNode(#KEY, 'TITLE')>\nIn real life you would access the node list using object methods, of course.. Thanks for reporting this!\nThe AMD header came in by a copy/paste error. It should rather be like in the minified version.\n(One goal I try to achieve is better support for ES6 module loading and also to remove / hide dependencies from jQuery UI.) \nI will look into it over the weekend.. Btw. are you aware of the changelog, updated documentation, and tips\n```js\n// Import LESS or CSS:\nimport 'jquery.fancytree/dist/skin-lion/ui.fancytree.less'\nconst $ = require('jquery');\nconst fancytree = require('jquery.fancytree');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.edit');\nrequire('jquery.fancytree/dist/modules/jquery.fancytree.filter');\n``\nThere's also another issue about a relate topic: #796, #793 . The idea is, to remove all external jQuery UI dependencies from Fancytree.\nSojquery.fancytree.ui-deps.jsis a (somehow hidden) module that brings in the internal dependencies without forcing users to import jQuery UI:\nwe don't want to introducerequire jquery-ui-...` here.\nHowever, if users already include jQuery UI anyway, it should run as well. Maybe you can test if this works for you: #803 (note that the fix there is only in the repo, but not yet released...). I moved and cleaned up some docs here\nhttps://github.com/mar10/fancytree/wiki/TutorialIntegration\nWould be great if you could give some feedback if that works for you.. > Normally no one provides dependencies.They should be added in project.\nAgreed, but I no longer want to add dependencies to jQuery UI for all users or the main use case. \nIt is imposing a requirement that is simply too bloated for a lot of users that use modern frameworks.\njQuery UI also did not receive much development activity recently.\n\nif I already have jquery-ui then jquery.fancytree.ui-deps.js is extra bytes that i dont need\n\nYes, I know. Currently it needs to be loaded, even if $.cleanData = $.cleanData || ... is used. \nIt's a drawback of the current approach.\n\nbut i am not sure if it is a good idea. a change in version of jquery-ui could cause pitfalls\n\nAnother drawback of the current approach, but I assume not too hard. The last update was 2016-09-15 :-/\n\ndist\\modules\\jquery.fancytree.dnd.js already uses \"jquery-ui/ui/widgets/draggable\", in amd block.\n\nAlso true. The UI draggable and droppable widgets are not included in the internal jquery.fancytree.ui-deps.js, and the 'dnd' extension makes only sense if jQuery UI is used anyway.\nOtherwise the 'dnd5' extension should be used instead.\n\nBest solution would be provide just 2 separate files\ndist\\modules\\jquery.fancytree.js\ndist\\modules\\jquery.fancytree-deps-ui.js\n\nI don't think this will be enough, because we also need 2 versions of every extension:\none that requires jquery.fancytree.js and one that uses jquery.fancytree-deps-ui.js\nSo I'd rather go with two folders:\n  - dist\\modules\\jquery.fancytree.js\n  - dist\\modules-ui-deps\\jquery.fancytree.js\nThis requires modifications of the src files and build process, which is the main reason I went with the current compromise.\nSince we seem to have a working version (yet with some drawbacks) I close this issue and open a new feature request for the refactoring.\nIf you have other suggestions how this could be fixed, we can still discuss in this issue, even if closed.. That would be a good improvement - I think I am going to implement it like this if find time.\nThanks for suggesting.. @AudriusButkevicius \n\nIt would be nice if it was possible to capture which nodes were expanded prior the reload, and expand if they exist after the reload.\n\nThis is what ext-persist should do.\n\nAlternatively, I guess I could use with some API that allows me to hide/not draw nodes that return true for some callback\n\nThis is what ext-filter tree.filterNodes(filter, opts) should do, when you pass a callback as filter.\nI am not sure how this relates to this issue though (suggesting configurable storage backends).. @mafar I started a branch with a first implementation, not but tested though. Maybe you want to check if this works for you, before I merge.\n@AudriusButkevicius The new pattern should allow to pass a custom storage providers that simply uses a dict.\n\nPass an object to define a custom storage provider. The provider must implement three methods. This example shows how the 'session' provider is implemented:\njs\n  store: {\n    get: function(key){ return window.sessionStorage.getItem(key); },\n    set: function(key, value){ window.sessionStorage.setItem(key, value); },\n    remove: function(key){ window.sessionStorage.removeItem(key); }\n  }\n. I already fixed that yesterday in a subsequent commit, here's the latest version:\nhttps://github.com/mar10/fancytree/blob/custom-storage/src/jquery.fancytree.persist.js\n. @mafar well, it was mainly your proposal, so kudos are on you ;-) \nI merged the branch. Thanks for contributing!                  . Thanks!. ext-dnd is primarily useful when you want to cent with jQuery UI draggables/droppables (which would require to explicitly load jQuery UI in your project).\nYou could use ext-dnd5 instead, which is based on the more modern mtml5 APIs\n(alternatively use jquery.fgancytree-all.js and include jQuery UI as well). Sure, you can simply modify the CSS file or better include another CSS file with custom rules.\nRules look s.th. like \ncss\n.fancytree-plain span.fancytree-active span.fancytree-title,\n.fancytree-plain span.fancytree-selected span.fancytree-title {\n  background-color: #f7f7f7;\n  border-color: #dedede;\n}. you need different rules for ...-active and ...-selected selectors. Thanks!. Where did you look so far? Did you read the docs?. You'd typically us a package manager like yarn, nom, ....\nHave a look here for samples and alternatives.\nhttps://github.com/mar10/fancytree/wiki#getting-started\nYou could also read the general docs for GitHub.\nThis seems to be a rather basic question about this concepts, so may ask on Stackoverflow.. Thanks :). I could only reproduce this if source data contains nodes without a title attribute. Can you confirm that all your nodes have a valid title set?\n(I will add a check for this though.). I tried with ~11000 nodes without any problem. Unless a title is missing or null.\nYour error message also indicates this ('indexOf' of null...). You could try to set a breakpoint there (maybe adding an if ( !node.title ) to check or print invalid titles. or you attach the JSON, so we can try to reproduce here.\n. No problem, and thanks for reporting the solution!. There is currently no demo for dragging and dropping multiple files with the ext-dnd5 extensions (it's on my list though).\n\nHowever, even in ext-dnd there is no built-in support for this: You can simply implement it using the standard APIs, similar to the demo.. I added a comment here and tagged this issue as 'waiting' last month, but somehow the text has gone - sorry.\nAnyway: the problem seems to be that you only have 4 <th> elements, but only 3 <td> elements defined. So this line does not find a target:\n$tdList.eq(4).html(\"<input type='checkbox' name='like' value='\" + node.key + \"'>\");\n\n(Also, the last <td> has colspan of 6 defined, but should be 2, if you want to sum to 4 columns total). merged. Seems to work again - let's see for how long :-/. I would strongly discourage modifying the original sources.\nInstead, you could use extraClasses (see here) and add some custom CSS rules to apply colors.. Fixed it, sorry\n\nAm 20.01.2018 um 11:07 schrieb Vincent Cox notifications@github.com:\nAre you sure that the link you posted is correct?\n\u2014\nYou are receiving this because you modified the open/close state.\nReply to this email directly, view it on GitHub https://github.com/mar10/fancytree/issues/826#issuecomment-359160631, or mute the thread https://github.com/notifications/unsubscribe-auth/AACiv_eOSmu-s0FaEPPxL5k8DxuUnBDpks5tMbrngaJpZM4Rk1Fq.\n\n\n. Several approaches are possible, for example:\nAdd an event handler to the container that listens for input change events (using event delegation).\nIn this handler you can add use $.ui.fancytree.getNode(event) to find the associated node and write the value to node.data.mny, ...\nNow you have all input data stored with every node and can use node.visit(), to traverse nodes and retrieve data.. The links don't work for me.\nPlease set up a jsFiddle, Plunkr, or CodePen, if you need more help.. Thanks for contributing.\nThe idea is, that ui.fancytree.debugLevel is only used as default for tree instances (and in cases where no instance is available). Your approach would prevent configuration per tree instance.\nSo we need to find another solution. I keep #828 open.. Thanks!. Great, thank you for the feedback . Sorry, I don't understand the question:\nYou have two nodes with Id2, so you get 2 alerts - that seems right?\n(Note that unless you think there is a bug in Fancyree, Stackoverflow may be a better place to ask and discuss such questions). answered here. This should do the trick:\njs\njTree.on('click', \".delete-link\", function(event) {\n                   var node = $.ui.fancytree.getNode(event); \n                });. Thanks for reporting. There was a bug in dnd5 (did not reset the previous drag source, so an external draggable was considered a node). We certainly could improve the documentation here, but I'd need some help since I am not using typescript so far. Could be to set up a simple, startable demo project? We could then work on it to get it to run, and maybe publish it as GH repo later (e.g. 'fancytree-demo-typescript'). Cool, it would definitely help to update the type defineitions and synchronize with the latest release (currently 2.29).\n(e.g. keyEventToString and others are deprecated, eventToString is new, and the some extension specific methods are probably not mentioned.)\nA simple, startable, working demo project could be a great starting point for FT users...\nI am not sure, if (and which) framework/boilerplate should be used. If I understand correctly, s.th. like webpack is common. \nWe could also create a repo 'fancytree-demo-xxx' or similar and add you as contributor, if you like.\n. I improved it a bit, but keep in mind that this is only a proof of concept, not a perfect accordion widget.. Hi,\nthanks for digging in.\n\nAlso, I've noticed a few inconsistencies in your documentation & files regarding Font Awesome 5.\n\nThanks, I fixed the links (the wiki is editable btw., feel free to optimize)\n\nAdditionally, the current prod version of the glyph extension in the dist directory \n\nThis will be released with 2.28 (current is 2.27). The dist/ folder and wiki are not always in exact sync.\n\nwondering if you had tested it out with a large number of files and if you had similar results?\n\nNo, I haven't, but the sample page uses Web Fonts with CSS  instead of SVG with JavaScript. I assume that this is fast.\n\nSo I've made a work around in the meantime. This leverages the SVG sprites...\n\nThat is interesting. I will extend the mapping syntax, so that you can implement this pattern like so:\nhtml\n<i class=\"fas fa-file-regular\" data-fa-symbol></I>\n...\njs\n$(\"#tree\").fancytree({\n  extensions: [\"glyph\"],\n  glyph: {\n    preset: \"awesome5\",\n    map: {\n      doc: {html: '<svg class=\"svg-inline--fa fa-w-20 fancytree-icon\"><use xlink:href=\"#fas-fa-file-regular\"></use></svg>'},\n        ...\n    }\n  },\nI have not tested this, so let me know if it does not work for you.. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Could you set top an example so we can see the code that you are using (e.g. jsFiddle, CodePen, Plunkr, ...)?. Thanks, that was a bug - seems the feature was not used much so far ;-). I think this should be fixed in the core code, thanks.. Did you experience any concrete problems (which)?. node.title is normally stored as raw (unescaped) html, e.g. \"A <b>fat</b> &copy; title\".\nThe escapeTitles option controls how HTML is rendered for display:\n\nescapeTitles === false (default): \"A fat \u00a9 title\"\nescapeTitles === true: \"A <b>fat</b> &copy; title\"\n\nHowever, when editing node titles with escapeTitles off, existing HTML markup is discarded from the input control, since there is no way to enter fomatting like bold, etc.\nWhen the user enters 1<2 for example, it ends up escaped 1&lt;2, so it will be displayed as 1<2 later (WYSIWYG).\nI don't know if there is a better approach, but the idea behind this is, that the input is not meant as a HTML editor, and most users will have a hard time to enter valid HTML syntax anyway. We also don't want to allow XSS injections.. Hi,\nI think you will have a greater audience for questions on Stackoverflow or the Q&A forum to ask questions.. I couldn't reproduce this. \nCan yougive some more details, please. What Browser are you using and what node do you drop where?. Got it with chrome, hopefully fixed now.. Ah, sorry. This is fixed but not released yet - hope i'll find some time soon.  @NigelCunningham , @pmichel-J2S can you confirm that this is fixed for you with the current unreleased code, or otherwise give some more details how to reproduce and/or stacktrace?. Ok, I will look into it again, when I find some time. Thanks for the feedback!. @pmichel-J2S \n\nFor me, at least, the only problem remaining being the necessity of removing the class \"fancytree-drag-source\" manually afterwards. So maybe some portion of code doesn't execute when it should.\n\nI had problems to reproduce this. Could you give some details please (which browser and what did you do)?. While dragging (when moving, but not when copying), a helper CSS class fancytree-drag-remove is set on the source nodes, to give a visual clue that the nodes will be gone after drop.\nThe dragEnd event should remove this class.\nThis seems to break for some reason.. I commited a change, that may fix it (untested) @pmichel-J2S could you try if this solves it for you?. This is not a bug. By default, ext-clones does not support two clones with the same refKey under the same direct parent. \nIn this case, errors are raised:\n\nclones.treeRegisterNode: node.key already exists\n[ext-clones] reRegister(): already exists\n\n(Use the defaultKey option to handle this.)\nThe problem that still needs to be solved with this issue is that the error message is not displayed in the browser console in all cases, when lazy loading and post processing are used.. You are right, I was missing that. Thanks!. You can pass partsel: true in the node data.. I don't think that partialsel  is used anywhere in the code. I on ly know partsel. Can you explain what you did?. Those lines use the static (not tree) logger, I'll fix that. (As a workaround, you can try to set $.ui.fancytree.debugLevel). Maybe this helps:\nhttps://github.com/mar10/fancytree/wiki/TutorialLoadData#use-a-deferred-promise\np.s.\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.. >There are obviously some performance consequences of the deep render. \nYes, that's why I think we should not enforce this costs on all users (that mostly would not benefit from it).\n\nI can force this render in my application code, \n\nI would suggest so.\n\nbut the documentation does say that in theory the moveTo() method is supposed to work out the consequences of the move.\n\nIt may be arguable if this is a contradiction. I would consider getIndexHier() simply a convenience function to calculate that string at a given time. It is not part of the contract that the value is always automatically updated if it happens to be displayed in a table column.. Would the createNode, enahanceTitle, or loadChildren events help?\nIf not, could you describe the use case a bit more detailed, please.. createNode is fired after the <li><span> elements are created, but before it is added too the parent <ul>, so I would think that it is possible to modify node.span for example.\nHowever, one main idea behind Fancytree is the separation of data model and visualization.\nSo you can visit nodes and branches and use node.toggleClass() or add other node properties, that then can be used in the render callbacks.\nMaybe I misunderstood. Setting up a CodePen or jsFiddle might help.. Thank you for the kind feedback!. Hi,\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. I don't understand this issue. Did you close it because it was invalid?\nOtherwise please give some more background (what theme are your using? Best would be a jsFiddle, CodePen or alike).. Could you set up an example (jsFiddle, Codepen, Plunkr)?. This could be a bug. Maybe depending on the different nesting of the target node.\n(Btw. I had to add jQuery to the includes to make the fiddle work.). Thanks for contributing. imports that start with // use the same protocol as the embedding html file, which is ok.\nHowever it does not work with the file: protocol. File access also has problems when you try to load demo Ajax.json files.\nYou can run the demo through a local server like this:\n$ grunt dev\nThis has the additional advantage of checking the code.\nSee here for details . No problem, thanks for contributing!. No, problem, thanks. (I am mostly offline the next days, so I might not be able to respond fast.). Could you post the code (jsFiddle, CodePen, ...) of what you tried?. Please have a look at the demo example here:\nhttp://wwwendt.de/tech/fancytree/demo/#sample-ext-glyph-svg.html\nThis approach seems to work, and should be more performant and efficient as well, because the SVG conversion is only done per icon type (not per icon occurrence).. What is your setup, are you using ext-persist or lazy loading pre-expanded source data?. The demo seems to load immediately, and only uses animations when you click after that.\nHowever, maybe you could try to disable animations (toggleEffect: false) and then enable it in the init event. \n(If you need support for this, please set up a codePen or jsFiddle.). I am not aware of any problems. \nThis works for me here with different browsers onWindows 10 - 64bit:\nhttp://wwwendt.de/tech/fancytree/demo/#../test/test-ext-dnd.html\nCan you give some more details? Anythin to be seen on the browser's console?. While dragging (when moving, but not when copying), a helper CSS class fancytree-drag-remove is set on the source nodes, to give a visual clue that the nodes will be gone after drop.\nThe dragEnd event should remove this class.\nThis seems to break for some reason.. I think this is a problem that was mentioned in #848, so closing this one.. Thank you for the feedback!\nThe sample-multi-ext demo still uses ext-dnd (not ext-dnd5). For me it seems to be fixed here:\nhttp://wwwendt.de/tech/fancytree/demo/sample-ext-dnd5.html \n(drop Users\\jdoe just above etc)\nAre you sure you cleared your browser cache after update?. This is very strange indeed. I see this behavior (Chrome and Safari, macOS)\nhttps://www.dropbox.com/s/te2q8gn3rxko8pc/dnd5-autoexpand.mov?dl=0\nI don't know what's going on there. In case you want to look into it or add some logging, this is the relevant spot in jquery.fancytree.dnd5.js:\n```js\ncase \"dragover\":\n  // The dragover event is fired when an element or text\n  // selection is being dragged over a valid drop target\n  // (every few hundred milliseconds).\n  // console.log(event.type, \"dropEffect: \" + dataTransfer.dropEffect)\n  LAST_HIT_MODE = handleDragOver(event, data);\n  allowDrop = !!LAST_HIT_MODE;\n// console.log(event.type, LAST_HIT_MODE, DRAG_OVER_STAMP)\nif( LAST_HIT_MODE === \"over\" &&\n    !node.expanded && node.hasChildren() !== false ) {\n    if( !DRAG_OVER_STAMP ) {\n      DRAG_OVER_STAMP = Date.now();\n    } else if( dndOpts.autoExpandMS &&\n        (Date.now() - DRAG_OVER_STAMP) > dndOpts.autoExpandMS &&\n        (!dndOpts.dragExpand || dndOpts.dragExpand(node, data) !== false)\n        ) {\n        node.setExpanded();\n      }\n  } else {\n    DRAG_OVER_STAMP = null;\n  }\n```. Thanks, I'll add a guard.. Thanks!. Thanks for the feedback!\nI did similar things at may day job (a drop down with the tree) and also a popup selector here (which could be a gould starting point):\nhttp://wwwendt.de/tech/fancytree/demo/#sample-3rd-confirm.html\nI think however, that offering a dropdown control like that should be a project on its own, that uses Fancytree an external reference.. @dodo1292 the debug module is an experimental extension that makes Fancytree more verbose to log events and callbacks. It is not finished yet.\nI wasn't aware of this naming convention (*.debug.js handled specially by MS), but I think I can simply rename the module. Thanks for reporting this.\n@clozinski Yes, I am living in Germany, but why do you think this is related to software patents?. It will be part of the next release.. you can define a custom CSS like this\ncss\n/* Remove system outline for focused container */\n.ui-fancytree.fancytree-container:focus {\n    outline: none;\n}. Hi,\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. Seems to happen on all browsers:\n\n. Thanks for reporting this!. I don't think there is an easy workaround right now, so I mark it as enhancement.\nA new feature would require to \n- allow to pass quicknav: \"focus\"\n- use tree.getFocusNode() as previous anchor\n- call matchNode.setFocus() instead of setActive()\nmatchNode = tree.findNextNode(tree.lastQuicksearchTerm, tree.getActiveNode());\nif( matchNode ) {\n    matchNode.setActive();\n}. Hi,\nsure, simply define some additional CSS rules, that override the standard ones.\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. No this is currently not supported.\nIt would require a specification for a request API that the server needs to support.\n(It should be possible however to implement this yourself by passing some filter arguments to your source request). Hi,\nsure, simply send the nested nodes JSON without passing expanded: true\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. Hierarchical selection is a topic with lots of use cases. Currently unselectable prevents direct clicks, but not propagation from parents. The requested behavior can be achieved by using unselectableStatus instead. \nSee here for some examples:\nhttp://localhost:8080/demo/index.html#sample-select.html. Thanks, this is probably a regression of 1a9c788 . I could not reproduce it here. Could you provide some more information please:\n\nwhich jQuery version are you using?\nwhat options do you pass?\nIs the tree embedded in some special markup?. > But a demo page using a previous release is here http://demo.javatmp.com/JavaTMP-Static-Ajax/#pages/plugins/tree/fancytree/table_fancytree.html\n\nI tried this page with Safari. I you expand some nodes until they fill more than the screen, and then press DOWN multiple times, you will notice that the selection bar vanishes below the bottom border. This is what I tried to fix with 2.30.. > I will prepare a demo page that show the issue soon.\ndid you have time to set something up to reproduce it?. this.tree.$container.scrollParent() returns a <body> element.\n\nbecause body has CSS overflow-x: hidden defined\n\n. Can you reproduce it here?\nhttp://wwwendt.de/tech/fancytree/demo/#sample-ext-columnview.html. Thanks, I will look into it (note however, that column view is still 'experimental' and was seemingly not much used by others so far ;-). Thanks for testing!. Seems I tested the wrong thing last time, hope it's fixed now.. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, explanation what already was tried and/or concrete data.\nA debuggable example (jsFiddle, Plunkr, CodePen, ...) may be helpful.\nPlease read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.. Thanks, I will look into it (note however, that column view is still 'experimental' and was seemingly not much used by others so far ;-). Hi,\nThe Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. Thanks for fixing this. Thank you for contributing! :+1:\nIn order to process your issue, we need some more information, please read the Contribution Guidelines for some hints on how to submit helpful feature requests and bug reports.\nBest would be a jsFiddle, Plunkr, CodePen, .... Closing this issue due to missing response or additional information.\nMay be re-opened as soon as new information is added here.. Hi,\nthis is not supported, so you have to implement yourself, e.g. by storing the query in localStorage or similar.\nNote, the Issue Tracker is meant for bugs and feature requests.\nPlease use Stackoverflow or the Q&A forum to ask questions.\nThank you,\n~Martin. Thanks, that was probably a copy/paste error in the wiki - I fixed it.\nYes, this is the way types currently should be used. \n(However I am thinking about extending the functionality, such that the types.TYPE.icon key is supported natively, i.e. without the need to implement the icon keyword: https://github.com/mar10/fancytree/wiki/TutorialNodeTypes). Hi,\nI think issue 322 already point into the right direction: you can add those nodes to your source data and pass the button markup as title (or render it on demand in the renderNode event).. Hi,\nthanks for reporting this. It is not so easy to reproduce without a Cyrillic keyboard I think, but it also can be reproduced with '\u20ac'\nI was just looking at the same location ;-) I guess we have to use event.key instead of event.which as well.... I checked in a potential fix, pls let me if it works for you (either now with the current code from the repo or later, when it get's released).\nI only tested with a German keyboard, the \u20ac special character and Safari so far. Sorting columns is a very useful feature, however the dnd extensions are about dragging nodes (i.e. rows) in tree structures (either plain trees or tables).\nThe ext-table does not do much about the table structure itself, so it should be possible to utilize existing third party libraries to handle \n\ncolumn re-ordering using d'n'd (issue #910 prevented this, but it should be fixed now.), \ncolumn width resizing\ncolumn sorting, \nfixed table headers, \netc.\n\nI don't see this as a core functionality of a tree plugin (for similar reasons I decided to not add a builtin context menu). \nInstead I'd prefer to design FT in a way that makes it easy to apply external libraries.\nAnyway, I am open to add or link to a separate FT extension ('ext-columns' or similar) that implements this feature if someone proposes a pull request.\nIf it turns out, that FT should be improved in some way to make this easy, or you need some coaching, please let me know.. The reason was that the drop marker was defined from the non-free 'Pro' version of FontAwesome. This is fixed now, but you can workaround by passing a free variant in the map:\njs\nglyph: {\n  preset: \"awesome5\",\n  map: {\n    dropMarker: \"fas fa-long-arrow-alt-right\",\n  }\n},. I suggest that you edit line.gif to replace the color, and then re-generate the css file, by compiling the less file (see here).\nIf you need tipps for bitmap editors, Stackoverflow may be a better source.. That was a typo, I meant vline.gif. \nI don't know much about Photoshop, so I can't help there, sorry. \nThe steps you tried looked ok. Did you produce a transparent gif, with a darker color?. Hi Jafar,\nwhy not simply use tree.toDict()?. Thanks (is Pls. let me know if it works for you). Thanks!\nFun fact: this error did not appear on IE, because window.event is defined there.\nClose #919 . Thanks once more ;-). You can use the enhanceTitle event instead: http://wwwendt.de/tech/fancytree/doc/jsdoc/global.html#FancytreeEvents. Thanks for reporting this here!\nnodeData is undefined there, due to permission restrictions of the html5 dnd api.\nWe can check for the existence of such data (instead of the content) though. This line was a test if el is a jQuery object, but breaks for jQuery 3, so yes: that is a bug.\nWhat was the symptom that you observed?. Currently jQuery 1.9+ is listed as min. requirement, may be it's time to drop this.\nBut I did not even check yet which deprecated methods could be removed for the 1.9 case.. Thanks!. Hi Ricardo,\nsorry for the delay. I will still need to find some time to look into it.... > I've confirmed my json has a key for the root element which is a guid.\nI think there is some confusion about 'root node':\nThe invisible system root node is maintained by Fancytree only.\nWith your ajax response you send a list of one or more top-nodes, that then will become children of the root. You can pass keys for those top-nodes (and children), and Fancytree will not change them.\nA Fancytree instance may also have custom tree data. You can pass this with JSON using an extended syntax. See Passing Tree Meta Data. How exactly are you re-loading the tree?\nCould you set a simplified example that reproduces it (CodePen, jsFiddle, Plunkr, ...), maybe using a button instead of tabs.. You could also try if this helps:\njs\nsource: {url: \"sample.json\", debugDelay: 1000 };. Oh, this was not meant as a workaround, but as a possible way for you to set up an example that we can debug in order to fix the issue.. small thing: 'firstchild' should be 'firstChild' (and followed by a comma)\n. jQuery style guide recommends to list unassigned vars first, before assignment.\n. test comment\n. this should be i!node.isEditing || !node.isEditing()\n. this should be 2016\n. Isn't this already a ext-table option? (same for checkboxColumnIds and nodeColumnIdx). does this work if we have th and tds? Or would it remove too many elements then?. (This code is performance critical.)\nMaybe we can find this more efficiently (no jQuery requied) by simply doing s.th. like tr = tbody.children[i]?\nAlso, we could move $(\"div.fancytree-fixed-blWrapper table tbody\") outside the callback.. (see above: removing too much?). As an alternative, we might store node directly as data, so we din't need to call getNode(tr). Use on() instead of bind()?\n(Interesting: Why do we need to handle the wheel explicitly, doesn't the browser do this already?). or find(\">td:visible\")? or $leftTr.children(\":visible\") Whatever is faster... maybe we should benchmark. I think we should discard the markup on treeDestroy, but not treeClear.\nOnly remove all rows here?. there is one jshint error here (need to use !== instead of !=). This offset will always be the same for 'after' and 'before' so I suggest to combine it into one single option.\nAlso we could use two positive defaults:\ndropMarkerOffsetX: 8\ndropMarkerOffsetIndentX: 16\nbefore/after offset will be dropMarkerOffsetX\notherwise dropMarkerOffsetX + dropMarkerOffsetIndentX. Wouldn't it be more flexible to let the handler decide whether he wants to prevent default handling, stop propagation or both?\nWhat do you think about passing evt to the handler (which may be useful in itself), The handler can then inspect the event or call methods on it.\nThe main use case (stopping default handling) could be made easier to implement if we return the handler's response:\njs\nreturn handler(node, evt);\nThis would allow handlers to simply return false.\nIf you feel that this is too much burden on the handlers, then I suggest that we make the 'prevent default' behavior configurable in the plugin options.. Ok, if you update your PR (changing the line to return handler(node, evt); and remove evt.preventDefault()), I will merge :)\nFeel free to add a comment to the example as well.. Shouldn't this be if ( hasChildren !== false ) since hasChildren() returns undefined for lazy, unexpanded nodes. And we want lazy nodes to have aria-expanded set to false?. See comment on the /src folder: Here we could use hasChildren !== false instead, since undefined is returned for lazy unloaded nodes.\nnote: This file change is part of the /dist folder and overwritten in the build process. We only need to edit /src/... files. Could we move the call down below the var section, to make it more explicit?. If we assign the class names to module vars, we will get better compression, e.g.\njs\nvar classWrapperTr = \"fancytree-fixed-wrapper-tr\",\nCan be compressed as $(\"<div>\").addClass(q),. We should use on instead of bind.\nTo think about: should the scroll factors be configurable? \n(Also we should test compatibility with different Browsers / -versions. See here for example: https://stackoverflow.com/a/43837834/19166.). typo here. on instead ob bind. Good work!. ",
    "norkunas": "But there's a little bug with node focus. When you try to open contextmenu on non first node, then it should get focus and become active, but somehow first node still have a focus\n. It's nothing :) :+1: \n. ",
    "lifejuggler": "you mentioned loadkey path  to re-load nested structures. But I also saw in the persistence example for fancytree there was the broken lazy children that were not loaded at all and was wondering if you can fix those example...\n. I don't understand the reference... I tried the #6 but didn't have much success ( I guess I am too much of a noob). So I was wondering if you'll be fixing the example of persistence to include the lazytree example. So I can use it as a reference\n. No, I mean there is a function called onlazyread for dynatree but does that exist for fancytree as well? I am trying to implement expand all and collapse all functions for my lazy json tree\n. ",
    "evgrezanov": "Hi, pls tell me i can use persist option with link ?\ni not see this in demo\n. yes, im try again and this working, but i try make Wordpress plugin and with jquery, what included in WP, not work\n. ",
    "dailyherold": "Regarding \"When node is re-activated, should the activate event be fired again?\" from SpecPersistence, any tweaks I can make locally so the activate event is not fired?\n. Found a bug with my proposed solution:\nPlatform: Linux Mint 64-bit (kernel: 3.13.0-24-generic)\nChrome 37.0.2062.120: event.srcElement :white_check_mark:\nFirefox 32.0: event.srcElement :x: (undefined)\nSafari 6.1.6 (OSX 10.8.5): event.srcElement :white_check_mark:\nFix:\nevent.target works for all browsers above.\n. Little confused on \"embedded grid controls\"? Are they the ability to do things like UP / DOWN / LEFT / RIGHT, TAB, Shift+TAB to navigate tree grid, but within inputs, you have normal text/highlight modifier actions?\nI tested my addition to the keydown handler within Chrome, and functionality remains the same when testing different actions and modifiers on the inputs from the demo you linked. But I would test further if this is in fact what you are asking.\n. Sorry I've been dormant for a while. Did some testing, and the autofocusInput option (if true) of gridNav does break with my addition. Looking more into the problem and if there is a better fix for my original issue.\n. Specifically because fancytree.js:3720 will return true if keydown came from an input (my addition), instead of flowing through to gridNav's nodeKeyDown hook method. However, if I do add the gridnav ext, then remove my \"proposed solution\", everything works because the overriden nodeKeyDown in gridnav.js checks if input came from an active input (line:182) and will do its gridnav business only if the key was KC.UP or KC.DOWN and there is a neighbor <td> (which will never be since my input is in the table head). \nIdeally there would be a clean solution which would not break embedded input controls, but still be conscious if the input came from outside <td>'s or <tr>'s (e.g. <th>). \nHere is a screen shot to give you context why I am putting the filter input in a <th>:\n\n. Correct, because of Gridnav's nodeKeyDown(). In my case I am leaving my fix in working copy as I don't need gridnav features at the moment. \n. ",
    "wgaber": "Hi!\nRestore without extract nodes animation?\nThx.. ",
    "244958898": "Can I restore the new node rather than status  that  i add so that I can see it after the page refreshing?. ",
    "mafar": "@mar10 \nI need help please. Can you help me find a solution for my problem. I need to know how I can achieve this with fancytree. See below\n\nI am using fancytree in electron application based on node.js\nMy requirements are store and load persistence information in local configuration file instead of using cookie or storage.\n\nReference:\nTo explain, I will be using layout.jquery as reference because it has options for what I exactly need to do as they support persistence too by name stateManagement.\ndemo_saved_state\nDEFAULT OPTIONS layout.jquery\njs\nstateManagement: {\n  enabled: false,\n  // true = enable state-management, even if not using cookies\n  // needed when autoSave or autoLoad are functions not boolean\n  autoSave: true,\n  // autoSave:boolean ==> Save state using cookie\n  // autoSave:function ==>  use your own method to save it\n  autoLoad: true,\n  // autoLoad:boolean ==> Load state using cookie at init\n  // autoLoad:function ==> use your own method to load state options at init and return it \n}\nPRACTICAL EXAMPLE layout.jquery electron  nconf\njs\n// Save and Load state from file instead of cookies-built-in-method\n// in node.js/electron environment using library nconf\nstateManagement: {\n  enabled: true,\n  autoLoad: function () {\n    // load instance_state at init\n    // get instance_state from anywhere like a file (if in electron),cookie,store.js whatever\n    // get from local file using nconf/node.js \n    return nconf.get('layout-state');\n  },\n  autoSave: function (instance, instance_state, instance_options) {\n    // save instance_state whereever you want\n    // save to local file using nconf/node.js\n    nconf.set('layout-state', instance_state).save();\n  }\n}\nQuestion: \nHow can i do this with fancytree ? \n\nEnable fancytree persistence\nSave persistence data with my own method, Instead of built-in methods \nLoad persistence data with my own method, Instead of built-in methods \nI should be able to do all above whether I am using web or node.js env like electron\n. By looking at source code in jquery.fancytree.persist where\njs\nif (typeof Cookies === \"function\") {\n  cookieSetter = Cookies.set;\n  cookieGetter = Cookies.get;\n  cookieRemover = Cookies.remove;\n} else {\n  cookieSetter = cookieGetter = $.cookie;\n  cookieRemover = $.removeCookie;\n}\nIt would be nice if it had object support so that I could use it like\njs\n// object support\nif (typeof Cookies === \"function\" || \"object\") {\n  cookieSetter = Cookies.set;\n  cookieGetter = Cookies.get;\n  cookieRemover = Cookies.remove;\n}   else {\n  cookieSetter = cookieGetter = $.cookie;\n  cookieRemover = $.removeCookie;\n}\nUsage:\nvar customObject = {\n  get: myGetter,\n  set: mySetter,\n  remove: myRemover\n};\n//\n$(\"#tree\").fancytree({\n  extensions: [\"persist\"],\n  checkbox: true,\n  persist: {\n    cookie: customObject, // use custom object\n    store: \"cookie\", // use custom function\n  }\n});. @mar10\nCan you please make it configurable so that custom cookieSetter,cookieGetter, cookieRemover can be defined. @mar10 \nOk I will open new issue as improvement\nhttps://github.com/mar10/fancytree/issues/808. @mar10 \nI have tried \n\n$.ui.fancytree.debugLevel = 1; //\n$.ui.fancytree.debugLevel = 0;\nand tree option debugLevel: 0 and debugLevel: 1\nBut i still get , \n<FancytreeNode(#6, 'NAME')> scrollIntoView(): node is invisible.\nMy tree is hidden in beginning in dropdown\n. Hi,\nhas this been implemented ?\n. Dear @mar10 \nThis features has been waiting for too long :)\nMultiple nodes drag n drop will be much faster than tree.getSelectedNodes()  and then move them.\n. can u kindly suggest a quick fix for the code above so I can continue for the time being as I am stuck for my project is supposed to use Glyph/fa icons.Thankx\n. Works like a charm. Thanks\nworking Fiddle : http://jsfiddle.net/PMqnB/8/\n. Ok. I got it. I have to add \"fancytree\" before event name like .bind(\"fancytreeactivate\"\n. Yes it does very much. Thank you.\n. Oh found it at docs node.editStart();\n. Ok, I i have been looking into this and found the problem.\nPersist ext is expecting string as value of key. SO \n{\"key\": \"2\", \"title\": \"abc\" } will work \nbut {\"key\": 2 , \"title\": \"abc\" } wont because 2 is int not string.\nHowever most of the time DB`s have unique keys and on server-side keys are returned as int instead of strings as they are unique.\nAccording to http://en.wikipedia.org/wiki/JSON\nint/Boolean are not stringified as standard practice.\nI added this example at  /test/triage\nhttps://github.com/djangosdk/fancytree/blob/patch-2/test/triage/test-issue-table-001-extpersist.html\n. Hello,\nThis is still not working for me.i will see if i can produce it.\n. Triage sample:\nhttps://github.com/mar10/fancytree/pull/223\n\nJson used:\n[{\n  \"folder\": true,\n  \"expanded\": true,\n  \"children\": [{\n    \"folder\": true,\n    \"expanded\": true,\n    \"children\": [{\n      \"folder\": true,\n      \"expanded\": true,\n      \"children\": [{\n        \"key\": 13,\n        \"title\": \"Seven Samurai\"\n      }, {\n        \"key\": 14,\n        \"title\": \"Ichi very long title testing for scroll Ichi very long title testing for scroll Ichi very long title testing for scroll\"\n      }],\n      \"key\": 12,\n      \"title\": \"Sub\"\n    }],\n    \"key\": 11,\n    \"title\": \"Movies long title string for testing  very long title testing for scroll very long title testing for scroll\"\n  }],\n  \"key\": 10,\n  \"title\": \"Torrents\"\n}, {\n  \"folder\": true,\n  \"children\": [{\n    \"folder\": true,\n    \"key\": 21,\n    \"title\": \"TV\"\n  }],\n  \"key\": 20,\n  \"title\": \"Media\"\n}]\n. So you think its a css issue ? because I tired playing alot with css and could not fix it.\n. I think I should clear, even though My data is single column,I could have used <div> instead of <table> to render my tree. But my requirement is that I need highlighting on complete row when a node is clicked, since with <div> highlighting is done on textnode only, i am using table because it becomes possible to style a highlight on complete row.\nBut since I have single cloumn data, i am not using renderColumns: function.\nSo Tree renders correctly but doesn't produce scroll on larger node text.\nCould it because of the fact that i am not using renderColumns: function with table-ext ?\n. Works as screenshot shows.Tested on firefox + chrome.\nspan.fancytree-title{\n    display: inline;\n}\ndid the job.\nNow a horizontal bar is a must have:)\nany help in that direction would be nice.\nMay be something we can do with tbody ?\nSorry but I am not good with css.\nFor ref: http://getbootstrap.com/css/#tables-responsive\nTry minimizing window and I see bootstrap implements horizontal scroll bar on table.\nMay be we can extract something from it ?\n. I did it like this and now i seem to get horizontal scroll.\nI am not sure if this is correct way. Although I am using bootstrap at back-end.\nDo add your suggestion.\nI think overflow-x: scroll; should be some handled inside table ? \n<div style=\"overflow-x: scroll;\" >\n  <table id=\"tree2\">\n    <thead>\n      <tr style=\"display:none;\"> <th>Projects</th></tr>\n    </thead>\n    <tbody>\n      <tr><td></td><td></td></tr>\n    </tbody>\n  </table>\n</div>\n. For me , this is what I have come up with\nwrap table inside a div and give same width and height to table and div like this.\n``` css\n// CSS required \ntree2 span.fancytree-node{\nwhite-space: nowrap;\n-o-text-overflow: ellipsis;\n-ms-text-overflow: ellipsis;\ntext-overflow: ellipsis;\noverflow: hidden;\n\n}\ntree2 span.fancytree-title{\ndisplay: inline;\n\n}\n\n\n\n```\nThen scroll bars appear correctly as they should.\nI tired bringing style=\"overflow: auto;\" inside table and tbody but doesn't work until applied to wrapping div.\n. Yes,\nWide selection in normal tree would be a huge help.\n. Will it be safe to just set it like node.data.abc = \"new value\";\nWill the tree be updated with this new information ?\n. http://labs.omniti.com/labs/jsend\nhttp://stackoverflow.com/questions/12806386/standard-json-api-response-format\nhttp://dev.bitly.com/formats.html\nDo note that this is not strict but a good practice to follow this response format.\nSo providing a DataDrop point for json could be very helpful where users of fancytree can just point to json key so fancytree can find its data there always.\nSee Here Datatables (widely used plugin for tables) ,http://www.datatables.net/examples/data_sources/server_side.html (check ajax response tab)\nIn its new version they have switched to \"data\" as default entry point but they always provide DataDrop option as well along withPre-Processing functionality so all sort of scenarios can be handled by users easily.\nCould be good addition to fancytree !!!\n. Adding Custom Icon based on information defined in json response\nOk I tried the following to add custom icon based on some information on json for example I am using renderNode to add icon to node.data but Fancytree ignores this information, why is that ?  I dont want to do that in postprocess function since it will be too slow to process whole data and keep adding icons in postprocess , Cant it be done simply by adding .icon info at renderNode ?\nFor example My json response has \"type\"\njs\n{\n      \"id\": 11,\n      \"title\": \"someTitle\",\n      \"type\": \"jpeg\",\n}\n\njs\n      renderNode: function (event, data) {\n        // Optionally tweak data.node.span\n        var node = data.node;\n        var icon = \"\";\n        switch (node.data.type) {\n        case \"jpeg\":\n          icon = \"iconjpeg.png\";\n          break;\n        case \"movie\":\n          icon = \"iconmovie.png\";\n          break;\n        }\n        //add icon to node.data , but it does not uses this icon why ? \n        node.data.icon = icon;\n      }\n. If you add , debug delay , and hover mouse over loading spinner .. it should do same as above. I will try to create fiddle when I have time.\n. but you can see it in above fiddle. Am I doing some thing wrong ?\nDid u check it with BS 3+ ?\n. Hi,\nIt has 2 wide files.\n jquery.fancytree.wide.js\njquery.fancytree.wide2.js\nDo i need to include both ?\n. for now i am using renderNode to hide nodes \nFor example if node is not folder then i want to hide it.\nstill needs a better solution from tree though\nrenderNode: function (event, data) {\n            var node = data.node;\n            if (node.folder === false) {\n              $(node.span).closest('li').addClass('hide');\n            }\n          }\n. a callback function which is triggered in very last after tree is rendered and persistence has been applied will be much appreciated.\n. @Turkyden  use restore event  https://github.com/mar10/fancytree/commit/7b38553e52a546bc39f81f625ba4edceab53e604. I wish there was some information in event which could indicate its a first render, collaped or expanded.\ncurrently console.log(event) only shows  { type=\"renderNode\"}\n. Hi\nI am not using table extension.Will try on latest fancytree and let you know\n. this does seem to appear after I updated fancytree to latest version. Thankx\n. currenlty i am doing \nrenderNode: function (event, data) {\n            var node = data.node;\n            if (node.folder === false) {\n              $(node.span).closest('li').addClass('hide');\n            }\n          }\nis this correct approach ? ANy ideas ?\n. Thankx @mar10 \nWorks like a charm.\nclick: function (event, data) {\n            if (data.targetType !== 'checkbox') {\n              data.node.toggleSelected();\n            }\n          },\n. IMO , fancytree is a nice plugin and it should be refactored to get rid of jquery UI widget system and could be easily a modular to support UMD.\n. is there any requirejs solution yet ?. Currently there is very little documentation to show how to work with requirejs with latest version.\nHere is how made it work with  jquery.fancytree-all  and latest jquery-ui with AMD support, since working with individual extensions will require a lot of shimming\n```js\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui',\n    'jquery.fancytree': './js/vendor/fancytree/jquery.fancytree-all'\n  },\n  shim: {\n    'jquery.fancytree': {\n      deps: ['jquery', 'jquery-ui/core', 'jquery-ui/effect', 'jquery-ui/effects/effect-blind', 'jquery-ui/widgets/draggable', 'jquery-ui/widgets/droppable'],\n      exports: 'jQuery.fn.fancytree'\n    }\n  },\n  onBuildWrite: function (moduleName, path, contents) {\n    'use strict';\n    if (moduleName === 'jquery.fancytree') {\n      contents = 'define( \"jquery.fancytree\", [\"jquery\", \"jquery-ui/core\", \"jquery-ui/effect\", \"jquery-ui/effects/effect-blind\", \"jquery-ui/widgets/draggable\", \"jquery-ui/widgets/droppable\"], function(jQuery) { ' + contents + '});';\n    }\n    return contents;\n  }\n});\n// usage \n define([\n     'jquery',\n     'jquery.fancytree',\n     'css!./css/fancytree/skin-custom/ui.fancytree.css',\n   ],\n   function($) {\n     'use strict';\n     //\n     $('#tree').fancytree({\n       checkbox: true,\n       source: [{title: 'Node 1'}, {title: 'Node 2',key: 'id2'}]\n     });\n     //\n   });\n// \n. https://github.com/mar10/fancytree/pull/635\n. @mar10 \nI was wrapping code manually, see below , for existing builds and it was working fine for AMDjs\ndefine( ['jquery', 'jquery-ui/core', 'jquery-ui/effect', 'jquery-ui/effects/effect-blind', 'jquery-ui/widgets/draggable', 'jquery-ui/widgets/droppable'], function(jQuery) { \n // fancytree code here\n});\nwith settingsjs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui',\n    'jquery.fancytree': './js/vendor/jquery.fancytree-all'\n  }\n});\n```\nI use same settings and wrapping  for jquery layout plugin (with their deps) and it works fine as well. Following references need to be corrected as well for all modules\n\njquery-ui/ui/widgets/draggable, to jquery-ui/widgets/draggable\njquery-ui/ui/widgets/droppable,to jquery-ui/widgets/droppable\n./jquery.fancytree to jquery.fancytree\n\nAs per docs, it is user responsibility to point it to correct dir with AMD configuration.\nif dir structure is like  jquery-ui/ui  then AMD settings would be \njs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui/ui', // changes made here !!!\n    'jquery.fancytree': './js/vendor/jquery.fancytree-all'\n  }\n});. One more suggestion:\nI should not be even looking for jquery.fancytree-all.js since I am using it with AMD.\nSo with commonJs and AMD both\nI should be only looking at file in src folder src/jquery.fancytree.js\nso following 2 configuration comes to my mind\nConfiguration 1:\nManually loading extensions\njs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui/ui', \n    'jquery.fancytree': './js/vendor/jquery.fancytree/src' // src Folder\n  }\n});\nthen I can use it with childcounter extension like \njs\nrequire([\n    'jquery',\n    'jquery.fancytree/jquery.fancytree',\n    'jquery.fancytree/jquery.fancytree.childcounter',\n  ],\n  function ($  ) {\n    'use strict';\n    //\n    $(\"#tree\").fancytree({\n      extensions: [\"childcounter\"],\n      source: {\n        url: \"ajax-tree-plain.json\"\n      },\n      childcounter: {\n        deep: true,\n        hideZeros: true,\n        hideExpanded: true\n      } \n    });\n    //\n  });\n. Configuration 2:\nsame as usual but fancytree options  extensions: [\"childcounter\"], automatically resolves extensiosn and fetches them\njs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui/ui', \n    'jquery.fancytree': './js/vendor/jquery.fancytree/src/jquery.fancytree'  // point to source file\n  }\n});\nthen use it like \njs\nrequire([\n    'jquery',\n    'jquery.fancytree',\n  ],\n  function ($  ) {\n    'use strict';\n    //\n    $(\"#tree\").fancytree({\n      extensions: [\"childcounter\"],\n      source: {\n        url: \"ajax-tree-plain.json\"\n      },\n      childcounter: {\n        deep: true,\n        hideZeros: true,\n        hideExpanded: true\n      } \n    });\n    //\n  });\nsince extensions will be loaded by default based on options i define\n. I think Configuration 1 is better since jquery-ui does the same.\nso if i say \ndefine( ['jquery', 'jquery-ui/effects/effect-blind'], function(jQuery) {});\nthen it will resolve it dependencies of 'jquery-ui/core', 'jquery-ui/effect'. @mar10 \nSorry I did not read updated docs. Now it is working.\nCan you please update documentation https://github.com/mar10/fancytree/wiki/SpecAmd#amdrequirejs-for-single-fancytree-extensions with new changes. Please also paste requirejs.config so that dist/modules path is clear to everyone.\nrequirejs.config\njs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery.fancytree': './js/vendor/fancytree/dist/modules',\n  }\n});\nfancytree with plugins\njs\nrequire([\n  'jquery',\n  'jquery.fancytree/jquery.fancytree',\n  'jquery.fancytree/jquery.fancytree.filter',\n  'jquery.fancytree/jquery.fancytree.persist',\n], function ($) {\n  //do something here\n});. @mar10 \nNow only question I am left with that I already use jquery-ui in my application and I am using it as per their docs.\nWith current fancytree setup, i am loading it again in form of jquery.fancytree.ui-deps\nI see that \n\njquery.fancytree depends on ./jquery.fancytree.ui-deps\njquery.fancytree.dnd.js  depends on  \"jquery-ui/ui/widgets/draggable\",\"jquery-ui/ui/widgets/droppable\",\n\nwhen I would use  jquery.fancytree.dnd.js , it will try to resolve its jquery-ui deps.\nThen why would I need ./jquery.fancytree.ui-deps ?\njs\nrequirejs.config({\n  paths: {\n    'jquery': './js/vendor/jquery',\n    'jquery-ui': './js/vendor/jquery-ui',\n  }\n});\n. @mar10 \nThis is my initial guess that because of ./jquery.fancytree.ui-deps\njquery.layout plugin breaks with \nTypeError: jQuery.easing[this.easing] is not a function\nas i am using its shim configuration\njs \nrequirejs.config({\n  shim: {\n    'jquery.layout': {\n      deps: ['jquery', 'jquery-ui/core', 'jquery-ui/widgets/draggable', 'jquery-ui/effect', 'jquery-ui/effects/effect-slide', 'jquery-ui/effects/effect-drop', 'jquery-ui/effects/effect-scale'],\n      exports: 'jQuery.fn.layout'\n    } \n  },\n});. @mar10 \nFound the issue\nIf i change the line 20,21 from vendor\\fancytree\\dist\\modules\\jquery.fancytree.js\njs\n// AMD. Register as an anonymous module.\ndefine( [ \"jquery\", \"./jquery.fancytree.ui-deps\" ], factory );\nto \njs\n// AMD. Register as an anonymous module.\ndefine( [  'jquery', 'jquery-ui/ui/core', 'jquery-ui/ui/effect', 'jquery-ui/ui/effects/effect-blind', 'jquery-ui/ui/widgets/draggable', 'jquery-ui/ui/widgets/droppable' ], factory );\nEvery thing starts working.\nCan you please \n\nremove ./jquery.fancytree.ui-deps dependency\ninstead use jquery-ui/ui/whatever  so that it is resolved by loaders automatically\n\nForcing ./jquery.fancytree.ui-deps is causing issues if project is already many components that rely on jquery-ui. After going through ./jquery.fancytree.ui-deps\nfollowing are deps for fancytree\n\nwidget.js,\nposition.js,\nkeycode.js,\nscroll-parent.js\nunique-id.js\neffect.js\neffects/effect-blind\n\nSo I replaced\n define( [ \"jquery\", \"./jquery.fancytree.ui-deps\" ], factory ); \nwith correct deps\njs\ndefine( ['jquery', 'jquery-ui/ui/widget','jquery-ui/ui/position','jquery-ui/ui/keycode','jquery-ui/ui/scroll-parent','jquery-ui/ui/unique-id','jquery-ui/ui/effect','jquery-ui/ui/effects/effect-blind' ], factory );\nplz fix ./jquery.fancytree.ui-deps as this is breaking other plugins which are using jquery-ui\n. 1. Normally no one provides dependencies.They should be added in project.\n1. if I already have jquery-ui then jquery.fancytree.ui-deps.js is extra bytes that i dont need\n1. dist\\modules\\jquery.fancytree.dnd.js already uses \"jquery-ui/ui/widgets/draggable\", in amd block.\nIMO jquery.fancytree.ui-deps.js is extra burden for project.\nBest solution would be provide just 2 separate files\ndist\\modules\\jquery.fancytree.js\ndist\\modules\\jquery.fancytree-deps-ui.js  then it is clear for every one and other people with different  loaders and setups wont have issues with it\nI will test #803 but I am in favor of not loading  jquery.fancytree.ui-deps.js at all if i have jquery-ui\nI will be probably changing this block manually after every fancytree update\n. it seemd to be working with https://github.com/mar10/fancytree/commit/4ac9b461e8e633c938610fc01f292355e12720a2#diff-da57115b491a5564bf312f2a8b609b37\n$.cleanData = $.cleanData || ( function( orig ) {\nbut i am not sure if it is a good idea. a change in version of jquery-ui could cause pitfalls\nPlease separate the files as suggested then we dont have this issue.\n. @mar10 \nPossible suggestion:\nfrom https://github.com/mar10/fancytree/wiki/ExtPersist\nrename method {void} tree.clearCookies(types) to {void} tree.clearStore(types)\nin jquery.fancytree.persist.js\ncode block\njs\nif (typeof Cookies === \"function\") {\n  cookieSetter = Cookies.set;\n  cookieGetter = Cookies.get;\n  cookieRemover = Cookies.remove;\n} else {\n  cookieSetter = cookieGetter = $.cookie;\n  cookieRemover = $.removeCookie;\n}\nvariable Cookies is in global context so in es6 and AMD  it will never exist as Cookies will be in local scope not in global\nSo it will be better to set is as store directly as store.js example\n. @AudriusButkevicius \n\nmake sure you are using key in your response.If you dont have key ,which acts as id for fancytree to store states of nodes, persistence may not work properly\nwhile initialing tree, use cookiePrefix option to make it unique (this is optional)\nbefore existing dialog, use method tree.clearCookies(types)\n\nall options in here https://github.com/mar10/fancytree/wiki/ExtPersist. @mar10 \nI just tested it with my existing project using store:'auto' and get error\nUncaught TypeError: Cannot read property 'call' of undefined at line 218 jquery.fancytree.persist.js\njs\n} else if ( value === null ) {\n  store.removeItem.call(this, key); // line 218\n} else {. @mar10 \nTested it. Works 100 % for me.\nused with store as auto in web and as a  custom store using nconf in electron app.\nSuper work !!! . @mar10 \nCan you please review https://github.com/mar10/fancytree/pull/829\nIn my opinion:\n$.ui.fancytree.debugLevel = 0; should have highest priority and should never output anything to console\n. ",
    "inquam": "I was told in a mail this was still open to discussion and here it seems closed so I'm not sure what it is. But anyway. Since selecting a parent node (in selection mode 3) causes all children of that node to be selected to I feel it's expected behavior for the children to be selected even if they are loaded using lazy loading.\nIf you first expand the parent, then close it and select it all children are selected. To then have the children behave different just because the parent node has not been expanded at least once is not intuitive at all and only looks like something is wrong to the end user.\n. ",
    "alleroux": "With selectmode=3 I am trying to query the selection status of a node.  'partsel' seems to be true for all nodes in a branch that has one or more nodes in the branch that are partially selected.  Is this the intended behavior?  My assumption was that partsel would be true only for parent nodes who had less than 100% of their child nodes being selected and one or more child nodes selected.  Attaching an image to show you how I expected the attribute to function.\n\n. ",
    "brumsel": "Is it possible to also set the unselectable via API? Perhaps like you set a node selected via API \"node.setSelected(bool)\" you could also provide a \"node.setUnselectable(bool)\" for instance. Looks like you can only set unselectable via the initializing (data loading) of the tree. Or am I overlooking something?\nRegards\n. Thanks for the reply. I think I will make a feature request. For now I will implement the renderStatus.\nI also have another question. It concerns the hideCheckbox option. If I set this option to true in my json, the checkbox is still being shown. Do I have to do a node.renderStatus() as well after loading the json? How do I use the hideCheckbox option?\n. Ok, got it working, no bug.\nIs there some forum support where I can leave questions or do I have to post them on github?\n. ",
    "xgqfrms": "fancytree-unselectable\nmy solution\n\nresult\n\n\n\njson\n\n\n```js\ninit: function (event, data) {\n    data.tree.getRootNode().visit((node) => {\n        if (!node.selected) {\n            node.setSelected(true);\n        } else {\n            // console.log(`selected true=`, node.selected);\n        }\n        if (node.data.noselectable) {\n            if (node.span.classList) {\n                node.span.classList.add(\"fancytree-unselectable\");\n            }\n            node.unselectable = true;\n        } else {\n            // console.log(`unselectable false =`, nodedata.noselectable);\n        }\n    });\n},\n\n```\n. # classList & dataset\nhttps://www.w3schools.com/jsref/prop_element_classlist.asp\nhttps://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n```js\n    tooltip: function(event, data) {\n        var node = data.node;\n        // console.log(`tooltip data`, data);\n        // console.log(`tooltip data.node`,  data.node);\n        // set customize class\n        if (data.node.data.changed) {\n            data.node.span.dataset.testTootip = (\"test-tooltip\");\n            // data.node.span.classList.add(\"666\");\n            return `\u5df2\u4fee\u6539\u7ed3\u70b9: ${data.node.title}`;\n        } else {\n            // no need\n            // return data.node.title;\n            return false;\n        }\n        // return data.node.title + \"test-tooltip\";\n    },\n\n```\n. ",
    "woddel": "hia all.  yes, aria-compatibility is also a issue for a project we do for the university of basel, switzerland.  we use fancytree in an important portal, but we get requests to be fully accessable and this is a stopping point for the moment.  we would be very happy if this topic would be reevaluated... :)\n. ",
    "photostu": "Thanks for the suggestion, I placed my code in the init function, all my node count logging shows the tree is loaded, but I still cannot activate a node properly from this context, this is how I'm calling everything:\n$(\"#tree\").fancytree({\n                                extensions: [\"filter\"],\n                                activate: function(e, data) {\n                                    activeNode = data.node;\n                                },\n                                source: {\n                                    url: \"/ProductTree.svc/treenodes\" // my data\n                                },\n                                autofocus: false,\n                                init: function() {\n                                    var tree = $(\"#tree\").fancytree(\"getTree\");\n                                    var currVal = $('#' + hdnProductType).val(); // my hidden storing current key\n                                    if (currVal != '') {\n                                        console.log('cnt=' + tree.count()); // this is correct now\n                                        console.log('cv=' + currVal);\n                                        tree.activateKey(currVal); // this does not activate at all\n                                    }\n                                }\n                            });\nAny thoughts?? Thanks for your time.\n. Thanks!\n. ",
    "Glideh": "For the record:\njavascript\n$(\"#tree\").fancytree({\n//...\n    init: function (e, data) {\n        data.tree.activateKey(currVal);\n    }\n});\nWorks fine for me\n. Ha ok sorry I didn't see this issue\n. It works fine thanks\njavascript\nvar anode = tree.getActiveNode();\nanode.setFocus(false);\nanode.setActive(false);\nAnd thanks for this great plugin\n. ",
    "pnacelli": "Thanks Martin, that was a fast fix!\nCheers. .\n. Just pulled latest today and \"debugLevel: 0\" on init option is still outputting, please advise.\nNote: seems that it's coming from this: jquery.fancytree.js: line 66\n. Hi Martin,\nSeeing the output on page load, even after clearing the browser cache, here's a screenshot of the console.\n\nLet me know if you need more info.\n. That worked.  Thanks Martin.\n. ",
    "bpromasmb": "I think this is happening again. Using fancytree v. 2.19.0, I am unable to hide a checkbox using\nnode.hideCheckbox = true;\nnode.render();\n. +1 to this. It would be useful to capture this moment. I would find this useful since I am needing to disable a button in my document whenever there is any change to the tree (in this case I am generating a spreadsheet from the created tree and want to prevent the user from exporting a tree before saving it to database)\n. I'm not sure either. I think this is a UX issue. My gut tells me that a node should only be expandable if it has children, because if it doesn't then the icons will be falsely informing the user that there is more information under an empty node, causing unnecessary frustration or confusion.\nI've seen instances of treeviews where an empty folder is expandable, but when you expand it (showing no new children), the expander icon disappears. But I think this is just a quirk due to lazy loading.\nBy the way, I have taken the liberty to open up a question on StackExchange's UX forum about this very issue, since there didn't seem to be one already.\n. Just to add, the same issue affects cases in which I copy and paste a node. Even when the copied node has been rendered, the pasted node does not get rendered.\n. it's unreleased. my bad. I read the changelog and got really excited\n. Ended up using the callback from node.moveTo() as well as the events createNode and removeNode\n. You can close this. Turns out the issue was with alertify. The original repo has stopped maintenance so I opted to use one of the forks. This proved to not being the best idea since the setFocus() issue only happens when using the forked version. I don't really know why, but I'll be using the original plugin from now on.\nOriginal alertify jsfiddle\nForked alertify jsfiddle\n. The renderColumns callback is a choke point for sure. There I make an AJAX request that is synchronous (it fetches the value and type of input field to generate). By making it asynchronous the processing time gets a lot faster, but it doesn't create the input elements, so it's unclear to me if the issue is with the AJAX call or with fancytree's rendering of input fields.\nWhen I get some time I'll see about building a jsfiddle with a heavy enough tree that renders input fields and see how that performs.\nEDIT: You can close this. I simulated it without the ajax call and with input fields and it works just fine. I don't think there's anything that can be optimized on your side, but it's clear that the biggest performance choke is on my side.\n. So the issue of \"unselectable\" nodes getting selected after selecting a parent in selectMode 3 is not fixed? Is there a common workaround to prevent this behavior? \nI have been looking at event handling to solve this but there doesn't seem to be an event that would allow me to iterate through nodes and de-select the unselectable ones after selection. both select and beforeSelect events seem to run prior to the checkboxes changing, and there is no afterSelect.\nIn case you're curious about the use case for this, it would be this:\nI have a tree that has multiple \"types\" of nodes in a hierarchical manner (for instance I have a root node \"animal\" and inside it I have a node \"horses\" of type horse, and a node \"dogs\" of type dog, and each of these have their own children nodes, etc.) These types are stored in node.data of each node. \nOutside of the tree, I have a set of checkboxes that serve to \"disable\" certain types of nodes so they do not get sent to the server in my submit routine, for instance, I can block nodes of type \"horse\" from being sent and in order to do that, I am rendering the nodes unselectable as well as de-selecting them, so you can't even accidentally select one. And then in my submit routine I iterate through every node and build an object representing all the selected nodes.\nI could iterate through the nodes except the unselectable ones, but it would still look like a bug to the user in case they disable all horses and then select all animals expecting to \"select all animals except horses\", and then the user would have to first select all animals then disable all horses, which is just clunky.\n. ",
    "spacemishka": "@mar10 \nwhen i use this i am getting an error\njquery-3.2.1.min.js:2 Uncaught RangeError: Maximum call stack size exceeded\n    at RegExp.[Symbol.match] (<anonymous>)\n    at String.match (native)\n    at pb (https://code.jquery.com/jquery-3.2.1.min.js:4:1660)\n    at r.fn.init.removeClass (https://code.jquery.com/jquery-3.2.1.min.js:4:2494)\n    at r.fn.init.a.fn.extend.removeClass (https://cdn.jsdelivr.net/gh/mar10/fancytree@v2/dist/jquery.fancytree-all-deps.min.js:29:8369)\n    at r.fn.init.toggleClass (https://code.jquery.com/jquery-3.2.1.min.js:4:2652)\n    at r.fn.init.a.fn.extend.toggleClass (https://cdn.jsdelivr.net/gh/mar10/fancytree@v2/dist/jquery.fancytree-all-deps.min.js:29:8565)\n    at p.nodeRenderStatus (https://cdn.jsdelivr.net/gh/mar10/fancytree@v2/dist/jquery.fancytree-all-deps.min.js:30:24887)\n    at p.nodeRenderTitle (https://cdn.jsdelivr.net/gh/mar10/fancytree@v2/dist/jquery.fancytree-all-deps.min.js:30:23590)\n    at p.nodeRender (https://cdn.jsdelivr.net/gh/mar10/fancytree@v2/dist/jquery.fancytree-all-deps.min.js:30:21218)\nCan you give me an advise?\nThanks\nPeter. I want to have the leafs with checkboxes but not the folder/nodes.\n$(function(){\n    var selKeys;\n    var renderComplete = false;\n    $(\"#tree\").fancytree({\n        extensions: [\"persist\"],\n        cache: false,\n        expanded : true,\n        checkbox: false,\n        minExpandLevel: 99,\n        icon: true,\n        selectMode: 2,\n        source: {!JsonString},\n        createNode: function(event, data) {\n\n            var node = data.node;\n            var $nodeSpan = $(node.span);\n            if(node.data.RecordTypeID == \"{!folderId}\"){\n                node.icon = \"/img/icon/box32.png\";\n                node.renderTitle();\n                node.unselectable = true;\n                var newSubGroup = $('<a class=\"slds-button_neutral\" style=\"float: right; padding-right:4px; padding-left:4px; margin-right: 4px; text-decoration: none \" href=\"/apex/WarengruppenStrukturMaske?Parent_Warengruppe__c='+node.key+'&RecordType={!folderId}\">Neue Untergruppe</button>');\n                var newEndpoint = $('<a class=\"slds-button_neutral\" style=\"float: right; padding-right:4px; padding-left:4px; margin-right: 4px; text-decoration: none\" href=\"/apex/WarengruppenStrukturMaske?Parent_Warengruppe__c='+node.key+'&RecordType={!EndpointId}\">Neuer Endpunkt</a>');\n                var editButton = $('<a class=\"slds-button_neutral\" style=\"float: right; padding-right:4px; padding-left:4px; margin-right: 4px; text-decoration: none\" href=\"/'+node.key+'/e\">bearbeiten</a>');\n                $nodeSpan.append(editButton);\n                $nodeSpan.append(newEndpoint);\n                $nodeSpan.append(newSubGroup);\n            }\n            else{\n                var editButton = $('<a class=\"slds-button_neutral\" style=\"float: right; padding-right:4px; padding-left:4px; margin-right: 4px; text-decoration: none\" href=\"/'+node.key+'/e\"> bearbeiten </a>');\n                node.icon = \"/img/icon/files32.png\";\n                node.renderTitle();\n                $nodeSpan.append(editButton);\n            }\n\n        },\n\n\n    });\n    renderComplete = true;\n\n});\n</script>\n\nHow is this possible?\n. ",
    "charbel14": "Some thoughts:\nIt would be nice to be able to build a minified version of the required plugins. This will be a customized build no unwanted plugins.\nThe shim loads the text file and executes the contents... It worked for me as is, and it resolved the intermittent loading problems caused by asynchronous loading of js files. The plugins were loading in parallel.\nBy the way is there a forum to ask question like general questions or is this the place?\nThanks.\n. Here is what I am trying to do in my code:\ndefine([ 'jquery', 'jquery-ui/ui/jquery-ui',\n                'fancytree/lib/jquery-ui-contextmenu/jquery.ui-contextmenu',\n                 'fancytree/src/jquery.fancytree',\n                 'fancytree/src/jquery.fancytree.dnd',\n                 'fancytree/src/jquery.fancytree.edit',\n                 'fancytree/src/jquery.fancytree.gridnav',\n                 'fancytree/src/jquery.fancytree.table'\n        ],\n        function($, jqueryui, contextmenu, fancytree, dnd, edit, gridnav, table) {\n//my code goes here - create tree etc....\n}\nbower.json has the following entry:\n\"fancytree\": \"https://github.com/mar10/fancytree.git\"\nI guess the package.json could be modified to download specific bit of the tree code.. (not investigated this though..).\nAs it stands an untested workaround is to shim fancytree.\nMaybe something like:\ndefine(['text!/bower_components/fancytree/src/jquery.fancytree.js',\n        'text!/bower_components/fancytree/src/jquery.fancytree.dnd.js',\n        'text!/bower_components/fancytree/src/jquery.fancytree.edit.js',\n        'text!/bower_components/fancytree/src/jquery.fancytree.gridnav.js',\n        'text!/bower_components/fancytree/src/jquery.fancytree.table.js'\n        ],\n        function(contextmenu, fancytree, dnd, edit, gridnav, table){\n    eval(fancytree);\n    eval(dnd);\n    eval(edit);\n    eval(gridnav);\n    eval(table);\n    return fancytree;\n});\nHope this helps...\n. It will be nice to start a paging plugin.\nSorting and search will need to be delegated to server side.\nColumn and table plugins will need to be supported and hopefully will get that for free..\nSee this demo of a grid: http://www.jeasyui.com/tutorial/datagrid/datagrid27_demo.html\nThere is no reason why a tree can not have the same functionality. As you scroll up and down you can rebuild or even update the visible nodes.\n. Maybe as a first cut:\nA node level maxsize can be set for example: maxLevelSize = 50, that means no more than 50 nodes will be drawn per level... as you scroll up or down nodes are destroyed or created as necessary... It is almost like the tree is giving you a small window into your json data.\nThe search can potentially search your json data... and render the nodes as required and also the sort.\nYour thoughts?\n. ",
    "PeteAtkins": "Hi Martin\nThanks, that fixed the issue, sort of.\nIt does not appear to go back up the tree in selection mode 3 (multi hier)\nand mark parents as partially selected. I've fixed this with the below code\ntemporarily.\nvar nodes = $(\"#permission_tree\").fancytree('getTree').getSelectedNodes();\n        for (var i = 0; i < nodes.length; i++)\n        {\n$(\"#permission_tree\").fancytree('getTree')._fixSelectionState(nodes[i]);\n        }\nI only found dynatree last week.  Really liking what you've done with\nfancytree.  Keep up the good work :)\nCheers\nPete\nOn 4 June 2013 07:21, Martin Wendt notifications@github.com wrote:\n\nIt was renamed to selected: true, so the sample is currently wrong.\nBut I am not sure, if I will rename it to the the verb form (as 'activate'\nand 'expand') for consistency.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/issues/25#issuecomment-18891236\n.\n. \n",
    "jelovirt": "Read the code more after filing this issue and noticed I can implement the desired functionality with loadKeyPath. The only custom code I needed was to generate the key path based on the stable key scheme I was using. Closing this issue. \n. ",
    "carled": "Thanks Martin,  will try it as soon as I'm back from holiday and let you know. \nCheers, \nCarl\nMartin Wendt notifications@github.com wrote:\n\ncould you verify that the fix is working for you?\n\u2014\nReply to this email directly or view it on GitHub.\ufffc\n. Thanks Martin\n\nHave just replaced my fancytree.js file with new commit and it instantly cured the problem. Many thanks.  Now I have to get rid of all the jstree stuff I put in there as I didn\u2019t think you\u2019d get this done so quickly!\nFrom: Martin Wendt [mailto:notifications@github.com] \nSent: 10 July 2013 20:50\nTo: mar10/fancytree\nCc: carled\nSubject: Re: [fancytree] Request: Reinstate \".d\" property parsing as dynatree used to (#28)\ncould you verify that the fix is working for you?\n\u2014\nReply to this email directly or view it on GitHub https://github.com/mar10/fancytree/issues/28#issuecomment-20768085 .  https://github.com/notifications/beacon/miYcnqBQDc2PAgupyOJm4Z4R3erwK60ACFQNR0ahua1FQLAOiqXS8lm_lYUVLoSy.gif \n. I did consider doing that Martin, but annoyingly the user wants to have the capability of using the \"live filter\" box to select a particular category/node (there are 1400+ of them!) and the only way that will work is if the nodes are preloaded. The user can use the live filter to narrow down a specific category then expand it and \"bang\" all the related article are there.\n. In what way would \"access node.children directly\" help Martin?  Is it possible to do \"getNodeByKey\" on just the children, rather than the whole tree?  Good idea on the custom node property though. Will do that.\nI can't find any documentation on \"getNodeByKey\", by the way...\n. Thanks Martin. You are correct about only needing to search the direct children.  However wouldn't getNodeByKey(key, searchRoot) work as well with me inputting the parent node I'm searching as \"searchRoot\"?\nObviously you're the one who knows best on this!\n. The answer is to use node.setTitle() :-)\nCan't see this documented at http://wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html though?\n. Sorry Martin, I got distracted by some other coding and forgot about this until I saw your email just now.  When I get the error message I don't get any json returned.  As I create the tree in my javascript code I don't have an easy way of getting at the json I use to create the tree, but I used chrome's dev tools to expand it in the object inspector window and this is what it shows:\n11: treeGroup\n   candrag: false\n   candrop: false\n   children: Array[2]\n   0: treeGroup\n      candrag: false\n      candrop: false\n      children: Array[1]\n      0: treeGroup\n         candrag: false\n         candrop: false\n         children: Array[0]\n            length: 0\n            proto: Array[0]\n            folder: true\n            key: 1325\n            lazy: true\n            title: \"9911 - Ignore - dummy folder\"\n            proto: Object\n            length: 1\n         proto: Array[0]\n         folder: true\n         key: 1323\n         lazy: true\n         title: \"991 - Bright Articles\"\n         proto: Object\n      1: treeGroup\n      candrag: false\n      candrop: false\n      children: Array[1]\n         0: treeGroup\n         candrag: false\n         candrop: false\n         children: Array[0]\n         folder: true\n         key: 1326\n         lazy: true\n         title: \"9921 - Ignore - dummy folder\"\n         proto: Object\n         length: 1\n      proto: Array[0]\n      folder: true\n      key: 1324\n      lazy: true\n      title: \"992 - Bright Test\"\n      proto: Object\n   length: 2\n   proto: Array[0]\n   folder: true\n   key: 1322\n   lazy: true\n   title: \"99 - Bright Project\"\n   proto: Object\nAs long as the tree has a subfolder in it, the lazy load expansion works, but when I click on either of the two last \"dummy\" folder expansion triangles, I get this:\nUncaught Error: Assertion failed: lazyload event must return source in data.result jquery-2.0.3.js:469\njQuery.extend.error jquery-2.0.3.js:469\n_assert jquery.fancytree.js:56\nFancytreeNode.lazyLoad jquery.fancytree.js:1023\nFancytree.nodeSetExpanded jquery.fancytree.js:2689\nFancytree.nodeToggleExpanded jquery.fancytree.js:2928\nFancytree._callHook jquery.fancytree.js:1439\nFancytree.nodeClick jquery.fancytree.js:1783\nFancytree._callHook jquery.fancytree.js:1439\n(anonymous function) jquery.fancytree.js:3412\njQuery.event.dispatch jquery-2.0.3.js:4676\njQuery.event.add.elemData.handle jquery-2.0.3.js:4360\n. Hang on, ignore all that!  I can reproduce it.  Just go to http://jsfiddle.net/js2gm/ and that shows it happening on Node 2.  I just added \"lazy: true\" to that node in the source.\n. Ah. Couple of things on that then. Firstly the error message would be better as \"No lazyload event handler specified\" or similar and secondly how do I specify a folder which is lazy loading, but does not use the lazy load event?  I use the \"expand\" event to return some more children which I push into the tree at the relevant point. I seem to recall that if I didn't specify lazy loading then the folder didn't allow me to expand it. \nMaybe I should look into moving my expand logic into the lazy load event handler instead. Is there any advantage /disadvantage to using expand instead of lazyload to trigger the loading of more children?\n. So I have to specify a dummy \"lazy load\" handler (to avoid the error) and then use my \"expand\" handler as I do at present because I have ever-changing data that appear in the tree and therefore just showing what was there on first expand wouldn't work.\nMay I suggest a \"force refresh\" parameter on the lazy load handler so that a user can specify that the system triggers even after the first time, if required?\n. Yup, took 30 seconds ;-)\nhttp://jsfiddle.net/zqtVh/\nNode 2 should be bold AND red.\n. Cheers Martin. May be worth poking something into the docs around extraClasses for this?\n. This is the tree object from your online example:\n\nAnd this is my treenode that dims and doesn't hide.\n\nThere are parent nodes that don't contain \"hits\" that are dimming instead of hiding.  \"enablefilter\" is set to true in the tree.  I don't see what else I can do to make it work!\n. Am I right in thinking that if my tree object has \"enableFilter\" as true, mode as \"hide\" and the filter extension loaded then it should be hiding nodes?  If so, it's not working...\nIf there's some other setting that affects it, then it's not obvious.\n. It's a string by design now. See this issue I raised some time ago for explanation:\nhttps://github.com/mar10/fancytree/issues/236\n. ",
    "pebezo": "Will \"debugLevel: 0;\" be supported as an init option? (right now it doesn't seem to do anything...)\n. ",
    "TimNZ": "@mar10 \nI added a check in consoleApply() to not output anything if $.ui.fancytree.debugLevel == 0, the warnings were polluting my debug output from my drag* event handlers.\nIt's not the warnings are invalid, it's being able to control their output when necessary.. @mar10 Thanks for the link to #748, followed into here and your reversions fix the issue I reported in #763.\n. It seems there is no way to drag nodes from one tree and drop onto another tree that has no nodes anyway (I did a quick hack in dnd5 treeInit).\nAm always returning true in dragEnter() handler.\n. For context, I am replicating the Chrome bookmark manager, and a folder could have no items in it.\nSo if someone tries to drag a folder item (left side tree) into an empty tree (right side tree) there is no existing nodes as drop targets and no dnd is allowed.\n. Thanks.\nI'm going to have a stab at fixing a few things tomorrow, there are some other errors as well.\nWas thinking about having the container accept drop events today, and will implement as suggested.\nNeed the thing working asap and it's either fix this or implement my own in React, and I like a lot of the other features you've built.\nWill do a PR next week.\n. @mar10 Making good progress on this.\nInitially just getting to work reliably in handling drag enter/over/drop on any empty space, defaulting to display marker at top, controlled by a dnd5.allowDropOnNonNode option (feel free to rename).\nOnce it's solid, I'll logic to place marker before top node or after last node depending on pointer entering from top or bottom.\nI'm only modifying dnd5 as that's my immediate need, I will leave you to roll out changes to dnd to keep in sync.\n. \n. @mar10 there is overlap, but a different side effect.\nI did an issue search for 'mousedown' so didn't get #748 pop up.\nI'll implement what I need for now and do a PR later, incorporating what was reported in #748 if relevant.. Thanks @mar10 \nI already implemented the reversions leading from #712, and will do a pull and submit a PR for various other things next week.\n. ",
    "Shangami": "@mar10: In order to achieve parent selection on selecting children. I used the setSelected option. But I am having issues in the internet explorer. It says there is no such function as setselected for a fancytree node\n. ",
    "ChrisRaven": "Oh, sorry. There is the option, indeed. I've must been tired yesterday, and didn't see it. Thanks for the answer.\nP. S. Great project! :)\n. ",
    "kachar": "Sure.\nThere is another proposal for making the li element clear:both so it doesn't go over the while container. In this way the user may not click on the white space and select the item. Here's the code if you want to see the difference:\nul.fancytree-container li {\n    //...\n    float: left;\n    clear: both;\n}\n. Thanks, You got the idea correctly and maybe it is up to the case. \nIn my case I'm giving permissions with the tree and accidental clicks are not welcome.\nCheers\n. Some kind of workaround the problem is to manually visit each selected item's parents and set the partsel property to  true. We have to activate those nodes, otherwise they are updated on user activation.\n$(\"#tree\").fancytree(\"getTree\").visit(function(node){\n    if(node.selected) {\n        node.visitParents(function(parent){\n            parent.partsel = true;\n            parent.setActive();\n        });\n    }\n});\n. The last solution solves marks the nodes as selected only for levels > 1. It never marks them as partially selected.\nThe first level is never marked as selected or partial selected.\n. It works fine when initialised with the data array, but still there is a problem when using the addChildren method. May be we should run the fix method there as well.\nHere is the updated gist https://gist.github.com/kachar/5973305\n. PR #38 \n. ",
    "guilhermeaiolfi": "No, postProcessseems good enough. Thanks.\n. But it's not called for root nodes. So it's very inconsistent and doesn't solve the problem. Any other idea?\n. I'll be reopening this because I read all the docs and couldn't find a way of doing what I think should be pretty trivial.\n. The postProcess is well documented. But the ability to change the key path is not. But only because it didn't work as expected.\nSee this JSBin: http://jsbin.com/vadecusifunu/1/edit\n. ",
    "Ariesto": "I had misunderstood #39 .  I thought you wanted all of the themes to have that look, regardless of OS.  I only submitted this to the Lion style because that was the one I tinkered with.  I'll re-post in the Windows 7 file.\n. Yes, if you pass the event parameter to handlers that would solve my issue.  I am creating a single select between two trees.  If I can access the original event parameter I could identify whether a visit() triggered the selection/deselection versus a mouse click.\n. Great point Marvin.  I looked for the originalEvent prior to my post, but missed it.\nThis snippet allows me to test for whether the orig event was a click.  I could change it to literally check for the click instead of the undefined:\nbeforeSelect: function (e, data) {\n                if (typeof data.orgEvent != 'undefined') {\n                    //Do logic here.  Clicks are never undefined.  Calling visit() is undefined.\n                }\n             }\nor\nbeforeSelect: function (e, data) {\n                if (data.orgEvent.type == 'click') {\n                    //Do logic here. \n                }\n             }\nThanks for the help!\n. https://github.com/mar10/fancytree/issues/39\n. I agree on some kind of paging enhancement.  I believe slickgrid dynamically adds/removes elements as the user scrolls in the viewport.  Scrolling can cause a slight flicker though (since it is rendering on the fly).  Still, might be a useful feature/option for 10K etc. large branches.\nhttps://github.com/mleibman/SlickGrid/wiki\nVirtual rendering\nSlickGrid utilizes virtual rendering to enable you to easily work with hundreds of thousands of items without any drop in performance. In fact, there is no difference in performance between working with a grid with 10 rows versus a 100\u2019000 rows. This is achieved through virtual rendering where only what\u2019s visible on the screen plus a small buffer is rendered. As the user scrolls, DOM nodes are continuously being created and removed. These operations are highly tuned to provide optimal performance under all browsers. The grid also adapts to the direction and speed of scroll to minimize the number of rows that need to be swapped out and to dynamically switch between synchronous and asynchronous rendering.\n. ",
    "davidsteinsland": "When inspecting the FancytreeNodeData thru console.log(), it did not appear to exist anything under node.data (other than href). I'll give it a few more tests..\nThe node.li property shows in the console, but I get errors saying the property doesnt exist. I use it for adding/removing classes when filtering the tree: $el.toggleClass ('matchFound');\n. The node.data object is appended with attributes from the li, not the <a>. Also, there's nothing happening when I do this in renderNode:\nrenderNode: function (e, d)\n{\n    $(d.node.li).addClass('folder');\n}\n. ",
    "vmattila": "Thanks, this definitely makes sense.\nIn general, I would prefer setting the options not by classes but a special attribute, let it be for example data-fancytree-attributes=\"selected\". Class names are always a bit problematic as they can collide with some css definitions. But data-selected=\"true\" is also good (as far as nobody needs node.data.selected in their own use).\n. ",
    "singultus": "Apologies, the problem rooted in an incomplete bundle of jquery ui and I got confused by the subsequent errors. Everything's running fine. Thanks\n. ",
    "bradgreens": "My bad. Basically, it sounds like my app should provide the key and not the other way around. In the future, I'll also fire up the tests if I do any more pull requests.\n. Closing as I should be able to resolve the issue by passing a key to the addChildren method.\n. ",
    "beowulfenator": "Same problem.\n. Check it out here:\nhttp://home2.sirotkin.com.ua/jam/admin.php\n. It seems that the problem appears only when the slider is dragged. Scrolling with mouse wheel or clicking scroll buttons does not cause the problem. Also, after the error message is shown the icons that show that drop is allowed or disallowed appear offset.\nI am using Firefox 25.0.1\n. ",
    "edgarmkrtchyan": "You're referring to calling the tree.applyFilter(filter) with a callback that returns true for that node and all its children. Could you please share some example code as that's exactly what I'm willing to do?\n. Thanks for the answer. However dataFilter option of $.ajax won't work with JSONP. The data is always undefined. What's the syntax of postProcess for Fancytree, please?\n. ",
    "eerohele": "@mar10: I tried with native IE IE 8.0.7601.17514 and it seems to work great. Thank you!\n. ",
    "amit034": "confirm. all keyboard navigation works :)\n. yes. i have to work on the originally IE8 :(\n. Yes it works on ie10 ie8 mode , and yes backspace is part of the key navigation but not only delete and arrow keys also part of it I think it relate to the problem that the tree blur in \u05d5e8 doesn't change the hasfocus state\n. meanwhile as a workaround I've disabled the key navigation by setting the 'keyboard' tree option to false\n. im not on the project anymore i move the issue to other person and the will\nprobable contact you as soon the will take the latest version.\ni worked on development version not sure which one :)\nOn Tue, Mar 11, 2014 at 9:23 AM, Martin Wendt notifications@github.comwrote:\n\nHave you tested with 2.0.0-7?\n\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/issues/145#issuecomment-37269224\n.\n. \n",
    "flcl42": "Can be fixed by replacing \nnode.li.appendChild(node.ul); //near 2403 in jquery.fancytree.js\nwith \nif (node.li != null) {\n    node.li.appendChild(node.ul);\n} else {\n    node.tree.$div.append(node.ul);\n}\n. ",
    "Koloto": "No. How can it help in lazyload callback?\n. Now I have to set a special flag to the node in lazyload callback. Then I analyze this flag in event handlers from my tree structure and ignore nodes with the flag. This is NOT elegant. I think that allowing data.result = false may help.\n. Martin, any chances to fix this issue in the near future? If you think my way is correct, I can try to make a pull request. What do you think?\n. Some comments:\n\nI would prefer a html-compliant solution (are multiple <tbody> tags valid?)\n\nYes, multiple tbodies are valid. And div or span inside table aren't valid.\n\nit should work, if the nodes contain tabbable elemts (like <a> or <input>)\n\nI tried to insert <input> elements into the tree - neither backspace nor arrows don't work for them now (even when tabbable = true). I think we should handle keyup or keypress instead of keydown event.\n\nmake tree.hasFocus() smarter, i.e. record if the tree is focused in tabbable=false mode.\n\nI don't think It's a good idea. A browser already has own focus, it's enough. And as I wrote earlier, binding to the document element has a great performance overhead. Binding to the concrete $container will work faster.\n\nimprove 'tabbable=true' behavior (why do one want to disable it)?\n\nWhat do you mean? I think it would be great to improve 'tabbable=false' mode. Individual nodes can receive focus instead of a whole tree. 'Tab' can move focus to the next node like 'Down' key (and 'Shift+Tab' - to the previous node like 'Up' key). If focus is inside a nested element (e.g. <input>) 'Tab' will move it to the next node.\nIt may be 'tabbable=false' default behavior or we can introduce the third mode (tabbable=\"nodes\"?). To implement this we can add the tabIndex attribute to node elements (li or tr for table) or just handle 'Tab' in the keydown/keyup handler. What do you think?\n. I arrived at a conclusion that there is no need to support keyboard navigation in 'tabbable = false' mode. How can you move focus to the tree by keyboard in that mode? I suppose you can't. So 'keyboard' option must be equal to false when 'tabbable == false'. What do you think?\nIt will simplify the work because it doesn't need any tricks (like inserting a dummy element or tracking focused tree).\n. > Not necessarily the browsers system ':focus'. Maybe by adding a 'focus' class to the container or maintaining a global 'focusTree' variable\nWhy do you want to control keyboard navigation for the not-focused tree? I can't imagine when it can be useful. But if it's really necessary, my approach with binding keydown to $container is incorrect of course.\n. I created the pull request, please verify it. If it's ok, I'll do the same for the table extension soon.\nP.S. Sorry for a long delay, I hope I'll be able to work a bit faster now:)\n. Looks good! Special thanks for the removal of global FT.focusTree and binding to the document:)\nSome suggestions:\n- :input selector is used many times, but tag <a> also can get focus. I think we need to test a support <a> tag.\n- I tried gridnav extension for a classic tree (without table-ext) - it seems it works fine except of handleCursorKeys option. Using tag <td> is hard coded for that option. Why? Maybe rename findNeighbourTd to findNeighbourElement and define it as a method of Fancytree? And table-ext overrides it.\n- RIGHT key doesn't expand a node with table-ext. You have to press DOWN key next to expand it.\n- redundant $(document).unbind(ns) in _unbind method\nAnyway, great work in general! Thanks.\n. The pull request was merged, but changes from it are missed in your master branch now. \n. In most cases the refactoring was needed to reach the goal. Anyway I'll try to separate them in the future, thanks for the advice.\n. The point 3 (about RIGHT key) isn't related to the keyboard navigation. #103 should fix this bug. Sorry.\n. I compared a performance using that test. Here is 'cumulated test time':\n- $.html(): 2168 milliseconds\n- innerHtml: 1997 milliseconds\nSo a penalty is about 8%. It's not great but significant.\nI can offer an alternative way: introduce cleanupNode callback. It should be called before rerendering and removing a node. So we'll be able associate some data in renderNode and correctly remove it in cleanupNode.\n. I found existent renderTitle callback which can be used instead of cleanupNode.\nAlso I found redundant call of nodeRenderTitle in nodeRender method of the table extension (in 'classic' tree this call is also commented). So node.span will not be changed after first creation normally. Therefore you can associate some data with a node.span in createNode callback rather than in renderNode. And you can safely cleanup this data in removeNode.\nnodeRenderTitle is also indirectly called from methods like setTitle, fromDict and so on. But I suppose these methods should not be called via normal UI. If you call them in your code, you also can cleanup associated data before.\n. And I compared a performance after removing redundant nodeRenderTitle:\n\nCumulated test time: 1642 milliseconds\n\nThis is 17% faster!\n. Thanks for the quick merging.\n. Thanks for the quick merging.\n. You respond very quickly. Thanks a lot!\n. We can override makeVisible() method for table-ext. I suppose it's the easiest way. What do you think?\n. Your patch doesn't work:( Checking parent.tr is not enough, all previous children of the same parent should also be rendered.\n. I rolled back my changes in jquery.fancytree.js and add cosmetic changes in tests. My test doesn't pass with your patch now.\n. Now it works. Thanks!\n. ",
    "Displee": "postProcess is not being called after lazyLoad loading? postProcess is only being called for the first time.. ",
    "wimble007": "Thanks for the speedy response. Much appreciated. \n(I was following the syntax given in the FancyTree tutorial in the Quick Start section on this page\nhttp://fancytree.googlecode.com/hg-history/12558e0213c54f156a5dee61fff76f186f058323/doc/tutorial.html )\nNow working correctly following your advice above. Thanks again.\n. ",
    "mcd-php": "Oops !\nThere's a contradiction between base libs - yes, your point is valid, but mine is too :)\nAnyway, structured is better than flat, and bulk event management code in jQuery, mentioned in .unbind(), still exists and still uses tail-rooted, dot-separated namespaces.\nWhat for by-instance event names - i also ultimately disagree with this, since we lose (or at least harm) the capability to bind universally to all instances, harm code reuse etc. Instances should be differentiated by id and class, not by custom event names.\n. > do you mean that you want the server to always generate JSON for the complete contract data, and then discard 90% percent of it in the postProcess handler?\nNo. I want my REST(-like) server-side controllers to send only minimal data and not bother will it be \"folder,lazy\" at JS view side at all. I want this to be (optionally) defined on JS side in easy DSL-like way.\nNow i do it this way, not easy, not DSL-like:\njavascript\npostProcess: function(event,data) {\n    if ( -1 !== $.inArray(data.node.data.t,['root','contract']) ) {\n        $.each(data.response,function(i,e){\n            $.extend(e,{\n                folder: true,\n                lazy: true\n            });\n        });\n    }\n}\n\nhttp://wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#getKeyPath\n\nWill look, but stringly typed is anti-pattern. Array ? getNodePath(), so i can make my own keyPath with type etc ?\nNow my code looks like this:\njavascript\nlazyload: function(event, data) {\n    var\n        node = data.node,\n        t = node.data.t,\n        resultDefault = {\n            data: {key: node.key}\n        },\n        map = {\n            root: {\n                url: \"/contract/list\"\n            },\n            contract: {\n                url: \"/contract-sub-data/list\",\n                data: { contract: node.key }\n            },\n            contractSubData: {\n                url: \"/contract-sub-data-tier-2/list\",\n                data: { 'contractSubData': node.key }\n            }\n        }\n    ;\n    data.result = $.extend(resultDefault,map[t]);\n},\npostProcess: function(event,data) {\n    // icon stuff - see another issue\n    // folder,lazy stuff -see above\n}\nHow it may look:\n1. Dict of types, for each type dict of it's own lazyload,postProcessList,postProcessItem,renderTemplate etc\n2. Array of pairs, first item is function returning true or false given node (guard expression in functional languages), second is dict of own options as above.\nOne more thought. Maybe, send not just dict for item, but \"data\" and \"meta\", where data is DB record as-is to be passed to view and/or re-saved without filtering off anything, and metadata is type or anything else not to be processed in common-sence model pipeline.\n. Sorry, but:\n- I have a whole lot of workload at paid job, coding the project i use the library for.\n- I do not know the guidelines and ideology of the project, the way how you the author see it must be done, and so deep contribution may turn it into \"patch-work quilt\".\n- I have lots of dependencies in PHP and JS, and do contribute to many of them, since i'm forced to by circumstances.\nSo, my contribution is limited in both time/keystrokes and thought depth, but i'm anyway willing to do my best in available scope, since dynatree/fancytree is for my purposes the best tree library, barring maybe giants like ExtJS, Quooxdoo.\nThe screen I was making is now green-checked and quasi-stabilized, but if i'll have any more complication and questions, i will surely ask and give the (defaced) pieces of my work code as live usage example.\nFor templates and possible conflict w/ user choice:\n- make TemplateFacadeInterface.render( templatePathDots, object )\n- Implement your templates as functions generated by engine capable of this, no parsing code in minified file. The user may either redefine function-templates by one or give another TemplateFacadeInterface with his own template engine.\n. OK, will look at font-awesome extension. Guidelines to make my own ? We are close to cooking our own icon font ;)\nTried to mess with renderNode - everything breaks apart, probably takes to be CSS expert or having good cheatsheet on FancyTree CSS.\nNo i have no example of Bootstrap tree, just integrated icons and their colors (my own addition to BS).\nHere's how i did it, ugly and kludgy:\njavascript\npostProcess: function(event,data) {\n    $.each(data.response,function(i,e){\n        if ( e.icon !== undefined ) {\n            e.iconclass = 'icon-' + e.icon + ' ico-' + e.color;\n            delete e.icon;\n            delete e.color;\n        }\n    });\n    // folder,lazy stuff \n}\nFor API - don't you want to integrate some good template engine ? I see lot of string concatenation and jQuery manipulation in FancyTree source, namely in jquery.fancytree.js:nodeRender(). Having just one piece of HTML with placeholders, overridable by user, in whole or by parts, will help a lot !\n. ",
    "srathbun": "Once I get to work Monday.\nOn Nov 16, 2013 5:05 PM, \"Martin Wendt\" notifications@github.com wrote:\n\ncould you test?\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/issues/90#issuecomment-28636958\n.\n. I've tested your fix. It resolves the problem, but I am curious why you did not use the toString method. Did you want the default to always be the empty string?\n. Huh, I had a comment written up, and then I tested some things in node and chrome. Apparently \"\" + var is safer than var.toString() if var is null or undefined. I had thought it was an implicit call to toString and would fail just the same, but that is not the case.\n. \n",
    "hjehanzeb": "Not able to reproduce it on JSfiddle. Is it fine if I give you website address and you can debug from there? It might be some CSS or HTML that is producing it.\n. Hi, I \nSent from Yahoo Mail on Android\n. ",
    "funlovin": "[Expand All] and [Collapse All] work perfect for me on your example page.\nWhen I use your example tree in my code, then everything works fine, too.\nThis is my example\n<ul id=\"ROOT_System\" style=\"display: none;\">\n  <li class=\"expanded\" icon=\"/subsite/Custom/images/document_tree.png\">\n    <a href=\"/Lists/RootNavigation/DispF.aspx?ID=1\" target=\"_self\" title=\"\">Global</a>\n    <ul>\n      <li class=\"expanded folder\" icon=\"/subsite/Custom/images/gear_in.png\">\n        <span>[Title]</span>\n        <ul>\n            <li class=\"expanded folder\" icon=\"/subsite/Custom/images/folder.png\">\n                <span counter=\"true\">Equipment</span>\n                  <ul>\n                      <li listGuid=\"Guids.Equipment\" orderBy=\"Title\" connection=\"preSystemID:preSystemID\" icon=\"/subsite/Custom/images/gear_in.png\">\n                        <span>[Title]</span>\n                        <ul>\n                            <li class=\"folder expanded\" icon=\"/subsite/Custom/images/folder.png\" >\n                            <span counter=\"true\">Subequipment</span>\n                                <ul>\n                                  <li listGuid=\"Guids.SubEquipment\" orderBy=\"Title\" connection=\"preSystemID:preSystemID;preEquipmentID:preEquipmentID\" icon=\"/subsite/Custom/images/gear_in.png\"><span>[Title]</span></li>\n                                </ul>\n                            </li>\n                        </ul>\n                      </li>\n                  </ul>\n            </li>\n            <li id=\"id1.2\" class=\"expanded folder\" icon=\"/subsite/Custom/images/folder.png\">\n                <span counter=\"true\">Ships with same System</span>\n                  <ul>\n                      <li listGuid=\"{7844bc13-34f7-46f2-aabf-65276df9239f}\" orderBy=\"Title\" connection=\"preSystemID:preSystemID\" icon=\"/subsite/Custom/images/schiff.png\">\n                        <span>[Title]</span>\n                        <ul>\n                            <li class=\"folder\" icon=\"/subsite/Custom/images/folder_blue.png\">\n                                <span counter=\"true\">Ship Documents</span>\n                                  <ul>\n                                      <li listGuid=\"{081aefd0-4410-46d9-bf1d-c79c025597f0}\" orderBy=\"Title\" connection=\"preSystemID:preSystemID;preSchiffID:preSchiffID\" icon=\"/subsite/Custom/images/folder_document.png\">\n                                        <span>[Title] ([preTaxKeyword])</span>\n                                      </li>\n                                  </ul>\n                            </li>                   \n                        </ul>\n                      </li>\n                  </ul>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n</ul>\nI also tried it without the [span] tags, but without success.\n. Something wrong with my tree?\n. ",
    "q640202047": "i have some problem,so sad. ",
    "ghost": "Hi,\nthank you for answering my question. Currently i have solved this problem. It was a bug inside my request :-(\nNow it works great. \n. Is this a proposed patch? Or do you want to describe how a feature (which?) can be used?\n. @mojo2405 , does this work only with HTML tree elements (step 6)? \n. ",
    "simonecosci": "To verify you have to simply add \"lazy\": true to the leafs of your json tree\nExt \"persist\" doesn't lazy load on initialization \neg.\n\n[\n    {\"title\": \"simple node (no explicit id, so a default key is generated)\" },\n    {\"key\": \"2\", \"title\": \"item1 with key and tooltip\", \"tooltip\": \"Look, a tool tip!\" },\n    {\"key\": \"3\", \"title\": \"item2 with html inside a span tag\" },\n    {\"key\": \"4\", \"title\": \"node 4\" },\n    {\"key\": \"5\", \"title\": \"using href\", \"href\": \"http://www.wwWendt.de/\" },\n    {\"key\": \"6\", \"title\": \"node with some extra classes (will be added to the generated markup)\", \"extraClasses\": \"my-extra-class\" },\n    {\"key\": \"10\", \"title\": \"Folder 1\", \"folder\": true, \"children\": [\n        {\"key\": \"10_1\", \"title\": \"Sub-item 1.1\", \"children\": [\n            {\"key\": \"10_1_1\", \"title\": \"Sub-item 1.1.1\",\"lazy\": true},\n            {\"key\": \"10_1_2\", \"title\": \"Sub-item 1.1.2\",\"lazy\": true}\n        ]},\n        {\"key\": \"10_2\", \"title\": \"Sub-item 1.2\", \"children\": [\n            {\"key\": \"10_2_1\", \"title\": \"Sub-item 1.2.1\",\"lazy\": true},\n            {\"key\": \"10_2_2\", \"title\": \"Sub-item 1.2.2\",\"lazy\": true}\n        ]}\n    ]},\n    {\"key\": \"20\", \"title\": \"Simple node with active children (expand)\", \"expanded\": true, \"children\": [\n        {\"key\": \"20_1\", \"title\": \"Sub-item 2.1\", \"children\": [\n            {\"key\": \"20_1_1\", \"title\": \"Sub-item 2.1.1\",\"lazy\": true},\n            {\"key\": \"20_1_2\", \"title\": \"Sub-item 2.1.2\",\"lazy\": true}\n        ]},\n        {\"key\": \"20_2\", \"title\": \"Sub-item 2.2\", \"children\": [\n            {\"key\": \"20_2_1\", \"title\": \"Sub-item 2.2.1\",\"lazy\": true},\n            {\"key\": \"20_2_2\", \"title\": \"Sub-item 2.2.2\",\"lazy\": true}\n        ]}\n    ]}\n]\n\nTry to expand node 20_2_2 then it's subfolders and select one of them\nthen press F5 and selected, active and focused node are lost even if they were stored in a cookie\n. ",
    "LukasUrban": "Adding dropdown like this is not really issue I'm stuck with. The real problem is that click on dropdown button also activates the item itself.\n. That should do it. Thanks for help!\n. ",
    "pbcote": "Thank you thank you!  Yes.  I now have a good chance of having a christmas\ntree -- a fancyTree!\nOn Mon, Dec 23, 2013 at 4:46 PM, Martin Wendt notifications@github.comwrote:\n\nClosed #110 https://github.com/mar10/fancytree/issues/110.\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/issues/110\n.\n. \n",
    "allenfantasy": "It seems in the latest version, there's an error when using ext-dnd and ext-table in the same time:\n\njquery.fancytree.dnd.js:413 Uncaught TypeError: Cannot read property 'getBoundingClientRect' of null\n\nI found this error in the demo page as well as my local dev webpages.\nThe error occurred because in ext-dnd the code assume the DOM to be ul > li > ul rather than table:\njs\n// ...\n  if( dnd.smartRevert ) {\n    // #567: fix revert position\n    rect = node.li.getBoundingClientRect(); // BOOM: In here the bug errors\n    parentRect = $(draggable.options.appendTo)[0].getBoundingClientRect();\n    draggable.originalPosition.left = Math.max(0, rect.left - parentRect.left);\n    draggable.originalPosition.top = Math.max(0, rect.top - parentRect.top);\n  }\n// ...\nP.S: after digging the code for a while, I managed to work around it by making a little hack:\njs\n// ...\n  if( dnd.smartRevert ) {\n    // #567: fix revert position\n    if (this.ext.table && node.tr) { // check if ext-table is available and tr exists\n        rect = node.tr.getBoundingClientRect();\n    } else {\n        rect = node.li.getBoundingClientRect();\n    }\n    parentRect = $(draggable.options.appendTo)[0].getBoundingClientRect();\n    draggable.originalPosition.left = Math.max(0, rect.left - parentRect.left);\n    draggable.originalPosition.top = Math.max(0, rect.top - parentRect.top);\n  }\n// ...\n. Hi mar10,\nFirst of all thanks for creating fancytree, which is a really awesome plugin.\nProblem and Use case\nI would like to ask that whether this issue going to be solved? Here's my use case:\n1. We build a tree-like table to let admin user to control the permissions of all users in our website.\n2. Some permission items should be disabled, which means they never change, no matter of what status of their parents would be.\n3. These \"disabled\" items are always leaf node.\nBut when I implement the tree table I found that in selectMode 3 (multi-hier) when I change the status of one parent node, the disabled node are also changed, which is not the expected behavior.\nSolutions?\nI have read the specSelect and noticed there's one sentence:\n\n(De)Selecting a parent should never change unselectable subnodes.\n(But it is possible to implement simple custom select handlers to overide this using the API)\n\nSo I would like to know if there's any solutions to get around with this - or should we made some code patch so let it behave as expected?\nThank you again for fancytree and I would be really appreciated to get some response.\nRegards,\nAllen\n. Found the same issue with the OP, and I posted the detail in #114 \n. \ud83d\udc4d \n. Thank you for your reply :)\nYes - I think the addition option could be opts.filter and if opts.filter is defined we use visit() to call filter(node) to return wanted nodes.\n. ",
    "ovidiuisac": "Yes. This bug occurs only for Firefox and Chrome. Rewrite css with: display: inherited; or display: inline; or simple remove.\nCheck with Firefox, Chrome and IE 9 (and 7 & 8 compatibility) with XHTML and non-XHTML. Works.\nAlso use a custom jquery-ui library (minified) with 47 kb size (replace default library with 368kb size).\nIncludes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.resizable.js\nAgain: amazing plugin. Thanks.\n. ",
    "bpepper": "That link is still giving me a (mostly) blank page, with just headers, \nfooters, and an empty contents.\nOn 01/09/2014 03:01 PM, Martin Wendt wrote:\n\nThis link should work:\nhttp://www.wwwendt.de/tech/fancytree/doc/jsdoc/\nCurrently I am experimenting with different doc templates, so it might \nhave been offline yesterday.\nCan you access now?\n\u2014\nReply to this email directly or view it on GitHub \nhttps://github.com/mar10/fancytree/issues/119#issuecomment-31969939.\n. It appears to be loading now, thanks.\n\nOn 01/09/2014 03:01 PM, Martin Wendt wrote:\n\nCurrently I am experimenting with different doc templates, so it might \nhave been offline yesterday.\n. \n",
    "mcspring": "Ok! I'll fix the CI error soon. Thanks!\n2014-1-23 \u4e0b\u53486:28\u4e8e \"Martin Wendt\" notifications@github.com\u5199\u9053\uff1a\n\nThe changes seem to break the Travis build (\nhttps://travis-ci.org/mar10/fancytree/builds/17458469 ) could you fix\nthat?\nPlease note that I don't actibvely maintain this sample extension, so I\nwill merge this without further testing...\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/pull/124#issuecomment-33112374\n.\n. @mar10 Done! \n. \n",
    "wolfmanx": "EDIT: I prepared the example at: http://sw-amt.ws/other-stuff/fancytree-broken-scroll/demo/sample-scroll.html Just expand \"Folder 1\" and watch it vanish.\nYes, but it only seems so visually. (Don't worry, it happens to the best :). It's just another case of ignoring the rule of \"suffiently large\" test data sets.)\nSince you don't know me, I will explain this one issue in unrequited verbosity to hopefully establish some trust. It is meant to show off my knowledge in a shameless manner,not to belittle you in any way. I have been using Dynatree before and I am respectfully grateful for your outstanding efforts.\nVisually, you would (very roughly) expect this algorithmic behaviour:\njs\nvar truely_last_visible_node = node;\nnode.visit(function(some_remote_child_node){\n    if (some_remote_child_node.parent.expanded) {\n        truely_last_visible_node = some_remote_child_node;\n    }\n});\ntruely_last_visible_node.scrollIntoView(true, node);\nHowever, scrollIntoView is called from nodeSetExpanded in this fashion:\njs\nnode.getLastChild().scrollIntoView(true, node);\nTherefore, the result of getLastChild is not \"Sub-Item 1.2.2\", as you might expect visually, but \"Sub-Item 1.2\" algorithmically. So, the effect is the same, whether \"Sub-Item 1.2\" is expanded or not.You can still see the error, since \"Folder 1\" is no longer fully visible after expanding it with \"Sub-Item 1.1\" already expanded. Human brains are wired to accept certain tolerances and be lenient in such a case (mine, too, so I was surprised at first, that \"Folder 1\" is indeed visible, ignoring the fact, that the algorithm does not really allow for partial visibility).\nTo see the full effect of the error in undeniable glory, add a couple more items to test/unit/ajax-tree-plain.json and expand \"Folder 1\" - now it's completely gone:\n{\"key\": \"10\", \"title\": \"Folder 1\", \"folder\": true, \"children\": [\n    {\"key\": \"10_1\", \"title\": \"Sub-item 1.1\", \"children\": [\n        {\"key\": \"10_1_1\", \"title\": \"Sub-item 1.1.1\"},\n        {\"key\": \"10_1_2\", \"title\": \"Sub-item 1.1.2\"}\n    ]},\n    {\"key\": \"10_2\", \"title\": \"Sub-item 1.2\", \"children\": [\n        {\"key\": \"10_2_1\", \"title\": \"Sub-item 1.2.1\"},\n        {\"key\": \"10_2_2\", \"title\": \"Sub-item 1.2.2\"}\n    ]},\n    {\"key\": \"10_3\", \"title\": \"Sub-item 1.3\"},\n    {\"key\": \"10_4\", \"title\": \"Sub-item 1.4\"},\n    {\"key\": \"10_5\", \"title\": \"Sub-item 1.5\"},\n    {\"key\": \"10_6\", \"title\": \"Sub-item 1.6\"},\n    {\"key\": \"10_7\", \"title\": \"Sub-item 1.7\"},\n    {\"key\": \"10_8\", \"title\": \"Sub-item 1.8\"},\n    {\"key\": \"10_9\", \"title\": \"Sub-item 1.9\"},\n    {\"key\": \"10_10\", \"title\": \"Sub-item 1.10\"},\n    {\"key\": \"10_11\", \"title\": \"Sub-item 1.11\"}\n]},\nIt would be good to create a test case. If I had the time right now to jump into javascript unit testing, I would do so myself. This is actually an unexcusable limitation, but I'm trying to wiggle my way out of it with the usual \"not enough time\" argument. I promise to fix that defect on my side as soon as possible\u2122.\n. Good to know. And I agree that triage can be a PITA.\nWhile working on the reproduction code for my other request, I realized, that sample-scroll.html does not actually use option autoScroll at all. I think that should be fixed too, but I will prepare an elaborate reproduction sample rather than elaborate wording ...\n. BTW this results in a huge performance enhancement when expanding/collapsing my eintire test tree with 780 nodes.\n. I have prepared an example sample-scroll-huge.html\navailable under Examples - Tweaks - Smart scrolling (large)\nto demonstrate the performance effects.\nJust press Cycle a couple of times, then toggle \"Disable autoScroll temporarily\" and press cycle a couple more times. The last line in the table shows average times in milliseconds for expansion/collapse.\nThe code is very adhoc, since I got acquaint with the fancytree code in general and jQuery promises for the first time. It basically does the follwing:\n1. Always disable expansion effects for bulk expansion/collapse by temporarily setting option fx to null.\n2. Use promises from setExpanded to determine when to restore fx option.\nFrom what I see, it seems sufficient to just disable autoScroll altogether.\nHowever an option similar to fx,  e.g., fxScroll, would be nice.\nAs soon as I have more time, I will refine the code into something useful.\nYou can have a look at what I am aiming at under http://ws24.no-ip.org/trade_cat. It is in German, but I assume you don't have a problem with it. Right-click on a node for sub-tree expansion and collapse.\nBTW: The filtered view already has provisions for skipping hidden nodes, which will be my next feature request :)\n. Here is a direct link to the large scroll demo http://sw-amt.ws/other-stuff/fancytree-huge-scroll/demo/sample-scroll-huge.html (it may not be always available during the server upgrade this week).\n. I believe it will, and I will check.\n. The results are very good (as expected).\nAdding opts to makeVisible would make it perfect:\n``` diff\n--- a/src/jquery.fancytree.js\n+++ b/src/jquery.fancytree.js\n@@ -861,14 +861,14 @@ FancytreeNode.prototype = / @lends FancytreeNode# */{\n    / Expand all parents and optionally scroll into visible area as neccessary (async).\n     \n/\n-   makeVisible: function() {\n+   makeVisible: function(opts) {\n        // TODO: implement scolling (http://www.w3.org/TR/wai-aria-practices/#visualfocus)\n        // TODO: return $.promise\n        var i, l,\n            parents = this.getParentList(false, false);\n    for(i=0, l=parents.length; i<l; i++){\n\n\nparents[i].setExpanded(true);\nparents[i].setExpanded(true, opts);\n        }\n    },\n    /** Move this node to targetNode.\n```\n. \n",
    "ht4n": "Clicking the node sets focus on the node but not the fancy-container. The edit 'f2'/'enter'/shift-click does not work if the fancy-container is not set to focus. The fact that these f2/enter/shift-click does not work on activated node/node in focus is probably the root cause of the bug and what needs to be fixed. \n. ",
    "driswadkar": "Well, Strangely I was getting the following error everytime trying to expand a lazy node.\nAssertion failed: lazyload event must return source in data.result\nFinally when i changed the Character case of the event \"lazyLoad\" to \"lazyload\" it worked ! All the examples etc have lazy load call back specified as \"lazyLoad: function....\" \n. ",
    "bf7799": "I have right now the problem that node.makeVisible() does not work. What do you mean\n\"only scrolls nodes that are scrolled outside the tree $container\"? What will be a work-around, when the problem could not be solved in the next days?  Thanks for your tip in advance.\n. ",
    "Misosooup": "Hey, are you able to provide me some way to send you the files? It's pretty urgent actually\n. http://www.mediafire.com/download/79aib6ddvlzh90w/fancytree_custom.zip \nUploaded a zip copy to mediafire. You can download it from there. it includes the custom script + the modified version of your core files. \n. I added more checks. Like if item is a gallery, or if it's an item. So I added, isItem, isDocument, isGallery, isForm into the main fancy tree js. As for the dnd, I needed things to check if something can be placed into another folder.\nfor example, a document cannot be placed into an item, form, gallery, and item cannot be placed into an item. So I did it in the onDragEvent where i checked the type of the node and the type of the other node. \nI will attach another one with the html\n. cant seem to attach here. It says only image files are allowed.\nhttp://www.mediafire.com/download/w03prac3t5z1tm6/jquery.fancytree.zip\n. http://www.mediafire.com/download/zmhnw0nfh2f2l0e/fancytree_custom_(3).zip\nI didnt realise that the url is not working. Here's the updated one. Sorry about that. \n. ",
    "adreamer": "Lazy loading doesn't seems to be related.\nWhen I selected the static node and get the tree object, the node's selected property is false.\nWeird..\nDoes the fancytree(\"getTree\") creates a new tree object?\nI tested on Safari 7.0.1, Firefox 27.0.1 on OS X 10.9.1, with jQuery 2.0.3, jQuery UI 1.10.4\n. I changed $(\".tree\") to $(\"#tree\") and now it's working.\nJust ignore it!\n. Here are the logs.\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded(true)\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded: load start...\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded: returns\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded: load done\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded: animate start...\n<FancytreeNode(#{\"id\":117,\"type\":\"deliverable_group_id\"}, 'Marketing (jquery.fancytree.min.js, line 52)\n')> nodeSetExpanded: animate done\n. I'm using rails and the code is on erb.\n$(\"#import_tree\").fancytree({\n    source: [\n      {title : \"<%=product.name%>\", folder : true, hideCheckbox : true,\n        children: [\n          {\n            title : \"<%= book.name %>\", folder : true, hideCheckbox : true, lazy: true,\n            url: \"/books/<%=book.id%>/teams\",\n            key: JSON.stringify({type: \"book_id\", id: \"<%= book.id %>\"})\n          },\n        ]\n      },\n    ],\n    extensions: [\"glyph\"],\n    checkbox: true,\n    selectMode: 3,\n    lazyload: function(event, data) {\n      var node = data.node;\n      data.result = {\n        url: node.data.url,\n        data: {\n          type: node.data.type,\n          selected: node.selected\n        },\n        cache: false\n      };\n    },\n  });\nI didn't change the glyph mappings, and didn't give the debug delay.\n(However, delay doesn't mattered on my test.)\nAlso I committed the code which fixed my situation, so check it.\n. ",
    "idoyana": "+1\n. Hi Martin,\nit would be wonderful If could implement a multidrag\nthis is a very important feature that could help a lot\n. ",
    "kv92": "+1\nWould be great to have this feature available\n. ",
    "ryanlin1986": "Is it possible to have multi-dnd without checkbox? I'd like to select multiple tree nodes by using ctrl key, it feels more user friendly Thanks.\n. ",
    "activestylus": "Wow, this is the most thorough demo I've seen for multi-select nested tree. Very nice work, especially on the drag cursor which shows how many items are selected. Brilliant!\nTwo questions:\n1. Right now you can drag and nest anything, but what if I am emulating a file system and I only want folders to accept dropped items?\n2. Is it possible to link multiple lists so that you can drag from one to another?\n. Made a bit of progress here:\njavascript\ndragDrop: function(node, data) {\n    ...\n    var canDrop = node.span.classList.value.includes('fancytree-folder');\n    if (canDrop) {o.moveTo(node, data.hitMode);}\nNow I can only drag inside folders (hooray!). Currently trying to figure out how to get that little indicator (drop vs non-drop) to cooperate\n. Looks like I was able to figure this out. Just needed to define my own logic of what can be accepted\nPatched dnd.js as follows and my first task is done:\n``` javascript\nvar acceptable = accept === true && $target.hasClass('fancytree-folder')\ninstData.$dropMarker\n  .toggleClass(classDropAfter, hitMode === \"after\")\n  .toggleClass(classDropOver, hitMode === \"over\")\n  .toggleClass(classDropBefore, hitMode === \"before\")\n  .position($.ui.fancytree.fixPositionOptions({\n    my: \"left\" + offsetString(markerOffsetX) + \" center\",\n    at: \"left \" + markerAt,\n    of: $targetTitle\n    }));\nif (acceptable) { instData.$dropMarker.show(); }\nif( $source ){\n  $source\n    .toggleClass(classDropAccept, acceptable === true)\n    .toggleClass(classDropReject, acceptable === false);\n}\n$target\n  .toggleClass(classDropTarget, (hitMode === \"after\" || hitMode === \"before\" || hitMode === \"over\") && acceptable)\n  .toggleClass(classDropAfter, hitMode === \"after\")\n  .toggleClass(classDropBefore, hitMode === \"before\")\n  .toggleClass(classDropAccept, acceptable === true)\n  .toggleClass(classDropReject, acceptable === false);\nhelper\n  .toggleClass(classDropAccept, acceptable === true)\n  .toggleClass(classDropReject, acceptable === false);\n```\n. So I only have one pending question here: Linking multiple lists. I need my second list to be sortable and one thing I do notice in the original example you provided is that I am unable to drag items into custom order, even though I get the indicator that it's possible. How do I fix this?\n. That is very helpful. Thanks a lot!\n. ",
    "conniden": "Aww, I should've found that. Thanks! I'm trying to implement it now, but something is not working. It is triggered correctly and runs the function I want it to. So far, so good there. But the triggered function doesn't seem to \"see\" the changes to that node. If I manually run that function afterwards, it does recognize the change and processes it. Is something happening asynchronously or is there a lag somewhere? Or am I misunderstanding (likely) what the save callback is doing?\nMore detail: I'm calling a function called tree_changed. It uses the visit method to check each node in the tree to see if node.title is different from node.data.name (where I save its original title). If different, it knows to trigger an ajax update to the db. After that, I use tree.toDict to convert the tree to JSON and copy it to a textarea field on my page. Neither of these actions reflect the edited node.title, although I can see it has changed on the page. The tree_changed function works as expected when triggered by a dnd dragDrop event.\nAdditionally, the node's icon (glyph) is blanked out after the edit box is closed, whether or not a change has been made. The icon re-appears when I click on another node. This behavior is consistent across Safari (Mac), Chrome (Mac, Win7), Firefox (Mac, Win7), and IE. I've played around with the CSS though (to use AwesomeFont), so I may have broken it myself.\n. Here's a demo page that uses my implementation of Fancytree:\nhttp://ripp.com/test/ft/menu_edit.html\nI stripped out non-essential code and left some debugging stuff in there. The basics work, but I haven't done much optimization yet. Click \"Load menu\" to create the tree. Try drag/drop to see the 'Menu' textarea update (through tree_changed function). Then try editing a node. The tree display will show the edit and tree_changed will be called, but the textarea is not updated. If you then try dragging again, the edit and the drag will show up in the textarea.\n. Ahh, I was thinking the save event was happening after the edit had been applied to the node, which is why I couldn't understand why it wasn't showing in my function. I think I can do my ajax db update with the save function and then have the ajax:success callback trigger the tree_changed function. Might still be useful to have an event after the title has been updated... ;-) Thanks!\n. \"skip\" produced the same error, but saving the keys in a separate array and then iterating through that worked:\njs\nfunction delete_checked () {\n    var remove = []\n    $('#menutree').fancytree(\"getRootNode\").visit(function(node){\n        console.log('visit '+node.key+': '+node.title);\n        if (node.selected) {\n            console.log('push '+node.key+': '+node.title);\n            remove.push(node.key)}\n    });\n    for (var i = 0; i < remove.length; i++) {\n        node = $('#menutree').fancytree(\"getTree\").getNodeByKey(remove[i])\n        console.log('remove '+node.key+': '+node.title);\n        node.remove()}\n    }\nSome additional checks to remove children before parents will be required for folders, but this works fine for my case. Thanks.\n. ",
    "andilabs": "is visit() recursive? it goes deep until the leafs?\n. ",
    "erbarium": "Deleting nodes straight from the \"selected collection\" causes problem of already nonexisting nodes to be removed. \"Deleting selected\" is an useful thing do do, worth of effort. So...\nLet's first delete first node of a selected collection (which is somewhere at the top of the tree), and check if there are any selected left. And so on\u2026 We end up with recursion. Here it is:\n```\n$(\"#btnDeleteSelected\").click( function () {\n  selectedNodes = $(\"#yourTreeSelector\").fancytree(\"getTree\").getSelectedNodes();\n  if (Object.keys(selectedNodes).length) { recursivelyDeleteSelectedNodes(selNodes); }\n});\nfunction recursivelyDeleteSelectedNodes (selectedNodes) {\n  selectedNodes[0].remove();\n  selectedNodes = $tree.fancytree(\"#yourTreeSelector\").getSelectedNodes();\n  if (Object.keys(selectedNodes).length) { recursivelyDeleteSelectedNodes(selectedNodes); }\n}\n```\npretty efficient ;)\ncheers\n. Yes, different rules, but also in proper order (which was quite funny to play with)\n``\n.fancytree-plain span.fancytree-selected span.fancytree-title {\n  background-color: yellow;\n  color: black;\n}\n.fancytree-plain span.fancytree-active span.fancytree-title {\n  background-color: blue;\n  color: white;\n}\n```\nfancytree rulez!\ncheers\n  . ",
    "drigoangelo": "You're right, it was probably the cache.\nI'm only starting to use fancytree now, so I didn't know that lazyload with lowercase 'L' was an old syntax.\nSorry for the false alarm.\n. ",
    "olexp": "This issue is the same as #305 in dynatree (https://code.google.com/p/dynatree/issues/detail?id=305). It was not resolved there. Hope it will be resolved in fancytree.\nMy vision of behavior is as following:\n1. Unselectable nodes should not be selected in any way (user click or API)\n2. Parent nodes with at lest one unselectable child should be marked as partsel (parents' keys in that case are not selected as well).\nIf the behavior described in 2. is not acceptable as default then I'd like to have it configurable with options.\nFig 1. Clicking on top level node selects all children including unselectable child. Incorrect.\n\nFig 2. Selecting all child nodes except unselectable makes all parent nodes fully selected. Probably incorrect for most cases.\n\nIf all nodes collapsed user don't know if there are any unselectable items and could wrongly think that all child nodes are selected (despite there are some problems with nodes that can't be selected).\n. Sorry for late reply.\nThe scenario I'd like to be supported looks as following.\nThere is a tree of tools and their builds grouped by major and minor versions to easily work with:\ntool1\n--1.0\n----1.0.430\n----1.0.433\n----1.0.457\n--1.1\n----1.1.431\n----1.1.460\n----1.1.462\ntool2\n--1.2\n----1.2.230\n----1.2.245\n----1.2.260\nThe tree used to mark some builds for archiving. Some builds are dependencies for other builds, some builds could not be archived due to other reasons. Those builds marked as 'unselectabe' to prevent archiving and removing from the storage where they can be accessed. Unselectable nodes have different styling to help user to easily detect such nodes and make decision what to do with them. But due to big amount of tools and builds they are collapsed on release level (1.0, 1.1, 1.2). In such a case user does not know if any of release node has some unselectable child nodes. Clicking on release node or tool node user selects all child nodes (that brakes dependencies, etc.) and he is not notified that there are some problems with nodes on third level (partsel checkbox could be a help here).\nSo in reply to your questions I would say:\n- 'unselectable' means 'can never be selected'\n- a selected parent means 'all children that a user can select are selected'\nBut the last question is not that easy to answer. Especially after you examples I realized that there are some cases when it's possible to have node selected but also have uselectable option set to prevent user interaction. But still, user should not be able to drop the selected flag on node by deselecting parent node (like it is in current version of fancytree).\nAnd for me 'unselectable' is node that can't have 'selected' flag set (and checkbox selected) in any case. So setting 'unselectable' and 'selected' on source level is probably programming error.\n. ",
    "joergwork": "Hi mar10,\nfirst of all I like to say 'big thanks' for fancytree. It's fast and handy.\nI think the wording 'unselectable' is a litte bit missleading .... \nand there is big need for a second option like 'unchangeable' or even better 'disabled'.\nThe 'unselectables', like they work now, are for those cases where e.g. 'dummy nodes' are needed. So they should never be selected.\nHiding 'disabled' nodes is not an option, because it looks ugly and forces misunderstanding to the user. Fading them would be better, imho.\nThe 'disabled' nodes belong to the user action and have effect on the 'is selected' state. \nLike olexp said, but for the new 'disabled' option:\n- 'disabled' means it should never be changed\n- a 'select parent' action changes all but not 'disabled' to selected, \n- a 'unselect parent' action changes all but not 'disabled' to unselected\n- the parent node is always in 'partly selected' mode, \n  - if all children are selected, except one of the 'disabled'\n  - if all children are not selected, except one of the 'disabled'\n  - in that case, the user has to expand the children to see the changes. (or maybe fancytree should expand them)\nWhat do you think about that? . (Apart from being a major change.) That might also go hand in hand with #327 ;)\nAnd as always 'never trust what you get from a javascript', one - I'd say - must anyway implement some fancy server logic.\nWhen using lazy-loading, the tree can never send all child-nodes to the server, so therfore server logic is needed too. - Apart from that, I use the 'get only the selected root nodes' function and thus the behaviour 'if all but unselectable nodes lead to a selected parent' logic forces me to be more fancy in my server scripts.\n. I think transparency is a good idea. I would go with a second e.g. 'disabled' or 'unselectable' class, added when the checkbox is 'unselectable'. If implemented in a top level less/css (I haven't looked into them yet), it would work with every skin without changing the icons. And one would be able to override it in a custom (or whatever) template, when needed. - Apart from that, my time is very limited ATM.\nI think something like the following would be nice:\n<span class=\"fancytree-checkbox\"></span>\n<span class=\"fancytree-checkbox disabled\"></span>\n. yeah! Thanks a lot!\n. hitMode is very important ;-) as you always drop \"over\", \"before\" or \"after\" an existing node.\nSee answer to your SO post.\nHope that helps.\n. ",
    "arvindabz": "Hi,\nI have tried the suggestions here but I am still not able to  change selectMode after I click on a button. I put some snippets of my code here if it's ok. Hope I can get some help:\n```js\n        // Init Organization filter\n        $(\"#Organizations .OrgTree\").each(function () {\n            var $this = $(this);\n        var organizationUnitId = $this.data(\"orgid\");\n        //var treeData = JSON.parse($(\"#treeData_\" + organizationUnitId).val());          \n        $this.fancytree({\n            extensions: [\"persist\"],\n            selectMode: 2,\n            persist: {\n                expandLazy: true,\n                // fireActivate: false,    // false: suppress `activate` event after active node was restored\n                // overrideSource: false,  // true: cookie takes precedence over `source` data attributes.\n                store: \"auto\" // 'cookie', 'local': use localStore, 'session': sessionStore\n            },\n            icons: false,\n            checkbox: true,\n            toggleEffect: null, //disable animations\n            source: window[\"treeData_\" + organizationUnitId], // treeData               \n            lazyLoad: function (event, data) {\n                var node = data.node;\n                data.result = {\n                    // Some Data\n                };\n            }\n        });\n    });\n\njs\n$(\"#changeSelectModeBtn\").click(\nfunction () {\n            debugger;\n            $(\"#Organizations .OrgTree\").fancytree(\"getTree\").visit(function (node) {\n                node.setSelected(false);\n            });\n            // Initially selectMode is set to 2\n            $(\"#Organizations .OrgTree\").fancytree({ selectMode: 1 });\n        })\n. Thanks for reply. I used  $(...).fancytree({selectMode: 1}); now and now I can easily switch back and forth between different select modes. Now I would like to ask, do I need to repeat the initial setting as well?  For example after I switch Select Mode I still want to keep my other settings for \"persist, lazyloading, source ...\"\nDo I need to include in `$(...).fancytree({selectMode: 1});`  as well? Something like:js\n$(...).fancytree({\n     selectMode: 1, \n extensions: [\"persist\"],\npersist: {\n                    expandLazy: true,\n                    store: \"auto\" // 'cookie', 'local': use localStore, 'session': sessionStore\n                },\n                icons: false,\n                checkbox: true,\n                toggleEffect: null, //disable animations\n                source: window[\"treeData_\" + organizationUnitId], // treeData             \n                lazyLoad: function (event, data) {\n                    var node = data.node;\n                    data.result = {\n                        // Some Data\n                    };\n                }\n}); \n```\nOr only  $(...).fancytree({selectMode: 1}); will suffice and the initial settings will be rememberd?\nThanks a lot again. Oh. Then $(...).fancytree(\"option\", \"selectMode\", 1); is exactly what I need. THANK YOU!. Ok I delete it here and put it on stack overflow. ",
    "PGB99": "Okay, thank you, this pointed me in the right direction.  Someone also pointed out to me a JSON Validator that helped me track down the issue.  I was building a massive tree of items that was impossible to debug by hand, but this site helped point out where I was missing double-quotes, too many commas, and so on.  http://jsonformatter.curiousconcept.com/\n. ",
    "pioneerpathan": "I am facing the same problem. But in my case, there is no issue in format of JSON data. I am reloading the fancy treeview dynamically on select change event of a dropdown. For the first time it is loaded fine. but for 2nd time it is give the error written in the title of this post.\nI couldn't figure out the issue.\n. ",
    "jsh562": "i also have this issue.\nIt loads the string source data fine on the first initialization, but when i try to reload the tree with the same string source data, it gives me this error.\n. Hmm.. i tried that but it didnt work at first.... -_-\nmust have had too much junk around it.\nNot sure if this is supposed to be the case, but with my tree, it does not re-render when I drag and drop. This causes the hierarchy index numbering to be off until I kick off another piece of code that does re-render it (like edit/close).\nThank you!\n. I am also running into this issue with the <tr> elements.\n. i wanted to use it for:\nhighlighting certain cells/rows depending on values/selections/state of other things.\n. Okay. I found getLevel(), but its still giving me 1 for both top-level objects AND the root.\nOther levels work as expected..\nIt seems that whenever I dragDrop onto the root, the target node is always the node right below my cursor.\n. Great that works. Thanks again!\n. Oh, I may have figured it out.\n. Fixed. Thank you.\n. Oh, sorry. What I meant to say is that I need to be able to choose which specific elements are tristate, instead of just a blanket Selectmode: 3 across the whole tree\n. ",
    "evdinursan": "Thank you very much. I will download it now. Thanks again!\n. It's working. THANK YOU! I have only one question - I'm not very familiar with the git system and I took the source code from the repository and I've overwrote the file that I downloaded from the 2.0.0 - 7 release. Can you please tell me when this change will be visible into a release download? Thank you again for the clarifications.\n. ",
    "jbbrunsveld": "Hi, \nThis is still an issue:\n\"Also (not sure it's the same issue), some themes directly included from the src directory are looking for image resources in the same directory but they are not there.\"\nThe solution is to remove the src from ignorance in bower.json, so it will be checked out as well after a bower install. Now I'm missing all the valuable plugins and have to checkout this separately what is really ugly in my opinion.\n. ",
    "bharatpatil": "Need to see if we can use https://clusterize.js.org/ to implement this.\nhttp://cheton.github.io/infinite-tree/ is using clusterize to render tree.\n. @mar10 - I've put together a jsbin you can find it over here which contains fancytree (table extension) integrated with clusterize.js, however collapse and expand is not working. I am going to work more on this. \nclusterize.js can be given an array of table rows as an input to render. \nLet me know if you can help me with this.\nhttps://jsbin.com/ravona/edit?html,js,output\n. Probably it seems that, filter needs to be re-applied once the rename operation is done, as the new title may not be a match with the desired filter value.\nSo question is how to do that?\n. ",
    "Blinnikov": "Corrected the message. I forgot to escape html.\nIf you allow node's title to contain html markup it is direct way to html injection. It is possible to set title as <script>alert('Hi');</script> and you will see alert message in your browser. I think this ability should be prohibited. The other possible solution I see - to have the option to allow setting title as innerText or innerHtml of the span element.\n. I agree that having ability to set HTML in the node is good. But when it used properly.\nI think {allowHtmlTitles: true} option would be great.\nIn our current project we allow end users to create items that lately will be shown in the tree structure. In this case if user creates item with closing tag in title (like </li> or </ul>) then layout will be broken. In other case user can insert malicious js-code into title. This code can redirect me to some other page that looks like mine, moreover it can chage tree structure, add fake nodes or remove existing ones. Maybe a lot of examples.\n. ",
    "markbernard": "You are getting the user input so sanitize it before applying it.\n. Ok. Thank you.\nThat is what I was missing.\n. I also updated the WiKi to show using a function.\n. I have fixed this and issued a pull request. We'll see if my change is correct and accepted.\n. Don't forget that parent nodes that would normally be hidden will be dimmed instead if they have children that are visible.\n. Had to fix a couple things. Will make another pull request.\n. Does Travis CI expect you to declare all variables at the beginning of a function in one var statement? Is this how you want it also? I can change it if you want.\n. Fixed multiple vars into a single one.\n. I set up grunt, but I have never used these tools before so I don't understand what this error means. I tried to search for it but there is not much on what the error codes mean.\n. When I run the code in the browser there is no problem but the unit tests throw this error: 'null' is not an object (evaluating 'domNode.nodeName'). I tried using jQuery calls instead but that just moved the same message into the getNode function call with null being on the domNode object I passed in. The latest fix I tried just caused the test to stall. I am at a loss as to what the problem is since it is working in the browser with no problem. I tried it in IE, Firefox and Chrome.\n. Thanks. If you don't mind, once you figure it out, could you let me know what the problem was. I would like to know so I don't bug you so much in the future. \nThanks.\n. I think I discovered the problem. When I ran the tests in the browser I noticed that the click events were being targeted at the LI element instead of the SPAN element with fancytree-title class. The browser event is always generated from the SPAN not the LI. i will change the test and see if it passes. If you agree you should be able to finally merge it.\n\n. That change looks good. I tested it with an input text field and the single and double click worked correctly.\nI can't really argue about browser events but it just always seemed to me that when you click on any text in the browser window the immediately containing element always received the event. In any case your fix can ignore this argument.\nThanks.\n. Finally. It's done. I can't believe it complains if you mix tabs and spaces.\n. Sorry. Misunderstood. The test code worked properly with your change. Do you want to leave the test code as is or make the change I suggested?\n. I'll go ahead and do it.\nThanks.\n. If you look at the Theming demo it shows how to replace icons.\nhttp://wwwendt.de/tech/fancytree/demo/\n. If you are using GSON to generate your JSON data then you can use @SerializedName annotation to make it use key instead of id for the name.\nhttp://google-gson.googlecode.com/svn/tags/1.2.3/docs/javadocs/index.html?com/google/gson/annotations/SerializedName.html\n. This is one of the drawbacks of lazy loading. Fancytree can't possible know the path to an id in your database. I ran into the same problem and I created a key-chain so I could programmatically invoke lazy loading down the path that I wanted.\n. Yes. It is a delimited list of keys. I pop the top key off and call lazy load for the key. I also push the remaining keys as user data into the node. When load children is called get the keys out of the node and do it again until there are no more keys left.\nIt would seem that loadKeyPath is for that purpose.\nAre you saying you can't get loadKeyPath to work?\n. Thanks for this. I have a project where I want to have a specific icon for each node and this will help a lot.\n. If you show a code example it would help. Maybe use JSfiddle.\n. You can include html in the title attribute and it will be rendered properly. ie you can put links and buttons in each individual title.\nIs that enough?\n. loadChildren is called after lazyLoad populates the nodes.\n. It turns out it is my fault. I have code in \"loadChildren\" that auto expands single nodes. However under v2.0 loadChildren was not being called on the initial tree load. A bug I imagine that was fixed at some point. I was just unintentionally exploiting that bug. I have fixed my code now. Sorry to bother you.\n. ",
    "albinohrn": "Hi!\nI think that you should reconsider escaping the title upon rendering. \nRaw HTML in titles can be seen as a feature in some cases but now it's not always treated as raw HTML. When I look at the edit extension I can see that HTML in node titles are not allowed. When added back they are always escaped. \nTo make the behaviour more flexible and explicit I would suggest an option, escapeTitle. When enabled the title would be escaped using FT.escapeHtml() before it is rendered. The benefit of escaping upon rendering vs a node.setTitleSafe() is that you still have the correct value in the model. \nWith the escapeTitle option you can decide if you should render your titles as raw HTML or not. The option would default to false.\nIf you are interested I could send you a pull-request where I have added the option.\n/Albin\n. ",
    "pmeijer": ":+1:. I'm trying to upgrade to version 2.21.0 from 2.15.0 and am having issues with the removal of removeNode:\nThe current event removeNode should be removed and replaced by modifyChild('remove')\n\nI can no longer access any data of the removed nodes since the childNode is always null when removed. It looks like the removeNode was more of a \"beforeRemoveNode\" and the modifyChild is triggered when the node is removed. \nIs there are way around this (aside from manually bookkeeping all the children on the parent).\nThanks\n. Ah that makes sense. Should have looked closer - my bad!. Is it possible to disable the Set focus to first node on first tab-in part? From what it looks like right now, at tree-focus the root-node is put in focus.. ",
    "warrenrox": "Upon further thought I agree; thank you for your speedy response!\n. ",
    "Kevin86FR": "It's ok, i find an other solution by myself :)\nThanks to you\n. Yes it's that ! I've just found it after my issue here :)\nThanks to you !\n. Hi,\nFinaly I have an other question... Is it possible to do the same thing for a key ?\nI want to do a drop of my node and just after, I would like to change my key... Example : \nI have a node with a key \"p25\", I drop this node in an other folder and the key changes for \"a25\".\nCan i do that ? \nThanks for helping :)\n. ",
    "trnsnt": "Yes it works as expected, thanks a lot!\n. ",
    "fifonik": "P.S. version 2.0.0-9\n. At the beginning I did implemented it in ext-childcounter as well, however then I changed my mind.\nIn my case your implementation looks OK, however I do not like camelStyles in attributes or in json.\nJust one silly idea: what if to store child count for lazy subtrees in lazy attribute? \nlazy=\"true\"\nlazy=\"5\"\n. ",
    "smeyfroi": "@mar10 thanks for all your work on this component: working very well in my app so far. :-)\n. @mar10 I tried this out last night: works well, thanks for merging.\n. Yes, you\u2019re right: there are lots of useful options in the queryui setup.\nI might need to make this more extensible over the next few days in which case I\u2019ll push to this branch for you to look at.\nOn 16 Apr 2014, at 21:34, Martin Wendt notifications@github.com wrote:\n\nI will look into this (beeing offline for some days now).\nNot so sure about 999 however, I think it should be configurable (as well as the other options like scrollSensitivity, ...)\n\u2014\nReply to this email directly or view it on GitHub.\n. @mar10 thanks for making this change: elegant and works well.\n. \n",
    "slubowsky": "But then drag and drop doesn't scroll tree properly. Dragging item to top after having scrolled down does not cause tree to scroll up as it does in full size tree...\n. Yes, setting the container to position relative does solve the problem - with the soon to be  fixed jQuery draggable bug of the drag icon being shown in wrong location that you reference. Thanks\n. ",
    "itsmaheshp": "Yep, that worked perfectly. Thanks alot...\n. ",
    "AASanchezA": "I solver the issue, i was my mistake, \nI was trying like this:\nnode.data.icon = \"/img/customicon.png\";\nnode.render(); \nbut then after re-readed the documentation I did like\nthis:\nvar $span = $(node.span);\n$span.find(\"img\").attr('src', \"/img/customicon.png\");\nthanks a lot,\nthis is a great plugin!!\n. Yeah, the latest version solve the problem thanks!?!\n. Thanks for the hint!!! :+1: \n. ",
    "digulla": "Wouldn't it be better if filter accepted a function which gets a node and returns true/false depending on whether a node matches or not?\nA second function would then be used to \"highlight the match\" in matched nodes.\n. ",
    "rekinyz": "same error, if I replace the \n\"http://wwwendt.de/tech/fancytree/lib/jquery-ui.custom.js\" with the \n\"https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js\"\nit will not work.\n. ",
    "Krisa": "Was looking for that too. Using only UI Core > Core + Widget and eventually the associated effect (in my case \"Effects Core\" & \"Blind Effect\") was enough... This reduced from 250KB (!!) to a more acceptable 25KB...\n. > I did notice that when using skin-awesome, it's looking for loading.gif on lazy nodes and there's no loading.gif in skin-awesome.\nYes, that's still a bug. I think this css shall be removed actually.\n. Your example is actually showing what's not working, even so my problem is actually slightly different. But about your example, if you open the lazy folder (manually), and then another one (below in the hierarchy), you can see that the counter on the top folder is not updated when a child is opened.\nMy problem is actually relatively similar. http://plnkr.co/edit/qClzBA4UpgMygS798tC8?p=preview\nIn this case, the folder is loaded in javascript but when it's loaded, the counter is not updated either. (Please have a look at script.js)\n. Yes, I got it working in my app and I confirm this works but somehow the render function does more than just updating the number on the folder and the side effect is that it \"freezes\" the top folder button as long as not all sub folders are loaded.\n. Thank you this works good. Also from a performance perspective, the tree is not \"frozen\" anymore\n. I understand, but we have the method lazyLoad, which is already smart enough to know when a node has to be loaded. Why implementing additional logic when we already have a handy method to do this job? \nIdeally, the app should just see in its \"event loop\" all the nodes which needs to be updated and send them in an array automatically to the server. data in lazyLoad: function(event, data){...}should be basically a kind of array at the end.\n. Fair enough for the event loop. A pragmatic solution could be implemented like following:\n$(\"#...\").fancytree().loadNodes([ key array ]).then( ... with the keys, which are then transmitted to the lazyLoad function in the second parameter. The lazyLoad function should be also slightly extended so that it can accept an array of all loaded nodes as an answer.\nI'm fully aware this can also be done manually, but it's just a more elegant way to do this at the end.\n. Sorry for the late answer. This almost works as expected but there are 2 small issues:\n- The folders (with the mode \"hidden\") are actually \"dimm\" when there is a filter which is applied (this would be more natural that the color remains the same).\n- The counter is colliding with another extension, childCounter. Even when saying counter: false, the css is overwriting the color. Also the counter of Ext-Filter is not counting properly, or at least behaving differently than childCounter: sub folders are ignored for ext-filter, while childCounter is counting sub folders. For my app, I must say I almost prefer the way ext-filter is working, but well, there is a discrepancy between the 2 extensions.\nActually, I may just remove childCounter (and applies a dummy filter when the table is loaded so that the filter counter is initially displayed) and this would solve my second issue.\n. Actually, not so easy to remove childCounter and use a dummy filter just for making the job of childCounter. This causes somehow some lags combined with some other fancytree functions I'm using (especially .render() ). So I still need childCounter with ExtFilter. My previous remark about the CSS was wrong, this was my own CSS which was ignored by ExtFilter, now fixed. \nThe only problem I'm still facing is still the collision between childCounter and ExtFilter. It's not just about the 2 extensions counting differently (again, ExtFilter seems to ignore the nested folders, while childCounter counts the nested folders), but also from one side childCounter is ignoring hidden folders and on the other side childCounter is often (but not always) overwriting the result of ExtFilter (can't exactly figure out how this happens). Either way, I believe that ExtFilter is doing fine, but childCounter should be extended to 1. consider hidden folders (from ExtFilter) and 2. doesn't count folders anymore (or put it at least as an option, so that the result provided by childCounter is the same than ExtFilter). This way this would enable to use both childCounter and ExtFilter together (by setting ExtFilter counter option to false, or an option to tell ExtFilter to use childCounter for counting). \n.\n. Backwards compatibility is possible when checking whether a module wrapper exists. Here is a good blog post about it http://ifandelse.com/its-not-hard-making-your-library-support-amd-and-commonjs/\nNow, I see an additional complexity in regards to what to load from jquery-ui. OOTB, the 3 jquery-ui modules I've listed above are enough (even so they load more by themselves), but I think that this plugin supports more than just the \"blind\" effect...\nApart from this, some assumptions could be done for simplifying. People downloading the dist file are for sure not interested in any module bundling and will put straight the minified file in a script tag. Others using browserify may not be interested either in module bundling while those using npm are very likely the ones who are interested in that. It looks like that's the approach that the folks at jquery-ui have been using (by putting straight var jQuery = require('jquery'); in the dist file). \n. ",
    "arkk": "\nHi,\nAs you can see in the screenshot, you cannot see the branches once u expand the tree(note this is in filtered mode)\n. But my question for dimm filter. we are able to expand the tree y not for hide filter. is it possible to do. Can you please guide me here ..like what code change required to get the above functionality.\nThanks in advnance\n. ",
    "vp-vsean": "Excuse me, sir!\nCould you show me how to expand all matched nodes when we use filter feature?\nThanks!\n. ",
    "sushantjadhav21": "Save issue is happening with the Edit ext. Whenever I am saving the node after editing node, icon is changing to default.\nFor now could you please suggest me the workaround to avoid icons from changing to default?  \nThe possible cause of this issue could be both edit and childcounter exts are calling the renderTitle() method internally.\n. renderNode: function (event, data) {\n                    var node = data.node;\n                    if (node.data.type) {\n                        var $span = $(node.span);\n                        if (node.data.type === 'xyz') {\n                            $span.find(\"> span.fancytree-icon\").css({\n                                backgroundImage: \"url(/Content/images/node1.png)\",\n                                backgroundPosition: \"0 0\"\n                            });\n                        }\n                        else if (node.data.type === 'abc') {\n                            $span.find(\"> span.fancytree-icon\").css({\n                                backgroundImage: \"url(/Content/images/node2.png)\",\n                                backgroundPosition: \"0 0\"\n                            });\n                        }\n                    }\n                }\nCode above is responsible of changing the default background image of the node.\nNow what is happening is whenever I edit the node and save it custom image/background image set by code above is replaced with the default image. \n. ",
    "gokhanege": "Wonderful!, thanks.\n. ",
    "Evidica": "I commented out the assert which caused another assertion as follows:\nAssertion failed: only init supported\n. What!? You mean you can't tell me exactly what is wrong without an example!?\nI'll see if I can get a triage file.\n. I figured out why I was getting the error.  I was calling the function that sets the tree up twice on post back.\n. @hayk2014 did you check to verify you weren't erroneously calling init function twice by accident? That is what was causing my issue.\n. ",
    "dalholm": "i have the same problem.\nwhen i first run the script all works. But when i reload it with onclick function.\nloadTree(from, to) loads and after that loadTree() loads again and i receive an error: Uncaught Error: Assertion failed  \n``` javascript\nloadTree();\n$('#gtdata').on('click',function(event){\n            event.preventDefault();\n            var fromDate = $('#from_date').val();\n            var toDate = $('#to_date').val();\n            loadTree(fromDate, toDate);\n        });\n    function loadTree(fromDate, toDate){\n        console.log('running');\n        var postData = {};\n        var action = 'firstload';\n        if(fromDate && toDate){\n            postData = {frdate: fromDate, todate: toDate}\n            action = 'load-between-dates';\n        }\n        $(\"#tree\").fancytree({\n            source: {\n                url: BASE_URL+\"admin/module.php?module=Generic_ReferenceSales&file=ajaxData.php&notemplate&action=\"+action,\n                data: postData\n            },\n            cache: false,\n            activate: function(event, data){\n                // A node was activated: display its title:\n                var node = data.node;\n                console.log(node.key);\n                loadSalesData(node.key);\n\n            },\n            checkbox:true,\n            lazyLoad: function(event, data) {\n                data.result = {\n                    url: BASE_URL+\"admin/module.php?module=Generic_ReferenceSales&file=ajaxData.php&notemplate&action=getSubs\",\n                    data: {key: node.key}\n                }\n            }\n        });\n    }\n\n```\n. ",
    "haykhov": "I have some problem too\nUncaught Error: Fancytree assertion failed: only init supported\n. ",
    "aartavazd": "I have a function which will create tree.\njs\nfunction createLibTree(vendorId, libID, elm_geom_selectedValue) {  \n    var node = $(\"#tree\").fancytree(\"getRootNode\"); \n    node.result = $.ajax({\n        url: AJAX_URL+\"ajax/create-library\",\n        dataType: \"json\",\n        type: \"GET\",\n        data: {\n            \"vendorId\": vendorId,\n            \"libId\": libID,\n            \"elm_geom_selectedValue\": elm_geom_selectedValue,  \n            \"onLazyRead\": \"level1\"\n        },\n        success: function (obj) {  \n            ???????????\n        }\n    });  \n}\nBut I dont know how in success create a tree!\n. ",
    "yeziz2Z": "js\n$(\"selector\").fancytree({  \n    source:{\n        url: \"XXXXUrl\"\n    },\n    filter: {\n        mode: \"hide\",\n        autoApply: true\n    },\n});\nCan this function be called only once?\n . ",
    "darkaizel": "one more question.\nI can't use node key type Integer?\nkey type is String very well find and loadKeyPath function working.\nbut Integer key type do not woring. can't find.\nI have to change key type?\n. thank you very very very much.\nfancytree version : 2.0.0 lastest release\nmy source is \n\"key\" : 1\nCHANGE :\n\"key\" : \"1\"\ngood work.\nbut I can't solve expand all problem.\n, loadChildren: function(event, data) {\n                    data.node.visit(function(subNode){\n                        console.log(subNode.isUndefined() + '~' + subNode.isExpanded() + '~' + subNode.title);\n                        if( subNode.isUndefined() && subNode.isExpanded() ) {\n                            subNode.load(true);\n                    }\n                });\n            }\nAT lazyNode\nconsole.log result is isUndefined() = TRUE but isExpanded() = FALSE\nlazyNode source is\n{\"key\" : \"8\", \"title\" : \"dept1\", \"lazy\" : true, \"folder\" : true}\nsorry for this primitive level question. and thank you for your help.\nand a tiny question\nfancytree do auto generated invisible node? ex : title : \"root\" , key : \"root_1\"\n. ADD.\nfn: expandAll\n/ROOT_NODE/.visit(function(node){\n  node.setExpanded();\n});\n\ncaption //  lazyNode (1-1, 1-2, 1-2-2)\nif call fn:expandAll\nvisit : 1-1. 1-2, 1-3, 1-4\nnot visit 1-1-1, 1-1-2, 1-2-1, 1-2-2\nevent : loadChildren\nvisit : 1-1-1, 1-1-2, 1-2-1. 1-2-2\nvalue[undefinded, expanded] : 1-1-1 [false, false],  1-1-2 [false, false],  1-2-1 [false, false],  1-2-2 [true, false]\nI can't speak english well, so I added diagram and caption\n. no more advice....\n. ",
    "blained3": "I had the same exact issue as described in the title. The error is in the skin you are using. It didn't work for me while I used a skin-themeroller, but it works on every other skin.\nIt seems that the class 'fancytree-ext-filter-hide' isn't there or something. I'm not sure on that part.\nThat's why your example works because themeroller isn't an option.\n. ",
    "ruud-altenburg": "I received a notification that the issue was closed. I have downloaded fancytree again, but the fix doesn't seem to be implemented yet in the stable release. How do I know when to redownload the library?\n. ",
    "aparticka": "This caused a bug in my application dragging from one tree to another. The dragging/dropping still works but the helper element is visible only in the tree it originates from.\n. I made a fiddle to demonstrate the issue I was having. I hope you don't mind me using the files hosted on your website as external resources for it.\nhttp://jsfiddle.net/7YWAr/\n. ",
    "karol-wojcik": "Also having same issue.\n. @fcis2008 How do you create a link? Dynamically? If so, maybe you should use jQuery .on() method to bind event with dynamic content, like this:\njavascript\n$('#tree').on('click', '.your-link', function(event){\n    var node = $.ui.fancytree.getNode(event);\n    alert(\"click\" + node);\n});\n. ",
    "iweindesmedt": "Same here\nhttp://jsfiddle.net/r0wzqm4y/\n. ",
    "creativedutchmen": "Strange, clearing the caches seems to work. Which is bizarre, because I installed Firefox specially for this test, so I assume its cache was empty. \n. ",
    "sbagchi": "\nI also had the same problem with the large tree. lefunque's solution worked for me. See attached screenshot.\nSource code is here https://gist.github.com/sbagchi/2a154314f8a546e454a6\n. ",
    "iljailjic": "I'm not an expert, so correct me if I'm wrong, but I think that your solution will not work in case when lazyload is used.\n. ",
    "JonathanPicques": "Yes, the fix works,\nFiddle of the solution: http://jsfiddle.net/F26hR/3/\n. ",
    "hellmanj": "With padding:\n\nWithout padding:\n\n. ",
    "DaSchTour": "Here is a sample\nhttp://jsfiddle.net/p29ub/\n. Thanks a lot!\n. Well, although it was fixed somewhere in between. But now it is borken again :(\nhttp://jsfiddle.net/p29ub/2/\n. Is this maybe the same issue as #257 ?\n. ",
    "huyttq": "I got the same issue when using with table extension, but you could fix yourself by using renderNode/renderColumns event\n. ",
    "patie": "@mar10 i need the same functionality, its possible ? many thanks\nim trying dnd + some actions links but when i try catch click event target i give for example this:\n<FancytreeNode(#4, '<div>Node 2.2 <span class=\"show\">dole</span><div class=\"content\" style=\"display:none\">content</div> </div>')> nodeSetFocus: forcing container focus\n. ",
    "addnab": "Yup. Working crisply now. Thanks for the fix.\n. ",
    "ArnoldSchuitema": "Thanks, its working now!\nKind regards,\nArnold Schuitema\n2014-06-26 22:13 GMT+02:00 Martin Wendt notifications@github.com:\n\nProbably related to this:\nhttp://stackoverflow.com/questions/16916711/why-does-clicking-a-drag-handle-not-steal-away-text-focus\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/mar10/fancytree/issues/270#issuecomment-47274158.\n. \n",
    "krash84": "Hello!\nI've found that the following example doesn't work if you do next steps:\n1. mouse click on a node,\n2. navigate with keys (works fine),\n3. again mouse click on a node => keyboard navigation is broken.\nhttp://www.wwwendt.de/tech/fancytree/demo/sample-ext-dnd.html\nThis is because the tree already has focus, and the next line in DND extension doesn't let the node to be focused again:\n(in treeInit:)\nif( !tree.hasFocus() && ctx.options.dnd.focusOnClick ) { // the tree already has focus at the step 3\nMy workaround is just to remove \"!tree.hasFocus() &&\" part:\nif(ctx.options.dnd.focusOnClick )\n. ",
    "rcinnamon": "Solved my problem like this:\n$('#tree2').fancytree({\n                ajax: { type: \"POST\", contentType: \"application/json\" },\n                source: {\n                    url: \"/tree.aspx/getTreeData\"\n                }\n            });\nIt seems that by default, the ajax requests made by fancytree are all \"GET\". Added the ajax options as shown above, and i am now able to retrieve the json object!\n. ",
    "firebird631": "1) put '2.2' as filter (and using hide mode)\n2) put the selection on (click on) folder \"Simple node with active...\"\n3) try to keydown on visible 'Sub-item 2.2'\n. ",
    "Etdashou": "Man.... I would like this to work so much, but it doesn't :'(\nWhen I try to reload new data, I type this code:\n$('#myFanceeTreeID').fancytree({reload: myJavascriptArray});\nHowever nothing happened. The tree stays the same with the old source...\nPerhaps I don't call the reload correctly?\n. I tried for fun to call $('#myFanceeTreeID').fancytree({render: true}); right after I do the reload and all it does is that it reset the old tree with the previous data. Like if I had folder opened they are closed as it was initially created.\nBut I don't see the new data.\nSo strange...\n. ",
    "gbastien": "Hi,\nthank you to consider this ;-)\nWe should ask some CSS expert about this, I have some under the hand here, I will see with them and come back to you when I found a reasonable solution.\nGauthier\n. Hi @mar10 \na CSS worker had finally time to look at this here, here is the result, use padding instead of white-space...\nul.fancytree-container {\n    font-family: tahoma,arial,helvetica;\n    font-size: 10pt;\n    white-space: nowrap;\n}\n.fancytree-title > p {\n    padding-left: 2.3em;\n}\n.fancytree-title > h3 {\n    margin-top: 0;\n    padding-left: 2.8em;\n}\nWhat do you think of this?\nGauthier\n. ",
    "twotribes": "Hi,\nwe basically ran into the same issue when using version 2.7.0 and the skin lion theme, i.e. a small container overflow like in the image from an earlier post in this thread:\n\nBut this also happened for single line nodes.\nUpon further analysis, I found the root cause and developed a fix as a CSS override because we didn't want to go into fancytree's source code.\nThe container overflow is caused by the current strategy of aligning the node's contents horizontally. This will inevitably make the node's title element assume the full width of its container but pushed outwards by the expander and icon element in front of it.\nWhile this could be fixed by assigning a dynamic width to the title element (e.g. width: calc(100% - [width of preceding icons]), this CSS property doesn't work in IE9 and IE8 (see: http://caniuse.com/#search=calc )\nTherefore I modified the layout strategy for the node's children by using absolute positioning for the icons and making room for them within the title element via padding-left.\nThis override looks like this and is proven to work flawlessly with all browsers incl. IE8+:\nspan.fancytree-node {\nposition: relative;\n}\nspan.fancytree-expander {\ndisplay: block;\nposition: absolute;\nleft: 0;\ntop: 0;\n}\nspan.fancytree-icon {\nmargin-left: 0;\ndisplay: block;\nposition: absolute;\nleft: 19px;\ntop: 0;\n}\nspan.fancytree-title {\npadding-left: 41px;\nmargin-left: 0;\n}\nOf course this fix might not be perfect for other themes or features we aren't using in our application (a huge global extranet ordering system for a multi-billion $ company). But I think the different layout strategy is worth considering as it works with single and multi lines as well.\n. ",
    "cksachdev": "Is there a solution to word wrapping in latest version of fancytree? . \n@mar10 When I shrink the browser, ext-wide isn't doing the wordwrap for the title.\nHere is another screenshow from wordwrap example:\n\n. Figured out a workaround for now to address it. Here is my renderNode function\nrenderNode: function(event, data) {\n    var node = data.node;\n    if (node.data) {\n        var $span = $(node.span);\n        $span.find(\"span.fancytree-title\").text(node.title).css({\n            \"white-space\": \"normal\",\n            \"margin\": \"0 30px 0 5px\"\n        });\n    }\n}. Enter key performs the default action on end nodes.\nDo I need to add event handler to handle this for now? . Here are few comments from a testing team:\n- [ ] aria-selected attribute is not updated as per the state of the node changes (I am not using checkbox, aria-selected gets updated only with checkbox)\n- [ ] aria-owns attribute is missing, the parent/child id association are not properly mapped.\n- [ ] aria-setsize missing which communicates how many nodes are present\n- [ ] aria-level missing, which communicates the depth of the node\n- [ ] aria-posinset mssing, indicates the position of the node in the group\n@mar10 Could you please provide your inputs and guide on the updates required.\nI will make a fork and send PR based on your suggestions.. Thanks for the links @mar10 You are right 'selected' and 'active' are independent statuses. Probably NVDA or JAWS interpret them and then the user gets a right message to understand the status of current element.\nWhat will be your suggestion for aria-owns, setsize and other attributes? I checked that jquery.fancytree.js includes the login to add necessary attributes. \nIs it supposed to be a plugin, or I need to update in jquery.fancytree.js?. @mar10 Yes, that was a typo mistake. In the sample-aria example, aria-setsize, aria-level and aria-posinset is missing.\nI looked into ariagrid.js extension and in the method name nodeRenderStatus, I could find those properties. Would you recommend to use these or in your opinion those are not required? \nBelow is the snippet from ariagrid.js extension.\n```\nnodeRenderStatus: function( ctx ) {\n        // Set classes for current status\n        var res,\n            node = ctx.node,\n            $tr = $( node.tr );\n    res = this._super( ctx );\n\n    if ( node.parent ) {\n        $tr\n            .attr( \"aria-level\", node.getLevel() )\n            .attr( \"aria-setsize\", node.parent.children.length )\n            .attr( \"aria-posinset\", node.getIndex() + 1 );\n\n```\nEdit: aria-owns is not implemented in ariagrid.js\nCreated this quick extension\n```\n$.ui.fancytree.registerExtension({\n    name: \"ariatree\",\n    version: \"@VERSION\",\n    // Default options for this extension.\n    options: {},\n    nodeRenderStatus: function( ctx ) {\n        // Set classes for current status\n        var res,\n            node = ctx.node,\n            hasChildren = node.hasChildren();\n    var $ariaElem = $(node.li);\n\n    res = this._super( ctx );\n\n    if ( node.parent ) {\n        $ariaElem\n            .attr( \"aria-level\", node.getLevel() )\n            .attr( \"aria-setsize\", node.parent.children.length )\n            .attr( \"aria-posinset\", node.getIndex() + 1 );\n    }\n\n    if( hasChildren === false ){\n     // do nothing\n    } else {\n    // debugger;\n        $ariaElem\n            .attr( \"aria-owns\", node.title )\n    }\n    return res;\n}\n\n});\n})( jQuery, window, document );\n```\nPlease comment on this approach or this should be part of jquery.fancytree.js\n. @mar10 There is no line.gif. I have tried editing vline.gif in the steps mentioned above. Could you please share the location of line.gif. When I export the gif file from Photoshop, it doesn't render the lines as it should.. ",
    "christophlutz": "Hi,\nThanks for your reply. I did look at that but I can't see how I can do this dynamically, i.e. changing an icon after the initial population of the tree. The button at the bottom also indicates a \"To do\", hence I am not sure if this is actually possible?\n. ",
    "satyanvesh": "Also, I cannot find any API to disable/enable a node (grey-out and not select-able).\n. ",
    "Vickyline": "Well it seems that is issue fixed well. Upper menu of example browser have only three links now. The URL to the Documentation is fine now.\nTHX\n. ",
    "StephanHoyer": "Would you consider using browserify as build process or providing only a compatible build. First one would definitely be more work to do but would allow to pull in plugins as needed.\n. Ok, i will first try to build a browserify compatible build.\n. We just switched to jstree, so i didn't had any progress on this.\n. I think the non-dependency on jq-ui. Also your solution has much more features that we might not need.\nMaybe we later switch back to your solution if jsTree does not fit our needs anymore.\n. ",
    "stoney024": "I don't want to drop 'local' on 'bin'. Just to order the folders on the same level.\n. ",
    "gfairchild": "Thanks for the explanation!\n. ",
    "Nevario": "Yes it fixes the issue. Thank-you for your advice!\n. Thank-you for your consideration!\nI'm not too familiar with javascript... I tried to temporarily override the tree.options.selectMode to 1 before I call the generateFormElements function. Unfortunately it does not appear to work.\n```\n$(\"#tree\").fancytree({\n        extensions: [\"glyph\"],\n        checkbox: true,\n        selectMode: 3,\n        source: [ ... ]\n});\n$(\"form\").submit(function() {\n        // Render hidden  elements for active and selected nodes\n        $('#tree').fancytree({selectMode:1});\n        $(\"#tree\").fancytree(\"getTree\").generateFormElements();\n    });\n```\nDo you have any additional tips or hints?\nI greatly appreciate your assistance.\n. Hi,\nThank-you very much! That works really well!\nI will leave it up to you if you wish to close the this issue. I'm know there are many other more important issues you are working on!\nTim\n. Thanks for getting back to me.\nI load the trees into an ajax sidebar. I am overwriting the sidebar (including the initialization javascript) with new ajax content. There is only 1 tree visible at a time. I don't want to have 16 instances of FancyTree running, I thought they were being unloaded.\nI will try a few other approaches and see if I can rework my approach so that I am not re-initializing new trees each time a new sidebar is opened. I will report back.\n. Hello,\nI have refactored my code to try and stop initializing new FancyTree instances.\nI now use a callback to load FancyTree...\n$('.inner .wrapper', this.$panel).html('').load(href, function() {\n                        base.$panel.removeClass('loading');\n                        base.$panel.data('slidepanel-loaded', href);\n                        // Load FancyTree\n                        loadTree();\n                    });\nAnd function loadTree()\n```\nfunction loadTree(){\nj(\"#tree\").fancytree({\n    extensions: [\"glyph\"],\n    checkbox: true,\n    selectMode: 3,\n    source:treeData,\n});\n\n```\nWhen I place tree = j('#tree').fancytree(); tree.reload(); before the fancyTree initialization I get:\n\nUncaught Error: cannot call methods on fancytree prior to initialization;\n\nWhen I place it after the initialization I get:\n\nUncaught TypeError: undefined is not a function \n\nI'm sorry if this is obvious, I have spent many hours researching this and I'm not making any progress.\nTim\n. Hi Martin,\nAs I mentioned I don't get to the reload stage. When I try and perform the reload instead of the reinitialization I get\n\nUncaught Error: cannot call methods on fancytree prior to initialization; attempted to call method 'getTree' \n\nSo it seems the FancyTree is no longer initialized? Are there any examples where you load the FancyTree itself in as AJAX content and then overwrite it with another?\nTim\n. Hi Martin,\nI have created a JSFiddle illustrating the problem I am seeing: http://jsfiddle.net/tdmohr/z3Lhb54u/5/\nLine 106 is where I switch to reload rather than re-initialize.\nWould really appreciate your assistance.\nTim\n. Thank-you very much for doing this!\nTim\n. Thanks for your reply.\nI'm still not having any success with this.\nI have created a JSFiddle which reproduces the behaviour I am seeing: http://jsfiddle.net/tdmohr/dY88M/1/\nPlease monitor the console and see the destination nodes title and level. If you drag to a any level other than root it reports correctly. If you drag to the root it reports the first folder that is level 1.\nTim\n. Hmmm,\nI still don't completely understand what relevance data.hitmode has to my scenario, but I guess it is not a bug.\nPerhaps I am approaching the problem the wrong way...?\nI am trying to set the data.parent_id of the node that was just dropped.\nThis was my idea:\n```\ndnd: {\n                autoExpandMS: 300,\n                focusOnClick: true,\n                preventVoidMoves: true, // Prevent dropping nodes 'before self', etc.\n                preventRecursiveMoves: true, // Prevent dropping nodes on own descendants\n                dragStart: function(node, data) {\n                    / This function MUST be defined to enable dragging for the tree.\n                     *  Return false to cancel dragging of node.\n                     */\n                    return true;\n                },\n                dragEnter: function(node, data) {\n                    if(node.folder == false) {\n                        return false;\n                    }\n                    //node.data.parent_id = node.parent.data.id;\n                    return true;\n                },\n                dragDrop: function(node, data) {\n                    / This function MUST be defined to enable dropping of items on\n                     *  the tree.\n                     */\n                    data.otherNode.moveTo(node, data.hitMode);\n                //console.log(node.title);\n                //console.log(node.getLevel());\n\n                // Set data.parent_id of node just dropped\n                data.otherNode.data.parent_id = node.data.id;\n            }\n        },\n        activate: function(event, data) {\n\n//        alert(\"activate \" + data.node);\n            }\n```\nAs mentioned, this approach works perfectly when the node is dropped into a sub folder. But it does not work if the node is dropped into the root.\nHow can I set the parent_id of the node dropped within the dragDrop function?\nTim\n. @joergwork Thank-you! This makes much more sense now :+1: \n. Sorry, my sincere apologies. I was using an outdated version of the ext edit extension.\nThank-you!\n. ",
    "davaus": "Dear Martin,\nI am at a loss to understand why you think this is closed.\nI went to the first link below, the test page, expecting that something had changed , but it is exactly the same.\nTry to drag  a node off of the standard tree onto the droppable area and the tree just scrolls and does NOT allow the node to move off the tree.\nThis was the point of the bug report.\nIs there some setting that I am missing to allow this?\nregards\nDavid Austin\nFrom: Martin Wendt [mailto:notifications@github.com] \nSent: Saturday, 16 August 2014 12:36 AM\nTo: mar10/fancytree\nCc: davaus\nSubject: Re: [fancytree] Cannot drag node outside of tree (#289)\nHere is an example:\nhttp://wwwendt.de/tech/fancytree/test/test-ext-dnd.html\nSee also here:\nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-allow-scrolling-inside-the-tree-container-while-dragging\n\u2014\nReply to this email directly or view it on GitHub https://github.com/mar10/fancytree/issues/289#issuecomment-52312475 .  https://github.com/notifications/beacon/1953553__eyJzY29wZSI6Ik5ld3NpZXM6QmVhY29uIiwiZXhwaXJlcyI6MTcyMzczMjU0NCwiZGF0YSI6eyJpZCI6Mzg4MjA2ODJ9fQ==--e77b92a0cc7139a452266169f0d9f2043ae445c2.gif \n\nNo virus found in this message.\nChecked by AVG - www.avg.com\nVersion: 2014.0.4744 / Virus Database: 3986/8001 - Release Date: 08/07/14\nInternal Virus Database is out of date.\n. Thanks for the quick reply Martin, I'll try it out at work tomorrow!\nRegards\nDavid\nFrom: Martin Wendt [mailto:notifications@github.com] \nSent: Saturday, 16 August 2014 10:04 PM\nTo: mar10/fancytree\nCc: davaus\nSubject: Re: [fancytree] Cannot drag node outside of tree (#289)\nI updated the docs: \nhttps://github.com/mar10/fancytree/wiki/ExtDnd#howto-control-scrolling-inside-the-tree-container-while-dragging\nI hope it is clearer now.\n\u2014\nReply to this email directly or view it on GitHub https://github.com/mar10/fancytree/issues/289#issuecomment-52391236 .  https://github.com/notifications/beacon/1953553__eyJzY29wZSI6Ik5ld3NpZXM6QmVhY29uIiwiZXhwaXJlcyI6MTcyMzgwOTg1MCwiZGF0YSI6eyJpZCI6Mzg4MjA2ODJ9fQ==--329264612cd8c96b859c096443016e80d47450d5.gif \n\nNo virus found in this message.\nChecked by AVG - www.avg.com\nVersion: 2014.0.4745 / Virus Database: 4007/8049 - Release Date: 08/16/14\n. ",
    "Chiether": "yes I need click event. but \"blank\"\nI make sample: http://jsfiddle.net/77drrqsm/4/ please click padding-bottom area.\nIts not node. data.node is null.\nIf data.targetType[\"blank\"] is support. But data.node is null. Maybe surprise the script error because In generals not coding \"if(data.node){}\". I feel anxiety and think better new-event.\n. $.ui.fancytree.getEventTarget is compassable!\nI hope support in fancytree for unselection If you have so inclined.\nThanks mar10.\n. add comment: I think data.node.editEnd(false, event) in save-callback and return false. But it is firing beforeClose again.\n. ",
    "slepeweb": "I have a similar question:\nWhen my page loads, I get a tree with 2 sibling, top level nodes. If one of these were selected, the child nodes would be lazily loaded, as expected. Lovely!\nNow, in addition to this use-case, I would like to be able to deep-dive into the tree. In other words, on page-load, I would like all nodes along a particular path to be expanded/lazily-loaded. I have experimented with methods loadKeyPath() and activateKey(), and I'm not having much luck. Do you have an example I could look at? Thanks.\n. It seems to me that 'FancyTree#loadKeyPath(keyPathList, callback)' may have been intended to do the sort of thing you describe above. 'keyPathList' (your key-chain?) would be a delimited string of node keys, provided by the server, indicating the branch in the tree that needs to be opened by the lazy loader. Trouble is, I can't get it to work!\n. Yes, that was my problem - I couldn't get loadKeyPath() to work.\nAfter some more investigation, I found that I was trying to manipulate the tree before it had been built. If instead I (for example) used the console to run loadKeyPath()/activateKey() after the page had loaded, it all worked correctly.\nSo, I think this one goes down as user error - thanks for your help!\n. ",
    "dzyubam": "Hi Martin,\nDisregard this message if you look at this ticket I've created: #295.\nThanks for the wonderful plugin!\nI have an issue with loadKeyPath() in that when I try to open some nodes that are already partially loaded (some of its parents are loaded), I get the warning in console:\n loadKeyPath: key not found: 3635 (parent: )\n\nI've attached the warning since it didn't display properly.\n3635 is the key of the first level nodes and I'm sure it's there. The confusing part here is that I see this node as a parent in the warning above.\nI'm using lazy loading for the whole tree and also call loadKeyPath() in my FancyTree init section in order to \"preload/preselect\" some of the nodes. If the tree is initiated without any \"preloaded/preselected\" nodes, the loadKeyPath() works fine. So it seems that it only fails when the path is partially loaded by another loadKeyPath() call before.\nPlease let me know if you can help me. I've been trying to work around this, but did not succeed. I really appreciate your answer.\n. Hi Martin,\nIs there a workaround for this? Anyone had this issue before? I know that hhe columnview plugin is in early development state, but maybe someone else got it resolved?\nThanks in advance!\n. Yes, looks like the standard tree also suffers from this. I've made a small change to the above JSFiddle:\nhttp://jsfiddle.net/4GjRv/452/\nThe same happens with the standard tree - the partially expanded tree does not expand further.\n. Martin, this commit solved it, thanks a lot! I'm closing the issue now.\n. Hi Martin,\nThanks for the suggestion. I'm not sure how to achieve what I want:\n1. Upon tree's completed load, I want to select some lazy nodes (the best place for this call that I identified was in the init section - is there any other place where I can call this instead?)\n2. I need to allow reloading of the tree because I have to change the source property to point to a different URL\n3. After reloading is finished I need to select some more nodes (apart from the ones selected in init event)\nI noticed that if I don't call loadKeyPath() in the init event, loadKeyPath() inside reload.done() works fine. However, the first initialization of FancyTree had loadKeyPath() called in the init event. So this is why I get the error. Is there a way to reset the init event for already initialized FancyTree?\nCan I achieve the above 3 points? Do I miss something obvious? Thanks a lot for you help!\n. Thanks for the suggestion once again, I solved it with putting the loadKeyPath() call into the create event instead of the init. If this is something that cannot be handled in FancyTree internally, then this issue can be closed.\n. I was having the same problem, @torma, and was about to report it with a test case. Now I discovered that you've already reported it and also suggested a fix!\nThanks a ton!\n. ",
    "flack": "@mar10 I just tried your fix on the latest release, but AFAICT it does not cover all cases: I use minExpandLevel: 2, and no other option on a <ul></li> tree, and I still get the same problem as reported in this ticket.\nI really don't know anything about the fancytree codebase, but looking at your patch, it seems to me that these three lines here\nhttps://github.com/mar10/fancytree/blob/70efd202eeef34f1679806a96e82ed1ffc15f815/src/jquery.fancytree.js#L2853\nare wrongly placed. The if(level > 1){ check in the line above means that only nodes from the second level downwards will get extended. If I read the code correctly, that is :-)\n. @mar10 Well, the demo does part of what I want._blank as target will open in a new window or tab, depending on browser configuration. When you ctrl-click on an a element, it will always open in a tab (and shift-click will open in a new window). a also populates the browser's context menu with stuff like \"open in new private window\", \"save link target as\" and so on. So using a tags gives the user greater control.\n. Sounds good! Any idea when 2.19 will be available approximately?\n. ",
    "starfishmod": "That would work for me :)\n. ",
    "opto": "fix:\n to have save function  return false and not be stuck in edit loop.\nThis has an extra bonus, see text below fix:\nreplace\n    if( doSave && instOpts.save.call(node, {type: \"save\"}, eventData) === false){\n        return false;\n    }\nby\n    if( doSave && instOpts.save.call(node, {type: \"save\"}, eventData) === false){\n        doSave= false;\n    }\nextra bonus:\nnow, I can modify data[\"node\"].title, for example add html.\nI can return false, setTitle is NOT called, but rendertitle, so my html comes up.\nMy usage: column view.\nI didn't easily understand the table/grid/edit extension, so I used the approach from dynatree to put columns into spans.\nUsing the CSS fix id 492 from dynatree, that works fine.\nNow, I wanted the title/first column to be editable. I didn't see an equivalent for customrender, so I modified the edit extension as mentioned above. Now, in save I can insert the edited span into the title, return false and still see my columns after edit.\nIf you are interested, I can post the code.\nand thanks for the nice addon,\nKlaus\n. yes and no.\nIf I have my ajax call in save, then the callback function of the ajax has the same scope as save.\nSo it has access to data[\"node\"].\nif save stores the old title in a variable, the ajax callback can on failure set data[\"node\"].title to oldtitle and then can call data[\"node\"].renderTitle. So it can asynchronously reset the title.\nWhat happens visually:\nedit\ndisplay edited node\na few seconds later: alert that save didn't work\nreset to old title\ncode example:\n(part of save function)\nvar oldTitle=data[\"node\"].title;\n... render new title ...\nin my case: set edited title to include the extra columns\nsave in data[\"node\"].title\nreturn false so that title is rendered, but setTitle not called\ncall ajax\n <?php\n        $html=\"$.post('$w2p_base_url/index.php?m=planner&a=do_tasktree_aed&suppressHeaders=true', { task_name_old: prevTitle_woHtml, task_name: newTitle_woHtml }, function(adata) {\n//        alert('Data Loaded: ' +adata);\nvar erg = parseInt(adata);\nif (erg!=1) {\n    data['node'].title=oldTitle;\n     data['node'].renderTitle();\n        alert('could not save to w2p. Will revert to original event data');\n         };\n   });\";\n   echo $html;\n?>\n(to be used for web2project project planning software)\n. > I am currently refactoring\ndidn't I send a pull request for my solution? I think only 1 line needed to be changed.\nI think it has the advantage that I can get html into the title.\nThe current solution always removes the html from the new title.\nAfter edit, I might want to add icons for milestones or similiar.\nI think if you replace:\nif( doSave ) {\nnode.setTitle( escapeHtml(newVal );\nby\nif( doSave ) {\nnode.setTitle( escapeHtml(eventData.value) );\nit does what is needed\nand to get out of the edit loop if save returns false also needs only one line change, which I don't remember now but can look up in our code.\n. sorry, the display took out the html.\nthis is what I mean:\nIn my original ul and  li, I set an id which I need for edit.\nThis  ul    is then set display:none, and a second ul      is created whch holds the displayed tree.\n        This, in my opinion, should hold the original id, but it does not.\n        Or is there any other method to access my id when I am in edit (e.g. in save function)?\nany help is appreciated.\n. found it. as node.key.\n. ",
    "MrSpoocy": "I reopen this issue, because i think the problem is still alive.\n@mar10 \nI have try to make follow \"workflow\"\n\nUser create a new node (with editCreateNode)\nHe input the name and press Enter\nThe save-callback start a async request to the server but the callback return false to keep the input field open\nThe server response that everything is ok,  the \"editEnd()\" must call, but than the save event is call again\n\n\nThe server response something wrong (maybe name already in use), we do \"nothing\" but if the user press Enter again now, the edit will be end because \"title is unchanged\"  and the node is not \"isDirty & isNew\" anymore. \n",
    "alecava": "Yes, I think your alternative is a better idea and it will solve my problem\n. ",
    "blakekp": "ah apologies friend just found this conclusion last night and was planning to share on monday, it appeared to be an issue with the specific testing devices hardware so nothing to worry about unless your devices memory is too full!\nthank you for your care though\n-Blake\nOn Sep 6, 2014, at 8:02 AM, Martin Wendt notifications@github.com wrote:\n\nDid you enable debugging on the device? Any additional info you could give?\n\u2014\nReply to this email directly or view it on GitHub.\n. \n",
    "andrewsmd8": "I guess maybe I wasn't clear. I need all of the child nodes loaded like you had expanded them. The issue is, I have some child nodes buried 4 tiers in, and when they are checked, I'm trying to add a marker to a google map. While these are checked if you expand all the way out, I need it to be like you had expanded and checked them, to fire the event to load the markers. Any ideas? I've asked on stack overflow and a few other forums with no luck.\n. Also, adding that function doesn't work for me anyways. I've updated the project with what you showed. I should get the output div to show\ncat_32 cat_33 cat_33\nIt only does that if you check parent without it being expanded. If you expand parent just once, then it only shows cat_32 and cat_33\nhttps://dl.dropboxusercontent.com/u/4979877/fancytree.zip\n. Sorry about that. I had it correct in my real world application. I really\nappreciate the help because as far as I can see, there's no way to force\nthe load of all children recursively, if you check a parent node and they\nare all lazy load.\nPlease let me know if there's anything else I can do to help illustrate the\nissue.\nAnd thanks again.\nMichael Andrews\nOn Fri, Sep 12, 2014 at 2:14 AM, Martin Wendt notifications@github.com\nwrote:\n\nI try to look into it the next days...\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/mar10/fancytree/issues/312#issuecomment-55369143.\n. \n",
    "SergeyZhilyakov": "It seems that the ui.fancytree.css file shall be replaced with the respective skin. Then it works.\n\nHowever, is it possible to combine both standard and glyphicons? E.g. I would like to keep standard icons for checkboxes, but use the glyph icons for the remaining items.\nIn addition, if I use the 'table' extension together with 'glyph', the layout looks weird.\n\n. ",
    "ronnieserr": "I was able to find a temp solution: tree.getNodeByKey(key.toString())\nIs there a better solution?\n. Thanks, yes it is not straight forwards, and requires thinking through multiple scenarios. In the long run it would be wonderful to have this feature.\n. ",
    "migerusantte": "mar10, can you throw me an example of adding, let's say an image inside the node, right positioned using after:?\nI'm trying to do this (imagine the following is a node element):\n[(expander) (span.title)(my image as button for extra options or popup)]\nThanks in advance!\n. Nevermind, I already achieved it...\nI just added my stuff in the node.span at renderNode();\nThanks anyway, this plugin saved me a lot of development\n. Nevermind, I already achieved it...\nI just added my stuff in the node.span at renderNode();\nThanks anyway, this plugin saved me a lot of development\n. ",
    "AnandPS123": "What is the essential jQuery or something to be included. But I don't know which is the exact file to resolve this error\nOn Wed, Jan 4, 2017 at 6:15 PM, Martin Wendt notifications@github.com\nwrote:\n\nHave a look at the examples in the demo browser...\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/325#issuecomment-270362602,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXlc3FsmU4a6jeCc5nD8ISKI1xnuK1-2ks5rO5RjgaJpZM4CmIdz\n.\n. I should include jquery.fancytree-all.min.js but it always put\n$(...).fancytree is not a function\nWhat can I do now?\n\nOn Thu, Jan 5, 2017 at 12:55 AM, Martin Wendt notifications@github.com\nwrote:\n\nIf you get $(...).fancytree is not a function, then probably\njquery.fancytree-all.min.js is not included, or it is dynamically\nincluded, but you call $(...).fancytree() before it was loaded.\n\u2014\nYou are receiving this because you commented.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/325#issuecomment-270462337,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/AXlc3AZNMSrPq77gbd7Jk2cOQE5g2hGcks5rO_IygaJpZM4CmIdz\n.\n. I get clear my error when I replace my jquery.fancytree-all.min.js by https://cdnjs.cloudflare.com/ajax/libs/jquery.fancytree/2.20.0/jquery.fancytree-all.min.js\nThank You . \n",
    "isplash": "Hi Martin!\nThank you for reply.\nBut its really not very comfortable. It will be great if it possible to use only one function with additional parametr where insert to - before first or after last child. Hope, you will add it to new version.\nThank you for your great dynatree and fancytree projects!\n26.09.2014, 10:45, \"Martin Wendt\" notifications@github.com:\n\nThis is not a bug or feature request, so please use Stackoverflow or the forum.\nHint:\n\nSo, I have to search first child and add node before it\n\u00a0exactly: use the \"before\"mode instead of \"child\" and have a look at node.getFirstChild()\n\n\u2014\n\u00a0Reply to this email directly or view it on GitHub.\n\n\n\u0421 \u0443\u0432\u0430\u0436\u0435\u043d\u0438\u0435\u043c, \u0418\u0432\u0430\u043d\n. Hi, Martin. jQuery UI version is 1.11.4 too. With 1.12.0 that bug has gone. Thank's for tip!\n. ",
    "C-Nedelcu": "Well actually the CSS trick in the stackoverflow link source DID help, I just had to mark it \"!important\"\nul.fancytree-container {\n    overflow: visible !important;\n}\nThis did the trick.\nI hope this doesn't break other things though :)\n. ",
    "KingGeneral": "After all thanks guys, you are my savior \ud83d\udc4d \nin here i am using root / base as Level 0\nfor those who need this solution :\n```\ndragDrop: function(node, data) {\n...\nconsole.log('-------------------------');\nconsole.log('The Data - You choose');\n    console.log('data id = ' +data.otherNode.key);\n    console.log('data index/order = ' +(data.otherNode.getIndex()+1));\n    console.log('data level = ' +(data.otherNode.getLevel()-1));\nconsole.log('-------------------------');\n    console.log('Parent of this data is');\n    console.log('Parent = ' +data.node.parent.key);\n    console.log('Parent index/order = ' +(data.node.parent.getIndex()+1));\n    console.log('Parent level = ' +(data.node.parent.getLevel()-1));\nconsole.log('-------------------------');\nconsole.log('When Dragging - active node (not the dragged one)');\n    console.log('Data is Put : ' + data.hitMode);\n    console.log('NODE = ' + node.title);\n    console.log('NODE LEVEL = ' + (node.getLevel()-1));\n    console.log('NODE id = ' + node.key);\n// explain : (for data.hitMode)\n    // over = added as child of key\n    // before = added before key (between) (same level)\n    // after = added after key (same level)\n}\n```. @pmeijer you can see delete with children\n@mar10 , i dont know if this usage is wrong (For treeChangedEvent )\nhere is my logic on how to use the command.\nfor now i do like this : (ps : i am follow the logic in complex_demo )\n```\nvar operation; // this used for treeChangedEvent:\n$(\"#tree\").fancytree({\n...\n}).on(\"nodeCommand\", function(event, data){\n    var refNode, moveMode,\n    tree = $(this).fancytree(\"getTree\"),\n    node = tree.getActiveNode();\n    switch( data.cmd ) {\n    ...\n\n    case \"remove\":\n         operation = 'remove';\n         refNode = node.getNextSibling() || node.getPrevSibling() || node.getParent();\n     node.remove();\n     if( refNode ) {\n            refNode.setActive();\n     }\n         alert(\"node removed\");\n         break;\n    default:\n        operation = 'fail_upon_error';\n    alert(\"Unhandled command: \" + data.cmd);\n    return;\n    }\n\n}\n```\n. ",
    "iehsan77": "How to fixed Root allow only one child?\n+root1 \n   childs\n    childs\nnot allow second  +root2\n. ",
    "joeyhub": "I thought this was user error but I see in the code it always does it:\nif( level < opts.minExpandLevel ) {\n        if(level > 1){\n            if( !node.lazy ) {\n                node.expanded = true;\n            }\n            if(aria){\n                ares.push(\"<span role='button' class='fancytree-expander fancytree-expander-fixed'></span>\");\n            }else{\n                ares.push(\"<span class='fancytree-expander fancytree-expander-fixed''></span>\");\n            }\n        }\n        // .. else (i.e. for root level) skip expander/connector alltogether\n    } else {\n        if(aria){\n            ares.push(\"<span role='button' class='fancytree-expander'></span>\");\n        }else{\n            ares.push(\"<span class='fancytree-expander'></span>\");\n        }\n    }\nI think this is some odd logic.\nI believe the only thing I can do is see if I can give the node a class and display:none the expander.\n. ",
    "MudCee": "Okay, i solved it. The tree div block must have at least one ul block like\n<div id=\"tree\"><ul></ul></div>\nGreetings MudCee\n. ",
    "davazp": "You are right,  it is not needed.\nThe tutorial says:\n\nsource may be a deferred promise as returned by $.ajax() or $.getJSON().\n\nMy problem was that I thought it did not accept general jquery promises,  but only the result of $.ajax or $.getJSON. Perhaps it could be clarified in the documentation.\nTherefore I can create a jquery promise, use Angular to get the data and then resolve the promise with the result.\nThank you.\n. ",
    "LeResKP": "I updated the code and didn't get any reply. Is it okay?\n. ",
    "HedCET": "solved with jquery UI\n. Adding jquery-ui before fancytree in head tag\n. ",
    "sergius85": "How did you solve it?\n. Thx :)\n. ",
    "Gamesh": "yes it does, but as i said, many stylesheets set style specifically for type=\"text\", and since it is text input it shoud have a type set. Of course i can add a css rule with .fancytree input {} and copy those styles, but it would mean additional styles. I use bootstrap as main css and input looks different than other text inputs just because it does not have that attribute\n. thank you\n. ",
    "iamjono": "Aha, the issue is that it needs not just jQuery, but jQuery UI.\nNot sure if it was in the docs, but if it was, I missed it!\nNow it's in there there's no error and it's working as expected.\nThanks!\n. ",
    "ZAYEC77": "Sorry, it was old version\n. ",
    "relet": "Yes, it was a mistake, sorry - tree.tbody being undefined was a result of the  tag not being found. My only grief is that the error is a bit cryptic, but the ticket text is irrelevant. \n. ",
    "tomfumb": "I was able to correct issue 1 by uncommenting line 6360 in jquery.fancytree.all.js and commenting line 6361 but this did not affect issue 2.\n. Wow that was fast. Keen to try out the fix - thanks!\n. ",
    "exteon": "Indeed, the request cannot be canceled but can be quietly discarded. The issue is that any external handling will not have control over fancytree interface (ie, nice rotating progress circle); an internal implementation (as basic as it may be) would be much more user-friendly. Also, with an external handling (which we have done) there is this issue: the tree processing (using reload) is by your implementation async (and it should be), therefore a second reload() must be delayed after the current tree processing is complete (after the complete event), otherwise it will cause errors. This has nothing to do with XHR response order, it happens with static reload()'s as well, so it's pretty difficult to avoid without making a wrapper for fancytree, which is obviously fancytree specific (debounce won't handle this, that just serializes XHR requests). It would be nice if at least this second point would be resolved in some manner.\n. ",
    "Turkyden": "@mafar I meet the problem like it, how did you resolve ?. @mafar Thanks. ",
    "oneff": "Klar...\nlooks not a recrusive bug in the reproduction, more like keyboard isnt skipping the hidden by filter.\nSo the calls just happend in the background.\n\n```\n<!DOCTYPE html>\n\n\n\nFancytree - Example: Filter\n<script src=\"jquery-2.1.1.min.js\" type=\"text/javascript\"></script>\n<script src=\"jquery-ui.min.js\" type=\"text/javascript\"></script>\n\n<link href=\"../src/skin-win7/ui.fancytree.css\" rel=\"stylesheet\" type=\"text/css\">\n<script src=\"../src/jquery.fancytree.js\" type=\"text/javascript\"></script>\n<script src=\"../src/jquery.fancytree.filter.js\" type=\"text/javascript\"></script>\n\n<!-- Start_Exclude: This block is not part of the sample code -->\n<link href=\"../lib/prettify.css\" rel=\"stylesheet\">\n<script src=\"../lib/prettify.js\" type=\"text/javascript\"></script>\n<link href=\"sample.css\" rel=\"stylesheet\" type=\"text/css\">\n<script src=\"sample.js\" type=\"text/javascript\"></script>\n<!-- End_Exclude -->\n\n\n\n Add code to initialize the tree when the document is loaded: \n\n    $(function(){\n        options = {}    \n        options.enabledMultiselect = true;\n        options.dataValueField = \"VALUE\";\n        options.dataTextField = \"TEXT\";\n        options.dataChildren = \"CHILDREN\";\n\n        var createFancyTreeStructureRecrusive = function (parent) {\n            if (this.options.dataChildren) {\n                if (parent[this.options.dataChildren]) {\n                    var sortField = this.options.dataSortField;\n                    if (sortField) {\n                        parent[this.options.dataChildren].sort(function (a, b) { return a[sortField] - b[sortField] });\n                    }\n                    var childs = [];\n                    for (var k = 0; k < parent[this.options.dataChildren].length; k++) {\n                        var c = parent[options.dataChildren][k];\n                        var hbox = !this.options.enabledMultiselect;\n                        var noselect = false;\n                        if (this.options.itemSelectable) {\n                            noselect = !this.options.itemSelectable(c);\n                        }\n                        if (noselect) {\n                            hbox = true;\n                        }\n                        childs.push({\n                            \"title\": c[options.dataValueField] + \" - \" + c[options.dataTextField],\n                            \"key\": c[options.dataTextField],\n                            \"data\": c,\n                            \"children\": createFancyTreeStructureRecrusive(c),\n                            \"unselectable\": noselect,\n                            \"hideCheckbox\": hbox,\n                            \"selected\": false\n                        });\n                    }\n                    return childs;\n                } else {\n                    return null;\n                }\n            } else {\n                return null;\n            }\n        };\n        var createFancyTreeStructure = function (ds) {\n            var hbox = !this.options.enabledMultiselect;\n            var sortField = this.options.dataSortField;\n            if (sortField) {\n                ds.sort(function (a, b) { return a[sortField] - b[sortField] });\n            }\n            var rs = [];\n            for (var i = 0; i < ds.length; i++) {\n                var it = ds[i];\n                var noselect = false;\n                if (this.options.itemSelectable) {\n                    noselect = !this.options.itemSelectable(it);\n                }\n                if (noselect) {\n                    hbox = true;\n                }\n                rs.push({\n                    \"title\": it[options.dataValueField] + \" - \" + it[options.dataTextField],\n                    \"key\": it[options.dataTextField],\n                    \"data\": it,\n                    \"children\": createFancyTreeStructureRecrusive(it),\n                    \"unselectable\": noselect,\n                    \"hideCheckbox\": hbox,\n                    \"selected\": false\n                });\n            }\n            return rs;\n        };\n\n\n      // EXPERIMENTAL DATA\n            var bomUsageExperimental = [{\n                METADATA: \"#AAA\",\n                SORT_KEY: \"3\",\n                TEXT: \"Quality 3\",\n                VALUE: \"01\",\n                SELECTABLE: true,\n                CHILDREN: null\n            }, {\n                METADATA: \"#AAA\",\n                SORT_KEY: \"1\",\n                TEXT: \"Quality 1\",\n                VALUE: \"03\",\n                SELECTABLE: true,\n                CHILDREN: null\n            }, {\n                METADATA: \"#AAA\",\n                SORT_KEY: \"2\",\n                TEXT: \"Quality 2\",\n                VALUE: \"04\",\n                SELECTABLE: true,\n                CHILDREN: null\n            },\n            {\n                METADATA: \"#CCC\",\n                SORT_KEY: \"4\",\n                TEXT: \"Lining 4\",\n                VALUE: \"02\",\n                SELECTABLE: false,\n                CHILDREN: [{\n                    METADATA: \"#BBB\",\n                    SORT_KEY: \"B\",\n                    TEXT: \"Jo Jo Child B\",\n                    VALUE: \"02001\",\n                    SELECTABLE: true,\n                    CHILDREN: [{\n                        METADATA: \"#CCC\",\n                        SORT_KEY: \"2\",\n                        TEXT: \"Na Na Child 2\",\n                        VALUE: \"02003\",\n                        //SELECTABLE: null, //ERROR TO HANDLE\n                        CHILDREN: null\n                    }, {\n                        METADATA: \"#CCC\",\n                        SORT_KEY: \"1\",\n                        TEXT: \"No No Child 1\",\n                        VALUE: \"02004\",\n                        SELECTABLE: true,\n                        CHILDREN: [{\n                            METADATA: \"#CCC\",\n                            SORT_KEY: \"1\",\n                            TEXT: \"No No Child X\",\n                            VALUE: \"02004007\",\n                            SELECTABLE: true,\n                            CHILDREN: null\n                        }]\n                    },\n\n\n                    {\n                        METADATA: \"#CCC\",\n                        SORT_KEY: \"1\",\n                        TEXT: \"Problem 01\",\n                        VALUE: \"0200454777\",\n                        SELECTABLE: true,\n                        CHILDREN: null\n                    },\n\n                    {\n                        METADATA: \"#CCC\",\n                        SORT_KEY: \"1\",\n                        TEXT: \"Problem 03\",\n                        VALUE: \"02004545454\",\n                        SELECTABLE: true,\n                        CHILDREN: null\n                    }\n\n\n                    ]\n                }, {\n                    METADATA: \"#CCC\",\n                    SORT_KEY: \"A\",\n                    TEXT: \"Ja Ja Child A\",\n                    VALUE: \"02002\",\n                    SELECTABLE: true,\n                    CHILDREN: null\n                }\n                ]\n            }];\n\n\n       bomUsageExperimental[0].CHILDREN = [];\n\n            for (var i = 0; i < 600; i++) {\n\n                bomUsageExperimental[0].CHILDREN.push({\n                    METADATA: \"#CCC\",\n                    SORT_KEY: \"D\" + i,\n                    TEXT: \"Leave Node\",\n                    VALUE: \"0000\" + i,\n                    SELECTABLE: true,\n                    CHILDREN: null\n                });\n\n            }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n        // Attach the fancytree widget to an existing <div id=\"tree\"> element\n        // and pass the tree options as an argument to the fancytree() function:\n        $(\"#tree\").fancytree({\n            extensions: [\"filter\"],\n            quicksearch: true,\n            source: createFancyTreeStructure(bomUsageExperimental),\n            filter: {\n                mode: \"hide\",\n                autoApply: true\n            },\n            activate: function(event, data) {\n//              alert(\"activate \" + data.node);\n            },\n            lazyLoad: function(event, data) {\n                data.result = {url: \"ajax-sub2.json\"}\n            }\n        // }).on(\"keydown\", function(e){\n        //  var c = String.fromCharCode(e.which);\n        //  if( c === \"F\" && e.ctrlKey ) {\n        //      $(\"input[name=search]\").focus();\n        //  }\n        });\n        var tree = $(\"#tree\").fancytree(\"getTree\");\n\n\n        tree.visit(function (node) {\n                        if (node.unselectable) {\n                            $(node.span).find(\".fancytree-title\").css(\"color\", \"#808080\", \"important\");\n                        }\n                        node.setExpanded(true);\n                    });\n        /*\n         * Event handlers for our little demo interface\n         */\n        $(\"input[name=search]\").keyup(function(e){\n            var n,\n                leavesOnly = $(\"#leavesOnly\").is(\":checked\"),\n                match = $(this).val();\n\n            if(e && e.which === $.ui.keyCode.ESCAPE || $.trim(match) === \"\"){\n                $(\"button#btnResetSearch\").click();\n                return;\n            }\n            if($(\"#regex\").is(\":checked\")) {\n                // Pass function to perform match\n                n = tree.filterNodes(function(node) {\n                    return new RegExp(match, \"i\").test(node.title);\n                }, leavesOnly);\n            } else {\n                // Pass a string to perform case insensitive matching\n                n = tree.filterNodes(match, leavesOnly);\n            }\n            $(\"button#btnResetSearch\").attr(\"disabled\", false);\n            $(\"span#matches\").text(\"(\" + n + \" matches)\");\n        }).focus();\n\n        $(\"button#btnResetSearch\").click(function(e){\n            $(\"input[name=search]\").val(\"\");\n            $(\"span#matches\").text(\"\");\n            tree.clearFilter();\n        }).attr(\"disabled\", true);\n\n        $(\"input#hideMode\").change(function(e){\n            tree.options.filter.mode = $(this).is(\":checked\") ? \"hide\" : \"dimm\";\n            tree.clearFilter();\n            $(\"input[name=search]\").keyup();\n        }).prop(\"checked\", true);\n        $(\"input#leavesOnly\").change(function(e){\n            // tree.options.filter.leavesOnly = $(this).is(\":checked\");\n            tree.clearFilter();\n            $(\"input[name=search]\").keyup();\n        });\n        $(\"input#regex\").change(function(e){\n            tree.clearFilter();\n            $(\"input[name=search]\").keyup();\n        });\n\n        addSampleButton({\n            label: \"Filter active branch\",\n            newline: false,\n            code: function(){\n                if( !tree.getActiveNode() ) {\n                    alert(\"Please activate a folder.\");\n                    return;\n                }\n                tree.filterBranches(function(node){\n                    return node.isActive();\n                });\n            }\n        });\n        addSampleButton({\n            label: \"Reset filter\",\n            newline: false,\n            code: function(){\n                tree.clearFilter();\n            }\n        });\n    });\n\n\n\nExample: 'filter' extension\n\n\n            Dynamic filter support.\n        \n\nStatus: beta\n        \n\n\nSkin: \n\n\nEnter '02'\n\n\u00d7\n\n\n\n\n\n            Hide unmatched nodes\n        \n\n\n            Leaves only\n        \n    <label for=\"regex\">\n        <input type=\"checkbox\" id=\"regex\">\n        Regular expression\n    </label>\n</p>\n<p id=\"sampleButtons\">\n</p>\n<!-- Add a <table> element where the tree should appear: -->\n<div id=\"tree\">\n</div>\n\n<!-- Start_Exclude: This block is not part of the sample code -->\n<hr>\n<p class=\"sample-links  no_code\">\n    <a class=\"hideInsideFS\" href=\"https://github.com/mar10/fancytree\">jquery.fancytree.js project home</a>\n    <a class=\"hideOutsideFS\" href=\"#\">Link to this page</a>\n    <a class=\"hideInsideFS\" href=\"index.html\">Example Browser</a>\n    <a href=\"#\" id=\"codeExample\">View source code</a>\n</p>\n<pre id=\"sourceCode\" class=\"prettyprint\" style=\"display:none\"></pre>\n<!-- End_Exclude -->\n\n\n\n```\n. Thanks a lot! 2.6.0 looks good now.\n. ",
    "LDSign": "Hi\nOk, this works :) Thanks\nFrank\n. Hi\nNot exactly ;)\nI run all my assets (css+less) through a compiler to make one \"big\" minified css-file. Of course, all relative paths of vendor assets do not work anymore by doing that.\nSo the solution is to set the path as an variable in less - which fancytree nicley supports in the less files :)\nUnfortunatley these less files aren't included in the bower version, so I have to manage fancytree manually. And thats the point - could you please include the source files (here less) in the bower distribution? Just for convenience ;)\nThanks,\nFrank\n. ",
    "agcyphers": "I see this warning when dragging a top-level node on to another top-level\nnode, if I remember correctly.\nOn Saturday, December 20, 2014, Martin Wendt notifications@github.com\nwrote:\n\ndebugLevel 0 mutes info and debug messages only. Warnings and errors are\nalways displayed.\nThe warning is raised, becaus some yet unexpected condition was detected.\nIf we understand, why this occurs, we may either fix it or remove the\nwarning.\nCan you describe. how the warning may be reproduced?\n\u2014\nReply to this email directly or view it on GitHub\nhttps://github.com/mar10/fancytree/issues/369#issuecomment-67747926.\n\n\nAnthony G. Cyphers\nOwner / Sole Proprietor\nCyphersTECH Consulting\nagcyphers@cypherstech.com\nhttp://www.cypherstech.com/\nCONFIDENTIALITY NOTICE: the information contained in this e-mail, including\nany attachment(s), is confidential information that may be privileged and\nexempt from disclosure under applicable law. If the reader of this message\nis not the intended recipient, or if you received this message in error,\nthen any direct or indirect disclosure, distribution or copying of this\nmessage is strictly prohibited. If you have received this message in error,\nplease notify CyphersTECH immediately by calling (423) 302-0174 and by\nsending a return e-mail; delete this message; and destroy all copies,\nincluding attachments. Thank you.\n. ",
    "SirCumz": "Yes! i tried that option, no luck, it only happends with the persist and dnd extensions combined\n. fancytree: 2.7.1-0\njquery: latest\nui: the custom version in fancytree package\n``` javascript\n  // using default options\n  $(\"#tree\").fancytree({\n        extensions: [\"edit\", \"dnd\", \"persist\", \"filter\"],\n  //checkbox: true,\n  quicksearch: true, // Navigate to next node by typing the first letters.\n  //selectMode: 1, // 1:single, 2:multi, 3:multi-hier\n  //tabbable: true, // Whole tree behaves as one single control\n  //titlesTabbable: true, // Node titles can receive keyboard focus\n\n  source: {\n    url: \"pagelist.json\"\n  },\n\n  activate: function(event, data) {\n\n    console.log(data.node.data);\n\n  },\n  filter: {\n    mode: \"hide\",\n    autoApply: true\n  },\n  persist: {\n    expandLazy: true,\n    // overrideSource: false, // true: cookie takes precedence over `source` data attributes.\n    store: \"auto\" // 'cookie', 'local': use localStore, 'session': sessionStore\n  },\n\n  dnd: {\n    autoExpandMS: 400,\n    focusOnClick: true,\n    preventVoidMoves: true, // Prevent dropping nodes 'before self', etc.\n    preventRecursiveMoves: true, // Prevent dropping nodes on own descendants\n    dragStart: function(node, data) {\n      /** This function MUST be defined to enable dragging for the tree.\n       *  Return false to cancel dragging of node.\n       */\n      return true;\n    },\n    dragEnter: function(node, data) {\n      /** data.otherNode may be null for non-fancytree droppables.\n       *  Return false to disallow dropping on node. In this case\n       *  dragOver and dragLeave are not called.\n       *  Return 'over', 'before, or 'after' to force a hitMode.\n       *  Return ['before', 'after'] to restrict available hitModes.\n       *  Any other return value will calc the hitMode from the cursor position.\n       */\n      // Prevent dropping a parent below another parent (only sort\n      // nodes under the same parent)\n\n/           if(node.parent !== data.otherNode.parent){\n            return false;\n          }\n          // Don't allow dropping over a node (would create a child)\n          return [\"before\", \"after\"];\n/\n           return true;\n        },\n        dragDrop: function(node, data) {\n          /* This function MUST be defined to enable dropping of items on\n           *  the tree.\n           /\n          data.otherNode.moveTo(node, data.hitMode);\n        }\n      }, \n  });\n\n```\n. ",
    "pierresh": "Perfect, thanks a lot and happy new year!\n. ",
    "sleimanji": "Thanks for this tip! And indeed thanks for a great plugin.\n. Thanks for the quick response! I did set dnd.focusOnClick to false and nothing changes: the problem (the div's jumping up) continues to happen on Chrome and Safari but not on Firefox.\nThis is the page I'm testing on: http://kfecms.sleimanmatar.com/test-fancyTree3.html\n. Martin, perhaps it is worth to try to set dnd.focusOnClick = false (now it is true) on the DnD demo sample page on your website (http://wwwendt.de/tech/fancytree/demo/#sample-ext-dnd.html). I can then test on my end too.\n. Yes, I see. Is there a default 'tabindex=0' embedded anywhere in the fancytree code? My webpage as well as your sample demo page don't contain tabindex=0.\n. Thanks for your comments. I've done further tests and you are right about your guess.\nThe error was in the code that generates the new (empty) folder. Instead of assigning it the attribute children: [], it did children: {} which is incorrect. \n. The last line that uses appendSibling was replaced with:\n    newSibling = node.addNode(newData, data.hitMode);\nAnd now the code works for any hitMode\n. Thanks for the clarification. \nRegarding this:\n\nI don't understand this. The callback should be called for all child nodes. One line before you said that this was the case?\n\nWhat I meant: I tried to copy a node across which happened to be a folder with children and grand children. When I debugged the code the callback function was called for all children but not for the grand-children. Is this how it should be?\n. ",
    "Harrison-Uhl": "I'm using Adobe Air / Javascript + HTML invoked from the command line in a dos window of Windows 8.1.\nThe error message is logged to the dos window on lines following the invocation.\nTo confirm in a development environment of your choice, replace my suggested patch (checking if targetParent is null) with some sort of 'assert' or:\nif ( targetParent === null ) alert('target Parent is null');\nSubsequent to my first report, I was reading through more of the FancyTree documentation, and saw that various API calls that are to return a reference to a requested node, return a null for the root node.  This appears to be just that (but then I'm new with this library, and may not have things fully sorted out in my head.)\nIf you'd like, I can probably capture the logging to a file and upload it, but there really wasn't anything more there than identifying the variable and saying that it was null (and didn't hold a valid object reference) and a stack trace which led me back to the outdent function in the Complex Example.  \nHarrison\n. ",
    "vivganes": "Hi @pvos \nThis could be a case of missing dependency.  \nI could find a similar issue found at https://github.com/krampstudio/grunt-jsdoc/issues/91 which is closed as the author realized that he missed some dependencies.\nDid you get around this issue? I see that this issue is quite old.  If this is not relevant anymore, can you close it?. Hi @hike2008 \nCould you please give me more details about the code that you are trying to run?  Is the code publicly available in any Github repo?  If not, could you please paste your Java script code snippet (after removing sensitive data) here? \nThis will help in understanding your problem better.. ",
    "Joggel53": "OK, I see my problem.\nI've used onActivate for navigation with node.data.href. And if there is an link inside the title this will be called too. I remove the onActivate implementation and put all functions in the title.\nThank you for your support.\n. ",
    "alexweb": "thanks\n. Correct parameter name is \"expanded\" not \"expand\"..\n. ",
    "StudentForever": "Hi\nI have an option which changes the source, so I need to rebind the tree. For rebinding, I wanted to find out if the tree has already been initialized, if so, call the reload method.\nI do not need this anymore as I have changed my implementation but guessing someone else might run into a similar situation. To provide more details, I am using angularJs, so wrapped fancytree as a directive. I exposed a refresh method, so at this point I am assuming the tree has been initialized and just calling the reload on the tree.\nthanks\n. Just to add, I think still need to find out if the tree is initialized or not. Here is my scenario : As I mentioned I wrapped fancytree as a angularJS  directive. I am exposing the selectedNodes that can be   updated by the consumer, so I need to update the selection..here I need to find out if the tree is initialized or not. I can provide more details but did not want to throw in angularJS jargon.\nthanks\nkiran\n. ",
    "manokaran68": "That would be great. Thanks.\n. ",
    "demogorgorn": "Also I can post the json configuration:\n$(\"#tree\").fancytree({\"extensions\":[\"childcounter\",\"dnd\"],\"source\":[{\"key\":\"1\",\"parent\":0,\"folder\":true,\"title\":\"\\u0414\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u044b \\u0421\\u041d\\u0413\",\"children\":[{\"key\":\"13\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0418\\u0442\\u043e\\u0433\\u043e\\u0432\\u044b\\u0435 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u044b, \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044b\\u0435 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f\\u0445 \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u0433\\u043b\\u0430\\u0432 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u0421\\u041d\\u0413\"},{\"key\":\"14\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0418\\u0442\\u043e\\u0433\\u043e\\u0432\\u044b\\u0435 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u044b, \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044b\\u0435 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f\\u0445 \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u0433\\u043b\\u0430\\u0432 \\u043f\\u0440\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u044c\\u0441\\u0442\\u0432 \\u0421\\u041d\\u0413\"},{\"key\":\"15\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0418\\u0442\\u043e\\u0433\\u043e\\u0432\\u044b\\u0435 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u044b, \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044b\\u0435 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f\\u0445 \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043c\\u0438\\u043d\\u0438\\u0441\\u0442\\u0440\\u043e\\u0432 \\u0438\\u043d\\u043e\\u0441\\u0442\\u0440\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u0435\\u043b \\u0421\\u041d\\u0413\",\"children\":[{\"key\":\"42\",\"parent\":\"15\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u043e\\u0432, \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043c\\u0438\\u043d\\u0438\\u0441\\u0442\\u0440\\u043e\\u0432 \\u0438\\u043d\\u043e\\u0441\\u0442\\u0440\\u0430\\u043d\\u043d\\u044b\\u0445 \\u0434\\u0435\\u043b \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u041d\\u0435\\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u044b\\u0445 \\u0413\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432  15 \\u0441\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044f 2004 \\u0433\\u043e\\u0434\\u0430\"},{\"key\":\"43\",\"parent\":\"15\",\"folder\":true,\"title\":\"26 \\u043c\\u0430\\u0440\\u0442\\u0430 2004 \\u0433\\u043e\\u0434\\u0430\"}]},{\"key\":\"16\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0418\\u0442\\u043e\\u0433\\u043e\\u0432\\u044b\\u0435 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u044b, \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u044b\\u0435 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f\\u0445 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0433\\u043e \\u0441\\u043e\\u0432\\u0435\\u0442\\u0430 \\u0421\\u041d\\u0413 \\u0432\\u043e \\u0438\\u0441\\u043f\\u043e\\u043b\\u043d\\u0435\\u043d\\u0438\\u0435 \\u0420\\u0435\\u0448\\u0435\\u043d\\u0438\\u044f \\u043e \\u0434\\u0435\\u043b\\u0435\\u0433\\u0438\\u0440\\u043e\\u0432\\u0430\\u043d\\u0438\\u0438 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u0438\\u0439 \\u043d\\u0430 \\u043f\\u0440\\u0438\\u043d\\u044f\\u0442\\u0438\\u0435 \\u043e\\u043a\\u043e\\u043d\\u0447\\u0430\\u0442\\u0435\\u043b\\u044c\\u043d\\u044b\\u0445 \\u0440\\u0435\\u0448\\u0435\\u043d\\u0438\\u0439\"},{\"key\":\"17\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413\",\"children\":[{\"key\":\"21\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2000 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"22\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2001 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"23\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2002 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"24\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2003 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"25\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2004 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"26\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2005 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"27\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2006 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"28\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2007 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"29\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2008 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"30\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2009 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"31\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2010 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"57\",\"parent\":\"17\",\"folder\":true,\"title\":\"\\u041f\\u0435\\u0440\\u0435\\u0447\\u0435\\u043d\\u044c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u043e\\u0432, \\u0440\\u0430\\u0441\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0430 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0438 \\u041a\\u043e\\u043c\\u0438\\u0441\\u0441\\u0438\\u0438 \\u043f\\u043e \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u043c \\u0432\\u043e\\u043f\\u0440\\u043e\\u0441\\u0430\\u043c \\u043f\\u0440\\u0438 \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u043c \\u0441\\u043e\\u0432\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413 \\u0432 2011 \\u0433\\u043e\\u0434\\u0443\"}]},{\"key\":\"18\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0418\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u044f \\u043e\\u0431 \\u0438\\u0442\\u043e\\u0433\\u0430\\u0445 \\u0437\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u0439 \\u0432\\u044b\\u0441\\u0448\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u041d\\u0435\\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u044b\\u0445 \\u0413\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432\"},{\"key\":\"19\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430\",\"children\":[{\"key\":\"58\",\"parent\":\"19\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0432 2007 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"59\",\"parent\":\"19\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0432 2008 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"60\",\"parent\":\"19\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0432 2009 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"61\",\"parent\":\"19\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0432 2010 \\u0433\\u043e\\u0434\\u0443\"},{\"key\":\"62\",\"parent\":\"19\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u0421\\u043e\\u0432\\u0435\\u0442\\u0430 \\u043f\\u043e\\u0441\\u0442\\u043e\\u044f\\u043d\\u043d\\u044b\\u0445 \\u043f\\u043e\\u043b\\u043d\\u043e\\u043c\\u043e\\u0447\\u043d\\u044b\\u0445 \\u043f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u0435\\u0439 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432 \\u2013 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u043f\\u0440\\u0438 \\u0443\\u0441\\u0442\\u0430\\u0432\\u043d\\u044b\\u0445 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0430\\u0445 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0432 2011 \\u0433\\u043e\\u0434\\u0443\"}]},{\"key\":\"20\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u0417\\u0430\\u0441\\u0435\\u0434\\u0430\\u043d\\u0438\\u044f \\u042d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0433\\u043e \\u0441\\u043e\\u0432\\u0435\\u0442\\u0430 \\u0421\\u041d\\u0413\",\"children\":[{\"key\":\"63\",\"parent\":\"20\",\"folder\":true,\"title\":\"1999\"},{\"key\":\"64\",\"parent\":\"20\",\"folder\":true,\"title\":\"2000\"},{\"key\":\"65\",\"parent\":\"20\",\"folder\":true,\"title\":\"2001\"},{\"key\":\"66\",\"parent\":\"20\",\"folder\":true,\"title\":\"2002\"},{\"key\":\"67\",\"parent\":\"20\",\"folder\":true,\"title\":\"2003\"},{\"key\":\"68\",\"parent\":\"20\",\"folder\":true,\"title\":\"2004\"},{\"key\":\"69\",\"parent\":\"20\",\"folder\":true,\"title\":\"2005\"},{\"key\":\"70\",\"parent\":\"20\",\"folder\":true,\"title\":\"2006\"},{\"key\":\"71\",\"parent\":\"20\",\"folder\":true,\"title\":\"2007\"},{\"key\":\"72\",\"parent\":\"20\",\"folder\":true,\"title\":\"2008\"},{\"key\":\"73\",\"parent\":\"20\",\"folder\":true,\"title\":\"2009\"},{\"key\":\"74\",\"parent\":\"20\",\"folder\":true,\"title\":\"2010\"}]},{\"key\":\"80\",\"parent\":\"1\",\"folder\":true,\"title\":\"\\u041f\\u0440\\u043e\\u0433\\u0440\\u0430\\u043c\\u043c\\u0430 \\u0438\\u043d\\u043d\\u043e\\u0432\\u0430\\u0446\\u0438\\u043e\\u043d\\u043d\\u043e\\u0433\\u043e \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430 \\u0434\\u043e 2020 \\u0433\\u043e\\u0434\\u0430 \"}]},{\"key\":\"2\",\"parent\":0,\"folder\":true,\"title\":\"\\u0413\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432\\u0430 - \\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u0438 \\u0421\\u041d\\u0413\"},{\"key\":\"3\",\"parent\":0,\"folder\":true,\"title\":\"\\u041e\\u0440\\u0433\\u0430\\u043d\\u044b \\u0421\\u041d\\u0413\"},{\"key\":\"4\",\"parent\":0,\"folder\":true,\"title\":\"\\u041f\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043b\\u044c\\u0441\\u0442\\u0432\\u0430 \\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432-\\u0443\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u043e\\u0432 \\u0421\\u041d\\u0413\"},{\"key\":\"5\",\"parent\":0,\"folder\":true,\"title\":\"\\u041d\\u0430\\u043f\\u0440\\u0430\\u0432\\u043b\\u0435\\u043d\\u0438\\u044f \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430\",\"children\":[{\"key\":\"32\",\"parent\":\"5\",\"folder\":true,\"title\":\"\\u0421\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e \\u0432 \\u0441\\u0444\\u0435\\u0440\\u0435 \\u043e\\u0431\\u043e\\u0440\\u043e\\u043d\\u044b \\u0438 \\u043e\\u0445\\u0440\\u0430\\u043d\\u044b \\u0433\\u0440\\u0430\\u043d\\u0438\\u0446, \\u0431\\u043e\\u0440\\u044c\\u0431\\u044b \\u0441 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0438\\u0437\\u043e\\u0432\\u0430\\u043d\\u043d\\u043e\\u0439 \\u043f\\u0440\\u0435\\u0441\\u0442\\u0443\\u043f\\u043d\\u043e\\u0441\\u0442\\u044c\\u044e, \\u0442\\u0435\\u0440\\u0440\\u043e\\u0440\\u0438\\u0437\\u043c\\u043e\\u043c, \\u043d\\u0435\\u0437\\u0430\\u043a\\u043e\\u043d\\u043d\\u044b\\u043c \\u043e\\u0431\\u043e\\u0440\\u043e\\u0442\\u043e\\u043c \\u043d\\u0430\\u0440\\u043a\\u043e\\u0442\\u0438\\u043a\\u043e\\u0432, \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043e\\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044f \\u043d\\u043e\\u0432\\u044b\\u043c \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430\\u043c \\u0438 \\u0443\\u0433\\u0440\\u043e\\u0437\\u0430\\u043c\"},{\"key\":\"45\",\"parent\":\"5\",\"folder\":true,\"title\":\"\\u0413\\u0443\\u043c\\u0430\\u043d\\u0438\\u0442\\u0430\\u0440\\u043d\\u043e\\u0435 \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043e\"}]},{\"key\":\"6\",\"parent\":0,\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u043a\\u0430\",\"children\":[{\"key\":\"44\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0441\\u0444\\u0435\\u0440\\u0435 \\u043e\\u0431\\u043e\\u0440\\u043e\\u043d\\u044b \\u0438 \\u043e\\u0445\\u0440\\u0430\\u043d\\u044b \\u0433\\u0440\\u0430\\u043d\\u0438\\u0446, \\u0431\\u043e\\u0440\\u044c\\u0431\\u044b \\u0441 \\u043e\\u0440\\u0433\\u0430\\u043d\\u0438\\u0437\\u043e\\u0432\\u0430\\u043d\\u043d\\u043e\\u0439 \\u043f\\u0440\\u0435\\u0441\\u0442\\u0443\\u043f\\u043d\\u043e\\u0441\\u0442\\u044c\\u044e, \\u0442\\u0435\\u0440\\u0440\\u043e\\u0440\\u0438\\u0437\\u043c\\u043e\\u043c, \\u043d\\u0435\\u0437\\u0430\\u043a\\u043e\\u043d\\u043d\\u044b\\u043c \\u043e\\u0431\\u043e\\u0440\\u043e\\u0442\\u043e\\u043c \\u043d\\u0430\\u0440\\u043a\\u043e\\u0442\\u0438\\u043a\\u043e\\u0432, \\u043f\\u0440\\u043e\\u0442\\u0438\\u0432\\u043e\\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u044f \\u043d\\u043e\\u0432\\u044b\\u043c \\u0432\\u044b\\u0437\\u043e\\u0432\\u0430\\u043c \\u0438 \\u0443\\u0433\\u0440\\u043e\\u0437\\u0430\\u043c\",\"children\":[{\"key\":\"46\",\"parent\":\"44\",\"folder\":true,\"title\":\"1\"}]},{\"key\":\"47\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0433\\u0443\\u043c\\u0430\\u043d\\u0438\\u0442\\u0430\\u0440\\u043d\\u043e\\u0439 \\u0441\\u0444\\u0435\\u0440\\u0435\"},{\"key\":\"48\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u043f\\u0440\\u0430\\u0432\\u043e\\u0432\\u043e\\u0439 \\u0441\\u0444\\u0435\\u0440\\u0435\"},{\"key\":\"49\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0439 \\u0441\\u0444\\u0435\\u0440\\u0435\"},{\"key\":\"50\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0444\\u0438\\u043d\\u0430\\u043d\\u0441\\u043e\\u0432\\u043e\\u0439 \\u0441\\u0444\\u0435\\u0440\\u0435\"},{\"key\":\"51\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0441\\u0444\\u0435\\u0440\\u0435 \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u0438 \\u0438 \\u043c\\u0430\\u0441\\u0441\\u043e\\u0432\\u044b\\u0445 \\u043a\\u043e\\u043c\\u043c\\u0443\\u043d\\u0438\\u043a\\u0430\\u0446\\u0438\\u0439\"},{\"key\":\"52\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0441\\u0444\\u0435\\u0440\\u0435 \\u043c\\u0435\\u0436\\u0440\\u0435\\u0433\\u0438\\u043e\\u043d\\u0430\\u043b\\u044c\\u043d\\u043e\\u0433\\u043e \\u0438 \\u043f\\u0440\\u0438\\u0433\\u0440\\u0430\\u043d\\u0438\\u0447\\u043d\\u043e\\u0433\\u043e \\u0441\\u043e\\u0442\\u0440\\u0443\\u0434\\u043d\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u0430\"},{\"key\":\"53\",\"parent\":\"6\",\"folder\":true,\"title\":\"\\u0410\\u043d\\u0430\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0435 \\u043c\\u0430\\u0442\\u0435\\u0440\\u0438\\u0430\\u043b\\u044b \\u0432 \\u0441\\u0444\\u0435\\u0440\\u0435 \\u043e\\u0431\\u0449\\u0435\\u043f\\u043e\\u043b\\u0438\\u0442\\u0438\\u0447\\u0435\\u0441\\u043a\\u0438\\u0445 \\u043f\\u0440\\u043e\\u0431\\u043b\\u0435\\u043c\"}]},{\"key\":\"7\",\"parent\":0,\"folder\":true,\"title\":\"\\u041a\\u043e\\u043d\\u0444\\u0435\\u0440\\u0435\\u043d\\u0446\\u0438\\u0438\"},{\"key\":\"8\",\"parent\":0,\"folder\":true,\"title\":\"\\u0412\\u044b\\u0431\\u043e\\u0440\\u044b\"},{\"key\":\"9\",\"parent\":0,\"folder\":true,\"title\":\"\\u041c\\u0443\\u0437\\u0435\\u0439 \\u0421\\u041d\\u0413\"},{\"key\":\"10\",\"parent\":0,\"folder\":true,\"title\":\"\\u0421\\u043f\\u0440\\u0430\\u0432\\u043e\\u0447\\u043d\\u0430\\u044f\"},{\"key\":\"11\",\"parent\":0,\"folder\":true,\"title\":\"\\u0421\\u0441\\u044b\\u043b\\u043a\\u0438\"},{\"key\":\"12\",\"parent\":0,\"folder\":true,\"title\":\"\\u0410\\u0440\\u0445\\u0438\\u0432\",\"children\":[{\"key\":\"54\",\"parent\":\"12\",\"folder\":true,\"title\":\"\\u0421\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f \\u041f\\u0420\\u0415\\u0421\\u0421-\\u0421\\u041b\\u0423\\u0416\\u0411\\u042b (2009-2010)\"}]},{\"key\":\"41\",\"parent\":0,\"folder\":true,\"title\":\"\\u0415\\u0434\\u0438\\u043d\\u044b\\u0439 \\u0440\\u0435\\u0435\\u0441\\u0442\\u0440 \\u043f\\u0440\\u0430\\u0432\\u043e\\u0432\\u044b\\u0445 \\u0430\\u043a\\u0442\\u043e\\u0432 \\u0438 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u0434\\u043e\\u043a\\u0443\\u043c\\u0435\\u043d\\u0442\\u043e\\u0432 \\u0421\\u041d\\u0413 (\\u0431\\u0435\\u0442\\u0430 \\u0432\\u0435\\u0440\\u0441\\u0438\\u044f)\"},{\"key\":\"56\",\"parent\":0,\"folder\":true,\"title\":\"\\u041d\\u0435 \\u0438\\u0437\\u0432\\u0435\\u0441\\u0442\\u043d\\u043e\"},{\"key\":\"55\",\"parent\":0,\"folder\":true,\"title\":\"20-\\u043b\\u0435\\u0442\\u0438\\u0435 \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0430 \\u041d\\u0435\\u0437\\u0430\\u0432\\u0438\\u0441\\u0438\\u043c\\u044b\\u0445 \\u0413\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432\",\"children\":[{\"key\":\"75\",\"parent\":\"55\",\"folder\":true,\"title\":\"\\u0421\\u0442\\u0430\\u0442\\u044c\\u0438\"},{\"key\":\"78\",\"parent\":\"55\",\"folder\":true,\"title\":\"\\u041c\\u0435\\u0436\\u0433\\u043e\\u0441\\u0443\\u0434\\u0430\\u0440\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u0430\\u044f \\u0432\\u044b\\u0441\\u0442\\u0430\\u0432\\u043a\\u0430 \\\"\\u0421\\u041d\\u0413 - 20 \\u043b\\u0435\\u0442\\\" \"}]},{\"key\":\"76\",\"parent\":0,\"folder\":true,\"title\":\"\\u0412\\u043d\\u0443\\u0442\\u0440\\u0435\\u043d\\u043d\\u0438\\u0435 \\u0440\\u0430\\u0437\\u0434\\u0435\\u043b\\u044b\",\"children\":[{\"key\":\"77\",\"parent\":\"76\",\"folder\":true,\"title\":\"\\u0413\\u043e\\u0434 \\u043f\\u043e\\u0432\\u044b\\u0448\\u0435\\u043d\\u0438\\u044f \\u043f\\u0440\\u043e\\u0434\\u043e\\u0432\\u043e\\u043b\\u044c\\u0441\\u0442\\u0432\\u0435\\u043d\\u043d\\u043e\\u0439 \\u0431\\u0435\\u0437\\u043e\\u043f\\u0430\\u0441\\u043d\\u043e\\u0441\\u0442\\u0438\"},{\"key\":\"79\",\"parent\":\"76\",\"folder\":true,\"title\":\"\\u0413\\u043e\\u0434 \\u0438\\u0441\\u0442\\u043e\\u0440\\u0438\\u043a\\u043e-\\u043a\\u0443\\u043b\\u044c\\u0442\\u0443\\u0440\\u043d\\u043e\\u0433\\u043e \\u043d\\u0430\\u0441\\u043b\\u0435\\u0434\\u0438\\u044f\"}]},{\"key\":\"81\",\"parent\":0,\"folder\":true,\"title\":\"\\u041e \\u0421\\u043e\\u0434\\u0440\\u0443\\u0436\\u0435\\u0441\\u0442\\u0432\\u0435\"},{\"key\":\"82\",\"parent\":0,\"folder\":true,\"title\":\"\\u0418\\u0441\\u043f\\u043e\\u043b\\u043a\\u043e\\u043c \\u0421\\u041d\\u0413\"},{\"key\":\"84\",\"parent\":0,\"folder\":true,\"title\":\"\\u041f\\u043e\\u043b\\u043e\\u0436\\u0435\\u043d\\u0438\\u0435 \\u043e\\u0431 \\u0418\\u0441\\u043f\\u043e\\u043b\\u043d\\u0438\\u0442\\u0435\\u043b\\u044c\\u043d\\u043e\\u043c \\u043a\\u043e\\u043c\\u0438\\u0442\\u0435\\u0442\\u0435 \\u0421\\u041d\\u0413\"},{\"key\":\"86\",\"parent\":0,\"folder\":true,\"title\":\"\\u0413\\u0440\\u0430\\u0444\\u0438\\u043a \\u043c\\u0435\\u0440\\u043e\\u043f\\u0440\\u0438\\u044f\\u0442\\u0438\\u0439\"},{\"key\":\"87\",\"parent\":0,\"folder\":true,\"title\":\"\\u0418\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u043e\\u043d\\u043d\\u0430\\u044f \\u0441\\u043f\\u0440\\u0430\\u0432\\u043a\\u0430 \\u043e \\u0421\\u041d\\u0413\"}],\"dnd\":{\"autoExpandMS\":400,\"focusOnClick\":true,\"preventVoidMoves\":true,\"preventRecursiveMoves\":true,\"dragStart\":function(node, data) { return true; },\"dragEnter\":function(node, data) { if(node.parent !== data.otherNode.parent) return false; return true; },\"dragDrop\":function(node, data) { data.otherNode.moveTo(node, \"before\"); }}});\n. Thank you for quick answer! I'll try\n. When I posted the code to jsfiddle I've noticed that it works correctly with different versions of external libraries such as jquery or jquery-ui. So I started to search the error in my code and I found the mistake in my Inspinia dashboard theme JS file in function WinMove which tried to manipulate all dragable events.\nThank you very much for great tree and very quick help! Thank you!\n. Also in context menu\n. Issue with context menu i solved using external context menu\n. Check the the menu item route and active route (in YII2).\nFor example, i wrote extended filters one day and checked the state in that way:\n``` php\npublic static function isRouteParamActive($param, $value) {\n        if (!$param || !$value)\n            throw new InvalidParamException('$param and $value could not be null');\n    $getParams = Yii::$app->request->get();\n\n    return ( isset($getParams[$param]) && ($getParams[$param] == $value) );\n}\n\n```\nand in the view i've checked the filter's state:\nphp\n<li<?php if(FilterHelper::isRouteParamActive('mainland','north-america')) echo ' class=\"active\"' ?>><a href=\"?<?= FilterHelper::getFiltersRoute('mainland','north-america') ?>\">\u0421\u0435\u0432\u0435\u0440\u043d\u0430\u044f \u0410\u043c\u0435\u0440\u0438\u043a\u0430</a></li>\nAlso, you can look how it's written the code of yii bootstrap nav \\ navbar widgets.\n. Also, dear Wilmer, regarding only to the fancytree, thereis attribute \"expanded\" of the item. Try to add it to the active subitem's parent. And read the documentation!\n. Look here http://wwwendt.de/tech/fancytree/doc/jsdoc/global.html#NodeData at the attribute \"expanded\". When you build the tree add this attribute to the parent of active sub item. Active subitem you can get using current route. That's all!\n. ",
    "danihodovic": "Well basically I've defined an MV* architecture in my app where the nodes represent some sort of views/controllers (think backbone) and contain some logic. It would be intuitive in my opinion to have a reference back to the original object as [original_object] to be default, but this can easily be achieved by placing the reference in the data object (data = this view). The main use case is where the nodes themselves interact with the rest of the app in nontrivial ways, but as I said it's easily solvable with the [data] attr.\nI struggled with placing the lazyloading logic (as I have to send complex data structs back and forth between client/server and not only urls) in the lazyload function, but it worked out fine when I could pass back a $.deferred from my view. Again, nice plugin, very configurable!\n. Yeah the screenshot didn't seem to upload. Works. Thanks!\n. ",
    "eatglobeandrey": "Actually I solve this issue just using an old version from 2014.\n. Nop since latest version does not work\n. ",
    "veron-33": "I had the same error when I used old version of jquery.fancytree.js (2.4) and new version of ext-table (2.8). After upgrading of main script and moving to jquery.fancytree-all.js (2.8) wihout extternal extention file the problem solved.\n. ",
    "tecnologiaterabyte": "thanks for your answer, and if I read the documentation several times, in addition to reviewing the issues, I added icons to my treeview using renderNode Callbach and can be done now with Iconclass, had the solution to my eyes but had not seen.\nMyCode:\n<li <?php echo (Yii::$app->controller->id == 'site') ? \"class = 'treview active'\" : \"class = 'treview'\" ?>>\nif done with (Yii :: $ app-> controller-> id == 'site') all views that controller who are to be placed active class without checking each of them..\nThks.\n. very good :+1: \n. ",
    "FroggDev": "hi,\nmaybe the match could trigger the expand if more than (x) letters are typed and if no matching node found then collapse expanded nodes ? \n. ",
    "simshaun": "I think an option would probably be better for my case.\nWhat about if filterBranches and filterNodes accepted an options map? Do you think there would be any use cases where somebody may wish to expand matched nodes when filtering one way, but not do so when filter another way?\n. I tried that. Setting autoCollapse: false does not get rid of the bug. Setting clickFolderMode: 4 gets rid of the bug, but leaves me with undesired behavior.\n. ",
    "genachka": "Thanks, I got it working. I had previously missed that skin-awesome css should be used. I did notice that when using skin-awesome, it's looking for loading.gif on lazy nodes and there's no loading.gif in skin-awesome. Also, if using skin-awesome directly, there's no background being set on the selected node and no hover color.\n. Seeing same issue with skin-awesome.\n. I didn't see it in the API reference but just tried it and it does exactly what I was looking for. Thanks!\n. ",
    "JakubHolovsky": "Hello Mar10,\nhere is a jsfiddle of the problem.\nhttp://jsfiddle.net/6q92b9qx/4/\nCheers,\nJakub\n. ",
    "vladtheman": "Hi Marten,\nI am also having similar issue. Is there workaround to this? Thanks.\nVlad\n. ",
    "martinRocks": "Is there an event where the data has been loaded that I can then call the modal hide method?\n. ",
    "robertmindroi": "I have the following code \njavascript\n$(\"#report_tree\").fancytree({\n    extensions: [\"filter\", \"select\"],\n    filter: {\n      mode: \"hide\",\n      autoApply: true\n    },\n    source: JSON.parse(LEDS.productsTree),\n    checkbox: true,\n    quicksearch: true,\n    icons: false,\n    generateIds: true,\n    idPrefix: 'report_product'\n  });\nand the select extension does not load.  On this page http://wwwendt.de/tech/fancytree/demo/sample-select.html I have noticed that there is a 'select' extension.\n. my bad :( works great now!\n. ",
    "pmishev": "Shouldn't this line \nselectedName = (typeof selected === \"string\") ? selected : \"ft_\" + this._id + \"[]\",\nrather be:\nselectedName = ( (typeof selected === \"string\") ? selected : \"ft_\" ) + this._id + \"[]\",\nHow else are you supposed to override the input name, keeping the id in it?\n. ",
    "wouterj": "Thank you, I didn't knew each data-* attribute had a corresponding option in the data.result object. I've know managed to get things working using { \"iconclass\": \"...\" }.\nAm I correct that this behaviour isn't documented/demo-ed somewhere?\n. ",
    "wrustel": "Ok, now works thank you so much and one last issue, \nis there any way to change a \"html text editor\" to use a checkbox instead when I am editing the node's name?\n. ",
    "tamarmot": "also missing ltError.gif from skin-themeroller directory\n. You are correct, loading is missing from only both bootstrap folders and the awesome folder.  Looks like my css validation process (called by django-pipeline) verifies comments in css too, which is kind of silly.\nThanks!\n. Hm, is it possible to pre-populate the cookie with the initial settings?\n. Hi, thanks for the response.  I've looked at that Stackoverflow and that was not my issue; I think the problem has to do with containing div not being visible at the time it is fancytree'd.  I will do some more sleuthing, see if I can put together a jsfiddle, and share what I discover.  Thanks!\n. Yup, that had nothing to do with fancytree; jquery was not finding the div correctly when I searched for it globally, but if I looked within the backbone context I could retrieve the div. \nhttp://stackoverflow.com/questions/29479463/fancytree-not-rendering-in-backbone-templated-page\n Thanks!\n. ",
    "offtopic": "yes sorry - wrong version!\nMartin Wendt notifications@github.com schrieb am Do., 22. M\u00e4rz 2018,\n07:06:\n\n@offtopic https://github.com/offtopic: i received a notification; did\nyou remove that comment?\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/408#issuecomment-375190194,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ADLsGXbCuRHqWg7FjWXmng58ZWDh5Mveks5tgz9OgaJpZM4Dr9J1\n.\n. \n",
    "CherednichenkoAS": "Check extensions are added. \nextensions: [\"edit\", \"dnd\", \"table\", \"gridnav\"],\nWorked for me.. ",
    "zgldh": "It still happen with the latest code.\nLoaded bootstrap3 and jQuery 2.1.3 and jQuery-UI\nHere is my code.\nhtml\n    <table id=\"client-tree\" class=\"table\">\n        <colgroup>\n            <col width=\"*\"></col>\n            <col width=\"200px\"></col>\n        </colgroup>\n        <thead>\n        <tr>\n            <th>Name</th>\n            <th>Action</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n            <td></td>\n            <td></td>\n        </tr>\n        </tbody>\n    </table>\n``` javascript\nvar clients = [\n    {\n        \"key\"     : 1,\n        \"title\"   : \"Options for Youth\",\n        \"children\": [\n            {\n                \"key\"  : 1.1,\n                \"title\": \"Sub 1\"\n            },\n            {\n                \"key\"  : 1.2,\n                \"title\": \"Sub 2\"\n            },\n            {\n                \"key\"  : 1.3,\n                \"title\": \"Sub 3\"\n            },\n        ]\n    }];\n\nvar client_tree = $(\"#client-tree\");\nclient_tree.fancytree({\n    extensions     : [\"table\", \"glyph\", \"filter\", \"edit\"],\n    checkbox       : false,\n    icons          : false,\n    clickFolderMode: 4,\n    table          : {\n        indentation  : 20,      // indent 20px per node level\n        nodeColumnIdx: 0     // render the node title into the 2nd column\n    },\n    quicksearch    : true,\n    filter         : {\n        mode     : \"hide\",\n        autoApply: true\n    },\n    source         : clients,\n    renderColumns  : function (event, data) {\n        var node = data.node,\n                $tdList = $(node.tr).find(\">td\");\n        var html = \"<button type='button' class='btn btn-default add-btn' data-key='\" + node.key + \"'><i class='glyphicon glyphicon-plus-sign'></i></button>\";\n        html += \"<button type='button' class='btn btn-default edit-btn' data-key='\" + node.key + \"'><i class='glyphicon glyphicon-pencil'></i></button>\";\n\n        $tdList.eq(1).html(html);\n    },\n    glyph          : {\n        map: {\n            doc             : \"glyphicon glyphicon-file\",\n            docOpen         : \"glyphicon glyphicon-file\",\n            checkbox        : \"glyphicon glyphicon-unchecked\",\n            checkboxSelected: \"glyphicon glyphicon-check\",\n            checkboxUnknown : \"glyphicon glyphicon-share\",\n            error           : \"glyphicon glyphicon-warning\",\n            expanderClosed  : \"glyphicon glyphicon-menu-right\",\n            expanderLazy    : \"glyphicon glyphicon-menu-right\",\n            // expanderLazy: \"glyphicon glyphicon-expand\",\n            expanderOpen    : \"glyphicon glyphicon-menu-down\",\n            // expanderOpen: \"glyphicon glyphicon-collapse-down\",\n            folder          : \"glyphicon glyphicon-folder-close\",\n            folderOpen      : \"glyphicon glyphicon-folder-open\",\n            loading         : \"glyphicon glyphicon-refresh\"\n            // loading: \"icon-spinner icon-spin\"\n        }\n    },\n\n    edit: {\n        triggerStart: [\"f2\", \"shift+click\", \"mac+enter\"],\n        beforeEdit  : function (event, data) {\n            // Return false to prevent edit mode\n        },\n        edit        : function (event, data) {\n            // Editor was opened (available as data.input)\n            data.input.select();\n        },\n        beforeClose : function (event, data) {\n            // Return false to prevent cancel/save (data.input is available)\n        },\n        save        : function (event, data) {\n            // Save data.input.val() or return false to keep editor open\n            console.log(\"save...\", this, data);\n            return true;\n        },\n        close       : function (event, data) {\n            // Editor was removed\n            if (data.save) {\n                // Since we started an async request, mark the node as preliminary\n                $(data.node.span).addClass(\"pending\");\n            }\n        }\n    }\n});\n\nclient_tree.on('click', 'button.add-btn', function (e) {\n            var key = $(this).data('key').toString();\n            var max_key = 0;\n            var node = tree.getNodeByKey(key);\n            if (node.children) {\n                var children_length = node.children.length;\n                for (var i = 0; i < children_length; i++) {\n                    var child_node = node.children[i];\n                    max_key = Math.max(max_key, child_node.key.substr(child_node.key.lastIndexOf('.') + 1));\n                }\n            }\n            max_key++;\n            var new_node_data = {\n                \"title\": \"New Client\",\n                \"key\"  : key + '.' + max_key\n            };\n            var new_node = node.editCreateNode('child', new_node_data);\n        })\n        .on('click', 'button.edit-btn', function (e) {\n            var key = $(this).data('key').toString();\n            var node = tree.getNodeByKey(key);\n            console.log('Edit',key,node);\n            node.editStart();\n        });\n\nvar tree = client_tree.fancytree(\"getTree\");\n\n```\n. ",
    "Aranad": "Thanks, pull request done. Actually I got it working by returning the response string as a single element array in the Ajax request's dataFilter, but it's much cleaner with the condition added to the exception.\n. ",
    "jameswu1818": "treeChangedEvent:\nYou are right, It would be too much to fire treeChangedEvent for each node change, it should be fired only on tree level functions.\nUse Case1: Need to swap list of data set to display in a tree table. Base on selection, the corresponding set data is loaded in the tree. A column have buttons created in run time.Number or type of buttons are based on type of nodes. After tree is loaded, I want to bind click events of the buttons. treeChanged event would come in handy. Right now, I have to using setTimer() for it to work.  \nnodeChangedEvent: \nUser data change are more interesting for user, maybe provide a function just to fire an node change event? For example: \nnode.title='x'; \nnode.data.myButtons=[\"Approve\", \"Reject\"];\nnode.fireNodeChangedEvent();\nUC2: When create or update a node, nodeChangedEvent would help to bind button events, as in use case above.\nUC3: For display statistics of node type/status/...etc of a dynamic tree in real time, in a different panel.\nUC4: Change correlated nodes automatically\nchildChangedEvent: \nUC5: There are too many child nodes to show under a parent node. Want to make some paging mechanism to display only a portion of child nodes. childChangedEvent is helpful to manage the paging logic.\nUC6: To show child count on a parent node\n. Great. I'll read about how delegation works\n. ",
    "brunck": "Snarky comments aren't exactly inspiring me.\n. ",
    "mastasushi": "Looks good thanks :)\n. ",
    "narsters": "Hi Martin,\u00a0\u00a0 Thank you for getting back to me.\u00a0 I know that the click was put in for the dnd issue, but why is the blur still needed?\u00a0 I am not using the dnd (yet), and both the click and the blur are being called, which is causing the beforeClose and Save, and Close events to fire twice.\u00a0 When I removed the blur in fancytree.edit.js, the events still fired when they were supposed to and they only fired once.\nThanks,\u00a0\u00a0\u00a0 Jeff\n. Cool, thanks!  I know how hard it is to maintain these types of projects, and I appreciate it.\n. Hi Martin,\u00a0\u00a0 I created a plunkr here: http://plnkr.co/edit/IGWaS8J4C9jih2ldxCtu\nI basically copied all of you sample for the inline edit into there and added an alert to the beforeClose event in the script.js file.\u00a0 If you double click on a node, change the text and click out of the node, you will see two alert boxes pop up since the event fires twice.\u00a0 I believe this only happens if you do NOT also have the dnd module since the blur event fires as well as the click event.\u00a0 In playing with the code, I removed the blur event from the fancytree.edit.js file and everything still worked as it should have, and the event only fired once.\u00a0 This happens in Firefox and IE, I did not see it happen in Chrome for whatever reason.\u00a0 I think the blur event was just left over from when you fixed the issue when the dnd module was added, it disabled the blur event:)\u00a0 Hope this helps, and let me know if you need anything else from me.\nThanks,\u00a0\u00a0 Jeff \n. ",
    "blackhawk180": "update of stylesheet should be:\n.fancytree-selected.fancytree-unselectable span.fancytree-checkbox,\n.fancytree-selected.fancytree-unselectable span.fancytree-checkbox:hover {\n  opacity: 0.4;\n  filter: alpha(opacity=40);\n  background-position: -32px -32px;\n}\nas this is more specfic for selected + unselectable\n. ",
    "ramasatya": "I googled and try to seek all other information on the net and finally reaching you. If any link in your awareness having solution to this problem is also helpful.\n. The issue is version. It is fixed in 2.9.0 and when I use latest version, it is working as expected. Thank you and closing.\n. This is exactly what I needed. Thank you.\n. Fancytree Issue.docx\nNot aware how this is missed but please find the attachment again.. ",
    "maxitromer": "Just to inform that I find a way and I'm working on it.\nI will publish it here when works.\nBests.\n. Man, this is much better than I was creating.\nI put the code in the fiddle with an static example for the real life to make it works with AJAX.\nhttp://jsfiddle.net/maxitromer/prncw2sL/6/\n(I don't know why but I have to delete the header of the JSON to make it work.)\nHowever ... works but with a little problem. \nAs you say \"This sample also assumes that sub-tasks appear after their parents.\"\nGoogle works with a \"position\" inside the JSON that controls the place in the tree and changes when you change the ITEM place.\nAnd when you move the task the \"position\" changes but not the place in the JSON.\nThats why the sub-tasks could appear after or before their parents.\n. I put this new code in the fiddle and works like a charm.\nI leave it here for future reference:\nhttp://jsfiddle.net/prncw2sL/11/\nThank you Martin!\n. I think this HTML structure for every <li> element will be ideal:\nhtml\n<li>\n    <span class=\"fancytree-node fancytree-exp-n fancytree-ico-c\">\n        <span class=\"fancytree-expander\"></span>\n        <span class=\"fancytree-icon\"></span>\n        <span class=\"fancytree-title\">Sub-item 4.1</span>\n        <span class=\"fancytree-date\">21-5-2015</span>\n        <span class=\"fancytree-note\">This is a note inside a Fancytree node</span>\n    </span>\n</li>\n. Ok, I put the answer in stackoverflow, this is the link:\nhttp://stackoverflow.com/questions/30240354/fancytree-add-new-items-into-a-tree-node-date-notes-etc\nI hope see you there.\nThanks in advance.\n. ",
    "mkirkor": "Fixed. Had to give permissions to the folder fancytree\n. ",
    "masoodinfo": "is bug ? or my code has error?\n. any one?\n. tnx.the problem was for ui version.\ntnx veryyyyyyyyyyyyyyyyyyyyyyyyyyy\n. ",
    "vitya-ne": "One more documentation mistake, imho:\non http://www.wwwendt.de/tech/fancytree/doc/jsdoc/global.html#EventData describes FancytreeEvents. Description of activate callback has mistake: \"data.node was deactivated\". I think: \"data.node was activated\" is correct.\n. ",
    "mkoch42": "Is there a way so that if the last child is removed from a folder the folder MAINTAINS the folder icon so user still knows it is a folder and can drag a different child into it.  Currently the fancytree-expander span is removed all together and this is confusing.  I see it used to work the way i am requesting so wondering if it is an easy toggle for me to switch it back and/or add an option to handle?\nThanks!\n. Thanks for your response.  I forgot that what I had done was switch the expander icon to be the folder and then set icon:false.  In that case the expander disappears so you can not tell it is a folder.  I think I am fine using a caret for the expander and the folder for the icon and setting icon:true at this point.\nThanks for your quick feedback!\nMatt\n. luk156 solution works great to not search the html tags but only the text.  Does anyone know how you could alter that code so that if the text is found, the entire node was returned / left intact if part of it matched the filter.\nIn my example i want to have a select element in the node and with luk156 code it will properly filter but it escapes out all of the html in the node when my goal is to leave the node exactly as it is if the text is found in any option of the select element.\nTree starts like this:\n\nReturns like this after filter...\n\nBut the goal would be for it to filter for that node and leave it like the original way it starts (SS 1) and just hide all nodes that don't match at all!\nAny help would be GREATLY appreciated.\nThanks\n. ",
    "scottee": "No example yet.  I knew you'd ask, so I've been thinking about it.  It will be a pain, since it's embedded in several layers of code, but I'll be trying to do that.  BTW, we're also using AngularJS; I don't know if that factors in.  The fancytree isn't a directive, though.\nMy biggest concern is a work around.  Do you have any ideas what might help there?  Can I simulate the first click somehow to get fancytree/jQuery into the right state?  I'm getting complaints from users here about this issue so I've been spending time looking for a workaround.  If I had a work around, I could spend time on the reproducible example.  (Of course doing the reproducible case may also yield the work around - chicken or egg.)\nAnd just in case it gives you some hint, this problem doesn't happen in dynatree.  We migrated this code from dynatree.\nThanks,\n-Eric Scott\nFrom: Martin Wendt notifications@github.com<mailto:notifications@github.com>\nReply-To: mar10/fancytree reply@reply.github.com<mailto:reply@reply.github.com>\nDate: Friday, June 12, 2015 at 12:49 AM\nTo: mar10/fancytree fancytree@noreply.github.com<mailto:fancytree@noreply.github.com>\nCc: Eric Scott eric.scott@bazaarvoice.com<mailto:eric.scott@bazaarvoice.com>\nSubject: Re: [fancytree] Node click always selects first top-level node when first displayed. (#450)\nIs this reproducible on the example pages? If not, it might be related to the function-source. Could you create a sample, e.g. jsFiddle, that helps to debug it?\n\nReply to this email directly or view it on GitHubhttps://github.com/mar10/fancytree/issues/450#issuecomment-111368277.\n. It depends on dnd, filter, and edit extensions.  Doesn't use tabbable or titlesTabbable.  It doesn't use the focusOnClick dnd option to my knowledge.\n. ",
    "SvetlanaL": "Thanks for the answer\nit is interesting that in Firefox works - what is the difference event processing? ... and which of them overrides contenteditable\nUnfortunately for my task <input> is not suitable - editing must be through contenteditable\n. ",
    "lsg1": "Perfect! Thank you so much\n. ",
    "sophanox": "FYI, I actually encountered this problem with Chrome and came across this issue whilst searching for help. In the end, I just tried updating to the latest version of fancytree as I was using one about a year out of date, which fixed it! . Also, I've noticed a few inconsistencies in your documentation & files regarding Font Awesome 5. I'm not sure if this is intentional or not but just letting you know.\nHere: https://github.com/mar10/fancytree/wiki/ExtGlyph you link to the Font Awesome 4 demo in the Font Awesome 5 section (even though a Font Awesome 5 demo exists). \nAdditionally, the current prod version of the glyph extension in the dist directory (https://github.com/mar10/fancytree/blob/master/dist/modules/jquery.fancytree.glyph.js) doesn't have the Font Awesome 5 presets, even though you list them in the documentation?\n. So I've made a work around in the meantime. This leverages the SVG sprites provided by Font Awesome (https://fontawesome.com/how-to-use/performance-and-security#symbols-using-svg-sprites).\nTo implement it, add your sprites to the head of the page like so:\n<i class=\"fas fa-file-regular\" data-fa-symbol=\"fa-file-regular\"></i>\n<i class=\"fas fa-folder-regular\" data-fa-symbol=\"fa-folder-regular\"></i>\n<i class=\"fas fa-caret-right-solid\" data-fa-symbol=\"fa-caret-right-solid\"></i>\netc...\nNext, in the map parameter of the glyph extension setup, add the SVG elements:\nglyph: {\n      map: {\n        expanderClosed: '<svg class=\"svg-inline--fa fa-w-20 fancytree-icon\"><use xlink:href=\"#fa-caret-right-solid\"></use></svg>',\n        doc: '<svg class=\"svg-inline--fa fa-w-20 fancytree-icon\"><use xlink:href=\"#fa-file-regular\"></use></svg>',\n        folder: '<svg class=\"svg-inline--fa fa-w-20 fancytree-icon\"><use xlink:href=\"#fa-folder-regular\"></use></svg>',\netc...\n }\n}\nFinally, update the setIcon function in the glyph extension so that it just directly echoes the svg element into the DOM:\nfunction setIcon(span, baseClass, opts, type) {\n        var map = opts.map;\n        span.innerHTML = map[type];\n}\nIt should then render at a much more respectable speed. Mine dropped from 20+ seconds to 400ms for the Font Awesome function call.\nCheers\n. Thanks!. ",
    "AnujaK": "I am trying to create a multi line node as mentioned below in the screenshot. I looked into the documentation, however couldn't find a way to build this. Can you please suggest if it can be done in the current build?\n\n. ",
    "Wheelskad": "Hum, i try  \"focusOnClick: false\" property for DnD extension and the problem seems to disappear.\n. ",
    "L-u-k-e": "Also, FancyTreeNode.getCloneList() http://www.wwwendt.de/tech/fancytree/doc/jsdoc/FancytreeNode.html#getCloneList\n. ",
    "aureole82": "Yes, node.renderTitle() works and calls the iconclass handler.\nBut it seems that it doesn't call my custom renderNode handler. So I'm looking forward on the next release with your fix.\nThanks\n. ",
    "NemoPeti": "When I select any child in a node (in my example select img_01.png under images5 node), and call the getSelectedNodes(true)  method, I got the selected child keys as result, but none of the root nodes selected. The root node selected only paritally at this time, so the method should return null or empty.\nI think it's a bit confusing.\n. I read the docs about it. And it's work as I expect when select a root node. But I think if I not select a root node (only some of their child), the function, which design to return the selected root nodes, should return NULL.\n. ",
    "hidayetsoltanzade": "i set manually setExpanded(false);\nBut when node double clicked, it shows expanderOpen icon again.\n. I now updated to version 2.11.0 ... when last child removed (with removeChild()), parent gets collapsed. But then, when i double click to that node, it shows ExpanderOpen icon again (like it was collpased, and now expanded, but there are no children)..\n. In my case, i am using bootstrap skin. when i remove all children, expander icon is removed. but appears again when i double click parent.\n. tree = $(\"#treetable\").fancytree(\"getTree\");\n tree.visit(function (node) {\n   node.setExpanded(true);\n});\nwhen i want to expand all nodes, with visit, chrome page rather not responds and wants to kill the page or reponds after at least 1 minute.\n. ",
    "Stekot": "Sorry ignore this\n. ",
    "Bringer128": "That was quick, thanks!\n. ",
    "advancedits": "Looks like I needed to use \"select\" event instead of click...this seems to have done the trick. Please do let me know if I should be using some other technique to capture the event and ignore collapse/expansion\n$(\"#tree2\").bind(\"fancytreeselect\", function(event, data){\n    //console.log(\"event=\"+event.originalEvent.type);\n    console.log(\"data=\"+data.node +\" isSelected()=\"+data.node.isSelected());\n  });\n. Thanks man..will do\n. ",
    "rahulbhatt007": "FYI. It's parent was a lazy node. This node do not require to be lazy and its children are empty. Hence, there should be no expander icon. Worked fine in dynatree.\nAlso, making children property an empty array didn't help.\n. We can clearly see from above object, that the node's lazy status is not defined and is showing undefined. We cannot obviously remove this(lazy) property from any node.\nAlso , I mentioned above that providing an empty array to children properties didn't help.\n. Works fine in this fiddle : http://jsfiddle.net/c0a5jzra/1/\nHowever, in my case(little different from fiddle) after lazy load, I don't add the result of ajax in data.result. Instead, I use addChildren(ajaxResult) to add nodes on the lazy node. This is particularly done for a use case.\nSo the question is, if I don't populate data.result inside lazy load, will it effect the leaf node properties??? Is that step necessary??\nP.S: I didn't face any issues in dynatree for same code.\n. ",
    "rayner133": "Having the same problem, when clicking in the highlighted text. Tried to locate the problem, but couldn't solve it. \"mousedown\" and \"focusin\" is triggerd, but \"click\" isn't. Clicking on the non-highlighted text triggers a \"click\".\nv2.27.0\nFirefox Quantum 57.0\nMicrosoft Edge 41.16299.15.0. ",
    "berpcor": "Yeah, really? Click 'Labels' in your issues section. Why do you think you have label 'question' there? Me, many other users of github and developers thought it is for questions too.\nThank you for help.\n. I've got your point of view. Already put the question on Stack Overflow.\n. http://stackoverflow.com/questions/32636736/jquery-fancytree-how-to-iterate-over-all-siblings-and-get-custom-attributes-of\n. Found solution- http://wwwendt.de/tech/fancytree/demo/#sample-api.html\n. Thanks. That's exactly what I need. For others I want to say why this option is better than \n        .addChildren({\nfor example.\nWhen you use .addChildren, you need to expand tree where you add your element by yourself. And you need to activate editing by yourself too. When you use \n    .editCreateNode \nwith options, you shouldn't do the previous operations.\n. ",
    "bernadonh": "JSFiddle: http://jsfiddle.net/d52m04zz/\n. ",
    "chino23": "I use something similar, but I have a call in the init function to make it happen. check it out\n```\ninit: function(event, data) {\n                    if (activeJumpNode !== ''){\n                        var treeObject = $(\".\"+treeClass+\"_tree\").fancytree(\"getTree\");\n                        var jumpToNode = treeObject.findFirst(function(node){\n                            return node.data.node_id === activeJumpNode;\n                        });\n                    if (jumpToNode){\n                        jumpToNode.setActive();\n                        $(treeObject.$container).focus();\n                    }\n                }\n\n}\n```\nSo it jumps to the node and activates it, and therefore makes it visible having activeVisible set to true.\n. activeJumpNode was actually an ID which was passed by stateParams from ui-router.\nI then search for that ID in the nodes and set it Active.\noh Nice I was just about to reply with another way but looks like you've got it :)\n. I don't really store these things inside the source JSON for me, as I find it more flexible to activate things in the init function. Therefore, I don't know if that's expected behaviour that it doesn't work from within the JSON source.\nHowever, check this out:\nhttp://www.wwwendt.de/tech/fancytree/doc/jsdoc/global.html#NodeData\nIt says active and focus won't be stored within the node. maybe that's why.\n. copy one of the theme css and replace the icons.gif and background-position with your custom icons.\n. Nice! I had this issue and didn't know what cause it. Many thanks!\nLooking forward to the next release\n. Thank you Martin, I got it to work. \n. Sure.\nSee below, there are two different ways to check and mark it.\nOne uses the titleWithHighlight attribute on the node, as it's just on the title.\nThe second one is a field in an array, custom_array, and it's checked there as well.\nAlso one time it's done with regex, the other time it's done with indexOf\nSo I can have one search to search in both the title and the array.\nvar replacement = '<mark>$&</mark>';\u2028\nsearchText = searchText.replace(/([.?*+^$[\\]\\\\(){}|-])/g, \"\\\\$1\");\u2028\nvar rex = new RegExp(searchText, 'ig')\u2028\nvar searchElement;\u2028\nvar isMatch = false;\u2028\ntree.filterNodes(function (node) {\n    node.titleWithHighlight = node.title.replace(rex, replacement);\u2028\n        if (rex.test(node.title) === true) {\n\u2028         isMatch = true;\u2028\n        }\n\u2028    for (var i = 0; i < node.data.custom_array.length; i++) {\n\u2028        if (node.data.custom_array[i].indexOf(searchText) !== -1) {\n\u2028            searchElement = $(\"#\" + node.data.custom_id + \"_task\").find(\".tag\" + i);\u2028\n            searchElement.html(node.data.custom_array[i].replace(rex, replacement));\n\u2028            isMatch = true;\n\u2028        }\u2028\n    }\n\u2028    return isMatch;\n\u2028}, {autoExpand: true});\nEDIT: fixed formatting\n. Thanks for the quick fix!\n. Submitted https://github.com/mar10/fancytree/pull/706\nThank you, Martin.. ",
    "WulleBulle": "Hello chino,\nthank you for responding. Unfortunately it doesn't work for me because the data object in the node is empty in my fancytree.\nI assume the variable \"activeJumpNode\" was retrieved using data.tree.getActiveNode() ?\nI am doing it that way which leads into an empty node.data.\ninit: function(event, data) {\n            var activeJumpNode = data.tree.getActiveNode();\n            if ( activeJumpNode ) {\n                var treeObj = $(\"div[id=msctree]\").fancytree(\"getTree\");\n                var jumpToNode = treeObj.findFirst(function(node) {\n                    return node.data.node_id === activeJumpNode;\n                });\n                jumpToNode.setActive();\n                $(treeObj.$container).focus();\n            }           \n        }\nThe result is the error \"jumpToNode is null\". What am I missing? :(\n. Just solved it for me. The solution is:\ninit: function(event, data) {\n            var activeJumpNode = data.tree.getActiveNode();\n            if ( activeJumpNode ) {\n                var treeObj = $(\"div[id=msctree]\").fancytree(\"getTree\");\n                var jumpToNode = treeObj.findFirst(function(node) {\n                    return node === activeJumpNode;\n                });\n                jumpToNode.setActive();\n                jumpToNode.setFocus();\n                $(treeObj.$container).focus();\n            }           \n        }\nThanks again...your reply was the kickoff :dancer: \n. Although it would be very nice to have such a function in FancyTree by default :).\n. Hello Martin, no problem here. Thank you for checking this out.\n. ",
    "Surfrat": "I have a solution. \nBefore:\n\nAfter:\n\nMy solution is to use the renderNode event and either strip the <mark> tags or delete the node entirely.\nIn my controller I generate the node title....\nFileViewModel fileViewModel = new FileViewModel\n                {\n                    Title =\n                        blob.DisplayName + \"<span><a  id='\" + blob.FileName +\n                        \"' class='action-button-padding no-wrap' href='' name='download' title='Click to download: \" +\n                        blob.FileName + \"' >\" +\n                        \"<span class='glyphicon glyphicon-download-alt gi-1-0x download-touch-target'></span>\" +\n                        \"</a></span>\",\n                    Key = blob.FileName,\n                    Tooltip = blob.DisplayName,\n                    ETag = blob.ETag,\n                    FileName = blob.FileName,\n                    DisplayName = blob.DisplayName,\n                    LastModified = blob.LastModified\n                };\nthen the code for the tree.\n```\n$(\"#documentsTree\").fancytree({\n                extensions: [\"glyph\", \"table\", \"filter\"],\n                checkbox: true,\n                glyph: glyphs,\n                source: {\n                    url: getBlobsUrl,\n                    type: \"POST\",\n                    headers: security.getSecurityHeaders(),\n                    data: {\n                        id: vm.id\n                    }\n                },\n                filter: {\n                    autoApply: true,\n                    counter: false,\n                    fuzzy: false,\n                    hideExpandedCounter: true,\n                    highlight: true,\n                    mode: \"hide\"\n                },\n                quicksearch: true,\n                renderNode: function(event, data) {\n                    var titleWithHighlight = data.node.titleWithHighlight;\n                    if (titleWithHighlight != null) {\n                        var positionOfFirstSpan = titleWithHighlight.indexOf(\"\");\n                        if (positionOfFirstSpan > 0) {\n                            var titleBeforeSpan = titleWithHighlight.slice(0, positionOfFirstSpan);\n                            var titleAfterSpan = titleWithHighlight.slice(positionOfFirstSpan);\n                            if (titleBeforeSpan.indexOf(\"\") > -1) { //Contains\n                                titleAfterSpan = titleAfterSpan.replace(//g, \"\");\n                                titleAfterSpan = titleAfterSpan.replace(/<\\/mark>/g, \"\");\n                                data.node.titleWithHighlight = titleBeforeSpan + titleAfterSpan;\n                                data.node.renderTitle();\n                            } else {\n                                if (titleAfterSpan.indexOf(\"\") > -1) { //Contains\n                                    data.node.remove();\n                                    vm.numberOfResultsRemoved = vm.numberOfResultsRemoved + 1;\n                            }\n                        }\n                    }\n                }\n\n            }\n        });\n\n```\nI split the highlight title on the first <span> and remove the <mark> tags causing the problem. I also delete nodes that do not have the search string in the title and update the found count.\n```\n$(\"input[name=documentsSearch]\").keyup(function(e) {\n                var opts = {\n                    autoExpand: true,\n                    leavesOnly: false\n                };\n                var match = $(this).val();\n            if (e && e.which === $.ui.keyCode.ESCAPE || $.trim(match) === \"\") {\n                $(\"button#resetSearch\").click();\n                return;\n            }\n            vm.numberOfResultsRemoved = 0;\n            var numberOfResults = tree.filterNodes(match, opts);\n            $(\"button#resetSearch\").attr(\"disabled\", false);\n            $(\"span#matches\").text(\"(\" + (numberOfResults - vm.numberOfResultsRemoved) + \" matches)\");\n        }).focus();\n\n```\nNote that this is not perfect as there are some orphaned folders. I also have no idea as to how this will impact performance. See this as a starting point.\nmar10, many thanks for an awesome control.\n. Not perfect as searching for S , P, A or N on their own still breaks....\n. Updated the renderNode code. This allows searching for S , P, A or N and fixes js error due to removal of the node. Now just hide it instead.\nrenderNode: function(event, data) {\n                    var titleWithHighlight = data.node.titleWithHighlight;\n                    if (titleWithHighlight != null) {\n                        var positionOfFirstSpan = titleWithHighlight.indexOf(\"<span>\");\n                        if (positionOfFirstSpan === -1) {\n                            positionOfFirstSpan = titleWithHighlight.indexOf(\"<<mark>s</mark>pan>\");\n                        }\n                        if (positionOfFirstSpan === -1) {\n                            positionOfFirstSpan = titleWithHighlight.indexOf(\"<s<mark>p</mark>an>\");\n                        }\n                        if (positionOfFirstSpan === -1) {\n                            positionOfFirstSpan = titleWithHighlight.indexOf(\"<sp<mark>a</mark>n>\");\n                        }\n                        if (positionOfFirstSpan === -1) {\n                            positionOfFirstSpan = titleWithHighlight.indexOf(\"<spa<mark>n</mark>>\");\n                        }\n                        if (positionOfFirstSpan > 0) {\n                            var titleBeforeSpan = titleWithHighlight.slice(0, positionOfFirstSpan);\n                            var titleAfterSpan = titleWithHighlight.slice(positionOfFirstSpan);\n                            if (titleBeforeSpan.indexOf(\"<mark>\") > -1) { //Contains\n                                titleAfterSpan = titleAfterSpan.replace(/<mark>/g, \"\");\n                                titleAfterSpan = titleAfterSpan.replace(/<\\/mark>/g, \"\");\n                                data.node.titleWithHighlight = titleBeforeSpan + titleAfterSpan;\n                                data.node.renderTitle();\n                            } else {\n                                if (titleAfterSpan.indexOf(\"<mark>\") > -1) { //Contains\n                                    data.node.tr.classList.add(\"hide\");\n                                    vm.numberOfResultsRemoved = vm.numberOfResultsRemoved + 1;\n                                }\n                            }\n                        }\n                    }\n                }\nIn my app.css\n.hide {\n    display: none;\n}\n. Thank you for fixing this.. ",
    "luk156": "i use this workaround:\n``` javascript\n         var strip  = function(html) {\n                var tmp = document.createElement(\"DIV\");\n                tmp.innerHTML = html;\n                return tmp.textContent || tmp.innerText || \"\";\n            }\n// Default to 'match title substring (not case sensitive)'\nif(typeof filter === \"string\"){\n    // console.log(\"rex\", filter.split('').join('\\\\w*').replace(/\\W/, \"\"))\n    if( filterOpts.fuzzy ) {\n        // See https://codereview.stackexchange.com/questions/23899/faster-javascript-fuzzy-string-matching-function/23905#23905\n        // and http://www.quora.com/How-is-the-fuzzy-search-algorithm-in-Sublime-Text-designed\n        // and http://www.dustindiaz.com/autocomplete-fuzzy-matching\n        match = filter.split(\"\").reduce(function(a, b) {\n            return a + \"[^\" + b + \"]*\" + b;\n        });\n    } else {\n        match = _escapeRegex(filter); // make sure a '.' is treated literally\n    }\n\n\n\n    re = new RegExp(\".*\" + match + \".*\", \"i\");\n    re2 = new RegExp(filter, \"gi\");\n    filter = function(node){\n        var res = !!re.test(strip(node.title));\n        // node.debug(\"filter res\", res, filterOpts.highlight)\n        if( res && filterOpts.highlight ) {\n            node.titleWithHighlight = strip(node.title).replace(re2, function(s){\n                return \"<mark>\" + s + \"</mark>\";\n            });\n        // } else {\n        //  delete node.titleWithHighlight;\n        }\n        return res;\n    };\n}\n\n```\n. ",
    "sanjay-git": "Hello @mar10 \nI was looking at unescapeHtml()  which currently has this code:\nunescapeHtml: function(s){\n    var e = document.createElement(\"div\");\n    e.innerHTML = s;\n    return e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\n},\nIf we use this in the filter function, the re.test() might not work as expected in scenarios where node title is Hello </br> there and the unescapeHtml of this title would return 'Hello' instead of 'Hello there' and a match wouldn't work when input is something like 'the'. Same issue even when used with titleWithHighlight\nThanks!\n. Thanks for the quick reply @mar10 \nGreat work !!!\n. ",
    "AlexFree": "Hi, thanks for feedback.\ni use jquery 2.1.4.\nchildren.children is undefined, while children contains my data.\nhere is a link with debug info http://prntscr.com/92y1v3 (do not confuse children.children and my custom children.Data.Children)\ni also attached demo with source code, there is also JSON response in the bottom.\nNote that i use postProcess to convert my data to fit fancytree.\nif you need more info , i will provide.\ndemo.txt\n. ",
    "HobieCat": "Let me try to explain the use-case that made me add this event.\nLet's pretend I have a fancytree.php outputting the javascript that loads and displays the fancytree.\nIf I pass it a get parameter (fancytree.php?forceKey=123) where the value it's a node.key that node must be selected, expanded and activated.\nThe fancytree.php injects the get parameter in a javascript variable, let's call it forceKey and let its value be 0 if no $_GET['forceKey'] has been passed. Under this assumptions, I initialize the fancytree like:\njavascript\nvar forceKey = <?php echo isset($_GET['forceKey']) ? intval($_GET['forceKey']) : 0 ; ?>\n$('#tree').fancytree({\n    ...\n    init: function() {\n        if ( forceKey>0 ) {\n            // do a getNodeByKey and select, expand and activate the found node\n        }\n    },\n    beforeRestore: function() {\n        return forceKey==0; // ExtPersist will not restore, init will take care of selecting, expanding and activating\n    }\n    ...\n});\nThis use case I very simple and does not take care of node status, it can be quite easily extended to have beforeRestore return an object/array with select, expand and active booleans as a rough idea.\nPlease let me know if i can be of any help on writing this piece of code and excuse me for my bad english and if I didn't make myself clear: it's almost 01:30 of a quite hot Friday night here in Rome...\nCheers!\n. Excellent, thanks to you for your great job!\n. ",
    "yamini16": "I was including jquery 1.11.3 which was throwing this error. Once I removed it, everything worked fine. Really like the contextmenu plugin and the ease of using it on top of fancytree. \n. ",
    "grekpg": "I use \nRequireJS 2.3.2\njQuery v2.2.4 \njQuery UI - v1.12.1 \njquery.fancytree-all.js @version 2.3.0\nand still have this error \njquery.min.js:3 Uncaught TypeError: ((n.event.special[g.origType] || (intermediate value)).handle || g.handler).apply is not a function(\u2026). ",
    "scadox": "Hi Mar10, thank, i waiting this update for fix this. Thank you all.. i verry like this product ;)\n. ",
    "ksgsharma": "Hi I'm in urgent need for fixed table header using table extension. Could you please help me with an example.\n. Hi.. Sorry to bother you again. Could you please tell if there is such a possibility at all in fancytree.. That way I will try to come up with some round about solution.\n. Thanks so much, used the FloatHead plugin and it worked. \nCould you please help me on how to get the column name when click or dblclick on a table td \nusing table extension. Because Click and DblClick events are giving the entire node data but not the TD on which clicked.\n. ",
    "SzabZol": "Thanks!\nAnd how can I use this plugin under AngularJS?\nIf I use Angular scope variable on both of tree, my original problem is solved?\n. Ohh, I managed to turn off Fancytree tooltip, I removed jQueryUI Tooltip part, but Angular Tooltip still not working :(\nWhat could be the problem?\n. ",
    "djensenIncomm": "I should have clarified, I'm talking about the folder one level higher. For example, suppose you have a folder with some children but the folder hasn't been opened yet.  The situation will look like this:\n+ <ICON> TITLE\nGraphically, there are three things: 1) the '+' sign, 2) the custom icon and 3) the title.\nWhen the user clicks the '+', the \"opts.icon\" callback is only executed for the children and the folder remains the same.\nIn my case, I've got different types of \"folders\". For example, I've got a \"Business\" folder and I've also got a \"University\" folder.  Each has a different icon (a building and university), but because of the above issue I can't have an open/closed custom icon.\nTake a look at this screenshot, notice how the University folder isn't expanded yet:\n\nNow I will expand the University icon and you'll see that I can't have a different version of \"open\":\n\nI hope you understand what I'm trying to explain.  In a nutshell, when you expand a custom folder, only the children of that folder have the \"icon\" callback function applied, and the parent isn't evaluated at all.  The parent gets evaluated at line 6615 (version 2.15.0) to check for expanded, but since the \"-custom\" css is in-place a match isn't found.\nAny ideas? \n. As a total side question: Have you considered making an AngularJS directive/module?\nYour FancyTree library is great; you've done a nice job, and combining this with AngularJS would be even better.\nI thought about trying it myself, but there's just too many functions/attributes to account for.\n. As you probably know, AngularJS apps are usually single page apps meaning that the entire application loads at once with a header, footer, and body, but the body is dynamic; meaning that different HTML pages are swapped in-and-out.\nIn my case, I click a button on page No. 1 which tells AngularJS to load page No. 2 and page No. 2 contains a Fancytree.  This parts works fine. The problem is, below the Fancytree is an input textbox with a submit button where the user can enter different search criteria. When the user enters new search criteria and clicks the submit button, AngularJS perform a new REST service call and returns the results to the very same page (page No. 2), but this time Fancytree will give me an error saying: \"Recursive load request #1457564565382 while #1457564565375 is pending\" and \"Ignored response for obsolete load request #1457564565375 (expected #1457564565382)\".\nI hope this makes sense. Basically I'm returning to the very same page (AngularJS calls it a \"route\") with new search results.\nAny ideas?\n. I've created a Plunker which is very close to my situation (using both AngularJS and Fancytree).\nIt works fine, but doesn't make a REST service call (instead it uses hard-coded data). I wonder if this is a clue that the JQuery AJAX call is somehow not releasing?\nThe Plunker is: http://plnkr.co/edit/RxulvCwpJPhssz01ELSK?p=preview\nIn the Plunker, every time you click the \"Goto Page1\" button, it will \"reload the route\" (Angular term).\n. ",
    "dparreno": "Hi! I currently have the same issue. Can you give me a sample on how you managed to get it to work? Thanks!\n. That helped a lot! Thank you very much!\n. ",
    "u-874": "Fixed merge error\n. Fixed lint error.\n. ",
    "Luxato": "Thanks for fast response @mar10 \nI'm still not sure how to use it instead of filterNodes.\nI replaced this to filterBranches, but it doesnt worked. When I filter something I need to see all nodes in that directory. \n\nand why is there this clicable arrow if there shouldnt be any nodes under it.\n\nThanks :}\n. ",
    "bst27": "This seems to depend on the browser used and maybe also on the system load. I was able to visit about 9600 and even sometimes 9650 nodes in Google Chrome 48 but not in Firefox 44. \nIn my test case each node had just one child.\n. I really mean 9600 levels deep. Imagine a parts list of a car. Of course no one would dive into this branch till the end but it is common that a node on level 1 or 4 or 10 (...) is dragged and dropped onto another node to manipulate the existing parts list. At least this is the scenario I try to use the FancyTree in.\n. ",
    "mgwalm": "Thanks. I tried the latest and it appears to be good.\n. ",
    "vinothwindows47": "@mar10 the above mentioned bug fixed ?\n. @mar10 the above mentioned bug fixed ? is it hard to fix it ? \n. ",
    "ericf01": "mar10-\nThanks for the update.  Given that we strongly believe in showing an animated .gif during Ajax operations, can you recommend any way to display the loading.gif to the right of the \"Loading...\" text message in the status node?\nAlso, can you recommend a method (API) that we can use to replace the \"Loading...\" text with a phrase appropriate to our system's currently-displayed language?\n. Hi Martin-\nWe had no luck with the earlier commit, but the latest commit  https://github.com/mar10/fancytree/commit/ad01fbd63c74f4a215d2b22942e6c19c0c726b57 ad01fbd does restore the missing icon on temporary system nodes like loading.  \nIt turns out the appearance of the doc icon instead of the loading spinner gif was caused by using the xp skin with the 2.15.0 version.  Switching to the skin-win8 solved that issue.\nFinally, we were able to translate the \u201cLoading\u2026\u201d message to other languages using the strings approach that you suggested.\nThanks for your quick response to my issues.  We appreciate both the capabilities and quality of fancytree.\nBest regards,\n-Eric\nFrom: Martin Wendt [mailto:notifications@github.com] \nSent: Friday, March 18, 2016 3:34 AM\nTo: mar10/fancytree\nCc: ericf01\nSubject: Re: [fancytree] Missing progress gif when lazy loading top level menu (#575)\nThe gif should be back again, this was a regression bug. Could you test it?\nConcerning translation: you can use the stringsoption: \nstrings: {\n        loading: \"Loading&#8230;\",\n        loadError: \"Load error!\",\n        moreData: \"More&#8230;\",\n        noData: \"No data.\"\n    },\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly or view it on GitHub https://github.com/mar10/fancytree/issues/575#issuecomment-198240239   https://github.com/notifications/beacon/ARD3JwqOJPD7leuMLMZUo3FhGYRyaEZlks5pulV-gaJpZM4Hyb2a.gif \n. ",
    "kungfuenglish": "Apologies for the slow response, I've been on holiday.\nThanks for the tip on tabindex. I did comment out the following lines in jquery.fancytree.js and now it works!\n// this.$container.attr(\"tabindex\", this.options.tabbable ? \"0\" : \"-1\");\n...\ntabindex = \"\"; // opts.titlesTabbable ? \" tabindex='0'\" : \"\";\n. I modified the log messages in dragDrop: function(node, data) so the code outputs also node.tree's name and I see that node.tree is actually the destination tree and data.otherNode.tree is the source tree. Is this right?\n. Thanks for this clarification. \n. ",
    "judian": "Thanks,\nIt is useful for me.. ",
    "SuperMario77": "Thanks for looking into this issue. You wrote in the wiki that you don't want to fix the selection coming from server. But actually it is not difficult for you to fix the selection, because you already have all functions. In my very small example above, I think I have no inconsistent selection definition from server, because 'selected' is only set to 'true' for node 'B'. IF I also set the node 'A' and node 'C' to 'selected: false' then you are right, this will be a inconsistent selection.\nIn my use case it is very important to not save all the currently selected leaves in my database, but the node which is the parent of these leaves. In that way I can add leaves afterwards to this parent and these leaves are automatically in the selection od the parent.\nYou could walk the tree down and call 'fixSelection3AfterClick' for each node which has defined 'selected=true'. After complete walking you could call 'fixSelection3FromEndNodes' to fix tree from leaves to root.\n. ",
    "kinow": "Had similar problem and @SuperMario77 just saved me some hours of debugging and writing code.\nThanks!!!\n. ",
    "thamaraiselvam": "Thanks @SuperMario77 it works. :100: \n. ",
    "bogdanez": "@SuperMario77 Thank you for your solution, but it doesn't seem to work everywhere. In my Fiddle the note 4.2 is set to be selected using your method, but it doesn't. Can you please take a look?\nhttps://jsfiddle.net/x36krqL6/117/ \nUPDATE: It wasn't working with JSON notation, but when I changed it to data- notation, it worked. Example: https://jsfiddle.net/x36krqL6/119/\nI hope this helps someone :). ",
    "DumboJet": "OK. This addition seems to be working:\n...\n            createNode: function(e, data) {\n                var n = data.node;\n                n.plainTitle = n.title; // Keep this for later use...\n                n.setTitle($('<div/>').text(n.title).html());\n            }\n            ...\nState any objections you may have. :)\n. ",
    "namhh": "what is the solution?. ",
    "titovanton": "Sorry,\nwhen i've set it up for u on jsfiddle, there r no errors. Strange...\nI use Meteor for my project, also I've installed fanceetree with npm install jquery.fancytree. Mby there is some version mess or something. Anyway, it is stupid, that i can not reproduce the warning raise for u... I will try set it up again localy with versions i used for jsfiddle example.\n. Ok, it was old version behavior for sure. Thank you for response :)\n. Unfortunatly our online example was changed since I wrote the issue.\nI will make one for u after this project got done. The current solution for my issue is reinit tree on data changes instead using .reload. \n. ",
    "jasperkrijgsman": "The slowdown I encountered was primarily evident in the nodeRenderStatus function. I didn't notice any slowdown due to the call to clearFilter. I think node.spanis never undefined there, but I'm not sure.\nWe had a tree containing 1500 nodes. Passing in a null context meant a lot of lookups for \"span.fancytree-title\" in the whole document. 70% percent of the time was spend in .filter(). This took about 2 seconds.\n$(node.span).find(..) will return immediately without calling find when node.span is undefined.\n. That seems like a good solution, thank you.\nWould you like me to add that to this pull request?\n. ",
    "Cryde": "It is too bad that we can't include this lib easily via NPM in a process build via Brunch for instance.\n. ",
    "deepgalley": "Ya we have fixed by adding rerender= true in fancytree.js file \njs\ncase \"source\":\n      //callDefault = false;\n      rerender = true;\n   this.tree._callHook(\"treeLoad\", this.tree, value);   \n   break;\n  }\n. ",
    "KotKarol": "@mar10 It's hovering over the OptionSet2, near the top edge. I kinda fixed this issue, by returning 'over' in the dragEnter function instead of 'true'.\n. ",
    "sbespaly": "No. that would work only for tree without wide extension. If I add left margin to the tree, that would move wide selection from the right. And when I apply margin to first LI element in tree expanders icons and check boxes are positioned correctly except node title element. It holds the same position. Because wide extension doesn't handle this situation. \n\n. Hi.\nDo you have any plans for this issue ?\nIf not and if it's not complicate to fix. I can fix it. What do you think about that ?\n. You can see the issue even in your wide example\nhttp://wwwendt.de/tech/fancytree/demo/index.html#sample-ext-wide.html\nJust select Win8 xxl skin and try to expand\\collapse any node. When animation in progress you can see that node label is jumping to the left.\nP.S. I prepared fix for this issue, not perfect, but works for me. Fix it by adding additional parameter into wide extension options, which will be used for animation styles generation.\n. ",
    "Toykan": "Fancy tree expander isn't working. What would be the reason? Gets the following error.\nUncaught TypeError: Cannot read property 'replace' of undefined\nDouble-click on the folder , but it doesn't open when click the arrow on the left. Hello,\nI click on the arrow on the left and I get the error in pic2. Don't have\nany problems when double clicked\nI would really apreciate if you help\nThank you\nMartin Wendt notifications@github.com, 15 Kas 2018 Per, 23:26 tarihinde\n\u015funu yazd\u0131:\n\n@Toykan https://github.com/Toykan how is this related to this issue and\nthe wide extension ?\nPlease provide more information on how to reproduce the problem -\npreferably in a new issue\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/616#issuecomment-439178651,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/APr4MYRdj9mOD72HrNOXUJu94MqUCXqAks5uvc4QgaJpZM4JJL4e\n.\n. \n",
    "jabberwo": "Hi,\nYes I tried \n as well. \u00a0But the & was always escaped so you get \"&#10;\" or \"&#13;\".\n. ",
    "cataclysmuprising": "I am facing this issue right now. What would be the solution for this issue ? I was coppied the code from the link http://wwwendt.de/tech/fancytree/demo/#sample-multi-ext.html.. ",
    "MAzeemSarwar": "Sorry If I explained in difficult way.\nWhen I expand the tree from arrow it start open the html link which is linked with folder not with arrow,\n. ",
    "bbrala": "I would suggest it be updated, the version used in your plugin is from 2013, the contextmenu plugin had been made quite a lot better in the last year :)\n. ",
    "jlaustill": "This is highly encouraging!  My setup is being compiled by browserify, and is a knockoutjs app.  So I actually have quite a lot going on that could interfere with it.  One thing I notice right off the bat is your example uses jquery 1.12, and I'm using 3.0.  so I'm going to guess that is a place to start.  What is the newest version of jquery known to work?  I can start by testing that.\n. Ok, thank you so much for the plunker!  You helped me track this down.  My problem was that I was calling this twice at the same time because of my knockout binding in my viewmodel being wrong.  I'm sorry for wasting your time, but thank you for helping!\nAlso, downgrading to jquery 1.12.1 did not help, or change anything, so I will try upgrading back to 3 and see if it works, but whether it does or doesn't, this issue is closed.\n. Actually, this was such a STUPID mistake on my part, I'm not even sure it's worth looking into lol.  I would love to put my project on your gallery.  It's still in alpha and we are working on it daily, but I would welcome any testers or pull requests on it whatsoever.\n. ",
    "CJWagner72": "Actually found the issue -another piece of code was calling a reload of the tree while the initialize was taking place.  Cleaned this up and now all is good.  Thanks for the help!\n. ",
    "crazygeek69": "Please check now. Sorry ,forgot to update the fiddle\n. Did you get a chance to look?\n. ",
    "ErikVeland": "I see issue #577 covers this as well. Adding,\ntabindex: \"\",\ntitlesTabbable: false\ndoes indeed fix it, but it breaks keyboard navigation as noted. Any solutions for this, or can I disable tabindex for IE only?\n. ",
    "satish1020": "Di you guys find the solution.Expanding/Selecting tree view is not firing the event in ie11 .It is working in Chrome.I am using angular typescript\nnodeSelected(node: any) nodeSelected(node: any) {\nthis.selectedNode = node;\n}\n                    . ",
    "powrsurg": "Those keyboard shortcuts are the basis behind what ARIA was aiming for with 1.0. The ARIA 1.1 best practices actually define more:\nhttps://www.w3.org/TR/wai-aria-practices-1.1/#TreeView\nIf you have questions on this, feel free to join https://gitter.im/w3c/a11ySlackers where people that actually work on the spec hang out to discuss issues.\n. Also, the page you just linked isn't the markup we receive when setting things. What we've seen was closer to the B example from the Accessible Culture resource. When we added an aria-labelledby on the tree, and added aria-activedescendant (and potentially something else, I do not recall my work yesterday nor can access it until I get in on Monday) we were able to fully work with this library with NVDA, but VoiceOver doesn't seem to work. This seems odd since VO worked with the example pages for the library. We were still investigating this at the end of the day on Friday.\n. I hadn't gotten to spend time looking at this during the week as we had spent time deploying code this week. I had just tested the sample-aria.html page from the branch linked above. It still does not work well with the latest NVDA and Firefox. It does not read off the current selection when the arrow keys are used to move around the tree. The work around for this that we had found was to set aria-activedescendant on the element with role=\"tree\". The value of this attribute must be the id of the element receiving focus from moving with the arrow keys.\n. NVDA needed the role=\"treeitem\" on the span that receives the aria-activedescendant on the top example (the <ul>, not the <table>, else it read \"text frame\". For some reason the bottom worked fine as-is.\nIf I recall correctly from our testing, VoiceOver was terrible for us in El Capitan, but worked fine in Sierra.\n. ",
    "Khorkhe": "ah I'm sorry, i forgot to put a link in my frustration.\nHere is the repo: https://github.com/nathanial/react-fancy-tree\nIt has no documentation and is not keeping up-to-date with the releases.\nHe does have an example I used to get up to where I currently am (pretty rapidly too). \nHowever, the extensions he used (edit, dnd, etc...) i was not able to reproduce, but the basic tree display is working with static nodes.\nMaybe his code can be inspiring to provide a native React component option, directly in this repo? Albeit not fully working, his code is less than 150 loc.\n. alright I looked a bit into it.  If i'm not mistaken, the tree must be destroyed and recreated when a new set of nodes are passed async.  Looks like this might need more effort than I thought.\n. ",
    "rodrigorrch": "Is it possible to update only the source and not all ?\nlike the method draw() of datatables ?!. ",
    "webbird": "Should, but in fact it isn't.\nMy workaround is to render the tree (ul) on server side and let Fancytree read it from the HTML, but this \"solution\" is not desirable.\n. Forgot to mention:\njQuery UI - v1.11.4\njQuery v2.1.3\n. I'll try. \n. ",
    "clozinski": "Are you looking for something like blogory.org?. I love it. \nI think that there is too much noise on the web.  Things needs to be organized as a hierarchy.  That can be expanded or contracted as needed. \nTake a look at how I am doing it. \nhttp://WhyPoland.info\nPersonally I am amazed that way more people are not using FancyTree. \nLet alone ZODB.\nChris\n. \nI did a quick google search, and looked at the source code, but I am still not sure what the debug module does. \nI presume that is a US patent?\nSoftware patents are not valid in the EU.\nI believe that the author is in Germany.  Is that correct?\nWarm Regards\nChris. ",
    "TomThak": "Something like this. \nI have moved forward with it, I found, how to add click events, how to read node.data object, while specific data is clicked. I also found init method of tree. Now I need to find out, how to say to tree \"expand and highlight\" on init. If I save into cookie variable on click event some Key value, how can I expand and highlight (active) tree node on Tree Init. What would be the selector? \n$(\"#tree\").fancytree({\n  init: function(event, data){\n  // init tree\n  // expand selected\n  var myselnode = my previous selected node from cookies\n  myselnode.setActive();\n },\nSomething like this... . ",
    "SPNexus": "Wanted to say I'm also experiencing this issue.  When filtering, the  element for the title seems to be overwritten, and adds in the  tags when a match has been found.  The problem is that it wipes out the  tag that was originally set up.  \nUpdate:  I figured out a way to handle this by using the click method.  I pass in the target and href in my data array, and when the node is clicked, it checks to see if there is href in the node data.  If there is it opens a new window using the link provided in node.data.href.\nThe reason why this works is even though the title gets rewritten when being filtered, the node data doesn't change, and you just have to access it when you click on a file name.. ",
    "tangalor": "I hope you can value my fix.\nMy problem was that when I selected a paren, this event changed the state of every child node, included every disabled child node.\nI want to preserve the state checked/unchecked of every disabled child node.. ",
    "herbix": "Hi, I encountered this bug, too.\nIn http://wwwendt.de/tech/fancytree/demo/#sample-ext-glyph-awesome5.html, expand More... node and click another node quickly. The loading icon will replaced by normal icon > before children are actually loaded.\nThis bug happened on both MS Edge and Chrome. I didn't test other browsers. It may be related to glyph because I didn't repro it in windows skins.. Hi,\nWhen I uncomment these two lines: https://github.com/mar10/fancytree/blob/master/src/jquery.fancytree.glyph.js#L230 , the bug is fixed.\nNot sure whether there's any side effect.. ",
    "meterlongcat": "Thanks for the prompt reply and suggestion. I will look into using select mode 2, and also have a look at the linked pages.. Turns out this is a duplicate of #531 , but considering it wasn't fixed there I'd like to request it still be fixed under this issue.\nMany Thanks,\nMLC. ",
    "beavernew": "Ok\nhttps://embed.plnkr.co/DHOVY8ZPF7yqr7z3zl0c/\n\nbut in my first example, no images, and links after filtration\nIn the second example, after filtration link not clickable\n. Thank you. \nHow to change the behavior of the expander click ? \nI want to list not open after clicking on the expander. List must only be opened when you click on a node\n. ",
    "cleptric": "I always got the ID (custom data property) of the node under my just moved node.. @mar10 https://jsfiddle.net/dbno5ncf/4/\nSo, when I drag Child 1 above Node 1, node should be the root node, not Node 1. Well, then the term targetNode is very misleading.. ",
    "evil-shrike": "Yes, I use \"table\" plugin, lazy loading with my own loader and custom icons. \nMy \"loader\" manages nodes states manually. Nodes' icons are returned as data (e.g. from server) and are set into ui-nodes at the moment of adding them into the tree. Then during re-renders they should not be changed by \"glyph\" plugin. As icons which set glyph plugin are about collapsing/expanding and loading/error states, not about node's data.\n. I have a component \"presenter\" which wraps UI-control Fancytree. That presenter has viewmodel - Tree. Tree has its own nodes. That nodes are used as model for UI-nodes of fancytree:\nts\ncreateUiNodeData(node: Tree.Node): Fancytree.NodeData {\n    let that = this,\n        state = node.state(),\n        isLazy = state === Tree.NodeState.initial || state === Tree.NodeState.loading;\n    return {\n        title: \"\", // title will be set via binding in _onUiCreateNode\n        lazy: isLazy,\n        unselectable: !that.viewModel.isNodeSelectable(node),\n        data: { model: node },\n        children: isLazy ? null :\n            node.children().all().map((childNode: Tree.Node) => {\n                return that.createUiNodeData(childNode);\n            })\n    };\n}\nPresenter subscribes on createNode event of fancytree.\nIn the event handler I set up binding for node title, icon and css-class based on node's model.\nIt's our custom mechanism but in general it's just a subscription on node's model's \"change\" event: when node's model changes ui-node will be updated. To abstract away from how node's model and ui-node are bound Presenter uses its viewmodel's (Tree) methods:\n getNodeTitle - return string for ui-node title from ui-node\n getNodeIcon - return string icon name from ui-node\nPresenter converts an icon name returned by getNodeIcon to css-class. E.g. \"user\" will be \"x-icon x-icon-user\". That css class is set into ui-node's child element with .fancytree-icon selector.\nSo node's icons depends on data and they are dynamic. For example after node's model was edited (e.g. set \"archive\" flag for a \"user\") its icon will change.\nAs node icons are managed by node's model (via binding) they should not be touched by fancytree and glyph plugin.\n. @mar10 JSON.parse works fine since IE8 (including)! Just press \"Show All\" on caniuse to see all versions. You need $.parseJSON only if you want to support <=IE7\n. Ok, will wait ). initHelper definitely works in this scenario, thanks you. sorry for missing the obvious thing.. I thought about positive values, but if before/after offsets are evaluating as a sum of two options (dropMarkerOffset+dropMarkerOffsetAfter) then it'd be unclear for me what to specify as dropMarkerOffsetAfter: negative value (-16) or positive (+16).\nI think I'd make sense only if we'll have two separated options (offsetOver/offsetInsert) which won't be summed.\n\nThis offset will always be the same for 'after' and 'before' so I suggest to combine it into one single option.\n\nOk\n\nAlso we could use two positive defaults:\ndropMarkerOffsetX: 8\ndropMarkerOffsetIndentX: 16\n\nI'm sorry, I don't understand, why 8/16? They are -24 and -16 currently, aren't them?\n. ",
    "Hankli": "My JSON data is a file list that loads initially with collapsed folders. I then manually expand the folders (with ext-persist active). I reload the page and it loads with the folders collapsed again. I would have expected the folders to stay expanded - the expanded ones aren't being saved to the session.. https://jsfiddle.net/Hankli/9r0bcbq6/1/\nThanks for looking into this for me by the way!. Thanks so much!. The <span> is being removed BEFORE I edit the title. Somewhere between the ajax response and the click event.. I used the extraClasses method instead and it's working great, thanks.. Agreed it would be interesting to investigate, especially because I couldn't see any pattern when I debugged.\nClick is the only callback I have implemented, and I am using 3 plugins: ext-persist, ext-dnd, ext-edit.\n````\n$(\"#fileTree\").fancytree({\n        extensions: [\"persist\", \"dnd\", \"edit\"],\n        source: {\n            url: window.getInstallLocation() + \"GetFiles\",\n            data: { modelId: window.model.Id },\n            cache: false,\n            type: \"GET\"\n        },\n        persist: {\n            store: \"auto\"\n        },\n        generateIds: true,\n        icon: true,\n        click: function(event, data) {\n            //This is where I noticed some of the spans had been stripped from title\n            console.log(data);\n            var node = data.node, targetType = data.targetType;\n            var file = node.data;\n            openFile(file);\n        },\n        dnd: {\n            autoExpandMS: 400,\n            focusOnClick: true,\n            preventVoidMoves: true,\n            preventRecursiveMoves: true,\n            dragStart: function(node, data) {\n                return true;\n            },\n            dragEnter: function(node, data) {\n                return true;\n            },\n            dragDrop: function(node, data) {\n                //Removed irrelevant code\n            }\n        },\n        edit: {\n            adjustWidthOfs: 4,\n            inputCss: { minWidth: \"7em\" },\n            triggerStart: [\"f2\", \"dblclick\", \"shift+click\", \"mac+enter\"],\n            beforeEdit: function(event, data) {\n            },\n            edit: function (event, data) {\n            },\n            beforeClose: function(event, data) {\n                if (data.originalEvent.type === \"mousedown\") {\n                    data.save = false;\n                }\n            },\n            save: function(event, data) {\n                if (data.save) {\n                    //Removed irrelevant code\n                    return true;\n                }\n        },\n        close: function (event, data) {\n        }\n    },\n});. I reverted my repo to when I was having this issue and can't seem to reproduce it. I will let you know if I can, otherwise must have been something to do with caching or my db. Thanks for your help!\n\nEdit: I think it was because when I was editing the FileName I wasn't updating the FilePath as well. So when I clicked the files, it seems like the display title was updating using the FilePath and stripping the span (not entirely sure how the title being set works).. ",
    "west443": "```html\n<!DOCTYPE html>\n\n\n\nFancytree - Example\n<script src=\"../lib/jquery.js\"></script>\n<script src=\"../lib/jquery-ui.custom.js\"></script>\n\n<link href=\"../src/skin-win8/ui.fancytree.css\" rel=\"stylesheet\">\n<script src=\"../src/jquery.fancytree.js\"></script>\n\n<!-- Start_Exclude: This block is not part of the sample code -->\n<link href=\"../lib/prettify.css\" rel=\"stylesheet\">\n<script src=\"../lib/prettify.js\"></script>\n<link href=\"sample.css\" rel=\"stylesheet\">\n<script src=\"sample.js\"></script>\n<!-- End_Exclude -->\n\n\n$(function(){\n    // Initialize the tree inside the <div>element.\n    // The tree structure is read from the contained <ul> tag.\n    $(\"#tree\").fancytree({\n        checkbox: true,\n        expand: function(event, data) {\n            var node = data.node;\n            $.get( \"ajax-tree.json\", function( data1 ) {\n                node.removeChildren();\n                node.addChildren(data1);\n               }); \n        },\n\n    });\n});\n\n End_Exclude \n\n\nFancytree API\n\n        Demonstrate some Fancytree and FancytreeNode API methods.\n        \n        See the API Tutorial\n        for details.\n    \n\nSkin: \n\n<div id=\"tree\">\n    <ul>\n\n        <li id=\"id3\" class=\"folder\">Standard Folder with some children\n            <ul>\n                <li id=\"id3.1\">Sub-item 3.1\n                <li id=\"id3.2\">Sub-item 3.2\n            </ul>\n\n\n    </ul>\n</div>\n\n<div>Active node: <span id=\"echoActive\">-</span></div>\n<div>Focused node: <span id=\"echoFocused\">-</span></div>\n<!-- Start_Exclude: This block is not part of the sample code -->\n<p id=\"sampleButtons\">\n</p>\n<hr>\n\n\n\n. I would like to use the data from ajax-tree.json to re-populate children under id=\"id3\", but \"Standard Folder with some children\" cannot keep opened if I click on it.js\n\n$(function(){\n    // Initialize the tree inside the <div>element.\n    // The tree structure is read from the contained <ul> tag.\n    $(\"#tree\").fancytree({\n        checkbox: true,\n        expand: function(event, data) {\n            var node = data.node;\n            $.get( \"ajax-tree.json\", function( data1 ) {\n                node.removeChildren();\n                node.addChildren(data1);\n               }); \n        },</p>\n<pre><code>});\n</code></pre>\n<p>});\n\n.js\n\n$(function(){\n    // Initialize the tree inside the <div>element.\n    // The tree structure is read from the contained <ul> tag.\n    $(\"#tree\").fancytree({\n        checkbox: true,\n        expand: function(event, data) {\n            var node = data.node;\n            node.removeChildren();\n            node.addChildren({title: \"new 1\"});\n        },</p>\n<pre><code>});\n</code></pre>\n<p>});\n\n```. \"new 1\" cannot stay if I click on it. ",
    "bornskeptical": "It does not seem to make a difference.\nI've attached another screenshot of the data after postProcess - in expanding \"data\" the select is set to true but the FancytreeNode selected is still undefined.\n\n. Quick update, I've got it working much better by commenting out the fixSelection3AfterClick() and adding data.response[i].selected = data.response[i].select; to postProcess. \nIf I leave fixSelection3AfterClick in loadChildren the selected checkboxes remain unchecked.\nI've still not got the partsel boxes displaying. Should I create a new issue or is it related enough to just use this one?\n. ",
    "sergevic": "I use version 2.18 with following requireJs configuration (I removed another lines for brevity) and it works\npaths: {\n    jqueryUI: 'jQueryUI/jquery-ui-1.11.4.min',\n    fancyTree: 'fancytree/jquery.fancytree.min'\n}\nshim: {\n        \"jqueryUI\": {\n            deps: [\"jquery\"],\n            exports: \"$\"\n        },\n        \"fancyTree\": {\n            deps: [\"jqueryUI\"],\n            exports: \"$.ui.fancytree\"\n        },\n}\nAs I'm not using directly jQueryUI so I tried to utilize new jquery.fancytree-all-deps.min.js from v2.24 with following configuration to remove this dependency\npaths: {\n    fancyTree: 'fancytree/jquery.fancytree-all-deps.min'\n}\nshim: {\n        \"fancyTree\": {\n            exports: \"$.ui.fancytree\"\n        },\n}\nbut it fails with \nUncaught Error: Fancytree assertion failed: Fancytree requires jQuery UI\nWhat could be a reason? May be because jQueryUI code (line 17 in  jquery.fancytree-all-deps.min.js) executed in context of requireJS module, but $.ui expected to be in global scope. \nIt is what the configuration normally does by exporting $\n\"jqueryUI\": {\n      deps: [\"jquery\"],\n      exports: \"$\"\n}. I tried to move jQuery UI (lines 12-18) to the top above line 1. As result code: \ndomObj.fancytree(treeOptions);\nthrows exception\nUncaught TypeError: domObj.fancytree is not a function\nI have try to check in console availability of $.ui and $.ui.fancyTree:\n$.ui\n{version: \"1.12.1\", position: {\u2026}, keyCode: {\u2026}}\n$.ui.fancyTree\nundefined\nI have added log to console to debug intialization\n/*! Fancytree Core */\nconsole.log(\"I'm here\");\n!function(a,b,c,d){\"use strict\";function e(b,c).......\nInteresting that I can see the string logged if jQuery UI stay where it was (lines 12-18), but I can not see the string logged if jQuery UI moved to lines 1-6. . Sure, copied both comments to #773. I tried to move jQuery UI (lines 12-18) to the top above line 1. As result code: \ndomObj.fancytree(treeOptions);\nthrows exception\nUncaught TypeError: domObj.fancytree is not a function\nI have try to check in console availability of $.ui and $.ui.fancyTree:\n$.ui\n{version: \"1.12.1\", position: {\u2026}, keyCode: {\u2026}}\n$.ui.fancyTree\nundefined\nI have added log to console to debug intialization\n/*! Fancytree Core */\nconsole.log(\"I'm here\");\n!function(a,b,c,d){\"use strict\";function e(b,c).......\nInteresting that I can see the string logged if jQuery UI stay where it was (lines 12-18), but I can not see the string logged if jQuery UI moved to lines 1-6. . ",
    "Climberdav": "Ok I answer myself, \nI'm using REST generator Voryx for Symfony. And in default value of cget I have \"limit = 20\", changing it resolve my issue.\nSorry. ",
    "tsohr": "Hi @mar10 , Done that updated for the plugin code and example. Thanks!. OK, That's good news. Looking forward to see the release 2.23!. Oh, you're correct. Changing handler(node) to return handler(node, evt); + handler's return false is much simpler and flexible. \nOne more request, a single line of comment on jquery.fancytree.hotkeys.js or on your example browser for about how to write hotkey handler function will clear this issue and much appreciated. And yes being an explicit plugin option would be good too.\nReject this change please and your answer is much better. . ",
    "TheMightyPope": "Is there a fix for this? Just happened to me using latest JQuery 3.2.1, and context menu 2.25.0. ",
    "soul-coder": "Hi Martin,\nI didn't include autoScroll: true but it seems like making tabindex = \"\" is solving the issue. I will test it further and get back to you.\n. ",
    "ldetomi": "I already seen this kind of behaviour (\"obviously\" at the moment I am unable to find it :-) ).\nAnyway, like actually focusing one specific node scrolls the tree to display it in the container, maybe could be interesting if this could make also an horizontal scrolling when name is too long and it overflows container's width. Another event could be expanding a node, showing its children. If they overflows container, horizontal scrollbar should move to try to show (if possible) the entire longest name reducing margin from left container boundary. ",
    "aleventhal": "Nice to hear from you.\nI know about enableUpdate, but it won't help in this situation as I'm\nreally adding one new child with grandchildren already attached to it.\nIt makes sense that tables would degrade when they get large. That's why,\nas far as max # of items, I decided to limit the number of top level items,\nwhich are currently all collapsed by default, to 20. However, each of those\ncan seem to have a few thousand invisible items. When I profiled the code,\nit appeared that my theory that rerendering all of the siblings of the\nadded child was causing the biggest performance issues, and my fix did seem\nto make a difference.\nRegarding ARIA, I agree, let's work together on this. It's a great start,\nespecially for regular trees. I'll open a separate issue for treegrid.\nOn Wed, Mar 22, 2017 at 4:52 PM, Martin Wendt notifications@github.com\nwrote:\n\nCool, thanks for the feedback!\nI am always very interested in performance improvements and I will try\nthis.\nThere already is a benchmark suite, in case you didn't notice:\nhttp://wwwendt.de/tech/fancytree/test/unit/test-bench.html\nBtw. if you are adding entries in bursts, you could try to temporarily\ndisable updates using tree. enableUpdate()\nhttp://wwwendt.de/tech/fancytree/doc/jsdoc/Fancytree.html#enableUpdate.\nWould be interesting to see a live demo of your tool.\nSince you are talking about using Fancytree for logging: how many nodes\n(visible and total) are you expect to have max.?\nBeyond any optimizations, in my experience browser performance degrades\ndrastically for large tables (event if Fancytree is not involved).\np.s.\nSince you seem to be an ARIA expert: if you have suggestions to improve\nthe markup, let me know. I tried to follow the guidelines, but I am not\nreally sure if the current implementation\nhttp://wwwendt.de/tech/fancytree/demo/sample-aria.html offers the best\nuser experience (on different browsers or screen readers).\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/708#issuecomment-288535841,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZiJ5TrvIXt2sYrMIMIY8G2POBfs8ks5roYokgaJpZM4Mlfor\n.\n. Right, I'm talking about several seconds delay for each additional child\nbeing added. Sounds like I'll need to get you more info.\n\nWhat happens if the top level nodes are not collapsed? I know that this is\ngoing to be slow partially due to it being a huge table in general, and\nthat's a lot for the browser.\nAaron\nOn Fri, Mar 24, 2017 at 3:39 AM Martin Wendt notifications@github.com\nwrote:\n\nThanks, I will look into it.\nIt would be good to have a benchmark to compare optimization results.\nI tried to create 500x500 nodes (500 nodes top-level, 250k overall), the\ntop-level nodes being collapsed.\nI measured ~2-3 seconds. Adding another top-level node took ~20ms.\nEven if I did not yet apply your patch, that seems to be faster than the\neffect you are describing?\nI assume, timings may be inacurate, because the JS code is done, but the\nbrowser still has not finished rendering. I am going to experiment a bit\nmore...\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/708#issuecomment-288953881,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZoId6Y-LL0d_kusErTmjLDar0A6_ks5ro3NDgaJpZM4Mlfor\n.\n. Hi Martin,\n\nI uploaded a PR for something else related to click-to-focus.\nI'm ready to begin this PR, but I wanted to mention that I agree that this\nis really only a problem when nodes are expanded.\nI see this comment in the jquery.fancytree.js in two places\n* If a node was created/removed, node.render() must be called on the\nparent.\nMy thinking is that this is necessary in order to rerender the\ncollapse/expand icon. Basically when we go from 0 children to some, or\nvice-versa, Fancytree will have to toggle whether the icon is visible. I\ntried looking back into the code to see if this was why, but I couldn't\nfigure it out.\nThe reason my patch is ok, I think, is that the root node isn't rendered\nanyway, so there is no collapse/expand icon.\nWhether the parent of the added/removed child is the root node or node or\nnot, I don't think rendering all the siblings of the current item should be\nnecessary. Doesn't it seem like enough to render the parent, but not to do\nso recursively?\n\nAaron\n\nOn Sat, Mar 25, 2017 at 10:57 AM Martin Wendt notifications@github.com\nwrote:\n\nI added a benchmark to the suite\nhttps://github.com/mar10/fancytree/blob/master/test/unit/test-bench.js#L351\nthe seems to better simulate the case.\nDon't know if this matches your timings better...\nIt makes a difference, if the nodes are collapsed/unrendered,\ncollapsed/rendered, or expanded. Your optimization seems to work best in\nthe latter case.\nfor( var i=0; i<20; i++ ) {\n  //  node.children[i].render(true, true);\n      node.children[i].setExpanded(true);\n  }\nbench_issue_708.pdf\nhttps://github.com/mar10/fancytree/files/870116/bench_issue_708.pdf\nWould you like to make a PR?\nAnother thing you might try is to remove markup when nodes are collapsed,\nand see if it makes a difference, when your is used for a while:\n$(\"#tree\").fancytree({\n      collapse: function(event, data) {\n          data.node.discardMarkup();\n      },\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/708#issuecomment-289216855,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZr0ZI6NkRIgGZDfIrsHLwDVkVBFjks5rpStKgaJpZM4Mlfor\n.\n. Uploaded a second PR for the new addChildren() improvements. Passes\nautomated tests and some minor manual testing.\n\nOn Fri, Mar 31, 2017 at 12:27 PM Aaron Leventhal aaronlev@gmail.com wrote:\n\nHi Martin,\nI uploaded a PR for something else related to click-to-focus.\nI'm ready to begin this PR, but I wanted to mention that I agree that this\nis really only a problem when nodes are expanded.\nI see this comment in the jquery.fancytree.js in two places\n* If a node was created/removed, node.render() must be called on\nthe parent.\nMy thinking is that this is necessary in order to rerender the\ncollapse/expand icon. Basically when we go from 0 children to some, or\nvice-versa, Fancytree will have to toggle whether the icon is visible. I\ntried looking back into the code to see if this was why, but I couldn't\nfigure it out.\nThe reason my patch is ok, I think, is that the root node isn't rendered\nanyway, so there is no collapse/expand icon.\nWhether the parent of the added/removed child is the root node or node or\nnot, I don't think rendering all the siblings of the current item should be\nnecessary. Doesn't it seem like enough to render the parent, but not to do\nso recursively?\n\nAaron\n\nOn Sat, Mar 25, 2017 at 10:57 AM Martin Wendt notifications@github.com\nwrote:\nI added a benchmark to the suite\nhttps://github.com/mar10/fancytree/blob/master/test/unit/test-bench.js#L351\nthe seems to better simulate the case.\nDon't know if this matches your timings better...\nIt makes a difference, if the nodes are collapsed/unrendered,\ncollapsed/rendered, or expanded. Your optimization seems to work best in\nthe latter case.\nfor( var i=0; i<20; i++ ) {\n  //  node.children[i].render(true, true);\n      node.children[i].setExpanded(true);\n  }\nbench_issue_708.pdf\nhttps://github.com/mar10/fancytree/files/870116/bench_issue_708.pdf\nWould you like to make a PR?\nAnother thing you might try is to remove markup when nodes are collapsed,\nand see if it makes a difference, when your is used for a while:\n$(\"#tree\").fancytree({\n      collapse: function(event, data) {\n          data.node.discardMarkup();\n      },\n\u2014\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/708#issuecomment-289216855,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZr0ZI6NkRIgGZDfIrsHLwDVkVBFjks5rpStKgaJpZM4Mlfor\n.\n. I put up a PR to fix this but keep the optimization.. The keyboard navigation model is just my current suggestion. There is no major precedent for it, so it's possible the community will decide that it's not ideal. However, having row navigation and focus be the default seems right, otherwise the user will miss important information.. I'm following up with some colleagues and we have some other ideas that might work really well. So let's hold off just a bit until I get more thoughts together on this!. I've started to engage the WAI ARIA authoring guide on this. See https://github.com/w3c/aria-practices/issues/91 -- I'm planning to work up a proposal.\n. Here's an example I'm showing around now:\nhttps://cdn.rawgit.com/aleventhal/treegrid-tab-active-cells/0.1.10/treegrid.html \n\nWhat do you think?. > if a row with an collapsed node is active, I cannot enter cell mode directly,\n\nbecause RIGHT will expand. Only the next RIGHT will mark the cell.\nExpanding may not be what I want, since it can create lots of new rows.\n\nWe could introduce new keystrokes that separate expand vs. next column, but it would not be discoverable. An earlier prototype used the move-by-word keys to switch columns. We could add them back in as well. It just would not be discoverable, so I'm not sure it's worth it.\n\nTabbing out of the last column will leave the whole widget.\nUsers might expect to focus the next item in the following row?\n\nI like it this way because you can arrow to the next row and then tab, and there are a reasonable number of items in the tab order. If tab went to the next row, the user would not be able to escape to the next widget in the case of 1000s of rows.\n\nI am not sure if this assumption always holds:\n\ntreegrids don't have that many columns\n\n\nAn earlier version needed this assumption because there was not an easily discoverable move by cell command. However, with the addition of right arrow and tab, I feel that we can remove this as an assumption.\n\nAnyway, the specification and demo should include concrete guidelines how to handle\ninput controls.\nSo a scenario like in the 'gridnav' demo should be possible:\nhttp://wwwendt.de/tech/fancytree/demo/sample-multi-ext.html\n\nAgreed. I'll add that in at some point.\nLooking at your gridnav example, the only issue I have with it is that the title column is tabbable. IMO that's really a problem because it's common to have many many rows, and so effectively you are locking users into that widget. I prefer the solution where tabbing only works on the active row, and arrows move to other rows.\n\nI am not saying that gridnav is the 'best' approach, of course. It just was handy in\nthe case of a grid that consisted of mainly checkboxes and some dropdowns:\n\nYeah, I'm not saying my approach is necessarily the best either, but I'm trying to get consensus within the ARIA working group too. With lots of different ideas that may be the most difficult thing about this problem\n\nWhile a grid of checkboxes can be freely navigated in all directions using cursor keys.\nFor text-inputs LEFT/RIGHT will stay in that control and only UP/DOWN will change the row.\nFor dropdowns, UP/DOWN will select from the list, while LEFT/RIGHT changes the columns.\nSeems reasonable to me.\nOnly if the title column has focus, LEFT/RIGHT will expand / collapse\nSPACE is also aware of the active column, since it modifies an edit control,\nselects a checkbox, or toggles the fancytree row selection respectively.\n\nDo you think it's better than having the default be row focus? To me that's easier to understand. I'm not sure if users will understand that there is a special column that does different things.\n\nSome unstructrued questions for discussion:\nShould a treegrid feel like Excel concerning cursor keys,\ni.e. should every cell be reachable using UP/DOWN/LEFT/RIGHT?\n\nYes, although as you pointed out a textfield or select may take some of those keys\n\nHow should merged or empty cells be handled (i.e. focusable?)\n\nMerged cells - focus them as a group or the first cell of the group\nEmpty cells - yes, definitely focus.\n\nShould disabled checkboxes be skipped?\n\nI'd say reachable via arrows but not tabs.\n\nShould TAB navigation include all rows or only the active row?\n\nIMO active row because of the many rows tabbing problem\n\nShould keystrokes like 'a', '*', '+', SPACE modfy active, interactive cells,\nor be ignored (or handled as tree commands, like 'expand all' or 'select row')?\n\nIMO it depends on row vs. cell mode\n\nShould UP/DOWN change an active dropdown selection immediately, or should\nthe user enter an edit mode with F2 for example?\n\nI don't think users will know about F2 or other keys, but maybe Enter. It's probably ok if they just drop down immediately.\n\nSimilar: should an ascii key stroke edit the current text control?\n\nI would say just start editing\n\nWhat happens if one cell contains multiple html input controls?\n\nWe explode! Actually I suppose they can all easily be in the tab order for the active row.\n\nAn alternative approach that we could investigate is to have a separate 'edit-mode'\nthat can be activated.\nFor example F2 could switch from a row-based read-only mode to a cell based\nedit mode.\n\nI don't like using keys that no one else uses. No one knows about them and you also run the risk of conflicting with browser, OS or web app keys.\nAre we at all close to finding a common solution? :)\n. I'm calling into the ARIA authoring guidelines taskforce meeting today and\nthis is on the agenda. I'll let you know what happens.\nAaron\nOn Mon, Apr 17, 2017 at 11:35 AM Martin Wendt notifications@github.com\nwrote:\n\nAre we at all close to finding a common solution? :)\nThere's only one way to find out ;)\nI can draft a protoype extension that follows your spec during the next\ndays, so we can play with it in addition to your example implementation.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/709#issuecomment-294510677,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZmkD0M9bEGFBU2mk608LZg-LI8yDks5rw4a8gaJpZM4Mm26u\n.\n. Also, the screen reader support works better in some cases than others.\nThat's part of why it needs work. Best in Firefox. If you're playing with\nin a screen read with Chrome, use Canary.\n\nAaron\nOn Mon, Apr 17, 2017 at 11:36 AM Aaron Leventhal aleventhal@google.com\nwrote:\n\nI'm calling into the ARIA authoring guidelines taskforce meeting today and\nthis is on the agenda. I'll let you know what happens.\nAaron\nOn Mon, Apr 17, 2017 at 11:35 AM Martin Wendt notifications@github.com\nwrote:\n\nAre we at all close to finding a common solution? :)\nThere's only one way to find out ;)\nI can draft a protoype extension that follows your spec during the next\ndays, so we can play with it in addition to your example implementation.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/709#issuecomment-294510677,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZmkD0M9bEGFBU2mk608LZg-LI8yDks5rw4a8gaJpZM4Mm26u\n.\n\n\n. I have a grand unified theory of treegrids for everyone. I'd love some feedback. Same code, different focus options. It turns out that sometimes people want a treegrid that's more like a tree, and sometimes they want it to behave more like a grid. The difference seems to be whether the rows focus by default, and whether rows can get focus at all.\n\nThis is the same code with a different value for the URL param called cell:\nStart focus on rows: https://cdn.rawgit.com/aleventhal/treegrid-tab-active-cells/0.1.15/treegrid.html \nStart focus on cells: https://cdn.rawgit.com/aleventhal/treegrid-tab-active-cells/0.1.15/treegrid.html?cell=start \nStart and keep focus on cells (disallow row focus): https://cdn.rawgit.com/aleventhal/treegrid-tab-active-cells/0.1.15/treegrid.html?cell=force \nInternally, the URL parameter sets the boolean variables doStartRowFocus and doAllowRowFocus. There is hardly any branching logic required.\nThe aria-expanded attribute is mirrored from the row to the first cell. Pressing Enter on the first cell is another way of toggling expansion.. Awesome. I imagine a config option called cellFocus with the following values:\n- 'allow' (default)\n- 'start'\n- 'force'\nHere are some ARIA recommendations:\n- Use aria-level, aria-posinset, aria-setsize on each row\n- Use aria-expanded on the row except in the cellFocus=force case, in which case it should be on the title cell\n- Make sure the aria-expanded is not present when the row has no children\n- Mirror aria-expanded from each row to the cell with the expander\n- Don't use aria-labelledby. This will be computed automatically by the browser. True in trees as well.\n- When the tree/grid is multiselectable, use aria-multiselectable=\"true\" on the tree/treegrid element\n- When a cell has a single focusable widget, the aria-activedescendant should point to the widget instead of the parent \n- If rows are hidden I suggest aria-hidden=\"true\" on them (may be optional)\n- I suggest removing the ARIA option and just turning it on always. It should have a negligible effect on performance, and most authors won't think of turning it on, yet they don't know much about screen reader use or whether a future user will need it. Think of how sad that would be for a screen reader user to encounter a Fancytree and not be able to use it because ARIA was off.\nKeyboard:\n- Escape is not the best idea for focusing the row, because screen readers unfortunately use that to exit forms mode. Yuck.\n- Enter key should continue to perform the default action on the cell. If there is no other default action on the cell and it contains an expander, then Enter should toggle expansion.\n- Also, if you move past the first cell it should move to row focus if not in options.cellFocus !== 'force'\n- Do you deal with RTL content? Do you switch left/right arrow in that case?\nEdits:\n- aria-expanded only on row or cell, not both\n- Escape key bad. Getting closer to a spec / design pattern over here:\nhttps://cdn.rawgit.com/w3c/aria-practices/treegrid/examples/treegrid/treegrid-row-nav-primary-1.html \nI can review your branch when you're ready.. Yes, we can remove aria-labelledby even from the tree view. Browsers have a \"name from contents\" rules that is utilized on elements of role treeitem. This is also true of role=\"row\" although Chrome only does this correctly for row in recently nightly builds.\naria-posinset, aria-setsize and aria-level should be implemented for the treegrid, since all of the rows are at the same level. For the normal tree, there appears to be enough DOM structure that the browser can compute this on behalf of the screen reader. I will doublecheck that later and let you know if there's an issue with that.\nHave you seen any performance issues caused by ARIA usage before?\n. ARIA should not affect performance much at all. It's not even processed\nby the browser outside normal code paths for attributes, unless a screen reader is requesting information about the accessible object hierarchy. So it should have about the same affect as\nadding any attributes would.\nAaron\nOn Mon, Apr 24, 2017 at 1:06 PM Martin Wendt notifications@github.com\nwrote:\n\nI see, thanks.\nHave you seen any performance issues caused by ARIA usage before?\nI observed that small changes to the rendering logic sometimes had\nunexpected (by me) impact.\nHavn't measured aria so far, just mentioned it, because performance with a\nhigh number of nodes is one important requirement. We can simply benchmark\nand/or optimize, once the spec is implemented.\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly, view it on GitHub\nhttps://github.com/mar10/fancytree/issues/709#issuecomment-296747432,\nor mute the thread\nhttps://github.com/notifications/unsubscribe-auth/ABUAZsjaoo4M8Zu55rXpLEWYe6Ah_Ozdks5rzNZ4gaJpZM4Mm26u\n.\n. > Also usability for huge grids with embedded cells is an important use case for Fancytree.\nI hope you don't mind if I brainstorm some more...\n\nSounds good.\n\nI am still a bit concerned about having to expand (potentially a lot of) nodes, just to switch to cell \nmode.\nS.th. like enter/esc seemed natural to me.\n\nDo you envision row mode being used for huge grids? Or is it more natural to use ?cell=force mode where there is no row focus? I feel like row mode is for grids that are more like trees -- usually fewer columns.\nSome people wanted Enter to toggle row expansion. Then sometimes there is a default action like open this message. Then Fancytree might use it to go into cell mode. I guess my concern is if Enter always seems to do something different. I hear you, though.\n\nSame with having to cursor to the boundaries just to switch back to row-mode, because I want to expand or collapse now.\nWould it be valid for Fancytree to support + / -even if it is not defined in the spec?\n(Maybe having a strict and relaxed aria mode)\n\nUltimately the authoring guide is a guide, and they are just suggestions to help the community deal with all the confusion in accessibility, by providing something that helps bring everyone together on the basics as much as possible. If someone comes up with a better way, they should use it as long as users can discover it and it doesn't confuse everyone by being completely different, and yet calling itself the same thing.\n\nEnter key should continue to perform the default action on the cell. If there is no other default > action on the cell and it contains an expander, then Enter should toggle expansion.\nAgreed, but in row-mode? Your current implementation defines alert column 3 as default action.\nCould Fancytree simply define enter cell mode as default action on rows?\n\nIt could. Maybe it's better. FWIW all of these things are just suggestions, so if you like this better, maybe other people will too. Not that many people have weighed in yet. I'll see what people think of using Enter.\n\nEscape is not the best idea for focusing the row, because screen readers unfortunately use that to\n exit forms mode. Yuck.\nToo bad, I wasn't even aware of a forms mode.\nI noticed in grid example 2 that ENTER/ESC is used to enter/exit edit mode on embedded inputs and dropdowns.\n\nYes, it works in those 2 cases. I've been told those are exceptions that the screen readers allow because it's so expected.\n\nSo rows could be handled as another layer of edibility, so that \"cell-mode\" means \"edit-row\n\"-mode and it seems to have a nice symmetry:\nrow-mode  =ENTER=>  cell-mode  =ENTER=>    edit-input\n         <=ESC=               <=Esc/Enter\nAny hope that Esccan be handled by screen readers this way, if W3C specifies so?\n\nThe problem is really the JAWS screen reader, which is like the IE of the accessibility world. Even if we get them to update JAWS, lots of people don't update. It doesn't help that the updates cost a lot of money. We try to avoid creating incompatibilities with current screen readers as a matter of pragmatism. It can suck. But when we get idealistic and try to make everything better, yet older stuff doesn't work, it also sucks.\n\nThis would also help with the problem in my current implementation, where you can get stuck in a > text-input when you move around with cursor keys. Then only Tab can get you out.\nIf however Enter was required to edit a cell input, you can simply run over it with cursor keys.\n(Unlike in the grid example, I would allow to start editing by typing alphanumeric keys as well. \nMaybe in relaxed mode only)\nAs you can see, I am a complete greenhorn concerning screen reader behavior, so hopefully some > of the above makes sense :)\n\nScreen reader stuff is hard. I guess the keyboard navigation is really separate from screen reader stuff, so you are as good as anyone on that. Keep asking questions and we'll get somewhere. I like the Enter/escape idea unless there is a default action. I wish that Escape was not an issue for screen readers in the non textedit/popup cases. None of us like that. Maybe we'll find a workaround, I can try to find out more.. Hi @mar10, let me know if there's any way I can help.. Thanks @mar10 -- here's an updated rawgit link:\nhttps://rawgit.com/w3c/aria-practices/treegrid/examples/treegrid/treegrid-1.html\n. Hi, I checked out the example.\nHere are my suggestions for markup improvements, from most important to least:\n- The aria-activedescendant must point to the row when a row has focus, and point to a gridcell when a cell has focus. This is critical.\n- Don't put role=\"treeitem\" anywhere in a treegrid, they are currently on\n   a grandchild of the gridcell. The treeitem should only be used in a tree\n-  Don't put role=\"button\" on expanders if they are not visible (leaf nodes)\n- For role=\"img\" on folders:\n  - Are they important to understanding the line? I'm not sure they are given that\n  we can use aria-expanded to say whether something is a folder. Therefore I suggest\n  to put role=\"presentation\" instead\n  - If it is really is important for understanding the line, add an aria-label to it so the screen reader knows what the img means\nWould you like me to help with the code? I'd be happy to.. > Do we need to render IDs on all rows and cells or can we simply use a constant ID aria-\n\nactivedescendant=X and then move the id=X attribute around? This would be easy, but I have a \nfeeling it would violate some specs\nYou could probably do something like:\n1. Create a new id on the new row to focus\n2. Point aria-activedescendant at the new id\n3. Remove the id from the old row\n\nYou could use a counter or even alternate between 2 ids this way.. Excellent: I tried master with NVDA and Chrome Canary, and got much better results than before. Obviously there is still polish but this works well enough that once it's released, I can start testing automation-inspector with my colleagues that use screen readers. \n(It's at https://github.com/google/automation-inspector if you're curious.)\n. It's good enough that I would love to use it as soon as I can. What do you still need to do before you are ready to release it?. We are closer, but I believe the regular ARIA tree is not working as well as it used to. In a regular tree, the aria-activedescendant is pointing to something like a <span id=\"ui-id-5\" class=\"fancytree-node ...\">. It has a last child of <span class=\"fancytree-title\" role=\"treeitem\" aria-selected=\"blah\">. The role and aria-selected attributes should be set on the parent .fancytree-node element, where the aria-activedescendant is pointing.. For some roles, the ones marked NameFrom contents in the spec, the reader will read all the descendant text and labels. So yes, the screen reader will get the right thing here. Let's point it to the parent.. We are very very close. Here are some recommended improvements:\n\nImprovements for aria-expanded:\nTreegrid: Currently when something has children but is not expanded, we don't always set aria-expanded, but it always should be aria-expanded=\"false\" (which means expandable but not currently expanded). This is different from not having the attribute present (which means not expandable). It seems to work correctly on your example, but in mine, I have to expand and then collapse a node to get aria-expanded=\"false\" on it.\n\nTree: Currently aria-expanded=\"true\" is being set on leaves, but it should be left out there. This seems to be due to the logic for removing aria-expanded assuming that leaves are not expanded, but the data model treats leaves as expanded?\n\n\nThe setsize/posinset is no longer getting reported in the plain tree. This probably used to work via the browser autocomputing it for us, since you have a nice nested li structure. However, now that the the focus is going on the child span, it won't help us, since the autocomputed attribute is showing up on the parent. Two options:\n\nPut aria-setsize and aria-posinset attributes on the span, similar to how we do it for treegrid.\nOr, point the aria-activedescendant to the li and move all the other ARIA attributes that are currently on the span child up one level to the li. \n\nMy apologies if I led you down the wrong path on that before.\n. Since you're going to be traveling, here's a PR for theses issues:\nhttps://github.com/mar10/fancytree/pull/732 . I'll take care of the Chromevox experience with any necessary patches, so no worries there. I haven't tested there recently as I've been waiting for some of the fixes to make it into the developer channel. I'll probably need to make more patches to Chrome and Chromevox itself in the end.. @mar10, the PR is updated.\n. I can try to put a patch together to address the issues.. Works for me. I'm not sure why it's necessary. I admit to not understanding all the code perfectly. Apologies for the regressions!. Just cleanup. Putting on the li will allow level, posinset and setsize to be computed automatically by the browser. However, I am working on a fix for Chrome as it's adding descendant text from the child tree items into the auto-computed name. This is a very important bug that it brought to light. In the meantime, the buggy behavior is not bad in Chrome, so I think we should go with this.. A little cleanup. ",
    "marczi": "I think with this modification in version 2.22 the insertBefore parameter for addChildren is buggy. Let's say I have 3 elements and I'd like to add a node before the 3rd one. Now the node is added to the correct position in the \"children\" list, but it is always renderer as it were added after the last node. It is working correctly in version 2.21. Thanks for your fix, but unfortunately it still seems to be a little buggy (now it is better than it used to be). The most simple use case is to create a tree with a single node and try to add a second node before this first node. In version 2.21 the newly added node appears correctly before the original single node, but in 2.22.1 it appears after that. The only workaround is to call render(true) on the root node.. ",
    "serious-fred": "Hi \nOn this commit, you replaced click event with mousedown event.\nIt breaks dnd-ext behavior : \nWith click event you can take a folder and drag it to another folder, whatever will be the folder you grab and drop.\nWith mousedown event, the first thing that will happen is the 'activate' or the 'click' (I used activate so I tried to use click instead of activate) FancytreeEvents. In my app this event has  a location.href callback.\nSo when I try to drag/drop  a folder, the first thing that happens is that the page location changes. And then the only folder that I can effectively move is the active folder.\nWhen I  edit those 2 lines (ln 4703 and 4723 of 2.23 version ) replacing 'mousedown' with the 'click' event, I get the expected/usual behavior for Drag & Drop, In can take any folder in the tree and drop it anywhere else.\nIs there a way to solve this issue with the latest version without breaking #713 fix ?. ",
    "etlel": "Yes, it's now working fine, well done.. ",
    "KarolKolenda": "Thank you Martin, much appreciated! Didn't know about dnd5.. ",
    "azerafati": "I did the same but it seems fancytree itself is depending on JqueryUI, but that wasn't mentioned anywhere in the docs. \nI included  \n<script src=\"/node_modules/jquery.fancytree/dist/jquery.fancytree.js\"></script>\n<script src=\"/node_modules/jquery.fancytree/dist/src/jquery.fancytree.dnd5.js\"></script>\ntest it here -> http://jsbin.com/werofakoni/1/edit?html,output. ",
    "colindavey": "Thanks! \nOne thing that would help is, given two nodes, the ability to get a list of all nodes between the two. Given two nodes, one is above the other, in that if both are visible, one is above the other on the screen. So, by between, I mean the ones that would appear between the top one and the bottom one assuming all are expanded. Similarly, there is a concept of before and after for a given node. \nThere doesn't seem to be a built in way of find between, before, or after (is that true?), though it is implied by the fact that arrow keys work at all. In fact, the handlers for KC.UP and KC.DOWN in jquery.fancytree.js calculate this, and it would be useful to turn into a method for nodes. The method could take as a parameter whether nodes that are hidden because of the expanded state should be considered. . A couple of related points. Given two nodes, how do we know which is above the other? Given a line number, which node is there (with or without expanded taken into consideration). Given a node, what line number is it on? . I wrote this code that gets the nodes between two nodes. \nfunction compareNodes(node1, node2) {\n    var inds1 = node1.getIndexHier().split('.');\n    var inds2 = node2.getIndexHier().split('.');\n    var level1 = node1.getLevel();\n    var level2 = node2.getLevel();\n    // the smallest level number is the one we use. \n    var numLevel = (level1 < level2 ? level1 : level2);\n    for (var i = 0; i < numLevel; i++) {\n        var i1 = inds1[i];\n        var i2 = inds2[i];\n        if (i1 !== i2) {\n            return ((i1 < i2 ? 1 : 2));\n        }\n    }\n    return (level1 < level2 ? 1 : 2);\n}\nfunction getNextNode(node) {\n    // from KC.DOWN handler\n    var sib;\n    if( node.expanded && node.children && node.children.length ) {\n        sib = node.children[0];\n    } else {\n        var parents = node.getParentList(false, true);\n        for(var i=parents.length-1; i>=0; i--) {\n            sib = parents[i].getNextSibling();\n            // #359: skip hidden sibling nodes, preventing a _goto() recursion\n            while( sib && !$(sib.span).is(\":visible\") ) {\n                sib = sib.getNextSibling();\n            }\n            if( sib ){ break; }\n        }\n    }\n    return sib;\n}\nfunction getBetweenNodes(inNode1, inNode2) {\n    if (inNode1 === inNode2) {\n        return [inNode1];\n    }\n    var node1 = inNode1;\n    var node2 = inNode2;\n    if (compareNodes(node1, node2) === 2) {\n        node1 = inNode2;\n        node2 = inNode1;\n    }\n    var ret_nodes = [node1];\n    var done = false;\n    var last;\n    var next_node;\n    while (!done) {\n        last = ret_nodes.length-1;\n        next_node = getNextNode(ret_nodes[last]);\n        ret_nodes[last+1] = next_node;\n        if (next_node === node2) {\n            break;\n        }\n    }\n    return ret_nodes;\n}\n. ",
    "dannoe": "I can no longer reproduce this bug with version 2.23.0.. ",
    "abedi-ir": "Hi @mar10 \nI tested the latest version and you're right, it does work.  \nthanks. ",
    "CookieJon": "Hi.\nI had the same problem, and came up with a quick, hacky workaround that might help you while you're waiting for this issue to be addressed properly.   In my case, the tree's container width was actually being pushed a bit each time a folder was animating its expand or collapse. \nSo I just added the following CSS class to my page, after the FancyTree styles are included, and now it works just fine...\nul.ui-effects-placeholder {\n    width:10px !important;\n}\nNB: The order of inclusion might not matter, !important is probably not necessary, and 10px was just a random pick which worked for me with the expand/collapse folder animations.   (I didn't spend too much time investigating the why's and wherefore's, just wanted a quick fix and this seems to do the job.)\nGood luck!\n. ",
    "romant-1": "Thanks heaps @CookieJon, much appreciated. I ended up with a similar hack, a proper solution would be definitely better.. ",
    "dvstans": "FYI, I just ran into this same issue with folder open/close animation - so still not addressed. @CookieJon's hack seems to work.. ",
    "sirol81": "thanks Martin for the fix. ",
    "mdarim": "Thank you for quick reply . I mean the previous manually downloaded. anyway thanks for clarifications I will download the extension manually.. Sorry for disturbing you. I solved my issue as console's window displayed logs by adding \npreset: \"awesome4\"\nto my glyph_opts.. ",
    "Izumi-kun": "Seems like links (events) still not works.\nhttp://jsfiddle.net/9aoc28u9/17/. ",
    "codeclever": "Hi @mar10 - sure this is fixed? Got the exact same issue but my nested links only fire the focusin event therefore skipping the fix you applied. There jsfiddle above also has the issue still (sometimes... if you enter a search keyword and 'enter' and then try 'click here' I find it doesn't work most the time).\nThanks, Aaron.. ",
    "aloisdg": "Ok right. ",
    "jeevasusej": "Sorry I didn't check yet. I will check and let you know.. Sorry for the too delay reply. \nPlease check the following demo\nhttp://jsfiddle.net/Luwoamzj/18/. We need to wrap the icon. So icon should be inside the span. \nI have fixed this issue already. But it was rejected. :-p .\nPlease see the following for fix.\nhttps://github.com/mar10/fancytree/pull/771/files\n. ",
    "jcrosetto": "I am running into the same issue. I believe this is related to the jQueryUI code that is included in jquery.fancytree-all-deps.min.js uses AMD (if available) to load itself which means it is missing when the fancytree core code IIFE runs later.\nI think a solution would be to remove the AMD related code from the jQueryUI code that is included in jquery.fancytree-all-deps.min.js and make it an IIFE.. @mar10 Confirmed that removing the wrapper and making it an IIFE that takes in jQuery as a parameter (like the other functions) works!\nI'm not sure what a good way of implementing a fix for this is though.. Perhaps it can be stripped out with a Regex during the concatenation in Gruntfile.coffee. I think this would be better than adding a separate file just for the purpose of removing it in jquery-ui-dependencies.. I think this should do the trick\nif /jquery-ui..+.min.js/.test(fspec)\n  src = src.replace(/\\(function.+jQuery\\)}\\)\\((.+\\)}\\)})\\);/, \"!$1(jQuery);\"). Put up a pull request with the changes. #784 . No problem! I thought I might as well put up a PR since it was easy enough (and I could test it easily). :)\nIt'd be awesome to get source map support for it. I actually use FancyTree via a webjar and just reference jquery.fancytree-all-deps.min.js directly instead of through NPM.\nI'm not sure it would help but I could pull that branch, build it, and try using the jquery.fancytree-all-deps.min.js that gets generated.. Pulled that branch and tested both jquery.fancytree-all-deps.min.js and jquery.fancytree-all-deps.js (for good measure). They both work well!. ",
    "allavoie": "Hi, using the nodejs electron app framework, I experience the same problem.\nI was first using fancytree-all-deps within a linux dev environment, \nand it worked, by doing require() on (in that order)\njquery, \njquery-ui \nand then jquery.fancytree.\nI now moved my dev environment on a Mac, but I cannot load jquery.fancytree-all-deps (or jquery.fancytree-all) anymore.\nWhen doing a require('...jquery.fancytree-all'), the package is found, but an exception:\nUncaught Error: Cannot find module 'jquery.fancytree.ui-deps'\nis thown.\nHow to get around this exception ?\nIs there a description somewhere of what should be the abstract all sequence of action to respect.\nHow should I proceed to propose a solution, can you provide hints, I can troubleshoot the problem, and try to propose a solution.  For now, I try to add some changes to the jquery.fancytree-all-deps.js file but its to attempt to load itself.  I could extract the minimal use case if needed.\nThx in advance.. I will come back with small demo of this issue.. Hi, I added that issue as a standalone ticket, as I figured it might be a different issue than the other require() reported problems.  I will produce a demo of this shortly.  I need to re-make it work on Linux and show the problem on Mac. Thx for your quick answer, it is well appreciated.. Update:\nhttps://github.com/allavoie/fancytree_issue/blob/master/README.md\nIn summary: works on Linux&Mac but with a twist: I rewrite the node_modules/jquery.fancytree content with your development github project.\nI will work to generate the error again, but I was originally trying to use the normal npm install jquery.fancytree but with no success, I will come back with more details.. I finally got more information.  It seems to be an incompatibility between v2.24.0 and v2.26.0.  In my use case, \n v2.24.0 works\n v2.26.0 does not work,\nTo reproduce the problem, you can use the same repo (https://github.com/allavoie/fancytree_issue), but switch to branch \"make_fancytree_work_with_npm_install\", and looking at the README file of that same branch, you will find the procedure to reproduce the issue. As an extract, here is the common code between these branches: \nconst $ = require(\"jquery\");\nwindow.jQuery = $;\nwindow.$ = $;\nconst jquery_ui = require('./bower_components/jquery-ui/jquery-ui');\nconst explorerLoader = require(\"jquery.fancytree/dist/jquery.fancytree-all-deps.min\");\nThe following generates an exception (module not found) on v2.26.0, even thought the file exist in the node_modules package.\nTo view the problem, you can switch the versions in the package.json and view the problem by running: npm update && npm run webapp.\nIs there something else you wish me to attempt ?. Hi,\nI tried your suggestions, and read your documentation.\nHere is the end result:\nException and Context\nAny other hints ?\nI could try to inspect the code about the module loading, is this only located in the jquery.fancytree head of the javascript module or should I inspect other code sections ?. @mar10: Having some problems with my environments on my repo... Cannot reproduce my scenarios... Will solve this and test your solution soon. @mar10: Ok, could reproduce the problem, I cleared my npm cache, re-git-clone my repo (in master), \n reproduced a working use case (package.json: jquery.fancytree: v2.24.0), \n changed to ^v2.26.0, npm update...\n add your change in jquery.fancytree/dist/modules/jquery.fancytree.js...\n but witness again jquery-fancytree-ui-deps cannot find module exception.\n* I noticed it tried to load a ...-deps-min.js... so changed the jquery.fancytree/dist/jquery.fancytree-all-deps.min.js and the restart trigger another cannot find exception on: jquery.fancytree.table.\nSo I figured you must have a build process to generate this .min.js and applying your fix might not be enough for my use case.\nI will stick on v2.24.0 for now and wait for your next release, checking if my use case is covered. \nThx.. ",
    "karloxe": "sorry , forgot to mention all those childrens are added to an empty node, \nIs there any method to force / replace / stablish its dependency ?\nHope it makes more sense now\nthank you. Tested on a dummy reduced equivalent scenario and I can't reproduce the issue, must be in a paralel routine I'm using .\nbug on my side ! :)\nPlease Close. Edit:\nBasically I've inverted isEmptyObject and isExpanded conditions and missed the one important hasChildren\nThanks anyway . ",
    "sharozmirza": "I am not sure if you have already found a solution to this or not but I think something is setting focus on the container or '#tree' after an expand or collapse event is done. I was facing the same issue while I was renaming a title in the 'complex demo' table (Table Tree). Once I removed [line 189] (tree.$container).focus(); from jquery.fancytree.edit.js file my issue was resolved. I think you need to find how it is setting focus on the container after an expand or collapse event is done and remove that function. Hopefully this helps. . ",
    "jvasi": "Hi, might be a stupid question by why do we only save the types and not the libraries themselves?\nE.g. why do we only \nnpm install --save @types/jquery @types/jquery.fancytree\nbut not:\nnpm install **--save** jquery jquery.fancytree. According to the npm repo:\nhttps://www.npmjs.com/package/@types/jquery.fancytree\nthe last update was a month ago, so they seem current. You can checkout the maintainers on there too.. ",
    "dgFCRT": "The goal would be for the parent checkbox to be partially checked when the nodes that match the filter are selected while not checking the hidden nodes that don\u2019t match behind the scenes.  As it is now, all nodes will get checked underneath a filtered node even when they are hidden from the filter not matching.. ",
    "james-boswell": "Any chance this could be looked into further? It would be a great feature to have working.. ",
    "dzackgarza": "Just wanted to confirm that the new commit does indeed seem to work! Thanks for the fix.. ",
    "hafasek": "Thank you for a quick reply. I understand your suggestion, but literally have no clue of how to proceed with it. Javascript is not my language of choice.\nIn treeCreate  I found this section, which I believe is to be in the exported method\nthis._local.lineOfs = (1 + (ctx.options.checkbox ? 1 : 0) +\n                (ctx.options.icon === false ? 0 : 1)) * (iconWidth + iconSpacing) +\n                iconSpacing;\nWould you be able to direct me to some other extension where some external method is available (and also how to call it afterwards) or just show me some example ideally in jsfiddle?\nMany thanks!\n. ",
    "rodrigorrm": "Hello Martin,\nThank you for the reply. The solution path you indicated is just what I'm also aiming for.\nI built a logic for highlighting non persisted nodes and implemented a commit button for each non-saved node so the user can make all changes and then commit the record at will.\nThe only discomfort, if I may put it this way, is that I included a new status variable to indicate the node was not saved yet and another to indicate it is brand new. I realized there is a -isSaved- state parameter on fancyTree already but as I do not know the whole state machine governing it, I decided to go for a new one, even at the risk of duplicating some logic.\nCheers!. ",
    "pnakidas": "Finally, figured it out. For anyone else who has the same requirements, I used the following code -\njavascript\n                       function(node) {\n                var found = new RegExp(match, \"i\").test(node.title);\n                if(node.isFolder() ) {\n                    return true;        //always match a folder\n                } else {\n                    return found;  // otherwise match the nodes only\n                }\n            }\nAlso needed to set the leavesOnly value to false. Please note that the counter value will be wrong, but it was not required in my case.. ",
    "dburongarcia": "Thanks for the tip. What I am doing now is:\nif (data.targetType == undefined )\nbecause the custom icon is the only undefined one. Maybe the cause is that custom icons don't use icon class, but custom-icon class.. ",
    "jinkai": "It looks like this was fixed in Fancytree 2.25, but there's a problem with trying to use that version with Webpack. This can be closed and I'll search for an existing Webpack issue or open one.. Thank you! I do have a working scenario now. I updated my vendor bundle to be:\nimport 'jquery';\nimport 'jquery.fancytree';\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.glyph';\nThen in my treecomponent.ts, I also had to add:\nimport 'jquery.fancytree/dist/modules/jquery.fancytree.glyph'; (I already had the createTree import).\nThat part seems redundant. Shouldn't glyph have been loaded with fancytree already from the vendor scripts?. treecomponent.ts is an Angular component that translates between what fancytree needs and understands and what my application needs and understands.\nI'm good to close this issue, since it was entirely my own misconfiguration.\nIf I wanted to write up my own configuration to add to the Integration guide as another example, or just add the mention to not use fancytree-all-deps when using webpack/Typescript, I can just add a PR with it?\nThanks for the help!. ",
    "jjagielka": "2: 'folders' extension:\nSorry for mixing subjects. I didn't realise that subsequent commits to my fork will be visible here after I had made the  pull request. I should have make a separate branch first. (I'm still new to github).\nIndeed it's possible to make the folder flag modification in modifyChild event, but that event is not triggered during loading from source. With my extension you can create a tree with no folder in records like:\nsource: [\n    {title: \"Node 1\", key: \"1\"},\n    {title: \"Folder 2\", key: \"2\", children: [\n          {title: \"Node 2.1\", key: \"3\"},\n          {title: \"Node 2.2\", key: \"4\", children: [\n            {title: \"Node 2.2.1\", key: \"6\"}\n          ]},\n1: nodeAddChildren\nSuppose underlying data for the tree are stored on the REST API server. \nBefore making the node operation on the tree, you try to make it on the server and it can succeed or fail. Then accordingly you proceed or cancel with the node operation on the tree.\nSo deleting a node:\nnodeRemoveChild: function(ctx, childNode) {\n  var self = this, node = ctx.node;\n  $.ajax({\n     url: 'myserver/api',\n     method: \"DELETE\",\n     data: {id: node.key}\n  }).done(function(result){\n     this._superApply(arguments);  // do the node remove\n  }).fail(function(result){\n     alert('You have not permission to delete.');\n     // don't call _supperApply and do not remove node\n  });\n} \nDoing the same trick for adding node seems for me not possible now, hence my request of moving node.addChildren to the hook section.\nI have to admit that we can make similar trick with the save handler in the edit extension, but then you need to remove a newly created node, that will trigger remove event.\nOverriding addChildren seems to be a more generic solution.\n. ",
    "iAmShorty": "got it, changed the content from function to static and now its generated\n$.confirm({\n    theme: 'light',\n    title: 'Generate Tree',\n    content: '<div id=\"tree\"></div>',\n    onContentReady: function(){\n      $(\"#tree\").fancytree({\n        checkbox: true,\n        source: [\n          {title: \"Node 1\"},\n          {title: \"Node 2\", key: \"id2\"},\n          {title: \"Folder 3\", folder: true, children: [\n            {title: \"Node 3.1\"},\n            {title: \"Node 3.2\"}\n          ]},\n          {title: \"Folder 2\", folder: true}\n        ],\n      });\n    }\n  });\nyou can see it here https://jsfiddle.net/41b4xb3r/3/\nthanks for replying :). ",
    "PeterAJansen": "I would be interested in seeing >2.24.0 work with Electron  (particularly for the fontawesome skins). ",
    "mmuruev": "Sorry for not enough info. I've investigated the case so reason found already. I'm using grid plugin\n    name: \"table\",\n    version: \"2.24.0\",\nFancyTree  * @version 2.24.0 And Jquery 1.11.1\nWhat I'm found that  can be scrollable only if \n    $tbody.css({\n        display: 'block',\n        overflowY: 'scroll'\n    });\n\nBut in this case it ruins width and header. I belive issue somethere around  Table takes only first column width as whole table width.. Well actually it is. This bug reproduced even on your examples. But if you think so.. \nIf set it like \n\nFor this example\nSo header and width issues probaly on my side, but height changing issue in plugin if add code with css then it works fine on example page.. Have you tied it on example site?. ",
    "kznamenskiy": "\nUser can't select explicity only \"Node 2.1.1\" & \"Node 2.1.1.1\" or only \"Node 2.1.1.1\", because this leads to selection for \"Node 2.1\"\nFor situation when node has more then one child this behavior is really great! \nBut when node has only one child, this behavior is limits user.\nIn addition if user really want select all subtree (\"Node 2.1\" & \"Node 2.1.1\" & \"Node 2.1.1.1\") he can do it really simple, because all nodes are visually located close to each other.\nSo I see only advantages of such a decision, and did not see any serious disadvantage...\nhttp://jsfiddle.net/kznamenskiy/KcxRd/1288/. ok, thank you for your attention. ",
    "creage": "We use Webpack to manage async loading of modules, on demand. We first load our jQueryUI library on application start, and then, when we come to FancyTree usage, we load it separately. Since jQuery is defined  globally, loading FancyTree affects this single instance of it.\nCurrently we workaround that issue by just replacing FancyTree's jquery.fancytree.ui-deps dependency with our instance of jQueryUI, as it already has everything FancyTree needs. But still, it would be nice if jquery.fancytree.ui-deps merges to existing definitions, and not just overwrite them blindly.\nHere is s list of problem code:\n1\n2\n3\n4\n5\nAnd this is correct way of merging.. Well, first solution would definitely work, but why would we load two instances of jQueryUI, if we already have everything FancyTree needs? This will increase the assets size with no reason, as I see it.\nSecond solution will break your code, as you can not be sure, that existing jQueryUI has everything FancyTree needs, right?\nSo, ideally, every definition in jquery.fancytree.ui-deps.js should first check, if such item already exists, and define itself only if it does not.\nP.S. In order someone else face with such issue, here is our workaround\n```javascript\n// replace custom jQueryUI build for FancyTree\n        new webpack.NormalModuleReplacementPlugin(/jquery.fancytree.ui-deps/, function (resource) {\n        if (resource.userRequest) {\n\n            const map = {\n                find: /client\\\\node_modules\\\\jquery\\.fancytree\\\\dist\\\\modules\\\\jquery\\.fancytree\\.ui-deps/,\n                replace: 'client\\\\sources\\\\App\\\\vendor\\\\jquery\\.fancytree\\.ui-deps'\n            };\n\n            resource.request = resource.request.replace(map.find, map.replace);\n            resource.userRequest = resource.userRequest.replace(map.find, map.replace);\n            resource.resource = resource.resource.replace(map.find, map.replace);\n        }\n    })\n\nand our custom ``jquery.fancytree.ui-deps.js`` has just single importjavascript\n// custom jQueryUI replacement, as we already have everything FancyTree needs, except blind-effect\nimport 'jquery-ui/ui/effects/effect-blind';\n```. ",
    "AudriusButkevicius": "Just followed the rabbit hole of issues (#669 -> #11 ->this one) regarding this.\nJust explain my use case:\nIn my application, I have filtering widget that are based on something totally unrelated to the tree.\nFor now, every time the filter conditions change, I rebuild the source structure with what is left after filtering and reload the tree.\nIt would be nice if it was possible to capture which nodes were expanded prior the reload, and expand if they exist after the reload.\nAlternatively, I guess I could use with some API that allows me to hide/not draw nodes that return true for some callback (as well as API that triggers redraw without actually reloading, perhaps reload does that already, not sure).. When I mean reload, I mean tree reload not page reload. I'd rather avoid wedging in cookies or bloat localStorage as I only need persistence in between tree reloads while the dialog is visible, and I don't care after that.. ",
    "Mxesli": "But this changes the look of both. The selected one and the one that only got clicked. okay, thx. \ni will try it out ^^. ",
    "jakubiszon": "Also how do I download any other file?. Yes, it refers to this file which seems to be there but there is no download button. How do I download a file?. Sure, I can just select it all and copy, but how do I get 2 files or 3 files which I need specifically? I am really confused by this site. It offers code which you cannot really download?. ",
    "vincegio": "Hi,\nI have the title tag in every object.\nSo the structure in my json api goes:\n```\n[\n {\n  \"title\":\n  \"folder\": (true)\n  \"children\":[\n   {\n    \"title\":\n    \"ip\":\n    \"icon\": url\n    }\n   ]\n  }\n ]\n```\nSsyntax might've goofed when I typed it myself, but you get the point. Some folders have a few items, others have 40+ or so.\nCould it be the icon? It's an URL that resembles the device for which the IP is connected to etc.\nI snagged a temp icon, which is roughly 400x400. \nI will try excluding this icon tomorrow, and see if that works.\n. That is true.. I just checked my json for nulls and there are a few.\nI will exclude these objects in my API tomorrow, and hopefully it'll work.\nI'll let you know then! \ud83d\udc4d . Okay, so the issue I had was not that they were null from my database.\nIt was the Json_encode function in PHP which couldn't handle \u00c5\u00c4\u00d6, so it spat out some nulls in the json file.\nI put utf8_encode in the said strings and it works fine now (as well as an if statement prior to that, just in case).\nThanks for pointing out that it could be a null in the title, was just that. . ",
    "vincentcox": "I am digging into the fancytree.js file and I might have an idea how to create an easy solution:\nhttps://github.com/mar10/fancytree/blob/master/src/jquery.fancytree.js#L76\nIf I just add \"style\", will this interfere with fancytree?. ",
    "middle536": "Thank you for your reply:\nMy question still not solved.\nThe following is the test link:\nhttps://mido-9.com/fancytree-test/sample-multi-ext.html\nThe following is google driver link, you can download this project and test in your local network\nhttps://drive.google.com/open?id=1M4QwTlxUwdrmEnnaeJgHAU9sIL-QWdrv\nfunction p_ch(){\n    var select1_data=new Array();\n    var select2_data=new Array();\n    $.map($(\"#tree\").fancytree(\"getTree\").getSelectedNodes(), function(node){\n        select1_data.push(node.data['foo']);\n        select2_data.push($.ui.fancytree.getNode(node).data['foo']);\n    });\n    alert('select1:'+select1_data);\n    alert('select2:'+select2_data);\n}\nAfter I modify the input value, I can't get the modified value.\n. After test, the link need copy and past in the browser.. alert(selection1), this will update jquery datatable\nalert(selection2), this will update jquery datatable again\nI need alert(selection1, selection2).\nSend 2 selections at same time.\nDoes fancytree can support this?. ",
    "bindrid": "if you are interested, I copied the glyph extension and edited it to work with Font Awesome 5 SVG.\nhttps://github.com/bindrid/FancyTree-Font-Awesome-5/blob/master/extension. Thank you for updating FancyTree to handle Font Awesome 5. I have pushed this update into my production succesfully :). In my attempt to clean up the whitespace, I made a bad think worse.  So I started over.\nKill this one and take a look at the second pull request that I create. It highlights the changes appropriately.\nSorry about the issues I created, this is my first attempt at creating a Pull Request. Made corrections in the new pull request to get one diff file. \nI think I got it right this time. Sorry, a bit new to using GitHub in this way.\nIn any case, here is an example of how I am using the edited .glyph file.\n```\n$(\"#tree\").fancytree({\n    extensions: [\"glyph\"],\n    icon: function (event, data) {\n        // (Optional dynamic icon definition...) },\n    glyph: {\n        // The preset defines defaults for all supported icon types.\n        // It also defines a common class name that is prepended (in this case 'fa ')\n        preset: \"awesome5\",\n        map: {\n            // Override distinct default icons here\n            folder: function (span, node) {\n                return pickIcon(span, node, \"folder\");\n            },\n            folderOpen: function (span, node) {\n                return pickIcon(span, node, \"folderOpen\");\n            }\n        }\n    }\n    // code removed not not needed for this demonstration.\n});\nfunction pickIcon (span, node, mapping) {\n    // add code here to return icon class names\n}\n```\n. So there is a bug in my code, or a lack of understanding on my part.\nIn order to work, I have to pass in \"this\"\n$span.attr(\"class\", setClass + \" \" +  icon.call(this, span, node));\nHowever, this works only when \"use strict\" is applied.\nsrc/jquery.fancytree.glyph.js   does not have this setting but dist/modules/jquery.fancytree.glyph.js does.\nIt was my understanding that day to day dev and testing is done in the src file but production pushes are in the dist folder. So not sure how to address this.\n. There are some other issues that I have yet to resolve when working with Font Awesome 5 in script mode. Because I have not fully addressed them, I am killing this.\nWhen I have fully addressed my issues, I will try a pull request again.\nSorry to waste your time needlessly.. My fix for this cause a new problem and I was hoping you had an idea how to fix it.\nIn ext-glyph, I changed all occurrences of \nspan = $span.children(\"span.fancytree-expander\").get(0);\nto \nspan = $span.children(\"fancytree-expander\").get(0);\nin setIcon, I added a call for a function specifically for handling FA5 in script mode:\n```\nfunction setIcon(span, baseClass, opts, type, node) {\n    if (span.tagName === \"svg\" && opts.preset === \"awesome5\") {\n        // fa5 script converts  to  so call a specific handler.\n        setIconFA5(span, baseClass, opts, type, node);\n    }\n    else {\n    ...\n```\nand my FA5 script mode handler: \n```\nfunction setIconFA5(span, baseClass, opts, type, node) {\n     var map = opts.map,\n        icon = map[type],\n        $span = $(span),\n        oldPrefix = $span.data(\"prefix\"),\n        oldIcon = \"fa-\" + $span.data(\"icon\");\n// remove old icon\nif (typeof oldIcon === \"string\") {\n    $span.removeClass(oldIcon);\n}\n\n// add new icon\nif ($.isFunction(icon)) {\n    $span.addClass( icon.call(this, span, node));\n}\nelse if (typeof icon === \"string\") {\n    $span.addClass(icon);\n}\n\n}\n```\nThis all works except for the event handlers.\nNow, if I click on any field outside the tree, I have to click twice or double click for the expander to work.\nIf I comment out the icon update ( the call to setIconFA5),  the expander works as expected on the first click, but, of course, the icons now do not update. \nAny ideas on how I should approach this?. I made to different versions.  The first version is what happens when FancyTree is used unedited but the Font Awesome 5 in script mode is used:\nhttps://jsfiddle.net/bindrid/504Lxerd/\nThis version has the jquery.fancytree.glyph.js inline and edited to handle a callback, and the specialized function for SVG-FA5.   I put SGS by each change I made.  This is what the Pull request was about until I closed it because of having to click twice on the tree to get the expanders to work after changing focus.\nhttps://jsfiddle.net/bindrid/3umepv0x/75/ . I am having some of the same issues with your example.   My web site has to work with IE 11, Edge and Chrome. \nI tried Edge on your example and had some of the same issues where I had to click twice when I click out.  Also, with Edge, if I click directly on the arrows, it will not expand or collapse. I have to put the cursor between the arrow and the next icon over.\nIt works better in Chrome but I still have to put focus back on the tree (first click) then click on the arrow (second click) before something happens.  That does not happen with other, non-svg, trees. ",
    "lingtalfi": "It did, thanks :). ",
    "devanshudravid": "@mar10 Hey Martin! may be I can help with something related to typescript. I would be happy to contribute in it.\nAlso type definition: https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/jquery.fancytree/index.d.ts. ",
    "superqd": "Thanks. ",
    "bilogic": "Yes, I upgrade from an earlier version which behaved in the opposite way. The issue is that other codes that read from the DB expects unescaped HTML\nEarlier\n- HTML is saved as-is (unescaped) in my DB and rendered correctly both when viewing/editing in fancytree\nNow\n- HTML is saved encoded, e.g. \u00a9 but rendered correctly both when viewing/editing in fancytree. ",
    "PythonLinks": "Sorry I failed to add the link to slider.\nhttp://idangero.us/swiper/. ",
    "NigelCunningham": "I'm seeing the error with code pulled today:\n\"jquery.fancytree\": {\n  \"version\": \"git+https://git@github.com/mar10/fancytree.git#0cb0fa54fd81889c29370e7c20845d5249c540cd\",\n  \"requires\": {\n    \"jquery\": \"3.3.1\"\n  }\n},\n\nThe error occurs because drop is called beforehand, and it also invokes _clearGlobals. Happy to poke around if you want to provide pointers.. ",
    "pmichel-J2S": "I came to the same conclusion (_clearGlobals() called before dragEnd), but manually replacing jquery.fancytree.dnd5.js from the master branch worked for me ( = it solved the runtime error). Thanks @mar10 ;)\nAlas I still have to call $('.fancytree-drag-source').removeClass('fancytree-drag-source') in the dragDrop handler. Still something missing perhaps.\nLast question if I may : when is the npm package next update (embarking this bugfix) due ?. I can confirm the runtime error is fixed with the current unreleased code. Although I didn't update the whole complete solution, just the DND5 extension.\nFor me, at least, the only problem remaining being the necessity of removing the class \"fancytree-drag-source\" manually afterwards. So maybe some portion of code doesn't execute when it should.. Not directly related to this bug, but very rarely in this exact part of code (line 626 in jquery.fancytree.dnd5.js to be precise), the \"node\" variable happens to be null.\nOther cases in the switch do have a safeguard such as :\nif( !node ) {\ntree.debug(\"Ignore non-node \" + event.type + \": \" + event.target.tagName + \".\" + event.target.className);\nbreak;\n}\nThe \"dragover\" case could also use it ?. ",
    "tomaszs": "Thanks for answer, but it occured partialsel is the right one. Ah sorry, yes partsel is the one. I just had to use another field for a reason. When setting partsel it didn't set properly for me. So i add children, set \"partialsel\", and than after i run through childs and set partsel based on partialsel value and call setActive and setActive(false) on each.. Thanks, it is exactly what i needed. But also found other solution :)\nI just return empty array with [], and than use addChildren to add childs ;). ",
    "jokamax": "Thanks for the patch. @mar10 \nI see you patch the two logs indicated. There is another : \nIgnoring click on outer UL.\nBest regard,\nJonathan. ",
    "Prid13": "createNode seems to also fire BEFORE the actual DOM insertion of the node element. enhanceTitle had the same effect, and loadChildren only fires at the very start (I'm not using lazy loading).\nSo, all the tree elements are feeded to FancyTree at start through AJAX (JSON), and it seems like the DOM of the subtrees only appear in the HTML code once you expand a node. There are certain nodes that I want to check against a list of mine (which is loaded through AJAX also, for each expansion of subtree), and if they match, I'd like to make those node titles bold in the tree.  I want this to happen instantaneously, but using beforeExpand doesn't let me fetch the node DOMs as they are added, and with expand  I have to wait until the whole subtree appears before the code executes -- making the node titles first appear normal, and then suddenly get bold. I want to make the node elements bold as they are added one after the other, to give off the effect that they're bold to begin with.\nI don't know if that made much sense, but basically, I'd like the ability to customize the DOM of each node independently as they are added after clicking on expand arrow, to make some bold, hide some, change the color of another, etc. But I want access to the nodes instantly after they're inserted in the DOM, and not after all of them are added and are visible. Thanks :)!. Thank you so much! In the end, it was just my lack of understanding of your amazing plugin. Now that I see how handy the separation is, I'm able to appreciate your hard work thoroughly :). ",
    "mheptinstall": "Found that I need to be setting the height via this class instead of on the div:\nul.fancytree-container {\n  width: 200px;\n  height: 120px;\n  overflow: auto;\n  position: relative;\n}. ",
    "ramboman": "There is 2 situations that makes the fancytree not load:\n- When I just copy the source of a specific demo to a local directory and correct the broken urls here is the console output:\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://wwwendt.de/tech/fancytree/demo/ajax-tree-products.json?_=1526059675222. (Reason: CORS header \u2018Access-Control-Allow-Origin\u2019 missing).  (unknown)\nFancytreeNode@root_1[title='root'] Load children failed () Object { node: Object, tree: Object, widget: Object, options: Object, originalEvent: null, typeInfo: Object, error: Object, args: Array[1], message: \"\" }  jquery.fancytree.js:113:4\n\nWhen I open that same demo from the cloned project:\nLoading failed for the <script> with source \u201cfile:///jquery-1.12.1.js\u201d.  sample-ext-fixed.html:7\nLoading failed for the <script> with source \u201cfile:///ui/1.11.4/jquery-ui.js\u201d.  sample-ext-fixed.html:8\nReferenceError: jQuery is not defined[Learn More]  jquery.fancytree.js:28:3\nReferenceError: jQuery is not defined[Learn More]  jquery.fancytree.table.js:26:3\nReferenceError: jQuery is not defined[Learn More]  jquery.fancytree.fixed.js:30:3\nReferenceError: jQuery is not defined[Learn More]  sample.js:136:1\nReferenceError: $ is not defined[Learn More]  sample-ext-fixed.html:138:2\nReferenceError: $ is not defined[Learn More]  sample-ext-fixed.html:196:2\n\nI copied the specific demo (sample-ext-fixed.html -> sample-ext-fixed2.html) and changed all the urls starting with // to https://, and now it works. In the case of the fixed header demo, it was this section:\nline 7\nhtml\n    <script src=\"//code.jquery.com/jquery-1.12.1.js\"></script>\n    <script src=\"//code.jquery.com/ui/1.11.4/jquery-ui.js\"></script>. ",
    "bmaster001": "The source data is a (hidden) ul-list that I build using asp.net, and the current item has the 'active' class. I'm not using iframes like your examples-page. No extensions used. It's almost exactly like the accordion-sample. Let me know if you need more info.... i'm not sure what else you might need.. Thanks for the tip, it works perfectly now!. ",
    "shrewdlogarithm": "This is rather odd - console suggests nodes are being 'dragged' but they are being dropped instantly - which gives the overall appearance of nothing working...\nThis is true for Edge, Firefox AND Chrome - so clearly the problem isn't browser related...\nI've now switched to my laptop and everything works AOK there - meaning the problem isn't in the code either so you can probably close this...\nStill not working on this PC, even after a restart.  I can drag drop desktop items and windows just fine, so the mouse itself isn't broken but something is clearly interfering with something!!\nThanks for the quick response!. ",
    "aecreations": "I've updated Fancytree to v2.29.1 but this issue is still occurring. This issue continues to be reproducible in the Fancytree complex demo.. I've cleared the browser cache, but the problem still occurs. Reproducible on Firefox and Chrome.\nScreen recording: https://www.dropbox.com/s/3bplmo4ndvk5aok/Screen%20Recording%202018-06-30%20at%202.27.25%20PM.mov?dl=0\n. @mar10 - I finally took the time to look into this issue further. It is determined not to be an issue with the library itself.  My code in the dragDrop handler should have been checking if a node was moved from one folder node to another, by checking if the old parent ID and new parent ID of the moved node are different, and only call node.setExpanded() if that condition is satisfied.  Please go ahead and close this issue.. ",
    "dodo1292": "@mar10 Perfect, thank you :-) What do you think, how long does it take to fix it? . ",
    "Pumukel1234": "Could you show me an example how this can be implemented? \nIs there a way to load the whole tree into a variable without expanding it?. ",
    "elbrusnt": "css\nspan.fancytree-title{\n    padding-left: 3px !important;\n    position: relative !important;\n    display: unset !important;\n}\nul.fancytree-container {\n    white-space: normal;\n    word-break: break-all;\n    word-wrap: break-word;\n}. ",
    "JavaTMP": "jQuery v3.3.1\nthe fancytree table initialized inside an ajax response using the following code:\nJS\n                $(\"#treetable\").fancytree({\n                    extensions: [\"glyph\", \"table\"],\n                    checkbox: false,\n                    glyph: glyph_opts,\n                    source: {url: \"assets/data/fancytreeTaxonomy.json\", debugDelay: 500},\n//                    scrollParent: window,\n                    table: {\n                        indentation: 25,\n                        nodeColumnIdx: 1\n                    },\n                    activate: function (event, data) {\n                    },\n                    lazyLoad: function (event, data) {\n                        data.result = {url: \"assets/data/fancytreeSub.json\", debugDelay: 500};\n                    },\n                    renderColumns: function (event, data) {\n                        var node = data.node,\n                                $tdList = $(node.tr).find(\">td\");\n                        $tdList.eq(0).text(node.getIndexHier());\n                        $tdList.eq(2).text(!!node.folder);\n                    }\n                });\nBrowsers: chrome Version 68.0.3440.106 (Official Build) (64-bit)\nBut, IE 11 does not have this issue.\nI will prepare a demo page that show the issue soon.\nBut a demo page using a previous release is here http://demo.javatmp.com/JavaTMP-Static-Ajax/#pages/plugins/tree/fancytree/table_fancytree.html\n. Sorry I closed by mistake. Hello Martin, and sorry for delay ..\nsee the following demo page that produce my error:\nhttp://demo.javatmp.com/TEST/#pages/plugins/tree/fancytree/table_fancytree.html\n. ",
    "AkibS": "Hello,\nI have created video regarding steps to reproduce along with the jsfiddle example.\nexample used:\nhttp://wwwendt.de/tech/fancytree/demo/#sample-ext-columnview.html\nJS Fiddle:\nhttp://jsfiddle.net/ve0txL68/\nAttached video to reproduce:\nRecording #2.zip\nHope this will help!\nThanks in advance.\n. Thank you Martin,\nFor reverting back and that \"Column View\" is very great functionality (Implementation) of fancy tree.\nif only these bugs were crushed. \nThanks again!. Thank Martin for your time,\nBut this issue which i have described in earlier post is still reproducing.\n. Hello Martin.\nI have solved this problem with quick hack.\nAdded CSS:\n````\nspan.fancytree-exp-nl span.fancytree-title + span.fancytree-icon.fancytree-cv-right{\n    display : none;\n  }\nspan.fancytree-exp-n span.fancytree-title + span.fancytree-icon.fancytree-cv-right{\n    display : none;\n  }\n````\nand for removing all child nodes:\n`function removeAllNode(node){\n        if (node.hasChildren()) {\n            while (node.children != null) {\n                removeAllNode(node.children[0]);\n            }\n        }\n        node.remove();\n        }`\nattaching jsfiddle link for reference. hope this could help for solving actual issue.\nhttp://jsfiddle.net/ve0txL68/2/\ncheers @mar10 \ud83d\udc4d . Thank you very much Martin!\nI'll check it again.. Hey Thanks for the reply!\nActually this toggle issue is present in following example.\nhttp://wwwendt.de/tech/fancytree/demo/#sample-ext-columnview.html\nSteps to reproduce:\n1. Click on Folder 1\n2. Click on Sub-item 1.1\n3. Then click on  Sub-item 1.1.1\n4. Then again click on Sub-item 1.1 (it will hide the Sub-item 1.1.1)\n5. Then again click on Sub-Item 1.1 (it will not expand Sub-item 1.1.1)\n6. Then if you click on Folder 1 (it will hide the Sub-item 1.1 but if you click again Sub-item 1.1 is not expanding)\nAttaching video for reference.\nRecording #1.zip\nHope this will help to reproduce!\nThanks in advance.\n. ",
    "GeoffLPrice": "So, I figured out my problem....  Turns out I was doing a recursive call to a function called getChildren() on the server side.  Since I'm using lazy loading in the entire second tree, I didn't need to call this.. ",
    "efimovkd": "Probably it is necessary to handle the \"keypress\"\njquery.fancytree-all.js: 5207 (2.30.0 dist)\nto correctly determine the pressed letters.\njquery.fancytree-all.js: 3389-3390\nAnd make an option a regular expression (/\\w/.test(whichChar))\njquery.fancytree-all.js: 3409. By first test it's work! Thanks!. ",
    "tstuempfig": "Hi,\nwhat do you think about extending the dnd5 plugin with column movement?\ni made some quick hack brute force edits to enable my own ondrag and ondrop handler for the column headers. (see attached unified patch)\nI could think of some callback function to be called when a drop happend on column move. The plugin implementer user could then write the changed column orderinformation somewhere accessible by the columnrender callback. \nft_bruteforce_edits.zip\n. ",
    "JafarAkhondali": "@mar10 Because i didn't know i can call tree.toDict() :sweat_smile: on tree :disappointed: \nMention this on docs please. ",
    "silviagreen": "Corrected in my case changing the code of glyph extension at line 174:\nfrom\njs\nspan.innerHTML = \"\";\nto\njs\nvar counter = $span.find('.fancytree-childcounter');\nspan.innerHTML = \"\";\n$span.append(counter);\n. ",
    "thedimm": "found a workaround:\nnode.setActive();\nnode.tr.scrollIntoView();. ",
    "zertex": "Rewrite by example: https://github.com/mar10/fancytree/wiki/ExtEdit\nAll works! Thanks!!. ",
    "mmourao211": "\nWhat was the symptom that you observed?\n\nNothing actually. We just flagged this when testing jquery dependent libraries for compatibility. But this was flagged during regex scanning of the files, could not actually see any symptoms.\nThanks for fixing.\nOne last question if you don't mind: When supporting jQuery 3.X in fancytree, did you remove all deprecated functionality, or just removed/breaking changes? \nYours,\nMichael. ",
    "solsticesurfer": "I am using the tree.reload() method with the only parameter being the updated URL. The only way to get a sample to work would be for it to have a remote endpoint to call and you would (likely) have to enable network throttling to allow yourself enough time to click through different contexts.. I appreciate the offer for the workaround but the problem will still remain. For the time-being, as a preferred workaround, I'm simply clearing the table's tbody before calling refresh(). It's the only way to make sure this bug doesn't appear.. "
}